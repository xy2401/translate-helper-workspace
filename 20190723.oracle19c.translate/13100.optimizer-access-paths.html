<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="An access path is a technique used by a query to retrieve rows from a row source."></meta>
      <meta name="description" content="An access path is a technique used by a query to retrieve rows from a row source."></meta>
      <title>优化器访问路径</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Tuning Guide"></meta>
      <meta property="og:description" content="An access path is a technique used by a query to retrieve rows from a row source."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Tuning Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-tuning-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-31T14:57:08-08:00"></meta>
      <meta name="dcterms.title" content="SQL Tuning Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2013, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96095-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="sql-operators.html" title="Previous" type="text/html"></link>
      <link rel="next" href="joins.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TGSQL"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="sql-operators.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="joins.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL调优指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="sql-operators.html" property="item" typeof="WebPage"><span property="name">SQL运算符：访问路径和连接</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">优化器访问路径</li>
            </ol>
            <a id="GUID-00711237-35D3-4CFC-A234-59B3EC53DCD1" name="GUID-00711237-35D3-4CFC-A234-59B3EC53DCD1"></a><a id="TGSQL228"></a>
            
            <h2 id="TGSQL-GUID-00711237-35D3-4CFC-A234-59B3EC53DCD1" class="sect2"><span class="enumeration_chapter">8个</span>优化器访问路径</h2>
         </header>
         <div class="ind">
            <div>
               <p><strong class="term">访问路径</strong>是查询用于从行源检索行的技术。
               </p>
               <p>本章包含以下主题：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-CDC8B946-2375-4E5F-B50E-DE1E79EAE4CD">访问路径简介</a><br><strong class="term">行源</strong>是执行计划中的步骤返回的一组行。行源可以是表，视图或连接或分组操作的结果。
                  </li>
                  <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-5594AB70-F3C1-49BA-88ED-0B2011791365">表访问路径</a><br>表是Oracle数据库中数据组织的基本单元。
                  </li>
                  <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-B33945C3-CCC0-4D35-AF62-DB80FD4256A6">B树索引访问路径</a><br><strong class="term">索引</strong>是与表或表集群相关联的可选结构，有时可以加速数据访问。
                  </li>
                  <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-B5E41901-933E-4A31-B5D6-9771FD435EC0">位图索引访问路径</a><br>位图索引将索引数据与rowid范围组合在一起。
                  </li>
                  <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-4D114CC6-15A8-4CE0-A826-4E53DFD184CA">表群集访问路径</a><br><strong class="term">表簇</strong>是一组表，它们共享公共列并在相同的块中存储相关数据。当表被群集时，单个数据块可以包含来自多个表的行。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="sql-operators.html#GUID-37BA8AC8-B8F5-402E-8398-552AFDACED8E" title="行源是执行计划中的步骤返回的一组行。SQL运算符作用于行源。">SQL运算符：访问路径和联接</a></p>
                  </div>
               </div>
            </div>
            <a id="TGSQL94943"></a><a id="TGSQL229"></a><div class="props_rev_3"><a id="GUID-CDC8B946-2375-4E5F-B50E-DE1E79EAE4CD" name="GUID-CDC8B946-2375-4E5F-B50E-DE1E79EAE4CD"></a><h3 id="TGSQL-GUID-CDC8B946-2375-4E5F-B50E-DE1E79EAE4CD" class="sect3"><span class="enumeration_section">8.1</span>访问路径简介</h3>
               <div>
                  <p><strong class="term">行源</strong>是执行计划中的步骤返回的一组行。行源可以是表，视图或连接或分组操作的结果。
                  </p>
                  <p>诸如<a href="glossary.html#GUID-22DF198C-4310-4307-BF29-DCE765725BD4"><span class="xrefglossterm">访问路径之</span></a>类的一元操作（其是查询用于从行源检索行的技术）接受单行源作为输入。例如，全表扫描是检索单行源的行。相反，连接是二进制的，并且恰好从两个行源接收输入</p>
                  <p>数据库对不同的关系数据结构使用不同的访问路径。下表总结了主要数据结构的常见访问路径。</p>
                  <div class="tblformalwide" id="GUID-CDC8B946-2375-4E5F-B50E-DE1E79EAE4CD__CHDBEIFB">
                     <p class="titleintable">表8-1数据结构和访问路径</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="数据结构和访问路径" width="100%" border="1" summary="Access paths" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="27%" id="d37861e302">访问路径</th>
                              <th align="left" valign="bottom" width="18%" id="d37861e305">堆组织表</th>
                              <th align="left" valign="bottom" width="18%" id="d37861e308">B树索引和物联网</th>
                              <th align="left" valign="bottom" width="18%" id="d37861e311">位图索引</th>
                              <th align="left" valign="bottom" width="18%" id="d37861e314">表集群</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d37861e319" headers="d37861e302 ">
                                 <p><a href="optimizer-access-paths.html#GUID-461E7071-2229-4F60-82E6-BC4F6FC8D23B" title="全表扫描从表中读取所有行，然后过滤掉那些不符合选择条件的行。">全表扫描</a></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e319 d37861e305 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e319 d37861e308 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e319 d37861e311 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e319 d37861e314 ">
                                 <p></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d37861e339" headers="d37861e302 ">
                                 <p><a href="optimizer-access-paths.html#GUID-4180BA97-3E2C-41F9-B282-4FB3FF9532CB" title="rowid是数据存储位置的内部表示。">Rowid的表访问</a></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e339 d37861e305 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e339 d37861e308 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e339 d37861e311 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e339 d37861e314 ">
                                 <p></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d37861e359" headers="d37861e302 ">
                                 <p><a href="optimizer-access-paths.html#GUID-720EA54F-AB65-4379-99A3-CAE166590127" title="示例表扫描从简单表或复杂SELECT语句（例如涉及联接和视图的语句）中检索随机数据样本。">样本表扫描</a></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e359 d37861e305 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e359 d37861e308 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e359 d37861e311 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e359 d37861e314 ">
                                 <p></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d37861e382" headers="d37861e302 ">
                                 <p><a href="optimizer-access-paths.html#GUID-273588A7-A8E9-4E1E-BE35-060073533B47" title="索引唯一扫描最多返回1个rowid。">索引唯一扫描</a></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e382 d37861e305 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e382 d37861e308 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e382 d37861e311 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e382 d37861e314 ">
                                 <p></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d37861e402" headers="d37861e302 ">
                                 <p><a href="optimizer-access-paths.html#GUID-E2353939-DFBD-444A-94BC-2497E2A418D1" title="索引范围扫描是值的有序扫描。">指数范围扫描</a></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e402 d37861e305 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e402 d37861e308 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e402 d37861e311 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e402 d37861e314 ">
                                 <p></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d37861e422" headers="d37861e302 ">
                                 <p><a href="optimizer-access-paths.html#GUID-3D9D3DBD-CF89-4320-8C5E-6BE6A127AC39" title="索引完全扫描按顺序读取整个索引。索引完全扫描可以消除单独的排序操作，因为索引中的数据按索引键排序。">索引完全扫描</a></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e422 d37861e305 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e422 d37861e308 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e422 d37861e311 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e422 d37861e314 ">
                                 <p></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d37861e442" headers="d37861e302 ">
                                 <p><a href="optimizer-access-paths.html#GUID-A2F2A81F-4626-45A1-B2A6-D46107E74C3C" title="索引快速完全扫描以未排序的顺序读取索引块，因为它们存在于磁盘上。此扫描不使用索引来探测表，而是使用索引本身作为表来读取索引而不是表。">索引快速完全扫描</a></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e442 d37861e305 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e442 d37861e308 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e442 d37861e311 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e442 d37861e314 ">
                                 <p></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d37861e462" headers="d37861e302 ">
                                 <p><a href="optimizer-access-paths.html#GUID-B7C62F0F-EB7C-422C-919D-D86456A74A60" title="当复合索引的初始列为时，会发生索引跳过扫描" skippe="=" ="">索引跳过扫描</a></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e462 d37861e305 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e462 d37861e308 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e462 d37861e311 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e462 d37861e314 ">
                                 <p></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d37861e482" headers="d37861e302 ">
                                 <p><a href="optimizer-access-paths.html#GUID-21258F63-7506-4019-9FB4-323E9D2DE087" title="索引连接扫描是多个索引的散列连接，它们一起返回查询请求的所有列。数据库不需要访问表，因为从索引中检索所有数据。">索引加入扫描</a></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e482 d37861e305 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e482 d37861e308 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e482 d37861e311 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e482 d37861e314 ">
                                 <p></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d37861e499" headers="d37861e302 ">
                                 <p><a href="optimizer-access-paths.html#GUID-E8F4A411-10BE-4D5E-9207-0D5F8E61A8E0" title="此类访问路径使用位图索引来查找单个键值。">位图索引单值</a></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e499 d37861e305 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e499 d37861e308 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e499 d37861e311 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e499 d37861e314 ">
                                 <p></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d37861e516" headers="d37861e302 ">
                                 <p><a href="optimizer-access-paths.html#GUID-9123D7CE-90DC-4C96-AB4F-49FD0227C40B" title="此类访问路径使用位图索引来查找一系列值。">位图索引范围扫描</a></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e516 d37861e305 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e516 d37861e308 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e516 d37861e311 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e516 d37861e314 ">
                                 <p></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d37861e534" headers="d37861e302 ">
                                 <p><a href="optimizer-access-paths.html#GUID-2FDE5904-B0BC-44DA-829B-94C89FA77D71" title="此访问路径合并多个位图，并返回单个位图作为结果。">位图合并</a></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e534 d37861e305 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e534 d37861e308 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e534 d37861e311 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e534 d37861e314 ">
                                 <p></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d37861e551" headers="d37861e302 ">
                                 <p>位图索引范围扫描</p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e551 d37861e305 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e551 d37861e308 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e551 d37861e311 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e551 d37861e314 ">
                                 <p></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d37861e564" headers="d37861e302 ">
                                 <p><a href="optimizer-access-paths.html#GUID-DB9438B3-6FA1-4EE9-A782-3DD271A59285" title="索引集群是一个表集群，它使用索引来定位数据。">群集扫描</a></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e564 d37861e305 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e564 d37861e308 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e564 d37861e311 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e564 d37861e314 ">
                                 <p>X</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="27%" id="d37861e584" headers="d37861e302 ">
                                 <p><a href="optimizer-access-paths.html#GUID-8CBC58C9-A82E-4A2A-B2C1-5A728C4F4726" title="散列集群就像一个索引集群，除了索引键被散列函数替换。不存在单独的集群索引。">哈希扫描</a></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e584 d37861e305 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e584 d37861e308 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e584 d37861e311 ">
                                 <p></p>
                              </td>
                              <td align="left" valign="top" width="18%" headers="d37861e584 d37861e314 ">
                                 <p>X</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>优化程序会考虑不同的可能执行计划，然后为每个计划分配一个<a href="glossary.html#GUID-7FCF0F80-65B5-4F76-A521-91ABD109DA17"><span class="xrefglossterm">成本</span></a> 。优化程序选择成本最低的计划。通常，索引访问路径对于检索表行的一小部分子句的语句更有效，而全表扫描在访问表的大部分时更有效。
                  </p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-CDC8B946-2375-4E5F-B50E-DE1E79EAE4CD__GUID-D7E0ABDA-3F46-4FA9-912F-1A82B9DF0B7E">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="joins.html#GUID-BD96F1B4-76D4-43DF-98B6-D07F46838C4A" title="Oracle数据库为加入行集提供了多种优化。">加入</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="query-optimizer-concepts.html#GUID-B743F9BE-9971-4CD1-8C0C-0EAF7C80E5F2" title="查询优化是选择执行SQL语句的最有效方法的过程。">基于成本的优化</a> ”</span></p>
                        </li>
                        <li>
                           <p><a href="../cncpt/oracle-relational-structures.html#CNCPT88798" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a> ，了解这些结构的概述</p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-00711237-35D3-4CFC-A234-59B3EC53DCD1" title="访问路径是查询用于从行源检索行的技术。">优化程序访问路径</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TGSQL230"></a><div class="props_rev_3"><a id="GUID-5594AB70-F3C1-49BA-88ED-0B2011791365" name="GUID-5594AB70-F3C1-49BA-88ED-0B2011791365"></a><h3 id="TGSQL-GUID-5594AB70-F3C1-49BA-88ED-0B2011791365" class="sect3"><span class="enumeration_section">8.2</span>表访问路径</h3>
               <div>
                  <p>表是Oracle数据库中数据组织的基本单元。</p>
                  <p>关系表是最常见的表类型。关系表具有以下组织特征：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="glossary.html#GUID-04AD2CD1-66B1-4CFF-93EA-4ACAABAF18F3"><span class="xrefglossterm">堆组织表</span></a>不以任何特定顺序存储行。
                        </p>
                     </li>
                     <li>
                        <p><a href="glossary.html#GUID-B4FADC41-B1BD-48E6-BCB6-D0D3E34928B1"><span class="xrefglossterm">索引组织表</span></a>根据主键值对行进行排序。
                        </p>
                     </li>
                     <li>
                        <p><a href="glossary.html#GUID-02DC6035-1B32-4E92-8961-9DA5457A9EC8"><span class="xrefglossterm">外部表</span></a>是只读表，其元数据存储在数据库中，但其数据存储在数据库外部。
                        </p>
                     </li>
                  </ul>
                  <p>本节介绍堆组织表的优化程序访问路径，并包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-53905BCD-3EAD-4B44-8CCC-C442A80647E8">关于堆组织表访问</a><br>默认情况下，表被组织为堆，这意味着数据库将行放在最适合的位置而不是用户指定的顺序。
                     </li>
                     <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-461E7071-2229-4F60-82E6-BC4F6FC8D23B">全表扫描</a><br><strong class="term">全表扫描</strong>从<strong class="term">表中</strong>读取所有行，然后过滤掉那些不符合选择条件的行。
                     </li>
                     <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-4180BA97-3E2C-41F9-B282-4FB3FF9532CB">Rowid的表访问</a><br><strong class="term">rowid</strong>是数据存储位置的内部表示。
                     </li>
                     <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-720EA54F-AB65-4379-99A3-CAE166590127">样本表扫描</a><br><strong class="term">示例表扫描</strong>从简单表或复杂<code class="codeph">SELECT</code>语句（例如涉及联接和视图的语句）中检索随机数据样本。
                     </li>
                     <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-E699E03C-2689-4B56-B303-8E8529C5D99E">内存表扫描</a><br><strong class="term">内存中扫描</strong>从内存中列存储（IM列存储）中检索行。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-5594AB70-F3C1-49BA-88ED-0B2011791365__GUID-9C775604-EBBA-4AAF-88AB-A4B677BEC52D">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=CNCPT211" target="_blank"><span><cite>Oracle数据库概念，</cite></span></a>用于表的概述</p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=ADMIN015" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> ，了解如何管理表</p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-00711237-35D3-4CFC-A234-59B3EC53DCD1" title="访问路径是查询用于从行源检索行的技术。">优化程序访问路径</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL95143"></a><div class="props_rev_3"><a id="GUID-53905BCD-3EAD-4B44-8CCC-C442A80647E8" name="GUID-53905BCD-3EAD-4B44-8CCC-C442A80647E8"></a><h4 id="TGSQL-GUID-53905BCD-3EAD-4B44-8CCC-C442A80647E8" class="sect4"><span class="enumeration_section">8.2.1</span>关于堆组织表访问</h4>
                  <div>
                     <p>默认情况下，表被组织为堆，这意味着数据库将行放在最适合的位置而不是用户指定的顺序。</p>
                     <p>当用户添加行时，数据库将行放在数据段中的第一个可用空闲空间中。不保证按照插入顺序检索行。</p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-EA472E2B-C155-4510-80AA-3E033C7C74AA">数据块和段中的行存储：入门</a><br>数据库存储数据块中的行。在表中，数据库可以在块的底部的任何位置写入一行。Oracle数据库使用块开销（包含行目录和表目录）来管理块本身。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-4D0E9BF1-2A89-4CB4-A165-936C656BD48E">用于行访问的Rowid的重要性</a><br>堆组织表中的每一行都有一个对该表唯一的rowid，它对应于一个行块的物理地址。rowid是一行的10字节物理地址。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-1F4CDA9A-7419-44F6-89E0-395C92285015">直接路径读取</a><br>在<strong class="term">直接路径读取中</strong> ，数据库将磁盘中的缓冲区直接读入PGA，完全绕过SGA。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-5594AB70-F3C1-49BA-88ED-0B2011791365" title="表是Oracle数据库中数据组织的基本单元。">表访问路径</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL95144"></a><div class="props_rev_3"><a id="GUID-EA472E2B-C155-4510-80AA-3E033C7C74AA" name="GUID-EA472E2B-C155-4510-80AA-3E033C7C74AA"></a><h5 id="TGSQL-GUID-EA472E2B-C155-4510-80AA-3E033C7C74AA" class="sect5"><span class="enumeration_section">8.2.1.1</span>数据块和段中的行存储：入门</h5>
                     <div>
                        <p>数据库存储数据块中的行。在表中，数据库可以在块的底部的任何位置写入一行。Oracle数据库使用块开销（包含行目录和表目录）来管理块本身。</p>
                        <p>范围由逻辑上连续的数据块组成。这些块在磁盘上可能不是物理上连续的。段是一组扩展区，包含表空间中逻辑存储结构的所有数据。例如，Oracle数据库分配一个或多个扩展区以形成表的数据段。数据库还分配一个或多个扩展区以形成表的索引段。</p>
                        <p>默认情况下，数据库对永久的本地管理表空间使用自动段空间管理（ASSM）。当会话首次将数据插入表中时，数据库会格式化位图块。位图跟踪段中的块。数据库使用位图查找空闲块，然后在写入之前格式化每个块。ASSM在块之间展开插入以避免并发问题。</p>
                        <p>高水位线（HWM）是段中的一个点，超出该段的数据块未被格式化并且从未使用过。在HWM下面，可以格式化块并将其写入，格式化，清空或未格式化。低高水位线（低HWM）标志着已知所有块都被格式化的点，因为它们包含数据或以前包含的数据。</p>
                        <p>在全表扫描期间，数据库读取所有已知格式化的低HWM块，然后读取段位图以确定HWM和低HWM之间的哪些块已格式化且可安全读取。数据库知道不读取HWM，因为这些块未格式化。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-EA472E2B-C155-4510-80AA-3E033C7C74AA__GUID-F33A8345-E61E-4739-BDB0-C19185340131">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../cncpt/logical-storage-structures.html#CNCPT302" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a>了解数据块存储</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-53905BCD-3EAD-4B44-8CCC-C442A80647E8" title="默认情况下，表被组织为堆，这意味着数据库将行放在最适合的位置而不是用户指定的顺序。">关于堆组织表访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95145"></a><div class="props_rev_3"><a id="GUID-4D0E9BF1-2A89-4CB4-A165-936C656BD48E" name="GUID-4D0E9BF1-2A89-4CB4-A165-936C656BD48E"></a><h5 id="TGSQL-GUID-4D0E9BF1-2A89-4CB4-A165-936C656BD48E" class="sect5"><span class="enumeration_section">8.2.1.2</span>用于行访问的Rowid的重要性</h5>
                     <div>
                        <p>堆组织表中的每一行都有一个对该表唯一的rowid，它对应于一个行块的物理地址。rowid是一行的10字节物理地址。</p>
                        <p>rowid指向特定的文件，块和行号。例如，在rowid <code class="codeph">AAAPecAAFAAAABSAAA</code> ，最终的<code class="codeph">AAA</code>表示行号。行号是行目录条目的索引。行目录条目包含指向块上行的位置的指针。
                        </p>
                        <p>数据库有时可以在块的底部移动一行。例如，如果启用了行移动，则由于分区键更新，闪回表操作，缩小表操作等，该行可以移动。如果数据库在块中移动一行，则数据库将更新行目录条目以修改指针。rowid保持不变。</p>
                        <p>Oracle数据库在内部使用rowid来构建索引。例如，B树索引中的每个键与指向相关行的地址的rowid相关联。物理rowid提供对表行的最快访问，使数据库能够在单个I / O中检索行。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-4D0E9BF1-2A89-4CB4-A165-936C656BD48E__GUID-E04D4DBA-8362-4E07-A538-C177E0E8CDD8">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../cncpt/tables-and-table-clusters.html#CNCPT1130" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a>了解rowid</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-53905BCD-3EAD-4B44-8CCC-C442A80647E8" title="默认情况下，表被组织为堆，这意味着数据库将行放在最适合的位置而不是用户指定的顺序。">关于堆组织表访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95147"></a><a id="TGSQL95146"></a><div class="props_rev_3"><a id="GUID-1F4CDA9A-7419-44F6-89E0-395C92285015" name="GUID-1F4CDA9A-7419-44F6-89E0-395C92285015"></a><h5 id="TGSQL-GUID-1F4CDA9A-7419-44F6-89E0-395C92285015" class="sect5"><span class="enumeration_section">8.2.1.3</span>直接路径读取</h5>
                     <div>
                        <p>在<strong class="term">直接路径读取中</strong> ，数据库将磁盘中的缓冲区直接读入PGA，完全绕过SGA。
                        </p>
                        <p>下图显示了分散读取和顺序读取之间的区别，它们在SGA中存储缓冲区，以及直接路径读取。</p>
                        <div class="figure" id="GUID-1F4CDA9A-7419-44F6-89E0-395C92285015__CHDBIAGB">
                           <p class="titleinfigure">图8-1直接路径读取</p><img src="img/pfgrf210.png" alt="下面是图8-1的描述" title="下面是图8-1的描述" longdesc="img_text/pfgrf210.html"><br><a href="img_text/pfgrf210.html">“图8-1直接路径读取”的描述</a></div>
                        <!-- class="figure" -->
                        <p>Oracle数据库可以执行直接路径读取的情况包括：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>执行<code class="codeph">CREATE TABLE AS SELECT</code>语句</p>
                           </li>
                           <li>
                              <p>执行<code class="codeph">ALTER REBUILD</code>或<code class="codeph">ALTER MOVE</code>语句</p>
                           </li>
                           <li>
                              <p>从临时表空间读取</p>
                           </li>
                           <li>
                              <p>并行查询</p>
                           </li>
                           <li>
                              <p>从LOB段读取</p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-1F4CDA9A-7419-44F6-89E0-395C92285015__GUID-6DE2D59E-00C7-435C-8B62-4653039FA16C">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=TGDBA-GUID-2833BD11-FDF6-4134-A0DD-62E8CB32AE2C" target="_blank"><span><cite>Oracle数据库性能调优指南</cite></span></a> ，了解直接路径读取的等待事件</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-53905BCD-3EAD-4B44-8CCC-C442A80647E8" title="默认情况下，表被组织为堆，这意味着数据库将行放在最适合的位置而不是用户指定的顺序。">关于堆组织表访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL231"></a><div class="props_rev_3"><a id="GUID-461E7071-2229-4F60-82E6-BC4F6FC8D23B" name="GUID-461E7071-2229-4F60-82E6-BC4F6FC8D23B"></a><h4 id="TGSQL-GUID-461E7071-2229-4F60-82E6-BC4F6FC8D23B" class="sect4"><span class="enumeration_section">8.2.2</span>全表扫描</h4>
                  <div>
                     <p><strong class="term">全表扫描</strong>从<strong class="term">表中</strong>读取所有行，然后过滤掉那些不符合选择条件的行。
                     </p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-0AC1AB0B-D0E6-4F77-823A-7CB56E375C32">优化程序何时考虑全表扫描</a><br>通常，优化程序在无法使用不同的访问路径时选择全表扫描，或者另一个可用的访问路径成本较高。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-EA237A0C-5C39-4797-89F9-2F38566B10D8">全表扫描的工作原理</a><br>在全表扫描中，数据库按顺序读取高水位线下的每个格式化块。数据库只读取每个块一次。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-56D159A8-DA06-4777-8407-625AC9ED1122">全表扫描：示例</a><br>此示例扫描<code class="codeph">hr.employees</code>表。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-5594AB70-F3C1-49BA-88ED-0B2011791365" title="表是Oracle数据库中数据组织的基本单元。">表访问路径</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL94944"></a><div class="props_rev_3"><a id="GUID-0AC1AB0B-D0E6-4F77-823A-7CB56E375C32" name="GUID-0AC1AB0B-D0E6-4F77-823A-7CB56E375C32"></a><h5 id="TGSQL-GUID-0AC1AB0B-D0E6-4F77-823A-7CB56E375C32" class="sect5"><span class="enumeration_section">8.2.2.1</span>优化器考虑全表扫描时</h5>
                     <div>
                        <p>通常，优化程序在无法使用不同的访问路径时选择全表扫描，或者另一个可用的访问路径成本较高。</p>
                        <p>下表显示了选择全表扫描的典型原因。</p>
                        <div class="tblformal" id="GUID-0AC1AB0B-D0E6-4F77-823A-7CB56E375C32__GUID-249DD13F-8CFA-4F2A-A330-1DD717F6D2EC">
                           <p class="titleintable">表8-2全表扫描的典型原因</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="全表扫描的典型原因" border="1" summary="This table lists some of the reasons for a full table scan. The table contains links for more information." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d37861e1710">原因</th>
                                    <th align="left" valign="bottom" width="20%" id="d37861e1712">说明</th>
                                    <th align="left" valign="bottom" width="20%" id="d37861e1714">了解更多</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d37861e1718" headers="d37861e1710 ">
                                       <p>没有索引。</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d37861e1718 d37861e1712 ">
                                       <p>如果不存在索引，则优化程序使用全表扫描。</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d37861e1718 d37861e1714 ">
                                       <p><a href="../cncpt/indexes-and-index-organized-tables.html#CNCPT-GUID-DE7A95BC-6E4A-47EA-9FC5-B85B54F8CF41" target="_blank"><span><cite>Oracle数据库概念</cite></span></a></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d37861e1732" headers="d37861e1710 ">
                                       <p>查询谓词将函数应用于索引列。</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d37861e1732 d37861e1712 ">
                                       <p>除非索引是基于函数的索引，否则数据库会索引列的值，而不是应用函数的列的值。典型的应用程序级错误是索引字符列（如<code class="codeph">char_col</code> ，然后使用<code class="codeph">WHERE char_col=1</code>等语法查询列。数据库隐式地将<code class="codeph">TO_NUMBER</code>函数应用于常数<code class="codeph">1</code> ，这会阻止使用索引。
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d37861e1732 d37861e1714 ">
                                       <p><a href="../adfns/indexes.html#GUID-44AD4D28-A056-4977-B2F7-AC1BC50EDC87" target="_blank"><span><cite>Oracle数据库开发指南</cite></span></a></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d37861e1758" headers="d37861e1710 ">
                                       <p>发出<code class="codeph">SELECT COUNT(*)</code>查询，并且存在索引，但索引列包含空值。
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d37861e1758 d37861e1712 ">
                                       <p>优化程序无法使用索引来计算表行数，因为索引不能包含空条目。</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d37861e1758 d37861e1714 "><span class="q">“ <a href="optimizer-access-paths.html#GUID-AD533A0C-E46F-4FB0-8C34-881A0E30E93A" title="B树索引从不存储完全空键，这对于优化器选择访问路径的方式很重要。此规则的结果是单列B树索引从不存储空值。">B树索引和空白</a> ”</span></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d37861e1775" headers="d37861e1710 ">
                                       <p>查询谓词不使用B树索引的前沿。</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d37861e1775 d37861e1712 ">
                                       <p>例如， <code class="codeph">employees(first_name,last_name)</code>可能存在索引<code class="codeph">employees(first_name,last_name)</code> 。如果用户使用谓词<code class="codeph">WHERE last_name='KING'</code>发出查询，则优化程序可能不会选择索引，因为列<code class="codeph">first_name</code>不在谓词中。但是，在这种情况下，优化器可能会选择使用索引跳过扫描。
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d37861e1775 d37861e1714 "><span class="q">“ <a href="optimizer-access-paths.html#GUID-B7C62F0F-EB7C-422C-919D-D86456A74A60" title="当复合索引的初始列为时，会发生索引跳过扫描" skippe="=" ="">索引跳过扫描</a> ”</span></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d37861e1801" headers="d37861e1710 ">
                                       <p>该查询是无<a href="glossary.html#GUID-EFB55786-83D3-4DFF-A534-052B0BF3BA62"><span class="xrefglossterm">选择的</span></a> 。
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d37861e1801 d37861e1712 ">
                                       <p>如果优化器确定查询需要表中的大多数块，则它使用全表扫描，即使索引可用。全表扫描可以使用更大的I / O调用。减少大量I / O呼叫比制作许多小型呼叫要便宜。</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d37861e1801 d37861e1714 ">
                                       <p><span class="q">“ <a href="query-optimizer-concepts.html#GUID-60B12417-9E06-4F3F-B796-DF86549A5B21" title="选择性表示行集中的一小部分行。">选择性</a> ”</span></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d37861e1822" headers="d37861e1710 ">
                                       <p>表统计数据陈旧。</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d37861e1822 d37861e1712 ">
                                       <p>例如，一张桌子很小，但现在变大了。如果表统计信息过时且未反映表的当前大小，则优化程序不知道索引现在比完整表扫描最有效。</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d37861e1822 d37861e1714 "><span class="q">“ <a href="optimizer-statistics-concepts.html#GUID-AEE74FB8-98BD-416B-8EA0-32CD605DF64E" title="优化程序成本模型依赖于收集的有关查询中涉及的对象的统计信息，以及运行查询的数据库和主机。">优化器统计简介</a> ”</span></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d37861e1839" headers="d37861e1710 ">
                                       <p>桌很小。</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d37861e1839 d37861e1712 ">
                                       <p>如果表在高水位线下包含少于<span class="italic">n</span>个块，其中<span class="italic">n</span>等于<code class="codeph">DB_FILE_MULTIBLOCK_READ_COUNT</code>初始化参数的设置，则全表扫描可能比索引范围扫描便宜。无论访问的表的比例或索引存在，扫描都可以更便宜。
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d37861e1839 d37861e1714 ">
                                       <p><a href="../refrn/DB_FILE_MULTIBLOCK_READ_COUNT.html#REFRN-GUID-69E45087-14DF-492B-B55A-8F2E936947A5" target="_blank"><span><cite>Oracle数据库参考</cite></span></a> 
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d37861e1863" headers="d37861e1710 ">
                                       <p>该表具有高度的并行性。</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d37861e1863 d37861e1712 ">
                                       <p>表的高度并行性使优化器在范围扫描中倾向于全表扫描。查询<code class="codeph">ALL_TABLES.DEGREE</code>列中的值以确定并行度。
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d37861e1863 d37861e1714 ">
                                       <p><a href="../refrn/ALL_TABLES.html#REFRN-GUID-6823CD28-0681-468E-950B-966C6F71325D" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d37861e1880" headers="d37861e1710 ">
                                       <p>该查询使用全表扫描提示。</p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d37861e1880 d37861e1712 ">
                                       <p>提示<code class="codeph">FULL( <span class="codeinlineitalic"><code class="codeph">table</code></span> <span class="codeinlineitalic"><code class="codeph">alias</code></span> )</code>指示优化器使用全表扫描。
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d37861e1880 d37861e1714 ">
                                       <p><a href="../sqlrf/Comments.html#SQLRF-GUID-581F6C91-1395-4ED0-81DE-59AE168FE183" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-461E7071-2229-4F60-82E6-BC4F6FC8D23B" title="全表扫描从表中读取所有行，然后过滤掉那些不符合选择条件的行。">全表扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL94945"></a><div class="props_rev_3"><a id="GUID-EA237A0C-5C39-4797-89F9-2F38566B10D8" name="GUID-EA237A0C-5C39-4797-89F9-2F38566B10D8"></a><h5 id="TGSQL-GUID-EA237A0C-5C39-4797-89F9-2F38566B10D8" class="sect5"><span class="enumeration_section">8.2.2.2</span>全表扫描的工作<span class="enumeration_section">原理</span></h5>
                     <div>
                        <p>在全表扫描中，数据库按顺序读取高水位线下的每个格式化块。数据库只读取每个块一次。</p>
                        <p>下图描绘了对表段的扫描，显示了扫描如何跳过高水位线下方的未格式化块。</p>
                        <div class="figure" id="GUID-EA237A0C-5C39-4797-89F9-2F38566B10D8__GUID-90C91871-1DAC-49F4-B385-66955E3CB781">
                           <p class="titleinfigure">图8-2高水位标记</p><img src="img/cncpt371.png" alt="下面是图8-2的描述" title="下面是图8-2的描述" longdesc="img_text/cncpt371.html"><br><a href="img_text/cncpt371.html">“图8-2高水位线”的描述</a></div>
                        <!-- class="figure" -->
                        <p>由于块是相邻的，因此数据库可以通过使I / O调用大于单个块（称为<a href="glossary.html#GUID-D02974BC-8CD2-4BEC-8B9A-3C7D44D90324"><span class="xrefglossterm">多块读取）</span></a>来加速扫描。读取调用的大小范围从一个块到<code class="codeph">DB_FILE_MULTIBLOCK_READ_COUNT</code>初始化参数指定的块数。例如，将此参数设置为<code class="codeph">4</code>指示数据库在一次调用中最多读取4个块。
                        </p>
                        <p>在全表扫描期间缓存块的算法很复杂。例如，数据库根据表是小还是大来缓存块。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-EA237A0C-5C39-4797-89F9-2F38566B10D8__GUID-7E023923-3585-4111-9DCE-FA63202646F6">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="influencing-the-optimizer.html#GUID-C1C85DEA-3583-40FE-B5BB-6AC8F76FFE34__BBAIEADC" title="此双列表描述了控制优化程序行为的初始化参数。第1列是参数。第2列描述了该参数。">表19-2</a> ”</span></p>
                              </li>
                              <li>
                                 <p>有关默认缓存模式概述的<a href="../cncpt/memory-architecture.html#CNCPT1224" target="_blank"><span><cite>Oracle数据库概念</cite></span></a></p>
                              </li>
                              <li>
                                 <p><a href="../refrn/DB_FILE_MULTIBLOCK_READ_COUNT.html#REFRN10037" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解<code class="codeph">DB_FILE_MULTIBLOCK_READ_COUNT</code>初始化参数</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-461E7071-2229-4F60-82E6-BC4F6FC8D23B" title="全表扫描从表中读取所有行，然后过滤掉那些不符合选择条件的行。">全表扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL94947"></a><a id="TGSQL94946"></a><div class="props_rev_3"><a id="GUID-56D159A8-DA06-4777-8407-625AC9ED1122" name="GUID-56D159A8-DA06-4777-8407-625AC9ED1122"></a><h5 id="TGSQL-GUID-56D159A8-DA06-4777-8407-625AC9ED1122" class="sect5"><span class="enumeration_section">8.2.2.3</span>全表扫描：示例</h5>
                     <div>
                        <p>此示例扫描<code class="codeph">hr.employees</code>表。
                        </p>
                        <p>以下声明查询超过4000美元的月薪：</p><pre class="pre codeblock"><code>SELECT salary FROM hr.employees WHERE salary&gt; 4000;</code></pre><div class="example" id="GUID-56D159A8-DA06-4777-8407-625AC9ED1122__CHDEHBCE">
                           <p class="titleinexample">例8-1全表扫描</p>
                           <p>使用<code class="codeph">DBMS_XPLAN.DISPLAY_CURSOR</code>函数检索以下计划。由于<code class="codeph">salary</code>列上不存在索引，因此优化程序无法使用索引范围扫描，因此使用全表扫描。
                           </p><pre class="pre codeblock"><code>SQL_ID 54c20f3udfnws，子编号0 -------------------------------------从hr.employees中选择工资salary&gt; 4000计划哈希值：3476115102 ------------------------------------------ ------------------------------------- | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ----------------------------- | 0 |选择声明| | | | 3（100）| | | * 1 | <span class="bold">表访问完全</span> |员工| 98 | 6762 | 3（0）| 00:00:01 | -------------------------------------------------- -----------------------------谓词信息（由操作ID标识）：------------ --------------------------------------- 1  - 过滤器（“SALARY”&gt; 4000）</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-461E7071-2229-4F60-82E6-BC4F6FC8D23B" title="全表扫描从表中读取所有行，然后过滤掉那些不符合选择条件的行。">全表扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL232"></a><div class="props_rev_3"><a id="GUID-4180BA97-3E2C-41F9-B282-4FB3FF9532CB" name="GUID-4180BA97-3E2C-41F9-B282-4FB3FF9532CB"></a><h4 id="TGSQL-GUID-4180BA97-3E2C-41F9-B282-4FB3FF9532CB" class="sect4"><span class="enumeration_section">8.2.3</span> Rowid的表访问</h4>
                  <div>
                     <p><strong class="term">rowid</strong>是数据存储位置的内部表示。
                     </p>
                     <p>行的rowid指定包含该行的数据文件和数据块以及该块中行的位置。通过指定行来定位行是检索单行的最快方法，因为它指定了数据库中行的确切位置。</p>
                     <div class="infoboxnote" id="GUID-4180BA97-3E2C-41F9-B282-4FB3FF9532CB__GUID-13A8A764-EC23-43C9-A26B-33F23EEF82C8">
                        <p class="notep1">注意：</p>
                        <p>Rowid可以在不同版本之间更改。建议不要根据位置访问数据，因为行可以移动。</p>
                     </div>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-7A2735CC-278A-44AE-A643-670EC859466F">当优化程序选择Rowid的表访问时</a><br>在大多数情况下，数据库在扫描一个或多个索引后通过rowid访问表。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-1E815B8C-990A-4FAE-B87A-0A62D1CA2D32">Rowid的表访问方式如何工作</a><br>要通过rowid访问表，数据库将执行多个步骤。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-7953EB83-0BBA-4700-993A-49C9B5FD254A">Rowid的表访问：示例</a><br>此示例演示<code class="codeph">hr.employees</code>表的rowid访问。
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-4180BA97-3E2C-41F9-B282-4FB3FF9532CB__GUID-6F8A8AB2-A4CD-42A6-A6A4-E8815B52A9F9">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../adfns/sql-data-types.html#GUID-E8E35A33-F4CF-49CB-B2F2-45754F1082DA" target="_blank"><span><cite>Oracle数据库开发指南</cite></span></a> ，了解有关rowid的更多信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-5594AB70-F3C1-49BA-88ED-0B2011791365" title="表是Oracle数据库中数据组织的基本单元。">表访问路径</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL95148"></a><div class="props_rev_3"><a id="GUID-7A2735CC-278A-44AE-A643-670EC859466F" name="GUID-7A2735CC-278A-44AE-A643-670EC859466F"></a><h5 id="TGSQL-GUID-7A2735CC-278A-44AE-A643-670EC859466F" class="sect5"><span class="enumeration_section">8.2.3.1</span>当优化器选择Rowid的表访问时</h5>
                     <div>
                        <p>在大多数情况下，数据库在扫描一个或多个索引后通过rowid访问表。</p>
                        <p>但是，rowid的表访问不需要遵循每个索引扫描。如果索引包含所有需要的列，则可能不会通过rowid进行访问。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-4180BA97-3E2C-41F9-B282-4FB3FF9532CB" title="rowid是数据存储位置的内部表示。">Rowid的表访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95149"></a><div class="props_rev_3"><a id="GUID-1E815B8C-990A-4FAE-B87A-0A62D1CA2D32" name="GUID-1E815B8C-990A-4FAE-B87A-0A62D1CA2D32"></a><h5 id="TGSQL-GUID-1E815B8C-990A-4FAE-B87A-0A62D1CA2D32" class="sect5">8.2.3.2 Rowid的表访问<span class="enumeration_section">方式</span>如何工作</h5>
                     <div>
                        <p>要通过rowid访问表，数据库将执行多个步骤。</p>
                        <p>数据库执行以下操作：</p>
                        <ol>
                           <li>
                              <p>从语句<code class="codeph">WHERE</code>子句或通过一个或多个索引的索引扫描获得所选行的rowid</p>
                              <p>语句中不存在于索引中的列可能需要表访问权限。</p>
                           </li>
                           <li>
                              <p>根据其rowid定位表中的每个选定行</p>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-4180BA97-3E2C-41F9-B282-4FB3FF9532CB" title="rowid是数据存储位置的内部表示。">Rowid的表访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95150"></a><div class="props_rev_3"><a id="GUID-7953EB83-0BBA-4700-993A-49C9B5FD254A" name="GUID-7953EB83-0BBA-4700-993A-49C9B5FD254A"></a><h5 id="TGSQL-GUID-7953EB83-0BBA-4700-993A-49C9B5FD254A" class="sect5"><span class="enumeration_section">8.2.3.3</span> Rowid的表访问：示例</h5>
                     <div>
                        <p>此示例演示<code class="codeph">hr.employees</code>表的rowid访问。
                        </p>
                        <p>假设您运行以下查询：</p><pre class="pre codeblock"><code>SELECT * FROM employees WHERE employee_id&gt; 190;</code></pre><p>以下计划的步骤2显示了<code class="codeph">hr.employees</code>表上<code class="codeph">emp_emp_id_pk</code>索引的范围扫描。数据库使用从索引获取的rowid来查找<code class="codeph">employees</code>表中的相应行，然后检索它们。步骤1中显示的<code class="codeph">BATCHED</code>访问意味着数据库从索引中检索一些rowid，然后尝试按块顺序访问行以改进群集并减少数据库必须访问块的次数。
                        </p><pre class="pre codeblock"><code>-------------------------------------------------- ------------------------------ | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ------------------------------ | 0 |选择声明| | | | 2（100）| | | 1 | <span class="bold">通过INDEX ROWID</span> <span class="bold">批量处理</span> <span class="bold">表访问</span> |员工| 16 | 1104 | 2（0）| <span class="bold">00:00:01</span> | | * 2 | INDEX RANGE SCAN | EMP_EMP_ID_PK | 16 | | 1（0）| 00:00:01 | -------------------------------------------------- ------------------------------谓词信息（由操作ID标识）：----------- ---------------------------------------- 2  -  access（“EMPLOYEE_ID”&gt; 190）</code></pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-4180BA97-3E2C-41F9-B282-4FB3FF9532CB" title="rowid是数据存储位置的内部表示。">Rowid的表访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL233"></a><div class="props_rev_3"><a id="GUID-720EA54F-AB65-4379-99A3-CAE166590127" name="GUID-720EA54F-AB65-4379-99A3-CAE166590127"></a><h4 id="TGSQL-GUID-720EA54F-AB65-4379-99A3-CAE166590127" class="sect4"><span class="enumeration_section">8.2.4</span>样本表扫描</h4>
                  <div>
                     <p><strong class="term">示例表扫描</strong>从简单表或复杂<code class="codeph">SELECT</code>语句（例如涉及联接和视图的语句）中检索随机数据样本。
                     </p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-45CFAC71-059A-4F01-ADE4-DA1D6335519C">优化程序选择样本表扫描时</a><br>当语句<code class="codeph">FROM</code>子句包含<code class="codeph">SAMPLE</code>关键字时，数据库使用示例表扫描。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-6A457780-7495-472A-8DA1-9151370D2E64">样本表扫描：示例</a><br>此示例使用示例表扫描来访问1％的<code class="codeph">employees</code>表，按块而不是行进行采样。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-5594AB70-F3C1-49BA-88ED-0B2011791365" title="表是Oracle数据库中数据组织的基本单元。">表访问路径</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL95151"></a><div class="props_rev_3"><a id="GUID-45CFAC71-059A-4F01-ADE4-DA1D6335519C" name="GUID-45CFAC71-059A-4F01-ADE4-DA1D6335519C"></a><h5 id="TGSQL-GUID-45CFAC71-059A-4F01-ADE4-DA1D6335519C" class="sect5"><span class="enumeration_section">8.2.4.1</span>优化程序选择样本表扫描时</h5>
                     <div>
                        <p>当语句<code class="codeph">FROM</code>子句包含<code class="codeph">SAMPLE</code>关键字时，数据库使用示例表扫描。
                        </p>
                        <p><code class="codeph">SAMPLE</code>子句具有以下形式：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">SAMPLE</code> <code class="codeph">(</code> <span class="italic"><code class="codeph">sample_percent</code></span> <code class="codeph">)</code></p>
                              <p>数据库读取表中指定百分比的行以执行样本表扫描。</p>
                           </li>
                           <li>
                              <p><code class="codeph">SAMPLE BLOCK</code> <code class="codeph">(</code> <span class="italic"><code class="codeph">sample_percent</code></span> <code class="codeph">)</code></p>
                              <p>数据库读取指定百分比的表块以执行样本表扫描。</p>
                           </li>
                        </ul>
                        <p><span class="italic">sample_percent</span>指定要包含在样本中的总行数或块数的百分比。该值必须在<code class="codeph">.000001</code>范围内，但不包括<code class="codeph">100</code> 。此百分比表示为样本选择每行或块采样中的每个行的概率。这并不意味着数据库会精确检索行的<span class="italic">sample_percent</span> 。
                        </p>
                        <div class="infoboxnote" id="GUID-45CFAC71-059A-4F01-ADE4-DA1D6335519C__GUID-ABE26BAF-7F15-4228-B4D8-A2BA5062202C">
                           <p class="notep1">注意：</p>
                           <p>只有在全表扫描或索引快速完整扫描期间才可以进行块采样。如果存在更高效的执行路径，则数据库不会对块进行采样。要保证特定表或索引的块采样，请使用<code class="codeph">FULL</code>或<code class="codeph">INDEX_FFS</code>提示。
                           </p>
                        </div>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-45CFAC71-059A-4F01-ADE4-DA1D6335519C__GUID-B0C84EF2-C915-4560-BF4B-6687BCA1B8DC">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="influencing-the-optimizer.html#GUID-C558F7CF-446E-4078-B045-0B3BB026CB3C" title="优化程序提示是SQL语句中的特殊注释，它将指令传递给优化程序。">用提示影响优化器</a> ”</span></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=SQLRF55293" target="_blank"><span><cite>Oracle Database SQL语言参考</cite></span></a> ，了解<code class="codeph">SAMPLE</code>子句</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-720EA54F-AB65-4379-99A3-CAE166590127" title="示例表扫描从简单表或复杂SELECT语句（例如涉及联接和视图的语句）中检索随机数据样本。">示例表扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL94668"></a><a id="TGSQL95152"></a><div class="props_rev_3"><a id="GUID-6A457780-7495-472A-8DA1-9151370D2E64" name="GUID-6A457780-7495-472A-8DA1-9151370D2E64"></a><h5 id="TGSQL-GUID-6A457780-7495-472A-8DA1-9151370D2E64" class="sect5"><span class="enumeration_section">8.2.4.2</span>样本表扫描：示例</h5>
                     <div>
                        <p>此示例使用示例表扫描来访问1％的<code class="codeph">employees</code>表，按块而不是行进行采样。
                        </p>
                        <div class="example" id="GUID-6A457780-7495-472A-8DA1-9151370D2E64__CHDDGGEF">
                           <p class="titleinexample">例8-2样品表扫描</p><pre class="pre codeblock"><code>SELECT * FROM hr.employees SAMPLE BLOCK（1）;</code></pre><p>此语句的<code class="codeph">EXPLAIN PLAN</code>输出可能如下所示：</p><pre class="pre codeblock"><code>-------------------------------------------------- ----------------------- | Id |操作|名称|行|字节|成本（％CPU）| -------------------------------------------------- ----------------------- | 0 |选择声明| | 1 | 68 | 3（34）| | 1 |表访问示例|员工| 1 | 68 | 3（34）| -------------------------------------------------- -----------------------</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-720EA54F-AB65-4379-99A3-CAE166590127" title="示例表扫描从简单表或复杂SELECT语句（例如涉及联接和视图的语句）中检索随机数据样本。">示例表扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL95355"></a><div class="props_rev_3"><a id="GUID-E699E03C-2689-4B56-B303-8E8529C5D99E" name="GUID-E699E03C-2689-4B56-B303-8E8529C5D99E"></a><h4 id="TGSQL-GUID-E699E03C-2689-4B56-B303-8E8529C5D99E" class="sect4"><span class="enumeration_section">8.2.5</span>内存表扫描</h4>
                  <div>
                     <p><strong class="term">内存中扫描</strong>从内存中列存储（IM列存储）中检索行。
                     </p>
                     <p>IM列存储是一个可选的SGA区域，它以特殊的柱状格式存储表和分区的副本，这些格式针对快速扫描进行了优化。</p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-ED1C6A45-3417-4BD1-AA4F-E6434C96FD9C">优化程序选择内存中表扫描时</a><br>优化程序成本模型了解IM列存储的内容。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-3A5C7459-14CB-4558-914D-4C1279A34648">内存中查询控件</a><br>您可以使用初始化参数控制内存中查询。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-3175639B-34B2-4441-A9A6-33996ED6D1C6">内存表扫描：示例</a><br>此示例显示包含<code class="codeph">TABLE ACCESS INMEMORY</code>操作的执行计划。
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-E699E03C-2689-4B56-B303-8E8529C5D99E__GUID-AE3608EF-11BB-4293-B6B8-7DD07F65929F">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=INMEM-GUID-BFA53515-7643-41E5-A296-654AB4A9F9E7" target="_blank"><span><cite>Oracle Database In-Memory指南</cite></span></a> ，介绍IM列存储</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-5594AB70-F3C1-49BA-88ED-0B2011791365" title="表是Oracle数据库中数据组织的基本单元。">表访问路径</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL95356"></a><div class="props_rev_3"><a id="GUID-ED1C6A45-3417-4BD1-AA4F-E6434C96FD9C" name="GUID-ED1C6A45-3417-4BD1-AA4F-E6434C96FD9C"></a><h5 id="TGSQL-GUID-ED1C6A45-3417-4BD1-AA4F-E6434C96FD9C" class="sect5"><span class="enumeration_section">8.2.5.1</span>优化器选择内存中表扫描时</h5>
                     <div>
                        <p>优化程序成本模型了解IM列存储的内容。</p>
                        <p>当用户执行引用IM列存储中的表的查询时，优化程序会计算所有可能的访问方法（包括内存中表扫描）的成本，并选择成本最低的访问方法。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-E699E03C-2689-4B56-B303-8E8529C5D99E" title="内存中扫描从内存中列存储（IM列存储）中检索行。">内存表扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95357"></a><div class="props_rev_3"><a id="GUID-3A5C7459-14CB-4558-914D-4C1279A34648" name="GUID-3A5C7459-14CB-4558-914D-4C1279A34648"></a><h5 id="TGSQL-GUID-3A5C7459-14CB-4558-914D-4C1279A34648" class="sect5"><span class="enumeration_section">8.2.5.2</span>内存中查询控件</h5>
                     <div>
                        <p>您可以使用初始化参数控制内存中查询。</p>
                        <p>以下数据库初始化参数会影响In-Memory功能：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">INMEMORY_QUERY</code></p>
                              <p>此参数在会话或系统级别启用或禁用数据库的内存中查询。当您想要使用和不使用IM列存储来测试工作负载时，此参数很有用。</p>
                           </li>
                           <li>
                              <p><code class="codeph">OPTIMIZER_INMEMORY_AWARE</code></p>
                              <p>此参数启用（ <code class="codeph">TRUE</code> ）或禁用（ <code class="codeph">FALSE</code> ）对优化程序成本模型，表扩展，布隆过滤器等所做的所有内存中增强。将参数设置为<code class="codeph">FALSE</code>会导致优化程序在优化SQL语句期间忽略表的In-Memory属性。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">OPTIMIZER_FEATURES_ENABLE</code></p>
                              <p>设置为低于<code class="codeph">12.1.0.2</code>值时，此参数与将<code class="codeph">OPTIMIZER_INMEMORY_AWARE</code>设置为<code class="codeph">FALSE</code>具有相同的效果。</p>
                           </li>
                        </ul>
                        <p>要启用或禁用内存中查询，可以指定<code class="codeph">INMEMORY</code>或<code class="codeph">NO_INMEMORY</code>提示，它们是<code class="codeph">INMEMORY_QUERY</code>初始化参数的每个查询等效项。如果SQL语句使用<code class="codeph">INMEMORY</code>提示，但它引用的对象尚未加载到IM列存储中，则数据库不会等待在执行语句之前在IM列存储中填充该对象。但是，对象的初始访问会触发IM列存储中的对象填充。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-3A5C7459-14CB-4558-914D-4C1279A34648__GUID-51B104BF-4927-4799-B015-C2F0B493DD21">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=REFRN10351" target="_blank"><span><cite>Oracle数据库参考</cite></span></a>了解有关<code class="codeph">INMEMORY_QUERY</code> ， <code class="codeph">OPTIMIZER_INMEMORY_AWARE</code>和<code class="codeph">OPTIMIZER_FEATURES_ENABLE</code>初始化参数的更多信息</p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=SQLRF56788" target="_blank"><span><cite>Oracle数据库SQL语言参考，</cite></span></a>以了解有关<code class="codeph">INMEMORY</code>提示的更多信息</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-E699E03C-2689-4B56-B303-8E8529C5D99E" title="内存中扫描从内存中列存储（IM列存储）中检索行。">内存表扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95359"></a><a id="TGSQL95358"></a><div class="props_rev_3"><a id="GUID-3175639B-34B2-4441-A9A6-33996ED6D1C6" name="GUID-3175639B-34B2-4441-A9A6-33996ED6D1C6"></a><h5 id="TGSQL-GUID-3175639B-34B2-4441-A9A6-33996ED6D1C6" class="sect5"><span class="enumeration_section">8.2.5.3</span>内存表扫描：示例</h5>
                     <div>
                        <p>此示例显示包含<code class="codeph">TABLE ACCESS INMEMORY</code>操作的执行计划。
                        </p>
                        <p>以下示例显示了<code class="codeph">oe.product_information</code>表的查询，该表已使用<code class="codeph">INMEMORY HIGH</code>选项进行了更改。
                        </p>
                        <div class="example" id="GUID-3175639B-34B2-4441-A9A6-33996ED6D1C6__CHDEHBHD">
                           <p class="titleinexample">例8-3内存表扫描</p><pre class="pre codeblock"><code>SELECT * FROM oe.product_information WHERE list_price&gt; 10 ORDER BY product_id</code></pre><p>此语句的计划可能如下所示，步骤2中的<code class="codeph">INMEMORY</code>关键字指示从IM列存储中访问了部分或全部对象：</p><pre class="pre codeblock"><code>SQL&gt; SELECT * FROM TABLE（DBMS_XPLAN.DISPLAY_CURSOR）; SQL_ID 2mb4h57x8pabw，子编号0 ------------------------------------- select * from oe.product_information其中list_price&gt; 10 order byproduct_id计划哈希值：2256295385 ---------------------------------------- -------------------------------------------------- -  | Id |操作|名称|行|字节| TempSpc |成本（％CPU）|时间| -------------------------------------------------- ------------------------------------------ | 0 |选择声明| | | | | 21（100）| | | 1 |排序顺序| | 285 | 62415 | 82000 | 21（5）| 00:00:01 | | * 2 | <span class="bold">表访问INMEMORY FULL</span> | PRODUCT_INFORMATION | 285 | 62415 | | 5（0）| 00:00:01 | -------------------------------------------------- ------------------------------------------谓词信息（由操作ID标识） ：------------------------------------------------- -  2  -  inmemory（“LIST_PRICE”&gt; 10）过滤器（“LIST_PRICE”&gt; 10）</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-E699E03C-2689-4B56-B303-8E8529C5D99E" title="内存中扫描从内存中列存储（IM列存储）中检索行。">内存表扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="TGSQL234"></a><div class="props_rev_3"><a id="GUID-B33945C3-CCC0-4D35-AF62-DB80FD4256A6" name="GUID-B33945C3-CCC0-4D35-AF62-DB80FD4256A6"></a><h3 id="TGSQL-GUID-B33945C3-CCC0-4D35-AF62-DB80FD4256A6" class="sect3"><span class="enumeration_section">8.3</span> B树索引访问路径</h3>
               <div>
                  <p><strong class="term">索引</strong>是与表或表集群相关联的可选结构，有时可以加速数据访问。
                  </p>
                  <p>通过在表的一列或多列上创建索引，您可以在某些情况下从表中检索一小组随机分布的行。索引是减少磁盘I / O的众多方法之一。</p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-8BE7E6B2-C8C2-494C-9AE8-8EA252622F7C">关于B树索引访问</a><br>B树是<span class="italic">平衡树的</span>缩写，是最常见的数据库索引类型。
                     </li>
                     <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-273588A7-A8E9-4E1E-BE35-060073533B47">索引唯一扫描</a><br><strong class="term">索引唯一扫描</strong>最多返回1个rowid。
                     </li>
                     <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-E2353939-DFBD-444A-94BC-2497E2A418D1">指数范围扫描</a><br><strong class="term">索引范围扫描</strong>是值的有序扫描。
                     </li>
                     <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-3D9D3DBD-CF89-4320-8C5E-6BE6A127AC39">索引完全扫描</a><br><strong class="term">索引完全扫描</strong>按顺序读取整个索引。索引完全扫描可以消除单独的排序操作，因为索引中的数据按索引键排序。
                     </li>
                     <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-A2F2A81F-4626-45A1-B2A6-D46107E74C3C">索引快速完全扫描</a><br><strong class="term">索引快速完全扫描</strong>以未排序的顺序读取索引块，因为它们存在于磁盘上。此扫描不使用索引来探测表，而是使用索引本身作为表来读取索引而不是表。
                     </li>
                     <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-B7C62F0F-EB7C-422C-919D-D86456A74A60">索引跳过扫描</a><br>当在查询中“跳过”或未指定复合索引的初始列时，会发生<strong class="term">索引跳过扫描</strong> 。
                     </li>
                     <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-21258F63-7506-4019-9FB4-323E9D2DE087">索引加入扫描</a><br>索引连接扫描是多个索引的散列连接，它们一起返回查询请求的所有列。数据库不需要访问表，因为从索引中检索所有数据。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-B33945C3-CCC0-4D35-AF62-DB80FD4256A6__GUID-C8024B4D-F55F-4F8B-ACFE-EF6953A6C4DA">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=CNCPT1170" target="_blank"><span><cite>Oracle Database Concepts，</cite></span></a>用于索引概述</p>
                        </li>
                        <li>
                           <p><a href="../admin/managing-indexes.html#ADMIN016" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> ，了解有关自动和手动索引创建的更多信息</p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-00711237-35D3-4CFC-A234-59B3EC53DCD1" title="访问路径是查询用于从行源检索行的技术。">优化程序访问路径</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL95153"></a><div class="props_rev_3"><a id="GUID-8BE7E6B2-C8C2-494C-9AE8-8EA252622F7C" name="GUID-8BE7E6B2-C8C2-494C-9AE8-8EA252622F7C"></a><h4 id="TGSQL-GUID-8BE7E6B2-C8C2-494C-9AE8-8EA252622F7C" class="sect4"><span class="enumeration_section">8.3.1</span>关于B树索引访问</h4>
                  <div>
                     <p>B树是<span class="italic">平衡树的</span>缩写，是最常见的数据库索引类型。
                     </p>
                     <p><a href="glossary.html#GUID-17862722-BD0C-42A4-A669-1FC18F0EA0C9"><span class="xrefglossterm">B树索引</span></a>是分成范围的有序值列表。通过将键与行或行范围相关联，B树为各种查询提供了出色的检索性能，包括完全匹配和范围搜索。
                     </p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-D25B037E-044A-4172-9305-EC06DB0ED30C">B树索引结构</a><br>B树索引有两种类型的块：用于搜索的分支块和用于存储值的叶块。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-A5337544-10FC-42A4-99E7-988493E21688">索引存储如何影响索引扫描</a><br>位图索引块可以出现在索引段中的任何位置。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-17F4E96E-B649-4A55-9A7C-87D8B57A557C">独特和非独特的索引</a><br>在非唯一索引中，数据库通过将rowid作为额外列附加到键来存储rowid。该条目添加一个长度字节以使密钥唯一。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-AD533A0C-E46F-4FB0-8C34-881A0E30E93A">B树索引和空值</a><br>B树索引从不存储完全空键，这对于优化器选择访问路径的方式很重要。此规则的结果是单列B树索引从不存储空值。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-B33945C3-CCC0-4D35-AF62-DB80FD4256A6" title="索引是与表或表集群相关联的可选结构，有时可以加速数据访问。">B树索引访问路径</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL95154"></a><div class="props_rev_3"><a id="GUID-D25B037E-044A-4172-9305-EC06DB0ED30C" name="GUID-D25B037E-044A-4172-9305-EC06DB0ED30C"></a><h5 id="TGSQL-GUID-D25B037E-044A-4172-9305-EC06DB0ED30C" class="sect5"><span class="enumeration_section">8.3.1.1</span> B树索引结构</h5>
                     <div>
                        <p>B树索引有两种类型的块：用于搜索的分支块和用于存储值的叶块。</p>
                        <p>下图说明了B树索引的逻辑结构。分支块存储在两个密钥之间进行分支决策所需的最小密钥前缀。叶块包含每个索引数据值和用于定位实际行的相应rowid。每个索引条目按（key，rowid）排序。叶块是双重连接的。</p>
                        <div class="figure" id="GUID-D25B037E-044A-4172-9305-EC06DB0ED30C__CHDJJDIG">
                           <p class="titleinfigure">图8-3 B树索引结构</p><img src="img/cncpt244.gif" alt="下面是图8-3的描述" title="下面是图8-3的描述" longdesc="img_text/cncpt244.html"><br><a href="img_text/cncpt244.html">“图8-3 B树索引结构”的描述</a></div>
                        <!-- class="figure" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-8BE7E6B2-C8C2-494C-9AE8-8EA252622F7C" title="B树是平衡树的缩写，是最常见的数据库索引类型。">关于B树索引访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95155"></a><div class="props_rev_3"><a id="GUID-A5337544-10FC-42A4-99E7-988493E21688" name="GUID-A5337544-10FC-42A4-99E7-988493E21688"></a><h5 id="TGSQL-GUID-A5337544-10FC-42A4-99E7-988493E21688" class="sect5"><span class="enumeration_section">8.3.1.2</span>索引存储如何影响索引扫描</h5>
                     <div>
                        <p>位图索引块可以出现在索引段中的任何位置。</p>
                        <p><a href="optimizer-access-paths.html#GUID-D25B037E-044A-4172-9305-EC06DB0ED30C__CHDJJDIG">图8-3</a>显示了彼此相邻的叶块。例如， <code class="codeph">1-10</code>块位于<code class="codeph">11-19</code>块的旁边和之前。此排序说明了连接索引条目的链接列表。但是，索引块不需要在<span class="italic">索引段</span>内按顺序存储。例如， <code class="codeph">246-250</code>块可以出现在段中的任何位置，包括直接在<code class="codeph">1-10</code>块之前。因此，有序索引扫描必须执行单块I / O.数据库必须读取索引块以确定接下来必须读取的索引块。
                        </p>
                        <p>索引块体将索引条目存储在堆中，就像表行一样。例如，如果首先将值<code class="codeph">10</code>插入表中，则可以将具有键<code class="codeph">10</code>的索引条目插入索引块的底部。如果在表中接下来插入<code class="codeph">0</code> ，则键<code class="codeph">0</code>的索引条目可能会插入到条目<code class="codeph">10</code>顶部。因此，块<span class="italic">体</span>中的索引条目不按密钥顺序存储。但是，在索引块中，行标题按键顺序存储记录。例如，标题中的第一个记录指向带有键<code class="codeph">0</code>的索引条目，依此类推，直到指向带有键<code class="codeph">10</code>的索引条目的记录。因此，索引扫描可以读取行标题以确定开始和结束范围扫描的位置，从而避免了读取块中每个条目的必要性。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-A5337544-10FC-42A4-99E7-988493E21688__GUID-62381F81-A5C7-40CA-9733-3B10B4730931">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../cncpt/logical-storage-structures.html#CNCPT89223" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a>了解索引块</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-8BE7E6B2-C8C2-494C-9AE8-8EA252622F7C" title="B树是平衡树的缩写，是最常见的数据库索引类型。">关于B树索引访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95156"></a><div class="props_rev_3"><a id="GUID-17F4E96E-B649-4A55-9A7C-87D8B57A557C" name="GUID-17F4E96E-B649-4A55-9A7C-87D8B57A557C"></a><h5 id="TGSQL-GUID-17F4E96E-B649-4A55-9A7C-87D8B57A557C" class="sect5"><span class="enumeration_section">8.3.1.3</span>唯一和非唯一索引</h5>
                     <div>
                        <p>在非唯一索引中，数据库通过将rowid作为额外列附加到键来存储rowid。该条目添加一个长度字节以使密钥唯一。</p>
                        <p>例如， <a href="optimizer-access-paths.html#GUID-D25B037E-044A-4172-9305-EC06DB0ED30C__CHDJJDIG">图8-3</a>中<a href="optimizer-access-paths.html#GUID-D25B037E-044A-4172-9305-EC06DB0ED30C__CHDJJDIG">所示</a>的非唯一索引中的第一个索引键是对<code class="codeph">0 <span class="codeinlineitalic">,rowid</span></code>而不是<code class="codeph">0</code> 。数据库按索引键值对数据进行排序，然后按rowid递增进行排序。例如，条目按如下方式排序：</p><pre class="pre codeblock"><code>0，AAAPvCAAFAAAAFaAA <span class="bold">a</span> 0，AAAPvCAAFAAAAFaAA <span class="bold">g</span> 0，AAAPvCAAFAAAAFaAA <span class="bold">l</span> 2，AAAPvCAAFAAAAFaAA <span class="bold">m</span>
</code></pre><p>在唯一索引中，索引键不包含rowid。数据库排序仅由索引关键字值的数据，例如<code class="codeph">0</code> ， <code class="codeph">1</code> ， <code class="codeph">2</code> ，依此类推。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-17F4E96E-B649-4A55-9A7C-87D8B57A557C__GUID-6D8540D0-5BDE-4F69-A884-A91413C01967">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../cncpt/indexes-and-index-organized-tables.html#CNCPT1157" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a> ，概述了唯一和非唯一索引</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-8BE7E6B2-C8C2-494C-9AE8-8EA252622F7C" title="B树是平衡树的缩写，是最常见的数据库索引类型。">关于B树索引访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95157"></a><div class="props_rev_3"><a id="GUID-AD533A0C-E46F-4FB0-8C34-881A0E30E93A" name="GUID-AD533A0C-E46F-4FB0-8C34-881A0E30E93A"></a><h5 id="TGSQL-GUID-AD533A0C-E46F-4FB0-8C34-881A0E30E93A" class="sect5"><span class="enumeration_section">8.3.1.4</span> B树索引和空值</h5>
                     <div>
                        <p>B树索引从不存储完全空键，这对于优化器选择访问路径的方式很重要。此规则的结果是单列B树索引从不存储空值。</p>
                        <p>一个例子有助于说明。该<code class="codeph">hr.employees</code>表中有一个主键索引<code class="codeph">employee_id</code> ，并在唯一索引<code class="codeph">department_id</code> 。<code class="codeph">department_id</code>列可以包含空值，使其成为可为<span class="italic">空的列</span> ，但<code class="codeph">employee_id</code>列不能。
                        </p><pre class="pre codeblock"><code>SQL&gt; SELECT COUNT（*）FROM employees WHERE department_id IS NULL; COUNT（*）---------- 1 SQL&gt; SELECT COUNT（*）FROM employees WHERE employee_id IS NULL; COUNT（*）---------- 0</code></pre><p>以下示例显示优化程序为<code class="codeph">hr.employees</code>的所有部门ID的查询选择全表扫描。优化器无法在<code class="codeph">employees.department_id</code>上使用索引，因为不保证索引包含表中每行的条目。
                        </p><pre class="pre codeblock"><code>SQL&gt; EXPLAIN PLAN FOR SELECT department_id FROM employees;解释。SQL&gt; SELECT PLAN_TABLE_OUTPUT FROM TABLE（DBMS_XPLAN.DISPLAY（））; PLAN_TABLE_OUTPUT ------------------------------------------------- -------------------------------计划哈希值：3476115102 -------------- -------------------------------------------------- --------------- | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ----------------------------- | 0 |选择声明| | 107 | 321 | 2（0）| 00:00:01 | | 1 |表访问完全|员工| 107 | 321 | 2（0）| 00:00:01 | -------------------------------------------------- -----------------------------选择了8行。
</code></pre><p>以下示例显示优化程序可以使用<code class="codeph">department_id</code>上的索引来查询特定的部门ID，因为所有非空行都已编制索引。
                        </p><pre class="pre codeblock"><code>SQL&gt; EXPLAIN PLAN FOR SELECT department_id FROM employees WHERE department_id = 10;解释。SQL&gt; SELECT PLAN_TABLE_OUTPUT FROM TABLE（DBMS_XPLAN.DISPLAY（））; PLAN_TABLE_OUTPUT ------------------------------------------------- -------------------------------计划哈希值：67425611 -------------- -------------------------------------------------- ---------------- | ID |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ------------------------------ PLAN_TABLE_OUTPUT ------------------- -------------------------------------------------- ----------- 0 |选择声明| | 1 | 3 | 1（0）| 00：0 0:01 | | * 1 | INDEX RANGE SCAN | EMP_DEPARTMENT_IX | 1 | 3 | 1（0）| 00：0 0:01 | -------------------------------------------------- ------------------------------谓词信息（由操作ID标识）：PLAN_TABLE_OUTPUT ---------- -------------------------------------------------- -------------------- 1  -  access（“DEPARTMENT_ID”= 10）</code></pre><p>以下示例显示优化程序在谓词排除空值时选择索引扫描：</p><pre class="pre codeblock"><code>SQL&gt; EXPLAIN PLAN FOR SELECT department_id FROM employees WHERE department_id IS NOT NULL;解释。SQL&gt; SELECT PLAN_TABLE_OUTPUT FROM TABLE（DBMS_XPLAN.DISPLAY（））; PLAN_TABLE_OUTPUT ------------------------------------------------- -------------------------------计划哈希值：1590637672 -------------- -------------------------------------------------- ---------------- | ID |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ------------------------------ | 0 |选择声明| | 106 | 318 | 1（0）| 00：0 0:01 | | * 1 | INDEX全扫描| EMP_DEPARTMENT_IX | 106 | 318 | 1（0）| 00：0 0:01 | -------------------------------------------------- ------------------------------谓词信息（由操作ID标识）：PLAN_TABLE_OUTPUT ---------- -------------------------------------------------- -------------------- 1  - 过滤器（“DEPARTMENT_ID”不为空）</code></pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-8BE7E6B2-C8C2-494C-9AE8-8EA252622F7C" title="B树是平衡树的缩写，是最常见的数据库索引类型。">关于B树索引访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL235"></a><div class="props_rev_3"><a id="GUID-273588A7-A8E9-4E1E-BE35-060073533B47" name="GUID-273588A7-A8E9-4E1E-BE35-060073533B47"></a><h4 id="TGSQL-GUID-273588A7-A8E9-4E1E-BE35-060073533B47" class="sect4"><span class="enumeration_section">8.3.2</span>索引唯一扫描</h4>
                  <div>
                     <p><strong class="term">索引唯一扫描</strong>最多返回1个rowid。
                     </p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-EB831554-3F2E-4538-91DC-90FF27DF054E">当优化程序考虑索引唯一扫描时</a><br>索引唯一扫描需要等式谓词。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-CF0FFA06-7599-4293-8F7D-A9F12647218D">索引唯一扫描的工作原理</a><br>扫描搜索索引以便指定密钥。索引唯一扫描一找到第一条记录就会停止处理，因为没有第二条记录是可能的。数据库从索引条目获取rowid，然后检索rowid指定的行。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-D7A22ABD-88A4-4B9F-BAEA-D47E5DA8AA56">索引唯一扫描：示例</a><br>此示例使用唯一扫描从<code class="codeph">products</code>表中检索行。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-B33945C3-CCC0-4D35-AF62-DB80FD4256A6" title="索引是与表或表集群相关联的可选结构，有时可以加速数据访问。">B树索引访问路径</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL94669"></a><div class="props_rev_3"><a id="GUID-EB831554-3F2E-4538-91DC-90FF27DF054E" name="GUID-EB831554-3F2E-4538-91DC-90FF27DF054E"></a><h5 id="TGSQL-GUID-EB831554-3F2E-4538-91DC-90FF27DF054E" class="sect5"><span class="enumeration_section">8.3.2.1</span>优化程序何时考虑索引唯一扫描</h5>
                     <div>
                        <p>索引唯一扫描需要等式谓词。</p>
                        <p>具体而言，仅当查询谓词使用等于运算符（例如<code class="codeph">WHERE prod_id=10</code>引用唯一索引键中的所有列时，数据库才执行唯一扫描。
                        </p>
                        <p>唯一或主键约束本身不足以产生索引唯一扫描，因为列上的非唯一索引可能已经存在。考虑下面的例子，它创建<code class="codeph">t_table</code>表，然后上创建一个非唯一索引<code class="codeph">numcol</code> ：</p><pre class="pre codeblock"><code>SQL&gt; CREATE TABLE t_table（numcol INT）; SQL&gt; CREATE INDEX t_table_idx ON t_table（numcol）; SQL&gt;从USER_INDEXES中选择UNIQUENESS WHERE INDEX_NAME ='T_TABLE_IDX'; UNIQUENES --------- NONUNIQUE</code></pre><p>以下代码在具有非唯一索引的列上创建主键约束，从而导致索引范围扫描而不是索引唯一扫描：</p><pre class="pre codeblock"><code>SQL&gt; ALTER TABLE t_table ADD CONSTRAINT t_table_pk PRIMARY KEY（numcol）; SQL&gt; SET AUTOTRACE TRACEONLY EXPLAIN SQL&gt; SELECT * FROM t_table WHERE numcol = 1;执行计划------------------------------------------------ ----------计划哈希值：868081059 ----------------------------------- --------------------------------------------- | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ------------------------------ | 0 |选择声明| | 1 | 13 | 1（0）| 00:00:01 | | * 1 | <span class="bold">INDEX RANGE SCAN</span> | T_TABLE_IDX | 1 | 13 | 1（0）| 00:00:01 | -------------------------------------------------- ------------------------------谓词信息（由操作ID标识）：----------- ---------------------------------------- 1  -  access（“NUMCOL”= 1）</code></pre><p>您可以使用<code class="codeph">INDEX(</code> <span class="italic"><code class="codeph">alias index_name</code></span> <code class="codeph">)</code>提示指定要使用的索引，但不能指定特定类型的索引访问路径。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-EB831554-3F2E-4538-91DC-90FF27DF054E__GUID-D499F130-647A-4E26-8359-11A25DCA65B4">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../cncpt/tables-and-table-clusters.html#CNCPT010" target="_blank"><span><cite>Oracle数据库概念</cite></span></a> <span class="italic"> </span>有关索引结构的详细信息以及有关如何搜索B树的详细信息</p>
                              </li>
                              <li>
                                 <p><a href="../sqlrf/Comments.html#SQLRF50409" target="_blank"><span><cite>Oracle数据库SQL语言参考，</cite></span></a>以了解有关<code class="codeph">INDEX</code>提示的更多信息</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-273588A7-A8E9-4E1E-BE35-060073533B47" title="索引唯一扫描最多返回1个rowid。">索引唯一扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95159"></a><a id="TGSQL95158"></a><div class="props_rev_3"><a id="GUID-CF0FFA06-7599-4293-8F7D-A9F12647218D" name="GUID-CF0FFA06-7599-4293-8F7D-A9F12647218D"></a><h5 id="TGSQL-GUID-CF0FFA06-7599-4293-8F7D-A9F12647218D" class="sect5"><span class="enumeration_section">8.3.2.2</span>索引唯一扫描的工作原理</h5>
                     <div>
                        <p>扫描搜索索引以便指定密钥。索引唯一扫描一找到第一条记录就会停止处理，因为没有第二条记录是可能的。数据库从索引条目获取rowid，然后检索rowid指定的行。</p>
                        <p>下图说明了索引唯一扫描。该语句在<code class="codeph">prod_id</code>列中请求产品ID <code class="codeph">19</code>的记录， <code class="codeph">prod_id</code>列具有主键索引。
                        </p>
                        <div class="figure" id="GUID-CF0FFA06-7599-4293-8F7D-A9F12647218D__CHDBGECB">
                           <p class="titleinfigure">图8-4索引唯一扫描</p><img src="img/cncpt372.png" alt="下面是图8-4的描述" title="下面是图8-4的描述" longdesc="img_text/cncpt372.html"><br><a href="img_text/cncpt372.html">“图8-4索引唯一扫描”的说明</a></div>
                        <!-- class="figure" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-273588A7-A8E9-4E1E-BE35-060073533B47" title="索引唯一扫描最多返回1个rowid。">索引唯一扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95160"></a><a id="TGSQL94670"></a><div class="props_rev_3"><a id="GUID-D7A22ABD-88A4-4B9F-BAEA-D47E5DA8AA56" name="GUID-D7A22ABD-88A4-4B9F-BAEA-D47E5DA8AA56"></a><h5 id="TGSQL-GUID-D7A22ABD-88A4-4B9F-BAEA-D47E5DA8AA56" class="sect5"><span class="enumeration_section">8.3.2.3</span>索引唯一扫描：示例</h5>
                     <div>
                        <p>此示例使用唯一扫描从<code class="codeph">products</code>表中检索行。
                        </p>
                        <div class="example" id="GUID-D7A22ABD-88A4-4B9F-BAEA-D47E5DA8AA56__CHDHFIEG">
                           <p>以下语句在<code class="codeph">sh.products</code>表中查询产品<code class="codeph">19</code>的记录：</p><pre class="pre codeblock"><code>SELECT * FROM sh.products WHERE prod_id = 19;</code></pre><p>由于<code class="codeph">products.prod_id</code>列上存在主键索引，并且<code class="codeph">WHERE</code>子句使用相等运算符引用所有列，因此优化程序会选择唯一扫描：</p><pre class="pre codeblock"><code>SQL_ID 3ptq5tsd5vb3d，子编号0 ------------------------------------- select * from sh.products where prod_id = 19计划哈希值：4047888317 ------------------------------------------ -------------------------------------- | ID |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ------------------------------ | 0 |选择声明| | | | 1（100）| | | 1 |按INDEX ROWID表的访问权限|产品| 1 | 173 | 1（0）| 00：00：01 | | * 2 | <span class="bold">INDEX UNIQUE SCAN</span> | PRODUCTS_PK | 1 | | 0（0）| | -------------------------------------------------- ------------------------------谓词信息（由操作ID标识）：----------- ---------------------------------------- 2  -  access（“PROD_ID”= 19）</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-273588A7-A8E9-4E1E-BE35-060073533B47" title="索引唯一扫描最多返回1个rowid。">索引唯一扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL236"></a><div class="props_rev_3"><a id="GUID-E2353939-DFBD-444A-94BC-2497E2A418D1" name="GUID-E2353939-DFBD-444A-94BC-2497E2A418D1"></a><h4 id="TGSQL-GUID-E2353939-DFBD-444A-94BC-2497E2A418D1" class="sect4"><span class="enumeration_section">8.3.3</span>索引范围扫描</h4>
                  <div>
                     <p><strong class="term">索引范围扫描</strong>是值的有序扫描。
                     </p>
                     <p>扫描范围可以在两侧限制，也可以在一侧或两侧无限制。优化器通常选择范围扫描以进行高<a href="glossary.html#GUID-36E411B8-9558-4655-844A-B2EC45FDDFA7"><span class="xrefglossterm">选择性</span></a>查询。
                     </p>
                     <p>默认情况下，数据库按升序存储索引，并以相同的顺序扫描它们。例如，与所述谓词的查询<code class="codeph">department_id &gt;= 20</code>使用范围扫描返回由索引关键字排序行<code class="codeph">20</code> ， <code class="codeph">30</code> ， <code class="codeph">40</code> ，等等。如果多个索引条目具有相同的键，则数据库<code class="codeph">0,AAAPvCAAFAAAAFaAAa</code> rowid以升序返回它们，以便<code class="codeph">0,AAAPvCAAFAAAAFaAAa</code>后跟<code class="codeph">0,AAAPvCAAFAAAAFaAAg</code> ，依此类推。
                     </p>
                     <p><a href="glossary.html#GUID-9F69618A-2844-4912-A972-B42D2DC01DE5"><span class="xrefglossterm">索引范围扫描降序</span></a>与索引范围扫描相同，只是数据库按降序返回行。通常，数据库在按降序排序数据时或在寻找小于指定值的值时使用降序扫描。
                     </p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-C385AF64-F467-499B-95C8-0E3AB5681D5F">当优化器考虑索引范围扫描时</a><br>对于索引范围扫描，索引键必须具有多个值。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-47C03736-2240-47DE-A78A-E21A8DABAC45">指数范围如何扫描工作</a><br>在索引范围扫描期间，Oracle数据库从根到分支。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-603B2A7A-5EED-47B1-A407-128E2E80979D">索引范围扫描：示例</a><br>此示例使用索引范围扫描从<code class="codeph">employees</code>表中检索一组值。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-1853B7EE-53A0-484F-8290-BEF4E299CDA7">索引范围扫描降序：示例</a><br>此示例使用索引按排序顺序从<code class="codeph">employees</code>表中检索行。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-B33945C3-CCC0-4D35-AF62-DB80FD4256A6" title="索引是与表或表集群相关联的可选结构，有时可以加速数据访问。">B树索引访问路径</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL94672"></a><div class="props_rev_3"><a id="GUID-C385AF64-F467-499B-95C8-0E3AB5681D5F" name="GUID-C385AF64-F467-499B-95C8-0E3AB5681D5F"></a><h5 id="TGSQL-GUID-C385AF64-F467-499B-95C8-0E3AB5681D5F" class="sect5"><span class="enumeration_section">8.3.3.1</span>当优化器考虑索引范围扫描时</h5>
                     <div>
                        <p>对于索引范围扫描，索引键必须具有多个值。</p>
                        <p>具体而言，优化程序会在以下情况下考虑索引范围扫描：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>索引的一个或多个前导列在条件中指定。</p>
                              <p>条件指定一个或多个表达式和逻辑（布尔）运算符的组合，并返回值<code class="codeph">TRUE</code> ， <code class="codeph">FALSE</code>或<code class="codeph">UNKNOWN</code> 。条件的例子包括：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">department_id =：id</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">department_id &lt;：id</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">department_id&gt;：id</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">AND</code>结合索引中前导列的前述条件，例如<code class="codeph">department_id &gt; :low AND department_id &lt; :hi</code> 。
                                    </p>
                                    <div class="infoboxnote" id="GUID-C385AF64-F467-499B-95C8-0E3AB5681D5F__GUID-182C7C9D-3469-40C0-AE75-23FF9175DE22">
                                       <p class="notep1">注意：</p>
                                       <p>为了使优化器考虑范围扫描，对<code class="codeph">col1 LIKE '%ASD'</code>形式的通配符搜索不得处于领先位置。
                                       </p>
                                    </div>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>索引键可以使用0,1或更多值。</p>
                           </li>
                        </ul>
                        <div class="infobox-tip" id="GUID-C385AF64-F467-499B-95C8-0E3AB5681D5F__GUID-7F126297-53DE-4238-B495-9F8FE767CA86">
                           <p class="notep1">小费：</p>
                           <p>如果需要排序数据，则使用<code class="codeph">ORDER</code> <code class="codeph">BY</code>子句，不要依赖索引。如果索引可以满足<code class="codeph">ORDER</code> <code class="codeph">BY</code>子句，则优化器使用此选项，从而避免排序。
                           </p>
                        </div>
                        <p>当索引可以满足<code class="codeph">ORDER BY DESCENDING</code>子句时，优化器<code class="codeph">ORDER BY DESCENDING</code>索引范围扫描视为降序。
                        </p>
                        <p>如果优化程序选择全表扫描或其他索引，则可能需要提示强制此访问路径。<code class="codeph">INDEX(</code> <span class="italic"><code class="codeph">tbl_alias</code></span> <span class="italic"><code class="codeph">ix_name</code></span> <code class="codeph">)</code>和<code class="codeph">INDEX_DESC(</code> <span class="italic"><code class="codeph">tbl_alias</code></span> <span class="italic"><code class="codeph">ix_name</code></span> <code class="codeph">)</code>提示指示优化器使用特定索引。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-C385AF64-F467-499B-95C8-0E3AB5681D5F__GUID-A2602786-0A40-4184-9BED-677D1D74F2AA">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../sqlrf/Comments.html#SQLRF50405" target="_blank"><span><cite>Oracle Database SQL语言参考，</cite></span></a>以了解有关<code class="codeph">INDEX</code>和<code class="codeph">INDEX_DESC</code>提示的更多信息</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-E2353939-DFBD-444A-94BC-2497E2A418D1" title="索引范围扫描是值的有序扫描。">索引范围扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95162"></a><a id="TGSQL95161"></a><div class="props_rev_3"><a id="GUID-47C03736-2240-47DE-A78A-E21A8DABAC45" name="GUID-47C03736-2240-47DE-A78A-E21A8DABAC45"></a><h5 id="TGSQL-GUID-47C03736-2240-47DE-A78A-E21A8DABAC45" class="sect5"><span class="enumeration_section">8.3.3.2</span>索引范围扫描的工作原理</h5>
                     <div>
                        <p>在索引范围扫描期间，Oracle数据库从根到分支。</p>
                        <p>通常，扫描算法如下：</p>
                        <ol>
                           <li>
                              <p>阅读根块。</p>
                           </li>
                           <li>
                              <p>阅读分支块。</p>
                           </li>
                           <li>
                              <p>替换以下步骤，直到检索到所有数据：</p>
                              <ol type="a">
                                 <li>
                                    <p>读取叶块以获取rowid。</p>
                                 </li>
                                 <li>
                                    <p>读取表块以检索行。</p>
                                 </li>
                              </ol>
                              <div class="infoboxnote" id="GUID-47C03736-2240-47DE-A78A-E21A8DABAC45__GUID-F8CFEBB2-393F-42CA-B17D-7C903F3A4E06">
                                 <p class="notep1">注意：</p>
                                 <p>在某些情况下，索引扫描会读取一组索引块，对rowid进行排序，然后读取一组表块。</p>
                              </div>
                           </li>
                        </ol>
                        <p>因此，为了扫描索引，数据库向前或向前移动通过叶块。例如，对20到40之间的ID的扫描定位具有20或更大的最低键值的第一个叶块。扫描在叶节点的链接列表中水平进行，直到找到大于40的值，然后停止。</p>
                        <p>下图说明了使用升序的索引范围扫描。语句请求<code class="codeph">department_id</code>列中具有值<code class="codeph">20</code>的<code class="codeph">employees</code>记录，该列具有非唯一索引。在此示例中，存在部门<code class="codeph">20</code> 2个索引条目。
                        </p>
                        <div class="figure" id="GUID-47C03736-2240-47DE-A78A-E21A8DABAC45__CHDGAAJA">
                           <p class="titleinfigure">图8-5索引范围扫描</p><img src="img/cncpt373.png" alt="下面是图8-5的描述" title="下面是图8-5的描述" longdesc="img_text/cncpt373.html"><br><a href="img_text/cncpt373.html">“图8-5索引范围扫描”的说明</a></div>
                        <!-- class="figure" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-E2353939-DFBD-444A-94BC-2497E2A418D1" title="索引范围扫描是值的有序扫描。">索引范围扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL94671"></a><a id="TGSQL95163"></a><div class="props_rev_3"><a id="GUID-603B2A7A-5EED-47B1-A407-128E2E80979D" name="GUID-603B2A7A-5EED-47B1-A407-128E2E80979D"></a><h5 id="TGSQL-GUID-603B2A7A-5EED-47B1-A407-128E2E80979D" class="sect5"><span class="enumeration_section">8.3.3.3</span>索引范围扫描：示例</h5>
                     <div>
                        <p>此示例使用索引范围扫描从<code class="codeph">employees</code>表中检索一组值。
                        </p>
                        <div class="example" id="GUID-603B2A7A-5EED-47B1-A407-128E2E80979D__CHDEJAED">
                           <p>以下语句查询部门<code class="codeph">20</code>员工薪水大于<code class="codeph">1000</code>员工的记录：</p><pre class="pre codeblock"><code>SELECT * FROM employees WHERE department_id = 20 AND salary&gt; 1000;</code></pre><p>前面的查询具有低基数（返回几行），因此查询使用<code class="codeph">department_id</code>列上的索引。数据库扫描索引，从employees表中获取记录，然后将<code class="codeph">salary &gt; 1000</code>过滤器应用于这些获取的记录以生成结果。
                           </p><pre class="pre codeblock"><code>SQL_ID brt5abvbxw9tq，子编号0 ------------------------------------- SELECT * FROM employees WHERE department_id = 20 AND salary&gt; 1000计划哈希值：2799965532 ---------------------------------------- -------------------------------------------------- -  | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ----------------------------------------- | 0 |选择声明| | | | 2（100）| | | * 1 |通过INDEX ROWID BATCHED表的访问权限员工| 2 | 138 | 2（0）| 00:00:01 | | * 2 | <span class="bold">INDEX RANGE SCAN</span> | EMP_DEPARTMENT_IX | 2 | | 1（0）| 00:00:01 | -------------------------------------------------- -----------------------------------------谓词信息（由操作ID标识）： -------------------------------------------------- -  1  - 过滤器（“SALARY”&gt; 1000）2  - 访问（“DEPARTMENT_ID”= 20）</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-E2353939-DFBD-444A-94BC-2497E2A418D1" title="索引范围扫描是值的有序扫描。">索引范围扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95165"></a><a id="TGSQL95164"></a><div class="props_rev_3"><a id="GUID-1853B7EE-53A0-484F-8290-BEF4E299CDA7" name="GUID-1853B7EE-53A0-484F-8290-BEF4E299CDA7"></a><h5 id="TGSQL-GUID-1853B7EE-53A0-484F-8290-BEF4E299CDA7" class="sect5"><span class="enumeration_section">8.3.3.4</span>索引范围扫描降序：示例</h5>
                     <div>
                        <p>此示例使用索引按排序顺序从<code class="codeph">employees</code>表中检索行。
                        </p>
                        <div class="example" id="GUID-1853B7EE-53A0-484F-8290-BEF4E299CDA7__CHDDADJG">
                           <p>以下语句按降序查询部门<code class="codeph">20</code>中员工的记录：</p><pre class="pre codeblock"><code>SELECT * FROM employees WHERE department_id &lt;20 ORDER BY department_id DESC;</code></pre><p>此前面的查询具有低基数，因此查询使用<code class="codeph">department_id</code>列上的索引。
                           </p><pre class="pre codeblock"><code>SQL_ID 8182ndfj1ttj6，子编号0 ------------------------------------- SELECT * FROM employees WHERE department_id &lt; 20 ORDER BY department_id DESC计划哈希值：1681890450 ---------------------------------------- ---------------------------------------- | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ------------------------------ | 0 |选择声明| | | | 2（100）| | | 1 |按INDEX ROWID表的访问权限|员工| 2 | 138 | 2（0）| 00:00:01 | | * 2 | <span class="bold">INDEX RANGE SCAN DESCENDING</span> | EMP_DEPARTMENT_IX | 2 | | 1（0）| 00:00:01 | -------------------------------------------------- ------------------------------谓词信息（由操作ID标识）：----------- ---------------------------------------- 2  - 访问（“DEPARTMENT_ID”&lt;20）</code></pre><p>数据库定位包含最高键值<code class="codeph">20</code>或更小的第一个索引叶块。然后扫描通过叶节点的链表水平向左进行。数据库从每个索引条目获取rowid，然后检索rowid指定的行。
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-E2353939-DFBD-444A-94BC-2497E2A418D1" title="索引范围扫描是值的有序扫描。">索引范围扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL237"></a><div class="props_rev_3"><a id="GUID-3D9D3DBD-CF89-4320-8C5E-6BE6A127AC39" name="GUID-3D9D3DBD-CF89-4320-8C5E-6BE6A127AC39"></a><h4 id="TGSQL-GUID-3D9D3DBD-CF89-4320-8C5E-6BE6A127AC39" class="sect4"><span class="enumeration_section">8.3.4</span>索引完全扫描</h4>
                  <div>
                     <p><strong class="term">索引完全扫描</strong>按顺序读取整个索引。索引完全扫描可以消除单独的排序操作，因为索引中的数据按索引键排序。
                     </p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-52A41C2C-8E99-4375-9C0F-D80472C041E5">当优化程序考虑索引完全扫描时</a><br>优化程序会在各种情况下考虑索引全扫描。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-0C1D3987-9F2B-4C40-A66B-76DF05B3EBD5">索引完全扫描的工作原理</a><br>数据库读取根块，然后向下导航索引的左侧（如果执行降序全扫描，则向右导航），直到它到达叶块。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-12DF3C19-E795-447B-8E06-7DC2258F9586">索引完全扫描：示例</a><br>此示例使用索引完全扫描来满足带有<code class="codeph">ORDER BY</code>子句的查询。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-B33945C3-CCC0-4D35-AF62-DB80FD4256A6" title="索引是与表或表集群相关联的可选结构，有时可以加速数据访问。">B树索引访问路径</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL95166"></a><div class="props_rev_3"><a id="GUID-52A41C2C-8E99-4375-9C0F-D80472C041E5" name="GUID-52A41C2C-8E99-4375-9C0F-D80472C041E5"></a><h5 id="TGSQL-GUID-52A41C2C-8E99-4375-9C0F-D80472C041E5" class="sect5"><span class="enumeration_section">8.3.4.1</span>当优化器考虑索引完全扫描时</h5>
                     <div>
                        <p>优化程序会在各种情况下考虑索引全扫描。</p>
                        <p>情况包括以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>谓词引用索引中的列。此列不必是前导列。</p>
                           </li>
                           <li>
                              <p>未指定谓词，但满足以下所有条件：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>表和查询中的所有列都在索引中。</p>
                                 </li>
                                 <li>
                                    <p>至少一个索引列不为空。</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>查询在索引的非可空列上包含<code class="codeph">ORDER BY</code> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-3D9D3DBD-CF89-4320-8C5E-6BE6A127AC39" title="索引完全扫描按顺序读取整个索引。索引完全扫描可以消除单独的排序操作，因为索引中的数据按索引键排序。">索引完全扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95168"></a><a id="TGSQL95167"></a><div class="props_rev_3"><a id="GUID-0C1D3987-9F2B-4C40-A66B-76DF05B3EBD5" name="GUID-0C1D3987-9F2B-4C40-A66B-76DF05B3EBD5"></a><h5 id="TGSQL-GUID-0C1D3987-9F2B-4C40-A66B-76DF05B3EBD5" class="sect5"><span class="enumeration_section">8.3.4.2</span>索引完全扫描的工作原理</h5>
                     <div>
                        <p>数据库读取根块，然后向下导航索引的左侧（如果执行降序全扫描，则向右导航），直到它到达叶块。</p>
                        <p>然后数据库到达叶子块，扫描按照排序的顺序一次跨越索引的底部，一次一个块。该数据库使用单块I / O而不是多块I / O.</p>
                        <p>下图说明了索引全扫描。声明要求<code class="codeph">departments</code>通过订购的记录<code class="codeph">department_id</code> 。
                        </p>
                        <div class="figure" id="GUID-0C1D3987-9F2B-4C40-A66B-76DF05B3EBD5__CHDGJBJD">
                           <p class="titleinfigure">图8-6索引完全扫描</p><img src="img/cncpt374.png" alt="下面是图8-6的描述" title="下面是图8-6的描述" longdesc="img_text/cncpt374.html"><br><a href="img_text/cncpt374.html">“图8-6索引全扫描”的说明</a></div>
                        <!-- class="figure" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-3D9D3DBD-CF89-4320-8C5E-6BE6A127AC39" title="索引完全扫描按顺序读取整个索引。索引完全扫描可以消除单独的排序操作，因为索引中的数据按索引键排序。">索引完全扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95170"></a><a id="TGSQL95169"></a><div class="props_rev_3"><a id="GUID-12DF3C19-E795-447B-8E06-7DC2258F9586" name="GUID-12DF3C19-E795-447B-8E06-7DC2258F9586"></a><h5 id="TGSQL-GUID-12DF3C19-E795-447B-8E06-7DC2258F9586" class="sect5"><span class="enumeration_section">8.3.4.3</span>索引完全扫描：示例</h5>
                     <div>
                        <p>此示例使用索引完全扫描来满足带有<code class="codeph">ORDER BY</code>子句的查询。
                        </p>
                        <div class="example" id="GUID-12DF3C19-E795-447B-8E06-7DC2258F9586__CHDDADAG">
                           <p>以下语句按部门ID的顺序查询部门的ID和名称：</p><pre class="pre codeblock"><code>SELECT department_id，department_name FROM departments ORDER BY department_id;</code></pre><p>以下计划显示优化程序选择了索引全扫描：</p><pre class="pre codeblock"><code>SQL_ID 94t4a20h8what，子编号0 -------------------------------------从department部门选择department_id，department_name by department_id计划哈希值：4179022242 ------------------------------------------- ------------------------------------- | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ------------------------------ | 0 |选择声明| | | | 2（100）| | | 1 |按INDEX ROWID表的访问权限|部门| 27 | 432 | 2（0）| 00:00:01 | | 2 | <span class="bold">INDEX全扫描</span> | DEPT_ID_PK | 27 | | 1（0）| 00:00:01 | -------------------------------------------------- ------------------------------</code></pre><p>数据库定位第一个索引叶块，然后通过叶节点的链接列表水平向右移动。对于每个索引条目，数据库从条目中获取rowid，然后检索rowid指定的表行。因为索引是在<code class="codeph">department_id</code>上排序的，所以数据库避免了单独的操作来对检索到的行进行排序。
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-3D9D3DBD-CF89-4320-8C5E-6BE6A127AC39" title="索引完全扫描按顺序读取整个索引。索引完全扫描可以消除单独的排序操作，因为索引中的数据按索引键排序。">索引完全扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL95171"></a><div class="props_rev_3"><a id="GUID-A2F2A81F-4626-45A1-B2A6-D46107E74C3C" name="GUID-A2F2A81F-4626-45A1-B2A6-D46107E74C3C"></a><h4 id="TGSQL-GUID-A2F2A81F-4626-45A1-B2A6-D46107E74C3C" class="sect4"><span class="enumeration_section">8.3.5</span>索引快速完全扫描</h4>
                  <div>
                     <p><strong class="term">索引快速完全扫描</strong>以未排序的顺序读取索引块，因为它们存在于磁盘上。此扫描不使用索引来探测表，而是使用索引本身作为表来读取索引而不是表。
                     </p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-24D48935-F1B7-4D63-8DE1-0C107A17074F">当优化程序考虑索引快速完全扫描时</a><br>当查询仅访问索引中的属性时，优化程序会考虑此扫描。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-9E1210BD-B37E-4255-BBDB-5D533BC2372F">索引快速完全扫描如何工作</a><br>数据库使用多块I / O来读取根块以及所有叶子和分支块。数据库忽略分支和根块，并读取叶块上的索引条目。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-09D080C6-0A1D-4282-AD08-C931B1F7B3B3">索引快速完全扫描：示例</a><br>此示例使用快速完整索引扫描作为优化程序提示的结果。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-B33945C3-CCC0-4D35-AF62-DB80FD4256A6" title="索引是与表或表集群相关联的可选结构，有时可以加速数据访问。">B树索引访问路径</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL95172"></a><div class="props_rev_3"><a id="GUID-24D48935-F1B7-4D63-8DE1-0C107A17074F" name="GUID-24D48935-F1B7-4D63-8DE1-0C107A17074F"></a><h5 id="TGSQL-GUID-24D48935-F1B7-4D63-8DE1-0C107A17074F" class="sect5"><span class="enumeration_section">8.3.5.1</span>当优化器考虑索引快速完全扫描时</h5>
                     <div>
                        <p>当查询仅访问索引中的属性时，优化程序会考虑此扫描。</p>
                        <div class="infoboxnote" id="GUID-24D48935-F1B7-4D63-8DE1-0C107A17074F__GUID-812B9ACE-9A8F-42E8-A7CE-B8777BB03C84">
                           <p class="notep1">注意：</p>
                           <p>与完全扫描不同，快速全扫描无法消除排序操作，因为它不按顺序读取索引。</p>
                        </div>
                        <p><code class="codeph">INDEX_FFS( <span class="codeinlineitalic">table_name</span> <span class="codeinlineitalic">index_name</span> )</code>提示强制执行快速完整索引扫描。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-24D48935-F1B7-4D63-8DE1-0C107A17074F__GUID-35BCFDE1-FE37-4A1C-AEE7-CD22000A6BC6">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=SQLRF50409" target="_blank"><span><cite>Oracle数据库SQL语言参考，</cite></span></a>以了解有关<code class="codeph">INDEX</code>提示的更多信息</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-A2F2A81F-4626-45A1-B2A6-D46107E74C3C" title="索引快速完全扫描以未排序的顺序读取索引块，因为它们存在于磁盘上。此扫描不使用索引来探测表，而是使用索引本身作为表来读取索引而不是表。">索引快速完全扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95173"></a><div class="props_rev_3"><a id="GUID-9E1210BD-B37E-4255-BBDB-5D533BC2372F" name="GUID-9E1210BD-B37E-4255-BBDB-5D533BC2372F"></a><h5 id="TGSQL-GUID-9E1210BD-B37E-4255-BBDB-5D533BC2372F" class="sect5"><span class="enumeration_section">8.3.5.2</span>索引快速完全扫描的工作原理</h5>
                     <div>
                        <p>数据库使用多块I / O来读取根块以及所有叶子和分支块。数据库忽略分支和根块，并读取叶块上的索引条目。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-A2F2A81F-4626-45A1-B2A6-D46107E74C3C" title="索引快速完全扫描以未排序的顺序读取索引块，因为它们存在于磁盘上。此扫描不使用索引来探测表，而是使用索引本身作为表来读取索引而不是表。">索引快速完全扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95175"></a><a id="TGSQL95174"></a><div class="props_rev_3"><a id="GUID-09D080C6-0A1D-4282-AD08-C931B1F7B3B3" name="GUID-09D080C6-0A1D-4282-AD08-C931B1F7B3B3"></a><h5 id="TGSQL-GUID-09D080C6-0A1D-4282-AD08-C931B1F7B3B3" class="sect5"><span class="enumeration_section">8.3.5.3</span>索引快速完全扫描：示例</h5>
                     <div>
                        <p>此示例使用快速完整索引扫描作为优化程序提示的结果。</p>
                        <div class="example" id="GUID-09D080C6-0A1D-4282-AD08-C931B1F7B3B3__CHDGDGJI">
                           <p>以下语句按部门ID的顺序查询部门的ID和名称：</p><pre class="pre codeblock"><code>SELECT / * + INDEX_FFS（departments dept_id_pk）* / COUNT（*）FROM departments;</code></pre><p>以下计划显示优化器选择了快速完整索引扫描：</p><pre class="pre codeblock"><code>SQL_ID fu0k5nvx7sftm，子编号0 ------------------------------------- select / * + index_ffs（departments dept_id_pk）来自部门的* / count（*）计划哈希值：3940160378 ----------------------------------- --------------------------------------- | Id |操作|名称|行|成本（％CPU）|时间| -------------------------------------------------- ------------------------ | 0 |选择声明| | | 2（100）| | | 1 | SORT AGGREGATE | | 1 | | | | 2 | <span class="bold">INDEX FAST FULL SCAN</span> | DEPT_ID_PK | 27 | 2（0）| 00:00:01 | -------------------------------------------------- ------------------------</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-A2F2A81F-4626-45A1-B2A6-D46107E74C3C" title="索引快速完全扫描以未排序的顺序读取索引块，因为它们存在于磁盘上。此扫描不使用索引来探测表，而是使用索引本身作为表来读取索引而不是表。">索引快速完全扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL238"></a><div class="props_rev_3"><a id="GUID-B7C62F0F-EB7C-422C-919D-D86456A74A60" name="GUID-B7C62F0F-EB7C-422C-919D-D86456A74A60"></a><h4 id="TGSQL-GUID-B7C62F0F-EB7C-422C-919D-D86456A74A60" class="sect4"><span class="enumeration_section">8.3.6</span>索引跳过扫描</h4>
                  <div>
                     <p>当在查询中“跳过”或未指定复合索引的初始列时，会发生<strong class="term">索引跳过扫描</strong> 。
                     </p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-F5ABAAFD-44F7-4BA1-A778-01FCE9816E12">当优化器考虑索引跳过扫描时</a><br>通常，跳过扫描索引块比扫描表块更快，并且比执行完整索引扫描更快。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-C463F5CF-0514-4C51-972A-FA0A5CFA05C8">Index Skip Scans的工作原理</a><br>索引跳过扫描在逻辑上将复合索引拆分为较小的子索引。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-3587E79B-7733-42FC-8A9D-419F5DB1EB4B">索引跳过扫描：示例</a><br>此示例使用索引跳过扫描来满足<code class="codeph">sh.customers</code>表的查询。
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-B7C62F0F-EB7C-422C-919D-D86456A74A60__GUID-B6019142-B537-495C-83D5-23469C3AF6F8">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=CNCPT88842" target="_blank"><span><cite>Oracle数据库概念</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-B33945C3-CCC0-4D35-AF62-DB80FD4256A6" title="索引是与表或表集群相关联的可选结构，有时可以加速数据访问。">B树索引访问路径</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL95176"></a><div class="props_rev_3"><a id="GUID-F5ABAAFD-44F7-4BA1-A778-01FCE9816E12" name="GUID-F5ABAAFD-44F7-4BA1-A778-01FCE9816E12"></a><h5 id="TGSQL-GUID-F5ABAAFD-44F7-4BA1-A778-01FCE9816E12" class="sect5"><span class="enumeration_section">8.3.6.1</span>当优化器考虑索引跳过扫描时</h5>
                     <div>
                        <p>通常，跳过扫描索引块比扫描表块更快，并且比执行完整索引扫描更快。</p>
                        <p>满足以下条件时，优化程序会考虑跳过扫描：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>复合索引的前导列未在查询谓词中指定。</p>
                              <p>例如，查询谓词不引用<code class="codeph">cust_gender</code>列，而复合索引键是<code class="codeph">(cust_gender,cust_email)</code> 。
                              </p>
                           </li>
                           <li>
                              <p>复合索引的前导列中存在很少的不同值，但索引的非引导键中存在许多不同的值。</p>
                              <p>例如，如果复合索引键是<code class="codeph">(cust_gender,cust_email)</code> ，则<code class="codeph">cust_gender</code>列只有两个不同的值，但<code class="codeph">cust_email</code>有数千个。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-B7C62F0F-EB7C-422C-919D-D86456A74A60" title="当复合索引的初始列为时，会发生索引跳过扫描" skippe="=" ="">索引跳过扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95177"></a><div class="props_rev_3"><a id="GUID-C463F5CF-0514-4C51-972A-FA0A5CFA05C8" name="GUID-C463F5CF-0514-4C51-972A-FA0A5CFA05C8"></a><h5 id="TGSQL-GUID-C463F5CF-0514-4C51-972A-FA0A5CFA05C8" class="sect5"><span class="enumeration_section">8.3.6.2</span>索引跳过扫描的工作原理</h5>
                     <div>
                        <p>索引跳过扫描在逻辑上将复合索引拆分为较小的子索引。</p>
                        <p>索引的前导列中的不同值的数量确定逻辑子索引的数量。数字越小，优化程序必须创建的逻辑子索引越少，扫描的效率就越高。扫描分别读取每个逻辑索引，并“跳过”不符合非前导列上的过滤条件的索引块。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-B7C62F0F-EB7C-422C-919D-D86456A74A60" title="当复合索引的初始列为时，会发生索引跳过扫描" skippe="=" ="">索引跳过扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95179"></a><a id="TGSQL95178"></a><div class="props_rev_3"><a id="GUID-3587E79B-7733-42FC-8A9D-419F5DB1EB4B" name="GUID-3587E79B-7733-42FC-8A9D-419F5DB1EB4B"></a><h5 id="TGSQL-GUID-3587E79B-7733-42FC-8A9D-419F5DB1EB4B" class="sect5"><span class="enumeration_section">8.3.6.3</span>索引跳过扫描：示例</h5>
                     <div>
                        <p>此示例使用索引跳过扫描来满足<code class="codeph">sh.customers</code>表的查询。
                        </p>
                        <div class="example" id="GUID-3587E79B-7733-42FC-8A9D-419F5DB1EB4B__GUID-39E305BD-26C0-46BB-9378-8F584A97EAF1">
                           <p><code class="codeph">customers</code>表包含一个<code class="codeph">cust_gender</code>列，其值为<code class="codeph">M</code>或<code class="codeph">F</code>以用户<code class="codeph">sh</code>身份登录到数据库时，您可以在列（ <code class="codeph">cust_gender, cust_email</code> ）上创建复合索引<code class="codeph">cust_gender, cust_email</code>如下所示：</p><pre class="pre codeblock"><code>CREATE INDEX cust_gender_email_ix ON sh.customers（cust_gender，cust_email）;</code></pre><p>从概念上讲，索引的一部分可能如下所示，其中<code class="codeph">F</code>或<code class="codeph">M</code>的性别值作为索引的前沿。
                           </p><pre class="pre codeblock"><code>F，Wolf @ company.example.com，rowid F，Wolsey @ company.example.com，rowid F，Wood @ company.example.com，rowid F，Woodman @ company.example.com，rowid F，Yang @ company。 example.com，rowid F，Zimmerman @ company.example.com，rowid M，Abbassi @ company.example.com，rowid M，Abbey @ company.example.com，rowid</code></pre><p>您在<code class="codeph">sh.customers</code>表中为客户运行以下查询：</p><pre class="pre codeblock"><code>SELECT * FROM sh.customers WHERE cust_email ='Abbey@company.example.com';</code></pre><p>即使未在<code class="codeph">WHERE</code>子句中指定<code class="codeph">cust_gender</code> ，数据库也可以使用<code class="codeph">customers_gender_email</code>索引的跳过扫描。在样本索引中，前导列<code class="codeph">cust_gender</code>有两个可能的值： <code class="codeph">F</code>和<code class="codeph">M</code>数据库逻辑上将索引拆分为两个。一个子索引具有键<code class="codeph">F</code> ，其中的条目如下：</p><pre class="pre codeblock"><code>F，Wolf @ company.example.com，rowid F，Wolsey @ company.example.com，rowid F，Wood @ company.example.com，rowid F，Woodman @ company.example.com，rowid F，Yang @ company。 example.com，rowid F，Zimmerman @ company.example.com，rowid</code></pre><p>第二个子索引具有键<code class="codeph">M</code> ，其中的条目如下：</p><pre class="pre codeblock"><code>M，Abbassi @ company.example.com，rowid M，Abbey @ company.example.com，rowid</code></pre><p>当搜索电子邮件为<code class="codeph">Abbey@company.example.com</code>的客户的记录时，数据库首先搜索带有前导值<code class="codeph">F</code>的子索引，然后搜索带有前导值<code class="codeph">M</code>的子索引。从概念上讲，数据库按如下方式处理查询：</p><pre class="pre codeblock"><code>（SELECT * FROM sh.customers WHERE cust_gender = <span class="bold">'F'</span> AND CUST_EMAIL = 'Abbey@company.example.com'）UNION ALL（SELECT * FROM sh.customers WHERE cust_gender = <span class="bold">'M'</span> AND CUST_EMAIL ='Abbey@company.example .com'）</code></pre><p>查询计划如下：</p><pre class="pre codeblock"><code>SQL_ID d7a6xurcnx2dj，子编号0 ------------------------------------- SELECT * FROM sh.customers WHERE cust_email ='Abbey@company.example.com'计划哈希值：797907791 ---------------------------------- -------------------------------------------------- ----- | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- --------------------------------------- | 0 |选择语句| | | | 10（100）| | | 1 |通过INDEX ROWID BATCHED表的访问权限客户| 33 | 6237 | 10（0）| 00：00：01 | | * 2 | <span class="bold">INDEX SKIP SCAN</span> | CUST_GENDER_EMAIL_IX | 33 | | 4（0）| 00：00：01 | -------------------------------------------------- ---------------------------------------谓词信息（由操作ID标识）： - ------------------------------------------------- 2 - 访问（“CUST_EMAIL”='Abbey@company.example.com'）过滤器（“CUST_EMAIL”='Abbey@company.example.com'）</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-3587E79B-7733-42FC-8A9D-419F5DB1EB4B__GUID-0C8F7940-0687-489D-A6D9-884D6C130B74">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=CNCPT88842" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a>了解有关跳过扫描的更多信息</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-B7C62F0F-EB7C-422C-919D-D86456A74A60" title="当复合索引的初始列为时，会发生索引跳过扫描" skippe="=" ="">索引跳过扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL95180"></a><div class="props_rev_3"><a id="GUID-21258F63-7506-4019-9FB4-323E9D2DE087" name="GUID-21258F63-7506-4019-9FB4-323E9D2DE087"></a><h4 id="TGSQL-GUID-21258F63-7506-4019-9FB4-323E9D2DE087" class="sect4"><span class="enumeration_section">8.3.7</span>索引加入扫描</h4>
                  <div>
                     <p>索引连接扫描是多个索引的散列连接，它们一起返回查询请求的所有列。数据库不需要访问表，因为从索引中检索所有数据。</p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-EA936820-BBAC-4DB1-A3F8-050AC81A24E6">当优化器考虑索引加入扫描时</a><br>在某些情况下，避免表访问是最具成本效益的选择。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-0F989C52-262C-4237-9DE1-E14D7CF8EE1D">Index Join Scans如何工作</a><br>索引连接涉及扫描多个索引，然后对从这些扫描获得的rowid使用散列连接以返回行。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-5472D2AD-8141-4017-B828-EE1050BA24CF">索引加入扫描：示例</a><br>此示例查询姓氏以<code class="codeph">A</code>开头的员工的姓氏和电子邮件，指定索引连接。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-B33945C3-CCC0-4D35-AF62-DB80FD4256A6" title="索引是与表或表集群相关联的可选结构，有时可以加速数据访问。">B树索引访问路径</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL95181"></a><div class="props_rev_3"><a id="GUID-EA936820-BBAC-4DB1-A3F8-050AC81A24E6" name="GUID-EA936820-BBAC-4DB1-A3F8-050AC81A24E6"></a><h5 id="TGSQL-GUID-EA936820-BBAC-4DB1-A3F8-050AC81A24E6" class="sect5"><span class="enumeration_section">8.3.7.1</span>当优化器考虑索引加入扫描时</h5>
                     <div>
                        <p>在某些情况下，避免表访问是最具成本效益的选择。</p>
                        <p>优化器在以下情况下考虑索引连接：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>多个索引的散列连接检索查询请求的所有数据，而不需要表访问。</p>
                           </li>
                           <li>
                              <p>从表中检索行的成本高于读取索引而不从表中检索行。索引连接通常很昂贵。例如，在扫描两个索引并加入它们时，选择最具选择性的索引，然后探测该表通常成本更低。</p>
                           </li>
                        </ul>
                        <p>您可以使用<code class="codeph">INDEX_JOIN( <span class="codeinlineitalic">table_name</span> )</code>提示指定索引连接。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-EA936820-BBAC-4DB1-A3F8-050AC81A24E6__GUID-4DAC1F16-8846-49F5-8AFE-B3670B3A8DDF">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=SQLRF50408" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-21258F63-7506-4019-9FB4-323E9D2DE087" title="索引连接扫描是多个索引的散列连接，它们一起返回查询请求的所有列。数据库不需要访问表，因为从索引中检索所有数据。">索引联接扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95182"></a><div class="props_rev_3"><a id="GUID-0F989C52-262C-4237-9DE1-E14D7CF8EE1D" name="GUID-0F989C52-262C-4237-9DE1-E14D7CF8EE1D"></a><h5 id="TGSQL-GUID-0F989C52-262C-4237-9DE1-E14D7CF8EE1D" class="sect5"><span class="enumeration_section">8.3.7.2</span>索引加入扫描的工作原理</h5>
                     <div>
                        <p>索引连接涉及扫描多个索引，然后对从这些扫描获得的rowid使用散列连接以返回行。</p>
                        <p>在索引连接扫描中，始终避免表访问。例如，在单个表上连接两个索引的过程如下：</p>
                        <ol>
                           <li>
                              <p>扫描第一个索引以检索rowid。</p>
                           </li>
                           <li>
                              <p>扫描第二个索引以检索rowid。</p>
                           </li>
                           <li>
                              <p>通过rowid执行散列连接以获取行。</p>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-21258F63-7506-4019-9FB4-323E9D2DE087" title="索引连接扫描是多个索引的散列连接，它们一起返回查询请求的所有列。数据库不需要访问表，因为从索引中检索所有数据。">索引联接扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95184"></a><a id="TGSQL95183"></a><div class="props_rev_3"><a id="GUID-5472D2AD-8141-4017-B828-EE1050BA24CF" name="GUID-5472D2AD-8141-4017-B828-EE1050BA24CF"></a><h5 id="TGSQL-GUID-5472D2AD-8141-4017-B828-EE1050BA24CF" class="sect5"><span class="enumeration_section">8.3.7.3</span>索引联接扫描：示例</h5>
                     <div>
                        <p>此示例查询姓氏以<code class="codeph">A</code>开头的员工的姓氏和电子邮件，指定索引连接。
                        </p><pre class="pre codeblock"><code>SELECT / * + INDEX_JOIN（employees）* / last_name，email FROM employees WHERE last_name like'A％';</code></pre><p><code class="codeph">(last_name,first_name)</code>和<code class="codeph">email</code>列上存在单独的索引。<code class="codeph">emp_name_ix</code>索引的一部分可能如下所示：</p><pre class="pre codeblock"><code>Banda，Amit，AAAVgdAALAAAABSABD Bates，Elizabeth，AAAVgdAALAAAABSABI Bell，Sarah，AAAVgdAALAAAABSABc Bernstein，David，AAAVgdAALAAAABSAAz Bissot，Laura，AAAVgdAALAAAABSAAd Bloom，Harrison，AAAVgdAALAAAABSABF Bull，Alexis，AAAVgdAALAAAABSABV</code></pre><p><code class="codeph">emp_email_uk</code>索引的第一部分可能如下所示：</p><pre class="pre codeblock"><code>ABANDA，AAAVgdAALAAAABSABD ABULL，AAAVgdAALAAAABSABV ACABRIO，AAAVgdAALAAAABSABX AERRAZUR，AAAVgdAALAAAABSAAv AFRIPP，AAAVgdAALAAAABSAAV AHUNOLD，AAAVgdAALAAAABSAAD AHUTTON，AAAVgdAALAAAABSABL</code></pre><p>以下示例使用<code class="codeph">DBMS_XPLAN.DISPLAY_CURSOR</code>函数检索计划。数据库检索<code class="codeph">emp_email_uk</code>索引中的所有rowid，然后在<code class="codeph">emp_name_ix</code>检索以<code class="codeph">A</code>开头的姓氏的rowid。数据库使用散列连接来搜索两组rowid以进行匹配。例如，rowid <code class="codeph">AAAVgdAALAAAABSABD</code>出现在两组rowid中，因此数据库会探测<code class="codeph">employees</code>表以获取与此rowid对应的记录。
                        </p>
                        <div class="example" id="GUID-5472D2AD-8141-4017-B828-EE1050BA24CF__CHDDFCIB">
                           <p class="titleinexample">示例8-4索引连接扫描</p><pre class="pre codeblock"><code>SQL_ID d2djchyc9hmrz，子编号0 ------------------------------------- SELECT / * + INDEX_JOIN（employees ）* / last_name，email FROM employees WHERE last_name like'A％'计划哈希值：3719800892 ------------------------------ -------------------------------------------------- ----------- Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ----------------------------------------- | 0 |选择声明| | | | 3（100）| | | * 1 |查看| index $ _join $ _001 | 3 | 48 | 3（34）| 00:00:01 | | * 2 | <span class="bold">HASH JOIN</span> | | | | | | | * 3 | <span class="bold">INDEX RANGE SCAN</span> | EMP_NAME_IX | 3 | 48 | 1（0）| 00:00:01 | | 4 | <span class="bold">INDEX FAST FULL SCAN</span> | EMP_EMAIL_UK | 3 | 48 | 1（0）| 00:00:01 | -------------------------------------------------- -----------------------------------------谓词信息（由操作ID标识）： -------------------------------------------------- -  1  - 过滤器（“LAST_NAME”LIKE'A％'）2  - 访问权限（ROWID = ROWID）3  - 访问权限（“LAST_NAME”LIKE'A％'）</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-21258F63-7506-4019-9FB4-323E9D2DE087" title="索引连接扫描是多个索引的散列连接，它们一起返回查询请求的所有列。数据库不需要访问表，因为从索引中检索所有数据。">索引联接扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="TGSQL240"></a><div class="props_rev_3"><a id="GUID-B5E41901-933E-4A31-B5D6-9771FD435EC0" name="GUID-B5E41901-933E-4A31-B5D6-9771FD435EC0"></a><h3 id="TGSQL-GUID-B5E41901-933E-4A31-B5D6-9771FD435EC0" class="sect3"><span class="enumeration_section">8.4</span>位图索引访问路径</h3>
               <div>
                  <p>位图索引将索引数据与rowid范围组合在一起。</p>
                  <p>本节介绍位图索引的方式，并介绍一些更常见的位图索引访问路径：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-CD3D7579-3E44-4383-8056-B11B805A437F">关于位图索引访问</a><br>在传统的B树索引中，一个索引条目指向单个行。在位图索引中，键是索引数据和rowid范围的组合。
                     </li>
                     <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-2939D4FD-ECC4-48FB-9AD7-CD844CC71786">位图转换为Rowid</a><br>位图转换在位图中的条目和表中的行之间进行转换。转换可以从入口到行（ <code class="codeph">TO ROWID</code> ），也可以从行到入（ <code class="codeph">FROM ROWID</code> ）。
                     </li>
                     <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-E8F4A411-10BE-4D5E-9207-0D5F8E61A8E0">位图索引单值</a><br>此类访问路径使用位图索引来查找单个键值。
                     </li>
                     <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-9123D7CE-90DC-4C96-AB4F-49FD0227C40B">位图索引范围扫描</a><br>此类访问路径使用位图索引来查找一系列值。
                     </li>
                     <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-2FDE5904-B0BC-44DA-829B-94C89FA77D71">位图合并</a><br>此访问路径合并多个位图，并返回单个位图作为结果。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-00711237-35D3-4CFC-A234-59B3EC53DCD1" title="访问路径是查询用于从行源检索行的技术。">优化程序访问路径</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL95195"></a><div class="props_rev_3"><a id="GUID-CD3D7579-3E44-4383-8056-B11B805A437F" name="GUID-CD3D7579-3E44-4383-8056-B11B805A437F"></a><h4 id="TGSQL-GUID-CD3D7579-3E44-4383-8056-B11B805A437F" class="sect4"><span class="enumeration_section">8.4.1</span>关于位图索引访问</h4>
                  <div>
                     <p>在传统的B树索引中，一个索引条目指向单个行。在位图索引中，键是索引数据和rowid范围的组合。</p>
                     <p>数据库为每个索引键存储至少一个位图。位图中的每个值（一系列<code class="codeph">1</code>和<code class="codeph">0</code>值）指向rowid范围内的行。因此，在位图索引中，一个索引条目指向一组行而不是单个行。
                     </p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-610AE791-0125-4927-A795-2730541C1D06">位图和B树索引之间的差异</a><br>位图索引使用来自B树索引的不同密钥，但存储在B树结构中。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-90B6A8AF-BB62-454B-92AF-AB9E01D93C4D">位图索引的用途</a><br>位图索引通常适用于具有低或中等数量的不同值（NDV）的不经常修改的数据。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-0604FCDA-473B-432F-B1B2-8F766D377D63">位图和行</a><br>对于位图中的特定值，如果行值与位图条件匹配，则值为<code class="codeph">1</code>如果不匹配，则值为<code class="codeph">0</code> 。基于这些值，数据库使用内部算法将位图映射到rowid。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-1F859889-14BC-4F0B-90CE-8682737FB46F">位图加入索引</a><br><span class="bold">位图连接索引</span>是两个或多个表的连接的位图索引。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-BD3F4C5B-E1A6-4444-AA74-87BE752B096E">位图存储</a><br>位图索引驻留在B树结构中，使用分支块和叶块，就像在B树中一样。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-B5E41901-933E-4A31-B5D6-9771FD435EC0" title="位图索引将索引数据与rowid范围组合在一起。">位图索引访问路径</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL95196"></a><div class="props_rev_3"><a id="GUID-610AE791-0125-4927-A795-2730541C1D06" name="GUID-610AE791-0125-4927-A795-2730541C1D06"></a><h5 id="TGSQL-GUID-610AE791-0125-4927-A795-2730541C1D06" class="sect5"><span class="enumeration_section">8.4.1.1</span>位图和B树索引之间的差异</h5>
                     <div>
                        <p>位图索引使用来自B树索引的不同密钥，但存储在B树结构中。</p>
                        <p>下表显示了索引条目类型之间的差异。</p>
                        <div class="tblformalwide" id="GUID-610AE791-0125-4927-A795-2730541C1D06__CHDEEGHB">
                           <p class="titleintable">表8-3 B树和位图的索引条目</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="B树和位图的索引条目" width="100%" border="1" summary="Entries for Bitmap Indexes" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="17%" id="d37861e9198">索引条目</th>
                                    <th align="left" valign="bottom" width="21%" id="d37861e9201">键</th>
                                    <th align="left" valign="bottom" width="10%" id="d37861e9204">数据</th>
                                    <th align="left" valign="bottom" width="52%" id="d37861e9207">例</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="17%" id="d37861e9212" headers="d37861e9198 ">
                                       <p>独特的B树</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d37861e9212 d37861e9201 ">
                                       <p>仅限索引数据</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e9212 d37861e9204 ">
                                       <p>ROWID</p>
                                    </td>
                                    <td align="left" valign="top" width="52%" headers="d37861e9212 d37861e9207 ">
                                       <p>在<code class="codeph">employees.employee_id</code>列的索引条目中，员工ID <code class="codeph">101</code>是密钥，rowid <code class="codeph">AAAPvCAAFAAAAFaAAa</code>是数据：</p><pre class="pre codeblock"><code>101，AAAPvCAAFAAAAFaAAa</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="17%" id="d37861e9236" headers="d37861e9198 ">
                                       <p>非唯一的B树</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d37861e9236 d37861e9201 ">
                                       <p>索引数据与rowid结合使用</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e9236 d37861e9204 ">
                                       <p>没有</p>
                                    </td>
                                    <td align="left" valign="top" width="52%" headers="d37861e9236 d37861e9207 ">
                                       <p>在<code class="codeph">employees.last_name</code>列的索引条目中，名称和rowid组合<code class="codeph">Smith,AAAPvCAAFAAAAFaAAa</code>是密钥，并且没有数据：</p><pre class="pre codeblock"><code>史密斯，AAAPvCAAFAAAAFaAAa</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="17%" id="d37861e9257" headers="d37861e9198 ">
                                       <p>位图</p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d37861e9257 d37861e9201 ">
                                       <p>索引数据与rowid范围相结合</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e9257 d37861e9204 ">
                                       <p>位图</p>
                                    </td>
                                    <td align="left" valign="top" width="52%" headers="d37861e9257 d37861e9207 ">
                                       <p>在<code class="codeph">customers.cust_gender</code>列的索引条目中， <code class="codeph">M,</code> <span class="italic"><code class="codeph">low-rowid,high-rowid</code></span>部分是键， <code class="codeph">1</code>和<code class="codeph">0</code>值的系列是数据：</p><pre class="pre codeblock"><code>M， <span class="italic">低rowid</span> ， <span class="italic">高rowid</span> ，1000101010101010</code></pre></td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>数据库将位图索引存储在B树结构中。数据库可以在密钥的第一部分上快速搜索B树，这是定义索引的属性集，然后获得相应的rowid范围和位图。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-610AE791-0125-4927-A795-2730541C1D06__GUID-6C1D765C-4454-4C79-B37A-5B638919744A">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="optimizer-access-paths.html#GUID-BD3F4C5B-E1A6-4444-AA74-87BE752B096E" title="位图索引驻留在B树结构中，使用分支块和叶块，就像在B树中一样。">位图存储</a> ”</span></p>
                              </li>
                              <li>
                                 <p>有关位图索引概述的<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=CNCPT1182" target="_blank"><span><cite>Oracle数据库概念</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关位图索引的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=GUID-76BAA645-A219-4FF5-AFD4-B6FA8C1473FB" target="_blank"><span><cite>参见“Oracle数据库数据仓库指南”</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-CD3D7579-3E44-4383-8056-B11B805A437F" title="在传统的B树索引中，一个索引条目指向单个行。在位图索引中，键是索引数据和rowid范围的组合。">关于位图索引访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95197"></a><div class="props_rev_3"><a id="GUID-90B6A8AF-BB62-454B-92AF-AB9E01D93C4D" name="GUID-90B6A8AF-BB62-454B-92AF-AB9E01D93C4D"></a><h5 id="TGSQL-GUID-90B6A8AF-BB62-454B-92AF-AB9E01D93C4D" class="sect5"><span class="enumeration_section">8.4.1.2</span>位图索引的用途</h5>
                     <div>
                        <p>位图索引通常适用于具有低或中等数量的不同值（NDV）的不经常修改的数据。</p>
                        <p>通常，B树索引适用于具有高NDV和频繁DML活动的列。例如，优化器可能会为<code class="codeph">sales.amount</code>列的查询选择B树索引，该列返回几行。相比之下， <code class="codeph">customers.state</code>和<code class="codeph">customers.county</code>列是位图索引的候选列，因为它们具有很少的不同值，不经常更新，并且可以从有效的<code class="codeph">AND</code>和<code class="codeph">OR</code>操作中受益。
                        </p>
                        <p>位图索引是加速数据仓库中即席查询的有用方法。它们是恒星转换的基础。具体而言，位图索引在包含以下内容的查询中很有用：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">WHERE</code>子句中的多个条件</p>
                              <p>在访问表本身之前，数据库会筛选出满足某些条件但不是所有条件的行。</p>
                           </li>
                           <li>
                              <p>具有低或中等NDV的列上的<code class="codeph">AND</code> ， <code class="codeph">OR</code>和<code class="codeph">NOT</code>操作</p>
                              <p>组合位图索引可以使这些操作更有效。数据库可以非常快速地合并来自位图索引的位图。例如，如果<code class="codeph">customers.state</code>和<code class="codeph">customers.county</code>列上存在位图索引，则这些索引可以极大地提高以下查询的性能：</p><pre class="pre codeblock"><code>SELECT * FROM customers WHERE state ='CA'AND county ='San Mateo'</code></pre><p>数据库可以有效地将合并位图中的<code class="codeph">1</code>值转换为rowid。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">COUNT</code>函数</p>
                              <p>数据库可以扫描位图索引而无需扫描表。</p>
                           </li>
                           <li>
                              <p>选择空值的谓词</p>
                              <p>与B树索引不同，位图索引可以包含空值。计算列中空值数的查询可以使用位图索引而不扫描表。</p>
                           </li>
                           <li>
                              <p>没有重DML的列</p>
                              <p>原因是一个索引键指向许多行。如果会话修改索引数据，则数据库无法锁定位图中的单个位：而是数据库锁定整个索引<span class="italic">条目</span> ，这实际上会锁定位图指向的行。例如，如果特定客户的居住地从<code class="codeph">San Mateo</code>更改为<code class="codeph">Alameda</code> ，则数据库必须独占访问位图中的<code class="codeph">San Mateo</code>索引条目和<code class="codeph">Alameda</code>索引条目。在<code class="codeph">COMMIT</code>之前，不能修改包含这两个值的行。</p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-90B6A8AF-BB62-454B-92AF-AB9E01D93C4D__GUID-6D7F343E-4B8E-43A3-98E6-D2B4862F37CC">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="query-transformations.html#GUID-EA178F1F-7564-4621-B884-19A202943421" title="星型转换是一种优化器转换，可避免对星型模式中的事实表进行全表扫描。">明星转型</a> ”</span></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=SQLRF00624" target="_blank"><span><cite>Oracle Database SQL语言参考</cite></span></a> ，了解<code class="codeph">COUNT</code>函数</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-CD3D7579-3E44-4383-8056-B11B805A437F" title="在传统的B树索引中，一个索引条目指向单个行。在位图索引中，键是索引数据和rowid范围的组合。">关于位图索引访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95199"></a><a id="TGSQL95198"></a><div class="props_rev_3"><a id="GUID-0604FCDA-473B-432F-B1B2-8F766D377D63" name="GUID-0604FCDA-473B-432F-B1B2-8F766D377D63"></a><h5 id="TGSQL-GUID-0604FCDA-473B-432F-B1B2-8F766D377D63" class="sect5"><span class="enumeration_section">8.4.1.3</span>位图和行</h5>
                     <div>
                        <p>对于位图中的特定值，如果行值与位图条件匹配，则值为<code class="codeph">1</code>如果不匹配，则值为<code class="codeph">0</code> 。基于这些值，数据库使用内部算法将位图映射到rowid。
                        </p>
                        <p>位图条目包含索引值，rowid范围（开始和结束rowid）和位图。位图中的每个<code class="codeph">0</code>或<code class="codeph">1</code>值都是rowid范围的偏移量，并映射到表中的潜在行，即使该行不存在也是如此。由于块中可能的行数是预先确定的，因此数据库可以使用范围端点来确定该范围内任意行的rowid。
                        </p>
                        <div class="infoboxnote" id="GUID-0604FCDA-473B-432F-B1B2-8F766D377D63__GUID-21088835-E1F4-4DE4-9D9D-60F96974B9CA">
                           <p class="notep1">注意：</p>
                           <p>Hakan因子是位图索引算法使用的一种优化，用于限制Oracle数据库假定的行数可以存储在单个块中。通过人为地限制行数，数据库减小了位图的大小。</p>
                        </div>
                        <p><a href="optimizer-access-paths.html#GUID-0604FCDA-473B-432F-B1B2-8F766D377D63__CHDJHDHC" title="位图索引的示例位图">表8-4</a>显示了<code class="codeph">sh.customers.cust_marital_status</code>列的示例位图的一部分，该列可以为空。实际索引有12个不同的值。样本中只显示3个：null， <code class="codeph">married</code>和<code class="codeph">single</code> 。
                        </p>
                        <div class="tblformal" id="GUID-0604FCDA-473B-432F-B1B2-8F766D377D63__CHDJHDHC">
                           <p class="titleintable">表8-4位图索引条目</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="位图索引条目" width="100%" border="1" summary="Sample bitmap for bitmap index" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="16%" id="d37861e9725">cust_marital_status的列值</th>
                                    <th align="left" valign="bottom" width="13%" id="d37861e9728">在Range中启动Rowid</th>
                                    <th align="left" valign="bottom" width="13%" id="d37861e9731">在范围内结束Rowid</th>
                                    <th align="left" valign="bottom" width="10%" id="d37861e9734">范围内的第一排</th>
                                    <th align="left" valign="bottom" width="10%" id="d37861e9737">范围内的第二排</th>
                                    <th align="left" valign="bottom" width="10%" id="d37861e9740">范围内的第3行</th>
                                    <th align="left" valign="bottom" width="10%" id="d37861e9743">范围内的第4排</th>
                                    <th align="left" valign="bottom" width="10%" id="d37861e9746">范围内的第5排</th>
                                    <th align="left" valign="bottom" width="10%" id="d37861e9749">范围中的第6行</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d37861e9754" headers="d37861e9725 ">
                                       <p>（空值）</p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d37861e9754 d37861e9728 ">
                                       <p><code class="codeph">AAA ......</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d37861e9754 d37861e9731 ">
                                       <p><code class="codeph">CCC ......</code></p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e9754 d37861e9734 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e9754 d37861e9737 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e9754 d37861e9740 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e9754 d37861e9743 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e9754 d37861e9746 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e9754 d37861e9749 ">
                                       <p>1</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d37861e9784" headers="d37861e9725 ">
                                       <p><code class="codeph">已婚</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d37861e9784 d37861e9728 ">
                                       <p><code class="codeph">AAA ......</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d37861e9784 d37861e9731 ">
                                       <p><code class="codeph">CCC ......</code></p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e9784 d37861e9734 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e9784 d37861e9737 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e9784 d37861e9740 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e9784 d37861e9743 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e9784 d37861e9746 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e9784 d37861e9749 ">
                                       <p>0</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d37861e9815" headers="d37861e9725 ">
                                       <p><code class="codeph">单</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d37861e9815 d37861e9728 ">
                                       <p><code class="codeph">AAA ......</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d37861e9815 d37861e9731 ">
                                       <p><code class="codeph">CCC ......</code></p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e9815 d37861e9734 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e9815 d37861e9737 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e9815 d37861e9740 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e9815 d37861e9743 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e9815 d37861e9746 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e9815 d37861e9749 ">
                                       <p>0</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="16%" id="d37861e9846" headers="d37861e9725 ">
                                       <p><code class="codeph">单</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d37861e9846 d37861e9728 ">
                                       <p><code class="codeph">DDD ......</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d37861e9846 d37861e9731 ">
                                       <p><code class="codeph">EEE ......</code></p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e9846 d37861e9734 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e9846 d37861e9737 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e9846 d37861e9740 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e9846 d37861e9743 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e9846 d37861e9746 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e9846 d37861e9749 ">
                                       <p>1</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>如<a href="optimizer-access-paths.html#GUID-0604FCDA-473B-432F-B1B2-8F766D377D63__CHDJHDHC" title="位图索引的示例位图">表8-4</a>所示，与B树索引不同，位图索引可以包括完全由空值组成的键。在<a href="optimizer-access-paths.html#GUID-0604FCDA-473B-432F-B1B2-8F766D377D63__CHDJHDHC" title="位图索引的示例位图">表8-4中</a> ，null对于范围中的第6行的值为<code class="codeph">1</code> ，这意味着该范围中第6行的<code class="codeph">cust_marital_status</code>值为null。索引空值对于某些SQL语句很有用，例如具有聚合函数<code class="codeph">COUNT</code>查询。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-0604FCDA-473B-432F-B1B2-8F766D377D63__GUID-41AE5B01-1926-4AA8-875C-6CD172F4D6A7">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=CNCPT89008" target="_blank"><span class="italic">Oracle Database Concepts</span></a>了解rowid格式</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-CD3D7579-3E44-4383-8056-B11B805A437F" title="在传统的B树索引中，一个索引条目指向单个行。在位图索引中，键是索引数据和rowid范围的组合。">关于位图索引访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95200"></a><div class="props_rev_3"><a id="GUID-1F859889-14BC-4F0B-90CE-8682737FB46F" name="GUID-1F859889-14BC-4F0B-90CE-8682737FB46F"></a><h5 id="TGSQL-GUID-1F859889-14BC-4F0B-90CE-8682737FB46F" class="sect5"><span class="enumeration_section">8.4.1.4</span>位图连接索引</h5>
                     <div>
                        <p><span class="bold">位图连接索引</span>是两个或多个表的连接的位图索引。
                        </p>
                        <p>优化程序可以使用位图连接索引来减少或消除计划执行期间必须连接的数据量。位图连接索引在存储方面比物化连接视图更有效。</p>
                        <p>以下示例在<code class="codeph">sh.sales</code>和<code class="codeph">sh.customers</code>表上创建位图索引：</p><pre class="pre codeblock"><code>CREATE BITMAP INDEX cust_sales_bji ON sales（c.cust_city）FROM sales s，customers c WHERE c.cust_id = s.cust_id LOCAL;</code></pre><p>前面的<code class="codeph">CREATE</code>语句中的<code class="codeph">FROM</code>和<code class="codeph">WHERE</code>子句表示表之间的连接条件。<code class="codeph">customers.cust_city</code>列是索引键。
                        </p>
                        <p>索引中的每个键值表示<code class="codeph">customers</code>表中的可能城市。从概念上讲，索引的键值可能如下所示，其中一个位图与每个键值相关联：</p><pre class="pre codeblock"><code>旧金山0 0 0 1 0 1 0 0 0 1 0 0 0 0 0。 。 。San Mateo 0 1 0 0 0 0 0 0 1 0 0 0 0 0 1。 。 。Smithville 1 0 0 0 1 0 0 1 0 0 1 0 1 0 0。 。 。。。。
</code></pre><p>位图中的每个位对应于<code class="codeph">sales</code>表中的一行。在<code class="codeph">Smithville</code>密钥中，值<code class="codeph">1</code>表示<code class="codeph">sales</code>表中的第一行对应于销售给Smithville客户的产品，而值<code class="codeph">0</code>表示第二行对应于未出售给Smithville客户的产品。
                        </p>
                        <p>考虑以下对Smithville客户单独销售数量的查询：</p><pre class="pre codeblock"><code>SELECT COUNT（*）FROM sales s，customers c WHERE c.cust_id = s.cust_id AND c.cust_city ='Smithville';</code></pre><p>以下计划显示数据库读取<code class="codeph">Smithville</code>位图以获得Smithville销售数量（步骤4），从而避免<code class="codeph">customers</code>和<code class="codeph">sales</code>表的连接。
                        </p><pre class="pre codeblock"><code>SQL_ID 57s100mh142wy，子编号0 ------------------------------------- SELECT COUNT（*）FROM sales s，客户c WHERE c.cust_id = s.cust_id AND c.cust_city ='Smithville'计划哈希值：3663491772 ------------------------- -------------------------------------------------- --------- | Id |操作|名称|行|字节|成本（％CPU）|时间| Pstart时| PSTOP | -------------------------------------------------- ---------------------------------- | 0 |选择声明| | | | 29（100）| | | | | 1 | SORT AGGREGATE | | 1 | 5 | | | | | | 2 | PARTITION RANGE ALL | | 1708 | 8540 | 29（0）| 00：00：01 | 1 | 28 | | 3 | BITMAP CONVERSION COUNT | | 1708 | 8540 | 29（0）| 00:00：01 | | | | * 4 | <span class="bold">BITMAP INDEX单一价值</span> | CUST_SALES_BJI | | | | | 1 | 28 | -------------------------------------------------- ----------------------------------谓词信息（由操作ID标识）：------- -------------------------------------------- 4  -  access（“S ”。 “SYS_NC00008 $”= '史密斯维尔'）</code></pre></div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-1F859889-14BC-4F0B-90CE-8682737FB46F__GUID-C7EE0996-76FF-4B00-9B4B-DF7FC6232398">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=SQLRF01209" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a>了解<code class="codeph">CREATE INDEX</code>语句</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-CD3D7579-3E44-4383-8056-B11B805A437F" title="在传统的B树索引中，一个索引条目指向单个行。在位图索引中，键是索引数据和rowid范围的组合。">关于位图索引访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95201"></a><div class="props_rev_3"><a id="GUID-BD3F4C5B-E1A6-4444-AA74-87BE752B096E" name="GUID-BD3F4C5B-E1A6-4444-AA74-87BE752B096E"></a><h5 id="TGSQL-GUID-BD3F4C5B-E1A6-4444-AA74-87BE752B096E" class="sect5"><span class="enumeration_section">8.4.1.5</span>位图存储</h5>
                     <div>
                        <p>位图索引驻留在B树结构中，使用分支块和叶块，就像在B树中一样。</p>
                        <p>例如，如果<code class="codeph">customers.cust_marital_status</code>列有12个不同的值，则一个分支块可能指向已结合的键<code class="codeph">married, <span class="codeinlineitalic">rowid-range</span></code>和<code class="codeph">single, <span class="codeinlineitalic">rowid-range</span></code> ，另一个分支块可能指向<code class="codeph">widowed, <span class="codeinlineitalic">rowid-range</span></code>键，以及等等。或者，单个分支块可以指向包含所有12个不同密钥的叶块。
                        </p>
                        <p>每个索引列值可以具有一个或多个位图片段，每个位图片段具有其自己的rowid范围，占据一个或多个范围中的连续行集。数据库可以使用<a href="glossary.html#GUID-45DDE193-8222-4A79-B126-151C2D640A3E"><span class="xrefglossterm">位图片段</span></a>来分解相对于块大小的索引条目。例如，数据库可以将单个索引条目分成三个部分，前两个部分位于相同范围的单独块中，而最后一个部分位于不同范围的单独块中。
                        </p>
                        <p>为了节省空间，Oracle数据库可以压缩连续的<code class="codeph">0</code>值范围。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-CD3D7579-3E44-4383-8056-B11B805A437F" title="在传统的B树索引中，一个索引条目指向单个行。在位图索引中，键是索引数据和rowid范围的组合。">关于位图索引访问</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL95202"></a><div class="props_rev_3"><a id="GUID-2939D4FD-ECC4-48FB-9AD7-CD844CC71786" name="GUID-2939D4FD-ECC4-48FB-9AD7-CD844CC71786"></a><h4 id="TGSQL-GUID-2939D4FD-ECC4-48FB-9AD7-CD844CC71786" class="sect4"><span class="enumeration_section">8.4.2</span>位图转换为Rowid</h4>
                  <div>
                     <p>位图转换在位图中的条目和表中的行之间进行转换。转换可以从入口到行（ <code class="codeph">TO ROWID</code> ），也可以从行到入（ <code class="codeph">FROM ROWID</code> ）。
                     </p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-E66932B7-A092-49AB-ADAE-66B24A32B222">当优化器选择位图转换为Rowid时</a><br>只要使用位图索引条目从表中检索行，优化程序就会使用转换。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-44784FBB-AE07-4A57-B5C3-E558F05EDCFB">如何将位图转换为Rowid</a><br>从概念上讲，位图可以表示为表。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-3F77355A-BF28-46CF-85A8-6F694348958A">位图转换为Rowid：示例</a><br>在此示例中，优化程序选择位图转换操作以使用范围谓词来满足查询。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-B5E41901-933E-4A31-B5D6-9771FD435EC0" title="位图索引将索引数据与rowid范围组合在一起。">位图索引访问路径</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL95203"></a><div class="props_rev_3"><a id="GUID-E66932B7-A092-49AB-ADAE-66B24A32B222" name="GUID-E66932B7-A092-49AB-ADAE-66B24A32B222"></a><h5 id="TGSQL-GUID-E66932B7-A092-49AB-ADAE-66B24A32B222" class="sect5"><span class="enumeration_section">8.4.2.1</span>当优化器选择位图转换为ROWID</h5>
                     <div>
                        <p>只要使用位图索引条目从表中检索行，优化程序就会使用转换。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-2939D4FD-ECC4-48FB-9AD7-CD844CC71786" title="位图转换在位图中的条目和表中的行之间进行转换。转换可以从入口到行（TO ROWID），也可以从行到入（FROM ROWID）。">位图转换为Rowid</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95204"></a><div class="props_rev_3"><a id="GUID-44784FBB-AE07-4A57-B5C3-E558F05EDCFB" name="GUID-44784FBB-AE07-4A57-B5C3-E558F05EDCFB"></a><h5 id="TGSQL-GUID-44784FBB-AE07-4A57-B5C3-E558F05EDCFB" class="sect5"><span class="enumeration_section">8.4.2.2</span> Bitmap转换为Rowid的工作原理</h5>
                     <div>
                        <p>从概念上讲，位图可以表示为表。</p>
                        <p>例如， <a href="optimizer-access-paths.html#GUID-0604FCDA-473B-432F-B1B2-8F766D377D63__CHDJHDHC" title="位图索引的示例位图">表8-4</a>将位图表示为一个表，其中<code class="codeph">customers</code>行号为列， <code class="codeph">cust_marital_status</code>值为行。<a href="optimizer-access-paths.html#GUID-0604FCDA-473B-432F-B1B2-8F766D377D63__CHDJHDHC" title="位图索引的示例位图">表8-4</a>中的每个字段的值为<code class="codeph">1</code>或<code class="codeph">0</code> ，表示一行中的列值。从概念上讲，该位图转换使用内部算法，说：“域<span class="italic">F</span>位图中的对应于所述第<span class="italic">N</span>的第<span class="italic">M</span>个表中的块的行，”或“的第<span class="italic">M</span>个的行第<span class="italic">N</span>块中的表对应于位图中的字段<span class="italic">F.</span> “</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-2939D4FD-ECC4-48FB-9AD7-CD844CC71786" title="位图转换在位图中的条目和表中的行之间进行转换。转换可以从入口到行（TO ROWID），也可以从行到入（FROM ROWID）。">位图转换为Rowid</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95205"></a><div class="props_rev_3"><a id="GUID-3F77355A-BF28-46CF-85A8-6F694348958A" name="GUID-3F77355A-BF28-46CF-85A8-6F694348958A"></a><h5 id="TGSQL-GUID-3F77355A-BF28-46CF-85A8-6F694348958A" class="sect5"><span class="enumeration_section">8.4.2.3</span>位图转换为Rowid：示例</h5>
                     <div>
                        <p>在此示例中，优化程序选择位图转换操作以使用范围谓词来满足查询。</p>
                        <p><code class="codeph">sh.customers</code>表的查询选择1918年之前出生的所有客户的名称：</p><pre class="pre codeblock"><code>SELECT cust_last_name，cust_first_name FROM customers WHERE cust_year_of_birth &lt;1918;</code></pre><p>以下计划显示数据库使用范围扫描查找小于<code class="codeph">1918</code>所有键值（步骤3），将位图中的<code class="codeph">1</code>值转换为rowids（步骤2），然后使用rowid从<code class="codeph">customers</code>获取行表（步骤1）：</p><pre class="pre codeblock"><code>-------------------------------------------------- ------------------------------------------- | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ------------------------------------------- | 0 |选择声明| | | | 421（100）| | | 1 |通过INDEX ROWID BATCHED表的访问权限客户| 3604 | 68476 | 421（1）| 00:00:01 | | 2 | <span class="bold">BITMAP转换为ROWIDS</span> | | | | | | | * 3 | BITMAP INDEX RANGE SCAN | CUSTOMERS_YOB_BIX | | | | | -------------------------------------------------- -------------------------------------------谓词信息（由操作ID标识）：------------------------------------------------ --- 3  - 访问（“CUST_YEAR_OF_BIRTH”&lt;1918）过滤器（“CUST_YEAR_OF_BIRTH”&lt;1918）</code></pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-2939D4FD-ECC4-48FB-9AD7-CD844CC71786" title="位图转换在位图中的条目和表中的行之间进行转换。转换可以从入口到行（TO ROWID），也可以从行到入（FROM ROWID）。">位图转换为Rowid</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL95206"></a><div class="props_rev_3"><a id="GUID-E8F4A411-10BE-4D5E-9207-0D5F8E61A8E0" name="GUID-E8F4A411-10BE-4D5E-9207-0D5F8E61A8E0"></a><h4 id="TGSQL-GUID-E8F4A411-10BE-4D5E-9207-0D5F8E61A8E0" class="sect4"><span class="enumeration_section">8.4.3</span>位图索引单值</h4>
                  <div>
                     <p>此类访问路径使用位图索引来查找单个键值。</p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-86B195AF-AC56-4694-B015-D12D24B66927">当优化器考虑位图索引单值时</a><br>当谓词包含相等运算符时，优化程序会考虑此访问路径。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-FFD27025-9841-4ECC-8E07-46380340CA45">位图索引单值如何工作</a><br>查询扫描单个位图以查找包含<code class="codeph">1</code>值的位置。数据库将<code class="codeph">1</code>值转换为rowid，然后使用rowid查找行。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-CE4D999C-F694-4E5C-B54C-1919F80734B8">位图索引单值：示例</a><br>在此示例中，优化程序选择位图索引单值操作以满足使用等式谓词的查询。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-B5E41901-933E-4A31-B5D6-9771FD435EC0" title="位图索引将索引数据与rowid范围组合在一起。">位图索引访问路径</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL95207"></a><div class="props_rev_3"><a id="GUID-86B195AF-AC56-4694-B015-D12D24B66927" name="GUID-86B195AF-AC56-4694-B015-D12D24B66927"></a><h5 id="TGSQL-GUID-86B195AF-AC56-4694-B015-D12D24B66927" class="sect5"><span class="enumeration_section">8.4.3.1</span>当优化器考虑位图索引单值时</h5>
                     <div>
                        <p>当谓词包含相等运算符时，优化程序会考虑此访问路径。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-E8F4A411-10BE-4D5E-9207-0D5F8E61A8E0" title="此类访问路径使用位图索引来查找单个键值。">位图索引单值</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95208"></a><div class="props_rev_3"><a id="GUID-FFD27025-9841-4ECC-8E07-46380340CA45" name="GUID-FFD27025-9841-4ECC-8E07-46380340CA45"></a><h5 id="TGSQL-GUID-FFD27025-9841-4ECC-8E07-46380340CA45" class="sect5"><span class="enumeration_section">8.4.3.2</span>位图索引单值如何工作</h5>
                     <div>
                        <p>查询扫描单个位图以查找包含<code class="codeph">1</code>值的位置。数据库将<code class="codeph">1</code>值转换为rowid，然后使用rowid查找行。
                        </p>
                        <p>数据库只需要处理单个位图。例如，下表表示该值的位图索引（在2个图片） <code class="codeph">widowed</code>在<code class="codeph">sh.customers.cust_marital_status</code>柱。为了满足具有<code class="codeph">widowed</code>状态的客户的查询，数据库可以搜索<code class="codeph">widowed</code>位图中的每个<code class="codeph">1</code>值并找到相应行的rowid。
                        </p>
                        <div class="tblformal" id="GUID-FFD27025-9841-4ECC-8E07-46380340CA45__GUID-EE599145-CB9F-4A23-B61C-EC903C5F7F71">
                           <p class="titleintable">表8-5位图索引条目</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="位图索引条目" width="100%" border="1" summary="Sample bitmap for bitmap index" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="14%" id="d37861e11230">列值</th>
                                    <th align="left" valign="bottom" width="14%" id="d37861e11233">在Range中启动Rowid</th>
                                    <th align="left" valign="bottom" width="13%" id="d37861e11236">在范围内结束Rowid</th>
                                    <th align="left" valign="bottom" width="10%" id="d37861e11239">范围内的第一排</th>
                                    <th align="left" valign="bottom" width="10%" id="d37861e11242">范围内的第二排</th>
                                    <th align="left" valign="bottom" width="10%" id="d37861e11245">范围内的第3行</th>
                                    <th align="left" valign="bottom" width="10%" id="d37861e11248">范围内的第4排</th>
                                    <th align="left" valign="bottom" width="10%" id="d37861e11251">范围内的第5排</th>
                                    <th align="left" valign="bottom" width="10%" id="d37861e11254">范围中的第6行</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="14%" id="d37861e11259" headers="d37861e11230 ">
                                       <p><code class="codeph">寡</code></p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d37861e11259 d37861e11233 ">
                                       <p><code class="codeph">AAA ......</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d37861e11259 d37861e11236 ">
                                       <p><code class="codeph">CCC ......</code></p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11259 d37861e11239 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11259 d37861e11242 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11259 d37861e11245 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11259 d37861e11248 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11259 d37861e11251 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11259 d37861e11254 ">
                                       <p>0</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="14%" id="d37861e11290" headers="d37861e11230 ">
                                       <p><code class="codeph">寡</code></p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d37861e11290 d37861e11233 ">
                                       <p><code class="codeph">DDD ......</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d37861e11290 d37861e11236 ">
                                       <p><code class="codeph">EEE ......</code></p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11290 d37861e11239 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11290 d37861e11242 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11290 d37861e11245 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11290 d37861e11248 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11290 d37861e11251 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11290 d37861e11254 ">
                                       <p>1</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-E8F4A411-10BE-4D5E-9207-0D5F8E61A8E0" title="此类访问路径使用位图索引来查找单个键值。">位图索引单值</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95209"></a><div class="props_rev_3"><a id="GUID-CE4D999C-F694-4E5C-B54C-1919F80734B8" name="GUID-CE4D999C-F694-4E5C-B54C-1919F80734B8"></a><h5 id="TGSQL-GUID-CE4D999C-F694-4E5C-B54C-1919F80734B8" class="sect5"><span class="enumeration_section">8.4.3.3</span>位图索引单值：示例</h5>
                     <div>
                        <p>在此示例中，优化程序选择位图索引单值操作以满足使用等式谓词的查询。</p>
                        <p><code class="codeph">sh.customers</code>表的查询选择所有丧偶客户：</p><pre class="pre codeblock"><code>SELECT * FROM customers WHERE cust_marital_status ='Widowed';</code></pre><p>以下计划显示数据库在<code class="codeph">customers</code>位图索引中读取带有<code class="codeph">Widowed</code>键的条目（步骤3），将位图中的<code class="codeph">1</code>值转换为rowid（步骤2），然后使用rowid从<code class="codeph">customers</code>获取行表（步骤1）：</p><pre class="pre codeblock"><code>SQL_ID ff5an2xsn086h，子编号0 ------------------------------------- SELECT * FROM customers WHERE cust_marital_status = '丧偶'计划哈希值：2579015045 ------------------------------------------ -------------------------------------------------- -  | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ------------------------------------------- | 0 |选择声明| | | | 412（100）| | | 1 |通过INDEX ROWID批量处理表访问|客户| 3461 | 638K | 412（2）| 00:00:01 | | 2 | BITMAP转换为ROWIDS | | | | | | | * 3 | <span class="bold">BITMAP INDEX单一价值</span> | CUSTOMERS_MARITAL_BIX | | | | | -------------------------------------------------- -------------------------------------------谓词信息（由操作ID标识）：------------------------------------------------ --- 3  - 访问（“CUST_MARITAL_STATUS”='丧偶'）</code></pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-E8F4A411-10BE-4D5E-9207-0D5F8E61A8E0" title="此类访问路径使用位图索引来查找单个键值。">位图索引单值</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL95210"></a><div class="props_rev_3"><a id="GUID-9123D7CE-90DC-4C96-AB4F-49FD0227C40B" name="GUID-9123D7CE-90DC-4C96-AB4F-49FD0227C40B"></a><h4 id="TGSQL-GUID-9123D7CE-90DC-4C96-AB4F-49FD0227C40B" class="sect4"><span class="enumeration_section">8.4.4</span>位图索引范围扫描</h4>
                  <div>
                     <p>此类访问路径使用位图索引来查找一系列值。</p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-4F1E2861-F76D-4760-B43E-C12252017D8C">当优化程序考虑位图索引范围扫描时</a><br>当谓词选择一系列值时，优化程序会考虑此访问路径。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-B3D5EDB0-CD7B-4FE7-93B6-C348743CE95C">位图索引范围如何扫描工作</a><br>该扫描与B树范围扫描的工作方式类似。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-CE4551F6-D694-4C4A-8606-9544278D3867">位图索引范围扫描：示例</a><br>此示例使用范围扫描来选择在一年之前出生的客户。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-B5E41901-933E-4A31-B5D6-9771FD435EC0" title="位图索引将索引数据与rowid范围组合在一起。">位图索引访问路径</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL95211"></a><div class="props_rev_3"><a id="GUID-4F1E2861-F76D-4760-B43E-C12252017D8C" name="GUID-4F1E2861-F76D-4760-B43E-C12252017D8C"></a><h5 id="TGSQL-GUID-4F1E2861-F76D-4760-B43E-C12252017D8C" class="sect5"><span class="enumeration_section">8.4.4.1</span>当优化器考虑位图索引范围扫描时</h5>
                     <div>
                        <p>当谓词选择一系列值时，优化程序会考虑此访问路径。</p>
                        <p>扫描范围可以在两侧限制，也可以在一侧或两侧无限制。优化程序通常会选择范围扫描以进行选择性查询。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-4F1E2861-F76D-4760-B43E-C12252017D8C__GUID-CE2AE938-47E7-422D-8BFA-E5FBAF94F75A">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="optimizer-access-paths.html#GUID-E2353939-DFBD-444A-94BC-2497E2A418D1" title="索引范围扫描是值的有序扫描。">指数范围扫描</a> ”</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-9123D7CE-90DC-4C96-AB4F-49FD0227C40B" title="此类访问路径使用位图索引来查找一系列值。">位图索引范围扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95212"></a><div class="props_rev_3"><a id="GUID-B3D5EDB0-CD7B-4FE7-93B6-C348743CE95C" name="GUID-B3D5EDB0-CD7B-4FE7-93B6-C348743CE95C"></a><h5 id="TGSQL-GUID-B3D5EDB0-CD7B-4FE7-93B6-C348743CE95C" class="sect5"><span class="enumeration_section">8.4.4.2</span>位图索引范围如何扫描工作</h5>
                     <div>
                        <p>该扫描与B树范围扫描的工作方式类似。</p>
                        <p>例如，下表表示<code class="codeph">sh.customers.cust_year_of_birth</code>列的位图索引中的三个值。如果查询请求1917年之前出生的所有客户，则数据库可以扫描此索引以查找低于<code class="codeph">1917</code>值，然后获取具有<code class="codeph">1</code>行的rowid。
                        </p>
                        <div class="tblformal" id="GUID-B3D5EDB0-CD7B-4FE7-93B6-C348743CE95C__GUID-E7AF2B63-9386-4F3D-9325-726F8A285944">
                           <p class="titleintable">表8-6位图索引条目</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="位图索引条目" width="100%" border="1" summary="Sample bitmap for bitmap index" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="14%" id="d37861e11871">列值</th>
                                    <th align="left" valign="bottom" width="14%" id="d37861e11874">在Range中启动Rowid</th>
                                    <th align="left" valign="bottom" width="13%" id="d37861e11877">在范围内结束Rowid</th>
                                    <th align="left" valign="bottom" width="10%" id="d37861e11880">范围内的第一排</th>
                                    <th align="left" valign="bottom" width="10%" id="d37861e11883">范围内的第二排</th>
                                    <th align="left" valign="bottom" width="10%" id="d37861e11886">范围内的第3行</th>
                                    <th align="left" valign="bottom" width="10%" id="d37861e11889">范围内的第4排</th>
                                    <th align="left" valign="bottom" width="10%" id="d37861e11892">范围内的第5排</th>
                                    <th align="left" valign="bottom" width="10%" id="d37861e11895">范围中的第6行</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="14%" id="d37861e11900" headers="d37861e11871 ">
                                       <p><code class="codeph">1913年</code></p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d37861e11900 d37861e11874 ">
                                       <p><code class="codeph">AAA ......</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d37861e11900 d37861e11877 ">
                                       <p><code class="codeph">CCC ......</code></p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11900 d37861e11880 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11900 d37861e11883 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11900 d37861e11886 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11900 d37861e11889 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11900 d37861e11892 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11900 d37861e11895 ">
                                       <p>1</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="14%" id="d37861e11931" headers="d37861e11871 ">
                                       <p><code class="codeph">1917年</code></p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d37861e11931 d37861e11874 ">
                                       <p><code class="codeph">AAA ......</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d37861e11931 d37861e11877 ">
                                       <p><code class="codeph">CCC ......</code></p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11931 d37861e11880 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11931 d37861e11883 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11931 d37861e11886 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11931 d37861e11889 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11931 d37861e11892 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11931 d37861e11895 ">
                                       <p>0</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="14%" id="d37861e11962" headers="d37861e11871 ">
                                       <p><code class="codeph">1918年</code></p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d37861e11962 d37861e11874 ">
                                       <p><code class="codeph">AAA ......</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d37861e11962 d37861e11877 ">
                                       <p><code class="codeph">CCC ......</code></p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11962 d37861e11880 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11962 d37861e11883 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11962 d37861e11886 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11962 d37861e11889 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11962 d37861e11892 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11962 d37861e11895 ">
                                       <p>0</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="14%" id="d37861e11993" headers="d37861e11871 ">
                                       <p><code class="codeph">1918年</code></p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d37861e11993 d37861e11874 ">
                                       <p><code class="codeph">DDD ......</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d37861e11993 d37861e11877 ">
                                       <p><code class="codeph">EEE ......</code></p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11993 d37861e11880 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11993 d37861e11883 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11993 d37861e11886 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11993 d37861e11889 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11993 d37861e11892 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d37861e11993 d37861e11895 ">
                                       <p>1</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-B3D5EDB0-CD7B-4FE7-93B6-C348743CE95C__GUID-11E57EB9-3050-483B-81F5-E8F4BF935E24">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="optimizer-access-paths.html#GUID-E2353939-DFBD-444A-94BC-2497E2A418D1" title="索引范围扫描是值的有序扫描。">指数范围扫描</a> ”</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-9123D7CE-90DC-4C96-AB4F-49FD0227C40B" title="此类访问路径使用位图索引来查找一系列值。">位图索引范围扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95213"></a><div class="props_rev_3"><a id="GUID-CE4551F6-D694-4C4A-8606-9544278D3867" name="GUID-CE4551F6-D694-4C4A-8606-9544278D3867"></a><h5 id="TGSQL-GUID-CE4551F6-D694-4C4A-8606-9544278D3867" class="sect5"><span class="enumeration_section">8.4.4.3</span>位图索引范围扫描：示例</h5>
                     <div>
                        <p>此示例使用范围扫描来选择在一年之前出生的客户。</p>
                        <p><code class="codeph">sh.customers</code>表的查询选择1918年之前出生的客户名称：</p><pre class="pre codeblock"><code>SELECT cust_last_name，cust_first_name FROM customers WHERE cust_year_of_birth &lt;1918</code></pre><p>以下计划显示数据库获取<code class="codeph">cust_year_of_birth</code>密钥低于<code class="codeph">1918</code>所有位图（步骤3），将位图转换为rowid（步骤2），然后获取行（步骤1）：</p><pre class="pre codeblock"><code>SQL_ID 672z2h9rawyjg，子编号0 ------------------------------------- SELECT cust_last_name，cust_first_name FROM customers WHERE cust_year_of_birth &lt;1918计划哈希值：4198466611 ------------------------------------------ -------------------------------------------------- -  | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ------------------------------------------- | 0 |选择声明| | | | 421（100）| | | 1 |通过INDEX ROWID BATCHED表的访问权限客户| 3604 | 68476 | 421（1）| 00:00：01 | | 2 | BITMAP转换为ROWIDS | | | | | | | * 3 | <span class="bold">BITMAP INDEX RANGE SCAN</span> | CUSTOMERS_YOB_BIX | | | | | -------------------------------------------------- -------------------------------------------谓词信息（由操作ID标识）：------------------------------------------------ --- 3  - 访问（“CUST_YEAR_OF_BIRTH”&lt;1918）过滤器（“CUST_YEAR_OF_BIRTH”&lt;1918）</code></pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-9123D7CE-90DC-4C96-AB4F-49FD0227C40B" title="此类访问路径使用位图索引来查找一系列值。">位图索引范围扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL95214"></a><div class="props_rev_3"><a id="GUID-2FDE5904-B0BC-44DA-829B-94C89FA77D71" name="GUID-2FDE5904-B0BC-44DA-829B-94C89FA77D71"></a><h4 id="TGSQL-GUID-2FDE5904-B0BC-44DA-829B-94C89FA77D71" class="sect4"><span class="enumeration_section">8.4.5</span>位图合并</h4>
                  <div>
                     <p>此访问路径合并多个位图，并返回单个位图作为结果。</p>
                     <p>位图合并由执行计划中的<code class="codeph">BITMAP MERGE</code>操作指示。
                     </p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-BAFC38D5-C3A8-4100-A0E0-E4E0BF0413BA">当优化器考虑位图合并时</a><br>优化器通常使用位图合并来组合从位图索引范围扫描生成的位图。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-2B852AE5-DB31-42F6-A39D-DF058D5A8204">位图合并的工作原理</a><br>合并在两个位图之间使用布尔<code class="codeph">OR</code>运算。生成的位图选择第一个位图中的所有行，以及每个后续位图中的所有行。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-8CB7829F-D612-41D0-9870-1C40DF73C71B">位图合并：示例</a><br>此示例显示数据库如何合并位图以使用范围谓词优化查询。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-B5E41901-933E-4A31-B5D6-9771FD435EC0" title="位图索引将索引数据与rowid范围组合在一起。">位图索引访问路径</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL95215"></a><div class="props_rev_3"><a id="GUID-BAFC38D5-C3A8-4100-A0E0-E4E0BF0413BA" name="GUID-BAFC38D5-C3A8-4100-A0E0-E4E0BF0413BA"></a><h5 id="TGSQL-GUID-BAFC38D5-C3A8-4100-A0E0-E4E0BF0413BA" class="sect5"><span class="enumeration_section">8.4.5.1</span>优化程序考虑位图合并时</h5>
                     <div>
                        <p>优化器通常使用位图合并来组合从位图索引范围扫描生成的位图。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-2FDE5904-B0BC-44DA-829B-94C89FA77D71" title="此访问路径合并多个位图，并返回单个位图作为结果。">位图合并</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95216"></a><div class="props_rev_3"><a id="GUID-2B852AE5-DB31-42F6-A39D-DF058D5A8204" name="GUID-2B852AE5-DB31-42F6-A39D-DF058D5A8204"></a><h5 id="TGSQL-GUID-2B852AE5-DB31-42F6-A39D-DF058D5A8204" class="sect5"><span class="enumeration_section">8.4.5.2</span>位图合并的工作<span class="enumeration_section">原理</span></h5>
                     <div>
                        <p>合并在两个位图之间使用布尔<code class="codeph">OR</code>运算。生成的位图选择第一个位图中的所有行，以及每个后续位图中的所有行。
                        </p>
                        <p>查询可能会选择1918年之前出生的所有客户。以下示例显示了三种样品的位图<code class="codeph">customers.cust_year_of_birth</code>键： <code class="codeph">1917</code> ， <code class="codeph">1916</code> ，和<code class="codeph">1915</code> 。如果任何位图中的任何位置具有<code class="codeph">1</code> ，则合并的位图在相同位置具有<code class="codeph">1</code> 。否则，合并的位图具有<code class="codeph">0</code> 。
                        </p><pre class="pre codeblock"><code>1917 1 0 1 0 0 0 0 0 0 0 0 0 0 1 1916 0 1 0 0 0 0 0 0 0 0 0 0 0 0 1915 0 0 0 0 0 0 0 0 1 0 0 0 0 0 ----- ------------------------------- merged：1 1 1 0 0 0 0 0 1 0 0 0 0 1</code></pre><p>在<code class="codeph">1</code>中得到的位图值对应于包含值的行<code class="codeph">1915</code> ， <code class="codeph">1916</code> ，或<code class="codeph">1917</code> 。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-2FDE5904-B0BC-44DA-829B-94C89FA77D71" title="此访问路径合并多个位图，并返回单个位图作为结果。">位图合并</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95217"></a><div class="props_rev_3"><a id="GUID-8CB7829F-D612-41D0-9870-1C40DF73C71B" name="GUID-8CB7829F-D612-41D0-9870-1C40DF73C71B"></a><h5 id="TGSQL-GUID-8CB7829F-D612-41D0-9870-1C40DF73C71B" class="sect5"><span class="enumeration_section">8.4.5.3</span>位图合并：示例</h5>
                     <div>
                        <p>此示例显示数据库如何合并位图以使用范围谓词优化查询。</p>
                        <p>对<code class="codeph">sh.customers</code>表的查询选择1918年之前出生的女性客户的姓名：</p><pre class="pre codeblock"><code>SELECT cust_last_name，cust_first_name FROM customers WHERE cust_gender ='F'AND cust_year_of_birth &lt;1918</code></pre><p>以下计划显示数据库获取<code class="codeph">cust_year_of_birth</code>密钥低于<code class="codeph">1918</code>所有位图（步骤6），然后使用<code class="codeph">OR</code>逻辑合并这些位图以创建单个位图（步骤5）。数据库获取<code class="codeph">F</code>的<code class="codeph">cust_gender</code>密钥的单个位图（步骤4），然后对这两个位图执行<code class="codeph">AND</code>操作。结果是单个位图，其中包含所请求行的<code class="codeph">1</code>值（步骤3）。
                        </p><pre class="pre codeblock"><code>SQL_ID 1xf59h179zdg2，子编号0 -------------------------------------从客户处选择cust_last_name，cust_first_name cust_gender ='F'和cust_year_of_birth &lt;1918计划哈希值：49820847 ------------------------------------ -------------------------------------------------- ------- | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ------------------------------------------- | 0 |选择声明| | | | 288（100）| | | 1 |按行索引表的访问权限批量|客户| 1802 | 37842 | 288（1）| 00:00:01 | | 2 | BITMAP转换为ROWIDS | | | | | | | 3 | BITMAP和| | | | | | | * 4 | BITMAP INDEX单一值| CUSTOMERS_GENDER_BIX | | | | | | 5 | <span class="bold">BITMAP MERGE</span> | | | | | | | * 6 | BITMAP INDEX RANGE SCAN | CUSTOMERS_YOB_BIX | | | | | -------------------------------------------------- -------------------------------------------谓词信息（由操作ID标识）：------------------------------------------------ --- 4  - 访问（“CUST_GENDER”='F'）6  - 访问（“CUST_YEAR_OF_BIRTH”&lt;1918）过滤器（“CUST_YEAR_OF_BIRTH”&lt;1918）</code></pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-2FDE5904-B0BC-44DA-829B-94C89FA77D71" title="此访问路径合并多个位图，并返回单个位图作为结果。">位图合并</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="TGSQL241"></a><div class="props_rev_3"><a id="GUID-4D114CC6-15A8-4CE0-A826-4E53DFD184CA" name="GUID-4D114CC6-15A8-4CE0-A826-4E53DFD184CA"></a><h3 id="TGSQL-GUID-4D114CC6-15A8-4CE0-A826-4E53DFD184CA" class="sect3"><span class="enumeration_section">8.5</span>表群集访问路径</h3>
               <div>
                  <p><strong class="term">表簇</strong>是一组表，它们共享公共列并在相同的块中存储相关数据。当表被群集时，单个数据块可以包含来自多个表的行。
                  </p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-DB9438B3-6FA1-4EE9-A782-3DD271A59285">群集扫描</a><br><strong class="term">索引集群</strong>是一个表集群，它使用索引来定位数据。
                     </li>
                     <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-8CBC58C9-A82E-4A2A-B2C1-5A728C4F4726">哈希扫描</a><br><strong class="term">散列集群</strong>就像一个索引集群，除了索引键被散列函数替换。不存在单独的集群索引。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-4D114CC6-15A8-4CE0-A826-4E53DFD184CA__GUID-F322E91E-7FAB-4F14-BDAC-CC6DBFE3712D">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=CNCPT608" target="_blank"><span><cite>Oracle Database Concepts，</cite></span></a>用于表集群的概述</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-00711237-35D3-4CFC-A234-59B3EC53DCD1" title="访问路径是查询用于从行源检索行的技术。">优化程序访问路径</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL94952"></a><div class="props_rev_3"><a id="GUID-DB9438B3-6FA1-4EE9-A782-3DD271A59285" name="GUID-DB9438B3-6FA1-4EE9-A782-3DD271A59285"></a><h4 id="TGSQL-GUID-DB9438B3-6FA1-4EE9-A782-3DD271A59285" class="sect4"><span class="enumeration_section">8.5.1</span>集群扫描</h4>
                  <div>
                     <p><strong class="term">索引集群</strong>是一个表集群，它使用索引来定位数据。
                     </p>
                     <p>群集索引是群集密钥上的B树索引。<a href="glossary.html#GUID-301F9394-3C59-4DCB-94F2-3DC2B2E0508A"><span class="xrefglossterm">群集扫描</span></a>从存储在索引群集中的表中检索具有相同群集键值的所有行。
                     </p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-9B933E68-BBA0-49B7-9AC4-F58868E5180D">当优化程序考虑群集扫描时</a><br>当查询访问索引集群中的表时，数据库会考虑进行集群扫描。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-859E935C-C9B0-43C7-A955-6A943037D533">群集扫描的工作原理</a><br>在索引集群中，数据库在同一数据块中存储具有相同集群键值的所有行。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-332A32EF-65E6-4BB0-AB2D-4F0EEEE73C85">群集扫描：示例</a><br>此示例将<code class="codeph">department_id</code>列上的<code class="codeph">employees</code>和<code class="codeph">departments</code>表聚类，然后在集群中查询单个部门。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-4D114CC6-15A8-4CE0-A826-4E53DFD184CA" title="表簇是一组表，它们共享公共列并在相同的块中存储相关数据。当表被群集时，单个数据块可以包含来自多个表的行。">表群集访问路径</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL95218"></a><div class="props_rev_3"><a id="GUID-9B933E68-BBA0-49B7-9AC4-F58868E5180D" name="GUID-9B933E68-BBA0-49B7-9AC4-F58868E5180D"></a><h5 id="TGSQL-GUID-9B933E68-BBA0-49B7-9AC4-F58868E5180D" class="sect5"><span class="enumeration_section">8.5.1.1</span>优化<span class="enumeration_section">程序</span>何时考虑群集扫描</h5>
                     <div>
                        <p>当查询访问索引集群中的表时，数据库会考虑进行集群扫描。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-DB9438B3-6FA1-4EE9-A782-3DD271A59285" title="索引集群是一个表集群，它使用索引来定位数据。">群集扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95219"></a><div class="props_rev_3"><a id="GUID-859E935C-C9B0-43C7-A955-6A943037D533" name="GUID-859E935C-C9B0-43C7-A955-6A943037D533"></a><h5 id="TGSQL-GUID-859E935C-C9B0-43C7-A955-6A943037D533" class="sect5"><span class="enumeration_section">8.5.1.2</span>群集扫描的工作<span class="enumeration_section">原理</span></h5>
                     <div>
                        <p>在索引集群中，数据库在同一数据块中存储具有相同集群键值的所有行。</p>
                        <p>例如，如果<code class="codeph">hr.employees2</code>和<code class="codeph">hr.departments2</code>表聚集在<code class="codeph">emp_dept_cluster</code> ，并且群集密钥是<code class="codeph">department_id</code> ，则数据库将部门<code class="codeph">10</code>中的所有员工存储在同一个块中，部门<code class="codeph">20</code>中的所有员工都存储在同一个块中，等等。
                        </p>
                        <p>B树集群索引将集群密钥值与包含数据的块的数据库块地址（DBA）相关联。例如，键<code class="codeph">30</code>的索引条目显示包含部门<code class="codeph">30</code>员工的行的块的地址：</p><pre class="pre codeblock"><code>30，AADAAAA9d</code></pre><p>当用户请求群集中的行时，数据库会扫描索引以获取包含行的块的DBA。然后，Oracle数据库根据这些DBA定位行。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-DB9438B3-6FA1-4EE9-A782-3DD271A59285" title="索引集群是一个表集群，它使用索引来定位数据。">群集扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95220"></a><div class="props_rev_3"><a id="GUID-332A32EF-65E6-4BB0-AB2D-4F0EEEE73C85" name="GUID-332A32EF-65E6-4BB0-AB2D-4F0EEEE73C85"></a><h5 id="TGSQL-GUID-332A32EF-65E6-4BB0-AB2D-4F0EEEE73C85" class="sect5"><span class="enumeration_section">8.5.1.3</span>集群扫描：示例</h5>
                     <div>
                        <p>此示例将<code class="codeph">department_id</code>列上的<code class="codeph">employees</code>和<code class="codeph">departments</code>表聚类，然后在集群中查询单个部门。
                        </p>
                        <div class="example" id="GUID-332A32EF-65E6-4BB0-AB2D-4F0EEEE73C85__GUID-7E093173-F973-4E5F-8538-DDEA47F8673E">
                           <p>作为用户<code class="codeph">hr</code> ，您可以在群集中创建表群集，群集索引和表，如下所示：</p><pre class="pre codeblock"><code>CREATE CLUSTER employees_departments_cluster（department_id NUMBER（4））SIZE 512; CREATE INDEX idx_emp_dept_cluster ON CLUSTER employees_departments_cluster; CREATE TABLE employees2 CLUSTER employees_departments_cluster（department_id）AS SELECT * FROM employees; CREATE TABLE departments2 CLUSTER employees_departments_cluster（department_id）AS SELECT * FROM departments;</code></pre><p>您可以按如下方式查询部门<code class="codeph">30</code>的员工：</p><pre class="pre codeblock"><code>SELECT * FROM employees2 WHERE department_id = 30;</code></pre><p>要执行扫描，Oracle数据库首先通过扫描集群索引来获取描述部门30的行的rowid（步骤2）。然后，Oracle数据库使用此rowid定位<code class="codeph">employees2</code>的行（步骤1）。
                           </p><pre class="pre codeblock"><code>SQL_ID b7xk1jzuwdc6t，子编号0 ------------------------------------- SELECT * FROM employees2 WHERE department_id = 30计划哈希值：49826199 -------------------------------------------- ------------------------------------ | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ------------------------------ | 0 |选择声明| | | | 2（100）| | | 1 | <span class="bold">TABLE ACCESS CLUSTER</span> | EMPLOYEES2 | 6 | 798 | 2（0）| 00：00：01 | | * 2 | INDEX UNIQUE SCAN | IDX_EMP_DEPT_CLUSTER | 1 | | 1（0）| 00：00：01 | -------------------------------------------------- ------------------------------谓词信息（由操作ID标识）：----------- ---------------------------------------- 2  -  access（“DEPARTMENT_ID”= 30）</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-332A32EF-65E6-4BB0-AB2D-4F0EEEE73C85__GUID-89394692-C8BA-487E-82F9-601D0ACB0E2E">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=CNCPT-GUID-CC31365B-83B0-4E09-A047-BF1B79AC887A" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a> ，了解索引集群</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-DB9438B3-6FA1-4EE9-A782-3DD271A59285" title="索引集群是一个表集群，它使用索引来定位数据。">群集扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL94953"></a><div class="props_rev_3"><a id="GUID-8CBC58C9-A82E-4A2A-B2C1-5A728C4F4726" name="GUID-8CBC58C9-A82E-4A2A-B2C1-5A728C4F4726"></a><h4 id="TGSQL-GUID-8CBC58C9-A82E-4A2A-B2C1-5A728C4F4726" class="sect4"><span class="enumeration_section">8.5.2</span>哈希扫描</h4>
                  <div>
                     <p><strong class="term">散列集群</strong>就像一个索引集群，除了索引键被散列函数替换。不存在单独的集群索引。
                     </p>
                     <p>在散列簇中，数据<span class="italic">是</span>索引。数据库使用<a href="glossary.html#GUID-E5F097BA-06BA-403C-B2AE-34523D906F54"><span class="xrefglossterm">哈希扫描</span></a>根据哈希值查找哈希群集中的行。
                     </p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-FC77D13B-2B4B-49E3-9410-663E74CE447E">优化程序考虑哈希扫描时</a><br>当查询访问散列集群中的表时，数据库会考虑散列扫描。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-02CB3D17-75A4-4371-BB1D-C9921C185365">哈希扫描的工作原理</a><br>在散列簇中，具有相同散列值的所有行都存储在同一数据块中。
                        </li>
                        <li class="ulchildlink"><a href="optimizer-access-paths.html#GUID-55B33C65-DE90-4943-9F17-5CC372FF6387">哈希扫描：示例</a><br>此示例对<code class="codeph">department_id</code>列上的<code class="codeph">employees</code>和<code class="codeph">departments</code>表进行哈希处理，然后在群集中查询单个部门。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-4D114CC6-15A8-4CE0-A826-4E53DFD184CA" title="表簇是一组表，它们共享公共列并在相同的块中存储相关数据。当表被群集时，单个数据块可以包含来自多个表的行。">表群集访问路径</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL95221"></a><div class="props_rev_3"><a id="GUID-FC77D13B-2B4B-49E3-9410-663E74CE447E" name="GUID-FC77D13B-2B4B-49E3-9410-663E74CE447E"></a><h5 id="TGSQL-GUID-FC77D13B-2B4B-49E3-9410-663E74CE447E" class="sect5"><span class="enumeration_section">8.5.2.1</span>优化程序考虑哈希扫描时</h5>
                     <div>
                        <p>当查询访问散列集群中的表时，数据库会考虑散列扫描。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-8CBC58C9-A82E-4A2A-B2C1-5A728C4F4726" title="散列集群就像一个索引集群，除了索引键被散列函数替换。不存在单独的集群索引。">哈希扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95222"></a><div class="props_rev_3"><a id="GUID-02CB3D17-75A4-4371-BB1D-C9921C185365" name="GUID-02CB3D17-75A4-4371-BB1D-C9921C185365"></a><h5 id="TGSQL-GUID-02CB3D17-75A4-4371-BB1D-C9921C185365" class="sect5"><span class="enumeration_section">8.5.2.2</span>哈希扫描的工作<span class="enumeration_section">原理</span></h5>
                     <div>
                        <p>在散列簇中，具有相同散列值的所有行都存储在同一数据块中。</p>
                        <p>要对群集执行哈希扫描，Oracle数据库首先通过将哈希函数应用于语句指定的群集键值来获取哈希值。然后，Oracle数据库扫描包含具有此哈希值的行的数据块。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-8CBC58C9-A82E-4A2A-B2C1-5A728C4F4726" title="散列集群就像一个索引集群，除了索引键被散列函数替换。不存在单独的集群索引。">哈希扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL95223"></a><div class="props_rev_3"><a id="GUID-55B33C65-DE90-4943-9F17-5CC372FF6387" name="GUID-55B33C65-DE90-4943-9F17-5CC372FF6387"></a><h5 id="TGSQL-GUID-55B33C65-DE90-4943-9F17-5CC372FF6387" class="sect5"><span class="enumeration_section">8.5.2.3</span>哈希扫描：示例</h5>
                     <div>
                        <p>此示例对<code class="codeph">department_id</code>列上的<code class="codeph">employees</code>和<code class="codeph">departments</code>表进行哈希处理，然后在群集中查询单个部门。
                        </p>
                        <div class="example" id="GUID-55B33C65-DE90-4943-9F17-5CC372FF6387__GUID-9B480918-3DC5-40DD-88AF-88AEC39C554A">
                           <p>您可以在群集中创建哈希群集和表，如下所示：</p><pre class="pre codeblock"><code>CREATE CLUSTER employees_departments_cluster（department_id NUMBER（4））SIZE 8192 HASHKEYS 100; CREATE TABLE employees2 CLUSTER employees_departments_cluster（department_id）AS SELECT * FROM employees; CREATE TABLE departments2 CLUSTER employees_departments_cluster（department_id）AS SELECT * FROM departments;</code></pre><p>您可以按如下方式查询部门<code class="codeph">30</code>的员工：</p><pre class="pre codeblock"><code>SELECT * FROM employees2 WHERE department_id = 30</code></pre><p>为了执行散列扫描，Oracle数据库首先通过将散列函数应用于键值<code class="codeph">30</code>来获得散列值，然后使用该散列值来扫描数据块并检索行（步骤1）。
                           </p><pre class="pre codeblock"><code>SQL_ID 919x7hyyxr6p4，子编号0 ------------------------------------- SELECT * FROM employees2 WHERE department_id = 30计划哈希值：2399378016 -------------------------------------------- -------------------- | Id |操作|名称|行|字节|成本| -------------------------------------------------- -------------- | 0 |选择声明| | | | 1 | | * 1 | <span class="bold">TABLE ACCESS HASH</span> | EMPLOYEES2 | 10 | 1330 | | -------------------------------------------------- --------------谓词信息（由操作ID标识）：--------------------------- ------------------------ 1  - 访问（“DEPARTMENT_ID”= 30）</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-55B33C65-DE90-4943-9F17-5CC372FF6387__GUID-65718A84-FFAE-4F21-904A-296D78454964">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=CNCPT609" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a>了解哈希集群</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizer-access-paths.html#GUID-8CBC58C9-A82E-4A2A-B2C1-5A728C4F4726" title="散列集群就像一个索引集群，除了索引键被散列函数替换。不存在单独的集群索引。">哈希扫描</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
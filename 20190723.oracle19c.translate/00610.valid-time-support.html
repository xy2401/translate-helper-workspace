<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter describes the support for valid time, also known as effective dating, with version-enabled tables."></meta>
      <meta name="description" content="This chapter describes the support for valid time, also known as effective dating, with version-enabled tables."></meta>
      <title>工作区管理器有效时间支持</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Workspace Manager Developer&#39;s Guide"></meta>
      <meta property="og:description" content="This chapter describes the support for valid time, also known as effective dating, with version-enabled tables."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Workspace Manager Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="workspace-manager-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T16:49:08-08:00"></meta>
      <meta name="dcterms.title" content="Workspace Manager Developer&#39;s Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2000, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E94792-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="workspace-manager-events.html" title="Previous" type="text/html"></link>
      <link rel="next" href="workspace-manager-reference.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADWSM"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="workspace-manager-events.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="workspace-manager-reference.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Workspace Manager开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="workspace-manager-concepts-usage.html" property="item" typeof="WebPage"><span property="name">概念和使用信息</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">工作区管理器有效时间支持</li>
            </ol>
            <a id="GUID-967E7CE5-A328-4BA7-AA7B-7899B6C99C01" name="GUID-967E7CE5-A328-4BA7-AA7B-7899B6C99C01"></a><a id="ADWSM035"></a>
            
            <h2 id="ADWSM-GUID-967E7CE5-A328-4BA7-AA7B-7899B6C99C01" class="sect2"><span class="enumeration_chapter">3</span>工作区管理器有效时间支持</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍了对启用版本的表的有效时间支持，也称为有效约会。</p>
               <p>它包含以下主要部分：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="valid-time-support.html#GUID-08EB30A1-F164-400E-AAF4-024768048E90">有效时间支持：简介和示例</a><br>某些应用程序需要存储具有指示数据有效性的相关时间范围的数据。也就是说，每条记录仅在与记录相关的时间范围内有效。
                  </li>
                  <li class="ulchildlink"><a href="valid-time-support.html#GUID-4D80E810-2C1C-434F-994A-6AC6B2895825">WM_PERIOD数据类型</a><br><code class="codeph">WM_PERIOD</code>数据类型用于指定会话或工作空间的有效时间范围，以及启用版本的表中的行的有效时间范围。
                  </li>
                  <li class="ulchildlink"><a href="valid-time-support.html#GUID-1866ED4D-E080-4575-9B34-4A4B60FBF37B">有效时间常数</a><br>下表列出了可以在<code class="codeph">WM_PERIOD</code>规范的<code class="codeph">validFrom</code>和<code class="codeph">validTill</code>时间戳中使用的<code class="codeph">WM_PERIOD</code> 。
                  </li>
                  <li class="ulchildlink"><a href="valid-time-support.html#GUID-04312857-D935-48AB-B91B-95FCAA07814E">有效时间支持的API功能</a><br>下表列出了专用于有效时间支持的DBMS_WM子程序，或者具有与有效时间支持相关的参数的DBMS_WM子程序。
                  </li>
                  <li class="ulchildlink"><a href="valid-time-support.html#GUID-8FDD27F9-D900-443A-8E69-FB0BE141FFE1">有效时间支持的运算符</a><br>Workspace Manager提供关系检查运算符和设置运算符，这些运算符接受两个时间段参数，可用于在查询中应用有效时间过滤器。
                  </li>
                  <li class="ulchildlink"><a href="valid-time-support.html#GUID-2778AB34-FDCD-44CC-9B6A-75D53EC81A7B">具有有效时间支持的查询和DML操作</a><br>本节介绍与有效时间支持相关的查询和数据操作语言（插入，更新和删除）操作的一些行为和注意事项。
                  </li>
                  <li class="ulchildlink"><a href="valid-time-support.html#GUID-F4650E9B-AEB4-4F39-969F-3EC372683FFD">有效时间支持的约束管理</a><br>本节介绍与影响参照完整性约束和唯一约束的有效时间支持相关的注意事项。
                  </li>
                  <li class="ulchildlink"><a href="valid-time-support.html#GUID-DC322D50-5D89-4048-87E7-EE731E8701EC">锁定有效时间支持</a><br>如果锁定了具有有效时间支持的启用版本的表中的行，则会在其整个有效时间段内自动锁定该行。在指定的时间段内无法锁定行。
                  </li>
                  <li class="ulchildlink"><a href="valid-time-support.html#GUID-3D781FD0-B8CF-49C9-8FE8-AE433289968D">受有效时间支持影响的静态数据字典视图</a><br>本节介绍对Workspace Manager静态数据字典视图的有效时间支持的影响。
                  </li>
                  <li class="ulchildlink"><a href="valid-time-support.html#GUID-D7914BBC-70C9-4929-830B-52E09A2319FA">为现有表添加有效时间支持</a><br>您可以向现有的启用版本的表添加有效时间支持。
                  </li>
                  <li class="ulchildlink"><a href="valid-time-support.html#GUID-65BA356D-F80E-4BF8-8F8E-CC9DD7128C19">合并和刷新具有有效时间支持的表的工作空间</a><br>合并或刷新具有有效时间支持的表时，可以通过考虑相同主键值的行之间存在交集时的不同情况来确定结果行。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="workspace-manager-concepts-usage.html#GUID-4364945A-B6E1-47FF-9360-273FF92D7F76">概念和使用信息</a></p>
                  </div>
               </div>
            </div>
            <a id="ADWSM99199"></a><a id="ADWSM99198"></a><div class="props_rev_3"><a id="GUID-08EB30A1-F164-400E-AAF4-024768048E90" name="GUID-08EB30A1-F164-400E-AAF4-024768048E90"></a><h3 id="ADWSM-GUID-08EB30A1-F164-400E-AAF4-024768048E90" class="sect3"><span class="enumeration_section">3.1</span>有效时间支持：简介和示例</h3>
               <div>
                  <p>某些应用程序需要存储具有指示数据有效性的相关时间范围的数据。也就是说，每条记录仅在与记录相关的时间范围内有效。</p>
                  <p>在启用表的版本启用时，可以启用有效的时间支持。（您还可以向现有的启用版本的表<a href="valid-time-support.html#GUID-D7914BBC-70C9-4929-830B-52E09A2319FA" title="You can add valid time support to an existing version-enabled table.">添加有效时间支持</a> ，如<a href="valid-time-support.html#GUID-D7914BBC-70C9-4929-830B-52E09A2319FA" title="您可以向现有的启用版本的表添加有效时间支持。">向现有表添加有效时间支持中所述</a> 。）如果启用有效时间支持，则每行都包含一个添加的列，用于保存与该行关联的有效时间段。您可以为会话指定有效的时间范围，Workspace Manager将确保查询以及插入，更新和删除操作正确反映并适应有效的时间范围。指定的有效时间范围可以是过去或将来，也可以包括过去，现在和将来。
                  </p>
                  <p><a href="valid-time-support.html#GUID-08EB30A1-F164-400E-AAF4-024768048E90__I1008793">例3-1</a>给出了一个有效时间支持的简单示例。该示例执行以下操作：</p>
                  <ol>
                     <li>
                        <p>创建员工及其工资表。</p>
                     </li>
                     <li>
                        <p><code class="codeph">WM_VALID</code>启用表，指定有效的时间支持，这会导致名为<code class="codeph">WM_VALID</code>的列自动添加到表中。
                        </p>
                     </li>
                     <li>
                        <p>将行插入表中。对于每一行，它指定员工姓名，薪水和有效时间段。</p>
                     </li>
                     <li>
                        <p>设置会话的有效时间范围。</p>
                     </li>
                     <li>
                        <p>更新一行，指定员工的新薪水和有效时间段。</p>
                     </li>
                     <li>
                        <p>禁用表格上的版本控制。</p>
                     </li>
                  </ol>
                  <p><a href="valid-time-support.html#GUID-08EB30A1-F164-400E-AAF4-024768048E90__I1008793">例3-1</a> ：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>指有效的时间支持概念和技术，将在本章的其他章节中介绍。</p>
                     </li>
                     <li>
                        <p>假设您熟悉Workspace Manager <a href="introduction-to-workspace-manager.html#GUID-CF637BD7-E00C-4495-8D83-B9C805E3BBE1" title="Oracle Workspace Manager, often referred to as Workspace Manager, provides an infrastructure that enables applications to create workspaces and group different versions of table row values in different workspaces.">简介</a>中<a href="introduction-to-workspace-manager.html#GUID-CF637BD7-E00C-4495-8D83-B9C805E3BBE1" title="Oracle Workspace Manager（通常称为工作区管理器）提供了一种基础结构，使应用程序能够创建工作空间并将不同版本的表行值分组到不同的工作空间中。">介绍</a>的Workspace Manager概念和技术。
                        </p>
                     </li>
                     <li>
                        <p>不创建工作空间或保存点。（这些在<a href="introduction-to-workspace-manager.html#GUID-92E467A9-BFE9-48AD-AC83-9AD8B2A59AC1">示例</a>中显示<a href="introduction-to-workspace-manager.html#GUID-92E467A9-BFE9-48AD-AC83-9AD8B2A59AC1">：市场预算选项</a>和<a href="introduction-to-workspace-manager.html#GUID-5B98545B-666D-4371-834A-87D683D2FFAB">示例：</a> <a href="introduction-to-workspace-manager.html#GUID-2EC7898E-0B22-402D-9865-3B21104F7B8A" title="本主题提供了两个使用Workspace Manager尝试某些方案并选择其中一个方案的简化示例。">使用Workspace Manager的简化示例中的</a> <a href="introduction-to-workspace-manager.html#GUID-5B98545B-666D-4371-834A-87D683D2FFAB">仓库扩展选项</a> 。）
                        </p>
                     </li>
                  </ul>
                  <div class="example" id="GUID-08EB30A1-F164-400E-AAF4-024768048E90__I1008793">
                     <p class="titleinexample">示例3-1有效时间支持</p><pre class="oac_no_warn" dir="ltr">- 创建一个非常简单的员工表（故意过度简化 - 用于说明目的）。CREATE TABLE employees（名称VARCHAR2（16）PRIMARY KEY，薪水NUMBER）; - 版本 - 启用表格。为有效时间支持指定TRUE。EXECUTE DBMS_WM.EnableVersioning（'employees'，'VIEW_WO_OVERWRITE'，FALSE，TRUE）; INSERT INTO员工价值观（'Adams'，30000，WMSYS.WM_PERIOD（TO_DATE（'01 -01-1990'，'MM-DD-YYYY'），TO_DATE（'01 -01-2005'，'MM-DD-YYYY） '）））; INSERT INTO员工VALUES（'Baxter'，40000，WMSYS.WM_PERIOD（TO_DATE（'01 -01-2000'，'MM-DD-YYYY'），DBMS_WM.UNTIL_CHANGED））; INSERT INTO员工VALUES（'Coleman'，50000，WMSYS.WM_PERIOD（TO_DATE（'01 -01-2003'，'MM-DD-YYYY'），TO_DATE（'12 -31-9999'，'MM-DD-YYYY '）））;承诺; - 几乎所有时间都设置有效时间段。EXECUTE DBMS_WM.SetValidTime（TO_DATE（'01 -01-1900'，'MM-DD-YYYY'），TO_DATE（'01 -01-9999'，'MM-DD-YYYY'））; - 更新现有员工的薪水。执行“有序”更新，以便 - 保留现有的与时间相关的信息。这导致两行 - 对于Baxter。- 首先，将有效时间设置为Baxter加注的预期范围。EXECUTE DBMS_WM.SetValidTime（TO_DATE（'01 -01-2003'，'MM-DD-YYYY'），DBMS_WM.UNTIL_CHANGED）; - 给Baxter加薪，自2003年1月1日起生效，直到更改为止。UPDATE员工SET薪水= 45000 WHERE name ='Baxter'; - 禁用版本控制。默认情况下（keepWMValid参数值为TRUE）， - 保留WM_VALID列及其所有数据。承诺; EXECUTE DBMS_WM.DisableVersioning（'employees'）;</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-967E7CE5-A328-4BA7-AA7B-7899B6C99C01" title="本章介绍了对启用版本的表的有效时间支持，也称为有效约会。">工作区管理器有效时间支持</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADWSM99201"></a><a id="ADWSM99202"></a><a id="ADWSM99200"></a><div class="props_rev_3"><a id="GUID-4D80E810-2C1C-434F-994A-6AC6B2895825" name="GUID-4D80E810-2C1C-434F-994A-6AC6B2895825"></a><h3 id="ADWSM-GUID-4D80E810-2C1C-434F-994A-6AC6B2895825" class="sect3"><span class="enumeration_section">3.2</span> WM_PERIOD数据类型</h3>
               <div>
                  <p><code class="codeph">WM_PERIOD</code>数据类型用于指定会话或工作空间的有效时间范围，以及启用版本的表中的行的有效时间范围。
                  </p>
                  <p><code class="codeph">WM_PERIOD</code>类型定义如下：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE WM_PERIOD AS OBJECT（validFrom TIMESTAMP WITH TIME ZONE，validTill TIMESTAMP WITH TIME ZONE，MAP成员函数wm_period_map返回varchar2）;</pre><p><code class="codeph">validFrom</code>日期包含在内， <code class="codeph">validTill</code>期间是独占的;也就是说，有效日期范围从<code class="codeph">validFrom</code>日期开始，并延伸到但不包括<code class="codeph">validTill</code>日期。
                  </p>
                  <p><code class="codeph">wm_period_map</code>成员函数支持对<code class="codeph">WM_PERIOD</code>类型的列进行排序（排序）和使用<code class="codeph">DISTINCT</code> 。</p>
                  <div class="example" id="GUID-4D80E810-2C1C-434F-994A-6AC6B2895825__I1008819">
                     <p class="titleinexample">示例3-2将会话有效时间设置为特定日期</p>
                     <p><a href="valid-time-support.html#GUID-4D80E810-2C1C-434F-994A-6AC6B2895825__I1008819">例3-2</a>将会话有效时间范围设置为2003年1月1日。
                     </p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_WM.SetValidTime（TO_DATE（'01 -01-2003'，'MM-DD-YYYY'），TO_DATE（'01 -02-2003'，'MM-DD-YYYY'））;</pre><p><a href="valid-time-support.html#GUID-4D80E810-2C1C-434F-994A-6AC6B2895825__I1008827">例3-3</a>插入一行从2003年1月1日起有效，直到更改为止。
                     </p>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-4D80E810-2C1C-434F-994A-6AC6B2895825__I1008827">
                     <p class="titleinexample">示例3-3插入行对时间范围有效</p><pre class="oac_no_warn" dir="ltr">INSERT INTO员工VALUES（'Baxter'，40000，WMSYS.WM_PERIOD（TO_DATE（'01 -01-2003'，'MM-DD-YYYY'），DBMS_WM.UNTIL_CHANGED））;</pre><p>如果希望将有效时间范围存储在具有有效时间支持的表上创建的视图中，则使用两列<code class="codeph">TIMEZONE WITH TIMESTAMP</code>类型<code class="codeph">TIMEZONE WITH TIMESTAMP</code>而不是<code class="codeph">WM_VALID</code>类型的<code class="codeph">WM_VALID</code> ，可以将Workspace Manager系统参数<code class="codeph">USE_SCALAR_TYPES_FOR_VALIDTIME</code>为<code class="codeph">ON</code> ，如在<a href="introduction-to-workspace-manager.html#GUID-0163BDA5-44CE-4590-9D37-E55CA6770E64" title="Workspace Manager提供了一组系统参数，允许具有WM_ADMIN系统特权的用户为数据库强制执行特定于Workspace Manager的全局设置。">Workspace Manager的系统参数中进行了</a>解释。
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-967E7CE5-A328-4BA7-AA7B-7899B6C99C01" title="本章介绍了对启用版本的表的有效时间支持，也称为有效约会。">工作区管理器有效时间支持</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADWSM99204"></a><a id="ADWSM99203"></a><div class="props_rev_3"><a id="GUID-1866ED4D-E080-4575-9B34-4A4B60FBF37B" name="GUID-1866ED4D-E080-4575-9B34-4A4B60FBF37B"></a><h3 id="ADWSM-GUID-1866ED4D-E080-4575-9B34-4A4B60FBF37B" class="sect3"><span class="enumeration_section">3.3</span>有效时间常数</h3>
               <div>
                  <p>下表列出了可以在<code class="codeph">WM_PERIOD</code>规范的<code class="codeph">validFrom</code>和<code class="codeph">validTill</code>时间戳中使用的<code class="codeph">WM_PERIOD</code> 。
                  </p>
                  <p>（Workspace Manager将它们用作常量，但它们是作为函数实现的。）</p>
                  <div class="tblformal" id="GUID-1866ED4D-E080-4575-9B34-4A4B60FBF37B__CHDHJDHI">
                     <p class="titleintable">表3-1有效时间支持的常量</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="有效时间支持的常量" width="100%" border="1" summary="Constants for Valid Time Support. Column 1 is Constant, and column 2 is Explanation." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d26526e406">不变</th>
                              <th align="left" valign="bottom" width="69%" id="d26526e409">说明</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d26526e414" headers="d26526e406 ">
                                 <p>DBMS_WM.MIN_TIME</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d26526e414 d26526e409 ">
                                 <p>Workspace Manager支持的最小（最早）时间戳值。目前在-4712年（公元前4712年）的1月1日开始。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d26526e421" headers="d26526e406 ">
                                 <p>DBMS_WM.MAX_TIME</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d26526e421 d26526e409 ">
                                 <p>Workspace Manager支持的最大（最新）时间戳值。目前在一天结束时（11：59.999999000 pm）于1999年12月31日至9999。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d26526e428" headers="d26526e406 ">
                                 <p>DBMS_WM.UNTIL_CHANGED</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d26526e428 d26526e409 ">
                                 <p>被视为DBMS_WM.MAX_TIME的时间戳，直到后续修改覆盖该值。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-967E7CE5-A328-4BA7-AA7B-7899B6C99C01" title="本章介绍了对启用版本的表的有效时间支持，也称为有效约会。">工作区管理器有效时间支持</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADWSM99206"></a><a id="ADWSM99205"></a><div class="props_rev_3"><a id="GUID-04312857-D935-48AB-B91B-95FCAA07814E" name="GUID-04312857-D935-48AB-B91B-95FCAA07814E"></a><h3 id="ADWSM-GUID-04312857-D935-48AB-B91B-95FCAA07814E" class="sect3"><span class="enumeration_section">3.4</span>有效时间支持的API功能</h3>
               <div>
                  <p>下表列出了专用于有效时间支持的DBMS_WM子程序，或者具有与有效时间支持相关的参数的DBMS_WM子程序。</p>
                  <div class="tblformal" id="GUID-04312857-D935-48AB-B91B-95FCAA07814E__G1010564">
                     <p class="titleintable">表3-2有效时间支持的API功能</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="有效时间支持的API功能" width="100%" border="1" summary="API Features for Valid Time Support. Column 1 is Subprogram, and column 2 is Valid Time Support." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="33%" id="d26526e480">子程序</th>
                              <th align="left" valign="bottom" width="67%" id="d26526e483">有效时间支持</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d26526e488" headers="d26526e480 ">
                                 <p><a href="DBMS_WM-reference.html#GUID-41A06CC9-F3F5-40E8-9BDB-29B600DEA7F0">EnableVersioning</a></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d26526e488 d26526e483 ">
                                 <p>如果<code class="codeph">validTime</code>参数值为TRUE，则表是启用版本并<code class="codeph">with</code>有效时间支持。将<code class="codeph">WM_VALID</code>类型的名为<code class="codeph">WM_VALID</code>的列添加到表中。对于任何现有行中， <code class="codeph">WM_VALID</code>列设置有<code class="codeph">validFrom</code> SYSTIMESTAMP的时间戳和<code class="codeph">validTill</code> DBMS_WM.UNTIL_CHANGED的时间戳。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d26526e516" headers="d26526e480 ">
                                 <p><a href="DBMS_WM-reference.html#GUID-A7BBE855-07E0-46A5-AB34-22BEFE9049C7">DisableVersioning</a></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d26526e516 d26526e483 ">
                                 <p><code class="codeph">keepWMValid</code>参数确定在禁用版本时是保留（默认值）还是删除<code class="codeph">WM_VALID</code>列及其数据。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d26526e531" headers="d26526e480 ">
                                 <p><a href="DBMS_WM-reference.html#GUID-BD736B55-5845-4A58-94E1-758385BB15DE">GetValidFrom</a></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d26526e531 d26526e483 ">
                                 <p>返回会话有效时间段内的<code class="codeph">validFrom</code>时间戳。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d26526e543" headers="d26526e480 ">
                                 <p><a href="DBMS_WM-reference.html#GUID-5DB9C2F6-E3CF-4C64-B838-4FED56363244">GetValidTill</a></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d26526e543 d26526e483 ">
                                 <p>从会话有效时间段返回<code class="codeph">validTill</code>时间戳。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d26526e555" headers="d26526e480 ">
                                 <p><a href="DBMS_WM-reference.html#GUID-A42995A7-4941-42E7-B3FC-A812B16FF0AB">SetValidTime</a></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d26526e555 d26526e483 ">
                                 <p>将会话有效时间段设置为指定范围。您可以执行没有参数的过程（将有效时间范围设置为从当前时间开始直到更改），仅使用<code class="codeph">validFrom</code>参数，或同时使用<code class="codeph">validFrom</code>和<code class="codeph">validTill</code>参数。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d26526e573" headers="d26526e480 ">
                                 <p><a href="DBMS_WM-reference.html#GUID-65DC79C5-03C9-4B5E-9599-27CFAEFB4E96">SetValidTimeFilterOFF</a></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d26526e573 d26526e483 ">
                                 <p>删除当前会话的有效时间过滤器。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d26526e582" headers="d26526e480 ">
                                 <p><a href="DBMS_WM-reference.html#GUID-956A01D4-C967-4720-B8B6-3EEBBE4C1AC6">SetValidTimeFilterON</a></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d26526e582 d26526e483 ">
                                 <p>为当前会话设置有效时间过滤器（即，应用于启用版本的表的时间。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d26526e591" headers="d26526e480 ">
                                 <p><a href="DBMS_WM-reference.html#GUID-4A3C4F86-2068-4F09-91AC-3D029A970470">SetWMValidUpdateModeOFF</a></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d26526e591 d26526e483 ">
                                 <p>禁用对具有有效时间支持的表执行排序和非序列更新操作以及排序删除操作。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d26526e600" headers="d26526e480 ">
                                 <p><a href="DBMS_WM-reference.html#GUID-3E1E6BCC-110A-4DE7-9DB2-C10C5E2362D2">SetWMValidUpdateModeON</a></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d26526e600 d26526e483 ">
                                 <p>在具有有效时间支持的表上启用已排序和未排序的更新操作以及排序删除操作。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-967E7CE5-A328-4BA7-AA7B-7899B6C99C01" title="本章介绍了对启用版本的表的有效时间支持，也称为有效约会。">工作区管理器有效时间支持</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADWSM99207"></a><div class="props_rev_3"><a id="GUID-8FDD27F9-D900-443A-8E69-FB0BE141FFE1" name="GUID-8FDD27F9-D900-443A-8E69-FB0BE141FFE1"></a><h3 id="ADWSM-GUID-8FDD27F9-D900-443A-8E69-FB0BE141FFE1" class="sect3"><span class="enumeration_section">3.5</span>有效时间支持的运算符</h3>
               <div>
                  <p>Workspace Manager提供关系检查运算符和设置运算符，这些运算符接受两个时间段参数，可用于在查询中应用有效时间过滤器。</p>
                  <p>如果两个句点之间的关系存在，则关系检查运算符返回整数值1，如果关系不存在，则返回0。提供以下关系检查操作符以获得有效时间支持：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="valid-time-support.html#GUID-ADFA6724-E29F-4F79-8C19-0DC8D357EEA1">WM_OVERLAPS</a>检查两个周期是否重叠。
                        </p>
                     </li>
                     <li>
                        <p><a href="valid-time-support.html#GUID-FC68F0CA-2FE4-4053-9E0D-7B6C76A4E8E3">WM_CONTAINS</a>检查第一个句点是否包含第二个句点。
                        </p>
                     </li>
                     <li>
                        <p><a href="valid-time-support.html#GUID-A0289649-B322-4B79-BEB3-3B51DB40B6EB">WM_MEETS</a>检查第一个周期的结束是否是第二个周期的开始。
                        </p>
                     </li>
                     <li>
                        <p><a href="valid-time-support.html#GUID-B02289A5-5BF5-4B40-AEC4-69EBB1948B22">WM_EQUALS</a>检查两个句点是否相等（即它们的开始和结束时间是否相同）。
                        </p>
                     </li>
                     <li>
                        <p><a href="valid-time-support.html#GUID-F6FAA51B-2963-4BD7-8094-0223F23D8B58">WM_LESSTHAN</a>检查第一个周期的结束是否小于（ <a href="valid-time-support.html#GUID-F6FAA51B-2963-4BD7-8094-0223F23D8B58">即早</a>于）第二个周期的开始。
                        </p>
                     </li>
                     <li>
                        <p><a href="valid-time-support.html#GUID-F7E24EEE-4EE2-411A-9EDB-0EB8846350C2">WM_GREATERTHAN</a>检查第一个句点的开头是否大于（即晚于）第二个句点的结尾。
                        </p>
                     </li>
                  </ul>
                  <p>集合运算符返回反映两个周期之间关系的周期，如果两个周期没有指定的关系，则返回空值。为有效时间支持提供以下集合运算符：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="valid-time-support.html#GUID-96142D0E-7884-49A3-9E7A-3C7678B15CE9">WM_INTERSECTION</a>返回两个句点的交集，即两个句点共有的时间范围。
                        </p>
                     </li>
                     <li>
                        <p><a href="valid-time-support.html#GUID-A1C7622F-76BC-44EC-94C8-DC4EE2A096EF">WM_LDIFF</a>返回左侧两个句点之间的差异（即，更早的时间）。
                        </p>
                     </li>
                     <li>
                        <p><a href="valid-time-support.html#GUID-4F591088-5343-471C-9670-A7EDDFBC02CF">WM_RDIFF</a>返回右侧两个句点之间的差异（即稍后的时间）。
                        </p>
                     </li>
                  </ul>
                  <p>您可以使用关系检查运算符作为使用行的wm_valid.validFrom和wm_valid.validTill属性的替代方法。例如，以下两个查询选择有效的数据，这些查询在1991年1月1日有效：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM employees e WHERE WM_CONTAINS（e.wm_valid，WMSYS.WM_PERIOD（TO_DATE（'01 -01-1991'，'MM-DD-YYYY'），TO_DATE（'01 -02-1991'，'MM-DD- YYYY'））= 1; SELECT *来自员工e WHERE e.wm_valid.validFrom &lt;= TO_DATE（'01 -01-1991'，'MM-DD-YYYY'）和e.wm_valid.validTill&gt; TO_DATE（'01  - 03-1991'，'MM-DD-YYYY'）;</pre><p>本节的其余部分包含有关每个运算符的其他信息。运算符按字母顺序列出。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="valid-time-support.html#GUID-FC68F0CA-2FE4-4053-9E0D-7B6C76A4E8E3">WM_CONTAINS</a><br></li>
                     <li class="ulchildlink"><a href="valid-time-support.html#GUID-B02289A5-5BF5-4B40-AEC4-69EBB1948B22">WM_EQUALS</a><br></li>
                     <li class="ulchildlink"><a href="valid-time-support.html#GUID-F7E24EEE-4EE2-411A-9EDB-0EB8846350C2">WM_GREATERTHAN</a><br></li>
                     <li class="ulchildlink"><a href="valid-time-support.html#GUID-96142D0E-7884-49A3-9E7A-3C7678B15CE9">WM_INTERSECTION</a><br></li>
                     <li class="ulchildlink"><a href="valid-time-support.html#GUID-A1C7622F-76BC-44EC-94C8-DC4EE2A096EF">WM_LDIFF</a><br></li>
                     <li class="ulchildlink"><a href="valid-time-support.html#GUID-F6FAA51B-2963-4BD7-8094-0223F23D8B58">WM_LESSTHAN</a><br></li>
                     <li class="ulchildlink"><a href="valid-time-support.html#GUID-A0289649-B322-4B79-BEB3-3B51DB40B6EB">WM_MEETS</a><br></li>
                     <li class="ulchildlink"><a href="valid-time-support.html#GUID-ADFA6724-E29F-4F79-8C19-0DC8D357EEA1">WM_OVERLAPS</a><br></li>
                     <li class="ulchildlink"><a href="valid-time-support.html#GUID-4F591088-5343-471C-9670-A7EDDFBC02CF">WM_RDIFF</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-967E7CE5-A328-4BA7-AA7B-7899B6C99C01" title="本章介绍了对启用版本的表的有效时间支持，也称为有效约会。">工作区管理器有效时间支持</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADWSM99209"></a><a id="ADWSM99208"></a><div class="props_rev_3"><a id="GUID-FC68F0CA-2FE4-4053-9E0D-7B6C76A4E8E3" name="GUID-FC68F0CA-2FE4-4053-9E0D-7B6C76A4E8E3"></a><h4 id="ADWSM-GUID-FC68F0CA-2FE4-4053-9E0D-7B6C76A4E8E3" class="sect4"><span class="enumeration_section">3.5.1</span> WM_CONTAINS</h4>
                  <div>
                     <p>WM_CONTAINS运算符检查第一个句点是否包含第二个句点。仅当周期<code class="codeph">p1</code>包含周期<code class="codeph">p2</code> ， <code class="codeph">WM_CONTAINS(p1, p2)</code>返回<code class="codeph">1</code> ;否则，它返回<code class="codeph">0</code> 。
                     </p>
                     <p>例如：</p><pre class="oac_no_warn" dir="ltr">WM_CONTAINS（WM_PERIOD（TO_DATE（'01 -01-1980'，'MM-DD-YYYY'），TO_DATE（'01 -01-1990'，'MM-DD-YYYY'）），WM_PERIOD（TO_DATE（'01  - 01-1985'，'MM-DD-YYYY'），TO_DATE（'01 -01-1988'，'MM-DD-YYYY'）））= 1 WM_CONTAINS（WM_PERIOD（TO_DATE（'01 -01-1980'， 'MM-DD-YYYY'），TO_DATE（'01 -01-1990'，'MM-DD-YYYY'）），WM_PERIOD（TO_DATE（'01 -01-1985'，'MM-DD-YYYY'）， TO_DATE（'01 -01-1995'，'MM-DD-YYYY'）））= 0</pre><p><a href="valid-time-support.html#GUID-FC68F0CA-2FE4-4053-9E0D-7B6C76A4E8E3__i1008299">例3-4</a>返回<code class="codeph">EMPLOYEES</code>表中1995年1月1日有效的所有行（即， <code class="codeph">WM_VALID</code>列值包含1995年1月1日的周期）。
                     </p>
                     <div class="example" id="GUID-FC68F0CA-2FE4-4053-9E0D-7B6C76A4E8E3__i1008299">
                        <p class="titleinexample">例3-4 WM_CONTAINS运算符</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM employees e WHERE WM_CONTAINS（e.wm_valid，wm_period（TO_DATE（'01 -01-1995'，'MM-DD-YYYY'），TO_DATE（'01 -02-1995'，'MM-DD-YYYY' ）））= 1; NAME SALARY ---------------- ---------- WM_VALID（VALIDFROM，VALIDTILL）---------------- -------------------------------------------------- -------------- Adams 30000 WM_PERIOD（'01 -JAN-1990 12:00:00 -04：00'，'01 -JAN-2005 12:00:00 -04：00 “）</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-8FDD27F9-D900-443A-8E69-FB0BE141FFE1" title="Workspace Manager提供关系检查运算符和设置运算符，这些运算符接受两个时间段参数，可用于在查询中应用有效时间过滤器。">有效时间支持的运算符</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADWSM99211"></a><a id="ADWSM99210"></a><div class="props_rev_3"><a id="GUID-B02289A5-5BF5-4B40-AEC4-69EBB1948B22" name="GUID-B02289A5-5BF5-4B40-AEC4-69EBB1948B22"></a><h4 id="ADWSM-GUID-B02289A5-5BF5-4B40-AEC4-69EBB1948B22" class="sect4"><span class="enumeration_section">3.5.2</span> WM_EQUALS</h4>
                  <div>
                     <p>WM_EQUALS运算符检查第一个句点是否等于（即相同）第二个句点。仅当周期<code class="codeph">p1</code>等于周期<code class="codeph">p2</code> ， <code class="codeph">WM_CONTAINS(p1, p2)</code>返回<code class="codeph">1</code> ;否则，它返回<code class="codeph">0</code> 。
                     </p>
                     <p>例如：</p><pre class="oac_no_warn" dir="ltr">WM_EQUALS（WM_PERIOD（'= 01-01-1980'，'MM-DD-YYYY'），TO_DATE（'01 -01-1990'，'MM-DD-YYYY'）），WM_PERIOD（TO_DATE（'01  - 01-1980'，'MM-DD-YYYY'），TO_DATE（'01 -01-1990'，'MM-DD-YYYY'）））= 1 WM_EQUALS（WM_PERIOD（TO_DATE（'01 -01-1980'， 'MM-DD-YYYY'），TO_DATE（'01 -01-1990'，'MM-DD-YYYY'）），WM_PERIOD（TO_DATE（'01 -01-1985'，'MM-DD-YYYY'）， TO_DATE（'01 -01-1995'，'MM-DD-YYYY'）））= 0</pre><p><a href="valid-time-support.html#GUID-B02289A5-5BF5-4B40-AEC4-69EBB1948B22__i1008785">示例3-5</a>返回<code class="codeph">EMPLOYEES</code>表中从1990年1月1日到2005年1月1日有效的所有行（即， <code class="codeph">WM_VALID</code>列值等于该周期）。
                     </p>
                     <div class="example" id="GUID-B02289A5-5BF5-4B40-AEC4-69EBB1948B22__i1008785">
                        <p class="titleinexample">例3-5 WM_EQUALS运算符</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM employees e WHERE WM_EQUALS（e.wm_valid，wm_period（TO_DATE（'01 -01-1990'，'MM-DD-YYYY'），TO_DATE（'01 -01-2005'，'MM-DD-YYYY' ）））= 1; NAME SALARY ---------------- ---------- WM_VALID（VALIDFROM，VALIDTILL）---------------- -------------------------------------------------- -------------- Adams 30000 WM_PERIOD（'01 -JAN-1990 12:00:00 -04：00'，'01 -JAN-2005 12:00:00 -04：00 “）</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-8FDD27F9-D900-443A-8E69-FB0BE141FFE1" title="Workspace Manager提供关系检查运算符和设置运算符，这些运算符接受两个时间段参数，可用于在查询中应用有效时间过滤器。">有效时间支持的运算符</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADWSM99213"></a><a id="ADWSM99212"></a><div class="props_rev_3"><a id="GUID-F7E24EEE-4EE2-411A-9EDB-0EB8846350C2" name="GUID-F7E24EEE-4EE2-411A-9EDB-0EB8846350C2"></a><h4 id="ADWSM-GUID-F7E24EEE-4EE2-411A-9EDB-0EB8846350C2" class="sect4"><span class="enumeration_section">3.5.3</span> WM_GREATERTHAN</h4>
                  <div>
                     <p>WM_GREATERTHAN运算符检查第一个周期是否大于（即，在第二个周期之后）。仅当整个周期<code class="codeph">p1</code>晚于周期<code class="codeph">p2</code> ， <code class="codeph">WM_CONTAINS(p1, p2)</code>返回<code class="codeph">1</code> ;否则，它返回<code class="codeph">0</code> 。
                     </p>
                     <p>例如：</p><pre class="oac_no_warn" dir="ltr">WM_GREATERTHAN（WM_PERIOD（TO_DATE（'01 -01-1980'，'MM-DD-YYYY'），TO_DATE（'01 -01-1990'，'MM-DD-YYYY'）），WM_PERIOD（TO_DATE（'01  - 01-1970'，'MM-DD-YYYY'），TO_DATE（'01 -01-1980'，'MM-DD-YYYY'）））= 1 WM_GREATERTHAN（WM_PERIOD（TO_DATE（'01 -01-1980'， 'MM-DD-YYYY'），TO_DATE（'01 -01-1990'，'MM-DD-YYYY'）），WM_PERIOD（TO_DATE（'01 -01-1970'，'MM-DD-YYYY'）， TO_DATE（'01 -01-1981'，'MM-DD-YYYY'）））= 0</pre><p><a href="valid-time-support.html#GUID-F7E24EEE-4EE2-411A-9EDB-0EB8846350C2__i1008786">示例3-6</a>返回<code class="codeph">EMPLOYEES</code>表中仅在2001年1月1日之后有效的所有行（即， <code class="codeph">WM_VALID</code>列时间戳都在2001年1月1日之后）。
                     </p>
                     <div class="example" id="GUID-F7E24EEE-4EE2-411A-9EDB-0EB8846350C2__i1008786">
                        <p class="titleinexample">例3-6 WM_GREATERTHAN运算符</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM employees e WHERE WM_GREATERTHAN（e.wm_valid，wm_period（TO_DATE（'01 -01-2001'，'MM-DD-YYYY'），TO_DATE（'01 -02-2001'，'MM-DD-YYYY' ）））= 1; NAME SALARY ---------------- ---------- WM_VALID（VALIDFROM，VALIDTILL）---------------- -------------------------------------------------- -------------- Coleman 50000 WM_PERIOD（'01 -JAN-2003 12:00:00 -04：00'，'31 -DEC-9999 12:00:00 -04：00 “）</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-8FDD27F9-D900-443A-8E69-FB0BE141FFE1" title="Workspace Manager提供关系检查运算符和设置运算符，这些运算符接受两个时间段参数，可用于在查询中应用有效时间过滤器。">有效时间支持的运算符</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADWSM99215"></a><a id="ADWSM99214"></a><div class="props_rev_3"><a id="GUID-96142D0E-7884-49A3-9E7A-3C7678B15CE9" name="GUID-96142D0E-7884-49A3-9E7A-3C7678B15CE9"></a><h4 id="ADWSM-GUID-96142D0E-7884-49A3-9E7A-3C7678B15CE9" class="sect4"><span class="enumeration_section">3.5.4</span> WM_INTERSECTION</h4>
                  <div>
                     <p>WM_INTERSECTION运算符返回两个句点的交集，即两个指定句点共有的句点。<code class="codeph">WM_INTERSECTION(p1, p2)</code>返回一个句点，它是句点<code class="codeph">p1</code>和<code class="codeph">p2</code>的交集。
                     </p>
                     <p>以下示例返回1985年1月1日至1988年1月1日之间的时间段：</p><pre class="oac_no_warn" dir="ltr">WM_INTERSECTION（WM_PERIOD（TO_DATE（'01 -01-1980'，'MM-DD-YYYY'），TO_DATE（'01 -01-1990'，'MM-DD-YYYY'）），WM_PERIOD（TO_DATE（'01  - 01-1985'，'MM-DD-YYYY'），TO_DATE（'01 -01-1988'，'MM-DD-YYYY'）））</pre><p>以下示例返回1985年1月1日至1990年1月1日之间的时间段：</p><pre class="oac_no_warn" dir="ltr">WM_INTERSECTION（WM_PERIOD（TO_DATE（'01 -01-1980'，'MM-DD-YYYY'），TO_DATE（'01 -01-1990'，'MM-DD-YYYY'）），WM_PERIOD（TO_DATE（'01  - 01-1985'，'MM-DD-YYYY'），TO_DATE（'01 -01-1995'，'MM-DD-YYYY'）））</pre><p>以下示例返回空值，因为没有句点的交集：</p><pre class="oac_no_warn" dir="ltr">WM_INTERSECTION（WM_PERIOD（TO_DATE（'01 -01-1980'，'MM-DD-YYYY'），TO_DATE（'01 -01-1990'，'MM-DD-YYYY'）），WM_PERIOD（TO_DATE（'01  - 01-1992'，'MM-DD-YYYY'），TO_DATE（'01 -01-1995'，'MM-DD-YYYY'）））</pre><p><a href="valid-time-support.html#GUID-96142D0E-7884-49A3-9E7A-3C7678B15CE9__i1008787">示例3-7</a>为<code class="codeph">EMPLOYEES</code>表中的每一行返回员工姓名以及<code class="codeph">WM_PERIOD</code>列值与1995年1月1日期间相交的时间段。
                     </p>
                     <div class="example" id="GUID-96142D0E-7884-49A3-9E7A-3C7678B15CE9__i1008787">
                        <p class="titleinexample">例3-7 WM_INTERSECTION运算符</p><pre class="oac_no_warn" dir="ltr">SELECT e.name，WM_INTERSECTION（e.wm_valid，wm_period（TO_DATE（'01 -01-1995'，'MM-DD-YYYY'），TO_DATE（'01 -02-1995'，'MM-DD-YYYY'） ））员工e;名称---------------- WM_INTERSECTION（E.WM_VALID，WM_PERIOD（TO_DATE（'01 -01-1995'，'MM-DD- ---------- -------------------------------------------------- -------------------- Adams WM_PERIOD（'01 -JAN-1995 12:00:00 -04：00'，'02 -JAN-1995 12:00： 00：04：00'）Baxter Coleman</pre><p>正如您在<a href="valid-time-support.html#GUID-96142D0E-7884-49A3-9E7A-3C7678B15CE9__i1008787">示例3-7</a>的输出中所看到的，只有Adams有一行在1995年1月1日有效。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-8FDD27F9-D900-443A-8E69-FB0BE141FFE1" title="Workspace Manager提供关系检查运算符和设置运算符，这些运算符接受两个时间段参数，可用于在查询中应用有效时间过滤器。">有效时间支持的运算符</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADWSM99217"></a><a id="ADWSM99216"></a><div class="props_rev_3"><a id="GUID-A1C7622F-76BC-44EC-94C8-DC4EE2A096EF" name="GUID-A1C7622F-76BC-44EC-94C8-DC4EE2A096EF"></a><h4 id="ADWSM-GUID-A1C7622F-76BC-44EC-94C8-DC4EE2A096EF" class="sect4"><span class="enumeration_section">3.5.5</span> WM_LDIFF</h4>
                  <div>
                     <p>WM_LDIFF运算符返回左侧两个句点之间的差异（即，更早的时间）。<code class="codeph">WM_LDIFF(p1, p2)</code>返回一个句点，它是左侧句点<code class="codeph">p1</code>和<code class="codeph">p2</code>之间的差值。</p>
                     <p>以下示例返回1980年1月1日到1985年1月1日之间的时间段：</p><pre class="oac_no_warn" dir="ltr">WM_LDIFF（WM_PERIOD（'= 01-01-1980'，'MM-DD-YYYY'），TO_DATE（'01 -01-1990'，'MM-DD-YYYY'）），WM_PERIOD（TO_DATE（'01  - 01-1985'，'MM-DD-YYYY'），TO_DATE（'01 -01-1988'，'MM-DD-YYYY'）））</pre><p>以下示例返回null值，因为<code class="codeph">p1.validFrom</code>大于<code class="codeph">p2.validFrom</code> ：</p><pre class="oac_no_warn" dir="ltr">WM_LDIFF（WM_PERIOD（'= 01-01-1980'，'MM-DD-YYYY'），TO_DATE（'01 -01-1990'，'MM-DD-YYYY'）），WM_PERIOD（TO_DATE（'01  - 01-1975'，'MM-DD-YYYY'），TO_DATE（'01 -01-1995'，'MM-DD-YYYY'）））</pre><p>以下示例返回一个空值，因为<code class="codeph">p2</code>完全在外面（在本例中，晚于） <code class="codeph">p1</code> ：</p><pre class="oac_no_warn" dir="ltr">WM_LDIFF（WM_PERIOD（'TO-TIME（'01 -01-1980'，'MM-DD-YYYY'），TO_DATE（'01 -01-1990'，'MM-DD-YYYY'）），WM_PERIOD（TO_DATE（'01  - 01-1992'，'MM-DD-YYYY'），TO_DATE（'01 -01-1995'，'MM-DD-YYYY'）））</pre><p><a href="valid-time-support.html#GUID-A1C7622F-76BC-44EC-94C8-DC4EE2A096EF__i1008788">示例3-8</a>为<code class="codeph">EMPLOYEES</code>表中的每一行返回员工姓名以及1995年1月1日左侧<code class="codeph">WM_PERIOD</code>列值不同的时间段。
                     </p>
                     <div class="example" id="GUID-A1C7622F-76BC-44EC-94C8-DC4EE2A096EF__i1008788">
                        <p class="titleinexample">例3-8 WM_LDIFF运算符</p><pre class="oac_no_warn" dir="ltr">SELECT e.name，WM_LDIFF（e.wm_valid，wm_period（TO_DATE（'01 -01-1995'，'MM-DD-YYYY'），TO_DATE（'01 -02-1995'，'MM-DD-YYYY'） ））员工e; NAME ---------------- WM_LDIFF（E.WM_VALID，WM_PERIOD（TO_DATE（'01 -01-1995'，'MM-DD-YYYY'），------ -------------------------------------------------- ------------------------ Adams WM_PERIOD（'01 -JAN-1990 12:00:00 -04：00'，'01 -JAN-1995 12:00:00 -04：00'）Baxter Coleman</pre><p>正如您在<a href="valid-time-support.html#GUID-A1C7622F-76BC-44EC-94C8-DC4EE2A096EF__i1008788">示例3-8</a>的输出中所看到的，只有Adams在左侧差异期间有一行有效。</p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-8FDD27F9-D900-443A-8E69-FB0BE141FFE1" title="Workspace Manager提供关系检查运算符和设置运算符，这些运算符接受两个时间段参数，可用于在查询中应用有效时间过滤器。">有效时间支持的运算符</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADWSM99219"></a><a id="ADWSM99218"></a><div class="props_rev_3"><a id="GUID-F6FAA51B-2963-4BD7-8094-0223F23D8B58" name="GUID-F6FAA51B-2963-4BD7-8094-0223F23D8B58"></a><h4 id="ADWSM-GUID-F6FAA51B-2963-4BD7-8094-0223F23D8B58" class="sect4"><span class="enumeration_section">3.5.6</span> WM_LESSTHAN</h4>
                  <div>
                     <p>WM_LESSTHAN运算符检查第一个周期是否小于（即，之前发生）第二个周期。仅当整个周期<code class="codeph">p1</code>小于周期<code class="codeph">p2</code> ， <code class="codeph">WM_CONTAINS(p1, p2)</code>返回<code class="codeph">1</code> ;否则，它返回<code class="codeph">0</code> 。
                     </p>
                     <p>例如：</p><pre class="oac_no_warn" dir="ltr">WM_LESSTHAN（WM_PERIOD（TO_DATE（'01 -01-1980'，'MM-DD-YYYY'），TO_DATE（'01 -01-1990'，'MM-DD-YYYY'）），WM_PERIOD（TO_DATE（'01  - 01-1991'，'MM-DD-YYYY'），TO_DATE（'01 -01-1992'，'MM-DD-YYYY'）））= 1 WM_LESSTHAN（WM_PERIOD（TO_DATE（'01 -01-1980'， 'MM-DD-YYYY'），TO_DATE（'01 -01-1990'，'MM-DD-YYYY'）），WM_PERIOD（TO_DATE（'01 -01-1989'，'MM-DD-YYYY'）， TO_DATE（'01 -01-1992'，'MM-DD-YYYY'）））= 0</pre><p><a href="valid-time-support.html#GUID-F6FAA51B-2963-4BD7-8094-0223F23D8B58__i1008789">示例3-9</a>返回<code class="codeph">EMPLOYEES</code>表中仅在2010年1月1日之前有效的所有行（即， <code class="codeph">WM_VALID</code>列时间戳都在2001年1月1日之前）。
                     </p>
                     <div class="example" id="GUID-F6FAA51B-2963-4BD7-8094-0223F23D8B58__i1008789">
                        <p class="titleinexample">例3-9 WM_LESSTHAN运算符</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM employees e WHERE WM_LESSTHAN（e.wm_valid，wm_period（TO_DATE（'01 -01-2010'，'MM-DD-YYYY'），TO_DATE（'01 -02-2010'，'MM-DD-YYYY' ）））= 1; NAME SALARY ---------------- ---------- WM_VALID（VALIDFROM，VALIDTILL）---------------- -------------------------------------------------- -------------- Adams 30000 WM_PERIOD（'01 -JAN-1990 12:00:00 -04：00'，'01 -JAN-2005 12:00:00 -04：00 “）</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-8FDD27F9-D900-443A-8E69-FB0BE141FFE1" title="Workspace Manager提供关系检查运算符和设置运算符，这些运算符接受两个时间段参数，可用于在查询中应用有效时间过滤器。">有效时间支持的运算符</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADWSM99221"></a><a id="ADWSM99220"></a><div class="props_rev_3"><a id="GUID-A0289649-B322-4B79-BEB3-3B51DB40B6EB" name="GUID-A0289649-B322-4B79-BEB3-3B51DB40B6EB"></a><h4 id="ADWSM-GUID-A0289649-B322-4B79-BEB3-3B51DB40B6EB" class="sect4"><span class="enumeration_section">3.5.7</span> WM_MEETS</h4>
                  <div>
                     <p>WM_MEETS运算符检查第一个周期的结束是否是第二个周期的开始。仅当<code class="codeph">p1.validTill = p2.validFrom</code> ， <code class="codeph">WM_MEETS(p1, p2)</code>返回<code class="codeph">1</code> ;否则，它返回<code class="codeph">0</code> 。
                     </p>
                     <p>例如：</p><pre class="oac_no_warn" dir="ltr">WM_MEETS（WM_PERIOD（TO_DATE（'01 -01-1980'，'MM-DD-YYYY'），TO_DATE（'01 -01-1990'，'MM-DD-YYYY'）），WM_PERIOD（TO_DATE（'01  - 01-1990'，'MM-DD-YYYY'），TO_DATE（'01 -01-1995'，'MM-DD-YYYY'）））= 1 WM_MEETS（WM_PERIOD（TO_DATE（'01 -01-1980'， 'MM-DD-YYYY'），TO_DATE（'01 -01-1990'，'MM-DD-YYYY'）），WM_PERIOD（TO_DATE（'01 -01-1992'，'MM-DD-YYYY'）， TO_DATE（'01 -01-1995'，'MM-DD-YYYY'）））= 0</pre><p><a href="valid-time-support.html#GUID-A0289649-B322-4B79-BEB3-3B51DB40B6EB__i1008790">示例3-10</a>返回<code class="codeph">EMPLOYEES</code>表中的所有行，这些行仅在有效日期的结束时间戳与2005年1月1日至2006年1月1日期间的开始时相同时才有效（即，如果<code class="codeph">WM_VALID</code> .validTill等于指定时间段的开始。
                     </p>
                     <div class="example" id="GUID-A0289649-B322-4B79-BEB3-3B51DB40B6EB__i1008790">
                        <p class="titleinexample">例3-10 WM_MEETS运算符</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM employees e WHERE WM_MEETS（e.wm_valid，wm_period（TO_DATE（'01 -01-2005'，'MM-DD-YYYY'），TO_DATE（'01 -01-2006'，'MM-DD-YYYY' ）））= 1; NAME SALARY ---------------- ---------- WM_VALID（VALIDFROM，VALIDTILL）---------------- -------------------------------------------------- -------------- Adams 30000 WM_PERIOD（'01 -JAN-1990 12:00:00 -04：00'，'01 -JAN-2005 12:00:00 -04：00 “）</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-8FDD27F9-D900-443A-8E69-FB0BE141FFE1" title="Workspace Manager提供关系检查运算符和设置运算符，这些运算符接受两个时间段参数，可用于在查询中应用有效时间过滤器。">有效时间支持的运算符</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADWSM99223"></a><a id="ADWSM99222"></a><div class="props_rev_3"><a id="GUID-ADFA6724-E29F-4F79-8C19-0DC8D357EEA1" name="GUID-ADFA6724-E29F-4F79-8C19-0DC8D357EEA1"></a><h4 id="ADWSM-GUID-ADFA6724-E29F-4F79-8C19-0DC8D357EEA1" class="sect4"><span class="enumeration_section">3.5.8</span> WM_OVERLAPS</h4>
                  <div>
                     <p>WM_OVERLAPS运算符检查两个周期是否重叠。如果周期<code class="codeph">p1</code>和<code class="codeph">p2</code>重叠，则<code class="codeph">WM_OVERLAPS(p1, p2)</code>返回<code class="codeph">1</code> ;否则，它返回<code class="codeph">0</code> 。
                     </p>
                     <p>例如：</p><pre class="oac_no_warn" dir="ltr">WM_OVERLAPS（WM_PERIOD（TO_DATE（'01 -01-1980'，'MM-DD-YYYY'），TO_DATE（'01 -01-1990'，'MM-DD-YYYY'）），WM_PERIOD（TO_DATE（'01  - 01-1985'，'MM-DD-YYYY'），TO_DATE（'01 -01-1995'，'MM-DD-YYYY'）））= 1 WM_OVERLAPS（WM_PERIOD（TO_DATE（'01 -01-1980'， 'MM-DD-YYYY'），TO_DATE（'01 -01-1990'，'MM-DD-YYYY'）），WM_PERIOD（TO_DATE（'01 -01-1970'，'MM-DD-YYYY'）， TO_DATE（'01 -01-1980'，'MM-DD-YYYY'）））= 0</pre><p><a href="valid-time-support.html#GUID-ADFA6724-E29F-4F79-8C19-0DC8D357EEA1__i1008791">示例3-11</a>返回<code class="codeph">EMPLOYEES</code>表中的所有行，其有效日期范围与1990年1月1日至2000年1月1日期间重叠。
                     </p>
                     <div class="example" id="GUID-ADFA6724-E29F-4F79-8C19-0DC8D357EEA1__i1008791">
                        <p class="titleinexample">例3-11 WM_OVERLAPS运算符</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM employees e WHERE WM_OVERLAPS（e.wm_valid，wm_period（TO_DATE（'01 -01-1990'，'MM-DD-YYYY'），TO_DATE（'01 -01-2000'，'MM-DD-YYYY' ）））= 1; NAME SALARY ---------------- ---------- WM_VALID（VALIDFROM，VALIDTILL）---------------- -------------------------------------------------- -------------- Adams 30000 WM_PERIOD（'01 -JAN-1990 12:00:00 -04：00'，'01 -JAN-2005 12:00:00 -04：00 “）</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-8FDD27F9-D900-443A-8E69-FB0BE141FFE1" title="Workspace Manager提供关系检查运算符和设置运算符，这些运算符接受两个时间段参数，可用于在查询中应用有效时间过滤器。">有效时间支持的运算符</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADWSM99225"></a><a id="ADWSM99224"></a><div class="props_rev_3"><a id="GUID-4F591088-5343-471C-9670-A7EDDFBC02CF" name="GUID-4F591088-5343-471C-9670-A7EDDFBC02CF"></a><h4 id="ADWSM-GUID-4F591088-5343-471C-9670-A7EDDFBC02CF" class="sect4"><span class="enumeration_section">3.5.9</span> WM_RDIFF</h4>
                  <div>
                     <p>WM_RDIFF运算符返回右侧两个句点之间的差异（即稍后的时间）。<code class="codeph">WM_RDIFF(p1, p2)</code>返回一个句点，它是右侧句点<code class="codeph">p1</code>和<code class="codeph">p2</code>之间的差值。
                     </p>
                     <p>以下示例返回1988年1月1日至1990年1月1日之间的时间段：</p><pre class="oac_no_warn" dir="ltr">WM_RDIFF（WM_PERIOD（TO_DATE（'01 -01-1980'，'MM-DD-YYYY'），TO_DATE（'01 -01-1990'，'MM-DD-YYYY'）），WM_PERIOD（TO_DATE（'01  - 01-1985'，'MM-DD-YYYY'），TO_DATE（'01 -01-1988'，'MM-DD-YYYY'）））</pre><p>以下示例返回null值，因为<code class="codeph">p1.validTill</code>小于<code class="codeph">p2.validTill</code> ：</p><pre class="oac_no_warn" dir="ltr">WM_RDIFF（WM_PERIOD（TO_DATE（'01 -01-1980'，'MM-DD-YYYY'），TO_DATE（'01 -01-1990'，'MM-DD-YYYY'）），WM_PERIOD（TO_DATE（'01  - 01-1975'，'MM-DD-YYYY'），TO_DATE（'01 -01-1995'，'MM-DD-YYYY'）））</pre><p><a href="valid-time-support.html#GUID-4F591088-5343-471C-9670-A7EDDFBC02CF__i1008792">示例3-12</a>为<code class="codeph">EMPLOYEES</code>表中的每一行返回员工姓名以及1995年1月1日右侧<code class="codeph">WM_PERIOD</code>列值不同的时间段。
                     </p>
                     <div class="example" id="GUID-4F591088-5343-471C-9670-A7EDDFBC02CF__i1008792">
                        <p class="titleinexample">例3-12 WM_RDIFF运算符</p><pre class="oac_no_warn" dir="ltr">SELECT e.name，WM_RDIFF（e.wm_valid，wm_period（TO_DATE（'01 -01-1995'，'MM-DD-YYYY'），TO_DATE（'01 -02-1995'，'MM-DD-YYYY'） ））员工e;名称---------------- WM_RDIFF（E.WM_VALID，WM_PERIOD（TO_DATE（'01 -01-1995'，'MM-DD-YYYY'），------ -------------------------------------------------- ------------------------亚当斯WM_PERIOD（'02 -JAN-1995 12:00:00 -04：00'，'01 -JAN-2005 12:00:00 -04：00'）Baxter Coleman WM_PERIOD（'01 -JAN-2003 12:00:00 -04：00'，'31 -DEC-9999 12:00:00 -04：00'）</pre><p>正如您在<a href="valid-time-support.html#GUID-4F591088-5343-471C-9670-A7EDDFBC02CF__i1008792">示例3-12</a>的输出中所看到的，只有Adams和Coleman具有在右侧差异期间有效的行。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-8FDD27F9-D900-443A-8E69-FB0BE141FFE1" title="Workspace Manager提供关系检查运算符和设置运算符，这些运算符接受两个时间段参数，可用于在查询中应用有效时间过滤器。">有效时间支持的运算符</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADWSM99226"></a><div class="props_rev_3"><a id="GUID-2778AB34-FDCD-44CC-9B6A-75D53EC81A7B" name="GUID-2778AB34-FDCD-44CC-9B6A-75D53EC81A7B"></a><h3 id="ADWSM-GUID-2778AB34-FDCD-44CC-9B6A-75D53EC81A7B" class="sect3"><span class="enumeration_section">3.6</span>具有有效时间支持的查询和DML操作</h3>
               <div>
                  <p>本节介绍与有效时间支持相关的查询和数据操作语言（插入，更新和删除）操作的一些行为和注意事项。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="valid-time-support.html#GUID-07C8EBE7-6130-47EB-87EA-12BA03ADDC00">查询</a><br></li>
                     <li class="ulchildlink"><a href="valid-time-support.html#GUID-19C248F1-A3DD-4CBA-985E-9AB4FF1313B0">数据处理（DML）操作</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-967E7CE5-A328-4BA7-AA7B-7899B6C99C01" title="本章介绍了对启用版本的表的有效时间支持，也称为有效约会。">工作区管理器有效时间支持</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADWSM99227"></a><div class="props_rev_3"><a id="GUID-07C8EBE7-6130-47EB-87EA-12BA03ADDC00" name="GUID-07C8EBE7-6130-47EB-87EA-12BA03ADDC00"></a><h4 id="ADWSM-GUID-07C8EBE7-6130-47EB-87EA-12BA03ADDC00" class="sect4"><span class="enumeration_section">3.6.1</span>查询</h4>
                  <div>
                     <p>针对具有有效时间支持的启用版本的表发出的所有查询都会考虑当前会话的有效时间设置（使用<a href="DBMS_WM-reference.html#GUID-A42995A7-4941-42E7-B3FC-A812B16FF0AB">SetValidTime</a>或<a href="DBMS_WM-reference.html#GUID-956A01D4-C967-4720-B8B6-3EEBBE4C1AC6">SetValidTimeFilterON</a>过程设置）。除非查询另有规定（例如，通过使用在所描述的有效时间支持运营商之一<a href="valid-time-support.html#GUID-8FDD27F9-D900-443A-8E69-FB0BE141FFE1" title="Workspace Manager提供关系检查运算符和设置运算符，这些运算符接受两个时间段参数，可用于在查询中应用有效时间过滤器。">算符有效时支持</a> ），每个查询显示具有重叠的会话有效时间或有效时间有效的时间范围从基本表中的所有行过滤，并满足查询的其他条件。
                     </p>
                     <p>默认情况下（即，如果未在会话中调用<a href="DBMS_WM-reference.html#GUID-A42995A7-4941-42E7-B3FC-A812B16FF0AB">SetValidTime</a>过程或者在没有参数的情况下调用它），则在当前时间有效的所有行都被视为有效，并且有效时间段被视为来自目前的时间没有限制。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-2778AB34-FDCD-44CC-9B6A-75D53EC81A7B" title="本节介绍与有效时间支持相关的查询和数据操作语言（插入，更新和删除）操作的一些行为和注意事项。">具有有效时间支持的查询和DML操作</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADWSM99228"></a><div class="props_rev_3"><a id="GUID-19C248F1-A3DD-4CBA-985E-9AB4FF1313B0" name="GUID-19C248F1-A3DD-4CBA-985E-9AB4FF1313B0"></a><h4 id="ADWSM-GUID-19C248F1-A3DD-4CBA-985E-9AB4FF1313B0" class="sect4"><span class="enumeration_section">3.6.2</span>数据操作（DML）操作</h4>
                  <div>
                     <p>针对具有有效时间支持的启用版本的表发出的所有DML语句（INSERT，UPDATE和DELETE）都会考虑当前会话的有效时间设置和更新模式。（更新模式由<a href="DBMS_WM-reference.html#GUID-3E1E6BCC-110A-4DE7-9DB2-C10C5E2362D2">SetWMValidUpdateModeON</a>和<a href="DBMS_WM-reference.html#GUID-4A3C4F86-2068-4F09-91AC-3D029A970470">SetWMValidUpdateModeOFF</a>过程控制。）DML语句可以影响对有效时间段有效的所有行。
                     </p>
                     <p>默认情况下（即，如果在<a href="DBMS_WM-reference.html#GUID-A42995A7-4941-42E7-B3FC-A812B16FF0AB">会话</a>中未调用<a href="DBMS_WM-reference.html#GUID-A42995A7-4941-42E7-B3FC-A812B16FF0AB">SetValidTime</a>过程或者在没有参数的情况下调用它），则当前时间有效的所有行都可能受DML语句的影响，并且所有已修改的行都有效时间范围时间戳设置为从当前时间到更改。
                     </p>
                     <p>以下部分描述了适用于特定类型的DML操作的其他注意事项。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="valid-time-support.html#GUID-95DAA1AE-90DB-46A0-BDA2-66D5A5C2DA05">更新操作</a><br></li>
                        <li class="ulchildlink"><a href="valid-time-support.html#GUID-6EA33492-7674-4F88-8561-26BA11906CB2">插入操作</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-2778AB34-FDCD-44CC-9B6A-75D53EC81A7B" title="本节介绍与有效时间支持相关的查询和数据操作语言（插入，更新和删除）操作的一些行为和注意事项。">具有有效时间支持的查询和DML操作</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADWSM99230"></a><a id="ADWSM99229"></a><div class="props_rev_3"><a id="GUID-95DAA1AE-90DB-46A0-BDA2-66D5A5C2DA05" name="GUID-95DAA1AE-90DB-46A0-BDA2-66D5A5C2DA05"></a><h5 id="ADWSM-GUID-95DAA1AE-90DB-46A0-BDA2-66D5A5C2DA05" class="sect5"><span class="enumeration_section">3.6.2.1</span>更新操作</h5>
                     <div>
                        <p>可以对具有有效时间支持的启用版本的表的更新操作进行排序或不排序。</p>
                        <p><a id="d26526e1701" class="indexterm-anchor"></a>如果未在UPDATE语句中指定对<code class="codeph">WM_VALID</code>列的更改，则会发生<span class="bold">顺序更新</span>操作。在顺序更新操作中，行的<code class="codeph">WM_VALID.ValidTill</code>值更改为当前会话有效时间范围的<code class="codeph">ValidFrom</code>时间戳，并创建一个新行，其中<code class="codeph">WM_VALID</code>周期反映当前会话有效时间范围。顺序更新确保UPDATE语句不会创建重复记录，因为<code class="codeph">WM_VALID</code>列值不同。
                        </p>
                        <p><a href="valid-time-support.html#GUID-95DAA1AE-90DB-46A0-BDA2-66D5A5C2DA05__i1009191">例3-13</a>显示了一个有序的更新操作，其中员工Baxter被加薪。在更新之前，Baxter有一行，工资为40000，有效时间为2000年1月1日至更改。
                        </p>
                        <div class="example" id="GUID-95DAA1AE-90DB-46A0-BDA2-66D5A5C2DA05__i1009191">
                           <p class="titleinexample">例3-13顺序更新操作</p><pre class="oac_no_warn" dir="ltr">- 更新现有员工的薪水。执行“有序”更新，以便 - 保留现有的与时间相关的信息。这导致两行 - 对于Baxter。- 首先，将有效时间设置为Baxter加注的预期范围。EXECUTE DBMS_WM.SetValidTime（TO_DATE（'01 -01-2003'，'MM-DD-YYYY'），DBMS_WM.UNTIL_CHANGED）; - 给Baxter加薪，自2003年1月1日起生效，直到更改为止。UPDATE员工SET薪水= 45000 WHERE name ='Baxter';</pre><p><a href="valid-time-support.html#GUID-95DAA1AE-90DB-46A0-BDA2-66D5A5C2DA05__i1009191">示例3-13中</a>的更新操作修改现有行的<code class="codeph">WM_VALID</code>值，并使用新工资值和反映会话有效时间范围的<code class="codeph">WM_VALID</code>值创建新行，如以下语句所示：</p><pre class="oac_no_warn" dir="ltr">- 设置有效时间几乎涵盖所有时间。EXECUTE DBMS_WM.SetValidTime（TO_DATE（'01 -01-1900'，'MM-DD-YYYY'），TO_DATE（'01 -02-9999'，'MM-DD-YYYY'））; - 查看Baxter存在哪些数据。SELECT * FROM employees WHERE name ='Baxter'; NAME SALARY ---------------- ---------- WM_VALID（VALIDFROM，VALIDTILL）---------------- -------------------------------------------------- -------------- Baxter 45000 WM_PERIOD（'01 -JAN-2003 12:00:00 -04：00'，NULL）Baxter 40000 WM_PERIOD（'01 -JAN-2000 12:00 ：00：04：00'，'01 -JAN-2003 12:00:00 -04：00'）</pre><p><a id="d26526e1744" class="indexterm-anchor"></a> <span class="bold">有序删除</span>操作删除属于会话有效时间范围的行的部分;也就是说，创建一个新行，其中<code class="codeph">WM_VALID</code>周期反映当前会话有效时间范围，然后删除该行。如果<a href="valid-time-support.html#GUID-95DAA1AE-90DB-46A0-BDA2-66D5A5C2DA05__i1009191">例3-13中</a>的UPDATE语句改为<code class="codeph">DELETE FROM employees WHERE name = 'Baxter';</code> ，Baxter的新行，从2003年1月1日起有效，直到更改，将被删除，但Baxter在2003年1月1日之前有效的任何行都不会受到影响。没有非顺序删除操作的概念;例如，如果在<a href="valid-time-support.html#GUID-95DAA1AE-90DB-46A0-BDA2-66D5A5C2DA05__i1009191">示例3-13中</a>未设置有效时间，则删除操作<code class="codeph">WHERE name = 'Baxter'</code>将删除<code class="codeph">WHERE name = 'Baxter'</code>所有行。
                           </p>
                           <p>当表启用了版本并具有有效时间支持或者对启用版本的表添加了有效时间支持时，将启用顺序更新和删除操作。但是，您可以禁用测序更新支持，并通过删除操作（以及为nonsequenced更新操作） <a href="DBMS_WM-reference.html#GUID-4A3C4F86-2068-4F09-91AC-3D029A970470">SetWMValidUpdateModeOFF</a>程序，您可以重新启用使用支持<a href="DBMS_WM-reference.html#GUID-3E1E6BCC-110A-4DE7-9DB2-C10C5E2362D2">SetWMValidUpdateModeON</a>程序。（这两个过程都在<a href="DBMS_WM-reference.html#GUID-EAC6BFAC-69E2-46C3-8211-8AE8661B6A8B" title="Workspace Manager在名为DBMS_WM的包中包含PL / SQL子程序（过程和函数），用于执行产品的可用功能。本章提供有关每个子程序的参考信息。">DBMS_WM包：参考</a>中描述。）
                           </p>
                           <p><a id="d26526e1785" class="indexterm-anchor"></a>在UPDATE语句中指定对<code class="codeph">WM_VALID</code>列的更改时，会发生未<code class="codeph">WM_VALID</code> <span class="bold">更新</span>操作。在非<code class="codeph">WM_VALID</code>更新操作中，不会创建其他行，并且更新的行的<code class="codeph">WM_VALID</code>列值反映您在UPDATE语句中指定的值。您必须确保未按顺序执行的更新操作不会导致在UPDATE语句中指定的时间段内具有相同主键值的多行有效;否则，由于主键约束违规，更新失败。
                           </p>
                           <p>如果<a href="valid-time-support.html#GUID-95DAA1AE-90DB-46A0-BDA2-66D5A5C2DA05__i1009191">示例3-13中</a>的UPDATE语句是非序列化的更新操作，则Baxter的结果只有一行：现有行的工资设置为45000， <code class="codeph">WM_VALID</code>列设置为UPDATE中指定的时间段声明。
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-19C248F1-A3DD-4CBA-985E-9AB4FF1313B0">数据操作（DML）操作</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADWSM99232"></a><a id="ADWSM99231"></a><div class="props_rev_3"><a id="GUID-6EA33492-7674-4F88-8561-26BA11906CB2" name="GUID-6EA33492-7674-4F88-8561-26BA11906CB2"></a><h5 id="ADWSM-GUID-6EA33492-7674-4F88-8561-26BA11906CB2" class="sect5"><span class="enumeration_section">3.6.2.2</span>插入操作</h5>
                     <div>
                        <p>在具有有效时间支持的启用版本的表中插入行时，可以为该行指定有效的时间段。如果为该期间指定空时间戳，则使用会话有效时间段。</p>
                        <p>将行插入具有有效时间支持的启用版本的表时，Workspace Manager会检查以确保没有具有相同主键值的现有行具有与新插入行的有效时间范围重叠的有效时间范围。如果找到这样的行，则会引发异常。<a href="valid-time-support.html#GUID-6EA33492-7674-4F88-8561-26BA11906CB2__i1008980">示例3-14</a>显示了由于重叠有效时间段而导致违反主键约束的尝试插入操作。
                        </p>
                        <div class="example" id="GUID-6EA33492-7674-4F88-8561-26BA11906CB2__i1008980">
                           <p class="titleinexample">示例3-14由于重叠时间段而导致插入操作失败</p><pre class="oac_no_warn" dir="ltr">-  插入。由于重叠时间，应该违反主键约束： - 现有的Coleman行在2003年1月1日至31年12月31日期间有效。INSERT INTO员工VALUES（'Coleman'，55000，WMSYS.WM_PERIOD（TO_DATE（'01 -01-2004'，'MM-DD-YYYY'），TO_DATE（'12 -31-9999'，'MM-DD-YYYY '）））; ）*第6行的错误：ORA-20010：唯一键违规ORA-06512：在“WM_DEVELOPER.OVM_INSERT_10”，第1行ORA-04088：执行触发器'WM_DEVELOPER.OVM_INSERT_10'时出错</pre><p>要使<a href="valid-time-support.html#GUID-6EA33492-7674-4F88-8561-26BA11906CB2__i1008980">示例3-14中</a>的语句成功，首先将Coleman行的WM_VALID.ValidTill属性更改为反映2004年1月1日或更早日期的时间戳。
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-19C248F1-A3DD-4CBA-985E-9AB4FF1313B0">数据操作（DML）操作</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADWSM99233"></a><div class="props_rev_3"><a id="GUID-F4650E9B-AEB4-4F39-969F-3EC372683FFD" name="GUID-F4650E9B-AEB4-4F39-969F-3EC372683FFD"></a><h3 id="ADWSM-GUID-F4650E9B-AEB4-4F39-969F-3EC372683FFD" class="sect3"><span class="enumeration_section">3.7</span>有效时间支持的约束管理</h3>
               <div>
                  <p>本节介绍与影响参照完整性约束和唯一约束的有效时间支持相关的注意事项。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="valid-time-support.html#GUID-FCD91FB2-2067-43A2-AC0D-6C89FF8AE3CF">参照完整性约束</a><br></li>
                     <li class="ulchildlink"><a href="valid-time-support.html#GUID-346D05BB-D25A-4EBF-89BA-D73080B705ED">独特的约束</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-967E7CE5-A328-4BA7-AA7B-7899B6C99C01" title="本章介绍了对启用版本的表的有效时间支持，也称为有效约会。">工作区管理器有效时间支持</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADWSM99234"></a><div class="props_rev_3"><a id="GUID-FCD91FB2-2067-43A2-AC0D-6C89FF8AE3CF" name="GUID-FCD91FB2-2067-43A2-AC0D-6C89FF8AE3CF"></a><h4 id="ADWSM-GUID-FCD91FB2-2067-43A2-AC0D-6C89FF8AE3CF" class="sect4"><span class="enumeration_section">3.7.1</span>参照完整性约束</h4>
                  <div>
                     <p>如果在具有有效时间支持的两个启用版本的表之间存在参照完整性约束，则在强制执行约束时将考虑行的有效时间段。例如，假设<code class="codeph">DEPARTMENTS</code>表具有<code class="codeph">MANAGER_ID</code>列，该列是引用<code class="codeph">EMPLOYEES</code>表中的<code class="codeph">EMPLOYEE_ID</code>列的外键（即，部门经理必须是现有员工）。如果两个表都启用了版本且具有有效时间支持，并且插入或更新操作将导致新的<code class="codeph">DEPARTMENTS.MANAGER_ID</code>值，则如果<code class="codeph">D</code> <code class="codeph">EPARTMENTS.WM_VALID</code>值不在<code class="codeph">EMPLOYEES.WM_VALID</code>范围内，则操作将失败正在担任部门经理的员工的价值。（也就是说，如果新部门经理在指定的时间段内不是有效员工，或者在插入或更新操作中默认，则操作将失败。）
                     </p>
                     <p>如果参照完整性约束中的任何一个或两个表未启用版本且具有有效时间支持，则在强制执行约束时将忽略有效时间段。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-F4650E9B-AEB4-4F39-969F-3EC372683FFD" title="本节介绍与影响参照完整性约束和唯一约束的有效时间支持相关的注意事项。">有效时间支持的约束管理</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADWSM99235"></a><div class="props_rev_3"><a id="GUID-346D05BB-D25A-4EBF-89BA-D73080B705ED" name="GUID-346D05BB-D25A-4EBF-89BA-D73080B705ED"></a><h4 id="ADWSM-GUID-346D05BB-D25A-4EBF-89BA-D73080B705ED" class="sect4"><span class="enumeration_section">3.7.2</span>唯一约束</h4>
                  <div>
                     <p>如果具有有效时间支持的启用版本的表中存在唯一约束，则在强制执行约束时将考虑行的有效时间段。例如，假设<code class="codeph">EMPLOYEES</code>表具有一个具有唯一约束的<code class="codeph">EMPLOYEE_ID</code>列。如果插入或更新操作将导致新的<code class="codeph">EMPLOYEE_ID</code>值与现有<code class="codeph">EMPLOYEE_ID</code>值相同，则如果现有行和插入行的<code class="codeph">WM_VALID</code>值重叠，则操作将失败。（也就是说，如果新员工和现有员工具有相同的ID号并且他们的行在任何给定时间都有效，则操作将失败。但是，如果两个员工的有效时间段不重叠，则操作将成功。）
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-F4650E9B-AEB4-4F39-969F-3EC372683FFD" title="本节介绍与影响参照完整性约束和唯一约束的有效时间支持相关的注意事项。">有效时间支持的约束管理</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADWSM99236"></a><div class="props_rev_3"><a id="GUID-DC322D50-5D89-4048-87E7-EE731E8701EC" name="GUID-DC322D50-5D89-4048-87E7-EE731E8701EC"></a><h3 id="ADWSM-GUID-DC322D50-5D89-4048-87E7-EE731E8701EC" class="sect3"><span class="enumeration_section">3.8</span>锁定有效时间支持</h3>
               <div>
                  <p>如果锁定了具有有效时间支持的启用版本的表中的行，则会在其整个有效时间段内自动锁定该行。在指定的时间段内无法锁定行。</p>
                  <p>在悲观锁定的工作空间中的任何更新都将锁定从祖先工作空间看到的行，因为更新是在工作空间中执行的。祖先工作空间中的锁定行在其有效时间段内不会进一步更新，只要它们被锁定即可。</p>
                  <p>有关Workspace Manager锁定的说明，请参阅<a href="introduction-to-workspace-manager.html#GUID-7FC3B886-7433-4D77-8CE0-44C2AD0DB3FD">使用Workspace Manager锁定管理</a> 。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-967E7CE5-A328-4BA7-AA7B-7899B6C99C01" title="本章介绍了对启用版本的表的有效时间支持，也称为有效约会。">工作区管理器有效时间支持</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADWSM99237"></a><div class="props_rev_3"><a id="GUID-3D781FD0-B8CF-49C9-8FE8-AE433289968D" name="GUID-3D781FD0-B8CF-49C9-8FE8-AE433289968D"></a><h3 id="ADWSM-GUID-3D781FD0-B8CF-49C9-8FE8-AE433289968D" class="sect3"><span class="enumeration_section">3.9</span>受有效时间支持影响的静态数据字典视图</h3>
               <div>
                  <p>本节介绍对Workspace Manager静态数据字典视图的有效时间支持的影响。</p>
                  <p>这些视图记录在<a href="workspace-manager-views.html#GUID-6CA43834-04A8-412F-9A3D-849295B7B4C5" title="Workspace Manager创建和维护静态数据字典视图，以保存有关启用版本的表，工作空间，保存点，用户，权限，锁和冲突等信息。">Workspace Manager静态数据字典视图中</a> 。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="valid-time-support.html#GUID-B31D7D71-0BA5-42B7-80A2-D62F28C9301A">xxx_CONF视图和有效时间支持</a><br></li>
                     <li class="ulchildlink"><a href="valid-time-support.html#GUID-A71DF657-B03F-4CDE-81E7-7E794D5A7158">xxx_DIFF视图和有效时间支持</a><br></li>
                     <li class="ulchildlink"><a href="valid-time-support.html#GUID-0C4C7F2D-C0FA-439B-8CB7-7E48BE09F92E">xxx_HIST视图和有效时间支持</a><br></li>
                     <li class="ulchildlink"><a href="valid-time-support.html#GUID-DD73683C-42B8-4EA5-AA59-A3C6D1D84B7D">xxx_LOCK视图和有效时间支持</a><br></li>
                     <li class="ulchildlink"><a href="valid-time-support.html#GUID-8F696493-3D66-46DE-B9A1-7E3AFBD739AB">xxx_MW视图和有效时间支持</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-967E7CE5-A328-4BA7-AA7B-7899B6C99C01" title="本章介绍了对启用版本的表的有效时间支持，也称为有效约会。">工作区管理器有效时间支持</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADWSM99238"></a><div class="props_rev_3"><a id="GUID-B31D7D71-0BA5-42B7-80A2-D62F28C9301A" name="GUID-B31D7D71-0BA5-42B7-80A2-D62F28C9301A"></a><h4 id="ADWSM-GUID-B31D7D71-0BA5-42B7-80A2-D62F28C9301A" class="sect4"><span class="enumeration_section">3.9.1</span> xxx_CONF视图和有效时间支持</h4>
                  <div>
                     <p>对于具有有效时间支持的启用版本的表， <span class="italic">xxx</span> _CONF视图（在<a href="workspace-manager-views.html#GUID-AE3D058A-EF08-4955-A38F-A3A159B0978C">xxx_CONF视图中</a>描述）将包括任何时间冲突。当父工作空间中包含与其子工作空间中的行相同的键的行的有效时间与子工作空间中该行的有效时间重叠时，会产生这种冲突。设置会话上下文有效时间对<span class="italic">xxx</span> _CONF视图的结果没有影响，因为显示了整个时间维度的所有适用冲突。
                     </p>
                     <p>对于有效时间的支持，一个名为列启用版本表<code class="codeph">WM_VALID</code> ，类型<code class="codeph">WM_PERIOD</code> ，被添加到<span class="italic">XXX</span> _CONF视图，以表示在此期间，该行是有效的时间段。命名柱<code class="codeph">WM_CONFLICTPERIOD</code> ，类型的<code class="codeph">WM_PERIOD</code> ，也被添加到视图，以指示已检测到冲突的行的重叠周期。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-3D781FD0-B8CF-49C9-8FE8-AE433289968D" title="本节介绍对Workspace Manager静态数据字典视图的有效时间支持的影响。">受有效时间支持影响的静态数据字典视图</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADWSM99239"></a><div class="props_rev_3"><a id="GUID-A71DF657-B03F-4CDE-81E7-7E794D5A7158" name="GUID-A71DF657-B03F-4CDE-81E7-7E794D5A7158"></a><h4 id="ADWSM-GUID-A71DF657-B03F-4CDE-81E7-7E794D5A7158" class="sect4"><span class="enumeration_section">3.9.2</span> xxx_DIFF视图和有效时间支持</h4>
                  <div>
                     <p>对于具有有效时间支持的启用版本的表， <span class="italic">xxx</span> _DIFF视图（在<a href="workspace-manager-views.html#GUID-12AF51CC-34CD-4A22-93AA-CD7944A53C57">xxx_DIFF视图中</a>描述）将包括两个不同工作空间或保存点之间的主键的时间差异。在父工作空间或子工作空间中修改（插入，更新或删除）行时会发生这种差异。如果在父工作空间和子工作空间中同时修改了具有相同主键值的两行，则当行的有效时间范围重叠时，这两行仅在<span class="italic">xxx</span> _DIFF视图中相关。设置会话上下文有效时间对<span class="italic">xxx</span> _DIFF视图的结果没有影响，因为显示了整个时间维度的所有适用差异。
                     </p>
                     <p>对于有效时间的支持，一个名为列启用版本表<code class="codeph">WM_VALID</code> ，类型<code class="codeph">WM_PERIOD</code> ，被添加到<span class="italic">XXX</span> _DIFF视图，以表示在此期间，该行是有效的时间段。命名柱<code class="codeph">WM_DIFFPERIOD</code> ，类型的<code class="codeph">WM_PERIOD</code> ，也被添加到视图，以指示检测到其差值的行的重叠周期。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-3D781FD0-B8CF-49C9-8FE8-AE433289968D" title="本节介绍对Workspace Manager静态数据字典视图的有效时间支持的影响。">受有效时间支持影响的静态数据字典视图</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADWSM99240"></a><div class="props_rev_3"><a id="GUID-0C4C7F2D-C0FA-439B-8CB7-7E48BE09F92E" name="GUID-0C4C7F2D-C0FA-439B-8CB7-7E48BE09F92E"></a><h4 id="ADWSM-GUID-0C4C7F2D-C0FA-439B-8CB7-7E48BE09F92E" class="sect4"><span class="enumeration_section">3.9.3</span> xxx_HIST视图和有效时间支持</h4>
                  <div>
                     <p><span class="italic">xxx</span> _HIST视图（在<a href="workspace-manager-views.html#GUID-B927E3B1-4339-43B9-8C97-F903664DABCD">xxx_HIST视图中</a>描述）包括有关有效时间和事务时间的信息。它还包括审计信息，例如创建行的用户的名称。对于有效时间支持支持版本控制的表，一列名为<code class="codeph">WM_VALID</code> ，类型<code class="codeph">WM_PERIOD</code> ，被添加到<span class="italic">XXX</span> _HIST视图，以表示在此期间，该行是有效的时间段。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-3D781FD0-B8CF-49C9-8FE8-AE433289968D" title="本节介绍对Workspace Manager静态数据字典视图的有效时间支持的影响。">受有效时间支持影响的静态数据字典视图</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADWSM99241"></a><div class="props_rev_3"><a id="GUID-DD73683C-42B8-4EA5-AA59-A3C6D1D84B7D" name="GUID-DD73683C-42B8-4EA5-AA59-A3C6D1D84B7D"></a><h4 id="ADWSM-GUID-DD73683C-42B8-4EA5-AA59-A3C6D1D84B7D" class="sect4"><span class="enumeration_section">3.9.4</span> xxx_LOCK视图和有效时间支持</h4>
                  <div>
                     <p>对于具有有效时间的支持，一个名为列启用版本表<code class="codeph">WM_VALID</code> ，类型的<code class="codeph">WM_PERIOD</code> ，被添加到<span class="italic">XXX</span> _LOCK视图（描述于<a href="workspace-manager-views.html#GUID-2628A3F5-5873-46B7-A94A-E2660A597CF5">xxx_LOCK视图</a> ），以指示在这期间该行是有效的时间段。该行在整个有效时间段内都被锁定，因此这也是锁定期。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-3D781FD0-B8CF-49C9-8FE8-AE433289968D" title="本节介绍对Workspace Manager静态数据字典视图的有效时间支持的影响。">受有效时间支持影响的静态数据字典视图</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADWSM99242"></a><div class="props_rev_3"><a id="GUID-8F696493-3D66-46DE-B9A1-7E3AFBD739AB" name="GUID-8F696493-3D66-46DE-B9A1-7E3AFBD739AB"></a><h4 id="ADWSM-GUID-8F696493-3D66-46DE-B9A1-7E3AFBD739AB" class="sect4"><span class="enumeration_section">3.9.5</span> xxx_MW视图和有效时间支持</h4>
                  <div>
                     <p>对于具有有效时间的支持，一个名为列启用版本表<code class="codeph">WM_VALID</code> ，类型的<code class="codeph">WM_PERIOD</code> ，被添加到<span class="italic">XXX</span> _MW视图（描述于<a href="workspace-manager-views.html#GUID-2091F8E5-C052-464D-9FDD-12E99EBE523B">xxx_MW视图</a> ），以指示在这期间该行是有效的时间段。要仅查看特定时间段内有效的行，请使用<a href="valid-time-support.html#GUID-ADFA6724-E29F-4F79-8C19-0DC8D357EEA1">WM_OVERLAPS</a>运算符。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-3D781FD0-B8CF-49C9-8FE8-AE433289968D" title="本节介绍对Workspace Manager静态数据字典视图的有效时间支持的影响。">受有效时间支持影响的静态数据字典视图</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADWSM99245"></a><a id="ADWSM99244"></a><div class="props_rev_3"><a id="GUID-D7914BBC-70C9-4929-830B-52E09A2319FA" name="GUID-D7914BBC-70C9-4929-830B-52E09A2319FA"></a><h3 id="ADWSM-GUID-D7914BBC-70C9-4929-830B-52E09A2319FA" class="sect3"><span class="enumeration_section">3.10</span>向现有表添加有效时间支持</h3>
               <div>
                  <p>您可以向现有的启用版本的表添加有效时间支持。</p>
                  <p>为此，请使用<a href="DBMS_WM-reference.html#GUID-BDD51387-78F7-426C-A753-638C7293FBA6">AlterVersionedTable</a>过程。您可以指定要在所有现有行的WM_VALID列中设置的有效时间段，也可以接受当前时间戳的默认时间段，直到更改为止。
                  </p>
                  <p><a href="valid-time-support.html#GUID-D7914BBC-70C9-4929-830B-52E09A2319FA__I1009682">例3-15</a>创建一个名为<code class="codeph">MY_TABLE</code>的表，在没有有效时间支持的情况下启用它，然后添加有效时间支持。添加有效时间支持后， <code class="codeph">WM_VALID</code>列包含默认的有效时间段。
                  </p>
                  <div class="example" id="GUID-D7914BBC-70C9-4929-830B-52E09A2319FA__I1009682">
                     <p class="titleinexample">示例3-15为现有的启用版本的表添加有效时间支持</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE my_table（id NUMBER PRIMARY KEY）; EXECUTE DBMS_WM.EnableVersioning（'my_table'）;插入my_table VALUES（1）; SELECT * FROM my_table; ID ---------- 1 EXECUTE DBMS_WM.AlterVersionedTable（'my_table'，'ADD_VALID_TIME'）; SELECT * FROM my_table; ID ---------- WM_VALID（VALIDFROM，VALIDTILL）--------------------------------- ----------------------------------------------- 1 WM_PERIOD（ '09 -JUN-2003 10:04:13 -04：00'，NULL）</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-967E7CE5-A328-4BA7-AA7B-7899B6C99C01" title="本章介绍了对启用版本的表的有效时间支持，也称为有效约会。">工作区管理器有效时间支持</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADWSM99503"></a><a id="ADWSM99502"></a><div class="props_rev_3"><a id="GUID-65BA356D-F80E-4BF8-8F8E-CC9DD7128C19" name="GUID-65BA356D-F80E-4BF8-8F8E-CC9DD7128C19"></a><h3 id="ADWSM-GUID-65BA356D-F80E-4BF8-8F8E-CC9DD7128C19" class="sect3"><span class="enumeration_section">3.11</span>合并和刷新具有有效时间支持的表的工作空间</h3>
               <div>
                  <p>合并或刷新具有有效时间支持的表时，可以通过考虑相同主键值的行之间存在交集时的不同情况来确定结果行。</p>
                  <p>要确定两行是否相交，可以使用<a href="valid-time-support.html#GUID-ADFA6724-E29F-4F79-8C19-0DC8D357EEA1">WM_OVERLAPS</a>运算符。
                  </p>
                  <p>在<a href="valid-time-support.html#GUID-65BA356D-F80E-4BF8-8F8E-CC9DD7128C19__CHDIHIID" title="合并或刷新操作的validTill值和交集结果。第1列是validTill值，第2列是交叉结果。">表3-3中</a>显示的<code class="codeph">validTill</code>案例中：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>对于合并操作，目标工作空间是父工作空间。</p>
                     </li>
                     <li>
                        <p>对于刷新操作，目标工作空间是指定工作空间的子工作空间。</p>
                     </li>
                     <li>
                        <p>由于行的交叉性质，在合并或刷新操作之前执行冲突解决。（单个源行可能与多个目标行冲突，并且单个目标行可能与多个源行冲突。）</p>
                     </li>
                  </ul>
                  <div class="tblformal" id="GUID-65BA356D-F80E-4BF8-8F8E-CC9DD7128C19__CHDIHIID">
                     <p class="titleintable">表3-3合并或刷新操作的validTill值和交叉点结果</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="合并或刷新操作的validTill值和交集结果" width="100%" border="1" summary="validTill Values and Intersection Result from Merge or Refresh Operation. Column 1 is validTill Values, and column 2 is Intersection Result." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="51%" id="d26526e2538">validTill值</th>
                              <th align="left" valign="bottom" width="49%" id="d26526e2541">交叉口结果</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="51%" id="d26526e2546" headers="d26526e2538 ">
                                 <p>源行和目标行都具有不是<code class="codeph">DBMS_WM.UNTIL_CHANGED</code>的<code class="codeph">validTill</code>值。</p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d26526e2546 d26526e2541 ">
                                 <p>在目标工作空间中修改行的交叉部分以等于源行的交叉部分。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="51%" id="d26526e2559" headers="d26526e2538 ">
                                 <p>source行的<code class="codeph">validTill</code>值不是<code class="codeph">DBMS_WM.UNTIL_CHANGED</code> ，目标的值是<code class="codeph">DBMS_WM.UNTIL_CHANGED</code> 。</p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d26526e2559 d26526e2541 ">
                                 <p>修改行的交叉部分，结果行的<code class="codeph">validTill</code>值等于源行的<code class="codeph">validTill</code>值。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="51%" id="d26526e2578" headers="d26526e2538 ">
                                 <p>source行的<code class="codeph">validTill</code>值为<code class="codeph">DBMS_WM.UNTIL_CHANGED</code> ，目标行的值不是<code class="codeph">DBMS_WM.UNTIL_CHANGED</code> 。</p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d26526e2578 d26526e2541 ">
                                 <p>修改行的交叉部分，结果行的<code class="codeph">validTill</code>值等于目标行的值。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="51%" id="d26526e2597" headers="d26526e2538 ">
                                 <p>源行和目标行的<code class="codeph">validTill</code>值都是<code class="codeph">DBMS_WM.UNTIL_CHANGED</code> 。</p>
                              </td>
                              <td align="left" valign="top" width="49%" headers="d26526e2597 d26526e2541 ">
                                 <p>修改了交叉部分，结果行的<code class="codeph">validTill</code>值为DBMS_WM.UNTIL_CHANGED。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>对于<a href="valid-time-support.html#GUID-65BA356D-F80E-4BF8-8F8E-CC9DD7128C19__CHDIHIID" title="合并或刷新操作的validTill值和交集结果。第1列是validTill值，第2列是交叉结果。">表3-3中的</a>所有情况，目标行的任何非相交部分保持不变。当目标工作空间中没有重叠的行时，则不需要特别考虑;行被合并或刷新，没有任何其他更改。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="valid-time-support.html#GUID-967E7CE5-A328-4BA7-AA7B-7899B6C99C01" title="本章介绍了对启用版本的表的有效时间支持，也称为有效约会。">工作区管理器有效时间支持</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
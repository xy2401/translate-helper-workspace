<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The DBMS_SQLPA package provides the interface to implement the SQL Performance Analyzer."></meta>
      <meta name="description" content="The DBMS_SQLPA package provides the interface to implement the SQL Performance Analyzer."></meta>
      <title>DBMS_SQLPA</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="The DBMS_SQLPA package provides the interface to implement the SQL Performance Analyzer."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_SQLDIAG.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_SQLQ.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_SQLDIAG.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_SQLQ.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_SQLPA</li>
            </ol>
            <a id="GUID-9AAF3672-1CF3-4354-AF41-5BA50BA295F8" name="GUID-9AAF3672-1CF3-4354-AF41-5BA50BA295F8"></a><a id="ARPLS229"></a><a id="ARPLS229"></a>
            
            <h2 id="ARPLS-GUID-9AAF3672-1CF3-4354-AF41-5BA50BA295F8" class="sect2"><span class="enumeration_chapter">160</span> DBMS_SQLPA</h2>
         </header>
         <div class="ind">
            <div>
               <p>DBMS_SQLPA包提供了实现SQL Performance Analyzer的接口。</p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_SQLPA.html#GUID-667CF74A-E86B-4265-A724-1C2E0DD15C8E" title="DBMS_SQLPA包提供了一个容量，可帮助用户预测系统环境更改对SQL工作负载性能的影响。该界面允许用户构建并比较两个不同版本的工作负载性能，分析两个版本之间的差异，并取消屏蔽可能受更改影响的SQL语句。">概观</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_SQLPA.html#GUID-B9BAEC64-7F97-4D22-BA48-0CE7B16F6DFB" title="该程序包可供PUBLIC使用，并执行自己的安全检查。所有分析任务接口（XXX_ANALYSIS_TASK）都需要特权ADVISOR。">安全模型</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_SQLPA.html#GUID-69B40030-0C63-4666-B139-F2028AA1DC80" title="该表列出了DBMS_SQLPA子程序并简要描述了它们。">DBMS_SQLPA子程序摘要</a></p>
                  </li>
               </ul>
            </div><a id="ARPLS68346"></a><a id="ARPLS68346"></a><div class="props_rev_3"><a id="GUID-667CF74A-E86B-4265-A724-1C2E0DD15C8E" name="GUID-667CF74A-E86B-4265-A724-1C2E0DD15C8E"></a><h3 id="ARPLS-GUID-667CF74A-E86B-4265-A724-1C2E0DD15C8E" class="sect3"><span class="enumeration_section">160.1</span> DBMS_SQLPA概述</h3>
               <div>
                  <p><code class="codeph">DBMS_SQLPA</code>包提供了一个容量，可帮助用户预测系统环境更改对SQL工作负载性能的影响。该界面允许用户构建并比较两个不同版本的工作负载性能，分析两个版本之间的差异，并取消屏蔽可能受更改影响的SQL语句。
                  </p>
                  <div class="section">
                     <p>该软件包提供了一个面向任务的接口来实现SQL Performance Analyzer。例如</p>
                     <ol>
                        <li>
                           <p>您可以使用<a href="DBMS_SQLPA.html#GUID-9C3DB798-3F19-4467-8582-1AAFC32EC655" title="这些函数创建一个顾问程序任务来处理和分析一个或多个SQL语句。">CREATE_ANALYSIS_TASK函数</a>为单个语句或一组SQL语句创建分析任务</p>
                        </li>
                        <li>
                           <p><a href="DBMS_SQLPA.html#GUID-7A8BB3B0-89B5-49A7-99A8-59AA0F939058" title="此函数和过程执行先前创建的分析任务，函数版本返回新的执行名称。">EXECUTE_ANALYSIS_TASK函数和过程</a>执行先前创建的分析任务。
                           </p>
                        </li>
                        <li>
                           <p><a href="DBMS_SQLPA.html#GUID-8524B515-E14F-4F76-9458-F2E579D5A08B" title="此过程显示分析任务的结果。">REPORT_ANALYSIS_TASK函数</a>显示分析任务的结果。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS68347"></a><a id="ARPLS68347"></a><div class="props_rev_3"><a id="GUID-B9BAEC64-7F97-4D22-BA48-0CE7B16F6DFB" name="GUID-B9BAEC64-7F97-4D22-BA48-0CE7B16F6DFB"></a><h3 id="ARPLS-GUID-B9BAEC64-7F97-4D22-BA48-0CE7B16F6DFB" class="sect3"><span class="enumeration_section">160.2</span> DBMS_SQLPA安全模型</h3>
               <div>
                  <p>该程序包可供<code class="codeph">PUBLIC</code>使用，并执行自己的安全检查。所有分析任务接口（ <code class="codeph">XXX_ANALYSIS_TASK</code> ）都需要特权<code class="codeph">ADVISOR</code> 。</p>
               </div>
            </div><a id="ARPLS68348"></a><a id="ARPLS68349"></a><a id="ARPLS68349"></a><a id="ARPLS68348"></a><div class="props_rev_3"><a id="GUID-69B40030-0C63-4666-B139-F2028AA1DC80" name="GUID-69B40030-0C63-4666-B139-F2028AA1DC80"></a><h3 id="ARPLS-GUID-69B40030-0C63-4666-B139-F2028AA1DC80" class="sect3"><span class="enumeration_section">160.3</span> DBMS_SQLPA子程序摘要</h3>
               <div>
                  <p>该表列出了<code class="codeph">DBMS_SQLPA</code>子程序并简要描述了它们。
                  </p>
                  <div class="tblformal" id="GUID-69B40030-0C63-4666-B139-F2028AA1DC80__GUID-83A07D8B-E294-489E-AA42-8E4170417739">
                     <p class="titleintable">表160-1 DBMS_SQLPA包子程序</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_SQLPA包子程序" width="100%" border="1" summary="This table lists the DBMS_SQLPA subprograms in alphabetical order and briefly describes them." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="43%" id="d911026e450">子程序</th>
                              <th align="left" valign="bottom" width="57%" id="d911026e453">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d911026e458" headers="d911026e450 ">
                                 <p><a href="DBMS_SQLPA.html#GUID-CBC17582-41B4-4856-986F-7F08FEDFFF94" title="此过程取消当前正在执行的分析任务。从任务中删除所有中间结果数据。">CANCEL_ANALYSIS_TASK程序</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d911026e458 d911026e453 ">
                                 <p>取消当前正在执行的一个或多个SQL语句的任务分析</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d911026e470" headers="d911026e450 ">
                                 <p><a href="DBMS_SQLPA.html#GUID-9C3DB798-3F19-4467-8582-1AAFC32EC655" title="这些函数创建一个顾问程序任务来处理和分析一个或多个SQL语句。">CREATE_ANALYSIS_TASK函数</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d911026e470 d911026e453 ">
                                 <p>创建顾问程序任务以处理和分析一个或多个SQL语句</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d911026e482" headers="d911026e450 ">
                                 <p><a href="DBMS_SQLPA.html#GUID-8E2AFE1D-300A-49B5-8AD2-BA26FBD74AEE" title="此过程将删除SQL分析任务。该任务及其所有结果数据将被删除。">DROP_ANALYSIS_TASK程序</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d911026e482 d911026e453 ">
                                 <p>删除SQL分析任务</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d911026e494" headers="d911026e450 ">
                                 <p><a href="DBMS_SQLPA.html#GUID-7A8BB3B0-89B5-49A7-99A8-59AA0F939058" title="此函数和过程执行先前创建的分析任务，函数版本返回新的执行名称。">EXECUTE_ANALYSIS_TASK功能和程序</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d911026e494 d911026e453 ">
                                 <p>执行以前创建的分析任务</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d911026e506" headers="d911026e450 ">
                                 <p><a href="DBMS_SQLPA.html#GUID-BE5A3E82-13D5-4046-BA0B-C0A029911C63" title="此过程将中断当前正在执行的分析任务。不会从任务中删除所有中间结果数据。">INTERRUPT_ANALYSIS_TASK程序</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d911026e506 d911026e453 ">
                                 <p>中断当前正在执行的分析任务</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d911026e518" headers="d911026e450 ">
                                 <p><a href="DBMS_SQLPA.html#GUID-8524B515-E14F-4F76-9458-F2E579D5A08B" title="此过程显示分析任务的结果。">REPORT_ANALYSIS_TASK功能</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d911026e518 d911026e453 ">
                                 <p>显示分析任务的结果</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d911026e530" headers="d911026e450 ">
                                 <p><a href="DBMS_SQLPA.html#GUID-AAC78840-3899-479E-BA89-D5688A118244" title="在当前未执行的分析任务上调用此过程以准备重新执行。">RESET_ANALYSIS_TASK程序</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d911026e530 d911026e453 ">
                                 <p>将当前正在执行的分析任务重置为其初始状态</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d911026e542" headers="d911026e450 ">
                                 <p><a href="DBMS_SQLPA.html#GUID-DA06D2F1-EFFC-4C50-A607-887FAE238878" title="此过程恢复先前中断或FAILED（有致命错误）任务执行。">RESUME_ANALYSIS_TASK程序</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d911026e542 d911026e453 ">
                                 <p>恢复先前中断的分析任务，该任务是为处理SQL调优集而创建的。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d911026e557" headers="d911026e450 ">
                                 <p><a href="DBMS_SQLPA.html#GUID-24792620-7642-48DA-9154-37D10AE58AC2" title="此过程设置SQL分析任务参数值。">SET_ANALYSIS_TASK_PARAMETER程序</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d911026e557 d911026e453 ">
                                 <p>设置SQL分析任务参数值</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="43%" id="d911026e569" headers="d911026e450 ">
                                 <p><a href="DBMS_SQLPA.html#GUID-CFE070C1-80F3-4A20-96B0-3B38139338D8" title="此过程设置SQL分析任务参数的默认值。">SET_ANALYSIS_DEFAULT_PARAMETER程序</a></p>
                              </td>
                              <td align="left" valign="top" width="57%" headers="d911026e569 d911026e453 ">
                                 <p>设置SQL分析任务参数的默认值</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS68350"></a><a id="ARPLS68351"></a><a id="ARPLS68351"></a><a id="ARPLS68350"></a><div class="props_rev_3"><a id="GUID-CBC17582-41B4-4856-986F-7F08FEDFFF94" name="GUID-CBC17582-41B4-4856-986F-7F08FEDFFF94"></a><h4 id="ARPLS-GUID-CBC17582-41B4-4856-986F-7F08FEDFFF94" class="sect4"><span class="enumeration_section">160.3.1</span> CANCEL_ANALYSIS_TASK程序</h4>
                  <div>
                     <p>此过程取消当前正在执行的分析任务。从任务中删除所有中间结果数据。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-CBC17582-41B4-4856-986F-7F08FEDFFF94__GUID-C0CFCF29-0C47-48E8-AA7B-29BCCEF8901F">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.CANCEL_ANALYSIS_TASK（task_name IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CBC17582-41B4-4856-986F-7F08FEDFFF94__GUID-6C5B722E-7E0C-47A9-867F-E778BE13F644">参数</p>
                        <div class="tblformal" id="GUID-CBC17582-41B4-4856-986F-7F08FEDFFF94__GUID-F28D40BC-6241-46B5-9436-1316B467F119">
                           <p class="titleintable">表160-2 CANCEL_ANALYSIS_TASK过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CANCEL_ANALYSIS_TASK过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_SQLPA.CANCEL_ANALYSIS_TASK subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d911026e690">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d911026e693">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e698" headers="d911026e690 ">
                                       <p><code class="codeph">任务名称</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e698 d911026e693 ">
                                       <p>要取消的任务的名称</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CBC17582-41B4-4856-986F-7F08FEDFFF94__GUID-90E53C72-1215-4B52-AF3A-426C1C03C323">例子</p>
                        <p>在需要停止执行任务时取消任务，并且不需要查看任何已完成的结果：</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SQLPA.CANCEL_ANALYSIS_TASK（：my_task）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68352"></a><a id="ARPLS68353"></a><a id="ARPLS68353"></a><a id="ARPLS68352"></a><div class="props_rev_3"><a id="GUID-9C3DB798-3F19-4467-8582-1AAFC32EC655" name="GUID-9C3DB798-3F19-4467-8582-1AAFC32EC655"></a><h4 id="ARPLS-GUID-9C3DB798-3F19-4467-8582-1AAFC32EC655" class="sect4"><span class="enumeration_section">160.3.2</span> CREATE_ANALYSIS_TASK函数</h4>
                  <div>
                     <p>这些函数创建一个顾问程序任务来处理和分析一个或多个SQL语句。</p>
                     <div class="section">
                        <p>您可以使用此功能的不同形式：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在给定文本的情况下为单个语句创建分析任务。</p>
                           </li>
                           <li>
                              <p>在给定其标识符的情况下，从游标缓存为单个语句创建分析任务。</p>
                           </li>
                           <li>
                              <p>在给定一系列快照标识符的情况下，从工作负载存储库为单个语句创建分析任务。</p>
                           </li>
                           <li>
                              <p>为SQL调优集创建分析任务。</p>
                           </li>
                        </ul>
                        <p>在所有情况下，该函数都会创建一个顾问程序任务并设置其参数。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9C3DB798-3F19-4467-8582-1AAFC32EC655__GUID-DB6FE5E3-E778-4DAB-B11D-E6B6340D232E">句法</p>
                        <p>SQL文本格式。调用此函数的形式以准备对给定其文本的单个语句的分析。</p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.CREATE_ANALYSIS_TASK（sql_text IN CLOB，bind_list IN sql_binds：= NULL，parsing_schema IN VARCHAR2：= NULL，task_name IN VARCHAR2：= NULL，description IN VARCHAR2：= NULL）RETURN VARCHAR2;</pre><p>SQL ID格式。调用此函数形式以准备从给定其标识符的游标缓存中分析单个语句。</p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.CREATE_ANALYSIS_TASK（sql_id IN VARCHAR2，plan_hash_value IN NUMBER：= NULL，task_name IN VARCHAR2：= NULL，con_name IN VARCHAR2 DEFAULT，description IN VARCHAR2：= NULL）RETURN VARCHAR2;</pre><p>工作负载存储库格式。调用此函数形式以在给定一系列快照标识符的情况下准备分析来自工作负载存储库的单个语句。</p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.CREATE_ANALYSIS_TASK（dbid IN NUMBER DEFAULT，begin_snap IN NUMBER，end_snap IN NUMBER，sql_id IN VARCHAR2，plan_hash_value IN NUMBER：= NULL，task_name IN VARCHAR2：= NULL，description IN VARCHAR2：= NULL）con_name IN VARCHAR2 DEFAULT，RETURN VARCHAR2;</pre><p>SQLSET格式。调用此函数形式以准备SQL调优集的分析。</p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.CREATE_ANALYSIS_TASK（sqlset_name IN VARCHAR2，basic_filter IN VARCHAR2：= NULL，con_name IN VARCHAR2 DEFAULT，order_by IN VARCHAR2：= NULL，top_sql IN VARCHAR2：= NULL，task_name IN VARCHAR2：= NULL，description IN VARCHAR2：= NULL sqlset_owner IN VARCHAR2 ：= NULL）RETURN VARCHAR2;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9C3DB798-3F19-4467-8582-1AAFC32EC655__GUID-1C402A38-AC69-4FE8-A84D-AFCA99A9726A">参数</p>
                        <div class="tblformal" id="GUID-9C3DB798-3F19-4467-8582-1AAFC32EC655__GUID-A9C192F9-7D02-4C56-B101-020A3C4391A1">
                           <p class="titleintable">表160-3 <span class="italic"><span class="bold">CREATE_ANALYSIS_TASK函数参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CREATE_ANALYSIS_TASK函数参数" width="100%" border="1" summary="This table describes the parameters used by the DBMS_SQLPA.CREATE_ANALYSIS_TASK subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d911026e857">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d911026e860">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e865" headers="d911026e857 ">
                                       <p><code class="codeph">SQL_TEXT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e865 d911026e860 ">
                                       <p>SQL语句的文本</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e873" headers="d911026e857 ">
                                       <p><code class="codeph">bind_list</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e873 d911026e860 ">
                                       <p>一组绑定值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e881" headers="d911026e857 ">
                                       <p><code class="codeph">parsing_schema</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e881 d911026e860 ">
                                       <p>可以编译语句的模式的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e889" headers="d911026e857 ">
                                       <p><code class="codeph">任务名称</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e889 d911026e860 ">
                                       <p>可选的分析任务名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e897" headers="d911026e857 ">
                                       <p><code class="codeph">DBID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e897 d911026e860 ">
                                       <p>导入或<code class="codeph">PDB-level AWR</code>数据的<code class="codeph">DBID</code> 。如果为<code class="codeph">NULL</code> ，则使用当前数据库<code class="codeph">DBID</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e917" headers="d911026e857 ">
                                       <p><code class="codeph">con_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e917 d911026e860 ">
                                       <p>SPA任务的容器。语义取决于函数格式：</p>
                                       <p>对于SQL ID格式，此参数指定数据库从中获取SQL语句以供SPA使用的容器。 SPA将分析此容器中的语句。如果为null，则数据库使用当前PDB进行SPA分析。</p>
                                       <p>对于AWR格式，此参数指定数据库从其AWR数据中获取用于SPA的SQL语句的容器。 SPA将分析此容器中的语句。如果为null，则数据库使用当前PDB进行SPA分析。</p>
                                       <p>以下陈述适用于所有函数格式：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>在非CDB中，将忽略此参数。</p>
                                          </li>
                                          <li>
                                             <p>在PDB中，此参数必须为null或与PDB的容器名称匹配。否则，会发生错误。</p>
                                          </li>
                                          <li>
                                             <p>在CDB根目录中，此参数必须为null或与此CDB中容器的容器名称匹配。否则，会发生错误。</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e941" headers="d911026e857 ">
                                       <p><code class="codeph">描述</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e941 d911026e860 ">
                                       <p>SQL分析任务的说明，最多256个字符</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e949" headers="d911026e857 ">
                                       <p><code class="codeph">SQL_ID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e949 d911026e860 ">
                                       <p>SQL语句的标识符</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e957" headers="d911026e857 ">
                                       <p><code class="codeph">plan_hash_value</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e957 d911026e860 ">
                                       <p>SQL执行计划的哈希值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e965" headers="d911026e857 ">
                                       <p><code class="codeph">begin_snap</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e965 d911026e860 ">
                                       <p>开始快照标识符</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e973" headers="d911026e857 ">
                                       <p><code class="codeph">end_snap</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e973 d911026e860 ">
                                       <p>结束快照标识符</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e982" headers="d911026e857 ">
                                       <p><code class="codeph">sqlset_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e982 d911026e860 ">
                                       <p>SQL调整集名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e990" headers="d911026e857 ">
                                       <p><code class="codeph">basic_filter</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e990 d911026e860 ">
                                       <p>SQL谓词用于从SQL调优集中过滤SQL</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e998" headers="d911026e857 ">
                                       <p><code class="codeph">ORDER_BY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e998 d911026e860 ">
                                       <p>所选SQL的Order-by子句</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1006" headers="d911026e857 ">
                                       <p><code class="codeph">top_sql</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1006 d911026e860 ">
                                       <p>过滤和排名后的前N SQL</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1014" headers="d911026e857 ">
                                       <p><code class="codeph">sqlset_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1014 d911026e860 ">
                                       <p>SQL调优集的所有者，或当前架构所有者的<code class="codeph">NULL</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9C3DB798-3F19-4467-8582-1AAFC32EC655__GUID-FBE8A5BB-C9C6-4841-A96C-2997D01918C8">返回值</p>
                        <p>用户唯一的SQL分析任务名称（两个不同的用户可以为其顾问任务指定相同的名称）。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9C3DB798-3F19-4467-8582-1AAFC32EC655__GUID-0B436275-F8E3-499F-82C7-FA7A998490ED">例子</p><pre class="oac_no_warn" dir="ltr">变量stmt_task VARCHAR2（64）;变量sts_task VARCHAR2（64）; -  Sql文本格式EXEC：stmt_task：= DBMS_SQLPA.CREATE_ANALYSIS_TASK（sql_text =&gt;'从sales s中选择quantity_sold，时间t，其中s.time_id = t.time_id和s.time_id = TO_DATE（'''24-NOV-00'' ）'）; -  Sql id格式（游标缓存）EXEC：stmt_task：= DBMS_SQLPA.CREATE_ANALYSIS_TASK（sql_id =&gt;'ay1m3ssvtrh24'）; - 工作负载存储库格式exec：stmt_task：= DBMS_SQLPA.CREATE_ANALYSIS_TASK（begin_snap =&gt; 1，end_snap =&gt; 2，sql_id =&gt;'ay1m3ssvtrh24'）; -  Sql调整集格式（首先我们需要加载STS，然后分析它）EXEC：sts_task：= DBMS_SQLPA.CREATE_ANALYSIS_TASK（ -  sqlset_name =&gt;'my_workload'， -  order_by =&gt;'BUFFER_GETS'， -  description =&gt;'process缓冲区排序的工作量得到'）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68354"></a><a id="ARPLS68355"></a><a id="ARPLS68355"></a><a id="ARPLS68354"></a><div class="props_rev_3"><a id="GUID-8E2AFE1D-300A-49B5-8AD2-BA26FBD74AEE" name="GUID-8E2AFE1D-300A-49B5-8AD2-BA26FBD74AEE"></a><h4 id="ARPLS-GUID-8E2AFE1D-300A-49B5-8AD2-BA26FBD74AEE" class="sect4"><span class="enumeration_section">160.3.3</span> DROP_ANALYSIS_TASK过程</h4>
                  <div>
                     <p>此过程将删除SQL分析任务。该任务及其所有结果数据将被删除。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-8E2AFE1D-300A-49B5-8AD2-BA26FBD74AEE__GUID-049750D2-B9A4-447A-989D-4F593428B540">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.DROP_ANALYSIS_TASK（task_name IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8E2AFE1D-300A-49B5-8AD2-BA26FBD74AEE__GUID-79930DD2-A607-489A-8CEB-FDBFFDE198EC">参数</p>
                        <div class="tblformal" id="GUID-8E2AFE1D-300A-49B5-8AD2-BA26FBD74AEE__GUID-98722473-9441-4DBC-A308-D23AC3EB74D0">
                           <p class="titleintable">表160-4 DROP_ANALYSIS_TASK过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DROP_ANALYSIS_TASK过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_SQLPA.DROP_TUNING_TASK subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d911026e1144">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d911026e1147">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1152" headers="d911026e1144 ">
                                       <p><code class="codeph">任务名称</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1152 d911026e1147 ">
                                       <p>要删除的分析任务的名称</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68356"></a><a id="ARPLS68357"></a><a id="ARPLS68358"></a><a id="ARPLS68359"></a><a id="ARPLS68360"></a><a id="ARPLS68361"></a><a id="ARPLS68362"></a><a id="ARPLS68357"></a><a id="ARPLS68358"></a><a id="ARPLS68359"></a><a id="ARPLS68360"></a><a id="ARPLS68361"></a><a id="ARPLS68362"></a><a id="ARPLS68356"></a><div class="props_rev_3"><a id="GUID-7A8BB3B0-89B5-49A7-99A8-59AA0F939058" name="GUID-7A8BB3B0-89B5-49A7-99A8-59AA0F939058"></a><h4 id="ARPLS-GUID-7A8BB3B0-89B5-49A7-99A8-59AA0F939058" class="sect4"><span class="enumeration_section">160.3.4</span> EXECUTE_ANALYSIS_TASK功能和过程</h4>
                  <div>
                     <p>此函数和过程执行先前创建的分析任务，函数版本返回新的执行名称。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-7A8BB3B0-89B5-49A7-99A8-59AA0F939058__GUID-C3899DEC-3C8D-4114-B9BE-675ED16B8F45">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.EXECUTE_ANALYSIS_TASK（task_name IN VARCHAR2，execution_type IN VARCHAR2：='test execute'，execution_name IN VARCHAR2：= NULL，execution_params IN dbms_advisor.argList：= NULL，execution_desc IN VARCHAR2：= NULL）RETURN VARCHAR2;</pre><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.EXECUTE_ANALYSIS_TASK（task_name IN VARCHAR2，execution_type IN VARCHAR2：='test execute'，execution_name IN VARCHAR2：= NULL，execution_params IN dbms_advisor.argList：= NULL，execution_desc IN VARCHAR2：= NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7A8BB3B0-89B5-49A7-99A8-59AA0F939058__GUID-09A451B3-AE9E-4B2C-ABB6-606DBB38A2BB">参数</p>
                        <div class="tblformal" id="GUID-7A8BB3B0-89B5-49A7-99A8-59AA0F939058__GUID-230162A8-05B9-49F2-AB3E-23E335EDA6F7">
                           <p class="titleintable">表160-5 EXECUTE_ANALYSIS_TASK函数和过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="EXECUTE_ANALYSIS_TASK函数和过程参数" width="100%" border="1" summary="This table describes the parameters used by the DBMS_SQLPA.EXECUTE_ANALYSIS_TASK subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d911026e1282">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d911026e1285">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1290" headers="d911026e1282 ">
                                       <p><code class="codeph">任务名称</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1290 d911026e1285 ">
                                       <p>要执行的任务的标识符</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1298" headers="d911026e1282 ">
                                       <p><code class="codeph">execution_type</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1298 d911026e1285 ">
                                       <p>该功能要执行的操作的类型。如果为<code class="codeph">NULL</code> ，则默认为<code class="codeph">DEFAULT_EXECUTION_TYPE</code>参数的值。可能的值是：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">[TEST]</code> <code class="codeph">EXECUTE</code> - 测试执行每个SQL语句并收集其执行计划和执行统计信息。生成的计划和统计信息将存储在顾问程序框架中。这是默认值。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code> - 为SQL工作负载中的每个语句生成解释计划。这类似于<code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code>命令。生成的计划将与任务相关联地存储在顾问程序框架中。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">COMPARE</code> <code class="codeph">[PERFORMANCE]</code> - 分析和比较两个版本的SQL性能数据。性能数据是通过测试执行或生成SQL语句的解释计划生成的。当任务中已存在两次<code class="codeph">EXPLAIN_PLAN</code>或<code class="codeph">TEST_EXECUTE</code>类型的执行时，请使用此选项</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">CONVERT SQLSET</code> - 用于读取SQL调优集中捕获的统计信息，并将其建模为任务执行。当您希望避免执行SQL语句时，可以使用此方法，因为实验的有效数据已存在于SQL调整集中。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1354" headers="d911026e1282 ">
                                       <p><code class="codeph">execution_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1354 d911026e1285 ">
                                       <p>用于限定和识别执行的名称。如果未指定，它将由顾问程序生成并由函数返回。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1362" headers="d911026e1282 ">
                                       <p><code class="codeph">execution_params</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1362 d911026e1285 ">
                                       <p>指定执行的参数列表（名称，值）。执行参数仅对指定它们的执行有效。它们将覆盖存储在任务中的参数的值（通过<a href="DBMS_SQLPA.html#GUID-CFE070C1-80F3-4A20-96B0-3B38139338D8" title="此过程设置SQL分析任务参数的默认值。">SET_ANALYSIS_DEFAULT_PARAMETER过程</a>设置）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1377" headers="d911026e1282 ">
                                       <p><code class="codeph">execution_desc</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1377 d911026e1285 ">
                                       <p>描述执行的256长度字符串</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7A8BB3B0-89B5-49A7-99A8-59AA0F939058__GUID-FE18B944-E4C6-4C75-B5B7-F78DE1254D4F">使用说明</p>
                        <p>SQL性能分析器任务可以执行多次，而无需重置它。例如，创建任务以对SQL工作负载执行更改影响分析时，必须先执行创建的任务，然后再对系统环境进行任何更改，以构建将用作性能参考的工作负载版本分析。完成更改后，需要第二次执行才能构建工作负载的更改后版本。最后，必须第三次执行任务，让顾问分析并比较两个版本中工作负载的性能。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7A8BB3B0-89B5-49A7-99A8-59AA0F939058__GUID-7CFE7E17-473D-4BBF-A164-8A5D63ED08EF">例子</p>
                        <p>1。创建一个旨在进行变更影响分析的任务</p><pre class="oac_no_warn" dir="ltr">EXEC：tname：= DBMS_SQLPA.CREATE_ANALYSIS_TASK（sqlset_name =&gt;'my_sts'）;</pre><p>2。制作基线或更改前执行</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SQLPA.EXECUTE_ANALYSIS_TASK（task_name =&gt;：tname，execution_type =&gt;'test execute'，execution_name =&gt;'before_change'）;</pre><p>3。做出改变</p><pre class="oac_no_warn" dir="ltr">...</pre><p>4。制作工作负载性能的更改后版本</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SQLPA.EXECUTE_ANALYSIS_TASK（task_name =&gt;：tname， -  execution_type =&gt;'test execute'，execution_name =&gt;'after_change'）</pre><p>5。比较两个版本的工作负载</p>
                        <p>默认情况下，我们总是比较最后两次执行的结果。SQL Performance Analyzer使用<code class="codeph">elapsed_time</code>作为默认度量标准进行比较。这里我们将其更改为<code class="codeph">buffer_gets</code> 。
                        </p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SQLPA.SET_ANALYSIS_TASK_PARAMETER（：tname，'comparison_metric'，'buffer_gets'）; EXEC DBMS_SQLPA.EXECUTE_ANALYSIS_TASK（task_name =&gt;：tname， -  execution_type =&gt;'compare performance'， -  execution_name =&gt;'after_change'）;</pre><p>如果要显式指定要比较的两个执行以及要使用的比较度量，请使用以下调用。</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SQLPA.EXECUTE_ANALYSIS_TASK（task_name =&gt;：tname， -  execution_type =&gt;'compare performance'，execution_params =&gt; dbms_advisor.arglist（'execution_name1'，'before_change'，'execution_name2'，'after_change'，'comparison_metric'，'buffer_gets' ））;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68363"></a><a id="ARPLS68364"></a><a id="ARPLS68364"></a><a id="ARPLS68363"></a><div class="props_rev_3"><a id="GUID-BE5A3E82-13D5-4046-BA0B-C0A029911C63" name="GUID-BE5A3E82-13D5-4046-BA0B-C0A029911C63"></a><h4 id="ARPLS-GUID-BE5A3E82-13D5-4046-BA0B-C0A029911C63" class="sect4"><span class="enumeration_section">160.3.5</span> INTERRUPT_ANALYSIS_TASK程序</h4>
                  <div>
                     <p>此过程将中断当前正在执行的分析任务。不会从任务中删除所有中间结果数据。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-BE5A3E82-13D5-4046-BA0B-C0A029911C63__GUID-F2621991-F87B-457B-81FB-D9CF7E28FE01">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.INTERRUPT_ANALYSIS_TASK（task_name IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BE5A3E82-13D5-4046-BA0B-C0A029911C63__GUID-69242DFE-EBBC-447B-A321-AE1D77C29F0F">参数</p>
                        <div class="tblformal" id="GUID-BE5A3E82-13D5-4046-BA0B-C0A029911C63__GUID-2E416B00-C10A-41AF-A1A4-4A15F03C40C7">
                           <p class="titleintable">表160-6 INTERRUPT_ANALYSIS_TASK过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="INTERRUPT_ANALYSIS_TASK过程参数" width="100%" border="1" summary="This table describes the parameters used by the DBMS_SQLPA.INTERRUPT_ANALYSIS_TASK subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d911026e1536">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d911026e1539">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1544" headers="d911026e1536 ">
                                       <p><code class="codeph">任务名称</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1544 d911026e1539 ">
                                       <p>要中断的分析任务的标识符</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-BE5A3E82-13D5-4046-BA0B-C0A029911C63__GUID-0E2AA1EC-DFF1-4F2D-9029-45796DDBD001">例子</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SQLPA.INTERRUPT_ANALYSIS_TASK（：my_task）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68365"></a><a id="ARPLS68366"></a><a id="ARPLS68366"></a><a id="ARPLS68365"></a><div class="props_rev_3"><a id="GUID-8524B515-E14F-4F76-9458-F2E579D5A08B" name="GUID-8524B515-E14F-4F76-9458-F2E579D5A08B"></a><h4 id="ARPLS-GUID-8524B515-E14F-4F76-9458-F2E579D5A08B" class="sect4"><span class="enumeration_section">160.3.6</span> REPORT_ANALYSIS_TASK功能</h4>
                  <div>
                     <p>此过程显示分析任务的结果。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-8524B515-E14F-4F76-9458-F2E579D5A08B__GUID-855FA38B-CB63-462B-809E-F18996BD8DCC">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.REPORT_ANALYSIS_TASK（task_name IN VARCHAR2，输入IN VARCHAR2：='TEXT'，级别IN VARCHAR2：='TYPICAL'，部分IN VARCHAR2：='SUMMARY'，object_id IN NUMBER：= NULL，top_sql IN NUMBER：= 100，execution_name IN VARCHAR2：= NULL，task_owner IN VARCHAR2：= NULL，order_by IN VARCHAR2：= NULL）RETURN CLOB;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8524B515-E14F-4F76-9458-F2E579D5A08B__GUID-6B965F29-D226-4D73-91E8-44FEA041DAFE">参数</p>
                        <div class="tblformal" id="GUID-8524B515-E14F-4F76-9458-F2E579D5A08B__GUID-3BF7830F-2A69-4F29-8B9D-3D78DCDFDC61">
                           <p class="titleintable">表160-7 REPORT_ANALYSIS_TASK函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REPORT_ANALYSIS_TASK函数参数" width="100%" border="1" summary="This table describes the parameters used by the DBMS_SQLPA.REPORT_ANALYSIS_TASK subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d911026e1666">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d911026e1669">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1674" headers="d911026e1666 ">
                                       <p><code class="codeph">任务名称</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1674 d911026e1669 ">
                                       <p>要报告的任务的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1682" headers="d911026e1666 ">
                                       <p><code class="codeph">类型</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1682 d911026e1669 ">
                                       <p>要生成的报告的类型。可能的值为<code class="codeph">TEXT</code> （默认）， <code class="codeph">HTML</code> ， <code class="codeph">XML</code>和<code class="codeph">ACTIVE</code> （请参阅使用说明）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1702" headers="d911026e1666 ">
                                       <p><code class="codeph">水平</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1702 d911026e1669 ">
                                       <p>报告中的详细程度：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">ALL</code> - 所有SQL的详细信息</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">BASIC</code> - 目前与典型相同</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">CHANGED</code> - 仅具有更改性能的SQL</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">CHANGED_PLANS</code> - 仅包含计划更改的SQL</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ERRORS</code> - 仅包含错误的SQL</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">IMPROVED</code> - 只改进了SQL</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">REGRESSED</code> - 只回归SQL</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TIMEOUT</code> - 仅在执行期间超时的SQL</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TYPICAL</code> （默认） - 显示有关所分析的每个语句的信息，包括更改和错误</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">UNCHANGED</code> - 只有性能不变的SQL</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">UNCHANGED_PLANS</code> - 仅包含未更改计划的SQL</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">UNSUPPORTED</code> - 仅SPA不支持SQL</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1772" headers="d911026e1666 ">
                                       <p><code class="codeph">部分</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1772 d911026e1669 ">
                                       <p>（可选）将报告限制为单个部分（所有部分均为<code class="codeph">ALL</code> ）：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">SUMMARY</code> （默认） - 仅限工作负载摘要</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code> - 关于SQL的摘要和详细信息</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1794" headers="d911026e1666 ">
                                       <p><code class="codeph">OBJECT_ID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1794 d911026e1669 ">
                                       <p>表示调优集（STS）中给定SQL的顾问程序框架对象的标识符</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1802" headers="d911026e1666 ">
                                       <p><code class="codeph">top_sql</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1802 d911026e1669 ">
                                       <p>生成报告的STS中的SQL语句数</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1810" headers="d911026e1666 ">
                                       <p><code class="codeph">execution_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1810 d911026e1669 ">
                                       <p>要使用的任务执行的名称。如果为<code class="codeph">NULL</code> ，则将为上次执行任务生成报告。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1821" headers="d911026e1666 ">
                                       <p><code class="codeph">task_owner</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1821 d911026e1669 ">
                                       <p>相关分析任务的所有者。默认为当前架构所有者。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e1829" headers="d911026e1666 ">
                                       <p><code class="codeph">ORDER_BY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e1829 d911026e1669 ">
                                       <p>如何在报表中对SQL语句进行排序（摘要和正文）。可能的值：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">CHANGE_DIFF</code> - 根据比较度量标准，通过SQL性能的变化差异对SQL语句进行排序</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">NULL</code> （默认值） - 通过影响工作负载来排序SQL语句</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SQL_IMPACT</code> - 通过更改对SQL的影响来排序SQL语句</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">WORKLOAD_IMPACT</code> - 与<code class="codeph">NULL</code>相同</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">METRIC_DELTA</code> - 与<code class="codeph">CHANGE_DIFF</code>相同</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8524B515-E14F-4F76-9458-F2E579D5A08B__GUID-A86FA6C0-D33F-47B0-85F2-9E42412B9D09">返回值</p>
                        <p>包含所需报告的<code class="codeph">CLOB</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8524B515-E14F-4F76-9458-F2E579D5A08B__GUID-5656B555-4504-4225-80F0-34F2B8C74886">使用说明</p>
                        <p><code class="codeph">ACTIVE</code>报告具有类似于Enterprise Manager的丰富交互式用户界面，而不需要任何EM安装。构建的报告文件是<code class="codeph">HTML</code>格式，因此大多数现代浏览器都可以解释它。首次查看报告时，Web浏览器会透明地下载为活动报告供电的代码，因此查看它需要外部连接。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8524B515-E14F-4F76-9458-F2E579D5A08B__GUID-735CB16F-CF2A-444E-822E-C352AFDB184C">例子</p><pre class="oac_no_warn" dir="ltr">- 获取单一陈述案例的整个报告。从双重中选择DBMS_SQLPA.REPORT_ANALYSIS_TASK（：stmt_task）; - 显示sts案例的摘要。SELECT DBMS_SQLPA.REPORT_ANALYSIS_TASK（：sts_task，'TEXT'，'TYPICAL'，'SUMMARY'）FROM DUAL; - 告诉我对我感兴趣的陈述的调查结果。从双重中选择DBMS_SQLPA.REPORT_ANALYSIS_TASK（：sts_task，'TEXT'，'TYPICAL'，'ALL'，5）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68367"></a><a id="ARPLS68368"></a><a id="ARPLS68368"></a><a id="ARPLS68367"></a><div class="props_rev_3"><a id="GUID-AAC78840-3899-479E-BA89-D5688A118244" name="GUID-AAC78840-3899-479E-BA89-D5688A118244"></a><h4 id="ARPLS-GUID-AAC78840-3899-479E-BA89-D5688A118244" class="sect4"><span class="enumeration_section">160.3.7</span> RESET_ANALYSIS_TASK程序</h4>
                  <div>
                     <p>在当前未执行的分析任务上调用此过程以准备重新执行。</p>
                     <div class="section">
                        <p>将删除所有中间结果数据。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AAC78840-3899-479E-BA89-D5688A118244__GUID-797F1B97-87DA-458C-AC83-D2D55547210A">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.RESET_ANALYSIS_TASK（task_name IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AAC78840-3899-479E-BA89-D5688A118244__GUID-91B7BE5A-A98F-4BA4-9671-59D45105FD57">参数</p>
                        <div class="tblformal" id="GUID-AAC78840-3899-479E-BA89-D5688A118244__GUID-4487F3DB-8C14-439F-9C29-96C89D1BFC34">
                           <p class="titleintable">表160-8 RESET_ANALYSIS_TASK过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="RESET_ANALYSIS_TASK过程参数" width="100%" border="1" summary="This table describes the parameters used by the DBMS_SQLPA.RESET_ANALYSIS_TASK subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d911026e2002">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d911026e2005">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e2010" headers="d911026e2002 ">
                                       <p><code class="codeph">任务名称</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e2010 d911026e2005 ">
                                       <p>要重置的分析任务的标识符</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AAC78840-3899-479E-BA89-D5688A118244__GUID-0D8BCA69-7C69-43B3-A3F8-5D872836A162">例子</p><pre class="oac_no_warn" dir="ltr">- 重置并重新执行任务EXEC DBMS_SQLPA.RESET_ANALYSIS_TASK（：sts_task）; - 重新执行任务EXEC DBMS_SQLPA.EXECUTE_ANALYSIS_TASK（：sts_task）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68369"></a><a id="ARPLS68370"></a><a id="ARPLS68370"></a><a id="ARPLS68369"></a><div class="props_rev_3"><a id="GUID-DA06D2F1-EFFC-4C50-A607-887FAE238878" name="GUID-DA06D2F1-EFFC-4C50-A607-887FAE238878"></a><h4 id="ARPLS-GUID-DA06D2F1-EFFC-4C50-A607-887FAE238878" class="sect4"><span class="enumeration_section">160.3.8</span> RESUME_ANALYSIS_TASK程序</h4>
                  <div>
                     <p>此过程恢复先前中断或<code class="codeph">FAILED</code> （有致命错误）任务执行。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DA06D2F1-EFFC-4C50-A607-887FAE238878__GUID-23222FEB-6143-4252-AC3E-1943D0230CE4">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.RESUME_ANALYSIS_TASK（task_name IN VARCHAR2，basic_filter IN VARCHAR2：= NULL）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DA06D2F1-EFFC-4C50-A607-887FAE238878__GUID-C4459150-D4F7-4B2C-A7B3-8C1FBD48F658">参数</p>
                        <div class="tblformal" id="GUID-DA06D2F1-EFFC-4C50-A607-887FAE238878__GUID-FEF1B95E-2319-44B9-9E8B-5A3DE8DF3408">
                           <p class="titleintable">表160-9 RESUME_ANALYSIS_TASK过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="RESUME_ANALYSIS_TASK过程参数" width="100%" border="1" summary="This table describes the parameters used by the DBMS_SQLPA.RESUME_ANALYSIS_TASK subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d911026e2136">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d911026e2139">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e2144" headers="d911026e2136 ">
                                       <p><code class="codeph">任务名称</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e2144 d911026e2139 ">
                                       <p>要恢复的分析任务的标识符</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e2152" headers="d911026e2136 ">
                                       <p><code class="codeph">basic_filter</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e2152 d911026e2139 ">
                                       <p>用于从SQL调优集中过滤SQL的SQL谓词。请注意，此过滤器将与调用<a href="DBMS_SQLPA.html#GUID-9C3DB798-3F19-4467-8582-1AAFC32EC655" title="这些函数创建一个顾问程序任务来处理和分析一个或多个SQL语句。">CREATE_ANALYSIS_TASK函数</a>时指定的基本过滤器（参数<code class="codeph">basic_filter</code> ）一起应用。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DA06D2F1-EFFC-4C50-A607-887FAE238878__GUID-24F0A25B-8FF6-4805-968D-6EA3756A60FC">使用说明</p>
                        <p>不支持恢复单个SQL分析任务（创建用于分析单个SQL语句与SQL调整集相比的任务）。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DA06D2F1-EFFC-4C50-A607-887FAE238878__GUID-BA88BF06-388D-4CB3-91D1-0E804C0011C7">例子</p><pre class="oac_no_warn" dir="ltr">- 中断任务EXEC DBMS_SQLPA.INTERRUPT_ANALYSIS_TASK（：conc_task）; - 一旦任务中断，我们可以选择重置，恢复或检查结果，然后决定。对于这个例子，我们将恢复。EXEC DBMS_SQLPA.RESUME_ANALYSIS_TASK（：conc_task）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68371"></a><a id="ARPLS68372"></a><a id="ARPLS68372"></a><a id="ARPLS68371"></a><div class="props_rev_3"><a id="GUID-24792620-7642-48DA-9154-37D10AE58AC2" name="GUID-24792620-7642-48DA-9154-37D10AE58AC2"></a><h4 id="ARPLS-GUID-24792620-7642-48DA-9154-37D10AE58AC2" class="sect4"><span class="enumeration_section">160.3.9</span> SET_ANALYSIS_TASK_PARAMETER程序</h4>
                  <div>
                     <p>此过程设置SQL分析任务参数值。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-24792620-7642-48DA-9154-37D10AE58AC2__GUID-A39BF69B-F174-4D7E-B9DB-DB03BDE799F3">句法</p>
                        <p>此过程形式更新<code class="codeph">VARCHAR2</code>类型的SQL分析参数的值。
                        </p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.SET_ANALYSIS_TASK_PARAMETER（task_name IN VARCHAR2，参数IN VARCHAR2，值IN VARCHAR2，test_execute_dop IN NUMBER DEFAULT 0，compare_resultset IN BOOLEAN DEFAULT TRUE）;</pre><p>此过程形式更新<code class="codeph">NUMBER</code>类型的SQL分析参数的值。</p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.SET_ANALYSIS_TASK_PARAMETER（task_name IN VARCHAR2，参数IN VARCHAR2，值IN NUMBER test_execute_dop IN NUMBER DEFAULT 0，compare_resultset IN BOOLEAN DEFAULT TRUE）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-24792620-7642-48DA-9154-37D10AE58AC2__GUID-B51B8919-A176-4E3E-BAB6-437858EB82A2">参数</p>
                        <div class="tblformal" id="GUID-24792620-7642-48DA-9154-37D10AE58AC2__GUID-7E219FE3-09A6-4EBE-835E-BC43BCC71FE8">
                           <p class="titleintable">表160-10 SET_ANALYSIS_TASK_PARAMETER过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SET_ANALYSIS_TASK_PARAMETER过程参数" width="100%" border="1" summary="This table describes the parameters used by the DBMS_SQLPA.SET_ANALYSIS_TASK_PARAMETER subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d911026e2301">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d911026e2304">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e2309" headers="d911026e2301 ">
                                       <p><code class="codeph">任务名称</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e2309 d911026e2304 ">
                                       <p>要执行的任务的标识符</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e2317" headers="d911026e2301 ">
                                       <p><code class="codeph">参数</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e2317 d911026e2304 ">
                                       <p>要设置的参数的名称。可以通过此过程设置的可能分析参数是：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">APPLY_CAPTURED_COMPILENV</code> ：指示顾问程序是否可以使用SQL语句捕获的编译环境。默认值为0（即<code class="codeph">NO</code> ）。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">BASIC_FILTER</code> ：SQL调优集的基本过滤器</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">CELL_SIMULATION_ENABLED</code> ：有关更多详细信息，请参阅<code class="codeph">ADMIN</code>目录中的帮助程序脚本<code class="codeph">tcellsim.sql</code> 。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">COMPARISON_METRIC</code> ：指定要在性能比较中使用的执行统计信息的表达式（示例： <code class="codeph">buffer_gets</code> ， <code class="codeph">cpu_time</code> + <code class="codeph">buffer_gets</code> * 10）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DATABASE_LINK</code> ：可以设置为<code class="codeph">PUBLIC</code>数据库链接的全局名称。设置后，SQL Performance Analyzer将通过将SQL语句发送到远程数据库进行远程处理，将数据库链接用于所有<code class="codeph">TEST EXECUTE</code>和<code class="codeph">EXPLAIN PLAN</code>操作。分析结果仍将存储在本地数据库中。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DAYS_TO_EXPIRE</code> ：删除任务之前的天数</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DEFAULT_EXECUTION_TYPE</code> ：当<a href="DBMS_SQLPA.html#GUID-7A8BB3B0-89B5-49A7-99A8-59AA0F939058" title="此函数和过程执行先前创建的分析任务，函数版本返回新的执行名称。">EXECUTE_ANALYSIS_TASK函数和过程</a>未指定任何任务时，任务将默认为此类执行。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e2395" headers="d911026e2301 ">
                                       <p><code class="codeph">parameter</code> （续）
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e2395 d911026e2304 ">
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">DISABLE_MULTI_EXEC</code> ：多次执行SQL语句，然后对运行时统计信息求平均值。将此参数设置为<code class="codeph">TRUE</code>可禁用此功能。在这种情况下，SQL调优集中的每个SQL只执行一次。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">EXECUTE_TRIGGERS</code> ：将此参数设置为<code class="codeph">TRUE</code>以在FULLDML模式下执行所有语句级触发器。如果参数设置为<code class="codeph">FALSE</code> ，则即使在测试执行的FULLDML模式下也不会执行触发器。由于可能执行触发器而导致的任何更改始终由SPA回滚。此参数的默认值为<code class="codeph">FALSE</code> 。</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">EXECUTION_DAYS_TO_EXPIRE</code> ：删除任务执行前的天数（不删除任务）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">EXECUTE_FULLDML</code> ： <code class="codeph">TRUE</code>完全执行DML语句，包括获取行锁和修改行; <code class="codeph">FALSE</code> （默认值）仅执行DML的查询部分而不修改数据。如果为<code class="codeph">TRUE</code> ，SQL Performance Analyzer将在DML执行后发出回滚，以防止DML进行持久更改。</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">EXECUTION_NAME1</code> ：要分析的第一个任务执行的名称</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">EXECUTION_NAME2</code> ：要分析的第二个任务执行的名称</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">LOCAL_TIME_LIMIT</code> ：每语句超时（秒）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">METRIC_DELTA_THRESHOLD</code> ：更改前后SQL性能指标之间差异的阈值。默认值为零。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">NUM_ROWS_TO_FETCH</code> ：指定要为SQL查询提取的行数。您可以使用以下值之一：</p>
                                             <ul style="list-style-type:disc">
                                                <li>
                                                   <p><code class="codeph">ALL_ROWS</code> ：获取SQL查询的所有行</p>
                                                </li>
                                                <li>
                                                   <p><code class="codeph">AVERAGE</code> ：结果行数计算为STS中每个SQL处理的总行数与总执行次数之比</p>
                                                </li>
                                                <li>
                                                   <p><code class="codeph">AUTO</code> ：结果行数使用STS中捕获的优化器环境的<code class="codeph">optimizer_mode</code>参数值确定。如果<code class="codeph">optimizer_mode</code>值为<code class="codeph">ALL_ROWS</code> ，则将获取所有结果行。如果其值为<code class="codeph">FIRST_ROWS_n</code> ，则SPA将获取<code class="codeph">n</code>结果行。</p>
                                                </li>
                                                <li>
                                                   <p><code class="codeph">A valid number</code> ：获取SQL查询中指定的确切行数</p>
                                                </li>
                                             </ul>
                                             <p>默认值为<code class="codeph">ALL_ROWS</code> 。</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PLAN_FILTER</code> ：SQL调优集的计划过滤器（有关可能的值，请参阅<code class="codeph">SELECT_SQLSET</code> ）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PLAN_LINES_COMPARISON</code> ：</p>
                                             <p>- <code class="codeph">ALWAYS</code> - 在所有情况下逐行比较计划<code class="codeph">phv2</code> <code class="codeph">AUTO</code> -Line by line比较计划仅当<code class="codeph">phv2</code>不可用且<code class="codeph">phv1</code>不同时 - <code class="codeph">NONE</code> （默认） - 仅当<code class="codeph">phv</code>未知时逐行比较计划</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">RANK_MEASURE1</code> ：SQL调优集的第一个排名度量</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">RANK_MEASURE2</code> ：SQL调优集的第二种可能的排名度量</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">RANK_MEASURE3</code> ：SQL调优集的第三种可能的排名度量</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">REPLACE_SYSDATE_WITH</code> ：返回SPA任务执行中对<code class="codeph">SYSDATE</code>所有调用的固定日期。您可以使用以下值之一：</p>
                                             <ul style="list-style-type:disc">
                                                <li>
                                                   <p><code class="codeph">CURRENT_SYSDATE</code> ： <code class="codeph">SYSDATE</code>调用返回当前日期。
                                                   </p>
                                                </li>
                                                <li>
                                                   <p><code class="codeph">SQLSET_SYSDATE</code> ： <code class="codeph">SYSDATE</code>调用返回STS中列<code class="codeph">LAST_EXEC_START_TIME</code>的值</p>
                                                </li>
                                             </ul>
                                             <p>默认值为<code class="codeph">CURRENT_SYSDATE</code> 。</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">RESUME_FILTER</code> ：除<code class="codeph">BASIC_FILTER</code>之外的SQL调优集的额外过滤器</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SQL_IMPACT_THRESHOLD</code> ：对SQL语句的更改影响的阈值。与上一个参数相同，但在SQL语句的级别。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SQL_LIMIT</code> ：要处理的最大SQL语句数</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SQL_PERCENTAGE</code> ：SQL调优集语句的百分比过滤器</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SQLSET_NAME</code> ：要与指定任务或任务执行关联的SQL调整集的名称。此参数主要用于比较使用SPA的两个SQL调优集。</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SQLSET_OWNER</code> ：使用任务参数<code class="codeph">SQLSET_NAME</code>指定的SQL调优集的<code class="codeph">SQLSET_NAME</code> 。</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TIME_LIMIT</code> ：全球超时（秒）</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e2633" headers="d911026e2301 ">
                                       <p><code class="codeph">parameter</code> （续）
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e2633 d911026e2304 ">
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">WORKLOAD_IMPACT_THRESHOLD</code> ：SQL语句对工作负载影响的阈值。工作量变化影响低于此阈值绝对值的陈述将被忽略，不予考虑改进或回归。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">CON_DBID_MAPPING</code> ：提供多租户容器数据库（CDB）ID的映射。设置后，SQL Performance Analyzer会在找到旧CDB ID的匹配项时使用新的CDB ID，并在该容器中执行SQL。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e2651" headers="d911026e2301 ">
                                       <p><code class="codeph">值</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e2651 d911026e2304 ">
                                       <p>指定参数的新值</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e2659" headers="d911026e2301 ">
                                       <p><code class="codeph">test_execute_dop</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e2659 d911026e2304 ">
                                       <p>指定应执行SPA任务的请求的并发级别。</p>
                                       <p>值<code class="codeph">0</code>或<code class="codeph">1</code>表示SPA任务将在没有其他进程的情况下运行，因为它在<code class="codeph">Oracle Database 18c Release</code>版之前的版本中运行。值<code class="codeph">n</code> （大于1）表示正在请求<code class="codeph">n</code>后台SPA进程同时处理输入工作负载。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e2684" headers="d911026e2301 ">
                                       <p><code class="codeph">compare_resultset</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e2684 d911026e2304 ">
                                       <p>指示SPA检测被比较的两个试验之间的结果集是否不同。如果在比较的两个试验之间的任何SQL语句的结果集中看到差异，则SPA比较报告将为每个此类SQL语句指示此情况。</p>
                                       <div class="p">
                                          <ul style="list-style-type:disc">
                                             <li>
                                                <p>如果设置为<code class="codeph">TRUE</code> ，则将执行结果集比较</p>
                                             </li>
                                             <li>
                                                <p>如果设置为<code class="codeph">FALSE</code>则不会执行结果集比较。
                                                </p>
                                             </li>
                                          </ul>
                                       </div>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-24792620-7642-48DA-9154-37D10AE58AC2__GUID-C947C93F-BD56-45FD-9F55-068523284B66">使用说明</p>
                        <p>授予的实际进程数可能等于或低于使用<code class="codeph">test_execute_dop</code>参数请求的数量。此参数仅适用于处理SQL调整集的<code class="codeph">test-execute</code>或<code class="codeph">explain plan type</code>的试验。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-24792620-7642-48DA-9154-37D10AE58AC2__GUID-8E149226-3121-427F-B062-B5796A1BD613">例子</p>
                        <p>要请求两个并发进程来执行SPA任务：</p><pre class="pre codeblock"><code>dbms_sqlpa.set_analysis_task_parameter（：TNAME， 'TEST_EXECUTE_DOP'，2）</code></pre><p>启用结果集验证</p><pre class="pre codeblock"><code>exec dbms_sqlpa.set_analysis_task_parameter（：atname，'COMPARE_RESULTSET'，'TRUE'）</code></pre><p>要禁用结果集验证：</p><pre class="pre codeblock"><code>exec dbms_sqlpa.set_analysis_task_parameter（：atname，'COMPARE_RESULTSET'，'FALSE'）</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS68373"></a><a id="ARPLS68374"></a><a id="ARPLS68374"></a><a id="ARPLS68373"></a><div class="props_rev_3"><a id="GUID-CFE070C1-80F3-4A20-96B0-3B38139338D8" name="GUID-CFE070C1-80F3-4A20-96B0-3B38139338D8"></a><h4 id="ARPLS-GUID-CFE070C1-80F3-4A20-96B0-3B38139338D8" class="sect4"><span class="enumeration_section">160.3.10</span> SET_ANALYSIS_DEFAULT_PARAMETER过程</h4>
                  <div>
                     <p>此过程设置SQL分析任务参数的默认值。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-CFE070C1-80F3-4A20-96B0-3B38139338D8__GUID-BF94953D-4727-4934-BF45-8984C176834A">句法</p>
                        <p>此过程形式更新<code class="codeph">VARCHAR2</code>类型的分析器参数的默认值。
                        </p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.SET_ANALYSIS_DEFAULT_PARAMETER（参数IN VARCHAR2，值IN VARCHAR2）;</pre><p>此过程形式更新<code class="codeph">NUMBER</code>类型的分析器参数的<code class="codeph">default</code>值。</p><pre class="oac_no_warn" dir="ltr">DBMS_SQLPA.SET_ANALYSIS_DEFAULT_PARAMETER（参数IN VARCHAR2，值IN NUMBER）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CFE070C1-80F3-4A20-96B0-3B38139338D8__GUID-DFA56151-71B6-41B3-A4C6-EEF6CEC2666F">参数</p>
                        <div class="tblformal" id="GUID-CFE070C1-80F3-4A20-96B0-3B38139338D8__GUID-4E604043-CCB2-46AF-8524-F5A81CBE7AF7">
                           <p class="titleintable">表160-11 SET_ANALYSIS_DEFAULT_PARAMETER过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SET_ANALYSIS_DEFAULT_PARAMETER过程参数" width="100%" border="1" summary="This table describes Parameters used by the DBMS_SQLPA.SET_ANALYSIS_DEFAULT_PARAMETER subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d911026e2859">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d911026e2862">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e2867" headers="d911026e2859 ">
                                       <p><code class="codeph">参数</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e2867 d911026e2862 ">
                                       <p>要设置的参数的名称。可以通过此过程设置的可能分析参数是：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">APPLY_CAPTURED_COMPILENV</code> ：指示顾问程序是否可以使用SQL语句捕获的编译环境。默认值为0（即<code class="codeph">NO</code> ）。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">BASIC_FILTER</code> ：SQL调优集的基本过滤器</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">COMPARISON_METRIC</code> ：指定要在性能比较中使用的执行统计信息的表达式（示例： <code class="codeph">buffer_gets</code> ， <code class="codeph">cpu_time</code> + <code class="codeph">buffer_gets</code> * 10）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DATABASE_LINK</code> ：可以设置为<code class="codeph">PUBLIC</code>数据库链接的全局名称。设置后，SQL Performance Analyzer将通过将SQL语句发送到远程数据库进行远程处理，将数据库链接用于所有<code class="codeph">TEST EXECUTE</code>和<code class="codeph">EXPLAIN PLAN</code>操作。分析结果仍将存储在本地数据库中。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DAYS_TO_EXPIRE</code> ：删除任务之前的天数</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DEFAULT_EXECUTION_TYPE</code> ：当<a href="DBMS_SQLPA.html#GUID-7A8BB3B0-89B5-49A7-99A8-59AA0F939058" title="此函数和过程执行先前创建的分析任务，函数版本返回新的执行名称。">EXECUTE_ANALYSIS_TASK函数和过程</a>未指定任何任务时，任务将默认为此类执行。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">EXECUTE_FULLDML</code> ： <code class="codeph">TRUE</code>完全执行DML语句，包括获取行锁和修改行; <code class="codeph">FALSE</code> （默认值）仅执行DML的查询部分而不修改数据。如果为<code class="codeph">TRUE</code> ，SQL Performance Analyzer将在DML执行后发出回滚，以防止DML进行持久更改。</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">EXECUTION_DAYS_TO_EXPIRE</code> ：删除任务执行前的天数（不删除任务）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">EXECUTION_NAME1</code> ：要分析的第一个任务执行的名称</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">EXECUTION_NAME2</code> ：要分析的第二个任务执行的名称</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">LOCAL_TIME_LIMIT</code> ：每语句超时（秒）</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e2968" headers="d911026e2859 ">
                                       <p><code class="codeph">parameter</code> （续）
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e2968 d911026e2862 ">
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">PLAN_FILTER</code> ：SQL调优集的计划过滤器（有关可能的值，请参阅<code class="codeph">SELECT_SQLSET</code> ）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">RANK_MEASURE1</code> ：SQL调优集的第一个排名度量</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">RANK_MEASURE2</code> ：SQL调优集的第二种可能的排名度量</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">RANK_MEASURE3</code> ：SQL调优集的第三种可能的排名度量</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">RESUME_FILTER</code> ：除<code class="codeph">BASIC_FILTER</code>之外的SQL调优集的额外过滤器</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SQL_IMPACT_THRESHOLD</code> ：对SQL语句的更改影响的阈值。与上一个参数相同，但在SQL语句的级别。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SQL_LIMIT</code> ：要处理的最大SQL语句数</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SQL_PERCENTAGE</code> ：SQL调优集语句的百分比过滤器</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">TIME_LIMIT</code> ：全球超时（秒）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">WORKLOAD_IMPACT_THRESHOLD</code> ：SQL语句对工作负载影响的阈值。工作量变化影响低于此阈值绝对值的陈述将被忽略，不予考虑改进或回归。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d911026e3031" headers="d911026e2859 ">
                                       <p><code class="codeph">值</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d911026e3031 d911026e2862 ">
                                       <p>指定参数的新值</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>在Typeids或Attributes上创建索引</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Object-Relational Developer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Object-Relational Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="object-relational-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T02:05:10-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96436-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="storage-of-objects.html" title="Previous" type="text/html"></link>
      <link rel="next" href="type-evolution.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Object-Relational Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADOBJ"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="storage-of-objects.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="type-evolution.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">对象关系开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="advanced-topics-for-oracle-objects.html" property="item" typeof="WebPage"><span property="name">Oracle Objects的高级主题</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">在Typeids或Attributes上创建索引</li>
            </ol>
            <a id="GUID-E69D6B19-7B41-4046-A621-B80C67736AA0" name="GUID-E69D6B19-7B41-4046-A621-B80C67736AA0"></a><a id="ADOBJ00602"></a>
            
            <h2 id="ADOBJ-GUID-E69D6B19-7B41-4046-A621-B80C67736AA0" class="sect2"><span class="enumeration_section">8.2</span>在Typeids或Attributes上创建索引</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以在typeids和属性上使用索引。</p>
               <p>话题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="creating-indexes-on-typeids-or-attributes.html#GUID-CDFA40C2-7287-4C79-A6CA-343E37DFBC8E">索引类型判别列</a></p>
                  </li>
                  <li>
                     <p><a href="creating-indexes-on-typeids-or-attributes.html#GUID-F00D8D8B-3B41-417E-8688-B5409DE5C823" title="您可以为可以存储在可替换列中的任何类型的属性构建索引。">索引可替换列的子类型属性</a></p>
                  </li>
               </ul>
            </div><a id="ADOBJ7655"></a><a id="ADOBJ7396"></a><div class="props_rev_3"><a id="GUID-CDFA40C2-7287-4C79-A6CA-343E37DFBC8E" name="GUID-CDFA40C2-7287-4C79-A6CA-343E37DFBC8E"></a><h3 id="ADOBJ-GUID-CDFA40C2-7287-4C79-A6CA-343E37DFBC8E" class="sect3"><span class="enumeration_section">8.2.1</span>索引类型判别列</h3>
               <div>
                  <div class="section">
                     <p>使用<code class="codeph">SYS_TYPEID</code>函数，可以在可替换列的隐藏类型判别列上构建索引。类型判别列包含typeid，用于标识存储在可替换列中的每个对象实例的最特定类型。
                     </p>
                     <p>系统使用此信息来评估使用<code class="codeph">IS OF</code>谓词按类型过滤的查询，但您可以使用<code class="codeph">SYS_TYPEID</code>函数访问typeid以用于您自己的目的。
                     </p>
                     <p>通常，类型判别列仅包含少量不同的类型：最多只能存在与相关类型层次结构中的类型一样多的类型。此列的低基数使其成为位图索引的良好候选者。</p>
                     <p>例如，以下语句在表<code class="codeph">contacts</code>的可替换<code class="codeph">contact</code>列的基础上的类型判别列上创建位图索引。函数<code class="codeph">SYS_TYPEID</code>引用类型判别列：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-CDFA40C2-7287-4C79-A6CA-343E37DFBC8E__GUID-E8F50491-3026-477D-A58D-4D75CF1EE58E">
                     <p class="titleinexample">示例8-3在类型判别列上创建位图索引</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。8-1 CREATE TABLE联系人（联系人person_typ，contact_date DATE）; INSERT INTO联系VALUES（person_typ（65，'Vrinda Mills'，'1-650-555-0125'），'2003年6月24日'）; INSERT INTO联系人VALUES（person_typ（12，'Bob Jones'，'650-555-0130'），'2003年6月24日'）; INSERT INTO联系人VALUES（student_typ（51，'Joe Lane'，'1-650-555-0140'，12，'HISTORY'），'2003年6月24日'）; INSERT INTO联系VALUES（part_time_student_typ（52，'Kim Patel'，'1-650-555-0135'，14，'PHYSICS'，20），'2003年6月24日'）; <span class="bold">CREATE BITMAP INDEX</span> typeid_idx ON联系人（ <span class="bold">SYS_TYPEID</span> （联系人））;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7656"></a><a id="ADOBJ7397"></a><div class="props_rev_3"><a id="GUID-F00D8D8B-3B41-417E-8688-B5409DE5C823" name="GUID-F00D8D8B-3B41-417E-8688-B5409DE5C823"></a><h3 id="ADOBJ-GUID-F00D8D8B-3B41-417E-8688-B5409DE5C823" class="sect3"><span class="enumeration_section">8.2.2</span>索引可替换列的子类型属性</h3>
               <div>
                  <p>您可以为可以存储在可替换列中的任何类型的属性构建索引。</p>
                  <div class="section">
                     <p>您可以使用<code class="codeph">TREAT</code>函数过滤掉所需子类型（及其子类型）以外的类型，从而在<code class="codeph">CREATE INDEX</code>语句中引用子类型的属性;然后使用点表示法指定所需的属性。
                     </p>
                     <p>例如，以下语句在<code class="codeph">contacts</code>表中的所有学生的<code class="codeph">major</code>属性上创建索引。<code class="codeph">contact</code>列的声明类型是<code class="codeph">person_typ</code> ，其中<code class="codeph">student_typ</code>是子类型，因此该列可能包含<code class="codeph">person_typ</code> ， <code class="codeph">student_typ</code>和其中任何一个的子类型的实例：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-F00D8D8B-3B41-417E-8688-B5409DE5C823__GUID-CA49D4B1-2AC1-448C-8B7A-DF0B59AA9E1B">
                     <p class="titleinexample">示例8-4为所有学生的属性创建索引</p><pre class="oac_no_warn" dir="ltr">-需要Ex.8-1-和8-3 <span class="bold">CREATE INDEX</span> major1_idx上的联系人（TREAT（接触AS student_typ） <span class="bold">专业</span> 。）;</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <p><code class="codeph">student_typ</code>类型首先定义了<code class="codeph">major</code>属性： <code class="codeph">person_typ</code>超类型没有它。因此， <code class="codeph">major</code>属性的隐藏列中的所有值都是<code class="codeph">student_typ</code>类型或<code class="codeph">parttimestudent_typ</code> （ <code class="codeph">student_typ</code>子类型）的人员的值。这意味着隐藏列的值与<code class="codeph">TREAT</code>表达式返回的值相同，即所有学生的<code class="codeph">major</code>值，包括学生子类型：学生的隐藏列和<code class="codeph">TREAT</code>表达式列表专业以及非学生的空值。系统利用此事实并将索引<code class="codeph">major1_idx</code>创建为隐藏列上的普通B树索引。
                     </p>
                     <p>如果名为<code class="codeph">TREAT</code>函数（ <code class="codeph">student_typ</code> ）的目标的类型是首先定义<code class="codeph">major</code>属性的类型，则隐藏列中的值仅与刚才描述的<code class="codeph">TREAT</code>表达式返回的值相同。如果<code class="codeph">TREAT</code>函数的目标是仅继承该属性的子类型，如下例所示， <code class="codeph">TREAT</code>表达式返回子类型（兼职学生）的非空<code class="codeph">major</code>值，但不返回其超类型（其他学生）。
                     </p><pre class="oac_no_warn" dir="ltr">CREATE INDEX major2_idx ON联系人（TREAT（联系AS part_time_student_typ）.major）;</pre><p>这里，存储在<code class="codeph">major</code>的隐藏列中的值可能与<code class="codeph">TREAT</code>表达式的结果不同。因此，无法在基础列上创建普通的B树索引。因此，数据库将<code class="codeph">TREAT</code>表达式视为任何其他基于函数的表达式，并尝试将索引创建为结果的基于函数的索引。
                     </p>
                     <p>以下示例与前一个示例一样，在兼职学生的<code class="codeph">major</code>属性上创建基于函数的索引，但在这种情况下， <code class="codeph">major</code>的隐藏列与可替代对象表<code class="codeph">person_obj_table</code>相关联：</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX major3_idx ON person_obj_table p（TREAT（VALUE（p）AS part_time_student_typ）.major）;</pre></div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
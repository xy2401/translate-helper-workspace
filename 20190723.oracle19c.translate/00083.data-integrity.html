<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>维护数据库应用程序中的数据完整性</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Development Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Development Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-development-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-31T23:23:15-08:00"></meta>
      <meta name="dcterms.title" content="Database Development Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96334-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="indexes.html" title="Previous" type="text/html"></link>
      <link rel="next" href="plsql-for-application-developers.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADFNS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="indexes.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="plsql-for-application-developers.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库开发指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="sql-for-application-developers.html" property="item" typeof="WebPage"><span property="name">应用程序开发人员的SQL</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">维护数据库应用程序中的数据完整性</li>
            </ol>
            <a id="GUID-398ECF26-572D-49D4-B957-803A962A8BE8" name="GUID-398ECF26-572D-49D4-B957-803A962A8BE8"></a><a id="ADFNS1023"></a><a id="ADFNS004"></a>
            
            <h2 id="ADFNS-GUID-398ECF26-572D-49D4-B957-803A962A8BE8" class="sect2"><span class="enumeration_chapter">12</span>维护数据库应用程序中的数据完整性</h2>
         </header>
         <div class="ind">
            <div>
               <p>在数据库应用程序中， <span class="bold">维护数据完整性</span>意味着确保应用程序操作的表中的数据符合相应的业务规则。<span class="bold">业务规则</span>指定必须始终为true或必须始终为false的条件或关系。例如，业务规则可能是没有员工的薪水超过100,000美元，或者<code class="codeph">EMPLOYEES</code>表中的每个员工都必须属于<code class="codeph">DEPARTMENTS</code>表中的<code class="codeph">DEPARTMENTS</code> 。业务规则因公司而异，因为每家公司都定义了自己的工资，员工编号，库存跟踪等政策。
               </p>
               <p>有几种方法可以确保数据完整性，尽可能使用的方法是<span class="bold">完整性约束</span> （或<span class="bold">约束</span> ）。
               </p>
               <p>本章补充了以下信息：</p>
               <div class="infoboxnote" id="GUID-398ECF26-572D-49D4-B957-803A962A8BE8__GUID-B6C051EE-FAA7-4B89-A44B-5706FDF281A1">
                  <p class="notep1">注意：</p>
                  <p>本章仅适用于表的约束。视图上的约束无助于维护数据完整性或具有关联的索引。相反，它们允许对涉及视图的查询进行查询重写，从而在使用实体化视图和其他数据仓库功能时提高性能。</p>
               </div>
               <div class="infoboxnotealso" id="GUID-398ECF26-572D-49D4-B957-803A962A8BE8__ORACLEDATABASECONCEPTSFORINFORMATIO-CA456CAE">
                  <p class="notep1">也可以看看：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT021" target="_blank"><span class="italic">Oracle Database Concepts</span></a> ，了解有关数据完整性和约束的信息</p>
                     </li>
                     <li>
                        <p><a href="../admin/managing-schema-objects.html#ADMIN11537" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a> ，了解有关管理约束的更多信息</p>
                     </li>
                     <li>
                        <p>有关约束的语法和语义信息的<a href="../sqlrf/constraint.html#SQLRF52180" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                     </li>
                     <li>
                        <p>有关视图约束的更多信息，请<a href="../sqlrf/constraint.html#SQLRF52181" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                     </li>
                     <li>
                        <p>有关在数据仓库中使用约束的信息，请参阅<a href="../dwhsg/index.html" target="_blank"><span class="italic">“Oracle数据库数据仓库指南”</span></a></p>
                     </li>
                     <li>
                        <p><a href="sql-data-types.html#GUID-A3D8B49A-EEE1-4B76-BEC0-6FF821BBE005">正确数据类型如何增加数据完整性</a> ，以获取有关数据类型在数据完整性中所起作用的更多信息</p>
                     </li>
                  </ul>
               </div>
               <div class="section">
                  <p class="subhead1" id="GUID-398ECF26-572D-49D4-B957-803A962A8BE8__GUID-C88BEE2C-D2BD-4E37-A993-C09573828915">话题：</p>
               </div>
               <!-- class="section" -->
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="data-integrity.html#GUID-FA138F6B-D3BC-4A1E-9BB8-23AC93BEDCC8">使用约束实施业务规则</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-E1BCFA31-E22F-4536-B382-C61FA7ADF5CD">使用约束和应用程序代码实施业务规则</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-0F5F8C2B-07D2-4D25-AEF1-3B9B6480949E">创建用于约束的索引</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-4D3BFEF0-A09C-4237-8EB7-9BE3A42E7C8D">何时使用NOT NULL约束</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-F35511AE-AC47-4F13-8962-1A83FFF04E99">何时使用默认列值</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-E9BD1A8C-4E1E-4342-ABC7-7853B67FDF88">选择表的主键（PRIMARY KEY约束）</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-EB003FA6-EC6B-45DC-9CC5-6C633C3CC8B7">何时使用UNIQUE约束</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53">用FOREIGN KEY约束实现参照完整性</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-E1566FC6-C8EE-481D-8119-2E7C4E3200BA">最小化与约束相关的索引的空间和时间开销</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-7234B3F8-761F-429F-AF1A-BDB5804463A7">索引外键索引指南</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-4C164755-6CE2-4E72-B323-9CEB2A2374A1">分布式数据库中的参照完整性</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-8F512577-F51D-4309-B987-C364D1D71779">何时使用CHECK约束</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8">定义约束的示例</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-42D44B4C-DA38-4334-AADE-40DE556EF8CD">启用和禁用约束</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-6DD75EB0-2F91-45F4-A3E7-7B0FC60643E0">修改约束</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-65CF33C0-03C2-408A-86D5-56C9A17B1E5D">重命名约束</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-64DAF3ED-702F-4D3A-8703-1EB917DCC8AC">减少限制</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-CF3CFAA8-CB91-4AA6-9740-9F682ABD52C2">管理FOREIGN KEY约束</a></p>
                  </li>
                  <li>
                     <p><a href="data-integrity.html#GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4">查看有关约束的信息</a></p>
                  </li>
               </ul>
            </div><a id="ADFNS1024"></a><a id="ADFNS262"></a><div class="sect2"><a id="GUID-FA138F6B-D3BC-4A1E-9BB8-23AC93BEDCC8" name="GUID-FA138F6B-D3BC-4A1E-9BB8-23AC93BEDCC8"></a><h3 id="ADFNS-GUID-FA138F6B-D3BC-4A1E-9BB8-23AC93BEDCC8" class="sect3">使用约束实施业务规则</h3>
               <div>
                  <p>尽可能使用约束来强制执行业务规则。约束具有速度的优势：Oracle数据库可以检查表中的所有数据是否比应用程序代码执行等效检查更快地遵循约束。</p>
                  <p><a href="data-integrity.html#GUID-FA138F6B-D3BC-4A1E-9BB8-23AC93BEDCC8__BEIIEFFJ">示例12-1</a>创建了一个部门表，一个员工表，一个约束来强制执行部门表中所有值都是唯一的规则，以及一个约束来强制执行每个员工必须为有效部门工作的规则。
                  </p>
                  <div class="example" id="GUID-FA138F6B-D3BC-4A1E-9BB8-23AC93BEDCC8__BEIIEFFJ">
                     <p class="titleinexample">示例12-1使用约束实施业务规则</p>
                     <p>创建部门表：</p><pre class="oac_no_warn" dir="ltr">DROP TABLE dept_tab; CREATE TABLE dept_tab（deptname VARCHAR2（20），deptno INTEGER）;</pre><p>创建员工表：</p><pre class="oac_no_warn" dir="ltr">DROP TABLE emp_tab; CREATE TABLE emp_tab（empname VARCHAR2（80），empno INTEGER，deptno INTEGER）;</pre><p>创建约束以强制执行department表中的所有值都是唯一的规则：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE dept_tab ADD PRIMARY KEY（deptno）;</pre><p>创建约束以强制执行每个员工必须为有效部门工作的规则：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE emp_tab ADD FOREIGN KEY（deptno）REFERENCES dept_tab（deptno）;</pre><p>现在，每当您将员工记录插入<code class="codeph">emp_tab</code> ，Oracle数据库都会检查其<code class="codeph">deptno</code>值是否出现在<code class="codeph">dept_tab</code> 。
                     </p>
                  </div>
                  <!-- class="example" -->
                  <p>假设不使用约束来强制执行每个员工必须为有效部门工作的规则，而是使用查询<code class="codeph">dept_tab</code>的触发器来检查它是否包含要插入<code class="codeph">emp_tab</code>的员工记录的<code class="codeph">deptno</code>值。由于查询使用一致性读取（CR），因此可能会错过其他事务的未提交更改。
                  </p>
                  <div class="infoboxnotealso" id="GUID-FA138F6B-D3BC-4A1E-9BB8-23AC93BEDCC8__GUID-8FE26EA1-8EDF-4ADF-A3CA-BFE833BD9E1C">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关约束的语法和语义信息的<a href="../sqlrf/constraint.html#SQLRF52180" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                        </li>
                        <li>
                           <p><a href="../cncpt/data-integrity.html#CNCPT33334" target="_blank"><span class="italic">Oracle Database Concepts</span></a>获取完整性约束的完整优势列表</p>
                        </li>
                        <li>
                           <p>有关使用触发器实施业务规则的更多信息，请参阅<a href="../cncpt/server-side-programming.html#CNCPT88945" target="_blank"><span class="italic">Oracle数据库概念</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS1025"></a><a id="ADFNS263"></a><div class="sect2"><a id="GUID-E1BCFA31-E22F-4536-B382-C61FA7ADF5CD" name="GUID-E1BCFA31-E22F-4536-B382-C61FA7ADF5CD"></a><h3 id="ADFNS-GUID-E1BCFA31-E22F-4536-B382-C61FA7ADF5CD" class="sect3">使用约束和应用程序代码实施业务规则</h3>
               <div>
                  <p>当应用程序代码可以在不查询表的情况下确定数据值无效时，建议使用约束和应用程序代码实施业务规则。应用程序代码可以向用户提供即时反馈，并通过阻止尝试将无效数据插入表来减少数据库的负载。</p>
                  <p>对于<a href="data-integrity.html#GUID-E1BCFA31-E22F-4536-B382-C61FA7ADF5CD__BEIHIABH">示例12-2</a> ，假设已运行<a href="data-integrity.html#GUID-FA138F6B-D3BC-4A1E-9BB8-23AC93BEDCC8__BEIIEFFJ">示例12-1</a> ，然后将此列添加到表<code class="codeph">emp_tab</code> ：</p><pre class="oac_no_warn" dir="ltr">empgender VARCHAR2（1）</pre><p><code class="codeph">empgender</code>唯一有效的值是<code class="codeph">'M'</code>和<code class="codeph">'F'</code> 。当有人试图插入行<code class="codeph">emp_tab</code>或更新的价值<code class="codeph">emp_tab</code> 。 <code class="codeph">empgender</code> ，应用程序代码可以确定<code class="codeph">emp_tab</code>的新值是否为。在没有查询表的情况下， <code class="codeph">empgender</code>是有效的。如果该值无效，则应用程序代码可以通知用户，而不是尝试插入无效值，如<a href="data-integrity.html#GUID-E1BCFA31-E22F-4536-B382-C61FA7ADF5CD__BEIHIABH">例12-2所示</a> 。
                  </p>
                  <div class="example" id="GUID-E1BCFA31-E22F-4536-B382-C61FA7ADF5CD__BEIHIABH">
                     <p class="titleinexample">示例12-2使用约束和应用程序代码实施业务规则</p><pre class="oac_no_warn" dir="ltr">创建或替换过程add_employee（e_name emp_tab.empname％TYPE，e_gender emp_tab.empgender％TYPE，e_number emp_tab.empno％TYPE，e_dept emp_tab.deptno％TYPE）AUTHID DEFINER <span class="bold">如果UPPER（e_gender）IN（'M'，'则开始） F'）然后</span> <span class="bold">插入到emp_tab VALUES（e_name，e_gender，e_number，e_dept）;</span> <span class="bold">ELSE</span> <span class="bold">DBMS_OUTPUT.PUT_LINE（'性别必须是M或F'）;</span> <span class="bold">万一;</span>结束; / BEGIN add_employee（'Smith'， <span class="bold">'H'</span> ，356,20）;结束; /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr"><span class="bold">性别必须是M或F.</span></pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADFNS264"></a><div class="sect2"><a id="GUID-0F5F8C2B-07D2-4D25-AEF1-3B9B6480949E" name="GUID-0F5F8C2B-07D2-4D25-AEF1-3B9B6480949E"></a><h3 id="ADFNS-GUID-0F5F8C2B-07D2-4D25-AEF1-3B9B6480949E" class="sect3">创建用于约束的索引</h3>
               <div>
                  <p>启用唯一或主键约束时，Oracle数据库会自动创建索引，但Oracle建议您显式创建这些索引。如果要使用具有外键约束的索引，则必须显式创建索引。</p>
                  <p>当约束可以使用现有索引时，Oracle数据库不会为该约束创建索引。注意：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>唯一或主键约束可以使用唯一索引，整个非唯一索引或非唯一索引的前几列。</p>
                     </li>
                     <li>
                        <p>如果唯一或主键约束使用非唯一索引，则没有其他唯一或主键约束可以使用该非唯一索引。</p>
                     </li>
                     <li>
                        <p>约束和索引中的列顺序不需要匹配。</p>
                     </li>
                     <li>
                        <p>唯一或主键约束使用的索引的对象编号存储在<code class="codeph">CDEF$</code> 。为此约束<code class="codeph">ENABLED</code>了。没有静态数据字典视图或动态性能视图显示此信息。
                        </p>
                        <p>如果启用的唯一键或主键约束使用索引，则不能仅删除索引。要删除索引，必须先删除约束或禁用约束，然后删除索引。</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-0F5F8C2B-07D2-4D25-AEF1-3B9B6480949E__GUID-10A66D65-6174-4F8C-B8A5-66553DB6A389">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关与约束关联的索引的详细信息，请参见<a href="../admin/managing-indexes.html#ADMIN11725" target="_blank"><span class="italic">Oracle数据库管理员指南</span></a></p>
                        </li>
                        <li>
                           <p>有关禁用和删除约束的信息，请参见<a href="../admin/managing-schema-objects.html#ADMIN11546" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                        </li>
                        <li>
                           <p><a href="../admin/managing-indexes.html#ADMIN11723" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a> ，了解有关显式创建索引的信息</p>
                        </li>
                        <li>
                           <p><a href="indexes.html#GUID-5C53546D-8C54-4F38-B472-835F94030016" title="您可以为计算机算术表达式创建复合索引。您可以使用NLSSORT API进行依赖于语言的排序。">在数据库应用程序中使用索引</a></p>
                        </li>
                        <li>
                           <p>有关显式创建索引的信息，请<a href="../sqlrf/CREATE-INDEX.html#SQLRF01209" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS266"></a><a id="ADFNS265"></a><div class="sect2"><a id="GUID-4D3BFEF0-A09C-4237-8EB7-9BE3A42E7C8D" name="GUID-4D3BFEF0-A09C-4237-8EB7-9BE3A42E7C8D"></a><h3 id="ADFNS-GUID-4D3BFEF0-A09C-4237-8EB7-9BE3A42E7C8D" class="sect3">何时使用NOT NULL约束</h3>
               <div>
                  <p>默认情况下，列可以包含<code class="codeph">NULL</code>值。要确保列永远不包含<code class="codeph">NULL</code>值，请使用<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束。
                  </p>
                  <p>在以下两种情况下使用<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>列必须包含非<code class="codeph">NULL</code>值。
                        </p>
                        <p>例如，在表<code class="codeph">HR</code> 。 <code class="codeph">EMPLOYEES</code> ，每位员工必须拥有员工ID。因此，列<code class="codeph">HR</code> 。 <code class="codeph">EMPLOYEES</code> 。 <code class="codeph">EMPLOYEE_ID</code>具有<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束，没有人可以将新员工记录插入<code class="codeph">HR</code> 。 <code class="codeph">EMPLOYEES</code>没有为<code class="codeph">EMPLOYEE_ID</code>指定非<code class="codeph">NULL</code>值。您<span class="italic">可以</span>将新员工记录插入<code class="codeph">HR</code> 。没有指定薪水的<code class="codeph">EMPLOYEES</code> ;因此，列<code class="codeph">HR</code> 。 <code class="codeph">EMPLOYEES</code> 。 <code class="codeph">SALARY</code> <span class="italic">没有</span>一个<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束。
                        </p>
                     </li>
                     <li>
                        <p>您希望允许对表进行索引扫描，或允许需要索引所有行的操作。</p>
                        <p>Oracle数据库索引不存储其值均为<code class="codeph">NULL</code>键。因此，对于前面的操作类型，至少一个索引列必须具有<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束。
                        </p>
                     </li>
                  </ul>
                  <p><a href="data-integrity.html#GUID-4D3BFEF0-A09C-4237-8EB7-9BE3A42E7C8D__CHDFBFDH">示例12-3</a>使用SQL * Plus命令<code class="codeph">DESCRIBE</code>显示<code class="codeph">DEPARTMENTS</code>表的哪些列具有<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束，然后显示如果尝试在具有<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束的列中插入<code class="codeph">NULL</code>值会发生什么。
                  </p>
                  <div class="example" id="GUID-4D3BFEF0-A09C-4237-8EB7-9BE3A42E7C8D__CHDFBFDH">
                     <p class="titleinexample">示例12-3将NULL值插入具有NOT NULL约束的列中</p><pre class="oac_no_warn" dir="ltr">描述部门;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">名字空？输入----------------------------------------- -------- ------------ DEPARTMENT_ID NOT NULL NUMBER（4）DEPARTMENT_NAME NOT NULL VARCHAR2（30）MANAGER_ID NUMBER（6）LOCATION_ID NUMBER（4）</pre><p>尝试在<code class="codeph">DEPARTMENT_ID</code>列中插入<code class="codeph">NULL</code> ：</p><pre class="oac_no_warn" dir="ltr">INSERT INTO DEPARTMENTS（ <span class="bold">DEPARTMENT_ID</span> ，DEPARTMENT_NAME，MANAGER_ID，LOCATION_ID）VALUES（ <span class="bold">NULL</span> ，'Sales'，200,1700）;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">VALUES（NULL，'Sales'，200,1700）*第4行的错误：ORA-01400：无法插入NULL（“HR”。“DEPARTMENTS”。“DEPARTMENT_ID”）</pre><p>省略对于不能是列的值<code class="codeph">NULL</code>相同分配值<code class="codeph">NULL</code> ：</p><pre class="oac_no_warn" dir="ltr">插入部门（DEPARTMENT_NAME，MANAGER_ID，LOCATION_ID）VALUES（'Sales'，200,1700）;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">插入部门（*第1行的错误：ORA-01400：无法插入NULL（“HR”。“DEPARTMENTS”。“DEPARTMENT_ID”）</pre></div>
                  <!-- class="example" -->
                  <p>您可以通过为<code class="codeph">DEPARTMENT_ID</code>提供非<code class="codeph">NULL</code>默认值来防止前面的错误。
                  </p>
                  <p>您可以将<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束与其他约束结合使用，以进一步限制特定列中允许的值。例如， <code class="codeph">NOT</code> <code class="codeph">NULL</code>和<code class="codeph">UNIQUE</code>约束的组合强制在<code class="codeph">UNIQUE</code>键中输入值，从而消除了新数据与现有行中的数据冲突的可能性。
                  </p>
                  <div class="infoboxnotealso" id="GUID-4D3BFEF0-A09C-4237-8EB7-9BE3A42E7C8D__GUID-779D7FAC-A3D4-45CA-9088-8833F65CCFC6">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束的更多信息，请<a href="../sqlrf/constraint.html#SQLRF30038" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </li>
                        <li>
                           <p><a href="data-integrity.html#GUID-F35511AE-AC47-4F13-8962-1A83FFF04E99">何时使用默认列值</a>以获取有关默认列值用法的更多信息</p>
                        </li>
                        <li>
                           <p><a href="data-integrity.html#GUID-526C89D0-35BF-4854-8B57-06192FC34CB1__BEIBDAJJ">外键上的UNIQUE和NOT NULL约束</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS267"></a><div class="sect2"><a id="GUID-F35511AE-AC47-4F13-8962-1A83FFF04E99" name="GUID-F35511AE-AC47-4F13-8962-1A83FFF04E99"></a><h3 id="ADFNS-GUID-F35511AE-AC47-4F13-8962-1A83FFF04E99" class="sect3">何时使用默认列值</h3>
               <div>
                  <p>当<code class="codeph">INSERT</code>语句未指定特定列的值时，该列将接收其默认值。默认情况下，该默认值为<code class="codeph">NULL</code> 。在创建表时定义列或使用<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句更改列时，可以更改默认值。
                  </p>
                  <div class="infoboxnote" id="GUID-F35511AE-AC47-4F13-8962-1A83FFF04E99__GUID-CB68FE82-4942-4FE9-B7E7-4343BFCE20D9">
                     <p class="notep1">注意：</p>
                     <p>为列提供非<code class="codeph">NULL</code>默认值并不能确保列的值永远不会为<code class="codeph">NULL</code> ，因为<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束会。
                     </p>
                  </div>
                  <p>在这些情况下使用默认列值：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>该列具有<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束。
                        </p>
                        <p>为列提供非<code class="codeph">NULL</code>默认值可防止在有人插入行而未指定列值时发生的错误。
                        </p>
                     </li>
                     <li>
                        <p>该列有一个最常见的值。</p>
                        <p>例如，如果公司中的大多数部门都在纽约，那么设置<code class="codeph">DEPARTMENTS</code>列的默认值。 <code class="codeph">LOCATION</code> <code class="codeph">'NEW YORK'</code> 。
                        </p>
                     </li>
                     <li>
                        <p>有一个非<code class="codeph">NULL</code>值表示没有条目。
                        </p>
                        <p>例如，如果<code class="codeph">EMPLOYEES</code>列中的值为零。 <code class="codeph">SALARY</code>表示尚未确定工资，然后将该列的默认值设置为零。
                        </p>
                        <p>表示没有条目的默认列值可以简化测试。例如，它允许您更改此测试：</p><pre class="oac_no_warn" dir="ltr"><code class="codeph">IF（employees.salary IS NOT NULL）AND（employees.salary &lt;50000）</code>
</pre><p>到这个测试：</p><pre class="oac_no_warn" dir="ltr"><code class="codeph">IF employees.salary &lt;50000</code>
</pre></li>
                     <li>
                        <p>您希望自动记录修改表的用户的名称。</p>
                        <p>例如，假设您允许用户通过视图将行插入表中。您为基表提供一个名为<code class="codeph">inserter</code>的列（不需要包含在视图的定义中），以存储插入该行的用户的名称。要自动记录用户名，请定义调用<code class="codeph">USER</code>函数的默认值。例如：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE audit_trail（value1 NUMBER，value2 VARCHAR2（32），inserter VARCHAR2（30） <span class="bold"><code class="codeph">DEFAULT USER</code></span> ）;</pre></li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-F35511AE-AC47-4F13-8962-1A83FFF04E99__GUID-4E04CB40-6E3D-48AE-9C83-52D55FA94298">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关<code class="codeph">INSERT</code>语句的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01604" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </li>
                        <li>
                           <p>有关<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>语句的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01402" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </li>
                        <li>
                           <p>有关<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01001" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </li>
                        <li>
                           <p><a href="data-integrity.html#GUID-4D3BFEF0-A09C-4237-8EB7-9BE3A42E7C8D">当使用NOT NULL约束</a>的信息，有关<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS99957"></a><div class="sect2"><a id="GUID-E9BD1A8C-4E1E-4342-ABC7-7853B67FDF88" name="GUID-E9BD1A8C-4E1E-4342-ABC7-7853B67FDF88"></a><h3 id="ADFNS-GUID-E9BD1A8C-4E1E-4342-ABC7-7853B67FDF88" class="sect3">选择表的主键（PRIMARY KEY约束）</h3>
               <div>
                  <p>表的主键唯一标识每一行，并确保不存在重复行（通常，这是它的唯一目的）。因此，主键值不能为<code class="codeph">NULL</code> 。</p>
                  <p>一个表最多只能有一个主键，但该键可以有多个列（也就是说，它可以是一个复合键）。要指定主键，请使用<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>约束。
                  </p>
                  <p>在可行的情况下，将一个列的值作为主键选择，其值由序列生成。</p>
                  <p>主键的第二个最佳选择是单个列，其值全部如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>独特</p>
                     </li>
                     <li>
                        <p>从未改变过</p>
                     </li>
                     <li>
                        <p>绝不是<code class="codeph">NULL</code></p>
                     </li>
                     <li>
                        <p>短和数字（因此易于输入）</p>
                     </li>
                  </ul>
                  <p>最大限度地减少对复合主键的使用，复合主键的值很长，并且不能由序列生成。</p>
                  <div class="infoboxnotealso" id="GUID-E9BD1A8C-4E1E-4342-ABC7-7853B67FDF88__GUID-07E2D26A-A822-4FA2-8F6E-0ECC777AC790">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关主键约束的一般信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT1646" target="_blank"><span class="italic">Oracle数据库概念</span></a></p>
                        </li>
                        <li>
                           <p>有关主键约束（包括限制）的完整信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF52197" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </li>
                        <li>
                           <p> 有关序列的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF00253" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS270"></a><a id="ADFNS269"></a><div class="sect2"><a id="GUID-EB003FA6-EC6B-45DC-9CC5-6C633C3CC8B7" name="GUID-EB003FA6-EC6B-45DC-9CC5-6C633C3CC8B7"></a><h3 id="ADFNS-GUID-EB003FA6-EC6B-45DC-9CC5-6C633C3CC8B7" class="sect3">何时使用UNIQUE约束</h3>
               <div>
                  <p>在任何列或组合列（主键除外）上使用<code class="codeph">UNIQUE</code>约束（指定唯一键），其中不允许重复的非<code class="codeph">NULL</code>值。例如：</p>
                  <div class="tblformal" id="GUID-EB003FA6-EC6B-45DC-9CC5-6C633C3CC8B7__GUID-A74054A1-8C71-401E-9FF2-12EB66D7AC71">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table shows four examples of unique keys and primary keys in the same table." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="75%" id="d53462e1721">独特的关键</th>
                              <th align="left" valign="bottom" width="25%" id="d53462e1724">首要的关键</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="75%" id="d53462e1729" headers="d53462e1721 ">
                                 <p>员工社会安全号码</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d53462e1729 d53462e1724 ">
                                 <p>员工编号</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="75%" id="d53462e1736" headers="d53462e1721 ">
                                 <p>卡车车牌号码</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d53462e1736 d53462e1724 ">
                                 <p>卡车号码</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="75%" id="d53462e1743" headers="d53462e1721 ">
                                 <p>客户电话号码（国家/地区代码列，区号列和本地电话号码列）</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d53462e1743 d53462e1724 ">
                                 <p>顾客号码</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="75%" id="d53462e1750" headers="d53462e1721 ">
                                 <p>部门名称列和位置列</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d53462e1750 d53462e1724 ">
                                 <p>部门编号</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p><a href="data-integrity.html#GUID-EB003FA6-EC6B-45DC-9CC5-6C633C3CC8B7__I1015083">图12-1</a>显示了一个带有<code class="codeph">UNIQUE</code>约束的表，一个违反约束的行，以及一个满足它的行。
                  </p>
                  <div class="figure" id="GUID-EB003FA6-EC6B-45DC-9CC5-6C633C3CC8B7__I1015083">
                     <p class="titleinfigure">图12-1违反并满足独特约束的行</p><img src="img/adfns039.gif" alt="下面是图12-1的描述" title="下面是图12-1的描述" longdesc="img_text/adfns039.html"><br><a href="img_text/adfns039.html">“图12-1违反并满足独特约束的行”的说明</a></div>
                  <!-- class="figure" -->
                  <div class="infoboxnotealso" id="GUID-EB003FA6-EC6B-45DC-9CC5-6C633C3CC8B7__GUID-09C6DF38-5184-4DBE-992D-EAF49C91BE04">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关<code class="codeph">UNIQUE</code>约束的一般信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT1642" target="_blank"><span class="italic">Oracle数据库概念</span></a></p>
                        </li>
                        <li>
                           <p>有关<code class="codeph">UNIQUE</code>约束的完整信息，包括限制，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF52195" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS272"></a><a id="ADFNS1026"></a><a id="ADFNS00602"></a><div class="sect2"><a id="GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53" name="GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53"></a><h3 id="ADFNS-GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53" class="sect3">用FOREIGN KEY约束实现参照完整性</h3>
               <div>
                  <p>当两个表共享一个或多个列时，您可以使用<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束来强制引用完整性，即确保共享列在两个表中始终具有相同的值。
                  </p>
                  <div class="infoboxnote" id="GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53__GUID-F2C9CAC7-869F-41F9-9BB4-1395E94F14F0">
                     <p class="notep1">注意：</p>
                     <p>一个<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束也称为<span class="bold">引用完整性约束</span> ，其<code class="codeph">CONSTRAINT_TYPE</code>是<code class="codeph">R</code>静态数据字典视图<code class="codeph">*_CONSTRAINTS</code> 。</p>
                  </div>
                  <p>将一个表指定为<span class="bold">引用表或父表</span> ，将另一个<span class="bold">表</span>指定为<span class="bold">依赖表或子表</span> 。在父表中，在共享列上定义<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>或<code class="codeph">UNIQUE</code>约束。在子表中，在共享列上定义<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束。共享列现在包含<span class="bold">外键</span> 。在外键上定义其他约束会影响父子关系。
                  </p>
                  <p><a href="data-integrity.html#GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53__I1011998">图12-2</a>显示了在部门编号上定义的外键。它保证此列中的每个值都必须与department表的主键中的值匹配。此约束可防止错误的部门号进入员工表。
                  </p>
                  <p><a href="data-integrity.html#GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53__I1011998">图12-2</a>显示了共享一列的父表和子表，违反<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束的行以及满足它的行。
                  </p>
                  <div class="figure" id="GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53__I1011998">
                     <p class="titleinfigure">图12-2违反和满足外键约束的行</p><img src="img/adfns040.gif" width="610" alt="下面是图12-2的描述" title="下面是图12-2的描述" longdesc="img_text/adfns040.html"><br><a href="img_text/adfns040.html">“图12-2违反和满足外键约束的行”的说明</a></div>
                  <!-- class="figure" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53__GUID-A67BAE8C-0AB4-432E-B4FA-37B2DE7C4E63">话题：</p>
                  </div>
                  <!-- class="section" -->
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="data-integrity.html#GUID-70F1D209-144D-4479-ABB8-559734B11E00">FOREIGN KEY约束和NULL值</a></p>
                     </li>
                     <li>
                        <p><a href="data-integrity.html#GUID-526C89D0-35BF-4854-8B57-06192FC34CB1">定义父表和子表之间的关系</a></p>
                     </li>
                     <li>
                        <p><a href="data-integrity.html#GUID-B21CC0C9-F2AD-4E60-923E-5B8355341185">多个FOREIGN KEY约束的规则</a></p>
                     </li>
                     <li>
                        <p><a href="data-integrity.html#GUID-E68565EE-A5A8-4056-80B3-05C6B95FECCB">推迟约束检查</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53__GUID-4CFA9458-B6F5-4854-951A-FEC75F96FA70">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关外键约束的一般信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT1649" target="_blank"><span class="italic">Oracle数据库概念</span></a></p>
                        </li>
                        <li>
                           <p>有关外键约束（包括限制）的完整信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF52199" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </li>
                        <li>
                           <p><a href="data-integrity.html#GUID-526C89D0-35BF-4854-8B57-06192FC34CB1">定义父表和子表之间的关系</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADFNS273"></a><div class="sect3"><a id="GUID-70F1D209-144D-4479-ABB8-559734B11E00" name="GUID-70F1D209-144D-4479-ABB8-559734B11E00"></a><h4 id="ADFNS-GUID-70F1D209-144D-4479-ABB8-559734B11E00" class="sect4">FOREIGN KEY约束和NULL值</h4>
                  <div>
                     <p>即使没有匹配的<code class="codeph">PRIMARY</code>或<code class="codeph">UNIQUE</code>键，外键也允许全部为<code class="codeph">NULL</code>键值。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>默认情况下（没有任何<code class="codeph">NOT</code> <code class="codeph">NULL</code>或<code class="codeph">CHECK</code>子句）， <code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束对ANSI / ISO标准中的复合外键强制执行<span class="bold">match</span> <span class="bold">none</span>规则。
                           </p>
                        </li>
                        <li>
                           <p>要在复合外键中强制执行<code class="codeph">NULL</code>值的<span class="bold">匹配</span> <span class="bold">完整</span>规则，这要求键的所有组件都为<code class="codeph">NULL</code>或全部为非<code class="codeph">NULL</code> ，请定义<code class="codeph">CHECK</code>约束，该约束仅允许复合外键中的所有<code class="codeph">NULL</code>或所有非<code class="codeph">NULL</code>值键。例如，使用由<code class="codeph">A</code> ， <code class="codeph">B</code>和<code class="codeph">C</code>列组成的复合键：</p><pre class="oac_no_warn" dir="ltr">检查（（一个是空，B是空，C是空）或（一个不是空，B不是空，C不是空））</pre></li>
                        <li>
                           <p>通常，不可能使用声明性引用完整性来对复合外键中的<code class="codeph">NULL</code>值强制执行<span class="bold">匹配</span> <span class="bold">部分</span>规则，这要求键的非<code class="codeph">NULL</code>部分出现在主键或唯一键中的相应部分中。引用表中的单行。您经常可以使用触发器来处理这种情况。
                           </p>
                           <div class="infoboxnotealso" id="GUID-70F1D209-144D-4479-ABB8-559734B11E00__NOTE-13233-CA500E1F">
                              <p class="notep1">也可以看看：</p>有关触发器的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS020" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></div>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADFNS275"></a><a id="ADFNS276"></a><a id="ADFNS277"></a><a id="ADFNS278"></a><a id="ADFNS274"></a><div class="sect3"><a id="GUID-526C89D0-35BF-4854-8B57-06192FC34CB1" name="GUID-526C89D0-35BF-4854-8B57-06192FC34CB1"></a><h4 id="ADFNS-GUID-526C89D0-35BF-4854-8B57-06192FC34CB1" class="sect4">定义父表和子表之间的关系</h4>
                  <div>
                     <p>父表和子表之间的几个关系可以由子表中的外键上定义的其他类型的约束来确定。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-526C89D0-35BF-4854-8B57-06192FC34CB1__GUID-02C5A3CA-2F05-484C-B628-2FE27964DBA3">对外键没有限制</p>
                     </div>
                     <!-- class="section" -->
                     <p>如果未在外键上定义其他约束，则子表中的任何行数都可以引用相同的父键值。此模型允许外键中的空值。</p>
                     <p>此模型在父键和外键之间建立一对多关系，允许外键中的未确定值（空值）。<a href="data-integrity.html#GUID-4E2BB957-8F1D-425E-B225-579D4DBD9D53__I1011998">图12-2</a>显示了<code class="codeph">employee</code>和<code class="codeph">department</code>表之间的这种关系的一个示例。每个部门（父密钥）都有许多员工（外键），有些员工可能不在某个部门（外键中为空）。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-526C89D0-35BF-4854-8B57-06192FC34CB1__GUID-3FC115F4-021B-4DCE-989B-9D63A5220947">外键上的NOT NULL约束</p>
                     </div>
                     <!-- class="section" -->
                     <p>如果外键中不允许空值，则子表中的每一行都必须显式引用父键中的值，因为外键中不允许使用空值。</p>
                     <p>子表中的任意数量的行都可以引用相同的父键值，因此该模型在父键和外键之间建立一对多关系。但是，子表中的每一行都必须引用父键值;不允许在外键中缺少值（null）。上一节中的相同示例说明了这种关系。但是，在这种情况下，员工必须具有对特定部门的引用。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-526C89D0-35BF-4854-8B57-06192FC34CB1__GUID-31DBD38C-DC6C-46B3-9D4A-48F9D14E35A3">对外键的唯一约束</p>
                     </div>
                     <!-- class="section" -->
                     <p>在外键上定义<code class="codeph">UNIQUE</code>约束时，子表中只有一行可以引用给定的父键值。此模型允许外键中的空值。
                     </p>
                     <p>此模型在父键和外键之间建立一对一关系，允许外键中的未确定值（空值）。例如，假设employee表有一个名为<code class="codeph">MEMBERNO</code>的列，指的是公司保险计划中的员工成员编号。此外，名为<code class="codeph">INSURANCE</code>的表具有名为<code class="codeph">MEMBERNO</code>的主键，该表的其他列保留与员工保险单相关的相应信息。employee表中的<code class="codeph">MEMBERNO</code>必须是外键和唯一键：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在<code class="codeph">EMP_TAB</code>和<code class="codeph">INSURANCE</code>表之间强制执行参照完整性规则（ <code class="codeph">FOREIGN KEY</code>约束）</p>
                        </li>
                        <li>
                           <p>保证每个员工都有唯一的会员编号（ <code class="codeph">UNIQUE</code>键约束）</p>
                        </li>
                     </ul>
                     <div class="section" id="GUID-526C89D0-35BF-4854-8B57-06192FC34CB1__BEIBDAJJ">
                        <p class="subhead3" id="GUID-526C89D0-35BF-4854-8B57-06192FC34CB1__GUID-0F1F2E73-5917-416A-BEDC-BA8F519054B6">外键上的UNIQUE和NOT NULL约束</p>
                     </div>
                     <!-- class="section" -->
                     <p>如果在外键上定义了<code class="codeph">UNIQUE</code>和<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束，则子表中只有一行可以引用给定的父键值，并且因为外键中不允许使用<code class="codeph">NULL</code>值，所以子表中的每一行都必须显式引用父键中的值。
                     </p>
                     <p>此模型在父键和外键之间建立一对一关系，该关系不允许外键中的未确定值（空值）。如果通过在employee表的<code class="codeph">MEMBERNO</code>列上添加<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束来扩展前一个示例，除了保证每个员工都具有唯一的成员资格编号外，还要确保<code class="codeph">MEMBERNO</code>列中不允许使用未确定的值（空值）员工表的。
                     </p>
                  </div>
               </div><a id="ADFNS279"></a><div class="sect3"><a id="GUID-B21CC0C9-F2AD-4E60-923E-5B8355341185" name="GUID-B21CC0C9-F2AD-4E60-923E-5B8355341185"></a><h4 id="ADFNS-GUID-B21CC0C9-F2AD-4E60-923E-5B8355341185" class="sect4">多个FOREIGN KEY约束的规则</h4>
                  <div>
                     <p>Oracle数据库允许多个<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束引用列;从属密钥的数量没有限制。如果单个列是两个不同的复合外键的一部分，则可能存在这种情况。
                     </p>
                  </div>
               </div><a id="ADFNS281"></a><a id="ADFNS280"></a><div class="sect3"><a id="GUID-E68565EE-A5A8-4056-80B3-05C6B95FECCB" name="GUID-E68565EE-A5A8-4056-80B3-05C6B95FECCB"></a><h4 id="ADFNS-GUID-E68565EE-A5A8-4056-80B3-05C6B95FECCB" class="sect4">推迟约束检查</h4>
                  <div>
                     <p>当Oracle数据库检查约束时，如果不满足约束，则会发出错误信号。要将检查约束推迟到当前事务结束，请使用<code class="codeph">SET</code> <code class="codeph">CONSTRAINTS</code>语句。
                     </p>
                     <div class="infoboxnote" id="GUID-E68565EE-A5A8-4056-80B3-05C6B95FECCB__GUID-AC2C9A69-091E-479D-A23E-978564EE8DEE">
                        <p class="notep1">注意：</p>
                        <p>您不能在触发器中使用<code class="codeph">SET</code> <code class="codeph">CONSTRAINTS</code>语句。
                        </p>
                     </div>
                     <p>推迟约束检查时：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>选择适当的数据。</p>
                           <p>如果您使用的数据具有以下任何特征，您可能希望推迟对<code class="codeph">UNIQUE</code>和<code class="codeph">FOREIGN</code>键的约束检查：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>表是快照。</p>
                              </li>
                              <li>
                                 <p>某些表包含由另一个应用程序操作的大量数据，这些数据可能不会以相同的顺序返回数据。</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>更新外键的级联操作。</p>
                        </li>
                        <li>
                           <p>确保约束可以推迟。</p>
                           <p>确定适当的表后，请确保创建其<code class="codeph">FOREIGN</code> ， <code class="codeph">UNIQUE</code>和<code class="codeph">PRIMARY</code>键约束<code class="codeph">DEFERRABLE</code> 。</p>
                        </li>
                        <li>
                           <p>在操作数据的应用程序中，在开始处理任何数据之前设置延迟的所有约束，如下所示：</p><pre class="oac_no_warn" dir="ltr">设置约束所有延迟;</pre></li>
                        <li>
                           <p>（可选）在提交事务之前立即检查约束违规。</p>
                           <p>紧接在<code class="codeph">COMMIT</code>语句之前，运行<code class="codeph">SET</code> <code class="codeph">CONSTRAINTS</code> <code class="codeph">ALL</code> <code class="codeph">IMMEDIATE</code>语句。如果约束存在任何问题，则此语句将失败，并标识导致错误的约束。如果在违反约束的情况下提交，事务将回退并收到错误消息。
                           </p>
                        </li>
                     </ul>
                     <p>在<a href="data-integrity.html#GUID-E68565EE-A5A8-4056-80B3-05C6B95FECCB__BEICHCGC">例12-4中</a> ，表<code class="codeph">emp</code>的<code class="codeph">PRIMARY</code>和<code class="codeph">FOREIGN</code>键被创建为<code class="codeph">DEFERRABLE</code> ，然后被延迟。
                     </p>
                     <div class="example" id="GUID-E68565EE-A5A8-4056-80B3-05C6B95FECCB__BEICHCGC">
                        <p class="titleinexample">例12-4延迟约束检查</p><pre class="oac_no_warn" dir="ltr">DROP TABLE dept; CREATE TABLE dept（deptno NUMBER PRIMARY KEY，dname VARCHAR2（30））; DROP TABLE emp; CREATE TABLE emp（empno NUMBER，ename VARCHAR2（30），deptno NUMBER， <span class="bold">CONSTRAINT pk_emp_empno PRIMARY KEY（empno）DEFERRABLE，</span> <span class="bold">CONSTRAINT fk_emp_deptno FOREIGN KEY（deptno）</span> <span class="bold">REFERENCES dept（deptno）DEFERRABLE</span> ）; INSERT INTO dept（deptno，dname）VALUES（10，'Accounting'）; INSERT INTO dept（deptno，dname）VALUES（20，'SALES'）; INSERT INTO emp（empno，ename，deptno）VALUES（1，'Corleone'，10）; INSERT INTO emp（empno，ename，deptno）VALUES（2，'Costanza'，20）;承诺; <span class="bold">设置约束所有延迟;</span> UPDATE dept SET deptno = deptno + 10 WHERE deptno = 20;</pre><p>查询：</p><pre class="oac_no_warn" dir="ltr">SELECT * from dept ORDER BY deptno;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">DEPTNO DNAME ---------- ------------------------------ 10会计30销售2行选择。
 </pre><p>更新：</p><pre class="oac_no_warn" dir="ltr">UPDATE emp SET deptno = deptno + 10 WHERE deptno = 20;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">1行更新。
 </pre><p>查询：</p><pre class="oac_no_warn" dir="ltr">SELECT *来自emp ORDER BY deptno;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">EMPNO ENAME DEPTNO ---------- ------------------------------ ------- --- 1 Corleone 10 2 Costanza 30 2行选择。
</pre></div>
                     <!-- class="example" -->
                     <p><code class="codeph">SET</code> <code class="codeph">CONSTRAINTS</code>仅适用于当前事务，其设置将持续到事务的持续时间，或者直到另一个<code class="codeph">SET</code> <code class="codeph">CONSTRAINTS</code>语句重置该模式。<code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">SET</code> <code class="codeph">CONSTRAINTS</code>语句仅适用于当前会话。在约束存在时，保留创建约束时指定的默认值。
                     </p>
                     <div class="infoboxnotealso" id="GUID-E68565EE-A5A8-4056-80B3-05C6B95FECCB__GUID-E4FBD308-1ADB-449B-95A8-42C6BB633413">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">SET</code> <code class="codeph">CONSTRAINTS</code>语句的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01703" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                     </div>
                  </div>
               </div>
            </div><a id="ADFNS00603"></a><div class="sect2"><a id="GUID-E1566FC6-C8EE-481D-8119-2E7C4E3200BA" name="GUID-E1566FC6-C8EE-481D-8119-2E7C4E3200BA"></a><h3 id="ADFNS-GUID-E1566FC6-C8EE-481D-8119-2E7C4E3200BA" class="sect3">最小化与约束相关的索引的空间和时间开销</h3>
               <div>
                  <p>创建<code class="codeph">UNIQUE</code>或<code class="codeph">PRIMARY</code>键时，Oracle数据库会检查现有索引是否强制实施约束的唯一性。如果没有这样的索引，则数据库会创建一个索引。
                  </p>
                  <p>当Oracle数据库使用唯一索引来强制执行约束，并且删除或禁用与唯一索引关联的约束时，将删除索引。要保留与索引关联的统计信息（需要很长时间才能重新创建），请在<code class="codeph">DROP</code> <code class="codeph">CONSTRAINT</code>语句中指定<code class="codeph">KEEP</code> <code class="codeph">INDEX</code>子句。
                  </p>
                  <p>启用外键引用<code class="codeph">PRIMARY</code>或<code class="codeph">UNIQUE</code>键时，不能禁用或删除<code class="codeph">PRIMARY</code>或<code class="codeph">UNIQUE</code>键约束或索引。
                  </p>
                  <div class="infoboxnote" id="GUID-E1566FC6-C8EE-481D-8119-2E7C4E3200BA__GUID-975A9C57-91BD-4EC3-9803-3F77B057CB8D">
                     <p class="notep1">注意：</p>
                     <p>具有可延迟约束的<code class="codeph">UNIQUE</code>和<code class="codeph">PRIMARY</code>键必须都使用非唯一索引。
                     </p>
                  </div>
                  <p>要在创建唯一和主键约束时使用现有索引，请在<code class="codeph">CONSTRAINT</code>子句中包含<code class="codeph">USING</code> <code class="codeph">INDEX</code> 。
                  </p>
                  <div class="infoboxnotealso" id="GUID-E1566FC6-C8EE-481D-8119-2E7C4E3200BA__NOTE-136-CA5097EC">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF52180" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a>有关完整性约束的更多详细信息和示例</p>
                  </div>
               </div>
            </div><a id="ADFNS00604"></a><div class="sect2"><a id="GUID-7234B3F8-761F-429F-AF1A-BDB5804463A7" name="GUID-7234B3F8-761F-429F-AF1A-BDB5804463A7"></a><h3 id="ADFNS-GUID-7234B3F8-761F-429F-AF1A-BDB5804463A7" class="sect3">索引外键索引指南</h3>
               <div>
                  <p>索引外键，除非永远不会更新或删除匹配的唯一键或主键。</p>
                  <div class="infoboxnotealso" id="GUID-7234B3F8-761F-429F-AF1A-BDB5804463A7__GUID-90A0F7D4-2DA4-41BD-9D04-80811BF4F63A">
                     <p class="notep1">也可以看看：</p>
                     <p>有关索引外键的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=CNCPT1657" target="_blank"><span class="italic">Oracle数据库概念</span></a></p>
                  </div>
               </div>
            </div><a id="ADFNS00605"></a><div class="sect2"><a id="GUID-4C164755-6CE2-4E72-B323-9CEB2A2374A1" name="GUID-4C164755-6CE2-4E72-B323-9CEB2A2374A1"></a><h3 id="ADFNS-GUID-4C164755-6CE2-4E72-B323-9CEB2A2374A1" class="sect3">分布式数据库中的参照完整性</h3>
               <div>
                  <p>引用约束的声明不能指定引用远程表的主键或唯一键的外键。</p>
                  <p>但是，您可以使用触发器维护跨节点的父/子表关系。</p>
                  <div class="infoboxnotealso" id="GUID-4C164755-6CE2-4E72-B323-9CEB2A2374A1__GUID-7CB93855-BEAA-4FA2-B280-A42E948D4FAE">
                     <p class="notep1">也可以看看：</p>
                     <p>有关强制引用完整性的触发器的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS020" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                  </div>
                  <div class="infoboxnote" id="GUID-4C164755-6CE2-4E72-B323-9CEB2A2374A1__GUID-1320A8F9-DDF2-4231-8C09-A8937D134D1F">
                     <p class="notep1">注意：</p>
                     <p><span class="italic"> </span>如果决定使用触发器在分布式数据库的节点上定义参照完整性，请注意网络故障可能使父表和子表都不可访问。
                     </p>
                     <p>例如，假设子表位于<code class="codeph">SALES</code>数据库中，而父表位于<code class="codeph">HQ</code>数据库中。
                     </p>
                     <p>如果两个数据库之间的网络连接失败，则针对子表（插入行或更新外键值的那些）的一些数据操作语言（DML）语句无法继续，因为参照完整性触发器必须能够访问父表在<code class="codeph">HQ</code>数据库中。
                     </p>
                  </div>
               </div>
            </div><a id="ADFNS00606"></a><div class="sect2"><a id="GUID-8F512577-F51D-4309-B987-C364D1D71779" name="GUID-8F512577-F51D-4309-B987-C364D1D71779"></a><h3 id="ADFNS-GUID-8F512577-F51D-4309-B987-C364D1D71779" class="sect3">何时使用CHECK约束</h3>
               <div>
                  <p>必须在基于逻辑表达式（例如比较）的情况下强制实施完整性规则时，请使用<code class="codeph">CHECK</code>约束。当任何其他类型的约束可以提供必要的检查时，切勿使用<code class="codeph">CHECK</code>约束。
                  </p>
                  <div class="infoboxnotealso" id="GUID-8F512577-F51D-4309-B987-C364D1D71779__GUID-DBF2799C-63F9-4581-9D8B-045124655B6F">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="data-integrity.html#GUID-95CFBA08-8408-4B83-BA5E-87EFA7A8DFCC">在CHECK和NOT NULL约束之间选择</a></p>
                  </div>
                  <p><code class="codeph">CHECK</code>约束的示例包括：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>对员工工资的<code class="codeph">CHECK</code>约束，以便没有工资值大于10000。
                        </p>
                     </li>
                     <li>
                        <p>部门位置的<code class="codeph">CHECK</code>约束，以便只允许“ <code class="codeph">BOSTON</code> ”，“ <code class="codeph">NEW</code> <code class="codeph">YORK</code> ”和“ <code class="codeph">DALLAS</code> ”位置。
                        </p>
                     </li>
                     <li>
                        <p>对薪水和佣金列的<code class="codeph">CHECK</code>约束，以防止佣金大于薪水。
                        </p>
                     </li>
                  </ul>
               </div><a id="ADFNS282"></a><div class="sect3"><a id="GUID-56B3A4F1-68CD-459E-98EC-A5035795D142" name="GUID-56B3A4F1-68CD-459E-98EC-A5035795D142"></a><h4 id="ADFNS-GUID-56B3A4F1-68CD-459E-98EC-A5035795D142" class="sect4">CHECK约束的限制</h4>
                  <div>
                     <p>对于表的每一行， <code class="codeph">CHECK</code>约束要求条件为真或未知。如果语句导致条件计算为false，则回滚该语句。<code class="codeph">CHECK</code>约束的条件具有以下限制：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>条件必须是布尔表达式，可以使用插入或更新的行中的值来计算。</p>
                        </li>
                        <li>
                           <p>条件不能包含子查询或序列。</p>
                        </li>
                        <li>
                           <p>该条件不能包括<code class="codeph">SYSDATE</code> ， <code class="codeph">UID</code> ， <code class="codeph">USER</code>或<code class="codeph">USERENV</code> SQL函数。
                           </p>
                        </li>
                        <li>
                           <p>条件不能包含伪列<code class="codeph">LEVEL</code>或<code class="codeph">ROWNUM</code> 。</p>
                        </li>
                        <li>
                           <p>条件不能包含<code class="codeph">PRIOR</code>运算符。
                           </p>
                        </li>
                        <li>
                           <p>条件不能包含用户定义的函数。</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-56B3A4F1-68CD-459E-98EC-A5035795D142__GUID-F49FE81A-C35E-483F-B6CC-204DE9C4749E">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">LEVEL</code>伪列的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF00251" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">ROWNUM</code>伪列的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF00255" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF007" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a>有关<code class="codeph">PRIOR</code>运算符的信息（用于分层查询）</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADFNS283"></a><div class="sect3"><a id="GUID-E8C8FD21-9AEA-48FB-880E-05D488D27671" name="GUID-E8C8FD21-9AEA-48FB-880E-05D488D27671"></a><h4 id="ADFNS-GUID-E8C8FD21-9AEA-48FB-880E-05D488D27671" class="sect4">设计CHECK约束</h4>
                  <div>
                     <p>使用<code class="codeph">CHECK</code>约束时，请记住仅当条件计算结果为false时才违反<code class="codeph">CHECK</code>约束; true和unknown值（例如与null的比较）不违反检查条件。确保您定义的任何<code class="codeph">CHECK</code>约束都足以强制执行规则。
                     </p>
                     <p>例如，考虑这个<code class="codeph">CHECK</code>约束：</p><pre class="oac_no_warn" dir="ltr">检查（Sal&gt; 0或Comm&gt; = 0）</pre><p>乍一看，此规则可能会被解释为“除非员工薪水大于零或员工佣金大于或等于零，否则不允许员工表中的行。”但是，如果插入一个带有空工资的行，则该行不会违反<code class="codeph">CHECK</code>约束，无论佣金值是否有效，因为整个检查条件被评估为未知。在这种情况下，您可以通过在<code class="codeph">SAL</code>和<code class="codeph">COMM</code>列上放置<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束来防止此类违规。
                     </p>
                     <div class="infoboxnote" id="GUID-E8C8FD21-9AEA-48FB-880E-05D488D27671__GUID-D136E229-B588-4AD7-9D9B-6042A7EF4F34">
                        <p class="notep1">注意：</p>
                        <p>如果您不确定何时未知值导致<code class="codeph">NULL</code>条件，请查看<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF005" target="_blank"><span class="italic">Oracle数据库SQL语言参考中</span></a>逻辑条件的真值表</p>
                     </div>
                  </div>
               </div><a id="ADFNS284"></a><div class="sect3"><a id="GUID-7B6F6D8F-9891-4C9D-A020-9E1683AC9CA6" name="GUID-7B6F6D8F-9891-4C9D-A020-9E1683AC9CA6"></a><h4 id="ADFNS-GUID-7B6F6D8F-9891-4C9D-A020-9E1683AC9CA6" class="sect4">多个CHECK约束的规则</h4>
                  <div>
                     <p>单个列可以具有多个<code class="codeph">CHECK</code>约束，这些约束在其定义中引用该列。可以定义引用列的<code class="codeph">CHECK</code>约束的数量没有限制。
                     </p>
                     <p>未定义约束的计算顺序，因此请注意不要依赖顺序或定义彼此冲突的多个约束。</p>
                  </div>
               </div><a id="ADFNS285"></a><div class="sect3"><a id="GUID-95CFBA08-8408-4B83-BA5E-87EFA7A8DFCC" name="GUID-95CFBA08-8408-4B83-BA5E-87EFA7A8DFCC"></a><h4 id="ADFNS-GUID-95CFBA08-8408-4B83-BA5E-87EFA7A8DFCC" class="sect4">在CHECK和NOT NULL约束之间选择</h4>
                  <div>
                     <p>根据ANSI / ISO标准， <code class="codeph">NOT</code> <code class="codeph">NULL</code>约束是<code class="codeph">CHECK</code>约束的示例，其中条件是：</p><pre class="oac_no_warn" dir="ltr">CHECK（ <span class="italic">column_name</span> IS NOT NULL）</pre><p>因此，您可以使用<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束或<code class="codeph">CHECK</code>约束为单个列编写<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束。<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束比<code class="codeph">CHECK</code>约束更容易使用。
                     </p>
                     <p>在复合键只允许所有<code class="codeph">NULL</code>或所有非<code class="codeph">NULL</code>值的情况下，必须使用<code class="codeph">CHECK</code>约束。例如，此<code class="codeph">CHECK</code>约束允许由列<code class="codeph">C1</code>和<code class="codeph">C2</code>组成的组合键中的键值包含所有空值或所有值：</p><pre class="oac_no_warn" dir="ltr">检查（（C1是空和C2是空）或（C1不是空，C2不是空））</pre></div>
               </div>
            </div><a id="ADFNS286"></a><a id="ADFNS287"></a><a id="ADFNS00607"></a><div class="sect2"><a id="GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8" name="GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8"></a><h3 id="ADFNS-GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8" class="sect3">定义约束的示例</h3>
               <div>
                  <p><a href="data-integrity.html#GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8__BEICHGDE">示例12-5</a>和<a href="data-integrity.html#GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8__BEIDBAAF">示例12-6</a>显示了如何在数据库设计的原型阶段创建简单约束。在这些示例中，每个约束都有一个名称。如果数据定义语言（DDL）语句多次运行，则命名约束会阻止数据库使用不同的系统生成的名称创建相同约束的多个副本。
                  </p>
                  <p><a href="data-integrity.html#GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8__BEICHGDE">示例12-5</a>使用<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>语句同时创建表及其约束。
                  </p>
                  <div class="example" id="GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8__BEICHGDE">
                     <p class="titleinexample">示例12-5使用CREATE TABLE语句定义约束</p><pre class="oac_no_warn" dir="ltr">DROP TABLE DeptTab; CREATE TABLE DeptTab（Deptno NUMBER（3） <span class="bold">CONSTRAINT pk_DeptTab_Deptno PRIMARY KEY</span> ，Dname VARCHAR2（15），Loc VARCHAR2（15）， <span class="bold">CONSTRAINT u_DeptTab_Dname_Loc UNIQUE（Dname，Loc）</span> ， <span class="bold">CONSTRAINT c_DeptTab_Loc</span> <span class="bold">CHECK（Loc IN（'NEW YORK'，'BOSTON'） ，'芝加哥'）））</span> ; DROP TABLE EmpTab; CREATE TABLE EmpTab（Empno NUMBER（5） <span class="bold">CONSTRAINT pk_EmpTab_Empno PRIMARY KEY</span> ，Ename VARCHAR2（15） <span class="bold">NOT NULL</span> ，Job VARCHAR2（10），Mgr NUMBER（5） <span class="bold">CONSTRAINT r_EmpTab_Mgr REFERENCES EmpTab</span> ，Hiredate DATE，Sal NUMBER（7,2），Comm NUMBER（5,2），Deptno NUMBER（3） <span class="bold">NOT NULL</span> <span class="bold">CONSTRAINT r_EmpTab_DeptTab REFERENCES DeptTab ON DELETE CASCADE</span> ）;</pre></div>
                  <!-- class="example" -->
                  <p><a href="data-integrity.html#GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8__BEIDBAAF">示例12-6</a>使用<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句为现有表创建约束。
                  </p>
                  <p>如果表包含违反约束的行，则无法在表上创建经过验证的约束。</p>
                  <div class="example" id="GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8__BEIDBAAF">
                     <p class="titleinexample">示例12-6使用ALTER TABLE语句定义约束</p><pre class="oac_no_warn" dir="ltr">- 创建没有约束的表：DROP TABLE DeptTab; CREATE TABLE DeptTab（Deptno NUMBER（3），Dname VARCHAR2（15），Loc VARCHAR2（15））; DROP TABLE EmpTab; CREATE TABLE EmpTab（Empno NUMBER（5），Ename VARCHAR2（15），Job VARCHAR2（10），经理NUMBER（5），Hiredate DATE，Sal NUMBER（7,2），Comm NUMBER（5,2），Deptno NUMBER（ 3））; <span class="bold">- 使用ALTER TABLE语句定义约束：</span> <span class="bold">ALTER TABLE DeptTab</span> <span class="bold">ADD CONSTRAINT pk_DeptTab_Deptno PRIMARY KEY（Deptno）;</span> <span class="bold">ALTER TABLE EmpTab</span> <span class="bold">ADD CONSTRAINT fk_DeptTab_Deptno</span> <span class="bold">FOREIGN KEY（Deptno）REFERENCES DeptTab;</span> <span class="bold">ALTER TABLE EmpTab MODIFY（Ename VARCHAR2（15）NOT NULL）;</span></pre></div>
                  <!-- class="example" -->
                  <div class="infoboxnotealso" id="GUID-BD33E259-FCAD-4904-885D-8BDC0EBA65D8__GUID-A71D6534-18C3-488D-AAB5-6FFCA09CAA74">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN11537" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a> ，了解有关为大型生产数据库创建和维护约束的信息</p>
                  </div>
               </div><a id="ADFNS288"></a><div class="sect3"><a id="GUID-EFD9F9F7-A5F8-4EAF-BB65-EF5533D0C3EE" name="GUID-EFD9F9F7-A5F8-4EAF-BB65-EF5533D0C3EE"></a><h4 id="ADFNS-GUID-EFD9F9F7-A5F8-4EAF-BB65-EF5533D0C3EE" class="sect4">定义约束所需的权限</h4>
                  <div>
                     <p>如果您具有<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>系统特权，则可以在您创建的表上定义约束。
                     </p>
                     <p>如果您具有<code class="codeph">ALTER</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>系统特权，则可以在任何现有表上定义约束。
                     </p>
                     <p>如果您具有特定表的<code class="codeph">ALTER</code>对象特权，则可以在该表上定义约束。
                     </p>
                     <p><code class="codeph">UNIQUE</code>和<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>约束要求表所有者具有<code class="codeph">UNLIMITED</code> <code class="codeph">TABLESPACE</code>系统特权或包含关联索引的表空间的配额。
                     </p>
                     <p>如果父表或视图位于模式中，或者您对父表或视图中引用键的列具有<code class="codeph">REFERENCES</code>特权，则可以定义<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束。
                     </p>
                     <div class="infoboxnotealso" id="GUID-EFD9F9F7-A5F8-4EAF-BB65-EF5533D0C3EE__NOTE-136-CA50E8EC">
                        <p class="notep1">也可以看看：</p><a href="data-integrity.html#GUID-3D911857-CCB1-43F6-BCDD-B334125E3AAB">创建FOREIGN KEY约束所需的权限</a></div>
                  </div>
               </div><a id="ADFNS289"></a><div class="sect3"><a id="GUID-26C98424-D3D8-4D46-A190-0B7DB12DC9C4" name="GUID-26C98424-D3D8-4D46-A190-0B7DB12DC9C4"></a><h4 id="ADFNS-GUID-26C98424-D3D8-4D46-A190-0B7DB12DC9C4" class="sect4">命名约束</h4>
                  <div>
                     <p>使用约束子句的<code class="codeph">CONSTRAINT</code>选项将名称分配给约束<code class="codeph">NOT</code> <code class="codeph">NULL</code> ， <code class="codeph">UNIQUE</code> ， <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code> ， <code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>和<code class="codeph">CHECK</code> 。此名称在您拥有的约束中必须是唯一的。如果未指定约束名称，则Oracle Database会自动分配一个约束名称。
                     </p>
                     <p>选择您自己的名称会使约束违规的错误消息更容易理解，并且如果SQL语句多次运行，则会阻止使用不同名称创建重复约束。</p>
                     <p>有关<code class="codeph">constraint</code>子句的<code class="codeph">CONSTRAINT</code>选项的示例，请参阅前面的<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>和<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句示例。每个约束的名称包含在数据字典中有关约束的其他信息中。
                     </p>
                     <div class="infoboxnotealso" id="GUID-26C98424-D3D8-4D46-A190-0B7DB12DC9C4__GUID-1C7DABF8-2805-4CF6-B755-8B5A3C31C33E">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="data-integrity.html#GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4">查看关于约束的信息</a> ”</span>以获取静态数据字典视图的示例</p>
                     </div>
                  </div>
               </div>
            </div><a id="ADFNS1027"></a><a id="ADFNS00608"></a><div class="sect2"><a id="GUID-42D44B4C-DA38-4334-AADE-40DE556EF8CD" name="GUID-42D44B4C-DA38-4334-AADE-40DE556EF8CD"></a><h3 id="ADFNS-GUID-42D44B4C-DA38-4334-AADE-40DE556EF8CD" class="sect3">启用和禁用约束</h3>
               <div>
                  <p>本节介绍手动启用和禁用约束的机制和过程。</p>
                  <p><strong class="term">启用约束</strong> 。启用约束后，将对关联列中的数据值强制执行相应的规则。约束的定义存储在数据字典中。
                  </p>
                  <p><strong class="term">禁用约束</strong> 。禁用约束时，不会强制执行相应的规则。约束的定义仍存储在数据字典中。
                  </p>
                  <p>完整性约束表示关于数据库中的数据的断言。启用约束时，此断言始终为true。禁用约束时，断言可能不正确，因为违反完整性约束的数据可能位于数据库中。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-42D44B4C-DA38-4334-AADE-40DE556EF8CD__GUID-764D3D99-D557-410C-8D71-1ABD65B4F122">话题：</p>
                  </div>
                  <!-- class="section" -->
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="data-integrity.html#GUID-5A594C99-6BCA-423E-85B9-D239AFD15D20">为什么禁用约束？</a></p>
                     </li>
                     <li>
                        <p><a href="data-integrity.html#GUID-F015285D-CC4F-4145-8F8A-2C59E5BD7948">创建启用的约束（默认）</a></p>
                     </li>
                     <li>
                        <p><a href="data-integrity.html#GUID-32182C58-2918-431F-A1A3-F33BFE764C4D">创建禁用约束</a></p>
                     </li>
                     <li>
                        <p><a href="data-integrity.html#GUID-63DF885E-A240-47BA-9BA3-151EF4233F15">启用现有约束</a></p>
                     </li>
                     <li>
                        <p><a href="data-integrity.html#GUID-E24C0A56-6BE7-465A-9D7A-71C55EBBA5F6">禁用现有约束</a></p>
                     </li>
                     <li>
                        <p><a href="data-integrity.html#GUID-E8DF7A23-0866-4C62-8120-DF52D4E0BEFA">启用和禁用键约束的准则</a></p>
                     </li>
                     <li>
                        <p><a href="data-integrity.html#GUID-15695420-BD41-4572-90A5-3452EEFF167F">修复约束异常</a></p>
                     </li>
                  </ul>
               </div><a id="ADFNS290"></a><div class="sect3"><a id="GUID-5A594C99-6BCA-423E-85B9-D239AFD15D20" name="GUID-5A594C99-6BCA-423E-85B9-D239AFD15D20"></a><h4 id="ADFNS-GUID-5A594C99-6BCA-423E-85B9-D239AFD15D20" class="sect4">为什么禁用约束？</h4>
                  <div>
                     <p>在日常操作中，保持启用约束。在某些情况下，暂时禁用表的约束对于性能原因是有意义的。例如：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用SQL * Loader将大量数据加载到表中时</p>
                        </li>
                        <li>
                           <p>执行对表进行大量更改的批处理操作时（例如通过向现有编号添加1000来更改每个员工编号）</p>
                        </li>
                        <li>
                           <p>一次导入或导出一个表时</p>
                        </li>
                     </ul>
                     <p>暂时关闭约束可以加快这些操作。</p>
                  </div>
               </div><a id="ADFNS292"></a><a id="ADFNS291"></a><div class="sect3"><a id="GUID-F015285D-CC4F-4145-8F8A-2C59E5BD7948" name="GUID-F015285D-CC4F-4145-8F8A-2C59E5BD7948"></a><h4 id="ADFNS-GUID-F015285D-CC4F-4145-8F8A-2C59E5BD7948" class="sect4">创建启用的约束（默认）</h4>
                  <div>
                     <p>定义完整性约束（使用<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>或<code class="codeph">ALTER</code> <code class="codeph">TABLE</code> ）时，Oracle数据库默认启用约束。为了清楚代码，您可以通过在其定义中包含<code class="codeph">ENABLE</code>子句来显式启用约束，如<a href="data-integrity.html#GUID-F015285D-CC4F-4145-8F8A-2C59E5BD7948__BEIEHFFC">例12-7所示</a> 。
                     </p>
                     <div class="example" id="GUID-F015285D-CC4F-4145-8F8A-2C59E5BD7948__BEIEHFFC">
                        <p class="titleinexample">示例12-7创建启用的约束</p><pre class="oac_no_warn" dir="ltr">/ *使用CREATE TABLE语句创建启用约束（ENABLE关键字是可选的）：* / DROP TABLE t1; CREATE TABLE t1（Empno NUMBER（5）PRIMARY KEY <span class="bold">ENABLE</span> ）; / *创建没有约束的表，然后使用ALTER TABLE语句添加启用的约束（ENABLE关键字是可选的）：* / DROP TABLE t2; CREATE TABLE t2（Empno NUMBER（5））; ALTER TABLE t2 ADD PRIMARY KEY（Empno） <span class="bold">ENABLE</span> ;</pre></div>
                     <!-- class="example" -->
                     <p>在为每个事务一次填充一行的表定义约束时包括<code class="codeph">ENABLE</code>子句。这可确保数据始终保持一致，并降低每个DML语句的性能开销。
                     </p>
                     <p>如果<code class="codeph">TABLE</code>的现有行违反完整性约束，则尝试启用完整性约束的<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句将失败。该语句回退，既不存储也不启用约束定义。
                     </p>
                     <div class="infoboxnotealso" id="GUID-F015285D-CC4F-4145-8F8A-2C59E5BD7948__GUID-78173330-E758-485F-B0D2-E3027C869C94">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="data-integrity.html#GUID-15695420-BD41-4572-90A5-3452EEFF167F">修复约束异常</a> ，以获取有关违反约束的行的更多信息</p>
                     </div>
                  </div>
               </div><a id="ADFNS294"></a><a id="ADFNS293"></a><div class="sect3"><a id="GUID-32182C58-2918-431F-A1A3-F33BFE764C4D" name="GUID-32182C58-2918-431F-A1A3-F33BFE764C4D"></a><h4 id="ADFNS-GUID-32182C58-2918-431F-A1A3-F33BFE764C4D" class="sect4">创建禁用约束</h4>
                  <div>
                     <p>您可以通过在其定义中包含<code class="codeph">DISABLE</code>子句来定义和禁用完整性约束（使用<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>或<code class="codeph">ALTER</code> <code class="codeph">TABLE</code> ），如<a href="data-integrity.html#GUID-32182C58-2918-431F-A1A3-F33BFE764C4D__BEIDJABH">例12-8所示</a> 。
                     </p>
                     <div class="example" id="GUID-32182C58-2918-431F-A1A3-F33BFE764C4D__BEIDJABH">
                        <p class="titleinexample">示例12-8创建禁用的约束</p><pre class="oac_no_warn" dir="ltr">/ *使用CREATE TABLE语句创建禁用约束* / DROP TABLE t1;创建表t1（Empno NUMBER（5）PRIMARY KEY <span class="bold">DISABLE</span> ）; / *创建没有约束的表，然后使用ALTER TABLE语句添加禁用约束* / DROP TABLE t2; CREATE TABLE t2（Empno NUMBER（5））; ALTER TABLE t2添加主键（Empno） <span class="bold">禁用</span> ;</pre></div>
                     <!-- class="example" -->
                     <p>在定义表的约束时，包括<code class="codeph">DISABLE</code>子句，以便在任何其他人访问之前插入大量数据，特别是如果必须在插入数据后清理数据，或者必须用序列号或父/子关系填充空列。
                     </p>
                     <p>定义和禁用约束的<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句永远不会失败，因为它的规则不会强制执行。
                     </p>
                  </div>
               </div><a id="ADFNS296"></a><a id="ADFNS295"></a><div class="sect3"><a id="GUID-63DF885E-A240-47BA-9BA3-151EF4233F15" name="GUID-63DF885E-A240-47BA-9BA3-151EF4233F15"></a><h4 id="ADFNS-GUID-63DF885E-A240-47BA-9BA3-151EF4233F15" class="sect4">启用现有约束</h4>
                  <div>
                     <p>清理数据并填充空列后，可以启用数据插入期间禁用的约束。</p>
                     <p>要启用现有约束，请使用带有<code class="codeph">ENABLE</code>子句的<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句，如<a href="data-integrity.html#GUID-63DF885E-A240-47BA-9BA3-151EF4233F15__BEIFJEII">例12-9所示</a> 。
                     </p>
                     <div class="example" id="GUID-63DF885E-A240-47BA-9BA3-151EF4233F15__BEIFJEII">
                        <p class="titleinexample">示例12-9启用现有约束</p><pre class="oac_no_warn" dir="ltr">- 创建具有禁用约束的表：DROP TABLE DeptTab; CREATE TABLE DeptTab（Deptno NUMBER（3）PRIMARY KEY DISABLE，Dname VARCHAR2（15），Loc VARCHAR2（15），CONSTRAINT uk_DeptTab_Dname_Loc UNIQUE（Dname，Loc）DISABLE，CONSTRAINT c_DeptTab_Loc CHECK（Loc IN（'NEW YORK'，'BOSTON'） ，'芝加哥'））DISABLE）; <span class="bold">- 启用约束：</span> ALTER TABLE DeptTab <span class="bold">ENABLE PRIMARY KEY</span> <span class="bold">ENABLE CONSTRAINT uk_DeptTab_Dname_Loc</span> <span class="bold">ENABLE CONSTRAINT c_DeptTab_Loc;</span>
</pre></div>
                     <!-- class="example" -->
                     <p>如果任何表行违反完整性约束，则尝试启用完整性约束的<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句将失败。回滚该语句并且未启用约束。
                     </p>
                     <div class="infoboxnotealso" id="GUID-63DF885E-A240-47BA-9BA3-151EF4233F15__GUID-2499668D-6CF2-496E-B269-D139DA7C724B">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="data-integrity.html#GUID-15695420-BD41-4572-90A5-3452EEFF167F">修复约束异常</a> ，以获取有关违反约束的行的更多信息</p>
                     </div>
                  </div>
               </div><a id="ADFNS298"></a><a id="ADFNS297"></a><div class="sect3"><a id="GUID-E24C0A56-6BE7-465A-9D7A-71C55EBBA5F6" name="GUID-E24C0A56-6BE7-465A-9D7A-71C55EBBA5F6"></a><h4 id="ADFNS-GUID-E24C0A56-6BE7-465A-9D7A-71C55EBBA5F6" class="sect4">禁用现有约束</h4>
                  <div>
                     <p>如果必须在表包含数据时执行大型插入或更新，则可以临时禁用约束以提高批量操作的性能。</p>
                     <p>要禁用现有约束，请使用带有<code class="codeph">DISABLE</code>子句的<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句，如<a href="data-integrity.html#GUID-E24C0A56-6BE7-465A-9D7A-71C55EBBA5F6__BEIBEAEF">例12-10所示</a> 。
                     </p>
                     <div class="example" id="GUID-E24C0A56-6BE7-465A-9D7A-71C55EBBA5F6__BEIBEAEF">
                        <p class="titleinexample">示例12-10禁用现有约束</p><pre class="oac_no_warn" dir="ltr">- 使用启用的约束创建表：DROP TABLE DeptTab; CREATE TABLE DeptTab（Deptno NUMBER（3）PRIMARY KEY ENABLE，Dname VARCHAR2（15），Loc VARCHAR2（15），CONSTRAINT uk_DeptTab_Dname_Loc UNIQUE（Dname，Loc）ENABLE，CONSTRAINT c_DeptTab_Loc CHECK（Loc IN（'NEW YORK'，'BOSTON'） ，'芝加哥'））ENABLE）; <span class="bold">- 禁用约束：</span> ALTER TABLE DeptTab <span class="bold">DISABLE PRIMARY KEY</span> <span class="bold">DISABLE CONSTRAINT uk_DeptTab_Dname_Loc</span> <span class="bold">DISABLE CONSTRAINT c_DeptTab_Loc;</span></pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADFNS299"></a><div class="sect3"><a id="GUID-E8DF7A23-0866-4C62-8120-DF52D4E0BEFA" name="GUID-E8DF7A23-0866-4C62-8120-DF52D4E0BEFA"></a><h4 id="ADFNS-GUID-E8DF7A23-0866-4C62-8120-DF52D4E0BEFA" class="sect4">启用和禁用键约束的准则</h4>
                  <div>
                     <p>启用或禁用<code class="codeph">UNIQUE</code> ， <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>和<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束时，请注意几个重要问题和先决条件。<code class="codeph">UNIQUE</code>键和<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>约束通常由数据库管理员管理。
                     </p>
                     <div class="infoboxnotealso" id="GUID-E8DF7A23-0866-4C62-8120-DF52D4E0BEFA__GUID-892A2B9A-F56B-497C-BD34-99C580436903">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN11537" target="_blank"><span class="italic">Oracle数据库管理员指南</span></a>和<a href="data-integrity.html#GUID-CF3CFAA8-CB91-4AA6-9740-9F682ABD52C2">管理FOREIGN KEY约束</a></p>
                     </div>
                  </div>
               </div><a id="ADFNS300"></a><div class="sect3"><a id="GUID-15695420-BD41-4572-90A5-3452EEFF167F" name="GUID-15695420-BD41-4572-90A5-3452EEFF167F"></a><h4 id="ADFNS-GUID-15695420-BD41-4572-90A5-3452EEFF167F" class="sect4">修复约束异常</h4>
                  <div>
                     <p>如果表的某一行违反了完整性约束，则该行违反约束并被称为约束的<strong class="term">异常</strong> 。如果存在任何异常，则无法启用约束。必须先更新或删除违反约束的行，然后才能启用约束。
                     </p>
                     <p>在尝试启用约束时，可以标识特定完整性约束的异常。</p>
                     <div class="infoboxnotealso" id="GUID-15695420-BD41-4572-90A5-3452EEFF167F__GUID-C7912A98-43BA-4660-98A1-5D04C94A7E3E">
                        <p class="notep1">也可以看看：</p>
                        <p>有关此过程的详细信息，请<a href="data-integrity.html#GUID-15695420-BD41-4572-90A5-3452EEFF167F">修复约束异常</a></p>
                     </div>
                     <p>当您尝试创建或启用约束时，由于存在完整性约束异常，语句将失败，因此将回滚该语句。在更新或删除所有异常之前，您无法启用约束。要确定哪些行违反了完整性约束，请在<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>或<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句的<code class="codeph">ENABLE</code>子句中包含<code class="codeph">EXCEPTIONS</code>选项。
                     </p>
                     <div class="infoboxnotealso" id="GUID-15695420-BD41-4572-90A5-3452EEFF167F__GUID-A6B8720D-6220-47FB-92FA-FCFC0CCF998B">
                        <p class="notep1">也可以看看：</p>
                        <p>有关响应约束异常的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN11537" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                     </div>
                  </div>
               </div>
            </div><a id="ADFNS301"></a><a id="ADFNS00609"></a><div class="sect2"><a id="GUID-6DD75EB0-2F91-45F4-A3E7-7B0FC60643E0" name="GUID-6DD75EB0-2F91-45F4-A3E7-7B0FC60643E0"></a><h3 id="ADFNS-GUID-6DD75EB0-2F91-45F4-A3E7-7B0FC60643E0" class="sect3">修改约束</h3>
               <div>
                  <p>从Oracle8 <span class="italic">i</span>开始，您可以使用<code class="codeph">MODIFY</code> <code class="codeph">CONSTRAINT</code>子句修改现有约束，如<a href="data-integrity.html#GUID-6DD75EB0-2F91-45F4-A3E7-7B0FC60643E0__BEIJBACB">例12-11所示</a> 。
                  </p>
                  <div class="infoboxnotealso" id="GUID-6DD75EB0-2F91-45F4-A3E7-7B0FC60643E0__GUID-B3EFD7FA-4782-4D55-8781-2C001CBE6A07">
                     <p class="notep1">也可以看看：</p>
                     <p>有关可以修改的参数的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01001" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                  </div>
                  <div class="example" id="GUID-6DD75EB0-2F91-45F4-A3E7-7B0FC60643E0__BEIJBACB">
                     <p class="titleinexample">例12-11修改约束</p><pre class="oac_no_warn" dir="ltr">/ *创建然后修改CHECK约束：* / DROP TABLE X1Tab;创建表X1Tab（a1 NUMBER CONSTRAINT c_X1Tab_a1检查（a1&gt; 3）DEFERRABLE DISABLE）; ALTER TABLE X1Tab <span class="bold">MODIFY CONSTRAINT c_X1Tab_a1 ENABLE</span> ; ALTER TABLE X1Tab <span class="bold">MODIFY CONSTRAINT c_X1Tab_a1 RELY</span> ; ALTER TABLE X1Tab <span class="bold">MODIFY CONSTRAINT c_X1Tab_a1初步推迟</span> ; ALTER TABLE X1Tab <span class="bold">MODIFY CONSTRAINT c_X1Tab_a1 ENABLE NOVALIDATE</span> ; / *创建然后修改PRIMARY KEY约束：* / DROP TABLE t1; CREATE TABLE t1（a1 INT，b1 INT）; ALTER TABLE t1 ADD CONSTRAINT pk_t1_a1 PRIMARY KEY（a1）DISABLE;更改表t1 <span class="bold">使用索引</span> <span class="bold">初始修改主要关键字</span> <span class="bold">PCTFREE = 30启用无法使用</span> ; ALTER TABLE t1 <span class="bold">MODIFY PRIMARY KEY ENABLE NOVALIDATE</span> ;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADFNS303"></a><a id="ADFNS302"></a><div class="sect2"><a id="GUID-65CF33C0-03C2-408A-86D5-56C9A17B1E5D" name="GUID-65CF33C0-03C2-408A-86D5-56C9A17B1E5D"></a><h3 id="ADFNS-GUID-65CF33C0-03C2-408A-86D5-56C9A17B1E5D" class="sect3">重命名约束</h3>
               <div>
                  <p>您可以修改的约束的一个属性是其名称。您将重命名约束的情况包括：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您想要克隆表及其约束。</p>
                        <p>约束名称必须是唯一的，即使在多个模式中也是如此。因此，原始表中的约束不能与克隆表中的约束相同。</p>
                     </li>
                     <li>
                        <p>您使用默认的系统生成名称创建了约束，现在您希望为其指定一个易于记忆的名称，以便您可以轻松启用和禁用它。</p>
                     </li>
                  </ul>
                  <p><a href="data-integrity.html#GUID-65CF33C0-03C2-408A-86D5-56C9A17B1E5D__BEIBIHGF">例12-12</a>显示了如何查找系统生成的约束名称并进行更改。
                  </p>
                  <div class="example" id="GUID-65CF33C0-03C2-408A-86D5-56C9A17B1E5D__BEIBIHGF">
                     <p class="titleinexample">示例12-12重命名约束</p><pre class="oac_no_warn" dir="ltr">DROP TABLE T;创建表T（C1号主键，C2号）;</pre><p>查询：</p><pre class="oac_no_warn" dir="ltr">SELECT CONSTRAINT_NAME FROM USER_CONSTRAINTS WHERE TABLE_NAME ='T'AND CONSTRAINT_TYPE ='P';</pre><p>结果（系统生成的约束名称名称不同）：</p><pre class="oac_no_warn" dir="ltr">CONSTRAINT_NAME ------------------------------ <span class="bold">SYS_C0013059</span>选择了1行。
 </pre><p>将前一个查询中报告的名称中的约束重命名为<code class="codeph">T_C1_PK</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE T RENAME CONSTRAINT SYS_C0013059 TO T_C1_PK;</pre><p>查询：</p><pre class="oac_no_warn" dir="ltr">SELECT CONSTRAINT_NAME FROM USER_CONSTRAINTS WHERE TABLE_NAME ='T'AND CONSTRAINT_TYPE ='P';</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">CONSTRAINT_NAME ------------------------------ T_C1_PK选择了1行。</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADFNS304"></a><a id="ADFNS00610"></a><div class="sect2"><a id="GUID-64DAF3ED-702F-4D3A-8703-1EB917DCC8AC" name="GUID-64DAF3ED-702F-4D3A-8703-1EB917DCC8AC"></a><h3 id="ADFNS-GUID-64DAF3ED-702F-4D3A-8703-1EB917DCC8AC" class="sect3">减少限制</h3>
               <div>
                  <p>您可以使用<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句的<code class="codeph">DROP</code>子句删除约束。您将删除约束的情况包括：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>约束强制执行不再为真的规则。</p>
                     </li>
                     <li>
                        <p>不再需要约束。</p>
                     </li>
                  </ul>
                  <p>要删除约束以及依赖于它的所有其他完整性约束，请指定<code class="codeph">CASCADE</code> 。</p>
                  <div class="example" id="GUID-64DAF3ED-702F-4D3A-8703-1EB917DCC8AC__GUID-29E0B450-3E16-4D79-9A0C-CDCB4EA9B106">
                     <p class="titleinexample">例12-13删除约束</p><pre class="oac_no_warn" dir="ltr">- 使用约束创建表：DROP TABLE DeptTab; CREATE TABLE DeptTab（Deptno NUMBER（3）PRIMARY KEY，Dname VARCHAR2（15），Loc VARCHAR2（15），CONSTRAINT uk_DeptTab_Dname_Loc UNIQUE（Dname，Loc），CONSTRAINT c_DeptTab_Loc CHECK（Loc IN（'NEW YORK'，'BOSTON'，'芝加哥'）） ）; - 删除约束：ALTER TABLE DeptTab <span class="bold">DROP PRIMARY KEY</span> <span class="bold">DROP CONSTRAINT uk_DeptTab_Dname_Loc</span> <span class="bold">DROP CONSTRAINT c_DeptTab_Loc</span> ;</pre></div>
                  <!-- class="example" -->
                  <p>删除<code class="codeph">UNIQUE</code> ， <code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>和<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束时，请注意几个重要问题和先决条件。<code class="codeph">UNIQUE</code>和<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>约束通常由数据库管理员管理。
                  </p>
                  <div class="infoboxnotealso" id="GUID-64DAF3ED-702F-4D3A-8703-1EB917DCC8AC__GUID-E1A0CA84-313A-436F-B73B-A67088931762">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句的<code class="codeph">DROP</code>子句的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01001" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a> 。
                           </p>
                        </li>
                        <li>
                           <p>有关删除约束的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN11549" target="_blank"><span class="italic">Oracle数据库管理员指南</span></a> 。
                           </p>
                        </li>
                        <li>
                           <p>有关<code class="codeph">DROP</code> <code class="codeph">TABLE</code>语句的<code class="codeph">CASCADE</code> <code class="codeph">CONSTRAINTS</code>子句的信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01806" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> ，该子句删除引用已删除表中主键和唯一键的所有参照完整性约束</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS00611"></a><div class="sect2"><a id="GUID-CF3CFAA8-CB91-4AA6-9740-9F682ABD52C2" name="GUID-CF3CFAA8-CB91-4AA6-9740-9F682ABD52C2"></a><h3 id="ADFNS-GUID-CF3CFAA8-CB91-4AA6-9740-9F682ABD52C2" class="sect3">管理FOREIGN KEY约束</h3>
               <div>
                  <p><code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束强制执行不同表中列之间的关系。因此，如果引用的主键或唯一键的约束不存在或未启用，则无法启用它们。
                  </p>
               </div><a id="ADFNS305"></a><div class="sect3"><a id="GUID-C86E69EC-35E8-4440-8444-443085384D7F" name="GUID-C86E69EC-35E8-4440-8444-443085384D7F"></a><h4 id="ADFNS-GUID-C86E69EC-35E8-4440-8444-443085384D7F" class="sect4">外键列的数据类型和名称</h4>
                  <div>
                     <p>必须对从属表和引用表中的相应列使用相同的数据类型。列名称不需要匹配。</p>
                  </div>
               </div><a id="ADFNS306"></a><div class="sect3"><a id="GUID-A47FF2B5-4283-4F06-802D-EBE1F4D07579" name="GUID-A47FF2B5-4283-4F06-802D-EBE1F4D07579"></a><h4 id="ADFNS-GUID-A47FF2B5-4283-4F06-802D-EBE1F4D07579" class="sect4">限制复合外键中的列</h4>
                  <div>
                     <p>由于外键引用父表的<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>和<code class="codeph">UNIQUE</code>键，并且使用索引强制执行<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>和<code class="codeph">UNIQUE</code>键约束，因此复合外键限制为32列。
                     </p>
                  </div>
               </div><a id="ADFNS307"></a><div class="sect3"><a id="GUID-202DA05E-17A5-4DF4-8A33-DB5BE4694618" name="GUID-202DA05E-17A5-4DF4-8A33-DB5BE4694618"></a><h4 id="ADFNS-GUID-202DA05E-17A5-4DF4-8A33-DB5BE4694618" class="sect4">默认情况下外键引用主键</h4>
                  <div>
                     <p>如果在定义<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束（单列或复合）时列列表未包含在<code class="codeph">REFERENCES</code>选项中，则Oracle数据库假定您打算引用指定表的主键。或者，您可以在括号中的父表中显式指定要引用的列。Oracle数据库会自动检查以验证此列列表是否引用了父表的主键或唯一键。如果没有，则返回信息性错误。
                     </p>
                  </div>
               </div><a id="ADFNS308"></a><div class="sect3"><a id="GUID-3D911857-CCB1-43F6-BCDD-B334125E3AAB" name="GUID-3D911857-CCB1-43F6-BCDD-B334125E3AAB"></a><h4 id="ADFNS-GUID-3D911857-CCB1-43F6-BCDD-B334125E3AAB" class="sect4">创建FOREIGN KEY约束所需的权限</h4>
                  <div>
                     <p>要创建<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束，约束的创建者必须具有父表和子表的特权访问权限。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><strong class="term">父表</strong>引用完整性约束的创建者必须拥有父表，或者对构成父表的父键的列具有<code class="codeph">REFERENCES</code>对象特权。
                           </p>
                        </li>
                        <li>
                           <p><strong class="term">子表</strong>引用完整性约束的创建者必须能够创建表（即<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>系统特权）或更改子表的能力（即子表的<code class="codeph">ALTER</code>对象特权）或<code class="codeph">ALTER</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>系统特权）。
                           </p>
                        </li>
                     </ul>
                     <p>在这两种情况下，都无法通过角色获得必要的特权;必须将它们显式授予约束的创建者。</p>
                     <p>这些限制允许：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>子表的所有者明确决定强制执行哪些约束以及哪些其他用户可以创建约束</p>
                        </li>
                        <li>
                           <p>父表的所有者明确决定外键是否可以依赖于表中的主键和唯一键</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADFNS309"></a><div class="sect3"><a id="GUID-F8D4553F-02C3-40A8-8AB4-ABBFD28FB640" name="GUID-F8D4553F-02C3-40A8-8AB4-ABBFD28FB640"></a><h4 id="ADFNS-GUID-F8D4553F-02C3-40A8-8AB4-ABBFD28FB640" class="sect4">选择外键如何实现参照完整性</h4>
                  <div>
                     <p>Oracle数据库允许强制执行不同类型的参照完整性操作，如<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束的定义所指定的：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><strong class="term">阻止删除或更新</strong>父键如果子表中有一行引用该键，则默认设置可防止删除或更新父键。例如：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE Emp_tab（FOREIGN KEY（Deptno）REFERENCES Dept_tab）;</pre></li>
                        <li>
                           <p><strong class="term">删除父密钥时删除子行</strong> <code class="codeph">ON</code> <code class="codeph">DELETE</code> <code class="codeph">CASCADE</code>操作允许删除从子表引用的父密钥数据，但不会更新。删除父键中的数据时，还会删除子表中依赖于已删除父键值的所有行。要指定此引用操作，请在<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束的定义中包含<code class="codeph">ON</code> <code class="codeph">DELETE</code> <code class="codeph">CASCADE</code>选项。例如：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE Emp_tab（FOREIGN KEY（Deptno）REFERENCES Dept_tab ON DELETE CASCADE）;</pre></li>
                        <li>
                           <p><strong class="term">删除父键时将外键设置为空</strong> <code class="codeph">ON</code> <code class="codeph">DELETE</code> <code class="codeph">SET</code> <code class="codeph">NULL</code>操作允许删除引用父键的数据，但不更新。删除父键中的引用数据时，子表中依赖于这些父键值的所有行的外键都设置为<code class="codeph">NULL</code> 。要指定此引用操作，请在<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束的定义中包含<code class="codeph">ON</code> <code class="codeph">DELETE</code> <code class="codeph">SET</code> <code class="codeph">NULL</code>选项。例如：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE Emp_tab（FOREIGN KEY（Deptno）REFERENCES Dept_tab ON DELETE SET NULL）;</pre></li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADFNS310"></a><a id="ADFNS00613"></a><div class="sect2"><a id="GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4" name="GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4"></a><h3 id="ADFNS-GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4" class="sect3">查看有关约束的信息</h3>
               <div>
                  <p>要查找约束的名称，它们影响的列以及帮助您管理它们的其他信息，请查询静态数据字典视图<code class="codeph">*_CONSTRAINTS</code>和<code class="codeph">*_CONS_COLUMNS</code> ，如<a href="data-integrity.html#GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4__BEIHBHDA">例12-14所示</a> 。
                  </p>
                  <div class="infoboxnotealso" id="GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4__GUID-E81487D7-E2FB-4B6D-AEAE-11D4FCB1AC75">
                     <p class="notep1">也可以看看：</p>
                     <p> 有关<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20047" target="_blank"><code class="codeph">*_CONSTRAINTS</code></a>和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20045" target="_blank"><code class="codeph">*_CONS_COLUMNS</code></a>信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20047" target="_blank"><code class="codeph">*_CONSTRAINTS</code></a> <span class="italic">Oracle数据库参考</span></p>
                  </div>
                  <div class="example" id="GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4__BEIHBHDA">
                     <p class="titleinexample">示例12-14查看有关约束的信息</p><pre class="oac_no_warn" dir="ltr">DROP TABLE DeptTab; CREATE TABLE DeptTab（Deptno NUMBER（3）PRIMARY KEY，Dname VARCHAR2（15），Loc VARCHAR2（15），CONSTRAINT uk_DeptTab_Dname_Loc UNIQUE（Dname，Loc），CONSTRAINT c_DeptTab_Loc CHECK（Loc IN（'NEW YORK'，'BOSTON'，'芝加哥'）） ）; DROP TABLE EmpTab; CREATE TABLE EmpTab（Empno NUMBER（5）PRIMARY KEY，Ename VARCHAR2（15）NOT NULL，Job VARCHAR2（10），Mgr NUMBER（5）CONSTRAINT r_EmpTab_Mgr REFERENCES EmpTab ON DELETE CASCADE，Hiredate DATE，Sal NUMBER（7,2）， Comm NUMBER（5,2），Deptno NUMBER（3）NOT NULL CONSTRAINT r_EmpTab_Deptno REFERENCES DeptTab）; - 格式列（可选）：COLUMN CONSTRAINT_NAME FORMAT A20; COLUMN CONSTRAINT_TYPE FORMAT A4 HEADING'TYPE'; COLUMN TABLE_NAME格式A10; COLUMN R_CONSTRAINT_NAME格式A17; COLUMN SEARCH_CONDITION FORMAT A40; COLUMN COLUMN_NAME FORMAT A12;</pre><p>在DeptTab和EmpTab中列出可访问的约束：</p><pre class="oac_no_warn" dir="ltr">SELECT CONSTRAINT_NAME，CONSTRAINT_TYPE，TABLE_NAME，R_CONSTRAINT_NAME来自USER_CONSTRAINTS WHERE（TABLE_NAME ='DEPTTAB'或TABLE_NAME ='EMPTAB'）按CONSTRAINT_NAME订购;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">CONSTRAINT_NAME TYPE TABLE_NAME R_CONSTRAINT_NAME -------------------- ---- ---------- ------------ ----- C_DEPTTAB_LOC C DEPTTAB R_EMPTAB_DEPTNO R EMPTAB SYS_C006286 R_EMPTAB_MGR R EMPTAB SYS_C006290 SYS_C006286 E DEPTTAB SYS_C006288 C EMPTAB SYS_C006289 C EMPTAB SYS_C006290 P EMPTAB UK_DEPTTAB_DNAME_LOC U DEPTTAB选择了8行。
 </pre><p>在<code class="codeph">DeptTab</code>和<code class="codeph">EmpTab</code>区分<code class="codeph">NOT</code> <code class="codeph">NULL</code>和<code class="codeph">CHECK</code>约束：</p><pre class="oac_no_warn" dir="ltr">SELECT CONSTRAINT_NAME，SEARCH_CONDITION来自USER_CONSTRAINTS WHERE（TABLE_NAME ='DEPTTAB'或TABLE_NAME ='EMPTAB'）AND CONSTRAINT_TYPE ='C'ORDER BY CONSTRAINT_NAME;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">CONSTRAINT_NAME SEARCH_CONDITION -------------------- ---------------------------- ------------ C_DEPTTAB_LOC Loc IN（'NEW YORK'，'BOSTON'，'CHICAGO'）SYS_C006288“ENAME”不为空SYS_C006289“DEPTNO”不为空3行选择。
 </pre><p>对于<code class="codeph">DeptTab</code>和<code class="codeph">EmpTab</code> ，列出构成约束的列：</p><pre class="oac_no_warn" dir="ltr">SELECT CONSTRAINT_NAME，TABLE_NAME，COLUMN_NAME FROM USER_CONS_COLUMNS WHERE（TABLE_NAME ='DEPTTAB'或TABLE_NAME ='EMPTAB'）按CONSTRAINT_NAME订购;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">CONSTRAINT_NAME TABLE_NAME COLUMN_NAME -------------------- ---------- ------------ C_DEPTTAB_LOC DEPTTAB LOC R_EMPTAB_DEPTNO EMPTAB DEPTNO R_EMPTAB_MGR EMPTAB MGR SYS_C006286 DEPTTAB DEPTNO SYS_C006288 EMPTAB ENAME SYS_C006289 EMPTAB DEPTNO SYS_C006290 EMPTAB EMPNO UK_DEPTTAB_DNAME_LOC DEPTTAB LOC UK_DEPTTAB_DNAME_LOC DEPTTAB DNAME选择了9行。
</pre></div>
                  <!-- class="example" -->
                  <p>注意：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>某些约束名称是用户指定的（例如<code class="codeph">UK_DEPTTAB_DNAME_LOC</code> ），而其他约束名称是系统指定的（例如<code class="codeph">SYS_C006290</code> ）。
                        </p>
                     </li>
                     <li>
                        <p>每个约束类型在<code class="codeph">CONSTRAINT_TYPE</code>列中用不同的字符表示。此表汇总了每种约束类型使用的字符：</p>
                        <div class="tblformal" id="GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4__GUID-16980D4A-4238-4CF5-BFD0-B4044854E0B3">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="90%" border="1" summary="This table summarizes CONSTRAINT_TYPE column characters." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="23%" id="d53462e7288">约束类型</th>
                                    <th align="left" valign="bottom" width="77%" id="d53462e7291">字符</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d53462e7296" headers="d53462e7288 ">
                                       <p><code class="codeph">PRIMARY</code> <code class="codeph">KEY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d53462e7296 d53462e7291 ">
                                       <p><code class="codeph">P</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d53462e7308" headers="d53462e7288 ">
                                       <p><code class="codeph">UNIQUE</code> <code class="codeph">KEY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d53462e7308 d53462e7291 ">
                                       <p><code class="codeph">ü</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d53462e7320" headers="d53462e7288 ">
                                       <p><code class="codeph">FOREIGN</code> <code class="codeph">KEY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d53462e7320 d53462e7291 ">
                                       <p><code class="codeph">[R</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d53462e7332" headers="d53462e7288 ">
                                       <p><code class="codeph">CHECK</code> ， <code class="codeph">NOT</code> <code class="codeph">NULL</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d53462e7332 d53462e7291 ">
                                       <p><code class="codeph">C</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnote" id="GUID-7366FD3D-373F-4862-8334-8CAEAE6189F4__GUID-1723DC4B-8D01-4201-89BA-6C27F8F20F67">
                           <p class="notep1">注意：</p>
                           <p>附加约束类型由<code class="codeph">CONSTRAINT_TYPE</code>列中的字符“ <code class="codeph">V</code> ”表示。此约束类型对应于使用<code class="codeph">WITH</code> <code class="codeph">CHECK</code> <code class="codeph">OPTION</code>为视图创建的约束。
                           </p>
                        </div>
                     </li>
                  </ul>
                  <p>这些约束明确列在<code class="codeph">SEARCH_CONDITION</code>列中：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">NOT</code> <code class="codeph">NULL</code>约束</p>
                     </li>
                     <li>
                        <p>用户定义的<code class="codeph">CHECK</code>约束的条件</p>
                     </li>
                  </ul>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
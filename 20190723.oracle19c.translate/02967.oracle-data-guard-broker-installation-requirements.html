<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="For all members that you want to add to a broker configuration, you must complete installation and configuration tasks."></meta>
      <meta name="description" content="For all members that you want to add to a broker configuration, you must complete installation and configuration tasks."></meta>
      <title>Oracle Data Guard安装</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Broker "></meta>
      <meta property="og:description" content="For all members that you want to add to a broker configuration, you must complete installation and configuration tasks."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Broker"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="data-guard-broker.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-29T04:14:25-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96245-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="oracle-data-guard-broker-concepts.html" title="Previous" type="text/html"></link>
      <link rel="next" href="managing-oracle-data-guard-broker-configurations.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Data Guard Broker"></meta>
    <meta name="dcterms.isVersionOf" content="DGBKR"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oracle-data-guard-broker-concepts.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="managing-oracle-data-guard-broker-configurations.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">经纪人</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle Data Guard安装</li>
            </ol>
            <a id="GUID-21393DF3-FD7E-44AA-A90C-6533E03CBDDA" name="GUID-21393DF3-FD7E-44AA-A90C-6533E03CBDDA"></a><a id="DGBKR1300"></a>
            
            <h2 id="DGBKR-GUID-21393DF3-FD7E-44AA-A90C-6533E03CBDDA" class="sect2"><span class="enumeration_chapter">2</span> Oracle Data Guard安装</h2>
         </header>
         <div class="ind">
            <div>
               <p>对于要添加到代理配置的所有成员，必须完成安装和配置任务。</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="oracle-data-guard-broker-installation-requirements.html#GUID-DBCAC77D-8B4D-4727-B89E-6CFA69302187" title="Oracle Data Guard包含在Oracle数据库软件的企业版和个人版中。">Oracle Data Guard安装</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-data-guard-broker-installation-requirements.html#GUID-BFDA8675-DA97-4910-B3FF-5DD5CFF5CC6D" title="这些是您在使用代理之前必须满足的条件。">先决条件</a></p>
                     <div class="infoboxnotealso" id="GUID-21393DF3-FD7E-44AA-A90C-6533E03CBDDA__GUID-29ECD3FD-4624-441E-9332-E8673C9ADEFF">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="upgrading-downgrading-in-data-guard-broker-configuration.html#GUID-82682FF3-6052-471B-B581-5E91183A5432" title="使用这些主题可以在代理配置中升级或降级Oracle数据库和Oracle Enterprise Manager云控制（云控制）。">Oracle Data Guard Broker升级和降级</a>有助于在Oracle Data Guard代理配置中升级到新版本</p>
                     </div>
                  </li>
               </ul>
            </div><a id="DGBKR070"></a><div class="props_rev_3"><a id="GUID-DBCAC77D-8B4D-4727-B89E-6CFA69302187" name="GUID-DBCAC77D-8B4D-4727-B89E-6CFA69302187"></a><h3 id="DGBKR-GUID-DBCAC77D-8B4D-4727-B89E-6CFA69302187" class="sect3"><span class="enumeration_section">2.1</span> Oracle Data Guard安装</h3>
               <div>
                  <p>Oracle Data Guard包含在Oracle数据库软件的企业版和个人版中。</p>
                  <p>您可以使用SQL * Plus，Oracle Data Guard代理的命令行界面（DGMGRL）或Oracle Enterprise Manager云控制（云控制）的兼容版本来管理Oracle Data Guard配置。</p>
                  <p>在您希望包含在代理配置中的每个位置安装Oracle Enterprise Edition或Personal Edition数据库软件。如果要使用Oracle Data Guard的图形用户界面，则必须安装兼容的Cloud Control版本。</p>
                  <p>此外，要使用快速启动故障转移，必须安装DGMGRL并运行观察器软件。Oracle建议在与主系统和备用系统分开的计算机系统上运行观察器。要在观察计算机上安装DGMGRL，请使用以下列表中描述的方法之一：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>通过从Oracle Universal Installer中选择<code class="codeph">Administrator</code>选项来安装完整的Oracle Client Administrator。
                        </p>
                        <p>此安装包括DGMGRL，但不包括Cloud Control代理。这允许您使用DGMGRL命令管理观察者进程，但不能使用云控制。（Cloud Control代理可以单独安装。）</p>
                     </li>
                     <li>
                        <p>安装完整的Oracle数据库企业版或个人版软件包</p>
                        <p>此安装包括DGMGRL和Cloud Control代理，允许您使用Cloud Control或DGMGRL命令管理观察者进程。</p>
                        <div class="infoboxnote" id="GUID-DBCAC77D-8B4D-4727-B89E-6CFA69302187__GUID-D0D616C2-B3F1-4A44-B805-F6EEE44E1AB4">
                           <p class="notep1">注意：</p>
                           <p>观察者可以从支持它的任何平台运行，并且该平台可以与主要或目标备用数据库的平台不同。</p>
                        </div>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-DBCAC77D-8B4D-4727-B89E-6CFA69302187__GUID-C8CFCAB0-4E82-413B-A779-9815C7828AE6">
                     <p class="notep1">注意：</p>
                     <p>零数据丢失恢复设备不需要安装代理软件。</p>
                  </div>
               </div>
            </div><a id="DGBKR090"></a><div class="props_rev_3"><a id="GUID-BFDA8675-DA97-4910-B3FF-5DD5CFF5CC6D" name="GUID-BFDA8675-DA97-4910-B3FF-5DD5CFF5CC6D"></a><h3 id="DGBKR-GUID-BFDA8675-DA97-4910-B3FF-5DD5CFF5CC6D" class="sect3"><span class="enumeration_section">2.2</span>先决条件</h3>
               <div>
                  <p>这些是您在使用代理之前必须满足的条件。</p>
                  <p></p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>主数据库和备用数据库必须使用相同版本的Oracle数据库，并且每个数据库都可以安装在单实例或多实例环境中。数据库必须获得Oracle Enterprise Edition或Personal Edition的许可。</p>
                     </li>
                     <li>
                        <p>必须使用服务器参数文件（SPFILE）来确保代理可以持久地协调代理属性与任何相关初始化参数值之间的值。有关更多信息，请参阅可<a href="managing-oracle-data-guard-broker-configuration-members.html#GUID-58646FFF-47E4-40DC-A7DA-C4AB33CDB16B" title="可配置属性会影响数据库或远程同步实例的操作或配置。">配置（可更改）属性</a> 。
                        </p>
                        <p>如果配置中的任何数据库是Oracle RAC数据库，则必须相应地配置服务器参数文件（SPFILE）以在Oracle RAC环境中使用。</p>
                        <div class="infoboxnotealso" id="GUID-BFDA8675-DA97-4910-B3FF-5DD5CFF5CC6D__GUID-BBB99DBB-72DC-4E3F-8BD5-13A2BAC7FF40">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../racad/administering-database-instances-and-cluster-databases.html#RACAD020" target="_blank"><span><cite>“Oracle Real Application Clusters管理和部署指南”，</cite></span></a>以获取有关Oracle RAC中初始化文件的信息</p>
                        </div>
                     </li>
                     <li>
                        <p>对于配置中的所有数据库，必须将<code class="codeph">DG_BROKER_START</code>初始化参数的值设置为<code class="codeph">TRUE</code> 。有关更多信息，请参阅<a href="managing-oracle-data-guard-broker-configurations.html#GUID-BAAE6C51-C29F-4950-A885-EB1289A230B2" title="设置配置文件后，必须将每个数据库的DG_BROKER_START初始化参数设置为TRUE才能启动DMON进程。">启动Data Guard Broker</a> 。（Cloud Control会自动设置此参数。）
                        </p>
                     </li>
                     <li>
                        <p>如果配置中的任何数据库是Oracle RAC数据库，则必须为该数据库设置<code class="codeph">DG_BROKER_CONFIG_FILE</code> <span class="italic"><code class="codeph">n</code></span>初始化参数，以使它们指向该数据库的所有实例的相同共享文件。共享文件可以是群集文件系统上的文件（如果可用），也可以使用Oracle自动存储管理（Oracle ASM）进行存储。
                        </p>
                        <div class="infoboxnotealso" id="GUID-BFDA8675-DA97-4910-B3FF-5DD5CFF5CC6D__GUID-9AF37BF4-C792-46B5-9FE1-3F622BBD605F">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="oracle-data-guard-broker-concepts.html#GUID-755CC51D-7438-453D-9B59-2EA3B9689D8B" title="代理的DMON进程持久地维护有关二进制配置文件中代理配置的所有成员的信息。">配置管理中的</a>配置文件信息。另请参阅<a href="managing-oracle-data-guard-broker-configurations.html#GUID-E4EE9680-63B7-4483-843B-47E33FC41B20" title="When the broker is started for the first time, configuration files are automatically created and named using a default path name and filename that is operating-system specific.">设置代理配置文件</a>以获取有关设置<a href="managing-oracle-data-guard-broker-configurations.html#GUID-E4EE9680-63B7-4483-843B-47E33FC41B20" title="当代理首次启动时，将自动创建配置文件，并使用特定于操作系统的默认路径名和文件名进行命名。">代理配置文件</a>的详细信息。
                           </p>
                        </div>
                     </li>
                     <li>
                        <p>如果将现有备用数据库配置到代理配置中，则必须在主数据库和备用数据库上设置网络配置文件。Cloud Control可以在创建备用数据库时帮助您创建配置文件。</p>
                        <div class="infoboxnotealso" id="GUID-BFDA8675-DA97-4910-B3FF-5DD5CFF5CC6D__GUID-D0B956CD-30F9-4EB2-9A57-930A4310460E">
                           <p class="notep1">也可以看看：</p>
                           <p>有关网络配置文件的详细信息，请<a href="../netag/managing-network-address-information.html#NETAG187" target="_blank"><span class="italic">参见“Oracle数据库网络服务管理员指南”</span></a></p>
                        </div>
                     </li>
                     <li>
                        <p>在代理配置中，使用<code class="codeph">DGConnectIdentifer</code>属性为每个数据库指定连接标识符。数据库的连接标识符必须：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>允许配置中的所有其他数据库到达它。</p>
                           </li>
                           <li>
                              <p>允许到达Oracle RAC数据库的所有实例。</p>
                           </li>
                           <li>
                              <p>指定所有实例动态向侦听器注册的服务，以便可以在Oracle RAC数据库上进行连接时故障转移。</p>
                              <div class="infoboxnote" id="GUID-BFDA8675-DA97-4910-B3FF-5DD5CFF5CC6D__GUID-CC7BA29F-20D8-4FED-8689-2015BE4BEAC9">
                                 <p class="notep1">警告：</p>该服务不应该是由Oracle Clusterware定义和管理的服务。
                              </div>
                           </li>
                           <li>
                              <p>将故障转移属性设置为允许主数据库的重做传输服务继续将重做数据传送到Oracle RAC备用数据库，即使该备用数据库的接收实例已失败也是如此。</p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-BFDA8675-DA97-4910-B3FF-5DD5CFF5CC6D__GUID-34E764AC-4F97-469A-B7C1-71A995D4F1DE">
                           <p class="notep1">也可以看看：</p>
                           <p>有关连接标识符的详细信息，请参见<a href="../netag/identifying-and-accessing-database.html#NETAG364" target="_blank"><span><cite>“Oracle数据库网络服务管理员指南</cite></span></a></p>
                        </div>
                     </li>
                     <li>
                        <p>要使DGMGRL在代理操作过程中重新启动实例，必须向每个实例的本地侦听器注册静态服务。在发生快速启动故障转移之后，还需要静态服务注册以使观察者能够重新启动实例，作为自动恢复旧主数据库的一部分。只有在未使用Oracle Clusterware或Oracle Restart时，才需要定义和注册静态服务。</p>
                        <p>默认情况下，代理假定静态服务名称为<code class="codeph">db_unique_name_DGMGRL.db_domain</code>并且期望已在<code class="codeph">listener.ora</code>文件中使用以下内容启动<code class="codeph">listener.ora</code>器：</p><pre class="oac_no_warn" dir="ltr">LISTENER =（DESCRIPTION =（ADDRESS_LIST =（ADDRESS =（PROTOCOL = tcp）（HOST = host_name）（PORT = port_num））））SID_LIST_LISTENER =（SID_LIST =（SID_DESC =（SID_NAME = sid_name）（GLOBAL_DBNAME = db_unique_name_DGMGRL.db_domain）（ ORACLE_HOME = oracle_home）（ENVS =“TNS_ADMIN = oracle_home / network / admin”）））</pre><p>或者，您可以使用其他静态服务名称。如果这样做，请确保修改<code class="codeph">StaticConnectIdentifier</code>特定于实例的属性以反映已注册的静态服务。
                        </p>
                        <p>要确保已正确设置连接标识符，请使用<code class="codeph">VALIDATE STATIC CONNECT IDENTIFIER</code>命令。
                        </p>
                        <div class="infoboxnotealso" id="GUID-BFDA8675-DA97-4910-B3FF-5DD5CFF5CC6D__GUID-0C09B30F-AC24-4EB2-9FE0-5A85F90BB6C9">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关配置静态服务的详细信息，请参见“ <a href="../netag/enabling-advanced-features.html#NETAG1589" target="_blank"><span><cite>Oracle数据库网络服务管理员指南”</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关使用静态服务和<code class="codeph">StaticConnectIdentifier</code>配置属性的其他信息，请参阅<a href="http://support.oracle.com" target="_blank"><code class="codeph">http://support.oracle.com</code></a>的My Oracle Support说明1387859.1。</p>
                              </li>
                              <li>
                                 <p><a href="oracle-data-guard-broker-commands.html#GUID-C3E2884B-E0A7-492A-9A42-EEB4D6CCCBE6" title="VALIDATE STATIC CONNECT IDENTIFIER命令验证数据库的静态连接标识符。">确认静态连接标识符</a></p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li>
                        <p>必须以<code class="codeph">ARCHIVELOG</code>模式打开主数据库。
                        </p>
                     </li>
                     <li>
                        <p>必须将主数据库和备用数据库的<code class="codeph">COMPATIBLE</code>初始化参数设置为11.2或更高。但是，如果要利用Oracle Database Release 19c的新功能，请在Oracle Data Guard配置中的所有数据库上将<code class="codeph">COMPATIBLE</code>参数设置为19.1。
                        </p>
                        <p>要使代理工作，必须在主数据库和备用数据库上将<code class="codeph">COMPATIBLE</code>初始化参数设置为相同的值。如果值不同，则重做传输服务可能无法将重做数据从主数据库传输到备用数据库。
                        </p>
                     </li>
                     <li>
                        <p>选择并配置重做传输身份验证方法，如<a href="../sbydb/creating-oracle-data-guard-physical-standby.html#SBYDB00424" target="_blank"><span><cite>Oracle Data Guard概念和管理中所述</cite></span></a> 。
                        </p>
                     </li>
                     <li>
                        <p>从Oracle Database <span class="italic">12c</span>第1版（12.1）开始，对于要添加到代理配置的所有数据库，必须清除任何设置了<code class="codeph">SERVICE</code>属性但不包含<code class="codeph">NOREGISTER</code>属性的<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>参数。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-BFDA8675-DA97-4910-B3FF-5DD5CFF5CC6D__GUID-8AAFA9C2-252A-45F2-8438-905ED13B376A">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="managing-oracle-data-guard-broker-configurations.html#GUID-BAAE6C51-C29F-4950-A885-EB1289A230B2" title="设置配置文件后，必须将每个数据库的DG_BROKER_START初始化参数设置为TRUE才能启动DMON进程。">启动Data Guard Broker</a>以获取有关准备和启动Oracle Data Guard代理的更多信息</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
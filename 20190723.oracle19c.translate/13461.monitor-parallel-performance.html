<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You should perform the following types of monitoring when trying to diagnose parallel execution performance problems."></meta>
      <meta name="description" content="You should perform the following types of monitoring when trying to diagnose parallel execution performance problems."></meta>
      <title>监控并行执行性能</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="VLDB and Partitioning Guide"></meta>
      <meta property="og:description" content="You should perform the following types of monitoring when trying to diagnose parallel execution performance problems."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="VLDB and Partitioning Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="vldb-and-partitioning-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-23T18:05:22-07:00"></meta>
      <meta name="dcterms.title" content="VLDB and Partitioning Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2008, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96199-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="parameters-parallel-exec.html" title="Previous" type="text/html"></link>
      <link rel="next" href="parallel-exec-tips.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="VLDBG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="parameters-parallel-exec.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="parallel-exec-tips.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">VLDB和分区指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="using-parallel.html" property="item" typeof="WebPage"><span property="name">使用并行执行</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">监控并行执行性能</li>
            </ol>
            <a id="GUID-F8B2CF46-B722-4216-9902-3E09D9AF799F" name="GUID-F8B2CF46-B722-4216-9902-3E09D9AF799F"></a><a id="VLDBG1513"></a>
            
            <h2 id="VLDBG-GUID-F8B2CF46-B722-4216-9902-3E09D9AF799F" class="sect2">监控并行执行性能</h2>
         </header>
         <div class="ind">
            <div>
               <p>在尝试诊断并行执行性能问题时，应执行以下类型的监视。</p>
               <p>这些类型的监控包括：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="monitor-parallel-performance.html#GUID-106575E7-F384-40F4-AF90-95D247580C0D" title="您可以使用动态性能视图监视并行执行性能。">使用动态性能视图监控并行执行性能</a></p>
                  </li>
                  <li>
                     <p><a href="monitor-parallel-performance.html#GUID-2BBBDAFF-7AB8-41E0-B570-73741E4D4B90" title="您可以使用动态性能视图监视会话统计信息，以诊断并行执行性能。">监控会话统计</a></p>
                  </li>
                  <li>
                     <p><a href="monitor-parallel-performance.html#GUID-2B465353-9C19-4FCD-8605-EC2AAD32140F" title="您可以使用动态性能视图监视系统统计信息，以诊断并行执行性能。">监控系统统计</a></p>
                  </li>
                  <li>
                     <p><a href="monitor-parallel-performance.html#GUID-A36F1D1B-113B-4AEC-8CC1-B284DE87CF8C" title="Oracle数据库中可用的信息与通过操作系统实用程序提供的信息（例如基于UNIX的系统上的sar和vmstat）之间存在相当大的重叠。">监控操作系统统计</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-F8B2CF46-B722-4216-9902-3E09D9AF799F__GUID-E7AD7ACD-A3FF-455F-9D42-263CF7B4308A">
                  <p class="notep1">也可以看看：</p>
                  <p><a href="../refrn/dynamic-performance-views.html#REFRN003" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>有关动态视图的信息</p>
               </div>
            </div><a id="VLDBG1514"></a><div class="props_rev_3"><a id="GUID-106575E7-F384-40F4-AF90-95D247580C0D" name="GUID-106575E7-F384-40F4-AF90-95D247580C0D"></a><h3 id="VLDBG-GUID-106575E7-F384-40F4-AF90-95D247580C0D" class="sect3">使用动态性能视图监控并行执行性能</h3>
               <div>
                  <p>您可以使用动态性能视图监视并行执行性能。</p>
                  <div class="section">
                     <p>Oracle数据库实时监控功能使您可以在执行时监视SQL语句的性能。当SQL语句并行运行或者为单次执行消耗至少5秒的CPU或I / O时间时，SQL监视会自动启动。</p>
                     <p>在系统运行几天后，您应监视并行执行性能统计信息，以确定并行处理是否最佳。使用本节中讨论的任何视图执行此操作。</p>
                     <p>在Oracle Real Application Clusters中，本节中描述的全局版本视图聚合来自多个实例的统计信息。全局视图的名称以<code class="codeph">G</code>开头，例如<code class="codeph">V$FILESTAT</code> <code class="codeph">GV$FILESTAT</code> <code class="codeph">V$FILESTAT</code> ，依此类推。
                     </p>
                     <div class="infoboxnotealso" id="GUID-106575E7-F384-40F4-AF90-95D247580C0D__GUID-D3E190F2-98CA-460E-BFD8-6FFB5B757EEB">
                        <p class="notep1">也可以看看：</p>
                        <p>有关监视性能的更多信息，请<a href="../tgsql/introduction-to-sql-tuning.html#TGSQL112" target="_blank"><span><cite>参见“Oracle数据库SQL调优指南”</cite></span></a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="VLDBG1515"></a><div class="props_rev_3"><a id="GUID-D05F455D-41AA-43EA-8C89-5D5D3431CC2D" name="GUID-D05F455D-41AA-43EA-8C89-5D5D3431CC2D"></a><h4 id="VLDBG-GUID-D05F455D-41AA-43EA-8C89-5D5D3431CC2D" class="sect4">V $ PX_BUFFER_ADVICE</h4>
                  <div>
                     <p>您可以使用<code class="codeph">V$PX_BUFFER_ADVICE</code>动态性能视图监视并行执行性能。
                     </p>
                     <div class="section">
                        <p><code class="codeph">V$PX_BUFFER_ADVICE</code>视图提供有关所有并行查询的历史和预计最大缓冲区使用情况的统计信息。您可以查阅此视图以重新配置SGA大小，以响应并行查询的内存不足问题。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="VLDBG1516"></a><div class="props_rev_3"><a id="GUID-B313F707-8B3F-4F50-99AE-3EAEE2B5302A" name="GUID-B313F707-8B3F-4F50-99AE-3EAEE2B5302A"></a><h4 id="VLDBG-GUID-B313F707-8B3F-4F50-99AE-3EAEE2B5302A" class="sect4">V $ PX_SESSION</h4>
                  <div>
                     <p>您可以使用<code class="codeph">V$PX_SESSION</code>动态性能视图监视并行执行性能。
                     </p>
                     <div class="section">
                        <p><code class="codeph">V$PX_SESSION</code>视图显示有关查询服务器会话，组，集和服务器编号的数据。它还显示有关代表并行执行的进程的实时数据。此表包含有关请求的并行度（DOP）和授予操作的实际DOP的信息。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="VLDBG1517"></a><div class="props_rev_3"><a id="GUID-F7BDBA0A-2231-4FAE-88A1-A46FCFA649A0" name="GUID-F7BDBA0A-2231-4FAE-88A1-A46FCFA649A0"></a><h4 id="VLDBG-GUID-F7BDBA0A-2231-4FAE-88A1-A46FCFA649A0" class="sect4">V $ PX_SESSTAT</h4>
                  <div>
                     <p>您可以使用<code class="codeph">V$PX_SESSTAT</code>动态性能视图监视并行执行性能。
                     </p>
                     <div class="section">
                        <p><code class="codeph">V$PX_SESSTAT</code>视图提供来自<code class="codeph">V$PX_SESSION</code>和<code class="codeph">V$SESSTAT</code>表的会话信息的连接。因此，标准会话可用的所有会话统计信息都可用于使用并行执行执行的所有会话。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="VLDBG1518"></a><div class="props_rev_3"><a id="GUID-52DC85C5-AC65-4CF5-AD93-88930CD8B818" name="GUID-52DC85C5-AC65-4CF5-AD93-88930CD8B818"></a><h4 id="VLDBG-GUID-52DC85C5-AC65-4CF5-AD93-88930CD8B818" class="sect4">V $ PX_PROCESS</h4>
                  <div>
                     <p>您可以使用<code class="codeph">V$PX_PROCESS</code>动态性能视图监视并行执行性能。
                     </p>
                     <div class="section">
                        <p><code class="codeph">V$PX_PROCESS</code>视图包含有关并行进程的信息，包括状态，会话ID，进程ID和其他信息。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="VLDBG1519"></a><div class="props_rev_3"><a id="GUID-5F8268E5-AB2C-4CC0-BF6A-F845323CDD3E" name="GUID-5F8268E5-AB2C-4CC0-BF6A-F845323CDD3E"></a><h4 id="VLDBG-GUID-5F8268E5-AB2C-4CC0-BF6A-F845323CDD3E" class="sect4">V $ PX_PROCESS_SYSSTAT</h4>
                  <div>
                     <p>您可以使用<code class="codeph">V$PX_PROCESS_SYSSTAT</code>动态性能视图监视并行执行性能。
                     </p>
                     <div class="section">
                        <p><code class="codeph">V$PX_PROCESS_SYSSTAT</code>视图显示查询服务器的状态并提供缓冲区分配统计信息。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="VLDBG1520"></a><div class="props_rev_3"><a id="GUID-4E8EDAE2-CF50-4796-8BBF-081AA4D425FE" name="GUID-4E8EDAE2-CF50-4796-8BBF-081AA4D425FE"></a><h4 id="VLDBG-GUID-4E8EDAE2-CF50-4796-8BBF-081AA4D425FE" class="sect4">V $ PQ_SESSTAT</h4>
                  <div>
                     <p>您可以使用<code class="codeph">V$PQ_SESSTAT</code>动态性能视图监视并行执行性能。
                     </p>
                     <div class="section">
                        <p><code class="codeph">V$PQ_SESSTAT</code>视图显示系统中所有当前服务器组的状态，例如有关查询如何分配进程的数据以及多用户和负载平衡算法如何影响默认值和提示值。
                        </p>
                        <p>在查看这些视图中的数据后，您可能需要调整一些参数设置以提高性能。在这种情况下，请参阅<a href="parameters-parallel-exec.html#GUID-8632FD0C-AB90-4F1F-81B3-58D24C3AAD74" title="本主题介绍了有关调整并行执行的一般参数的讨论。">调整并行执行的常规参数</a>的讨论。定期查询这些视图以监视长时间运行的并行操作的进度。
                        </p>
                        <p>对于许多动态性能视图，必须将参数<code class="codeph">TIMED_STATISTICS</code>设置为<code class="codeph">TRUE</code> ，以便Oracle Database收集每个视图的统计信息。您可以使用<code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code>或<code class="codeph">ALTER</code> <code class="codeph">SESSION</code>语句打开和关闭<code class="codeph">TIMED_STATISTICS</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="VLDBG1521"></a><div class="props_rev_3"><a id="GUID-81418734-F146-4477-8EC2-145F9A6CEA83" name="GUID-81418734-F146-4477-8EC2-145F9A6CEA83"></a><h4 id="VLDBG-GUID-81418734-F146-4477-8EC2-145F9A6CEA83" class="sect4">V $ PQ_TQSTAT</h4>
                  <div>
                     <p>您可以使用<code class="codeph">V$PQ_TQSTAT</code>动态性能视图监视并行执行性能。
                     </p>
                     <div class="section">
                        <p>举一个简单的例子，考虑两个表之间的散列连接，在一个只有两个不同值的列上进行连接。最好的情况是，这个哈希函数有一个哈希值给并行执行服务器A而另一个给并行执行服务器B.一个DOP为2，但是，如果它是4，那么至少有两个并行执行服务器没有工作。要发现此类偏差，请使用类似于以下示例的查询：</p><pre class="oac_no_warn" dir="ltr">SELECT dfo_number，tq_id，server_type，process，num_rows FROM V $ PQ_TQSTAT ORDER BY dfo_number DESC，tq_id，server_type，process;</pre><p>解决此问题的最佳方法可能是选择其他连接方法;嵌套循环连接可能是最佳选择。或者，如果一个连接表相对于另一个连接表较小，则可以使用<code class="codeph">PQ_DISTRIBUTE</code>提示来提示<code class="codeph">BROADCAST</code>分配方法。优化程序考虑<code class="codeph">BROADCAST</code>分配方法，但要求<code class="codeph">OPTIMIZER_FEATURES_ENABLE</code>设置为9.0.2或更高。
                        </p>
                        <p>现在，假设您有一个具有高基数的连接键，但是一个值包含大部分数据，例如，按年计算的熔岩灯销售额。唯一一年销量很大的一年是1968年，而1968年的并行执行服务器则不堪重负。您应该使用与前一段中描述的相同的纠正措施。</p>
                        <p><code class="codeph">V$PQ_TQSTAT</code>视图提供表队列级别的消息流量的详细报告。<code class="codeph">V$PQ_TQSTAT</code>数据仅在从执行并行SQL语句的会话中查询时有效。表队列是查询服务器组之间，并行执行协调器和查询服务器组之间，或查询服务器组和协调器之间的管道。表队列由<code class="codeph">PX SEND &lt;partitioning type&gt;</code> （例如， <code class="codeph">PX SEND HASH</code> ）和<code class="codeph">PX</code> <code class="codeph">RECEIVE</code>在操作列中明确表示。</p>
                        <p>对于每个查询服务器进程， <code class="codeph">V$PQ_TQSTAT</code>都有一行，它在每个表队列中读取或写入。将10个使用者进程连接到10个生产者进程的表队列在视图中有20行。通过<code class="codeph">TQ_ID</code>和表队列标识符对字节列和组进行<code class="codeph">TQ_ID</code> ，以获得通过每个表队列发送的总字节数。将此与优化器估计值进行比较;大的变化可能表明需要使用更大的样本来分析数据。
                        </p>
                        <p>计算按<code class="codeph">TQ_ID</code>分组的字节方差。大的差异表明工作量不平衡。您应该调查大差异，以确定生产者是否开始使用不均等的数据分布，或者分布本身是否有偏差。如果数据本身存在偏差，则可能表示基数较低或不同值较少。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="VLDBG14094"></a><div class="props_rev_3"><a id="GUID-3DB98071-BA38-4688-87A2-A8AD92F094BD" name="GUID-3DB98071-BA38-4688-87A2-A8AD92F094BD"></a><h4 id="VLDBG-GUID-3DB98071-BA38-4688-87A2-A8AD92F094BD" class="sect4">V $ RSRC_CONS_GROUP_HISTORY</h4>
                  <div>
                     <p>您可以使用<code class="codeph">V$RSRC_CONS_GROUP_HISTORY</code>动态性能视图监视并行执行性能。
                     </p>
                     <div class="section">
                        <p>在<code class="codeph">V$RSRC_CONS_GROUP_HISTORY</code>视图显示消费群的统计数据的历史记录中的每个条目<code class="codeph">V$RSRC_PLAN_HISTORY</code>具有非NULL计划，包括有关并行语句排队信息。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="VLDBG14095"></a><div class="props_rev_3"><a id="GUID-1E30DB2D-B283-4070-97C6-03956ABC9976" name="GUID-1E30DB2D-B283-4070-97C6-03956ABC9976"></a><h4 id="VLDBG-GUID-1E30DB2D-B283-4070-97C6-03956ABC9976" class="sect4">V $ RSRC_CONSUMER_GROUP</h4>
                  <div>
                     <p>您可以使用<code class="codeph">V$RSRC_CONSUMER_GROUP</code>动态性能视图监视并行执行性能。
                     </p>
                     <div class="section">
                        <p><code class="codeph">V$RSRC_CONSUMER_GROUP</code>视图显示与当前活动资源使用者组相关的数据，包括有关并行语句的信息。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="VLDBG14096"></a><div class="props_rev_3"><a id="GUID-3AE0A4E5-E043-4B9D-B59C-0DB34CC5AA89" name="GUID-3AE0A4E5-E043-4B9D-B59C-0DB34CC5AA89"></a><h4 id="VLDBG-GUID-3AE0A4E5-E043-4B9D-B59C-0DB34CC5AA89" class="sect4">V $ RSRC_PLAN</h4>
                  <div>
                     <p>您可以使用<code class="codeph">V$RSRC_PLAN</code>动态性能视图监视并行执行性能。
                     </p>
                     <div class="section">
                        <p><code class="codeph">V$RSRC_PLAN</code>视图显示所有当前活动资源计划的名称，包括并行语句排队的状态。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="VLDBG14097"></a><div class="props_rev_3"><a id="GUID-012B30B0-CDF3-45FF-B04C-4623B8A0A5DB" name="GUID-012B30B0-CDF3-45FF-B04C-4623B8A0A5DB"></a><h4 id="VLDBG-GUID-012B30B0-CDF3-45FF-B04C-4623B8A0A5DB" class="sect4">V $ RSRC_PLAN_HISTORY</h4>
                  <div>
                     <p>您可以使用<code class="codeph">V$RSRC_PLAN_HISTORY</code>动态性能视图监视并行执行性能。
                     </p>
                     <p><code class="codeph">V$RSRC_PLAN_HISTORY</code>显示在实例上启用，禁用或修改资源计划的历史记录。历史记录包括并行语句排队状态</p>
                  </div>
               </div><a id="VLDBG14098"></a><div class="props_rev_3"><a id="GUID-1FF1855F-B438-422B-BFC2-1815B47766BB" name="GUID-1FF1855F-B438-422B-BFC2-1815B47766BB"></a><h4 id="VLDBG-GUID-1FF1855F-B438-422B-BFC2-1815B47766BB" class="sect4">V $ RSRC_SESSION_INFO</h4>
                  <div>
                     <p>您可以使用<code class="codeph">V$RSRC_SESSION_INFO</code>动态性能视图监视并行执行性能。
                     </p>
                     <div class="section">
                        <p><code class="codeph">V$RSRC_SESSION_INFO</code>视图显示每个会话的资源管理器统计信息，包括并行语句队列统计信息。列包括<code class="codeph">PQ_SERVERS</code>和<code class="codeph">PQ_STATUS</code> 。</p>
                        <p>如果会话处于活动状态并运行并行查询，则<code class="codeph">V$RSRC_SESSION_INFO</code>视图的<code class="codeph">PQ_SERVERS</code>列包含活动并行服务器的数量。如果查询排队，则显示此查询尝试运行的并行服务器数。
                        </p>
                        <p><code class="codeph">PQ_STATUS</code>列维护并行语句排队的原因</p>
                        <div class="infoboxnotealso" id="GUID-1FF1855F-B438-422B-BFC2-1815B47766BB__GUID-159264B5-D178-4375-8473-5651679E40B0">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">V$RSRC_SESSION_INFO</code>视图的信息，请<a href="../refrn/dynamic-performance-views.html#REFRN003" target="_blank"><span><cite>参见Oracle数据库参考</cite></span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="VLDBG14132"></a><div class="props_rev_3"><a id="GUID-95325AA4-3E5D-4A20-BF5F-AB34B8FA0DB2" name="GUID-95325AA4-3E5D-4A20-BF5F-AB34B8FA0DB2"></a><h4 id="VLDBG-GUID-95325AA4-3E5D-4A20-BF5F-AB34B8FA0DB2" class="sect4">V $ RSRCMGRMETRIC</h4>
                  <div>
                     <p>您可以使用<code class="codeph">V$RSRCMGRMETRIC</code>动态性能视图监视并行执行性能。
                     </p>
                     <div class="section">
                        <p><code class="codeph">V$RSRCMGRMETRIC</code>视图显示与并行语句排队相关的统计信息。
                        </p>
                        <p>与并行语句排队相关的统计信息将添加到资源管理器度量标准中，该度量标准将获取给定一分钟窗口的统计信息并将其保留大约一小时。</p>
                        <p>列包括<code class="codeph">AVG_ACTIVE_PARALLEL_STMTS</code> ， <code class="codeph">AVG_QUEUED_PARALLEL_STMTS</code> ， <code class="codeph">AVG_ACTIVE_PARALLEL_SERVERS</code> ， <code class="codeph">AVG_QUEUED_PARALLEL_SERVERS</code>和<code class="codeph">PARALLEL_SERVERS_LIMIT</code> 。</p>
                        <div class="infoboxnotealso" id="GUID-95325AA4-3E5D-4A20-BF5F-AB34B8FA0DB2__GUID-49E538E3-191E-440F-817D-00FE042A4FC7">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">V$RSRCMGRMETRIC</code>视图的信息，请<a href="../refrn/dynamic-performance-views.html#REFRN003" target="_blank"><span><cite>参见Oracle数据库参考</cite></span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="VLDBG1522"></a><div class="props_rev_3"><a id="GUID-2BBBDAFF-7AB8-41E0-B570-73741E4D4B90" name="GUID-2BBBDAFF-7AB8-41E0-B570-73741E4D4B90"></a><h3 id="VLDBG-GUID-2BBBDAFF-7AB8-41E0-B570-73741E4D4B90" class="sect3">监控会话统计</h3>
               <div>
                  <p>您可以使用动态性能视图监视会话统计信息，以诊断并行执行性能。</p>
                  <div class="section">
                     <p>使用<code class="codeph">GV$PX_SESSION</code>确定并行执行的服务器组的配置。在该示例中，会话9是查询协调器，而会话7和21在第一组中，第一组。第18和第20集是第一组，第二组。此查询的请求和授予的DOP为2，如以下查询的输出所示：</p><pre class="oac_no_warn" dir="ltr">SELECT QCSID，SID，INST_ID“Inst”，SERVER_GROUP“Group”，SERVER_SET“Set”，DEGREE“Degree”，REQ_DEGREE“Req Degree”FROM GV $ PX_SESSION ORDER BY QCSID，QCINST_ID，SERVER_GROUP，SERVER_SET;</pre><p>您的输出应类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">QCSID SID Inst Group设置学位要求学位---------- ---------- ---------- ----------- -------- ---------- ---------- 9 9 1 9 7 1 1 1 2 2 9 21 1 1 1 2 2 9 18 1 1 2 2 2 9 20 1 1 2 2 2</pre><p>对于单个实例，请使用<code class="codeph">SELECT</code> <code class="codeph">FROM</code> <code class="codeph">V$PX_SESSION</code>并且不要包含列名称<code class="codeph">Instance</code> <code class="codeph">ID</code> 。</p>
                     <p>使用<code class="codeph">GV$PX_SESSION</code>的上一个示例的输出中显示的进程协作完成相同的任务。下一个示例显示了连接查询的执行，以根据物理读取确定这些进程的进度。使用此查询来跟踪任何特定统计信息：</p><pre class="oac_no_warn" dir="ltr">SELECT QCSID，SID，INST_ID“Inst”，SERVER_GROUP“Group”，SERVER_SET“Set”，NAME“Stat Name”，VALUE FROM GV $ PX_SESSTAT A，V $ STATNAME B WHERE A.STATISTIC＃= B.STATISTIC＃AND NAME LIKE '物理读数'和值&gt; 0按QCSID，QCINST_ID，SERVER_GROUP，SERVER_SET排序;</pre><p>您的输出应类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">QCSID SID Inst Group设置Stat Name VALUE ------ ----- ------ ------ ------ ------------- ----- ---------- 9 9 1物理读取3863 9 7 1 1 1物理读取2 9 21 1 1 1物理读取2 9 18 1 1 2物理读取2 9 20 1 1 2物理读取2</pre><p>使用以前类型的查询来跟踪<code class="codeph">V$STATNAME</code>统计信息。根据需要经常重复此查询以观察查询服务器进程的进度。
                     </p>
                     <p>下一个查询使用<code class="codeph">V$PX_PROCESS</code>来检查查询服务器的状态。
                     </p><pre class="oac_no_warn" dir="ltr">SELECT * FROM V $ PX_PROCESS;</pre><p>您的输出应类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">SERV STATUS PID SPID SID SERIAL＃IS_GV CON_ID ---- --------- ------ --------- ------ ------- ----- ------- P002使用16 16955 21 7729否0 P003使用17 16957 20 2921否0 P004可用18 16959否0 P005可用19 16962否0 P000使用12 6999 18 4720否0 P001使用13 7004 7 234否0</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-2BBBDAFF-7AB8-41E0-B570-73741E4D4B90__GUID-492EE867-A726-4EAD-A88F-F506BDF08FD3">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="monitor-parallel-performance.html#GUID-106575E7-F384-40F4-AF90-95D247580C0D" title="You can monitor parallel execution performance with dynamic performance views.">使用动态性能视图监视并行执行性能，</a>以获取示例中使用的<a href="monitor-parallel-performance.html#GUID-106575E7-F384-40F4-AF90-95D247580C0D" title="您可以使用动态性能视图监视并行执行性能。">动态性能视图</a>的描述</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="VLDBG1523"></a><div class="props_rev_3"><a id="GUID-2B465353-9C19-4FCD-8605-EC2AAD32140F" name="GUID-2B465353-9C19-4FCD-8605-EC2AAD32140F"></a><h3 id="VLDBG-GUID-2B465353-9C19-4FCD-8605-EC2AAD32140F" class="sect3">监控系统统计</h3>
               <div>
                  <p>您可以使用动态性能视图监视系统统计信息，以诊断并行执行性能。</p>
                  <div class="section">
                     <p><code class="codeph">V$SYSSTAT</code>和<code class="codeph">V$SESSTAT</code>视图包含几个用于监视并行执行的统计信息。使用这些统计信息来跟踪并行查询，DML，DDL，数据流操作符（DFO）和操作的数量。每个查询，DML或DDL可以具有多个并行操作和多个DFO。
                     </p>
                     <p>此外，统计信息还会计算由于自适应多用户算法或可用并行执行服务器耗尽而导致DOP降低或降级的查询操作数。</p>
                     <p>最后，这些视图中的统计信息还会计算代表并行执行发送的消息数。以下语法是如何显示这些统计信息的示例：</p><pre class="oac_no_warn" dir="ltr">SELECT NAME，VALUE FROM GV $ SYSSTAT WHERE UPPER（NAME）LIKE'％PARALLEL OPERATIONS％'或UPPER（NAME）LIKE'％PARALLELIZED％'或UPPER（NAME）LIKE'％PX％';</pre><p>您的输出应类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">NAME VALUE ------------------------------------------------ -  ----------查询并行化347 DML语句并行化0 DDL语句并行化0 DFO树并行化463并行操作未降级28并行操作降级为串行31并行操作降级75至99 pct 252并行操作降级50至75 pct 128并行操作降级25至50 pct 43并行操作降级1至25 pct 12 PX本地消息已发送74548 PX本地消息已收回74128 PX远程消息已发送0 PX远程消息已收回0</pre><p>以下查询显示系统上每个从属（子进程）和查询协调程序进程的当前等待状态：</p><pre class="oac_no_warn" dir="ltr">SELECT px。SID“SID”，p。PID，p。SPID“SPID”，px。INST_ID“Inst”，px。SERVER_GROUP“Group”，px。SERVER_SET“设置”，px。学位“学位”，px。REQ_DEGREE“Req Degree”，w.event“等待事件”来自GV $ SESSION，GV $ PX_SESSION px，GV $ PROCESS p，GV $ SESSION_WAIT w WHERE s.sid（+）= px.sid AND s.inst_id（+ ）= px.inst_id AND s.sid = w.sid（+）AND s.inst_id = w.inst_id（+）AND s.paddr = p.addr（+）AND s.inst_id = p.inst_id（+）ORDER通过解码（px。QCINST_ID，NULL，px。INST_ID，px。QCINST_ID），px。QCSID，DECODE（px。SERVER_GROUP，NULL，0，px。SERVER_GROUP），px。SERVER_SET，px。INST_ID;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="VLDBG1524"></a><div class="props_rev_3"><a id="GUID-A36F1D1B-113B-4AEC-8CC1-B284DE87CF8C" name="GUID-A36F1D1B-113B-4AEC-8CC1-B284DE87CF8C"></a><h3 id="VLDBG-GUID-A36F1D1B-113B-4AEC-8CC1-B284DE87CF8C" class="sect3">监控操作系统统计</h3>
               <div>
                  <p>Oracle数据库中可用的信息与通过操作系统实用程序提供的信息（例如基于UNIX的系统上的<code class="codeph">sar</code>和<code class="codeph">vmstat</code>之间存在相当大的重叠。
                  </p>
                  <p>操作系统提供有关I / O，通信，CPU，内存和分页，调度和同步原语的性能统计信息。<code class="codeph">V$SESSTAT</code>视图也提供了主要的操作系统统计类别。
                  </p>
                  <p>通常，有关I / O设备和信号量操作的操作系统信息比Oracle数据库信息更难映射回数据库对象和操作。但是，某些操作系统具有良好的可视化工具和收集数据的有效方法。</p>
                  <p>有关CPU和内存使用情况的操作系统信息对于评估性能非常重要。可能最重要的统计数据是CPU使用率。低级性能调优的目标是成为所有CPU的CPU绑定。实现此目的后，您可以在SQL级别工作以查找可能更多I / O密集但使用更少CPU的备用计划。</p>
                  <p>操作系统内存和分页信息对于微调许多系统参数非常有用，这些参数控制内存密集型数据仓库子系统（如并行通信，排序和散列连接）之间的内存划分方式。</p>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
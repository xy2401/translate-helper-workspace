<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>准备用于执行的Java类方法</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Java Developer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Java Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="java-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T00:55:24-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96468-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="Java-classes-in-database.html" title="Previous" type="text/html"></link>
      <link rel="next" href="server-user-interface.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Java Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="JJDEV"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="Java-classes-in-database.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="server-user-interface.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Java开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Java-applications-in-database.html" property="item" typeof="WebPage"><span property="name">Oracle数据库上的Java应用程序</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">准备用于执行的Java类方法</li>
            </ol>
            <a id="GUID-0183CF7A-911E-4F3A-AA17-989023010C2D" name="GUID-0183CF7A-911E-4F3A-AA17-989023010C2D"></a><a id="JJDEV02040"></a>
            
            <h2 id="JJDEV-GUID-0183CF7A-911E-4F3A-AA17-989023010C2D" class="sect2"><span class="enumeration_section">2.5</span>准备Java类执行方法</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p><a id="d8687e87" class="indexterm-anchor"></a><a id="d8687e89" class="indexterm-anchor"></a><a id="d8687e93" class="indexterm-anchor"></a><a id="d8687e95" class="indexterm-anchor"></a>要确保运行Java方法，必须执行以下操作：</p>
               </div>
               <!-- class="section" -->
               <ol>
                  <li><span>决定何时编译Java源代码。</span></li>
                  <li><span>确定是否要使用默认解析程序或其他解析程序来查找数据库中的支持Java类。</span></li>
                  <li><span>将类加载到数据库中。如果您不希望为类使用默认解析程序，则应使用load命令指定单独的解析程序。</span></li>
                  <li><span>发布您的课程或方法。</span></li>
               </ol>
               <div class="section">
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="preparing-Java-class-methods.html#GUID-77024007-F203-44DF-B3EB-75E72D491B63">编译Java类</a></p>
                     </li>
                     <li>
                        <p><a href="preparing-Java-class-methods.html#GUID-F17E6450-17E3-49EE-9258-EF5E01748198">解决类依赖关系概述</a></p>
                     </li>
                     <li>
                        <p><a href="preparing-Java-class-methods.html#GUID-D920E247-8D81-4D08-8A5D-8C47BAC52C63">使用loadjava工具加载类概述</a></p>
                     </li>
                     <li>
                        <p><a href="preparing-Java-class-methods.html#GUID-3F57CC21-BC4C-4203-B477-695E039D5973">授予执行权限概述</a></p>
                     </li>
                     <li>
                        <p><a href="preparing-Java-class-methods.html#GUID-4695681F-91B7-45A1-AA10-CD6BF046C4C7">控制当前用户概述</a></p>
                     </li>
                     <li>
                        <p><a href="preparing-Java-class-methods.html#GUID-1FAE81CC-C835-4058-BCF8-15534DF1CFC1">检查Java上载概述</a></p>
                     </li>
                     <li>
                        <p><a href="preparing-Java-class-methods.html#GUID-8D343A4B-EC7A-4F65-8942-56D184250B64">关于发布数据库中加载的Java方法</a></p>
                     </li>
                     <li>
                        <p><a href="preparing-Java-class-methods.html#GUID-9DF130C1-763D-4B2C-9F66-7F2C0E6BB7FA">审计数据库中加载的Java类概述</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div><a id="JJDEV02041"></a><div class="props_rev_3"><a id="GUID-77024007-F203-44DF-B3EB-75E72D491B63" name="GUID-77024007-F203-44DF-B3EB-75E72D491B63"></a><h3 id="JJDEV-GUID-77024007-F203-44DF-B3EB-75E72D491B63" class="sect3"><span class="enumeration_section">2.5.1</span>编译Java类</h3>
               <div>
                  <div class="section">
                     <p>可以通过以下方式之一编译Java源代码：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a id="d8687e261" class="indexterm-anchor"></a>您可以在将客户端系统加载到数据库之前，通过Java编译器（如<code class="codeph">javac</code>显式编译源代码。
                           </p>
                        </li>
                        <li>
                           <p>您可以要求数据库在加载过程中编译源代码，该过程由<code class="codeph">loadjava</code>工具管理。
                           </p>
                        </li>
                        <li>
                           <p><a id="d8687e277" class="indexterm-anchor"></a>您可以强制编译在运行时动态发生。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-77024007-F203-44DF-B3EB-75E72D491B63__GUID-34E41FE0-5FD0-4EC2-9F50-A7535D279BC9">
                        <p class="notep1">注意：</p>
                        <p>如果您决定通过<code class="codeph">loadjava</code>工具进行编译，则可以指定编译器选项。
                        </p>
                     </div>
                     <p>本节包括以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="preparing-Java-class-methods.html#GUID-51E64EF1-74D7-4E39-AB9C-1021DF344B0B">通过javac编译源代码</a></p>
                        </li>
                        <li>
                           <p><a href="preparing-Java-class-methods.html#GUID-1F6328ED-397C-48DF-9503-904FF2398FE5">通过loadjava工具编译源代码</a></p>
                        </li>
                        <li>
                           <p><a href="preparing-Java-class-methods.html#GUID-1CC261BC-1B21-43B3-9745-6E38D5F494C6">在运行时编译源代码</a></p>
                        </li>
                        <li>
                           <p><a href="preparing-Java-class-methods.html#GUID-C2285812-D08C-4D76-86E2-9517B233FA08">指定编译器选项</a></p>
                        </li>
                        <li>
                           <p><a href="preparing-Java-class-methods.html#GUID-3B5A4B16-8824-4357-A613-D1CBC8C636D4">自动重新编译源程序</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="preparing-Java-class-methods.html#GUID-C2285812-D08C-4D76-86E2-9517B233FA08">指定编译器选项</a></li>
                     </ul>
                  </div>
               </div>
               <a id="JJDEV13063"></a><div class="props_rev_3"><a id="GUID-51E64EF1-74D7-4E39-AB9C-1021DF344B0B" name="GUID-51E64EF1-74D7-4E39-AB9C-1021DF344B0B"></a><h4 id="JJDEV-GUID-51E64EF1-74D7-4E39-AB9C-1021DF344B0B" class="sect4"><span class="enumeration_section">2.5.1.1</span>通过javac编译源代码</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用传统的Java编译器编译Java源代码，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">javac <span class="variable" translate="no">&lt;file_name&gt;</span> .java</pre><p>编译后，将已编译的二进制文件加载到数据库中，而不是源本身。这是一个更好的选择，因为在您自己的系统上调试Java代码通常更容易，而不是在数据库上调试它。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDEV13064"></a><div class="props_rev_3"><a id="GUID-1F6328ED-397C-48DF-9503-904FF2398FE5" name="GUID-1F6328ED-397C-48DF-9503-904FF2398FE5"></a><h4 id="JJDEV-GUID-1F6328ED-397C-48DF-9503-904FF2398FE5" class="sect4"><span class="enumeration_section">2.5.1.2</span>通过loadjava工具编译源代码</h4>
                  <div>
                     <div class="section">
                        <p>当您指定<code class="codeph">-resolve</code>与选项<code class="codeph">loadjava</code>为源文件的工具，将发生以下情况：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>源文件作为源架构对象加载。</span></li>
                        <li><span>源文件已编译。</span></li>
                        <li><span>为已编译的<code class="codeph">.java</code>文件中定义的每个类创建类模式对象。</span></li>
                        <li><span>已编译的代码存储在类架构对象中。</span></li>
                     </ol>
                     <div class="section">
                        <p><a id="d8687e537" class="indexterm-anchor"></a><a id="d8687e541" class="indexterm-anchor"></a> Oracle数据库将所有编译错误写入<code class="codeph">loadjava</code>工具的日志文件以及<code class="codeph">USER_ERRORS</code>视图。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDEV13065"></a><div class="props_rev_3"><a id="GUID-1CC261BC-1B21-43B3-9745-6E38D5F494C6" name="GUID-1CC261BC-1B21-43B3-9745-6E38D5F494C6"></a><h4 id="JJDEV-GUID-1CC261BC-1B21-43B3-9745-6E38D5F494C6" class="sect4"><span class="enumeration_section">2.5.1.3</span>在运行时编译源代码</h4>
                  <div>
                     <div class="section">
                        <p>在没有<code class="codeph">-resolve</code>选项的情况下将Java源加载到数据库中时，例如：</p><pre class="oac_no_warn" dir="ltr">loadjava <span class="variable" translate="no">&lt;file_name&gt;</span> .java</pre><p>然后，Oracle Database在运行时需要类时自动编译源代码。源文件将加载到源架构对象中。Oracle数据库将所有编译错误写入<code class="codeph">loadjava</code>工具的日志文件以及<code class="codeph">USER_ERRORS</code>视图。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDEV13066"></a><div class="props_rev_3"><a id="GUID-C2285812-D08C-4D76-86E2-9517B233FA08" name="GUID-C2285812-D08C-4D76-86E2-9517B233FA08"></a><h4 id="JJDEV-GUID-C2285812-D08C-4D76-86E2-9517B233FA08" class="sect4"><span class="enumeration_section">2.5.1.4</span>指定编译器选项</h4>
                  <div>
                     <div class="section">
                        <p>您可以通过以下方式指定编译器选项：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a id="d8687e764" class="indexterm-anchor"></a>使用<code class="codeph">loadjava</code>工具在命令行上指定编译器选项。您还可以使用<code class="codeph">loadjava</code>工具指定编码选项。
                              </p>
                           </li>
                           <li>
                              <p>在。中指定持久编译器选项<a id="d8687e778" class="indexterm-anchor"></a> <code class="codeph">JAVA$OPTIONS</code>表。每个架构都存在<code class="codeph">JAVA$OPTIONS</code>表。每次编译时，编译器都会使用这些选项。但是，使用<code class="codeph">loadjava</code>工具指定的任何编译器选项<code class="codeph">loadjava</code>覆盖此表中定义的选项。如果要以这种方式指定编译器选项，则必须自己创建此表。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div class="props_rev_3"><a id="GUID-D3FE2307-FEDE-4E0E-8FAF-3B68D4F0191E" name="GUID-D3FE2307-FEDE-4E0E-8FAF-3B68D4F0191E"></a><h5 id="JJDEV-GUID-D3FE2307-FEDE-4E0E-8FAF-3B68D4F0191E" class="sect5"><span class="enumeration_section">2.5.1.4.1</span>指定默认编译器选项</h5>
                     <div>
                        <div class="section">
                           <p>在编译既未存在<code class="codeph">JAVA$OPTIONS</code>条目也未指定任何选项的命令行值的源模式对象时，编译器将采用以下默认值：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">编码= System.getProperty（ “file.encoding的”）;</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">在线= TRUE</code></p>
                                 <p>此选项仅适用于包含SQLJ构造的Java源。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">调试=真</code></p>
                                 <p>此选项相当于：</p><pre class="oac_no_warn" dir="ltr">javac -g</pre></li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-FE9BED3B-A1E5-4412-A36D-2EBB230DAEE6" name="GUID-FE9BED3B-A1E5-4412-A36D-2EBB230DAEE6"></a><h5 id="JJDEV-GUID-FE9BED3B-A1E5-4412-A36D-2EBB230DAEE6" class="sect5"><span class="enumeration_section">2.5.1.4.2</span>在命令行上指定编译器选项</h5>
                     <div>
                        <div class="section">
                           <p>使用<code class="codeph">loadjava</code>工具指定的<code class="codeph">encoding</code>编译器选项标识<code class="codeph">.java</code>文件的编码。此选项会覆盖<code class="codeph">JAVA$OPTIONS</code>表中的任何匹配值。值与以下内容相同：</p><pre class="oac_no_warn" dir="ltr">javac -encoding</pre><p>此选项仅在加载源文件时相关。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-7F1602B0-2B02-4FAD-BA9C-A515C0889E11" name="GUID-7F1602B0-2B02-4FAD-BA9C-A515C0889E11"></a><h5 id="JJDEV-GUID-7F1602B0-2B02-4FAD-BA9C-A515C0889E11" class="sect5"><span class="enumeration_section">2.5.1.4.3</span>指定数据库表中指定的编译器选项</h5>
                     <div>
                        <div class="section">
                           <p>每个<code class="codeph">JAVA$OPTIONS</code>条目都包含应用选项设置的源模式对象的名称。您可以使用多行为不同的源架构对象设置不同的选项。
                           </p>
                           <p>您可以使用以下过程和函数设置<code class="codeph">JAVA$OPTIONS</code>条目，这些过程和函数在数据库包<code class="codeph">DBMS_JAVA</code>中定义：</p><pre class="oac_no_warn" dir="ltr">程序<a id="d8687e1109" class="indexterm-anchor"></a> set_compiler_option（名称VARCHAR2，选项VARCHAR2，值VARCHAR2）;功能<a id="d8687e1112" class="indexterm-anchor"></a> get_compiler_option（名称VARCHAR2，选项VARCHAR2）RETURNS VARCHAR2;程序<a id="d8687e1115" class="indexterm-anchor"></a> reset_compiler_option（名称VARCHAR2，选项VARCHAR2）;</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDEV13071"></a><a id="JJDEV13070"></a><div class="props_rev_3"><a id="GUID-B64CB458-9D0B-42DE-85EB-303EB0F66091" name="GUID-B64CB458-9D0B-42DE-85EB-303EB0F66091"></a><h5 id="JJDEV-GUID-B64CB458-9D0B-42DE-85EB-303EB0F66091" class="sect5"><span class="enumeration_section">2.5.1.4.4</span>有关指定数据库表中指定的编译器选项的详细信息</h5>
                     <div>
                        <div class="section">
                           <p>下表描述了上一节中描述的方法的参数。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformal" id="GUID-B64CB458-9D0B-42DE-85EB-303EB0F66091__CEGJBDHI">
                           <p class="titleintable">表2-2名称和选项参数的定义</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="名称和选项参数的定义" width="100%" border="1" summary="table" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d8687e1219">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d8687e1222">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d8687e1227" headers="d8687e1219 ">
                                       <p>名称</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d8687e1227 d8687e1222 ">
                                       <p>这是Java包名称，完全限定的类名称或空字符串。当编译器在<code class="codeph">JAVA$OPTIONS</code>表中搜索用于编译Java源模式对象的选项时，它使用具有<code class="codeph">name</code>值的行，该行最接近匹配模式对象的完全限定类名。一个<code class="codeph">name</code> ，它的值是空字符串匹配任何架构对象名称。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d8687e1243" headers="d8687e1219 ">
                                       <p>选项</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d8687e1243 d8687e1222 ">
                                       <p><code class="codeph">option</code>参数是<code class="codeph">online</code> ， <code class="codeph">encoding</code>或<code class="codeph">debug</code> 。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="section">
                           <p>最初，架构没有<code class="codeph">JAVA$OPTIONS</code>表。要创建<code class="codeph">JAVA$OPTIONS</code>表，请使用<code class="codeph">DBMS_JAVA</code>包中的<code class="codeph">java.set_compiler_option</code>过程来设置值。如果表不存在，该过程将创建该表。用单引号指定参数。例如：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; execute dbms_java.set_compiler_option（'xy'，'online'，'false'）;</pre><p>下表表示假设的<code class="codeph">JAVA$OPTIONS</code>数据库表。模式匹配规则是尽可能多地将模式名称与表条目匹配。模式匹配具有更高分辨率的模式名称是适用的条目。由于表没有<code class="codeph">encoding</code>选项的条目，因此编译器使用命令行上指定的缺省值或值。表中显示的<code class="codeph">online</code>选项与模式对象名称匹配如下：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>名称<code class="codeph">abcd</code>匹配以<code class="codeph">abcd</code>开头的类名和包名。包和类使用<code class="codeph">online=true</code>编译。
                                 </p>
                              </li>
                              <li>
                                 <p>名称<code class="codeph">ab</code>匹配以<code class="codeph">ab</code>开头的类和包名称。名称<code class="codeph">ab</code>与<code class="codeph">abcd</code>不匹配。包和类使用<code class="codeph">online=false</code>编译。
                                 </p>
                              </li>
                              <li>
                                 <p>所有其他包和类都匹配空字符串条目，并使用<code class="codeph">online=true</code>进行编译。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformal" id="GUID-B64CB458-9D0B-42DE-85EB-303EB0F66091__BABBIFHD">
                           <p class="titleintable">表2-3示例JAVA $ OPTIONS表</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="示例JAVA $ OPTIONS表" width="100%" border="1" summary="table" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="18%" id="d8687e1338">名称</th>
                                    <th align="left" valign="bottom" width="18%" id="d8687e1341">选项</th>
                                    <th align="left" valign="bottom" width="18%" id="d8687e1344">值</th>
                                    <th align="left" valign="bottom" width="46%" id="d8687e1347">匹配示例</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="18%" id="d8687e1352" headers="d8687e1338 ">
                                       <p>A B C D</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d8687e1352 d8687e1341 ">
                                       <p><code class="codeph">线上</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d8687e1352 d8687e1344 ">
                                       <p><code class="codeph">真正</code></p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d8687e1352 d8687e1347 ">
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">A B C D</code></p>
                                             <p>完全匹配模式。</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ABCDE</code> 
                                             </p>
                                             <p>第一部分完全匹配模式。没有其他规则与完整限定名称匹配。</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="18%" id="d8687e1379" headers="d8687e1338 ">
                                       <p>AB</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d8687e1379 d8687e1341 ">
                                       <p><code class="codeph">线上</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d8687e1379 d8687e1344 ">
                                       <p><code class="codeph">假</code></p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d8687e1379 d8687e1347 ">
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">AB</code></p>
                                             <p>完全匹配模式</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ABCX</code></p>
                                             <p>第一部分完全匹配模式。没有其他规则符合此规则。</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="18%" id="d8687e1405" headers="d8687e1338 ">
                                       <p>空字符串</p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d8687e1405 d8687e1341 ">
                                       <p><code class="codeph">线上</code></p>
                                    </td>
                                    <td align="left" valign="top" width="18%" headers="d8687e1405 d8687e1344 ">
                                       <p><code class="codeph">真正</code></p>
                                    </td>
                                    <td align="left" valign="top" width="46%" headers="d8687e1405 d8687e1347 ">
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">AC</code></p>
                                             <p>没有模式匹配任何已定义的名称。默认为空字符串规则。</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">XY</code></p>
                                             <p>没有模式匹配任何已定义的名称。默认为空字符串规则。</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div>
               </div><a id="JJDEV13072"></a><div class="props_rev_3"><a id="GUID-3B5A4B16-8824-4357-A613-D1CBC8C636D4" name="GUID-3B5A4B16-8824-4357-A613-D1CBC8C636D4"></a><h4 id="JJDEV-GUID-3B5A4B16-8824-4357-A613-D1CBC8C636D4" class="sect4"><span class="enumeration_section">2.5.1.5</span>自动<span class="enumeration_section">重新</span>编译源程序</h4>
                  <div>
                     <div class="section">
                        <p>Oracle数据库提供依赖关系管理和自动构建工具，当您对其所依赖的源程序或二进制程序进行更改时，它们透明地重新编译源程序。请考虑以下示例：</p><pre class="oac_no_warn" dir="ltr">公共等级A {B b; public void assignB（）{b = new B（）}} public class B {C c; public void assignC（）{c = new C（）}} public class C {A a; public void assignA（）{a = new A（）}}</pre><p>系统在类级别的粒度上跟踪依赖关系。在前面的例子中，可以看到的是类<code class="codeph">A</code> ， <code class="codeph">B</code> ，和<code class="codeph">C</code>互相依赖，因为<code class="codeph">A</code>持有的实例<code class="codeph">B</code> ， <code class="codeph">B</code>持有的一个实例<code class="codeph">C</code> ，和<code class="codeph">C</code>保持的一个实例<code class="codeph">A</code> 。如果通过向其添加新字段来更改类<code class="codeph">A</code>的定义，则Oracle数据库中的依赖性机制将类<code class="codeph">B</code>和<code class="codeph">C</code>标记为无效。在再次使用这些类之前，Oracle数据库会尝试解析它们并在必要时重新编译。请注意，只有在服务器上存在源文件时才能重新编译类。
                        </p>
                        <p>依赖系统使您可以依赖Oracle数据库来管理类之间的依赖关系，重新编译和自动解决。只有在开发过程中并且想要尽早发现问题时，才必须自行强制编译和解决。如果您不希望依赖关系管理工具为您执行此操作， <code class="codeph">loadjava</code>工具还提供强制编译和解决的功能。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="JJDEV02042"></a><div class="props_rev_3"><a id="GUID-F17E6450-17E3-49EE-9258-EF5E01748198" name="GUID-F17E6450-17E3-49EE-9258-EF5E01748198"></a><h3 id="JJDEV-GUID-F17E6450-17E3-49EE-9258-EF5E01748198" class="sect3"><span class="enumeration_section">2.5.2</span>解决类依赖关系概述</h3>
               <div>
                  <p>许多Java类包含对其他类的引用，这是重用代码的本质。传统的JVM在<code class="codeph">CLASSPATH</code>指定的目录中搜索<code class="codeph">.class</code> ， <code class="codeph">.zip</code>和<code class="codeph">.jar</code>文件。相反，Oracle JVM在数据库模式中搜索类对象。在Oracle数据库中，因为您将所有Java类加载到数据库中，所以可能需要指定在数据库中查找Java类的依赖类的位置。
                  </p>
                  <p>数据库中加载的所有类都称为类模式对象，并在某些模式中加载。所有预定义的Java应用程序编程接口（API）（例如<code class="codeph">java.lang.*</code> ）都在<code class="codeph">PUBLIC</code>模式中加载。如果您的类依赖于您定义的其他类，那么您可能会在自己的架构中加载它们。例如，如果您的架构是<code class="codeph">HR</code> ，则数据库解析程序在搜索<code class="codeph">PUBLIC</code>架构之前搜索<code class="codeph">HR</code>架构。用于搜索的模式列表称为a <a id="d8687e1703" class="indexterm-anchor"></a> <span class="bold">解析器规范</span> 。为每个类定义解析器规范。这与经典JVM形成对比，其中<code class="codeph">CLASSPATH</code>对所有类都是全局的。
                  </p>
                  <p>在查找和解析类的类间依赖关系时，解析程序将每个类标记为有效或无效，具体取决于是否找到所有相互依赖的类。如果您加载的类包含对在相应模式中找不到的类的引用，则该类将列为无效。运行时不成功的解决方案会产生<code class="codeph">ClassNotFound</code>异常。此外，如果类树非常大，则运行时解析可能因缺少数据库资源而失败。
                  </p>
                  <div class="infoboxnote" id="GUID-F17E6450-17E3-49EE-9258-EF5E01748198__GUID-F211E9C7-4342-4BE1-BAA6-C0938F7A0336">
                     <p class="notep1">注意：</p>
                     <p>与Java编译器一样， <code class="codeph">loadjava</code>工具解析对类的引用，但不解析对资源的引用。确保正确加载类所需的资源文件。
                     </p>
                  </div>
                  <p><a id="d8687e1725" class="indexterm-anchor"></a>对于类中的每个类间引用，解析器将搜索解析器规范指定的模式以获取有效的模式<a id="d8687e1730" class="indexterm-anchor"></a>满足引用的类模式对象。如果所有引用都已解析，则解析程序将该类标记为有效。从未解决过或已解决失败的类被标记为无效。依赖于变为无效的模式对象的类也标记为无效。
                  </p>
                  <p><a id="d8687e1736" class="indexterm-anchor"></a><a id="d8687e1740" class="indexterm-anchor"></a>为了更容易地搜索依赖类，Oracle数据库提供了一个默认的解析器和解析器规范，它首先搜索定义者的模式，然后搜索<code class="codeph">PUBLIC</code>模式。这涵盖了数据库中加载的大多数类。但是，如果要访问除自己或<code class="codeph">PUBLIC</code>之外的模式中的类，则必须定义自己的解析器规范。
                  </p>
                  <p>可以通过以下方式解决类：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用默认解析程序加载，该解析程序搜索定义者的模式和<code class="codeph">PUBLIC</code> ：</p><pre class="oac_no_warn" dir="ltr">loadjava -resolve</pre></li>
                     <li>
                        <p>使用您自己的解析器规范定义加载：</p><pre class="oac_no_warn" dir="ltr">loadjava-resolve -resolver“（（* HR）（* OTHER）（* PUBLIC））”</pre><p>在前面的示例中，解析程序规范定义包括<code class="codeph">HR</code>模式， <code class="codeph">OTHER</code>模式和<code class="codeph">PUBLIC</code> 。</p>
                     </li>
                  </ul>
                  <p><code class="codeph">-resolver</code>选项指定要在定义的模式中搜索的对象。在前面的示例中，在<code class="codeph">HR</code> ， <code class="codeph">OTHER</code>和<code class="codeph">PUBLIC</code>中搜索所有类模式对象。但是，如果要仅搜索架构中的某个类或类组，则可以缩小搜索范围。例如，要仅搜索<code class="codeph">OTHER</code>模式中的<code class="codeph">my/gui/*</code>类，您可以按如下方式定义解析器规范：</p><pre class="oac_no_warn" dir="ltr">loadjava -resolve -resolver'（（* HR）（“my / gui / *”OTHER）（* PUBLIC））'</pre><p>解析器规范中的第一个参数用于类模式对象，第二个参数定义用于搜索这些类模式对象的模式。</p>
               </div>
               <div class="props_rev_3"><a id="GUID-B0AEB608-C38C-4064-9259-C404B9C8024A" name="GUID-B0AEB608-C38C-4064-9259-C404B9C8024A"></a><h4 id="JJDEV-GUID-B0AEB608-C38C-4064-9259-C404B9C8024A" class="sect4"><span class="enumeration_section">2.5.2.1</span>允许引用不存在的类</h4>
                  <div>
                     <div class="section">
                        <p>您可以在解析程序规范中指定一个特殊选项，该选项允许对不存在的类进行未解析的引用。有时，内部类永远不会在产品中使用。在标准Java环境中，这不是问题，因为只要不调用方法，JVM就会忽略它们。但是，在解析类时，Oracle JVM会尝试解析该类引用的所有名称，包括可能永远不会使用的名称。如果Oracle JVM无法为该类引用的每个此类名称找到匹配的类，则正在解析的类将标记为无效且无法运行。</p>
                        <p>要忽略引用，可以在解析器规范中指定通配符减号（ <code class="codeph">-</code> ）。以下示例指定允许对<code class="codeph">my/gui</code>中的类进行任何引用，即使它在解析器规范模式列表中不存在。
                        </p><pre class="oac_no_warn" dir="ltr">loadjava -resolve -resolver'（（* HR）（* PUBLIC）（“my / gui / *” - ））'</pre><p>如果没有通配符，如果在其中一个模式中找不到依赖类，则您的类将列为无效并且无法运行。</p>
                        <p>此外，您可以定义要忽略所有未找到的类。但是，这很危险，因为具有依赖类的类将被标记为有效，即使依赖类不存在也是如此。但是，如果没有依赖类，该类永远不能运行。在这种情况下，您将在运行时收到异常。</p>
                        <p>要忽略<code class="codeph">HR</code>或<code class="codeph">PUBLIC</code>未找到的所有类，请指定以下解析程序规范：</p><pre class="oac_no_warn" dir="ltr">loadjava -resolve -resolver“（（* HR）（* PUBLIC）（*  - ））”</pre><p>如果您以后打算加载要求您使用此类解析程序的不存在的类，则不应使用包含减号（ - ）通配符的解析程序。相反，在解析之前包括模式中的所有引用类。</p>
                        <p>即使使用减号（ - ）通配符，类的超类也永远不存在。如果未找到超类，则无论在解析器中使用减号（ - ）通配符，该类都将无效。</p>
                        <div class="infoboxnote" id="GUID-B0AEB608-C38C-4064-9259-C404B9C8024A__GUID-1C350115-5FB7-4246-953E-893AFD2B3528">
                           <p class="notep1">注意：</p>
                           <p>处理不存在的类的另一种机制是使用<code class="codeph">loadjava</code>工具的<code class="codeph">-gemissing</code>选项。此选项使<code class="codeph">loadjava</code>工具创建和加载引用但未定义的类的定义。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDEV13075"></a><div class="props_rev_3"><a id="GUID-EFDB4640-FABA-45FE-961C-CC6EAA5C65D9" name="GUID-EFDB4640-FABA-45FE-961C-CC6EAA5C65D9"></a><h4 id="JJDEV-GUID-EFDB4640-FABA-45FE-961C-CC6EAA5C65D9" class="sect4"><span class="enumeration_section">2.5.2.2</span>字节码验证器</h4>
                  <div>
                     <div class="section">
                        <p>根据JVM规范， <code class="codeph">.class</code>文件在它们定义的类在JVM中可用之前需要进行验证。在Oracle JVM中，验证过程在类解析时进行。
                        </p>
                        <p>下表描述了解析程序可能发现的问题以及发出的相应Oracle错误代码。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-EFDB4640-FABA-45FE-961C-CC6EAA5C65D9__CEGFGFAC">
                        <p class="titleintable">表2-4 ORA错误</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="ORA错误" width="100%" border="1" summary="table" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d8687e2043">错误代码</th>
                                 <th align="left" valign="bottom" width="69%" id="d8687e2046">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d8687e2051" headers="d8687e2043 ">
                                    <p><code class="codeph">ORA-29545</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d8687e2051 d8687e2046 ">
                                    <p>如果解析器确定类格式不正确，则解析器不会将其标记为有效。当解析器拒绝某个类时，它会发出<code class="codeph">ORA-29545</code>错误。<code class="codeph">loadjava</code>工具报告错误。例如，如果<code class="codeph">.class</code>文件的内容不是Java编译的结果或文件已损坏，则抛出此错误。
                                    </p>
                                    <p>如果您使用解析器的减号（ - ）通配符表达式并且未验证某些类的有效性，则<code class="codeph">ORA-29545</code>错误也可能会出现。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d8687e2073" headers="d8687e2043 ">
                                    <p><code class="codeph">ORA-29552</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d8687e2073 d8687e2046 ">
                                    <p>在某些情况下，解析器允许将类标记为有效，但会替换类中的字节码以在运行时引发异常。在这些情况下，解析程序会发出<code class="codeph">loadjava</code>工具报告的<code class="codeph">ORA-29552</code>警告。当Java语言规范（JLS）要求抛出<code class="codeph">IncompatibleClassChangeError</code>时， <code class="codeph">loadjava</code>工具会发出此警告。Oracle JVM依靠解析器来检测这些情况，支持JLS所需的正确运行时行为。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p><a id="d8687e2094" class="indexterm-anchor"></a>带有减号（ <code class="codeph">-</code> ）通配符的解析程序将您的类标记为有效，无论您的类引用的类是否存在。由于继承和接口，您可能希望编写使用类实例的有效Java方法，就好像它是超类或特定接口的实例一样。当被验证的方法使用对<code class="codeph">A</code>类的引用时，就好像它是对<code class="codeph">B</code>类的引用一样，解析器必须检查<code class="codeph">A</code>是扩展还是实现<code class="codeph">B</code>例如，考虑以下可能有效的方法，其签名意味着返回<code class="codeph">B</code>的实例，但其主体返回<code class="codeph">A</code>的实例：</p><pre class="oac_no_warn" dir="ltr">B myMethod（A a）{return a; }</pre><p>仅当<code class="codeph">A</code>扩展<code class="codeph">B</code>类或<code class="codeph">A</code>实现接口<code class="codeph">B</code>该方法才有效。如果使用减号（ - ）通配符解析了<code class="codeph">A</code>或<code class="codeph">B</code> ，则解析器不知道此方法是安全的。在这种情况下，解析器将<code class="codeph">myMethod</code>的字节码替换为在调用<code class="codeph">myMethod</code>抛出异常的字节码。
                        </p>
                        <p>没有减号（ <code class="codeph">-)</code>通配符的解析程序可确保找到并正确解析<code class="codeph">A</code>和<code class="codeph">B</code>的类定义（如果它们存在于它们专门标识的模式中）。您可以考虑使用替代解析程序的唯一情况是，您是否必须加载包含引用其他非系统类的类的现有JAR文件，这些类未包含在JAR文件中。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="schema-objects-and-Oracle-JVM-utilities.html#GUID-2A76FBC2-3A4A-4620-9A83-CA01724B13DB">架构对象和Oracle JVM实用程序</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div>
            </div><a id="JJDEV13565"></a><div class="props_rev_3"><a id="GUID-F14EAF04-948C-4CF6-A034-5E8D692BC438" name="GUID-F14EAF04-948C-4CF6-A034-5E8D692BC438"></a><h3 id="JJDEV-GUID-F14EAF04-948C-4CF6-A034-5E8D692BC438" class="sect3"><span class="enumeration_section">2.5.3</span>登录Oracle JVM</h3>
               <div>
                  <div class="section">
                     <p>Oracle JVM在日志记录属性查找领域扩展了JDK Java Logging API，以增强日志记录配置管理的安全性并支持基于用户的日志记录配置。</p>
                     <div class="infoboxnotealso" id="GUID-F14EAF04-948C-4CF6-A034-5E8D692BC438__GUID-56563E43-CD7A-424C-AADF-01FCB6DDF9FA">
                        <p class="notep1">也可以看看：</p>
                        <p>有关Java Logging API的更多信息，请访问以下站点：</p>
                        <p><a href="http://docs.oracle.com/javase/7/docs/" target="_blank"><code class="codeph">http://docs.oracle.com/javase/7/docs/</code></a></p>
                     </div>
                     <p>你必须激活<a id="d8687e2275" class="indexterm-anchor"></a>会话中的<code class="codeph">LogManager</code>初始化Oracle JVM中的日志记录属性。每个会话使用<code class="codeph">LogManager</code> API初始化日志记录属性， <code class="codeph">LogManager</code> API使用数据库驻留资源查找进行扩展。
                     </p>
                     <p>Oracle JVM执行以下步骤来配置日志记录选项：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand" id="GUID-F14EAF04-948C-4CF6-A034-5E8D692BC438__CEGDJFCG"><span>如果设置了<code class="codeph">java.util.logging.config.class</code>属性，则日志记录行为与标准JDK中的相同。</span></li>
                     <li class="stepexpand" id="GUID-F14EAF04-948C-4CF6-A034-5E8D692BC438__CEGGCACF"><span>如果未设置<code class="codeph">java.util.logging.config.class</code>属性，则Oracle JVM会检查当前用户架构中<code class="codeph">javavm/lib/logging.properties</code>资源的可用性。</span><div>
                           <p>如果可用，此资源将用作<code class="codeph">LogManager</code>的配置设置，并设置<code class="codeph">java.util.logging.config.file</code>属性。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand" id="GUID-F14EAF04-948C-4CF6-A034-5E8D692BC438__CEGBGJHC"><span>如果上述两个条件都不成立，则检查<code class="codeph">java.util.logging.config.file</code>属性，如果指定， <code class="codeph">LogManager</code> API中的描述使用。</span></li>
                     <li class="stepexpand"><span>如果步骤1,2和3中的条件均不成立，则使用<code class="codeph">SYS</code>模式中的<code class="codeph">javavm/lib/logging.properties</code>资源。此资源是<code class="codeph">$(java.home)/lib/logging.properties</code>文件的副本，该文件在数据库创建时加载到<code class="codeph">SYS</code>模式中。这意味着，默认情况下， <code class="codeph">LogManager</code>行为就像根据<code class="codeph">$(java.home)/javavm/lib/logging.properties</code>文件配置一样。但是，在重新创建数据库之前，更改此文件无效</span></li>
                  </ol>
                  <div class="section">
                     <p>如果您对<code class="codeph">javavm/lib/logging.properties</code>文件中的缺省设置不满意，请准备一组不同的属性，并使用<code class="codeph">loadjava</code>命令将它们加载到模式中。例如，如果您的模式是<code class="codeph">HR</code>并且您当前的文件目录是<code class="codeph">mydir</code> ，那么在<code class="codeph">mydir</code>下创建一个目录<code class="codeph">javavm/lib/</code>并在<code class="codeph">mydir/javavm/lib/</code>目录下的<code class="codeph">logging.properties</code>文件中指定所需的属性。然后，从<code class="codeph">mydir</code>调用<code class="codeph">loadjava</code>命令，如下所示：</p><pre class="oac_no_warn" dir="ltr">mydir％loadjava -u HR -v -r javavm / lib / logging.properties password： <span class="italic">&lt;password&gt;</span>
</pre><p>调用<code class="codeph">loadjava</code>命令后，可以删除<code class="codeph">mydir/javavm/lib/logging.properties</code>文件。任何作为<code class="codeph">HR</code>运行并执行<code class="codeph">LogManager</code>激活的会话都将使<code class="codeph">LogManager</code>配置来自此数据库驻留资源的属性专用于<code class="codeph">HR</code> 。</p>
                     <div class="infoboxnote" id="GUID-F14EAF04-948C-4CF6-A034-5E8D692BC438__GUID-14F99A6E-DB95-47EE-9B02-1EEF43422289">
                        <p class="notep1">注意：</p>
                        <p>Oracle JVM始终使用安全管理器运行。因此，无论使用何种日志配置方法，都必须为<code class="codeph">HR</code>授予日志记录权限。在大多数情况下，特权用户发出的以下调用足以授予这些权限：</p><pre class="oac_no_warn" dir="ltr">调用dbms_java.grant_permission（'HR'，'SYS：java.util.logging。LoggingPermission'，'control'，''）;</pre></div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="JJDEV13076"></a><a id="JJDEV13077"></a><a id="JJDEV02043"></a><div class="props_rev_3"><a id="GUID-D920E247-8D81-4D08-8A5D-8C47BAC52C63" name="GUID-D920E247-8D81-4D08-8A5D-8C47BAC52C63"></a><h3 id="JJDEV-GUID-D920E247-8D81-4D08-8A5D-8C47BAC52C63" class="sect3"><span class="enumeration_section">2.5.4</span>使用loadjava工具加载类概述</h3>
               <div>
                  <div class="section">
                     <p><a id="d8687e2524" class="indexterm-anchor"></a>您可以使用<code class="codeph">loadjava</code>工具从文件创建模式对象，并将模式对象加载到不同的模式。例如，</p><pre class="oac_no_warn" dir="ltr">loadjava -u HR -schema TEST MyClass.java密码： <span class="italic">密码</span>
</pre><div class="infoboxnote" id="GUID-D920E247-8D81-4D08-8A5D-8C47BAC52C63__GUID-720C6F10-4316-4731-AAF8-EB18F3907CC4">
                        <p class="notep1">注意：</p>
                        <p>如果使用命令行界面， <span class="italic">则不</span>必将类作为模式对象加载到数据库。例如，</p><pre class="oac_no_warn" dir="ltr">C：\ oraclehome \ bin&gt; loadjava -u HR MyClass.java密码： <span class="italic">密码</span>
</pre></div>
                     <p>您还可以在SQL命令中运行<code class="codeph">loadjava</code>工具。与从文件编译和加载的传统JVM不同，Oracle JVM从数据库模式对象编译和加载。
                     </p>
                     <p>以下内容描述了与传统JVM使用的文件相对应的数据库模式对象。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-D920E247-8D81-4D08-8A5D-8C47BAC52C63__CEGFBCFA">
                     <p class="titleintable">表2-5 Java文件说明</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Java文件的描述" width="100%" border="1" summary="table" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="52%" id="d8687e2563">Java文件类型</th>
                              <th align="left" valign="bottom" width="48%" id="d8687e2566">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d8687e2571" headers="d8687e2563 ">
                                 <p><a id="d8687e2573" class="indexterm-anchor"></a><a id="d8687e2575" class="indexterm-anchor"></a> <code class="codeph">.java</code>源文件或<code class="codeph">.sqlj</code>源文件</p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d8687e2571 d8687e2566 ">
                                 <p>对应于Java的源模式对象</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d8687e2590" headers="d8687e2563 ">
                                 <p><a id="d8687e2592" class="indexterm-anchor"></a> <code class="codeph">.class</code>编译的Java文件</p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d8687e2590 d8687e2566 ">
                                 <p>对应Java <a id="d8687e2600" class="indexterm-anchor"></a><a id="d8687e2604" class="indexterm-anchor"></a>类模式对象</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d8687e2608" headers="d8687e2563 ">
                                 <p><code class="codeph">.properties</code> Java资源文件， <code class="codeph">.ser</code> SQLJ配置文件或数据文件</p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d8687e2608 d8687e2566 ">
                                 <p>对应Java <a id="d8687e2619" class="indexterm-anchor"></a>资源模式对象</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p>您必须将所有类或资源加载到数据库中以供数据库中的其他类使用。此外，在加载时，您可以定义谁可以在数据库中运行您的类。</p>
                     <p>下表描述了<code class="codeph">loadjava</code>工具为每种类型的文件执行的活动。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-D920E247-8D81-4D08-8A5D-8C47BAC52C63__CEGEDDGB">
                     <p class="titleintable">表2-6架构对象上的loadjava操作</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="架构对象上的loadjava操作" width="100%" border="1" summary="table" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d8687e2640">架构对象</th>
                              <th align="left" valign="bottom" width="69%" id="d8687e2643">loadjava对象的操作</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d8687e2648" headers="d8687e2640 ">
                                 <p><a id="d8687e2650" class="indexterm-anchor"></a> <code class="codeph">.java</code>源文件</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d8687e2648 d8687e2643 ">
                                 <ol>
                                    <li>
                                       <p>创建一个Java <a id="d8687e2660" class="indexterm-anchor"></a>除非指定了另一个模式，否则定义者模式中的源模式对象。
                                       </p>
                                    </li>
                                    <li>
                                       <p>将源文件的内容加载到架构对象中。</p>
                                    </li>
                                    <li>
                                       <p>为源文件中定义的所有类创建类模式对象。</p>
                                    </li>
                                    <li>
                                       <p>如果请求<code class="codeph">-resolve</code> ，则编译源模式对象并解析类及其依赖项。然后，它将已编译的类存储到类模式对象中。
                                       </p>
                                    </li>
                                 </ol>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d8687e2676" headers="d8687e2640 ">
                                 <p><code class="codeph">.sqlj</code>源文件</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d8687e2676 d8687e2643 ">
                                 <ol>
                                    <li>
                                       <p>创建一个<a id="d8687e2686" class="indexterm-anchor"></a>除非指定了另一个模式，否则定义者模式中的源模式对象。
                                       </p>
                                    </li>
                                    <li>
                                       <p>将源文件的内容加载到架构对象中。</p>
                                    </li>
                                    <li>
                                       <p>为源文件中定义的所有类和资源创建类模式对象。</p>
                                    </li>
                                    <li>
                                       <p>如果请求<code class="codeph">-resolve</code> ，则转换并编译源模式对象，并将编译后的类存储到类模式对象中。然后，它将配置文件存储到<code class="codeph">.ser</code>资源架构对象中并对其进行自定义。
                                       </p>
                                    </li>
                                 </ol>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d8687e2705" headers="d8687e2640 ">
                                 <p><a id="d8687e2707" class="indexterm-anchor"></a> <code class="codeph">.class</code>编译的Java文件</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d8687e2705 d8687e2643 ">
                                 <ol>
                                    <li>
                                       <p>创建一个<a id="d8687e2717" class="indexterm-anchor"></a><a id="d8687e2721" class="indexterm-anchor"></a>除非指定了另一个模式，否则定义者模式中的类模式对象。
                                       </p>
                                    </li>
                                    <li>
                                       <p>将类文件加载到架构对象中。</p>
                                    </li>
                                    <li>
                                       <p>如果指定了<code class="codeph">-resolve</code>则解析并验证类及其依赖项。
                                       </p>
                                    </li>
                                 </ol>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d8687e2734" headers="d8687e2640 ">
                                 <p><code class="codeph">.properties</code> Java资源文件</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d8687e2734 d8687e2643 ">
                                 <ol>
                                    <li>
                                       <p>创建一个<a id="d8687e2744" class="indexterm-anchor"></a>除非指定了另一个模式，否则定义者模式中的资源模式对象。
                                       </p>
                                    </li>
                                    <li>
                                       <p>将资源文件加载到架构对象中。</p>
                                    </li>
                                 </ol>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d8687e2751" headers="d8687e2640 ">
                                 <p><code class="codeph">.ser</code> SQLJ配置文件</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d8687e2751 d8687e2643 ">
                                 <ol>
                                    <li>
                                       <p>创建一个<a id="d8687e2761" class="indexterm-anchor"></a>除非指定了另一个模式，否则定义者模式中的资源模式对象。
                                       </p>
                                    </li>
                                    <li>
                                       <p>将<code class="codeph">.ser</code>资源文件加载到架构对象中并对其进行自定义。
                                       </p>
                                    </li>
                                 </ol>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <div class="infoboxnote" id="GUID-D920E247-8D81-4D08-8A5D-8C47BAC52C63__GUID-0846FAAB-1703-4F90-A413-73C6B0977AEA">
                        <p class="notep1">注意：</p>
                        <p><a id="d8687e2773" class="indexterm-anchor"></a>所述<code class="codeph">dropjava</code>工具执行的反向<code class="codeph">loadjava</code>工具。它删除与Java文件对应的模式对象。始终使用<code class="codeph">dropjava</code>工具来删除与创建的Java模式对象<code class="codeph">loadjava</code>工具。例如，</p><pre class="oac_no_warn" dir="ltr">dropjava -u HR -schema TEST MyClass.java密码： <span class="italic">密码</span>
</pre><p>删除SQL数据定义语言（DDL）命令不会更新<code class="codeph">loadjava</code>工具和<code class="codeph">dropjava</code>工具维护的辅助数据。您还可以从SQL命令中运行<code class="codeph">dropjava</code>工具。
                        </p>
                        <p><a id="d8687e2805" class="indexterm-anchor"></a>加载类和资源后，可以访问数据库模式中的<code class="codeph">USER_OBJECTS</code>视图，以验证是否已正确加载类和资源。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="schema-objects-and-Oracle-JVM-utilities.html#GUID-2A76FBC2-3A4A-4620-9A83-CA01724B13DB">架构对象和Oracle JVM实用程序</a></li>
                        <li><a href="invoking-Java-methods.html#GUID-FC2894A1-87C3-4695-968E-A3E69344B353">关于使用命令行界面</a></li>
                     </ul>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-8D6C27CF-FA07-4D6F-823F-32BB6AB4FCC8" name="GUID-8D6C27CF-FA07-4D6F-823F-32BB6AB4FCC8"></a><h4 id="JJDEV-GUID-8D6C27CF-FA07-4D6F-823F-32BB6AB4FCC8" class="sect4"><span class="enumeration_section">2.5.4.1</span>关于用户类加载类的元数据共享</h4>
                  <div>
                     <p>由内置机制加载的用于加载数据库驻留类的类称为<span class="bold">系统类加载</span> ，而通过其他方式<span class="bold">加载的类</span>称为<span class="bold">用户类加载</span> 。将类加载到数据库中时，会在内存中创建类的表示形式，其中一部分在此处称为类元数据。对于使用该类的任何会话，类元数据是相同的，并且可能是可共享的。之前，此类共享仅适用于系统类加载的类。从Oracle Database <span class="italic">11g开始</span> ，您还可以根据系统管理员的意愿共享用户类加载类的类元数据。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="classpath-extensions-user-classes-metadata.html#GUID-C948182D-D9C7-45DB-9B7A-648BBCA47F6E">类路径扩展和用户分类加载的元数据</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-A0EF25BC-DC00-4B1E-9968-35C1D2E134D4" name="GUID-A0EF25BC-DC00-4B1E-9968-35C1D2E134D4"></a><h4 id="JJDEV-GUID-A0EF25BC-DC00-4B1E-9968-35C1D2E134D4" class="sect4"><span class="enumeration_section">2.5.4.2</span>定义相同类两次</h4>
                  <div>
                     <div class="section">
                        <p><a id="d8687e3024" class="indexterm-anchor"></a>在同一模式中，不能有两个具有相同名称的类对象。此规则以两种方式影响您：</p>
                        <div class="infoboxnote" id="GUID-A0EF25BC-DC00-4B1E-9968-35C1D2E134D4__GUID-972F8E4F-6276-421C-A5D1-21C945BE2187">
                           <p class="notep1">注意：</p>
                           <p>此规则的一个例外是当您对数据库驻留JAR使用<code class="codeph">-prependjarnames</code>选项时。如果使用此选项，则可以在同一模式中具有两个具有相同类名的类。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您可以加载特定的Java <code class="codeph">.class</code>文件或其<code class="codeph">.java</code>文件，但不能同时加载两者。
                              </p>
                              <p>Oracle数据库跟踪您是加载了类文件还是源文件。如果要更新类，则必须加载最初加载的相同类型的文件。如果要更新其他类型，则必须在加载第二个类型之前删除第一个类型。例如，如果您加载<code class="codeph">x.java</code>作为类<code class="codeph">y</code>的源，那么要加载<code class="codeph">x.class</code> ，您必须首先删除<code class="codeph">x.java</code> 。
                              </p>
                           </li>
                           <li>
                              <p>您无法在同一模式中的两个不同模式对象中定义相同的类。例如，假设<code class="codeph">x.java</code>定义了类<code class="codeph">y</code>并且您希望将<code class="codeph">y</code>的定义移动到<code class="codeph">z.java</code> 。如果<code class="codeph">x.java</code>已经加载，则<code class="codeph">loadjava</code>工具拒绝任何企图加载<code class="codeph">z.java</code> ，这也定义了<code class="codeph">y</code> 。相反，请执行以下任一操作：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>删除<code class="codeph">x.java</code> ，加载定义<code class="codeph">y</code> <code class="codeph">z.java</code> ，然后加载新的<code class="codeph">x.java</code> ，它不定义<code class="codeph">y</code> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>加载新的<code class="codeph">x.java</code> ，它不定义<code class="codeph">y</code> ，然后加载定义<code class="codeph">y</code> <code class="codeph">z.java</code> 。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="preparing-Java-class-methods.html#GUID-E4FAFBDA-6E16-41E2-B3A7-E3E3EAF9CD3E">数据库驻留JAR</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-A5003838-A6C1-43E6-A546-03F2EFA87247" name="GUID-A5003838-A6C1-43E6-A546-03F2EFA87247"></a><h4 id="JJDEV-GUID-A5003838-A6C1-43E6-A546-03F2EFA87247" class="sect4"><span class="enumeration_section">2.5.4.3</span>关于指定数据库权限和JVM权限</h4>
                  <div>
                     <div class="section">
                        <p>您必须具有以下SQL数据库权限才能加载类：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">CREATE PROCEDURE</code>和<code class="codeph">CREATE TABLE</code>权限以加载到您的架构中。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">CREATE ANY PROCEDURE</code>并<code class="codeph">CREATE ANY TABLE</code>权限以加载到另一个模式。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">oracle.aurora.security。JServerPermission.loadLibraryInClass.</code> <span class="italic"><code class="codeph">classname</code></span> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="database-contents-Oracle-JVM-security.html#GUID-E3427117-0517-4B6D-B346-81BB36A51489">加载类的权限</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-40C45ED1-F7CA-4AD3-8E06-BBCEEF156780" name="GUID-40C45ED1-F7CA-4AD3-8E06-BBCEEF156780"></a><h4 id="JJDEV-GUID-40C45ED1-F7CA-4AD3-8E06-BBCEEF156780" class="sect4"><span class="enumeration_section">2.5.4.4</span>关于加载JAR或ZIP文件</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">loadjava</code>工具接受<code class="codeph">.class</code> ， <code class="codeph">.java</code> ， <code class="codeph">.properties</code> ， <code class="codeph">.sqlj</code> ， <code class="codeph">.ser</code> ， <code class="codeph">.jar</code>或<code class="codeph">.zip</code>文件。JAR或ZIP文件可以包含源，类和数据文件。将JAR或ZIP文件传递给<code class="codeph">loadjava</code>工具时，它会打开存档并单独加载存档的成员。没有JAR或ZIP架构对象。如果JAR或ZIP内容自上次加载后未发生更改，则不会重新加载。因此，加载JAR或ZIP文件几乎没有性能损失。实际上，加载JAR或ZIP文件是使用<code class="codeph">loadjava</code>工具的最简单方法。
                        </p>
                        <div class="infoboxnote" id="GUID-40C45ED1-F7CA-4AD3-8E06-BBCEEF156780__GUID-8A7B311F-D034-4C70-921B-0594E7752561">
                           <p class="notep1">注意：</p>
                           <p>如果类自上次加载后没有更改，则不会重新加载类。但是，您可以使用<code class="codeph">-force</code>选项强制重新加载类。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-E4FAFBDA-6E16-41E2-B3A7-E3E3EAF9CD3E" name="GUID-E4FAFBDA-6E16-41E2-B3A7-E3E3EAF9CD3E"></a><h4 id="JJDEV-GUID-E4FAFBDA-6E16-41E2-B3A7-E3E3EAF9CD3E" class="sect4"><span class="enumeration_section">2.5.4.5</span>数据库驻留JAR</h4>
                  <div>
                     <div class="section">
                        <p>从<span class="italic">11g</span>版本1（11.1）开始，当您将JAR的内容加载到数据库中时，您可以选择创建表示JAR本身的数据库对象。通过这种方式，您可以保留此JAR对象与从JAR加载的类，资源和源对象之间的关联。这使您能够：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用签名的JAR和JAR名称空间隔离的方式与在标准JVM中使用它们的方式相同。</p>
                           </li>
                           <li>
                              <p>管理从JAR派生的类，同时将其作为单个单元加载到数据库中。这有助于您防止从JAR加载的类的个别重新定义。它还允许您删除从JAR加载的整个类集，无论外部文件系统上的内容或JAR是否继续存在，在删除它时。</p>
                           </li>
                        </ul>
                        <p>要将JAR加载到数据库中，您可以使用<code class="codeph">loadjava</code>工具的以下选项：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">-jarsasdbobjects</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">-prependjarnames</code></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="loadjava-tool.html#GUID-033299E6-07E2-4C2C-9E26-A2FE25118F1C">loadjava工具</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div>
            </div><a id="JJDEV13084"></a><a id="JJDEV13083"></a><div class="props_rev_3"><a id="GUID-3F57CC21-BC4C-4203-B477-695E039D5973" name="GUID-3F57CC21-BC4C-4203-B477-695E039D5973"></a><h3 id="JJDEV-GUID-3F57CC21-BC4C-4203-B477-695E039D5973" class="sect3"><span class="enumeration_section">2.5.5</span>授予执行权限概述</h3>
               <div>
                  <p><a id="d8687e3608" class="indexterm-anchor"></a>如果在自己的模式中加载所有类，并且不引用模式之外的任何类，则您已拥有运行类的权限。您具有对象调用同一模式中加载的其他对象所需的特权。也就是说， <code class="codeph">A</code>类能够调用<code class="codeph">B</code>类。类<code class="codeph">A</code>必须给予调用类权<code class="codeph">B</code> 。</p>
                  <p><a id="d8687e3626" class="indexterm-anchor"></a>定义Java应用程序的类在其所有者的SQL模式下存储在Oracle数据库中。默认情况下，出于安全考虑，其他用户无法运行驻留在一个用户架构中的类。您可以通过以下方式为其他用户提供运行课程的权限：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用<code class="codeph">loadjava -grant</code>选项</p>
                     </li>
                     <li>
                        <p>使用以下命令：</p><pre class="oac_no_warn" dir="ltr">SQL&gt;将myclass上的execute赋予HR;</pre><p>其中， <code class="codeph">myclass</code>是底层Java类的名称。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-3F57CC21-BC4C-4203-B477-695E039D5973__GUID-2572C53A-E3F5-414D-89DB-99CEDC94A45D">
                     <p class="notep1">注意：</p>
                     <p>在Oracle Database <span class="italic">11g第</span> 1版（11.1）之前，授予对存储过程的执行权限意味着授予对存储过程引用的存储过程和Java类的执行权限。自Oracle Database <span class="italic">11g</span>发布以来，如果您还希望在底层Java类上授予执行权限，则必须明确授予该类的执行权限。实现这是为了提高安全性。
                     </p>
                  </div>
                  <p>下图说明了运行类所需的权限。</p>
                  <div class="figure" id="GUID-3F57CC21-BC4C-4203-B477-695E039D5973__CEGFCIGG">
                     <p class="titleinfigure">图2-3运行类的权限</p><img src="img/exeright.gif" alt="下面是图2-3的描述" title="下面是图2-3的描述" longdesc="img_text/exeright.html"><br><a href="img_text/exeright.html">“图2-3运行类的权限”的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="loadjava-tool.html#GUID-033299E6-07E2-4C2C-9E26-A2FE25118F1C">loadjava工具</a></li>
                        <li><a href="Java-application-performance.html#GUID-7AB351A8-AA78-477C-AC3F-B5AD74E79A2B">Oracle数据库Java应用程序性能</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="JJDEV13086"></a><a id="JJDEV13087"></a><a id="JJDEV13085"></a><div class="props_rev_3"><a id="GUID-4695681F-91B7-45A1-AA10-CD6BF046C4C7" name="GUID-4695681F-91B7-45A1-AA10-CD6BF046C4C7"></a><h3 id="JJDEV-GUID-4695681F-91B7-45A1-AA10-CD6BF046C4C7" class="sect3"><span class="enumeration_section">2.5.6</span>控制当前用户的概述</h3>
               <div>
                  <p>在执行PL / SQL代码期间，始终存在当前用户。相同的概念用于执行Java代码。最初，当前用户是用户，他创建调用Java代码的会话。通过相应的包装器从SQL或PL / SQL调用Java方法。Java包装器是特殊的PL / SQL实体，它将Java方法暴露给SQL和PL / SQL作为PL / SQL存储过程或函数。这样的包装器可能会改变当前的有效用户。将当前有效用户更改为包装器所有者的包装器称为definer的权限包装器。如果包装器未更改当前有效用户，则有效用户保持不变。</p>
                  <p>默认情况下，Java包装器是<a id="d8687e3774" class="indexterm-anchor"></a>定义者的权利包装。如果要覆盖它，请使用<code class="codeph">AUTHID CURRENT_USER</code>选项创建包装器。
                  </p>
                  <p>在执行Java代码期间的任何时候，都会维护Java调用堆栈。堆栈包含与输入的Java方法相对应的帧，最里面的帧对应于当前正在执行的方法。默认情况下，Java方法在堆栈上执行而不更改当前用户，即具有当前有效调用者的权限，而不是他们的定义者。</p>
                  <p>您可以使用<code class="codeph">loadjava -definer</code>选项将Java类加载到数据库。具有标记的definer属性的类的任何方法都成为定义者的权限方法。当输入这样的方法时，在Java堆栈上创建一种称为定义器框架的特殊帧。该帧将当前有效用户切换到此类的所有者（定义者）。新的用户ID对所有内部框架保持有效，直到定义器的框架从堆栈弹出或输入嵌套的定义框架为止。
                  </p>
                  <p>因此，在执行从SQL或PL / SQL通过其包装器调用的Java方法的任何给定时间，有效用户都是以下之一：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>Java堆栈中最里面的定义器框架</p>
                     </li>
                     <li>
                        <p>最顶层Java方法的PL / SQL包装器的所有者，如果它是定义者的权限，或者是调用包装器的用户。</p>
                     </li>
                  </ul>
                  <p>考虑使用定义者权利程序来分析销售额的公司。要提供本地销售统计信息，过程<code class="codeph">analyze</code>必须访问驻留在每个区域站点的<code class="codeph">sales</code>表。为此，该过程还必须驻留在每个区域站点。这会导致维护问题。为了解决这个问题，公司在总部安装了一个调用程序权限版本的程序<code class="codeph">analyze</code> 。
                  </p>
                  <p>下图显示了所有区域站点如何使用相同的过程查询自己的<code class="codeph">sales</code>表。
                  </p>
                  <div class="figure" id="GUID-4695681F-91B7-45A1-AA10-CD6BF046C4C7__BABFBIBJ">
                     <p class="titleinfigure">图2-4 Invoker的权利解决方案</p><img src="img/invoker_rights_solution.gif" alt="下面是图2-4的描述" title="下面是图2-4的描述" longdesc="img_text/invoker_rights_solution.html"><br><a href="img_text/invoker_rights_solution.html">“图2-4祈求者权利解决方案”的描述</a></div>
                  <!-- class="figure" -->
                  <p>有时，您可能希望覆盖默认调用者的权限行为。假设总部希望<code class="codeph">analyze</code>程序计算销售佣金并更新中央<code class="codeph">payroll</code>表。这提出了一个问题，因为<code class="codeph">analyze</code>调用者不应该直接访问<code class="codeph">payroll</code>表， <code class="codeph">payroll</code>表存储员工工资和其他敏感数据。
                  </p>
                  <p>下图说明了解决方案，其中<code class="codeph">analyze</code>程序调用<code class="codeph">calcComm</code>的权限过程<code class="codeph">calcComm</code> ，后者又更新了<code class="codeph">payroll</code>表。
                  </p>
                  <div class="figure" id="GUID-4695681F-91B7-45A1-AA10-CD6BF046C4C7__BABDDBAD">
                     <p class="titleinfigure">图2-5间接访问</p><img src="img/controlled_access.gif" width="328" alt="下面是图2-5的描述" title="下面是图2-5的描述" longdesc="img_text/controlled_access.html"><br><a href="img_text/controlled_access.html">“图2-5间接访问”的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="writing-top-level-call-specifications.html#GUID-140C918E-A174-42BA-AC1F-87907BD0E878">编写顶级呼叫规范</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="JJDEV13089"></a><a id="JJDEV13090"></a><a id="JJDEV13091"></a><a id="JJDEV13092"></a><a id="JJDEV13088"></a><div class="props_rev_3"><a id="GUID-1FAE81CC-C835-4058-BCF8-15534DF1CFC1" name="GUID-1FAE81CC-C835-4058-BCF8-15534DF1CFC1"></a><h3 id="JJDEV-GUID-1FAE81CC-C835-4058-BCF8-15534DF1CFC1" class="sect3"><span class="enumeration_section">2.5.7</span>检查Java上载概述</h3>
               <div>
                  <div class="section">
                     <p>您可以查询<code class="codeph">USER_OBJECTS</code>数据库视图以获取有关您拥有的模式对象的信息，包括Java源，类和资源。例如，这使您可以验证加载的源，类或资源是否正确存储在架构对象中。
                     </p>
                     <p>下表列出了<code class="codeph">USER_OBJECTS</code>中的键列及其说明。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-1FAE81CC-C835-4058-BCF8-15534DF1CFC1__BABJHIGG">
                     <p class="titleintable">表2-7关键USER_OBJECT列</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="关键USER_OBJECT列" width="100%" border="1" summary="table" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d8687e3983">名称</th>
                              <th align="left" valign="bottom" width="69%" id="d8687e3986">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d8687e3991" headers="d8687e3983 ">
                                 <p><code class="codeph">OBJECT_NAME</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d8687e3991 d8687e3986 ">
                                 <p>对象的名称</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d8687e3999" headers="d8687e3983 ">
                                 <p><code class="codeph">OBJECT_TYPE</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d8687e3999 d8687e3986 ">
                                 <p>对象的类型，例如<code class="codeph">JAVA SOURCE</code> ， <code class="codeph">JAVA CLASS</code>或<code class="codeph">JAVA RESOURCE</code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d8687e4016" headers="d8687e3983 ">
                                 <p><code class="codeph">状态</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d8687e4016 d8687e3986 ">
                                 <p>对象的状态。值可以是<code class="codeph">VALID</code>或<code class="codeph">INVALID</code> 。它对<code class="codeph">JAVA RESOURCE</code>总是<code class="codeph">VALID</code>的。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1FAE81CC-C835-4058-BCF8-15534DF1CFC1__GUID-A1DFE3E8-2936-4F68-95B6-8436ACA7E795">对象名称和类型</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>一个<code class="codeph">OBJECT_NAME</code>在<code class="codeph">USER_OBJECTS</code>是别名。如果超过30个字符，则完全限定名称将存储为别名。
                     </p>
                     <p><a id="d8687e4048" class="indexterm-anchor"></a><a id="d8687e4052" class="indexterm-anchor"></a>如果服务器使用架构对象的别名，则可以使用<code class="codeph">DBMS_JAVA</code>包的<code class="codeph">LONGNAME()</code>函数从查询中将其作为完全限定名称接收，而无需知道别名或转换规则。
                     </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT dbms_java.longname（object_name）FROM user_objects WHERE object_type ='JAVA SOURCE';</pre><p>此语句显示Java源模式对象的标准名称。如果没有使用别名，则不会发生转换。</p>
                     <div class="infoboxnote" id="GUID-1FAE81CC-C835-4058-BCF8-15534DF1CFC1__GUID-9690559D-1872-414E-A30C-8AD688CB4905">
                        <p class="notep1">注意：</p>
                        <p>SQL和PL / SQL <span class="italic">不</span>区分大小写。
                        </p>
                     </div>
                     <p><a id="d8687e4074" class="indexterm-anchor"></a>您可以使用<code class="codeph">DBMS_JAVA</code>包的<code class="codeph">SHORTNAME()</code>函数将完全限定名称用作查询条件，而无需知道它是否已转换为数据库中的别名。
                     </p><pre class="oac_no_warn" dir="ltr">SQL * Plus&gt; SELECT object_type FROM user_objects WHERE object_name = dbms_java.shortname（'known_fullname'）;</pre><p>此语句显示具有指定的完全限定名称的架构对象的<code class="codeph">OBJECT_TYPE</code> 。这假设完全限定名称可在数据库字符集中表示。
                     </p><pre class="oac_no_warn" dir="ltr">SQL&gt; select * from javasnm; SHORT LONGNAME ------------------------------------------------ ---------------------- / 78e6d350_BinaryExceptionHandl sun / tools / java / BinaryExceptionHandler / b6c774bb_ClassDeclaration sun / tools / java / ClassDeclaration / af5a8ef3_JarVerifierStream1 sun / tools / jar / JarVerifierStream $ 1</pre><p>此语句显示存储在<code class="codeph">javasnm</code>视图中的所有数据。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1FAE81CC-C835-4058-BCF8-15534DF1CFC1__GUID-22A7BF64-09D7-4F8A-B864-7289134A587D">状态</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><code class="codeph">STATUS</code>是一个字符串，表示Java模式对象的有效性。如果成功编译，则Java源模式对象为<code class="codeph">VALID</code>如果成功解析，则Java类模式对象为<code class="codeph">VALID</code> 。Java资源架构对象始终为<code class="codeph">VALID</code> ，因为资源未解析。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1FAE81CC-C835-4058-BCF8-15534DF1CFC1__GUID-F6183BC9-24B2-4B17-AA61-7E2173079F02">示例：访问USER_OBJECTS</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下SQL * Plus脚本访问<code class="codeph">USER_OBJECTS</code>视图以显示有关上载的Java源，类和资源的信息：</p><pre class="oac_no_warn" dir="ltr">COL object_name格式a30 COL object_type格式a15 SELECT object_name，object_type，status FROM user_objects WHERE object_type IN（'JAVA SOURCE'，'JAVA CLASS'，'JAVA RESOURCE'）ORDER BY object_type，object_name;</pre><p>您可以选择使用通配符查询<code class="codeph">USER_OBJECTS</code> ，如下例所示：</p><pre class="oac_no_warn" dir="ltr">SELECT object_name，object_type，status FROM user_objects WHERE object_name LIKE'％Alerter';</pre><p>上述语句查找以字符<code class="codeph">Alerter</code>结尾的任何<code class="codeph">OBJECT_NAME</code>条目。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="shortened-class-names.html#GUID-7A13AB37-4680-4E22-83EA-830C79E61126">缩短的班级名称</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="JJDEV13093"></a><div class="props_rev_3"><a id="GUID-8D343A4B-EC7A-4F65-8942-56D184250B64" name="GUID-8D343A4B-EC7A-4F65-8942-56D184250B64"></a><h3 id="JJDEV-GUID-8D343A4B-EC7A-4F65-8942-56D184250B64" class="sect3"><span class="enumeration_section">2.5.8</span>关于发布数据库中加载的Java方法</h3>
               <div>
                  <p>Oracle数据库使客户端和SQL能够在发布后调用数据库中加载的Java方法。您可以发布对象本身或单个方法。如果编写要使用触发器直接或间接使用SQL数据操作语言（DML）或PL / SQL调用的Java存储过程，则必须在类中发布单个方法。使用调用规范，指定如何访问该方法。Java程序由许多类中的许多方法组成。但是，通常只使用调用规范公开一些<code class="codeph">static</code>方法。
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="publishing-Java-classes.html#GUID-C6DB962A-CCA6-44A1-990C-3E52636A0634">使用呼叫规范发布Java类</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="JJDEV13095"></a><a id="JJDEV13096"></a><a id="JJDEV13094"></a><div class="props_rev_3"><a id="GUID-9DF130C1-763D-4B2C-9F66-7F2C0E6BB7FA" name="GUID-9DF130C1-763D-4B2C-9F66-7F2C0E6BB7FA"></a><h3 id="JJDEV-GUID-9DF130C1-763D-4B2C-9F66-7F2C0E6BB7FA" class="sect3"><span class="enumeration_section">2.5.9</span>审计数据库中加载的Java类概述</h3>
               <div>
                  <div class="section">
                     <p>在Oracle Database 10g第2版（10.2）之前的版本中，无法直接审计数据库中的Java类。但是，您可以审核PL / SQL包装器。通常，所有Java存储过程都是从某些包装器启动的。因此，可以审计所有Java存储过程，但不能直接审计。</p>
                     <p>自Oracle Database 10g第2版（10.2）以来，您可以审计DDL语句，以创建，更改或删除Java源，类和资源模式对象，就像使用任何其他DDL语句一样。Oracle数据库提供了审核选项，可以轻松直接地审核Java活动。您还可以审核Java源，类和资源的任何修改。</p>
                     <p><a id="d8687e4362" class="indexterm-anchor"></a>您可以在两个不同级别（语句级别和对象级别）审核与Java模式对象相关的数据库活动。在语句级别，您可以审核与特殊语句模式相关的所有活动。
                     </p>
                     <p><a href="preparing-Java-class-methods.html#GUID-9DF130C1-763D-4B2C-9F66-7F2C0E6BB7FA__CEGCDDIG" title="表">表2-8</a>列出了语句审计选项以及与Java模式对象相关的相应SQL语句。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-9DF130C1-763D-4B2C-9F66-7F2C0E6BB7FA__CEGCDDIG">
                     <p class="titleintable">表2-8与Java模式对象相关的语句审计选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="与Java模式对象相关的语句审计选项" width="100%" border="1" summary="table" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="50%" id="d8687e4383">声明选项</th>
                              <th align="left" valign="bottom" width="50%" id="d8687e4386">SQL语句</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d8687e4391" headers="d8687e4383 ">
                                 <p><code class="codeph">创造JAVA来源</code></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d8687e4391 d8687e4386 ">
                                 <p><code class="codeph">创造JAVA来源</code></p>
                                 <p><code class="codeph">创建或替换JAVA源</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d8687e4403" headers="d8687e4383 ">
                                 <p><code class="codeph">ALTER JAVA SOURCE</code></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d8687e4403 d8687e4386 ">
                                 <p><code class="codeph">ALTER JAVA SOURCE</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d8687e4412" headers="d8687e4383 ">
                                 <p><code class="codeph">DROP JAVA SOURCE</code></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d8687e4412 d8687e4386 ">
                                 <p><code class="codeph">DROP JAVA SOURCE</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d8687e4421" headers="d8687e4383 ">
                                 <p><code class="codeph">创造JAVA CLASS</code></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d8687e4421 d8687e4386 ">
                                 <p><code class="codeph">创造JAVA CLASS</code></p>
                                 <p><code class="codeph">创建或替换JAVA CLASS</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d8687e4433" headers="d8687e4383 ">
                                 <p><code class="codeph">ALTER JAVA CLASS</code></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d8687e4433 d8687e4386 ">
                                 <p><code class="codeph">ALTER JAVA CLASS</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d8687e4442" headers="d8687e4383 ">
                                 <p><code class="codeph">DROP JAVA CLASS</code></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d8687e4442 d8687e4386 ">
                                 <p><code class="codeph">DROP JAVA CLASS</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d8687e4451" headers="d8687e4383 ">
                                 <p><code class="codeph">创建JAVA资源</code></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d8687e4451 d8687e4386 ">
                                 <p><code class="codeph">创建JAVA资源</code></p>
                                 <p><code class="codeph">创建或替换JAVA资源</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d8687e4463" headers="d8687e4383 ">
                                 <p><code class="codeph">ALTER JAVA RESOURCE</code></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d8687e4463 d8687e4386 ">
                                 <p><code class="codeph">ALTER JAVA RESOURCE</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d8687e4472" headers="d8687e4383 ">
                                 <p><code class="codeph">DROP JAVA RESOURCE</code></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d8687e4472 d8687e4386 ">
                                 <p><code class="codeph">DROP JAVA RESOURCE</code></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p>例如，如果要审核<code class="codeph">ALTER JAVA SOURCE</code> DDL语句，请在SQL提示符处输入以下语句：</p><pre class="oac_no_warn" dir="ltr">审核更改JAVA来源</pre><p><a id="d8687e4489" class="indexterm-anchor"></a>对象级审计提供更精细的粒度。它使您能够通过放大特定对象来识别特定问题。
                     </p>
                     <p><a href="preparing-Java-class-methods.html#GUID-9DF130C1-763D-4B2C-9F66-7F2C0E6BB7FA__CEGBGHFF" title="表">表2-9</a>列出了每个Java模式对象的对象审计选项。单元格中的条目X表示可以为该Java模式对象审核相应的SQL命令。条目NA表示相应的SQL命令不适用于该Java模式对象。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-9DF130C1-763D-4B2C-9F66-7F2C0E6BB7FA__CEGBGHFF">
                     <p class="titleintable">表2-9与Java模式选项相关的对象审计选项</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="与Java模式选项相关的对象审计选项" width="100%" border="1" summary="table" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d8687e4512">对象选项</th>
                              <th align="left" valign="bottom" width="24%" id="d8687e4515">Java来源</th>
                              <th align="left" valign="bottom" width="24%" id="d8687e4518">Java资源</th>
                              <th align="left" valign="bottom" width="23%" id="d8687e4521">Java类</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d8687e4526" headers="d8687e4512 ">
                                 <p><code class="codeph">改变</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d8687e4526 d8687e4515 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d8687e4526 d8687e4518 ">
                                 <p>NA</p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d8687e4526 d8687e4521 ">
                                 <p>X</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d8687e4540" headers="d8687e4512 ">
                                 <p><code class="codeph">执行</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d8687e4540 d8687e4515 ">
                                 <p>NA</p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d8687e4540 d8687e4518 ">
                                 <p>NA</p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d8687e4540 d8687e4521 ">
                                 <p>X</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d8687e4554" headers="d8687e4512 ">
                                 <p><code class="codeph">审计</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d8687e4554 d8687e4515 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d8687e4554 d8687e4518 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d8687e4554 d8687e4521 ">
                                 <p>X</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d8687e4568" headers="d8687e4512 ">
                                 <p><code class="codeph">GRANT</code></p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d8687e4568 d8687e4515 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="24%" headers="d8687e4568 d8687e4518 ">
                                 <p>X</p>
                              </td>
                              <td align="left" valign="top" width="23%" headers="d8687e4568 d8687e4521 ">
                                 <p>X</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-9DF130C1-763D-4B2C-9F66-7F2C0E6BB7FA__GUID-0084ECD1-0D53-4A4E-8C05-C84C45E5F390">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../dbseg/part_6.html#DBSEG006" target="_blank"><span class="italic">Oracle数据库安全指南</span></a></p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/AUDIT-Traditional-Auditing.html#SQLRF01107" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can back up and recover multitenant container databases (CDBs) and pluggable databases (PDBs)."></meta>
      <meta name="description" content="You can back up and recover multitenant container databases (CDBs) and pluggable databases (PDBs)."></meta>
      <title>备份和恢复CDB和PDB</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator’s Guide "></meta>
      <meta property="og:description" content="You can back up and recover multitenant container databases (CDBs) and pluggable databases (PDBs)."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="multitenant-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-20T09:59:22-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2017, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96136-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="using-oracle-features-in-a-multitenant-environment.html" title="Previous" type="text/html"></link>
      <link rel="next" href="using-database-utilities-in-a-cdb.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Multitenant Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="MULTI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-oracle-features-in-a-multitenant-environment.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="using-database-utilities-in-a-cdb.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="using-oracle-features-in-a-multitenant-environment.html" property="item" typeof="WebPage"><span property="name">在多租户环境中使用Oracle功能</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">备份和恢复CDB和PDB</li>
            </ol>
            <a id="GUID-371BD31F-DC28-47D6-859C-E5AA110CE364" name="GUID-371BD31F-DC28-47D6-859C-E5AA110CE364"></a>
            
            <h2 id="MULTI-GUID-371BD31F-DC28-47D6-859C-E5AA110CE364" class="sect2"><span class="enumeration_chapter">20</span>备份和恢复CDB和PDB</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以备份和恢复多租户容器数据库（CDB）和可插拔数据库（PDB）。</p>
               <p>本节包含以下主题：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="backing-up-and-recovering-cdbs-and-pdbs.html#GUID-37E1BB1C-FFBB-494B-B3B5-5147BD51F0BF">备份和恢复CDB和PDB概述</a><br>使用多租户架构时，您可以在整个多租户容器数据库（CDB），根或一个或多个可插拔数据库（PDB）上执行备份和恢复操作。
                  </li>
                  <li class="ulchildlink"><a href="backing-up-and-recovering-cdbs-and-pdbs.html#GUID-B77E0204-3701-4EFD-99B0-EE199AF73BDA">CDB的备份和完全恢复</a><br>要在整个多租户容器数据库（CDB）上执行备份和完整恢复操作，请将<code class="codeph">TARGET</code>连接到根目录。
                  </li>
                  <li class="ulchildlink"><a href="backing-up-and-recovering-cdbs-and-pdbs.html#GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9">PDB的备份和完全恢复</a><br>您可以在单个可插拔数据库（PDB）或多个PDB上执行备份和完整恢复操作。
                  </li>
                  <li class="ulchildlink"><a href="backing-up-and-recovering-cdbs-and-pdbs.html#GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371">多租户环境中的时间点恢复</a><br>您可以执行整个多租户容器数据库（CDB）或特定可插拔数据库（PDB）的时间点恢复。
                  </li>
                  <li class="ulchildlink"><a href="backing-up-and-recovering-cdbs-and-pdbs.html#GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5">多租户环境中的闪回数据库</a><br>您可以对整个多租户容器数据库（CDB）或特定可插入（PDB）执行闪回数据库操作。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="using-oracle-features-in-a-multitenant-environment.html#GUID-CE922DAA-66FB-430B-96E5-29FF50BFD2FF" title="您可以在多租户环境中使用Oracle数据库功能。">在多租户环境中使用Oracle功能</a></p>
                  </div>
               </div>
            </div>
            
            <div class="props_rev_3"><a id="GUID-37E1BB1C-FFBB-494B-B3B5-5147BD51F0BF" name="GUID-37E1BB1C-FFBB-494B-B3B5-5147BD51F0BF"></a><h3 id="MULTI-GUID-37E1BB1C-FFBB-494B-B3B5-5147BD51F0BF" class="sect3"><span class="enumeration_section">20.1</span>备份和恢复CDB和PDB概述</h3>
               <div>
                  <p>使用多租户架构时，您可以在整个多租户容器数据库（CDB），根或一个或多个可插拔数据库（PDB）上执行备份和恢复操作。</p>
                  <p>用于备份和恢复CDB和PDB的Oracle Recovery Manager（RMAN）命令与用于非CDB的命令相同，语法略有不同。在非CDB上执行的备份和恢复操作也可以在CDB和PDB上执行。这包括以下内容：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>完整备份和增量备份</p>
                     </li>
                     <li>
                        <p>完整和时间点恢复（PITR）</p>
                     </li>
                     <li>
                        <p>闪回数据库</p>
                     </li>
                     <li>
                        <p>报告操作（例如列出备份和交叉检查备份）</p>
                     </li>
                  </ul>
                  <div class="section">
                     <p class="subhead2" id="GUID-37E1BB1C-FFBB-494B-B3B5-5147BD51F0BF__GUID-23311206-0FD1-45CF-ABE6-FF21443891C1">关于连接到CDB和PDB</p>
                     <p>您可以通过以下方式之一连接到根目录<span class="italic">：</span></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用操作系统身份验证连接</p>
                           <p>您作为具有<code class="codeph">SYSDBA</code>权限的<code class="codeph">SYS</code>用户连接到根。
                           </p>
                        </li>
                        <li>
                           <p>以普通用户身份在本地连接</p>
                        </li>
                        <li>
                           <p>通过Oracle Net Services以普通用户身份进行连接</p>
                        </li>
                     </ul>
                     <p>要作为<code class="codeph">TARGET</code>连接到PDB，请使用以下技术之一：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用解析为该PDB的数据库服务的网络服务名称进行连接</p>
                        </li>
                        <li>
                           <p>使用<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>权限以本地用户身份或本地用户身份进行连接</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-37E1BB1C-FFBB-494B-B3B5-5147BD51F0BF__GUID-7044D023-C459-48E3-8EF3-AEF6B720C687">
                        <p class="notep1">注意：</p>
                        <p>直接连接到PDB时，某些操作不可用。有关这些操作的列表，请参见“ <a href="../bradv/starting-interacting-with-rman-client.html#BRADV673" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南”</cite></span></a> 。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-37E1BB1C-FFBB-494B-B3B5-5147BD51F0BF__GUID-2896EAD5-1495-4E0E-8808-F0E578615D92">
                     <p class="notep1">也可以看看：</p>
                     <p>“ <span class="italic">Oracle数据库备份和恢复用户指南</span> ”中的以下部分提供了有关备份和恢复PDB的详细信息：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="../bradv/starting-interacting-with-rman-client.html#BRADV674" target="_blank">作为目标连接到根</a></p>
                        </li>
                        <li>
                           <p><a href="../bradv/starting-interacting-with-rman-client.html#BRADV678" target="_blank">作为目标连接到PDB</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="backing-up-and-recovering-cdbs-and-pdbs.html#GUID-371BD31F-DC28-47D6-859C-E5AA110CE364" title="您可以备份和恢复多租户容器数据库（CDB）和可插拔数据库（PDB）。">备份和恢复CDB和PDB</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-B77E0204-3701-4EFD-99B0-EE199AF73BDA" name="GUID-B77E0204-3701-4EFD-99B0-EE199AF73BDA"></a><h3 id="MULTI-GUID-B77E0204-3701-4EFD-99B0-EE199AF73BDA" class="sect3"><span class="enumeration_section">20.2</span> CDB的备份和完全恢复</h3>
               <div>
                  <p>要在整个多租户容器数据库（CDB）上执行备份和完整恢复操作，请将<code class="codeph">TARGET</code>连接到根目录。
                  </p>
                  <p>必须将该连接建立为具有<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>权限的公共用户。
                  </p>
                  <p>连接到根之后，用于在非CDB上执行操作的相同命令用于在整个CDB上执行备份和完全恢复。</p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-B77E0204-3701-4EFD-99B0-EE199AF73BDA__GUID-0E8DB322-6D1C-45E8-BB77-C97FF2F6462D">
                     <p class="notep1">也可以看看：</p>
                     <p>“ <span class="italic">Oracle数据库备份和恢复用户指南</span> ”中的以下部分提供了有关执行CDB备份和完全恢复的详细信息：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="../bradv/backing-up-database.html#BRADV731" target="_blank">备份整个CDB</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="../bradv/rman-complete-database-recovery.html#BRADV746" target="_blank">执行整个CDB的完全恢复</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="../bradv/validating-database-files-backups.html#BRADV744" target="_blank">验证整个CDB</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="../bradv/reporting-rman-operations.html#BRADV740" target="_blank">在国家开发银行报道</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="backing-up-and-recovering-cdbs-and-pdbs.html#GUID-371BD31F-DC28-47D6-859C-E5AA110CE364" title="您可以备份和恢复多租户容器数据库（CDB）和可插拔数据库（PDB）。">备份和恢复CDB和PDB</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9" name="GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9"></a><h3 id="MULTI-GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9" class="sect3"><span class="enumeration_section">20.3</span> PDB的备份和完全恢复</h3>
               <div>
                  <p>您可以在单个可插拔数据库（PDB）或多个PDB上执行备份和完整恢复操作。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9__GUID-03E9FC40-D724-42A2-979B-E384614B3194">PDB的备份</p>
                     <p>重新定位PDB或将非CDB克隆为PDB时，您可能希望保留使用预制备份备份。要使预涂层备份在目标CDB中可用，必须将有关预涂层备份的元数据导出到目标CDB的RMAN存储库。</p>
                     <p>使备份可用的技术取决于操作类型：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>通过克隆非CDB来创建PDB</p>
                           <p>在读/写模式下打开非CDB时，必须执行<code class="codeph">DBMS_PDB.EXPORTRMANBACKUP</code>过程作为克隆前的最后一步。当将非CDB作为PDB插入到目的地CDB时，该操作将源非CDB的备份元数据复制到目的地CDB的数据字典中。</p>
                        </li>
                        <li>
                           <p>将PDB重新定位到另一个CDB</p>
                           <p>拔下源PDB时，会自动导出备份元数据。因此，您不需要执行<code class="codeph">DBMS_PDB.EXPORTRMANBACKUP</code> 。</p>
                        </li>
                     </ul>
                     <p>预打印备份仅可用于插入源非CDB或PDB的目标CDB。</p>
                     <div class="infoboxnote" id="GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9__GUID-14EC2F20-25FD-46E5-B660-08E142EA5DDA">
                        <p class="notep1">注意：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../bradv/rman-backup-concepts.html#GUID-7D69CBCA-123F-49FF-85E9-F5C70E47202D" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南</cite></span></a> ，了解预备份备份</p>
                           </li>
                           <li>
                              <p><a href="../bradv/backing-up-database.html#GUID-7F9F8913-2838-4066-A000-048B35A70EA4" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南</cite></span></a> ，了解如何创建整个数据库的预刷新备份</p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_PDB.html#ARPLS-GUID-69EE6FF6-225F-4CC5-BBA5-3AFD01E4131F" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解有关<code class="codeph">DBMS_PDB.EXPORTRMANBACKUP</code>过程的更多信息</p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9__GUID-113341CA-36C3-4A19-9D48-28311F5199F5">备份命令的语法</p>
                     <p>虽然Oracle Recovery Manager（RMAN）命令相同，但用于对多个PDB执行操作的语法包含一些修改。</p>
                     <p>要在单个PDB上执行备份和完整恢复操作，您可以将<code class="codeph">TARGET</code>连接到以下任一容器：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>PDB</p>
                           <p>在这种情况下，请使用与备份或恢复非CDB相同的命令。例如，要备份PDB，请使用<code class="codeph">BACKUP DATABASE</code>命令。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">CDB $ ROOT</code></p>
                           <p>在这种情况下，请在RMAN命令中使用<code class="codeph">PLUGGABLE DATABASE</code>子句。以下命令在连接到根时备份PDB <code class="codeph">hrpdb</code> ：</p><pre class="pre codeblock"><code>BACKUP PLUGGABLE DATABASE hrpdb;</code></pre><p>要使用单个命令在多个PDB上执行备份和完成恢复操作，必须连接到根。使用<code class="codeph">PLUGGABLE DATABASE</code>子句后跟要执行操作的PDB列表。以下示例在连接到根时备份PDB <code class="codeph">hrpdb</code> ， <code class="codeph">salespdb</code>和<code class="codeph">invpdb</code> ：</p><pre class="pre codeblock"><code>BACKUP PLUGGABLE DATABASE hrpdb，salespdb，invpdb;</code></pre></li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9__GUID-4E01344D-6B49-4FBF-8395-9605412A055C">
                     <p class="notep1">也可以看看：</p>
                     <p>“ <span><cite>Oracle数据库备份和恢复用户指南</cite></span> ”中的以下部分提供了有关备份和恢复PDB的详细信息：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="../bradv/starting-interacting-with-rman-client.html#BRADV678" target="_blank">作为目标连接到PDB</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="../bradv/starting-interacting-with-rman-client.html#BRADV674" target="_blank">将目标连接到根目录</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="../bradv/backing-up-database.html#BRADV735" target="_blank">使用RMAN备份PDB</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="../bradv/rman-complete-database-recovery.html#BRADV749" target="_blank">使用RMAN执行PDB的完全恢复</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="../bradv/validating-database-files-backups.html#BRADV745" target="_blank">验证PDB</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="../bradv/reporting-rman-operations.html#BRADV741" target="_blank">在PDB中报告</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="backing-up-and-recovering-cdbs-and-pdbs.html#GUID-371BD31F-DC28-47D6-859C-E5AA110CE364" title="您可以备份和恢复多租户容器数据库（CDB）和可插拔数据库（PDB）。">备份和恢复CDB和PDB</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371" name="GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371"></a><h3 id="MULTI-GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371" class="sect3"><span class="enumeration_section">20.4</span>多租户环境中的时间点恢复</h3>
               <div>
                  <p>您可以执行整个多租户容器数据库（CDB）或特定可插拔数据库（PDB）的时间点恢复。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371__GUID-93074757-54F6-4470-BCE4-43CE56EF9567">CDB的时间点恢复</p>
                     <p>要执行CDB的时间点恢复，您必须满足以下先决条件：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>您必须以具有<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>权限的普通用户身份登录到根容器。
                           </p>
                        </li>
                        <li>
                           <p>必须安装CDB。</p>
                        </li>
                     </ul>
                     <p>执行恢复操作时，请使用与非CDB相同的命令。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371__GUID-7D545C99-9B2F-4430-8EA6-5C793E9E1B3C">PDB的时间点恢复</p>
                     <p>当PDB在打开或关闭的CDB中关闭时，您可以将PDB恢复到过去的时间点。该技术取决于CDB的撤消模式。下表描述了这些差异。</p>
                     <div class="tblformal" id="GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371__GUID-A94D6BE0-70C8-48A5-A26B-71339F50A4D6">
                        <p class="titleintable">表20-1时间点恢复技术的差异</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="时间点恢复技术的差异" border="1" summary="This table describes the differences between point-in-time recovery techniques depending on the undo mode of the PDB." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="20%" id="d100149e773">撤消模式</th>
                                 <th align="left" valign="bottom" width="20%" id="d100149e775">使用辅助实例？</th>
                                 <th align="left" valign="bottom" width="20%" id="d100149e777">以目标身份连接到......</th>
                                 <th align="left" valign="bottom" width="20%" id="d100149e779">用于恢复的RMAN命令</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d100149e783" headers="d100149e773 ">
                                    <p>共享</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d100149e783 d100149e775 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d100149e783 d100149e777 ">
                                    <p>CDB根</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d100149e783 d100149e779 ">
                                    <p>包括<code class="codeph">PLUGGABLE DATABASE</code>子句以指定必须恢复的PDB。
                                    </p>
                                    <p>RMAN使用辅助目标来存储恢复期间创建的临时文件。如果已配置快速恢复区域，则将其用作辅助目标。您可以使用<code class="codeph">RECOVER</code>命令中的<code class="codeph">AUXILIARY DESTINATION</code>子句显式指定辅助目标。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d100149e807" headers="d100149e773 ">
                                    <p>本地</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d100149e807 d100149e775 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d100149e807 d100149e777 ">
                                    <p>CDB根或PDB</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d100149e807 d100149e779 ">
                                    <p>连接到PDB时，请使用与非CDB相同的命令。连接到根时，请包含<code class="codeph">PLUGGABLE DATABASE</code>子句以指定必须恢复的PDB。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371__GUID-09656493-45FB-4E01-A254-BF570244313A">
                     <p class="notep1">也可以看看：</p>
                     <p>有关时间点<span class="italic">恢复的</span>详细信息，请参见“ <span class="italic">Oracle数据库备份和恢复用户指南</span> ”中的以下部分。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="../bradv/using-flasback-database-restore-points.html#BRADV-GUID-1150031F-3C15-40C8-BA91-A387F75DC49A" target="_blank">多租户环境中的还原点概述</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="../bradv/using-flasback-database-restore-points.html#BRADV-GUID-952278F2-DBBA-4CB9-AAC4-616B56837AAB" target="_blank">创建CDB还原点</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="../bradv/using-flasback-database-restore-points.html#BRADV-GUID-9363C4B9-48E5-470F-B13B-43FA56667978" target="_blank">创建PDB还原点</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="../bradv/rman-performing-flashback-dbpitr.html#BRADV-GUID-031D9695-A9D2-4381-A840-39BD3CC19946" target="_blank">执行CDB和PDB的时间点恢复</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="backing-up-and-recovering-cdbs-and-pdbs.html#GUID-371BD31F-DC28-47D6-859C-E5AA110CE364" title="您可以备份和恢复多租户容器数据库（CDB）和可插拔数据库（PDB）。">备份和恢复CDB和PDB</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5" name="GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5"></a><h3 id="MULTI-GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5" class="sect3"><span class="enumeration_section">20.5</span>多租户环境中的闪回数据库</h3>
               <div>
                  <p>您可以对整个多租户容器数据库（CDB）或特定可插入（PDB）执行闪回数据库操作。</p>
                  <p>RMAN使用辅助目标来存储在时间点恢复期间创建的临时文件。默认情况下，快速恢复区域用作辅助目标。您可以使用<code class="codeph">RECOVER</code>命令中的<code class="codeph">AUXILIARY DESTINATION</code>子句显式指定辅助目标。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5__GUID-CDF83CA0-4688-4CAC-8087-85EE0A77BF47">CDB的闪回</p>
                     <p>要为CDB执行闪回数据库，您必须满足以下先决条件：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>您必须以具有<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>权限的公共用户身份连接到根。
                           </p>
                        </li>
                        <li>
                           <p>必须安装CDB。</p>
                        </li>
                     </ul>
                     <p>使用CDB还原点，时间表达式或SCN指定闪回操作的目标时间点。 CDB中的每个PDB都可以访问CDB还原点。但是，还原点不反映其任何PDB的PDB子化身。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5__GUID-3548F0AE-1B06-4A22-B71F-7AD2FD0D0132">PDB的闪回</p>
                     <p>当PDB关闭且CDB打开时，您可以使用<code class="codeph">FLASHBACK DATABASE</code>命令为此PDB执行闪回数据库操作。在特定PDB上执行闪回数据库操作仅修改与该PDB相关的数据文件。 CDB中的其他PDB不受影响，可供使用。请注意，PDB还原点只能由定义它的PDB访问，并且只能用于此PDB上的操作。</p>
                     <div class="tblformal" id="GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5__DIFFERENCESINPOINT-IN-TIMERECOVERYT-3410F520">
                        <p class="titleintable">表20-2闪回技术的差异</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="闪回技术的差异" border="1" summary="This table describes the differences between point-in-time recovery techniques depending on the undo mode of the PDB." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="20%" id="d100149e992">CDB撤消模式</th>
                                 <th align="left" valign="bottom" width="20%" id="d100149e994">使用辅助实例？</th>
                                 <th align="left" valign="bottom" width="20%" id="d100149e996">以目标身份连接到......</th>
                                 <th align="left" valign="bottom" width="20%" id="d100149e998">命令</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d100149e1002" headers="d100149e992 ">
                                    <p>共享</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d100149e1002 d100149e994 ">
                                    <p>是</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d100149e1002 d100149e996 ">
                                    <p>CDB根</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d100149e1002 d100149e998 ">
                                    <p>使用<code class="codeph">FLASHBACK PLUGGABLE DATABASE</code>命令。您只能闪回到干净的PDB还原点。
                                    </p>
                                    <p>RMAN使用辅助目标来存储在闪回期间创建的临时文件。如果已配置快速恢复区域，则将其用作辅助目标。您可以使用<code class="codeph">FLASHBACK PLUGGABLE DATABASE</code>命令中的<code class="codeph">AUXILIARY DESTINATION</code>子句显式指定辅助目标。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d100149e1026" headers="d100149e992 ">
                                    <p>本地</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d100149e1026 d100149e994 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d100149e1026 d100149e996 ">
                                    <p>CDB根或PDB</p>
                                 </td>
                                 <td align="left" valign="top" width="20%" headers="d100149e1026 d100149e998 ">
                                    <p>使用<code class="codeph">FLASHBACK PLUGGABLE DATABASE</code>命令。您可以使用CDB还原点，PDB还原点，时间表达式或目标SCN指定闪回操作的目标时间点。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5__GUID-09656493-45FB-4E01-A254-BF570244313A">
                     <p class="notep1">也可以看看：</p>
                     <p>有关CDB和PDB闪回的更多信息，请参阅“ <span><cite>Oracle数据库备份和恢复用户指南</cite></span> ”中的以下部分：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="../bradv/using-flasback-database-restore-points.html#BRADV-GUID-1150031F-3C15-40C8-BA91-A387F75DC49A" target="_blank">多租户环境中的还原点概述</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="../bradv/using-flasback-database-restore-points.html#BRADV-GUID-952278F2-DBBA-4CB9-AAC4-616B56837AAB" target="_blank">创建CDB还原点</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="../bradv/using-flasback-database-restore-points.html#BRADV-GUID-9363C4B9-48E5-470F-B13B-43FA56667978" target="_blank">创建PDB还原点</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="../bradv/rman-performing-flashback-dbpitr.html#BRADV-GUID-8466CA3C-652A-4AAB-88EB-8815575D6266" target="_blank">为整个CDB执行闪回数据库操作</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="../bradv/rman-performing-flashback-dbpitr.html#BRADV-GUID-C1215E86-9A7B-4EC9-9777-2A18BD627394" target="_blank">为PDB执行闪回数据库操作</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="backing-up-and-recovering-cdbs-and-pdbs.html#GUID-371BD31F-DC28-47D6-859C-E5AA110CE364" title="您可以备份和恢复多租户容器数据库（CDB）和可插拔数据库（PDB）。">备份和恢复CDB和PDB</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
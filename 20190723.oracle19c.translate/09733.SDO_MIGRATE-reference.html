<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The MDSYS.SDO_MIGRATE package contains a single subprogram, SDO_MIGRATE.TO_CURRENT."></meta>
      <meta name="description" content="The MDSYS.SDO_MIGRATE package contains a single subprogram, SDO_MIGRATE.TO_CURRENT."></meta>
      <title>SDO_MIGRATE包（升级）</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Developer&#39;s Guide "></meta>
      <meta property="og:description" content="The MDSYS.SDO_MIGRATE package contains a single subprogram, SDO_MIGRATE.TO_CURRENT."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="spatial-and-graph-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-10T14:11:51-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E94799-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="SDO_LRS-reference.html" title="Previous" type="text/html"></link>
      <link rel="next" href="SDO_OLS-reference.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Spatial and Graph Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="SPATL"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="SDO_LRS-reference.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="SDO_OLS-reference.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="spatial-reference-information.html" property="item" typeof="WebPage"><span property="name">参考信息</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">SDO_MIGRATE包（升级）</li>
            </ol>
            <a id="GUID-60525DFE-EE7A-4302-BFC9-5F9CDBF9728E" name="GUID-60525DFE-EE7A-4302-BFC9-5F9CDBF9728E"></a><a id="SPATL160"></a>
            
            <h2 id="SPATL-GUID-60525DFE-EE7A-4302-BFC9-5F9CDBF9728E" class="sect2"><span class="enumeration_chapter">28</span> SDO_MIGRATE包（升级）</h2>
         </header>
         <div class="ind">
            <div>
               <p>MDSYS.SDO_MIGRATE包中包含一个子程序SDO_MIGRATE.TO_CURRENT。</p>
               <p>本章中描述的<a href="SDO_MIGRATE-reference.html#GUID-83196024-5E64-4DA7-A588-0A31717FF150">SDO_MIGRATE.TO_CURRENT</a>子程序具有过程和功能接口。作为一个过程，它允许您从以前版本的Spatial和Graph升级空间几何表;作为一个函数，它允许您升级单个SDO_GEOMETRY对象。
               </p>
               <p>该子程序的用途非常有限，如其文档的使用说明中所述。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="SDO_MIGRATE-reference.html#GUID-83196024-5E64-4DA7-A588-0A31717FF150">SDO_MIGRATE.TO_CURRENT</a><br></li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="spatial-reference-information.html#GUID-343C3A98-6564-49CF-AA31-F86C5AEAAF02">参考信息</a></p>
                  </div>
               </div>
            </div>
            <a id="SPATL1185"></a><div class="props_rev_3"><a id="GUID-83196024-5E64-4DA7-A588-0A31717FF150" name="GUID-83196024-5E64-4DA7-A588-0A31717FF150"></a><h3 id="SPATL-GUID-83196024-5E64-4DA7-A588-0A31717FF150" class="sect3"><span class="enumeration_section">28.1</span> SDO_MIGRATE.TO_CURRENT</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-DCEF84C6-0EA6-48B6-8AFF-3B41C97C7F63">格式（任何对象关系模型实现到当前）</p><pre class="oac_no_warn" dir="ltr">SDO_MIGRATE.TO_CURRENT（tabname IN VARCHAR2 [，column_name IN VARCHAR2]）;</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">SDO_MIGRATE.TO_CURRENT（tabname IN VARCHAR2，column_name IN VARCHAR2 [，commit_int IN NUMBER]）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-4E96FE7F-BCE2-492A-BBB5-C389B4D40255">格式（单个对象 - 关系模型几何到当前）</p><pre class="oac_no_warn" dir="ltr">SDO_MIGRATE.TO_CURRENT（geom IN SDO_GEOMETRY，dim in SDO_DIM_ARRAY）RETURN SDO_GEOMETRY;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-DF1398C2-9A06-4FBD-9AE3-90F9E969C7F9">格式（任何关系模型实现到当前）</p><pre class="oac_no_warn" dir="ltr">SDO_MIGRATE.TO_CURRENT（层IN VARCHAR2，newtabname IN VARCHAR2，gidcolumn IN VARCHAR2，geocolname IN VARCHAR2，layer_gtype IN VARCHAR2，updateflag IN VARCHAR2）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-7EEBC026-60DB-4078-8B77-DF5F6A8A6342">描述</p>
                     <p>将数据从过时的空间关系模型（版本8.1.5或更早版本）升级到当前版本，或升级一个或多个需要升级的对象关系模型（版本8.1.6或更高版本）几何（如用法中所述）笔记）。作为一个过程，TO_CURRENT升级整个图层（列中的所有几何图形）;作为一个函数，TO_CURRENT升级单个几何对象，该对象必须是SDO_GEOMETRY类型。</p>
                     <p>对于升级图层，过程格式取决于您是从Spatial关系模型（版本8.1.5或更早版本）升级还是升级对象关系模型（版本8.1.6或更高版本）。有关适用于您的型号，请参阅使用说明。</p>
                     <div class="infoboxnote" id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-0A0F9BA6-56FD-4A75-8F86-FC901C50F669">
                        <p class="notep1">注意：</p>
                        <p>此过程仅适用于二维几何。三维几何不支持它。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-EF76BA26-9AB0-4A39-8EC6-23342C18541C">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-CAF585B7-C5FD-4BDD-9713-00917D0418F6"><!-- --></a> tabname</dt>
                        <dd>
                           <p>表与几何对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-216EC902-E80B-49C0-8356-EF960B121BA0"><!-- --></a> column_name</dt>
                        <dd>
                           <p>包含几何对象的<code class="codeph">tabname</code>中的列。如果未指定<code class="codeph">column_name</code>或将其指定为null，则会升级包含几何对象的列。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-190B18B7-F36C-4319-814D-FADDD6071883"><!-- --></a> commit_int</dt>
                        <dd>
                           <p>在Spatial和Graph执行内部提交操作之前要升级的几何数。如果未指定<code class="codeph">commit_int</code> ，则在升级期间不会执行内部提交操作。
                           </p>
                           <p>如果指定<code class="codeph">commit_int</code>值，则可以使用比原本需要的更小的回滚段。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-CEFC02FA-9751-4528-9648-B63E5F9F68CA"><!-- --></a> geom</dt>
                        <dd>
                           <p>要升级到当前版本的单个几何对象。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-D2E352FB-1010-4C88-8B55-7014F3B04302"><!-- --></a>昏暗</dt>
                        <dd>
                           <p>要升级的几何对象的维度信息数组。DIMINFO中解释了<a href="spatial-datatypes-metadata.html#GUID-483D9FB7-AEC1-433C-A2AF-D0FE3018CDCF">SDO_DIM_ARRAY</a>类型。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-FA890DDC-950B-4C1A-833C-60617A47D78F"><!-- --></a>图层</dt>
                        <dd>
                           <p>要升级的图层的名称。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-1888F4DC-DCC1-4C3F-8E92-6BE74DFF01D9"><!-- --></a> newtabname</dt>
                        <dd>
                           <p>要升级数据的新表的名称。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-E947F36C-AB67-4630-AAA0-F4A4DD686ADB"><!-- --></a> gidcolumn</dt>
                        <dd>
                           <p>从旧表中存储GID的列的名称。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-28D8B4BC-B05A-4B79-A8CF-87B68FD98CAF"><!-- --></a> geocolname</dt>
                        <dd>
                           <p>新表中将插入几何对象的列的名称。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-B01D883F-8659-4F31-B033-26C2B8C2C6FD"><!-- --></a> layer_gtype</dt>
                        <dd>
                           <p>以下值之一：POINT或NOTPOINT（默认值）。</p>
                           <p>如果要升级的图层仅由点数据组成，请将此参数设置为POINT以获得最佳性能;否则，将此参数设置为NOTPOINT。如果将值设置为POINT并且图层包含任何非点几何，则升级可能会生成无效数据。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-C8FD32CE-D2AF-41F7-872F-9AEE9603D8F9"><!-- --></a> updateflag</dt>
                        <dd>
                           <p>以下值之一：UPDATE或INSERT（默认值）。</p>
                           <p>如果要将图层升级到现有的填充属性表，请将此参数设置为UPDATE;否则，将此参数设置为INSERT。</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-0CF66017-A08A-4AE8-BE9B-E2312D53A1E9">对象关系模型层和单几何升级的使用说明</p>
                     <p>Oracle Spatial和Graph的正常升级不需要此子程序。如果使用第三方加载器加载空间数据并且结果几何具有错误的方向或无效的ETYPE或GTYPE值，则有时需要它。有关将此子程序用作加载和验证空间数据的建议过程的一部分的信息，请参阅<a href="loading-spatial-data.html#GUID-A8231A53-C5AA-448E-B458-FE7F3BE98DA6" title="在对数据执行任何空间操作之前，应验证所有几何数据并修复任何验证错误。">加载和验证空间数据的建议</a> 。
                     </p>
                     <p>此子程序升级指定图层中的指定几何图形或所有几何图形对象，以使其SDO_GTYPE和SDO_ETYPE值采用当前版本的格式：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>的4位数字值SDO_GTYPE创建，使用所示的格式<span class="italic">（DLTT）</span> <a href="spatial-datatypes-metadata.html#GUID-4D84CE67-67E4-4A84-8255-C586E765A94B">SDO_GTYPE</a> 。</p>
                        </li>
                        <li>
                           <p>SDO_ETYPE值如<a href="spatial-datatypes-metadata.html#GUID-270AE39D-7B83-46D0-9DD6-E5D99C045021">SDO_ELEM_INFO中所述</a> 。</p>
                        </li>
                     </ul>
                     <p>订购几何形状，使外圈跟随其内圈，坐标以正确的旋转方式保存（外圈为逆时针方向，内圈为顺时针方向）。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-C71C33CD-FD7C-40AE-995A-D272033B2B71">关系模型升级的使用说明</p>
                     <p>如果要从Spatial关系模型（版本8.1.5或更早版本）升级，请在使用此过程时考虑以下事项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>必须在调用此过程之前创建新表。</p>
                        </li>
                        <li>
                           <p>如果要升级的数据是大地测量，则公差值（ <span class="italic">&lt;layername&gt;</span> _SDODIM表或视图中的SDO_TOLERANCE列值）必须以十进制度表示（例如，0.00000005）。
                           </p>
                        </li>
                        <li>
                           <p>该过程将几何从关系模型转换为对象关系模型。</p>
                        </li>
                        <li>
                           <p>通过此过程执行提交操作。</p>
                        </li>
                        <li>
                           <p>如果任何升级步骤失败，则不会升级该层的任何内容。</p>
                        </li>
                        <li>
                           <p><code class="codeph">layer</code>是底层图层名称，没有_SDOGEOM后缀。
                           </p>
                        </li>
                        <li>
                           <p>旧的SDO_GID存储在<code class="codeph">gidcolumn</code> 。
                           </p>
                        </li>
                        <li>
                           <p>的4位数字值SDO_GTYPE创建，使用所示的格式<span class="italic">（DLTT）</span> <a href="spatial-datatypes-metadata.html#GUID-4D84CE67-67E4-4A84-8255-C586E765A94B">SDO_GTYPE</a> 。</p>
                        </li>
                        <li>
                           <p>使用<a href="spatial-datatypes-metadata.html#GUID-270AE39D-7B83-46D0-9DD6-E5D99C045021">SDO_ELEM_INFO中</a>讨论的值创建SDO_ETYPE值。</p>
                        </li>
                        <li>
                           <p>该程序命令几何形状，使外圈跟随其内圈，并在正确的旋转中保存坐标（外圈为逆时针方向，内圈为顺时针方向）。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-83196024-5E64-4DA7-A588-0A31717FF150__GUID-94F7DB76-1516-4B37-9EC6-32364EFDC634">例子</p>
                     <p>以下示例将ROADS表中几何对象的定义从8.1.5之后的版本更改为当前版本的格式。</p><pre class="oac_no_warn" dir="ltr">EXECUTE SDO_MIGRATE.TO_CURRENT（'ROADS'）;</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="SDO_MIGRATE-reference.html#GUID-60525DFE-EE7A-4302-BFC9-5F9CDBF9728E" title="MDSYS.SDO_MIGRATE包中包含一个子程序SDO_MIGRATE.TO_CURRENT。">SDO_MIGRATE包（升级）</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter introduces you to Oracle Database backup and recovery with Oracle Recovery Manager (RMAN). After reading this chapter, you should be familiar with the basic concepts of Oracle Database backup and recovery operations, know how to implement a disk-based backup strategy, and perform simple repairs to database files."></meta>
      <meta name="description" content="This chapter introduces you to Oracle Database backup and recovery with Oracle Recovery Manager (RMAN). After reading this chapter, you should be familiar with the basic concepts of Oracle Database backup and recovery operations, know how to implement a disk-based backup strategy, and perform simple repairs to database files."></meta>
      <title>执行备份和恢复</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="2 Day DBA"></meta>
      <meta property="og:description" content="This chapter introduces you to Oracle Database backup and recovery with Oracle Recovery Manager (RMAN). After reading this chapter, you should be familiar with the basic concepts of Oracle Database backup and recovery operations, know how to implement a disk-based backup strategy, and perform simple repairs to database files."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="2 Day DBA"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="2-day-dba.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-23T23:13:13-07:00"></meta>
      <meta name="dcterms.title" content="2 Day DBA"></meta>
      <meta name="dcterms.dateCopyrighted" content="2004, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96197-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="managing-schema-objects.html" title="Previous" type="text/html"></link>
      <link rel="next" href="monitoring-and-tuning-the-database.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADMQS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-schema-objects.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="monitoring-and-tuning-the-database.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">2天DBA</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">执行备份和恢复</li>
            </ol>
            <a id="GUID-C6EEB732-9548-4814-8558-8B903DD74759" name="GUID-C6EEB732-9548-4814-8558-8B903DD74759"></a><a id="ADMQS009"></a>
            
            <h2 id="ADMQS-GUID-C6EEB732-9548-4814-8558-8B903DD74759" class="sect2"><span class="enumeration_chapter">9</span>执行备份和恢复</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章将向您介绍使用Oracle Recovery Manager（RMAN）进行Oracle数据库备份和恢复。阅读本章后，您应熟悉Oracle数据库备份和恢复操作的基本概念，了解如何实施基于磁盘的备份策略，以及对数据库文件执行简单修复。</p>
               <p>本章包含以下部分：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="performing-backup-and-recovery.html#GUID-ECAB3350-3127-421C-AB43-2DFAA2327FAF" title="Oracle数据库备份和恢复的重点是数据库文件的物理备份，这允许您重建数据库。">数据库备份和恢复概述</a></p>
                  </li>
                  <li>
                     <p><a href="performing-backup-and-recovery.html#GUID-63D2C33B-49F3-4364-AC01-08C9440A93FC" title="备份数据库意味着复制数据文件，控制文件和归档重做日志文件（如果数据库在ARCHIVELOG模式下运行）。还原数据库意味着将组成数据库的物理文件从备份介质（通常是磁盘或磁带）复制到其原始位置或新位置。">数据库备份和恢复概念</a></p>
                  </li>
                  <li>
                     <p><a href="performing-backup-and-recovery.html#GUID-292CD2F6-ECDC-4F94-B750-97DD2D526B22" title="本节介绍如何设置数据库以利用Oracle建议的备份策略。">配置数据库以进行基本备份和恢复</a></p>
                  </li>
                  <li>
                     <p><a href="performing-backup-and-recovery.html#GUID-1756BA1F-677B-4E81-BA79-06BBE3E3A692" title="本节介绍如何使用Oracle Recovery Manager（RMAN）备份数据库。Oracle建议的仅磁盘备份策略可以提供有效的数据库日常备份。">备份数据库</a></p>
                  </li>
                  <li>
                     <p><a href="performing-backup-and-recovery.html#GUID-C7CEE4AC-AFC9-4FE7-903E-4AB05DB923E3" title="备份报告包含有关Oracle Recovery Manager（RMAN）运行的过去备份作业的摘要和详细信息。">显示备份报告</a></p>
                  </li>
                  <li>
                     <p><a href="performing-backup-and-recovery.html#GUID-83CED39F-DC23-4539-9668-32C89676904E" title="作为备份策略的一部分，您必须管理数据库备份。">管理备份</a></p>
                  </li>
                  <li>
                     <p><a href="performing-backup-and-recovery.html#GUID-E04D3223-BEB0-4212-97E1-BA2A236C3523" title="Oracle建议的恢复功能使用Data Recovery Advisor，这是一种Oracle数据库功能，可自动诊断数据故障，确定并提供适当的修复选项，并在用户请求时执行修复。">执行Oracle Advised Recovery</a></p>
                  </li>
                  <li>
                     <p><a href="performing-backup-and-recovery.html#GUID-2DEB3182-10FA-488C-A01D-550CA49CDBD6" title="用户定向恢复使您可以使用闪回功能并执行还原操作和恢复过程。">执行用户指导的恢复</a></p>
                  </li>
                  <li>
                     <p><a href="performing-backup-and-recovery.html#GUID-37FEAC3A-99F6-441F-93EE-55C4D69728F3" title="Oracle示例（OBE）有一系列关于Oracle Database 2 Day DBA指南的系列文章。本OBE将引导您完成本节中的任务，并包含带注释的屏幕截图。">执行备份和恢复：Oracle示例系列</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-C6EEB732-9548-4814-8558-8B903DD74759__GUID-72416527-40C2-4B27-861F-97151DCF5A01">
                  <p class="notep1">也可以看看：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="../bradv/introduction-backup-recovery.html#BRADV8001" target="_blank"><span class="italic">“Oracle数据库备份和恢复用户指南”</span></a> ，了解有关使用RMAN执行高级备份和恢复操作的信息</p>
                     </li>
                     <li>
                        <p><a href="../rcmrf/about-rman-commands.html#RCMRF001" target="_blank"><span class="italic">Oracle数据库备份和恢复参考</span></a> ，了解RMAN命令的语法和语义</p>
                     </li>
                  </ul>
               </div>
            </div><a id="ADMQS091"></a><div class="props_rev_3"><a id="GUID-ECAB3350-3127-421C-AB43-2DFAA2327FAF" name="GUID-ECAB3350-3127-421C-AB43-2DFAA2327FAF"></a><h3 id="ADMQS-GUID-ECAB3350-3127-421C-AB43-2DFAA2327FAF" class="sect3"><span class="enumeration_section">9.1</span>数据库备份和恢复概述</h3>
               <div>
                  <p>Oracle数据库备份和恢复的重点是数据库文件的物理备份，这允许您重建数据库。</p>
                  <p>Oracle Recovery Manager（RMAN）是一种命令行工具，是Oracle首选有效备份和恢复Oracle数据库的方法。受RMAN内置的备份和恢复工具保护的文件包括数据文件，控制文件，服务器参数文件和归档重做日志文件。使用这些文件，您可以重建数据库。RMAN旨在与服务器密切配合，在备份和还原期间提供块级损坏检测。RMAN通过文件多路复用和备份集压缩优化备份期间的性能和空间消耗，并与领先的磁带和存储介质产品集成。备份机制在物理级别工作以防止文件损坏，例如意外删除数据文件或磁盘驱动器故障。RMAN还可用于执行时间点恢复，以便在无法使用其他技术（如闪回）时从逻辑故障中恢复。</p>
                  <p>逻辑备份（例如导出表或表空间等数据库对象）是物理备份的有用补充，但无法保护整个数据库。有效的备份策略必须基于物理备份。</p>
                  <p><a id="d37040e163" class="indexterm-anchor"></a> Oracle数据库闪回功能提供了一系列物理和逻辑数据恢复工具，可作为物理和逻辑备份的高效，易用的替代方案。闪回功能使您可以反转不需要的数据库更改的影响，而无需从备份中恢复数据文件。
                  </p>
                  <p>本节提供了<a href="../bradv/rman-performing-flashback-dbpitr.html#BRADV80055" target="_blank"><span><cite>Oracle Database Backup and Recovery用户指南</cite></span></a>中记录的以下闪回功能的链接：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="../bradv/rman-performing-flashback-dbpitr.html#BRADV81517" target="_blank">Oracle闪回表</a> ，使您可以在最近的某个时间将表还原为其内容</p>
                     </li>
                     <li>
                        <p><a href="../bradv/rman-performing-flashback-dbpitr.html#BRADV81511" target="_blank">Oracle Flashback Drop</a> ，使您可以检索已删除（删除）的数据库表</p>
                     </li>
                     <li>
                        <p><a href="../bradv/rman-performing-flashback-dbpitr.html#BRADV81330" target="_blank">Oracle闪回数据库</a> ，使您可以将整个数据库还原到过去的某个时间点</p>
                     </li>
                  </ul>
                  <p>前两个功能在逻辑级别运行，而最后一个功能在物理级别运行。上述功能都不需要提前准备，例如创建逻辑导出以允许检索丢失的数据，但Oracle闪回数据库需要预先准备启用该功能。您可以在数据库可用时使用所有功能。<a href="../bradv/rman-performing-flashback-dbpitr.html#BRADV80055" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”更</cite></span></a>详细地讨论了Oracle数据库的闪回功能。
                  </p>
                  <div class="infoboxnote" id="GUID-ECAB3350-3127-421C-AB43-2DFAA2327FAF__GUID-99AA82AF-75BC-42DA-A0D6-E8961A92AA85">
                     <p class="notep1">注意：</p>
                     <p><a id="d37040e205" class="indexterm-anchor"></a> Oracle闪回数据库无法恢复丢失的数据文件。
                     </p>
                  </div>
               </div><a id="ADMQS12547"></a><div class="props_rev_3"><a id="GUID-37E1BB1C-FFBB-494B-B3B5-5147BD51F0BF" name="GUID-37E1BB1C-FFBB-494B-B3B5-5147BD51F0BF"></a><h4 id="ADMQS-GUID-37E1BB1C-FFBB-494B-B3B5-5147BD51F0BF" class="sect4"><span class="enumeration_section">9.1.1</span>备份和恢复CDB和PDB概述</h4>
                  <div>
                     <p>使用多租户架构时，您可以在整个多租户容器数据库（CDB），根或一个或多个可插拔数据库（PDB）上执行备份和恢复操作。</p>
                     <p>用于备份和恢复CDB和PDB的Oracle Recovery Manager（RMAN）命令与用于非CDB的命令相同，语法略有不同。在非CDB上执行的备份和恢复操作也可以在CDB和PDB上执行。这包括以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>完整备份和增量备份</p>
                        </li>
                        <li>
                           <p>完整和时间点恢复（PITR）</p>
                        </li>
                        <li>
                           <p>闪回数据库</p>
                        </li>
                        <li>
                           <p>报告操作（例如列出备份和交叉检查备份）</p>
                        </li>
                     </ul>
                     <div class="section">
                        <p class="subhead3" id="GUID-37E1BB1C-FFBB-494B-B3B5-5147BD51F0BF__GUID-23311206-0FD1-45CF-ABE6-FF21443891C1">关于连接到CDB和PDB</p>
                        <p>您可以通过以下方式之一连接到根目录<span class="italic">：</span></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用操作系统身份验证连接</p>
                              <p>您作为具有<code class="codeph">SYSDBA</code>权限的<code class="codeph">SYS</code>用户连接到根。
                              </p>
                           </li>
                           <li>
                              <p>以普通用户身份在本地连接</p>
                           </li>
                           <li>
                              <p>通过Oracle Net Services以普通用户身份进行连接</p>
                           </li>
                        </ul>
                        <p>要作为<code class="codeph">TARGET</code>连接到PDB，请使用以下技术之一：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用解析为该PDB的数据库服务的网络服务名称进行连接</p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>权限以本地用户身份或本地用户身份进行连接</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-37E1BB1C-FFBB-494B-B3B5-5147BD51F0BF__GUID-7044D023-C459-48E3-8EF3-AEF6B720C687">
                           <p class="notep1">注意：</p>
                           <p>直接连接到PDB时，某些操作不可用。有关这些操作的列表，请参见“ <a href="../bradv/starting-interacting-with-rman-client.html#BRADV673" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南”</cite></span></a> 。
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-37E1BB1C-FFBB-494B-B3B5-5147BD51F0BF__GUID-2896EAD5-1495-4E0E-8808-F0E578615D92">
                           <p class="notep1">也可以看看：</p>
                           <p>“ <span class="italic">Oracle数据库备份和恢复用户指南</span> ”中的以下部分提供了有关备份和恢复PDB的详细信息：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../bradv/starting-interacting-with-rman-client.html#BRADV674" target="_blank">作为目标连接到根</a></p>
                              </li>
                              <li>
                                 <p><a href="../bradv/starting-interacting-with-rman-client.html#BRADV678" target="_blank">作为目标连接到PDB</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADMQS12548"></a><div class="props_rev_3"><a id="GUID-B77E0204-3701-4EFD-99B0-EE199AF73BDA" name="GUID-B77E0204-3701-4EFD-99B0-EE199AF73BDA"></a><h5 id="ADMQS-GUID-B77E0204-3701-4EFD-99B0-EE199AF73BDA" class="sect5"><span class="enumeration_section">9.1.1.1</span> CDB的备份和完全恢复</h5>
                     <div>
                        <p>要在整个多租户容器数据库（CDB）上执行备份和完整恢复操作，请将<code class="codeph">TARGET</code>连接到根目录。
                        </p>
                        <p>必须将该连接建立为具有<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>权限的公共用户。
                        </p>
                        <p>连接到根之后，用于在非CDB上执行操作的相同命令用于在整个CDB上执行备份和完全恢复。</p>
                        <div class="infoboxnotealso" id="GUID-B77E0204-3701-4EFD-99B0-EE199AF73BDA__GUID-0E8DB322-6D1C-45E8-BB77-C97FF2F6462D">
                           <p class="notep1">也可以看看：</p>
                           <p>“ <span class="italic">Oracle数据库备份和恢复用户指南</span> ”中的以下部分提供了有关执行CDB备份和完全恢复的详细信息：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV731" target="_blank">备份整个CDB</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV746" target="_blank">执行整个CDB的完全恢复</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="../bradv/validating-database-files-backups.html#BRADV744" target="_blank">验证整个CDB</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="../bradv/reporting-rman-operations.html#BRADV740" target="_blank">在国家开发银行报道</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="ADMQS12549"></a><div class="props_rev_3"><a id="GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9" name="GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9"></a><h5 id="ADMQS-GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9" class="sect5"><span class="enumeration_section">9.1.1.2</span> PDB的备份和完全恢复</h5>
                     <div>
                        <p>您可以在单个可插拔数据库（PDB）或多个PDB上执行备份和完整恢复操作。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9__GUID-03E9FC40-D724-42A2-979B-E384614B3194">PDB的备份</p>
                           <p>重新定位PDB或将非CDB克隆为PDB时，您可能希望保留使用预制备份备份。要使预涂层备份在目标CDB中可用，必须将有关预涂层备份的元数据导出到目标CDB的RMAN存储库。</p>
                           <p>使备份可用的技术取决于操作类型：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>通过克隆非CDB来创建PDB</p>
                                 <p>在读/写模式下打开非CDB时，必须执行<code class="codeph">DBMS_PDB.EXPORTRMANBACKUP</code>过程作为克隆前的最后一步。当将非CDB作为PDB插入到目的地CDB时，该操作将源非CDB的备份元数据复制到目的地CDB的数据字典中。</p>
                              </li>
                              <li>
                                 <p>将PDB重新定位到另一个CDB</p>
                                 <p>拔下源PDB时，会自动导出备份元数据。因此，您不需要执行<code class="codeph">DBMS_PDB.EXPORTRMANBACKUP</code> 。</p>
                              </li>
                           </ul>
                           <p>预打印备份仅可用于插入源非CDB或PDB的目标CDB。</p>
                           <div class="infoboxnote" id="GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9__GUID-14EC2F20-25FD-46E5-B660-08E142EA5DDA">
                              <p class="notep1">注意：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="../bradv/rman-backup-concepts.html#GUID-7D69CBCA-123F-49FF-85E9-F5C70E47202D" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南</cite></span></a> ，了解预备份备份</p>
                                 </li>
                                 <li>
                                    <p><a href="../bradv/backing-up-database.html#GUID-7F9F8913-2838-4066-A000-048B35A70EA4" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南</cite></span></a> ，了解如何创建整个数据库的预刷新备份</p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_PDB.html#ARPLS-GUID-69EE6FF6-225F-4CC5-BBA5-3AFD01E4131F" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解有关<code class="codeph">DBMS_PDB.EXPORTRMANBACKUP</code>过程的更多信息</p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9__GUID-113341CA-36C3-4A19-9D48-28311F5199F5">备份命令的语法</p>
                           <p>虽然Oracle Recovery Manager（RMAN）命令相同，但用于对多个PDB执行操作的语法包含一些修改。</p>
                           <p>要在单个PDB上执行备份和完整恢复操作，您可以将<code class="codeph">TARGET</code>连接到以下任一容器：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>PDB</p>
                                 <p>在这种情况下，请使用与备份或恢复非CDB相同的命令。例如，要备份PDB，请使用<code class="codeph">BACKUP DATABASE</code>命令。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">CDB $ ROOT</code></p>
                                 <p>在这种情况下，请在RMAN命令中使用<code class="codeph">PLUGGABLE DATABASE</code>子句。以下命令在连接到根时备份PDB <code class="codeph">hrpdb</code> ：</p><pre class="pre codeblock"><code>BACKUP PLUGGABLE DATABASE hrpdb;</code></pre><p>要使用单个命令在多个PDB上执行备份和完成恢复操作，必须连接到根。使用<code class="codeph">PLUGGABLE DATABASE</code>子句后跟要执行操作的PDB列表。以下示例在连接到根时备份PDB <code class="codeph">hrpdb</code> ， <code class="codeph">salespdb</code>和<code class="codeph">invpdb</code> ：</p><pre class="pre codeblock"><code>BACKUP PLUGGABLE DATABASE hrpdb，salespdb，invpdb;</code></pre></li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-86822B10-B187-4E41-9A8F-93BFFBD143E9__GUID-4E01344D-6B49-4FBF-8395-9605412A055C">
                              <p class="notep1">也可以看看：</p>
                              <p>“ <span><cite>Oracle数据库备份和恢复用户指南</cite></span> ”中的以下部分提供了有关备份和恢复PDB的详细信息：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="../bradv/starting-interacting-with-rman-client.html#BRADV678" target="_blank">作为目标连接到PDB</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="../bradv/starting-interacting-with-rman-client.html#BRADV674" target="_blank">将目标连接到根目录</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="../bradv/backing-up-database.html#BRADV735" target="_blank">使用RMAN备份PDB</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="../bradv/rman-complete-database-recovery.html#BRADV749" target="_blank">使用RMAN执行PDB的完全恢复</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="../bradv/validating-database-files-backups.html#BRADV745" target="_blank">验证PDB</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="../bradv/reporting-rman-operations.html#BRADV741" target="_blank">在PDB中报告</a> ”</span></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371" name="GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371"></a><h5 id="ADMQS-GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371" class="sect5"><span class="enumeration_section">9.1.1.3</span>多租户环境中的时间点恢复</h5>
                     <div>
                        <p>您可以执行整个多租户容器数据库（CDB）或特定可插拔数据库（PDB）的时间点恢复。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371__GUID-93074757-54F6-4470-BCE4-43CE56EF9567">CDB的时间点恢复</p>
                           <p>要执行CDB的时间点恢复，您必须满足以下先决条件：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>您必须以具有<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>权限的普通用户身份登录到根容器。
                                 </p>
                              </li>
                              <li>
                                 <p>必须安装CDB。</p>
                              </li>
                           </ul>
                           <p>执行恢复操作时，请使用与非CDB相同的命令。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371__GUID-7D545C99-9B2F-4430-8EA6-5C793E9E1B3C">PDB的时间点恢复</p>
                           <p>当PDB在打开或关闭的CDB中关闭时，您可以将PDB恢复到过去的时间点。该技术取决于CDB的撤消模式。下表描述了这些差异。</p>
                           <div class="tblformal" id="GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371__GUID-A94D6BE0-70C8-48A5-A26B-71339F50A4D6">
                              <p class="titleintable">表9-1时间点恢复技术的差异</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="时间点恢复技术的差异" border="1" summary="This table describes the differences between point-in-time recovery techniques depending on the undo mode of the PDB." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="20%" id="d37040e629">撤消模式</th>
                                       <th align="left" valign="bottom" width="20%" id="d37040e631">使用辅助实例？</th>
                                       <th align="left" valign="bottom" width="20%" id="d37040e633">以目标身份连接到......</th>
                                       <th align="left" valign="bottom" width="20%" id="d37040e635">用于恢复的RMAN命令</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d37040e639" headers="d37040e629 ">
                                          <p>共享</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d37040e639 d37040e631 ">
                                          <p>是</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d37040e639 d37040e633 ">
                                          <p>CDB根</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d37040e639 d37040e635 ">
                                          <p>包括<code class="codeph">PLUGGABLE DATABASE</code>子句以指定必须恢复的PDB。
                                          </p>
                                          <p>RMAN使用辅助目标来存储恢复期间创建的临时文件。如果已配置快速恢复区域，则将其用作辅助目标。您可以使用<code class="codeph">RECOVER</code>命令中的<code class="codeph">AUXILIARY DESTINATION</code>子句显式指定辅助目标。
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d37040e663" headers="d37040e629 ">
                                          <p>本地</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d37040e663 d37040e631 ">
                                          <p>没有</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d37040e663 d37040e633 ">
                                          <p>CDB根或PDB</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d37040e663 d37040e635 ">
                                          <p>连接到PDB时，请使用与非CDB相同的命令。连接到根时，请包含<code class="codeph">PLUGGABLE DATABASE</code>子句以指定必须恢复的PDB。
                                          </p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <div class="infoboxnotealso" id="GUID-B6EF3A32-18B6-4CDC-B668-4C7B5084F371__GUID-09656493-45FB-4E01-A254-BF570244313A">
                              <p class="notep1">也可以看看：</p>
                              <p>有关时间点<span class="italic">恢复的</span>详细信息，请参见“ <span class="italic">Oracle数据库备份和恢复用户指南</span> ”中的以下部分。
                              </p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="../bradv/using-flasback-database-restore-points.html#BRADV-GUID-1150031F-3C15-40C8-BA91-A387F75DC49A" target="_blank">多租户环境中的还原点概述</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="../bradv/using-flasback-database-restore-points.html#BRADV-GUID-952278F2-DBBA-4CB9-AAC4-616B56837AAB" target="_blank">创建CDB还原点</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="../bradv/using-flasback-database-restore-points.html#BRADV-GUID-9363C4B9-48E5-470F-B13B-43FA56667978" target="_blank">创建PDB还原点</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="../bradv/rman-performing-flashback-dbpitr.html#BRADV-GUID-031D9695-A9D2-4381-A840-39BD3CC19946" target="_blank">执行CDB和PDB的时间点恢复</a> ”</span></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5" name="GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5"></a><h5 id="ADMQS-GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5" class="sect5"><span class="enumeration_section">9.1.1.4</span>多租户环境中的闪回数据库</h5>
                     <div>
                        <p>您可以对整个多租户容器数据库（CDB）或特定可插入（PDB）执行闪回数据库操作。</p>
                        <p>RMAN使用辅助目标来存储在时间点恢复期间创建的临时文件。默认情况下，快速恢复区域用作辅助目标。您可以使用<code class="codeph">RECOVER</code>命令中的<code class="codeph">AUXILIARY DESTINATION</code>子句显式指定辅助目标。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5__GUID-CDF83CA0-4688-4CAC-8087-85EE0A77BF47">CDB的闪回</p>
                           <p>要为CDB执行闪回数据库，您必须满足以下先决条件：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>您必须以具有<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>权限的公共用户身份连接到根。
                                 </p>
                              </li>
                              <li>
                                 <p>必须安装CDB。</p>
                              </li>
                           </ul>
                           <p>使用CDB还原点，时间表达式或SCN指定闪回操作的目标时间点。 CDB中的每个PDB都可以访问CDB还原点。但是，还原点不反映其任何PDB的PDB子化身。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5__GUID-3548F0AE-1B06-4A22-B71F-7AD2FD0D0132">PDB的闪回</p>
                           <p>当PDB关闭且CDB打开时，您可以使用<code class="codeph">FLASHBACK DATABASE</code>命令为此PDB执行闪回数据库操作。在特定PDB上执行闪回数据库操作仅修改与该PDB相关的数据文件。 CDB中的其他PDB不受影响，可供使用。请注意，PDB还原点只能由定义它的PDB访问，并且只能用于此PDB上的操作。</p>
                           <div class="tblformal" id="GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5__DIFFERENCESINPOINT-IN-TIMERECOVERYT-3410F520">
                              <p class="titleintable">表9-2闪回技术的差异</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="闪回技术的差异" border="1" summary="This table describes the differences between point-in-time recovery techniques depending on the undo mode of the PDB." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="20%" id="d37040e790">CDB撤消模式</th>
                                       <th align="left" valign="bottom" width="20%" id="d37040e792">使用辅助实例？</th>
                                       <th align="left" valign="bottom" width="20%" id="d37040e794">以目标身份连接到......</th>
                                       <th align="left" valign="bottom" width="20%" id="d37040e796">命令</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d37040e800" headers="d37040e790 ">
                                          <p>共享</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d37040e800 d37040e792 ">
                                          <p>是</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d37040e800 d37040e794 ">
                                          <p>CDB根</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d37040e800 d37040e796 ">
                                          <p>使用<code class="codeph">FLASHBACK PLUGGABLE DATABASE</code>命令。您只能闪回到干净的PDB还原点。
                                          </p>
                                          <p>RMAN使用辅助目标来存储在闪回期间创建的临时文件。如果已配置快速恢复区域，则将其用作辅助目标。您可以使用<code class="codeph">FLASHBACK PLUGGABLE DATABASE</code>命令中的<code class="codeph">AUXILIARY DESTINATION</code>子句显式指定辅助目标。
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d37040e824" headers="d37040e790 ">
                                          <p>本地</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d37040e824 d37040e792 ">
                                          <p>没有</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d37040e824 d37040e794 ">
                                          <p>CDB根或PDB</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d37040e824 d37040e796 ">
                                          <p>使用<code class="codeph">FLASHBACK PLUGGABLE DATABASE</code>命令。您可以使用CDB还原点，PDB还原点，时间表达式或目标SCN指定闪回操作的目标时间点。</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <div class="infoboxnotealso" id="GUID-BCE6C14A-D880-4D88-A99E-A1121BDA08D5__GUID-09656493-45FB-4E01-A254-BF570244313A">
                              <p class="notep1">也可以看看：</p>
                              <p>有关CDB和PDB闪回的更多信息，请参阅“ <span><cite>Oracle数据库备份和恢复用户指南</cite></span> ”中的以下部分：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="../bradv/using-flasback-database-restore-points.html#BRADV-GUID-1150031F-3C15-40C8-BA91-A387F75DC49A" target="_blank">多租户环境中的还原点概述</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="../bradv/using-flasback-database-restore-points.html#BRADV-GUID-952278F2-DBBA-4CB9-AAC4-616B56837AAB" target="_blank">创建CDB还原点</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="../bradv/using-flasback-database-restore-points.html#BRADV-GUID-9363C4B9-48E5-470F-B13B-43FA56667978" target="_blank">创建PDB还原点</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV-GUID-8466CA3C-652A-4AAB-88EB-8815575D6266" target="_blank">为整个CDB执行闪回数据库操作</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="../bradv/rman-performing-flashback-dbpitr.html#BRADV-GUID-C1215E86-9A7B-4EC9-9777-2A18BD627394" target="_blank">为PDB执行闪回数据库操作</a> ”</span></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="ADMQS0911"></a><div class="props_rev_3"><a id="GUID-63D2C33B-49F3-4364-AC01-08C9440A93FC" name="GUID-63D2C33B-49F3-4364-AC01-08C9440A93FC"></a><h3 id="ADMQS-GUID-63D2C33B-49F3-4364-AC01-08C9440A93FC" class="sect3"><span class="enumeration_section">9.2</span>数据库备份和恢复概念</h3>
               <div>
                  <div><span><span class="bold">备份数据库</span>意味着复制数据文件，控制文件和归档重做日志文件（如果数据库在<code class="codeph">ARCHIVELOG</code>模式下运行）。<span class="bold">还原数据库</span>意味着将组成数据库的物理文件从备份介质（通常是磁盘或磁带）复制到其原始位置或新位置。</span> <span class="bold">数据库恢复</span>是通过将增量备份和重做日志应用于还原的文件，使用备份后对数据库所做的更改来更新从备份还原的数据库文件的过程。
                  </div>
                  <p><a id="d37040e941" class="indexterm-anchor"></a></p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-F4305362-3C73-46C8-8B59-71149B6E259C" title="作为DBA需要做出的重要决策之一是确定数据库是否必须以ARCHIVELOG模式或NOARCHIVELOG模式运行。您选择的模式取决于您的可用性和可靠性要求。">ARCHIVELOG和NOARCHIVELOG模式</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-E1DF66FB-5DAB-4267-8645-215C3EBAB1CA" title="Oracle Recovery Manager（RMAN）为其执行操作的每个数据库维护数据库文件和备份的记录。此元数据称为RMAN存储库。">RMAN存储库</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-0A8FC1FE-0994-49A7-9F22-2E3F5FAEAF68" title="Oracle Recovery Manager（RMAN）创建的数据库备份存储为映像副本或备份集。">图像副本和备份集</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-74D6A06A-EC88-4CF0-B486-7B68DE4A78E4" title="数据文件的完整备份包括数据文件的所有已使用块。完整备份可以是映像副本或备份集。">完全备份和增量备份</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-74B864F7-2413-4142-BDB0-7B98BE960462" title="备份是一致的还是不一致的。要进行一致的备份，您的数据库必须已完全关闭，并在备份期间保持关闭状态。">一致且不一致的备份</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-CBC5870F-2C9A-4F67-B5E9-D65049AD1E8E" title="如果还原存档的重做日志文件和数据文件，则必须先执行介质恢复，然后才能打开数据库。">媒体恢复</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-EA0666F4-0EB0-4EB5-AD4C-24F77A64CE9D" title="要简化备份和恢复文件的管理，可以为数据库创建快速恢复区域。快速恢复区域是Oracle管理的目录，文件系统或Oracle自动存储管理磁盘组，可为备份和恢复文件提供集中存储位置。">快速恢复区</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-63D2C33B-49F3-4364-AC01-08C9440A93FC__GUID-EEC6B759-005E-4B73-B0AD-785F974D3860">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="performing-backup-and-recovery.html#GUID-1756BA1F-677B-4E81-BA79-06BBE3E3A692" title="本节介绍如何使用Oracle Recovery Manager（RMAN）备份数据库。Oracle建议的仅磁盘备份策略可以提供有效的数据库日常备份。">备份数据库</a> ”</span></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV001" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南</cite></span></a> ，概述了Oracle Recovery Manager（RMAN）体系结构</p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV002" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”</cite></span></a> ，了解有关RMAN备份的更多概念性详细信息</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADMQS12467"></a><div class="props_rev_3"><a id="GUID-F4305362-3C73-46C8-8B59-71149B6E259C" name="GUID-F4305362-3C73-46C8-8B59-71149B6E259C"></a><h4 id="ADMQS-GUID-F4305362-3C73-46C8-8B59-71149B6E259C" class="sect4"><span class="enumeration_section">9.2.1</span> ARCHIVELOG和NOARCHIVELOG模式</h4>
                  <div>
                     <div><span>作为DBA需要做出的重要决策之一是确定数据库是否必须以<code class="codeph">ARCHIVELOG</code>模式或<code class="codeph">NOARCHIVELOG</code>模式运行。您选择的模式取决于您的可用性和可靠性要求。</span> 它还会影响您可以执行的备份和恢复操作的类型。
                     </div>
                     <p>在<code class="codeph">NOARCHIVELOG</code>模式下，可以重用已变为非活动状态的已填充重做日志组。此模式可保护数据库免受实例故障的影响，但不能防止介质故障。在<code class="codeph">ARCHIVELOG</code>模式下，将填充已填充的重做日志组。此模式可保护数据库免受实例和介质故障的影响，但可能需要其他硬件资源。
                     </p>
                     <div class="infoboxnotealso" id="GUID-F4305362-3C73-46C8-8B59-71149B6E259C__GUID-128420C3-01C0-4A89-990E-B35D2E5AE859">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">ARCHIVELOG</code>和<code class="codeph">NOARCHIVELOG</code>模式的详细讨论，请参见<a href="../admin/managing-archived-redo-log-files.html#ADMIN11330" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a></p>
                     </div>
                  </div>
               </div><a id="ADMQS09114"></a><div class="props_rev_3"><a id="GUID-E1DF66FB-5DAB-4267-8645-215C3EBAB1CA" name="GUID-E1DF66FB-5DAB-4267-8645-215C3EBAB1CA"></a><h4 id="ADMQS-GUID-E1DF66FB-5DAB-4267-8645-215C3EBAB1CA" class="sect4"><span class="enumeration_section">9.2.2</span> RMAN存储库</h4>
                  <div>
                     <div><span>Oracle Recovery Manager（RMAN）为其执行操作的每个数据库维护数据库文件和备份的记录。此元数据称为<span class="bold">RMAN存储库</span> 。</span> 当您请求恢复数据库时，RMAN使用存储库元数据来选择此还原和恢复所需的最有效备份。
                     </div>
                     <p>数据库的RMAN存储库的主要位置是其控制文件。此元数据对RMAN的重要性是保护控制文件是备份策略的重要组成部分的另一个原因。在某些安装中，RMAN存储库的第二个副本存储在称为<span class="bold">恢复目录</span>的模式中。恢复目录位于单独的数据库中，可以存储多个目标数据库的元数据。
                     </p>
                     <p>建议您使用恢复目录。由于恢复目录存储元数据历史记录的时间比控制文件长，因此您可以执行比控制文件中的历史记录更早的恢复。此外，如果目标控制文件和所有备份都丢失，则可以使用恢复目录中的RMAN元数据。</p>
                     <div class="infoboxnotealso" id="GUID-E1DF66FB-5DAB-4267-8645-215C3EBAB1CA__GUID-220DB5BF-2D26-4B1D-AC61-79E7C11A8191">
                        <p class="notep1">也可以看看：</p>
                        <p>有关创建和管理恢复目录的更多信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV89646" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                     </div>
                  </div>
               </div><a id="ADMQS0926"></a><div class="props_rev_3"><a id="GUID-0A8FC1FE-0994-49A7-9F22-2E3F5FAEAF68" name="GUID-0A8FC1FE-0994-49A7-9F22-2E3F5FAEAF68"></a><h4 id="ADMQS-GUID-0A8FC1FE-0994-49A7-9F22-2E3F5FAEAF68" class="sect4"><span class="enumeration_section">9.2.3</span>映像副本和备份集</h4>
                  <div>
                     <p>Oracle Recovery Manager（RMAN）创建的数据库备份存储为映像副本或备份集。</p>
                     <p><span class="bold">映像副本</span>是文件的精确逐字节副本。您可以通过在操作系统级别复制文件来创建映像副本。但是，与在操作系统级别复制文件不同，通过RMAN创建的映像副本将记录在RMAN存储库中，以便RMAN可以在数据库还原操作和恢复期间使用这些副本。仅当RMAN记录在RMAN存储库中时，RMAN才能还原文件。RMAN只能在磁盘上创建映像副本。
                     </p>
                     <p><span class="bold">备份集</span>是RMAN <code class="codeph">BACKUP</code>命令生成的逻辑实体。此命令可以在磁盘或磁带设备上生成一个或多个备份集。虽然映像副本不能使用所有RMAN功能，但它们的优点是可以对它们应用增量备份（合成完全备份），您可以直接使用它们而无需先复制它们，以便快速恢复。
                     </p>
                     <p><a id="d37040e1196" class="indexterm-anchor"></a><a id="d37040e1200" class="indexterm-anchor"></a>每个备份集包含一个或多个称为<span class="bold">备份片段的</span>物理文件。备份片段以紧凑的RMAN特定格式存储一个或多个数据库文件的备份。备份集的一个优点是RMAN使用未使用的块压缩来节省备份数据文件的空间。只有数据文件中用于存储数据的那些块才包含在备份集中。备份集也可以压缩，加密，发送到磁带，并使用数据文件副本不可用的高级未使用空间压缩。
                     </p>
                  </div>
               </div><a id="ADMQS09311"></a><div class="props_rev_3"><a id="GUID-74D6A06A-EC88-4CF0-B486-7B68DE4A78E4" name="GUID-74D6A06A-EC88-4CF0-B486-7B68DE4A78E4"></a><h4 id="ADMQS-GUID-74D6A06A-EC88-4CF0-B486-7B68DE4A78E4" class="sect4"><span class="enumeration_section">9.2.4</span>完全备份和增量备份</h4>
                  <div>
                     <p>数据文件的<span class="bold">完整备份</span>包括数据文件的所有已使用块。完整备份可以是映像副本或备份集。
                     </p>
                     <p><span class="bold">增量备份</span> <a id="d37040e1249" class="indexterm-anchor"></a><a id="d37040e1253" class="indexterm-anchor"></a><a id="d37040e1257" class="indexterm-anchor"></a>仅复制数据文件中在备份之间更改的那些块。复制数据文件中所有块的<span class="bold">0级增量备份</span>用作增量备份策略的起点。
                     </p>
                     <p>1 <span class="bold">级增量备份</span>仅复制自上一级0或级别1增量备份以来已更改的块的映像。级别1备份可以是<span class="bold">累积的</span> ，在这种情况下，自最近的0级备份以来所有块都已更改，或者是<span class="bold">差异</span> ，在这种情况下，仅包括自最近的0级或1级增量备份以来更改的块。
                     </p>
                     <p>级别0的增量备份可以是备份集或映像副本，但级别1的增量备份只能是备份集。</p>
                     <p>典型的增量策略会定期进行1级备份，例如每天一次。</p>
                     <p>在恢复期间，Oracle Recovery Manager（RMAN）将根据需要自动应用增量备份和重做日志，以将数据库恢复到所需的确切时间点。</p>
                  </div>
               </div><a id="ADMQS09111"></a><div class="props_rev_3"><a id="GUID-74B864F7-2413-4142-BDB0-7B98BE960462" name="GUID-74B864F7-2413-4142-BDB0-7B98BE960462"></a><h4 id="ADMQS-GUID-74B864F7-2413-4142-BDB0-7B98BE960462" class="sect4"><span class="enumeration_section">9.2.5</span>一致和不一致的备份</h4>
                  <div>
                     <div><span>备份是一致的还是不一致的。要进行一致的备份，您的数据库必须已完全关闭，并在备份期间保持关闭状态。</span> 在关闭过程中，所有已提交的更改都将写入数据文件，因此数据文件处于事务一致状态。从一致备份还原数据文件时，可以立即打开数据库。
                     </div>
                     <p>如果数据库处于<code class="codeph">ARCHIVELOG</code>模式，则可以使用归档重做日志文件创建可恢复的不一致备份。开放式数据库备份不一致，因为联机重做日志文件包含尚未应用于数据文件的更改。必须存档联机重做日志文件，然后使用数据文件进行备份以确保可恢复性。
                     </p>
                     <p>尽管名称不同，但备份不一致的备份形式与一致备份一样强大。进行不一致备份的优点是，您可以在数据库打开以进行更新时备份数据库。</p>
                  </div>
               </div><a id="ADMQS09112"></a><div class="props_rev_3"><a id="GUID-CBC5870F-2C9A-4F67-B5E9-D65049AD1E8E" name="GUID-CBC5870F-2C9A-4F67-B5E9-D65049AD1E8E"></a><h4 id="ADMQS-GUID-CBC5870F-2C9A-4F67-B5E9-D65049AD1E8E" class="sect4"><span class="enumeration_section">9.2.6</span>媒体恢复</h4>
                  <div>
                     <div><span>如果还原存档的重做日志文件和数据文件，则必须先执行介质恢复，然后才能打开数据库。</span> 归档重做日志文件中未反映在数据文件中的任何数据库事务都将应用于数据文件，从而在打开数据库之前将它们置于事务一致状态。
                     </div>
                     <p>介质恢复需要控制文件，数据文件（通常从备份恢复）以及包含自备份数据文件以来的更改的联机和归档重做日志文件。媒体恢复通常用于从媒体故障中恢复，例如丢失文件或磁盘，或用户错误，例如删除表的内容。</p>
                     <p>媒体恢复可以是完全恢复或时间点恢复。完全恢复可以应用于单个数据文件，表空间或整个数据库。时间点恢复适用于整个数据库（有时也适用于单个表空间，具有Oracle Recover Manager（RMAN）的自动化帮助）。</p>
                     <p>在完全恢复中，您可以还原备份数据文件，并将存档和联机重做日志文件中的所有更改应用于数据文件。数据库在发生故障时返回其状态，可以在不丢失数据的情况下打开。</p>
                     <p><a id="d37040e1373" class="indexterm-anchor"></a>在时间点恢复中，您可以在过去的用户选择的时间将数据库返回到其内容。您可以还原在目标时间之前创建的数据文件的备份，以及从备份创建到目标时间的一整套归档重做日志文件。恢复将备份时间和目标时间之间的更改应用于数据文件。目标时间之后的所有更改都将被丢弃。
                     </p>
                     <p><a id="d37040e1381" class="indexterm-anchor"></a><a id="d37040e1385" class="indexterm-anchor"></a> RMAN使您可以执行数据库的完整和时间点恢复。但是，本文档重点介绍完全恢复。
                     </p>
                     <div class="infoboxnotealso" id="GUID-CBC5870F-2C9A-4F67-B5E9-D65049AD1E8E__GUID-66ABA140-FA26-4C22-9A0E-BFF5844EC16D">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="performing-backup-and-recovery.html#GUID-2DEB3182-10FA-488C-A01D-550CA49CDBD6" title="用户定向恢复使您可以使用闪回功能并执行还原操作和恢复过程。">执行用户定向恢复</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关时间点<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV80055" target="_blank"><span><cite>恢复的</cite></span></a>更多详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV80055" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADMQS09113"></a><div class="props_rev_3"><a id="GUID-EA0666F4-0EB0-4EB5-AD4C-24F77A64CE9D" name="GUID-EA0666F4-0EB0-4EB5-AD4C-24F77A64CE9D"></a><h4 id="ADMQS-GUID-EA0666F4-0EB0-4EB5-AD4C-24F77A64CE9D" class="sect4"><span class="enumeration_section">9.2.7</span>快速恢复区</h4>
                  <div>
                     <div><span>要简化备份和恢复文件的管理，可以为数据库创建快速恢复区域。快速恢复区域是Oracle管理的目录，文件系统或Oracle自动存储管理磁盘组，可为备份和恢复文件提供集中存储位置。</span> Oracle在快速恢复区域中创建归档日志和闪回日志。Oracle Recovery Manager（RMAN）可以将其备份集和映像副本存储在快速恢复区中，并在介质恢复期间还原文件时使用它。快速恢复区域还充当磁带的磁盘缓存。
                     </div>
                     <p>Oracle数据库自动管理此存储，删除不再需要的文件。定期将备份复制到磁带会释放快速恢复区域中的空间以用于其他文件。</p>
                     <p>在未指定备份目标的情况下发出RMAN <code class="codeph">BACKUP</code>命令时，如果已配置，RMAN将自动备份到快速恢复区域。
                     </p>
                     <p>Oracle建议您配置快速恢复区域以简化备份管理。除非另有说明，否则本文档假定使用恢复区域。</p>
                     <div class="infoboxnotealso" id="GUID-EA0666F4-0EB0-4EB5-AD4C-24F77A64CE9D__GUID-53A5532C-FF2B-44E8-B2E4-55080CCC9AAB">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="performing-backup-and-recovery.html#GUID-688AA475-DC5F-4523-A9A9-5D8535BDCE42" title="Oracle建议将快速恢复区域放在与工作数据库文件集不同的存储设备上。否则，存储设备将成为数据库的单点故障。">规划快速恢复区的空间使用和位置</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="performing-backup-and-recovery.html#GUID-D6A541BF-A878-4B45-AFAC-1E921554731E">配置快速恢复区</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="ADMQS092"></a><div class="props_rev_3"><a id="GUID-292CD2F6-ECDC-4F94-B750-97DD2D526B22" name="GUID-292CD2F6-ECDC-4F94-B750-97DD2D526B22"></a><h3 id="ADMQS-GUID-292CD2F6-ECDC-4F94-B750-97DD2D526B22" class="sect3"><span class="enumeration_section">9.3</span>配置数据库以进行基本备份和恢复</h3>
               <div>
                  <p>本节介绍如何设置数据库以利用Oracle建议的备份策略。</p>
                  <p>要充分利用自动管理备份和恢复文件和操作的Oracle数据库功能，请按如下方式配置数据库：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用快速恢复区域，该区域可自动执行大多数与备份相关的文件的存储管理，并将其指定为归档重做日志文件目标。</p>
                     </li>
                     <li>
                        <p>以<code class="codeph">ARCHIVELOG</code>模式运行数据库，以便您可以执行联机备份并具有数据恢复选项，例如完整和时间点介质恢复。
                        </p>
                     </li>
                  </ul>
                  <p>您还必须设置多个策略来管理备份哪些文件，使用什么格式在磁盘上存储备份，以及何时文件有资格删除。</p>
                  <p>在多租户环境中，您必须连接到根并为整个多租户容器数据库（CDB）配置备份和恢复设置。这些设置适用于CDB中的根目录和所有可插拔数据库（PDB）。</p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-688AA475-DC5F-4523-A9A9-5D8535BDCE42" title="Oracle建议将快速恢复区域放在与工作数据库文件集不同的存储设备上。否则，存储设备将成为数据库的单点故障。">规划快速恢复区的空间使用和位置</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-517EDF8B-C2C7-4658-BB4B-2E808A5D1015" title="本节介绍执行备份和恢复所需的凭据以及如何向数据库用户授予SYSBACKUP权限。">配置用户执行备份和恢复</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="要执行备份或恢复操作或配置备份和恢复设置，必须启动Oracle Recovery Manager（RMAN）客户端并连接到目标数据库。">使用RMAN连接到目标数据库</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-192720EF-64C7-465B-982A-F8AABFD81DC1">配置恢复设置</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-7A2DBE07-0CF7-45AB-A946-0DB44BD762E3" title="您可以配置多个与备份相关的设置和策略。">配置备份设置</a></p>
                     </li>
                  </ul>
               </div><a id="ADMQS0921"></a><div class="props_rev_3"><a id="GUID-688AA475-DC5F-4523-A9A9-5D8535BDCE42" name="GUID-688AA475-DC5F-4523-A9A9-5D8535BDCE42"></a><h4 id="ADMQS-GUID-688AA475-DC5F-4523-A9A9-5D8535BDCE42" class="sect4"><span class="enumeration_section">9.3.1</span>规划快速恢复区的空间使用和位置</h4>
                  <div>
                     <p>Oracle建议将快速恢复区域放在与工作数据库文件集不同的存储设备上。否则，存储设备将成为数据库的单点故障。</p>
                     <p>为快速恢复区分配的存储空间量取决于数据库的大小和活动级别以及恢复目标。您的目标决定了您使用什么类型的备份，何时制作以及保留它们的时间。</p>
                     <p>本节包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-FC941E39-3B5D-409D-AC70-C940EB4A0EFA" title="快速恢复区域中的空间管理由备份保留策略控制。保留策略确定文件何时过时，这意味着不再需要它们来满足您的数据恢复目标。">关于备份保留策略和快速恢复区</a></p>
                        </li>
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-43325063-E502-4D5B-A2B2-431366B57691" title="作为一般规则，快速恢复区域越大，它就越有用。">关于快速恢复区域大小</a></p>
                        </li>
                     </ul>
                  </div><a id="ADMQS09211"></a><div class="props_rev_3"><a id="GUID-FC941E39-3B5D-409D-AC70-C940EB4A0EFA" name="GUID-FC941E39-3B5D-409D-AC70-C940EB4A0EFA"></a><h5 id="ADMQS-GUID-FC941E39-3B5D-409D-AC70-C940EB4A0EFA" class="sect5"><span class="enumeration_section">9.3.1.1</span>关于备份保留策略和快速恢复区域</h5>
                     <div>
                        <p>快速恢复区域中的空间管理由备份保留策略控制。保留策略确定文件何时过时，这意味着不再需要它们来满足您的数据恢复目标。</p>
                        <p>保留策略可以基于备份冗余或恢复窗口（一段时间）。</p>
                        <p>使用基于冗余的策略时，您可以指定Oracle Recovery Manager（RMAN）保留的每个数据文件和控制文件的完整备份数或0级备份数。如果特定数据文件或控制文件的完整备份或0级备份数超过冗余设置，则RMAN会将额外备份视为过时。</p>
                        <p>在基于一段时间（或窗口）使用恢复策略时，您可以指定以天为单位的时间间隔。仅当文件不再需要完全恢复或时间点恢复到窗口内的系统更改号（SCN）时，文件才会过时。因此，建议使用基于窗口的恢复保留策略。</p>
                        <p>默认保留策略的冗余为1。即使快速恢复区域中的文件已过时，通常也不会删除它们，直到新文件需要空间。如果空间允许，最近移动到磁带的文件将保留在磁盘上，以避免从磁带恢复它们以进行恢复。自动删除从快速恢复区域移动到磁带的过时文件和文件使其成为方便的归档目标。其他目的地需要手动删除日志。</p>
                        <div class="infoboxnotealso" id="GUID-FC941E39-3B5D-409D-AC70-C940EB4A0EFA__GUID-83A4E317-167C-46F5-8822-59DE15A4C9D5">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="performing-backup-and-recovery.html#GUID-48AD8DE1-B7F4-4909-939E-A0951C118AE8" title="您可以设置管理控制文件和服务器参数文件备份的备份策略，要从整个数据库备份中排除的表空间以及备份保留策略。">配置备份策略设置</a> ”</span></p>
                              </li>
                              <li>
                                 <p>有关配置基于冗余的策略的示例，请<a href="../bradv/configuring-rman-client-basic.html#BRADV89436" target="_blank"><span><cite>参见“Oracle数据库备份和恢复用户指南”</cite></span></a> 。
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="ADMQS09212"></a><div class="props_rev_3"><a id="GUID-43325063-E502-4D5B-A2B2-431366B57691" name="GUID-43325063-E502-4D5B-A2B2-431366B57691"></a><h5 id="ADMQS-GUID-43325063-E502-4D5B-A2B2-431366B57691" class="sect5"><span class="enumeration_section">9.3.1.2</span>关于快速恢复区域大小</h5>
                     <div>
                        <div><span>作为一般规则，快速恢复区域越大，它就越有用。</span> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV8183" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”</cite></span></a>介绍了如何调整快速恢复区域的大小。理想情况下，快速恢复区域应足够大，以便复制数据文件，控制文件，联机重做日志文件和恢复数据库所需的归档重做日志文件，以及基于此类保留的这些备份文件的副本。保留政策。
                        </div>
                        <p>如果备份策略包括增量备份，则为这些文件的快速恢复区域添加足够的空间。如果可以将某些备份移动到磁带，则可以减小快速恢复区域的大小。请注意，从磁带检索文件会导致更长的数据库还原操作和恢复时间。</p>
                        <div class="infoboxnotealso" id="GUID-43325063-E502-4D5B-A2B2-431366B57691__GUID-2CD4BCA8-4D06-4BAF-ABFB-8BB518BC63B3">
                           <p class="notep1">也可以看看：</p>
                           <p>有关处理完整快速恢复区域的信息<a href="../bradv/maintaining-rman-backups.html#BRADV89616" target="_blank"><span><cite>，请参见“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="ADMQS12424"></a><div class="props_rev_3"><a id="GUID-517EDF8B-C2C7-4658-BB4B-2E808A5D1015" name="GUID-517EDF8B-C2C7-4658-BB4B-2E808A5D1015"></a><h4 id="ADMQS-GUID-517EDF8B-C2C7-4658-BB4B-2E808A5D1015" class="sect4"><span class="enumeration_section">9.3.2</span>配置用户进行备份和恢复</h4>
                  <div>
                     <p>本节介绍执行备份和恢复所需的凭据以及如何向数据库用户授予<code class="codeph">SYSBACKUP</code>权限。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-90668C5A-3D99-45E0-BBC0-D2AA98D3F59D" title="要使用Oracle Recovery Manager（RMAN）执行备份和恢复任务，必须以具有SYSDBA或SYSBACKUP管理权限的用户身份连接到目标数据库。">执行备份和恢复所需的凭据</a></p>
                        </li>
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-2403E3A3-B6B7-424F-823D-2AD7A83D3B1E" title="作为数据库管理员，您可以向任何数据库用户授予SYSBACKUP权限。执行此操作时，将在密码文件中为该用户创建一个条目。">授予SYSBACKUP权限</a></p>
                        </li>
                     </ul>
                  </div><a id="ADMQS0922"></a><div class="props_rev_3"><a id="GUID-90668C5A-3D99-45E0-BBC0-D2AA98D3F59D" name="GUID-90668C5A-3D99-45E0-BBC0-D2AA98D3F59D"></a><h5 id="ADMQS-GUID-90668C5A-3D99-45E0-BBC0-D2AA98D3F59D" class="sect5"><span class="enumeration_section">9.3.2.1</span>执行备份和恢复所需的凭据</h5>
                     <div>
                        <div><span>要使用Oracle Recovery Manager（RMAN）执行备份和恢复任务，必须以具有<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>管理权限的用户身份连接到目标数据库。</span> <code class="codeph">SYSBACKUP</code>权限包含备份和恢复数据库所需的所有权限。这些权限是<code class="codeph">SYSDBA</code>管理权限中包含的权限的子集。
                        </div>
                        <p>以下类型的用户具有<code class="codeph">SYSBACKUP</code>权限。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">SYSBACKUP</code>用户。
                              </p>
                              <p>安装数据库时，将自动创建具有<code class="codeph">SYSBACKUP</code>权限的<code class="codeph">SYSBACKUP</code>用户。
                              </p>
                           </li>
                           <li>
                              <p>授予<code class="codeph">SYSBACKUP</code>权限的数据库用户。
                              </p>
                           </li>
                           <li>
                              <p>作为OSBACKUPDBA操作系统组成员的数据库主机用户 - 用于操作系统身份验证。</p>
                              <p>在数据库安装期间，OSBACKUPDBA组将分配给特定的操作系统组。例如，在UNIX和Linux系统上， <code class="codeph">backupdba</code>组通常被指定为OSBACKUPDBA组。该组中的主机用户可以使用操作系统身份验证连接到目标数据库;它们不需要被定义为数据库用户。
                              </p>
                           </li>
                        </ul>
                        <p>对于本文档中描述的Oracle建议的备份策略，您使用操作系统身份验证。有关创建主机用户并将其添加到OSBACKUPDBA组的说明，请参阅操作系统文档。</p>
                        <div class="infoboxnote" id="GUID-90668C5A-3D99-45E0-BBC0-D2AA98D3F59D__GUID-4952411E-07F7-497A-8117-8486DA7A7FB4">
                           <p class="notep1">注意：</p>
                           <p>在以前的版本中，您需要<code class="codeph">SYSDBA</code>管理权限才能执行备份和恢复任务。从Oracle Database 12 <span class="italic">c开始</span> ，建议您使用<code class="codeph">SYSBACKUP</code>管理权限进行备份和恢复操作。
                           </p>
                           <p>Oracle建议您不要使用<code class="codeph">SYSBACKUP</code>用户。而是创建用户并向该用户授予<code class="codeph">SYSBACKUP</code>权限。
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-90668C5A-3D99-45E0-BBC0-D2AA98D3F59D__GUID-36375F85-71C2-4AD4-84AD-9114E2178BBC">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="getting-started-with-database-administration.html#GUID-DE8A79BD-FAE4-4364-98FF-D2BD992A06E7" title="本节介绍如何从命令行和Windows“开始”菜单启动SQL * Plus并连接到数据库。">启动SQL * Plus并连接到数据库</a> ”</span>以获取有关操作系统身份验证的更多信息</p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="performing-backup-and-recovery.html#GUID-2403E3A3-B6B7-424F-823D-2AD7A83D3B1E" title="作为数据库管理员，您可以向任何数据库用户授予SYSBACKUP权限。执行此操作时，将在密码文件中为该用户创建一个条目。">授予SYSBACKUP权限</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="ADMQS12426"></a><a id="ADMQS12425"></a><div class="props_rev_3"><a id="GUID-2403E3A3-B6B7-424F-823D-2AD7A83D3B1E" name="GUID-2403E3A3-B6B7-424F-823D-2AD7A83D3B1E"></a><h5 id="ADMQS-GUID-2403E3A3-B6B7-424F-823D-2AD7A83D3B1E" class="sect5"><span class="enumeration_section">9.3.2.2</span>授予SYSBACKUP权限</h5>
                     <div>
                        <p>作为数据库管理员，您可以向任何数据库用户授予<code class="codeph">SYSBACKUP</code>权限。执行此操作时，将在密码文件中为该用户创建一个条目。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-2403E3A3-B6B7-424F-823D-2AD7A83D3B1E__GUID-C3946446-1EB8-4BB5-9E0E-34072D1F190B">要将SYSBACKUP权限授予现有用户：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以<code class="codeph">SYS</code>用户身份登录Oracle Enterprise Manager Database Express（EM Express）。请务必在“登录”页面上选中<code class="codeph">as</code> <code class="codeph">sysdba</code>复选框。</span><div>
                                 <p>请参阅<span class="q">“ <a href="getting-started-with-database-administration.html#GUID-E2807CDE-1401-4A79-8131-EBC6D45C71B4" title="Database Home页面是Oracle Enterprise Manager Database Express（EM Express）中的主数据库管理页面。">访问数据库主页”</a> 。</span></p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>从“安全”菜单中，选择“ <span class="bold">用户”</span> 。</span></li>
                           <li class="stepexpand"><span>在“用户”页面上，单击要向其授予权限的用户的名称。</span></li>
                           <li class="stepexpand"><span>在“帐户摘要”页面的“权限”选项卡中，单击“ <span class="bold">编辑”</span> 。</span></li>
                           <li class="stepexpand"><span>在Alter Privileges对话框中，滚动到左侧列表中的<code class="codeph">SYSBACKUP</code>权限，选择它，然后单击<span class="bold">右箭头</span> （ <span class="bold">&gt;</span> ）按钮。</span><div>
                                 <p><code class="codeph">SYSBACKUP</code>权限显示在右侧列表中。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>单击<span class="bold">确定</span> 。</span></li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-2403E3A3-B6B7-424F-823D-2AD7A83D3B1E__GUID-3F022E50-95D0-44C9-880F-206F9D213433">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="administering-user-accounts-and-security.html#GUID-D44F6873-123C-480E-AF2D-20A4670DA70A" title="您可以使用Oracle Enterprise Manager Database Express（EM Express）向用户帐户授予权限和角色。">示例：向用户帐户授予权限和角色</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="managing-database-storage-structures.html#GUID-925B95ED-DEE9-4551-B9CA-59D88C1D3A3C__CDEEAFDD">密码文件</a> ”</span></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADMQS12428"></a><a id="ADMQS12427"></a><div class="props_rev_3"><a id="GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" name="GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903"></a><h4 id="ADMQS-GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" class="sect4"><span class="enumeration_section">9.3.3</span>使用RMAN连接目标数据库</h4>
                  <div>
                     <div><span>要执行备份或恢复操作或配置备份和恢复设置，必须启动Oracle Recovery Manager（RMAN）客户端并连接到目标数据库。</span> <span class="bold">目标数据库</span>是必须使用RMAN备份或还原的Oracle数据库。与目标数据库的连接需要<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>管理权限。
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903__GUID-428DEA34-EB57-4728-95AD-E885A62AB8F5">要连接到目标数据库：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>打开命令窗口。</span></li>
                        <li class="stepexpand"><span>确保将<code class="codeph">ORACLE_SID</code>环境变量设置为数据库的系统标识符（SID）。</span><div><pre class="oac_no_warn" dir="ltr">$ ORACLE_SID = prod;导出ORACLE_SID</pre></div>
                        </li>
                        <li class="stepexpand"><span>执行以下操作之一：</span><div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>要以已授予<code class="codeph">SYSBACKUP</code>权限的数据库用户身份进行连接，请输入以下命令：</p><pre class="oac_no_warn" dir="ltr">rman target'“ <span class="italic">username</span> as sysbackup”'</pre><p>单引号和双引号是必需的。出现提示时输入用户密码。</p>
                                 </li>
                                 <li>
                                    <p>要连接操作系统身份验证，请确保以OSBACKUPDBA组（通常是UNIX和Linux系统上的<code class="codeph">backupdba</code>组）中的用户身份登录到数据库主机，并输入以下命令：</p><pre class="oac_no_warn" dir="ltr">rman目标/</pre><p>如果未显式指定<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code> ，则使用<code class="codeph">SYSDBA</code>权限连接到目标数据库。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903__GUID-ED9FB9AE-B501-49DF-9D47-2E2B12135048">
                           <p class="notep1">注意：</p>
                           <p>您可以在一个数据库主机上启动RMAN并连接到另一个主机上的目标数据库。这称为连接到远程数据库，它需要：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>您在连接字符串中提供网络服务名称。</p>
                              </li>
                              <li>
                                 <p>您的用户名应输入远程数据库的密码文件中，以<code class="codeph">SYSBACKUP</code>身份连接。</p>
                              </li>
                           </ul>
                           <p>连接到远程数据库超出了本文档的范围。有关更多信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV89391" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903__GUID-3F0C9A2C-1D38-43B2-BAA0-A11625C904A5">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关连接到多租户容器数据库（CDB）和可插拔数据库（PDB）的信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV671" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关连接到目标数据库的详细信息<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV89391" target="_blank"><span><cite>，请参见“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="performing-backup-and-recovery.html#GUID-517EDF8B-C2C7-4658-BB4B-2E808A5D1015" title="本节介绍执行备份和恢复所需的凭据以及如何向数据库用户授予SYSBACKUP权限。">配置用户执行备份和恢复</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="configuring-the-network-environment.html#GUID-9ED3270A-682A-42D5-A56A-90308E5C5030" title="本节介绍客户端与数据库的连接所涉及的元素。">客户端连接</a> ”</span>以获取有关网络服务名称的信息。
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADMQS099"></a><div class="props_rev_3"><a id="GUID-192720EF-64C7-465B-982A-F8AABFD81DC1" name="GUID-192720EF-64C7-465B-982A-F8AABFD81DC1"></a><h4 id="ADMQS-GUID-192720EF-64C7-465B-982A-F8AABFD81DC1" class="sect4"><span class="enumeration_section">9.3.4</span>配置恢复设置</h4>
                  <div>
                     <p>本节介绍如何配置用于实例恢复，介质恢复和快速恢复的设置。它包括以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-D6A541BF-A878-4B45-AFAC-1E921554731E">配置快速恢复区</a></p>
                        </li>
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-16741F21-B0A4-4408-9A9D-75A87C7EF7C0">启用重做日志文件的存档</a></p>
                        </li>
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-2598AA28-DBBB-4B40-AABC-B28FB5C5F4BE">启用闪回数据库</a></p>
                        </li>
                     </ul>
                  </div><a id="ADMQS12430"></a><a id="ADMQS12429"></a><div class="props_rev_3"><a id="GUID-D6A541BF-A878-4B45-AFAC-1E921554731E" name="GUID-D6A541BF-A878-4B45-AFAC-1E921554731E"></a><h5 id="ADMQS-GUID-D6A541BF-A878-4B45-AFAC-1E921554731E" class="sect5"><span class="enumeration_section">9.3.4.1</span>配置快速恢复区域</h5>
                     <div>
                        <div class="section">
                           <p>如果在安装期间未指定快速恢复区域的位置，则安装过程会自动在Oracle基本目录中配置快速恢复区域。但是，Oracle建议快速恢复区域位于与数据库文件不同的存储设备上。</p>
                           <p>您可以修改以下初始化参数以重新定位快速恢复区域并调整其大小：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">DB_RECOVERY_FILE_DEST</code></p>
                                 <p>指定快速恢复区域的位置。这可以是文件系统目录或Oracle自动存储管理（Oracle ASM）磁盘组，但不是原始磁盘。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">DB_RECOVERY_FILE_DEST_SIZE</code></p>
                                 <p>指定快速恢复区域的大小（以字节为单位）。</p>
                              </li>
                           </ul>
                           <p>该<code class="codeph">DB_RECOVERY_FILE_DEST_SIZE</code>参数必须在之前设置<code class="codeph">DB_RECOVERY_FILE_DEST</code>参数。
                           </p>
                           <p>您可以设置这些参数，而无需关闭并重新启动数据库。在Oracle Real Application Clusters（Oracle RAC）数据库中，所有实例必须具有相同的初始化参数值。该位置必须位于群集文件系统，Oracle ASM或共享目录中。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-D6A541BF-A878-4B45-AFAC-1E921554731E__GUID-78E7E36B-2420-4327-9706-E4FDA38E9C0D">要配置快速恢复区域：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>假设您希望将快速恢复区域放在目录<code class="codeph">/u02/oracle/fra</code>并且希望其大小的上限为10 GB。</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>将Oracle Recovery Manager（RMAN） <span class="q"><a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">连接到</a></span>目标数据库，如<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">使用RMAN连接到目标数据库</a> ” <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="要执行备份或恢复操作或配置备份和恢复设置，必须启动Oracle Recovery Manager（RMAN）客户端并连接到目标数据库。">中所述</a> 。</span></span></li>
                           <li class="stepexpand"><span>使用以下命令指定快速恢复区域的大小：</span><div><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET DB_RECOVERY_FILE_DEST_SIZE = 10G;</pre></div>
                           </li>
                           <li class="stepexpand"><span>使用以下命令指定快速恢复区域的位置：</span><div><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET DB_RECOVERY_FILE_DEST ='/ u02 / oracle / fra';</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-D6A541BF-A878-4B45-AFAC-1E921554731E__GUID-27C2174A-D335-4D6D-9AD4-F1686F1D5B0A">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="performing-backup-and-recovery.html#GUID-EA0666F4-0EB0-4EB5-AD4C-24F77A64CE9D" title="要简化备份和恢复文件的管理，可以为数据库创建快速恢复区域。快速恢复区域是Oracle管理的目录，文件系统或Oracle自动存储管理磁盘组，可为备份和恢复文件提供集中存储位置。">快速恢复区</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="performing-backup-and-recovery.html#GUID-43325063-E502-4D5B-A2B2-431366B57691" title="作为一般规则，快速恢复区域越大，它就越有用。">关于快速恢复区大小</a> ”</span></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADMQS12432"></a><a id="ADMQS12431"></a><div class="props_rev_3"><a id="GUID-16741F21-B0A4-4408-9A9D-75A87C7EF7C0" name="GUID-16741F21-B0A4-4408-9A9D-75A87C7EF7C0"></a><h5 id="ADMQS-GUID-16741F21-B0A4-4408-9A9D-75A87C7EF7C0" class="sect5"><span class="enumeration_section">9.3.4.2</span>启用重做日志文件存档</h5>
                     <div>
                        <div class="section">
                           <p>要在数据库打开时备份数据库，或者要能够执行完整或时间点介质恢复，必须启用重做日志文件的存档。为此，您将数据库置于<code class="codeph">ARCHIVELOG</code>模式。您可以使用以下查询确定是否为目标数据库启用了重做日志的归档：</p><pre class="oac_no_warn" dir="ltr">从V $ DATABASE中选择LOG_MODE;</pre><p>如果未指定数据库应将归档日志文件写入的目标，则数据库会将它们写入快速恢复区域。您可以指定其他目标，也可以指定写入每个存档日志文件的多个副本，每个副本到不同的目标。冗余副本有助于确保在其中一个目标发生故障时，归档日志文件始终可用。</p>
                           <p>以下过程假定您希望将归档日志文件放在目录<code class="codeph">/u02/oracle/logfiles</code> ，并将归档日志文件的冗余副本放在目录<code class="codeph">/u03/oracle/logfiles</code> 。冗余副本是可选的。
                           </p>
                           <div class="infoboxnotewarn" id="GUID-16741F21-B0A4-4408-9A9D-75A87C7EF7C0__GUID-CD63CE97-6981-4283-AEE9-53E50F2CAF04">
                              <p class="notep1">警告：</p>
                              <p>您必须确保存档日志文件目标始终有足够的磁盘空间。如果数据库在尝试归档日志文件时遇到磁盘已满错误，则会发生致命错误并且数据库停止响应。您可以检查警报日志以获取磁盘已满信息。</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-16741F21-B0A4-4408-9A9D-75A87C7EF7C0__GUID-07015741-8BC5-4624-9FD0-06190D50B61C">要启用重做日志文件的存档：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>将Oracle Recovery Manager（RMAN） <span class="q"><a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">连接到</a></span>目标数据库，如<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">使用RMAN连接到目标数据库</a> ” <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="要执行备份或恢复操作或配置备份和恢复设置，必须启动Oracle Recovery Manager（RMAN）客户端并连接到目标数据库。">中所述</a> 。</span></span></li>
                           <li class="stepexpand"><span>关闭数据库。</span><div><pre class="oac_no_warn" dir="ltr">立即关闭;</pre></div>
                           </li>
                           <li class="stepexpand"><span>备份数据库。</span><div>
                                 <p>建议您在对数据库进行任何重大更改之前始终备份数据库。</p>
                                 <p>请参阅<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-E6AB87FC-DE6E-433C-AB61-F2055B6CC547" title="数据库的整个备份包括数据库的所有数据文件的完整内容，以及控制文件，归档重做日志文件和服务器参数文件。使用这些文件，您可以执行完整的恢复。">执行整个数据库备份”</a> 。</span></p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>启动实例并装入数据库（不要打开数据库）。要启用存档，必须装入数据库但不能打开。</span><div><pre class="oac_no_warn" dir="ltr">启动安装;</pre></div>
                           </li>
                           <li class="stepexpand"><span>输入以下命令以设置第一个存档日志文件目标：</span><div><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET LOG_ARCHIVE_DEST_1 ='LOCATION = / u02 / oracle / logfiles';</pre><div class="infoboxnote" id="GUID-16741F21-B0A4-4408-9A9D-75A87C7EF7C0__GUID-0A281760-8CB8-4E03-81CC-863D9E24CEA5">
                                    <p class="notep1">注意：</p>
                                    <p>该目录必须存在。</p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>（可选）输入以下命令以设置第二个存档日志文件目标：</span><div><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET LOG_ARCHIVE_DEST_2 ='LOCATION = / u03 / oracle / logfiles';</pre></div>
                           </li>
                           <li class="stepexpand"><span>更改数据库归档模式，然后打开数据库以进行正常操作。</span><div><pre class="oac_no_warn" dir="ltr">ALTER DATABASE ARCHIVELOG; ALTER DATABASE OPEN;</pre></div>
                           </li>
                           <li class="stepexpand"><span>关闭数据库。</span><div><pre class="oac_no_warn" dir="ltr">立即关闭;</pre></div>
                           </li>
                           <li class="stepexpand"><span>备份数据库。</span><div>
                                 <p>由于更改存档模式会更新控制文件，因此建议您创建新备份。</p>
                                 <p>请参阅<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-E6AB87FC-DE6E-433C-AB61-F2055B6CC547" title="数据库的整个备份包括数据库的所有数据文件的完整内容，以及控制文件，归档重做日志文件和服务器参数文件。使用这些文件，您可以执行完整的恢复。">执行整个数据库备份”</a> 。</span></p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>正常启动数据库。</span><div><pre class="oac_no_warn" dir="ltr">启动;</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnote" id="GUID-16741F21-B0A4-4408-9A9D-75A87C7EF7C0__GUID-5A5F4B60-03B4-4D93-A63F-FAC2C218D39D">
                              <p class="notep1">注意：</p>
                              <p>在切换到<code class="codeph">ARCHIVELOG</code>模式<span class="italic">之前</span> ，您无法使用备份将数据库还原并恢复到切换<span class="italic">后</span>的某个时间点。因此，如果切换后没有<span class="italic">立即</span>进行备份，那么您运行的数据库没有有效的备份。请参阅<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-1F8297CD-CFD9-4BD0-8014-78FA147175B9" title="Oracle Recovery Manager（RMAN）使您可以执行备份策略所需的不同类型的备份。本节讨论创建整个数据库备份。">使用RMAN执行和计划备份</a> ”</span>以了解如何进行数据库备份。
                              </p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-16741F21-B0A4-4408-9A9D-75A87C7EF7C0__GUID-2B0C78F8-1487-4316-988C-A2B1999D4BEE">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>有关为归档日志文件目标设置初始化参数的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=ADMIN00801" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="performing-backup-and-recovery.html#GUID-CBC5870F-2C9A-4F67-B5E9-D65049AD1E8E" title="如果还原存档的重做日志文件和数据文件，则必须先执行介质恢复，然后才能打开数据库。">媒体恢复</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="monitoring-and-tuning-the-database.html#GUID-002351F6-5C0A-411B-9E1E-869878AC16A1" title="Database Home页面使您可以监视数据库的状态和工作负载。它为一般数据库状态信息提供了一个中心位置，并定期更新。">监视常规数据库状态和工作负载</a> ”</span>以获取有关警报日志的信息</p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADMQS12434"></a><a id="ADMQS12433"></a><div class="props_rev_3"><a id="GUID-2598AA28-DBBB-4B40-AABC-B28FB5C5F4BE" name="GUID-2598AA28-DBBB-4B40-AABC-B28FB5C5F4BE"></a><h5 id="ADMQS-GUID-2598AA28-DBBB-4B40-AABC-B28FB5C5F4BE" class="sect5"><span class="enumeration_section">9.3.4.3</span>启用闪回数据库</h5>
                     <div>
                        <div class="section">
                           <p>要将整个数据库还原到先前的某个时间点，您可以通过还原备份和执行时间点恢复将整个数据库还原到先前的某个时间点，也可以启用闪回数据库。启用闪回数据库时，数据库会在快速恢复区域中生成闪回日志。这些日志用于将数据库闪回到指定的时间。在正常操作期间，数据库偶尔会将数据块的映像记录到闪回日志中。数据库自动创建，删除和调整闪回日志的大小。</p>
                           <p>使用以下命令检查是否为目标数据库启用了闪回数据库：</p><pre class="oac_no_warn" dir="ltr">从V $ DATABASE中选择FLASHBACK_ON;</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-2598AA28-DBBB-4B40-AABC-B28FB5C5F4BE__GUID-7D90B358-68D2-496D-96F0-321FB7854F19">要启用闪回数据库：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>确保配置快速恢复区域并且数据库正在<code class="codeph">ARCHIVELOG</code>模式下运行。</span></li>
                           <li class="stepexpand"><span>将Oracle Recovery Manager（RMAN） <span class="q"><a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">连接到</a></span>目标数据库，如<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">使用RMAN连接到目标数据库</a> ” <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="要执行备份或恢复操作或配置备份和恢复设置，必须启动Oracle Recovery Manager（RMAN）客户端并连接到目标数据库。">中所述</a> 。</span></span></li>
                           <li class="stepexpand"><span>（可选）通过设置<code class="codeph">DB_FLASHBACK_RETENTION_TARGET</code>初始化参数，指定所需闪回窗口的长度（以分钟为单位）。</span><div>
                                 <p>此参数的默认值为1440分钟，即一天。以下命令指定闪回窗口必须为3天。</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET DB_FLASHBACK_RETENTION_TARGET = 4320;</pre></div>
                           </li>
                           <li class="stepexpand"><span>使用以下命令为整个数据库启用闪回数据库功能：</span><div><pre class="oac_no_warn" dir="ltr">ALTER DATABASE FLASHBACK ON;</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>您还可以使用SQL * Plus而不是RMAN连接到目标数据库来执行本节中的命令。</p>
                           <div class="infoboxnotealso" id="GUID-2598AA28-DBBB-4B40-AABC-B28FB5C5F4BE__GUID-50FF51A4-C0B0-4991-9122-55C719E87F45">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="performing-backup-and-recovery.html#GUID-D6A541BF-A878-4B45-AFAC-1E921554731E">配置快速恢复区</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="performing-backup-and-recovery.html#GUID-16741F21-B0A4-4408-9A9D-75A87C7EF7C0">启用重做日志文件的存档</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="performing-backup-and-recovery.html#GUID-5CC5F46F-2D15-4333-BC1A-2626046EA488" title="与其他闪回功能不同，Oracle闪回数据库在物理级别上运行。使用闪回数据库时，您当前的数据文件将在以前恢复为其内容。">使用Oracle闪回数据库重绕数据库</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p>有关配置快速恢复区域的更多详细信息，请参见<a href="../bradv/configuring-rman-client-basic.html#BRADV8183" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADMQS0925"></a><div class="props_rev_3"><a id="GUID-7A2DBE07-0CF7-45AB-A946-0DB44BD762E3" name="GUID-7A2DBE07-0CF7-45AB-A946-0DB44BD762E3"></a><h4 id="ADMQS-GUID-7A2DBE07-0CF7-45AB-A946-0DB44BD762E3" class="sect4"><span class="enumeration_section">9.3.5</span>配置备份设置</h4>
                  <div>
                     <div><span>您可以配置多个与备份相关的设置和策略。</span> 例如，您可以确定备份的存储方式，备份的数据以及备份的保留时间。您还可以配置设置以优化备份性能。
                     </div>
                     <p>本节包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-8C2055DE-7CB2-456E-AE1F-7DE8272045F1" title="对于基于磁盘的备份，您可以配置备份的默认格式，存储备份的磁盘上的位置，备份任务是否并行运行以及是否压缩备份。">配置备份设备设置</a></p>
                        </li>
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-48AD8DE1-B7F4-4909-939E-A0951C118AE8" title="您可以设置管理控制文件和服务器参数文件备份的备份策略，要从整个数据库备份中排除的表空间以及备份保留策略。">配置备份策略设置</a></p>
                        </li>
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-4A49D85C-1AD7-4288-B748-D9DCCB08F603" title="您可以将Oracle Recovery Manager（RMAN）配置为在每次备份时自动备份控制文件和服务器参数文件。">配置控制文件和服务器参数文件的自动备份</a></p>
                        </li>
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-3BAA0D48-CA35-4CD7-810E-50C703DC6FEB" title="块更改跟踪通过在块更改跟踪文件中记录更改的块来提高增量备份的性能。">启用块更改跟踪</a></p>
                        </li>
                     </ul>
                  </div><a id="ADMQS12220"></a><a id="ADMQS09255"></a><div class="props_rev_3"><a id="GUID-8C2055DE-7CB2-456E-AE1F-7DE8272045F1" name="GUID-8C2055DE-7CB2-456E-AE1F-7DE8272045F1"></a><h5 id="ADMQS-GUID-8C2055DE-7CB2-456E-AE1F-7DE8272045F1" class="sect5"><span class="enumeration_section">9.3.5.1</span>配置备份设备设置</h5>
                     <div>
                        <p>对于基于磁盘的备份，您可以配置备份的默认格式，存储备份的磁盘上的位置，备份任务是否并行运行以及是否压缩备份。</p>
                        <div class="section">
                           <p>对于磁带备份，您可以配置磁带机数量以及是否压缩备份等设置。在大多数平台上，必须将介质管理器与Oracle数据库集成，以使用顺序介质进行存储。</p>
                           <p>您可以将支持数据库和文件系统备份的Oracle Secure Backup用作磁带，作为媒体管理器。Oracle Secure Backup为Oracle Recovery Manager（RMAN）提供与其他第三方SBT接口相同的服务。本节假定您只进行磁盘备份。</p>
                           <p>使用RMAN <code class="codeph">CONFIGURE</code>命令配置备份设备设置，例如默认备份类型，备份数据库文件的磁盘位置以及并行性。使用RMAN <code class="codeph">SHOW ALL</code>命令查看当前配置的设置。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-8C2055DE-7CB2-456E-AE1F-7DE8272045F1__GUID-B8312042-FA42-4B2D-B273-648DDBC84C26">配置备份设备设置：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>按照<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="要执行备份或恢复操作或配置备份和恢复设置，必须启动Oracle Recovery Manager（RMAN）客户端并连接到目标数据库。">使用RMAN连接到目标数据库”中的说明将RMAN连接到目标数据库</a> 。</span></span></li>
                           <li class="stepexpand"><span>指定用于存储备份的默认设备是磁盘。以下命令指示RMAN将备份存储到磁盘。</span><div><pre class="oac_no_warn" dir="ltr">配置默认设备类型磁盘;</pre></div>
                           </li>
                           <li class="stepexpand"><span>指定备份必须以备份集的形式存储在磁盘上。同时将并行度设置为1。</span><div><pre class="oac_no_warn" dir="ltr">配置设备类型磁盘备份类型为BACKUPSET PARALLELISM 1;</pre><p>磁盘上的备份可以以备份集或映像副本的形式存储。映像副本是数据库文件的精确副本。它们不以RMAN特定格式存储，可以按原样用于执行恢复。备份集使用特定于RMAN的格式。对于备份集，RMAN使用未使用的块压缩来通过仅备份包含数据的块来节省空间。RMAN还可以加密备份并创建增量备份。</p>
                              </div>
                           </li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-8C2055DE-7CB2-456E-AE1F-7DE8272045F1__GUID-0CE1C350-BD9E-44E9-B2C9-4215E394056D">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>有关映像副本和备份集的详细信息<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV002" target="_blank"><span><cite>，请参见“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                                 </li>
                                 <li>
                                    <p>有关将磁带设置为默认设备的信息<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV132" target="_blank"><span><cite>，请参见“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADMQS12221"></a><a id="ADMQS09252"></a><div class="props_rev_3"><a id="GUID-48AD8DE1-B7F4-4909-939E-A0951C118AE8" name="GUID-48AD8DE1-B7F4-4909-939E-A0951C118AE8"></a><h5 id="ADMQS-GUID-48AD8DE1-B7F4-4909-939E-A0951C118AE8" class="sect5"><span class="enumeration_section">9.3.5.2</span>配置备份策略设置</h5>
                     <div>
                        <p>您可以设置管理控制文件和服务器参数文件备份的备份策略，要从整个数据库备份中排除的表空间以及备份保留策略。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-48AD8DE1-B7F4-4909-939E-A0951C118AE8__GUID-A1B1CFAC-E6A2-4D34-928D-3527DDF402E1">配置备份策略设置：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>将Oracle Recovery Manager（RMAN） <span class="q"><a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">连接到</a></span>目标数据库，如<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">使用RMAN连接到目标数据库</a> ” <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="要执行备份或恢复操作或配置备份和恢复设置，必须启动Oracle Recovery Manager（RMAN）客户端并连接到目标数据库。">中所述</a> 。</span></span></li>
                           <li class="stepexpand"><span>配置RMAN以自动备份控制文件和服务器参数，如<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-4A49D85C-1AD7-4288-B748-D9DCCB08F603" title="您可以将Oracle Recovery Manager（RMAN）配置为在每次备份时自动备份控制文件和服务器参数文件。">配置控制文件和服务器参数文件的自动备份</a> ”中所述</span> 。</span></li>
                           <li class="stepexpand"><span>配置备份优化以节省快速恢复区域的空间。优化排除以前备份的未更改文件，例如只读文件和脱机数据文件。</span><div><pre class="oac_no_warn" dir="ltr">配置备份优化;</pre></div>
                           </li>
                           <li class="stepexpand"><span>配置保留策略以指定必须为介质恢复保留备份和归档重做日志的时间。</span><div>
                                 <p>以下命令指定备份和归档日志必须保留31天。</p><pre class="oac_no_warn" dir="ltr">配置保留政策，以恢复31天的窗口;</pre></div>
                           </li>
                           <li class="stepexpand"><span>指定仅当已归档日志已备份到磁带或基于保留策略已过时时，可以使用以下命令自动删除归档日志。</span><div><pre class="oac_no_warn" dir="ltr">配置ARCHIVELOG删除政策无效;</pre></div>
                           </li>
                           <li class="stepexpand"><span>启用块更改跟踪，如<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-3BAA0D48-CA35-4CD7-810E-50C703DC6FEB" title="块更改跟踪通过在块更改跟踪文件中记录更改的块来提高增量备份的性能。">启用块更改跟踪</a> ”中所述</span> 。</span></li>
                           <li class="stepexpand"><span>（可选）指定必须从备份中排除的表空间。</span><div>
                                 <p>从备份中排除某些表空间（如只读表空间或包含临时或测试数据的表空间）可以节省空间。</p>
                                 <p>以下命令从备份中排除表空间<code class="codeph">example</code> 。
                                 </p><pre class="oac_no_warn" dir="ltr">配置排除TABLESPACE示例;</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-48AD8DE1-B7F4-4909-939E-A0951C118AE8__GUID-2488B91E-ED1C-4CB0-AE12-C5D806D78A7C">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV8400" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”，</cite></span></a>以获取有关配置保留策略的其他方法的信息</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADMQS12436"></a><a id="ADMQS12435"></a><div class="props_rev_3"><a id="GUID-4A49D85C-1AD7-4288-B748-D9DCCB08F603" name="GUID-4A49D85C-1AD7-4288-B748-D9DCCB08F603"></a><h5 id="ADMQS-GUID-4A49D85C-1AD7-4288-B748-D9DCCB08F603" class="sect5"><span class="enumeration_section">9.3.5.3</span>配置控制文件和服务器参数文件的自动备份</h5>
                     <div>
                        <div><span>您可以将Oracle Recovery Manager（RMAN）配置为在每次备份时自动备份控制文件和服务器参数文件。</span> 这称为<span class="bold">自动备份</span> 。服务器参数文件和控制文件对数据库和RMAN至关重要。即使当前控制文件和服务器参数文件丢失，创建控制文件的自动备份也可使RMAN恢复数据库。与典型的数据文件相比，控制文件和服务器参数文件相对较小，因此，频繁备份它们会导致相对较少的存储开销。
                        </div>
                        <div class="section">
                           <p><a id="d37040e2829" class="indexterm-anchor"></a></p>
                           <p>如果数据库以<code class="codeph">ARCHIVELOG</code>模式运行，则只要控制文件中的数据库结构元数据发生更改，也会执行自动备份。
                           </p>
                           <div class="infoboxnote" id="GUID-4A49D85C-1AD7-4288-B748-D9DCCB08F603__GUID-6DB6E232-535C-4856-BDBC-64AB4E45C4C7">
                              <p class="notep1">注意：</p>
                              <p>对于多租户容器数据库（CDB），默认情况下会执行控制文件和服务器参数文件自动备份。</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-4A49D85C-1AD7-4288-B748-D9DCCB08F603__GUID-460C8D86-15D6-4333-8D26-60E683E20E68">要为控制文件和服务器参数文件配置自动备份：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>按照<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="要执行备份或恢复操作或配置备份和恢复设置，必须启动Oracle Recovery Manager（RMAN）客户端并连接到目标数据库。">使用RMAN连接到目标数据库”中的说明将RMAN连接到目标数据库</a> 。</span></span></li>
                           <li class="stepexpand"><span>输入以下命令：</span><div><pre class="oac_no_warn" dir="ltr">配置CONTROLFILE AUTOBACKUP ON;</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>RMAN使用默认格式为这些备份分配名称。</p>
                           <div class="infoboxnotealso" id="GUID-4A49D85C-1AD7-4288-B748-D9DCCB08F603__GUID-5E5C74DF-6A67-4D18-81BE-7178F25861FB">
                              <p class="notep1">也可以看看：</p>
                              <p>有关配置备份格式的详细信息<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV89352" target="_blank"><span><cite>，请参见“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADMQS12438"></a><a id="ADMQS12437"></a><div class="props_rev_3"><a id="GUID-3BAA0D48-CA35-4CD7-810E-50C703DC6FEB" name="GUID-3BAA0D48-CA35-4CD7-810E-50C703DC6FEB"></a><h5 id="ADMQS-GUID-3BAA0D48-CA35-4CD7-810E-50C703DC6FEB" class="sect5"><span class="enumeration_section">9.3.5.4</span>启用块更改跟踪</h5>
                     <div>
                        <div><span>块更改跟踪通过在块更改跟踪文件中记录更改的块来提高增量备份的性能。</span> 在增量备份期间，RMAN不使用扫描所有数据块来识别哪些块已更改，而是使用此文件来标识需要备份的已更改块。
                        </div>
                        <div class="section">
                           <p>您可以在打开或装入数据库时启用块更改跟踪。本节假定您打算在数据库区域中创建块更改跟踪文件作为Oracle托管文件，这是数据库维护活动数据库文件（如数据文件，控制文件和联机重做日志文件）的位置。</p>
                           <p>要确定是否启用了块更改跟踪，请使用SQL或RMAN提示符中的以下语句检查<code class="codeph">V$BLOCK_CHANGE_TRACKING</code>视图中的<code class="codeph">STATUS</code>和<code class="codeph">FILENAME</code>列：</p><pre class="oac_no_warn" dir="ltr"><code class="codeph">SELECT状态，文件名FROM V $ BLOCK_CHANGE_TRACKING;</code>
</pre></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-3BAA0D48-CA35-4CD7-810E-50C703DC6FEB__GUID-9685884E-D6CE-40B8-9C4F-05F8882B0850">要启用块更改跟踪：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>按照<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="要执行备份或恢复操作或配置备份和恢复设置，必须启动Oracle Recovery Manager（RMAN）客户端并连接到目标数据库。">使用RMAN连接到目标数据库”中的说明将RMAN连接到目标数据库</a> 。</span></span></li>
                           <li class="stepexpand"><span>通过提交以下查询来确定数据库数据文件的当前位置：</span><div><pre class="oac_no_warn" dir="ltr">RMAN&gt;从V $ DATAFILE中选择名称; NAME ----------------------------------------------- / u01 /app/oracle/oradata/orcl/system01.dbf /u01/app/oracle/oradata/orcl/example01.dbf /u01/app/oracle/oradata/orcl/sysaux01.dbf / u01 / app / oracle / oradata / orcl /undotbs01.dbf /u01/app/oracle/oradata/orcl/users01.dbf</pre><p>在此示例中，查询结果显示数据文件存储在文件系统的/ u01 / app / oracle / oradata / orcl目录中。数据文件也可能存储在Oracle自动存储管理磁盘组中。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>设置<code class="codeph">DB_CREATE_FILE_DEST</code>初始化参数以指定必须存储新数据库文件（包括块更改跟踪文件）的位置。您可以指定上一步中查询结果中显示的同一目录，路径的最后部分 - 数据库SID剥离，如以下示例所示，或指定新目录。您指定的任何目录都必须具有Oracle软件所有者的写入权限。</span><div>
                                 <p>以下命令指定必须将新数据库文件存储在目录/ u01 / app / oracle / oradata /中：</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET DB_CREATE_FILE_DEST ='/ u01 / app / oracle / oradata';</pre></div>
                           </li>
                           <li class="stepexpand"><span>使用以下命令为数据库启用块更改跟踪：</span><div><pre class="oac_no_warn" dir="ltr">ALTER DATABASE ENABLE BLOCK CHANGE TRACKING;</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-3BAA0D48-CA35-4CD7-810E-50C703DC6FEB__GUID-39F4BB8D-A364-48C2-A69C-7BACBB9C04AA">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>有关<code class="codeph">V$BLOCK_CHANGE_TRACKING</code>视图的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=REFRN30030" target="_blank"><span><cite>参见Oracle数据库参考</cite></span></a> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>有关<code class="codeph">DB_CREATE_FILE_DEST</code>初始化参数的详细信息，请<code class="codeph">DB_CREATE_FILE_DEST</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=REFRN10034" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="ADMQS093"></a><div class="props_rev_3"><a id="GUID-1756BA1F-677B-4E81-BA79-06BBE3E3A692" name="GUID-1756BA1F-677B-4E81-BA79-06BBE3E3A692"></a><h3 id="ADMQS-GUID-1756BA1F-677B-4E81-BA79-06BBE3E3A692" class="sect3"><span class="enumeration_section">9.4</span>备份数据库</h3>
               <div>
                  <div><span>本节介绍如何使用Oracle Recovery Manager（RMAN）备份数据库。Oracle建议的仅磁盘备份策略可以提供有效的数据库日常备份。</span> 此策略使您可以在过去24小时内的任何时刻快速将数据库返回到其状态。有关更灵活的备份选项，请参阅“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV89341" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南”</span></a> 。
                  </div>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-5CDE633A-D0EA-4E45-8902-05C891887F82" title="本节包括有关增量更新的备份和备份标记的主题。">其他备份概念</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-1F8297CD-CFD9-4BD0-8014-78FA147175B9" title="Oracle Recovery Manager（RMAN）使您可以执行备份策略所需的不同类型的备份。本节讨论创建整个数据库备份。">使用RMAN执行和计划备份</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-94B0AF4B-D5BC-40B5-AA14-E4527009BE0A" title="使用LIST命令查看有关存储在Oracle Recovery Manager（RMAN）存储库中的备份的信息。">显示存储在RMAN存储库中的备份</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-50E7B6A0-6324-4AD6-98E4-3F60E42EE019" title="作为备份策略的一部分，您应定期检查备份是否完好，并可用于满足可恢复性目标。">验证备份并测试备份策略</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-1756BA1F-677B-4E81-BA79-06BBE3E3A692__GUID-5DD8E7BA-4685-425D-B0C9-53AB27CB784F">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="performing-backup-and-recovery.html#GUID-63D2C33B-49F3-4364-AC01-08C9440A93FC" title="备份数据库意味着复制数据文件，控制文件和归档重做日志文件（如果数据库在ARCHIVELOG模式下运行）。还原数据库意味着将组成数据库的物理文件从备份介质（通常是磁盘或磁带）复制到其原始位置或新位置。">数据库备份和恢复概念</a> ”</span></p>
                  </div>
               </div><a id="ADMQS0931"></a><div class="props_rev_3"><a id="GUID-5CDE633A-D0EA-4E45-8902-05C891887F82" name="GUID-5CDE633A-D0EA-4E45-8902-05C891887F82"></a><h4 id="ADMQS-GUID-5CDE633A-D0EA-4E45-8902-05C891887F82" class="sect4"><span class="enumeration_section">9.4.1</span>其他备份概念</h4>
                  <div>
                     <p>本节包括有关增量更新的备份和备份标记的主题。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-939FF149-01ED-4C18-B223-026F4AF18137" title="Oracle Recovery Manager（RMAN）使您可以将1级增量备份应用于数据文件的旧映像副本。您可以将副本前滚到最新的1级增量备份的时间点。">增量更新备份：前滚数据文件的映像副本</a></p>
                        </li>
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-B101B981-CD73-449A-A801-F17174B7A90F" title="标记是一个文本字符串，用于标识备份，可以是唯一的，也可以是一组备份的一部分。">备份标签</a></p>
                        </li>
                     </ul>
                  </div><a id="ADMQS09313"></a><div class="props_rev_3"><a id="GUID-939FF149-01ED-4C18-B223-026F4AF18137" name="GUID-939FF149-01ED-4C18-B223-026F4AF18137"></a><h5 id="ADMQS-GUID-939FF149-01ED-4C18-B223-026F4AF18137" class="sect5"><span class="enumeration_section">9.4.1.1</span>增量更新备份：前滚数据文件的映像副本</h5>
                     <div>
                        <div><span>Oracle Recovery Manager（RMAN）使您可以将1级增量备份应用于数据文件的旧映像副本。您可以将副本前滚到最新的1级增量备份的时间点。</span> 自创建映像副本以来更改的所有块都将在最后一级增量备份时覆盖其新内容。其结果是及时前滚文件，以便其内容在数据库恢复时等效于上次增量级别1备份时生成的数据文件的映像副本。
                        </div>
                        <p>将增量更新的备份合并到备份策略中可缩短预期的恢复时间。媒体恢复到当前时间或最近的某个时间点可以在应用最后一级备份时开始，而不是在上次完整数据库备份时开始。</p>
                        <div class="infoboxnotealso" id="GUID-939FF149-01ED-4C18-B223-026F4AF18137__GUID-FF88347B-2F12-4595-BD8C-F3B513F752FF">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="performing-backup-and-recovery.html#GUID-D77B0526-13F6-4570-9C74-6436B76DEA43" title="Oracle建议的备份策略基于增量更新的备份。此策略从每个数据文件的映像副本开始，然后通过应用增量级别1备份每天前滚映像副本。要使用Oracle建议的备份策略，请确保：此备份脚本实施Oracle建议的备份策略，以便在前24小时内的任何时间快速恢复。此脚本可用于备份非CDB或整个多租户容器数据库（CDB）。建议您在安排脚本之前手动运行脚本以检查错误。您手动运行脚本将从策略的第一天开始，创建所有数据文件的增量级别0映像副本。以下过程使用cron实用程序在凌晨2:00安排每日数据库备份">使用Oracle建议的备份策略</a> ”</span></p>
                        </div>
                     </div>
                  </div><a id="ADMQS09314"></a><div class="props_rev_3"><a id="GUID-B101B981-CD73-449A-A801-F17174B7A90F" name="GUID-B101B981-CD73-449A-A801-F17174B7A90F"></a><h5 id="ADMQS-GUID-B101B981-CD73-449A-A801-F17174B7A90F" class="sect5"><span class="enumeration_section">9.4.1.2</span>备份标签</h5>
                     <div>
                        <div><span><span class="bold">标记</span>是一个文本字符串，用于标识备份，可以是唯一的，也可以是一组备份的一部分。</span> 所有Oracle Recovery Manager（RMAN）备份（包括增量备份）都标有标记。例如，如果您每周六执行完整数据库备份，则可以使用标记<code class="codeph">FULL_SAT</code>来标识此备份。
                        </div>
                        <p>您可以使用标记来引用RMAN命令中的特定备份。例如，您可以发出命令将最新的<code class="codeph">FULL_SAT</code>备份移动到磁带。如果未指定标记，则RMAN会自动创建唯一标记。
                        </p>
                        <p>由于您可以使用标记来引用不同的备份组，因此您可以在备份策略中创建不会相互干扰的不同例程。在计划备份作业并为作业命名时，作业名称是标记。</p>
                     </div>
                  </div>
               </div><a id="ADMQS0932"></a><div class="props_rev_3"><a id="GUID-1F8297CD-CFD9-4BD0-8014-78FA147175B9" name="GUID-1F8297CD-CFD9-4BD0-8014-78FA147175B9"></a><h4 id="ADMQS-GUID-1F8297CD-CFD9-4BD0-8014-78FA147175B9" class="sect4"><span class="enumeration_section">9.4.2</span>使用RMAN执行和计划备份</h4>
                  <div>
                     <p>Oracle Recovery Manager（RMAN）使您可以执行备份策略所需的不同类型的备份。本节讨论创建整个数据库备份。</p>
                     <p>您还可以单独备份数据文件，控制文件和归档重做日志文件。您可以使用一些高级RMAN功能，例如加密备份。有关这些主题的更多信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV8003" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南”</cite></span></a> 。
                     </p>
                     <div class="infoboxnotealso" id="GUID-1F8297CD-CFD9-4BD0-8014-78FA147175B9__GUID-422C8AB5-50FB-4439-B033-16E68198CC44">
                        <p class="notep1">也可以看看：</p>
                        <p>有关备份多租户容器数据库（CDB）和可插拔数据库（PDB）的信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV428" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                     </div>
                     <p>本节包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-E6AB87FC-DE6E-433C-AB61-F2055B6CC547" title="数据库的整个备份包括数据库的所有数据文件的完整内容，以及控制文件，归档重做日志文件和服务器参数文件。使用这些文件，您可以执行完整的恢复。">执行整个数据库备份</a></p>
                        </li>
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-D77B0526-13F6-4570-9C74-6436B76DEA43" title="Oracle建议的备份策略基于增量更新的备份。此策略从每个数据文件的映像副本开始，然后通过应用增量级别1备份每天前滚映像副本。要使用Oracle建议的备份策略，请确保：此备份脚本实施Oracle建议的备份策略，以便在前24小时内的任何时间快速恢复。此脚本可用于备份非CDB或整个多租户容器数据库（CDB）。建议您在安排脚本之前手动运行脚本以检查错误。您手动运行脚本将从策略的第一天开始，创建所有数据文件的增量级别0映像副本。以下过程使用cron实用程序在凌晨2:00安排每日数据库备份">使用Oracle建议的备份策略</a></p>
                        </li>
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-FBF51D7D-6BF2-42E0-A822-CC565A4B7549" title="使用Oracle建议的备份策略时，保留时间取决于恢复，而不是配置的保留。">关于Oracle建议的备份策略和保留</a></p>
                        </li>
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-8DC44B9E-C6CE-4E04-8C62-6AF3CB503D9E" title="自定义策略包括备份选定的表空间，数据文件和归档重做日志。创建一个脚本，其中包含实现自定义备份任务所需的命令，然后使用cron实用程序计划此备份任务。">安排其他备份任务</a></p>
                        </li>
                     </ul>
                  </div><a id="ADMQS12222"></a><a id="ADMQS12223"></a><a id="ADMQS09321"></a><div class="props_rev_3"><a id="GUID-E6AB87FC-DE6E-433C-AB61-F2055B6CC547" name="GUID-E6AB87FC-DE6E-433C-AB61-F2055B6CC547"></a><h5 id="ADMQS-GUID-E6AB87FC-DE6E-433C-AB61-F2055B6CC547" class="sect5"><span class="enumeration_section">9.4.2.1</span>执行整个数据库备份</h5>
                     <div>
                        <p>数据库的整个备份包括数据库的所有数据文件的完整内容，以及控制文件，归档重做日志文件和服务器参数文件。使用这些文件，您可以执行完整的恢复。</p>
                        <div class="section">
                           <p>虽然整个数据库备份可能是整个备份策略中的一个重要元素，但在某些情况下它们也是必需的步骤，例如启用或禁用<code class="codeph">ARCHIVELOG</code>模式时（请参阅<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-192720EF-64C7-465B-982A-F8AABFD81DC1">配置恢复设置</a> ”</span> ）。本节介绍如何将整个数据库备份（脱机和联机）备份到磁盘。通常，您希望执行联机备份以最大化数据库可用性。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-E6AB87FC-DE6E-433C-AB61-F2055B6CC547__GUID-007D3A58-8B57-40E9-883C-1BF99A661FAD">在数据库打开时执行整个数据库备份：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ol>
                              <li>
                                 <p>按照<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="要执行备份或恢复操作或配置备份和恢复设置，必须启动Oracle Recovery Manager（RMAN）客户端并连接到目标数据库。">使用RMAN连接到目标数据库”中的说明将RMAN连接到目标数据库</a> 。</span></p>
                              </li>
                              <li>
                                 <p>确保数据库处于<code class="codeph">ARCHIVELOG</code>模式，如<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-16741F21-B0A4-4408-9A9D-75A87C7EF7C0">启用重做日志文件存档</a> ”中</span>所述<span class="q">。</span></p>
                                 <p>仅当数据库在<code class="codeph">ARCHIVELOG</code>模式下运行时，才能进行联机备份。
                                 </p>
                              </li>
                              <li>
                                 <p>使用以下命令备份数据库以及归档重做日志：</p><pre class="oac_no_warn" dir="ltr">BACKUP DATABASE PLUS ARCHIVELOG;</pre></li>
                           </ol>
                           <p>此备份是在您配置用于存储备份的默认设备上创建的。如果未配置默认设备，则会在快速恢复区域中创建备份。RMAN在命名组成备份的备份集时使用默认格式。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-E6AB87FC-DE6E-433C-AB61-F2055B6CC547__GUID-A858F994-A01D-4873-80A4-196E275CF54F">在数据库关闭时执行整个数据库备份：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>按照<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="要执行备份或恢复操作或配置备份和恢复设置，必须启动Oracle Recovery Manager（RMAN）客户端并连接到目标数据库。">使用RMAN连接到目标数据库”中的说明将RMAN连接到目标数据库</a> 。</span></span></li>
                           <li class="stepexpand"><span>关闭数据库，然后使用以下命令装入数据库。</span><div><pre class="oac_no_warn" dir="ltr">立即关闭;启动安装;</pre></div>
                           </li>
                           <li class="stepexpand"><span>使用以下命令备份数据库：</span><div><pre class="oac_no_warn" dir="ltr">备份数据库;</pre><p>备份已关闭的数据库时，无需备份存档的日志文件，因为数据库在备份时处于一致状态。因此，如果从此备份还原数据库，则无需进行介质恢复。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>备份完成后打开数据库。</span><div><pre class="oac_no_warn" dir="ltr">ALTER DATABASE OPEN;</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-E6AB87FC-DE6E-433C-AB61-F2055B6CC547__GUID-0161588C-74C8-4D2F-8B93-0A8DB21636B9">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV428" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”</cite></span></a> ，了解有关执行多租户容器数据库（CDB）和可插拔数据库（PDB）备份的信息</p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="performing-backup-and-recovery.html#GUID-C7CEE4AC-AFC9-4FE7-903E-4AB05DB923E3" title="备份报告包含有关Oracle Recovery Manager（RMAN）运行的过去备份作业的摘要和详细信息。">显示备份报告</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="performing-backup-and-recovery.html#GUID-EA0666F4-0EB0-4EB5-AD4C-24F77A64CE9D" title="要简化备份和恢复文件的管理，可以为数据库创建快速恢复区域。快速恢复区域是Oracle管理的目录，文件系统或Oracle自动存储管理磁盘组，可为备份和恢复文件提供集中存储位置。">快速恢复区</a> ”</span></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADMQS09322"></a><div class="props_rev_3"><a id="GUID-D77B0526-13F6-4570-9C74-6436B76DEA43" name="GUID-D77B0526-13F6-4570-9C74-6436B76DEA43"></a><h5 id="ADMQS-GUID-D77B0526-13F6-4570-9C74-6436B76DEA43" class="sect5"><span class="enumeration_section">9.4.2.2</span>使用Oracle建议的备份策略</h5>
                     <div>
                        <div class="section">
                           <p>Oracle建议的备份策略是一种计划的磁盘备份策略，可以保护您的数据，并为用户指定的恢复窗口（时间段）中的任何点提供有效的可恢复性。它利用增量更新的备份功能来提供比整个数据库备份更快的备份，并且比通过将多个增量备份应用于上次完整备份更快地实现可恢复性。</p>
                           <p>阅读介绍性的<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-6C74BAA8-9EE5-4446-AF92-F098BD19170A" title="Oracle建议的备份策略基于增量更新的备份。此策略从每个数据文件的映像副本开始，然后通过应用增量级别1备份每天前滚映像副本。">关于Oracle建议的备份策略</a> ”</span>主题后，请完成本节中描述的以下任务，以安排实现Oracle建议的备份策略的每日备份：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="performing-backup-and-recovery.html#GUID-15DFA81C-41A0-469E-AF85-43C434C6B1D1" title="要使用Oracle建议的备份策略，请确保：">任务1  - 准备使用Oracle建议的备份策略</a></p>
                              </li>
                              <li>
                                 <p><a href="performing-backup-and-recovery.html#GUID-7EF664B2-FD4E-439B-AD50-EAB5C1762C7D" title="此备份脚本实现了Oracle建议的备份策略，可以在之前的24小时内随时快速恢复。此脚本可用于备份非CDB或整个多租户容器数据库（CDB）。">任务2  - 创建备份脚本 -  UNIX和Linux</a></p>
                              </li>
                              <li>
                                 <p><a href="performing-backup-and-recovery.html#GUID-5C45D54D-B459-4449-B59C-D0213C024390" title="建议您在安排脚本之前手动运行脚本以检查错误。您手动运行脚本将从策略的第一天开始，创建所有数据文件的增量级别0映像副本。">任务3  - 测试备份脚本</a></p>
                              </li>
                              <li>
                                 <p><a href="performing-backup-and-recovery.html#GUID-D3CFC309-9F8B-4C48-B7EB-97EA66FE8315" title="以下过程使用cron实用程序在凌晨2:00安排每日数据库备份">任务4  - 安排每日备份 -  UNIX和Linux</a></p>
                              </li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-D77B0526-13F6-4570-9C74-6436B76DEA43__GUID-0C9180C0-7411-40E5-86DF-870A6D2CE271">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="performing-backup-and-recovery.html#GUID-939FF149-01ED-4C18-B223-026F4AF18137" title="Oracle Recovery Manager（RMAN）使您可以将1级增量备份应用于数据文件的旧映像副本。您可以将副本前滚到最新的1级增量备份的时间点。">增量更新备份：前滚数据文件的图像副本</a> ”</span></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div><a id="ADMQS12224"></a><div class="props_rev_3"><a id="GUID-6C74BAA8-9EE5-4446-AF92-F098BD19170A" name="GUID-6C74BAA8-9EE5-4446-AF92-F098BD19170A"></a><h6 id="ADMQS-GUID-6C74BAA8-9EE5-4446-AF92-F098BD19170A" class="sect6"><span class="enumeration_section">9.4.2.2.1</span>关于Oracle建议的备份策略</h6>
                        <div>
                           <p>Oracle建议的备份策略基于增量更新的备份。此策略从每个数据文件的映像副本开始，然后通过应用增量级别1备份每天前滚映像副本。</p>
                           <p>对于每个数据文件，策略都要求进行备份，如下所示：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>在策略的第1天开始时（第一个预定作业实际运行的时间），Oracle Recovery Manager（RMAN）创建增量级别0映像副本。它包含第1天开始时的数据文件内容。</p>
                                 <p>如果需要恢复，则可以使用从第1天开始的归档重做日志文件恢复到第1天的任何时间点。</p>
                              </li>
                              <li>
                                 <p>在第2天开始时，RMAN创建差异增量级别1备份，其中包含在第1天更改的块。</p>
                                 <p>如果需要恢复，则RMAN可以应用此增量级别1以将级别0备份前滚到第2天的开头。RMAN可以使用归档的重做日志文件在第2天恢复到任何点。</p>
                              </li>
                              <li>
                                 <p>在第3天及以后的每天<span class="italic">n</span>开始时，RMAN将第1级备份从第<span class="italic">n</span> -1天开始应用到0级备份。此操作将数据文件副本置于第<span class="italic">n</span> -1天开始时的状态。然后，RMAN创建一个新的1级备份，其中包含在第<span class="italic">n</span> -1天更改的块。
                                 </p>
                                 <p>如果需要恢复，则RMAN可以将此增量级别1备份应用于在第<span class="italic">n</span>天-1到第<span class="italic">n</span>天开始前滚的数据文件。RMAN可以使用归档的重做日志文件将数据库恢复到第<span class="italic">n</span>天的任何时间点。
                                 </p>
                              </li>
                           </ul>
                           <p>在此Oracle建议的备份策略中，数据文件映像副本和1级增量备份共享相同的标记。您可以安全地实施其他备份策略，而不会干扰Oracle建议的备份策略。</p>
                           <p>除了磁盘备份之外，Oracle建议的备份策略还使用磁带备份，但这些超出了本节的范围。</p>
                        </div>
                     </div><a id="ADMQS12439"></a><div class="props_rev_3"><a id="GUID-15DFA81C-41A0-469E-AF85-43C434C6B1D1" name="GUID-15DFA81C-41A0-469E-AF85-43C434C6B1D1"></a><h6 id="ADMQS-GUID-15DFA81C-41A0-469E-AF85-43C434C6B1D1" class="sect6"><span class="enumeration_section">9.4.2.2.2</span>任务1  - 准备使用Oracle建议的备份策略</h6>
                        <div>
                           <p>要使用Oracle建议的备份策略，请确保：</p>
                           <div class="section">
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>数据库处于<code class="codeph">ARCHIVELOG</code>模式。
                                    </p>
                                 </li>
                                 <li>
                                    <p>配置快速恢复区域大小，或配置用于存储备份的默认设备。</p>
                                 </li>
                                 <li>
                                    <p>您已将数据库主机用户添加到OSBACKUPDBA操作系统组，以进行操作系统身份验证。</p>
                                    <div class="infoboxnotealso" id="GUID-15DFA81C-41A0-469E-AF85-43C434C6B1D1__GUID-E9F19E3C-EAF4-4B8F-9C29-A5EB59D042B6">
                                       <p class="notep1">也可以看看：</p>
                                       <p><span class="q">“ <a href="performing-backup-and-recovery.html#GUID-292CD2F6-ECDC-4F94-B750-97DD2D526B22" title="本节介绍如何设置数据库以利用Oracle建议的备份策略。">配置数据库以进行基本备份和恢复</a> ”</span></p>
                                    </div>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="ADMQS12440"></a><div class="props_rev_3"><a id="GUID-7EF664B2-FD4E-439B-AD50-EAB5C1762C7D" name="GUID-7EF664B2-FD4E-439B-AD50-EAB5C1762C7D"></a><h6 id="ADMQS-GUID-7EF664B2-FD4E-439B-AD50-EAB5C1762C7D" class="sect6"><span class="enumeration_section">9.4.2.2.3</span>任务2  - 创建备份脚本 -  UNIX和Linux</h6>
                        <div>
                           <p>此备份脚本实现了Oracle建议的备份策略，可以在之前的24小时内随时快速恢复。此脚本可用于备份非CDB或整个多租户容器数据库（CDB）。</p>
                           <div class="section">
                              <p><span class="bold">要为UNIX和Linux创建备份脚本</span> ：</p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>启动文本编辑器，创建并保存包含以下内容的文件。将文件保存在Oracle数据库软件可访问且Oracle软件所有者具有读取权限的目录中。</p>
                                    <div class="infoboxnote" id="GUID-7EF664B2-FD4E-439B-AD50-EAB5C1762C7D__GUID-E6FC7183-16AB-4A9C-BDEC-454820F48A89">
                                       <p class="notep1">注意：</p>
                                       <p>在以下脚本中，将安装的正确值替换为<code class="codeph">ORACLE_HOME</code>和<code class="codeph">ORACLE_SID</code>环境变量。
                                       </p>
                                    </div><pre class="oac_no_warn" dir="ltr">＃！/ bin / sh export ORACLE_HOME = / u01 / app / oracle / product / 11.2.0 / dbhome_1 export ORACLE_SID = orcl PATH = $ ORACLE_HOME / bin：$ PATH rman &lt;&lt; EOF connect target / RUN {ALLOCATE CHANNEL disk_iub DEVICE TYPE DISK;使用TAG daily_iub恢复数据库的副本;备份增量级别1，用于恢复与TAG daily_iub数据库的复制;退出EOF</pre></li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="ADMQS12441"></a><div class="props_rev_3"><a id="GUID-5C45D54D-B459-4449-B59C-D0213C024390" name="GUID-5C45D54D-B459-4449-B59C-D0213C024390"></a><h6 id="ADMQS-GUID-5C45D54D-B459-4449-B59C-D0213C024390" class="sect6"><span class="enumeration_section">9.4.2.2.4</span>任务3  - 测试备份脚本</h6>
                        <div>
                           <p>建议您在安排脚本之前手动运行脚本以检查错误。您手动运行脚本将从策略的第一天开始，创建所有数据文件的增量级别0映像副本。</p>
                           <div class="section">
                              <p><span class="bold">要测试备份脚本</span> ：</p>
                           </div>
                           <!-- class="section" -->
                           <ol>
                              <li class="stepexpand"><span>以OSBACKUPDBA操作系统组（通常为<code class="codeph">backupdba</code>组）成员的用户身份登录数据库主机。</span></li>
                              <li class="stepexpand"><span>在命令窗口中，输入以下命令：</span><div><pre class="oac_no_warn" dir="ltr"><span class="italic">全脚本路径</span>
</pre><p>其中<span class="italic"><code class="codeph">full-script-path</code></span>是您在任务2中创建的脚本的完整路径和文件名。
                                    </p>
                                    <p>例如，如果您的脚本位于文件/u01/app/oracle/rman/daily_backup.sh中，请输入以下命令：</p><pre class="oac_no_warn" dir="ltr">/u01/app/oracle/rman/daily_backup.sh</pre></div>
                              </li>
                           </ol>
                           <div class="section">
                              <p>该脚本启动Oracle Recovery Manager（RMAN），启动备份。RMAN的输出包括类似于以下内容的警告消息：</p><pre class="oac_no_warn" dir="ltr">...发现没有数据文件1的副本恢复没有发现恢复的数据文件2的副本...没有找到数据文件1的父备份或副本没有找到数据文件2的父备份或副本...
</pre><p>这些消息对于第一次运行脚本是正常的。</p>
                              <div class="infoboxnote" id="GUID-5C45D54D-B459-4449-B59C-D0213C024390__GUID-B1FCF2CF-A40B-418D-9EE2-A7D099ECF594">
                                 <p class="notep1">注意：</p>
                                 <p>对于脚本的第二次运行，输出仅包含以下警告消息：</p><pre class="oac_no_warn" dir="ltr">发现没有数据文件1的副本恢复没有发现恢复的数据文件2的副本...
</pre><p>同样，这些消息是正常的。对于第三个和后续脚本运行，不会输出其他警告消息。</p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="ADMQS09325"></a><div class="props_rev_3"><a id="GUID-D3CFC309-9F8B-4C48-B7EB-97EA66FE8315" name="GUID-D3CFC309-9F8B-4C48-B7EB-97EA66FE8315"></a><h6 id="ADMQS-GUID-D3CFC309-9F8B-4C48-B7EB-97EA66FE8315" class="sect6"><span class="enumeration_section">9.4.2.2.5</span>任务4  - 安排每日备份 -  UNIX和Linux</h6>
                        <div>
                           <p>以下过程使用<code class="codeph">cron</code>实用程序在凌晨2:00安排每日数据库备份</p>
                           <div class="section">
                              <p><span class="bold">要安排Oracle建议的磁盘备份策略</span> ：</p>
                           </div>
                           <!-- class="section" -->
                           <ol>
                              <li class="stepexpand"><span>确保以作为OSBACKUPDBA操作系统组（通常是<code class="codeph">backupdba</code>组）成员的用户身份登录到数据库主机。</span><div>
                                    <p><code class="codeph">cron</code>作业将作为此主机用户运行。
                                    </p>
                                 </div>
                              </li>
                              <li class="stepexpand"><span>启动文本编辑器，创建包含以下内容的文件并将其保存到主目录中。将文件命名为.crontab。（注意文件名前面的句号。）</span><div><pre class="oac_no_warn" dir="ltr">MAILTO = first.last@example.com＃MI HH DD MM DAY CMD 00 2 * * * <span class="italic">全脚本路径</span>
</pre><p>其中<span class="italic"><code class="codeph">full-script-path</code></span>是您在任务2中创建的脚本的完整路径和文件名。
                                    </p>
                                    <p>例如，如果脚本位于文件/u01/app/oracle/rman/daily_backup.sh中，则.crontab文件必须包含：</p><pre class="oac_no_warn" dir="ltr">MAILTO = first.last@example.com＃MI HH DD MM DAY CMD 00 2 * * * /u01/app/oracle/rman/daily_backup.sh</pre><div class="infoboxnote" id="GUID-D3CFC309-9F8B-4C48-B7EB-97EA66FE8315__GUID-3D5A8BE7-83B4-4800-8806-F2374EE9109F">
                                       <p class="notep1">注意：</p>
                                       <p>在<code class="codeph">MAILTO</code>行中提供所需的电子邮件地址。这一行是可选的。<code class="codeph">cron</code>作业写入stdout的内容在作业完成时通过电子邮件发送到此地址。
                                       </p>
                                    </div>
                                 </div>
                              </li>
                              <li class="stepexpand"><span>在命令窗口中，将目录更改为主目录并输入以下命令：</span><div><pre class="oac_no_warn" dir="ltr">crontab .crontab</pre><p>这将从.crontab的内容为此用户创建crontab文件。</p>
                                    <div class="infoboxnote" id="GUID-D3CFC309-9F8B-4C48-B7EB-97EA66FE8315__GUID-503726AA-B91D-4D3F-94B2-E01C0CF89DF0">
                                       <p class="notep1">警告：</p>
                                       <p>此用户的现有crontab文件将被覆盖。如果要保留此文件的内容并添加此新作业，请使用此命令，以便编辑现有文件：</p><pre class="oac_no_warn" dir="ltr">crontab -e</pre></div>
                                 </div>
                              </li>
                              <li class="stepexpand"><span>（可选）使用以下命令检查此用户的crontab文件的内容：</span><div><pre class="oac_no_warn" dir="ltr">crontab -l MAILTO = first.last@example.com＃MI HH DD MM DAY CMD 00 2 * * * /u01/app/oracle/rman/daily_backup.sh</pre></div>
                              </li>
                           </ol>
                           <div class="section">
                              <div class="infoboxnotealso" id="GUID-D3CFC309-9F8B-4C48-B7EB-97EA66FE8315__GUID-3CD92BD5-27FF-483A-9917-D8EF8FE218DA">
                                 <p class="notep1">也可以看看：</p>
                                 <p>有关crontab命令和crontab文件的说明的操作系统文档</p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div><a id="ADMQS12468"></a><div class="props_rev_3"><a id="GUID-FBF51D7D-6BF2-42E0-A822-CC565A4B7549" name="GUID-FBF51D7D-6BF2-42E0-A822-CC565A4B7549"></a><h5 id="ADMQS-GUID-FBF51D7D-6BF2-42E0-A822-CC565A4B7549" class="sect5"><span class="enumeration_section">9.4.2.3</span>关于Oracle建议的备份策略和保留</h5>
                     <div>
                        <div><span>使用Oracle建议的备份策略时，保留时间取决于恢复，而不是配置的保留。</span> 为了保留超过24小时，您必须将RECOVER语句更改为：</div><pre class="oac_no_warn" dir="ltr">使用标记'ORA_OEM_LEVEL_0'恢复复制数据库，直到“SYSDATE-4”;</pre><p>保留或过时设置不支持配置的保留。因此，在使用Oracle建议的备份策略时，Oracle建议保持默认设置不变以避免混淆：</p><pre class="oac_no_warn" dir="ltr">配置保留政策至冗余1; #default</pre></div>
                  </div><a id="ADMQS09323"></a><div class="props_rev_3"><a id="GUID-8DC44B9E-C6CE-4E04-8C62-6AF3CB503D9E" name="GUID-8DC44B9E-C6CE-4E04-8C62-6AF3CB503D9E"></a><h5 id="ADMQS-GUID-8DC44B9E-C6CE-4E04-8C62-6AF3CB503D9E" class="sect5"><span class="enumeration_section">9.4.2.4</span>计划其他备份任务</h5>
                     <div>
                        <div>除了实现<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-D77B0526-13F6-4570-9C74-6436B76DEA43" title="The Oracle suggested backup strategy is based on incrementally updated backups. This strategy starts with an image copy of each data file and then rolls forward the image copies each day by applying an incremental level 1 backup.To use the Oracle suggested backup strategy, ensure that:This backup script implements the Oracle suggested backup strategy, enabling quick recovery to any time in the preceding 24 hours. This script can be used to back up a non-CDB or a whole multitenant container database (CDB).It is recommended that you run the script manually, to check for errors, before scheduling it. Your manual run of the script will start day one of the strategy, creating an incremental level 0 image copy of all datafiles.The following procedure uses the cron utility to schedule daily database backups at 2:00 a.m.">使用Oracle建议的备份策略</a> ”中</span>描述<span class="q"><a href="performing-backup-and-recovery.html#GUID-D77B0526-13F6-4570-9C74-6436B76DEA43" title="Oracle建议的备份策略基于增量更新的备份。此策略从每个数据文件的映像副本开始，然后通过应用增量级别1备份每天前滚映像副本。要使用Oracle建议的备份策略，请确保：此备份脚本实施Oracle建议的备份策略，以便在前24小时内的任何时间快速恢复。此脚本可用于备份非CDB或整个多租户容器数据库（CDB）。建议您在安排脚本之前手动运行脚本以检查错误。您手动运行脚本将从策略的第一天开始，创建所有数据文件的增量级别0映像副本。以下过程使用cron实用程序在凌晨2:00安排每日数据库备份">的Oracle建议的备份策略之外</a> ，</span>您还可以使用备份数据库的某些部分来定制备份策略。<span>自定义策略包括备份选定的表空间，数据文件和归档重做日志。创建一个脚本，其中包含实现自定义备份任务所需的命令，然后使用<code class="codeph">cron</code>实用程序计划此备份任务。</span></div>
                        <p> </p>
                        <div class="infoboxnotealso" id="GUID-8DC44B9E-C6CE-4E04-8C62-6AF3CB503D9E__GUID-297BC868-7BFE-425F-9EDC-982598431E7A">
                           <p class="notep1">也可以看看：</p>
                           <p>有关执行自定义备份的信息<a href="../bradv/backing-up-database.html#BRADV8003" target="_blank"><span><cite>，请参见“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="ADMQS12443"></a><a id="ADMQS12444"></a><a id="ADMQS12442"></a><div class="props_rev_3"><a id="GUID-94B0AF4B-D5BC-40B5-AA14-E4527009BE0A" name="GUID-94B0AF4B-D5BC-40B5-AA14-E4527009BE0A"></a><h4 id="ADMQS-GUID-94B0AF4B-D5BC-40B5-AA14-E4527009BE0A" class="sect4"><span class="enumeration_section">9.4.3</span>显示存储在RMAN存储库中的备份</h4>
                  <div>
                     <div><span>使用<code class="codeph">LIST</code>命令查看有关存储在Oracle Recovery Manager（RMAN）存储库中的备份的信息。</span> 该信息包括数据文件，单个表空间，归档重做日志文件和控制文件的备份。您还可以使用此命令显示有关过期和过时备份的信息。
                     </div>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-94B0AF4B-D5BC-40B5-AA14-E4527009BE0A__GUID-7D8FE467-53EC-4BC0-B4E9-5B24698876B3">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">LIST</code>命令的详细信息，请<code class="codeph">LIST</code> <a href="../bradv/reporting-rman-operations.html#BRADV8136" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                        </div>
                        <p>“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV631" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南”中</cite></span></a>介绍了用于显示多租户容器数据库（CDB）和可插拔数据库（PDB）备份的语法，这些数据与用于非CDB的数据略有不同。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-94B0AF4B-D5BC-40B5-AA14-E4527009BE0A__GUID-290E4F37-97F3-48A3-B5DF-E8D1FD274C46">要显示所有备份：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>按照<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="要执行备份或恢复操作或配置备份和恢复设置，必须启动Oracle Recovery Manager（RMAN）客户端并连接到目标数据库。">使用RMAN连接到目标数据库”中的说明将RMAN连接到目标数据库</a> 。</span></p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">LIST</code>命令显示所有备份的摘要，包括备份集和映像副本。
                              </p><pre class="oac_no_warn" dir="ltr">列表备份摘要;备份列表===============键TY LV S设备类型完成时间#Pieces #Copies压缩标签-------  -   -   -  ------ ----- --------------- ------- ------- ---------- --- 12 BFA DISK 28-MAR-12 1 1 NO TAG20120328T051810 13 BFA DISK 28-MAR-12 1 1 NO TAG20120328T051811 14 BFA DISK 28-MAR-12 1 1 NO TAG20120328T051921 15 BFA DISK 28-MAR-12 1 1 NO TAG20120328T051936 16 BFA DISK 28- MAR-12 1 1 NO TAG20120328T052241</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-94B0AF4B-D5BC-40B5-AA14-E4527009BE0A__GUID-89A71C1B-C057-45F2-B3CC-C55DD59ACFE0">要显示所选备份：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>按照<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="要执行备份或恢复操作或配置备份和恢复设置，必须启动Oracle Recovery Manager（RMAN）客户端并连接到目标数据库。">使用RMAN连接到目标数据库”中的说明将RMAN连接到目标数据库</a> 。</span></span></li>
                        <li class="stepexpand"><span>使用<code class="codeph">LIST BACKUP</code>或<code class="codeph">LIST COPY</code>命令显示指定的备份，包括备份集和映像副本。</span><div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>例如，要列出特定数据文件的备份：</p><pre class="oac_no_warn" dir="ltr">列表备份数据文件3;列表复制数据文件'/orcl/oradata/trgt/system01.dbf';</pre></li>
                                 <li>
                                    <p>要显示按数据库文件类型排序的备份：</p><pre class="oac_no_warn" dir="ltr">按文件列出备份;数据文件备份列表========================文件密钥TY LV S Ckp SCN Ckp时间#Pieces #Copies压缩标签---- --- ----  -   -   -  ---------- --------- ------- ------- --------- -  --- 1 14 BFA 723546 28-MAR-12 1 1 NO TAG20120328T051921 2 14 BFA 723546 28-MAR-12 1 1 NO TAG20120328T051921 3 14 BFA 723546 28-MAR-12 1 1 NO TAG20120328T051921 4 14 BFA 723546 28-MAR -12 1 1 NO TAG20120328T051921 5 14 BFA 723546 28-MAR-12 1 1 NO TAG20120328T051921控制文件备份列表========================== = CF Ckp SCN Ckp时间BS键S #Pieces #Copies压缩标签---------- --------- -------  -  -------  - ------ ---------- --- 723835 28-MAR-12 16 A 1 1 NO TAG20120328T052241 723557 28-MAR-12 15 A 1 1 NO TAG20120328T051936 723490 28-MAR-12 13 A 1 1 NO TAG20120328T051811</pre></li>
                              </ul>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADMQS0933"></a><div class="props_rev_3"><a id="GUID-50E7B6A0-6324-4AD6-98E4-3F60E42EE019" name="GUID-50E7B6A0-6324-4AD6-98E4-3F60E42EE019"></a><h4 id="ADMQS-GUID-50E7B6A0-6324-4AD6-98E4-3F60E42EE019" class="sect4"><span class="enumeration_section">9.4.4</span>验证备份并测试备份策略</h4>
                  <div>
                     <div><span>作为备份策略的一部分，您应定期检查备份是否完好，并可用于满足可恢复性目标。</span> 您可以通过以下方式验证备份：</div>
                     <p><a id="d37040e4043" class="indexterm-anchor"></a>您可以通过以下方式验证备份：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在Oracle Recovery Manager（RMAN）中选择特定备份集或映像副本并验证它们。此技术指示是否存在备份并且可以还原。对于此验证形式，请使用<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-C3A1E5EE-DAAE-4FE1-9574-D58D77447D8D" title="验证特定备份会检查这些备份是否存在且可以还原。它不会测试可用备份集是否符合您的可恢复性目标。">验证所选备份</a> ”中</span>描述的步骤<span class="q">。</span></p>
                        </li>
                        <li>
                           <p>指定数据库文件并让RMAN选择在还原这些文件时使用的备份，就像实际还原操作一样。此技术可确保可用备份足以还原数据库。对于此验证形式，请使用<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-2C25B9A5-8E1B-4051-A81F-19AA61F18CFD" title="您可以测试是否存在可用于还原指定数据库文件的足够备份集。">验证还原操作的备份</a> ”中</span>描述的步骤<span class="q">。</span></p>
                           <div class="infoboxnote" id="GUID-50E7B6A0-6324-4AD6-98E4-3F60E42EE019__GUID-E3DDA227-C49A-4901-A418-8706338F5253">
                              <p class="notep1">注意：</p>
                              <p>验证存储在磁带上的备份可能非常耗时，因为从磁带读取整个备份。</p>
                           </div>
                        </li>
                     </ul>
                     <p>您可以使用RMAN执行两种形式的验证。您应该将两种形式的验证合并到备份策略中，以确保可用备份满足您的可恢复性目标。</p>
                     <div class="infoboxnotealso" id="GUID-50E7B6A0-6324-4AD6-98E4-3F60E42EE019__GUID-098E1D89-9B48-4893-9161-29EB1E7370B6">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV635" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”</cite></span></a> ，了解有关验证多租户容器数据库（CDB）和可插拔数据库（PDB）备份的信息</p>
                     </div>
                  </div><a id="ADMQS12227"></a><a id="ADMQS09525"></a><div class="props_rev_3"><a id="GUID-C3A1E5EE-DAAE-4FE1-9574-D58D77447D8D" name="GUID-C3A1E5EE-DAAE-4FE1-9574-D58D77447D8D"></a><h5 id="ADMQS-GUID-C3A1E5EE-DAAE-4FE1-9574-D58D77447D8D" class="sect5"><span class="enumeration_section">9.4.4.1</span>验证选定的备份</h5>
                     <div>
                        <div><span>验证特定备份会检查这些备份是否存在且可以还原。它不会测试可用备份集是否符合您的可恢复性目标。</span> 例如，可能存在数据库中多个表空间的数据文件的映像副本，每个表空间都可以进行验证。但是，如果存在某些没有有效备份的表空间，则无法还原和恢复数据库。
                        </div>
                        <div class="section">
                           <p class="subhead3" id="GUID-C3A1E5EE-DAAE-4FE1-9574-D58D77447D8D__GUID-540AB259-EEAE-48F8-842B-5044735640BA">要验证所选备份：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>将Oracle Recovery Manager（RMAN） <span class="q"><a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">连接到</a></span>目标数据库，如<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">使用RMAN连接到目标数据库</a> ” <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="要执行备份或恢复操作或配置备份和恢复设置，必须启动Oracle Recovery Manager（RMAN）客户端并连接到目标数据库。">中所述</a> 。</span></span></li>
                           <li class="stepexpand"><span>验证所需的备份。</span><div>
                                 <p>以下<code class="codeph">VALIDATE</code>命令验证数据文件<code class="codeph">users_02.dbf</code> 。
                                 </p><pre class="oac_no_warn" dir="ltr">VALIDATE DATAFILE'/ora112/oradata/users_02.dbf';使用通道ORA_DISK_1通道ORA_DISK_1在27-MAR-12开始验证：开始验证数据文件通道ORA_DISK_1：指定验证输入数据文件的数据文件文件号= 00020名称= / ora112 / oradata / users_02.dbf通道ORA_DISK_1：验证完成，已用时间：00：00：01数据文件列表=================文件状态标记已损坏空块阻止检查高SCN ---- ------- ------------ ------------ --------------- ---------- 20 OK 0 248 256 618976文件名：/ora112/oradata/users_02.dbf块类型块处理失败块---------- -------------- ---- ------------数据0 0索引0 0其他0 8在27-MAR-12完成验证</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>如果怀疑备份集中的一个或多个备份片段丢失或已损坏，请使用<code class="codeph">VALIDATE BACKUPSET</code>命令验证备份集。
                           </p>
                           <div class="infoboxnotealso" id="GUID-C3A1E5EE-DAAE-4FE1-9574-D58D77447D8D__GUID-B1BBB050-40DE-456C-8EC1-D3B6A488A453">
                              <p class="notep1">也可以看看：</p>
                              <p>有关验证备份的详细信息，请参见<a href="../bradv/validating-database-files-backups.html#BRADV8156" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADMQS12228"></a><a id="ADMQS0942"></a><div class="props_rev_3"><a id="GUID-2C25B9A5-8E1B-4051-A81F-19AA61F18CFD" name="GUID-2C25B9A5-8E1B-4051-A81F-19AA61F18CFD"></a><h5 id="ADMQS-GUID-2C25B9A5-8E1B-4051-A81F-19AA61F18CFD" class="sect5"><span class="enumeration_section">9.4.4.2</span>验证还原操作的备份</h5>
                     <div>
                        <div><span>您可以测试是否存在可用于还原指定数据库文件的足够备份集。</span> 在指定要还原的表空间以及可能还原它们的时间后，Oracle Recovery Manager（RMAN）会选择一组包含所需数据的备份。RMAN完整地读取所选备份以确认它们没有损坏，但不生成输出文件。
                        </div>
                        <div class="section">
                           <p>验证文件的恢复测试是否可以在给定可用备份的情况下还原文件，但不测试指定对象的所有备份是否有效。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-2C25B9A5-8E1B-4051-A81F-19AA61F18CFD__GUID-D6462B82-D0FB-4DA7-81AE-B3E96C19DF73">要验证是否可以还原指定的数据库文件：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>按照<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="要执行备份或恢复操作或配置备份和恢复设置，必须启动Oracle Recovery Manager（RMAN）客户端并连接到目标数据库。">使用RMAN连接到目标数据库”中的说明将RMAN连接到目标数据库</a> 。</span></span></li>
                           <li class="stepexpand"><span>运行<code class="codeph">RESTORE … VALIDATE</code>命令以确定是否可以还原所需的数据库文件。</span><div>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>要确定是否可以还原整个数据库：</p><pre class="oac_no_warn" dir="ltr">RESTORE VALIDATE DATABASE;使用目标数据库控制文件而不是恢复目录分配通道在29-MAR-12开始恢复：ORA_DISK_1通道ORA_DISK_1：SID = 129设备类型= DISK通道ORA_DISK_1：扫描数据文件副本/ ade / b / 191802369 / oracle / work / orcva / RDBMS / datafile / o1_mf_tbs_3_7q60nj4y_.dbf频道ORA_DISK_1：开始验证数据文件备份集通道ORA_DISK_1：从备份片段中读取/ade/b/191802369/oracle/work/orcva/RDBMS/backupset/2012_03_28/o1_mf_nnndf_TAG20120328T051921_7q60g9oc_.bkp频道ORA_DISK_1：片句句柄= / ade / b / 191802369 / oracle / work / orcva / RDBMS / backupset / 2012_03_28 / o1_mf_nnndf_TAG20120328T051921_7q60g9oc_.bkp tag = TAG20120328T051921 channel ORA_DISK_1：恢复备份1通道ORA_DISK_1：验证完成，已用时间：00：00：04完成恢复时间29-MAR-12</pre></li>
                                    <li>
                                       <p>要确定是否可以还原指定的表空间：</p><pre class="oac_no_warn" dir="ltr">RESTORE TABLESPACE示例VALIDATE;使用通道ORA_DISK_1通道ORA_DISK_1在29-MAR-12开始恢复：开始验证数据文件备份集通道ORA_DISK_1：从备份片段读取/ade/b/191802369/oracle/work/orcva/RDBMS/backupset/2012_03_28/o1_mf_nnndf_TAG20120328T051921_7q60g9oc_.bkp频道ORA_DISK_1：piece handle = / ade / b / 191802369 / oracle / work / orcva / RDBMS / backupset / 2012_03_28 / o1_mf_nnndf_TAG20120328T051921_7q60g9oc_.bkp tag = TAG20120328T051921 channel ORA_DISK_1：恢复备份1通道ORA_DISK_1：验证完成，已用时间：00：00： 01完成恢复时间为29-MAR-12</pre></li>
                                    <li>
                                       <p>要确定数据文件是否可以还原到指定的SCN：</p><pre class="oac_no_warn" dir="ltr">RESTORE DATAFILE 1 VALIDATE UNTIL SCN 23456;使用通道ORA_DISK_1通道ORA_DISK_1在29-MAR-12开始恢复：开始验证数据文件备份集通道ORA_DISK_1：从备份片段读取/ade/b/191802369/oracle/work/orcva/RDBMS/backupset/2012_03_28/o1_mf_nnndf_TAG20120330T044454_7qc75qyd_.bkp频道ORA_DISK_1：piece handle = / ade / b / 191802369 / oracle / work / orcva / RDBMS / backupset / 2012_03_28 / o1_mf_nnndf_TAG20120330T044454_7qc75qyd_.bkp tag = TAG20120330T044454 channel ORA_DISK_1：恢复备份1通道ORA_DISK_1：验证完成，已用时间：00：00： 03完成恢复时间为29-MAR-12</pre></li>
                                 </ul>
                              </div>
                           </li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-2C25B9A5-8E1B-4051-A81F-19AA61F18CFD__GUID-C31E0ED3-82AA-4F7B-B16A-D6F953128692">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>用于数据文件恢复概念的<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=CNCPT88772" target="_blank"><span><cite>Oracle数据库</cite></span></a>概念</p>
                                 </li>
                                 <li>
                                    <p><a href="../bradv/validating-database-files-backups.html#BRADV8156" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南</cite></span></a> ，了解如何使用<code class="codeph">RESTORE</code> <code class="codeph">...</code> <code class="codeph">VALIDATE</code>命令</p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="ADMQS12229"></a><a id="ADMQS096"></a><div class="props_rev_3"><a id="GUID-C7CEE4AC-AFC9-4FE7-903E-4AB05DB923E3" name="GUID-C7CEE4AC-AFC9-4FE7-903E-4AB05DB923E3"></a><h3 id="ADMQS-GUID-C7CEE4AC-AFC9-4FE7-903E-4AB05DB923E3" class="sect3"><span class="enumeration_section">9.5</span>显示备份报告</h3>
               <div>
                  <div><span>备份报告包含有关Oracle Recovery Manager（RMAN）运行的过去备份作业的摘要和详细信息。</span> 视图<code class="codeph">V$RMAN_BACKUP_JOB_DETAILS</code>包含有关RMAN运行的备份作业的信息。此视图包含诸如备份所花费的时间，作业开始和结束时间，执行的备份类型以及备份作业的状态等信息。
                  </div>
                  <div class="section">
                     <p class="subhead2" id="GUID-C7CEE4AC-AFC9-4FE7-903E-4AB05DB923E3__GUID-A4FE5A3A-61FB-4711-9EA5-654E9ADC4DA6">要显示备份报告：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>使用以下查询显示备份作业历史记录。</p><pre class="oac_no_warn" dir="ltr">SELECT SESSION_KEY，INPUT_TYPE，STATUS，START_TIME，END_TIME，ELAPSED_SECONDS / 3600小时来自V $ RMAN_BACKUP_JOB_DETAILS; SESSION_KEY INPUT_TYPE状态START_TIM END_TIME HRS ----------- ------------- -------------------- --- --------- --------- ---------- 8 DB FULL FAILED 27-MAR-12 27-MAR-12 1.64666666 50 DB FULL COMPLETED 28-MAR-12 28-MAR-12 .243055555 69 DB完全完成30-MAR-12 05-APR-12 147.176388</pre><p><code class="codeph">SESSION_KEY</code>是发生备份作业的RMAN会话的唯一键。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADMQS095"></a><div class="props_rev_3"><a id="GUID-83CED39F-DC23-4539-9668-32C89676904E" name="GUID-83CED39F-DC23-4539-9668-32C89676904E"></a><h3 id="ADMQS-GUID-83CED39F-DC23-4539-9668-32C89676904E" class="sect3"><span class="enumeration_section">9.6</span>管理备份</h3>
               <div>
                  <div><span>作为备份策略的一部分，您必须管理数据库备份。</span> 相关任务是在Oracle Recovery Manager（RMAN）存储库中管理这些备份的记录。RMAN简化了这些任务。
                  </div>
                  <p>在多租户环境中，您可以管理整个多租户容器数据库（CDB）或一个或多个可插拔数据库（PDB）的备份。本节中的步骤适用于CDB和PDB，只需稍加修改即可。要管理整个CDB的备份，请连接到根并使用本节中描述的步骤。要管理单个PDB的备份，请连接到该PDB并使用本节中描述的步骤。要使用一个命令管理多个PDB的备份，请连接到root并使用<code class="codeph">PLUGGABLE DATABASE</code>子句，然后使用PDB列表。
                  </p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-6F635B87-0760-41B2-A17A-CD8A327B7F7C" title="备份和恢复策略的一个重要部分是在创建备份后管理备份。备份管理包括删除过时的备份和执行定期检查，以确保备份可用且可用。">关于备份管理</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-F9FC18D6-6FCA-4C6D-9B34-250470469495" title="交叉检查备份会将备份的物理实际与Oracle Recovery Manager（RMAN）存储库中的逻辑记录同步。">交叉检查备份</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-5D86798A-FF32-4900-94D0-5051A3D89B4E" title="删除过期的备份会从Oracle Recovery Manager（RMAN）存储库中删除列为EXPIRED的备份。">删除过期的备份</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-A39F9D6C-B723-49F1-933B-D1289D0040A5" title="如果由于临时情况而导致一个或多个特定备份不可用，例如临时脱机的磁盘驱动器或异地存储的磁带，则可以将这些备份标记为不可用。">将备份标记为可用或不可用</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-A5399A7A-4D96-4884-A0FB-39167F4B3370" title="本节介绍如何删除过时的备份，这些备份是配置的保留策略不再需要的备份。">删除过时备份</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-59C29B1D-8536-4C43-B999-46CC5F61F430" title="监视快速恢复区域中的空间使用情况非常重要，以确保其足够大以包含备份和其他与恢复相关的文件。">监控快速恢复区空间使用情况</a></p>
                     </li>
                  </ul>
               </div><a id="ADMQS0951"></a><div class="props_rev_3"><a id="GUID-6F635B87-0760-41B2-A17A-CD8A327B7F7C" name="GUID-6F635B87-0760-41B2-A17A-CD8A327B7F7C"></a><h4 id="ADMQS-GUID-6F635B87-0760-41B2-A17A-CD8A327B7F7C" class="sect4"><span class="enumeration_section">9.6.1</span>关于备份管理</h4>
                  <div>
                     <p>备份和恢复策略的一个重要部分是在创建备份后管理备份。备份管理包括删除过时的备份和执行定期检查，以确保备份可用且可用。</p>
                     <p>记录在Oracle Recovery Manager（RMAN）存储库中的备份具有以下状态值之一：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>可用， <a id="d37040e4405" class="indexterm-anchor"></a>意味着备份仍存在于磁盘或磁带上，如存储库中记录的那样</p>
                        </li>
                        <li>
                           <p>过期， <a id="d37040e4413" class="indexterm-anchor"></a>意味着备份不再存在于磁盘或磁带上，但仍在存储库中列出</p>
                        </li>
                        <li>
                           <p>不可用， <a id="d37040e4421" class="indexterm-anchor"></a>意味着备份暂时不可用于数据恢复操作（例如，因为它存储在异地存储的磁带上或当前未安装的磁盘上）</p>
                        </li>
                     </ul>
                     <p><a id="d37040e4427" class="indexterm-anchor"></a>备份也可以过时。根据当前配置的保留策略，不再需要过时的备份来满足数据恢复目标。
                     </p>
                     <p>您可以在RMAN中执行的维护任务包括以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>查看有关备份的详细信息</p>
                        </li>
                        <li>
                           <p>交叉检查<a id="d37040e4441" class="indexterm-anchor"></a>您的存储库，这意味着检查存储库中列出的备份是否存在且是否可访问，并将交叉检查时无法访问的任何备份标记为已过期</p>
                        </li>
                        <li>
                           <p>从RMAN存储库中删除过期备份的记录</p>
                        </li>
                        <li>
                           <p>从存储库和备份媒体中删除过时的备份</p>
                        </li>
                        <li>
                           <p>验证备份以确保给定备份可用且未损坏</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-6F635B87-0760-41B2-A17A-CD8A327B7F7C__GUID-F2B5CFD0-0A20-4FE3-B0B7-A627350BD1A0">
                        <p class="notep1">注意：</p>
                        <p>如果备份不再存在，则立即从RMAN存储库中删除备份记录。如果没有可用备份的准确记录，您可能会发现在必须执行恢复时不再拥有数据库的完整备份。</p>
                     </div>
                     <p>某些任务（例如定期交叉检查备份）应该是备份策略的定期计划组件之一。</p>
                     <p>如果使用快速恢复区域进行备份存储，则可以减少或消除许多维护活动。自动存储空间管理机制根据需要删除备份和其他文件，从而满足正在进行的数据库操作的存储空间需求，而不会影响保留策略。但是，您必须监视快速恢复区域中的空间使用情况，以确保它足够大以包含备份和其他与恢复相关的文件。</p>
                  </div>
               </div><a id="ADMQS12230"></a><a id="ADMQS12231"></a><a id="ADMQS0953"></a><div class="props_rev_3"><a id="GUID-F9FC18D6-6FCA-4C6D-9B34-250470469495" name="GUID-F9FC18D6-6FCA-4C6D-9B34-250470469495"></a><h4 id="ADMQS-GUID-F9FC18D6-6FCA-4C6D-9B34-250470469495" class="sect4"><span class="enumeration_section">9.6.2</span>交叉检查备份</h4>
                  <div>
                     <div><span>交叉检查备份会将备份的物理实际与Oracle Recovery Manager（RMAN）存储库中的逻辑记录同步。</span> 例如，如果使用操作系统命令删除磁盘上的备份，则交叉检查会检测到此情况。交叉检查后，RMAN存储库正确反映了备份的状态。
                     </div>
                     <div class="section">
                        <p>如果磁盘备份仍位于RMAN存储库中列出的位置的磁盘上，并且文件头中没有损坏，则磁盘备份将列为可用。磁带上的备份如果仍在磁带上，则列为可用。磁带上的文件头不会检查是否损坏。丢失或损坏的备份列为已过期。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F9FC18D6-6FCA-4C6D-9B34-250470469495__GUID-66A38F2F-CDE0-4879-93A1-461D2ECEF289">要交叉检查单个文件：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>按照<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="要执行备份或恢复操作或配置备份和恢复设置，必须启动Oracle Recovery Manager（RMAN）客户端并连接到目标数据库。">使用RMAN连接到目标数据库”中的说明将RMAN连接到目标数据库</a> 。</span></p>
                           </li>
                           <li>
                              <p>显示现有备份的摘要，以确定要交叉检查的备份。</p><pre class="oac_no_warn" dir="ltr">列表备份摘要;</pre></li>
                           <li>
                              <p>确定要从上一个<code class="codeph">LIST</code>命令的输出进行交叉检查的备份。
                              </p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">CROSSCHECK</code>命令交叉检查标识的文件。
                              </p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>要交叉检查备份集1345：</p><pre class="oac_no_warn" dir="ltr">CROSSCHECK BACKUPSET 1345;使用渠道ORA_DISK_1交叉检查备件：发现'AVAILABLE'备件件句柄= / ade / b / 191802369 / oracle / work / orcva / RDBMS / backupset / 2012_04_05 / o1_mf_annnn_TAG20120405T075520_7qvdlrsl_.bkp RECID = 1345 STAMP = 779788520交叉验证1件物品</pre></li>
                                 <li>
                                    <p>要交叉检查数据文件1和5：</p><pre class="oac_no_warn" dir="ltr">CROSSCHECK DATAFILECOPY 1,5;</pre></li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F9FC18D6-6FCA-4C6D-9B34-250470469495__GUID-AB70A239-518C-4FB9-A034-4ACE8FD84866">要交叉检查所有文件：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>按照<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="要执行备份或恢复操作或配置备份和恢复设置，必须启动Oracle Recovery Manager（RMAN）客户端并连接到目标数据库。">使用RMAN连接到目标数据库”中的说明将RMAN连接到目标数据库</a> 。</span></span></li>
                        <li class="stepexpand"><span>要交叉检查所有备份集，请使用以下命令：</span><div><pre class="oac_no_warn" dir="ltr">CROSSCHECK BACKUP;</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-F9FC18D6-6FCA-4C6D-9B34-250470469495__GUID-021368D6-19CD-43E6-ABB8-6A9B54E8F2FE">
                           <p class="notep1">注意：</p>
                           <p>交叉检查RMAN存储库中的所有备份可能需要很长时间，尤其是对于磁带备份。与交叉检查单个文件不同，所有文件的交叉检查都作为预定作业处理。</p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-F9FC18D6-6FCA-4C6D-9B34-250470469495__GUID-08D6C0D3-B1F1-4AE2-9B36-BBC17270C321">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=RCMRF119" target="_blank"><span><cite>Oracle数据库备份和恢复参考</cite></span></a> ，用于交叉检查多租户容器数据库（CDB）和可插拔数据库（PDB）备份的语法</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADMQS12232"></a><a id="ADMQS0954"></a><div class="props_rev_3"><a id="GUID-5D86798A-FF32-4900-94D0-5051A3D89B4E" name="GUID-5D86798A-FF32-4900-94D0-5051A3D89B4E"></a><h4 id="ADMQS-GUID-5D86798A-FF32-4900-94D0-5051A3D89B4E" class="sect4"><span class="enumeration_section">9.6.3</span>删除过期备份</h4>
                  <div>
                     <div><span>删除过期的备份会从Oracle Recovery Manager（RMAN）存储库中<code class="codeph">EXPIRED</code>列为<code class="codeph">EXPIRED</code>备份。</span>过期备份是在交叉检查期间无法访问的备份。不尝试从磁盘或磁带中删除包含备份的文件;此操作仅更新RMAN存储库。
                     </div>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-5D86798A-FF32-4900-94D0-5051A3D89B4E__GUID-7C1125F1-3AFA-4ED3-93E7-E8CA45DB5F28">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=RCMRF121" target="_blank"><span><cite>Oracle数据库备份和恢复参考</cite></span></a> ，用于删除多租户容器数据库（CDB）和可插拔数据库（PDB）的过期备份的语法</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5D86798A-FF32-4900-94D0-5051A3D89B4E__GUID-A0D57101-934A-4759-8AD2-E75802E17ABD">要删除过期的备份：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>按照<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="要执行备份或恢复操作或配置备份和恢复设置，必须启动Oracle Recovery Manager（RMAN）客户端并连接到目标数据库。">使用RMAN连接到目标数据库”中的说明将RMAN连接到目标数据库</a> 。</span></span></li>
                        <li class="stepexpand"><span>（可选）使用以下命令交叉检查备份集：</span><div><pre class="oac_no_warn" dir="ltr">CROSSCHECK BACKUPSET;</pre><p>在删除过期备份之前交叉检查备份可为RMAN提供有关哪些备份已过期的最新信息。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>使用以下命令删除过期的备份：</span><div><pre class="oac_no_warn" dir="ltr">DELETE EXPIRED BACKUP;</pre><p>已过期的备份集和映像副本将从RMAN存储库中删除。</p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADMQS12233"></a><a id="ADMQS0955"></a><div class="props_rev_3"><a id="GUID-A39F9D6C-B723-49F1-933B-D1289D0040A5" name="GUID-A39F9D6C-B723-49F1-933B-D1289D0040A5"></a><h4 id="ADMQS-GUID-A39F9D6C-B723-49F1-933B-D1289D0040A5" class="sect4"><span class="enumeration_section">9.6.4将</span>备份标记为可用或不可用</h4>
                  <div>
                     <div><span>如果由于临时情况而导致一个或多个特定备份不可用，例如临时脱机的磁盘驱动器或异地存储的磁带，则可以将这些备份标记为不可用。</span> Oracle Recovery Manager（RMAN）不使用不可用的备份来还原或恢复数据。
                     </div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-A39F9D6C-B723-49F1-933B-D1289D0040A5__GUID-537A31E7-9609-41A4-A447-F995137DD989">
                           <p class="notep1">注意：</p>
                           <p>存储在快速恢复区域中的备份不能标记为不可用。</p>
                        </div>
                        <p>RMAN会在RMAN存储库中保留不可用备份的记录，并且在删除过期备份时不会删除列为不可用的备份。如果再次访问不可用的备份，则可以将其标记为可用。</p>
                        <div class="infoboxnotealso" id="GUID-A39F9D6C-B723-49F1-933B-D1289D0040A5__GUID-195AE008-F521-440A-9A8B-814D227D8DB0">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=RCMRF110" target="_blank"><span><cite>Oracle数据库备份和恢复参考</cite></span></a> ，用于多租户容器数据库（CDB）和可插拔数据库（PDB）的语法</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A39F9D6C-B723-49F1-933B-D1289D0040A5__GUID-B56A771C-D9BC-4624-A34D-E4C4184548FA">将备份标记为可用或不可用：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>按照<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="要执行备份或恢复操作或配置备份和恢复设置，必须启动Oracle Recovery Manager（RMAN）客户端并连接到目标数据库。">使用RMAN连接到目标数据库”中的说明将RMAN连接到目标数据库</a> 。</span></span></li>
                        <li class="stepexpand"><span>（可选）使用以下命令交叉检查备份集：</span><div><pre class="oac_no_warn" dir="ltr">CROSSCHECK BACKUP;</pre><p>在删除过期备份之前交叉检查备份可为RMAN提供有关哪些备份已过期的最新信息。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>显示可用备份的摘要。</span><div><pre class="oac_no_warn" dir="ltr">列表备份摘要;备份列表===============键TY LV S设备类型完成时间#Pieces #Copies压缩标签-------  -   -   -  ------ ----- --------------- ------- ------- ---------- --- 1 BAA DISK 24-FEB-07 1 1 NO TAG20070427T115348 3 BAA DISK 24-MAR-07 1 1 NO TAG20070427T115452 4 BFA DISK 24-APR-07 1 1 NO TAG20070427T115456</pre></div>
                        </li>
                        <li class="stepexpand"><span>从<code class="codeph">LIST</code>命令的输出中，标识要使其可用或不可用的备份。使用“密钥”列中显示的值来标识备份集。</span></li>
                        <li class="stepexpand"><span>使用<code class="codeph">CHANGE</code>命令将标识的备份的状态更改为不可用。</span><div>
                              <p>以下命令标记备份集4不可用：</p><pre class="oac_no_warn" dir="ltr">更换BACKUPSET 4无法使用;已更改备份件可用备份件句柄= / ade / b / 191802369 / oracle / work / orcva / RDBMS / backupset / 2012_04_05 / o1_mf_annnn_TAG20120405T075520_7qvdlrsl_.bkp RECID = 23 STAMP = 779788520将1个对象更改为AVAILABLE状态</pre><p>要将备份集4标记为可用，请使用以下命令：</p><pre class="oac_no_warn" dir="ltr">改变备用4可用;</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADMQS12234"></a><a id="ADMQS0956"></a><div class="props_rev_3"><a id="GUID-A5399A7A-4D96-4884-A0FB-39167F4B3370" name="GUID-A5399A7A-4D96-4884-A0FB-39167F4B3370"></a><h4 id="ADMQS-GUID-A5399A7A-4D96-4884-A0FB-39167F4B3370" class="sect4"><span class="enumeration_section">9.6.5</span>删除过时备份</h4>
                  <div>
                     <div><span>本节介绍如何删除过时的备份，这些备份是配置的保留策略不再需要的备份。</span> 如果使用快速恢复区域作为唯一的基于磁盘的备份目标，则永远不必从磁盘中删除过时的备份。快速恢复区域保留保留策略指定的文件，并仅在需要空间时删除它们。
                     </div>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-A5399A7A-4D96-4884-A0FB-39167F4B3370__GUID-3D3B96AE-635A-474C-8BC4-F7F204776289">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=RCMRF121" target="_blank"><span><cite>Oracle数据库备份和恢复参考</cite></span></a> ，用于删除CDB和PDB的过时备份的语法</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A5399A7A-4D96-4884-A0FB-39167F4B3370__GUID-1B814305-2658-4325-A3B1-02E11B285AFB">要删除过时的备份：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>按照<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="要执行备份或恢复操作或配置备份和恢复设置，必须启动Oracle Recovery Manager（RMAN）客户端并连接到目标数据库。">使用RMAN连接到目标数据库”中的说明将RMAN连接到目标数据库</a> 。</span></span></li>
                        <li class="stepexpand"><span>使用以下命令删除所有过时的备份，包括备份集和映像副本：</span><div><pre class="oac_no_warn" dir="ltr">DELETE OBSOLETE;</pre><p>RMAN显示过时备份列表，并要求确认删除列出的备份。</p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADMQS12106"></a><div class="props_rev_3"><a id="GUID-59C29B1D-8536-4C43-B999-46CC5F61F430" name="GUID-59C29B1D-8536-4C43-B999-46CC5F61F430"></a><h4 id="ADMQS-GUID-59C29B1D-8536-4C43-B999-46CC5F61F430" class="sect4"><span class="enumeration_section">9.6.6</span>监控快速恢复区空间使用情况</h4>
                  <div>
                     <div><span>监视快速恢复区域中的空间使用情况非常重要，以确保其足够大以包含备份和其他与恢复相关的文件。</span> Oracle数据库提供了两个视图来监视快速恢复区空间使用情况， <code class="codeph">V$RECOVERY_FILE_DEST</code>和<code class="codeph">V$RECOVERY_AREA_USAGE</code> 。</div>
                     <div class="section">
                        <p>使用<code class="codeph">V$RECOVERY_FILE_DEST</code>视图获取有关快速恢复区域的以下信息：文件总数，当前位置，磁盘配额，正在使用的空间以及可通过删除文件回收的空间。空间详细信息以字节为单位。查询<code class="codeph">V$RECOVERY_FILE_DEST</code>会产生以下输出。
                        </p><pre class="oac_no_warn" dir="ltr">SELECT * FROM V $ RECOVERY_FILE_DEST;名称SPACE_LIMIT SPACE_USED SPACE_RECLAIMABLE NUMBER_OF_FILES -------------- ----------- ---------- ---------- ------- --------------- / mydisk / rcva 5368709120 109240320 256000 28</pre><p><code class="codeph">V$RECOVERY_AREA_USAGE</code>视图包含不同类型文件使用的磁盘配额百分比，以及通过删除过时，冗余或备份到磁带的文件可回收的空间百分比。查询<code class="codeph">V$RECOVER_AREA_USAGE</code>视图会产生以下输出。
                        </p><pre class="oac_no_warn" dir="ltr">SELECT * FROM V $ RECOVERY_AREA_USAGE; FILE_TYPE PERCENT_SPACE_USED PERCENT_SPACE_RECLAIMABLE NUMBER_OF_FILES ------------ ------------------ ---------------- --------- --------------- CONTROLFILE 0 0 0 ONLINELOG 2 0 22 ARCHIVELOG 4.05 2.01 31 BACKUPPIECE 3.94 3.86 8 IMAGECOPY 15.64 10.43 66 FLASHBACKLOG .08 0 1</pre><div class="infoboxnotealso" id="GUID-59C29B1D-8536-4C43-B999-46CC5F61F430__GUID-2E3F2C5F-5DDC-4619-80BF-8E78FCAFA3F5">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="performing-backup-and-recovery.html#GUID-292CD2F6-ECDC-4F94-B750-97DD2D526B22" title="本节介绍如何设置数据库以利用Oracle建议的备份策略。">配置数据库以进行基本备份和恢复</a> ”</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADMQS098"></a><div class="props_rev_3"><a id="GUID-E04D3223-BEB0-4212-97E1-BA2A236C3523" name="GUID-E04D3223-BEB0-4212-97E1-BA2A236C3523"></a><h3 id="ADMQS-GUID-E04D3223-BEB0-4212-97E1-BA2A236C3523" class="sect3"><span class="enumeration_section">9.7</span>执行Oracle Advised Recovery</h3>
               <div>
                  <div><span>Oracle建议的恢复功能使用Data Recovery Advisor，这是一种Oracle数据库功能，可自动诊断数据故障，确定并提供适当的修复选项，并在用户请求时执行修复。</span> 通过提供用于自动数据修复的集中式工具，Data Recovery Advisor可提高Oracle数据库的可管理性和可靠性。
                  </div>
                  <div class="infoboxnote" id="GUID-E04D3223-BEB0-4212-97E1-BA2A236C3523__GUID-21EDB5FD-D0E4-4988-BE53-83FA77C9E4A4">
                     <p class="notep1">注意：</p>
                     <p>Data Recovery Advisor只能用于诊断和修复多租户容器数据库（CDB）中的故障。可插拔数据库（PDB）不支持它。</p>
                  </div>
                  <p>RMAN为Data Recovery Advisor提供命令行界面。您可以使用以下RMAN命令诊断和修复Oracle数据库的数据故障，包括Oracle RAC数据库：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">列表失败</code></p>
                        <p>使用此命令可以查看故障的问题语句以及这些故障对数据库操作的影响。每个故障都由故障编号标识。</p>
                     </li>
                     <li>
                        <p><code class="codeph">建议失败</code></p>
                        <p>使用此命令可以查看修复选项，包括自动和手动修复选项。</p>
                     </li>
                     <li>
                        <p><code class="codeph">修复失败</code></p>
                        <p>使用此命令自动修复最近的<code class="codeph">ADVISE FAILURE</code>命令列出的<code class="codeph">ADVISE FAILURE</code> 。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-E04D3223-BEB0-4212-97E1-BA2A236C3523__GUID-D1AEF4CD-AF6D-40B4-BD5C-9F62132BFED6">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV-GUID-9F467E37-DC05-494A-890E-439330493056" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”</cite></span></a> ，了解有关使用<code class="codeph">CHANGE FAILURE</code>命令<code class="codeph">CHANGE FAILURE</code>状态或优先级的信息</p>
                  </div>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-4678D9C4-7949-4050-A6DF-F52F79CEDC9F" title="在Data Recovery Advisor的上下文中，运行状况检查是运行状况监视器运行的诊断过程，用于评估数据库或其组件的状态。发生错误时会被动地调用运行状况检查。您也可以手动调用检查。">关于Data Recovery Advisor</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-5A23C991-FCB3-49E5-9B35-26859406999B" title="当您怀疑或发现故障时，恢复过程就开始了。您可以通过多种方式发现故障，包括错误消息，警报，跟踪文件和运行状况检查。">使用Data Recovery Advisor</a></p>
                     </li>
                  </ul>
               </div><a id="ADMQS100"></a><div class="props_rev_3"><a id="GUID-4678D9C4-7949-4050-A6DF-F52F79CEDC9F" name="GUID-4678D9C4-7949-4050-A6DF-F52F79CEDC9F"></a><h4 id="ADMQS-GUID-4678D9C4-7949-4050-A6DF-F52F79CEDC9F" class="sect4"><span class="enumeration_section">9.7.1</span>关于Data Recovery Advisor</h4>
                  <div>
                     <p>在Data Recovery Advisor的上下文中，运行状况检查是运行状况监视器运行的诊断过程，用于评估数据库或其组件的状态。发生错误时会被动地调用运行状况检查。您也可以手动调用检查。</p>
                     <p><strong class="term">失败</strong>是健康检查检测到的持久性数据损坏。通常会被动地检测到故障。涉及损坏数据的数据库操作会导致错误，该错误会自动调用数据库中的运行状况检查。该检查在数据库中搜索与错误相关的故障。如果诊断出故障，则将它们记录在自动诊断存储库（ADR）中。
                     </p>
                     <p>只有在数据库检测到故障并存储在ADR中后，才能使用Data Recovery Advisor生成修复建议和修复故障。 Data Recovery Advisor可以报告和修复故障，例如无法访问的文件，物理和逻辑块损坏以及I / O故障。每个故障都有一个失败优先级：CRITICAL，HIGH或LOW。每个故障也都有OPEN或CLOSED的故障状态。</p>
                     <p>您还可以使用Data Recovery Advisor查看修复选项。<strong class="term">修复</strong>是修复一个或多个故障的操作。修复示例包括块介质恢复，数据文件介质恢复和Oracle闪回数据库。通常，Data Recovery Advisor提供自动和手动修复选项。如果适用，您可以选择自动修复选项以执行修复。在这种情况下，Data Recovery Advisor会验证修复成功，并关闭相关的已修复故障。
                     </p>
                  </div>
               </div><a id="ADMQS12235"></a><a id="ADMQS0982"></a><div class="props_rev_3"><a id="GUID-5A23C991-FCB3-49E5-9B35-26859406999B" name="GUID-5A23C991-FCB3-49E5-9B35-26859406999B"></a><h4 id="ADMQS-GUID-5A23C991-FCB3-49E5-9B35-26859406999B" class="sect4"><span class="enumeration_section">9.7.2</span>使用Data Recovery Advisor</h4>
                  <div>
                     <div><span>当您怀疑或发现故障时，恢复过程就开始了。您可以通过多种方式发现故障，包括错误消息，警报，跟踪文件和运行状况检查。</span> 然后，您可以使用Data Recovery Advisor获取有关故障的信息和建议，并自动进行修复。
                     </div>
                     <div class="section">
                        <p>本节介绍使用Data Recovery Advisor修复损坏的块的方案。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5A23C991-FCB3-49E5-9B35-26859406999B__GUID-B78CB97D-E6AF-463F-A36A-0A7D8996F076">要使用Oracle建议的恢复策略来自动修复故障：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>将Oracle Recovery Manager（RMAN） <span class="q"><a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">连接到</a></span>目标数据库，如<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">使用RMAN连接到目标数据库</a> ” <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="要执行备份或恢复操作或配置备份和恢复设置，必须启动Oracle Recovery Manager（RMAN）客户端并连接到目标数据库。">中所述</a> 。</span></span><div>
                              <p>在多租户环境中，以具有<code class="codeph">SYSDBA</code>或<code class="codeph">SYSBACKUP</code>权限的公共用户身份连接到root。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>通过运行以下命令列出Data Recovery Advisor所知的所有故障：</span><div><pre class="oac_no_warn" dir="ltr">列表失败;数据库故障列表=========================故障ID优先级状态检测时间摘要---------- ---- ---- ------ ------------- -------- 142 HIGH OPEN 23-APR-07一个或多个非系统数据文件丢失101 HIGH OPEN 23-APR-07数据文件1：'/ disk1 / oradata / prod / system01.dbf'包含一个或多个损坏的块</pre><p>只要有可能，RMAN会在显示<code class="codeph">LIST FAILURE</code>命令的结果时合并故障。例如，如果数据文件包含多个块故障，则<code class="codeph">LIST FAILURE</code>命令会合并并显示修复选项。
                              </p>
                              <div class="infoboxnotealso" id="GUID-5A23C991-FCB3-49E5-9B35-26859406999B__GUID-492284E4-0A3E-40ED-874E-BAA068D7F1EF">
                                 <p class="notep1">也可以看看：</p>
                                 <p>有关使用<code class="codeph">LIST FAILURE ...信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV89726" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南</cite></span></a> <code class="codeph">LIST FAILURE ...DETAIL</code>命令单独显示故障</p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>如果您怀疑某些未被数据库自动诊断的故障存在，请使用以下命令检查损坏的块和丢失的数据文件：</span><div><pre class="oac_no_warn" dir="ltr">验证数据库;</pre><p>如果在验证期间检测到问题，则RMAN会触发执行故障评估</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>使用以下命令确定自动和手动修复选项：</span><div><pre class="oac_no_warn" dir="ltr">建议失败;</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用以下命令修复故障：</span><div><pre class="oac_no_warn" dir="ltr">维修失败;</pre><p>自动修复由Data Recovery Advisor执行。在某些情况下，例如当丢失的控制文件不存在备份时，唯一可能的修复选项是手动选项。</p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div><a id="ADMQS094"></a><div class="props_rev_3"><a id="GUID-2DEB3182-10FA-488C-A01D-550CA49CDBD6" name="GUID-2DEB3182-10FA-488C-A01D-550CA49CDBD6"></a><h3 id="ADMQS-GUID-2DEB3182-10FA-488C-A01D-550CA49CDBD6" class="sect3"><span class="enumeration_section">9.8</span>执行用户指导的恢复</h3>
               <div>
                  <div><span>用户定向恢复使您可以使用闪回功能并执行还原操作和恢复过程。</span> 例如，您可以执行以下操作：</div>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用逻辑闪回功能修复对数据库对象的不需要的更改</p>
                     </li>
                     <li>
                        <p>使用Oracle闪回数据库回滚整个数据库</p>
                     </li>
                     <li>
                        <p>完全还原和恢复数据库</p>
                     </li>
                     <li>
                        <p>执行数据库或选定表空间的时间点恢复</p>
                     </li>
                     <li>
                        <p>执行块介质恢复已损坏块的数据文件</p>
                     </li>
                  </ul>
                  <p>您可以确定必须还原和恢复数据库的哪些部分，包括在影响数据库操作之前检测数据库文件损坏等情况。</p>
                  <p>本节包含一些典型的恢复示例，以便您熟悉使用Oracle Recovery Manager（RMAN）执行整个数据库或对象级恢复。使用<code class="codeph">RESTORE</code>和<code class="codeph">RECOVER</code>命令执行整个数据库或对象级恢复。
                  </p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-18074BFE-AC22-4169-B321-774F1D1D5325" title="Oracle闪回表使您可以在以前将一个或多个表回滚到其内容，而不会影响其他数据库对象。">使用Oracle闪回表重绕表</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-5A842A1B-4A32-46D1-9269-3F51244BBEB9" title="Oracle Flashback Drop使您可以反转删除（删除）表的影响，将删除的表与索引和触发器等依赖对象一起返回到数据库。">使用Oracle Flashback Drop恢复丢弃的表</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-5CC5F46F-2D15-4333-BC1A-2626046EA488" title="与其他闪回功能不同，Oracle闪回数据库在物理级别上运行。使用闪回数据库时，您当前的数据文件将在以前恢复为其内容。">使用Oracle闪回数据库重绕数据库</a></p>
                     </li>
                     <li>
                        <p><a href="performing-backup-and-recovery.html#GUID-2DBCE503-D70F-4EAD-8C8C-E7C1A936396F" title="本节演示如何使用Oracle Recovery Manager（RMAN）还原和恢复整个数据库。">恢复和恢复数据库</a></p>
                     </li>
                  </ul>
               </div><a id="ADMQS0943"></a><div class="props_rev_3"><a id="GUID-18074BFE-AC22-4169-B321-774F1D1D5325" name="GUID-18074BFE-AC22-4169-B321-774F1D1D5325"></a><h4 id="ADMQS-GUID-18074BFE-AC22-4169-B321-774F1D1D5325" class="sect4"><span class="enumeration_section">9.8.1</span>使用Oracle闪回表重绕表</h4>
                  <div>
                     <div><span>Oracle闪回表使您可以在以前将一个或多个表回滚到其内容，而不会影响其他数据库对象。</span> 因此，您可以从逻辑数据损坏中恢复，例如意外添加或删除的表行。与时间点恢复不同，数据库在闪回操作期间仍然可用。
                     </div>
                     <p>对于此示例，您在<code class="codeph">hr</code>模式中的<code class="codeph">employees</code>表上使用闪回表。假设在2005年10月23日15:30:00之后不久发生的错误更新已将所有员工的<code class="codeph">lastname</code>列更改为空字符串，并且必须将原始<code class="codeph">lastname</code>值返回到表中。
                     </p>
                     <p>本节包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-64C48A91-42DF-4E07-834A-987802E1130D" title="在使用闪回表之前，必须确保在要闪回的表上启用行移动，或者返回到先前的状态。行移动表示在闪回发生后rowid将发生变化。">在表上启用行移动</a></p>
                        </li>
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-3132E637-78D5-4B3A-A88B-99F50159C479" title="在此示例中，您将hr.employees表及其相关表回滚到之前的某个时间点。">执行闪回表操作</a></p>
                        </li>
                     </ul>
                  </div><a id="ADMQS12236"></a><a id="ADMQS09431"></a><div class="props_rev_3"><a id="GUID-64C48A91-42DF-4E07-834A-987802E1130D" name="GUID-64C48A91-42DF-4E07-834A-987802E1130D"></a><h5 id="ADMQS-GUID-64C48A91-42DF-4E07-834A-987802E1130D" class="sect5"><span class="enumeration_section">9.8.1.1</span>在表上启用行移动</h5>
                     <div>
                        <div><span>在使用闪回表之前，必须确保在要<span class="italic">闪回</span>的表上启用行移动，或者返回到先前的状态。行移动表示在闪回发生后rowid将发生变化。</span> 存在此限制是因为如果闪回之前的rowid由应用程序存储，则无法保证rowid将在闪回之后对应于相同的行。
                        </div>
                        <div class="section">
                           <p class="subhead3" id="GUID-64C48A91-42DF-4E07-834A-987802E1130D__GUID-91A5E8DF-87A1-44BC-BC73-4AC2B568D179">要在表上启用行移动：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>将Oracle Recovery Manager（RMAN） <span class="q"><a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">连接到</a></span>目标数据库，如<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">使用RMAN连接到目标数据库</a> ” <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="要执行备份或恢复操作或配置备份和恢复设置，必须启动Oracle Recovery Manager（RMAN）客户端并连接到目标数据库。">中所述</a> 。</span></span></li>
                           <li class="stepexpand"><span>使用闪回表为要回放的所有对象启用行移动。</span><div>
                                 <p>以下命令为<code class="codeph">hr.employees</code>表启用行移动。
                                 </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE hr.employees ENABLE ROW MOVEMENT;</pre><p>对于此示例，还必须在表<code class="codeph">hr.jobs</code>和<code class="codeph">hr.departments.</code>上启用行移动<code class="codeph">hr.departments.</code></p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="ADMQS12237"></a><a id="ADMQS09432"></a><div class="props_rev_3"><a id="GUID-3132E637-78D5-4B3A-A88B-99F50159C479" name="GUID-3132E637-78D5-4B3A-A88B-99F50159C479"></a><h5 id="ADMQS-GUID-3132E637-78D5-4B3A-A88B-99F50159C479" class="sect5"><span class="enumeration_section">9.8.1.2</span>执行闪回表操作</h5>
                     <div>
                        <p>在此示例中，您将<code class="codeph">hr.employees</code>表及其相关表回滚到之前的某个时间点。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-3132E637-78D5-4B3A-A88B-99F50159C479__GUID-60A4E64F-4EF8-4E19-A049-8CD653340A94">要执行闪回表操作：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>将Oracle Recovery Manager（RMAN） <span class="q"><a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">连接到</a></span>目标数据库，如<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="To perform backup or recovery operations or to configure backup and recovery settings, you must start the Oracle Recovery Manager (RMAN) client and connect to the target database.">使用RMAN连接到目标数据库</a> ” <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="要执行备份或恢复操作或配置备份和恢复设置，必须启动Oracle Recovery Manager（RMAN）客户端并连接到目标数据库。">中所述</a> 。</span></span></li>
                           <li class="stepexpand"><span>确定要闪回的表是否依赖于其他表。</span><div>
                                 <p>使用以下SQL查询来确定<code class="codeph">hr.employees</code>的依赖<code class="codeph">hr.employees</code> ：</p><pre class="oac_no_warn" dir="ltr">SELECT other.owner，other.table_name FROM sys.all_constraints this，sys.all_constraints other WHERE this.owner ='HR'AND this.table_name ='EMPLOYEES'AND this.r_owner = other.owner AND this.r_constraint_name = other.constraint_name AND this.constraint_type ='R'; OWNER TABLE_NAME ------------------------------ ------------------ ------------人力资源员工HR人力资源部门</pre></div>
                           </li>
                           <li class="stepexpand"><span>确保为要闪回的表及其从属表启用了行移动。</span><div>
                                 <p>在此示例中，必须使用“在表上启用行移动<span class="q">”中</span>描述的步骤为表<code class="codeph">hr.employees</code> ， <code class="codeph">hr.jobs</code>和<code class="codeph">hr.departments</code> <span class="q"><a href="performing-backup-and-recovery.html#GUID-64C48A91-42DF-4E07-834A-987802E1130D" title="在使用闪回表之前，必须确保在要闪回的表上启用行移动，或者返回到先前的状态。行移动表示在闪回发生后rowid将发生变化。">启用行移动</a> 。</span></p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>标识要将表返回的时间，SCN或还原点。</span><div>
                                 <p>在这个例子中，我们假设5分钟前意外插入了行。因此，您必须回滚到当前时间前5分钟的时间戳。</p>
                                 <div class="infoboxnote" id="GUID-3132E637-78D5-4B3A-A88B-99F50159C479__GUID-39FE8A50-36DF-47F8-846E-0C356D5B0BF0">
                                    <p class="notep1">注意：</p>
                                    <p>如果您不知道发生意外更改的时间，可以使用Oracle闪回版本查询来查看目标表的所有最近更改。使用此功能超出了本文档的范围。</p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>验证是否存在足够的撤消数据以将表回滚到指定的目标。</span><div>
                                 <p>使用以下查询确定撤消数据的保留时间：</p><pre class="oac_no_warn" dir="ltr">SELECT NAME，VALUE / 60 MINUTES_RETAINED from V $ PARAMETER WHERE NAME ='undo_retention'; NAME MINUTES_RETAINED --------------- ---------------- undo_retention 15</pre></div>
                           </li>
                           <li class="stepexpand"><span>使用<code class="codeph">FLASHBACK TABLE</code>语句对所需的表执行闪回操作。</span><div>
                                 <p>以下SQL语句将表<code class="codeph">hr.employees</code> ， <code class="codeph">hr.jobs</code>和<code class="codeph">hr.departments</code>到指定的时间：</p><pre class="oac_no_warn" dir="ltr">FLASHBACK TABLE hr.employees TO TIMESTAMP TO_TIMESTAMP（'2012-03-27 09:30:00'，'YYYY-MM-DD HH：MI：SS'）; FLASHBACK TABLE hr.jobs TO TIMESTAMP TO_TIMESTAMP（'2012-03-27 09:30:00'，'YYYY-MM-DD HH：MI：SS'）; FLASHBACK TABLE hr.departments到TIMESTAMP TO_TIMESTAMP（'2012-03-27 09:30:00'，'YYYY-MM-DD HH：MI：SS'）;</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-3132E637-78D5-4B3A-A88B-99F50159C479__GUID-848A203C-265E-4D82-8C63-DC928FF63B00">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="performing-backup-and-recovery.html#GUID-18074BFE-AC22-4169-B321-774F1D1D5325" title="Oracle闪回表使您可以在以前将一个或多个表回滚到其内容，而不会影响其他数据库对象。">使用Oracle闪回表重绕表</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="performing-backup-and-recovery.html#GUID-E04D3223-BEB0-4212-97E1-BA2A236C3523" title="Oracle建议的恢复功能使用Data Recovery Advisor，这是一种Oracle数据库功能，可自动诊断数据故障，确定并提供适当的修复选项，并在用户请求时执行修复。">执行Oracle Advised Recovery</a> ”</span></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADMQS0944"></a><div class="props_rev_3"><a id="GUID-5A842A1B-4A32-46D1-9269-3F51244BBEB9" name="GUID-5A842A1B-4A32-46D1-9269-3F51244BBEB9"></a><h4 id="ADMQS-GUID-5A842A1B-4A32-46D1-9269-3F51244BBEB9" class="sect4"><span class="enumeration_section">9.8.2</span>使用Oracle Flashback Drop恢复丢弃的表</h4>
                  <div>
                     <div><span>Oracle Flashback Drop使您可以反转删除（删除）表的影响，将删除的表与索引和触发器等依赖对象一起返回到数据库。</span> 此功能将已删除的对象存储在回收站中，从中可以检索它们，直到清除回收站，显式或因为需要空间。
                     </div>
                     <p>与闪回表一样，您可以在数据库打开时使用闪回删除。此外，您可以执行闪回而不撤消不受闪回删除操作影响的对象的更改。闪回表比需要使数据库脱机并从备份还原文件的介质恢复形式更方便。</p>
                     <div class="infoboxnote" id="GUID-5A842A1B-4A32-46D1-9269-3F51244BBEB9__GUID-ECBB932F-71EB-45A6-89F4-E62A8FF69305">
                        <p class="notep1">注意：</p>
                        <p>对于可使用Flashback Drop恢复的表，它必须驻留在本地管理的表空间中。此外，无论表空间类型如何，您都无法使用Flashback Drop恢复<code class="codeph">SYSTEM</code>表空间中的表。
                        </p>
                     </div>
                     <p>本节包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-DABDC474-A7E5-458A-8D4A-876C18C7132A" title="为了了解Flashback Drop，您将创建一个名为reg_hist的新表，然后将其删除。">放下一张桌子</a></p>
                        </li>
                        <li>
                           <p><a href="performing-backup-and-recovery.html#GUID-1DE547D1-3AF0-4269-8BAA-4C298EC05905" title="以下过程从回收站中检索reg_hist。">检索丢弃的表</a></p>
                        </li>
                     </ul>
                  </div><a id="ADMQS12238"></a><a id="ADMQS0945"></a><div class="props_rev_3"><a id="GUID-DABDC474-A7E5-458A-8D4A-876C18C7132A" name="GUID-DABDC474-A7E5-458A-8D4A-876C18C7132A"></a><h5 id="ADMQS-GUID-DABDC474-A7E5-458A-8D4A-876C18C7132A" class="sect5"><span class="enumeration_section">9.8.2.1</span>删除表</h5>
                     <div>
                        <div><span>为了了解Flashback Drop，您将创建一个名为<code class="codeph">reg_hist</code>的新表，然后将其删除。</span> 数据库将表放在回收站中，以便可以使用闪回删除功能检索它。
                        </div>
                        <div class="section">
                           <p class="subhead3" id="GUID-DABDC474-A7E5-458A-8D4A-876C18C7132A__GUID-FBAEE39C-6185-4C2D-9979-5862A66872CE">要创建然后删除表：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>将SQL * Plus连接到<code class="codeph">hr</code>模式。</span></li>
                           <li class="stepexpand"><span>使用以下命令，基于<code class="codeph">hr</code>模式中的现有<code class="codeph">REGIONS</code>表创建表<code class="codeph">reg_hist</code> ：</span><div><pre class="oac_no_warn" dir="ltr">CREATE TABLE reg_hist为SELECT * FROM REGIONS;</pre></div>
                           </li>
                           <li class="stepexpand"><span>使用以下命令删除<code class="codeph">reg_hist</code>表：</span><div><pre class="oac_no_warn" dir="ltr">DROP TABLE REG_HIST;</pre><p>由于为数据库启用了闪回，因此删除的表存储在回收站中。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>显示<code class="codeph">hr</code>模式中的表。</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM TAB; TNAME TABTYPE CLUSTERID ------------------------------ ------- ---------- BIN $ ANbliLHaSiu02xI + zbvDvQ == $ 0表国家/地区表部门表员工表EMP_DETAILS_VIEW视图作业表JOB_HISTORY表位置表区域表9选择的行。
</pre><p>命令输出中显示的第一个名称（以“BIN”开头）是您刚刚删除的表。由于启用了闪回数据库，因此已删除的表仍在回收站中，因此显示在命令输出中。</p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="ADMQS12239"></a><a id="ADMQS0946"></a><div class="props_rev_3"><a id="GUID-1DE547D1-3AF0-4269-8BAA-4C298EC05905" name="GUID-1DE547D1-3AF0-4269-8BAA-4C298EC05905"></a><h5 id="ADMQS-GUID-1DE547D1-3AF0-4269-8BAA-4C298EC05905" class="sect5"><span class="enumeration_section">9.8.2.2</span>检索丢弃的表</h5>
                     <div>
                        <div><span>以下过程从回收站中检索<code class="codeph">reg_hist</code> 。</span> 本节假定您已创建并删除了<code class="codeph">reg_hist</code>表，如<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-DABDC474-A7E5-458A-8D4A-876C18C7132A" title="For the purpose of learning about Flashback Drop, you will create a new table named reg_hist and then drop it.">删除表</a> ”中<a href="performing-backup-and-recovery.html#GUID-DABDC474-A7E5-458A-8D4A-876C18C7132A" title="为了了解Flashback Drop，您将创建一个名为reg_hist的新表，然后将其删除。">所述</a> 。</span></div>
                        <div class="section">
                           <p class="subhead3" id="GUID-1DE547D1-3AF0-4269-8BAA-4C298EC05905__GUID-0860E76F-00FB-4A64-8A56-31D4D3ACA1CE">要执行闪回删除操作：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>将SQL * Plus连接到<code class="codeph">hr</code>模式，并在回收站中获取已删除表的名称。</span><div><pre class="oac_no_warn" dir="ltr">SHOW RECYCLEBIN; ORIGINAL NAME RECYCLEBIN NAME OBJECT TYPE DROP TIME -------------- ---------------------------- -  ------------ ----------- REG_HIST BIN $ ANbliLHaSiu02xI + zbvDvQ == $ 0 TABLE 2012-03-26：16：51：54</pre></div>
                           </li>
                           <li class="stepexpand"><span>使用<code class="codeph">FLASHBACK TABLE … TO BEFORE DROP</code>命令检索已删除的表。</span><div>
                                 <p>以下命令执行<code class="codeph">HR.REG_HIST</code>表的闪回。
                                 </p><pre class="oac_no_warn" dir="ltr">FLASHBACK TABLE HR.REG_HIST在DROP之前;</pre><div class="infoboxnote" id="GUID-1DE547D1-3AF0-4269-8BAA-4C298EC05905__GUID-63DE9363-CAC2-4FB9-B126-3C44B8D10EB6">
                                    <p class="notep1">注意：</p>
                                    <p>从回收站检索表时，将使用它检索回收站中表的所有从属对象。它们无法单独检索。</p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>如果检索到的表在放入回收站之前具有引用约束，则重新创建它们。</span><div>
                                 <p>必须手动执行此步骤，因为回收站不会保留对表的引用约束。</p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div>
               </div><a id="ADMQS12240"></a><a id="ADMQS101"></a><div class="props_rev_3"><a id="GUID-5CC5F46F-2D15-4333-BC1A-2626046EA488" name="GUID-5CC5F46F-2D15-4333-BC1A-2626046EA488"></a><h4 id="ADMQS-GUID-5CC5F46F-2D15-4333-BC1A-2626046EA488" class="sect4"><span class="enumeration_section">9.8.3</span>使用Oracle闪回数据库重绕数据库</h4>
                  <div>
                     <div><span>与其他闪回功能不同，Oracle闪回数据库在物理级别上运行。使用闪回数据库时，您当前的数据文件将在以前恢复为其内容。</span> 结果类似于数据库时间点恢复，但闪回数据库可以更快，因为它不需要您还原和恢复数据文件。此外，与媒体恢复相比，闪回数据库需要有限的重做数据应用。
                     </div>
                     <div class="section">
                        <p>闪回数据库使用闪回日志来访问先前版本的数据块，还使用归档重做日志文件中的某些数据。要选择使用闪回数据库修复数据库，必须已配置数据库以生成闪回日志，如<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-192720EF-64C7-465B-982A-F8AABFD81DC1">配置恢复设置”中所述</a> 。</span></p>
                        <div class="infoboxnote" id="GUID-5CC5F46F-2D15-4333-BC1A-2626046EA488__GUID-9B0CB5E6-7CA6-44D2-B850-20632E00A033">
                           <p class="notep1">注意：</p>
                           <p>您可以使用Oracle Recovery Manager（RMAN） <code class="codeph">FLASHBACK DATABASE</code>命令仅回滚整个多租户容器数据库（CDB），而不是单个可插拔数据库（PDB）。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5CC5F46F-2D15-4333-BC1A-2626046EA488__GUID-DACDF0F8-8C68-466E-A83B-E62E17E40B24">要执行闪回数据库操作：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>按照<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="要执行备份或恢复操作或配置备份和恢复设置，必须启动Oracle Recovery Manager（RMAN）客户端并连接到目标数据库。">使用RMAN连接到目标数据库”中的说明将RMAN连接到目标数据库</a> 。</span></span></li>
                        <li class="stepexpand"><span>确定必须执行闪回数据库的所需SCN，还原点或时间点。此示例将数据库倒回到指定的时间点。</span><div>
                              <div class="infoboxnotealso" id="GUID-5CC5F46F-2D15-4333-BC1A-2626046EA488__GUID-2EB1492D-1376-461C-B0D1-E60A1747D2C5">
                                 <p class="notep1">也可以看看：</p>
                                 <p>有关如何确定SCN然后将数据库闪回到此SCN的信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV89752" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>一致地关闭数据库，确保任何实例都不打开它，然后装入数据库。</span><div><pre class="oac_no_warn" dir="ltr">立即关闭;启动安装;</pre></div>
                        </li>
                        <li class="stepexpand"><span>将数据库闪回到所需的时间。</span><div>
                              <p>在此示例中，您需要将整个数据库闪回到<code class="codeph">TIME</code>子句中指定的<code class="codeph">TIME</code> 。
                              </p><pre class="oac_no_warn" dir="ltr">FLASHBACK DATABASE到TIME“TO_DATE（'03 / 20/12'，'MM / DD / YY'）”;</pre></div>
                        </li>
                        <li class="stepexpand"><span>以只读方式打开数据库并运行一些查询以验证数据库内容。</span><div>
                              <p>以下命令以只读模式打开数据库：</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE OPEN READ ONLY;</pre></div>
                        </li>
                        <li class="stepexpand"><span>确认数据库的状态与预期一致后，通过使用<code class="codeph">RESETLOGS</code>选项打开数据库，使数据库可用于更新。</span><div><pre class="oac_no_warn" dir="ltr">立即关闭;启动安装; ALTER DATABASE OPEN RESETLOGS;</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADMQS12241"></a><a id="ADMQS0941"></a><div class="props_rev_3"><a id="GUID-2DBCE503-D70F-4EAD-8C8C-E7C1A936396F" name="GUID-2DBCE503-D70F-4EAD-8C8C-E7C1A936396F"></a><h4 id="ADMQS-GUID-2DBCE503-D70F-4EAD-8C8C-E7C1A936396F" class="sect4"><span class="enumeration_section">9.8.4</span>恢复和恢复数据库</h4>
                  <div>
                     <div><span>本节演示如何使用Oracle Recovery Manager（RMAN）还原和恢复整个数据库。</span> 此示例假定您在丢失一个或多个数据文件后正在还原和恢复数据库，但仍有可用的服务器参数文件和控制文件。您还可以使用RMAN还原丢失的服务器参数文件或控制文件。
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-2DBCE503-D70F-4EAD-8C8C-E7C1A936396F__GUID-AF7793F1-8372-4867-9C18-2DC3741CA36B">要还原和恢复整个数据库：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>按照<span class="q">“ <a href="performing-backup-and-recovery.html#GUID-7ACCA8DF-537B-4DA9-A7C7-306FBFC9D903" title="要执行备份或恢复操作或配置备份和恢复设置，必须启动Oracle Recovery Manager（RMAN）客户端并连接到目标数据库。">使用RMAN连接到目标数据库”中的说明将RMAN连接到目标数据库</a> 。</span></span></li>
                        <li class="stepexpand"><span>确保已装入数据库，但未打开。</span><div><pre class="oac_no_warn" dir="ltr">立即关闭;启动安装;</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用以下命令还原数据库：</span><div><pre class="oac_no_warn" dir="ltr">RESTORE DATABASE;</pre><p>RMAN备份中的数据文件将还原到其默认位置。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>使用<code class="codeph">RECOVER</code>命令恢复数据库。</span><div><pre class="oac_no_warn" dir="ltr">恢复数据库;</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用以下命令打开数据库：</span><div><pre class="oac_no_warn" dir="ltr">ALTER DATABASE OPEN;</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-2DBCE503-D70F-4EAD-8C8C-E7C1A936396F__GUID-651C0CD3-1189-4422-B1B9-D780867D7B59">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关恢复多租户容器数据库（CDB）和可插拔数据库（PDB）的信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV636" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”</cite></span></a></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV008" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”</cite></span></a> ，了解仅在备份时控制文件和服务器参数文件可用时恢复数据库的说明</p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admqs&amp;id=BRADV89776" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”，</cite></span></a>以获取有关将数据文件还原到与默认位置不同的位置的信息</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADMQS097"></a><div class="props_rev_3"><a id="GUID-37FEAC3A-99F6-441F-93EE-55C4D69728F3" name="GUID-37FEAC3A-99F6-441F-93EE-55C4D69728F3"></a><h3 id="ADMQS-GUID-37FEAC3A-99F6-441F-93EE-55C4D69728F3" class="sect3"><span class="enumeration_section">9.9</span>执行备份和恢复：Oracle示例系列</h3>
               <div>
                  <p>Oracle示例（OBE）有一系列关于<span class="italic">Oracle Database 2 Day DBA</span>指南的系列文章。本OBE将引导您完成本节中的任务，并包含带注释的屏幕截图。
                  </p>
                  <div class="section">
                     <p>要查看Performing Backup and Recovery OBE，请在Web浏览器中输入以下URL：</p>
                     <p><a href="https://apexapps.oracle.com/pls/apex/f?p=44785:24:::NO:24:P24_CONTENT_ID:16832" target="_blank"><code class="codeph">https://apexapps.oracle.com/pls/apex/f?p=44785:24:::NO:24:P24_CONTENT_ID:16832</code></a></p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
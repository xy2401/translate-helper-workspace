<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Become familiar with concepts related to XStream Out."></meta>
      <meta name="description" content="Become familiar with concepts related to XStream Out."></meta>
      <title>XStream Out Concepts</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="XStream Guide "></meta>
      <meta property="og:description" content="Become familiar with concepts related to XStream Out."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="XStream Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="xstream-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-07T01:45:15-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2009, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96280-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="xstream-out.html" title="Previous" type="text/html"></link>
      <link rel="next" href="configuring-xstream-out.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XStream Guide"></meta>
    <meta name="dcterms.isVersionOf" content="XSTRM"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="xstream-out.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="configuring-xstream-out.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">XStream指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="xstream-out.html" property="item" typeof="WebPage"><span property="name">XStream Out</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">XStream Out Concepts</li>
            </ol>
            <a id="GUID-B59B1F79-91F6-4495-B946-5DCEB317E0D6" name="GUID-B59B1F79-91F6-4495-B946-5DCEB317E0D6"></a><a id="XSTRM187"></a>
            
            <h2 id="XSTRM-GUID-B59B1F79-91F6-4495-B946-5DCEB317E0D6" class="sect2"><span class="enumeration_chapter">3</span> XStream Out Concepts</h2>
         </header>
         <div class="ind">
            <div>
               <p>熟悉与XStream Out相关的概念。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-85599FEC-CA5C-4A24-BD20-86CE5D280BA5">XStream Out简介</a><br>XStream Out可以从Oracle数据库的重做日志中捕获事务，并将它们有效地发送到客户端应用程序。
                  </li>
                  <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-EDE9234C-ED4B-48A8-94FA-D07055F2FC20">捕获进程</a><br>熟悉与捕获过程相关的概念。
                  </li>
                  <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-30DAD02C-CF3F-4E55-B086-71C79ACDB56F">出站服务器</a><br>使用XStream Out，出站服务器将数据库更改发送到客户端应用程序。
                  </li>
                  <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-3311DD1F-5186-4F94-B471-B0557D4AB2D2">LCR和XStream Out的位置</a><br>XStream Out出站服务器将捕获进程捕获的LCR流式传输到客户端应用程序。LCR的位置标识其在交易中的LCR流中的位置。
                  </li>
                  <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-78C2B119-E3C0-4A79-92D2-72D762EF63E9">XStream Out和分布式事务</a><br>有关XStream Out和分布式事务的注意事项。
                  </li>
                  <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-42DE906D-2E9E-4CD5-960A-02741B73D564">XStream Out和Security</a><br>了解与客户端应用程序和XStream组件相关的安全性，以及捕获用户和连接用户所需的权限。
                  </li>
                  <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-EE24B98B-15DD-4DCD-A7D6-58D505C20D43">XStream Out和其他Oracle数据库组件</a><br>XStream Out可以与其他Oracle数据库组件一起使用。
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-B59B1F79-91F6-4495-B946-5DCEB317E0D6__GUID-9E4F1FF1-5A5E-4D67-AD3B-74AAE3DDF6EB">
                  <p class="notep1">也可以看看：</p>
                  <p><a href="configuring-xstream-out.html#GUID-1338E648-E214-4666-98A1-8B8D0085EB23" title="您可以配置XStream Out使用的Oracle数据库组件。">配置XStream Out</a></p>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="xstream-out.html#GUID-40B2996E-433C-4240-8022-8505273F99EF" title="您可以配置和管理XStream Out环境。">XStream Out</a></p>
                  </div>
               </div>
            </div>
            <a id="XSTRM1087"></a><div class="props_rev_3"><a id="GUID-85599FEC-CA5C-4A24-BD20-86CE5D280BA5" name="GUID-85599FEC-CA5C-4A24-BD20-86CE5D280BA5"></a><h3 id="XSTRM-GUID-85599FEC-CA5C-4A24-BD20-86CE5D280BA5" class="sect3"><span class="enumeration_section">3.1</span> XStream Out简介</h3>
               <div>
                  <p>XStream Out可以从Oracle数据库的重做日志中捕获事务，并将它们有效地发送到客户端应用程序。</p>
                  <p>XStream Out提供基于事务的接口，用于将这些更改流式传输到客户端应用程序。客户端应用程序可以与其他系统交互，包括非Oracle系统，例如非Oracle数据库或文件系统。</p>
                  <p>在XStream Out配置中，捕获进程捕获数据库更改并将这些更改发送到出站服务器。本节详细介绍了捕获进程和出站服务器。</p>
                  <p>XStream Out具有OCI和Java接口，并支持Oracle数据库支持的大多数数据类型，包括LOB， <code class="codeph">LONG</code> ， <code class="codeph">LONG</code> <code class="codeph">RAW</code>和<code class="codeph">XMLType</code> 。
                  </p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-85599FEC-CA5C-4A24-BD20-86CE5D280BA5__GUID-8C3412CD-25DB-4F92-A33D-AFD113A4F343">
                     <p class="notep1">也可以看看：</p>
                     <p></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=LNOCI72903" target="_blank"><span><cite>Oracle调用接口程序员指南</cite></span></a></p>
                        </li>
                        <li>
                           <p><a href="../stxjv/index.html" target="_blank"><span><cite>Oracle数据库XStream Java API参考</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-B59B1F79-91F6-4495-B946-5DCEB317E0D6" title="熟悉与XStream Out相关的概念。">XStream Out Concepts</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="XSTRM72655"></a><div class="props_rev_3"><a id="GUID-EDE9234C-ED4B-48A8-94FA-D07055F2FC20" name="GUID-EDE9234C-ED4B-48A8-94FA-D07055F2FC20"></a><h3 id="XSTRM-GUID-EDE9234C-ED4B-48A8-94FA-D07055F2FC20" class="sect3"><span class="enumeration_section">3.2</span>捕获过程</h3>
               <p>熟悉与捕获过程相关的概念。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-18DE4FD3-F36A-4108-BC16-AF31AF4055E3">捕获过程概述</a><br><span class="bold">捕获过程</span>是一个可选的Oracle后台进程，它扫描数据库重做日志以捕获对数据库对象所做的DML和DDL更改。
                     </li>
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-19C316B4-C3B1-4C57-9CC7-E60FD728EC40">捕获过程捕获的数据类型</a><br>捕获过程可以捕获对大多数数据类型的列所做的更改。
                     </li>
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-A7AFC167-DC64-4645-BB8A-25B6204E3ADE">捕获进程捕获的DML更改类型</a><br>捕获过程可以捕获不同类型的DML更改。
                     </li>
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-CC32AED8-6587-4CA7-8786-CDF2C4968DB1">本地捕获和下游捕获</a><br>您可以将捕获过程配置为在源数据库上本地运行或在下游数据库上远程运行。
                     </li>
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-69A71BA4-5E4F-45DF-9CC7-8C258E40E022">捕获进程和受限制的会话</a><br>启用和禁用受限会话会影响捕获过程。
                     </li>
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-E52BD18C-E1D9-4B09-9ADD-BCBC2290C2CB">捕获过程子组件</a><br>捕获过程子组件是读取器服务器，一个或多个准备服务器和构建器服务器。
                     </li>
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-515A37C2-A8BF-4856-99D9-7D1ACE393C92">捕获过程状态</a><br>捕获过程的状态描述了捕获过程当前正在执行的操作。
                     </li>
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-E050B48F-5FAF-4F1C-B18B-2F1D871BCE09">捕获过程参数</a><br>捕获过程参数控制捕获过程的操作方式。
                     </li>
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-E3FF6FC1-6136-4748-9DFB-BB157CB77560">捕获进程检查点和XStream Out</a><br>检查点是有关捕获进程的当前状态的信息，该状态持久存储在运行捕获进程的数据库的数据字典中。
                     </li>
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-C9D4482E-F066-4BE1-BFD1-CBF77AC17AA2">与捕获过程相关的SCN值</a><br>特定系统更改编号（SCN）值对于捕获过程很重要。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-B59B1F79-91F6-4495-B946-5DCEB317E0D6" title="熟悉与XStream Out相关的概念。">XStream Out Concepts</a></p>
                     </div>
                  </div>
               </div>
               <a id="XSTRM72636"></a><a id="XSTRM72656"></a><div class="props_rev_3"><a id="GUID-18DE4FD3-F36A-4108-BC16-AF31AF4055E3" name="GUID-18DE4FD3-F36A-4108-BC16-AF31AF4055E3"></a><h4 id="XSTRM-GUID-18DE4FD3-F36A-4108-BC16-AF31AF4055E3" class="sect4"><span class="enumeration_section">3.2.1</span>捕获过程概述</h4>
                  <div>
                     <p><span class="bold">捕获过程</span>是一个可选的Oracle后台进程，它扫描数据库重做日志以捕获对数据库对象所做的DML和DDL更改。
                     </p>
                     <p>重做日志的主要功能是记录对数据库所做的所有更改。捕获过程从重做日志捕获数据库更改，生成更改的数据库称为捕获过程的<span class="bold">源数据库</span> 。
                     </p>
                     <p>当捕获进程捕获数据库更改时，它会将其转换为称为逻辑更改记录（LCR）的特定消息格式。在XStream Out配置中，捕获进程将这些LCR发送到出站服务器。</p>
                     <p><a href="xstream-out-concepts.html#GUID-18DE4FD3-F36A-4108-BC16-AF31AF4055E3__BABHABJC">图3-1</a>显示了捕获过程。
                     </p>
                     <div class="figure" id="GUID-18DE4FD3-F36A-4108-BC16-AF31AF4055E3__BABHABJC">
                        <p class="titleinfigure">图3-1捕获过程</p><img src="img/xstrm081.gif" width="181" alt="下面是图3-1的描述" title="下面是图3-1的描述" longdesc="img_text/xstrm081.html"><br><a href="img_text/xstrm081.html">“图3-1捕获过程”的描述</a></div>
                     <!-- class="figure" -->
                     <p>捕获进程可以在其源数据库或远程数据库上运行。捕获进程在其源数据库上运行时，捕获进程是<span class="bold">本地捕获进程</span> 。
                     </p>
                     <p>您还可以通过在不同服务器上运行捕获进程来捕获源数据库的更改。捕获进程在远程数据库上运行时，捕获进程称为<span class="bold">下游捕获进程</span> ，远程数据库称为<span class="bold">下游数据库</span> 。日志文件将写入远程数据库和源数据库。在此配置中，源日志文件必须在下游捕获数据库中可用。远程数据库上的捕获进程从源数据库中挖掘日志并在本地对其进行分阶段。当您希望将捕获更改的处理从生产数据库卸载到不同的远程数据库时，此配置非常有用。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-EDE9234C-ED4B-48A8-94FA-D07055F2FC20" title="熟悉与捕获过程相关的概念。">捕获进程</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM72657"></a><div class="props_rev_3"><a id="GUID-19C316B4-C3B1-4C57-9CC7-E60FD728EC40" name="GUID-19C316B4-C3B1-4C57-9CC7-E60FD728EC40"></a><h4 id="XSTRM-GUID-19C316B4-C3B1-4C57-9CC7-E60FD728EC40" class="sect4"><span class="enumeration_section">3.2.2</span>捕获过程捕获的数据类型</h4>
                  <div>
                     <p>捕获过程可以捕获对大多数数据类型的列所做的更改。</p>
                     <p>捕获由对表进行的DML更改导致的行更改时，捕获过程可捕获对以下数据类型的列所做的更改：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">VARCHAR2</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">NVARCHAR2</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">数</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">浮动</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">长</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">日期</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">BINARY_FLOAT</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">BINARY_DOUBLE</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">TIMESTAMP</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">TIMESTAMP</code> <code class="codeph">WITH</code> <code class="codeph">TIME</code> <code class="codeph">ZONE</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">TIMESTAMP</code> <code class="codeph">WITH</code> <code class="codeph">LOCAL</code> <code class="codeph">TIME</code> <code class="codeph">ZONE</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">INTERVAL</code> <code class="codeph">YEAR</code> <code class="codeph">TO</code> <code class="codeph">MONTH</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">INTERVAL</code> <code class="codeph">DAY</code> <code class="codeph">TO</code> <code class="codeph">SECOND</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">生的</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">LONG</code> <code class="codeph">RAW</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">UROWID</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">CHAR</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">NCHAR</code></p>
                        </li>
                        <li>
                           <p>带有<code class="codeph">BASICFILE</code>或<code class="codeph">SECUREFILE</code>存储的<code class="codeph">CLOB</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">NCLOB</code>具有<code class="codeph">BASICFILE</code>或<code class="codeph">SECUREFILE</code>存储</p>
                        </li>
                        <li>
                           <p>带有<code class="codeph">BASICFILE</code>或<code class="codeph">SECUREFILE</code>存储的<code class="codeph">BLOB</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">XMLType</code>存储为<code class="codeph">CLOB</code> ，对象关系或二进制XML</p>
                        </li>
                        <li>
                           <p>对象类型</p>
                        </li>
                        <li>
                           <p>可变数组</p>
                        </li>
                        <li>
                           <p><code class="codeph">REF</code>数据类型</p>
                        </li>
                        <li>
                           <p>以下Oracle提供的类型： <code class="codeph">ANYDATA</code> ， <code class="codeph">SDO_GEOMETRY</code>和媒体类型</p>
                        </li>
                        <li>
                           <p><code class="codeph">BFILE</code></p>
                        </li>
                     </ul>
                     <p>如果XStream正在复制对象类型的数据，则复制必须是单向的，并且所有复制站点必须就对象类型中属性的名称和数据类型达成一致。在创建对象类型时，可以建立属性的名称和数据类型。例如，请考虑以下对象类型：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE cust_address_typ AS OBJECT（street_address VARCHAR2（40），postal_code VARCHAR2（10），city VARCHAR2（30），state_province VARCHAR2（10），country_id CHAR（2））; /</pre><p>在所有复制站点， <code class="codeph">street_address</code>必须是<code class="codeph">VARCHAR2(40)</code> ， <code class="codeph">postal_code</code>必须是<code class="codeph">VARCHAR2(10)</code> ， <code class="codeph">city</code>必须是<code class="codeph">VARCHAR2(30)</code> ，依此类推。
                     </p>
                     <div class="infoboxnote" id="GUID-19C316B4-C3B1-4C57-9CC7-E60FD728EC40__GUID-29B02489-8A9B-4FEF-90A2-91BD274D40C0">
                        <p class="notep1">注意：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>所述的最大大小<code class="codeph">VARCHAR2</code> ， <code class="codeph">NVARCHAR2</code> ，和<code class="codeph">RAW</code>数据类型已在Oracle数据库<span class="italic">12c</span>中，当已增加<code class="codeph">COMPATIBLE</code>初始化参数设置为<code class="codeph">12.0.0</code>和<code class="codeph">MAX_STRING_SIZE</code>初始化参数设置为<code class="codeph">EXTENDED</code> 。</p>
                           </li>
                           <li>
                              <p>存储为<code class="codeph">CLOB</code> <code class="codeph">XMLType</code>在Oracle Database 12 <span class="italic">c</span>第1版（12.1）中已弃用。
                              </p>
                           </li>
                           <li>
                              <p>对于<code class="codeph">BFILE</code> ，仅复制数据类型结构，而不复制文件系统上存在的<code class="codeph">BFILE</code>的内容。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-A38AAF6A-C7CC-459A-8E78-352DBAEBD5FD">ID密钥LCR</a><br><span class="bold">ID密钥LCR</span>是特殊类型的行LCR。 ID密钥LCR使XStream客户端应用程序能够处理包含不支持的数据类型的行的更改。
                        </li>
                        <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-F26BB0CE-4F76-486D-9EE0-5E0D59E5C6D9">ID Key LCR演示</a><br>有一个演示可以创建一个处理ID密钥LCR的示例客户端应用程序。
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-19C316B4-C3B1-4C57-9CC7-E60FD728EC40__GUID-079E55AE-7CF6-4E57-BE75-B9A92A7F949E">
                        <p class="notep1">也可以看看：</p>
                        <p>有关数据类型的信息，请<a href="../sqlrf/Data-Types.html#SQLRF0021" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-EDE9234C-ED4B-48A8-94FA-D07055F2FC20" title="熟悉与捕获过程相关的概念。">捕获进程</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="XSTRM72577"></a><div class="props_rev_3"><a id="GUID-A38AAF6A-C7CC-459A-8E78-352DBAEBD5FD" name="GUID-A38AAF6A-C7CC-459A-8E78-352DBAEBD5FD"></a><h5 id="XSTRM-GUID-A38AAF6A-C7CC-459A-8E78-352DBAEBD5FD" class="sect5"><span class="enumeration_section">3.2.2.1</span> ID密钥LCR</h5>
                     <div>
                        <p><span class="bold">ID密钥LCR</span>是特殊类型的行LCR。 ID密钥LCR使XStream客户端应用程序能够处理包含不支持的数据类型的行的更改。
                        </p>
                        <p>XStream Out不完全支持行LCR中的以下数据类型：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ROWID</code></p>
                           </li>
                           <li>
                              <p>嵌套表</p>
                           </li>
                           <li>
                              <p>以下Oracle提供的类型： <code class="codeph">ANYTYPE</code> ， <code class="codeph">ANYDATASET</code> ，URI类型， <code class="codeph">SDO_TOPO_GEOMETRY</code> ， <code class="codeph">SDO_GEORASTER</code>和<code class="codeph">Expression</code> 。
                              </p>
                           </li>
                        </ul>
                        <p>这些数据类型限制适用于普通（堆组织）表和索引组织表。</p>
                        <p>ID键LCR不包含行更改的所有列。相反，它们包含已更改行的rowid，一组用于标识表中行的键列，以及XStream Out支持的表的标量列的数据。ID密钥LCR不包含不受支持的数据类型列的数据。</p>
                        <p>XStream Out可以通过将<code class="codeph">CAPTURE_IDKEY_OBJECTS</code>捕获进程参数设置为<code class="codeph">Y</code>来捕获不完全支持的表的更改。 XStream客户端应用程序可以通过以下方式使用ID密钥LCR：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果应用程序不需要不受支持的列中的数据，则应用程序可以正常处理ID密钥LCR中支持的列的值。</p>
                           </li>
                           <li>
                              <p>如果应用程序需要不受支持的列中的数据，则应用程序可以使用ID密钥LCR中的信息来查询数据库中的正确行，并使用该行的不受支持的数据。</p>
                           </li>
                        </ul>
                        <p>您可以使用<code class="codeph">DBA_XSTREAM_OUT_SUPPORT_MODE</code>视图显示ID密钥LCR支持的本地表列表。此视图显示<code class="codeph">SUPPORT_MODE</code>列中表的以下类型的XStream Out支持：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">FULL</code>对于由XStream的缺货充分支持的表（不使用ID键的LCR）</p>
                           </li>
                           <li>
                              <p>仅使用ID密钥LCR支持的表的<code class="codeph">ID</code> <code class="codeph">KEY</code></p>
                           </li>
                           <li>
                              <p>对于XStream Out不支持的表， <code class="codeph">NONE</code> 。
                              </p>
                              <p>甚至ID键LCR也不能用于处理<code class="codeph">DBA_XSTREAM_OUT_SUPPORT_MODE</code>视图中显示<code class="codeph">NONE</code>表中行的更改。
                              </p>
                           </li>
                        </ul>
                        <p>例如，运行以下查询以显示对数据库中所有表的XStream Out支持：</p><pre class="oac_no_warn" dir="ltr">COLUMN所有者格式A30 COLUMN OBJECT_NAME FORMAT A30 COLUMN SUPPORT_MODE FORMAT A12 SELECT OWNER，OBJECT_NAME，SUPPORT_MODE FROM DBA_XSTREAM_OUT_SUPPORT_MODE ORDER BY OBJECT_NAME;</pre><p>您的输出类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">OWNER OBJECT_NAME SUPPORT_MODE ------------------------------ ----------------- ------------- ------------。。。IX ORDERS_QUEUETABLE无O ORDER_ITEMS全SH PLAN_TABLE下午PRINT_MEDIA ID KEY。。。
</pre></div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-A38AAF6A-C7CC-459A-8E78-352DBAEBD5FD__GUID-F78A1486-8674-42CD-9CB6-08CD4FCC63C2">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../refrn/DBA_XSTREAM_OUT_SUPPORT_MODE.html#REFRN23785" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="general-xstream-concepts.html#GUID-38751D5D-FFB4-4108-B675-2DA6F7FB9330" title="行LCR描述了对单行中数据的更改或对行中单个LOB列，LONG列，LONG RAW列或XMLType列的更改。">行LCR</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="managing-xstream-out.html#GUID-AB998819-B851-478E-8412-3E30EBFC8FD4" title="捕获过程参数控制捕获过程的操作方式。您可以使用DBMS_CAPTURE_ADM包中的SET_PARAMETER过程设置捕获过程参数。">设置捕获过程参数</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-19C316B4-C3B1-4C57-9CC7-E60FD728EC40" title="捕获过程可以捕获对大多数数据类型的列所做的更改。">捕获过程捕获的数据类型</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM72639"></a><div class="props_rev_3"><a id="GUID-F26BB0CE-4F76-486D-9EE0-5E0D59E5C6D9" name="GUID-F26BB0CE-4F76-486D-9EE0-5E0D59E5C6D9"></a><h5 id="XSTRM-GUID-F26BB0CE-4F76-486D-9EE0-5E0D59E5C6D9" class="sect5"><span class="enumeration_section">3.2.2.2</span> ID密钥LCR演示</h5>
                     <div>
                        <p>有一个演示可以创建一个处理ID密钥LCR的示例客户端应用程序。</p>
                        <p>具体来说，客户端应用程序附加到XStream出站服务器并等待来自出站服务器的LCR。当客户端应用程序收到ID密钥LCR时，它可以使用ID密钥LCR中的rowid查询相应的源数据库表。</p>
                        <p>该演示在OCI和Java代码中的以下位置提供：</p><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME / RDBMS /演示/ XStream的/ idkey</pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-19C316B4-C3B1-4C57-9CC7-E60FD728EC40" title="捕获过程可以捕获对大多数数据类型的列所做的更改。">捕获过程捕获的数据类型</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="XSTRM72658"></a><div class="props_rev_3"><a id="GUID-A7AFC167-DC64-4645-BB8A-25B6204E3ADE" name="GUID-A7AFC167-DC64-4645-BB8A-25B6204E3ADE"></a><h4 id="XSTRM-GUID-A7AFC167-DC64-4645-BB8A-25B6204E3ADE" class="sect4"><span class="enumeration_section">3.2.3</span>捕获过程捕获的DML变化类型</h4>
                  <div>
                     <p>捕获过程可以捕获不同类型的DML更改。</p>
                     <p>当您指定应捕获对某些表所做的DML更改时，捕获过程将捕获对这些表所做的以下类型的DML更改：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">插入</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">UPDATE</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">删除</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">合并</code></p>
                        </li>
                        <li>
                           <p>分段操作</p>
                        </li>
                     </ul>
                     <p>捕获过程将每个<code class="codeph">MERGE</code>更改转换为<code class="codeph">INSERT</code>或<code class="codeph">UPDATE</code>更改。<code class="codeph">MERGE</code>不是行LCR中的有效命令类型。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-EDE9234C-ED4B-48A8-94FA-D07055F2FC20" title="熟悉与捕获过程相关的概念。">捕获进程</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM72659"></a><div class="props_rev_3"><a id="GUID-CC32AED8-6587-4CA7-8786-CDF2C4968DB1" name="GUID-CC32AED8-6587-4CA7-8786-CDF2C4968DB1"></a><h4 id="XSTRM-GUID-CC32AED8-6587-4CA7-8786-CDF2C4968DB1" class="sect4"><span class="enumeration_section">3.2.4</span>本地捕获和下游捕获</h4>
                  <div>
                     <p>您可以将捕获过程配置为在源数据库上本地运行或在下游数据库上远程运行。</p>
                     <p>单个数据库可以具有一个或多个捕获进程，用于捕获本地更改以及捕获远程源数据库更改的其他捕获进程。也就是说，您可以配置单个数据库以执行本地捕获和下游捕获。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-87239427-9051-4DA3-A531-EA98D80252FF">本地捕获</a><br>本地捕获意味着捕获进程在源数据库上运行。
                        </li>
                        <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-EC79EFD9-6288-4421-B370-E71FA20C26C5">下游捕获</a><br>下游捕获意味着捕获进程在源数据库以外的数据库上运行。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-EDE9234C-ED4B-48A8-94FA-D07055F2FC20" title="熟悉与捕获过程相关的概念。">捕获进程</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="XSTRM72660"></a><div class="props_rev_3"><a id="GUID-87239427-9051-4DA3-A531-EA98D80252FF" name="GUID-87239427-9051-4DA3-A531-EA98D80252FF"></a><h5 id="XSTRM-GUID-87239427-9051-4DA3-A531-EA98D80252FF" class="sect5"><span class="enumeration_section">3.2.4.1</span>本地捕获</h5>
                     <div>
                        <p>本地捕获意味着捕获进程在源数据库上运行。</p>
                        <p><a href="xstream-out-concepts.html#GUID-18DE4FD3-F36A-4108-BC16-AF31AF4055E3__BABHABJC">图3-1</a>显示了使用本地捕获的数据库。
                        </p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-528B5372-5567-4477-8275-FCD9D08D2657">源数据库执行所有更改捕获操作</a><br>通过本地捕获，捕获操作在源数据库中执行。
                           </li>
                           <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-4EC7CA02-B2D5-4FB7-BB0F-327282A25551">本地捕获的优点</a><br>本地捕获有几个优点。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-CC32AED8-6587-4CA7-8786-CDF2C4968DB1" title="您可以将捕获过程配置为在源数据库上本地运行或在下游数据库上远程运行。">本地捕获和下游捕获</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="XSTRM72661"></a><div class="props_rev_3"><a id="GUID-528B5372-5567-4477-8275-FCD9D08D2657" name="GUID-528B5372-5567-4477-8275-FCD9D08D2657"></a><h6 id="XSTRM-GUID-528B5372-5567-4477-8275-FCD9D08D2657" class="sect6"><span class="enumeration_section">3.2.4.1.1</span>源数据库执行所有更改捕获操作</h6>
                        <div>
                           <p>通过本地捕获，捕获操作在源数据库中执行。</p>
                           <p>如果配置本地捕获，则在源数据库中执行以下操作：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>运行<code class="codeph">DBMS_CAPTURE_ADM.BUILD</code>过程以将数据字典提取（或构建）到重做日志。
                                 </p>
                              </li>
                              <li>
                                 <p>源数据库中的补充日志记录会在重做日志中放置其他信息。当XStream客户端应用程序处理捕获的更改时，可能需要此信息。请参阅<span class="q">“ <a href="configuring-xstream-out.html#GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B" title="使用捕获过程捕获更改时，必须为源数据库中的某些列指定补充日志记录，以更改要在目标数据库中成功应用的列。">如果需要，请配置补充日志记录</a> ”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>第一次在数据库中启动捕获过程时，Oracle数据库使用重做日志中提取的数据字典信息来创建LogMiner数据字典，该字典与源数据库的主数据字典分开。其他捕获进程可以使用此现有LogMiner数据字典，也可以创建新的LogMiner数据字典。</p>
                              </li>
                              <li>
                                 <p>捕获进程使用LogMiner扫描重做日志以查找更改。</p>
                              </li>
                              <li>
                                 <p>规则引擎基于一个或多个捕获过程规则集中的规则来评估更改。</p>
                              </li>
                              <li>
                                 <p>捕获过程将满足其规则集中的规则的更改排入本地<code class="codeph">ANYDATA</code>队列。
                                 </p>
                              </li>
                              <li>
                                 <p>如果捕获的更改与其他数据库上的一个或多个出站服务器共享，则一个或多个传播会将这些更改从源数据库传播到其他数据库。</p>
                              </li>
                           </ul>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-87239427-9051-4DA3-A531-EA98D80252FF" title="本地捕获意味着捕获进程在源数据库上运行。">本地捕获</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="XSTRM72662"></a><div class="props_rev_3"><a id="GUID-4EC7CA02-B2D5-4FB7-BB0F-327282A25551" name="GUID-4EC7CA02-B2D5-4FB7-BB0F-327282A25551"></a><h6 id="XSTRM-GUID-4EC7CA02-B2D5-4FB7-BB0F-327282A25551" class="sect6"><span class="enumeration_section">3.2.4.1.2</span>本地捕获的优点</h6>
                        <div>
                           <p>本地捕获有几个优点。</p>
                           <p>以下是使用本地捕获的优点：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>捕获过程的配置和管理比使用下游捕获时更简单。使用本地捕获时，无需将重做数据复制配置到下游数据库，并且可以在捕获的更改所在的数据库中本地管理捕获过程。</p>
                              </li>
                              <li>
                                 <p>在数据库将这些更改写入归档重做日志文件之前，本地捕获进程可以扫描联机重做日志中的更改。使用归档日志下游捕获过程时，归档重做日志文件在源数据库完成对其进行更改后将复制到下游数据库，并且需要一些时间将重做日志文件复制到下游数据库。但是，实时下游捕获过程可以捕获从源数据库发送的联机重做日志中的更改。</p>
                              </li>
                              <li>
                                 <p>通过网络发送的数据量减少，因为重做数据不会复制到下游数据库。即使捕获的LCR传播到其他数据库，捕获的LCR也可以是对数据库进行的总变化的子集，并且仅传播满足传播规则集中的规则的LCR。</p>
                              </li>
                              <li>
                                 <p>安全性可能会得到改善，因为只有源（本地）数据库才能访问重做数据。例如，如果捕获过程仅捕获hr模式中的更改，则在使用本地捕获时，只有源数据库可以访问重做数据以将hr模式的更改排入捕获进程队列。但是，使用下游捕获时，重做数据将复制到下游数据库，重做数据包含对数据库所做的所有更改，而不仅仅是对特定对象或模式所做的更改。</p>
                              </li>
                           </ul>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-87239427-9051-4DA3-A531-EA98D80252FF" title="本地捕获意味着捕获进程在源数据库上运行。">本地捕获</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="XSTRM72663"></a><div class="props_rev_3"><a id="GUID-EC79EFD9-6288-4421-B370-E71FA20C26C5" name="GUID-EC79EFD9-6288-4421-B370-E71FA20C26C5"></a><h5 id="XSTRM-GUID-EC79EFD9-6288-4421-B370-E71FA20C26C5" class="sect5"><span class="enumeration_section">3.2.4.2</span>下游捕获</h5>
                     <div>
                        <p>下游捕获意味着捕获进程在源数据库以外的数据库上运行。</p>
                        <p>可以使用以下类型的下游捕获配置：实时下游捕获和归档日志下游捕获。<code class="codeph">downstream_real_time_mine</code>捕获进程参数控制下游捕获进程是执行实时下游捕获还是归档日志下游捕获。实时下游捕获过程和一个或多个归档日志下游捕获过程可以共存于下游数据库。通过下游捕获，源数据库的重做日志文件必须在下游数据库中可用。
                        </p>
                        <div class="infoboxnote" id="GUID-EC79EFD9-6288-4421-B370-E71FA20C26C5__GUID-39C2C8B4-0634-4A9F-B100-B227169E89A3">
                           <p class="notep1">注意：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>本文档中对“下游捕获过程”的引用适用于实时下游捕获过程和归档日志下游捕获过程。本文档在必要时区分两种类型的下游捕获过程。</p>
                              </li>
                              <li>
                                 <p>下游捕获进程只能捕获来自单个源数据库的更改。但是，单个下游数据库中的多个下游捕获进程可以捕获来自单个源数据库或多个源数据库的更改。</p>
                              </li>
                              <li>
                                 <p>要配置XStream Out下游捕获，源数据库必须是Oracle数据库<span class="italic">10g</span>第2版（10.2）或更高版本，并且捕获数据库必须是Oracle数据库<span class="italic">11g</span>第2版（11.2.0.3）或更高版本</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-E183442F-2DFF-44B8-B93E-46CE0D1373A4">实时下游捕获</a><br>实时下游捕获优于归档日志下游捕获的优势在于，实时下游捕获减少了捕获源数据库所做更改所需的时间。
                           </li>
                           <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-712C07A2-B1A2-48A0-94B0-AB03AF9BB4F2">存档日志下游捕获</a><br>归档日志下游捕获优于实时下游捕获的优势在于归档日志下游捕获允许来自下游数据库的多个源数据库的下游捕获进程。
                           </li>
                           <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-EEB8E971-2177-4C5E-A296-872DD153033A">下游数据库执行大多数更改捕获操作</a><br>通过下游捕获，大多数捕获操作都在下游数据库中执行。
                           </li>
                           <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-3AF9E274-967B-4D37-B231-E076045FB6C7">下游捕获的优势</a><br>下游捕获提供了几个优点。
                           </li>
                           <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-B05A7CE9-C8B8-499B-816B-14FF34D793D9">从下游数据库到源数据库的可选数据库链接</a><br>创建或更改下游捕获进程时，可以选择指定使用从下游数据库到源数据库的数据库链接。
                           </li>
                           <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-EF7F6A33-1729-450E-997A-F73A8699FB34">使用XStream Out进行下游捕获的操作要求</a><br>一些操作要求适用于下游捕获。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-CC32AED8-6587-4CA7-8786-CDF2C4968DB1" title="您可以将捕获过程配置为在源数据库上本地运行或在下游数据库上远程运行。">本地捕获和下游捕获</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="XSTRM72665"></a><a id="XSTRM72664"></a><div class="props_rev_3"><a id="GUID-E183442F-2DFF-44B8-B93E-46CE0D1373A4" name="GUID-E183442F-2DFF-44B8-B93E-46CE0D1373A4"></a><h6 id="XSTRM-GUID-E183442F-2DFF-44B8-B93E-46CE0D1373A4" class="sect6"><span class="enumeration_section">3.2.4.2.1</span>实时下行捕获</h6>
                        <div>
                           <p>实时下游捕获优于归档日志下游捕获的优势在于，实时下游捕获减少了捕获源数据库所做更改所需的时间。</p>
                           <p>时间减少是因为实时下游捕获过程不需要等待重做日志文件存档，然后才能从中捕获数据。</p>
                           <p>实时下游捕获配置以下列方式工作：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>重做传输服务以同步或异步方式将重做数据发送到下游数据库。同时，日志写入器进程（LGWR）在源数据库的联机重做日志中记录重做数据。</p>
                              </li>
                              <li>
                                 <p>下游数据库中的远程文件服务器进程（RFS）通过网络接收重做数据，并将重做数据存储在备用重做日志中。</p>
                              </li>
                              <li>
                                 <p>源数据库上的日志切换会导致下游数据库中的日志切换，下游数据库中的<code class="codeph">ARCH</code> <span class="italic"><code class="codeph">n</code></span>进程会归档当前备用重做日志文件。
                                 </p>
                              </li>
                              <li>
                                 <p>实时下游捕获过程会尽可能从备用重做日志中捕获更改，并在必要时从存档的备用重做日志文件中捕获更改。捕获过程可以捕获归档备用重做日志文件中的更改（如果它落后）。当它赶上时，它将继续从备用重做日志中捕获更改。</p>
                              </li>
                           </ul>
                           <div class="figure" id="GUID-E183442F-2DFF-44B8-B93E-46CE0D1373A4__GUID-250B5942-2574-4C13-A5D1-0A526F32D344">
                              <p class="titleinfigure">图3-2实时下行捕获</p><img src="img/xstrm047.png" width="468" alt="下面是图3-2的描述" title="下面是图3-2的描述" longdesc="img_text/xstrm047.html"><br><a href="img_text/xstrm047.html">“图3-2实时下游捕获”的描述</a></div>
                           <!-- class="figure" -->
                           <div class="infoboxnote" id="GUID-E183442F-2DFF-44B8-B93E-46CE0D1373A4__GUID-02A13E2E-9F1C-42C0-88AC-B96213AF88E2">
                              <p class="notep1">注意：</p>
                              <p>您可以配置多个实时下游捕获进程，以捕获来自同一源数据库的更改，但无法为一个下游数据库中的多个源数据库配置实时下游捕获。</p>
                           </div>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-EC79EFD9-6288-4421-B370-E71FA20C26C5" title="下游捕获意味着捕获进程在源数据库以外的数据库上运行。">下游捕获</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="XSTRM72667"></a><a id="XSTRM72666"></a><div class="props_rev_3"><a id="GUID-712C07A2-B1A2-48A0-94B0-AB03AF9BB4F2" name="GUID-712C07A2-B1A2-48A0-94B0-AB03AF9BB4F2"></a><h6 id="XSTRM-GUID-712C07A2-B1A2-48A0-94B0-AB03AF9BB4F2" class="sect6"><span class="enumeration_section">3.2.4.2.2</span>存档日志下游捕获</h6>
                        <div>
                           <p>归档日志下游捕获优于实时下游捕获的优势在于归档日志下游捕获允许来自下游数据库的多个源数据库的下游捕获进程。</p>
                           <p>归档日志下游捕获配置意味着源数据库中的归档重做日志文件将复制到下游数据库，捕获过程将捕获这些归档重做日志文件中的更改。您可以使用重做传输服务， <code class="codeph">DBMS_FILE_TRANSFER</code>包，文件传输协议（FTP）或其他一些机制将存档的重做日志文件复制到下游数据库。
                           </p>
                           <div class="figure" id="GUID-712C07A2-B1A2-48A0-94B0-AB03AF9BB4F2__GUID-684164EB-14F4-475B-8F8A-D322B13F15F6">
                              <p class="titleinfigure">图3-3 Archived-Log下游捕获</p><img src="img/xstrm037.gif" width="471" alt="下面是图3-3的描述" title="下面是图3-3的描述" longdesc="img_text/xstrm037.html"><br><a href="img_text/xstrm037.html">“图3-3 Archived-Log Downstream Capture”的说明</a></div>
                           <!-- class="figure" -->
                           <p>您可以将重做日志文件从多个源数据库复制到单个下游数据库，并配置多个存档日志下游捕获进程以捕获这些重做日志文件中的更改。</p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-712C07A2-B1A2-48A0-94B0-AB03AF9BB4F2__GUID-7CCC5253-A41A-4445-A89E-F3178B297C96">
                              <p class="notep1">也可以看看：</p>
                              <p>有关重做传输服务的详细信息，请参阅<a href="../sbydb/oracle-data-guard-redo-transport-services.html#SBYDB00400" target="_blank"><span><cite>Oracle Data Guard概念和管理</cite></span></a></p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-EC79EFD9-6288-4421-B370-E71FA20C26C5" title="下游捕获意味着捕获进程在源数据库以外的数据库上运行。">下游捕获</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="XSTRM72668"></a><div class="props_rev_3"><a id="GUID-EEB8E971-2177-4C5E-A296-872DD153033A" name="GUID-EEB8E971-2177-4C5E-A296-872DD153033A"></a><h6 id="XSTRM-GUID-EEB8E971-2177-4C5E-A296-872DD153033A" class="sect6"><span class="enumeration_section">3.2.4.2.3</span>下游数据库执行大多数更改捕获操作</h6>
                        <div>
                           <p>通过下游捕获，大多数捕获操作都在下游数据库中执行。</p>
                           <p>如果配置实时或归档日志下游捕获，则在下游数据库中执行以下操作：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>第一次在下游数据库启动下游捕获过程时，Oracle数据库使用源数据库的重做数据中的数据字典信息在下游数据库中创建LogMiner数据字典。<code class="codeph">DBMS_CAPTURE_ADM.BUILD</code>过程在源数据库上运行，以将源数据字典信息提取到源数据库中的重做日志。接下来，重做数据将从源数据库复制到下游数据库。同一源数据库的其他下游捕获进程可以使用此现有LogMiner数据字典，也可以创建新的LogMiner数据字典。此外，实时下游捕获过程可以与一个或多个归档日志下游捕获过程共享LogMiner数据字典。
                                 </p>
                              </li>
                              <li>
                                 <p>捕获进程使用LogMiner扫描源数据库中的重做数据以进行更改。</p>
                              </li>
                              <li>
                                 <p>规则引擎基于一个或多个捕获过程规则集中的规则来评估更改。</p>
                              </li>
                              <li>
                                 <p>捕获过程将满足其规则集中的规则的更改排入本地<code class="codeph">ANYDATA</code>队列。捕获过程将更改格式化为LCR。
                                 </p>
                              </li>
                           </ul>
                           <p>在下游捕获配置中，在源数据库中执行以下操作：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">DBMS_CAPTURE_ADM.BUILD</code>过程在源数据库中运行，以将数据字典提取到重做日志。
                                 </p>
                              </li>
                              <li>
                                 <p>源数据库中的补充日志记录会在重做日志中放置可能需要的其他信息。请参阅<span class="q">“ <a href="configuring-xstream-out.html#GUID-56F322CB-1598-4FC8-92D9-A14CD4F7971B" title="使用捕获过程捕获更改时，必须为源数据库中的某些列指定补充日志记录，以更改要在目标数据库中成功应用的列。">如果需要，请配置补充日志记录</a> ”</span> 。
                                 </p>
                              </li>
                           </ul>
                           <p>此外，必须将重做数据从运行源数据库的计算机系统复制到运行下游数据库的计算机系统。在实时下游捕获配置中，重做传输服务将重做数据发送到下游数据库。通常，在归档日志下游捕获配置中，重做传输服务会将归档的重做日志文件复制到下游数据库。</p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-EC79EFD9-6288-4421-B370-E71FA20C26C5" title="下游捕获意味着捕获进程在源数据库以外的数据库上运行。">下游捕获</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="XSTRM72669"></a><div class="props_rev_3"><a id="GUID-3AF9E274-967B-4D37-B231-E076045FB6C7" name="GUID-3AF9E274-967B-4D37-B231-E076045FB6C7"></a><h6 id="XSTRM-GUID-3AF9E274-967B-4D37-B231-E076045FB6C7" class="sect6"><span class="enumeration_section">3.2.4.2.4</span>下游捕获的优点</h6>
                        <div>
                           <p>下游捕获提供了几个优点。</p>
                           <p>以下是使用下游捕获的优点：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>捕获更改会在源数据库中使用较少的资源，因为下游数据库执行大部分所需的工作。</p>
                              </li>
                              <li>
                                 <p>如果计划捕获源自多个源数据库的更改，则可以通过在一个下游数据库中运行具有不同源数据库的多个存档日志下游捕获进程来简化捕获进程管理。也就是说，一个下游数据库可以充当来自多个源的变更捕获的中心位置。在这样的配置中，除了归档日志下游捕获过程之外，还可以在下游数据库中运行一个实时下游捕获过程。</p>
                              </li>
                              <li>
                                 <p>将重做数据复制到一个或多个下游数据库可以提供更好的数据丢失保护。例如，在某些情况下，下游数据库中的重做日志文件可用于恢复源数据库。</p>
                              </li>
                              <li>
                                 <p>在一个或多个下游数据库中配置捕获来自单个源数据库的更改的多个捕获进程的能力提供了更大的灵活性并且可以提高可伸缩性。</p>
                              </li>
                           </ul>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-EC79EFD9-6288-4421-B370-E71FA20C26C5" title="下游捕获意味着捕获进程在源数据库以外的数据库上运行。">下游捕获</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="XSTRM72670"></a><div class="props_rev_3"><a id="GUID-B05A7CE9-C8B8-499B-816B-14FF34D793D9" name="GUID-B05A7CE9-C8B8-499B-816B-14FF34D793D9"></a><h6 id="XSTRM-GUID-B05A7CE9-C8B8-499B-816B-14FF34D793D9" class="sect6"><span class="enumeration_section">3.2.4.2.5</span>从下游数据库到源数据库的可选数据库链接</h6>
                        <div>
                           <p>创建或更改下游捕获进程时，可以选择指定使用从下游数据库到源数据库的数据库链接。</p>
                           <p>此数据库链接必须与源数据库的全局名称相同。这种数据库链接简化了下游捕获过程的创建和管理。通过在下游捕获进程上运行<code class="codeph">CREATE_CAPTURE</code>或<code class="codeph">ALTER_CAPTURE</code>过程时将<code class="codeph">use_database_link</code>参数设置为<code class="codeph">TRUE</code> ，可以指定下游捕获进程使用数据库链接。数据库链接的名称必须与源数据库的全局名称匹配。
                           </p>
                           <p>当下游捕获进程使用指向源数据库的数据库链接时，捕获进程将连接到源数据库以自动执行以下管理操作：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>在某些情况下，在源数据库上运行<code class="codeph">DBMS_CAPTURE_ADM.BUILD</code>过程，以在创建捕获进程时将源数据库中的数据字典提取到重做日志。
                                 </p>
                              </li>
                              <li>
                                 <p>如果在捕获进程创建期间未指定第一个系统更改编号（SCN），则获取下游捕获进程的第一个SCN。需要第一个SCN来创建捕获过程。</p>
                              </li>
                           </ul>
                           <p>如果下游捕获进程未使用数据库链接，则必须手动执行这些操作。</p>
                           <div class="infoboxnote" id="GUID-B05A7CE9-C8B8-499B-816B-14FF34D793D9__GUID-65B5501A-4D91-43BD-8E1E-F56632F4E991">
                              <p class="notep1">注意：</p>
                              <p>在创建一个下游捕获的过程中，如果<code class="codeph">first_scn</code>参数被设置为<code class="codeph">NULL</code>中<code class="codeph">CREATE_CAPTURE</code>程序，则use_database_link参数必须被设置为<code class="codeph">TRUE</code> 。否则，会引发错误。
                              </p>
                           </div>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-EC79EFD9-6288-4421-B370-E71FA20C26C5" title="下游捕获意味着捕获进程在源数据库以外的数据库上运行。">下游捕获</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="XSTRM72671"></a><div class="props_rev_3"><a id="GUID-EF7F6A33-1729-450E-997A-F73A8699FB34" name="GUID-EF7F6A33-1729-450E-997A-F73A8699FB34"></a><h6 id="XSTRM-GUID-EF7F6A33-1729-450E-997A-F73A8699FB34" class="sect6"><span class="enumeration_section">3.2.4.2.6</span>使用XStream Out进行下游捕获的操作要求</h6>
                        <div>
                           <p>一些操作要求适用于下游捕获。</p>
                           <p>以下是使用下游捕获的操作要求：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>源数据库必须至少运行Oracle Database <span class="italic">10g</span>第2版（10.2）。
                                 </p>
                              </li>
                              <li>
                                 <p>XStream Out下游捕获数据库必须运行Oracle Database <span class="italic">11g</span>第2版（11.2.0.3）或更高版本，并且源数据库必须运行Oracle数据库10g第2版（10.2）或更高版本。
                                 </p>
                              </li>
                              <li>
                                 <p>源和下游捕获站点上的操作系统必须相同，但操作系统版本不必相同。此外，下游站点可以使用与源站点不同的目录结构。</p>
                              </li>
                              <li>
                                 <p>源和下游捕获站点上的硬件体系结构必须相同。例如，在64位Sun系统上具有源数据库的下游捕获配置必须具有在64位Sun系统上配置的下游数据库。其他硬件元素（例如CPU数量，内存大小和存储配置）在源站点和下游站点中可能不同。</p>
                              </li>
                           </ul>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-EC79EFD9-6288-4421-B370-E71FA20C26C5" title="下游捕获意味着捕获进程在源数据库以外的数据库上运行。">下游捕获</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
               </div><a id="XSTRM72679"></a><div class="props_rev_3"><a id="GUID-69A71BA4-5E4F-45DF-9CC7-8C258E40E022" name="GUID-69A71BA4-5E4F-45DF-9CC7-8C258E40E022"></a><h4 id="XSTRM-GUID-69A71BA4-5E4F-45DF-9CC7-8C258E40E022" class="sect4"><span class="enumeration_section">3.2.5</span>捕获过程和受限制的会话</h4>
                  <div>
                     <p>启用和禁用受限会话会影响捕获过程。</p>
                     <p>通过发出<code class="codeph">STARTUP</code> <code class="codeph">RESTRICT</code>语句在系统启动期间启用受限会话时，捕获进程不会启动，即使它们在数据库关闭时运行也是如此。使用<code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code>语句禁用受限会话时，将启动数据库关闭时运行的每个捕获进程。
                     </p>
                     <p>通过SQL语句<code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code> <code class="codeph">ENABLE</code> <code class="codeph">RESTRICTED</code> <code class="codeph">SESSION</code>子句在正在运行的数据库中启用受限会话时，它不会影响任何正在运行的捕获进程。这些捕获过程继续运行并捕获更改。如果在受限会话中启动了已停止的捕获进程，则在禁用受限会话之前，捕获进程实际上不会启动。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-EDE9234C-ED4B-48A8-94FA-D07055F2FC20" title="熟悉与捕获过程相关的概念。">捕获进程</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM72680"></a><div class="props_rev_3"><a id="GUID-E52BD18C-E1D9-4B09-9ADD-BCBC2290C2CB" name="GUID-E52BD18C-E1D9-4B09-9ADD-BCBC2290C2CB"></a><h4 id="XSTRM-GUID-E52BD18C-E1D9-4B09-9ADD-BCBC2290C2CB" class="sect4"><span class="enumeration_section">3.2.6</span>捕获过程子组件</h4>
                  <div>
                     <p>捕获过程子组件是读取器服务器，一个或多个准备服务器和构建器服务器。</p>
                     <p>捕获过程是可选的Oracle后台进程，其进程名称为<code class="codeph">CP</code> <span class="italic"><code class="codeph">nn</code></span> ，其中<span class="italic"><code class="codeph">nn</code></span>可以包含字母和数字。捕获过程使用LogMiner的基础结构捕获重做日志中的更改。XStream自动配置LogMiner。您可以创建，更改，启动，停止和删除捕获过程，还可以定义捕获过程规则，以控制捕获过程捕获的更改。
                     </p>
                     <p><code class="codeph">parallelism</code>捕获过程参数控制捕获过程并行性。当捕获进程并行性为0（零）（XStream Out的默认值）时，捕获进程不使用子组件来执行其工作。相反， <code class="codeph">CP</code> <span class="italic"><code class="codeph">nn</code></span>进程完成捕获数据库更改所需的所有任务。
                     </p>
                     <p>当捕获进程并行度大于0时，捕获进程使用底层LogMiner进程名称为<code class="codeph">MS</code> <span class="italic"><code class="codeph">nn</code></span> ，其中<span class="italic"><code class="codeph">nn</code></span>可以包含字母和数字。当捕获进程并行性为0（零）时，捕获进程不使用此进程。
                     </p>
                     <p>当捕获进程并行度大于0时，捕获进程由以下子组件组成：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>一个<span class="bold">读取服务器</span> ，读取重做日志并将重做日志划分为多个区域。
                           </p>
                        </li>
                        <li>
                           <p>一个或多个<span class="bold">准备服务器</span> ，它们并行扫描读取器服务器定义的区域，并执行重做日志中发现的更改的预过滤。预过滤包括将有关更改的部分信息（例如更改的模式和对象名称）发送到规则引擎以进行评估，并接收评估结果。您可以使用并行捕获过程参数控制准备服务器的数量。
                           </p>
                        </li>
                        <li>
                           <p>一个<span class="bold">构建器服务器</span> ，用于合并来自preparer服务器的重做记录。这些重做记录在部分评估或部分评估期间评估为<code class="codeph">TRUE</code>对他们来说是不确定的。构建器服务器保留这些重做记录的系统更改编号（SCN）顺序，并将合并的重做记录传递给捕获进程。
                           </p>
                        </li>
                        <li>
                           <p>捕获进程（ <code class="codeph">CP</code> <span class="italic"><code class="codeph">nn</code></span> ）在从构建器服务器接收合并的重做记录时，对每个更改执行以下操作：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>将更改格式化为LCR</p>
                              </li>
                              <li>
                                 <p>如果准备服务器执行的部分评估对于LCR的更改没有结果，则将LCR发送到规则引擎进行全面评估</p>
                              </li>
                              <li>
                                 <p>如果执行，则收到LCR的全面评估结果</p>
                              </li>
                              <li>
                                 <p>如果LCR满足捕获过程的否定规则集中的规则，或者它不满足正规则集中的规则，则丢弃LCR</p>
                              </li>
                              <li>
                                 <p>如果LCR满足捕获过程的正规则集中的规则，则将LCR排入与捕获过程关联的队列中</p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <p>每个阅读器服务器，准备服务器和构建器服务器都是一个进程。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-EDE9234C-ED4B-48A8-94FA-D07055F2FC20" title="熟悉与捕获过程相关的概念。">捕获进程</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM72682"></a><div class="props_rev_3"><a id="GUID-515A37C2-A8BF-4856-99D9-7D1ACE393C92" name="GUID-515A37C2-A8BF-4856-99D9-7D1ACE393C92"></a><h4 id="XSTRM-GUID-515A37C2-A8BF-4856-99D9-7D1ACE393C92" class="sect4"><span class="enumeration_section">3.2.7</span>捕获过程状态</h4>
                  <div>
                     <p>捕获过程的状态描述了捕获过程当前正在执行的操作。</p>
                     <p>您可以通过查询<code class="codeph">V$XSTREAM_CAPTURE</code>动态性能视图中的<code class="codeph">STATE</code>列来查看捕获过程的<code class="codeph">STATE</code> 。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-515A37C2-A8BF-4856-99D9-7D1ACE393C92__GUID-72B7BBFF-1AEA-4971-96E9-D48308820EEF">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../refrn/V-XSTREAM_CAPTURE.html#REFRN30639" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-EDE9234C-ED4B-48A8-94FA-D07055F2FC20" title="熟悉与捕获过程相关的概念。">捕获进程</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM72683"></a><div class="props_rev_3"><a id="GUID-E050B48F-5FAF-4F1C-B18B-2F1D871BCE09" name="GUID-E050B48F-5FAF-4F1C-B18B-2F1D871BCE09"></a><h4 id="XSTRM-GUID-E050B48F-5FAF-4F1C-B18B-2F1D871BCE09" class="sect4"><span class="enumeration_section">3.2.8</span>捕获过程参数</h4>
                  <div>
                     <p>捕获过程参数控制捕获过程的操作方式。</p>
                     <p>例如，并行捕获过程参数控制捕获过程使用的准备服务器的数量， <code class="codeph">time_limit</code>捕获过程参数指定捕获过程在自动关闭之前运行的时间。您可以使用<code class="codeph">DBMS_CAPTURE_ADM.SET_PARAMETER</code>过程设置捕获过程参数。创建后，将禁用捕获过程，以便您可以在首次启动之前为环境设置捕获过程参数。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-E050B48F-5FAF-4F1C-B18B-2F1D871BCE09__GUID-4339A01C-6EC5-47E8-A167-F4A07D617996">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_CAPTURE_ADM.html#ARPLS306" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-EDE9234C-ED4B-48A8-94FA-D07055F2FC20" title="熟悉与捕获过程相关的概念。">捕获进程</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM72770"></a><div class="props_rev_3"><a id="GUID-E3FF6FC1-6136-4748-9DFB-BB157CB77560" name="GUID-E3FF6FC1-6136-4748-9DFB-BB157CB77560"></a><h4 id="XSTRM-GUID-E3FF6FC1-6136-4748-9DFB-BB157CB77560" class="sect4"><span class="enumeration_section">3.2.9</span>捕获进程检查点和XStream Out</h4>
                  <div>
                     <p>检查点是有关捕获进程的当前状态的信息，该状态持久存储在运行捕获进程的数据库的数据字典中。</p>
                     <p>捕获过程尝试以称为检查点间隔的定期间隔记录检查点。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-E7775DF0-A0D9-4875-AA60-56CF89A3948C">必需的检查点SCN</a><br>对应于捕获过程需要重做数据的最低检查点的系统更改编号（SCN）是所需的检查点SCN。</li>
                        <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-EF485FE3-8828-4644-B108-620C10F65805">最大检查点SCN</a><br>对应于捕获过程记录的最后一个物理检查点的SCN是最大检查点SCN。</li>
                        <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-2E26912C-5CB5-47F0-B623-D6F3058EDF4A">检查点保留时间</a><br>检查点保留时间是捕获进程在自动清除检查点之前保留检查点的时间量（以天为单位）。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-EDE9234C-ED4B-48A8-94FA-D07055F2FC20" title="熟悉与捕获过程相关的概念。">捕获进程</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="XSTRM72771"></a><div class="props_rev_3"><a id="GUID-E7775DF0-A0D9-4875-AA60-56CF89A3948C" name="GUID-E7775DF0-A0D9-4875-AA60-56CF89A3948C"></a><h5 id="XSTRM-GUID-E7775DF0-A0D9-4875-AA60-56CF89A3948C" class="sect5"><span class="enumeration_section">3.2.9.1</span>要求的检查点SCN</h5>
                     <div>
                        <p>对应于捕获过程需要重做数据的最低检查点的系统更改编号（SCN）是所需的检查点SCN。</p>
                        <p>包含所需检查点SCN的重做日志文件以及所有后续重做日志文件必须可用于捕获过程。如果捕获进程已停止并重新启动，则它将开始扫描与其所需检查点SCN对应的SCN的重做日志。如果数据库意外停止，则所需的检查点SCN对于恢复非常重要。此外，如果为捕获过程重置第一个SCN，则必须将其设置为小于或等于捕获过程所需检查点SCN的值。您可以通过查询<code class="codeph">ALL_CAPTURE</code>数据字典视图中的<code class="codeph">REQUIRED_CHECKPOINT_SCN</code>列来确定捕获过程所需的检查点SCN。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-E3FF6FC1-6136-4748-9DFB-BB157CB77560" title="检查点是有关捕获进程的当前状态的信息，该状态持久存储在运行捕获进程的数据库的数据字典中。">捕获进程检查点和XStream Out</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM72772"></a><div class="props_rev_3"><a id="GUID-EF485FE3-8828-4644-B108-620C10F65805" name="GUID-EF485FE3-8828-4644-B108-620C10F65805"></a><h5 id="XSTRM-GUID-EF485FE3-8828-4644-B108-620C10F65805" class="sect5"><span class="enumeration_section">3.2.9.2</span>最大检查点SCN</h5>
                     <div>
                        <p>对应于捕获过程记录的最后一个物理检查点的SCN是最大检查点SCN。</p>
                        <p>对于捕获过程，最大检查点SCN可以低于或高于所需的检查点SCN。如果捕获过程是新的并且尚未记录物理检查点，则最大检查点SCN也可以是0（零）。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-E3FF6FC1-6136-4748-9DFB-BB157CB77560" title="检查点是有关捕获进程的当前状态的信息，该状态持久存储在运行捕获进程的数据库的数据字典中。">捕获进程检查点和XStream Out</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM72773"></a><div class="props_rev_3"><a id="GUID-2E26912C-5CB5-47F0-B623-D6F3058EDF4A" name="GUID-2E26912C-5CB5-47F0-B623-D6F3058EDF4A"></a><h5 id="XSTRM-GUID-2E26912C-5CB5-47F0-B623-D6F3058EDF4A" class="sect5"><span class="enumeration_section">3.2.9.3</span>检查点保留时间</h5>
                     <div>
                        <p>检查点保留时间是捕获进程在自动清除检查点之前保留检查点的时间量（以天为单位）。</p>
                        <p>A捕获过程中定期减去计算一个检查站的年龄<code class="codeph">NEXT_TIME</code>对应于从检查点归档重做日志文件的<code class="codeph">FIRST_TIME</code>归档重做日志文件包含所需的检查点SCN的采集过程。如果结果值大于检查点保留时间，则捕获过程会通过提升其第一个SCN值自动清除检查点。否则，保留检查点。
                        </p>
                        <p>您可以使用<code class="codeph">DBMS_CAPTURE_ADM</code>包中的<code class="codeph">ALTER_CAPTURE</code>过程来设置捕获过程的检查点保留时间。<code class="codeph">DBA_REGISTERED_ARCHIVED_LOG</code>视图显示归档重做日志文件的<code class="codeph">FIRST_TIME</code>和<code class="codeph">NEXT_TIME</code> ， <code class="codeph">ALL_CAPTURE</code>视图中的<code class="codeph">REQUIRED_CHECKPOINT_SCN</code>列显示捕获过程所需的检查点SCN。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-2E26912C-5CB5-47F0-B623-D6F3058EDF4A__GUID-44749150-1811-4AB9-B0F3-B7A5C09A1CCA">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../arpls/DBMS_CAPTURE_ADM.html#ARPLS312" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-E3FF6FC1-6136-4748-9DFB-BB157CB77560" title="检查点是有关捕获进程的当前状态的信息，该状态持久存储在运行捕获进程的数据库的数据字典中。">捕获进程检查点和XStream Out</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="XSTRM72672"></a><div class="props_rev_3"><a id="GUID-C9D4482E-F066-4BE1-BFD1-CBF77AC17AA2" name="GUID-C9D4482E-F066-4BE1-BFD1-CBF77AC17AA2"></a><h4 id="XSTRM-GUID-C9D4482E-F066-4BE1-BFD1-CBF77AC17AA2" class="sect4"><span class="enumeration_section">3.2.10</span>与捕获过程相关的SCN值</h4>
                  <div>
                     <p>特定系统更改编号（SCN）值对于捕获过程很重要。</p>
                     <p>您可以查询<code class="codeph">ALL_CAPTURE</code>数据字典视图以显示一个或多个捕获进程的这些值。
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-60AA9DA0-93AE-4AF5-B1BA-5ABAF3BE393A">捕获的SCN和应用的SCN</a><br>捕获的SCN是SCN，它对应于捕获过程在重做日志中扫描的最新更改。捕获过程的应用SCN是相关出站服务器处理的最新LCR的SCN。
                        </li>
                        <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-E752A74B-DF85-4C56-A03B-8C5DF751A48D">第一个SCN和启动SCN</a><br>第一个SCN和启动SCN对于捕获过程很重要。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-EDE9234C-ED4B-48A8-94FA-D07055F2FC20" title="熟悉与捕获过程相关的概念。">捕获进程</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="XSTRM72673"></a><div class="props_rev_3"><a id="GUID-60AA9DA0-93AE-4AF5-B1BA-5ABAF3BE393A" name="GUID-60AA9DA0-93AE-4AF5-B1BA-5ABAF3BE393A"></a><h5 id="XSTRM-GUID-60AA9DA0-93AE-4AF5-B1BA-5ABAF3BE393A" class="sect5"><span class="enumeration_section">3.2.10.1</span>捕获的SCN和应用的SCN</h5>
                     <div>
                        <p>捕获的SCN是SCN，它对应于捕获过程在重做日志中扫描的最新更改。捕获过程的应用SCN是相关出站服务器处理的最新LCR的SCN。</p>
                        <p>低于应用的SCN的所有LCR都已由处理捕获过程捕获的更改的所有出站服务器处理。捕获过程的应用SCN等同于处理捕获过程捕获的更改的出站服务器的低水印SCN。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-C9D4482E-F066-4BE1-BFD1-CBF77AC17AA2" title="特定系统更改编号（SCN）值对于捕获过程很重要。">与捕获过程相关的SCN值</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM72674"></a><div class="props_rev_3"><a id="GUID-E752A74B-DF85-4C56-A03B-8C5DF751A48D" name="GUID-E752A74B-DF85-4C56-A03B-8C5DF751A48D"></a><h5 id="XSTRM-GUID-E752A74B-DF85-4C56-A03B-8C5DF751A48D" class="sect5"><span class="enumeration_section">3.2.10.2</span>第一个SCN和启动SCN</h5>
                     <p>第一个SCN和启动SCN对于捕获过程很重要。</p>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-75AC5B66-1B32-4663-BD2D-CD703882C3CD">第一个SCN</a><br>第一个SCN是重做日志中的最低SCN，捕获进程可以从中捕获更改。
                           </li>
                           <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-A506E283-75A2-49E7-95E5-DC91F6B4E4B3">启动SCN</a><br>启动SCN是捕获进程开始捕获更改的SCN。
                           </li>
                           <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-B1F6DFD1-E2F8-4A28-8539-473FF59B7D7D">启动SCN必须大于或等于第一个SCN</a><br>如果在创建或更改捕获过程时指定了启动SCN，则指定的起始SCN必须大于或等于捕获过程的第一个SCN。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-C9D4482E-F066-4BE1-BFD1-CBF77AC17AA2" title="特定系统更改编号（SCN）值对于捕获过程很重要。">与捕获过程相关的SCN值</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="XSTRM72675"></a><div class="props_rev_3"><a id="GUID-75AC5B66-1B32-4663-BD2D-CD703882C3CD" name="GUID-75AC5B66-1B32-4663-BD2D-CD703882C3CD"></a><h6 id="XSTRM-GUID-75AC5B66-1B32-4663-BD2D-CD703882C3CD" class="sect6"><span class="enumeration_section">3.2.10.2.1</span>第一个SCN</h6>
                        <div>
                           <p>第一个SCN是重做日志中的最低SCN，捕获进程可以从中捕获更改。</p>
                           <p>如果在创建捕获进程期间指定第一个SCN，则数据库必须能够从指定的SCN及更高版本访问重做数据。</p>
                           <p><code class="codeph">DBMS_CAPTURE_ADM.BUILD</code>过程将源数据库数据字典提取到重做日志。创建捕获过程时，可以在重做日志中指定与此数据字典构建对应的第一个SCN。具体来说，正在创建捕获进程的第一个SCN可以设置为以下查询返回的任何值：</p><pre class="oac_no_warn" dir="ltr">COLUMN FIRST_CHANGE #HEADING'First SCN'FORMAT 999999999 COLUMN NAME HEADING'日志文件名'格式A50 SELECT DISTINCT FIRST_CHANGE＃，NAME from V $ ARCHIVED_LOG WHERE DICTIONARY_BEGIN ='YES';</pre><p>为<code class="codeph">NAME</code>列返回的值是包含与第一个SCN对应的SCN的重做日志文件的名称。此重做日志文件以及所有后续重做日志文件必须可用于捕获过程。如果此查询为<code class="codeph">FIRST_CHANGE#</code>返回多个不同的值，则<code class="codeph">DBMS_CAPTURE_ADM.BUILD</code>过程已在源数据库上多次运行。在这种情况下，请选择最适合您正在创建的捕获过程的第一个SCN值。
                           </p>
                           <p>在某些情况下，创建捕获进程时会自动运行<code class="codeph">DBMS_CAPTURE_ADM.BUILD</code>过程。发生这种情况时，捕获过程的第一个SCN对应于此数据字典构建。
                           </p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-E752A74B-DF85-4C56-A03B-8C5DF751A48D" title="第一个SCN和启动SCN对于捕获过程很重要。">第一个SCN和启动SCN</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="XSTRM72676"></a><div class="props_rev_3"><a id="GUID-A506E283-75A2-49E7-95E5-DC91F6B4E4B3" name="GUID-A506E283-75A2-49E7-95E5-DC91F6B4E4B3"></a><h6 id="XSTRM-GUID-A506E283-75A2-49E7-95E5-DC91F6B4E4B3" class="sect6"><span class="enumeration_section">3.2.10.2.2</span>启动SCN</h6>
                        <div>
                           <p>启动SCN是捕获进程开始捕获更改的SCN。</p>
                           <p>启动SCN是捕获进程开始捕获更改的SCN。您可以在创建捕获过程期间指定与第一个SCN不同的起始SCN，也可以更改捕获过程以设置其起始SCN。对于捕获过程的正常操作，不需要修改起始SCN。通常，如果必须在从捕获进程接收更改的目标数据库之一上执行时间点恢复，则会为捕获进程重置启动SCN。在这些情况下，捕获过程可以捕获在恢复的时间点之后在源数据库中所做的更改。</p>
                           <div class="infoboxnote" id="GUID-A506E283-75A2-49E7-95E5-DC91F6B4E4B3__GUID-017D3367-13DE-4F13-B780-6DD08ECD8885">
                              <p class="notep1">注意：</p>
                              <p>必须在设置其启动SCN之前停止现有捕获过程。</p>
                           </div>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-E752A74B-DF85-4C56-A03B-8C5DF751A48D" title="第一个SCN和启动SCN对于捕获过程很重要。">第一个SCN和启动SCN</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="XSTRM72677"></a><div class="props_rev_3"><a id="GUID-B1F6DFD1-E2F8-4A28-8539-473FF59B7D7D" name="GUID-B1F6DFD1-E2F8-4A28-8539-473FF59B7D7D"></a><h6 id="XSTRM-GUID-B1F6DFD1-E2F8-4A28-8539-473FF59B7D7D" class="sect6"><span class="enumeration_section">3.2.10.2.3</span>启动SCN必须大于或等于第一个SCN</h6>
                        <div>
                           <p>如果在创建或更改捕获过程时指定了启动SCN，则指定的起始SCN必须大于或等于捕获过程的第一个SCN。</p>
                           <p>捕获进程始终扫描具有比第一个SCN更高的SCN值的任何未扫描的重做日志记录，即使重做日志记录的SCN值低于启动SCN。因此，如果指定的启动SCN大于第一个SCN，则捕获进程可能会扫描无法捕获更改的重做日志记录，因为这些重做日志记录的SCN低于启动SCN。</p>
                           <p>如果可能，应在启动SCN之前扫描重做日志记录，因为它可能需要一些时间。因此，Oracle建议在捕获过程创建期间，第一个SCN和启动SCN之间的差异应尽可能小，以使初始捕获过程的启动时间保持最短。</p>
                           <div class="infoboxnote" id="GUID-B1F6DFD1-E2F8-4A28-8539-473FF59B7D7D__GUID-04F617D8-AD21-4CD9-9A34-E75F2F50424A">
                              <p class="notep1">注意：</p>
                              <p>捕获进程启动或重新启动时，可能需要使用低于启动SCN的<code class="codeph">FIRST_CHANGE#</code>值扫描重做日志文件。在捕获过程扫描之前删除所需的重做日志文件会导致捕获过程中止。您可以查询<code class="codeph">ALL_CAPTURE</code>数据字典视图以确定第一个SCN，启动SCN和所需的检查点SCN。捕获过程需要包含所需检查点SCN的重做日志文件以及所有后续重做日志文件。
                              </p>
                           </div>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-E752A74B-DF85-4C56-A03B-8C5DF751A48D" title="第一个SCN和启动SCN对于捕获过程很重要。">第一个SCN和启动SCN</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
               </div>
            </div><a id="XSTRM1088"></a><div class="props_rev_3"><a id="GUID-30DAD02C-CF3F-4E55-B086-71C79ACDB56F" name="GUID-30DAD02C-CF3F-4E55-B086-71C79ACDB56F"></a><h3 id="XSTRM-GUID-30DAD02C-CF3F-4E55-B086-71C79ACDB56F" class="sect3"><span class="enumeration_section">3.3</span>出站服务器</h3>
               <p>使用XStream Out，出站服务器将数据库更改发送到客户端应用程序。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-B2184D23-665E-4396-B1D1-B1A14208C2EA">出站服务器概述</a><br><span class="bold">出站服务器</span>是可选的Oracle后台进程，它将数据库更改发送到客户端应用程序。
                     </li>
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-5601C48E-D42F-4275-9168-246FEE6EC760">出站服务器支持的数据类型</a><br>出站服务器支持捕获进程支持的所有数据类型。
                     </li>
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-EE2F2C31-26C9-4C0C-8AC7-E5B72CE4DFFB">为出站服务器应用用户</a><br>出站服务器的应用用户是从出站服务器的捕获过程接收LCR的用户。
                     </li>
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-E49F7A89-3520-44DE-8967-849F587557CE">出站服务器和受限制的会话</a><br>启用和禁用受限会话会影响出站服务器。
                     </li>
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-C220D96C-BDB5-49CE-96DA-3A8C1E0382EB">出站服务器子组件</a><br>出站服务器由读取器服务器，协调器进程和应用服务器组成。
                     </li>
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-24DEAED5-C32C-4DC7-8371-0D49550CBAA0">出站服务器的注意事项</a><br>XStream出站服务器有几个注意事项。
                     </li>
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-DB3C1975-3D2B-4527-B8A5-0BC80E523325">出站服务器和应用参数</a><br>应用参数控制出站服务器的行为。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-B59B1F79-91F6-4495-B946-5DCEB317E0D6" title="熟悉与XStream Out相关的概念。">XStream Out Concepts</a></p>
                     </div>
                  </div>
               </div>
               <a id="XSTRM1417"></a><a id="XSTRM72774"></a><div class="props_rev_3"><a id="GUID-B2184D23-665E-4396-B1D1-B1A14208C2EA" name="GUID-B2184D23-665E-4396-B1D1-B1A14208C2EA"></a><h4 id="XSTRM-GUID-B2184D23-665E-4396-B1D1-B1A14208C2EA" class="sect4"><span class="enumeration_section">3.3.1</span>出站服务器概述</h4>
                  <div>
                     <p><span class="bold">出站服务器</span>是可选的Oracle后台进程，它将数据库更改发送到客户端应用程序。
                     </p>
                     <p>具体而言，客户端应用程序可以附加到出站服务器并从LCR中提取数据库更改。客户端应用程序使用OCI或Java接口连接到出站服务器。</p>
                     <p>客户端应用程序可以创建多个会话。每个会话只能连接到一个出站服务器，每个出站服务器一次只能为一个会话服务。但是，不同的客户端应用程序会话可以连接到不同的出站服务器或入站服务器。</p>
                     <p>可以在与出站服务器相同的数据库上或在其他数据库上执行更改捕获。当在与包含出站服务器的数据库不同的数据库上执行更改捕获时， <span class="bold">传播</span>会将更改从更改捕获数据库发送到出站服务器数据库。下游捕获也是一种支持模式，可以减少源数据库的负载。
                     </p>
                     <p>当启用出站服务器及其捕获过程时，将封装在行LCR和DDL LCR中的数据更改发送到出站服务器。出站服务器可以以各种格式发布LCR，例如OCI和Java。客户端应用程序可以处理从出站服务器传递给它的LCR，或者使用循环等待来自出站服务器的LCR。</p>
                     <p>出站服务器以块的形式将LOB， <code class="codeph">LONG</code> ， <code class="codeph">LONG</code> <code class="codeph">RAW</code>和<code class="codeph">XMLType</code>数据发送到客户端应用程序。几个块包含单列值LOB， <code class="codeph">LONG</code> ， <code class="codeph">LONG</code> <code class="codeph">RAW</code>或<code class="codeph">XMLType</code>数据类型。
                     </p>
                     <p>出站服务器配置<a href="xstream-out-concepts.html#GUID-B2184D23-665E-4396-B1D1-B1A14208C2EA__BCEDFFFD">如图3-4</a>所示。
                     </p>
                     <div class="figure" id="GUID-B2184D23-665E-4396-B1D1-B1A14208C2EA__BCEDFFFD">
                        <p class="titleinfigure">图3-4 XStream Out Outbound Server</p><img src="img/xstrm063.gif" width="573" alt="下面是图3-4的描述" title="下面是图3-4的描述" longdesc="img_text/xstrm063.html"><br><a href="img_text/xstrm063.html">“图3-4 XStream Out Outbound Server”的说明</a></div>
                     <!-- class="figure" -->
                     <p>必要时，客户端应用程序可以从出站服务器分离。当客户端应用程序重新附加时，出站服务器会自动确定客户端应用程序在分离时LCR流中的位置。出站服务器从此时开始发送LCR。</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-B2184D23-665E-4396-B1D1-B1A14208C2EA__GUID-3CF8D016-65C4-4F3C-8A96-3B3A9B971645">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="xstream-out-concepts.html#GUID-EDE9234C-ED4B-48A8-94FA-D07055F2FC20" title="熟悉与捕获过程相关的概念。">捕获进程</a> ”</span>以获取有关捕获进程的详细信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-30DAD02C-CF3F-4E55-B086-71C79ACDB56F" title="使用XStream Out，出站服务器将数据库更改发送到客户端应用程序。">出站服务器</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM72684"></a><div class="props_rev_3"><a id="GUID-5601C48E-D42F-4275-9168-246FEE6EC760" name="GUID-5601C48E-D42F-4275-9168-246FEE6EC760"></a><h4 id="XSTRM-GUID-5601C48E-D42F-4275-9168-246FEE6EC760" class="sect4"><span class="enumeration_section">3.3.2</span>出站服务器支持的数据类型</h4>
                  <div>
                     <p>出站服务器支持捕获进程支持的所有数据类型。</p>
                     <p>出站服务器可以将包含对这些数据类型列的更改的LCR发送到XStream客户端应用程序。</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-5601C48E-D42F-4275-9168-246FEE6EC760__GUID-F878FBE7-4247-4794-85C4-EEB7E3BFADF7">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="xstream-out-concepts.html#GUID-19C316B4-C3B1-4C57-9CC7-E60FD728EC40" title="捕获过程可以捕获对大多数数据类型的列所做的更改。">捕获过程捕获的数据类型</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-30DAD02C-CF3F-4E55-B086-71C79ACDB56F" title="使用XStream Out，出站服务器将数据库更改发送到客户端应用程序。">出站服务器</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM72775"></a><div class="props_rev_3"><a id="GUID-EE2F2C31-26C9-4C0C-8AC7-E5B72CE4DFFB" name="GUID-EE2F2C31-26C9-4C0C-8AC7-E5B72CE4DFFB"></a><h4 id="XSTRM-GUID-EE2F2C31-26C9-4C0C-8AC7-E5B72CE4DFFB" class="sect4"><span class="enumeration_section">3.3.3</span>为出站服务器应用用户</h4>
                  <div>
                     <p>出站服务器的应用用户是从出站服务器的捕获过程接收LCR的用户。</p>
                     <p>出站服务器的应用用户必须与捕获用户匹配出站服务器的捕获过程。</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-EE2F2C31-26C9-4C0C-8AC7-E5B72CE4DFFB__GUID-D27DA61F-5FDA-4611-8810-2717E640F22A">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="xstream-out-concepts.html#GUID-422B6435-90BE-4965-AFED-CFAE3D00E782" title="捕获用户的安全域中捕获更改以进行捕获过程。捕获用户捕获满足捕获过程规则集的所有更改。捕获用户必须具有执行这些操作所需的权限。">捕获用户对捕获过程所需的权限</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-30DAD02C-CF3F-4E55-B086-71C79ACDB56F" title="使用XStream Out，出站服务器将数据库更改发送到客户端应用程序。">出站服务器</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM72686"></a><div class="props_rev_3"><a id="GUID-E49F7A89-3520-44DE-8967-849F587557CE" name="GUID-E49F7A89-3520-44DE-8967-849F587557CE"></a><h4 id="XSTRM-GUID-E49F7A89-3520-44DE-8967-849F587557CE" class="sect4"><span class="enumeration_section">3.3.4</span>出站服务器和受限制的会话</h4>
                  <div>
                     <p>启用和禁用受限会话会影响出站服务器。</p>
                     <p>在系统启动期间通过发出<code class="codeph">STARTUP</code> <code class="codeph">RESTRICT</code>语句启用受限会话时，即使在数据库关闭时它们正在运行，出站服务器也不会启动。禁用受限会话时，将启动未停止的每个出站服务器。
                     </p>
                     <p>当SQL语句<code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code> <code class="codeph">ENABLE</code> <code class="codeph">RESTRICTED</code> <code class="codeph">SESSION</code>在正在运行的数据库中启用受限会话时，它不会影响任何正在运行的出站服务器。这些出站服务器继续运行并将LCR发送到XStream客户端应用程序。如果在受限会话中启动了已停止的出站服务器，则在禁用受限会话之前，出站服务器实际上不会启动。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-30DAD02C-CF3F-4E55-B086-71C79ACDB56F" title="使用XStream Out，出站服务器将数据库更改发送到客户端应用程序。">出站服务器</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM72687"></a><div class="props_rev_3"><a id="GUID-C220D96C-BDB5-49CE-96DA-3A8C1E0382EB" name="GUID-C220D96C-BDB5-49CE-96DA-3A8C1E0382EB"></a><h4 id="XSTRM-GUID-C220D96C-BDB5-49CE-96DA-3A8C1E0382EB" class="sect4"><span class="enumeration_section">3.3.5</span>出站服务器子组件</h4>
                  <div>
                     <p>出站服务器由读取器服务器，协调器进程和应用服务器组成。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>从出站服务器的捕获过程接收LCR的<span class="bold">读取器服务器</span> 。读取器服务器是一个计算LCR之间的依赖关系并将LCR组装成事务的过程。然后，阅读器服务器将组装的事务返回给协调器进程。
                           </p>
                           <p>您可以通过查询<code class="codeph">V$XSTREAM_APPLY_READER</code>动态性能视图来查看出站服务器的阅读器服务器的状态。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">协调器进程</span> ，它从读取器服务器获取事务并将它们传递给应用服务器。协调器进程名称是<code class="codeph">AP</code> <span class="italic"><code class="codeph">nn</code></span> ，其中<span class="italic"><code class="codeph">nn</code></span>可以包括字母和数字。协调程序进程是Oracle后台进程。
                           </p>
                           <p>您可以通过查询<code class="codeph">V$XSTREAM_APPLY_COORDINATOR</code>动态性能视图来查看协调程序进程的状态。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">应用服务器</span> ，将LCR发送到XStream客户端应用程序。应用服务器是一个进程。如果应用服务器遇到错误，则它会在<code class="codeph">ALL_APPLY</code>视图中记录有关错误的信息。
                           </p>
                           <p>您可以通过查询<code class="codeph">V$XSTREAM_APPLY_SERVER</code>动态性能视图来查看出站服务器的应用服务器的状态。
                           </p>
                        </li>
                     </ul>
                     <p>读取器服务器和应用服务器进程名称是<code class="codeph">AS</code> <span class="italic"><code class="codeph">nn</code></span> ，其中<span class="italic"><code class="codeph">nn</code></span>可以包括字母和数字。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-C220D96C-BDB5-49CE-96DA-3A8C1E0382EB__GUID-5A3A6C57-C6A9-4816-B277-DFE73640780D">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">V$XSTREAM_APPLY_READER</code>动态性能视图的更多信息，请<a href="../refrn/V-STREAMS_APPLY_READER.html#REFRN30267" target="_blank"><span><cite>参见Oracle数据库参考</cite></span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">V$XSTREAM_APPLY_COORDINATOR</code>动态性能视图的更多信息，请<a href="../refrn/V-STREAMS_APPLY_COORDINATOR.html#REFRN30266" target="_blank"><span><cite>参见Oracle数据库参考</cite></span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">V$XSTREAM_APPLY_SERVER</code>动态性能视图的更多信息，请<a href="../refrn/V-STREAMS_APPLY_SERVER.html#REFRN30268" target="_blank"><span><cite>参见Oracle数据库参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-30DAD02C-CF3F-4E55-B086-71C79ACDB56F" title="使用XStream Out，出站服务器将数据库更改发送到客户端应用程序。">出站服务器</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM1632"></a><div class="props_rev_3"><a id="GUID-24DEAED5-C32C-4DC7-8371-0D49550CBAA0" name="GUID-24DEAED5-C32C-4DC7-8371-0D49550CBAA0"></a><h4 id="XSTRM-GUID-24DEAED5-C32C-4DC7-8371-0D49550CBAA0" class="sect4"><span class="enumeration_section">3.3.6</span>出站服务器的注意事项</h4>
                  <div>
                     <p>XStream出站服务器有几个注意事项。</p>
                     <p>以下是出站服务器的注意事项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>由出站服务器处理的LCR必须是捕获进程捕获的LCR。出站服务器不支持由应用程序构造的LCR。</p>
                        </li>
                        <li>
                           <p>单个出站服务器只能从一个源数据库处理捕获的LCR。源数据库是在重做日志中生成封装在LCR中的更改的数据库。</p>
                        </li>
                        <li>
                           <p>捕获进程捕获的更改的源数据库必须达到10.2.0或更高的兼容级别才能由出站服务器处理这些更改。</p>
                        </li>
                        <li>
                           <p>出站服务器的捕获过程必须在Oracle Database <span class="italic">11g</span>第2版（11.2）或更高版本的数据库上运行。
                           </p>
                        </li>
                        <li>
                           <p>单个捕获进程无法捕获出站服务器和应用进程的更改。但是，单个捕获过程可以捕获多个出站服务器的更改。</p>
                        </li>
                        <li>
                           <p>当捕获进程和流的出站服务器在不同的数据库上运行时，可以自动拆分和合并流。但是，当流的捕获进程和出站服务器在同一数据库上运行时，无法自动拆分和合并流。</p>
                        </li>
                        <li>
                           <p>出站服务器的LCR可以从内存溢出到硬盘，如果它们已经在缓冲队列中一段时间没有被处理，如果事务中有大量LCR，或者内存中没有足够的空间持有所有LCR。当最少的LCR从内存溢出时，出站服务器的性能最佳。您可以使用<code class="codeph">txn_age_spill_threshold</code>和<code class="codeph">txn_lcr_spill_threshold</code> apply参数控制出站服务器有关溢出LCR的行为。
                           </p>
                        </li>
                        <li>
                           <p>出站服务器处理的数据库对象不需要实例化SCN。如果为数据库对象设置了实例化SCN，则出站服务器仅发送具有大于实例化SCN值的SCN值的数据库对象的LCR。如果数据库对象没有设置实例化SCN，则出站服务器会跳过实例化SCN检查并发送该数据库对象的所有LCR。在这两种情况下，出站服务器仅发送满足其规则集的LCR。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-24DEAED5-C32C-4DC7-8371-0D49550CBAA0__GUID-20AC3591-8732-4D25-BBB4-9655765D3ED9">
                        <p class="notep1">也可以看看：</p>
                        <p>有关应用参数的信息<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ARPLS314" target="_blank"><span><cite>，请参见Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-30DAD02C-CF3F-4E55-B086-71C79ACDB56F" title="使用XStream Out，出站服务器将数据库更改发送到客户端应用程序。">出站服务器</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM72776"></a><div class="props_rev_3"><a id="GUID-DB3C1975-3D2B-4527-B8A5-0BC80E523325" name="GUID-DB3C1975-3D2B-4527-B8A5-0BC80E523325"></a><h4 id="XSTRM-GUID-DB3C1975-3D2B-4527-B8A5-0BC80E523325" class="sect4"><span class="enumeration_section">3.3.7</span>出站服务器和应用参数</h4>
                  <div>
                     <p>应用参数控制出站服务器的行为。</p>
                     <p>您可以对出站服务器使用以下应用参数：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">apply_sequence_nextval</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">disable_on_limit</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">grouptransops</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">ignore_transaction</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">max_sga_size</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">maximum_scn</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">startup_seconds</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">时限</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">trace_level</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">transaction_limit</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">txn_age_spill_threshold</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">txn_lcr_spill_threshold</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">write_alert_log</code></p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-DB3C1975-3D2B-4527-B8A5-0BC80E523325__GUID-6EBD2960-BC0E-4414-B95B-768EF36DB074">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_APPLY_ADM.html#ARPLS314" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-30DAD02C-CF3F-4E55-B086-71C79ACDB56F" title="使用XStream Out，出站服务器将数据库更改发送到客户端应用程序。">出站服务器</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="XSTRM1089"></a><div class="props_rev_3"><a id="GUID-3311DD1F-5186-4F94-B471-B0557D4AB2D2" name="GUID-3311DD1F-5186-4F94-B471-B0557D4AB2D2"></a><h3 id="XSTRM-GUID-3311DD1F-5186-4F94-B471-B0557D4AB2D2" class="sect3"><span class="enumeration_section">3.4</span> LCR和XStream Out的位置</h3>
               <div>
                  <p>XStream Out出站服务器将捕获进程捕获的LCR流式传输到客户端应用程序。LCR的位置标识其在交易中的LCR流中的位置。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-757BCBE9-490D-4BCE-8F52-B01493E436E0">与XStream Out中的位置相关的其他LCR属性</a><br>在由捕获过程捕获的LCR中，存在与LCR位置相关的附加信息。
                     </li>
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-4FA4E59F-8B1A-4A29-AA56-0DF1E280637D">XStream Out的已处理低位和可重新启动性</a><br><span class="bold">处理后的低位</span>是一个位置，低于该位置，客户端应用程序已处理所有事务。
                     </li>
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-AFC6A9A9-7E42-475C-B1E6-E88F7D950FC8">流媒体网络传输</a><br>为了最大限度地减少网络延迟，出站服务器使用基于时间的确认将LCR流式传输到客户端应用程序。例如，出站服务器可能每30秒发送一次确认。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-3311DD1F-5186-4F94-B471-B0557D4AB2D2__GUID-EB3E1F50-B4B7-4B2F-9C30-BD3C00D1226F">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="general-xstream-concepts.html#GUID-077AAE24-54CF-4102-9969-9540608FFB65" title="每个LCR都有一个位置属性。LCR的位置标识其在交易中的LCR流中的位置。">在LCR流中定位订单</a> ”</span></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-B59B1F79-91F6-4495-B946-5DCEB317E0D6" title="熟悉与XStream Out相关的概念。">XStream Out Concepts</a></p>
                     </div>
                  </div>
               </div>
               <a id="XSTRM72456"></a><div class="props_rev_3"><a id="GUID-757BCBE9-490D-4BCE-8F52-B01493E436E0" name="GUID-757BCBE9-490D-4BCE-8F52-B01493E436E0"></a><h4 id="XSTRM-GUID-757BCBE9-490D-4BCE-8F52-B01493E436E0" class="sect4"><span class="enumeration_section">3.4.1</span>与XStream Out中的位置相关的附加LCR属性</h4>
                  <div>
                     <p>在由捕获过程捕获的LCR中，存在与LCR位置相关的附加信息。</p>
                     <p>捕获过程捕获的LCR包含以下与LCR位置相关的附加属性：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">scn_from_position</code>属性包含LCR的SCN。</p>
                        </li>
                        <li>
                           <p><code class="codeph">commit_scn_from_position</code>属性包含LCR所属的事务的提交SCN。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-757BCBE9-490D-4BCE-8F52-B01493E436E0__GUID-10DA433B-8B66-42E2-999A-DD7C027FDF28">
                        <p class="notep1">注意：</p>
                        <p><code class="codeph">scn_from_position</code>和<code class="codeph">commit_scn_from_position</code>属性不存在于显式捕获的行LCR中。
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-757BCBE9-490D-4BCE-8F52-B01493E436E0__GUID-F974EFEA-224F-4FAF-80DD-72327EA02D0B">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/Logical-Change-Record-TYPEs.html#ARPLS307" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-3311DD1F-5186-4F94-B471-B0557D4AB2D2" title="XStream Out出站服务器将捕获进程捕获的LCR流式传输到客户端应用程序。LCR的位置标识其在交易中的LCR流中的位置。">LCR和XStream Out的位置</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM1090"></a><div class="props_rev_3"><a id="GUID-4FA4E59F-8B1A-4A29-AA56-0DF1E280637D" name="GUID-4FA4E59F-8B1A-4A29-AA56-0DF1E280637D"></a><h4 id="XSTRM-GUID-4FA4E59F-8B1A-4A29-AA56-0DF1E280637D" class="sect4"><span class="enumeration_section">3.4.2</span> XStream Out的已处理低位和可重新启动性</h4>
                  <div>
                     <p><span class="bold">处理后的低位</span>是一个位置，低于该位置，客户端应用程序已处理所有事务。
                     </p>
                     <p>如果出站服务器或客户端应用程序异常停止，则两者之间的连接会自动中断。在这种情况下，客户端应用程序必须回滚所有未完成的事务。</p>
                     <p>客户端应用程序必须保持其处理的低位置，以便在重新启动它或出站服务器（或两者）后正确恢复。处理后的低位表示客户端应用程序已处理了小于或等于此值的所有LCR。客户端应用程序可以为其消耗的每个事务更新已处理的低位置。</p>
                     <p>当客户端应用程序连接到出站服务器时，可能会出现以下与已处理的低位置相关的条件：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>客户端应用程序可以将处理后的低位置传递给出站服务器，该出站服务器等于或大于出站服务器处理的低位置。在这种情况下，出站服务器从第一个LCR恢复流式LCR，该LCR的位置大于客户端应用程序处理的低位置。</p>
                        </li>
                        <li>
                           <p>客户端应用程序可以将处理后的低位置传递到小于出站服务器处理的低位置的出站服务器。在这种情况下，出站服务器会引发错误。</p>
                        </li>
                        <li>
                           <p>客户端应用程序可以将<code class="codeph">NULL</code>传递给出站服务器。在这种情况下，出站服务器自动确定处理后的低位置，并从位置大于该处理的低位置的LCR开始流式传输LCR。发生这种情况时，客户端应用程序必须抑制或丢弃位置小于或等于客户端应用程序处理的低位置的每个LCR。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-4FA4E59F-8B1A-4A29-AA56-0DF1E280637D__GUID-A5BCA029-CEE9-413B-8CFE-97DECA1690DC">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="monitoring-xstream-out.html#GUID-71A5E78D-4AB8-4FA8-B1EC-C09BFC58D612" title="示例查询说明了如何显示出站服务器的已处理低位。">显示出站服务器的已处理低位</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-3311DD1F-5186-4F94-B471-B0557D4AB2D2" title="XStream Out出站服务器将捕获进程捕获的LCR流式传输到客户端应用程序。LCR的位置标识其在交易中的LCR流中的位置。">LCR和XStream Out的位置</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM1091"></a><div class="props_rev_3"><a id="GUID-AFC6A9A9-7E42-475C-B1E6-E88F7D950FC8" name="GUID-AFC6A9A9-7E42-475C-B1E6-E88F7D950FC8"></a><h4 id="XSTRM-GUID-AFC6A9A9-7E42-475C-B1E6-E88F7D950FC8" class="sect4"><span class="enumeration_section">3.4.3</span>流媒体网络传输</h4>
                  <div>
                     <p>为了最大限度地减少网络延迟，出站服务器使用基于时间的确认将LCR流式传输到客户端应用程序。例如，出站服务器可能每30秒发送一次确认。</p>
                     <p>该流式传输协议充分利用了可用的网络带宽，并且性能不受存在分离发送器和接收器的广域网（WAN）的影响。出站服务器扩展了基础Oracle复制基础架构，出站服务器维护流式传输性能。</p>
                     <p>使用OCI，您可以通过OCI客户端应用程序设置<code class="codeph">OCI_ATTR_XSTREAM_ACK_INTERVAL</code>属性来控制间隔的时间段。默认值为30秒。
                     </p>
                     <p>使用Java，您可以通过在<code class="codeph">XStreamOut</code>类的<code class="codeph">attach</code>方法中设置<code class="codeph">batchInterval</code>参数来控制间隔的时间段。客户端应用程序在调用<code class="codeph">attach</code>方法时可以指定此间隔。
                     </p>
                     <p>如果间隔很大，则出站服务器可以为每个确认间隔流出更多LCR。但是，较长的间隔会延迟客户端应用程序将处理后的低位置发送到出站服务器的频率。因此，较长的间隔可能意味着出站服务器维护的已处理低位置不是最新的。在这种情况下，当出站服务器重新启动时，它必须在比客户端应用程序维护的处理低位置对应的位置更早的位置开始处理LCR。因此，可能会重新传输更多LCR，并且客户端应用程序必须丢弃已应用的LCR。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-3311DD1F-5186-4F94-B471-B0557D4AB2D2" title="XStream Out出站服务器将捕获进程捕获的LCR流式传输到客户端应用程序。LCR的位置标识其在交易中的LCR流中的位置。">LCR和XStream Out的位置</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="XSTRM72455"></a><div class="props_rev_3"><a id="GUID-78C2B119-E3C0-4A79-92D2-72D762EF63E9" name="GUID-78C2B119-E3C0-4A79-92D2-72D762EF63E9"></a><h3 id="XSTRM-GUID-78C2B119-E3C0-4A79-92D2-72D762EF63E9" class="sect3"><span class="enumeration_section">3.5</span> XStream Out和分布式事务</h3>
               <div>
                  <p>有关XStream Out和分布式事务的注意事项。</p>
                  <p>您可以使用以下任一方法执行分布式事务：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用数据库链接以协调的方式修改多个数据库中的表。</p>
                     </li>
                     <li>
                        <p>使用XA接口，由<code class="codeph">DBMS_XA</code>提供的PL / SQL包或OCI或JDBC库公开。XA接口实现X / Open分布式事务处理（DTP）架构。
                        </p>
                     </li>
                  </ul>
                  <p>在XStream Out配置中，使用上述任一方法在分布式事务期间对源数据库所做的更改将流式传输到XStream出站服务器。事务提交后，出站服务器将事务中的更改发送到XStream客户端应用程序。</p>
                  <p>但是，不会复制或发送分布式事务状态。客户端应用程序不会继承此类事务的不确定或准备状态。此外，XStream不会使用源数据库中用于XA事务的相同全局事务标识符来复制或发送更改。</p>
                  <p>XA事务可以通过两种方式执行：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>紧密耦合，不同的XA分支共享锁</p>
                     </li>
                     <li>
                        <p>松散耦合，不同的XA分支不共享锁</p>
                     </li>
                  </ul>
                  <p>无论<code class="codeph">COMPATIBLE</code>初始化参数值如何，XStream都支持复制松散耦合的XA分支所做的更改。仅当<code class="codeph">COMPATIBLE</code>初始化参数设置为<code class="codeph">11.2.0.0</code>或更高版本时，XStream才支持复制由Oracle RAC源数据库上的紧密耦合分支所做的更改。
                  </p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-78C2B119-E3C0-4A79-92D2-72D762EF63E9__GUID-388E9F9C-5772-46AB-9814-ED63FC6DA5BF">
                     <p class="notep1">也可以看看：</p>
                     <p></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关分布式事务的详细信息，请参见<a href="../admin/distributed-database-concepts.html#ADMIN12113" target="_blank"><span><cite>“Oracle数据库管理员指南</cite></span></a></p>
                        </li>
                        <li>
                           <p>有关Oracle XA的更多信息，请参见<a href="../adfns/xa.html#ADFNS017" target="_blank"><span><cite>Oracle数据库开发指南</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-B59B1F79-91F6-4495-B946-5DCEB317E0D6" title="熟悉与XStream Out相关的概念。">XStream Out Concepts</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="XSTRM1111"></a><div class="props_rev_3"><a id="GUID-42DE906D-2E9E-4CD5-960A-02741B73D564" name="GUID-42DE906D-2E9E-4CD5-960A-02741B73D564"></a><h3 id="XSTRM-GUID-42DE906D-2E9E-4CD5-960A-02741B73D564" class="sect3"><span class="enumeration_section">3.6</span> XStream输出和安全性</h3>
               <div>
                  <p>了解与客户端应用程序和XStream组件相关的安全性，以及捕获用户和连接用户所需的权限。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-49654FF5-9380-4EA1-B952-3EC653F7BD1F">XStream Out客户端应用程序和安全性</a><br>客户端应用程序有安全注意事项，因为XStream Out允许它接收LCR。
                     </li>
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-03CBBA56-CF2D-47A1-BBAB-90E925A8F65D">XStream Out组件级安全性</a><br>XStream Out配置的所有组件都作为相同的XStream管理员运行。此用户可以是具有高级别权限的受信任用户，也可以是仅具有执行某些任务所需权限的不受信任用户。
                     </li>
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-422B6435-90BE-4965-AFED-CFAE3D00E782">捕获用户对捕获过程所需的权限</a><br>捕获用户的安全域中捕获更改以进行捕获过程。捕获用户捕获满足捕获过程规则集的所有更改。捕获用户必须具有执行这些操作所需的权限。
                     </li>
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-1AF4D7D6-727D-4688-8CF6-377D9E7AF41E">出站服务器的连接用户所需的权限</a><br>出站服务器将LCR发送到其连接用户的安全域中的XStream客户端应用程序。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-42DE906D-2E9E-4CD5-960A-02741B73D564__GUID-C26EB658-1837-4DA7-A6AF-D4E688D805CA">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="introduction-to-xstream.html#GUID-E7C2EC43-186F-4163-AAEB-1D119C9D1DF1" title="使用XStream，您可以实施最符合组织要求的安全模型。">XStream安全模型</a> ”</span></p>
                        </li>
                        <li>
                           <p><a href="../arpls/DBMS_XSTREAM_ADM.html#ARPLS70185" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-B59B1F79-91F6-4495-B946-5DCEB317E0D6" title="熟悉与XStream Out相关的概念。">XStream Out Concepts</a></p>
                     </div>
                  </div>
               </div>
               <a id="XSTRM72914"></a><div class="props_rev_3"><a id="GUID-49654FF5-9380-4EA1-B952-3EC653F7BD1F" name="GUID-49654FF5-9380-4EA1-B952-3EC653F7BD1F"></a><h4 id="XSTRM-GUID-49654FF5-9380-4EA1-B952-3EC653F7BD1F" class="sect4"><span class="enumeration_section">3.6.1</span> XStream Out Client应用程序和安全性</h4>
                  <div>
                     <p>客户端应用程序有安全注意事项，因为XStream Out允许它接收LCR。</p>
                     <p>在XStream Out应用程序接收LCR之后，应用程序可能会将LCR的内容保存到文件中，或生成SQL语句以在非Oracle数据库上执行LCR。</p>
                     <p>Java和OCI客户端应用程序必须连接到Oracle数据库，然后才能连接到在该数据库上创建的XStream出站服务器。连接的用户必须与为出站服务器配置的<code class="codeph">connect_user</code>相同。否则，会引发错误。XStream不假定出站服务器的连接用户是可信的。
                     </p>
                     <p>XStream Java层API依赖于Oracle JDBC安全性，因为XStream接受客户端应用程序在<code class="codeph">XStreamOut</code>类的XStream <code class="codeph">attach</code>方法中创建的Oracle JDBC连接实例。已连接的用户被验证为XStream用户。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-49654FF5-9380-4EA1-B952-3EC653F7BD1F__GUID-313EE6F0-38F9-4955-B7FE-3DC6A127DB04">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关XStream的OCI接口的信息，请参阅<a href="../lnoci/intro-to-oci-interface-for-XStream.html#LNOCI72903" target="_blank"><span><cite>Oracle Call Interface Programmer's Guide</cite></span></a></p>
                           </li>
                           <li>
                              <p>有关XStream的Java接口的信息，请<a href="../stxjv/index.html" target="_blank"><span><cite>参见Oracle Database XStream Java API参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-42DE906D-2E9E-4CD5-960A-02741B73D564" title="了解与客户端应用程序和XStream组件相关的安全性，以及捕获用户和连接用户所需的权限。">XStream Out和Security</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM72915"></a><div class="props_rev_3"><a id="GUID-03CBBA56-CF2D-47A1-BBAB-90E925A8F65D" name="GUID-03CBBA56-CF2D-47A1-BBAB-90E925A8F65D"></a><h4 id="XSTRM-GUID-03CBBA56-CF2D-47A1-BBAB-90E925A8F65D" class="sect4"><span class="enumeration_section">3.6.2</span> XStream Out组件级安全性</h4>
                  <div>
                     <p>XStream Out配置的所有组件都作为相同的XStream管理员运行。此用户可以是具有高级别权限的受信任用户，也可以是仅具有执行某些任务所需权限的不受信任用户。</p>
                     <p>XStream管理员的安全模型还确定此用户可以查询以监视XStream配置的数据字典视图。受信任的管理员可以使用<code class="codeph">DBA_</code>视图监视XStream。不受信任的管理员可以使用<code class="codeph">ALL_</code>视图监视XStream。
                     </p>
                     <p>您可以使用<code class="codeph">DBMS_XSTREAM_AUTH</code>包中的<code class="codeph">GRANT_ADMIN_PRIVILEGE</code>过程创建XStream管理员。当您运行此过程为XStream Out创建XStream管理员时， <code class="codeph">privilege_type</code>参数确定授予用户的权限类型：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果XStream管理员仅管理数据库上的XStream Out配置，请为<code class="codeph">privilege_type</code>参数指定<code class="codeph">CAPTURE</code> 。
                           </p>
                        </li>
                        <li>
                           <p>如果XStream管理员同时管理数据库上的XStream Out和XStream In配置，则为<code class="codeph">privilege_type</code>参数指定<code class="codeph">*</code> 。
                           </p>
                        </li>
                     </ul>
                     <p><code class="codeph">GRANT_ADMIN_PRIVILEGE</code>过程为在XStream Out或XStream In配置中运行组件所需的Oracle提供的视图和包授予特权。此过程不授予用户拥有的数据库对象的权限。如果需要此类权限，则必须单独授予它们。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-03CBBA56-CF2D-47A1-BBAB-90E925A8F65D__GUID-CF63C3EF-A756-4825-8F07-575AB6B604E2">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="configuring-xstream-out.html#GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128" title="XStream管理员在XStream Out环境中配置和管理XStream组件。">在所有数据库上配置XStream管理员</a> ”</span>以获取有关配置XStream管理员的详细信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-42DE906D-2E9E-4CD5-960A-02741B73D564" title="了解与客户端应用程序和XStream组件相关的安全性，以及捕获用户和连接用户所需的权限。">XStream Out和Security</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM72681"></a><div class="props_rev_3"><a id="GUID-422B6435-90BE-4965-AFED-CFAE3D00E782" name="GUID-422B6435-90BE-4965-AFED-CFAE3D00E782"></a><h4 id="XSTRM-GUID-422B6435-90BE-4965-AFED-CFAE3D00E782" class="sect4"><span class="enumeration_section">3.6.3</span>捕获用户对捕获过程所需的权限</h4>
                  <div>
                     <p>捕获用户的安全域中捕获更改以进行捕获过程。捕获用户捕获满足捕获过程规则集的所有更改。捕获用户必须具有执行这些操作所需的权限。</p>
                     <div class="section">
                        <p>捕获用户必须具有以下权限：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对捕获过程使用的规则集的<code class="codeph">EXECUTE</code>特权</p>
                           </li>
                           <li>
                              <p>对为正规则集中的规则指定的所有基于规则的自定义转换函数的<code class="codeph">EXECUTE</code>特权</p>
                           </li>
                           <li>
                              <p>将LCR排入捕获进程队列的权限</p>
                           </li>
                        </ul>
                        <p>捕获过程可以仅与一个用户相关联，但是一个用户可以与许多捕获过程相关联。</p>
                        <p>通过为<code class="codeph">GRANT_ADMIN_PRIVILEGE</code>过程中的<code class="codeph">privilege_type</code>参数指定<code class="codeph">CAPTURE</code> ，使用<code class="codeph">DBMS_XSTREAM_AUTH</code>包为捕获用户授予权限。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-422B6435-90BE-4965-AFED-CFAE3D00E782__GUID-C86F128B-DC84-4781-94DD-DBD4EC10E5EE">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="configuring-xstream-out.html#GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128" title="XStream管理员在XStream Out环境中配置和管理XStream组件。">在所有数据库上配置XStream管理员</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="managing-xstream-out.html#GUID-AF27FFEF-C9B7-4CF0-9DCA-37540B2900BB" title="捕获用户是捕获进程从重做日志捕获更改的安全域中的用户。">更改出站服务器的捕获过程的捕获用户</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">GRANT_ADMIN_PRIVILEGE</code>过程的详细信息，请<code class="codeph">GRANT_ADMIN_PRIVILEGE</code> <a href="../arpls/DBMS_XSTREAM_AUTH.html#ARPLS73653" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-42DE906D-2E9E-4CD5-960A-02741B73D564" title="了解与客户端应用程序和XStream组件相关的安全性，以及捕获用户和连接用户所需的权限。">XStream Out和Security</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM72685"></a><div class="props_rev_3"><a id="GUID-1AF4D7D6-727D-4688-8CF6-377D9E7AF41E" name="GUID-1AF4D7D6-727D-4688-8CF6-377D9E7AF41E"></a><h4 id="XSTRM-GUID-1AF4D7D6-727D-4688-8CF6-377D9E7AF41E" class="sect4"><span class="enumeration_section">3.6.4</span> Connect用户对出站服务器所需的权限</h4>
                  <div>
                     <p>出站服务器将LCR发送到其连接用户的安全域中的XStream客户端应用程序。</p>
                     <div class="section">
                        <p>connect用户将满足出站服务器规则集的LCR发送到XStream客户端应用程序。此外，connect用户还运行这些规则集中的规则指定的所有基于规则的自定义转换。</p>
                        <p>connect用户必须具有以下权限：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对出站服务器使用的规则集的<code class="codeph">EXECUTE</code>特权</p>
                           </li>
                           <li>
                              <p>对为正规则集中的规则指定的所有基于规则的自定义转换函数的<code class="codeph">EXECUTE</code>特权</p>
                           </li>
                        </ul>
                        <p>出站服务器只能与一个用户关联，但一个用户可以与许多出站服务器关联。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-1AF4D7D6-727D-4688-8CF6-377D9E7AF41E__GUID-E3BBD1E1-086E-4689-B003-B1C738C881C5">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="introduction-to-xstream.html#GUID-E7C2EC43-186F-4163-AAEB-1D119C9D1DF1" title="使用XStream，您可以实施最符合组织要求的安全模型。">XStream安全模型</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="managing-xstream-out.html#GUID-3DBA0E60-D4CE-4F3B-A36F-7B323C38428F" title="客户端应用程序作为connect用户连接到出站服务器。您可以使用DBMS_XSTREAM_ADM程序包中的ALTER_OUTBOUND过程更改出站服务器的连接用户。">更改出站服务器的连接用户</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_XSTREAM_ADM.html#ARPLS70185" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a> <code class="codeph">DBMS_XSTREAM_ADM</code>包“安全模型”，用于获取有关配置和管理XStream的安全性要求的信息</p>
                           </li>
                           <li>
                              <p>有关XStream的OCI接口的信息，请参阅<a href="../lnoci/intro-to-oci-interface-for-XStream.html#LNOCI72903" target="_blank"><span><cite>Oracle Call Interface Programmer's Guide</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-42DE906D-2E9E-4CD5-960A-02741B73D564" title="了解与客户端应用程序和XStream组件相关的安全性，以及捕获用户和连接用户所需的权限。">XStream Out和Security</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="XSTRM72777"></a><div class="props_rev_3"><a id="GUID-EE24B98B-15DD-4DCD-A7D6-58D505C20D43" name="GUID-EE24B98B-15DD-4DCD-A7D6-58D505C20D43"></a><h3 id="XSTRM-GUID-EE24B98B-15DD-4DCD-A7D6-58D505C20D43" class="sect3"><span class="enumeration_section">3.7</span> XStream Out和其他Oracle数据库组件</h3>
               <p>XStream Out可以与其他Oracle数据库组件一起使用。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-A058CE29-4D13-4EB2-ACDE-29DC6B7F2CDE">XStream Out和Oracle Real Application Clusters</a><br>XStream Out可以与Oracle Real Application Clusters（Oracle RAC）配合使用。
                     </li>
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-4C802CD7-2E25-44A5-BBDC-63F3B32C35FC">XStream Out和透明数据加密</a><br>XStream Out可以使用透明数据加密。
                     </li>
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-900B4B57-9A7F-4DAF-A45B-93F59B2FFF2A">XStream Out和闪回数据存档</a><br>XStream Out支持闪回数据存档中的表。
                     </li>
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-00269B9D-DBB8-4EC5-ADAB-87FFCC462372">XStream Out和Recovery Manager</a><br>RMAN删除策略可能会影响捕获过程。
                     </li>
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-BEC3A348-0622-4591-8B69-46DD454607CF">XStream和分布式事务</a><br>XStream Out支持分布式事务。
                     </li>
                     <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-6F932401-47F6-4A5A-BA72-EBFF2342C579">XStream Out和多租户环境</a><br>多租户环境使数据库能够包含一组可移植的模式，对象和相关结构，这些模式在逻辑上作为单独的数据库出现在应用程序中。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-B59B1F79-91F6-4495-B946-5DCEB317E0D6" title="熟悉与XStream Out相关的概念。">XStream Out Concepts</a></p>
                     </div>
                  </div>
               </div>
               <a id="XSTRM72778"></a><div class="props_rev_3"><a id="GUID-A058CE29-4D13-4EB2-ACDE-29DC6B7F2CDE" name="GUID-A058CE29-4D13-4EB2-ACDE-29DC6B7F2CDE"></a><h4 id="XSTRM-GUID-A058CE29-4D13-4EB2-ACDE-29DC6B7F2CDE" class="sect4"><span class="enumeration_section">3.7.1</span> XStream Out和Oracle Real Application Clusters</h4>
                  <p>XStream Out可以与Oracle Real Application Clusters（Oracle RAC）配合使用。</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-67059465-CB08-442F-A587-B677227110E6">捕获进程和Oracle Real Application Clusters</a><br>捕获过程可以捕获Oracle Real Application Clusters（Oracle RAC）环境中的更改。
                        </li>
                        <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-915A3DEE-7837-4B65-810D-795994F9111D">队列和Oracle Real Application Clusters</a><br>您可以在Oracle Real Application Clusters（Oracle RAC）环境中配置队列。
                        </li>
                        <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-B982A762-5ECC-4916-8EE8-E94580FA933F">传播和Oracle Real Application Clusters</a><br>传播可以在Oracle Real Application Clusters（Oracle RAC）环境中将LCR从一个队列传播到另一个队列。在实例上运行的传播作业将逻辑更改记录（LCR）从该实例拥有的任何队列传播到目标队列。
                        </li>
                        <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-899494DB-2751-4632-B7C1-F41A66826DF2">出站服务器和Oracle Real Application Clusters</a><br>您可以提供您设置了Oracle真正应用集群（Oracle RAC）环境中配置出站服务器<code class="codeph">use_rac_service</code>到<code class="codeph">Y</code>在程序<code class="codeph">DBMS_CAPTURE_ADM.SET_PARAMETER</code> 。</li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-EE24B98B-15DD-4DCD-A7D6-58D505C20D43" title="XStream Out可以与其他Oracle数据库组件一起使用。">XStream Out和其他Oracle数据库组件</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="XSTRM72779"></a><div class="props_rev_3"><a id="GUID-67059465-CB08-442F-A587-B677227110E6" name="GUID-67059465-CB08-442F-A587-B677227110E6"></a><h5 id="XSTRM-GUID-67059465-CB08-442F-A587-B677227110E6" class="sect5"><span class="enumeration_section">3.7.1.1</span>捕获进程和Oracle Real Application Clusters</h5>
                     <div>
                        <p>捕获过程可以捕获Oracle Real Application Clusters（Oracle RAC）环境中的更改。</p>
                        <p>如果在同一环境中使用一个或多个捕获进程和Oracle RAC，那么包含要由捕获进程捕获的更改的所有归档日志必须可用于Oracle RAC环境中的所有实例。在Oracle RAC环境中，捕获进程读取所有实例所做的更改。使用相同捕获进程的多个出站服务器进程必须在与捕获进程相同的Oracle RAC实例中运行。</p>
                        <p>通过在过程<code class="codeph">DBMS_CAPTURE_ADM.SET_PARAMETER</code>参数<code class="codeph">use_rac_service</code>设置为<code class="codeph">Y</code> ，可以确保捕获进程在与其队列相同的Oracle RAC实例中运行。</p>
                        <p>如果捕获进程参数<code class="codeph">use_rac_service</code>值设置为<code class="codeph">Y</code> ，则即使在其他实例上运行启动或停止过程，也会在其<code class="codeph">ANYDATA</code>队列的所有者实例上启动和停止每个捕获进程。此外，如果当前所有者实例变得不可用，则捕获进程将跟随其队列到另一个实例。队列本身遵循主实例和辅助实例所有权的规则。
                        </p>
                        <p>如果捕获进程参数<code class="codeph">use_rac_service</code>值设置为<code class="codeph">N</code> ，则在客户端应用程序连接的实例上启动捕获进程。必须在启动捕获过程的同一实例上执行停止捕获过程。
                        </p>
                        <p>如果包含捕获进程使用的队列的队列表的所有者实例变得不可用，则队列所有权将自动传输到集群中的另一个实例。此外，如果在所有者实例变为不可用时启用了捕获过程，则会在新的所有者实例上自动重新启动捕获过程。如果在所有者实例变为不可用时禁用捕获过程，则捕获过程将在新的所有者实例上保持禁用状态。</p>
                        <p>LogMiner支持<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>初始化参数，捕获进程使用LogMiner从重做日志中捕获更改。如果从一个目标无法访问存档日志文件，则本地捕获进程可以从另一个可访问目标读取它。在Oracle RAC数据库上，此功能还允许您使用跨实例存档（CIA），以便每个实例将其文件存档到所有其他实例。此解决方案无法检测或解决由丢失的归档日志文件导致的间隙。因此，它只能用于补充现有解决方案，以便在所有实例之间共享归档文件。
                        </p>
                        <p>在下游捕获过程环境中，源数据库可以是单实例数据库或多实例Oracle RAC数据库。无论源数据库是单实例还是多实例，下游数据库都可以是单实例数据库或多实例Oracle RAC数据库。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-67059465-CB08-442F-A587-B677227110E6__GUID-46638377-6EBC-4818-878D-2815F0F7E8A1">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="xstream-out-concepts.html#GUID-EDE9234C-ED4B-48A8-94FA-D07055F2FC20" title="熟悉与捕获过程相关的概念。">捕获过程</a> ”</span></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">ALL_QUEUE_TABLES</code>数据字典视图的更多信息，请<code class="codeph">ALL_QUEUE_TABLES</code> <a href="../refrn/ALL_QUEUE_TABLES.html#REFRN20175" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关配置要在实例之间共享的归档日志的详细信息，请参阅<a href="../racad/configuring-recovery-manager-and-archiving.html#RACAD325" target="_blank"><span><cite>“Oracle Real Application Clusters管理和部署指南”</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-A058CE29-4D13-4EB2-ACDE-29DC6B7F2CDE" title="XStream Out可以与Oracle Real Application Clusters（Oracle RAC）配合使用。">XStream Out和Oracle Real Application Clusters</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM72780"></a><div class="props_rev_3"><a id="GUID-915A3DEE-7837-4B65-810D-795994F9111D" name="GUID-915A3DEE-7837-4B65-810D-795994F9111D"></a><h5 id="XSTRM-GUID-915A3DEE-7837-4B65-810D-795994F9111D" class="sect5"><span class="enumeration_section">3.7.1.2</span>队列和Oracle Real Application Clusters</h5>
                     <div>
                        <p>您可以在Oracle Real Application Clusters（Oracle RAC）环境中配置队列。</p>
                        <p>在Oracle RAC环境中，只有所有者实例可以具有队列的缓冲区，但不同的实例可以具有不同队列的缓冲区。缓冲队列是与队列相关联的系统全局区域（SGA）存储器。</p>
                        <p>将捕获进程参数<code class="codeph">use_rac_service</code>为<code class="codeph">Y</code>以指定队列表的所有权或给定队列表的主要和辅助实例的所有权。
                        </p>
                        <p>XStream Out进程和作业支持队列表的主实例和辅助实例规范。如果<code class="codeph">use_rac_service</code>设置为<code class="codeph">Y</code> ，则可以使用队列表的规范，并且辅助实例在主实例变得不可用时承担队列表的所有权。当队列所有权再次可用时，它将被转移回主实例。
                        </p>
                        <p>如果包含传播目标队列的队列表的所有者实例变为不可用，则队列所有权将自动传输到群集中的另一个实例。如果包含目标队列的队列表的主实例和辅助实例都不可用，则队列所有权将自动传输到集群中的另一个实例。在这种情况下，如果主实例或辅助实例再次可用，则相应地将所有权转移回其中一个实例。</p>
                        <p>可以使用设置初级和次级实例规格<code class="codeph">ALTER_QUEUE_TABLE</code>在程序<code class="codeph">DBMS_AQADM</code>包。<code class="codeph">ALL_QUEUE_TABLES</code>数据字典视图包含有关队列表的所有者实例的信息。队列表可以包含多个队列。在这种情况下，队列表中的每个队列都具有与队列表相同的所有者实例。
                        </p>
                        <p><code class="codeph">ALL_QUEUES</code>数据字典视图中的<code class="codeph">NETWORK_NAME</code>列包含队列服务的网络名称。不要以任何方式管理队列服务。Oracle自动管理它们。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-915A3DEE-7837-4B65-810D-795994F9111D__GUID-143019BC-C6C0-4292-81AE-76BB00A9F399">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">ALL_QUEUE_TABLES</code>数据字典视图的更多信息，请<code class="codeph">ALL_QUEUE_TABLES</code> <a href="../refrn/ALL_QUEUE_TABLES.html#REFRN20175" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关队列和Oracle RAC的详细信息，请参见<a href="../adque/aq-performance-scalability.html#ADQUE0500" target="_blank"><span><cite>“Oracle数据库高级队列用户指南”</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">ALTER_QUEUE_TABLE</code>过程的详细信息，请<code class="codeph">ALTER_QUEUE_TABLE</code> <a href="../arpls/DBMS_AQADM.html#ARPLS107" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-A058CE29-4D13-4EB2-ACDE-29DC6B7F2CDE" title="XStream Out可以与Oracle Real Application Clusters（Oracle RAC）配合使用。">XStream Out和Oracle Real Application Clusters</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM72781"></a><div class="props_rev_3"><a id="GUID-B982A762-5ECC-4916-8EE8-E94580FA933F" name="GUID-B982A762-5ECC-4916-8EE8-E94580FA933F"></a><h5 id="XSTRM-GUID-B982A762-5ECC-4916-8EE8-E94580FA933F" class="sect5"><span class="enumeration_section">3.7.1.3</span>传播和Oracle Real Application Clusters</h5>
                     <div>
                        <p>传播可以在Oracle Real Application Clusters（Oracle RAC）环境中将LCR从一个队列传播到另一个队列。在实例上运行的传播作业将逻辑更改记录（LCR）从该实例拥有的任何队列传播到目标队列。</p>
                        <p>本节中的信息仅适用于包含传播的XStream配置。在典型的XStream配置中，出站服务器及其捕获进程在同一数据库上配置，并且不需要传播。本节中的信息不适用于不包含传播的配置。但是，可以在一个数据库上配置捕获进程，在另一个数据库上配置出站服务器。在这种情况下，传播将LCR从捕获进程的队列发送到出站服务器的队列。</p>
                        <p>在您可以在Oracle RAC环境中传播的LCR，则必须设置<code class="codeph">use_rac_service</code>到<code class="codeph">Y</code>在程序<code class="codeph">DBMS_CAPTURE_ADM.SET_PARAMETER</code> 。</p>
                        <p>通过数据库链接传播到Oracle RAC数据库的任何传播。必须将数据库链接配置为连接到拥有将接收LCR的队列的目标实例。</p>
                        <p>队列到队列的传播到缓冲的目标队列使用服务在Oracle RAC环境中提供透明的故障转移。也就是说，队列到队列传播的传播作业会自动连接到拥有目标队列的实例。队列到队列传播使用的服务始终在目标队列的所有者实例上运行。仅为Oracle RAC数据库中的缓冲队列创建此服务。如果计划将缓冲消息传递与Oracle RAC数据库一起使用，则可以将LCR排入任何实例的缓冲队列中。如果LCR在不拥有队列的实例上排队，那么LCR将被发送到正确的实例，但是在拥有队列的实例上排队LCR更有效。在将LCR排入缓冲队列之前，您可以使用该服务连接到队列的所有者实例。</p>
                        <p>由于队列服务始终在队列的所有者实例上运行，因此当Oracle RAC实例发生故障时可能会发生透明故障转移。当多个队列到队列传播使用单个数据库链接时，每个队列到队列传播的连接描述会自动更改，以将LCR传播到正确的目标队列。</p>
                        <div class="infoboxnote" id="GUID-B982A762-5ECC-4916-8EE8-E94580FA933F__GUID-364F0DA0-4400-4C78-BBE1-F7794FDAF995">
                           <p class="notep1">注意：</p>
                           <p>如果队列包含或将包含Oracle RAC环境中捕获的LCR，则使用队列到队列传播将LCR传播到Oracle RAC目标数据库。</p>
                        </div>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-A058CE29-4D13-4EB2-ACDE-29DC6B7F2CDE" title="XStream Out可以与Oracle Real Application Clusters（Oracle RAC）配合使用。">XStream Out和Oracle Real Application Clusters</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM72782"></a><div class="props_rev_3"><a id="GUID-899494DB-2751-4632-B7C1-F41A66826DF2" name="GUID-899494DB-2751-4632-B7C1-F41A66826DF2"></a><h5 id="XSTRM-GUID-899494DB-2751-4632-B7C1-F41A66826DF2" class="sect5"><span class="enumeration_section">3.7.1.4</span>出站服务器和Oracle Real Application Clusters</h5>
                     <div>
                        <p>您可以提供您设置了Oracle真正应用集群（Oracle RAC）环境中配置出站服务器<code class="codeph">use_rac_service</code>到<code class="codeph">Y</code>在程序<code class="codeph">DBMS_CAPTURE_ADM.SET_PARAMETER</code> 。</p>
                        <p>即使启动或停止过程在另一个实例上运行，每个出站服务器也会在其所有者实例上为其<code class="codeph">ANYDATA</code>队列启动和停止。协调器进程，其相应的应用程序读取器服务器及其应用服务器在单个实例上运行。使用相同捕获进程的多个XStream Out进程必须在与捕获进程相同的Oracle RAC实例中运行。
                        </p>
                        <p>如果包含出站服务器使用的队列的队列表的所有者实例变得不可用，则队列所有权将自动传输到集群中的另一个实例。此外，如果当前所有者实例变得不可用，则出站服务器将跟随其队列到另一个实例。队列本身遵循主实例和辅助实例所有权的规则。此外，如果在所有者实例不可用时启用了出站服务器，则会在新的所有者实例上自动重新启动出站服务器。如果在所有者实例变为不可用时禁用了出站服务器，则出站服务器将在新的所有者实例上保持禁用状态。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-899494DB-2751-4632-B7C1-F41A66826DF2__GUID-9D047F1B-08CB-4417-9D4B-DBC57802C960">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="xstream-out-concepts.html#GUID-30DAD02C-CF3F-4E55-B086-71C79ACDB56F" title="使用XStream Out，出站服务器将数据库更改发送到客户端应用程序。">出站服务器</a> ”</span></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">ALL_QUEUE_TABLES</code>数据字典视图的更多信息，请<code class="codeph">ALL_QUEUE_TABLES</code> <a href="../refrn/ALL_QUEUE_TABLES.html#REFRN20175" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-A058CE29-4D13-4EB2-ACDE-29DC6B7F2CDE" title="XStream Out可以与Oracle Real Application Clusters（Oracle RAC）配合使用。">XStream Out和Oracle Real Application Clusters</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="XSTRM72783"></a><div class="props_rev_3"><a id="GUID-4C802CD7-2E25-44A5-BBDC-63F3B32C35FC" name="GUID-4C802CD7-2E25-44A5-BBDC-63F3B32C35FC"></a><h4 id="XSTRM-GUID-4C802CD7-2E25-44A5-BBDC-63F3B32C35FC" class="sect4"><span class="enumeration_section">3.7.2</span> XStream Out和透明数据加密</h4>
                  <div>
                     <p>XStream Out可以使用透明数据加密。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-A222427F-5F7A-4191-BF4B-5F5BBA5388BB">捕获进程和透明数据加密</a><br>捕获进程可以捕获已使用透明数据加密加密的列的更改。
                        </li>
                        <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-7F3B629D-3C42-4FF2-8E07-21AE9C0B39FE">传播和透明数据加密</a><br>传播可以传播行逻辑更改记录（行LCR），其中包含使用透明数据加密加密的列的更改。
                        </li>
                        <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-1508B1C3-B8D4-44D8-AA73-30E01DFFEAA9">出站服务器和透明数据加密</a><br>出站服务器可以处理包含使用透明数据加密加密的列的隐式捕获的行逻辑更改记录（行LCR）。
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-4C802CD7-2E25-44A5-BBDC-63F3B32C35FC__GUID-C47C6C2B-F4FA-49CA-90EA-A9DDF9B4E73F">
                        <p class="notep1">也可以看看：</p>
                        <p>有关透明数据加密的信息，请参见<a href="../asoag/asopart1.html#ASOAG600" target="_blank"><span><cite>“Oracle数据库高级安全指南</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-EE24B98B-15DD-4DCD-A7D6-58D505C20D43" title="XStream Out可以与其他Oracle数据库组件一起使用。">XStream Out和其他Oracle数据库组件</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="XSTRM72784"></a><div class="props_rev_3"><a id="GUID-A222427F-5F7A-4191-BF4B-5F5BBA5388BB" name="GUID-A222427F-5F7A-4191-BF4B-5F5BBA5388BB"></a><h5 id="XSTRM-GUID-A222427F-5F7A-4191-BF4B-5F5BBA5388BB" class="sect5"><span class="enumeration_section">3.7.2.1</span>捕获进程和透明数据加密</h5>
                     <div>
                        <p>捕获进程可以捕获已使用透明数据加密加密的列的更改。</p>
                        <p>本地捕获过程可以捕获已使用透明数据加密加密的列的更改。仅当下游数据库与源数据库共享加密密钥库（用于身份验证和签名凭据的容器）时，下游捕获进程才能捕获已加密的列的更改。密钥库可以通过网络文件系统（NFS）共享，也可以手动从一个计算机系统复制到另一个计算机系统。与下游数据库共享密钥库时，请确保下游数据库的<code class="codeph">sqlnet.ora</code>文件中的<code class="codeph">ENCRYPTION_WALLET_LOCATION</code>参数指定密钥库位置。
                        </p>
                        <p>如果将密钥库复制到下游数据库，则确保在源数据库中的密钥库发生更改时将密钥库从源数据库复制到下游数据库。不要对下游数据库的密钥库执行任何操作，例如更改复制表的加密密钥。</p>
                        <p>当行LCR在缓冲队列中暂存时，由本地或下游捕获进程捕获的行逻辑更改记录（行LCR）中的加密列将被解密。</p>
                        <div class="infoboxnote" id="GUID-A222427F-5F7A-4191-BF4B-5F5BBA5388BB__GUID-4332C533-5B66-4F85-9DCD-D24F46A342A9">
                           <p class="notep1">注意：</p>
                           <p>如果捕获过程使用的重做日志是由兼容级别为11.0.0或更高的数据库生成的，则捕获过程仅支持加密列。兼容级别由<code class="codeph">COMPATIBLE</code>初始化参数控制。
                           </p>
                        </div>
                        <div class="infoboxnote" id="GUID-A222427F-5F7A-4191-BF4B-5F5BBA5388BB__GUID-12420B7C-CFEA-43B6-9267-1831CB48156A">
                           <p class="notep1">注意：</p>
                           <p>Oracle Database 19c中不推荐使用<code class="codeph">SQLNET.ENCRYPTION_WALLET_LOCATION sqlnet.ora</code>参数。
                           </p>
                           <p><code class="codeph">SQLNET.ENCRYPTION_WALLET_LOCATION</code>参数定义透明数据加密（TDE）的软件密钥库的位置。要配置软件密钥库位置，Oracle建议您设置<code class="codeph">WALLET_ROOT</code>初始化参数和<code class="codeph">TDE_CONFIGURATION</code>动态初始化参数，而不是设置<code class="codeph">SQLNET.ENCRYPTION_WALLET_LOCATION</code> 。
                           </p>
                        </div>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-A222427F-5F7A-4191-BF4B-5F5BBA5388BB__GUID-83F50736-8A8C-47BE-AF81-7A7C71D10323">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="xstream-out-concepts.html#GUID-EDE9234C-ED4B-48A8-94FA-D07055F2FC20" title="熟悉与捕获过程相关的概念。">捕获过程</a> ”</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-4C802CD7-2E25-44A5-BBDC-63F3B32C35FC" title="XStream Out可以使用透明数据加密。">XStream Out和透明数据加密</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM72786"></a><div class="props_rev_3"><a id="GUID-7F3B629D-3C42-4FF2-8E07-21AE9C0B39FE" name="GUID-7F3B629D-3C42-4FF2-8E07-21AE9C0B39FE"></a><h5 id="XSTRM-GUID-7F3B629D-3C42-4FF2-8E07-21AE9C0B39FE" class="sect5"><span class="enumeration_section">3.7.2.2</span>传播和透明数据加密</h5>
                     <div>
                        <p>传播可以传播行逻辑更改记录（行LCR），其中包含使用透明数据加密加密的列的更改。</p>
                        <p>本节中的信息仅适用于包含传播的XStream配置。在典型的XStream配置中，出站服务器及其捕获进程在同一数据库上配置，并且不需要传播。本节中的信息不适用于不包含传播的配置。但是，可以在一个数据库上配置捕获进程，在另一个数据库上配置出站服务器。在这种情况下，传播将LCR从捕获进程的队列发送到出站服务器的队列。</p>
                        <p>当传播传播具有加密列的行LCR时，加密列被解密，而行LCR通过网络传输。如有必要，您可以使用Oracle Advanced Security的功能来加密网络上的数据传输。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-7F3B629D-3C42-4FF2-8E07-21AE9C0B39FE__GUID-FBDDC715-0290-43CE-BF5C-FA28232192AE">
                           <p class="notep1">也可以看看：</p>
                           <p>有关配置网络数据加密的信息，请<a href="../dbseg/configuring-network-data-encryption-and-integrity.html#DBSEG020" target="_blank"><span><cite>参见“Oracle数据库安</cite></span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-4C802CD7-2E25-44A5-BBDC-63F3B32C35FC" title="XStream Out可以使用透明数据加密。">XStream Out和透明数据加密</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM72785"></a><div class="props_rev_3"><a id="GUID-1508B1C3-B8D4-44D8-AA73-30E01DFFEAA9" name="GUID-1508B1C3-B8D4-44D8-AA73-30E01DFFEAA9"></a><h5 id="XSTRM-GUID-1508B1C3-B8D4-44D8-AA73-30E01DFFEAA9" class="sect5"><span class="enumeration_section">3.7.2.3</span>出站服务器和透明数据加密</h5>
                     <div>
                        <p>出站服务器可以处理包含使用透明数据加密加密的列的隐式捕获的行逻辑更改记录（行LCR）。</p>
                        <p>当出站服务器处理具有加密列的行LCR时，加密列将被解密。具有解密列的这些行LCR被发送到XStream客户端应用程序。</p>
                        <p>当具有加密列的行LCR存储在缓冲队列中时，列被解密。当行LCR溢出到磁盘时，XStream透明地加密任何加密列，而行LCR存储在磁盘上。</p>
                        <div class="infoboxnote" id="GUID-1508B1C3-B8D4-44D8-AA73-30E01DFFEAA9__GUID-40B6C166-FD43-41C8-92A6-0EE88DB1F227">
                           <p class="notep1">注意：</p>
                           <p>要使XStream Out透明地加密列，必须将加密主密钥存储在本地数据库的密钥库中，并且必须打开密钥库。以下语句设置主密钥并打开密钥库：</p><pre class="oac_no_warn" dir="ltr">通过<span class="italic">密钥密码</span>识别的ALTER SYSTEM SET ENCRYPTION KEY; ALTER SYSTEM SET ENCRYPTION WALLET OPEN由<span class="italic">密钥密码</span>识别;</pre><p>由于在加密列的任何实例中都需要提供相同的密钥库并打开，因此请确保将密钥库复制到下游捕获数据库。对于下游捕获，您还必须在下游实例上运行上述命令。</p>
                        </div>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-1508B1C3-B8D4-44D8-AA73-30E01DFFEAA9__GUID-320C08C1-320F-41BF-95F7-5F9D9763E06E">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="xstream-out-concepts.html#GUID-30DAD02C-CF3F-4E55-B086-71C79ACDB56F" title="使用XStream Out，出站服务器将数据库更改发送到客户端应用程序。">出站服务器</a> ”</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-4C802CD7-2E25-44A5-BBDC-63F3B32C35FC" title="XStream Out可以使用透明数据加密。">XStream Out和透明数据加密</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="XSTRM72788"></a><div class="props_rev_3"><a id="GUID-900B4B57-9A7F-4DAF-A45B-93F59B2FFF2A" name="GUID-900B4B57-9A7F-4DAF-A45B-93F59B2FFF2A"></a><h4 id="XSTRM-GUID-900B4B57-9A7F-4DAF-A45B-93F59B2FFF2A" class="sect4"><span class="enumeration_section">3.7.3</span> XStream Out和闪回数据存档</h4>
                  <div>
                     <p>XStream Out支持闪回数据存档中的表。</p>
                     <p>捕获进程可以捕获对这些表所做的数据操作语言（DML）和数据定义语言（DDL）更改。出站服务器可以处理捕获的LCR。</p>
                     <p>XStream Out还支持以下DDL语句：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">CREATE</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">ALTER</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">DROP</code> <code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code></p>
                        </li>
                        <li>
                           <p>使用<code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code>子句<code class="codeph">CREATE</code> <code class="codeph">TABLE</code></p>
                        </li>
                        <li>
                           <p>带有<code class="codeph">FLASHBACK</code> <code class="codeph">ARCHIVE</code>子句的<code class="codeph">ALTER</code> <code class="codeph">TABLE</code></p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-900B4B57-9A7F-4DAF-A45B-93F59B2FFF2A__GUID-1FA60708-8C13-4F4E-A14F-A1B0AA095A12">
                        <p class="notep1">注意：</p>
                        <p>XStream Out不捕获对闪回数据存档使用的内部表所做的更改。</p>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-900B4B57-9A7F-4DAF-A45B-93F59B2FFF2A__GUID-71F45EE2-060C-4EBF-B7E2-9569009D814D">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关闪回数据存档的信息，请参见<a href="../adfns/flashback.html#ADFNS01011" target="_blank"><span><cite>“Oracle数据库开发指南</cite></span></a></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="xstream-out-concepts.html#GUID-EDE9234C-ED4B-48A8-94FA-D07055F2FC20" title="熟悉与捕获过程相关的概念。">捕获过程</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="xstream-out-concepts.html#GUID-30DAD02C-CF3F-4E55-B086-71C79ACDB56F" title="使用XStream Out，出站服务器将数据库更改发送到客户端应用程序。">出站服务器</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-EE24B98B-15DD-4DCD-A7D6-58D505C20D43" title="XStream Out可以与其他Oracle数据库组件一起使用。">XStream Out和其他Oracle数据库组件</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM72789"></a><div class="props_rev_3"><a id="GUID-00269B9D-DBB8-4EC5-ADAB-87FFCC462372" name="GUID-00269B9D-DBB8-4EC5-ADAB-87FFCC462372"></a><h4 id="XSTRM-GUID-00269B9D-DBB8-4EC5-ADAB-87FFCC462372" class="sect4"><span class="enumeration_section">3.7.4</span> XStream Out和Recovery Manager</h4>
                  <div>
                     <p>RMAN删除策略可能会影响捕获过程。</p>
                     <p>某些RMAN删除策略和命令会删除存档的重做日志文件。如果在为一个或多个捕获进程生成重做日志文件的数据库上使用其中一个RMAN策略或命令，请确保RMAN命令不会删除捕获进程所需的归档重做日志文件。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-E5FCD04F-763F-4EA0-B211-6215A6F0447B">RMAN和本地捕获过程</a><br>配置本地捕获过程时，除非快速恢复区域中存在空间压力，否则RMAN不会删除本地捕获过程所需的归档重做日志文件。
                        </li>
                        <li class="ulchildlink"><a href="xstream-out-concepts.html#GUID-C34CF867-C0A0-4D2B-B724-2633F4D7A831">RMAN和下游捕获流程</a><br>当下游捕获进程捕获在源数据库中进行的数据库更改时，请确保没有RMAN删除策略或命令删除已归档的重做日志文件，直到将其从源数据库传输到下游捕获进程数据库。
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-00269B9D-DBB8-4EC5-ADAB-87FFCC462372__GUID-3FE0446D-9E7B-4A85-8132-CFC8A6D3C5A8">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="xstream-out-concepts.html#GUID-EDE9234C-ED4B-48A8-94FA-D07055F2FC20" title="熟悉与捕获过程相关的概念。">捕获过程</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="troubleshooting-xstream-out.html#GUID-8A83ECFA-00A1-4B0C-9BC7-AD1E06C3D282" title="捕获进程启动或停止并重新启动时，可能需要扫描在包含与所需检查点SCN对应的SCN的日志文件之前生成的重做日志文件，并且这些文件可能已被删除。">捕获进程缺少必需的重做日志文件</a> ”，</span>以获取有关确定是否缺少捕获进程所需的归档重做日志文件以及有关更正此问题的信息的信息</p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="troubleshooting-xstream-out.html#GUID-C6B58766-8DCF-4ACD-9B2C-3E8A8C6F4106" title="有关每个捕获进程和出站服务器的消息都记录在运行该进程的数据库的跟踪文件中。">检查跟踪文件和警报日志是否存在问题</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关RMAN的详细信息，请<a href="../rcmrf/index.html" target="_blank"><span><cite>参见</cite></span></a> <a href="../bradv/index.html" target="_blank"><span><cite>“Oracle数据库备份和恢复用户指南”</cite></span></a>和“ <a href="../rcmrf/index.html" target="_blank"><span><cite>Oracle数据库备份和恢复参考</cite></span></a> <a href="../bradv/index.html" target="_blank"><span><cite>手册”</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-EE24B98B-15DD-4DCD-A7D6-58D505C20D43" title="XStream Out可以与其他Oracle数据库组件一起使用。">XStream Out和其他Oracle数据库组件</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="XSTRM72790"></a><div class="props_rev_3"><a id="GUID-E5FCD04F-763F-4EA0-B211-6215A6F0447B" name="GUID-E5FCD04F-763F-4EA0-B211-6215A6F0447B"></a><h5 id="XSTRM-GUID-E5FCD04F-763F-4EA0-B211-6215A6F0447B" class="sect5"><span class="enumeration_section">3.7.4.1</span> RMAN和本地捕获过程</h5>
                     <div>
                        <p>配置本地捕获过程时，除非快速恢复区域中存在空间压力，否则RMAN不会删除本地捕获过程所需的归档重做日志文件。</p>
                        <p>具体而言，RMAN不会删除包含系统更改号（SCN）值等于或大于本地捕获过程所需检查点SCN的更改的归档重做日志文件。这是所有RMAN删除策略和<code class="codeph">DELETE</code>命令的默认RMAN行为，包括<code class="codeph">DELETE</code> <code class="codeph">ARCHIVELOG</code>和<code class="codeph">DELETE</code> <code class="codeph">OBSOLETE</code> 。</p>
                        <p>如果快速恢复区域中没有足够的空间来写入新的日志文件，RMAN会自动删除一个或多个归档的重做日志文件。当RMAN自动删除本地捕获过程所需的归档重做日志文件时，Oracle数据库会将警告写入警报日志。</p>
                        <p>在本地捕获进程数据库上执行归档重做日志文件的备份时，Oracle建议使用以下RMAN删除策略：</p><pre class="oac_no_warn" dir="ltr">配置ARCHIVELOG删除策略以将<span class="italic">整数</span>时间<span class="italic">备份</span>到设备类型<span class="italic">deviceSpecifier</span> ;</pre><p>此删除策略要求在考虑删除之前将日志文件备份<span class="italic"><code class="codeph">integer</code></span>数倍。
                        </p>
                        <p>如果未在本地捕获进程数据库上执行归档重做日志文件的备份，则不建议使用特定的删除策略。默认情况下，RMAN不会删除本地捕获进程所需的归档重做日志文件。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-00269B9D-DBB8-4EC5-ADAB-87FFCC462372" title="RMAN删除策略可能会影响捕获过程。">XStream Out和Recovery Manager</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="XSTRM72791"></a><div class="props_rev_3"><a id="GUID-C34CF867-C0A0-4D2B-B724-2633F4D7A831" name="GUID-C34CF867-C0A0-4D2B-B724-2633F4D7A831"></a><h5 id="XSTRM-GUID-C34CF867-C0A0-4D2B-B724-2633F4D7A831" class="sect5"><span class="enumeration_section">3.7.4.2</span> RMAN和下游捕获过程</h5>
                     <div>
                        <p>当下游捕获进程捕获在源数据库中进行的数据库更改时，请确保没有RMAN删除策略或命令删除已归档的重做日志文件，直到将其从源数据库传输到下游捕获进程数据库。</p>
                        <p>以下是删除已归档重做日志文件的特定RMAN删除策略和命令的注意事项：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>RMAN命令<code class="codeph">CONFIGURE</code> <code class="codeph">ARCHIVELOG</code> <code class="codeph">DELETION</code> <code class="codeph">POLICY</code>设置删除策略，该策略确定快速恢复区域中的归档重做日志文件何时可以删除。删除策略也适用于所有RMAN <code class="codeph">DELETE</code>命令，包括<code class="codeph">DELETE</code> <code class="codeph">ARCHIVELOG</code>和<code class="codeph">DELETE</code> <code class="codeph">OBSOLETE</code> 。</p>
                              <p>以下设置确定源数据库的行为：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>删除策略设置<code class="codeph">TO</code> <code class="codeph">SHIPPED</code> <code class="codeph">TO</code> <code class="codeph">STANDBY</code>在将日志文件传输到需要该文件的下游捕获进程数据库之前不会删除该日志文件。下游捕获进程可能已处理或未处理这些日志文件。当快速恢复区域中没有足够的空间来写入新的日志文件时，会发生自动删除。
                                    </p>
                                 </li>
                                 <li>
                                    <p>删除策略设置<code class="codeph">TO</code> <code class="codeph">APPLIED</code> <code class="codeph">ON</code> <code class="codeph">STANDBY</code>在将日志文件传输到需要该文件的下游捕获进程数据库并且源数据库将日志文件标记为已应用之前，不会删除该日志文件。当源数据库的所有下游捕获进程的最小所需检查点SCN大于日志文件中的最高SCN时，源数据库将标记为已应用的日志文件。
                                    </p>
                                 </li>
                                 <li>
                                    <p>删除策略设置为<code class="codeph">BACKED</code> <code class="codeph">UP</code> <span class="italic"><code class="codeph">integer</code></span> <code class="codeph">TIMES</code> <code class="codeph">TO</code> <code class="codeph">DEVICE</code> <code class="codeph">TYPE</code>要求在考虑删除之前将日志文件备份<span class="italic"><code class="codeph">integer</code></span>数倍。即使日志文件尚未由需要它的下游捕获进程处理，也可以删除日志文件。
                                    </p>
                                 </li>
                                 <li>
                                    <p>设置删除策略<code class="codeph">TO</code> <code class="codeph">NONE</code>意味着，当有在快速恢复区空间的压力，即使该日志文件还没有被下游捕获的过程，需要它处理的日志文件可以被删除。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>RMAN命令<code class="codeph">DELETE</code> <code class="codeph">ARCHIVELOG</code>删除满足以下所有条件的归档重做日志文件：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>日志文件满足<code class="codeph">DELETE</code> <code class="codeph">ARCHIVELOG</code>命令中指定的条件。
                                    </p>
                                 </li>
                                 <li>
                                    <p>可以根据<code class="codeph">CONFIGURE</code> <code class="codeph">ARCHIVELOG</code> <code class="codeph">DELETION</code> <code class="codeph">POLICY</code>删除日志文件。例如，如果该策略设置<code class="codeph">TO</code> <code class="codeph">SHIPPED</code> <code class="codeph">TO</code> <code class="codeph">STANDBY</code> ，那么该命令不删除日志文件，直到它被转移到需要它的任何下游捕获过程数据库之后。
                                    </p>
                                 </li>
                              </ul>
                              <p>挂载或打开数据库时，此行为适用。</p>
                              <p>如果归档的重做日志文件由于包含下游捕获进程所需的更改而未被删除，则RMAN会显示有关跳过这些文件的删除操作的警告消息。</p>
                           </li>
                           <li>
                              <p>RMAN命令<code class="codeph">DELETE</code> <code class="codeph">OBSOLETE</code>永久清除满足以下所有条件的归档重做日志文件：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>根据保留策略，日志文件已过时。</p>
                                 </li>
                                 <li>
                                    <p>可以根据<code class="codeph">CONFIGURE</code> <code class="codeph">ARCHIVELOG</code> <code class="codeph">DELETION</code> <code class="codeph">POLICY</code>删除日志文件。例如，如果该策略设置<code class="codeph">TO</code> <code class="codeph">SHIPPED</code> <code class="codeph">TO</code> <code class="codeph">STANDBY</code> ，那么该命令不删除日志文件，直到它被转移到需要它的任何下游捕获过程数据库之后。
                                    </p>
                                 </li>
                              </ul>
                              <p>挂载或打开数据库时，此行为适用。</p>
                           </li>
                           <li>
                              <p>RMAN命令<code class="codeph">BACKUP</code> <code class="codeph">ARCHIVELOG</code> <code class="codeph">ALL</code> <code class="codeph">DELETE</code> <code class="codeph">INPUT</code>复制存档的重做日志文件，并在完成备份后删除原始文件。在满足以下条件时，此命令在将日志文件传输到下游捕获进程数据库之前不会删除该日志文件：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>数据库已安装或打开。</p>
                                 </li>
                                 <li>
                                    <p>下游捕获过程需要日志文件。</p>
                                 </li>
                                 <li>
                                    <p>删除策略设置<code class="codeph">TO</code> <code class="codeph">SHIPPED</code> <code class="codeph">TO</code> <code class="codeph">STANDBY</code> 。</p>
                                 </li>
                              </ul>
                              <p>如果归档的重做日志文件由于包含下游捕获进程所需的更改而未被删除，则RMAN会显示有关跳过这些文件的删除操作的警告消息。</p>
                           </li>
                        </ul>
                        <p>Oracle建议在源数据库中使用以下RMAN删除策略之一来执行下游捕获过程：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在源数据库上执行归档重做日志文件的备份时，请将删除策略设置为以下内容：</p><pre class="oac_no_warn" dir="ltr">配置ARCHIVELOG删除策略以备用待机<span class="italic">整数</span>时间到设备类型<span class="italic">deviceSpecifier</span> ;</pre></li>
                           <li>
                              <p>如果未对源数据库进行归档重做日志文件的备份，请将删除策略设置为以下内容：</p><pre class="oac_no_warn" dir="ltr">配置ARCHIVELOG删除政策运送到备用;</pre></li>
                        </ul>
                        <div class="infoboxnote" id="GUID-C34CF867-C0A0-4D2B-B724-2633F4D7A831__GUID-060CC5AC-965C-49FB-A5F6-E786D542C75B">
                           <p class="notep1">注意：</p>
                           <p>在下游捕获进程数据库中，从源数据库传输的归档重做日志文件不由RMAN管理。</p>
                        </div>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-00269B9D-DBB8-4EC5-ADAB-87FFCC462372" title="RMAN删除策略可能会影响捕获过程。">XStream Out和Recovery Manager</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="XSTRM72792"></a><div class="props_rev_3"><a id="GUID-BEC3A348-0622-4591-8B69-46DD454607CF" name="GUID-BEC3A348-0622-4591-8B69-46DD454607CF"></a><h4 id="XSTRM-GUID-BEC3A348-0622-4591-8B69-46DD454607CF" class="sect4"><span class="enumeration_section">3.7.5</span> XStream和分布式事务</h4>
                  <div>
                     <p>XStream Out支持分布式事务。</p>
                     <p>您可以使用以下任一方法执行分布式事务：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用数据库链接以协调的方式修改多个数据库中的表。</p>
                        </li>
                        <li>
                           <p>使用XA接口，由<code class="codeph">DBMS_XA</code>提供的PL / SQL包或OCI或JDBC库公开。XA接口实现X / Open分布式事务处理（DTP）架构。
                           </p>
                        </li>
                     </ul>
                     <p>捕获过程使用这两种方法之一捕获在分布式事务期间对源数据库所做的更改，并将更改发送到出站服务器。事务提交后，出站服务器将事务中的更改发送到客户端应用程序。</p>
                     <p>但是，不发送分布式事务状态。客户端应用程序不会继承此类事务的不确定或准备状态。此外，出站服务器不会使用源数据库中用于XA事务的相同全局事务标识符来发送更改。</p>
                     <p>XA事务可以通过两种方式执行：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>紧密耦合，不同的XA分支共享锁</p>
                        </li>
                        <li>
                           <p>松散耦合，不同的XA分支不共享锁</p>
                        </li>
                     </ul>
                     <p>无论<code class="codeph">COMPATIBLE</code>初始化参数值如何，XStream Out都支持松散耦合的XA分支所做的更改。仅当<code class="codeph">COMPATIBLE</code>初始化参数设置为<code class="codeph">11.2.0.0</code>或更高版本时，XStream Out才支持复制由Oracle RAC源数据库上的紧密耦合分支所做的更改。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-BEC3A348-0622-4591-8B69-46DD454607CF__GUID-0D3F0520-F8AE-4667-B038-FAC8B5FA5AC2">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关分布式事务的详细信息，请参见<a href="../admin/distributed-database-concepts.html#ADMIN12113" target="_blank"><span><cite>“Oracle数据库管理员指南</cite></span></a></p>
                           </li>
                           <li>
                              <p>有关Oracle XA的更多信息，请参见<a href="../adfns/xa.html#ADFNS017" target="_blank"><span><cite>Oracle数据库开发指南</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-EE24B98B-15DD-4DCD-A7D6-58D505C20D43" title="XStream Out可以与其他Oracle数据库组件一起使用。">XStream Out和其他Oracle数据库组件</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="XSTRM72917"></a><a id="XSTRM72916"></a><div class="props_rev_3"><a id="GUID-6F932401-47F6-4A5A-BA72-EBFF2342C579" name="GUID-6F932401-47F6-4A5A-BA72-EBFF2342C579"></a><h4 id="XSTRM-GUID-6F932401-47F6-4A5A-BA72-EBFF2342C579" class="sect4"><span class="enumeration_section">3.7.6</span> XStream Out和多租户环境</h4>
                  <div>
                     <p>多租户环境使数据库能够包含一组可移植的模式，对象和相关结构，这些模式在逻辑上作为单独的数据库出现在应用程序中。</p>
                     <p>这个自包含的集合称为可插拔数据库（PDB）。多租户容器数据库（CDB）包含PDB。在CDB中，XStream Out的功能与非CDB中的功能大致相同。</p>
                     <p>CDB还可以包含应用程序容器。应用程序容器是CDB的可选组件，它由应用程序根目录和与之关联的所有应用程序PDB组成。应用程序容器存储一个或多个应用程序的数据。应用程序容器共享应用程序元数据和公共数据在CDB中，以下各项都是容器：CDB根，每个PDB，每个应用程序根和每个应用程序PDB。</p>
                     <p>XBream Out在CDB和非CDB中的主要区别在于：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>必须仅在CDB根目录中配置XStream Out。</p>
                        </li>
                        <li>
                           <p>XStream Out可以查看对CDB中任何容器所做的更改。</p>
                        </li>
                        <li>
                           <p>XStream Out捕获规则可以将LCR限制为客户端应用程序所需的LCR。系统生成的捕获规则根据传递给<code class="codeph">DBMS_XSTREAM_ADM</code>包中的<code class="codeph">ADD_OUTBOUND</code>和<code class="codeph">CREATE_OUTBOUND</code>过程的参数选择适当的LCR。您可以在同一个包中使用<code class="codeph">ADD_*_RULES</code>过程，以便对XStream Out组件使用的规则进行更细粒度的控制。
                           </p>
                        </li>
                        <li>
                           <p>执行XStream Out任务的用户必须是普通用户。</p>
                        </li>
                     </ul>
                     <div class="section">
                        <p class="subhead3" id="GUID-6F932401-47F6-4A5A-BA72-EBFF2342C579__GUID-2524370F-946C-4514-87C4-558B2DEA6DDB">在XStream环境中拔下插头和插件操作</p>
                        <p>当XBream Out涉及的PDB，应用程序根或应用程序PDB从其CDB中拔出并插入另一个CDB时，任何捕获进程或出站服务器都不被视为容器的一部分。您必须在另一个CDB中再次配置捕获进程和出站服务器。</p>
                        <p>如果出站服务器配置在与捕获过程不同的数据库中，则拔出和插入操作还有其他注意事项。</p>
                        <p>对于此示例，假设以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>名为<code class="codeph">CDB1</code>的CDB包含PDB <code class="codeph">PDB1</code> 。
                              </p>
                           </li>
                           <li>
                              <p>捕获过程在<code class="codeph">CDB1</code>配置，它将LCR从<code class="codeph">PDB1</code>发送到名为<code class="codeph">CDB2</code>的CDB中的出站服务器。
                              </p>
                           </li>
                           <li>
                              <p>您从<code class="codeph">CDB1</code>拔出<code class="codeph">PDB1</code> ，然后将其插入名为<code class="codeph">CDB3</code>的CDB。
                              </p>
                           </li>
                        </ul>
                        <p>要继续从提供的LCR <code class="codeph">PDB1</code>在出站服务器<code class="codeph">CDB2</code> ，必须配置一个新的捕获过程<code class="codeph">CDB3</code>捕获和发送的LCR到<code class="codeph">CDB2</code> 。
                        </p>
                        <p>通过在数据库B出站服务器所使用的规则必须被改变以改变的根引用<code class="codeph">CDB1</code>到的根<code class="codeph">CDB3</code> 。此外，如果<code class="codeph">PDB1</code>在赋予了不同的名称<code class="codeph">CDB3</code> ，那么规则必须改变，以反映新的PDB名称。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6F932401-47F6-4A5A-BA72-EBFF2342C579__GUID-C5293004-860E-49E9-9987-BDD1DCC0D1AD">XStream环境中的应用程序容器</p>
                        <p>当CDB具有一个或多个应用程序容器时，必须在CDB根目录中配置XStream Out，并且XStream Out可以捕获在CDB中的任何容器中所做的更改，包括应用程序根和应用程序PDB。可以将应用程序容器中捕获的更改发送到任何类型的容器，包括PDB，应用程序根和应用程序PDB。</p>
                        <p>将更改从一个应用程序根复制到另一个应用程序根时，XStream可以复制<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句。为避免错误，应用语句的目标应用程序根目录必须与源应用程序根目录安装相同的应用程序，并且应用程序名称在两个应用程序根目录中必须相同。
                        </p>
                        <p>为了避免在将更改从应用程序根目录复制到非应用程序根目录的容器时出错，必须确保不复制<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句。
                        </p>
                        <p>使用XStream OCI API，您可以控制是否使用<code class="codeph">OCIXStreamOutAttach</code>函数和<code class="codeph">OCILCRHeaderGet</code>函数复制<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句。使用XStream Java API，您可以使用<code class="codeph">XStreamOut.attach</code>方法中的<code class="codeph">mode</code>参数控制此行为。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="general-xstream-concepts.html#GUID-CBD258F9-D53D-4DA8-98CE-D87232D06655" title="多租户环境使Oracle数据库能够包含一组可移植的模式，对象和相关结构，这些模式在逻辑上作为单独的数据库出现在应用程序中。这个自包含的集合称为可插拔数据库（PDB）。CDB包含PDB。">系统创建的规则和多租户环境</a></li>
                           <li><a href="configuring-xstream-out.html#GUID-1DBE4654-FA5C-4968-90FC-A2F79AA6B719" title="在CDB中配置XStream Out时，必须确定XStream Out将捕获哪些数据库更改并将其发送到客户端应用程序。">在CDB中配置XStream Out</a></li>
                           <li><a href="../multi/multitenant-architecture.html#MULTI-GUID-BBAD3448-8A5A-4397-BD3A-F05D945DB7F8" target="_blank"><span><cite>Oracle多租户管理员指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="xstream-out-concepts.html#GUID-EE24B98B-15DD-4DCD-A7D6-58D505C20D43" title="XStream Out可以与其他Oracle数据库组件一起使用。">XStream Out和其他Oracle数据库组件</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can access Oracle Database Advanced Queuing (AQ) over the Internet by using SOAP with non-sharded queues. IDAP is the SOAP specification for Oracle Database Advanced Queuing operations."></meta>
      <meta name="description" content="You can access Oracle Database Advanced Queuing (AQ) over the Internet by using SOAP with non-sharded queues. IDAP is the SOAP specification for Oracle Database Advanced Queuing operations."></meta>
      <title>Internet访问Oracle数据库高级队列</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Advanced Queuing User&#39;s Guide "></meta>
      <meta property="og:description" content="You can access Oracle Database Advanced Queuing (AQ) over the Internet by using SOAP with non-sharded queues. IDAP is the SOAP specification for Oracle Database Advanced Queuing operations."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Advanced Queuing User&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-database-advanced-queuing.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T10:53:09-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96511-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="aq-performance-scalability.html" title="Previous" type="text/html"></link>
      <link rel="next" href="aq-troubleshooting.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle® Database Advanced Queuing"></meta>
    <meta name="dcterms.isVersionOf" content="ADQUE"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="aq-performance-scalability.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="aq-troubleshooting.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">高级排队用户指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Internet访问Oracle数据库高级队列</li>
            </ol>
            <a id="GUID-8BCF7E15-F69B-4BDB-B8A7-CEEB4932211C" name="GUID-8BCF7E15-F69B-4BDB-B8A7-CEEB4932211C"></a><a id="ADQUE0600"></a>
            
            <h2 id="ADQUE-GUID-8BCF7E15-F69B-4BDB-B8A7-CEEB4932211C" class="sect2"><span class="enumeration_chapter">6</span> Internet访问Oracle数据库高级队列</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以使用具有非分片队列的SOAP通过Internet访问Oracle数据库高级队列（AQ）。IDAP是Oracle数据库高级队列操作的SOAP规范。</p>
               <p>IDAP定义XML <a id="d27853e45" class="indexterm-anchor"></a> <a href="glossary.html#GUID-E7071131-B116-41B7-B9D8-F54E36AE982F"><span class="xrefglossterm">简单对象访问协议</span></a> （SOAP）请求主体的<a href="glossary.html#GUID-2028AECF-DB3E-40E2-99B6-A35674C08038"><span class="xrefglossterm">消息</span></a>结构。 <a href="glossary.html#GUID-DDF7D235-94BE-4294-A4DC-811C06EF06F3"><span class="xrefglossterm">互联网数据访问演示</span></a> （IDAP） - 结构化消息使用HTTP在Internet上传输。</p>
               <p>用户可以使用IDAP界面注册通知。</p>
               <p>话题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="aq-internet-access.html#GUID-0669D4B6-CA0D-4008-AAA9-04986947F4E7" title="本节讨论这些主题。">Internet上的Oracle数据库高级排队操作概述</a></p>
                  </li>
                  <li>
                     <p><a href="aq-internet-access.html#GUID-7E494A63-EF86-49FC-8120-3EC93ED81AE6" title="AQ servlet可以与任何Web服务器一起部署，例如Tomcat。按照以下步骤使用Tomcat部署AQ XML servlet：">部署Oracle数据库高级排队XML Servlet</a></p>
                  </li>
                  <li>
                     <p><a href="aq-internet-access.html#GUID-6FC93A65-12A0-46AF-9873-FD5BA1C4DD64" title="Internet数据访问演示（IDAP）使用text-type of text / xml来指定SOAP请求的主体。">互联网数据访问演示（IDAP）</a></p>
                  </li>
                  <li>
                     <p><a href="aq-internet-access.html#GUID-25BB208A-A345-40C2-B3D7-60954DC997DD" title="SOAP消息的主体是IDAP消息。此XML文档的名称空间为http://ns.oracle.com/AQ/schemas/access。">请求和响应IDAP文档</a></p>
                  </li>
                  <li>
                     <p><a href="aq-internet-access.html#GUID-0E9C7792-F4A6-41FD-B6B9-6B7A00A5AFBF" title="这些是为电子邮件通知设置数据库的步骤。">通过电子邮件通知消息</a></p>
                  </li>
               </ul>
            </div><a id="ADQUE2606"></a><div class="props_rev_3"><a id="GUID-0669D4B6-CA0D-4008-AAA9-04986947F4E7" name="GUID-0669D4B6-CA0D-4008-AAA9-04986947F4E7"></a><h3 id="ADQUE-GUID-0669D4B6-CA0D-4008-AAA9-04986947F4E7" class="sect3"><span class="enumeration_section">6.1</span> Internet数据库高级排队操作概述</h3>
               <div>
                  <p>本节讨论这些主题。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="aq-internet-access.html#GUID-EF2E052A-78D6-4089-ACF3-898DBC4F9967" title="该图显示了通过HTTP执行Oracle Database Advanced Queuing操作的体系结构。">Oracle数据库高级队列Internet操作体系结构</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-EADC1AC0-A16B-465E-BE43-9883478C4904" title="Oracle数据库高级队列支持三种类型的消息：RAW，Oracle对象和JMS。可以使用SOAP和Web服务访问所有这些消息类型。">互联网邮件有效负载</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-6A2EE683-248D-457E-9B1C-6E66A1C71A19" title="安装servlet后，必须将Web服务器配置为对向Oracle Database Advanced Queuing servlet发送POST请求的所有用户进行身份验证。Oracle数据库高级队列servlet仅允许经过身份验证的用户访问servlet。如果用户未经过身份验证，则servlet会返回错误。">配置Web服务器以验证发送POST请求的用户</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-0554C1BB-E10E-436E-8F4F-02EA82051A97" title="Oracle Database Advanced Queuing客户端通过打开与服务器的连接，使用HTTP开始对Oracle Database Advanced Queuing servlet的请求。客户端使用HTTP基本身份验证（使用或不使用SSL）或基于SSL证书的客户端身份验证登录服务器。客户端构造表示发送，发布，接收或注册请求的XML消息。">使用HTTP的客户端请求</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-7AE7BE61-CAA4-4A34-8AE5-4038A1A64252" title="服务器接受客户端HTTP（S）连接并验证客户端指定的用户（Oracle数据库高级队列代理）。服务器接收POST请求并调用Oracle Database Advanced Queuing servlet。">使用HTTP的Oracle数据库高级队列Servlet响应</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-3D7F636E-EA86-422A-9B43-D75DA5962764" title="您可以通过HTTP和HTTPS（HTTP over SSL）而不是Oracle Net Services进行传播。与Oracle Net Services不同，HTTP易于配置防火墙。执行传播的后台进程将消息推送到Oracle数据库高级队列servlet，该servlet将它们排入目标数据库，如图所示。">使用HTTP和HTTPS进行Oracle数据库高级排队传播</a></p>
                     </li>
                  </ul>
               </div><a id="ADQUE2608"></a><a id="ADQUE2607"></a><div class="props_rev_3"><a id="GUID-EF2E052A-78D6-4089-ACF3-898DBC4F9967" name="GUID-EF2E052A-78D6-4089-ACF3-898DBC4F9967"></a><h4 id="ADQUE-GUID-EF2E052A-78D6-4089-ACF3-898DBC4F9967" class="sect4"><span class="enumeration_section">6.1.1</span> Oracle数据库高级排队Internet操作体系结构</h4>
                  <div>
                     <p>该图显示了通过HTTP执行Oracle Database Advanced Queuing操作的体系结构。</p>
                     <p> <a id="d27853e268" class="indexterm-anchor"></a>主要组成部分是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Oracle数据库高级队列客户端程序</p>
                        </li>
                        <li>
                           <p>托管Oracle Database Advanced Queuing <a href="glossary.html#GUID-06CAA1CB-595D-492E-9543-7F003B45839A"><span class="xrefglossterm">servlet的</span></a> Web服务器/ servlet <a href="glossary.html#GUID-06CAA1CB-595D-492E-9543-7F003B45839A"><span class="xrefglossterm">运行器</span></a></p>
                        </li>
                        <li>
                           <p>Oracle数据库服务器</p>
                        </li>
                     </ul>
                     <p>Web浏览器或任何其他HTTP客户端可用作Oracle数据库高级队列客户端程序，将符合IDAP的XML消息发送到Oracle数据库高级队列servlet，后者解释传入的XML消息。Oracle数据库高级队列servlet连接到Oracle数据库服务器并对用户队列执行操作。</p>
                     <div class="figure" id="GUID-EF2E052A-78D6-4089-ACF3-898DBC4F9967__i1005601">
                        <p class="titleinfigure">图6-1使用HTTP执行Oracle数据库高级排队操作的体系结构</p><img src="img/adque430.gif" width="464" alt="下面是图6-1的描述" title="下面是图6-1的描述" longdesc="img_text/adque430.html"><br><a href="img_text/adque430.html">“图6-1使用HTTP执行Oracle数据库高级排队操作的体系结构”的说明</a></div>
                     <!-- class="figure" -->
                  </div>
               </div><a id="ADQUE2610"></a><a id="ADQUE2611"></a><a id="ADQUE2612"></a><a id="ADQUE2609"></a><div class="props_rev_3"><a id="GUID-EADC1AC0-A16B-465E-BE43-9883478C4904" name="GUID-EADC1AC0-A16B-465E-BE43-9883478C4904"></a><h4 id="ADQUE-GUID-EADC1AC0-A16B-465E-BE43-9883478C4904" class="sect4"><span class="enumeration_section">6.1.2</span> Internet消息有效负载</h4>
                  <div>
                     <p>Oracle数据库高级队列支持三种类型的消息：RAW，Oracle对象和JMS。可以使用SOAP和Web服务访问所有这些消息类型。</p>
                     <p>如果队列以RAW，Oracle对象或<a href="glossary.html#GUID-3A98EBD4-296B-4BE8-82AE-5B42D07E9894"><span class="xrefglossterm">Java消息服务</span></a> （JMS）格式保存消息，则在队列中将XML有效负载转换为适当的内部格式并存储在队列中。在出队期间，当从包含任何前述格式的消息的队列获得消息时，它们在被发送到客户端之前被转换为XML。
                     </p>
                     <p>消息有效内容类型取决于正在执行操作的队列类型：</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-EADC1AC0-A16B-465E-BE43-9883478C4904__GUID-49BA31E4-CEA6-4531-B96F-C4FD5658FF4F">原始队列</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>RAW队列的内容是原始字节。您必须在XML消息中提供消息有效内容的十六进制表示。例如， <code class="codeph">&lt;raw&gt;023f4523&lt;/raw&gt;</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EADC1AC0-A16B-465E-BE43-9883478C4904__GUID-3F39275D-5383-448C-BC21-B6883C38A692">Oracle对象类型队列</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>对于非JMS队列的Oracle <a href="glossary.html#GUID-5A1E34E2-9B71-497D-879B-E355EDCF7108"><span class="xrefglossterm">对象类型</span></a>队列（即，它们不是类型<code class="codeph">AQ$_JMS_*</code> ），有效负载的类型取决于创建保存队列的队列表时指定的类型。XML元素的内容必须映射到队列表的对象类型的属性。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EADC1AC0-A16B-465E-BE43-9883478C4904__GUID-E77A93C5-42F1-4CAA-8BAA-2C12FDCD077C">JMS类型队列/主题</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>对于具有JMS类型的队列（即具有类型为<code class="codeph">AQ$_JMS_*</code>有效负载的<code class="codeph">AQ$_JMS_*</code> ），有四个XML元素，具体取决于JMS类型。IDAP支持具有以下JMS类型的队列或主题：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">TextMessage的</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">MapMessage消息</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">BytesMessage</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">ObjectMessage</code> 
                              </p>
                           </li>
                        </ul>
                        <p>IDAP不支持具有有效负载类型<code class="codeph">StreamMessage</code> JMS队列。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADQUE2613"></a><div class="props_rev_3"><a id="GUID-6A2EE683-248D-457E-9B1C-6E66A1C71A19" name="GUID-6A2EE683-248D-457E-9B1C-6E66A1C71A19"></a><h4 id="ADQUE-GUID-6A2EE683-248D-457E-9B1C-6E66A1C71A19" class="sect4"><span class="enumeration_section">6.1.3</span>配置Web服务器以验证发送POST请求的用户</h4>
                  <div>
                     <p>安装servlet后，必须将Web服务器配置为对向Oracle Database Advanced Queuing servlet发送<code class="codeph">POST</code>请求的所有用户进行身份验证。Oracle数据库高级队列servlet仅允许经过身份验证的用户访问servlet。如果用户未经过身份验证，则servlet会返回错误。
                     </p>
                     <p>可以通过多种方式配置Web服务器以限制访问。一些常见技术是基于SSL和客户端证书的基本身份验证（用户名/密码）。请参阅Web服务器文档，了解如何限制对servlet的访问。</p>
                     <p>在Oracle Database Advanced Queuing servlet的上下文中，用于连接到Web服务器的用户名称为Oracle Database Advanced Queuing HTTP代理或Oracle Database Advanced Queuing Internet用户。</p>
                  </div>
               </div><a id="ADQUE3682"></a><a id="ADQUE2614"></a><div class="props_rev_3"><a id="GUID-0554C1BB-E10E-436E-8F4F-02EA82051A97" name="GUID-0554C1BB-E10E-436E-8F4F-02EA82051A97"></a><h4 id="ADQUE-GUID-0554C1BB-E10E-436E-8F4F-02EA82051A97" class="sect4"><span class="enumeration_section">6.1.4</span>使用HTTP的客户端请求</h4>
                  <div>
                     <p>Oracle Database Advanced Queuing客户端通过打开与服务器的连接，使用HTTP开始对Oracle Database Advanced Queuing servlet的请求。客户端使用HTTP基本身份验证（使用或不使用SSL）或基于SSL证书的客户端身份验证登录服务器。客户端构造表示发送，发布，接收或注册请求的XML消息。</p>
                     <p>客户端将HTTP <code class="codeph">POST</code>发送到远程服务器上的servlet。
                     </p>
                     <div class="infoboxnotealso" id="GUID-0554C1BB-E10E-436E-8F4F-02EA82051A97__GUID-68984313-0596-4A6B-A888-E41D7E801AA8">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="aq-internet-access.html#GUID-25BB208A-A345-40C2-B3D7-60954DC997DD" title="SOAP消息的主体是IDAP消息。此XML文档的名称空间为http://ns.oracle.com/AQ/schemas/access。">请求和响应IDAP文档</a> ”</span></p>
                     </div>
                     <div class="section" id="GUID-0554C1BB-E10E-436E-8F4F-02EA82051A97__CHDJFGID">
                        <p class="subhead3" id="GUID-0554C1BB-E10E-436E-8F4F-02EA82051A97__GUID-FFF015AC-6C1F-4679-A24E-77FE2BF66F91">用户会话和交易</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在对客户端进行身份验证并连接到Oracle Database Advanced Queuing servlet之后，将代表用户创建HTTP会话。会话中的第一个请求也隐式启动新的数据库事务。此事务在明确提交或终止之前保持打开状态。来自servlet的响应将HTTP标头中的会话ID包括为cookie。</p>
                        <p>如果客户端希望继续在同一事务中工作，那么它必须在后续请求中包含此HTTP头，其中包含会话ID cookie。这是由大多数Web浏览器自动完成的。但是，如果客户端使用Java或C客户端发布请求，则必须以编程方式完成此操作。</p>
                        <p>必须应用显式提交或回滚才能结束事务。提交或回滚请求也可以作为其他Oracle数据库高级队列操作的一部分包含在内。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADQUE2616"></a><div class="props_rev_3"><a id="GUID-7AE7BE61-CAA4-4A34-8AE5-4038A1A64252" name="GUID-7AE7BE61-CAA4-4A34-8AE5-4038A1A64252"></a><h4 id="ADQUE-GUID-7AE7BE61-CAA4-4A34-8AE5-4038A1A64252" class="sect4"><span class="enumeration_section">6.1.5</span>使用HTTP的Oracle数据库高级队列Servlet响应</h4>
                  <div>
                     <p>服务器接受客户端HTTP（S）连接并验证客户端指定的用户（Oracle数据库高级队列代理）。服务器接收<code class="codeph">POST</code>请求并调用Oracle Database Advanced Queuing servlet。
                     </p>
                     <p>如果这是来自此客户端的第一个请求，则会创建新的HTTP会话。解析XML消息并验证其内容。如果客户端在HTTP标头中传递会话ID，则此操作将在该会话的上下文中执行。</p>
                     <p>servlet确定代理尝试对哪个对象（队列/主题）执行操作。servlet查看映射到此Oracle Database Advanced Queuing代理的数据库用户列表。如果这些用户中的任何一个具有访问请求中指定的队列/主题的权限，则Oracle Database Advanced Queuing servlet超级用户将代表此用户创建会话。</p>
                     <p>如果HTTP会话中没有活动的事务，则启动新的数据库事务。会话中的后续请求是同一事务的一部分，直到发出显式<code class="codeph">COMMIT</code>或<code class="codeph">ROLLBACK</code>请求。事务的效果仅在提交后才可见。如果事务在120秒内保持不活动状态，则会自动终止。
                     </p>
                     <p>执行请求的操作。响应被格式化为XML消息并发送回客户端。响应还包括HTTP标头中的会话ID作为cookie。</p>
                     <div class="p">
                        <div class="infoboxnotealso" id="GUID-7AE7BE61-CAA4-4A34-8AE5-4038A1A64252__GUID-527F1115-D6CF-4CC4-8278-8B7D59FD2FA8">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="aq-internet-access.html#GUID-0554C1BB-E10E-436E-8F4F-02EA82051A97__CHDJFGID">用户会话和交易</a> ”</span></p>
                        </div>
                     </div>
                  </div>
               </div><a id="ADQUE2618"></a><a id="ADQUE2617"></a><div class="props_rev_3"><a id="GUID-3D7F636E-EA86-422A-9B43-D75DA5962764" name="GUID-3D7F636E-EA86-422A-9B43-D75DA5962764"></a><h4 id="ADQUE-GUID-3D7F636E-EA86-422A-9B43-D75DA5962764" class="sect4"><span class="enumeration_section">6.1.6</span>使用HTTP和HTTPS进行Oracle数据库高级排队传播</h4>
                  <div>
                     <p>您可以通过HTTP和HTTPS（HTTP over SSL）而不是Oracle Net Services进行传播。与Oracle Net Services不同，HTTP易于配置防火墙。执行传播的后台进程将消息推送到Oracle数据库高级队列servlet，该servlet将它们排入目标数据库，如图所示。</p>
                     <div class="figure" id="GUID-3D7F636E-EA86-422A-9B43-D75DA5962764__CHDEGGDA">
                        <p class="titleinfigure">图6-2 HTTP Oracle数据库高级排队传播</p><img src="img/adque445.gif" width="432" alt="下面是图6-2的描述" title="下面是图6-2的描述" longdesc="img_text/adque445.html"><br><a href="img_text/adque445.html">“图6-2 HTTP Oracle数据库高级排队传播”的说明</a></div>
                     <!-- class="figure" -->
                     <p>您可以设置任何应用程序以使用Oracle数据库高级队列HTTP传播，而无需对现有代码进行任何更改。使用Oracle数据库高级队列HTTP传播的应用程序只需通过使用Net Services连接字符串重新创建数据库链接即可轻松切换回Net Services传播，而无需进行任何其他更改。</p>
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-7E494A63-EF86-49FC-8120-3EC93ED81AE6" name="GUID-7E494A63-EF86-49FC-8120-3EC93ED81AE6"></a><h3 id="ADQUE-GUID-7E494A63-EF86-49FC-8120-3EC93ED81AE6" class="sect3"><span class="enumeration_section">6.2</span>部署Oracle数据库高级排队XML Servlet</h3>
               <div>
                  <p>AQ servlet可以与任何Web服务器一起部署，例如Tomcat。按照以下步骤使用Tomcat部署AQ XML servlet：</p>
                  <ol>
                     <li class="stepexpand"><span>对于JDK1.8.x，请在<code class="codeph">CLASSPATH</code>包含以下内容：</span><div><pre class="oac_no_warn" dir="ltr"><span class="italic">ORACLE_HOME</span> /jdbc/lib/ojdbc8.jar <span class="italic">ORACLE_HOME</span> /jlib/jndi.jar <span class="italic">ORACLE_HOME</span> /jlib/jta.jar <span class="italic">ORACLE_HOME</span> /jlib/orai18n.jar <span class="italic">ORACLE_HOME</span> /jlib/orai18n-collation.jar <span class="italic">ORACLE_HOME</span> /jlib/orai18n-mapping.jar <span class="italic">ORACLE_HOME</span> / jlib / orai18n-utility.jar <span class="italic">ORACLE_HOME</span> /lib/http_client.jar <span class="italic">ORACLE_HOME</span> /lib/lclasses12.zip <span class="italic">ORACLE_HOME</span> /lib/servlet.jar <span class="italic">ORACLE_HOME</span> /lib/xmlparserv2.jar <span class="italic">ORACLE_HOME</span> /lib/xschema.jar <span class="italic">ORACLE_HOME</span> /lib/xsu12.jar <span class="italic">ORACLE_HOME</span> /rdbms/jlib/aqapi.jar <span class="italic">ORACLE_HOME</span> /rdbms/jlib/aqxml.jar <span class="italic">ORACLE_HOME</span> /rdbms/jlib/jmscommon.jar <span class="italic">ORACLE_HOME</span> /rdbms/jlib/xdb.jar</pre></div>
                     </li>
                     <li class="stepexpand"><span>将以下jar文件复制到<code class="codeph">tomcat/lib</code>目录中：</span><div><pre class="oac_no_warn" dir="ltr"><span class="italic">ORACLE_HOME</span> /jdbc/lib/ojdbc8.jar <span class="italic">ORACLE_HOME</span> /jlib/jndi.jar <span class="italic">ORACLE_HOME</span> /jlib/jta.jar <span class="italic">ORACLE_HOME</span> /lib/http_client.jar <span class="italic">ORACLE_HOME</span> /lib/lclasses12.zip <span class="italic">ORACLE_HOME</span> /lib/servlet.jar <span class="italic">ORACLE_HOME</span> / lib / xmlparserv2。罐子<span class="italic">ORACLE_HOME</span> /lib/xschema.jar <span class="italic">ORACLE_HOME</span> /lib/xsu12.jar <span class="italic">ORACLE_HOME</span> /rdbms/jlib/aqapi.jar <span class="italic">ORACLE_HOME</span> /rdbms/jlib/aqxml.jar <span class="italic">ORACLE_HOME</span> /rdbms/jlib/jmscommon.jar <span class="italic">ORACLE_HOME</span> / RDBMS / jlib / XDB。罐</pre></div>
                     </li>
                     <li class="stepexpand"><span>适当地为访问队列的Web应用程序用户创建或更新<code class="codeph">tomcat-users.xml</code>文件。例如：</span><div><pre class="oac_no_warn" dir="ltr"><span class="italic">用户</span> <span class="italic">密码</span> ----------------------------------- john welcome</pre></div>
                     </li>
                     <li class="stepexpand"><span>在数据库中设置队列并创建AQ代理，以便在步骤3中创建的Tomcat用户在访问AQ队列之前进行身份验证。DBA需要使用<code class="codeph">DBMS_AQADM.CREATE_AQ_AGENT</code>和<code class="codeph">DBMS_AQADM.ENABLE_DB_ACCESS</code>过程。例如，如果我们假设<code class="codeph">JOHN</code>是在Tomcat中创建的用户，而<code class="codeph">AQXMLUSER</code>是在数据库上创建的AQ代理，那么为了使用HTTP访问AQ servlet，请运行以下查询：</span><div><pre class="oac_no_warn" dir="ltr">EXECUTE dbms_aqadm.create_aq_agent（agent_name =&gt;'JOHN'，enable_http =&gt; true）; EXECUTE dbms_aqadm.enable_db_access（'JOHN'，'AQXMLUSER'）;</pre><p>这里<code class="codeph">AQXMLUSER</code>是在数据库中创建的AQ用户。
                           </p>
                           <p>DBA可以使用以下查询检查Internet AQ用户代理详细信息：</p><pre class="oac_no_warn" dir="ltr">SELECT agent_name，db_username，http_enabled FROM aq $ internet_users;</pre></div>
                     </li>
                     <li class="stepexpand"><span>部署扩展<code class="codeph">oracle.的AQ XML servlet <code class="codeph">oracle.AQ.xml。AQxmlServlet</code>类。</span></li>
                     <li class="stepexpand"><span>启动或停止Tomcat实例，如下所示：</span><ol type="a">
                           <li><span>使用<code class="codeph">sh tomcat/bin/startup.sh</code>启动Tomcat实例 </span></li>
                           <li><span>使用<code class="codeph">sh tomcat/bin/shutdown.sh</code> Tomcat实例</span></li>
                           <li><span>对于Tomcat中的日志，请检查<code class="codeph">tomcat/logs/catalina.out</code>文件</span></li>
                        </ol>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adque&amp;id=JMSAD565" target="_blank">融合中间件为Oracle WebLogic Server配置和管理JMS</a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADQUE2620"></a><div class="props_rev_3"><a id="GUID-6FC93A65-12A0-46AF-9873-FD5BA1C4DD64" name="GUID-6FC93A65-12A0-46AF-9873-FD5BA1C4DD64"></a><h3 id="ADQUE-GUID-6FC93A65-12A0-46AF-9873-FD5BA1C4DD64" class="sect3"><span class="enumeration_section">6.3</span>互联网数据访问演示（IDAP）</h3>
               <div>
                  <p>Internet数据访问演示（IDAP）使用<code class="codeph">text/xml</code> -type of <code class="codeph">text/xml</code>来指定SOAP请求的主体。</p>
                  <p>XML提供IDAP请求和响应消息的表示，如下所示：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>所有请求和响应标记都在SOAP名称空间中作用域。</p>
                     </li>
                     <li>
                        <p>Oracle数据库高级队列操作的作用域在IDAP名称空间中。</p>
                     </li>
                     <li>
                        <p>发件人包括IDAP元素中的名称空间和SOAP正文中的属性。</p>
                     </li>
                     <li>
                        <p>接收方处理具有正确名称空间的SOAP消息，并为具有不正确名称空间的请求返回无效请求错误。</p>
                     </li>
                     <li>
                        <p>SOAP命名空间的值为<code class="codeph">http://schemas.xmlsoap.org/soap/envelope/</code></p>
                     </li>
                     <li>
                        <p>IDAP名称空间的值为<code class="codeph">http://ns.oracle.com/AQ/schemas/access</code></p>
                     </li>
                  </ul>
               </div><a id="ADQUE2621"></a><div class="props_rev_3"><a id="GUID-2BF65C3A-784B-4461-B268-DB972B617915" name="GUID-2BF65C3A-784B-4461-B268-DB972B617915"></a><h4 id="ADQUE-GUID-2BF65C3A-784B-4461-B268-DB972B617915" class="sect4"><span class="enumeration_section">6.3.1</span> SOAP消息结构</h4>
                  <div>
                     <p>这些主题显示了SOAP如何构造消息请求或响应。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="aq-internet-access.html#GUID-F9395CCB-66F8-4D1C-AC82-DD33E31BDE53" title="这是XML树中的根或顶部元素。它的标签是SOAP：Envelope。SOAP定义了一个全局属性SOAP：encodingStyle，它指示使用的序列化规则，而不是SOAP规范描述的规则。">SOAP信封</a></p>
                        </li>
                        <li>
                           <p><a href="aq-internet-access.html#GUID-05A18DB0-3BE8-41A5-949C-5DCDBA322F62" title="这是根目录下的第一个元素。它的标签是SOAP：Header。SOAP标头传递必要的信息，例如事务标识符。">SOAP标头</a></p>
                        </li>
                        <li>
                           <p><a href="aq-internet-access.html#GUID-459E584E-B1D0-48A0-B874-D150E8304913" title="这是Oracle数据库高级排队XML文档。它的标签是SOAP：Body，它包含第一个子元素，其名称是方法名称。">SOAP Body</a></p>
                        </li>
                     </ul>
                  </div><a id="ADQUE2622"></a><div class="props_rev_3"><a id="GUID-F9395CCB-66F8-4D1C-AC82-DD33E31BDE53" name="GUID-F9395CCB-66F8-4D1C-AC82-DD33E31BDE53"></a><h5 id="ADQUE-GUID-F9395CCB-66F8-4D1C-AC82-DD33E31BDE53" class="sect5"><span class="enumeration_section">6.3.1.1</span> SOAP信封</h5>
                     <div>
                        <p>这是XML树中的根或顶部元素。它的标签是<code class="codeph">SOAP:Envelope</code> 。SOAP定义了一个全局属性<code class="codeph">SOAP:encodingStyle</code> ，它指示使用的序列化规则，而不是SOAP规范描述的规则。
                        </p>
                        <p>此属性可以出现在任何元素上，并且范围限定为该元素，并且所有子元素本身不包含此类属性。省略此属性意味着除非被父元素覆盖，否则已遵循类型规范。</p>
                        <p>SOAP信封还包含名称空间声明和其他属性，前提是它们是名称空间限定的。其他符合命名空间的子元素可以跟随正文。</p>
                     </div>
                  </div><a id="ADQUE2623"></a><div class="props_rev_3"><a id="GUID-05A18DB0-3BE8-41A5-949C-5DCDBA322F62" name="GUID-05A18DB0-3BE8-41A5-949C-5DCDBA322F62"></a><h5 id="ADQUE-GUID-05A18DB0-3BE8-41A5-949C-5DCDBA322F62" class="sect5"><span class="enumeration_section">6.3.1.2</span> SOAP标头</h5>
                     <div>
                        <p>这是根目录下的第一个元素。它的标签是<code class="codeph">SOAP:Header</code> 。SOAP标头传递必要的信息，例如事务标识符。
                        </p>
                        <p>标头被编码为<code class="codeph">SOAP:Envelope</code> XML元素的子元素。标头由name元素标识，并且是名称空间限定的。标题条目被编码为嵌入元素。
                        </p>
                     </div>
                  </div><a id="ADQUE2624"></a><div class="props_rev_3"><a id="GUID-459E584E-B1D0-48A0-B874-D150E8304913" name="GUID-459E584E-B1D0-48A0-B874-D150E8304913"></a><h5 id="ADQUE-GUID-459E584E-B1D0-48A0-B874-D150E8304913" class="sect5"><span class="enumeration_section">6.3.1.3</span> SOAP主体</h5>
                     <div>
                        <p>这是Oracle数据库高级排队XML文档。它的标签是<code class="codeph">SOAP:Body</code> ，它包含第一个子元素，其名称是方法名称。
                        </p>
                        <p>此方法request元素包含每个输入和输出参数的元素。元素名称是参数名称。正文还包含<code class="codeph">SOAP:Fault</code> ，指示有关错误的信息。Oracle Database Advanced Queuing XML文档的名称空间为<code class="codeph">http://ns.oracle.com/AQ/schemas/access</code></p>
                     </div>
                  </div>
               </div><a id="ADQUE2625"></a><div class="props_rev_3"><a id="GUID-7E47AB55-9DBE-4395-8853-63D1277984D3" name="GUID-7E47AB55-9DBE-4395-8853-63D1277984D3"></a><h4 id="ADQUE-GUID-7E47AB55-9DBE-4395-8853-63D1277984D3" class="sect4"><span class="enumeration_section">6.3.2</span> SOAP方法调用</h4>
                  <div>
                     <p>通过创建请求标头和正文以及处理返回的响应标头和正文来执行方法调用。请求和响应标头可以包含标准传输协议特定标头和扩展标头。</p>
                  </div><a id="ADQUE2626"></a><div class="props_rev_3"><a id="GUID-FAEB15BA-B7D4-4C18-8182-439C67AED1B1" name="GUID-FAEB15BA-B7D4-4C18-8182-439C67AED1B1"></a><h5 id="ADQUE-GUID-FAEB15BA-B7D4-4C18-8182-439C67AED1B1" class="sect5"><span class="enumeration_section">6.3.2.1</span> HTTP标头</h5>
                     <div>
                        <p>HTTP请求标头中的<code class="codeph">POST</code>方法执行SOAP方法调用。请求应包含标头<code class="codeph">SOAPMethodName,</code>其值指示要在目标上调用的方法。值的格式为<span class="italic"><code class="codeph">URI</code></span> <code class="codeph">#</code> <span class="italic"><code class="codeph">method name</code></span> 。
                        </p>
                        <p>例如：</p><pre class="oac_no_warn" dir="ltr">SOAPMethodName：http：//ns.oracle.com/AQ/schemas/access#AQXmlSend</pre><p>用于接口的URI必须与有效负载的<code class="codeph">SOAP:Body</code>部分中方法名称元素的隐含或指定的命名空间限定匹配。方法名称不得包含“＃”字符。
                        </p>
                     </div>
                  </div><a id="ADQUE2627"></a><div class="props_rev_3"><a id="GUID-B926E3CE-9821-4552-8357-A0F65E1D8768" name="GUID-B926E3CE-9821-4552-8357-A0F65E1D8768"></a><h5 id="ADQUE-GUID-B926E3CE-9821-4552-8357-A0F65E1D8768" class="sect5"><span class="enumeration_section">6.3.2.2</span>方法调用主体</h5>
                     <div>
                        <p>SOAP方法调用由方法请求和可选的方法响应组成。SOAP方法请求和方法响应分别是HTTP请求和响应，其内容是由根和必需主体元素组成的XML文档。</p>
                        <p>这些XML文档在其余部分中称为SOAP有效内容。</p>
                        <p>SOAP有效负载定义如下：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>SOAP根元素是XML树中的顶级元素。</p>
                           </li>
                           <li>
                              <p>SOAP有效负载标头包含必须随请求一起传递的其他信息。</p>
                           </li>
                           <li>
                              <p>方法请求表示为XML元素，其中包含参数的附加元素。它是<code class="codeph">SOAP:Body</code>元素的第一个子元素。此请求可以是下一节中描述的Oracle数据库高级排队XML客户端请求之一。
                              </p>
                           </li>
                           <li>
                              <p>响应是返回值或传递回客户端的错误或异常。</p>
                           </li>
                        </ul>
                        <p>在接收站点，请求可以具有以下结果之一：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>接收站点上的HTTP基础结构可以接收和处理请求。在这种情况下，HTTP基础结构将标头和主体传递给SOAP基础结构。</p>
                           </li>
                           <li>
                              <p>接收站点上的HTTP基础结构无法接收和处理请求。在这种情况下，结果是HTTP响应，其在状态字段中包含HTTP错误，而没有XML正文。</p>
                           </li>
                           <li>
                              <p>接收站点上的SOAP基础结构可以解码输入参数，分派到由服务器地址指示的适当服务器，并调用与语法对应于方法请求中指示的方法的应用程序级功能。在这种情况下，方法请求的结果包含响应或错误。</p>
                           </li>
                           <li>
                              <p>接收站点上的SOAP基础结构不能解码输入参数，分派到服务器地址指示的适当服务器，并调用与语法对应的方法请求中指示的接口或方法的应用程序级功能。在这种情况下，该方法的结果是一个错误，该错误阻止了接收方的调度基础设施成功完成。</p>
                           </li>
                        </ul>
                        <p>在最后两种情况中，可扩展性请求的结果中可能存在其他消息头。</p>
                     </div>
                  </div><a id="ADQUE2628"></a><div class="props_rev_3"><a id="GUID-97435D1A-4691-4A19-846B-3F5AE4D2110F" name="GUID-97435D1A-4691-4A19-846B-3F5AE4D2110F"></a><h5 id="ADQUE-GUID-97435D1A-4691-4A19-846B-3F5AE4D2110F" class="sect5"><span class="enumeration_section">6.3.2.3</span>方法请求的结果</h5>
                     <div>
                        <p>请求的结果将以请求响应的形式提供。HTTP响应必须是Content-Type <code class="codeph">text/xml</code> 。
                        </p>
                        <p><a id="d27853e1622" class="indexterm-anchor"></a> SOAP结果表示成功，错误表示失败。方法响应从不包含结果和错误。
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="ADQUE2629"></a><div class="props_rev_3"><a id="GUID-25BB208A-A345-40C2-B3D7-60954DC997DD" name="GUID-25BB208A-A345-40C2-B3D7-60954DC997DD"></a><h3 id="ADQUE-GUID-25BB208A-A345-40C2-B3D7-60954DC997DD" class="sect3"><span class="enumeration_section">6.4</span>请求和响应IDAP文档</h3>
               <div>
                  <p>SOAP消息的主体是IDAP消息。此XML文档的名称空间为<code class="codeph">http://ns.oracle.com/AQ/schemas/access</code> 。</p>
                  <p><a id="d27853e1686" class="indexterm-anchor"></a><a id="d27853e1690" class="indexterm-anchor"></a>身体代表：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>客户请求入<a href="glossary.html#GUID-B21E60F7-4BFA-42A2-9A8F-B781C2A55ED9"><span class="xrefglossterm">队</span></a> ， <a href="glossary.html#GUID-BC8D60E8-953A-4C6C-8163-F7AE187B768B"><span class="xrefglossterm">出列</span></a>和注册</p>
                     </li>
                     <li>
                        <p>服务器响应客户端对入队，出队和注册的请求</p>
                     </li>
                     <li>
                        <p>从服务器到客户端的通知</p>
                        <div class="infoboxnote" id="GUID-25BB208A-A345-40C2-B3D7-60954DC997DD__GUID-5D16AA6F-67E9-4AC8-A38B-083D07D26466">
                           <p class="notep1">注意：</p>
                           <p>Oracle数据库高级队列仅支持8.1或更高级别的队列Internet访问。</p>
                           <p>分片队列不支持通过SOAP访问Internet。</p>
                        </div>
                     </li>
                  </ul>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="aq-internet-access.html#GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F" title="客户端发送和发布请求使用AQXmlSend排入单用户队列，AQXmlPublish排入多用户队列/主题。">IDAP客户端请求入队</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-A3DA13BD-73C8-4A75-893B-EE02F80C003B" title="客户端对dequeue的请求使用AQXmlReceive，其中包含这些元素。">IDAP客户请求出列</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-575EE4D3-59C0-4DBD-A7E7-6DE5C5A0AE0B" title="客户端注册请求使用AQXmlRegister，它必须包含register_options元素。register_options元素包含这些子元素。">IDAP客户注册请求</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-71188515-8351-48AB-BD12-9ABABBA0AD5B" title="提交用户在会话中执行的所有操作的请求使用AQXmlCommit。">IDAP客户端请求提交事务</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-61060416-54AF-4C63-B2B4-DE3FA34278B0" title="回滚会话中用户执行的所有操作的请求使用AQXmlRollback。使用IMMEDIATE可见性执行的操作不会回滚。">用于回滚事务的IDAP客户端请求</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-E7C7929E-CDF4-4218-8223-E6F9DA6E0F29" title="对单个使用者队列的入队请求的响应使用AQXmlSendResponse。">IDAP服务器对入队请求的响应</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-2FB266E5-5C88-42C8-BC77-173AA506995A" title="对出列请求的响应使用AQXmlReceiveResponse。">IDAP服务器对出列请求的响应</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-2BE2040D-7AA9-4EED-A25B-9FF0E0A5F693" title="对注册请求的响应使用AQXmlRegisterResponse。">IDAP服务器对注册请求的响应</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-3E5B2A65-B842-44A3-A424-E0FF22517902" title="对提交请求的响应使用AQXmlCommitResponse。">IDAP提交响应</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-8692D6DF-C4FD-46C5-9DFE-D2A11B3490E3" title="对回滚请求的响应使用AQXmlRollbackResponse。">IDAP回滚响应</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-0EF6835E-BD73-4E58-8456-3F6BEE05CF78" title="当发生客户端已注册的事件时，将使用AQXmlNotification在REGISTER请求中指定的URL处向客户端发送通知。">IDAP通知</a></p>
                     </li>
                     <li>
                        <p><a href="aq-internet-access.html#GUID-632FAF73-0E02-42C5-A008-1A3BBD4E548D" title="如果在任何前述请求中出现错误，则生成FAULT。">错误情况下的IDAP响应</a></p>
                     </li>
                  </ul>
               </div><a id="ADQUE2631"></a><a id="ADQUE2632"></a><a id="ADQUE2633"></a><a id="ADQUE2634"></a><a id="ADQUE2635"></a><a id="ADQUE2630"></a><div class="props_rev_3"><a id="GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F" name="GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F"></a><h4 id="ADQUE-GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F" class="sect4"><span class="enumeration_section">6.4.1</span> IDAP客户端入队请求</h4>
                  <div>
                     <p>客户端发送和发布请求使用<code class="codeph">AQXmlSend</code>排入单用户队列， <code class="codeph">AQXmlPublish</code>排入多用户队列/主题。
                     </p>
                     <p><code class="codeph">AQXmlSend</code>和<code class="codeph">AQXmlPublish</code>包含以下元素：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="aq-internet-access.html#GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__CHDJEFCI">producer_options</a></p>
                        </li>
                        <li>
                           <p><a href="aq-internet-access.html#GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__CHDEGGDC">message_set</a></p>
                        </li>
                        <li>
                           <p><a href="aq-internet-access.html#GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__CHDFEAEJ">message_header</a></p>
                        </li>
                        <li>
                           <p><a href="aq-internet-access.html#GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__CHDEHDEB">message_payload</a></p>
                        </li>
                        <li>
                           <p><a href="aq-internet-access.html#GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__CHDEEDBE">AQXmlCommit</a></p>
                        </li>
                     </ul>
                     <div class="section" id="GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__CHDJEFCI">
                        <p class="subhead3" id="GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__GUID-E01E08CD-7B2E-4D88-B837-8007B422D9E4">producer_options</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>这是必需的元素。它包含以下子元素：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">目的地</code> 
                              </p>
                              <p>这个元素是必需的。它指定要将消息发送到的<a href="glossary.html#GUID-583DEF67-C9BC-4B83-B8DC-2375A5BE08BB"><span class="xrefglossterm">队列</span></a> /主题。它有一个可选的<code class="codeph">lookup_type</code>属性，用于确定如何解释目标值。如果lookup_type是<code class="codeph">DATABASE</code> （默认值），则目标将被解释为<code class="codeph">schema.queue_name</code> 。如果<code class="codeph">lookup_type</code>是<code class="codeph">LDAP</code> ，则LDAP服务器用于解析目标。
                              </p>
                           </li>
                           <li>
                              <p><a id="d27853e2015" class="indexterm-anchor"></a><code class="codeph">visibility</code> 
                              </p>
                              <p>此元素是可选的。它确定何时可以看到入队。默认值为<code class="codeph">ON_COMMIT</code> ，这使得当前事务提交时enqueue可见。如果指定了<code class="codeph">IMMEDIATE</code> ，则在请求完成后立即可以看到入队的效果。入队不是当前交易的一部分。该操作本身构成交易。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">转型</code> 
                              </p>
                              <p>此元素是可选的。它指定在消息入队之前要调用的PL / SQL <a href="glossary.html#GUID-A668A987-B1D3-4330-97FD-0589DB780225"><span class="xrefglossterm">转换</span></a> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__CHDEGGDC">
                        <p class="subhead3" id="GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__GUID-0A99CD03-4976-4C97-9B61-3135F8FEB249">message_set</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>这是必需元素，包含一条或多条消息。每条消息都包含一条<a href="aq-internet-access.html#GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__CHDFEAEJ">message_header</a>和一条<a href="aq-internet-access.html#GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__CHDEHDEB">message_payload</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__CHDFEAEJ">
                        <p class="subhead3" id="GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__GUID-71E219DE-70DC-4452-8AC6-770517ABE62A">message_header</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>此元素是可选的。它包含以下子元素：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">发件人ID</code> 
                              </p>
                              <p>如果包含<code class="codeph">message_header</code>元素，则它必须包含<code class="codeph">sender_id</code>元素，该元素指定特定于应用程序的标识符。<code class="codeph">sender_id</code>元素可以包含<code class="codeph">agent_name</code> ， <code class="codeph">address</code> ， <code class="codeph">protocol</code>和<code class="codeph">agent_alias</code>元素。<code class="codeph">agent_alias</code>元素使用LDAP解析为名称，地址和协议。</p>
                           </li>
                           <li>
                              <p><code class="codeph">MESSAGE_ID</code> 
                              </p>
                              <p>此元素是可选的。它是在出列期间提供的消息的唯一标识符。</p>
                           </li>
                           <li>
                              <p><code class="codeph">相关</code> 
                              </p>
                              <p>此元素是可选的。它是消息的相关标识符。</p>
                           </li>
                           <li>
                              <p><code class="codeph">延迟</code> 
                              </p>
                              <p>此元素是可选的。它指定消息可用于处理的持续时间（以秒为单位）。</p>
                           </li>
                           <li>
                              <p><code class="codeph">呼气</code> 
                              </p>
                              <p>此元素是可选的。它指定消息可用于出列的持续时间（以秒为单位）。此参数是延迟的偏移量。默认情况下，邮件永不过期。如果消息在到期之前未出列，则将其移至<code class="codeph">EXPIRED</code>状态的<a href="glossary.html#GUID-38CB652B-C8D2-49F4-92FD-926EB001284F"><span class="xrefglossterm">异常队列</span></a> 。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">优先</code> 
                              </p>
                              <p>此元素是可选的。它指定消息的优先级。优先级可以是任何数字，包括负数。数字越小表示优先级越高。</p>
                           </li>
                           <li>
                              <p><code class="codeph">RECIPIENT_LIST</code> 
                              </p>
                              <p>此元素是可选的。它是覆盖默认订户列表的收件人列表。每个收件人都在<code class="codeph">recipient_list</code>由<code class="codeph">recipient</code>元素表示，该元素可以包含<code class="codeph">agent_name</code> ， <code class="codeph">address</code> ， <code class="codeph">protocol</code>和<code class="codeph">agent_alias</code>元素。<code class="codeph">agent_alias</code>元素使用LDAP解析为名称，地址和协议。</p>
                           </li>
                           <li>
                              <p><code class="codeph">message_state</code> 
                              </p>
                              <p>此元素是可选的。它指定消息的状态。它在出列时自动填充。如果<code class="codeph">message_state</code>为0，则表明该消息已准备好进行处理。如果为1，则尚未达到消息延迟。如果是2，则消息已被处理并保留。如果为3，则消息已移至异常队列。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">exception_queue</code> 
                              </p>
                              <p>此元素是可选的。如果不成功的出列尝试次数超过<code class="codeph">max_retries</code>或消息已过期，则指定要将消息移动到的队列的名称。异常队列中的所有消息都处于<code class="codeph">EXPIRED</code>状态。
                              </p>
                              <p>如果在移动时指定的异常队列不存在，则将消息移动到与队列表关联的缺省异常队列，并在警报日志中记录警告。如果使用默认异常队列，则参数在出列时返回<code class="codeph">NULL</code>值。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__CHDEHDEB">
                        <p class="subhead3" id="GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__GUID-506F1213-858A-478F-8E41-164BE06978C7">message_payload</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>这是必需的元素。它可以包含基于目标队列/主题的有效负载类型的不同元素。<span class="q">“ <a href="aq-internet-access.html#GUID-A3DA13BD-73C8-4A75-893B-EE02F80C003B" title="客户端对dequeue的请求使用AQXmlReceive，其中包含这些元素。">IDAP客户端请求队列</a> ”</span>中描述了不同的有效负载类型。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__CHDEEDBE">
                        <p class="subhead3" id="GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__GUID-5E35E896-5D3F-47E9-A361-515DE1D23D6A">AQXmlCommit</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>这是一个可选的空元素。如果包含它，则在请求结束时提交事务。</p>
                        <div class="infoboxnotealso" id="GUID-770F59CF-ABBA-48A4-9AF0-A39F4701472F__GUID-2FA15936-2B46-4BDE-B6DD-CC2E4FE0CF12">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="aq-internet-access.html#GUID-EADC1AC0-A16B-465E-BE43-9883478C4904" title="Oracle数据库高级队列支持三种类型的消息：RAW，Oracle对象和JMS。可以使用SOAP和Web服务访问所有这些消息类型。">Internet Message</a></span> Payloads <span class="q">”</span>用于解释IDAP消息有效负载</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADQUE2637"></a><a id="ADQUE2638"></a><a id="ADQUE2636"></a><div class="props_rev_3"><a id="GUID-A3DA13BD-73C8-4A75-893B-EE02F80C003B" name="GUID-A3DA13BD-73C8-4A75-893B-EE02F80C003B"></a><h4 id="ADQUE-GUID-A3DA13BD-73C8-4A75-893B-EE02F80C003B" class="sect4"><span class="enumeration_section">6.4.2</span> IDAP客户端请求队列请求</h4>
                  <div>
                     <p>客户端对dequeue的请求使用<code class="codeph">AQXmlReceive</code> ，其中包含这些元素。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="aq-internet-access.html#GUID-A3DA13BD-73C8-4A75-893B-EE02F80C003B__CHDHBBAE">consumer_options</a></p>
                        </li>
                        <li>
                           <p><a href="aq-internet-access.html#GUID-A3DA13BD-73C8-4A75-893B-EE02F80C003B__CHDJICCE">AQXmlCommit</a></p>
                        </li>
                     </ul>
                     <div class="section" id="GUID-A3DA13BD-73C8-4A75-893B-EE02F80C003B__CHDHBBAE">
                        <p class="subhead3" id="GUID-A3DA13BD-73C8-4A75-893B-EE02F80C003B__GUID-5632DAC9-8BF6-4544-BCA0-2DBA004B343E">consumer_options</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>这是必需的元素。它包含以下子元素：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">目的地</code> 
                              </p>
                              <p>这个元素是必需的。它指定从中接收消息的队列/主题。<code class="codeph">destination</code>元素具有可选的<code class="codeph">lookup_type</code>属性，该属性确定如何解释目标值。如果lookup_type是<code class="codeph">DATABASE</code> （默认值），则目标将被解释为<code class="codeph">schema.queue_name</code> 。如果<code class="codeph">lookup_type</code>是<code class="codeph">LDAP</code> ，则LDAP服务器用于解析目标。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">CONSUMER_NAME</code> 
                              </p>
                              <p>此元素是可选的。它指定<a href="glossary.html#GUID-B9071BDE-395F-4686-B2D2-A1B83F986BCC"><span class="xrefglossterm">消费者</span></a>的名称。仅访问与消费者名称匹配的那些消息。如果没有为多个使用者设置队列，则不应指定此字段。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">等待时间</code> 
                              </p>
                              <p>此元素是可选的。它指定当前没有可用的消息与搜索条件匹配时等待的秒数。</p>
                           </li>
                           <li>
                              <p><code class="codeph">选择</code> 
                              </p>
                              <p>此元素是可选的。它指定用于选择消息的标准。它可以包含子元素<code class="codeph">correlation</code> ， <code class="codeph">message_id</code>或<code class="codeph">condition</code> 。
                              </p>
                              <p>dequeue <code class="codeph">condition</code>元素是一个布尔表达式，使用类似于SQL查询的<code class="codeph">WHERE</code>子句的语法。此布尔表达式可以包括有关消息属性，用户对象有效内容数据属性以及PL / SQL或SQL函数的条件。消息属性包括队列表中的<code class="codeph">priority</code> ， <code class="codeph">corrid</code>和其他列。
                              </p>
                              <p>要在消息有效内容上指定出列条件，请在子句中使用<a href="glossary.html#GUID-5A1E34E2-9B71-497D-879B-E355EDCF7108"><span class="xrefglossterm">对象类型的</span></a>属性。您必须在每个属性前加上<code class="codeph">tab</code> 。 <code class="codeph">user_data</code>作为限定符，用于指示存储有效内容的队列表的特定列。
                              </p>
                              <p>出队<code class="codeph">condition</code>元素不能超过4000个字符。
                              </p>
                              <div class="infoboxnote" id="GUID-A3DA13BD-73C8-4A75-893B-EE02F80C003B__GUID-E86D1760-AE20-44FE-B731-6DDE42DAA202">
                                 <p class="notep1">注意：</p>
                                 <p>当使用出列条件或相关标识符时，出列的消息的顺序是不确定的，并且不遵守队列的排序顺序。</p>
                              </div>
                           </li>
                           <li>
                              <p><a id="d27853e2406" class="indexterm-anchor"></a><code class="codeph">visibility</code> 
                              </p>
                              <p>此元素是可选的。它确定何时出列队列可见。默认值为<code class="codeph">ON_COMMIT</code> ，这使得当前事务提交时出列<code class="codeph">ON_COMMIT</code>可见。如果指定了<code class="codeph">IMMEDIATE</code> ，则在请求完成后立即可以看到出列的效果。出列人不是当前交易的一部分。该操作本身构成交易。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">dequeue_mode</code></p>
                              <p>此元素是可选的。它指定与出列关联的锁定操作。可能的值为<code class="codeph">REMOVE</code> ， <code class="codeph">BROWSE</code>和<code class="codeph">LOCKED</code> 。</p>
                              <p><code class="codeph">REMOVE</code>是默认值，可以读取和删除消息。可以根据保留属性将消息保留在队列表中。<code class="codeph">BROWSE</code>在不获取任何锁定的情况下读取消息。这相当于一个select语句。<code class="codeph">LOCKED</code>读取消息并获取其上的写锁定。锁定持续到交易期间。这相当于select for update语句。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">navigation_mode</code></p>
                              <p>此元素是可选的。它指定检索的消息的位置。首先，确定位置。其次，应用搜索标准。最后，检索消息。可能的值为<code class="codeph">FIRST_MESSAGE</code> ， <code class="codeph">NEXT_MESSAGE</code>和<code class="codeph">NEXT_TRANSACTION</code> 。</p>
                              <p><code class="codeph">FIRST_MESSAGE</code>检索第一条可用且与搜索条件匹配的消息。这会将位置重置为队列的开头。<code class="codeph">NEXT_MESSAGE</code>是默认值，并检索下一条可用且与搜索条件匹配的消息。如果先前的消息属于消息组，则Oracle数据库高级队列将检索与搜索条件匹配且属于消息组的下一个可用消息。<code class="codeph">NEXT_TRANSACTION</code>跳过当前事务组的剩余部分并检索下一个事务组的第一条消息。仅当为当前队列启用了消息分组时，才能使用此选项。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">转型</code> 
                              </p>
                              <p>此元素是可选的。它指定在消息出列后要调用的PL / SQL <a href="glossary.html#GUID-A668A987-B1D3-4330-97FD-0589DB780225"><span class="xrefglossterm">转换</span></a> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-A3DA13BD-73C8-4A75-893B-EE02F80C003B__CHDJICCE">
                        <p class="subhead3" id="GUID-A3DA13BD-73C8-4A75-893B-EE02F80C003B__GUID-B4DDB521-4F7F-44E7-BB45-0DF8842409D0">AQXmlCommit</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>这是一个可选的空元素。如果包含它，则在请求结束时提交事务。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADQUE2639"></a><div class="props_rev_3"><a id="GUID-575EE4D3-59C0-4DBD-A7E7-6DE5C5A0AE0B" name="GUID-575EE4D3-59C0-4DBD-A7E7-6DE5C5A0AE0B"></a><h4 id="ADQUE-GUID-575EE4D3-59C0-4DBD-A7E7-6DE5C5A0AE0B" class="sect4"><span class="enumeration_section">6.4.3</span> IDAP客户注册请求</h4>
                  <div>
                     <p>客户端注册请求使用<code class="codeph">AQXmlRegister</code> ，它必须包含<code class="codeph">register_options</code>元素。<code class="codeph">register_options</code>元素包含这些子元素。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">目的地</code> 
                           </p>
                           <p>这个元素是必需的。它指定注册通知的队列/主题。<code class="codeph">destination</code>元素具有可选的<code class="codeph">lookup_type</code>属性，该属性确定如何解释目标值。如果lookup_type是<code class="codeph">DATABASE</code> （默认值），则目标将被解释为<code class="codeph">schema.queue_name</code> 。如果<code class="codeph">lookup_type</code>是<code class="codeph">LDAP</code> ，则LDAP服务器用于解析目标。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">CONSUMER_NAME</code></p>
                           <p>此元素是可选的。它指定多消费者队列或主题的使用者名称。不得为单用户队列指定此参数。</p>
                        </li>
                        <li>
                           <p><code class="codeph">notify_url</code></p>
                           <p>这个元素是必需的。它指定邮件入队时发送通知的位置。表单可以是<code class="codeph">http://</code> <span class="italic"><code class="codeph">url</code></span> ， <code class="codeph">mailto://</code> <span class="italic"><code class="codeph">email address</code></span>或<code class="codeph">plsql://</code> <span class="italic"><code class="codeph">pl/sql procedure</code></span> 。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADQUE2640"></a><div class="props_rev_3"><a id="GUID-71188515-8351-48AB-BD12-9ABABBA0AD5B" name="GUID-71188515-8351-48AB-BD12-9ABABBA0AD5B"></a><h4 id="ADQUE-GUID-71188515-8351-48AB-BD12-9ABABBA0AD5B" class="sect4"><span class="enumeration_section">6.4.4</span>提交事务的IDAP客户端请求</h4>
                  <div>
                     <p>提交用户在会话中执行的所有操作的请求使用<code class="codeph">AQXmlCommit</code> 。
                     </p>
                     <p>提交请求具有以下格式：</p><pre class="oac_no_warn" dir="ltr">&lt;？xml版本=“1.0”？&gt; &lt;Envelope xmlns =“http://schemas.xmlsoap.org/soap/envelope/”&gt; &lt;Body&gt; &lt;AQXmlCommit xmlns =“http://ns.oracle.com/AQ/schemas/access”/&gt; &lt;/ Body&gt; &lt;/ Envelope&gt;</pre></div>
               </div><a id="ADQUE2641"></a><div class="props_rev_3"><a id="GUID-61060416-54AF-4C63-B2B4-DE3FA34278B0" name="GUID-61060416-54AF-4C63-B2B4-DE3FA34278B0"></a><h4 id="ADQUE-GUID-61060416-54AF-4C63-B2B4-DE3FA34278B0" class="sect4"><span class="enumeration_section">6.4.5</span>回滚事务的IDAP客户端请求</h4>
                  <div>
                     <p>回滚会话中用户执行的所有操作的请求使用<code class="codeph">AQXmlRollback</code> 。使用<code class="codeph">IMMEDIATE</code>可见性执行的操作不会回滚。
                     </p>
                     <p><a id="d27853e2766" class="indexterm-anchor"></a> IDAP客户端回滚请求具有以下格式：</p><pre class="oac_no_warn" dir="ltr">&lt;？xml版本=“1.0”？&gt; &lt;Envelope xmlns =“http://schemas.xmlsoap.org/soap/envelope/”&gt; &lt;Body&gt; &lt;AQXmlRollback xmlns =“http://ns.oracle.com/AQ/schemas/access”/&gt; &lt;/ Body&gt; &lt;/ Envelope&gt;</pre></div>
               </div><a id="ADQUE2642"></a><div class="props_rev_3"><a id="GUID-E7C7929E-CDF4-4218-8223-E6F9DA6E0F29" name="GUID-E7C7929E-CDF4-4218-8223-E6F9DA6E0F29"></a><h4 id="ADQUE-GUID-E7C7929E-CDF4-4218-8223-E6F9DA6E0F29" class="sect4"><span class="enumeration_section">6.4.6</span> IDAP服务器对入队请求的响应</h4>
                  <div>
                     <p>对单个使用者队列的入队请求的响应使用<code class="codeph">AQXmlSendResponse</code> 。
                     </p>
                     <p>它包含以下元素：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">status_response</code> 
                           </p>
                           <p>此元素包含子元素<code class="codeph">status_code</code> ， <code class="codeph">error_code</code>和<code class="codeph">error_message</code> 。<code class="codeph">status_code</code>元素的值为<code class="codeph">0</code>表示成功，或<code class="codeph">-1</code>表示失败。<code class="codeph">error_code</code>元素包含Oracle错误代码。<code class="codeph">error_message</code>元素包含错误的描述。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">send_result</code></p>
                           <p>该元素包含子元素<code class="codeph">destination</code>和<code class="codeph">message_id</code> 。<code class="codeph">destination</code>元素指定消息的发送位置。<code class="codeph">message_id</code>元素唯一标识发送的每条消息。
                           </p>
                        </li>
                     </ul>
                     <p>对多<code class="codeph">AQXmlPublishResponse</code>队列或主题的入队请求的响应使用<code class="codeph">AQXmlPublishResponse</code> 。它包含以下元素：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">status_response</code> 
                           </p>
                           <p>此元素包含子元素<code class="codeph">status_code</code> ， <code class="codeph">error_code</code>和<code class="codeph">error_message</code> 。<code class="codeph">status_code</code>元素的值为<code class="codeph">0</code>表示成功，或<code class="codeph">-1</code>表示失败。<code class="codeph">error_code</code>元素包含Oracle错误代码。<code class="codeph">error_message</code>元素包含错误的描述。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">publish_result</code></p>
                           <p>该元素包含子元素<code class="codeph">destination</code>和<code class="codeph">message_id</code> 。<code class="codeph">destination</code>元素指定消息的发送位置。<code class="codeph">message_id</code>元素唯一标识发送的每条消息。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADQUE2643"></a><div class="props_rev_3"><a id="GUID-2FB266E5-5C88-42C8-BC77-173AA506995A" name="GUID-2FB266E5-5C88-42C8-BC77-173AA506995A"></a><h4 id="ADQUE-GUID-2FB266E5-5C88-42C8-BC77-173AA506995A" class="sect4"><span class="enumeration_section">6.4.7</span> IDAP服务器对出列请求的响应</h4>
                  <div>
                     <p>对出列请求的响应使用<code class="codeph">AQXmlReceiveResponse</code> 。
                     </p>
                     <p>它包含以下元素：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">status_response</code> 
                           </p>
                           <p>此元素包含子元素<code class="codeph">status_code</code> ， <code class="codeph">error_code</code>和<code class="codeph">error_message</code> 。<code class="codeph">status_code</code>元素的值为<code class="codeph">0</code>表示成功，或<code class="codeph">-1</code>表示失败。<code class="codeph">error_code</code>元素包含Oracle错误代码。<code class="codeph">error_message</code>元素包含错误的描述。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">receive_result</code></p>
                           <p>此元素包含子元素<code class="codeph">destination</code>和<code class="codeph">message_set</code> 。<code class="codeph">destination</code>元素指定消息的发送位置。<code class="codeph">message_set</code>元素指定出列的消息集。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADQUE2644"></a><div class="props_rev_3"><a id="GUID-2BE2040D-7AA9-4EED-A25B-9FF0E0A5F693" name="GUID-2BE2040D-7AA9-4EED-A25B-9FF0E0A5F693"></a><h4 id="ADQUE-GUID-2BE2040D-7AA9-4EED-A25B-9FF0E0A5F693" class="sect4"><span class="enumeration_section">6.4.8</span> IDAP服务器对注册请求的响应</h4>
                  <div>
                     <p>对注册请求的响应使用<code class="codeph">AQXmlRegisterResponse</code> 。
                     </p>
                     <p>它包含<span class="q">“ <a href="aq-internet-access.html#GUID-2FB266E5-5C88-42C8-BC77-173AA506995A" title="对出列请求的响应使用AQXmlReceiveResponse。">IDAP服务器对出列请求的响应</a> ”中</span>描述的<code class="codeph">status_response</code>元素。
                     </p>
                  </div>
               </div><a id="ADQUE2645"></a><div class="props_rev_3"><a id="GUID-3E5B2A65-B842-44A3-A424-E0FF22517902" name="GUID-3E5B2A65-B842-44A3-A424-E0FF22517902"></a><h4 id="ADQUE-GUID-3E5B2A65-B842-44A3-A424-E0FF22517902" class="sect4"><span class="enumeration_section">6.4.9</span> IDAP提交响应</h4>
                  <div>
                     <p>对提交请求的响应使用<code class="codeph">AQXmlCommitResponse</code> 。
                     </p>
                     <p>它包含<span class="q">“ <a href="aq-internet-access.html#GUID-2FB266E5-5C88-42C8-BC77-173AA506995A" title="对出列请求的响应使用AQXmlReceiveResponse。">IDAP服务器对出列请求的响应</a> ”中</span>描述的<code class="codeph">status_response</code>元素。对提交请求的响应具有以下格式：</p><pre class="oac_no_warn" dir="ltr">&lt;？xml版本='1.0'？&gt; &lt;Envelope xmlns =“http://schemas.xmlsoap.org/soap/envelope/”&gt; &lt;Body&gt; &lt;AQXmlCommitResponse xmlns =“http://ns.oracle.com/AQ/schemas/access”&gt; &lt;status_response&gt; &lt;status_code&gt; 0 &lt;/ status_code&gt; &lt;/ status_response&gt; &lt;/ AQXmlCommitResponse&gt; &lt;/ Body&gt; &lt;/ Envelope&gt;</pre></div>
               </div><a id="ADQUE2646"></a><div class="props_rev_3"><a id="GUID-8692D6DF-C4FD-46C5-9DFE-D2A11B3490E3" name="GUID-8692D6DF-C4FD-46C5-9DFE-D2A11B3490E3"></a><h4 id="ADQUE-GUID-8692D6DF-C4FD-46C5-9DFE-D2A11B3490E3" class="sect4"><span class="enumeration_section">6.4.10</span> IDAP回滚响应</h4>
                  <div>
                     <p>对回滚请求的响应使用<code class="codeph">AQXmlRollbackResponse</code> 。
                     </p>
                     <p>它包含<span class="q">“ <a href="aq-internet-access.html#GUID-2FB266E5-5C88-42C8-BC77-173AA506995A" title="对出列请求的响应使用AQXmlReceiveResponse。">IDAP服务器对出列请求的响应</a> ”中</span>描述的<code class="codeph">status_response</code>元素。
                     </p>
                  </div>
               </div><a id="ADQUE2647"></a><div class="props_rev_3"><a id="GUID-0EF6835E-BD73-4E58-8456-3F6BEE05CF78" name="GUID-0EF6835E-BD73-4E58-8456-3F6BEE05CF78"></a><h4 id="ADQUE-GUID-0EF6835E-BD73-4E58-8456-3F6BEE05CF78" class="sect4"><span class="enumeration_section">6.4.11</span> IDAP通知</h4>
                  <div>
                     <p>当发生客户端已注册的事件时，将使用<code class="codeph">AQXmlNotification</code>在<code class="codeph">REGISTER</code>请求中指定的URL处向客户端发送通知。
                     </p>
                     <p>它包含以下元素：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">notification_options</code></p>
                           <p>此元素具有子元素<code class="codeph">destination</code>和<code class="codeph">consumer_name</code> 。<code class="codeph">destination</code>元素指定发生事件的目标队列/主题。consumer_name元素指定偶数发生的使用者名称。它仅适用于多消费者队列/主题。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">message_set</code></p>
                           <p>此元素指定消息属性集。</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADQUE2648"></a><div class="props_rev_3"><a id="GUID-632FAF73-0E02-42C5-A008-1A3BBD4E548D" name="GUID-632FAF73-0E02-42C5-A008-1A3BBD4E548D"></a><h4 id="ADQUE-GUID-632FAF73-0E02-42C5-A008-1A3BBD4E548D" class="sect4"><span class="enumeration_section">6.4.12</span>错误情况下的IDAP响应</h4>
                  <div>
                     <p>如果在任何前述请求中出现错误，则生成<code class="codeph">FAULT</code> 。
                     </p>
                     <p><code class="codeph">FAULT</code>元素包含以下元素：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">的faultcode</code></p>
                           <p>此元素指定错误的错误代码。</p>
                        </li>
                        <li>
                           <p><code class="codeph">faultstring</code></p>
                           <p>此元素表示客户端错误或服务器错误。客户端错误意味着请求无效。服务器错误表示尚未正确设置Oracle数据库高级队列servlet。</p>
                        </li>
                        <li>
                           <p><code class="codeph">详情</code></p>
                           <p>此元素包含<code class="codeph">status_response</code>元素，该元素在<span class="q">“ <a href="aq-internet-access.html#GUID-2FB266E5-5C88-42C8-BC77-173AA506995A" title="对出列请求的响应使用AQXmlReceiveResponse。">IDAP服务器对出列请求的响应</a> ”中描述</span> 。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADQUE2649"></a><div class="props_rev_3"><a id="GUID-0E9C7792-F4A6-41FD-B6B9-6B7A00A5AFBF" name="GUID-0E9C7792-F4A6-41FD-B6B9-6B7A00A5AFBF"></a><h3 id="ADQUE-GUID-0E9C7792-F4A6-41FD-B6B9-6B7A00A5AFBF" class="sect3"><span class="enumeration_section">6.5</span>通过电子邮件通知消息</h3>
               <div>
                  <p>这些是为电子邮件通知设置数据库的步骤。</p>
                  <ol>
                     <li><span>通过将<code class="codeph">DBMS_AQELM.SET_MAILHOST</code>作为Oracle数据库高级队列管理员调用<code class="codeph">DBMS_AQELM.SET_MAILHOST</code>设置SMTP邮件主机。</span></li>
                     <li><span>通过调用<code class="codeph">DBMS_AQELM.SET_MAILPORT</code>作为Oracle数据库高级队列管理员来设置SMTP邮件端口。如果不明确，请将默认值设置为25。</span></li>
                     <li><span>通过调用<code class="codeph">DBMS_AQELM.SET_SENDFROM</code>设置SendFrom地址。</span></li>
                     <li><span>设置完成后，您可以使用Oracle Call Interface（OCI）或PL / SQL API注册电子邮件通知。</span></li>
                  </ol>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
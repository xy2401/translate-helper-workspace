<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>Oracle Messaging Gateway消息转换</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Advanced Queuing User&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Advanced Queuing User&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-database-advanced-queuing.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T10:53:09-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96511-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="omg-working.html" title="Previous" type="text/html"></link>
      <link rel="next" href="omg-monitoring.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle® Database Advanced Queuing"></meta>
    <meta name="dcterms.isVersionOf" content="ADQUE"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="omg-working.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="omg-monitoring.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">高级排队用户指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle Messaging Gateway消息转换</li>
            </ol>
            <a id="GUID-700BFAE2-DBC0-4DD9-8208-57229D179F48" name="GUID-700BFAE2-DBC0-4DD9-8208-57229D179F48"></a><a id="ADQUE2000"></a>
            
            <h2 id="ADQUE-GUID-700BFAE2-DBC0-4DD9-8208-57229D179F48" class="sect2"><span class="enumeration_chapter">20</span> Oracle Messaging Gateway消息转换</h2>
         </header>
         <div class="ind">
            <div>
               <p>以下主题讨论Oracle Messaging Gateway（MGW）如何将<a href="glossary.html#GUID-2028AECF-DB3E-40E2-99B6-A35674C08038"><span class="xrefglossterm">消息</span></a>格式从一个消息传递系统转换为另一个消息传递系统。在Oracle Database Advanced Queuing和另一个系统之间移动消息时，通常需要进行转换，因为不同的消息传递系统具有不同的消息格式。<a href="glossary.html#GUID-3A98EBD4-296B-4BE8-82AE-5B42D07E9894"><span class="xrefglossterm">Java消息服务</span></a> （JMS）消息是一种特殊情况。<a href="glossary.html#GUID-94D9662C-2A02-4DFC-BFEC-684F85CE4186"><span class="xrefglossterm">JMS消息</span></a>只能传播到JMS目标，从而使转换成为一个简单的过程。
               </p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="omg-message-conversion.html#GUID-BA99C330-9A1E-45A6-8713-A6D0ABFF36A8">转换Oracle Messaging Gateway非JMS消息</a></p>
                  </li>
                  <li>
                     <p><a href="omg-message-conversion.html#GUID-8D463F83-A6FB-4656-B441-DF97ADC88FA9">WebSphere MQ的消息转换</a></p>
                  </li>
                  <li>
                     <p><a href="omg-message-conversion.html#GUID-E4267AE0-B912-490A-98E0-0009719FEC36">TIB / Rendezvous的消息转换</a></p>
                  </li>
                  <li>
                     <p><a href="omg-message-conversion.html#GUID-1033A7B8-F827-452E-B491-A65DE6C5712E">JMS消息</a></p>
                  </li>
               </ul>
            </div><a id="ADQUE3351"></a><div class="props_rev_3"><a id="GUID-BA99C330-9A1E-45A6-8713-A6D0ABFF36A8" name="GUID-BA99C330-9A1E-45A6-8713-A6D0ABFF36A8"></a><h3 id="ADQUE-GUID-BA99C330-9A1E-45A6-8713-A6D0ABFF36A8" class="sect3"><span class="enumeration_section">20.1</span>转换Oracle Messaging Gateway非JMS消息</h3>
               <div>
                  <p>MGW在<a href="glossary.html#GUID-DE5B852F-823C-4DC8-B6BB-4825D688A00A"><span class="xrefglossterm">传播</span></a>期间将源消息传递系统的本机消息格式转换为目标消息传递系统的本机消息格式。MGW使用<a href="glossary.html#GUID-F4F4838D-1672-4364-A9E8-EF21D7473749"><span class="xrefglossterm">规范</span></a>类型和以Oracle数据库高级队列为中心的模型进行转换。
                  </p>
               </div><a id="ADQUE3353"></a><a id="ADQUE3352"></a><div class="props_rev_3"><a id="GUID-9C1319DF-AFFE-4757-A7ED-EC9FBCCDA26A" name="GUID-9C1319DF-AFFE-4757-A7ED-EC9FBCCDA26A"></a><h4 id="ADQUE-GUID-9C1319DF-AFFE-4757-A7ED-EC9FBCCDA26A" class="sect4"><span class="enumeration_section">20.1.1</span>非JMS消息转换过程概述</h4>
                  <div>
                     <p>当MGW传播消息时，消息将从源<a href="glossary.html#GUID-583DEF67-C9BC-4B83-B8DC-2375A5BE08BB"><span class="xrefglossterm">队列</span></a>的本机格式转换为目标队列的本机格式。
                     </p>
                     <p>本机消息通常包含消息头和消息正文。标头包含该消息传递系统中所有消息所具有的固定标头字段，例如Oracle Database Advanced Queuing中的消息属性和WebSphere MQ中的固定标头。正文包含消息内容，例如Oracle数据库高级队列有效内容，WebSphere MQ消息正文或整个TIB / Rendezvous消息。MGW转换消息头和消息体组件。</p>
                     <p><a href="omg-message-conversion.html#GUID-9C1319DF-AFFE-4757-A7ED-EC9FBCCDA26A__i1005857">图20-1</a> <span class="italic"><span class="bold"> </span></span>显示了如何在两个阶段中转换非JMS消息。消息首先从源队列的本机格式转换为MGW内部消息格式，然后将其从内部消息格式转换为目标队列的本机格式。
                     </p>
                     <div class="figure" id="GUID-9C1319DF-AFFE-4757-A7ED-EC9FBCCDA26A__i1005857">
                        <p class="titleinfigure">图20-1非JMS消息转换</p><img width="496" src="img/adqmg003.gif" alt="下面是图20-1的描述" title="下面是图20-1的描述" longdesc="img_text/adqmg003.html"><br><a href="img_text/adqmg003.html">“图20-1非JMS消息转换”的描述</a></div>
                     <!-- class="figure" -->
                     <p>MGW代理使用内部消息格式，该格式包含类似于Oracle数据库高级队列消息属性的标头和表示MGW规范类型的主体。</p>
                  </div>
               </div><a id="ADQUE3354"></a><div class="props_rev_3"><a id="GUID-2EFF9A04-7745-486F-8686-6283CA93EFE9" name="GUID-2EFF9A04-7745-486F-8686-6283CA93EFE9"></a><h4 id="ADQUE-GUID-2EFF9A04-7745-486F-8686-6283CA93EFE9" class="sect4"><span class="enumeration_section">20.1.2</span> Oracle Messaging Gateway规范类型</h4>
                  <div>
                     <p>MGW定义了规范类型，以支持Oracle数据库高级队列和非Oracle消息传递系统之间的消息转换。规范类型是Oracle数据库中PL / SQL Oracle类型形式的消息类型表示。规范类型是<code class="codeph">RAW</code> ， <code class="codeph">SYS.MGW_BASIC_MSG_T</code>和<code class="codeph">SYS.MGW_TIBRV_MSG_T</code> 。</p>
                     <p>WebSphere MQ传播支持规范类型<code class="codeph">SYS.MGW_BASIC_MSG_T</code>和<code class="codeph">RAW</code> 。 TIB / Rendezvous传播支持规范类型<code class="codeph">SYS.MGW_TIBRV_MSG_T</code>和<code class="codeph">RAW</code> 。</p>
                     <div class="infoboxnotealso" id="GUID-2EFF9A04-7745-486F-8686-6283CA93EFE9__GUID-08B5463C-7E6E-4682-A0B2-AA9F5AE146E8">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_MGWMSG.html#ARPLS67062" target="_blank"><span class="italic">Oracle Database PL / SQL包中的</span></a> “DBMS_MGWMSG”和<code class="codeph">SYS.MGW_BASIC_MSG_T</code>和<code class="codeph">SYS.MGW_TIBRV_MSG_T</code>语法和属性信息<a href="../arpls/DBMS_MGWMSG.html#ARPLS67062" target="_blank"><span class="italic">类型参考</span></a></p>
                     </div>
                  </div>
               </div><a id="ADQUE3355"></a><div class="props_rev_3"><a id="GUID-C72018E5-BE7D-4E13-95F4-FEEC446BD61C" name="GUID-C72018E5-BE7D-4E13-95F4-FEEC446BD61C"></a><h4 id="ADQUE-GUID-C72018E5-BE7D-4E13-95F4-FEEC446BD61C" class="sect4"><span class="enumeration_section">20.1.3</span>消息头转换</h4>
                  <div>
                     <p>MGW提供Oracle数据库高级队列消息属性与非Oracle消息头字段之间的默认映射，这些字段在Oracle数据库高级队列消息属性中具有相同语义的对应项。在MGW不提供映射的情况下，消息头字段设置为默认值，通常是消息传递系统定义的默认值。</p>
                  </div>
               </div><a id="ADQUE3356"></a><a id="ADQUE3357"></a><a id="ADQUE3358"></a><a id="ADQUE3359"></a><a id="ADQUE2001"></a><div class="props_rev_3"><a id="GUID-54875DD0-41CC-46B8-B6F2-520118C7931D" name="GUID-54875DD0-41CC-46B8-B6F2-520118C7931D"></a><h4 id="ADQUE-GUID-54875DD0-41CC-46B8-B6F2-520118C7931D" class="sect4"><span class="enumeration_section">20.1.4</span>使用消息转换处理任意有效负载类型</h4>
                  <div>
                     <div class="section">
                        <p>转换到Oracle Database Advanced Queuing消息或从Oracle Database Advanced Queuing消息转换时，MGW代理仅使用其规范类型。但是，在用户定义的Oracle数据库高级队列消息转换的帮助下，支持任意有效负载类型，以在Oracle数据库高级队列队列有效负载和MGW规范类型之间进行转换。</p>
                        <p>要使MGW使用任意<a href="glossary.html#GUID-4F65D487-125E-466A-8127-6EB40749DCA3"><span class="xrefglossterm">ADT</span></a>有效负载（出站传播）从Oracle数据库高级队列队列传播消息，您必须提供到MGW规范ADT的映射。当MGW代理从Oracle数据库高级队列队列中取消消息时， <a href="glossary.html#GUID-A668A987-B1D3-4330-97FD-0589DB780225"><span class="xrefglossterm">将</span></a>调用<a href="glossary.html#GUID-A668A987-B1D3-4330-97FD-0589DB780225"><span class="xrefglossterm">转换</span></a> 。同样，对于MGW使用任意ADT有效负载（入站传播）将消息传播到Oracle数据库高级队列队列，您必须提供MGW规范ADT的映射。当MGW代理将消息排入Oracle数据库高级队列队列时，将调用转换。
                        </p>
                        <div class="figure" id="GUID-54875DD0-41CC-46B8-B6F2-520118C7931D__GUID-73B3B524-EA48-4DD2-B520-8E92C6103571">
                           <p class="titleinfigure">图20-2 Oracle数据库高级队列消息转换</p><img src="img/adqmg004.gif" width="496" alt="下面是图20-2的描述" title="下面是图20-2的描述" longdesc="img_text/adqmg004.html"><br><a href="img_text/adqmg004.html">“图20-2 Oracle数据库高级队列消息转换”的说明</a></div>
                        <!-- class="figure" -->
                        <p>变换始终在MGW剂的上下文中，这意味着该MGW代理用户（用户使用指定的执行<code class="codeph">DBMS_MGWADM</code> 。 <code class="codeph">CREATE_AGENT</code>或<code class="codeph">DBMS_MGWADM</code> 。 <code class="codeph">ALTER_AGENT</code>必须具有） <code class="codeph">EXECUTE</code>上变换函数和Oracle数据库高级队列有效载荷类型的特权。这可以通过授予来实现<code class="codeph">EXECUTE</code>特权<code class="codeph">PUBLIC</code>或通过授予<code class="codeph">EXECUTE</code>直接特权到MGW代理用户。
                        </p>
                        <p>要使用转换配置MGW传播作业：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>创建转换功能。</span></li>
                        <li><span>将<code class="codeph">EXECUTE</code>授予MGW代理用户或<code class="codeph">PUBLIC</code>上的函数及其引用的对象类型。</span></li>
                        <li><span>调用<code class="codeph">DBMS_TRANSFORM.CREATE_TRANSFORMATION</code>以注册转换。</span></li>
                        <li><span>调用<code class="codeph">DBMS_MGWADM</code> 。 <code class="codeph">CREATE_JOB</code>使用转换或<code class="codeph">DBMS_MGWADM</code>创建MGW传播作业。 <code class="codeph">ALTER_JOB</code>改变现有的工作。</span></li>
                     </ol>
                     <div class="example" id="GUID-54875DD0-41CC-46B8-B6F2-520118C7931D__I1005674">
                        <p class="titleinexample">例20-1转换函数签名</p><pre class="oac_no_warn" dir="ltr">功能trans_sampleadt_to_mgw_basic（in_msg IN mgwuser.sampleADT）RETURN SYS.MGW_BASIC_MSG_T;</pre><p>您可以使用<code class="codeph">DBMS_TRANSFORM.CREATE_TRANSFORMATION</code>创建转换，如<a href="omg-message-conversion.html#GUID-54875DD0-41CC-46B8-B6F2-520118C7931D__CBBJFDAD">例20-2</a>所示。
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-54875DD0-41CC-46B8-B6F2-520118C7931D__CBBJFDAD">
                        <p class="titleinexample">示例20-2创建转换</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_TRANSFORM.CREATE_TRANSFORMATION（schema =&gt;'mgwuser'，name =&gt;'sample_adt_to_mgw_basic'，from_schema =&gt;'mgwuser'，from_type =&gt;'sampleadt'，to_schema =&gt;'sys'，to_type =&gt;'MGW_BASIC_MSG_T'，transformation =&gt; 'mgwuser.trans_sampleadt_to_mgw_basic（的user_data）'）;结束;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-54875DD0-41CC-46B8-B6F2-520118C7931D__I1005710">
                        <p class="titleinexample">示例20-3注册转换</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_MGWADM.CREATE_JOB（job_name =&gt;'job_aq2mq'，propagation_type =&gt; DBMS_MGWADM.OUTBOUND_PROPAGATION，source =&gt;'mgwuser.srcq'，destination =&gt;'destq.mqlink'，transformation =&gt;'mgwuser.sample_adt_to_mgw_basic'，exception_queue =&gt;' mgwuser.excq'）;结束;</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <p>在这些API的转换参数中传递的值必须是已注册的转换名称，而不是函数名称。例如， <code class="codeph">trans_sampleadt_to_mgw_basic</code>是一个存储过程，表示具有<a href="omg-message-conversion.html#GUID-54875DD0-41CC-46B8-B6F2-520118C7931D__I1005674">示例20-1中</a>所示签名的转换函数。
                        </p>
                        <div class="infoboxnote" id="GUID-54875DD0-41CC-46B8-B6F2-520118C7931D__GUID-F3B75821-3273-4952-91BF-5524E9DFCDBE">
                           <p class="notep1">注意：</p>
                           <p>除了用于创建转换的命令之外，示例中的所有命令都必须以授予<code class="codeph">MGW_ADMINISTRATOR_ROLE</code>的用户<code class="codeph">MGW_ADMINISTRATOR_ROLE</code>运行。
                           </p>
                        </div>
                        <p>创建后，可以在创建传播作业时向MGW注册此转换。<a href="omg-message-conversion.html#GUID-54875DD0-41CC-46B8-B6F2-520118C7931D__I1005710">示例20-3</a>创建作业<code class="codeph">job_aq2mq</code> ，使用转换<code class="codeph">mgwuser.sample_adt_to_mgw_basic</code>消息从Oracle数据库高级队列队列<code class="codeph">mgwuser.srcq</code>到非Oracle消息传递系统队列<code class="codeph">destq@mqlink</code> <code class="codeph">mgwuser.sample_adt_to_mgw_basic</code> 。
                        </p>
                        <p>尝试用户定义的转换时发生的错误通常被视为消息转换异常，如果消息存在，则将消息移动到<a href="glossary.html#GUID-38CB652B-C8D2-49F4-92FD-926EB001284F"><span class="xrefglossterm">异常队列</span></a> 。
                        </p>
                        <div class="infoboxnotealso" id="GUID-54875DD0-41CC-46B8-B6F2-520118C7931D__GUID-0B3C603C-3DBC-4EAC-B9C1-083D985FA157">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../arpls/DBMS_MGWMSG.html#ARPLS365" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考中的</span></a> “DBMS_MGWADM”，“DBMS_MGWMSG”和“DBMS_TRANSFORM”</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADQUE3361"></a><a id="ADQUE3362"></a><a id="ADQUE3360"></a><div class="props_rev_3"><a id="GUID-BC176537-9649-4CB2-B3A9-1216815EADFD" name="GUID-BC176537-9649-4CB2-B3A9-1216815EADFD"></a><h4 id="ADQUE-GUID-BC176537-9649-4CB2-B3A9-1216815EADFD" class="sect4"><span class="enumeration_section">20.1.5</span>处理逻辑变更记录</h4>
                  <div>
                     <p>MGW提供传播逻辑变更记录（LCR）的工具。提供例程以帮助创建转换以处理存储在具有有效载荷类型<code class="codeph">ANYDATA</code>队列中的行LCR和DDL LCR的传播。 LCR作为存储在适当消息类型中的XML字符串传播。
                     </p>
                     <div class="infoboxnote" id="GUID-BC176537-9649-4CB2-B3A9-1216815EADFD__GUID-C57396BA-42D9-41A3-ACD8-9FF1CD4D8D6B">
                        <p class="notep1">注意：</p>
                        <p>对于LCR传播，您必须加载XDB包。</p>
                     </div>
                     <p>由于Oracle Streams使用<code class="codeph">ANYDATA</code>队列来存储LCR，因此<code class="codeph">ANYDATA</code>队列是出站传播的源。转换必须首先使用MGW例程<code class="codeph">DBMS_MGWMSG.LCR_TO_XML</code>将包含LCR的<code class="codeph">ANYDATA</code>对象转换为XMLType对象。如果<code class="codeph">ANYDATA</code>对象不包含LCR，则此例程会引发错误。然后，从XMLType中提取LCR的XML文档字符串，并将其置于适当的MGW规范类型（ <code class="codeph">SYS.MGW_BASIC_MSG_T</code>或<code class="codeph">SYS.MGW_TIBRV_MSG_T</code> ）中。
                     </p>
                     <p><a href="omg-message-conversion.html#GUID-BC176537-9649-4CB2-B3A9-1216815EADFD__BABCGJEH">例20-4</a>说明了用于LCR出站传播的简化转换。转换将包含LCR的<code class="codeph">ANYDATA</code>有效负载转换为<code class="codeph">SYS.MGW_TIBRV_MSG_T</code>对象。将LCR表示为XML文档的字符串放在名为<code class="codeph">ORACLE_LCR</code>的字段中。</p>
                     <p>对于LCR入站传播，MGW规范类型（ <code class="codeph">SYS.MGW_BASIC_MSG_T</code>或<code class="codeph">SYS.MGW_TIBRV_MSG_T</code> ）是转换源类型。表示LCR的XML文档格式的字符串必须包含在规范类型中。转换函数必须从消息中提取字符串，从中创建XMLType对象，并将其转换为包含带有MGW例程<code class="codeph">DBMS_MGWMSG.XML_TO_LCR</code>的LCR的<code class="codeph">ANYDATA</code>对象。如果原始XML文档不代表LCR，则此例程会引发错误。
                     </p>
                     <p><a href="omg-message-conversion.html#GUID-BC176537-9649-4CB2-B3A9-1216815EADFD__BABDEJAG">例20-5</a>说明了用于LCR入站传播的简化转换。转换将<code class="codeph">SYS.MGW_TIBRV_MSG_T</code>对象与包含表示LCR的XML字符串的字段转换为<code class="codeph">ANYDATA</code>对象。将LCR表示为XML文档的字符串取自名为<code class="codeph">ORACLE_LCR</code>的字段。</p>
                     <div class="infoboxnotealso" id="GUID-BC176537-9649-4CB2-B3A9-1216815EADFD__GUID-02318280-F2FC-445A-B5B1-7EABE456CFB8">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../arpls/DBMS_MGWMSG.html#ARPLS365" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考中的</span></a> “DBMS_MGWMSG”</p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">/mgw/samples/lcr</code>用于LCR转换的完整示例</p>
                           </li>
                        </ul>
                     </div>
                     <div class="example" id="GUID-BC176537-9649-4CB2-B3A9-1216815EADFD__BABCGJEH">
                        <p class="titleinexample">例20-4出站LCR转换</p><pre class="oac_no_warn" dir="ltr">创建或替换函数any2tibrv（任何数据中的adata）返回SYS.MGW_TIBRV_MSG_T是v_xml XMLType; v_text varchar2（2000）; v_tibrv sys.mgw_tibrv_msg_t; BEGIN v_xml：= dbms_mgwmsg.lcr_to_xml（adata）; - 假设lcr小于2000个字符。v_text：= v_xml.getStringVal（）; v_tibrv：= SYS.MGW_TIBRV_MSG_T.CONSTRUCT; v_tibrv.add_string（'ORACLE_LCR'，0，v_text）; return v_tibrv;结束any2tibrv;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-BC176537-9649-4CB2-B3A9-1216815EADFD__BABDEJAG">
                        <p class="titleinexample">实施例20-5入境LCR转化</p><pre class="oac_no_warn" dir="ltr">创建或替换函数tibrv2any（sys.mgw_tibrv_msg_t中的tdata）返回anydata是v_field sys.mgw_tibrv_field_t; v_xml XMLType; v_text varchar2（2000）; v_any anydata; BEGIN v_field：= tdata.get_field_by_name（'ORACLE_LCR'）; -  type checking v_text：= v_field.text_value; - 假设它不是null v_xml：= XMLType.createXML（v_text）; v_any：= dbms_mgwmsg.xml_to_lcr（v_xml）; return v_any;结束tibrv2any;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADQUE3364"></a><a id="ADQUE3363"></a><div class="props_rev_3"><a id="GUID-8D463F83-A6FB-4656-B441-DF97ADC88FA9" name="GUID-8D463F83-A6FB-4656-B441-DF97ADC88FA9"></a><h3 id="ADQUE-GUID-8D463F83-A6FB-4656-B441-DF97ADC88FA9" class="sect3"><span class="enumeration_section">20.2</span> WebSphere MQ的消息转换</h3>
               <div>
                  <p>MGW在MGW规范类型和WebSphere MQ本机消息格式之间进行转换。WebSphere MQ本机消息由固定消息头和消息体组成。消息正文被视为<code class="codeph">TEXT</code>值或<code class="codeph">RAW</code> （字节）值。WebSphere MQ传播支持的规范类型是<code class="codeph">SYS.MGW_BASIC_MSG_T</code>和<code class="codeph">RAW</code> 。</p>
                  <div class="figure" id="GUID-8D463F83-A6FB-4656-B441-DF97ADC88FA9__CBBEIJCA">
                     <p class="titleinfigure">图20-3使用MGW_BASIC_MSG_T的WebSphere MQ消息转换</p><img width="496" src="img/adqmg005.gif" alt="下面是图20-3的描述" title="下面是图20-3的描述" longdesc="img_text/adqmg005.html"><br><a href="img_text/adqmg005.html">“图20-3使用MGW_BASIC_MSG_T的WebSphere MQ消息转换”的描述</a></div>
                  <!-- class="figure" -->
                  <p><a href="omg-message-conversion.html#GUID-8D463F83-A6FB-4656-B441-DF97ADC88FA9__CBBEIJCA">图20-3</a>说明了使用规范类型<code class="codeph">SYS.MGW_BASIC_MSG_T</code>时MGW WebSphere MQ驱动程序执行的消息转换。对于出站传播，驱动程序将Oracle数据库高级队列消息属性和规范消息映射到具有固定标头和消息正文的WebSphere MQ消息。对于入站传播，驱动程序将本机消息映射到一组Oracle数据库高级队列消息属性和规范消息。当规范类型是<code class="codeph">RAW</code> ，映射是相同的，除了不存在规范头。
                  </p>
               </div><a id="ADQUE3366"></a><a id="ADQUE3367"></a><a id="ADQUE3368"></a><a id="ADQUE3365"></a><div class="props_rev_3"><a id="GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596" name="GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596"></a><h4 id="ADQUE-GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596" class="sect4"><span class="enumeration_section">20.2.1</span> WebSphere MQ消息头映射</h4>
                  <div>
                     <p>当出站传播作业中使用的MGW规范类型是<code class="codeph">RAW</code> ，不会从<code class="codeph">RAW</code>消息正文设置WebSphere MQ头信息。类似地，对于入站传播， <code class="codeph">RAW</code>消息体中不保留WebSphere MQ头信息。但是，MGW规范类型<code class="codeph">SYS.MGW_BASIC_MSG_T</code>具有一个标头，可用于为出站传播指定WebSphere MQ标头字段，并保留用于入站传播的WebSphere MQ标头字段。
                     </p>
                     <p>本节描述使用<code class="codeph">SYS.MGW_BASIC_MSG_T</code>作为规范类型时WebSphere MQ消息传递系统支持的消息属性。<a href="omg-message-conversion.html#GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596__G1011356" title="行对应于Messaging Gateway名称。第一列是名称，第二列是其Messaging Gateway类型，第三列是相应的WebSphere MQ属性名称，第四列指示它的用途。">表20-1</a>定义了用于描述WebSphere MQ标头属性的MGW {name，value}对。第一列引用<code class="codeph">SYS.MGW_BASIC_MSG_T</code>标头中<code class="codeph">SYS.MGW_NAME_VALUE_T.NAME</code>字段的有效字符串值。第二列引用与名称对应的<code class="codeph">SYS.MGW_NAME_VALUE_T.TYPE</code>值。（请参阅<span class="q">“ <a href="omg-message-conversion.html#GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596__I1006616">有关行的注意事项对应于Messaging Gateway名称。第一列是名称，第二列是其Messaging Gateway类型，第三列是相应的WebSphere MQ属性名称，第四列表示它的用途。</a> “</span>用于解释括号中的数字。”
                     </p>
                     <p>对于入站传播，WebSphere MQ驱动程序根据源消息头生成{name，value}对，并将它们存储在<code class="codeph">SYS.MGW_BASIC_MSG_T</code>类型的规范消息的头部分中。对于出站传播，WebSphere MQ驱动程序为存储在<code class="codeph">SYS.MGW_BASIC_MSG_T</code>规范消息的标头部分中的这些属性的{name，value}对设置消息头和入队选项。
                     </p>
                     <div class="tblformalwide" id="GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596__G1011356">
                        <p class="titleintable">表20-1 WebSphere MQ标头值的MGW名称</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="WebSphere MQ标头值的MGW名称" width="100%" border="1" summary="Rows correspond to Messaging Gateway names. The first column is the name, the second column is its Messaging Gateway type, the third column is the corresponding WebSphere MQ property name, and the fourth column indicates what it is used for." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="32%" id="d114744e929">MGW名称</th>
                                 <th align="left" valign="bottom" width="22%" id="d114744e932">MGW型</th>
                                 <th align="left" valign="bottom" width="25%" id="d114744e935">WebSphere MQ属性名称</th>
                                 <th align="left" valign="bottom" width="22%" id="d114744e938">用于</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e943" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_accountingToken</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e943 d114744e932 "><pre class="oac_no_warn" dir="ltr">RAW_VALUE（大小32）</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e943 d114744e935 "><pre class="oac_no_warn" dir="ltr">accountingToken</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e943 d114744e938 ">
                                    <p>出境（1），入境</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e956" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_applicationIdData</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e956 d114744e932 "><pre class="oac_no_warn" dir="ltr">TEXT_VALUE（大小32）</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e956 d114744e935 "><pre class="oac_no_warn" dir="ltr">applicationIdData</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e956 d114744e938 ">
                                    <p>出境（1），入境</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e969" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_applicationOriginData</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e969 d114744e932 "><pre class="oac_no_warn" dir="ltr">TEXT_VALUE（大小4）</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e969 d114744e935 "><pre class="oac_no_warn" dir="ltr">applicationOriginData</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e969 d114744e938 ">
                                    <p>出境（1），入境</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e982" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_backoutCount</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e982 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e982 d114744e935 "><pre class="oac_no_warn" dir="ltr">backoutCount</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e982 d114744e938 ">
                                    <p>入站</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e995" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_characterSet</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e995 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e995 d114744e935 "><pre class="oac_no_warn" dir="ltr">字符集</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e995 d114744e938 ">
                                    <p>出境，入境</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1008" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_correlationId</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1008 d114744e932 "><pre class="oac_no_warn" dir="ltr">RAW_VALUE（大小24）</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1008 d114744e935 "><pre class="oac_no_warn" dir="ltr">的correlationID</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1008 d114744e938 ">
                                    <p>出境（1），入境</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1021" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_encoding</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1021 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1021 d114744e935 "><pre class="oac_no_warn" dir="ltr">编码</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1021 d114744e938 ">
                                    <p>出境，入境</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1034" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_expiry</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1034 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1034 d114744e935 "><pre class="oac_no_warn" dir="ltr">到期</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1034 d114744e938 ">
                                    <p>出境，入境</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1047" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_feedback</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1047 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1047 d114744e935 "><pre class="oac_no_warn" dir="ltr">反馈</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1047 d114744e938 ">
                                    <p>出境，入境</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1060" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_format</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1060 d114744e932 "><pre class="oac_no_warn" dir="ltr">TEXT_VALUE（大小8）</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1060 d114744e935 "><pre class="oac_no_warn" dir="ltr">格式</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1060 d114744e938 ">
                                    <p>出境（1），入境</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1073" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_groupId</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1073 d114744e932 "><pre class="oac_no_warn" dir="ltr">RAW_VALUE（大小24）</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1073 d114744e935 "><pre class="oac_no_warn" dir="ltr">的groupId</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1073 d114744e938 ">
                                    <p>出境（1），入境</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1087" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_messageFlags</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1087 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1087 d114744e935 "><pre class="oac_no_warn" dir="ltr">messageFlags</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1087 d114744e938 ">
                                    <p>出境，入境</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1100" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_messageId</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1100 d114744e932 "><pre class="oac_no_warn" dir="ltr">RAW_VALUE（大小24）</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1100 d114744e935 "><pre class="oac_no_warn" dir="ltr">MESSAGEID</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1100 d114744e938 ">
                                    <p>出境，入境</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1113" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_messageSequenceNumber</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1113 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1113 d114744e935 "><pre class="oac_no_warn" dir="ltr">messageSequenceNumber</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1113 d114744e938 ">
                                    <p>出境，入境</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1126" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_messageType</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1126 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1126 d114744e935 "><pre class="oac_no_warn" dir="ltr">为messageType</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1126 d114744e938 ">
                                    <p>出境，入境</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1139" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_offset</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1139 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1139 d114744e935 "><pre class="oac_no_warn" dir="ltr">抵消</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1139 d114744e938 ">
                                    <p>出境，入境</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1152" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_originalLength</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1152 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1152 d114744e935 "><pre class="oac_no_warn" dir="ltr">originalLength</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1152 d114744e938 ">
                                    <p>出境，入境</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1165" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_persistence</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1165 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1165 d114744e935 "><pre class="oac_no_warn" dir="ltr">坚持</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1165 d114744e938 ">
                                    <p>入站</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1178" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_priority</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1178 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1178 d114744e935 "><pre class="oac_no_warn" dir="ltr">优先</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1178 d114744e938 ">
                                    <p>出境，入境</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1191" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_putApplicationName</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1191 d114744e932 "><pre class="oac_no_warn" dir="ltr">TEXT_VALUE（大小28）</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1191 d114744e935 "><pre class="oac_no_warn" dir="ltr">putApplicationName</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1191 d114744e938 ">
                                    <p>出境（1），入境</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1204" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_putApplicationType</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1204 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1204 d114744e935 "><pre class="oac_no_warn" dir="ltr">putApplicationType</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1204 d114744e938 ">
                                    <p>出境（1），入境</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1217" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_putDateTime</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1217 d114744e932 "><pre class="oac_no_warn" dir="ltr">DATE_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1217 d114744e935 "><pre class="oac_no_warn" dir="ltr">putDateTime</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1217 d114744e938 ">
                                    <p>入站</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1231" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_putMessageOptions</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1231 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1231 d114744e935 "><pre class="oac_no_warn" dir="ltr">putMessageOptions</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1231 d114744e938 ">
                                    <p>出境（1）（2）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1244" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_replyToQueueManagerName</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1244 d114744e932 "><pre class="oac_no_warn" dir="ltr">TEXT_VALUE（大小48）</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1244 d114744e935 "><pre class="oac_no_warn" dir="ltr">replyToQueueManagerName</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1244 d114744e938 ">
                                    <p>出境，入境</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1257" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_replyToQueueName</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1257 d114744e932 "><pre class="oac_no_warn" dir="ltr">TEXT_VALUE（大小48）</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1257 d114744e935 "><pre class="oac_no_warn" dir="ltr">replyToQueueName</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1257 d114744e938 ">
                                    <p>出境，入境</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1270" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_report</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1270 d114744e932 "><pre class="oac_no_warn" dir="ltr">INTEGER_VALUE</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1270 d114744e935 "><pre class="oac_no_warn" dir="ltr">报告</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1270 d114744e938 ">
                                    <p>出境（1），入境</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d114744e1283" headers="d114744e929 "><pre class="oac_no_warn" dir="ltr">MGW_MQ_userId</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1283 d114744e932 "><pre class="oac_no_warn" dir="ltr">TEXT_VALUE（大小12）</pre></td>
                                 <td align="left" valign="top" width="25%" headers="d114744e1283 d114744e935 "><pre class="oac_no_warn" dir="ltr">用户身份</pre></td>
                                 <td align="left" valign="top" width="22%" headers="d114744e1283 d114744e938 ">
                                    <p>出境，入境</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnotealso" id="GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596__GUID-42D875C8-6C41-4040-B330-4AD16DCB61EF">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adque&amp;id=ARPLS365" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考中的</span></a> “DBMS_MGWMSG”</p>
                     </div>
                     <div class="section" id="GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596__I1006616">
                        <p class="subhead3" id="GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596__GUID-46D56A8D-610F-477D-812A-2B446CBADD26"><span><a href="omg-message-conversion.html#GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596__G1011356" title="行对应于Messaging Gateway名称。第一列是名称，第二列是其Messaging Gateway类型，第三列是相应的WebSphere MQ属性名称，第四列指示它的用途。">表20-1</a></span>注释</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>此用法受WebSphere MQ限制的约束。例如，如果为传出消息设置了<code class="codeph">MGW_MQ_accountingToken</code> ，那么除非将<code class="codeph">MGW_MQ_putMessageOptions</code>设置为WebSphere MQ常量<code class="codeph">MQPMD_SET_ALL_CONTEXT</code>否则WebSphere MQ将覆盖其值。</p>
                           </li>
                           <li>
                              <p><code class="codeph">MGW_MQ_putMessageOptions</code>用作WebSphere MQ Base Java <code class="codeph">Queue.put()</code>方法的<code class="codeph">putMessageOptions</code>参数。它不是WebSphere MQ头信息的一部分，因此不是实际的消息属性。
                              </p>
                              <p>使用<code class="codeph">DBMS_MGWADM.REGISTER_FOREIGN_QUEUE</code>调用注册WebSphere MQ队列时，将指定WebSphere MQ Base Java <code class="codeph">MQQueueManager.accessQueue</code>方法的<code class="codeph">openOptions</code>参数的值。两者之间可能存在依赖关系。例如，对于<code class="codeph">MGW_MQ_putMessageOptions</code>包括<code class="codeph">MQPMD_SET_ALL_CONTEXT,</code> <code class="codeph">the MQ_openMessageOptions</code>队列选项必须包括<code class="codeph">MQOO_SET_CONTEXT</code> 。</p>
                              <p>MGW代理将值<code class="codeph">MQPMO_SYNCPOINT</code>添加到您可以指定的任何值。
                              </p>
                           </li>
                        </ol>
                        <p>MGW为两个WebSphere MQ消息头字段设置缺省值： <code class="codeph">messageType</code>缺省为<code class="codeph">MQMT_DATAGRAM</code> ， <code class="codeph">putMessageOptions</code>缺省为<code class="codeph">MQPMO_SYNCPOINT</code> 。</p>
                        <p>MGW在Oracle Database Advanced Queuing消息属性和WebSphere MQ头字段之间提供两个默认映射。</p>
                        <p>一个映射Oracle数据库高级队列消息属性<code class="codeph">expiration</code> ，表示消息在队列中可用时的消息生存时间，到WebSphere MQ头字段<code class="codeph">expiry</code> ，表示消息的生存时间。对于出站传播，用于值<code class="codeph">expiry</code>通过减去时间的信息是在从所述队列中可用来确定<code class="codeph">expiration</code> ，转换为十分之一秒。Oracle数据库高级队列值<code class="codeph">NEVER</code>映射到<code class="codeph">MQEI_UNLIMITED</code> 。对于入站传播， <code class="codeph">expiration</code>值只是<code class="codeph">expiry</code>转换为秒。WebSphere MQ值<code class="codeph">MQEI_UNLIMITED</code>映射到<code class="codeph">NEVER</code> 。</p>
                        <p>另一个缺省值是使用WebSphere MQ头字段<code class="codeph">priority</code>映射Oracle数据库高级队列消息属性<code class="codeph">priority</code> <code class="codeph">priority</code> 。它在<a href="omg-message-conversion.html#GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596__BABFCEIH" title="第一列是传播类型，第二列是消息传递系统，第三列到第十二列是相应的优先级值。">表20-2中</a>描述。
                        </p>
                        <div class="tblformal" id="GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596__BABFCEIH">
                           <p class="titleintable">表20-2传播的默认优先级映射</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="传播的默认优先级映射" width="100%" border="1" summary="The first column is propagation type, the second column is messaging system, and the third through twelfth columns are the corresponding priority values." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d114744e1447">传播类型</th>
                                    <th align="left" valign="bottom" width="24%" id="d114744e1450">消息系统</th>
                                    <th colspan="10" class="text-center" valign="bottom" id="d114744e1453">优先级值</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d114744e1458" headers="d114744e1447 ">
                                       <p>出站</p>
                                    </td>
                                    <td align="left" valign="top" width="24%" headers="d114744e1458 d114744e1450 ">
                                       <p>Oracle数据库高级队列</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1458 d114744e1453 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1458 d114744e1453 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1458 d114744e1453 ">
                                       <p>2</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1458 d114744e1453 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1458 d114744e1453 ">
                                       <p>4</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1458 d114744e1453 ">
                                       <p>五</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1458 d114744e1453 ">
                                       <p>6</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1458 d114744e1453 ">
                                       <p>7</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1458 d114744e1453 ">
                                       <p>8</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1458 d114744e1453 ">
                                       <p>9</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d114744e1496" headers="d114744e1447 ">
                                       <p>出站</p>
                                    </td>
                                    <td align="left" valign="top" width="24%" headers="d114744e1496 d114744e1450 ">
                                       <p>WebSphere MQ</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1496 d114744e1453 ">
                                       <p>9</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1496 d114744e1453 ">
                                       <p>8</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1496 d114744e1453 ">
                                       <p>7</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1496 d114744e1453 ">
                                       <p>6</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1496 d114744e1453 ">
                                       <p>五</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1496 d114744e1453 ">
                                       <p>4</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1496 d114744e1453 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1496 d114744e1453 ">
                                       <p>2</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1496 d114744e1453 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1496 d114744e1453 ">
                                       <p>0</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d114744e1534" headers="d114744e1447 ">
                                       <p>入站</p>
                                    </td>
                                    <td align="left" valign="top" width="24%" headers="d114744e1534 d114744e1450 ">
                                       <p>Oracle数据库高级队列</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1534 d114744e1453 ">
                                       <p>9</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1534 d114744e1453 ">
                                       <p>8</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1534 d114744e1453 ">
                                       <p>7</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1534 d114744e1453 ">
                                       <p>6</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1534 d114744e1453 ">
                                       <p>五</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1534 d114744e1453 ">
                                       <p>4</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1534 d114744e1453 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1534 d114744e1453 ">
                                       <p>2</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1534 d114744e1453 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1534 d114744e1453 ">
                                       <p>0</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d114744e1572" headers="d114744e1447 ">
                                       <p>入站</p>
                                    </td>
                                    <td align="left" valign="top" width="24%" headers="d114744e1572 d114744e1450 ">
                                       <p>WebSphere MQ</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1572 d114744e1453 ">
                                       <p>0</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1572 d114744e1453 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1572 d114744e1453 ">
                                       <p>2</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1572 d114744e1453 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1572 d114744e1453 ">
                                       <p>4</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1572 d114744e1453 ">
                                       <p>五</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1572 d114744e1453 ">
                                       <p>6</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1572 d114744e1453 ">
                                       <p>7</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1572 d114744e1453 ">
                                       <p>8</p>
                                    </td>
                                    <td align="left" valign="top" width="5%" headers="d114744e1572 d114744e1453 ">
                                       <p>9</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnote" id="GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596__GUID-E0DF9AC7-07FA-4BDE-B26F-A02D8B154B95">
                           <p class="notep1">注意：</p>
                           <p>对于出站传播，小于0的Oracle数据库高级队列优先级值将映射到WebSphere MQ优先级9，而大于9的Oracle数据库高级队列优先级值将映射到WebSphere MQ优先级0。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADQUE3369"></a><div class="props_rev_3"><a id="GUID-2BFEBC14-55C8-4B1A-BF46-C7C0BC82F268" name="GUID-2BFEBC14-55C8-4B1A-BF46-C7C0BC82F268"></a><h4 id="ADQUE-GUID-2BFEBC14-55C8-4B1A-BF46-C7C0BC82F268" class="sect4"><span class="enumeration_section">20.2.2</span> WebSphere MQ Outbound Propagation</h4>
                  <div>
                     <p>如果没有为出站传播提供消息转换，则Oracle数据库高级队列源队列有效内容类型必须为<code class="codeph">SYS.MGW_BASIC_MSG_T</code>或<code class="codeph">RAW</code> 。如果指定了消息转换，则转换的目标ADT必须为<code class="codeph">SYS.MGW_BASIC_MSG_T</code> ，但源ADT可以是Oracle Database Advanced Queuing支持的任何ADT。
                     </p>
                     <p>如果Oracle数据库高级队列队列有效负载是RAW，则生成的WebSphere MQ消息将消息体设置为RAW字节的值，并且默认情况下， <code class="codeph">format</code>字段设置为值“ <code class="codeph">MGW_Byte</code> ”。
                     </p>
                     <p>如果Oracle数据库高级队列队列有效负载或转换目标ADT为<code class="codeph">SYS.MGW_BASIC_MSG_T</code> ，则消息将映射到WebSphere MQ本机消息，如下所示：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>WebSphere MQ固定标头字段基于规范消息的内部Oracle数据库高级排队消息属性和<code class="codeph">SYS.MGW_BASIC_MSG_T.header</code>属性，如<span class="q">“ <a href="omg-message-conversion.html#GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596">WebSphere MQ消息标头映射</a> ”中所述</span> 。
                           </p>
                        </li>
                        <li>
                           <p>如果规范消息具有<code class="codeph">TEXT</code>主体，则WebSphere MQ格式头字段设置为<code class="codeph">MQFMT_STRING</code>除非<code class="codeph">MGW_MQ_format</code>属性<code class="codeph">MGW_MQ_format</code>覆盖。邮件正文被视为文本。
                           </p>
                        </li>
                        <li>
                           <p>如果规范消息具有<code class="codeph">RAW</code>主体，则WebSphere MQ格式头字段设置为“ <code class="codeph">MGW_Byte</code> ”，除非<code class="codeph">MGW_MQ_format</code>属性<code class="codeph">MGW_MQ_format</code>覆盖。消息正文被视为原始字节。
                           </p>
                        </li>
                        <li>
                           <p>如果规范消息同时具有<code class="codeph">TEXT</code>和<code class="codeph">RAW</code>正文，则消息转换失败。
                           </p>
                        </li>
                        <li>
                           <p>如果规范消息既没有<code class="codeph">TEXT</code>也没有<code class="codeph">RAW</code>主体，则没有设置消息体，并且WebSphere MQ格式头字段是<code class="codeph">MQFMT_NONE</code> 。</p>
                        </li>
                        <li>
                           <p>如果规范消息具有设置了小值和大值的<code class="codeph">TEXT</code>主体（ <code class="codeph">SYS.MGW_BASIC_MSG_T.TEXT_BODY.small_value</code>和<code class="codeph">SYS.MGW_BASIC_MSG_T.TEXT_BODY.large_value</code>不为空），则消息转换失败。
                           </p>
                        </li>
                        <li>
                           <p>如果规范消息具有设置了小值和大值的<code class="codeph">RAW</code>正文（ <code class="codeph">SYS.MGW_BASIC_MSG_T.RAW_BODY.small_value</code>和<code class="codeph">SYS.MGW_BASIC_MSG_T.RAW_BODY.large_value</code>不为空），则消息转换失败。
                           </p>
                        </li>
                     </ul>
                     <p>如果使用值<code class="codeph">TRUE</code>指定作业选项<code class="codeph">PreserveMessageID</code> ，那么WebSphere消息头的<code class="codeph">correlationId</code>字段将设置为AQ源消息标识符。<code class="codeph">correlationId</code>值将是<code class="codeph">"AQMSGID:"+</code> <span class="italic"><code class="codeph">AQ_msgid</code></span>形式的24字节值，其中<span class="italic"><code class="codeph">AQ_msgid</code></span>表示16字节的数据库AQ消息标识符。
                     </p>
                  </div>
               </div><a id="ADQUE3370"></a><div class="props_rev_3"><a id="GUID-D87B9C19-8B88-47E6-B45A-703C78BAACDB" name="GUID-D87B9C19-8B88-47E6-B45A-703C78BAACDB"></a><h4 id="ADQUE-GUID-D87B9C19-8B88-47E6-B45A-703C78BAACDB" class="sect4"><span class="enumeration_section">20.2.3</span> WebSphere MQ入站传播</h4>
                  <div>
                     <p>如果没有为入站传播提供消息转换，则Oracle数据库高级队列目标队列有效内容类型必须为<code class="codeph">SYS.MGW_BASIC_MSG_T</code>或<code class="codeph">RAW</code> 。如果指定了消息转换，则转换的源ADT必须为<code class="codeph">SYS.MGW_BASIC_MSG_T</code> ，但目标ADT可以是Oracle Database Advanced Queuing支持的任何ADT。
                     </p>
                     <p>如果Oracle数据库高级队列队列有效内容为<code class="codeph">RAW</code>且传入的WebSphere MQ消息的<code class="codeph">format</code>为<code class="codeph">MQFMT_STRING</code> ，则消息转换将失败。否则，消息体被视为原始字节，并直接排入目标队列。如果字节数大于32KB，则消息转换失败。实际限制是32512字节而不是32767字节。
                     </p>
                     <p>如果Oracle数据库高级队列队列有效负载或转换源ADT是<code class="codeph">SYS.MGW_BASIC_MSG_T</code> ，那么WebSphere MQ消息将映射到<code class="codeph">SYS.MGW_BASIC_MSG_T</code>消息，如下所示：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如前所述，特定的WebSphere MQ头字段映射到Oracle数据库高级队列消息属性。</p>
                        </li>
                        <li>
                           <p>规范消息的<code class="codeph">SYS.MGW_BASIC_MSG_T.header</code>属性根据WebSphere MQ头字段设置为{name，value}对，如<a href="omg-message-conversion.html#GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596__G1011356" title="行对应于Messaging Gateway名称。第一列是名称，第二列是其Messaging Gateway类型，第三列是相应的WebSphere MQ属性名称，第四列指示它的用途。">表20-1中所述</a> 。这些值保留WebSphere MQ消息头的原始内容。
                           </p>
                        </li>
                        <li>
                           <p>如果WebSphere MQ <code class="codeph">format</code>头字段是<code class="codeph">MQFMT_STRING</code> ，那么WebSphere MQ消息体将被视为文本，其值将映射到<code class="codeph">SYS.MGW_BASIC_MSG_T.text_body</code> 。对于任何其他<code class="codeph">format</code>值，消息正文将被视为原始字节，其值将映射到<code class="codeph">SYS.MGW_BASIC_MSG_T.raw_body</code> 。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-D87B9C19-8B88-47E6-B45A-703C78BAACDB__GUID-32D97C47-C582-4642-A646-5FBCBCF5D46D">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="omg-message-conversion.html#GUID-E5C2D5DE-A2B3-4704-8F5E-3911B7018596">WebSphere MQ消息头映射</a> ”</span></p>
                     </div>
                  </div>
               </div>
            </div><a id="ADQUE3372"></a><a id="ADQUE3373"></a><a id="ADQUE3371"></a><div class="props_rev_3"><a id="GUID-E4267AE0-B912-490A-98E0-0009719FEC36" name="GUID-E4267AE0-B912-490A-98E0-0009719FEC36"></a><h3 id="ADQUE-GUID-E4267AE0-B912-490A-98E0-0009719FEC36" class="sect3"><span class="enumeration_section">20.3</span> TIB / Rendezvous的消息转换</h3>
               <div>
                  <p>MGW将TIB / Rendezvous消息视为一组字段和补充信息。<a href="omg-message-conversion.html#GUID-E4267AE0-B912-490A-98E0-0009719FEC36__i1007171">图20-4</a>显示了如何在MGW和TIB / Rendezvous之间转换消息。
                  </p>
                  <div class="figure" id="GUID-E4267AE0-B912-490A-98E0-0009719FEC36__i1007171">
                     <p class="titleinfigure">图20-4 TIB / Rendezvous的消息转换</p><img width="464" src="img/adque447.gif" alt="下面是图20-4的描述" title="下面是图20-4的描述" longdesc="img_text/adque447.html"><br><a href="img_text/adque447.html">“图20-4 TIB / Rendezvous的消息转换”的描述</a></div>
                  <!-- class="figure" -->
                  <p>当消息转换失败时，消息将移动到异常队列（如果已提供），以便MGW可以继续传播源队列中的其余消息。在来自TIB / Rendezvous的入站传播中，异常队列是已注册的主题。</p>
                  <p>除了具有无符号整数和嵌套消息类型的数据类型之外，支持TIB / Rendezvous字段的所有TIB / Rendezvous有线格式数据类型。此版本不支持用户定义的自定义数据类型。如果消息包含不受支持的数据类型的数据，则在处理消息时会发生消息转换失败。如果提供了异常队列，则消息转换失败会导致将失败的消息从源队列移动到异常队列。</p>
                  <p><a href="omg-message-conversion.html#GUID-E4267AE0-B912-490A-98E0-0009719FEC36__BABECCJE" title="第一列是TIB / Rendezvous Wire Format，第二列是相应的Oracle Type，第三列是相应的ADT Field Type。">表20-3</a>显示了MGW在本机TIB / Rendezvous消息与规范ADT之间进行转换时使用的数据类型映射。对于每种受支持的TIB / Rendezvous有线格式类型，它显示用于存储数据的Oracle类型和表示该类型的<code class="codeph">DBMS_MGWMSG</code>常量。
                  </p>
                  <div class="tblformal" id="GUID-E4267AE0-B912-490A-98E0-0009719FEC36__BABECCJE">
                     <p class="titleintable">表20-3 TIB / Rendezvous数据类型映射</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="TIB / Rendezvous数据类型映射" width="100%" border="1" summary="The first column is the TIB/Rendezvous Wire Format, the second column is the corresponding Oracle Type, and the third column is the corresponding ADT Field Type." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="25%" id="d114744e2015">TIB / Rendezvous Wire格式</th>
                              <th align="left" valign="bottom" width="41%" id="d114744e2018">Oracle Type</th>
                              <th align="left" valign="bottom" width="34%" id="d114744e2021">ADT字段类型</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2026" headers="d114744e2015 ">
                                 <p><code class="codeph">布尔</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2026 d114744e2018 ">
                                 <p><code class="codeph">数</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2026 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_BOOL</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2042" headers="d114744e2015 ">
                                 <p><code class="codeph">F32</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2042 d114744e2018 ">
                                 <p><code class="codeph">数</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2042 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_F32</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2058" headers="d114744e2015 ">
                                 <p><code class="codeph">F64</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2058 d114744e2018 ">
                                 <p><code class="codeph">数</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2058 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_F64</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2074" headers="d114744e2015 ">
                                 <p><code class="codeph">I8</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2074 d114744e2018 ">
                                 <p><code class="codeph">数</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2074 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_I8</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2090" headers="d114744e2015 ">
                                 <p><code class="codeph">I16</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2090 d114744e2018 ">
                                 <p><code class="codeph">数</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2090 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_I16</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2106" headers="d114744e2015 ">
                                 <p><code class="codeph">I32</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2106 d114744e2018 ">
                                 <p><code class="codeph">数</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2106 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_I32</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2122" headers="d114744e2015 ">
                                 <p><code class="codeph">I64</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2122 d114744e2018 ">
                                 <p><code class="codeph">数</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2122 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_I64</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2138" headers="d114744e2015 ">
                                 <p><code class="codeph">U8</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2138 d114744e2018 ">
                                 <p>不支持</p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2138 d114744e2021 ">
                                 <p>不支持</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2150" headers="d114744e2015 ">
                                 <p><code class="codeph">U16</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2150 d114744e2018 ">
                                 <p>不支持</p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2150 d114744e2021 ">
                                 <p>不支持</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2162" headers="d114744e2015 ">
                                 <p><code class="codeph">U32</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2162 d114744e2018 ">
                                 <p>不支持</p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2162 d114744e2021 ">
                                 <p>不支持</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2174" headers="d114744e2015 ">
                                 <p><code class="codeph">U64</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2174 d114744e2018 ">
                                 <p>不支持</p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2174 d114744e2021 ">
                                 <p>不支持</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2187" headers="d114744e2015 ">
                                 <p><code class="codeph">IPADDR32</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2187 d114744e2018 ">
                                 <p><code class="codeph">VARCHAR2</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2187 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_IPADDR32</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2203" headers="d114744e2015 ">
                                 <p><code class="codeph">IPPORT16</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2203 d114744e2018 ">
                                 <p><code class="codeph">数</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2203 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_IPPORT16</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2219" headers="d114744e2015 ">
                                 <p><code class="codeph">约会时间</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2219 d114744e2018 ">
                                 <p><code class="codeph">日期</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2219 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_DATETIME</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2235" headers="d114744e2015 ">
                                 <p><code class="codeph">F32ARRAY</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2235 d114744e2018 ">
                                 <p><code class="codeph">SYS.MGW_NUMBER_ARRAY_T</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2235 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_F32ARRAY</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2251" headers="d114744e2015 ">
                                 <p><code class="codeph">F64ARRAY</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2251 d114744e2018 ">
                                 <p><code class="codeph">SYS.MGW_NUMBER_ARRAY_T</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2251 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_F64ARRAY</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2267" headers="d114744e2015 ">
                                 <p><code class="codeph">I8ARRAY</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2267 d114744e2018 ">
                                 <p><code class="codeph">SYS.MGW_NUMBER_ARRAY_T</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2267 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_I8ARRAY</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2283" headers="d114744e2015 ">
                                 <p><code class="codeph">I16ARRAY</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2283 d114744e2018 ">
                                 <p><code class="codeph">SYS.MGW_NUMBER_ARRAY_T</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2283 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_I16ARRAY</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2299" headers="d114744e2015 ">
                                 <p><code class="codeph">I32ARRAY</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2299 d114744e2018 ">
                                 <p><code class="codeph">SYS.MGW_NUMBER_ARRAY_T</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2299 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_I32ARRAY</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2315" headers="d114744e2015 ">
                                 <p><code class="codeph">I64ARRAY</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2315 d114744e2018 ">
                                 <p><code class="codeph">SYS.MGW_NUMBER_ARRAY_T</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2315 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_I64ARRAY</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2331" headers="d114744e2015 ">
                                 <p><code class="codeph">U8ARRAY</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2331 d114744e2018 ">
                                 <p>不支持</p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2331 d114744e2021 ">
                                 <p>不支持</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2343" headers="d114744e2015 ">
                                 <p><code class="codeph">U16ARRAY</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2343 d114744e2018 ">
                                 <p>不支持</p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2343 d114744e2021 ">
                                 <p>不支持</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2356" headers="d114744e2015 ">
                                 <p><code class="codeph">U32ARRAY</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2356 d114744e2018 ">
                                 <p>不支持</p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2356 d114744e2021 ">
                                 <p>不支持</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2368" headers="d114744e2015 ">
                                 <p><code class="codeph">U64ARRAY</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2368 d114744e2018 ">
                                 <p>不支持</p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2368 d114744e2021 ">
                                 <p>不支持</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2380" headers="d114744e2015 ">
                                 <p><code class="codeph">味精</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2380 d114744e2018 ">
                                 <p>不支持</p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2380 d114744e2021 ">
                                 <p>不支持</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2392" headers="d114744e2015 ">
                                 <p><code class="codeph">不透明</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2392 d114744e2018 ">
                                 <p><code class="codeph">RAW</code>或<code class="codeph">BLOB</code></p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2392 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_OPAQUE</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2410" headers="d114744e2015 ">
                                 <p><code class="codeph">串</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2410 d114744e2018 ">
                                 <p><code class="codeph">VARCHAR2</code>或<code class="codeph">CLOB</code></p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2410 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_STRING</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="25%" id="d114744e2428" headers="d114744e2015 ">
                                 <p><code class="codeph">XML</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="41%" headers="d114744e2428 d114744e2018 ">
                                 <p><code class="codeph">RAW</code>或<code class="codeph">BLOB</code></p>
                              </td>
                              <td align="left" valign="top" width="34%" headers="d114744e2428 d114744e2021 ">
                                 <p><code class="codeph">TIBRVMSG_XML</code> 
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>对于Oracle数据库高级队列和TIB / Rendezvous之间的传播，MGW直接支持Oracle数据库高级队列有效负载类型<code class="codeph">RAW</code>和<code class="codeph">SYS.MGW_TIBRV_MSG_T</code> 。要支持任何其他Oracle Database Advanced Queuing有效内容类型，您必须提供转换。
                  </p>
               </div><a id="ADQUE3375"></a><a id="ADQUE3376"></a><a id="ADQUE3374"></a><div class="props_rev_3"><a id="GUID-D544BA3A-B85A-4A6F-82E5-68D088C2966B" name="GUID-D544BA3A-B85A-4A6F-82E5-68D088C2966B"></a><h4 id="ADQUE-GUID-D544BA3A-B85A-4A6F-82E5-68D088C2966B" class="sect4"><span class="enumeration_section">20.3.1</span> TIB / Rendezvous的AQ消息属性映射</h4>
                  <div>
                     <p>本节介绍Oracle Database AQ消息属性与TIB / Rendezvous字段之间的映射。此映射用于在出站传播期间保留数据库AQ消息属性，并在入站传播期间设置数据库AQ消息属性。</p>
                     <p><a href="omg-message-conversion.html#GUID-D544BA3A-B85A-4A6F-82E5-68D088C2966B__G1011586" title="行对应于Oracle Streams AQ消息属性。第一列是消息属性名称，第二列是相应的消息传递网关名称，第三列是相应的TIB / Rendezvous线路格式数据类型，第四列指示它的用途。">表20-4</a>描述了使用TIB / Rendezvous字段支持的Database AQ消息属性。第一列指示Database AQ消息属性的<code class="codeph">DBMS_AQ.MESSAGE_PROPERTIES_T</code>字段。第二列和第三列指示用于TIB / Rendezvous字段的名称和数据类型。最后一列指示入站和出站传播是否支持消息属性。
                     </p>
                     <div class="tblformalwide" id="GUID-D544BA3A-B85A-4A6F-82E5-68D088C2966B__G1011586">
                        <p class="titleintable">表20-4 Oracle数据库高级队列消息属性的TIB / Rendezvous和MGW名称</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="Oracle数据库高级队列消息属性的TIB / Rendezvous和MGW名称" width="100%" border="1" summary="Rows correspond to Oracle Streams AQ message properties. The first column is the message property name, the second column is the corresponding Messaging Gateway name, the third column is the corresponding TIB/Rendezvous wire format datatype, and the fourth column indicates what it is used for." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="21%" id="d114744e2531">Oracle数据库高级队列消息属性</th>
                                 <th align="left" valign="bottom" width="32%" id="d114744e2534">MGW名称</th>
                                 <th align="left" valign="bottom" width="24%" id="d114744e2537">TIB / Rendezvous Wire格式数据类型</th>
                                 <th align="left" valign="bottom" width="23%" id="d114744e2540">用于</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d114744e2545" headers="d114744e2531 ">
                                    <p><code class="codeph">优先</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d114744e2545 d114744e2534 ">
                                    <p><code class="codeph">MGW_AQ_priority</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d114744e2545 d114744e2537 ">
                                    <p><code class="codeph">TibrvMsg。I32</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d114744e2545 d114744e2540 ">
                                    <p>出境，入境</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d114744e2564" headers="d114744e2531 ">
                                    <p><code class="codeph">呼气</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d114744e2564 d114744e2534 ">
                                    <p><code class="codeph">MGW_AQ_expiration</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d114744e2564 d114744e2537 ">
                                    <p><code class="codeph">TibrvMsg。I32</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d114744e2564 d114744e2540 ">
                                    <p>出境，入境</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d114744e2583" headers="d114744e2531 ">
                                    <p><code class="codeph">延迟</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d114744e2583 d114744e2534 ">
                                    <p><code class="codeph">MGW_AQ_delay</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d114744e2583 d114744e2537 ">
                                    <p><code class="codeph">TibrvMsg。I32</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d114744e2583 d114744e2540 ">
                                    <p>出境，入境</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d114744e2602" headers="d114744e2531 ">
                                    <p><code class="codeph">相关</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d114744e2602 d114744e2534 ">
                                    <p><code class="codeph">MGW_AQ_correlation</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d114744e2602 d114744e2537 ">
                                    <p><code class="codeph">TibrvMsg。串</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d114744e2602 d114744e2540 ">
                                    <p>出境，入境</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d114744e2621" headers="d114744e2531 ">
                                    <p><code class="codeph">exception_queue</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d114744e2621 d114744e2534 ">
                                    <p><code class="codeph">MGW_AQ_exception_queue</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d114744e2621 d114744e2537 ">
                                    <p><code class="codeph">TibrvMsg。串</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d114744e2621 d114744e2540 ">
                                    <p>出境，入境</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d114744e2640" headers="d114744e2531 ">
                                    <p><code class="codeph">enqueue_time</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d114744e2640 d114744e2534 ">
                                    <p><code class="codeph">MGW_AQ_enqueue_time</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d114744e2640 d114744e2537 ">
                                    <p><code class="codeph">TibrvMsg。约会时间</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d114744e2640 d114744e2540 ">
                                    <p>出站</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d114744e2659" headers="d114744e2531 ">
                                    <p><code class="codeph">original_msgid</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d114744e2659 d114744e2534 ">
                                    <p><code class="codeph">MGW_AQ_original_msgid</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d114744e2659 d114744e2537 ">
                                    <p><code class="codeph">TibrvMsg。不透明</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d114744e2659 d114744e2540 ">
                                    <p>出站</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d114744e2678" headers="d114744e2531 ">
                                    <p><code class="codeph">msgid</code> （1）</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d114744e2678 d114744e2534 ">
                                    <p><code class="codeph">MGW_AQ_messageID</code></p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d114744e2678 d114744e2537 ">
                                    <p><code class="codeph">TibrvMsg。不透明</code></p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d114744e2678 d114744e2540 ">
                                    <p>出站</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D544BA3A-B85A-4A6F-82E5-68D088C2966B__GUID-647C037B-9C84-4222-ACE6-E8BA1E24EC26"><span><a href="omg-message-conversion.html#GUID-D544BA3A-B85A-4A6F-82E5-68D088C2966B__G1011586" title="行对应于Oracle Streams AQ消息属性。第一列是消息属性名称，第二列是相应的消息传递网关名称，第三列是相应的TIB / Rendezvous线路格式数据类型，第四列指示它的用途。">表20-4</a></span>注释：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p><code class="codeph">msgid</code>数据库AQ属性表示数据库AQ消息标识符，而不是<code class="codeph">DBMS_AQ.MESSAGE_PROPERTIES_T</code>记录的特定字段。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADQUE3377"></a><div class="props_rev_3"><a id="GUID-C7B4D8F5-2C02-4A95-8067-8634BBF867CE" name="GUID-C7B4D8F5-2C02-4A95-8067-8634BBF867CE"></a><h4 id="ADQUE-GUID-C7B4D8F5-2C02-4A95-8067-8634BBF867CE" class="sect4"><span class="enumeration_section">20.3.2</span> TIB / Rendezvous出站传播</h4>
                  <div>
                     <p>如果没有为出站传播提供传播转换，则Oracle数据库高级队列源队列有效内容类型必须为<code class="codeph">SYS.MGW_TIBRV_MSG_T</code>或<code class="codeph">RAW</code> 。如果指定了传播转换，则转换的目标ADT必须为<code class="codeph">SYS.MGW_TIBRV_MSG_T</code> ，但源ADT可以是Oracle数据库高级队列支持的任何ADT。
                     </p>
                     <p>如果Oracle数据库高级队列队列有效负载或转换目标ADT为<code class="codeph">SYS.MGW_TIBRV_MSG_T</code> ，则：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>源消息中的每个字段都转换为生成的TIB / Rendezvous消息的TIB / Rendezvous消息字段。</p>
                        </li>
                        <li>
                           <p>如果<code class="codeph">reply_subject</code>属性不为<code class="codeph">NULL</code> ，则设置回复主题补充信息。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">send_subject</code>字段被忽略。
                           </p>
                        </li>
                     </ul>
                     <p>如果Oracle数据库高级队列队列有效负载是<code class="codeph">RAW</code> ，则：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>生成的消息包含名为<code class="codeph">MGW_RAW_MSG</code>的字段，其值为<code class="codeph">TibrvMsg.OPAQUE</code> 。字段ID设置为0。
                           </p>
                        </li>
                     </ul>
                     <p>如果使用值<code class="codeph">TRUE</code>指定作业选项<code class="codeph">AQ_MsgProperties</code> ，则MGW代理将根据<a href="omg-message-conversion.html#GUID-D544BA3A-B85A-4A6F-82E5-68D088C2966B__G1011586" title="行对应于Oracle Streams AQ消息属性。第一列是消息属性名称，第二列是相应的消息传递网关名称，第三列是相应的TIB / Rendezvous线路格式数据类型，第四列指示它的用途。">表20-4</a>生成字段以在TIB / Rendezvous消息中保留Database AQ消息属性。
                     </p>
                     <p>如果指定的<code class="codeph">PreserveMessageID</code>作业选项的值为<code class="codeph">TRUE</code> ，则根据<a href="omg-message-conversion.html#GUID-D544BA3A-B85A-4A6F-82E5-68D088C2966B__G1011586" title="行对应于Oracle Streams AQ消息属性。第一列是消息属性名称，第二列是相应的消息传递网关名称，第三列是相应的TIB / Rendezvous线路格式数据类型，第四列指示它的用途。">表20-4</a>在TIB / Rendezvous消息中保留Database AQ消息标识符（ <code class="codeph">msgid</code> ）。
                     </p>
                  </div>
               </div><a id="ADQUE3378"></a><div class="props_rev_3"><a id="GUID-06285C61-BB1C-4715-9224-B92132B665EC" name="GUID-06285C61-BB1C-4715-9224-B92132B665EC"></a><h4 id="ADQUE-GUID-06285C61-BB1C-4715-9224-B92132B665EC" class="sect4"><span class="enumeration_section">20.3.3</span> TIB / Rendezvous入站传播</h4>
                  <div>
                     <p>如果没有为入站传播提供传播转换，则Oracle数据库高级队列目标队列有效内容类型必须为<code class="codeph">RAW</code>或<code class="codeph">SYS.MGW_TIBRV_MSG_T</code> 。如果指定了传播转换，则转换的目标ADT可以是Oracle数据库高级队列支持的任何ADT，但转换的源ADT必须是<code class="codeph">SYS.MGW_TIBRV_MSG_T</code> 。</p>
                     <p>如果Oracle数据库高级队列队列有效负载或转换源ADT为<code class="codeph">SYS.MGW_TIBRV_MSG_T</code> ，则：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>源TIB / Rendezvous消息中的每个字段都将转换为<code class="codeph">SYS.MGW_TIBRV_MSG_T</code>类型的结果消息的<code class="codeph">SYS.MGW_TIBRV_MSG_T</code> 。
                           </p>
                        </li>
                        <li>
                           <p>该MGW剂提取从源TIB /楼台消息发送主题名称和设置<code class="codeph">send_subject</code>在属性<code class="codeph">SYS.MGW_TIBRV_MSG_T</code> 。发送主题名称通常与注册的传播源队列的主题名称相同，但在使用通配符时可能会有所不同。
                           </p>
                        </li>
                        <li>
                           <p>该MGW剂从源TIB /楼台消息中提取所述回复主题名称，如果它存在，并设置<code class="codeph">reply_subject</code>在属性<code class="codeph">SYS.MGW_TIBRV_MSG_T</code> 。</p>
                        </li>
                        <li>
                           <p>如果源TIB / Rendezvous消息包含三个以上的大文本字段（大于4000字节的文本）或三个以上的大字节字段（大于2000字节），则消息转换将失败。</p>
                        </li>
                     </ul>
                     <p>如果Oracle数据库高级队列队列有效负载是<code class="codeph">RAW</code> ，则：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果源TIB / Rendezvous消息具有类型为<code class="codeph">MGW_RAW_MSG</code>的<code class="codeph">TibrvMsg.字段，则Oracle数据库高级队列消息有效内容是字段数据<code class="codeph">TibrvMsg.OPAQUE</code>或<code class="codeph">TibrvMsg.XML</code> 。字段名称和ID将被忽略。如果不存在此类字段或具有意外类型，则会发生消息转换失败。
                           </p>
                        </li>
                        <li>
                           <p>如果<code class="codeph">RAW</code>数据大小大于32KB，则会发生消息转换失败。这是由于对绑定变量允许的数据大小的限制。此外，实际限制是32512而不是32767。
                           </p>
                        </li>
                     </ul>
                     <p>如果使用值<code class="codeph">TRUE</code>指定作业选项<code class="codeph">AQ_MsgProperties</code> ，则MGW代理将使用保留字段名称搜索原始TIB / Rendezvous消息中的字段。<a href="omg-message-conversion.html#GUID-D544BA3A-B85A-4A6F-82E5-68D088C2966B__G1011586" title="行对应于Oracle Streams AQ消息属性。第一列是消息属性名称，第二列是相应的消息传递网关名称，第三列是相应的TIB / Rendezvous线路格式数据类型，第四列指示它的用途。">表20-4</a>显示了字段名称字符串以及TIB / Rendezvous消息中使用的相应值。
                     </p>
                     <p>如果存在此类字段，则MGW代理使用字段值来设置相应的Oracle数据库高级队列消息属性，而不是使用默认值。如果有多个具有相同名称的此类字段，则仅使用第一个字段。仅当Oracle数据库高级队列队列有效负载为<code class="codeph">RAW</code>才会从生成的有效负载中删除此类字段。如果具有保留名称的字段没有预期的数据类型，则会导致消息转换失败。
                     </p>
                     <div class="infoboxnotealso" id="GUID-06285C61-BB1C-4715-9224-B92132B665EC__GUID-00D98B61-C639-493C-AA50-ECC5363DBCCF">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_MGWMSG.html#ARPLS365" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a>中的“DBMS_MGWMSG”，用于值数据类型</p>
                     </div>
                  </div>
               </div>
            </div><a id="ADQUE3380"></a><a id="ADQUE3381"></a><a id="ADQUE3379"></a><div class="props_rev_3"><a id="GUID-1033A7B8-F827-452E-B491-A65DE6C5712E" name="GUID-1033A7B8-F827-452E-B491-A65DE6C5712E"></a><h3 id="ADQUE-GUID-1033A7B8-F827-452E-B491-A65DE6C5712E" class="sect3"><span class="enumeration_section">20.4</span> JMS消息</h3>
               <div>
                  <p>MGW仅在Oracle JMS和非Oracle JMS系统之间传播JMS消息，而不更改消息内容。<a href="omg-message-conversion.html#GUID-1033A7B8-F827-452E-B491-A65DE6C5712E__i1007470">图20-5</a>显示了JMS消息传播。
                  </p>
                  <p>MGW仅支持标准JMS消息类型。它不支持：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>JMS提供程序扩展，因为目标JMS系统无法识别任何此类扩展。尝试传播任何此类非JMS消息会导致错误。</p>
                     </li>
                     <li>
                        <p>用于JMS传播的用户转换。</p>
                     </li>
                     <li>
                        <p>逻辑变更记录（LCR）的传播。</p>
                     </li>
                  </ul>
                  <div class="figure" id="GUID-1033A7B8-F827-452E-B491-A65DE6C5712E__i1007470">
                     <p class="titleinfigure">图20-5 JMS消息传播</p><img width="592" src="img/adque450.gif" alt="下面是图20-5的描述" title="下面是图20-5的描述" longdesc="img_text/adque450.html"><br><a href="img_text/adque450.html">“图20-5 JMS消息传播”的描述</a></div>
                  <!-- class="figure" -->
                  <p>出于本讨论的目的，JMS消息是实现五个JMS消息接口之一的类的Java对象。<a href="omg-message-conversion.html#GUID-1033A7B8-F827-452E-B491-A65DE6C5712E__g1011642" title="第一列列出JMS消息类型，第二列列出相应的ADT消息类型。">表20-5</a>显示了JMS消息接口和相应的Oracle JMS ADT。该表还显示了接口<code class="codeph">javax.jms.Message</code> ，可以是五种特定类型中的任何一种，以及相应的通用Oracle JMS类型<code class="codeph">SYS.AQ$_JMS_MESSAGE</code> 。</p>
                  <div class="tblformal" id="GUID-1033A7B8-F827-452E-B491-A65DE6C5712E__g1011642">
                     <p class="titleintable">表20-5 Oracle JMS消息转换</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Oracle JMS消息转换" width="100%" border="1" summary="The first column lists JMS message types, and the second column lists corresponding ADT message types." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="48%" id="d114744e3101">JMS消息</th>
                              <th align="left" valign="bottom" width="52%" id="d114744e3104">ADT</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d114744e3109" headers="d114744e3101 ">
                                 <p><code class="codeph">的javax.jms。TextMessage的</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d114744e3109 d114744e3104 ">
                                 <p><code class="codeph">SYS.AQ $ _JMS_TEXT_MESSAGE</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d114744e3120" headers="d114744e3101 ">
                                 <p><code class="codeph">的javax.jms。BytesMessage</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d114744e3120 d114744e3104 ">
                                 <p><code class="codeph">SYS.AQ $ _JMS_BYTES_MESSAGE</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d114744e3131" headers="d114744e3101 ">
                                 <p><code class="codeph">的javax.jms。MapMessage消息</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d114744e3131 d114744e3104 ">
                                 <p><code class="codeph">SYS.AQ $ _JMS_MAP_MESSAGE</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d114744e3142" headers="d114744e3101 ">
                                 <p><code class="codeph">的javax.jms。StreamMessage</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d114744e3142 d114744e3104 ">
                                 <p><code class="codeph">SYS.AQ $ _JMS_STREAM_MESSAGE</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d114744e3153" headers="d114744e3101 ">
                                 <p><code class="codeph">的javax.jms。ObjectMessage</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d114744e3153 d114744e3104 ">
                                 <p><code class="codeph">SYS.AQ $ _JMS_OBJECT_MESSAGE</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="48%" id="d114744e3164" headers="d114744e3101 ">
                                 <p><code class="codeph">的javax.jms。信息</code> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="52%" headers="d114744e3164 d114744e3104 ">
                                 <p><code class="codeph">SYS.AQ $ _JMS_MESSAGE</code> 
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>激活传播作业时，MGW代理会检查Oracle数据库高级队列有效内容类型以查找传播源或目标。如果类型是<a href="omg-message-conversion.html#GUID-1033A7B8-F827-452E-B491-A65DE6C5712E__g1011642" title="第一列列出JMS消息类型，第二列列出相应的ADT消息类型。">表20-5</a>或<code class="codeph">ANYDATA</code>列出的类型之一，则尝试进行消息传播。否则记录异常并且不尝试传播。
                  </p>
                  <p>MGW代理可以将名为<code class="codeph">OracleMGW_OriginalMessageID</code>的JMS <code class="codeph">String</code>属性添加到发送到目标队列的JMS消息，以便保留源消息的原始消息标识符。如果使用值<code class="codeph">TRUE</code>指定<code class="codeph">PreserveMessageID</code>作业选项，则会添加此属性。对于在消息转换失败时移动到异常队列的任何消息，还将添加它。
                  </p>
               </div><a id="ADQUE3382"></a><div class="props_rev_3"><a id="GUID-892DAC10-1C41-49FC-92BF-8AA9C9ED1E89" name="GUID-892DAC10-1C41-49FC-92BF-8AA9C9ED1E89"></a><h4 id="ADQUE-GUID-892DAC10-1C41-49FC-92BF-8AA9C9ED1E89" class="sect4"><span class="enumeration_section">20.4.1</span> JMS出站传播</h4>
                  <div>
                     <p>从Oracle数据库高级队列队列中出列消息时，Oracle JMS会将<a href="omg-message-conversion.html#GUID-1033A7B8-F827-452E-B491-A65DE6C5712E__g1011642" title="第一列列出JMS消息类型，第二列列出相应的ADT消息类型。">表20-5中</a>显示的ADT实例转换为JMS消息。此外，它还可以根据内容将<code class="codeph">ANYDATA</code>实例转换为JMS消息。
                     </p>
                     <p>有效负载类型为<code class="codeph">ANYDATA</code>队列可以保存不映射到JMS消息的消息。MGW无法将此类消息出列。记录错误，并且在删除消息之前，该队列中的消息传播不会继续。
                     </p>
                  </div>
               </div><a id="ADQUE3383"></a><div class="props_rev_3"><a id="GUID-71AB23EA-0551-4E20-9004-A8D1EDDBCAAD" name="GUID-71AB23EA-0551-4E20-9004-A8D1EDDBCAAD"></a><h4 id="ADQUE-GUID-71AB23EA-0551-4E20-9004-A8D1EDDBCAAD" class="sect4"><span class="enumeration_section">20.4.2</span> JMS入站传播</h4>
                  <div>
                     <p>使用WebSphere MQ JMS成功出列的每条消息都是JMS消息。在使用Oracle JMS排队之前，不需要进行任何消息转换。但是，如果传播目标的有效负载ADT不接受入站消息的类型，则会记录异常并尝试将消息放入异常队列中。此类型不匹配的示例是JMS <code class="codeph">TextMessage</code>和队列有效内容类型<code class="codeph">SYS.AQ$_JMS_BYTES_MESSAGE</code> 。</p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
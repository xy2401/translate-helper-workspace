<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="There are several ways to access and manipulate data in Oracle XML DB Repository, including using standard protocols such as FTP and HTTP(S)/WebDAV; Oracle XML DB resource Application Program Interfaces (APIs); and the repository views RESOURCE_VIEW and PATH_VIEW."></meta>
      <meta name="description" content="There are several ways to access and manipulate data in Oracle XML DB Repository, including using standard protocols such as FTP and HTTP(S)/WebDAV; Oracle XML DB resource Application Program Interfaces (APIs); and the repository views RESOURCE_VIEW and PATH_VIEW."></meta>
      <title>访问Oracle XML DB存储库数据</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Developer&#39;s Guide "></meta>
      <meta property="og:description" content="There are several ways to access and manipulate data in Oracle XML DB Repository, including using standard protocols such as FTP and HTTP(S)/WebDAV; Oracle XML DB resource Application Program Interfaces (APIs); and the repository views RESOURCE_VIEW and PATH_VIEW."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="xml-db-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-30T12:32:42-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96222-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="XML-DB-repository.html" title="Previous" type="text/html"></link>
      <link rel="next" href="configuration-of-XML-DB-repository.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML DB Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADXDB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="XML-DB-repository.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="configuration-of-XML-DB-repository.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="XML-DB-repository.html" property="item" typeof="WebPage"><span property="name">Oracle XML DB存储库</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">访问Oracle XML DB存储库数据</li>
            </ol>
            <a id="GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" name="GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39"></a><a id="ADXDB2000"></a>
            
            <h2 id="ADXDB-GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" class="sect2"><span class="enumeration_chapter">21</span>访问Oracle XML DB存储库数据</h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='accessing-XML-DB-repository-data'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]u003e </style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>此页面上的脚本内容仅用于导航目的，不会以任何方式更改内容。</p>
            </noscript>
            <div>
               <p>在Oracle XML DB Repository中有多种方法可以访问和操作数据，包括使用标准协议，如FTP和HTTP（S）/ WebDAV; Oracle XML DB资源应用程序接口（API）;并且存储库视图<code class="codeph">RESOURCE_VIEW</code>和<code class="codeph">PATH_VIEW</code> 。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-D1B39D2A-2A45-4F19-B7A8-757611F0E921">Oracle XML DB存储库概述</a><br>使用Oracle XML DB Repository，您可以将层次结构中的内容存储在数据库中，而不是传统的关系数据库结构。虽然存储库可以管理任何类型的内容，但它提供了与使用XML内容管理资源相关的专门功能和优化。
                  </li>
                  <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-FD3B8650-EFA3-474E-9DA6-A0A78161DAA0">存储库术语和提供的资源</a><br>Oracle XML DB Repository可以被视为数据库对象而不是文件的文件系统。它是跨所有XML和数据库模式的一组数据库对象，映射到路径名。
                  </li>
                  <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-950100D2-51D0-490F-B82A-A0C45BCCE8AD">Oracle XML DB资源库资源</a><br>Oracle XML DB资源库资源符合Oracle XML DB XML架构<code class="codeph">XDBResource.xsd</code> 。资源中的元素包括持久存储WebDAV定义的属性所需的元素，例如创建日期，修改日期，WebDAV锁，所有者，ACL，语言和字符集。
                  </li>
                  <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6">对存储库资源的导航或路径访问</a><br>Oracle XML DB Repository文件夹支持许多操作系统使用的相同协议标准。这使得存储库文件夹在支持的操作系统环境中充当本机文件夹（目录）。
                  </li>
                  <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-00093774-B340-4178-9E9C-080EC8592098">基于查询的存储库资源访问</a><br>PL / SQL包<code class="codeph">DBMS_XDB_REPOS</code>提供了作用于Oracle XML DB存储库资源的子程序。此API基于公共视图<code class="codeph">RESOURCE_VIEW</code>和<code class="codeph">PATH_VIEW</code> ，它们允许通过FTP和HTTP（S）/ WebDAV等协议对存储库数据进行SQL访问。</li>
                  <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-B663D1C9-894E-4518-B66B-B9D9484819BC">Servlet访问资源库资源</a><br>Oracle XML DB实现了Java Servlet API 2.2版。
                  </li>
                  <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83">存储库资源的操作</a><br>您可以使用Java，PL / SQL，Internet协议和Oracle XML DB Content Connector（ <span class="italic">不建议使用</span> ）对存储在Oracle XML DB存储库资源中的数据进行操作。描述了最常见的操作，以及使用它们所需的数据库权限。
                  </li>
                  <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75">使用SQL访问存储库资源的内容</a><br>在SQL中，您可以使用PL / SQL构造函数<code class="codeph">XDBURIType</code>或使用<code class="codeph">RESOURCE_VIEW</code>和相应的资源文档访问Oracle XML DB Repository中的文档内容。
                  </li>
                  <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-F11DE6D9-61DC-4A55-A3A5-74A3590928A3">访问基于XML模式的文档的内容</a><br>您可以使用与非基于模式的文档相同的方式访问基于XML模式的文档的内容：使用相应的资源文档。或者，您可以在使用Oracle XML DB注册XML模式时定义的默认表中将其作为一行访问。</li>
                  <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-DE0B24FB-D864-4657-B03C-49442F516DA7">更新存储库文档的内容</a><br>您可以使用Internet协议或SQL更新存储在Oracle XML DB存储库中的文档的内容。</li>
                  <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-01E1ED75-26DF-440E-8751-E00FEED2544B">查询RESOURCE_VIEW和PATH_VIEW中的资源</a><br>此处的示例使用<code class="codeph">RESOURCE_VIEW</code>和<code class="codeph">PATH_VIEW</code>以及Oracle SQL函数<code class="codeph">equals_path</code>和<code class="codeph">under_path</code>说明了存储库的文件夹限制查询。
                  </li>
                  <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-C0D75D10-DAB6-4367-A90F-63AF0FC8778D">Oracle XML DB分层存储库索引</a><br>Oracle XML DB使用Oracle XML DB Repository的分层索引来优化存储库的基于路径和文件夹限制的查询的性能。它被实现为Oracle域索引。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="XML-DB-repository.html#GUID-840EBE35-8FC8-4150-9FC8-78442FD1B12B" title="Oracle XML DB Repository允许您对数据进行版本控制，实现和管理安全性，并使用API来访问和操作存储库资源。">Oracle XML DB存储库</a></p>
                  </div>
               </div>
            </div>
            <a id="ADXDB5286"></a><a id="ADXDB5285"></a><div class="props_rev_3"><a id="GUID-D1B39D2A-2A45-4F19-B7A8-757611F0E921" name="GUID-D1B39D2A-2A45-4F19-B7A8-757611F0E921"></a><h3 id="ADXDB-GUID-D1B39D2A-2A45-4F19-B7A8-757611F0E921" class="sect3"><span class="enumeration_section">21.1</span> Oracle XML DB存储库概述</h3>
               <div>
                  <p>使用Oracle XML DB Repository，您可以将层次结构中的内容存储在数据库中，而不是传统的关系数据库结构。虽然存储库可以管理任何类型的内容，但它提供了与使用XML内容管理资源相关的专门功能和优化。</p>
                  <p>关系数据库在管理层次结构和遍历路径或URL方面传统上很差。 Oracle XML DB Repository为您提供数据库中XML内容的分层组织。您可以像使用文件和文件夹组织一样查询和管理它。</p>
                  <p>关系表 - 行 - 列隐喻是用于管理高度结构化数据的有效模型。它对于管理半结构化和非结构化数据（例如面向文档的XML数据）的效率可能较低。</p>
                  <p>例如，书籍不容易表示为表格中的一组行。将书籍表示为层次结构，书籍 - 章节 - 部分 - 段落，并将层次结构表示为一组文件夹和子文件夹可能更为自然。</p>
                  <p>分层存储库索引可加快文件夹和路径遍历。Oracle XML DB包含一个获得专利的分层索引，可加速Oracle XML DB Repository中的文件夹和路径遍历。分层存储库索引对最终用户是透明的，并允许Oracle XML DB以与传统文件系统相当或更快的速度执行文件夹和路径遍历。</p>
                  <p><a href="accessing-XML-DB-repository-data.html#GUID-D1B39D2A-2A45-4F19-B7A8-757611F0E921__I1044265">图21-1</a>是一个分层结构示例，显示了Oracle XML DB Repository中典型的文件夹和文件树。树的顶部显示<code class="codeph">/</code> ，根文件夹。
                  </p>
                  <div class="figure" id="GUID-D1B39D2A-2A45-4F19-B7A8-757611F0E921__I1044265">
                     <p class="titleinfigure">图21-1文件夹树，显示存储库中的层次结构</p><img src="img/adxdb004.gif" width="593" alt="下面是图21-1的描述" title="下面是图21-1的描述" longdesc="img_text/adxdb004.html"><br><a href="img_text/adxdb004.html">“图21-1文件夹树，在存储库中显示分层结构”的描述</a></div>
                  <!-- class="figure" -->
                  <div class="infoboxnote" id="GUID-D1B39D2A-2A45-4F19-B7A8-757611F0E921__GUID-2FFD4B23-3914-4D25-B3F2-BBFE00859E30">
                     <p class="notep1">警告：</p>
                     <p>Oracle XML DB使用Folder <code class="codeph">/sys</code>来维护<span class="italic">系统定义的</span> XML模式，访问控制列表（ACL）等。<span class="italic">不要</span>添加或文件夹修改任何数据<code class="codeph">/sys</code> 。
                     </p>
                  </div>
                  <p>除了语言SQL，PL / SQL，Java和C之外，您的应用程序还可以使用标准的连接访问协议（如FTP，HTTP（S）和WebDAV）访问Oracle XML DB存储库中的内容.Oracle XML DB添加了本机支持用于这些协议的Oracle数据库，专为以文档为中心的操作而设计。通过提供对这些协议的支持，Oracle XML DB允许Microsoft Windows资源管理器，Microsoft Office以及Altova和Adobe等供应商的产品直接使用存储在存储库中的XML内容。</p>
                  <p>通过存储库，您可以直接访问存储在Oracle数据库中的XML内容，就好像它存储在文件系统中一样。您可以设置存储库文件和文件夹的访问控制权限。</p>
                  <p>这些功能是可用的，因为存储库是在<strong class="term">WebDAV</strong>上建模的， <strong class="term">WebDAV</strong>是一种IETF标准，它定义了HTTP协议的一组扩展。WebDAV允许HTTP服务器充当启用DAV的客户端的文件服务器。例如，启用WebDAV的编辑器可以与HTTP / WebDAV服务器交互，就像它是文件系统一样。
                  </p>
                  <p>WebDAV标准使用术语<strong class="term">资源</strong>来描述文件或文件夹。由WebDAV服务器管理的每个资源都由URL标识。资源不仅包含内容，还包含关联的元数据。
                  </p>
                  <p>以下主题介绍如何使用标准协议访问Oracle XML DB Repository文件夹中的数据。他们讨论了可用于使用Java，SQL和PL / SQL访问存储库对象层次结构的API。</p>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-C0C5F058-2CCE-4B11-9A79-4FD45D71AB7B">Oracle XML DB提供名称级锁定</a><br>Oracle XML DB Repository的一个关键优势是能够在逻辑事务的上下文中使用SQL进行存储库操作。应用程序可以创建包含多个文件夹更新的长时间运行的事务。为了提供高级别的并发性，存储库使用名称级锁定而不是文件夹级锁定</li>
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-8DB9F05C-269A-48B2-BAE3-0B3FAA25B8D7">访问Oracle XML DB资源库资源的两种方法</a><br>您可以使用具有特殊视图的SQL或使用分层索引导航路径来访问和操作Oracle XML DB存储库资源。
                     </li>
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-D2F0823F-0677-45D1-B51C-485E0A48D309">数据库架构（用户帐户）XDB和Oracle XML DB存储库</a><br>数据库模式（用户帐户） <code class="codeph">XDB</code>拥有<code class="codeph">XMLType</code>表<code class="codeph">XDB$RESOURCE</code> ，其中包含Oracle XML DB Repository中的所有资源（文件和文件夹）。它还包含用于管理存储库的所有<span class="italic">元数据</span> 。
                     </li>
                  </ul>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" title="预定义的公共视图RESOURCE_VIEW和PATH_VIEW提供对Oracle XML DB存储库数据的访问。您可以使用Oracle SQL函数under_path和equals_path根据其路径名查询资源，并使用函数path和depth来返回资源路径名和深度。">使用RESOURCE_VIEW和PATH_VIEW进行存储库访问</a></li>
                        <li><a href="PLSQL-access-to-XML-DB-repository.html#GUID-04D3270F-1AC3-407B-B730-6B5A93AA5D7C" title="PL / SQL包DBMS_XDB_CONFIG和DBMS_XDB_REPOS一起为PL / SQL提供Oracle XML DB资源应用程序接口（API）。您可以使用前者配置Oracle XML DB及其存储库。您使用后者在存储库上执行其他非配置操作。">PL / SQL访问Oracle XML DB存储库</a></li>
                        <li><a href="repository-access-control.html#GUID-CD4A712D-CCA2-4A19-909E-AEC57849A55A" title="Oracle数据库提供经典的数据库安全性，例如数据库用户的行级和列级安全访问。它还为Oracle XML DB Repository中的资源提供了细粒度的访问控制。您可以创建，设置和修改访问控制列表（ACL）。">存储库访问控制</a></li>
                        <li><a href="repository-access-using-protocols.html#GUID-0476309D-E3DF-4C56-BF21-68CD04D00C98" title="您可以使用FTP和HTTP（S）/ WebDAV协议访问Oracle XML DB存储库数据。">使用协议的存储库访问</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" title="在Oracle XML DB Repository中有多种方法可以访问和操作数据，包括使用标准协议，如FTP和HTTP（S）/ WebDAV; Oracle XML DB资源应用程序接口（API）;并且存储库视图RESOURCE_VIEW和PATH_VIEW。">访问Oracle XML DB存储库数据</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB4176"></a><div class="props_rev_3"><a id="GUID-C0C5F058-2CCE-4B11-9A79-4FD45D71AB7B" name="GUID-C0C5F058-2CCE-4B11-9A79-4FD45D71AB7B"></a><h4 id="ADXDB-GUID-C0C5F058-2CCE-4B11-9A79-4FD45D71AB7B" class="sect4"><span class="enumeration_section">21.1.1</span> Oracle XML DB提供名称级锁定</h4>
                  <div>
                     <p>Oracle XML DB Repository的一个关键优势是能够在逻辑事务的上下文中使用SQL进行存储库操作。应用程序可以创建包含多个文件夹更新的长时间运行的事务。为了提供高级别的并发性，存储库使用名称级锁定而不是文件夹级锁定</p>
                     <p>使用关系数据库维护分层文件夹结构时，在添加和删除文件夹中的项目时确保高度并发性是一项挑战。在传统的文件系统中，没有交易的概念。每个操作（添加文件，创建子文件夹，重命名文件，删除文件等）都被视为原子事务。操作完成后，文件系统的所有其他用户立即可以进行更改。</p>
                     <p>在这种情况下，对每个更新的文件夹或目录树进行独占锁定的传统锁定策略将很快导致严重的并发问题。Oracle XML DB通过提供名称级锁定而不是文件夹级锁定来解决此问题。存储库操作（如创建，重命名，移动或删除子文件夹或文件）不要求在目标文件夹上为您的操作授予独占写锁。存储库通过锁定文件夹中的名称而不是文件夹本身来管理并发文件夹操作。名称和修改类型放在队列中。</p>
                     <p>仅在提交事务时才锁定文件夹并修改其内容。因此，Oracle XML DB允许多个应用程序对文件夹的内容执行并发更新。该队列还用于通过阻止两个应用程序创建具有相同名称的对象来管理文件夹并发性。</p>
                     <p>在对同一事务中的单个文件夹进行大量更改时，将文件夹修改排队直到提交时间也会最小化I / O.当多个应用程序在同一目录中快速生成文件时（例如生成跟踪或日志文件时）或维护假脱机目录以进行打印或电子邮件传递时，这非常有用。</p>
                     <div class="infoboxnote" id="GUID-C0C5F058-2CCE-4B11-9A79-4FD45D71AB7B__GUID-27AF7B30-1106-4299-9252-E5960404ECB8">
                        <p class="notep1">注意：</p>
                        <p>作为数据库强制执行的事务语义的结果，在提交事务之前，使用SQL语句创建的文件夹对其他数据库用户<span class="italic">不</span>可见。对Oracle XML DB Repository的<span class="italic">并发</span>访问由用于控制Oracle数据库中的并发性的相同机制控制。存储库与Oracle数据库的集成<span class="italic">为XML内容</span>提供了<span class="italic">强大的管理选项</span> 。
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-D1B39D2A-2A45-4F19-B7A8-757611F0E921" title="使用Oracle XML DB Repository，您可以将层次结构中的内容存储在数据库中，而不是传统的关系数据库结构。虽然存储库可以管理任何类型的内容，但它提供了与使用XML内容管理资源相关的专门功能和优化。">Oracle XML DB存储库概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5287"></a><div class="props_rev_3"><a id="GUID-8DB9F05C-269A-48B2-BAE3-0B3FAA25B8D7" name="GUID-8DB9F05C-269A-48B2-BAE3-0B3FAA25B8D7"></a><h4 id="ADXDB-GUID-8DB9F05C-269A-48B2-BAE3-0B3FAA25B8D7" class="sect4"><span class="enumeration_section">21.1.2</span>访问Oracle XML DB资源库资源的两种方法</h4>
                  <div>
                     <p>您可以使用具有特殊视图的SQL或使用分层索引导航路径来访问和操作Oracle XML DB存储库资源。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>SQL访问。这是使用特殊视图完成的，这些视图公开资源属性和路径名，并将分层访问操作符映射到Oracle XML DB模式。请参阅<a href="accessing-XML-DB-repository-data.html#GUID-00093774-B340-4178-9E9C-080EC8592098" title="PL / SQL包DBMS_XDB_REPOS提供了作用于Oracle XML DB存储库资源的子程序。此API基于公共视图RESOURCE_VIEW和PATH_VIEW，它们允许通过FTP和HTTP（S）/ WebDAV等协议对存储库数据进行SQL访问。">基于查询的对存储库资源的访问</a> 。
                           </p>
                        </li>
                        <li>
                           <p>导航或基于路径的访问。这使用资源的分层索引。每个资源都有一个或多个唯一路径名，以反映其在层次结构中的位置。您可以使用XPath表达式导航到任何存储库资源。</p>
                           <p>可以创建存储库资源作为对数据库中现有<code class="codeph">XMLType</code>对象的引用。您可以使用XPath导航到任何此类数据库对象。请参阅<a href="accessing-XML-DB-repository-data.html#GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6" title="Oracle XML DB Repository文件夹支持许多操作系统使用的相同协议标准。这使得存储库文件夹在支持的操作系统环境中充当本机文件夹（目录）。">存储库资源的导航或路径访问</a> 。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-8DB9F05C-269A-48B2-BAE3-0B3FAA25B8D7__GUID-7B275F75-705A-44FE-BB10-D5862A7FF627">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="getting-started-with-XML-DB.html#GUID-BE3A92AD-5962-4E4B-A2BB-10DE5D5F1013" title="使用Oracle XML DB Repository的应用程序的设计注意事项包括访问方法，安全性需求以及是否需要版本控制。">Oracle XML DB Repository Access</a> ，提供有关选择访问方法的指导</p>
                           </li>
                           <li>
                              <p><a href="accessing-XML-DB-repository-data.html#GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83__BABBJJDI" title="此表描述了用于访问Oracle XML DB存储库的API选项。">表21-3</a>是访问方法的摘要比较</p>
                           </li>
                        </ul>
                     </div>
                     <p>统一资源定位符（URL）用于访问Oracle XML DB资源。URL包括对象的主机名，协议信息，路径名和资源名。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-D1B39D2A-2A45-4F19-B7A8-757611F0E921" title="使用Oracle XML DB Repository，您可以将层次结构中的内容存储在数据库中，而不是传统的关系数据库结构。虽然存储库可以管理任何类型的内容，但它提供了与使用XML内容管理资源相关的专门功能和优化。">Oracle XML DB存储库概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB6114"></a><div class="props_rev_3"><a id="GUID-D2F0823F-0677-45D1-B51C-485E0A48D309" name="GUID-D2F0823F-0677-45D1-B51C-485E0A48D309"></a><h4 id="ADXDB-GUID-D2F0823F-0677-45D1-B51C-485E0A48D309" class="sect4"><span class="enumeration_section">21.1.3</span>数据库模式（用户帐户）XDB和Oracle XML DB存储库</h4>
                  <div>
                     <p>数据库模式（用户帐户） <code class="codeph">XDB</code>拥有<code class="codeph">XMLType</code>表<code class="codeph">XDB$RESOURCE</code> ，其中包含Oracle XML DB Repository中的所有资源（文件和文件夹）。它还包含用于管理存储库的所有<span class="italic">元数据</span> 。
                     </p>
                     <p>数据库模式<code class="codeph">XDB</code>是在Oracle XML DB安装期间创建的。此模式中的主表是一个名为<code class="codeph">XDB$RESOURCE</code>的<code class="codeph">XMLType</code>表，其中包含Oracle XML DB Repository中每个资源（文件或文件夹）的一行。此表中的<strong class="term">文档</strong>称为<strong class="term">资源文档</strong> 。定义Oracle XML DB资源文档结构的XML模式在URL <code class="codeph">"http://xmlns.oracle.com/xdb/XDBResource.xsd</code>下注册。</p>
                     <p>数据库模式（用户） <code class="codeph">XDB</code>拥有的表是<span class="italic">内部的</span> 。Oracle建议如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>创建<span class="italic">专用表空间</span> ，仅供用户<code class="codeph">XDB</code> ，这也适用于Oracle XML DB存储库。确保表空间<span class="italic">不是</span>只读的。
                           </p>
                        </li>
                        <li>
                           <p><span class="italic">不要</span>直接操纵用户拥有的任何表或数据<code class="codeph">XDB</code> 。例如，不要压缩或解压缩它们。
                           </p>
                           <p>仅使用Oracle XML DB提供的PL / SQL子程序和数据库视图对用户<code class="codeph">XDB</code>拥有的任何表或数据执行操作。</p>
                        </li>
                        <li>
                           <p>在任何情况下都<span class="italic">不要解锁</span>用户<code class="codeph">XDB</code> 。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-D2F0823F-0677-45D1-B51C-485E0A48D309__GUID-1A8340AF-DFF6-4392-A85E-1724909C3AF2">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="administration-of-XML-DB.html#GUID-F5072D79-E37E-4A44-B6EE-6CA8951CA232" title="PL / SQL包DBMS_XDB_ADMIN具有用于管理和配置Oracle XML DB和Oracle XML DB存储库的子程序。">包DBMS_XDB_ADMIN</a> ，以获取有关为用户<code class="codeph">XDB</code>和存储库创建专用表空间的信息</p>
                           </li>
                           <li>
                              <p><a href="../dbseg/managing-security-for-oracle-database-users.html#DBSEG-GUID-D3770171-8E64-461C-92A4-045248EE42E1" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-D1B39D2A-2A45-4F19-B7A8-757611F0E921" title="使用Oracle XML DB Repository，您可以将层次结构中的内容存储在数据库中，而不是传统的关系数据库结构。虽然存储库可以管理任何类型的内容，但它提供了与使用XML内容管理资源相关的专门功能和优化。">Oracle XML DB存储库概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5288"></a><div class="props_rev_3"><a id="GUID-FD3B8650-EFA3-474E-9DA6-A0A78161DAA0" name="GUID-FD3B8650-EFA3-474E-9DA6-A0A78161DAA0"></a><h3 id="ADXDB-GUID-FD3B8650-EFA3-474E-9DA6-A0A78161DAA0" class="sect3"><span class="enumeration_section">21.2</span>存储库术语和提供的资源</h3>
               <div>
                  <p>Oracle XML DB Repository可以被视为数据库对象而不是文件的文件系统。它是跨所有XML和数据库模式的一组数据库对象，映射到路径名。</p>
                  <p>存储库是一个连接的，定向的，非循环的<a id="fn_1" name="fn_1" href="#fn_1" the="" graph="" is="" established="" by="" hard="" links="" that="" define="" repository="" structure,="" and="" cycles="" are="" not="" permitted="" using="" links.="" you="" can,="" however,="" introduce="" weak="" see="" links=")" ="" onclick="footdisplay(1, "><sup>Foot 1</sup></a>资源图，具有单个根节点（ <code class="codeph">/</code> ）。图中的每个资源都有一个或多个关联的路径名：存储库支持指向给定资源的多个链接。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-AF65F743-04AD-441F-9B41-582C1D75B0A5">存储库术语</a><br>适用于Oracle XML DB Repository的一些术语包括资源，资源名称，资源内容，文件夹或目录，路径名，路径组件，链接名称，访问控制列表（ACL）和XDBBinary元素。其中一些术语在其他环境中具有共同的同义词。
                     </li>
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-AC561AD3-D956-4A6C-9A7B-9DF803799FCC">预定义的存储库文件和文件夹</a><br>某些文件和文件夹是为Oracle XML DB Repository预定义的。您可以创建其他的供自己使用。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" title="在Oracle XML DB Repository中有多种方法可以访问和操作数据，包括使用标准协议，如FTP和HTTP（S）/ WebDAV; Oracle XML DB资源应用程序接口（API）;并且存储库视图RESOURCE_VIEW和PATH_VIEW。">访问Oracle XML DB存储库数据</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5290"></a><a id="ADXDB5289"></a><div class="props_rev_3"><a id="GUID-AF65F743-04AD-441F-9B41-582C1D75B0A5" name="GUID-AF65F743-04AD-441F-9B41-582C1D75B0A5"></a><h4 id="ADXDB-GUID-AF65F743-04AD-441F-9B41-582C1D75B0A5" class="sect4"><span class="enumeration_section">21.2.1</span>存储库术语</h4>
                  <div>
                     <p>适用于Oracle XML DB Repository的一些术语包括资源，资源名称，资源内容，文件夹或目录，路径名，路径组件，链接名称，访问控制列表（ACL）和XDBBinary元素。其中一些术语在其他环境中具有共同的同义词。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><strong class="term">resource</strong> - 存储库层次结构中的任何对象或节点。资源由统一资源定位符（URL）标识，其中包括对象的路径名和资源名称。
                           </p>
                           <div class="infoboxnotealso" id="GUID-AF65F743-04AD-441F-9B41-582C1D75B0A5__GUID-7DDDE82E-46C8-4576-9E64-CCFD6928317C">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="intro-to-XML-DB.html#GUID-760E25BD-7270-433B-9515-D3DE68748CEC" title="Oracle XML DB Repository是Oracle数据库的一个组件，它允许您使用文件/文件夹/ URL隐喻处理XML数据。">Oracle XML DB存储库：概述</a></p>
                                 </li>
                                 <li>
                                    <p><a href="accessing-XML-DB-repository-data.html#GUID-950100D2-51D0-490F-B82A-A0C45BCCE8AD" title="Oracle XML DB资源库资源符合Oracle XML DB XML架构XDBResource.xsd。资源中的元素包括持久存储WebDAV定义的属性所需的元素，例如创建日期，修改日期，WebDAV锁，所有者，ACL，语言和字符集。">Oracle XML DB资源库资源</a></p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li>
                           <p><strong class="term">folder</strong> - 可以包含其他资源的资源。有时称为<strong class="term">目录</strong> 。
                           </p>
                        </li>
                        <li>
                           <p><strong class="term">路径名</strong> - 表示资源的绝对路径的分层名称。它由表示存储库根目录的斜杠（ <code class="codeph">/</code> ）组成，后跟由斜杠分隔的零个或多个<strong class="term">路径组件</strong> 。路径组件不能只是<code class="codeph">.</code>或<code class="codeph">..</code> ，但句号（ <code class="codeph">.</code> ）可以另外用于路径组件。路径组件由数据库字符集中<span class="italic">除</span>斜杠（ <code class="codeph">/</code> ），反斜杠（ <code class="codeph">\</code> ） <span class="italic">以外</span>的任何字符组成，以及Oracle XML DB配置文件<code class="codeph">xdbconfig.xml</code>指定的那些字符，配置参数<code class="codeph">/xdbconfig/sysconfig/invalid-pathname-chars</code> 。
                           </p>
                        </li>
                        <li>
                           <p><strong class="term">资源名称</strong> （或<strong class="term">链接名称</strong> ） - 其父文件夹中的资源名称。这是路径名的最右边路径组件。资源名称在其直接包含的文件夹中必须是唯一的，并且它们区分大小写。
                           </p>
                        </li>
                        <li>
                           <p><strong class="term">资源内容</strong> - <strong class="term">资源</strong>的正文或数据。这是您将资源视为文件并询问其内容时获得的结果。这始终是<code class="codeph">XMLType</code>类型。
                           </p>
                        </li>
                        <li>
                           <p><strong class="term">访问控制列表</strong> （ACL） - 规则的有序列表，用于指定主体（用户或角色）对一个或多个存储库资源的访问权限。
                           </p>
                           <div class="infoboxnotealso" id="GUID-AF65F743-04AD-441F-9B41-582C1D75B0A5__GUID-73D9AE2D-3DDC-4B31-B791-71842C259834">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="repository-access-control.html#GUID-CD4A712D-CCA2-4A19-909E-AEC57849A55A" title="Oracle数据库提供经典的数据库安全性，例如数据库用户的行级和列级安全访问。它还为Oracle XML DB Repository中的资源提供了细粒度的访问控制。您可以创建，设置和修改访问控制列表（ACL）。">存储库访问控制</a></p>
                           </div>
                        </li>
                        <li>
                           <p><strong class="term">XDBBinary元素</strong> - 包含二进制数据的XML元素。它由Oracle XML DB XML模式定义。只要将非结构化二进制数据上载到Oracle XML DB， <code class="codeph">XDBBinary</code>元素就会存储在存储库中。</p>
                        </li>
                     </ul>
                     <p>Oracle XML DB使用的许多术语在其他上下文中都有共同的同义词，如<a href="accessing-XML-DB-repository-data.html#GUID-AF65F743-04AD-441F-9B41-582C1D75B0A5__G1046594" title="此表列出了Oracle XML DB文件夹术语同义词。">表21-1</a>所示。
                     </p>
                     <div class="tblformal" id="GUID-AF65F743-04AD-441F-9B41-582C1D75B0A5__G1046594">
                        <p class="titleintable">表21-1 Oracle XML DB存储库术语的同义词</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Oracle XML DB存储库术语的同义词" width="100%" border="1" summary="This table lists the Oracle XML DB foldering term synonyms." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="32%" id="d108756e931">代名词</th>
                                 <th align="left" valign="bottom" width="32%" id="d108756e934">存储库术语</th>
                                 <th align="left" valign="bottom" width="36%" id="d108756e937">用法</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d108756e942" headers="d108756e931 ">
                                    <p>采集</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d108756e942 d108756e934 ">
                                    <p>夹</p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d108756e942 d108756e937 ">
                                    <p>WebDAV的</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d108756e952" headers="d108756e931 ">
                                    <p>目录</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d108756e952 d108756e934 ">
                                    <p>夹</p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d108756e952 d108756e937 ">
                                    <p>操作系统</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d108756e962" headers="d108756e931 ">
                                    <p>特权</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d108756e962 d108756e934 ">
                                    <p>特权</p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d108756e962 d108756e937 ">
                                    <p>允许</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d108756e972" headers="d108756e931 ">
                                    <p>对</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d108756e972 d108756e934 ">
                                    <p>特权</p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d108756e972 d108756e937 ">
                                    <p>各个</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d108756e982" headers="d108756e931 ">
                                    <p>WebDAV文件夹</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d108756e982 d108756e934 ">
                                    <p>夹</p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d108756e982 d108756e937 ">
                                    <p>Web文件夹</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d108756e992" headers="d108756e931 ">
                                    <p>角色</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d108756e992 d108756e934 ">
                                    <p>组</p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d108756e992 d108756e937 ">
                                    <p>访问控制</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d108756e1002" headers="d108756e931 ">
                                    <p>调整</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d108756e1002 d108756e934 ">
                                    <p>版</p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d108756e1002 d108756e937 ">
                                    <p>RCS，CVS</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d108756e1012" headers="d108756e931 ">
                                    <p>文件系统</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d108756e1012 d108756e934 ">
                                    <p>知识库</p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d108756e1012 d108756e937 ">
                                    <p>操作系统</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d108756e1022" headers="d108756e931 ">
                                    <p>等级制度</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d108756e1022 d108756e934 ">
                                    <p>知识库</p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d108756e1022 d108756e937 ">
                                    <p>各个</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d108756e1032" headers="d108756e931 ">
                                    <p>文件</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d108756e1032 d108756e934 ">
                                    <p>资源</p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d108756e1032 d108756e937 ">
                                    <p>操作系统</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d108756e1042" headers="d108756e931 ">
                                    <p>捆绑</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d108756e1042 d108756e934 ">
                                    <p>链接</p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d108756e1042 d108756e937 ">
                                    <p>WebDAV的</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-FD3B8650-EFA3-474E-9DA6-A0A78161DAA0" title="Oracle XML DB Repository可以被视为数据库对象而不是文件的文件系统。它是跨所有XML和数据库模式的一组数据库对象，映射到路径名。">存储库术语和提供的资源</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5291"></a><div class="props_rev_3"><a id="GUID-AC561AD3-D956-4A6C-9A7B-9DF803799FCC" name="GUID-AC561AD3-D956-4A6C-9A7B-9DF803799FCC"></a><h4 id="ADXDB-GUID-AC561AD3-D956-4A6C-9A7B-9DF803799FCC" class="sect4"><span class="enumeration_section">21.2.2</span>预定义的存储库文件和文件夹</h4>
                  <div>
                     <p>某些文件和文件夹是为Oracle XML DB Repository预定义的。您可以创建其他的供自己使用。</p>
                     <div class="section">
                        <p>这些是预定义的Oracle XML DB Repository文件和文件夹：</p><pre class="oac_no_warn" dir="ltr">/ dbfs <a id="fn_2" name="fn_2" href="#fn_2" repository="" folder="" dbfs="" gives="" you="" protocol="" access="" to="" your="" content.="" see="" oracle="" database="" securefiles="" and="" large="" objects="" developer's="" guide="" for="" information="" about="" dbfs.="" ="" onclick="footdisplay(2, "><sup>Foot 2</sup></a> / public / sys / sys / acls /sys/acls/all_all_acl.xml /sys/acls/all_owner_acl.xml /sys/acls/bootstrap_acl.xml /sys/acls/ro_all_acl.xml / sys / apps / sys / asm / sys / log / sys / schemas / sys / schemas / PUBLIC /sys/schemas/PUBLIC/www.w3.org /sys/schemas/PUBLIC/www.w3.org/2001 / sys / schemas / PUBLIC / www .w3.org / 2001 / xml.xsd /sys/schemas/PUBLIC/xmlns.oracle.com /sys/schemas/PUBLIC/xmlns.oracle.com/xdb /sys/schemas/PUBLIC/xmlns.oracle.com/xdb /XDBResource.xsd /sys/schemas/PUBLIC/xmlns.oracle.com/xdb/XDBSchema.xsd /sys/schemas/PUBLIC/xmlns.oracle.com/xdb/XDBStandard.xsd /sys/schemas/PUBLIC/xmlns.oracle .com / xdb / acl.xsd /sys/schemas/PUBLIC/xmlns.oracle.com/xdb/dav.xsd /sys/schemas/PUBLIC/xmlns.oracle.com/xdb/log / sys / schemas / PUBLIC / xmlns .oracle.com / xdb / stats.xsd /sys/schemas/PUBLIC/xmlns.oracle.com/xdb/xdbconfig.xsd /xdbconfig.xml</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-FD3B8650-EFA3-474E-9DA6-A0A78161DAA0" title="Oracle XML DB Repository可以被视为数据库对象而不是文件的文件系统。它是跨所有XML和数据库模式的一组数据库对象，映射到路径名。">存储库术语和提供的资源</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5292"></a><div class="props_rev_3"><a id="GUID-950100D2-51D0-490F-B82A-A0C45BCCE8AD" name="GUID-950100D2-51D0-490F-B82A-A0C45BCCE8AD"></a><h3 id="ADXDB-GUID-950100D2-51D0-490F-B82A-A0C45BCCE8AD" class="sect3"><span class="enumeration_section">21.3</span> Oracle XML DB资源库资源</h3>
               <div>
                  <p>Oracle XML DB资源库资源符合Oracle XML DB XML架构<code class="codeph">XDBResource.xsd</code> 。资源中的元素包括持久存储WebDAV定义的属性所需的元素，例如创建日期，修改日期，WebDAV锁，所有者，ACL，语言和字符集。
                  </p>
                  <p>资源索引有一个名为<span class="bold"><code class="codeph">Contents</code></span>的特殊元素，其中包含资源的内容。
                  </p>
                  <p>资源的XML模式还定义了<span class="bold"><code class="codeph">any</code></span>元素， <code class="codeph">maxOccurs</code>属性无限制。<code class="codeph">any</code>元素可以包含Oracle XML DB XML名称空间之外的任何元素。任意实例定义的属性可以与资源相关联。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-EF87A8A1-F762-49CE-BB56-0CA915E3CDC5">存储库数据存储在哪里？</a><br>Oracle XML DB将Oracle XML DB存储库数据存储在您有权访问的一组表和索引中。
                     </li>
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-40E826C1-DCDD-45B0-B960-C2020125A013">如何在Oracle XML DB存储库中存储文档</a><br>当基于已注册的XML模式的XML文档被加载到存储库中时，该文档将根据模式被解析并分解为一组SQL对象;并创建相应的资源文档以提供源XML文档的存储库访问。
                     </li>
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-B20A2200-477D-48DE-AFF9-5EF5DE8BF554">存储库数据访问控制</a><br>您可以使用由访问控制条目（ACE）组成的访问控制列表（ACL）来控制对Oracle XML DB Repository中资源的访问。ACE授予或拒绝特定主体的一组权限。
                     </li>
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-B6979F05-B095-48A6-B78D-E20222138051">存储库路径名称解析</a><br>将文件夹与其内容相关的数据由Oracle XML DB分层存储库索引管理。这为评估路径名提供了一种快速机制，类似于操作系统文件系统使用的目录机制。您需要某些权限才能解析路径名。
                     </li>
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-F37F983A-A132-4BD9-9232-7C3B4F89C655">链接类型</a><br>Oracle XML DB中的链接可以是存储库链接或文档链接。存储库链接可以是硬链接或弱链接。当文档链接的目标是存储库资源时，它们也可以是硬链接或弱链接。
                     </li>
                  </ul>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="oracle-supplied-XML-schemas-and-examples.html#GUID-939CFC41-A851-40F3-9D27-AA56C7259019" title="提供了Oracle XML DB提供的XML模式XDBResource.xsd的完整列表，该模式用于表示Oracle XML DB资源。">XDBResource.xsd：Oracle XML DB资源的XML模式</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" title="在Oracle XML DB Repository中有多种方法可以访问和操作数据，包括使用标准协议，如FTP和HTTP（S）/ WebDAV; Oracle XML DB资源应用程序接口（API）;并且存储库视图RESOURCE_VIEW和PATH_VIEW。">访问Oracle XML DB存储库数据</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5295"></a><div class="props_rev_3"><a id="GUID-EF87A8A1-F762-49CE-BB56-0CA915E3CDC5" name="GUID-EF87A8A1-F762-49CE-BB56-0CA915E3CDC5"></a><h4 id="ADXDB-GUID-EF87A8A1-F762-49CE-BB56-0CA915E3CDC5" class="sect4"><span class="enumeration_section">21.3.1</span>存储库数据存储在何处？
                  </h4>
                  <div>
                     <p>Oracle XML DB将Oracle XML DB存储库数据存储在您有权访问的一组表和索引中。</p>
                     <p>如果注册XML模式并请求由Oracle XML DB生成表，则会在数据库模式中创建表。然后，您就可以查看或修改它们。其他用户无法查看您的表，除非您授予他们这样做的权限。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-7B4BDF20-C0B4-448B-BB12-92158DDEB477">生成表的名称</a><br>生成的表的名称由Oracle XML DB分配。可以通过在XML架构文档（或默认的XML架构文档）中查找<code class="codeph">xdb:defaultTable</code>属性来获取它们。
                        </li>
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-26919CAE-E6D6-4F4C-8CE4-94E6EBD4B62B">如何为存储库资源定义对象关系存储</a><br>您可以通过子类化或通过存储符合已注册XML模式的数据来为存储库资源定义对象关系存储。
                        </li>
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-671B7B5E-1BC7-4F5D-8006-5C209113D9CF">Oracle ASM虚拟文件夹</a><br>Oracle自动存储管理（Oracle ASM）虚拟文件夹<code class="codeph">/sys/asm</code>是Oracle ASM自动管理的Oracle ASM文件和文件夹。</li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-950100D2-51D0-490F-B82A-A0C45BCCE8AD" title="Oracle XML DB资源库资源符合Oracle XML DB XML架构XDBResource.xsd。资源中的元素包括持久存储WebDAV定义的属性所需的元素，例如创建日期，修改日期，WebDAV锁，所有者，ACL，语言和字符集。">Oracle XML DB资源库资源</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB5296"></a><div class="props_rev_3"><a id="GUID-7B4BDF20-C0B4-448B-BB12-92158DDEB477" name="GUID-7B4BDF20-C0B4-448B-BB12-92158DDEB477"></a><h5 id="ADXDB-GUID-7B4BDF20-C0B4-448B-BB12-92158DDEB477" class="sect5"><span class="enumeration_section">21.3.1.1</span>生成表的名称</h5>
                     <div>
                        <p>生成的表的名称由Oracle XML DB分配。可以通过在XML架构文档（或默认的XML架构文档）中查找<code class="codeph">xdb:defaultTable</code>属性来获取它们。
                        </p>
                        <p>注册XML模式时，您也可以提供自己的表名，而不是使用Oracle XML DB提供的默认名称。如果表指定二进制XML存储，则在将文档存储在表中之前，文档将以二进制XML格式编码。</p>
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="XML-Schema-and-query-object-relational-storage.html#GUID-54A3CBE8-19BE-43BB-8979-7769116B6F53" title="您可以在XML模式注册中创建默认表。使用API和协议（如FTP和HTTP（S））插入文档时，默认表最有用，它们不提供任何表规范。">XML架构注册期间创建的默认表</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-EF87A8A1-F762-49CE-BB56-0CA915E3CDC5" title="Oracle XML DB将Oracle XML DB存储库数据存储在您有权访问的一组表和索引中。">存储库数据存储在何处？</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5297"></a><div class="props_rev_3"><a id="GUID-26919CAE-E6D6-4F4C-8CE4-94E6EBD4B62B" name="GUID-26919CAE-E6D6-4F4C-8CE4-94E6EBD4B62B"></a><h5 id="ADXDB-GUID-26919CAE-E6D6-4F4C-8CE4-94E6EBD4B62B" class="sect5"><span class="enumeration_section">21.3.1.2</span>如何为存储库资源定义对象关系存储</h5>
                     <div>
                        <p>您可以通过子类化或通过存储符合已注册XML模式的数据来为存储库资源定义对象关系存储。</p>
                        <p>需要为存储库资源定义对象关系存储的应用程序可以通过以下任一方式执行此操作：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>子类化Oracle XML DB资源类型。子类化Oracle XML DB资源需要表<code class="codeph">XDB$RESOURCE</code>特权。</p>
                           </li>
                           <li>
                              <p>存储符合可见的已注册XML架构的数据。</p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="XML-Schema-and-query-basic.html#GUID-C09824C1-6B02-4556-A265-B1749DEE8DE1" title="XML Schema是用于描述XML文档的内容和结构的标准。您可以注册，更新和删除与Oracle XML DB一起使用的XML架构。您可以定义用于基于XML模式的数据的存储结构，并将XML模式数据类型映射到SQL数据类型。">XML模式存储和查询：基本</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-EF87A8A1-F762-49CE-BB56-0CA915E3CDC5" title="Oracle XML DB将Oracle XML DB存储库数据存储在您有权访问的一组表和索引中。">存储库数据存储在何处？</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5298"></a><div class="props_rev_3"><a id="GUID-671B7B5E-1BC7-4F5D-8006-5C209113D9CF" name="GUID-671B7B5E-1BC7-4F5D-8006-5C209113D9CF"></a><h5 id="ADXDB-GUID-671B7B5E-1BC7-4F5D-8006-5C209113D9CF" class="sect5"><span class="enumeration_section">21.3.1.3</span> Oracle ASM虚拟文件夹</h5>
                     <div>
                        <p>Oracle自动存储管理（Oracle ASM）虚拟文件夹<code class="codeph">/sys/asm</code>是Oracle ASM自动管理的Oracle ASM文件和文件夹。</p>
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="accessing-XML-DB-repository-data.html#GUID-7057EB00-B49B-49AB-B9FE-6C984DC76C56" title="Oracle自动存储管理（Oracle ASM）将数据库文件组织到磁盘组中，以简化管理，数据库镜像和I / O平衡。存储库访问扩展到Oracle ASM文件，位于虚拟存储库文件夹/ sys / asm中。此访问权限保留给数据库管理员（DBA）。它不适合开发人员。">使用协议和资源API访问Oracle ASM文件 - 适用于DBA</a></li>
                           </ul>
                        </div>
                        <div class="infoboxnotealso" id="GUID-671B7B5E-1BC7-4F5D-8006-5C209113D9CF__GUID-A925CB1A-E635-4611-A6B9-F1A6B62AB85F">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../ostmg/asm-files-directories-templates.html#OSTMG-GUID-0305A38E-1DC3-4256-82D0-C2955D3B1D50" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-EF87A8A1-F762-49CE-BB56-0CA915E3CDC5" title="Oracle XML DB将Oracle XML DB存储库数据存储在您有权访问的一组表和索引中。">存储库数据存储在何处？</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADXDB4223"></a><div class="props_rev_3"><a id="GUID-40E826C1-DCDD-45B0-B960-C2020125A013" name="GUID-40E826C1-DCDD-45B0-B960-C2020125A013"></a><h4 id="ADXDB-GUID-40E826C1-DCDD-45B0-B960-C2020125A013" class="sect4"><span class="enumeration_section">21.3.2</span>如何在Oracle XML DB存储库中存储文档</h4>
                  <div>
                     <p>当基于已注册的XML模式的XML文档被加载到存储库中时，该文档将根据模式被解析并分解为一组SQL对象;并创建相应的资源文档以提供源XML文档的存储库访问。</p>
                     <p>Oracle XML DB为XML文档提供特殊处理。存储基于XML模式的XML文档内容的规则由其XML模式定义。文档的内容存储在与全局元素定义关联的默认表中。</p>
                     <p>Oracle XML DB Repository还存储不包含XML数据的文件，例如JPEG图像或Word文档。每个资源的XML模式定义允许哪些元素，并指定是否将这些文件的内容存储为<code class="codeph">BLOB</code>或<code class="codeph">CLOB</code>实例。基于非模式的XML文档的内容作为<code class="codeph">CLOB</code>实例存储在存储库中。
                     </p>
                     <p>存储库中的每个文件或文件夹都有一个资源和一个链接属性文档。如果给定文档有多个访问路径，则每个可能的链接都有一个链接属性文档。资源文档和链接属性都存储为XML文档。所有这些文档都存储在存储库中的表中。</p>
                     <p>将XML文件加载到存储库时，会发生以下事件序列：</p>
                     <ol>
                        <li>
                           <p>Oracle XML DB检查XML文档的根元素，以查看它是否与已知（已注册）的XML模式相关联。这包括查看文档是否包含<code class="codeph">XMLSchema-instance</code>命名空间的命名空间声明，然后查找<code class="codeph">schemaLocation</code>或<code class="codeph">noNamespaceSchemaLocation</code>属性，该属性标识与文档关联的XML架构。
                           </p>
                        </li>
                        <li>
                           <p>如果文档基于已知的XML架构，则XML架构的元数据将从XML架构缓存加载。</p>
                        </li>
                        <li>
                           <p>XML文档被解析并分解为从XML模式派生的一组SQL对象。</p>
                        </li>
                        <li>
                           <p>从XML文件创建的SQL对象存储在向数据库注册XML模式时定义的缺省表中。</p>
                        </li>
                        <li>
                           <p>为处理的每个文档创建资源文档。这样可以使用存储库访问文档的内容。基于XML Schema的<code class="codeph">XMLType</code>实例的资源文档包含<code class="codeph">XMLRef</code>元素。此元素包含<code class="codeph">XMLType</code>的<code class="codeph">REF</code> ，可用于在默认表中查找包含与资源关联的内容的行。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-950100D2-51D0-490F-B82A-A0C45BCCE8AD" title="Oracle XML DB资源库资源符合Oracle XML DB XML架构XDBResource.xsd。资源中的元素包括持久存储WebDAV定义的属性所需的元素，例如创建日期，修改日期，WebDAV锁，所有者，ACL，语言和字符集。">Oracle XML DB资源库资源</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4209"></a><div class="props_rev_3"><a id="GUID-B20A2200-477D-48DE-AFF9-5EF5DE8BF554" name="GUID-B20A2200-477D-48DE-AFF9-5EF5DE8BF554"></a><h4 id="ADXDB-GUID-B20A2200-477D-48DE-AFF9-5EF5DE8BF554" class="sect4"><span class="enumeration_section">21.3.3</span>存储库数据访问控制</h4>
                  <div>
                     <p>您可以使用由访问控制条目（ACE）组成的访问控制列表（ACL）来控制对Oracle XML DB Repository中资源的访问。ACE授予或拒绝特定主体的一组权限。</p>
                     <p>主体可以是数据库用户，数据库角色，LDAP用户，LDAP组或特殊主体<code class="codeph">DAV::owner</code> ，它指的是资源的所有者。存储库中的每个资源都受ACL保护。 ACL确定用户对资源具有哪些权限（例如<code class="codeph">read-properties</code>和<code class="codeph">update</code> 。每个存储库操作都包括检查ACL以确定是否允许当前用户执行操作。
                     </p>
                     <p>默认情况下，新资源会继承其父文件夹的ACL。但您可以使用PL / SQL过程<code class="codeph">DBMS_XDB_REPOS.setACL</code>设置资源的ACL。有关Oracle XML DB资源安全性的更多详细信息，请参阅<a href="repository-access-control.html#GUID-CD4A712D-CCA2-4A19-909E-AEC57849A55A" title="Oracle数据库提供经典的数据库安全性，例如数据库用户的行级和列级安全访问。它还为Oracle XML DB Repository中的资源提供了细粒度的访问控制。您可以创建，设置和修改访问控制列表（ACL）。">存储库访问控制</a> 。
                     </p>
                     <p>在以下示例中，当前用户是<code class="codeph">QUINE</code> 。该查询提供文件夹<code class="codeph">/public</code>的资源数。假设此文件夹中只有两个资源： <code class="codeph">f1</code>和<code class="codeph">f2</code> 。还假设<code class="codeph">f1</code>上的ACL将<code class="codeph">read-properties</code>权限授予<code class="codeph">QUINE</code>而<code class="codeph">f2</code>上的ACL不授予<code class="codeph">QUINE</code>任何权限。用户需要资源的<code class="codeph">read-properties</code>权限才能使用户可以看到它。查询的结果为<code class="codeph">1</code> ，因为<code class="codeph">QUINE</code>只能看到<code class="codeph">f1</code> 。</p><pre class="oac_no_warn" dir="ltr">SELECT count（*）FROM RESOURCE_VIEW r WHERE under_path（r.res，'/ public'）= 1; COUNT（*）-------- 1</pre></div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-950100D2-51D0-490F-B82A-A0C45BCCE8AD" title="Oracle XML DB资源库资源符合Oracle XML DB XML架构XDBResource.xsd。资源中的元素包括持久存储WebDAV定义的属性所需的元素，例如创建日期，修改日期，WebDAV锁，所有者，ACL，语言和字符集。">Oracle XML DB资源库资源</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5299"></a><div class="props_rev_3"><a id="GUID-B6979F05-B095-48A6-B78D-E20222138051" name="GUID-B6979F05-B095-48A6-B78D-E20222138051"></a><h4 id="ADXDB-GUID-B6979F05-B095-48A6-B78D-E20222138051" class="sect4"><span class="enumeration_section">21.3.4</span>存储库路径名称解析</h4>
                  <div>
                     <p>将文件夹与其内容相关的数据由Oracle XML DB分层存储库索引管理。这为评估路径名提供了一种快速机制，类似于操作系统文件系统使用的目录机制。您需要某些权限才能解析路径名。</p>
                     <p>作为文件夹的<code class="codeph">Resource</code>将元素<code class="codeph">Resource</code>的<code class="codeph">Container</code>属性设置为<code class="codeph">true</code> 。
                     </p>
                     <p>要解析文件夹中的资源名称，当前用户必须具有以下权限：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">resolve</code>该文件夹的权限</p>
                        </li>
                        <li>
                           <p>该文件夹中资源的<code class="codeph">read-properties</code></p>
                        </li>
                     </ul>
                     <p>如果用户没有这些权限，则用户会收到<code class="codeph">access denied</code>错误。当在其资源上拒绝<code class="codeph">read-properties</code>权限时，文件夹列表和其他查询不返回行。
                     </p>
                     <div class="infoboxnote" id="GUID-B6979F05-B095-48A6-B78D-E20222138051__GUID-A52D7021-F3C2-46D2-A2B5-0259BD44AC39">
                        <p class="notep1">警告：</p>
                        <p>路径名解析中的错误处理区分无效资源名称和非文件夹资源，以便与文件系统兼容。由于Oracle XML DB资源可从外部Oracle XML DB存储库（使用SQL）访问，因此拒绝对包含资源的文件夹进行读取访问<span class="italic">不会阻止</span>对该资源的读访问。
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-B6979F05-B095-48A6-B78D-E20222138051__GUID-FEADA446-C217-480F-95EF-9C61413986A5">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="oracle-supplied-XML-schemas-and-examples.html#GUID-939CFC41-A851-40F3-9D27-AA56C7259019" title="提供了Oracle XML DB提供的XML模式XDBResource.xsd的完整列表，该模式用于表示Oracle XML DB资源。">XDBResource.xsd：Oracle XML DB资源的XML模式，</a>用于定义元素<code class="codeph">Resource</code>及其属性<code class="codeph">Container</code></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-950100D2-51D0-490F-B82A-A0C45BCCE8AD" title="Oracle XML DB资源库资源符合Oracle XML DB XML架构XDBResource.xsd。资源中的元素包括持久存储WebDAV定义的属性所需的元素，例如创建日期，修改日期，WebDAV锁，所有者，ACL，语言和字符集。">Oracle XML DB资源库资源</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB2030"></a><div class="props_rev_3"><a id="GUID-F37F983A-A132-4BD9-9232-7C3B4F89C655" name="GUID-F37F983A-A132-4BD9-9232-7C3B4F89C655"></a><h4 id="ADXDB-GUID-F37F983A-A132-4BD9-9232-7C3B4F89C655" class="sect4"><span class="enumeration_section">21.3.5</span>链接类型</h4>
                  <div>
                     <p>Oracle XML DB中的链接可以是存储库链接或文档链接。存储库链接可以是硬链接或弱链接。当文档链接的目标是存储库资源时，它们也可以是硬链接或弱链接。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-7692F7E3-8C53-4A2C-BB26-807B32D63176">存储库链接和文档链接</a><br>除了包含资源之外，文件夹资源还可以包含指向其他资源（文件或文件夹）的链接。这些存储库链接表示分层存储库关系相比之下，文档链接是XML文档之间的任意链接，不一定是存储库资源。
                        </li>
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-72981E53-0B60-4096-80E0-06A139086DED">硬链接和弱链接</a><br>目标存储库资源的链接可能很难或很弱。硬链接和弱链接对于它们所针对的资源具有不同的依赖关系。硬链接无法定位祖先文件夹;薄弱环节可以。您可以查询存储库路径视图<code class="codeph">PATH_VIEW</code> ，以确定存储库链接的类型。
                        </li>
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-80B23444-3A16-4D36-A225-12D8485F9373">在不了解文件夹层次结构的情况下创建弱链接</a><br>弱链接表示存储库结构顶部的映射，该映射由硬链接确定。您可以使用其OID而不是其路径创建到资源的弱链接。您可以使用弱链接访问资源，而无需访问包含它的文件夹。
                        </li>
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-D96FB86C-DC05-4DAE-96B2-4E4307CB76C1">如何以及何时防止多个硬链接</a><br>您可以限制硬链接的创建，禁止多个硬链接到文件夹或文件（或两者）。允许多个硬链接到文件资源，但不允许多个硬链接到文件夹资源，提供的行为类似于某些文件系统，包括UNIX和Linux。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-950100D2-51D0-490F-B82A-A0C45BCCE8AD" title="Oracle XML DB资源库资源符合Oracle XML DB XML架构XDBResource.xsd。资源中的元素包括持久存储WebDAV定义的属性所需的元素，例如创建日期，修改日期，WebDAV锁，所有者，ACL，语言和字符集。">Oracle XML DB资源库资源</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB5300"></a><div class="props_rev_3"><a id="GUID-7692F7E3-8C53-4A2C-BB26-807B32D63176" name="GUID-7692F7E3-8C53-4A2C-BB26-807B32D63176"></a><h5 id="ADXDB-GUID-7692F7E3-8C53-4A2C-BB26-807B32D63176" class="sect5"><span class="enumeration_section">21.3.5.1</span>存储库链接和文档链接</h5>
                     <div>
                        <p>除了包含资源之外，文件夹资源还可以包含指向其他资源（文件或文件夹）的链接。这些存储库链接表示分层存储库关系相比之下，文档链接是XML文档之间的任意链接，不一定是存储库资源。</p>
                        <p><strong class="term">存储库链接</strong>有时称为<strong class="term">文件夹链接</strong> 。不要将它们与<strong class="term">文档链接</strong>混淆，后者对应于XLink和XInclude标准提供的链接，Oracle XML DB也支持这些链接（但<span class="italic">不推荐使用</span> XLink支持）。存储库链接是存储库资源之间的导航，文件夹子链接。文档链接是不一定是存储库资源的文档之间的任意链接。
                        </p>
                        <p>存储库链接表示存储库层次关系。文档链接表示任意关系，其语义派生自使用它们的应用程序。因为它们代表存储库层次关系，所以可以使用与文件系统相关的协议来导航存储库链接。文档链接不是这样。由于文档链接可以表示任意关系，因此它们也可以表示存储库关系。当文档链接因此以资源为目标时，它们也可能很难或很弱。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-7692F7E3-8C53-4A2C-BB26-807B32D63176__GUID-2593B60C-57AC-497E-9AC7-7C3B80C309B2">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="use-of-XLink-and-XInclude-with-XML-DB.html#GUID-5731BA64-7DEB-44A2-925E-D07014372B66" title="您可以将XLink和XInclude与Oracle XML DB Repository中的资源一起使用。但是不推荐使用XLink。">将XLink和XInclude与Oracle XML DB一起使用</a>以获取有关文档链接的信息</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-F37F983A-A132-4BD9-9232-7C3B4F89C655" title="Oracle XML DB中的链接可以是存储库链接或文档链接。存储库链接可以是硬链接或弱链接。当文档链接的目标是存储库资源时，它们也可以是硬链接或弱链接。">链接类型</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5302"></a><a id="ADXDB5301"></a><div class="props_rev_3"><a id="GUID-72981E53-0B60-4096-80E0-06A139086DED" name="GUID-72981E53-0B60-4096-80E0-06A139086DED"></a><h5 id="ADXDB-GUID-72981E53-0B60-4096-80E0-06A139086DED" class="sect5"><span class="enumeration_section">21.3.5.2</span>硬链接和弱链接</h5>
                     <div>
                        <p>目标存储库资源的链接可能很难或很弱。硬链接和弱链接对于它们所针对的资源具有不同的依赖关系。硬链接无法定位祖先文件夹;薄弱环节可以。您可以查询存储库路径视图<code class="codeph">PATH_VIEW</code> ，以确定存储库链接的类型。
                        </p>
                        <p><strong class="term">硬链接</strong>和<strong class="term">弱链接</strong>都是物理数据的引用或指针 - （内部）存储库资源标识符。它们不指向符号名称或其他链接的路径。他们的目标在链接创建时得到解决。因为它们直接指向资源标识符，所以硬链接和弱链接不能悬挂：即使重命名或移动目标，它们仍然有效。您需要相同的权限才能创建或删除硬链接和弱链接。
                        </p>
                        <p>硬链接和弱链接之间的区别在于它们与目标资源删除的关系。目标资源依赖于其硬链接，因为只要它仍然是硬链接的目标，它就不能被删除。删除硬链接也会删除<a id="d108756e1987" class="indexterm-anchor"></a>如果以下两者都为真，则链接所针对的资源：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>资源未进行版本控制。</p>
                           </li>
                           <li>
                              <p>删除的硬链接是资源的最后一个（也就是唯一的）硬链接。</p>
                           </li>
                        </ul>
                        <p>弱链接在资源上没有这样的保留：您可以删除资源，即使它是弱链接的目标（只要它不是硬链接的目标）。因此，弱链接可用作频繁访问资源的快捷方式，而不会影响对这些资源的删除。</p>
                        <p>但是，在另一个方向存在依赖关系：如果删除作为一个或多个弱链接的目标的资源，那么这些链接也会自动删除。从这个意义上讲，薄弱环节也无法摆脱困境。硬链接和弱链接都提供参照完整性：如果存在链接，则其目标也是如此。</p>
                        <p>硬链接和弱链接之间的另一个区别是：不允许使用到祖先文件夹的硬链接，因为它们会引入循环。弱链接没有这样的限制：弱链接可以针对任何文件夹，可能创建一个循环。它是定义Oracle XML DB Repository的（非循环）结构的硬链接集。弱链接表示该基本结构之上的附加映射。</p>
                        <p>您可以查询存储库路径视图<code class="codeph">PATH_VIEW</code>以确定存储库链接的类型：链接信息包含链接类型。<code class="codeph">PATH_VIEW</code> <code class="codeph">XMLType</code>列<code class="codeph">LINK</code>在元素<code class="codeph">PATH_VIEW</code>包含此信息， <code class="codeph">LinkType</code>是根元素<code class="codeph">LINK</code>的子元素。 <a href="accessing-XML-DB-repository-data.html#GUID-72981E53-0B60-4096-80E0-06A139086DED__BABHBGFG">例21-1</a>说明了这一点。您也可以通过确定库的链接类型<code class="codeph">getLink()</code>上的事件处理程序（回调函数<code class="codeph">LinkIn</code> ， <code class="codeph">LinkTo</code> ， <code class="codeph">UnlinkIn</code> ，或<code class="codeph">UnlinkFrom</code> ）。
                        </p>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-72981E53-0B60-4096-80E0-06A139086DED__GUID-B78C7485-CF76-470D-970F-079D16D904C2">
                              <p class="notep1">也可以看看：</p>
                              <p>有关PL / SQL函数<code class="codeph">getLink</code>信息，请<code class="codeph">getLink</code> <a href="../arpls/DBMS_XEVENT.html#ARPLS69526" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-72981E53-0B60-4096-80E0-06A139086DED__BABHBGFG">
                           <p class="titleinexample">例21-1查询PATH_VIEW以确定链接类型</p><pre class="pre codeblock"><code>SELECT RESID，XMLCAST（的XMLQuery（ <span class="bold">'/ LINK /链接类型</span> ' PASSING <span class="bold">链接</span>返回后才CONTENT）AS VARCHAR2（24））LINK_TYPE FROM PATH_VIEW WHERE了equals_path（RES， '/home/QUINE/purchaseOrder.xml'）= 1; RESID LINK_TYPE -------------------------------- --------- DF9856CF2FE0829EE030578CCE0639C5 <span class="bold">弱</span></code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BCA4A460-7C38-46E4-A827-E3B3B20DDB1F" title="此处的示例说明了如何删除Oracle XML DB存储库资源和路径。">删除存储库资源：示例</a></li>
                              <li><a href="accessing-XML-DB-repository-data.html#GUID-00093774-B340-4178-9E9C-080EC8592098" title="PL / SQL包DBMS_XDB_REPOS提供了作用于Oracle XML DB存储库资源的子程序。此API基于公共视图RESOURCE_VIEW和PATH_VIEW，它们允许通过FTP和HTTP（S）/ WebDAV等协议对存储库数据进行SQL访问。">基于查询的存储库资源访问</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-F37F983A-A132-4BD9-9232-7C3B4F89C655" title="Oracle XML DB中的链接可以是存储库链接或文档链接。存储库链接可以是硬链接或弱链接。当文档链接的目标是存储库资源时，它们也可以是硬链接或弱链接。">链接类型</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5304"></a><a id="ADXDB5305"></a><a id="ADXDB5303"></a><div class="props_rev_3"><a id="GUID-80B23444-3A16-4D36-A225-12D8485F9373" name="GUID-80B23444-3A16-4D36-A225-12D8485F9373"></a><h5 id="ADXDB-GUID-80B23444-3A16-4D36-A225-12D8485F9373" class="sect5"><span class="enumeration_section">21.3.5.3</span>创建一个不知道文件夹层次结构的弱链接</h5>
                     <div>
                        <p>弱链接表示存储库结构顶部的映射，该映射由硬链接确定。您可以使用其OID而不是其路径创建到资源的弱链接。您可以使用弱链接访问资源，而无需访问包含它的文件夹。</p>
                        <div class="section">
                           <p>假设您要读取属于某个同事的文件资源。您无法创建指向该资源的硬链接，以使其可供您使用，除非您对该文件的<span class="italic">所有</span>祖先文件夹具有<code class="codeph">&lt;xdb:resolve&gt;</code>权限。拥有该权限意味着您可以查看所有同事的文件夹名称以及层次结构到目标资源的结构。
                           </p>
                           <p>但是，因为弱链接本质上代表真实存储库结构之上的映射，哪个结构由硬链接集确定，所以您可以仅使用其OID而不是其完整的命名路径（URL）创建到资源的弱链接）。您的同事可以确定文件的OID路径，向您发送该路径而不是命名路径，并且您可以使用该OID路径创建指向文档的弱链接。<a href="accessing-XML-DB-repository-data.html#GUID-80B23444-3A16-4D36-A225-12D8485F9373__BABEHAED">例21-2</a>和<a href="accessing-XML-DB-repository-data.html#GUID-80B23444-3A16-4D36-A225-12D8485F9373__BABFFEED">例21-3</a>说明了这一点。
                           </p>
                           <p><a href="accessing-XML-DB-repository-data.html#GUID-80B23444-3A16-4D36-A225-12D8485F9373__BABEHAED">例21-2</a>打印文件资源<code class="codeph">/home/QUINE/purchaseOrder.xml</code>的OID路径。用户<code class="codeph">quine</code>可以用它来获得对资源的OID路径，然后发送路径用户<code class="codeph">curry</code> ，谁可以创建一个薄弱环节，以资源（ <a href="accessing-XML-DB-repository-data.html#GUID-80B23444-3A16-4D36-A225-12D8485F9373__BABFFEED">例21-3</a> ）。
                           </p>
                           <p>在<a href="accessing-XML-DB-repository-data.html#GUID-80B23444-3A16-4D36-A225-12D8485F9373__BABFFEED">例21-3中</a> ，用户<code class="codeph">curry</code>在文件夹<code class="codeph">/home/CURRY</code>创建名为<code class="codeph">quinePurchaseOrder.xml</code>的弱链接。链接的目标是与URL <code class="codeph">/home/QUINE/purchaseOrder.xml</code>对应的OID路径。用户<code class="codeph">curry</code>不需要知道用户<code class="codeph">quine</code>可见的存储库结构。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-80B23444-3A16-4D36-A225-12D8485F9373__BABEHAED">
                           <p class="titleinexample">例21-2获取资源的OID路径</p><pre class="pre codeblock"><code>DECLARE resoid RAW（16）; oidpath VARCHAR2（100）; BEGIN SELECT RESID INTO RES FROM FROM RESOURCE_VIEW WHERE equals_path（RES，'/ home / QUINE /purchaseOrder.xml'）= 1; oidpath：= DBMS_XDB_REPOS。 <span class="bold">createOIDPath</span> （resoid）; DBMS_OUTPUT.PUT_LINE（oidpath）;结束;</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-80B23444-3A16-4D36-A225-12D8485F9373__BABFFEED">
                           <p class="titleinexample">示例21-3使用OID路径创建弱链路</p><pre class="pre codeblock"><code>CALL DBMS_XDB_REPOS.link（ <span class="bold">/ sys / oid / 1BDCB46477B59C20E040578CCE0623D3</span> '/ home / CURRY'，'quinePurchaseOrder.xml'，DBMS_XDB_REPOS.LINK_TYPE_WEAK）;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-F37F983A-A132-4BD9-9232-7C3B4F89C655" title="Oracle XML DB中的链接可以是存储库链接或文档链接。存储库链接可以是硬链接或弱链接。当文档链接的目标是存储库资源时，它们也可以是硬链接或弱链接。">链接类型</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5306"></a><div class="props_rev_3"><a id="GUID-D96FB86C-DC05-4DAE-96B2-4E4307CB76C1" name="GUID-D96FB86C-DC05-4DAE-96B2-4E4307CB76C1"></a><h5 id="ADXDB-GUID-D96FB86C-DC05-4DAE-96B2-4E4307CB76C1" class="sect5"><span class="enumeration_section">21.3.5.4</span>如何以及何时防止多个硬链接</h5>
                     <div>
                        <p>您可以限制硬链接的创建，禁止多个硬链接到文件夹或文件（或两者）。允许多个硬链接到文件资源，但不允许多个硬链接到文件夹资源，提供的行为类似于某些文件系统，包括UNIX和Linux。</p>
                        <p>这可以简化应用程序设计，实际上是通过确保每个文件资源都具有唯一的，规范的硬链接路径。此外，防止到资源的多个硬链接可以提高查询性能。</p>
                        <p>您可以使用配置文件<code class="codeph">xdbconfig.xml</code>的以下布尔参数来配置多个硬链接的<code class="codeph">xdbconfig.xml</code> 。每个参数的默认值为<code class="codeph">true</code> ，表示可以创建多个硬链接。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">folder-hard-links</code> - 如果为<code class="codeph">false</code> ，则阻止创建指向文件夹资源的多个硬链接。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">non-folder-hard-links</code> - 如果为<code class="codeph">false</code> ，则阻止创建到文件资源的多个硬链接。
                              </p>
                           </li>
                        </ul>
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="administration-of-XML-DB.html#GUID-D1551B64-4A75-44CD-AA04-0A68018410AE" title="Oracle XML DB通过配置文件xdbconfig.xml在内部进行管理，该文件作为资源存储在Oracle XML DB Repository中。作为使用Oracle Enterprise Manager配置Oracle XML DB的替代方法，您可以使用Oracle XML DB配置文件直接对其进行配置。">使用xdbconfig.xml配置Oracle XML DB</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-F37F983A-A132-4BD9-9232-7C3B4F89C655" title="Oracle XML DB中的链接可以是存储库链接或文档链接。存储库链接可以是硬链接或弱链接。当文档链接的目标是存储库资源时，它们也可以是硬链接或弱链接。">链接类型</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADXDB5308"></a><a id="ADXDB5309"></a><a id="ADXDB4183"></a><a id="ADXDB5307"></a><div class="props_rev_3"><a id="GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6" name="GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6"></a><h3 id="ADXDB-GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6" class="sect3"><span class="enumeration_section">21.4</span>对存储库资源的导航或路径访问</h3>
               <div>
                  <p>Oracle XML DB Repository文件夹支持许多操作系统使用的相同协议标准。这使得存储库文件夹在支持的操作系统环境中充当本机文件夹（目录）。</p>
                  <p>例如：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您可以使用Windows资源管理器以与访问文件系统中的其他文件和文件夹相同的方式打开和访问存储库文件和文件夹（资源）， <a href="accessing-XML-DB-repository-data.html#GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6__I1045917">如图21-2</a>所示。
                        </p>
                     </li>
                     <li>
                        <p>您可以从Web浏览器使用HTTP（S）/ WebDAV访问存储库数据， <a href="accessing-XML-DB-repository-data.html#GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6__I1045938">如图21-3</a>和<a href="accessing-XML-DB-repository-data.html#GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6__CEGICACC">图21-4所示</a> 。
                        </p>
                        <p><a href="accessing-XML-DB-repository-data.html#GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6__I1045938">图21-3</a>显示了访问URL <code class="codeph">http://xdbdemo:8080/</code>的浏览器。它连接的服务器是<code class="codeph">xdbdemo</code> ，其HTTP端口号是<code class="codeph">8080</code> 。
                        </p>
                        <p><a href="accessing-XML-DB-repository-data.html#GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6__CEGICACC">图21-4</a>显示了使用HTTP访问存储在数据库中的XML文档（XSL样式表）的浏览器。URL为<code class="codeph">http://localhost:8080/home/SCOTT/poSource/xsl/purchaseOrder.xsl</code> 。</p>
                     </li>
                  </ul>
                  <div class="figure" id="GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6__I1045917">
                     <p class="titleinfigure">图21-2 Windows资源管理器中的Oracle XML DB文件夹</p><img src="img/po_folders.jpg" width="515" alt="下面是图21-2的描述" title="下面是图21-2的描述" longdesc="img_text/po_folders.html"><br><a href="img_text/po_folders.html">“图21-2 Windows资源管理器中的Oracle XML DB文件夹”的说明</a></div>
                  <!-- class="figure" -->
                  <div class="figure" id="GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6__I1045938">
                     <p class="titleinfigure">图21-3使用HTTP（S）/ WebDAV和Web浏览器访问存储库数据</p><img src="img/adxdb_vm_058.png" width="502" alt="下面是图21-3的描述" title="下面是图21-3的描述" longdesc="img_text/adxdb_vm_058.html"><br><a href="img_text/adxdb_vm_058.html">“图21-3使用HTTP（S）/ WebDAV和Web浏览器访问存储库数据”的说明</a></div>
                  <!-- class="figure" -->
                  <div class="figure" id="GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6__CEGICACC">
                     <p class="titleinfigure">图21-4使用HTTP和URL进行基于路径的访问</p><img src="img/path_based.gif" width="446" alt="下面是图21-4的描述" title="下面是图21-4的描述" longdesc="img_text/path_based.html"><br><a href="img_text/path_based.html">“图21-4使用HTTP和URL进行基于路径的访问”的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-AE4B7F1D-DAA4-44EB-81B8-7BC423526926">使用Internet协议访问Oracle XML DB资源</a><br>Oracle Net Services提供了一种访问数据库资源的方法。Oracle XML DB对Internet协议的支持提供了另一种访问数据库资源的方法。
                     </li>
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-7057EB00-B49B-49AB-B9FE-6C984DC76C56">使用协议和资源API访问Oracle ASM文件 - 适用于DBA</a><br>Oracle自动存储管理（Oracle ASM）将数据库文件组织到<span class="italic">磁盘组中，</span>以简化管理，数据库镜像和I / O平衡。存储库访问扩展到Oracle ASM文件，位于<span class="italic">虚拟</span>存储库文件夹<code class="codeph">/sys/asm</code> 。此访问权限保留给数据库管理员（DBA）。它<span class="italic">不</span>适合开发人员。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" title="在Oracle XML DB Repository中有多种方法可以访问和操作数据，包括使用标准协议，如FTP和HTTP（S）/ WebDAV; Oracle XML DB资源应用程序接口（API）;并且存储库视图RESOURCE_VIEW和PATH_VIEW。">访问Oracle XML DB存储库数据</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5310"></a><div class="props_rev_3"><a id="GUID-AE4B7F1D-DAA4-44EB-81B8-7BC423526926" name="GUID-AE4B7F1D-DAA4-44EB-81B8-7BC423526926"></a><h4 id="ADXDB-GUID-AE4B7F1D-DAA4-44EB-81B8-7BC423526926" class="sect4"><span class="enumeration_section">21.4.1</span>使用Internet协议访问Oracle XML DB资源</h4>
                  <div>
                     <p>Oracle Net Services提供了一种访问数据库资源的方法。Oracle XML DB对Internet协议的支持提供了另一种访问数据库资源的方法。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-BAD95E12-1D8F-4456-BCC7-CC72685BAD2E">您可以在何处使用Oracle XML DB协议访问</a><br>Oracle Net Services针对面向记录的数据进行了优化。Internet协议是为面向流的数据而设计的，例如二进制文件或XML文本文档。在某些情况下，Oracle XML DB协议访问是Net Services的有价值替代方案。
                        </li>
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-1BEEFCCD-0283-4D61-961A-1B050296F128">对Oracle XML DB的协议访问概述</a><br>对Oracle XML DB的协议访问涉及连接，验证用户，解析请求以及调用Java servlet。
                        </li>
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-CB8BB43E-B2F2-4D64-A632-F410BC071C79">检索Oracle XML DB资源</a><br>当协议指示要检索资源时，通过将其作为XML数据或<code class="codeph">RAW</code>格式流式传输，解析资源的路径名并获取资源。
                        </li>
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-421C24B7-EC44-49E6-BCE9-A6803D521623">存储Oracle XML DB资源</a><br>当协议指示要存储作为XML文档的资源时，查阅其关联的XML模式（如果有的话）以确定存储文档的默认表。
                        </li>
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-18142142-B1B1-4A5F-8F63-59C5FA3E7D74">Internet协议和XMLType：XMLType直接流写</a><br>Oracle XML DB通过使用Java <code class="codeph">XMLType</code>方法<code class="codeph">writeToStream()</code>支持<code class="codeph">XMLType</code>级别的Internet协议。此方法本机实现，并将<code class="codeph">XMLType</code>数据直接写入协议请求流。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6" title="Oracle XML DB Repository文件夹支持许多操作系统使用的相同协议标准。这使得存储库文件夹在支持的操作系统环境中充当本机文件夹（目录）。">对存储库资源的导航或路径访问</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB5311"></a><div class="props_rev_3"><a id="GUID-BAD95E12-1D8F-4456-BCC7-CC72685BAD2E" name="GUID-BAD95E12-1D8F-4456-BCC7-CC72685BAD2E"></a><h5 id="ADXDB-GUID-BAD95E12-1D8F-4456-BCC7-CC72685BAD2E" class="sect5"><span class="enumeration_section">21.4.1.1</span>可以使用Oracle XML DB协议访问的位置</h5>
                     <div>
                        <p>Oracle Net Services针对面向记录的数据进行了优化。Internet协议是为面向流的数据而设计的，例如二进制文件或XML文本文档。在某些情况下，Oracle XML DB协议访问是Net Services的有价值替代方案。</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用数据库（如文件系统）从面向文件的应用程序直接访问数据库</p>
                           </li>
                           <li>
                              <p>需要统一数据访问方法的异构应用程序服务器环境（例如大多数数据服务器支持的XML over HTTP，包括MS SQL Server，Exchange，Notes，许多XML数据库，股票报价服务和新闻订阅源）</p>
                           </li>
                           <li>
                              <p>需要XML文本形式的数据的应用程序服务器环境</p>
                           </li>
                           <li>
                              <p>使用客户端XSL格式化不需要太多应用程序处理的数据报的Web应用程序</p>
                           </li>
                           <li>
                              <p>使用在数据库内运行的Java servlet的Web应用程序</p>
                           </li>
                           <li>
                              <p>Web访问面向XML的存储过程</p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-AE4B7F1D-DAA4-44EB-81B8-7BC423526926" title="Oracle Net Services提供了一种访问数据库资源的方法。Oracle XML DB对Internet协议的支持提供了另一种访问数据库资源的方法。">使用Internet协议访问Oracle XML DB资源</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5312"></a><div class="props_rev_3"><a id="GUID-1BEEFCCD-0283-4D61-961A-1B050296F128" name="GUID-1BEEFCCD-0283-4D61-961A-1B050296F128"></a><h5 id="ADXDB-GUID-1BEEFCCD-0283-4D61-961A-1B050296F128" class="sect5"><span class="enumeration_section">21.4.1.2</span>对Oracle XML DB的协议访问概述</h5>
                     <div>
                        <p>对Oracle XML DB的协议访问涉及连接，验证用户，解析请求以及调用Java servlet。</p>
                        <p>使用协议访问Oracle XML DB的过程如下：</p>
                        <ol>
                           <li>
                              <p>建立连接对象，协议可能会读取请求的一部分。</p>
                           </li>
                           <li>
                              <p>协议决定用户是否已经过身份验证并希望重用现有会话，或者必须重新验证连接（后者更常见）。</p>
                           </li>
                           <li>
                              <p>从会话池中拉出现有会话，否则创建新会话。</p>
                           </li>
                           <li>
                              <p>如果未提供身份验证，并且请求是HTTP <code class="codeph">get</code>或<code class="codeph">head</code> ，则会话将以<code class="codeph">ANONYMOUS</code>用户身份运行。如果会话已经作为<code class="codeph">ANONYMOUS</code>用户进行了身份验证，则重用现有会话无需任何成本。如果已提供身份验证，则使用数据库重新身份验证例程来验证连接。
                              </p>
                           </li>
                           <li>
                              <p>请求已解析。</p>
                           </li>
                           <li>
                              <p>（仅限HTTP）如果请求的路径名映射到servlet，则使用Java虚拟机（JVM）调用servlet。servlet代码将响应写入响应流或要求<code class="codeph">XMLType</code>实例执行此操作。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-AE4B7F1D-DAA4-44EB-81B8-7BC423526926" title="Oracle Net Services提供了一种访问数据库资源的方法。Oracle XML DB对Internet协议的支持提供了另一种访问数据库资源的方法。">使用Internet协议访问Oracle XML DB资源</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5313"></a><div class="props_rev_3"><a id="GUID-CB8BB43E-B2F2-4D64-A632-F410BC071C79" name="GUID-CB8BB43E-B2F2-4D64-A632-F410BC071C79"></a><h5 id="ADXDB-GUID-CB8BB43E-B2F2-4D64-A632-F410BC071C79" class="sect5"><span class="enumeration_section">21.4.1.3</span>检索Oracle XML DB资源</h5>
                     <div>
                        <p>当协议指示要检索资源时，通过将其作为XML数据或<code class="codeph">RAW</code>格式流式传输，解析资源的路径名并获取资源。
                        </p>
                        <p>正在获取的资源将作为XML数据进行流式传输，但包含元素<code class="codeph">XDBBinary</code>资源除外，它是XML二进制数据类型，其内容以<code class="codeph">RAW</code>格式流式传输。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-AE4B7F1D-DAA4-44EB-81B8-7BC423526926" title="Oracle Net Services提供了一种访问数据库资源的方法。Oracle XML DB对Internet协议的支持提供了另一种访问数据库资源的方法。">使用Internet协议访问Oracle XML DB资源</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5314"></a><div class="props_rev_3"><a id="GUID-421C24B7-EC44-49E6-BCE9-A6803D521623" name="GUID-421C24B7-EC44-49E6-BCE9-A6803D521623"></a><h5 id="ADXDB-GUID-421C24B7-EC44-49E6-BCE9-A6803D521623" class="sect5"><span class="enumeration_section">21.4.1.4</span> Oracle XML DB资源的存储</h5>
                     <div>
                        <p>当协议指示要存储作为XML文档的资源时，查阅其关联的XML模式（如果有的话）以确定存储文档的默认表。</p>
                        <p>Oracle XML DB检查<code class="codeph">.xml</code> ， <code class="codeph">.xsl</code> ， <code class="codeph">.xsd</code>文档文件扩展名。如果文档是XML，则完成预解析步骤，从而读取足够的资源以确定文档中根元素的XML <code class="codeph">schemaLocation</code>和<code class="codeph">namespace</code> 。如果已注册的模式位于<code class="codeph">schemaLocation</code> URL，并且它具有当前文档的根元素的定义，则为该根元素指定的缺省表用于存储资源的内容。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-AE4B7F1D-DAA4-44EB-81B8-7BC423526926" title="Oracle Net Services提供了一种访问数据库资源的方法。Oracle XML DB对Internet协议的支持提供了另一种访问数据库资源的方法。">使用Internet协议访问Oracle XML DB资源</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5315"></a><div class="props_rev_3"><a id="GUID-18142142-B1B1-4A5F-8F63-59C5FA3E7D74" name="GUID-18142142-B1B1-4A5F-8F63-59C5FA3E7D74"></a><h5 id="ADXDB-GUID-18142142-B1B1-4A5F-8F63-59C5FA3E7D74" class="sect5"><span class="enumeration_section">21.4.1.5</span> Internet协议和XMLType：XMLType直接流写</h5>
                     <div>
                        <p>Oracle XML DB通过使用Java <code class="codeph">XMLType</code>方法<code class="codeph">writeToStream()</code>支持<code class="codeph">XMLType</code>级别的Internet协议。此方法本机实现，并将<code class="codeph">XMLType</code>数据直接写入协议请求流。
                        </p>
                        <p>这避免了Java VM执行成本以及通过Java数据类型转换数据库数据和创建Java对象的开销，从而显着提高了性能。如果Java代码仅处理靠近根的XML元素树，并且不遍历太多的叶元素，则性能会进一步增强，因此创建的Java对象相对较少。</p>
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="repository-access-using-protocols.html#GUID-0476309D-E3DF-4C56-BF21-68CD04D00C98" title="您可以使用FTP和HTTP（S）/ WebDAV协议访问Oracle XML DB存储库数据。">使用协议的存储库访问</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-AE4B7F1D-DAA4-44EB-81B8-7BC423526926" title="Oracle Net Services提供了一种访问数据库资源的方法。Oracle XML DB对Internet协议的支持提供了另一种访问数据库资源的方法。">使用Internet协议访问Oracle XML DB资源</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADXDB5317"></a><a id="ADXDB5316"></a><div class="props_rev_3"><a id="GUID-7057EB00-B49B-49AB-B9FE-6C984DC76C56" name="GUID-7057EB00-B49B-49AB-B9FE-6C984DC76C56"></a><h4 id="ADXDB-GUID-7057EB00-B49B-49AB-B9FE-6C984DC76C56" class="sect4"><span class="enumeration_section">21.4.2</span>使用协议和资源API访问Oracle ASM文件 - 适用于DBA</h4>
                  <div>
                     <p>Oracle自动存储管理（Oracle ASM）将数据库文件组织到<span class="italic">磁盘组中，</span>以简化管理，数据库镜像和I / O平衡。存储库访问扩展到Oracle ASM文件，位于<span class="italic">虚拟</span>存储库文件夹<code class="codeph">/sys/asm</code> 。此访问权限保留给数据库管理员（DBA）。它<span class="italic">不</span>适合开发人员。
                     </p>
                     <p>此类访问的典型用法是将Oracle ASM文件从一个数据库实例复制到另一个数据库实例。例如，DBA可以使用WebDAV协议在图形用户界面中查看文件夹<code class="codeph">/sys/asm</code> ，然后将数据泵转储集的副本从Oracle ASM磁盘组拖放到操作系统文件中系统。
                     </p>
                     <p>默认情况下，在Oracle XML DB安装期间会创建虚拟文件夹<code class="codeph">/sys/asm</code> 。如果数据库未配置为使用Oracle ASM，则该文件夹为空，并且不允许对其执行任何操作。
                     </p>
                     <p>Folder <code class="codeph">/sys/asm</code>包含遵循由Oracle ASM <span class="italic">完全限定文件名</span>结构定义的层次结构的文件夹和子文件夹：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>它包含每个已安装<span class="italic">磁盘组</span>的子文件夹。
                           </p>
                        </li>
                        <li>
                           <p>磁盘组文件夹包含使用该磁盘组的每个<span class="italic">数据库</span>的子文件夹。此外，磁盘组文件夹可能包含与管理员创建的Oracle ASM <span class="italic">别名</span>对应的文件和文件夹。
                           </p>
                        </li>
                        <li>
                           <p>数据库文件夹包含文件类型文件夹。</p>
                        </li>
                        <li>
                           <p>文件类型文件夹包含Oracle ASM文件，这些文件是二进制文件。</p>
                        </li>
                     </ul>
                     <p>此层次结构<a href="accessing-XML-DB-repository-data.html#GUID-7057EB00-B49B-49AB-B9FE-6C984DC76C56__BABIGDBA">如图21-5</a>所示，为简单起见，省略了为别名创建的目录。
                     </p>
                     <div class="figure" id="GUID-7057EB00-B49B-49AB-B9FE-6C984DC76C56__BABIGDBA">
                        <p class="titleinfigure">图21-5 Oracle ASM虚拟文件夹层次结构</p><img src="img/admin075.gif" width="592" alt="下面是图21-5的描述" title="下面是图21-5的描述" longdesc="img_text/admin075.html"><br><a href="img_text/admin075.html">“图21-5 Oracle ASM虚拟文件夹层次结构”的说明</a></div>
                     <!-- class="figure" -->
                     <p>以下使用限制适用于虚拟文件夹<code class="codeph">/sys/asm</code> 。你<span class="italic">不能</span> ：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用SQL <span class="italic">查询</span> <code class="codeph">/sys/asm</code></p>
                        </li>
                        <li>
                           <p>把常规文件放在<code class="codeph">/sys/asm</code> （你只能在那里放置Oracle ASM文件）</p>
                        </li>
                        <li>
                           <p><span class="italic">将</span> Oracle ASM文件<span class="italic">移动</span> （重命名）到其他Oracle ASM磁盘组或Oracle ASM外部的文件夹</p>
                        </li>
                        <li>
                           <p>创建指向现有Oracle ASM文件或目录的<span class="italic">硬链接</span></p>
                        </li>
                     </ul>
                     <p>此外：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>您必须具有角色<code class="codeph">DBA</code>的权限才能查看文件夹<code class="codeph">/sys/asm</code> 。
                           </p>
                        </li>
                        <li>
                           <p>要使用Oracle XML DB协议访问<code class="codeph">/sys/asm</code> ，您必须以<code class="codeph">SYS</code>以外的用户身份登录。</p>
                        </li>
                     </ul>
                     <p>同样，Oracle ASM虚拟文件夹操作仅适用于<span class="italic">数据库管理员</span> ，而不适用于开发人员。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-7057EB00-B49B-49AB-B9FE-6C984DC76C56__GUID-323094DE-A48F-43E9-8AF8-6604E330148E">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="repository-access-using-protocols.html#GUID-8A69CB6C-5136-4ACD-8291-2EAE667CC19D" title="Oracle自动存储管理（Oracle ASM）将数据库文件组织到磁盘组中，以简化管理并增加诸如数据库镜像和I / O平衡等优势。您可以使用协议和资源API访问存储库虚拟文件夹/ sys / asm中的Oracle ASM文件。/ sys / asm中的所有文件都是二进制文件。">将FTP与Oracle ASM文件一起使用，以</a>获取使用带有<code class="codeph">/sys/asm</code>协议FTP的示例</p>
                           </li>
                           <li>
                              <p><a href="../ostmg/about-asmcmd.html#OSTMG-GUID-117FE071-9ECE-40BC-8FFA-5D7AB12ADCDD" target="_blank"><span><cite>“Oracle自动存储管理管理员指南”，</cite></span></a>以获取有关完全限定的Oracle ASM文件名的语法的信息以及有关虚拟文件夹结构的详细信息</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-EF77AB95-F71F-4DCF-B789-F9D02EA36CE6" title="Oracle XML DB Repository文件夹支持许多操作系统使用的相同协议标准。这使得存储库文件夹在支持的操作系统环境中充当本机文件夹（目录）。">对存储库资源的导航或路径访问</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5319"></a><a id="ADXDB5318"></a><div class="props_rev_3"><a id="GUID-00093774-B340-4178-9E9C-080EC8592098" name="GUID-00093774-B340-4178-9E9C-080EC8592098"></a><h3 id="ADXDB-GUID-00093774-B340-4178-9E9C-080EC8592098" class="sect3"><span class="enumeration_section">21.5</span>基于查询的存储库资源访问</h3>
               <div>
                  <p>PL / SQL包<code class="codeph">DBMS_XDB_REPOS</code>提供了作用于Oracle XML DB存储库资源的子程序。此API基于公共视图<code class="codeph">RESOURCE_VIEW</code>和<code class="codeph">PATH_VIEW</code> ，它们允许通过FTP和HTTP（S）/ WebDAV等协议对存储库数据进行SQL访问。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">PATH_VIEW</code> - 每个唯一的存储库路径都有一行</p>
                     </li>
                     <li>
                        <p><code class="codeph">RESOURCE_VIEW</code> - 每个资源都有一行</p>
                     </li>
                  </ul>
                  <p>通过这些视图，您可以访问和更新存储库中存储的文档的元数据和内容。视图上的操作使用底层存储库表，例如<code class="codeph">XDB$RESOURCE</code> 。</p>
                  <p>每个视图都包含虚拟列<code class="codeph">RES</code> 。您可以使用列<code class="codeph">RES</code>来使用接受存储库路径表示法的SQL语句来访问和更新资源文档。
                  </p>
                  <p>查看<code class="codeph">RESOURCE_VIEW</code>包含列<code class="codeph">ANY_PATH</code> 。列<code class="codeph">ANY_PATH</code>包含一个有效的URL，当前用户可以将该URL传递给PL / SQL构造函数<code class="codeph">XDBURIType</code>以访问资源内容。如果此内容不是二进制数据，则资源本身也包含内容。
                  </p>
                  <p><a href="accessing-XML-DB-repository-data.html#GUID-00093774-B340-4178-9E9C-080EC8592098__G1046678" title="此表描述了RESOURCE_VIEW和PATH_VIEW之间的差异。它有三行两列。">表21-2</a>总结了视图之间的差异。
                  </p>
                  <div class="tblformal" id="GUID-00093774-B340-4178-9E9C-080EC8592098__G1046678">
                     <p class="titleintable">表21-2 PATH_VIEW和RESOURCE_VIEW之间的差异</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="PATH_VIEW和RESOURCE_VIEW之间的差异" width="100%" border="1" summary="This table describes differences between RESOURCE_VIEW and PATH_VIEW. It has three rows and two columns." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="52%" id="d108756e3076">PATH_VIEW</th>
                              <th align="left" valign="bottom" width="48%" id="d108756e3079">RESOURCE_VIEW</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d108756e3084" headers="d108756e3076 ">
                                 <p>包含链接属性</p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d108756e3084 d108756e3079 ">
                                 <p>没有链接属性</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="52%" id="d108756e3091" headers="d108756e3076 ">
                                 <p>存储库中的每个唯一<span class="italic">路径</span>都有一行</p>
                              </td>
                              <td align="left" valign="top" width="48%" headers="d108756e3091 d108756e3079 ">
                                 <p>存储库中的每个<span class="italic">资源</span>都有一行</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>这些视图中的行是<code class="codeph">XMLType</code>数据类型。在<code class="codeph">RESOURCE_VIEW</code> ，与资源相关联的单个路径是从引用资源的可能路径中任意选择的。Oracle XML DB提供了SQL函数，例如<code class="codeph">under_path</code> ，它允许应用程序搜索特定文件夹中包含的资源（递归），获取资源深度等。
                  </p>
                  <p>可以在存储库视图上使用DML代码来插入，重命名，删除和更新资源属性和内容。程序化API必须用于其他操作，例如创建指向现有资源的链接。</p>
                  <p>Oracle XML DB支持<strong class="term">链接</strong>的概念。链接可以定义给定文档的多个路径。一个单独的XML文档（称为<strong class="term">链接属性文档</strong> ）维护特定于路径的元数据属性，而不是资源。无论何时创建资源，还会创建初始链接。
                  </p>
                  <p><code class="codeph">PATH_VIEW</code>公开了链接属性文档。<code class="codeph">PATH_VIEW</code>有一个条目用于文档的每个可能路径。<code class="codeph">PATH_VIEW</code>列<code class="codeph">RES</code>包含此链接指向的资源文档。列<code class="codeph">PATH</code>包含链接允许您用于访问资源的路径。列<code class="codeph">LINK</code>包含此<code class="codeph">PATH</code>的链接属性文档（元数据）。</p>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="accessing-XML-DB-repository-data.html#GUID-F37F983A-A132-4BD9-9232-7C3B4F89C655" title="Oracle XML DB中的链接可以是存储库链接或文档链接。存储库链接可以是硬链接或弱链接。当文档链接的目标是存储库资源时，它们也可以是硬链接或弱链接。">链接类型</a></li>
                        <li><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" title="预定义的公共视图RESOURCE_VIEW和PATH_VIEW提供对Oracle XML DB存储库数据的访问。您可以使用Oracle SQL函数under_path和equals_path根据其路径名查询资源，并使用函数path和depth来返回资源路径名和深度。">使用RESOURCE_VIEW和PATH_VIEW进行存储库访问</a></li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-00093774-B340-4178-9E9C-080EC8592098__GUID-0FDACE1A-C3C7-4791-9AC8-523EBA2C243C">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="repository-access-control.html#GUID-CD4A712D-CCA2-4A19-909E-AEC57849A55A" title="Oracle数据库提供经典的数据库安全性，例如数据库用户的行级和列级安全访问。它还为Oracle XML DB Repository中的资源提供了细粒度的访问控制。您可以创建，设置和修改访问控制列表（ACL）。">存储库访问控制</a></p>
                        </li>
                        <li>
                           <p>有关查看<code class="codeph">PATH_VIEW</code>更多信息，请<code class="codeph">PATH_VIEW</code> <a href="../refrn/PATH_VIEW.html#REFRN29079" target="_blank"><span><cite>Oracle数据库参考</cite></span>以了解<code class="codeph">BPT</code></a></p>
                        </li>
                        <li>
                           <p>有关查看<code class="codeph">RESOURCE_VIEW</code>更多信息，请参阅<a href="../refrn/RESOURCE_VIEW.html#REFRN29080" target="_blank"><span><cite>Oracle数据库参考</cite></span>以了解<code class="codeph">BPT</code></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" title="在Oracle XML DB Repository中有多种方法可以访问和操作数据，包括使用标准协议，如FTP和HTTP（S）/ WebDAV; Oracle XML DB资源应用程序接口（API）;并且存储库视图RESOURCE_VIEW和PATH_VIEW。">访问Oracle XML DB存储库数据</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5320"></a><div class="props_rev_3"><a id="GUID-B663D1C9-894E-4518-B66B-B9D9484819BC" name="GUID-B663D1C9-894E-4518-B66B-B9D9484819BC"></a><h3 id="ADXDB-GUID-B663D1C9-894E-4518-B66B-B9D9484819BC" class="sect3"><span class="enumeration_section">21.6</span> Servlet访问资源库资源</h3>
               <div>
                  <p>Oracle XML DB实现了Java Servlet API 2.2版。</p>
                  <p>支持受这些限制的限制：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>所有servlet都必须是可分发的。他们必须期望在不同的虚拟机中运行。</p>
                     </li>
                     <li>
                        <p>不支持WAR和<code class="codeph">web.xml</code>文件。Oracle XML DB支持此文件中的XML配置的子集。可以将XSLT样式表应用于<code class="codeph">web.xml</code>以生成servlet定义。必须使用外部工具为<code class="codeph">web.xml</code>文件中定义的角色创建数据库角色。
                        </p>
                     </li>
                     <li>
                        <p>JSP（Java Server Pages）支持可以作为servlet安装并手动配置。</p>
                     </li>
                     <li>
                        <p>不支持<code class="codeph">HTTPSession</code>和相关类。
                        </p>
                     </li>
                     <li>
                        <p>仅支持一个servlet上下文（即一个Web应用程序）。</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="how-to-write-XML-DB-applications-in-Java.html#GUID-C6EABC36-3FA8-4A82-B940-C20A01D8F586" title="提供了使用Java编写Oracle XML DB应用程序的设计指南。这包括为Oracle XML DB编写和配置Java servlet的准则。">Java中的Oracle XML DB应用程序指南</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" title="在Oracle XML DB Repository中有多种方法可以访问和操作数据，包括使用标准协议，如FTP和HTTP（S）/ WebDAV; Oracle XML DB资源应用程序接口（API）;并且存储库视图RESOURCE_VIEW和PATH_VIEW。">访问Oracle XML DB存储库数据</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5322"></a><a id="ADXDB5321"></a><div class="props_rev_3"><a id="GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83" name="GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83"></a><h3 id="ADXDB-GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83" class="sect3"><span class="enumeration_section">21.7</span>存储库资源的操作</h3>
               <div>
                  <p>您可以使用Java，PL / SQL，Internet协议和Oracle XML DB Content Connector（ <span class="italic">不建议使用</span> ）对存储在Oracle XML DB存储库资源中的数据进行操作。描述了最常见的操作，以及使用它们所需的数据库权限。
                  </p>
                  <p>您可以通过以下任何方式访问存储库数据：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>适用于Java的Oracle XML DB资源API</p>
                     </li>
                     <li>
                        <p>用于PL / SQL的Oracle XML DB资源视图API和Oracle XML DB资源API的组合</p>
                     </li>
                     <li>
                        <p>Internet协议（HTTP（S）/ WebDAV和FTP）和Oracle XML DB协议服务器</p>
                     </li>
                     <li>
                        <p>Oracle XML DB Content Connector（ <span class="italic">不建议使用</span> ），以及通过它的标准Content Repository API for Java（JCR）。
                        </p>
                     </li>
                  </ul>
                  <p>可以等效地使用这些访问方法。如何将内容添加到存储库或从存储库中检索它并不重要。例如，您可以使用SQL或PL / SQL将内容添加到存储库，然后使用Internet协议检索它，或者反过来。</p>
                  <p><a href="accessing-XML-DB-repository-data.html#GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83__BABBJJDI" title="此表描述了用于访问Oracle XML DB存储库的API选项。">表21-3</a>列出了常见的Oracle XML DB存储库操作，并描述了如何使用多种访问方法完成这些操作。该表显示了不同方法的共同功能，但并非所有方法都适用于任何特定任务。除非另有说明，否则此表中的“资源”可以是文件资源，也可以是文件夹资源。
                  </p>
                  <p><a href="accessing-XML-DB-repository-data.html#GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83__BABBJJDI" title="此表描述了用于访问Oracle XML DB存储库的API选项。">表21-3</a>还显示了每个操作所需的资源特权。
                  </p>
                  <div class="tblformalwide" id="GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83__BABBJJDI">
                     <p class="titleintable">表21-3访问Oracle XML DB存储库：API选项</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="访问Oracle XML DB存储库：API选项" width="100%" border="1" summary="This table describes the API options for accessing Oracle XML DB Repository." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="10%" id="d108756e3390">数据访问</th>
                              <th align="left" valign="bottom" width="63%" id="d108756e3393">SQL和PL / SQL</th>
                              <th align="left" valign="bottom" width="10%" id="d108756e3396">协议</th>
                              <th align="left" valign="bottom" width="12%" id="d108756e3399">需要资源权限</th>
                              <th align="left" valign="bottom" width="5%" id="d108756e3402">JCR支持</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3407" headers="d108756e3390 ">
                                 <p>创建资源</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3407 d108756e3393 "><pre class="oac_no_warn" dir="ltr">DBMS_XDB_REPOS.createResource（'/ public / TT / testcase.txt'，'ORIGINAL text'）; INSERT INTO RESOURCE_VIEW（ANY_PATH，RES）SELECT'/public/T1/copy1.txt'，RES FROM RESOURCE_VIEW WHERE equals_path（RES，'/ public / T1 / testcase.txt'）= 1;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3407 d108756e3396 ">
                                 <p>HTTP： <code class="codeph">PUT;</code></p>
                                 <p>FTP： <code class="codeph">PUT</code></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3407 d108756e3399 ">
                                 <p><code class="codeph">DAV::bind</code>在父文件夹上</p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3407 d108756e3402 ">
                                 <p>是</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3431" headers="d108756e3390 ">
                                 <p>更新资源内容</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3431 d108756e3393 "><pre class="oac_no_warn" dir="ltr">UPDATE RESOURCE_VIEW SET RES = XMLQuery（'declare default element namespace“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) copy $ i：= $ p1 modify（for $ j in $ i /资源/内容/文本返回用$ p2替换节点$ j的值）返回$ i'PASSING RES为“p1”，'NEW text'AS“p2”返回内容）WHERE equals_path（RES，'/ public / T1 / copy1 .txt'）= 1</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3431 d108756e3396 ">
                                 <p>HTTP： <code class="codeph">PUT;</code></p>
                                 <p>FTP： <code class="codeph">PUT</code></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3431 d108756e3399 ">
                                 <p><code class="codeph">xdb:write-content</code>在资源上<code class="codeph">xdb:write-content</code></p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3431 d108756e3402 ">
                                 <p>是</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3455" headers="d108756e3390 ">
                                 <p>更新资源属性</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3455 d108756e3393 "><pre class="oac_no_warn" dir="ltr">UPDATE RESOURCE_VIEW SET RES = XMLQuery（'declare default element namespace“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) copy $ i：= $ p1 modify（for $ j in $ i / Resource / DisplayName返回节点$ j的值替换为$ p2）返回$ i'PASSING RES为“p1”，'NewName1.txt'AS“p2”返回内容）WHERE equals_path（RES，'/ public / T1 / copy1。 txt'）= 1;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3455 d108756e3396 ">
                                 <p>WebDAV的：</p>
                                 <p><code class="codeph">PROPPATCH;</code></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3455 d108756e3399 ">
                                 <p><code class="codeph">DAV::write-properties</code>资源上的<code class="codeph">DAV::write-properties</code></p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3455 d108756e3402 ">
                                 <p>是</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3476" headers="d108756e3390 ">
                                 <p>更新资源ACL</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3476 d108756e3393 "><pre class="oac_no_warn" dir="ltr">EXEC DBMS_XDB_REPOS.setACL（'/ public / T1 / copy1.txt'，'/ sys / acls / all_owner_acl.xml'）;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3476 d108756e3396 ">
                                 <p>不适用</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3476 d108756e3399 ">
                                 <p><code class="codeph">DAV::write-acl</code> on resource</p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3476 d108756e3402 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3494" headers="d108756e3390 ">
                                 <p>取消链接资源（删除最后一个链接）</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3494 d108756e3393 "><pre class="oac_no_warn" dir="ltr">EXEC DBMS_XDB_REPOS.deleteResource（）</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">DELETE FROM RESOURCE_VIEW WHERE equals_path（RES，path）&gt; 0</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3494 d108756e3396 ">
                                 <p>HTTP：</p>
                                 <p><code class="codeph">删除;</code></p>
                                 <p>FTP： <code class="codeph">delete</code></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3494 d108756e3399 ">
                                 <p><code class="codeph">DAV::unbind</code>在父文件夹上</p>
                                 <p><code class="codeph">xdb:unlink-from</code> on resource</p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3494 d108756e3402 ">
                                 <p>是</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3527" headers="d108756e3390 ">
                                 <p>强制删除所有资源链接</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3527 d108756e3393 "><pre class="oac_no_warn" dir="ltr">DBMS_XDB_REPOS.deleteResource（）</pre><p>要么</p><pre class="oac_no_warn" dir="ltr">DELETE FROM PATH_VIEW WHERE XMLCast（XMLQuery（'declare namespace n1 =“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) // n1：DisplayName'PASSING RES RETURNING CONTENT）AS VARCHAR2（256 ））='我的资源'</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3527 d108756e3396 ">
                                 <p>FTP：</p>
                                 <p><code class="codeph">引用</code> 
                                 </p>
                                 <p><code class="codeph">rm_rf</code></p>
                                 <p><span class="italic"><code class="codeph">资源</code></span></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3527 d108756e3399 ">
                                 <p><code class="codeph">DAV::unbind</code>在所有父文件夹上</p>
                                 <p><code class="codeph">xdb:unlink-from</code> on resource</p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3527 d108756e3402 ">
                                 <p>是</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3564" headers="d108756e3390 ">
                                 <p>移动资源</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3564 d108756e3393 "><pre class="oac_no_warn" dir="ltr">UPDATE PATH_VIEW SET path ='/ public / T1 / copy2.txt'WHERE equals_path（RES，'/ public / T1 / copy1.txt'）= 1;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3564 d108756e3396 ">
                                 <p>WebDAV的：</p>
                                 <p><code class="codeph">移动;</code> 
                                 </p>
                                 <p>FTP： <code class="codeph">rename</code></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3564 d108756e3399 ">
                                 <p><code class="codeph">DAV::unbind</code>在源父文件夹上</p>
                                 <p><code class="codeph">DAV::bind</code>目标父文件夹</p>
                                 <p><code class="codeph">xdb:unlink-from</code>和<code class="codeph">xdb:link-to</code>资源上的<code class="codeph">xdb:link-to</code></p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3564 d108756e3402 ">
                                 <p>是</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3601" headers="d108756e3390 ">
                                 <p>复制资源</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3601 d108756e3393 "><pre class="oac_no_warn" dir="ltr">INSERT INTO PATH_VIEW（path，RES，link）SELECT'/ public / T1 / copy3.txt'，RES，link FROM PATH_VIEW WHERE equals_path（RES，'/ public / T1 / copy2.txt'）= 1;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3601 d108756e3396 ">
                                 <p>WebDAV的：</p>
                                 <p><code class="codeph">复制;</code></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3601 d108756e3399 ">
                                 <p>复制到新：</p>
                                 <p><code class="codeph">DAV::bind</code>目标父文件夹</p>
                                 <p><code class="codeph">DAV::read</code>资源</p>
                                 <p>复制到现有（替换）：</p>
                                 <p><code class="codeph">DAV::read</code>资源</p>
                                 <p>现有目标资源上的<code class="codeph">DAV::write-properties</code>和<code class="codeph">DAV::write-content</code></p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3601 d108756e3402 ">
                                 <p>是</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3641" headers="d108756e3390 ">
                                 <p>创建到现有资源的硬链接</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3641 d108756e3393 "><pre class="oac_no_warn" dir="ltr">EXEC DBMS_XDB_REPOS.link（'/ public / T1 / copy3.txt'，'/ public / T1'，'myhardlink'）;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3641 d108756e3396 ">
                                 <p>不适用</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3641 d108756e3399 ">
                                 <p><code class="codeph">DAV::bind</code>在父文件夹上</p>
                                 <p><code class="codeph">xdb:link-to</code>资源上的<code class="codeph">xdb:link-to</code></p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3641 d108756e3402 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3663" headers="d108756e3390 ">
                                 <p>创建与现有资源的弱链接</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3663 d108756e3393 "><pre class="oac_no_warn" dir="ltr">EXEC DBMS_XDB_REPOS.link（'/ public / T1 / copy3.txt'，'/ public / T1'，'myweaklink'，DBMS_XDB_REPOS.LINK_TYPE_WEAK）;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3663 d108756e3396 ">
                                 <p>不适用</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3663 d108756e3399 ">
                                 <p><code class="codeph">DAV::bind</code>在父文件夹上</p>
                                 <p><code class="codeph">xdb:link-to</code>资源上的<code class="codeph">xdb:link-to</code></p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3663 d108756e3402 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3685" headers="d108756e3390 ">
                                 <p>更改资源的所有者</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3685 d108756e3393 "><pre class="oac_no_warn" dir="ltr">UPDATE RESOURCE_VIEW SET RES = XMLQuery（'copy $ i：= $ p1 modify（$ i /资源/所有者返回$ j节点$ j替换值）返回$ i'PASSING RES AS“p1”，' U2'AS“p2”RETURNING CONTENT）WHERE equals_path（RES，'/ public / T1 / copy3.txt'）= 1;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3685 d108756e3396 ">
                                 <p>不适用</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3685 d108756e3399 ">
                                 <p><code class="codeph">DAV::take-ownership</code>资源上<code class="codeph">DAV::take-ownership</code></p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3685 d108756e3402 ">
                                 <p>是</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3704" headers="d108756e3390 ">
                                 <p>获取资源内容的二进制或文本表示</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3704 d108756e3393 "><pre class="oac_no_warn" dir="ltr">SELECT XDBURIType（path）.getBLOB（）FROM DUAL; SELECT XMLQuery（'declare default element namespace“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) $ r / Resource / Contents'PASSING RES as“r”RETURNING CONTENT）FROM RESOURCE_VIEW WHERE equals_path （RES，'/ public / T1 / copy2.text'）= 1;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3704 d108756e3396 ">
                                 <p>HTTP： <code class="codeph">GET;</code></p>
                                 <p>FTP： <code class="codeph">get</code></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3704 d108756e3399 ">
                                 <p><code class="codeph">xdb:read-contents</code>资源上的<code class="codeph">xdb:read-contents</code></p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3704 d108756e3402 ">
                                 <p>是</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3728" headers="d108756e3390 ">
                                 <p>获取资源内容的<code class="codeph">XMLType</code>表示</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3728 d108756e3393 "><pre class="oac_no_warn" dir="ltr">SELECT XDBURIType（'/ public / T1 / res.xml'）。getXML FROM DUAL;</pre><pre class="oac_no_warn" dir="ltr">SELECT XMLQuery（</pre><pre class="oac_no_warn" dir="ltr">'声明默认元素命名空间“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:)</pre><pre class="oac_no_warn" dir="ltr">$ r /资源/内容/ *'传递RES为“r”返回内容）来自RESOURCE_VIEW WHERE equals_path（RES，'/ public / T1 / res.xml'）= 1;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3728 d108756e3396 ">
                                 <p>不适用</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3728 d108756e3399 ">
                                 <p><code class="codeph">xdb:read-contents</code>资源上的<code class="codeph">xdb:read-contents</code></p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3728 d108756e3402 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3755" headers="d108756e3390 ">
                                 <p>获取资源属性</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3755 d108756e3393 "><pre class="oac_no_warn" dir="ltr">SELECT XMLCast（XMLQuery（</pre><pre class="oac_no_warn" dir="ltr">'声明默认元素命名空间“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:)</pre><pre class="oac_no_warn" dir="ltr">$ r / Resource / LastModifier'PASSING RES as“r”返回内容）AS VARCHAR2（128））</pre><pre class="oac_no_warn" dir="ltr">FROM RESOURCE_VIEW WHERE equals_path（RES，'/ public / T1 / res.xml'）= 1;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3755 d108756e3396 ">
                                 <p>WebDAV的：</p>
                                 <p><code class="codeph">PROPFIND</code></p>
                                 <p><code class="codeph">（深度= 0）;</code></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3755 d108756e3399 ">
                                 <p><code class="codeph">xdb:read-properties</code>资源上的<code class="codeph">xdb:read-properties</code></p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3755 d108756e3402 ">
                                 <p>是</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3785" headers="d108756e3390 ">
                                 <p>列出文件夹中的资源</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3785 d108756e3393 "><pre class="oac_no_warn" dir="ltr">SELECT PATH FROM PATH_VIEW WHERE under_path（res，'/ public / T1'）= 1;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3785 d108756e3396 ">
                                 <p>WebDAV的：</p>
                                 <p><code class="codeph">PROPFIND</code></p>
                                 <p><code class="codeph">（深度= 0）;</code></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3785 d108756e3399 ">
                                 <p><code class="codeph">xdb:read-contents</code>文件夹上的<code class="codeph">xdb:read-contents</code></p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3785 d108756e3402 ">
                                 <p>是</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3809" headers="d108756e3390 ">
                                 <p>创建文件夹</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3809 d108756e3393 "><pre class="oac_no_warn" dir="ltr">调用DBMS_XDB_REPOS.createFolder（'/ public / T2'）;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3809 d108756e3396 ">
                                 <p>WebDAV的：</p>
                                 <p><code class="codeph">MKCOL;</code></p>
                                 <p>FTP： <code class="codeph">mkdir</code></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3809 d108756e3399 ">
                                 <p><code class="codeph">DAV::bind</code>在父文件夹上</p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3809 d108756e3402 ">
                                 <p>是</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3834" headers="d108756e3390 ">
                                 <p>取消链接空文件夹</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3834 d108756e3393 "><pre class="oac_no_warn" dir="ltr">DBMS_XDB_REPOS.deleteResource（ '/公共/ T2'）</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3834 d108756e3396 ">
                                 <p>HTTP：</p>
                                 <p><code class="codeph">删除;</code></p>
                                 <p>FTP： <code class="codeph">rmdir</code></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3834 d108756e3399 ">
                                 <p><code class="codeph">DAV::unbind</code>在父文件夹上</p>
                                 <p><code class="codeph">xdb:unlink-from</code> on resource</p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3834 d108756e3402 ">
                                 <p>是</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3863" headers="d108756e3390 ">
                                 <p>强行删除文件夹及其所有链接</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3863 d108756e3393 "><pre class="oac_no_warn" dir="ltr">DBMS_XDB_REPOS.deleteResource（'/ public / T2'，DBMS_XDB.DELETE_RECURSIVE_FORCE）;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3863 d108756e3396 ">
                                 <p>不适用</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3863 d108756e3399 ">
                                 <p><code class="codeph">DAV::unbind</code>在所有父文件夹上</p>
                                 <p><code class="codeph">xdb:unlink-from</code>文件夹资源</p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3863 d108756e3402 ">
                                 <p>是</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3885" headers="d108756e3390 ">
                                 <p>使用行锁获取资源</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3885 d108756e3393 "><pre class="oac_no_warn" dir="ltr">选择 ...FROM RESOURCE_VIEW FOR UPDATE ...;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3885 d108756e3396 ">
                                 <p>不适用</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3885 d108756e3399 ">
                                 <p><code class="codeph">xdb:read-properties</code>和<code class="codeph">xdb:read-contents</code>资源上的<code class="codeph">xdb:read-contents</code></p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3885 d108756e3402 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3906" headers="d108756e3390 ">
                                 <p>在资源上添加WebDAV锁定</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3906 d108756e3393 "><pre class="oac_no_warn" dir="ltr">EXEC DBMS_XDB_REPOS.LockResource（'/ public / T1 / theres.xml'，TRUE，TRUE）;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3906 d108756e3396 ">
                                 <p>WebDAV的：</p>
                                 <p><code class="codeph">锁;</code> 
                                 </p>
                                 <p>FTP：</p>
                                 <p><code class="codeph">报价锁</code></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3906 d108756e3399 ">
                                 <p><code class="codeph">DAV::write-properties</code>资源上的<code class="codeph">DAV::write-properties</code></p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3906 d108756e3402 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3933" headers="d108756e3390 ">
                                 <p>删除WebDAV锁</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3933 d108756e3393 "><pre class="oac_no_warn" dir="ltr">宣布...</pre><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_XDB_REPOS.GetLockToken（'/ public / T1 / res.xml'，locktoken）; DBMS_XDB_REPOS.UnlockResource（'/ public / T1 / res.xml'，locktoken）;结束;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3933 d108756e3396 ">
                                 <p>WebDAV： <code class="codeph">UNLOCK;</code></p>
                                 <p>FTP：</p>
                                 <p><code class="codeph">引用解锁</code></p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3933 d108756e3399 ">
                                 <p><code class="codeph">DAV::write-properties</code>和<code class="codeph">DAV::unlock</code>资源</p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3933 d108756e3402 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3963" headers="d108756e3390 ">
                                 <p>检查文件资源</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3963 d108756e3393 "><pre class="oac_no_warn" dir="ltr">EXEC DBMS_XDB_VERSION.checkOut（'/ public / T1 / theres.xml'）;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3963 d108756e3396 ">
                                 <p>不适用</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3963 d108756e3399 ">
                                 <p><code class="codeph">DAV::write-properties</code>资源上的<code class="codeph">DAV::write-properties</code></p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3963 d108756e3402 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e3982" headers="d108756e3390 ">
                                 <p>签入文件资源</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e3982 d108756e3393 "><pre class="oac_no_warn" dir="ltr">EXEC DBMS_XDB_VERSION.checkIn（'/ public / TT1 / res.xml'）;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e3982 d108756e3396 ">
                                 <p>不适用</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e3982 d108756e3399 ">
                                 <p><code class="codeph">DAV::write-properties</code>资源上的<code class="codeph">DAV::write-properties</code></p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e3982 d108756e3402 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e4000" headers="d108756e3390 ">
                                 <p>取消选中文件资源</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e4000 d108756e3393 "><pre class="oac_no_warn" dir="ltr">EXEC DBMS_XDB_VERSION.unCheckOut（'/ public / T1 / theres.xml'）;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e4000 d108756e3396 ">
                                 <p>不适用</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e4000 d108756e3399 ">
                                 <p><code class="codeph">DAV::write-properties</code>资源上的<code class="codeph">DAV::write-properties</code></p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e4000 d108756e3402 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e4018" headers="d108756e3390 ">
                                 <p>使文件资源版本化</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e4018 d108756e3393 "><pre class="oac_no_warn" dir="ltr">EXEC DBMS_XDB_VERSION.makeVersioned（'/ public / T1 / theres.xml'）;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e4018 d108756e3396 ">
                                 <p>不适用</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e4018 d108756e3399 ">
                                 <p><code class="codeph">DAV::write-properties</code>资源上的<code class="codeph">DAV::write-properties</code></p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e4018 d108756e3402 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e4036" headers="d108756e3390 ">
                                 <p>删除事件处理程序</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e4036 d108756e3393 ">
                                 <p><code class="codeph">DBMS_XEVENT.remove</code></p>
                              </td>
                              <td align="left" valign="top" width="10%" headers="d108756e4036 d108756e3396 ">
                                 <p>不适用</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e4036 d108756e3399 ">
                                 <p><code class="codeph">xdb:write-config</code>资源或父文件夹上的<code class="codeph">xdb:write-config</code> （取决于上下文）</p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e4036 d108756e3402 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e4055" headers="d108756e3390 ">
                                 <p>提交更改</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e4055 d108756e3393 "><pre class="oac_no_warn" dir="ltr">承诺;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e4055 d108756e3396 ">
                                 <p>每次请求后自动提交</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e4055 d108756e3399 ">
                                 <p>不适用</p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e4055 d108756e3402 ">
                                 <p>是</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="10%" id="d108756e4071" headers="d108756e3390 ">
                                 <p>回滚更改</p>
                              </td>
                              <td align="left" valign="top" width="63%" headers="d108756e4071 d108756e3393 "><pre class="oac_no_warn" dir="ltr">ROLLBACK;</pre></td>
                              <td align="left" valign="top" width="10%" headers="d108756e4071 d108756e3396 ">
                                 <p>不适用</p>
                              </td>
                              <td align="left" valign="top" width="12%" headers="d108756e4071 d108756e3399 ">
                                 <p>不适用</p>
                              </td>
                              <td align="left" valign="top" width="5%" headers="d108756e4071 d108756e3402 ">
                                 <p>是</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>除了<a href="accessing-XML-DB-repository-data.html#GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83__BABBJJDI" title="此表描述了用于访问Oracle XML DB存储库的API选项。">表21-3中</a>列出的权限之外，受操作影响的每个资源都需要权限<code class="codeph">xdb:read-properties</code> 。除了操作所针对的资源之外，影响资源的父文件夹的操作还需要该父文件夹上的特权<code class="codeph">xdb:read-properties</code> 。例如，删除资源会影响要删除的资源及其父文件夹，因此您需要资源及其父文件夹上的权限<code class="codeph">xdb:read-properties</code> 。
                  </p>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" title="预定义的公共视图RESOURCE_VIEW和PATH_VIEW提供对Oracle XML DB存储库数据的访问。您可以使用Oracle SQL函数under_path和equals_path根据其路径名查询资源，并使用函数path和depth来返回资源路径名和深度。">使用RESOURCE_VIEW和PATH_VIEW进行存储库访问</a></li>
                        <li><a href="PLSQL-access-to-XML-DB-repository.html#GUID-04D3270F-1AC3-407B-B730-6B5A93AA5D7C" title="PL / SQL包DBMS_XDB_CONFIG和DBMS_XDB_REPOS一起为PL / SQL提供Oracle XML DB资源应用程序接口（API）。您可以使用前者配置Oracle XML DB及其存储库。您使用后者在存储库上执行其他非配置操作。">PL / SQL访问Oracle XML DB存储库</a></li>
                        <li><a href="repository-access-using-protocols.html#GUID-0476309D-E3DF-4C56-BF21-68CD04D00C98" title="您可以使用FTP和HTTP（S）/ WebDAV协议访问Oracle XML DB存储库数据。">使用协议的存储库访问</a></li>
                        <li><a href="deprecated-content-repository-API-for-java.html#GUID-F0007175-676B-4187-AF1F-FC24D5ADCDBF" title="Oracle XML DB Content Connector实现了Java的Content Repository API（也称为JCR），这是Java社区为JSR-170开发的Java API标准。您可以使用Oracle XML DB Content Connector访问Oracle XML DB存储库。">不推荐使用的Java内容存储库API</a></li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83__GUID-07C931D5-F05B-4E55-AAEE-82ABAD44BC9E">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关PL / SQL包<code class="codeph">DBMS_XDB_REPOS</code>信息，请参阅<a href="../arpls/DBMS_XDB_REPOS.html#ARPLS74188" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                        </li>
                        <li>
                           <p>有关PL / SQL包<code class="codeph">DBMS_XDB_VERSION</code>信息，请参阅<a href="../arpls/DBMS_XDB_VERSION.html#ARPLS373" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                        </li>
                        <li>
                           <p>有关PL / SQL包<code class="codeph">DBMS_XEVENT</code>信息，请参阅<a href="../arpls/DBMS_XEVENT.html#ARPLS210" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" title="在Oracle XML DB Repository中有多种方法可以访问和操作数据，包括使用标准协议，如FTP和HTTP（S）/ WebDAV; Oracle XML DB资源应用程序接口（API）;并且存储库视图RESOURCE_VIEW和PATH_VIEW。">访问Oracle XML DB存储库数据</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB4194"></a><a id="ADXDB4195"></a><a id="ADXDB4196"></a><a id="ADXDB4193"></a><div class="props_rev_3"><a id="GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75" name="GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75"></a><h3 id="ADXDB-GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75" class="sect3"><span class="enumeration_section">21.8</span>使用SQL访问存储库资源的内容</h3>
               <div>
                  <p>在SQL中，您可以使用PL / SQL构造函数<code class="codeph">XDBURIType</code>或使用<code class="codeph">RESOURCE_VIEW</code>和相应的资源文档访问Oracle XML DB Repository中的文档内容。
                  </p>
                  <div class="section">
                     <p>最简单的方法是使用<code class="codeph">XDBURIType</code> 。您将URL传递给此构造函数以指定要访问的资源。假定URL从存储库的根开始。对象类型<code class="codeph">XDBURIType</code>提供方法<code class="codeph">getBLOB()</code> ， <code class="codeph">getCLOB()</code>和<code class="codeph">getXML()</code> ，以访问可与资源关联的不同类型的内容。
                     </p>
                     <p><a href="accessing-XML-DB-repository-data.html#GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__BJFIEFDJ">示例21-4</a>使用构造函数<code class="codeph">XDBURIType</code>来访问文本文档的内容。
                     </p>
                     <p>还可以使用<code class="codeph">RESOURCE_VIEW</code>和相应的资源文档访问文档的内容。<a href="accessing-XML-DB-repository-data.html#GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__BJFHICEA">例21-5</a>执行此操作以访问文本文档的内容。
                     </p>
                     <p>也可以通过这种方式访问XML文档的内容（基于XML模式或非基于模式）。<a href="accessing-XML-DB-repository-data.html#GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__BJFGFIAD">示例21-6</a>使用XPath表达式，该表达式包含来自XML文档的节点和来自相应资源文档的节点，以访问<code class="codeph">PurchaseOrder</code>文档的内容。
                     </p>
                     <p>在<a href="accessing-XML-DB-repository-data.html#GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__BJFGFIAD">示例21-6中</a> ，名称空间前缀<code class="codeph">r</code>标识XPath表达式中的哪些节点是资源名称空间的成员。名称空间前缀<code class="codeph">r</code>是使用SQL / XML函数<code class="codeph">XMLTable</code>的<code class="codeph">XMLNAMESPACES</code>子句定义的。此处需要名称空间声明，因为采购订单XML模式未定义名称空间，并且无法将名称空间前缀应用于<code class="codeph">PurchaseOrder</code>文档中的节点。
                     </p>
                     <div class="infoboxnotealso" id="GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__GUID-9760D64A-61A7-4F21-B2F4-7AAF9E4035B8">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">XMLTable</code>的<code class="codeph">XMLNAMESPACES</code>子句的更多信息，请<code class="codeph">XMLNAMESPACES</code> <a href="xquery-and-XML-DB.html#GUID-4F83A835-C94B-4D62-999B-111AB5E8A8F1" title="XQuery语言是您与Oracle XML DB中的XML数据交互的主要方式之一。对该语言的支持包括SQL * Plus commandXQUERY和SQL / XML函数XMLQuery，XMLTable，XMLExists和XMLCast。">XQuery和Oracle XML DB</a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__BJFIEFDJ">
                     <p class="titleinexample">示例21-4使用XDBURITYPE访问存储库中的文本文档</p><pre class="oac_no_warn" dir="ltr">SELECT XDBURIType（'/ home / QUINE / NurseryRhyme.txt'）。getCLOB（）FROM DUAL; XDBURITYPE（ '/ HOME /奎因/ NURSERYRHYME.TXT'）。GETCLOB（）----------------------------------------------- -----玛丽有一只小羊羔它的羊毛像雪一样白，玛丽去那只羊羔的地方肯定会选择一排。
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__BJFHICEA">
                     <p class="titleinexample">示例21-5使用RESOURCE_VIEW访问资源内容</p><pre class="oac_no_warn" dir="ltr">从RESOURCE_VIEW，XMLTable选择内容（XMLNAMESPACES（默认为'http://xmlns.oracle.com/xdb/XDBResource.xsd'），'/资源/内容'PASSING RES COLUMNS内容CLOB PATH'text'）WHERE equals_path（RES， '/home/QUINE/NurseryRhyme.txt'）= 1;内容-------玛丽有一只小羊羔它的羊毛像雪一样白，玛丽去那只羊羔的地方肯定会选择一排。
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__BJFGFIAD">
                     <p class="titleinexample">示例21-6使用资源和命名空间前缀访问XML文档</p><pre class="oac_no_warn" dir="ltr">SELECT des.description FROM RESOURCE_VIEW rv，XMLTable（ <span class="bold">XMLNAMESPACES（'http://xmlns.oracle.com/xdb/XDBResource.xsd'AS"r“</span> ），' <span class="bold">/ r：Resource / r：Contents / PurchaseOrder / LineItems / LineItem</span> 'PASSING rv.RES COLUMNS description VARCHAR2（256）PATH'Description'）des WHERE equals_path（rv.RES，'/ home / QUINE /PurchaseOrders/2002 / Mar /SBELL-2002100912333601PDT.xml'）= 1; DES.DESCRIPTION ---------------------------------一个难忘的夜晚成为绿野仙踪3的难以承受的轻盈选中的行。
</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" title="在Oracle XML DB Repository中有多种方法可以访问和操作数据，包括使用标准协议，如FTP和HTTP（S）/ WebDAV; Oracle XML DB资源应用程序接口（API）;并且存储库视图RESOURCE_VIEW和PATH_VIEW。">访问Oracle XML DB存储库数据</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB4197"></a><div class="props_rev_3"><a id="GUID-F11DE6D9-61DC-4A55-A3A5-74A3590928A3" name="GUID-F11DE6D9-61DC-4A55-A3A5-74A3590928A3"></a><h3 id="ADXDB-GUID-F11DE6D9-61DC-4A55-A3A5-74A3590928A3" class="sect3"><span class="enumeration_section">21.9</span>访问基于XML模式的文档的内容</h3>
               <div>
                  <p>您可以使用与非基于模式的文档相同的方式访问基于XML模式的文档的内容：使用相应的资源文档。或者，您可以在使用Oracle XML DB注册XML模式时定义的默认表中将其作为一行访问。</p>
                  <p>在第一种情况下，您可以使用<code class="codeph">RESOURCE_VIEW</code>使用单个SQL语句查询不同类型的基于XML模式的文档。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-254A0380-101C-4A85-92ED-80D892E7FC8C">在联接中使用元素XMLRef访问资源内容</a><br>资源文档中的元素<code class="codeph">XMLRef</code>提供了SQL语句作为单个操作的一部分需要访问或更新元数据和内容时所需的连接键。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" title="在Oracle XML DB Repository中有多种方法可以访问和操作数据，包括使用标准协议，如FTP和HTTP（S）/ WebDAV; Oracle XML DB资源应用程序接口（API）;并且存储库视图RESOURCE_VIEW和PATH_VIEW。">访问Oracle XML DB存储库数据</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB4199"></a><a id="ADXDB4200"></a><a id="ADXDB4198"></a><div class="props_rev_3"><a id="GUID-254A0380-101C-4A85-92ED-80D892E7FC8C" name="GUID-254A0380-101C-4A85-92ED-80D892E7FC8C"></a><h4 id="ADXDB-GUID-254A0380-101C-4A85-92ED-80D892E7FC8C" class="sect4"><span class="enumeration_section">21.9.1</span>使用连接中的元素XMLRef访问资源内容</h4>
                  <div>
                     <p>资源文档中的元素<code class="codeph">XMLRef</code>提供了SQL语句作为单个操作的一部分需要访问或更新元数据和内容时所需的连接键。
                     </p>
                     <div class="section">
                        <p>此处的示例显示了基于元素<code class="codeph">XMLRef</code>的值使用联接访问资源内容的查询。</p>
                        <p><a href="accessing-XML-DB-repository-data.html#GUID-254A0380-101C-4A85-92ED-80D892E7FC8C__BJFBDEJE">例21-7</a>根据Oracle XML DB Repository中的路径在<code class="codeph">defaultTable</code>查找一行。SQL函数<code class="codeph">ref</code>根据资源文档<code class="codeph">RES</code>中的<code class="codeph">XMLRef</code>元素的值定位默认表中的目标行。</p>
                        <p><a href="accessing-XML-DB-repository-data.html#GUID-254A0380-101C-4A85-92ED-80D892E7FC8C__BJFFGBIB">例21-8</a>显示了如何根据元数据，路径和内容从XML文档中选择片段。该查询返回<code class="codeph">/home/QUINE/PurchaseOrders/2002/Mar</code>包含零件号715515009058订单的文档的元素<code class="codeph">Reference</code>值。
                        </p>
                        <p>通常，在访问基于模式的XML文档的内容时，将<code class="codeph">RESOURCE_VIEW</code>或<code class="codeph">PATH_VIEW</code>与缺省表连接比使用<code class="codeph">RESOURCE_VIEW</code>或<code class="codeph">PATH_VIEW</code>本身更有效。资源文档和默认表之间的显式连接告诉Oracle XML DB，SQL语句仅适用于一种类型的XML文档。因此，XPath重写可用于优化默认表和资源上的操作。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-254A0380-101C-4A85-92ED-80D892E7FC8C__BJFBDEJE">
                        <p class="titleinexample">示例21-7使用SQL函数REF和元素XMLRef查询存储库资源数据</p><pre class="pre codeblock"><code>SELECT des.description FROM RESOURCE_VIEW rv，purchaseorder p，XMLTable（'$ p / PurchaseOrder / LineItems / LineItem'PASSING p。OBJECT_VALUE作为“p”列描述VARCHAR2（256）PATH'描述'）des WHERE equals_path（rv.RES，'/ home / QUINE /PurchaseOrders/2002 / Mart / SBELL22100912333601PDT.xml'）= 1 AND <span class="bold">ref</span> （p） = XMLCast（XMLQuery（'declare default element namespace“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) fn：data（/ Resource / <span class="bold">XMLRef</span> ）'PASSING rv.RES RETURNING CONTENT）AS REF XMLType）; DES.DESCRIPTION ---------------------------------一个难忘的夜晚成为绿野仙踪3的难以承受的轻盈选中的行。
</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-254A0380-101C-4A85-92ED-80D892E7FC8C__BJFFGBIB">
                        <p class="titleinexample">示例21-8基于元数据，路径和内容选择XML文档片段</p><pre class="pre codeblock"><code>SELECT XMLCast（XMLQuery（'$ p / PurchaseOrder / Reference'PASSING po。OBJECT_VALUE作为“p”返回内容）AS VARCHAR2（30））FROM RESOURCE_VIEW rv，purchaseorder po WHERE under_path（rv.RES，'/ home / QUINE / PurchaseOrders / 2002 / Mar'）= 1 AND ref（po）= XMLCast（ XMLQuery（'declare default element namespace“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) fn：data（/ Resource / XMLRef）'PASSING rv.RES RETURNING CONTENT）AS REF XMLType） AND XMLExists（'$ p / PurchaseOrder / LineItems / LineItem / Part [@ Id =“715515009058”]'PASSING po。OBJECT_VALUE AS“p”）; XMLCAST（XMLQUERY（'$ P / PURCHASEO ------------------------------ CJOHNSON-20021009123335851PDT LSMITH-2002100912333661PDT SBELL-2002100912333601PDT 3行选择。
</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-F11DE6D9-61DC-4A55-A3A5-74A3590928A3" title="您可以使用与非基于模式的文档相同的方式访问基于XML模式的文档的内容：使用相应的资源文档。或者，您可以在使用Oracle XML DB注册XML模式时定义的默认表中将其作为一行访问。">访问基于XML模式的文档的内容</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB4201"></a><div class="props_rev_3"><a id="GUID-DE0B24FB-D864-4657-B03C-49442F516DA7" name="GUID-DE0B24FB-D864-4657-B03C-49442F516DA7"></a><h3 id="ADXDB-GUID-DE0B24FB-D864-4657-B03C-49442F516DA7" class="sect3"><span class="enumeration_section">21.10</span>更新存储库文档的内容</h3>
               <div>
                  <p>您可以使用Internet协议或SQL更新存储在Oracle XML DB存储库中的文档的内容。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-B195A5C3-1844-4EE1-9671-4224CD808AC4">使用Internet协议更新存储库内容</a><br>最受欢迎的内容创作工具支持HTTP，FTP和WebDAV协议。在给定适当的访问权限的情况下，您可以使用一个简单的URL来定位要更新的文档，以访问和编辑存储在Oracle XML DB Repository中的内容。
                     </li>
                     <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-868458A8-5FDD-42ED-A4B3-C648778DDCFA">使用SQL更新存储库内容</a><br>您可以使用XQuery Update更新存储在Oracle XML DB Repository中的任何文档的内容。可以通过更新资源文档或更新保存文档内容的默认表来修改文档的内容。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" title="在Oracle XML DB Repository中有多种方法可以访问和操作数据，包括使用标准协议，如FTP和HTTP（S）/ WebDAV; Oracle XML DB资源应用程序接口（API）;并且存储库视图RESOURCE_VIEW和PATH_VIEW。">访问Oracle XML DB存储库数据</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB4203"></a><a id="ADXDB4202"></a><div class="props_rev_3"><a id="GUID-B195A5C3-1844-4EE1-9671-4224CD808AC4" name="GUID-B195A5C3-1844-4EE1-9671-4224CD808AC4"></a><h4 id="ADXDB-GUID-B195A5C3-1844-4EE1-9671-4224CD808AC4" class="sect4"><span class="enumeration_section">21.10.1</span>使用Internet协议更新存储库内容</h4>
                  <div>
                     <p>最受欢迎的内容创作工具支持HTTP，FTP和WebDAV协议。在给定适当的访问权限的情况下，您可以使用一个简单的URL来定位要更新的文档，以访问和编辑存储在Oracle XML DB Repository中的内容。</p>
                     <p>受欢迎的内容创作工具可以使用HTTP动词<code class="codeph">get</code>访问文档的内容，获得一个网址给它，他们可以使用HTTP动词<code class="codeph">put</code>保存更新的内容。
                     </p>
                     <p><a href="accessing-XML-DB-repository-data.html#GUID-B195A5C3-1844-4EE1-9671-4224CD808AC4__CHDGFBEC">图21-6</a>显示了如何使用Microsoft Word中包含的WebDAV支持，您可以使用Microsoft Word更新和编辑存储在Oracle XML DB存储库中的文档。
                     </p>
                     <div class="figure" id="GUID-B195A5C3-1844-4EE1-9671-4224CD808AC4__CHDGFBEC">
                        <p class="titleinfigure">图21-6使用Microsoft Word更新和编辑Oracle XML DB中存储的内容</p><img src="img/word_po_update.gif" width="577" alt="下面是图21-6的描述" title="下面是图21-6的描述" longdesc="img_text/word_po_update.html"><br><a href="img_text/word_po_update.html">“图21-6更新和编辑使用Microsoft Word在Oracle XML DB中存储的内容”的说明</a></div>
                     <!-- class="figure" -->
                     <p>当Microsoft Word等编辑应用程序更新存储在Oracle XML DB中的XML文档时，数据库会接收包含文档新内容的输入流。遗憾的是，Word等应用程序无法为Oracle XML DB提供任何识别文档中发生的更改的方法。因此不可能进行部分更新。有必要再次解析整个文档，将从原始文档派生的所有对象替换为从新内容派生的对象。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-DE0B24FB-D864-4657-B03C-49442F516DA7" title="您可以使用Internet协议或SQL更新存储在Oracle XML DB存储库中的文档的内容。">更新存储库文档的内容</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4204"></a><div class="props_rev_3"><a id="GUID-868458A8-5FDD-42ED-A4B3-C648778DDCFA" name="GUID-868458A8-5FDD-42ED-A4B3-C648778DDCFA"></a><h4 id="ADXDB-GUID-868458A8-5FDD-42ED-A4B3-C648778DDCFA" class="sect4"><span class="enumeration_section">21.10.2</span>使用SQL更新存储库内容</h4>
                  <div>
                     <p>您可以使用XQuery Update更新存储在Oracle XML DB Repository中的任何文档的内容。可以通过更新资源文档或更新保存文档内容的默认表来修改文档的内容。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-467C5313-6CA6-417F-8BF7-9C8D6671851E">通过更新其资源文档来更新存储库中的文档</a><br>您可以使用SQL <code class="codeph">UPDATE</code>语句和带有XQuery Update的SQL函数<code class="codeph">XMLQuery</code>来更新文档的内容。XQuery表达式作为更新操作的目标传递给<code class="codeph">XMLQuery</code> 。
                        </li>
                        <li class="ulchildlink"><a href="accessing-XML-DB-repository-data.html#GUID-C8F8174D-5375-4E1A-9ED3-84A8238D2212">通过更新默认表更新存储库中基于XML模式的文档</a><br>您可以通过直接在用于管理文档内容的默认表上执行更新操作来更新基于XML模式的文档。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-DE0B24FB-D864-4657-B03C-49442F516DA7" title="您可以使用Internet协议或SQL更新存储在Oracle XML DB存储库中的文档的内容。">更新存储库文档的内容</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB4205"></a><a id="ADXDB4206"></a><a id="ADXDB6417"></a><div class="props_rev_3"><a id="GUID-467C5313-6CA6-417F-8BF7-9C8D6671851E" name="GUID-467C5313-6CA6-417F-8BF7-9C8D6671851E"></a><h5 id="ADXDB-GUID-467C5313-6CA6-417F-8BF7-9C8D6671851E" class="sect5"><span class="enumeration_section">21.10.2.1</span>通过更新资源文档更新存储库中的文档</h5>
                     <div>
                        <p>您可以使用SQL <code class="codeph">UPDATE</code>语句和带有XQuery Update的SQL函数<code class="codeph">XMLQuery</code>来更新文档的内容。XQuery表达式作为更新操作的目标传递给<code class="codeph">XMLQuery</code> 。
                        </p>
                        <div class="section">
                           <p><a href="accessing-XML-DB-repository-data.html#GUID-467C5313-6CA6-417F-8BF7-9C8D6671851E__BJFEDJDH">例21-9</a>更新了简单文本文档的内容。传递给<code class="codeph">XMLQuery</code>的XQuery表达式作为更新操作的目标，将文本节点标识为属于element <code class="codeph">/Resource/Contents/text</code> 。
                           </p>
                           <p>这种通过更新相关资源来更新文档内容的技术具有以下优点：它可以用于更新存储在Oracle XML DB Repository中的任何类型的文档。</p>
                           <p><a href="accessing-XML-DB-repository-data.html#GUID-467C5313-6CA6-417F-8BF7-9C8D6671851E__BJFEFBEC">示例21-10</a>通过对相应的资源文档执行SQL <code class="codeph">UPDATE</code>操作来<code class="codeph">UPDATE</code> XML文档中的节点。这里，XQuery Update用于更改与元素<code class="codeph">User</code>关联的文本节点的值。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-467C5313-6CA6-417F-8BF7-9C8D6671851E__BJFEDJDH">
                           <p class="titleinexample">示例21-9使用资源上的UPDATE和XQuery更新更新文本文档</p><pre class="pre codeblock"><code>DECLARE文件BFILE;内容CLOB; dest_offset NUMBER：= 1; src_offset NUMBER：= 1; lang_context NUMBER：= 0; conv_warning NUMBER：= 0; BEGIN文件：= bfilename（'XMLDIR'，'tdadxdb-03-02.txt'）; DBMS_LOB.createTemporary（contents，true，DBMS_LOB.SESSION）; DBMS_LOB.fileopen（file，DBMS_LOB.file_readonly）; DBMS_LOB.loadClobfromFile（contents，file，DBMS_LOB.getLength（file），dest_offset，src_offset，nls_charset_id（'AL32UTF8'），lang_context，conv_warning）; DBMS_LOB.fileclose（文件）; UPDATE RESOURCE_VIEW SET RES = XMLQuery（'declare default element namespace“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) copy $ i：= $ p1 modify（for $ j in $ i /资源/内容/文本返回用$ p2替换节点$ j的值）返回$ i'PASSING RES为“p1”，内容AS“p2”返回内容）WHERE equals_path（res，'/ home / QUINE / NurseryRhyme.txt' ）= 1; DBMS_LOB.freeTemporary（内容）;结束; /</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-467C5313-6CA6-417F-8BF7-9C8D6671851E__BJFEFBEC">
                           <p class="titleinexample">示例21-10使用资源上的UPDATE和XQuery更新更新XML节点</p><pre class="pre codeblock"><code>UPDATE RESOURCE_VIEW SET RES = XMLQuery（'declare namespace r =“http://xmlns.oracle.com/xdb/XDBResource.xsd”; copy $ i：= $ p1 modify（for $ j in $ i / r：Resource / r：Contents / PurchaseOrder / <span class="bold">User</span>返回节点$ j的值替换为$ p2）返回$ i'PASSING RES为“p1”，'SKING'AS“p2”返回内容）WHERE equals_path（res，'/ home / QUINE / PurchaseOrders / 2002 / Mar / SBELL-2002100912333601PDT.xml'）= 1; 1行更新。SELECT XMLCast（XMLQuery（'declare namespace ns =“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) $ r / ns：Resource / ns：Contents / PurchaseOrder / <span class="bold">User / text（）</span> 'PASSING RES AS“r”返回内容）AS VARCHAR2（32））FROM RESOURCE_VIEW WHERE equals_path（RES，'/ home / QUINE / AuctionOrders/2002 / Mart / SBELL22100912333601PDT.xml'）= 1; XMLCAST（XMLQUERY（'DECLARENAMESPA -------------------------------- <span class="bold">SKING</span> 1行已选中。</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-868458A8-5FDD-42ED-A4B3-C648778DDCFA" title="您可以使用XQuery Update更新存储在Oracle XML DB Repository中的任何文档的内容。可以通过更新资源文档或更新保存文档内容的默认表来修改文档的内容。">使用SQL更新存储库内容</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4208"></a><a id="ADXDB4207"></a><div class="props_rev_3"><a id="GUID-C8F8174D-5375-4E1A-9ED3-84A8238D2212" name="GUID-C8F8174D-5375-4E1A-9ED3-84A8238D2212"></a><h5 id="ADXDB-GUID-C8F8174D-5375-4E1A-9ED3-84A8238D2212" class="sect5"><span class="enumeration_section">21.10.2.2</span>通过更新默认表来更新存储库中基于XML模式的文档</h5>
                     <div>
                        <p>您可以通过直接在用于管理文档内容的默认表上执行更新操作来更新基于XML模式的文档。</p>
                        <div class="section">
                           <p>如果必须通过包含基于元数据的路径或条件的<code class="codeph">WHERE</code>子句来定位文档，则SQL <code class="codeph">UPDATE</code>语句必须使用资源和默认表之间的连接。
                           </p>
                           <p>通常，在更新基于XML模式的文档的内容时，将<code class="codeph">RESOURCE_VIEW</code>或<code class="codeph">PATH_VIEW</code>与缺省表连接比使用<code class="codeph">RESOURCE_VIEW</code>或<code class="codeph">PATH_VIEW</code>本身更有效。资源文档和默认表之间的显式连接告诉Oracle XML DB，SQL语句仅适用于一种类型的XML文档。这允许在默认表和资源上使用部分更新。
                           </p>
                           <p>在<a href="accessing-XML-DB-repository-data.html#GUID-C8F8174D-5375-4E1A-9ED3-84A8238D2212__BJFDCAEH">例21-11中</a> ，XQuery Update用于默认表，目标行由路径标识。要更新的行由<code class="codeph">REF</code>标识。使用Oracle SQL函数<code class="codeph">equals_path</code>通过存储库路径标识<code class="codeph">REF</code> 。这将更新限制为与指定路径标识的资源对应的行。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-C8F8174D-5375-4E1A-9ED3-84A8238D2212__BJFDCAEH">
                           <p class="titleinexample">示例21-11在存储库中更新基于XML模式的文档</p><pre class="pre codeblock"><code>更新购买订单p SET p。OBJECT_VALUE = XMLQuery（'copy $ i：= $ p1 modify（对于$ i中的$ j / PurchaseOrder / <span class="bold">User</span>返回节点$ j的替换值，带$ p2）返回$ i'PASSING p。OBJECT_VALUE AS“p1”，' <span class="bold">SBELL'AS</span> “p2”返回内容）WHERE <span class="bold">ref（p）</span> =（SELECT XMLCast（XMLQuery（'declare default element namespace“http://xmlns.oracle.com/xdb/XDBResource.xsd” ;（：:) fn：data（/ Resource / XMLRef）'PASSING rv.RES RETURNING CONTENT）AS REF XMLType）FROM RESOURCE_VIEW rv WHERE <span class="bold">equals_path</span> （rv.RES，'/ home / QUINE / PurchaseOrders / 2002 / Mar / SBELL- 2002100912333601PDT.xml'）= 1）; SELECT XMLCast（XMLQuery（'$ p / PurchaseOrder / <span class="bold">User / text（）</span> 'PASSING p。OBJECT_VALUE作为“p”返回内容）AS VARCHAR2（32））FROM purchaseorder p，RESOURCE_VIEW rv WHERE ref（p）= XMLCast（XMLQuery（'declare default element namespace“http://xmlns.oracle.com/xdb/XDBResource。 xsd“;（：:) fn：data（/ Resource / XMLRef）'PASSING rv.RES RETURNING CONTENT）AS REF XMLType）AND equals_path（rv.RES，'/ home / QUINE / PurchaseOrders / 2002 / Mar / SBELL-2002100912333601PDT .xml'）= 1; XMLCAST（XMLQUERY（'$ P / PURCHASEO ------------------------------ <span class="bold">SBELL</span></code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-868458A8-5FDD-42ED-A4B3-C648778DDCFA" title="您可以使用XQuery Update更新存储在Oracle XML DB Repository中的任何文档的内容。可以通过更新资源文档或更新保存文档内容的默认表来修改文档的内容。">使用SQL更新存储库内容</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADXDB4215"></a><a id="ADXDB4216"></a><a id="ADXDB4217"></a><a id="ADXDB4218"></a><a id="ADXDB4219"></a><a id="ADXDB4220"></a><a id="ADXDB4211"></a><div class="props_rev_3"><a id="GUID-01E1ED75-26DF-440E-8751-E00FEED2544B" name="GUID-01E1ED75-26DF-440E-8751-E00FEED2544B"></a><h3 id="ADXDB-GUID-01E1ED75-26DF-440E-8751-E00FEED2544B" class="sect3"><span class="enumeration_section">21.11</span>查询RESOURCE_VIEW和PATH_VIEW中的资源</h3>
               <div>
                  <p>此处的示例使用<code class="codeph">RESOURCE_VIEW</code>和<code class="codeph">PATH_VIEW</code>以及Oracle SQL函数<code class="codeph">equals_path</code>和<code class="codeph">under_path</code>说明了存储库的文件夹限制查询。
                  </p>
                  <div class="section">
                     <p>Oracle XML DB提供了两个Oracle SQL函数<code class="codeph">equals_path</code>和<code class="codeph">under_path</code> ，可用于执行<strong class="term">文件夹限制查询</strong> 。此类查询将对<code class="codeph">RESOURCE_VIEW</code>或<code class="codeph">PATH_VIEW</code>进行操作的SQL语句限制为位于Oracle XML DB文件夹层次结构中特定位置的文档。
                     </p>
                     <p>函数<code class="codeph">equals_path</code>将语句限制为由指定路径标识的单个文档。函数<code class="codeph">under_path</code>将语句限制为存在于层次结构中某个点下面的那些文档。
                     </p>
                     <p>此处的示例演示了针对存储在<code class="codeph">RESOURCE_VIEW</code>和<code class="codeph">PATH_VIEW</code>中的资源文档的简单文件夹限制查询。</p>
                     <p><a href="accessing-XML-DB-repository-data.html#GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__CHDHIAJB">例21-12中</a>的查询使用SQL函数<code class="codeph">equals_path</code>和<code class="codeph">RESOURCE_VIEW</code>来访问资源。查询的资源是由<a href="accessing-XML-DB-repository-data.html#GUID-467C5313-6CA6-417F-8BF7-9C8D6671851E__BJFEDJDH">例21-9</a>的更新操作产生的： <a href="accessing-XML-DB-repository-data.html#GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__BJFIEFDJ">示例21-4</a>和<a href="accessing-XML-DB-repository-data.html#GUID-1B8EC4F8-3E6A-4A41-8F72-988C816FAE75__BJFHICEA">例21-5中</a>显示的原始资源文本已被不同的童谣“Hickory Dickory Dock ...”取代。</p>
                     <p>如<a href="accessing-XML-DB-repository-data.html#GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__CHDHIAJB">示例21-12</a>所示，资源文档是XML文档，其捕获由DAV标准定义的元数据集。元数据包括诸如<code class="codeph">CreationDate</code> ， <code class="codeph">Creator</code> ， <code class="codeph">Owner</code> ， <code class="codeph">ModificationDate</code>和<code class="codeph">DisplayName</code> 。使用SQL / XML访问和查询功能，可以像查看任何其他XML文档一样查询和更新资源文档的内容。
                     </p>
                     <p><a href="accessing-XML-DB-repository-data.html#GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFBCHAC">例21-13中</a>的查询找到存储在Oracle XML DB Repository中的每个XSL样式表的路径。它基于以<code class="codeph">.xsl</code>结尾的<code class="codeph">DisplayName</code>执行搜索。
                     </p>
                     <p><a href="accessing-XML-DB-repository-data.html#GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFGFGHC">例21-14中</a>的查询计算路径<code class="codeph">/home/QUINE/PurchaseOrders</code>下的资源（文件和文件夹）数。使用<code class="codeph">RESOURCE_VIEW</code>而不是<code class="codeph">PATH_VIEW</code>可确保作为多个链接目标的任何资源仅计数一次。SQL函数<code class="codeph">under_path</code>将结果集限制为可以使用从<code class="codeph">/home/QUINE/PurchaseOrders</code>开始的路径访问的文档。
                     </p>
                     <p><a href="accessing-XML-DB-repository-data.html#GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFFIEGC">例21-15</a>中的查询列出了path <code class="codeph">/home/QUINE/PurchaseOrders/2002/Apr</code>标识的文件夹的内容。这实际上是文件夹的目录列表。
                     </p>
                     <p><a href="accessing-XML-DB-repository-data.html#GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFEJJHH">例21-16</a>中的查询列出了路径<code class="codeph">/home/QUINE/PurchaseOrders/2002/Apr</code>标识的文件夹中包含的链接集，其中关联资源中的<code class="codeph">DisplayName</code>元素以<code class="codeph">S</code>开头。</p>
                     <p><a href="accessing-XML-DB-repository-data.html#GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFEFHEJ">例21-17中</a>的查询查找Oracle XML DB存储库中包含<code class="codeph">PurchaseOrder</code>文档的每个资源的路径。基于元数据属性<code class="codeph">SchemaElement</code>标识文档，该元素属性标识存储在存储库中的基于模式的XML数据的XML模式URL和全局元素。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__CHDHIAJB">
                     <p class="titleinexample">示例21-12使用EQUALS_PATH和RESOURCE_VIEW访问资源</p><pre class="pre codeblock"><code>SELECT XMLSerialize（DOCUMENT r.res AS CLOB）FROM RESOURCE_VIEW r WHERE equals_path（res，'/ home / QUINE / NurseryRhyme.txt'）= 1; XMLSERIALIZE（DOCUMENTR.RESASCLOB）-------------------------------------------- ------------------------------------ &lt;Resource xmlns =“http://xmlns.oracle.com /xdb/XDBResource.xsd“Hidden =”false“Invalid =”false“Container =”false“CustomRslv =”false“VersionHistory =”false“StickyRef =”true“&gt; &lt;CreationDate&gt; 2005-06-13T13：19：20.566623 &lt;/ CreationDate&gt; &lt;ModificationDate&gt; 2005-06-13T13：19：22.997831 &lt;/ ModificationDate&gt; &lt;DisplayName&gt; NurseryRhyme.txt &lt;/ DisplayName&gt; &lt;Language&gt; en-US &lt;/ Language&gt; &lt;CharacterSet&gt; UTF-8 &lt;/ CharacterSet&gt; &lt;ContentType&gt; text / plain &lt;/ ContentType&gt; &lt;RefCount&gt; 1 &lt;/ RefCount&gt; &lt;ACL&gt; &lt;acl description =“Private：仅对OWNER的所有权限，其他人无法访问”xmlns =“http://xmlns.oracle。 com / xdb / acl.xsd“xmlns：dav =”DAV：“xmlns：xsi =”http://www.w3.org/2001/XMLSchema-instance“xsi：schemaLocation =”http://xmlns.oracle。 com / xdb / acl.xsd http://xmlns.oracle.com/xdb/acl.xsd“shared =”true“&gt; &lt;ace&gt; &lt;grant&gt; true &lt;/ grant&gt; &lt;principal&gt; dav：owner &lt;/ principal&gt; &lt;privilege&gt; &lt;all /&gt; &lt;/ privilege&gt; &lt;/ ace&gt; &lt;/ acl&gt; &lt;/ ACL&gt; &lt;所有者&gt; QUINE &lt;/ Owner&gt; &lt;Creator&gt; QUINE &lt;/ Creator&gt; &lt;LastModifier&gt; QUINE &lt;/ LastModifier&gt; &lt;SchemaElement&gt; http://xmlns.oracle.com/xdb/XDBSchema.xsd#text &lt;/ SchemaElement&gt; &lt;目录&gt; &lt;text&gt; Hickory Dickory Dock鼠标跑了一下时钟敲响了一个鼠标跑了Hickory Dickory Dock &lt;/ text&gt; &lt;/ Contents&gt; &lt;/ Resource&gt;选择了一行。
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFBCHAC">
                     <p class="titleinexample">示例21-13确定存储在存储库中的XSLT样式表的路径</p><pre class="pre codeblock"><code>SELECT ANY_PATH FROM RESOURCE_VIEW WHERE XMLCast（XMLQuery（'declare namespace ns =“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) $ r / ns：Resource / ns：DisplayName'PASSING RES AS “r”返回内容）AS VARCHAR2（100））LIKE'％。xsl'; ANY_PATH ------------------------------------------- / home / MDSYS / epsg /sdoepsggrid2nadcon.xsl / home / MDSYS / epsg / sdoepsggrid2ntv2 / xsl /source/schemas/poSource/xsl/empdept.xsl /source/schemas/poSource/xsl/purchaseOrder.xsl选择4行。
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFGFGHC">
                     <p class="titleinexample">示例21-14在路径下计算资源</p><pre class="pre codeblock"><code>SELECT count（*）FROM RESOURCE_VIEW WHERE under_path（RES，'/ home / QUINE / PurchaseOrders'）= 1; COUNT（*）---------- 145选择1行。
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFFIEGC">
                     <p class="titleinexample">示例21-15在路径中列出文件夹内容</p><pre class="pre codeblock"><code>SELECT PATH FROM PATH_VIEW WHERE under_path（RES，'/ home / QUINE / PurchaseOrders / 2002 / Apr'）= 1; PATH ------------------------------------------------- --------------------- /home/QUINE/PurchaseOrders/2002/Apr/AMCEWEN-20021009123336171PDT.xml / home / QUINE / PurchaseOrders / 2002 / Apr / AMCEWEN- 20021009123336271PDT.xml /home/QUINE/PurchaseOrders/2002/Apr/EABEL-20021009123336251PDT.xml/home/QUINE/PurchaseOrders/2002/Apr/PTUCKER-20021009123336191PDT.xml / home / QUINE / PurchaseOrders / 2002 / Apr / PTUCKER-20021009123336291PDT。 xml /home/QUINE/PurchaseOrders/2002/Apr/SBELL-20021009123336231PDT.xml /home/QUINE/PurchaseOrders/2002/Apr/SBELL-20021009123336331PDT.xml /home/QUINE/PurchaseOrders/2002/Apr/SKING-20021009123336321PDT.xml / home / QUINE / PurchaseOrders / 2002 / Apr / SMCCAIN-20021009123336151PDT.xml /home/QUINE/PurchaseOrders/2002/Apr/SMCCAIN-20021009123336341PDT.xml/home/QUINE/PurchaseOrders/2002/Apr/VJONES-20021009123336301PDT.xml选择11行。
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFEJJHH">
                     <p class="titleinexample">例21-16列出文件夹中包含的链接</p><pre class="pre codeblock"><code>SELECT PATH FROM PATH_VIEW WHERE XMLCast（XMLQuery（'declare namespace ns =“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) $ r / ns：Resource / ns：DisplayName'PASSING RES AS “r”返回内容）AS VARCHAR2（100））LIKE'％'和under_path（RES，'/ home / QUINE / PurchaseOrders / 2002 / Apr'）= 1; PATH ------------------------------------------------- --------------------- /home/QUINE/PurchaseOrders/2002/Apr/SBELL-20021009123336231PDT.xml / home / QUINE / PurchaseOrders / 2002 / Apr / SBELL- 20021009123336331PDT.xml /home/QUINE/PurchaseOrders/2002/Apr/SKING-20021009123336321PDT.xml/home/QUINE/PurchaseOrders/2002/Apr/SMCCAIN-20021009123336151PDT.xml / home / QUINE / PurchaseOrders / 2002 / Apr / SMCCAIN-20021009123336341PDT。选择xml 5行。
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-01E1ED75-26DF-440E-8751-E00FEED2544B__BJFEFHEJ">
                     <p class="titleinexample">示例21-17查找包含采购订单XML文档的资源的路径</p><pre class="pre codeblock"><code>SELECT ANY_PATH FROM RESOURCE_VIEW WHERE XMLExists（'declare namespace ns =“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) $ r / ns：Resource [ns：SchemaElement =“http：// localhost：8080 / source / schemas / poSource / xsd / purchaseOrder.xsd＃PurchaseOrder“]'PASSING RES AS”r“）;</code></pre><p>该查询返回以下路径，每个路径包含一个<code class="codeph">PurchaseOrder</code>文档：</p><pre class="oac_no_warn" dir="ltr">ANY_PATH ------------------------------------------------- ---------------------- /home/QUINE/PurchaseOrders/2002/Apr/AMCEWEN-20021009123336171PDT.xml / home / QUINE / PurchaseOrders / 2002 / Apr / AMCEWEN -2001009123336271PDT.xml /home/QUINE/PurchaseOrders/2002/Apr/EABEL-20021009123336251PDT.xml/home/QUINE/PurchaseOrders/2002/Apr/PTUCKER-20021009123336191PDT.xml <span class="bold">...</span>选择了132行。</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" title="在Oracle XML DB Repository中有多种方法可以访问和操作数据，包括使用标准协议，如FTP和HTTP（S）/ WebDAV; Oracle XML DB资源应用程序接口（API）;并且存储库视图RESOURCE_VIEW和PATH_VIEW。">访问Oracle XML DB存储库数据</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB4222"></a><a id="ADXDB4221"></a><div class="props_rev_3"><a id="GUID-C0D75D10-DAB6-4367-A90F-63AF0FC8778D" name="GUID-C0D75D10-DAB6-4367-A90F-63AF0FC8778D"></a><h3 id="ADXDB-GUID-C0D75D10-DAB6-4367-A90F-63AF0FC8778D" class="sect3"><span class="enumeration_section">21.12</span> Oracle XML DB分层存储库索引</h3>
               <div>
                  <p>Oracle XML DB使用Oracle XML DB Repository的分层索引来优化存储库的基于路径和文件夹限制的查询的性能。它被实现为Oracle域索引。</p>
                  <p>在传统的关系数据库中，使用<code class="codeph">CONNECT BY</code>操作实现基于路径的访问和文件夹限制查询。此类查询很昂贵，因此随着文档数量和文件夹层次结构深度的增加，基于路径的访问和文件夹限制查询会变得效率低下。
                  </p>
                  <p>为解决此问题，Oracle XML DB引入了一种新的索引类型，即<strong class="term">分层存储库索引</strong> 。这使数据库可以解析限制文件夹的查询，而无需依赖<code class="codeph">CONNECT BY</code>操作。因此，Oracle XML DB可以有效地执行基于路径和文件夹限制的查询。分层存储库索引实现为Oracle域索引。这与用于向数据库添加Oracle Text索引支持和许多其他高级索引类型的技术相同。
                  </p>
                  <p><a href="accessing-XML-DB-repository-data.html#GUID-C0D75D10-DAB6-4367-A90F-63AF0FC8778D__BJFBDFAI">例21-18</a>显示了为文件夹限制查询生成的执行计划输出。如图所示，分层存储库索引<code class="codeph">XDBHI_IDX</code>用于解析查询。
                  </p>
                  <div class="example" id="GUID-C0D75D10-DAB6-4367-A90F-63AF0FC8778D__BJFBDFAI">
                     <p class="titleinexample">示例21-18文件夹限制查询的执行计划输出</p><pre class="pre codeblock"><code>SELECT PATH FROM PATH_VIEW WHERE XMLCast（XMLQuery（'declare namespace ns =“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) $ r / ns：Resource / ns：DisplayName'PASSING RES AS “r”返回内容）AS VARCHAR2（100））LIKE'％'和under_path（RES，'/ home / QUINE / PurchaseOrders / 2002 / Apr'）= 1;</code></pre><pre class="pre codeblock"><code>PLAN_TABLE_OUTPUT ------------------------------------------------- -------------------------------------------------- ---计划哈希值：2568289845 ------------------------------------------ -------------------------------------------------- ---------- | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- -------------------------------------------------- -  | 0 |选择声明| | 17 | 3111 | 34（6）| 00:00:01 | | 1 | NESTED LOOPS | | 17 | 3111 | 34（6）| 00:00:01 | | 2 | NESTED LOOPS | | 17 | 2822 | 34（6）| 00:00:01 | | 3 | NESTED LOOPS | | 466 | 63842 | 34（6）| 00:00:01 | | * 4 |按INDEX ROWID表的访问权限| XDB $ RESOURCE | 1 | 135 | 3（0）| 00:00:01 | | * 5 | DOMAIN INDEX | <span class="bold">XDBHI_IDX</span> | | | | | | 6 |收集ITERATOR PICKLER FETCH | | | | | | | * 7 | INDEX UNIQUE SCAN | XDB_PK_H_LINK | 1 | 28 | 0（0）| 00:00:01 | | * 8 | INDEX UNIQUE SCAN | SYS_C003900 | 1 | 17 | 0（0）| 00:00:01 | -------------------------------------------------- -------------------------------------------------- - 谓词信息（由操作ID标识）：--------------------------------------- ------------ 4  - 过滤器（CAST（“P”。“SYS_NC00011 $”AS VARCHAR2（100））LIKE'S％'）5  - 访问（“XDB”。“UNDER_PATH”（ SYS_MAKEXML（'8758D485E6004793E034080020B242C6'，734，“XMLEXTRA”，“XMLDATA”），'/ home / QUINE / PurchaseOrders / 2002 / Apr'，9999）= 1）7  - 访问（“H”。“PARENT_OID”= SYS_OP_ATG（VALUE） （KOKBF $），3,4,2）和“H”。“NAME”= SYS_OP_ATG（VALUE（KOKBF $），2,3,2））8  - 访问（“R2”。“SYS_NC_OID $”= SYS_OP_ATG（ VALUE（KOKBF $），3,4,2））选择了25行。</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="accessing-XML-DB-repository-data.html#GUID-4CB42EFA-063B-4FD4-A250-EC557EBC7E39" title="在Oracle XML DB Repository中有多种方法可以访问和操作数据，包括使用标准协议，如FTP和HTTP（S）/ WebDAV; Oracle XML DB资源应用程序接口（API）;并且存储库视图RESOURCE_VIEW和PATH_VIEW。">访问Oracle XML DB存储库数据</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <hr><br><p style="text-decoration:underline">脚注图例</p>脚注1：<p>该图由定义存储库结构的硬链接建立，并且不允许使用硬链接进行循环。但是，您可以使用弱链接引入循环。请参阅<a href="accessing-XML-DB-repository-data.html#GUID-72981E53-0B60-4096-80E0-06A139086DED" title="目标存储库资源的链接可能很难或很弱。硬链接和弱链接对于它们所针对的资源具有不同的依赖关系。硬链接无法定位祖先文件夹;薄弱环节可以。您可以查询存储库路径视图PATH_VIEW，以确定存储库链接的类型。">硬链接和弱链接</a> 。
            </p><br>脚注2：<p>存储库文件夹<code class="codeph">/dbfs</code>为您提供对DBFS内容的协议访问。有关DBFS的信息，请参阅<a href="../adlob/using-DBFS.html#ADLOB0006" target="_blank"><span><cite>Oracle Database SecureFiles和Large Objects Developer's Guide</cite></span></a> 。</p><br></div>
      </article>
   </body>
</html>
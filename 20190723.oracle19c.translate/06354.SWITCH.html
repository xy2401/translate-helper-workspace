<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>开关</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Backup and Recovery Reference"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Backup and Recovery Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-backup-and-recovery-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-09T19:31:58-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96242-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="STARTUP.html" title="Previous" type="text/html"></link>
      <link rel="next" href="TRANSPORT-TABLESPACE.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery Reference"></meta>
    <meta name="dcterms.isVersionOf" content="RCMRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="STARTUP.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="TRANSPORT-TABLESPACE.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">备份和恢复参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="rman-commands-recover-to-validate.html" property="item" typeof="WebPage"><span property="name">RMAN命令：RECOVER to VALIDATE</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">开关</li>
            </ol>
            <a id="GUID-BEA73581-C6F4-4346-A61B-B6C19513BF1C" name="GUID-BEA73581-C6F4-4346-A61B-B6C19513BF1C"></a><a id="RCMRF90370"></a><a id="RCMRF90371"></a><a id="RCMRF90372"></a><a id="RCMRF90373"></a><a id="RCMRF90374"></a><a id="RCMRF90375"></a><a id="RCMRF90376"></a><a id="RCMRF90377"></a><a id="RCMRF159"></a>
            
            <h2 id="RCMRF-GUID-BEA73581-C6F4-4346-A61B-B6C19513BF1C" class="sect2"><span class="enumeration_section">3.21</span>开关</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-BEA73581-C6F4-4346-A61B-B6C19513BF1C__GUID-86476ED3-8872-4E72-AEBF-33AB40F3718B">目的</p>
                  <p>使用<code class="codeph">SWITCH</code>命令执行以下任一操作：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>将数据库，表空间或数据文件的文件名更新为可用于指定文件的最新映像副本</p>
                     </li>
                     <li>
                        <p>更新已发出<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">NEWNAME</code>命令的数据文件和临时文件的文件名</p>
                     </li>
                  </ul>
                  <p><code class="codeph">SWITCH</code>等同于SQL语句<code class="codeph">ALTER DATABASE RENAME FILE</code> ：更新RMAN存储库中文件的名称，但数据库不会在操作系统级别重命名文件。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-BEA73581-C6F4-4346-A61B-B6C19513BF1C__GUID-6096A9BB-06C2-47DF-BE3F-FC18366AE23A">先决条件</p>
                  <p>RMAN必须连接到目标数据库。切换表空间，数据文件或临时文件时，文件必须处于脱机状态。切换整个数据库时，不能打开数据库。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-BEA73581-C6F4-4346-A61B-B6C19513BF1C__GUID-B1A8D61B-9482-4CDF-902F-A3C93B88E041">使用说明</p>
                  <p><code class="codeph">SWITCH</code>命令从恢复目录中删除数据文件副本的RMAN存储库记录，并将控制文件记录更新为状态<code class="codeph">DELETED</code> 。</p>
                  <p>如果RMAN连接到恢复目录，并且数据库正在使用从备份还原的控制文件，则<code class="codeph">SWITCH</code>将使用恢复目录中已知但从控制文件中丢失的任何数据文件的记录更新控制文件。
                  </p>
                  <p>执行<code class="codeph">SWITCH ...仅在RMAN提示下TO COPY</code> 。仅在<code class="codeph"><a href="RUN.html#GUID-88250EEF-DC49-42A9-822C-4011B1345C7B">RUN</a></code>块内使用不带<code class="codeph">TO COPY</code> <code class="codeph">SWITCH</code> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-BEA73581-C6F4-4346-A61B-B6C19513BF1C__GUID-CBB5A5D6-9E93-4EA5-8420-C95BB39D17ED">句法</p>
                  <p><a id="d102606e199" class="indexterm-anchor"></a><a id="d102606e203" class="indexterm-anchor"></a> <span class="bold"><span class="italic">switch</span> :: =</span></p>
                  <div class="figure" id="GUID-BEA73581-C6F4-4346-A61B-B6C19513BF1C__GUID-93204010-2511-440F-BAD7-06E383ABB010"><img src="img/switch.gif" alt="下面是switch.eps的说明" title="下面是switch.eps的说明" longdesc="img_text/switch.html"><br><a href="img_text/switch.html">说明switch.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="datafileSpec.html#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220__BABCCBBJ">datafileSpec :: =</a></span> ）</p>
                  <p><a id="d102606e221" class="indexterm-anchor"></a><a id="d102606e225" class="indexterm-anchor"></a> <span class="bold"><span class="italic">switchFile</span> :: =</span></p>
                  <div class="figure" id="GUID-BEA73581-C6F4-4346-A61B-B6C19513BF1C__GUID-55AB0C92-6A16-41B6-BBF2-522BE2922206"><img src="img/switchfile.gif" alt="下面是switchfile.eps的描述" title="下面是switchfile.eps的描述" longdesc="img_text/switchfile.html"><br><a href="img_text/switchfile.html">说明switchfile.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="datafileSpec.html#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220__BABCCBBJ">datafileSpec :: =</a></span> ， <span class="italic"><a href="tempfileSpec.html#GUID-783EB37D-C3F1-4245-BDF1-E463F65A1AE4__BABCIHBB">tempfileSpec :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-BEA73581-C6F4-4346-A61B-B6C19513BF1C__GUID-83684EA3-6D13-4852-B694-9CDB3A665E49">语义</p>
                  <p id="GUID-BEA73581-C6F4-4346-A61B-B6C19513BF1C__I1017344"><span class="bold"><span class="italic">开关</span></span></p>
                  <p>本子条款将数据库，表空间或数据文件的文件名切换为可用于指定文件的最新映像副本。通过执行此命令，可以避免从备份还原数据文件。执行<code class="codeph">SWITCH ...仅在RMAN提示下TO COPY</code> 。
                  </p>
                  <div class="tblformalwide" id="GUID-BEA73581-C6F4-4346-A61B-B6C19513BF1C__GUID-92DEEFAF-6E98-44AC-9ED5-CC0CB6A2EF7C">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes SWITCH command parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d102606e266">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d102606e269">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d102606e274" headers="d102606e266 ">
                                 <p><code class="codeph">数据库</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d102606e274 d102606e269 ">
                                 <p>重命名数据文件和控制文件以使用这些文件的映像副本的文件名。RMAN切换到每个数据库文件的最新映像副本。</p>
                                 <p>在多租户容器数据库（CDB）中，切换CDB中的根和所有可插拔数据库（PDB）的文件名。在PDB中，切换连接的PDB的文件名。有关<span class="q"><a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">连接到CDB和PDB</a></span>的信息，请参阅<span class="q">“ <a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">连接到CDB和PDB</a> ”</span> 。
                                 </p>
                                 <p>在数据库切换之后，RMAN将先前的数据库文件视为数据文件副本。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d102606e290" headers="d102606e266 ">
                                 <p><code class="codeph">数据库根</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d102606e290 d102606e269 ">
                                 <p>在CDB中，切换根的文件名。按照<span class="q">“ <a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">连接到CDB和PDB</a> ”中的说明</span>连接到根目录。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d102606e302" headers="d102606e266 ">
                                 <p><code class="codeph">PLUGGABLE DATABASE</code> <span class="italic"><code class="codeph">pdb_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d102606e302 d102606e269 ">
                                 <p>重命名一个或多个PDB中的数据文件和控制文件，以使用这些文件的映像副本的文件名。使用逗号分隔的列表指定多个PDB。按照<span class="q">“ <a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">连接到CDB和PDB</a> ”中的说明</span>连接到根目录。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d102606e317" headers="d102606e266 ">
                                 <p><code class="codeph">DATAFILE</code> <span class="italic"><code class="codeph"><a href="datafileSpec.html#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220">datafileSpec</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d102606e317 d102606e269 ">
                                 <p>将指定的数据文件切换为最新的图像副本。</p>
                                 <p>切换后，控制文件不再将指定的数据文件视为当前数据。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d102606e333" headers="d102606e266 ">
                                 <p><code class="codeph">TABLESPACE</code> <span class="italic"><code class="codeph">tablespace_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d102606e333 d102606e269 ">
                                 <p>切换指定表空间内的所有数据文件，与<code class="codeph">SWITCH DATAFILE ...TO COPY</code> （参见<a href="SWITCH.html#GUID-BEA73581-C6F4-4346-A61B-B6C19513BF1C__CHDDBGCG">例3-74</a> ）。
                                 </p>
                                 <p>要在PDB中切换表空间的数据文件，请按照<span class="q">“ <a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">连接到CDB和PDB</a> ”中的说明<a href="CONNECT.html#GUID-64ECF1B8-4F70-413E-BEBE-1D5E8CD48B67__BGBGAIGG">连接到PDB</a></span> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d102606e355" headers="d102606e266 ">
                                 <p><code class="codeph">复印</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d102606e355 d102606e269 ">
                                 <p>将指定的活动数据库文件切换为映像副本。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p id="GUID-BEA73581-C6F4-4346-A61B-B6C19513BF1C__I1017371"><span class="bold"><span class="italic">switchFile</span></span></p>
                  <p>本子条款更新已为其发出<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">NEWNAME</code>命令的数据文件和临时文件的名称。仅在<code class="codeph"><a href="RUN.html#GUID-88250EEF-DC49-42A9-822C-4011B1345C7B">RUN</a></code>块中使用此子句。
                  </p>
                  <div class="tblformalwide" id="GUID-BEA73581-C6F4-4346-A61B-B6C19513BF1C__GUID-B59C70D5-81DF-471E-B4AE-B6AD599534AF">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes SWITCH command switchFile parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d102606e389">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d102606e392">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d102606e397" headers="d102606e389 ">
                                 <p><code class="codeph">DATAFILE</code> <code class="codeph">ALL</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d102606e397 d102606e392 ">
                                 <p>将已在此作业中发出<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">NEWNAME FOR DATAFILE</code>命令的所有数据文件切换为新名称（请参阅<a href="SWITCH.html#GUID-BEA73581-C6F4-4346-A61B-B6C19513BF1C__CHDHGCHF">示例3-75</a> ）。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d102606e418" headers="d102606e389 ">
                                 <p><code class="codeph">DATAFILE</code> <span class="italic"><code class="codeph"><a href="datafileSpec.html#GUID-A0A69931-D404-4D89-8F95-3AB898B6A220">datafileSpec</a></code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d102606e418 d102606e392 ">
                                 <p>指定用于重命名的数据文件。切换后，控制文件不再将指定的文件视为当前文件。如果未指定<code class="codeph">TO</code>选项，则RMAN将此文件的<code class="codeph"><a href="RUN.html#GUID-88250EEF-DC49-42A9-822C-4011B1345C7B">RUN</a></code>块中先前<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">NEWNAME</code>命令上指定的文件名用作切换目标。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d102606e448" headers="d102606e389 "><code class="codeph">TO DATAFILECOPY</code> <code class="codeph">{'</code> <span class="italic"><code class="codeph">filename</code></span> <code class="codeph">'</code> <code class="codeph">|</code> <code class="codeph">TAG</code> <span class="italic"><code class="codeph">tag_name</code></span> <code class="codeph">}</code></td>
                              <td align="left" valign="top" width="71%" headers="d102606e448 d102606e392 ">
                                 <p>指定交换机的输入复制文件，即要重命名的数据文件副本（请参见<a href="SWITCH.html#GUID-BEA73581-C6F4-4346-A61B-B6C19513BF1C__CHDBHFGF">示例3-77</a> ）。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d102606e475" headers="d102606e389 ">
                                 <p><code class="codeph">TEMPFILE ALL</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d102606e475 d102606e392 ">
                                 <p>将已在此作业中发出<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">NEWNAME FOR TEMPFILE</code>命令的所有临时文件切换为其新名称。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d102606e491" headers="d102606e389 ">
                                 <p><code class="codeph">TEMPFILE</code> <span class="italic"><code class="codeph">tempfileSpec</code></span> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d102606e491 d102606e392 ">
                                 <p>指定要重命名的临时文件。如果未指定<code class="codeph">TO</code>选项，则RMAN将此文件的<code class="codeph"><a href="RUN.html#GUID-88250EEF-DC49-42A9-822C-4011B1345C7B">RUN</a></code>块中先前<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">NEWNAME</code>命令上指定的文件名用作切换目标。必须装入目标数据库但不能打开。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d102606e520" headers="d102606e389 ">
                                 <p><code class="codeph">TO</code> <code class="codeph">'</code> <span class="italic"><code class="codeph">filename</code></span> <code class="codeph">'</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d102606e520 d102606e392 ">
                                 <p>将临时文件重命名为指定的名称（请参阅<a href="SWITCH.html#GUID-BEA73581-C6F4-4346-A61B-B6C19513BF1C__CHDHHFAE">示例3-76</a> ）。必须装入目标数据库但不能打开。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-BEA73581-C6F4-4346-A61B-B6C19513BF1C__GUID-7A437036-C06E-41F1-91BA-4C03F7699782">例子</p>
               </div>
               <!-- class="section" -->
               <div class="example" id="GUID-BEA73581-C6F4-4346-A61B-B6C19513BF1C__CHDDBGCG">
                  <p class="titleinexample">示例3-74切换到映像副本以避免从备份还原</p>
                  <p>假设磁盘发生故障，导致<code class="codeph">users</code>表空间中的所有数据文件都无法访问。此表空间中所有数据文件的映像副本都存在于快速恢复区域中。启动RMAN并以<code class="codeph">TARGET</code>身份连接到数据库后，可以运行<code class="codeph">SWITCH</code>将控制文件指向新的数据文件，然后按如下方式运行<code class="codeph"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95">RECOVER</a></code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE用户立即离线; SWITCH TABLESPACE用户要复制; RECOVER TABLESPACE用户; ALTER TABLESPACE用户在线;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-BEA73581-C6F4-4346-A61B-B6C19513BF1C__CHDHGCHF">
                  <p class="titleinexample">示例3-75还原到新位置后切换数据文件名</p>
                  <p>假设磁盘发生故障，强制您将数据文件还原到新磁盘位置。启动RMAN并以<code class="codeph">TARGET</code>身份连接到数据库后，可以使用<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">NEWNAME</code>命令重命名数据文件，然后使用<code class="codeph"><a href="RESTORE.html#GUID-4491C03F-C5F8-43E5-B4C4-FE26C70F2E9B">RESTORE</a></code>恢复丢失的数据文件。您运行<code class="codeph">SWITCH</code>以将控制文件指向新数据文件，然后再执行<code class="codeph"><a href="RECOVER.html#GUID-CA98040F-9865-4F4F-BAF2-91C518612E95">RECOVER</a></code> 。此示例分配磁盘和磁带通道。
                  </p><pre class="oac_no_warn" dir="ltr">RUN {ALLOCATE CHANNEL dev1 DEVICE TYPE DISK; ALLOCATE CHANNEL dev2 DEVICE TYPE sbt; ALTER TABLESPACE用户立即离线;为数据文件设置NEWNAME'/disk1/oradata/prod/users01.dbf'TO'/disk2/users01.dbf'; RESTORE TABLESPACE用户; SWITCH DATAFILE ALL; RECOVER TABLESPACE用户; ALTER TABLESPACE用户在线; }</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-BEA73581-C6F4-4346-A61B-B6C19513BF1C__CHDHHFAE">
                  <p class="titleinexample">示例3-76使用SET NEWNAME和SWITCH TEMPFILE ALL重命名临时文件</p>
                  <p>此示例演示如何使用<code class="codeph">SET NEWNAME</code>为多个临时文件指定新名称，并使用<code class="codeph">SWITCH TEMPFILE ALL</code>将临时文件重命名为指定的名称。必须在此过程开始时关闭数据库。打开数据库时，将在新位置重新创建临时文件。
                  </p><pre class="oac_no_warn" dir="ltr">连接目标/启动强制执行运行{将TEMTERFILE 1设置为'/disk2/temp01.dbf';为TEMPFILE 2设置NEWNAME到'/disk2/temp02.dbf';为TEMPFILE 3设置NEWNAME到'/disk2/temp03.dbf'; SWITCH TEMPFILE ALL; RESTORE DATABASE;恢复数据库; ALTER DATABASE OPEN; }</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-BEA73581-C6F4-4346-A61B-B6C19513BF1C__CHDBHFGF">
                  <p class="titleinexample">示例3-77切换到数据文件复制</p>
                  <p>以下命令将<code class="codeph">TOOLS</code>表空间中的数据文件<code class="codeph">/disk2/tools.copy</code>为名为<code class="codeph">/disk2/tools.copy</code>的数据文件副本：</p><pre class="oac_no_warn" dir="ltr">运行{ALTER TABLESPACE工具立即离线; SWITCH DATAFILE'/disk1/oradata/prod/tools01.dbf'TO DATAFILECOPY'/disk2/tools.copy'; RECOVER TABLESPACE工具; ALTER TABLESPACE工具在线; }</pre></div>
               <!-- class="example" -->
            </div>
         </div>
      </article>
   </body>
</html>
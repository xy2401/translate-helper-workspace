<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>SQL对象类型和引用</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Object-Relational Developer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Object-Relational Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="object-relational-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T02:05:10-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96436-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="basic-components-of-oracle-objects.html" title="Previous" type="text/html"></link>
      <link rel="next" href="object-methods.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Object-Relational Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADOBJ"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="basic-components-of-oracle-objects.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="object-methods.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">对象关系开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="basic-components-of-oracle-objects.html" property="item" typeof="WebPage"><span property="name">Oracle Objects的基本组件</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">SQL对象类型和引用</li>
            </ol>
            <a id="GUID-A3B2A9BB-CFC7-43D6-AAA1-185D6C99F37E" name="GUID-A3B2A9BB-CFC7-43D6-AAA1-185D6C99F37E"></a><a id="ADOBJ00201"></a>
            
            <h2 id="ADOBJ-GUID-A3B2A9BB-CFC7-43D6-AAA1-185D6C99F37E" class="sect2"><span class="enumeration_section">2.1</span> SQL对象类型和引用</h2>
         </header>
         <div class="ind">
            <div>
               <p>本节介绍SQL对象类型和引用。</p>
               <p>话题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="Sql-object-types-and-references.html#GUID-821233F6-ABA9-4100-B5E4-937F7DC57102" title="值为NULL的对象称为atomically null。">空对象和属性</a></p>
                  </li>
                  <li>
                     <p><a href="Sql-object-types-and-references.html#GUID-5CC1FC1F-4C82-4783-A24A-8BB15B1E0BCA" title="字符类型CHAR和VARCHAR2的长度可以指定为对象属性和集合中的字符数而不是字节数，即使某些字符由多个字节组成也是如此。">字符长度语义</a></p>
                  </li>
                  <li>
                     <p><a href="Sql-object-types-and-references.html#GUID-C1B90242-66F8-4B99-92DC-34C9C3255BCA" title="您可以像在其他表上一样在对象表上定义约束。">使用单个约束定义对象表</a></p>
                  </li>
                  <li>
                     <p><a href="Sql-object-types-and-references.html#GUID-F8071AB3-FD13-4C05-BB8A-A37D1C289B4D" title="您可以在对象表或存储表上为嵌套表列或属性定义索引，就像在其他表上一样。">定义对象表的索引</a></p>
                  </li>
                  <li>
                     <p><a href="Sql-object-types-and-references.html#GUID-9DB2EE21-CB39-4CCB-B58D-B5C89129071C" title="您可以像在其他表上一样在对象表上定义触发器。">定义对象表的触发器</a></p>
                  </li>
                  <li>
                     <p><a href="Sql-object-types-and-references.html#GUID-2CF01222-312F-4778-9013-BB91DFBD3B08" title="可以通过使用约束来强制执行REF列和属性的规则。">REF列和属性的规则</a></p>
                  </li>
                  <li>
                     <p><a href="Sql-object-types-and-references.html#GUID-D46F0E39-7A17-4DF5-A5BE-E33B3C8CDE38" title="有几种方法可以解析Oracle数据库中的名称。">名称解析</a></p>
                  </li>
                  <li>
                     <p><a href="Sql-object-types-and-references.html#GUID-D9B7A979-3F6C-46B6-8A68-6C3DE078A8EA">使用用户定义类型与远程数据库的限制</a></p>
                  </li>
               </ul>
               <p>您可以使用<code class="codeph">CREATE</code> <code class="codeph">TYPE</code>语句创建Oracle SQL对象类型。<a href="Sql-object-types-and-references.html#GUID-821233F6-ABA9-4100-B5E4-937F7DC57102__CIHGJFGD">示例2-1中</a>显示了对象类型创建的典型示例。
               </p>
               <div class="infoboxnotealso" id="GUID-A3B2A9BB-CFC7-43D6-AAA1-185D6C99F37E__GUID-D546FCD8-630A-46CA-BDC3-039E740D185A">
                  <p class="notep1">也可以看看：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>有关<code class="codeph">CREATE</code> <code class="codeph">TYPE</code> SQL语句的信息，请<a href="../lnpls/CREATE-TYPE-statement.html#LNPLS01375" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                     </li>
                     <li>
                        <p> 有关<code class="codeph">CREATE</code> <code class="codeph">TYPE</code> <code class="codeph">BODY</code> SQL语句的信息，请参阅<a href="../lnpls/CREATE-TYPE-BODY-statement.html#LNPLS01376" target="_blank"><span class="italic">Oracle Database PL / SQL语言参考</span></a></p>
                     </li>
                  </ul>
               </div>
            </div><a id="ADOBJ7069"></a><a id="ADOBJ7068"></a><div class="props_rev_3"><a id="GUID-821233F6-ABA9-4100-B5E4-937F7DC57102" name="GUID-821233F6-ABA9-4100-B5E4-937F7DC57102"></a><h3 id="ADOBJ-GUID-821233F6-ABA9-4100-B5E4-937F7DC57102" class="sect3"><span class="enumeration_section">2.1.1</span>空对象和属性</h3>
               <div>
                  <p>值为<code class="codeph">NULL</code>的对象称为atomically null。
                  </p>
                  <p><a href="glossary.html#GUID-A0D24E33-3B44-4118-951C-90C100EB72F2"><span class="xrefglossterm">原子空对象</span></a>不同于对其所有属性具有空值的对象。
                  </p>
                  <p>在具有空值的对象中，如果表列，对象属性，集合或集合元素已初始化为<code class="codeph">NULL</code>或尚未初始化，则它可能为<code class="codeph">NULL</code> 。通常，稍后将<code class="codeph">NULL</code>值替换为实际值。当所有属性都为null时，您仍然可以更改这些属性并调用对象的子程序或方法。使用原子空对象，您可以不执行这些操作。
                  </p>
                  <p><a href="Sql-object-types-and-references.html#GUID-821233F6-ABA9-4100-B5E4-937F7DC57102__CIHGJFGD">示例2-1</a>创建<code class="codeph">contacts</code>表并定义<code class="codeph">person_typ</code>对象类型和此类型的两个实例。
                  </p>
                  <div class="example" id="GUID-821233F6-ABA9-4100-B5E4-937F7DC57102__CIHGJFGD">
                     <p class="titleinexample">示例2-1为表中的对象插入NULL</p><pre class="oac_no_warn" dir="ltr">创建或替换类型person_typ AS OBJECT（idno NUMBER，名称VARCHAR2（30），电话VARCHAR2（20），MAP成员函数get_idno返回号码，成员程序display_details（SELF IN OUT NOCOPY person_typ））; /创建或替换TYPE BODY person_typ AS MAP会员功能get_idno返回号码是BEGIN RETURN idno;结束;成员程序display_details（SELF IN OUT NOCOPY person_typ）IS BEGIN  - 使用DBMS_OUTPUT包的PUT_LINE过程显示详细信息DBMS_OUTPUT.PUT_LINE（TO_CHAR（idno）||' - '|| name ||' - '|| phone） ;结束;结束; / CREATE TABLE联系人（联系人person_typ，contact_date DATE）; INSERT INTO联系人VALUES（person_typ（ <span class="bold">NULL，NULL，NULL</span> ），'2003年6月24日'）; INSERT INTO联系VALUES（ <span class="bold">NULL</span> ，'2003年6月24日'）;</pre><p>将两个<code class="codeph">person_typ</code>实例插入到表中，并给出两个不同的结果。在这两种情况下，Oracle数据库都会在<code class="codeph">contacts</code>表中为新行分配空间，并将其<code class="codeph">DATE</code>列设置为给定的值。但在第一种情况下，Oracle数据库为<code class="codeph">contact</code>列中的对象分配空间，并将每个对象的属性设置为<code class="codeph">NULL</code> 。在第二种情况下，Oracle数据库将<code class="codeph">person_typ</code>字段本身设置为<code class="codeph">NULL</code> ，并且不为对象分配空间。
                     </p>
                     <p>在某些情况下，您可以省略对空值的检查。表行或行对象不能为空。嵌套的对象表不能包含值为<code class="codeph">NULL</code>的元素。</p>
                     <p>嵌套表或数组可以为null，因此您需要处理该条件。null集合与空集合不同，没有元素。</p>
                     <p>请参阅<span class="q">“ <a href="declaring-initializing-objects-in-plsql.html#GUID-23135172-82E2-4C3E-800D-E584B43B578E">PL / SQL如何处理未初始化的对象</a> ”</span></p>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7071"></a><a id="ADOBJ7070"></a><div class="props_rev_3"><a id="GUID-5CC1FC1F-4C82-4783-A24A-8BB15B1E0BCA" name="GUID-5CC1FC1F-4C82-4783-A24A-8BB15B1E0BCA"></a><h3 id="ADOBJ-GUID-5CC1FC1F-4C82-4783-A24A-8BB15B1E0BCA" class="sect3"><span class="enumeration_section">2.1.2</span>字符长度语义</h3>
               <div>
                  <p>字符类型<code class="codeph">CHAR</code>和<code class="codeph">VARCHAR2</code>长度可以指定为对象属性和集合中的字符数而不是字节数，即使某些字符由多个字节组成也是如此。
                  </p>
                  <p>要为<code class="codeph">CHAR</code>和<code class="codeph">VARCHAR2</code>属性指定以字符为单位的长度，请将限定符<code class="codeph">char</code>添加到长度规范中。
                  </p>
                  <p>与<code class="codeph">CHAR</code>和<code class="codeph">VARCHAR2</code>一样， <code class="codeph">NCHAR</code>和<code class="codeph">NVARCHAR2</code>也可以用作对象和集合中的属性类型。<code class="codeph">NCHAR</code>和<code class="codeph">NVARCHAR2</code>总是以字符的形式隐式测量，因此不使用<code class="codeph">char</code>限定符。
                  </p>
                  <p>例如，以下语句创建一个具有字符长度<code class="codeph">VARCHAR2</code>属性和<code class="codeph">NCHAR</code>属性的对象：</p>
                  <div class="example" id="GUID-5CC1FC1F-4C82-4783-A24A-8BB15B1E0BCA__GUID-85B1DF68-CA20-463E-A51A-1BF1847DFCB0">
                     <p class="titleinexample">示例2-2使用char限定符创建employee_typ对象</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE TYPE employee_typ AS OBJECT（名称VARCHAR2 <span class="bold">（30个字符）</span> ，语言NCHAR（10），电话VARCHAR2（20））; /</pre><p>对于长度未指定<code class="codeph">char</code>限定符的<code class="codeph">CHAR</code>和<code class="codeph">VARCHAR2</code>属性， <code class="codeph">NLS_LENGTH_SEMANTICS</code>初始化参数设置（ <code class="codeph">CHAR</code>或<code class="codeph">BYTE</code> ）表示默认的度量单位。
                     </p>
                     <p> <a href="../nlspg/choosing-character-set.html#NLSPG170" target="_blank"><span class="italic">“Oracle数据库全球化支持指南”</span></a> ，了解有关字符长度语义的信息</p>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7073"></a><a id="ADOBJ7072"></a><div class="props_rev_3"><a id="GUID-C1B90242-66F8-4B99-92DC-34C9C3255BCA" name="GUID-C1B90242-66F8-4B99-92DC-34C9C3255BCA"></a><h3 id="ADOBJ-GUID-C1B90242-66F8-4B99-92DC-34C9C3255BCA" class="sect3"><span class="enumeration_section">2.1.3</span>使用单个约束定义对象表</h3>
               <div>
                  <p>您可以像在其他表上一样在对象表上定义约束。</p>
                  <div class="section">
                     <p>您可以在列对象的<a href="glossary.html#GUID-2AC9D4C9-267C-4CC0-B7ED-D1F58CCAC94E"><span class="xrefglossterm">叶级标量属性</span></a> s上定义约束，但没有作用域的<code class="codeph">REF</code>除外。
                     </p>
                     <p><a href="Sql-object-types-and-references.html#GUID-C1B90242-66F8-4B99-92DC-34C9C3255BCA__CIHEBDIH">示例2-3</a>将单个约束（隐式<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>约束）放在对象表<code class="codeph">office_tab</code>的<code class="codeph">office_id</code>列上。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-C1B90242-66F8-4B99-92DC-34C9C3255BCA__CIHEBDIH">
                     <p class="titleinexample">示例2-3使用约束创建office_tab对象表</p><pre class="oac_no_warn" dir="ltr">- 要求Ex。2-1创建或替换类型location_typ AS OBJECT（building_no NUMBER，city VARCHAR2（40））; / CREATE OR REPLACE TYPE office_typ AS OBJECT（office_id VARCHAR（10），office_loc location_typ，occupant person_typ）; / CREATE TABLE office_tab OF office_typ（office_id <span class="bold">PRIMARY KEY</span> ）;</pre><p><a href="Sql-object-types-and-references.html#GUID-C1B90242-66F8-4B99-92DC-34C9C3255BCA__CIHEBDIH">示例2-3中</a>定义的对象类型<code class="codeph">location_typ</code>是<a href="Sql-object-types-and-references.html#GUID-4BECCEF5-9377-4B5C-9764-AE742F458B1C__CIHDDDHJ">示例2-4中</a> <code class="codeph">department_mgrs</code>表中<code class="codeph">dept_loc</code>列的类型。
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7074"></a><div class="props_rev_3"><a id="GUID-4BECCEF5-9377-4B5C-9764-AE742F458B1C" name="GUID-4BECCEF5-9377-4B5C-9764-AE742F458B1C"></a><h3 id="ADOBJ-GUID-4BECCEF5-9377-4B5C-9764-AE742F458B1C" class="sect3"><span class="enumeration_section">2.1.4</span>定义具有多个约束的对象表</h3>
               <div>
                  <p>您可以定义具有多个约束的对象表。</p>
                  <div class="section">
                     <p>您可以定义具有多个约束的对象表。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-4BECCEF5-9377-4B5C-9764-AE742F458B1C__CIHDDDHJ">
                     <p class="titleinexample">示例2-4创建具有多个约束的department_mgrs表</p>
                     <p><a href="Sql-object-types-and-references.html#GUID-4BECCEF5-9377-4B5C-9764-AE742F458B1C__CIHDDDHJ">示例2-4</a>定义了表中<code class="codeph">location_typ</code>对象的标量属性的约束。
                     </p><pre class="oac_no_warn" dir="ltr">- 要求Ex。 2-1和2-3 CREATE TABLE department_mgrs（dept_no NUMBER PRIMARY KEY，dept_name CHAR（20），dept_mgr person_typ，dept_loc location_typ， <span class="bold">CONSTRAINT dept_loc_cons1</span> <span class="bold">UNIQUE（dept_loc.building_no，dept_loc.city）</span> ， <span class="bold">CONSTRAINT dept_loc_cons2</span> <span class="bold">CHECK（dept_loc.city IS NOT） NULL）</span> ）; INSERT INTO department_mgrs VALUES（101，'Physical Sciences'，person_typ（65，'Vrinda Mills'，'1-1-650-555-0125'），location_typ（300，'Palo Alto'））;</pre><p>请参阅<span class="q">“ <a href="constraints-on-objects.html#GUID-7191723A-4956-406B-A527-E2A4C288AE04">对象的约束</a> ”</span></p>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7076"></a><a id="ADOBJ7075"></a><div class="props_rev_3"><a id="GUID-F8071AB3-FD13-4C05-BB8A-A37D1C289B4D" name="GUID-F8071AB3-FD13-4C05-BB8A-A37D1C289B4D"></a><h3 id="ADOBJ-GUID-F8071AB3-FD13-4C05-BB8A-A37D1C289B4D" class="sect3"><span class="enumeration_section">2.1.5</span>定义对象表的索引</h3>
               <div>
                  <p>您可以在对象表或存储表上为嵌套表列或属性定义索引，就像在其他表上一样。</p>
                  <div class="section">
                     <p>在列对象的<a href="glossary.html#GUID-2AC9D4C9-267C-4CC0-B7ED-D1F58CCAC94E"><span class="xrefglossterm">叶级标量属性</span></a> s上定义索引。如果<code class="codeph">REF</code>是作用域，则只能在<code class="codeph">REF</code>属性或列上定义索引。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-F8071AB3-FD13-4C05-BB8A-A37D1C289B4D__CIHFAIFA">
                     <p class="titleinexample">示例2-5在表中创建对象类型的索引</p><pre class="oac_no_warn" dir="ltr">- 要求Ex。2-1,2-3，CREATE TABLE department_loc（dept_no NUMBER PRIMARY KEY，dept_name CHAR（20）， <span class="bold">dept_addr</span> location_typ）; <span class="bold">CREATE INDEX</span> i_dept_addr1 ON department_loc（ <span class="bold">dept_addr.city</span> ）; INSERT INTO department_loc VALUES（101，'Physical Sciences'，location_typ（300，'Palo Alto'））; INSERT INTO department_loc VALUES（104，'Life Sciences'，location_typ（400，'Menlo Park'））; INSERT INTO department_loc VALUES（103，'Biological Sciences'，location_typ（500，'Redwood Shores'））;</pre><p>此示例（ <a href="Sql-object-types-and-references.html#GUID-F8071AB3-FD13-4C05-BB8A-A37D1C289B4D__CIHFAIFA">示例2-5</a> ）索引<code class="codeph">city</code> ，它是列对象<code class="codeph">dept_addr</code>的叶级标量属性。
                     </p>
                     <p>只要Oracle数据库在索引定义中需要列名，您还可以指定列对象的标量属性。</p>
                     <p>有关嵌套表的索引的示例，请参阅<a href="collection-data-types.html#GUID-041D1EF0-0EF1-4488-9DBC-894C0214C5EF" title="嵌套表的元素实际上存储在单独的存储表中。">存储嵌套表的元素</a> 。
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7078"></a><a id="ADOBJ7077"></a><div class="props_rev_3"><a id="GUID-9DB2EE21-CB39-4CCB-B58D-B5C89129071C" name="GUID-9DB2EE21-CB39-4CCB-B58D-B5C89129071C"></a><h3 id="ADOBJ-GUID-9DB2EE21-CB39-4CCB-B58D-B5C89129071C" class="sect3"><span class="enumeration_section">2.1.6</span>定义对象表的触发器</h3>
               <div>
                  <p>您可以像在其他表上一样在对象表上定义触发器。</p>
                  <div class="section">
                     <p>您无法在存储表上为嵌套表列或属性定义触发器。您无法修改触发器主体中的<code class="codeph">LOB</code>值。否则，对带有触发器的对象类型没有特殊限制。
                     </p>
                     <p><a href="Sql-object-types-and-references.html#GUID-9DB2EE21-CB39-4CCB-B58D-B5C89129071C__CIHDIBJH">例2-6</a>定义了<span class="q">“ <a href="Sql-object-types-and-references.html#GUID-C1B90242-66F8-4B99-92DC-34C9C3255BCA" title="You can define constraints on an object table just as you can on other tables.">定义具有单个约束的对象表</a> ”中<a href="Sql-object-types-and-references.html#GUID-C1B90242-66F8-4B99-92DC-34C9C3255BCA" title="您可以像在其他表上一样在对象表上定义约束。">定义</a></span>的<code class="codeph">office_tab</code>表的触发器。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-9DB2EE21-CB39-4CCB-B58D-B5C89129071C__CIHDIBJH">
                     <p class="titleinexample">例2-6在表中的对象上创建触发器</p><pre class="oac_no_warn" dir="ltr">- 要求Ex。 2-1和2-3 CREATE TABLE移动（idno NUMBER，old_office location_typ，new_office location_typ）; <span class="bold">创建触发器触发器</span> 1更新office_loc之前ON <span class="bold">office_tab每次行</span> （new.office_loc.city ='Redwood Shores'）开始如下：new.office_loc.building_no = 600然后插入移动（idno，old_office，new_office）VALUES（：old .occupant.idno，：old.office_loc，：new.office_loc）;万一; END; / INSERT INTO office_tab VALUES（'BE32'，location_typ（300，'Palo Alto'），person_typ（280，'John Chan'，'415-555-0101'））; UPDATE office_tab设置office_loc = location_typ（600，'Redwood Shores'），其中office_id ='BE32'; select * from office_tab;从运动中选择*;</pre><p>请参阅<span class="q">“ <a href="object-view-manipulations.html#GUID-EBC807B2-E67C-4F2F-B27B-9CD197FE4B4F" title="您可以使用INSTEAD OF触发器更新复杂视图。">控制变异和验证的触发器的INSTEAD</a> ”</span></p>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7079"></a><div class="props_rev_3"><a id="GUID-2CF01222-312F-4778-9013-BB91DFBD3B08" name="GUID-2CF01222-312F-4778-9013-BB91DFBD3B08"></a><h3 id="ADOBJ-GUID-2CF01222-312F-4778-9013-BB91DFBD3B08" class="sect3"><span class="enumeration_section">2.1.7</span> REF列和属性规则</h3>
               <div>
                  <p>可以通过使用约束来强制执行<code class="codeph">REF</code>列和属性的规则。
                  </p>
                  <p>在Oracle数据库中，可以使用<code class="codeph">SCOPE</code>子句或引用约束子句来约束或约束<code class="codeph">REF</code>列或属性。当<code class="codeph">REF</code>列不受约束时，它可以将对象引用存储到相应对象类型的任何对象表中包含的行对象。
                  </p>
                  <p>Oracle数据库无法确保存储在此类列中的对象引用指向有效和现有的行对象。因此， <code class="codeph">REF</code>列可能包含不指向任何现有行对象的对象引用。这种<code class="codeph">REF</code>值被称为悬空参考。
                  </p>
                  <p><code class="codeph">SCOPE</code>约束可以应用于特定的对象表。存储在具有<code class="codeph">SCOPE</code>约束的列中的所有<code class="codeph">REF</code>值都指向<code class="codeph">SCOPE</code>子句中指定的表的行对象。然而， <code class="codeph">REF</code>值可能悬空。
                  </p>
                  <p>可以使用类似于外键规范的<code class="codeph">REFERENTIAL</code>约束来约束<code class="codeph">REF</code>列。引用约束的规则适用于此类列。也就是说，存储在这些列中的对象引用必须指向指定对象表中的有效和现有行对象。
                  </p>
                  <p>无法为<code class="codeph">REF</code>列指定<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>约束。但是，您可以为此类列指定<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束。
                  </p>
                  <div class="infoboxnotealso" id="GUID-2CF01222-312F-4778-9013-BB91DFBD3B08__GUID-A5413645-DC91-444F-A2D6-F961FB1BF671">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="key-features-object-relational-model.html#GUID-13F3AE86-1ACE-4002-B2E8-156699006719">引用行对象</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="inheritance-in-sql-object-types.html#GUID-F25CDD42-2140-4074-BE95-87925AAE4CEB">替换REF列和属性</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADOBJ7081"></a><a id="ADOBJ7080"></a><div class="props_rev_3"><a id="GUID-D46F0E39-7A17-4DF5-A5BE-E33B3C8CDE38" name="GUID-D46F0E39-7A17-4DF5-A5BE-E33B3C8CDE38"></a><h3 id="ADOBJ-GUID-D46F0E39-7A17-4DF5-A5BE-E33B3C8CDE38" class="sect3"><span class="enumeration_section">2.1.8</span>名称解析</h3>
               <div>
                  <p>有几种方法可以解析Oracle数据库中的名称。</p>
                  <p>Oracle SQL允许您在某些关系操作中省略限定表名。</p>
                  <p>例如，如果<code class="codeph">dept_addr</code>是<code class="codeph">department_loc</code>表中的列，而<code class="codeph">old_office</code>是<code class="codeph">movement</code>表中的列，则可以使用以下命令：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM department_loc WHERE EXISTS（SELECT * FROM movement WHERE dept_addr = old_office）;</pre><p>Oracle数据库确定每列属于哪个表。</p>
                  <p>使用点表示法，您可以使用表名或表别名限定列名，以使事物更易于维护。例如：</p>
                  <div class="example" id="GUID-D46F0E39-7A17-4DF5-A5BE-E33B3C8CDE38__GUID-26D6FAA8-1B28-48C3-831B-5F4928F769D1">
                     <p class="titleinexample">例2-7使用点表示法进行名称解析</p><pre class="oac_no_warn" dir="ltr">- 要求Ex。 2-1,2-3,2-5和2-6 SELECT * FROM department_loc WHERE EXISTS（SELECT * FROM movement WHERE <span class="bold">department_loc.dept_addr</span> = <span class="bold">movement.old_office</span> ）; SELECT * FROM department_loc d WHERE EXISTS（SELECT * FROM movement m WHERE <span class="bold">d.dept_addr</span> = <span class="bold">m.old_office</span> ）;</pre><p>在某些情况下，对象关系功能要求您指定表别名。</p>
                  </div>
                  <!-- class="example" -->
               </div><a id="ADOBJ7082"></a><div class="props_rev_3"><a id="GUID-70591B87-FEAC-4C63-9866-B86231705B44" name="GUID-70591B87-FEAC-4C63-9866-B86231705B44"></a><h4 id="ADOBJ-GUID-70591B87-FEAC-4C63-9866-B86231705B44" class="sect4"><span class="enumeration_section">2.1.8.1</span>何时需要表别名</h4>
                  <div>
                     <p>可能需要表别名以避免解决引用的问题。</p>
                     <p>Oracle数据库要求您使用表别名来限定对子程序或对象属性的任何点符号引用，以避免内部捕获和解决引用的类似问题。</p>
                     <p>内部捕获是由使用非限定名称引起的情况。例如，如果向<code class="codeph">depts</code>添加<code class="codeph">assignment</code>列并忘记更改查询，Oracle Database会自动重新编译查询，以便内部<code class="codeph">SELECT</code>使用<code class="codeph">depts</code>表中的<code class="codeph">assignment</code>列。
                     </p>
                     <p>在不使用点表示法的情况下直接引用对象表的顶级属性时，使用表别名是可选的。例如，以下语句定义了两个包含<code class="codeph">person_typ</code>对象类型的表。 <code class="codeph">person_obj_table</code>为类型的对象的对象表<code class="codeph">person_typ</code> ，并且<code class="codeph">contacts</code>是包含该对象的列的关系表<code class="codeph">person_typ</code> 。
                     </p>
                     <p>以下查询显示了引用属性<code class="codeph">idno</code>一些正确和错误的方法：</p>
                     <div class="infoboxnote" id="GUID-70591B87-FEAC-4C63-9866-B86231705B44__GUID-F6D119EB-97EB-473D-85F7-C61D86BC93BC">
                        <p class="notep1">注意：</p>
                        <p>这些陈述与本章中的其他示例无关。</p>
                     </div><pre class="pre codeblock"><code>＃1 SELECT idno FROM person_obj_table; - 更正＃2 SELECT contact.idno FROM contacts; --Illegal＃3 SELECT contacts.contact.idno FROM contacts; --Illegal＃4 SELECT p.contact.idno FROM contacts p; - 正确</code></pre><ul style="list-style-type:disc">
                        <li>
                           <p>在＃1中， <code class="codeph">idno</code>是<code class="codeph">person_obj_table</code>列的<code class="codeph">person_obj_table</code> 。它直接引用此顶级属性，而不使用点表示法，因此不需要表别名。
                           </p>
                        </li>
                        <li>
                           <p>在＃2中， <code class="codeph">idno</code>是名为<code class="codeph">contact</code>的列中<code class="codeph">person_typ</code>对象的属性名称。此引用使用点表示法，因此需要表别名，如＃4所示。
                           </p>
                        </li>
                        <li>
                           <p>＃3使用表名本身来限定引用。这是不正确的;表别名是必需的。</p>
                        </li>
                     </ul>
                     <p>即使表名本身由模式名称限定，也必须使用表别名而不是表名限定对对象属性或子程序的引用。</p>
                     <p>例如，以下表达式错误地引用该列的<code class="codeph">HR</code>模式， <code class="codeph">department_loc</code>表， <code class="codeph">dept_addr</code>列和<code class="codeph">city</code>属性。表达式不正确，因为<code class="codeph">department_loc</code>是表名，而不是别名。
                     </p>
                     <p><code class="codeph">HR.department_loc.dept_addr.city</code></p>
                     <p>相同的要求适用于使用<code class="codeph">REF</code>的属性引用。
                     </p>
                     <p>表别名应该在整个查询中唯一地选择相同的表，并且不应该与可以合法地出现在查询中的模式名称相同。</p>
                     <div class="infoboxnote" id="GUID-70591B87-FEAC-4C63-9866-B86231705B44__GUID-4DE67511-56E0-4937-BFA6-B2F860B54568">
                        <p class="notep1">注意：</p>
                        <p>Oracle建议您在所有<code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code>和<code class="codeph">SELECT</code>语句和子查询中定义表别名，并使用它们来限定列引用，无论列是否包含对象类型。
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="ADOBJ7083"></a><div class="props_rev_3"><a id="GUID-D9B7A979-3F6C-46B6-8A68-6C3DE078A8EA" name="GUID-D9B7A979-3F6C-46B6-8A68-6C3DE078A8EA"></a><h3 id="ADOBJ-GUID-D9B7A979-3F6C-46B6-8A68-6C3DE078A8EA" class="sect3"><span class="enumeration_section">2.1.9</span>使用远程数据库使用用户定义类型的限制</h3>
               <div>
                  <p>对象或用户定义的类型（具体地说，使用SQL <code class="codeph">CREATE</code> <code class="codeph">TYPE</code>语句声明的<code class="codeph">TYPE</code> ，而不是在PL / SQL包中声明的类型）目前仅在单个数据库中有用。
                  </p>
                  <p>Oracle数据库限制使用数据库链接，如下所示：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您无法连接到远程数据库以在远程表上选择，插入或更新用户定义的类型或对象<code class="codeph">REF</code> 。
                        </p>
                        <p>您可以将<code class="codeph">CREATE</code> <code class="codeph">TYPE</code>语句与可选关键字<code class="codeph">OID</code>一起使用，以创建允许在多个数据库中使用对象类型的用户指定的对象标识符（OID）。请参阅<a href="../addci/defining-object-types-for-data-cartridges.html#ADDCI210" target="_blank"><span class="italic">Oracle Database Data Cartridge Developer's Guide</span></a>中有关为对象类型分配OID的讨论。
                        </p>
                     </li>
                     <li>
                        <p>您不能在PL / SQL代码中使用数据库链接来声明远程用户定义类型的本地变量。</p>
                     </li>
                     <li>
                        <p>您无法在PL / SQL远程过程调用中传达用户定义的类型参数或返回值。</p>
                     </li>
                  </ul>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
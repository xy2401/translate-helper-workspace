<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>XMLELEMENT</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Language Reference "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Language Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96310-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="XMLDIFF.html" title="Previous" type="text/html"></link>
      <link rel="next" href="XMLEXISTS.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference"></meta>
    <meta name="dcterms.isVersionOf" content="SQLRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="XMLDIFF.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="XMLEXISTS.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL语言参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Functions.html" property="item" typeof="WebPage"><span property="name">功能</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">XMLELEMENT</li>
            </ol>
            <a id="GUID-DEA75423-00EA-4034-A246-4A774ADC988E" name="GUID-DEA75423-00EA-4034-A246-4A774ADC988E"></a><a id="SQLRF52015"></a><a id="SQLRF52016"></a><a id="SQLRF52017"></a><a id="SQLRF52018"></a><a id="SQLRF06168"></a>
            
            <h2 id="SQLRF-GUID-DEA75423-00EA-4034-A246-4A774ADC988E" class="sect2">XMLELEMENT</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-DEA75423-00EA-4034-A246-4A774ADC988E__GUID-A7EB13D0-25D8-47FB-8FAB-E79C64DCE8BA">句法</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-DEA75423-00EA-4034-A246-4A774ADC988E__GUID-D9A8624A-4DE5-4506-83CC-C29BE191700B"><img src="img/xmlelement.gif" alt="下面是xmlelement.eps的描述" title="下面是xmlelement.eps的描述" longdesc="img_text/xmlelement.html"><br><a href="img_text/xmlelement.html">插图描述xmlelement.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-DEA75423-00EA-4034-A246-4A774ADC988E__GUID-13553B1A-6D63-435F-A5B6-8581EE870CD4"><span class="italic">XML_attributes_clause</span> :: =</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-DEA75423-00EA-4034-A246-4A774ADC988E__GUID-09662760-941F-483D-B586-6051B146430D"><img src="img/xml_attributes_clause.gif" alt="下面是xml_attributes_clause.eps的描述" title="下面是xml_attributes_clause.eps的描述" longdesc="img_text/xml_attributes_clause.html"><br><a href="img_text/xml_attributes_clause.html">插图说明xml_attributes_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-DEA75423-00EA-4034-A246-4A774ADC988E__GUID-234A44AC-2ED7-41C6-91DD-4C8A7F49E2BA">目的</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><code class="codeph">XMLElement</code>获取<span class="italic"><code class="codeph">identifier</code></span>的元素名称或计算<code class="codeph">EVALNAME</code> <span class="italic"><code class="codeph">value_expr</code></span>的元素名称，元素的可选属性集合以及构成元素内容的参数。它返回<code class="codeph">XMLType</code>类型的实例。<code class="codeph">XMLElement</code>类似于<code class="codeph">SYS_XMLGen</code>除了<code class="codeph">XMLElement</code>可以包含返回的XML中的属性，但它不接受使用<code class="codeph">XMLFormat</code>对象的格式。
                  </p>
                  <p><code class="codeph">XMLElement</code>函数通常嵌套以生成具有嵌套结构的XML文档，如以下部分中的示例所示。
                  </p>
                  <p>有关<code class="codeph">ENTITYESCAPING</code>和<code class="codeph">NONENTITYESCAPING</code>关键字的说明，请参阅<a href="../adxdb/generation-of-XML-data-from-relational-data.html#ADXDB1620" target="_blank"><span class="italic">Oracle XML DB Developer's Guide</span></a> 。
                  </p>
                  <p>您必须为Oracle数据库指定一个值才能使用封闭标记。您可以通过指定<span class="italic"><code class="codeph">identifier</code></span> （字符串文字）或指定<code class="codeph">EVALNAME</code> <span class="italic"><code class="codeph">value_expr</code></span> 。在后一种情况下，将计算值表达式，并将结果（必须是字符串文字）用作标识符。标识符不必是列名或列引用。它不能是表达式或null。如果初始化参数<code class="codeph">MAX_STRING_SIZE</code> <code class="codeph">=</code> <code class="codeph">STANDARD</code> ，则最多可包含4000个字符;如果<code class="codeph">MAX_STRING_SIZE</code> <code class="codeph">=</code> <code class="codeph">EXTENDED</code>则<code class="codeph">MAX_STRING_SIZE</code> 32767个字符。</p>
                  <p>构成元素内容的对象遵循<code class="codeph">XMLATTRIBUTES</code>关键字。在<span class="italic"><code class="codeph">XML_attributes_clause</code></span> ，如果<span class="italic"><code class="codeph">value_expr</code></span>为null，则不会为该值表达式创建任何属性。<span class="italic"><code class="codeph">value_expr</code></span>的类型不能是对象类型或集合。如果使用<code class="codeph">AS</code>子句为<span class="italic"><code class="codeph">value_expr</code></span>指定别名，则如果初始化参数<code class="codeph">MAX_STRING_SIZE</code> <code class="codeph">=</code> <code class="codeph">STANDARD</code> ，则<span class="italic"><code class="codeph">c_alias</code></span>或计算值表达式（ <code class="codeph">EVALNAME</code> <span class="italic"><code class="codeph">value_expr</code></span> ）最多可为4000个字符，如果<code class="codeph">MAX_STRING_SIZE</code> <code class="codeph">=</code> <code class="codeph">EXTENDED</code> <code class="codeph">MAX_STRING_SIZE</code> 32767个字符。</p>
                  <div class="infoboxnotealso" id="GUID-DEA75423-00EA-4034-A246-4A774ADC988E__GUID-3717BEB4-4CB2-4859-8EE5-E0340DC6CB93">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="Data-Types.html#GUID-8EFA29E9-E8D8-40A6-A43E-954908C954A4">扩展数据类型</a> ”</span>有关<code class="codeph">MAX_STRING_SIZE</code>更多信息</p>
                  </div>
                  <p>对于图中<span class="italic"><code class="codeph">XML_attributes_clause</code></span>之后的可选<span class="italic"><code class="codeph">value_expr</code></span> ：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果<span class="italic"><code class="codeph">value_expr</code></span>是标量表达式，则可以省略<code class="codeph">AS</code>子句，Oracle使用列名作为元素名称。
                        </p>
                     </li>
                     <li>
                        <p>如果<span class="italic"><code class="codeph">value_expr</code></span>是对象类型或集合，则<code class="codeph">AS</code>子句是必需的，Oracle使用指定的<span class="italic"><code class="codeph">c_alias</code></span>作为封闭标记。
                        </p>
                     </li>
                     <li>
                        <p>如果<span class="italic"><code class="codeph">value_expr</code></span>为null，则不会为该值表达式创建任何元素。
                        </p>
                        <div class="infoboxnotealso" id="GUID-DEA75423-00EA-4034-A246-4A774ADC988E__GUID-51BA9640-4F73-46A9-82EC-3BE63E11A5A3">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="SYS_XMLGEN.html#GUID-1AC25984-F4AB-468E-BF53-561275AD44E8">SYS_XMLGEN</a></p>
                        </div>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-DEA75423-00EA-4034-A246-4A774ADC988E__GUID-3BABF467-BBE8-4774-99BB-1E4BC415B777">例子</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>以下示例为一系列员工生成<code class="codeph">Emp</code>元素，其中嵌套元素提供员工姓名和雇用日期：</p><pre class="oac_no_warn" dir="ltr">SELECT XMLELEMENT（“Emp”，XMLELEMENT（“Name”，e.job_id ||''|| e.last_name），XMLELEMENT（“Hiredate”，e.hire_date））作为“结果”来自员工e WHERE employee_id&gt; 200;结果------------------------------------------------- ------------------ &lt;Emp&gt; &lt;名称&gt; MK_MAN Hartstein &lt;/ Name&gt; &lt;Hiredate&gt; 2004-02-17 &lt;/ Hiredate&gt; &lt;/ Emp&gt; &lt;Emp&gt; &lt;姓名&gt; MK_REP Fay &lt;/ Name&gt; &lt;Hiredate&gt; 2005-08-17 &lt;/ Hiredate&gt; &lt;/ Emp&gt; &lt;Emp&gt; &lt;姓名&gt; HR_REP Mavris &lt;/ Name&gt; &lt;Hiredate&gt; 2002-06-07 &lt;/ Hiredate&gt; &lt;/ Emp&gt; &lt;Emp&gt; &lt;Name&gt; PR_REP Baer &lt;/ Name&gt; &lt;Hiredate&gt; 2002-06-07 &lt;/ Hiredate&gt; &lt;/ Emp&gt; &lt;Emp&gt; &lt;Name&gt; AC_MGR Higgins &lt;/ Name&gt; &lt;Hiredate&gt; 2002-06-07 &lt;/ Hiredate&gt; &lt;/ Emp&gt; &lt;Emp&gt; &lt;Name&gt; AC_ACCOUNT Gietz &lt;/ Name&gt; &lt;Hiredate&gt; 2002-06-07 &lt;/ Hiredate&gt; &lt;/ Emp&gt;选择了6行。
</pre><p>以下类似示例使用<code class="codeph">XMLElement</code>函数和<span class="italic"><code class="codeph">XML_attributes_clause</code></span>来创建具有顶级元素的属性值的嵌套XML元素：</p><pre class="oac_no_warn" dir="ltr">SELECT XMLELEMENT（“Emp”，XMLATTRIBUTES（e.employee_id AS“ID”，e.last_name），XMLELEMENT（“Dept”，e.department_id），XMLELEMENT（“Salary”，e.salary））AS“Emp Element”FROM员工e WHERE e.employee_id = 206; Emp Element ------------------------------------------------ --------------- &lt;Emp ID =“206”LAST_NAME =“Gietz”&gt; &lt;部门&gt; 110 &lt;/部门&gt; &lt;薪水&gt; 8300 &lt;/薪水&gt; &lt;/ Emp&gt;</pre><p>请注意，没有为<code class="codeph">last_name</code>列指定<code class="codeph">AS</code> <span class="italic"><code class="codeph">identifier</code></span>子句。因此，返回的XML使用列名<code class="codeph">last_name</code>作为默认值。
                  </p>
                  <p>最后，下一个示例使用<span class="italic"><code class="codeph">XML_attributes_clause</code></span>的子查询将另一个表中的信息检索到元素的属性中：</p><pre class="oac_no_warn" dir="ltr">SELECT XMLELEMENT（“Emp”，XMLATTRIBUTES（e.employee_id，e.last_name），XMLELEMENT（“Dept”，XMLATTRIBUTES（e.department_id，（SELECT d.department_name FROM departments d WHERE d.department_id = e.department_id）as“Dept_name” “）），XMLELEMENT（”薪水“，e.salary），XMLELEMENT（”Hiredate“，e.hire_date））AS”Emp Element“来自员工e WHERE employee_id = 205; Emp Element ------------------------------------------------ ------------------- &lt;Emp EMPLOYEE_ID =“205”LAST_NAME =“Higgins”&gt; &lt;Dept DEPARTMENT_ID =“110”Dept_name =“Accounting”/&gt; &lt;salary&gt; 12008 &lt;/ salary&gt; &lt;Hiredate&gt; 2002-06-07 &lt;/ Hiredate&gt; &lt;/ Emp&gt;</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>数据库管理</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="JDBC Developer&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="JDBC Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="jdbc-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-13T13:20:37-08:00"></meta>
      <meta name="dcterms.title" content="JDBC Developer&#39;s Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96471-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="manageability.html" title="Previous" type="text/html"></link>
      <link rel="next" href="JDBC-diagnosability.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="JJDBC"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="manageability.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="JDBC-diagnosability.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">JDBC开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="manageability.html" property="item" typeof="WebPage"><span property="name">可管理性</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">数据库管理</li>
            </ol>
            <a id="GUID-6EC16CE6-5734-473E-A270-EB387A9C0043" name="GUID-6EC16CE6-5734-473E-A270-EB387A9C0043"></a><a id="JJDBC28880"></a>
            
            <h2 id="JJDBC-GUID-6EC16CE6-5734-473E-A270-EB387A9C0043" class="sect2"><span class="enumeration_chapter">34</span>数据库管理</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章讨论Oracle Database <span class="italic">11g</span>第1版中引入的数据库管理方法。本章包含以下部分：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="database-administration.html#GUID-B49D5076-E5B1-4B57-851B-0C33B8C48738">使用数据库管理方法</a></p>
                  </li>
                  <li>
                     <p><a href="database-administration.html#GUID-FAD8D5B5-FDBE-48DA-A1E2-21F7CC6322B2">使用启动方法</a></p>
                  </li>
                  <li>
                     <p><a href="database-administration.html#GUID-C171ABF4-F685-4D64-B7F9-E41871339A8F">使用shutdown方法</a></p>
                  </li>
                  <li>
                     <p><a href="database-administration.html#GUID-44E6221F-C517-47D8-B0CD-510BAE0877C2">一个完整的例子</a></p>
                  </li>
               </ul>
            </div><a id="JJDBC29101"></a><div class="props_rev_3"><a id="GUID-B49D5076-E5B1-4B57-851B-0C33B8C48738" name="GUID-B49D5076-E5B1-4B57-851B-0C33B8C48738"></a><h3 id="JJDBC-GUID-B49D5076-E5B1-4B57-851B-0C33B8C48738" class="sect3"><span class="enumeration_section">34.1</span>使用数据库管理方法</h3>
               <div>
                  <div class="section">
                     <p>从Oracle Database <span class="italic">11g</span>第1版开始， <code class="codeph">oracle.jdbc.添加了两个JDBC方法，即<code class="codeph">startup</code>和<code class="codeph">shutdown</code> <code class="codeph">oracle.jdbc.OracleConnection</code>接口，使您可以启动和关闭Oracle数据库实例。这类似于从SQL * Plus启动或关闭数据库实例的方式。
                     </p>
                     <p>要使用<code class="codeph">startup</code>和<code class="codeph">shutdown</code>方法，您必须：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>与服务器建立专用连接。您无法通过调度程序连接到共享服务器。</p>
                        </li>
                        <li>
                           <p>以<code class="codeph">SYSDBA</code>或<code class="codeph">SYSOPER</code>连接。要以<code class="codeph">SYSDBA</code>或<code class="codeph">SYSOPER</code>与Oracle JDBC驱动程序连接，需要相应地设置<code class="codeph">INTERNAL_LOGON</code>连接属性。
                           </p>
                        </li>
                     </ul>
                     <p>要使用JDBC Thin驱动程序以<code class="codeph">SYSDBA</code>身份登录，必须将服务器配置为使用密码文件。例如，要将<code class="codeph">system/manager</code>配置为使用JDBC Thin驱动程序作为<code class="codeph">SYSDBA</code>进行连接，请执行以下操作：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>从命令行键入：</span><div><pre class="oac_no_warn" dir="ltr">orapwd file = $ ORACLE_HOME / dbs / orapw entries = 5输入密码： <span class="italic">密码</span>
</pre></div>
                     </li>
                     <li class="stepexpand"><span>以<code class="codeph">SYSDBA</code>身份连接到数据库，并从SQL * Plus运行以下命令：</span><div><pre class="oac_no_warn" dir="ltr">GRANT SYSDBA TO系统; <span class="bold">PASSWORD系统</span>更改<span class="bold">系统</span>密码新密码： <span class="italic">密码</span>重新输入新密码： <span class="italic">密码</span>
</pre></div>
                     </li>
                     <li class="stepexpand"><span>编辑<code class="codeph">init.ora</code>并添加以下行：</span><div><pre class="oac_no_warn" dir="ltr">REMOTE_LOGIN_PASSWORDFILE = EXCLUSIVE</pre></div>
                     </li>
                     <li class="stepexpand"><span>重新启动数据库实例。</span></li>
                  </ol>
                  <div class="section">
                     <p>与JDBC Thin驱动程序相反，JDBC OCI驱动程序可以在本地连接为<code class="codeph">SYSDBA</code>或<code class="codeph">SYSOPER</code> ，而无需在服务器上指定密码文件。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="JJDBC29103"></a><a id="JJDBC29102"></a><div class="props_rev_3"><a id="GUID-FAD8D5B5-FDBE-48DA-A1E2-21F7CC6322B2" name="GUID-FAD8D5B5-FDBE-48DA-A1E2-21F7CC6322B2"></a><h3 id="JJDBC-GUID-FAD8D5B5-FDBE-48DA-A1E2-21F7CC6322B2" class="sect3"><span class="enumeration_section">34.2</span>使用启动方法</h3>
               <div>
                  <div class="section">
                     <p>要使用<code class="codeph">startup</code>方法启动数据库实例，应用程序必须首先以<code class="codeph">PRELIM_AUTH</code>模式中的<code class="codeph">SYSDBA</code>或<code class="codeph">SYSOPER</code>连接到数据库，这是数据库关闭时允许的唯一连接模式。您可以通过将连接属性<code class="codeph">PRELIM_AUTH</code>设置为<code class="codeph">true</code>来执行此操作。在<code class="codeph">PRELIM_AUTH</code>模式下，您<span class="italic">只能</span>启动已关闭的数据库实例。您<span class="italic">无法</span>在此模式下运行任何SQL语句。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FAD8D5B5-FDBE-48DA-A1E2-21F7CC6322B2__GUID-36830BC0-B7AB-4082-80E9-73C7CA38BA3F">例</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下代码段显示了如何启动已关闭的数据库实例：</p><pre class="oac_no_warn" dir="ltr">OracleDataSource ds = new OracleDataSource（）;属性prop = new Properties（）; prop.setProperty（ “用户”， “SYS”）; prop.setProperty（ “密码”， “经理”）; prop.setProperty（ “internal_logon”， “SYSDBA”）; prop.setProperty（ “prelim_auth”， “真”）; ds.setConnectionProperties（丙）; ds.setURL（“jdbc：oracle：thin：@（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = XYZ.com）（PORT = 5221））”+“（CONNECT_DATA =（SERVICE_NAME = rdbms.devplmt。XYZ.com）））“）; OracleConnection conn =（OracleConnection）ds.getConnection（）; conn.startup（OracleConnection。DatabaseStartupMode。没有限制）; conn.close（）;</pre><div class="infoboxnote" id="GUID-FAD8D5B5-FDBE-48DA-A1E2-21F7CC6322B2__GUID-5386923F-EC74-4CD0-B894-88A3C9C3EBEB">
                        <p class="notep1">注意：</p>
                        <p><code class="codeph">startup</code>方法将使用服务器参数文件启动数据库。Oracle JDBC驱动程序<span class="italic">不</span>支持使用客户机参数文件启动数据库。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="JJDBC29105"></a><a id="JJDBC28881"></a><div class="props_rev_3"><a id="GUID-7AF28225-193D-48DD-919B-C649E42D0F52" name="GUID-7AF28225-193D-48DD-919B-C649E42D0F52"></a><h4 id="JJDBC-GUID-7AF28225-193D-48DD-919B-C649E42D0F52" class="sect4"><span class="enumeration_section">34.2.1</span>数据库启动选项</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">startup</code>方法接受一个指定数据库启动选项的参数。<a href="database-administration.html#GUID-7AF28225-193D-48DD-919B-C649E42D0F52__CHDIBADI" title="表">表34-1</a>列出了支持的数据库启动选项。这些选项在<code class="codeph">oracle.jdbc.中定义<code class="codeph">oracle.jdbc.的OracleConnection。DatabaseStartupMode</code>类。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformalwide" id="GUID-7AF28225-193D-48DD-919B-C649E42D0F52__CHDIBADI">
                        <p class="titleintable">表34-1支持的数据库启动选项</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="支持的数据库启动选项" width="100%" border="1" summary="table" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d85113e292">选项</th>
                                 <th align="left" valign="bottom" width="78%" id="d85113e295">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d85113e300" headers="d85113e292 ">
                                    <p><code class="codeph">力</code></p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d85113e300 d85113e295 ">
                                    <p>在启动新实例之前，在中止模式下关闭数据库的当前实例（如果有）。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d85113e308" headers="d85113e292 ">
                                    <p><code class="codeph">没有限制</code></p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d85113e308 d85113e295 ">
                                    <p>无限制地启动数据库。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d85113e316" headers="d85113e292 ">
                                    <p><code class="codeph">限制</code></p>
                                 </td>
                                 <td align="left" valign="top" width="78%" headers="d85113e316 d85113e295 ">
                                    <p>启动数据库并允许数据库仅访问具有<code class="codeph">CREATE SESSION</code>和<code class="codeph">RESTRICTED SESSION</code>权限的用户，通常是DBA。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p><code class="codeph">startup</code>方法仅启动数据库实例。它既不会安装也不会打开它。要装入和打开数据库实例，必须重新连接为<code class="codeph">SYSDBA</code>或<code class="codeph">SYSOPER</code> ，而不使用<code class="codeph">PRELIM_AUTH</code>模式。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7AF28225-193D-48DD-919B-C649E42D0F52__GUID-988394F4-EBB3-4BEE-9A61-67727B00E330">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下代码段显示了如何装入和打开数据库实例：</p><pre class="oac_no_warn" dir="ltr">OracleDataSource ds1 = new OracleDataSource（）;属性prop1 = new Properties（）; prop1.setProperty（ “用户”， “SYS”）; prop1.setProperty（ “密码”， “经理”）; prop1.setProperty（ “internal_logon”， “SYSDBA”）; ds1.setConnectionProperties（为prop1）; ds1.setURL（DB_URL）; OracleConnection conn1 =（OracleConnection）ds1.getConnection（）;语句stmt = conn1.createStatement（）; stmt.executeUpdate（“ALTER DATABASE MOUNT”）; stmt.executeUpdate（“ALTER DATABASE OPEN”）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="JJDBC29107"></a><a id="JJDBC29106"></a><div class="props_rev_3"><a id="GUID-C171ABF4-F685-4D64-B7F9-E41871339A8F" name="GUID-C171ABF4-F685-4D64-B7F9-E41871339A8F"></a><h3 id="JJDBC-GUID-C171ABF4-F685-4D64-B7F9-E41871339A8F" class="sect3"><span class="enumeration_section">34.3</span>使用关机方法</h3>
               <div>
                  <div class="section">
                     <p><code class="codeph">shutdown</code>方法使您可以关闭Oracle数据库实例。要使用此方法，必须以<code class="codeph">SYSDBA</code>或<code class="codeph">SYSOPER</code>身份连接到数据库。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-C171ABF4-F685-4D64-B7F9-E41871339A8F__GUID-5ADC9945-BCBC-4834-9126-26C0251B5F17">例</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下代码段显示了如何关闭数据库实例：</p><pre class="oac_no_warn" dir="ltr">OracleDataSource ds2 = new OracleDataSource（）; ...OracleConnection conn2 =（OracleConnection）ds2.getConnection（）; conn2.shutdown（的OracleConnection。DatabaseShutdownMode。即时）;语句stmt1 = conn2.createStatement（）; stmt1.executeUpdate（“ALTER DATABASE CLOSE NORMAL”）; stmt1.executeUpdate（“ALTER DATABASE DISMOUNT”）; stmt1.close（）; conn2.shutdown（的OracleConnection。DatabaseShutdownMode。最后）; conn2.close（）;</pre></div>
                  <!-- class="section" -->
               </div><a id="JJDBC28882"></a><div class="props_rev_3"><a id="GUID-F69976EA-0142-4431-BB6D-386F97D69475" name="GUID-F69976EA-0142-4431-BB6D-386F97D69475"></a><h4 id="JJDBC-GUID-F69976EA-0142-4431-BB6D-386F97D69475" class="sect4"><span class="enumeration_section">34.3.1</span>数据库关闭选项</h4>
                  <div>
                     <div class="section">
                        <p>与<code class="codeph">startup</code>方法一样， <code class="codeph">shutdown</code>方法也需要一个参数。在这种情况下，该参数指定数据库关闭选项。<a href="database-administration.html#GUID-F69976EA-0142-4431-BB6D-386F97D69475__CHDEGAGA" title="表">表34-2</a>列出了支持的数据库关闭选项。这些选项在<code class="codeph">oracle.jdbc.中定义<code class="codeph">oracle.jdbc.的OracleConnection。DatabaseShutdownMode</code>类。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformalwide" id="GUID-F69976EA-0142-4431-BB6D-386F97D69475__CHDEGAGA">
                        <p class="titleintable">表34-2支持的数据库关闭选项</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="支持的数据库关闭选项" width="100%" border="1" summary="table" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="25%" id="d85113e445">选项</th>
                                 <th align="left" valign="bottom" width="75%" id="d85113e448">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d85113e453" headers="d85113e445 ">
                                    <p><code class="codeph">中止</code></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d85113e453 d85113e448 ">
                                    <p>不等待当前调用完成或用户断开与数据库的连接。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d85113e461" headers="d85113e445 ">
                                    <p><code class="codeph">CONNECT</code></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d85113e461 d85113e448 ">
                                    <p>拒绝任何新连接并等待现有连接结束。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d85113e469" headers="d85113e445 ">
                                    <p><code class="codeph">最后</code></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d85113e469 d85113e448 ">
                                    <p>关闭数据库。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d85113e477" headers="d85113e445 ">
                                    <p><code class="codeph">即时</code></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d85113e477 d85113e448 ">
                                    <p>不等待当前调用完成或用户断开与数据库的连接。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d85113e485" headers="d85113e445 ">
                                    <p><code class="codeph">TRANSACTIONAL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d85113e485 d85113e448 ">
                                    <p>拒绝新交易并等待活动交易结束。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d85113e493" headers="d85113e445 ">
                                    <p><code class="codeph">TRANSACTIONAL_LOCAL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d85113e493 d85113e448 ">
                                    <p>拒绝新的本地事务并等待活动的本地事务结束。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>对于除<code class="codeph">ABORT</code>和<code class="codeph">FINAL</code>之外的关闭选项，必须使用<code class="codeph">FINAL</code>选项再次调用<code class="codeph">shutdown</code>方法以实际关闭数据库。
                        </p>
                        <div class="infoboxnote" id="GUID-F69976EA-0142-4431-BB6D-386F97D69475__GUID-73F015C9-2471-4631-823A-4BDA57F5BAC9">
                           <p class="notep1">注意：</p>
                           <p><code class="codeph">shutdown(DatabaseShutdownMode.FINAL)</code>方法之前必须使用以下选项之一再次调用<code class="codeph">shutdown</code>方法： <code class="codeph">CONNECT</code> ， <code class="codeph">TRANSACTIONAL</code> ， <code class="codeph">TRANSACTIONAL_LOCAL</code>或<code class="codeph">IMMEDIATE</code> 。否则，呼叫会挂起。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-73BA8FDD-8D27-4AFC-B798-0EAB56FF7CE5" name="GUID-73BA8FDD-8D27-4AFC-B798-0EAB56FF7CE5"></a><h4 id="JJDBC-GUID-73BA8FDD-8D27-4AFC-B798-0EAB56FF7CE5" class="sect4"><span class="enumeration_section">34.3.2</span>标准数据库关闭过程</h4>
                  <div>
                     <div class="section">
                        <p>关闭数据库的标准方法如下：</p>
                        <ol>
                           <li>
                              <p>通过禁止数据库中的进一步连接或事务来启动关闭。关闭选项可以是<code class="codeph">CONNECT</code> ， <code class="codeph">TRANSACTIONAL</code> ， <code class="codeph">TRANSACTIONAL_LOCAL</code>或<code class="codeph">IMMEDIATE</code> 。</p>
                           </li>
                           <li>
                              <p>通过调用适当的<code class="codeph">ALTER DATABASE</code>命令卸载并关闭数据库。
                              </p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">FINAL</code>选项完成关闭。
                              </p>
                           </li>
                        </ol>
                        <p>在特殊情况下，尽快关闭数据库，可以使用<code class="codeph">ABORT</code>选项。这相当于SQL * Plus中的<code class="codeph">SHUTDOWN ABORT</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="JJDBC28884"></a><a id="JJDBC29110"></a><div class="props_rev_3"><a id="GUID-44E6221F-C517-47D8-B0CD-510BAE0877C2" name="GUID-44E6221F-C517-47D8-B0CD-510BAE0877C2"></a><h3 id="JJDBC-GUID-44E6221F-C517-47D8-B0CD-510BAE0877C2" class="sect3"><span class="enumeration_section">34.4</span>一个完整的例子</h3>
               <div>
                  <div class="section">
                     <p><a href="database-administration.html#GUID-44E6221F-C517-47D8-B0CD-510BAE0877C2__CHDCIIII">例34-1</a>说明了<code class="codeph">startup</code>和<code class="codeph">shutdown</code>方法的使用。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-44E6221F-C517-47D8-B0CD-510BAE0877C2__CHDCIIII">
                     <p class="titleinexample">例34-1数据库启动和关闭</p><pre class="oac_no_warn" dir="ltr">import java.sql。声明; import java.util。性能; import oracle.jdbc。的OracleConnection; import oracle.jdbc.pool。OracleDataSource; / ** *要以sysdba身份登录，您需要为用户“sys”创建密码文件：* orapwd file = / path / orapw password = <span class="italic">password</span> entries = 300 *并在init.ora中添加以下设置：* REMOTE_LOGIN_PASSWORDFILE = EXCLUSIVE *然后重启数据库。* / public class DBStartup {static final String DB_URL =“jdbc：oracle：thin：@（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = localhost）（PORT = 5221））”+“（CONNECT_DATA =（SERVICE_NAME = rdbms.devplmt。XYZ.com）））“; public static void main（String [] argv）throws Exception {//启动数据库：OracleDataSource ds = new OracleDataSource（）; Properties prop = new Properties（）; prop.setProperty（”user “，”sys“）; prop.setProperty（”password“，”manager“）; prop.setProperty（”internal_logon“，”sysdba“）; prop.setProperty（”prelim_auth“，”true“）; ds.setConnectionProperties（ prop）; ds.setURL（DB_URL）; OracleConnection conn =（OracleConnection）ds.getConnection（）; conn.startup（OracleConnection。DatabaseStartupMode。没有限制）; conn.close（）; //挂载和打开数据库OracleDataSource ds1 = new OracleDataSource（）;属性prop1 = new Properties（）; prop1.setProperty（ “用户”， “SYS”）; prop1.setProperty（ “密码”， “经理”）; prop1.setProperty（ “internal_logon”， “SYSDBA”）; ds1.setConnectionProperties（为prop1）; ds1.setURL（DB_URL）; OracleConnection conn1 =（OracleConnection）ds1.getConnection（）;语句stmt = conn1.createStatement（）; stmt.executeUpdate（“ALTER DATABASE MOUNT”）; stmt.executeUpdate（“ALTER DATABASE OPEN”）; stmt.close（）; conn1.close（）; //关闭数据库OracleDataSource ds2 = new OracleDataSource（）;属性prop = new Properties（）; prop.setProperty（ “用户”， “SYS”）; prop.setProperty（ “密码”， “经理”）; prop.setProperty（ “internal_logon”， “SYSDBA”）; ds2.setConnectionProperties（丙）; ds2.setURL（DB_URL）; OracleConnection conn2 =（OracleConnection）ds2.getConnection（）; conn2.shutdown（的OracleConnection。DatabaseShutdownMode。即时）;语句stmt1 = conn2.createStatement（）; stmt1.executeUpdate（“ALTER DATABASE CLOSE NORMAL”）; stmt1.executeUpdate（“ALTER DATABASE DISMOUNT”）; stmt1.close（）; conn2.shutdown（的OracleConnection。DatabaseShutdownMode。最后）; conn2.close（）; }}</pre></div>
                  <!-- class="example" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
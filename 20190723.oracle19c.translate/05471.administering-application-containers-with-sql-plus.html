<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can administer application containers, including application roots and application PDBs. You can also administer the applications installed in application containers."></meta>
      <meta name="description" content="You can administer application containers, including application roots and application PDBs. You can also administer the applications installed in application containers."></meta>
      <title>管理应用程序容器</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator’s Guide "></meta>
      <meta property="og:description" content="You can administer application containers, including application roots and application PDBs. You can also administer the applications installed in application containers."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="multitenant-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-20T09:59:22-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2017, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96136-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="administering-pdb-snapshots.html" title="Previous" type="text/html"></link>
      <link rel="next" href="managing-security-for-a-multitenant-environment.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Multitenant Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="MULTI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="administering-pdb-snapshots.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="managing-security-for-a-multitenant-environment.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="managing-a-multitenant-environment.html" property="item" typeof="WebPage"><span property="name">管理多租户环境</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理应用程序容器</li>
            </ol>
            <a id="GUID-1AFD0268-6A2B-4F84-BB4D-4D36976DE53B" name="GUID-1AFD0268-6A2B-4F84-BB4D-4D36976DE53B"></a>
            
            <h2 id="MULTI-GUID-1AFD0268-6A2B-4F84-BB4D-4D36976DE53B" class="sect2"><span class="enumeration_chapter">17</span>管理应用程序容器</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以管理应用程序容器，包括应用程序根和应用程序PDB。您还可以管理应用程序容器中安装的应用程序。</p>
               <div class="infoboxnote" id="GUID-1AFD0268-6A2B-4F84-BB4D-4D36976DE53B__GUID-AFCA1EC1-62F0-4E80-945B-E61F35DF4779">
                  <p class="notep1">注意：</p>您可以使用SQL * Plus或Oracle SQL Developer完成本章中的任务。
               </div>
               <p>本章包含以下主题：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-F98D88A2-E42A-49FF-B3F8-69D860323F79">关于应用容器管理</a><br>管理应用程序容器的一些方面类似于管理CDB根和CDB作为整体，而其他方面类似于管理PDB。</li>
                  <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-8BBB5E02-F0EA-4499-B23F-E5135DDA6B6D">关于修改应用程序根目录</a><br><code class="codeph">ALTER DATABASE</code>语句可以修改应用程序根目录。<code class="codeph">ALTER PLUGGABLE DATABASE</code>语句可以修改应用程序PDB的打开模式。
                  </li>
                  <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-EB81A80C-FA22-4D9B-A69D-7E2C8FB5E854">管理应用程序容器中的应用程序</a><br>您可以在应用程序容器中安装，升级或修补应用程序。
                  </li>
                  <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-DC57BCFA-8DC5-46B6-809F-E3570F44D801">管理应用程序通用对象</a><br>应用程序公共对象是应用程序容器中的用户创建的数据库对象。应用程序公共对象在应用程序根目录中创建。
                  </li>
                  <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-CE09995E-7805-484B-9017-B0AF7CF97313">在应用程序容器中的容器上发出DML语句</a><br>在应用程序根目录中发出的DML语句可以修改应用程序容器中的一个或多个容器。此外，您可以为DML语句指定一个或多个默认容器目标。
                  </li>
                  <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-AAF93A02-7C70-4024-8758-E351C213543E">PDB与容器映射分区</a><br>当数据未在表级进行物理分区时，容器映射可以在应用程序PDB级别对数据进行分区。
                  </li>
               </ul>
               <div class="relinfo">
                  <p><strong>相关话题</strong></p>
                  <ul>
                     <li><a href="creating-removing-application-containers-seeds-with-sql-plus.html#GUID-E2B95068-D16D-438D-9A0B-974540988990" title="您可以通过多种不同方式创建应用程序容器和应用程序种子您还可以从CDB中删除应用程序容器，并且可以从应用程序容器中删除应用程序种子。">创建和删除应用程序容器和种子</a></li>
                     <li><a href="overview-of-managing-a-multitenant-environment.html#GUID-C1EEE559-3E2B-42A4-B0A0-94C82769ECCB" title="您可以使用各种工具来配置和管理多租户环境。">多租户环境的工具</a></li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="managing-a-multitenant-environment.html#GUID-93F1E584-D309-4301-82E0-AD0E60D4977C" title="您可以使用SQL * Plus或企业管理器云控制（云控制）管理多租户环境。">管理多租户环境</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-F98D88A2-E42A-49FF-B3F8-69D860323F79" name="GUID-F98D88A2-E42A-49FF-B3F8-69D860323F79"></a><h3 id="MULTI-GUID-F98D88A2-E42A-49FF-B3F8-69D860323F79" class="sect3"><span class="enumeration_section">17.1</span>关于应用程序容器管理</h3>
               <div>
                  <p>管理应用程序容器的一些方面类似于管理CDB根和CDB作为整体，而其他方面类似于管理PDB。</p>
                  <p>管理应用程序容器与管理CDB类似，因为您可以管理应用程序根目录和插入应用程序根目录的应用程序PDB。但是，管理应用程序容器也类似于管理PDB，因为对应用程序容器的更改不会影响CDB中的其他应用程序容器或PDB。</p>
                  <p>下表描述了与管理CDB或CDB根目录的管理任务类似的应用程序容器的管理任务。</p>
                  <div class="tblformal" id="GUID-F98D88A2-E42A-49FF-B3F8-69D860323F79__GUID-2E6C3AD5-D500-40EF-AD65-5C25A6E1AF47">
                     <p class="titleintable">表17-1与CDB类似的应用程序容器管理任务</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="应用程序容器管理任务与CDB类似" border="1" summary="This table describes various administrative tasks for administering an application container and lists documentation for more information about the tasks." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" id="d79238e250">行政任务</th>
                              <th align="left" valign="bottom" id="d79238e252">描述</th>
                              <th align="left" valign="bottom" id="d79238e254">更多信息</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d79238e258" headers="d79238e250 ">
                                 <p>配置应用程序普通用户和常用权限</p>
                              </td>
                              <td align="left" valign="top" headers="d79238e258 d79238e252 ">
                                 <p>应用程序通用用户和权限与普通用户类似，并且通常在CDB根目录中授予权限，但在应用程序容器中，普通用户和通常授予的权限仅存在于应用程序容器的容器中，包括应用程序根目录，属于应用程序的PDB到应用程序根目录，以及属于应用程序根目录的可选应用程序种子。</p>
                              </td>
                              <td align="left" valign="top" headers="d79238e258 d79238e254 ">
                                 <p><span class="q">“ <a href="overview-of-the-multitenant-architecture.html#GUID-3BB161DA-9CC0-4D61-A2C1-5D3662E0DECF" title="如果用户帐户拥有定义数据库的对象，则此用户帐户很常见。非Oracle提供的用户帐户是本地帐户或常用帐户。">CDB中的普通用户和本地用户概述</a> ”</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d79238e276" headers="d79238e250 ">
                                 <p>创建应用程序容器</p>
                              </td>
                              <td align="left" valign="top" headers="d79238e276 d79238e252 ">
                                 <p>当前容器是CDB根目录的公共用户可以通过在<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句中指定<code class="codeph">AS APPLICATION CONTAINER</code>子句来创建插入CDB根目录的应用程序容器。数据库文件必须是Oracle Managed Files。
                                 </p>
                              </td>
                              <td align="left" valign="top" headers="d79238e276 d79238e254 ">
                                 <p><span class="q">“ <a href="creating-removing-application-containers-seeds-with-sql-plus.html#GUID-3C6D4200-1FEC-4C0F-B335-EFDC655ADABC" title="您可以使用CREATE PLUGGABLE DATABASE语句在CDB中创建应用程序容器。">创建应用程序容器</a> ”</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d79238e300" headers="d79238e250 ">
                                 <p>创建应用程序PDB</p>
                              </td>
                              <td align="left" valign="top" headers="d79238e300 d79238e252 ">
                                 <p>当前容器是应用程序根目录的普通用户可以创建插入应用程序根目录的应用程序PDB。</p>
                              </td>
                              <td align="left" valign="top" headers="d79238e300 d79238e254 ">
                                 <p><span class="q">“ <a href="creating-pdbs.html#GUID-9A250D93-5B3B-4643-BE85-F32CC7B0E413" title="您可以使用各种技术创建PDB，应用程序容器和应用程序种子。">创建和删除PDB和应用程序容器</a> ”</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d79238e315" headers="d79238e250 ">
                                 <p>切换到容器</p>
                              </td>
                              <td align="left" valign="top" headers="d79238e315 d79238e252 ">
                                 <p>具有适当权限的普通用户可以在应用程序容器中的容器之间切换，包括应用程序根目录，属于应用程序根目录的应用程序PDB，以及属于应用程序根目录的可选应用程序种子。</p>
                              </td>
                              <td align="left" valign="top" headers="d79238e315 d79238e254 ">
                                 <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-A67C5365-99A1-4BE1-87CB-CA9A4DEBBF70" title="当您以普通用户身份连接到容器时，可以使用ALTER SESSION语句切换到其他容器和应用程序服务。">使用ALTER SESSION语句切换到容器</a> ”</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d79238e333" headers="d79238e250 ">
                                 <p>发出<code class="codeph">ALTER SYSTEM SET</code>语句</p>
                              </td>
                              <td align="left" valign="top" headers="d79238e333 d79238e252 ">
                                 <p><code class="codeph">ALTER SYSTEM SET</code>语句可以在应用程序容器中的一个或多个容器中动态设置初始化参数。
                                 </p>
                              </td>
                              <td align="left" valign="top" headers="d79238e333 d79238e254 ">
                                 <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-E47348D6-5350-4890-ACD6-7BA1C1DD4E95" title="要在系统级别修改CDB，请使用ALTER SYSTEM语句。">使用ALTER SYSTEM修改CDB</a> ”</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d79238e357" headers="d79238e250 ">
                                 <p>发布数据定义语言（DDL）语句</p>
                              </td>
                              <td align="left" valign="top" headers="d79238e357 d79238e252 ">
                                 <p>在应用程序容器中，某些DDL语句可以应用于应用程序容器中的所有容器或仅应用于当前容器。</p>
                              </td>
                              <td align="left" valign="top" headers="d79238e357 d79238e254 ">
                                 <p><span class="q">“ <a href="administering-application-containers-with-sql-plus.html#GUID-B855567C-DE8D-4015-B3E1-86906EE1D119" title="使用某些DDL语句修改应用程序根目录中的应用程序公共对象时，必须在ALTER PLUGGABLE DATABASE APPLICATION BEGIN和ALTER PLUGGABLE DATABASE APPLICATION END语句之间修改对象，并且应用程序PDB必须与应用程序同步才能应用更改。">使用DDL语句修改应用程序公共对象</a> ”</span></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>下表描述了与管理PDB的管理任务类似的应用程序容器的管理任务。</p>
                  <div class="tblformal" id="GUID-F98D88A2-E42A-49FF-B3F8-69D860323F79__GUID-46B03495-0BAD-4E18-BB0D-862997A15D9A">
                     <p class="titleintable">表17-2与PDB类似的应用程序容器管理任务</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="应用程序容器管理任务与PDB类似" border="1" summary="This table describes various administrative tasks for administering an application container and lists documentation for more information about the tasks." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" id="d79238e390">行政任务</th>
                              <th align="left" valign="bottom" id="d79238e392">描述</th>
                              <th align="left" valign="bottom" id="d79238e394">更多信息</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d79238e398" headers="d79238e390 ">
                                 <p>连接到应用程序根目录</p>
                              </td>
                              <td align="left" valign="top" headers="d79238e398 d79238e392 ">
                                 <p>应用程序根目录有自己的服务名称，用户可以像连接到PDB一样连接到应用程序根目录。类似地，每个应用程序PDB都有自己的服务名称，应用程序种子有自己的服务名称。</p>
                              </td>
                              <td align="left" valign="top" headers="d79238e398 d79238e394 ">
                                 <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-90C01374-20C9-41A2-AC6D-808F78AA51D3" title="通过发出CONNECT或ALTER SESSION命令，使用SQL * Plus访问CDB中的容器。">访问CDB中的容器</a> ”</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d79238e419" headers="d79238e390 ">
                                 <p>发出<code class="codeph">ALTER PLUGGABLE DATABASE</code>语句</p>
                              </td>
                              <td align="left" valign="top" headers="d79238e419 d79238e392 ">
                                 <p><code class="codeph">ALTER PLUGGABLE DATABASE</code>语句可以像修改PDB一样修改应用程序根，应用程序PDB和应用程序种子。例如，管理员可以使用<code class="codeph">ALTER PLUGGABLE DATABASE</code>语句打开或关闭应用程序根目录。
                                 </p>
                              </td>
                              <td align="left" valign="top" headers="d79238e419 d79238e394 ">
                                 <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-80265A74-2826-429E-90E6-5EB68EC7D10B" title="您可以使用ALTER DATABASE语句修改整个CDB或根。">连接到CDB根目录时修改容器</a> ”</span></p>
                                 <p><span class="q">“ <a href="administering-pdbs-with-sql-plus.html#GUID-0200CF6A-8822-4347-9410-4435FDB47745" title="您可以使用ALTER PLUGGABLE DATABASE语句修改PDB。">在数据库级修改PDB</a> ”</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d79238e456" headers="d79238e390 ">
                                 <p>发出SQL * Plus <code class="codeph">STARTUP</code>和<code class="codeph">SHUTDOWN</code>命令</p>
                              </td>
                              <td align="left" valign="top" headers="d79238e456 d79238e392 ">
                                 <p>SQL * Plus <code class="codeph">STARTUP</code>和<code class="codeph">SHUTDOWN</code>命令以与它们在PDB上运行相同的方式在应用程序根，应用程序PDB和应用程序种子上运行。</p>
                              </td>
                              <td align="left" valign="top" headers="d79238e456 d79238e394 ">
                                 <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-322C5C03-4C48-40CD-8230-0BA5F16BF96B" title="您可以使用ALTER PLUGGABLE DATABASE SQL语句或SQL * Plus STARTUP命令修改PDB的打开模式。">修改一个或多个PDB的开放模式</a> ”</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d79238e489" headers="d79238e390 ">
                                 <p>发出<code class="codeph">ALTER SYSTEM</code>语句</p>
                              </td>
                              <td align="left" valign="top" headers="d79238e489 d79238e392 ">
                                 <p><code class="codeph">ALTER SYSTEM</code>语句以与在PDB上运行相同的方式对应用程序根，应用程序PDB和应用程序种子进行操作。</p>
                              </td>
                              <td align="left" valign="top" headers="d79238e489 d79238e394 ">
                                 <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-E47348D6-5350-4890-ACD6-7BA1C1DD4E95" title="要在系统级别修改CDB，请使用ALTER SYSTEM语句。">使用ALTER SYSTEM修改CDB</a> ”</span></p>
                                 <p><span class="q">“ <a href="administering-pdbs-with-sql-plus.html#GUID-3AAA613B-C52C-4080-B0C3-7212859E3A2F" title="您可以使用ALTER SYSTEM语句来修改PDB。">在系统级修改PDB</a> ”</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d79238e523" headers="d79238e390 ">
                                 <p>管理表空间</p>
                              </td>
                              <td align="left" valign="top" headers="d79238e523 d79238e392 ">
                                 <p>管理员可以为应用程序根和应用程序PDB创建，修改和删除表空间。每个容器都有自己的表空间。</p>
                              </td>
                              <td align="left" valign="top" headers="d79238e523 d79238e394 ">
                                 <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-B34BC55B-C734-4799-A54A-0BB04073D9D0" title="表空间是消耗存储空间的数据库对象（如表和索引）的逻辑存储容器。">关于管理CDB中的表空间</a> ”</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d79238e538" headers="d79238e390 ">
                                 <p>管理数据文件和临时文件</p>
                              </td>
                              <td align="left" valign="top" headers="d79238e538 d79238e392 ">
                                 <p>管理员可以为应用程序根和应用程序PDB创建，修改和删除数据文件和临时文件。每个容器都有自己的文件。</p>
                              </td>
                              <td align="left" valign="top" headers="d79238e538 d79238e394 ">
                                 <p>有关管理数据文件和临时文件的信息，请参见<a href="../admin/managing-data-files-and-temp-files.html#ADMIN-GUID-501A8889-3C18-4F99-B0B7-9095E981B970" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d79238e553" headers="d79238e390 ">
                                 <p>管理模式对象</p>
                              </td>
                              <td align="left" valign="top" headers="d79238e553 d79238e392 ">
                                 <p>您可以使用与PDB中相同的方式在应用程序根目录和每个应用程序PDB中创建，修改和删除架构对象。您还可以创建触发特定应用程序根或应用程序PDB的触发器。</p>
                                 <p>但是，应用程序容器支持应用程序公共对象，这些对象可以在应用程序容器中的容器之间共享。无法在PDB中创建应用程序公共对象。</p>
                              </td>
                              <td align="left" valign="top" headers="d79238e553 d79238e394 ">
                                 <p><span class="q">“ <a href="administering-application-containers-with-sql-plus.html#GUID-DC57BCFA-8DC5-46B6-809F-E3570F44D801" title="应用程序公共对象是应用程序容器中的用户创建的数据库对象。应用程序公共对象在应用程序根目录中创建。">管理应用程序通用对象</a> ”</span></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-1AFD0268-6A2B-4F84-BB4D-4D36976DE53B" title="您可以管理应用程序容器，包括应用程序根和应用程序PDB。您还可以管理应用程序容器中安装的应用程序。">管理应用程序容器</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-8BBB5E02-F0EA-4499-B23F-E5135DDA6B6D" name="GUID-8BBB5E02-F0EA-4499-B23F-E5135DDA6B6D"></a><h3 id="MULTI-GUID-8BBB5E02-F0EA-4499-B23F-E5135DDA6B6D" class="sect3"><span class="enumeration_section">17.2</span>关于修改应用程序根目录</h3>
               <div>
                  <p><code class="codeph">ALTER DATABASE</code>语句可以修改应用程序根目录。<code class="codeph">ALTER PLUGGABLE DATABASE</code>语句可以修改应用程序PDB的打开模式。
                  </p>
                  <p>下表列出了在应用程序根目录中发出的<code class="codeph">ALTER DATABASE</code>和<code class="codeph">ALTER PLUGGABLE DATABASE</code>语句中的子句修改了哪些容器。该表还列出了应用程序根目录中不允许的语句。
                  </p>
                  <div class="infoboxnote" id="GUID-8BBB5E02-F0EA-4499-B23F-E5135DDA6B6D__GUID-2A59ADBD-E4E3-4C46-B93B-8658B2099008">
                     <p class="notep1">注意：</p>当前容器是应用程序根目录时发出的语句永远不会影响不属于当前应用程序根目录的CDB根目录或PDB。
                  </div>
                  <div class="tblformalwide" id="GUID-8BBB5E02-F0EA-4499-B23F-E5135DDA6B6D__STATEMENTSTHATMODIFYCONTAINERSINACD-66247266">
                     <p class="titleintable">表17-3修改应用程序根中容器的语句</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="修改应用程序根中容器的语句" width="100%" border="1" summary="This table describes ALTER DATABASE statements that modify an application root, ALTER PLUGGABLE DATABASE statements, and ALTER DATABASE statements that are not allowed in an application root." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="34%" id="d79238e709">仅修改应用程序根</th>
                              <th align="left" valign="bottom" width="33%" id="d79238e712">修改一个或多个应用程序PDB</th>
                              <th align="left" valign="bottom" width="33%" id="d79238e715">无法在应用程序根目录中发布</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d79238e720" headers="d79238e709 ">
                                 <p>当作为当前容器为应用程序根目录的应用程序公共用户连接时，带有以下子句的<code class="codeph">ALTER DATABASE</code>语句仅修改应用程序根目录：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><a href="../sqlrf/ALTER-DATABASE.html#SQLRF52396" target="_blank"><span class="italic">database_file_clauses</span></a></p>
                                    </li>
                                    <li>
                                       <p><a href="../sqlrf/ALTER-DATABASE.html#SQLRF52540" target="_blank"><code class="codeph">DEFAULT EDITION</code></a>条款</p>
                                    </li>
                                    <li>
                                       <p><a href="../sqlrf/ALTER-DATABASE.html#SQLRF52543" target="_blank"><code class="codeph">DEFAULT TABLESPACE</code></a>子句</p>
                                    </li>
                                    <li>
                                       <p><a href="../sqlrf/ALTER-DATABASE.html#SQLRF52544" target="_blank"><code class="codeph">DEFAULT TEMPORARY TABLESPACE</code></a>子句</p>
                                    </li>
                                 </ul>
                                 <p>带有以下子句的<code class="codeph">ALTER DATABASE</code>语句修改应用程序根目录并为应用程序PDB设置默认值：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><a href="../sqlrf/ALTER-DATABASE.html#SQLRF52421" target="_blank"><span class="italic">flashback_mode_clause</span></a></p>
                                    </li>
                                    <li>
                                       <p><a href="../sqlrf/ALTER-DATABASE.html#SQLRF52542" target="_blank"><code class="codeph">SET DEFAULT {BIGFILE | SMALLFILE} TABLESPACE</code></a>子句</p>
                                    </li>
                                    <li>
                                       <p><a href="../sqlrf/ALTER-DATABASE.html#SQLRF52421" target="_blank"><span class="italic">set_time_zone_clause</span></a></p>
                                    </li>
                                 </ul>
                                 <p>您可以使用这些子句为特定应用程序PDB设置非默认值。</p>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d79238e720 d79238e712 ">
                                 <p>当作为当前容器为应用程序根的应用程序公共用户连接时，具有以下子句的<code class="codeph">ALTER PLUGGABLE DATABASE</code>语句可以修改一个或多个应用程序PDB的打开模式：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><a href="../sqlrf/CREATE-PLUGGABLE-DATABASE.html#SQLRF55686" target="_blank"><span class="italic">pdb_change_state</span></a></p>
                                    </li>
                                 </ul>
                                 <p>当前容器是应用程序PDB时，带有此子句的<code class="codeph">ALTER PLUGGABLE DATABASE</code>语句可以修改当前应用程序PDB的打开模式。</p>
                                 <p>当作为当前容器为应用程序根的应用程序公共用户连接时，具有以下子句的<code class="codeph">ALTER PLUGGABLE DATABASE</code>语句可以在CDB重新启动时保留或放弃应用程序PDB的打开模式：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><a href="../sqlrf/CREATE-PLUGGABLE-DATABASE.html#SQLRF55686" target="_blank"><span class="italic">pdb_save_or_discard_state</span></a></p>
                                    </li>
                                 </ul>
                              </td>
                              <td align="left" valign="top" width="33%" headers="d79238e720 d79238e715 ">
                                 <p>当作为当前容器为应用程序根目录的应用程序公共用户连接时，不允许使用带有以下子句的<code class="codeph">ALTER DATABASE</code>语句：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><a href="../sqlrf/ALTER-DATABASE.html#SQLRF52389" target="_blank"><span class="italic">startup_clauses</span></a></p>
                                    </li>
                                    <li>
                                       <p><a href="../sqlrf/ALTER-DATABASE.html#SQLRF52390" target="_blank"><span class="italic">recovery_clauses</span></a></p>
                                    </li>
                                    <li>
                                       <p><a href="../sqlrf/ALTER-DATABASE.html#SQLRF52402" target="_blank"><span class="italic">logfile_clauses</span></a></p>
                                    </li>
                                    <li>
                                       <p><a href="../sqlrf/ALTER-DATABASE.html#SQLRF52410" target="_blank"><span class="italic">controlfile_clauses</span></a></p>
                                    </li>
                                    <li>
                                       <p><a href="../sqlrf/ALTER-DATABASE.html#SQLRF52412" target="_blank"><span class="italic">standby_database_clauses</span></a></p>
                                    </li>
                                    <li>
                                       <p><a href="../sqlrf/ALTER-DATABASE.html#SQLRF52423" target="_blank"><span class="italic">instance_clauses</span></a></p>
                                    </li>
                                    <li>
                                       <p><a href="../sqlrf/ALTER-DATABASE.html#SQLRF52424" target="_blank"><span class="italic">security_clause</span></a></p>
                                    </li>
                                    <li>
                                       <p><a href="../sqlrf/ALTER-DATABASE.html#SQLRF52547" target="_blank"><code class="codeph">RENAME GLOBAL_NAME</code></a>条款</p>
                                    </li>
                                    <li>
                                       <p><a href="../sqlrf/ALTER-DATABASE.html#SQLRF52549" target="_blank"><code class="codeph">ENABLE BLOCK CHANGE TRACKING</code></a>子句</p>
                                    </li>
                                    <li>
                                       <p><a href="../sqlrf/ALTER-DATABASE.html#SQLRF52550" target="_blank"><code class="codeph">DISABLE BLOCK CHANGE TRACKING</code></a>条款</p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-8BBB5E02-F0EA-4499-B23F-E5135DDA6B6D__GUID-5AB716AC-DA19-4068-9F00-EB5F8D5ABFD4">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-E1BBCE0F-76CA-49F3-9A6B-AC6B13AB9AC5" title="CDB中每个容器中的数据字典是独立的，当前容器是其数据字典用于名称解析和权限授权的容器。">关于当前的容器</a> ”</span></p>
                        </li>
                        <li>
                           <p> <span class="q">“ <a href="administering-pdbs-with-sql-plus.html#GUID-0200CF6A-8822-4347-9410-4435FDB47745" title="您可以使用ALTER PLUGGABLE DATABASE语句修改PDB。">在数据库级修改PDB</a> ”</span></p>
                        </li>
                        <li>
                           <p><a href="../sqlrf/ALTER-DATABASE.html#SQLRF00802" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-1AFD0268-6A2B-4F84-BB4D-4D36976DE53B" title="您可以管理应用程序容器，包括应用程序根和应用程序PDB。您还可以管理应用程序容器中安装的应用程序。">管理应用程序容器</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-EB81A80C-FA22-4D9B-A69D-7E2C8FB5E854" name="GUID-EB81A80C-FA22-4D9B-A69D-7E2C8FB5E854"></a><h3 id="MULTI-GUID-EB81A80C-FA22-4D9B-A69D-7E2C8FB5E854" class="sect3"><span class="enumeration_section">17.3</span>管理应用程序容器中的应用程序</h3>
               <div>
                  <p>您可以在应用程序容器中安装，升级或修补应用程序。</p>
                  <p>您还可以从应用程序容器中卸载应用程序。您在应用程序根目录中执行这些操作。当应用程序PDB与应用程序根目录中的应用程序同步时，应用程序容器将应用程序更改传播到应用程序PDB。</p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-9FE49E60-32D9-40BB-BD56-9FC53ED696AC">关于应用管理</a><br>在应用程序容器中， <strong class="term">应用程序</strong>是一组命名的，版本化的应用程序元数据和公共数据集。应用程序存储在应用程序根目录中。
                     </li>
                     <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-BA920103-E69C-4B77-853E-BF1DC7709902">在应用程序容器中安装应用程序</a><br>您可以在应用程序容器中安装应用程序。
                     </li>
                     <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-07C8EC31-0A4B-4F63-A40A-E87031858545">升级应用程序容器中的应用程序</a><br>应用程序的主要更改构成应用程序升级。您可以在应用程序容器中升级应用程序。
                     </li>
                     <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-05F9AE85-20F2-451F-92DF-6EE1BB37C397">在应用程序容器中修补应用程序</a><br>对应用程序的微小更改构成应用程序补丁
                     </li>
                     <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-D2F30723-9E70-469C-8048-CB06DE00173E">将现有应用程序迁移到应用程序容器</a><br>您可以将PDB中安装的应用程序迁移到应用程序容器。
                     </li>
                     <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-27A78D0C-B90B-4BB9-A8D2-787353A667B1">在应用程序PDB中同步应用程序</a><br>同步应用程序会将应用程序PDB中的应用程序更新为应用程序根目录中的最新版本和修补程序。
                     </li>
                     <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-7D442C17-28E6-4337-8EF5-6930FBC0BCC8">将应用程序根副本与代理PDB同步</a><br>当不同CDB中的应用程序容器具有相同的应用程序时，可以通过创建主应用程序根，副本应用程序根和代理PDB来保持其应用程序根同步。</li>
                     <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-00BF8D6A-5FBB-4798-98CE-0EB27FD8126C">设置应用程序的兼容版本</a><br>应用程序的兼容版本是属于应用程序容器的应用程序PDB可能的最早版本的应用程序。
                     </li>
                     <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-68C91677-24C7-4983-80F0-A94F0B6C2898">在应用程序安装，升级和修补程序操作期间执行批量插入</a><br>SQL * Loader是在应用程序安装，升级和修补操作期间批量插入表的唯一受支持的实用程序。在应用程序安装，升级和修补操作期间，批量插入仅支持常规路径负载。
                     </li>
                     <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-68C8CA30-B1F7-4DB1-BC1C-0F60A521D887">从应用程序容器中卸载应用程序</a><br>您可以在应用程序容器中卸载应用程序。
                     </li>
                  </ul>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="overview-of-the-multitenant-architecture.html#GUID-B964031E-8ACE-4603-8F1E-DD173BE5BA01" title="在应用程序容器中，应用程序是存储在应用程序根目录中的命名的，版本化的公共数据和元数据集。">应用程序容器中的应用程序概述</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-1AFD0268-6A2B-4F84-BB4D-4D36976DE53B" title="您可以管理应用程序容器，包括应用程序根和应用程序PDB。您还可以管理应用程序容器中安装的应用程序。">管理应用程序容器</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-9FE49E60-32D9-40BB-BD56-9FC53ED696AC" name="GUID-9FE49E60-32D9-40BB-BD56-9FC53ED696AC"></a><h4 id="MULTI-GUID-9FE49E60-32D9-40BB-BD56-9FC53ED696AC" class="sect4"><span class="enumeration_section">17.3.1</span>关于应用程序管理</h4>
                  <div>
                     <p>在应用程序容器中， <strong class="term">应用程序</strong>是一组命名的，版本化的应用程序元数据和公共数据集。应用程序存储在应用程序根目录中。
                     </p>
                     <p>在此上下文中，术语“应用程序”表示“应用程序后端”。应用程序通用对象包括用户帐户，表，PL / SQL包等。您可以与属于应用程序根目录的应用程序PDB共享应用程序。执行应用程序更改时，应用程序PDB可以与应用程序根目录中的应用程序同步。</p>
                     <p>本节包含以下主题：</p>
                     <p>一世</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-1EF3D46C-C216-40E9-A09B-AFDB17584A62">应用程序维护的基本步骤</a><br>您可以在应用程序根目录中安装，升级和修补应用程序。
                        </li>
                        <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-C6B17992-3874-46FD-9BFC-A7CF10F06780">应用版本</a><br>应用程序容器还管理应用程序的版本和应用程序的修补程序。
                        </li>
                        <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-2CE112B0-0F67-41DE-9072-AA78D043EC94">应用程序模块名称</a><br>应用程序模块名称由<code class="codeph">DBMS_APPLICATION_INFO.SET_MODULE</code>过程或等效的OCI属性设置设置。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-EB81A80C-FA22-4D9B-A69D-7E2C8FB5E854" title="您可以在应用程序容器中安装，升级或修补应用程序。">管理应用程序容器中的应用程序</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-1EF3D46C-C216-40E9-A09B-AFDB17584A62" name="GUID-1EF3D46C-C216-40E9-A09B-AFDB17584A62"></a><h5 id="MULTI-GUID-1EF3D46C-C216-40E9-A09B-AFDB17584A62" class="sect5"><span class="enumeration_section">17.3.1.1</span>应用程序维护的基本步骤</h5>
                     <div>
                        <p>您可以在应用程序根目录中安装，升级和修补应用程序。</p>
                        <p>你必须发出一个<code class="codeph">ALTER PLUGGABLE DATABASE ...BEGIN</code>语句启动操作和<code class="codeph">ALTER PLUGGABLE DATABASE ...END</code>语句结束操作。您可以在同一用户会话或不同的用户会话中发出这些语句。
                        </p>
                        <p>以下是在应用程序容器中创建和维护应用程序的典型过程：</p>
                        <ol id="GUID-1EF3D46C-C216-40E9-A09B-AFDB17584A62__OL_AZ1_5PM_DHB">
                           <li>
                              <p>创建应用程序容器。</p>
                           </li>
                           <li>
                              <p id="GUID-1EF3D46C-C216-40E9-A09B-AFDB17584A62__P_VTV_BQM_DHB">使用<code class="codeph">ALTER PLUGGABLE DATABASE ...在应用程序根目录中安装应用程序<code class="codeph">ALTER PLUGGABLE DATABASE ...BEGIN INSTALL</code> 。</p>
                              <p>此步骤包括创建应用程序数据模型以及配置应用程序公共用户和应用程序公共对象。</p>
                              <div class="infoboxnote" id="GUID-1EF3D46C-C216-40E9-A09B-AFDB17584A62__GUID-04203E0B-7DDA-4A8D-89BC-BE0C662E2D50">
                                 <p class="notep1">注意：</p>
                                 <p>SQL * Loader是在应用程序安装，升级和修补操作期间批量插入表的唯一受支持的实用程序。</p>
                              </div>
                           </li>
                           <li>
                              <p>在应用程序根目录中创建应用程序PDB。</p>
                           </li>
                           <li>
                              <p>同步应用程序根目录应安装应用程序的每个应用程序PDB。声明是<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION ...SYNC</code> 。</p>
                           </li>
                           <li>
                              <p>加载每个应用程序PDB的数据。</p>
                           </li>
                           <li>
                              <p>维护申请。使用<code class="codeph">ALTER PLUGGABLE DATABASE ...升级<code class="codeph">ALTER PLUGGABLE DATABASE ...BEGIN UPGRADE</code> ，并使用<code class="codeph">ALTER PLUGGABLE DATABASE ...修补<code class="codeph">ALTER PLUGGABLE DATABASE ...BEGIN PATCH</code> 。</p>
                           </li>
                           <li>
                              <p>同步应用升级和修补程序更改的应用程序PDB。</p>
                           </li>
                           <li>
                              <p>必要时添加新的应用程序PDB。</p>
                           </li>
                           <li>
                              <p>如有必要，使用<code class="codeph">ALTER PLUGGABLE DATABASE ...卸载应用程序<code class="codeph">ALTER PLUGGABLE DATABASE ...BEGIN UNINSTALL</code> 。</p>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-1EF3D46C-C216-40E9-A09B-AFDB17584A62__GUID-5AA822DF-A095-4919-AAD2-320E3E06C0A3">
                           <p class="notep1">也可以看看：</p>
                           <ul id="GUID-1EF3D46C-C216-40E9-A09B-AFDB17584A62__UL_MNV_WWM_DHB" style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="creating-removing-application-containers-seeds-with-sql-plus.html#GUID-3C6D4200-1FEC-4C0F-B335-EFDC655ADABC" title="您可以使用CREATE PLUGGABLE DATABASE语句在CDB中创建应用程序容器。">创建应用程序容器</a> ”</span></p>
                              </li>
                              <li>
                                 <p><a href="../dbseg/configuring-audit-policies.html#DBSEG-GUID-F4394DDB-CD5F-4B54-B2AC-3649DF03541F" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a> ，了解如何审核应用程序维护操作</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-9FE49E60-32D9-40BB-BD56-9FC53ED696AC" title="在应用程序容器中，应用程序是一组命名的，版本化的应用程序元数据和公共数据集。应用程序存储在应用程序根目录中。">关于应用程序管理</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-C6B17992-3874-46FD-9BFC-A7CF10F06780" name="GUID-C6B17992-3874-46FD-9BFC-A7CF10F06780"></a><h5 id="MULTI-GUID-C6B17992-3874-46FD-9BFC-A7CF10F06780" class="sect5"><span class="enumeration_section">17.3.1.2</span>应用程序版本</h5>
                     <div>
                        <p>应用程序容器还管理应用程序的版本和应用程序的修补程序。</p>
                        <p>应用程序容器管理版本如下：</p>
                        <ul id="GUID-C6B17992-3874-46FD-9BFC-A7CF10F06780__UL_ZYG_RRM_DHB" style="list-style-type:disc">
                           <li>
                              <p>安装应用程序时，必须指定应用程序版本号。</p>
                           </li>
                           <li>
                              <p>升级应用程序时，必须指定旧的应用程序版本号和新的应用程序版本号。</p>
                           </li>
                           <li>
                              <p>修补应用程序时，必须指定修补程序的最小应用程序版本号和修补程序编号。</p>
                           </li>
                        </ul>
                        <p>随着应用程序的发展，应用程序容器会维护您应用的所有版本和修补程序更改。</p>
                        <p>您还可以配置应用程序容器，以便不同的应用程序PDB使用不同的应用程序版本。例如，如果您向各个客户提供应用程序，并且每个客户都有自己的应用程序PDB，则某些客户可能需要等待更长时间才能升级应用程序。在这种情况下，某些应用程序PDB可以使用最新版本的应用程序，而其他应用程序PDB可以使用较旧版本的应用程序。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-9FE49E60-32D9-40BB-BD56-9FC53ED696AC" title="在应用程序容器中，应用程序是一组命名的，版本化的应用程序元数据和公共数据集。应用程序存储在应用程序根目录中。">关于应用程序管理</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-2CE112B0-0F67-41DE-9072-AA78D043EC94" name="GUID-2CE112B0-0F67-41DE-9072-AA78D043EC94"></a><h5 id="MULTI-GUID-2CE112B0-0F67-41DE-9072-AA78D043EC94" class="sect5"><span class="enumeration_section">17.3.1.3</span>应用程序模块名称</h5>
                     <div>
                        <p>应用程序模块名称由<code class="codeph">DBMS_APPLICATION_INFO.SET_MODULE</code>过程或等效的OCI属性设置设置。
                        </p>
                        <p>由于数据库中可能发生的其他活动，因此在应用程序维护期间必须使用模块名称。例如，后台进程发出的语句不应该在应用程序捕获表中捕获。此外，其他用户可能会执行与应用程序无关的语句。模块名称检查区分应捕获的内容与不应捕获的内容。仅考虑模块名称与发布<code class="codeph">APPLICATION BEGIN</code>会话的模块名称匹配的会话进行捕获。
                        </p>
                        <p>某些子句（例如<code class="codeph">SHARING</code>子句）仅在<code class="codeph">ALTER PLUGGABLE DATABASE ...之间发布时才有效<code class="codeph">ALTER PLUGGABLE DATABASE ...BEGIN</code>声明和<code class="codeph">ALTER PLUGGABLE DATABASE ...END</code>声明。对于这些子句，如果会话的模块名称不匹配，则此会话不包含在<code class="codeph">BEGIN</code>和<code class="codeph">END</code>语句之间，导致包含该子句的语句因<code class="codeph">ORA-65021</code>或其他错误而失败。
                        </p>
                        <p>模块名称不匹配的最常见原因是默认模块名称。例如，SQL * Plus在与数据库建立连接时设置默认模块名称。作为<code class="codeph">SYSDBA</code>用户的连接会生成一个默认模块名称（例如， <code class="codeph">sqlplus@host1 (TNS V1-V3)</code> ），而作为非<code class="codeph">SYSDBA</code>用户的连接会生成不同的默认模块名称（例如， <code class="codeph">SQL*Plus</code> ）。当<code class="codeph">SYSDBA</code>和非<code class="codeph">SYSDBA</code>用户都执行维护时，必须将每个会话中的模块名称显式设置为相同的值，而不是依赖SQL * Plus中的默认设置。
                        </p>
                        <div class="example" id="GUID-2CE112B0-0F67-41DE-9072-AA78D043EC94__GUID-1196CF28-6665-4E09-AD79-31C0FBA56868">
                           <p class="titleinexample">示例17-1检查应用程序模块名称</p>
                           <p>此示例显示默认模块名称如何更改，具体取决于连接的用户是否具有<code class="codeph">SYSDBA</code>权限。
                           </p><pre class="pre codeblock"><code>SQL&gt; CONNECT / AS SYSDBA已连接。SQL&gt;从v $ session中选择模块，其中audsid = SYS_CONTEXT（'USERENV'，'sessionid'）; MODULE ------------------------------------------------- --------------- sqlplus @ host1（TNS V1-V3）SQL&gt; CONNECT dba1密码：*************已连接。SQL&gt;从v $ session中选择模块，其中audsid = SYS_CONTEXT（'USERENV'，'sessionid'）; MODULE ------------------------------------------------- --------------- SQL * Plus</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-2CE112B0-0F67-41DE-9072-AA78D043EC94__GUID-5AA822DF-A095-4919-AAD2-320E3E06C0A3">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../arpls/DBMS_APPLICATION_INFO.html#ARPLS65239" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a> ，了解如何设置应用程序模块名称</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-9FE49E60-32D9-40BB-BD56-9FC53ED696AC" title="在应用程序容器中，应用程序是一组命名的，版本化的应用程序元数据和公共数据集。应用程序存储在应用程序根目录中。">关于应用程序管理</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-BA920103-E69C-4B77-853E-BF1DC7709902" name="GUID-BA920103-E69C-4B77-853E-BF1DC7709902"></a><h4 id="MULTI-GUID-BA920103-E69C-4B77-853E-BF1DC7709902" class="sect4"><span class="enumeration_section">17.3.2</span>在应用程序容器中安装应用程序</h4>
                  <div>
                     <p>您可以在应用程序容器中安装应用程序。</p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-2E96A9B0-F543-46D7-930F-DED81A141CEA">关于在应用程序容器中安装应用程序</a><br>您发出<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句以在应用程序根目录中安装应用程序。
                        </li>
                        <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-D06AD868-A2BA-449D-9C73-884F0378D175">使用自动传播在应用程序容器中安装应用程序</a><br>在自动传播中，应用程序安装在与应用程序根目录中的应用程序同步的应用程序PDB中。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-EB81A80C-FA22-4D9B-A69D-7E2C8FB5E854" title="您可以在应用程序容器中安装，升级或修补应用程序。">管理应用程序容器中的应用程序</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-2E96A9B0-F543-46D7-930F-DED81A141CEA" name="GUID-2E96A9B0-F543-46D7-930F-DED81A141CEA"></a><h5 id="MULTI-GUID-2E96A9B0-F543-46D7-930F-DED81A141CEA" class="sect5"><span class="enumeration_section">17.3.2.1</span>关于在应用程序容器中安装应用程序</h5>
                     <div>
                        <p>您发出<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句以在应用程序根目录中安装应用程序。
                        </p>
                        <p>您只能在应用程序根目录中安装该应用程序。与应用程序同步的应用程序PDB会自动安装应用程序。使用自动方法，您可以使用以下一种或多种技术执行安装：脚本，SQL语句和图形用户界面工具。</p>
                        <p>使用<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN INSTALL</code>语句开始安装，并在安装结束时使用<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END INSTALL</code>语句。每个安装都必须与应用程序名称和版本号相关联，这些名称和版本号在<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句中指定。
                        </p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="administering-a-cdb-with-sql-plus.html#GUID-E307DC5F-52A9-4B1B-8999-3E60867009D4" title="您可以使用catcon.pl脚本在CDB中运行Oracle提供的SQL或SQL脚本。您可以针对任何指定的容器运行脚本。">在CDB中运行Oracle提供的SQL脚本</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-BA920103-E69C-4B77-853E-BF1DC7709902" title="您可以在应用程序容器中安装应用程序。">在应用程序容器中安装应用程序</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-D06AD868-A2BA-449D-9C73-884F0378D175" name="GUID-D06AD868-A2BA-449D-9C73-884F0378D175"></a><h5 id="MULTI-GUID-D06AD868-A2BA-449D-9C73-884F0378D175" class="sect5"><span class="enumeration_section">17.3.2.2</span>使用自动传播在应用程序容器中安装应用程序</h5>
                     <div>
                        <p>在自动传播中，应用程序安装在与应用程序根目录中的应用程序同步的应用程序PDB中。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-D06AD868-A2BA-449D-9C73-884F0378D175__GUID-4DB4663A-572B-41A4-ABD7-F1A474850BBB">先决条件</p>
                           <p>您必须满足以下先决条件：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>当前用户必须具有<code class="codeph">ALTER PLUGGABLE DATABASE</code>系统特权，并且必须在应用程序根目录中通常授予该特权。
                                 </p>
                              </li>
                              <li>
                                 <p>应用程序root必须处于打开的读/写状态。</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-D06AD868-A2BA-449D-9C73-884F0378D175__GUID-BAF77A98-D6D7-4E65-931A-9C7ADF1DD24C">使用自动传播安装应用程序：</p>
                           <ol>
                              <li>
                                 <p id="GUID-D06AD868-A2BA-449D-9C73-884F0378D175__d5e35">在SQL * Plus或SQL Developer中，确保当前容器是PDB。</p>
                              </li>
                              <li>
                                 <p>以下列形式运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN INSTALL</code>语句：</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE应用<span class="italic">APPLICATION_NAME</span> BEGIN INSTALL <span class="italic">'application_version_number';</span></code></pre><p>例如，如果<span class="italic">application_name</span>是<code class="codeph">salesapp</code>且<span class="italic">application_version_number</span>是4.2，则运行以下语句：</p><pre class="pre codeblock"><code>ALTER PLOGGABLE DATABASE APPLICATION salesapp BEGIN INSTALL'4.2';</code></pre></li>
                              <li>
                                 <p>使用脚本，SQL语句或图形用户界面工具安装应用程序。</p>
                              </li>
                              <li>
                                 <p>以下面的形式运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END INSTALL</code>语句：</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE应用<span class="italic">APPLICATION_NAME</span> END INSTALL <span class="italic">'application_version_number';</span></code></pre><p>例如，如果<span class="italic">application_name</span>是<code class="codeph">salesapp</code>且<span class="italic">application_version_number</span>是4.2，则运行以下语句：</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE APPLICATION salesapp END INSTALL'4.2';</code></pre><div class="infoboxnote" id="GUID-D06AD868-A2BA-449D-9C73-884F0378D175__ENSURETHATTHEAPPLICATION_NAMEANDAPP-04439E98">
                                    <p class="notep1">注意：</p>确保<span class="italic">application_name</span>和<span class="italic">application_version_number</span>在<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN INSTALL</code>语句和<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END INSTALL</code>语句中<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END INSTALL</code> 。
                                 </div>
                              </li>
                              <li>
                                 <p>通过发出带有<code class="codeph">SYNC</code>子句的<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句来<code class="codeph">SYNC</code>必须安装应用程序的所有应用程序PDB。
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="administering-a-cdb-with-sql-plus.html#GUID-90C01374-20C9-41A2-AC6D-808F78AA51D3" title="通过发出CONNECT或ALTER SESSION命令，使用SQL * Plus访问CDB中的容器。">访问CDB中的容器</a></li>
                              <li><a href="administering-application-containers-with-sql-plus.html#GUID-27A78D0C-B90B-4BB9-A8D2-787353A667B1" title="同步应用程序会将应用程序PDB中的应用程序更新为应用程序根目录中的最新版本和修补程序。">在应用程序PDB中同步应用程序</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-BA920103-E69C-4B77-853E-BF1DC7709902" title="您可以在应用程序容器中安装应用程序。">在应用程序容器中安装应用程序</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-07C8EC31-0A4B-4F63-A40A-E87031858545" name="GUID-07C8EC31-0A4B-4F63-A40A-E87031858545"></a><h4 id="MULTI-GUID-07C8EC31-0A4B-4F63-A40A-E87031858545" class="sect4"><span class="enumeration_section">17.3.3</span>升级应用程序容器中的应用程序</h4>
                  <div>
                     <p>应用程序的主要更改构成应用程序升级。您可以在应用程序容器中升级应用程序。</p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-46D899D7-C52C-4C50-B1B9-BF851D907DE3">关于在应用程序容器中升级应用程序</a><br>您发出<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句以升级应用程序根目录中的应用程序。
                        </li>
                        <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-E733EDB9-98EF-4CAD-BD83-605A04BEC5E5">升级应用程序容器中的应用程序</a><br>升级后，升级导致的应用程序更改将传播到与应用程序根同步的应用程序PDB。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-EB81A80C-FA22-4D9B-A69D-7E2C8FB5E854" title="您可以在应用程序容器中安装，升级或修补应用程序。">管理应用程序容器中的应用程序</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-46D899D7-C52C-4C50-B1B9-BF851D907DE3" name="GUID-46D899D7-C52C-4C50-B1B9-BF851D907DE3"></a><h5 id="MULTI-GUID-46D899D7-C52C-4C50-B1B9-BF851D907DE3" class="sect5"><span class="enumeration_section">17.3.3.1</span>关于升级应用程序容器中的应用程序</h5>
                     <div>
                        <p>您发出<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句以升级应用程序根目录中的应用程序。
                        </p>
                        <p>您只能在应用程序根目录中升级应用程序，并且应用程序PDB在与应用程序同步时应用升级中的更改。应用程序PDB通过运行带有<code class="codeph">SYNC</code>子句的<code class="codeph">ALTER PLUGGABLE DATABASE</code>语句与应用程序<code class="codeph">SYNC</code> 。您可以使用以下一种或多种技术进行升级：脚本，SQL语句和图形用户界面工具。
                        </p>
                        <p>使用<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN UPGRADE</code>语句指示升级的开始，并使用<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END UPGRADE</code>语句<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END UPGRADE</code>升级<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END UPGRADE</code> 。每次升级都必须与<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句中指定的应用程序名称，起始版本号和结束版本号相关联。
                        </p>
                        <p>升级应用程序时，Oracle数据库会自动克隆应用程序根目录。在升级期间，应用程序PDB指向克隆。应用程序在升级期间继续运行。应用程序PDB可以对元数据链接和扩展数据链接表和视图执行DML。应用程序PDB可以查询元数据链接对象，扩展数据链接对象和数据链接对象。</p>
                        <p>升级后，应用程序根克隆仍然存在并继续支持仍在克隆中使用预升级版本的应用程序的任何应用程序PDB。升级的应用程序PDB指向已升级的应用程序根目录。不升级的应用程序PDB可能会继续使用克隆，插入应用程序根目录的应用程序PDB也可能使用与克隆相同的应用程序版本。</p>
                        <div class="infoboxnote" id="GUID-46D899D7-C52C-4C50-B1B9-BF851D907DE3__GUID-AE30760F-BA9F-4CCE-BC47-845B11E278AF">
                           <p class="notep1">注意：</p>
                           <p>与应用程序升级不同，修补程序不会创建应用程序根克隆。如果修补程序后应用程序PDB未同步，则查询将定向到已修补的应用程序根目录。</p>
                        </div>
                        <p>下图说明了升级过程。</p>
                        <div class="figure" id="GUID-46D899D7-C52C-4C50-B1B9-BF851D907DE3__GUID-1C41F072-E52C-4B33-9D1C-466E57A6FC30">
                           <p class="titleinfigure">图17-1在应用程序容器中升级应用程序</p><img src="img/admin122.png" alt="下面是图17-1的描述" title="下面是图17-1的描述" longdesc="img_text/admin122.html"><br><a href="img_text/admin122.html">“图17-1升级应用程序容器中的应用程序”的说明</a></div>
                        <!-- class="figure" -->
                        <div class="infoboxnote" id="GUID-46D899D7-C52C-4C50-B1B9-BF851D907DE3__GUID-056316CA-49D4-41DF-88EA-CF6E586AB5F5">
                           <p class="notep1">注意：</p>
                           <p>当应用程序根处于任何打开模式时，应用程序根克隆处于只读模式。关闭应用程序根目录后，应用程序根克隆也将关闭。</p>
                        </div>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="administering-a-cdb-with-sql-plus.html#GUID-E307DC5F-52A9-4B1B-8999-3E60867009D4" title="您可以使用catcon.pl脚本在CDB中运行Oracle提供的SQL或SQL脚本。您可以针对任何指定的容器运行脚本。">在CDB中运行Oracle提供的SQL脚本</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-07C8EC31-0A4B-4F63-A40A-E87031858545" title="应用程序的主要更改构成应用程序升级。您可以在应用程序容器中升级应用程序。">在应用程序容器中升级应用程序</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-E733EDB9-98EF-4CAD-BD83-605A04BEC5E5" name="GUID-E733EDB9-98EF-4CAD-BD83-605A04BEC5E5"></a><h5 id="MULTI-GUID-E733EDB9-98EF-4CAD-BD83-605A04BEC5E5" class="sect5"><span class="enumeration_section">17.3.3.2</span>升级应用程序容器中的应用程序</h5>
                     <div>
                        <p>升级后，升级导致的应用程序更改将传播到与应用程序根同步的应用程序PDB。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-E733EDB9-98EF-4CAD-BD83-605A04BEC5E5__GUID-4D9AB491-0AA3-435B-AC5D-7FFEAC194AAC">先决条件</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>CDB必须处于本地撤消模式。</p>
                              </li>
                              <li>
                                 <p>当前用户必须具有<code class="codeph">ALTER PLUGGABLE DATABASE</code>系统特权，并且必须在应用程序根目录中通常授予该特权。
                                 </p>
                              </li>
                              <li>
                                 <p>应用程序root必须处于打开的读/写状态。</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-E733EDB9-98EF-4CAD-BD83-605A04BEC5E5__GUID-3F7A7719-A632-486B-AB2A-B4942BE518EF">要升级应用程序容器中的应用程序：</p>
                           <ol>
                              <li>
                                 <p id="GUID-E733EDB9-98EF-4CAD-BD83-605A04BEC5E5__d5e38">在SQL * Plus或SQL Developer中，确保当前容器是应用程序根目录。</p>
                              </li>
                              <li>
                                 <p>以下列形式运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN UPGRADE</code>语句：</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE应用<span class="italic">APPLICATION_NAME</span> BEGIN UPGRADE <span class="italic">'application_start_version_number'</span> TO <span class="italic">'application_end_version_number';</span></code></pre><p>例如，如果<span class="italic">application_name</span>是<code class="codeph">salesapp</code> ， <span class="italic">application_start_version_number</span>是4.2， <span class="italic">application_end_version_number</span>是4.3，则运行以下语句：</p><pre class="pre codeblock"><code>ALTER PLOGGABLE DATABASE APPLICATION salesapp BEGIN UPGRADE'4.2'to'4.3';</code></pre></li>
                              <li>
                                 <p>使用脚本，SQL语句或图形用户界面工具升级应用程序。</p>
                              </li>
                              <li>
                                 <p>以下面的形式运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END UPGRADE</code>语句：</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE应用<span class="italic">APPLICATION_NAME</span> END升级到<span class="italic">'application_end_version_number';</span></code></pre><p>例如，如果<span class="italic">application_name</span>是<code class="codeph">salesapp</code>且<span class="italic">application_end_version_number</span>是4.3，则运行以下语句：</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE APPLICATION salesapp END UPGRADE TO'4.3';</code></pre><div class="infoboxnote" id="GUID-E733EDB9-98EF-4CAD-BD83-605A04BEC5E5__ENSURETHATTHEAPPLICATION_NAMEANDAPP-04464BE5">
                                    <p class="notep1">注意：</p>确保<span class="italic">application_name</span>和<span class="italic">application_end_version_number</span>在<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN UPGRADE</code>语句和<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END UPGRADE</code>语句中<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END UPGRADE</code> 。
                                 </div>
                              </li>
                              <li>
                                 <p>通过发出带有<code class="codeph">SYNC</code>子句的<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句，同步所有必须升级应用程序的应用程序PDB。
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="administering-a-cdb-with-sql-plus.html#GUID-90C01374-20C9-41A2-AC6D-808F78AA51D3" title="通过发出CONNECT或ALTER SESSION命令，使用SQL * Plus访问CDB中的容器。">访问CDB中的容器</a></li>
                              <li><a href="administering-application-containers-with-sql-plus.html#GUID-27A78D0C-B90B-4BB9-A8D2-787353A667B1" title="同步应用程序会将应用程序PDB中的应用程序更新为应用程序根目录中的最新版本和修补程序。">在应用程序PDB中同步应用程序</a></li>
                              <li><a href="administering-a-cdb-with-sql-plus.html#GUID-24EA5811-94F0-4EEC-864F-23AEF48F2D51" title="启用本地撤消后，每个容器都有自己的撤消表空间，用于打开它的每个实例。禁用本地撤消后，整个CDB都有一个撤消表空间。">使用ALTER DATABASE在CDB中设置撤消模式</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-07C8EC31-0A4B-4F63-A40A-E87031858545" title="应用程序的主要更改构成应用程序升级。您可以在应用程序容器中升级应用程序。">在应用程序容器中升级应用程序</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-05F9AE85-20F2-451F-92DF-6EE1BB37C397" name="GUID-05F9AE85-20F2-451F-92DF-6EE1BB37C397"></a><h4 id="MULTI-GUID-05F9AE85-20F2-451F-92DF-6EE1BB37C397" class="sect4"><span class="enumeration_section">17.3.4</span>在应用程序容器中修补应用程序</h4>
                  <div>
                     <p>对应用程序的微小更改构成应用程序补丁</p>
                     <p>较小的更改示例可能包括错误修复和安全修补程序。您可以在应用程序容器中修补应用程序。</p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-FD950766-D847-45AE-A3EA-1AA67D7C1DF0">关于在应用程序容器中修补应用程序</a><br>要在应用程序根目录中修补应用程序，请发出<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句。
                        </li>
                        <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-D29C2A0B-992C-40F8-8527-34DC98F3AF74">使用自动传播在应用程序容器中修补应用程序</a><br>修补程序的应用程序更改将传播到与应用程序根目录中的应用程序同步的应用程序PDB。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-EB81A80C-FA22-4D9B-A69D-7E2C8FB5E854" title="您可以在应用程序容器中安装，升级或修补应用程序。">管理应用程序容器中的应用程序</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-FD950766-D847-45AE-A3EA-1AA67D7C1DF0" name="GUID-FD950766-D847-45AE-A3EA-1AA67D7C1DF0"></a><h5 id="MULTI-GUID-FD950766-D847-45AE-A3EA-1AA67D7C1DF0" class="sect5"><span class="enumeration_section">17.3.4.1</span>关于在应用程序容器中修补应用程序</h5>
                     <div>
                        <p>要在应用程序根目录中修补应用程序，请发出<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句。
                        </p>
                        <p>您只能在应用程序根目录中修补应用程序。与应用程序同步的应用程序PDB应用更改。您可以使用以下一种或多种技术来执行修补程序：脚本，SQL语句和图形用户界面工具。</p>
                        <p>该补丁仅限于一小组操作。通常，在修补程序中不允许执行破坏性操作，例如丢弃表。如果您尝试修补应用程序，并且该操作引发“应用程序修补程序中不支持的操作”错误，则升级应用程序而不是修补它以进行必要的更改。</p>
                        <div class="infoboxnote" id="GUID-FD950766-D847-45AE-A3EA-1AA67D7C1DF0__GUID-54546386-DE3B-4767-B562-4A035C80FA77">
                           <p class="notep1">注意：</p>
                           <p>与应用程序升级不同，修补程序不会创建应用程序根克隆。如果修补程序后应用程序PDB未同步，则查询将定向到已修补的应用程序根目录。</p>
                        </div>
                        <p>使用<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN PATCH</code>语句指示补丁的开头，并使用<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END PATCH</code>语句<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END PATCH</code>补丁的结尾。每个补丁必须与应用程序名称，起始版本号和结束版本号相关联。在<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句中指定这些值。
                        </p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="administering-a-cdb-with-sql-plus.html#GUID-E307DC5F-52A9-4B1B-8999-3E60867009D4" title="您可以使用catcon.pl脚本在CDB中运行Oracle提供的SQL或SQL脚本。您可以针对任何指定的容器运行脚本。">在CDB中运行Oracle提供的SQL脚本</a></li>
                              <li><a href="administering-application-containers-with-sql-plus.html#GUID-07C8EC31-0A4B-4F63-A40A-E87031858545" title="应用程序的主要更改构成应用程序升级。您可以在应用程序容器中升级应用程序。">升级应用程序容器中的应用程序</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-05F9AE85-20F2-451F-92DF-6EE1BB37C397" title="对应用程序的微小更改构成应用程序补丁">在应用程序容器中修补应用程序</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-D29C2A0B-992C-40F8-8527-34DC98F3AF74" name="GUID-D29C2A0B-992C-40F8-8527-34DC98F3AF74"></a><h5 id="MULTI-GUID-D29C2A0B-992C-40F8-8527-34DC98F3AF74" class="sect5"><span class="enumeration_section">17.3.4.2</span>使用自动传播在应用程序容器中修补应用程序</h5>
                     <div>
                        <p>修补程序的应用程序更改将传播到与应用程序根目录中的应用程序同步的应用程序PDB。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-D29C2A0B-992C-40F8-8527-34DC98F3AF74__GUID-E56BD53A-0D81-420F-BE30-705F4959D2DD">先决条件</p>
                           <p>必须满足以下先决条件：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>当前用户必须具有<code class="codeph">ALTER PLUGGABLE DATABASE</code>系统特权，并且必须在应用程序根目录中通常授予该特权。
                                 </p>
                              </li>
                              <li>
                                 <p>应用程序root必须处于打开的读/写模式。</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>在SQL * Plus中，确保当前容器是应用程序根目录。</span></li>
                           <li class="stepexpand"><span>以下面的形式运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN PATCH</code>语句：</span><div><code class="codeph">ALTER PLUGGABLE DATABASE应用<span class="codeinlineitalic">APPLICATION_NAME</span> BEGIN PATCH <span class="codeinlineitalic">patch_number</span>最低版本<span class="codeinlineitalic">'minimum_application_version_number';</span></code></div>
                              <div>例如，如果<span class="italic">application_name</span>是<code class="codeph">salesapp</code> ， <span class="italic">patch_number</span>是987654，并且<span class="italic">minimum_application_version_number</span>是4.2，则运行以下语句：</div>
                              <div><code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION salesapp BEGIN PATCH 987654 MINIMUM VERSION'4.2';</code></div>
                              <div><span class="italic">minimum_application_version_number</span>指示应用程序安装在应用修补程序之前必须安装的最小应用程序版本。
                              </div>
                           </li>
                           <li class="stepexpand"><span>使用脚本，SQL语句和图形用户界面工具修补应用程序。</span></li>
                           <li class="stepexpand"><span>以下面的形式运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END PATCH</code>语句：</span><div><code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION <span class="codeinlineitalic">application_name</span> END PATCH <span class="codeinlineitalic">patch_number</span> ;</code></div>
                              <div>例如，如果<span class="italic">application_name</span>是<code class="codeph">salesapp</code>且<span class="italic">patch_number</span>是987654，请运行以下语句：</div>
                              <div><code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION salesapp END PATCH 987654;</code><div class="infoboxnote" id="GUID-D29C2A0B-992C-40F8-8527-34DC98F3AF74__GUID-D64E1BBE-4F58-494D-934A-A5A17DD1A0D6">
                                    <p class="notep1">注意：</p>确保<span class="italic">application_name</span>和<span class="italic">patch_number</span>在<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN PATCH</code>语句和<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END PATCH</code>语句中<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END PATCH</code> 。
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>通过发出带有<code class="codeph">SYNC</code>子句的<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句， <code class="codeph">SYNC</code>必须修补应用程序的所有应用程序PDB。</span></li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="administering-a-cdb-with-sql-plus.html#GUID-90C01374-20C9-41A2-AC6D-808F78AA51D3" title="通过发出CONNECT或ALTER SESSION命令，使用SQL * Plus访问CDB中的容器。">访问CDB中的容器</a></li>
                              <li><a href="administering-application-containers-with-sql-plus.html#GUID-27A78D0C-B90B-4BB9-A8D2-787353A667B1" title="同步应用程序会将应用程序PDB中的应用程序更新为应用程序根目录中的最新版本和修补程序。">在应用程序PDB中同步应用程序</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-05F9AE85-20F2-451F-92DF-6EE1BB37C397" title="对应用程序的微小更改构成应用程序补丁">在应用程序容器中修补应用程序</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-D2F30723-9E70-469C-8048-CB06DE00173E" name="GUID-D2F30723-9E70-469C-8048-CB06DE00173E"></a><h4 id="MULTI-GUID-D2F30723-9E70-469C-8048-CB06DE00173E" class="sect4"><span class="enumeration_section">17.3.5</span>将现有应用程序迁移到应用程序容器</h4>
                  <div>
                     <p>您可以将PDB中安装的应用程序迁移到应用程序容器。</p>
                     <p>您可以将应用程序迁移到应用程序根目录或应用程序PDB。例如，您可以将安装在插入<span>Oracle Database 12c</span>第2版（12.2）CDB的PDB中的应用程序迁移到<span>Oracle Database 18c</span> CDB中的应用程序容器。</p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-81306C74-EB38-4662-9873-EB8D3AF9DF33">关于将现有应用程序迁移到应用程序容器</a><br>您可以通过使用现有PDB创建应用程序根目录将应用程序迁移到应用程序根目录。</li>
                        <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-4C6F56CF-1FA1-4490-8262-818A6DA7CE05">使用现有PDB创建应用程序根目录</a><br>通过将PDB复制到应用程序容器来迁移安装在PDB中的应用程序。
                        </li>
                        <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-D7448903-C3BB-47DA-9EC7-5D1B212C9D02">使用现有PDB创建应用程序PDB</a><br>将现有应用程序迁移到应用程序根目录后，可以使用使用该应用程序的现有PDB来创建应用程序PDB。</li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-EB81A80C-FA22-4D9B-A69D-7E2C8FB5E854" title="您可以在应用程序容器中安装，升级或修补应用程序。">管理应用程序容器中的应用程序</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-81306C74-EB38-4662-9873-EB8D3AF9DF33" name="GUID-81306C74-EB38-4662-9873-EB8D3AF9DF33"></a><h5 id="MULTI-GUID-81306C74-EB38-4662-9873-EB8D3AF9DF33" class="sect5"><span class="enumeration_section">17.3.5.1</span>关于将现有应用程序迁移到应用程序容器</h5>
                     <div>
                        <p>您可以通过使用现有PDB创建应用程序根目录将应用程序迁移到应用程序根目录。</p>
                        <p>如果应用程序安装在多个PDB中，则可以使用其中一个PDB来创建应用程序根目录。您可以使用可用于将PDB复制到应用程序根目录的方法之一，例如克隆PDB或将PDB作为应用程序根插入。</p>
                        <p>当用于创建应用程序根目录的PDB中存在公共用户，角色或配置文件时，必须在<code class="codeph">DBMS_PDB</code>包中运行过程以将它们与应用程序相关联。首次打开从PDB创建的应用程序根时，每个本地用户，角色和配置文件都标记为通用。<code class="codeph">DBMS_PDB</code>包中的过程将用户，角色或概要文件与应用程序相关联。因此，用户，角色或配置文件上的所有DDL操作必须随后在应用程序中完成<code class="codeph">BEGIN...本应用程序的END</code>块。
                        </p>
                        <p>当应用程序根目录中存在共享数据库对象时，必须在<code class="codeph">DBMS_PDB</code>包中运行过程，以将数据库对象与应用程序关联为应用程序公共对象。因此，应用程序公共对象上的所有DDL操作必须随后在应用程序中完成<code class="codeph">BEGIN...本应用程序的END</code>块。
                        </p>
                        <p>应用程序root到位后，您可以使用现有PDB在新应用程序容器中创建应用程序PDB。您创建的应用程序PDB必须包含应用程序对象，包括其数据。需要执行其他步骤来同步应用程序版本和修补程序编号，以及在应用程序PDB中建立共享数据库对象。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-81306C74-EB38-4662-9873-EB8D3AF9DF33__GUID-15D5F739-8228-4766-B6CA-C5ADFA6322C1">具有一百个运行相同应用程序的PDB的方案</p>
                           <p>假设您当前有一百个运行相同应用程序的PDB，并且您希望将这些PDB迁移到应用程序容器。这些PDB具有应用程序所需的应用程序公共对象和公共用户，角色和配置文件。要将PDB迁移到应用程序容器，请按照下列步骤操作：</p>
                           <ol>
                              <li>
                                 <p>选择其中一个PDB，并使用<span class="q">“ <a href="administering-application-containers-with-sql-plus.html#GUID-4C6F56CF-1FA1-4490-8262-818A6DA7CE05" title="通过将PDB复制到应用程序容器来迁移安装在PDB中的应用程序。">使用现有PDB</a></span>创建应用程序根目录”中的说明使用此PDB创建应用程序根目录。</p>
                                 <p>作为此步骤的一部分，您可以通过运行<code class="codeph">DBMS_PDB</code>包中的过程将数据库对象，用户，角色和概要文件与应用程序相关<code class="codeph">DBMS_PDB</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>使用<span class="q">“ <a href="administering-application-containers-with-sql-plus.html#GUID-D7448903-C3BB-47DA-9EC7-5D1B212C9D02" title="将现有应用程序迁移到应用程序根目录后，可以使用使用该应用程序的现有PDB来创建应用程序PDB。">使用现有PDB创建应用程序PDB</a> ”中</span>的指示信息，使用运行该应用程序的PDB创建一百个应用程序PDB。
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-81306C74-EB38-4662-9873-EB8D3AF9DF33__GUID-D8748DC7-2AF1-47BB-A044-9A246AAFCBB9">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="creating-removing-application-containers-seeds-with-sql-plus.html#GUID-20B0B12F-A6A5-4403-95FF-64B3A5CC00A9" title="您可以使用带有AS APPLICATION CONTAINER子句的CREATE PLUGGABLE DATABASE语句创建应用程序容器。">创建应用程序容器</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="administering-application-containers-with-sql-plus.html#GUID-D06AD868-A2BA-449D-9C73-884F0378D175" title="在自动传播中，应用程序安装在与应用程序根目录中的应用程序同步的应用程序PDB中。">使用自动传播在应用程序容器中安装应用程序</a> ”</span></p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_PDB.html#ARPLS-GUID-DB254799-2EC9-4582-B5BC-086EFBB8D375" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a>以了解有关<code class="codeph">DBMS_PDB</code>更多信息</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-D2F30723-9E70-469C-8048-CB06DE00173E" title="您可以将PDB中安装的应用程序迁移到应用程序容器。">将现有应用程序迁移到应用程序容器</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-4C6F56CF-1FA1-4490-8262-818A6DA7CE05" name="GUID-4C6F56CF-1FA1-4490-8262-818A6DA7CE05"></a><h5 id="MULTI-GUID-4C6F56CF-1FA1-4490-8262-818A6DA7CE05" class="sect5"><span class="enumeration_section">17.3.5.2</span>使用现有PDB创建应用程序根</h5>
                     <div>
                        <p>通过将PDB复制到应用程序容器来迁移安装在PDB中的应用程序。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-4C6F56CF-1FA1-4490-8262-818A6DA7CE05__GUID-C8BBC0C6-918F-4718-BAE0-87F2AADBBDEE">先决条件</p>
                           <p>必须存在<span>Oracle Database 12c</span>第2版（12.2）或更高版本的CDB。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>在CDB中，通过克隆现有PDB，重新定位现有PDB或拔出现有PDB并插入来创建应用程序根目录。</span><div>新的应用程序根目录必须包含应用程序使用的所有数据库对象。</div>
                           </li>
                           <li class="stepexpand"><span>将应用程序root作为当前容器，通过发出<code class="codeph">ALTER PLUGGABLE DATABASE ...启动应用程序安装操作<code class="codeph">ALTER PLUGGABLE DATABASE ...BEGIN INSTALL</code>声明。</span></li>
                           <li class="stepexpand"><strong>可选：</strong> <span>查询<code class="codeph">DBA_USERS</code> ， <code class="codeph">DBA_ROLES</code>和<code class="codeph">DBA_PROFILES</code>视图中的<code class="codeph">COMMON</code>列，以确定哪些用户，角色和配置文件是通用的。</span></li>
                           <li class="stepexpand"><span>在<code class="codeph">DBMS_PDB</code>包中运行以下过程以关联用户和角色。和应用程序的配置文件：</span><ul>
                                 <li>运行<code class="codeph">SET_USER_EXPLICIT</code>过程以设置应用程序公共用户。
                                 </li>
                                 <li>运行<code class="codeph">SET_ROLE_EXPLICIT</code>过程以设置应用程序公共角色。
                                 </li>
                                 <li>运行<code class="codeph">SET_PROFILE_EXPLICIT</code>过程以设置应用程序常用配置文件。
                                 </li>
                              </ul>
                              <div>如果您没有<code class="codeph">DBMS_PDB</code>包的<code class="codeph">EXECUTE</code>特权，则可以在<code class="codeph">DBMS_PDB_ALTER_SHARING</code>包中运行这些过程。
                              </div>
                           </li>
                           <li class="stepexpand"><strong>可选：</strong> <span>使用应用程序root作为当前容器，查询<code class="codeph">DBA_OBJECTS</code>视图中的<code class="codeph">SHARING</code>列以确定共享哪些数据库对象。</span></li>
                           <li class="stepexpand"><span>在<code class="codeph">DBMS_PDB</code>包中运行以下过程以将数据库对象与应用程序关联：</span><ul>
                                 <li>运行<code class="codeph">SET_DATA_LINKED</code>过程以设置数据链接的应用程序公共对象。
                                 </li>
                                 <li>运行<code class="codeph">SET_METADATA_LINKED</code>过程以设置元数据链接的应用程序公共对象。
                                 </li>
                                 <li>运行<code class="codeph">SET_EXT_DATA_LINKED</code>过程以设置扩展的数据链接应用程序公共对象。
                                 </li>
                              </ul>
                              <div>如果您没有<code class="codeph">DBMS_PDB</code>包的<code class="codeph">EXECUTE</code>特权，则可以在<code class="codeph">DBMS_PDB_ALTER_SHARING</code>包中运行这些过程。
                              </div>
                           </li>
                           <li class="stepexpand"><span>通过发出<code class="codeph">ALTER PLUGGABLE DATABASE ...结束应用程序安装操作<code class="codeph">ALTER PLUGGABLE DATABASE ...END INSTALL</code>语句。</span></li>
                           <li class="stepexpand"><strong>可选：</strong> <span>重新运行先前运行的查询，以确保数据库对象的共享属性正确，并确保用户，角色和配置文件的公共属性正确。</span></li>
                           <li class="stepexpand"><strong>可选：</strong> <span>如果现有PDB使用该应用程序，则使用这些现有PDB创建应用程序PDB。</span><div>请参阅<span class="q">“ <a href="administering-application-containers-with-sql-plus.html#GUID-D7448903-C3BB-47DA-9EC7-5D1B212C9D02" title="将现有应用程序迁移到应用程序根目录后，可以使用使用该应用程序的现有PDB来创建应用程序PDB。">使用现有PDB创建应用程序PDB</a> ”</span> 。
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="creating-removing-application-containers-seeds-with-sql-plus.html#GUID-20B0B12F-A6A5-4403-95FF-64B3A5CC00A9" title="您可以使用带有AS APPLICATION CONTAINER子句的CREATE PLUGGABLE DATABASE语句创建应用程序容器。">创建应用程序容器</a></li>
                              <li><a href="administering-application-containers-with-sql-plus.html#GUID-EB81A80C-FA22-4D9B-A69D-7E2C8FB5E854" title="您可以在应用程序容器中安装，升级或修补应用程序。">管理应用程序容器中的应用程序</a></li>
                              <li><a href="../arpls/DBMS_PDB.html#ARPLS-GUID-DB254799-2EC9-4582-B5BC-086EFBB8D375" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-D2F30723-9E70-469C-8048-CB06DE00173E" title="您可以将PDB中安装的应用程序迁移到应用程序容器。">将现有应用程序迁移到应用程序容器</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-D7448903-C3BB-47DA-9EC7-5D1B212C9D02" name="GUID-D7448903-C3BB-47DA-9EC7-5D1B212C9D02"></a><h5 id="MULTI-GUID-D7448903-C3BB-47DA-9EC7-5D1B212C9D02" class="sect5"><span class="enumeration_section">17.3.5.3</span>使用现有PDB创建应用程序PDB</h5>
                     <div>
                        <p>将现有应用程序迁移到应用程序根目录后，可以使用使用该应用程序的现有PDB来创建应用程序PDB。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-D7448903-C3BB-47DA-9EC7-5D1B212C9D02__GUID-EF5A91BE-3FBA-4B18-A4D8-07E87DBED664">先决条件</p>
                           <p>您必须满足以下先决条件：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>必须存在<span>Oracle Database 12c</span>第2版（12.2）或更高版本的CDB，并且必须存在应用程序PDB所属的应用程序根目录。
                                 </p>
                              </li>
                              <li>
                                 <p>PDB必须包含应用程序使用的所有应用程序公共对象。</p>
                              </li>
                              <li>
                                 <p>应用程序必须安装在应用程序根目录中。</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>在应用程序根目录中，通过克隆现有PDB或拔出并插入现有PDB来创建应用程序PDB。</span><div>PDB创建期间将报告违规行为。</div>
                           </li>
                           <li class="stepexpand"><span>以具有所需权限的用户身份连接或切换到新PDB。</span></li>
                           <li class="stepexpand"><span>在<code class="codeph"><span class="codeinlineitalic">ORACLE_HOME</span> /rdbms/admin</code>目录中运行<code class="codeph">pdb_to_apppdb.sql</code>脚本。</span><div>该脚本自动将应用程序PDB与应用程序根同步。</div>
                           </li>
                           <li class="stepexpand"><strong>可选：</strong> <span>查询<code class="codeph">DBA_OBJECTS</code>视图中的<code class="codeph">SHARING</code>列，以确保数据库对象的共享属性正确。</span></li>
                           <li class="stepexpand"><strong>可选：</strong> <span>查询<code class="codeph">DBA_USERS</code> ， <code class="codeph">DBA_ROLES</code>和<code class="codeph">DBA_PROFILES</code>视图中的<code class="codeph">COMMON</code>列，以确保用户，角色和配置文件的公共属性正确。</span></li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="creating-pdbs.html#GUID-9A250D93-5B3B-4643-BE85-F32CC7B0E413" title="您可以使用各种技术创建PDB，应用程序容器和应用程序种子。">创建和删除PDB和应用程序容器</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-D2F30723-9E70-469C-8048-CB06DE00173E" title="您可以将PDB中安装的应用程序迁移到应用程序容器。">将现有应用程序迁移到应用程序容器</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-27A78D0C-B90B-4BB9-A8D2-787353A667B1" name="GUID-27A78D0C-B90B-4BB9-A8D2-787353A667B1"></a><h4 id="MULTI-GUID-27A78D0C-B90B-4BB9-A8D2-787353A667B1" class="sect4"><span class="enumeration_section">17.3.6</span>在应用程序PDB中同步应用程序</h4>
                  <div>
                     <p>同步应用程序会将应用程序PDB中的应用程序更新为应用程序根目录中的最新版本和修补程序。</p>
                     <div class="section">  
                        <div class="infoboxnote" id="GUID-27A78D0C-B90B-4BB9-A8D2-787353A667B1__GUID-FD496CCE-A474-44F2-ACE2-5FEA7236195B">
                           <p class="notep1">注意：</p>
                           <p>在应用程序根目录中安装，升级，修补或卸载应用程序时，属于应用程序根目录的应用程序PDB在同步之前不会更改。</p>
                        </div>
                        <p>除了用户创建的应用程序，应用程序容器还可以包含隐式创建的应用程序。当使用<code class="codeph">ALTER PLUGGABLE DATABASE BEGIN/END</code>语句之外的<code class="codeph">CONTAINER=ALL</code>子句发出应用程序公共用户操作时，将在应用程序根中隐式创建应用程序。应用程序常用用户操作包括诸如使用<code class="codeph">CREATE USER</code>语句创建公共用户或使用<code class="codeph">ALTER USER</code>语句更改公共用户等操作。隐式应用程序名为<code class="codeph">APP$ <span class="codeinlineitalic">guid</span></code> ，其中<span class="italic">guid</span>是应用程序根目录的GUID。首次打开应用程序根目录时会创建隐式应用程序。
                        </p>
                        <p>当应用程序PDB是当前容器时，通过发出以下SQL语句来同步应用程序PDB中的一个应用程序，其中<span class="italic">application_name</span>是<span class="italic">应用程序</span>的名称：</p>
                        <p><code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION <span class="codeinlineitalic">application_name</span> SYNC;</code></p>
                        <p></p>
                        <p>当应用程序PDB是当前容器时，通过发出以下SQL语句来同步应用程序PDB中的所有应用程序（包括隐式创建的应用程序）：</p>
                        <p><code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION ALL SYNC;</code></p>
                        <p>当应用程序PDB是当前容器时，通过发出以下SQL语句之一来同步应用程序PDB中隐式创建的应用程序：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION APP $ <span class="codeinlineitalic">guid</span> SYNC;</code></p>
                              <p><span class="italic">guid</span>是应用程序根目录的GUID。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION APP $ CON SYNC;</code></p>
                              <p><code class="codeph">APP$CON</code>是一个逻辑应用程序名称，Oracle数据库自动将其转换为隐式应用程序的真实名称。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-27A78D0C-B90B-4BB9-A8D2-787353A667B1__GUID-B5030D1E-EA45-4A2F-BA4D-B8FA2EB5F125">先决条件</p>
                        <p>当前用户必须具有<code class="codeph">ALTER PLUGGABLE DATABASE</code>系统特权。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>在SQL * Plus中，确保当前容器是应用程序PDB。</span><div></div>
                        </li>
                        <li class="stepexpand"><span>使用<code class="codeph">SYNC</code>子句运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句。</span></li>
                     </ol>
                     <div class="example" id="GUID-27A78D0C-B90B-4BB9-A8D2-787353A667B1__GUID-2E9D153B-62C6-425E-BAA2-B410E6A24B98">
                        <p class="titleinexample">示例17-2在应用程序PDB中同步特定应用程序</p>
                        <p>此示例将名为<code class="codeph">salesapp</code>的应用程序与应用程序根目录中的最新应用程序更改同步。
                        </p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE APPLICATION salesapp SYNC;</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-27A78D0C-B90B-4BB9-A8D2-787353A667B1__GUID-2BC66787-5715-4538-9E98-2C8D5C1A2481">
                        <p class="titleinexample">示例17-3同步应用程序PDB中的所有应用程序</p>
                        <p>此示例将应用程序PDB中的所有应用程序与应用程序根目录中的最新应用程序更改同步。</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE APPLICATION ALL SYNC;</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-27A78D0C-B90B-4BB9-A8D2-787353A667B1__GUID-1471136E-5B83-41BA-B6DF-151887C1ABDC">
                        <p class="titleinexample">示例17-4在应用程序PDB中同步隐式创建的应用程序</p>
                        <p>此示例将应用程序PDB中所有隐式创建的应用程序与应用程序根目录中隐式创建的应用程序的最新应用程序更改同步。</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE APPLICATION APP $ CON SYNC;</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-EB81A80C-FA22-4D9B-A69D-7E2C8FB5E854" title="您可以在应用程序容器中安装，升级或修补应用程序。">管理应用程序容器中的应用程序</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-7D442C17-28E6-4337-8EF5-6930FBC0BCC8" name="GUID-7D442C17-28E6-4337-8EF5-6930FBC0BCC8"></a><h4 id="MULTI-GUID-7D442C17-28E6-4337-8EF5-6930FBC0BCC8" class="sect4"><span class="enumeration_section">17.3.7</span>将应用程序根副本与代理PDB同步</h4>
                  <div>
                     <p>当不同CDB中的应用程序容器具有相同的应用程序时，可以通过创建主应用程序根，副本应用程序根和代理PDB来保持其应用程序根同步。</p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-84C7C5F4-C647-4DCB-9EF3-63B1129F5EE0">关于将应用程序根副本与代理PDB同步</a><br>代理PDB可以同步应用程序根目录和应用程序根目录的副本。
                        </li>
                        <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-B96087B5-678C-4781-9464-42FC468B1FCC">创建引用应用程序根副本的代理PDB</a><br>当多个应用程序容器运行相同的应用程序时，应用程序容器中的应用程序可以使用代理PDB保持同步。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-EB81A80C-FA22-4D9B-A69D-7E2C8FB5E854" title="您可以在应用程序容器中安装，升级或修补应用程序。">管理应用程序容器中的应用程序</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-84C7C5F4-C647-4DCB-9EF3-63B1129F5EE0" name="GUID-84C7C5F4-C647-4DCB-9EF3-63B1129F5EE0"></a><h5 id="MULTI-GUID-84C7C5F4-C647-4DCB-9EF3-63B1129F5EE0" class="sect5"><span class="enumeration_section">17.3.7.1</span>关于将应用程序根副本与代理PDB同步</h5>
                     <div>
                        <p>代理PDB可以同步应用程序根目录和应用程序根目录的副本。</p>
                        <p>应用程序可能安装在多个应用程序容器中。使用代理PDB时，安装，升级和修补应用程序会更有效。</p>
                        <p>在此配置中，一个应用程序容器具有主应用程序根。主应用程序根目录是安装，升级和修补应用程序的位置。应用程序根副本是主应用程序根的精确副本。每个应用程序根副本由主应用程序根中的代理PDB引用。</p>
                        <p>当代理PDB与主应用程序根目录中的应用程序更改同步时，它会将更改传播到其引用的应用程序根副本。在同步应用程序根副本之后，插入应用程序根副本的应用程序PDB可以与副本同步，并以此方式接收更改。</p>
                        <p>下图显示了使用代理PDB同步应用程序根副本的配置。</p>
                        <div class="figure" id="GUID-84C7C5F4-C647-4DCB-9EF3-63B1129F5EE0__GUID-6C321C08-7A26-4CB9-A116-DFF2AF5CA819">
                           <p class="titleinfigure">图17-2将应用程序根副本与代理PDB同步</p><img src="img/admin121.png" alt="下面是图17-2的描述" title="下面是图17-2的描述" longdesc="img_text/admin121.html"><br><a href="img_text/admin121.html">“图17-2将应用程序根副本与代理PDB同步”的说明</a></div>
                        <!-- class="figure" -->
                        <p>此外，当配置应用程序根副本并具有其自己的应用程序PDB时，在主应用程序根目录中包含<code class="codeph">CONTAINERS</code>子句的查询可以从当前应用程序容器和具有应用程序根副本的应用程序容器返回数据。查询可以显示应用程序根副本以及插入副本的任何打开的应用程序PDB的结果。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-84C7C5F4-C647-4DCB-9EF3-63B1129F5EE0__GUID-F2DBD164-01DE-43D9-9C6E-F7912DE089D0">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="viewing-information-about-cdbs-and-pdbs-with-sql-plus.html#GUID-7B4E4926-19C6-47A5-A4E3-6BD279F080F0" title="CONTAINERS子句使您可以在应用程序容器中的所有PDB中查询应用程序公共对象。来自应用程序根目录的查询显示容器中所有打开的PDB中存在的对象中的数据。">在应用程序PDB中查询应用程序公共对象</a> ”</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-7D442C17-28E6-4337-8EF5-6930FBC0BCC8" title="当不同CDB中的应用程序容器具有相同的应用程序时，可以通过创建主应用程序根，副本应用程序根和代理PDB来保持其应用程序根同步。">将应用程序根副本与代理PDB同步</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-B96087B5-678C-4781-9464-42FC468B1FCC" name="GUID-B96087B5-678C-4781-9464-42FC468B1FCC"></a><h5 id="MULTI-GUID-B96087B5-678C-4781-9464-42FC468B1FCC" class="sect5"><span class="enumeration_section">17.3.7.2</span>创建引用应用程序根副本的代理PDB</h5>
                     <div>
                        <p>当多个应用程序容器运行相同的应用程序时，应用程序容器中的应用程序可以使用代理PDB保持同步。</p>
                        <ol>
                           <li class="stepexpand"><span>使用<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句使用主应用程序根创建应用程序容器。</span><div>立即或稍后在应用程序容器中安装应用程序。</div>
                           </li>
                           <li class="stepexpand"><span>使用应用程序根副本以下列方式之一创建应用程序容器：</span><ul>
                                 <li>使用任何支持的方法创建空的应用程序容器。</li>
                                 <li>克隆主应用程序根目录。</li>
                              </ul>
                              <div>如果应用程序根副本使用的侦听器的端口不是1521，则在创建期间需要<code class="codeph">PORT</code>子句。如果应用程序根副本的主机与主应用程序根目录的主机不同，则在创建期间需要<code class="codeph">HOST</code>子句。
                              </div>
                              <div>此应用程序根副本将由代理PDB引用。</div>
                           </li>
                           <li class="stepexpand"><span>在主应用程序根目录中，创建一个代理PDB，该PDB引用您在上一步中创建的应用程序根副本。</span></li>
                           <li class="stepexpand"><span>打开并同步代理PDB。</span><div>当代理PDB同步时，它会将主应用程序根目录中的更改传播到应用程序根副本。</div>
                           </li>
                           <li class="stepexpand"><strong>可选：</strong> <span>在主应用程序根目录中，通过安装，升级或修补应用程序来修改应用程序。</span></li>
                           <li class="stepexpand"><strong>可选：</strong> <span>通过运行带有<code class="codeph">SYNC</code>子句的<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句，将代理PDB与主应用程序根目录中的应用程序更改<code class="codeph">SYNC</code> 。</span><div>当代理PDB同步时，它会将主应用程序根目录中的更改传播到应用程序根副本。</div>
                           </li>
                        </ol>
                        <div class="example" id="GUID-B96087B5-678C-4781-9464-42FC468B1FCC__GUID-985C20F1-E43E-426E-B328-01A5883B15C0">
                           <p class="titleinexample">示例17-5将应用程序根副本与代理PDB同步</p>
                           <p>此示例假定存在两个CDB： <code class="codeph">hqdb</code>和<code class="codeph">depdb</code> 。目标是使相同的应用程序在每个CDB中的应用程序容器中保持同步。为实现此目标，此示例配置以下应用程序容器：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">hqdb</code> CDB包含具有名为<code class="codeph">msappcon</code>的主应用程序根的应用程序容器。
                                 </p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>名为<code class="codeph">sampleapp</code>的应用程序安装在<code class="codeph">msappcon</code>主应用程序根目录中。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">msappcon</code>应用程序根目录包含两个名为<code class="codeph">mspdb1</code>和<code class="codeph">mspdb2</code>应用程序PDB。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">msappcon</code>应用程序根目录还包含一个名为<code class="codeph">prxypdb</code>的代理PDB，它引用另一个CDB中的应用程序根副本。</p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p><code class="codeph">depdb</code> CDB包含具有名为<code class="codeph">depappcon</code>的应用程序根副本的应用程序容器。
                                 </p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>名为<code class="codeph">sampleapp</code>的应用程序从<code class="codeph">msappcon</code>主应用程序根目录中的代理PDB <code class="codeph">prxypdb</code>传播，并安装在<code class="codeph">depappcon</code>主应用程序根目录中。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">depappcon</code>应用程序根包含两个名为<code class="codeph">deppdb1</code>和<code class="codeph">deppdb2</code>应用程序PDB。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                           <p>此示例显示在应用程序PDB同步时，如何将<code class="codeph">msappcon</code>主应用程序根目录中的<code class="codeph">sampleapp</code>应用程序更改应用于两个CDB中的应用程序PDB。
                           </p>
                           <ol>
                              <li>
                                 <p>使用<code class="codeph">hqdb</code> CDB中的主应用程序根创建应用程序容器。</p>
                                 <ol type="a">
                                    <li>
                                       <p>在SQL * Plus中，确保当前容器是<code class="codeph">hqdb</code> CDB根目录。
                                       </p>
                                    </li>
                                    <li>
                                       <p>使用以下语句从PDB种子创建应用程序容器：</p><pre class="pre codeblock"><code>CREATE PLUGGABLE DATABASE msappcon AS APPLICATION CONTAINER ADMIN USER msappconadm IDENTIFIED BY <span class="italic">password</span> STORAGE（MAXSIZE 2G）DEFAULT TABLESPACE appcontbs DATAFILE'/disk1/oracle/dbs/mssappcon/msappcon01.dbf'SIZE 250M AUTOEXTEND ON FILE_NAME_CONVERT =（'/ disk1 / oracle / dbs / pdbseed /'，'/ disk1 / oracle / dbs / msappcon /'）;</code></pre></li>
                                    <li>
                                       <p>在读/写模式下打开新的主应用程序根目录：</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE msappcon OPEN;</code></pre></li>
                                 </ol>
                              </li>
                              <li>
                                 <p>在主应用程序根目录中安装应用程序。</p>
                                 <ol type="a">
                                    <li>
                                       <p>将容器更改为主应用程序根目录：</p><pre class="pre codeblock"><code>ALTER SESSION SET CONTAINER = msappcon;</code></pre></li>
                                    <li>
                                       <p>开始应用程序安装：</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE APPLICATION sampleapp BEGIN INSTALL'1.0';</code></pre></li>
                                    <li>
                                       <p>安装应用程序。</p>
                                       <p>例如，您可以创建数据库对象：</p><pre class="pre codeblock"><code>CREATE TABLE apptb SHARING = METADATA（id NUMBER（6），widget_name VARCHAR2（20））;</code></pre></li>
                                    <li>
                                       <p>结束应用程序安装：</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE APPLICATION sampleapp END INSTALL'1.0';</code></pre></li>
                                 </ol>
                              </li>
                              <li>
                                 <p>在主应用程序根目录中创建并同步一个或多个应用程序PDB。</p>
                                 <ol type="a">
                                    <li>
                                       <p>在SQL * Plus中，确保当前容器是主应用程序根目录。</p>
                                    </li>
                                    <li>
                                       <p>在主应用程序根目录中创建应用程序PDB。</p>
                                       <p>例如，从PDB种子创建两个应用程序PDB：</p><pre class="pre codeblock"><code>CREATE PLUGGABLE DATABASE mspdb1 ADMIN USER mspdb1admin IDENTIFIED BY <span class="italic">password</span> STORAGE（MAXSIZE 2G）DEFAULT TABLESPACE mspdb1tbs DATAFILE'/disk1/oracle/dbs/mspdb1/mspdb101.dbf'SIZE 250M AUTOEXTEND ON FILE_NAME_CONVERT =（'/ disk1 / oracle / dbs / pdbseed / '，'/ disk1 / oracle / dbs / mspdb1 /'）; CREATE PLUGGABLE DATABASE mspdb2 ADMIN USER mspdb2admin IDENTIFIED BY <span class="italic">password</span> STORAGE（MAXSIZE 2G）DEFAULT TABLESPACE mspdb2tbs DATAFILE'/disk1/oracle/dbs/mspdb2/mspdb201.dbf'SIZE 250M AUTOEXTEND ON FILE_NAME_CONVERT =（'/ disk1 / oracle / dbs / pdbseed / '，'/ disk1 / oracle / dbs / mspdb2 /'）;</code></pre></li>
                                    <li>
                                       <p>打开两个应用程序PDB：</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE mspdb1 OPEN; ALTER PLUGGABLE DATABASE mspdb2 OPEN;</code></pre></li>
                                    <li>
                                       <p>将应用程序PDB与主应用程序根同步：</p><pre class="pre codeblock"><code>ALTER SESSION SET CONTAINER = mspdb1; ALTER PLUGGABLE DATABASE APPLICATION sampleapp SYNC; ALTER SESSION SET CONTAINER = mspdb2; ALTER PLUGGABLE DATABASE APPLICATION sampleapp SYNC;</code></pre></li>
                                 </ol>
                              </li>
                              <li>
                                 <p>在<code class="codeph">depdb</code> CDB中使用应用程序根副本创建应用程序容器。</p>
                                 <ol type="a">
                                    <li>
                                       <p>在SQL * Plus中，确保当前容器是<code class="codeph">depdb</code> CDB根目录。
                                       </p>
                                    </li>
                                    <li>
                                       <p>使用以下语句从PDB种子创建应用程序容器：</p><pre class="pre codeblock"><code>CREATE PLUGGABLE DATABASE depappcon as APPLICATION CONTAINER ADMIN USER depappconadm IDENTIFIED BY <span class="italic">password</span> STORAGE（MAXSIZE 2G）DEFAULT TABLESPACE appcontbs DATAFILE'/disk2/oracle/dbs/depsappcon/depappcon01.dbf'SIZE 250M AUTOEXTEND ON FILE_NAME_CONVERT =（'/ disk2 / oracle / dbs / pdbseed /'，'/ disk2 / oracle / dbs / depappcon /'）;</code></pre><div class="infoboxnote" id="GUID-B96087B5-678C-4781-9464-42FC468B1FCC__GUID-9E8B029A-E1AB-4CD4-8D89-D4E5AB47B757">
                                          <p class="notep1">注意：</p>
                                          <ul style="list-style-type:disc">
                                             <li>
                                                <p>如果应用程序根副本使用的侦听器的端口不是1521，则需要<code class="codeph">PORT</code>子句。
                                                </p>
                                             </li>
                                             <li>
                                                <p>如果应用程序根副本的主机与主应用程序根目录的主机不同，则需要<code class="codeph">HOST</code>子句。
                                                </p>
                                             </li>
                                          </ul>
                                       </div>
                                    </li>
                                    <li>
                                       <p>以读/写模式打开新的应用程序根副本：</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE depappcon OPEN;</code></pre></li>
                                 </ol>
                              </li>
                              <li>
                                 <p>在主应用程序根目录中创建并同步代理PDB。</p>
                                 <ol type="a">
                                    <li>
                                       <p>在SQL * Plus中，确保当前容器是主应用程序根目录。</p>
                                    </li>
                                    <li>
                                       <p>创建指向应用程序根副本的数据库链接：</p><pre class="pre codeblock"><code>创建公共数据库链接depappcon连接到depappconadm IDENTIFIED BY <span class="italic">密码</span>使用'depappcon';</code></pre></li>
                                    <li>
                                       <p>创建代理PDB：</p><pre class="pre codeblock"><code>创建可插入数据库prxypdb作为代理来自depappcon @ depappcon FILE_NAME_CONVERT =（'/ disk2 / oracle / dbs / depsappcon /'，'/ disk1 / oracle / dbs / prxypdb /'）;</code></pre></li>
                                    <li>
                                       <p>打开代理PDB：</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE prxypdb OPEN;</code></pre></li>
                                    <li>
                                       <p>将代理PDB与主应用程序根同步：</p><pre class="pre codeblock"><code>ALTER SESSION SET CONTAINER = prxypdb; ALTER PLUGGABLE DATABASE APPLICATION sampleapp SYNC;</code></pre></li>
                                 </ol>
                              </li>
                              <li>
                                 <p>在应用程序根副本中创建并同步一个或多个应用程序PDB。</p>
                                 <ol type="a">
                                    <li>
                                       <p>将容器更改为应用程序根副本：</p><pre class="pre codeblock"><code>ALTER SESSION SET CONTAINER = depappcon;</code></pre></li>
                                    <li>
                                       <p>在应用程序根副本中创建应用程序PDB。</p>
                                       <p>例如，从PDB种子创建两个应用程序PDB：</p><pre class="pre codeblock"><code>CREATE PLUGGABLE DATABASE deppdb1 ADMIN USER deppdb1admin IDENTIFIED BY <span class="italic">password</span> STORAGE（MAXSIZE 2G）DEFAULT TABLESPACE deppdb1tbs DATAFILE'/disk2/oracle/dbs/deppdb1/deppdb101.dbf'SIZE 250M AUTOEXTEND ON FILE_NAME_CONVERT =（'/ disk2 / oracle / dbs / pdbseed / '，'/ disk2 / oracle / dbs / deppdb1 /'）; CREATE PLUGGABLE DATABASE deppdb2 ADMIN USER deppdb2admin IDENTIFIED BY <span class="italic">password</span> STORAGE（MAXSIZE 2G）DEFAULT TABLESPACE deppdb2tbs DATAFILE'/disk2/oracle/dbs/deppdb2/deppdb201.dbf'SIZE 250M AUTOEXTEND ON FILE_NAME_CONVERT =（'/ disk2 / oracle / dbs / pdbseed / '，'/ disk2 / oracle / dbs / deppdb2 /'）;</code></pre></li>
                                    <li>
                                       <p>打开两个应用程序PDB：</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE deppdb1 OPEN; ALTER PLUGGABLE DATABASE deppdb2 OPEN;</code></pre></li>
                                    <li>
                                       <p>将应用程序PDB与主应用程序根同步：</p><pre class="pre codeblock"><code>ALTER SESSION SET CONTAINER = deppdb1; ALTER PLUGGABLE DATABASE APPLICATION sampleapp SYNC; ALTER SESSION SET CONTAINER = deppdb2; ALTER PLUGGABLE DATABASE APPLICATION sampleapp SYNC;</code></pre></li>
                                 </ol>
                              </li>
                              <li>
                                 <p>检查应用程序根副本中的应用程序PDB中的<code class="codeph">apptb</code>表的结构。
                                 </p>
                                 <ol type="a">
                                    <li>
                                       <p>从应用程序根副本，将容器切换到<code class="codeph">deppdb1</code>应用程序PDB：</p><pre class="pre codeblock"><code>ALTER SESSION SET CONTAINER = deppdb1;</code></pre></li>
                                    <li>
                                       <p>描述<code class="codeph">apptb</code>表：</p><pre class="pre codeblock"><code>desc apptb</code></pre><p>您的输出类似于以下内容：</p><pre class="pre codeblock"><code>名字空？输入----------------------------------------- -------- ---------------------------- ID NUMBER（6）WIDGET_NAME VARCHAR2（20）</code></pre></li>
                                 </ol>
                              </li>
                              <li>
                                 <p>在主应用程序根目录中，升级应用程序。</p>
                                 <ol type="a">
                                    <li>
                                       <p>将容器更改为主应用程序根目录：</p><pre class="pre codeblock"><code>ALTER SESSION SET CONTAINER = msappcon;</code></pre></li>
                                    <li>
                                       <p>开始应用程序升级。</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE APPLICATION sampleapp BEGIN UPGRADE'1.0'to'1.1';</code></pre></li>
                                    <li>
                                       <p>修改应用程序。</p>
                                       <p>例如，在<code class="codeph">apptb</code>表中添加一行：</p><pre class="pre codeblock"><code>ALTER TABLE apptb ADD（widget_type VARCHAR2（30））;</code></pre></li>
                                    <li>
                                       <p>结束应用程序升级：</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE APPLICATION sampleapp END UPGRADE TO'1.1';</code></pre></li>
                                 </ol>
                              </li>
                              <li>
                                 <p>将代理PDB与主应用程序根同步：</p><pre class="pre codeblock"><code>ALTER SESSION SET CONTAINER = prxypdb; ALTER PLUGGABLE DATABASE APPLICATION sampleapp SYNC;</code></pre></li>
                              <li>
                                 <p>同步应用程序根副本中的应用程序PDB并检查应用程序升级。</p>
                                 <ol type="a">
                                    <li>
                                       <p>同步应用程序PDB：</p><pre class="pre codeblock"><code>ALTER SESSION SET CONTAINER = deppdb1; ALTER PLUGGABLE DATABASE APPLICATION sampleapp SYNC; ALTER SESSION SET CONTAINER = deppdb2; ALTER PLUGGABLE DATABASE APPLICATION sampleapp SYNC;</code></pre></li>
                                    <li>
                                       <p>从应用程序根副本，将容器切换到<code class="codeph">deppdb1</code>应用程序PDB：</p><pre class="pre codeblock"><code>ALTER SESSION SET CONTAINER = deppdb1;</code></pre></li>
                                    <li>
                                       <p>描述<code class="codeph">apptb</code>表：</p><pre class="pre codeblock"><code>desc apptb</code></pre><p>您的输出类似于以下内容：</p><pre class="pre codeblock"><code>名字空？输入----------------------------------------- -------- ---------------------------- ID NUMBER（6）WIDGET_NAME VARCHAR2（20）WIDGET_TYPE VARCHAR2（30）</code></pre><p>请注意，应用程序升级中的更改会反映在输出中，因为<code class="codeph">widget_type</code>列已添加到<code class="codeph">apptb</code>表中。
                                       </p>
                                    </li>
                                 </ol>
                              </li>
                           </ol>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="creating-removing-application-containers-seeds-with-sql-plus.html#GUID-3C6D4200-1FEC-4C0F-B335-EFDC655ADABC" title="您可以使用CREATE PLUGGABLE DATABASE语句在CDB中创建应用程序容器。">创建应用程序容器</a></li>
                              <li><a href="creating-a-proxy-pdb.html#GUID-7C23D560-5AD5-4AF2-93B4-F4FDC6DE768C" title="您可以通过在远程CDB中引用PDB来创建PDB作为代理PDB。">将PDB创建为代理PDB</a></li>
                              <li><a href="administering-application-containers-with-sql-plus.html#GUID-EB81A80C-FA22-4D9B-A69D-7E2C8FB5E854" title="您可以在应用程序容器中安装，升级或修补应用程序。">管理应用程序容器中的应用程序</a></li>
                              <li><a href="administering-application-containers-with-sql-plus.html#GUID-27A78D0C-B90B-4BB9-A8D2-787353A667B1" title="同步应用程序会将应用程序PDB中的应用程序更新为应用程序根目录中的最新版本和修补程序。">在应用程序PDB中同步应用程序</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-7D442C17-28E6-4337-8EF5-6930FBC0BCC8" title="当不同CDB中的应用程序容器具有相同的应用程序时，可以通过创建主应用程序根，副本应用程序根和代理PDB来保持其应用程序根同步。">将应用程序根副本与代理PDB同步</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-00BF8D6A-5FBB-4798-98CE-0EB27FD8126C" name="GUID-00BF8D6A-5FBB-4798-98CE-0EB27FD8126C"></a><h4 id="MULTI-GUID-00BF8D6A-5FBB-4798-98CE-0EB27FD8126C" class="sect4"><span class="enumeration_section">17.3.8</span>设置应用程序的兼容版本</h4>
                  <div>
                     <p>应用程序的兼容版本是属于应用程序容器的应用程序PDB可能的最早版本的应用程序。</p>
                     <div class="section"> 
                        <p>在设置兼容性版本和创建应用程序PDB时，将强制实施兼容性版本。如果应用程序升级导致应用程序根克隆，则会隐式删除与兼容版本之前的版本对应的所有应用程序根克隆。</p>
                        <p>当应用程序root是当前容器时，通过发出以下SQL语句之一来指定应用程序的兼容版本：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ALTER DATABASE PLUGGABLE应用<span class="codeinlineitalic">APPLICATION_NAME</span> SET兼容版本<span class="codeinlineitalic">'application_version_number';</span></code></p>
                              <p><span class="italic">application_name</span>是<span class="italic">应用程序</span>的名称， <span class="italic">application_version_number</span>是最早的兼容版本。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION <span class="codeinlineitalic">application_name</span> SET COMPATIBILITY VERSION CURRENT;</code></p>
                              <p><span class="italic">application_name</span>是<span class="italic">应用程序</span>的名称。当前版本是应用程序根目录中的应用程序版本。
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-00BF8D6A-5FBB-4798-98CE-0EB27FD8126C__GUID-E9EDD149-68DD-44E9-80B4-A9F36438CBC8">
                           <p class="notep1">注意：</p>
                           <p>您无法插入使用应用程序版本早于应用程序容器的兼容性设置的应用程序PDB。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>在SQL * Plus中，确保当前容器是应用程序根目录。</span></li>
                        <li><span>运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION SET COMPATIBILITY VERSION</code>语句。</span></li>
                     </ol>
                     <div class="example" id="GUID-00BF8D6A-5FBB-4798-98CE-0EB27FD8126C__GUID-BE27EDD0-CC33-479F-9537-05CF1B9CB0FD">
                        <p class="titleinexample">示例17-6将兼容版本设置为特定版本号</p>
                        <p>此示例将名为<code class="codeph">salesapp</code>的应用程序的兼容版本设置为版本4.2。
                        </p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE APPLICATION salesapp SET COMPATIBILITY VERSION'4.2';</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-00BF8D6A-5FBB-4798-98CE-0EB27FD8126C__GUID-9EC3E2BD-A241-484C-A9C9-4B2A61BF31B5">
                        <p class="titleinexample">示例17-7将兼容版本设置为当前应用程序版本</p>
                        <p>此示例将名为<code class="codeph">salesapp</code>的应用程序的兼容版本设置为当前应用程序版本。
                        </p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE APPLICATION salesapp SET COMPATIBILITY VERSION CURRENT;</code></pre></div>
                     <!-- class="example" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-00BF8D6A-5FBB-4798-98CE-0EB27FD8126C__GUID-266EA992-C38C-49D4-99F6-C792192E824C">
                        <p class="notep1">也可以看看：</p><span class="q">“ <a href="administering-application-containers-with-sql-plus.html#GUID-46D899D7-C52C-4C50-B1B9-BF851D907DE3" title="您发出ALTER PLUGGABLE DATABASE APPLICATION语句以升级应用程序根目录中的应用程序。">关于在应用程序容器中升级应用程序</a> ”</span>以获取有关应用程序根克隆的信息</div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-EB81A80C-FA22-4D9B-A69D-7E2C8FB5E854" title="您可以在应用程序容器中安装，升级或修补应用程序。">管理应用程序容器中的应用程序</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-68C91677-24C7-4983-80F0-A94F0B6C2898" name="GUID-68C91677-24C7-4983-80F0-A94F0B6C2898"></a><h4 id="MULTI-GUID-68C91677-24C7-4983-80F0-A94F0B6C2898" class="sect4"><span class="enumeration_section">17.3.9</span>在应用程序安装，升级和修补程序操作期间执行批量插入</h4>
                  <div>
                     <p>SQL * Loader是在应用程序安装，升级和修补操作期间批量插入表的唯一受支持的实用程序。在应用程序安装，升级和修补操作期间，批量插入仅支持常规路径负载。</p>
                     <div class="section">
                        <p>必须在<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN</code>和<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END</code>语句之间指定正确的SQL * Loader模块名称。模块名称是<code class="codeph">SQL Loader Conventional Path Load</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>在SQL * Plus中，确保当前容器是应用程序根目录。</span></li>
                        <li class="stepexpand"><span>通过运行以下过程设置正确的模块：</span><div><code class="codeph">exec DBMS_APPLICATION_INFO.SET_MODULE（'SQL Loader常规路径加载'，''）;</code></div>
                           <div>必须为整个应用程序的安装，升级或修补操作保留此模块。</div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN</code>语句以开始应用程序安装，升级或修补程序。</span><div>例如，如果要在应用程序安装过程中执行批量插入，请按以下格式运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN INSTALL</code>语句：</div>
                           <div><code class="codeph">ALTER PLUGGABLE DATABASE应用<span class="codeinlineitalic">APPLICATION_NAME</span> BEGIN INSTALL <span class="codeinlineitalic">'application_version_number';</span></code></div>
                        </li>
                        <li class="stepexpand"><span>使用SQL * Loader执行传统的路径加载。</span></li>
                        <li class="stepexpand"><span>运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END</code>语句以结束应用程序安装，升级或修补程序。</span><div>例如，如果要在应用程序安装过程中执行批量插入，请按以下格式运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END INSTALL</code>语句：</div>
                           <div><code class="codeph">ALTER PLUGGABLE DATABASE应用<span class="codeinlineitalic">APPLICATION_NAME</span> END INSTALL <span class="codeinlineitalic">'application_version_number';</span></code></div>
                           <div>
                              <div class="infoboxnote" id="GUID-68C91677-24C7-4983-80F0-A94F0B6C2898__GUID-5A13D1D5-CD0B-4429-93DA-5FFB69A0F981">
                                 <p class="notep1">注意：</p>
                                 <p>确保<code class="codeph"><span class="codeinlineitalic">application_name</span></code>和<code class="codeph"><span class="codeinlineitalic">application_version_number</span></code>在<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN INSTALL</code>语句和<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END INSTALL</code>语句中<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END INSTALL</code> 。
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>通过发出带有<code class="codeph">SYNC</code>子句的<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句， <code class="codeph">SYNC</code>必须包含这些应用程序更改的所有应用程序PDB。</span></li>
                     </ol>
                     <div class="example" id="GUID-68C91677-24C7-4983-80F0-A94F0B6C2898__GUID-4B508C0F-1866-4C7D-B204-4D84964C3FB3">
                        <p class="titleinexample">示例17-8在应用程序安装期间执行常规路径加载</p>
                        <p>在此示例中，传统路径加载在应用程序根目录中执行。</p>
                        <ol>
                           <li>
                              <p>在SQL * Plus中，切换到应用程序根目录。</p><pre class="pre codeblock"><code>ALTER SESSION SET CONTAINER = cdb1_approot1;</code></pre></li>
                           <li>
                              <p>设置正确的模块。</p><pre class="pre codeblock"><code>exec DBMS_APPLICATION_INFO.SET_MODULE（'SQL Loader常规路径加载'，''）;</code></pre></li>
                           <li>
                              <p>启动应用程序安装。</p><pre class="pre codeblock"><code>ALTER PLOGGABLE DATABASE APPLICATION APP1开始安装'1';</code></pre></li>
                           <li>
                              <p>使用SQL * Loader执行常规路径加载。</p><pre class="pre codeblock"><code>host sqlldr u1 / u1 @ cdb1_approot1 control = my_bulk_load.ctl rows = 3 log = my_bulk_load.log</code></pre></li>
                           <li>
                              <p>结束应用程序安装。</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE APPLICATION APP1 END INSTALL'1';</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-68C91677-24C7-4983-80F0-A94F0B6C2898__GUID-266EA992-C38C-49D4-99F6-C792192E824C">
                        <p class="notep1">也可以看看：</p>有关SQL * Loader的信息，请参见<a href="../sutil/oracle-sql-loader-concepts.html#SUTIL003" target="_blank"><span><cite>Oracle数据库实用</cite></span></a>程序</div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-EB81A80C-FA22-4D9B-A69D-7E2C8FB5E854" title="您可以在应用程序容器中安装，升级或修补应用程序。">管理应用程序容器中的应用程序</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-68C8CA30-B1F7-4DB1-BC1C-0F60A521D887" name="GUID-68C8CA30-B1F7-4DB1-BC1C-0F60A521D887"></a><h4 id="MULTI-GUID-68C8CA30-B1F7-4DB1-BC1C-0F60A521D887" class="sect4"><span class="enumeration_section">17.3.10</span>从应用程序容器中卸载应用程序</h4>
                  <div>
                     <p>您可以在应用程序容器中卸载应用程序。</p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-B96BD4C3-992A-497D-8654-627D620CB76A">关于从应用程序容器中卸载应用程序</a><br>您发出<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句以从应用程序根目录卸载应用程序。
                        </li>
                        <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-4BD2EA09-F73D-497A-A752-4C5DB56884FE">从应用程序容器中卸载应用程序</a><br>要从应用程序容器中卸载应用程序，请运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN UNINSTALL</code>语句以开始卸载，并运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END UNINSTALL</code>语句以结束它。从应用程序PDB中卸载的应用程序与应用程序根目录中的应用程序同步。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-EB81A80C-FA22-4D9B-A69D-7E2C8FB5E854" title="您可以在应用程序容器中安装，升级或修补应用程序。">管理应用程序容器中的应用程序</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-B96BD4C3-992A-497D-8654-627D620CB76A" name="GUID-B96BD4C3-992A-497D-8654-627D620CB76A"></a><h5 id="MULTI-GUID-B96BD4C3-992A-497D-8654-627D620CB76A" class="sect5"><span class="enumeration_section">17.3.10.1</span>关于从应用程序容器中卸载应用程序</h5>
                     <div>
                        <p>您发出<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句以从应用程序根目录卸载应用程序。
                        </p>
                        <p>您只从应用程序根目录卸载应用程序，与应用程序同步的应用程序PDB会自动卸载应用程序。可以使用以下一个或多个来完成卸载操作：脚本，SQL语句和图形用户界面工具。</p>
                        <p>必须使用<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN UNINSTALL</code>语句指示卸载的开始，并使用<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END UNINSTALL</code>语句<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END UNINSTALL</code>卸载的<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END UNINSTALL</code> 。每次卸载都必须与应用程序名称和版本号相关联，这些名称和版本号在<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句中指定。
                        </p>
                        <p>卸载应用程序不会从数据字典中删除该应用程序。它将应用程序标记为<code class="codeph">UNINSTALLED</code>以便不允许升级，修补和卸载应用程序。
                        </p>
                        <p>在卸载应用程序期间，允许对应用程序对象进行破坏性更改。在应用程序PDB中运行的应用程序在卸载期间以及从应用程序根目录卸载应用程序后继续运行。应用程序可以继续在应用程序PDB中运行，因为<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN UNINSTALL</code>语句创建了一个名为应用程序根克隆的应用程序根的克隆。应用程序根克隆充当旧版本应用程序对象的元数据存储库，以便尚未与应用程序的最新版本同步的应用程序PDB可以继续运行。由于克隆是在应用程序PDB打开时创建的，因此必须先在CDB级别配置本地撤消，然后才能卸载应用程序。
                        </p>
                        <div class="infoboxnote" id="GUID-B96BD4C3-992A-497D-8654-627D620CB76A__GUID-7C3EF7BD-0A06-4772-8032-D859EE849743">
                           <p class="notep1">注意：</p>
                           <p>应用程序升级还会创建应用程序根克隆。</p>
                        </div>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-B96BD4C3-992A-497D-8654-627D620CB76A__GUID-6A3DC810-D9F1-4D96-AF66-0856C2B2E913">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="administering-application-containers-with-sql-plus.html#GUID-46D899D7-C52C-4C50-B1B9-BF851D907DE3" title="您发出ALTER PLUGGABLE DATABASE APPLICATION语句以升级应用程序根目录中的应用程序。">关于在应用程序容器中升级应用程序</a> ”</span>以获取有关应用程序根克隆的信息</p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-E307DC5F-52A9-4B1B-8999-3E60867009D4" title="您可以使用catcon.pl脚本在CDB中运行Oracle提供的SQL或SQL脚本。您可以针对任何指定的容器运行脚本。">在CDB中运行Oracle提供的SQL脚本</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-68C8CA30-B1F7-4DB1-BC1C-0F60A521D887" title="您可以在应用程序容器中卸载应用程序。">从应用程序容器中卸载应用程序</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-4BD2EA09-F73D-497A-A752-4C5DB56884FE" name="GUID-4BD2EA09-F73D-497A-A752-4C5DB56884FE"></a><h5 id="MULTI-GUID-4BD2EA09-F73D-497A-A752-4C5DB56884FE" class="sect5"><span class="enumeration_section">17.3.10.2</span>从应用程序容器中卸载应用程序</h5>
                     <div>
                        <p>要从应用程序容器中卸载应用程序，请运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN UNINSTALL</code>语句以开始卸载，并运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END UNINSTALL</code>语句以结束它。从应用程序PDB中卸载的应用程序与应用程序根目录中的应用程序同步。
                        </p>
                        <div class="p">必须满足以下先决条件：<ul style="list-style-type:disc">
                              <li>
                                 <p>CDB必须处于本地撤消模式。</p>
                              </li>
                              <li>
                                 <p>当前用户必须具有<code class="codeph">ALTER PLUGGABLE DATABASE</code>系统特权，并且必须在应用程序根目录中通常授予该特权。
                                 </p>
                              </li>
                              <li>
                                 <p>应用程序root必须处于打开的读/写模式。</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>在SQL * Plus中，确保当前容器是应用程序根目录。</span></li>
                           <li class="stepexpand"><span>以下面的形式运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN UNINSTALL</code>语句：</span><div><code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION <span class="codeinlineitalic">application_name</span> BEGIN UNINSTALL;</code></div>
                              <div>例如，如果<span class="italic">application_name</span>是<code class="codeph">salesapp</code> ，请运行以下语句：</div>
                              <div><code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION salesapp BEGIN UNINSTALL;</code></div>
                           </li>
                           <li class="stepexpand"><span>使用脚本，SQL语句或图形用户界面工具卸载应用程序。</span></li>
                           <li class="stepexpand"><span>以下面的形式运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END UNINSTALL</code>语句：</span><div><code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION <span class="codeinlineitalic">application_name</span> END UNINSTALL;</code></div>
                              <div>例如，如果<span class="italic">application_name</span>是<code class="codeph">salesapp</code> ，请运行以下语句：</div>
                              <div><code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION salesapp END UNINSTALL;</code><div class="infoboxnote" id="GUID-4BD2EA09-F73D-497A-A752-4C5DB56884FE__GUID-FEEBF228-23E5-4E2A-B7CC-F7196F981B4F">
                                    <p class="notep1">注意：</p>确保<span class="italic">application_name</span>在<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN UNINSTALL</code>语句和<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END UNINSTALL</code>语句中<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END UNINSTALL</code> 。
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>通过发出带有<code class="codeph">SYNC</code>子句的<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句来<code class="codeph">SYNC</code>必须卸载应用程序的所有应用程序PDB。</span></li>
                        </ol>
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-4BD2EA09-F73D-497A-A752-4C5DB56884FE__GUID-6F013176-6D64-4C88-9A63-CC267A371288">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-90C01374-20C9-41A2-AC6D-808F78AA51D3" title="通过发出CONNECT或ALTER SESSION命令，使用SQL * Plus访问CDB中的容器。">访问CDB中的容器</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="administering-application-containers-with-sql-plus.html#GUID-27A78D0C-B90B-4BB9-A8D2-787353A667B1" title="同步应用程序会将应用程序PDB中的应用程序更新为应用程序根目录中的最新版本和修补程序。">在应用程序PDB中同步应用程序</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-24EA5811-94F0-4EEC-864F-23AEF48F2D51" title="启用本地撤消后，每个容器都有自己的撤消表空间，用于打开它的每个实例。禁用本地撤消后，整个CDB都有一个撤消表空间。">使用ALTER DATABASE在CDB中设置撤消模式</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-68C8CA30-B1F7-4DB1-BC1C-0F60A521D887" title="您可以在应用程序容器中卸载应用程序。">从应用程序容器中卸载应用程序</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-DC57BCFA-8DC5-46B6-809F-E3570F44D801" name="GUID-DC57BCFA-8DC5-46B6-809F-E3570F44D801"></a><h3 id="MULTI-GUID-DC57BCFA-8DC5-46B6-809F-E3570F44D801" class="sect3"><span class="enumeration_section">17.4</span>管理应用程序通用对象</h3>
               <div>
                  <p>应用程序公共对象是应用程序容器中的用户创建的数据库对象。应用程序公共对象在应用程序根目录中创建。</p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-76B6E6D4-F478-4EBE-9D9D-D10758835192">关于应用程序通用对象</a><br>应用程序公共对象在应用程序根目录中创建，并与属于应用程序根目录的应用程序PDB共享。
                     </li>
                     <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-E2EC4CD0-1C25-4E24-ABB5-663C8ADC7887">应用程序通用对象的限制</a><br>某些限制适用于应用程序常见对象。
                     </li>
                     <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-388FB5AD-A2DE-4951-833B-A98239F99F50">创建应用程序公共对象</a><br>通过确保将<code class="codeph">DEFAULT_SHARING</code>初始化参数设置为正确的值或在<code class="codeph">CREATE</code> SQL语句中包含<code class="codeph">SHARING</code>子句，可以在应用程序根目录中创建应用程序公共对象。
                     </li>
                     <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-25CDD5E1-2C31-45FE-B618-A51B57B1ED5E">在应用程序公共对象上发出DML语句</a><br>对于在元数据链接，数据链接和扩展数据链接的应用程序公共对象上发布DML语句，规则是不同的。
                     </li>
                     <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-B855567C-DE8D-4015-B3E1-86906EE1D119">使用DDL语句修改应用程序公共对象</a><br>使用某些DDL语句修改应用程序根目录中的应用程序公共对象时，必须在<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN</code>和<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END</code>语句之间修改对象，并且应用程序PDB必须与应用程序同步才能应用更改。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-1AFD0268-6A2B-4F84-BB4D-4D36976DE53B" title="您可以管理应用程序容器，包括应用程序根和应用程序PDB。您还可以管理应用程序容器中安装的应用程序。">管理应用程序容器</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-76B6E6D4-F478-4EBE-9D9D-D10758835192" name="GUID-76B6E6D4-F478-4EBE-9D9D-D10758835192"></a><h4 id="MULTI-GUID-76B6E6D4-F478-4EBE-9D9D-D10758835192" class="sect4"><span class="enumeration_section">17.4.1</span>关于应用程序通用对象</h4>
                  <div>
                     <p>应用程序公共对象在应用程序根目录中创建，并与属于应用程序根目录的应用程序PDB共享。</p>
                     <p>应用程序通用对象有三种类型：元数据链接，数据链接和扩展数据链接。以下类型的数据库对象可以是应用程序公共对象：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>分析观点</p>
                        </li>
                        <li>
                           <p>属性维度</p>
                        </li>
                        <li>
                           <p>目录</p>
                        </li>
                        <li>
                           <p>外部程序库</p>
                        </li>
                        <li>
                           <p>层次结构</p>
                        </li>
                        <li>
                           <p>Java类，资源和源</p>
                        </li>
                        <li>
                           <p>对象表，类型和视图</p>
                        </li>
                        <li>
                           <p>序列</p>
                        </li>
                        <li>
                           <p>包，存储函数和存储过程</p>
                        </li>
                        <li>
                           <p>同义词</p>
                        </li>
                        <li>
                           <p>表（包括全局临时表）</p>
                        </li>
                        <li>
                           <p>触发器</p>
                        </li>
                        <li>
                           <p>查看</p>
                        </li>
                     </ul>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-79FA6940-4AEC-4BFC-8A92-64F52A8B01B0">创建应用程序通用对象</a><br>当前容器是应用程序根目录并指定<code class="codeph">SHARING</code>子句时，通过发出<code class="codeph">CREATE</code>语句来创建应用程序公共对象。
                        </li>
                        <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-09CA0C57-08FA-40DF-8598-5F2CC8C583B4">关于元数据链接的应用程序通用对象</a><br>对于元数据链接的应用程序公共对象，对象的元数据在应用程序根目录中存储一次。
                        </li>
                        <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-4D88D3B1-9C42-4862-80B3-3FF6733E36D7">关于扩展数据链接的应用程序通用对象</a><br>对于数据链接的应用程序公共对象，对象的元数据和数据都在应用程序根目录中存储一次。属于应用程序根的每个应用程序PDB中的数据链接使应用程序PDB能够共享对象的元数据和数据。
                        </li>
                        <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-07E47E6E-3AC9-44B2-AF62-409D37CC8145">关于扩展数据链接的应用程序通用对象</a><br>对于扩展的数据链接对象，每个应用程序PDB可以在共享应用程序根目录中的公共数据的同时创建自己的数据。只有存储在应用程序根目录中的数据对于所有应用程序PDB都是通用的。
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-76B6E6D4-F478-4EBE-9D9D-D10758835192__GUID-A73BB5F7-72DE-43F8-845F-D61A2F99A124">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="overview-of-the-multitenant-architecture.html#GUID-9900D18F-989B-4746-A5CE-04A8D9F9751C" title="应用程序公共对象是在应用程序根目录中的应用程序中创建的公共对象。公共对象是数据链接的或元数据链接的。">应用程序通用对象</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-DC57BCFA-8DC5-46B6-809F-E3570F44D801" title="应用程序公共对象是应用程序容器中的用户创建的数据库对象。应用程序公共对象在应用程序根目录中创建。">管理应用程序公共对象</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-79FA6940-4AEC-4BFC-8A92-64F52A8B01B0" name="GUID-79FA6940-4AEC-4BFC-8A92-64F52A8B01B0"></a><h5 id="MULTI-GUID-79FA6940-4AEC-4BFC-8A92-64F52A8B01B0" class="sect5"><span class="enumeration_section">17.4.1.1</span>创建应用程序通用对象</h5>
                     <div>
                        <p>当前容器是应用程序根目录并指定<code class="codeph">SHARING</code>子句时，通过发出<code class="codeph">CREATE</code>语句来创建应用程序公共对象。
                        </p>
                        <p>您可以通过在<code class="codeph">CREATE</code>语句中包含<code class="codeph">SHARING</code>子句或在应用程序根目录中设置<code class="codeph">DEFAULT_SHARING</code>初始化参数来指定共享属性。设置<code class="codeph">DEFAULT_SHARING</code>初始化参数时，该设置是应用程序根目录中创建的受支持类型的所有数据库对象的默认共享属性。但是，当<code class="codeph">CREATE</code>语句中包含<code class="codeph">SHARING</code>子句时，其设置将覆盖<code class="codeph">DEFAULT_SHARING</code>初始化参数的设置。
                        </p>
                        <p>您可以为共享属性指定以下其中一项：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">METADATA</code> ：元数据链接共享数据库对象的元数据，但其数据对每个容器都是唯一的。这些数据库对象称为元数据链接的应用程序公共对象。此设置是默认设置。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">DATA</code> ：数据链接共享数据库对象，其数据对于应用程序容器中的所有容器都是相同的。其数据仅存储在应用程序根目录中。这些数据库对象称为数据链接的应用程序公共对象。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">EXTENDED DATA</code> ：扩展数据链接共享数据库对象，应用程序根目录中的数据对应用程序容器中的所有容器都是相同的。但是，应用程序容器中的每个应用程序PDB都可以存储应用程序PDB唯一的数据。对于这种类型的数据库对象，数据存储在应用程序根目录中，并且可选地存储在每个应用程序PDB中。这些数据库对象称为扩展数据链接的应用程序公共对象。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">NONE</code> ：不共享数据库对象。
                              </p>
                           </li>
                        </ul>
                        <p>对于大多数类型的应用程序公共对象， <code class="codeph">SHARING</code>子句的唯一有效设置是<code class="codeph">METADATA</code>和<code class="codeph">NONE</code> 。以下类型的应用程序公共对象允许对<code class="codeph">SHARING</code>子句进行其他设置：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对于表（不包括对象表）， <code class="codeph">SHARING</code>子句可以设置为<code class="codeph">METADATA</code> ， <code class="codeph">DATA</code> ， <code class="codeph">EXTENDED DATA</code>或<code class="codeph">NONE</code> 。对于对象表，只有<code class="codeph">METADATA</code>或<code class="codeph">NONE</code>有效。
                              </p>
                           </li>
                           <li>
                              <p>对于视图（不包括对象视图）， <code class="codeph">SHARING</code>子句可以设置为<code class="codeph">METADATA</code> ， <code class="codeph">DATA</code> ， <code class="codeph">EXTENDED DATA</code>或<code class="codeph">NONE</code> 。对于对象视图，只有<code class="codeph">METADATA</code>或<code class="codeph">NONE</code>有效。
                              </p>
                           </li>
                           <li>
                              <p>对于序列， <code class="codeph">SHARING</code>子句可以设置为<code class="codeph">METADATA</code> ， <code class="codeph">DATA</code>或<code class="codeph">NONE</code> 。</p>
                              <p>使用元数据链接序列，每个应用程序PDB都有自己的序列。当在一个应用程序PDB中使用<code class="codeph">NEXTVAL</code>伪列递增元数据链接序列时，它不影响应用程序容器中的其他应用程序PDB中的序列的值。
                              </p>
                              <p>使用数据链接序列，每个应用程序PDB在应用程序根目录中共享相同的序列。当使用一个应用程序PDB中的<code class="codeph">NEXTVAL</code>伪列递增元数据链接序列时，同一应用程序容器中的所有其他应用程序PDB也会看到该更改。
                              </p>
                           </li>
                        </ul>
                        <p>应用程序公共对象只能作为应用程序安装，升级或修补程序的一部分创建或更改。应用程序PDB在与进行更改的应用程序同步时将更改应用于应用程序公共对象。如果在创建，删除或修改应用程序公共对象时关闭应用程序PDB，则在应用程序PDB打开并与应用程序同步时，将在应用程序PDB中应用相应的更改。</p>
                        <p>应用程序公共对象的名称不得与属于应用程序根目录的任何应用程序PDB中的本地数据库对象的名称或CDB根目录中Oracle提供的公共对象的名称冲突。如果新打开的应用程序PDB包含名称与应用程序公共对象的名称冲突的本地数据库对象，则应用程序PDB将以<code class="codeph">RESTRICTED</code>模式打开。在这种情况下，必须先解决命名冲突，然后才能在正常模式下打开应用程序PDB。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-76B6E6D4-F478-4EBE-9D9D-D10758835192" title="应用程序公共对象在应用程序根目录中创建，并与属于应用程序根目录的应用程序PDB共享。">关于应用程序通用对象</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-09CA0C57-08FA-40DF-8598-5F2CC8C583B4" name="GUID-09CA0C57-08FA-40DF-8598-5F2CC8C583B4"></a><h5 id="MULTI-GUID-09CA0C57-08FA-40DF-8598-5F2CC8C583B4" class="sect5"><span class="enumeration_section">17.4.1.2</span>关于元数据链接的应用程序通用对象</h5>
                     <div>
                        <p>对于元数据链接的应用程序公共对象，对象的元数据在应用程序根目录中存储一次。</p>
                        <p>属于应用程序根目录的每个应用程序PDB中的元数据链接使应用程序PDB能够共享对象的元数据，包括对象名称和结构。对象的数据对于每个容器都是唯一的，包括应用程序根和属于应用程序根的每个应用程序PDB。</p>
                        <p>元数据链接的应用程序公共对象上的数据定义语言（DDL）操作只能作为应用程序安装，升级或修补程序的一部分在应用程序根目录中运行。但是，可以使用常规数据操作语言（DML）操作在应用程序PDB中修改数据。</p>
                        <p>例如，考虑一家拥有多个地区办事处的公司。公司希望员工信息的结构保持一致，但每个办公室都有不同的员工。如果该公司在应用程序容器中具有人力资源应用程序，则它可以为每个区域办事处创建单独的应用程序PDB，并使用元数据链接表来存储员工信息。表的数据结构（例如列）在每个区域办事处的应用程序PDB中是相同的，但员工数据是不同的。</p>
                        <p>另一个例子可能涉及建立和维护由几个不同企业使用的销售应用程序的公司。每个企业使用相同的销售应用程序，但每个企业的数据不同。例如，每个企业都有不同的客户，因此客户数据也不同。为了确保每个客户端为其应用程序使用相同的数据结构，公司可能会创建一个包含元数据链接的应用程序公共对象的应用程序容器。使用销售应用程序的每个企业都有自己的应用程序PDB，每个应用程序PDB中的数据结构相同，但数据不同。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-76B6E6D4-F478-4EBE-9D9D-D10758835192" title="应用程序公共对象在应用程序根目录中创建，并与属于应用程序根目录的应用程序PDB共享。">关于应用程序通用对象</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-4D88D3B1-9C42-4862-80B3-3FF6733E36D7" name="GUID-4D88D3B1-9C42-4862-80B3-3FF6733E36D7"></a><h5 id="MULTI-GUID-4D88D3B1-9C42-4862-80B3-3FF6733E36D7" class="sect5"><span class="enumeration_section">17.4.1.3</span>关于扩展数据链接应用程序通用对象</h5>
                     <div>
                        <p>对于数据链接的应用程序公共对象，对象的元数据和数据都在应用程序根目录中存储一次。属于应用程序根的每个应用程序PDB中的数据链接使应用程序PDB能够共享对象的元数据和数据。</p>
                        <p>对数据链接的应用程序公共对象的DDL操作只能作为应用程序安装，升级或修补程序的一部分在应用程序根目录中运行。此外，只能在应用程序根目录中使用常规DML操作修改数据。应用程序PDB中无法修改数据。</p>
                        <p>例如，考虑一家拥有多个地区办事处的公司。公司希望所有区域办事处能够保持有关其销售产品的信息（例如产品名称和描述）的一致性。如果该公司在应用程序容器中具有销售应用程序，则它可以为每个区域办事处创建单独的应用程序PDB，并使用数据链接表来存储产品信息。每个应用程序PDB都可以查询产品信息，并且每个区域办事处的产品信息都是一致的。</p>
                        <p>数据链接的应用程序公共对象对于标准且不会更改的数据也很有用。例如，存储国家/地区的邮政编码的表可能是应用程序容器中的数据链接的应用程序公共对象。所有应用程序PDB都在应用程序根目录中访问相同的邮政编码数据。</p>
                        <div class="infoboxnote" id="GUID-4D88D3B1-9C42-4862-80B3-3FF6733E36D7__GUID-D3311D1D-99CE-4290-A5A1-89489C7569BD">
                           <p class="notep1">注意：</p>
                           <p>如果数据链接的应用程序公共对象是将应用程序根副本与代理PDB同步的配置的一部分，那么应用程序根目录中的数据链接对象的DML操作可以在应用程序操作之外完成，但是DML操作不会通过代理PDB自动传播到应用程序根复制。如果希望将DML操作传播到应用程序根副本，则必须在应用程序安装，升级或修补程序中对应用程序根目录中的数据链接对象执行DML操作。</p>
                        </div>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-76B6E6D4-F478-4EBE-9D9D-D10758835192" title="应用程序公共对象在应用程序根目录中创建，并与属于应用程序根目录的应用程序PDB共享。">关于应用程序通用对象</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-07E47E6E-3AC9-44B2-AF62-409D37CC8145" name="GUID-07E47E6E-3AC9-44B2-AF62-409D37CC8145"></a><h5 id="MULTI-GUID-07E47E6E-3AC9-44B2-AF62-409D37CC8145" class="sect5"><span class="enumeration_section">17.4.1.4</span>关于扩展数据链接应用程序通用对象</h5>
                     <div>
                        <p>对于扩展的数据链接对象，每个应用程序PDB可以在共享应用程序根目录中的公共数据的同时创建自己的数据。只有存储在应用程序根目录中的数据对于所有应用程序PDB都是通用的。</p>
                        <p>扩展数据链接应用程序公共对象上的DDL操作只能作为应用程序安装，升级或修补程序的一部分在应用程序根目录中运行。但是，可以使用常规DML操作在应用程序根目录或应用程序PDB中修改数据。</p>
                        <p>例如，应用程序容器中的销售应用程序可能支持多个应用程序PDB，并且所有应用程序PDB都需要美国的邮政编码用于运输目的。在这种情况下，邮政编码可以存储在应用程序根目录中，以便所有应用程序PDB都可以访问它。但是，一个应用程序PDB也在加拿大销售，而此应用程序PDB需要美国和加拿大的邮政编码。这个应用程序PDB可以将加拿大的邮政编码存储在应用程序PDB中的扩展数据链接对象中，而不是存储在应用程序根目录中。</p>
                        <div class="infoboxnote" id="GUID-07E47E6E-3AC9-44B2-AF62-409D37CC8145__GUID-91E47381-8FCC-4F34-85AC-315487078BC2">
                           <p class="notep1">注意：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>表和视图是可以是扩展数据链接对象的唯一数据库对象类型。</p>
                              </li>
                              <li>
                                 <p>如果扩展的数据链接应用程序公共对象是将应用程序根副本与代理PDB同步的配置的一部分，则应用程序根目录中的扩展数据链接对象上的DML操作可以在应用程序操作之外完成，但是DML操作不会通过代理PDB自动传播到应用程序根复制。如果希望将DML操作传播到应用程序根副本，则必须在应用程序安装，升级或修补程序中对应用程序根目录中的扩展数据链接对象执行DML操作。</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-76B6E6D4-F478-4EBE-9D9D-D10758835192" title="应用程序公共对象在应用程序根目录中创建，并与属于应用程序根目录的应用程序PDB共享。">关于应用程序通用对象</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-E2EC4CD0-1C25-4E24-ABB5-663C8ADC7887" name="GUID-E2EC4CD0-1C25-4E24-ABB5-663C8ADC7887"></a><h4 id="MULTI-GUID-E2EC4CD0-1C25-4E24-ABB5-663C8ADC7887" class="sect4"><span class="enumeration_section">17.4.2</span>应用程序通用对象的限制</h4>
                  <div>
                     <p>某些限制适用于应用程序常见对象。</p>
                     <p>对应用程序公共对象的查询可以从不是当前容器的容器返回数据。例如，当前容器是应用程序根时，包含<code class="codeph">CONTAINERS</code>子句的查询可以从应用程序PDB返回与元数据链接的应用程序公共对象的数据。此外，当前容器是应用程序PDB时，对数据链接和扩展数据链接的应用程序公共对象的查询将返回驻留在应用程序根目录中的数据。
                     </p>
                     <p>以下类型的列在从当前容器以外的容器返回数据的查询中不返回任何数据：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>以下用户定义的类型：对象类型，varrays，REF和嵌套表</p>
                        </li>
                        <li>
                           <p>以下Oracle提供的类型： <code class="codeph">ANYTYPE</code> ， <code class="codeph">ANYDATASET</code> ，URI类型， <code class="codeph">SDO_TOPO_GEOMETRY</code> ， <code class="codeph">SDO_GEORASTER</code>和<code class="codeph">Expression</code></p>
                        </li>
                     </ul>
                     <p>此外，对象表和对象视图的查询不会返回当前容器以外的容器中的数据。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="viewing-information-about-cdbs-and-pdbs-with-sql-plus.html#GUID-7B4E4926-19C6-47A5-A4E3-6BD279F080F0" title="CONTAINERS子句使您可以在应用程序容器中的所有PDB中查询应用程序公共对象。来自应用程序根目录的查询显示容器中所有打开的PDB中存在的对象中的数据。">查询应用程序PDB中的应用程序公共对象</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-DC57BCFA-8DC5-46B6-809F-E3570F44D801" title="应用程序公共对象是应用程序容器中的用户创建的数据库对象。应用程序公共对象在应用程序根目录中创建。">管理应用程序公共对象</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-388FB5AD-A2DE-4951-833B-A98239F99F50" name="GUID-388FB5AD-A2DE-4951-833B-A98239F99F50"></a><h4 id="MULTI-GUID-388FB5AD-A2DE-4951-833B-A98239F99F50" class="sect4"><span class="enumeration_section">17.4.3</span>创建应用程序通用对象</h4>
                  <div>
                     <p>通过确保将<code class="codeph">DEFAULT_SHARING</code>初始化参数设置为正确的值或在<code class="codeph">CREATE</code> SQL语句中包含<code class="codeph">SHARING</code>子句，可以在应用程序根目录中创建应用程序公共对象。
                     </p>
                     <div class="section">您可以在应用程序根目录中创建元数据链接对象，扩展数据链接对象或数据链接对象，作为应用程序安装，升级或修补程序的一部分。应用程序PDB在与应用程序根目录中的应用程序同步时将更改应用于应用程序公共对象。</div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>在SQL * Plus中，确保当前容器是应用程序根目录。</span><div>当前用户必须具有创建数据库对象所需的权限。</div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN</code>语句以开始应用程序安装，升级或修补程序。</span><div>例如，如果<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN INSTALL</code>程序公共对象创建为应用程序安装的一部分，请按以下格式运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN INSTALL</code>语句：</div>
                           <div><code class="codeph">ALTER PLUGGABLE DATABASE应用<span class="codeinlineitalic">APPLICATION_NAME</span> BEGIN INSTALL <span class="codeinlineitalic">'application_version_number';</span></code></div>
                        </li>
                        <li class="stepexpand"><span>创建应用程序公共对象并使用以下方法之一指定其共享属性：</span><ul>
                              <li>确保将<code class="codeph">DEFAULT_SHARING</code>初始化参数设置为应用程序根目录中的所需共享属性，并发出<code class="codeph">CREATE</code> SQL语句以创建数据库对象。
                              </li>
                              <li>发出<code class="codeph">CREATE</code> SQL语句，并将<code class="codeph">SHARING</code>子句设置为<code class="codeph">METADATA</code> ， <code class="codeph">DATA</code>或<code class="codeph">EXTENDED DATA</code> 。</li>
                           </ul>
                           <div>当<code class="codeph">SHARING</code>子句包含在SQL语句中时，它优先于<code class="codeph">DEFAULT_SHARING</code>初始化参数中指定的值。例如，如果在应用程序根目录中将<code class="codeph">DEFAULT_SHARING</code>初始化参数设置为<code class="codeph">METADATA</code> ，并且在将<code class="codeph">SHARING</code>设置为<code class="codeph">DATA</code>情况下创建数据库对象，则会将数据库对象创建为数据链接的数据库对象。
                              <div class="infoboxnote" id="GUID-388FB5AD-A2DE-4951-833B-A98239F99F50__GUID-890629AF-EC1A-4DA5-A2C2-B2ECF8776716">
                                 <p class="notep1">注意：</p>创建数据库对象后，无法更改其共享属性。
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END</code>语句以结束应用程序安装，升级或修补程序。</span><div>例如，如果<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END INSTALL</code>程序公共对象创建为应用程序安装的一部分，请按以下格式运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END INSTALL</code>语句：</div>
                           <div><code class="codeph">ALTER PLUGGABLE DATABASE应用<span class="codeinlineitalic">APPLICATION_NAME</span> END INSTALL <span class="codeinlineitalic">'application_version_number';</span></code><div class="infoboxnote" id="GUID-388FB5AD-A2DE-4951-833B-A98239F99F50__GUID-FEEBF228-23E5-4E2A-B7CC-F7196F981B4F">
                                 <p class="notep1">注意：</p>确保<span class="italic">application_name</span>和<span class="italic">application_version_number</span>在<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN INSTALL</code>语句和<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END INSTALL</code>语句中<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END INSTALL</code> 。
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>通过发出带有<code class="codeph">SYNC</code>子句且应用程序PDB作为当前容器的<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句， <code class="codeph">SYNC</code>必须应用这些更改的所有应用程序PDB。</span></li>
                     </ol>
                     <div class="example" id="GUID-388FB5AD-A2DE-4951-833B-A98239F99F50__GUID-E008F122-E344-4A3B-9D12-D3DDD24E31FF">
                        <p class="titleinexample">示例17-9设置<code class="codeph">DEFAULT_SHARING</code>初始化参数</p>
                        <p>此示例在内存和SPFILE中将<code class="codeph">DEFAULT_SHARING</code>初始化参数设置为<code class="codeph">DATA</code> 。如果在应用程序根目录中创建了支持共享的数据库对象，并且<code class="codeph">CREATE</code> SQL语句中不包含<code class="codeph">SHARING</code>子句，则数据库对象将使用<code class="codeph">DEFAULT_SHARING</code>初始化参数中指定的共享属性。
                        </p><pre class="pre codeblock"><code>ALTER SYSTEM SET DEFAULT_SHARING = DATA SCOPE = BOTH;</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-388FB5AD-A2DE-4951-833B-A98239F99F50__GUID-21BB7989-8C9D-434E-8725-C41C6E4BD9DD">
                        <p class="titleinexample">示例17-10创建元数据链接对象</p>
                        <p>此示例通过包含<code class="codeph">SHARING=METADATA</code>子句来创建<code class="codeph">employees_md</code>元数据链接表。<span class="italic">application_name</span>是<code class="codeph">salesapp</code> ， <span class="italic">application_version_number</span>是4.2，并且在应用程序安装期间创建对象。
                        </p><pre class="pre codeblock"><code>ALTER PLOGGABLE DATABASE APPLICATION salesapp BEGIN INSTALL'4.2'; CREATE TABLE employees_md SHARING = METADATA（employee_id NUMBER（6），first_name VARCHAR2（20），last_name VARCHAR2（25）CONSTRAINT emp_last_name_nn_demo NOT NULL，email VARCHAR2（25）CONSTRAINT emp_email_nn_demo NOT NULL，phone_number VARCHAR2（20），hire_date DATE DEFAULT SYSDATE CONSTRAINT emp_hire_date_nn_demo NOT NULL，job_id VARCHAR2（10）CONSTRAINT emp_job_nn_demo NOT NULL，工资NUMBER（8,2）CONSTRAINT emp_salary_nn_demo NOT NULL，commission_pct NUMBER（2,2），manager_id NUMBER（6），department_id NUMBER（4），dn VARCHAR2（300 ），CONSTRAINT emp_salary_min_demo CHECK（salary&gt; 0），CONSTRAINT emp_email_uk_demo UNIQUE（email））; ALTER PLUGGABLE DATABASE APPLICATION salesapp END INSTALL'4.2';</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-388FB5AD-A2DE-4951-833B-A98239F99F50__GUID-CF868C3D-5CF5-4AC9-9880-BCBB1AD3F856">
                        <p class="titleinexample">示例17-11创建数据链接对象</p>
                        <p>此示例通过包含<code class="codeph">SHARING=DATA</code>子句来创建<code class="codeph">product_descriptions_ob</code>数据链接表。<span class="italic">application_name</span>是<code class="codeph">salesapp</code> ， <span class="italic">application_version_number</span>是4.2，并且在应用程序安装期间创建对象。
                        </p><pre class="pre codeblock"><code>ALTER PLOGGABLE DATABASE APPLICATION salesapp BEGIN INSTALL'4.2'; CREATE TABLE product_descriptions_ob SHARING = DATA（product_id NUMBER（6），language_id VARCHAR2（3），translated_name NVARCHAR2（50）CONSTRAINT translated_name_nn NOT NULL，translated_description NVARCHAR2（2000）CONSTRAINT translated_desc_nn NOT NULL）; ALTER PLUGGABLE DATABASE APPLICATION salesapp END INSTALL'4.2';</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-388FB5AD-A2DE-4951-833B-A98239F99F50__GUID-530917D1-6543-4023-88C9-FB0A35BABB08">
                        <p class="titleinexample">示例17-12创建扩展数据链接对象</p>
                        <p>此示例通过包含<code class="codeph">EXTENDED</code>关键字和<code class="codeph">SHARING</code>子句来创建<code class="codeph">postalcodes</code>扩展数据链接表。<span class="italic">application_name</span>是<code class="codeph">salesapp</code> ， <span class="italic">application_version_number</span>是4.2，并且在应用程序安装期间创建对象。
                        </p><pre class="pre codeblock"><code>ALTER PLOGGABLE DATABASE APPLICATION salesapp BEGIN INSTALL'4.2'; CREATE TABLE邮政编码SHARING = EXTENDED DATA（代码VARCHAR2（7），country_id NUMBER，place_name VARCHAR2（20））; ALTER PLUGGABLE DATABASE APPLICATION salesapp END INSTALL'4.2';</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-388FB5AD-A2DE-4951-833B-A98239F99F50__GUID-F9B7B8AF-DCDC-49A8-8163-39D6E1415808">
                        <p class="titleinexample">示例17-13创建应用程序根中未共享的对象</p>
                        <p>此示例创建<code class="codeph">departments_ns</code>表，并通过包含<code class="codeph">SHARING=NONE</code>子句指定它不是共享的公共应用程序对象。创建后，只能在应用程序根目录中访问此数据库对象。
                        </p><pre class="pre codeblock"><code>CREATE TABLE departments_ns SHARING = NONE（department_id NUMBER（4），department_name VARCHAR2（30）CONSTRAINT dept_name_nn NOT NULL，manager_id NUMBER（6），location_id NUMBER（4），dn VARCHAR2（300））;</code></pre><div class="infoboxnote" id="GUID-388FB5AD-A2DE-4951-833B-A98239F99F50__GUID-E48B3955-D456-4090-8376-618C8BF60ED6">
                           <p class="notep1">注意：</p>创建不是共享公共对象的对象时，不需要<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN</code>和<code class="codeph">END</code>语句。但是，如果创建在<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN</code>和<code class="codeph">END</code>语句之间未共享的对象，则在与应用程序同步的应用程序PDB中创建对象。
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="administering-application-containers-with-sql-plus.html#GUID-EB81A80C-FA22-4D9B-A69D-7E2C8FB5E854" title="您可以在应用程序容器中安装，升级或修补应用程序。">管理应用程序容器中的应用程序</a></li>
                           <li><a href="administering-application-containers-with-sql-plus.html#GUID-27A78D0C-B90B-4BB9-A8D2-787353A667B1" title="同步应用程序会将应用程序PDB中的应用程序更新为应用程序根目录中的最新版本和修补程序。">在应用程序PDB中同步应用程序</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-DC57BCFA-8DC5-46B6-809F-E3570F44D801" title="应用程序公共对象是应用程序容器中的用户创建的数据库对象。应用程序公共对象在应用程序根目录中创建。">管理应用程序公共对象</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-25CDD5E1-2C31-45FE-B618-A51B57B1ED5E" name="GUID-25CDD5E1-2C31-45FE-B618-A51B57B1ED5E"></a><h4 id="MULTI-GUID-25CDD5E1-2C31-45FE-B618-A51B57B1ED5E" class="sect4"><span class="enumeration_section">17.4.4</span>在应用程序通用对象上发出DML语句</h4>
                  <div>
                     <p>对于在元数据链接，数据链接和扩展数据链接的应用程序公共对象上发布DML语句，规则是不同的。</p>
                     <div class="section">
                        <p>本节包含以下主题：</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-5D45EBCB-F8A9-4D2A-8F39-DE3CF431DCC4">在元数据链接的公共对象上发布DML</a><br>您可以照常在元数据链接的应用程序对象上发出DML。
                        </li>
                        <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-A8A0B617-56E2-4D29-8C96-D8CA392924AE">在数据链接的公共对象上发布DML</a><br>对于数据链接的应用程序对象，在应用程序根目录中正常发出DML。对于扩展的数据链接应用程序对象，在应用程序根目录和应用程序PDB中正常发出DML。
                        </li>
                     </ul>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="administering-application-containers-with-sql-plus.html#GUID-EB81A80C-FA22-4D9B-A69D-7E2C8FB5E854" title="您可以在应用程序容器中安装，升级或修补应用程序。">管理应用程序容器中的应用程序</a></li>
                           <li><a href="administering-application-containers-with-sql-plus.html#GUID-27A78D0C-B90B-4BB9-A8D2-787353A667B1" title="同步应用程序会将应用程序PDB中的应用程序更新为应用程序根目录中的最新版本和修补程序。">在应用程序PDB中同步应用程序</a></li>
                           <li><a href="administering-application-containers-with-sql-plus.html#GUID-7D442C17-28E6-4337-8EF5-6930FBC0BCC8" title="当不同CDB中的应用程序容器具有相同的应用程序时，可以通过创建主应用程序根，副本应用程序根和代理PDB来保持其应用程序根同步。">将应用程序根副本与代理PDB同步</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-DC57BCFA-8DC5-46B6-809F-E3570F44D801" title="应用程序公共对象是应用程序容器中的用户创建的数据库对象。应用程序公共对象在应用程序根目录中创建。">管理应用程序公共对象</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-5D45EBCB-F8A9-4D2A-8F39-DE3CF431DCC4" name="GUID-5D45EBCB-F8A9-4D2A-8F39-DE3CF431DCC4"></a><h5 id="MULTI-GUID-5D45EBCB-F8A9-4D2A-8F39-DE3CF431DCC4" class="sect5"><span class="enumeration_section">17.4.4.1</span>在元数据链接的公共对象上发布DML</h5>
                     <div>
                        <p>您可以照常在元数据链接的应用程序对象上发出DML。</p>
                        <div class="section">
                           <p>对于元数据链接的应用程序公共对象，对象定义在所有应用程序PDB中都相同，但数据不同。用户和应用程序可以以与普通数据库对象相同的方式在这些对象上发出DML语句。DML仅影响当前容器。</p>
                           <p>本节包含以下主题：</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-20DCAFB9-0075-4668-854E-C6A7D081DF75">使用CONTAINERS子句查询</a><br>对于元数据链接对象， <code class="codeph">CONTAINERS</code>子句使您可以跨应用程序容器中的所有PDB查询表或视图。
                           </li>
                           <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-49887469-07B0-4807-ACF3-F09657A4D1F5">设置默认容器或DML</a><br>您可以在任何元数据链接对象上设置<code class="codeph">CONTAINERS_DEFAULT</code>属性，以便应用程序根目录中发出的DML默认包装在<code class="codeph">CONTAINERS</code>子句中。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-25CDD5E1-2C31-45FE-B618-A51B57B1ED5E" title="对于在元数据链接，数据链接和扩展数据链接的应用程序公共对象上发布DML语句，规则是不同的。">在应用程序公共对象上发出DML语句</a></p>
                           </div>
                        </div>
                     </div>
                     
                     <div class="sect5"><a id="GUID-20DCAFB9-0075-4668-854E-C6A7D081DF75" name="GUID-20DCAFB9-0075-4668-854E-C6A7D081DF75"></a><h6 id="MULTI-GUID-20DCAFB9-0075-4668-854E-C6A7D081DF75" class="sect6"><span class="enumeration_section">17.4.4.1.1</span>使用CONTAINERS子句查询</h6>
                        <div>
                           <p>对于元数据链接对象， <code class="codeph">CONTAINERS</code>子句使您可以跨应用程序容器中的所有PDB查询表或视图。
                           </p>
                           <div class="section">
                              <p>对于元数据链接对象，当在应用程序根目录中运行DML时， <code class="codeph">CONTAINERS</code>子句非常有用。查询执行<code class="codeph">UNION ALL</code> ，返回根中对象的所有行以及所有打开的应用程序PDB（ <code class="codeph">RESTRICTED</code>模式下的那些除外）。
                              </p>
                              <p>要查询PDB的子集，请在谓词中指定<code class="codeph">CON_ID</code>或<code class="codeph">CON$NAME</code> 。如果查询的表或视图尚未包含<code class="codeph">CON_ID</code>列，则查询会将<code class="codeph">CON_ID</code>列添加到查询结果中，该查询结果标识给定行所代表的数据的容器。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-20DCAFB9-0075-4668-854E-C6A7D081DF75__GUID-7051FC7C-5A4E-4347-B565-071162897BFA">先决条件</p>
                              <p>请注意以下先决条件：</p>
                              <ul id="GUID-20DCAFB9-0075-4668-854E-C6A7D081DF75__UL_QP3_1ML_DHB" style="list-style-type:disc">
                                 <li>
                                    <p>要查询应用程序容器中的数据，您必须是连接到应用程序根目录的普通用户。</p>
                                 </li>
                                 <li>
                                    <p>表或视图必须存在于应用程序根目录和应用程序容器中的所有PDB中。</p>
                                 </li>
                                 <li>
                                    <p>表或视图必须位于您自己的架构中。没有必要指定<code class="codeph">schema</code> ，但如果这样做，则必须指定自己的模式。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-20DCAFB9-0075-4668-854E-C6A7D081DF75__GUID-763FAEEC-1301-489C-8F47-9E9523E66F6B">要在应用程序容器中查询元数据链接的对象：</p>
                              <ol id="GUID-20DCAFB9-0075-4668-854E-C6A7D081DF75__OL_YTP_JML_DHB">
                                 <li>
                                    <p>以应用程序普通用户身份登录应用程序根目录。</p>
                                 </li>
                                 <li>
                                    <p>在<code class="codeph">SELECT</code>语句中指定<code class="codeph">CONTAINERS</code>子句。
                                    </p>
                                    <p>例如，以下语句计算根和每个应用程序PDB中<code class="codeph">sh.customers</code>表中的行数（包括样本输出）：</p><pre class="pre codeblock"><code>选择c。CON_ID，COUNT（*）FROM CONTAINERS（sh.customers）c GROUP BY c。CON_ID ORDER BY 1; CON_ID COUNT（*）---------- ---------- 3 20002 6 426 8 7232</code></pre></li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-5D45EBCB-F8A9-4D2A-8F39-DE3CF431DCC4" title="您可以照常在元数据链接的应用程序对象上发出DML。">在元数据链接的公共对象上发布DML</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="sect5"><a id="GUID-49887469-07B0-4807-ACF3-F09657A4D1F5" name="GUID-49887469-07B0-4807-ACF3-F09657A4D1F5"></a><h6 id="MULTI-GUID-49887469-07B0-4807-ACF3-F09657A4D1F5" class="sect6"><span class="enumeration_section">17.4.4.1.2</span>设置默认容器或DML</h6>
                        <div>
                           <p>您可以在任何元数据链接对象上设置<code class="codeph">CONTAINERS_DEFAULT</code>属性，以便应用程序根目录中发出的DML默认包装在<code class="codeph">CONTAINERS</code>子句中。
                           </p>
                           <div class="section">
                              <p>在<code class="codeph">ALTER TABLE</code>或<code class="codeph">ALTER VIEW</code>语句中设置<code class="codeph">ENABLE CONTAINERS_DEFAULT</code> 。<code class="codeph">DBA_TABLES</code>和<code class="codeph">DBA_VIEWS</code>视图中的<code class="codeph">CONTAINERS_DEFAULT</code>列显示默认情况下是否为<code class="codeph">CONTAINERS</code>子句启用了数据库对象。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-49887469-07B0-4807-ACF3-F09657A4D1F5__GUID-34D13AA1-C766-460E-AF9F-1AFF388CAC25">要设置涉及元数据链接表或视图的DML的默认容器：</p>
                              <ol id="GUID-49887469-07B0-4807-ACF3-F09657A4D1F5__OL_XSY_25L_DHB">
                                 <li>
                                    <p>以应用程序普通用户身份登录应用程序根目录。</p>
                                 </li>
                                 <li>
                                    <p>使用应用程序根目录中的<code class="codeph">ENABLE CONTAINERS_DEFAULT</code>子句发出<code class="codeph">ALTER TABLE</code>或<code class="codeph">ALTER VIEW</code>语句。
                                    </p>
                                    <p>以下语句设置<code class="codeph">sh.customers</code>的默认容器：</p><pre class="pre codeblock"><code>ALTER TABLE sh.customers ENABLE CONTAINERS_DEFAULT;</code></pre><p>设置此属性后，应用程序根目录中发出的查询和DML语句默认情况下对<code class="codeph">sh.customers</code>使用<code class="codeph">CONTAINERS</code>子句。
                                    </p>
                                 </li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-5D45EBCB-F8A9-4D2A-8F39-DE3CF431DCC4" title="您可以照常在元数据链接的应用程序对象上发出DML。">在元数据链接的公共对象上发布DML</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-A8A0B617-56E2-4D29-8C96-D8CA392924AE" name="GUID-A8A0B617-56E2-4D29-8C96-D8CA392924AE"></a><h5 id="MULTI-GUID-A8A0B617-56E2-4D29-8C96-D8CA392924AE" class="sect5"><span class="enumeration_section">17.4.4.2</span>在数据链接的公共对象上发布DML</h5>
                     <div>
                        <p>对于数据链接的应用程序对象，在应用程序根目录中正常发出DML。对于扩展的数据链接应用程序对象，在应用程序根目录和应用程序PDB中正常发出DML。</p>
                        <div class="section">
                           <p>对于数据链接的应用程序对象，应用程序根目录中的DML会影响应用程序容器中所有PDB可访问的数据。您不能在应用程序PDB中的数据链接的应用程序对象上发出DML。</p>
                           <p>对于扩展的数据链接应用程序对象，应用程序根目录中的DML会影响应用程序容器中所有PDB可访问的数据。应用程序中的DML PDB仅影响应用程序PDB特有的数据。</p>
                           <p>考虑具有数据链接或扩展数据链接对象的应用程序根。此外，假设此根是与代理PDB同步的应用程序根副本的主服务器。在这种情况下，DML仅在应用程序安装，升级或修补程序期间发生DML时与副本同步。具体来说，DML必须出现在<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION ...之间的根目录中<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION ...{BEGIN|END}</code>语句。其他DML仅适用于当前根，并且不与根副本同步。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-A8A0B617-56E2-4D29-8C96-D8CA392924AE__GUID-B3D32D3B-D954-4329-BD83-B01027E7E541">要为不属于应用程序根副本配置的应用程序公共对象发出DML：</p>
                           <ol id="GUID-A8A0B617-56E2-4D29-8C96-D8CA392924AE__OL_TPF_FRF_DHB">
                              <li>
                                 <p>以具有在数据库对象上发出DML语句所需的特权的用户身份连接到应用程序容器中的相应容器。</p>
                              </li>
                              <li>
                                 <p>通常发出DML语句。</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-A8A0B617-56E2-4D29-8C96-D8CA392924AE__GUID-CF34546A-E152-435C-AFE8-43290E96F961">要为作为应用程序根副本配置一部分的数据链接或扩展数据链接对象发出DML：</p>
                           <ol id="GUID-A8A0B617-56E2-4D29-8C96-D8CA392924AE__OL_IRW_MRF_DHB">
                              <li>
                                 <p>在SQL * Plus中，确保当前容器是配置中应用程序根副本中的主应用程序根目录。</p>
                                 <p>当前用户必须具有在数据库对象上发出DML语句所需的权限。</p>
                              </li>
                              <li>
                                 <p>运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION ...用于开始应用程序安装，升级或修补的BEGIN</code>语句。
                                 </p>
                                 <p>如果要将应用程序公共对象修改为应用程序升级的一部分，请按以下格式发出升级语句：</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE应用<span class="italic">APPLICATION_NAME</span> BEGIN UPGRADE <span class="italic">'application_start_version_number'</span> TO <span class="italic">'application_end_version_number';</span></code></pre><p>例如，如果<span class="italic">application_name</span>是<code class="codeph">salesapp</code> ， <span class="italic">application_start_version_number</span>是4.2， <span class="italic">application_end_version_number</span>是4.3，则运行以下语句：</p><pre class="pre codeblock"><code>ALTER PLOGGABLE DATABASE APPLICATION salesapp BEGIN UPGRADE'4.2'to'4.3';</code></pre></li>
                              <li>
                                 <p>在数据链接的应用程序公共对象上发出DML语句。</p>
                              </li>
                              <li>
                                 <p>运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION ...END</code>声明。
                                 </p>
                                 <p>例如，如果要将应用程序公共对象修改为应用程序升级的一部分，请按以下格式运行语句：</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE应用<span class="italic">APPLICATION_NAME</span> END升级到<span class="italic">'application_end_version_number';</span></code></pre><p>例如，如果<span class="italic">application_name</span>是<code class="codeph">salesapp</code> ， <span class="italic">application_start_version_number</span>是4.2， <span class="italic">application_end_version_number</span>是4.3，则运行以下语句：</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE APPLICATION salesapp END UPGRADE TO'4.3';</code></pre><div class="infoboxnote" id="GUID-A8A0B617-56E2-4D29-8C96-D8CA392924AE__GUID-B2FF196C-9088-4A25-A501-3F4B32F96F28">
                                    <p class="notep1">注意：</p>确保<span class="italic">application_name</span>和<span class="italic">application_end_version_number</span>在<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN UPGRADE</code>语句和<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END UPGRADE</code>语句中<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END UPGRADE</code> 。
                                 </div>
                              </li>
                              <li>
                                 <p>要同步必须应用这些更改的所有应用程序PDB，请在应用程序PDB是当前容器时使用<code class="codeph">SYNC</code>子句发出<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句。
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-25CDD5E1-2C31-45FE-B618-A51B57B1ED5E" title="对于在元数据链接，数据链接和扩展数据链接的应用程序公共对象上发布DML语句，规则是不同的。">在应用程序公共对象上发出DML语句</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-B855567C-DE8D-4015-B3E1-86906EE1D119" name="GUID-B855567C-DE8D-4015-B3E1-86906EE1D119"></a><h4 id="MULTI-GUID-B855567C-DE8D-4015-B3E1-86906EE1D119" class="sect4"><span class="enumeration_section">17.4.5</span>使用DDL语句修改应用程序公共对象</h4>
                  <div>
                     <p>使用某些DDL语句修改应用程序根目录中的应用程序公共对象时，必须在<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN</code>和<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END</code>语句之间修改对象，并且应用程序PDB必须与应用程序同步才能应用更改。
                     </p>
                     <div class="section">您可以在应用程序根目录中更改元数据链接对象或数据链接对象。您在数据库对象上运行<code class="codeph">ALTER</code> ， <code class="codeph">RENAME</code>或<code class="codeph">DROP</code> SQL语句以执行DDL更改。
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>在SQL * Plus中，确保当前容器是应用程序根目录。</span><div>当前用户必须具有对数据库对象进行计划更改所需的权限。</div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN</code>语句以开始应用程序安装，升级或修补程序。</span><div>例如，如果<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN UPGRADE</code>程序公共对象修改为应用程序升级的一部分，请按以下格式运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN UPGRADE</code>语句：</div>
                           <div><code class="codeph">ALTER PLUGGABLE DATABASE应用<span class="codeinlineitalic">APPLICATION_NAME</span> BEGIN UPGRADE <span class="codeinlineitalic">'application_start_version_number'</span> TO <span class="codeinlineitalic">'application_end_version_number';</span></code></div>
                           <div>例如，如果<span class="italic">application_name</span>是<code class="codeph">salesapp</code> ， <span class="italic">application_start_version_number</span>是4.2， <span class="italic">application_end_version_number</span>是4.3，则运行以下语句：</div>
                           <div><code class="codeph">ALTER PLOGGABLE DATABASE APPLICATION salesapp BEGIN UPGRADE'4.2'to'4.3';</code></div>
                        </li>
                        <li class="stepexpand"><span>使用DDL语句修改应用程序公共对象。</span><div>例如， <code class="codeph">ALTER TABLE</code>语句可能会向<code class="codeph">ALTER TABLE</code>中添加一列。
                           </div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END</code>语句以结束应用程序安装，升级或修补程序。</span><div>例如，如果<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END UPGRADE</code>程序公共对象修改为应用程序升级的一部分，请按以下格式运行<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END UPGRADE</code>语句：</div>
                           <div><code class="codeph">ALTER PLUGGABLE DATABASE应用<span class="codeinlineitalic">APPLICATION_NAME</span> END升级到<span class="codeinlineitalic">'application_end_version_number';</span></code></div>
                           <div>例如，如果<span class="italic">application_name</span>是<code class="codeph">salesapp</code>且<span class="italic">application_end_version_number</span>是4.3，则运行以下语句：</div>
                           <div><code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION salesapp END UPGRADE TO'4.3';</code><div class="infoboxnote" id="GUID-B855567C-DE8D-4015-B3E1-86906EE1D119__GUID-D64E1BBE-4F58-494D-934A-A5A17DD1A0D6">
                                 <p class="notep1">注意：</p>确保<span class="italic">application_name</span>和<span class="italic">application_end_version_number</span>在<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION BEGIN UPGRADE</code>语句和<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END UPGRADE</code>语句中<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION END UPGRADE</code> 。
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>通过发出带有<code class="codeph">SYNC</code>子句且应用程序PDB作为当前容器的<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句， <code class="codeph">SYNC</code>必须应用这些更改的所有应用程序PDB。</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="administering-application-containers-with-sql-plus.html#GUID-EB81A80C-FA22-4D9B-A69D-7E2C8FB5E854" title="您可以在应用程序容器中安装，升级或修补应用程序。">管理应用程序容器中的应用程序</a></li>
                           <li><a href="administering-application-containers-with-sql-plus.html#GUID-27A78D0C-B90B-4BB9-A8D2-787353A667B1" title="同步应用程序会将应用程序PDB中的应用程序更新为应用程序根目录中的最新版本和修补程序。">在应用程序PDB中同步应用程序</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-DC57BCFA-8DC5-46B6-809F-E3570F44D801" title="应用程序公共对象是应用程序容器中的用户创建的数据库对象。应用程序公共对象在应用程序根目录中创建。">管理应用程序公共对象</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-CE09995E-7805-484B-9017-B0AF7CF97313" name="GUID-CE09995E-7805-484B-9017-B0AF7CF97313"></a><h3 id="MULTI-GUID-CE09995E-7805-484B-9017-B0AF7CF97313" class="sect3"><span class="enumeration_section">17.5</span>在应用程序容器中的容器上发出DML语句</h3>
               <div>
                  <p>在应用程序根目录中发出的DML语句可以修改应用程序容器中的一个或多个容器。此外，您可以为DML语句指定一个或多个默认容器目标。</p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-AA8C5BC8-4A22-4E8D-BA36-85B99A1168C2">关于在应用程序容器中的容器上发出DML语句</a><br>DML语句可以影响应用程序容器中多个容器中的数据库对象。
                     </li>
                     <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-02A30F9F-FF59-4725-B586-34457795D449">在应用程序容器中指定DML语句的默认容器</a><br>要为应用程序容器中的DML语句指定默认容器，请使用<code class="codeph">CONTAINERS DEFAULT TARGET</code>子句发出<code class="codeph">ALTER PLUGGABLE DATABASE</code>语句。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-1AFD0268-6A2B-4F84-BB4D-4D36976DE53B" title="您可以管理应用程序容器，包括应用程序根和应用程序PDB。您还可以管理应用程序容器中安装的应用程序。">管理应用程序容器</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-AA8C5BC8-4A22-4E8D-BA36-85B99A1168C2" name="GUID-AA8C5BC8-4A22-4E8D-BA36-85B99A1168C2"></a><h4 id="MULTI-GUID-AA8C5BC8-4A22-4E8D-BA36-85B99A1168C2" class="sect4"><span class="enumeration_section">17.5.1</span>关于在应用程序容器中的容器上发出DML语句</h4>
                  <div>
                     <p>DML语句可以影响应用程序容器中多个容器中的数据库对象。</p>
                     <p>在应用程序根目录中，包含<code class="codeph">CONTAINERS</code>子句的单个DML语句可以修改应用程序容器中一个或多个容器中的表或视图。要使用<code class="codeph">CONTAINERS</code>子句，指定在所修改的表或视图<code class="codeph">CONTAINERS</code>子句和在容器中<code class="codeph">WHERE</code>子句。通过在<code class="codeph">VALUES</code>子句中指定<code class="codeph">CON_ID</code>的值，可以在<code class="codeph">INSERT VALUES</code>语句中指定目标容器。此外，可以通过在<code class="codeph">WHERE</code>子句中指定<code class="codeph">CON_ID</code>谓词在<code class="codeph">UPDATE</code>或<code class="codeph">DELETE</code>语句中指定目标容器。
                     </p>
                     <div class="p">例如，以下DML语句更新<code class="codeph">CON_ID</code>为<code class="codeph">7</code>或<code class="codeph">8</code>的容器中的<code class="codeph">sales.customers</code>表：<pre class="pre codeblock"><code>更新容器（sales.customers）ctab SET ctab.city_name ='MIAMI'WHERE ctab。CON_ID IN（7,8）AND CUSTOMER_ID = 3425;</code></pre></div>
                     <p>在<code class="codeph">WHERE</code>子句中为<code class="codeph">CON_ID</code>指定的值必须是当前应用程序容器中的容器。
                     </p>
                     <p>您可以为DML操作指定默认目标容器。如果DML语句未在<code class="codeph">WHERE</code>子句中指定<code class="codeph">CON_ID</code>值，则DML操作的目标容器是应用程序根目录中的数据库属性<code class="codeph">CONTAINERS_DEFAULT_TARGET</code>中指定的<code class="codeph">CONTAINERS_DEFAULT_TARGET</code> 。在应用程序根目录中发出时，以下DML语句会修改应用程序容器的默认目标容器：</p><pre class="pre codeblock"><code>UPDATE CONTAINERS（sales.customers）ctab SET ctab.city_name ='MIAMI'WHERE CUSTOMER_ID = 3425;</code></pre><div class="p">默认情况下，应用程序容器中的默认目标容器包括其所有应用程序PDB，但不包括其应用程序根目录或应用程序种子。您可以通过运行以下查询来确定应用程序容器的默认目标容器：<pre class="pre codeblock"><code>SELECT PROPERTY_VALUE FROM DATABASE_PROPERTIES PROPERERE_NAME ='CONTAINERS_DEFAULT_TARGET';</code></pre></div>
                     <p>此外，您可以为应用程序根目录中的表或视图启用<code class="codeph">CONTAINERS_DEFAULT</code>属性。启用此属性时，默认情况下<code class="codeph">CONTAINERS</code>子句用于数据库对象上的查询和DML语句，并且不需要在SQL语句中指定<code class="codeph">CONTAINERS</code>子句。要为应用程序根目录中的表或视图启用<code class="codeph">CONTAINERS_DEFAULT</code>属性，请使用<code class="codeph">ENABLE CONTAINERS_DEFAULT</code>子句运行<code class="codeph">ALTER TABLE</code>或<code class="codeph">ALTER VIEW</code>语句。
                     </p>
                     <p>以下限制适用于<code class="codeph">CONTAINERS</code>子句：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">CONTAINERS DEFAULT TARGET</code>子句不影响<code class="codeph">SELECT</code>语句。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">INSERT</code>的<code class="codeph">SELECT</code>语句，其中的目标<code class="codeph">INSERT</code>是<code class="codeph">CONTAINERS()</code>不支持。
                           </p>
                        </li>
                        <li>
                           <p>不支持<code class="codeph">INSERT</code>目标在<code class="codeph">CONTAINERS()</code>的多表<code class="codeph">INSERT</code>语句。
                           </p>
                        </li>
                        <li>
                           <p>使用<code class="codeph">CONTAINERS</code>子句的DML语句要求使用TCP（而不是IPC）配置数据库侦听器，并分别使用<code class="codeph">PORT</code>和<code class="codeph">HOST</code>子句为每个目标PDB指定<code class="codeph">PORT</code>和<code class="codeph">HOST</code>值。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="administering-application-containers-with-sql-plus.html#GUID-76B6E6D4-F478-4EBE-9D9D-D10758835192" title="应用程序公共对象在应用程序根目录中创建，并与属于应用程序根目录的应用程序PDB共享。">关于应用程序通用对象</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-CE09995E-7805-484B-9017-B0AF7CF97313" title="在应用程序根目录中发出的DML语句可以修改应用程序容器中的一个或多个容器。此外，您可以为DML语句指定一个或多个默认容器目标。">在应用程序容器中的容器上发出DML语句</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-02A30F9F-FF59-4725-B586-34457795D449" name="GUID-02A30F9F-FF59-4725-B586-34457795D449"></a><h4 id="MULTI-GUID-02A30F9F-FF59-4725-B586-34457795D449" class="sect4"><span class="enumeration_section">17.5.2</span>为应用程序容器中的DML语句指定默认容器</h4>
                  <div>
                     <p>要为应用程序容器中的DML语句指定默认容器，请使用<code class="codeph">CONTAINERS DEFAULT TARGET</code>子句发出<code class="codeph">ALTER PLUGGABLE DATABASE</code>语句。
                     </p>
                     <div class="section">在应用程序根目录中发出DML语句而不在<code class="codeph">WHERE</code>子句中指定容器时，DML语句会影响应用程序容器的默认容器。默认容器可以是应用程序容器中的任何容器，包括应用程序根目录或应用程序PDB。只允许一个默认容器。
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>在SQL * Plus中，确保当前容器是应用程序根目录。</span><div>当前用户必须具有通常授予的<code class="codeph">ALTER PLUGGABLE DATABASE</code>权限。
                           </div>
                        </li>
                        <li class="stepexpand"><span>使用<code class="codeph">CONTAINERS DEFAULT TARGET</code>子句运行<code class="codeph">ALTER PLUGGABLE DATABASE</code>语句。</span></li>
                     </ol>
                     <div class="example" id="GUID-02A30F9F-FF59-4725-B586-34457795D449__GUID-FA6E81E6-7C37-444F-A3DD-DDCBA5AF9171">
                        <p class="titleinexample">示例17-14为应用程序容器中的DML语句指定默认容器</p>
                        <p>此示例指定<code class="codeph">APDB1</code>是应用程序容器中DML语句的默认容器。
                        </p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE CONTAINERS DEFAULT TARGET =（APDB1）;</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-02A30F9F-FF59-4725-B586-34457795D449__GUID-C0C89595-4130-4D22-A427-6167D76AAE42">
                        <p class="titleinexample">示例17-15清除默认容器</p>
                        <p>此示例清除默认容器设置。如果未设置，则默认容器为应用程序根。</p><pre class="pre codeblock"><code>ALTER PLOGGABLE DATABASE CONTAINERS DEFAULT TARGET = NONE;</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-CE09995E-7805-484B-9017-B0AF7CF97313" title="在应用程序根目录中发出的DML语句可以修改应用程序容器中的一个或多个容器。此外，您可以为DML语句指定一个或多个默认容器目标。">在应用程序容器中的容器上发出DML语句</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-AAF93A02-7C70-4024-8758-E351C213543E" name="GUID-AAF93A02-7C70-4024-8758-E351C213543E"></a><h3 id="MULTI-GUID-AAF93A02-7C70-4024-8758-E351C213543E" class="sect3"><span class="enumeration_section">17.6</span> PDB使用容器映射进行分区</h3>
               <div>
                  <p>当数据未在表级进行物理分区时，容器映射可以在应用程序PDB级别对数据进行分区。</p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-E2668048-1657-49BC-9B6E-6837D5757463">关于容器地图</a><br><strong class="term">容器映射</strong>是一个数据库属性，它指定在应用程序根目录中定义的分区映射表。
                     </li>
                     <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-A4C8768F-004E-461E-B2B0-748C295049B2">创建容器图</a><br>通过创建映射对象并将<code class="codeph">CONTAINER_MAP</code>数据库属性设置为映射对象来创建<code class="codeph">CONTAINER_MAP</code>映射。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-1AFD0268-6A2B-4F84-BB4D-4D36976DE53B" title="您可以管理应用程序容器，包括应用程序根和应用程序PDB。您还可以管理应用程序容器中安装的应用程序。">管理应用程序容器</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-E2668048-1657-49BC-9B6E-6837D5757463" name="GUID-E2668048-1657-49BC-9B6E-6837D5757463"></a><h4 id="MULTI-GUID-E2668048-1657-49BC-9B6E-6837D5757463" class="sect4"><span class="enumeration_section">17.6.1</span>关于容器地图</h4>
                  <div>
                     <p><strong class="term">容器映射</strong>是一个数据库属性，它指定在应用程序根目录中定义的分区映射表。
                     </p>
                     <p>使用容器映射对元数据链接对象中的数据进行分区。容器映射基于常用列的应用程序PDB中的数据分区。</p>
                     <p>例如，您可以创建名为<code class="codeph">countries_mlt</code> （带有列<code class="codeph">cname</code> ）的元数据链接表，该表在每个应用程序PDB中存储不同的数据。名为<code class="codeph">pdb_map_tbl</code>的映射表按<code class="codeph">cname</code>列上的列表进行分区。分区<code class="codeph">amer_pdb</code> ， <code class="codeph">euro_pdb</code>和<code class="codeph">asia_pdb</code>对应于应用程序PDB的名称。
                     </p>
                     <p>容器映射可以在列上为公共对象定义逻辑分区键。由于容器是基于容器映射在内部解析的，因此此映射<code class="codeph">CON_ID</code>使用<code class="codeph">CON_ID</code>谓词定义查询，也不会在查询中使用<code class="codeph">CONTAINERS</code>子句。
                     </p>
                     <p>某些类型的基于行的合并使用租户ID和包含多个租户的单个PDB。容器映射对于迁移到为每个租户使用不同PDB的配置很有用。</p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-7D7BDEF1-0E0F-4C13-AC26-9F4AD94FD968">地图对象</a><br><strong class="term">map对象</strong>是分区表。
                        </li>
                        <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-979ED407-BA4F-4711-9173-F5BAFDBB8C05">List-Partitioned Container Map：示例</a><br>此示例使用容器映射将查询路由到存储地理区域数据的PDB。
                        </li>
                        <li class="ulchildlink"><a href="administering-application-containers-with-sql-plus.html#GUID-B83C5F04-DB06-4B11-950B-0D5261DE36F3">范围分区容器图：示例</a><br>此示例使用容器映射将查询路由到存储特定部门数据的PDB。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-AAF93A02-7C70-4024-8758-E351C213543E" title="当数据未在表级进行物理分区时，容器映射可以在应用程序PDB级别对数据进行分区。">PDB使用Container Maps进行分区</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-7D7BDEF1-0E0F-4C13-AC26-9F4AD94FD968" name="GUID-7D7BDEF1-0E0F-4C13-AC26-9F4AD94FD968"></a><h5 id="MULTI-GUID-7D7BDEF1-0E0F-4C13-AC26-9F4AD94FD968" class="sect5"><span class="enumeration_section">17.6.1.1</span>映射对象</h5>
                     <div>
                        <p><strong class="term">map对象</strong>是分区表。
                        </p>
                        <p>映射表中分区的名称与应用程序容器中的应用程序PDB的名称相匹配。元数据链接对象在表级别未进行物理分区，但可以使用容器映射使用的分区策略进行查询。</p>
                        <p>要将映射表与元数据链接表关联，请在<code class="codeph">ALTER PLUGGABLE DATABASE ...指定映射表<code class="codeph">ALTER PLUGGABLE DATABASE ...CONTAINER_MAP</code>连接到应用程序根目录时。您可以在应用程序容器中创建不超过一个容器映射。您无法在CDB根目录中创建容器映射。
                        </p>
                        <div class="infoboxnote" id="GUID-7D7BDEF1-0E0F-4C13-AC26-9F4AD94FD968__GUID-EA298D58-18EB-42B1-BC01-480E3D671848">
                           <p class="notep1">注意：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>必须以与map对象中定义的分区一致的方式将数据加载到PDB表中。</p>
                              </li>
                              <li>
                                 <p>当应用程序容器中的应用程序PDB发生更改时，不会自动同步地图对象以考虑这些更改。例如，可以拔出，重命名或删除在地图对象中引用的应用程序PDB。必须手动更新地图对象以考虑此类更改。</p>
                              </li>
                           </ul>
                        </div>
                        <p>从<span>Oracle Database 18c开始</span> ，对于使用映射的<code class="codeph">CONTAINERS()</code>查询，映射表中的分区列不需要与元数据链接表中的列匹配。假设为容器映射<code class="codeph">pdb_map_tbl</code>启用了表<code class="codeph">sh.sales</code> ，而<code class="codeph">cname</code>是映射表的分区列。即使<code class="codeph">sh.sales</code> <span class="italic">不</span>包括<code class="codeph">cname</code>列，映射表的路由以下查询到相应的PDB： <code class="codeph">SELECT * FROM CONTAINERS(sh.sales) WHERE cname = 'US' ORDER BY time_id</code> 。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-E2668048-1657-49BC-9B6E-6837D5757463" title="容器映射是一个数据库属性，它指定在应用程序根目录中定义的分区映射表。">关于容器映射</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-979ED407-BA4F-4711-9173-F5BAFDBB8C05" name="GUID-979ED407-BA4F-4711-9173-F5BAFDBB8C05"></a><h5 id="MULTI-GUID-979ED407-BA4F-4711-9173-F5BAFDBB8C05" class="sect5"><span class="enumeration_section">17.6.1.2</span>列表分区容器图：示例</h5>
                     <div>
                        <p>此示例使用容器映射将查询路由到存储地理区域数据的PDB。</p>
                        <p>应用程序根目录的以下图示显示了映射对象，元数据链接表以及元数据链接表上的查询。查询在适当的应用程序PDB中执行。</p>
                        <div class="figure" id="GUID-979ED407-BA4F-4711-9173-F5BAFDBB8C05__GUID-B89A9C8D-8652-43C1-96C4-2BDC17B51756">
                           <p class="titleinfigure">图17-3容器图</p><img src="img/admin123.png" alt="下面是图17-3的描述" title="下面是图17-3的描述" longdesc="img_text/admin123.html"><br><a href="img_text/admin123.html">“图17-3集装箱地图”的说明</a></div>
                        <!-- class="figure" -->
                        <p>该图显示了一个应用程序容器，其中包含三个名为<code class="codeph">AMER</code> ， <code class="codeph">EURO</code>和<code class="codeph">ASIA</code>应用程序PDB。 PDB存储相应区域的数据。名为<code class="codeph">oe.cmtb</code>元数据链接表存储应用程序的信息。该表有一个<code class="codeph">COUNTRY</code>列。对于此分区策略，按列表分区用于创建为每个区域创建分区的地图对象。国家/地区价值（在图中显示的查询中为<code class="codeph">GERMANY</code>确定了区域，即<code class="codeph">EURO</code>区域。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-979ED407-BA4F-4711-9173-F5BAFDBB8C05__GUID-4297CB7F-A533-4635-A43A-8F6C841503C2">
                           <p class="notep1">也可以看看：</p>
                           <p> <span class="q">“ <a href="administering-application-containers-with-sql-plus.html#GUID-A4C8768F-004E-461E-B2B0-748C295049B2" title="通过创建映射对象并将CONTAINER_MAP数据库属性设置为映射对象来创建容器映射。">创建容器映射</a> ”</span>以获取此示例的详细说明</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-E2668048-1657-49BC-9B6E-6837D5757463" title="容器映射是一个数据库属性，它指定在应用程序根目录中定义的分区映射表。">关于容器映射</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-B83C5F04-DB06-4B11-950B-0D5261DE36F3" name="GUID-B83C5F04-DB06-4B11-950B-0D5261DE36F3"></a><h5 id="MULTI-GUID-B83C5F04-DB06-4B11-950B-0D5261DE36F3" class="sect5"><span class="enumeration_section">17.6.1.3</span>范围分区容器图：示例</h5>
                     <div>
                        <p>此示例使用容器映射将查询路由到存储特定部门数据的PDB。</p>
                        <p>考虑另一个使用范围分区表作为地图对象的示例。以下SQL语句在应用程序根目录中创建映射对象：</p><pre class="pre codeblock"><code>CREATE TABLE app_con_admin.conmap（department_id NUMBER NOT NULL）按范围划分（department_id）（PARTITION apppdb1值小于（100），PARTITION apppdb2值小于（200），PARTITION apppdb3值小于（300））;</code></pre><div class="p">此映射对象根据常用的列<code class="codeph">department_id</code>对应用程序PDB <code class="codeph">apppdb1</code> ， <code class="codeph">apppdb2</code>和<code class="codeph">apppdb3</code>中的数据进行分区。以下SQL语句将<code class="codeph">CONTAINER_MAP</code>数据库属性设置为应用程序根目录中的<code class="codeph">app_con_admin.conmap</code>表：<pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE SET CONTAINER_MAP ='app_con_admin.conmap';</code></pre></div>
                        <div class="p">使用容器映射的查询会产生与使用<code class="codeph">CONTAINERS</code>子句的查询类似的结果。例如，以下查询返回类似的结果：<pre class="pre codeblock"><code>SELECT employee_id FROM CONTAINERS（hr.employees）WHERE department_id = 10 AND CON_ID IN（44）; SELECT employee_id FROM hr.employees WHERE department_id = 10;</code></pre></div>
                        <p>如带有<code class="codeph">CONTAINERS</code>子句的第一个查询所示，当查询仅涉及单个应用程序PDB时，查询必须在<code class="codeph">WHERE</code>子句中指定此应用程序PDB的容器ID。此要求可能会导致应用程序更改
                        </p>
                        <p>第二个查询使用容器映射，替换<code class="codeph">CONTAINERS</code>子句。第二个查询未指定容器，因为容器映射将查询定向到正确的应用程序PDB。使用容器映射的查询通常比使用<code class="codeph">CONTAINERS</code>子句的查询更有效。
                        </p>
                        <p>容器映射必须由具有<code class="codeph">ALTER DATABASE</code>系统特权的普通用户创建。查询针对为容器映射启用的对象运行。查询权限由对象上授予的权限确定。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-E2668048-1657-49BC-9B6E-6837D5757463" title="容器映射是一个数据库属性，它指定在应用程序根目录中定义的分区映射表。">关于容器映射</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-A4C8768F-004E-461E-B2B0-748C295049B2" name="GUID-A4C8768F-004E-461E-B2B0-748C295049B2"></a><h4 id="MULTI-GUID-A4C8768F-004E-461E-B2B0-748C295049B2" class="sect4"><span class="enumeration_section">17.6.2</span>创建容器图</h4>
                  <div>
                     <p>通过创建映射对象并将<code class="codeph">CONTAINER_MAP</code>数据库属性设置为映射对象来创建<code class="codeph">CONTAINER_MAP</code>映射。
                     </p>
                     <div class="section">映射对象是一个分区表，其中每个分区名称与应用程序容器中的应用程序PDB的名称相匹配。</div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A4C8768F-004E-461E-B2B0-748C295049B2__GUID-F9F233E9-C82B-4873-A5FC-7BF762726A9F">先决条件</p>
                        <p>要创建容器映射，您必须满足以下先决条件：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在创建容器映射之前，CDB中必须存在具有应用程序PDB的应用程序容器。</p>
                           </li>
                           <li>
                              <p>应用程序容器必须至少安装一个应用程序。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A4C8768F-004E-461E-B2B0-748C295049B2__GUID-F7A118C5-8703-44CF-964F-5C3D2E70024F">要创建容器映射：</p>
                        <ol>
                           <li>
                              <p>在SQL * Plus中，确保当前容器是应用程序根目录。</p>
                           </li>
                           <li>
                              <p>将<code class="codeph">CONTAINER_MAP</code>数据库属性设置为地图对象。
                              </p>
                              <p>在以下语句中，将<span class="italic">map_table_schema</span>替换为表的所有者，并将<span class="italic">map_table_name</span>替换为表的名称：</p><pre class="pre codeblock"><code>ALTER DATABASE SET CONTAINER_MAP =' <span class="italic">map_table_schema.map_table_name</span> ';</code></pre></li>
                           <li>
                              <p>启动应用程序安装，升级或修补程序。</p>
                           </li>
                           <li>
                              <p>如果容器映射将使用的元数据链接表不存在，则创建它。</p>
                           </li>
                           <li>
                              <p>通过发出<code class="codeph">ALTER TABLE ...来启用要查询的表的容器映射<code class="codeph">ALTER TABLE ...ENABLE CONTAINER_MAP</code>语句。
                              </p>
                           </li>
                           <li>
                              <p>通过发出<code class="codeph">ALTER TABLE ...确保为<code class="codeph">CONTAINERS</code>子句启用了要查询的<code class="codeph">ALTER TABLE ...ENABLE CONTAINERS_DEFAULT</code>语句。
                              </p>
                           </li>
                           <li>
                              <p>结束先前启动的应用程序安装，升级或修补程序。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-A4C8768F-004E-461E-B2B0-748C295049B2__GUID-817FF72F-38CC-4643-9A6F-2C4725F12FA2">
                        <p class="titleinexample">示例17-16创建和使用容器映射</p>
                        <p>此示例创建一个使用容器映射的简单应用程序。假设应用程序容器有三个名为<code class="codeph">AMER</code> ， <code class="codeph">EURO</code>和<code class="codeph">ASIA</code>应用程序PDB。应用程序PDB存储不同区域（分别为美国，欧洲和亚洲）的数据。元数据链接表存储应用程序的信息，并具有<code class="codeph">COUNTRY</code>列。对于此分区策略，按列表分区用于创建为每个区域创建分区的地图对象，并使用国家/地区值来确定区域。
                        </p>
                        <ol>
                           <li>
                              <p>在SQL * Plus中，确保当前容器是应用程序根目录。</p>
                           </li>
                           <li>
                              <p>创建地图对象。</p><pre class="pre codeblock"><code>CREATE TABLE salesadm.conmap（country VARCHAR2（30）NOT NULL）按列表划分（国家）（PARERTION AMER VALUES（'US'，'MEXICO'，'CANADA'），PARTITION EURO VALUES（'UK'，'FRANCE'， '德国'），分区亚洲价值观（'印度'，'中国'，'日本'））;</code></pre></li>
                           <li>
                              <p>将<code class="codeph">CONTAINER_MAP</code>数据库属性设置为地图对象。
                              </p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE SET CONTAINER_MAP ='salesadm.conmap';</code></pre></li>
                           <li>
                              <p>开始应用程序安装。</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE APPLICATION salesapp BEGIN INSTALL'1.0';</code></pre></li>
                           <li>
                              <p>创建将使用容器映射查询的元数据链接表。</p><pre class="pre codeblock"><code>CREATE TABLE oe.cmtb SHARING = METADATA（value VARCHAR2（30），country VARCHAR2（30））;</code></pre></li>
                           <li>
                              <p>为要查询的表启用容器映射。</p><pre class="pre codeblock"><code>ALTER TABLE oe.cmtb ENABLE CONTAINER_MAP;</code></pre></li>
                           <li>
                              <p>确保为<code class="codeph">CONTAINERS</code>子句启用了要查询的表。
                              </p><pre class="pre codeblock"><code>ALTER TABLE oe.cmtb ENABLE CONTAINERS_DEFAULT;</code></pre></li>
                           <li>
                              <p>结束应用程序安装。</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE APPLICATION salesapp END INSTALL'1.0';</code></pre></li>
                           <li>
                              <p>将会话切换到每个应用程序PDB并同步它。</p><pre class="pre codeblock"><code>ALTER SESSION SET CONTAINER = amer; ALTER PLUGGABLE DATABASE APPLICATION salesapp SYNC; ALTER SESSION SET CONTAINER = euro; ALTER PLUGGABLE DATABASE APPLICATION salesapp SYNC; ALTER SESSION SET CONTAINER = asia; ALTER PLUGGABLE DATABASE APPLICATION salesapp SYNC;</code></pre></li>
                           <li>
                              <p>根据分区策略将值插入每个应用程序PDB中的<code class="codeph">oe.cmtb</code>表。
                              </p><pre class="pre codeblock"><code>ALTER SESSION SET CONTAINER = amer;插入oe.cmtb价值（'AMER VALUE'，'US'）;插入oe.cmtb价值（'AMER VALUE'，'墨西哥'）;插入oe.cmtb值（'AMER VALUE'，'CANADA'）;承诺; ALTER SESSION SET CONTAINER = euro;插入oe.cmtb价值（'欧元价值'，'英国'）;插入oe.cmtb价值（'欧元价值'，'法国'）;插入oe.cmtb价值（'欧元价值'，'德国'）;承诺; ALTER SESSION SET CONTAINER = asia;插入oe.cmtb价值观（'亚洲价值'，'印度'）;插入oe.cmtb价值（'亚洲价值'，'中国'）;插入oe.cmtb价值（'亚洲价值'，'日本'）;承诺;</code></pre></li>
                           <li>
                              <p>将会话切换到应用程序根目录并使用容器映射查询数据。</p><pre class="pre codeblock"><code>ALTER SESSION SET CONTAINER =销售; SELECT值FROM oe.cmtb WHERE country ='MEXICO'; SELECT value FROM oe.cmtb WHERE country ='GERMANY'; SELECT值FROM oe.cmtb WHERE country ='JAPAN';</code></pre><p>第一个查询的输出应为<code class="codeph">AMER VALUE</code> ，第二个查询的输出应为<code class="codeph">EURO VALUE</code> ，第三个查询的输出应为<code class="codeph">ASIA VALUE</code> 。这些值说明容器映射正常工作。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-application-containers-with-sql-plus.html#GUID-AAF93A02-7C70-4024-8758-E351C213543E" title="当数据未在表级进行物理分区时，容器映射可以在应用程序PDB级别对数据进行分区。">PDB使用Container Maps进行分区</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This topic provides an overview of the basic steps when managing Oracle ACFS file systems using command-line utilities."></meta>
      <meta name="description" content="This topic provides an overview of the basic steps when managing Oracle ACFS file systems using command-line utilities."></meta>
      <title>管理Oracle ACFS系统的基本步骤</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator&#39;s Guide"></meta>
      <meta property="og:description" content="This topic provides an overview of the basic steps when managing Oracle ACFS file systems using command-line utilities."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="automatic-storage-management-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-23T18:56:15-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96198-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="manage-acfs-advm-commands.html" title="Previous" type="text/html"></link>
      <link rel="next" href="acfs-commands-linux.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Automatic Storage Management Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="OSTMG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="manage-acfs-advm-commands.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="acfs-commands-linux.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-acfs-advm.html" property="item" typeof="WebPage"><span property="name">Oracle自动存储管理群集文件系统</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="manage-acfs-advm-commands.html" property="item" typeof="WebPage"><span property="name">使用命令行工具管理Oracle ACFS</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理Oracle ACFS系统的基本步骤</li>
            </ol>
            <a id="GUID-14BA3BA5-088D-4395-A22F-43F84006649B" name="GUID-14BA3BA5-088D-4395-A22F-43F84006649B"></a><a id="OSTMG91000"></a>
            
            <h2 id="OSTMG-GUID-14BA3BA5-088D-4395-A22F-43F84006649B" class="sect2">管理Oracle ACFS系统的基本步骤</h2>
         </header>
         <div class="ind">
            <div>
               <p>本主题概述了使用命令行实用程序管理Oracle ACFS文件系统时的基本步骤。</p>
               <p>本节中的示例显示了在Linux环境系统中运行的操作系统命令。ASMCMD命令管理Oracle ADVM卷，但您也可以使用SQL * PLus和Oracle ASM Configuration Assistant（ASMCA）来管理卷。</p>
               <p>本节包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="steps-manage-acfs.html#GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C" title="本主题概述了Oracle ACFS acfsutil命令的使用。">关于使用Oracle ACFS命令行工具</a></p>
                  </li>
                  <li>
                     <p><a href="steps-manage-acfs.html#GUID-4C98CF06-8CCC-45F1-9316-C40FB3EFF268" title="您可以使用本主题中的步骤创建Oracle ACFS文件系统。">创建Oracle ACFS文件系统</a></p>
                  </li>
                  <li>
                     <p><a href="steps-manage-acfs.html#GUID-37D5ACB8-BFBA-4CC2-B90F-C9C72C47F956">访问群集中不同节点上的Oracle ACFS文件系统</a></p>
                  </li>
                  <li>
                     <p><a href="steps-manage-acfs.html#GUID-9BBF5D63-7EF7-4229-8A05-D1D9EEB62CC6">管理Oracle ACFS快照</a></p>
                  </li>
                  <li>
                     <p><a href="steps-manage-acfs.html#GUID-30627065-670B-4477-B504-B41D50D476DF" title="本主题讨论了在Linux上管理Oracle ACFS文件系统安全性的基本操作。">保护Oracle ACFS文件系统</a></p>
                  </li>
                  <li>
                     <p><a href="steps-manage-acfs.html#GUID-01EA8FA1-C136-4968-86D4-9F54B39F903C" title="本主题讨论了在Linux上管理Oracle ACFS文件系统上的加密的基本操作。">加密Oracle ACFS文件系统</a></p>
                  </li>
                  <li>
                     <p><a href="steps-manage-acfs.html#GUID-1C351316-3D71-4520-A412-95AE85F56453" title="本主题讨论了在Linux上管理Oracle ACFS文件系统中的目录和文件的标记的操作。">标记Oracle ACFS文件系统</a></p>
                  </li>
                  <li>
                     <p><a href="steps-manage-acfs.html#GUID-13F8260D-7549-475E-A701-A12386FE7048" title="本主题将讨论在Linux上的Oracle ACFS文件系统上管理基于Oracle ACFS快照的复制的操作。">复制Oracle ACFS文件系统</a></p>
                  </li>
                  <li>
                     <p><a href="steps-manage-acfs.html#GUID-824B567D-A538-4EF2-8A2D-96D83A1E6284" title="本主题讨论取消注册或卸载文件系统以及禁用卷的操作。">取消注册，卸载和禁用卷和Oracle ACFS文件系统</a></p>
                  </li>
                  <li>
                     <p><a href="steps-manage-acfs.html#GUID-4D3758AF-447E-47AB-BD23-46E41A7EA59B" title="您可以使用acfsutil和ASMCMD命令删除Oracle ACFS文件系统和卷。">删除Oracle ACFS文件系统和卷</a></p>
                  </li>
               </ul>
            </div>
            <div class="sect2"><a id="GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C" name="GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C"></a><h3 id="OSTMG-GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C" class="sect3">关于使用Oracle ACFS命令行工具</h3>
               <div>
                  <p>本主题概述了Oracle ACFS <code class="codeph">acfsutil</code>命令的使用。
                  </p>
                  <p>讨论包括：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>运行Oracle ACFS acfsutil命令的权限</p>
                     </li>
                     <li>
                        <p>显示Oracle ACFS acfsutil命令的帮助</p>
                     </li>
                     <li>
                        <p>在Windows上运行Oracle ACFS acfsutil命令</p>
                     </li>
                     <li>
                        <p>显示Oracle ACFS版本信息</p>
                     </li>
                     <li>
                        <p>管理acfsutil命令的跟踪文件空间</p>
                     </li>
                  </ul>
                  <div class="section" id="GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C__PRIVILEGESTORUNORACLEACFSCOMMANDS-F02F6EEA">
                     <p class="subhead2" id="GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C__GUID-37834E15-005A-4991-BD78-40187297DEA9">运行Oracle ACFS acfsutil命令的权限</p>
                     <p>要运行许多Oracle ACFS <code class="codeph">acfsutil</code>命令，您必须是系统管理员或已启用运行命令的Oracle ASM管理员用户。这些权限描述如下：</p>
                     <p>在非Windows系统上：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>对于系统管理员权限，您必须是<code class="codeph">root</code>用户。
                           </p>
                        </li>
                        <li>
                           <p>对于Oracle ASM管理员用户权限，您必须属于<code class="codeph">OSASM</code>组和<code class="codeph">oinstall</code>组（对于<code class="codeph">OINSTALL</code>权限）。
                           </p>
                        </li>
                     </ul>
                     <p>在Windows系统上：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>对于系统管理员权限，您必须属于<code class="codeph">Administrators</code>组。
                           </p>
                        </li>
                        <li>
                           <p>对于Oracle ASM管理员用户权限，您必须属于<code class="codeph">ORA_ASMADMIN</code>组和<code class="codeph">ORA_CRS_USERS</code>组。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C__GUID-787F3B58-4E5D-4CF0-B07B-5EDA1DD369EF">显示Oracle ACFS acfsutil命令的帮助</p>
                     <p>您可以使用<code class="codeph">h</code>选项显示Oracle ACFS <code class="codeph">acfsutil</code>命令的帮助和用法文本。使用该命令包含命令或子命令时，帮助和用法显示特定于输入的命令和子命令。
                     </p>
                     <p>以下示例说明了显示帮助和使用文本的几种不同方法，从最常规到更具体。此示例显示<code class="codeph">—h</code>格式以在非Windows平台上显示帮助。在Windows上，使用<code class="codeph">/h</code>代替<code class="codeph">—h</code> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C__GUID-341E33EC-F071-41C1-895D-F1F39C63DE35">
                     <p class="titleinexample">示例16-1显示Oracle ACFS acfsutil命令的帮助</p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil -h $ / sbin / acfsutil -h compress $ / sbin / acfsutil compress -h $ / sbin / acfsutil -h repl info $ / sbin / acfsutil repl info -h $ / sbin / acfsutil -h sec admin info $ / sbin / acfsutil sec admin info -h</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C__GUID-809A9D51-707C-4A6E-8AF7-C3BD329245C9">在Windows上运行Oracle ACFS acfsutil命令</p>
                     <p>在Windows平台上使用Oracle ACFS <code class="codeph">acfsutil</code>命令指定选项时，使用<code class="codeph">/</code>代替<code class="codeph">-</code>使用该选项。例如，您可以使用<code class="codeph">acfsutil</code> <code class="codeph">-h</code>在Linux平台上显示<code class="codeph">acfsutil</code>命令的帮助。在Windows平台上，使用<code class="codeph">acfsutil</code> <code class="codeph">/h</code> 。
                     </p>
                     <p>在Windows操作系统上的安装点可以是只驱动器号（ <code class="codeph">M:</code>或包括驱动器盘符（目录<code class="codeph">M:\my_mount_point</code> ）。
                     </p>
                     <p>当Windows上的<code class="codeph">acfsutil</code>命令以驱动器号上安装的文件系统的根目标为目标时，请包含反斜杠和带驱动器号（ <code class="codeph">P:\.</code> ）的句点（ <code class="codeph">\.</code> ），以避免触发Windows路径的可能性替换到指定驱动器上最后访问的路径。例如：</p><pre class="oac_no_warn" dir="ltr">C：\ oracle&gt; acfsutil info fs P：\。</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C__GUID-F2144AD9-23BD-4D7D-A306-E8CA3E903147">显示Oracle ACFS版本信息</p>
                     <p>您可以运行<code class="codeph">acfsutil</code> <code class="codeph">version</code>以显示Oracle ACFS版本。例如：</p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil版本acfsutil版本：12.2.0.0.3</pre><p>有关显示Oracle ACFS版本详细信息的更多信息，请参阅<a href="acfs-commands-utilities.html#GUID-C875D02C-3298-4353-8E39-03325312E929">acfsutil版本</a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C__GUID-F4584623-9D8D-4AC1-A008-B77CC859BB90">管理acfsutil命令的跟踪文件</p>
                     <p>自动诊断存储库（ADR）为每个<code class="codeph">acfsutil</code>命令调用生成单独的内部文件，以跟踪命令的操作。这些跟踪文件占用的空间可能会显着增加，某些功能（如基于快照的复制）可能会生成大量跟踪文件。
                     </p>
                     <p>要限制跟踪文件的数量及其占用的空间，可以使用“自动诊断存储库命令解释程序”（ADRCI）实用程序设置策略属性，以在指定的保留期后清除跟踪文件。ADRCI将跟踪文件视为短期文件，保留期由<code class="codeph">SHORTP_POLICY</code>属性的设置控制。您可以使用ADRCI <code class="codeph">show</code> <code class="codeph">control</code>命令查看这些跟踪文件的当前保留期。
                     </p>
                     <p>默认情况下，短期文件保留<code class="codeph">720</code>小时（30天）。以小时为单位的值指定在给定文件符合清除条件时创建后的小时数。要限制这些文件的数量及其消耗的空间，您可以更新为<code class="codeph">SHORTP_POLICY</code>保留期设置的小时数，例如<code class="codeph">240</code>小时（10天）。
                     </p>
                     <p>以下步骤总结了如何更新短期跟踪文件的保留期。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>启动自动诊断存储库命令解释程序（ADRCI）实用程序。</p>
                           <p><code class="codeph">$ adcri</code></p>
                        </li>
                        <li>
                           <p>显示ADR主目录路径（ADR homes）：</p>
                           <p><code class="codeph">ADRCI&gt;展示家园</code></p>
                        </li>
                        <li>
                           <p>如果显示多个主目录，请为要管理的跟踪文件设置适当的主目录：</p>
                           <p><code class="codeph">ADRCI&gt;设置homepath <span class="codeinlineitalic">my_specified_homepath</span></code></p>
                        </li>
                        <li>
                           <p>显示当前配置值。</p>
                           <p><code class="codeph">ADRCI&gt;显示控制</code></p>
                        </li>
                        <li>
                           <p>更新特定的ADRCI配置值。例如，将<code class="codeph">SHORTP_POLICY</code>设置为<code class="codeph">240</code>小时（10天）。
                           </p>
                           <p>在显示的<code class="codeph">show control</code>输出中，检查<code class="codeph">SHORTP_POLICY</code>属性的值，该属性是短期文件的保留期（以小时为单位）。如有必要，请使用以下内容为短期跟踪文件设置新的保留期：</p>
                           <p><code class="codeph">ADRCI&gt;设置控制（SHORTP_POLICY = 240）</code></p>
                        </li>
                     </ul>
                     <p>如果要立即清除当前ADR主路径中的跟踪文件，可以使用以下命令：</p>
                     <p><code class="codeph">ADRCI&gt; purge -type TRACE -age <span class="codeinlineitalic">number_of_minutes</span></code></p>
                     <p>值<span class="italic">number_of_minutes</span>根据文件的年龄控制清除哪些文件。超过指定分钟数的文件将作为清除操作的目标。
                     </p>
                     <div class="infoboxnotealso" id="GUID-FA9F9335-ADA4-48D1-B060-6F096E3BAE6C__ORACLEDATABASEUTILITIESFORINFORMATI-186572DA">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="authenticate-access-asm-instance.html#GUID-7396FD18-628B-4026-AA55-79C6D6205EAE">关于Oracle ASM的权限，</a>以获取有关Oracle ASM的用户权限的信息</p>
                           </li>
                           <li>
                              <p>有关自动诊断存储库命令解释程序（ADRCI）实用<a href="../sutil/oracle-adr-command-interpreter-adrci.html#SUTIL700" target="_blank"><span><cite>程序</cite></span></a>的信息，请参见<a href="../sutil/oracle-adr-command-interpreter-adrci.html#SUTIL700" target="_blank"><span><cite>Oracle数据库实用</cite></span></a>程序</p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OSTMG94787"></a><div class="props_rev_3"><a id="GUID-4C98CF06-8CCC-45F1-9316-C40FB3EFF268" name="GUID-4C98CF06-8CCC-45F1-9316-C40FB3EFF268"></a><h3 id="OSTMG-GUID-4C98CF06-8CCC-45F1-9316-C40FB3EFF268" class="sect3">创建Oracle ACFS文件系统</h3>
               <div>
                  <p>您可以使用本主题中的步骤创建Oracle ACFS文件系统。</p>
                  <div class="section">
                     <p>要创建和验证文件系统，请执行以下步骤：</p>
                     <ol>
                        <li>
                           <p>使用ASMCMD <code class="codeph">volcreate</code>命令在装入的磁盘组中创建Oracle ADVM卷。
                           </p>
                           <p>必须将兼容性参数<code class="codeph">COMPATIBLE.ASM</code>和<code class="codeph">COMPATIBLE.ADVM</code>设置为<code class="codeph">11.2</code>或更高，以使磁盘组包含Oracle ADVM卷。要使用Oracle ACFS加密，复制，安全性或标记，为文件系统创建卷的磁盘组必须具有<code class="codeph">ASM</code>和<code class="codeph">ADVM</code>兼容属性，设置为<code class="codeph">11.2.0.2</code>或更高版本。
                           </p>
                           <p>启动连接到Oracle ASM实例的ASMCMD。您必须是OSASM操作系统组中的用户。</p>
                           <p>在磁盘组中配置Oracle ADVM卷设备时，Oracle建议将Oracle Grid Infrastructure用户和Oracle ASM管理员角色分配给具有root权限的用户。</p>
                           <p>要创建卷：</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; volcreate -G data -s 10G volume1</pre><p>创建Oracle ADVM卷时，会创建包含唯一Oracle ADVM永久磁盘组编号的卷设备名称。卷设备文件的功能与安装文件系统或应用程序直接使用的任何其他磁盘或逻辑卷的功能相同。</p>
                           <p>卷名的格式是特定于平台的。</p>
                        </li>
                        <li>
                           <p>确定已创建卷的设备名称。</p>
                           <p>您可以使用ASMCMD <code class="codeph">volinfo</code>命令或<code class="codeph">V$ASM_VOLUME</code>视图中的<code class="codeph">VOLUME_DEVICE</code>列确定卷设备名称。
                           </p>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; volinfo -G数据卷1磁盘组名称：DATA卷名称：VOLUME1卷设备：/ dev / asm / volume1-123状态：已启用...SQL&gt; SELECT volume_name，volume_device FROM V $ ASM_VOLUME WHERE volume_name ='VOLUME1'; VOLUME_NAME VOLUME_DEVICE ----------------- ------------------------------- ------- VOLUME1 / dev / asm / volume1-123</pre></li>
                        <li>
                           <p>使用Oracle ACFS <code class="codeph">mkfs</code>命令创建文件系统。
                           </p>
                           <p>使用现有卷设备创建文件系统。</p>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">$ / sbin / mkfs -t acfs / dev / asm / volume1-123 mkfs.acfs：version = 19.0.0.0.0 mkfs.acfs：on-disk version = 46.0 mkfs.acfs：volume = / dev / asm / volume1- 123 mkfs.acfs：volume size = 10737418240（10.00 GB）mkfs.acfs：格式化完成。</pre><p>运行<code class="codeph">mkfs</code>不需要<code class="codeph">root</code>权限。卷设备文件的所有权决定了谁可以运行此命令。
                           </p>
                        </li>
                        <li>
                           <p>注册文件系统。</p>
                           <p>在Oracle Grid Infrastructure Clusterware配置中，您可以运行<code class="codeph">srvctl</code> <code class="codeph">add</code> <code class="codeph">filesystem</code>命令来注册和自动挂载文件系统。例如：</p><pre class="oac_no_warn" dir="ltr">#srvctl add filesystem -device / dev / asm / volume1-123 -path / acfsmounts / acfs1 -user user1，user2，user3 -mtowner sysowner -mtgroup sysgrp -mtperm 755</pre><p>您还可以使用<code class="codeph">acfsutil</code> <code class="codeph">registry</code>命令注册文件系统。例如：</p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil注册表-a / dev / asm / volume1-123 / acfsmounts / acfs1</pre><p>在群集装入注册表中注册Oracle ACFS文件系统后，在下一个注册表检查操作期间，文件系统将自动装入注册表项中列出的每个群集成员上。此自动过程每30秒运行一次，无需在群集的每个成员上手动安装文件系统。注册Oracle ACFS文件系统还会导致在Oracle Clusterware或系统重新启动时自动挂载文件系统。</p>
                           <div class="infoboxnote" id="GUID-4C98CF06-8CCC-45F1-9316-C40FB3EFF268__GUID-BAFFD84B-70C8-44E5-B9F3-3CB0E834990B">
                              <p class="notep1">注意：</p>
                              <ul id="GUID-4C98CF06-8CCC-45F1-9316-C40FB3EFF268__UL_C5K_MKF_WGB" style="list-style-type:disc">
                                 <li>在Oracle ACFS文件系统上安装Oracle数据库主目录时，需要<code class="codeph">srvctl</code> <code class="codeph">add</code> <code class="codeph">filesystem</code>命令。在这种情况下，不应使用Oracle ACFS注册命令（ <code class="codeph">acfsutil</code> <code class="codeph">registry</code> ）将文件系统显式添加到<code class="codeph">registry</code> 。
                                 </li>
                                 <li>Oracle Restart（独立）配置不支持Oracle ACFS注册，该配置是单实例（非群集）环境。</li>
                                 <li>修改注册表需要<code class="codeph">root</code>或<code class="codeph">asmadmin</code>权限。Windows <code class="codeph">Administrator</code>权限等同于Linux上的<code class="codeph">root</code>权限。
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li>
                           <p>挂载或启动文件系统。</p>
                           <p>如果您以前注册过文件系统，则使用SRVCTL启动文件系统。例如：</p><pre class="oac_no_warn" dir="ltr">$ srvctl start filesystem -device / dev / asm / volume1-123</pre><p>如果以前未注册过文件系统，请使用Oracle ACFS <code class="codeph">mount</code>命令安装文件系统。例如：</p><pre class="oac_no_warn" dir="ltr">＃/ bin / mount -t acfs / dev / asm / volume1-123 / acfsmounts / acf1</pre><p>挂载未注册的文件系统后，请确保将权限设置为允许适当用户访问文件系统。例如：</p><pre class="oac_no_warn" dir="ltr">#chown -R oracle：dba / acfsmounts / acfs1</pre><p>运行<code class="codeph">mount</code>命令需要<code class="codeph">root</code>权限，运行<code class="codeph">acfsmountvol</code>命令需要Windows <code class="codeph">Administrator</code>权限。
                           </p>
                        </li>
                        <li>
                           <p>在文件系统中创建测试文件。</p>
                           <p>创建测试文件的用户应该是用于访问文件系统的用户。此测试确保适当的用户可以写入文件系统。</p>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">$ echo“Oracle ACFS文件系统”&gt; / acfsmounts / acfs1 / myfile</pre></li>
                        <li>
                           <p>列出在文件系统中创建的测试文件的内容。</p>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">$ cat / acfsmounts / acfs1 / myfile Oracle ACFS文件系统</pre></li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-4C98CF06-8CCC-45F1-9316-C40FB3EFF268__GUID-FCC052BA-377E-47E5-8641-9F05EFF9E50C">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li><a href="diskgroup-compatibility.html#GUID-AE540604-92D9-4CFE-A40E-BF4486163772">磁盘组兼容性属性</a>有关磁盘组兼容性设置的信息。
                           </li>
                           <li><a href="authenticate-access-asm-instance.html#GUID-7396FD18-628B-4026-AA55-79C6D6205EAE">关于Oracle ASM的权限，</a>以获取有关操作系统组和权限的信息</li>
                           <li>有关创建Oracle ACFS文件系统的命令的信息，请<a href="acfs-commands-windows.html#GUID-ED6D0BB2-4182-4DA0-A50D-9F5B878E2DDB">参见</a> <a href="acfs-commands-linux.html#GUID-458DC5C6-2218-4C6F-866B-1B9DAB7C278D">mkfs</a> （Linux环境）或<a href="acfs-commands-windows.html#GUID-ED6D0BB2-4182-4DA0-A50D-9F5B878E2DDB">acfsformat</a> （Windows）</li>
                           <li>有关<code class="codeph">volcreate</code>命令和<code class="codeph">volinfo</code>命令的信息，请<a href="manage-advm-asmcmd.html#GUID-07E90E70-406A-4273-B27F-9F2ED7C1C4BF" title="Oracle ASM命令行实用程序（ASMCMD）提供用于管理Oracle ADVM卷的命令。">使用ASMCMD管理Oracle ADVM</a></li>
                           <li><a href="acfs-commands-utilities.html#GUID-57DE893C-37A2-4427-8CC3-76EB3196A4A6">acfsutil注册表，</a>以获取有关注册Oracle ACFS文件系统的<code class="codeph">acfsutil</code> <code class="codeph">registry</code>命令的信息</li>
                           <li><a href="understand-acfs-concepts.html#GUID-FD24F249-E9BB-4E63-B992-11A9868F5D7B" title="Oracle ACFS装入注册表支持Oracle Grid Infrastructure群集配置，但不支持Oracle Restart配置。">关于Oracle ACFS Mount Registry</a> ，了解有关注册Oracle ACFS文件系统的信息</li>
                           <li><a href="acfs-commands-linux.html#GUID-CF7314E2-D95E-45CF-9D1D-155C1AC39A1F">mount</a> （Linux环境）或<a href="acfs-commands-windows.html#GUID-1AD5F2D8-0E85-4566-8296-655DE3EDA42D">acfsmountvol</a> （Windows），以获取有关装入Oracle ACFS文件系统的命令的信息</li>
                           <li>有关<code class="codeph">V$ASM_VOLUME</code>视图的信息，请<a href="../refrn/V-ASM_VOLUME.html#REFRN30625" target="_blank"><span><cite>参见Oracle数据库参考</cite></span></a></li>
                           <li>有关服务器控制实用程序（SRVCTL）命令的信息，请参阅<a href="../cwadd/server-control-command-reference.html#CWADD-GUID-F2CBA060-E4F2-4EB1-A0A7-11144D68A26A" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OSTMG94788"></a><div class="props_rev_3"><a id="GUID-37D5ACB8-BFBA-4CC2-B90F-C9C72C47F956" name="GUID-37D5ACB8-BFBA-4CC2-B90F-C9C72C47F956"></a><h3 id="OSTMG-GUID-37D5ACB8-BFBA-4CC2-B90F-C9C72C47F956" class="sect3">访问群集中不同节点上的Oracle ACFS文件系统</h3>
               <div>
                  <div class="section">
                     <p>如果节点是群集的一部分，请在节点2上执行以下步骤以查看在节点1上创建的测试文件。</p>
                     <div class="infoboxnote" id="GUID-37D5ACB8-BFBA-4CC2-B90F-C9C72C47F956__GUID-04C84C36-7D56-4972-9EDC-CCF2170CF471">
                        <p class="notep1">注意：</p>
                        <p>如果已使用Oracle ACFS装入注册表注册了文件系统，则可以跳过步骤1到3。</p>
                     </div>
                     <ol>
                        <li>
                           <p>启用先前在节点1上创建和启用的卷。</p>
                           <p>启动连接到Oracle ASM实例的ASMCMD。您必须是OSASM操作系统组中的用户。</p>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; volenable -G数据卷1</pre></li>
                        <li>
                           <p>查看有关在节点1上创建的卷的信息。</p>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">ASMCMD [+]&gt; volinfo -G数据卷1</pre></li>
                        <li>
                           <p>使用Oracle ACFS <code class="codeph">mount</code>命令<code class="codeph">mount</code>文件系统。
                           </p>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">＃/ bin / mount -t acfs / dev / asm / volume1-123 / acfsmounts / acfs1</pre><p><code class="codeph">root</code>权限是必需的运行<code class="codeph">mount</code>命令，运行<code class="codeph">acfsmountvol</code>命令需要Windows <code class="codeph">Administrator</code>权限。
                           </p>
                           <p>装入文件系统后，请确保将权限设置为允许适当用户访问。</p>
                        </li>
                        <li>
                           <p>列出先前在文件系统上创建的测试文件的内容。</p>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">$ cat / acfsmounts / acfs1 / myfile Oracle ACFS文件系统</pre><p>内容应与先前在节点1上创建的文件匹配。</p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-37D5ACB8-BFBA-4CC2-B90F-C9C72C47F956__GUID-1C65DAA5-81D6-4F33-A034-838C94ADB64F">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="authenticate-access-asm-instance.html#GUID-7396FD18-628B-4026-AA55-79C6D6205EAE">关于Oracle ASM的权限，</a>以获取有关操作系统组和权限的信息。
                              </p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">volenable</code>命令的信息，请<a href="manage-advm-asmcmd.html#GUID-07E90E70-406A-4273-B27F-9F2ED7C1C4BF" title="Oracle ASM命令行实用程序（ASMCMD）提供用于管理Oracle ADVM卷的命令。">使用ASMCMD管理Oracle ADVM</a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">volinfo</code>命令的信息，请<a href="manage-advm-asmcmd.html#GUID-07E90E70-406A-4273-B27F-9F2ED7C1C4BF" title="Oracle ASM命令行实用程序（ASMCMD）提供用于管理Oracle ADVM卷的命令。">使用ASMCMD管理Oracle ADVM</a></p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-linux.html#GUID-CF7314E2-D95E-45CF-9D1D-155C1AC39A1F">mount</a> （Linux环境）或<a href="acfs-commands-windows.html#GUID-1AD5F2D8-0E85-4566-8296-655DE3EDA42D">acfsmountvol</a> （Windows），以获取有关装入Oracle ACFS文件系统的命令的信息</p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OSTMG94789"></a><div class="props_rev_3"><a id="GUID-9BBF5D63-7EF7-4229-8A05-D1D9EEB62CC6" name="GUID-9BBF5D63-7EF7-4229-8A05-D1D9EEB62CC6"></a><h3 id="OSTMG-GUID-9BBF5D63-7EF7-4229-8A05-D1D9EEB62CC6" class="sect3">管理Oracle ACFS快照</h3>
               <div>
                  <div class="section">
                     <p><a id="d130763e1499" class="indexterm-anchor"></a>要在节点1上创建和验证快照：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>创建在节点1上创建的新文件系统的快照。</span><div>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil snap创建mysnapshot_20090725 / acfsmounts / acfs1</pre><p>请参阅<span class="q">“ <a href="acfs-commands-snapshots.html#GUID-A1E4A4B5-CD16-4ADC-817D-4CD7D2DA12DF">acfsutil snap create</a> ”</span> 。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>更新文件系统中的测试文件，使其与快照不同。</span><div>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">$ echo“在Oracle ACFS文件系统中修改文件”&gt; / acfsmounts / acfs1 / myfile</pre></div>
                     </li>
                     <li class="stepexpand"><span>列出测试文件的内容和测试文件的快照视图。</span><div>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">$ cat / acfsmounts / acfs1 / myfile $ cat / acfsmounts / acfs1 /。ACFS /扣/ mysnapshot_20090725 / MYFILE</pre><p>测试文件和快照的内容应该不同。如果节点1在群集中，则可以在节点2上执行相同的列表操作。</p>
                        </div>
                     </li>
                  </ol>
               </div>
            </div><a id="OSTMG94790"></a><div class="props_rev_3"><a id="GUID-30627065-670B-4477-B504-B41D50D476DF" name="GUID-30627065-670B-4477-B504-B41D50D476DF"></a><h3 id="OSTMG-GUID-30627065-670B-4477-B504-B41D50D476DF" class="sect3">保护Oracle ACFS文件系统</h3>
               <div>
                  <p>本主题讨论了在Linux上管理Oracle ACFS文件系统安全性的基本操作。</p>
                  <p>本主题中的方案显示了如何使用Oracle ACFS安全性来确保只有维护用户可以在维护期间访问病历文件。Oracle ACFS加密也在同一文件系统上启用。</p>
                  <p>在此方案中，为文件系统创建卷的磁盘组具有<code class="codeph">ASM</code>和<code class="codeph">ADVM</code>兼容属性，设置为<code class="codeph">11.2.0.3</code>或更高版本。
                  </p>
                  <p>对于本节中的示例，必须存在各种操作系统用户，操作系统组和目录。</p>
                  <p>管理安全性的基本步骤是：</p>
                  <ol>
                     <li>
                        <p>初始化Oracle ACFS的安全性。</p>
                        <p>运行<code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">init</code>命令为安全凭据配置存储，并将操作系统用户标识为第一个安全管理员和操作系统安全组。安全管理员必须属于操作系统组。必须在任何其他安全命令之前运行此命令，并且需要运行root或Windows <code class="codeph">Administrator</code>权限。
                        </p>
                        <p><code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">init</code>命令仅运行一次，以便为每个群集设置Oracle ACFS安全性，并且可以从群集中的任何节点运行。其他安全命令也可以从群集中的任何节点运行。安全管理员对于群集中的所有Oracle ACFS文件系统都很常见。
                        </p>
                        <p>例如，以下命令初始化群集的安全性并创建第一个安全管理员（ <code class="codeph">medHistAdmin1</code> ）。
                        </p><pre class="oac_no_warn" dir="ltr">＃/ sbin / acfsutil sec init -u medHistAdmin1 -g medHistAdminGrp</pre><p><code class="codeph">medHistAdmin1</code>安全管理员必须属于<code class="codeph">medHistAdminGrp</code>操作系统组。该组被标识为安全管理员的安全组。
                        </p>
                        <p>当root用户或Windows <code class="codeph">Administrator</code>用户运行该命令时，用户会为安全管理员分配安全密码。安全管理员可以使用<code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">admin</code> <code class="codeph">password</code>命令更改其密码。
                        </p>
                        <p>所有<code class="codeph">acfsutil</code> <code class="codeph">sec</code>命令（除了<code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">init</code> ）必须由Oracle ACFS安全管理员运行，并且在运行每个命令时，系统会提示管理员输入安全管理员的密码。
                        </p>
                        <div class="infoboxnote" id="GUID-30627065-670B-4477-B504-B41D50D476DF__GUID-920A0B23-C475-484B-897F-B187ED7FAFDE">
                           <p class="notep1">注意：</p>
                           <p>提示输入安全管理员密码时，将显示以下文本： <code class="codeph">Realm</code> <code class="codeph">management</code> <code class="codeph">password</code></p>
                           <p>所需的密码是Oracle ACFS安全管理员的密码，而不是用户的操作系统密码。</p>
                        </div>
                        <p>允许安全管理员浏览Oracle ACFS文件系统中的所有目录，无论它们是否具有基础操作系统权限以及是否有任何领域检查允许它。此功能使安全管理员可以在使用Oracle ACFS安全领域保护文件时检查文件的位置。但是，如果没有相应的操作系统和安全领域权限，安全管理员无法查看单个文件的内容。</p>
                     </li>
                     <li>
                        <p>根据需要添加其他安全管理员。</p>
                        <p>第一个安全管理员可以使用<code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">admin</code> <code class="codeph">add</code>命令添加其他安全管理员来管理Oracle ACFS安全性。
                        </p>
                        <p>例如，添加新的安全管理员<code class="codeph">medHistAdmin2</code> 。
                        </p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil sec admin添加medHistAdmin2</pre><p><code class="codeph">medHistAdmin2</code>用户必须属于使用<code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">init</code>命令标识为安全管理员组的操作系统组（ <code class="codeph">medHistAdminGrp</code> ）。
                        </p>
                        <p><code class="codeph">medHistAdmin2</code>安全管理员应使用<code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">admin</code> <code class="codeph">password</code>命令更改分配的临时安全密码。<code class="codeph">medHistAdmin2</code>管理员可以添加新的安全管理员。
                        </p>
                     </li>
                     <li>
                        <p>准备Oracle ACFS文件系统以确保安全性。</p>
                        <p>在添加任何安全域之前，在Oracle ACFS文件系统上运行<code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">prepare</code> 。
                        </p>
                        <p>例如，准备安装在<code class="codeph">/acfsmounts/acfs1</code>上的Oracle ACFS文件系统， <code class="codeph">/acfsmounts/acfs1</code>获得Oracle ACFS安全性。
                        </p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil sec prepare -m / acfsmounts / acfs1</pre><p>默认情况下，运行此命令后，将为文件系统启用安全性。您可以使用<code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">disable</code>或<code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">enable</code>命令显式禁用或启用安全性。
                        </p>
                        <p>此命令自动创建多个安全域，例如<code class="codeph">SYSTEM_BackupOperators</code>安全域。管理员可以将用户添加到<code class="codeph">SYSTEM_BackupOperators</code>领域，从而为这些用户提供在Oracle ACFS文件系统中备份领域安全文件的权限。
                        </p>
                     </li>
                     <li>
                        <p>为此文件系统提供加密。</p>
                        <p>加密文件系统是可选的，但在此方案中已启用。</p>
                        <ol type="a">
                           <li>
                              <p>首先，运行<code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">init</code>命令初始化加密并创建加密密钥所需的存储。对于每个已设置加密的群集，必须运行此命令一次。
                              </p>
                              <p>例如，以下命令初始化群集的加密。</p><pre class="oac_no_warn" dir="ltr">＃/ sbin / acfsutil encr init</pre><p>必须在任何其他加密命令之前运行此命令，并且需要运行root或管理员权限。</p>
                           </li>
                           <li>
                              <p>接下来，运行<code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">set</code>命令为Oracle ACFS文件系统设置加密。
                              </p>
                              <p>例如，以下命令为<code class="codeph">/acfsmounts/acfs1</code>目录上安装的文件系统设置加密。
                              </p><pre class="oac_no_warn" dir="ltr">＃/ sbin / acfsutil encr set -m / acfsmounts / acfs1 /</pre><p><code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">set</code>命令透明地生成卷加密密钥，该密钥存储在先前使用<code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">init</code>命令配置的密钥存储区中。此命令需要root或管理员权限才能运行。
                              </p>
                           </li>
                        </ol>
                     </li>
                     <li>
                        <p>在文件系统上创建安全领域。</p>
                        <p>运行<code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">realm</code> <code class="codeph">create</code>命令为文件系统创建安全领域。
                        </p>
                        <p>例如，创建一个名为<code class="codeph">medHistRealm</code>的安全<code class="codeph">medHistRealm</code> ，其中包含医疗记录文件以及在<code class="codeph">medHistRealm</code>加密的所有文件。
                        </p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil sec realm在-a AES -k 128上创建medHistRealm -m / acfsmounts / acfs1 / -e</pre><p><code class="codeph">-e</code>选项指定<code class="codeph">-e</code>所有文件都使用<code class="codeph">AES</code>算法加密，密钥长度设置为128位。必须首先使用<code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">init</code>和<code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">set</code>命令准备文件系统以进行加密。使用<code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">set</code>命令输入的<code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">realm</code> <code class="codeph">create</code> <code class="codeph">acfsutil</code>为<code class="codeph">-k</code>选项输入相同的值。
                        </p>
                     </li>
                     <li>
                        <p>创建安全规则。</p>
                        <p>运行<code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">rule</code> <code class="codeph">create</code>命令以创建规则，以确定对安全领域的文件和目录的访问。
                        </p>
                        <p>例如，创建可以使<code class="codeph">medMaintenance</code>用户访问10 PM到2 AM的医疗记录以进行文件维护的规则。此外，创建可以在上午8点到上午9点拒绝操作的规则，并拒绝对<code class="codeph">medBrowse</code>用户的操作。
                        </p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil sec rule create medHistRule1a -m / acfsmounts / acfs1 / -t time 22：00：00,02：00：00 -o ALLOW $ / sbin / acfsutil sec rule create medHistRule1b -m / acfsmounts / acfs1 /  - t username medMaintenance -o ALLOW $ / sbin / acfsutil sec rule create medHistRule1c -m / acfsmounts / acfs1 / -t time 08：00：00,09：00：00 -o DENY $ / sbin / acfsutil sec rule create medHistRule1d -m / acfsmounts / acfs1 / -t username medBrowse -o DENY</pre><p>您可以使用<code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">rule</code> <code class="codeph">edit</code>命令编辑规则。
                        </p>
                     </li>
                     <li>
                        <p>创建安全规则集并向规则集添加规则。</p>
                        <p>运行<code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">ruleset</code> <code class="codeph">create</code>命令以创建可以添加规则的规则集。
                        </p>
                        <p>例如，创建名为<code class="codeph">medRuleSet1</code>和<code class="codeph">medRuleSet2</code>规则集，其中包含对安全<code class="codeph">medHistRealm</code>领域的文件和目录的操作规则。
                        </p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil sec ruleset create medRuleSet1 -m / acfsmounts / acfs1 / $ / sbin / acfsutil sec ruleset create medRuleSet2 -m / acfsmounts / acfs1 /</pre><p>将现有规则添加到规则集。</p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil sec ruleset edit medRuleSet1 -m / acfsmounts / acfs1 / -a medHistRule1a，medHistRule1b -o ALL_TRUE $ / sbin / acfsutil sec ruleset edit medRuleSet2 -m / acfsmounts / acfs1 / -a medHistRule1c，medHistRule1d -o ALL_TRUE</pre><p><code class="codeph">ALL_TRUE</code>选项是默认操作，但在此处添加以强调每个规则集中的两个规则都必须为true。
                        </p>
                     </li>
                     <li>
                        <p>将对象添加到安全领域。</p>
                        <p>运行<code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">realm</code> <code class="codeph">add</code>命令，将对象（如命令规则，规则集和文件）添加到安全领域。例如，将<code class="codeph">medRuleSet1</code>和<code class="codeph">medRuleSet2</code>规则集以及<code class="codeph">/acfsmounts/acfs1/medicalrecords</code>目录中的所有文件<code class="codeph">/acfsmounts/acfs1/medicalrecords</code>到<code class="codeph">medHistRealm</code> 。
                        </p>
                        <p>将规则集添加到域时，会使用命令规则添加规则集，例如<code class="codeph">DELETEFILE:medRuleSet1</code> 。每个命令规则只能包含一个规则集。要显示命令规则列表，请使用带<code class="codeph">-c</code>选项的<code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">info</code> 。
                        </p>
                        <p>以下<code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">realm</code> <code class="codeph">add</code>命令使<code class="codeph">medMaintenance</code>用户可以在<code class="codeph">medMaintenance</code> 10点到凌晨2点之间删除医疗记录，但会在上午8点到9点之间阻止写入文件。</p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil sec realm add medHistRealm -m / acfsmounts / acfs1 / -l DELETEFILE：medRuleSet1 -f -r / acfsmounts / acfs1 / medicalrecords</pre><p>此<code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">realm</code> <code class="codeph">add</code>命令可防止<code class="codeph">medBrowse</code>用户随时写入或删除医疗记录。
                        </p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil sec realm add medHistRealm -m / acfsmounts / acfs1 / -l WRITE：medRuleSet2 -f -r / acfsmounts / acfs1 / medicalrecords</pre><p>此<code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">realm</code> <code class="codeph">add</code>命令将备份操作符添加到使用<code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">prepare</code>命令自动创建的<code class="codeph">SYSTEM_BackupOperators</code>安全<code class="codeph">acfsutil</code> 。
                        </p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil sec realm添加SYSTEM_BackupOperators -m / acfsmounts / acfs1 / -G sysBackupGrp</pre><p>属于<code class="codeph">sysBackupGrp</code>操作系统组的用户现在可以在Oracle ACFS文件系统中备份域安全文件。
                        </p>
                     </li>
                     <li>
                        <p>显示安全信息。</p>
                        <p>运行<code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">info</code>命令以显示安全领域的信息。例如，显示<code class="codeph">medHistRealm</code>领域的安全信息。
                        </p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil sec info -m / acfsmounts / acfs1 / -n medHistRealm</pre><p>要显示文件或目录所属的安全域，请运行<code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">info</code> <code class="codeph">file</code>命令。例如：</p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil sec info file -m / acfsmounts / acfs1 // acfsmounts / acfs1 / medicalrecords</pre></li>
                     <li>
                        <p>将安全元数据保存为备份。</p>
                        <p>运行<code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">save</code>命令以保存文件系统的安全元数据。
                        </p>
                        <p>例如，将<code class="codeph">/acfsmounts/acfs1</code>文件系统的安全元数据保存到<code class="codeph">acfs1_backup.xml</code>文件中。
                        </p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil sec save -m / acfsmounts / acfs1 -p acfs1_backup.xml</pre><p><code class="codeph">acfs1_backup.xml</code>安全元数据备份文件保存在<code class="codeph">/acfsmounts/acfs1/.Security/backup/</code>目录。可以使用<code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">load</code>命令加载保存的XML文件。
                        </p>
                     </li>
                  </ol>
                  <p>您可以使用<code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">batch</code>命令在批处理文件中运行一些<code class="codeph">acfsutil</code> <code class="codeph">sec</code>命令。例如，您可以创建一个包含一组<code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">rule</code>和<code class="codeph">acfsutil</code> <code class="codeph">sec</code> <code class="codeph">ruleset</code>命令的批处理文件。
                  </p>
                  <p>Oracle ACFS安全性的审计和诊断数据将保存到日志文件中。</p>
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-30627065-670B-4477-B504-B41D50D476DF__GUID-420CE3F6-5339-4C88-9F09-2F48E866CA92">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="understand-acfs-admin.html#GUID-41F44E7A-7547-4D04-A8E7-072C3A697867" title="Oracle ACFS安全性为Oracle ACFS文件系统提供基于域的安全性，使您能够创建域以指定用户和组的安全策略，以确定对文件系统对象的访问。">Oracle ACFS Security</a>有关Oracle ACFS安全性的更多信息，包括安全日志文件</p>
                           </li>
                           <li>
                              <p><a href="diskgroup-compatibility.html#GUID-FBB5AA72-5208-48E1-BD8D-0FD4C6876F34" title="您无法将磁盘组兼容性还原为以前的值。相反，您必须创建一个新磁盘组。该主题描述了由磁盘组兼容性属性设置的有效组合启用的Oracle ASM功能。如果提高了磁盘组兼容性，则可以启用创建太大而无法由以前版本的Oracle数据库管理的文件。">磁盘组兼容性</a>有关磁盘组兼容性的信息</p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-security.html#GUID-FA4C734F-B9DF-4DB2-9FA6-A7C718F97FC1">acfsutil sec prepare</a>和<a href="acfs-commands-security.html#GUID-31CF0758-2435-407F-9A38-F1595444F926">acfsutil sec init，</a>以获取有关设置安全性的命令的信息</p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-security.html#GUID-ED84C595-0703-47FC-A52B-EA7A952E88EE">acfsutil sec disable</a>和<a href="acfs-commands-security.html#GUID-86CED875-09A6-485A-A25A-9A5B7FD7A3A3">acfsutil sec启用</a>有关启用和禁用安全性的命令的信息</p>
                           </li>
                           <li>
                              <p>有关管理安全管理的命令的信息，请使用<a href="acfs-commands-security.html#GUID-F34883A3-C671-456B-AA01-717705CC556D">acfsutil sec admin add</a>和<a href="acfs-commands-security.html#GUID-F025A8CD-06BF-454C-A7BE-03AC4E5DEEA6">acfsutil sec admin密码</a></p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-encryption.html#GUID-0E8E9F8F-0B69-4502-8236-62110A86E95C">acfsutil encr init</a>和<a href="acfs-commands-encryption.html#GUID-4714B6EF-28B7-4318-A209-ADF7A2546586">acfsutil encr设置</a>有关管理加密的命令的信息</p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-security.html#GUID-682EF476-E703-480E-8A59-6EF21D4D3EF1">acfsutil sec realm create</a> ， <a href="acfs-commands-security.html#GUID-A184A170-4A4C-498E-9154-FFD3D16796BF">acfsutil sec realm add</a>和<a href="acfs-commands-security.html#GUID-952AFC21-F35F-4CB0-A946-BDBF2639AE69">acfsutil sec realm delete</a>有关管理安全领域的命令的信息</p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-security.html#GUID-60151212-441D-4273-9423-EAC22A0ECBDD">acfsutil sec rule create</a>和<a href="acfs-commands-security.html#GUID-E541D4CF-E833-4567-A073-916C3A53FD93">acfsutil sec rule edit，</a>以获取有关管理安全规则的命令的信息</p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-security.html#GUID-3821648B-687B-4AE8-A46A-999820310FD5">acfsutil sec ruleset create</a>和<a href="acfs-commands-security.html#GUID-5BBC2F49-1A4E-4490-96E2-BB2CF0B7C23D">acfsutil sec ruleset edit，</a>以获取有关管理安全规则集的命令的信息</p>
                           </li>
                           <li>
                              <p>有关显示安全信息的命令的<a href="acfs-commands-security.html#GUID-2373D7DF-FA6C-4F7F-B871-0D031203B70B">信息</a> ，请<a href="acfs-commands-security.html#GUID-67241B46-B25F-4BCE-AE9F-93D12D5FEBE9">参见</a> <a href="acfs-commands-security.html#GUID-2373D7DF-FA6C-4F7F-B871-0D031203B70B">acfsutil sec info</a>和<a href="acfs-commands-security.html#GUID-67241B46-B25F-4BCE-AE9F-93D12D5FEBE9">acfsutil sec info文件</a></p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-security.html#GUID-C9961816-7F9D-4CEC-9265-02FA25D28F4D">acfsutil sec save</a>和<a href="acfs-commands-security.html#GUID-22923FB9-45B6-4295-9F0A-C2FCDDA9FB2E">acfsutil sec load</a>有关加载和保存安全元数据的命令的信息</p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-security.html#GUID-8D9D2934-B875-4A27-8C69-82FDC6A5B8CB">acfsutil秒批次</a>的信息，有关运行<code class="codeph">acfsutil</code> <code class="codeph">sec</code>在批处理文件中的命令</p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OSTMG94791"></a><div class="props_rev_3"><a id="GUID-01EA8FA1-C136-4968-86D4-9F54B39F903C" name="GUID-01EA8FA1-C136-4968-86D4-9F54B39F903C"></a><h3 id="OSTMG-GUID-01EA8FA1-C136-4968-86D4-9F54B39F903C" class="sect3">加密Oracle ACFS文件系统</h3>
               <div>
                  <p>本主题讨论了在Linux上管理Oracle ACFS文件系统上的加密的基本操作。</p>
                  <p>本节中的示例显示了在Oracle ACFS文件系统中加密病历文件的方案。本节中的步骤假定未为文件系统配置Oracle ACFS安全性;但是，您可以在同一文件系统上同时使用Oracle ACFS安全性和加密。如果您决定同时使用安全性和加密，则必须为包含文件系统的群集初始化加密和安全性。在文件系统上初始化安全性之后，Oracle ACFS安全管理员运行<code class="codeph">acfsutil</code> <code class="codeph">sec</code>命令为文件系统提供加密。
                  </p>
                  <p>由于<code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">set</code>和<code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">rekey</code> <code class="codeph">-v</code>命令会修改加密密钥库，因此应在运行这些命令后备份Oracle Cluster Registry（OCR）以确保存在包含所有卷加密密钥的OCR备份（VEK） ）用于文件系统。
                  </p>
                  <p>为文件系统创建卷的磁盘组具有<code class="codeph">ASM</code>和<code class="codeph">ADVM</code>兼容属性，设置为<code class="codeph">11.2.0.3</code>或更高版本。
                  </p>
                  <p>对于本节中的示例，必须存在各种操作系统用户，操作系统组和目录。</p>
                  <p>管理加密的基本步骤是：</p>
                  <ol>
                     <li>
                        <p>初始化加密。</p>
                        <p>运行<code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">init</code>命令初始化加密并创建加密密钥所需的存储。对于每个已设置加密的群集，必须运行此命令一次。
                        </p>
                        <p>例如，以下命令初始化群集的加密。</p><pre class="oac_no_warn" dir="ltr">＃/ sbin / acfsutil encr init</pre><p>必须在任何其他加密命令之前运行此命令，并且需要运行root或管理员权限。</p>
                     </li>
                     <li>
                        <p>设置加密参数。</p>
                        <p>执行命令<code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">set</code> ，配置整个Oracle ACFS文件系统的加密参数。
                        </p>
                        <p>例如，以下命令为安装在<code class="codeph">/acfsmounts/acfs1</code>目录中的文件系统设置<code class="codeph">AES</code>加密算法和文件密钥长度<code class="codeph">128</code> 。
                        </p><pre class="oac_no_warn" dir="ltr">＃/ sbin / acfsutil encr set -a AES -k 128 -m / acfsmounts / acfs1 /</pre><p><code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">set</code>命令还透明地生成卷加密密钥，该密钥存储在先前使用<code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">init</code>命令配置的密钥存储区中。
                        </p>
                        <p>此命令需要root或管理员权限才能运行。</p>
                     </li>
                     <li>
                        <p>启用加密。</p>
                        <p>运行<code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">on</code>命令以启用目录和文件的加密。
                        </p>
                        <p>例如，以下命令以递归方式对<code class="codeph">/acfsmounts/acfs1/medicalrecords</code>目录中的所有文件启用加密。
                        </p><pre class="oac_no_warn" dir="ltr">＃/ sbin / acfsutil encr on -r / acfsmounts / acfs1 / medicalrecords -m / acfsmounts / acfs1 /</pre><p>对于具有访问<code class="codeph">/acfsmounts/acfs1/medicalrecords</code>目录中文件的适当权限的用户，他们仍然可以读取解密文件。
                        </p>
                        <p>此命令可由管理员或文件所有者运行。</p>
                     </li>
                     <li>
                        <p>显示加密信息。</p>
                        <p>执行命令<code class="codeph">acfsutil</code> <code class="codeph">encr</code> <code class="codeph">info</code> ，显示目录和文件的加密信息。
                        </p><pre class="oac_no_warn" dir="ltr">＃/ sbin / acfsutil encr info -m / acfsmounts / acfs1 / -r / acfsmounts / acfs1 / medicalrecords</pre><p>此命令可由管理员或文件所有者运行。</p>
                     </li>
                  </ol>
                  <p>Oracle ACFS加密的审计和诊断数据将保存到日志文件中。 。</p>
                  <div class="infoboxnotealso" id="GUID-01EA8FA1-C136-4968-86D4-9F54B39F903C__GUID-01FAFE88-5F1E-4832-86E6-3067B7D6EB3A">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="understand-acfs-admin.html#GUID-5591C710-D763-4F72-BB56-A1452CA6AAB2" title="Oracle ACFS加密使您可以加密存储在磁盘上的数据（静态数据）。">Oracle ACFS加密</a>有关Oracle ACFS加密的更多信息，包括日志文件</p>
                        </li>
                        <li>
                           <p>有关使用加密设置安全性的信息，请<a href="steps-manage-acfs.html#GUID-30627065-670B-4477-B504-B41D50D476DF" title="本主题讨论了在Linux上管理Oracle ACFS文件系统安全性的基本操作。">保护Oracle ACFS文件系统</a></p>
                        </li>
                        <li>
                           <p><a href="diskgroup-compatibility.html#GUID-FBB5AA72-5208-48E1-BD8D-0FD4C6876F34" title="您无法将磁盘组兼容性还原为以前的值。相反，您必须创建一个新磁盘组。该主题描述了由磁盘组兼容性属性设置的有效组合启用的Oracle ASM功能。如果提高了磁盘组兼容性，则可以启用创建太大而无法由以前版本的Oracle数据库管理的文件。">磁盘组兼容性</a>有关磁盘组兼容性的信息</p>
                        </li>
                        <li>
                           <p><a href="acfs-commands-encryption.html#GUID-0E8E9F8F-0B69-4502-8236-62110A86E95C">acfsutil encr init</a>有关初始化加密的信息</p>
                        </li>
                        <li>
                           <p><a href="acfs-commands-encryption.html#GUID-4714B6EF-28B7-4318-A209-ADF7A2546586">acfsutil encr设置</a>有关设置加密参数的信息</p>
                        </li>
                        <li>
                           <p><a href="acfs-commands-encryption.html#GUID-CEF666C5-2B32-4596-9D08-9DBCE96CDA30">acfsutil encr on</a>有关启用加密的信息</p>
                        </li>
                        <li>
                           <p><a href="acfs-commands-encryption.html#GUID-FFFD4D00-7657-4D57-834A-B78F7656E2A9">acfsutil encr info</a>显示加密信息的信息</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="OSTMG94792"></a><div class="props_rev_3"><a id="GUID-1C351316-3D71-4520-A412-95AE85F56453" name="GUID-1C351316-3D71-4520-A412-95AE85F56453"></a><h3 id="OSTMG-GUID-1C351316-3D71-4520-A412-95AE85F56453" class="sect3">标记Oracle ACFS文件系统</h3>
               <div>
                  <p>本主题讨论了在Linux上管理Oracle ACFS文件系统中的目录和文件的标记的操作。</p>
                  <p></p>
                  <p>为文件系统创建卷的磁盘组具有<code class="codeph">ASM</code>和<code class="codeph">ADVM</code>兼容属性，设置为<code class="codeph">11.2.0.3</code>或更高版本。
                  </p>
                  <p>Oracle ACFS使用扩展属性实现标记。使用应该检查的扩展属性时有一些要求。</p>
                  <p>管理标记的步骤是：</p>
                  <ol>
                     <li>
                        <p>指定目录和文件的标记名称。</p>
                        <p>运行<code class="codeph">acfsutil</code> <code class="codeph">tag</code> <code class="codeph">set</code>命令在目录或文件上设置标记。您可以使用这些标记指定要复制的对象。
                        </p>
                        <p>例如，将<code class="codeph">comedy</code>和<code class="codeph">drama</code>标签添加到<code class="codeph">/acfsmounts/repl_data/films</code>目录的子目录中的文件。
                        </p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil标签设置-r comedy / acfsmounts / repl_data / films / comedies $ / sbin / acfsutil标签设置-r drama / acfsmounts / repl_data / films / dramas $ / sbin / acfsutil标签设置-r drama / acfsmounts / repl_data /膜/奥秘</pre><p>在此示例中，故意使用<code class="codeph">drama</code>标记两次，并且在稍后的步骤中更改该标记。
                        </p>
                        <p>您必须具有系统管理员权限或者是文件所有者才能运行此命令。</p>
                     </li>
                     <li>
                        <p>显示标记信息。</p>
                        <p>运行<code class="codeph">acfsutil</code> <code class="codeph">tag</code> <code class="codeph">info</code>命令以显示Oracle ACFS文件系统中目录或文件的标记名称。不显示没有标签的文件。
                        </p>
                        <p>例如，显示<code class="codeph">/acfsmounts/repl_data/films</code>目录中文件的标记信息。
                        </p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil标签信息-r / acfsmounts / repl_data / films</pre><p>在<code class="codeph">/acfsmounts/repl_data/films</code>目录中显示带有<code class="codeph">drama</code>标记的文件的标记信息。
                        </p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil标签信息-t drama -r / acfsmounts / repl_data / films</pre><p>您必须具有系统管理员权限或者是文件所有者才能运行此命令。</p>
                     </li>
                     <li>
                        <p>如有必要，删除并更改标签名称。</p>
                        <p>运行<code class="codeph">acfsutil</code> <code class="codeph">tag</code> <code class="codeph">unset</code>命令删除目录或文件上的标记。例如，取消设置<code class="codeph">/acfsmounts/repl_data/films</code>目录的<code class="codeph">mysteries</code>子目录中文件的<code class="codeph">drama</code>标记，以将不同的标记应用于子目录。
                        </p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil标签unset -r drama / acfsmounts / repl_data / films / mysteries</pre><p>将<code class="codeph">mystery</code>标记添加到<code class="codeph">/acfsmounts/repl_data/films</code>目录的<code class="codeph">mysteries</code>子目录中的文件。
                        </p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil标签设置-r mystery / acfsmounts / repl_data / films / mysteries</pre><p>您必须具有系统管理员权限或者是文件所有者才能运行这些命令。</p>
                     </li>
                  </ol>
                  <div class="infoboxnotealso" id="GUID-1C351316-3D71-4520-A412-95AE85F56453__GUID-5B81CA38-9711-4746-A669-D90CB87CBCE7">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="diskgroup-compatibility.html#GUID-FBB5AA72-5208-48E1-BD8D-0FD4C6876F34" title="您无法将磁盘组兼容性还原为以前的值。相反，您必须创建一个新磁盘组。该主题描述了由磁盘组兼容性属性设置的有效组合启用的Oracle ASM功能。如果提高了磁盘组兼容性，则可以启用创建太大而无法由以前版本的Oracle数据库管理的文件。">磁盘组兼容性</a>有关磁盘组兼容性的信息</p>
                        </li>
                        <li>
                           <p><a href="understand-acfs-admin.html#GUID-5A980C0A-BE5E-4489-8A25-ED9596BF6CA2" title="Oracle ACFS标记为一组文件分配一个公共命名属性。">Oracle ACFS标记</a>有关标记Oracle ACFS文件系统的信息，包括在标记中使用扩展属性的要求</p>
                        </li>
                        <li>
                           <p><a href="acfs-commands-tagging.html#GUID-EAA3652D-08F9-49B3-BFD0-5527A751B3FB">acfsutil标记设置</a>有关指定标记名称的信息</p>
                        </li>
                        <li>
                           <p><a href="acfs-commands-tagging.html#GUID-28C826AE-BA9C-4FBD-B590-EB83192A3F54">acfsutil标签信息，</a>用于显示标签名称和详细信息</p>
                        </li>
                        <li>
                           <p>有关更改和删除标记名称的信息，请<a href="acfs-commands-tagging.html#GUID-A2465409-4A91-44CB-B6A7-6A60C9D75CA7">取消设置acfsutil标记</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="OSTMG94793"></a><div class="props_rev_3"><a id="GUID-13F8260D-7549-475E-A701-A12386FE7048" name="GUID-13F8260D-7549-475E-A701-A12386FE7048"></a><h3 id="OSTMG-GUID-13F8260D-7549-475E-A701-A12386FE7048" class="sect3">复制Oracle ACFS文件系统</h3>
               <div>
                  <p>本主题将讨论在Linux上的Oracle ACFS文件系统上管理基于Oracle ACFS快照的复制的操作。</p>
                  <div class="section">
                     <p>为主文件系统和备用文件系统创建卷的磁盘组必须具有<code class="codeph">ASM</code>和<code class="codeph">ADVM</code>兼容属性，设置为<code class="codeph">12.2</code>或更高。要将快照用作存储位置或使用复制角色转换，Oracle ASM和Oracle ADVM的兼容性属性必须设置为<code class="codeph">18.0</code>或更高。
                     </p>
                     <p>管理复制的步骤如下：</p>
                     <ol>
                        <li>
                           <p>确保已配置<code class="codeph">ssh</code>以进行复制。
                           </p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>确保已在主群集和备用群集上配置<code class="codeph">ssh</code>命令的主机密钥和用户密钥。
                                 </p>
                              </li>
                              <li>
                                 <p>在Windows上，确保已安装Cygwin并根据复制需要配置<code class="codeph">ssh</code> 。
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>确保可以始终创建复制所需的快照。在任何给定点复制，可能需要能够使用主要位置的两个并发快照，以及备用位置的一个快照。</p>
                        </li>
                        <li>
                           <p>确保主站点和备用站点之间存在足够的网络连接。您应该验证从主要位置到备用数据库的可实现网络数据传输速率是否远远大于主要位置上的数据变化速率。</p>
                           <p>估计网络数据传输速率的一种方法是从观察到的传输速率开始，然后将其减少以考虑已知的开销源。例如，您可以计算在网络使用率较低的时间段内将1 GB文件从主位置FTP到预期备用位置所需的时间。这提供了可达到的最大传输速率的估计。应该降低此速率以解决复制传输中固有的开销，以及允许网络上的其他需求。对于复制开销，合理的方法是将测量速率降低20％，然后将主群集中的每个节点再降低5％。</p>
                           <p>要估计主数据库的平均更改率，可以使用命令<code class="codeph">acfsutil</code> <code class="codeph">info</code> <code class="codeph">fs</code>和<code class="codeph">-s</code>选项。应在包含主要位置的文件系统的每个节点上运行此命令。该命令显示该节点上文件系统的更改量和速率。要计算文件系统的总更改率，必须汇总每个节点的更改率。用于<code class="codeph">-s</code>合理值是<code class="codeph">900</code> ，这将产生15分钟的采样间隔。
                           </p>
                           <p>使用带<code class="codeph">-s</code>选项的<code class="codeph">acfsutil</code> <code class="codeph">info</code> <code class="codeph">fs</code>的输出，您可以确定平均变化率，峰值变化率以及峰值持续多长时间。使用此数据的保守方法是选择峰值变化率作为必须适应的目标比率。
                           </p>
                           <p>由于复制必须将主服务器上更改的所有数据传输到备用数据库，因此显然可实现的网络传输速率必须高于主服务器上的目标传输速率，理想情况下要高得多。如果不是这种情况，则应在为此主要位置和工作负载实施复制之前增加网络容量。</p>
                           <p>例如，假设您有一个四节点主群集，并确定可以在30秒内传输1 GB文件，从而产生当前每秒33 MB的FTP传输速率。当前复制传输速率的估计值约为每秒20 MB，计算如下：</p><pre class="oac_no_warn" dir="ltr">33 MB / sec *（1  -  0.2  - （4 * 0.05））= 33 * 0.6 = ~20 MB / sec</pre><p>此外，您发现主要设备的平均更改速率为每小时8 GB，峰值速率为每小时25 GB。使用峰值速率，您可以计算目标变化率约为每秒7 MB，如下所示：</p><pre class="oac_no_warn" dir="ltr">（25 GB /小时* 1024）/ 3600 = ~7 MB /秒</pre><p>在此步骤中讨论的方案中，您可以合理地期望网络能够处理来自复制的额外工作负载。</p>
                        </li>
                        <li>
                           <p>确保主站点和备用站点上有足够的存储容量。</p>
                           <p>估计在托管主要和备用位置的站点上进行复制所需的存储容量。在一般情况下，主站点必须持续存储主要位置的两个快照，并且备用站点必须存储备用位置的单个快照。这些快照占用的空间主要由快照中保留的用户数据或元数据组成，后者已被修改，触发了要创建的数据的新副本。</p>
                           <p>可以使用命令<code class="codeph">acfsutil</code> <code class="codeph">snap</code> <code class="codeph">info</code>直接查看与复制相关的快照占用的空间。在主服务器上，检查名称以字符串<code class="codeph">REPL</code>开头的快照。在备用数据库上，查找以<code class="codeph">SDBACKUP</code>开头的名称的快照。</p>
                           <p>如果使用基于时间间隔的复制，则<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">primary</code>的<code class="codeph">-i</code>选项，如果复制操作在指定的时间间隔内成功完成，则与复制相关的快照的大小与主要和间隔的长度。例如，平均更改速率为每小时8 GB和两小时复制间隔，您可以预期快照存储使用量在每个快照16 GB的范围内。
                           </p>
                           <p>快照大小确实随主要数据的变化率而变化。另一个因素是快照大小部分取决于文件系统中的文件数量以及更改率。可能更重要的是，如果使用常量模式复制，则<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">primary</code>的<code class="codeph">-C</code>选项，或者如果复制操作未在基于间隔的复制给定的时间间隔内成功完成，因为间隔太小，复制的大小 -相关快照很难提前预测。在这些情况下，请观察随时间生成的快照的大小，并根据需要使用<code class="codeph">acfsutil</code> <code class="codeph">size</code>命令调整文件系统大小，以便在存在快照的情况下满足正常的存储需求。收集此信息时，一个很好的起点是为快照提供空间，以便包含比主数据库的平均变化率大几倍于收集周期的数据。
                           </p>
                           <p>收集此信息时，请选择允许复制快照的空间量的保守起点。例如，您可以计算在收集时间段内对文件系统存储更改所需的空间，如前所述，然后您可以为将来的快照分配多次该空间。</p>
                        </li>
                        <li>
                           <p>确定要用于复制的用户以及可选的设置标记。</p>
                           <p>选择或创建使用<code class="codeph">ssh</code>到备用群集的复制用户，以将从主位置复制的数据应用到备用位置。此用户仅在操作系统级别定义，而不在Oracle中定义。用户应属于为Oracle AM管理员访问定义的组。
                           </p>
                           <div class="infoboxnote" id="GUID-13F8260D-7549-475E-A701-A12386FE7048__THESAMEUSERANDGROUPIDENTITIESMUSTBE-C4B0BE68">
                              <p class="notep1">注意：</p>
                              <p>必须为主群集和备用群集上的复制用户指定相同的用户和组标识（包括所有<code class="codeph">uids</code>和<code class="codeph">gids</code> ）。
                              </p>
                           </div>
                           <p>（可选）在目录和文件上设置标记，以仅复制Oracle ACFS主位置中的选定文件。您还可以在复制开始后向文件添加标记。</p>
                        </li>
                        <li>
                           <p>配置托管备用位置的站点。</p>
                           <p>在将Oracle ACFS复制到主存储位置之前，请通过执行以下操作配置托管备用位置的站点：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要将文件系统用作备用位置，请创建一个足够大的新<span class="italic">备用</span>文件系统，以容纳从主位置复制的文件以及单个复制快照，然后装入文件系统。例如：</p>
                                 <p><code class="codeph">/待机/ repl_data</code></p>
                              </li>
                              <li>
                                 <p>要将现有文件系统的快照用作备用位置，请创建新的读写快照，并确保文件系统的大小足以容纳从主位置复制的文件以及单个复制快照。</p>
                              </li>
                              <li>
                                 <p>对于任一类型的备用位置，请在托管备用位置的站点上运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">standby</code>命令。例如：</p><pre class="oac_no_warn" dir="ltr">＃/ sbin / acfsutil repl init standby -u repluser / standby / repl_data</pre><div class="infoboxnote" id="GUID-13F8260D-7549-475E-A701-A12386FE7048__GUID-45B5489E-909A-4C60-AA9F-60678F6CC453">
                                    <p class="notep1">注意：</p>
                                    <p>如果<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">standby</code>命令因任何原因而中断，则用户必须重新创建用于该位置的文件系统或快照，如果需要，请重新装入文件系统，然后重新运行该命令。
                                    </p>
                                 </div>
                                 <p>此命令需要复制用户的名称和备用位置。指定的用户是从主群集调用的<code class="codeph">ssh</code>登录到备用群集以应用更改的用户。使用<span class="bold">-u</span>选项指定此用户。例如： <code class="codeph">-u <span class="codeinlineitalic">repluser</span></code> 。
                                 </p>
                                 <p>如果备用位置是文件系统，则以其挂载点命名。例如： <code class="codeph">/standby/repl_data</code> 。
                                 </p>
                                 <p>如果备用位置是读写快照，则使用快照名称和包含文件系统的安装点命名，两者以<code class="codeph">@</code>字符分隔。例如： <code class="codeph">drsnap1101@/standby/repl_data</code> 。
                                 </p>
                              </li>
                           </ul>
                           <p><code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">standby</code>命令需要<code class="codeph">root</code>或系统管理员权限才能运行。
                           </p>
                        </li>
                        <li>
                           <p>设置备用位置后，配置托管主位置的站点并开始复制。</p>
                           <p>在托管主位置的站点上运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">primary</code>命令。例如：</p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil repl init primary -i 2h -s repluser @ standby12_vip -m / standby / repl_data / acfsmounts / repl_data</pre><p>此命令需要以下配置信息。</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>复制间隔，使用选项<span class="bold">-i</span> <span class="italic">interval</span>作为间隔模式，或选项<span class="bold">-C</span>作为恒定模式复制。如果指定了时间间隔，则选项值是复制操作之间经过的最短时间。在每个操作开始时，复制将获取主快照的新快照，并将其与上一个快照（如果有）进行比较。然后，更新备用数据库以匹配主数据库所需的更改将发送到备用数据库。如果给定<span class="bold">-C</span>而不是<span class="bold">-i</span> <span class="italic">interval</span> ，则在前一个完成后立即启动新的复制操作。
                                 </p>
                                 <p>例如，要设置两小时的复制间隔，请指定<code class="codeph">-i 2h</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>用于连接到托管备用位置的站点的用户名和网络端点（VIP名称或地址，或主机名或地址），使用<code class="codeph">—s</code>选项指定。例如： <code class="codeph">-s repluser@standby12_vip</code></p>
                              </li>
                              <li>
                                 <p>如果主要位置是文件系统，则指定文件系统的安装点的名称。例如： <code class="codeph">/acfsmounts/repl_data</code></p>
                              </li>
                              <li>
                                 <p>如果主存储位置是快照，则指定快照名称加上包含文件系统的安装点，两者由<code class="codeph">@</code>字符分隔。例如： <code class="codeph">drsnap1101@/acfsmounts/repl_data</code></p>
                              </li>
                              <li>
                                 <p>如果托管备用位置的站点上的装入点或装入点的快照名称与托管主位置的站点上的装载点或装入点的快照名称不同，则使用<code class="codeph">-m</code>选项指定备用位置的名称。例如： <code class="codeph">-m /standby/repl_data</code></p>
                              </li>
                           </ul>
                           <p><code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">init</code> <code class="codeph">primary</code>命令需要<code class="codeph">root</code>或系统管理员权限才能运行。
                           </p>
                        </li>
                        <li>
                           <p>监视有关该位置上的复制的信息。</p>
                           <p><code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">info</code>命令显示有关主要或备用位置上的复制处理状态的信息。
                           </p>
                           <p>例如，您可以在托管主位置的站点上运行以下命令以显示配置信息。</p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil repl info -c -v / acfsmounts / repl_data</pre><p>您必须具有系统管理员（非Windows系统上的用户root或Windows上的本地<code class="codeph">SYSTEM</code> ）或Oracle AM管理员权限才能运行此命令。
                           </p>
                        </li>
                        <li>
                           <p>管理复制后台进程。</p>
                           <p>运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">bg</code>命令以启动，停止或检索有关复制后台进程的信息。
                           </p>
                           <p>例如，运行以下命令以显示有关<code class="codeph">/acfsmounts/repl_data</code>文件系统的复制过程的信息。
                           </p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil repl bg info / acfsmounts / repl_data</pre><p>您必须具有系统管理员或Oracle AM管理员权限才能运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">bg</code> <code class="codeph">info</code>命令。
                           </p>
                        </li>
                        <li>
                           <p>如有必要，暂时暂停复制。</p>
                           <p>运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">pause</code>以暂时停止复制。尽快运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">resume</code>命令以恢复复制。
                           </p>
                           <p>例如，以下命令暂停<code class="codeph">/acfsmounts/repl_data</code>文件系统上的复制。
                           </p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil repl pause / acfsmounts / repl_data</pre><p>以下命令在<code class="codeph">/acfsmounts/repl_data</code>文件系统上恢复复制。
                           </p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil repl resume / acfsmounts / repl_data</pre><p>您必须具有系统管理员或Oracle AM管理员权限才能运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">pause</code>和<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">resume</code>命令。
                           </p>
                        </li>
                        <li>
                           <p>故障转移到待机状态或将备用位置转换为活动位置。</p>
                           <p>如果主要位置不可访问，则可以运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">terminate</code> <code class="codeph">standby</code>命令将备用位置转换为读写存储。如果主要位置仍然存在，则应首先使用<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">terminate</code> <code class="codeph">primary</code>命令<code class="codeph">terminate</code> <code class="codeph">primary</code> 。
                           </p>
                           <p>在使用备用位置上的<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">terminate</code> <code class="codeph">standby</code>终止复制之前，您可以确定备用位置所代表的主要位置的时间点。此时间戳显示为<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">info</code> <code class="codeph">-c</code> as <code class="codeph">Last</code> <code class="codeph">sync</code> <code class="codeph">time</code> <code class="codeph">with</code> <code class="codeph">primary</code> 。如果必须与Oracle Data Guard协调故障转移操作，则可以根据需要使用时间戳来设置数据库，或者执行基于时间戳的其他必要操作。
                           </p>
                           <p>备用位置可能正在通过复制进行修改。这可能发生在：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>主要位置可用，并且当前正在进行复制操作。</p>
                              </li>
                              <li>
                                 <p>主要位置不可用，但复制操作在不可用时正在进行中。</p>
                              </li>
                           </ul>
                           <p>要确保在备用位置最后与主节点快照相同时获取备用位置的内容，请执行以下步骤之一。</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>如果主位置可用，请在主站点上运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">terminate</code> <code class="codeph">primary</code>命令以终止复制。该命令在返回之前等待任何正在进行的复制操作完成。然后运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">info</code> <code class="codeph">-c</code>以确定备用数据库上表示的主要位置的时间点。获得此信息后，在备用站点上运行<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">terminate</code> <code class="codeph">standby</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>如果主要位置不可用，则应首先比较<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">info</code> <code class="codeph">-c</code>输出中的两个日期字符串;这些是来自行的<code class="codeph">Receiving primary as of</code>日期和<code class="codeph">with</code> <code class="codeph">primary</code>行的<code class="codeph">Last</code> <code class="codeph">sync</code> <code class="codeph">time</code>的<code class="codeph">Last</code> 。如果这些日期相同，则备用位置包含主要的最新可用时间点映像。如果它们不相等，则必须使用复制记录的备份快照来恢复在备用数据库上捕获的最后一个时间点映像。当主位置和备用位置都是文件系统时，您可以使用<code class="codeph">acfsutil</code> <code class="codeph">snap</code> <code class="codeph">info</code>命令找到此快照。搜索具有表单名称的快照：</p><pre class="oac_no_warn" dir="ltr">SDBACKUP_tstamp1_REPL_0_tstamp2_0</pre><p>其中<code class="codeph">tstamp1</code>表示创建备份快照的时间， <code class="codeph">tstamp2</code>表示记录此快照中主要内容的时间点。应该只存在一个备份快照。备份快照的日期对应于<code class="codeph">Last</code> <code class="codeph">sync</code> <code class="codeph">time</code>的日期， <code class="codeph">with</code> <code class="codeph">primary</code>行由<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">info</code> <code class="codeph">-c</code>输出。如果没有可用的备份快照，则主服务器的内容永远不会成功传输到备用数据库。
                                 </p>
                                 <p>备份快照的日期对应于<code class="codeph">Last</code> <code class="codeph">sync</code> <code class="codeph">time</code>的日期， <code class="codeph">with</code> <code class="codeph">primary</code>行由<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">info</code> <code class="codeph">-c</code>输出。
                                 </p>
                                 <p>要使用备份快照，必须终止复制并确保保留快照，因为默认情况下会删除该快照。要确保保留快照，请在命令行中将<code class="codeph">-k</code>选项添加到<code class="codeph">acfsutil</code> <code class="codeph">repl</code> <code class="codeph">terminate</code> <code class="codeph">standby</code> 。复制终止后，您可以选择运行<code class="codeph">acfsutil</code> <code class="codeph">snap</code> <code class="codeph">remaster</code>命令以将快照用作备用文件系统的新内容。
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ol>
                     <div class="infoboxnote" id="GUID-13F8260D-7549-475E-A701-A12386FE7048__GUID-8B1E824A-4D7B-4D02-B8FA-CFAAAE1FDC34">
                        <p class="notep1">注意：</p>
                        <p>使用复制时，可以使用<code class="codeph">acfsutil</code> <code class="codeph">snap</code> <code class="codeph">info</code>命令查看复制快照，就像任何其他快照一样。您可以使用此命令来大致了解复制快照当前占用的空间。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-13F8260D-7549-475E-A701-A12386FE7048__GUID-A58391CE-BB32-40DA-9AE3-0A47EAB284F6">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关复制Oracle ACFS文件系统或快照的信息，请<a href="understand-acfs-admin.html#GUID-8522E0B6-BE6E-4BE3-B7C7-5EA2ED4A602C" title="Oracle ACFS基于快照的复制可以将Oracle ACFS文件系统通过网络复制到远程站点，从而为文件系统提供灾难恢复功能。">参见Oracle ACFS复制</a></p>
                           </li>
                           <li>
                              <p><a href="diskgroup-compatibility.html#GUID-FBB5AA72-5208-48E1-BD8D-0FD4C6876F34" title="您无法将磁盘组兼容性还原为以前的值。相反，您必须创建一个新磁盘组。该主题描述了由磁盘组兼容性属性设置的有效组合启用的Oracle ASM功能。如果提高了磁盘组兼容性，则可以启用创建太大而无法由以前版本的Oracle数据库管理的文件。">磁盘组兼容性</a>有关磁盘组兼容性的信息</p>
                           </li>
                           <li>
                              <p><a href="configure-acfs-replication.html#GUID-C1CB3914-E278-473A-ACCC-FD1BA7CDC0B4">配置ssh以用于Oracle ACFS复制</a>并<a href="configure-acfs-replication.html#GUID-D2CADB0B-E03D-4576-90DD-F1214362798D">在Windows上安装ssh和Cygwin</a>以获取有关配置复制的信息</p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-replication.html#GUID-E96CD9A2-00BD-4673-8FCC-DBB28A9E2DCD">acfsutil repl init</a>用于启动复制的信息</p>
                           </li>
                           <li>
                              <p><a href="authenticate-access-asm-instance.html#GUID-7396FD18-628B-4026-AA55-79C6D6205EAE">关于Oracle ASM的权限，</a>以获取有关Oracle AM的用户权限的信息</p>
                           </li>
                           <li>
                              <p>有关管理复制后台操作的详细信息，请<a href="acfs-commands-replication.html#GUID-FCAF4630-2B5F-4F31-B977-7D14C112D643">参阅acfsutil repl bg</a></p>
                           </li>
                           <li>
                              <p>有关暂停和恢复复制操作的详细信息，请<a href="acfs-commands-replication.html#GUID-BBD27CCA-4206-4418-B0CB-ACC5BD2475CE">参阅</a> <a href="acfs-commands-replication.html#GUID-77EB3E00-98F7-4AA8-94B4-1D3985634DF4">acfsutil repl pause</a>和<a href="acfs-commands-replication.html#GUID-BBD27CCA-4206-4418-B0CB-ACC5BD2475CE">acfsutil repl resume</a></p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-replication.html#GUID-5242D6F8-462A-40A5-81DC-4599EB91C32C">acfsutil repl info</a>有关显示复制详细信息的信息</p> 
                           </li>
                           <li>
                              <p><a href="steps-manage-acfs.html#GUID-4C98CF06-8CCC-45F1-9316-C40FB3EFF268" title="您可以使用本主题中的步骤创建Oracle ACFS文件系统。">创建Oracle ACFS文件系统</a>以获取有关创建文件系统的信息</p>
                           </li>
                           <li>
                              <p><a href="steps-manage-acfs.html#GUID-1C351316-3D71-4520-A412-95AE85F56453" title="本主题讨论了在Linux上管理Oracle ACFS文件系统中的目录和文件的标记的操作。">标记Oracle ACFS文件系统</a>以获取有关标记文件的步骤的信息</p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OSTMG94794"></a><div class="props_rev_3"><a id="GUID-824B567D-A538-4EF2-8A2D-96D83A1E6284" name="GUID-824B567D-A538-4EF2-8A2D-96D83A1E6284"></a><h3 id="OSTMG-GUID-824B567D-A538-4EF2-8A2D-96D83A1E6284" class="sect3">取消注册，卸载和禁用卷和Oracle ACFS文件系统</h3>
               <div>
                  <p>本主题讨论取消注册或卸载文件系统以及禁用卷的操作。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-824B567D-A538-4EF2-8A2D-96D83A1E6284__GUID-F7A513BE-AE37-4B85-B69E-AF13735D7B38">取消注册Oracle ACFS文件系统</p>
                     <p>如果不希望自动装入文件系统，可以取消注册Oracle ACFS文件系统。</p>
                     <p>例如：</p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil注册表-d / acfsmounts / acfs1</pre><p>如果取消注册文件系统，则必须在Oracle Clusterware或系统重新启动后显式挂载文件系统。</p>
                     <p>有关注册表的更多信息，请参阅<a href="understand-acfs-concepts.html#GUID-FD24F249-E9BB-4E63-B992-11A9868F5D7B" title="Oracle ACFS装入注册表支持Oracle Grid Infrastructure群集配置，但不支持Oracle Restart配置。">关于Oracle ACFS Mount Registry</a> 。有关<code class="codeph">acfsutil</code> <code class="codeph">registry</code>信息，请参阅<a href="acfs-commands-utilities.html#GUID-57DE893C-37A2-4427-8CC3-76EB3196A4A6">acfsutil注册表</a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-824B567D-A538-4EF2-8A2D-96D83A1E6284__GUID-C53E68CA-5A5A-40D7-9DD5-41494482CD01">卸载Oracle ACFS文件系统</p>
                     <p>您可以在不取消注册文件系统或禁用安装文件系统的卷的情况下卸载文件系统。</p>
                     <p>例如，您可以卸载文件系统并运行<code class="codeph">fsck</code>来检查文件系统。
                     </p><pre class="oac_no_warn" dir="ltr">＃/ bin / umount / acfsmounts / acfs1＃/ sbin / fsck -a -v -y -t acfs / dev / asm / volume1-123</pre><p>卸载文件系统后，必须显式挂载文件系统。</p>
                     <p>在Linux系统上使用<code class="codeph">umount</code>或在Windows系统上使用<code class="codeph">acfsdismount</code> 。有关卸载文件系统的命令的信息，请参阅<a href="acfs-commands-linux.html#GUID-019B9315-870C-4F2A-BE5E-D4623639FACB">umount</a>或<a href="acfs-commands-windows.html#GUID-503B091A-2650-431C-8D4F-3B9C08609D04">acfsdismount</a> 。
                     </p>
                     <p>在Linux系统上使用<code class="codeph">fsck</code>或在Windows系统上使用<code class="codeph">acfschkdsk</code>来检查文件系统。有关检查文件系统的命令的信息，请参阅<a href="acfs-commands-linux.html#GUID-E875A8CE-7D2D-4BD9-AAB2-C2E85F156E17">fsck（脱机模式）</a>或<a href="acfs-commands-windows.html#GUID-6377282F-880E-4FBB-A23B-2B2DF4A15FBC">acfschkdsk</a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-824B567D-A538-4EF2-8A2D-96D83A1E6284__GUID-9B01A4CD-B44C-477B-B39F-999B559B3E0C">禁用卷</p>
                     <p>要禁用卷，必须先卸载装入卷的文件系统。</p>
                     <p>例如：</p><pre class="oac_no_warn" dir="ltr">＃/ bin / umount / acfsmounts / acfs1</pre><p>卸载文件系统后，可以禁用该卷并删除卷设备文件。</p>
                     <p>例如：</p><pre class="oac_no_warn" dir="ltr">ASMCMD&gt; voldisable -G数据卷1</pre><p>卸载文件系统并禁用卷不会破坏文件系统中的数据。您可以启用卷并装入文件系统以访问现有数据。有关<code class="codeph">voldisable</code>和<code class="codeph">volenable</code> ，请参阅<a href="manage-advm-asmcmd.html#GUID-07E90E70-406A-4273-B27F-9F2ED7C1C4BF" title="Oracle ASM命令行实用程序（ASMCMD）提供用于管理Oracle ADVM卷的命令。">使用ASMCMD管理Oracle ADVM</a> 。</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OSTMG94798"></a><div class="props_rev_3"><a id="GUID-4D3758AF-447E-47AB-BD23-46E41A7EA59B" name="GUID-4D3758AF-447E-47AB-BD23-46E41A7EA59B"></a><h3 id="OSTMG-GUID-4D3758AF-447E-47AB-BD23-46E41A7EA59B" class="sect3">删除Oracle ACFS文件系统和卷</h3>
               <div>
                  <p>您可以使用<code class="codeph">acfsutil</code>和ASMCMD命令删除Oracle ACFS文件系统和卷。
                  </p>
                  <div class="section">
                     <p>要永久删除卷和Oracle ACFS文件系统，请执行以下步骤。这些步骤会破坏文件系统中的数据。</p>
                     <ol>
                        <li>
                           <p>使用<code class="codeph">acfsutil</code> <code class="codeph">registry</code> <code class="codeph">-d</code>取消注册文件系统。
                           </p>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil注册表-d / acfsmounts / acfs1 acfsutil注册表：从Oracle Registry成功删除了ACFS挂载点/ acfsmounts / acfs1</pre></li>
                        <li>
                           <p>卸除文件系统。</p>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">＃/ bin / umount / acfsmounts / acfs1</pre><p>您必须卸载群集的所有节点上的文件系统。</p>
                           <p>在Linux系统上使用<code class="codeph">umount</code>或在Windows系统上使用<code class="codeph">acfsdismount</code> 。
                           </p>
                        </li>
                        <li>
                           <p>使用<code class="codeph">acfsutil</code> <code class="codeph">rmfs</code>删除文件系统。
                           </p>
                           <p>如果您不打算在以后的步骤中删除卷，则必须执行此步骤才能删除文件系统。否则，删除卷时将删除文件系统。</p>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">$ / sbin / acfsutil rmfs / dev / asm / volume1-123</pre></li>
                        <li>
                           <p>（可选）您可以使用ASMCMD <code class="codeph">voldisable</code>命令禁用该卷。
                           </p>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">ASMCMD&gt; voldisable -G数据卷1</pre></li>
                        <li>
                           <p>使用ASMCMD <code class="codeph">voldelete</code>命令删除卷。
                           </p>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">ASMCMD&gt; voldelete -G数据卷1</pre></li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-4D3758AF-447E-47AB-BD23-46E41A7EA59B__GUID-F06CFD7B-AC70-436E-94E0-0A70AD4A30F6">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="acfs-commands-utilities.html#GUID-57DE893C-37A2-4427-8CC3-76EB3196A4A6">acfsutil注册表</a>有关运行信息<code class="codeph">acfsutil</code> <code class="codeph">registry</code></p>
                           </li>
                           <li>
                              <p><a href="acfs-commands-linux.html#GUID-019B9315-870C-4F2A-BE5E-D4623639FACB">卸除</a>或<a href="acfs-commands-windows.html#GUID-503B091A-2650-431C-8D4F-3B9C08609D04">acfsdismount</a>有关运行信息<code class="codeph">umount</code>或<code class="codeph">acfsdismount</code>命令</p> 
                           </li>
                           <li>
                              <p><a href="acfs-commands-utilities.html#GUID-541A93CD-C558-45AA-A7A7-F52A6BFDC437">acfsutil rmfs</a>有关运行信息<code class="codeph">acfsutil</code> <code class="codeph">rmfs</code>命令</p>
                           </li>
                           <li>
                              <p>有关运行<code class="codeph">voldisable</code>命令的信息，请<a href="manage-advm-asmcmd.html#GUID-07E90E70-406A-4273-B27F-9F2ED7C1C4BF" title="Oracle ASM命令行实用程序（ASMCMD）提供用于管理Oracle ADVM卷的命令。">使用ASMCMD管理Oracle ADVM</a></p>
                           </li>
                           <li>
                              <p>有关运行<code class="codeph">voldelete</code>命令的信息，请<a href="manage-advm-asmcmd.html#GUID-07E90E70-406A-4273-B27F-9F2ED7C1C4BF" title="Oracle ASM命令行实用程序（ASMCMD）提供用于管理Oracle ADVM卷的命令。">使用ASMCMD管理Oracle ADVM</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>设计和部署技术</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Real Application Clusters Administration and Deployment Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Real Application Clusters Administration and Deployment Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="real-application-clusters-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-25T14:02:30-07:00"></meta>
      <meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E95728-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="adding-and-deleting-oracle-rac-from-nodes-on-windows-systems.html" title="Previous" type="text/html"></link>
      <link rel="next" href="monitoring-performance.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="RACAD"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="adding-and-deleting-oracle-rac-from-nodes-on-windows-systems.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="monitoring-performance.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Real Application Clusters管理和部署指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">设计和部署技术</li>
            </ol>
            <a id="GUID-DD273C7C-7F74-4A95-B8E5-E007D36119D2" name="GUID-DD273C7C-7F74-4A95-B8E5-E007D36119D2"></a><a id="RACAD755"></a>
            
            <h2 id="RACAD-GUID-DD273C7C-7F74-4A95-B8E5-E007D36119D2" class="sect2"><span class="enumeration_chapter">13</span>设计和部署技术</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章简要介绍了数据库的设计和部署<a id="d42394e139" class="indexterm-anchor"></a><a id="d42394e143" class="indexterm-anchor"></a> Oracle Real Application Clusters（Oracle RAC）环境的技术。它还介绍了高可用性的注意事项，并提供了各种Oracle RAC部署的一般准则。
               </p>
               <p>本章包括以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="design-and-deployment-techniques.html#GUID-424BE157-18A3-4261-8A43-DF4D5E60C3D4" title="对于关键任务系统，您必须能够执行故障转移和恢复，并且您的环境必须能够适应所有类型的故障。数据库云是由全球数据服务框架集成到单个虚拟服务器中的一组数据库，提供一个或多个全局服务，同时确保高性能，可用性和资源的最佳利用。">部署Oracle RAC以实现高可用性</a></p>
                  </li>
                  <li>
                     <p><a href="design-and-deployment-techniques.html#GUID-21CA9D06-8D97-4C8D-9E1B-6FF2796E8A6E">Oracle RAC的一般设计注意事项</a></p>
                  </li>
                  <li>
                     <p><a href="design-and-deployment-techniques.html#GUID-CAE32074-BD5B-4DBF-8CFF-CBB4BB2E7BB7" title="您可以配置和使用SSL证书，以在数据库层中的ONS服务器和中间层中的通知客户端之间设置身份验证。">Oracle RAC的常规数据库部署主题</a></p>
                  </li>
               </ul>
            </div><a id="RACAD7386"></a><div class="sect2"><a id="GUID-424BE157-18A3-4261-8A43-DF4D5E60C3D4" name="GUID-424BE157-18A3-4261-8A43-DF4D5E60C3D4"></a><h3 id="RACAD-GUID-424BE157-18A3-4261-8A43-DF4D5E60C3D4" class="sect3">部署Oracle RAC以实现高可用性</h3>
               <div>
                  <p>许多客户实施Oracle RAC <a id="d42394e313" class="indexterm-anchor"></a><a id="d42394e317" class="indexterm-anchor"></a> Oracle数据库应用程序的高可用性。要获得真正的高可用性，必须使应用程序的整个基础架构具有高可用性。这需要详细规划，以确保整个基础架构中没有单点故障。尽管Oracle RAC使您的数据库具有高可用性，但如果关键应用程序不可用，那么您的业务可能会受到负面影响。例如，如果选择使用轻量级目录访问协议（LDAP）进行身份验证，则必须使LDAP服务器具有高可用性。如果数据库已启动但用户无法连接到数据库，因为无法访问LDAP服务器，则整个系统似乎由您的用户决定。
                  </p>
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="design-and-deployment-techniques.html#GUID-541B8EE0-1107-47CF-AF1F-CCC51271178E" title="对于关键任务系统，您必须能够执行故障转移和恢复，并且您的环境必须能够适应所有类型的故障。">关于设计高可用性系统</a></p>
                     </li>
                     <li>
                        <p><a href="design-and-deployment-techniques.html#GUID-6F08D689-193E-49A3-8166-E6F5928561F8">在高可用性环境中部署Oracle RAC的最佳实践</a></p>
                     </li>
                     <li>
                        <p><a href="design-and-deployment-techniques.html#GUID-A3DDFCC2-4B31-42DC-9167-AF49879D2F06" title="数据库云是由全球数据服务框架集成到单个虚拟服务器中的一组数据库，提供一个或多个全局服务，同时确保高性能，可用性和资源的最佳利用。">整合数据库中的多个应用程序或群集中的多个数据库</a></p>
                     </li>
                     <li>
                        <p><a href="design-and-deployment-techniques.html#GUID-62E165A0-15A0-473C-960E-69EC6AE4BDB3">Oracle RAC的可伸缩性</a></p>
                     </li>
                  </ul>
               </div><a id="RACAD8317"></a><div class="sect3"><a id="GUID-541B8EE0-1107-47CF-AF1F-CCC51271178E" name="GUID-541B8EE0-1107-47CF-AF1F-CCC51271178E"></a><h4 id="RACAD-GUID-541B8EE0-1107-47CF-AF1F-CCC51271178E" class="sect4">关于设计高可用性系统</h4>
                  <div>
                     <p>对于关键任务系统，您必须能够执行故障转移和恢复，并且您的环境必须能够适应所有类型的故障。</p>
                     <p>对于关键任务系统，您必须能够执行故障转移和恢复，并且您的环境必须能够适应所有类型的故障。要实现这些目标，请首先定义业务的服务级别要求。这些要求应包括对数据中心内故障（如节点故障）或灾难恢复（如果整个数据中心发生故障）的最大事务响应时间和恢复期望的定义。通常，服务级别目标是工作的目标响应时间，无论故障如何。确定每个冗余组件的恢复时间。即使您可能具有以主动/主动模式运行的硬件组件，也不要假设如果一个组件发生故障，则其他硬件组件可以在修复故障组件时保持运行。此外，当组件以主动/被动模式运行时，请执行常规测试以验证故障转移时间。例如，存储通道的恢复时间可能需要几分钟。确保中断时间在您的业务服务级别协议中，如果不在，请与硬件供应商一起调整配置和设置。</p>
                     <p>在部署关键任务系统时，测试应包括功能测试，破坏性测试和性能测试。破坏性测试包括在系统中注入各种故障以测试恢复并确保其满足服务级别要求。破坏性测试还允许为生产系统创建操作程序。</p>
                     <p>为帮助您设计和实施关键任务或高可用性系统，Oracle为每个组织提供了一系列解决方案，无论规模大小。小型工作组和全球企业都能够扩展其关键业务应用程序的范围。借助Oracle和Internet，应用程序及其数据现在可以随时随地可访问。Oracle最高可用性体系结构（MAA）是Oracle最佳实践蓝图，它基于成熟的Oracle高可用性技术和建议。MAA的目标是消除设计最佳高可用性架构的复杂性。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="http://www.oracle.com/au/products/database/maa-096107.html" target="_blank">Oracle最高可用性架构（MAA）</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD7387"></a><div class="sect3"><a id="GUID-6F08D689-193E-49A3-8166-E6F5928561F8" name="GUID-6F08D689-193E-49A3-8166-E6F5928561F8"></a><h4 id="RACAD-GUID-6F08D689-193E-49A3-8166-E6F5928561F8" class="sect4">在高可用性环境中部署Oracle RAC的最佳实践</h4>
                  <div>
                     <p>应用程序可以利用许多Oracle数据库，Oracle Clusterware和Oracle RAC特性和功能来最小化或屏蔽Oracle RAC环境中的任何故障。例如，您可以：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用VIP地址连接到数据库，删除TCP / IP超时等待。</p>
                        </li>
                        <li>
                           <p>创建详细的操作过程并确保您具有适当的支持合同，以匹配基础架构中所有组件的已定义服务级别。</p>
                        </li>
                        <li>
                           <p>利用Oracle RAC自动工作负载管理功能，例如连接时故障转移，快速连接故障转移，快速应用程序通知和负载平衡咨询。</p>
                        </li>
                        <li>
                           <p>将表决磁盘放在不同的卷组上，以减少因I / O吞吐量较慢而导致的中断。为了幸免于<span class="italic">x</span>投票设备的故障，请配置2 <span class="italic">x</span> + 1个镜像。
                           </p>
                        </li>
                        <li>
                           <p>使用Oracle数据库服务质量管理（Oracle数据库QoS管理）来监视系统并检测性能瓶颈。</p>
                        </li>
                        <li>
                           <p>将OCR放置在I / O服务时间的2毫秒（ms）或更短的时间内。</p>
                        </li>
                        <li>
                           <p>使用<code class="codeph">FAST_START_MTTR_TARGET</code>初始化参数调整数据库恢复。
                           </p>
                        </li>
                        <li>
                           <p>使用Oracle自动存储管理（Oracle ASM）管理数据库存储。</p>
                        </li>
                        <li>
                           <p>确保实施强有力的变更控制程序。</p>
                        </li>
                        <li>
                           <p>检查周围的基础架构以获得高可用性和弹性，例如LDAP，NIS和DNS。这些实体会影响Oracle RAC数据库的可用性。如果可能，请定期执行本地备份过程。</p>
                        </li>
                        <li>
                           <p>使用Oracle Enterprise Manager管理整个Oracle RAC环境，而不仅仅是Oracle RAC数据库。使用Oracle Enterprise Manager创建和修改服务，以及启动和停止集群数据库实例和集群数据库。</p>
                        </li>
                        <li>
                           <p>使用Recovery Manager（RMAN）备份，还原和恢复数据文件，控制文件，服务器参数文件（SPFILE）和归档重做日志文件。您可以将RMAN与媒体管理器一起使用，以将文件备份到外部存储。您还可以在备份或恢复Oracle RAC数据库时配置并行性。在Oracle RAC中，可以跨所有Oracle RAC实例动态分配RMAN通道。通道故障转移使一个节点上的失败操作能够在另一个节点上继续。您可以从Oracle Enterprise Manager备份管理器或命令行启动RMAN。</p>
                        </li>
                        <li>
                           <p>如果使用序列号，则始终使用带有<code class="codeph">NOORDER</code>选项的<code class="codeph">CACHE</code> ，以便在序列号生成中获得最佳性能。但是，使用<code class="codeph">CACHE</code>选项，序列号中可能存在间隙。如果您的环境无法容忍序列号间隙，请使用<code class="codeph">NOCACHE</code>选项或考虑预生成序列号。如果您的应用程序需要序列号排序但可以容忍间隙，那么使用<code class="codeph">CACHE</code>和<code class="codeph">ORDER</code>在Oracle RAC中缓存和排序序列号。如果您的应用程序需要有序序列号而没有间隙，则使用<code class="codeph">NOCACHE</code>和<code class="codeph">ORDER</code> 。与其他缓存和排序组合相比， <code class="codeph">NOCACHE</code>和<code class="codeph">ORDER</code>组合对性能的负面影响最大。
                           </p>
                           <div class="infoboxnote" id="GUID-6F08D689-193E-49A3-8166-E6F5928561F8__GUID-5A14C367-ABB5-4084-85DB-06BBA3CA828F">
                              <p class="notep1">注意：</p>如果您的环境无法容忍序列号间隙，请考虑预先生成序列号或使用<code class="codeph">ORDER</code>和<code class="codeph">CACHE</code>选项。
                           </div>
                           <p>从Oracle Database 18c开始，您可以使用可伸缩序列来提供更好的数据加载可伸缩性，而不是配置非常大的序列缓存。可伸缩序列可提高并发数据加载操作的性能，尤其是在序列值用于填充表的主键列时。</p>
                        </li>
                        <li>
                           <p>如果使用索引，则考虑替代方法，例如反向键索引，以优化索引性能。如果频繁插入索引的一端（例如基于插入日期的索引），则反向键索引特别有用。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="workload-management-with-dynamic-database-services.html#GUID-8DC4D5E0-CA9D-47BC-BAD0-8769405AFEC5" title="工作负载管理包括负载平衡，为Oracle Real Application Clusters（Oracle RAC），分布式事务处理和服务启用客户端。">使用动态数据库服务管理工作负载</a></li>
                           <li><a href="configuring-recovery-manager-and-archiving.html#GUID-1051C520-07B2-431B-9B9B-E500B22547C1" title="要归档重做日志文件，Oracle RAC数据库必须处于ARCHIVELOG模式。快照控制文件是由RMAN在操作系统特定位置创建的数据库控制文件的副本。如果将CONFIGURE CONTROLFILE AUTOBACKUP设置为ON，则在运行BACKUP或COPY后，RMAN会自动创建控制文件和SPFILE备份命令。在多个节点上进行交叉检查时（以及一般操作RMAN时），配置群集，以便每个节点都可以访问所有备份，无论哪个节点创建了备份。对于任何归档重做日志配置，使用LOG_ARCHIVE_FORMAT参数唯一标识归档重做日志。Oracle RAC的首选配置是将Oracle自动存储管理（Oracle ASM）用于恢复区，该恢复区使用的恢复集磁盘组与用于数据文件的磁盘组不同。如果使用非群集文件系统本地归档进行介质恢复，则必须配置正在执行恢复的节点以便远程访问其他节点，以便它可以读取其他节点上的归档目录中的归档重做日志文件。">配置Recovery Manager和存档</a></li>
                           <li><a href="../admin/managing-views-sequences-and-synonyms.html#ADMIN-GUID-76663C84-D792-46A3-A25A-03C49DED71AD" target="_blank">使序列可扩展</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD7388"></a><div class="sect3"><a id="GUID-A3DDFCC2-4B31-42DC-9167-AF49879D2F06" name="GUID-A3DDFCC2-4B31-42DC-9167-AF49879D2F06"></a><h4 id="RACAD-GUID-A3DDFCC2-4B31-42DC-9167-AF49879D2F06" class="sect4">整合数据库中的多个应用程序或群集中的多个数据库</h4>
                  <div>
                     <p>很多人都想<a id="d42394e942" class="indexterm-anchor"></a>在单个数据库中整合多个应用程序或<a id="d42394e947" class="indexterm-anchor"></a><a id="d42394e951" class="indexterm-anchor"></a>合并单个群集中的多个数据库。Oracle Clusterware和Oracle RAC支持这两种类型的整合。
                     </p>
                     <p>使用Oracle ASM管理的单个存储池创建集群提供了管理多个数据库的基础结构，无论它们是单实例数据库还是Oracle RAC数据库。</p>
                  </div><a id="RACAD8439"></a><div class="sect4"><a id="GUID-B6338FE9-1F28-4995-A4F3-75F11805CB84" name="GUID-B6338FE9-1F28-4995-A4F3-75F11805CB84"></a><h5 id="RACAD-GUID-B6338FE9-1F28-4995-A4F3-75F11805CB84" class="sect5">合并期间管理能力</h5>
                     <div>
                        <p>使用Oracle RAC数据库，您可以根据工作负载要求调整实例数以及为给定数据库运行实例的节点。集群管理服务等功能允许您在单个数据库或多个数据库中管理多个工作负载。</p>
                        <p>在添加工作时，正确管理群集中的容量非常重要。管理来自Oracle Clusterware和数据库的集群（包括进程）的进程必须能够及时获得CPU资源，并且必须在系统中获得更高的优先级。Oracle数据库服务质量管理（Oracle数据库QoS管理）可以通过动态分配CPU资源来帮助整合群集或数据库中的多个应用程序，以实现性能目标。您还可以使用群集配置策略来管理群集级别的资源。</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="../atnms/overview-oracle-database-qos-management.html#GUID-D9ED0922-43EF-4AB5-80BA-669B753F1D87" target="_blank"><span><cite>Oracle数据库服务质量管理用户指南</cite></span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="RACAD8440"></a><div class="sect4"><a id="GUID-266D718B-FB5D-4E4E-94A9-655E96DC1635" name="GUID-266D718B-FB5D-4E4E-94A9-655E96DC1635"></a><h5 id="RACAD-GUID-266D718B-FB5D-4E4E-94A9-655E96DC1635" class="sect5">在合并期间管理全局缓存服务进程</h5>
                     <div>
                        <p>Oracle建议实时的数量<a id="d42394e1249" class="indexterm-anchor"></a><a id="d42394e1253" class="indexterm-anchor"></a>服务器上的全局缓存服务进程（LMS <span class="italic">n</span> ）小于或等于处理器数。（请注意，这是包含核心的已识别CPU的数量。例如，双核CPU被认为是两个CPU。）在节点上添加实例时加载测试系统非常重要，以确保您有足够的容量来支持工作负载。
                        </p>
                        <p>如果要将许多小型数据库合并到群集中，则可能需要减少Oracle RAC实例创建的LMS <span class="italic">n</span>的数量。默认情况下，Oracle数据库根据在服务器上找到的CPU数量计算进程数。此计算可能导致更多LMS <span class="italic">n</span>进程，而不是Oracle RAC实例所需的进程。一个LMS进程可能足以支持最多4个CPU。至<a id="d42394e1269" class="indexterm-anchor"></a><a id="d42394e1273" class="indexterm-anchor"></a><a id="d42394e1277" class="indexterm-anchor"></a>减少LMS <span class="italic">n</span>进程的数量，将<code class="codeph">GC_SERVER_PROCESSES</code>初始化参数设置为<code class="codeph">GC_SERVER_PROCESSES</code> 1。为应用程序所需的每四个CPU添加一个进程。通常，最好只有很少繁忙的LMS <span class="italic">n</span>进程。Oracle数据库计算实例启动时的进程数，您必须重新启动实例才能更改该值。
                        </p>
                     </div>
                  </div><a id="RACAD8441"></a><div class="sect4"><a id="GUID-B9062824-88FF-4150-9669-C8D5BE86BCE5" name="GUID-B9062824-88FF-4150-9669-C8D5BE86BCE5"></a><h5 id="RACAD-GUID-B9062824-88FF-4150-9669-C8D5BE86BCE5" class="sect5">使用数据库云进行整合</h5>
                     <div>
                        <p>数据库云是由全球数据服务框架集成到单个虚拟服务器中的一组数据库，提供一个或多个全局服务，同时确保高性能，可用性和资源的最佳利用。</p>
                        <p>全局数据服务以最小的管理开销管理这些虚拟化资源，并允许数据库云快速扩展以处理其他客户端请求。构成云的数据库可以是全局分布的，客户端可以通过简单地指定服务名称来连接到数据库云，而无需了解有关云的组件和拓扑的任何信息。</p>
                        <p>数据库云可以由多个数据库池组成。<a href="glossary.html#GUID-5E699DF1-C107-4254-B69A-CE2330B21A5A"><span class="xrefglossterm">数据库池</span></a>是数据库云中的一组数据库，它们提供一组唯一的全局服务并属于某个管理域。通过允许每个池由不同的管理员进行管理，将云数据库划分为多个池简化了服务管理并提供了更高的安全性。数据库云可以跨越多个地理区域。<a href="glossary.html#GUID-05C912CE-7871-490B-9D81-51FAA1044E37"><span class="xrefglossterm">区域</span></a>是一个逻辑边界，包含被认为彼此接近的数据库客户端和服务器。通常，区域对应于数据中心，但是如果它们之间的网络延迟满足访问这些数据中心的应用程序的服务级别协议，则多个数据中心可以位于同一区域中。
                        </p>
                        <p>全局服务使您能够将本地和全球分布式，松散耦合的异构数据库集成到可扩展且高度可用的私有数据库云中。该数据库云可以由全球客户共享。使用私有数据库云可以最佳地利用可用资源并简化数据库服务的配置。</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="../gsmug/global-data-services-admin.html#GSMUG-GUID-2B4F6218-309D-477C-9B57-48449D20BAAD" target="_blank"><span><cite>“Oracle数据库全球数据服务概念和管理指南”</cite></span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="RACAD7389"></a><div class="sect3"><a id="GUID-62E165A0-15A0-473C-960E-69EC6AE4BDB3" name="GUID-62E165A0-15A0-473C-960E-69EC6AE4BDB3"></a><h4 id="RACAD-GUID-62E165A0-15A0-473C-960E-69EC6AE4BDB3" class="sect4">Oracle RAC的可伸缩性</h4>
                  <div>
                     <p>Oracle RAC提供对来自多个系统的单个数据副本的并发，事务一致性访问。它提供超出单个服务器容量的可扩展性。如果您的应用程序在对称多处理（SMP）服务器上透明地扩展，那么期望应用程序在Oracle RAC上很好地扩展是可行的，而无需更改应用程序代码。</p>
                     <p>传统上，当数据库服务器的容量不足时，它将被替换为新的更大的服务器。随着服务器容量的增长，它们变得更加昂贵。但是，对于Oracle RAC数据库，您可以选择增加容量：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>您可以迁移传统上在大型SMP服务器上运行的应用程序，以在小型服务器群集上运行。</p>
                        </li>
                        <li>
                           <p>您可以维护当前硬件的投资，并向群集添加新服务器（或创建或添加新群集）以增加容量。</p>
                        </li>
                     </ul>
                     <p>使用Oracle Clusterware和Oracle RAC将服务器添加到群集不需要中断。一旦启动新实例，应用程序就可以利用额外的容量。</p>
                     <p>群集中的所有服务器必须运行相同的操作系统和相同版本的Oracle数据库，但服务器不必具有相同的容量。使用Oracle RAC，您可以构建满足您需求的集群，无论集群是由每个服务器是双CPU商用服务器的服务器组成，还是服务器在每个服务器中具有32或64个CPU的集群。Oracle并行执行功能允许将单个SQL语句划分为多个进程，其中每个进程完成一部分工作。在Oracle RAC环境中，您可以将并行进程定义为仅在用户连接的实例上运行，或者在群集中的多个实例上运行。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="cloning-oracle-rac-to-nodes-in-a-new-cluster.html#GUID-8444F1C2-5F67-46B4-ABDE-18D3AFF42D55" title="本章介绍如何将Linux和UNIX系统上的Oracle Real Application Clusters（Oracle RAC）数据库主目录克隆到新群集中的节点。">将Oracle RAC克隆到新群集中的节点</a></li>
                           <li><a href="using-cloning-to-extend-oracle-rac-to-nodes-in-the-same-cluster.html#GUID-CCD518C7-4E15-46C5-92CA-89F6DA3A7019" title="通过在Linux和UNIX系统环境中克隆本地（非共享）Oracle主目录，将节点添加到现有Oracle RAC环境。通过在Linux和UNIX系统环境中克隆共享Oracle主目录，将节点添加到现有Oracle RAC环境。通过在Windows系统环境中克隆共享或本地Oracle主目录，将节点添加到现有Oracle RAC环境。">使用克隆将Oracle RAC扩展到同一群集中的节点</a></li>
                           <li><a href="adding-and-deleting-oracle-rac-from-nodes-on-linux-and-unix-systems.html#GUID-66AB702E-D600-4B10-9BF3-AC0E7C7BF44D" title="将现有Oracle Real Application Clusters（Oracle RAC）主目录扩展到群集中的其他节点和实例，并从群集中的节点和实例中删除Oracle RAC。">在Linux和UNIX系统上从节点添加和删除Oracle RAC</a></li>
                           <li><a href="adding-and-deleting-oracle-rac-from-nodes-on-windows-systems.html#GUID-75C6891F-ECDC-4D78-9176-EB7E7080FBCB" title="您可以使用Oracle Enterprise Manager或DBCA将Oracle RAC数据库实例添加到目标节点。将实例添加到已扩展Oracle Clusterware主目录和Oracle数据库主目录的节点。对于策略管理和管理员管理的数据库，删除实例的过程是不同的。此过程从要从群集中删除的节点中删除Oracle RAC软件，并更新其余节点上的清单。">在Windows系统上从节点添加和删除Oracle RAC</a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="RACAD7390"></a><div class="sect2"><a id="GUID-21CA9D06-8D97-4C8D-9E1B-6FF2796E8A6E" name="GUID-21CA9D06-8D97-4C8D-9E1B-6FF2796E8A6E"></a><h3 id="RACAD-GUID-21CA9D06-8D97-4C8D-9E1B-6FF2796E8A6E" class="sect3">Oracle RAC的一般设计注意事项</h3>
               <div>
                  <p>本节简要介绍Oracle RAC环境的数据库设计和部署技术。它还介绍了高可用性的注意事项，并提供了各种Oracle RAC部署的一般准则。</p>
                  <p>在设计和开发要在Oracle RAC数据库上部署的应用程序期间，请考虑执行以下步骤：</p>
                  <ol>
                     <li>
                        <p>调整设计和应用程序</p>
                     </li>
                     <li>
                        <p>调整内存和I / O.</p>
                     </li>
                     <li>
                        <p>调整争用</p>
                     </li>
                     <li>
                        <p>调整操作系统</p>
                     </li>
                  </ol>
                  <div class="infoboxnote" id="GUID-21CA9D06-8D97-4C8D-9E1B-6FF2796E8A6E__GUID-DB0AC206-3E05-4770-92EF-02E84FC50CE8">
                     <p class="notep1">注意：</p>
                     <p>如果应用程序无法在SMP系统上扩展，则将应用程序移动到Oracle RAC数据库无法提高性能。</p>
                  </div>
                  <p>考虑使用<a id="d42394e1837" class="indexterm-anchor"></a>用于插入密集型联机事务处理（OLTP）应用程序的哈希分区。散列分区：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a id="d42394e1845" class="indexterm-anchor"></a>减少对并发插入到单个数据库结构中的争用</p>
                     </li>
                     <li>
                        <p>影响<a id="d42394e1851" class="indexterm-anchor"></a><a id="d42394e1853" class="indexterm-anchor"></a>索引在本地与表分区时，基于序列的索引和表在基于序列的键上进行分区</p>
                     </li>
                     <li>
                        <p>对应用程序是透明的</p>
                     </li>
                  </ul>
                  <p>如果对表和索引使用散列分区<a id="d42394e1863" class="indexterm-anchor"></a>在OLTP环境中，您可以大大提高Oracle RAC数据库的性能。请注意，您不能对具有散列分区的索引使用索引范围扫描。
                  </p>
               </div>
            </div><a id="RACAD712"></a><div class="sect2"><a id="GUID-CAE32074-BD5B-4DBF-8CFF-CBB4BB2E7BB7" name="GUID-CAE32074-BD5B-4DBF-8CFF-CBB4BB2E7BB7"></a><h3 id="RACAD-GUID-CAE32074-BD5B-4DBF-8CFF-CBB4BB2E7BB7" class="sect3">Oracle RAC的常规数据库部署主题</h3>
               <div>
                  <p>本节介绍部署Oracle RAC数据库时的注意事项。如果不使用这些技术，Oracle RAC数据库性能不会受到影响。如果您有一个有效的非群集设计，那么您的应用程序将在Oracle RAC数据库上运行良好。</p>
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="design-and-deployment-techniques.html#GUID-E7F5BA36-6849-4C6B-B786-62F298070A99">表空间在Oracle RAC中的使用</a></p>
                     </li>
                     <li>
                        <p><a href="design-and-deployment-techniques.html#GUID-993942C0-4AEE-4B92-AC8F-977739D364F9">Oracle RAC中的对象创建和性能</a></p>
                     </li>
                     <li>
                        <p><a href="design-and-deployment-techniques.html#GUID-2A77B47F-A79E-44C6-9F56-FB297089814A">节点添加和删除以及Oracle RAC中的SYSAUX表空间</a></p>
                     </li>
                     <li>
                        <p><a href="design-and-deployment-techniques.html#GUID-7C278D82-3DCC-423F-B1E7-4267B1EFC38F">分布式事务和Oracle RAC</a></p>
                     </li>
                     <li>
                        <p><a href="design-and-deployment-techniques.html#GUID-7FD857BE-8C7D-49A5-8065-18E3A12F8377">在Oracle RAC中部署OLTP应用程序</a></p>
                     </li>
                     <li>
                        <p><a href="design-and-deployment-techniques.html#GUID-46FB967B-2C62-48AF-841D-F713666F41B2">使用缓存融合灵活实施</a></p>
                     </li>
                     <li>
                        <p><a href="design-and-deployment-techniques.html#GUID-51F8099E-1EF0-467B-B76D-D593F8E5F657">使用Oracle RAC部署数据仓库应用程序</a></p>
                     </li>
                     <li>
                        <p><a href="design-and-deployment-techniques.html#GUID-D583DE16-C0D0-4B7E-8EB9-496AA0406E46" title="您可以配置和使用SSL证书，以在数据库层中的ONS服务器和中间层中的通知客户端之间设置身份验证。">Oracle RAC中的数据安全注意事项</a></p>
                     </li>
                  </ul>
               </div><a id="RACAD713"></a><div class="sect3"><a id="GUID-E7F5BA36-6849-4C6B-B786-62F298070A99" name="GUID-E7F5BA36-6849-4C6B-B786-62F298070A99"></a><h4 id="RACAD-GUID-E7F5BA36-6849-4C6B-B786-62F298070A99" class="sect4">表空间在Oracle RAC中的使用</h4>
                  <div>
                     <p>除了使用<a id="d42394e2201" class="indexterm-anchor"></a><a id="d42394e2203" class="indexterm-anchor"></a>本地管理的表空间，您可以通过使用进一步简化空间管理<a id="d42394e2208" class="indexterm-anchor"></a><a id="d42394e2212" class="indexterm-anchor"></a>自动分段空间管理（ASSM） <a id="d42394e2217" class="indexterm-anchor"></a>和<a id="d42394e2220" class="indexterm-anchor"></a><a id="d42394e2224" class="indexterm-anchor"></a>自动撤消管理。
                     </p>
                     <p>ASSM在每个实例的块子集中分配实例工作负载以进行插入。这提高了Oracle RAC性能，因为它最大限度地减少了块传输。要在Oracle RAC环境中部署自动撤消管理，每个实例都必须具有自己的撤消表空间。</p>
                  </div>
               </div><a id="RACAD714"></a><div class="sect3"><a id="GUID-993942C0-4AEE-4B92-AC8F-977739D364F9" name="GUID-993942C0-4AEE-4B92-AC8F-977739D364F9"></a><h4 id="RACAD-GUID-993942C0-4AEE-4B92-AC8F-977739D364F9" class="sect4">Oracle RAC中的对象创建和性能</h4>
                  <div>
                     <p><a id="d42394e2371" class="indexterm-anchor"></a>一般来说，只能使用<a id="d42394e2376" class="indexterm-anchor"></a>维护任务的DDL语句，避免在高峰系统运行期间执行DDL语句。在大多数系统中，应限制新对象创建和其他DDL语句的数量。就像在非群集Oracle数据库中一样，过度<a id="d42394e2379" class="indexterm-anchor"></a>对象创建和删除可能会增加性能开销。
                     </p>
                  </div>
               </div><a id="RACAD966"></a><div class="sect3"><a id="GUID-2A77B47F-A79E-44C6-9F56-FB297089814A" name="GUID-2A77B47F-A79E-44C6-9F56-FB297089814A"></a><h4 id="RACAD-GUID-2A77B47F-A79E-44C6-9F56-FB297089814A" class="sect4">节点添加和删除以及Oracle RAC中的SYSAUX表空间</h4>
                  <div>
                     <p>如果将节点添加到Oracle RAC数据库环境，则可能需要增加节点的大小<a id="d42394e2524" class="indexterm-anchor"></a><a id="d42394e2528" class="indexterm-anchor"></a> <code class="codeph">SYSAUX</code>表空间。相反，如果从<a href="glossary.html#GUID-5D32446E-2961-496F-BDE1-FE5E9C119DA0"><span class="xrefglossterm">群集数据库中</span></a>删除节点，则可以减小<code class="codeph">SYSAUX</code>表空间的大小。
                     </p>
                     <div class="infoboxnotealso" id="GUID-2A77B47F-A79E-44C6-9F56-FB297089814A__GUID-EF5D571B-6A65-4474-9517-11302D763E42">
                        <p class="notep1">也可以看看：</p>
                        <p>特定于平台的Oracle RAC安装指南，用于指定有关为多个实例调整<code class="codeph">SYSAUX</code>表空间大小的准则</p>
                     </div>
                  </div>
               </div><a id="RACAD967"></a><div class="sect3"><a id="GUID-7C278D82-3DCC-423F-B1E7-4267B1EFC38F" name="GUID-7C278D82-3DCC-423F-B1E7-4267B1EFC38F"></a><h4 id="RACAD-GUID-7C278D82-3DCC-423F-B1E7-4267B1EFC38F" class="sect4">分布式事务和Oracle RAC</h4>
                  <div>
                     <p>如果您在Oracle RAC环境中运行XA事务并且性能很差，则通过创建多个Oracle分布式事务处理（DTP）服务将紧密耦合的分布式事务的所有分支指向同一实例，每个Oracle上有一个或多个服务RAC实例。</p>
                     <p>每个DTP服务都是一个单独的服务，只能在一个Oracle RAC实例上使用。必须通过DTP服务对数据库服务器进行分布式事务处理的所有访问。确保单个全局分布式事务的所有分支都使用相同的DTP服务。换句话说，网络连接描述符（例如TNS名称，JDBC URL等）必须使用DTP服务来支持分布式事务处理。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="workload-management-with-dynamic-database-services.html#GUID-7948E56B-D455-4852-A3EF-20E4F59156A5">Oracle RAC中的分布式事务处理</a></li>
                           <li><a href="../adfns/xa.html#ADFNS-GUID-19B8285C-F8CA-4857-89E3-477C6BD1483C" target="_blank"><span><cite>Oracle数据库开发指南</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD788"></a><div class="sect3"><a id="GUID-7FD857BE-8C7D-49A5-8065-18E3A12F8377" name="GUID-7FD857BE-8C7D-49A5-8065-18E3A12F8377"></a><h4 id="RACAD-GUID-7FD857BE-8C7D-49A5-8065-18E3A12F8377" class="sect4">在Oracle RAC中部署OLTP应用程序</h4>
                  <div>
                     <p><a id="d42394e2852" class="indexterm-anchor"></a><a id="d42394e2856" class="indexterm-anchor"></a>缓存融合使<a id="d42394e2859" class="indexterm-anchor"></a> Oracle RAC数据库是最佳部署服务器<a id="d42394e2864" class="indexterm-anchor"></a>在线事务处理（OLTP）应用程序。这是因为这些类型的应用程序需要：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果出现故障，可用性高</p>
                        </li>
                        <li>
                           <p><a id="d42394e2875" class="indexterm-anchor"></a>可扩展性以适应不断增长的系统需求</p>
                        </li>
                        <li>
                           <p><a id="d42394e2880" class="indexterm-anchor"></a>根据需求波动进行负载均衡</p>
                        </li>
                     </ul>
                     <p>Oracle数据库和Oracle RAC的高可用性功能<a id="d42394e2885" class="indexterm-anchor"></a>可以在不中断处理的情况下将工作负载重新分配和负载平衡到幸存的实例。Oracle RAC还提供出色的可伸缩性，因此，如果添加或替换节点，Oracle Database将重新管理资源并重新分配处理负载。
                     </p>
                  </div>
               </div><a id="RACAD503"></a><div class="sect3"><a id="GUID-46FB967B-2C62-48AF-841D-F713666F41B2" name="GUID-46FB967B-2C62-48AF-841D-F713666F41B2"></a><h4 id="RACAD-GUID-46FB967B-2C62-48AF-841D-F713666F41B2" class="sect4">使用缓存融合灵活实施</h4>
                  <div>
                     <p>为适应在线事务处理系统频繁变化的工作负载，尽管系统负载和系统可用性发生变化，但Oracle RAC仍保持灵活和动态。Oracle RAC解决了广泛的问题<a id="d42394e3032" class="indexterm-anchor"></a>服务水平，例如，由于以下原因而波动：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>不同的用户需求</p>
                        </li>
                        <li>
                           <p>峰值可扩展性问题，如交易风暴（大量交易爆发）</p>
                        </li>
                        <li>
                           <p>不同的系统资源可用性</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="RACAD799"></a><div class="sect3"><a id="GUID-51F8099E-1EF0-467B-B76D-D593F8E5F657" name="GUID-51F8099E-1EF0-467B-B76D-D593F8E5F657"></a><h4 id="RACAD-GUID-51F8099E-1EF0-467B-B76D-D593F8E5F657" class="sect4">使用Oracle RAC部署数据仓库应用程序</h4>
                  <div>
                     <p><a id="d42394e3185" class="indexterm-anchor"></a><a id="d42394e3189" class="indexterm-anchor"></a>本节通过简要描述共享磁盘体系结构中可用的数据仓库功能，讨论如何在Oracle RAC环境中部署数据仓库系统。
                     </p>
                     <p>本节包括以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="design-and-deployment-techniques.html#GUID-CD5179E8-5251-4E6D-B98D-9278C3BE6E0D">加速Oracle RAC上的数据仓库应用程序</a></p>
                        </li>
                        <li>
                           <p><a href="design-and-deployment-techniques.html#GUID-08CFE56C-878B-467C-9591-BAC9E85FA463">数据仓库系统和Oracle RAC中的并行执行</a></p>
                        </li>
                     </ul>
                  </div><a id="RACAD506"></a><div class="sect4"><a id="GUID-CD5179E8-5251-4E6D-B98D-9278C3BE6E0D" name="GUID-CD5179E8-5251-4E6D-B98D-9278C3BE6E0D"></a><h5 id="RACAD-GUID-CD5179E8-5251-4E6D-B98D-9278C3BE6E0D" class="sect5">加速Oracle RAC上的数据仓库应用程序</h5>
                     <div>
                        <p>Oracle RAC是数据仓库应用程序的理想选择，因为它增强了Oracle数据库的非群集优势。Oracle RAC通过最大化属于Oracle RAC数据库提供的所有节点上的可用处理来实现此目的<a id="d42394e3346" class="indexterm-anchor"></a>加速数据仓库系统。
                        </p>
                        <p><a id="d42394e3350" class="indexterm-anchor"></a><a id="d42394e3354" class="indexterm-anchor"></a><a id="d42394e3356" class="indexterm-anchor"></a>查询优化器在确定时考虑并行执行<a id="d42394e3361" class="indexterm-anchor"></a>最佳执行计划。查询优化器的默认成本模型是<span class="bold">CPU + I / O</span> ，成本单位是<span class="bold">时间</span> 。在Oracle RAC中，查询优化器根据集群节点中的处理器数量动态计算并行性的智能默认值。例如，对替代访问路径，表扫描与索引访问的成本的评估考虑了<a id="d42394e3370" class="indexterm-anchor"></a>可用于操作的并行度。这会导致Oracle数据库选择针对Oracle RAC配置进行了优化的执行计划。
                        </p>
                     </div>
                  </div><a id="RACAD507"></a><div class="sect4"><a id="GUID-08CFE56C-878B-467C-9591-BAC9E85FA463" name="GUID-08CFE56C-878B-467C-9591-BAC9E85FA463"></a><h5 id="RACAD-GUID-08CFE56C-878B-467C-9591-BAC9E85FA463" class="sect5">数据仓库系统和Oracle RAC中的并行执行</h5>
                     <div>
                        <p>并行执行使用多个进程在一个或多个CPU上运行SQL语句，并且可在非群集Oracle数据库和Oracle RAC数据库上使用。</p>
                        <p>Oracle RAC通过在所有可用实例之间分配并行处理来充分利用并行执行。可以参与并行操作的进程数取决于分配给每个表或索引的并行度。</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="../tgdba/performance-tuning-overview.html#TGDBA-GUID-C090F213-C332-46F1-BBD1-51259FEFC676" target="_blank"><span><cite>Oracle数据库性能调整指南</cite></span></a></li>
                              <li><a href="../cncpt/process-architecture.html#CNCPT-GUID-B25C8454-BFBD-40F7-AF80-5029C93AAE42" target="_blank"><span><cite>Oracle数据库概念</cite></span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="RACAD510"></a><div class="sect3"><a id="GUID-D583DE16-C0D0-4B7E-8EB9-496AA0406E46" name="GUID-D583DE16-C0D0-4B7E-8EB9-496AA0406E46"></a><h4 id="RACAD-GUID-D583DE16-C0D0-4B7E-8EB9-496AA0406E46" class="sect4">Oracle RAC中的数据安全注意事项</h4>
                  <div>
                     <p>本节介绍以下两个<a id="d42394e3678" class="indexterm-anchor"></a> Oracle RAC安全注意事项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="design-and-deployment-techniques.html#GUID-E6435B89-5FF8-4818-8004-311AFB5570A2">透明数据加密和密钥库</a></p>
                        </li>
                        <li>
                           <p><a href="design-and-deployment-techniques.html#GUID-28A3C6AE-58F4-4732-84F0-33425FA81FBF">Windows防火墙注意事项</a></p>
                        </li>
                     </ul>
                  </div><a id="RACAD7269"></a><div class="sect4"><a id="GUID-E6435B89-5FF8-4818-8004-311AFB5570A2" name="GUID-E6435B89-5FF8-4818-8004-311AFB5570A2"></a><h5 id="RACAD-GUID-E6435B89-5FF8-4818-8004-311AFB5570A2" class="sect5">透明数据加密和密钥库</h5>
                     <div>
                        <p>Oracle数据库使Oracle RAC节点能够共享<a href="glossary.html#GUID-C285A4AC-F5B3-4964-AEE0-5890E97E6D27"><span class="xrefglossterm">密钥库</span></a> （钱包）。这消除了在所有节点上手动复制和同步密钥库的需要。Oracle建议您在共享文件系统上创建密钥库。这允许所有实例访问同一共享密钥库。
                        </p>
                        <p>Oracle RAC通过以下方式使用密钥库：</p>
                        <ol>
                           <li>
                              <p>在任何一个Oracle RAC实例上执行的任何密钥库操作（如打开或关闭密钥库）都适用于所有其他Oracle RAC实例。这意味着当您打开和关闭一个实例的密钥库时，它会打开并关闭所有Oracle RAC实例的密钥库。</p>
                           </li>
                           <li>
                              <p>使用共享文件系统时，请确保所有Oracle RAC实例的<code class="codeph">ENCRYPTION_WALLET_LOCATION</code>参数指向同一共享密钥库位置。安全性管理员还必须通过分配适当的目录权限来确保共享密钥库的安全性。
                              </p>
                              <div class="infoboxnote" id="GUID-E6435B89-5FF8-4818-8004-311AFB5570A2__GUID-86F05C46-26FC-4DC8-B344-74D2B14808EE">
                                 <p class="notep1">注意：</p>
                                 <p>如果Oracle自动存储管理群集文件系统（Oracle ACFS）可用于您的操作系统，则Oracle建议您将密钥库存储在Oracle ACFS中。如果Oracle ASM中没有Oracle ACFS，则使用Oracle ASM Configuration Assistant（ASMCA）创建它。您必须将挂载点添加到每个实例中的<code class="codeph">sqlnet.ora</code>文件中，如下所示：</p><pre class="pre codeblock"><code>ENCRYPTION_WALLET_LOCATION =（SOURCE =（METHOD = FILE）（METHOD_DATA =（DIRECTORY = / opt / oracle / acfsmounts / data_keystore）））</code></pre><p>实例启动时会自动挂载此文件系统。打开和关闭密钥库，以及设置或重新密钥和旋转TDE主加密密钥的命令在所有节点之间同步。</p>
                              </div>
                           </li>
                           <li>
                              <p>在一个实例上执行的主密钥重新生成适用于所有实例。当出现新的Oracle RAC节点时，它会知道当前的密钥库打开或关闭状态。</p>
                           </li>
                           <li>
                              <p>设置或更改主密钥时，请勿发出任何密钥库<code class="codeph">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN</code>或<code class="codeph">CLOSE</code> SQL语句。
                              </p>
                           </li>
                        </ol>
                        <p>密钥库不存在共享存储的部署要求每个Oracle RAC节点都维护本地密钥库。在单个节点上创建和置备密钥库后，必须复制密钥库并使其可用于所有其他节点，如下所示：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对于使用透明数据加密和加密密钥库的系统，您可以使用任何标准文件传输协议，但Oracle建议使用安全文件传输。</p>
                           </li>
                           <li>
                              <p>对于使用带有自动登录密钥库的透明数据加密的系统，建议通过安全通道进行文件传输。</p>
                           </li>
                        </ul>
                        <p>要指定密钥库必须驻留的目录，请在<code class="codeph">sqlnet.ora</code>文件中设置或<code class="codeph">ENCRYPTION_WALLET_LOCATION</code>参数。在透明数据加密使用期间，密钥库的本地副本无需同步，直到通过<code class="codeph">ADMINISTER KEY MANAGEMENT SET KEY</code> SQL语句重新键入服务器密钥。每次在数据库实例上发出<code class="codeph">ADMINISTER KEY MANAGEMENT SET KEY</code>语句时，都必须再次复制驻留在该节点上的密钥库，并使其可供所有其他节点使用。然后，您必须关闭并重新打开每个节点上的密钥库。为避免不必要的管理开销，请在您认为服务器主密钥可能已被泄露且未重新键入的特殊情况下保留重新键入可能会导致严重的安全问题。
                        </p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="../asoag/using-transparent-data-encryption-with-other-oracle-features.html#ASOAG-GUID-68EE178A-6B6C-497A-B720-052FB23B5794" target="_blank"><span><cite>Oracle数据库高级安全性指南</cite></span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="RACAD7391"></a><div class="sect4"><a id="GUID-28A3C6AE-58F4-4732-84F0-33425FA81FBF" name="GUID-28A3C6AE-58F4-4732-84F0-33425FA81FBF"></a><h5 id="RACAD-GUID-28A3C6AE-58F4-4732-84F0-33425FA81FBF" class="sect5">Windows防火墙注意事项</h5>
                     <div>
                        <p>默认情况下，Windows Server 2003 Service Pack 1及更高版本的所有安装都使Windows防火墙几乎可以阻止所有TCP网络端口到传入连接。因此，任何侦听TCP端口上的传入连接的Oracle产品都不会收到任何这些连接请求，并且建立这些连接的客户端将报告错误。</p>
                        <p>根据您安装的Oracle产品及其使用方式，您可能需要执行其他Windows安装后配置任务，以便防火墙产品在Windows Server 2003上正常运行。</p>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-958CB948-ACF5-4943-AFCC-C6321482F52B" name="GUID-958CB948-ACF5-4943-AFCC-C6321482F52B"></a><h5 id="RACAD-GUID-958CB948-ACF5-4943-AFCC-C6321482F52B" class="sect5">使用钱包安全地运行ONS客户端</h5>
                     <div>
                        <p>您可以配置和使用SSL证书，以在数据库层中的ONS服务器和中间层中的通知客户端之间设置身份验证。</p>
                        <div class="section">JDBC或Oracle通用连接池以及其他Oracle RAC功能（如快速连接故障转移）可订阅来自Oracle RAC节点上运行的Oracle Notification Service（ONS）的通知。这些连接通常不经过身份验证。</div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand" id="GUID-958CB948-ACF5-4943-AFCC-C6321482F52B__CREATEANORACLEWALLETTOSTORETHESSLCE-631DE1D9"><span>使用<code class="codeph">orapki</code>界面创建Oracle Wallet以存储SSL证书：</span><ol type="a">
                                 <li class="substepexpand"><span>创建一个存储钱包的目录（如果它不存在）。</span><div><pre class="pre codeblock"><code>$ cd <span class="variable" translate="no">Grid_home</span> / opmn / conf $ mkdir sslwallet</code></pre></div>
                                 </li>
                                 <li class="substepexpand" id="GUID-958CB948-ACF5-4943-AFCC-C6321482F52B__ORAPKIWALLETCREATE-WALLETSSLWALLET--631D580E"><span>使用<code class="codeph">auto_login</code>选项创建钱包。</span><div><pre class="pre codeblock"><code>$ orapki wallet create -wallet sslwallet -auto_login</code></pre></div>
                                 </li>
                                 <li class="substepexpand"><span>将自签名证书请求添加到钱包。<code class="codeph"></code></span><div><pre class="pre codeblock"><code>$ orapki wallet add -wallet sslwallet -dn“CN = ons_test，C = US”-keysize 1024 -self_signed -validity 9999</code></pre></div>
                                 </li>
                                 <li class="substepexpand"><span>通过将证书导出到文件来签署证书。<code class="codeph"></code></span><div><pre class="pre codeblock"><code>$ orapki wallet export -wallet sslwallet -dn“CN = ons_test，C = US”-cert sslwallet / cert.txt</code></pre></div>
                                 </li>
                                 <li class="substepexpand"><span>将您在步骤<a href="design-and-deployment-techniques.html#GUID-958CB948-ACF5-4943-AFCC-C6321482F52B__ORAPKIWALLETCREATE-WALLETSSLWALLET--631D580E">c中</a>创建的钱包复制到同一位置的所有其他群集节点。</span></li>
                              </ol>
                           </li>
                           <li class="stepexpand"><span>配置ONS以使用在步骤<a href="design-and-deployment-techniques.html#GUID-958CB948-ACF5-4943-AFCC-C6321482F52B__CREATEANORACLEWALLETTOSTORETHESSLCE-631DE1D9">1中</a>创建的钱包，如下所示：</span><div><pre class="pre codeblock"><code>$ srvctl modify nodeapps -clientdata sslwallet / cwallet.sso</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>如果您在中间层上运行客户端ONS守护程序，则有两种可能的配置：</span><ul>
                                 <li>ONS从OPMN（如OracleAS 10.1.3.x）开始，它使用<code class="codeph">opmn.xml</code>进行配置。
                                 </li>
                                 <li>ONS独立启动（与使用ONSCTL时一样），它使用<code class="codeph">ons.config</code>进行配置。
                                 </li>
                              </ul>
                              <div>
                                 <p>有关第一个配置，请参阅Oracle Application Server版本的OPMN管理员指南。这涉及修改<code class="codeph">opmn.xml</code>文件以指定钱包位置。
                                 </p>
                                 <p>对于第二种配置，客户端ONS守护程序可以在不同的服务器上运行。将步骤<a href="design-and-deployment-techniques.html#GUID-958CB948-ACF5-4943-AFCC-C6321482F52B__CREATEANORACLEWALLETTOSTORETHESSLCE-631DE1D9">1中</a>创建的钱包复制到这些客户端服务器，并在<code class="codeph">ons.config</code>文件或<code class="codeph">opmn.xml</code>文件中指定该客户端服务器上的路径。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>如果您在没有客户端ONS守护程序的情况下运行远程ONS配置，则将步骤<a href="design-and-deployment-techniques.html#GUID-958CB948-ACF5-4943-AFCC-C6321482F52B__CREATEANORACLEWALLETTOSTORETHESSLCE-631DE1D9">1中</a>创建的钱包复制到这些客户端服务器，并在<code class="codeph">ons.config</code>文件或<code class="codeph">ons.config</code>文件中指定该客户端服务器上的路径<code class="codeph">opmn.xml</code>文件。</span><div>
                                 <div class="p">或者，您可以将以下字符串指定为<code class="codeph">setONSConfiguration</code>参数：<pre class="pre codeblock"><code>propertiesfile = location_of_a_Java_properties_file</code></pre></div>
                                 <div class="p">Java属性文件必须包含下面列出的一个或多个ONS Java属性，但必须至少包含<code class="codeph">oracle.ons.nodes</code>属性：<ul class="simple" style="list-style-type:none;padding-left:0">
                                       <li><code class="codeph">oracle.ons.nodes</code></li>
                                       <li><code class="codeph">oracle.ons.walletfile</code></li>
                                       <li><code class="codeph">oracle.ons.walletpassword</code></li>
                                    </ul>
                                 </div>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="../jjucp/fast-connection-failover.html#JJUCP-GUID-A78715A2-9F5A-4779-AFD7-5FDEC258DA63" target="_blank">客户端ONS守护进程的配置</a></li>
                              <li><a href="../jjucp/fast-connection-failover.html#JJUCP-GUID-C8D5FF91-6333-4E7F-BC81-CF7B93D56BEE" target="_blank">ONS的远程配置</a></li>
                           </ul>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
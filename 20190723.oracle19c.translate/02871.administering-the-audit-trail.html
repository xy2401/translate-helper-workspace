<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Users who have been granted the AUDIT_ADMIN role can manage the audit trail, archive the audit trail, and purge audit trail records."></meta>
      <meta name="description" content="Users who have been granted the AUDIT_ADMIN role can manage the audit trail, archive the audit trail, and purge audit trail records."></meta>
      <title>管理审计跟踪</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Security Guide "></meta>
      <meta property="og:description" content="Users who have been granted the AUDIT_ADMIN role can manage the audit trail, archive the audit trail, and purge audit trail records."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Security Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-security-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-28T14:57:12-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96299-04"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="configuring-audit-policies.html" title="Previous" type="text/html"></link>
      <link rel="next" href="part_7.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Security Guide"></meta>
    <meta name="dcterms.isVersionOf" content="DBSEG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="configuring-audit-policies.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="part_7.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">安全指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part_6.html" property="item" typeof="WebPage"><span property="name">使用审计监视数据库活动</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理审计跟踪</li>
            </ol>
            <a id="GUID-9F298B8A-6196-4206-A889-A7CEB0924CF1" name="GUID-9F298B8A-6196-4206-A889-A7CEB0924CF1"></a><a id="DBSEG1026"></a>
            
            <h2 id="DBSEG-GUID-9F298B8A-6196-4206-A889-A7CEB0924CF1" class="sect2"><span class="enumeration_chapter">26</span>管理审计跟踪</h2>
         </header>
         <div class="ind">
            <div>
               <p>已被授予<code class="codeph">AUDIT_ADMIN</code>角色的用户可以管理审计跟踪，归档审计跟踪以及清除审计跟踪记录。
               </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-2A5CFDFC-320B-41D0-86AB-B524992E02A8">管理统一审计跟踪</a><br>默认情况下启用审核，但您可以控制何时将审核记录写入磁盘。
                  </li>
                  <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-58CFB1F4-7E76-46A4-8DDD-2546DBD67FBE">归档审计跟踪</a><br>您可以归档传统操作系统，统一数据库和传统数据库审计跟踪。
                  </li>
                  <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-9B891A44-3DF4-4B52-98D4-A931DBFAEC1D">清除审计跟踪记录</a><br><code class="codeph">DBMS_AUDIT_MGMT</code> PL / SQL程序包可以计划自动清除作业，手动清除审计记录以及执行其他审计跟踪操作。
                  </li>
                  <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-2AC6F69F-5BEA-4AC7-9A22-2966121A43ED">审计跟踪管理数据字典视图</a><br>Oracle数据库提供数据字典视图，列出有关审计跟踪管理设置的信息。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="part_6.html" title="第VI部分介绍了如何使用审计来监视数据库活动。">使用审计监视数据库活动</a></p>
                  </div>
               </div>
            </div>
            <a id="DBSEG629"></a><div class="props_rev_3"><a id="GUID-2A5CFDFC-320B-41D0-86AB-B524992E02A8" name="GUID-2A5CFDFC-320B-41D0-86AB-B524992E02A8"></a><h3 id="DBSEG-GUID-2A5CFDFC-320B-41D0-86AB-B524992E02A8" class="sect3">管理统一审计跟踪</h3>
               <div>
                  <p>默认情况下启用审核，但您可以控制何时将审核记录写入磁盘。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-4E26E99D-C2CC-4A35-8720-F9E1CA3D95CC">何时何地创建审计记录？</a><br>始终启用审核。Oracle数据库在审计的SQL语句的执行阶段期间或之后生成审计记录。
                     </li>
                     <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-AA781864-5756-464E-AFB6-675625AF0EF5">被强制审计的活动</a><br>始终会审计某些安全性敏感的数据库活动，并且无法禁用此类审核配置。
                     </li>
                     <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-59DE03A1-8446-4F38-B35E-306D61616F21">游标如何影响审计？</a><br>对于游标中每次执行可审计操作，Oracle数据库会将一条审计记录插入审计跟踪中。
                     </li>
                     <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-1DD625ED-AC75-47E7-ADF6-1C7C93656F22">将统一审计跟踪记录写入AUDSYS架构</a><br>Oracle数据库自动将审计记录写入<code class="codeph">AUDSYS</code>模式中的内部关系表。
                     </li>
                     <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-662AA54B-D878-4B78-94D3-733256B3F37C">将Unified Audit Trail Records写入SYSLOG或Windows事件查看器</a><br>您可以通过设置初始化参数将统一审计跟踪记录写入SYSLOG或Windows事件查看器。
                     </li>
                     <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-98108374-C053-4168-8A77-C567810DAD50">将审计记录写入操作系统时</a><br>在数据库表无法接受统一审计记录的情况下，这些记录将写入操作系统溢出审计文件（ <code class="codeph">.bin</code>格式）。
                     </li>
                     <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-91B14CCD-E408-4669-82FA-EE833EDBBBA9">将操作系统审计记录移动到统一审计跟踪中</a><br>已写入溢出审计文件的审计记录可以移动到统一审计跟踪数据库表中。
                     </li>
                     <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-80D9305C-29F6-4F3B-BDDB-371F619B08D8">禁用统一审核</a><br>您可以禁用统一审核。
                     </li>
                     <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-8140CCBF-77EE-4F86-A055-B9F9AB8B4573">使用Oracle Data Pump导出和导入Unified Audit Trail</a><br>您可以在Oracle Database Pump导出和导入转储文件中包含统一审计跟踪。
                     </li>
                  </ul>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="administering-the-audit-trail.html#GUID-9B891A44-3DF4-4B52-98D4-A931DBFAEC1D" title="DBMS_AUDIT_MGMT PL / SQL程序包可以计划自动清除作业，手动清除审计记录以及执行其他审计跟踪操作。">清除审计跟踪记录</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-9F298B8A-6196-4206-A889-A7CEB0924CF1" title="已被授予AUDIT_ADMIN角色的用户可以管理审计跟踪，归档审计跟踪以及清除审计跟踪记录。">管理审计跟踪</a></p>
                     </div>
                  </div>
               </div><a id="DBSEG353"></a><div class="props_rev_3"><a id="GUID-4E26E99D-C2CC-4A35-8720-F9E1CA3D95CC" name="GUID-4E26E99D-C2CC-4A35-8720-F9E1CA3D95CC"></a><h4 id="DBSEG-GUID-4E26E99D-C2CC-4A35-8720-F9E1CA3D95CC" class="sect4">何时何地创建审计记录？</h4>
                  <div>
                     <p>始终启用审核。Oracle数据库在审计的SQL语句的执行阶段期间或之后生成审计记录。</p>
                     <p>当程序单元运行时，Oracle数据库会根据需要单独审核PL / SQL程序单元中的SQL语句。</p>
                     <p>为了提高统一审计跟踪的读取性能，统一审计记录立即写入磁盘到<code class="codeph">AUDSYS</code>模式中的内部关系表。在之前的版本中，统一审计记录已写入SecureFile LOB。如果您已迁移到Oracle Database 12 <span class="italic">c第</span> 1版（12.1）中的统一审核，则可以手动将统一审核记录从SecureFile LOBS传输到此内部表。如果您使用的数据库版本支持分区表，则此内部表是分区表。在这种情况下，您可以使用<code class="codeph">DBMS_AUDIT_MGMT.ALTER_PARTITION_INTERVAL</code>过程修改表的分区间隔。此表的分区版本基于<code class="codeph">EVENT_TIMESTAMP</code>时间戳作为分区键，默认分区间隔为一个月。如果数据库版本不支持分区，则内部表是常规的非分区表。
                     </p>
                     <p>审计跟踪记录的生成和插入与提交的用户事务无关。也就是说，即使回滚用户事务，审计跟踪记录仍将提交。</p>
                     <p>在数据库用户连接到数据库时生效的统一审计策略中的语句和权限审计选项在会话期间保持有效。会话已处于活动状态时，设置或更改语句或权限统一审核选项不会在该会话中生效。修改后的语句或权限审计选项仅在当前会话结束并创建新会话时生效。</p>
                     <p>相反，对架构对象审计选项的更改对于当前会话立即生效。</p>
                     <p>默认情况下，审计跟踪记录将写入<code class="codeph">SYSAUX</code>表空间中的<code class="codeph">AUDSYS</code>模式。您可以使用<code class="codeph">DBMS_AUDIT_MGMT.SET_AUDIT_TRAIL_LOCATION</code>过程指定不同的表空间，包括加密的表空间。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-4E26E99D-C2CC-4A35-8720-F9E1CA3D95CC__GUID-E11FFEE8-8FFD-4AB9-A733-E3D5BEE6F2E7">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="administering-the-audit-trail.html#GUID-1DD625ED-AC75-47E7-ADF6-1C7C93656F22" title="Oracle数据库自动将审计记录写入AUDSYS模式中的内部关系表。">将Unified Audit Trail Records写入AUDSYS Schema</a> ，以获取有关如何将审计记录写入<code class="codeph">AUDSYS</code>更多信息</p>
                           </li>
                           <li>
                              <p>有关在升级后传输统一审核记录的信息，请参阅“ <a href="../upgrd/recommended-and-best-practices-complete-upgrading-oracle-database.html#UPGRD-GUID-4BC5F146-BF0D-4BCF-8A0B-1B67B767EEF1" target="_blank"><span><cite>Oracle数据库升级指南</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-2A5CFDFC-320B-41D0-86AB-B524992E02A8" title="默认情况下启用审核，但您可以控制何时将审核记录写入磁盘。">管理Unified Audit Trail</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG361"></a><div class="props_rev_3"><a id="GUID-AA781864-5756-464E-AFB6-675625AF0EF5" name="GUID-AA781864-5756-464E-AFB6-675625AF0EF5"></a><h4 id="DBSEG-GUID-AA781864-5756-464E-AFB6-675625AF0EF5" class="sect4">被强制审计的活动</h4>
                  <div>
                     <p>始终会审计某些安全性敏感的数据库活动，并且无法禁用此类审核配置。</p>
                     <p><code class="codeph">UNIFIED_AUDIT_TRAIL</code>数据字典视图捕获来自管理用户（如<code class="codeph">SYSDBA</code> ， <code class="codeph">SYSBACKUP</code>和<code class="codeph">SYSKM</code> 。您无需审核统一审计跟踪。统一审计跟踪驻留在<code class="codeph">AUDSYS</code>模式的只读表中。因此，统一审计跟踪视图中不允许使用DML。甚至不允许对<code class="codeph">AUDSYS</code>模式的基础字典表进行DML和DDL操作。
                     </p>
                     <p><code class="codeph">SYSTEM_PRIVILEGE_USED</code>列显示用于活动的管理权限的类型。
                     </p>
                     <p>以下与审计相关的活动，例如审计政策的修改，都是强制性的审计：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">创建审计政策</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">改变审计政策</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">DROP审计政策</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">审计</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">NOAUDIT</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">EXECUTE</code> <code class="codeph">DBMS_FGA</code> PL / SQL包</p>
                        </li>
                        <li>
                           <p><code class="codeph">EXECUTE</code> <code class="codeph">DBMS_AUDIT_MGMT</code> PL / SQL包</p>
                        </li>
                        <li>
                           <p><code class="codeph">ALTER TABLE</code>尝试<code class="codeph">AUDSYS</code>审计跟踪表（请记住，此表不能更改）</p>
                        </li>
                        <li>
                           <p>管理用户<code class="codeph">SYS</code> ， <code class="codeph">SYSDBA</code> ， <code class="codeph">SYSOPER</code> ， <code class="codeph">SYSASM</code> ， <code class="codeph">SYSBACKUP</code> ， <code class="codeph">SYSDG</code>和<code class="codeph">SYSKM</code> ，直到数据库打开。数据库打开时，Oracle数据库使用系统中的审计配置审核这些用户 - 例如，不仅是使用<code class="codeph">AUDIT</code>语句中的<code class="codeph">BY</code>子句应用的配置，而是<code class="codeph">AUDIT</code>当<code class="codeph">AUDIT</code>语句不适用于所有用户的那些用户使用<code class="codeph">BY</code>子句或使用<code class="codeph">EXCEPT</code>子句并且不排除这些用户。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">SYS.AUD$</code>和<code class="codeph">SYS.FGA_LOG$</code>字典表中所有用户发布的DML语句</p>
                        </li>
                        <li>
                           <p>任何尝试修改统一审计内部表的数据或元数据。默认情况下或严格执行此表上的<code class="codeph">SELECT</code>语句不会被审计。
                           </p>
                        </li>
                        <li>
                           <p>对Oracle Database Vault进行的所有配置更改</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="configuring-audit-policies.html#GUID-D352B575-2EA9-451D-9170-FD9298993DEF" title="您可以创建统一的审核策略来捕获管理用户帐户（例如SYS）的操作。">审核管理用户</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-2A5CFDFC-320B-41D0-86AB-B524992E02A8" title="默认情况下启用审核，但您可以控制何时将审核记录写入磁盘。">管理Unified Audit Trail</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="DBSEG370"></a><div class="props_rev_3"><a id="GUID-59DE03A1-8446-4F38-B35E-306D61616F21" name="GUID-59DE03A1-8446-4F38-B35E-306D61616F21"></a><h4 id="DBSEG-GUID-59DE03A1-8446-4F38-B35E-306D61616F21" class="sect4">游标如何影响审计？</h4>
                  <div>
                     <p>对于游标中每次执行可审计操作，Oracle数据库会将一条审计记录插入审计跟踪中。</p>
                     <p>导致游标重用的事件包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>一个应用程序，例如Oracle Forms，将游标打开以供重用</p>
                        </li>
                        <li>
                           <p>使用新的绑定变量后续执行游标</p>
                        </li>
                        <li>
                           <p>在PL / SQL循环中执行的语句，其中PL / SQL引擎优化语句以重用单个游标</p>
                        </li>
                     </ul>
                     <p>审计<span class="italic">不是</span>由光标是否被共享的影响。每个用户在首次执行游标时创建自己的审计跟踪记录。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-2A5CFDFC-320B-41D0-86AB-B524992E02A8" title="默认情况下启用审核，但您可以控制何时将审核记录写入磁盘。">管理Unified Audit Trail</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG631"></a><div class="props_rev_3"><a id="GUID-1DD625ED-AC75-47E7-ADF6-1C7C93656F22" name="GUID-1DD625ED-AC75-47E7-ADF6-1C7C93656F22"></a><h4 id="DBSEG-GUID-1DD625ED-AC75-47E7-ADF6-1C7C93656F22" class="sect4">将统一审计跟踪记录写入AUDSYS架构</h4>
                  <div>
                     <p>Oracle数据库自动将审计记录写入<code class="codeph">AUDSYS</code>模式中的内部关系表。
                     </p>
                     <p>在Oracle Database 12c第1版（12.1）中，您可以选择将审计记录排入内存（排队写入模式），并定期写入<code class="codeph">AUDSYS</code>模式审计表。但是，从Oracle Database 12c第2版（12.2）开始，不建议使用立即写入模式和排队写入模式。控制它们的参数（ <code class="codeph">UNIFIED_AUDIT_SGA_QUEUE_SIZE</code> ， <code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_IMMEDIATE_WRITE</code>和<code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_QUEUED_WRITE</code> ）虽然仍可查看，但不再具有任何功能。
                     </p>
                     <p>将审计记录始终写入<code class="codeph">AUDSYS</code>模式中的关系表的新功能可防止在实例崩溃或<code class="codeph">SHUTDOWN ABORT</code>操作期间丢失审计记录的风险。新功能还可以提高审计跟踪和数据库的整体性能。
                     </p>
                     <p>如果已从Oracle Database 12c第1版（12.1）升级并迁移到该版本中的统一审计，则Oracle建议您使用<code class="codeph">DBMS_AUDIT_MGMT.TRANSFER_UNIFIED_AUDIT_RECORDS</code>过程将先前版本中生成的审计记录传输到<code class="codeph">AUDSYS</code>审计内部表。<span class="italic">“Oracle数据库升级指南”</span>提供有关在升级后传输统一审核记录的信息。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../upgrd/recommended-and-best-practices-complete-upgrading-oracle-database.html#UPGRD-GUID-4BC5F146-BF0D-4BCF-8A0B-1B67B767EEF1" target="_blank"><span><cite>Oracle数据库升级指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-2A5CFDFC-320B-41D0-86AB-B524992E02A8" title="默认情况下启用审核，但您可以控制何时将审核记录写入磁盘。">管理Unified Audit Trail</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-662AA54B-D878-4B78-94D3-733256B3F37C" name="GUID-662AA54B-D878-4B78-94D3-733256B3F37C"></a><h4 id="DBSEG-GUID-662AA54B-D878-4B78-94D3-733256B3F37C" class="sect4">将Unified Audit Trail Records写入SYSLOG或Windows事件查看器</h4>
                  <div>
                     <p>您可以通过设置初始化参数将统一审计跟踪记录写入SYSLOG或Windows事件查看器。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-9A2B93A7-4166-4F29-B406-4AE6C6141ADD">关于将统一审计跟踪记录写入SYSLOG或Windows事件查看器</a><br>使用此功能，您可以将一些关键的Unified Audit字段写入SYSLOG或Windows事件查看器。
                        </li>
                        <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-3EFB75DB-AE1C-44E6-B46E-30E5702B0FC4">为统一审计跟踪启用syslog和Windows事件查看器捕获</a><br>要将统一审计跟踪记录的子集写入UNIX <code class="codeph">syslog</code>或Windows事件查看器，必须设置<code class="codeph">UNIFIED_AUDIT_SYSTEMLOG</code>初始化参数。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-2A5CFDFC-320B-41D0-86AB-B524992E02A8" title="默认情况下启用审核，但您可以控制何时将审核记录写入磁盘。">管理Unified Audit Trail</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-9A2B93A7-4166-4F29-B406-4AE6C6141ADD" name="GUID-9A2B93A7-4166-4F29-B406-4AE6C6141ADD"></a><h5 id="DBSEG-GUID-9A2B93A7-4166-4F29-B406-4AE6C6141ADD" class="sect5">关于将统一审计跟踪记录写入SYSLOG或Windows事件查看器</h5>
                     <div>
                        <p>使用此功能，您可以将一些关键的Unified Audit字段写入SYSLOG或Windows事件查看器。</p>
                        <p>您可以在UNIX和Microsoft Windows系统上配置此功能。在Windows系统上，您可以启用它或禁用它。如果启用，它会将记录写入Windows事件查看器。</p>
                        <p>在UNIX系统上，您可以微调SYSLOG的统一审计跟踪记录的捕获，以指定发送SYSLOG记录的工具和记录的严重性级别（例如，如果它捕获与调试相关的消息，则为<code class="codeph">DEBUG</code> ）。
                        </p>
                        <p><a href="administering-the-audit-trail.html#GUID-9A2B93A7-4166-4F29-B406-4AE6C6141ADD__GUID-6DCAACE1-DC14-4F2B-9FB1-26E75ADABFDA" title="此表映射在UNIX上写入SYSLOG的审计记录字段名称和Windows上的Windows事件查看器以及UNIFIED_AUDIT_TRAIL视图中的相应列名称。">表26-1</a>将写入SYSLOG和Windows事件查看器的统一审计记录字段的名称映射到<code class="codeph">UNIFIED_AUDIT_TRAIL</code>视图中的相应列名称。
                        </p>
                        <div class="tblformal" id="GUID-9A2B93A7-4166-4F29-B406-4AE6C6141ADD__GUID-6DCAACE1-DC14-4F2B-9FB1-26E75ADABFDA">
                           <p class="titleintable">表26-1 SYSLOG和Windows事件查看器的审核记录字段名称</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="审核SYSLOG和Windows事件查看器的记录字段名称" border="1" summary="This table maps the audit record field names written to SYSLOG on UNIX and the Windows Event Viewer on Windows with the corresponding column names in the UNIFIED_AUDIT_TRAIL view." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d177168e1366">字段名称</th>
                                    <th align="left" valign="bottom" id="d177168e1369">UNIFIED_AUDIT_TRAIL中的列名称</th>
                                    <th align="left" valign="bottom" id="d177168e1372">列类型</th>
                                    <th align="left" valign="bottom" id="d177168e1375">列描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d177168e1380" headers="d177168e1366 ">
                                       <p><code class="codeph">类型</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1380 d177168e1369 ">
                                       <p><code class="codeph">AUDIT_TYPE</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1380 d177168e1372 ">
                                       <p><code class="codeph">数</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1380 d177168e1375 ">
                                       <p>审计记录的类型</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d177168e1396" headers="d177168e1366 ">
                                       <p><code class="codeph">DBID</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1396 d177168e1369 ">
                                       <p><code class="codeph">DBID</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1396 d177168e1372 ">
                                       <p><code class="codeph">数</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1396 d177168e1375 ">
                                       <p>数据库标识符</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d177168e1412" headers="d177168e1366 ">
                                       <p><code class="codeph">SESID</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1412 d177168e1369 ">
                                       <p><code class="codeph">SESSION_ID</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1412 d177168e1372 ">
                                       <p><code class="codeph">数</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1412 d177168e1375 ">
                                       <p>会话标识符</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d177168e1428" headers="d177168e1366 ">
                                       <p><code class="codeph">客户端ID</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1428 d177168e1369 ">
                                       <p><code class="codeph">CLIENT_IDENTIFIER</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1428 d177168e1372 ">
                                       <p><code class="codeph">VARCHAR2</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1428 d177168e1375 ">
                                       <p>会话中的客户端标识符</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d177168e1444" headers="d177168e1366 ">
                                       <p><code class="codeph">ENTRYID</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1444 d177168e1369 ">
                                       <p><code class="codeph">ENTRY_ID</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1444 d177168e1372 ">
                                       <p><code class="codeph">数</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1444 d177168e1375 ">
                                       <p>系统中每个审计记录的标识符</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d177168e1460" headers="d177168e1366 ">
                                       <p><code class="codeph">STMTID</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1460 d177168e1369 ">
                                       <p><code class="codeph">STATEMENT_ID</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1460 d177168e1372 ">
                                       <p><code class="codeph">数</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1460 d177168e1375 ">
                                       <p>系统中运行的每个语句的标识符</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d177168e1476" headers="d177168e1366 ">
                                       <p><code class="codeph">DBUSER</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1476 d177168e1369 ">
                                       <p><code class="codeph">DB_USERNAME</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1476 d177168e1372 ">
                                       <p><code class="codeph">VARCHAR2</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1476 d177168e1375 ">
                                       <p>会话用户</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d177168e1492" headers="d177168e1366 ">
                                       <p><code class="codeph">CURUSER</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1492 d177168e1369 ">
                                       <p><code class="codeph">当前用户</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1492 d177168e1372 ">
                                       <p><code class="codeph">VARCHAR2</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1492 d177168e1375 ">
                                       <p>审核事件的有效用户</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d177168e1508" headers="d177168e1366 ">
                                       <p><code class="codeph">行动</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1508 d177168e1369 ">
                                       <p><code class="codeph">行动</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1508 d177168e1372 ">
                                       <p><code class="codeph">数</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1508 d177168e1375 ">
                                       <p>审计事件的操作代码</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d177168e1524" headers="d177168e1366 ">
                                       <p><code class="codeph">RETCODE</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1524 d177168e1369 ">
                                       <p><code class="codeph">值return_code</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1524 d177168e1372 ">
                                       <p><code class="codeph">数</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1524 d177168e1375 ">
                                       <p>返回审计事件的代码</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d177168e1540" headers="d177168e1366 ">
                                       <p><code class="codeph">SCHEMA</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1540 d177168e1369 ">
                                       <p><code class="codeph">OBJECT_SCHEMA</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1540 d177168e1372 ">
                                       <p><code class="codeph">VARCHAR2</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1540 d177168e1375 ">
                                       <p>对象的模式名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d177168e1557" headers="d177168e1366 ">
                                       <p><code class="codeph">OBJNAME</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1557 d177168e1369 ">
                                       <p><code class="codeph">OBJECT_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1557 d177168e1372 ">
                                       <p><code class="codeph">VARCHAR2</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1557 d177168e1375 ">
                                       <p>对象的名称</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d177168e1573" headers="d177168e1366 ">
                                       <p><code class="codeph">PDB_GUID</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1573 d177168e1369 ">
                                       <p><code class="codeph">NULL</code> （此字段的<code class="codeph">UNIFIED_AUDIT_TRAIL</code>中没有列）</p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1573 d177168e1372 ">
                                       <p><code class="codeph">VARCHAR2</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d177168e1573 d177168e1375 ">
                                       <p>生成统一审计记录的容器的GUID</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-662AA54B-D878-4B78-94D3-733256B3F37C" title="您可以通过设置初始化参数将统一审计跟踪记录写入SYSLOG或Windows事件查看器。">将Unified Audit Trail Records写入SYSLOG或Windows事件查看器</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-3EFB75DB-AE1C-44E6-B46E-30E5702B0FC4" name="GUID-3EFB75DB-AE1C-44E6-B46E-30E5702B0FC4"></a><h5 id="DBSEG-GUID-3EFB75DB-AE1C-44E6-B46E-30E5702B0FC4" class="sect5">为统一审计跟踪启用syslog和Windows事件查看器捕获</h5>
                     <div>
                        <p>要将统一审计跟踪记录的子集写入UNIX <code class="codeph">syslog</code>或Windows事件查看器，必须设置<code class="codeph">UNIFIED_AUDIT_SYSTEMLOG</code>初始化参数。
                        </p>
                        <div class="section">在Microsoft Windows系统上， <code class="codeph">UNIFIED_AUDIT_SYSTEMLOG</code>的默认值为<code class="codeph">FALSE</code> 。在UNIX系统上，没有默认值。在Oracle数据库Real Application Clusters（Oracle RAC）环境中，将此参数设置为每个Oracle RAC实例上的相同值。
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>找到<code class="codeph">init.ora</code>初始化文件，该文件默认位于<code class="codeph">$ORACLE_HOME/db</code> s目录中。</span></li>
                           <li class="stepexpand"><span>编辑<code class="codeph">init.ora</code>文件以包含<code class="codeph">UNIFIED_AUDIT_SYSTEMLOG</code>参数。</span><ul>
                                 <li>在Windows上，将<code class="codeph">UNIFIED_AUDIT_SYSTEMLOG</code>设置为<code class="codeph">TRUE</code>或<code class="codeph">FALSE</code> 。 <code class="codeph">TRUE</code>将<code class="codeph">syslog</code>值写入Windows事件查看器; <code class="codeph">FALSE</code>禁用该参数。例如：<pre class="oac_no_warn" dir="ltr">UNIFIED_AUDIT_SYSTEMLOG = TRUE</pre></li>
                                 <li>在UNIX系统上，使用以下语法：<pre class="oac_no_warn" dir="ltr">UNIFIED_AUDIT_SYSTEMLOG =' <span class="italic">facility_clause</span> 。 <span class="italic">priority_clause</span> '</pre><p>在本规范中：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><span class="italic"><code class="codeph">facility_clause</code></span>是指您将编写审计跟踪记录的工具。有效的选择是<code class="codeph">USER</code>和<code class="codeph">LOCAL</code> 。如果输入<code class="codeph">LOCAL</code> ，则可以选择附加<code class="codeph">0</code> - <code class="codeph">7</code>以指定<code class="codeph">syslog</code>记录的本地自定义工具。
                                          </p>
                                       </li>
                                       <li>
                                          <p><span class="italic"><code class="codeph">priority_clause</code></span>指的是对记录进行分类的警告类型。有效选择包括<code class="codeph">NOTICE</code> ， <code class="codeph">INFO</code> ， <code class="codeph">DEBUG</code> ， <code class="codeph">WARNING</code> ， <code class="codeph">ERR</code> ， <code class="codeph">CRIT</code> ， <code class="codeph">ALERT</code>和<code class="codeph">EMERG</code> 。</p>
                                       </li>
                                    </ul>
                                 </li>
                              </ul>
                              <div>例如：<pre class="oac_no_warn" dir="ltr">UNIFIED_AUDIT_SYSTEMLOG ='LOCAL7。EMERG”</pre></div>
                           </li>
                           <li class="stepexpand"><span>退出SQL * Plus。</span></li>
                           <li class="stepexpand"><span>将审计文件目标添加到<code class="codeph">syslog</code>配置文件<code class="codeph">/etc/syslog.conf</code> 。</span><div>例如，假设您已将<code class="codeph">UNIFIED_AUDIT_SYSTEMLOG</code>设置为<code class="codeph">LOCAL7.EMERG</code> ，输入以下内容：<pre class="oac_no_warn" dir="ltr">local7.emerg /var/log/audit.log</pre><p>此设置将所有紧急消息记录到<code class="codeph">/var/log/audit.log</code>文件中。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>重新启动<code class="codeph">syslog</code>记录器。</span><div><pre class="oac_no_warn" dir="ltr">$ / etc / rc.d / init.d / syslog restart</pre><p>现在，所有审计记录将通过<code class="codeph">syslog</code>守护程序在文件<code class="codeph">/var/log/audit.log</code>捕获。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>重新登录数据库实例。</span></li>
                           <li class="stepexpand"><span>重启数据库。</span><div>例如：<pre class="oac_no_warn" dir="ltr">关机立即启动</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="../refrn/UNIFIED_AUDIT_SYSTEMLOG.html#REFRN-GUID-C4E65709-0FE3-4945-8F39-7B0867E2494A" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-662AA54B-D878-4B78-94D3-733256B3F37C" title="您可以通过设置初始化参数将统一审计跟踪记录写入SYSLOG或Windows事件查看器。">将Unified Audit Trail Records写入SYSLOG或Windows事件查看器</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-98108374-C053-4168-8A77-C567810DAD50" name="GUID-98108374-C053-4168-8A77-C567810DAD50"></a><h4 id="DBSEG-GUID-98108374-C053-4168-8A77-C567810DAD50" class="sect4">将审计记录写入操作系统时</h4>
                  <div>
                     <p>在数据库表无法接受统一审计记录的情况下，这些记录将写入操作系统溢出审计文件（ <code class="codeph">.bin</code>格式）。
                     </p>
                     <p>在以下情况下写入数据库表的能力可能会失败：审计表空间处于脱机状态，表空间是只读的，表空间已满，数据库是只读的，依此类推。统一审核记录将继续写入操作系统溢出文件，直到操作系统磁盘空间已满。此时，当操作系统中没有空间用于审计记录时， <code class="codeph">ORA-02002 error while writing to audit trail</code>错误时，用户可审计事务将因<code class="codeph">ORA-02002 error while writing to audit trail</code>失败。为防止出现此问题，Oracle建议您定期清除审计跟踪。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="administering-the-audit-trail.html#GUID-9B891A44-3DF4-4B52-98D4-A931DBFAEC1D" title="DBMS_AUDIT_MGMT PL / SQL程序包可以计划自动清除作业，手动清除审计记录以及执行其他审计跟踪操作。">清除审计跟踪记录</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-2A5CFDFC-320B-41D0-86AB-B524992E02A8" title="默认情况下启用审核，但您可以控制何时将审核记录写入磁盘。">管理Unified Audit Trail</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="DBSEG731"></a><div class="props_rev_3"><a id="GUID-91B14CCD-E408-4669-82FA-EE833EDBBBA9" name="GUID-91B14CCD-E408-4669-82FA-EE833EDBBBA9"></a><h4 id="DBSEG-GUID-91B14CCD-E408-4669-82FA-EE833EDBBBA9" class="sect4">将操作系统审计记录移动到统一审计跟踪中</h4>
                  <div>
                     <p>已写入溢出审计文件的审计记录可以移动到统一审计跟踪数据库表中。</p>
                     <div class="section">
                        <p>当数据库不可写时（例如在数据库装入期间），如果数据库已关闭，或者它是只读的，则Oracle数据库会将审计记录写入这些外部文件。这些外部文件的默认位置是<code class="codeph">$ORACLE_BASE/audit/$ORACLE_SID</code>目录。
                        </p>
                        <p>您可以通过运行<code class="codeph">DBMS_AUDIT_MGMT.LOAD_UNIFIED_AUDIT_FILES</code>过程将文件加载到数据库中。请注意，如果要在外部文件中移动大量操作系统审核记录，性能可能会受到影响。
                        </p>
                        <p>在数据库可写时，将这些文件中的审计记录移动到<code class="codeph">AUDSYS</code>模式审计表：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以已被授予<code class="codeph">AUDIT_ADMIN</code>角色的用户身份登录数据库实例。</span><div>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">CONNECT aud_admin输入密码： <span class="italic">密码</span>已连接。
</pre><p>在多租户环境中，登录要在其中将审计跟踪记录移动到统一审计跟踪的PDB。</p>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">CONNECT aud_admin @hrpdb输入密码： <span class="italic">密码</span>已连接。
</pre><p>要查找可用的PDB，请运行<code class="codeph">show pdbs</code>命令。要检查当前PDB，请运行<code class="codeph">show con_name</code>命令。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>确保数据库是开放和可写的。</span><div>
                              <p>对于非CDB体系结构，要查找数据库是否可打开，请查询<code class="codeph">V$DATABASE</code>视图。
                              </p>
                              <p>例如，在CDB环境中：</p><pre class="oac_no_warn" dir="ltr">从V $ DATABASE中选择名称，OPEN_MODE;名称OPEN_MODE --------------- ---------- HRPDB READ WRITE</pre><p>在多租户环境中，您可以运行<code class="codeph">show pdbs</code>命令以查找有关与当前实例关联的PDB的信息。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">DBMS_AUDIT_MGMT.LOAD_UNIFIED_AUDIT_FILES</code>过程。</span><div><pre class="oac_no_warn" dir="ltr">EXEC DBMS_AUDIT_MGMT.LOAD_UNIFIED_AUDIT_FILES;</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>审计记录立即加载到<code class="codeph">AUDSYS</code>模式审计表中，然后从<code class="codeph">$ORACLE_BASE/audit/$ORACLE_SID</code>目录中删除。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-2A5CFDFC-320B-41D0-86AB-B524992E02A8" title="默认情况下启用审核，但您可以控制何时将审核记录写入磁盘。">管理Unified Audit Trail</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG821"></a><div class="props_rev_3"><a id="GUID-80D9305C-29F6-4F3B-BDDB-371F619B08D8" name="GUID-80D9305C-29F6-4F3B-BDDB-371F619B08D8"></a><h4 id="DBSEG-GUID-80D9305C-29F6-4F3B-BDDB-371F619B08D8" class="sect4">禁用统一审核</h4>
                  <div>
                     <p>您可以禁用统一审核。</p>
                     <div class="section">
                        <ol>
                           <li>
                              <p>禁用当前启用的任何统一审核策略。</p>
                              <p>完成此过程后，此步骤将阻止数据库进入混合模式审核。</p>
                              <ol type="a">
                                 <li>
                                    <p>以已被授予<code class="codeph">AUDIT_ADMIN</code>角色的用户身份登录数据库实例。
                                    </p>
                                 </li>
                                 <li>
                                    <p>查询<code class="codeph">AUDIT_UNIFIED_ENABLED_POLICIES</code>数据字典视图的<code class="codeph">POLICY_NAME</code>和<code class="codeph">ENABLED_OPT</code>列，以查找已启用的统一审核策略。
                                    </p>
                                 </li>
                                 <li>
                                    <p>运行<code class="codeph">NOAUDIT POLICY</code>语句以禁用每个启用的策略。
                                    </p>
                                    <p>例如，要禁用已应用于用户<code class="codeph">psmith</code> ：</p><pre class="oac_no_warn" dir="ltr">NOAUDIT POLICY audit_pol BY psmith;</pre></li>
                              </ol>
                           </li>
                           <li>
                              <p>用户<code class="codeph">SYS</code>以<code class="codeph">SYSOPER</code>权限连接。
                              </p><pre class="oac_no_warn" dir="ltr">CONNECT sys as sysoper输入密码： <span class="italic">password</span>
</pre><p>在多租户环境中，此命令将您连接到根。</p>
                           </li>
                           <li>
                              <p>关闭数据库。</p>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">立即关闭</pre><p>在多租户环境中，此命令会关闭CDB中的所有PDB。</p>
                           </li>
                           <li>
                              <p>根据您的平台，执行以下操作：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="bold">UNIX系统：</span>运行以下命令：</p><pre class="oac_no_warn" dir="ltr">cd $ ORACLE_HOME / rdbms / lib make -f ins_rdbms.mk uniaud_off ioracle</pre></li>
                                 <li>
                                    <p><span class="bold">Windows系统：</span>将<code class="codeph">%ORACLE_HOME%/bin/orauniaud12.dll</code>文件重命名为<code class="codeph">%ORACLE_HOME%/bin/orauniaud12.dll.dbl</code> 。
                                    </p>
                                 </li>
                              </ul>
                              <p>在多租户环境中，这些操作会禁用CDB中所有PDB中的统一审核。</p>
                           </li>
                           <li>
                              <p>在SQL * Plus中，重新启动数据库。</p><pre class="oac_no_warn" dir="ltr">启动</pre><p>在多租户环境中，此命令将重新启动CDB中的所有PDB。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="introduction-to-auditing.html#GUID-E9DB31BB-E90C-4B22-B29D-F9A44B350F9B" title="混合模式审计既可以实现传统（即，比版本12c更早的版本的审计功能），也可以启用新的审计功能（统一审计）。">关于混合模式审计</a></li>
                           <li><a href="configuring-audit-policies.html#GUID-1577CCEB-2AFD-417C-9238-9DFF13149766" title="您可以使用NOAUDIT POLICY语句禁用统一审核策略。">禁用统一审核策略</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-2A5CFDFC-320B-41D0-86AB-B524992E02A8" title="默认情况下启用审核，但您可以控制何时将审核记录写入磁盘。">管理Unified Audit Trail</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-8140CCBF-77EE-4F86-A055-B9F9AB8B4573" name="GUID-8140CCBF-77EE-4F86-A055-B9F9AB8B4573"></a><h4 id="DBSEG-GUID-8140CCBF-77EE-4F86-A055-B9F9AB8B4573" class="sect4">使用Oracle Data Pump导出和导入Unified Audit Trail</h4>
                  <div>
                     <p>您可以在Oracle Database Pump导出和导入转储文件中包含统一审计跟踪。</p>
                     <p>使用Oracle Data Pump将统一审计跟踪自动包含在完整数据库或部分数据库导出和导入操作中。例如，对于部分数据库导出操作，如果只想导出统一审计跟踪表，则可以输入以下<code class="codeph">expdp</code>命令：</p><pre class="oac_no_warn" dir="ltr">expdp system full = y directory = aud_dp_dir logfile = audexp_log.log dumpfile = audexp_dump.dmp version = 18.02.00.02.00 INCLUDE = AUDIT_TRAILS密码： <span class="italic">密码</span></pre><p>接下来，您可以通过读取导出转储文件来导入所有导出的内容。此操作仅导入统一审计试用表。</p>
                     <div class="p"><pre class="oac_no_warn" dir="ltr">impdp system full = y directory = aud_dp_dir dumpfile = audexp_dump.dmp logfile = audimp_log.log密码： <span class="italic">密码</span></pre>您无需执行任何特殊配置即可实现此操作。但是，你必须有<code class="codeph">EXP_FULL_DATABASE</code>如果执行导出操作和作用<code class="codeph">IMP_FULL_DATABASE</code>如果执行导入操作的作用。
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-2A5CFDFC-320B-41D0-86AB-B524992E02A8" title="默认情况下启用审核，但您可以控制何时将审核记录写入磁盘。">管理Unified Audit Trail</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="DBSEG732"></a><div class="props_rev_3"><a id="GUID-58CFB1F4-7E76-46A4-8DDD-2546DBD67FBE" name="GUID-58CFB1F4-7E76-46A4-8DDD-2546DBD67FBE"></a><h3 id="DBSEG-GUID-58CFB1F4-7E76-46A4-8DDD-2546DBD67FBE" class="sect3">归档审计跟踪</h3>
               <div>
                  <p>您可以归档传统操作系统，统一数据库和传统数据库审计跟踪。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-04612F83-EC57-462C-A4F4-7562C4CAD8B5">归档传统操作系统审计跟踪</a><br>升级Oracle数据库后，可以创建传统操作系统审计文件的存档。
                     </li>
                     <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-DACD856C-F3B2-40A1-9D48-882BBF438FCB">归档统一和传统数据库审计跟踪</a><br>您应该定期存档然后清除审计跟踪以防止它变得太大。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-9F298B8A-6196-4206-A889-A7CEB0924CF1" title="已被授予AUDIT_ADMIN角色的用户可以管理审计跟踪，归档审计跟踪以及清除审计跟踪记录。">管理审计跟踪</a></p>
                     </div>
                  </div>
               </div>
               <a id="DBSEG734"></a><div class="props_rev_3"><a id="GUID-04612F83-EC57-462C-A4F4-7562C4CAD8B5" name="GUID-04612F83-EC57-462C-A4F4-7562C4CAD8B5"></a><h4 id="DBSEG-GUID-04612F83-EC57-462C-A4F4-7562C4CAD8B5" class="sect4">归档传统操作系统审计跟踪</h4>
                  <div>
                     <p>升级Oracle数据库后，可以创建传统操作系统审计文件的存档。</p>
                     <div class="section">
                        <p>要从升级的数据库归档传统操作系统审计跟踪，请使用特定于平台的操作系统工具来创建传统操作系统审计文件的归档。</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用以下方法归档传统操作系统审计文件：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="bold">使用Oracle Audit Vault和Database Firewall。</span> 您可以从Oracle数据库中单独安装Oracle Audit Vault和Database Firewall。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">创建磁带或磁盘备份。</span> 您可以创建审核文件的压缩文件，然后将其存储在磁带或磁盘上。有关更多信息，请参阅操作系统文档。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <p>之后，您应该清除（删除）传统的操作系统审计记录，以释放审计跟踪空间并促进审计跟踪管理。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="administering-the-audit-trail.html#GUID-91B14CCD-E408-4669-82FA-EE833EDBBBA9" title="已写入溢出审计文件的审计记录可以移动到统一审计跟踪数据库表中。">将操作系统审计记录移动到统一审计跟踪中</a></li>
                           <li><a href="administering-the-audit-trail.html#GUID-9B891A44-3DF4-4B52-98D4-A931DBFAEC1D" title="DBMS_AUDIT_MGMT PL / SQL程序包可以计划自动清除作业，手动清除审计记录以及执行其他审计跟踪操作。">清除审计跟踪记录</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-58CFB1F4-7E76-46A4-8DDD-2546DBD67FBE" title="您可以归档传统操作系统，统一数据库和传统数据库审计跟踪。">存档审计跟踪</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="DBSEG733"></a><div class="props_rev_3"><a id="GUID-DACD856C-F3B2-40A1-9D48-882BBF438FCB" name="GUID-DACD856C-F3B2-40A1-9D48-882BBF438FCB"></a><h4 id="DBSEG-GUID-DACD856C-F3B2-40A1-9D48-882BBF438FCB" class="sect4">归档统一和传统数据库审计跟踪</h4>
                  <div>
                     <p>您应该定期存档然后清除审计跟踪以防止它变得太大。</p>
                     <div class="section">
                        <p>存档和清除都可以释放审计跟踪空间，并有助于清除数据库审计跟踪。</p>
                        <p>您可以使用Oracle Audit Vault和Database Firewall创建统一和传统数据库审计跟踪的归档。您可以从Oracle数据库中单独安装Oracle Audit Vault和Database Firewall。</p>
                        <p>完成存档后，您可以清除数据库审计跟踪内容。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>要归档统一的传统标准和传统的细粒度审计记录，请将相关记录复制到普通数据库表中。</p>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">INSERT INTO <span class="italic">表</span> SELECT ...来自UNIFIED_AUDIT_TRAIL ......; INSERT INTO <span class="italic">表</span> SELECT ...来自SYS.AUD $ ...; INSERT INTO <span class="italic">表</span> SELECT ...来自SYS.FGA_LOG $ ...;</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="administering-the-audit-trail.html#GUID-9B891A44-3DF4-4B52-98D4-A931DBFAEC1D" title="DBMS_AUDIT_MGMT PL / SQL程序包可以计划自动清除作业，手动清除审计记录以及执行其他审计跟踪操作。">清除审计跟踪记录</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-58CFB1F4-7E76-46A4-8DDD-2546DBD67FBE" title="您可以归档传统操作系统，统一数据库和传统数据库审计跟踪。">存档审计跟踪</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="DBSEG90934"></a><div class="props_rev_3"><a id="GUID-9B891A44-3DF4-4B52-98D4-A931DBFAEC1D" name="GUID-9B891A44-3DF4-4B52-98D4-A931DBFAEC1D"></a><h3 id="DBSEG-GUID-9B891A44-3DF4-4B52-98D4-A931DBFAEC1D" class="sect3">清除审计跟踪记录</h3>
               <div>
                  <p><code class="codeph">DBMS_AUDIT_MGMT</code> PL / SQL程序包可以计划自动清除作业，手动清除审计记录以及执行其他审计跟踪操作。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-60118D0C-75D7-4FF6-9965-2A23A2584E2A">关于清除审计跟踪记录</a><br>您可以使用多种方法清除审计跟踪记录。
                     </li>
                     <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-5761FBDA-91F9-4E0F-82E5-B52F3022324F">选择审计跟踪清除方法</a><br>您可以定期或在指定时间执行清除。
                     </li>
                     <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-C1EB1E76-B15B-4450-A4C3-ED525E17CBCA">为审计跟踪计划自动清除作业</a><br>安排自动清除作业需要事先进行规划，例如调整联机和归档重做日志大小。
                     </li>
                     <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-B9D2B078-2567-4002-A906-E293DE94549E">手动清除审计跟踪</a><br>您可以使用<code class="codeph">DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL</code>过程手动清除审计跟踪。
                     </li>
                     <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-91B17A5D-A702-4C9D-92C4-CF62A4BC4A5A">其他审计跟踪清除操作</a><br>其他类型的审计跟踪清除包括启用或禁用审计跟踪清除作业或设置默认审计跟踪清除作业间隔。
                     </li>
                     <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-532781DA-B568-4F37-84B7-D051D564D355">示例：直接调用统一审计跟踪清除操作</a><br>您可以创建自定义归档过程以直接调用统一的审计跟踪清除操作。
                     </li>
                  </ul>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="administering-the-audit-trail.html#GUID-2A5CFDFC-320B-41D0-86AB-B524992E02A8" title="默认情况下启用审核，但您可以控制何时将审核记录写入磁盘。">管理统一审计跟踪</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-9F298B8A-6196-4206-A889-A7CEB0924CF1" title="已被授予AUDIT_ADMIN角色的用户可以管理审计跟踪，归档审计跟踪以及清除审计跟踪记录。">管理审计跟踪</a></p>
                     </div>
                  </div>
               </div><a id="DBSEG462"></a><div class="props_rev_3"><a id="GUID-60118D0C-75D7-4FF6-9965-2A23A2584E2A" name="GUID-60118D0C-75D7-4FF6-9965-2A23A2584E2A"></a><h4 id="DBSEG-GUID-60118D0C-75D7-4FF6-9965-2A23A2584E2A" class="sect4">关于清除审计跟踪记录</h4>
                  <div>
                     <p>您可以使用多种方法清除审计跟踪记录。</p>
                     <p>您应该定期存档，然后删除（清除）审计跟踪记录。您可以清除审计跟踪记录的子集，也可以创建以指定时间间隔执行的清除作业。Oracle数据库清除在归档时间戳之前创建的审计跟踪记录，或者清除所有审计跟踪记录。您可以在读写和只读数据库中清除审计跟踪记录。</p>
                     <p>清除过程不仅考虑了统一的审计跟踪，还考虑了早期版本的Oracle数据库中的审计跟踪。例如，如果已迁移仍具有操作系统或XML审核记录的已升级数据库，则可以使用本节中的过程对其进行存档和清除。</p>
                     <p>要执行审计跟踪清除任务，请使用<code class="codeph">DBMS_AUDIT_MGMT</code> PL / SQL程序包。您必须具有<code class="codeph">AUDIT_ADMIN</code>角色才能使用<code class="codeph">DBMS_AUDIT_MGMT</code>包。Oracle数据库强制审核<code class="codeph">DBMS_AUDIT_MGMT</code> PL / SQL程序包过程的所有执行。
                     </p>
                     <p>如果安装了Oracle Audit Vault和Database Firewall，则审计跟踪清除过程与本手册中描述的过程不同。例如，Oracle Audit Vault会为您归档审计跟踪。</p>
                     <div class="infoboxnote" id="GUID-60118D0C-75D7-4FF6-9965-2A23A2584E2A__GUID-641347DF-5904-4300-A25B-B7EA16B785CC">
                        <p class="notep1">注意：</p>
                        <p>Oracle数据库审核审计跟踪中的所有删除，无一例外。</p>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-60118D0C-75D7-4FF6-9965-2A23A2584E2A__GUID-A838F213-0F34-481F-8471-4A4043D265DA">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">DBMS_AUDIT_MGMT</code> PL / SQL包的更多信息，请<code class="codeph">DBMS_AUDIT_MGMT</code> <a href="../arpls/DBMS_AUDIT_MGMT.html#ARPLS241" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                           </li>
                           <li>
                              <p>有关与<code class="codeph">DBA_AUDIT_MGMT</code>相关的视图的详细信息，请<code class="codeph">DBA_AUDIT_MGMT</code> <a href="../refrn/index.html" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-9B891A44-3DF4-4B52-98D4-A931DBFAEC1D" title="DBMS_AUDIT_MGMT PL / SQL程序包可以计划自动清除作业，手动清除审计记录以及执行其他审计跟踪操作。">清除审计跟踪记录</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG463"></a><div class="props_rev_3"><a id="GUID-5761FBDA-91F9-4E0F-82E5-B52F3022324F" name="GUID-5761FBDA-91F9-4E0F-82E5-B52F3022324F"></a><h4 id="DBSEG-GUID-5761FBDA-91F9-4E0F-82E5-B52F3022324F" class="sect4">选择审计跟踪清除方法</h4>
                  <div>
                     <p>您可以定期或在指定时间执行清除。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-1FB29F4F-F90A-4B7A-A77D-8347E3F97A1A">在定期计划的基础上清除审计跟踪</a><br>您可以定期清除所有审核记录，或审核在指定时间戳之前创建的记录。
                        </li>
                        <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-BCA62445-B081-4DD5-BBC4-792CC0591776">在特定时间手动清除审计跟踪</a><br>您可以在一次性操作中立即手动清除审计记录，而不是创建清除计划。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-9B891A44-3DF4-4B52-98D4-A931DBFAEC1D" title="DBMS_AUDIT_MGMT PL / SQL程序包可以计划自动清除作业，手动清除审计记录以及执行其他审计跟踪操作。">清除审计跟踪记录</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="DBSEG1121"></a><div class="props_rev_3"><a id="GUID-1FB29F4F-F90A-4B7A-A77D-8347E3F97A1A" name="GUID-1FB29F4F-F90A-4B7A-A77D-8347E3F97A1A"></a><h5 id="DBSEG-GUID-1FB29F4F-F90A-4B7A-A77D-8347E3F97A1A" class="sect5">在定期计划的基础上清除审计跟踪</h5>
                     <div>
                        <p>您可以定期清除所有审核记录，或审核在指定时间戳之前创建的记录。</p>
                        <div class="section">例如，您可以安排每周六凌晨2点清除</div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>如有必要，请调整联机和归档重做日志大小，以适应审计表清除过程中生成的其他记录。</span></li>
                           <li><span>规划时间戳和归档策略。</span></li>
                           <li><span>（可选）为审核记录设置存档时间戳。</span></li>
                           <li><span>创建并安排清除作业。</span></li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="administering-the-audit-trail.html#GUID-C1EB1E76-B15B-4450-A4C3-ED525E17CBCA" title="安排自动清除作业需要事先进行规划，例如调整联机和归档重做日志大小。">为审计跟踪计划自动清除作业</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-5761FBDA-91F9-4E0F-82E5-B52F3022324F" title="您可以定期或在指定时间执行清除。">选择审计跟踪清除方法</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="DBSEG1122"></a><div class="props_rev_3"><a id="GUID-BCA62445-B081-4DD5-BBC4-792CC0591776" name="GUID-BCA62445-B081-4DD5-BBC4-792CC0591776"></a><h5 id="DBSEG-GUID-BCA62445-B081-4DD5-BBC4-792CC0591776" class="sect5">在特定时间手动清除审计跟踪</h5>
                     <div>
                        <p>您可以在一次性操作中立即手动清除审计记录，而不是创建清除计划。</p>
                        <ol>
                           <li><span>如有必要，请调整联机和存档重做日志大小，以适应审计表清除过程中生成的其他记录。</span></li>
                           <li><span>规划时间戳和归档策略。</span></li>
                           <li><span>（可选）为审核记录设置存档时间戳。</span></li>
                           <li><span>运行清除操作。</span></li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="administering-the-audit-trail.html#GUID-B9D2B078-2567-4002-A906-E293DE94549E" title="您可以使用DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL过程手动清除审计跟踪。">手动清除审计跟踪</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-5761FBDA-91F9-4E0F-82E5-B52F3022324F" title="您可以定期或在指定时间执行清除。">选择审计跟踪清除方法</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div><a id="DBSEG465"></a><div class="props_rev_3"><a id="GUID-C1EB1E76-B15B-4450-A4C3-ED525E17CBCA" name="GUID-C1EB1E76-B15B-4450-A4C3-ED525E17CBCA"></a><h4 id="DBSEG-GUID-C1EB1E76-B15B-4450-A4C3-ED525E17CBCA" class="sect4">为审计跟踪计划自动清除作业</h4>
                  <div>
                     <p>安排自动清除作业需要事先进行规划，例如调整联机和归档重做日志大小。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-90647C68-F671-4AB0-978F-81D7AB0E63F9">关于计划自动清除作业</a><br>您可以清除整个审计跟踪，也可以仅清除在时间戳之前创建的审计跟踪的一部分。
                        </li>
                        <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-2F1AAC07-30A4-4B3A-B9E2-ADEC02E70533">步骤1：如有必要，调整在线和存档重做日志大小</a><br>清除过程可能会生成其他重做日志。
                        </li>
                        <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-F5B4C780-584A-4555-9608-1F5F9D62C7CA">第2步：规划时间戳和存档策略</a><br>您必须先记录审核记录的时间戳，然后才能将其归档。
                        </li>
                        <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-1C9053BB-30B8-48DB-9062-44DD42A75B4E">步骤3：（可选）设置审核记录的存档时间戳</a><br>如果要删除所有审计跟踪，则可以绕过此步骤。
                        </li>
                        <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-07ECB9A9-369A-4668-A0BC-D29CDB367ABF">第4步：创建并安排清除作业</a><br>您可以使用<code class="codeph">DBMS_AUDIT_MGMT</code> PL / SQL包来创建和计划清除作业。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-9B891A44-3DF4-4B52-98D4-A931DBFAEC1D" title="DBMS_AUDIT_MGMT PL / SQL程序包可以计划自动清除作业，手动清除审计记录以及执行其他审计跟踪操作。">清除审计跟踪记录</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="DBSEG735"></a><div class="props_rev_3"><a id="GUID-90647C68-F671-4AB0-978F-81D7AB0E63F9" name="GUID-90647C68-F671-4AB0-978F-81D7AB0E63F9"></a><h5 id="DBSEG-GUID-90647C68-F671-4AB0-978F-81D7AB0E63F9" class="sect5">关于计划自动清除作业</h5>
                     <div>
                        <p>您可以清除整个审计跟踪，也可以仅清除在时间戳之前创建的审计跟踪的一部分。</p>
                        <p>可以清除在时间戳之前创建的各个审计记录。</p>
                        <p>请注意，清除审计跟踪（尤其是大型审计跟踪）可能需要一段时间才能完成。考虑安排清除作业，使其在数据库不忙时运行。</p>
                        <p>您可以为不同的审计跟踪类型创建多个清除作业，只要它们不冲突即可。例如，您可以为标准审计跟踪表创建清除作业，然后为细粒度审计跟踪表创建清除作业。但是，您无法为两种或所有类型创建清除作业，即使用<code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_DB_STD</code>或<code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_ALL</code>属性。此外，请注意<code class="codeph">DBMS_SCHEDULER</code> PL / SQL包创建的作业不在只读数据库上执行。使用<code class="codeph">DBMS_AUDIT_MGMT</code>创建的自动清除作业使用<code class="codeph">DBMS_SCHEDULER</code>程序包来计划任务。因此，这些作业无法在以只读模式打开的数据库或PDB上运行。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-C1EB1E76-B15B-4450-A4C3-ED525E17CBCA" title="安排自动清除作业需要事先进行规划，例如调整联机和归档重做日志大小。">为审计跟踪计划自动清除作业</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG466"></a><div class="props_rev_3"><a id="GUID-2F1AAC07-30A4-4B3A-B9E2-ADEC02E70533" name="GUID-2F1AAC07-30A4-4B3A-B9E2-ADEC02E70533"></a><h5 id="DBSEG-GUID-2F1AAC07-30A4-4B3A-B9E2-ADEC02E70533" class="sect5">步骤1：如有必要，调整在线和存档重做日志大小</h5>
                     <div>
                        <p>清除过程可能会生成其他重做日志。</p>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>如有必要，请调整联机和存档重做日志大小，以适应审计表清除过程中生成的其他记录。</p>
                              </li>
                           </ul>
                           <p>在统一审计环境中，清除过程不会生成与混合模式审计环境中一样多的重做日志，因此，如果已迁移到统一审计，则可能需要绕过此步骤。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-2F1AAC07-30A4-4B3A-B9E2-ADEC02E70533__GUID-AAEB6566-1011-4F23-8BC0-B3CF224D4B99">
                           <p class="notep1">也可以看看：</p>
                           <p>有关调整日志文件的详细信息，请参见<a href="../admin/managing-the-redo-log.html#ADMIN007" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-C1EB1E76-B15B-4450-A4C3-ED525E17CBCA" title="安排自动清除作业需要事先进行规划，例如调整联机和归档重做日志大小。">为审计跟踪计划自动清除作业</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG467"></a><div class="props_rev_3"><a id="GUID-F5B4C780-584A-4555-9608-1F5F9D62C7CA" name="GUID-F5B4C780-584A-4555-9608-1F5F9D62C7CA"></a><h5 id="DBSEG-GUID-F5B4C780-584A-4555-9608-1F5F9D62C7CA" class="sect5">第2步：规划时间戳和存档策略</h5>
                     <div>
                        <p>您必须先记录审核记录的时间戳，然后才能将其归档。</p>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要查找时间戳日期，请查询<code class="codeph">DBA_AUDIT_MGMT_LAST_ARCH_TS</code>数据字典视图。
                                 </p>
                              </li>
                           </ul>
                           <p>稍后，当清除发生时，Oracle数据库仅清除在此存档时间戳日期之前创建的审计跟踪记录。</p>
                           <p>在为记录添加时间戳之后，您就可以将它们存档了。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="administering-the-audit-trail.html#GUID-1C9053BB-30B8-48DB-9062-44DD42A75B4E" title="如果要删除所有审计跟踪，则可以绕过此步骤。">步骤3：（可选）设置审核记录的存档时间戳</a></li>
                              <li><a href="administering-the-audit-trail.html#GUID-58CFB1F4-7E76-46A4-8DDD-2546DBD67FBE" title="您可以归档传统操作系统，统一数据库和传统数据库审计跟踪。">归档审计跟踪</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-C1EB1E76-B15B-4450-A4C3-ED525E17CBCA" title="安排自动清除作业需要事先进行规划，例如调整联机和归档重做日志大小。">为审计跟踪计划自动清除作业</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="DBSEG469"></a><div class="props_rev_3"><a id="GUID-1C9053BB-30B8-48DB-9062-44DD42A75B4E" name="GUID-1C9053BB-30B8-48DB-9062-44DD42A75B4E"></a><h5 id="DBSEG-GUID-1C9053BB-30B8-48DB-9062-44DD42A75B4E" class="sect5">步骤3：（可选）设置审核记录的存档时间戳</h5>
                     <div>
                        <p>如果要删除所有审计跟踪，则可以绕过此步骤。</p>
                        <div class="section">
                           <p>您可以设置存档上次审核记录的时间戳。设置存档时间戳可为清除基础结构提供清理点。如果要为只读数据库设置时间戳，则可以使用<code class="codeph">DBMS_AUDIT.MGMT.GET_LAST_ARCHIVE_TIMESTAMP</code>函数查找为运行它的实例配置的最后一个存档时间戳。对于读写数据库，您可以查询<code class="codeph">DBA_AUDIT_MGMT_LAST_ARCH_TS</code>数据字典视图。
                           </p>
                           <p>要查找统一审计跟踪的上次归档时间戳，可以查询<code class="codeph">DBA_AUDIT_MGMT_LAST_ARCH_TS</code>数据字典视图。设置时间戳后，在运行<code class="codeph">DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL</code> PL / SQL过程时，将清除审计跟踪中指示早于该时间戳的时间的所有审计记录。如果要清除存档时间戳设置，请参阅<a href="administering-the-audit-trail.html#GUID-4AE3F98A-BB9E-437B-BCEB-4DA626F2302E" title="DBMS_AUDIT_MGMT.CLEAR_LAST_ARCHIVE_TIMESTAMP过程可以清除存档时间戳设置。">清除存档时间戳设置</a> 。
                           </p>
                           <p>如果您使用的是Oracle数据库Real Application Clusters，则使用网络时间协议（NTP）来同步安装Oracle数据库实例的每台计算机上的时间。例如，假设您在上午11:00:00设置一个Oracle RAC实例节点的时间，然后在11:00:05设置下一个Oracle RAC实例节点。结果，两个节点的时间不一致。您可以使用网络时间协议（NTP）来同步这些Oracle RAC实例节点的时间。</p>
                           <p>要设置清除作业的时间戳，请执行以下操作：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以已被授予<code class="codeph">AUDIT_ADMIN</code>角色的用户身份登录数据库实例。</span><div>
                                 <p>在多租户环境中，登录要在其中安排清除作业的根或PDB。在大多数情况下，您可能希望在各个PDB上安排清除作业。</p>
                                 <p>例如，要登录名为<code class="codeph">hrpdb</code>的PDB：</p><pre class="oac_no_warn" dir="ltr">CONNECT aud_admin @hrpdb输入密码： <span class="italic">密码</span>已连接。
</pre></div>
                           </li>
                           <li class="stepexpand"><span>运行<code class="codeph">DBMS_AUDIT_MGMT.SET_LAST_ARCHIVE_TIMESTAMP</code> PL / SQL过程以设置时间戳。</span><div>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AUDIT_MGMT.SET_LAST_ARCHIVE_TIMESTAMP（AUDIT_TRAIL_TYPE =&gt; DBMS_AUDIT_MGMT.AUDIT_TRAIL_UNIFIED，LAST_ARCHIVE_TIME =&gt; '12 -OCT-2013 06：30：00.00'，RAC_INSTANCE_NUMBER =&gt; 1，CONTAINER =&gt; DBMS_AUDIT_MGMT.CONTAINER_CURRENT）;结束; /</pre><p>在这个例子中：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">AUDIT_TRAIL_TYPE</code>指定审计跟踪类型。<code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_UNIFIED</code>为统一审计跟踪设置它。
                                       </p>
                                       <p>对于仍具有先前版本的传统审计数据的升级数据库：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_AUD_STD</code>用于传统的标准审计跟踪表<code class="codeph">AUD$</code> 。（此设置不适用于只读数据库。）
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_FGA_STD</code>用于传统的细粒度审计跟踪表<code class="codeph">FGA_LOG$</code> 。（此设置不适用于只读数据库。）
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_OS</code>用于具有<code class="codeph">.aud</code>扩展名的传统操作系统审计跟踪文件。（此设置不适用于Windows事件日志条目。）
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_XML</code>用于XML传统操作系统审计跟踪文件。
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><code class="codeph">LAST_ARCHIVE_TIME</code>以<code class="codeph">AUDIT_TRAIL_UNIFIED</code> ， <code class="codeph">AUDIT_TRAIL_AUD_STD</code>和<code class="codeph">AUDIT_TRAIL_FGA_STD</code>以及<code class="codeph">AUDIT_TRAIL_OS</code>和<code class="codeph">AUDIT_TRAIL_XML</code>的本地时区中的<code class="codeph">YYYY-MM-DD HH:MI:SS.FF</code> UTC（协调世界时）格式指定时间戳。</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">RAC_INSTANCE_NUMBER</code>指定Oracle RAC安装的实例编号。此设置与单实例数据库无关。如果指定了<code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_AUD_STD</code>或<code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_FGA_STD</code>审计跟踪类型，则可以省略<code class="codeph">RAC_INSTANCE_NUMBER</code>参数。这是因为即使对于Oracle RAC安装，也只有一个<code class="codeph">AUD$</code>或<code class="codeph">FGA_LOG$</code>表。默认值为<code class="codeph">NULL</code> 。您可以通过在SQL * Plus中发出<code class="codeph">SHOW PARAMETER INSTANCE_NUMBER</code>命令来查找当前实例的实例编号。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">CONTAINER</code>将时间戳应用于多租户环境。<code class="codeph">DBMS_AUDIT_MGMT.CONTAINER_CURRENT</code>指定当前的PDB; <code class="codeph">DBMS_AUDIT_MGMT.CONTAINER_ALL</code>适用于多租户环境中的所有PDB。
                                       </p>
                                       <p>请注意，您只能从根目录将<code class="codeph">CONTAINER</code>设置为<code class="codeph">DBMS_MGMT.CONTAINER_ALL</code> ，而只能从PDB设置<code class="codeph">DBMS_MGMT.CONTAINER_CURRENT</code> 。</p>
                                    </li>
                                 </ul>
                                 <p>通常，在设置时间戳之后，可以使用<code class="codeph">DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL</code> PL / SQL过程删除在时间戳日期之前创建的审核记录。
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-C1EB1E76-B15B-4450-A4C3-ED525E17CBCA" title="安排自动清除作业需要事先进行规划，例如调整联机和归档重做日志大小。">为审计跟踪计划自动清除作业</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG470"></a><div class="props_rev_3"><a id="GUID-07ECB9A9-369A-4668-A0BC-D29CDB367ABF" name="GUID-07ECB9A9-369A-4668-A0BC-D29CDB367ABF"></a><h5 id="DBSEG-GUID-07ECB9A9-369A-4668-A0BC-D29CDB367ABF" class="sect5">第4步：创建并安排清除作业</h5>
                     <div>
                        <p>您可以使用<code class="codeph">DBMS_AUDIT_MGMT</code> PL / SQL包来创建和计划清除作业。
                        </p>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>通过运行<code class="codeph">DBMS_AUDIT_MGMT.CREATE_PURGE_JOB</code> PL / SQL过程来创建和计划清除作业。
                                 </p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">CONNECT aud_admin @hrpdb输入密码： <span class="italic">密码</span>已连接。BEGIN DBMS_AUDIT_MGMT.CREATE_PURGE_JOB（ <code class="codeph">AUDIT_TRAIL_TYPE</code> =&gt; DBMS_AUDIT_MGMT.AUDIT_TRAIL_UNIFIED，AUDIT_TRAIL_PURGE_INTERVAL =&gt; 12，AUDIT_TRAIL_PURGE_NAME =&gt;'Audit_Trail_PJ'， <code class="codeph">USE_LAST_ARCH_TIMESTAMP</code> =&gt; TRUE，CONTAINER =&gt; DBMS_AUDIT_MGMT.CONTAINER_CURRENT）;结束; /</pre></li>
                           </ul>
                           <p>在这个例子中：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">AUDIT_TRAIL_TYPE</code> ：指定审计跟踪类型。<code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_UNIFIED</code>为统一审计跟踪设置它。
                                 </p>
                                 <p>对于仍具有先前版本的审计数据的升级数据库：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_AUD_STD</code>用于标准审计跟踪表<code class="codeph">AUD$</code> 。（此设置不适用于只读数据库。）
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_FGA_STD</code>用于细粒度审计跟踪表<code class="codeph">FGA_LOG$</code> 。（此设置不适用于只读数据库。）
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_DB_STD</code>用于标准和细粒度审计跟踪表。（此设置不适用于只读数据库。）
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_OS</code>用于具有<code class="codeph">.aud</code>扩展名的操作系统审计跟踪文件。（此设置不适用于Windows事件日志条目。）
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_XML</code>用于XML操作系统审计跟踪文件。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_FILES</code>用于操作系统和XML审计跟踪文件。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_ALL</code>用于所有审计跟踪记录，即数据库审计跟踪和操作系统审计跟踪类型。（此设置不适用于只读数据库。）
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p><code class="codeph">AUDIT_TRAIL_PURGE_INTERVAL</code>指定此清除作业运行的每小时间隔。在运行此过程12小时后运行<code class="codeph">DBMS_AUDIT_MGMT.CREATE_PURGE_JOB</code>过程时，计时开始。稍后，如果要更新此值，请运行<code class="codeph">DBMS_AUDIT_MGMT.SET_PURGE_JOB_INTERVAL</code>过程。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">USE_LAST_ARCH_TIMESTAMP</code>接受以下任一设置：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">TRUE</code>删除在上一个归档时间戳之前创建的审核记录。要检查上次记录的时间戳，请查询<code class="codeph">DBA_AUDIT_MGMT_LAST_ARCH_TS</code>数据字典视图的<code class="codeph">LAST_ARCHIVE_TS</code>列以<code class="codeph">DBA_AUDIT_MGMT_LAST_ARCH_TS</code>读写数据库，并查询<code class="codeph">DBMS_AUDIT_MGMT.GET_LAST_ARCHIVE_TIMESTAMP</code>函数以获取只读数据库。默认值为<code class="codeph">TRUE</code> 。 Oracle建议您将<code class="codeph">USE_LAST_ARCH_TIMESTAMP</code>设置为<code class="codeph">TRUE</code> 。</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FALSE</code>删除所有审计记录而不考虑上次存档时间戳。如果您无意中删除了不应删除的审核记录，请小心使用此设置。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p><code class="codeph">CONTAINER</code>用于多租户环境，以定义创建清除作业的位置。如果将<code class="codeph">CONTAINER</code>设置为<code class="codeph">DBMS_AUDIT_MGMT.CONTAINER_CURRENT</code> ，则它仅可从当前PDB使用，可见和管理。 <code class="codeph">DBMS_AUDIT_MGMT.CONTAINER_ALL</code>设置在根目录中创建作业。这将作业定义为全局作业，该作业根据定义的作业计划运行。调用作业时，它会清除多租户环境中所有PDB中的审计跟踪。如果在根目录中创建作业，则只在根目录中可见。因此，您只能从root用户启用，禁用和删除它。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-C1EB1E76-B15B-4450-A4C3-ED525E17CBCA" title="安排自动清除作业需要事先进行规划，例如调整联机和归档重做日志大小。">为审计跟踪计划自动清除作业</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="DBSEG472"></a><div class="props_rev_3"><a id="GUID-B9D2B078-2567-4002-A906-E293DE94549E" name="GUID-B9D2B078-2567-4002-A906-E293DE94549E"></a><h4 id="DBSEG-GUID-B9D2B078-2567-4002-A906-E293DE94549E" class="sect4">手动清除审计跟踪</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL</code>过程手动清除审计跟踪。
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-2663202E-F69F-4635-811A-5217F6C66BF0">关于手动清除审计跟踪</a><br>您可以立即手动清除审计跟踪，而无需安排清除作业。
                        </li>
                        <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-7D2E55CE-2820-47E3-A989-5F7AAB19CD76">使用DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL手动清除审计跟踪</a><br>完成准备步骤后，可以使用<code class="codeph">DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL</code>过程手动清除审计跟踪。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-9B891A44-3DF4-4B52-98D4-A931DBFAEC1D" title="DBMS_AUDIT_MGMT PL / SQL程序包可以计划自动清除作业，手动清除审计记录以及执行其他审计跟踪操作。">清除审计跟踪记录</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="DBSEG885"></a><div class="props_rev_3"><a id="GUID-2663202E-F69F-4635-811A-5217F6C66BF0" name="GUID-2663202E-F69F-4635-811A-5217F6C66BF0"></a><h5 id="DBSEG-GUID-2663202E-F69F-4635-811A-5217F6C66BF0" class="sect5">关于手动清除审计跟踪</h5>
                     <div>
                        <p>您可以立即手动清除审计跟踪，而无需安排清除作业。</p>
                        <p>与清除作业类似，您可以清除在存档时间戳日期之前创建的审计跟踪记录或审计跟踪中的所有记录。运行此过程时，仅清除当前审计目录。</p>
                        <p>对于可能仍具有早期版本的审计跟踪的已升级数据库，请注意以下有关<code class="codeph">DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL</code> PL / SQL过程的信息：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在Microsoft Windows上，由于<code class="codeph">DBMS_AUDIT_MGMT</code>程序包不支持清除Windows事件查看器，因此将<code class="codeph">AUDIT_TRAIL_TYPE</code>属性<code class="codeph">AUDIT_TRAIL_TYPE</code>为<code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_OS</code>无效。这是因为Windows上的操作系统审核记录将写入Windows事件查看器。<code class="codeph">DBMS_AUDIT_MGMT</code>包不支持此类清理操作。
                              </p>
                           </li>
                           <li>
                              <p>在UNIX平台上，如果已设置<code class="codeph">AUDIT_SYSLOG_LEVEL</code>初始化参数，则Oracle数据库会将操作系统日志文件写入syslog文件。（请注意，配置syslog文件的使用时，会将消息发送到syslog守护程序进程。syslog守护程序进程不会向Oracle数据库返回一个确认，表明已提交对syslog文件的写入。）如果将<code class="codeph">AUDIT_TRAIL_TYPE</code>属性<code class="codeph">AUDIT_TRAIL_TYPE</code>为<code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_OS</code> ，则该过程仅删除审计目录下的<code class="codeph">.aud</code>文件（此目录由<code class="codeph">AUDIT_FILE_DEST</code>初始化参数指定）。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-B9D2B078-2567-4002-A906-E293DE94549E" title="您可以使用DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL过程手动清除审计跟踪。">手动清除审计跟踪</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG886"></a><div class="props_rev_3"><a id="GUID-7D2E55CE-2820-47E3-A989-5F7AAB19CD76" name="GUID-7D2E55CE-2820-47E3-A989-5F7AAB19CD76"></a><h5 id="DBSEG-GUID-7D2E55CE-2820-47E3-A989-5F7AAB19CD76" class="sect5">使用DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL手动清除审计跟踪</h5>
                     <div>
                        <p>完成准备步骤后，可以使用<code class="codeph">DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL</code>过程手动清除审计跟踪。
                        </p>
                        <ol>
                           <li class="stepexpand"><span>在<a href="administering-the-audit-trail.html#GUID-C1EB1E76-B15B-4450-A4C3-ED525E17CBCA" title="安排自动清除作业需要事先进行规划，例如调整联机和归档重做日志大小。">为审计跟踪计划自动清除作业</a>下执行以下步骤：</span><div>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><a href="administering-the-audit-trail.html#GUID-2F1AAC07-30A4-4B3A-B9E2-ADEC02E70533" title="清除过程可能会生成其他重做日志。">步骤1：如有必要，调整在线和存档重做日志大小</a></p>
                                    </li>
                                    <li>
                                       <p><a href="administering-the-audit-trail.html#GUID-F5B4C780-584A-4555-9608-1F5F9D62C7CA" title="您必须先记录审核记录的时间戳，然后才能将其归档。">第2步：规划时间戳和存档策略</a></p>
                                    </li>
                                    <li>
                                       <p><a href="administering-the-audit-trail.html#GUID-1C9053BB-30B8-48DB-9062-44DD42A75B4E" title="如果要删除所有审计跟踪，则可以绕过此步骤。">步骤3：（可选）设置审核记录的存档时间戳</a></p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li class="stepexpand"><span>如果您使用的是多租户环境，请连接到创建清除作业的数据库。</span><div>
                                 <p>如果在根目录中创建了清除作业，则必须登录到根目录。如果您在特定PDB中创建了清除作业，请登录该PDB。</p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">CONNECT aud_admin @hrpdb输入密码： <span class="italic">密码</span>已连接。
</pre></div>
                           </li>
                           <li class="stepexpand"><span>通过运行<code class="codeph">DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL</code> PL / SQL过程清除审计跟踪记录。</span><div>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL（AUDIT_TRAIL_TYPE =&gt; DBMS_AUDIT_MGMT.AUDIT_TRAIL_UNIFIED，USE_LAST_ARCH_TIMESTAMP =&gt; TRUE，CONTAINER =&gt; DBMS_AUDIT_MGMT.CONTAINER_CURRENT）;结束; /</pre><p>在这个例子中：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">AUDIT_TRAIL_TYPE</code> ：指定审计跟踪类型。<code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_UNIFIED</code>为统一审计跟踪设置它。
                                       </p>
                                       <p>对于仍具有先前版本的审计数据的升级数据库：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_AUD_STD</code> ：标准审计跟踪表， <code class="codeph">AUD$</code> 。（此设置不适用于只读数据库。）
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_FGA_STD</code> ：细粒度审计跟踪表， <code class="codeph">FGA_LOG$</code> 。（此设置不适用于只读数据库。）
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_DB_STD</code> ：标准和细粒度审计跟踪表。（此设置不适用于只读数据库）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_OS</code> ：具有<code class="codeph">.aud</code>扩展名的操作系统审计跟踪文件。（此设置不适用于Windows事件日志条目。）
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_XML</code> ：XML操作系统审计跟踪文件。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_FILES</code> ：操作系统和XML审计跟踪文件。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_ALL</code> ：所有审计跟踪记录，即数据库审计跟踪和操作系统审计跟踪类型。（此设置不适用于只读数据库。）
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><code class="codeph">USE_LAST_ARCH_TIMESTAMP</code> ：输入以下任一设置：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">TRUE</code> ：删除在上一个归档时间戳之前创建的审核记录。要设置存档时间戳，请参阅<a href="administering-the-audit-trail.html#GUID-1C9053BB-30B8-48DB-9062-44DD42A75B4E" title="如果要删除所有审计跟踪，则可以绕过此步骤。">步骤3：（可选）设置审核记录的存档时间戳</a> 。默认（和推荐）值为<code class="codeph">TRUE</code> 。 Oracle建议您将<code class="codeph">USE_LAST_ARCH_TIMESTAMP</code>设置为<code class="codeph">TRUE</code> 。</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">FALSE</code> ：删除所有审计记录而不考虑上次存档时间戳。如果您无意中删除了应删除的审核记录，请小心使用此设置。
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><code class="codeph">CONTAINER</code> ：将清洁应用于多租户环境。<code class="codeph">DBMS_AUDIT_MGMT.CONTAINER_CURRENT</code>指定本地PDB; <code class="codeph">DBMS_AUDIT_MGMT.CONTAINER_ALL</code>适用于所有数据库。
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-B9D2B078-2567-4002-A906-E293DE94549E" title="您可以使用DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL过程手动清除审计跟踪。">手动清除审计跟踪</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="DBSEG474"></a><div class="props_rev_3"><a id="GUID-91B17A5D-A702-4C9D-92C4-CF62A4BC4A5A" name="GUID-91B17A5D-A702-4C9D-92C4-CF62A4BC4A5A"></a><h4 id="DBSEG-GUID-91B17A5D-A702-4C9D-92C4-CF62A4BC4A5A" class="sect4">其他审计跟踪清除操作</h4>
                  <div>
                     <p>其他类型的审计跟踪清除包括启用或禁用审计跟踪清除作业或设置默认审计跟踪清除作业间隔。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-34AE7B90-11F2-42FD-9D80-8E411AA4406A">启用或禁用审计跟踪清除作业</a><br><code class="codeph">DBMS_AUDIT_MGMT.SET_PURGE_JOB_STATUS</code>过程启用或禁用审计跟踪清除作业。
                        </li>
                        <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-2D0E56B0-A17E-441A-8F40-321C0E594D51">为指定的清除作业设置默认审计跟踪清除作业间隔</a><br>您可以设置在下一个清除作业操作发生之前必须经过的默认清除操作间隔（以小时为单位）。
                        </li>
                        <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-B5DD2078-5EFD-4979-BE22-643D4EC028EB">删除审计跟踪清除作业</a><br>您可以删除现有的审计跟踪清除作业。
                        </li>
                        <li class="ulchildlink"><a href="administering-the-audit-trail.html#GUID-4AE3F98A-BB9E-437B-BCEB-4DA626F2302E">清除存档时间戳设置</a><br><code class="codeph">DBMS_AUDIT_MGMT.CLEAR_LAST_ARCHIVE_TIMESTAMP</code>过程可以清除存档时间戳设置。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-9B891A44-3DF4-4B52-98D4-A931DBFAEC1D" title="DBMS_AUDIT_MGMT PL / SQL程序包可以计划自动清除作业，手动清除审计记录以及执行其他审计跟踪操作。">清除审计跟踪记录</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="DBSEG478"></a><div class="props_rev_3"><a id="GUID-34AE7B90-11F2-42FD-9D80-8E411AA4406A" name="GUID-34AE7B90-11F2-42FD-9D80-8E411AA4406A"></a><h5 id="DBSEG-GUID-34AE7B90-11F2-42FD-9D80-8E411AA4406A" class="sect5">启用或禁用审计跟踪清除作业</h5>
                     <div>
                        <p><code class="codeph">DBMS_AUDIT_MGMT.SET_PURGE_JOB_STATUS</code>过程启用或禁用审计跟踪清除作业。
                        </p>
                        <div class="section">
                           <p>在多租户环境中，运行<code class="codeph">DBMS_AUDIT_MGMT.SET_PURGE_JOB_STATUS</code>过程取决于清除作业的位置，该位置由<code class="codeph">DBMS_MGMT.CREATE_PURGE_JOB</code>过程的<code class="codeph">CONTAINER</code>参数确定。如果已将<code class="codeph">CONTAINER</code>设置为<code class="codeph">CONTAINER_ALL</code> （在根目录中创建清除作业），则必须从根运行<code class="codeph">DBMS_AUDIT_MGMT.SET_PURGE_JOB_STATUS</code>过程。如果已将<code class="codeph">CONTAINER</code>设置为<code class="codeph">CONTAINER_CURRENT</code> ，则必须从创建它的PDB运行<code class="codeph">DBMS_AUDIT_MGMT.SET_PURGE_JOB_STATUS</code>过程。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要启用或禁用审计跟踪清除作业，请使用<code class="codeph">DBMS_AUDIT_MGMT.SET_PURGE_JOB_STATUS</code> PL / SQL过程。
                                 </p>
                                 <p>例如，假设您已在<code class="codeph">hrpdb</code> PDB中创建了清除作业：</p><pre class="oac_no_warn" dir="ltr">CONNECT aud_admin @hrpdb输入密码： <span class="italic">密码</span>已连接。BEGIN DBMS_AUDIT_MGMT.SET_PURGE_JOB_STATUS（AUDIT_TRAIL_PURGE_NAME =&gt;'Audit_Trail_PJ'，AUDIT_TRAIL_STATUS_VALUE =&gt; DBMS_AUDIT_MGMT.PURGE_JOB_ENABLE）;结束; /</pre></li>
                           </ul>
                           <p>在这个例子中：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">AUDIT_TRAIL_PURGE_NAME</code>指定名为<code class="codeph">Audit_Trail_PJ</code>的清除作业。要查找现有清除作业，请查询<code class="codeph">DBA_AUDIT_MGMT_CLEANUP_JOBS</code>数据字典视图的<code class="codeph">JOB_NAME</code>和<code class="codeph">JOB_STATUS</code>列。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">AUDIT_TRAIL_STATUS_VALUE</code>接受以下任一属性：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">DBMS_AUDIT_MGMT.PURGE_JOB_ENABLE</code>启用指定的清除作业。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">DBMS_AUDIT_MGMT.PURGE_JOB_DISABLE</code>禁用指定的清除作业。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-91B17A5D-A702-4C9D-92C4-CF62A4BC4A5A" title="其他类型的审计跟踪清除包括启用或禁用审计跟踪清除作业或设置默认审计跟踪清除作业间隔。">其他审计跟踪清除操作</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG479"></a><div class="props_rev_3"><a id="GUID-2D0E56B0-A17E-441A-8F40-321C0E594D51" name="GUID-2D0E56B0-A17E-441A-8F40-321C0E594D51"></a><h5 id="DBSEG-GUID-2D0E56B0-A17E-441A-8F40-321C0E594D51" class="sect5">为指定的清除作业设置默认审计跟踪清除作业间隔</h5>
                     <div>
                        <p>您可以设置在下一个清除作业操作发生之前必须经过的默认清除操作间隔（以小时为单位）。</p>
                        <div class="section"><code class="codeph">DBMS_AUDIT_MGMT.CREATE_PURGE_JOB</code>过程中使用的间隔设置优先于此设置。
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要为特定清除作业设置默认审计跟踪清除作业间隔，请运行<code class="codeph">DBMS_AUDIT_MGMT.SET_PURGE_JOB_INTERVAL</code>过程。
                                 </p>
                                 <p>例如，假设您已在<code class="codeph">hrpdb</code> PDB中创建了清除作业：</p><pre class="oac_no_warn" dir="ltr">CONNECT aud_admin @hrpdb输入密码： <span class="italic">密码</span>已连接。BEGIN DBMS_AUDIT_MGMT.SET_PURGE_JOB_INTERVAL（AUDIT_TRAIL_PURGE_NAME =&gt;'Audit_Trail_PJ'，AUDIT_TRAIL_INTERVAL_VALUE =&gt; 24）;结束; /</pre></li>
                           </ul>
                           <p>在这个例子中：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">AUDIT_TRAIL_PURGE_NAME</code>指定审核跟踪清除作业的名称。要查找现有清除作业的列表，请查询<code class="codeph">DBA_AUDIT_MGMT_CLEANUP_JOBS</code>数据字典视图的<code class="codeph">JOB_NAME</code>和<code class="codeph">JOB_STATUS</code>列。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">AUDIT_TRAIL_INTERVAL_VALUE</code>更新<code class="codeph">DBMS_AUDIT_MGMT.CREATE_PURGE_JOB</code>过程<code class="codeph">AUDIT_TRAIL_INTERVAL_VALUE</code>的默认小时间隔。输入<code class="codeph">1</code>到<code class="codeph">999</code>之间的值。运行清除作业时，计时开始。
                                 </p>
                              </li>
                           </ul>
                           <p>在多租户环境中，运行<code class="codeph">DBMS_AUDIT_MGMT.SET_PURGE_JOB_INTERVAL</code>过程取决于清除作业的位置，该位置由<code class="codeph">DBMS_MGMT.CREATE_PURGE_JOB</code>过程的<code class="codeph">CONTAINER</code>参数确定。如果已将<code class="codeph">CONTAINER</code>设置为<code class="codeph">CONTAINER_ALL</code> ，则根目录中存在清除作业，因此必须从根运行<code class="codeph">DBMS_AUDIT_MGMT.SET_PURGE_JOB_STATUS</code>过程。如果已将<code class="codeph">CONTAINER</code>设置为<code class="codeph">CONTAINER_CURRENT</code> ，则必须从创建它的PDB运行<code class="codeph">DBMS_AUDIT_MGMT.SET_PURGE_JOB_INTERVAL</code>过程。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-91B17A5D-A702-4C9D-92C4-CF62A4BC4A5A" title="其他类型的审计跟踪清除包括启用或禁用审计跟踪清除作业或设置默认审计跟踪清除作业间隔。">其他审计跟踪清除操作</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG480"></a><div class="props_rev_3"><a id="GUID-B5DD2078-5EFD-4979-BE22-643D4EC028EB" name="GUID-B5DD2078-5EFD-4979-BE22-643D4EC028EB"></a><h5 id="DBSEG-GUID-B5DD2078-5EFD-4979-BE22-643D4EC028EB" class="sect5">删除审计跟踪清除作业</h5>
                     <div>
                        <p>您可以删除现有的审计跟踪清除作业。</p>
                        <div class="section">
                           <p>要查找现有清除作业，请查询<code class="codeph">DBA_AUDIT_MGMT_CLEANUP_JOBS</code>数据字典视图的<code class="codeph">JOB_NAME</code>和<code class="codeph">JOB_STATUS</code>列。
                           </p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要删除审计跟踪清除作业，请使用<code class="codeph">DBMS_AUDIT_MGMT.DROP_PURGE_JOB</code> PL / SQL过程。
                                 </p>
                              </li>
                           </ul>
                           <p>例如，假设您已在<code class="codeph">hrpdb</code> PDB中创建了清除作业：</p><pre class="oac_no_warn" dir="ltr">CONNECT aud_admin @hrpdb输入密码： <span class="italic">密码</span>已连接。BEGIN DBMS_AUDIT_MGMT.DROP_PURGE_JOB（AUDIT_TRAIL_PURGE_NAME =&gt;'Audit_Trail_PJ'）;结束; /</pre><p>在多租户环境中，运行<code class="codeph">DBMS_AUDIT_MGMT.DROP_PURGE_JOB</code>过程取决于清除作业的位置，该位置由<code class="codeph">DBMS_MGMT.CREATE_PURGE_JOB</code>过程的<code class="codeph">CONTAINER</code>参数确定。如果已将<code class="codeph">CONTAINER</code>设置为<code class="codeph">CONTAINER_ALL</code> ，则根目录中存在清除作业，因此必须从根运行<code class="codeph">DBMS_AUDIT_MGMT.SET_PURGE_JOB_STATUS</code>过程。如果已将<code class="codeph">CONTAINER</code>设置为<code class="codeph">CONTAINER_CURRENT</code> ，则必须从创建它的PDB运行<code class="codeph">DBMS_AUDIT_MGMT.DROP_PURGE_JOB_INTERVAL</code>过程。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-91B17A5D-A702-4C9D-92C4-CF62A4BC4A5A" title="其他类型的审计跟踪清除包括启用或禁用审计跟踪清除作业或设置默认审计跟踪清除作业间隔。">其他审计跟踪清除操作</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG481"></a><div class="props_rev_3"><a id="GUID-4AE3F98A-BB9E-437B-BCEB-4DA626F2302E" name="GUID-4AE3F98A-BB9E-437B-BCEB-4DA626F2302E"></a><h5 id="DBSEG-GUID-4AE3F98A-BB9E-437B-BCEB-4DA626F2302E" class="sect5">清除存档时间戳设置</h5>
                     <div>
                        <p><code class="codeph">DBMS_AUDIT_MGMT.CLEAR_LAST_ARCHIVE_TIMESTAMP</code>过程可以清除存档时间戳设置。
                        </p>
                        <div class="section">
                           <p>要查找审计跟踪日志清除的历史记录，可以使用以下条件查询<code class="codeph">UNIFIED_AUDIT_TRAIL</code>数据字典视图： <code class="codeph">OBJECT_NAME</code>是<code class="codeph">DBMS_AUDIT_MGMT</code> ， <code class="codeph">OBJECT_SCHEMA</code>是<code class="codeph">SYS</code> ， <code class="codeph">SQL_TEXT</code>设置为<code class="codeph">LIKE %DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL%</code> 。
                           </p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要清除存档时间戳设置，请使用<code class="codeph">DBMS_AUDIT_MGMT.CLEAR_LAST_ARCHIVE_TIMESTAMP</code> PL / SQL过程指定审计跟踪类型，并为多租户环境指定容器类型。
                                 </p>
                                 <p>例如，假设您已在<code class="codeph">hrpdb</code> PDB中创建了清除作业：</p><pre class="oac_no_warn" dir="ltr">CONNECT aud_admin @hrpdb输入密码： <span class="italic">密码</span>已连接。BEGIN DBMS_AUDIT_MGMT.CLEAR_LAST_ARCHIVE_TIMESTAMP（AUDIT_TRAIL_TYPE =&gt; DBMS_AUDIT_MGMT.AUDIT_TRAIL_UNIFIED，CONTAINER =&gt; DBMS_AUDIT_MGMT.CONTAINER_CURRENT）;结束; /</pre></li>
                           </ul>
                           <p>在这个例子中：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>为统一审计跟踪<code class="codeph">AUDIT_TRAIL_TYPE</code> 。如果<code class="codeph">AUDIT_TRAIL_TYPE</code>属性设置为<code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_OS</code>或<code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_XML</code> ，则无法将<code class="codeph">RAC_INSTANCE_NUMBER</code>设置为<code class="codeph">0</code> 。如果将<code class="codeph">AUDIT_TRAIL_TYPE</code>为<code class="codeph">DBMS_AUDIT_MGMT.AUDIT_TRAIL_UNIFIED</code>则可以省略<code class="codeph">RAC_INSTANCE_NUMBER</code>设置。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">CONTAINER</code>将时间戳应用于多租户环境。<code class="codeph">DBMS_AUDIT_MGMT.CONTAINER_CURRENT</code>指定本地PDB; <code class="codeph">DBMS_AUDIT_MGMT.CONTAINER_ALL</code>适用于所有数据库。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-91B17A5D-A702-4C9D-92C4-CF62A4BC4A5A" title="其他类型的审计跟踪清除包括启用或禁用审计跟踪清除作业或设置默认审计跟踪清除作业间隔。">其他审计跟踪清除操作</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="DBSEG484"></a><a id="DBSEG483"></a><div class="props_rev_3"><a id="GUID-532781DA-B568-4F37-84B7-D051D564D355" name="GUID-532781DA-B568-4F37-84B7-D051D564D355"></a><h4 id="DBSEG-GUID-532781DA-B568-4F37-84B7-D051D564D355" class="sect4">示例：直接调用统一审计跟踪清除操作</h4>
                  <div>
                     <p>您可以创建自定义归档过程以直接调用统一的审计跟踪清除操作。</p>
                     <p><a href="administering-the-audit-trail.html#GUID-532781DA-B568-4F37-84B7-D051D564D355__BCGJGCHA">例26-1中</a>的伪代码通过调用统一审计跟踪的<code class="codeph">DBMS_ADUIT.CLEAN_AUDIT_TRAIL</code>过程来创建用户调用的数据库审计跟踪清除操作。
                     </p>
                     <p>清除操作通过使用循环删除在上次存档时间戳之前创建的记录。循环归档审计记录，计算归档哪些审计记录，并使用<code class="codeph">SetCleanUpAuditTrail</code>调用设置上一个归档时间戳，然后调用<code class="codeph">CLEAN_AUDIT_TRAIL</code>过程。在此示例中，主要步骤以<span class="bold">粗体</span>字体表示。
                     </p>
                     <div class="example" id="GUID-532781DA-B568-4F37-84B7-D051D564D355__BCGJGCHA">
                        <p class="titleinexample">示例26-1直接调用数据库审计跟踪清除操作</p><pre class="oac_no_warn" dir="ltr"><span class="bold">-  1。设置上次存档时间戳：</span> PROCEDURE SetCleanUpAuditTrail（）BEGIN CALL FindLastArchivedTimestamp（AUD $）; DBMS_AUDIT_MGMT.SET_LAST_ARCHIVE_TIMESTAMP（AUDIT_TRAIL_TYPE =&gt; DBMS_AUDIT_MGMT.AUDIT_TRAIL_UNIFIED，LAST_ARCHIVE_TIME =&gt; '23 -AUG-2013 12:00:00'，CONTAINER =&gt; DBMS_AUDIT_MGMT.CONTAINER_CURRENT）;结束; / <span class="bold">-  2。运行自定义归档过程以清除审计跟踪记录：</span> BEGIN CALL MakeAuditSettings（）;循环（/ *循环多长时间* /） - 调用审计记录存档的函数CALL DoUnifiedAuditRecordArchival（）; CALL SetCleanUpAuditTrail（）; IF（/ *立即需要清理* /）DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL（AUDIT_TRAIL_TYPE =&gt; DBMS_AUDIT_MGMT.AUDIT_TRAIL_UNIFIED，USE_LAST_ARCH_TIMESTAMP =&gt; TRUE，CONTAINER =&gt; DBMS_AUDIT_MGMT.CONTAINER_CURRENT）; END IF END LOOP / * LOOP * / END; / *程序* / / /</pre><p>如果要将此示例修改为其他审计跟踪类型，请注意可能需要执行其他步骤。有关更多信息，请参阅<span class="italic">Oracle数据库安全指南</span>的Oracle Database <span class="italic">11g</span>第2版（11.2）版，该版本可从以下文档库中获得：</p>
                        <p><a href="http://www.oracle.com/pls/db112/homepage" target="_blank"><code class="codeph">http://www.oracle.com/pls/db112/homepage</code></a></p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-9B891A44-3DF4-4B52-98D4-A931DBFAEC1D" title="DBMS_AUDIT_MGMT PL / SQL程序包可以计划自动清除作业，手动清除审计记录以及执行其他审计跟踪操作。">清除审计跟踪记录</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="DBSEG1028"></a><a id="DBSEG1027"></a><div class="props_rev_3"><a id="GUID-2AC6F69F-5BEA-4AC7-9A22-2966121A43ED" name="GUID-2AC6F69F-5BEA-4AC7-9A22-2966121A43ED"></a><h3 id="DBSEG-GUID-2AC6F69F-5BEA-4AC7-9A22-2966121A43ED" class="sect3">审计跟踪管理数据字典视图</h3>
               <div>
                  <p>Oracle数据库提供数据字典视图，列出有关审计跟踪管理设置的信息。</p>
                  <div class="section">
                     <p><a href="administering-the-audit-trail.html#GUID-2AC6F69F-5BEA-4AC7-9A22-2966121A43ED__CDCJJEFD" title="审计跟踪管理员视图">表26-2</a>列出了这些视图。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformalwide" id="GUID-2AC6F69F-5BEA-4AC7-9A22-2966121A43ED__CDCJJEFD">
                     <p class="titleintable">表26-2显示审计跟踪管理设置信息的视图</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="显示有关审计跟踪管理设置的信息的视图" width="100%" border="1" summary="Audit Trail Admin Views" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="38%" id="d177168e6814">视图</th>
                              <th align="left" valign="bottom" width="62%" id="d177168e6817">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d177168e6822" headers="d177168e6814 ">
                                 <p><code class="codeph">DBA_AUDIT_MGMT_CLEAN_EVENTS</code></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d177168e6822 d177168e6817 ">
                                 <p>显示传统（即非统一）审计跟踪的清除事件的历史记录。作为已被授予<code class="codeph">AUDIT_ADMIN</code>角色的用户，您应<code class="codeph">AUDIT_ADMIN</code>删除此视图的内容，以使其不会变得过大。例如：</p><pre class="oac_no_warn" dir="ltr">从DBA_AUDIT_MGMT_CLEAN_EVENTS中删除;</pre><p>此视图仅适用于读写数据库。对于只读数据库，清除事件的历史记录位于警报日志中。</p>
                                 <p>对于统一审计，您可以通过使用以下条件查询<code class="codeph">UNIFIED_AUDIT_TRAIL</code>数据字典视图来查找已清除事件的历史记录： <code class="codeph">OBJECT_NAME</code>为<code class="codeph">DBMS_AUDIT_MGMT</code> ， <code class="codeph">OBJECT_SCHEMA</code>为<code class="codeph">SYS</code> ， <code class="codeph">SQL_TEXT</code>设置为<code class="codeph">LIKE %DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL%</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d177168e6861" headers="d177168e6814 ">
                                 <p><code class="codeph">DBA_AUDIT_MGMT_CLEANUP_JOBS</code></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d177168e6861 d177168e6817 ">
                                 <p>显示当前配置的审计跟踪清除作业</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d177168e6869" headers="d177168e6814 ">
                                 <p><code class="codeph">DBA_AUDIT_MGMT_CONFIG_PARAMS</code></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d177168e6869 d177168e6817 ">
                                 <p>显示<code class="codeph">DBMS_AUDIT_MGMT</code> PL / SQL程序包使用的当前配置的审计跟踪属性</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="38%" id="d177168e6880" headers="d177168e6814 ">
                                 <p><code class="codeph">DBA_AUDIT_MGMT_LAST_ARCH_TS</code></p>
                              </td>
                              <td align="left" valign="top" width="62%" headers="d177168e6880 d177168e6817 ">
                                 <p>显示为审计跟踪清除设置的最后存档时间戳</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-2AC6F69F-5BEA-4AC7-9A22-2966121A43ED__GUID-487F0CDD-9967-48A8-BD82-F58793D764B7">
                     <p class="notep1">也可以看看：</p><a href="../refrn/index.html" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>有关这些视图的详细信息</div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="administering-the-audit-trail.html#GUID-9F298B8A-6196-4206-A889-A7CEB0924CF1" title="已被授予AUDIT_ADMIN角色的用户可以管理审计跟踪，归档审计跟踪以及清除审计跟踪记录。">管理审计跟踪</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Your applications can access Oracle Database using native Oracle XML DB Web services."></meta>
      <meta name="description" content="Your applications can access Oracle Database using native Oracle XML DB Web services."></meta>
      <title>原生Oracle XML DB Web服务</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Developer&#39;s Guide "></meta>
      <meta property="og:description" content="Your applications can access Oracle Database using native Oracle XML DB Web services."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="xml-db-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-30T12:32:42-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96222-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="data-access-using-URIs.html" title="Previous" type="text/html"></link>
      <link rel="next" href="oracle-tools-that-support-XML-DB.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML DB Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADXDB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="data-access-using-URIs.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="oracle-tools-that-support-XML-DB.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="XML-DB-repository.html" property="item" typeof="WebPage"><span property="name">Oracle XML DB存储库</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">原生Oracle XML DB Web服务</li>
            </ol>
            <a id="GUID-108279B4-0315-4D8D-86A2-6487767ED280" name="GUID-108279B4-0315-4D8D-86A2-6487767ED280"></a><a id="ADXDB3900"></a>
            
            <h2 id="ADXDB-GUID-108279B4-0315-4D8D-86A2-6487767ED280" class="sect2"><span class="enumeration_chapter">33</span>原生Oracle XML DB Web服务</h2>
         </header>
         <div class="ind">
            <div>
               <p>您的应用程序可以使用本机Oracle XML DB Web服务访问Oracle数据库。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="native-XML-DB-web-services.html#GUID-92C24371-A8A8-4956-9DC4-AE67EC67F1B1">本机Oracle XML DB Web服务概述</a><br>Web服务为应用程序提供了一种标准方式，可以通过Internet交换信息并访问实现业务逻辑的服务。您的应用程序可以使用本机Oracle XML DB Web服务访问Oracle数据库。
                  </li>
                  <li class="ulchildlink"><a href="native-XML-DB-web-services.html#GUID-BAF98FFF-EBDB-4477-9315-24CEF72C9AB7">为Oracle XML DB配置和启用Web服务</a><br>要使Web服务可用，必须启动并运行Oracle XML DB HTTP服务器，并且必须显式添加Web服务配置。然后，要允许特定用户使用Web服务，您必须授予他们适当的角色。
                  </li>
                  <li class="ulchildlink"><a href="native-XML-DB-web-services.html#GUID-026ABA35-418D-4DC5-8660-ACF0D92FF7F6">使用Web服务查询Oracle XML DB</a><br>用于数据库查询的Oracle XML DB Web服务位于URL <code class="codeph">http://</code> <span class="italic"><code class="codeph">host</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">port</code></span> <code class="codeph">/</code> <span class="bold"><code class="codeph">orawsv</code></span> ，其中<span class="italic"><code class="codeph">host</code></span>和<span class="italic"><code class="codeph">port</code></span>是数据库主机和HTTP（S）端口。它有一个关联的WSDL，它使用XML Schema指定传入和传出文档的格式。此WSDL位于URL <code class="codeph">http://</code> <span class="italic"><code class="codeph">host</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">port</code></span> <code class="codeph">/</code> <span class="bold"><code class="codeph">orawsv?wsdl</code></span> 。</li>
                  <li class="ulchildlink"><a href="native-XML-DB-web-services.html#GUID-E97E718E-0BD6-45C4-B1C9-B5EDABE68686">使用Web服务访问PL / SQL存储过程</a><br>用于访问PL / SQL存储函数和过程的Oracle XML DB Web服务位于URL <code class="codeph">http://</code> <span class="italic"><code class="codeph">host</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">port</code></span> <code class="codeph">/</code> <span class="bold"><code class="codeph">orawsv</code></span> <code class="codeph">/</code> <span class="italic"><code class="codeph">dbschema</code></span> <code class="codeph">/</code> <span class="italic"><code class="codeph">package</code></span> <code class="codeph">/</code> <span class="italic"><code class="codeph">fn_or_proc</code></span>或者用于独立的函数或过程（不在包中） ， <code class="codeph">http://</code> <span class="italic"><code class="codeph">host</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">port</code></span> <code class="codeph">/</code> <span class="bold"><code class="codeph">orawsv</code></span> <code class="codeph">/</code> <span class="italic"><code class="codeph">dbschema</code></span> <code class="codeph">/</code> <span class="italic"><code class="codeph">fn_or_proc</code></span> 。</li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="XML-DB-repository.html#GUID-840EBE35-8FC8-4150-9FC8-78442FD1B12B" title="Oracle XML DB Repository允许您对数据进行版本控制，实现和管理安全性，并使用API来访问和操作存储库资源。">Oracle XML DB存储库</a></p>
                  </div>
               </div>
            </div>
            <a id="ADXDB5676"></a><div class="props_rev_3"><a id="GUID-92C24371-A8A8-4956-9DC4-AE67EC67F1B1" name="GUID-92C24371-A8A8-4956-9DC4-AE67EC67F1B1"></a><h3 id="ADXDB-GUID-92C24371-A8A8-4956-9DC4-AE67EC67F1B1" class="sect3"><span class="enumeration_section">33.1</span>本机Oracle XML DB Web服务概述</h3>
               <div>
                  <p>Web服务为应用程序提供了一种标准方式，可以通过Internet交换信息并访问实现业务逻辑的服务。您的应用程序可以使用本机Oracle XML DB Web服务访问Oracle数据库。</p>
                  <p>一个可用的服务允许您发出SQL和XQuery查询并以XML数据的形式接收结果。另一项服务提供对所有PL / SQL存储函数和过程的访问。</p>
                  <p>使用后一种服务时，可以自定义输入和输出文档格式。如果这样做，则WSDL由本机数据库Web服务引擎自动生成。</p>
                  <p>SOAP 1.1是Oracle XML DB支持的版本。应用程序使用HTTP方法<code class="codeph">POST</code>将SOAP请求提交到本机Oracle XML DB Web服务。您可以使用Oracle XML DB配置文件<code class="codeph">xdbconfig.xml</code>配置所有本机Oracle XML DB Web服务和WSDL文档的<code class="codeph">xdbconfig.xml</code> 。您还可以使用相同的配置文件为Web服务配置安全设置。
                  </p>
                  <p>您可以使用输入HTTP标头的<code class="codeph">Accept-Charsets</code>字段指定Web服务响应的字符集。如果省略此标头字段，则响应在数据库字符集中。输入文档的语言和任何错误响应是数据库的语言环境语言。
                  </p>
                  <p>本机Oracle XML DB Web服务的错误处理使用SOAP框架进行故障。</p>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="administration-of-XML-DB.html#GUID-D1551B64-4A75-44CD-AA04-0A68018410AE" title="Oracle XML DB通过配置文件xdbconfig.xml在内部进行管理，该文件作为资源存储在Oracle XML DB Repository中。作为使用Oracle Enterprise Manager配置Oracle XML DB的替代方法，您可以使用Oracle XML DB配置文件直接对其进行配置。">使用xdbconfig.xml配置Oracle XML DB</a></li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-92C24371-A8A8-4956-9DC4-AE67EC67F1B1__GUID-A89F646A-BBBD-4656-97B2-0F7F487FAC9A">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关Web服务的更多信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdb&amp;id=w3_org_2002_web_services" target="_blank">Web服务活动</a></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdb&amp;id=w3_org_tr_note_soap" target="_blank">简单对象访问协议（SOAP）1.1</a></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdb&amp;id=w3_org_tr_wsdl" target="_blank">Web服务描述语言（WSDL）1.1，</a>用于获取有关Web服务描述语言（WSDL）的信息</p>
                        </li>
                        <li>
                           <p>有关SOAP错误处理的信息的<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdb&amp;id=w3_org_tr_soap-fault" target="_blank">故障方案</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：本</strong> <a href="native-XML-DB-web-services.html#GUID-108279B4-0315-4D8D-86A2-6487767ED280" title="您的应用程序可以使用本机Oracle XML DB Web服务访问Oracle数据库。">机Oracle XML DB Web服务</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5677"></a><div class="props_rev_3"><a id="GUID-BAF98FFF-EBDB-4477-9315-24CEF72C9AB7" name="GUID-BAF98FFF-EBDB-4477-9315-24CEF72C9AB7"></a><h3 id="ADXDB-GUID-BAF98FFF-EBDB-4477-9315-24CEF72C9AB7" class="sect3"><span class="enumeration_section">33.2</span>为Oracle XML DB配置和启用Web服务</h3>
               <div>
                  <p>要使Web服务可用，必须启动并运行Oracle XML DB HTTP服务器，并且必须显式添加Web服务配置。然后，要允许特定用户使用Web服务，您必须授予他们适当的角色。</p>
                  <div class="section">
                     <ol>
                        <li>
                           <p>配置Web服务 - 请参阅<span class="q">“ <a href="native-XML-DB-web-services.html#GUID-8F1319B4-297E-461D-8F57-EAC4C63EBC03" title="要使Web服务可用于Oracle XML DB，请通过以SYS用户身份登录并将servlet配置添加到Oracle XML DB配置文件xdbconfig.xml来配置servlet。然后使用PL / SQL包DBMS_XDB_CONFIG中的过程添加由servlet配置命名的servlet。">为Oracle XML DB配置Web服务</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>通过授予特定用户适当的角色为特定用户启用Web服务 - 为特定用户<a href="native-XML-DB-web-services.html#GUID-3E89F8D5-8469-4FF5-9E5F-8541291319C0" title="要为特定用户启用Web服务，请以用户SYS身份登录并向用户授予角色XDB_WEBSERVICES。此角色通过HTTPS启用Web服务。需要此角色才能使用Web服务。">启用Web服务</a> 。
                           </p>
                        </li>
                     </ol>
                     <p>出于安全原因，Oracle XML DB未预先配置为启用本机Web服务。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="native-XML-DB-web-services.html#GUID-8F1319B4-297E-461D-8F57-EAC4C63EBC03">为Oracle XML DB配置Web服务</a><br>要使Web服务可用于Oracle XML DB，请通过以<code class="codeph">SYS</code>用户身份登录并将servlet配置添加到Oracle XML DB配置文件<code class="codeph">xdbconfig.xml</code>配置<code class="codeph">xdbconfig.xml</code> 。然后使用PL / SQL包<code class="codeph">DBMS_XDB_CONFIG</code>中的过程添加由servlet配置命名的servlet。
                     </li>
                     <li class="ulchildlink"><a href="native-XML-DB-web-services.html#GUID-3E89F8D5-8469-4FF5-9E5F-8541291319C0">为特定用户启用Web服务</a><br>要为特定用户启用Web服务，请以用户<code class="codeph">SYS</code>身份<code class="codeph">XDB_WEBSERVICES</code>并向用户授予角色<code class="codeph">XDB_WEBSERVICES</code> 。此角色通过HTTPS启用Web服务。 <span class="italic">需要</span>此角色才能使用Web服务。
                     </li>
                  </ul>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="repository-access-using-protocols.html#GUID-30DE120A-8FF3-44BB-8C21-CFF25F781C45" title="Oracle XML DB实现了RFC2616规范中定义的超文本传输协议（HTTP），HTTP 1.1。">HTTP（S）和Oracle XML DB协议服务器</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：本</strong> <a href="native-XML-DB-web-services.html#GUID-108279B4-0315-4D8D-86A2-6487767ED280" title="您的应用程序可以使用本机Oracle XML DB Web服务访问Oracle数据库。">机Oracle XML DB Web服务</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5679"></a><a id="ADXDB5680"></a><a id="ADXDB5678"></a><div class="props_rev_3"><a id="GUID-8F1319B4-297E-461D-8F57-EAC4C63EBC03" name="GUID-8F1319B4-297E-461D-8F57-EAC4C63EBC03"></a><h4 id="ADXDB-GUID-8F1319B4-297E-461D-8F57-EAC4C63EBC03" class="sect4"><span class="enumeration_section">33.2.1</span>为Oracle XML DB配置Web服务</h4>
                  <div>
                     <p>要使Web服务可用于Oracle XML DB，请通过以<code class="codeph">SYS</code>用户身份登录并将servlet配置添加到Oracle XML DB配置文件<code class="codeph">xdbconfig.xml</code>配置<code class="codeph">xdbconfig.xml</code> 。然后使用PL / SQL包<code class="codeph">DBMS_XDB_CONFIG</code>中的过程添加由servlet配置命名的servlet。
                     </p>
                     <div class="section">
                        <p>要添加的servlet配置显示为<a href="native-XML-DB-web-services.html#GUID-8F1319B4-297E-461D-8F57-EAC4C63EBC03__CHDGGFCI">示例33-2</a>的查询输出。
                        </p>
                        <p><a href="native-XML-DB-web-services.html#GUID-8F1319B4-297E-461D-8F57-EAC4C63EBC03__CHDIICEJ">例33-1</a>显示了如何使用PL / SQL包<code class="codeph">DBMS_XDB_CONFIG</code>来添加servlet。<a href="native-XML-DB-web-services.html#GUID-8F1319B4-297E-461D-8F57-EAC4C63EBC03__CHDGGFCI">例33-2</a>显示了如何验证是否正确添加了servlet。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-8F1319B4-297E-461D-8F57-EAC4C63EBC03__CHDIICEJ">
                        <p class="titleinexample">示例33-1添加Web服务配置Servlet</p><pre class="oac_no_warn" dir="ltr">DECLARE SERVLET_NAME VARCHAR2（32）：='orawsv'; BEGIN DBMS_XDB_CONFIG.deleteServletMapping（SERVLET_NAME）; DBMS_XDB_CONFIG.deleteServlet（SERVLET_NAME）; DBMS_XDB_CONFIG.addServlet（NAME =&gt; SERVLET_NAME，LANGUAGE =&gt;'C'，DISPNAME =&gt;'Oracle Query Web Service'，DESCRIPT =&gt;'用于将查询作为Web服务发出的Servlet'，SCHEMA =&gt;'XDB'）; DBMS_XDB_CONFIG.addServletSecRole（SERVNAME =&gt; SERVLET_NAME，ROLENAME =&gt;'XDB_WEBSERVICES'，ROLELINK =&gt;'XDB_WEBSERVICES'）; DBMS_XDB_CONFIG.addServletMapping（PATTERN =&gt;'/ orawsv / *'，NAME =&gt; SERVLET_NAME）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-8F1319B4-297E-461D-8F57-EAC4C63EBC03__CHDGGFCI">
                        <p class="titleinexample">示例33-2验证是否添加了Web服务配置Servlet</p><pre class="oac_no_warn" dir="ltr">XQUERY声明默认元素名称空间“http://xmlns.oracle.com/xdb/xdbconfig.xsd”; （：:)（：此路径分为两行，仅供参考。路径实际上应该是一条长线。 :) for fn：doc中的$ doc（“/ xdbconfig.xml”）/ xdbconfig / sysconfig / protocolconfig / httpconfig / webappconfig / servletconfig / servlet-list / servlet [servlet-name ='orawsv'] return $ doc / Result Sequence -------------------------------------------------- ----------------------- &lt;servlet xmlns =“http://xmlns.oracle.com/xdb/xdbconfig.xsd”&gt; &lt;servlet-name&gt; orawsv &lt;/ servlet-name&gt; &lt;servlet-language&gt; C &lt;/ servlet-language&gt; &lt;display-name&gt; Oracle Query Web Service &lt;/ display-name&gt; &lt;description&gt;用于将查询作为Web服务发出的Servlet &lt;/ description&gt; &lt; servlet-schema&gt; XDB &lt;/ servlet-schema&gt; &lt;security-role-ref&gt; &lt;description /&gt; &lt;role-name&gt; XDB_WEBSERVICES &lt;/ role-name&gt; &lt;role-link&gt; XDB_WEBSERVICES &lt;/ role-link&gt; &lt;/ security- role-ref&gt; &lt;/ servlet&gt;选择了1个项目。</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="administration-of-XML-DB.html#GUID-D1551B64-4A75-44CD-AA04-0A68018410AE" title="Oracle XML DB通过配置文件xdbconfig.xml在内部进行管理，该文件作为资源存储在Oracle XML DB Repository中。作为使用Oracle Enterprise Manager配置Oracle XML DB的替代方法，您可以使用Oracle XML DB配置文件直接对其进行配置。">使用xdbconfig.xml配置Oracle XML DB</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="native-XML-DB-web-services.html#GUID-BAF98FFF-EBDB-4477-9315-24CEF72C9AB7" title="要使Web服务可用，必须启动并运行Oracle XML DB HTTP服务器，并且必须显式添加Web服务配置。然后，要允许特定用户使用Web服务，您必须授予他们适当的角色。">为Oracle XML DB配置和启用Web服务</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5681"></a><div class="props_rev_3"><a id="GUID-3E89F8D5-8469-4FF5-9E5F-8541291319C0" name="GUID-3E89F8D5-8469-4FF5-9E5F-8541291319C0"></a><h4 id="ADXDB-GUID-3E89F8D5-8469-4FF5-9E5F-8541291319C0" class="sect4"><span class="enumeration_section">33.2.2</span>为特定用户启用Web服务</h4>
                  <div>
                     <p>要为特定用户启用Web服务，请以用户<code class="codeph">SYS</code>身份<code class="codeph">XDB_WEBSERVICES</code>并向用户授予角色<code class="codeph">XDB_WEBSERVICES</code> 。此角色通过HTTPS启用Web服务。 <span class="italic">需要</span>此角色才能使用Web服务。
                     </p>
                     <div class="section">
                        <p><span class="italic">此外</span> ，用户<code class="codeph">SYS</code>还可以向用户授予以下一个或两个角色：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">XDB_WEBSERVICES_OVER_HTTP</code> - 允许通过HTTP（而不仅仅是HTTPS）使用Web服务。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">XDB_WEBSERVICES_WITH_PUBLIC</code> - 使用Web服务启用对<code class="codeph">PUBLIC</code>可访问的数据库对象的访问。</p>
                           </li>
                        </ul>
                        <p>如果未授予用户<code class="codeph">XDB_WEBSERVICES_WITH_PUBLIC</code> ，则用户可以使用Web服务访问通常可供用户使用的所有数据库对象（无论所有者）， <code class="codeph">PUBLIC</code>对象<span class="italic">除外</span> 。要使用户可以通过Web服务访问<code class="codeph">PUBLIC</code>对象， <code class="codeph">SYS</code>必须向用户授予角色<code class="codeph">XDB_WEBSERVICES_WITH_PUBLIC</code> 。使用此角色，用户可以访问登录到数据库时通常可供用户使用的任何<code class="codeph">PUBLIC</code>对象。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="native-XML-DB-web-services.html#GUID-BAF98FFF-EBDB-4477-9315-24CEF72C9AB7" title="要使Web服务可用，必须启动并运行Oracle XML DB HTTP服务器，并且必须显式添加Web服务配置。然后，要允许特定用户使用Web服务，您必须授予他们适当的角色。">为Oracle XML DB配置和启用Web服务</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5683"></a><a id="ADXDB5684"></a><a id="ADXDB5685"></a><a id="ADXDB5682"></a><div class="props_rev_3"><a id="GUID-026ABA35-418D-4DC5-8660-ACF0D92FF7F6" name="GUID-026ABA35-418D-4DC5-8660-ACF0D92FF7F6"></a><h3 id="ADXDB-GUID-026ABA35-418D-4DC5-8660-ACF0D92FF7F6" class="sect3"><span class="enumeration_section">33.3</span>使用Web服务查询Oracle XML DB</h3>
               <div>
                  <p>用于数据库查询的Oracle XML DB Web服务位于URL <code class="codeph">http://</code> <span class="italic"><code class="codeph">host</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">port</code></span> <code class="codeph">/</code> <span class="bold"><code class="codeph">orawsv</code></span> ，其中<span class="italic"><code class="codeph">host</code></span>和<span class="italic"><code class="codeph">port</code></span>是数据库主机和HTTP（S）端口。它有一个关联的WSDL，它使用XML Schema指定传入和传出文档的格式。此WSDL位于URL <code class="codeph">http://</code> <span class="italic"><code class="codeph">host</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">port</code></span> <code class="codeph">/</code> <span class="bold"><code class="codeph">orawsv?wsdl</code></span> 。</p>
                  <p>您的应用程序将数据库查询作为符合<a href="native-XML-DB-web-services.html#GUID-026ABA35-418D-4DC5-8660-ACF0D92FF7F6__CHDEGIEE">示例33-3中</a>列出的XML模式的XML文档发送到Web服务。
                  </p>
                  <p>此XML架构包含在WSDL文档中。传入查询文档的重要部分如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">query_text</code> - 查询的文本。属性<code class="codeph">type</code>指定查询的类型： <code class="codeph">SQL</code>或<code class="codeph">XQUERY</code> 。</p>
                     </li>
                     <li>
                        <p><code class="codeph">bind</code> - 标量绑定变量值。属性<code class="codeph">name</code>命名变量。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">bindXML</code> - <code class="codeph">XMLType</code>绑定变量值。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">null_handling</code> - 如何处理查询返回的<code class="codeph">NULL</code>值：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">DROP_NULLS</code> - 在输出中没有任何内容（没有元素）。这是默认行为。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">NULL_ATTR</code> - 对<code class="codeph">NULL</code>值输出使用空元素。在元素中使用属性<code class="codeph">xsi:nil = "true"</code> 。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">EMPTY_TAG</code> - 使用空元素进行<code class="codeph">NULL</code>值输出，不带<code class="codeph">nil</code>属性。
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p><code class="codeph">max_rows</code> - 要为查询输出的最大行数。默认情况下，返回所有行。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">skip_rows</code> - 在包含SOAP消息中返回的数据中的行之前要跳过的查询输出行数。您可以将此与<code class="codeph">max_rows</code>以提供分页输出。默认值为零（ <code class="codeph">0</code> ）。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">pretty_print</code> - 输出文档是否应格式化为漂亮打印。默认值为<code class="codeph">true</code> ，表示文档打印得很漂亮。当值为<code class="codeph">false</code> ，不会进行漂亮打印，并且输出行不会被换行字符破坏。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">indentation_width</code> - 缩进开始换行的嵌套元素的字符数。默认值为一（ <code class="codeph">1</code> ）。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">rowset_tag</code> - 输出文档的根元素的名称。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">row_tag</code> - 其值为查询输出的单行的元素的名称。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">item_tags_for_coll</code> - 是否生成名为<span class="italic"><code class="codeph">collection_name</code></span> <code class="codeph">_item</code>集合元素，其中<span class="italic"><code class="codeph">collection_name</code></span>是<span class="italic"><code class="codeph">collection_name</code></span>的名称。
                        </p>
                     </li>
                  </ul>
                  <p>这些元素与PL / SQL包<code class="codeph">DBMS_XMLGEN</code>的过程的相应参数具有相同的含义。</p>
                  <p><a href="native-XML-DB-web-services.html#GUID-026ABA35-418D-4DC5-8660-ACF0D92FF7F6__CHDCCADC">例33-4</a>和<a href="native-XML-DB-web-services.html#GUID-026ABA35-418D-4DC5-8660-ACF0D92FF7F6__CHDFJJEE">例33-5</a>显示了简单SQL查询的输入和输出。
                  </p>
                  <p>在<a href="native-XML-DB-web-services.html#GUID-026ABA35-418D-4DC5-8660-ACF0D92FF7F6__CHDCCADC">例33-4中</a> ，查询文本包含在<code class="codeph">&lt;![CDATA[</code> ... <code class="codeph">]]&gt;</code> 。虽然在此示例中并非严格必要，但通常这样做是合适的，因为查询通常包含<code class="codeph">&lt;</code>和<code class="codeph">&gt;</code>等字符。元素<code class="codeph">bind</code>用于将值（ <code class="codeph">8300</code> ）绑定到名为<code class="codeph">e</code>的绑定变量。元素<code class="codeph">pretty_print</code>关闭输出的漂亮打印。
                  </p>
                  <div class="example" id="GUID-026ABA35-418D-4DC5-8660-ACF0D92FF7F6__CHDEGIEE">
                     <p class="titleinexample">示例33-3要由Web Service处理的数据库查询的XML模式</p><pre class="pre codeblock"><code>&lt;schema xmlns =“http://www.w3.org/2001/XMLSchema”xmlns：xdb =“http://xmlns.oracle.com/xdb”targetNamespace =“http://xmlns.oracle.com/orawsv “&gt; &lt;element name =”query“&gt; &lt;complexType&gt; &lt;sequence&gt; &lt;element name =” <span class="bold">query_text</span> “&gt; &lt;complexType&gt; &lt;simpleContent&gt; &lt;extension base =”string“&gt; &lt;attribute name =” <span class="bold">type</span> “&gt; &lt;simpleType&gt; &lt; restriction base =“NMTOKEN”&gt; &lt;enumeration value =“SQL”/&gt; &lt;enumeration value =“XQUERY”/&gt; &lt;/ restriction&gt; &lt;/ simpleType&gt; &lt;/ attribute&gt; &lt;/ extension&gt; &lt;/ simpleContent&gt; &lt;/ complexType&gt; &lt; / element&gt; &lt;choice maxOccurs =“unbounded”&gt; &lt;element name =“ <span class="bold">bind</span> ”&gt; &lt;complexType&gt; &lt;simpleContent&gt; &lt;extension base =“string”&gt; &lt;attribute name =“ <span class="bold">name</span> ”type =“string”/&gt; &lt;/ extension &gt; &lt;/ simpleContent&gt; &lt;/ complexType&gt; &lt;/ element&gt; &lt;element name =“ <span class="bold">bindXML</span> ”type =“any”/&gt; &lt;/ choice&gt; &lt;element name =“ <span class="bold">null_handling</span> ”minOccurs =“0”&gt; &lt;simpleType&gt; &lt;restriction base =“NMTOKEN”&gt; &lt;枚举值=“DROP_NULLS”/&gt; &lt;枚举值=“NULL_ATTR”/&gt; &lt;枚举值=“EMPTY_TAG”/&gt; &lt;/ restriction&gt; &lt;/ simpleType&gt; &lt;/ element&gt; &lt;element name =“ <span class="bold">ma x_rows</span> “type =”positiveInteger“minOccurs =”0“/&gt; &lt;element name =” <span class="bold">skip_rows</span> “type =”positiveInteger“minOccurs =”0“/&gt; &lt;element name =” <span class="bold">pretty_print</span> “type =”boolean“minOccurs =”0“ /&gt; &lt;element name =“ <span class="bold">indentation_width</span> ”type =“positiveInteger”minOccurs =“0”/&gt; &lt;element name =“ <span class="bold">rowset_tag</span> ”type =“string”minOccurs =“0”/&gt; &lt;element name =“ <span class="bold">row_tag</span> ”type =“ string“minOccurs =”0“/&gt; &lt;element name =” <span class="bold">item_tags_for_coll</span> “type =”boolean“minOccurs =”0“/&gt; &lt;/ sequence&gt; &lt;/ complexType&gt; &lt;/ element&gt; &lt;/ schema&gt;</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-026ABA35-418D-4DC5-8660-ACF0D92FF7F6__CHDCCADC">
                     <p class="titleinexample">示例33-4使用Query Web Service输入SQL查询的XML文档</p><pre class="pre codeblock"><code>&lt;？xml版本=“1.0”？&gt; &lt;env：Envelope xmlns：env =“http://www.w3.org/2002/06/soap-envelope”&gt; &lt;env：Body&gt; &lt; <span class="bold">query</span> xmlns =“http://xmlns.oracle.com/orawsv “&gt; &lt; <span class="bold">query_text</span> type =”SQL“&gt; &lt;！[CDATA [SELECT * FROM employees WHERE salary = <span class="bold">：e</span> ]]&gt; &lt;/ query_text&gt; &lt; <span class="bold">bind</span> name =“ <span class="bold">e</span> ”&gt; 8300 &lt;/ bind&gt; &lt; <span class="bold">pretty_print</span> &gt; false &lt;/ pretty_print&gt; &lt;/ query&gt; &lt;/ env：Body&gt; &lt; / ENV：Envelope&gt;在</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-026ABA35-418D-4DC5-8660-ACF0D92FF7F6__CHDFJJEE">
                     <p class="titleinexample">示例33-5使用Query Web Service输出SQL查询的XML文档</p><pre class="oac_no_warn" dir="ltr">&lt;？xml版本=“1.0”？&gt; &lt;soap：Envelope xmlns：soap =“http://www.w3.org/2002/06/soap-envelope”&gt; &lt;soap：Body&gt; &lt;ROWSET&gt; &lt;ROW&gt; &lt;EMPLOYEE_ID&gt; 206 &lt;/ EMPLOYEE_ID&gt; &lt;FIRST_NAME &gt; William &lt;/ FIRST_NAME&gt; &lt;LAST_NAME&gt; Gietz &lt;/ LAST_NAME&gt; &lt;EMAIL&gt; WGIETZ &lt;/ EMAIL&gt; &lt;PHONE_NUMBER&gt; 515.123.8181 &lt;/ PHONE_NUMBER&gt; &lt;HIRE_DATE&gt; 07-JUN- 94 &lt;/ HIRE_DATE&gt; &lt;JOB_ID&gt; AC_ACCOUNT &lt; / JOB_ID&gt; &lt;SALARY&gt; 8300 &lt;/ SALARY&gt; &lt;MANAGER_ID&gt; 205 &lt;/ MANAGER_ID&gt; &lt;DEPARTMENT_ID&gt; 110 &lt;/ DEPARTMENT_ID&gt; &lt;/ ROW&gt; &lt;/ ROWSET&gt; &lt;/ soap：Body&gt; &lt;/ soap：Envelope&gt;</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：本</strong> <a href="native-XML-DB-web-services.html#GUID-108279B4-0315-4D8D-86A2-6487767ED280" title="您的应用程序可以使用本机Oracle XML DB Web服务访问Oracle数据库。">机Oracle XML DB Web服务</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5687"></a><a id="ADXDB5686"></a><div class="props_rev_3"><a id="GUID-E97E718E-0BD6-45C4-B1C9-B5EDABE68686" name="GUID-E97E718E-0BD6-45C4-B1C9-B5EDABE68686"></a><h3 id="ADXDB-GUID-E97E718E-0BD6-45C4-B1C9-B5EDABE68686" class="sect3"><span class="enumeration_section">33.4</span>使用Web服务访问PL / SQL存储过程</h3>
               <div>
                  <p>用于访问PL / SQL存储函数和过程的Oracle XML DB Web服务位于URL <code class="codeph">http://</code> <span class="italic"><code class="codeph">host</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">port</code></span> <code class="codeph">/</code> <span class="bold"><code class="codeph">orawsv</code></span> <code class="codeph">/</code> <span class="italic"><code class="codeph">dbschema</code></span> <code class="codeph">/</code> <span class="italic"><code class="codeph">package</code></span> <code class="codeph">/</code> <span class="italic"><code class="codeph">fn_or_proc</code></span>或者用于独立的函数或过程（不在包中） ， <code class="codeph">http://</code> <span class="italic"><code class="codeph">host</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">port</code></span> <code class="codeph">/</code> <span class="bold"><code class="codeph">orawsv</code></span> <code class="codeph">/</code> <span class="italic"><code class="codeph">dbschema</code></span> <code class="codeph">/</code> <span class="italic"><code class="codeph">fn_or_proc</code></span> 。</p>
                  <p>这里， <span class="italic"><code class="codeph">host</code></span>和<span class="italic"><code class="codeph">port</code></span>是数据库主机和HTTP（S）端口， <span class="italic"><code class="codeph">fn_or_proc</code></span>是存储的函数或过程名称， <span class="italic"><code class="codeph">package</code></span>是其包， <span class="italic"><code class="codeph">dbschema</code></span>是拥有该包的数据库模式。
                  </p>
                  <p>输入XML文档必须包含函数或过程所需的输入。输出XML文档包含返回值和所有<code class="codeph">OUT</code>变量的值。
                  </p>
                  <p>输入和输出文档中的XML元素的名称对应于函数或过程的变量名称。生成的WSDL文档向您显示确切的XML元素名称。这是使用的命名约定：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>将输入引入PL / SQL函数的XML元素名为<span class="italic"><code class="codeph">function-name</code></span> <span class="bold"><code class="codeph">Input</code></span> ，其中<span class="italic"><code class="codeph">function-name</code></span>是<span class="italic"><code class="codeph">function-name</code></span> （大写）。
                        </p>
                     </li>
                     <li>
                        <p>引入函数输入参数的XML元素名为<span class="italic"><code class="codeph">param-name</code></span> <span class="bold"><code class="codeph">-</code></span> <span class="italic"><code class="codeph">param-type</code></span> <span class="bold"><code class="codeph">-</code></span> <span class="italic"><code class="codeph">io-mode</code></span> ，其中<span class="italic"><code class="codeph">param-name</code></span>是<span class="italic"><code class="codeph">param-name</code></span> （大写）， <span class="italic"><code class="codeph">param-type</code></span>是其SQL数据类型，以及<span class="italic"><code class="codeph">io-mode</code></span>是它的输入输出模式，如下所示：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold"><code class="codeph">IN</code></span> - <code class="codeph">IN</code>模式</p>
                           </li>
                           <li>
                              <p><span class="bold"><code class="codeph">OUT</code></span> - <code class="codeph">OUT</code>模式</p>
                           </li>
                           <li>
                              <p><span class="bold"><code class="codeph">INOUT</code></span> - <code class="codeph">IN OUT</code>模式</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>引入PL / SQL函数输出的XML元素名为<span class="bold"><code class="codeph">S</code></span> <span class="italic"><code class="codeph">return-type</code></span> <span class="bold"><code class="codeph">-</code></span> <span class="italic"><code class="codeph">function-name</code></span> <span class="bold"><code class="codeph">Output</code></span> ，其中<span class="italic"><code class="codeph">return-type</code></span>是返回值（大写）的SQL数据类型， <span class="italic"><code class="codeph">function-name</code></span>是功能（大写）。
                        </p>
                     </li>
                     <li>
                        <p>引入函数输出参数的XML元素的名称与输出参数本身（大写）相同。引入返回值的元素名为<code class="codeph">RETURN</code> 。</p>
                     </li>
                  </ul>
                  <p>函数的返回值位于输出文档的<code class="codeph">RETURN</code>元素中，该元素始终是文档中的第一个元素。此返回值位置将其与任何可能命名为“ <code class="codeph">RETURN</code> ”的<code class="codeph">OUT</code>参数消除歧义。
                  </p>
                  <p>每个存储的函数或过程都与一个单独的动态Web服务相关联，该Web服务具有自己的生成的WSDL文档。此WSDL文档位于URL <code class="codeph">http://</code> <span class="italic"><code class="codeph">host</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">port</code></span> <code class="codeph">/</code> <span class="bold"><code class="codeph">orawsv</code></span> <code class="codeph">/</code> <span class="italic"><code class="codeph">dbschema</code></span> <code class="codeph">/</code> <span class="italic"><code class="codeph">package</code></span> <code class="codeph">/</code> <span class="italic"><code class="codeph">fn_or_proc</code></span> <span class="bold"><code class="codeph">?wsdl</code></span>或<code class="codeph">http://</code> <span class="italic"><code class="codeph">host</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">port</code></span> <code class="codeph">/</code> <span class="bold"><code class="codeph">orawsv</code></span> <code class="codeph">/</code> <span class="italic"><code class="codeph">dbschema</code></span> <code class="codeph">/</code> <span class="italic"><code class="codeph">fn_or_proc</code></span> <span class="bold"><code class="codeph">?wsdl</code></span> 。此外，您可以选择生成单个WSDL文档，以用于给定包中的所有存储函数和过程。该WSDL文档的URL是<code class="codeph">http://</code> <span class="italic"><code class="codeph">host</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">port</code></span> <code class="codeph">/</code> <span class="bold"><code class="codeph">orawsv</code></span> <code class="codeph">/</code> <span class="italic"><code class="codeph">dbschema</code></span> <code class="codeph">/</code> <span class="italic"><code class="codeph">package</code></span> <span class="bold"><code class="codeph">?wsdl</code></span> 。</p>
                  <p>根据<a href="native-XML-DB-web-services.html#GUID-E97E718E-0BD6-45C4-B1C9-B5EDABE68686__CHDGBFID" title="XML和SQL数据类型之间的Web服务映射">表33-1</a> ，传入和传出XML文档中的数据类型将映射到SQL数据类型，以供存储的函数或过程使用。这些是唯一受支持的数据类型。
                  </p>
                  <div class="tblformal" id="GUID-E97E718E-0BD6-45C4-B1C9-B5EDABE68686__CHDGBFID">
                     <p class="titleintable">表33-1 XML和Oracle数据库数据类型之间的Web服务映射</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="XML和Oracle数据库数据类型之间的Web服务映射" width="100%" border="1" summary="Web Service Mapping Between XML and SQL Data Types" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="81%" id="d164247e1240">Oracle数据库数据类型</th>
                              <th align="left" valign="bottom" width="19%" id="d164247e1243">XML模式数据类型</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="81%" id="d164247e1248" headers="d164247e1240 ">
                                 <p><code class="codeph">CHAR</code> ， <code class="codeph">VARCHAR2</code> ， <code class="codeph">VARCHAR</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d164247e1248 d164247e1243 ">
                                 <p><code class="codeph">XSD：字符串</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="81%" id="d164247e1263" headers="d164247e1240 ">
                                 <p><code class="codeph">DATE</code> - 日期必须采用数据库格式。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d164247e1263 d164247e1243 ">
                                 <p><code class="codeph">XSD：日期</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="81%" id="d164247e1273" headers="d164247e1240 ">
                                 <p><code class="codeph">TIMESTAMP</code> ， <code class="codeph">TIMESTAMP WITH TIMEZONE</code> ， <code class="codeph">TIMESTAMP WITH LOCAL TIMEZONE</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d164247e1273 d164247e1243 ">
                                 <p><code class="codeph">XSD时间：DATETIME</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="81%" id="d164247e1288" headers="d164247e1240 ">
                                 <p><code class="codeph">INTERVAL YEAR TO MONTH</code> ， <code class="codeph">INTERVAL DAY TO SECOND</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d164247e1288 d164247e1243 ">
                                 <p><code class="codeph">XSD：持续时间</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="81%" id="d164247e1300" headers="d164247e1240 ">
                                 <p><code class="codeph">NUMBER</code> ， <code class="codeph">BINARY_DOUBLE</code> ， <code class="codeph">BINARY_FLOAT</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d164247e1300 d164247e1243 ">
                                 <p><code class="codeph">XSD：双</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="81%" id="d164247e1315" headers="d164247e1240 ">
                                 <p><code class="codeph">INT</code> ， <code class="codeph">INTEGER</code> ， <code class="codeph">SMALLINT</code> ， <code class="codeph">PLS_INTEGER</code> ， <code class="codeph">BINARY_INTEGER</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d164247e1315 d164247e1243 ">
                                 <p><code class="codeph">XSD：整数</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="81%" id="d164247e1336" headers="d164247e1240 ">
                                 <p><code class="codeph">RAW</code> ， <code class="codeph">BLOB</code> ， <code class="codeph">REF</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d164247e1336 d164247e1243 ">
                                 <p><code class="codeph">XSD：hexBinary类型</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="81%" id="d164247e1351" headers="d164247e1240 ">
                                 <p>PL / SQL <code class="codeph">BOOLEAN</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d164247e1351 d164247e1243 ">
                                 <p><code class="codeph">XSD：布尔</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="81%" id="d164247e1361" headers="d164247e1240 ">
                                 <p>对象类型</p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d164247e1361 d164247e1243 ">
                                 <p><code class="codeph">复杂类型</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="81%" id="d164247e1369" headers="d164247e1240 ">
                                 <p><code class="codeph">的XMLType</code></p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d164247e1369 d164247e1243 ">
                                 <p>空<code class="codeph">complexType</code></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>对象类型在XML中表示为与对象类型相同的复杂类型元素。对象属性表示为此元素的子元素。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="native-XML-DB-web-services.html#GUID-6376B342-3B65-441D-82D5-8F0607C4256F">将PL / SQL函数与Web服务一起使用：示例</a><br>示例提供了PL / SQL函数及其使用Web服务的访问。该函数将部门ID和名称作为输入。它返回部门的工资总额。它还分别作为输入输出和输出参数返回部门名称和部门中的员工数量。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：本</strong> <a href="native-XML-DB-web-services.html#GUID-108279B4-0315-4D8D-86A2-6487767ED280" title="您的应用程序可以使用本机Oracle XML DB Web服务访问Oracle数据库。">机Oracle XML DB Web服务</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5689"></a><a id="ADXDB5690"></a><a id="ADXDB5691"></a><a id="ADXDB5692"></a><a id="ADXDB5688"></a><div class="props_rev_3"><a id="GUID-6376B342-3B65-441D-82D5-8F0607C4256F" name="GUID-6376B342-3B65-441D-82D5-8F0607C4256F"></a><h4 id="ADXDB-GUID-6376B342-3B65-441D-82D5-8F0607C4256F" class="sect4"><span class="enumeration_section">33.4.1</span>将PL / SQL函数与Web服务一起使用：示例</h4>
                  <div>
                     <p>示例提供了PL / SQL函数及其使用Web服务的访问。该函数将部门ID和名称作为输入。它返回部门的工资总额。它还分别作为输入输出和输出参数返回部门名称和部门中的员工数量。</p>
                     <div class="section">
                        <p>部门ID的默认值为<code class="codeph">20</code> 。在这个简单的示例中，实际上并未使用输入输出参数<code class="codeph">dept_name</code>的输入值。它被忽略，并返回正确的名称。
                        </p>
                        <p><a href="native-XML-DB-web-services.html#GUID-6376B342-3B65-441D-82D5-8F0607C4256F__CHDIHFIH">例33-6</a>显示了函数定义。<a href="native-XML-DB-web-services.html#GUID-6376B342-3B65-441D-82D5-8F0607C4256F__CHDGGCFJ">例33-7</a>显示了从此函数定义自动创建的WSDL文档。<a href="native-XML-DB-web-services.html#GUID-6376B342-3B65-441D-82D5-8F0607C4256F__CHDEFFFB">例33-8</a>显示了一个调用存储函数的输入文档。<a href="native-XML-DB-web-services.html#GUID-6376B342-3B65-441D-82D5-8F0607C4256F__CHDIBFIH">例33-9</a>显示了生成的输出文档。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-6376B342-3B65-441D-82D5-8F0607C4256F__CHDIHFIH">
                        <p class="titleinexample">例33-6用于Web服务访问的PL / SQL函数的定义</p><pre class="pre codeblock"><code>创建或替换包裹salary_calculator AUTHID CURRENT_USER作为功能TotalDepartmentSalary（dept_id IN NUMBER DEFAULT 20，dept_name IN OUT VARCHAR2，nummembers OUT NUMBER）返回号码; END salary_calculator; / CREATE OR REPLACE PACKAGE BODY salary_calculator AS FUNCTION TotalDepartmentSalary（dept_id IN NUMBER DEFAULT 20，dept_name IN OUT VARCHAR2，nummembers OUT NUMBER）RETURN NUMBER是sum_sal NUMBER; BEGIN SELECT SUM（薪水）INTO sum_sal FROM employees WHERE department_id = dept_id; SELECT department_name INTO dept_name FROM departments WHERE department_name = dept_name; SELECT count（*）INTO nummembers FROM employees WHERE department_id = dept_id;返回sum_sal;结束;结束; /</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-6376B342-3B65-441D-82D5-8F0607C4256F__CHDGGCFJ">
                        <p class="titleinexample">例33-7对应于存储的PL / SQL函数的WSDL文档</p><pre class="pre codeblock"><code>&lt;definitions name =“SALARY_CALCULATOR”targetNamespace =“http://xmlns.oracle.com/orawsv/HR/SALARY_CALCULATOR”xmlns =“http://schemas.xmlsoap.org/wsdl/”xmlns：tns =“http：/ /xmlns.oracle.com/orawsv/HR/SALARY_CALCULATOR“xmlns：xsd =”http://www.w3.org/2001/XMLSchema“xmlns：soap =”http://schemas.xmlsoap.org/wsdl/soap /“&gt; &lt;types&gt; &lt;xsd：schema targetNamespace =”http://xmlns.oracle.com/orawsv/HR/SALARY_CALCULATOR“elementFormDefault =”qualified“&gt; &lt;xsd：element name =” <span class="bold">SNUMBER-TOTALDEPARTMENTSALARYInput</span> “&gt; &lt;xsd： complexType&gt; &lt;xsd：sequence&gt; &lt;xsd：element name =“ <span class="bold">NUMMEMBERS-NUMBER-OUT</span> ”&gt; &lt;xsd：complexType /&gt; &lt;/ xsd：element&gt; &lt;xsd：element name =“ <span class="bold">DEPT_NAME-VARCHAR2-INOUT</span> ”type =“xsd ：string“/&gt; &lt;xsd：element name =” <span class="bold">DEPT_ID-NUMBER-IN</span> “type =”xsd：double“/&gt; &lt;/ xsd：sequence&gt; &lt;/ xsd：complexType&gt; &lt;/ xsd：element&gt; &lt;xsd：element name =“ <span class="bold">TOTALDEPARTMENTSALARYOutput</span> ”&gt; &lt;xsd：complexType&gt; &lt;xsd：sequence&gt; &lt;xsd：element name =“ <span class="bold">RETURN</span> ”type =“xsd：double”/&gt; &lt;xsd：element name =“ <span class="bold">NUMMEMBERS</span> ”type =“xsd：double”/ &gt; &lt;xsd：element name =“ <span class="bold">DEPT_NAME</span> ”typ e =“xsd：string”/&gt; &lt;/ xsd：sequence&gt; &lt;/ xsd：complexType&gt; &lt;/ xsd：element&gt; &lt;/ xsd：schema&gt; &lt;/ types&gt; &lt;message name =“TOTALDEPARTMENTSALARYInputMessage”&gt; &lt;part name =“参数“element =”tns：SNUMBER-TOTALDEPARTMENTSALARYInput“/&gt; &lt;/ message&gt; &lt;message name =”TOTALDEPARTMENTSALARYOutputMessage“&gt; &lt;part name =”parameters“element =”tns：TOTALDEPARTMENTSALARYOutput“/&gt; &lt;/ message&gt; &lt;portType name =” SALARY_CALCULATORPortType“&gt; &lt;operation name =”TOTALDEPARTMENTSALARY“&gt; &lt;input message =”tns：TOTALDEPARTMENTSALARYInputMessage“/&gt; &lt;output message =”tns：TOTALDEPARTMENTSALARYOutputMessage“/&gt; &lt;/ operation&gt; &lt;/ portType&gt; &lt;binding name =”SALARY_CALCULATORBinding“type = “tns：SALARY_CALCULATORPortType”&gt; &lt;soap：binding style =“document”transport =“http://schemas.xmlsoap.org/soap/http”/&gt; &lt;operation name =“TOTALDEPARTMENTSALARY”&gt; &lt;soap：operation soapAction =“TOTALDEPARTMENTSALARY “/&gt; &lt;input&gt; &lt;soap：body parts =”parameters“use =”literal“/&gt; &lt;/ input&gt; &lt;output&gt; &lt;soap：body parts =”parameters“use =”literal“/&gt; &lt;/ output&gt; &lt; / operation&gt; &lt;/ binding&gt; &lt;service name =“SALARY_CALCULATORService”&gt; &lt;documentation&gt; Oracle Web Service &lt;/ documentation&gt; &lt;port name =“SALARY_CALCULATORPort”binding =“tns：SALARY_CALCULATORBinding”&gt; &lt;soap：address location =“https：// example：8088 / orawsv / HR / SALARY_CALCULATOR“/&gt; &lt;/ port&gt; &lt;/ service&gt; &lt;/ definitions&gt;</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-6376B342-3B65-441D-82D5-8F0607C4256F__CHDEFFFB">
                        <p class="titleinexample">示例33-8使用Web服务输入PL / SQL查询的XML文档</p><pre class="pre codeblock"><code>&lt;？xml版本=“1.0”？&gt; &lt;soap：Envelope xmlns：soap =“http://www.w3.org/2002/06/soap-envelope”&gt; &lt;soap：Body&gt; &lt;SNUMBER- TOTALDEPARTMENTSALARYinput xmlns =“http://xmlns.oracle.com / orawsv / HR / SALARY_CALCULATOR / TOTALDEPARTMENTSALARY“&gt; &lt;DEPT_ID-NUMBER-IN&gt; 30 &lt;/ DEPT_ID-NUMBER-IN&gt; &lt;DEPT_NAME-VARCHAR2-INOUT&gt;采购&lt;/ DEPT_NAME-VARCHAR2-INOUT&gt; &lt;NUMMEMBERS-NUMBER-OUT /&gt; &lt;/ SNUMBER- TOTALDEPARTMENTSALARYinput&gt; &lt;/ soap：Body&gt; &lt;/ soap：Envelope&gt;</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-6376B342-3B65-441D-82D5-8F0607C4256F__CHDIBFIH">
                        <p class="titleinexample">示例33-9使用Web服务输出PL / SQL查询的XML文档</p><pre class="pre codeblock"><code>&lt;？xml版本=“1.0”？&gt; &lt;soap：Envelope xmlns：soap =“http://www.w3.org/2002/06/soap-envelope”&gt; &lt;soap：Body&gt; &lt;TOTALDEPARTMENTSALARYOutput xmlns =“http://xmlns.oracle.com/orawsv / HR / SALARY_CALCULATOR / TOTALDEPARTMENTSALARY“&gt; &lt;返回&gt; 24900 &lt;/ RETURN&gt; &lt;NUMMEMBERS&gt; 6 &lt;/ NUMMEMBERS&gt; &lt;DEPT_NAME&gt;采购&lt;/ DEPT_NAME&gt; &lt;/ TOTALDEPARTMENTSALARYOutput&gt; &lt;/ soap：Body&gt; &lt;/ soap：Envelope&gt;</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="native-XML-DB-web-services.html#GUID-E97E718E-0BD6-45C4-B1C9-B5EDABE68686" title="用于访问PL / SQL存储函数和过程的Oracle XML DB Web服务位于URL http：// host：port / orawsv / dbschema / package / fn_or_proc，或者用于独立的函数或过程（不在包中） ，http：// host：port / orawsv / dbschema / fn_or_proc。">使用Web服务访问PL / SQL存储过程</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
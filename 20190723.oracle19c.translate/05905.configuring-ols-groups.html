<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This tutorial demonstrates how to create an Oracle Label Security parent group that has four child groups."></meta>
      <meta name="description" content="This tutorial demonstrates how to create an Oracle Label Security parent group that has four child groups."></meta>
      <title>教程：在Oracle Label Security中配置组</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator&#39;s Guide"></meta>
      <meta property="og:description" content="This tutorial demonstrates how to create an Oracle Label Security parent group that has four child groups."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="label-security-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-11T09:39:52-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2006, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96303-05"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="configuring-ols-compartments.html" title="Previous" type="text/html"></link>
      <link rel="next" href="part3.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Label Security Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="OLSAG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="configuring-ols-compartments.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="part3.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-label-security-tutorials.html" property="item" typeof="WebPage"><span property="name">Oracle Label Security教程</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">教程：在Oracle Label Security中配置组</li>
            </ol>
            <a id="GUID-56EE2FFD-C3D1-41B0-9CE4-C0DFF0C94E45" name="GUID-56EE2FFD-C3D1-41B0-9CE4-C0DFF0C94E45"></a>
            
            <h2 id="OLSAG-GUID-56EE2FFD-C3D1-41B0-9CE4-C0DFF0C94E45" class="sect2"><span class="enumeration_chapter">10</span>教程：在Oracle Label Security中配置组</h2>
         </header>
         <div class="ind">
            <div>
               <p>本教程演示如何创建具有四个子组的Oracle Label Security父组。</p>
               <p></p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="configuring-ols-groups.html#GUID-0D39F7B7-90A1-43E1-91D6-EC8F3785123F">关于本教程</a><br>在本教程中，您将使用<code class="codeph">OE</code>模式来了解如何使用Oracle Label Security组。
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-groups.html#GUID-654D29B0-2300-4186-93BB-6F53D7AB58AE">第1步：创建角色和用户帐户</a><br>您创建的角色将允许授予它的任何用户对<code class="codeph">OE.CUSTOMERS</code>表具有<code class="codeph">SELECT</code>权限。用户帐户适用于四个销售代表和</li>
                  <li class="ulchildlink"><a href="configuring-ols-groups.html#GUID-879C6B5D-88AA-4E0B-BBEA-7B857AB2B3E7">第2步：创建Oracle Label Security策略容器</a><br>作为Oracle Label Security管理员，您必须创建并启用策略容器。
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-groups.html#GUID-FF8BA3F3-9736-4EDF-ABEE-8D521B6327C4">步骤3：为Oracle Label Security策略创建和授权级别组件</a><br>创建Oracle Label Security策略容器后，即可创建和授权级别组件。
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-groups.html#GUID-202E6EFC-37AB-41D6-BAB4-A9D51AA632FD">步骤4：为Oracle Label Security策略创建和授权组</a><br>您将为此父组创建和授权一个父组和四个子组。每个用户都将获得一个组的授权。
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-groups.html#GUID-E67AC6A1-71B6-410B-A3D1-C853727FE7A7">步骤5：将策略应用并授权到表中</a><br>您必须将<code class="codeph">OE_OLS_POL</code>策略应用于<code class="codeph">OE.CUSTOMERS</code>表，然后授权<code class="codeph">OE</code>模式用户具有该策略的读取权限。
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-groups.html#GUID-8BDF4EA4-4A9B-4A40-99C8-E82B95620C41">步骤6：将策略标签添加到OE.CUSTOMERS表数据</a><br><code class="codeph">OE</code>用户将策略标签添加到<code class="codeph">ACCOUNT_MGR_ID</code>列中的<code class="codeph">OE.CUSTOMERS</code>表数据。
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-groups.html#GUID-C02BBF27-D7C9-4ECB-9954-9AC10E610F83">步骤7：测试Oracle Label Security Policy</a><br>要测试策略，每个用户都将查询<code class="codeph">OE.CUSTOMERS</code>表。
                  </li>
                  <li class="ulchildlink"><a href="configuring-ols-groups.html#GUID-7FDFACBC-C478-48A7-A929-8D36013DF571">步骤8：（可选）删除Oracle Label Security Policy Components</a><br>您可以删除Oracle Label Security策略， <code class="codeph">OE_CUST</code>角色和用户帐户。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="oracle-label-security-tutorials.html" title="第III部分提供了有关如何创建Oracle Label Security策略的教程。">Oracle Label Security教程</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-0D39F7B7-90A1-43E1-91D6-EC8F3785123F" name="GUID-0D39F7B7-90A1-43E1-91D6-EC8F3785123F"></a><h3 id="OLSAG-GUID-0D39F7B7-90A1-43E1-91D6-EC8F3785123F" class="sect3">关于本教程</h3>
               <div>
                  <p>在本教程中，您将使用<code class="codeph">OE</code>模式来了解如何使用Oracle Label Security组。
                  </p>
                  <p>每个销售经理必须能够访问<code class="codeph">OE.CUSTOMERS</code>表中他或她的客户的记录。每个销售经理向其报告的公司总裁Steven King必须能够访问所有客户记录。客户记录根据销售经理的区域分为几组。
                  </p>
                  <p>您创建的Oracle Label Security策略将为每个销售经理分配一个组，该组将用于标记<code class="codeph">OE.CUSTOMERS</code>表中的相应行。这些团体将拥有一个家长组<code class="codeph">GLOBAL_SALES</code> ，该组将与广告总裁Steven King联系在一起。<code class="codeph">GLOBAL_SALES</code>的子组如下：</p>
                  <ul id="GUID-0D39F7B7-90A1-43E1-91D6-EC8F3785123F__UL_ABH_BTG_5GB" style="list-style-type:disc">
                     <li><code class="codeph">EUROPE</code> ，销售经理Alberto Errazuriz可以访问</li>
                     <li><code class="codeph">ASIA</code> ，销售经理Gerald Cambrault可以访问</li>
                     <li><code class="codeph">UNITED_STATES_1</code> ，由销售经理John Russell访问</li>
                     <li><code class="codeph">UNITED_STATES_2</code> ，销售经理Eleni Zlotkey可以访问</li>
                  </ul>
                  <p>默认情况下，未安装<code class="codeph">OE</code>架构。您可以从GitHub下载此模式，如<cite>Oracle数据库示例模式中所述</cite> 。
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../comsc/installing-sample-schemas.html#COMSC-GUID-A2C3DC59-CDA1-47C0-BA6B-F6EA6395A85F" target="_blank"><span><cite>Oracle数据库示例模式</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-groups.html#GUID-56EE2FFD-C3D1-41B0-9CE4-C0DFF0C94E45" title="本教程演示如何创建具有四个子组的Oracle Label Security父组。">教程：在Oracle Label Security中配置组</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-654D29B0-2300-4186-93BB-6F53D7AB58AE" name="GUID-654D29B0-2300-4186-93BB-6F53D7AB58AE"></a><h3 id="OLSAG-GUID-654D29B0-2300-4186-93BB-6F53D7AB58AE" class="sect3">第1步：创建角色和用户帐户</h3>
               <div>
                  <p>您创建的角色将允许授予它的任何用户对<code class="codeph">OE.CUSTOMERS</code>表具有<code class="codeph">SELECT</code>权限。用户帐户适用于四个销售代表和</p>
                  <ol>
                     <li class="stepexpand"><span>以具有创建角色，授予权限和创建用户帐户权限的用户身份登录SQL * Plus。</span><div>例如：<pre class="oac_no_warn" dir="ltr">sqlplus sec_admin输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>确保已从GitHub下载并安装了<code class="codeph">OE</code>架构。</span><div><cite>Oracle数据库示例模式</cite>说明了如何下载和安装此模式。
                        </div>
                     </li>
                     <li class="stepexpand"><span>创建角色如下：</span><div><pre class="oac_no_warn" dir="ltr">创造角色OE_CUST;</pre></div>
                     </li>
                     <li class="stepexpand"><span>将<code class="codeph">OE.CUSTOMERS</code>的<code class="codeph">SELECT</code>权限<code class="codeph">OE.CUSTOMERS</code> <code class="codeph">OE_CUST</code> 。</span><div><pre class="oac_no_warn" dir="ltr">在OE.CUSTOMERS上选择OE_CUST;</pre></div>
                     </li>
                     <li class="stepexpand"><span>创建用户帐户并授予他们<code class="codeph">OE_CUST</code>角色。</span><div><pre class="oac_no_warn" dir="ltr">GRANT CONNECT，OE_CUST TO SKING通过<span class="italic">密码</span>识别; <span class="italic">- 对于史蒂芬金，总统</span> GRANT CONNECT，OE_CUST到AERRAZURIZ通过<span class="italic">密码</span>识别; <span class="italic">- 对于Alberto Errazuriz，销售经理</span> GRANT CONNECT，OE_CUST到GCAMBRAULT通过<span class="italic">密码</span>识别; <span class="italic">- 对于Gerald Cambrault，销售经理</span> GRANT CONNECT，OE_CUST到JRUSSELL通过<span class="italic">密码</span>识别; <span class="italic">- 对于John Russell，销售经理</span> GRANT CONNECT，OE_CUST TO EZLOTKEY通过<span class="italic">密码</span>识别; <span class="italic"> - 对于销售经理Eleni Zlotkey</span></pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../comsc/installing-sample-schemas.html#COMSC-GUID-A2C3DC59-CDA1-47C0-BA6B-F6EA6395A85F" target="_blank"><span><cite>Oracle数据库示例模式</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-groups.html#GUID-56EE2FFD-C3D1-41B0-9CE4-C0DFF0C94E45" title="本教程演示如何创建具有四个子组的Oracle Label Security父组。">教程：在Oracle Label Security中配置组</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-879C6B5D-88AA-4E0B-BBEA-7B857AB2B3E7" name="GUID-879C6B5D-88AA-4E0B-BBEA-7B857AB2B3E7"></a><h3 id="OLSAG-GUID-879C6B5D-88AA-4E0B-BBEA-7B857AB2B3E7" class="sect3">第2步：创建Oracle Label Security策略容器</h3>
               <div>
                  <p>作为Oracle Label Security管理员，您必须创建并启用策略容器。</p>
                  <ol>
                     <li class="stepexpand"><span>以可以创建和管理Oracle Label Security策略的用户身份进行连接。</span><div>例如：<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>创建策略。</span><div><pre class="oac_no_warn" dir="ltr">BEGIN SA_SYSDBA.CREATE_POLICY（policy_name =&gt;'OE_OLS_POL'，column_name =&gt;'OLS_COL'）;结束; /</pre><p>在本规范中，省略了<code class="codeph">default_options</code>参数，因为您可以稍后在另一个过程中添加它。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>启用该策略。</span><div><pre class="oac_no_warn" dir="ltr">EXEC SA_SYSDBA.ENABLE_POLICY（'OE_OLS_POL'）;</pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-groups.html#GUID-56EE2FFD-C3D1-41B0-9CE4-C0DFF0C94E45" title="本教程演示如何创建具有四个子组的Oracle Label Security父组。">教程：在Oracle Label Security中配置组</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-FF8BA3F3-9736-4EDF-ABEE-8D521B6327C4" name="GUID-FF8BA3F3-9736-4EDF-ABEE-8D521B6327C4"></a><h3 id="OLSAG-GUID-FF8BA3F3-9736-4EDF-ABEE-8D521B6327C4" class="sect3">步骤3：为Oracle Label Security策略创建和授权级别组件</h3>
               <div>
                  <p>创建Oracle Label Security策略容器后，即可创建和授权级别组件。</p>
                  <div class="section">级别用于此策略，但您需要具有默认级别，以便稍后创建的数据标签能够正常工作。</div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>如有必要，请以可以创建和管理Oracle Label Security策略的用户身份进行连接。</span><div>例如：<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>创建级别如下：</span><div><pre class="oac_no_warn" dir="ltr">BEGIN SA_COMPONENTS.CREATE_LEVEL（policy_name =&gt;'OE_OLS_POL'，level_num =&gt; 50，short_name =&gt;'D'，long_name =&gt;'DEFAULT'）;结束; /</pre><p>在本规范中：</p>
                           <ul id="GUID-FF8BA3F3-9736-4EDF-ABEE-8D521B6327C4__UL_FGF_ZSR_4GB" style="list-style-type:disc">
                              <li><code class="codeph">policy_name</code>将级别与您刚刚创建的策略容器相关联。
                              </li>
                              <li><code class="codeph">level_num</code>确定用户可以拥有多少访问权限。级别号<code class="codeph">50</code>使用户可以访问此级别及其下的任何级别编号。但是，本教程仅使用一个级别。
                              </li>
                              <li><code class="codeph">short_name</code>对于短手的名字<code class="codeph">long_name</code>水平，并会在其它程序被用来指<code class="codeph">long_name</code>水平的版本。
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li class="stepexpand"><span>授权将访问<code class="codeph">OE.EMPLOYEES</code>表的五个用户的级别。</span><div><pre class="oac_no_warn" dir="ltr">BEGIN SA_USER_ADMIN.SET_LEVELS（policy_name =&gt;'OE_OLS_POL'，user_name =&gt;'SKING'，max_level =&gt;'D'）; SA_USER_ADMIN.SET_LEVELS（policy_name =&gt;'OE_OLS_POL'，user_name =&gt;'AERRAZURIZ'，max_level =&gt;'D'）; SA_USER_ADMIN.SET_LEVELS（policy_name =&gt;'OE_OLS_POL'，user_name =&gt;'GCAMBRAULT'，max_level =&gt;'D'）; SA_USER_ADMIN.SET_LEVELS（policy_name =&gt;'OE_OLS_POL'，user_name =&gt;'JRUSSELL'，max_level =&gt;'D'）; SA_USER_ADMIN.SET_LEVELS（policy_name =&gt;'OE_OLS_POL'，user_name =&gt;'EZLOTKEY'，max_level =&gt;'D'）;结束; /</pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-groups.html#GUID-56EE2FFD-C3D1-41B0-9CE4-C0DFF0C94E45" title="本教程演示如何创建具有四个子组的Oracle Label Security父组。">教程：在Oracle Label Security中配置组</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-202E6EFC-37AB-41D6-BAB4-A9D51AA632FD" name="GUID-202E6EFC-37AB-41D6-BAB4-A9D51AA632FD"></a><h3 id="OLSAG-GUID-202E6EFC-37AB-41D6-BAB4-A9D51AA632FD" class="sect3">步骤4：为Oracle Label Security策略创建和授权组</h3>
               <div>
                  <p>您将为此父组创建和授权一个父组和四个子组。每个用户都将获得一个组的授权。</p>
                  <ol>
                     <li class="stepexpand"><span>如有必要，请以可以创建和管理Oracle Label Security策略的用户身份进行连接。</span><div>例如：<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>创建<code class="codeph">GLOBAL_SALES</code>父组。</span><div><pre class="oac_no_warn" dir="ltr">BEGIN SA_COMPONENTS.CREATE_GROUP（policy_name =&gt;'OE_OLS_POL'，group_num =&gt; 2000，short_name =&gt;'GS'，long_name =&gt;'GLOBAL_SALES'）;结束; /</pre><p>在本说明书中， <code class="codeph">group_num</code>仅用于识别目的。它不控制这组组中的任何层次结构。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>创建子组。</span><div>任何被授权为父组<code class="codeph">GLOBAL_SALES</code> （ <code class="codeph">GS</code> ）的用户也将拥有这些子组的授权。
                        </div>
                        <div><pre class="oac_no_warn" dir="ltr">BEGIN SA_COMPONENTS.CREATE_GROUP（policy_name =&gt;'OE_OLS_POL'，group_num =&gt; 2100，short_name =&gt;'EU'，long_name =&gt;'EUROPE'，parent_name =&gt;'GS'）; SA_COMPONENTS.CREATE_GROUP（policy_name =&gt;'OE_OLS_POL'，group_num =&gt; 2200，short_name =&gt;'AS'，long_name =&gt;'ASIA'，parent_name =&gt;'GS'）; SA_COMPONENTS.CREATE_GROUP（policy_name =&gt;'OE_OLS_POL'，group_num =&gt; 2300，short_name =&gt;'US1'，long_name =&gt;'UNITED_STATES_1'，parent_name =&gt;'GS'）; SA_COMPONENTS.CREATE_GROUP（policy_name =&gt;'OE_OLS_POL'，group_num =&gt; 2400，short_name =&gt;'US2'，long_name =&gt;'UNITED_STATES_2'，parent_name =&gt;'GS'）;结束; /</pre><p>在本规范中， <code class="codeph">parent_name</code>参数指定父组<code class="codeph">GS</code> 。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>授权您之前为这些组创建的用户。</span><div><pre class="oac_no_warn" dir="ltr">BEGIN SA_USER_ADMIN.SET_GROUPS（policy_name =&gt;'OE_OLS_POL'，user_name =&gt;'SKING'，read_groups =&gt;'GS'）; SA_USER_ADMIN.SET_GROUPS（policy_name =&gt;'OE_OLS_POL'，user_name =&gt;'AERRAZURIZ'，read_groups =&gt;'EU'）; SA_USER_ADMIN.SET_GROUPS（policy_name =&gt;'OE_OLS_POL'，user_name =&gt;'GCAMBRAULT'，read_groups =&gt;'AS'）; SA_USER_ADMIN.SET_GROUPS（policy_name =&gt;'OE_OLS_POL'，user_name =&gt;'JRUSSELL'，read_groups =&gt;'US1'）; SA_USER_ADMIN.SET_GROUPS（policy_name =&gt;'OE_OLS_POL'，user_name =&gt;'EZLOTKEY'，read_groups =&gt;'US2'）;结束; /</pre><p>在本规范中，用户<code class="codeph">SKING</code>被授权给父组<code class="codeph">GS</code> ，并且作为所有销售经理的剩余用户被授权代表其销售区域的组。
                           </p>
                        </div>
                     </li>
                  </ol>
                  <div class="section">为这些组设置授权后，由于尚未创建数据标签，Oracle Label Security会自动为您创建数据标签。在早期的教程中，您学习了如何手动创建数据标签，但是在本教程中，您可以允许Oracle Label Security为您创建它们。您可以通过查询<code class="codeph">DBA_SA_LABELS</code>数据字典视图来查看标签。例如：<pre class="oac_no_warn" dir="ltr">SELECT POLICY_NAME，LABEL，LABEL_TAG FROM DBA_SA_LABELS ORDER BY LABEL_TAG;</pre><p>输出类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">POLICY_NAME LABEL LABEL_TAG ------------ ------ ----------- OE_OLS_POL D 1000000085 OE_OLS_POL D :: GS 1000000086 OE_OLS_POL D :: EU 1000000087 OE_OLS_POL D： ：AS 1000000088 OE_OLS_POL D :: US1 1000000089 OE_OLS_POL D :: US2 1000000090</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-groups.html#GUID-56EE2FFD-C3D1-41B0-9CE4-C0DFF0C94E45" title="本教程演示如何创建具有四个子组的Oracle Label Security父组。">教程：在Oracle Label Security中配置组</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-E67AC6A1-71B6-410B-A3D1-C853727FE7A7" name="GUID-E67AC6A1-71B6-410B-A3D1-C853727FE7A7"></a><h3 id="OLSAG-GUID-E67AC6A1-71B6-410B-A3D1-C853727FE7A7" class="sect3">步骤5：将策略应用并授权到表中</h3>
               <div>
                  <p>您必须将<code class="codeph">OE_OLS_POL</code>策略应用于<code class="codeph">OE.CUSTOMERS</code>表，然后授权<code class="codeph">OE</code>模式用户具有该策略的读取权限。
                  </p>
                  <ol>
                     <li class="stepexpand"><span>如有必要，请以可以创建和管理Oracle Label Security策略的用户身份进行连接。</span><div>例如：<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>将<code class="codeph">OE_OLS_POL</code>策略应用于<code class="codeph">OE.CUSTOMERS</code>表。</span><div><pre class="oac_no_warn" dir="ltr">BEGIN SA_POLICY_ADMIN.APPLY_TABLE_POLICY（policy_name =&gt;'OE_OLS_POL'，schema_name =&gt;'OE'，table_name =&gt;'CUSTOMERS'，table_options =&gt;'READ_CONTROL'）;结束; /</pre><p>之前，当您使用<code class="codeph">SA_SYSDBA.CREATE_POLICY</code>过程创建策略时，未设置<code class="codeph">default_options</code>参数，该参数定义策略强制选项。因此，必须使用<code class="codeph">table_options</code>参数<code class="codeph">SA_POLICY_ADMIN.APPLY_TABLE_POLICY</code>在此处设置策略实施。 <code class="codeph">READ_CONTROL</code>在<code class="codeph">SELECT</code>语句处理期间强制执行OLS策略，用户稍后将执行该策略。（它也适用于<code class="codeph">UPDATE</code>和<code class="codeph">DELETE</code>语句处理。）
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>为<code class="codeph">OE.CUSTOMERS</code>启用<code class="codeph">OE_OLS_POL</code>策略。</span><div><pre class="oac_no_warn" dir="ltr">BEGIN SA_POLICY_ADMIN.ENABLE_TABLE_POLICY（policy_name =&gt;'OE_OLS_POL'，schema_name =&gt;'OE'，table_name =&gt;'CUSTOMERS'）;结束; /</pre></div>
                     </li>
                     <li class="stepexpand"><span>为<code class="codeph">OE</code>设置用户权限，以便<code class="codeph">OE</code>可以将标签应用于<code class="codeph">OE.CUSTOMERS</code>数据行。</span><div><pre class="oac_no_warn" dir="ltr">BEGIN SA_USER_ADMIN.SET_USER_PRIVS（policy_name =&gt;'OE_OLS_POL'，user_name =&gt;'OE'，privileges =&gt;'READ'）;结束; /</pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-groups.html#GUID-56EE2FFD-C3D1-41B0-9CE4-C0DFF0C94E45" title="本教程演示如何创建具有四个子组的Oracle Label Security父组。">教程：在Oracle Label Security中配置组</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-8BDF4EA4-4A9B-4A40-99C8-E82B95620C41" name="GUID-8BDF4EA4-4A9B-4A40-99C8-E82B95620C41"></a><h3 id="OLSAG-GUID-8BDF4EA4-4A9B-4A40-99C8-E82B95620C41" class="sect3">步骤6：将策略标签添加到OE.CUSTOMERS表数据</h3>
               <div>
                  <p><code class="codeph">OE</code>用户将策略标签添加到<code class="codeph">ACCOUNT_MGR_ID</code>列中的<code class="codeph">OE.CUSTOMERS</code>表数据。
                  </p>
                  <ol>
                     <li class="stepexpand"><span>以<code class="codeph">OE</code>用户身份连接。</span><div><pre class="oac_no_warn" dir="ltr">connect OE输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>执行以下<code class="codeph">UPDATE</code>语句以将<code class="codeph">GLOBAL_SALES</code> （ <code class="codeph">GS</code> ）组应用于<code class="codeph">OE.CUSTOMERS</code> 。</span><div><pre class="oac_no_warn" dir="ltr">UPDATE客户SET ols_col = CHAR_TO_LABEL（'OE_OLS_POL'，'D :: GS'）WHERE UPPER（account_mgr_id）IN（145,147,148,149）;</pre><p>在本说明书中，谁被授权标签标识的用户<code class="codeph">D::GS</code> （史蒂芬金）将有权访问用户可用其行<code class="codeph">account_mgr_id</code> ID是<code class="codeph">145</code> ， <code class="codeph">147</code> ， <code class="codeph">148</code>和<code class="codeph">149</code> 。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>为销售经理执行以下<code class="codeph">UPDATE</code>语句。</span><div>对于欧洲销售经理Alberto Errazuriz，他的ID为<code class="codeph">147</code> ：<pre class="oac_no_warn" dir="ltr">UPDATE客户SET ols_col = CHAR_TO_LABEL（'OE_OLS_POL'，'D :: EU'）WHERE UPPER（account_mgr_id）= 147;</pre><p>对于亚洲销售经理Gerald Cambrault，他的ID为<code class="codeph">148</code> ：</p><pre class="oac_no_warn" dir="ltr">UPDATE客户SET ols_col = CHAR_TO_LABEL（'OE_OLS_POL'，'D :: AS'）WHERE UPPER（account_mgr_id）= 148;</pre><p>对于美国销售经理John Russell，他的ID是<code class="codeph">145</code> ：</p><pre class="oac_no_warn" dir="ltr">UPDATE客户SET ols_col = CHAR_TO_LABEL（'OE_OLS_POL'，'D :: US1'）WHERE UPPER（account_mgr_id）= 145;</pre><p>对于美国销售经理Elena Zlotkey，他的ID为<code class="codeph">149</code> ：</p><pre class="oac_no_warn" dir="ltr">UPDATE客户SET ols_col = CHAR_TO_LABEL（'OE_OLS_POL'，'D :: US2'）WHERE UPPER（account_mgr_id）= 149;</pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-groups.html#GUID-56EE2FFD-C3D1-41B0-9CE4-C0DFF0C94E45" title="本教程演示如何创建具有四个子组的Oracle Label Security父组。">教程：在Oracle Label Security中配置组</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-C02BBF27-D7C9-4ECB-9954-9AC10E610F83" name="GUID-C02BBF27-D7C9-4ECB-9954-9AC10E610F83"></a><h3 id="OLSAG-GUID-C02BBF27-D7C9-4ECB-9954-9AC10E610F83" class="sect3">步骤7：测试Oracle Label Security Policy</h3>
               <div>
                  <p>要测试策略，每个用户都将查询<code class="codeph">OE.CUSTOMERS</code>表。
                  </p>
                  <ol>
                     <li class="stepexpand"><span>以用户Alberto Errazuriz连接。</span><div><pre class="oac_no_warn" dir="ltr">connect aerrazuriz输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>设置表输出的列宽。</span><div><pre class="oac_no_warn" dir="ltr">列cust_first_name格式a25列cust_last_name格式a25列ols_label格式a10</pre></div>
                     </li>
                     <li class="stepexpand"><span>执行以下查询：</span><div><pre class="oac_no_warn" dir="ltr">选择CUST_FIRST_NAME，CUST_LAST_NAME，ACCOUNT_MGR_ID，LABEL_TO_CHAR（OLS_COL）OLS_LABEL来自OE.CUSTOMERS ORDER by OLS_COL;</pre><p>输出应类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">CUST_FIRST_NAME CUST_LAST_NAME ACCOUNT_MGR_ID OLS_LABEL ------------------------- --------------------- ---- -------------- ---------- Hal Olin 147 D :: EU Hannah Kanth 147 D :: EU Hannah Field 147 D :: EU Margret Powell 147 D :: EU Harry Mean Taylor 147 D :: EU Margrit Garner 147 D :: EU Maria Warden 147 D :: EU Marilou Landis 147 D :: EU ...选择了76行。</pre><p>由于Alberto Errazuriz被指定为<code class="codeph">EU</code>集团的<code class="codeph">D</code>级，因此输出为<code class="codeph">D:EU</code> 。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>对其他销售经理重复此查询：</span><div>
                           <ul id="GUID-C02BBF27-D7C9-4ECB-9954-9AC10E610F83__UL_Z4Y_ZTH_5GB" style="list-style-type:disc">
                              <li>亚洲销售经理Gerald Cambrault（ <code class="codeph">gcambrault</code> ），其在<code class="codeph">OLS_LABEL</code>列中的输出应为<code class="codeph">D:AS</code> ，返回58行。
                              </li>
                              <li>美国销售经理John Russell（ <code class="codeph">jrussell</code> ），其<code class="codeph">OLS_LABEL</code>列中的输出应为<code class="codeph">D:US1</code> ，返回111行。
                              </li>
                              <li>Elena Zlotkey（ <code class="codeph">ezlotkey</code> ），其在<code class="codeph">OLS_LABEL</code>列中的输出应为<code class="codeph">D:US2</code> ，返回74行。
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li class="stepexpand"><span>作为总统史蒂芬金连接。</span><div><pre class="oac_no_warn" dir="ltr">connect sking输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>执行查询。</span><div><pre class="oac_no_warn" dir="ltr">选择CUST_FIRST_NAME，CUST_LAST_NAME，ACCOUNT_MGR_ID，LABEL_TO_CHAR（OLS_COL）OLS_LABEL来自OE.CUSTOMERS ORDER by OLS_COL;</pre><p>输出应类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">CUST_FIRST_NAME CUST_LAST_NAME ACCOUNT_MGR_ID OLS_LABEL ------------------------- --------------------- ---- -------------- ---------- Kelly Lange 147 D ::欧盟Kenneth Redford 147 D ::欧洲里克里昂147 D ::欧盟Mammutti Sutherland 147 D :: EU Margaret Ustinov 147 D :: EU Kevin Cleveland 147 D :: EU Klaus Maria Russell 147 D :: EU Kris de Niro 147 D :: EU Alain Barkin 147 D :: EU Albert Dutt 147 D :: EU Amanda Finney 147 D ::欧盟......Dom McQueen 149 D :: US2 Dom Hoskins 149 D :: US2 Don Siegel 149 D :: US2 Gvtz Bradford 149 D :: US2 Holly Kurosawa 149 D :: US2 Rob MacLaine 149 D :: US2 Don Barkin 149 D :: US2 Meg森149 D :: US2 ......选择了319行。</pre><p>由于Steven King被分配了<code class="codeph">GS</code>父组，因此<code class="codeph">OLS_LABEL</code>列中的输出包括所有四个子组： <code class="codeph">D::EU</code> ， <code class="codeph">D::AS</code> ， <code class="codeph">D::US1</code>和<code class="codeph">D::US2</code> 。
                           </p>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-groups.html#GUID-56EE2FFD-C3D1-41B0-9CE4-C0DFF0C94E45" title="本教程演示如何创建具有四个子组的Oracle Label Security父组。">教程：在Oracle Label Security中配置组</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-7FDFACBC-C478-48A7-A929-8D36013DF571" name="GUID-7FDFACBC-C478-48A7-A929-8D36013DF571"></a><h3 id="OLSAG-GUID-7FDFACBC-C478-48A7-A929-8D36013DF571" class="sect3">步骤8：（可选）删除Oracle Label Security Policy Components</h3>
               <div>
                  <p>您可以删除Oracle Label Security策略， <code class="codeph">OE_CUST</code>角色和用户帐户。
                  </p>
                  <ol>
                     <li class="stepexpand"><span>以可以创建和管理Oracle Label Security策略的用户身份进行连接。</span><div>例如：<pre class="oac_no_warn" dir="ltr">sqlplus psmith_ols输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>删除Oracle Label Security策略。</span><div>此过程还会删除级别，组以及<code class="codeph">OE.CUSTOMERS</code>表中的<code class="codeph">OLS_COL</code>列。
                        </div>
                        <div><pre class="oac_no_warn" dir="ltr">BEGIN SA_SYSDBA.DROP_POLICY（policy_name =&gt;'OE_OLS_POL'，drop_column =&gt; TRUE）;结束; /</pre></div>
                     </li>
                     <li class="stepexpand"><span>以具有删除角色和用户帐户权限的用户身份进行连接。</span><div>例如：<pre class="oac_no_warn" dir="ltr">connect sec_admin输入密码： <span class="italic">密码</span></pre></div>
                     </li>
                     <li class="stepexpand"><span>放弃<code class="codeph">OE_CUST</code>角色。</span><div><pre class="oac_no_warn" dir="ltr">DROP ROLE OE_CUST;</pre></div>
                     </li>
                     <li class="stepexpand"><span>删除用户帐户。</span><div><pre class="oac_no_warn" dir="ltr">DROP USER SKING; DROP USER AERRAZURIZ; DROP USER GCAMBRAULT; DROP USER JRUSSELL; DROP USER EZLOTKEY;</pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-ols-groups.html#GUID-56EE2FFD-C3D1-41B0-9CE4-C0DFF0C94E45" title="本教程演示如何创建具有四个子组的Oracle Label Security父组。">教程：在Oracle Label Security中配置组</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
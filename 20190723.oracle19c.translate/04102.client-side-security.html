<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>JDBC客户端安全功能</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="JDBC Developer&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="JDBC Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="jdbc-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-13T13:20:37-08:00"></meta>
      <meta name="dcterms.title" content="JDBC Developer&#39;s Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96471-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="data-sources-and-URLs.html" title="Previous" type="text/html"></link>
      <link rel="next" href="proxy-authentication.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="JJDBC"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="data-sources-and-URLs.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="proxy-authentication.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">JDBC开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="connection-and-security.html" property="item" typeof="WebPage"><span property="name">连接和安全</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">JDBC客户端安全功能</li>
            </ol>
            <a id="GUID-45DF369A-3C7E-4D4F-8432-B8A44961DC58" name="GUID-45DF369A-3C7E-4D4F-8432-B8A44961DC58"></a><a id="JJDBC28295"></a>
            
            <h2 id="JJDBC-GUID-45DF369A-3C7E-4D4F-8432-B8A44961DC58" class="sect2"><span class="enumeration_chapter">9</span> JDBC客户端安全功能</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章讨论Oracle Java数据库连接（JDBC）Oracle调用接口（OCI）和JDBC Thin驱动程序中的支持，用于登录身份验证，数据加密和数据完整性，特别是有关Oracle Advanced Security选项功能的支持。</p>
               <div class="infoboxnote" id="GUID-45DF369A-3C7E-4D4F-8432-B8A44961DC58__GUID-217B2316-B4E6-4926-81DB-22DD13AE7804">
                  <p class="notep1">注意：</p>
                  <p>此讨论与服务器端内部驱动程序无关，因为通过服务器端内部驱动程序的所有通信都完全在服务器内部。</p>
               </div>
               <p>Oracle Advanced Security（以前称为高级网络选件（ANO）或高级安全选件（ASO））提供基于行业标准的数据加密，数据完整性，第三方身份验证，单点登录和访问授权。从Oracle Database <span class="italic">11g</span>第1版开始，JDBC OCI和JDBC Thin驱动程序都支持所有Oracle Advanced Security功能。
               </p>
               <div class="infoboxnote" id="GUID-45DF369A-3C7E-4D4F-8432-B8A44961DC58__GUID-6A1D5CA2-12E4-4B6F-85C2-6ECB259413D6">
                  <p class="notep1">注意：</p>
                  <p>如果要使用JDBC <code class="codeph">ojdbc.policy</code>的安全策略文件，则可以从以下链接下载该文件：</p>
                  <p><a href="http://www.oracle.com/technetwork/index.html" target="_blank">http://www.oracle.com/technetwork/index.html</a></p>
                  <p><code class="codeph">ojdbc.policy</code>文件包含在Java安全管理器的控制环境中运行应用程序所需的已授予权限。您可以将此文件本身用作Java策略文件，也可以从此文件获取内容并在Java策略文件中添加内容。此文件包含以下权限：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>一些始终需要的强制权限，例如，权限<code class="codeph">java.util.PropertyPermission“user.name”，“read”;</code></p>
                     </li>
                     <li>
                        <p>一些特定于驱动程序的权限，例如，JDBC OCI驱动程序需要权限<code class="codeph">java.lang.RuntimePermission“loadLibrary.ocijdbc12”;</code></p>
                     </li>
                     <li>
                        <p>一些基于功能的权限，例如，与XA，XDB，FCF等相关的权限</p>
                     </li>
                  </ul>
                  <p>您可以根据需要设置文件中提到的系统属性或权限的直接值。</p>
               </div>
               <p>本章包含以下部分：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="client-side-security.html#GUID-8010464D-A3E9-49AC-98FD-F588A0C2EE9B">支持Oracle Advanced Security</a></p>
                  </li>
                  <li>
                     <p><a href="client-side-security.html#GUID-14F188F6-C9EA-4B4C-A8A4-2C4FDFD94F35">支持登录验证</a></p>
                  </li>
                  <li>
                     <p><a href="client-side-security.html#GUID-6EB42556-EEB8-44BD-AB74-A37778C02B0F">支持强身份验证</a></p>
                  </li>
                  <li>
                     <p><a href="client-side-security.html#GUID-42C16CD9-62D3-4141-BB38-015627A49079">支持数据加密和完整性</a></p>
                  </li>
                  <li>
                     <p><a href="client-side-security.html#GUID-2BD2F189-A58C-4A85-8524-CFD9BB9AC575">支持SSL</a></p>
                  </li>
                  <li>
                     <p><a href="client-side-security.html#GUID-97E88D18-B590-4313-87B8-EE422DA644B3">支持Kerberos</a></p>
                  </li>
                  <li>
                     <p><a href="client-side-security.html#GUID-5748543A-EA85-4263-93C8-A79B2D5DBB8C">支持RADIUS</a></p>
                  </li>
                  <li>
                     <p><a href="client-side-security.html#GUID-4DED9706-6735-4786-B70C-4D35C8DFE9E5">关于安全外部密码存储</a></p>
                  </li>
               </ul>
            </div><a id="JJDBC28296"></a><div class="props_rev_3"><a id="GUID-8010464D-A3E9-49AC-98FD-F588A0C2EE9B" name="GUID-8010464D-A3E9-49AC-98FD-F588A0C2EE9B"></a><h3 id="JJDBC-GUID-8010464D-A3E9-49AC-98FD-F588A0C2EE9B" class="sect3"><span class="enumeration_section">9.1</span>支持Oracle Advanced Security</h3>
               <div>
                  <p>本节介绍以下概念：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="client-side-security.html#GUID-66534F91-8FDB-4572-A9C4-DD61BB985E04">Oracle Advanced Security概述</a></p>
                     </li>
                     <li>
                        <p><a href="client-side-security.html#GUID-25BFBE7B-E808-4DB3-87F5-EEA9B94D8068">JDBC OCI驱动程序支持Oracle Advanced Security</a></p>
                     </li>
                     <li>
                        <p><a href="client-side-security.html#GUID-A534B437-7F9F-488E-B8D6-51334294FB3F">JDBC精简驱动程序支持Oracle Advanced Security</a></p>
                     </li>
                  </ul>
               </div>
               <div class="props_rev_3"><a id="GUID-66534F91-8FDB-4572-A9C4-DD61BB985E04" name="GUID-66534F91-8FDB-4572-A9C4-DD61BB985E04"></a><h4 id="JJDBC-GUID-66534F91-8FDB-4572-A9C4-DD61BB985E04" class="sect4"><span class="enumeration_section">9.1.1</span> Oracle Advanced Security概述</h4>
                  <div>
                     <p>Oracle Advanced Security提供以下安全功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>数据加密</p>
                           <p>通过使用加密算法可以保护通过企业网络和因特网传送的敏感信息，加密算法将信息转换为只能用解密密钥解密的形式。一些支持的加密算法是RC4，DES，3DES和AES。</p>
                           <p>为确保传输过程中的数据完整性，Oracle Advanced Security会生成加密安全的消息摘要。从Oracle Database <span class="italic">12c</span>第1版（12.1）开始，还支持SHA-2散列算法列表，Oracle Advanced Security使用以下散列算法生成安全消息摘要，并将其包含在通过网络发送的每条消息中。
                           </p>
                           <p>这可以保护传输的数据免受攻击，例如数据修改，删除的数据包和重放攻击。</p>
                           <p>以下代码段显示了如何使用前面提到的任何算法计算校验和：</p><pre class="oac_no_warn" dir="ltr">prop.setProperty（的OracleConnection。CONNECTION_PROPERTY_THIN_NET_CHECKSUM_TYPES，“（SHA1）”）; prop.setProperty（的OracleConnection。CONNECTION_PROPERTY_THIN_NET_CHECKSUM_LEVEL，“REQUIRED”）;</pre></li>
                        <li>
                           <p>强认证</p>
                           <p>为确保分布式环境中的网络安全，必须对用户进行身份验证并检查其凭据。密码验证是最常用的验证方式。Oracle数据库支持对Oracle身份验证适配器进行强身份验证，后者支持各种第三方身份验证服务，包括带有数字证书的SSL。Oracle数据库支持以下行业标准身份验证方法：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>Kerberos的</p>
                              </li>
                              <li>
                                 <p>远程身份验证拨入用户服务（RADIUS）</p>
                              </li>
                              <li>
                                 <p>安全套接字层（SSL）</p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-66534F91-8FDB-4572-A9C4-DD61BB985E04__GUID-D9CB3DC4-A47A-4F4D-AECB-90D1C873BF2D">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../dbseg/introduction-to-oracle-database-security.html#DBSEG001" target="_blank"><span class="italic">Oracle数据库安全指南</span></a></p>
                     </div>
                  </div>
               </div><a id="JJDBC28301"></a><a id="JJDBC28299"></a><div class="props_rev_3"><a id="GUID-25BFBE7B-E808-4DB3-87F5-EEA9B94D8068" name="GUID-25BFBE7B-E808-4DB3-87F5-EEA9B94D8068"></a><h4 id="JJDBC-GUID-25BFBE7B-E808-4DB3-87F5-EEA9B94D8068" class="sect4"><span class="enumeration_section">9.1.2</span> Oracle OCI驱动程序支持Oracle Advanced Security</h4>
                  <div>
                     <div class="section">
                        <p>如果您使用的是JDBC OCI驱动程序（假设您从安装了Oracle客户端的计算机上运行），那么对Oracle Advanced Security和所包含的第三方功能的支持与任何Oracle客户端情况下提供的支持非常相似。您对高级安全性功能的使用由客户端计算机上<code class="codeph">sqlnet.ora</code>文件中的相关设置决定。
                        </p>
                        <div class="infoboxnote" id="GUID-25BFBE7B-E808-4DB3-87F5-EEA9B94D8068__GUID-549895DA-B7B7-48F3-8728-A624309275AD">
                           <p class="notep1">注意：</p>
                           <p>从Oracle Database 12 <span class="italic">c</span>第1版（12.1）开始，Oracle建议您使用新XML配置文件<code class="codeph">oraaccess.xml</code>中的配置参数，而不是<code class="codeph">sqlnet.ora</code>文件中存在的OCI特定配置参数。但是，仍支持<code class="codeph">sqlnet.ora</code>文件中存在的配置参数。
                           </p>
                        </div>
                        <p>从Oracle Database <span class="italic">11g</span>第1版开始，如果尝试在不提供密码的情况下连接到数据库，则JDBC OCI驱动程序会尝试使用外部身份验证。以下是使用JDBC OCI驱动程序连接到数据库而不提供密码的一些示例：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-25BFBE7B-E808-4DB3-87F5-EEA9B94D8068__GUID-BE8916EC-CAE7-41C5-8750-7B9AC8473277">SSL身份验证</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下代码段显示了如何使用SSL身份验证连接到数据库：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-25BFBE7B-E808-4DB3-87F5-EEA9B94D8068__CIHDEFCI">
                        <p class="titleinexample">示例9-1使用SSL身份验证连接到数据库</p><pre class="oac_no_warn" dir="ltr">import java.sql。*; import java.util。性能; public class test {public static void main（String [] args）throws Exception {String url =“jdbc：oracle：oci：@”+“（DESCRIPTION =（ADDRESS =（PROTOCOL = tcps）（HOST = localhost）（PORT = 5221））“+”（CONNECT_DATA =（SERVICE_NAME = orcl）））“;驱动程序驱动程序=新的oracle.jdbc。一个OracleDriver（）;属性props = new Properties（）; Connection conn = driver.connect（url，props）; conn.close（）; }}</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-25BFBE7B-E808-4DB3-87F5-EEA9B94D8068__GUID-1707D98A-0931-4D04-B502-C8FCF0EF56E5">使用数据源</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下代码段显示了如何使用数据源连接到数据库：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-25BFBE7B-E808-4DB3-87F5-EEA9B94D8068__CIHHIJEA">
                        <p class="titleinexample">示例9-2使用数据源连接到数据库</p><pre class="oac_no_warn" dir="ltr">import java.sql。*; import javax.sql。*; import java.util。性能; import oracle.jdbc.pool。*; public class testpool {public static void main（String args）throws Exception {String url =“jdbc：oracle：oci：@”+“（DESCRIPTION =（ADDRESS =（PROTOCOL = tcps）（HOST = localhost）（PORT = 5221） ）“+”（CONNECT_DATA =（SERVICE_NAME = orcl）））“; OracleConnectionPoolDataSource ocpds = new OracleConnectionPoolDataSource（）; ocpds.setURL（URL）; PooledConnection pc = ocpds.getPooledConnection（）;连接conn = pc.getConnection（）; }}</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnote" id="GUID-25BFBE7B-E808-4DB3-87F5-EEA9B94D8068__GUID-9F5ABDDE-FC93-4A2F-8AB0-AFCC1BADD0F8">
                           <p class="notep1">注意：</p>
                           <p>前面关于Java的关键例外是，只有在应用程序中使用本机线程时，Oracle JDBC OCI驱动程序才支持安全套接字层（SSL）协议。这需要特别注意，因为绿色线程通常是默认的。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-A534B437-7F9F-488E-B8D6-51334294FB3F" name="GUID-A534B437-7F9F-488E-B8D6-51334294FB3F"></a><h4 id="JJDBC-GUID-A534B437-7F9F-488E-B8D6-51334294FB3F" class="sect4"><span class="enumeration_section">9.1.3</span>对Oracle Advanced Security的JDBC瘦驱动程序支持</h4>
                  <div>
                     <div class="section">
                        <p>JDBC Thin驱动程序不能假定存在Oracle客户端安装或存在<code class="codeph">sqlnet.ora</code>文件。因此，它使用Java方法来支持Oracle Advanced Security。实现Oracle Advanced Security的Java类包含在<code class="codeph">ojdbc6.jar</code>和<code class="codeph">ojdbc7.jar</code>文件中。通常在<code class="codeph">sqlnet.ora</code>文件中设置的加密和完整性的安全性参数是使用Java <code class="codeph">Properties</code>对象或系统属性设置的。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="JJDBC28303"></a><div class="props_rev_3"><a id="GUID-14F188F6-C9EA-4B4C-A8A4-2C4FDFD94F35" name="GUID-14F188F6-C9EA-4B4C-A8A4-2C4FDFD94F35"></a><h3 id="JJDBC-GUID-14F188F6-C9EA-4B4C-A8A4-2C4FDFD94F35" class="sect3"><span class="enumeration_section">9.2</span>支持登录验证</h3>
               <div>
                  <p>通过JDBC进行的基本登录验证由用户名和密码组成，与登录Oracle服务器的任何其他方式一样。通过Java属性对象或直接通过<code class="codeph">getConnection</code>方法调用指定用户名和密码。无论您使用哪个客户端Oracle JDBC驱动程序，这都适用，但如果您使用服务器端内部驱动程序（使用特殊的直接连接并且不需要用户名或密码）则无关紧要。
                  </p>
                  <p>从Oracle Database 12 <span class="italic">c</span>第1版（12.1.0.2）开始，当您使用JDK（例如支持<code class="codeph">PBKDF2-SHA2</code>算法的JDK）运行应用程序时，Oracle JDBC Thin驱动程序支持<code class="codeph">O7L_MR</code>客户端功能。如果您使用JDK 7运行应用程序，则必须添加支持<code class="codeph">PBKDF2-SHA2</code>算法的第三方安全提供程序，否则驱动程序将不支持需要<code class="codeph">O7L_MR</code>客户端功能的新<code class="codeph">12a</code>密码验证程序。
                  </p>
                  <p>如果您使用Oracle Database 12 <span class="italic">c</span>第1版（12.1.0.2）并将<code class="codeph">SQLNET.ALLOWED_LOGON_VERSION_SERVER</code>参数设置为<code class="codeph">12a</code> ，那么请记住以下几点：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您还必须将12.1.0.2 Oracle JDBC Thin驱动程序和JDK 8或JDK 7与支持<code class="codeph">PBKDF2-SHA2</code>算法的第三方安全提供程序一起使用</p>
                     </li>
                     <li>
                        <p>如果使用早期版本的Oracle JDBC Thin驱动程序，则会出现以下错误：</p><pre class="oac_no_warn" dir="ltr">ORA-28040：没有匹配的身份验证协议</pre></li>
                     <li>
                        <p>如果您将12.1.0.2 Oracle JDBC Thin驱动程序与JDK 7一起使用，那么如果您不添加支持<code class="codeph">PBKDF2-SHA2</code>算法的第三方安全提供程序，您也会收到相同的错误。
                        </p>
                     </li>
                  </ul>
               </div>
            </div><a id="JJDBC28304"></a><div class="props_rev_3"><a id="GUID-6EB42556-EEB8-44BD-AB74-A37778C02B0F" name="GUID-6EB42556-EEB8-44BD-AB74-A37778C02B0F"></a><h3 id="JJDBC-GUID-6EB42556-EEB8-44BD-AB74-A37778C02B0F" class="sect3"><span class="enumeration_section">9.3</span>支持强身份验证</h3>
               <div>
                  <p>Oracle Advanced Security使Oracle数据库用户能够在外部进行身份验证。外部身份验证可以使用RADIUS，Kerberos，基于证书的身份验证，令牌卡和智能卡。这称为强身份验证。Oracle JDBC驱动程序支持以下强身份验证方法：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>Kerberos的</p>
                     </li>
                     <li>
                        <p>半径</p>
                     </li>
                     <li>
                        <p>SSL（基于证书的身份验证）</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-6EB42556-EEB8-44BD-AB74-A37778C02B0F__GUID-7DAE99B2-C4B5-4678-A29D-22A3C6C46C74">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../netrf/index.html" target="_blank"><span><cite>Oracle数据库网络服务参考</cite></span></a></p>
                  </div>
               </div>
            </div><a id="JJDBC28309"></a><div class="props_rev_3"><a id="GUID-42C16CD9-62D3-4141-BB38-015627A49079" name="GUID-42C16CD9-62D3-4141-BB38-015627A49079"></a><h3 id="JJDBC-GUID-42C16CD9-62D3-4141-BB38-015627A49079" class="sect3"><span class="enumeration_section">9.4</span>支持数据加密和完整性</h3>
               <div>
                  <p>本节介绍以下概念：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="client-side-security.html#GUID-1E6AF182-44C3-4CFE-8DA9-2735A651E4B3">JDBC支持数据加密和完整性概述</a></p>
                     </li>
                     <li>
                        <p><a href="client-side-security.html#GUID-DA1DB155-D904-4D6D-9376-C499BF6EFC61">JDBC OCI驱动程序支持加密和完整性</a></p>
                     </li>
                     <li>
                        <p><a href="client-side-security.html#GUID-D04ABE6D-2529-4C60-9EDD-3A966B43ECFB">JDBC瘦驱动程序支持加密和完整性</a></p>
                     </li>
                     <li>
                        <p><a href="client-side-security.html#GUID-0B53FC61-E77F-4CE3-BF27-17B249A1CD7B">在Java中设置加密和完整性参数</a></p>
                     </li>
                  </ul>
               </div><a id="JJDBC28310"></a><div class="props_rev_3"><a id="GUID-1E6AF182-44C3-4CFE-8DA9-2735A651E4B3" name="GUID-1E6AF182-44C3-4CFE-8DA9-2735A651E4B3"></a><h4 id="JJDBC-GUID-1E6AF182-44C3-4CFE-8DA9-2735A651E4B3" class="sect4"><span class="enumeration_section">9.4.1</span>数据加密和完整性的JDBC支持概述</h4>
                  <div>
                     <p>您可以在Java数据库应用程序中使用Oracle数据库和Oracle Advanced Security数据加密和完整性功能，具体取决于服务器中的相关设置。使用JDBC OCI驱动程序时，请像在任何Oracle客户端情况中一样设置参数。使用Thin驱动程序时，请通过Java属性对象设置参数。</p>
                     <p>基于客户端加密级别设置和服务器端加密级别设置的组合启用或禁用加密。同样，基于客户端完整性级别设置和服务器端完整性级别设置的组合，启用或禁用完整性。</p>
                     <p>加密和完整性支持相同的设置级别， <code class="codeph">REJECTED</code> ， <code class="codeph">ACCEPTED</code> ， <code class="codeph">REQUESTED</code>和<code class="codeph">REQUIRED</code> 。 <a href="client-side-security.html#GUID-1E6AF182-44C3-4CFE-8DA9-2735A651E4B3__G1029740" title="表">表9-1</a>显示了客户端和服务器端的这些可能设置如何组合以启用或禁用该功能。默认情况下，出于安全原因，在数据库中禁用远程OS身份验证（通过TCP）。
                     </p>
                     <div class="tblformal" id="GUID-1E6AF182-44C3-4CFE-8DA9-2735A651E4B3__G1029740">
                        <p class="titleintable">表9-1加密或完整性的客户端/服务器协商</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="加密或完整性的客户端/服务器协商" width="100%" border="1" summary="table" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="25%" id="d36818e580">客户端/服务器设置矩阵</th>
                                 <th align="left" valign="bottom" width="19%" id="d36818e582">客户拒绝</th>
                                 <th align="left" valign="bottom" width="19%" id="d36818e585">客户接受（默认）</th>
                                 <th align="left" valign="bottom" width="19%" id="d36818e588">客户要求</th>
                                 <th align="left" valign="bottom" width="19%" id="d36818e591">客户要求</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d36818e596" headers="d36818e580 ">
                                    <p><span class="bold">服务器被拒绝</span></p>
                                 </td>
                                 <td align="left" valign="top" width="19%" headers="d36818e596 d36818e582 ">
                                    <p>关闭</p>
                                 </td>
                                 <td align="left" valign="top" width="19%" headers="d36818e596 d36818e585 ">
                                    <p>关闭</p>
                                 </td>
                                 <td align="left" valign="top" width="19%" headers="d36818e596 d36818e588 ">
                                    <p>关闭</p>
                                 </td>
                                 <td align="left" valign="top" width="19%" headers="d36818e596 d36818e591 ">
                                    <p>连接失败</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d36818e613" headers="d36818e580 ">
                                    <p><span class="bold">服务器已接受（默认）</span></p>
                                 </td>
                                 <td align="left" valign="top" width="19%" headers="d36818e613 d36818e582 ">
                                    <p>关闭</p>
                                 </td>
                                 <td align="left" valign="top" width="19%" headers="d36818e613 d36818e585 ">
                                    <p>关闭</p>
                                 </td>
                                 <td align="left" valign="top" width="19%" headers="d36818e613 d36818e588 ">
                                    <p>上</p>
                                 </td>
                                 <td align="left" valign="top" width="19%" headers="d36818e613 d36818e591 ">
                                    <p>上</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d36818e630" headers="d36818e580 ">
                                    <p><span class="bold">服务器请求</span></p>
                                 </td>
                                 <td align="left" valign="top" width="19%" headers="d36818e630 d36818e582 ">
                                    <p>关闭</p>
                                 </td>
                                 <td align="left" valign="top" width="19%" headers="d36818e630 d36818e585 ">
                                    <p>上</p>
                                 </td>
                                 <td align="left" valign="top" width="19%" headers="d36818e630 d36818e588 ">
                                    <p>上</p>
                                 </td>
                                 <td align="left" valign="top" width="19%" headers="d36818e630 d36818e591 ">
                                    <p>上</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d36818e647" headers="d36818e580 ">
                                    <p><span class="bold">服务器必需</span></p>
                                 </td>
                                 <td align="left" valign="top" width="19%" headers="d36818e647 d36818e582 ">
                                    <p>连接失败</p>
                                 </td>
                                 <td align="left" valign="top" width="19%" headers="d36818e647 d36818e585 ">
                                    <p>上</p>
                                 </td>
                                 <td align="left" valign="top" width="19%" headers="d36818e647 d36818e588 ">
                                    <p>上</p>
                                 </td>
                                 <td align="left" valign="top" width="19%" headers="d36818e647 d36818e591 ">
                                    <p>上</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>例如， <a href="client-side-security.html#GUID-1E6AF182-44C3-4CFE-8DA9-2735A651E4B3__G1029740" title="表">表9-1</a>显示，如果客户端请求加密但服务器拒绝加密，则会禁用加密。诚信也是如此。作为另一个示例，如果客户端接受加密并且服务器请求加密，则启用加密。诚信也是如此。
                     </p>
                     <div class="infoboxnotealso" id="GUID-1E6AF182-44C3-4CFE-8DA9-2735A651E4B3__GUID-ECD5B2DB-CECF-4527-A5E7-CB9BF44D4372">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关透明数据加密（TDE）的详细信息，请参见<a href="../asoag/asopart1.html#ASOAG600" target="_blank"><span class="italic">“Oracle数据库高级安全指南”</span></a></p>
                           </li>
                           <li>
                              <p>有关数据加密和完整性功能的更多信息，请参阅<a href="../dbseg/manually-encrypting-data.html#DBSEG008" target="_blank"><span class="italic">“Oracle数据库安全指南”</span></a> ，TDE除外</p>
                           </li>
                        </ul>
                     </div>
                     <div class="infoboxnote" id="GUID-1E6AF182-44C3-4CFE-8DA9-2735A651E4B3__GUID-E130A8E2-9145-449D-BA38-DFD28912EE2B">
                        <p class="notep1">注意：</p>
                        <p>术语校验和仍显示在完整性参数名称中，但不再使用。对于所有意图和目的，校验和和完整性是同义词。</p>
                     </div>
                  </div>
               </div><a id="JJDBC28312"></a><a id="JJDBC28311"></a><div class="props_rev_3"><a id="GUID-DA1DB155-D904-4D6D-9376-C499BF6EFC61" name="GUID-DA1DB155-D904-4D6D-9376-C499BF6EFC61"></a><h4 id="JJDBC-GUID-DA1DB155-D904-4D6D-9376-C499BF6EFC61" class="sect4"><span class="enumeration_section">9.4.2</span> JDBC OCI驱动程序支持加密和完整性</h4>
                  <div>
                     <div class="section">
                        <p>如果您正在使用JDBC OCI驱动程序（假设Oracle客户端设置与Oracle客户端安装），那么您可以通过<code class="codeph">sqlnet.ora</code>设置启用或禁用数据加密或完整性并设置相关参数，就像在任何Oracle客户端情况中一样客户端上的<code class="codeph">sqlnet.ora</code>文件。
                        </p>
                        <div class="infoboxnote" id="GUID-DA1DB155-D904-4D6D-9376-C499BF6EFC61__GUID-2A6EC828-983A-45F9-9D64-73A0626089B7">
                           <p class="notep1">注意：</p>
                           <p>从Oracle Database 12 <span class="italic">c</span>第1版（12.1）开始，Oracle建议您使用新XML配置文件<code class="codeph">oraaccess.xml</code>中的配置参数，而不是<code class="codeph">sqlnet.ora</code>文件中存在的OCI特定配置参数。但是，仍支持<code class="codeph">sqlnet.ora</code>文件中存在的配置参数。
                           </p>
                        </div>
                        <p>总而言之，客户端参数如<a href="client-side-security.html#GUID-DA1DB155-D904-4D6D-9376-C499BF6EFC61__G1029876" title="表">表9-2</a>所示：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformalwide" id="GUID-DA1DB155-D904-4D6D-9376-C499BF6EFC61__G1029876">
                        <p class="titleintable">表9-2加密和完整性的OCI驱动程序客户端参数</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="用于加密和完整性的OCI驱动程序客户端参数" width="100%" border="1" summary="table" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="29%" id="d36818e764">参数说明</th>
                                 <th align="left" valign="bottom" width="51%" id="d36818e767">参数名称</th>
                                 <th align="left" valign="bottom" width="21%" id="d36818e770">可能的设置</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d36818e775" headers="d36818e764 ">
                                    <p>客户端加密级别</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d36818e775 d36818e767 ">
                                    <p><code class="codeph">SQLNET.ENCRYPTION_CLIENT</code></p>
                                 </td>
                                 <td align="left" valign="top" width="21%" headers="d36818e775 d36818e770 ">
                                    <p><code class="codeph">被拒绝被要求接受请求</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d36818e793" headers="d36818e764 ">
                                    <p>客户端加密选择列表</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d36818e793 d36818e767 ">
                                    <p><code class="codeph">SQLNET.ENCRYPTION_TYPES_CLIENT</code></p>
                                 </td>
                                 <td align="left" valign="top" width="21%" headers="d36818e793 d36818e770 ">
                                    <p><code class="codeph">RC4_40</code> ， <code class="codeph">RC4_56</code> ， <code class="codeph">DES</code> ， <code class="codeph">DES40</code> ， <code class="codeph">AES128</code> ， <code class="codeph">AES192</code> ， <code class="codeph">AES256</code> ， <code class="codeph">3DES112</code> ， <code class="codeph">3DES168</code> 
                                    </p>
                                    <p>（见说明）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d36818e833" headers="d36818e764 ">
                                    <p>客户完整性级别</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d36818e833 d36818e767 ">
                                    <p><code class="codeph">SQLNET.CRYPTO_CHECKSUM_CLIENT</code></p>
                                 </td>
                                 <td align="left" valign="top" width="21%" headers="d36818e833 d36818e770 ">
                                    <p><code class="codeph">被拒绝被要求接受请求</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d36818e851" headers="d36818e764 ">
                                    <p>客户端完整性选择列表</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d36818e851 d36818e767 ">
                                    <p><code class="codeph">SQLNET.CRYPTO_CHECKSUM_TYPES_CLIENT</code></p>
                                 </td>
                                 <td align="left" valign="top" width="21%" headers="d36818e851 d36818e770 ">
                                    <p><code class="codeph">MD5</code> ， <code class="codeph">SHA-1</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <div class="infoboxnote" id="GUID-DA1DB155-D904-4D6D-9376-C499BF6EFC61__GUID-93D4A5D2-C7DC-4BF3-AD71-66F47041B692">
                           <p class="notep1">注意：</p>
                           <p>仅对于Oracle Advanced Security国内版，也可以设置<code class="codeph">RC4_128</code>和<code class="codeph">RC4_256</code> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDBC28314"></a><a id="JJDBC28313"></a><div class="props_rev_3"><a id="GUID-D04ABE6D-2529-4C60-9EDD-3A966B43ECFB" name="GUID-D04ABE6D-2529-4C60-9EDD-3A966B43ECFB"></a><h4 id="JJDBC-GUID-D04ABE6D-2529-4C60-9EDD-3A966B43ECFB" class="sect4"><span class="enumeration_section">9.4.3</span> JDBC瘦驱动程序支持加密和完整性</h4>
                  <div>
                     <div class="section">
                        <p>JDBC Thin驱动程序对数据加密和完整性参数设置的支持与前一节中讨论的JDBC OCI驱动程序支持相似。您可以通过在打开数据库连接时可以使用的Java属性对象来设置相应的参数。</p>
                        <p>服务器端和客户端的加密和完整性级别的默认值为<code class="codeph">ACCEPTED</code> 。这使您可以通过仅配置连接的一端（服务器端或客户端）来实现连接对的所需安全级别。这样可以提高程序的效率，因为如果有多个Oracle客户端连接到Oracle Server，则需要在服务器端的<code class="codeph">sqlnet.ora</code>文件中将加密和完整性级别更改为<code class="codeph">REQUESTED</code> ，以启用加密或完整性所有的联系。这样可以节省时间和精力，因为您无需单独更改每个客户端的设置。
                        </p>
                        <p>表9-3列出了JDBC Thin驱动程序的参数信息。这些参数在<code class="codeph">oracle.jdbc.中定义<code class="codeph">oracle.jdbc.OracleConnection</code>接口。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformalwide" id="GUID-D04ABE6D-2529-4C60-9EDD-3A966B43ECFB__G1029900">
                        <p class="titleintable">表9-3加密和完整性的精简驱动程序客户端参数</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="用于加密和完整性的瘦驱动程序客户端参数" width="100%" border="1" summary="This table describes JDBC Thin Driver Client parameters for encryption and integrity." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="53%" id="d36818e943">参数名称</th>
                                 <th align="left" valign="bottom" width="12%" id="d36818e946">参数类型</th>
                                 <th align="left" valign="bottom" width="35%" id="d36818e949">可能的设置</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="53%" id="d36818e954" headers="d36818e943 ">
                                    <p><code class="codeph">CONNECTION_PROPERTY_THIN_NET_ENCRYPTION_LEVEL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d36818e954 d36818e946 ">
                                    <p><code class="codeph">串</code></p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d36818e954 d36818e949 ">
                                    <p><code class="codeph">被拒绝被要求接受请求</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="53%" id="d36818e973" headers="d36818e943 ">
                                    <p><code class="codeph">CONNECTION_PROPERTY_THIN_NET_ENCRYPTION_TYPES</code></p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d36818e973 d36818e946 ">
                                    <p><code class="codeph">串</code></p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d36818e973 d36818e949 ">
                                    <p><code class="codeph">AES256</code> ， <code class="codeph">AES192</code> ， <code class="codeph">AES128</code> ， <code class="codeph">3DES168</code> ， <code class="codeph">3DES112</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="53%" id="d36818e998" headers="d36818e943 ">
                                    <p><code class="codeph">CONNECTION_PROPERTY_THIN_NET_CHECKSUM_LEVEL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d36818e998 d36818e946 ">
                                    <p><code class="codeph">串</code></p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d36818e998 d36818e949 ">
                                    <p><code class="codeph">被拒绝被要求接受请求</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="53%" id="d36818e1017" headers="d36818e943 ">
                                    <p><code class="codeph">CONNECTION_PROPERTY_THIN_NET_CHECKSUM_TYPES</code></p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d36818e1017 d36818e946 ">
                                    <p><code class="codeph">串</code></p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d36818e1017 d36818e949 ">
                                    <p><code class="codeph">SHA1</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <div class="infoboxnote" id="GUID-D04ABE6D-2529-4C60-9EDD-3A966B43ECFB__GUID-7CB2BD75-88C5-46E2-951E-0A912FB469A2">
                           <p class="notep1">注意：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>对Thin驱动程序的Oracle Advanced Security支持直接合并到JDBC类JAR文件中。因此，国内和出口版本没有单独的版本。只能使用适合导出版本的参数设置。</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDBC28316"></a><a id="JJDBC28317"></a><a id="JJDBC28315"></a><div class="props_rev_3"><a id="GUID-0B53FC61-E77F-4CE3-BF27-17B249A1CD7B" name="GUID-0B53FC61-E77F-4CE3-BF27-17B249A1CD7B"></a><h4 id="JJDBC-GUID-0B53FC61-E77F-4CE3-BF27-17B249A1CD7B" class="sect4"><span class="enumeration_section">9.4.4</span>在Java中设置加密和完整性参数</h4>
                  <div>
                     <div class="section">
                        <p>使用Java属性对象，即<code class="codeph">java.util.的实例<code class="codeph">java.util.Properties</code> ，用于设置JDBC Thin驱动程序支持的数据加密和完整性参数。
                        </p>
                        <p>以下示例实例化Java属性对象，使用它来设置表9-3中的每个参数，然后在打开与数据库的连接时使用properties对象：</p><pre class="oac_no_warn" dir="ltr">...属性prop = new Properties（）; prop.setProperty（的OracleConnection。CONNECTION_PROPERTY_THIN_NET_ENCRYPTION_LEVEL，“REQUIRED”）; prop.setProperty（的OracleConnection。CONNECTION_PROPERTY_THIN_NET_ENCRYPTION_TYPES，“（AES256）”）; prop.setProperty（的OracleConnection。CONNECTION_PROPERTY_THIN_NET_CHECKSUM_LEVEL，“REQUESTED”）; prop.setProperty（的OracleConnection。CONNECTION_PROPERTY_THIN_NET_CHECKSUM_TYPES，“（SHA1）”）; OracleDataSource ods = new OracleDataSource（）; ods.setProperties（丙）; ods.setURL（ “JDBC：预言：瘦：@localhost：5221：主”）; Connection conn = ods.getConnection（）; ...
</pre><p>值加密类型和校验和类型周围的括号允许值列表。当提供多个值时，服务器和客户端协商以确定实际使用哪个值。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0B53FC61-E77F-4CE3-BF27-17B249A1CD7B__GUID-21EB66C0-A47A-4861-8FAB-BCE5620C03A9">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>示例9-3是一个完整的类，它在连接到数据库以执行查询之前设置数据加密和完整性参数。</p>
                        <div class="infoboxnote" id="GUID-0B53FC61-E77F-4CE3-BF27-17B249A1CD7B__GUID-26DCA914-3F4F-48AB-A2B1-E1BDE652D9FD">
                           <p class="notep1">注意：</p>
                           <p>在该示例中，通过<code class="codeph">AnoServices</code>和<code class="codeph">Service</code>类的功能动态检索字符串<code class="codeph">REQUIRED</code> 。您可以选择以这种方式检索字符串，也可以将它们包含在软件代码中，如前面的示例所示</p>
                        </div>
                        <p>在运行此示例之前，必须在<code class="codeph">sqlnet.ora</code>文件中启用加密。例如，以下行将为加密启用AES256，AES192和AES128，为校验和启用SHA1：</p><pre class="oac_no_warn" dir="ltr">SQLNET.ENCRYPTION_SERVER = ACCEPTED SQLNET.CRYPTO_CHECKSUM_SERVER = ACCEPTED SQLNET.CRYPTO_CHECKSUM_TYPES_SERVER =（SHA1）SQLNET.ENCRYPTION_TYPES_SERVER =（AES256，AES192，AES128）SQLNET.CRYPTO_SEED = 2z0hslkdharUJCFtkwbjOLbgwsj7vkqt3bGoUylihnvkhgkdsbdskkKGhdk</pre></div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-0B53FC61-E77F-4CE3-BF27-17B249A1CD7B__BABGGGEC">
                        <p class="titleinexample">示例9-3设置数据加密和完整性参数</p><pre class="oac_no_warn" dir="ltr">import java.sql。*; import java.util。性能; import oracle.net.ano。AnoServices; import oracle.jdbc。*; public class DemoAESAndSHA1 {static final String USERNAME =“HR”; static final String PASSWORD =“hr”; static final String URL =“jdbc：oracle：thin：@（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = localhost）（PORT = 5221））”+“（CONNECT_DATA =（SERVICE_NAME = orcl）））”; public static final void main（String [] argv）{DemoAESAndSHA1 demo = new DemoAESAndSHA1（）;试试{demo.run（）; } catch（SQLException ex）{ex.printStackTrace（）; void run（）抛出SQLException {OracleDriver dr = new OracleDriver（）;属性prop = new Properties（）; //我们要求使用AES256或AES192加密连接。//如果数据库不接受这样的安全级别，则连接尝试将失败。prop.setProperty（的OracleConnection。CONNECTION_PROPERTY_THIN_NET_ENCRYPTION_LEVEL，AnoServices。ANO_REQUIRED）; prop.setProperty（的OracleConnection。CONNECTION_PROPERTY_THIN_NET_ENCRYPTION_TYPES，“（”+ AnoServices。ENCRYPTION_AES256 +“，”+ AnoServices。ENCRYPTION_AES192 +“）”）; //我们还需要使用SHA1算法进行数据完整性检查。prop.setProperty（的OracleConnection。CONNECTION_PROPERTY_THIN_NET_CHECKSUM_LEVEL，AnoServices。ANO_REQUIRED）; prop.setProperty（的OracleConnection。CONNECTION_PROPERTY_THIN_NET_CHECKSUM_TYPES，“（”+ AnoServices。CHECKSUM_SHA1 +“）”）; prop.setProperty（ “用户”，DemoAESAndSHA1。用户名）; prop.setProperty（ “密码”，DemoAESAndSHA1。密码）; OracleConnection oraConn =（OracleConnection）dr.connect（DemoAESAndSHA1。URL，道具）; System.out.println（“连接已创建！加密算法是：“+ oraConn.getEncryptionAlgorithmName（）+”，数据完整性算法是：“+ oraConn.getDataIntegrityAlgorithmName（））; oraConn.close（）;}}</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="JJDBC28318"></a><div class="props_rev_3"><a id="GUID-2BD2F189-A58C-4A85-8524-CFD9BB9AC575" name="GUID-2BD2F189-A58C-4A85-8524-CFD9BB9AC575"></a><h3 id="JJDBC-GUID-2BD2F189-A58C-4A85-8524-CFD9BB9AC575" class="sect3"><span class="enumeration_section">9.5</span>支持SSL</h3>
               <div>
                  <p></p>
                  <p>本节介绍以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="client-side-security.html#GUID-6AC4159F-9A89-4DE7-B2F8-6E8AC67109CD">SSL的JDBC支持概述</a></p>
                     </li>
                     <li>
                        <p><a href="client-side-security.html#GUID-A0F5D4B2-C3DE-4DE6-A759-A3BF48450031">关于管理证书和钱包</a></p>
                     </li>
                     <li>
                        <p><a href="client-side-security.html#GUID-92124E19-B017-4500-B72B-608C513FA5BE">关于密钥和证书容器</a></p>
                     </li>
                     <li>
                        <p><a href="client-side-security.html#GUID-89D2363B-DE5E-4FD6-8689-4A069302C076">使用JDBC Thin和JKS的TLS版本1.2上的数据库连接</a></p>
                     </li>
                     <li>
                        <p><a href="client-side-security.html#GUID-0D5B5CBE-A693-41EC-B671-4F2802FEEF49">自动SSL连接配置</a></p>
                     </li>
                     <li>
                        <p><a href="client-side-security.html#GUID-2562DF85-18E7-4B36-8326-0C6FD4FBFFE6">支持密钥存储服务</a></p>
                     </li>
                  </ul>
               </div><a id="JJDBC28320"></a><a id="JJDBC28319"></a><div class="props_rev_3"><a id="GUID-6AC4159F-9A89-4DE7-B2F8-6E8AC67109CD" name="GUID-6AC4159F-9A89-4DE7-B2F8-6E8AC67109CD"></a><h4 id="JJDBC-GUID-6AC4159F-9A89-4DE7-B2F8-6E8AC67109CD" class="sect4"><span class="enumeration_section">9.5.1</span> SSL的JDBC支持概述</h4>
                  <div>
                     <p></p>
                     <p>Oracle Database 19c提供对安全套接字层（SSL）协议的支持。SSL是一种广泛使用的行业标准协议，可通过网络提供安全通信。SSL提供身份验证，数据加密和数据完整性。它为标准TCP / IP协议提供了安全增强，用于Internet通信。</p>
                     <p>SSL使用符合X.509v3标准的数字证书进行身份验证，使用公钥和私钥对进行加密。SSL还使用密钥加密和数字签名来确保数据的隐私性和完整性。启动SSL上的网络连接时，客户端和服务器执行SSL握手，其中包括以下步骤：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>客户端和服务器协商要使用的密码套件。这包括决定用于数据传输的加密算法。</p>
                        </li>
                        <li>
                           <p>服务器将其证书发送到客户端，客户端验证证书是否由受信任的证书颁发机构（CA）签名。此步骤验证服务器的标识。</p>
                        </li>
                        <li>
                           <p>如果需要客户端身份验证，客户端会将自己的证书发送到服务器，服务器会验证证书是否由受信任的CA签名。</p>
                        </li>
                        <li>
                           <p>客户端和服务器使用公钥加密技术交换密钥信息。基于该信息，每个都生成会话密钥。客户端和服务器之间的所有后续通信都使用这组会话密钥和协商的密码套件进行加密和解密。</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-6AC4159F-9A89-4DE7-B2F8-6E8AC67109CD__GUID-F7500150-F5BC-460C-A63E-57749685A0BC">
                        <p class="notep1">注意：</p>在Oracle Database <span class="italic">11g</span>第1版（11.1）中，瘦驱动程序支持SSL身份验证。因此，如果使用SSL身份验证，则无需提供用户名/密码对。
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-6AC4159F-9A89-4DE7-B2F8-6E8AC67109CD__GUID-ED2FDF21-4FF0-4B5E-9406-F5F9BD9B09C8">SSL术语</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>SSL上下文中通常使用以下术语：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">证书</span> ：证书是一种数字签名文档，用于将公钥与实体绑定。证书可用于验证公钥是否属于该个人。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">证书颁发机构</span> ：证书颁发机构（CA），也称为证书颁发机构，是颁发数字签名证书以供其他方使用的实体。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">密码套件</span> ：密码套件是一组加密算法和密钥大小，用于加密通过启用SSL的网络发送的数据。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">私钥</span> ：私钥是一个秘密密钥，永远不会通过网络传输。私钥用于解密使用相应公钥加密的消息。它还用于签署证书。使用相应的公钥验证证书。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">公钥</span> ：公钥是一种加密密钥，可以通过普通方式（如电子邮件）公开或发送。公钥用于加密通过SSL发送的消息。它还用于验证由相应私钥签名的证书。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">密钥库或钱包</span> ：钱包是受密码保护的容器，用于存储身份验证和签名凭据，包括SSL所需的私钥，证书和可信证书。</p>
                           </li>
                           <li>
                              <p><span class="bold">安全提供程序</span> ：一种Java实现，提供与安全性相关的一些功能。提供者负责解码密钥库文件。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">密钥库服务（KSS）</span> ：Oracle Platform Security服务的一个组件。KSS允许将密钥库引用为具有<code class="codeph">kss://</code>方案的URI（而不是文件名）。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6AC4159F-9A89-4DE7-B2F8-6E8AC67109CD__GUID-888B877C-B167-48FC-B233-DE6F63013070">Java版的SSL</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Java安全套接字扩展（JSSE）为Java版本的SSL和TLS协议提供框架和实现。JSSE为数据加密，服务器和客户端身份验证以及消息完整性提供支持。它抽象了复杂的安全算法和握手机制，并通过为应用程序开发人员提供构建块来简化应用程序开发，他们可以直接将这些构建块集成到他们的应用程序中。JSSE已集成到Java Development Kit（JDK）1.4及更高版本中，并支持SSL版本2.0和3.0。</p>
                        <p>Oracle强烈建议您在Oracle JDBC驱动程序中使用SSL之前清楚地了解JavaTM安全套接字扩展（JSSE）框架。</p>
                        <p>JSSE标准应用程序编程接口（API）可在<code class="codeph">javax.net</code> ， <code class="codeph">javax.net.ssl</code>和<code class="codeph">javax.security.cert</code>包中找到。这些包提供用于创建和配置套接字，服务器套接字，SSL套接字和SSL服务器套接字的类。这些包还提供了一个用于安全HTTP连接的类，一个与基于JDK1.1的平台兼容的公钥证书API，以及用于密钥和信任管理器的接口。
                        </p>
                        <p>SSL的工作方式与Oracle Database 18c中的任何网络环境相同。</p>
                        <div class="infoboxnote" id="GUID-6AC4159F-9A89-4DE7-B2F8-6E8AC67109CD__GUID-7D376D61-04A3-4AEF-A7AB-F960C8B136F5">
                           <p class="notep1">注意：</p>为了在程序中使用JSSE，您必须清楚地了解JavaTM安全套接字扩展（JSSE）框架。
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDBC28321"></a><div class="props_rev_3"><a id="GUID-A0F5D4B2-C3DE-4DE6-A759-A3BF48450031" name="GUID-A0F5D4B2-C3DE-4DE6-A759-A3BF48450031"></a><h4 id="JJDBC-GUID-A0F5D4B2-C3DE-4DE6-A759-A3BF48450031" class="sect4"><span class="enumeration_section">9.5.2</span>关于管理证书和钱包</h4>
                  <div>
                     <p>要与JDBC客户端Thin或OCI建立SSL连接，Oracle数据库服务器会发送其证书，该证书存储在其钱包中。客户端可能需要也可能不需要证书或钱包，具体取决于服务器配置。</p>
                     <p>Oracle JDBC Thin驱动程序使用JSSE框架来创建SSL连接。它使用默认提供程序（ <span class="italic">SunJSSE</span> ）来创建SSL上下文。但是，您可以提供自己的提供商。
                     </p>
                     <p>除非在服务器上设置了<code class="codeph">SSL_CLIENT_AUTHENTICATION</code>参数，否则您不需要客户端的证书。
                     </p>
                  </div>
               </div><a id="JJDBC28328"></a><div class="props_rev_3"><a id="GUID-92124E19-B017-4500-B72B-608C513FA5BE" name="GUID-92124E19-B017-4500-B72B-608C513FA5BE"></a><h4 id="JJDBC-GUID-92124E19-B017-4500-B72B-608C513FA5BE" class="sect4"><span class="enumeration_section">9.5.3</span>关于密钥和证书容器</h4>
                  <div>
                     <div class="section">
                        <p>只要提供者可用，Java客户端就可以使用多种类型的容器，例如Oracle钱包，JKS，PKCS12等。对于Oracle钱包<span class="italic">，OraclePKI</span>供应商必须使用，因为<span class="italic">SunJSSE</span>提供商提供的PKCS12支持不支持PKCS12的所有功能。要使用<span class="italic">OraclePKI</span>提供程序，需要以下JAR：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">oraclepki.jar</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">osdt_cert.jar</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">osdt_core.jar</code></p>
                           </li>
                        </ul>
                        <p>所有这些JAR文件都应位于<code class="codeph">$ORACLE_HOME/jlib directory</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-89D2363B-DE5E-4FD6-8689-4A069302C076" name="GUID-89D2363B-DE5E-4FD6-8689-4A069302C076"></a><h4 id="JJDBC-GUID-89D2363B-DE5E-4FD6-8689-4A069302C076" class="sect4"><span class="enumeration_section">9.5.4</span>使用JDBC Thin和JKS在TLS 1.2版上建立数据库连接</h4>
                  <div>
                     <p></p>
                     <p>执行以下步骤以配置Oracle JDBC瘦驱动程序以使用TLS 1.2版连接到数据库：</p>
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>始终使用JDK的最新更新</p>
                              <p>使用JDK 7或JDK 8的最新更新，因为更新的版本包含使用SSL 1.2版所需的错误修复。</p>
                           </li>
                           <li>
                              <p>安装JCE文件</p>
                              <p>安装Java加密扩展（JCE）无限强度管辖区域策略文件，因为无论您使用<code class="codeph">TLS_RSA_WITH_AES_256_CBC_SHA256</code> JDK版本，都不会启用强密码套件（例如<code class="codeph">TLS_RSA_WITH_AES_256_CBC_SHA256</code> ）。您可以从以下页面下载这些文件：</p>
                              <p><a href="http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html" target="_blank">http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html</a></p>
                              <p>此外，如果您使用的是JDK 7，则必须明确启用强密码套件。例如，如果您使用强密码套件（如<code class="codeph">TLS_RSA_WITH_AES_256_CBC_SHA256</code>和JDK 7），则必须通过<code class="codeph">oracle.net.ssl_cipher_suites</code>连接属性启用它。
                              </p>
                           </li>
                           <li>
                              <p>使用JKS文件或钱包</p>
                              <div class="infoboxnote" id="GUID-89D2363B-DE5E-4FD6-8689-4A069302C076__GUID-71D93B80-D58D-4DC5-90BA-87A0D63B600E">
                                 <p class="notep1">注意：</p>
                                 <p>从Oracle Database Release 18c开始，您可以在名为<code class="codeph">ojdbc.properties</code>的新配置文件中指定TLS配置属性。使用此文件可简化与云上数据库服务的连接。
                                 </p>
                              </div>
                              <div class="infoboxnotealso" id="GUID-89D2363B-DE5E-4FD6-8689-4A069302C076__GUID-7B28660A-567E-461D-9A87-A8C61FA9388F">
                                 <p class="notep1">也可以看看：</p><a href="../jajdb/index.html" target="_blank"><span><cite>Oracle数据库JDBC Java API参考</cite></span></a></div>
                           </li>
                        </ul>
                        <p>执行上述所有步骤后，如果遇到更多问题，则可以使用 - <code class="codeph">Djavax.net.debug=all</code>选项启用跟踪来诊断问题。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-0D5B5CBE-A693-41EC-B671-4F2802FEEF49" name="GUID-0D5B5CBE-A693-41EC-B671-4F2802FEEF49"></a><h4 id="JJDBC-GUID-0D5B5CBE-A693-41EC-B671-4F2802FEEF49" class="sect4"><span class="enumeration_section">9.5.5</span>自动SSL连接配置</h4>
                  <div>
                     <p></p>
                     <p>从Oracle Database Release 18c开始，您可以使用默认值或编程逻辑来解析连接配置值，而无需手动添加或更新安全提供程序。您可以通过以下两种方式解析配置值：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="client-side-security.html#GUID-277F9F26-771F-413B-86BF-2BD4C05AF72A">供应商决议</a></p>
                        </li>
                        <li>
                           <p><a href="client-side-security.html#GUID-71648EE2-C4C5-46EA-9C27-D351E7D62CA8">自动密钥库类型（KSS）分辨率</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="sect4"><a id="GUID-277F9F26-771F-413B-86BF-2BD4C05AF72A" name="GUID-277F9F26-771F-413B-86BF-2BD4C05AF72A"></a><h5 id="JJDBC-GUID-277F9F26-771F-413B-86BF-2BD4C05AF72A" class="sect5"><span class="enumeration_section">9.5.5.1</span>提供商解决方案</h5>
                     <div>
                        <p></p>
                        <p>对于某些密钥库类型，JDBC驱动程序可以解析用于加载密钥库的提供程序实现。对于这些类型，没有必要使用Java安全性注册提供程序。只要提供程序实现在<code class="codeph">CLASSPATH</code> ，驱动程序就可以实例化安全提供程序。
                        </p>
                        <p>以下密钥库类型映射到已知提供程序：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">SSO：</span> <code class="codeph">oracle.security.pki.OraclePKIProvider</code></p>
                           </li>
                           <li>
                              <p><span class="bold">KSS：</span> <code class="codeph">oracle.security.jps.internal.keystore.provider.FarmKeyStoreProvider</code></p>
                           </li>
                        </ul>
                        <p>仅当没有为指定类型注册的提供程序时，驱动程序才会尝试解析提供程序。</p>
                        <p>如果<code class="codeph">oraclepki.jar</code>文件位于CLASSPATH上，则驱动程序可以通过以下方式自动加载Oracle PKI Provider：</p><pre class="pre codeblock"><code>java -cp oraclepki.jar：ojdbc8.jar -D javax.net.ssl.keyStore = / path / to / wallet / cwallet.sso MyApp</code></pre><p>同样，对于<code class="codeph">oracle.net.wallet_location</code>连接属性的指定值，驱动程序可以通过以下方式自动加载Oracle PKI Provider：</p><pre class="pre codeblock"><code>java -cp .: oraclepki.jar：ojdbc8.jar -D oracle.net.wallet_location = file：/path/to/wallet/cwallet.sso MyApp</code></pre><div class="infoboxnote" id="GUID-277F9F26-771F-413B-86BF-2BD4C05AF72A__GUID-2C1EAB1B-6BA2-41E1-9314-81FEAB4825D2">
                           <p class="notep1">注意：</p>
                           <p>对于由orapki工具（ <code class="codeph">ewallet.p12</code>文件）创建的PKCS12类型，您可能仍需要使用Java安全性注册<code class="codeph">OraclePKIProvider</code> ，因为orapki工具创建的PKCS12文件包含ASN1 <span class="italic">Key Bag</span>元素（类型代码：1.2.840.113549。 1.12.10.1.1）。Sun PKCS12实现不支持<span class="italic">Key Bag</span>类型，并在尝试读取<code class="codeph">ewallet.p12</code>文件时抛出错误。对于HotSpot和Open JDK用户，Sun Provider捆绑为PKCS12提供程序。这意味着PKCS12提供程序已经有一个已注册的提供程序，驱动程序将不会尝试覆盖它。
                           </p>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-71648EE2-C4C5-46EA-9C27-D351E7D62CA8" name="GUID-71648EE2-C4C5-46EA-9C27-D351E7D62CA8"></a><h5 id="JJDBC-GUID-71648EE2-C4C5-46EA-9C27-D351E7D62CA8" class="sect5"><span class="enumeration_section">9.5.5.2</span>自动密钥存储类型（KSS）解析</h5>
                     <div>
                        <p></p>
                        <p>JDBC驱动程序可以根据<code class="codeph">javax.net.ssl.keyStore</code>和<code class="codeph">javax.net.ssl.trustStore</code>属性的值来解析公共密钥库类型，从而无需使用这些属性指定类型。
                        </p>
                        <p><span class="bold">具有已识别文件扩展名的密钥库或信任存储</span></p>
                        <p>具有可识别文件扩展名的密钥库或信任库映射到以下类型：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>文件扩展名<code class="codeph">.jks</code>解析为<code class="codeph">javax.net.ssl.keyStoreType</code>为JKS：</p><pre class="pre codeblock"><code>java -cp ojdbc8.jar -D javax.net.ssl.keyStore = / path / to / keystore / keystore.jks MyApp</code></pre></li>
                           <li>
                              <p>文件扩展名<code class="codeph">.sso</code>解析为<code class="codeph">javax.net.ssl.keyStoreType</code>为SSO：</p><pre class="pre codeblock"><code>java -cp ojdbc8.jar -D javax.net.ssl.keyStore = / path / to / keystore / keystore.sso MyApp</code></pre></li>
                           <li>
                              <p>文件扩展名<code class="codeph">.p12</code>解析为<code class="codeph">javax.net.ssl.keyStoreType</code>为PKCS12：</p><pre class="pre codeblock"><code>java -cp ojdbc8.jar -D javax.net.ssl.keyStore = / path / to / keystore / keystore.p12 MyApp</code></pre></li>
                           <li>
                              <p>文件扩展名<code class="codeph">.pfx</code>解析为<code class="codeph">javax.net.ssl.keyStoreType</code>为PKCS12：</p><pre class="pre codeblock"><code>java -cp ojdbc8.jar -D javax.net.ssl.keyStore = / path / to / keystore / keystore.pfx MyApp</code></pre></li>
                        </ul>
                        <p><span class="bold">带有URI的密钥库或信任库</span></p>
                        <p>如果密钥库或信任库是具有<code class="codeph">kss://</code>方案的URI，则映射到KSS类型：</p><pre class="pre codeblock"><code>java -cp ojdbc8.jar -D javax.net.ssl.keyStore = kss：// MyStripe / MyKeyStore MyApp</code></pre><div class="infoboxnote" id="GUID-71648EE2-C4C5-46EA-9C27-D351E7D62CA8__GUID-67AF48A2-51C0-440B-BEBE-998A868A28B5">
                           <p class="notep1">注意：</p>
                           <p>您可以设置<code class="codeph">javax.net.ssl.trustStoreType</code>和<code class="codeph">javax.net.ssl.keyStoreType</code>属性以覆盖默认类型解析。
                           </p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-001069BE-E6B9-49CA-8218-F79B4FA47D62" name="GUID-001069BE-E6B9-49CA-8218-F79B4FA47D62"></a><h4 id="JJDBC-GUID-001069BE-E6B9-49CA-8218-F79B4FA47D62" class="sect4"><span class="enumeration_section">9.5.6</span>支持默认SSL上下文</h4>
                  <div>
                     <p></p>
                     <p>对于需要更好地控制了TLS配置应用程序，您可以配置JDBC驱动程序才能使用<code class="codeph">SSLContext</code>用返回<code class="codeph">SSLContext.getDefault</code>方法。使用以下方法之一让驱动程序使用默认<code class="codeph">SSLContext</code> ：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">javax.net.ssl.keyStore = NONE</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">javax.net.ssl.trustStore中= NONE</code></p>
                        </li>
                     </ul>
                     <p>您可以使用默认<code class="codeph">SSLContext</code>来支持非基于文件的密钥库类型。这种密钥存储类型的常见示例包括基于硬件的智能卡。需要以编程方式调用<code class="codeph">load(KeyStore.密钥库类型<code class="codeph">load(KeyStore.LoadStoreParameter)</code>方法也属于这一类。
                     </p>
                     <div class="infoboxnotealso" id="GUID-001069BE-E6B9-49CA-8218-F79B4FA47D62__GUID-B72E8A3C-140D-4667-A4D2-F009BC7BA6D7">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="https://docs.oracle.com/javase/8/docs/api/javax/net/ssl/SSLContext.html#getDefault--" target="_blank">https://docs.oracle.com/javase/8/docs/api/javax/net/ssl/SSLContext.html#getDefault--</a></p>
                           </li>
                           <li>
                              <p><a href="https://docs.oracle.com/javase/8/docs/api/java/security/KeyStore.html#load-java.security.KeyStore.LoadStoreParameter-" target="_blank">https://docs.oracle.com/javase/8/docs/api/java/security/KeyStore.html#load-java.security.KeyStore.LoadStoreParameter-</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-2562DF85-18E7-4B36-8326-0C6FD4FBFFE6" name="GUID-2562DF85-18E7-4B36-8326-0C6FD4FBFFE6"></a><h4 id="JJDBC-GUID-2562DF85-18E7-4B36-8326-0C6FD4FBFFE6" class="sect4"><span class="enumeration_section">9.5.7</span>支持密钥存储服务</h4>
                  <div>
                     <p></p>
                     <p>此版本的Oracle数据库在JDBC驱动程序中引入了对密钥库服务（KSS）的支持。因此，如果您已在WebLogic服务器中配置密钥存储服务，则JDBC应用程序现在可以与现有的密钥存储服务配置集成。</p>
                     <p>驱动程序可以加载由密钥存储区服务管理的密钥库。如果<code class="codeph">javax.net.ssl.keyStore</code>属性或<code class="codeph">javax.net.ssl.trustStore</code>属性的值是具有<code class="codeph">kss://</code> scheme的URI，则驱动程序将从Key Store Service加载密钥库。
                     </p>
                     <p>对于基于权限的保护，必须为ojdbc JAR文件授予以下权限：</p><pre class="pre codeblock"><code>权限KeyStoreAccessPermission“stripeName = *，keystoreName = *，alias = *”，“read”;</code></pre><p>此权限授予对每个密钥库的访问权限。要限制访问范围，可以使用特定应用程序条带和密钥库名称替换星号通配符（*）。驱动程序不会将密钥库加载为特权操作，这意味着还必须将<code class="codeph">KeyStoreAccessPermission</code>授予应用程序代码库。
                     </p>
                  </div>
               </div>
            </div><a id="JJDBC28339"></a><div class="props_rev_3"><a id="GUID-97E88D18-B590-4313-87B8-EE422DA644B3" name="GUID-97E88D18-B590-4313-87B8-EE422DA644B3"></a><h3 id="JJDBC-GUID-97E88D18-B590-4313-87B8-EE422DA644B3" class="sect3"><span class="enumeration_section">9.6</span>支持Kerberos</h3>
               <div>
                  <p>本节讨论以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="client-side-security.html#GUID-768A8F69-1DAD-4C4C-8E5F-DC463ED65393">Kerberos的JDBC支持概述</a></p>
                     </li>
                     <li>
                        <p><a href="client-side-security.html#GUID-2111EA95-5338-45B5-907B-A6B96F5A19E3">配置Windows以使用Kerberos</a></p>
                     </li>
                     <li>
                        <p><a href="client-side-security.html#GUID-A27B26BE-82F3-4BA1-95B6-E09A789D532B">配置Oracle数据库以使用Kerberos</a></p>
                     </li>
                     <li>
                        <p><a href="client-side-security.html#GUID-991705F7-C2C5-4BA9-85D1-32749AE2FF64">使用Kerberos的代码示例</a></p>
                     </li>
                  </ul>
               </div>
               <div class="props_rev_3"><a id="GUID-768A8F69-1DAD-4C4C-8E5F-DC463ED65393" name="GUID-768A8F69-1DAD-4C4C-8E5F-DC463ED65393"></a><h4 id="JJDBC-GUID-768A8F69-1DAD-4C4C-8E5F-DC463ED65393" class="sect4"><span class="enumeration_section">9.6.1</span> Kerberos的JDBC支持概述</h4>
                  <div>
                     <p>Kerberos是一种网络身份验证协议，可通过网络提供身份验证和强加密的工具。Kerberos通过使用密钥加密技术帮助您保护整个企业的信息系统。Kerberos协议使用强加密技术，以便客户端或服务器可以通过不安全的网络连接向其服务器或客户端证明其身份。在客户端和服务器使用Kerberos证明其身份后，他们还可以加密所有通信，以确保在业务开展时的隐私和数据完整性。</p>
                     <p>Kerberos体系结构以称为密钥分发中心（KDC）的受信任身份验证服务为中心。 Kerberos环境中的用户和服务称为主体;每个委托人与KDC共享一个秘密，例如密码。主体可以是诸如<code class="codeph">HR</code>或数据库服务器实例之类的用户。
                     </p>
                     <p>从12c版本1开始，Oracle数据库还支持Kerberos的跨域认证。如果在kerberos配置文件的<code class="codeph">domain_realms</code>部分中正确添加引用的<code class="codeph">domain_realms</code> ，然后在一个特定<code class="codeph">domain_realms</code> ，则可以访问另一个域的服务。
                     </p>
                  </div>
               </div><a id="JJDBC28342"></a><div class="props_rev_3"><a id="GUID-2111EA95-5338-45B5-907B-A6B96F5A19E3" name="GUID-2111EA95-5338-45B5-907B-A6B96F5A19E3"></a><h4 id="JJDBC-GUID-2111EA95-5338-45B5-907B-A6B96F5A19E3" class="sect4"><span class="enumeration_section">9.6.2</span>配置Windows以使用Kerberos</h4>
                  <div>
                     <div class="section">
                        <p>可以在以下链接中找到提供<code class="codeph">klist, kinit,</code>和其他工具的优秀Kerberos客户端：</p><pre class="oac_no_warn" dir="ltr"><a href="http://web.mit.edu/kerberos/dist/index.html" target="_blank"><code class="codeph">http://web.mit.edu/kerberos/dist/index.html</code></a>
</pre><p>此客户端还提供了一个很好的GUI。</p>
                        <p>您需要进行以下更改才能在Windows计算机上配置Kerberos：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>右键单击桌面上的“ <span class="bold">我的电脑”</span>图标。</span></li>
                        <li><span>选择<span class="bold">属性</span> 。系统弹出“系统属性”对话框。</span></li>
                        <li><span>选择“ <span class="bold">高级”</span>选项卡。</span></li>
                        <li><span>单击“ <span class="bold">环境变量”</span> 。将显示“环境变量”对话框。</span></li>
                        <li><span>单击“ <span class="bold">新建”</span>以添加新的用户变量。将显示“新建用户变量”对话框。</span></li>
                        <li><span>在“变量名称”字段中输入<code class="codeph">KRB5CCNAME</code> 。</span></li>
                        <li><span>在“变量值”字段中输入<code class="codeph">FILE:C:\Documents and Settings\</code> <span class="italic"><code class="codeph">&lt;user_name&gt;</code></span> <code class="codeph">\krb5cc</code> 。</span></li>
                        <li><span>单击“ <span class="bold">确定”</span>关闭“新建用户变量”对话框。</span></li>
                        <li><span>单击“ <span class="bold">确定”</span>关闭“环境变量”对话框。</span></li>
                        <li><span>单击“ <span class="bold">确定”</span>关闭“系统属性”对话框。</span></li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-2111EA95-5338-45B5-907B-A6B96F5A19E3__GUID-D1C52111-C90C-4D3E-BF8E-4A25CDB64C3C">
                           <p class="notep1">注意：</p>
                           <p><code class="codeph">C:\WINDOWS\krb5.ini</code>文件与<code class="codeph">krb5.conf</code>文件具有相同的内容。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDBC28343"></a><div class="props_rev_3"><a id="GUID-A27B26BE-82F3-4BA1-95B6-E09A789D532B" name="GUID-A27B26BE-82F3-4BA1-95B6-E09A789D532B"></a><h4 id="JJDBC-GUID-A27B26BE-82F3-4BA1-95B6-E09A789D532B" class="sect4"><span class="enumeration_section">9.6.3</span>配置Oracle数据库以使用Kerberos</h4>
                  <div>
                     <div class="section">
                        <p>执行以下步骤以配置Oracle数据库以使用Kerberos：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>使用以下命令连接到数据库：</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; connect system输入密码： <span class="italic">密码</span>
</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用以下命令创建外部标识的用户<code class="codeph">CLIENT@US.ORACLE.COM</code> ：</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt;创建用户“CLIENT@US.ORACLE.COM”外部识别; SQL&gt;将创建会话授予“CLIENT@US.ORACLE.COM”;</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用以下命令以<code class="codeph">sysdba</code>身份连接到数据库并卸载它：</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; connect / as sysdba SQL&gt; shutdown immediate;</pre></div>
                        </li>
                        <li class="stepexpand"><span><code class="codeph">$T_WORK/t_init1.ora</code>添加到<code class="codeph">$T_WORK/t_init1.ora</code>文件中：</span><div><pre class="oac_no_warn" dir="ltr">OS_AUTHENT_PREFIX = “”</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用以下命令重新启动数据库：</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; startup pfile = t_init1.ora</pre></div>
                        </li>
                        <li class="stepexpand"><span>修改<code class="codeph">sqlnet.ora</code>文件以包含以下行：</span><div><pre class="oac_no_warn" dir="ltr">names.directory_path =（tnsnames）#Kerberos sqlnet.authentication_services =（beq，kerberos5）sqlnet.authentication_kerberos5_service = dbji sqlnet.kerberos5_conf = /home/Jdbc/Security/kerberos/krb5.conf sqlnet.kerberos5_keytab = / home / Jdbc / Security / kerberos / dbji.oracleserver sqlnet.kerberos5_conf_mit = true sqlnet.kerberos_cc_name = / tmp / krb5cc_5088 #logging（可选）：trace_level_server = 16 trace_directory_server = / scratch / sqlnet /</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用以下命令验证您是否可以通过SQL * Plus进行连接：</span><div><pre class="oac_no_warn" dir="ltr"><span class="bold">&gt; kinit客户端</span> <span class="bold">&gt; klist</span>票证缓存：文件：/ tmp / krb5cc_5088默认主体：client@US.ORACLE.COM有效开始Expires服务主体06/22/06 07:13:29 06/22/06 17:13:29 krbtgt /US.ORACLE.COM@US.ORACLE.COM Kerberos 4票证缓存：/ tmp / tkt5088 klist：您没有缓存票证&gt; <span class="bold">sqlplus</span> <span class="bold">'/@(DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=oracleserver.mydomain） .com）（PORT = 5221））</span> <span class="bold">（CONNECT_DATA =（SERVICE_NAME = orcl）））'</span>
</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="JJDBC28345"></a><a id="JJDBC28344"></a><div class="props_rev_3"><a id="GUID-991705F7-C2C5-4BA9-85D1-32749AE2FF64" name="GUID-991705F7-C2C5-4BA9-85D1-32749AE2FF64"></a><h4 id="JJDBC-GUID-991705F7-C2C5-4BA9-85D1-32749AE2FF64" class="sect4"><span class="enumeration_section">9.6.4</span>使用Kerberos的代码示例</h4>
                  <div>
                     <div class="section">
                        <p>以下示例演示了新的Kerberos身份验证功能，该功能是Oracle Database 12 <span class="italic">c</span>第1版（12.1）JDBC瘦驱动程序的一部分。该演示包括两个场景：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在第一个方案中，操作系统维护用户名和凭据。凭据存储在缓存中，驱动程序在尝试向服务器进行身份验证之前检索凭据。此方案位于模块<code class="codeph">connectWithDefaultUser()</code> 。
                              </p>
                              <div class="infoboxnote" id="GUID-991705F7-C2C5-4BA9-85D1-32749AE2FF64__GUID-10CEC8C2-632B-429F-8B13-FC4CD7F078C5">
                                 <p class="notep1">注意：</p>
                                 <ol>
                                    <li>
                                       <p>在运行演示的这一部分之前，请使用以下命令验证您是否具有有效凭据：</p><pre class="oac_no_warn" dir="ltr">&gt; / usr / kerberos / bin / kinit client在哪里， <span class="italic">欢迎</span>使用密码。</pre></li>
                                    <li>
                                       <p>使用以下命令列出您的票证：</p><pre class="oac_no_warn" dir="ltr">&gt; / usr / kerberos / bin / klist</pre></li>
                                 </ol>
                              </div>
                           </li>
                           <li>
                              <p>第二种情况包括应用程序想要控制用户凭据的情况。这是应用程序服务器的情况，其中多个Web用户具有自己的凭据。此方案位于模块<code class="codeph">connectWithSpecificUser().</code></p>
                              <div class="infoboxnote" id="GUID-991705F7-C2C5-4BA9-85D1-32749AE2FF64__GUID-265EA54A-355B-4BEC-993C-93B6F1695A68">
                                 <p class="notep1">注意：</p>
                                 <p>要运行此演示，您需要有一个正常工作的设置，即启动并运行Kerberos服务器，以及配置为使用Kerberos身份验证的Oracle数据库服务器。然后，您需要更改示例中使用的URL以进行编译和运行。</p>
                              </div>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-991705F7-C2C5-4BA9-85D1-32749AE2FF64__GUID-AF4FB9E1-FBFC-4288-B6D2-5FDA35CD5082">
                        <p class="titleinexample">示例9-4使用Kerberos身份验证连接到数据库</p><pre class="oac_no_warn" dir="ltr">import com.sun.security.auth.module。Krb5LoginModule; import java.io.IOException异常; import java.security。的PrivilegedExceptionAction; import java.sql。连接; import java.sql。ResultSet的; import java.sql。的SQLException; import java.sql。声明; import java.util。HashMap的; import java.util。性能; import javax.security.auth。学科; import javax.security.auth.callback。打回来; import javax.security.auth.callback。的CallbackHandler; import javax.security.auth.callback。PasswordCallback; import javax.security.auth.callback。UnsupportedCallbackException在; import oracle.jdbc。的OracleConnection; import oracle.jdbc。一个OracleDriver; import oracle.net.ano。AnoServices;公共类KerberosJdbcDemo {String url =“jdbc：oracle：thin：@（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）”+“（HOST = oracleserver.mydomain.com）（PORT = 5221））（CONNECT_DATA =”+“ （SERVICE_NAME = ORCL）））“; public static void main（String [] arv）{/ *如果你看到以下错误信息[机制级别：无法加载*配置文件c：\ winnt \ krb5.ini（系统找不到指定的路径*）这是因为JVM无法找到您的kerberos配置文件。*您必须提供文件的位置。例如，在Windows上，* MIT Kerberos客户端使用配置文件：C \ WINDOWS \ krb5.ini：* / // System.setProperty（“java.security.krb5.conf”，“C：\\ WINDOWS \\” krb5.ini“）; System.setProperty（ “java.security.krb5.conf”， “/家庭/ JDBC /安全/ Kerberos的/ krb5.conf的”）; KerberosJdbcDemo kerberosDemo = new KerberosJdbcDemo（）;尝试{System.out.println（“尝试连接默认用户：”）; kerberosDemo.connectWithDefaultUser（）; } catch（Exception e）{e.printStackTrace（）; } try {System.out.println（“尝试与特定用户连接：”）; kerberosDemo.connectWithSpecificUser（）; } catch（Exception e）{e.printStackTrace（）; void connectWithDefaultUser（）抛出SQLException {OracleDriver driver = new OracleDriver（）;属性prop = new Properties（）; prop.setProperty（的OracleConnection。CONNECTION_PROPERTY_THIN_NET_AUTHENTICATION_SERVICES，“（”+ AnoServices。AUTHENTICATION_KERBEROS5 + “）”）; prop.setProperty（的OracleConnection。CONNECTION_PROPERTY_THIN_NET_AUTHENTICATION_KRB5_MUTUAL，“true”）; / *如果您收到以下错误[无法获取*身份验证的Princpal名称]虽然您知道您的*凭据缓存中有正确的TGT，但这可能是因为JVM无法找到您的*缓存。</pre><pre class="oac_no_warn" dir="ltr">* *请注意，Windows上的默认位置是“C：\ Documents and Settings \ krb5cc_username”。* / // prop.setProperty（OracleConnection。CONNECTION_PROPERTY_THIN_NET_AUTHENTICATION_KRB5_CC_NAME，</pre><pre class="oac_no_warn" dir="ltr">/ *在linux上：&gt; kinit / usr / kerberos / bin / kinit&gt; ls -l /etc/krb5.conf lrwxrwxrwx 1 root root 47 Jun 22 06:56 /etc/krb5.conf  - &gt; / home / Jdbc / Security /kerberos/krb5.conf&gt; kinit client密码client@US.ORACLE.COM：&gt; klist票证缓存：FILE：/ tmp / krb5cc_5088默认主体：client@US.ORACLE.COM有效开始Expires服务主体11/02/06 09:25:11 11/02/06 19:25:11 krbtgt/US.ORACLE.COM@US.ORACLE.COM Kerberos 4票证缓存：/ tmp / tkt5088 klist：你没有票证缓存* / prop.setProperty（的OracleConnection。CONNECTION_PROPERTY_THIN_NET_AUTHENTICATION_KRB5_CC_NAME，“/ tmp / krb5cc_5088”）; Connection conn = driver.connect（url，prop）; String auth =（（OracleConnection）conn）。getAuthenticationAdaptorName（）; System.out.println（“Authentication adapter =”+ auth）; printUserName（conn）;在conn.close（）; void connectWithSpecificUser（）throws Exception {Subject specificSubject = new Subject（）; //这个第一部分对于这个演示来说并没有多大意义。在//真实场景中，您有一个有效的“specificSubject”主题//表示具有有效Kerberos凭据的Web用户。Krb5LoginModule krb5Module = new Krb5LoginModule（）; HashMap sharedState = new HashMap（）; HashMap options = new HashMap（）; options.put（ “doNotPrompt”， “假”）; options.put（ “useTicketCache”， “假”）; options.put（ “主”， “client@US.ORACLE.COM”）; krb5Module.initialize（specificSubject，newKrbCallbackHandler（），对sharedState，选项）; boolean retLogin = krb5Module.login（）; krb5Module.commit（）;如果（！retLogin）抛出新的异常（“Kerberos5适配器无法从缓存中检索凭证（TGT）”）; //使用来自cache：// options.put（“useTicketCache”，“true”）的TGT; // options.put（“doNotPrompt”，“true”）; // options.put（“ticketCache”，“C：\\ Documents and Settings \\ user \\ krb5cc”）; // krb5Module.initialize（specificSubject，null，sharedState，options）; //现在我们有一个有Kerberos凭据的有效主题。第二个场景//真正从这里开始：//代表Subject'compactSubject'执行driver.connect（...）：Connection conn =（Connection）Subject.doAs（specificSubject，new PrivilegedExceptionAction（）{public Object run（ ）{Connection con = null; Properties prop = new Properties（）; prop.setProperty（AnoServices。AUTHENTICATION_PROPERTY_SERVICES，“（”+ AnoServices。AUTHENTICATION_KERBEROS5 +“）”）;尝试{OracleDriver driver = new OracleDriver（）; con = driver.connect（url，prop）; } catch（Exception除外）{except.printStackTrace（）; } return con; }}; String auth =（（OracleConnection）conn）。getAuthenticationAdaptorName（）; System.out.println（“Authentication adapter =”+ auth）; printUserName（conn）;在conn.close（）; void printUserName（Connection conn）throws SQLException {Statement stmt = null; try {stmt = conn.createStatement（）; ResultSet rs = stmt.executeQuery（“select user from dual”）; while（rs.next（））System.out.println（“User is：”+ rs.getString（1））; rs.close（）;终于{if（stmt！）= null）stmt.close（）;类KrbCallbackHandler实现CallbackHandler {public void handle（Callback [] callbacks）抛出IOException，UnsupportedCallbackException {for（int i = 0; i &lt;callbacks.length; i ++）{if（callbacks [i] instanceof PasswordCallback）{PasswordCallback pc =（PasswordCallback）callbacks [i]; System.out.println（“将密码设置为'welcome'”）; pc.setPassword（（new String（“welcome”））。toCharArray（））; } else {throw new UnsupportedCallbackException（callbacks [i]，“Unrecognized Callback”）; }}}}</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="JJDBC28346"></a><div class="props_rev_3"><a id="GUID-5748543A-EA85-4263-93C8-A79B2D5DBB8C" name="GUID-5748543A-EA85-4263-93C8-A79B2D5DBB8C"></a><h3 id="JJDBC-GUID-5748543A-EA85-4263-93C8-A79B2D5DBB8C" class="sect3"><span class="enumeration_section">9.7</span>支持RADIUS</h3>
               <div>
                  <p>本节介绍以下概念：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="client-side-security.html#GUID-9D0D86AD-35E4-4289-A6EA-4052A9FD9927">RADIUS支持的JDBC支持概述</a></p>
                     </li>
                     <li>
                        <p><a href="client-side-security.html#GUID-08248FD5-DD26-4D07-B1C7-0DBDFA3FC970">配置Oracle数据库以使用RADIUS</a></p>
                     </li>
                     <li>
                        <p><a href="client-side-security.html#GUID-E8CEB076-4DD7-49EB-86D3-82F503E34A02">使用RADIUS的代码示例</a></p>
                     </li>
                  </ul>
               </div>
               <div class="props_rev_3"><a id="GUID-9D0D86AD-35E4-4289-A6EA-4052A9FD9927" name="GUID-9D0D86AD-35E4-4289-A6EA-4052A9FD9927"></a><h4 id="JJDBC-GUID-9D0D86AD-35E4-4289-A6EA-4052A9FD9927" class="sect4"><span class="enumeration_section">9.7.1</span> RADIUS的JDBC支持概述</h4>
                  <div>
                     <p>Oracle Database <span class="italic">11g</span>第1版引入了对远程身份验证拨入用户服务（RADIUS）的支持。RADIUS是一种客户端/服务器安全协议，最广为人知的是启用远程身份验证和访问。Oracle Advanced Security在客户端/服务器网络环境中使用此标准，以支持使用支持RADIUS协议的任何身份验证方法。RADIUS可以与各种身份验证机制一起使用，包括令牌卡和智能卡。
                     </p>
                  </div>
               </div><a id="JJDBC28348"></a><div class="props_rev_3"><a id="GUID-08248FD5-DD26-4D07-B1C7-0DBDFA3FC970" name="GUID-08248FD5-DD26-4D07-B1C7-0DBDFA3FC970"></a><h4 id="JJDBC-GUID-08248FD5-DD26-4D07-B1C7-0DBDFA3FC970" class="sect4"><span class="enumeration_section">9.7.2</span>配置Oracle数据库以使用RADIUS</h4>
                  <div>
                     <div class="section">
                        <p>执行以下步骤以配置Oracle数据库以使用RADIUS：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>使用以下命令连接到数据库：</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; connect system输入密码： <span class="italic">密码</span>
</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用以下命令从数据库中创建新用户<code class="codeph">aso</code> ：</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt;创建外部标识的用户aso; SQL&gt;将创建会话授予aso;</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用以下命令以<code class="codeph">sysdba</code>身份连接到数据库并卸载它：</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; connect / as sysdba SQL&gt; shutdown immediate;</pre></div>
                        </li>
                        <li class="stepexpand"><span><code class="codeph">t_init1.ora</code>添加到<code class="codeph">t_init1.ora</code>文件：</span><div><pre class="oac_no_warn" dir="ltr">os_authent_prefix =“”</pre><div class="infoboxnote" id="GUID-08248FD5-DD26-4D07-B1C7-0DBDFA3FC970__GUID-BCF97DBF-65ED-41FF-B692-DDFD1F29674C">
                                 <p class="notep1">注意：</p>
                                 <p>测试结束后，您需要还原对t_init1.ora文件所做的更改。</p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>使用以下命令重新启动数据库：</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; startup pfile =？/work/t_init1.ora</pre></div>
                        </li>
                        <li class="stepexpand"><span>修改<code class="codeph">sqlnet.ora</code>文件，使其仅包含以下行：</span><div><pre class="oac_no_warn" dir="ltr">sqlnet.authentication_services =（beq，radius）sqlnet.radius_authentication = &lt;RADUIUS_SERVER_HOST_NAME&gt; sqlnet.radius_authentication_port = 1812 sqlnet.radius_authentication_timeout = 120 sqlnet.radius_secret = / home / Jdbc / Security / radius / radius_key #logging（可选）：trace_level_server = 16 trace_directory_server = /刮伤/ SQLNET /</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用以下命令验证您是否可以通过SQL * Plus进行连接：</span><div><pre class="oac_no_warn" dir="ltr">&gt; sqlplus'aso / 1234 @（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = oracleserver.mydomain.com）（PORT = 5221））（CONNECT_DATA =（SERVICE_NAME = orcl）））'</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="JJDBC28350"></a><a id="JJDBC28349"></a><div class="props_rev_3"><a id="GUID-E8CEB076-4DD7-49EB-86D3-82F503E34A02" name="GUID-E8CEB076-4DD7-49EB-86D3-82F503E34A02"></a><h4 id="JJDBC-GUID-E8CEB076-4DD7-49EB-86D3-82F503E34A02" class="sect4"><span class="enumeration_section">9.7.3</span>使用RADIUS的代码示例</h4>
                  <div>
                     <div class="section">
                        <p>此示例演示了新的RADIUS身份验证功能，该功能是Oracle Database 12 <span class="italic">c</span>第1版（12.1）JDBC瘦驱动程序的一部分。您需要有一个正常工作的设置，即启动并运行RADIUS服务器，以及配置为使用RADIUS身份验证的Oracle数据库服务器。然后，您需要更改示例中给出的URL以进行编译和运行。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-E8CEB076-4DD7-49EB-86D3-82F503E34A02__GUID-0778E14A-A747-4223-AB03-5EC61A17B2EB">
                        <p class="titleinexample">示例9-5使用RADIUS身份验证连接到数据库</p><pre class="oac_no_warn" dir="ltr">import java.sql。连接; import java.sql。ResultSet的; import java.sql。的SQLException; import java.sql。声明; import java.util。性能; import oracle.jdbc。的OracleConnection; import oracle.jdbc。一个OracleDriver; import oracle.net.ano。AnoServices; public class RadiusJdbcDemo {String url =“jdbc：oracle：thin：@（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）”+“（HOST = oracleserver.mydomain.com）（PORT = 5221））（CONNECT_DATA =”+“ （SERVICE_NAME = ORCL）））“; public static void main（String [] arv）{RadiusJdbcDemo radiusDemo = new RadiusJdbcDemo（）;试试{radiusDemo.connect（）; } catch（Exception e）{e.printStackTrace（）;此方法尝试使用RADIUS *身份验证协议登录数据库。* *它应该将以下输出打印到stdout：* -------------------------------------- --------------- *身份验证适配器= RADIUS *用户是：ASO * ------------------------ ----------------------------- * / void connect（）抛出SQLException {OracleDriver driver = new OracleDriver（）;属性prop = new Properties（）; prop.setProperty（的OracleConnection。CONNECTION_PROPERTY_THIN_NET_AUTHENTICATION_SERVICES，“（”+ AnoServices。AUTHENTICATION_RADIUS + “）”）; //需要使用密码“1234”在radius服务器上正确设置用户“aso”。prop.setProperty（ “用户”， “ASO”）; prop.setProperty（ “密码”， “1234”）; Connection conn = driver.connect（url，prop）; String auth =（（OracleConnection）conn）。getAuthenticationAdaptorName（）; System.out.println（“Authentication adapter =”+ auth）; printUserName（conn）;在conn.close（）; void printUserName（Connection conn）throws SQLException {Statement stmt = null; try {stmt = conn.createStatement（）; ResultSet rs = stmt.executeQuery（“select user from dual”）; while（rs.next（））System.out.println（“User is：”+ rs.getString（1））; rs.close（）;终于{if（stmt！）= null）stmt.close（）; }}}</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="JJDBC28351"></a><div class="props_rev_3"><a id="GUID-4DED9706-6735-4786-B70C-4D35C8DFE9E5" name="GUID-4DED9706-6735-4786-B70C-4D35C8DFE9E5"></a><h3 id="JJDBC-GUID-4DED9706-6735-4786-B70C-4D35C8DFE9E5" class="sect3"><span class="enumeration_section">9.8</span>关于安全外部密码存储</h3>
               <div>
                  <p>作为应用程序使用密码凭据连接到数据库的大规模部署的替代方法，可以将此类凭据存储在客户端Oracle钱包中。Oracle钱包是一个安全的软件容器，用于存储身份验证和签名凭据。</p>
                  <p>在客户端Oracle钱包中存储数据库密码凭证消除了在应用程序代码中嵌入用户名和密码的需要， <a id="d36818e2362" class="indexterm-anchor"></a>批量作业，或<a id="d36818e2365" class="indexterm-anchor"></a>脚本。这样可以降低在脚本和应用程序代码中暴露密码的风险，并简化维护工作，因为每次用户名和密码更改时都不需要更改代码。此外，如果您不必更改应用程序代码，那么为这些用户帐户强制实施密码管理策略也变得更加容易。
                  </p>
                  <p>您可以设置<code class="codeph">oracle.net.wallet_location</code>连接属性以指定钱包位置。然后，JDBC驱动程序可以从此钱包中检索用户名和密码对。
                  </p>
                  <div class="infoboxnotealso" id="GUID-4DED9706-6735-4786-B70C-4D35C8DFE9E5__GUID-CEA776CE-6F6D-42B3-A42A-D458090252C1">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关配置客户端以使用安全外部密码存储的详细信息，以及有关管理其中的凭据的信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/jjdbc&amp;id=ADMIN11133" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                        </li>
                        <li>
                           <p>有关管理密码凭据的安全外部密码存储库的详细信息，请参见“ <a href="../dbseg/configuring-authentication.html#DBSEG99815" target="_blank"><span class="italic">Oracle数据库安全指南</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Workload Intelligence analyzes the data stored in a captured workload and identifies significant patterns in a workload."></meta>
      <meta name="description" content="Workload Intelligence analyzes the data stored in a captured workload and identifies significant patterns in a workload."></meta>
      <title>使用Workload Intelligence</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Testing Guide "></meta>
      <meta property="og:description" content="Workload Intelligence analyzes the data stored in a captured workload and identifies significant patterns in a workload."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Testing Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="testing-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-07T01:43:11-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2008, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96279-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="analyzing-captured-and-replayed-workloads.html" title="Previous" type="text/html"></link>
      <link rel="next" href="using-consolidated-database-replay.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Testing Guide"></meta>
    <meta name="dcterms.isVersionOf" content="RATUG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="analyzing-captured-and-replayed-workloads.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="using-consolidated-database-replay.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">测试指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="database-replay.html" property="item" typeof="WebPage"><span property="name">数据库重播</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用Workload Intelligence</li>
            </ol>
            <a id="GUID-2A70BED3-9A0A-4C0C-9B84-910B139EF6A0" name="GUID-2A70BED3-9A0A-4C0C-9B84-910B139EF6A0"></a><a id="RATUG4176"></a>
            
            <h2 id="RATUG-GUID-2A70BED3-9A0A-4C0C-9B84-910B139EF6A0" class="sect2"><span class="enumeration_chapter">14</span>使用Workload Intelligence</h2>
         </header>
         <div class="ind">
            <div>
               <div><span>Workload Intelligence分析存储在捕获的工作负载中的数据，并识别工作负载中的重要模式。</span> 本章介绍如何使用Workload Intelligence并包含以下部分：</div>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="using-workload-intelligence.html#GUID-A3BCE68E-E973-427D-8A2C-94FB08905D1A" title="工作负载捕获会生成许多二进制文件（称为捕获文件），其中包含有关捕获的工作负载的相关信息。存储在捕获文件中的信息使工作负载重放能够在以后实际再现捕获的工作负载。">工作负载情报概述</a></p>
                  </li>
                  <li>
                     <p><a href="using-workload-intelligence.html#GUID-BCAB6B26-F044-4332-A83C-7D51A3B75A95" title="本节介绍使用Workload Intelligence分析捕获的工作负载的步骤。">使用工作负载智能分析捕获的工作负载</a></p>
                  </li>
                  <li>
                     <p><a href="using-workload-intelligence.html#GUID-00E9BCAB-72F0-4B0D-A406-1E0FD85A29AE" title="本节假设一个场景，其中Workload Intelligence用于由Swingbench生成的捕获工作负载，Swingbench是用于压力测试Oracle数据库的基准测试。">示例：工作负载智能结果</a></p>
                  </li>
               </ul>
            </div><a id="RATUG4177"></a><div class="props_rev_3"><a id="GUID-A3BCE68E-E973-427D-8A2C-94FB08905D1A" name="GUID-A3BCE68E-E973-427D-8A2C-94FB08905D1A"></a><h3 id="RATUG-GUID-A3BCE68E-E973-427D-8A2C-94FB08905D1A" class="sect3"><span class="enumeration_section">14.1</span>工作负载智能概述</h3>
               <div>
                  <div><span>工作负载捕获会生成许多二进制文件（称为捕获文件），其中包含有关捕获的工作负载的相关信息。存储在捕获文件中的信息使工作负载重放能够在以后实际再现捕获的工作负载。</span> 对于由工作负载捕获记录的每个客户端请求，捕获的信息包括SQL文本，绑定值，事务信息，计时数据，访问对象的标识符以及有关请求的其他信息。</div>
                  <p><a id="d30301e181" class="indexterm-anchor"></a> Workload Intelligence使您能够以其他方式使用存储在捕获文件中的信息，包括：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>分析并模拟工作量</p>
                     </li>
                     <li>
                        <p>发现工作量中的重要模式和趋势</p>
                     </li>
                     <li>
                        <p>在工作负载捕获期间可视化生产系统上运行的内容</p>
                     </li>
                  </ul>
                  <p>本节介绍Workload Intelligence并包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-workload-intelligence.html#GUID-A01D3354-ECD0-44A0-A58E-9494497AB53F" title="Workload Intelligence包含一套Java程序，使您可以分析存储在捕获的工作负载中的数据。这些Java程序对工作负载捕获期间记录的数据进行操作，以创建描述工作负载的模型。">关于Workload Intelligence</a></p>
                     </li>
                     <li>
                        <p><a href="using-workload-intelligence.html#GUID-1F6F3916-8EE0-4209-B4B1-70C90E88C4E1" title="您可以使用Workload Intelligence发现捕获的工作负载中的重要模式。">工作负载智能的用例</a></p>
                     </li>
                     <li>
                        <p><a href="using-workload-intelligence.html#GUID-8ADD4FA7-BBE0-4216-88E6-2542A64A2923" title="Workload Intelligence使用存储在捕获文件中的信息，并且不需要使用工作负载重放来执行工作负载。此外，Workload Intelligence不需要任何用户架构，用户数据或与生产系统的连接。">使用工作负载智能的要求</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-A3BCE68E-E973-427D-8A2C-94FB08905D1A__GUID-3E202506-F097-46F3-BF9B-0189CC9E3BF8">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关工作负载捕获的信息，请参阅<span class="q">“ <a href="introduction-to-database-replay.html#GUID-36DE5567-5A64-493B-A154-6581C678FC8A" title="使用数据库重放的第一步是捕获生产工作负载。捕获工作负载涉及将外部客户端发出的所有请求记录到Oracle数据库。">Workload Capture</a> ”</span></p>
                        </li>
                        <li>
                           <p>有关工作负载重放的信息，请参阅<span class="q">“ <a href="introduction-to-database-replay.html#GUID-6A7A45F0-27B2-41D8-B1DA-1CE39F49AA7C" title="捕获的工作负载经过预处理后，可以在测试系统上重放。">工作负载重播</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="RATUG4178"></a><div class="props_rev_3"><a id="GUID-A01D3354-ECD0-44A0-A58E-9494497AB53F" name="GUID-A01D3354-ECD0-44A0-A58E-9494497AB53F"></a><h4 id="RATUG-GUID-A01D3354-ECD0-44A0-A58E-9494497AB53F" class="sect4"><span class="enumeration_section">14.1.1</span>关于Workload Intelligence</h4>
                  <div>
                     <div><span>Workload Intelligence包含一套Java程序，使您可以分析存储在捕获的工作负载中的数据。这些Java程序对工作负载捕获期间记录的数据进行操作，以创建描述工作负载的模型。</span> 此模型可以帮助您识别作为工作负载一部分执行的重要模板模式。
                     </div>
                     <p>一个<a id="d30301e328" class="indexterm-anchor"></a> template表示只读SQL语句，或由一个或多个SQL语句组成的整个事务。如果两个SQL语句（或事务）表现出显着的相似性，则它们由相同的模板表示。
                     </p>
                     <p>Workload Intelligence使您能够通过探索模板模式和相应的SQL语句，更好地可视化捕获的工作负载的外观。对于每一个<a id="d30301e335" class="indexterm-anchor"></a>您可以查看重要的统计信息，例如给定模式的执行次数以及模式在执行期间所消耗的数据库时间。
                     </p>
                  </div>
               </div><a id="RATUG4179"></a><div class="props_rev_3"><a id="GUID-1F6F3916-8EE0-4209-B4B1-70C90E88C4E1" name="GUID-1F6F3916-8EE0-4209-B4B1-70C90E88C4E1"></a><h4 id="RATUG-GUID-1F6F3916-8EE0-4209-B4B1-70C90E88C4E1" class="sect4"><span class="enumeration_section">14.1.2</span>工作负载智能的用例</h4>
                  <div>
                     <p>您可以使用Workload Intelligence发现捕获的工作负载中的重要模式。</p>
                     <p>在生产系统中执行的SQL语句通常不是由用户手动输入的，而是来自在连接到数据库服务器的应用程序服务器上运行的一个或多个应用程序。应用程序中通常存在有限数量的此类SQL语句。即使在特定语句的每次执行中使用不同的绑定值，其SQL文本基本上保持不变。</p>
                     <p>根据用户对应用程序的输入，执行代码路径，该代码路径包括按应用程序代码定义的给定顺序提交给数据库的一个或多个SQL语句。频繁的用户操作对应于定期执行的应用程序代码路径。这种频繁执行的代码路径生成由数据库以给定顺序执行的SQL语句的频繁模式。通过分析捕获的工作负载，Workload Intelligence发现了这些模式并将它们与相关的执行统计信息相关联。换句话说，Workload Intelligence使用存储在捕获文件中的信息来发现在工作负载捕获期间由生产系统中运行的应用程序的重要代码路径生成的模式。Workload Intelligence执行此操作时无需任何有关应用程序的信息。</p>
                     <p>使用Workload Intelligence发现重要模式：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使您能够在工作负载捕获期间更好地可视化数据库中正在运行的内容。</p>
                        </li>
                        <li>
                           <p>提供可用于优化的更多信息。</p>
                        </li>
                        <li>
                           <p>提供更好的上下文，因为SQL语句不是孤立的，而是组合在一起的。</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="RATUG4191"></a><div class="props_rev_3"><a id="GUID-8ADD4FA7-BBE0-4216-88E6-2542A64A2923" name="GUID-8ADD4FA7-BBE0-4216-88E6-2542A64A2923"></a><h4 id="RATUG-GUID-8ADD4FA7-BBE0-4216-88E6-2542A64A2923" class="sect4"><span class="enumeration_section">14.1.3</span>使用工作负载智能的要求</h4>
                  <div>
                     <div><span>Workload Intelligence使用存储在捕获文件中的信息，并且不需要使用工作负载重放来执行工作负载。此外，Workload Intelligence不需要任何用户架构，用户数据或与生产系统的连接。</span> 为了避免生产系统中的任何开销，建议在已复制捕获文件的测试系统上使用Workload Intelligence，尤其是对于大型捕获的工作负载，因为运行Workload Intelligence可能会占用大量资源。
                     </div>
                     <p>用于调用包含Workload Intelligence的Java程序的必要Java类打包在<code class="codeph">$ORACLE_HOME/rdbms/jlib/dbrintelligence.jar</code> 。必须在类路径中包含另外两个jar文件： <code class="codeph">$ORACLE_HOME/rdbms/jlib/dbrparser.jar</code>和<code class="codeph">$ORACLE_HOME/jdbc/lib/ojdbc6.jar</code> 。
                     </p>
                     <p>Workload Intelligence还在内部使用一些<code class="codeph">SYS</code>表和视图。
                     </p>
                  </div>
               </div>
            </div><a id="RATUG4180"></a><div class="props_rev_3"><a id="GUID-BCAB6B26-F044-4332-A83C-7D51A3B75A95" name="GUID-BCAB6B26-F044-4332-A83C-7D51A3B75A95"></a><h3 id="RATUG-GUID-BCAB6B26-F044-4332-A83C-7D51A3B75A95" class="sect3"><span class="enumeration_section">14.2</span>使用工作负载智能分析捕获的工作负载</h3>
               <div>
                  <div><span>本节介绍使用Workload Intelligence分析捕获的工作负载的步骤。</span> 例如：</div>
                  <div class="section">
                     <p class="subhead2" id="GUID-BCAB6B26-F044-4332-A83C-7D51A3B75A95__GUID-1F3A51F0-4CC9-4A89-90E1-7B9FA0455883">使用Workload Intelligence分析捕获的工作负载：</p>
                     <ol>
                        <li>
                           <p>创建具有相应权限的数据库用户以使用Workload Intelligence，如<span class="q">“ <a href="using-workload-intelligence.html#GUID-84688CA4-EFA5-4444-B957-21C80CBBADA7" title="在使用Workload Intelligence之前，首先要创建具有适当权限的数据库用户。">为Workload Intelligence创建数据库用户</a> ”中所述</span> 。
                           </p>
                        </li>
                        <li>
                           <p>通过运行<code class="codeph">LoadInfo</code> Java程序创建新的Workload Intelligence作业，如<span class="q">“ <a href="using-workload-intelligence.html#GUID-CDC3AF64-CABC-47AE-955B-2D9ACF9A154C" title="要创建Workload Intelligence作业，请使用LoadInfo程序。">创建工作负载智能作业</a> ”中所述</span> 。
                           </p>
                        </li>
                        <li>
                           <p>通过运行<code class="codeph">BuildModel</code> Java程序<span class="q"><a href="using-workload-intelligence.html#GUID-9C93CD84-DCD9-4AB0-BB3D-57A0B7CEF490" title="To generate a workload model, use the BuildModel program.">生成</a></span>描述<span class="q"><a href="using-workload-intelligence.html#GUID-9C93CD84-DCD9-4AB0-BB3D-57A0B7CEF490" title="To generate a workload model, use the BuildModel program.">工作负载的模型</a></span> ，如<span class="q">“ <a href="using-workload-intelligence.html#GUID-9C93CD84-DCD9-4AB0-BB3D-57A0B7CEF490" title="要生成工作负载模型，请使用BuildModel程序。">生成工作负载模型</a> ”中所述</span> 。
                           </p>
                        </li>
                        <li>
                           <p>通过运行<code class="codeph">FindPatterns</code> Java程序<span class="q"><a href="using-workload-intelligence.html#GUID-A7979494-2349-46CD-9CC7-7B95D378F9F3" title="To identify patterns in a workload, use the FindPatterns program.">识别</a></span>工作负载中出现的模板中的模式，如<span class="q">“ <a href="using-workload-intelligence.html#GUID-A7979494-2349-46CD-9CC7-7B95D378F9F3" title="要识别工作负载中的模式，请使用FindPatterns程序。">识别工作负载中的模式”中所述</a></span> 。
                           </p>
                        </li>
                        <li>
                           <p>生成报告以通过运行<code class="codeph">GenerateReport</code> Java程序显示结果，如<span class="q">“ <a href="using-workload-intelligence.html#GUID-9D2983B3-F36A-4F32-9317-4DFD12173E7D" title="要生成工作负载智能报告，请使用GenerateReport程序。">生成工作负载情报报告</a> ”中所述</span> 。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div><a id="RATUG4182"></a><a id="RATUG4181"></a><div class="props_rev_3"><a id="GUID-84688CA4-EFA5-4444-B957-21C80CBBADA7" name="GUID-84688CA4-EFA5-4444-B957-21C80CBBADA7"></a><h4 id="RATUG-GUID-84688CA4-EFA5-4444-B957-21C80CBBADA7" class="sect4"><span class="enumeration_section">14.2.1</span>为Workload Intelligence创建数据库用户</h4>
                  <div>
                     <p>在使用Workload Intelligence之前，首先要创建具有适当权限的数据库用户。</p>
                     <div class="section">
                        <p><a href="using-workload-intelligence.html#GUID-84688CA4-EFA5-4444-B957-21C80CBBADA7__CDEBGGCE">示例14-1</a>显示了如何创建可以使用Workload Intelligence的数据库用户。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-84688CA4-EFA5-4444-B957-21C80CBBADA7__CDEBGGCE">
                        <p class="titleinexample">示例14-1为Workload Intelligence创建数据库用户</p><pre class="oac_no_warn" dir="ltr">创建用<span class="italic">密码</span>标识的用户workintusr;将创建会话授予workintusr;授予选择，插入，改变WI $ _JOB到workintusr;授予插入，改变WI $ _TEMPLATE到workintusr;授予插入，改变WI $ _STATEMENT到workintusr;授予插入，改变WI $ _OBJECT到workintusr;授予插入，改变WI $ _CAPTURE_FILE到workintusr;授予选择，插入，改变WI $ _EXECUTION_ORDER到workintusr;授予选择，插入，更新，删除，改变WI $ _FREQUENT_PATTERN到workintusr;授予选择，插入，删除，改变WI $ _FREQUENT_PATTERN_ITEM到workintusr;授予选择，插入，删除，改变WI $ _FREQUENT_PATTERN_METADATA到workintusr;将WI $ _JOB_ID上的select选择给workintusr;将DBMS_WORKLOAD_REPLAY上的执行权限授予workintusr;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="RATUG4184"></a><a id="RATUG4183"></a><div class="props_rev_3"><a id="GUID-CDC3AF64-CABC-47AE-955B-2D9ACF9A154C" name="GUID-CDC3AF64-CABC-47AE-955B-2D9ACF9A154C"></a><h4 id="RATUG-GUID-CDC3AF64-CABC-47AE-955B-2D9ACF9A154C" class="sect4"><span class="enumeration_section">14.2.2</span>创建工作负载智能作业</h4>
                  <div>
                     <div><span>要创建Workload Intelligence作业，请使用<code class="codeph">LoadInfo</code>程序。</span> <code class="codeph">LoadInfo</code>是一个Java程序，它创建一个新任务来应用Workload Intelligence的算法。该程序解析捕获目录中包含的数据，并存储在内部表中运行Workload Intelligence所需的相关信息。
                     </div>
                     <div class="section">
                        <p>该<a id="d30301e896" class="indexterm-anchor"></a> <code class="codeph">LoadInfo</code>程序使用以下语法：</p><pre class="oac_no_warn" dir="ltr">java oracle.dbreplay.workload.intelligence。LoadInfo -cstr connection_string -user username -job job_name -cdir capture_directory java oracle.dbreplay.workload.intelligence。LoadInfo -version java oracle.dbreplay.workload.intelligence。LoadInfo -usage</pre><p>该<a id="d30301e909" class="indexterm-anchor"></a> <code class="codeph">LoadInfo</code>程序支持以下选项：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">-cstr</code></p>
                              <p>指定数据库的JDBC连接字符串，其中Workload Intelligence存储执行所需的信息和中间结果（例如， <code class="codeph">jdbc:oracle:thin@hostname:portnum:ORACLE_SID</code> ）</p>
                           </li>
                           <li>
                              <p><code class="codeph">-用户</code></p>
                              <p>指定数据库用户名。用户必须具有使用Workload Intelligence的特定权限。</p>
                              <p>有关使用适当权限创建数据库用户的信息，请参阅<span class="q">“ <a href="using-workload-intelligence.html#GUID-84688CA4-EFA5-4444-B957-21C80CBBADA7" title="在使用Workload Intelligence之前，首先要创建具有适当权限的数据库用户。">为Workload Intelligence创建数据库用户</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">-工作</code></p>
                              <p>指定唯一标识Workload Intelligence作业的名称。</p>
                           </li>
                           <li>
                              <p><code class="codeph">-cdir</code></p>
                              <p>指定Workload Intelligence要分析的捕获目录的操作系统路径。</p>
                           </li>
                           <li>
                              <p><code class="codeph">-版</code></p>
                              <p>显示<code class="codeph">LoadInfo</code>程序的版本信息。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">-用法</code></p>
                              <p>显示<code class="codeph">LoadInfo</code>程序的命令行选项。
                              </p>
                           </li>
                        </ul>
                        <p><a href="using-workload-intelligence.html#GUID-CDC3AF64-CABC-47AE-955B-2D9ACF9A154C__CDEIGBCH">示例14-2</a>显示了如何使用<code class="codeph">LoadInfo</code>程序创建名为<code class="codeph">wijobsales</code>的工作负载智能作业。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-CDC3AF64-CABC-47AE-955B-2D9ACF9A154C__CDEIGBCH">
                        <p class="titleinexample">示例14-2创建工作负载智能作业</p><pre class="oac_no_warn" dir="ltr">java -classpath $ ORACLE_HOME / rdbms / jlib / dbrintelligence.jar：$ ORACLE_HOME / rdbms / jlib / dbrparser.jar：$ ORACLE_HOME / jdbc / lib / ojdbc6.jar:oracle.dbreplay.workload.intelligence。LoadInfo -job wijobsales -cdir / test / captures / sales -cstr jdbc：oracle：thin：@myhost：1521：orcl -user workintusr</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="RATUG4186"></a><a id="RATUG4185"></a><div class="props_rev_3"><a id="GUID-9C93CD84-DCD9-4AB0-BB3D-57A0B7CEF490" name="GUID-9C93CD84-DCD9-4AB0-BB3D-57A0B7CEF490"></a><h4 id="RATUG-GUID-9C93CD84-DCD9-4AB0-BB3D-57A0B7CEF490" class="sect4"><span class="enumeration_section">14.2.3</span>生成工作负载模型</h4>
                  <div>
                     <div><span>要生成工作负载模型，请使用<code class="codeph">BuildModel</code>程序。</span> <code class="codeph">BuildModel</code>是一个Java程序，它从捕获的工作负载中读取数据（此数据必须由<code class="codeph">LoadInfo</code>程序生成）并生成描述工作负载的模型。然后，可以使用此模型来识别工作负载中出现的频繁模板模式。
                     </div>
                     <div class="section">
                        <p>该<a id="d30301e1087" class="indexterm-anchor"></a> <code class="codeph">BuildModel</code>程序使用以下语法：</p><pre class="oac_no_warn" dir="ltr">java oracle.dbreplay.workload.intelligence。BuildModel -cstr connection_string -user username -job job_name java oracle.dbreplay.workload.intelligence。BuildModel -version java oracle.dbreplay.workload.intelligence。BuildModel -usage</pre><p>该<a id="d30301e1100" class="indexterm-anchor"></a> <code class="codeph">BuildModel</code>程序支持以下选项：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">-cstr</code></p>
                              <p>指定数据库的JDBC连接字符串，其中Workload Intelligence存储执行所需的信息和中间结果（例如， <code class="codeph">jdbc:oracle:thin@hostname:portnum:ORACLE_SID</code> ）</p>
                           </li>
                           <li>
                              <p><code class="codeph">-用户</code></p>
                              <p>指定数据库用户名。用户必须具有使用Workload Intelligence的特定权限。</p>
                              <p>有关使用适当权限创建数据库用户的信息，请参阅<span class="q">“ <a href="using-workload-intelligence.html#GUID-84688CA4-EFA5-4444-B957-21C80CBBADA7" title="在使用Workload Intelligence之前，首先要创建具有适当权限的数据库用户。">为Workload Intelligence创建数据库用户</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">-工作</code></p>
                              <p>指定唯一标识Workload Intelligence作业的名称。</p>
                           </li>
                           <li>
                              <p><code class="codeph">-版</code></p>
                              <p>显示<code class="codeph">BuildModel</code>程序的版本信息。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">-用法</code></p>
                              <p>显示<code class="codeph">BuildModel</code>程序的命令行选项。
                              </p>
                           </li>
                        </ul>
                        <p><a href="using-workload-intelligence.html#GUID-9C93CD84-DCD9-4AB0-BB3D-57A0B7CEF490__CDEECCCF">例14-3</a>显示了如何使用<code class="codeph">BuildModel</code>程序生成工作负载模型。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-9C93CD84-DCD9-4AB0-BB3D-57A0B7CEF490__CDEECCCF">
                        <p class="titleinexample">示例14-3生成工作负载模型</p><pre class="oac_no_warn" dir="ltr">java -classpath $ ORACLE_HOME / rdbms / jlib / dbrintelligence.jar：$ ORACLE_HOME / rdbms / jlib / dbrparser.jar：$ ORACLE_HOME / jdbc / lib / ojdbc6.jar:oracle.dbreplay.workload.intelligence。BuildModel -job wijobsales -cstr jdbc：oracle：thin：@myhost：1521：orcl -user workintusr</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="RATUG4188"></a><a id="RATUG4187"></a><div class="props_rev_3"><a id="GUID-A7979494-2349-46CD-9CC7-7B95D378F9F3" name="GUID-A7979494-2349-46CD-9CC7-7B95D378F9F3"></a><h4 id="RATUG-GUID-A7979494-2349-46CD-9CC7-7B95D378F9F3" class="sect4"><span class="enumeration_section">14.2.4</span>识别工作负载中的模式</h4>
                  <div>
                     <div><span>要识别工作负载中的模式，请使用<code class="codeph">FindPatterns</code>程序。</span> <code class="codeph">FindPatterns</code>是一个Java程序，它从捕获的工作负载读取数据（这些数据必须由<code class="codeph">LoadInfo</code>程序生成）及其相应的工作负载模型（工作负载模型必须由<code class="codeph">BuildModel</code>程序生成），并识别出现在的常见模板模式。工作量。
                     </div>
                     <div class="section">
                        <p>该<a id="d30301e1278" class="indexterm-anchor"></a> <code class="codeph">FindPatterns</code>程序使用以下语法：</p><pre class="oac_no_warn" dir="ltr">java oracle.dbreplay.workload.intelligence。FindPatterns -cstr connection_string -user username -job job_name -t threshold java oracle.dbreplay.workload.intelligence。FindPatterns -version java oracle.dbreplay.workload.intelligence。FindPatterns -usage</pre><p>该<a id="d30301e1291" class="indexterm-anchor"></a> <code class="codeph">FindPatterns</code>程序支持以下选项：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">-cstr</code></p>
                              <p>指定数据库的JDBC连接字符串，其中Workload Intelligence存储执行所需的信息和中间结果（例如， <code class="codeph">jdbc:oracle:thin@hostname:portnum:ORACLE_SID</code> ）</p>
                           </li>
                           <li>
                              <p><code class="codeph">-用户</code></p>
                              <p>指定数据库用户名。用户必须具有使用Workload Intelligence的特定权限。</p>
                              <p>有关使用适当权限创建数据库用户的信息，请参阅<span class="q">“ <a href="using-workload-intelligence.html#GUID-84688CA4-EFA5-4444-B957-21C80CBBADA7" title="在使用Workload Intelligence之前，首先要创建具有适当权限的数据库用户。">为Workload Intelligence创建数据库用户</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">-工作</code></p>
                              <p>指定唯一标识Workload Intelligence作业的名称。</p>
                           </li>
                           <li>
                              <p><code class="codeph">-t</code></p>
                              <p>指定阈值概率，该概率定义何时从一个模板到下一个模板的转换是同一模式的一部分或两个模式之间的边界。有效值包括[0.0,1.0]范围内的实数。设置此值是可选的;其默认值为<code class="codeph">0.5</code> 。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">-版</code></p>
                              <p>显示<code class="codeph">FindPatterns</code>程序的版本信息。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">-用法</code></p>
                              <p>显示<code class="codeph">FindPatterns</code>程序的命令行选项。
                              </p>
                           </li>
                        </ul>
                        <p><a href="using-workload-intelligence.html#GUID-A7979494-2349-46CD-9CC7-7B95D378F9F3__CDEEBGHD">示例14-4</a>显示了如何使用<code class="codeph">FindPatterns</code>程序识别工作负载中的频繁模板模式。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-A7979494-2349-46CD-9CC7-7B95D378F9F3__CDEEBGHD">
                        <p class="titleinexample">示例14-4识别工作负载中的模式</p><pre class="oac_no_warn" dir="ltr">java -classpath $ ORACLE_HOME / rdbms / jlib / dbrintelligence.jar：$ ORACLE_HOME / rdbms / jlib / dbrparser.jar：$ ORACLE_HOME / jdbc / lib / ojdbc6.jar:oracle.dbreplay.workload.intelligence。FindPatterns -job wijobsales -cstr jdbc：oracle：thin：@myhost：1521：orcl -user workintusr -t 0.2</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="RATUG4190"></a><a id="RATUG4189"></a><div class="props_rev_3"><a id="GUID-9D2983B3-F36A-4F32-9317-4DFD12173E7D" name="GUID-9D2983B3-F36A-4F32-9317-4DFD12173E7D"></a><h4 id="RATUG-GUID-9D2983B3-F36A-4F32-9317-4DFD12173E7D" class="sect4"><span class="enumeration_section">14.2.5</span>生成工作负载情报报告</h4>
                  <div>
                     <div><span>要生成工作负载智能报告，请使用<code class="codeph">GenerateReport</code>程序。</span> <code class="codeph">GenerateReport</code>是一个Java程序，它生成一个报告以显示Workload Intelligence的结果。Workload Intelligence报告是一个HTML页面，显示工作负载中标识的模式。
                     </div>
                     <div class="section">
                        <p>该<a id="d30301e1473" class="indexterm-anchor"></a> <code class="codeph">GenerateReport</code>程序使用以下语法：</p><pre class="oac_no_warn" dir="ltr">java oracle.dbreplay.workload.intelligence。GenerateReport -cstr connection_string -user username -job job_name -top top_patterns -out filename java oracle.dbreplay.workload.intelligence。GenerateReport -version java oracle.dbreplay.workload.intelligence。GenerateReport -usage</pre><p>该<a id="d30301e1486" class="indexterm-anchor"></a> <code class="codeph">GenerateReport</code>程序支持以下选项：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">-cstr</code></p>
                              <p>指定数据库的JDBC连接字符串，其中Workload Intelligence存储执行所需的信息和中间结果（例如， <code class="codeph">jdbc:oracle:thin@hostname:portnum:ORACLE_SID</code> ）</p>
                           </li>
                           <li>
                              <p><code class="codeph">-用户</code></p>
                              <p>指定数据库用户名。用户必须具有使用Workload Intelligence的特定权限。</p>
                              <p>有关使用适当权限创建数据库用户的信息，请参阅<span class="q">“ <a href="using-workload-intelligence.html#GUID-84688CA4-EFA5-4444-B957-21C80CBBADA7" title="在使用Workload Intelligence之前，首先要创建具有适当权限的数据库用户。">为Workload Intelligence创建数据库用户</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">-工作</code></p>
                              <p>指定唯一标识Workload Intelligence作业的名称。</p>
                           </li>
                           <li>
                              <p><code class="codeph">-最佳</code></p>
                              <p>指定一个数字，指示要在报告中显示的模式数。模式按不同标准（执行次数，DB时间和长度）排序，仅显示定义的顶部结果数。设置此值是可选的;其默认值为<code class="codeph">10</code> 。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">退房手续</code></p>
                              <p>指定存储报告的文件的名称（HTML格式）。设置此值是可选的;其默认值基于<code class="codeph">-job</code>选项中指定的作业名称。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">-版</code></p>
                              <p>显示<code class="codeph">GenerateReport</code>程序的版本信息。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">-用法</code></p>
                              <p>显示<code class="codeph">GenerateReport</code>程序的命令行选项。
                              </p>
                           </li>
                        </ul>
                        <p><a href="using-workload-intelligence.html#GUID-9D2983B3-F36A-4F32-9317-4DFD12173E7D__CDEBDCEG">示例14-5</a>显示了如何使用<code class="codeph">GenerateReport</code>程序生成Workload Intelligence报告。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-9D2983B3-F36A-4F32-9317-4DFD12173E7D__CDEBDCEG">
                        <p class="titleinexample">示例14-5生成工作负载情报报告</p><pre class="oac_no_warn" dir="ltr">java -classpath $ ORACLE_HOME / rdbms / jlib / dbrintelligence.jar：$ ORACLE_HOME / rdbms / jlib / dbrparser.jar：$ ORACLE_HOME / jdbc / lib / ojdbc6.jar:oracle.dbreplay.workload.intelligence。GenerateReport -job wijobsales -cstr jdbc：oracle：thin：@myhost：1521：orcl -user workintusr -top 5 -out wijobsales.html</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="RATUG4192"></a><div class="props_rev_3"><a id="GUID-00E9BCAB-72F0-4B0D-A406-1E0FD85A29AE" name="GUID-00E9BCAB-72F0-4B0D-A406-1E0FD85A29AE"></a><h3 id="RATUG-GUID-00E9BCAB-72F0-4B0D-A406-1E0FD85A29AE" class="sect3"><span class="enumeration_section">14.3</span>示例：工作负载情报结果</h3>
               <div>
                  <p>本节假设一个场景，其中Workload Intelligence用于由Swingbench生成的捕获工作负载，Swingbench是用于压力测试Oracle数据库的基准测试。</p>
                  <p>Workload Intelligence发现的最重要模式包含以下6个模板：</p><pre class="oac_no_warn" dir="ltr">SELECT product_id，product_name，product_description，category_id，weight_class，supplier_id，product_status，list_price，min_price，catalog_url FROM product_information WHERE product_id =：1;</pre><pre class="oac_no_warn" dir="ltr">SELECT p.product_id，product_name，product_description，category_id，weight_class，supplier_id，product_status，list_price，min_price，catalog_url，quantity_on_hand，warehouse_id FROM product_information p，inventoryories i WHERE.product_id =：1 and i.product_id = p.product_id;</pre><pre class="oac_no_warn" dir="ltr">INSERT INTO order_items（order_id，line_item_id，product_id，unit_price，quantity）VALUES（：1，：2，：3，：4，：5）;</pre><pre class="oac_no_warn" dir="ltr">UPDATE命令SET order_mode =：1，order_status =：2，order_total =：3 WHERE order_id =：4;</pre><pre class="oac_no_warn" dir="ltr">SELECT / * + use_nl * / o.order_id，line_item_id，product_id，unit_price，quantity，order_mode，order_status，order_total，sales_rep_id，promotion_id，c.customer_id，cust_first_name，cust_last_name，credit_limit，cust_email FROM orders o，order_items oi，customers c WHERE o.order_id = oi.order_id AND o.customer_id = c.customer_id AND o.order_id =：1;</pre><pre class="oac_no_warn" dir="ltr">更新库存SET quantity_on_hand = quantity_on_hand  - ：1 WHERE product_id =：2 AND warehouse_id =：3;</pre><p>此模式对应于订购产品的常见用户操作。在该示例中，所识别的模式被执行了222,261次（或执行总数的大约8.21％）并且消耗了58,533.70秒的DB时间（或者总DB时间的大约11.21％）。</p>
                  <p>Workload Intelligence在此示例中发现的另一个重要模式包含以下4个模板：</p><pre class="oac_no_warn" dir="ltr">SELECT customer_seq.nextval FROM dual;</pre><pre class="oac_no_warn" dir="ltr">INSERT INTO客户（customer_id，cust_first_name，cust_last_name，nls_language，nls_territory，credit_limit，cust_email，account_mgr_id）VALUES（：1，：2，：3，：4，：5，：6，：7，：8）;</pre><pre class="oac_no_warn" dir="ltr">INSERT INTO登录VALUES（：1，：2）;</pre><pre class="oac_no_warn" dir="ltr">SELECT customer_id，cust_first_name，cust_last_name，nls_language，nls_territory，credit_limit，cust_email，account_mgr_id FROM customers WHERE customer_id =：1;</pre><p>此模式对应于创建新客户帐户，然后在系统中登录。在该示例中，所识别的模式被执行90,699次（或执行总数的约3.35％）并且消耗了17,484.97秒的DB时间（或总DB时间的约3.35％）。</p>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
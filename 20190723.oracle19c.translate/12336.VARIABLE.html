<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>变量</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="User&#39;s Guide and Reference"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="User&#39;s Guide and Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sqlplus-users-guide-and-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-25T05:48:09-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96459-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="UNDEFINE.html" title="Previous" type="text/html"></link>
      <link rel="next" href="WHENEVER-OSERROR.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL*Plus User&#39;s Guide and Reference"></meta>
    <meta name="dcterms.isVersionOf" content="SQPUG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="UNDEFINE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="WHENEVER-OSERROR.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">用户指南和参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="SQL-Plus-reference.html" property="item" typeof="WebPage"><span property="name">SQL * Plus参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="SQL-Plus-command-reference.html" property="item" typeof="WebPage"><span property="name">SQL * Plus命令参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">变量</li>
            </ol>
            <a id="GUID-B4A0DAA3-B6E0-42F7-89B0-EF9C41F02FA3" name="GUID-B4A0DAA3-B6E0-42F7-89B0-EF9C41F02FA3"></a><a id="SQPUG133"></a>
            
            <h2 id="SQPUG-GUID-B4A0DAA3-B6E0-42F7-89B0-EF9C41F02FA3" class="sect2"><span class="enumeration_section">12.51</span> VARIABLE</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-B4A0DAA3-B6E0-42F7-89B0-EF9C41F02FA3__GUID-A9390094-C5C8-4ABD-A4A3-50704F79F673">句法</p><pre class="oac_no_warn" dir="ltr">VAR [IABLE] [ <span class="italic">变量</span> [ <span class="italic">类型</span> [= <span class="italic">值</span> ]]]</pre><p>声明<a id="d47663e34" class="indexterm-anchor"></a><a id="d47663e36" class="indexterm-anchor"></a>可以在PL / SQL中引用的绑定变量，或列出单个变量或所有变量的当前显示特性。
                  </p>
                  <p><span class="italic">type</span>表示以下之一：</p><pre class="oac_no_warn" dir="ltr">NUMBER CHAR CHAR（ <span class="italic">n</span> [CHAR | BYTE]）NCHAR NCHAR（ <span class="italic">n</span> ）VARCHAR2（ <span class="italic">n</span> [CHAR | BYTE]）NVARCHAR2（ <span class="italic">n</span> ）CLOB NCLOB REFCURSOR BINARY_FLOAT BINARY_DOUBLE</pre><p>不带参数的VARIABLE显示会话中声明的所有变量的列表。VARIABLE后跟一个变量名称列出该变量。</p>
                  <p>要释放CLOB和NCLOB绑定变量使用的资源，您可能需要手动释放临时LOB：</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_LOB.FREETEMPORARY（：cv）</pre><p>有关<a href="using-scripts-in-SQL-Plus.html#GUID-B52D6F2E-A28A-48B6-B73F-6A9D018BD107">绑定变量</a>的更多信息，请参见<a href="using-scripts-in-SQL-Plus.html#GUID-B52D6F2E-A28A-48B6-B73F-6A9D018BD107">关于使用绑定</a>变量。有关<a href="../lnpls/index.html" target="_blank"><span class="italic">PL / SQL</span></a>的更多信息，请参见<a href="../lnpls/index.html" target="_blank"><span class="italic">Oracle数据库PL / SQL语言参考</span></a> 。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B4A0DAA3-B6E0-42F7-89B0-EF9C41F02FA3__GUID-1244080A-7667-42BF-9A9A-A3D190989F36">条款</p><pre class="oac_no_warn" dir="ltr"><span class="italic">变量</span></pre><p><a id="d47663e85" class="indexterm-anchor"></a>表示要创建的绑定变量的名称。
                  </p><pre class="oac_no_warn" dir="ltr"><span class="italic">值</span></pre><p><a id="d47663e94" class="indexterm-anchor"></a>允许您为变量分配值以进行输入绑定。
                  </p><pre class="oac_no_warn" dir="ltr">数</pre><p><a id="d47663e102" class="indexterm-anchor"></a><a id="d47663e106" class="indexterm-anchor"></a>创建具有固定长度的NUMBER类型的变量。
                  </p><pre class="oac_no_warn" dir="ltr">CHAR</pre><p><a id="d47663e114" class="indexterm-anchor"></a><a id="d47663e118" class="indexterm-anchor"></a>创建长度为1的CHAR（字符）类型的变量。
                  </p><pre class="oac_no_warn" dir="ltr">CHAR（ <span class="italic">n</span> [CHAR | BYTE]）</pre><p>创建CHAR类型的变量，长度为<span class="italic">n</span>个字节或<span class="italic">n个</span>字符。<span class="italic">n</span>的最大值为2000字节，最小值为1字节或1个字符。具有字符语义的CHAR变量的最大<span class="italic">n</span>由存储所选字符集的每个字符所需的字节数确定，上限为2000字节。长度语义由长度限定符CHAR或BYTE确定，如果没有明确说明，则NLS_LENGTH_SEMANTICS环境变量的值应用于绑定变量。在变量定义阶段明确声明长度语义始终优先于NLS_LENGTH_SEMANTICS设置。
                  </p><pre class="oac_no_warn" dir="ltr">NCHAR</pre><p><a id="d47663e146" class="indexterm-anchor"></a><a id="d47663e150" class="indexterm-anchor"></a>创建长度为1的NCHAR（国家字符）类型的变量。
                  </p><pre class="oac_no_warn" dir="ltr">NCHAR（ <span class="italic">n</span> ）</pre><p>创建长度为<span class="italic">n个</span>字符的NCHAR类型的变量。<span class="italic">n</span>可以的最大值由存储所选国家字符集的每个字符所需的字节数确定，上限为2000字节。唯一的例外是SQL * Plus会话连接到Oracle9之前的<span class="italic">i</span>服务器，或者SQLPLUSCOMPATIBILITY系统变量设置为小于9.0.0的版本。在这种情况下，长度<span class="italic">n</span>可以是字节或字符，具体取决于所选的国家字符集，仍保留2000字节的上限。
                  </p><pre class="oac_no_warn" dir="ltr">VARCHAR2（ <span class="italic">n</span> [CHAR | BYTE]）</pre><p><a id="d47663e180" class="indexterm-anchor"></a><a id="d47663e184" class="indexterm-anchor"></a>创建VARCHAR2类型的变量，长度最多为<span class="italic">n</span>个字节或<span class="italic">n个</span>字符。<span class="italic">n</span>的最大值是32k字节（见注释），最小值是1个字节或1个字符。具有字符语义的VARCHAR2变量的最大<span class="italic">n</span>由存储所选字符集的每个字符所需的字节数确定，上限为32k字节。长度语义由长度限定符CHAR或BYTE确定，如果没有明确说明，则NLS_LENGTH_SEMANTICS环境变量的值应用于绑定变量。在变量定义阶段明确声明长度语义始终优先于NLS_LENGTH_SEMANTICS设置。
                  </p>
                  <div class="infoboxnote" id="GUID-B4A0DAA3-B6E0-42F7-89B0-EF9C41F02FA3__GUID-75500BFD-4DEC-46A4-B3EE-456D44BC8A78">
                     <p class="notep1">注意：</p>
                     <p>默认情况下，VARCHAR2的最大长度为4000字节。尝试使用大于4000字节的最大长度会引发<span class="italic">ORA-01460：请求未实现或不合理的转换</span> 
                     </p>
                     <p>要启用32k最大长度，必须将MAX_STRING_SIZE =扩展参数添加到<code class="codeph">init.ora</code>文件中。
                     </p>
                  </div><pre class="oac_no_warn" dir="ltr">NVARCHAR2（ <span class="italic">n</span> ）</pre><p>创建NVARCHAR2类型的变量，长度最多为<span class="italic">n个</span>字符。<span class="italic">n</span>的最大值取决于为所选国家字符集存储每个字符所需的字节数，上限为32k字节（参见注释）。唯一的例外是SQL * Plus会话连接到Oracle9之前的<span class="italic">i</span>服务器，或者SQLPLUSCOMPATIBILITY系统变量设置为小于9.0.0的版本。在这种情况下，长度<span class="italic">n</span>可以是字节或字符，具体取决于所选的国家字符集，仍然保留32k字节的上限。
                  </p>
                  <div class="infoboxnote" id="GUID-B4A0DAA3-B6E0-42F7-89B0-EF9C41F02FA3__GUID-967C04AB-52B7-4746-8783-6FDDDC71D849">
                     <p class="notep1">注意：</p>
                     <p>默认情况下，最大NVARCHAR2长度为4000字节。尝试使用大于4000字节的最大长度会引发<span class="italic">ORA-01460：请求未实现或不合理的转换</span></p>
                     <p>要启用32k最大长度，必须将MAX_STRING_SIZE =扩展参数添加到<code class="codeph">init.ora</code>文件中。
                     </p>
                  </div><pre class="oac_no_warn" dir="ltr">CLOB</pre><p><a id="d47663e245" class="indexterm-anchor"></a><a id="d47663e249" class="indexterm-anchor"></a>创建CLOB类型的变量。</p><pre class="oac_no_warn" dir="ltr">NCLOB</pre><p><a id="d47663e257" class="indexterm-anchor"></a><a id="d47663e261" class="indexterm-anchor"></a>创建NCLOB类型的变量。</p><pre class="oac_no_warn" dir="ltr">REFCURSOR</pre><p><a id="d47663e269" class="indexterm-anchor"></a><a id="d47663e273" class="indexterm-anchor"></a>创建REF CURSOR类型的变量。</p><pre class="oac_no_warn" dir="ltr">BINARY_FLOAT</pre><p><a id="d47663e281" class="indexterm-anchor"></a><a id="d47663e285" class="indexterm-anchor"></a>创建BINARY_FLOAT类型的变量。 <a id="d47663e290" class="indexterm-anchor"></a><a id="d47663e294" class="indexterm-anchor"></a> BINARY_FLOAT是一个浮点数，与电气和电子工程师协会（IEEE）二进制浮点运算标准IEEE标准754-1985基本一致。
                  </p><pre class="oac_no_warn" dir="ltr">BINARY_DOUBLE</pre><p><a id="d47663e302" class="indexterm-anchor"></a><a id="d47663e306" class="indexterm-anchor"></a>创建BINARY_DOUBLE类型的变量。 <a id="d47663e311" class="indexterm-anchor"></a><a id="d47663e315" class="indexterm-anchor"></a> BINARY_DOUBLE是一个浮点数，与电气和电子工程师协会（IEEE）二进制浮点运算标准IEEE标准754-1985基本一致。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B4A0DAA3-B6E0-42F7-89B0-EF9C41F02FA3__GUID-40724D88-7DB5-4EA4-962F-302B8687A24A">用法</p>
                  <p>绑定变量可以用作存储过程的参数，也可以直接引用<a id="d47663e325" class="indexterm-anchor"></a>匿名PL / SQL块。
                  </p>
                  <p>要显示使用VARIABLE创建的绑定变量的值，请使用PRINT命令。有关更多信息，请参阅<a href="PRINT.html#GUID-3C8951DC-7895-46DE-8FBB-7508B4D16499">PRINT</a> 。
                  </p>
                  <p>自动显示a的值<a id="d47663e338" class="indexterm-anchor"></a>使用VARIABLE创建绑定变量，使用<a id="d47663e343" class="indexterm-anchor"></a> SET AUTOPRINT命令。参见<a href="SET-system-variable-summary.html#GUID-82D529C1-ACF3-4A8C-A58C-9CCC6D12AC1D">SET AUTOP [RINT] {ON | OFF}</a>了解更多信息。
                  </p>
                  <p>绑定变量不能用于<a id="d47663e354" class="indexterm-anchor"></a> COPY命令或<a id="d47663e359" class="indexterm-anchor"></a> SQL语句，PL / SQL块除外。相反，使用替换变量。
                  </p>
                  <p>当你执行VARIABLE时......CLOB或NCLOB命令，SQL * Plus将LOB定位器与绑定变量相关联。在PL / SQL块中执行SELECT clob_column INTO：cv语句时，将自动填充LOB定位器。退出SQL * Plus时，SQL * Plus会关闭LOB定位器。</p>
                  <p>要释放CLOB和NCLOB绑定变量使用的资源，您可能需要手动释放临时LOB：</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_LOB.FREETEMPORARY（：cv）</pre><p>退出SQL * Plus时，将释放所有临时LOB。</p>
                  <p>在打印CLOB或NCLOB绑定变量时，可以使用SQL * Plus SET命令（如SET LONG和SET LONGCHUNKSIZE和SET LOBOFFSET）来控制缓冲区的大小。</p>
                  <p>SQL * Plus REFCURSOR绑定变量可用于引用<a id="d47663e376" class="indexterm-anchor"></a> PL / SQL 2.3或更高版本的游标变量，允许<a id="d47663e379" class="indexterm-anchor"></a>要由SQL * Plus格式化的PL / SQL输出。有关PL / SQL游标变量的更多信息，请参阅<a href="../lnpls/static-sql.html#LNPLS-GUID-4A6E054A-4002-418D-A1CA-DE849CD7E6D5" target="_blank">游标变量</a> 。
                  </p>
                  <p>当你执行VARIABLE时......REFCURSOR命令，SQL * Plus创建游标绑定变量。光标由OPEN自动打开...FOR SELECT语句引用PL / SQL块中的绑定变量。SQL * Plus在完成该绑定变量的PRINT语句或退出后关闭游标。</p>
                  <p>SQL * Plus格式化命令，如<a id="d47663e393" class="indexterm-anchor"></a>打破， <a id="d47663e398" class="indexterm-anchor"></a>柱， <a id="d47663e403" class="indexterm-anchor"></a>计算和<a id="d47663e408" class="indexterm-anchor"></a> SET可用于格式化输出<a id="d47663e413" class="indexterm-anchor"></a>打印REFCURSOR。</p>
                  <p>如果不重新执行PL / SQL OPEN，REFCURSOR绑定变量可能不会多次PRINT ...FOR声明。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B4A0DAA3-B6E0-42F7-89B0-EF9C41F02FA3__GUID-A6AB549F-226A-405F-AA46-175547A8C550">例子</p>
                  <p>以下示例说明如何创建绑定变量，更改其值以及显示其当前值。</p>
                  <p>要创建绑定变量，请输入：</p><pre class="oac_no_warn" dir="ltr">VARIABLE ret_val NUMBER</pre><p>要在SQL * Plus中更改此绑定变量，必须使用PL / SQL块：</p><pre class="oac_no_warn" dir="ltr">开始：ret_val：= 4;结束; /</pre><pre class="pre codeblock"><code>PL / SQL过程成功完成。</code></pre><p>要在SQL * Plus中显示绑定变量的值，请输入：</p><pre class="oac_no_warn" dir="ltr">打印ret_val</pre><pre class="pre codeblock"><code>RET_VAL ---------- 4</code></pre><p>以下示例说明如何创建绑定变量，然后将其设置为函数返回的值：</p><pre class="oac_no_warn" dir="ltr">VARIABLE id NUMBER BEGIN：id：= EMP_MANAGEMENT.HIRE（'BLAKE'，'MANAGER'，'KING'，2990，'SALES'）;结束; /</pre><p>存储过程返回的值放在绑定变量：id中。它可以使用PRINT命令显示，也可以在后续的PL / SQL子程序中使用。</p>
                  <p>以下示例说明了自动显示绑定变量：</p><pre class="oac_no_warn" dir="ltr">SET AUTOPRINT ON VARIABLE一个REFCURSOR BEGIN OPEN：一个FOR SELECT LAST_NAME，CITY，DEPARTMENT_ID来自EMP_DETAILS_VIEW WHERE SALARY&gt; 12000 ORDER BY DEPARTMENT_ID;结束; /</pre><pre class="pre codeblock"><code>PL / SQL过程成功完成。LAST_NAME CITY DEPARTMENT_ID ------------------------- ---------------------- -------- ------------- Hartstein Toronto 20 Russell Oxford 80 Partners牛津80 King Seattle 90 Kochhar Seattle 90 De Haan Seattle 90 6行入选。</code></pre><p>在上面的示例中，无需发出PRINT命令来显示变量。</p>
                  <p>以下示例创建一些变量：</p><pre class="oac_no_warn" dir="ltr">VARIABLE id NUMBER VARIABLE txt CHAR（20）VARIABLE myvar REFCURSOR</pre><p>输入VARIABLE，不带参数列出已定义的变量：</p><pre class="oac_no_warn" dir="ltr">变量</pre><pre class="pre codeblock"><code>变量id数据类型NUMBER变量txt数据类型CHAR（20）变量myvar数据类型REFCURSOR</code></pre><p>以下示例列出了单个变量：</p><pre class="oac_no_warn" dir="ltr">VARIABLE txt</pre><pre class="pre codeblock"><code>变量txt数据类型CHAR（20）</code></pre><p>以下示例说明为输入绑定的变量赋值：</p><pre class="oac_no_warn" dir="ltr">VARIABLE tmp_var VARCHAR2（10）=史密斯</pre><p>以下示例说明了实现与上一示例相同结果的替代方法：</p><pre class="oac_no_warn" dir="ltr">VARIABLE tmp_var VARCHAR2（10）VARIABLE tmp_var = Smith EXECUTE DBMS_OUTPUT.PUT_LINE（：tmp_var）</pre><p>以下示例说明如何生成一份报告，列出个人工资并计算每月收入超过12,000美元的员工的部门薪资成本：</p><pre class="oac_no_warn" dir="ltr">VARIABLE rc REFCURSOR BEGIN OPEN：rc FOR SELECT DEPARTMENT_NAME，LAST_NAME，SALARY FROM EMP_DETAILS_VIEW WHERE SALARY&gt; 12000 ORDER BY DEPARTMENT_NAME，LAST_NAME;结束; /</pre><pre class="pre codeblock"><code>PL / SQL过程成功完成。</code></pre><pre class="oac_no_warn" dir="ltr">设置PAGESIZE 100 FEEDBACK OFF TTITLE LEFT'***部门薪资账单***'跳过2栏薪金形式$ 999,990.99 HEADING'Lelary'COLUMN DEPARTMENT_NAME HEADING'Department'COLUMN LAST_NAME HEADING'Feestee'COMPUTE SUM LABEL'小计：'SALARY ON DEPARTMENT_NAME COMPUTE SUM LABEL'总计：'DEPARTMENT_NAME上的报告中的薪酬突发跳过1报告跳过1 PRINT rc</pre><pre class="pre codeblock"><code>***部门工资法案*** DEPARTMENT_NAME员工薪酬------------------------------ -------- ----------------- ------------ Executive De Haan $ 17,000.00 King $ 24,000.00 Kochhar $ 17,000.00 ************* ***************** ------------小计：$ 58,000.00营销Hartstein $ 13,000.00 *************** *************** ------------小计：$ 13,000.00销售合作伙伴$ 13,500.00 Russell $ 14,000.00 *************** *************** ------------小计：$ 27,500.00 ------------总计：$ 98,500.00</code></pre><p>以下示例说明如何创建输入绑定以将CLOB数据插入CLOB列：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; create table xyz（col1 clob）;表创建。SQL&gt; var abc varchar2（100）=“这是一个clob输入”SQL&gt;插入到xyz值（：abc）;已创建1行。</pre><p>以下示例说明如何生成包含CLOB列的报表，然后使用SET LOBOFFSET命令显示它。</p>
                  <p>假设您已经创建了一个名为clob_tab的表，其中包含一个名为clob_col的CLOB类型的列。 clob_col包含以下数据：</p><pre class="oac_no_warn" dir="ltr">请记住每月运行部门薪资法案报告。此报告包含机密信息。</pre><p>要生成列出col_clob列中数据的报告，请输入</p><pre class="oac_no_warn" dir="ltr">VARIABLE T CLOB BEGIN SELECT CLOB_COL INTO：T FROM CLOB_TAB;结束; /</pre><pre class="pre codeblock"><code>PL / SQL程序已成功完成</code></pre><p>要从列clob_col中打印200个字符，请输入</p><pre class="oac_no_warn" dir="ltr">SET LINESIZE 70 SET LONG 200 PRINT T</pre><pre class="pre codeblock"><code>T ------------------------------------------------- ---------------------请记住每月运行部门薪资法案报告此报告包含机密信息。</code></pre><p>要将打印位置设置为第21个字符，请输入</p><pre class="oac_no_warn" dir="ltr">SET LOBOFFSET 21 PRINT T.</pre><pre class="pre codeblock"><code>T ------------------------------------------------- ---------------------每个月的部门薪资法案报告本报告包含机密信息。</code></pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
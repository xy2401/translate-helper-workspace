<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You manage the redo log by completing tasks such as creating redo log groups and members, relocating and renaming redo log members, dropping redo log groups and members, and forcing log switches."></meta>
      <meta name="description" content="You manage the redo log by completing tasks such as creating redo log groups and members, relocating and renaming redo log members, dropping redo log groups and members, and forcing log switches."></meta>
      <title>管理重做日志</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Administrator’s Guide "></meta>
      <meta property="og:description" content="You manage the redo log by completing tasks such as creating redo log groups and members, relocating and renaming redo log members, dropping redo log groups and members, and forcing log switches."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Administrator’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-14T11:02:35-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96348-04"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="managing-control-files.html" title="Previous" type="text/html"></link>
      <link rel="next" href="managing-archived-redo-log-files.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADMIN"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-control-files.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="managing-archived-redo-log-files.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-database-structure-and-storage.html" property="item" typeof="WebPage"><span property="name">Oracle数据库结构和存储</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理重做日志</li>
            </ol>
            <a id="GUID-BC1F1762-0BB1-4218-B7AF-6160C395AAE4" name="GUID-BC1F1762-0BB1-4218-B7AF-6160C395AAE4"></a><a id="ADMIN007"></a>
            
            <h2 id="ADMIN-GUID-BC1F1762-0BB1-4218-B7AF-6160C395AAE4" class="sect2"><span class="enumeration_chapter">11</span>管理重做日志</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以通过完成诸如创建重做日志组和成员，重定位和重命名重做日志成员，删除重做日志组和成员以及强制日志切换等任务来管理重做日志。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-79189E7E-7431-49CA-B342-3B971186503A">什么是重做日志？</a><br>恢复操作最关键的结构是<span class="bold">重做日志</span> ，它由两个或多个预分配文件组成，这些文件存储在数据库发生时对数据库所做的所有更改。Oracle数据库的每个实例都有一个关联的重做日志，以便在实例发生故障时保护数据库。
                  </li>
                  <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-D77BCD54-908E-49F8-A80D-C8D3E9465D70">规划重做日志</a><br>配置数据库实例重做日志时，可以遵循准则。
                  </li>
                  <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-081AE57B-A821-4F26-97B2-4B141FDB3946">创建重做日志组和成员</a><br>规划数据库的重做日志，并在数据库创建期间创建所有必需的组和重做日志文件的成员。但是，您可能希望创建其他组或成员。例如，将组添加到重做日志可以纠正重做日志组可用性问题。
                  </li>
                  <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-F593023B-3071-4776-95F2-9B8B6C6E670B">重定位和重命名重做日志成员</a><br>您可以使用操作系统命令重定位重做日志，然后使用<code class="codeph">ALTER DATABASE</code>语句使数据库知道其新名称（位置）。
                  </li>
                  <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-54E1DA00-B999-4463-B868-85ADDC108D5D">删除重做日志组和成员</a><br>在某些情况下，您可能希望删除整组重做日志成员。
                  </li>
                  <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-6A7FB6CB-AF29-40BC-BDB3-B514C502B2F6">强制日志切换</a><br>当LGWR停止写入一个重做日志组并开始写入另一个时，会发生日志切换。默认情况下，当前重做日志文件组填充时会自动进行日志切换。
                  </li>
                  <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-E8BC43CA-D047-4AEF-AB4A-2566BE44D73A">验证重做日志文件中的块</a><br>您可以将数据库配置为使用校验和来验证重做日志文件中的块。
                  </li>
                  <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-AA0EBC79-6670-409E-AED1-666FCEF3F25F">清除重做日志文件</a><br>数据库打开时，重做日志文件可能会损坏，并最终停止数据库活动，因为归档无法继续。
                  </li>
                  <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-27E9B63B-03E4-43E5-BA59-AB0EDDDE5CE6">FORCE LOGGING设置的优先顺序</a><br>您可以在各个级别设置<code class="codeph">FORCE LOGGING</code>和<code class="codeph">NOLOGGING</code> ，例如数据库，可插拔数据库（PDB），表空间或数据库对象。当<code class="codeph">FORCE LOGGING</code>设置为一个或多个级别时， <code class="codeph">FORCE LOGGING</code>设置的优先级决定了重做日志中记录的内容。
                  </li>
                  <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-05FCB15E-BE40-40EB-B756-4D280461AD7E">重做日志数据字典视图</a><br>您可以查询一组数据字典视图，以获取有关重做日志的信息。
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-BC1F1762-0BB1-4218-B7AF-6160C395AAE4__GUID-62907E67-41BF-454A-80A3-935FCEEC89B8">
                  <p class="notep1">也可以看看：</p>
                  <p><a href="using-oracle-managed-files.html#GUID-4A3C4616-0D81-4BBA-8EAD-FCAA8AD5C15A" title="Oracle数据库可以管理组成数据库的文件。">使用Oracle Managed Files</a>获取有关由Oracle数据库服务器创建和管理的重做日志文件的信息</p>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="oracle-database-structure-and-storage.html#GUID-F11D30A7-BF12-4D8F-A1C2-D7437D38F8C7" title="您可以创建和管理数据库结构和存储组件。">Oracle数据库结构和存储</a></p>
                  </div>
               </div>
            </div>
            <a id="ADMIN11302"></a><div class="props_rev_3"><a id="GUID-79189E7E-7431-49CA-B342-3B971186503A" name="GUID-79189E7E-7431-49CA-B342-3B971186503A"></a><h3 id="ADMIN-GUID-79189E7E-7431-49CA-B342-3B971186503A" class="sect3"><span class="enumeration_section">11.1</span>什么是重做日志？
               </h3>
               <p>恢复操作最关键的结构是<span class="bold">重做日志</span> ，它由两个或多个预分配文件组成，这些文件存储在数据库发生时对数据库所做的所有更改。Oracle数据库的每个实例都有一个关联的重做日志，以便在实例发生故障时保护数据库。
               </p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-F3679E5E-5153-47D0-B9F9-B3825F519D0B">重做主题</a><br>在多个数据库实例的上下文中讲话时，每个数据库实例的重做日志也称为<span class="italic">重做线程</span> 。
                     </li>
                     <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-4625A35C-EF8A-4A9E-8D19-829C1A665A34">重做日志内容</a><br>重做日志文件用<span class="bold">重做记录</span>填充。
                     </li>
                     <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-4F316F04-8645-4F4B-9406-8978285D2D28">Oracle数据库如何写入重做日志</a><br>数据库的重做日志包含两个或多个重做日志文件。数据库至少需要两个文件，以保证一个文件始终可用于写入而另一个文件正在存档（如果数据库处于<code class="codeph">ARCHIVELOG</code>模式）。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-BC1F1762-0BB1-4218-B7AF-6160C395AAE4" title="您可以通过完成诸如创建重做日志组和成员，重定位和重命名重做日志成员，删除重做日志组和成员以及强制日志切换等任务来管理重做日志。">管理重做日志</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN11303"></a><div class="props_rev_3"><a id="GUID-F3679E5E-5153-47D0-B9F9-B3825F519D0B" name="GUID-F3679E5E-5153-47D0-B9F9-B3825F519D0B"></a><h4 id="ADMIN-GUID-F3679E5E-5153-47D0-B9F9-B3825F519D0B" class="sect4"><span class="enumeration_section">11.1.1</span>重做主题</h4>
                  <div>
                     <p>在多个数据库实例的上下文中讲话时，每个数据库实例的重做日志也称为<span class="italic">重做线程</span> 。
                     </p>
                     <p>在典型配置中，只有一个数据库实例访问Oracle数据库，因此只存在一个线程。但是，在Oracle Real Application Clusters环境中，两个或多个实例同时访问单个数据库，每个实例都有自己的重做线程。每个实例的单独重做线程可避免争用一组重做日志文件，从而消除潜在的性能瓶颈。</p>
                     <p>本章介绍如何在标准单实例Oracle数据库上配置和管理重做日志。在所有讨论和语句示例中，可以假定线程号为1。有关Oracle Real Application Clusters环境中的重做日志组的信息，请参阅“ <a href="../racad/administering-storage-in-oracle-rac.html#RACAD704" target="_blank"><span class="italic">Oracle Real Application Clusters管理和部署指南”</span></a> 。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-79189E7E-7431-49CA-B342-3B971186503A" title="恢复操作最关键的结构是重做日志，它由两个或多个预分配文件组成，这些文件存储在数据库发生时对数据库所做的所有更改。Oracle数据库的每个实例都有一个关联的重做日志，以便在实例发生故障时保护数据库。">什么是重做日志？</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11304"></a><div class="props_rev_3"><a id="GUID-4625A35C-EF8A-4A9E-8D19-829C1A665A34" name="GUID-4625A35C-EF8A-4A9E-8D19-829C1A665A34"></a><h4 id="ADMIN-GUID-4625A35C-EF8A-4A9E-8D19-829C1A665A34" class="sect4"><span class="enumeration_section">11.1.2</span>重做日志内容</h4>
                  <div>
                     <p>重做日志文件用<span class="bold">重做记录</span>填充。
                     </p>
                     <p>重做记录（也称为<span class="bold">重做条目</span> ）由一组<span class="bold">更改向量组成</span> ，每个<span class="bold">更改向量</span>都是对数据库中单个块所做更改的描述。例如，如果更改employee表中的工资值，则会生成一个重做记录，其中包含描述表的数据段块，还原段数据块和还原段的事务表的更改的更改向量。
                     </p>
                     <p>重做条目记录可用于重建对数据库所做的所有更改的数据，包括还原段。因此，重做日志还可以保护回滚数据。使用重做数据恢复数据库时，数据库将读取重做记录中的更改向量，并将更改应用于相关块。</p>
                     <p>重做记录在SGA的重做日志缓冲区中以循环方式缓冲（请参阅<span class="q">“ <a href="managing-the-redo-log.html#GUID-4F316F04-8645-4F4B-9406-8978285D2D28" title="数据库的重做日志包含两个或多个重做日志文件。数据库至少需要两个文件，以保证一个文件始终可用于写入而另一个文件正在存档（如果数据库处于ARCHIVELOG模式）。">Oracle数据库如何写入重做日志</a> ”</span> ），并通过Log Writer（LGWR）数据库后台进程写入其中一个重做日志文件。每当提交事务时，LGWR将事务重做记录从SGA的重做日志缓冲区写入重做日志文件，并分配<span class="bold">系统更改号</span> （SCN）以标识每个已提交事务的重做记录。只有当与给定事务关联的所有重做记录在联机日志中安全地位于磁盘上时，才会通知用户进程已提交事务。
                     </p>
                     <p>在提交相应的事务之前，还可以将重做记录写入重做日志文件。如果重做日志缓冲区填充或其他事务提交，LGWR会将重做日志缓冲区中的所有重做日志条目刷新到重做日志文件，即使某些重做记录可能未提交。如有必要，数据库可以回滚这些更改。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-79189E7E-7431-49CA-B342-3B971186503A" title="恢复操作最关键的结构是重做日志，它由两个或多个预分配文件组成，这些文件存储在数据库发生时对数据库所做的所有更改。Oracle数据库的每个实例都有一个关联的重做日志，以便在实例发生故障时保护数据库。">什么是重做日志？</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13039"></a><a id="ADMIN11305"></a><div class="props_rev_3"><a id="GUID-4F316F04-8645-4F4B-9406-8978285D2D28" name="GUID-4F316F04-8645-4F4B-9406-8978285D2D28"></a><h4 id="ADMIN-GUID-4F316F04-8645-4F4B-9406-8978285D2D28" class="sect4"><span class="enumeration_section">11.1.3</span> Oracle数据库如何写入重做日志</h4>
                  <div>
                     <p>数据库的重做日志包含两个或多个重做日志文件。数据库至少需要两个文件，以保证一个文件始终可用于写入而另一个文件正在存档（如果数据库处于<code class="codeph">ARCHIVELOG</code>模式）。
                     </p>
                     <p>有关详细信息，请参阅<span class="q">“ <a href="managing-archived-redo-log-files.html#GUID-5EE4AC49-E1B2-41A2-BEE7-AA951EAAB2F3" title="您可以通过完成NOARCHIVELOG或ARCHIVELOG模式之间的选择以及指定存档目标等任务来管理存档的重做日志文件。">管理存档的重做日志文件</a> ”</span> 。
                     </p>
                     <p>LGWR以循环方式写入重做日志文件。当前重做日志文件填满时，LGWR开始写入下一个可用的重做日志文件。当最后一个可用的重做日志文件被填满时，LGWR返回第一个重做日志文件并写入它，再次开始循环。<a href="managing-the-redo-log.html#GUID-4F316F04-8645-4F4B-9406-8978285D2D28__I1006202">图11-1</a>说明了重做日志文件的循环写入。每行旁边的数字表示LGWR写入每个重做日志文件的顺序。
                     </p>
                     <p>LGWR可以使用填充的重做日志文件以供重复使用，具体取决于是否启用了存档。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果禁用归档（数据库处于<code class="codeph">NOARCHIVELOG</code>模式），则在将记录的更改写入数据文件后，可以使用填充的重做日志文件。
                           </p>
                        </li>
                        <li>
                           <p>如果启用了归档（数据库处于<code class="codeph">ARCHIVELOG</code>模式），则在将记录的更改写入数据文件<span class="italic">并且</span>文件已归档后，LGWR可以使用填充的重做日志文件。
                           </p>
                        </li>
                     </ul>
                     <div class="figure" id="GUID-4F316F04-8645-4F4B-9406-8978285D2D28__I1006202">
                        <p class="titleinfigure">图11-1 LGWR重用日志文件</p><img src="img/admin054.gif" width="322" alt="下面是图11-1的描述" title="下面是图11-1的描述" longdesc="img_text/admin054.html"><br><a href="img_text/admin054.html">“图11-1 LGWR重用日志文件”的说明</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-C185CE02-EDFB-4FE7-9C50-B80D8DD5214D">活动（当前）和非活动重做日志文件</a><br>Oracle数据库一次只使用一个重做日志文件来存储从重做日志缓冲区写入的重做记录。LGWR正在写入的重做日志文件称为<span class="bold">当前</span>重做日志文件。
                        </li>
                        <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-F1D9C389-98A8-4733-9539-6B0112EFBB10">日志开关和日志序列号</a><br><span class="bold">日志切换</span>是数据库停止写入一个重做日志文件并开始写入另一个重做日志文件的点。通常，当完整填充当前重做日志文件时会发生日志切换，并且写入必须继续到下一个重做日志文件。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-79189E7E-7431-49CA-B342-3B971186503A" title="恢复操作最关键的结构是重做日志，它由两个或多个预分配文件组成，这些文件存储在数据库发生时对数据库所做的所有更改。Oracle数据库的每个实例都有一个关联的重做日志，以便在实例发生故障时保护数据库。">什么是重做日志？</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN11306"></a><div class="props_rev_3"><a id="GUID-C185CE02-EDFB-4FE7-9C50-B80D8DD5214D" name="GUID-C185CE02-EDFB-4FE7-9C50-B80D8DD5214D"></a><h5 id="ADMIN-GUID-C185CE02-EDFB-4FE7-9C50-B80D8DD5214D" class="sect5"><span class="enumeration_section">11.1.3.1</span>活动（当前）和非活动重做日志文件</h5>
                     <div>
                        <p>Oracle数据库一次只使用一个重做日志文件来存储从重做日志缓冲区写入的重做记录。LGWR正在写入的重做日志文件称为<span class="bold">当前</span>重做日志文件。
                        </p>
                        <p>实例恢复所需的重做日志文件称为<span class="bold">活动</span>重做日志文件。实例恢复不再需要的重做日志文件称为<span class="bold">非活动</span>重做日志文件。
                        </p>
                        <p>如果已启用归档（数据库处于<code class="codeph">ARCHIVELOG</code>模式），则在其中一个归档后台进程（ARC <span class="italic">n</span> ）归档其内容之前，数据库无法重用或覆盖活动的联机日志文件。如果禁用了归档（数据库处于<code class="codeph">NOARCHIVELOG</code>模式），则当最后一个重做日志文件已满时，LGWR将继续覆盖序列中的下一个日志文件。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-4F316F04-8645-4F4B-9406-8978285D2D28" title="数据库的重做日志包含两个或多个重做日志文件。数据库至少需要两个文件，以保证一个文件始终可用于写入而另一个文件正在存档（如果数据库处于ARCHIVELOG模式）。">Oracle数据库如何写入重做日志</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11307"></a><div class="props_rev_3"><a id="GUID-F1D9C389-98A8-4733-9539-6B0112EFBB10" name="GUID-F1D9C389-98A8-4733-9539-6B0112EFBB10"></a><h5 id="ADMIN-GUID-F1D9C389-98A8-4733-9539-6B0112EFBB10" class="sect5"><span class="enumeration_section">11。1。2。2</span>日志开关和日志序列号</h5>
                     <div>
                        <p><span class="bold">日志切换</span>是数据库停止写入一个重做日志文件并开始写入另一个重做日志文件的点。通常，当完整填充当前重做日志文件时会发生日志切换，并且写入必须继续到下一个重做日志文件。
                        </p>
                        <p>但是，无论当前重做日志文件是否已完全填充，您都可以将日志切换配置为定期发生。您也可以手动强制日志切换。</p>
                        <p>每次发生日志切换并且LGWR开始向其写入时，Oracle数据库会为每个重做日志文件分配一个新的<span class="bold">日志序列号</span> 。当数据库归档重做日志文件时，归档日志会保留其日志序列号。循环使用的重做日志文件将获得下一个可用的日志序列号。
                        </p>
                        <p>每个联机或归档的重做日志文件由其日志序列号唯一标识。在崩溃，实例或介质恢复期间，数据库使用必需的归档和重做日志文件的日志序列号以升序正确应用重做日志文件。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-4F316F04-8645-4F4B-9406-8978285D2D28" title="数据库的重做日志包含两个或多个重做日志文件。数据库至少需要两个文件，以保证一个文件始终可用于写入而另一个文件正在存档（如果数据库处于ARCHIVELOG模式）。">Oracle数据库如何写入重做日志</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADMIN11308"></a><div class="props_rev_3"><a id="GUID-D77BCD54-908E-49F8-A80D-C8D3E9465D70" name="GUID-D77BCD54-908E-49F8-A80D-C8D3E9465D70"></a><h3 id="ADMIN-GUID-D77BCD54-908E-49F8-A80D-C8D3E9465D70" class="sect3"><span class="enumeration_section">11.2</span>规划重做日志</h3>
               <p>配置数据库实例重做日志时，可以遵循准则。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-BDEEE3CB-7917-4C73-AB2D-434583D5F838">多路复用重做日志文件</a><br>为了防止涉及重做日志本身的故障，Oracle数据库允许<span class="bold">多路复用</span>重做日志，这意味着重做日志的两个或多个相同副本可以自动保存在不同的位置。
                     </li>
                     <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-79C81D0E-2F5C-48F2-8506-E78FF499D089">将重做日志成员放在不同的磁盘上</a><br>设置多路复用重做日志时，请将组成员放在不同的物理磁盘上。如果单个磁盘发生故障，则只有一个组的一个成员对LGWR不可用，而LGWR仍可访问其他成员，因此该实例可以继续运行。
                     </li>
                     <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-CA8CEB76-518F-42AD-A994-F66030B6DCB0">规划重做日志文件的大小</a><br>设置重做日志文件的大小时，请考虑是否要归档重做日志。应调整重做日志文件的大小，以便可以将填充的组存档到单个脱机存储介质单元（例如磁带或磁盘），并且介质上剩余的空间最少。
                     </li>
                     <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-AC858C69-317E-4193-838D-59F8DDEA1927">规划重做日志文件的块大小</a><br>与数据库块大小（可介于2K和32K之间）不同，重做日志文件始终默认为块大小，该大小等于磁盘的物理扇区大小。从历史上看，这通常是512字节（512B）。
                     </li>
                     <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-11CAAE2C-D46D-4611-8AAB-F9CB941D3934">选择重做日志文件的数量</a><br>确定数据库实例的适当重做日志文件数的最佳方法是测试不同的配置。在不妨碍LGWR编写重做日志信息的情况下，最佳配置具有最少的组。
                     </li>
                     <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-DF2F4A14-2F01-48F5-BD6A-CB468E69338A">控制档案滞后</a><br>您可以强制所有启用的重做日志线程以固定的时间间隔切换其当前日志。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-BC1F1762-0BB1-4218-B7AF-6160C395AAE4" title="您可以通过完成诸如创建重做日志组和成员，重定位和重命名重做日志成员，删除重做日志组和成员以及强制日志切换等任务来管理重做日志。">管理重做日志</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN13040"></a><a id="ADMIN11309"></a><div class="props_rev_3"><a id="GUID-BDEEE3CB-7917-4C73-AB2D-434583D5F838" name="GUID-BDEEE3CB-7917-4C73-AB2D-434583D5F838"></a><h4 id="ADMIN-GUID-BDEEE3CB-7917-4C73-AB2D-434583D5F838" class="sect4"><span class="enumeration_section">11.2.1</span>复用重做日志文件</h4>
                  <div>
                     <p>为了防止涉及重做日志本身的故障，Oracle数据库允许<span class="bold">多路复用</span>重做日志，这意味着重做日志的两个或多个相同副本可以自动保存在不同的位置。
                     </p>
                     <div class="section">
                        <p>为了获得最大收益，这些位置应位于不同的磁盘上。但是，即使重做日志的所有副本都在同一磁盘上，冗余也可以帮助防止I / O错误，文件损坏等。当多路复用重做日志文件时，LGWR会将相同的重做日志信息同时写入多个相同的重做日志文件，从而消除单点重做日志失败。</p>
                        <p>通过创建重做日志文件<span class="italic">组</span>来实现多路复用。<span class="bold">组</span>由重做日志文件及其多路复用副本组成。据说每个相同的副本都是该组的<span class="bold">成员</span> 。每个重做日志组都由一个数字定义，例如组1，组2等。
                        </p>
                        <div class="figure" id="GUID-BDEEE3CB-7917-4C73-AB2D-434583D5F838__i1006259">
                           <p class="titleinfigure">图11-2多路复用重做日志文件</p><img src="img/admin052.gif" width="444" alt="下面是图11-2的描述" title="下面是图11-2的描述" longdesc="img_text/admin052.html"><br><a href="img_text/admin052.html">“图11-2多路复用重做日志文件”的说明</a></div>
                        <!-- class="figure" -->
                        <p>在<a href="managing-the-redo-log.html#GUID-BDEEE3CB-7917-4C73-AB2D-434583D5F838__i1006259">图11-2中</a> ， <code class="codeph">A_LOG1</code>和<code class="codeph">B_LOG1</code>都是组1的成员， <code class="codeph">A_LOG2</code>和<code class="codeph">B_LOG2</code>都是组2的成员，依此类推。组中的每个成员必须具有相同的大小。
                        </p>
                        <p>日志文件组的每个成员同时处于活动状态 - 即由LGWR同时写入 - 由LGWR分配的相同日志序列号指示。在<a href="managing-the-redo-log.html#GUID-BDEEE3CB-7917-4C73-AB2D-434583D5F838__i1006259">图11-2中</a> ，第一个LGWR同时写入<code class="codeph">A_LOG1</code>和<code class="codeph">B_LOG1</code> 。然后它同时写入<code class="codeph">A_LOG2</code>和<code class="codeph">B_LOG2</code> ，依此类推。LGWR永远不会同时写入不同组的成员（例如， <code class="codeph">A_LOG1</code>和<code class="codeph">B_LOG2</code> ）。
                        </p>
                        <div class="infoboxnote" id="GUID-BDEEE3CB-7917-4C73-AB2D-434583D5F838__GUID-398F16D2-C5A5-485E-9DF2-443296CD3682">
                           <p class="notep1">注意：</p>
                           <p>Oracle建议您多路复用重做日志文件。如果需要恢复，丢失日志文件数据可能是灾难性的。请注意，在复用重做日志时，数据库必须增加它执行的I / O量。根据您的配置，这可能会影响整体数据库性能。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-298AD9D5-4825-4C3E-95A8-29FED1B9B6A5">响应重做日志失败</a><br>每当LGWR无法写入组的成员时，数据库会将该成员标记为<code class="codeph">INVALID</code>并将错误消息写入LGWR跟踪文件和数据库警报日志，以指示不可访问文件的问题。
                        </li>
                        <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-70E18DAF-4D20-41DD-B20E-2209DAECD424">法律和非法配置</a><br>在大多数情况下，多路复用重做日志应该是对称的：重做日志的所有组应该具有相同数量的成员。但是，数据库不要求多路复用重做日志是对称的。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-D77BCD54-908E-49F8-A80D-C8D3E9465D70" title="配置数据库实例重做日志时，可以遵循准则。">规划重做日志</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN11310"></a><div class="props_rev_3"><a id="GUID-298AD9D5-4825-4C3E-95A8-29FED1B9B6A5" name="GUID-298AD9D5-4825-4C3E-95A8-29FED1B9B6A5"></a><h5 id="ADMIN-GUID-298AD9D5-4825-4C3E-95A8-29FED1B9B6A5" class="sect5"><span class="enumeration_section">11.2.1.1</span>响应重做日志失败</h5>
                     <div>
                        <p>每当LGWR无法写入组的成员时，数据库会将该成员标记为<code class="codeph">INVALID</code>并将错误消息写入LGWR跟踪文件和数据库警报日志，以指示不可访问文件的问题。
                        </p>
                        <p>当重做日志成员不可用时，LGWR的具体反应取决于缺乏可用性的原因，如下表所示。</p>
                        <div class="tblformal" id="GUID-298AD9D5-4825-4C3E-95A8-29FED1B9B6A5__GUID-877E0605-EF7F-4CD6-BC61-9B03BE39EC34">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table describes the action of Log Writer (LGWR) when responding to various conditions. The condition is listed in the left column of the table with the corresponding LGWR action described in the right column." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="33%" id="d132399e983">条件</th>
                                    <th align="left" valign="bottom" width="67%" id="d132399e986">LGWR行动</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d132399e991" headers="d132399e983 ">
                                       <p>LGWR可以成功写入组中的至少一个成员</p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d132399e991 d132399e986 ">
                                       <p>写作正常进行。LGWR写入组的可用成员并忽略不可用的成员。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d132399e998" headers="d132399e983 ">
                                       <p>LGWR无法访问日志交换机中的下一个组，因为该组必须已归档</p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d132399e998 d132399e986 ">
                                       <p>数据库操作暂时停止，直到该组可用或存档为止。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d132399e1005" headers="d132399e983 ">
                                       <p>由于介质故障，LGWR在日志切换时无法访问下一组的所有成员</p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d132399e1005 d132399e986 ">
                                       <p>Oracle数据库返回错误，数据库实例关闭。在这种情况下，您可能需要在丢失重做日志文件的情况下对数据库执行介质恢复。</p>
                                       <p>如果数据库检查点已超出丢失的重做日志，则无需进行介质恢复，因为数据库已将重做日志中记录的数据保存到数据文件中。您只需删除无法访问的重做日志组。如果数据库未归档错误日志，请使用<code class="codeph">ALTER DATABASE CLEAR LOGFILE UNARCHIVED</code>禁用归档，然后才能删除日志。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d132399e1017" headers="d132399e983 ">
                                       <p>当LGWR写信给他们时，一群人的所有成员突然无法进入</p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d132399e1017 d132399e986 ">
                                       <p>Oracle数据库返回错误，数据库实例立即关闭。在这种情况下，您可能需要执行介质恢复。如果包含日志的介质实际上没有丢失 - 例如，如果无意中关闭了日志驱动器 - 可能不需要介质恢复。在这种情况下，您只需要重新打开驱动器并让数据库执行自动实例恢复。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-BDEEE3CB-7917-4C73-AB2D-434583D5F838" title="为了防止涉及重做日志本身的故障，Oracle数据库允许多路复用重做日志，这意味着重做日志的两个或多个相同副本可以自动保存在不同的位置。">多路复用重做日志文件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13041"></a><a id="ADMIN11311"></a><div class="props_rev_3"><a id="GUID-70E18DAF-4D20-41DD-B20E-2209DAECD424" name="GUID-70E18DAF-4D20-41DD-B20E-2209DAECD424"></a><h5 id="ADMIN-GUID-70E18DAF-4D20-41DD-B20E-2209DAECD424" class="sect5"><span class="enumeration_section">11.2.1.2</span>法律和非法配置</h5>
                     <div>
                        <p>在大多数情况下，多路复用重做日志应该是对称的：重做日志的所有组应该具有相同数量的成员。但是，数据库不要求多路复用重做日志是对称的。</p>
                        <p>例如，一个组只能有一个成员，其他组可以有两个成员。此配置可防止磁盘故障暂时影响某些重做日志成员，但保留其他重做日志成员。</p>
                        <p>实例重做日志的唯一要求是它至少有两个组。<a href="managing-the-redo-log.html#GUID-70E18DAF-4D20-41DD-B20E-2209DAECD424__i1206318">图11-3</a>显示了合法和非法的多路复用日志配置。第二种配置是非法的，因为它只有一个组。
                        </p>
                        <div class="figure" id="GUID-70E18DAF-4D20-41DD-B20E-2209DAECD424__i1206318">
                           <p class="titleinfigure">图11-3合法和非法多路复用重做日志配置</p><img src="img/admin053.gif" width="476" alt="下面是图11-3的描述" title="下面是图11-3的描述" longdesc="img_text/admin053.html"><br><a href="img_text/admin053.html">“图11-3合法和非法多路复用重做日志配置”的说明</a></div>
                        <!-- class="figure" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-BDEEE3CB-7917-4C73-AB2D-434583D5F838" title="为了防止涉及重做日志本身的故障，Oracle数据库允许多路复用重做日志，这意味着重做日志的两个或多个相同副本可以自动保存在不同的位置。">多路复用重做日志文件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN11312"></a><div class="props_rev_3"><a id="GUID-79C81D0E-2F5C-48F2-8506-E78FF499D089" name="GUID-79C81D0E-2F5C-48F2-8506-E78FF499D089"></a><h4 id="ADMIN-GUID-79C81D0E-2F5C-48F2-8506-E78FF499D089" class="sect4"><span class="enumeration_section">11.2.2</span>将重做日志成员放在不同的磁盘上</h4>
                  <div>
                     <p>设置多路复用重做日志时，请将组成员放在不同的物理磁盘上。如果单个磁盘发生故障，则只有一个组的一个成员对LGWR不可用，而LGWR仍可访问其他成员，因此该实例可以继续运行。</p>
                     <div class="section">
                        <p>如果归档重做日志，请在磁盘上传播重做日志成员，以消除LGWR和ARC <span class="italic">n</span>后台进程之间的争用。例如，如果您有两组多路复用重做日志成员（ <span class="italic">双工</span>重做日志），请将每个成员放在不同的磁盘上，并将归档目标设置为第五个磁盘。这样做可以避免LGWR（写入成员）和ARC <span class="italic">n</span> （阅读成员）之间的争用。
                        </p>
                        <p>还应将数据文件放在与重做日志文件不同的磁盘上，以减少写入数据块和重做记录时的争用。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-D77BCD54-908E-49F8-A80D-C8D3E9465D70" title="配置数据库实例重做日志时，可以遵循准则。">规划重做日志</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11313"></a><div class="props_rev_3"><a id="GUID-CA8CEB76-518F-42AD-A994-F66030B6DCB0" name="GUID-CA8CEB76-518F-42AD-A994-F66030B6DCB0"></a><h4 id="ADMIN-GUID-CA8CEB76-518F-42AD-A994-F66030B6DCB0" class="sect4"><span class="enumeration_section">11.2.3</span>规划重做日志文件的大小</h4>
                  <div>
                     <p>设置重做日志文件的大小时，请考虑是否要归档重做日志。应调整重做日志文件的大小，以便可以将填充的组存档到单个脱机存储介质单元（例如磁带或磁盘），并且介质上剩余的空间最少。</p>
                     <div class="section">
                        <p>例如，假设只有一个填充的重做日志组可以放在磁带上，49％的磁带存储容量仍未使用。在这种情况下，最好稍微减小重做日志文件的大小，以便可以在每个磁带上存档两个日志组。</p>
                        <p>同一多路复用重做日志组的所有成员必须具有相同的大小。不同组的成员可以具有不同的大小。但是，在组之间改变文件大小没有任何优势。如果未在日志切换之间设置检查点，请使所有组的大小相同，以保证检查点定期发生。</p>
                        <p>重做日志文件允许的最小大小为4 MB。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-CA8CEB76-518F-42AD-A994-F66030B6DCB0__GUID-1DBFBC0D-31D3-4CA7-A5F7-E24E1982F84F">
                        <p class="notep1">也可以看看：</p>
                        <p>特定于操作系统的Oracle文档。重做日志文件的默认大小取决于操作系统。</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-D77BCD54-908E-49F8-A80D-C8D3E9465D70" title="配置数据库实例重做日志时，可以遵循准则。">规划重做日志</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12891"></a><div class="props_rev_3"><a id="GUID-AC858C69-317E-4193-838D-59F8DDEA1927" name="GUID-AC858C69-317E-4193-838D-59F8DDEA1927"></a><h4 id="ADMIN-GUID-AC858C69-317E-4193-838D-59F8DDEA1927" class="sect4"><span class="enumeration_section">11.2.4</span>规划重做日志文件的块大小</h4>
                  <div>
                     <p>与数据库块大小（可介于2K和32K之间）不同，重做日志文件始终默认为块大小，该大小等于磁盘的物理扇区大小。从历史上看，这通常是512字节（512B）。</p>
                     <div class="section">
                        <p>一些较新的高容量磁盘驱动器提供4K字节（4K）扇区大小，以增加ECC功能和提高格式效率。大多数Oracle数据库平台都能够检测到更大的扇区大小。然后，数据库会自动在这些磁盘上创建4K块大小的重做日志文件。</p>
                        <p>但是，块大小为4K时，重做浪费会增加。实际上，4K块中的重做浪费量与512B块相比非常重要。您可以通过查看存储在<code class="codeph">V$SESSTAT</code>和<code class="codeph">V$SYSSTAT</code>视图中的统计信息来确定重做浪费的数量。
                        </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT name，value FROM v $ sysstat WHERE name ='redo wastage'; NAME VALUE -------------------------------- ---------- redo wastage 17941684</pre><p>为避免额外的重做浪费，如果您使用仿真模式磁盘 - 在磁盘接口上模拟512B扇区大小的4K扇区磁盘驱动器 - 您可以通过指定512B块大小覆盖重做日志的默认4K块大小或对于某些平台，1K块大小。但是，当重做日志写入与4K物理扇区的开头不对齐时，会导致性能显着下降。由于4K物理扇区中的八个512B插槽中的七个未对齐，因此通常会发生性能下降。因此，在4K扇区大小的仿真模式磁盘上规划重做日志块大小时，必须评估性能和磁盘浪费之间的权衡。</p>
                        <p>您可以使用<code class="codeph">CREATE</code> <code class="codeph">DATABASE</code> ， <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code>和<code class="codeph">CREATE</code> <code class="codeph">CONTROLFILE</code>语句中的<code class="codeph">BLOCKSIZE</code>关键字指定联机重做日志文件的块大小。在某些平台上，允许的块大小为512和4096。在其他平台上，允许的块大小为1024和4096。
                        </p>
                        <p>以下语句添加块大小为512B的重做日志文件组。 <code class="codeph">BLOCKSIZE</code> <code class="codeph">512</code>子句有效，但512B扇区大小的磁盘不需要。对于4K扇区大小的仿真模式磁盘， <code class="codeph">BLOCKSIZE</code> <code class="codeph">512</code>子句会覆盖默认的4K大小。
                        </p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE orcl ADD LOGFILE GROUP 4（'/ u01/logs/orcl/redo04a.log','/u01/logs/orcl/redo04b.log'）SIZE 100M BLOCKSIZE 512 REUSE;</pre><p>要确定重做日志文件块大小，请运行以下查询：</p><pre class="oac_no_warn" dir="ltr">SQL&gt;从V $ LOG中选择BLOCKSIZE; BLOCKSIZE --------- 512</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-AC858C69-317E-4193-838D-59F8DDEA1927__GUID-939D5C96-F280-4E34-848E-1DD8548D34AE">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code>命令的信息，请<a href="../sqlrf/ALTER-DATABASE.html#SQLRF00802" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a> 。
                              </p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">V$SESSTAT</code>视图的信息，请参阅<a href="../refrn/V-SESSTAT.html#REFRN30232" target="_blank"><span class="italic">Oracle数据库参考</span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">V$SYSSTAT</code>视图的信息，请<a href="../refrn/V-SYSSTAT.html#REFRN30272" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-D77BCD54-908E-49F8-A80D-C8D3E9465D70" title="配置数据库实例重做日志时，可以遵循准则。">规划重做日志</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11314"></a><div class="props_rev_3"><a id="GUID-11CAAE2C-D46D-4611-8AAB-F9CB941D3934" name="GUID-11CAAE2C-D46D-4611-8AAB-F9CB941D3934"></a><h4 id="ADMIN-GUID-11CAAE2C-D46D-4611-8AAB-F9CB941D3934" class="sect4"><span class="enumeration_section">11.2.5</span>选择重做日志文件数</h4>
                  <div>
                     <p>确定数据库实例的适当重做日志文件数的最佳方法是测试不同的配置。在不妨碍LGWR编写重做日志信息的情况下，最佳配置具有最少的组。</p>
                     <div class="section">
                        <p>在某些情况下，数据库实例可能只需要两个组。在其他情况下，数据库实例可能需要其他组来保证LGWR始终可以使用回收组。在测试期间，确定当前重做日志配置是否令人满意的最简单方法是检查LGWR跟踪文件和数据库警报日志的内容。如果消息指示LGWR经常因为检查点尚未完成或组尚未归档而必须等待组，请添加组。</p>
                        <p>在设置或更改实例重做日志的配置之前，请考虑可以限制重做日志文件数的参数。以下参数限制了可以添加到数据库的重做日志文件的数量：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">CREATE</code> <code class="codeph">DATABASE</code>语句中使用的<code class="codeph">MAXLOGFILES</code>参数确定每个数据库的最大重做日志文件组数。组值的范围可以从1到<code class="codeph">MAXLOGFILES</code> 。您可以超出<code class="codeph">MAXLOGFILES</code>限制，并根据需要扩展控制文件。如果未为<code class="codeph">CREATE</code> <code class="codeph">DATABASE</code>语句指定<code class="codeph">MAXLOGFILES</code> ，则数据库使用特定于操作系统的默认值。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">CREATE</code> <code class="codeph">DATABASE</code>语句中使用的<code class="codeph">MAXLOGMEMBERS</code>参数确定每个组的最大成员数。与<code class="codeph">MAXLOGFILES</code> ，覆盖此上限的唯一方法是重新创建数据库或控制文件。因此，在创建数据库之前考虑此限制很重要。如果没有为<code class="codeph">CREATE</code> <code class="codeph">DATABASE</code>语句指定<code class="codeph">MAXLOGMEMBERS</code>参数，则数据库使用操作系统默认值。
                              </p>
                              <div class="infoboxnotealso" id="GUID-11CAAE2C-D46D-4611-8AAB-F9CB941D3934__GUID-C901AC4F-8E71-4751-955A-9114927320BE">
                                 <p class="notep1">也可以看看：</p>
                                 <p>您的操作系统特定Oracle文档，用于<code class="codeph">MAXLOGFILES</code>和<code class="codeph">MAXLOGMEMBERS</code>参数的默认值和合法值</p>
                              </div>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-D77BCD54-908E-49F8-A80D-C8D3E9465D70" title="配置数据库实例重做日志时，可以遵循准则。">规划重做日志</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11315"></a><div class="props_rev_3"><a id="GUID-DF2F4A14-2F01-48F5-BD6A-CB468E69338A" name="GUID-DF2F4A14-2F01-48F5-BD6A-CB468E69338A"></a><h4 id="ADMIN-GUID-DF2F4A14-2F01-48F5-BD6A-CB468E69338A" class="sect4"><span class="enumeration_section">11.2.6</span>控制档案滞后</h4>
                  <div>
                     <p>您可以强制所有启用的重做日志线程以固定的时间间隔切换其当前日志。</p>
                     <p>在主/备用数据库配置中，通过在主站点上归档重做日志然后将它们发送到备用数据库，可以对备用数据库进行更改。备用数据库正在应用的更改可能会滞后于主数据库上发生的更改，因为备用数据库必须等待主数据库重做日志中的更改存档（进入存档的重做日志），然后运到它。要限制此延迟，可以设置<code class="codeph">ARCHIVE_LAG_TARGET</code>初始化参数。通过设置此参数，您可以以秒为单位指定延迟可以达到的时间长度。
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-B98F2908-4EB1-42E8-B7A8-B1BAE5BBD13E">设置ARCHIVE_LAG_TARGET初始化参数</a><br>设置<code class="codeph">ARCHIVE_LAG_TARGET</code>初始化参数时，会使数据库定期检查实例的当前重做日志，并确定何时切换日志。
                        </li>
                        <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-32967FFB-598B-42D5-8A79-9ED5BC3EDC68">影响ARCHIVE_LAG_TARGET设置的因素</a><br>设置<code class="codeph">ARCHIVE_LAG_TARGET</code>初始化参数时，需要考虑几个因素。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-D77BCD54-908E-49F8-A80D-C8D3E9465D70" title="配置数据库实例重做日志时，可以遵循准则。">规划重做日志</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN11316"></a><div class="props_rev_3"><a id="GUID-B98F2908-4EB1-42E8-B7A8-B1BAE5BBD13E" name="GUID-B98F2908-4EB1-42E8-B7A8-B1BAE5BBD13E"></a><h5 id="ADMIN-GUID-B98F2908-4EB1-42E8-B7A8-B1BAE5BBD13E" class="sect5"><span class="enumeration_section">11.2.6.1</span>设置ARCHIVE_LAG_TARGET初始化参数</h5>
                     <div>
                        <p>设置<code class="codeph">ARCHIVE_LAG_TARGET</code>初始化参数时，会使数据库定期检查实例的当前重做日志，并确定何时切换日志。
                        </p>
                        <div class="section">
                           <p>如果满足以下条件，则实例将切换日志：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>当前日志是在<span class="italic">n</span>秒前创建的，当前日志的估计存档时间是<span class="italic">m</span>秒（与当前日志中使用的重做块数成比例），其中<span class="italic">n</span> + <span class="italic">m</span>超过<code class="codeph">ARCHIVE_LAG_TARGET</code>初始化参数的值。
                                 </p>
                              </li>
                              <li>
                                 <p>当前日志包含重做记录。</p>
                              </li>
                           </ul>
                           <p>在Oracle Real Application Clusters环境中，该实例也会导致<span class="bold"> </span>如果他们落后于其他线程来切换和存档他们的日志。当群集中的一个实例比其他实例更空闲时（例如，当您运行Oracle Real Application Clusters的双节点主/辅助配置时），这可能特别有用。
                           </p>
                           <p><code class="codeph">ARCHIVE_LAG_TARGET</code>初始化参数提供数据库当前日志可以跨越多长时间（以秒为单位）的上限。由于还会考虑估计的存档时间，因此这不是确切的日志切换时间。
                           </p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>设置<code class="codeph">ARCHIVE_LAG_TARGET</code>初始化参数。
                                 </p>
                              </li>
                           </ul>
                           <p>以下初始化参数设置将日志切换间隔设置为30分钟（典型值）。</p><pre class="oac_no_warn" dir="ltr">ARCHIVE_LAG_TARGET = 1800</pre><p>值为0将禁用此基于时间的日志切换功能。这是默认设置。</p>
                           <p>即使没有备用数据库，也可以设置<code class="codeph">ARCHIVE_LAG_TARGET</code>初始化参数。例如，可以专门设置<code class="codeph">ARCHIVE_LAG_TARGET</code>参数以强制切换和存档日志。
                           </p>
                           <p><code class="codeph">ARCHIVE_LAG_TARGET</code>是一个动态参数，可以使用<code class="codeph">ALTER SYSTEM SET</code>语句进行设置。
                           </p>
                           <div class="infoboxnote" id="GUID-B98F2908-4EB1-42E8-B7A8-B1BAE5BBD13E__GUID-52A55073-257E-4CBE-9561-AAAD3BCD0065">
                              <p class="notep1">注意：</p>
                              <p>必须在Oracle Real Application Clusters环境的所有实例中将<code class="codeph">ARCHIVE_LAG_TARGET</code>参数设置为相同的值。如果不这样做会导致不可预测的行为。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-DF2F4A14-2F01-48F5-BD6A-CB468E69338A" title="您可以强制所有启用的重做日志线程以固定的时间间隔切换其当前日志。">控制存档延迟</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11317"></a><div class="props_rev_3"><a id="GUID-32967FFB-598B-42D5-8A79-9ED5BC3EDC68" name="GUID-32967FFB-598B-42D5-8A79-9ED5BC3EDC68"></a><h5 id="ADMIN-GUID-32967FFB-598B-42D5-8A79-9ED5BC3EDC68" class="sect5"><span class="enumeration_section">11.2.6.2</span>影响ARCHIVE_LAG_TARGET设置的因素</h5>
                     <div>
                        <p>设置<code class="codeph">ARCHIVE_LAG_TARGET</code>初始化参数时，需要考虑几个因素。
                        </p>
                        <p>在确定是否要设置<code class="codeph">ARCHIVE_LAG_TARGET</code>初始化参数以及确定此参数的值时，请考虑以下因素。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>切换（以及归档）日志的开销</p>
                           </li>
                           <li>
                              <p>由于日志已满的情况，正常日志切换的频率</p>
                           </li>
                           <li>
                              <p>备用数据库中允许多少重做丢失</p>
                           </li>
                        </ul>
                        <p>如果自然日志切换比指定的间隔更频繁地发生，则设置<code class="codeph">ARCHIVE_LAG_TARGET</code>可能不是非常有用。然而，在重做生成速度不规则的情况下，该间隔确实为每个当前日志覆盖的时间范围提供上限。
                        </p>
                        <p>如果<code class="codeph">ARCHIVE_LAG_TARGET</code>初始化参数设置为非常低的值，则可能会对性能产生负面影响。这可能会导致频繁的日志切换。将参数设置为合理的值，以免降低主数据库的性能。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-DF2F4A14-2F01-48F5-BD6A-CB468E69338A" title="您可以强制所有启用的重做日志线程以固定的时间间隔切换其当前日志。">控制存档延迟</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADMIN11318"></a><div class="props_rev_3"><a id="GUID-081AE57B-A821-4F26-97B2-4B141FDB3946" name="GUID-081AE57B-A821-4F26-97B2-4B141FDB3946"></a><h3 id="ADMIN-GUID-081AE57B-A821-4F26-97B2-4B141FDB3946" class="sect3"><span class="enumeration_section">11.3</span>创建重做日志组和成员</h3>
               <div>
                  <p>规划数据库的重做日志，并在数据库创建期间创建所有必需的组和重做日志文件的成员。但是，您可能希望创建其他组或成员。例如，将组添加到重做日志可以纠正重做日志组可用性问题。</p>
                  <p>要创建新的重做日志组和成员，您必须具有<code class="codeph">ALTER DATABASE</code>系统特权。数据库最多可包含<code class="codeph">MAXLOGFILES</code>组。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-3CEE7E42-F1C2-49B1-B15C-35F3BA921176">创建重做日志组</a><br>要创建一组新的重做日志文件，请使用带有<code class="codeph">ADD LOGFILE</code>子句的SQL语句<code class="codeph">ALTER DATABASE</code> 。
                     </li>
                     <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-8402EE7E-21E6-4866-9D8B-66C87B5BA8F2">创建重做日志成员</a><br>在某些情况下，可能没有必要创建一组完整的重做日志文件。组可能已存在，但不完整，因为组中的一个或多个成员被删除（例如，由于磁盘故障）。在这种情况下，您可以将新成员添加到现有组。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-081AE57B-A821-4F26-97B2-4B141FDB3946__GUID-1B9F224C-CF0C-47B8-8944-85452E876B7B">
                     <p class="notep1">也可以看看：</p>
                     <p>有关<code class="codeph">ALTER DATABASE</code>语句的完整说明，请<a href="../sqlrf/ALTER-DATABASE.html#SQLRF00802" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-BC1F1762-0BB1-4218-B7AF-6160C395AAE4" title="您可以通过完成诸如创建重做日志组和成员，重定位和重命名重做日志成员，删除重做日志组和成员以及强制日志切换等任务来管理重做日志。">管理重做日志</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN11319"></a><div class="props_rev_3"><a id="GUID-3CEE7E42-F1C2-49B1-B15C-35F3BA921176" name="GUID-3CEE7E42-F1C2-49B1-B15C-35F3BA921176"></a><h4 id="ADMIN-GUID-3CEE7E42-F1C2-49B1-B15C-35F3BA921176" class="sect4"><span class="enumeration_section">11.3.1</span>创建重做日志组</h4>
                  <div>
                     <p>要创建一组新的重做日志文件，请使用带有<code class="codeph">ADD LOGFILE</code>子句的SQL语句<code class="codeph">ALTER DATABASE</code> 。
                     </p>
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<code class="codeph">ADD LOGFILE</code>子句运行SQL语句<code class="codeph">ALTER DATABASE</code> 。
                              </p>
                           </li>
                        </ul>
                        <p>例如，以下语句将一组新的重做日志添加到数据库：</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE添加LOGFILE（'/ orcle / dbs / log1c.rdo'，'/ oracle / dbs / log2c.rdo'）SIZE 100M;</pre><div class="infoboxnote" id="GUID-3CEE7E42-F1C2-49B1-B15C-35F3BA921176__GUID-CA775AF7-46C3-4CE0-998D-8C7ADD73437A">
                           <p class="notep1">注意：</p>
                           <p>提供新日志成员的完整路径名以指定其位置。否则，将在数据库服务器的默认目录或当前目录中创建文件，具体取决于您的操作系统。</p>
                        </div>
                        <p>您还可以使用<code class="codeph">GROUP</code>子句指定标识组的编号：</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE添加LOGFILE GROUP 10（'/ orcle / dbs / log1c.rdo'，'/ oracle / dbs / log2c.rdo'）SIZE 100M BLOCKSIZE 512;</pre><p>使用组号可以更轻松地管理重做日志组。但是，组编号必须介于1和<code class="codeph">MAXLOGFILES</code>之间。不要跳过重做日志文件组编号（即，不要对组10,20,30等编号），否则将占用数据库控制文件中不必要的空间。
                        </p>
                        <p>在前面的语句中， <code class="codeph">BLOCKSIZE</code>子句是可选的。有关详细信息，请参阅<span class="q">“ <a href="managing-the-redo-log.html#GUID-AC858C69-317E-4193-838D-59F8DDEA1927" title="与数据库块大小（可介于2K和32K之间）不同，重做日志文件始终默认为块大小，该大小等于磁盘的物理扇区大小。从历史上看，这通常是512字节（512B）。">规划重做日志文件的块大小</a> ”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-081AE57B-A821-4F26-97B2-4B141FDB3946" title="规划数据库的重做日志，并在数据库创建期间创建所有必需的组和重做日志文件的成员。但是，您可能希望创建其他组或成员。例如，将组添加到重做日志可以纠正重做日志组可用性问题。">创建重做日志组和成员</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11320"></a><div class="props_rev_3"><a id="GUID-8402EE7E-21E6-4866-9D8B-66C87B5BA8F2" name="GUID-8402EE7E-21E6-4866-9D8B-66C87B5BA8F2"></a><h4 id="ADMIN-GUID-8402EE7E-21E6-4866-9D8B-66C87B5BA8F2" class="sect4"><span class="enumeration_section">11.3.2</span>创建重做日志成员</h4>
                  <div>
                     <p>在某些情况下，可能没有必要创建一组完整的重做日志文件。组可能已存在，但不完整，因为组中的一个或多个成员被删除（例如，由于磁盘故障）。在这种情况下，您可以将新成员添加到现有组。</p>
                     <div class="section">
                        <p></p>
                        <p>要为现有组创建新的重做日志成员，请执行以下操作：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<code class="codeph">ADD LOGFILE MEMBER</code>子句运行SQL语句<code class="codeph">ALTER DATABASE</code> 。
                              </p>
                           </li>
                        </ul>
                        <p>例如，以下语句将新的重做日志成员添加到重做日志组编号2：</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE将LOGFILE成员'/oracle/dbs/log2b.rdo'添加到组2;</pre><p>请注意，必须指定文件名，但不必指定大小。新成员的大小取决于组中现有成员的大小。</p>
                        <p>使用<code class="codeph">ALTER DATABASE</code>语句时，您也可以通过在<code class="codeph">TO</code>子句中指定组的所有其他成员来标识目标组，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE添加LOGFILE成员'/oracle/dbs/log2c.rdo'TO（'/ orcle / dbs / log2a.rdo'，'/ oracle / dbs / log2b.rdo'）;</pre><div class="infoboxnote" id="GUID-8402EE7E-21E6-4866-9D8B-66C87B5BA8F2__GUID-FB8FC7B6-B6D9-4BE4-93C2-57F8C72E4C87">
                           <p class="notep1">注意：</p>
                           <p>完全指定新日志成员的文件名，以指示应在何处创建操作系统文件。否则，将根据您的操作系统在数据库服务器的默认目录或当前目录中创建文件。您还可能注意到新日志成员的状态显示为<code class="codeph">INVALID</code> 。这是正常的，它在第一次使用时会变为活动状态（空白）。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-081AE57B-A821-4F26-97B2-4B141FDB3946" title="规划数据库的重做日志，并在数据库创建期间创建所有必需的组和重做日志文件的成员。但是，您可能希望创建其他组或成员。例如，将组添加到重做日志可以纠正重做日志组可用性问题。">创建重做日志组和成员</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN12596"></a><a id="ADMIN11321"></a><div class="props_rev_3"><a id="GUID-F593023B-3071-4776-95F2-9B8B6C6E670B" name="GUID-F593023B-3071-4776-95F2-9B8B6C6E670B"></a><h3 id="ADMIN-GUID-F593023B-3071-4776-95F2-9B8B6C6E670B" class="sect3"><span class="enumeration_section">11.4</span>重定位和重命名重做日志成员</h3>
               <div>
                  <p>您可以使用操作系统命令重定位重做日志，然后使用<code class="codeph">ALTER DATABASE</code>语句使数据库知道其新名称（位置）。
                  </p>
                  <div class="section">
                     <p>例如，如果要删除当前用于某些重做日志文件的磁盘，或者数据文件和多个重做日志文件存储在同一磁盘上并且应该分开以减少争用，则此过程是必需的。</p>
                     <p>要重命名重做日志成员，您必须具有<code class="codeph">ALTER DATABASE</code>系统特权。此外，您可能还需要操作系统权限才能将文件复制到所需的位置以及打开和备份数据库的权限。
                     </p>
                     <p>在重新定位重做日志或对数据库进行任何其他结构更改之前，请在执行操作时遇到问题时完全备份数据库。作为预防措施，在重命名或重定位一组重做日志文件后，立即备份数据库控制文件。</p>
                     <p>使用以下步骤重定位重做日志。用于说明这些步骤的示例假定：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>日志文件位于两个磁盘上： <code class="codeph">diska</code>和<code class="codeph">diskb</code> 。
                           </p>
                        </li>
                        <li>
                           <p>重做日志是双工的：一个组由成员<code class="codeph">/diska/logs/log1a.rdo</code>和<code class="codeph">/diskb/logs/log1b.rdo</code>组成，第二个组由成员<code class="codeph">/diska/logs/log2a.rdo</code>和<code class="codeph">/diskb/logs/log2b.rdo</code> 。
                           </p>
                        </li>
                        <li>
                           <p>位于<code class="codeph">diska</code>上的重做日志文件必须重定位到<code class="codeph">diskc</code> 。新文件名将反映新位置： <code class="codeph">/diskc/logs/log1c.rdo</code>和<code class="codeph">/diskc/logs/log2c.rdo</code> 。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>要重命名重做日志成员：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p></p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>关闭数据库。</span><div><pre class="oac_no_warn" dir="ltr">关掉</pre></div>
                     </li>
                     <li class="stepexpand"><span>将重做日志文件复制到新位置。</span><div>
                           <p>必须使用相应的操作系统命令复制操作系统文件，例如重做日志成员。有关复制文件的详细信息，请参阅操作系统特定的文档。</p>
                           <div class="infoboxnote" id="GUID-F593023B-3071-4776-95F2-9B8B6C6E670B__GUID-B4A61C30-9FA9-41B3-B653-F8AD0617126C">
                              <p class="notep1">注意：</p>
                              <p>您可以执行操作系统命令来复制文件（或执行其他操作系统命令），而无需使用<code class="codeph">HOST</code>命令退出SQL * Plus。某些操作系统允许您使用字符代替<code class="codeph">HOST</code>一词。例如，您可以使用感叹号（！）在UNIX中。</p>
                           </div>
                           <p>以下示例使用操作系统命令（UNIX）将重做日志成员移动到新位置：</p><pre class="oac_no_warn" dir="ltr">mv /diska/logs/log1a.rdo /diskc/logs/log1c.rdo mv /diska/logs/log2a.rdo /diskc/logs/log2c.rdo</pre></div>
                     </li>
                     <li class="stepexpand"><span>启动数据库，mount，但不要打开它。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT / as SYSDBA STARTUP MOUNT</pre></div>
                     </li>
                     <li class="stepexpand"><span>重命名重做日志成员。</span><div>
                           <p>使用带有<code class="codeph">RENAME FILE</code>子句的<code class="codeph">ALTER DATABASE</code>语句重命名数据库重做日志文件。
                           </p><pre class="oac_no_warn" dir="ltr">更改数据库重命名文件'/diska/logs/log1a.rdo'，'/ diska / logs / log2a.rdo'TO'/diskc /logs / log1c.rdo'，'/ diskc / logs / log2c.rdo';</pre></div>
                     </li>
                     <li class="stepexpand"><span>打开数据库以进行正常操作。</span><div>
                           <p>打开数据库时，重做日志更改将生效。</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE OPEN;</pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-BC1F1762-0BB1-4218-B7AF-6160C395AAE4" title="您可以通过完成诸如创建重做日志组和成员，重定位和重命名重做日志成员，删除重做日志组和成员以及强制日志切换等任务来管理重做日志。">管理重做日志</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN11322"></a><div class="props_rev_3"><a id="GUID-54E1DA00-B999-4463-B868-85ADDC108D5D" name="GUID-54E1DA00-B999-4463-B868-85ADDC108D5D"></a><h3 id="ADMIN-GUID-54E1DA00-B999-4463-B868-85ADDC108D5D" class="sect3"><span class="enumeration_section">11.5</span>删除重做日志组和成员</h3>
               <div>
                  <p>在某些情况下，您可能希望删除整组重做日志成员。</p>
                  <p>例如，您希望减少实例重做日志中的组数。在不同的情况下，您可能希望删除一个或多个特定的重做日志成员。例如，如果发生磁盘故障，您可能需要删除故障磁盘上的所有重做日志文件，以便数据库不会尝试写入不可访问的文件。在其他情况下，特定的重做日志文件变得不必要。例如，文件可能存储在不适当的位置。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-FDF5B2DF-90AE-4668-A271-98B21179058F">删除日志组</a><br>您可以删除重做日志组。
                     </li>
                     <li class="ulchildlink"><a href="managing-the-redo-log.html#GUID-31B302F1-8B81-4A2C-AF35-A84FB6216820">删除重做日志成员</a><br>您可以删除重做日志成员。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-BC1F1762-0BB1-4218-B7AF-6160C395AAE4" title="您可以通过完成诸如创建重做日志组和成员，重定位和重命名重做日志成员，删除重做日志组和成员以及强制日志切换等任务来管理重做日志。">管理重做日志</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN11323"></a><div class="props_rev_3"><a id="GUID-FDF5B2DF-90AE-4668-A271-98B21179058F" name="GUID-FDF5B2DF-90AE-4668-A271-98B21179058F"></a><h4 id="ADMIN-GUID-FDF5B2DF-90AE-4668-A271-98B21179058F" class="sect4"><span class="enumeration_section">11.5.1</span>删除日志组</h4>
                  <div>
                     <p>您可以删除重做日志组。</p>
                     <div class="section">
                        <p>要删除重做日志组，您必须具有<code class="codeph">ALTER DATABASE</code>系统特权。在删除重做日志组之前，请考虑以下限制和预防措施：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>无论组中的成员数是多少，实例都需要至少两组重做日志文件。（一个小组由一个或多个成员组成。）</p>
                           </li>
                           <li>
                              <p>只有在重做日志组处于非活动状态时，才能删除它。如果必须删除当前组，则首先强制执行日志切换。</p>
                           </li>
                           <li>
                              <p>在删除之前，请确保存档重做日志组（如果已启用存档）。要查看是否发生了这种情况，请使用<code class="codeph">V$LOG</code>视图。
                              </p><pre class="oac_no_warn" dir="ltr">SELECT GROUP＃，ARCHIVED，STATUS FROM V $ LOG; GROUP＃ARC STATUS --------- --- ---------------- 1 YES ACTIVE 2 NO CURRENT 3 YES INACTIVE 4 YES INACTIVE</pre></li>
                        </ul>
                        <p>要删除重做日志组：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<code class="codeph">DROP LOGFILE</code>子句运行SQL语句<code class="codeph">ALTER DATABASE</code> 。
                              </p>
                           </li>
                        </ul>
                        <p>例如，以下语句删除重做日志组编号3：</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE DROP LOGFILE GROUP 3;</pre><p>从数据库中删除重做日志组时，如果未使用Oracle托管文件功能，则不会从磁盘中删除操作系统文件。而是更新相关数据库的控制文件以从数据库结构中删除组的成员。删除重做日志组后，请确保已成功完成删除，然后使用相应的操作系统命令删除已删除的重做日志文件。</p>
                        <p>使用Oracle Managed Files时，系统会自动为您清理操作系统文件。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-54E1DA00-B999-4463-B868-85ADDC108D5D" title="在某些情况下，您可能希望删除整组重做日志成员。">删除重做日志组和成员</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11324"></a><div class="props_rev_3"><a id="GUID-31B302F1-8B81-4A2C-AF35-A84FB6216820" name="GUID-31B302F1-8B81-4A2C-AF35-A84FB6216820"></a><h4 id="ADMIN-GUID-31B302F1-8B81-4A2C-AF35-A84FB6216820" class="sect4"><span class="enumeration_section">11.5.2</span>删除重做日志成员</h4>
                  <div>
                     <p>您可以删除重做日志成员。</p>
                     <div class="section">
                        <p>要删除重做日志成员，您必须具有<code class="codeph">ALTER DATABASE</code>系统特权。删除单个重做日志成员之前，请考虑以下限制和注意事项：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>允许删除重做日志文件，以便多路复用重做日志暂时不对称。例如，如果使用双工组重做日志文件，则可以删除一个组中的一个成员，即使所有其他组各有两个成员。但是，您应该立即纠正这种情况，以便所有组至少有两个成员，从而消除重做日志可能出现的单点故障。</p>
                           </li>
                           <li>
                              <p>无论组中的成员数是多少，实例始终至少需要两个有效的重做日志文件组。（一个小组由一个或多个成员组成。）如果要删除的成员是该组的最后一个有效成员，则在其他成员生效之前，您不能删除该成员。要查看重做日志文件状态，请使用<code class="codeph">V$LOGFILE</code>视图。如果数据库无法访问重做日志文件，则该日志文件将变为<code class="codeph">INVALID</code> 。如果数据库怀疑它不完整或正确，它将变为<code class="codeph">STALE</code> 。过时的日志文件在其下一次成为活动组时再次变为有效。
                              </p>
                           </li>
                           <li>
                              <p>仅当重做日志成员<span class="italic">不</span>属于活动组或当前组时，才可以删除该日志成员。要删除活动组的成员，请首先强制执行日志切换。
                              </p>
                           </li>
                           <li>
                              <p>在删除成员之前，请确保归档重做日志成员所属的组（如果已启用存档）。要查看是否发生了这种情况，请使用<code class="codeph">V$LOG</code>视图。
                              </p>
                           </li>
                        </ul>
                        <p>要删除特定的非活动重做日志成员：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<code class="codeph">DROP LOGFILE MEMBER</code>子句运行<code class="codeph">ALTER DATABASE</code>语句。
                              </p>
                           </li>
                        </ul>
                        <p>以下语句删除了重做日志<code class="codeph">/oracle/dbs/log3c.rdo</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE DROP LOGFILE MEMBER'/oracle/dbs/log3c.rdo';</pre><p>从数据库中删除重做日志成员时，不会从磁盘中删除操作系统文件。而是更新关联数据库的控制文件以从数据库结构中删除该成员。删除重做日志文件后，请确保已成功完成删除，然后使用相应的操作系统命令删除已删除的重做日志文件。</p>
                        <p>要删除活动组的成员，必须先强制执行日志切换。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-54E1DA00-B999-4463-B868-85ADDC108D5D" title="在某些情况下，您可能希望删除整组重做日志成员。">删除重做日志组和成员</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN11325"></a><div class="props_rev_3"><a id="GUID-6A7FB6CB-AF29-40BC-BDB3-B514C502B2F6" name="GUID-6A7FB6CB-AF29-40BC-BDB3-B514C502B2F6"></a><h3 id="ADMIN-GUID-6A7FB6CB-AF29-40BC-BDB3-B514C502B2F6" class="sect3"><span class="enumeration_section">11.6</span>强制日志切换</h3>
               <div>
                  <p>当LGWR停止写入一个重做日志组并开始写入另一个时，会发生日志切换。默认情况下，当前重做日志文件组填充时会自动进行日志切换。</p>
                  <div class="section">
                     <p>您可以强制日志切换使当前活动组处于非活动状态，并可用于重做日志维护操作。例如，您要删除当前活动的组，但在该组处于非活动状态之前无法执行此操作。如果必须在完全填充组成员之前的特定时间归档当前活动组，则可能还需要强制执行日志切换。此选项在具有大量重做日志文件的配置中非常有用，这些文件需要很长时间才能填充。</p>
                     <p>要强制执行日志切换，您必须具有<code class="codeph">ALTER SYSTEM</code>权限。
                     </p>
                     <p>要强制日志切换，</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用<code class="codeph">SWITCH LOGFILE</code>子句运行<code class="codeph">ALTER SYSTEM</code>语句。
                           </p>
                        </li>
                     </ul>
                     <p>例如，以下语句强制执行日志切换：</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SWITCH LOGFILE;</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-BC1F1762-0BB1-4218-B7AF-6160C395AAE4" title="您可以通过完成诸如创建重做日志组和成员，重定位和重命名重做日志成员，删除重做日志组和成员以及强制日志切换等任务来管理重做日志。">管理重做日志</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN11326"></a><div class="props_rev_3"><a id="GUID-E8BC43CA-D047-4AEF-AB4A-2566BE44D73A" name="GUID-E8BC43CA-D047-4AEF-AB4A-2566BE44D73A"></a><h3 id="ADMIN-GUID-E8BC43CA-D047-4AEF-AB4A-2566BE44D73A" class="sect3"><span class="enumeration_section">11.7</span>验证重做日志文件中的块</h3>
               <div>
                  <p>您可以将数据库配置为使用校验和来验证重做日志文件中的块。</p>
                  <div class="section">
                     <p>如果将初始化参数<code class="codeph">DB_BLOCK_CHECKSUM</code>设置为<code class="codeph">TYPICAL</code> （缺省值），则数据库会在每个数据库块写入磁盘时计算每个数据库块的校验和，包括每个重做日志块在写入当前日志时。校验和存储在块的标题中。
                     </p>
                     <p>Oracle数据库使用校验和来检测重做日志块中的损坏。在恢复期间从存档日志中读取块时以及将块写入存档日志文件时，数据库将验证重做日志块。如果检测到损坏，则会引发错误并将其写入警报日志。</p>
                     <p>如果在尝试存档时在重做日志块中检测到损坏，系统将尝试从组中的另一个成员读取该块。如果该块在重做日志组的所有成员中都已损坏，则无法继续存档。</p>
                     <p>可以使用<code class="codeph">ALTER SYSTEM</code>语句动态更改<code class="codeph">DB_BLOCK_CHECKSUM</code>参数的值。
                     </p>
                     <div class="infoboxnote" id="GUID-E8BC43CA-D047-4AEF-AB4A-2566BE44D73A__GUID-EBB19B3C-1CB1-466F-8DC7-5BB6BAEBCBCF">
                        <p class="notep1">注意：</p>
                        <p>启用<code class="codeph">DB_BLOCK_CHECKSUM</code> ，数据库性能会有轻微的开销和降低。监视数据库性能，以确定使用数据块校验和检测损坏的好处是否超过性能影响。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-E8BC43CA-D047-4AEF-AB4A-2566BE44D73A__GUID-39377A4B-92ED-4C75-8D1B-326682B01655">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../refrn/DB_BLOCK_CHECKSUM.html#REFRN10030" target="_blank"><span class="italic">Oracle Database Reference，</span></a>用于描述<code class="codeph">DB_BLOCK_CHECKSUM</code>初始化参数</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-BC1F1762-0BB1-4218-B7AF-6160C395AAE4" title="您可以通过完成诸如创建重做日志组和成员，重定位和重命名重做日志成员，删除重做日志组和成员以及强制日志切换等任务来管理重做日志。">管理重做日志</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN11327"></a><div class="props_rev_3"><a id="GUID-AA0EBC79-6670-409E-AED1-666FCEF3F25F" name="GUID-AA0EBC79-6670-409E-AED1-666FCEF3F25F"></a><h3 id="ADMIN-GUID-AA0EBC79-6670-409E-AED1-666FCEF3F25F" class="sect3"><span class="enumeration_section">11.8</span>清除重做日志文件</h3>
               <div>
                  <p>数据库打开时，重做日志文件可能会损坏，并最终停止数据库活动，因为归档无法继续。</p>
                  <div class="section">
                     <p>在这种情况下，要在不关闭数据库的情况下重新初始化文件：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>运行<code class="codeph">ALTER DATABASE CLEAR LOGFILE</code> SQL语句。
                           </p>
                        </li>
                     </ul>
                     <p>以下语句清除重做日志组编号3中的日志文件：</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE CLEAR LOGFILE GROUP 3;</pre><p>此语句克服了两种情况：无法删除重做日志：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果只有两个日志组</p>
                        </li>
                        <li>
                           <p>损坏的重做日志文件属于当前组</p>
                        </li>
                     </ul>
                     <p>如果尚未归档损坏的重做日志文件，请在语句中使用<code class="codeph">UNARCHIVED</code>关键字。
                     </p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE CLEAR UNARCHIVED LOGFILE GROUP 3;</pre><p>此语句清除损坏的重做日志并避免存档它们。已清除的重做日志即使未归档也可供使用。</p>
                     <p>如果清除恢复备份所需的日志文件，则无法再从该备份恢复。数据库在警报日志中写入一条消息，描述无法恢复的备份。</p>
                     <div class="infoboxnote" id="GUID-AA0EBC79-6670-409E-AED1-666FCEF3F25F__GUID-DCB6ED22-DF4F-46E9-A99A-192D7ECF60A9">
                        <p class="notep1">注意：</p>
                        <p>如果清除未归档的重做日志文件，则应该对数据库进行另一次备份。</p>
                     </div>
                     <p>要清除使脱机表空间联机所需的未归档重做日志，请使用<code class="codeph">ALTER DATABASE CLEAR LOGFILE</code>语句中的<code class="codeph">UNRECOVERABLE DATAFILE</code>子句。
                     </p>
                     <p>如果清除使脱机表空间联机所需的重做日志，则无法再次使表空间联机。您必须删除表空间或执行不完整的恢复。请注意，正常脱机的表空间不需要恢复。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-BC1F1762-0BB1-4218-B7AF-6160C395AAE4" title="您可以通过完成诸如创建重做日志组和成员，重定位和重命名重做日志成员，删除重做日志组和成员以及强制日志切换等任务来管理重做日志。">管理重做日志</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-27E9B63B-03E4-43E5-BA59-AB0EDDDE5CE6" name="GUID-27E9B63B-03E4-43E5-BA59-AB0EDDDE5CE6"></a><h3 id="ADMIN-GUID-27E9B63B-03E4-43E5-BA59-AB0EDDDE5CE6" class="sect3"><span class="enumeration_section">11.9</span> FORCE LOGGING设置的优先顺序</h3>
               <div>
                  <p>您可以在各个级别设置<code class="codeph">FORCE LOGGING</code>和<code class="codeph">NOLOGGING</code> ，例如数据库，可插拔数据库（PDB），表空间或数据库对象。当<code class="codeph">FORCE LOGGING</code>设置为一个或多个级别时， <code class="codeph">FORCE LOGGING</code>设置的优先级决定了重做日志中记录的内容。
                  </p>
                  <p>您可以将多租户容器数据库（CDB）和非CDB放入<code class="codeph">FORCE LOGGING</code>模式。在此模式下，数据库会记录数据库中的所有更改，但临时表空间和临时段的更改除外。此设置优先于您为各个表空间指定的任何<code class="codeph">NOLOGGING</code>或<code class="codeph">FORCE LOGGING</code>设置，并且与您为各个数据库对象指定的任何<code class="codeph">NOLOGGING</code>设置无关。
                  </p>
                  <p>您还可以将表空间放入<code class="codeph">FORCE LOGGING</code>模式。数据库记录对表空间中所有对象的所有更改，但对临时段的更改除外，从而覆盖单个对象的任何<code class="codeph">NOLOGGING</code>设置。
                  </p>
                  <p>此外，您可以使用<span class="italic">logging_clause</span>为各种类型的数据库对象指定日志记录属性，以确定是否将在重做日志文件（ <code class="codeph">LOGGING</code> ）中记录某些DML操作（ <code class="codeph">NOLOGGING</code> ）。您可以为以下类型的数据库对象指定日志记录属性：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>表</p>
                     </li>
                     <li>
                        <p>索引</p>
                     </li>
                     <li>
                        <p>物化观点</p>
                     </li>
                  </ul>
                  <p>下表总结了每个级别的日志记录设置，并显示了非CDB的结果。</p>
                  <div class="tblformal" id="GUID-27E9B63B-03E4-43E5-BA59-AB0EDDDE5CE6__GUID-9ABE160E-DDF6-4D1B-9CFF-ADD7B82C49B2">
                     <p class="titleintable">表11-1非CDB的FORCE LOGGING设置的优先级</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="非CDB的FORCE LOGGING设置的优先顺序" border="1" summary="This table describes the result of FORCE LOGGING, NOLOGGING, and LOGGING attributes set at various levels for a non-CDB." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" id="d132399e2847">数据库</th>
                              <th align="left" valign="bottom" id="d132399e2849">表空间</th>
                              <th align="left" valign="bottom" id="d132399e2851">数据库对象LOGGING属性</th>
                              <th align="left" valign="bottom" id="d132399e2853">结果</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d132399e2857" headers="d132399e2847 "><code class="codeph">强制记录</code></td>
                              <td align="left" valign="top" headers="d132399e2857 d132399e2849 ">忽视</td>
                              <td align="left" valign="top" headers="d132399e2857 d132399e2851 ">忽视</td>
                              <td align="left" valign="top" headers="d132399e2857 d132399e2853 ">记录</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d132399e2867" headers="d132399e2847 "><code class="codeph">没有力量记录</code></td>
                              <td align="left" valign="top" headers="d132399e2867 d132399e2849 "><code class="codeph">强制记录</code></td>
                              <td align="left" valign="top" headers="d132399e2867 d132399e2851 ">忽视</td>
                              <td align="left" valign="top" headers="d132399e2867 d132399e2853 ">记录</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d132399e2878" headers="d132399e2847 "><code class="codeph">没有力量记录</code></td>
                              <td align="left" valign="top" headers="d132399e2878 d132399e2849 "><code class="codeph">没有力量记录</code></td>
                              <td align="left" valign="top" headers="d132399e2878 d132399e2851 "><code class="codeph">测井</code></td>
                              <td align="left" valign="top" headers="d132399e2878 d132399e2853 ">记录</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d132399e2890" headers="d132399e2847 "><code class="codeph">没有力量记录</code></td>
                              <td align="left" valign="top" headers="d132399e2890 d132399e2849 "><code class="codeph">没有力量记录</code></td>
                              <td align="left" valign="top" headers="d132399e2890 d132399e2851 "><code class="codeph">NOLOGGING</code></td>
                              <td align="left" valign="top" headers="d132399e2890 d132399e2853 ">没有记录</td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>下表总结了每个级别的日志记录设置，并显示了CDB的结果。</p>
                  <div class="tblformal" id="GUID-27E9B63B-03E4-43E5-BA59-AB0EDDDE5CE6__GUID-9692C7A0-4C20-42E3-962E-D04531ADA431">
                     <p class="titleintable">表11-2 CDB的FORCE LOGGING设置的优先级</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="CDB的FORCE LOGGING设置的优先顺序" border="1" summary="This table describes the result of FORCE LOGGING, NOLOGGING, and LOGGING attributes set at various levels for a CDB." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" id="d132399e2916">CDB</th>
                              <th align="left" valign="bottom" id="d132399e2918">PDB</th>
                              <th align="left" valign="bottom" id="d132399e2920">表空间</th>
                              <th align="left" valign="bottom" id="d132399e2922">数据库对象LOGGING属性</th>
                              <th align="left" valign="bottom" id="d132399e2924">结果</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d132399e2928" headers="d132399e2916 "><code class="codeph">强制记录</code></td>
                              <td align="left" valign="top" headers="d132399e2928 d132399e2918 ">忽视</td>
                              <td align="left" valign="top" headers="d132399e2928 d132399e2920 ">忽视</td>
                              <td align="left" valign="top" headers="d132399e2928 d132399e2922 ">忽视</td>
                              <td align="left" valign="top" headers="d132399e2928 d132399e2924 ">记录</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d132399e2940" headers="d132399e2916 "><code class="codeph">没有力量记录</code></td>
                              <td align="left" valign="top" headers="d132399e2940 d132399e2918 "><code class="codeph">ENABLE FORCE LOGGING</code></td>
                              <td align="left" valign="top" headers="d132399e2940 d132399e2920 ">忽视</td>
                              <td align="left" valign="top" headers="d132399e2940 d132399e2922 ">忽视</td>
                              <td align="left" valign="top" headers="d132399e2940 d132399e2924 ">记录</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d132399e2953" headers="d132399e2916 "><code class="codeph">没有力量记录</code></td>
                              <td align="left" valign="top" headers="d132399e2953 d132399e2918 "><code class="codeph">启用力量NOLOGGING</code></td>
                              <td align="left" valign="top" headers="d132399e2953 d132399e2920 ">忽视</td>
                              <td align="left" valign="top" headers="d132399e2953 d132399e2922 ">忽视</td>
                              <td align="left" valign="top" headers="d132399e2953 d132399e2924 ">没有记录</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d132399e2966" headers="d132399e2916 "><code class="codeph">没有力量记录</code></td>
                              <td align="left" valign="top" headers="d132399e2966 d132399e2918 "><code class="codeph">DISABLE FORCE [NO]LOGGING</code> （无设置）</td>
                              <td align="left" valign="top" headers="d132399e2966 d132399e2920 "><code class="codeph">强制记录</code></td>
                              <td align="left" valign="top" headers="d132399e2966 d132399e2922 ">忽视</td>
                              <td align="left" valign="top" headers="d132399e2966 d132399e2924 ">记录</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d132399e2981" headers="d132399e2916 "><code class="codeph">没有力量记录</code></td>
                              <td align="left" valign="top" headers="d132399e2981 d132399e2918 "><code class="codeph">DISABLE FORCE [NO]LOGGING</code> （无设置）</td>
                              <td align="left" valign="top" headers="d132399e2981 d132399e2920 "><code class="codeph">没有力量记录</code></td>
                              <td align="left" valign="top" headers="d132399e2981 d132399e2922 "><code class="codeph">测井</code></td>
                              <td align="left" valign="top" headers="d132399e2981 d132399e2924 ">记录</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d132399e2997" headers="d132399e2916 "><code class="codeph">没有力量记录</code></td>
                              <td align="left" valign="top" headers="d132399e2997 d132399e2918 "><code class="codeph">DISABLE FORCE [NO]LOGGING</code> （无设置）</td>
                              <td align="left" valign="top" headers="d132399e2997 d132399e2920 "><code class="codeph">没有力量记录</code></td>
                              <td align="left" valign="top" headers="d132399e2997 d132399e2922 "><code class="codeph">NOLOGGING</code></td>
                              <td align="left" valign="top" headers="d132399e2997 d132399e2924 ">没有记录</td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-BC1F1762-0BB1-4218-B7AF-6160C395AAE4" title="您可以通过完成诸如创建重做日志组和成员，重定位和重命名重做日志成员，删除重做日志组和成员以及强制日志切换等任务来管理重做日志。">管理重做日志</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN11328"></a><div class="props_rev_3"><a id="GUID-05FCB15E-BE40-40EB-B756-4D280461AD7E" name="GUID-05FCB15E-BE40-40EB-B756-4D280461AD7E"></a><h3 id="ADMIN-GUID-05FCB15E-BE40-40EB-B756-4D280461AD7E" class="sect3"><span class="enumeration_section">11.10</span>重做日志数据字典视图</h3>
               <div>
                  <p>您可以查询一组数据字典视图，以获取有关重做日志的信息。</p>
                  <div class="section">
                     <p>以下视图提供有关重做日志的信息。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-05FCB15E-BE40-40EB-B756-4D280461AD7E__GUID-36595937-FA63-477B-9FF0-78119FE632BF">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column of this table lists the views that are used for providing information about redo logs. The second column contains a corresponding description of each view." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="34%" id="d132399e3076">视图</th>
                              <th align="left" valign="bottom" width="66%" id="d132399e3079">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d132399e3084" headers="d132399e3076 ">
                                 <p><code class="codeph"><a href="../refrn/V-LOG.html#REFRN30127" target="_blank">V $ LOG</a></code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d132399e3084 d132399e3079 ">
                                 <p>显示控制文件中的重做日志文件信息</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d132399e3094" headers="d132399e3076 ">
                                 <p><code class="codeph"><a href="../refrn/V-LOGFILE.html#REFRN30129" target="_blank">V $ LOGFILE</a></code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d132399e3094 d132399e3079 ">
                                 <p>标识重做日志组以及成员和成员状态</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d132399e3104" headers="d132399e3076 ">
                                 <p><code class="codeph"><a href="../refrn/V-LOG_HISTORY.html#REFRN30128" target="_blank">V $ LOG_HISTORY</a></code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d132399e3104 d132399e3079 ">
                                 <p>包含日志历史信息</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p>以下查询返回有关数据库的重做日志的控制文件信息。</p><pre class="oac_no_warn" dir="ltr">SELECT GROUP＃，THREAD＃，SEQUENCE＃，BYTES，MEMBERS，ARCHIVED，STATUS，FIRST_CHANGE＃，FIRST_TIME FROM V $ LOG; GROUP＃THREAD #SEQ BYTES成员ARC STATUS FIRST_CHANGE＃FIRST_TIM ------ ------- ----- ------- ------- --- --- ------ ------------- --------- 1 1 10605 1048576 1是活动11515628 16-APR-00 2 1 10606 1048576 1 NO CURRENT 11517595 16 -APR-00 3 1 10603 1048576 1是不活动11511666 16-APR-00 4 1 10604 1048576 1是不活动11513647 16-APR-00</pre><p>要查看组中所有成员的名称，请使用类似于以下内容的查询：</p><pre class="oac_no_warn" dir="ltr">SELECT GROUP＃，STATUS，成员来自V $ LOGFILE; GROUP＃STATUS会员------ ------- --------------------------------- -  1 D：\ ORANT \ ORADATA \ IDDB2 \ REDO04。LOG 2 D：\ ORANT \ ORADATA \ IDDB2 \ REDO03。LOG 3 D：\ ORANT \ ORADATA \ IDDB2 \ REDO02。LOG 4 D：\ ORANT \ ORADATA \ IDDB2 \ REDO01。LOG</pre><p>如果成员的<code class="codeph">STATUS</code>为空，则表示该文件正在使用中。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-the-redo-log.html#GUID-BC1F1762-0BB1-4218-B7AF-6160C395AAE4" title="您可以通过完成诸如创建重做日志组和成员，重定位和重命名重做日志成员，删除重做日志组和成员以及强制日志切换等任务来管理重做日志。">管理重做日志</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
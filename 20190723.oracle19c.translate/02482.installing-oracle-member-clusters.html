<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Complete this procedure to install Oracle Grid Infrastructure software for Oracle Member Cluster for Oracle Database and Oracle Member Cluster for Applications."></meta>
      <meta name="description" content="Complete this procedure to install Oracle Grid Infrastructure software for Oracle Member Cluster for Oracle Database and Oracle Member Cluster for Applications."></meta>
      <title>安装Oracle成员集群</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Grid Infrastructure Installation and Upgrade Guide"></meta>
      <meta property="og:description" content="Complete this procedure to install Oracle Grid Infrastructure software for Oracle Member Cluster for Oracle Database and Oracle Member Cluster for Applications."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Grid Infrastructure Installation and Upgrade Guide for Oracle Solaris"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="grid-infrastructure-installation-and-upgrade-guide-oracle-solaris.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-24T22:50:24-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2014, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96273-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="installing-oracle-domain-services-cluster.html" title="Previous" type="text/html"></link>
      <link rel="next" href="installing-oracle-grid-infrastructure-using-a-cluster-configuration-file.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Grid Infrastructure Installation and Upgrade Guide for Oracle Solaris"></meta>
    <meta name="dcterms.isVersionOf" content="CWSOL"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="installing-oracle-domain-services-cluster.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="installing-oracle-grid-infrastructure-using-a-cluster-configuration-file.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Grid Infrastructure安装和升级指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="installing-oracle-grid-infrastructure.html" property="item" typeof="WebPage"><span property="name">安装Oracle Grid Infrastructure</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="installing-oracle-grid-infrastructure-for-new-cluster.html" property="item" typeof="WebPage"><span property="name">为新群集安装Oracle Grid Infrastructure</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">安装Oracle成员集群</li>
            </ol>
            <a id="GUID-E8B7F0FA-4781-4B28-AFCD-7934255F4A24" name="GUID-E8B7F0FA-4781-4B28-AFCD-7934255F4A24"></a>
            
            <h2 id="CWSOL-GUID-E8B7F0FA-4781-4B28-AFCD-7934255F4A24" class="sect2">安装Oracle成员集群</h2>
         </header>
         <div class="ind">
            <div>
               <p>完成此过程以为Oracle成员集群Oracle数据库和Oracle成员集群应用程序安装Oracle Grid Infrastructure软件。</p>
               <div class="p">在执行安装之前，必须按照本指南中的说明创建成员集群清单文件。</div>
               <!-- class="section" -->
               <ol>
                  <li class="stepexpand"><span>作为<code class="codeph">grid</code>用户，下载Oracle Grid Infrastructure图像文件并将文件解压缩到Grid主目录。例如：</span><div><pre class="pre codeblock"><code>$ mkdir -p /u01/app/19.0.0/grid $ chown grid：oinstall /u01/app/19.0.0/grid $ cd /u01/app/19.0.0/grid $ unzip -q <span class="variable" translate="no">download_location/grid.zip</span></code></pre><p><code class="codeph"><span class="variable" translate="no">grid.zip</span></code>是Oracle Grid Infrastructure映像zip文件的名称。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnote" id="GUID-E8B7F0FA-4781-4B28-AFCD-7934255F4A24__GUID-B4A71F5B-C2AE-44DB-B8C1-A66FCE772FFB">
                           <p class="notep1">注意：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>您必须将zip映像软件解压缩到您希望Grid主页所在的目录中。</p>
                              </li>
                              <li>
                                 <p>仅将Oracle Grid Infrastructure映像文件下载并复制到本地节点。在安装过程中，软件将复制并安装在群集中的所有其他节点上。</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </li>
                  <li class="stepexpand"><span>以<code class="codeph">grid</code>用户身份登录，并通过运行以下命令启动Oracle Grid Infrastructure安装程序：</span><div><pre class="pre codeblock"><code>$ /u01/app/19.0.0/grid/gridSetup.sh</code></pre></div>
                     <div>安装程序启动，出现“选择配置选项”窗口。</div>
                  </li>
                  <li class="stepexpand"><span>选择“ <span class="uicontrol bold">为新群集配置网格基础结构</span> ”选项，然后单击“ <span class="uicontrol bold">下一步”</span> 。</span><div>将出现“选择群集配置”窗口。</div>
                  </li>
                  <li class="stepexpand"><span>选择“ <span class="uicontrol bold">为Oracle数据库</span> <span class="uicontrol bold">配置Oracle成员集群”或“为应用程序配置Oracle成员集群”</span>选项，然后单击“ <span class="uicontrol bold">下一步”</span> 。</span><div>将出现“群集域服务”窗口。</div>
                  </li>
                  <li class="stepexpand"><span>选择Manifest文件，其中包含有关Oracle成员集群的管理存储库和其他服务的配置详细信息。</span><div>
                        <p>对于Oracle成员集群Oracle数据库，您还可以使用成员集群清单文件指定网格命名服务和Oracle ASM存储服务器详细信息。</p>
                        <p>单击<span class="uicontrol bold">下一步</span> 。
                        </p>
                     </div>
                  </li>
                  <li class="stepexpand"><span>如果选择为应用程序配置Oracle成员集群，则会显示“配置虚拟访问”窗口。提供<span class="uicontrol bold">群集名称</span>和可选的<span class="uicontrol bold">虚拟主机名称</span> 。</span><div>虚拟主机名称用作Oracle成员集群的连接地址，并为您希望Oracle成员集群安装和运行的软件应用程序提供服务访问。</div>
                     <div>单击<span class="uicontrol bold">下一步</span> 。
                     </div>
                     <div>将出现“群集节点信息”窗口。</div>
                  </li>
                  <li class="stepexpand"><span>在群集节点表的“公共主机名”列中，您应该看到本地节点，例如<code class="codeph">node1.example.com</code> 。</span><div>
                        <p>以下是有关节点IP地址的其他信息的列表：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>仅对于本地节点，Oracle Universal Installer（OUI）会自动填写公共和VIP字段。如果您的系统使用供应商集群件，则OUI可能会填充其他字段。</p>
                           </li>
                           <li>
                              <p>主机名和虚拟主机名不是域限定的。如果在安装期间在地址字段中提供域，则OUI将从该地址中删除该域。</p>
                           </li>
                           <li>
                              <p>标识为专用于私有IP地址的接口不应作为公共接口访问。使用Cache Fusion的公共接口可能会导致性能问题。</p>
                           </li>
                           <li>
                              <p>输入公共节点名称时，请使用每个节点的主要主机名。换句话说，使用<code class="codeph">/bin/hostname</code>命令显示的名称。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <ol type="a">
                        <li class="substepexpand"><span>单击“ <span class="uicontrol bold">添加”</span>以将另一个节点<span class="uicontrol bold">添加</span>到群集。</span></li>
                        <li class="substepexpand"><span>输入第二个节点的公共名称（ <code class="codeph">node2</code> ）和虚拟IP名称（ <code class="codeph">node2-vip</code> ），然后单击“ <span class="uicontrol bold">确定”</span> 。为所有群集节点提供虚拟IP（VIP）主机名，或者不提供。</span><div>您将返回“群集节点信息”窗口。您现在应该看到群集节点表中列出的所有节点。</div>
                        </li>
                        <li class="substepexpand"><span>确保选中所有节点，然后单击窗口底部的<span class="uicontrol bold">SSH连接</span>按钮。</span><div>窗口的底部面板显示SSH连接信息。</div>
                        </li>
                        <li class="substepexpand"><span>输入Oracle软件所有者（ <code class="codeph">grid</code> ）的操作系统用户名和密码。如果已在节点之间配置SSH连接，则选择“ <span class="uicontrol bold">重用用户主目录中存在的私钥和公钥”</span>选项。单击<span class="uicontrol bold">设置</span> 。</span><div>将出现一个消息窗口，指示可能需要几分钟才能在节点之间配置SSH连接。在短暂的一段时间后，将出现另一个消息窗口，指示已在群集节点之间建立无密码SSH连接。单击“ <span class="uicontrol bold">确定”</span>继续。
                           </div>
                        </li>
                        <li class="substepexpand"><span>返回“群集节点信息”窗口时，单击“ <span class="uicontrol bold">下一步”</span>继续。</span></li>
                     </ol>
                     <div>将出现“指定网络接口使用”窗口。</div>
                  </li>
                  <li class="stepexpand"><span>选择显示的每个网络接口的使用类型，然后单击“ <span class="uicontrol bold">下一步”</span> 。</span><div>验证每个接口是否具有与之关联的正确接口类型。如果您具有Oracle Clusterware不应使用的网络接口，请将网络接口类型设置为<span class="uicontrol bold">“不使用”</span> 。例如，如果您只有两个网络接口，则将公共接口设置为使用值为<span class="uicontrol bold">Public</span> ，并将专用网络接口设置为使用<span class="uicontrol bold">ASM和私有</span>值。
                     </div>
                     <div><span class="bold">注意：</span>对于Oracle Member Cluster for Applications配置，您可以选择拥有一个公共网络接口，而不是需要两个网络接口，一个是私有或ASM，另一个是公共接口。
                     </div>
                     <div>单击<span class="uicontrol bold">下一步</span> 。将出现“ASM客户端存储”窗口。
                     </div>
                  </li>
                  <li class="stepexpand"><span>选择磁盘组以在Oracle Domain Services Cluster上存储Oracle Cluster Registry（OCR）和表决文件。</span><div>单击<span class="uicontrol bold">下一步</span> 。
                     </div>
                     <div>将出现“操作系统组”窗口。</div>
                  </li>
                  <li class="stepexpand"><span>接受Oracle ASM管理的默认操作系统组名称，然后单击“ <span class="uicontrol bold">下一步”</span> 。</span><div>将出现“指定安装位置”窗口。</div>
                  </li>
                  <li class="stepexpand"><span>指定用于Oracle Grid Infrastructure安装的Oracle基础的目录，然后单击“ <span class="uicontrol bold">下一步”</span> 。Oracle基本目录必须与Oracle主目录不同。</span><div>如果您按照步骤1中的说明将Oracle Grid Infrastructure安装文件复制到Oracle Grid主目录中，则Oracle基本目录的默认位置应显示为<code class="codeph">/u01/app/grid</code> 。
                     </div>
                     <div>如果以前未在此计算机上安装Oracle软件，则会显示“创建库存”窗口。</div>
                  </li>
                  <li class="stepexpand"><span>如果需要，更改库存目录的路径。然后单击“ <span class="uicontrol bold">下一步”</span> 。</span><div>如果您使用与本书中的示例相同的目录名称，则它应显示<code>/u01/app/oraInventory</code> 。<code class="codeph">oraInventory</code>目录的组名应显示<code class="codeph">oinstall</code> 。
                     </div>
                     <div>将出现“根脚本执行配置”窗口。</div>
                  </li>
                  <li class="stepexpand"><span>选择“ <span class="uicontrol bold">自动运行配置脚本</span> ”选项<span class="uicontrol bold">。</span> 输入root用户或sudo帐户的凭据，然后单击“ <span class="uicontrol bold">下一步”</span> 。</span><div>或者，您可以在安装程序提示时在安装过程结束时以<code class="codeph">root</code>用户身份手动运行脚本。
                     </div>
                     <div>将出现“执行先决条件检查”窗口。</div>
                  </li>
                  <li class="stepexpand"><span>如果任何检查的状态为“失败”且不可修复，则必须手动更正这些问题。解决问题后，可以单击“ <span class="uicontrol bold">再次检查”</span>按钮让安装程序重新检查要求并更新状态。根据需要重复，直到所有检查的状态为Succeeded。单击<span class="uicontrol bold">下一步</span> 。</span><div>
                        <p>将出现“摘要”窗口。</p>
                     </div>
                  </li>
                  <li class="stepexpand"><span>查看“摘要”窗口的内容，然后单击“ <span class="uicontrol bold">安装”</span> 。</span><div>安装程序显示进度指示器，使您可以监视安装过程。</div>
                  </li>
                  <li class="stepexpand"><span>如果未配置根脚本的自动化，则需要以<code class="codeph">root</code>用户身份运行某些脚本，如“执行配置脚本”窗口中所指定的那样。直到运行脚本<span class="italic">不要</span>单击<span class="uicontrol bold">确定</span> 。按照指示在所有节点上按所示顺序运行脚本。</span><div>
                        <p>例如，在Oracle Linux上执行以下步骤（请注意，为清楚起见，示例显示了提示中的当前用户，节点和目录）：</p>
                        <ol type="a">
                           <li>
                              <p>作为<code class="codeph">node1</code>上的<code class="codeph">grid</code>用户，打开终端窗口，然后输入以下命令：</p><pre class="pre codeblock"><code>[grid @ node1 grid] $ <kbd class="userinput">cd / u01 / app / oraInventory</kbd> [grid @ node1 oraInventory] $ <kbd class="userinput">su</kbd>
</code></pre></li>
                           <li>
                              <p>输入<code class="codeph">root</code>用户的密码，然后输入以下命令以在<code class="codeph">node1</code>上运行第一个脚本：</p><pre class="pre codeblock"><code>[root @ node1 oraInventory]＃。/ <kbd class="userinput">orainstRoot.sh</kbd>
</code></pre></li>
                           <li>
                              <p><code class="codeph">orainstRoot.sh</code>脚本在<code class="codeph">node1</code>完成后，打开另一个终端窗口，并以<code class="codeph">grid</code>用户身份输入以下命令：</p><pre class="pre codeblock"><code>[grid @ node1 grid] $ <kbd class="userinput">ssh node2</kbd> [grid @ node2 grid] $ <kbd class="userinput">cd / u01 / app / oraInventory</kbd> [grid @ node2 oraInventory] $ <kbd class="userinput">su</kbd>
</code></pre></li>
                           <li>
                              <p>输入<code class="codeph">root</code>用户的密码，然后输入以下命令以在<code class="codeph">node2</code>上运行第一个脚本：</p><pre class="pre codeblock"><code>[root @ node2 oraInventory]＃。/ <kbd class="userinput">orainstRoot.sh</kbd>
</code></pre></li>
                           <li>
                              <p><code class="codeph">orainstRoot.sh</code>脚本在<code class="codeph">node2</code>完成后，转到您在此步骤的第a部分中打开的终端窗口。作为<code class="codeph">node1</code>上的<code class="codeph">root</code>用户，输入以下命令以运行第二个脚本<code class="codeph">root.sh</code> ：</p><pre class="pre codeblock"><code>[root @ node1 oraInventory] <kbd class="userinput">#cd /u01/app/19.0.0/grid</kbd> [root @ node1 grid]＃。/ <kbd class="userinput">root.sh</kbd>
</code></pre><p>在提示符处按<span class="uicontrol bold">Enter键</span>以接受默认值。
                              </p>
                              <div class="infoboxnote" id="GUID-E8B7F0FA-4781-4B28-AFCD-7934255F4A24__GUID-6D4F44EA-89E0-4317-9F45-A87AE3700DB4">
                                 <p class="notep1">注意：</p>
                                 <p>您必须在第一个节点上运行<code class="codeph">root.sh</code>脚本并等待它完成。如果您的群集有三个或更多节点，则<code class="codeph">root.sh</code>可以在所有节点上同时运行，但第一个节点。节点号根据运行<code class="codeph">root.sh</code>的顺序分配。如果要创建特定的节点编号分配，请按照要进行的节点分配的顺序运行根脚本，并等待脚本在每个节点上完成运行，然后再继续在下一个节点上运行脚本。但是，Oracle RAC数据库的Oracle系统标识符或SID不遵循节点编号。
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p><code class="codeph">root.sh</code>脚本在<code class="codeph">node1</code>完成后，转到在此步骤的c部分中打开的终端窗口。作为<code class="codeph">node2</code>上的<code class="codeph">root</code>用户，输入以下命令：</p><pre class="pre codeblock"><code>[root @ node2 oraInventory] <kbd class="userinput">#cd /u01/app/19.0.0/grid</kbd> [root @ node2 grid]＃。/ <kbd class="userinput">root.sh</kbd>
</code></pre><p><code class="codeph">root.sh</code>脚本完成后，返回到OUI窗口，安装程序会提示您运行<code class="codeph">orainstRoot.sh</code>和<code class="codeph">root.sh</code>脚本。单击<span class="uicontrol bold">确定</span> 。</p>
                              <p>软件安装监视窗口重新出现。</p>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <p>在Oracle Grid Infrastructure安装期间运行<code class="codeph">root.sh</code>时，跟踪文件分析器（TFA）收集器也会安装在目录中。 <code class="codeph">grid_home/tfa</code> 。
                        </p>
                     </div>
                  </li>
                  <li class="stepexpand"><span><code class="codeph">root.sh</code>在所有节点上运行后，OUI运行Net Configuration Assistant（ <code class="codeph">netca</code> ）和Cluster Verification Utility。这些程序无需用户干预即可运行</span></li>
                  <li class="stepexpand"><span>在安装Oracle成员集群Oracle数据库期间，如果成员集群清单文件不包含Oracle ASM的配置详细信息，则Oracle自动存储管理配置助手（ <code class="codeph">asmca</code> ） <code class="codeph">asmca</code> Oracle ASM配置为存储。</span></li>
                  <li class="stepexpand"><span>继续监视安装，直到出现“完成”窗口。然后单击“ <span class="uicontrol bold">关闭”</span>以完成安装过程并退出安装程序。</span></li>
               </ol>
               <div class="section">
                  <div class="infoboxnote" id="GUID-E8B7F0FA-4781-4B28-AFCD-7934255F4A24__GUID-8CD2CADA-8D4A-409C-92A9-F9CD455ED945">
                     <p class="notep1">警告：</p>
                     <p>安装完成后，请不要手动删除或运行在服务器上运行Oracle软件时删除<code class="codeph">/tmp/.oracle</code>或<code class="codeph">/var/tmp/.oracle</code>目录或其文件的<code class="codeph">cron</code>作业。如果删除这些文件，则Oracle软件可能会遇到间歇性挂起。Oracle Clusterware安装可能会失败并显示错误：</p>
                     <p> <code class="codeph">CRS-0184: Cannot communicate with the CRS daemon</code> 。
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>完成Oracle Grid Infrastructure安装后，可以在群集节点上安装Oracle数据库以获得高可用性，其他应用程序或安装Oracle RAC。</p>
                  <div class="infoboxnotealso" id="GUID-E8B7F0FA-4781-4B28-AFCD-7934255F4A24__GUID-91944C34-7709-425A-A985-9495E7DAC71B">
                     <p class="notep1">也可以看看：</p><a href="../install-and-upgrade.html" target="_blank"><span class="italic">适用</span></a>于您的平台的<a href="../install-and-upgrade.html" target="_blank"><span class="italic">Oracle Real Application Clusters安装指南</span></a>或<a href="../install-and-upgrade.html" target="_blank"><span class="italic">Oracle数据库安装指南</span></a> ，以获取有关安装Oracle数据库的信息</div>
               </div>
               <!-- class="section" -->
            </div>
            <div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="installing-oracle-grid-infrastructure-for-new-cluster.html#GUID-AB816BA7-EDC0-4D23-B24F-436B502F73A1" title="查看这些过程以安装此版本的Oracle Grid Infrastructure中提供的群集配置选项。">为新群集安装Oracle Grid Infrastructure</a></p>
                  </div>
               </div>
            </div>
            
         </div>
      </article>
   </body>
</html>
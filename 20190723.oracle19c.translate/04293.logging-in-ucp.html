<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Overview of Logging in UCP</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Universal Connection Pool Developer's Guide ">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Universal Connection Pool Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="universal-connection-pool-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-13T06:57:38-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96473-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="viewing-Oracle-RAC-statistics.html" title="Previous" type="text/html">
      <link rel="next" href="exceptions-error-codes.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Universal Connection Pool Developer's Guide">
    <meta name="dcterms.isVersionOf" content="JJUCP">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="viewing-Oracle-RAC-statistics.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="exceptions-error-codes.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Universal Connection Pool Developer's Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="diagnosing-ucp.html" property="item" typeof="WebPage"><span property="name">Diagnosing a Connection Pool </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Overview of Logging in UCP</li>
            </ol>
            <a id="GUID-E9148F7B-4B15-4302-8490-E89E6E04726F" name="GUID-E9148F7B-4B15-4302-8490-E89E6E04726F"></a><a id="JJUCP8233"></a>
            
            <h2 id="JJUCP-GUID-E9148F7B-4B15-4302-8490-E89E6E04726F" class="sect2"><span class="enumeration_section">12.4 </span>Overview of Logging in UCP
            </h2>
         </header>
         <div class="ind">
            <div>
               <p><a id="d13171e33" class="indexterm-anchor"></a>UCP leverages the JDK logging facility (<code class="codeph">java.util.logging</code>). Logging is not enabled by default and must be configured in order to print log messages. Logging can be configured using a log configuration file as well as through API-level configuration.
               </p>
               <div class="infoboxnote" id="GUID-E9148F7B-4B15-4302-8490-E89E6E04726F__GUID-C639A752-B992-4ADC-9BC5-29FFE29BA2E9">
                  <p class="notep1">Note:</p>
                  <p>The default log level is <code class="codeph">null</code>. This ensures that a parent logger's log level is used by default.
                  </p>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-E34D1A69-F418-4293-B28B-4389B4814431" name="GUID-E34D1A69-F418-4293-B28B-4389B4814431"></a><h3 id="JJUCP-GUID-E34D1A69-F418-4293-B28B-4389B4814431" class="sect3"><span class="enumeration_section">12.4.1 </span>Using a Logging Properties File
               </h3>
               <div>
                  <div class="section">
                     <p><a id="d13171e80" class="indexterm-anchor"></a>Logging can be configured using a properties file. The location of the properties file must be set as a Java property for the logging configuration file property. For example:
                     </p><pre class="oac_no_warn" dir="ltr">java -Djava.util.logging.config.file=log.properties
</pre><p>The logging properties file defines the handler to use for writing logs, the formatter to use for formatting logs, a default log level, as well as log levels for specific packages or classes. For example:</p><pre class="oac_no_warn" dir="ltr">handlers = java.util.logging.ConsoleHandler
java.util.logging.ConsoleHandler.level = ALL
java.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter

oracle.ucp.level = FINEST
oracle.ucp.jdbc.PoolDataSource = WARNING
</pre><p>A custom formatter is included with UCP and can be entered as the value for the formatter property. For example:</p><pre class="oac_no_warn" dir="ltr">java.util.logging.ConsoleHandler.formatter = oracle.ucp.util.logging.UCPFormatter
</pre><p>You can also download the <code class="codeph">ucpdemos.jar</code> file, which is shipped with UCP, from Oracle Technology Network (OTN). This file contains a list of sample logging property files. For example, this file contains the logging property file that can be used for troubleshooting the Fast Connection Failover (FCF) feature.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-D2B34151-96F7-45F6-B8C8-421BA2C72AE2" name="GUID-D2B34151-96F7-45F6-B8C8-421BA2C72AE2"></a><h3 id="JJUCP-GUID-D2B34151-96F7-45F6-B8C8-421BA2C72AE2" class="sect3"><span class="enumeration_section">12.4.2 </span>Using UCP and JDK API
               </h3>
               <div>
                  <div class="section">
                     <p><a id="d13171e135" class="indexterm-anchor"></a>Logging can be dynamically configured though either the UCP API or the JDK API. When using the UCP API, logging is configured using a connection pool manager. When using the JDK, logging is configured using the <code class="codeph">java.util.logging</code> implementation.
                     </p>
                     <p>The following example demonstrates using the UCP API to configure logging:</p><pre class="oac_no_warn" dir="ltr">UniversalConnectionPoolManager mgr = UniversalConnectionPoolManagerImpl.
getUniversalConnectionPoolManager();

mgr.setLogLevel(Level.FINE);
</pre><p>The following example demonstrate using the JDK logging implementation directly:</p><pre class="oac_no_warn" dir="ltr">Logger.getLogger("oracle.ucp").setLevel(Level.FINEST);
Logger.getLogger("oracle.ucp.jdbc.PoolDataSource").setLevel(Level.FINEST);
</pre></div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-293E4B4A-55C4-4390-9BD3-C39629B65A42" name="GUID-293E4B4A-55C4-4390-9BD3-C39629B65A42"></a><h3 id="JJUCP-GUID-293E4B4A-55C4-4390-9BD3-C39629B65A42" class="sect3"><span class="enumeration_section">12.4.3 </span>Enabling or Disabling Feature-Specific Logging at Runtime
               </h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p>Starting from Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1), UCP provides support for enabling and disabling logging for selected features during runtime. For example, you can enable logging only for Load Balancing feature, while disabling logging for other features of UCP.  Again, during the same run, you can enable logging for Fast Failover feature and disable logging for Load Balancing feature.
                     </p>
                     <p>By default, logging for all features is enabled.</p>
                     <p>The logging switching feature of UCP is a part of the <code class="codeph">OracleDiagnosabilityMBean</code>.  For using this bean, start JConsole and connect to the application.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-293E4B4A-55C4-4390-9BD3-C39629B65A42__GUID-6A213D0E-4248-42B6-A3F1-DDAF60DEBFA7"><span class="bold">Displaying Supported Features</span><p>For a list of supported features, use the following method:</p><pre class="pre codeblock"><code>getTraceController().getSupportedFeatures()</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-293E4B4A-55C4-4390-9BD3-C39629B65A42__GUID-10FCE449-5EE9-4CFD-B7F5-F06223D1BDAD"><span class="bold">Displaying Enabled Features</span><p>For a list of currently enabled features, use the following method:</p><pre class="pre codeblock"><code>getTraceController().getEnabledFeatures()</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-293E4B4A-55C4-4390-9BD3-C39629B65A42__GUID-30C24589-C2CE-4FBD-BCFB-0186A59F95CB"><span class="bold">Enabling Logging for a Feature</span><p>For enabling logging for a specific feature or for all features, use the <code class="codeph">trace</code> method in the following ways:
                     </p><pre class="pre codeblock"><code>trace(boolean enable, String feature_name)
trace(boolean enable, ALL)
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-293E4B4A-55C4-4390-9BD3-C39629B65A42__GUID-86D8FFBA-694F-4E12-8A4E-073DED9C77E9"><span class="bold">Disabling Logging for a Feature</span><p>For disabling logging for a specific feature or for all features, use the <code class="codeph">trace</code> method in the following ways:
                     </p><pre class="pre codeblock"><code>trace(boolean disable, String feature_name)
trace(boolean disable, ALL)
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-293E4B4A-55C4-4390-9BD3-C39629B65A42__GUID-18A14E52-105D-4590-82A0-2203E2DD8CCA"><span class="bold">Suspending and Resuming Logging</span><p>Use the following methods for suspending and resuming logging respectively:</p><pre class="pre codeblock"><code>suspend()
resume()</code></pre></div>
                  <!-- class="example" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-14CCD520-A1BD-4542-BBB1-2D5357BF501E" name="GUID-14CCD520-A1BD-4542-BBB1-2D5357BF501E"></a><h3 id="JJUCP-GUID-14CCD520-A1BD-4542-BBB1-2D5357BF501E" class="sect3"><span class="enumeration_section">12.4.4 </span>About Using the Logging Properties File for Feature-Specific Logging
               </h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p>Starting from Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1), you can enable or disable logging for specific features by adding a property in the logging properties file. By default, logging is enabled for all features. Otherwise, you can enable logging for all features using the following syntax: <code class="codeph">clio.feature.all = on</code>. For feature-specific enabling of logging, you can use the properties as mentioned in the following section:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-14CCD520-A1BD-4542-BBB1-2D5357BF501E__GUID-CB266DB2-D779-4DA9-9B14-34420613912A">Supported Features for feature-Based Granularity</p><pre class="pre codeblock"><code>clio.feature.pool_statistics          = on
clio.feature.check_in                 = on
clio.feature.check_out                = on
clio.feature.labeling                 = on
clio.feature.conn_construction        = on
clio.feature.conn_destruction         = on
clio.feature.high_availability        = on
clio.feature.load_balancing           = on
clio.feature.transaction_affinity     = on
clio.feature.web_affinity            = on
clio.feature.data_affinity           = on
clio.feature.conn_harvesting          = on
clio.feature.ttl_conn_timeout         = on
clio.feature.abandoned_conn_timeout   = on
clio.feature.admin                    = on
clio.feature.sharding                 = on</code></pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="JJUCP8236"></a><div class="props_rev_3"><a id="GUID-B724F83A-8E69-4B19-BC8B-A8305E69A7B5" name="GUID-B724F83A-8E69-4B19-BC8B-A8305E69A7B5"></a><h3 id="JJUCP-GUID-B724F83A-8E69-4B19-BC8B-A8305E69A7B5" class="sect3"><span class="enumeration_section">12.4.5 </span>Supported Log Levels
               </h3>
               <div>
                  <p><a id="d13171e327" class="indexterm-anchor"></a>The following list describes each of the log levels that are supported for JDBC. Levels lower than <code class="codeph">FINE</code> produce output that may not be meaningful to users. Levels lower than <code class="codeph">FINER</code> will produce very large volumes of output.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">INTERNAL_ERROR</code> &#x2013; Internal Errors
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">SEVERE</code> &#x2013; SQL Exceptions
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">WARNING</code> &#x2013; SQL Warnings and other invisible problems
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">INFO</code> &#x2013; Public events such as connection attempts or Oracle RAC events
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">CONFIG</code> &#x2013; SQL statements
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">FINE</code> &#x2013; Public APIs
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">TRACE_10</code> &#x2013; Internal events
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">FINER</code> &#x2013; Internal APIs
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">TRACE_20</code> &#x2013; Internal debug
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">TRACE_30</code> &#x2013; High volume internal APIs
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">FINEST</code> &#x2013; High volume internal debug
                        </p>
                     </li>
                  </ul>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
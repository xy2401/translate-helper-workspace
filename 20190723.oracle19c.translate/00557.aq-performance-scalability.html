<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="These topics discuss performance and scalability issues relating to Oracle Database Advanced Queuing (AQ)."></meta>
      <meta name="description" content="These topics discuss performance and scalability issues relating to Oracle Database Advanced Queuing (AQ)."></meta>
      <title>Oracle数据库高级排队性能和可伸缩性</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Advanced Queuing User&#39;s Guide "></meta>
      <meta property="og:description" content="These topics discuss performance and scalability issues relating to Oracle Database Advanced Queuing (AQ)."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Advanced Queuing User&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-database-advanced-queuing.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T10:53:09-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96511-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="managing-aq.html" title="Previous" type="text/html"></link>
      <link rel="next" href="aq-internet-access.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle® Database Advanced Queuing"></meta>
    <meta name="dcterms.isVersionOf" content="ADQUE"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-aq.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="aq-internet-access.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">高级排队用户指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle数据库高级排队性能和可伸缩性</li>
            </ol>
            <a id="GUID-98E14B4A-D09D-4861-AF4C-2321855CCA63" name="GUID-98E14B4A-D09D-4861-AF4C-2321855CCA63"></a><a id="ADQUE0500"></a>
            
            <h2 id="ADQUE-GUID-98E14B4A-D09D-4861-AF4C-2321855CCA63" class="sect2"><span class="enumeration_chapter">5</span> Oracle数据库高级排队性能和可伸缩性</h2>
         </header>
         <div class="ind">
            <div>
               <p>这些主题讨论与Oracle数据库高级队列（AQ）相关的性能和可伸缩性问题。</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="aq-performance-scalability.html#GUID-30265296-1110-47C0-B949-D22520D04197" title="应用程序可以决定在分片队列中对消息进行分片的方式。在这种情况下，应用程序显式指定将消息排入特定分片。">分片队列</a></p>
                  </li>
                  <li>
                     <p><a href="aq-performance-scalability.html#GUID-9951456C-F148-4B01-A3CD-6FD73C1637F4" title="本节包括以下主题：">非分片队列</a></p>
                  </li>
                  <li>
                     <p><a href="aq-performance-scalability.html#GUID-F420D721-713E-42C9-971F-89B967B7E5E6" title="Oracle提供这些视图来监视系统性能和故障排除。">绩效观点</a></p>
                  </li>
               </ul>
            </div><a id="ADQUE3649"></a><div class="props_rev_3"><a id="GUID-30265296-1110-47C0-B949-D22520D04197" name="GUID-30265296-1110-47C0-B949-D22520D04197"></a><h3 id="ADQUE-GUID-30265296-1110-47C0-B949-D22520D04197" class="sect3"><span class="enumeration_section">5.1分</span>片队列</h3>
               <div>
                  <p>分片<a href="glossary.html#GUID-2FB637EC-4964-4E48-A71A-3C4F27606A0B"><span class="xrefglossterm">队列会</span></a>增加enqueue-dequeue吞吐量，尤其是在Oracle RAC实例中，因为允许来自不同队列会话的消息并行出列。队列的每个分片都是根据会话中的排队时间排序的，并且跨分片排序是最好的努力。分片队列自动管理表分区，以便入队者和出队者不会相互竞争。此外，分片队列使用内存中的消息缓存来优化性能并减少排队和出队的磁盘和CPU开销。
                  </p>
                  <p>分片队列的优点和权衡包括：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>分片队列提供Oracle Real Application Clusters（Oracle RAC）上单个队列的可伸缩性，尤其是在每个用户在每个实例上都有多个dequeuers的情况下。</p>
                     </li>
                     <li>
                        <p>分片队列将增加内存使用量以获得性能。</p>
                     </li>
                  </ul>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="aq-performance-scalability.html#GUID-DEB4A99A-E0C3-4DAA-87BF-103781C471F6">分片队列和消息缓存</a></p>
                     </li>
                     <li>
                        <p><a href="aq-performance-scalability.html#GUID-B7861117-A3E6-4F7B-8492-87D49EC157B4">分片队列和队列/队列消息</a></p>
                     </li>
                     <li>
                        <p><a href="aq-performance-scalability.html#GUID-47B52250-117C-49DD-BF9E-14DA9BD3C8EB">分片队列和本机JMS支持</a></p>
                     </li>
                     <li>
                        <p><a href="aq-performance-scalability.html#GUID-62C52117-903F-4294-9D44-155AFBB574D2">分片队列和分区</a></p>
                     </li>
                     <li>
                        <p><a href="aq-performance-scalability.html#GUID-1B18AD7E-2F02-4208-A059-6B4531586C75">分片队列和Oracle Real Application Clusters（Oracle RAC）</a></p>
                     </li>
                     <li>
                        <p><a href="aq-performance-scalability.html#GUID-F53DBE98-B57F-4931-9640-D0B5A4B84CFB">分片队列限制</a></p>
                     </li>
                     <li>
                        <p><a href="aq-performance-scalability.html#GUID-AE1B40DA-FCEE-4EBB-8B83-96477C47DD49">Sharded Queues Tuning</a></p>
                     </li>
                  </ul>
               </div><a id="ADQUE3650"></a><div class="props_rev_3"><a id="GUID-DEB4A99A-E0C3-4DAA-87BF-103781C471F6" name="GUID-DEB4A99A-E0C3-4DAA-87BF-103781C471F6"></a><h4 id="ADQUE-GUID-DEB4A99A-E0C3-4DAA-87BF-103781C471F6" class="sect4"><span class="enumeration_section">5.1.1分</span>片队列和消息缓存</h4>
                  <div>
                     <p>分片队列引入了一个特殊用途的消息缓存，可以让您权衡SGA的使用，从而提高吞吐量，减少延迟并提高并发性。与分区结合使用时，消息缓存减少了对某些查询，DML操作和索引的需求。当所有出列队员都与入队者保持联系并且消息高速缓存大到足以存储每个分片队列的入队者和出队员的消息（包括有效负载）时，消息高速缓存最有效。消息缓存使用Streams池。如果分片队列在与Streams复制功能相同的实例上共享Streams池，则可以使用<code class="codeph">DBMS_AQADM</code>过程（如<code class="codeph">SET_MIN_STREAMS_POOL</code>和<code class="codeph">SET_MAX_STREAMS_POOL</code>来微调Streams池内存的分配。
                     </p>
                     <div class="infoboxnotealso" id="GUID-DEB4A99A-E0C3-4DAA-87BF-103781C471F6__GUID-CD226E90-7C5D-415A-B9A1-2113033442D0">
                        <p class="notep1">也可以看看：</p>
                        <p>有关信息，请<a href="../arpls/DBMS_AQADM.html#ARPLS005" target="_blank"><span class="italic">参见Oracle Database PL / SQL包和类型参考</span></a></p>
                     </div>
                  </div>
               </div><a id="ADQUE3651"></a><div class="props_rev_3"><a id="GUID-B7861117-A3E6-4F7B-8492-87D49EC157B4" name="GUID-B7861117-A3E6-4F7B-8492-87D49EC157B4"></a><h4 id="ADQUE-GUID-B7861117-A3E6-4F7B-8492-87D49EC157B4" class="sect4"><span class="enumeration_section">5.1.2分</span>片队列和队列/队列消息</h4>
                  <div>
                     <p>为了提高吞吐量并减少开销和延迟，可以优化队列和队列，以便在可能的情况下使用消息缓存，规则引擎和后台处理。例如，</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>分片队列利用新的规则引擎改进</p>
                        </li>
                        <li>
                           <p>在出队期间，不必从磁盘重新读取在消息高速缓存中具有其有效负载的消息</p>
                        </li>
                        <li>
                           <p>通过相关id或其他JMS属性出队，通常可以在不访问磁盘的情况下进行评估</p>
                        </li>
                        <li>
                           <p>分片队列上的分区操作实现了高效的批量处理。</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADQUE3652"></a><div class="props_rev_3"><a id="GUID-47B52250-117C-49DD-BF9E-14DA9BD3C8EB" name="GUID-47B52250-117C-49DD-BF9E-14DA9BD3C8EB"></a><h4 id="ADQUE-GUID-47B52250-117C-49DD-BF9E-14DA9BD3C8EB" class="sect4"><span class="enumeration_section">5.1.3分</span>片队列和本机JMS支持</h4>
                  <div>
                     <p>Sharded队列原生支持：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>非耐用订户</p>
                        </li>
                        <li>
                           <p>JMS有效负载</p>
                        </li>
                        <li>
                           <p>优先级</p>
                        </li>
                     </ul>
                     <p>分片队列支持持久消息和非持久消息。非持久性消息存储在消息高速缓存内的内存中，不存储在磁盘上。因此，在实例崩溃或关闭时会丢失非持久消息。</p>
                     <p>Sharded队列本身支持两种订阅者以满足JMS要求：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>非持久订户：只有在订户处于活动状态时发布消息时，这些订户才会收到有关其所选主题的消息。此订阅在不同会话中不可共享。</p>
                        </li>
                        <li>
                           <p>持久订阅者：这些订阅者接收在主题上发布的所有消息，包括在订阅者处于非活动状态时发布的消息。多个数据库会话可以共享相同的订阅。</p>
                        </li>
                     </ul>
                     <p>分片队列不使用ADT来存储JMS有效负载。JMS消息存储在数据库的标量列中。JMS消息类型（如<code class="codeph">TEXT</code> ， <code class="codeph">BYTES</code> ， <code class="codeph">MAP</code> ， <code class="codeph">STREAM</code>和<code class="codeph">OBJECT</code>根据有效负载大小和类型将JMS有效负载存储在队列表中的标量<code class="codeph">TEXT</code> / <code class="codeph">RAW</code>或<code class="codeph">CLOB/BLOB</code>列中。JMS消息属性存储在队列表的<code class="codeph">CLOB</code> （SecureFile）列中，并为用户定义的属性定义了属性访问函数。有效负载和用户属性被选入<code class="codeph">RAW</code> ， <code class="codeph">VARCHAR2</code>或安全文件列，而不是存储为ADT。 JMS标头属性和JMS提供程序信息存储在它们自己的标量列中。
                     </p>
                     <p>分片队列支持0（最低优先级）和9（最高优先级）之间的整数优先级值，默认值为优先级4，由JMS标准定义。</p>
                  </div>
               </div><a id="ADQUE3653"></a><div class="props_rev_3"><a id="GUID-62C52117-903F-4294-9D44-155AFBB574D2" name="GUID-62C52117-903F-4294-9D44-155AFBB574D2"></a><h4 id="ADQUE-GUID-62C52117-903F-4294-9D44-155AFBB574D2" class="sect4"><span class="enumeration_section">5.1.4分</span>片队列和分区</h4>
                  <div>
                     <p>分片队列自动管理用于队列表的基础分区表。这种分区管理可以在前台或后台进行。每个分片都提供排队消息的会话级排序。每个入队会话都分配了一个分片。每个碎片由一系列子碎片组成。每个子硬盘都映射到一个分区。在入队时，消息会自动分配给表分区。</p>
                     <p>根据需要自动创建新分区，因为当dequeuers无法跟上入队者时队列表需要增长。当分区中的所有消息都已出列且不再需要时，分区将被截断并重用。消息缓存根据dequeuers的要求自动将消息从分区加载到内存中。不应在分片队列下面的分区表上创建全局索引。通常不建议在分区表上使用本地索引。如果需要这样的索引并导致性能下降，则应考虑非分片队列。</p>
                  </div>
               </div><a id="ADQUE3654"></a><div class="props_rev_3"><a id="GUID-1B18AD7E-2F02-4208-A059-6B4531586C75" name="GUID-1B18AD7E-2F02-4208-A059-6B4531586C75"></a><h4 id="ADQUE-GUID-1B18AD7E-2F02-4208-A059-6B4531586C75" class="sect4"><span class="enumeration_section">5.1.5分</span>片队列和Oracle Real Application Clusters（Oracle RAC）</h4>
                  <div>
                     <p>分片队列自动提供队列会话排序，同时尽可能避免跨实例通信。有时需要跨实例通信。例如，如果分片队列在一个Oracle RAC实例上具有单个入队会话而在另一个实例上具有单个出队会话，则分片队列将在Oracle RAC实例之间转发消息。消息转发对于排队事务是非原子的，以提高性能。如果Dequeuers连接到其分片中没有消息的实例，则可以获得ORA-25228。</p>
                     <p>在大多数情况下，请考虑为每个Oracle RAC实例上的每个订户或单个使用者队列设置多个dequeue，以提高吞吐量并减少跨实例开销。本指南的一个例外是当您使用指定单个消息的出列选择器时。如果要通过Oracle RAC数据库中的消息标识符使分片队列中的消息出列，则必须连接到为包含该消息的分片分配出列所有权的实例。否则，该消息将无法用于出列到出队会话。如果所有出列都在单个实例上执行，则消息将自动转发到此实例。因此，对于通过消息ID广泛出列的分片单用户队列，请考虑将分片队列的所有出队会话连接到单个实例。类似地，对于通过消息ID广泛出列的分片多消息队列，考虑让每个用户的所有出队会话连接到单个实例。服务可用于简化将出列会话连接到特定实例。</p>
                  </div>
               </div><a id="ADQUE3655"></a><div class="props_rev_3"><a id="GUID-F53DBE98-B57F-4931-9640-D0B5A4B84CFB" name="GUID-F53DBE98-B57F-4931-9640-D0B5A4B84CFB"></a><h4 id="ADQUE-GUID-F53DBE98-B57F-4931-9640-D0B5A4B84CFB" class="sect4"><span class="enumeration_section">5.1.6</span> Sharded队列限制</h4>
                  <div>
                     <p>分片队列目前不支持以下Oracle数据库功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>留言保留</p>
                        </li>
                        <li>
                           <p>交易分组</p>
                        </li>
                        <li>
                           <p>不支持匿名发布订阅者通知和OCI回调通知。支持PL / SQL回调通知。</p>
                        </li>
                        <li>
                           <p>消息网关</p>
                        </li>
                        <li>
                           <p>JMS的Oracle扩展，例如JMS传播和远程订阅者</p>
                        </li>
                        <li>
                           <p>每个队列表有多个队列。通过<code class="codeph">CREATE_SHARDED_QUEUE</code>接口创建分片队列。
                           </p>
                        </li>
                        <li>
                           <p>排序除了消息优先级后跟入队时间（在JMS标准中指定）</p>
                        </li>
                        <li>
                           <p>JDBC thick（OCI）驱动程序。</p>
                        </li>
                        <li>
                           <p>分片和非分片队列之间的传播</p>
                        </li>
                        <li>
                           <p>消息转换</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADQUE3656"></a><div class="props_rev_3"><a id="GUID-AE1B40DA-FCEE-4EBB-8B83-96477C47DD49" name="GUID-AE1B40DA-FCEE-4EBB-8B83-96477C47DD49"></a><h4 id="ADQUE-GUID-AE1B40DA-FCEE-4EBB-8B83-96477C47DD49" class="sect4"><span class="enumeration_section">5.1.7</span> Sharded队列调整</h4>
                  <div>
                     <p>在以下条件下，分片队列表现最佳：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>每个订户的Dequeuers位于每个实例上</p>
                        </li>
                        <li>
                           <p>订阅者跟上入队者的步伐。考虑为每个Oracle RAC实例上的每个订户设置多个dequeuers</p>
                        </li>
                     </ul>
                     <p>当dequeuers跟上入队者并且缓存大到足以存储每个分片队列的入队者和出队员的消息（包括有效负载）时，消息缓存最有效。使用分片队列时，Oracle要求您执行以下操作之一：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>设置参数<code class="codeph">STREAMS_POOL_SIZE</code></p>
                           <p>此参数控制Oracle数据库可用于分片队列消息缓存的共享内存大小。如果未指定，则可以为Streams池分配最多10％的共享池大小。</p>
                           <p>当<code class="codeph">SGA_TARGET</code>初始化参数设置为非零值时，Oracle的自动共享内存管理功能可管理Streams池的大小。如果<code class="codeph">STREAMS_POOL_SIZE</code>初始化参数也设置为非零值，则自动共享内存管理将此值用作Streams池的最小值。
                           </p>
                           <p>如果<code class="codeph">STREAMS_POOL_SIZE</code>初始化参数设置为非零值，并且<code class="codeph">SGA_TARGET</code>参数设置为<code class="codeph">0</code> （零），则Streams池大小是<code class="codeph">STREAMS_POOL_SIZE</code>参数指定的值（以字节为单位）。
                           </p>
                           <p>如果<code class="codeph">STREAMS_POOL_SIZE</code>和<code class="codeph">SGA_TARGET</code>初始化参数都设置为<code class="codeph">0</code> （零），则默认情况下，数据库中第一次使用Streams池会将等于共享池10％的内存量从缓冲区缓存传输到Streams游泳池。
                           </p>
                           <div class="infoboxnotealso" id="GUID-AE1B40DA-FCEE-4EBB-8B83-96477C47DD49__GUID-019AD1C8-38A2-4117-9826-ED3A12DE4099">
                              <p class="notep1">也可以看看：</p>
                              <p></p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="../arpls/DBMS_AQADM.html#ARPLS005" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a>中的<code class="codeph">DBMS_AQADM.set_min_streams_pool()</code>和<code class="codeph">DBMS_AQADM.set_max_streams_pool( )</code>用于通过Streams处理与<code class="codeph">STREAMS_POOL</code>共享进行更细粒度的控制。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li>
                           <p>打开SGA自动调谐</p>
                           <p>Oracle将根据Streams池的使用情况以及使用SGA的其他组件的使用情况，自动为Streams池从SGA分配适当的内存量。此类其他组件的示例是缓冲区高速缓存和库高速缓存。如果指定了<code class="codeph">STREAMS_POOL_SIZE</code> ，则将其用作下限。
                           </p>
                        </li>
                        <li id="GUID-AE1B40DA-FCEE-4EBB-8B83-96477C47DD49__MANUALLYTUNINGSHARDEDQUEUESSHARDEDQ-0508F585">
                           <p>手动调整分片队列</p>
                           <p>可以通过为消息缓存分配<code class="codeph">STREAMS_POOL</code>内存来调整分片队列。视图<code class="codeph">GV$AQ_MESSAGE_CACHE_ADVICE</code>根据当前消息传递负载的快照提供有关应为分片队列分配多少<code class="codeph">STREAMS_POOL</code>建议。在高负载期间，选择列<code class="codeph">INST_ID</code> ， <code class="codeph">SIZE_FOR_ESTIMATE</code>和<code class="codeph">ESTD_SIZE_TYPE</code> 。 <code class="codeph">ESTD_SIZE_TYPE</code>是三个值之一： <code class="codeph">MINIMUM</code> ， <code class="codeph">PREFERRED</code>或<code class="codeph">MAXIMUM</code> 。找到的最大值<code class="codeph">SIZE_FOR_ESTIMATE</code>跨Oracle RAC实例为每个的<code class="codeph">ESTD_SIZE_TYPE</code>值。强烈建议将<code class="codeph">STREAMS_POOL</code>至少设置为<code class="codeph">MINIMUM</code>建议，以提供任何消息缓存性能增益。将<code class="codeph">STREAMS_POOL</code>设置<code class="codeph">STREAMS_POOL</code>大于<code class="codeph">MAXIMUM</code>建议值几乎没有额外的性能提升。将<code class="codeph">STREAMS_POOL</code>设置为<code class="codeph">PREFERRED</code>建议尝试提供合理的空间性能权衡。如果<code class="codeph">MAXIMUM</code>大小建议远大于<code class="codeph">PREFERRED</code>建议，则检查分片队列是否没有孤立用户，或者是否应该向实例添加更多出列队列，以便出列队员能够跟上入队负载。<code class="codeph">STREAMS_POOL</code>调优应该在多个高负载时段和消息传递负载特性发生变化时完成。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-423633E9-9B72-45B5-9C3E-95386BBEDBA0" name="GUID-423633E9-9B72-45B5-9C3E-95386BBEDBA0"></a><h4 id="ADQUE-GUID-423633E9-9B72-45B5-9C3E-95386BBEDBA0" class="sect4"><span class="enumeration_section">5.1.8</span>用户分片</h4>
                  <div>
                     <p>应用程序可以决定在分片队列中对消息进行分片的方式。在这种情况下，应用程序显式指定将消息排入特定分片。</p>
                     <p>在Oracle RAC数据库中，分片始终由实例拥有。最初，分片由第一个消息在该分片中入队的实例拥有。当数据库实例关闭时，分片的所有者实例可能会更改。</p>
                     <p>通过用户分片，用户可以尝试将分片中的消息排入队列，该分片不是运行会话的实例所拥有的。在这种情况下，会触发交叉实例入队。为了支持跨实例入队，在其他实例上接收的入队请求将通过RAC互连转发到该分片的<code class="codeph">OWNER INSTANCE</code> 。还必须将listener.ora中的<code class="codeph">REMOTE_LISTENER</code>参数设置为允许将跨实例入队请求转发到正确的实例。在内部，Oracle RAC数据库上的分片队列可以使用实例之间的数据库链接。定义者权限在Oracle RAC数据库的分片队列中执行跨实例入队的PL / SQL包必须向包的用户授予<code class="codeph">INHERIT REMOTE PRIVILEGES</code> 。
                     </p>
                     <div class="infoboxnotealso" id="GUID-423633E9-9B72-45B5-9C3E-95386BBEDBA0__GUID-2623009F-4030-4DFF-8C4E-BCFFCE51AC79">
                        <p class="notep1">也可以看看：</p>
                        <p>有关详细信息，请<a href="../arpls/DBMS_AQADM.html#ARPLS-GUID-1429E3AD-452A-4E82-A914-AA875A2525E3" target="_blank">参阅</a> <span><cite>Oracle Database PL / SQL包和类型参考中的</cite></span> <a href="../arpls/DBMS_AQADM.html#ARPLS-GUID-1429E3AD-452A-4E82-A914-AA875A2525E3" target="_blank">DBMS_AQADM</a> 。
                        </p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-9951456C-F148-4B01-A3CD-6FD73C1637F4" name="GUID-9951456C-F148-4B01-A3CD-6FD73C1637F4"></a><h3 id="ADQUE-GUID-9951456C-F148-4B01-A3CD-6FD73C1637F4" class="sect3"><span class="enumeration_section">5.2</span>非分片队列</h3>
               <div>
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="aq-performance-scalability.html#GUID-D2560369-1153-4427-BFBF-E99E3AE18FA5" title="当持久性消息入队时，它们存储在数据库表中。持久性消息上的队列操作的性能特征与底层数据库操作类似。">非分片队列的持久消息传递性能概述</a></p>
                     </li>
                     <li>
                        <p><a href="aq-performance-scalability.html#GUID-ADEBD0C4-D2AD-4B86-A63B-986DA2231E11" title="Oracle数据库高级队列表布局类似于具有普通数据库表和索引的布局。">持久消息传递基本调优技巧</a></p>
                     </li>
                     <li>
                        <p><a href="aq-performance-scalability.html#GUID-689E9C50-5647-49BA-8BFF-AB0DEE6432EE" title="传播可以被认为是一种特殊的出列操作，在远程（或本地）队列表中有一个额外的INSERT。单个计划的传播不会跨多个作业队列进程并行化。相反，它们是负载平衡的。传播可以被认为是一种特殊的出列操作，在远程（或本地）队列表中有一个额外的INSERT。单个计划的传播不会跨多个作业队列进程并行化。相反，它们是负载平衡的。">传播调整技巧</a></p>
                     </li>
                     <li>
                        <p><a href="aq-performance-scalability.html#GUID-25168096-2B50-492C-95F9-BC723658552B" title="Oracle Real Application Clusters环境中的缓冲消息传递操作在队列的OWNER_INSTANCE上最快。">缓冲消息调优</a></p>
                     </li>
                  </ul>
               </div><a id="ADQUE2596"></a><div class="props_rev_3"><a id="GUID-ADEBD0C4-D2AD-4B86-A63B-986DA2231E11" name="GUID-ADEBD0C4-D2AD-4B86-A63B-986DA2231E11"></a><h4 id="ADQUE-GUID-ADEBD0C4-D2AD-4B86-A63B-986DA2231E11" class="sect4"><span class="enumeration_section">5.2.1</span>持久性消息传递基本调整技巧</h4>
                  <div>
                     <p>Oracle数据库高级队列表布局类似于具有普通数据库表和索引的布局。</p>
                     <div class="infoboxnotealso" id="GUID-ADEBD0C4-D2AD-4B86-A63B-986DA2231E11__GUID-8DB9689E-B469-4DA5-BE5A-01FFFE9F4173">
                        <p class="notep1">也可以看看：</p>
                        <p>用于调整建议的<a href="../tgdba/performance-tuning-overview.html#TGDBA025" target="_blank"><span class="italic">Oracle数据库性能调整指南</span></a></p>
                     </div>
                  </div><a id="ADQUE3628"></a><div class="props_rev_3"><a id="GUID-EBF359AC-998B-4539-A36D-A1460CA20DBB" name="GUID-EBF359AC-998B-4539-A36D-A1460CA20DBB"></a><h5 id="ADQUE-GUID-EBF359AC-998B-4539-A36D-A1460CA20DBB" class="sect5"><span class="enumeration_section">5.2.1.1</span>内存要求</h5>
                     <div>
                        <p>流池大小应至少为20 MB，以便在非Oracle RAC数据库中实现最佳的多用户出列性能。</p>
                        <p>持久排队出列操作使用流池来优化性能，尤其是在并发情况下。但是，这不是必需的，代码会自动切换到不太理想的代码路径。</p>
                        <p>分片队列引入了消息缓存，以实现高吞吐量消息传递系统的最佳性能。理想情况下，Streams池大小应足够大，以便在分片队列中缓存预期的消息积压。</p>
                     </div>
                  </div><a id="ADQUE2597"></a><div class="props_rev_3"><a id="GUID-8AD9338C-0FFA-4855-BD3D-64CC32C45484" name="GUID-8AD9338C-0FFA-4855-BD3D-64CC32C45484"></a><h5 id="ADQUE-GUID-8AD9338C-0FFA-4855-BD3D-64CC32C45484" class="sect5"><span class="enumeration_section">5.2.1.2</span>使用存储参数</h5>
                     <div>
                        <p>使用<code class="codeph">storage_clause</code>参数创建队列表时，可以指定<code class="codeph">storage_clause</code>参数。
                        </p>
                        <p>存储参数由其他IOT和使用队列表创建的表继承。队列表的表空间应该有足够的空间来容纳来自与队列表关联的所有对象的数据。在指定保留的情况下，历史表以及队列表可以变得非常大。</p>
                        <p>Oracle建议您使用自动段空间管理（ASSM）。否则，必须针对高并发性下的AQ性能调整<code class="codeph">initrans</code> ，freelists和freelist组。
                        </p>
                        <p>增加<code class="codeph">PCTFREE</code>将减少队列表/ IOT块中的消息数。这将在存在并发时减少块级争用。
                        </p>
                        <p>创建队列表时指定的存储参数由队列表，IOT和索引共享。这些可以通过使用<code class="codeph">DBMS_REDEFINITION</code>的在线重新定义单独更改。</p>
                     </div>
                  </div><a id="ADQUE2598"></a><div class="props_rev_3"><a id="GUID-0A4E928E-E712-4030-9381-C4EDF70E558C" name="GUID-0A4E928E-E712-4030-9381-C4EDF70E558C"></a><h5 id="ADQUE-GUID-0A4E928E-E712-4030-9381-C4EDF70E558C" class="sect5"><span class="enumeration_section">5.2.1.3</span> I / O配置</h5>
                     <div>
                        <p>由于Oracle数据库高级队列非常耗费I / O，因此通常需要调整I / O以消除任何瓶颈。</p>
                        <div class="infoboxnotealso" id="GUID-0A4E928E-E712-4030-9381-C4EDF70E558C__GUID-CC8CF22F-383B-47A1-87C7-57B8F905271B">
                           <p class="notep1">也可以看看：</p>
                           <p>“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adque&amp;id=TGDBA015" target="_blank"><span class="italic">Oracle数据库性能调优指南</span></a> ”中的“I / O配置和设计”</p>
                        </div>
                     </div>
                  </div><a id="ADQUE2599"></a><div class="props_rev_3"><a id="GUID-6B71D184-B128-4DB1-8EC9-F0EF33A0A56B" name="GUID-6B71D184-B128-4DB1-8EC9-F0EF33A0A56B"></a><h5 id="ADQUE-GUID-6B71D184-B128-4DB1-8EC9-F0EF33A0A56B" class="sect5"><span class="enumeration_section">5.2.1.4</span>在单个非分片队列表运行入队和出队过程兼</h5>
                     <div>
                        <p>某些环境必须以恒定流程处理消息，要求将进程并行和出列并行。如果消息传递系统只有一个队列表和一个队列，则所有进程必须同时在同一段区域上工作。这在提供大量消息时排除了合理的性能水平。</p>
                        <p>并发进程的最佳数量取决于可用的系统资源。例如，在四CPU系统上，从两个并发排队和两个并发排队过程开始是合理的。如果系统无法提供所需数量的<a href="glossary.html#GUID-2028AECF-DB3E-40E2-99B6-A35674C08038"><span class="xrefglossterm">消息</span></a> ，则使用多个订户进行负载平衡，而不是增加进程数。
                        </p>
                        <p>调整队列中的入队和出队率，以便在通常情况下队列大小保持较小且有界。增长和收缩的队列将使索引和IOT失去平衡，这将影响性能。</p>
                        <p>对于多用户队列，使用多个订户进行负载平衡而不是增加进程数将减少争用。可以使用多个队列表来获得水平可伸缩性。</p>
                        <p>有关调整分片队列的信息，请参阅<a href="aq-performance-scalability.html#GUID-AE1B40DA-FCEE-4EBB-8B83-96477C47DD49">Sharded Queues Tuning</a> 。
                        </p>
                     </div>
                  </div><a id="ADQUE2600"></a><div class="props_rev_3"><a id="GUID-A6485ACE-C07B-46F5-84A3-D5552934E9F9" name="GUID-A6485ACE-C07B-46F5-84A3-D5552934E9F9"></a><h5 id="ADQUE-GUID-A6485ACE-C07B-46F5-84A3-D5552934E9F9" class="sect5"><span class="enumeration_section">5.2.1.5</span>在单个非分片队列表中系列地运行入队和出队进程</h5>
                     <div>
                        <p>当enqueue和dequeue进程串行运行时，同一数据段上的争用低于并发进程的争用。但是，系统传递消息所花费的总时间比它们同时运行的时间长。</p>
                        <p>增加进程数有助于排队和出队。当进程数增加时，对于入队者而言，消息吞吐率可能高于出队者，尤其是对于单个消费者队列。多个消费者队列上的出列过程可以更好地扩展。</p>
                     </div>
                  </div><a id="ADQUE2601"></a><div class="props_rev_3"><a id="GUID-C26E5259-B2A0-4D7C-8EC5-C7BC0DAD330B" name="GUID-C26E5259-B2A0-4D7C-8EC5-C7BC0DAD330B"></a><h5 id="ADQUE-GUID-C26E5259-B2A0-4D7C-8EC5-C7BC0DAD330B" class="sect5"><span class="enumeration_section">5.2.1.6</span>在队列表上创建索引</h5>
                     <div>
                        <p>如果满足这些条件，则在非分片队列表上创建索引非常有用。</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用相关ID出列队列</p>
                              <p>在底层队列表的列<code class="codeph">corr_id</code>上创建的索引<code class="codeph">AQ$_</code> <span class="italic"><code class="codeph">QueueTableName</code></span>加速出列队列。
                              </p>
                           </li>
                           <li>
                              <p>使用条件出列队列</p>
                              <p>这就像将条件添加到底层队列表上的<code class="codeph">SELECT</code>的where子句一样。<span class="italic"><code class="codeph">QueueTableName</code></span>上的索引<span class="italic"><code class="codeph">QueueTableName</code></span>加快此<code class="codeph">SELECT</code>语句的性能。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="ADQUE2602"></a><div class="props_rev_3"><a id="GUID-3BD598B9-4F3F-4A62-8EE8-9274715D754F" name="GUID-3BD598B9-4F3F-4A62-8EE8-9274715D754F"></a><h5 id="ADQUE-GUID-3BD598B9-4F3F-4A62-8EE8-9274715D754F" class="sect5"><span class="enumeration_section">5.2.1.7</span>非分片队列的其他技巧</h5>
                     <div>
                        <p>这些是一些其他持久消息传递基本调优技巧。</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>确保收集统计信息，以便选择用于检索邮件的最佳查询计划。默认情况下，队列表无法自动收集统计信息。建议的用法是使用代表队列消息加载来收集统计信息并锁定它们。</p>
                           </li>
                           <li>
                              <p>队列表索引和IOT由AQ后台进程自动合并。但是，如果需要，它们必须继续受到监控和合并。通过自动空间段管理（ASSM），可以将在线收缩操作用于相同目的。均衡的索引可以减少队列监视CPU的消耗，并确保最佳的入队出队性能。</p>
                           </li>
                           <li>
                              <p>确保运行足够的队列监视器进程以执行后台任务。队列监视器还必须运行其他关键的后台活动。多个<code class="codeph">qmn</code>进程共享负载;确保有足够的。这些是自动调整的，但如果需要，可以强制为最小数量。
                              </p>
                           </li>
                           <li>
                              <p>建议等待时间的队列仅用于专用服务器进程。在共享服务器环境中，共享服务器进程专用于呼叫持续时间的出队操作，包括等待时间。许多此类进程的存在可能导致严重的性能和可伸缩性问题，并可能导致共享服务器进程死锁。</p>
                           </li>
                           <li>
                              <p>长时间运行的出列事务会使队列中的队列争用恶化，必须避免。</p>
                           </li>
                           <li>
                              <p>将多个使用者队列上的多个出列操作批处理为单个事务可提供最佳吞吐量。</p>
                           </li>
                           <li>
                              <p>如果不使用消息优先级，则使用<code class="codeph">NEXT</code>作为导航模式。这提供了相同的语义，但提高了性能。
                              </p>
                           </li>
                           <li>
                              <p>如果在<code class="codeph">BROWSE</code>模式下出现，然后是<code class="codeph">REMOVE</code>则使用<code class="codeph">REMOVE_NODATA</code>出列模式。</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADQUE2603"></a><div class="props_rev_3"><a id="GUID-689E9C50-5647-49BA-8BFF-AB0DEE6432EE" name="GUID-689E9C50-5647-49BA-8BFF-AB0DEE6432EE"></a><h4 id="ADQUE-GUID-689E9C50-5647-49BA-8BFF-AB0DEE6432EE" class="sect4"><span class="enumeration_section">5.2.2</span>传播调整技巧</h4>
                  <div>
                     <p>传播可以被认为是一种特殊的出列操作，在远程（或本地）队列表中有一个额外的<code class="codeph">INSERT</code> 。单个计划的传播不会跨多个作业队列进程并行化。相反，它们是负载平衡的。传播可以被认为是一种特殊的出列操作，在远程（或本地）队列表中有一个额外的<code class="codeph">INSERT</code> 。单个计划的传播不会跨多个作业队列进程并行化。相反，它们是负载平衡的。
                     </p>
                     <p>为了获得更好的可伸缩性，请根据可用的系统资源（CPU）配置<a href="glossary.html#GUID-DE5B852F-823C-4DC8-B6BB-4825D688A00A"><span class="xrefglossterm">传播</span></a>计划的数量。
                     </p>
                     <p><a href="glossary.html#GUID-4956C594-EE49-498B-A9DD-7371518B4EBA"><span class="xrefglossterm">事务性</span></a>和<a href="glossary.html#GUID-D93C8E9C-D211-4780-B671-CBA864C62E5A"><span class="xrefglossterm">非事务性</span></a> （默认）队列表的传播速率在一定程度上有所不同，因为Oracle数据库高级队列确定非事务性队列的批处理大小，而对于事务性队列，批量大小主要由用户应用程序决定。
                     </p>
                     <p>优化传播分批进行。如果远程队列位于不同的数据库中，则Oracle数据库高级队列使用排序算法来避免需要两阶段提交。当必须将消息发送到同一目的地中的多个队列时，会多次发送该消息。如果必须将消息发送到目标位置的同一队列中的多个使用者，则只发送一次。</p>
                  </div>
               </div><a id="ADQUE2604"></a><div class="props_rev_3"><a id="GUID-25168096-2B50-492C-95F9-BC723658552B" name="GUID-25168096-2B50-492C-95F9-BC723658552B"></a><h4 id="ADQUE-GUID-25168096-2B50-492C-95F9-BC723658552B" class="sect4"><span class="enumeration_section">5.2.3</span>缓冲消息调整</h4>
                  <div>
                     <p>Oracle Real Application Clusters环境中的缓冲消息传递操作在队列的<code class="codeph">OWNER_INSTANCE</code>上最快。
                     </p>
                  </div><a id="ADQUE2593"></a><div class="props_rev_3"><a id="GUID-D2560369-1153-4427-BFBF-E99E3AE18FA5" name="GUID-D2560369-1153-4427-BFBF-E99E3AE18FA5"></a><h5 id="ADQUE-GUID-D2560369-1153-4427-BFBF-E99E3AE18FA5" class="sect5"><span class="enumeration_section">5.2.3.1</span>非分片队列的持久消息传递性能概述</h5>
                     <div>
                        <p>当持久性消息入队时，它们存储在数据库表中。持久性消息上的队列操作的性能特征与底层数据库操作类似。</p>
                        <p>入<a href="glossary.html#GUID-B21E60F7-4BFA-42A2-9A8F-B781C2A55ED9"><span class="xrefglossterm">队</span></a>操作的代码路径与<code class="codeph">SELECT</code>和<code class="codeph">INSERT</code>类似，具有三个索引组织表的多<a href="glossary.html#GUID-45894F1F-4871-4A00-9171-2743821BAD3A"><span class="xrefglossterm">列队列表</span></a> 。<a href="glossary.html#GUID-BC8D60E8-953A-4C6C-8163-F7AE187B768B"><span class="xrefglossterm">出列</span></a>操作的代码路径类似于多列表上的<code class="codeph">SELECT</code>操作和出列索引组织表上的<code class="codeph">DELETE</code>操作。在许多情况下，例如，当未使用Oracle RAC且存在足够的流池内存时，出列操作已经过优化，并且与多列表上的<code class="codeph">SELECT</code>操作相当。
                        </p>
                        <div class="infoboxnote" id="GUID-D2560369-1153-4427-BFBF-E99E3AE18FA5__GUID-773A010E-778B-4C7F-BD6F-5D7B05885E3A">
                           <p class="notep1">注意：</p>
                           <p>性能不受表中<a href="glossary.html#GUID-583DEF67-C9BC-4B83-B8DC-2375A5BE08BB"><span class="xrefglossterm">队列</span></a>数量的影响。
                           </p>
                        </div>
                     </div>
                  </div><a id="ADQUE2594"></a><div class="props_rev_3"><a id="GUID-B8F0E33C-4C4B-4EFF-9B80-666C20BFB0CB" name="GUID-B8F0E33C-4C4B-4EFF-9B80-666C20BFB0CB"></a><h5 id="ADQUE-GUID-B8F0E33C-4C4B-4EFF-9B80-666C20BFB0CB" class="sect5"><span class="enumeration_section">5.2.3.2</span>非分片队列和Oracle Real Application Clusters</h5>
                     <div>
                        <p>Oracle Real Application Clusters（Oracle RAC）可用于确保对队列数据的高可用性访问。</p>
                        <p>队列的入口和出口点（通常分别称为尾部和头部）可能是极端热点。由于Oracle RAC在出现热点时可能无法很好地扩展，因此仅限于从一个实例访问队列。如果发生实例故障，则故障实例管理的消息可由其中一个幸存实例立即处理。如果非分片队列遇到热点，请考虑使用分片队列。</p>
                        <p>您可以将Oracle RAC实例关联与8.1兼容的队列表相关联。如果在不同的实例中使用<code class="codeph">q1</code>和<code class="codeph">q2</code> ，则可以在队列表上使用<code class="codeph">ALTER_QUEUE_TABLE</code>或<code class="codeph">CREATE_QUEUE_TABLE</code> ，并将<code class="codeph">primary_instance</code>设置为相应的<code class="codeph">instance_id.</code></p>
                        <div class="infoboxnotealso" id="GUID-B8F0E33C-4C4B-4EFF-9B80-666C20BFB0CB__GUID-158353E4-0F48-4A30-AF1B-C351E02A736A">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="aq-administrative-interface.html#GUID-7A35067E-0A52-4EC2-B0F8-3540E8554E41" title="DBMS_AQADM.CREATE_QUEUE_TABLE为预定义类型的消息创建非分片队列表。">创建队列表</a></p>
                              </li>
                              <li>
                                 <p><a href="aq-administrative-interface.html#GUID-13FB1BCB-5D5A-410A-AD46-B5F58F50B32C" title="DBMS_AQADM.ALTER_QUEUE_TABLE更改非分片队列表的现有属性。">更改队列表</a></p>
                              </li>
                              <li>
                                 <p><a href="aq-performance-scalability.html#GUID-1B18AD7E-2F02-4208-A059-6B4531586C75">分片队列和Oracle Real Application Clusters（Oracle RAC）</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="ADQUE2595"></a><div class="props_rev_3"><a id="GUID-CD5084E6-A0F7-4B70-B8AF-7409432E43B9" name="GUID-CD5084E6-A0F7-4B70-B8AF-7409432E43B9"></a><h5 id="ADQUE-GUID-CD5084E6-A0F7-4B70-B8AF-7409432E43B9" class="sect5"><span class="enumeration_section">5.2.3.3</span>共享服务器环境中的Oracle数据库高级队列</h5>
                     <div>
                        <p>队列操作可伸缩性类似于底层数据库操作的可伸缩性。</p>
                        <p>如果应用了带有wait选项的出列操作，则在成功或等待时间已过期之前不会返回。在共享服务器环境中，共享服务器进程专用于呼叫持续时间的出队操作，包括等待时间。许多此类进程的存在可能导致严重的性能和可伸缩性问题，并可能导致共享服务器进程死锁。因此，Oracle建议使用专用服务器进程应用具有wait选项的出列请求。不强制执行此限制。</p>
                        <div class="infoboxnotealso" id="GUID-CD5084E6-A0F7-4B70-B8AF-7409432E43B9__GUID-F3C084A2-BA36-4041-A1BB-E75BA0B1356A">
                           <p class="notep1">也可以看看：</p>
                           <p>有关等待选项的更多信息，请参阅“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adque&amp;id=ARPLS71684" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> ”中的“DEQUEUE_OPTIONS_T类型”</p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="ADQUE2605"></a><div class="props_rev_3"><a id="GUID-F420D721-713E-42C9-971F-89B967B7E5E6" name="GUID-F420D721-713E-42C9-971F-89B967B7E5E6"></a><h3 id="ADQUE-GUID-F420D721-713E-42C9-971F-89B967B7E5E6" class="sect3"><span class="enumeration_section">5.3</span>绩效观点</h3>
               <div>
                  <p>Oracle提供这些视图来监视系统性能和故障排除。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-BAA5F8F0-24EB-495D-B032-67FCF75017BA" title="V $ AQ_MESSAGE_CACHE_STAT视图显示有关系统全局区域（SGA）中streams_pool中分片队列的内存管理的统计信息。分片队列以子分队为单位使用streams_pool。因此，此视图的列显示子层级的统计信息，而与队列无关。此视图显示所有分片队列的统计信息。">V $ AQ_MESSAGE_CACHE_STAT：Sharded队列的内存管理</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-BAB03D2E-66C6-45BC-BF3B-2FDF4097A149" title="V $ AQ_SHARDED_SUBSCRIBER_STAT视图显示有关分片队列订户的统计信息。内存顾问使用此统计信息。">V $ AQ_SHARDED_SUBSCRIBER_STAT：Sharded Queue Subscriber Statistics</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-68CA0CEB-5AAB-4557-91A8-735F19BFF4CB" title="V $ AQ_MESSAGE_CACHE_ADVICE视图显示了一系列潜在消息高速缓存大小的模拟度量标准。该视图通过以下面描述的度量形式提供信息来帮助缓存大小调整。">V $ AQ_MESSAGE_CACHE_ADVICE：模拟指标</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-03AB9C9F-ACD2-4D84-81C8-603B92173554" title="V $ AQ_REMOTE_DEQUEUE_AFFINITY视图列出了未从分片的所有者实例本地出列的订户的出列亲和性实例。跨实例消息转发用于这些订户。">V $ AQ_REMOTE_DEQUEUE_AFFINITY：出列亲和实例列表</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-582D2E34-F973-4798-B871-5D57A0686970" title="V $ PERSISTENT_QUEUES视图显示自队列的第一个活动时间以来数据库中所有活动持久队列的信息。">V $ PERSISTENT_QUEUES：实例中的所有活动持久队列</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-4DD31A77-2DFD-481D-BFE9-ADAFC7FBA915" title="V $ PERSISTENT_SUBSCRIBERS视图显示有关数据库中持久队列的所有活动订户的信息。">V $ PERSISTENT_SUBSCRIBERS：实例中持久队列的所有活动订阅者</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-77560F69-C176-49C5-B8B1-24353F4FA2B8" title="V $ PERSISTENT_PUBLISHERS视图显示有关数据库中持久队列的所有活动发布者的信息。">V $ PERSISTENT_PUBLISHERS：实例中持久队列的所有活动发布者</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-175B1A5D-D677-4B3B-877B-E77DCF436CC2" title="V $ BUFFERED_QUEUES视图显示有关实例中所有缓冲队列的信息。每个队列有一行。">V $ BUFFERED_QUEUES：实例中的所有缓冲队列。</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-9CC537A3-45A5-425E-BD8C-7C27BA557975" title="V $ BUFFERED_SUBSCRIBERS视图显示有关实例中所有缓冲队列的订户的信息。每个队列每个用户有一行。">V $ BUFFERED_SUBSCRIBERS：实例中所有缓冲队列的订阅者</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-269C1CA5-160D-481C-9DDB-8944F0B641B4" title="V $ BUFFERED_PUBLISHERS视图显示有关实例中所有缓冲发布者的信息。">V $ BUFFERED_PUBLISHERS：实例中的所有缓冲发布者</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-CEBDC95C-A601-4DF1-BB10-97F5EAF5EB41" title="V $ PERSISTENT_QMN_CACHE视图显示有关数据库中所有队列表的所有后台活动的详细统计信息。">V $ PERSISTENT_QMN_CACHE：持久队列的后台任务的性能统计信息</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-E0673077-05DC-41AC-B796-DC408DBE8C7F" title="V $ AQ视图提供有关整个数据库的不同状态的消息数的信息。">V $ AQ：数据库中不同状态的消息数</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-603866CD-A14D-496B-9D09-D48EFA111CE1" title="V $ AQ_BACKGROUND_COORDINATOR视图适用于Oracle Database 12c第1版（12.1）及更高版本。">V $ AQ_BACKGROUND_COORDINATOR：AQ主背景协调员流程（AQPC）的绩效统计</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-43617C97-4D52-4204-85B3-D85F45345BDB" title="V $ AQ_JOB_COORDINATOR视图适用于Oracle Database 12c第1版（12.1）及更高版本。">V $ AQ_JOB_COORDINATOR：每个协调员的绩效统计</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-ABA9207C-02F8-4A4A-8FDB-6508F1DB3249" title="V $ AQ_NONDUR_REGISTRATIONS视图适用于Oracle Database 12c第1版（12.1）及更高版本。此视图提供有关非持久订阅的信息。">V $ AQ_NONDUR_REGISTRATIONS：非耐久性注册</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-12F8B20D-5081-4D96-B0D3-4C58357683DB" title="V $ AQ_SERVER_POOL视图适用于Oracle Database 12c第1版（12.1）及更高版本。此视图列出池中所有服务器的性能统计信息。">V $ AQ_SERVER_POOL：所有服务器的性能统计信息</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-563471B8-A800-4322-84F1-42A5EA88A6A3" title="V $ AQ_CROSS_INSTANCE_JOBS视图适用于Oracle Database 12c第1版（12.1）及更高版本。此视图描述了每个跨进程作业。">V $ AQ_CROSS_INSTANCE_JOBS：跨进程作业说明</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-ABA9207C-02F8-4A4A-8FDB-6508F1DB3249" title="V $ AQ_NONDUR_REGISTRATIONS视图适用于Oracle Database 12c第1版（12.1）及更高版本。此视图提供有关非持久订阅的信息。">V $ AQ_NONDUR_REGISTRATIONS：非耐久性注册</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-0A62B589-AA64-4521-A610-31B9EB35666E" title="V $ AQ_NOTIFICATION_CLIENTS视图适用于Oracle Database 12c第1版（12.1）及更高版本。此视图显示安全OCI客户端连接的性能统计信息。">V $ AQ_NOTIFICATION_CLIENTS：安全OCI客户端连接</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-F43DBCE7-4CA3-4B43-BE07-BCEFB4E03E00" title="V $ AQ_SUBSCRIBER_LOAD视图适用于Oracle Database 12c第1版（12.1）及以上版本。此视图根据Oracle RAC环境中每个实例的延迟来描述所有分片队列订户的负载。">V $ AQ_SUBSCRIBER_LOAD：持久订阅者</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-8DC43990-F90F-49DF-A85B-1E6AA1A7CF55" title="V $ AQ_NONDUR_SUBSCRIBER视图适用于Oracle Database 12c第1版（12.1）及更高版本。V $ AQ_NONDUR_SUBSCRIBER提供有关分片队列上非持久订户的信息。">V $ AQ_NONDUR_SUBSCRIBER：非持久订户</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-09EBF513-ABD3-489A-B221-C8B2E86141A3" title="V $ AQ_NONDUR_SUBSCRIBER_LWM视图适用于Oracle Database 12c第1版（12.1）及更高版本。非持久订户的LWM是分片，优先级和LWM（子分片）的组合。">V $ AQ_NONDUR_SUBSCRIBER_LWM：非持久订户的LWM</a></p>
                     </li>
                     <li>
                        <p><a href="aq-messaging-gateway-views.html#GUID-18843EE7-86FD-41DC-85DF-2D8E01F37014" title="V $ AQ_MESSAGE_CACHE视图提供实例中子硬盘级别的分片队列的消息缓存的性能统计信息。">V $ AQ_MESSAGE_CACHE：绩效统计</a></p>
                     </li>
                  </ul>
                  <p>这些视图与自动工作负载存储库（AWR）集成在一起。用户可以基于两个AWR快照生成报告，以计算每个队列/订户的入队率，出队率和其他统计信息。</p>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Optimizer defaults are adequate for most operations, but not all."></meta>
      <meta name="description" content="Optimizer defaults are adequate for most operations, but not all."></meta>
      <title>影响优化器</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Tuning Guide"></meta>
      <meta property="og:description" content="Optimizer defaults are adequate for most operations, but not all."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Tuning Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-tuning-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-31T14:57:08-08:00"></meta>
      <meta name="dcterms.title" content="SQL Tuning Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2013, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96095-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="optimizer-controls.html" title="Previous" type="text/html"></link>
      <link rel="next" href="improving-rwp-cursor-sharing.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TGSQL"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="optimizer-controls.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="improving-rwp-cursor-sharing.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL调优指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="optimizer-controls.html" property="item" typeof="WebPage"><span property="name">优化器控件</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">影响优化器</li>
            </ol>
            <a id="GUID-8758EF88-1CC6-41BD-8581-246702414D1D" name="GUID-8758EF88-1CC6-41BD-8581-246702414D1D"></a><a id="TGSQL246"></a>
            
            <h2 id="TGSQL-GUID-8758EF88-1CC6-41BD-8581-246702414D1D" class="sect2"><span class="enumeration_chapter">19</span>影响优化器</h2>
         </header>
         <div class="ind">
            <div>
               <p>优化程序默认值适用于大多数操作，但不是全部。</p>
               <p>在某些情况下，您可能拥有优化程序未知的信息，或者需要针对特定类型的语句或工作负载调整优化程序。在这种情况下，影响优化器可以提供更好的性能。</p>
               <p>本章包含以下主题：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="influencing-the-optimizer.html#GUID-FD82C6F7-C338-41E3-8AE1-F8ADFB882ECF">影响优化器的技术</a><br>您可以使用多种技术来影响优化程序，包括SQL配置文件，SQL计划管理，初始化参数和提示。
                  </li>
                  <li class="ulchildlink"><a href="influencing-the-optimizer.html#GUID-125341C0-DBA3-4FAB-B4DB-8857CC36015C">用初始化参数影响优化器</a><br>本章介绍哪些初始化参数会影响优化，以及如何设置它们。
                  </li>
                  <li class="ulchildlink"><a href="influencing-the-optimizer.html#GUID-C558F7CF-446E-4078-B045-0B3BB026CB3C">使用提示影响优化程序</a><br>优化程序提示是SQL语句中的特殊注释，它将指令传递给优化程序。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="optimizer-controls.html#GUID-12325D58-595B-473A-A6C7-C6A4430894CA" title="您可以使用提示和初始化参数来影响优化程序的决策和行为。">优化程序控件</a></p>
                  </div>
               </div>
            </div>
            <a id="TGSQL248"></a><a id="TGSQL247"></a><div class="props_rev_3"><a id="GUID-FD82C6F7-C338-41E3-8AE1-F8ADFB882ECF" name="GUID-FD82C6F7-C338-41E3-8AE1-F8ADFB882ECF"></a><h3 id="TGSQL-GUID-FD82C6F7-C338-41E3-8AE1-F8ADFB882ECF" class="sect3"><span class="enumeration_section">19.1</span>影响优化器的技术</h3>
               <div>
                  <p>您可以使用多种技术来影响优化程序，包括SQL配置文件，SQL计划管理，初始化参数和提示。</p>
                  <p>下图显示了影响优化程序的主要技术。</p>
                  <div class="figure" id="GUID-FD82C6F7-C338-41E3-8AE1-F8ADFB882ECF__BBAGGHDF">
                     <p class="titleinfigure">图19-1影响优化器的技术</p><img src="img/tgsql_vm_014.png" alt="下面是图19-1的描述" title="下面是图19-1的描述" longdesc="img_text/tgsql_vm_014.html"><br><a href="img_text/tgsql_vm_014.html">“图19-1影响优化器的技术”的描述</a></div>
                  <!-- class="figure" -->
                  <p>上图中的重叠方块显示SQL计划管理使用初始化参数和提示。SQL配置文件在技术上也包括提示。</p>
                  <div class="infoboxnote" id="GUID-FD82C6F7-C338-41E3-8AE1-F8ADFB882ECF__GUID-769C1EA0-1114-4B11-A699-A5267BB78DDE">
                     <p class="notep1">注意：</p>
                     <p><a href="glossary.html#GUID-A1BD6A75-73B9-4F68-8FD6-A89057E95ADF"><span class="xrefglossterm">存储的大纲</span></a>是一种传统技术，其用途与SQL计划基线类似。
                     </p>
                  </div>
                  <p>您可以使用以下技术来影响优化程序：</p>
                  <div class="tblformal" id="GUID-FD82C6F7-C338-41E3-8AE1-F8ADFB882ECF__GUID-59550DFB-08E3-467B-B3AD-18C5DA37754D">
                     <p class="titleintable">表19-1优化器技术</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="优化技术" border="1" summary="This table describes techniques for influencing the optimizer." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="20%" id="d97281e265">技术</th>
                              <th align="left" valign="bottom" width="20%" id="d97281e267">描述</th>
                              <th align="left" valign="bottom" width="20%" id="d97281e269">了解更多</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d97281e273" headers="d97281e265 ">
                                 <p>初始化参数</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d97281e273 d97281e267 ">
                                 <p>参数会影响数据库实例和会话级别的许多类型的优化程序行为。</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d97281e273 d97281e269 ">
                                 <p><span class="q">“ <a href="influencing-the-optimizer.html#GUID-125341C0-DBA3-4FAB-B4DB-8857CC36015C" title="本章介绍哪些初始化参数会影响优化，以及如何设置它们。">使用初始化参数影响优化程序</a> ”</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d97281e288" headers="d97281e265 ">
                                 <p>提示</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d97281e288 d97281e267 ">
                                 <p><a href="glossary.html#GUID-7EB56A29-EA19-4D81-B487-6940960A3CDC"><span class="xrefglossterm">提示</span></a>是SQL语句中的注释指令。提示控制广泛的行为。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d97281e288 d97281e269 ">
                                 <p><span class="q">“ <a href="influencing-the-optimizer.html#GUID-C558F7CF-446E-4078-B045-0B3BB026CB3C" title="优化程序提示是SQL语句中的特殊注释，它将指令传递给优化程序。">用提示影响优化器</a> ”</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d97281e306" headers="d97281e265 ">
                                 <p><code class="codeph">DBMS_STATS</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d97281e306 d97281e267 ">
                                 <p>此包更新并管理优化程序统计信息。统计数据越准确，优化程序估计的越好。本章不涉及<code class="codeph">DBMS_STATS</code> 。</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d97281e306 d97281e269 ">
                                 <p><span class="q">“ <a href="gathering-optimizer-statistics.html#GUID-245F23B2-24AF-44D8-9F12-99FD1215E878" title="本章介绍如何使用DBMS_STATS.GATHER _ * _ STATS程序单元。">收集优化程序统计信息</a> ”</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d97281e328" headers="d97281e265 ">
                                 <p>SQL配置文件</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d97281e328 d97281e267 ">
                                 <p><a href="glossary.html#GUID-79F91289-6DD0-49BC-AEA2-3427F5D52F41"><span class="xrefglossterm">SQL配置文件</span></a>是一个数据库对象，其中包含特定于SQL语句的辅助统计信息。从概念上讲，SQL配置文件是SQL语句的一组对象级统计信息对表或索引的作用。SQL配置文件可以纠正在SQL调优期间发现的次优优化程序估计值。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d97281e328 d97281e269 ">
                                 <p><span class="q">“ <a href="managing-sql-profiles.html#GUID-C7FE0936-63B8-46EF-A03E-7E59F704606E" title="如有必要，SQL Tuning Advisor建议使用SQL配置文件。您可以使用DBMS_SQLTUNE来实现，更改，删除和传输SQL配置文件。">管理SQL配置文件</a> ”</span></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d97281e349" headers="d97281e265 ">
                                 <p>SQL计划管理和存储的大纲</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d97281e349 d97281e267 ">
                                 <p><a href="glossary.html#GUID-7504D0DE-9297-476C-808B-EDCDB1EF43E0"><span class="xrefglossterm">SQL计划管理</span></a>是一种预防机制，使优化程序能够自动管理执行计划，确保数据库仅使用已知或已验证的计划。本章不涉及SQL计划管理。
                                 </p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d97281e349 d97281e269 ">
                                 <p><span class="q">“ <a href="managing-sql-plan-baselines.html#GUID-7024369A-F98D-48E4-921C-C899485C954F" title="本章介绍使用DBMS_SPM程序包与SQL计划管理相关的概念和任务。">管理SQL计划基准</a> ”</span></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>在某些情况下，多种技术可以优化相同的行为。例如，您可以使用初始化参数和提示来设置优化程序目标。</p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-FD82C6F7-C338-41E3-8AE1-F8ADFB882ECF__GUID-1EE02555-D805-43C2-A360-9690B6732BA2">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“将<a href="migrating-stored-outlines.html#GUID-E1CBB4DA-2F83-4F4D-845B-CAAA8333DF1A" title="存储的大纲迁移是用户启动的将存储的大纲转换为SQL计划基线的过程。SQL计划基准是一组经证实可提供最佳性能的计划。">存储的大纲迁移到SQL计划基准</a> ”</span>以了解如何将存储的大纲迁移到SQL计划基准</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="influencing-the-optimizer.html#GUID-8758EF88-1CC6-41BD-8581-246702414D1D" title="优化程序默认值适用于大多数操作，但不是全部。">影响优化程序</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TGSQL250"></a><div class="props_rev_3"><a id="GUID-125341C0-DBA3-4FAB-B4DB-8857CC36015C" name="GUID-125341C0-DBA3-4FAB-B4DB-8857CC36015C"></a><h3 id="TGSQL-GUID-125341C0-DBA3-4FAB-B4DB-8857CC36015C" class="sect3"><span class="enumeration_section">19.2</span>用初始化参数影响优化器</h3>
               <div>
                  <p>本章介绍哪些初始化参数会影响优化，以及如何设置它们。</p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="influencing-the-optimizer.html#GUID-C1C85DEA-3583-40FE-B5BB-6AC8F76FFE34">关于优化器初始化参数</a><br>Oracle数据库提供初始化参数以影响优化器行为的各个方面，包括游标共享，自适应优化和优化器模式。
                     </li>
                     <li class="ulchildlink"><a href="influencing-the-optimizer.html#GUID-325A3D6A-47B8-4AAF-8BB0-4037553D02FE">启用优化程序功能</a><br><code class="codeph">OPTIMIZER_FEATURES_ENABLE</code>初始化参数（或提示）控制一组与优化器相关的功能，具体取决于数据库版本。
                     </li>
                     <li class="ulchildlink"><a href="influencing-the-optimizer.html#GUID-2D3EEFD3-C4C6-4D2F-B24A-8DC0C1E1CBA1">选择优化程序目标</a><br><strong class="term">优化器目标</strong>是<strong class="term">优化器</strong>对资源使用的优先级。
                     </li>
                     <li class="ulchildlink"><a href="influencing-the-optimizer.html#GUID-DAFB7D07-E8B3-4219-A09D-214BD943AFF9">控制自适应优化</a><br>在Oracle数据库中， <strong class="term">自适应查询优化</strong>是优化程序根据运行时收集的统计信息调整执行计划的过程。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="influencing-the-optimizer.html#GUID-8758EF88-1CC6-41BD-8581-246702414D1D" title="优化程序默认值适用于大多数操作，但不是全部。">影响优化程序</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL252"></a><a id="TGSQL94575"></a><a id="TGSQL10108"></a><a id="TGSQL251"></a><div class="props_rev_3"><a id="GUID-C1C85DEA-3583-40FE-B5BB-6AC8F76FFE34" name="GUID-C1C85DEA-3583-40FE-B5BB-6AC8F76FFE34"></a><h4 id="TGSQL-GUID-C1C85DEA-3583-40FE-B5BB-6AC8F76FFE34" class="sect4"><span class="enumeration_section">19.2.1</span>关于优化器初始化参数</h4>
                  <div>
                     <p>Oracle数据库提供初始化参数以影响优化器行为的各个方面，包括游标共享，自适应优化和优化器模式。</p>
                     <div class="section">
                        <p>下表列出了一些最重要的优化器参数。请注意，此表不包括近似查询初始化参数，这些参数在<span class="q">“ <a href="query-optimizer-concepts.html#GUID-DB2B2D98-B47E-4D44-8F94-E44DCFAEF305" title="您可以使用APPROX_FOR_ *初始化参数在不更改现有代码的情况下实现近似查询处理。">近似查询初始化参数</a> ”中</span>进行了描述。
                        </p>
                        <div class="tblformalwide" id="GUID-C1C85DEA-3583-40FE-B5BB-6AC8F76FFE34__BBAIEADC">
                           <p class="titleintable">表19-2控制优化器行为的初始化参数</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="控制优化器行为的初始化参数" width="100%" border="1" summary="This two-column table describes initialization parameters that control optimizer behavior. Column 1 is the parameter. Column 2 describes that parameter. " frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="46%" id="d97281e674">初始化参数</th>
                                    <th align="left" valign="bottom" width="54%" id="d97281e677">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d97281e682" headers="d97281e674 "><code class="codeph">CURSOR_INVALIDATION</code></td>
                                    <td align="left" valign="top" width="54%" headers="d97281e682 d97281e677 ">为DDL语句提供默认游标失效级别。
                                       <p><code class="codeph">IMMEDIATE</code>为DDL设置与<span>Oracle Database 12c</span>第2版（12.2）之前的版本相同的游标失效行为。这是默认值。
                                       </p>
                                       <p><code class="codeph">DEFERRED</code>允许应用程序利用DDL的减少的游标失效而不进行任何应用程序更改。延迟失效减少了游标失效的数量，并随着时间推移重新编译工作负载。出于这个原因，游标可能会以次优计划运行，直到重新编译，并可能导致较小的执行时间开销。
                                       </p>
                                       <p>您可以在<code class="codeph">SYSTEM</code>或<code class="codeph">SESSION</code>级别设置此参数。请参阅<span class="q">“ <a href="improving-rwp-cursor-sharing.html#GUID-E04CF45D-CC70-4122-9BAC-EAB5B4D0E17A" title="当优化程序解析不是DDL的新SQL语句时，数据库会分配新的共享SQL区域。所需的内存量取决于语句的复杂性。">关于共享游标的生命周期</a> ”</span> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d97281e714" headers="d97281e674 ">
                                       <p><code class="codeph">CURSOR_SHARING</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d97281e714 d97281e677 ">
                                       <p>将SQL语句中的文字值转换为绑定变量。转换值可以改进游标共享，并且可以影响SQL语句的执行计划。优化器根据绑定变量的存在而不是实际的文字值生成执行计划。</p>
                                       <p>设置为<code class="codeph">FORCE</code>以在共享现有游标时或在光标计划不是最佳时启用新游标的创建。设置为<code class="codeph">EXACT</code>以仅允许具有相同文本的语句共享相同的游标。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d97281e730" headers="d97281e674 ">
                                       <p><code class="codeph">DB_FILE_MULTIBLOCK_READ_COUNT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d97281e730 d97281e677 ">
                                       <p>指定在全表扫描或索引快速完全扫描期间在单个I / O中读取的块数。优化程序使用此参数的值来计算全表扫描和索引快速完整扫描的成本。值越大，全表扫描的成本越低，这可能导致优化器在索引扫描上选择全表扫描。</p>
                                       <p>此参数的默认值对应于数据库可以有效执行的最大I / O大小。此值取决于平台，对于大多数平台而言为1 MB。因为参数以块表示，所以它被设置为等于可以有效执行的最大I / O大小的值除以标准块大小。如果会话数非常大，则多块读取计数值减小，以避免缓冲区高速缓存被过多的表扫描缓冲区溢出。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d97281e740" headers="d97281e674 ">
                                       <p><code class="codeph">OPTIMIZER_ADAPTIVE_PLANS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d97281e740 d97281e677 ">
                                       <p>控制适应性计划。适应性计划有其他选择。优化程序根据查询执行时收集的统计信息在运行时决定计划。</p>
                                       <p>默认情况下，此参数为<code class="codeph">true</code> ，表示启用了自适应计划。将此参数设置为<code class="codeph">false</code>会禁用以下功能：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>嵌套循环和散列连接选择</p>
                                          </li>
                                          <li>
                                             <p>星变换位图修剪</p>
                                          </li>
                                          <li>
                                             <p>自适应并行分配方法</p>
                                          </li>
                                       </ul>
                                       <p>请参阅<span class="q">“ <a href="query-optimizer-concepts.html#GUID-6E0BFF94-D8EF-45B0-9667-0DCDE58C64B3" title="自适应查询计划包含多个预定子计划和优化器统计收集器。根据执行期间收集的统计信息，动态计划协调员在运行时选择最佳计划。">关于自适应查询计划</a> ”</span> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d97281e775" headers="d97281e674 ">
                                       <p><code class="codeph">OPTIMIZER_ADAPTIVE_REPORTING_ONLY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d97281e775 d97281e677 ">
                                       <p>控制自动重新优化和自适应计划的报告模式（请参阅<span class="q">“ <a href="query-optimizer-concepts.html#GUID-5A1EB094-1A9E-4B69-9BE5-39BDA2B3253C" title="自适应查询计划使优化器能够在执行期间为语句做出计划决策。">自适应查询计划</a> ”</span> ）。默认情况下，报告模式关闭（ <code class="codeph">false</code> ），这意味着启用了自适应优化。
                                       </p>
                                       <p>如果设置为<code class="codeph">true</code> ，则自适应优化将以仅报告模式运行。在这种情况下，数据库收集自适应优化所需的信息，但不采取任何措施来更改计划。例如，自适应计划始终选择默认计划，但如果参数设置为<code class="codeph">false</code> ，则数据库会收集有关数据库将使用的计划的信息。您可以使用<code class="codeph">DBMS_XPLAN.DISPLAY_CURSOR</code>查看报告。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d97281e807" headers="d97281e674 ">
                                       <p><code class="codeph">OPTIMIZER_ADAPTIVE_STATISTICS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d97281e807 d97281e677 ">
                                       <p>控制自适应统计。当查询谓词过于复杂而不能单独依赖基表统计信息时，优化程序可以使用自适应统计信息。</p>
                                       <p>默认情况下， <code class="codeph">OPTIMIZER_ADAPTIVE_STATISTICS</code>为<code class="codeph">false</code> ，表示禁用了以下功能：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>SQL计划指令</p>
                                          </li>
                                          <li>
                                             <p>统计反馈</p>
                                          </li>
                                          <li>
                                             <p>自适应动态采样</p>
                                          </li>
                                       </ul>
                                       <p>请参见<span class="q">“ <a href="query-optimizer-concepts.html#GUID-298EDC61-405A-4E25-AEF6-C795E32AAC93" title="当查询谓词过于复杂而不能单独依赖基表统计信息时，优化程序可以使用自适应统计信息。默认情况下，禁用自适应统计信息（OPTIMIZER_ADAPTIVE_STATISTICS为false）。">自适应统计</a> ”</span> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d97281e851" headers="d97281e674 ">
                                       <p><code class="codeph">OPTIMIZER_MODE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d97281e851 d97281e677 ">
                                       <p>在数据库实例启动时设置优化程序模式。可能的值为<code class="codeph">ALL_ROWS</code> ， <code class="codeph">FIRST_ROWS_</code> <span class="italic"><code class="codeph">n</code></span>和<code class="codeph">FIRST_ROWS</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d97281e871" headers="d97281e674 ">
                                       <p><code class="codeph">optimizer_index_caching的</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d97281e871 d97281e677 ">
                                       <p>使用嵌套循环控制索引探针的成本分析。值<code class="codeph">0</code>到<code class="codeph">100</code>的范围表示缓冲区高速缓存中索引块的百分比，它修改了有关嵌套循环和IN列表迭代器的索引高速缓存的优化程序假设。值<code class="codeph">100</code>表示可能在缓冲区高速缓存中找到100％的索引块，因此优化器会相应地调整索引探测或嵌套循环的开销。设置此参数时请小心，因为执行计划可能会更改以支持索引缓存。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d97281e888" headers="d97281e674 ">
                                       <p><code class="codeph">OPTIMIZER_INDEX_COST_ADJ</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d97281e888 d97281e677 ">
                                       <p>调整索引探测的成本。值的范围是<code class="codeph">1</code>到<code class="codeph">10000</code> 。默认值为<code class="codeph">100</code> ，这意味着优化程序根据常规成本模型将索引评估为访问路径。值<code class="codeph">10</code>表示索引访问路径的开销是索引访问路径的正常开销的十分之一。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d97281e908" headers="d97281e674 ">
                                       <p><code class="codeph">OPTIMIZER_INMEMORY_AWARE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d97281e908 d97281e677 ">
                                       <p>此参数启用（ <code class="codeph">TRUE</code> ）或禁用（ <code class="codeph">FALSE</code> ）所有Oracle数据库内存（Database In-Memory）优化程序功能，包括IM列存储的成本模型，表扩展，Bloom过滤器等。将参数设置为<code class="codeph">FALSE</code>会导致优化器在优化SQL语句期间忽略表的<code class="codeph">INMEMORY</code>属性。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d97281e928" headers="d97281e674 ">
                                       <p><code class="codeph">OPTIMIZER_USE_INVISIBLE_INDEXES</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d97281e928 d97281e677 ">
                                       <p>启用或禁用不可见索引的使用。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d97281e937" headers="d97281e674 ">
                                       <p><code class="codeph">QUERY_REWRITE_ENABLED</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d97281e937 d97281e677 ">
                                       <p>启用或禁用优化程序的查询重写功能。</p>
                                       <p><code class="codeph">TRUE</code> （默认值）使优化器能够利用物化视图来提高性能。<code class="codeph">FALSE</code>禁用优化程序的查询重写功能，并指示优化程序不使用实例化视图重写查询，即使未优化查询的估计查询成本较低也是如此。<code class="codeph">FORCE</code>启用优化程序的查询重写功能，并指示优化程序使用实例化视图重写查询，即使未优化查询的估计查询成本较低时也是如此。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d97281e955" headers="d97281e674 ">
                                       <p><code class="codeph">QUERY_REWRITE_INTEGRITY</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d97281e955 d97281e677 ">
                                       <p>确定强制执行查询重写的程度。</p>
                                       <p>默认情况下，完整性级别设置为<code class="codeph">ENFORCED</code> 。在此模式下，必须验证所有约束。数据库不使用依赖于未强制约束的查询重写转换。因此，如果您使用<code class="codeph">ENABLE NOVALIDATE RELY</code> ，某些类型的查询重写可能不起作用。
                                       </p>
                                       <p>要在约束处于<code class="codeph">NOVALIDATE</code>模式时启用查询重写，完整性级别必须为<code class="codeph">TRUSTED</code>或<code class="codeph">STALE_TOLERATED</code> 。在<code class="codeph">TRUSTED</code>模式下，优化器信任在维度和<code class="codeph">RELY</code>约束中声明的关系是正确的。在<code class="codeph">STALE_TOLERATED</code>模式下，优化程序使用有效但具有过时数据的<code class="codeph">STALE_TOLERATED</code>化视图以及包含新数据的视图。此模式提供最大重写功能，但会产生产生不准确结果的风险。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d97281e992" headers="d97281e674 ">
                                       <p><code class="codeph">RESULT_CACHE_MODE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d97281e992 d97281e677 ">
                                       <p>控制数据库是针对所有查询使用SQL查询结果缓存，还是仅针对使用结果缓存提示进行批注的查询。设置为<code class="codeph">MANUAL</code> （默认值）时，必须使用<code class="codeph">RESULT_CACHE</code>提示指定将特定结果存储在缓存中。设置为<code class="codeph">FORCE</code> ，数据库将所有结果存储在缓存中。
                                       </p>
                                       <p>设置此参数时，请考虑结果缓存如何处理PL / SQL函数。数据库使用跟踪PL / SQL函数的数据依赖性的相同机制使结果缓存中的查询结果无效，但是否则允许缓存包含PL / SQL函数的查询。由于PL / SQL函数结果缓存失效不会跟踪所有类型的依赖项（例如序列， <code class="codeph">SYSDATE</code> ， <code class="codeph">SYS_CONTEXT</code>和包变量），因此在调用此类函数的查询中不加区分地使用查询结果缓存可能会导致结果发生更改，是，不正确的结果。因此，在选择启用结果缓存时，请考虑正确性和性能，尤其是在将<code class="codeph">RESULT_CACHE_MODE</code>设置为<code class="codeph">FORCE</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d97281e1023" headers="d97281e674 ">
                                       <p><code class="codeph">RESULT_CACHE_MAX_SIZE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d97281e1023 d97281e677 ">
                                       <p>更改分配给结果缓存的内存。如果将此参数设置为<code class="codeph">0</code> ，则禁用结果缓存。此参数的值四舍五入为32 KB的最大倍数，该倍数不大于指定值。如果舍入值为<code class="codeph">0</code> ，则禁用该功能。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d97281e1037" headers="d97281e674 ">
                                       <p><code class="codeph">RESULT_CACHE_MAX_RESULT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d97281e1037 d97281e677 ">
                                       <p>指定任何单个结果可以使用的最大高速缓存内存量。默认值为5％，但您可以指定介于<code class="codeph">1</code>和<code class="codeph">100</code>之间的任何百分比值。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d97281e1051" headers="d97281e674 ">
                                       <p><code class="codeph">RESULT_CACHE_REMOTE_EXPIRATION</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d97281e1051 d97281e677 ">
                                       <p>指定依赖于远程数据库对象的结果保持有效的分钟数。默认值为<code class="codeph">0</code> ，这意味着数据库不应使用远程对象缓存结果。将此参数设置为非零值可能会产生过时的答案，例如远程数据库是否修改了结果中引用的表。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="46%" id="d97281e1062" headers="d97281e674 ">
                                       <p><code class="codeph">STAR_TRANSFORMATION_ENABLED</code></p>
                                    </td>
                                    <td align="left" valign="top" width="54%" headers="d97281e1062 d97281e677 ">
                                       <p>允许优化器为星型查询花费星形转换（如果为<code class="codeph">true</code> ）。星形转换组合了各种事实表列上的位图索引。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-C1C85DEA-3583-40FE-B5BB-6AC8F76FFE34__GUID-BFFC3C67-0C50-4725-BA1C-23BE1A00E944">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关上述初始化参数的完整信息，请<a href="../refrn/initialization-parameters.html#REFRN001" target="_blank"><span><cite>参见Oracle数据库参考</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="../tgdba/tuning-result-cache.html#TGDBA616" target="_blank"><span><cite>Oracle数据库性能调优指南</cite></span></a> ，了解如何调<a href="../tgdba/tuning-result-cache.html#TGDBA616" target="_blank"><span><cite>优</cite></span></a>查询结果缓存</p>
                           </li>
                           <li>
                              <p><a href="../dwhsg/data-warehouse-optimizations-techniques.html#DWHSG9070" target="_blank"><span><cite>Oracle数据库数据仓库指南</cite></span></a></p>了解有关星形转换和查询重写的更多信息</li>
                           <li>
                              <p><a href="../inmem/intro-to-in-memory-column-store.html#GUID-BFA53515-7643-41E5-A296-654AB4A9F9E7" target="_blank"><span><cite>Oracle Database In-Memory指南</cite></span></a>了解有关Database In-Memory功能的更多信息</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="influencing-the-optimizer.html#GUID-125341C0-DBA3-4FAB-B4DB-8857CC36015C" title="本章介绍哪些初始化参数会影响优化，以及如何设置它们。">使用初始化参数影响优化程序</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL254"></a><a id="TGSQL253"></a><div class="props_rev_3"><a id="GUID-325A3D6A-47B8-4AAF-8BB0-4037553D02FE" name="GUID-325A3D6A-47B8-4AAF-8BB0-4037553D02FE"></a><h4 id="TGSQL-GUID-325A3D6A-47B8-4AAF-8BB0-4037553D02FE" class="sect4"><span class="enumeration_section">19.2.2</span>启用优化器功能</h4>
                  <div>
                     <p><code class="codeph">OPTIMIZER_FEATURES_ENABLE</code>初始化参数（或提示）控制一组与优化器相关的功能，具体取决于数据库版本。
                     </p>
                     <div class="section">
                        <p>该参数接受与版本号对应的有效字符串值列表之一，例如<code class="codeph">11.2.0.2</code>或<code class="codeph">12.2.0.1</code> 。您可以使用此参数在数据库升级后保留优化程序的旧行为。例如，如果将<span>Oracle Database 12c</span>第1版（12.1.0.2）升级到<span>Oracle Database 12c</span>第2版（12.2.0.1），则<code class="codeph">OPTIMIZER_FEATURES_ENABLE</code>参数的默认值将从<code class="codeph">12.1.0.2</code>更改为<code class="codeph">12.2.0.1</code> 。
                        </p>
                        <p>为了向后兼容，您可能不希望由于新版本中的新优化程序功能而更改执行计划。在这种情况下，您可以将<code class="codeph">OPTIMIZER_FEATURES_ENABLE</code>设置为早期版本。如果升级到新版本，如果<span class="italic">要</span>启用新版本中的功能，那么你<span class="italic">就</span>需要明确设置<code class="codeph">OPTIMIZER_FEATURES_ENABLE</code>初始化参数。
                        </p>
                        <div class="infoboxnote" id="GUID-325A3D6A-47B8-4AAF-8BB0-4037553D02FE__GUID-5D64CCA8-8994-4E55-B850-D675F102F70A">
                           <p class="notep1">警告：</p>
                           <p>Oracle建议不要将<code class="codeph">OPTIMIZER_FEATURES_ENABLE</code>初始化参数显式设置为早期版本。为避免执行计划更改可能导致的SQL性能回归，请考虑使用SQL计划管理。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-325A3D6A-47B8-4AAF-8BB0-4037553D02FE__GUID-41B9E3C7-A9C6-40CC-9606-F859FF4F761F">假设</p>
                        <p>本教程假设以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您最近将数据库从<span>Oracle Database 12c</span>第1版（12 1.0.2）升级到<span>Oracle Database 12c</span>第2版（12.2.0.1）。
                              </p>
                           </li>
                           <li>
                              <p>您希望保留早期版本中的优化程序行为。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-325A3D6A-47B8-4AAF-8BB0-4037553D02FE__GUID-3C758CEA-2108-4241-9E73-8807D3E8C48D">要为特定版本启用查询优化器功能：</p>
                        <ol>
                           <li>
                              <p>使用适当的权限登录数据库，然后查询当前的优化程序功能设置。</p>
                              <p>例如，运行以下SQL * Plus命令：</p><pre class="pre codeblock"><code>SQL&gt; SHOW PARAMETER optimizer_features_enable NAME TYPE VALUE ------------------------------------ ------ ----- -------- optimizer_features_enable string 12.2.0.1</code></pre></li>
                           <li>
                              <p>在实例或会话级别设置优化程序功能设置。</p>
                              <p>例如，运行以下SQL语句将优化器版本设置为<code class="codeph">12.1.0.2</code> ：</p><pre class="pre codeblock"><code>SQL&gt; ALTER SYSTEM SET OPTIMIZER_FEATURES_ENABLE = '12 .1.0.2';</code></pre><p>上述语句将恢复<span>Oracle Database 12c</span>第1版（12.1.0.2）中存在的优化程序功能。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-325A3D6A-47B8-4AAF-8BB0-4037553D02FE__GUID-1C8FF1FB-9B9E-4791-8E78-09AF2D7BF7E3">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="managing-sql-plan-baselines.html#GUID-7024369A-F98D-48E4-921C-C899485C954F" title="本章介绍使用DBMS_SPM程序包与SQL计划管理相关的概念和任务。">管理SQL计划基准</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=REFRN10141" target="_blank"><span><cite>Oracle数据库参考</cite></span></a> ，了解在将<code class="codeph">OPTIMIZER_FEATURES_ENABLE</code>设置为不同的版本值时启用的优化程序功能</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="influencing-the-optimizer.html#GUID-125341C0-DBA3-4FAB-B4DB-8857CC36015C" title="本章介绍哪些初始化参数会影响优化，以及如何设置它们。">使用初始化参数影响优化程序</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL256"></a><a id="TGSQL255"></a><div class="props_rev_3"><a id="GUID-2D3EEFD3-C4C6-4D2F-B24A-8DC0C1E1CBA1" name="GUID-2D3EEFD3-C4C6-4D2F-B24A-8DC0C1E1CBA1"></a><h4 id="TGSQL-GUID-2D3EEFD3-C4C6-4D2F-B24A-8DC0C1E1CBA1" class="sect4"><span class="enumeration_section">19.2.3</span>选择优化程序目标</h4>
                  <div>
                     <p><strong class="term">优化器目标</strong>是<strong class="term">优化器</strong>对资源使用的优先级。
                     </p>
                     <div class="section">
                        <p>使用<code class="codeph">OPTIMIZER_MODE</code>初始化参数，您可以设置以下优化程序目标：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>最佳<a href="glossary.html#GUID-BFB3B290-B7BF-4E9C-B2EB-F318EAC34DAF"><span class="xrefglossterm">吞吐量</span></a> （默认）</p>
                              <p>将<code class="codeph">OPTIMIZER_MODE</code>值设置为<code class="codeph">ALL_ROWS</code> ，数据库使用最少的资源来处理语句访问的所有行。
                              </p>
                              <p>对于Oracle Reports等批处理应用程序，请优化以获得最佳吞吐量。通常，吞吐量在批处理应用程序中更为重要，因为用户只关心应用程序完成所需的时间。响应时间不太重要，因为用户在应用程序运行时不会检查单个语句的结果。</p>
                           </li>
                           <li>
                              <p>最佳<a href="glossary.html#GUID-371FCA7E-6CDB-4D4C-9BD6-90944AD21E3A"><span class="xrefglossterm">响应时间</span></a></p>
                              <p>当您设置<code class="codeph">OPTIMIZER_MODE</code>值<code class="codeph">FIRST_ROWS_</code> <span class="italic"><code class="codeph">n</code></span> ，该数据库的最好响应时间的目标返回第<span class="italic">n</span>行，其中<span class="italic">n</span>为优化<code class="codeph">1</code> ， <code class="codeph">10</code> ， <code class="codeph">100</code> ，或<code class="codeph">1000</code> 。
                              </p>
                              <p>对于Oracle Forms或SQL * Plus中的交互式应用程序，请优化响应时间。通常，响应时间很重要，因为交互式用户正在等待查看语句访问的第一行或多行。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2D3EEFD3-C4C6-4D2F-B24A-8DC0C1E1CBA1__GUID-12C0D5FB-ED95-48E3-A5E4-7408AF42478A">假设</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>本教程假设以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>主应用程序是交互式的，因此您需要为数据库实例设置优化程序目标，以最大限度地缩短响应时间。</p>
                           </li>
                           <li>
                              <p>仅对于当前会话，您希望运行报告并针对吞吐量进行优化。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2D3EEFD3-C4C6-4D2F-B24A-8DC0C1E1CBA1__GUID-384C8691-EBE3-45DE-AC16-21DA7772C88C">要为特定版本启用查询优化器功能：</p>
                        <ol>
                           <li>
                              <p>使用适当的权限将SQL * Plus连接到数据库，然后查询当前的优化程序模式。</p>
                              <p>例如，运行以下SQL * Plus命令：</p><pre class="pre codeblock"><code>dba1 @ PROD&gt; SHOW PARAMETER OPTIMIZER_MODE NAME TYPE VALUE ------------------------------------ ---- ------- -------- optimizer_mode字符串ALL_ROWS</code></pre></li>
                           <li>
                              <p>在实例级别，优化响应时间。</p>
                              <p>例如，运行以下SQL语句以将系统配置为尽快检索前10行：</p><pre class="pre codeblock"><code>SQL&gt; ALTER SYSTEM SET OPTIMIZER_MODE ='FIRST_ROWS_10';</code></pre></li>
                           <li>
                              <p>仅在会话级别，在运行报告之前优化吞吐量。</p>
                              <p>例如，运行以下SQL语句以仅配置此会话以优化吞吐量：</p><pre class="pre codeblock"><code>SQL&gt; ALTER SESSION SET OPTIMIZER_MODE ='ALL_ROWS';</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-2D3EEFD3-C4C6-4D2F-B24A-8DC0C1E1CBA1__GUID-EDCA5927-0CF2-4345-97E5-CD2BF40AD41C">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../refrn/OPTIMIZER_FEATURES_ENABLE.html#REFRN10141" target="_blank"><span><cite>Oracle数据库参考</cite></span></a> <span class="italic"> </span>了解<code class="codeph">OPTIMIZER_MODE</code>初始化参数</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="influencing-the-optimizer.html#GUID-125341C0-DBA3-4FAB-B4DB-8857CC36015C" title="本章介绍哪些初始化参数会影响优化，以及如何设置它们。">使用初始化参数影响优化程序</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL258"></a><a id="TGSQL257"></a><div class="props_rev_3"><a id="GUID-DAFB7D07-E8B3-4219-A09D-214BD943AFF9" name="GUID-DAFB7D07-E8B3-4219-A09D-214BD943AFF9"></a><h4 id="TGSQL-GUID-DAFB7D07-E8B3-4219-A09D-214BD943AFF9" class="sect4"><span class="enumeration_section">19.2.4</span>控制自适应优化</h4>
                  <div>
                     <p>在Oracle数据库中， <strong class="term">自适应查询优化</strong>是优化程序根据运行时收集的统计信息调整执行计划的过程。
                     </p>
                     <div class="section"></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>设置以下初始化参数时，将启用自适应计划：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">OPTIMIZER_ADAPTIVE_PLANS</code>为<code class="codeph">TRUE</code> （默认）</p>
                           </li>
                           <li>
                              <p><code class="codeph">OPTIMIZER_FEATURES_ENABLE</code>为<code class="codeph">12.1.0.1</code>或更高版本</p>
                           </li>
                           <li>
                              <p><code class="codeph">OPTIMIZER_ADAPTIVE_REPORTING_ONLY</code>为<code class="codeph">FALSE</code> （默认值）</p>
                           </li>
                        </ul>
                        <p>如果<code class="codeph">OPTIMIZER_ADAPTIVE_REPORTING_ONLY</code>设置为<code class="codeph">true</code> ，则自适应优化将以仅报告模式运行。在这种情况下，数据库收集自适应优化所需的信息，但不会更改计划。自适应计划始终选择默认计划，但数据库会收集有关执行的信息， <span class="italic">就像</span>参数设置为<code class="codeph">false</code> 。
                        </p>
                        <p>设置以下初始化参数时，将启用自适应统计信息：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">OPTIMIZER_ADAPTIVE_STATISTICS</code>为<code class="codeph">TRUE</code> （默认值为<code class="codeph">FALSE</code> ）</p>
                           </li>
                           <li>
                              <p><code class="codeph">OPTIMIZER_FEATURES_ENABLE</code>为<code class="codeph">12.1.0.1</code>或更高版本</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DAFB7D07-E8B3-4219-A09D-214BD943AFF9__GUID-536E1AFC-98B6-4107-91B9-B88F15142C07">假设</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>本教程假设以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">OPTIMIZER_FEATURES_ENABLE</code>初始化参数设置为<code class="codeph">12.1.0.1</code>或更高版本。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">OPTIMIZER_ADAPTIVE_REPORTING_ONLY</code>初始化参数设置为<code class="codeph">false</code> （默认值）。
                              </p>
                           </li>
                           <li>
                              <p>您希望禁用自适应计划以进行测试，以便数据库仅生成报告。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DAFB7D07-E8B3-4219-A09D-214BD943AFF9__GUID-B12B8FC7-ADEF-49EF-BAB2-49F578CFF3F9">要禁用自适应计划：</p>
                        <ol>
                           <li>
                              <p>将SQL * Plus作为<code class="codeph">SYSTEM</code>连接到数据库，然后查询当前设置。
                              </p>
                              <p>例如，运行以下SQL * Plus命令：</p><pre class="pre codeblock"><code>SHOW PARAMETER OPTIMIZER_ADAPTIVE_REPORTING_ONLY NAME TYPE VALUE ------------------------------------ -------- --- ----- optimizer_adaptive_reporting_only boolean FALSE</code></pre></li>
                           <li>
                              <p>在会话级别，将<code class="codeph">OPTIMIZER_ADAPTIVE_REPORTING_ONLY</code>初始化参数设置为<code class="codeph">true</code> 。
                              </p>
                              <p>例如，在SQL * Plus中运行以下SQL语句：</p><pre class="pre codeblock"><code>ALTER SESSION SET OPTIMIZER_ADAPTIVE_REPORTING_ONLY = true;</code></pre></li>
                           <li>
                              <p>运行查询。</p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">+REPORT</code>参数运行<code class="codeph">DBMS_XPLAN.DISPLAY_CURSOR</code> 。
                              </p>
                              <p>设置<code class="codeph">+REPORT</code>参数后，如果启用了自动重新优化，则报告将显示优化程序将选择的计划。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-DAFB7D07-E8B3-4219-A09D-214BD943AFF9__GUID-FFCA53E0-3BDF-43F7-A4C3-2F26E27CF5A1">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="query-optimizer-concepts.html#GUID-F368C89A-5CAE-432C-845C-CC38C7F93A03" title="在Oracle数据库中，自适应查询优化使优化器能够对执行计划进行运行时调整，并发现可以带来更好统计信息的其他信息。">关于自适应查询优化</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../refrn/OPTIMIZER_ADAPTIVE_REPORTING_ONLY.html#REFRN10327" target="_blank"><span class="italic">Oracle数据库参考</span></a> <span class="italic"> </span>了解<code class="codeph">OPTIMIZER_ADAPTIVE_REPORTING_ONLY</code>初始化参数</p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_XPLAN.html#ARPLS70136" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考，</span></a>以了解<code class="codeph">DBMS_XPLAN.DISPLAY_CURSOR</code>函数的<code class="codeph">+REPORT</code>参数</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="influencing-the-optimizer.html#GUID-125341C0-DBA3-4FAB-B4DB-8857CC36015C" title="本章介绍哪些初始化参数会影响优化，以及如何设置它们。">使用初始化参数影响优化程序</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TGSQL259"></a><div class="props_rev_3"><a id="GUID-C558F7CF-446E-4078-B045-0B3BB026CB3C" name="GUID-C558F7CF-446E-4078-B045-0B3BB026CB3C"></a><h3 id="TGSQL-GUID-C558F7CF-446E-4078-B045-0B3BB026CB3C" class="sect3"><span class="enumeration_section">19.3</span>使用提示影响优化器</h3>
               <div>
                  <p>优化程序提示是SQL语句中的特殊注释，它将指令传递给优化程序。</p>
                  <p>除非某些条件阻止，否则优化程序使用提示为语句选择执行计划。</p>
                  <p>本节包含以下主题：</p>
                  <div class="infoboxnote" id="GUID-C558F7CF-446E-4078-B045-0B3BB026CB3C__GUID-C301E0C5-DC7D-439B-8DBB-FF69F4F5775D">
                     <p class="notep1">注意：</p>
                     <p><a href="../sqlrf/Comments.html#SQLRF00219" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a>包含所有SQL提示的完整参考</p>
                  </div>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="influencing-the-optimizer.html#GUID-B198573A-C64B-4071-9CD8-738355A20DD7">关于Optimizer提示</a><br>提示嵌入在SQL注释中。
                     </li>
                     <li class="ulchildlink"><a href="influencing-the-optimizer.html#GUID-5976D09A-257A-49F3-94E0-247B1247270A">加入订单提示的指南</a><br>在某些情况下，您可以在SQL语句中指定连接顺序提示，以便它不会访问对结果没有影响的行。
                     </li>
                     <li class="ulchildlink"><a href="influencing-the-optimizer.html#GUID-F9F20FDC-8AC9-429C-A4F9-3FF747077182">报告提示</a><br>解释的计划包括一个报告，显示在计划生成期间使用了哪些提示。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="influencing-the-optimizer.html#GUID-8758EF88-1CC6-41BD-8581-246702414D1D" title="优化程序默认值适用于大多数操作，但不是全部。">影响优化程序</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL261"></a><a id="TGSQL260"></a><div class="props_rev_3"><a id="GUID-B198573A-C64B-4071-9CD8-738355A20DD7" name="GUID-B198573A-C64B-4071-9CD8-738355A20DD7"></a><h4 id="TGSQL-GUID-B198573A-C64B-4071-9CD8-738355A20DD7" class="sect4"><span class="enumeration_section">19.3.1</span>关于优化程序提示</h4>
                  <div>
                     <p>提示嵌入在SQL注释中。</p>
                     <p>提示注释必须紧跟在SQL语句块的第一个关键字之后。您可以使用任何一种注释：斜线（ <code class="codeph">/*</code> ）或破折号（ <code class="codeph">--</code> ）。加号（ <code class="codeph">+</code> ）提示分隔符必须紧跟注释分隔符，加号前不允许有空格，如下面的片段所示：</p><pre class="pre codeblock"><code>SELECT / * + <span class="italic">hint_text</span> * / ...
</code></pre><p>加号后面的空格是可选的。语句块只能包含一个包含提示的注释，但它可以包含许多以空格分隔的提示。按至少一个空格分隔多个提示，如下面的语句所示：</p><pre class="pre codeblock"><code>SELECT / * + FULL（hr_emp）CACHE（hr_emp）* / last_name FROM employees hr_emp;</code></pre><p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="influencing-the-optimizer.html#GUID-330BA3B3-891C-4C86-84A1-D52DAF7A9E2B">提示的目的</a><br>提示使您可以通常由优化程序做出决策。
                        </li>
                        <li class="ulchildlink"><a href="influencing-the-optimizer.html#GUID-2C09E9BF-A05B-4F02-8BB6-B858F599CAEA">提示类型</a><br>您可以使用表，查询块和语句的提示。
                        </li>
                        <li class="ulchildlink"><a href="influencing-the-optimizer.html#GUID-688C8907-696A-4051-819C-18AA9B48219C">提示范围</a><br>在语句块中指定提示时，提示将应用于语句块中的相应查询块，表或整个语句。提示会覆盖任何实例级或会话级参数。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="influencing-the-optimizer.html#GUID-C558F7CF-446E-4078-B045-0B3BB026CB3C" title="优化程序提示是SQL语句中的特殊注释，它将指令传递给优化程序。">使用提示影响优化程序</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-330BA3B3-891C-4C86-84A1-D52DAF7A9E2B" name="GUID-330BA3B3-891C-4C86-84A1-D52DAF7A9E2B"></a><h5 id="TGSQL-GUID-330BA3B3-891C-4C86-84A1-D52DAF7A9E2B" class="sect5"><span class="enumeration_section">19.3.1.1</span>提示的目的</h5>
                     <div>
                        <p>提示使您可以通常由优化程序做出决策。</p>
                        <p>您可以使用提示来影响优化程序模式，查询转换，访问路径，连接顺序和连接方法。在测试环境中，提示对于测试特定访问路径的性能很有用。例如，您可能知道索引对某些查询更具选择性，从而产生更好的计划。下图显示了如何使用提示告诉优化器为特定语句使用特定索引。</p>
                        <div class="figure" id="GUID-330BA3B3-891C-4C86-84A1-D52DAF7A9E2B__BBAFCGBD">
                           <p class="titleinfigure">图19-2优化器提示</p><img src="img/tgsql_vm_013.png" alt="下面是图19-2的描述" title="下面是图19-2的描述" longdesc="img_text/tgsql_vm_013.html"><br><a href="img_text/tgsql_vm_013.html">“图19-2优化器提示”的说明</a></div>
                        <!-- class="figure" -->
                        <p>提示的缺点是管理，检查和控制的额外代码。Oracle7中引入了提示，如果优化程序生成次优计划，则用户几乎没有追索权。由于数据库和主机环境中的更改可能会使提示过时或产生负面后果，因此最好使用提示进行测试，但使用其他技术来管理执行计划。</p>
                        <p>Oracle提供了多种工具，包括SQL Tuning Advisor，SQL计划管理和SQL性能分析器，以解决优化器无法解决的性能问题。Oracle强烈建议您使用这些工具而不是提示，因为它们在数据和数据库环境发生变化时提供了新的解决方案。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="influencing-the-optimizer.html#GUID-B198573A-C64B-4071-9CD8-738355A20DD7" title="提示嵌入在SQL注释中。">关于优化程序提示</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL262"></a><div class="props_rev_3"><a id="GUID-2C09E9BF-A05B-4F02-8BB6-B858F599CAEA" name="GUID-2C09E9BF-A05B-4F02-8BB6-B858F599CAEA"></a><h5 id="TGSQL-GUID-2C09E9BF-A05B-4F02-8BB6-B858F599CAEA" class="sect5"><span class="enumeration_section">19.3.1.2</span>提示类型</h5>
                     <div>
                        <p>您可以使用表，查询块和语句的提示。</p>
                        <p>提示分为以下几种：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>单表</p>
                              <p>在一个表或视图上指定单表提示。<a href="../sqlrf/Comments.html#SQLRF50405" target="_blank"><code class="codeph">INDEX</code></a>和<a href="../sqlrf/Comments.html#SQLRF50701" target="_blank"><code class="codeph">USE_NL</code></a>是单表提示的示例。以下语句使用单表提示：</p><pre class="pre codeblock"><code>SELECT <span class="bold">/ * + INDEX（employees emp_department_ix）* /</span> employee_id，department_id FROM employees WHERE department_id&gt; 50;</code></pre></li>
                           <li>
                              <p>多表</p>
                              <p>多重提示类似于单表提示，但提示可以指定多个表或视图。<a href="../sqlrf/Comments.html#SQLRF50705" target="_blank"><code class="codeph">LEADING</code></a>是多重提示的一个例子。以下语句使用多表提示：</p><pre class="pre codeblock"><code>SELECT <span class="bold">/ * + LEADING（ej）* /</span> * FROM employees e，departments d，job_history j WHERE e.department_id = d.department_id AND e.hire_date = j.start_date;</code></pre><div class="infoboxnote" id="GUID-2C09E9BF-A05B-4F02-8BB6-B858F599CAEA__GUID-AAF8FA92-886B-4484-984E-244B2DBAFA3F">
                                 <p class="notep1">注意：</p>
                                 <p><a href="../sqlrf/Comments.html#SQLRF50701" target="_blank"><code class="codeph">USE_NL(table1 table2)</code></a>不被视为多表提示，因为它是<code class="codeph">USE_NL(table1)</code>和<code class="codeph">USE_NL(table2)</code>的快捷方式。
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>查询块</p>
                              <p>查询块提示对单个查询块进行操作。<a href="../sqlrf/Comments.html#SQLRF50508" target="_blank"><code class="codeph">STAR_TRANSFORMATION</code></a>和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=SQLRF50905" target="_blank"><code class="codeph">UNNEST</code></a>是查询块提示的示例。以下语句使用查询块提示指定<code class="codeph">FULL</code>提示仅适用于引用<code class="codeph">employees</code>的查询块：</p><pre class="pre codeblock"><code>SELECT / * + INDEX（t1）FULL（@ sel $ 2 t1）* / COUNT（*）FROM jobs t1 WHERE t1.job_id IN（SELECT job_id FROM employees t1）;</code></pre></li>
                           <li>
                              <p>声明</p>
                              <p>语句提示适用于整个SQL语句。<a href="../sqlrf/Comments.html#SQLRF50301" target="_blank"><code class="codeph">ALL_ROWS</code></a>是语句提示的示例。以下语句使用语句提示：</p><pre class="pre codeblock"><code>SELECT <span class="bold">/ * + ALL_ROWS * /</span> * FROM sales;</code></pre></li>
                        </ul>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-2C09E9BF-A05B-4F02-8BB6-B858F599CAEA__GUID-4C540F3F-92A9-4992-9606-C4F8A70A7ECA">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../sqlrf/Comments.html#SQLRF51107" target="_blank"><span><cite>Oracle Database SQL语言参考，</cite></span></a>用于按功能类别提供的最常见提示。
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="influencing-the-optimizer.html#GUID-B198573A-C64B-4071-9CD8-738355A20DD7" title="提示嵌入在SQL注释中。">关于优化程序提示</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL264"></a><a id="TGSQL263"></a><div class="props_rev_3"><a id="GUID-688C8907-696A-4051-819C-18AA9B48219C" name="GUID-688C8907-696A-4051-819C-18AA9B48219C"></a><h5 id="TGSQL-GUID-688C8907-696A-4051-819C-18AA9B48219C" class="sect5"><span class="enumeration_section">19.3.1.3</span>提示范围</h5>
                     <div>
                        <p>在语句块中指定提示时，提示将应用于语句块中的相应查询块，表或整个语句。提示会覆盖任何实例级或会话级参数。</p>
                        <p><strong class="term">语句块</strong>是以下之一：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>一个简单的<code class="codeph">MERGE</code> ， <code class="codeph">SELECT</code> ， <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>或<code class="codeph">DELETE</code>语句</p>
                           </li>
                           <li>
                              <p>父语句或复杂语句的子查询</p>
                           </li>
                           <li>
                              <p>使用集合运算符（ <code class="codeph">UNION</code> ， <code class="codeph">MINUS</code> ， <code class="codeph">INTERSECT</code> ）的查询的一部分</p>
                           </li>
                        </ul>
                        <div class="example" id="GUID-688C8907-696A-4051-819C-18AA9B48219C__BBAHABHI">
                           <p class="titleinexample">例19-1使用Set运算符查询</p>
                           <p>以下查询包含两个组件查询和<code class="codeph">UNION</code>运算符：</p><pre class="pre codeblock"><code>SELECT / * + FIRST_ROWS（10）* / prod_id，time_id FROM 2010_sales UNION ALL SELECT / * + ALL_ROWS * / prod_id，time_id FROM current_year_sales;</code></pre><p>前面的语句有两个块，每个块用于每个组件查询。第一个组件查询中的提示仅适用于其优化，而不适用于第二个组件查询的优化。例如，在2015年的第一周，您查询当前年度和去年的销售额。您将<code class="codeph">FIRST_ROWS(10)</code>应用于去年（2014）销售的查询，并将<code class="codeph">ALL_ROWS</code>提示应用于今年（2015）销售的查询。
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-688C8907-696A-4051-819C-18AA9B48219C__GUID-C13CCCC8-35F7-408E-8A4D-34CC646B9F75">
                           <p class="notep1">也可以看看：</p>
                           <p>有关提示概述的<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=SQLRF00219" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="influencing-the-optimizer.html#GUID-B198573A-C64B-4071-9CD8-738355A20DD7" title="提示嵌入在SQL注释中。">关于优化程序提示</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL267"></a><div class="props_rev_3"><a id="GUID-5976D09A-257A-49F3-94E0-247B1247270A" name="GUID-5976D09A-257A-49F3-94E0-247B1247270A"></a><h4 id="TGSQL-GUID-5976D09A-257A-49F3-94E0-247B1247270A" class="sect4"><span class="enumeration_section">19.3.2</span>加入订单提示的指南</h4>
                  <div>
                     <p>在某些情况下，您可以在SQL语句中指定连接顺序提示，以便它不会访问对结果没有影响的行。</p>
                     <div class="section">
                        <p>连接中的<a href="glossary.html#GUID-8D98E7F2-8BAD-4AE2-8C72-DCD0733CB9CE"><span class="xrefglossterm">驱动表</span></a>是其他表连接的表。通常，驱动表包含<a href="glossary.html#GUID-73A2A2BA-68CB-4036-BB5C-3CBB5D799286"><span class="xrefglossterm">过滤条件</span></a> ，该<a href="glossary.html#GUID-73A2A2BA-68CB-4036-BB5C-3CBB5D799286"><span class="xrefglossterm">条件</span></a>消除了表中行的最高百分比。<strong class="term">连接顺序</strong>可能会对SQL语句的性能产生重大影响。
                        </p>
                        <p>请考虑以下准则：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>当索引更有效地检索请求的行时，避免全表扫描。</p>
                           </li>
                           <li>
                              <p>当您可以使用获取少量行的不同索引时，请避免使用从驱动表中获取许多行的索引。</p>
                           </li>
                           <li>
                              <p>选择连接顺序，以便稍后在连接顺序中将较少的行连接到表。</p>
                           </li>
                        </ul>
                        <p>以下示例显示如何有效地调整连接顺序：</p><pre class="pre codeblock"><code>SELECT * FROM taba a，tabb b，tabc c WHERE a.acol BETWEEN 100 AND 200 AND b.bcol BETWEEN 10000和20000 AND c.ccol BETWEEN 10000和20000 AND a.key1 = b.key1 AND a.key2 = c。 KEY2;</code></pre><ol>
                           <li>
                              <p>选择驾驶表和驾驶指数（如果有的话）。</p>
                              <p>前一个示例中的前三个条件中的每一个都是适用于单个表的过滤条件。最后两个条件是连接条件。</p>
                              <p>过滤条件主导驱动表和索引的选择。通常，驱动表包含消除最高行百分比的过滤条件。因为100到200的范围与<code class="codeph">acol</code>的范围相比较窄，但10000和20000的范围相对较大， <code class="codeph">taba</code>是驱动表，其他条件相同。
                              </p>
                              <p>对于嵌套循环连接，连接通过连接索引进行，连接索引是用于将该表连接到连接树中的早期表的主键或外键的索引。除驱动表外，很少使用非连接条件下的索引。因此，在选择<code class="codeph">taba</code>作为驱动表后，使用<code class="codeph">b.key1</code>和<code class="codeph">c.key2</code>上的索引分别驱动到<code class="codeph">tabb</code>和<code class="codeph">tabc</code> 。
                              </p>
                           </li>
                           <li>
                              <p>选择最佳的连接顺序，最早驾驶到最好的未使用的过滤器。</p>
                              <p>您可以通过首先使用最佳仍未使用的过滤器连接到表来减少以下连接的工作。因此，如果<code class="codeph">bcol BETWEEN</code>有更多的限制（拒绝行的比例更高），比<code class="codeph">ccol BETWEEN</code> ，那么最后加入变得更容易（用更少的行），如果<code class="codeph">tabb</code>之前加入<code class="codeph">tabc</code> 。
                              </p>
                           </li>
                           <li>
                              <p>您可以使用<code class="codeph">ORDERED</code>或<code class="codeph">STAR</code>提示强制连接顺序。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-5976D09A-257A-49F3-94E0-247B1247270A__GUID-0436C9CA-8AE2-42D9-B4BD-B9781A1AD566">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgsql&amp;id=REFRN10141" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解<code class="codeph">OPTIMIZER_MODE</code></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="influencing-the-optimizer.html#GUID-C558F7CF-446E-4078-B045-0B3BB026CB3C" title="优化程序提示是SQL语句中的特殊注释，它将指令传递给优化程序。">使用提示影响优化程序</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-F9F20FDC-8AC9-429C-A4F9-3FF747077182" name="GUID-F9F20FDC-8AC9-429C-A4F9-3FF747077182"></a><h4 id="TGSQL-GUID-F9F20FDC-8AC9-429C-A4F9-3FF747077182" class="sect4"><span class="enumeration_section">19.3.3</span>提示的报告</h4>
                  <div>
                     <p>解释的计划包括一个报告，显示在计划生成期间使用了哪些提示。</p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="influencing-the-optimizer.html#GUID-C18EA0A0-7792-4220-A1C1-3EC856A19BA7">提示使用情况报告的目的</a><br>在<span>Oracle Database 19c</span>之前的版本中，可能很难确定优化程序未使用提示的原因。提示使用情况报告解决了这个问题。
                        </li>
                        <li class="ulchildlink"><a href="influencing-the-optimizer.html#GUID-14EECC60-2E3F-4B6F-9949-F7D4003F1208">提示使用情况报告的用户界面</a><br>该报告包括所有优化程序提示的状态。还包括其他提示的子集，包括<code class="codeph">PARALLEL</code>和<code class="codeph">INMEMORY</code> 。
                        </li>
                        <li class="ulchildlink"><a href="influencing-the-optimizer.html#GUID-98F9788B-9162-4A12-9257-CC855A4136B3">报告提示用法：教程</a><br>您可以使用<code class="codeph">DBMS_XPLAN</code>显示功能报告提示使用情况。
                        </li>
                        <li class="ulchildlink"><a href="influencing-the-optimizer.html#GUID-1697E7CA-9DD0-4C0D-9BC9-E4E17334C0AA">提示使用情况报告：示例</a><br>这些示例显示了各种类型的提示使用报告。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="influencing-the-optimizer.html#GUID-C558F7CF-446E-4078-B045-0B3BB026CB3C" title="优化程序提示是SQL语句中的特殊注释，它将指令传递给优化程序。">使用提示影响优化程序</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL266"></a><a id="TGSQL265"></a><div class="props_rev_3"><a id="GUID-C18EA0A0-7792-4220-A1C1-3EC856A19BA7" name="GUID-C18EA0A0-7792-4220-A1C1-3EC856A19BA7"></a><h5 id="TGSQL-GUID-C18EA0A0-7792-4220-A1C1-3EC856A19BA7" class="sect5"><span class="enumeration_section">19.3.3.1</span>提示使用报告的目的</h5>
                     <div>
                        <p>在<span>Oracle Database 19c</span>之前的版本中，可能很难确定优化程序未使用提示的原因。提示使用情况报告解决了这个问题。
                        </p>
                        <div class="section">
                           <p>优化程序使用提示中编码的指令为语句选择执行计划，除非条件阻止优化程序使用提示。数据库不会为它忽略的提示发出错误消息。提示报告显示使用和忽略了哪些提示，并且通常解释了为什么忽略提示。忽略提示的最常见原因如下：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>语法错误</p>
                                 <p>提示可能包含拼写错误或无效参数。如果在同一提示块中出现多个提示，并且如果一个提示有语法错误，则优化程序会在提示之前使用错误表示所有提示，并忽略之后出现的提示。例如，在提示规范<code class="codeph">/*+ INDEX(t1) FULL(t2) MERG(v) USE_NL(t2) */</code> ， <code class="codeph">MERG(v)</code>具有语法错误。优化器<code class="codeph">MERG(v)</code> <code class="codeph">INDEX(t1)</code>和<code class="codeph">FULL(t2)</code> ，但忽略<code class="codeph">MERG(v)</code>和<code class="codeph">USE_NL(t2)</code> 。提示使用情况报告将<code class="codeph">MERG(v)</code>列为有错误，但未列出<code class="codeph">USE_NL(t2)</code>因为它未被解析。
                                 </p>
                              </li>
                              <li>
                                 <p>未解决的提示</p>
                                 <p>由于语法错误以外的原因，未解析的提示无效。例如，语句指定<code class="codeph">INDEX(employees emp_idx)</code> ，其中<code class="codeph">emp_idx</code>不是表<code class="codeph">employees</code>的有效索引名称。
                                 </p>
                              </li>
                              <li>
                                 <p>矛盾的提示</p>
                                 <p>即使正确指定了这些提示，数据库也会忽略冲突提示的组合。例如，语句指定<code class="codeph">FULL(employees) INDEX(employees)</code> ，但索引扫描和全表扫描是互斥的。在大多数情况下，优化程序会忽略两个冲突的提示。
                                 </p>
                              </li>
                              <li>
                                 <p>受转换影响的提示</p>
                                 <p>转换可以使一些提示无效。例如，语句指定<code class="codeph">PUSH_PRED(some_view) MERGE(some_view)</code> 。当<code class="codeph">some_view</code>合并到其包含的查询块时，优化器无法应用<code class="codeph">PUSH_PRED</code>提示，因为<code class="codeph">some_view</code>不可用。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-C18EA0A0-7792-4220-A1C1-3EC856A19BA7__GUID-86E57995-8B27-477C-9F6F-A304E48BE013">
                           <p class="notep1">也可以看看：</p>
                           <p> <a href="../sqlrf/Comments.html#SQLRF51098" target="_blank"><span><cite>Oracle数据库SQL语言参考，</cite></span></a>以了解注释和提示的语法规则</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="influencing-the-optimizer.html#GUID-F9F20FDC-8AC9-429C-A4F9-3FF747077182" title="解释的计划包括一个报告，显示在计划生成期间使用了哪些提示。">报告提示</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-14EECC60-2E3F-4B6F-9949-F7D4003F1208" name="GUID-14EECC60-2E3F-4B6F-9949-F7D4003F1208"></a><h5 id="TGSQL-GUID-14EECC60-2E3F-4B6F-9949-F7D4003F1208" class="sect5"><span class="enumeration_section">19.3.3.2</span>提示使用情况报告的用户界面</h5>
                     <div>
                        <p>该报告包括所有优化程序提示的状态。还包括其他提示的子集，包括<code class="codeph">PARALLEL</code>和<code class="codeph">INMEMORY</code> 。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-14EECC60-2E3F-4B6F-9949-F7D4003F1208__GUID-6C9C2FA5-FFCD-4F41-AF64-72642EDFCCF5">报告访问</p>
                           <p>默认情况下启用提示跟踪。您可以使用以下<code class="codeph">DBMS_XPLAN</code>函数访问提示使用情况报告：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">显示</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">DISPLAY_CURSOR</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">DISPLAY_WORKLOAD_REPOSITORY</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">DISPLAY_SQL_PLAN_BASELINE</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">DISPLAY_SQLSET</code></p>
                              </li>
                           </ul>
                           <p>在<code class="codeph">format</code>参数中指定值<code class="codeph">HINT_REPORT</code>时，上述函数会生成报告。<code class="codeph">TYPICAL</code>值仅显示最终计划中未使用的提示，而值<code class="codeph">ALL</code>显示已使用和未使用的提示。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-14EECC60-2E3F-4B6F-9949-F7D4003F1208__GUID-19438CF7-8D09-4B13-84AB-6ED5C21D517C">报告格式</p>
                           <p>假设您解释以下提示的查询：</p><pre class="pre codeblock"><code>SELECT / * + INDEX（t1）FULL（@ sel $ 2 t1）* / COUNT（*）FROM jobs t1 WHERE t1.job_id IN（SELECT / * + FULL（t1）* / job_id FROM employees t1）;</code></pre><p>以下<code class="codeph">DBMS_XPLAN.DISPLAY</code>输出显示计划，包括提示报告：</p><pre class="pre codeblock"><code>-------------------------------------------------- -------------------------------- | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- -------------------------------- | 0 |选择声明| | 1 | 17 | 3（34）| 00:00:01 | | 1 | SORT AGGREGATE | | 1 | 17 | | | | 2 | NESTED LOOPS | | 19 | 323 | 3（34）| 00:00:01 | | 3 | SORT UNIQUE | | 107 | 963 | 2（0）| 00:00:01 | | 4 |表访问完全|员工| 107 | 963 | 2（0）| 00:00:01 | | * 5 | INDEX UNIQUE SCAN | JOB_ID_PK | 1 | 8 | 0（0）| 00:00:01 | -------------------------------------------------- --------------------------------查询块名称/对象别名（由操作ID标识）：----- -------------------------------------------------- ------ 1  -  SEL $ 5DA710D3 4  -  SEL $ 5DA710D3 /“T1”@“SEL $ 2”5  -  SEL $ 5DA710D3 /“T1”@“SEL $ 1”谓词信息（由操作ID识别）： - ------------------------------------------------- 5 - 访问（“T1”。“JOB_ID”=“JOB_ID”）列投影信息（由操作ID标识）：------------------------- ---------------------------------- 1  - （＃keys = 0）COUNT（*）[22] 2 - （＃keys = 0）3  - （＃keys = 1）“JOB_ID”[VARCHAR2,10] 4  - （rowset = 256）“JOB_ID”[VARCHAR2,10]提示报告（由操作ID /查询块名称/标识）对象别名）：语句的总提示：3（U  - 未使用（1））-------------------------------- ------------------------------------------- 4  -  SEL $ 5DA710D3 /“ T1“@”SEL $ 2“U  -  FULL（t1）/提示被父查询块中的另一个覆盖 -  FULL（@ sel $ 2 t1）5  -  SEL $ 5DA710D3 /”T1“@” SEL $ 1“ -  INDEX（t1）</code></pre><p>报告标题显示报告中的提示总数。在这种情况下，该声明包含3个总提示。如果提示未使用，未解析或语法错误，则标题指定其编号。在这种情况下，只有1个提示未被使用。</p>
                           <p>该报告显示计划中显示的对象（例如，查询块和表）下的提示。在每个对象之前是一个数字，用于标识对象首次出现的计划中的行。例如，前面的报告显示了适用于以下不同对象的提示： <code class="codeph">T1@SEL$2</code>和<code class="codeph">T1@SEL$1</code> 。表<code class="codeph">T1@SEL$2</code>出现在计划第4行的查询块<code class="codeph">SEL$5DA710D3</code>中。表<code class="codeph">T1@SEL$1</code>出现在计划第5行的同一查询块中。
                           </p>
                           <p>提示可能未正确指定或与最终计划中不存在的对象相关联。如果查询块未出现在最终计划中，则报告会为其分配行号<code class="codeph">0</code> 。在前面的示例中，没有提示的行号为0，因此所有查询块都出现在最终计划中。
                           </p>
                           <p>该报告显示了提示的文本。提示也可能具有以下注释之一：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">E</code>表示语法错误。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">N</code>表示未解决的提示。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">U</code>表示最终计划中未使用相应的提示。
                                 </p>
                              </li>
                           </ul>
                           <p>在前面的示例中， <code class="codeph">U - FULL(t1)</code>表示查询块<code class="codeph">SEL$5DA710D3</code>出现在最终计划中，但未应用<code class="codeph">FULL(t1)</code>提示。
                           </p>
                           <p>在每个对象中，未使用的提示出现在开头，然后是使用的提示。例如，报告首先显示未使用的<code class="codeph">FULL(t1)</code>提示，然后显示已使用的<code class="codeph">FULL(@sel$2 t1)</code> 。对于许多未使用的提示，该报告解释了优化程序未应用提示的原因。在前面的示例中，报告指示由于以下原因未使用<code class="codeph">FULL(t1)</code> ： <code class="codeph">hint overridden by another in parent query block</code> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-14EECC60-2E3F-4B6F-9949-F7D4003F1208__GUID-95FD7ECC-3DAF-4AF7-825F-C1D21F47302D">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../arpls/DBMS_XPLAN.html#GUID-BAD480AA-351A-48FE-A8E7-F0D8EF643EBF" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解有关<code class="codeph">DBMS_XPLAN</code>包的更多信息</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="influencing-the-optimizer.html#GUID-F9F20FDC-8AC9-429C-A4F9-3FF747077182" title="解释的计划包括一个报告，显示在计划生成期间使用了哪些提示。">报告提示</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-98F9788B-9162-4A12-9257-CC855A4136B3" name="GUID-98F9788B-9162-4A12-9257-CC855A4136B3"></a><h5 id="TGSQL-GUID-98F9788B-9162-4A12-9257-CC855A4136B3" class="sect5"><span class="enumeration_section">19.3.3.3</span>报告提示用法：教程</h5>
                     <div>
                        <p>您可以使用<code class="codeph">DBMS_XPLAN</code>显示功能报告提示使用情况。
                        </p>
                        <div class="section">默认情况下启用提示使用情况报告。显示具有提示信息的计划的步骤与正常显示计划的步骤相同。</div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-98F9788B-9162-4A12-9257-CC855A4136B3__GUID-B63217CC-BE6D-4364-A0C9-4AA83B19BE33">假设</p>
                           <p>本教程假设以下内容：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">employees.employee_id</code>列上存在名为<code class="codeph">emp_emp_id_pk</code>的索引。
                                 </p>
                              </li>
                              <li>
                                 <p>您想查询特定员工。</p>
                              </li>
                              <li>
                                 <p>您希望使用<code class="codeph">INDEX</code>提示强制优化器使用<code class="codeph">emp_emp_id_pk</code> 。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-98F9788B-9162-4A12-9257-CC855A4136B3__GUID-4AA496E6-0B24-4476-A329-65880670AEBC">要报告提示用法：</p>
                           <ol>
                              <li>
                                 <p>启动SQL * Plus或SQL Developer，并以用户<code class="codeph">hr</code>身份登录数据库。
                                 </p>
                              </li>
                              <li>
                                 <p>解释<code class="codeph">employees</code>查询的计划。
                                 </p>
                                 <p>例如，输入以下语句：</p><pre class="pre codeblock"><code>EXPLAIN PLAN FOR SELECT / * + INDEX（e emp_emp_id_pk）* / COUNT（*）FROM employees e WHERE e.employee_id = 5;</code></pre></li>
                              <li>
                                 <p>使用显示功能查询计划表。</p>
                                 <p>您可以在<code class="codeph">format</code>参数中指定以下任何值：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">所有</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">典型</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">HINT_REPORT</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">HINT_REPORT_USED</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">HINT_REPORT_UNUSED</code></p>
                                    </li>
                                 </ul>
                                 <p>以下查询显示计划的所有部分，包括提示使用信息（包括样本输出）：</p><pre class="pre codeblock"><code>SQL&gt; SELECT * FROM TABLE（DBMS_XPLAN.DISPLAY（format =&gt;'ALL'））; PLAN_TABLE_OUTPUT ------------------------------------------------- -----------------------------------计划哈希值：2637910222 ---------- -------------------------------------------------- ------------------------ | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ---------------------------------- | 0 |选择声明| | 1 | 4 | 0（0）| 00:00:01 | | 1 | SORT AGGREGATE | | 1 | 4 | | | | * 2 | INDEX UNIQUE SCAN | EMP_EMP_ID_PK | 1 | 4 | 0（0）| 00:00:01 | -------------------------------------------------- ----------------------------------查询块名称/对象别名（由操作ID标识）：--- -------------------------------------------------- ------------------------------- 1  -  SEL $ 1 2  -  SEL $ 1 / E @ SEL $ 1谓词信息（由操作识别ID）：  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - - ---- 2  - 访问（“E”。“EMPLOYEE_ID”= 5）列投影信息（由操作ID标识）：---------------------- -------------------------------------------------- ------------ 1  - （＃keys = 0）COUNT（*）[22] <span class="bold">提示报告（由操作ID /查询块名称/对象别名标识）：语句的总提示：1  - -------------------------------------------------- ------------------------ 2  -  SEL $ 1 / E @ SEL $ 1  -  INDEX（e emp_emp_id_pk）</span>
</code></pre><p>提示报告部分显示<code class="codeph">INDEX(e emp_emp_id_pk)</code>提示的查询块是<code class="codeph">SEL$1</code> 。表标识符是<code class="codeph">E@SEL$1</code> 。计划行的行号是<code class="codeph">2</code> ，它对应于表<code class="codeph">E@SEL$1</code>出现在计划表中的第一行。
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-98F9788B-9162-4A12-9257-CC855A4136B3__GUID-27E2DBF5-D547-48B5-8ED0-E101115B12EB">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../sqlrf/EXPLAIN-PLAN.html#GUID-FD540872-4ED3-4936-96A2-362539931BA0" target="_blank"><span><cite>Oracle数据库SQL语言参考，</cite></span></a>以了解有关<code class="codeph">EXPLAIN PLAN</code>更多信息</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="influencing-the-optimizer.html#GUID-F9F20FDC-8AC9-429C-A4F9-3FF747077182" title="解释的计划包括一个报告，显示在计划生成期间使用了哪些提示。">报告提示</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-1697E7CA-9DD0-4C0D-9BC9-E4E17334C0AA" name="GUID-1697E7CA-9DD0-4C0D-9BC9-E4E17334C0AA"></a><h5 id="TGSQL-GUID-1697E7CA-9DD0-4C0D-9BC9-E4E17334C0AA" class="sect5"><span class="enumeration_section">19.3.3.4</span>提示使用报告：示例</h5>
                     <div>
                        <p>这些示例显示了各种类型的提示使用报告。</p>
                        <div class="section">
                           <p>以下示例均显示<code class="codeph">hr</code>模式中表的查询。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-1697E7CA-9DD0-4C0D-9BC9-E4E17334C0AA__GUID-77578C5C-CDB5-4059-9D17-6216E61B558C">
                           <p class="titleinexample">例19-2语句级未使用提示</p>
                           <p>以下示例指定<code class="codeph">emp_manager_ix</code>索引的索引范围提示：</p><pre class="pre codeblock"><code>EXPLAIN PLAN FOR SELECT / * + INDEX_RS（e emp_manager_ix）* / COUNT（*）FROM employees e WHERE e.job_id &lt;5;</code></pre><p>以下计划表的查询指定<code class="codeph">TYPICAL</code>的<code class="codeph">format</code>值，它仅显示未使用的提示：</p><pre class="pre codeblock"><code>SQL&gt; SELECT * FROM TABLE（DBMS_XPLAN.DISPLAY（format =&gt;'TYPICAL'））; PLAN_TABLE_OUTPUT ------------------------------------------------- ------------------------------计划哈希值：2731009358 --------------- -------------------------------------------------- -------------- | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ----------------------------- | 0 |选择声明| | 1 | 9 | 1（0）| 00:00:01 | | 1 | SORT AGGREGATE | | 1 | 9 | | | | * 2 | INDEX全扫描| EMP_JOB_IX | 5 | 45 | 1（0）| 00:00:01 | -------------------------------------------------- -----------------------------谓词信息（由操作ID标识）：PLAN_TABLE_OUTPUT ----------- -------------------------------------------------- ------------------ 2  - 过滤器（TO_NUMBER（“E”。“JOB_ID”）&lt;5） <span class="bold">提示报告（由操作ID /查询块名称/对象别名标识） ：声明的总提示：1（U  - 未使用（1））----------------------------------- ---------------------------------------- 2  -  SEL $ 1 / E @ SEL $ 1 U. -  INDEX_RS（e emp_manager_ix）</span>
</code></pre><p>上一个提示使用情况报告中的<code class="codeph">U</code>表示未使用<code class="codeph">INDEX_RS</code>提示。报告显示未使用提示的总数： <code class="codeph">U – Unused (1)</code> 。
                           </p>
                        </div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-1697E7CA-9DD0-4C0D-9BC9-E4E17334C0AA__GUID-0ACE2584-D22C-41A9-8F20-5E9F51B83C49">
                           <p class="titleinexample">例19-3冲突提示</p>
                           <p>以下示例指定了两个提示，一个用于跳过扫描，另一个用于快速完整扫描：</p><pre class="pre codeblock"><code>EXPLAIN PLAN FOR SELECT / * + INDEX_SS（e emp_manager_ix）INDEX_FFS（e）* / COUNT（*）FROM employees e WHERE e.manager_id &lt;5;</code></pre><p>以下计划表的查询指定<code class="codeph">TYPICAL</code>的<code class="codeph">format</code>值，它仅显示未使用的提示：</p><pre class="pre codeblock"><code>SQL&gt; SELECT * FROM TABLE（DBMS_XPLAN.DISPLAY（format =&gt;'TYPICAL'））; PLAN_TABLE_OUTPUT ------------------------------------------------- -----------------------------------计划哈希值：2262146496 ---------- -------------------------------------------------- ------------------------ | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ---------------------------------- | 0 |选择声明| | 1 | 4 | 1（0）| 00:00:01 | | 1 | SORT AGGREGATE | | 1 | 4 | | | | * 2 | INDEX RANGE SCAN | EMP_MANAGER_IX | 1 | 4 | 1（0）| 00:00:01 | -------------------------------------------------- ----------------------------------谓词信息（由操作ID标识）：PLAN_TABLE_OUTPUT ------ -------------------------------------------------- ---------------------------- 2  -  access（“E”。“MANAGER_ID”&lt;5） <span class="bold">提示报告（由操作ID /标识</span> ） <span class="bold">查询块名称/对象别名）：语句的总提示：2（U  - 未使用（2））---------------------------- ----------------------------------------------- 2  -  SEL $ 1 / E @ SEL $ 1 U  -  INDEX_FFS（e）/提示与兄弟查询块中的另一个冲突U  -  INDEX_SS（e emp_manager_ix）/提示与兄弟查询块中的另一个冲突</span></code></pre><p>上述报告显示<code class="codeph">INDEX_FFS(e)</code>和<code class="codeph">INDEX_SS(e emp_manager_ix)</code>提示相互冲突。索引跳过扫描和索引快速完全扫描是互斥的。优化器忽略了这两个提示，如文本<code class="codeph">U — Unused (2)</code> 。即使优化器忽略了指定<code class="codeph">emp_manager_ix</code>索引的提示，优化器仍然会根据其基于成本的分析使用此索引。
                           </p>
                        </div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-1697E7CA-9DD0-4C0D-9BC9-E4E17334C0AA__GUID-A191E7F1-962D-41D0-9CB1-C018BC26C0FF">
                           <p class="titleinexample">例19-4多重提示</p>
                           <p>以下示例指定了四个提示，其中一个提供了两个表：</p><pre class="pre codeblock"><code>用于SELECT / * + ORDERED USE_NL（t1，t2）的EXPLAIN PLAN INDEX（t2）NLJ_PREFETCH（t2）* / COUNT（*）来自作业t1，员工t2 WHERE t1.job_id = t2.employee_id;</code></pre><p>以下计划表的查询指定<code class="codeph">ALL</code>的<code class="codeph">format</code>值：</p><pre class="pre codeblock"><code>SQL&gt; SELECT * FROM TABLE（DBMS_XPLAN.DISPLAY（format =&gt;'ALL'））; PLAN_TABLE_OUTPUT ------------------------------------------------- ------------------------------------计划哈希值：2668549896 --------- -------------------------------------------------- -------------------------- | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ----------------------------------- | 0 |选择声明| | 1 | 12 | 1（0）| 00:00:01 | | 1 | SORT AGGREGATE | | 1 | 12 | | | | 2 | NESTED LOOPS | | 19 | 228 | 1（0）| 00:00:01 | | 3 | INDEX全扫描| JOB_ID_PK | 19 | 152 | 1（0）| 00:00:01 | | * 4 | INDEX UNIQUE SCAN | EMP_EMP_ID_PK | 1 | 4 | 0（0）| 00:00:01 | -------------------------------------------------- ----------------------------------- PLAN_TABLE_OUTPUT -------------- -------------------------------------------------- ---------------------查询块名称/对象别名（由操作ID标识）：---------------- --------------------------------------------- 1  -  SEL $ 1 3 -  SEL $ 1 / T1 @ SEL $ 1 4  -  SEL $ 1 / T2 @ SEL $ 1谓词信息（由操作ID标识）：------------------------ --------------------------- 4  -  access（“T2”。“EMPLOYEE_ID”= TO_NUMBER（“T1”。“JOB_ID”））列投影信息（由操作ID标识）：---------------------------------------- ------------------- 1  - （＃keys = 0）COUNT（*）[22] 2  - （＃keys = 0）3  - “T1”。“JOB_ID “[VARCHAR2,10] <span class="bold">提示报告（由操作ID /查询块名称/对象别名标识）：语句的总提示：5（U  - 未使用（2））-------------- -------------------------------------------------- ----------- 1  -  SEL $ 1  -  ORDERED 3  -  SEL $ 1 / T1 @ SEL $ 1 U  -  USE_NL（t1，t2）4  -  SEL $ 1 / T2 @ SEL $ 1 U  - NLJ_PREFETCH（t2） -  INDEX（t2） -  USE_NL（t1，t2）</span>
</code></pre><p>前面的报告显示未使用两个提示： <code class="codeph">USE_NL(t1, t2)</code>和<code class="codeph">NLJ_PREFETCH(t2)</code> 。计划的第3步是<code class="codeph">jobs</code>表的索引全扫描，它使用别名<code class="codeph">t1</code> 。该报告显示优化器未应用<code class="codeph">USE_NL(t1, t2)</code>提示来访问<code class="codeph">jobs</code> 。步骤4是<code class="codeph">employees</code>表的索引唯一扫描，它使用别名<code class="codeph">t2</code> 。<code class="codeph">USE_NL(t1, t2)</code>不存在<code class="codeph">U</code>前缀，这意味着优化器确实对<code class="codeph">employees</code>使用了提示。
                           </p>
                        </div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-1697E7CA-9DD0-4C0D-9BC9-E4E17334C0AA__MULTITABLEHINTS-144-B1C7ACE6">
                           <p class="titleinexample">示例19-5未使用的查询块的提示</p>
                           <p>以下示例在子查询上指定两个提示： <code class="codeph">UNNEST</code>和<code class="codeph">SEMIJOIN</code> ：</p><pre class="pre codeblock"><code>EXPLAIN PLAN FOR SELECT COUNT（*），manager_id FROM departments WHERE manager_id IN（SELECT / * + UNNEST SEMIJOIN * / manager_id FROM employees）AND ROWNUM &lt;= 2 GROUP BY manager_id;</code></pre><p>以下计划表的查询指定<code class="codeph">ALL</code>的<code class="codeph">format</code>值：</p><pre class="pre codeblock"><code>SQL&gt; SELECT * FROM TABLE（DBMS_XPLAN.DISPLAY（format =&gt;'ALL'））; PLAN_TABLE_OUTPUT ------------------------------------------------- --------------------------------------计划哈希值：173733304 ------- -------------------------------------------------- ------------------------------ | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ------------------------------------- | 0 |选择声明| | 2 | 14 | 3（34）| 00:00:01 | | 1 | HASH GROUP BY | | 2 | 14 | 3（34）| 00:00:01 | | * 2 | COUNT STOPKEY | | | | | | | 3 | NESTED LOOPS SEMI | | 2 | 14 | 2（0）| 00:00:01 | | * 4 |表访问完全|部门| 2 | 6 | 2（0）| 00:00:01 | | * 5 | INDEX RANGE SCAN | EMP_MANAGER_IX | 107 | 428 | 0（0）| 00:00:01 | -------------------------------------------------- ------------------------------------- PLAN_TABLE_OUTPUT ------------ -------------------------------------------------- -------------------------查询块名称/对象别名（由操作ID标识）：------------ ------------------------------------------------- 1 -  SEL $ 5DA710D3 4  -  SEL $ 5DA710D3 / DEPARTMENTS @ SEL $ 1 5  -  SEL $ 5DA710D3 / EMPLOYEES @ SEL $ 2谓词信息（由操作ID识别）：----------------- ---------------------------------- 2  -  filter（ROWNUM &lt;= 2）4  -  filter（“MANAGER_ID”） IS NOT NULL）5  - 访问（“MANAGER_ID”=“MANAGER_ID”）列投影信息（由操作ID标识）：------------------------ ----------------------------------- 1  - （＃keys = 1）“MANAGER_ID”[数字，22 ]，COUNT（*）[22] 2  - “MANAGER_ID”[NUMBER，22] 3  - （＃keys = 0）“MANAGER_ID”[NUMBER，22] 4  - “MANAGER_ID”[NUMBER，22] <span class="bold">提示报告（由operation id / Query Block Name / Object Alias）：语句的总提示：2 --------------------- -------------------------------------------------- ---- 0  -  SEL $ 2  -  SEMIJOIN  -  UNNEST</span>
</code></pre><p>在此示例中，提示在查询块<code class="codeph">SEL$2</code>中指定，但<code class="codeph">SEL$2</code>未出现在最终计划中。该报告显示<code class="codeph">SEL$2</code>下的提示，关联行号为<code class="codeph">0</code> 。
                           </p>
                        </div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-1697E7CA-9DD0-4C0D-9BC9-E4E17334C0AA__HINTSFORUNUSEDQUERYBLOCKS-B1CAAD97">
                           <p class="titleinexample">例19-6重写的提示</p>
                           <p>以下示例在同一查询块中的同一个表上指定两个<code class="codeph">FULL</code>提示：</p><pre class="pre codeblock"><code>EXPLAIN PLAN FOR SELECT / * + INDEX（t1）FULL（@ sel $ 2 t1）* / COUNT（*）FROM jobs t1 WHERE t1.job_id IN（SELECT / * + FULL（t1）NO_MERGE * / job_id FROM employees t1）;</code></pre><p>以下计划表的查询指定<code class="codeph">ALL</code>的<code class="codeph">format</code>值：</p><pre class="pre codeblock"><code>SQL&gt; SELECT * FROM TABLE（DBMS_XPLAN.DISPLAY（format =&gt;'ALL'））; PLAN_TABLE_OUTPUT ------------------------------------------------- ---------------------------------计划哈希值：3101158531 ------------ -------------------------------------------------- -------------------- | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- -------------------------------- | 0 |选择声明| | 1 | 17 | 3（34）| 00:00:01 | | 1 | SORT AGGREGATE | | 1 | 17 | | | | 2 | NESTED LOOPS | | 19 | 323 | 3（34）| 00:00:01 | | 3 | SORT UNIQUE | | 107 | 963 | 2（0）| 00:00:01 | | 4 |表访问完全|员工| 107 | 963 | 2（0）| 00:00:01 | | * 5 | INDEX UNIQUE SCAN | JOB_ID_PK | 1 | 8 | 0（0）| 00:00:01 | -------------------------------------------------- --------------------------------查询块名称/对象别名（由操作ID标识）：----- -------------------------------------------------- ------ 1  -  SEL $ 5DA710D3 4  -  SEL $ 5DA710D3 / T1 @ SEL $ 2 5  -  SEL $ 5DA710D3 / T1 @ SEL $ 1谓词信息（由操作ID识别）：---------- ----------------------------------------- 5  -  access（“T1”。“ JOB_ID“=”JOB_ID“）列投影信息（由操作ID标识）：--------------------------------- -------------------------- 1  - （＃keys = 0）COUNT（*）[22] 2  - （＃keys = 0）3 - （＃keys = 1）“JOB_ID”[VARCHAR2,10] 4  - （rowset = 256）“JOB_ID”[VARCHAR2,10] <span class="bold">提示报告（由操作ID /查询块名称/对象别名标识）：语句的总提示：4（U  - 未使用（1））---------------------------------------- ----------------------------------- 0  -  SEL $ 2  -  NO_MERGE 4  -  SEL $ 5DA710D3 / T1 @ SEL $ 2 U  -  FULL（t1）/提示被父查询块中的另一个覆盖 -  FULL（@ sel $ 2 t1）5  -  SEL $ 5DA710D3 / T1 @ SEL $ 1  -  INDEX（t1）</span></code></pre><p>在指定的三个提示中，只有一个未使用。查询块<code class="codeph">SEL$2</code>指定的提示<code class="codeph">FULL(t1)</code>被查询块<code class="codeph">SEL$1</code>指定的提示<code class="codeph">FULL(@sel$2 T1)</code>覆盖。使用了查询块<code class="codeph">SEL$2</code>的<code class="codeph">NO_MERGE</code>提示。
                           </p>
                           <p>使用<code class="codeph">TYPICAL</code>格式设置的以下计划表查询仅显示未使用的提示：</p><pre class="pre codeblock"><code>SQL&gt; select * from table（dbms_xplan.display（format =&gt;'TYPICAL'））;计划哈希值：3101158531 --------------------------------------------- ------------------------------------- | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- -------------------------------- | 0 |选择声明| | 1 | 17 | 3（34）| 00:00:01 | | 1 | SORT AGGREGATE | | 1 | 17 | | | | 2 | NESTED LOOPS | | 19 | 323 | 3（34）| 00:00:01 | | 3 | SORT UNIQUE | | 107 | 963 | 2（0）| 00:00:01 | | 4 |表访问完全|员工| 107 | 963 | 2（0）| 00:00:01 | | * 5 | INDEX UNIQUE SCAN | JOB_ID_PK | 1 | 8 | 0（0）| 00:00:01 | -------------------------------------------------- --------------------------------谓词信息（由操作ID标识）：--------- ------------------------------------------ 5  -  access（“T1”。 “JOB_ID”=“JOB_ID”） <span class="bold">提示报告（由操作ID /查询块名称/对象别名标识）：语句的总提示：1（U  - 未使用（1））------------ -------------------------------------------------- ------------- 4  -  SEL $ 5DA710D3 / T1 @ SEL $ 2 U  -  FULL（t1）/提示被父查询块中的另一个覆盖</span></code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-1697E7CA-9DD0-4C0D-9BC9-E4E17334C0AA__OVERRIDDENHINTS-146-B1D1E7EC">
                           <p class="titleinexample">例19-7多个提示</p>
                           <p>以下<code class="codeph">UNION ALL</code>查询指定了十种不同的提示：</p><pre class="pre codeblock"><code>SELECT / * + FULL（t3）INDEX（t2）INDEX（t1）MERGE（@ SEL $ 5）PARALLEL（2）* / t1.first_name FROM employees t1，jobs t2，job_history t3 WHERE t1.job_id = t2.job_id AND t2 .min_salary = 100000 AND t1.department_id = t3.department_id UNION ALL SELECT / * + INDEX（t3）USE_MERGE（t2）INDEX（t2）FULL（t1）NO_ORDER_SUBQ * / t1.first_name FROM departments t3，jobs t2，employees t1 WHERE t1.job_id = t2.job_id AND t2.min_salary = 100000 AND t1.department_id = t3.department_id;</code></pre><p>以下共享SQL区域的查询指定<code class="codeph">ALL</code>的<code class="codeph">format</code>值（请注意，为了便于阅读，计划行已被截断）：</p><pre class="pre codeblock"><code>SQL&gt; SELECT * FROM TABLE（DBMS_XPLAN.DISPLAY_CURSOR（format =&gt;'ALL'））...-------------------------------------------------- ---------------------------------------------- | Id |操作|名称|行|字节|成本（％CPU）--------------------------------------------- -------------------------------------------------- -  | 0 |选择声明| | | | 9（100）| | 1 | UNION-ALL | | | | | | 2 | PX COORDINATOR | | | | | | 3 | PX SEND QC（RANDOM）| ：TQ10002 | 5 | 175 | 5（0）| | * 4 | HASH JOIN | | 5 | 175 | 5（0）| | 5 | PX RECEIVE | | 3 | 93 | 3（0）| | 6 | PX SEND BROADCAST | ：TQ10001 | 3 | 93 | 3（0）| | 7 | NESTED LOOPS | | 3 | 93 | 3（0）| | 8 | NESTED LOOPS | | 6 | 93 | 3（0）| | * 9 |通过INDEX ROWID BATCHED表的访问权限工作| 1 | 12 | 2（0）| | 10 | BUFFER SORT | | | | | | 11 | PX RECEIVE | | 19 | | 1（0）| | 12 | PX SEND HASH（BLOCK ADDRESS）| ：TQ10000 | 19 | | 1（0）| | 13 | PX SELECTOR | | | | | | 14 | INDEX全扫描| JOB_ID_PK | 19 | | 1（0）| | * 15 | INDEX RANGE SCAN | EMP_JOB_IX | 6 | | 0（0）| | 16 |按INDEX ROWID表的访问权限|员工| 6 | 114 | 1（0）| | 17 | PX BLOCK ITERATOR | | 10 | 40 | 2（0）| | * 18 |表访问完全| JOB_HISTORY | 10 | 40 | 2（0）| | 19 | PX COORDINATOR | | | | | | 20 | PX SEND QC（RANDOM）| ：TQ20002 | 3 | 93 | 4（0）| | * 21 | HASH JOIN | | 3 | 93 | 4（0）| | 22 |加入过滤器创建| ：BF0000 | 1 | 12 | 2（0）| | 23 | PX RECEIVE | | 1 | 12 | 2（0）| | 24 | PX SEND BROADCAST | ：TQ20001 | 1 | 12 | 2（0）| | * 25 |通过INDEX ROWID BATCHED表的访问权限工作| 1 | 12 | 2（0）| | 26 | BUFFER SORT | | | | | | 27 | PX RECEIVE | | 19 | | 1（0）| | 28 | PX SEND HASH（BLOCK ADDRESS）| ：TQ20000 | 19 | | 1（0）| | 29 | PX SELECTOR | | | | | | 30 | INDEX全扫描| JOB_ID_PK | 19 | | 1（0）| | 31 |加入过滤器使用| ：BF0000 | 106 | 2014 | 2（0）| | 32 | PX BLOCK ITERATOR | | 106 | 2014 | 2（0）| | * 33 |表访问完全|员工| 106 | 2014 | 2（0）| -------------------------------------------------- ----------------------------------------------查询块名称/对象别名（由操作ID标识）：----------------------------------------- -------------------- 1  -  SET $ 1 4  -  SEL $ 1 9  -  SEL $ 1 / T2 @ SEL $ 1 14  -  SEL $ 1 / T2 @ SEL $ 1 15  -  SEL $ 1 / T1 @ SEL $ 1 16  -  SEL $ 1 / T1 @ SEL $ 1 18  -  SEL $ 1 / T3 @ SEL $ 1 21  -  SEL $ E0F432AE 25  -  SEL $ E0F432AE / T2 @ SEL $ 2 30  -  SEL $ E0F432AE / T2 @ SEL $ 2 33  - SEL $ E0F432AE / T1 @ SEL $ 2谓词信息（由操作ID标识）：--------------------------------- -------------------------- 4  -  access（“T1”。“DEPARTMENT_ID”=“T3”。“DEPARTMENT_ID”）9  - 过滤器（ “T2”。“MIN_SALARY”= 100000）15  - 访问（“T1”。“JOB_ID”=“T2”。“JOB_ID”）18  - 访问（：Z&gt; =：Z AND：Z &lt;=：Z）21  - 访问（“T1”。“JOB_ID”=“T2”。“JOB_ID”）25  - 过滤器（“T2”。“MIN_SALARY”= 100000）33  - 访问（：Z&gt; =：Z AND：Z &lt;=：Z） filter（（“T1”。“DEPARTMENT_ID”不为空且SYS_OP_BLOOM_FILTER（：BF0000，“T1”。“JOB_ID”）））列投影信息（由操作ID标识）：---------- ------------------------------------------------- 1 -  STRDEF [20] 2  - “T1”。“FIRST_NAME”[VARCHAR2,20] 3  - （＃keys = 0）“T1”。“FIRST_NAME”[VARCHAR2,20] 4  - （＃keys = 1; rowset = 256）“T1”。“FIRST_NAME”[VARCHAR2,20] 5  - （rowset = 256）“T1”。“DEPARTMENT_ID”[NUMBER，22]，“T1”。“FIRST_NAME”[VARCHAR2,20] 6  - （＃keys = 0）“T1”。“DEPARTMENT_ID”[NUMBER，22]，“T1”。“FIRST_NAME”[VARCHAR2,20] 7  - “T1”。“FIRST_NAME”[VARCHAR2,20]，“T1”。 “DEPARTMENT_ID”[NUMBER，22] 8  - “T1”。ROWID [ROWID，10] 9  - “T2”。“JOB_ID”[VARCHAR2,10] 10  - （＃keys = 0）“T2”。ROWID [ROWID，10]，“T2”。“JOB_ID”[VARCHAR2,10] 11  - （rowset = 256）“T2”。ROWID [ROWID，10]，“T2”。“JOB_ID”[VARCHAR2,10] 12  - （＃keys = 1）“T2”。ROWID [ROWID，10]，“T2”。“JOB_ID”[VARCHAR2,10] 13  - “T2”。ROWID [ROWID，10]，“T2”。“JOB_ID”[VARCHAR2,10] 14  - “T2”。ROWID [ROWID，10]，“T2”。“JOB_ID”[VARCHAR2,10] 15  - “T1”。ROWID [ROWID，10] 16  - “T1”。“FIRST_NAME”[VARCHAR2,20]，“T1”。“DEPARTMENT_ID”[NUMBER，22] 17  - （rowset = 256）“T3”。“DEPARTMENT_ID”[数字， 22]  - （rowset = 256）“T3”。“DEPARTMENT_ID”[NUMBER，22] 19  - “T1”。“FIRST_NAME”[VARCHAR2,20] 20  - （＃keys = 0）“T1”。“FIRST_NAME” [VARCHAR2,20] 21  - （＃keys = 1; rowset = 256）“T1”。“FIRST_NAME”[VARCHAR2,20] 22  - （rowset = 256）“T2”。“JOB_ID”[VARCHAR2,10] 23  - （rowset = 256）“T2”。“JOB_ID”[VARCHAR2,10] 24  - （＃keys = 0）“T2”。“JOB_ID”[VARCHAR2,10] 25  - “T2”。“JOB_ID”[VARCHAR2,10 ] 26  - （＃keys = 0）“T2”。ROWID [ROWID，10]，“T2”。“JOB_ID”[VARCHAR2,10] 27  - （rowset = 256）“T2”。ROWID [ROWID，10]，“T2”。“JOB_ID”[VARCHAR2,10] 28  - （＃keys = 1）“T2”。ROWID [ROWID，10]，“T2”。“JOB_ID”[VARCHAR2,10] 29  - “T2”。ROWID [ROWID，10]，“T2”。“JOB_ID”[VARCHAR2,10] 30  - “T2”。ROWID [ROWID，10]，“T2”。“JOB_ID”[VARCHAR2,10] 31  - （rowset = 256）“T1”。“FIRST_NAME”[VARCHAR2,20]，“T1”。“JOB_ID”[VARCHAR2,10 ] 32  - （rowset = 256）“T1”。“FIRST_NAME”[VARCHAR2,20]，“T1”。“JOB_ID”[VARCHAR2,10] 33  - （rowset = 256）“T1”。“FIRST_NAME”[VARCHAR2， 20]，“T1”。“JOB_ID”[VARCHAR2,10] <span class="bold">提示报告（由操作ID /查询块名称/对象别名标识）：语句的总提示：10（U  - 未使用（2），N  - 未解决（1 ），E  - 语法错误（1））---------------------------------------- ------------------------------------------------ 0  - 声明 - 并行（2）0  -  SEL $ 5 N  - 合并（@ SEL $ 5）0  -  SEL $ 2 E  -  NO_ORDER_SUBQ 9  -  SEL $ 1 / T2 @ SEL $ 1  -  INDEX（t2）15  -  SEL $ 1 / T1 @ SEL $ 1  -  INDEX （t1）18  -  SEL $ 1 / T3 @ SEL $ 1  -  FULL（t3）21  -  SEL $ E0F432AE / T3 @ SEL $ 2 U  -  INDEX（t3）25  -  SEL $ E0F432AE / T2 @ SEL $ 2 U  -  USE_MERGE（t2） - INDEX（t2）33  -  SEL $ E0F432AE / T1 @ SEL $ 2  -  FULL（t1）注-----  - 由于提示，并行度为2</span>
</code></pre><p>该报告显示以下未使用的提示：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>两个未使用的提示（ <code class="codeph">U</code> ）</p>
                                 <p>该报告指出<code class="codeph">INDEX(t3)</code>和<code class="codeph">USER_MERGE(t2)</code>未在查询块<code class="codeph">SEL$E0F432AE</code> 。</p>
                              </li>
                              <li>
                                 <p>一个未解决的提示（ <code class="codeph">N</code> ）</p>
                                 <p>提示<code class="codeph">MERGE</code>未解析，因为查询块<code class="codeph">SEL$5</code>不存在。
                                 </p>
                              </li>
                              <li>
                                 <p>一个语法错误（ <code class="codeph">E</code> ）</p>
                                 <p><code class="codeph">SEL$2</code>指定的提示<code class="codeph">NO_ORDER_SUBQ</code>不是有效提示。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="influencing-the-optimizer.html#GUID-F9F20FDC-8AC9-429C-A4F9-3FF747077182" title="解释的计划包括一个报告，显示在计划生成期间使用了哪些提示。">报告提示</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
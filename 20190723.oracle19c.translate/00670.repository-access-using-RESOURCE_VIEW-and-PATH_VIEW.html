<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Predefined public views RESOURCE_VIEW and PATH_VIEW provide access to Oracle XML DB repository data. You can use Oracle SQL functions under_path and equals_path to query resources based on their path names, and functions path and depth to return resource path names and depths."></meta>
      <meta name="description" content="Predefined public views RESOURCE_VIEW and PATH_VIEW provide access to Oracle XML DB repository data. You can use Oracle SQL functions under_path and equals_path to query resources based on their path names, and functions path and depth to return resource path names and depths."></meta>
      <title>使用RESOURCE_VIEW和PATH_VIEW进行存储库访问</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Developer&#39;s Guide "></meta>
      <meta property="og:description" content="Predefined public views RESOURCE_VIEW and PATH_VIEW provide access to Oracle XML DB repository data. You can use Oracle SQL functions under_path and equals_path to query resources based on their path names, and functions path and depth to return resource path names and depths."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="xml-db-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-30T12:32:42-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96222-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="use-of-XLink-and-XInclude-with-XML-DB.html" title="Previous" type="text/html"></link>
      <link rel="next" href="resource-versions.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML DB Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADXDB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="use-of-XLink-and-XInclude-with-XML-DB.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="resource-versions.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="XML-DB-repository.html" property="item" typeof="WebPage"><span property="name">Oracle XML DB存储库</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用RESOURCE_VIEW和PATH_VIEW进行存储库访问</li>
            </ol>
            <a id="GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" name="GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55"></a><a id="ADXDB2200"></a>
            
            <h2 id="ADXDB-GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" class="sect2"><span class="enumeration_chapter">24</span>使用RESOURCE_VIEW和PATH_VIEW进行存储库访问</h2>
         </header>
         <div class="ind">
            <div>
               <p>预定义的公共视图<code class="codeph">RESOURCE_VIEW</code>和<code class="codeph">PATH_VIEW</code>提供对Oracle XML DB存储库数据的访问。您可以使用Oracle SQL函数<code class="codeph">under_path</code>和<code class="codeph">equals_path</code>根据其路径名查询资源，并使用函数<code class="codeph">path</code>和<code class="codeph">depth</code>来返回资源路径名和深度。
               </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4">Oracle XML DB RESOURCE_VIEW和PATH_VIEW概述</a><br>公共视图<code class="codeph">RESOURCE_VIEW</code>和<code class="codeph">PATH_VIEW</code>提供了一种使用SQL访问存储在Oracle XML DB Repository中的数据的机制。您可以使用这些视图使用Internet协议（如FTP和WebDAV）或使用应用程序接口（API）访问存储库中存储的数据。
                  </li>
                  <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-4570E0E5-53B8-468C-9589-35EDF0C41B19">使用RESOURCE_VIEW和PATH_VIEW的Oracle SQL函数</a><br>与公共视图<code class="codeph">RESOURCE_VIEW</code>和<code class="codeph">PATH_VIEW</code>一起使用的Oracle SQL函数包括<code class="codeph">under_path</code> ， <code class="codeph">equals_path</code> ， <code class="codeph">path</code>和<code class="codeph">depth</code> 。
                  </li>
                  <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A">访问存储库数据路径，资源和链接：示例</a><br>此处的示例说明了如何访问Oracle XML DB Repository路径，资源和链接属性。
                  </li>
                  <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BCA4A460-7C38-46E4-A827-E3B3B20DDB1F">删除存储库资源：示例</a><br>此处的示例说明了如何删除Oracle XML DB存储库资源和路径。
                  </li>
                  <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-3DDCD870-2149-494C-AA20-E7D269CC6E7D">更新存储库资源：示例</a><br>此处的示例说明了如何更新Oracle XML DB存储库资源和路径。
                  </li>
                  <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-EB652889-E723-4727-B2BC-DFFC378037FD">使用多个Oracle XML DB资源</a><br>要对多个Oracle XML DB资源执行操作，或查找满足特定条件集的一个或多个Oracle XML DB资源，请将SQL与<code class="codeph">RESOURCE_VIEW</code>和<code class="codeph">PATH_VIEW</code> 。</li>
                  <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-9022CFD7-F8C8-434D-A3D6-21208328B2F2">Oracle XML DB存储库操作的性能指南</a><br>提供了用于提高资源创建和查询等存储库操作性能的指南。
                  </li>
                  <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-79391B36-9690-44DC-8923-653CFE299E9C">使用Oracle Text搜索资源</a><br>数据库模式中的表<code class="codeph">XDB$RESOURCE</code> <code class="codeph">XDB</code>存储存储库资源的元数据和内容。您可以使用<code class="codeph">contains</code> <code class="codeph">RESOURCE_VIEW</code>或<code class="codeph">PATH_VIEW</code> Oracle SQL函数来搜索包含特定关键字的<code class="codeph">RESOURCE_VIEW</code> 。</li>
               </ul>
               <div class="infoboxnotealso" id="GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55__GUID-6F457DFF-7D21-49E9-9B39-C3FF754F2CDC">
                  <p class="notep1">也可以看看：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>有关视图<code class="codeph">PATH_VIEW</code>更多信息，请<a href="../refrn/PATH_VIEW.html#REFRN29079" target="_blank"><span><cite>参见Oracle数据库参考</cite></span></a></p>
                     </li>
                     <li>
                        <p>有关视图<code class="codeph">RESOURCE_VIEW</code>更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdb&amp;id=REFRN29080" target="_blank"><span><cite>参见Oracle数据库参考</cite></span></a></p>
                     </li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="XML-DB-repository.html#GUID-840EBE35-8FC8-4150-9FC8-78442FD1B12B" title="Oracle XML DB Repository允许您对数据进行版本控制，实现和管理安全性，并使用API来访问和操作存储库资源。">Oracle XML DB存储库</a></p>
                  </div>
               </div>
            </div>
            <a id="ADXDB5389"></a><a id="ADXDB5394"></a><a id="ADXDB5388"></a><div class="props_rev_3"><a id="GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4" name="GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4"></a><h3 id="ADXDB-GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4" class="sect3"><span class="enumeration_section">24.1</span> Oracle XML DB RESOURCE_VIEW和PATH_VIEW概述</h3>
               <div>
                  <p>公共视图<code class="codeph">RESOURCE_VIEW</code>和<code class="codeph">PATH_VIEW</code>提供了一种使用SQL访问存储在Oracle XML DB Repository中的数据的机制。您可以使用这些视图使用Internet协议（如FTP和WebDAV）或使用应用程序接口（API）访问存储库中存储的数据。
                  </p>
                  <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4__I1029352">图24-1</a>说明了这一点。
                  </p>
                  <p><code class="codeph">RESOURCE_VIEW</code>由<code class="codeph">RESOURCE_VIEW</code>组成，资源本身是一个<code class="codeph">XMLType</code>实例，它包含资源的名称，ACL以及静态或可扩展的属性。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果资源的内容是存储在<code class="codeph">XMLType</code>表或视图中某处的XML数据，则<code class="codeph">RESOURCE_VIEW</code>指向存储内容的<code class="codeph">XMLType</code>行。
                        </p>
                     </li>
                     <li>
                        <p>如果资源的内容不是XML数据，则<code class="codeph">RESOURCE_VIEW</code>将内容存储为LOB。</p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4__GUID-0BC98FEE-9A53-42EA-971C-B99CABA08CC2">
                     <p class="notep1">注意：</p>
                     <p>从Oracle Database Release 11.2.0.1.0开始，作为LOB存储的存储库内容使用SecureFiles LOB存储。在此之前，它使用了BasicFiles LOB存储。</p>
                  </div>
                  <p>使用分层存储库索引维护和遍历文件夹之间的父子关系。文本索引可用于搜索资源的属性，而名称和ACL上的内部B树索引可加快对资源<code class="codeph">XMLType</code>数据的这些属性的访问。
                  </p>
                  <p><code class="codeph">RESOURCE_VIEW</code>和<code class="codeph">PATH_VIEW</code>以及PL / SQL包<code class="codeph">DBMS_XDB_REPOS</code>提供对通过API提供的Oracle XML DB和DML功能的所有基于查询的访问。</p>
                  <p><code class="codeph">RESOURCE_VIEW</code>的基表是<code class="codeph">XDB.XDB$RESOURCE</code> 。仅使用<code class="codeph">RESOURCE_VIEW</code>或PL / SQL包<code class="codeph">DBMS_XDB_REPOS</code>访问此表。</p>
                  <div class="figure" id="GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4__I1029352">
                     <p class="titleinfigure">图24-1使用RESOURCE_VIEW和PATH_VIEW访问存储库资源</p><img src="img/adxdb034.gif" width="376" alt="下面是图24-1的描述" title="下面是图24-1的描述" longdesc="img_text/adxdb034.html"><br><a href="img_text/adxdb034.html">“图24-1使用RESOURCE_VIEW和PATH_VIEW访问存储库资源”的说明</a></div>
                  <!-- class="figure" -->
                  <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4__I1027962">图24-2</a>说明了<code class="codeph">RESOURCE_VIEW</code>和<code class="codeph">PATH_VIEW</code>的结构。</p>
                  <div class="figure" id="GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4__I1027962">
                     <p class="titleinfigure">图24-2 RESOURCE_VIEW和PATH_VIEW结构</p><img src="img/adxdb032.gif" width="447" alt="下面是图24-2的描述" title="下面是图24-2的描述" longdesc="img_text/adxdb032.html"><br><a href="img_text/adxdb032.html">“图24-2 RESOURCE_VIEW和PATH_VIEW结构”的描述</a></div>
                  <!-- class="figure" -->
                  <div class="infoboxnote" id="GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4__GUID-199770A4-29F2-40C0-A188-98374FF84270">
                     <p class="notep1">注意：</p>
                     <p><code class="codeph">RESOURCE_VIEW</code>和<code class="codeph">PATH_VIEW</code>都不包含<span class="italic">根</span>文件夹（ <code class="codeph">/</code> ）资源。包括所有其他存储库资源。
                     </p>
                  </div>
                  <p><code class="codeph">RESOURCE_VIEW</code>中的路径是可用于访问给定资源的任意路径之一。Oracle SQL函数<code class="codeph">under_path</code>允许应用程序搜索特定文件夹中包含（递归）的资源，获取资源深度等。<code class="codeph">PATH_VIEW</code>和<code class="codeph">RESOURCE_VIEW</code>列中的每一行都是数据类型<code class="codeph">XMLType</code> 。存储库视图上的DML可用于插入，重命名，删除和更新资源属性和内容。程序化API必须用于某些操作，例如创建指向现有资源的链接。
                  </p>
                  <p>在路径<code class="codeph">ANY_PATH</code>所述的柱<code class="codeph">RESOURCE_VIEW</code>和<code class="codeph">PATH</code>在列<code class="codeph">PATH_VIEW</code>是<span class="italic">绝对</span>路径：它们开始于根目录中。
                  </p>
                  <div class="infoboxnote" id="GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4__GUID-A81563F3-96FC-4B37-A6A4-937550D80CD8">
                     <p class="notep1">注意：</p>
                     <p>使用Oracle SQL函数<code class="codeph">equals_path</code>测试资源路径是否相等： <code class="codeph">equals_path('/my/path') = 1</code> 。<span class="italic">不要</span>测试<code class="codeph">ANY_PATH</code>平等对抗的绝对路径： <code class="codeph">ANY_PATH = '/my/path'</code> 。
                     </p>
                  </div>
                  <p><code class="codeph">path</code>函数返回的<code class="codeph">path</code>是函数<code class="codeph">under_path</code>指定的路径名下的<span class="italic">相对</span>路径。例如，如果路径名<code class="codeph">/a/b/c</code>和<code class="codeph">/a/d</code>分别引用了两个资源，则检索文件夹<code class="codeph">/a</code>下的<code class="codeph">path</code>表达式将返回相对路径<code class="codeph">b/c</code>和<code class="codeph">d</code> 。
                  </p>
                  <p>当存在指向同一资源的多个硬链接时，仅返回函数<code class="codeph">under_path</code>指定的路径名下的路径。如果<code class="codeph">/a/b/c</code> ， <code class="codeph">/a/b/d</code>和<code class="codeph">/a/e</code>都是指向同一资源的链接，则在<code class="codeph">PATH_VIEW</code>上检索<code class="codeph">/a/b</code>下的所有路径的查询仅返回<code class="codeph">/a/b/c</code>和<code class="codeph">/a/b/d</code> ，不是<code class="codeph">/a/e</code> 。
                  </p>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-7B998BF8-1450-4C70-8C64-D9303C405F50">RESOURCE_VIEW定义和结构</a><br>公共视图<code class="codeph">RESOURCE_VIEW</code>为Oracle XML DB存储库中的每个资源包含一行（根文件夹资源除外）。
                     </li>
                     <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-B3D3011A-9117-452D-B6E9-32B1C29AA612">PATH_VIEW定义和结构</a><br>公共视图<code class="codeph">PATH_VIEW</code>为访问Oracle XML DB存储库中的资源的每个唯一路径包含一行（根文件夹资源除外）。每个资源可以有多个路径，也称为<strong class="term">链接</strong> 。
                     </li>
                     <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-84FC63E5-BC2C-41CF-A9CA-F59C44092610">RESOURCE_VIEW和PATH_VIEW之间的区别</a><br><code class="codeph">PATH_VIEW</code>包括特定资源的<span class="italic">所有</span>路径名。<code class="codeph">RESOURCE_VIEW</code>包含<code class="codeph">RESOURCE_VIEW</code>的可能路径名<span class="italic">之一</span> 。<code class="codeph">PATH_VIEW</code>还包括链接属性。为了获得更好的性能，请尽可能使用<code class="codeph">RESOURCE_VIEW</code> ，而不是<code class="codeph">PATH_VIEW</code> 。
                     </li>
                     <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-EDDF8821-F46C-405F-BD10-1EE7A2A2A7B6">您可以使用UNDER_PATH和EQUALS_PATH执行的操作</a><br>您可以使用Oracle SQL函数<code class="codeph">under_path</code>和<code class="codeph">equals_path</code>来获取资源或其OID;创建，删除或更新资源;或列出与路径名对应的目录。
                     </li>
                  </ul>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="how-to-use-XML-DB.html#GUID-757B4470-851B-47B7-AB78-81F47ECE5398" title="介绍了使用Oracle XML DB的各种方法的概述。">如何使用Oracle XML DB概述</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" title="预定义的公共视图RESOURCE_VIEW和PATH_VIEW提供对Oracle XML DB存储库数据的访问。您可以使用Oracle SQL函数under_path和equals_path根据其路径名查询资源，并使用函数path和depth来返回资源路径名和深度。">使用RESOURCE_VIEW和PATH_VIEW的存储库访问</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5391"></a><a id="ADXDB5390"></a><div class="props_rev_3"><a id="GUID-7B998BF8-1450-4C70-8C64-D9303C405F50" name="GUID-7B998BF8-1450-4C70-8C64-D9303C405F50"></a><h4 id="ADXDB-GUID-7B998BF8-1450-4C70-8C64-D9303C405F50" class="sect4"><span class="enumeration_section">24.1.1</span> RESOURCE_VIEW定义和结构</h4>
                  <div>
                     <p>公共视图<code class="codeph">RESOURCE_VIEW</code>为Oracle XML DB存储库中的每个资源包含一行（根文件夹资源除外）。
                     </p>
                     <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-7B998BF8-1450-4C70-8C64-D9303C405F50__CHDBBIBF" title="该表描述了RESOURCE_VIEW的结构。">表24-1</a>描述了<code class="codeph">RESOURCE_VIEW</code>的结构。</p>
                     <div class="tblformal" id="GUID-7B998BF8-1450-4C70-8C64-D9303C405F50__CHDBBIBF">
                        <p class="titleintable">表24-1 RESOURCE_VIEW的结构</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="RESOURCE_VIEW的结构" width="100%" border="1" summary="This table describes the structure of RESOURCE_VIEW." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="14%" id="d121756e594">柱</th>
                                 <th align="left" valign="bottom" width="14%" id="d121756e597">数据类型</th>
                                 <th align="left" valign="bottom" width="72%" id="d121756e600">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d121756e605" headers="d121756e594 ">
                                    <p><code class="codeph">RES</code></p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d121756e605 d121756e597 ">
                                    <p><code class="codeph">的XMLType</code></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d121756e605 d121756e600 ">
                                    <p>存储库中的资源（根文件夹资源除外）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d121756e617" headers="d121756e594 ">
                                    <p><code class="codeph">ANY_PATH</code></p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d121756e617 d121756e597 ">
                                    <p><code class="codeph">VARCHAR2</code></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d121756e617 d121756e600 ">
                                    <p>资源的（绝对）路径</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d121756e629" headers="d121756e594 ">
                                    <p><code class="codeph">RESID</code></p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d121756e629 d121756e597 ">
                                    <p><code class="codeph">生的</code></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d121756e629 d121756e600 ">
                                    <p>资源OID，它是资源的唯一句柄</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4" title="公共视图RESOURCE_VIEW和PATH_VIEW提供了一种使用SQL访问存储在Oracle XML DB Repository中的数据的机制。您可以使用这些视图使用Internet协议（如FTP和WebDAV）或使用应用程序接口（API）访问存储库中存储的数据。">Oracle XML DB RESOURCE_VIEW和PATH_VIEW概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5393"></a><a id="ADXDB5392"></a><div class="props_rev_3"><a id="GUID-B3D3011A-9117-452D-B6E9-32B1C29AA612" name="GUID-B3D3011A-9117-452D-B6E9-32B1C29AA612"></a><h4 id="ADXDB-GUID-B3D3011A-9117-452D-B6E9-32B1C29AA612" class="sect4"><span class="enumeration_section">24.1.2</span> PATH_VIEW定义和结构</h4>
                  <div>
                     <p>公共视图<code class="codeph">PATH_VIEW</code>为访问Oracle XML DB存储库中的资源的每个唯一路径包含一行（根文件夹资源除外）。每个资源可以有多个路径，也称为<strong class="term">链接</strong> 。
                     </p>
                     <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-B3D3011A-9117-452D-B6E9-32B1C29AA612__CHDICFHF" title="该表描述了PATH_VIEW的结构。">表24-2</a>描述了<code class="codeph">PATH_VIEW</code>的结构。</p>
                     <div class="tblformal" id="GUID-B3D3011A-9117-452D-B6E9-32B1C29AA612__CHDICFHF">
                        <p class="titleintable">表24-2 PATH_VIEW的结构</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="PATH_VIEW的结构" width="100%" border="1" summary="This table describes the structure of PATH_VIEW. " frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="14%" id="d121756e707">柱</th>
                                 <th align="left" valign="bottom" width="14%" id="d121756e710">数据类型</th>
                                 <th align="left" valign="bottom" width="72%" id="d121756e713">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d121756e718" headers="d121756e707 ">
                                    <p><code class="codeph">路径</code></p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d121756e718 d121756e710 ">
                                    <p><code class="codeph">VARCHAR2</code></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d121756e718 d121756e713 ">
                                    <p>存储库资源<code class="codeph">RES</code>的（绝对）路径</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d121756e732" headers="d121756e707 ">
                                    <p><code class="codeph">RES</code></p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d121756e732 d121756e710 ">
                                    <p><code class="codeph">的XMLType</code></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d121756e732 d121756e713 ">
                                    <p>列<code class="codeph">PATH</code>引用的资源</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d121756e746" headers="d121756e707 ">
                                    <p><code class="codeph">链接</code></p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d121756e746 d121756e710 ">
                                    <p><code class="codeph">的XMLType</code></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d121756e746 d121756e713 ">
                                    <p>链接属性</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d121756e758" headers="d121756e707 ">
                                    <p><code class="codeph">RESID</code></p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d121756e758 d121756e710 ">
                                    <p><code class="codeph">生的</code></p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d121756e758 d121756e713 ">
                                    <p>资源OID</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4" title="公共视图RESOURCE_VIEW和PATH_VIEW提供了一种使用SQL访问存储在Oracle XML DB Repository中的数据的机制。您可以使用这些视图使用Internet协议（如FTP和WebDAV）或使用应用程序接口（API）访问存储库中存储的数据。">Oracle XML DB RESOURCE_VIEW和PATH_VIEW概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5396"></a><a id="ADXDB5395"></a><div class="props_rev_3"><a id="GUID-84FC63E5-BC2C-41CF-A9CA-F59C44092610" name="GUID-84FC63E5-BC2C-41CF-A9CA-F59C44092610"></a><h4 id="ADXDB-GUID-84FC63E5-BC2C-41CF-A9CA-F59C44092610" class="sect4"><span class="enumeration_section">24.1.3</span> RESOURCE_VIEW和PATH_VIEW之间的区别</h4>
                  <div>
                     <p><code class="codeph">PATH_VIEW</code>包括特定资源的<span class="italic">所有</span>路径名。<code class="codeph">RESOURCE_VIEW</code>包含<code class="codeph">RESOURCE_VIEW</code>的可能路径名<span class="italic">之一</span> 。<code class="codeph">PATH_VIEW</code>还包括链接属性。为了获得更好的性能，请尽可能使用<code class="codeph">RESOURCE_VIEW</code> ，而不是<code class="codeph">PATH_VIEW</code> 。
                     </p>
                     <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-84FC63E5-BC2C-41CF-A9CA-F59C44092610__I1027970">图24-3</a>说明了这种差异。
                     </p>
                     <p>由于许多Internet应用程序只需要一个URL来访问资源，因此<code class="codeph">RESOURCE_VIEW</code>广泛适用。
                     </p>
                     <p><code class="codeph">PATH_VIEW</code>包含<span class="italic">链接</span>属性和资源属性，而<code class="codeph">RESOURCE_VIEW</code>仅包含资源属性。
                     </p>
                     <p>因为它处理多个路径的信息， <code class="codeph">PATH_VIEW</code>访问可能会更慢。如果使用<code class="codeph">RESOURCE_VIEW</code>那么数据库可以利用只需要一个路径的事实;索引可以做更少的工作来确定所有可能的路径。
                     </p>
                     <div class="infoboxnote" id="GUID-84FC63E5-BC2C-41CF-A9CA-F59C44092610__GUID-DB1D1943-47A6-413B-B8D5-5C02780F22F2">
                        <p class="notep1">注意：</p>
                        <p>使用<code class="codeph">RESOURCE_VIEW</code> ，如果使用函数<code class="codeph">under_path</code>或<code class="codeph">equals_path</code>指定路径，则无论指定的路径是否是使用<code class="codeph">RESOURCE_VIEW</code>通常与该资源一起显示的任意路径，该函数都会查找<code class="codeph">RESOURCE_VIEW</code> 。</p>
                     </div>
                     <div class="figure" id="GUID-84FC63E5-BC2C-41CF-A9CA-F59C44092610__I1027970">
                        <p class="titleinfigure">图24-3 RESOURCE_VIEW和PATH_VIEW说明</p><img src="img/adxdb018.gif" width="571" alt="下面是图24-3的描述" title="下面是图24-3的描述" longdesc="img_text/adxdb018.html"><br><a href="img_text/adxdb018.html">“图24-3 RESOURCE_VIEW和PATH_VIEW说明”的描述</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4" title="公共视图RESOURCE_VIEW和PATH_VIEW提供了一种使用SQL访问存储在Oracle XML DB Repository中的数据的机制。您可以使用这些视图使用Internet协议（如FTP和WebDAV）或使用应用程序接口（API）访问存储库中存储的数据。">Oracle XML DB RESOURCE_VIEW和PATH_VIEW概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5397"></a><div class="props_rev_3"><a id="GUID-EDDF8821-F46C-405F-BD10-1EE7A2A2A7B6" name="GUID-EDDF8821-F46C-405F-BD10-1EE7A2A2A7B6"></a><h4 id="ADXDB-GUID-EDDF8821-F46C-405F-BD10-1EE7A2A2A7B6" class="sect4"><span class="enumeration_section">24.1.4</span>可以使用UNDER_PATH和EQUALS_PATH执行的操作</h4>
                  <div>
                     <p>您可以使用Oracle SQL函数<code class="codeph">under_path</code>和<code class="codeph">equals_path</code>来获取资源或其OID;创建，删除或更新资源;或列出与路径名对应的目录。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>给定路径名称，您可以：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>获取资源或其OID</p>
                              </li>
                              <li>
                                 <p>列出路径名称给出的目录</p>
                              </li>
                              <li>
                                 <p>创建资源</p>
                              </li>
                              <li>
                                 <p>删除资源</p>
                              </li>
                              <li>
                                 <p>更新资源</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>给定使用<code class="codeph">under_path</code>或其他SQL函数的条件，您可以：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>更新资源</p>
                              </li>
                              <li>
                                 <p>删除资源</p>
                              </li>
                              <li>
                                 <p>获取资源或他们的OID</p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-14598A45-6DFA-4FB9-AB2E-CC5B23C6F6D4" title="公共视图RESOURCE_VIEW和PATH_VIEW提供了一种使用SQL访问存储在Oracle XML DB Repository中的数据的机制。您可以使用这些视图使用Internet协议（如FTP和WebDAV）或使用应用程序接口（API）访问存储库中存储的数据。">Oracle XML DB RESOURCE_VIEW和PATH_VIEW概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5398"></a><div class="props_rev_3"><a id="GUID-4570E0E5-53B8-468C-9589-35EDF0C41B19" name="GUID-4570E0E5-53B8-468C-9589-35EDF0C41B19"></a><h3 id="ADXDB-GUID-4570E0E5-53B8-468C-9589-35EDF0C41B19" class="sect3"><span class="enumeration_section">24.2</span>使用RESOURCE_VIEW和PATH_VIEW的Oracle SQL函数</h3>
               <div>
                  <p>与公共视图<code class="codeph">RESOURCE_VIEW</code>和<code class="codeph">PATH_VIEW</code>一起使用的Oracle SQL函数包括<code class="codeph">under_path</code> ， <code class="codeph">equals_path</code> ， <code class="codeph">path</code>和<code class="codeph">depth</code> 。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-F1E3092D-6FAF-499C-A9DB-AB99E1C0C1AD">UNDER_PATH SQL函数</a><br>Oracle SQL函数<code class="codeph">under_path</code>使用Oracle XML DB Repository的分层索引来返回特定路径下所有硬链接的路径。此索引旨在加速遍历路径时的访问（最常见的用法）。
                     </li>
                     <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BA4119B2-0266-4161-A783-D919AB32A588">EQUALS_PATH SQL函数</a><br>使用Oracle SQL函数<code class="codeph">equals_path</code>查找具有给定路径名的资源。它在功能上等同于深度限制为零的<code class="codeph">under_path</code> 。
                     </li>
                     <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-0435D4ED-14A7-4359-88C4-7639CD33FD9F">PATH SQL函数</a><br>Oracle SQL函数<code class="codeph">path</code>将给定<span class="italic"><code class="codeph">pathname</code></span>参数下的资源的相对路径名返回到函数<code class="codeph">under_path</code>或<code class="codeph">equal_path</code> 。
                     </li>
                     <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-5DAEAAC7-BDFF-4773-9A29-6BBE9039AC1C">深度SQL函数</a><br>Oracle SQL函数<code class="codeph">depth</code>返回指定起始路径下资源的文件夹深度。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" title="预定义的公共视图RESOURCE_VIEW和PATH_VIEW提供对Oracle XML DB存储库数据的访问。您可以使用Oracle SQL函数under_path和equals_path根据其路径名查询资源，并使用函数path和depth来返回资源路径名和深度。">使用RESOURCE_VIEW和PATH_VIEW的存储库访问</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5400"></a><a id="ADXDB5401"></a><a id="ADXDB5399"></a><div class="props_rev_3"><a id="GUID-F1E3092D-6FAF-499C-A9DB-AB99E1C0C1AD" name="GUID-F1E3092D-6FAF-499C-A9DB-AB99E1C0C1AD"></a><h4 id="ADXDB-GUID-F1E3092D-6FAF-499C-A9DB-AB99E1C0C1AD" class="sect4"><span class="enumeration_section">24.2.1</span> UNDER_PATH SQL函数</h4>
                  <div>
                     <p>Oracle SQL函数<code class="codeph">under_path</code>使用Oracle XML DB Repository的分层索引来返回特定路径下所有硬链接的路径。此索引旨在加速遍历路径时的访问（最常见的用法）。
                     </p>
                     <div class="section">
                        <p>但是，如果查询谓词的其他部分非常具有选择性，那么可以选择<code class="codeph">under_path</code>的功能实现来回溯存储库。这可以更有效，因为必须遍历更少的链接。<a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-F1E3092D-6FAF-499C-A9DB-AB99E1C0C1AD__BABIHCGH">图24-4</a>显示了<code class="codeph">under_path</code>语法。
                        </p>
                        <div class="figure" id="GUID-F1E3092D-6FAF-499C-A9DB-AB99E1C0C1AD__BABIHCGH">
                           <p class="titleinfigure">图24-4 UNDER_PATH语法</p><img src="img/under_path_condition.gif" width="527" alt="下面是图24-4的描述" title="下面是图24-4的描述" longdesc="img_text/under_path_condition.html"><br><a href="img_text/under_path_condition.html">“图24-4 UNDER_PATH语法”的说明</a></div>
                        <!-- class="figure" -->
                        <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-F1E3092D-6FAF-499C-A9DB-AB99E1C0C1AD__G1031254" title="此表描述了RESOURCE_VIEW和PATH_VIEW的UNDER_PATH运算符语法。">表24-3</a>详细介绍了Oracle SQL函数<code class="codeph">under_path</code>的签名。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-F1E3092D-6FAF-499C-A9DB-AB99E1C0C1AD__G1031254">
                        <p class="titleintable">表24-3 UNDER_PATH SQL函数签名</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="UNDER_PATH SQL函数签名" width="100%" border="1" summary="This table describes the UNDER_PATH operator syntax for RESOURCE_VIEW and PATH_VIEW." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="35%" id="d121756e1176">句法</th>
                                 <th align="left" valign="bottom" width="65%" id="d121756e1179">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d121756e1184" headers="d121756e1176 "><pre class="oac_no_warn" dir="ltr">under_path（ <span class="italic">resource_column</span> ， <span class="italic">pathname</span> ）;</pre></td>
                                 <td align="left" valign="top" width="65%" headers="d121756e1184 d121756e1179 ">
                                    <p>确定资源是否在指定路径下。</p>
                                    <p>参数：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><span class="italic"><code class="codeph">resource_column</code></span> - <code class="codeph">PATH_VIEW</code>或<code class="codeph">RESOURCE_VIEW.</code> <code class="codeph">RESOURCE</code>列的列名或列别名<code class="codeph">RESOURCE_VIEW.</code></p>
                                       </li>
                                       <li>
                                          <p><span class="italic"><code class="codeph">pathname</code></span> - 要解析的路径名。
                                          </p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d121756e1220" headers="d121756e1176 "><pre class="oac_no_warn" dir="ltr">under_path（ <span class="italic">resource_column</span> ， <span class="italic">depth</span> ， <span class="italic">pathname</span> ）;</pre></td>
                                 <td align="left" valign="top" width="65%" headers="d121756e1220 d121756e1179 ">
                                    <p>确定资源是否在指定路径下，使用depth参数限制要搜索的级别数。</p>
                                    <p>参数：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><span class="italic"><code class="codeph">resource_column</code></span> - <code class="codeph">PATH_VIEW</code>或<code class="codeph">RESOURCE_VIEW</code> <code class="codeph">RESOURCE</code>列的列名或列别名<code class="codeph">.</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">depth</code> - 要搜索的最大深度。非负整数。
                                          </p>
                                       </li>
                                       <li>
                                          <p><span class="italic"><code class="codeph">pathname</code></span> - 要解析的路径名。
                                          </p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d121756e1266" headers="d121756e1176 "><pre class="oac_no_warn" dir="ltr">under_path（ <span class="italic">resource_column</span> ， <span class="italic">pathname</span> ， <span class="italic">correlation</span> ）;</pre></td>
                                 <td align="left" valign="top" width="65%" headers="d121756e1266 d121756e1179 ">
                                    <p>确定资源是否在指定路径下，并具有相关SQL函数的相关参数。</p>
                                    <p>参数：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><span class="italic"><code class="codeph">resource_column</code></span> - <code class="codeph">PATH_VIEW</code>或<code class="codeph">RESOURCE_VIEW</code> <code class="codeph">RESOURCE</code>列的列名或列别名<code class="codeph">.</code></p>
                                       </li>
                                       <li>
                                          <p><span class="italic"><code class="codeph">pathname</code></span> - 要解析的路径名。
                                          </p>
                                       </li>
                                       <li>
                                          <p><span class="italic"><code class="codeph">correlation</code></span> - 一个整数，可用于将<code class="codeph">under_path</code>与相关的SQL函数（ <code class="codeph">path</code>和<code class="codeph">depth</code> ）相关联。
                                          </p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="35%" id="d121756e1322" headers="d121756e1176 "><pre class="oac_no_warn" dir="ltr">under_path（ <span class="italic">resource_column</span> ， <span class="italic">depth</span> ， <span class="italic">pathname</span> ， <span class="italic">correlation</span> ）;</pre></td>
                                 <td align="left" valign="top" width="65%" headers="d121756e1322 d121756e1179 ">
                                    <p>确定资源是否在具有depth参数的指定路径下，以限制要搜索的级别数，以及相关SQL函数的相关参数。</p>
                                    <p>参数：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><span class="italic"><code class="codeph">resource_column</code></span> - <code class="codeph">PATH_VIEW</code>或<code class="codeph">RESOURCE_VIEW</code> <code class="codeph">RESOURCE</code>列的列名或列别名。</p>
                                       </li>
                                       <li>
                                          <p><span class="italic"><code class="codeph">depth</code></span> - 要搜索的最大深度。非负整数。
                                          </p>
                                       </li>
                                       <li>
                                          <p><span class="italic"><code class="codeph">pathname</code></span> - 要解析的路径名。
                                          </p>
                                       </li>
                                       <li>
                                          <p><span class="italic"><code class="codeph">correlation</code></span> - 一个整数，可用于将<code class="codeph">under_path</code>与相关的SQL函数（ <code class="codeph">path</code>和<code class="codeph">depth</code> ）相关联。
                                          </p>
                                       </li>
                                    </ul>
                                    <p>对于要返回的资源，只有一个资源的可访问路径必须位于<span class="italic"><code class="codeph">pathname</code></span>参数下。如果参数<span class="italic"><code class="codeph">pathname</code></span>下没有这样的路径，则返回<code class="codeph">NULL</code>值。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <div class="infoboxnote" id="GUID-F1E3092D-6FAF-499C-A9DB-AB99E1C0C1AD__GUID-04B0A082-1583-4DE8-BC9C-029EFE9D5FE7">
                           <p class="notep1">注意：</p>
                           <p>函数<code class="codeph">under_path</code>不遵循弱链接，因为这样的遍历可能导致循环。<code class="codeph">under_path</code>弱链接参数已正确解析，但在遍历该路径下的资源时不会遵循弱链接。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-4570E0E5-53B8-468C-9589-35EDF0C41B19" title="与公共视图RESOURCE_VIEW和PATH_VIEW一起使用的Oracle SQL函数包括under_path，equals_path，path和depth。">使用RESOURCE_VIEW和PATH_VIEW的Oracle SQL函数</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5403"></a><a id="ADXDB5402"></a><div class="props_rev_3"><a id="GUID-BA4119B2-0266-4161-A783-D919AB32A588" name="GUID-BA4119B2-0266-4161-A783-D919AB32A588"></a><h4 id="ADXDB-GUID-BA4119B2-0266-4161-A783-D919AB32A588" class="sect4"><span class="enumeration_section">24.2.2</span> EQUALS_PATH SQL函数</h4>
                  <div>
                     <p>使用Oracle SQL函数<code class="codeph">equals_path</code>查找具有给定路径名的资源。它在功能上等同于深度限制为零的<code class="codeph">under_path</code> 。
                     </p>
                     <div class="section"><pre class="pre codeblock"><code>equals_path（resource_column，pathname）;</code></pre><p>哪里：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">resource_column</code>是<code class="codeph">PATH_VIEW</code>或<code class="codeph">RESOURCE_VIEW.</code> <code class="codeph">RESOURCE</code>列的列名或列别名<code class="codeph">RESOURCE_VIEW.</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">pathname</code>是要解析的（绝对）路径名。这可以包含硬或弱资源链接的组件。
                              </p>
                           </li>
                        </ul>
                        <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BA4119B2-0266-4161-A783-D919AB32A588__BABJBIAI">图24-5</a>说明了完整的<code class="codeph">equals_path</code>语法。
                        </p>
                        <div class="figure" id="GUID-BA4119B2-0266-4161-A783-D919AB32A588__BABJBIAI">
                           <p class="titleinfigure">图24-5 EQUALS_PATH语法</p><img src="img/equals_path_condition.gif" width="431" alt="下面是图24-5的描述" title="下面是图24-5的描述" longdesc="img_text/equals_path_condition.html"><br><a href="img_text/equals_path_condition.html">“图24-5 EQUALS_PATH语法”的说明</a></div>
                        <!-- class="figure" -->
                        <div class="infoboxnote" id="GUID-BA4119B2-0266-4161-A783-D919AB32A588__GUID-4179739A-1BB0-4327-9B73-3788EE25CA9E">
                           <p class="notep1">注意：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>使用Oracle SQL函数<code class="codeph">equals_path</code>测试资源路径是否相等： <code class="codeph">equals_path('/my/path') = 1</code> 。<span class="italic">不要</span>测试<code class="codeph">ANY_PATH</code>平等对抗的绝对路径： <code class="codeph">ANY_PATH = '/my/path'</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>使用绑定变量而不是硬编码字符串与<code class="codeph">equals_path</code> 。
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-4570E0E5-53B8-468C-9589-35EDF0C41B19" title="与公共视图RESOURCE_VIEW和PATH_VIEW一起使用的Oracle SQL函数包括under_path，equals_path，path和depth。">使用RESOURCE_VIEW和PATH_VIEW的Oracle SQL函数</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5405"></a><a id="ADXDB5404"></a><div class="props_rev_3"><a id="GUID-0435D4ED-14A7-4359-88C4-7639CD33FD9F" name="GUID-0435D4ED-14A7-4359-88C4-7639CD33FD9F"></a><h4 id="ADXDB-GUID-0435D4ED-14A7-4359-88C4-7639CD33FD9F" class="sect4"><span class="enumeration_section">24.2.3</span>路径SQL函数</h4>
                  <div>
                     <p>Oracle SQL函数<code class="codeph">path</code>将给定<span class="italic"><code class="codeph">pathname</code></span>参数下的资源的相对路径名返回到函数<code class="codeph">under_path</code>或<code class="codeph">equal_path</code> 。
                     </p>
                     <div class="section">
                        <p><code class="codeph">RESOURCE_VIEW</code>的path列始终包含<code class="codeph">RESOURCE_VIEW</code>的绝对路径。函数<code class="codeph">path</code>的语法是：</p><pre class="pre codeblock"><code>路径（ <span class="italic">相关</span> ）;</code></pre><p>哪里：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="italic"><code class="codeph">correlation</code></span>是一个整数，可用于将<code class="codeph">path</code>与under_path或<code class="codeph">equals_path</code>相关<code class="codeph">equals_path</code> 。
                              </p>
                           </li>
                        </ul>
                        <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-0435D4ED-14A7-4359-88C4-7639CD33FD9F__BABBDBAB">图24-6</a>说明了函数<code class="codeph">path</code>的语法。
                        </p>
                        <div class="figure" id="GUID-0435D4ED-14A7-4359-88C4-7639CD33FD9F__BABBDBAB">
                           <p class="titleinfigure">图24-6 PATH语法</p><img src="img/path.gif" width="197" alt="下面是图24-6的描述" title="下面是图24-6的描述" longdesc="img_text/path.html"><br><a href="img_text/path.html">“图24-6 PATH语法”的描述</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-4570E0E5-53B8-468C-9589-35EDF0C41B19" title="与公共视图RESOURCE_VIEW和PATH_VIEW一起使用的Oracle SQL函数包括under_path，equals_path，path和depth。">使用RESOURCE_VIEW和PATH_VIEW的Oracle SQL函数</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5406"></a><div class="props_rev_3"><a id="GUID-5DAEAAC7-BDFF-4773-9A29-6BBE9039AC1C" name="GUID-5DAEAAC7-BDFF-4773-9A29-6BBE9039AC1C"></a><h4 id="ADXDB-GUID-5DAEAAC7-BDFF-4773-9A29-6BBE9039AC1C" class="sect4"><span class="enumeration_section">24.2.4</span> DEPTH SQL函数</h4>
                  <div>
                     <p>Oracle SQL函数<code class="codeph">depth</code>返回指定起始路径下资源的文件夹深度。
                     </p>
                     <div class="section"><pre class="pre codeblock"><code>深度（ <span class="italic">相关</span> ）;</code></pre><p>哪里：</p>
                        <p><span class="italic"><code class="codeph">correlation</code></span>是一个整数，可用于将<code class="codeph">depth</code>与带有under_path或<code class="codeph">equals_path</code> <code class="codeph">path</code>相关<code class="codeph">equals_path</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-4570E0E5-53B8-468C-9589-35EDF0C41B19" title="与公共视图RESOURCE_VIEW和PATH_VIEW一起使用的Oracle SQL函数包括under_path，equals_path，path和depth。">使用RESOURCE_VIEW和PATH_VIEW的Oracle SQL函数</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5409"></a><a id="ADXDB5410"></a><a id="ADXDB5411"></a><a id="ADXDB5412"></a><a id="ADXDB5413"></a><a id="ADXDB5414"></a><a id="ADXDB5415"></a><a id="ADXDB5416"></a><a id="ADXDB5417"></a><a id="ADXDB5418"></a><a id="ADXDB5419"></a><a id="ADXDB5420"></a><a id="ADXDB5421"></a><a id="ADXDB5422"></a><a id="ADXDB5408"></a><div class="props_rev_3"><a id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A" name="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A"></a><h3 id="ADXDB-GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A" class="sect3"><span class="enumeration_section">24.3</span>访问存储库数据路径，资源和链接：示例</h3>
               <div>
                  <p>此处的示例说明了如何访问Oracle XML DB Repository路径，资源和链接属性。</p>
                  <div class="section">
                     <p>前几个示例使用以下路径指定的资源：</p><pre class="pre codeblock"><code>/ a / b / c / a / b / c / d / a / e / c / a / e / c / d</code></pre><p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__CHDFJCAJ">例24-1</a>使用Oracle SQL函数<code class="codeph">path</code>检索path <code class="codeph">/a/b</code>下的<span class="italic">相对</span>路径。
                     </p>
                     <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__CHDGBEFF">例24-2</a>使用<code class="codeph">ANY_PATH</code>检索路径<code class="codeph">/a/b</code>下的<span class="italic">绝对</span>路径。
                     </p>
                     <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__CJAGAEHJ">例24-3</a>与<a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__CHDGBEFF">例24-2</a>相同，只是测试<span class="italic">不是</span> -equals（ <code class="codeph">!=</code> ）而不是equals（ <code class="codeph">=</code> ）。<a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__CJAGAEHJ">例24-3中</a>的查询查找<span class="italic">存储库</span>中<span class="italic">不在</span> path <code class="codeph">/a/b</code>下的<span class="italic">所有路径</span> 。
                     </p>
                     <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__CIHJFIGD">例24-4分别</a>显示了存储库文件夹<code class="codeph">a/b</code>和<code class="codeph">/a/e</code>下的相对路径。表达式<code class="codeph">path(</code> <span class="bold"><code class="codeph">1</code></span> <code class="codeph">)</code>表示文件夹<code class="codeph">a/b</code>下的路径，因为它使用相同的相关数<span class="bold"><code class="codeph">1</code></span>作为表达式<code class="codeph">under_path(RES, '/a/b',</code> <span class="bold"><code class="codeph">1</code></span> <code class="codeph">)</code> ，它指定文件夹<code class="codeph">a/b</code> 。类似地， <code class="codeph">path(2)</code>和文件夹<code class="codeph">/a/e</code> 。表达式<code class="codeph">ANY_PATH</code>返回相应的绝对路径。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__CHDFJCAJ">
                     <p class="titleinexample">例24-1确定路径下的路径：相对</p><pre class="pre codeblock"><code>SELECT路径（ <span class="bold">1</span> ）FROM RESOURCE_VIEW WHERE under_path（RES，'/ a / b'， <span class="bold">1</span> ）= 1;</code></pre><pre class="oac_no_warn" dir="ltr">路径（1）------- c c / d选择2行。
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__CHDGBEFF">
                     <p class="titleinexample">例24-2确定路径下的路径：绝对</p><pre class="pre codeblock"><code>SELECT <span class="bold">ANY_PATH</span> FROM RESOURCE_VIEW WHERE under_path（RES，'/ a / b'）= 1;</code></pre><pre class="oac_no_warn" dir="ltr">ANY_PATH -------- / a / b / c / a / b / c / d选择了2行。
</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__CJAGAEHJ">
                     <p class="titleinexample">示例24-3确定不在路径下的路径</p><pre class="pre codeblock"><code>SELECT ANY_PATH FROM RESOURCE_VIEW WHERE under_path（RES，'/ a / b'） <span class="bold">！=</span> 1</code></pre><pre class="pre codeblock"><code>ANY_PATH -------- / a / a / b / a / e / a / e / c / a / e / c / d / home / home / OE / home / OE / PurchaseOrders / home / OE / PurchaseOrders / 2002 / home / OE / PurchaseOrders / 2002 / Apr /home/OE/PurchaseOrders/2002/Apr/AMCEWEN-20021009123336171PDT.xml/home/OE/PurchaseOrders/2002/Apr/AMCEWEN-20021009123336271PDT.xml / home / OE / PurchaseOrders / 2002 / Apr / EABEL-20021009123336251PDT.xml <span class="bold">。 。 。</span>/ public / sys / sys / acls /sys/acls/all_all_acl.xml /sys/acls/all_owner_acl.xml /sys/acls/bootstrap_acl.xml /sys/acls/ro_all_acl.xml / sys / apps / sys / apps / plsql / sys / apps / plsql / xs /sys/apps/plsql/xs/netaclrc.xml /sys/apps/plsql/xs/netaclsc.xml /sys/databaseSummary.xml / sys / log / sys / schemas / sys / schemas / OE / sys / schemas / OE / localhost：8080 <span class="bold">。 。 。</span>选择326行。
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__CIHJFIGD">
                     <p class="titleinexample">示例24-4使用多个关联确定路径</p><pre class="pre codeblock"><code>SELECT ANY_PATH，path（ <span class="bold">1</span> ），path（ <span class="bold">2</span> ）FROM RESOURCE_VIEW WHERE under_path（RES，'/ a / b'， <span class="bold">1</span> ）= 1 OR under_path（RES，'/ a / e'， <span class="bold">2</span> ）= 1;</code></pre><pre class="pre codeblock"><code>ANY_PATH路径（ <span class="bold">1</span> ）路径（ <span class="bold">2</span> ）---------- -------- -------- / a / b / cc / a / b / c / dc / d / a / e / cc / a / e / c / dc / d选择4行。</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__GUID-AB641B8B-3ABD-4CAF-B50C-BA2BB2E58DEE">
                     <p class="titleinexample">示例24-5三个级别的资源的相对路径名称</p><pre class="pre codeblock"><code>SELECT路径（1）FROM RESOURCE_VIEW WHERE under_path（RES， <span class="bold">3</span> ，'/ sys'，1）= 1;</code></pre><p>这产生类似于以下的结果。</p><pre class="pre codeblock"><code>PATH（1）------- acls acls / all_all_acl.xml acls / all_owner_acl.xml acls / bootstrap_acl.xml acls / ro_all_acl.xml apps apps / plsql apps / plsql / xs databaseSummary.xml log schemas schemas / OE schemas / OE / localhost：8080模式/ PUBLIC模式/ PUBLIC / www.w3.org模式/ PUBLIC / xmlns.oracle.com选择了93行。</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__GUID-F78B2B79-9530-4572-BDD2-80C248A0ABD6">
                     <p class="titleinexample">示例24-6使用UNDER_PATH提取资源元数据</p><pre class="pre codeblock"><code>SELECT ANY_PATH，XMLQuery（'declare namespace ns =“http://xmlns.oracle.com/xdb/XDBResource.xsd”;;(：:) $ r / ns：资源'PASSING RES AS“r”返回内容）来自RESOURCE_VIEW WHERE under_path（RES，'/ sys'）= 1;</code></pre><p>这会产生类似于以下结果：</p><pre class="pre codeblock"><code>ANY_PATH -------- XMLQUERY（'DECLARENAMESPACENS =“HTTP://XMLNS.ORACLE.COM/XDB/XDBRESOURCE.XSD”;（::）$ ------------- -------------------------------------------------- ----------------- / sys / acls &lt;Resource xmlns =“http://xmlns.oracle.com/xdb/XDBResource.xsd”&gt; &lt;CreationDate&gt; 2008-06- 25T13：17：45.164662 &lt;/ CreationDate&gt; &lt;ModificationDate&gt; 2008-06-25T13：17：47.865163 &lt;/ ModificationDate&gt; &lt;DisplayName&gt; acls &lt;/ DisplayName&gt; &lt;Language&gt; en-US &lt;/ Language&gt; &lt;CharacterSet&gt; UTF-8 &lt; / CharacterSet&gt; &lt;ContentType&gt; application / octet-stream &lt;/ ContentType&gt; &lt;RefCount&gt; 1 &lt;/ RefCount&gt; &lt;/ Resource&gt; /sys/acls/all_all_acl.xml &lt;Resource xmlns =“http://xmlns.oracle.com/ xdb / XDBResource.xsd“&gt; &lt;CreationDate&gt; 2008-06-25T13：17：47.759806 &lt;/ CreationDate&gt; &lt;ModificationDate&gt; 2008-06-25T13：17：47.759806 &lt;/ ModificationDate&gt; &lt;DisplayName&gt; all_all_acl.xml &lt;/ DisplayName&gt; &lt;语言&gt; en-US &lt;/语言&gt; &lt;CharacterSet&gt; UTF-8 &lt;/ CharacterSet&gt; &lt;ContentType&gt; text / xml &lt;/ ContentType&gt; &lt;RefCount&gt; 1 &lt;/ RefCount&gt; &lt;/ Resource&gt; <span class="bold">。</span>选择41行。</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__GUID-DABD3140-6CE3-4D51-A760-1653001E2124">
                     <p class="titleinexample">例24-7在PATH_VIEW中使用PATH和DEPTH函数</p><pre class="pre codeblock"><code>SELECT路径（1）路径，深度（1） <span class="bold">深度</span> FROM PATH_VIEW WHERE under_path（RES，3，'/ sys'，1）= 1;</code></pre><p>这会产生类似于以下结果：</p><pre class="pre codeblock"><code>PATH DEPTH ---- ----- acls 1 acls / all_all_acl.xml 2 acls / all_owner_acl.xml 2 acls / bootstrap_acl.xml 2 acls / ro_all_acl.xml 2 apps 1 apps / plsql 2 apps / plsql / xs 3 databaseSummary .xml 1 log 1 schemas 1 schemas / OE 2 schemas / OE / localhost：8080 3 schemas / PUBLIC 2 schemas / PUBLIC / www.w3.org 3 schemas / PUBLIC / xmlns.oracle.com 3 <span class="bold">。 。 。</span></code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__GUID-71239F55-D92B-415C-BF4E-6F7326E294F8">
                     <p class="titleinexample">示例24-8从PATH_VIEW中提取链接和资源信息</p><pre class="pre codeblock"><code>SELECT PATH，XMLCast（XMLQuery（'declare namespace ns =“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) $ l / ns：LINK / ns：将'PASSING LINK <span class="bold">命名为</span> 'l “返回内容”AS VARCHAR2（256）），XMLCast（XMLQuery（'declare namespace ns =“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) $ l / ns：LINK / ns ： <span class="bold">ParentName'PASSING</span> LINK AS“l”返回内容）AS VARCHAR2（256）），XMLCast（XMLQuery（'declare namespace ns =“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) $ l / ns：LINK / ns： <span class="bold">ChildName'PASSING</span> LINK AS“l”返回内容）AS VARCHAR2（256）），XMLCast（XMLQuery（'declare namespace ns =“http://xmlns.oracle.com/xdb/XDBResource .xsd“;（：:) $ r / ns：资源/ ns： <span class="bold">DisplayName'PASSING</span> RES为”r“返回内容）AS VARCHAR2（128））FROM PATH_VIEW WHERE PATH LIKE'/ sys％';</code></pre><p>这会产生类似于以下结果：</p><pre class="pre codeblock"><code>/sys/schemas/PUBLIC/www.w3.org/1999/xlink.xsd xlink.xsd /sys/schemas/PUBLIC/www.w3.org/1999/xlink xlink /sys/schemas/PUBLIC/www.w3.org /1999/csx.xlink.xsd csx.xlink.xsd <span class="bold">。 。 。</span>选择了118行。</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__GUID-85811A9F-1BC2-44E2-801B-30B647BB9848">
                     <p class="titleinexample">示例24-9路径下某个深度的所有存储库路径</p><pre class="pre codeblock"><code>SELECT路径（1）FROM PATH_VIEW WHERE under_path（RES，3，'/ sys'，1）&gt; 0;</code></pre><p>这会产生类似于以下结果：</p><pre class="pre codeblock"><code>PATH（1）------- acls acls / all_all_acl.xml acls / all_owner_acl.xml acls / bootstrap_acl.xml acls / ro_all_acl.xml apps apps / plsql apps / plsql / xs databaseSummary.xml log principalals principalals / groups principals / users schemas schemas / PUBLIC schemas / PUBLIC / www.opengis.net schemas / PUBLIC / www.w3.org schemas / PUBLIC / xmlns.oracle.com工作空间<span class="bold">。 。 。</span>选择了43行。</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__GUID-E464CEE1-C930-48DC-90F3-76064C8DB1D9">
                     <p class="titleinexample">示例24-10使用EQUALS_PATH定位存储库路径</p><pre class="pre codeblock"><code>SELECT ANY_PATH FROM RESOURCE_VIEW WHERE equals_path（RES，'/ sys'）&gt; 0;</code></pre><pre class="pre codeblock"><code>选择ANY_PATH -------- / sys 1行。</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__GUID-8BBBEBF0-F941-4599-B7AE-DC9C88478E23">
                     <p class="titleinexample">示例24-11检索给定资源的RESID</p><pre class="pre codeblock"><code>SELECT RESID FROM RESOURCE_VIEW WHERE XMLCast（XMLQuery（'declare namespace ns =“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) $ r / ns：Resource / ns：DisplayName'PASSING RES AS “r”返回内容）AS VARCHAR2（128））='example';</code></pre><p>这会产生类似于以下结果：</p><pre class="pre codeblock"><code>RESID -------------------------------- F301A10152470252E030578CB00B432B选择1行。</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__GUID-37A15864-9D84-4C6D-B3D5-2145CDAF7DBA">
                     <p class="titleinexample">示例24-12从RESID获取资源的路径名</p><pre class="pre codeblock"><code>DECLARE resid_example RAW（16）; path VARCHAR2（4000）; BEGIN SELECT RESID进入DEPR_Eample来自RESOURCE_VIEW WHERE XMLCast（XMLQuery（'declare namespace ns =“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) $ r / ns：Resource / ns：DisplayName'通过RES作为“r”返回内容）作为VARCHAR2（128））='示例'; SELECT ANY_PATH INTO path FROM RESOURCE_VIEW WHERE RESID = resid_example; DBMS_OUTPUT.put_line（'路径是：'|| path）;结束; / <span class="bold">路径是：/ public / example</span> PL / SQL过程成功完成。</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__GUID-3DB3DE06-D72F-4C84-858C-DA2D59B7A3D3">
                     <p class="titleinexample">示例24-13给定路径下的文件夹</p><pre class="pre codeblock"><code>SELECT ANY_PATH FROM RESOURCE_VIEW WHERE under_path（RES，1，'/ sys'）= 1 AND XMLExists（'declare namespace ns =“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) $ r / ns：Resource [@Container = xs：boolean（“true”）]'PASSING RES AS“r”）;</code></pre><p>这会产生如下结果：</p><pre class="pre codeblock"><code>ANY_PATH -------- / sys / acls / sys / apps / sys / log / sys / schemas选择4行。</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BAED71B1-A65F-4119-BFF1-BD0E272EA44A__GUID-880F90AB-E95A-4A74-8527-649387BB9695">
                     <p class="titleinexample">示例24-14将RESOURCE_VIEW与XMLType表连接</p><pre class="pre codeblock"><code>SELECT ANY_PATH，XMLQuery（'$ p / PurchaseOrder / LineItems'PASSING po。OBJECT_VALUE作为“p”返回内容）来自purchaseorder po，RESOURCE_VIEW rv WHERE ref（po）= XMLCast（XMLQuery（'declare default element namespace“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（::: ）fn：data（/ Resource / XMLRef）'PASSING rv.RES RETURNING CONTENT）AS REF XMLType）AND ROWNUM &lt;2; ANY_PATH ------------------------------------------------- ------------------------------- XMLQUERY（'$ P / PURCHASEORDER / LINEITEMS'PASSINGPO.OBJECT_VALUEAS“P”RETURNINGCONTENT  - -------------------------------------------------- ---------------------------- /home/OE/PurchaseOrders/2002/Apr/AMCEWEN-20021009123336171PDT.xml &lt;LineItems&gt; &lt;LineItem ItemNumber =“1”&gt; &lt;描述&gt;推销员&lt;/ Description&gt; &lt;Part Id =“37429158920”UnitPrice =“39.95”Quantity =“2”/&gt; &lt;/ LineItem&gt; &lt;LineItem ItemNumber =“2”&gt; &lt;描述&gt;大不了麦当娜街&lt;/ Description&gt; &lt;Part Id =“37429155424”UnitPrice =“29.95”Quantity =“1”/&gt; &lt;/ LineItem&gt; &lt;LineItem ItemNumber =“3”&gt; &lt;Description&gt; Hearts and Minds &lt;/ Description&gt; &lt;Part Id =“37429166321”UnitPrice =“39.95”Quantity =“1”/&gt; &lt;/ LineItem&gt; <span class="bold">。</span>&lt;LineItem ItemNumber =“23”&gt; &lt;描述&gt;期望值&lt;/ Description&gt; &lt;Part Id =“37429128022”UnitPrice =“39.95”Quantity =“4”/&gt; &lt;/ LineItem&gt; &lt;/ LineItems&gt;选择1行。</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" title="预定义的公共视图RESOURCE_VIEW和PATH_VIEW提供对Oracle XML DB存储库数据的访问。您可以使用Oracle SQL函数under_path和equals_path根据其路径名查询资源，并使用函数path和depth来返回资源路径名和深度。">使用RESOURCE_VIEW和PATH_VIEW的存储库访问</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5424"></a><a id="ADXDB5425"></a><a id="ADXDB5423"></a><div class="props_rev_3"><a id="GUID-BCA4A460-7C38-46E4-A827-E3B3B20DDB1F" name="GUID-BCA4A460-7C38-46E4-A827-E3B3B20DDB1F"></a><h3 id="ADXDB-GUID-BCA4A460-7C38-46E4-A827-E3B3B20DDB1F" class="sect3"><span class="enumeration_section">24.4</span>删除存储库资源：示例</h3>
               <div>
                  <p>此处的示例说明了如何删除Oracle XML DB存储库资源和路径。</p>
                  <div class="section">
                     <p>如果仅删除<span class="italic">叶</span>资源，则可以使用<code class="codeph">DELETE FROM RESOURCE_VIEW</code> ，如<a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BCA4A460-7C38-46E4-A827-E3B3B20DDB1F__CJAJEJAB">例24-15所示</a> 。
                     </p>
                     <p>对于指向同一资源的多个链接，从<code class="codeph">RESOURCE_VIEW</code>删除将删除资源及其<span class="italic">所有</span>链接。从<code class="codeph">PATH_VIEW</code>删除仅删除具有指定路径的链接。
                     </p>
                     <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BCA4A460-7C38-46E4-A827-E3B3B20DDB1F__CJAJFFDA">例24-16</a>说明了这一点。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-BCA4A460-7C38-46E4-A827-E3B3B20DDB1F__CJAJEJAB">
                     <p class="titleinexample">示例24-15删除资源</p><pre class="pre codeblock"><code>DELETE FROM RESOURCE_VIEW WHERE equals_path（RES，'/ public / myfile'）= 1';</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-BCA4A460-7C38-46E4-A827-E3B3B20DDB1F__CJAJFFDA">
                     <p class="titleinexample">示例24-16删除资源链接</p>
                     <p>假设<code class="codeph">'/home/myfile1'</code>是<code class="codeph">'/public/myfile'</code>的链接：</p><pre class="pre codeblock"><code>CALL DBMS_XDB_REPOS.link（'/ public / myfile'，'/ home'，'myfile1'）;</code></pre><p>以下SQL DML语句删除在路径<code class="codeph">/home/myfile1</code>找到的Oracle XML DB存储库中的所有内容 - 链接和资源：</p><pre class="pre codeblock"><code>DELETE FROM <span class="bold">RESOURCE_VIEW</span> WHERE equals_path（RES，'/ home / myfile1'）= 1;</code></pre><p>以下DML语句<span class="italic">仅</span>删除路径为<code class="codeph">/home/file1</code> <span class="italic">的链接</span> ：</p><pre class="pre codeblock"><code>DELETE FROM <span class="bold">PATH_VIEW</span> WHERE equals_path（RES，'/ home / file1'）= 1;</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-2CDB9961-1ADE-4133-9253-3F34935F2DEB">删除非空文件夹资源</a><br>非空文件夹上不允许使用<code class="codeph">DELETE</code> DML运算符。如果您尝试删除非空文件夹，则必须先删除其内容，然后删除生成的空文件夹。必须以递归方式将此规则应用于目标文件夹中包含的任何文件夹。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" title="预定义的公共视图RESOURCE_VIEW和PATH_VIEW提供对Oracle XML DB存储库数据的访问。您可以使用Oracle SQL函数under_path和equals_path根据其路径名查询资源，并使用函数path和depth来返回资源路径名和深度。">使用RESOURCE_VIEW和PATH_VIEW的存储库访问</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5427"></a><a id="ADXDB5426"></a><div class="props_rev_3"><a id="GUID-2CDB9961-1ADE-4133-9253-3F34935F2DEB" name="GUID-2CDB9961-1ADE-4133-9253-3F34935F2DEB"></a><h4 id="ADXDB-GUID-2CDB9961-1ADE-4133-9253-3F34935F2DEB" class="sect4"><span class="enumeration_section">24.4.1</span>删除非空文件夹资源</h4>
                  <div>
                     <p>非空文件夹上不允许使用<code class="codeph">DELETE</code> DML运算符。如果您尝试删除非空文件夹，则必须先删除其内容，然后删除生成的空文件夹。必须以递归方式将此规则应用于目标文件夹中包含的任何文件夹。
                     </p>
                     <div class="section">
                        <p>但是，不保证从<code class="codeph">WHERE</code>子句返回的路径的顺序，并且<code class="codeph">DELETE</code>运算符不允许在其表表达式子句中使用<code class="codeph">ORDER BY</code>子句。您<span class="italic">不能</span>执行以下操作：</p><pre class="pre codeblock"><code>DELETE FROM（SELECT 1 FROM RESOURCE_VIEW WHERE under_path（RES，'/ public'，1）= 1 ORDER BY depth（1）DESCENDING）;</code></pre><p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-2CDB9961-1ADE-4133-9253-3F34935F2DEB__CHDJHEHB">例24-17</a>说明了如何删除非空文件夹：删除文件夹<code class="codeph">example</code>及其子文件夹<code class="codeph">example1</code> 。
                        </p>
                        <div class="infoboxnote" id="GUID-2CDB9961-1ADE-4133-9253-3F34935F2DEB__GUID-B4A18C04-7C18-40F2-B204-E4E75B1786A3">
                           <p class="notep1">注意：</p>
                           <p>与往常一样，在多行操作时，请注意避免并发事务的死锁。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-2CDB9961-1ADE-4133-9253-3F34935F2DEB__CHDJHEHB">
                        <p class="titleinexample">示例24-17删除非空文件夹</p><pre class="pre codeblock"><code>SELECT PATH FROM PATH_VIEW WHERE under_path（RES，'/ home / US1'）= 1;路径-------------------------- / home / US1 / example / home / US1 / example / example1选择了2行。DECLARE CURSOR c1 IS SELECT ANY_PATH p FROM RESOURCE_VIEW WHERE under_path（RES，'/ home / US1'，1）= 1 AND XMLExists（'declare namespace ns =“http://xmlns.oracle.com/xdb/XDBResource.xsd” ;（：:) $ r / ns：资源[ns：Owner =“US1”]'PASSING RES AS“r”）ORDER BY depth（1）DESC; del_stmt VARCHAR2（500）：='DELETE FROM RESOURCE_VIEW WHERE equals_path（RES，：1）= 1';开始为r1 IN c1循环执行立即del_stmt使用r1.p;结束循环;结束; / PL / SQL过程成功完成。SELECT PATH FROM PATH_VIEW WHERE under_path（RES，'/ home / US1'）= 1; <span class="bold">没有选择任何行</span></code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-BCA4A460-7C38-46E4-A827-E3B3B20DDB1F" title="此处的示例说明了如何删除Oracle XML DB存储库资源和路径。">删除存储库资源：示例</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB5429"></a><a id="ADXDB5430"></a><a id="ADXDB5428"></a><div class="props_rev_3"><a id="GUID-3DDCD870-2149-494C-AA20-E7D269CC6E7D" name="GUID-3DDCD870-2149-494C-AA20-E7D269CC6E7D"></a><h3 id="ADXDB-GUID-3DDCD870-2149-494C-AA20-E7D269CC6E7D" class="sect3"><span class="enumeration_section">24.5</span>更新存储库资源：示例</h3>
               <div>
                  <p>此处的示例说明了如何更新Oracle XML DB存储库资源和路径。</p>
                  <div class="section">
                     <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-3DDCD870-2149-494C-AA20-E7D269CC6E7D__CJAIBBFE">例24-18</a>更改了path <code class="codeph">/test/HR/example/paper</code> 。
                     </p>
                     <div class="infoboxnotealso" id="GUID-3DDCD870-2149-494C-AA20-E7D269CC6E7D__GUID-8A45A7E3-19A5-4FDB-8761-4FEC2482BE84">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="user-defined-repository-metadata.html#GUID-74BCC51E-2E7C-4DB6-8DCF-F65122FE132E" title="You can create your own metadata to associate with XML data stored in Oracle XML DB Repository.">用户定义的存储库元数据，</a>用于更新资源元<a href="user-defined-repository-metadata.html#GUID-74BCC51E-2E7C-4DB6-8DCF-F65122FE132E" title="您可以创建自己的元数据以与存储在Oracle XML DB Repository中的XML数据相关联。">数据</a>的其他示例</p>
                     </div>
                     <p>默认情况下， <code class="codeph">DisplayName</code>元素内容<code class="codeph">paper</code>是与资源路径<code class="codeph">/test/HR/example/paper</code>的最后一个位置步骤相同的文本。但是，这只是默认值。<code class="codeph">DisplayName</code>独立于资源路径，因此更新它不会更改路径。
                     </p>
                     <p>Element <code class="codeph">DisplayName</code>由WebDAV标准定义，并由WebDAV应用程序识别。不基于WebDAV的应用程序（如FTP客户端）无法识别资源的<code class="codeph">DisplayName</code> 。即使在<code class="codeph">UPDATE</code>操作之后，FTP客户端也将资源列为<code class="codeph">paper</code> （例如，使用FTP命令<code class="codeph">ls</code> ）。
                     </p>
                     <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-3DDCD870-2149-494C-AA20-E7D269CC6E7D__CJAHGHGE">例24-19</a>将资源的路径从<code class="codeph">/test/HR/example/paper</code>更改为<code class="codeph">/test/myexample</code> 。它类似于使用UNIX或Linux命令<code class="codeph">mv /test/HR/example/paper /test/myexample</code> 。
                     </p>
                     <div class="infoboxnotealso" id="GUID-3DDCD870-2149-494C-AA20-E7D269CC6E7D__GUID-7C479194-D4FF-4D3C-8B0B-5619DAC16A88">
                        <p class="notep1">也可以看看：</p>
                        <p>有关使用适用于<code class="codeph">RESOURCE_VIEW</code>和<code class="codeph">PATH_VIEW</code> SQL函数的其他示例，请<a href="accessing-XML-DB-repository-data.html#GUID-B162A199-F7F8-4E81-B2FD-919B90F7FE83__BABBJJDI" title="此表描述了用于访问Oracle XML DB存储库的API选项。">参见表21-3</a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-3DDCD870-2149-494C-AA20-E7D269CC6E7D__CJAIBBFE">
                     <p class="titleinexample">示例24-18更新资源</p>
                     <p>这是更新操作之前的完整资源：</p><pre class="pre codeblock"><code>SELECT XMLSerialize（DOCUMENT r。RES AS CLOB）FROM RESOURCE_VIEW r WHERE equals_path（r。RES，'/ test / HR / example / paper'）= 1; XMLSERIALIZE（DOCUMENTR.RESASCLOB）-------------------------------------------- ------------------------------------ &lt;Resource xmlns =“http://xmlns.oracle.com /xdb/XDBResource.xsd“Hidden =”false“Inv alid =”false“Container =”false“CustomRslv =”false“VersionHistory =”false“StickyR ef =”true“&gt; &lt;CreationDate&gt; 2005-04-29T16：30 ：01.588835 &lt;/ CreationDate&gt; &lt;ModificationDate&gt; 2005-04-29T16：30：01.588835 &lt;/ ModificationDate&gt; &lt;DisplayName&gt; <span class="bold">paper</span> &lt;/ DisplayName&gt; &lt;Language&gt; en-US &lt;/ Language&gt; &lt;CharacterSet&gt; UTF-8 &lt;/ CharacterSet&gt; &lt;ContentType&gt; application / octet-stream &lt;/ ContentType&gt; &lt;RefCount&gt; 1 &lt;/ RefCount&gt; &lt;ACL&gt; &lt;acl description =“Public：PUBLIC的所有权限”xmlns =“http：//xmlns.oracl e.com/xdb /acl.xsd“xmlns：xsi =”http://www.w3.org/2001/XMLSchema-instance“xsi：sch emaLocation =”http://xmlns.oracle.com/xdb/acl.xsd http：/ /xmlns.oracle.com/xdb/acl.xsd“&gt; &lt;ace&gt; &lt;principal&gt; PUBLIC &lt;/ principal&gt; &lt;grant&gt; true &lt;/ grant&gt; &lt;privilege&gt; &lt;all /&gt; &lt;/ privilege&gt; &lt;/ ace&gt; &lt;/ acl&gt; &lt;/ ACL&gt; &lt;Owner&gt; TESTUSER1 &lt;/ Owner&gt; &lt;Creator&gt; TESTUSER1 &lt;/ Creator&gt; &lt;Last修饰符&gt; TESTUSER1 &lt;/ LastModifier&gt; &lt;SchemaElement&gt; http://xmlns.oracle.com/xdb/XDBSchema.xsd#binary &lt;/ SchemaElement&gt; &lt;Contents&gt; &lt;binary&gt; 4F7261636C65206F7220554E4958 &lt;/ binary&gt; &lt;/ Contents&gt; &lt;/ Resource&gt;选择了1行。
</code></pre><p>此处显示的所有XML元素都是资源<span class="italic">元数据</span>元素，但<code class="codeph">Contents</code>包含资源<span class="italic">内容</span> 。
                     </p>
                     <p>此<code class="codeph">UPDATE</code>语句仅更新（仅） <code class="codeph">DisplayName</code>元数据元素。
                     </p><pre class="pre codeblock"><code>UPDATE RESOURCE_VIEW r SET r。RES = XMLQuery（'copy $ i：= $ p1 modify（$ i / Resource / DisplayName中的$ j返回$ j的节点$ j的值）返回$ i'PASSING r。RES AS“p1”，“我的新论文”AS“p2”返回内容）WHERE equals_path（r。RES，'/ test / HR / example / paper'）= 1; 1行更新。SELECT XMLSerialize（DOCUMENT r。RES AS CLOB）FROM RESOURCE_VIEW r WHERE equals_path（r。RES，'/ test / HR / example / paper'）= 1; XMLSERIALIZE（DOCUMENTR.RESASCLOB）-------------------------------------------- ------------------------------------ &lt;Resource xmlns =“http://xmlns.oracle.com /xdb/XDBResource.xsd“Hidden =”false“Inv alid =”false“Container =”false“CustomRslv =”false“VersionHistory =”false“StickyR ef =”true“&gt; &lt;CreationDate&gt; 2005-04-29T16：30 ：01.588835 &lt;/ CreationDate&gt; &lt;ModificationDate&gt; 2005-04-29T16：30：01.883838 &lt;/ ModificationDate&gt; &lt;DisplayName&gt; <span class="bold">我的新论文</span> &lt;/ DisplayName&gt; &lt;语言&gt; en-US &lt;/ Language&gt; <span class="bold">。 。 。</span>&lt;目录&gt; &lt;二进制&gt; 4F7261636C65206F7220554E4958 &lt;/ binary&gt; &lt;/ Contents&gt; &lt;/ Resource&gt;选择1行。</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-3DDCD870-2149-494C-AA20-E7D269CC6E7D__CJAHGHGE">
                     <p class="titleinexample">示例24-19更新PATH_VIEW中的路径</p><pre class="pre codeblock"><code>SELECT ANY_PATH FROM RESOURCE_VIEW WHERE under_path（RES，'/ test'）= 1; ANY_PATH -------- / test / HR / test / HR / example / test / HR / <span class="bold">example / paper</span>选择3行。UPDATE PATH_VIEW SET PATH ='/ test / <span class="bold">myexample'WHERE</span> PATH ='/ test / HR / <span class="bold">example / paper</span> '; ANY_PATH -------- / test / HR / test / HR / example / test / <span class="bold">myexample</span>选择3行。</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" title="预定义的公共视图RESOURCE_VIEW和PATH_VIEW提供对Oracle XML DB存储库数据的访问。您可以使用Oracle SQL函数under_path和equals_path根据其路径名查询资源，并使用函数path和depth来返回资源路径名和深度。">使用RESOURCE_VIEW和PATH_VIEW的存储库访问</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5432"></a><a id="ADXDB5433"></a><a id="ADXDB5434"></a><a id="ADXDB5431"></a><div class="props_rev_3"><a id="GUID-EB652889-E723-4727-B2BC-DFFC378037FD" name="GUID-EB652889-E723-4727-B2BC-DFFC378037FD"></a><h3 id="ADXDB-GUID-EB652889-E723-4727-B2BC-DFFC378037FD" class="sect3"><span class="enumeration_section">24.6</span>使用多个Oracle XML DB资源</h3>
               <div>
                  <p>要对多个Oracle XML DB资源执行操作，或查找满足特定条件集的一个或多个Oracle XML DB资源，请将SQL与<code class="codeph">RESOURCE_VIEW</code>和<code class="codeph">PATH_VIEW</code> 。</p>
                  <div class="section">
                     <p>例如，您可以执行以下操作：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>根据属性更新资源 - 请参见<a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-EB652889-E723-4727-B2BC-DFFC378037FD__CHDDHFII">例24-20</a></p>
                        </li>
                        <li>
                           <p>查找文件夹中的资源 - 请参见<a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-EB652889-E723-4727-B2BC-DFFC378037FD__CHDJCACB">例24-21</a></p>
                        </li>
                        <li>
                           <p>复制一组Oracle XML DB资源 - 请参见<a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-EB652889-E723-4727-B2BC-DFFC378037FD__CHDIGEEH">例24-22</a></p>
                        </li>
                     </ul>
                     <p><a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-EB652889-E723-4727-B2BC-DFFC378037FD__CHDIGEEH">例24-22中</a>的SQL DML语句将文件夹<code class="codeph">public</code>所有资源复制到文件夹<code class="codeph">newlocation</code> 。它类似于UNIX或Linux命令<code class="codeph">cp /public/* /newlocation</code> 。目标文件夹<code class="codeph">newlocation</code>必须在复制之前存在。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-EB652889-E723-4727-B2BC-DFFC378037FD__CHDDHFII">
                     <p class="titleinexample">示例24-20基于属性更新资源</p><pre class="pre codeblock"><code>UPDATE RESOURCE_VIEW SET RES = XMLQuery（'copy $ i：= $ p1 modify（$ i / Resource / DisplayName中的$ j返回$ j的节点$ j的值）返回$ i'PASSING RES AS“p1”，'我的新论文“AS”p2“返回内容”在哪里XMLCast（XMLQuery（'declare namespace ns =“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) $ r / ns：Resource / ns：DisplayName'PASSING RES as“r”RETURNING CONTENT）AS VARCHAR2（128））='我的论文'; 1行更新。SELECT ANY_PATH FROM RESOURCE_VIEW WHERE XMLCast（XMLQuery（'declare namespace ns =“http://xmlns.oracle.com/xdb/XDBResource.xsd”;（：:) $ r / ns：Resource / ns：DisplayName'PASSING RES AS “r”返回内容）作为VARCHAR2（128））='我的新论文';选择ANY_PATH --------------- / test / myexample 1行。</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-EB652889-E723-4727-B2BC-DFFC378037FD__CHDJCACB">
                     <p class="titleinexample">示例24-21查找文件夹内的资源</p><pre class="pre codeblock"><code>SELECT ANY_PATH FROM RESOURCE_VIEW WHERE under_path（resource，'/ sys / smasmas / Publici / xmlns.oracle.com / xdb'）= 1; ANY_PATH ------------------------------------------------- ------------- /sys/schemas/PUBLIC/xmlns.oracle.com/xdb/XDBResource.xsd /sys/schemas/PUBLIC/xmlns.oracle.com/xdb/XDBSchema.xsd / sys / schemas / PUBLIC / xmlns.oracle.com / xdb / XDBStandard.xsd /sys/schemas/PUBLIC/xmlns.oracle.com/xdb/acl.xsd /sys/schemas/PUBLIC/xmlns.oracle.com/xdb/ dav.xsd /sys/schemas/PUBLIC/xmlns.oracle.com/xdb/log /sys/schemas/PUBLIC/xmlns.oracle.com/xdb/log/xdblog.xsd /sys/schemas/PUBLIC/xmlns.oracle。 com / xdb / stats.xsd /sys/schemas/PUBLIC/xmlns.oracle.com/xdb/xdbconfig.xsd选择了12行。
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-EB652889-E723-4727-B2BC-DFFC378037FD__CHDIGEEH">
                     <p class="titleinexample">示例24-22复制资源</p><pre class="pre codeblock"><code>SELECT PATH FROM PATH_VIEW WHERE under_path（RES，'/ test'）= 1; PATH ----------------- / test / HR / test / HR / example / test / myexample选择3行。INSERT INTO PATH_VIEW SELECT'/ newlocation /'|| path（1），RES，LINK，NULL FROM PATH_VIEW WHERE under_path（RES，'/ test'，1）= 1 ORDER BY depth（1）;创建了3行。SELECT PATH FROM PATH_VIEW WHERE under_path（RES，'/ newlocation'）= 1; PATH ------------------------ / newlocation / HR / newlocation / HR / example / newlocation / myexample选择3行。</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" title="预定义的公共视图RESOURCE_VIEW和PATH_VIEW提供对Oracle XML DB存储库数据的访问。您可以使用Oracle SQL函数under_path和equals_path根据其路径名查询资源，并使用函数path和depth来返回资源路径名和深度。">使用RESOURCE_VIEW和PATH_VIEW的存储库访问</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5435"></a><div class="props_rev_3"><a id="GUID-9022CFD7-F8C8-434D-A3D6-21208328B2F2" name="GUID-9022CFD7-F8C8-434D-A3D6-21208328B2F2"></a><h3 id="ADXDB-GUID-9022CFD7-F8C8-434D-A3D6-21208328B2F2" class="sect3"><span class="enumeration_section">24.7</span> Oracle XML DB存储库操作的性能指南</h3>
               <div>
                  <p>提供了用于提高资源创建和查询等存储库操作性能的指南。</p>
                  <p>包含大量资源的文件夹会对并发产生负面影响，尤其是在创建或删除许多资源时。根据经验，不要包含超过10,000个资源的文件夹。此经验限制基于数据库块大小和平均文件名长度。</p>
                  <p>如果批量创建资源，请至少每1,000个资源执行一次<code class="codeph">COMMIT</code>操作。如果您经常提交或者您提交的次数少于每1,000次资源创建，性能就会受到负面影响。
                  </p>
                  <p>创建文件资源时，该文件资源是已知XML模式的基于XML模式的文档，请将XML模式URL指定为PL / SQL函数<code class="codeph">DBMS_XDB_REPOS.createResource</code>的参数。这节省了预先准备文档以确定XML模式。
                  </p>
                  <p>Oracle XML DB使用配置文件<code class="codeph">xdbconfig.xml</code>来配置系统和协议环境。此文件包含一个元素参数<code class="codeph">resource-view-cache-size</code> ，它定义<code class="codeph">RESOURCE_VIEW</code>缓存的动态内存中的大小。默认值为<code class="codeph">1048576</code> 。
                  </p>
                  <p>可以通过调整<code class="codeph">resource-view-cache-size</code>来改进对<code class="codeph">RESOURCE_VIEW</code>和<code class="codeph">PATH_VIEW</code>的一些查询的性能。通常，缓存大小越大，查询越快。默认的<code class="codeph">resource-view-cache-size</code>适用于大多数情况，但您可能希望在查询大量的<code class="codeph">RESOURCE_VIEW</code>时扩大<code class="codeph">resource-view-cache-size</code>元素。</p>
                  <p>以下元素的默认限制是软限制。超出这些限制时，系统会自动适应。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">xdbcore-loadableunit-size</code> - 此元素指示可装入单元（分区）可以以千字节为单位增长的最大大小。将分区读入内存或在使用新文档时构建分区时，将构建分区，直到达到最大大小。默认值为16 KB。</p>
                     </li>
                     <li>
                        <p><code class="codeph">xdbcore-xobmem-bound</code> - 此元素指示允许文档占用的最大内存（以KB为单位）。默认值为1024 KB。一旦文档超过此数量，就会换出一些可加载的单元（分区）。
                        </p>
                     </li>
                  </ul>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="administration-of-XML-DB.html#GUID-FD0BCF20-2345-4D78-B96F-C52A4361291D" title="Oracle XML DB的管理包括安装，升级和配置它。">管理Oracle XML DB</a></li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-9022CFD7-F8C8-434D-A3D6-21208328B2F2__GUID-975D85E4-5474-47FC-8B2D-AB9C52889DC7">
                     <p class="notep1">也可以看看：</p>
                     <p>有关PL / SQL函数<code class="codeph">DBMS_XDB_REPOS.createResource</code>信息，请参阅<a href="../arpls/DBMS_XDB_REPOS.html#ARPLS74212" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" title="预定义的公共视图RESOURCE_VIEW和PATH_VIEW提供对Oracle XML DB存储库数据的访问。您可以使用Oracle SQL函数under_path和equals_path根据其路径名查询资源，并使用函数path和depth来返回资源路径名和深度。">使用RESOURCE_VIEW和PATH_VIEW的存储库访问</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5437"></a><a id="ADXDB5438"></a><a id="ADXDB5436"></a><div class="props_rev_3"><a id="GUID-79391B36-9690-44DC-8923-653CFE299E9C" name="GUID-79391B36-9690-44DC-8923-653CFE299E9C"></a><h3 id="ADXDB-GUID-79391B36-9690-44DC-8923-653CFE299E9C" class="sect3"><span class="enumeration_section">24.8</span>使用Oracle Text搜索资源</h3>
               <div>
                  <p>数据库模式中的表<code class="codeph">XDB$RESOURCE</code> <code class="codeph">XDB</code>存储存储库资源的元数据和内容。您可以使用<code class="codeph">contains</code> <code class="codeph">RESOURCE_VIEW</code>或<code class="codeph">PATH_VIEW</code> Oracle SQL函数来搜索包含特定关键字的<code class="codeph">RESOURCE_VIEW</code> 。</p>
                  <div class="section">
                     <p>要评估此类查询，必须首先在<code class="codeph">XDB$RESOURCE</code>表上创建上下文索引。根据Oracle XML DB中存储的文档类型，选择以下选项之一来创建上下文索引：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="italic">如果Oracle XML DB仅包含XML文档</span> ，即没有二进制数据，则可以在<code class="codeph">XDB$RESOURCE</code>表上创建常规Context Index。这是<a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-79391B36-9690-44DC-8923-653CFE299E9C__CHDDAJAE">例24-24</a>的情况。
                           </p><pre class="pre codeblock"><code>CREATE INDEX xdb $ resource_ctx_i ON XDB.XDB $ RESOURCE（OBJECT_VALUE）INDEXTYPE IS CTXSYS.CONTEXT;</code></pre></li>
                        <li>
                           <p><span class="italic">如果Oracle XML DB包含二进制数据</span> （如Microsoft Word文档），则需要用户过滤器在索引之前过滤此类文档。使用包<code class="codeph">DBMS_XDBT</code> （ <code class="codeph">dbmsxdbt.sql</code> ）来创建和配置上下文索引。
                           </p><pre class="pre codeblock"><code>- 安装软件包 - 以SYS @dbmsxdbt连接 - 创建首选项EXEC DBMS_XDBT.createPreferences; - 创建索引EXEC DBMS_XDBT.createIndex;</code></pre></li>
                     </ul>
                     <p>包<code class="codeph">DBMS_XDBT</code>还包括同步和优化索引的过程。您可以使用过程<code class="codeph">configureAutoSync()</code>通过使用作业队列自动同步索引。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-79391B36-9690-44DC-8923-653CFE299E9C__GUID-DFA002DE-3E53-48BD-9F12-ED35D82745A3">
                        <p class="notep1">也可以看看：</p>
                        <p>有关安装和使用<code class="codeph">DBMS_XDBT</code>信息，请参阅<a href="../arpls/DBMS_XDBT.html#ARPLS372" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a> 。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-79391B36-9690-44DC-8923-653CFE299E9C__GUID-75B8AE41-CC42-4FDA-8C48-8EA7F0B9E4C9">
                     <p class="titleinexample">示例24-23查找包含“Paper”的所有资源</p><pre class="pre codeblock"><code>从PATH_VIEW WHERE中选择PATH包含（RES，'Paper'）&gt; 0; PATH ----------------------- / newlocation / myexample / test / myexample选择2行。</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-79391B36-9690-44DC-8923-653CFE299E9C__CHDDAJAE">
                     <p class="titleinexample">示例24-24查找包含指定路径下“Paper”的所有资源</p><pre class="pre codeblock"><code>SELECT ANY_PATH FROM RESOURCE_VIEW WHERE包含（RES，'Paper'）&gt; 0 AND under_path（RES，'/ test'）&gt; 0;选择ANY_PATH ---------------- / test / myexample 1行。
</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="query-and-update-XML.html#GUID-01C75289-804F-4BAA-AE7C-DFA73198581E" title="应用程序有许多方法可以查询和更新Oracle数据库中的XML数据，包括基于XML模式和非基于模式的数据。">查询和更新XML数据</a></li>
                        <li><a href="PLSQL-APIs-for-XMLType.html#GUID-63032A9C-B4E2-4BB9-89E5-EBEEEF282C39" title="描述了XMLType的PL / SQL应用程序编程接口（API）。">XMLType的PL / SQL API：参考</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="repository-access-using-RESOURCE_VIEW-and-PATH_VIEW.html#GUID-70F798A7-A73F-4D2B-AD34-A802BA950E55" title="预定义的公共视图RESOURCE_VIEW和PATH_VIEW提供对Oracle XML DB存储库数据的访问。您可以使用Oracle SQL函数under_path和equals_path根据其路径名查询资源，并使用函数path和depth来返回资源路径名和深度。">使用RESOURCE_VIEW和PATH_VIEW的存储库访问</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
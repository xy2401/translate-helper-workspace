<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>Oracle Java消息服务发布/订阅</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Advanced Queuing User&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Advanced Queuing User&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-database-advanced-queuing.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T10:53:09-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96511-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="jms-point-to-point.html" title="Previous" type="text/html"></link>
      <link rel="next" href="jms-shared-interfaces.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle® Database Advanced Queuing"></meta>
    <meta name="dcterms.isVersionOf" content="ADQUE"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="jms-point-to-point.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="jms-shared-interfaces.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">高级排队用户指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle Java消息服务发布/订阅</li>
            </ol>
            <a id="GUID-882CB057-A0C0-4C5E-A5D0-CCB0AAA8D0D5" name="GUID-882CB057-A0C0-4C5E-A5D0-CCB0AAA8D0D5"></a><a id="ADQUE1400"></a>
            
            <h2 id="ADQUE-GUID-882CB057-A0C0-4C5E-A5D0-CCB0AAA8D0D5" class="sect2"><span class="enumeration_chapter">14</span> Oracle Java消息服务发布/订阅</h2>
         </header>
         <div class="ind">
            <div>
               <p>以下主题描述了特定于<a href="glossary.html#GUID-C1099A1A-C20D-4C9C-AD73-BBF6BC8939B5"><span class="xrefglossterm">发布/订阅</span></a>操作的Oracle数据库高级队列（AQ） <a href="glossary.html#GUID-3A98EBD4-296B-4BE8-82AE-5B42D07E9894"><span class="xrefglossterm">Java消息服务</span></a> （JMS）操作界面的组件。<a href="jms-shared-interfaces.html#GUID-B53CE112-EBD2-48FD-BC3B-1090F5E29BD0">Oracle Java消息服务共享接口</a>中描述了由点对点和发布/订阅<a href="jms-shared-interfaces.html#GUID-B53CE112-EBD2-48FD-BC3B-1090F5E29BD0">共享的组件</a> 。
               </p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-A61A67BA-C875-4DD3-9FC0-87457812B16C">使用用户名/密码创建连接</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-63A174F1-909C-42C4-95E0-2F57066235E2">使用默认ConnectionFactory参数创建连接</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-67ED685D-0B92-451D-8DAB-CE5E23435A6A">使用用户名/密码创建TopicConnection</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-60537E82-F3B4-414C-8375-B273FF1A3DAC">使用Open JDBC Connection创建TopicConnection</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-39155312-0353-407C-9EE9-9D84B5E5698B">使用Open OracleOCIConnectionPool创建TopicConnection</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-EF96F5A8-7455-4804-A1AF-530969904F38">创建会话</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-EBCE0684-7337-4EEA-A1FA-ABEC0717BEA5">创建TopicSession</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-0A249758-0231-4CF3-A2F8-1A95C8111134">创建TopicPublisher</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-37E67651-EEEC-46F4-8331-D95D2BA43D01">使用最小规范发布消息</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-E4E95421-8B4F-480A-810B-F7B8B45AFB9E">发布指定主题的消息</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-7D8D58AC-CFDE-471D-8252-237BAE32153F">发布消息指定Delivery Mode_ Priority_和TimeToLive</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-0B3FC447-D075-4A24-A0D0-93C72B825A20">发布指定收件人列表的邮件</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-D367FE9C-FDCB-44ED-918F-B8912B0EA98A">为没有选择器的JMS主题创建DurableSubscriber</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-55B7D08A-E221-4B93-997F-80065752F9ED">使用Selector为JMS主题创建DurableSubscriber</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-4251552A-AE97-48FE-972F-A1563616F61C">为没有选择器的Oracle对象类型主题创建DurableSubscriber</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-468FBDF8-98D0-41BB-A3C1-2554F86A18C3">使用Selector为Oracle对象类型主题创建DurableSubscriber</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-5EF25837-B7C5-491F-9BBF-002626AB94B7">指定主题订阅者的转换</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-73D207BA-EF8F-4612-94B9-6A038649424F">为JMS消息创建远程订阅服务器</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-A1063E43-BF5C-4466-851D-5D0C489644A0">为Oracle对象类型消息创建远程订阅服务器</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-8D7D0BC0-4454-4310-AF06-11B6A6EAA707">指定远程订户的转换</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-C4B96289-E295-4B48-8423-527D7EC80A2F">取消订阅本地订阅者的持久订阅</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-526219F2-6B38-468D-8FB4-7B84285DFF0E">取消订阅远程订阅者的持久订阅</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-3532BDBD-3E62-4E1E-A79B-8012AE661EFF">为标准JMS类型消息主题创建TopicReceiver</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-9E165968-66F8-4A2E-A4F7-1B8F38832DA9">为Oracle对象类型消息主题创建TopicReceiver</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-B5A94557-8D39-4C3E-9D76-E78BA526E440">为标准JMS消息创建TopicBrowser</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-95BE7FA2-76E1-40CD-90BB-0E96D6E39F54">为标准JMS消息创建TopicBrowser_锁定消息</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-36964605-00F2-4585-9177-9D2C3268E578">为Oracle对象类型消息创建TopicBrowser</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-D467A464-3B85-4197-9F91-023A321F1E88">为Oracle对象类型Messages_锁定消息创建TopicBrowser</a></p>
                  </li>
                  <li>
                     <p><a href="jms-publish-subscribe.html#GUID-073E8D0D-703B-4941-869A-7AA8C9F4CCC1">使用TopicBrowser浏览消息</a></p>
                  </li>
               </ul>
            </div><a id="ADQUE3041"></a><div class="props_rev_3"><a id="GUID-A61A67BA-C875-4DD3-9FC0-87457812B16C" name="GUID-A61A67BA-C875-4DD3-9FC0-87457812B16C"></a><h3 id="ADQUE-GUID-A61A67BA-C875-4DD3-9FC0-87457812B16C" class="sect3"><span class="enumeration_section">14.1</span>使用用户名/密码创建连接</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public javax.jms。连接createConnection（java.lang。字符串用户名，java.lang。字符串密码）抛出JMSException</pre><p>此方法使用指定的用户名和密码创建支持点对点和发布/订阅操作的连接。此方法是新方法，支持JMS 1.1版规范。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-A61A67BA-C875-4DD3-9FC0-87457812B16C__GUID-1E26D3B1-1F24-429F-BF9E-7F2FAB3C29C3">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d88908e271">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d88908e274">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e279" headers="d88908e271 ">
                                    <p><code class="codeph">用户名</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e279 d88908e274 ">
                                    <p>连接到数据库以进行排队的用户的名称</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e287" headers="d88908e271 ">
                                    <p><code class="codeph">密码</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e287 d88908e274 ">
                                    <p>用于创建与服务器的连接的密码</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADQUE3042"></a><div class="props_rev_3"><a id="GUID-63A174F1-909C-42C4-95E0-2F57066235E2" name="GUID-63A174F1-909C-42C4-95E0-2F57066235E2"></a><h3 id="ADQUE-GUID-63A174F1-909C-42C4-95E0-2F57066235E2" class="sect3"><span class="enumeration_section">14.2</span>使用默认ConnectionFactory参数创建连接</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public javax.jms。连接createConnection（）抛出JMSException</pre><p>此方法使用默认的<a href="glossary.html#GUID-BA2DFFB2-5E44-4256-9DDD-D5B2AE0D81B9"><span class="xrefglossterm">ConnectionFactory</span></a>参数创建支持点对点和发布/订阅操作的<a href="glossary.html#GUID-BA2DFFB2-5E44-4256-9DDD-D5B2AE0D81B9"><span class="xrefglossterm">连接</span></a> 。此方法是新方法，支持JMS 1.1版规范。如果<code class="codeph">ConnectionFactory</code>属性不包含默认用户名和密码，则会抛出JMSException。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADQUE3044"></a><a id="ADQUE3043"></a><div class="props_rev_3"><a id="GUID-67ED685D-0B92-451D-8DAB-CE5E23435A6A" name="GUID-67ED685D-0B92-451D-8DAB-CE5E23435A6A"></a><h3 id="ADQUE-GUID-67ED685D-0B92-451D-8DAB-CE5E23435A6A" class="sect3"><span class="enumeration_section">14.3</span>使用用户名/密码创建TopicConnection</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public javax.jms。TopicConnection createTopicConnection（java.lang。字符串用户名，java.lang。字符串密码）抛出JMSException</pre><p>此方法使用指定的用户名和密码创建<code class="codeph">TopicConnection</code> 。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-67ED685D-0B92-451D-8DAB-CE5E23435A6A__GUID-2950ECDE-B142-4533-B818-8CC2C5DC2435">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d88908e432">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d88908e435">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e440" headers="d88908e432 ">
                                    <p><code class="codeph">用户名</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e440 d88908e435 ">
                                    <p>连接到数据库以进行排队的用户的名称</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e448" headers="d88908e432 ">
                                    <p><code class="codeph">密码</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e448 d88908e435 ">
                                    <p>用于创建与服务器的连接的密码</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-67ED685D-0B92-451D-8DAB-CE5E23435A6A__GUID-51FA5F39-6B79-407C-8AC2-CCC9B0ACAFF2">
                     <p class="titleinexample">示例14-1使用用户名/密码创建TopicConnection</p><pre class="oac_no_warn" dir="ltr">TopicConnectionFactory tc_fact = AQjmsFactory.getTopicConnectionFactory（“sun123”，“oratest”，5521，“thin”）; / *使用用户名/密码创建TopicConnection * / TopicConnection tc_conn = tc_fact.createTopicConnection（“jmsuser”，“jmsuser”）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3046"></a><a id="ADQUE3047"></a><a id="ADQUE3045"></a><div class="props_rev_3"><a id="GUID-60537E82-F3B4-414C-8375-B273FF1A3DAC" name="GUID-60537E82-F3B4-414C-8375-B273FF1A3DAC"></a><h3 id="ADQUE-GUID-60537E82-F3B4-414C-8375-B273FF1A3DAC" class="sect3"><span class="enumeration_section">14.4</span>使用Open JDBC Connection创建TopicConnection</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public static javax.jms。TopicConnection createTopicConnection（java.sql。连接jdbc_connection）抛出JMSException</pre><p>此方法使用开放JDBC连接创建<code class="codeph">TopicConnection</code> 。它有以下参数：</p>
                     <div class="tblformal" id="GUID-60537E82-F3B4-414C-8375-B273FF1A3DAC__GUID-D58A37D6-4BD0-47D8-A11B-DD77AA0D7C82">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d88908e531">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d88908e534">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e539" headers="d88908e531 ">
                                    <p><code class="codeph">jdbc_connection</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e539 d88908e534 ">
                                    <p>有效打开数据库连接</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-60537E82-F3B4-414C-8375-B273FF1A3DAC__GUID-B289C019-C644-46E0-B2C5-30A1FA9F7A1E">
                     <p class="titleinexample">示例14-2使用Open JDBC Connection创建TopicConnection</p><pre class="oac_no_warn" dir="ltr">连接db_conn; / *以前打开的JDBC连接* / TopicConnection tc_conn = AQjmsTopicConnectionFactory createTopicConnection（db_conn）;</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-60537E82-F3B4-414C-8375-B273FF1A3DAC__GUID-37108348-07AE-443C-952B-B66185C970CA">
                     <p class="titleinexample">示例14-3使用新JDBC连接创建TopicConnection</p><pre class="oac_no_warn" dir="ltr">OracleDriver ora = new OracleDriver（）; TopicConnection tc_conn = AQjmsTopicConnectionFactory.createTopicConnection（ora.defaultConnection（））;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3049"></a><a id="ADQUE3048"></a><div class="props_rev_3"><a id="GUID-39155312-0353-407C-9EE9-9D84B5E5698B" name="GUID-39155312-0353-407C-9EE9-9D84B5E5698B"></a><h3 id="ADQUE-GUID-39155312-0353-407C-9EE9-9D84B5E5698B" class="sect3"><span class="enumeration_section">14.5</span>使用Open OracleOCIConnectionPool创建TopicConnection</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public static javax.jms。TopicConnection createTopicConnection（oracle.jdbc.pool。OracleOCIConnectionPool cpool）抛出JMSException</pre><p>此方法使用打开的<code class="codeph">OracleOCIConnectionPool</code>创建<code class="codeph">TopicConnection</code> 。它是静态的，具有以下参数：</p>
                     <div class="tblformal" id="GUID-39155312-0353-407C-9EE9-9D84B5E5698B__GUID-D057D459-6104-47A6-A650-AD0FF43CFA01">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d88908e629">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d88908e632">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e637" headers="d88908e629 ">
                                    <p><code class="codeph">CPOOL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e637 d88908e632 ">
                                    <p>有效打开数据库的OCI连接池</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-39155312-0353-407C-9EE9-9D84B5E5698B__GUID-BF681B09-6FED-48FD-862C-9E6A6178166B">
                     <p class="titleinexample">示例14-4使用Open OracleOCIConnectionPool创建TopicConnection</p><pre class="oac_no_warn" dir="ltr">OracleOCIConnectionPool cpool; / *以前创建的OracleOCIConnectionPool * / TopicConnection tc_conn = AQjmsTopicConnectionFactory.createTopicConnection（cpool）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3050"></a><div class="props_rev_3"><a id="GUID-EF96F5A8-7455-4804-A1AF-530969904F38" name="GUID-EF96F5A8-7455-4804-A1AF-530969904F38"></a><h3 id="ADQUE-GUID-EF96F5A8-7455-4804-A1AF-530969904F38" class="sect3"><span class="enumeration_section">14.6</span>创建会话</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public javax.jms。Session createSession（boolean transacted，int ack_mode）抛出JMSException</pre><p>此方法创建支持点对点和发布/订阅操作的<code class="codeph">Session</code> 。它是新的，支持JMS 1.1版规范。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-EF96F5A8-7455-4804-A1AF-530969904F38__GUID-ECC5E507-492E-40F3-A615-141D81F01D20">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d88908e723">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d88908e726">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e731" headers="d88908e723 ">
                                    <p><code class="codeph">交易</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e731 d88908e726 ">
                                    <p>如果设置为true，则会话是<a href="glossary.html#GUID-4956C594-EE49-498B-A9DD-7371518B4EBA"><span class="xrefglossterm">事务性的</span></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e742" headers="d88908e723 ">
                                    <p><code class="codeph">ack_mode</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e742 d88908e726 ">
                                    <p>指示消费者或客户端是否会确认收到的任何消息。如果会话是事务性的，则忽略它。法律价值观是<code class="codeph">Session.AUTO_ACKNOWLEDGE</code> ， <code class="codeph">Session.CLIENT_ACKNOWLEDGE</code>和<code class="codeph">Session.DUPS_OK_ACKNOWLEDGE</code> 。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADQUE3052"></a><a id="ADQUE3051"></a><div class="props_rev_3"><a id="GUID-EBCE0684-7337-4EEA-A1FA-ABEC0717BEA5" name="GUID-EBCE0684-7337-4EEA-A1FA-ABEC0717BEA5"></a><h3 id="ADQUE-GUID-EBCE0684-7337-4EEA-A1FA-ABEC0717BEA5" class="sect3"><span class="enumeration_section">14.7</span>创建TopicSession</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public javax.jms。TopicSession createTopicSession（boolean transacted，int ack_mode）抛出JMSException</pre><p>此方法创建<code class="codeph">TopicSession</code> 。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-EBCE0684-7337-4EEA-A1FA-ABEC0717BEA5__GUID-A70FD6C2-E3A3-499C-AFDC-D4EA3C51F4FC">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d88908e828">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d88908e831">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e836" headers="d88908e828 ">
                                    <p><code class="codeph">交易</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e836 d88908e831 ">
                                    <p>如果设置为true，则会话是<a href="glossary.html#GUID-4956C594-EE49-498B-A9DD-7371518B4EBA"><span class="xrefglossterm">事务性的</span></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e847" headers="d88908e828 ">
                                    <p><code class="codeph">ack_mode</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e847 d88908e831 ">
                                    <p>指示消费者或客户端是否会确认收到的任何消息。如果会话是事务性的，则忽略它。法律价值观是<code class="codeph">Session.AUTO_ACKNOWLEDGE</code> ， <code class="codeph">Session.CLIENT_ACKNOWLEDGE</code>和<code class="codeph">Session.DUPS_OK_ACKNOWLEDGE</code> 。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-EBCE0684-7337-4EEA-A1FA-ABEC0717BEA5__GUID-A9AACD81-32E9-46DB-8D93-936C4AB7FE15">
                     <p class="titleinexample">示例14-5创建TopicSession</p><pre class="oac_no_warn" dir="ltr">TopicConnection tc_conn; TopicSession t_sess = tc_conn.createTopicSession（true，0）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3053"></a><div class="props_rev_3"><a id="GUID-0A249758-0231-4CF3-A2F8-1A95C8111134" name="GUID-0A249758-0231-4CF3-A2F8-1A95C8111134"></a><h3 id="ADQUE-GUID-0A249758-0231-4CF3-A2F8-1A95C8111134" class="sect3"><span class="enumeration_section">14.8</span>创建TopicPublisher</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public javax.jms。TopicPublisher createPublisher（javax.jms。主题主题）抛出JMSException</pre><p>此方法创建<code class="codeph">TopicPublisher</code> 。它有以下参数：</p>
                     <div class="tblformal" id="GUID-0A249758-0231-4CF3-A2F8-1A95C8111134__GUID-DF637531-C31B-4954-8E00-357B6F5FB588">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d88908e937">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d88908e940">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e945" headers="d88908e937 ">
                                    <p><code class="codeph">话题</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e945 d88908e940 ">
                                    <p>要发布到的主题，如果这是一个未识别的<a href="glossary.html#GUID-B9E1FDFC-EDA0-4D9C-8D65-FE429EF9043C"><span class="xrefglossterm">生产者</span></a> ，则返回null</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADQUE3055"></a><a id="ADQUE3056"></a><a id="ADQUE3054"></a><div class="props_rev_3"><a id="GUID-37E67651-EEEC-46F4-8331-D95D2BA43D01" name="GUID-37E67651-EEEC-46F4-8331-D95D2BA43D01"></a><h3 id="ADQUE-GUID-37E67651-EEEC-46F4-8331-D95D2BA43D01" class="sect3"><span class="enumeration_section">14.9</span>使用最小规范发布消息</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public void publish（javax.jms。消息消息）抛出JMSException</pre><p>此方法发布具有最小规范的消息。它有以下参数：</p>
                     <div class="tblformal" id="GUID-37E67651-EEEC-46F4-8331-D95D2BA43D01__GUID-2313820F-B2D2-4F78-96E8-0F6257D29D40">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d88908e1030">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d88908e1033">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e1038" headers="d88908e1030 ">
                                    <p><code class="codeph">信息</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e1038 d88908e1033 ">
                                    <p>要发送的消息</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p><code class="codeph">TopicPublisher</code>使用消息<code class="codeph">priority</code> （ <code class="codeph">1</code> ）和<code class="codeph">timeToLive</code> （ <code class="codeph">infinite</code> ）的默认值。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-37E67651-EEEC-46F4-8331-D95D2BA43D01__GUID-573DC7A9-BAA8-4917-88EB-893B7C926E8C">
                     <p class="titleinexample">示例14-6在不指定主题的情况下发布</p><pre class="oac_no_warn" dir="ltr">/ *发布时不指定主题* / TopicConnectionFactory tc_fact = null; TopicConnection t_conn = null; TopicSession jms_sess; TopicPublisher publisher1;主题shipping_orders; int myport = 5521; / * create connection and session * / tc_fact = AQjmsFactory.getTopicConnectionFactory（“MYHOSTNAME”，“MYSID”，myport，“oci8”）; t_conn = tc_fact.createTopicConnection（“jmstopic”，“jmstopic”）; / *创建TopicSession * / jms_sess = t_conn.createTopicSession（true，Session。CLIENT_ACKNOWLEDGE）; / *获得发货订单主题* / shipped_orders =（（AQjmsSession）jms_sess）。getTopic（“OE”，“Shipped_Orders_Topic”）; publisher1 = jms_sess.createPublisher（shipped_orders）; / * create TextMessage * / TextMessage jms_sess.createTextMessage（）; / *发布时未指定主题* / publisher1.publish（text_message）;</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-37E67651-EEEC-46F4-8331-D95D2BA43D01__GUID-D14ACAC4-8D17-47CA-8D4F-412ADC0A8E91">
                     <p class="titleinexample">示例14-7发布指定关联和延迟</p><pre class="oac_no_warn" dir="ltr">TopicConnectionFactory tc_fact = null; TopicConnection t_conn = null; TopicSession jms_sess; TopicPublisher publisher1;主题shipping_orders; int myport = 5521; / * create connection and session * / tc_fact = AQjmsFactory.getTopicConnectionFactory（“MYHOSTNAME”，“MYSID”，myport，“oci8”）; t_conn = tc_fact.createTopicConnection（“jmstopic”，“jmstopic”）; jms_sess = t_conn.createTopicSession（true，Session。CLIENT_ACKNOWLEDGE）; shipped_orders =（（AQjmsSession）jms_sess）。getTopic（“OE”，“Shipped_Orders_Topic”）; publisher1 = jms_sess.createPublisher（shipped_orders）; / *创建TextMessage * / TextMessage jms_sess.createTextMessage（）; / *设置相关和延迟* / / *设置相关* / jms_sess.setJMSCorrelationID（“FOO”）; / *设置延迟30秒* / jms_sess.setLongProperty（“JMS_OracleDelay”，30）; / * Publish * / publisher1.publish（text_message）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3058"></a><a id="ADQUE3057"></a><div class="props_rev_3"><a id="GUID-E4E95421-8B4F-480A-810B-F7B8B45AFB9E" name="GUID-E4E95421-8B4F-480A-810B-F7B8B45AFB9E"></a><h3 id="ADQUE-GUID-E4E95421-8B4F-480A-810B-F7B8B45AFB9E" class="sect3"><span class="enumeration_section">14.10</span>发布指定主题的消息</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public void publish（javax.jms。主题话题，javax.jms。消息消息）抛出JMSException</pre><p>此方法发布指定主题的消息。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-E4E95421-8B4F-480A-810B-F7B8B45AFB9E__GUID-15937861-F047-4E44-AA17-767D57D3CA81">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d88908e1145">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d88908e1148">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e1153" headers="d88908e1145 ">
                                    <p><code class="codeph">话题</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e1153 d88908e1148 ">
                                    <p>要发布的主题</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e1161" headers="d88908e1145 ">
                                    <p><code class="codeph">信息</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e1161 d88908e1148 ">
                                    <p>要发送的消息</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>如果使用默认主题创建了<code class="codeph">TopicPublisher</code> ，则可能不会在<code class="codeph">publish()</code>调用中指定<code class="codeph">topic</code>参数。如果指定了主题，则该值将覆盖<code class="codeph">TopicPublisher</code>的默认值。如果创建的<code class="codeph">TopicPublisher</code>没有默认主题，则必须使用<code class="codeph">publish()</code>调用指定主题。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-E4E95421-8B4F-480A-810B-F7B8B45AFB9E__GUID-AFAF0F1A-FD39-4443-BD33-253CC0185422">
                     <p class="titleinexample">示例14-8发布指定主题</p><pre class="oac_no_warn" dir="ltr">/ *发布指定主题* / TopicConnectionFactory tc_fact = null; TopicConnection t_conn = null; TopicSession jms_sess; TopicPublisher publisher1;主题shipping_orders; int myport = 5521; / *创建连接和会话* / tc_fact = AQjmsFactory.getTopicConnectionFactory（'MYHOSTNAME'，'MYSID'，myport，'oci8'）; t_conn = tc_fact.createTopicConnection（“jmstopic”，“jmstopic”）; jms_sess = t_conn.createTopicSession（true，Session。CLIENT_ACKNOWLEDGE）; / * create TopicPublisher * / publisher1 = jms_sess.createPublisher（null）; / * get topic object * / shipped_orders =（（AQjmsSession）jms_sess）。getTopic（'WS'，'Shipped_Orders_Topic'）; / *创建文本消息* / TextMessage jms_sess.createTextMessage（）; / *发布指定主题* / publisher1.publish（shipped_orders，text_message）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3060"></a><a id="ADQUE3059"></a><div class="props_rev_3"><a id="GUID-7D8D58AC-CFDE-471D-8252-237BAE32153F" name="GUID-7D8D58AC-CFDE-471D-8252-237BAE32153F"></a><h3 id="ADQUE-GUID-7D8D58AC-CFDE-471D-8252-237BAE32153F" class="sect3"><span class="enumeration_section">14.11</span>发布消息指定传递模式，优先级和TimeToLive</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public void publish（javax.jms。主题话题，javax.jms。消息消息，oracle.jms。AQjmsAgent [] recipient_list，int deliveryMode，int priority，long timeToLive）抛出JMSException</pre><p>此方法发布指定传递模式，优先级和<code class="codeph">TimeToLive</code>的消息。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-7D8D58AC-CFDE-471D-8252-237BAE32153F__GUID-E9871AA5-D0A1-47D1-A785-E8431D313432">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d88908e1270">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d88908e1273">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e1278" headers="d88908e1270 ">
                                    <p><code class="codeph">话题</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e1278 d88908e1273 ">
                                    <p>要发布消息的主题（覆盖<code class="codeph">MessageProducer</code>的默认主题）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e1289" headers="d88908e1270 ">
                                    <p><code class="codeph">信息</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e1289 d88908e1273 ">
                                    <p>要发布的消息</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e1297" headers="d88908e1270 ">
                                    <p><code class="codeph">RECIPIENT_LIST</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e1297 d88908e1273 ">
                                    <p>发布消息的收件人列表。收件人的类型为<code class="codeph">AQjmsAgent</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e1308" headers="d88908e1270 ">
                                    <p><code class="codeph">deliveryMode</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e1308 d88908e1273 ">
                                    <p><code class="codeph">PERSISTENT</code>或<code class="codeph">NON_PERSISTENT</code> （此版本仅支持<code class="codeph">PERSISTENT</code> ）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e1324" headers="d88908e1270 ">
                                    <p><code class="codeph">优先</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e1324 d88908e1273 ">
                                    <p>此消息的优先级</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e1332" headers="d88908e1270 ">
                                    <p><code class="codeph">传输TimeToLive</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e1332 d88908e1273 ">
                                    <p>消息生存期（以毫秒为单位）（零为无限制）</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-7D8D58AC-CFDE-471D-8252-237BAE32153F__GUID-3ADF44D9-9799-4446-ACCE-E4468AB628E4">
                     <p class="titleinexample">示例14-9发布指定优先级和TimeToLive</p><pre class="oac_no_warn" dir="ltr">TopicConnectionFactory tc_fact = null; TopicConnection t_conn = null; TopicSession jms_sess; TopicPublisher publisher1;主题shipping_orders; int myport = 5521; / * create connection and session * / tc_fact = AQjmsFactory.getTopicConnectionFactory（“MYHOSTNAME”，“MYSID”，myport，“oci8”）; t_conn = tc_fact.createTopicConnection（“jmstopic”，“jmstopic”）; jms_sess = t_conn.createTopicSession（true，Session。CLIENT_ACKNOWLEDGE）; shipped_orders =（（AQjmsSession）jms_sess）。getTopic（“OE”，“Shipped_Orders_Topic”）; publisher1 = jms_sess.createPublisher（shipped_orders）; / *创建TextMessage * / TextMessage jms_sess.createTextMessage（）; / *发布优先级为1的消息，生存时间为200秒* / publisher1.publish（text_message，DeliveryMode。PERSISTENT，1，200000）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3062"></a><a id="ADQUE3061"></a><div class="props_rev_3"><a id="GUID-0B3FC447-D075-4A24-A0D0-93C72B825A20" name="GUID-0B3FC447-D075-4A24-A0D0-93C72B825A20"></a><h3 id="ADQUE-GUID-0B3FC447-D075-4A24-A0D0-93C72B825A20" class="sect3"><span class="enumeration_section">14.12</span>发布指定收件人列表的邮件</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public void publish（javax.jms。消息消息，oracle.jms。AQjmsAgent [] recipient_list）抛出JMSException</pre><p>此方法发布一条消息，指定覆盖主题订阅者的<a href="glossary.html#GUID-F50CE039-717A-4D4C-B4D9-62EB3191885A"><span class="xrefglossterm">收件人</span></a>列表。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-0B3FC447-D075-4A24-A0D0-93C72B825A20__GUID-1CFA2CE8-DEC6-4D4B-A8FD-2CF9D12AE740">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d88908e1422">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d88908e1425">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e1430" headers="d88908e1422 ">
                                    <p><code class="codeph">信息</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e1430 d88908e1425 ">
                                    <p>要发布的消息</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e1438" headers="d88908e1422 ">
                                    <p><code class="codeph">RECIPIENT_LIST</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e1438 d88908e1425 ">
                                    <p>发布消息的收件人列表。收件人的类型为<code class="codeph">AQjmsAgent</code> 。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-0B3FC447-D075-4A24-A0D0-93C72B825A20__GUID-B421C954-F914-4BD9-AC38-5D345DEF3A56">
                     <p class="titleinexample">示例14-10发布指定覆盖主题订阅者的收件人列表</p><pre class="oac_no_warn" dir="ltr">/ *发布指定优先级和timeToLive * / TopicConnectionFactory tc_fact = null; TopicConnection t_conn = null; TopicSession jms_sess; TopicPublisher publisher1;主题shipping_orders; int myport = 5521; AQjmsAgent [] recipList; / * create connection and session * / tc_fact = AQjmsFactory.getTopicConnectionFactory（“MYHOSTNAME”，“MYSID”，myport，“oci8”）; t_conn = tc_fact.createTopicConnection（“jmstopic”，“jmstopic”）; jms_sess = t_conn.createTopicSession（true，Session。CLIENT_ACKNOWLEDGE）; shipped_orders =（（AQjmsSession）jms_sess）。getTopic（“OE”，“Shipped_Orders_Topic”）; publisher1 = jms_sess.createPublisher（shipped_orders）; / * create TextMessage * / TextMessage jms_sess.createTextMessage（）; / *创建两个接收器* / recipList = new AQjmsAgent [2]; recipList [0] = new AQjmsAgent（“ES”，“ES.shipped_orders_topic”，AQAgent。DEFAULT_AGENT_PROTOCOL）; recipList [1] = new AQjmsAgent（“WS”，“WS.shipped_orders_topic”，AQAgent。DEFAULT_AGENT_PROTOCOL）; / *发布指定收件人列表的消息* / publisher1.publish（text_message，recipList）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3064"></a><a id="ADQUE3065"></a><a id="ADQUE3063"></a><div class="props_rev_3"><a id="GUID-D367FE9C-FDCB-44ED-918F-B8912B0EA98A" name="GUID-D367FE9C-FDCB-44ED-918F-B8912B0EA98A"></a><h3 id="ADQUE-GUID-D367FE9C-FDCB-44ED-918F-B8912B0EA98A" class="sect3"><span class="enumeration_section">14.13</span>为没有选择器的JMS主题创建DurableSubscriber</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public javax.jms。TopicSubscriber createDurableSubscriber（javax.jms。主题话题，java.lang。String subs_name）抛出JMSException</pre><p>此方法为没有选择器的<a href="glossary.html#GUID-F601025D-262D-4ECD-A274-1E1F92D9D4EA"><span class="xrefglossterm">JMS主题</span></a>创建DurableSubscriber。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-D367FE9C-FDCB-44ED-918F-B8912B0EA98A__GUID-C099CB95-320B-48F5-A621-57A531569073">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d88908e1531">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d88908e1534">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e1539" headers="d88908e1531 ">
                                    <p><code class="codeph">话题</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e1539 d88908e1534 ">
                                    <p>订阅的非临时主题</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e1547" headers="d88908e1531 ">
                                    <p><code class="codeph">subs_name</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e1547 d88908e1534 ">
                                    <p>用于标识此订阅的名称</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-D367FE9C-FDCB-44ED-918F-B8912B0EA98A__CHDEGJGH">
                     <p class="subhead2" id="GUID-D367FE9C-FDCB-44ED-918F-B8912B0EA98A__GUID-88DA386C-BE92-45E4-BA5E-5DD564789B5B">独家访问主题</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><code class="codeph">CreateDurableSubscriber()</code>和<code class="codeph">Unsubscribe()</code>都需要对其目标主题的独占访问权限。如果在应用这些调用时对同一主题存在挂起的JMS <code class="codeph">send()</code> ， <code class="codeph">publish()</code>或<code class="codeph">receive()</code>操作，则会引发异常ORA-4020。该问题有两种解决方案：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>当没有其他JMS操作待处理主题时， <code class="codeph">createDurableSubscriber()</code>和<code class="codeph">Unsubscribe()</code>调用限制为设置或清理阶段。这可确保其他JMS操作调用不会保留所需的资源。
                           </p>
                        </li>
                        <li>
                           <p>在调用<code class="codeph">createDurableSubscriber()</code>或<code class="codeph">Unsubscribe()</code>之前调用<code class="codeph">TopicSession.commit</code> 。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-D367FE9C-FDCB-44ED-918F-B8912B0EA98A__GUID-FE4D7C88-5C61-4935-BA34-6DE9BC3415E7">
                     <p class="titleinexample">示例14-11为没有选择器的JMS主题创建持久订阅服务器</p><pre class="oac_no_warn" dir="ltr">TopicConnectionFactory tc_fact = null; TopicConnection t_conn = null; TopicSession jms_sess; TopicSubscriber subscriber1;主题shipping_orders; int myport = 5521; AQjmsAgent [] recipList; / * create connection and session * / tc_fact = AQjmsFactory.getTopicConnectionFactory（“MYHOSTNAME”，“MYSID”，myport，“oci8”）; t_conn = tc_fact.createTopicConnection（“jmstopic”，“jmstopic”）; jms_sess = t_conn.createTopicSession（true，Session。CLIENT_ACKNOWLEDGE）; shipped_orders =（（AQjmsSession）jms_sess）。getTopic（“OE”，“Shipped_Orders_Topic”）; / *在shipped_orders主题上创建持久订阅者* / subscriber1 = jms_sess.createDurableSubscriber（shipped_orders，'WesternShipping'）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3067"></a><a id="ADQUE3066"></a><div class="props_rev_3"><a id="GUID-55B7D08A-E221-4B93-997F-80065752F9ED" name="GUID-55B7D08A-E221-4B93-997F-80065752F9ED"></a><h3 id="ADQUE-GUID-55B7D08A-E221-4B93-997F-80065752F9ED" class="sect3"><span class="enumeration_section">14.14</span>为带有选择器的JMS主题创建DurableSubscriber</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public javax.jms。TopicSubscriber createDurableSubscriber（javax.jms。主题话题，java.lang。String subs_name，java.lang。String messageSelector，boolean noLocal）抛出JMSException</pre><p>此方法为具有选择器的JMS主题创建持久订阅者。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-55B7D08A-E221-4B93-997F-80065752F9ED__GUID-A9D4439C-0806-4761-81E9-E574DAE53B2D">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d88908e1674">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d88908e1677">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e1682" headers="d88908e1674 ">
                                    <p><code class="codeph">话题</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e1682 d88908e1677 ">
                                    <p>订阅的非临时主题</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e1690" headers="d88908e1674 ">
                                    <p><code class="codeph">subs_name</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e1690 d88908e1677 ">
                                    <p>用于标识此订阅的名称</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e1698" headers="d88908e1674 ">
                                    <p><code class="codeph">messageSelector</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e1698 d88908e1677 ">
                                    <p>仅传递具有与<code class="codeph">messageSelector</code>表达式匹配的属性的<code class="codeph">messageSelector</code> 。值null或空字符串表示消息使用者没有<code class="codeph">messageSelector</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e1712" headers="d88908e1674 ">
                                    <p><code class="codeph">NOLOCAL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e1712 d88908e1677 ">
                                    <p>如果设置为true，则它禁止传递由其自己的连接发布的消息</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>客户端可以通过创建具有相同名称和不同<code class="codeph">messageSelector</code>的持久TopicSubscriber来更改现有的持久订阅。需要取消订阅才能结束对主题的订阅。
                     </p>
                     <div class="infoboxnotealso" id="GUID-55B7D08A-E221-4B93-997F-80065752F9ED__GUID-0A3F0EFB-E810-40D9-B682-B586729BC415">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="jms-publish-subscribe.html#GUID-D367FE9C-FDCB-44ED-918F-B8912B0EA98A__CHDEGJGH">独家访问主题</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="jms-introduction.html#GUID-9CD17AB0-4085-4E8C-A7FF-E5C15A4BAEFA__CACBBCBJ">MessageSelector</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-55B7D08A-E221-4B93-997F-80065752F9ED__GUID-17647BA9-525B-4F3D-81F5-E70B3979FAC9">
                     <p class="titleinexample">示例14-12使用选择器为JMS主题创建持久订阅服务器</p><pre class="oac_no_warn" dir="ltr">TopicConnectionFactory tc_fact = null; TopicConnection t_conn = null; TopicSession jms_sess; TopicSubscriber subscriber1;主题shipping_orders; int myport = 5521; AQjmsAgent [] recipList; / * create connection and session * / tc_fact = AQjmsFactory.getTopicConnectionFactory（“MYHOSTNAME”，“MYSID”，myport，“oci8”）; t_conn = tc_fact.createTopicConnection（“jmstopic”，“jmstopic”）; jms_sess = t_conn.createTopicSession（true，Session。CLIENT_ACKNOWLEDGE）; shipped_orders =（（AQjmsSession）jms_sess）。getTopic（“OE”，“Shipped_Orders_Topic”）; / *在JMSPriority和用户属性'Region'* / subscriber1 = jms_sess.createDurableSubscriber（shipped_orders，'WesternShipping'，“JMSPriority&gt; 2和Region like'Western％'”，false）创建订户* / / *条件;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3069"></a><a id="ADQUE3068"></a><div class="props_rev_3"><a id="GUID-4251552A-AE97-48FE-972F-A1563616F61C" name="GUID-4251552A-AE97-48FE-972F-A1563616F61C"></a><h3 id="ADQUE-GUID-4251552A-AE97-48FE-972F-A1563616F61C" class="sect3"><span class="enumeration_section">14.15</span>为没有选择器的Oracle对象类型主题创建DurableSubscriber</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public javax.jms。TopicSubscriber createDurableSubscriber（javax.jms。主题话题，java.lang。String subs_name，java.lang。Object payload_factory）抛出JMSException</pre><p>此方法为没有选择器的Oracle <a href="glossary.html#GUID-5A1E34E2-9B71-497D-879B-E355EDCF7108"><span class="xrefglossterm">对象类型</span></a>主题创建持久订阅者。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-4251552A-AE97-48FE-972F-A1563616F61C__GUID-0C5559EE-7699-43ED-A5FD-8F39BCCCCB6F">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d88908e1819">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d88908e1822">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e1827" headers="d88908e1819 ">
                                    <p><code class="codeph">话题</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e1827 d88908e1822 ">
                                    <p>订阅的非临时主题</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e1835" headers="d88908e1819 ">
                                    <p><code class="codeph">subs_name</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e1835 d88908e1822 ">
                                    <p>用于标识此订阅的名称</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e1843" headers="d88908e1819 ">
                                    <p><code class="codeph">payload_factory</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e1843 d88908e1822 ">
                                    <p>用于映射到Oracle ADT的Java类的<code class="codeph">CustomDatumFactory</code>或<code class="codeph">ORADataFactory</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnote" id="GUID-4251552A-AE97-48FE-972F-A1563616F61C__GUID-863F206A-558C-4E5B-B98A-06AE8AB588C4">
                        <p class="notep1">注意：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">CustomDatum</code>支持将在以后的版本中弃用。请改用<code class="codeph">ORADataFactory</code>有效负载工厂。
                              </p>
                           </li>
                           <li>
                              <p>分片队列不支持对象类型消息。</p>
                           </li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-4251552A-AE97-48FE-972F-A1563616F61C__GUID-1F32A37F-CA14-4410-8CA4-DCBFB195D55D">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="jms-publish-subscribe.html#GUID-D367FE9C-FDCB-44ED-918F-B8912B0EA98A__CHDEGJGH">独家访问主题</a> ”</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-4251552A-AE97-48FE-972F-A1563616F61C__GUID-3BA04BBD-8FCA-4736-9067-CE4064FC8A1F">
                     <p class="titleinexample">示例14-13为没有选择器的Oracle对象类型主题创建持久订阅服务器</p><pre class="oac_no_warn" dir="ltr">/ *订阅ADT队列* / TopicConnectionFactory tc_fact = null; TopicConnection t_conn = null; TopicSession t_sess = null; TopicSession jms_sess; TopicSubscriber subscriber1;主题shipping_orders; int my [port = 5521; AQjmsAgent [] recipList; / * J Publisher * / ADTMessage消息创建的oracle对象类型的java映射; / * create connection and session * / tc_fact = AQjmsFactory.getTopicConnectionFactory（“MYHOSTNAME”，“MYSID”，myport，“oci8”）; t_conn = tc_fact.createTopicConnection（“jmstopic”，“jmstopic”）; jms_sess = t_conn.createTopicSession（true，Session。CLIENT_ACKNOWLEDGE）; shipped_orders =（（AQjmsSession）jms_sess）。getTopic（“OE”，“Shipped_Orders_Topic”）; / *创建订阅者，指定正确的CustomDatumFactory * / subscriber1 = jms_sess.createDurableSubscriber（shipped_orders，'WesternShipping'，AQjmsAgent.getFactory（））;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3071"></a><a id="ADQUE3070"></a><div class="props_rev_3"><a id="GUID-468FBDF8-98D0-41BB-A3C1-2554F86A18C3" name="GUID-468FBDF8-98D0-41BB-A3C1-2554F86A18C3"></a><h3 id="ADQUE-GUID-468FBDF8-98D0-41BB-A3C1-2554F86A18C3" class="sect3"><span class="enumeration_section">14.16</span>为带有选择器的Oracle对象类型主题创建DurableSubscriber</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public javax.jms。TopicSubscriber createDurableSubscriber（javax.jms。主题话题，java.lang。String subs_name，java.lang。String messageSelector，boolean noLocal，java.lang。Object payload_factory）抛出JMSException</pre><p>此方法为带有选择器的Oracle对象类型主题创建持久订阅者。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-468FBDF8-98D0-41BB-A3C1-2554F86A18C3__GUID-834A0F56-4878-4F24-A63A-AF7F5CA1D397">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d88908e1952">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d88908e1955">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e1960" headers="d88908e1952 ">
                                    <p><code class="codeph">话题</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e1960 d88908e1955 ">
                                    <p>订阅的非临时主题</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e1968" headers="d88908e1952 ">
                                    <p><code class="codeph">subs_name</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e1968 d88908e1955 ">
                                    <p>用于标识此订阅的名称</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e1976" headers="d88908e1952 ">
                                    <p><code class="codeph">messageSelector</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e1976 d88908e1955 ">
                                    <p>仅传递具有与<code class="codeph">messageSelector</code>表达式匹配的属性的<code class="codeph">messageSelector</code> 。值null或空字符串表示消息使用者没有<code class="codeph">messageSelector</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e1990" headers="d88908e1952 ">
                                    <p><code class="codeph">NOLOCAL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e1990 d88908e1955 ">
                                    <p>如果设置为true，则它禁止传递由其自己的连接发布的消息</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e1998" headers="d88908e1952 ">
                                    <p><code class="codeph">payload_factory</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e1998 d88908e1955 ">
                                    <p>用于映射到Oracle ADT的Java类的<code class="codeph">CustomDatumFactory</code>或<code class="codeph">ORADataFactory</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnote" id="GUID-468FBDF8-98D0-41BB-A3C1-2554F86A18C3__GUID-55DAE94A-AC79-4970-B4E7-B8FCF22EB836">
                        <p class="notep1">注意：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">CustomDatum</code>支持将在以后的版本中弃用。请改用<code class="codeph">ORADataFactory</code>有效负载工厂。
                              </p>
                           </li>
                           <li>
                              <p>分片队列不支持对象yype消息。</p>
                           </li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-468FBDF8-98D0-41BB-A3C1-2554F86A18C3__GUID-EB569355-502F-4F6F-A7CD-768DF09E039C">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="jms-publish-subscribe.html#GUID-D367FE9C-FDCB-44ED-918F-B8912B0EA98A__CHDEGJGH">独家访问主题</a> ”</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-468FBDF8-98D0-41BB-A3C1-2554F86A18C3__GUID-0466319E-1C34-41E8-98A9-40D505767239">
                     <p class="titleinexample">示例14-14为具有选择器的Oracle对象类型主题创建持久订阅服务器</p><pre class="oac_no_warn" dir="ltr">TopicConnectionFactory tc_fact = null; TopicConnection t_conn = null; TopicSession jms_sess; TopicSubscriber subscriber1;主题shipping_orders; int myport = 5521; AQjmsAgent [] recipList; / * J Publisher * / ADTMessage消息创建的oracle对象类型的java映射; / * create connection and session * / tc_fact = AQjmsFactory.getTopicConnectionFactory（“MYHOSTNAME”，“MYSID”，myport，“oci8”）; t_conn = tc_fact.createTopicConnection（“jmstopic”，“jmstopic”）; jms_sess = t_conn.createTopicSession（true，Session。CLIENT_ACKNOWLEDGE）; shipped_orders =（（AQjmsSession）jms_sess）。getTopic（“OE”，“Shipped_Orders_Topic”）; / *创建订阅者，指定正确的CustomDatumFactory和selector * / subscriber1 = jms_sess.createDurableSubscriber（shipped_orders，“WesternShipping”，“priority&gt; 1和tab.user_data.region，如'WESTERN％'”，false，ADTMessage.getFactory（）） ;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3073"></a><a id="ADQUE3074"></a><a id="ADQUE3072"></a><div class="props_rev_3"><a id="GUID-5EF25837-B7C5-491F-9BBF-002626AB94B7" name="GUID-5EF25837-B7C5-491F-9BBF-002626AB94B7"></a><h3 id="ADQUE-GUID-5EF25837-B7C5-491F-9BBF-002626AB94B7" class="sect3"><span class="enumeration_section">14.17</span>指定主题订阅者的转换</h3>
               <div>
                  <div class="section">
                     <p>在向队列/主题发送/发布消息时可以提供转换。在将消息放入队列/主题之前应用转换。</p>
                     <p>应用程序可以使用<code class="codeph">AQjmsQueueSender</code>和<code class="codeph">AQjmsTopicPublisher</code>接口中的<code class="codeph">setTransformation</code>接口指定转换。
                     </p>
                     <p>使用<code class="codeph">CreateDurableSubscriber()</code>调用创建主题订阅者时，也可以指定转换。在将检索的消息返回给订户之前，将转换应用于检索的消息。如果<code class="codeph">CreateDurableSubscriber()</code>调用中指定的订阅者已存在，则其转换将设置为指定的转换。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-5EF25837-B7C5-491F-9BBF-002626AB94B7__GUID-86495C9D-2F86-480A-BE45-DAB65B7A737C">
                     <p class="titleinexample">示例14-15使用转换将消息发送到目标</p>
                     <p>假设订单输入应用程序处理的订单应发布到<code class="codeph">WS_bookedorders_topic</code> 。提供了转换OE2WS（在上一节中定义），以便以正确的格式将消息插入到主题中。
                     </p><pre class="oac_no_warn" dir="ltr">public void ship_bookedorders（TopicSession jms_session，AQjmsADTMessage adt_message）{TopicPublisher publisher;主题话题; try {/ *获取WS_bookedorders_topic * / topic =（（AQjmsSession）jms_session）.getTopic（“WS”，“WS_bookedorders_topic”）的句柄; publisher = jms_session.createPublisher（topic）; / *在发布者* /（（AQjmsTopicPublisher）发布者）.setTransformation（“OE2WS”）中设置转换; publisher.publish（topic，adt_message）; } catch（JMSException ex）{System.out.println（“Exception：”ex）; }}</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-5EF25837-B7C5-491F-9BBF-002626AB94B7__GUID-03D90FC2-59C4-44F7-9370-9794E3389937">
                     <p class="titleinexample">示例14-16指定主题订阅者的转换</p>
                     <p>Western Shipping应用程序使用转换<code class="codeph">OE2WS</code>订阅<code class="codeph">OE2WS</code> 。此转换应用于消息，返回的消息是Oracle对象类型<code class="codeph">WS.WS_orders</code> 。
                     </p>
                     <p>假设JDSublisher已生成WSOrder java类以映射到Oracle对象<code class="codeph">WS.WS_order</code> ：</p><pre class="oac_no_warn" dir="ltr">public AQjmsAdtMessage retrieve_bookedorders（TopicSession jms_session）{TopicSubscriber subscriber;主题话题; AQjmsAdtMessage msg = null;尝试{/ *获取OE_bookedorders_topic * / topic =（（AQjmsSession）jms_session）.getTopic（“OE”，“OE_bookedorders_topic”）的句柄; / *使用转换创建订阅者OE2WS * / subs =（（AQjmsSession）jms_session）.createDurableSubscriber（topic，'WShip'，null，false，WSOrder.getFactory（），“OE2WS”）; msg = subscriber.receive（10）; } catch（JMSException ex）{System.out.println（“Exception：”ex）; } return（AQjmsAdtMessage）msg; }</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3076"></a><a id="ADQUE3075"></a><div class="props_rev_3"><a id="GUID-73D207BA-EF8F-4612-94B9-6A038649424F" name="GUID-73D207BA-EF8F-4612-94B9-6A038649424F"></a><h3 id="ADQUE-GUID-73D207BA-EF8F-4612-94B9-6A038649424F" class="sect3"><span class="enumeration_section">14.18</span>为JMS消息创建远程订阅服务器</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public void createRemoteSubscriber（javax.jms。主题话题，oracle.jms。AQjmsAgent remote_subscriber，java.lang。String messageSelector）抛出JMSException</pre><p>此方法为JMS消息的主题创建远程订户。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-73D207BA-EF8F-4612-94B9-6A038649424F__GUID-1A9113A3-E2B5-46D9-98AE-E0E5E60FB095">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="26%" id="d88908e2215">参数</th>
                                 <th align="left" valign="bottom" width="74%" id="d88908e2218">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e2223" headers="d88908e2215 ">
                                    <p><code class="codeph">话题</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e2223 d88908e2218 ">
                                    <p>主题订阅</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e2231" headers="d88908e2215 ">
                                    <p><code class="codeph">remote_subscriber</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e2231 d88908e2218 ">
                                    <p><code class="codeph">AQjmsAgent</code>指的是远程用户</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e2241" headers="d88908e2215 ">
                                    <p><code class="codeph">messageSelector</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e2241 d88908e2218 ">
                                    <p>仅传递具有与<code class="codeph">messageSelector</code>表达式匹配的属性的<code class="codeph">messageSelector</code> 。值null或空字符串表示消息使用者没有<code class="codeph">messageSelector</code> 。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>Oracle数据库高级队列允许主题具有远程订阅者，例如，相同或不同数据库中其他主题的订阅者。要使用远程订户，您必须在本地和远程主题之间设置<a href="glossary.html#GUID-DE5B852F-823C-4DC8-B6BB-4825D688A00A"><span class="xrefglossterm">传播</span></a> 。
                     </p>
                     <p>远程订户可以是远程主题的特定消费者或远程主题的所有订户。使用<code class="codeph">AQjmsAgent</code>结构定义远程订户。<code class="codeph">AQjmsAgent</code>由名称和地址组成。该名称引用远程主题的<code class="codeph">consumer_name</code> 。地址指的是远程主题。它的语法是<code class="codeph">schema.topic_name[@dblink]</code> 。
                     </p>
                     <p>在远程主题消息发布到特定的消费者来说， <code class="codeph">subscription_name</code>在远程话题收件人必须在名称字段中指定<code class="codeph">AQjmsAgent</code> ，和远程的话题必须在地址字段中指定。要将消息发布到远程主题的所有订户，必须将<code class="codeph">AQjmsAgent</code>的名称字段设置为null。
                     </p>
                     <div class="infoboxnote" id="GUID-73D207BA-EF8F-4612-94B9-6A038649424F__GUID-7B0E7726-C932-4828-89C5-6C2715AD94FD">
                        <p class="notep1">注意：</p>
                        <p>分片队列不支持远程用户。</p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-73D207BA-EF8F-4612-94B9-6A038649424F__GUID-1CBAB7D9-ABEA-4FC4-B414-9AB2F8E46F28">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="jms-introduction.html#GUID-9CD17AB0-4085-4E8C-A7FF-E5C15A4BAEFA__CACBBCBJ">MessageSelector</a> ”</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-73D207BA-EF8F-4612-94B9-6A038649424F__GUID-33B9433D-A1FD-49F9-BC4D-2983BA700A48">
                     <p class="titleinexample">示例14-17为JMS消息主题创建远程订阅服务器</p><pre class="oac_no_warn" dir="ltr">TopicConnectionFactory tc_fact = null; TopicConnection t_conn = null; TopicSession t_sess = null; TopicSession jms_sess; TopicSubscriber subscriber1;主题shipping_orders; int my [port = 5521; AQjmsAgent remoteAgent; / * create connection and session * / tc_fact = AQjmsFactory.getTopicConnectionFactory（“MYHOSTNAME”，“MYSID”，myport，“oci8”）; t_conn = tc_fact.createTopicConnection（“jmstopic”，“jmstopic”）; jms_sess = t_conn.createTopicSession（true，Session。CLIENT_ACKNOWLEDGE）; shipped_orders =（（AQjmsSession）jms_sess）。getTopic（“OE”，“Shipped_Orders_Topic”）; remoteAgent = new AQjmsAgent（“WesternRegion”，“WS.shipped_orders_topic”，null）; / *创建远程订阅者（selector为null）* / subscriber1 =（（AQjmsSession）jms_sess）。createRemoteSubscriber（shipped_orders，remoteAgent，null）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3078"></a><a id="ADQUE3077"></a><div class="props_rev_3"><a id="GUID-A1063E43-BF5C-4466-851D-5D0C489644A0" name="GUID-A1063E43-BF5C-4466-851D-5D0C489644A0"></a><h3 id="ADQUE-GUID-A1063E43-BF5C-4466-851D-5D0C489644A0" class="sect3"><span class="enumeration_section">14.19</span>为Oracle对象类型消息创建远程订阅服务器</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public void createRemoteSubscriber（javax.jms。主题话题，oracle.jms。AQjmsAgent remote_subscriber，java.lang。String messageSelector，java.lang。Object payload_factory）抛出JMSException</pre><p>此方法为Oracle对象类型消息的主题创建远程订户。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-A1063E43-BF5C-4466-851D-5D0C489644A0__GUID-37FEA278-4022-4367-9954-3ABA2955B715">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="26%" id="d88908e2365">参数</th>
                                 <th align="left" valign="bottom" width="74%" id="d88908e2368">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e2373" headers="d88908e2365 ">
                                    <p><code class="codeph">话题</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e2373 d88908e2368 ">
                                    <p>主题订阅</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e2381" headers="d88908e2365 ">
                                    <p><code class="codeph">remote_subscriber</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e2381 d88908e2368 ">
                                    <p><code class="codeph">AQjmsAgent</code>指的是远程用户</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e2391" headers="d88908e2365 ">
                                    <p><code class="codeph">messageSelector</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e2391 d88908e2368 ">
                                    <p>仅传递具有与<code class="codeph">messageSelector</code>表达式匹配的属性的<code class="codeph">messageSelector</code> 。值null或空字符串表示消息使用者没有<code class="codeph">messageSelector</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e2405" headers="d88908e2365 ">
                                    <p><code class="codeph">payload_factory</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e2405 d88908e2368 ">
                                    <p>用于映射到Oracle ADT的Java类的<code class="codeph">CustomDatumFactory</code>或<code class="codeph">ORADataFactory</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnote" id="GUID-A1063E43-BF5C-4466-851D-5D0C489644A0__GUID-F450264E-2332-4F91-A10B-28076BD8D98E">
                        <p class="notep1">注意：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">CustomDatum</code>支持将在以后的版本中弃用。请改用<code class="codeph">ORADataFactory</code>有效负载工厂。
                              </p>
                           </li>
                           <li>
                              <p>分片队列不支持远程订阅者或对象类型消息。</p>
                           </li>
                        </ul>
                     </div>
                     <p>Oracle数据库高级队列允许主题具有远程订阅者，例如，相同或不同数据库中其他主题的订阅者。要使用远程订户，您必须在本地和远程主题之间设置<a href="glossary.html#GUID-DE5B852F-823C-4DC8-B6BB-4825D688A00A"><span class="xrefglossterm">传播</span></a> 。
                     </p>
                     <p>远程订户可以是远程主题的特定消费者或远程主题的所有订户。使用<code class="codeph">AQjmsAgent</code>结构定义远程订户。<code class="codeph">AQjmsAgent</code>由名称和地址组成。该名称引用远程主题的<code class="codeph">consumer_name</code> 。地址指的是远程主题。它的语法是<code class="codeph">schema.topic_name[@dblink]</code> 。
                     </p>
                     <p>在远程主题消息发布到特定的消费者来说， <code class="codeph">subscription_name</code>在远程话题收件人必须在名称字段中指定<code class="codeph">AQjmsAgent</code> ，和远程的话题必须在地址字段中指定。要将消息发布到远程主题的所有订户，必须将<code class="codeph">AQjmsAgent</code>的名称字段设置为null。
                     </p>
                     <div class="infoboxnote" id="GUID-A1063E43-BF5C-4466-851D-5D0C489644A0__GUID-97A92950-F3E4-4469-B0BD-BFA42A123159">
                        <p class="notep1">注意：</p>
                        <p>AQ不支持将多个dblink用于同一目的地。解决方法是，为每个目标使用单个数据库链接。</p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-A1063E43-BF5C-4466-851D-5D0C489644A0__GUID-34D08CAA-C958-49D5-9450-FCD9F92D2AB3">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="jms-introduction.html#GUID-9CD17AB0-4085-4E8C-A7FF-E5C15A4BAEFA__CACBBCBJ">MessageSelector</a> ”</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-A1063E43-BF5C-4466-851D-5D0C489644A0__GUID-4A6E43CF-C41F-45F8-BAC4-AD77DE16FA81">
                     <p class="titleinexample">示例14-18为Oracle对象类型消息的主题创建远程订阅服务器</p><pre class="oac_no_warn" dir="ltr">TopicConnectionFactory tc_fact = null; TopicConnection t_conn = null; TopicSession t_sess = null; TopicSession jms_sess; TopicSubscriber subscriber1;主题shipping_orders; int my [port = 5521; AQjmsAgent remoteAgent; ADTMessage消息; / * create connection and session * / tc_fact = AQjmsFactory.getTopicConnectionFactory（“MYHOSTNAME”，“MYSID”，myport，“oci8”）; t_conn = tc_fact.createTopicConnection（“jmstopic”，“jmstopic”）; / *创建TopicSession * / jms_sess = t_conn.createTopicSession（true，Session。CLIENT_ACKNOWLEDGE）; / *获取发货订单主题* / shipped_orders =（（AQjmsSession）jms_sess）.getTopic（“OE”，“Shipped_Orders_Topic”）; / *创建远程代理* / remoteAgent = new AQjmsAgent（“WesternRegion”，“WS.shipped_orders_topic”，null）; / *使用空选择器创建远程订阅者* / subscriber1 =（（AQjmsSession）jms_sess）。createRemoteSubscriber（shipped_orders，remoteAgent，null，message.getFactory）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3080"></a><a id="ADQUE3079"></a><div class="props_rev_3"><a id="GUID-8D7D0BC0-4454-4310-AF06-11B6A6EAA707" name="GUID-8D7D0BC0-4454-4310-AF06-11B6A6EAA707"></a><h3 id="ADQUE-GUID-8D7D0BC0-4454-4310-AF06-11B6A6EAA707" class="sect3"><span class="enumeration_section">14.20</span>指定远程订户的转换</h3>
               <div>
                  <div class="section">
                     <p>Oracle数据库高级队列允许远程订户（即另一个数据库的订户）订阅主题。</p>
                     <p>使用<code class="codeph">createRemoteSubscriber()</code>调用创建远程订户时，可以指定转换。这使得能够在不同格式的主题之间传播消息。当在主题上发布的消息符合远程订户的标准时，Oracle数据库高级队列会自动将消息传播到为远程订户指定的远程数据库的队列/主题。如果还指定了转换，则Oracle数据库高级队列会在将消息传播到远程数据库的队列/主题之前将转换应用于消息。
                     </p>
                     <div class="infoboxnote" id="GUID-8D7D0BC0-4454-4310-AF06-11B6A6EAA707__GUID-399E0B5C-3EBA-4901-B1B9-8244954F5442">
                        <p class="notep1">注意：</p>
                        <p>分片队列不支持远程用户。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-8D7D0BC0-4454-4310-AF06-11B6A6EAA707__GUID-788F2F52-8F0D-42C6-AC60-6B012FBA53BF">
                     <p class="titleinexample">示例14-19指定远程订阅服务器的转换</p>
                     <p>在OE.OE_bookedorders_topic上创建远程订户，以便消息自动传播到WS.WS_bookedorders_topic。在创建远程订户时指定转换OE2WS，以便到达WS_bookedorders_topic的消息具有正确的格式。</p>
                     <p>假设JDSublisher已生成WSOrder java类以映射到Oracle对象<code class="codeph">WS.WS_order</code></p><pre class="oac_no_warn" dir="ltr">public void create_remote_sub（TopicSession jms_session）{AQjmsAgent subscriber;主题话题;尝试{/ *获取OE_bookedorders_topic * / topic =（（AQjmsSession）jms_session）.getTopic（“OE”，“OE_bookedorders_topic”）的句柄; subscriber = new AQjmsAgent（“WShip”，“WS.WS_bookedorders_topic”）; （（AQjmsSession）jms_session）。createRemoteSubscriber（topic，subscriber，null，WSOrder.getFactory（），“OE2WS”）; } catch（JMSException ex）{System.out.println（“Exception：”ex）; }}</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3082"></a><a id="ADQUE3081"></a><div class="props_rev_3"><a id="GUID-C4B96289-E295-4B48-8423-527D7EC80A2F" name="GUID-C4B96289-E295-4B48-8423-527D7EC80A2F"></a><h3 id="ADQUE-GUID-C4B96289-E295-4B48-8423-527D7EC80A2F" class="sect3"><span class="enumeration_section">14.21</span>取消订阅本地订户的持久订阅</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public void unsubscribe（javax.jms。主题话题，java.lang。String subs_name）抛出JMSException</pre><p>此方法取消订阅本地订户的持久订阅。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-C4B96289-E295-4B48-8423-527D7EC80A2F__GUID-A159EBFE-AD03-4ECD-9F6F-9DA3752472EF">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d88908e2621">参数</th>
                                 <th align="left" valign="bottom" width="76%" id="d88908e2624">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e2629" headers="d88908e2621 ">
                                    <p><code class="codeph">话题</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e2629 d88908e2624 ">
                                    <p>取消订阅的非临时主题</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d88908e2637" headers="d88908e2621 ">
                                    <p><code class="codeph">subs_name</code></p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d88908e2637 d88908e2624 ">
                                    <p>用于标识此订阅的名称</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnotealso" id="GUID-C4B96289-E295-4B48-8423-527D7EC80A2F__GUID-175A5E2E-7204-471B-AFC7-50746D549A4A">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="jms-publish-subscribe.html#GUID-D367FE9C-FDCB-44ED-918F-B8912B0EA98A__CHDEGJGH">独家访问主题</a> ”</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-C4B96289-E295-4B48-8423-527D7EC80A2F__GUID-A33A087E-2FF2-4F1A-9967-940CEC3A62ED">
                     <p class="titleinexample">示例14-20取消订阅本地订阅服务器的持久订阅</p><pre class="oac_no_warn" dir="ltr">TopicConnectionFactory tc_fact = null; TopicConnection t_conn = null; TopicSession jms_sess; TopicSubscriber subscriber1;主题shipping_orders; int myport = 5521; AQjmsAgent [] recipList; / * create connection and session * / tc_fact = AQjmsFactory.getTopicConnectionFactory（“MYHOSTNAME”，“MYSID”，myport，“oci8”）; t_conn = tc_fact.createTopicConnection（“jmstopic”，“jmstopic”）; jms_sess = t_conn.createTopicSession（true，Session。CLIENT_ACKNOWLEDGE）; shipped_orders =（（AQjmsSession）jms_sess）。getTopic（“OE”，“Shipped_Orders_Topic”）; / *取消来自shipped_orders的“WesternShipping”* / jms_sess.unsubscribe（shipped_orders，“WesternShipping”）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3084"></a><a id="ADQUE3083"></a><div class="props_rev_3"><a id="GUID-526219F2-6B38-468D-8FB4-7B84285DFF0E" name="GUID-526219F2-6B38-468D-8FB4-7B84285DFF0E"></a><h3 id="ADQUE-GUID-526219F2-6B38-468D-8FB4-7B84285DFF0E" class="sect3"><span class="enumeration_section">14.22</span>取消订阅远程订阅者的持久订阅</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public void unsubscribe（javax.jms。主题话题，oracle.jms。AQjmsAgent remote_subscriber）抛出JMSException</pre><p>此方法取消订阅远程订阅者的持久订阅。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-526219F2-6B38-468D-8FB4-7B84285DFF0E__GUID-69313B03-63D2-47B1-A87C-70D1CA176CE0">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="26%" id="d88908e2723">参数</th>
                                 <th align="left" valign="bottom" width="74%" id="d88908e2726">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e2731" headers="d88908e2723 ">
                                    <p><code class="codeph">话题</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e2731 d88908e2726 ">
                                    <p>取消订阅的非临时主题</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e2739" headers="d88908e2723 ">
                                    <p><code class="codeph">remote_subscriber</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e2739 d88908e2726 ">
                                    <p><code class="codeph">AQjmsAgent</code>指的是远程用户。<code class="codeph">AQjmsAgent</code>的地址字段不能为空。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnote" id="GUID-526219F2-6B38-468D-8FB4-7B84285DFF0E__GUID-288A3216-2E39-4C26-92DC-5979CB8C3051">
                        <p class="notep1">注意：</p>
                        <p>分片队列不支持远程用户。</p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-526219F2-6B38-468D-8FB4-7B84285DFF0E__GUID-4700E940-1A1B-4AE9-8906-91BB61C957A1">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="jms-publish-subscribe.html#GUID-D367FE9C-FDCB-44ED-918F-B8912B0EA98A__CHDEGJGH">独家访问主题</a> ”</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-526219F2-6B38-468D-8FB4-7B84285DFF0E__GUID-5FF8BA56-A764-49DB-AE1A-EF2F048D6024">
                     <p class="titleinexample">示例14-21取消订阅远程订阅服务器的持久订阅</p><pre class="oac_no_warn" dir="ltr">TopicConnectionFactory tc_fact = null; TopicConnection t_conn = null; TopicSession t_sess = null; TopicSession jms_sess;主题shipping_orders; int myport = 5521; AQjmsAgent remoteAgent; / * create connection and session * / tc_fact = AQjmsFactory.getTopicConnectionFactory（“MYHOSTNAME”，“MYSID”，myport，“oci8”）; t_conn = tc_fact.createTopicConnection（“jmstopic”，“jmstopic”）; jms_sess = t_conn.createTopicSession（true，Session。CLIENT_ACKNOWLEDGE）; shipped_orders =（（AQjmsSession）jms_sess）。getTopic（“OE”，“Shipped_Orders_Topic”）; remoteAgent = new AQjmsAgent（“WS”，“WS.Shipped_Orders_Topic”，null）; / *取消订阅来自shipped_orders的远程代理* /（（AQjmsSession）jms_sess）.unsubscribe（shipped_orders，remoteAgent）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3086"></a><a id="ADQUE3085"></a><div class="props_rev_3"><a id="GUID-3532BDBD-3E62-4E1E-A79B-8012AE661EFF" name="GUID-3532BDBD-3E62-4E1E-A79B-8012AE661EFF"></a><h3 id="ADQUE-GUID-3532BDBD-3E62-4E1E-A79B-8012AE661EFF" class="sect3"><span class="enumeration_section">14.23</span>为标准JMS类型消息主题创建TopicReceiver</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public oracle.jms。AQjmsTopicReceiver createTopicReceiver（javax.jms。主题话题，java.lang。String receiver_name，java.lang。String messageSelector）抛出JMSException</pre><p>此方法为标准JMS类型消息的主题创建<code class="codeph">TopicReceiver</code> 。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-3532BDBD-3E62-4E1E-A79B-8012AE661EFF__GUID-8D507A34-127C-48C2-837D-8F30D7F93DE7">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="26%" id="d88908e2838">参数</th>
                                 <th align="left" valign="bottom" width="74%" id="d88908e2841">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e2846" headers="d88908e2838 ">
                                    <p><code class="codeph">话题</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e2846 d88908e2841 ">
                                    <p>主题访问</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e2854" headers="d88908e2838 ">
                                    <p><code class="codeph">收件者姓名</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e2854 d88908e2841 ">
                                    <p>消息接收者的名字</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e2862" headers="d88908e2838 ">
                                    <p><code class="codeph">messageSelector</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e2862 d88908e2841 ">
                                    <p>仅传递具有与<code class="codeph">messageSelector</code>表达式匹配的属性的<code class="codeph">messageSelector</code> 。值null或空字符串表示消息使用者没有<code class="codeph">messageSelector</code> 。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>Oracle Database Advanced Queuing允许将消息发送到指定的收件人。这些接收者可能是也可能不是该主题的订阅者。如果接收者不是该主题的订阅者，则它仅接收明确发送给它的那些消息。必须使用此方法，以便为不是持久订阅者的使用者创建<code class="codeph">TopicReceiver</code>对象。
                     </p>
                     <div class="infoboxnotealso" id="GUID-3532BDBD-3E62-4E1E-A79B-8012AE661EFF__GUID-D3EF1552-2EF9-4C66-85B0-01464EDAF16B">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="jms-introduction.html#GUID-9CD17AB0-4085-4E8C-A7FF-E5C15A4BAEFA__CACBBCBJ">MessageSelector</a> ”</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-3532BDBD-3E62-4E1E-A79B-8012AE661EFF__GUID-7177F611-3F0B-4C50-89F6-CE06153C09FB">
                     <p class="titleinexample">示例14-22为标准JMS类型消息创建TopicReceiver</p><pre class="oac_no_warn" dir="ltr">TopicConnectionFactory tc_fact = null; TopicConnection t_conn = null; TopicSession t_sess = ull; TopicSession jms_sess;主题shipping_orders; int myport = 5521; TopicReceiver接收器; / * create connection and session * / tc_fact = AQjmsFactory.getTopicConnectionFactory（“MYHOSTNAME”，“MYSID”，myport，“oci8”）; t_conn = tc_fact.createTopicConnection（“jmstopic”，“jmstopic”）; jms_sess = t_conn.createTopicSession（true，Session。CLIENT_ACKNOWLEDGE）; shipped_orders =（（AQjmsSession）jms_sess）。getTopic（“WS”，“Shipped_Orders_Topic”）; receiver =（（AQjmsSession）jms_sess）。createTopicReceiver（shipped_orders，“WesternRegion”，null）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3088"></a><a id="ADQUE3087"></a><div class="props_rev_3"><a id="GUID-9E165968-66F8-4A2E-A4F7-1B8F38832DA9" name="GUID-9E165968-66F8-4A2E-A4F7-1B8F38832DA9"></a><h3 id="ADQUE-GUID-9E165968-66F8-4A2E-A4F7-1B8F38832DA9" class="sect3"><span class="enumeration_section">14.24</span>为Oracle对象类型消息主题创建TopicReceiver</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public oracle.jms。AQjmsTopicReceiver createTopicReceiver（javax.jms。主题话题，java.lang。String receiver_name，java.lang。String messageSelector，java.lang。Object payload_factory）抛出JMSException</pre><p>此方法使用选择器为Oracle对象类型消息的主题创建<code class="codeph">TopicReceiver</code> 。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-9E165968-66F8-4A2E-A4F7-1B8F38832DA9__GUID-B608E2ED-21C2-44C7-AA82-343AD47A867E">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="26%" id="d88908e2965">参数</th>
                                 <th align="left" valign="bottom" width="74%" id="d88908e2968">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e2973" headers="d88908e2965 ">
                                    <p><code class="codeph">话题</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e2973 d88908e2968 ">
                                    <p>主题访问</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e2981" headers="d88908e2965 ">
                                    <p><code class="codeph">收件者姓名</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e2981 d88908e2968 ">
                                    <p>消息接收者的名字</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e2989" headers="d88908e2965 ">
                                    <p><code class="codeph">messageSelector</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e2989 d88908e2968 ">
                                    <p>仅传递具有与<code class="codeph">messageSelector</code>表达式匹配的属性的<code class="codeph">messageSelector</code> 。值null或空字符串表示消息使用者没有<code class="codeph">messageSelector</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e3003" headers="d88908e2965 ">
                                    <p><code class="codeph">payload_factory</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e3003 d88908e2968 ">
                                    <p>用于映射到Oracle ADT的Java类的<code class="codeph">CustomDatumFactory</code>或<code class="codeph">ORADataFactory</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnote" id="GUID-9E165968-66F8-4A2E-A4F7-1B8F38832DA9__GUID-9003F89B-3F9E-4DF1-B10A-0B6D046057C7">
                        <p class="notep1">注意：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">CustomDatum</code>支持将在以后的版本中弃用。请改用<code class="codeph">ORADataFactory</code>有效负载工厂。
                              </p>
                           </li>
                           <li>
                              <p>分片队列不支持对象类型消息。</p>
                           </li>
                        </ul>
                     </div>
                     <p>Oracle Database Advanced Queuing允许将消息发送给主题的所有订阅者或指定的收件人。这些接收者可能是也可能不是该主题的订阅者。如果接收者不是该主题的订阅者，则它仅接收明确发送给它的那些消息。必须使用此方法，以便为不是持久订阅者的使用者创建<code class="codeph">TopicReceiver</code>对象。
                     </p>
                     <div class="infoboxnotealso" id="GUID-9E165968-66F8-4A2E-A4F7-1B8F38832DA9__GUID-B5AC5C70-5B77-4622-8F2F-E76B3592CD0B">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="jms-introduction.html#GUID-9CD17AB0-4085-4E8C-A7FF-E5C15A4BAEFA__CACBBCBJ">MessageSelector</a> ”</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-9E165968-66F8-4A2E-A4F7-1B8F38832DA9__GUID-B77C939F-7E7E-4A54-A40C-BE6E68178522">
                     <p class="titleinexample">示例14-23为Oracle对象类型消息创建TopicReceiver</p><pre class="oac_no_warn" dir="ltr">TopicConnectionFactory tc_fact = null; TopicConnection t_conn = null; TopicSession t_sess = null; TopicSession jms_sess;主题shipping_orders; int myport = 5521; TopicReceiver接收器; / * create connection and session * / tc_fact = AQjmsFactory.getTopicConnectionFactory（“MYHOSTNAME”，“MYSID”，myport，“oci8”）; t_conn = tc_fact.createTopicConnection（“jmstopic”，“jmstopic”）; jms_sess = t_conn.createTopicSession（true，Session。CLIENT_ACKNOWLEDGE）; shipped_orders =（（AQjmsSession）jms_sess）。getTopic（“WS”，“Shipped_Orders_Topic”）; receiver =（（AQjmsSession）jms_sess）。createTopicReceiver（shipped_orders，“WesternRegion”，null）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3090"></a><a id="ADQUE3091"></a><a id="ADQUE3089"></a><div class="props_rev_3"><a id="GUID-B5A94557-8D39-4C3E-9D76-E78BA526E440" name="GUID-B5A94557-8D39-4C3E-9D76-E78BA526E440"></a><h3 id="ADQUE-GUID-B5A94557-8D39-4C3E-9D76-E78BA526E440" class="sect3"><span class="enumeration_section">14.25</span>为标准JMS消息创建TopicBrowser</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public oracle.jms。TopicBrowser createBrowser（javax.jms。主题话题，java.lang。String cons_name，java.lang。String messageSelector）抛出JMSException</pre><p>此方法使用<code class="codeph">TextMessage</code> ， <code class="codeph">StreamMessage</code> ， <code class="codeph">ObjectMessage</code> ， <code class="codeph">BytesMessage</code>或<code class="codeph">MapMessage</code>消息正文为主题创建<code class="codeph">TopicBrowser</code> 。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-B5A94557-8D39-4C3E-9D76-E78BA526E440__GUID-9438189B-75EC-4914-9E43-938EA17FD5E6">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="26%" id="d88908e3135">参数</th>
                                 <th align="left" valign="bottom" width="74%" id="d88908e3138">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e3143" headers="d88908e3135 ">
                                    <p><code class="codeph">话题</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e3143 d88908e3138 ">
                                    <p>主题访问</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e3151" headers="d88908e3135 ">
                                    <p><code class="codeph">cons_name</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e3151 d88908e3138 ">
                                    <p>持久订户或消费者的名称</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e3159" headers="d88908e3135 ">
                                    <p><code class="codeph">messageSelector</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e3159 d88908e3138 ">
                                    <p>仅传递具有与<code class="codeph">messageSelector</code>表达式匹配的属性的<code class="codeph">messageSelector</code> 。值null或空字符串表示消息使用者没有<code class="codeph">messageSelector</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e3173" headers="d88908e3135 ">
                                    <p><code class="codeph">payload_factory</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e3173 d88908e3138 ">
                                    <p>用于映射到Oracle ADT的Java类的<code class="codeph">CustomDatumFactory</code>或<code class="codeph">ORADataFactory</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnotealso" id="GUID-B5A94557-8D39-4C3E-9D76-E78BA526E440__GUID-2B127D7D-63D5-44AF-A2C4-5A4CCF4679DC">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="jms-introduction.html#GUID-9CD17AB0-4085-4E8C-A7FF-E5C15A4BAEFA__CACBBCBJ">MessageSelector</a> ”</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-B5A94557-8D39-4C3E-9D76-E78BA526E440__GUID-0A6BF10E-34EB-4B3C-9BB7-68A439541F17">
                     <p class="titleinexample">示例14-24在没有选择器的情况下创建TopicBrowser</p><pre class="oac_no_warn" dir="ltr">/ *创建一个没有选择器的浏览器* / TopicSession jms_session; TopicBrowser浏览器;主题话题; browser =（（AQjmsSession）jms_session）.createBrowser（topic，“SUBS1”）;</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-B5A94557-8D39-4C3E-9D76-E78BA526E440__GUID-50AC9FFD-BF69-4538-99BB-33E0BF6AE960">
                     <p class="titleinexample">示例14-25使用指定的选择器创建TopicBrowser</p><pre class="oac_no_warn" dir="ltr">/ *为具有指定选择器的主题创建浏览器* / TopicSession jms_session; TopicBrowser浏览器;主题话题; / *创建一个浏览器来查看具有correlationID = RUSH * / browser =（（AQjmsSession）jms_session）的消息.createBrowser（topic，“SUBS1”，“JMSCorrelationID ='RUSH'”）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3093"></a><a id="ADQUE3094"></a><a id="ADQUE3092"></a><div class="props_rev_3"><a id="GUID-95BE7FA2-76E1-40CD-90BB-0E96D6E39F54" name="GUID-95BE7FA2-76E1-40CD-90BB-0E96D6E39F54"></a><h3 id="ADQUE-GUID-95BE7FA2-76E1-40CD-90BB-0E96D6E39F54" class="sect3"><span class="enumeration_section">14.26</span>为标准JMS消息创建TopicBrowser，锁定消息</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public oracle.jms。TopicBrowser createBrowser（javax.jms。主题话题，java.lang。String cons_name，java.lang。String messageSelector，boolean locked）抛出JMSException</pre><p>此方法为包含文本，流，对象，字节或映射消息的主题创建<code class="codeph">TopicBrowser</code> ，在浏览时锁定消息。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-95BE7FA2-76E1-40CD-90BB-0E96D6E39F54__GUID-B68C0A1C-BA13-4AFC-99AD-E3EE5263B350">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="26%" id="d88908e3275">参数</th>
                                 <th align="left" valign="bottom" width="74%" id="d88908e3278">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e3283" headers="d88908e3275 ">
                                    <p><code class="codeph">话题</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e3283 d88908e3278 ">
                                    <p>主题访问</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e3291" headers="d88908e3275 ">
                                    <p><code class="codeph">cons_name</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e3291 d88908e3278 ">
                                    <p>持久订户或消费者的名称</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e3299" headers="d88908e3275 ">
                                    <p><code class="codeph">messageSelector</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e3299 d88908e3278 ">
                                    <p>仅传递具有与<code class="codeph">messageSelector</code>表达式匹配的属性的<code class="codeph">messageSelector</code> 。值null或空字符串表示消息使用者没有<code class="codeph">messageSelector</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e3313" headers="d88908e3275 ">
                                    <p><code class="codeph">锁定</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e3313 d88908e3278 ">
                                    <p>如果设置为true，则消息在浏览时被锁定（类似于SELECT for UPDATE）</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-95BE7FA2-76E1-40CD-90BB-0E96D6E39F54__GUID-3D17F146-4CD9-49C8-B830-8AEFE53EED48">
                     <p class="titleinexample">示例14-26在没有选择器的情况下创建TopicBrowser，在浏览时锁定消息</p><pre class="oac_no_warn" dir="ltr">/ *创建一个没有选择器的浏览器* / TopicSession jms_session; TopicBrowser浏览器;主题话题; browser =（（AQjmsSession）jms_session）.createBrowser（topic，“SUBS1”，true）;</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-95BE7FA2-76E1-40CD-90BB-0E96D6E39F54__GUID-3CABEF2F-6431-4FDD-BA34-BCFB6D3E5B09">
                     <p class="titleinexample">示例14-27使用指定的选择器创建TopicBrowser，锁定消息</p><pre class="oac_no_warn" dir="ltr">/ *为具有指定选择器的主题创建浏览器* / TopicSession jms_session; TopicBrowser浏览器;主题话题; / *创建一个浏览器，以锁定模式查看具有correlationID = RUSH的消息* / browser =（（AQjmsSession）jms_session）.createBrowser（topic，“SUBS1”，“JMSCorrelationID ='RUSH'”，true）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3096"></a><a id="ADQUE3095"></a><div class="props_rev_3"><a id="GUID-36964605-00F2-4585-9177-9D2C3268E578" name="GUID-36964605-00F2-4585-9177-9D2C3268E578"></a><h3 id="ADQUE-GUID-36964605-00F2-4585-9177-9D2C3268E578" class="sect3"><span class="enumeration_section">14.27</span>为Oracle对象类型消息创建TopicBrowser</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public oracle.jms。TopicBrowser createBrowser（javax.jms。主题话题，java.lang。String cons_name，java.lang。String messageSelector，java.lang。Object payload_factory）抛出JMSException</pre><p>此方法为Oracle对象类型消息的主题创建<code class="codeph">TopicBrowser</code> 。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-36964605-00F2-4585-9177-9D2C3268E578__GUID-620B349D-ECF6-4652-A7BF-5CAF183512B4">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="26%" id="d88908e3401">参数</th>
                                 <th align="left" valign="bottom" width="74%" id="d88908e3404">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e3409" headers="d88908e3401 ">
                                    <p><code class="codeph">话题</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e3409 d88908e3404 ">
                                    <p>主题访问</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e3417" headers="d88908e3401 ">
                                    <p><code class="codeph">cons_name</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e3417 d88908e3404 ">
                                    <p>持久订户或消费者的名称</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e3425" headers="d88908e3401 ">
                                    <p><code class="codeph">messageSelector</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e3425 d88908e3404 ">
                                    <p>仅传递具有与<code class="codeph">messageSelector</code>表达式匹配的属性的<code class="codeph">messageSelector</code> 。值null或空字符串表示消息使用者没有<code class="codeph">messageSelector</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e3439" headers="d88908e3401 ">
                                    <p><code class="codeph">payload_factory</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e3439 d88908e3404 ">
                                    <p>用于映射到Oracle ADT的Java类的<code class="codeph">CustomDatumFactory</code>或<code class="codeph">ORADataFactory</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnote" id="GUID-36964605-00F2-4585-9177-9D2C3268E578__GUID-25AF7B1D-8D98-4D4C-8DD7-CB363BD1B75C">
                        <p class="notep1">注意：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">CustomDatum</code>支持将在以后的版本中弃用。请改用<code class="codeph">ORADataFactory</code>有效负载工厂。
                              </p>
                           </li>
                           <li>
                              <p>分片队列不支持对象类型消息。</p>
                           </li>
                        </ul>
                     </div>
                     <p>可以使用<code class="codeph">getFactory</code>静态方法获取映射到SQL对象类型有效负载的特定Java类的<code class="codeph">CustomDatumFactory</code> 。假设主题<code class="codeph">test_topic</code>具有<code class="codeph">SCOTT.EMPLOYEE</code>类型的有效负载，并且Jpublisher为此Oracle对象类型生成的Java类称为<code class="codeph">Employee</code> 。Employee类实现<code class="codeph">CustomDatum</code>接口。可以使用<code class="codeph">Employee.getFactory()</code>方法获取此类的<code class="codeph">CustomDatumFactory</code> 。
                     </p>
                     <div class="infoboxnotealso" id="GUID-36964605-00F2-4585-9177-9D2C3268E578__GUID-A2791877-3E48-4427-9BEF-BAC8E18D5760">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="jms-introduction.html#GUID-9CD17AB0-4085-4E8C-A7FF-E5C15A4BAEFA__CACBBCBJ">MessageSelector</a> ”</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-36964605-00F2-4585-9177-9D2C3268E578__GUID-4D182A8F-7642-4728-B0F3-3C4066005B03">
                     <p class="titleinexample">示例14-28为AdtMessage消息创建TopicBrowser</p><pre class="oac_no_warn" dir="ltr">/ *使用EMPLOYEE * / TopicSession jms_session TopicBrowser浏览器类型的AdtMessage消息为主题创建浏览器;主题test_topic; browser =（（AQjmsSession）jms_session）.createBrowser（test_topic，“SUBS1”，Employee.getFactory（））;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3098"></a><a id="ADQUE3097"></a><div class="props_rev_3"><a id="GUID-D467A464-3B85-4197-9F91-023A321F1E88" name="GUID-D467A464-3B85-4197-9F91-023A321F1E88"></a><h3 id="ADQUE-GUID-D467A464-3B85-4197-9F91-023A321F1E88" class="sect3"><span class="enumeration_section">14.28</span>为Oracle对象类型消息创建TopicBrowser，锁定消息</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public oracle.jms。TopicBrowser createBrowser（javax.jms。主题话题，java.lang。String cons_name，java.lang。String messageSelector，java.lang。Object payload_factory，boolean locked）抛出JMSException</pre><p>此方法为Oracle对象类型消息的主题创建<code class="codeph">TopicBrowser</code> ，在浏览时锁定消息。它具有以下参数：</p>
                     <div class="tblformal" id="GUID-D467A464-3B85-4197-9F91-023A321F1E88__GUID-F11B8FDC-0589-4AD3-9BBE-FDE900AF7A36">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="The first column is the name of a parameter. The second column describes it." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="26%" id="d88908e3572">参数</th>
                                 <th align="left" valign="bottom" width="74%" id="d88908e3575">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e3580" headers="d88908e3572 ">
                                    <p><code class="codeph">话题</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e3580 d88908e3575 ">
                                    <p>主题访问</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e3588" headers="d88908e3572 ">
                                    <p><code class="codeph">cons_name</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e3588 d88908e3575 ">
                                    <p>持久订户或消费者的名称</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e3596" headers="d88908e3572 ">
                                    <p><code class="codeph">messageSelector</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e3596 d88908e3575 ">
                                    <p>仅传递具有与<code class="codeph">messageSelector</code>表达式匹配的属性的<code class="codeph">messageSelector</code> 。值null或空字符串表示消息使用者没有<code class="codeph">messageSelector</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e3610" headers="d88908e3572 ">
                                    <p><code class="codeph">payload_factory</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e3610 d88908e3575 ">
                                    <p>用于映射到Oracle ADT的Java类的<code class="codeph">CustomDatumFactory</code>或<code class="codeph">ORADataFactory</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="26%" id="d88908e3623" headers="d88908e3572 ">
                                    <p><code class="codeph">锁定</code></p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d88908e3623 d88908e3575 ">
                                    <p>如果设置为true，则消息在浏览时被锁定（类似于SELECT for UPDATE）</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnote" id="GUID-D467A464-3B85-4197-9F91-023A321F1E88__GUID-7EBE2156-4BD5-41FA-90BE-51476CA3E9C6">
                        <p class="notep1">注意：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">CustomDatum</code>支持将在以后的版本中弃用。请改用<code class="codeph">ORADataFactory</code>有效负载工厂。
                              </p>
                           </li>
                           <li>
                              <p>分片队列不支持对象类型消息。</p>
                           </li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-D467A464-3B85-4197-9F91-023A321F1E88__GUID-C03CD205-39F3-4A6B-80E2-87F238856BE8">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="jms-introduction.html#GUID-9CD17AB0-4085-4E8C-A7FF-E5C15A4BAEFA__CACBBCBJ">MessageSelector</a> ”</span></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-D467A464-3B85-4197-9F91-023A321F1E88__GUID-F96CA37B-B1A2-4605-8F6D-A7BC000F1A54">
                     <p class="titleinexample">示例14-29为AdtMessage消息创建TopicBrowser，锁定消息</p><pre class="oac_no_warn" dir="ltr">/ *在锁定模式下使用类型为EMPLOYEE *的AdtMessage消息为主题创建一个浏览器/ TopicSession jms_session TopicBrowser浏览器;主题test_topic; browser =（（AQjmsSession）jms_session）.createBrowser（test_topic，“SUBS1”，Employee.getFactory（），true）;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADQUE3100"></a><a id="ADQUE3099"></a><div class="props_rev_3"><a id="GUID-073E8D0D-703B-4941-869A-7AA8C9F4CCC1" name="GUID-073E8D0D-703B-4941-869A-7AA8C9F4CCC1"></a><h3 id="ADQUE-GUID-073E8D0D-703B-4941-869A-7AA8C9F4CCC1" class="sect3"><span class="enumeration_section">14.29</span>使用TopicBrowser浏览消息</h3>
               <div>
                  <div class="section"><pre class="oac_no_warn" dir="ltr">public void purgeSeen（）抛出JMSException</pre><p>此方法使用<code class="codeph">TopicBrowser</code>浏览消息。使用<code class="codeph">java.util.方法<code class="codeph">java.util.Enumeration</code>以查看消息列表。使用<code class="codeph">purgeSeen</code>中的<code class="codeph">TopicBrowser</code>方法清除当前浏览期间看到的消息。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-073E8D0D-703B-4941-869A-7AA8C9F4CCC1__GUID-4202A758-8D87-4E4E-B69A-A6E1528F6958">
                     <p class="titleinexample">示例14-30使用指定的选择器创建TopicBrowser</p><pre class="oac_no_warn" dir="ltr">/ *为具有指定选择器的主题创建浏览器* / public void browse_rush_orders（TopicSession jms_session）TopicBrowser浏览器;主题话题; ObjectMessage obj_message BolOrder new_order;枚举消息; / *获取new_orders主题的句柄* / topic =（（AQjmsSession）jms_session）。getTopic（“OE”，“OE_bookedorders_topic”）; / *创建一个浏览器来查看RUSH命令* / browser =（（AQjmsSession）jms_session）.createBrowser（topic，“SUBS1”，“JMSCorrelationID ='RUSH'”）; / *浏览消息* / for（messages = browser.elements（）; message.hasMoreElements（）;）{obj_message =（ObjectMessage）message.nextElement（）;} / *清除在此浏览* /浏览器中看到的消息。 purgeSeen（）</pre></div>
                  <!-- class="example" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
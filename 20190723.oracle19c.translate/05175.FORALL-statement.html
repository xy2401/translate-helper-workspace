<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The FORALL statement runs one DML statement multiple times, with different values in the VALUES and WHERE clauses."></meta>
      <meta name="description" content="The FORALL statement runs one DML statement multiple times, with different values in the VALUES and WHERE clauses."></meta>
      <title>FORALL声明</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database PL/SQL Language Reference "></meta>
      <meta property="og:description" content="The FORALL statement runs one DML statement multiple times, with different values in the VALUES and WHERE clauses."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database PL/SQL Language Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-language-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-13T20:26:20-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96448-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="FOR-LOOP-statement.html" title="Previous" type="text/html"></link>
      <link rel="next" href="formal-parameter-declaration.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Language Reference"></meta>
    <meta name="dcterms.isVersionOf" content="LNPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="FOR-LOOP-statement.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="formal-parameter-declaration.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库PL / SQL语言参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="plsql-language-elements.html" property="item" typeof="WebPage"><span property="name">PL / SQL语言元素</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">FORALL声明</li>
            </ol>
            <a id="GUID-C45B8241-F9DF-4C93-8577-C840A25963DB" name="GUID-C45B8241-F9DF-4C93-8577-C840A25963DB"></a><a id="LNPLS1532"></a><a id="LNPLS1171"></a><a id="LNPLS1172"></a><a id="LNPLS1533"></a><a id="LNPLS1534"></a><a id="LNPLS1535"></a><a id="LNPLS1536"></a><a id="LNPLS1537"></a><a id="LNPLS1538"></a><a id="LNPLS1539"></a><a id="LNPLS1541"></a><a id="LNPLS1554"></a><a id="LNPLS1555"></a><a id="LNPLS1556"></a><a id="LNPLS1557"></a><a id="LNPLS01321"></a>
            
            <h2 id="LNPLS-GUID-C45B8241-F9DF-4C93-8577-C840A25963DB" class="sect2"><span class="enumeration_section">13.34</span> FORALL声明</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">FORALL</code>语句多次运行一个DML语句，在<code class="codeph">VALUES</code>和<code class="codeph">WHERE</code>子句中使用不同的值。
               </p>
               <div class="section">
                  <p>不同的值来自现有的，已填充的集合或主机阵列。<code class="codeph">FORALL</code>语句通常比等效的<code class="codeph">FOR</code> <code class="codeph">LOOP</code>语句快得多。
                  </p>
                  <div class="infoboxnote" id="GUID-C45B8241-F9DF-4C93-8577-C840A25963DB__GUID-2D860C31-ADFC-44B0-ADF6-DDF4B04626C8">
                     <p class="notep1">注意：</p>
                     <p>您只能在服务器程序中使用<code class="codeph">FORALL</code>语句，而不能在客户端程序中使用<code class="codeph">FORALL</code>语句。
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-C45B8241-F9DF-4C93-8577-C840A25963DB__GUID-297D8035-8CCE-4238-A773-B3EADB4E7F0B">话题</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="FORALL-statement.html#GUID-C45B8241-F9DF-4C93-8577-C840A25963DB__CJADDGFI">句法</a></p>
                     </li>
                     <li>
                        <p><a href="FORALL-statement.html#GUID-C45B8241-F9DF-4C93-8577-C840A25963DB__CJAHCBJH">语义</a></p>
                     </li>
                     <li>
                        <p><a href="FORALL-statement.html#GUID-C45B8241-F9DF-4C93-8577-C840A25963DB__CJAIBIAA">例子</a></p>
                     </li>
                     <li>
                        <p><a href="FORALL-statement.html#GUID-C45B8241-F9DF-4C93-8577-C840A25963DB__CJAJIIGC">相关话题</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-C45B8241-F9DF-4C93-8577-C840A25963DB__CJADDGFI">
                  <p class="subhead1" id="GUID-C45B8241-F9DF-4C93-8577-C840A25963DB__GUID-DF01DCDB-A353-4BD7-943F-26AC7131461E">句法</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-C45B8241-F9DF-4C93-8577-C840A25963DB__GUID-EF24D54E-6D39-497D-9643-B545945499C8"><span class="italic">forall_statement</span> :: =</p>
                  <div class="figure" id="GUID-C45B8241-F9DF-4C93-8577-C840A25963DB__GUID-3C7B249E-CBD3-486C-9346-0BCBFB1CBDC2"><img src="img/forall_statement.gif" alt="下面是forall_statement.eps的描述" title="下面是forall_statement.eps的描述" longdesc="img_text/forall_statement.html"><br><a href="img_text/forall_statement.html">forall_statement.eps插图的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-C45B8241-F9DF-4C93-8577-C840A25963DB__GUID-81540AAB-1D28-4B93-B249-5124B8BA3902"><span class="italic">bounds_clause</span> :: =</p>
                  <div class="figure" id="GUID-C45B8241-F9DF-4C93-8577-C840A25963DB__GUID-8C6C5252-41F4-416C-8630-CC379D45635A"><img src="img/bounds_clause.gif" alt="下面是bounds_clause.eps的描述" title="下面是bounds_clause.eps的描述" longdesc="img_text/bounds_clause.html"><br><a href="img_text/bounds_clause.html">插图描述bounds_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-C45B8241-F9DF-4C93-8577-C840A25963DB__CJAHCBJH">
                  <p class="subhead1" id="GUID-C45B8241-F9DF-4C93-8577-C840A25963DB__GUID-90482728-71A7-47F6-B233-E0F8C4E43770">语义</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-C45B8241-F9DF-4C93-8577-C840A25963DB__GUID-3B4BE2F2-7303-4440-86EB-2159B1D0FC43"><span class="italic">forall_statement</span></p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><span class="bold"><span class="italic">指数</span></span></p>
                  <p>隐式声明的整数变量的名称，该变量是<code class="codeph">FORALL</code>语句的本地变量。<code class="codeph">FORALL</code>语句之外的语句不能引用<span class="italic"><code class="codeph">index</code></span> 。<code class="codeph">FORALL</code>语句中的语句可以将<span class="italic"><code class="codeph">index</code></span>作为索引变量引用，但不能在表达式中使用它或更改其值。运行<code class="codeph">FORALL</code>语句后， <span class="italic"><code class="codeph">index</code></span>未定义。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><span class="bold"><span class="italic">dml_statement</span></span></p>
                  <p>一个静态或动态<code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code>或<code class="codeph">MERGE</code>语句，它在<code class="codeph">VALUES</code>或<code class="codeph">WHERE</code>子句中引用至少一个集合。性能优势仅适用于使用<span class="italic"><code class="codeph">index</code></span>作为索引的集合引用。
                  </p>
                  <p><span class="italic"><code class="codeph">dml_statement</code></span>引用的每个集合<span class="italic"><code class="codeph">dml_statement</code></span>必须具有与<span class="italic"><code class="codeph">index</code></span>的值匹配的<span class="italic"><code class="codeph">index</code></span> 。如果将<code class="codeph">DELETE</code> ， <code class="codeph">EXTEND</code>或<code class="codeph">TRIM</code>方法应用于一个集合，也将其应用于其他集合，以便所有集合具有相同的索引集。如果任何集合缺少引用元素，PL / SQL会引发异常。
                  </p>
                  <p><span class="bold">对<span class="italic">dml_statement的</span>限制</span></p>
                  <p>如果<span class="italic"><code class="codeph">dml_statement</code></span>是动态SQL语句，则<code class="codeph">USING</code>子句中的值（动态SQL语句的绑定变量）必须是对集合的简单引用，而不是表达式。例如， <span class="italic"><code class="codeph">collection</code></span> <code class="codeph">(</code> <span class="italic"><code class="codeph">i</code></span> <code class="codeph">)</code>有效，但<code class="codeph">UPPER(</code> <span class="italic"><code class="codeph">collection</code></span> <code class="codeph">(</code> <span class="italic"><code class="codeph">i</code></span> <code class="codeph">))</code>无效。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><span class="bold">保存例外</span></p>
                  <p>即使某些DML语句失败，也可以继续<code class="codeph">FORALL</code>语句。有关更多信息，请参阅<span class="q">“ <a href="plsql-optimization-and-tuning.html#GUID-DAF46F06-EF3F-4B1A-A518-5238B80C69FA" title="要允许FORALL语句继续，即使它的某些DML语句失败，也包括SAVE EXCEPTIONS子句。当DML语句失败时，PL / SQL不会引发异常;相反，它保存了有关失败的信息。FORALL语句完成后，PL / SQL为FORALL语句（ORA-24381）引发一个异常。">FORALL语句完成后处理FORALL异常</a> ”</span> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-C45B8241-F9DF-4C93-8577-C840A25963DB__GUID-28AA16A2-0BC2-4EBC-82BB-408BD51DACB5"><span class="italic">bounds_clause</span></p>
                  <p>指定为变量<span class="italic"><code class="codeph">index</code></span>提供值的集合元素索引。对于每个值，SQL引擎运行<span class="italic"><code class="codeph">dml_statement</code></span>一次。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><span class="bold"><span class="italic">lower_bound</span> .. <span class="italic">upper_bound</span></span></p>
                  <p><span class="italic"><code class="codeph">lower_bound</code></span>和<span class="italic"><code class="codeph">upper_bound</code></span>都是PL / SQL在输入<code class="codeph">FORALL</code>语句时计算一次的数值表达式，并在必要时<code class="codeph">FORALL</code>入到最接近的整数。生成的整数必须是有效连续索引号范围的下限和上限。如果范围中的元素丢失或被删除，PL / SQL会引发异常。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><span class="bold"><span class="italic">收集</span>指数[BETWEEN <span class="italic">lower_bound</span>和<span class="italic">upper_bound</span> ]</span></p>
                  <p>指定<span class="italic"><code class="codeph">index</code></span>的值对应于<span class="italic"><code class="codeph">collection</code></span>的元素的索引。索引不必是连续的。
                  </p>
                  <p><span class="italic"><code class="codeph">lower_bound</code></span>和<span class="italic"><code class="codeph">upper_bound</code></span>都是PL / SQL在输入<code class="codeph">FORALL</code>语句时计算一次的数值表达式，并在必要时<code class="codeph">FORALL</code>入到最接近的整数。生成的整数是有效索引号范围的下限和上限，不需要是连续的。
                  </p>
                  <p><span class="bold">限制<span class="italic">收集</span></span></p>
                  <p>如果<span class="italic"><code class="codeph">collection</code></span>是关联数组，则必须通过<code class="codeph">PLS_INTEGER</code>对其进行索引。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><span class="bold"><span class="italic">index_collection的</span>值</span></p>
                  <p>指定<span class="italic"><code class="codeph">index</code></span>的值是<span class="italic"><code class="codeph">index_collection</code></span>的元素， <span class="italic"><code class="codeph">index_collection</code></span>是由<code class="codeph">PLS_INTEGER</code>索引的<code class="codeph">PLS_INTEGER</code>元素的集合。 <span class="italic"><code class="codeph">index_collection</code></span>的索引不需要是连续的。如果<span class="italic"><code class="codeph">index_collection</code></span>为空，则PL / SQL引发异常，并且<code class="codeph">FORALL</code>语句不会运行。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-C45B8241-F9DF-4C93-8577-C840A25963DB__CJAIBIAA">
                  <p class="subhead1" id="GUID-C45B8241-F9DF-4C93-8577-C840A25963DB__GUID-CA88B810-A99C-4BB8-85F9-BFED5703F698">例子</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="plsql-optimization-and-tuning.html#GUID-6D4A1425-64DD-4723-8AAE-87B0A51A2854__BABDBAAJ">例12-8</a> ， <span class="q">“FORALL语句中的DELETE语句”</span></p>
                     </li>
                     <li>
                        <p><a href="plsql-optimization-and-tuning.html#GUID-6D4A1425-64DD-4723-8AAE-87B0A51A2854__BABEDFJE">例12-9</a> ， <span class="q">“FOR LOOP和FORALL语句中INSERT语句的时差”</span></p>
                     </li>
                     <li>
                        <p><a href="plsql-optimization-and-tuning.html#GUID-6D4A1425-64DD-4723-8AAE-87B0A51A2854__BABIIEEI">例12-10</a> ， <span class="q">“收集子集的FORALL语句”</span></p>
                     </li>
                     <li>
                        <p><a href="plsql-optimization-and-tuning.html#GUID-82049618-CB67-4CF1-8455-02AC6AEB5F8E__BABJCEFE">例12-11</a> ， <span class="q">“稀疏集合及其子集的FORALL语句”</span></p>
                     </li>
                     <li>
                        <p><a href="plsql-optimization-and-tuning.html#GUID-42AF6F5C-B06D-4EB6-9C7A-630FF65DBD5D__BABBBJCF">例12-12</a> ， <span class="q">“立即处理FORALL异常”</span></p>
                     </li>
                     <li>
                        <p><a href="plsql-optimization-and-tuning.html#GUID-DAF46F06-EF3F-4B1A-A518-5238B80C69FA__BABGBABA">例12-13</a> ， <span class="q">“处理FORALL语句完成后的FORALL异常”</span></p>
                     </li>
                     <li>
                        <p><a href="plsql-optimization-and-tuning.html#GUID-D67D19A6-4717-4556-B027-15C3DED0519A__BABEJHDE">例12-26</a> ， <span class="q">“在FORALL语句中使用RETURN BULK收集删除”</span></p>
                     </li>
                     <li>
                        <p><a href="plsql-optimization-and-tuning.html#GUID-14F071C6-C0AE-4D39-803F-420840FD34AB__BABJFFFB">例12-28</a> ， <span class="q">“匿名块批量绑定输入主机阵列”</span></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-C45B8241-F9DF-4C93-8577-C840A25963DB__CJAJIIGC">
                  <p class="subhead1" id="GUID-C45B8241-F9DF-4C93-8577-C840A25963DB__GUID-6FEC9DDD-B174-4720-9A77-854BF5B4C2AF">相关话题</p>
                  <p>在这一章当中：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="q">“ <a href="FOR-LOOP-statement.html#GUID-D00F8F0B-ECFC-48B6-B399-D8B5114E7E21" title="随着FOR LOOP语句的每次迭代，其语句运行，其索引递增或递减，并且控制返回到循环的顶部。FOR LOOP语句在其索引达到指定值时结束，或者当循环内的语句将控制转移到循环外或引发异常时结束。">FOR LOOP声明</a> ”</span></p>
                     </li>
                     <li>
                        <p><span class="q">“ <a href="implicit-cursor-attribute.html#GUID-5A938EE7-E8D2-468C-B60F-81898F110BE1" title="隐式游标具有返回有关最近运行的SELECT或DML语句的信息的属性，该语句与命名游标无关。">隐式游标属性</a> ”</span></p>
                     </li>
                  </ul>
                  <p>在其他章节中：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="q">“ <a href="plsql-optimization-and-tuning.html#GUID-6D4A1425-64DD-4723-8AAE-87B0A51A2854" title="FORALL语句是批量SQL的一个特性，它将批处理中的DML语句从PL / SQL发送到SQL，而不是一次发送一个。">FORALL声明</a> ”</span></p>
                     </li>
                     <li>
                        <p><span class="q">“ <a href="plsql-optimization-and-tuning.html#GUID-19F50644-C88E-49AF-B31C-3EE4B4432714" title="BULK COLLECT子句是批量SQL的一个特性，它将结果从SQL返回到PL / SQL，而不是一次返回一个。">BULK COLLECT Clause</a> ”</span></p>
                     </li>
                     <li>
                        <p><span class="q">“一起<a href="plsql-optimization-and-tuning.html#GUID-D67D19A6-4717-4556-B027-15C3DED0519A" title="在FORALL语句中，DML语句可以具有RETURNING BULK COLLECT INTO子句。对于FORALL语句的每次迭代，DML语句将指定的值存储在指定的集合中，而不会覆盖先前的值，因为相同的DML语句将在FOR LOOP语句中执行。">使用FORALL声明和BULK COLLECT子句</a> ”</span></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
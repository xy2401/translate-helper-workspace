<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>配置数据库以提高性能</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Performance Tuning Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Performance Tuning Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-performance-tuning-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-12T22:26:14-07:00"></meta>
      <meta name="dcterms.title" content="Database Performance Tuning Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96347-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="performance-improvement-methods.html" title="Previous" type="text/html"></link>
      <link rel="next" href="part-II-diagnosing-and-tuning-database-performance.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TGDBA"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="performance-improvement-methods.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="part-II-diagnosing-and-tuning-database-performance.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库性能调优指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-I-database-performance-fundamentals.html" property="item" typeof="WebPage"><span property="name">数据库性能基础</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">配置数据库以提高性能</li>
            </ol>
            <a id="GUID-8314AD37-F37C-4A61-B909-4853D6FC9747" name="GUID-8314AD37-F37C-4A61-B909-4853D6FC9747"></a><a id="TGDBA013"></a>
            
            <h2 id="TGDBA-GUID-8314AD37-F37C-4A61-B909-4853D6FC9747" class="sect2"><span class="enumeration_chapter">4</span>配置数据库以提高性能</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章概述了用于配置数据库以提高性能的Oracle方法。尽管可以持续对Oracle数据库进行性能修改，但通过正确的数据库初始配置可以获得显着的好处。</p>
               <p>本章包含以下部分：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="configuring-database-for-performance.html#GUID-5804B2DB-B022-441A-8EE9-CAA9FB692DF5">初始实例配置的性能注意事项</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-database-for-performance.html#GUID-7801AFAE-FF5B-47E0-B6F8-D4A322BE0F1C">创建和维护表以获得最佳性能</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-database-for-performance.html#GUID-26436874-420C-4320-A30C-C0FE765DD65D">共享服务器的性能注意事项</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-database-for-performance.html#GUID-9915EBFB-77BE-49D4-8C6D-7AFAF0995E27">由于Prespawned进程改进了客户端连接性能</a></p>
                  </li>
               </ul>
            </div><a id="TGDBA94142"></a><div class="props_rev_3"><a id="GUID-5804B2DB-B022-441A-8EE9-CAA9FB692DF5" name="GUID-5804B2DB-B022-441A-8EE9-CAA9FB692DF5"></a><h3 id="TGDBA-GUID-5804B2DB-B022-441A-8EE9-CAA9FB692DF5" class="sect3"><span class="enumeration_section">4.1</span>初始实例配置的性能注意事项</h3>
               <div>
                  <p><a id="d8403e118" class="indexterm-anchor"></a>对数据库具有重要性能影响的初始数据库实例配置选项包括：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>初始化参数</p>
                     </li>
                     <li>
                        <p>撤消空间</p>
                     </li>
                     <li>
                        <p>重做日志文件</p>
                     </li>
                     <li>
                        <p>表空间</p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-5804B2DB-B022-441A-8EE9-CAA9FB692DF5__GUID-B1CAF786-ADDE-4620-97ED-0D1443D5C057">
                     <p class="notep1">注意：</p>
                     <p>如果使用Database Configuration Assistant（DBCA）创建数据库，则提供的种子数据库将包含必要的基本初始化参数，并满足本文档中提到的性能建议。</p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-5804B2DB-B022-441A-8EE9-CAA9FB692DF5__GUID-74BDC0A9-B857-4DC1-ADE1-B7DC6AF5E4DC">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgdba&amp;id=ADMIN12479" target="_blank"><span class="italic">Oracle数据库管理员指南</span></a> ，了解如何使用Database Configuration Assistant创建数据库</p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgdba&amp;id=ADMIN002" target="_blank"><span class="italic">Oracle数据库管理员指南</span></a> ，了解如何使用SQL语句创建数据库</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="TGDBA94144"></a><a id="TGDBA94145"></a><a id="TGDBA94143"></a><div class="props_rev_3"><a id="GUID-8BFCA1E1-C97A-4FBF-A697-421E98676C82" name="GUID-8BFCA1E1-C97A-4FBF-A697-421E98676C82"></a><h4 id="TGDBA-GUID-8BFCA1E1-C97A-4FBF-A697-421E98676C82" class="sect4"><span class="enumeration_section">4.1.1</span>初始化参数</h4>
                  <div>
                     <p>使用初始化参数配置正在运行的Oracle数据库实例，初始化参数在初始化参数文件中设置。这些参数会影响正在运行的实例的行为，包括影响性能。通常，一个非常简单的初始化文件只有很少的相关设置，涵盖了大多数情况，初始化文件不应该是您期望进行性能调整的第一个位置，除了下表中描述的少数参数。</p>
                     <p>下表描述了最小初始化文件中所需的参数。虽然这些参数是必要的，但它们没有性能影响。</p>
                     <div class="tblformal" id="GUID-8BFCA1E1-C97A-4FBF-A697-421E98676C82__G23930">
                        <p class="titleintable">表4-1无性能影响的必要初始化参数</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="必要的初始化参数没有性能影响" width="100%" border="1" summary="This table describes the initialization parameters necessary in a minimal initialization parameter file." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d8403e252">参数</th>
                                 <th align="left" valign="bottom" width="69%" id="d8403e255">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d8403e260" headers="d8403e252 ">
                                    <p><code class="codeph">DB_NAME</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d8403e260 d8403e255 ">
                                    <p>数据库的名称。这应该与<code class="codeph">ORACLE_SID</code>环境变量匹配。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d8403e271" headers="d8403e252 ">
                                    <p><code class="codeph">DB_DOMAIN</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d8403e271 d8403e255 ">
                                    <p>Internet点表示法中数据库的位置。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d8403e280" headers="d8403e252 ">
                                    <p><code class="codeph">OPEN_CURSORS</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d8403e280 d8403e255 ">
                                    <p>限制每个会话的最大游标数（活动SQL语句）。该设置取决于应用程序;建议使用500。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d8403e289" headers="d8403e252 ">
                                    <p><code class="codeph">CONTROL_FILES</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d8403e289 d8403e255 ">
                                    <p>设置为在不同磁盘驱动器上包含至少两个文件，以防止控制文件丢失失败。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d8403e298" headers="d8403e252 ">
                                    <p><code class="codeph">DB_FILES</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d8403e298 d8403e255 ">
                                    <p>设置为可分配给数据库的最大文件数。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>下表包含要设置性能影响的最重要参数：</p>
                     <div class="tblformal" id="GUID-8BFCA1E1-C97A-4FBF-A697-421E98676C82__G23964">
                        <p class="titleintable">表4-2具有性能影响的重要初始化参数</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="具有性能影响的重要初始化参数" width="100%" border="1" summary="This table describes important initialization parameters with performance impact." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="32%" id="d8403e318">参数</th>
                                 <th align="left" valign="bottom" width="68%" id="d8403e321">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d8403e326" headers="d8403e318 ">
                                    <p><code class="codeph">兼容</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="68%" headers="d8403e326 d8403e321 ">
                                    <p>指定Oracle数据库必须与之保持兼容性的版本。它使您可以立即在生产系统中利用新版本的维护改进，而无需在您的环境中测试新功能。如果您的应用程序是为特定版本的Oracle数据库而设计的，并且您实际上正在安装更高版本，那么您可能希望将此参数设置为先前版本的版本。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d8403e335" headers="d8403e318 ">
                                    <p><code class="codeph">DB_BLOCK_SIZE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="68%" headers="d8403e335 d8403e321 ">
                                    <p>设置存储在数据库文件中并在SGA中缓存的Oracle数据库块的大小。值的范围取决于操作系统，但事务处理系统通常为8192，数据库仓库系统的值更高。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d8403e343" headers="d8403e318 ">
                                    <p><code class="codeph">SGA_TARGET</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="68%" headers="d8403e343 d8403e321 ">
                                    <p>指定所有SGA组件的总大小。如果指定了<code class="codeph">SGA_TARGET</code> ，则会自动调整缓冲区高速缓存（ <code class="codeph">DB_CACHE_SIZE</code> ），Java池（ <code class="codeph">JAVA_POOL_SIZE</code> ），大型池（ <code class="codeph">LARGE_POOL_SIZE</code> ）和共享池（ <code class="codeph">SHARED_POOL_SIZE</code> ）内存池的大小。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d8403e367" headers="d8403e318 ">
                                    <p><code class="codeph">PGA_AGGREGATE_TARGET</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="68%" headers="d8403e367 d8403e321 ">
                                    <p>指定附加到实例的所有服务器进程可用的目标聚合PGA内存。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d8403e376" headers="d8403e318 ">
                                    <p><code class="codeph">PROCESSES</code></p>
                                 </td>
                                 <td align="left" valign="top" width="68%" headers="d8403e376 d8403e321 ">
                                    <p>设置该实例可以启动的最大进程数。这是要设置的最重要的主要参数，因为从中推导出许多其他参数值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d8403e384" headers="d8403e318 ">
                                    <p><code class="codeph">SESSIONS</code></p>
                                 </td>
                                 <td align="left" valign="top" width="68%" headers="d8403e384 d8403e321 ">
                                    <p>默认情况下，这是从进程的值设置的。但是，如果您使用共享服务器，则推导的值可能不足。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d8403e392" headers="d8403e318 ">
                                    <p><code class="codeph">UNDO_MANAGEMENT</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="68%" headers="d8403e392 d8403e321 ">
                                    <p>指定数据库使用的撤消空间管理模式。默认为<code class="codeph">AUTO</code> 。如果未指定，则数据库使用<code class="codeph">AUTO</code> 。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="32%" id="d8403e407" headers="d8403e318 ">
                                    <p><code class="codeph">UNDO_TABLESPACE</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="68%" headers="d8403e407 d8403e321 ">
                                    <p>指定实例启动时要使用的撤消表空间。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnotealso" id="GUID-8BFCA1E1-C97A-4FBF-A697-421E98676C82__GUID-071AF829-7B8E-4064-9957-F57CC07C4E88">
                        <p class="notep1">也可以看看：</p>
                        <p>以下指南有关这些初始化参数的更多信息：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../admin/creating-and-configuring-an-oracle-database.html#ADMIN-GUID-807DE711-C82C-4BB2-8C31-5EE89CA71349" target="_blank"><span class="italic">Oracle数据库管理员指南</span></a></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tgdba&amp;id=REFRN-GUID-FD266F6F-D047-4EBB-8D96-B51B1DCA2D61" target="_blank"><span class="italic">Oracle数据库参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="TGDBA94146"></a><div class="props_rev_3"><a id="GUID-A7508E97-A754-4AE2-9CC4-5FB41D4AFCC7" name="GUID-A7508E97-A754-4AE2-9CC4-5FB41D4AFCC7"></a><h4 id="TGDBA-GUID-A7508E97-A754-4AE2-9CC4-5FB41D4AFCC7" class="sect4"><span class="enumeration_section">4.1.2</span>撤消空间</h4>
                  <div>
                     <p>数据库使用撤消空间来存储用于读取一致性，恢复和回滚语句的数据。此数据存在于一个或多个撤消表空间中。如果使用Database Configuration Assistant（DBCA）创建数据库，则会自动创建撤消表空间。要手动创建撤消表空间，请将<code class="codeph">UNDO</code> <code class="codeph">TABLESPACE</code>子句添加到<code class="codeph">CREATE</code> <code class="codeph">DATABASE</code>语句中。
                     </p>
                     <p>为了自动管理撤消数据，Oracle数据库使用<span class="bold">自动撤消管理</span> ，透明地创建和管理撤消段。启用<a id="d8403e503" class="indexterm-anchor"></a><a id="d8403e505" class="indexterm-anchor"></a>自动撤消管理，将<code class="codeph">UNDO_MANAGEMENT</code>初始化参数设置为<code class="codeph">AUTO</code> （默认设置）。如果未指定，则<code class="codeph">UNDO_MANAGEMENT</code>初始化参数使用<code class="codeph">AUTO</code>设置。Oracle强烈建议使用自动撤消管理，因为它可以显着简化数据库管理，并且无需手动调整撤消（回滚）段。支持使用回滚段的手动撤消管理以实现向后兼容。
                     </p>
                     <p><code class="codeph">V$UNDOSTAT</code>视图包含用于监视和调整撤消空间的统计信息。使用此视图，您可以更好地估计当前工作负载所需的还原空间量。Oracle数据库还使用此信息来帮助调整撤消使用情况。<code class="codeph">V$ROLLSTAT</code>视图包含有关undo表空间中还原段的行为的信息。
                     </p>
                     <div class="infoboxnotealso" id="GUID-A7508E97-A754-4AE2-9CC4-5FB41D4AFCC7__GUID-83499D7B-930D-4E54-8E88-403DB1F0A26B">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../admqs/managing-database-storage-structures.html#ADMQS-GUID-5801E369-B27D-4DF0-B291-68C37D641C43" target="_blank"><span class="italic">Oracle数据库2天DBA</span></a>和Oracle企业管理器云控制（云控制）联机帮助，以了解撤消管理顾问</p>
                           </li>
                           <li>
                              <p><a href="../admin/managing-undo.html#ADMIN013" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a> ，了解有关使用自动撤消管理管理撤消空间的信息</p>
                           </li>
                           <li>
                              <p> 有关<code class="codeph">V$ROLLSTAT</code>视图的更多信息，请<a href="../refrn/V-ROLLSTAT.html#REFRN-GUID-A0AAF38C-F78A-44BF-9AA2-801F235D1457" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                           </li>
                           <li>
                              <p> 有关<code class="codeph">V$UNDOSTAT</code>视图的更多信息，请<a href="../refrn/V-UNDOSTAT.html#REFRN-GUID-39DB6CBC-AF75-4C3A-A8E1-6C923F137246" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="TGDBA94147"></a><div class="props_rev_3"><a id="GUID-BF462098-04C0-42E0-8FE4-8B6659A6A6F9" name="GUID-BF462098-04C0-42E0-8FE4-8B6659A6A6F9"></a><h4 id="TGDBA-GUID-BF462098-04C0-42E0-8FE4-8B6659A6A6F9" class="sect4"><span class="enumeration_section">4.1.3</span>重做日志文件</h4>
                  <div>
                     <p><a id="d8403e618" class="indexterm-anchor"></a><a id="d8403e620" class="indexterm-anchor"></a><a id="d8403e624" class="indexterm-anchor"></a>重做日志文件的大小会影响性能，因为数据库写程序和归档程序进程的行为取决于重做日志大小。通常，较大的重做日志文件可提供更好的性能。较小的日志文件会增加检查点活动并降低性能。
                     </p>
                     <p>虽然重做日志文件的大小不会影响LGWR性能，但它可能会影响DBWR和检查点行为。 <span class="bold"> </span>检查点频率受多种因素影响，包括日志文件大小和<code class="codeph">FAST_START_MTTR_TARGET</code>初始化参数的设置。如果将<code class="codeph">FAST_START_MTTR_TARGET</code>参数设置为限制实例恢复时间，则Oracle数据库会根据需要自动尝试检查点。在这种情况下，日志文件的大小应足够大，以避免由于日志文件大小不足而进行额外的检查点。可以通过从<code class="codeph">V$INSTANCE_RECOVERY</code>视图查询<code class="codeph">OPTIMAL_LOGFILE_SIZE</code>列来获取最佳大小。您还可以在Oracle Enterprise Manager云控制（云控制）的“ <span class="bold">重做</span> <span class="bold">日志</span> <span class="bold">组”</span>页面上获取调整建议。
                     </p>
                     <p>可能无法始终为重做日志文件提供特定大小的建议，但是在100 MB到几千兆字节范围内的重做日志文件被认为是合理的。根据系统生成的重做次数调整联机重做日志文件的大小。粗略的指南是每20分钟最多切换一次日志文件。</p>
                     <div class="infoboxnotealso" id="GUID-BF462098-04C0-42E0-8FE4-8B6659A6A6F9__GUID-B243239D-C98D-4183-911B-74E0A7708FF3">
                        <p class="notep1">也可以看看：</p>
                        <p>有关管理联机重做日志的信息，请参见“ <a href="../admin/managing-the-redo-log.html#ADMIN007" target="_blank"><span class="italic">Oracle数据库管理员指南”</span></a></p>
                     </div>
                  </div>
               </div><a id="TGDBA94148"></a><div class="props_rev_3"><a id="GUID-6DF7065E-C70A-4B7C-A4CA-16A838AEC066" name="GUID-6DF7065E-C70A-4B7C-A4CA-16A838AEC066"></a><h4 id="TGDBA-GUID-6DF7065E-C70A-4B7C-A4CA-16A838AEC066" class="sect4"><span class="enumeration_section">4.1.4</span>表空间</h4>
                  <div>
                     <p>如果使用Database Configuration Assistant（DBCA）创建数据库，则种子数据库会自动包含必要的表空间。如果选择不使用DBCA，则必须在创建数据库后创建额外的表空间。</p>
                     <p>除<code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code>表空间外，所有数据库都应具有多个表空间。这些额外的表空间包括：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>一个<a id="d8403e734" class="indexterm-anchor"></a><a id="d8403e738" class="indexterm-anchor"></a>临时表空间，用于排序等操作</p>
                        </li>
                        <li>
                           <p>undo表空间，包含读取一致性，恢复和撤消语句的信息</p>
                        </li>
                        <li>
                           <p>至少一个用于应用程序的表空间（在大多数情况下，应用程序需要多个表空间）</p>
                        </li>
                     </ul>
                     <p>对于包含许多数据文件的超大型表空间，您可以运行多个<code class="codeph">ALTER TABLESPACE ...并行ADD DATAFILE</code>语句。在创建表空间期间，组成表空间的数据文件将使用特殊的空块图像进行初始化。临时文件未初始化。
                     </p>
                     <p>Oracle数据库执行此操作以确保它可以完整地写入所有数据文件，但如果以串行方式完成，这显然是一个漫长的过程。因此，同时运行多个<code class="codeph">CREATE TABLESPACE</code>语句以加速创建表空间。对于永久表，在表空间创建的本地和全局扩展区管理之间进行选择会极大地影响性能。对于与读取相比具有中等到大的插入，修改或删除操作的永久表空间，请选择本地扩展区管理。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-6DF7065E-C70A-4B7C-A4CA-16A838AEC066__GUID-4EA4C18E-69B4-433D-9EC3-8DFE4D61AD67">永久表空间 - 自动段空间管理</p>
                        <p>对于永久表空间，Oracle建议使用<a id="d8403e762" class="indexterm-anchor"></a>自动分段空间管理。这种表空间（通常称为位图表空间）是具有位图段空间管理的本地管理表空间。
                        </p>
                        <div class="infoboxnotealso" id="GUID-6DF7065E-C70A-4B7C-A4CA-16A838AEC066__GUID-B9996F3B-A85C-4BCA-9E98-35A873E112C2">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../cncpt/introduction-to-oracle-database.html#CNCPT003" target="_blank"><span class="italic">Oracle数据库概念，</span></a>用于讨论可用空间管理</p>
                              </li>
                              <li>
                                 <p><a href="../admin/managing-tablespaces.html#ADMIN011" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a> ，了解有关为表空间创建和使用自动段空间管理的更多信息</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6DF7065E-C70A-4B7C-A4CA-16A838AEC066__GUID-ED18B78D-452F-4D01-8D07-0EC858E89C5D">临时表空间</p>
                        <p><a id="d8403e785" class="indexterm-anchor"></a><a id="d8403e789" class="indexterm-anchor"></a><a id="d8403e793" class="indexterm-anchor"></a>正确配置临时表空间有助于优化磁盘排序性能。临时表空间可以是字典管理的或本地管理的。Oracle建议使用<code class="codeph">UNIFORM</code>范围大小为1 <code class="codeph">MB</code>的本地管理临时表空间。</p>
                        <p>您应该监视临时表空间活动以检查数据库为临时段分配的扩展区数。如果应用程序广泛使用临时表，例如在许多用户同时使用临时表的情况下，则可以将扩展区大小设置得更小，例如256K，因为每次使用都需要至少一个扩展区。<code class="codeph">EXTENT</code> <code class="codeph">MANAGEMENT</code> <code class="codeph">LOCAL</code>子句对于临时表空间是可选的，因为所有临时表空间都是使用统一大小的本地管理扩展区创建的。<code class="codeph">SIZE</code>的默认值为<code class="codeph">1M</code> 。</p>
                        <div class="infoboxnotealso" id="GUID-6DF7065E-C70A-4B7C-A4CA-16A838AEC066__GUID-1EF84B7C-0F08-4956-B9A2-26C641CF7F9F">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关管理临时表空间的详细信息，请参见<a href="../admin/managing-tablespaces.html#ADMIN011" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                              </li>
                              <li>
                                 <p>有关临时表空间的更多信息，请参见<a href="../cncpt/introduction-to-oracle-database.html#CNCPT003" target="_blank"><span class="italic">Oracle数据库概念</span></a></p>
                              </li>
                              <li>
                                 <p>有关将<code class="codeph">CREATE</code>和<code class="codeph">ALTER</code> <code class="codeph">TABLESPACE</code>语句与<code class="codeph">TEMPORARY</code>子句一起使用的更多信息，请<a href="../sqlrf/CREATE-TABLESPACE.html#SQLRF01403" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="TGDBA94151"></a><div class="props_rev_3"><a id="GUID-7801AFAE-FF5B-47E0-B6F8-D4A322BE0F1C" name="GUID-7801AFAE-FF5B-47E0-B6F8-D4A322BE0F1C"></a><h3 id="TGDBA-GUID-7801AFAE-FF5B-47E0-B6F8-D4A322BE0F1C" class="sect3"><span class="enumeration_section">4.2</span>创建和维护表以获得最佳性能</h3>
               <div>
                  <p><a id="d8403e906" class="indexterm-anchor"></a>安装应用程序时，最初的步骤是创建所有必需的表和索引。创建段（例如表）时，数据库会为数据分配空间。如果后续数据库操作导致数据量增加并超过分配的空间，则Oracle数据库会扩展该段。
                  </p>
                  <p>创建表和索引时，请注意以下事项：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>为表空间指定自动段空间管理</p>
                        <p>通过这种方式，Oracle数据库自动管理段空间以获得最佳性能。</p>
                     </li>
                     <li>
                        <p> <a id="d8403e922" class="indexterm-anchor"></a>仔细设置存储选项</p>
                        <p>应用程序应仔细设置表或索引的预期用途的存储选项。这包括设置<code class="codeph">PCTFREE</code>的值。请注意，使用自动分段空间管理消除了指定<code class="codeph">PCTUSED</code>的必要性。</p>
                        <div class="infoboxnote" id="GUID-7801AFAE-FF5B-47E0-B6F8-D4A322BE0F1C__GUID-11905956-1A25-4AE7-9AB0-5FC283226159">
                           <p class="notep1">注意：</p>
                           <p>不建议使用免费列表。要使用自动段空间管理，请创建本地管理的表空间，并将段空间管理子句设置为<code class="codeph">AUTO</code> 。</p>
                        </div>
                     </li>
                  </ul>
               </div><a id="TGDBA94152"></a><div class="props_rev_3"><a id="GUID-16937141-895F-4D1C-B431-B129157B515E" name="GUID-16937141-895F-4D1C-B431-B129157B515E"></a><h4 id="TGDBA-GUID-16937141-895F-4D1C-B431-B129157B515E" class="sect4"><span class="enumeration_section">4.2.1</span>表压缩</h4>
                  <div>
                     <p>您可以以压缩格式存储堆组织表，该格式对任何类型的应用程序都是透明的。数据库块中的压缩数据是自包含的，这意味着在块中可以获得在块中重新创建未压缩数据所需的所有信息。块也在缓冲区缓存中压缩。表压缩不仅减少了磁盘存储，还减少了内存使用，特别是缓冲区缓存要求。通过减少访问表所需的I / O操作量并增加缓冲区高速缓存命中的可能性来实现性能改进。</p>
                     <p>Oracle数据库具有高级压缩选项，使您可以提高任何类型的应用程序工作负载（包括数据仓库和OLTP应用程序）的性能，同时减少数据库所需的磁盘存储。您可以对所有类型的数据使用高级压缩功能，包括结构化数据，非结构化数据，备份数据和网络数据。</p>
                     <div class="infoboxnotealso" id="GUID-16937141-895F-4D1C-B431-B129157B515E__GUID-C633B1D7-0138-4BFF-ADD8-BF911C2AED62">
                        <p class="notep1">也可以看看：</p>
                        <p>有关使用表压缩的信息，请<a href="../admin/managing-tables.html#ADMIN13948" target="_blank"><span class="italic">参见“Oracle数据库管理员指南”</span></a></p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-16937141-895F-4D1C-B431-B129157B515E__GUID-627BBBFC-7F19-4BDD-9055-346CA087D0AF">估计压缩因子</p>
                        <p>表压缩的工作原理是消除各个块中的列值重复。块中所有行和列中的重复值在块的开头存储一次，即所谓的块的符号表。所有出现的此类值都将替换为对符号表的简短引用。具有更多重复值的块中的压缩更高。</p>
                        <p>在压缩大表之前，您应该估计预期的压缩因子。压缩因子被定义为以未压缩形式存储信息所需的块数除以压缩存储所需的块数。可以通过对要压缩的表的少量代表性数据块进行采样并且比较针对未压缩和压缩情况的每个块的平均记录数来估计压缩因子。经验表明，大约1000个数据块提供了非常准确的压缩因子估计。请注意，您采样的块越多，结果就越准确。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-16937141-895F-4D1C-B431-B129157B515E__GUID-59DF567D-F0FC-4F30-BAB0-AAD3E23A2450">调整以实现更好的压缩比</p>
                        <p>在许多情况下，Oracle数据库实现了良好的压缩因子，无需进行特殊调整。作为DBA或应用程序开发人员，您可以尝试通过在压缩发生时重新组织记录来调整压缩因子。在某些情况下，调整可以略微改善压缩因子，而在其他情况下则可以。</p>
                        <p>要提高压缩系数，必须增加数据块中值重复的可能性。可实现的压缩因子取决于特定列或列对的基数（表示列值重复的可能性）以及这些列的平均行长度。表压缩不仅压缩单个列的重复值，而且尽可能尝试使用多列值对。如果不详细了解数据分布，则很难预测最佳顺序。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-16937141-895F-4D1C-B431-B129157B515E__GUID-E35670AD-9CBE-494A-BC01-4ACB6C101E19">使用属性聚簇表</p>
                        <p>属性聚簇表是一个堆组织表，它根据用户指定的聚簇指令将数据存储在磁盘上。指令确定存储在表中的数据是基于指定的列排序，还是基于允许多列I / O减少的特殊算法。属性集群仅适用于批量插入操作 - 例如<code class="codeph">INSERT/*+APPEND*/</code>或<code class="codeph">ALTER TABLE ...MOVE PARTITION</code>命令 - 在传统DML中被忽略。</p>
                        <p>通过结合区域映射减少物理I / O，使用属性聚簇表可以显着降低表扫描的I / O成本。此外，它还可以改善数据压缩，因为当相同的值在磁盘上彼此更接近时，可以更容易地压缩数据。</p>
                        <div class="infoboxnotealso" id="GUID-16937141-895F-4D1C-B431-B129157B515E__GUID-30A48A7B-1682-4959-9000-4669D4710825">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关属性群集表的信息，请<a href="../cncpt/tables-and-table-clusters.html#CNCPT89316" target="_blank"><span class="italic">参见Oracle数据库概念</span></a></p>
                              </li>
                              <li>
                                 <p>有关使用属性聚簇表的信息，请<a href="../dwhsg/attribute-clustering.html#DWHSG8917" target="_blank"><span class="italic">参见“Oracle数据库数据仓库指南”</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TGDBA94155"></a><div class="props_rev_3"><a id="GUID-FCEF4C00-7358-451C-8340-DB187A88E204" name="GUID-FCEF4C00-7358-451C-8340-DB187A88E204"></a><h4 id="TGDBA-GUID-FCEF4C00-7358-451C-8340-DB187A88E204" class="sect4"><span class="enumeration_section">4.2.2</span>回收未使用的空间</h4>
                  <div>
                     <p>随着时间的推移，由于更新和删除操作，段空间变得碎片化或者段获取大量可用空间是很常见的。生成的稀疏填充对象在查询和DML操作期间可能会出现性能下降。如果对象确实具有可用于回收的空间，则可以压缩和收缩段或在段的末尾释放未使用的空间。</p>
                     <p>Oracle数据库提供了一个Segment Advisor，它根据对象中的空间碎片级别提供有关对象是否具有可用于回收的空间的建议。</p>
                     <div class="infoboxnotealso" id="GUID-FCEF4C00-7358-451C-8340-DB187A88E204__GUID-E824924A-F640-4CC5-80EF-66633AF25729">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../admin/managing-space-for-schema-objects.html#ADMIN-GUID-1950156D-DECC-4E76-84D9-2C2A3D8D6565" target="_blank"><span class="italic">“Oracle数据库管理员指南”，</span></a>用于讨论管理模式对象和Segment Advisor的空间</p>
                     </div>
                  </div>
               </div><a id="TGDBA94156"></a><div class="props_rev_3"><a id="GUID-769A6161-304A-4547-9FB8-9B767263BF71" name="GUID-769A6161-304A-4547-9FB8-9B767263BF71"></a><h4 id="TGDBA-GUID-769A6161-304A-4547-9FB8-9B767263BF71" class="sect4"><span class="enumeration_section">4.2.3</span>索引数据</h4>
                  <div>
                     <p><a id="d8403e1155" class="indexterm-anchor"></a>创建索引的最有效时间是在加载数据之后。通过这种方式，空间管理变得更加简单，并且不会对插入的每一行进行索引维护。SQL * Loader自动使用此技术，但如果您使用其他方法执行初始数据加载，则可能需要手动创建索引。此外，您可以使用以下命令并行执行索引创建<a id="d8403e1160" class="indexterm-anchor"></a><a id="d8403e1164" class="indexterm-anchor"></a> <code class="codeph">CREATE</code> <code class="codeph">INDEX</code>语句的<code class="codeph">PARALLEL</code>子句。但是，SQL * Loader无法并行创建索引，因此您必须在加载数据后并行手动创建索引。
                     </p>
                     <div class="infoboxnotealso" id="GUID-769A6161-304A-4547-9FB8-9B767263BF71__GUID-EF031CDE-D03F-43B2-AC77-AEDB71770D64">
                        <p class="notep1">也可以看看：</p>
                        <p>有关SQL * Loader的信息，请参见<a href="../sutil/oracle-sql-loader-concepts.html#SUTIL-GUID-DD843EE2-1FAB-4E72-A115-21D97A501ECC" target="_blank"><span class="italic">Oracle数据库实用</span></a>程序</p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-769A6161-304A-4547-9FB8-9B767263BF71__GUID-71DE08A5-7310-417B-A034-95A56A998DDD">指定用于排序数据的内存</p>
                        <p>在包含数据的表创建索引期间，必须对数据进行排序。如果所有可用内存都用于排序，则以尽可能最快的方式完成此排序。Oracle建议您通过设置<code class="codeph">PGA_AGGREGATE_TARGET</code>初始化参数来启用SQL工作区的自动调整大小。
                        </p>
                        <div class="infoboxnotealso" id="GUID-769A6161-304A-4547-9FB8-9B767263BF71__GUID-C5FBF16C-53F1-4434-8039-404ADDD36BB8">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="tuning-program-global-area.html#GUID-FE1954FB-FAC9-4302-896E-6F47EB6C8A73">调整程序全局区域</a> ”</span>以获取有关PGA内存管理的信息</p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">PGA_AGGREGATE_TARGET</code>初始化参数的信息，请<a href="../refrn/PGA_AGGREGATE_TARGET.html#REFRN10165" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="TGDBA021"></a><div class="props_rev_3"><a id="GUID-26436874-420C-4320-A30C-C0FE765DD65D" name="GUID-26436874-420C-4320-A30C-C0FE765DD65D"></a><h3 id="TGDBA-GUID-26436874-420C-4320-A30C-C0FE765DD65D" class="sect3"><span class="enumeration_section">4.3</span>共享服务器的性能注意事项</h3>
               <div>
                  <p>使用共享服务器可减少数据库主机上的进程数和内存量。共享服务器对于有许多OLTP用户执行间歇性事务的数据库是有益的。</p>
                  <p>对于与数据库具有高连接速率的系统，使用共享服务器而不是专用服务器通常也更好。对于共享服务器，当收到连接请求时，调度程序可用于处理并发连接请求。但是，对于专用服务器，将为每个连接请求顺序初始化特定于连接的专用服务器。</p>
                  <p><a id="d8403e1266" class="indexterm-anchor"></a>当使用共享服务器体系结构时，某些数据库功能的性能可以得到改善，并且当使用共享服务器体系结构时，某些数据库功能的性能可能会略微降低。例如，可以防止会话在并行执行处于活动状态时迁移到另一个共享服务器。
                  </p>
                  <p>即使在处理了客户端的请求之后，会话仍然可以保持不可迁移，因为并非所有用户信息都已存储在<a id="d8403e1273" class="indexterm-anchor"></a> UGA。如果服务器要处理来自客户端的请求，那么未存储在UGA中的用户状态部分将是不可访问的。为避免这种情况，单个共享服务器通常需要保持绑定到用户会话。
                  </p>
                  <div class="infoboxnotealso" id="GUID-26436874-420C-4320-A30C-C0FE765DD65D__GUID-9C6E91B1-D54C-4B2E-BD09-6A0F8C1B64DA">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="../admin/monitoring-the-database.html#ADMIN005" target="_blank"><span class="italic">Oracle数据库管理员指南</span></a> ，了解如何管理共享服务器</p>
                        </li>
                        <li>
                           <p><a href="../netag/configuring-shared-server-architecture.html#NETAG-GUID-CAF99423-AFB9-4141-A36B-5EAF6B2CA7C0" target="_blank"><span class="italic">“Oracle数据库网络服务管理员指南”</span></a> ，了解如何为共享服务器配置调度程序</p>
                        </li>
                     </ul>
                  </div>
                  <p>使用某些功能时，您可能需要配置更多共享服务器，因为某些服务器可能会在一段时间内绑定到会话。</p>
                  <p><a id="d8403e1297" class="indexterm-anchor"></a><a id="d8403e1301" class="indexterm-anchor"></a><a id="d8403e1305" class="indexterm-anchor"></a>本节讨论如何减少Oracle数据库体系结构使用的进程的争用：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="configuring-database-for-performance.html#GUID-991DB579-AA19-4A9B-820E-FF5FD09B9B6F">使用特定于调度程序的视图识别和减少争用</a></p>
                     </li>
                     <li>
                        <p><a href="configuring-database-for-performance.html#GUID-6994F850-0865-4662-8A10-E7C1EDFC68BE">识别共享服务器的争用</a></p>
                     </li>
                  </ul>
               </div><a id="TGDBA94158"></a><div class="props_rev_3"><a id="GUID-991DB579-AA19-4A9B-820E-FF5FD09B9B6F" name="GUID-991DB579-AA19-4A9B-820E-FF5FD09B9B6F"></a><h4 id="TGDBA-GUID-991DB579-AA19-4A9B-820E-FF5FD09B9B6F" class="sect4"><span class="enumeration_section">4.3.1</span>使用特定于调度程序的视图识别和减少争用</h4>
                  <div>
                     <div class="section">
                        <p>以下视图提供调度程序性能统计信息：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">V$DISPATCHER</code> ：有关调度程序进程的一般信息</p>
                           </li>
                           <li>
                              <p><code class="codeph">V$DISPATCHER_RATE</code> ：调度程序处理统计信息</p>
                           </li>
                        </ul>
                        <p><code class="codeph">V$DISPATCHER_RATE</code>视图包含多个类别的当前，平均和最大调度程序统计信息。带有前缀<code class="codeph">CUR_</code>的统计信息是当前样本的统计信息。带有前缀<code class="codeph">AVG_</code>的统计数据是收集期开始后统计数据的平均值。带有前缀<code class="codeph">MAX_</code>的统计信息是统计信息收集开始后这些类别的最大值。
                        </p>
                        <p>要评估调度程序性能，请查询<code class="codeph">V$DISPATCHER_RATE</code>视图并将当前值与最大值进行比较。如果您当前的系统吞吐量提供足够的响应时间，并且此视图中的当前值接近平均值且小于最大值，则您可能具有经过优化调整的共享服务器环境。
                        </p>
                        <p>如果当前和平均费率远低于最大值，则考虑减少调度员的数量。相反，如果当前和平均费率接近最大值，那么您可能需要添加更多的调度程序。一般规则是在轻型和重型系统使用期间检查<code class="codeph">V$DISPATCHER_RATE</code>统计数据。确定共享服务器负载模式后，相应地调整参数。
                        </p>
                        <p>如有必要，您还可以通过运行系统压力测试并定期轮询<code class="codeph">V$DISPATCHER_RATE</code>统计信息来模拟处理负载。对这些统计数据的正确解释因平台而异。不同类型的应用程序也可能导致<code class="codeph">V$DISPATCHER_RATE</code>记录的统计值发生显着变化。</p>
                        <div class="infoboxnotealso" id="GUID-991DB579-AA19-4A9B-820E-FF5FD09B9B6F__GUID-1A6519DB-0D2E-4AD8-A835-714EEA1322B0">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">V$DISPATCHER</code>和<code class="codeph">V$DISPATCHER_RATE</code>视图的详细信息，请参阅<a href="../refrn/V-DISPATCHER.html#REFRN30063" target="_blank"><span class="italic">Oracle数据库参考</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-991DB579-AA19-4A9B-820E-FF5FD09B9B6F__GUID-73DFBD60-B057-4B2C-BD56-9DC3BC0EBD9D">减少调度程序进程的争用</p>
                        <p><a id="d8403e1435" class="indexterm-anchor"></a>要减少争用，请考虑以下几点：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>添加调度程序进程</p>
                              <p>调度程序进程的总数受初始化参数<code class="codeph">MAX_DISPATCHERS</code>的值限制。在添加调度程序进程之前，您可能需要增加此值。
                              </p>
                           </li>
                           <li>
                              <p>启用连接池</p>
                              <p>当系统负载增加并且调度程序吞吐量最大化时，立即添加更多调度程序不一定是个好主意。相反，请考虑配置调度程序以支持更多具有连接池的用户。</p>
                           </li>
                           <li>
                              <p>启用会话多路复用</p>
                              <p>连接管理器进程使用多路复用来建立和维护从多个用户到各个调度程序的网络会话。例如，多个用户进程可以通过连接管理器进程的单个连接连接到一个调度程序。会话多路复用是有益的，因为它最大化了调度程序进程连接的使用。多路复用对于在调度程序之间复用数据库链接会话也很有用。</p>
                              <div class="infoboxnotealso" id="GUID-991DB579-AA19-4A9B-820E-FF5FD09B9B6F__GUID-BAF29A32-C94E-4591-A46A-F4E5A32D772D">
                                 <p class="notep1">也可以看看：</p>
                                 <p> </p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><a href="../admin/monitoring-the-database.html#ADMIN005" target="_blank"><span class="italic">Oracle数据库管理员指南</span></a> <span class="italic"> </span>了解如何配置调度程序进程</p>
                                    </li>
                                    <li>
                                       <p><a href="../netag/configuring-shared-server-architecture.html#NETAG012" target="_blank"><span class="italic">Oracle数据库网络服务管理员指南</span></a> ，了解如何配置连接池</p>
                                    </li>
                                    <li>
                                       <p><a href="../refrn/DISPATCHERS.html#REFRN10049" target="_blank"><span class="italic">Oracle数据库参考</span></a> <span class="italic"> </span>了解<code class="codeph">DISPATCHERS</code>和<code class="codeph">MAX_DISPATCHERS</code>初始化参数</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TGDBA94161"></a><a id="TGDBA94160"></a><div class="props_rev_3"><a id="GUID-6994F850-0865-4662-8A10-E7C1EDFC68BE" name="GUID-6994F850-0865-4662-8A10-E7C1EDFC68BE"></a><h4 id="TGDBA-GUID-6994F850-0865-4662-8A10-E7C1EDFC68BE" class="sect4"><span class="enumeration_section">4.3.2</span>识别共享服务器的争用</h4>
                  <div>
                     <div class="section">
                        <p>请求队列中等待时间的不断增加表明争用共享服务器。要检查等待时间数据，请使用动态性能视图<code class="codeph">V$QUEUE</code> 。此视图包含显示共享服务器的请求队列活动的信息。默认情况下，此视图仅对用户<code class="codeph">SYS</code>和具有<code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>系统特权的其他用户（如<code class="codeph">SYSTEM</code> ）可用。 <a href="configuring-database-for-performance.html#GUID-6994F850-0865-4662-8A10-E7C1EDFC68BE__g23909" title="此表描述V $ QUEUE视图中的列，用于显示共享服务器的请求队列的等待时间和请求总数。">表4-3</a>列出了显示请求的等待时间和队列中的请求数的列。
                        </p>
                        <div class="tblformal" id="GUID-6994F850-0865-4662-8A10-E7C1EDFC68BE__g23909">
                           <p class="titleintable">表4-3 V $ QUEUE中的等待时间和请求列</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="等待时间和请求列在V $ QUEUE中" width="100%" border="1" summary="This table describes the columns in the V$QUEUE view for displaying wait time and total number of requests for request queues for shared server." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d8403e1584">柱</th>
                                    <th align="left" valign="bottom" width="69%" id="d8403e1587">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d8403e1592" headers="d8403e1584 ">
                                       <p><code class="codeph">等待</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d8403e1592 d8403e1587 ">
                                       <p>显示队列中所有请求的总等待时间（以百分之一秒为单位）</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d8403e1601" headers="d8403e1584 ">
                                       <p><code class="codeph">TOTALQ</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d8403e1601 d8403e1587 ">
                                       <p>显示队列中的所有请求总数</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p><a id="d8403e1610" class="indexterm-anchor"></a>通过发出以下SQL语句，在应用程序运行时偶尔监视这些统计信息：</p><pre class="oac_no_warn" dir="ltr">SELECT DECODE（TOTALQ，0，'No Requests'，WAIT / TOTALQ ||'SECONDSS OF SECONDS'）“V $ QUEUE TYER ='COMMON'的”请求平均等待时间“;</pre><p>此查询返回显示以下内容的计算结果：</p><pre class="oac_no_warn" dir="ltr">每次请求的平均等待时间----------------------------- .090909 SECONDSS的数量</pre><p>从结果中，您可以确定请求在处理之前等待队列中平均0.09百分之一秒。</p>
                        <p>您还可以通过发出以下查询来确定当前正在运行的共享服务器数量：</p><pre class="oac_no_warn" dir="ltr">SELECT COUNT（*）“共享服务器进程”从V $ SHARED_SERVER WHERE STATUS！='退出';</pre><p>此查询的结果可能如下所示：</p><pre class="oac_no_warn" dir="ltr">共享服务器进程----------------------- 10</pre><p>如果检测到共享服务器的资源争用，则首先通过检查共享池和大型池来确保这不是内存争用问题。如果性能仍然很差，那么您可能希望创建更多资源以减少共享服务器进程争用。您可以通过修改可选服务器进程初始化参数来执行此操作：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">MAX_DISPATCHERS</code> 
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">MAX_SHARED_SERVERS</code> 
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">DISPATCHERS</code> 
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">SHARED_SERVERS</code> 
                              </p>
                              <div class="infoboxnotealso" id="GUID-6994F850-0865-4662-8A10-E7C1EDFC68BE__GUID-9CECC3E7-A150-4BCE-87AB-DBD938DAA0D9">
                                 <p class="notep1">也可以看看：</p>
                                 <p><a href="../admin/monitoring-the-database.html#ADMIN005" target="_blank"><span class="italic">Oracle数据库管理员指南</span></a> ，了解如何设置共享服务器进程初始化参数</p>
                              </div>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-9915EBFB-77BE-49D4-8C6D-7AFAF0995E27" name="GUID-9915EBFB-77BE-49D4-8C6D-7AFAF0995E27"></a><h3 id="TGDBA-GUID-9915EBFB-77BE-49D4-8C6D-7AFAF0995E27" class="sect3"><span class="enumeration_section">4.4</span>由于预先生成的进程而改善了客户端连接性能</h3>
               <div>
                  <p>当启用专用代理连接模式或启用线程执行模式时，Oracle数据库会预先生成服务器进程池。在这种情况下，只要客户端请求数据库连接，它就会从进程池获得与现有服务器进程的专用连接，从而提高客户端连接的效率。</p>
                  <p><code class="codeph">V$PROCESS_POOL</code>视图显示有关这些服务器进程池的信息，您可以使用<code class="codeph">DBMS_PROCESS</code>程序包管理这些池。
                  </p>
                  <div class="infoboxnotealso" id="GUID-9915EBFB-77BE-49D4-8C6D-7AFAF0995E27__NOTE-123-CF976E45">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关管理Oracle数据库中预先生成的进程的详细信息，请参见<span class="italic"><a href="../admin/managing-processes.html#ADMIN-GUID-22936BCB-87C5-492C-A533-EDC165B88B9A" target="_blank">“Oracle数据库管理员指南”</a></span></p>
                        </li>
                        <li>
                           <p>有关<code class="codeph">DBMS_PROCESS</code>程序包的信息，请<code class="codeph">DBMS_PROCESS</code> <span class="italic"><a href="../arpls/DBMS_PROCESS.html#ARPLS-GUID-3D1BA173-E9E8-4177-998A-A10D76B5BCAE" target="_blank">Oracle Database PL / SQL程序包和类型参考</a></span></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>全球数据服务简介</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Global Data Services Concepts and Administration Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Global Data Services Concepts and Administration Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="global-data-services-concepts-and-administration-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-22T15:50:03-08:00"></meta>
      <meta name="dcterms.title" content="Global Data Services Concepts and Administration Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2013, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96443-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="release-changes.html" title="Previous" type="text/html"></link>
      <link rel="next" href="global-data-services-config.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="GSMUG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="release-changes.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="global-data-services-config.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">全球数据服务概念和管理指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">全球数据服务简介</li>
            </ol>
            <a id="GUID-415B8BB5-5C8D-4C78-8E76-43DB1648E467" name="GUID-415B8BB5-5C8D-4C78-8E76-43DB1648E467"></a><a id="GSMUG107"></a>
            
            <h2 id="GSMUG-GUID-415B8BB5-5C8D-4C78-8E76-43DB1648E467" class="sect2"><span class="enumeration_chapter">1</span>全球数据服务简介</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章概述了全局数据服务体系结构。</p>
               <p>本章包括以下主题：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-829434C7-608D-40D4-81C8-A77A63FCD7EB">全球数据服务简介</a><br></li>
                  <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-36BBB075-5EFF-4EBF-91A5-CE531DC289FD">全球数据服务架构</a><br></li>
                  <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-152F7AB7-F4A8-44B4-BD82-CEDA4A6F41EE">全球服务概述</a><br></li>
                  <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-2221DEC7-176A-4707-BF0F-7DEDCBEB250D">全局连接负载平衡</a><br></li>
                  <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-E5084527-71AE-414D-8A7D-B3441834B411">全局运行时连接负载平衡</a><br></li>
                  <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-63143CA0-23BF-46D2-A349-401FECD24FBD">全局服务故障转移</a><br></li>
                  <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-47D2FA68-FA1A-4FE5-A6EF-A0070F2E1F14">全球服务经理流程套件架构</a><br></li>
                  <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-1BB1ACBB-CD68-4A83-81D0-5D3047A41387">全球数据服务用例</a><br></li>
               </ul>
            </div>
            <a id="GSMUG674"></a><div class="props_rev_3"><a id="GUID-829434C7-608D-40D4-81C8-A77A63FCD7EB" name="GUID-829434C7-608D-40D4-81C8-A77A63FCD7EB"></a><h3 id="GSMUG-GUID-829434C7-608D-40D4-81C8-A77A63FCD7EB" class="sect3"><span class="enumeration_section">1.1</span>全球数据服务简介</h3>
               <div>
                  <p>许多企业整合其信息技术基础设施以提高业务效率。数据库整合是此过程的关键部分。但是，大多数组织仍必须维护其数据库的本地和远程副本，原因包括：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>业务连续性和灾难恢复</p>
                     </li>
                     <li>
                        <p>高可用性</p>
                     </li>
                     <li>
                        <p>本地客户的性能优化</p>
                     </li>
                     <li>
                        <p>内容本地化和缓存</p>
                     </li>
                     <li>
                        <p>遵守当地法律</p>
                     </li>
                  </ul>
                  <p>在任何一组数据库副本中，由于高负载或高网络延迟，一些数据库服务器可能具有慢的查询响应时间，而能够提供更快响应时间的其他服务器可能未被充分利用。跨一组数据库副本的最佳查询性能和资源利用率需要一个工作负载管理解决方案，该解决方案提供跨副本的客户端连接和工作负载请求的动态负载平衡。</p>
                  <p>许多企业使用本地解决方案跨数据库副本进行工作负载管理。这些解决方案无法提供关键功能，例如运行时负载平衡和副本之间的可靠数据库服务故障转移，因为它们未与Oracle软件完全集成。</p>
                  <p>Oracle Database提供了强大的工作负载管理功能，称为数据库服务数据库服务是一个或多个数据库实例的命名表示。数据库服务允许您对数据库工作负载进行分组，确保将客户端请求路由到提供服务的最佳实例，并通过在发生计划内或计划外实例中断时透明地将客户端连接故障转移到幸存的实例来提供高可用性。</p>
                  <p>Oracle全球数据服务（GDS）跨一组称为<strong class="term">全局数据服务配置</strong>的复制数据库实施Oracle数据库服务模型。
                  </p>
                  <p>全局数据服务配置看起来像数据库客户端的虚拟多实例数据库。它通过<strong class="term">全局服务</strong>提供客户端访问，这些<strong class="term">服务</strong>在功能上类似于单实例或Oracle Real Application Clusters（Oracle RAC）数据库提供的本地数据库服务。本地和全局服务都提供负载平衡，高可用性和资源管理。全局服务和本地服务之间的本质区别在于全局服务跨越多个数据库的实例，而本地服务跨越单个数据库的实例。
                  </p>
                  <p>使用<strong class="term">GDSCTL</strong>命令行界面创建和管理全局数据服务配置及其全局服务，该界面类似于用于管理Oracle RAC数据库及其服务的<code class="codeph">SRVCTL</code>命令行界面。
                  </p>
                  <p>全局数据服务配置可以包含在异构或非异构服务器平台上托管的多实例或单实例Oracle数据库的任意组合。Oracle Data Guard，Oracle GoldenGate或任何其他数据库复制技术可用于同步全局数据服务配置中的数据库。</p>
                  <p>全局数据服务是跨一组复制数据库进行自动工作负载管理的高效解决方案，无论是与许多广泛分布的数据库和客户端一起使用，还是与单个数据库，本地副本和少数客户端一起使用。</p>
                  <div class="infoboxnote" id="GUID-829434C7-608D-40D4-81C8-A77A63FCD7EB__GUID-1C88F0B1-7067-4900-8B87-B580335B33B9">
                     <p class="notep1">注意：</p>
                     <p>全局数据服务主要用于支持复制的应用程序。复制感知应用程序具有以下任何特征：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>仅使用只读全局服务</p>
                        </li>
                        <li>
                           <p>使用读/写全局服务，但如果这些服务由多个数据库同时提供，则编程为解决更新冲突</p>
                        </li>
                        <li>
                           <p>可以容忍由于复制滞后而可能过时的复制数据</p>
                        </li>
                     </ul>
                     <p>不支持复制的应用程序仍可受益于Global Data Services提供的改进的高可用性和灾难恢复功能。</p>
                  </div>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-829434C7-608D-40D4-81C8-A77A63FCD7EB__GUID-59C1CD6A-1BA3-4A4F-BA43-AAFFE9F1408C">
                     <p class="notep1">也可以看看：</p>
                     <p></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="gdsctl-reference.html#GUID-E6E76443-AD85-455C-99AA-BF0A7856F880" title="将Oracle Data Guard代理配置添加到全局数据服务池。将cdb添加到分片目录。添加可由远程调度程序代理程序用于执行分片作业的凭据。将数据库添加到全局数据服务区域和全局数据服务池。将文件的内容添加到目录中，后续GDSCTL命令可以使用该目录。将全局数据服务池添加到全局数据服务框架。将全局服务管理器添加到全局数据服务框架。在启动第一个全局服务管理器之前，通过建立与全局数据服务目录数据库的直接连接，将主机地址或子网信息添加到目录中的有效节点检查注册（VNCR）列表中。将区域添加到Global Data Services框架或Oracle Sharding配置。将全局服务添加到全局数据服务池。将分片添加到分片目录。将分片组添加到分片空间。将分片空间添加到分片目录。显示为配置定义的所有组件的配置数据。显示指定CDB的属性。显示指定块的属性。显示当前可用于分片作业的远程凭据。显示存储在指定数据库的目录中的静态配置数据。显示可在GDSCTL命令中指定的当前可用的文件对象。显示存储在指定数据库池的目录中的静态配置数据。显示存储在指定全局服务管理器的目录中的静态配置数据。显示指定区域的静态配置数据。显示存储在分片数据库的目录中的静态配置数据。显示存储在Global Data Services目录中的静态配置数据，以查找位于数据库池中的指定服务。显示指定分片的属性。显示指定分片组的属性。显示指定分片空间的属性。显示分片数据库中所有表系列的信息。显示存储在目录中的静态配置数据，以进行有效的节点检查（VNCR）。设置GDSCTL参数。指定用于管理全局服务管理环境的凭据。必须指定凭据才能使用GDSCTL执行某些操作。不建议使用create catalog命令。使用create gdscatalog或创建shardcatalog。为特定数据库中的全局服务管理创建全局数据服务目录。为特定数据库中的全局服务管理创建全局数据服务目录。创建一个新分片并将其添加到分片空间或分片组。为分片数据库创建分片目录。显示所有数据库的状态。删除指定的目录。部署分片数据库。禁用指定的全局服务。启用指定的全局服务。退出GDSCTL实用程序。将当前目录配置保存到本地文件。提供当前版本中支持的GDSCTL命令列表。如果后跟命令名称，则返回与该命令关联的帮助页面。从使用export catalog命令创建的指定文件恢复目录配置。修改GDS目录或分片目录的属性。修改cdb属性。修改远程Scheduler代理将用于执行分片作业的现有凭据。修改GDS池中数据库的配置参数，例如区域，连接标识符，全局服务管理器密码，SCAN地址和ONS端口。更新目录中文件的内容，后续GDSCTL命令可以使用该文件。修改GDS池的配置参数。修改全局服务管理器的配置参数。重新启动全局服务管理器后，更改将生效。修改区域的配置参数。修改服务属性。修改分片属性。修改分片组属性。修改分片空间参数。将列出的一组块从一个分片移动到另一个分片或多个分片。退出GDSCTL实用程序。执行指定分片（数据库）上的所有DDL语句，从先前执行过的错误开始。该命令旨在在数据库管理员修复分片问题后执行所有跳过的DDL更改。在一个数据库上停止服务并在另一个数据库上启动该服务。从GDS池中删除Oracle Data Guard代理配置。从分片目录中删除一个或多个CDB，但不会销毁它。删除现有凭据。从GDS池中删除数据库。从目录中删除现有文件对象。从当前配置中删除GDS池。从配置中删除全局服务管理器。从全局数据服务目录中的有效节点检查注册（VNCR）列表中删除主机地址信息。此命令将删除指定的invitenode或与别名对应的所有invitenodes。从全局服务管理框架中删除指定的区域。从数据库池中删除服务。从分片数据库中删除一个或多个分片。从分片目录中删除分片组。从分片目录中删除分片空间。检索有关使用指定的全局服务管理器注册的服务的信息。设置当前会话的全局服务管理器。设置INBOUND_CONNECT_LEVEL侦听器参数。设置INBOUND_CONNECT_TIMEOUT侦听器参数。设置与特定全局服务管理器关联的侦听器的日志级别。设置LOG_STATUS侦听器参数。设置与特定全局服务管理器关联的侦听器的出站连接的超时值。设置OUTBOUND_CONNECT_TIMEOUT侦听器参数。设置与指定的全局服务管理器关联的侦听器的跟踪级别。设置TRC_LEVEL侦听器参数。显示DDL语句的执行状态。将每个指定的块拆分为两个具有相同数量记录的块。分割后，块保持在同一个分片中。对分片数据库执行SQL语句或PL / SQL存储过程。启动特定的全局服务管理器。启动特定服务。启动特定服务。显示全局服务管理器的运行状态和运行时信息。显示数据库的运行时状态，例如注册信息，服务等。显示特定全局服务管理器的状态。显示特定服务的状态。停止特定的全局服务管理器。停止指定的全局服务。将全局服务管理器中的Oracle Data Guard代理配置与数据库池中的配置同步。synchronize brokerconfig命令具有相同的选项和用法。将GDS池数据库的全局服务和GDS相关参数的属性与GDS目录的内容同步。synchronize database命令具有相同的选项和用法。Cross检查全局数据服务目录，全局服务管理器运行时状态和池数据库，并报告不一致和错误。Cross检查GDS目录，全局服务管理器运行时状态以及GDS池中的数据库，并报告任何不一致和错误。">全局数据服务控制实用程序（GDSCTL）命令参考</a> ，有关GDSCTL的更多信息</p>
                        </li>
                        <li>
                           <p>有关数据库服务的详细信息，请参见<a href="../admin/creating-and-configuring-an-oracle-database.html#ADMIN13994" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-415B8BB5-5C8D-4C78-8E76-43DB1648E467">全局数据服务简介</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GSMUG645"></a><a id="GSMUG108"></a><div class="props_rev_3"><a id="GUID-36BBB075-5EFF-4EBF-91A5-CE531DC289FD" name="GUID-36BBB075-5EFF-4EBF-91A5-CE531DC289FD"></a><h3 id="GSMUG-GUID-36BBB075-5EFF-4EBF-91A5-CE531DC289FD" class="sect3"><span class="enumeration_section">1.2</span>全球数据服务架构</h3>
               <div>
                  <p>下图显示了全局数据服务（GDS）配置和每个GDS配置中存在的GDS组件的示例。</p>
                  <div class="figure" id="GUID-36BBB075-5EFF-4EBF-91A5-CE531DC289FD__CHDBEGGD">
                     <p class="titleinfigure">图1-1全局数据服务组件</p><br><img src="img/gsmug_vm_009.png" alt="下面是图1-1的描述" title="下面是图1-1的描述" longdesc="img_text/gsmug_vm_009.html"><br><a href="img_text/gsmug_vm_009.html">“图1-1全局数据服务组件”的说明</a><br></div>
                  <!-- class="figure" -->
                  <p>以下部分描述了这些组件。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-BE1460BA-7B1C-48CD-AD4C-DD2117182682">全球数据服务池</a><br></li>
                     <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-D38A0740-B09B-4747-9414-33898208DE70">全球数据服务区</a><br></li>
                     <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-0B93DA7C-A390-41DE-B653-DF413ABA29FE">全球服务经理</a><br></li>
                     <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-4B04DB62-8497-414E-A75C-DED9C19CABE9">全球数据服务目录</a><br></li>
                     <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-04CA9777-28EE-4BBE-BB55-F4C2FEF367D5">Oracle Notification Service服务器</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-415B8BB5-5C8D-4C78-8E76-43DB1648E467">全局数据服务简介</a></p>
                     </div>
                  </div>
               </div>
               <a id="GSMUG111"></a><div class="props_rev_3"><a id="GUID-BE1460BA-7B1C-48CD-AD4C-DD2117182682" name="GUID-BE1460BA-7B1C-48CD-AD4C-DD2117182682"></a><h4 id="GSMUG-GUID-BE1460BA-7B1C-48CD-AD4C-DD2117182682" class="sect4"><span class="enumeration_section">1.2.1</span>全球数据服务池</h4>
                  <div>
                     <p><strong class="term">全局数据服务池</strong>是GDS配置中的命名数据库子集，它提供一组唯一的全局服务并属于同一管理域。将GDS配置数据库分区为池简化了服务管理，并允许每个池由不同的管理员管理，从而提供更高的安全性。
                     </p>
                     <p>数据库只能属于单个全局数据服务池。池中的所有数据库都不需要提供相同的全局服务集。但是，提供相同全局服务的所有数据库必须属于同一个池。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-36BBB075-5EFF-4EBF-91A5-CE531DC289FD">全局数据服务体系结构</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GSMUG112"></a><div class="props_rev_3"><a id="GUID-D38A0740-B09B-4747-9414-33898208DE70" name="GUID-D38A0740-B09B-4747-9414-33898208DE70"></a><h4 id="GSMUG-GUID-D38A0740-B09B-4747-9414-33898208DE70" class="sect4"><span class="enumeration_section">1.2.2</span>全球数据服务区域</h4>
                  <div>
                     <p><strong class="term">全局数据服务区域</strong>是GDS配置和数据库客户端中的数据库的命名子集，其共享网络邻近度，使得区域成员之间的网络延迟通常低于不同区域的成员之间的网络延迟。区域通常对应于本地区域或城域网（LAN或MAN）。例如，托管一个或多个GDS配置数据库的数据中心和数据中心附近的数据库客户端可能属于同一区域。
                     </p>
                     <p>区域可以包含多个全局数据服务池，这些池可以跨多个区域。</p>
                     <p>出于高可用性目的，GDS配置中的每个区域都应具有指定的<strong class="term">伙伴区域</strong> ，该区域包含<strong class="term">全局服务管理器</strong> ，如果本地区域中的全局服务管理器变得不可用，则该区域可以提供对GDS配置的持续访问。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-36BBB075-5EFF-4EBF-91A5-CE531DC289FD">全局数据服务体系结构</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GSMUG114"></a><div class="props_rev_3"><a id="GUID-0B93DA7C-A390-41DE-B653-DF413ABA29FE" name="GUID-0B93DA7C-A390-41DE-B653-DF413ABA29FE"></a><h4 id="GSMUG-GUID-0B93DA7C-A390-41DE-B653-DF413ABA29FE" class="sect4"><span class="enumeration_section">1.2.3</span>全球服务经理</h4>
                  <div>
                     <p><strong class="term">全球服务管理器</strong>是全球数据服务的核心软件组件，可在GDS配置中提供服务级负载平衡，故障转移和服务集中管理。全局数据服务客户端使用全局服务管理器来执行所有GDS配置操作。
                     </p>
                     <p>全局服务管理器类似于Oracle RAC数据库中的远程侦听器，但全局服务管理器为多个数据库提供服务。全球服务经理执行以下操作：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>充当客户端用于连接到全局服务的区域侦听器</p>
                        </li>
                        <li>
                           <p>为客户端提供连接时负载平衡</p>
                        </li>
                        <li>
                           <p>管理GDS配置区域内的全球服务</p>
                        </li>
                        <li>
                           <p>从GDS配置中的数据库收集性能指标，并测量配置区域之间的网络延迟</p>
                        </li>
                        <li>
                           <p>创建运行时负载平衡建议并将其发布到客户端连接池</p>
                        </li>
                        <li>
                           <p>监视数据库实例和全局服务的可用性，并在客户端失败时通知它们。</p>
                        </li>
                     </ul>
                     <p>全局服务管理器与一个且仅一个GDS配置相关联。GDS配置中的每个区域必须至少有一个全局服务管理器。建议在每个区域中配置多个全局服务管理器，以提高可用性和性能。GDS配置中的每个全局服务管理器都管理配置支持的所有全局服务。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-36BBB075-5EFF-4EBF-91A5-CE531DC289FD">全局数据服务体系结构</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GSMUG115"></a><div class="props_rev_3"><a id="GUID-4B04DB62-8497-414E-A75C-DED9C19CABE9" name="GUID-4B04DB62-8497-414E-A75C-DED9C19CABE9"></a><h4 id="GSMUG-GUID-4B04DB62-8497-414E-A75C-DED9C19CABE9" class="sect4"><span class="enumeration_section">1.2.4</span>全球数据服务目录</h4>
                  <div>
                     <p><a href="glossary.html#GUID-21DA7134-524C-493F-BF44-BAF8DC76C277"><span class="xrefglossterm">全局数据服务目录</span></a>是存储全局数据服务配置的配置数据以及该配置提供的所有全局服务的存储库。
                     </p>
                     <p>目录与一个且仅一个GDS配置相关联。目录必须驻留在Oracle Database 12c或更高版本的数据库中，并且该数据库可能位于关联的GDS配置内部或外部。对于大规模GDS配置，建议将GDS目录托管在GDS配置中的数据库之外。GDS目录可与RMAN或Oracle Enterprise Manager的目录共同托管。</p>
                     <p>Oracle强烈建议使用Oracle RAC，Oracle Data Guard和Oracle Clusterware等高可用性技术来增强全局数据服务目录所在的数据库的可用性。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-36BBB075-5EFF-4EBF-91A5-CE531DC289FD">全局数据服务体系结构</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GSMUG117"></a><div class="props_rev_3"><a id="GUID-04CA9777-28EE-4BBE-BB55-F4C2FEF367D5" name="GUID-04CA9777-28EE-4BBE-BB55-F4C2FEF367D5"></a><h4 id="GSMUG-GUID-04CA9777-28EE-4BBE-BB55-F4C2FEF367D5" class="sect4"><span class="enumeration_section">1.2.5</span> Oracle Notification Service服务器</h4>
                  <div>
                     <p>GDS客户端使用<strong class="term">Oracle Notification Service（ONS）</strong>从全局服务管理器接收运行时负载平衡咨询和高可用性事件。
                     </p>
                     <p>Oracle Notification Service（ONS）服务器与每个全局服务管理器位于同一位置。区域内的所有此类ONS服务器都是互连的。全球服务的客户端在其区域及其伙伴区域内订阅ONS服务器网络，并从这些ONS服务器网络接收FAN通知。</p>
                     <div class="infoboxnote" id="GUID-04CA9777-28EE-4BBE-BB55-F4C2FEF367D5__GUID-54CC7CC5-1DCA-42A8-84D7-FFCB6090E957">
                        <p class="notep1">注意：</p>
                        <p>全局数据服务配置中的Oracle RAC数据库还可能包含在群集节点上运行的ONS服务器。这些ONS服务器生成与本地服务相关的FAN通知，并且未连接到GDS区域中的ONS服务器网络。</p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-36BBB075-5EFF-4EBF-91A5-CE531DC289FD">全局数据服务体系结构</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="GSMUG120"></a><div class="props_rev_3"><a id="GUID-152F7AB7-F4A8-44B4-BD82-CEDA4A6F41EE" name="GUID-152F7AB7-F4A8-44B4-BD82-CEDA4A6F41EE"></a><h3 id="GSMUG-GUID-152F7AB7-F4A8-44B4-BD82-CEDA4A6F41EE" class="sect3"><span class="enumeration_section">1.3</span>全球服务概述</h3>
               <div>
                  <p>对于数据库客户端，全局数据服务配置由一组全局服务表示。服务于全局数据服务配置的全局服务管理器了解配置提供的所有全局服务，并充当配置中数据库客户端和数据库的中介。客户端程序连接到区域全局服务管理器并请求连接到全局服务。客户端不需要指定它需要哪个数据库或实例。全局服务管理器将客户端的请求转发到提供全局服务的配置中的最佳实例。共享全局服务的数据库客户端必须具有相同的服务级别要求。</p>
                  <p><span class="italic">本地</span>服务的功能（定义为由单个数据库提供的传统数据库服务）不会被全局服务更改。Oracle Database 12 <span class="italic">c</span>可以同时提供本地和全局服务。客户端应用程序也可以同时使用全局和本地服务。
                  </p>
                  <div class="infoboxnote" id="GUID-152F7AB7-F4A8-44B4-BD82-CEDA4A6F41EE__GUID-2D4D3ED7-BCBA-490E-88AE-9F1FA60BD128">
                     <p class="notep1">注意：</p>
                     <p>数据库的版本比Oracle数据库早12个<span class="italic">C</span>能提供本地服务，但只有Oracle数据库<span class="italic">12c</span>和后，能提供全球服务。
                     </p>
                  </div>
                  <p>全局服务的配置和运行时状态存储在Global Data Services目录中。每个提供全局服务的数据库还会在本地存储库（例如系统字典或Oracle集群注册表）中维护有关这些服务的信息，并提供有关本地服务的数据。存储在本地存储库中的全局服务具有用于将这些全局服务与传统本地服务区分开的标志。</p>
                  <p>如果您在本地连接到特定数据库，则可以查询该数据库提供的全局服务的数据。连接到全局数据服务目录时，可以使用全局数据服务控制实用程序（GDSCTL）配置，修改，启动或停止全局服务。这确保了全球服务的集中协调管理。您无法使用服务器控制实用程序（SRVCTL）或Oracle Clusterware Control实用程序（CRSCTL）配置，修改，启动或停止全局服务。</p>
                  <div class="infoboxnote" id="GUID-152F7AB7-F4A8-44B4-BD82-CEDA4A6F41EE__GUID-5A8E1F1F-593F-4060-A61B-FF6A0C6CA986">
                     <p class="notep1">注意：</p>
                     <p>在某些情况下（例如修补数据库或集群件软件），您可以使用带有<code class="codeph">-force</code>选项的SRVCTL和相应的命令来停止或启动全局服务。您必须具有适当的系统权限。
                     </p>
                  </div>
                  <p>为全局数据服务配置配置全局服务后，全局服务管理器将根据您在创建服务时指定的服务属性管理GDS配置数据库上的全局服务。</p>
                  <p>当数据库加入配置或在关闭后重新启动时，数据库将向配置中的所有全局服务管理器注册。收到注册请求后，其中一个全局服务管理器查询GDS目录，并检查是否在该数据库中创建了所有应提供的全局服务，并且具有正确的属性。如果目录和数据库中的信息之间存在差异，则全局服务管理器可以创建，删除或修改数据库中的某些全局服务，或更改其属性以使其与目录中的信息同步。然后，全局服务管理器确定需要在数据库上运行哪些全局服务，并在必要时启动它们。</p>
                  <p>全局服务管理器可以在数据库中启动或停止全局服务。但是，如果它是Oracle RAC数据库，则全局服务管理器不控制数据库中的哪些特定实例提供服务。这由集群件和Oracle RAC数据库的管理员控制。</p>
                  <p>当全局数据服务配置中的数据库实例失败时，配置中的所有全局服务管理器都会收到有关失败的通知，并停止向实例转发请求。如果此实例属于非群集数据库，或者该实例是Oracle RAC数据库中可用的最后一个实例，则根据配置，全局服务管理器可以自动在全局数据服务池中的另一个数据库上启动该服务启用服务的位置。如果您决定使用适当的GDSCTL命令手动将全局服务从一个数据库移动到另一个数据库，则全局服务管理器将停止并在相应的数据库上启动该服务。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-7A286BE5-147C-447E-9DF3-956449D2983E">全球服务属性</a><br></li>
                     <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-642D204E-3E00-4715-9C8E-30556955509F">Oracle RAC数据库中的全局服务</a><br></li>
                     <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-D9592AB9-0616-4497-B308-464A8868E446">Oracle Data Guard Broker配置中的全局服务</a><br></li>
                     <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-CCCEF314-9E12-4A4A-907C-9CF78AD146C5">数据库放置全局服务</a><br></li>
                     <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-EEF6583D-F346-4104-8F33-CB06C9C396FF">复制滞后和全球服务</a><br></li>
                     <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-B7B8DDFA-22F8-4E82-BA1E-A1824DE85A63">全球服务和分布式事务处理</a><br></li>
                     <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-CBAB6390-0062-4604-91F0-D9FC94A72E42">多租户架构中的全球服务</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-415B8BB5-5C8D-4C78-8E76-43DB1648E467">全局数据服务简介</a></p>
                     </div>
                  </div>
               </div>
               <a id="GSMUG121"></a><div class="props_rev_3"><a id="GUID-7A286BE5-147C-447E-9DF3-956449D2983E" name="GUID-7A286BE5-147C-447E-9DF3-956449D2983E"></a><h4 id="GSMUG-GUID-7A286BE5-147C-447E-9DF3-956449D2983E" class="sect4"><span class="enumeration_section">1.3.1</span>全球服务属性</h4>
                  <div>
                     <p>全局服务具有一组与之关联的属性，用于控制启动全局服务，负载平衡与全局服务的连接，对这些连接进行故障转移等。适用于本地服务的属性（包括特定于Oracle RAC和Oracle Data Guard代理环境的服务）也适用于全局服务。</p>
                     <p>以下属性对于全局服务是唯一的：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>首选或可用的数据库</p>
                        </li>
                        <li>
                           <p>复制滞后</p>
                        </li>
                        <li>
                           <p>区域亲和力</p>
                        </li>
                     </ul>
                     <p>您可以像修改本地服务一样修改全局服务。您可以启用和禁用全局服务，可以将全局服务移动到其他数据库，还可以更改全局服务的属性。</p>
                     <div class="infoboxnote" id="GUID-7A286BE5-147C-447E-9DF3-956449D2983E__GUID-AC1BCD70-595F-47F2-9CDF-C4CAB0558BAB">
                        <p class="notep1">注意：</p>
                        <p>您无法将本地服务升级为全局服务。</p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-152F7AB7-F4A8-44B4-BD82-CEDA4A6F41EE">全局服务概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GSMUG122"></a><div class="props_rev_3"><a id="GUID-642D204E-3E00-4715-9C8E-30556955509F" name="GUID-642D204E-3E00-4715-9C8E-30556955509F"></a><h4 id="GSMUG-GUID-642D204E-3E00-4715-9C8E-30556955509F" class="sect4"><span class="enumeration_section">1.3.2</span> Oracle RAC数据库中的全局服务</h4>
                  <div>
                     <p>全局服务的某些属性仅适用于Oracle RAC数据库，并且对于全局数据服务配置中包含的每个Oracle RAC数据库都是唯一的。这些属性与Oracle RAC数据库中包含实例的全局服务的放置有关，包括服务器池和服务基数。</p>
                     <p>对于提供全局服务的所有数据库，所有其他现有全局服务属性（例如负载平衡，角色，透明应用程序故障转移参数和数据库版本）必须相同。在全局服务级别指定这些属性。</p>
                     <div class="infoboxnote" id="GUID-642D204E-3E00-4715-9C8E-30556955509F__GUID-3345762A-0D8B-43BE-AFA6-6BB8427C25A9">
                        <p class="notep1">注意：</p>
                        <p>默认情况下，在Oracle RAC环境中，并行执行的SQL语句可以在群集中的所有节点上运行。跨节点并行执行不适用于GDS负载平衡。对于GDS配置中的Oracle RAC数据库，Oracle建议您通过将<code class="codeph">PARALLEL_FORCE_LOCAL</code>初始化参数设置为<code class="codeph">TRUE</code>来将并行执行的范围限制为Oracle RAC节点。</p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-152F7AB7-F4A8-44B4-BD82-CEDA4A6F41EE">全局服务概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GSMUG123"></a><div class="props_rev_3"><a id="GUID-D9592AB9-0616-4497-B308-464A8868E446" name="GUID-D9592AB9-0616-4497-B308-464A8868E446"></a><h4 id="GSMUG-GUID-D9592AB9-0616-4497-B308-464A8868E446" class="sect4"><span class="enumeration_section">1.3.3</span> Oracle Data Guard Broker配置中的全局服务</h4>
                  <div>
                     <p>Oracle Data Guard代理允许主数据库最多具有30个备用数据库。Oracle Data Guard代理在逻辑上将主数据库和备用数据库分组为<span class="italic">代理配置</span> ，使代理能够将数据库作为集成单元进行管理和监视。在GDS配置中包含代理配置时，您将代理配置作为一个单元进行管理。只有整个代理配置可以包含在GDS池中（或从中删除），并且代理配置不能跨越多个池。
                     </p>
                     <p>如果您尝试向GDS池添加或从GDS池中删除属于代理配置的数据库，则会发生错误。通过使用Oracle Data Guard命令行界面DGMGRL将数据库添加到代理配置，您只能将数据库添加到GDS池。将数据库添加到代理配置后，必须运行<code class="codeph">gdsctl sync brokerconfig</code>命令以同步GDS和Oracle Data Guard。
                     </p>
                     <p>GDS池可以包含给定Data Guard代理配置的一组数据库。属于不同Data Guard代理配置的数据库必须映射到不同的GDS池。包含Data Guard配置的池不能具有不属于该配置的数据库</p>
                     <div class="infoboxnotealso" id="GUID-D9592AB9-0616-4497-B308-464A8868E446__GUID-83F662EA-47A4-499B-B518-1C302AEBB560">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="gdsctl-reference.html#GUID-B81BCD99-E001-47C7-A7CA-E8431B6F107B" title="将全局服务管理器中的Oracle Data Guard代理配置与数据库池中的配置同步。synchronize brokerconfig命令具有相同的选项和用法。">sync brokerconfig（synchronize brokerconfig）</a>获取有关此命令的信息</p>
                     </div>
                     <p>相反，从代理配置中删除数据库时，将从此代理配置所属的GDS池中删除该数据库。删除数据库后，必须执行<code class="codeph">gdsctl sync brokerconfig</code>命令。这是从包含代理配置的池中删除数据库的唯一方法。
                     </p>
                     <p>您可以使用角色属性配置全局服务，使其在特定数据库角色中处于活动状态，例如主数据库或物理备用数据库的角色。如果启用快速启动故障转移，则在主数据库发生故障时，Oracle Data Guard代理会自动故障转移到备用数据库。已配置为使用Oracle Data Guard代理的全局服务管理器可确保相应的数据库服务处于活动状态，并在角色更改后发布相应的快速应用程序通知（FAN）事件。这些FAN事件启用客户端连接的快速连接故障转移（FCF）到GDS配置中的相应数据库实例。</p>
                     <p>Global Data Services框架支持以下Oracle Data Guard代理配置：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>全局数据服务池中的数据库集可以是属于单个代理配置的数据库集，也可以是不属于代理配置的一组数据库。您只能将代理配置添加到空的全局数据服务池。如果GDS池已包含代理配置，则要将数据库添加到池中，必须将数据库添加到池中包含的代理配置中。</p>
                        </li>
                        <li>
                           <p>仅对包含代理配置的数据库池支持基于角色的全局服务。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-D9592AB9-0616-4497-B308-464A8868E446__GUID-30837485-EAD9-4DD3-AAA6-1735DEE316AC">
                        <p class="notep1">也可以看看：</p>
                        <p>有关代理配置的详细信息，请参阅<a href="../dgbkr/managing-oracle-data-guard-broker-configurations.html#DGBKR095" target="_blank"><span><cite>Oracle Data Guard Broker</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-152F7AB7-F4A8-44B4-BD82-CEDA4A6F41EE">全局服务概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GSMUG124"></a><div class="props_rev_3"><a id="GUID-CCCEF314-9E12-4A4A-907C-9CF78AD146C5" name="GUID-CCCEF314-9E12-4A4A-907C-9CF78AD146C5"></a><h4 id="GSMUG-GUID-CCCEF314-9E12-4A4A-907C-9CF78AD146C5" class="sect4"><span class="enumeration_section">1.3.4</span>全球服务的数据库布局</h4>
                  <div>
                     <p>您可以指定哪些数据库支持全局服务。这些数据库称为<span class="bold">首选数据库</span> 。全局服务管理器确保全局服务在已为其指定服务的所有首选数据库上运行。首选数据库的数量称为全局服务的<span class="bold">数据库基数</span> 。您必须为全局服务指定至少一个首选数据库。
                     </p>
                     <div class="infoboxnote" id="GUID-CCCEF314-9E12-4A4A-907C-9CF78AD146C5__GUID-A1EFB9F6-1BD5-400D-8FD1-3C009722B7C0">
                        <p class="notep1">注意：</p>
                        <p>如果为哪些数据库支持服务设置<code class="codeph">preferred_all</code> ，则不必显式指定首选或可用数据库。<code class="codeph">preferred_all</code>设置意味着池中的所有数据库都是首选。
                        </p>
                     </div>
                     <p>添加或修改全局服务时，可以为此全局服务指定可用数据库的列表。如果其中一个首选数据库无法提供全局服务，则全局服务管理器会将服务重定位到可用数据库，以维护该服务的指定数据库基数。</p>
                     <p>在包含Oracle Data Guard代理配置的全局数据服务池中，只有在数据库列为首选或可用于服务并且数据库的<code class="codeph">role</code>属性对应于数据库时，才能在数据库上启动基于角色的全局服务。为服务指定的<code class="codeph">role</code>属性。例如，可以在代理配置中的任何数据库上运行的全局服务（只要数据库的<code class="codeph">role</code>属性设置为<code class="codeph">primary</code> ）必须为其<code class="codeph">role</code>属性指定<code class="codeph">primary</code> ，并使代理配置中的所有其他数据库都具有<code class="codeph">role</code>属性设置为<code class="codeph">preferred</code> 。
                     </p>
                     <div class="infoboxnote" id="GUID-CCCEF314-9E12-4A4A-907C-9CF78AD146C5__GUID-CE855A72-6FF0-4946-BCFE-774A5BC5C8B4">
                        <p class="notep1">注意：</p>
                        <p>不要将全局服务的<span class="italic">数据库基数</span>与其<span class="italic">实例基数</span>混淆。为每个Oracle RAC数据库单独指定和维护实例基数，并且不在全局数据服务池的数据库之间维护实例基数。
                        </p>
                        <p>例如，考虑一种情况，即Oracle RAC数据库提供全局服务的实例很少，其中一个实例失败，但没有可用的实例来启动全局服务。在这种情况下，服务不会在另一个Oracle RAC数据库的可用数据库实例上启动。但是，如果失败的实例是提供服务的数据库中的最后一个实例，则该服务可能会在列为可用于此服务的另一个数据库上启动。</p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-152F7AB7-F4A8-44B4-BD82-CEDA4A6F41EE">全局服务概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GSMUG126"></a><div class="props_rev_3"><a id="GUID-EEF6583D-F346-4104-8F33-CB06C9C396FF" name="GUID-EEF6583D-F346-4104-8F33-CB06C9C396FF"></a><h4 id="GSMUG-GUID-EEF6583D-F346-4104-8F33-CB06C9C396FF" class="sect4"><span class="enumeration_section">1.3.5</span>复制滞后和全球服务</h4>
                  <div>
                     <p>出于性能原因，分布式数据库系统通常在数据库之间使用异步数据复制，这意味着在更新主数据库上的数据与此更新在副本上显示的时间之间可能存在延迟。发生这种情况时，副本数据库滞后于其主数据库。</p>
                     <p>全局数据服务使应用程序能够区分提供实时数据的全局服务，这些服务可能因复制滞后而返回过时的数据。对于可以承受一定程度延迟的应用程序，您可以配置最大可接受滞后值。</p>
                     <p>对于无法容忍复制延迟的应用程序，可以将全局服务的延迟时间设置为零。此全局服务的请求仅转发到主数据库或与主数据库同步的副本数据库。</p>
                     <div class="infoboxnotealso" id="GUID-EEF6583D-F346-4104-8F33-CB06C9C396FF__GUID-7C2645C6-96BC-411F-973D-1805CADC1798">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="global-data-services-admin.html#GUID-2B4F6218-309D-477C-9B57-48449D20BAAD">管理全局数据服务配置</a>以获取更多信息</p>
                     </div>
                     <div class="infoboxnote" id="GUID-EEF6583D-F346-4104-8F33-CB06C9C396FF__GUID-451A2201-80D3-4D55-ABDA-14A303F379A9">
                        <p class="notep1">注意：</p>
                        <p>如有必要，只有Oracle Data Guard备用数据库可以与主数据库同步，以便您可以在主数据库和同步备用数据库上启用实时只读服务。</p>
                     </div>
                     <p>对于许多应用程序，只要数据一致，就可以读取陈旧数据。此类应用程序可以使用在任何数据库副本上运行的全局服务，而不考虑复制滞后时间的长度。</p>
                     <p>如果将服务的延迟时间配置为零以外的值，则客户端请求只能转发到不滞后于主数据库的副本数据库，其长度超过服务的配置延迟时间。如果没有这样的数据库，则连接请求失败。</p>
                     <div class="infoboxnote" id="GUID-EEF6583D-F346-4104-8F33-CB06C9C396FF__GUID-B25B93A3-B628-4762-8253-082940582A0F">
                        <p class="notep1">注意：</p>
                        <p>Active Data Guard配置仅支持最大复制延迟的规范。</p>
                     </div>
                     <p>如果当前正在运行的服务开始超过指定的最大延迟，则在完成所有当前请求后关闭服务。对服务的新请求将路由到满足服务的已配置滞后值的数据库。</p>
                     <div class="infoboxnote" id="GUID-EEF6583D-F346-4104-8F33-CB06C9C396FF__GUID-2080E820-B3B4-412E-87CD-1267BDFE712C">
                        <p class="notep1">注意：</p>
                        <p>如果将Oracle Data Guard与Oracle Active Data Guard选项一起使用，则可以使用<code class="codeph">STANDBY_MAX_DATA_DELAY</code>会话参数指定特定于会话的延迟容差。将此参数设置为非零值时，仅当应用程序延迟时间小于或等于<code class="codeph">STANDBY_MAX_DATA_DELAY</code>参数值时，才会执行发出到物理备用数据库的查询。否则，数据库将返回错误以警告客户端延迟时间过长。如果同时设置了会话级和服务级参数且<code class="codeph">STANDBY_MAX_DATA_DELAY</code>参数值小于服务级别参数值，则客户端将保持与数据库的连接，但查询将返回错误。
                        </p>
                     </div>
                     <div class="infoboxnote" id="GUID-EEF6583D-F346-4104-8F33-CB06C9C396FF__GUID-EB03FE4D-B29D-490A-A550-4BEBA34DDC8A">
                        <p class="notep1">警告：</p>
                        <p>如果数据库失败，则全局服务管理器可以将客户端连接路由到另一个满足为服务指定的最大滞后值的数据库，即使它落后于失败的数据库。但是，此解决方案可能会为某些应用程序创建数据一致性问题。</p>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-EEF6583D-F346-4104-8F33-CB06C9C396FF__GUID-F819EA6A-4314-4549-AFBB-E414780E328F">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">STANDBY_MAX_DATA_DELAY</code>会话参数的详细信息，请<code class="codeph">STANDBY_MAX_DATA_DELAY</code> <a href="../sbydb/managing-oracle-data-guard-physical-standby-databases.html#SBYDB4779" target="_blank"><span><cite>Oracle Data Guard概念和管理</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-152F7AB7-F4A8-44B4-BD82-CEDA4A6F41EE">全局服务概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GSMUG689"></a><div class="props_rev_3"><a id="GUID-B7B8DDFA-22F8-4E82-BA1E-A1824DE85A63" name="GUID-B7B8DDFA-22F8-4E82-BA1E-A1824DE85A63"></a><h4 id="GSMUG-GUID-B7B8DDFA-22F8-4E82-BA1E-A1824DE85A63" class="sect4"><span class="enumeration_section">1.3.6</span>全球服务和分布式事务处理</h4>
                  <div>
                     <p>在针对GDS配置执行XA（分布式）事务时，必须将XA事务的紧密耦合分支定向到同一数据库。这可以通过确保分布式事务中使用的每个全局服务一次完全在一个数据库上运行来实现。GDS池管理员有责任配置和维护分布式事务中使用的全局服务的属性。</p>
                     <p>如果XA事务中使用的全局服务正在多实例Oracle RAC数据库上运行，则默认情况下，XA事务的紧密耦合分支可以发送到单独的数据库实例。这可能导致次优性能。为避免在这种情况下性能下降，强烈建议将可以在Oracle RAC数据库中运行的XA事务使用的任何服务的DTP参数（ <code class="codeph">-dtp)</code>为TRUE。设置参数可确保通过服务执行的所有分布式事务都在单个Oracle RAC实例上运行紧密耦合的分支。
                     </p>
                     <div class="infoboxnote" id="GUID-B7B8DDFA-22F8-4E82-BA1E-A1824DE85A63__GUID-BD8A5788-0904-45A4-A013-B1201F7B387A">
                        <p class="notep1">注意：</p>
                        <p>全局服务的DTP参数仅影响提供此服务的Oracle RAC数据库上的XA事务处理。它对全局服务的数据库基数没有影响。必须手动将分布式事务使用的全局服务配置为一次在单个数据库上处于活动状态。</p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-152F7AB7-F4A8-44B4-BD82-CEDA4A6F41EE">全局服务概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GSMUG690"></a><div class="props_rev_3"><a id="GUID-CBAB6390-0062-4604-91F0-D9FC94A72E42" name="GUID-CBAB6390-0062-4604-91F0-D9FC94A72E42"></a><h4 id="GSMUG-GUID-CBAB6390-0062-4604-91F0-D9FC94A72E42" class="sect4"><span class="enumeration_section">1.3.7</span>多租户架构中的全球服务</h4>
                  <div>
                     <p>多租户容器数据库（CDB）可以是GDS配置的一部分。可以在CDB的根级别（CDB $ ROOT）或可插拔数据库（PDB）级别定义全局服务。可以通过在创建时将PDB属性设置为PDB名称来创建在PDB上运行的全局服务。创建服务后，无法修改全局服务的PDB属性。如果未设置PDB属性，则在CDB根级别（CDB $ ROOT）创建服务。</p>
                     <p>在PDB级别创建服务时，所有服务的首选和可用数据库都应包含它所属的PDB。在PDB级别定义的全局服务由与任何其他级别定义的服务相同的操作和规则进行管理。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-152F7AB7-F4A8-44B4-BD82-CEDA4A6F41EE">全局服务概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="GSMUG127"></a><div class="props_rev_3"><a id="GUID-2221DEC7-176A-4707-BF0F-7DEDCBEB250D" name="GUID-2221DEC7-176A-4707-BF0F-7DEDCBEB250D"></a><h3 id="GSMUG-GUID-2221DEC7-176A-4707-BF0F-7DEDCBEB250D" class="sect3"><span class="enumeration_section">1.4</span>全局连接负载平衡</h3>
               <div>
                  <p>当客户端使用服务连接到Oracle RAC数据库时，客户端可以使用Oracle Net连接负载平衡功能在支持该服务的所有实例之间分布用户连接。同样，在全局数据服务配置中，连接到全局服务的客户端会根据需要在不同的数据库和区域之间进行负载平衡。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-3A35CF29-7999-4EE1-BB74-ACA78ED16FA0">客户端负载平衡</a><br></li>
                     <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-9D94CDC7-EC28-4D64-9C39-F8420A058852">服务器端负载平衡</a><br></li>
                     <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-01E24034-1592-405E-A013-8D9C20E3FDBB">全球服务的区域亲和力</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-415B8BB5-5C8D-4C78-8E76-43DB1648E467">全局数据服务简介</a></p>
                     </div>
                  </div>
               </div>
               <a id="GSMUG128"></a><div class="props_rev_3"><a id="GUID-3A35CF29-7999-4EE1-BB74-ACA78ED16FA0" name="GUID-3A35CF29-7999-4EE1-BB74-ACA78ED16FA0"></a><h4 id="GSMUG-GUID-3A35CF29-7999-4EE1-BB74-ACA78ED16FA0" class="sect4"><span class="enumeration_section">1.4.1</span>客户端负载均衡</h4>
                  <div>
                     <p>客户端负载平衡平衡了跨全局服务管理器的连接请求。还支持连接故障转移。通过连接故障转移，如果从所选全局服务管理器返回错误，则Oracle Net Services将尝试地址列表中的下一个地址，直到成功建立连接或Oracle Net Services已耗尽列表中的所有地址。</p>
                     <p>全局数据服务配置中的客户端负载平衡和故障转移与Oracle RAC数据库的类似。但是，在全局数据服务配置中，全局数据服务区域中的客户端首先尝试连接到其本地区域中的任何全局服务管理器。如果来自本地区域的全局服务管理器未响应，则客户端将尝试另一个区域中的全局服务管理器。</p>
                     <p>要在全局数据服务配置中跨多个区域启用客户端负载平衡和故障转移，客户端必须使用Oracle Net连接描述符，其中包含一个本地区域全局服务管理器地址列表，用于负载平衡和区域内故障转移，以及一个（或更多）用于区域间故障转移的远程区域全局服务管理器的地址列表。如果未指定区域，则默认为客户端连接的全局服务管理器的区域名称。您还可以为每个列表配置超时和重试尝试，以便在移动到列表中的另一个全局服务管理器之前启用对当前全局服务管理器的多次连接尝试。</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-3A35CF29-7999-4EE1-BB74-ACA78ED16FA0__GUID-2634FF81-A256-48CF-B397-7CF79C54C714">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="global-data-services-config.html#GUID-C2F0EF24-6721-407C-BC02-E210824413E4">数据库客户端配置</a>以获取更多信</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-2221DEC7-176A-4707-BF0F-7DEDCBEB250D">全局连接负载平衡</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GSMUG129"></a><div class="props_rev_3"><a id="GUID-9D94CDC7-EC28-4D64-9C39-F8420A058852" name="GUID-9D94CDC7-EC28-4D64-9C39-F8420A058852"></a><h4 id="GSMUG-GUID-9D94CDC7-EC28-4D64-9C39-F8420A058852" class="sect4"><span class="enumeration_section">1.4.2</span>服务器端负载均衡</h4>
                  <div>
                     <p>Oracle RAC数据库的服务器端负载平衡使侦听器将连接请求定向到最佳Oracle RAC数据库实例。某些应用程序具有长期连接，而其他应用程序具有短期连接。</p>
                     <p>对于全局服务，服务器端负载平衡的工作方式类似，不同之处在于，工作负载在全局数据服务配置中的多个数据库之间平衡，而不是限于单个数据库。在大多数情况下，全局服务管理器将客户端对全局服务的请求定向到同一区域中的数据库服务器，除非所有本地服务器都过载并且远程服务器可以提供明显更好的服务质量。</p>
                     <p>在某些情况下，要利用本地服务器上的数据缓存，您可以将请求定向到本地区域。通过全局数据服务，您可以为全局服务指定所需的客户端/服务器关联级别。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-2221DEC7-176A-4707-BF0F-7DEDCBEB250D">全局连接负载平衡</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GSMUG130"></a><div class="props_rev_3"><a id="GUID-01E24034-1592-405E-A013-8D9C20E3FDBB" name="GUID-01E24034-1592-405E-A013-8D9C20E3FDBB"></a><h4 id="GSMUG-GUID-01E24034-1592-405E-A013-8D9C20E3FDBB" class="sect4"><span class="enumeration_section">1.4.3</span>全球服务的区域亲和力</h4>
                  <div>
                     <p>您可以将全局服务配置为在全局数据服务配置中的特定区域或任何区域中运行。这称为<span class="bold">区域亲和力</span> 。
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-3F55365B-6893-4615-B3B3-18725CCAAB9A">任何地区的亲和力</a><br></li>
                        <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-E2F4B102-C943-487E-BFCA-E50A64E92A11">对当地区域的亲和力</a><br></li>
                        <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-CFB7D9D6-8D5A-43B2-942C-259681FEA391">具有区域间故障转移的本地区域的亲和性</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-2221DEC7-176A-4707-BF0F-7DEDCBEB250D">全局连接负载平衡</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="GSMUG131"></a><div class="props_rev_3"><a id="GUID-3F55365B-6893-4615-B3B3-18725CCAAB9A" name="GUID-3F55365B-6893-4615-B3B3-18725CCAAB9A"></a><h5 id="GSMUG-GUID-3F55365B-6893-4615-B3B3-18725CCAAB9A" class="sect5"><span class="enumeration_section">1.4.3.1</span>任何区域亲和力</h5>
                     <div>
                        <p>全局服务的任何区域关联（默认）将客户端连接请求路由到全局数据服务配置中的最佳数据库，无论区域如何，都可以满足所请求服务的连接负载平衡目标。数据库的选择基于客户端和数据库所在区域之间的性能和网络延迟。如果不同地区的数据库负载相同，则此策略优先考虑本地区域。只有当区域之间的数据库性能差异超过网络延迟时，才会建立区域间连接。</p>
                        <p>如果为具有任何区域关联的全局服务指定首选的可用数据库，则在全局数据服务池级别维护服务基数。如果服务在首选数据库上失败，则会在全局数据服务池中的任何可用数据库上启动该服务，并且池中的服务提供者数量保持不变。在可用数据库上启动服务时，服务失败的区域中的数据库具有首选项。如果本地区域中没有此服务的可用数据库，则从附近区域中选择可用数据库。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-01E24034-1592-405E-A013-8D9C20E3FDBB">全局服务的区域关联性</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="GSMUG132"></a><div class="props_rev_3"><a id="GUID-E2F4B102-C943-487E-BFCA-E50A64E92A11" name="GUID-E2F4B102-C943-487E-BFCA-E50A64E92A11"></a><h5 id="GSMUG-GUID-E2F4B102-C943-487E-BFCA-E50A64E92A11" class="sect5"><span class="enumeration_section">1.4.3.2</span>对当地区域的亲和力</h5>
                     <div>
                        <p>对全局服务的本地全局数据服务区域的亲和性将客户端连接请求路由到客户端区域中的最佳数据库，该数据库可以满足所请求服务的连接负载平衡目标。全局服务管理器仅根据数据库的性能选择数据库。可以在多个全局数据服务区域中同时提供与本地区域具有亲缘关系的全局服务，但是来自一个区域的客户端永远不会连接到另一个区域中的数据库。</p>
                        <p>如果为具有本地区域关联性的全局服务指定首选或可用数据库，则在区域级别维护服务基数。如果服务在首选数据库上失败，则服务将在同一区域中的可用数据库上启动，因此该区域中的服务提供者数量保持不变。如果本地区域中没有此全局服务的可用数据库，则不执行任何操作，并且服务基数会降低。如果提供全局服务的本地区域中没有数据库，则拒绝客户端连接请求。对于与本地区域具有亲缘关系的全局服务，服务的数据库基数在每个区域中独立维护。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-01E24034-1592-405E-A013-8D9C20E3FDBB">全局服务的区域关联性</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="GSMUG133"></a><div class="props_rev_3"><a id="GUID-CFB7D9D6-8D5A-43B2-942C-259681FEA391" name="GUID-CFB7D9D6-8D5A-43B2-942C-259681FEA391"></a><h5 id="GSMUG-GUID-CFB7D9D6-8D5A-43B2-942C-259681FEA391" class="sect5"><span class="enumeration_section">1.4.3.3</span>具有区域间故障转移的本地区域的亲和性</h5>
                     <div>
                        <p>这种类型的亲和性类似于对本地全局数据服务区域的亲和性，但是，如果本地区域中没有提供全局服务的数据库，那么请求将被转发到本地区域，而不是拒绝客户端请求。所请求的全局服务正在运行的另一个区域中的最佳数据库。此服务故障转移不会触发在另一个区域中的可用数据库上启动服务，因为与本地区域具有亲缘关系，数据库基数在每个区域中独立维护，并且不应因其他区域中的服务故障而更改。如果区域数据库因区域间故障转移而过载，则可以手动为服务添加首选数据库。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-01E24034-1592-405E-A013-8D9C20E3FDBB">全局服务的区域关联性</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="GSMUG134"></a><div class="props_rev_3"><a id="GUID-E5084527-71AE-414D-8A7D-B3441834B411" name="GUID-E5084527-71AE-414D-8A7D-B3441834B411"></a><h3 id="GSMUG-GUID-E5084527-71AE-414D-8A7D-B3441834B411" class="sect3"><span class="enumeration_section">1.5</span>全局运行时连接负载平衡</h3>
               <div>
                  <p>全局运行时连接负载平衡基于来自数据库的负载平衡信息，跨跨Oracle RAC数据库实例的持久连接分发客户端工作请求。连接池支持此功能，可以接收负载平衡建议。数据库使用服务的运行时连接负载平衡目标和数据库实例的相对性能来生成有关在何处引导服务请求的建议。</p>
                  <p>运行时连接负载平衡有两种类型的服务级别目标：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="bold">SERVICE_TIME</span> ：尝试根据响应时间将工作请求定向到实例。负载平衡数据基于服务中完成的工作所用的时间加上服务的可用带宽。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">THROUGHPUT</span> ：尝试根据吞吐量来指导工作请求。负载平衡数据基于服务中完成的工作速率加上服务的可用带宽。
                        </p>
                     </li>
                  </ul>
                  <p>全局数据服务框架还支持在运行时平衡工作请求到全局服务。在全局数据服务框架中，请求分布在多个数据库中的实例的连接中。工作路由以在全球范围内提供最佳服务时间，并且路由可以适应不断变化的系统条件。</p>
                  <p>为了提供全局运行时连接负载平衡，全局服务管理器从全局数据服务配置中的所有数据库实例接收每个服务的性能数据。全球服务管理器还通过定期与其他全球数据服务区域中的全局服务管理器交换消息来测量区域间网络延迟。</p>
                  <p>如果全局服务的负载平衡目标设置为<code class="codeph">SERVICE_TIME</code> ，则全局服务管理器在决定如何分配工作请求时会考虑区域间网络延迟和实例性能数据。例如，区域A中的客户端具有针对区域A加权的运行时负载平衡度量标准，区域B中的客户端具有针对区域B加权的度量标准。这意味着即使服务可能相同，客户端也可以不同的区域接收不同的运行时负载平衡指标。
                  </p>
                  <p>如果将全局服务的负载平衡目标设置为<code class="codeph">THROUGHPUT</code> ，则仅基于数据库实例的性能计算运行时负载平衡度量标准。
                  </p>
                  <p>除了计算本地客户端的运行时负载平衡指标之外，全局服务管理器还可能需要计算远程区域的运行时负载平衡指标，并为驻留在所有全局服务管理器不可用的区域中的客户端发布指标。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-BFBDFB7E-8B7C-40F8-B7E5-DD328B6EF8D4">亲和</a><br></li>
                     <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-0817EA9C-5C8A-47AD-8D46-442537A3E57A">磁盘I / O和CPU阈值</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-415B8BB5-5C8D-4C78-8E76-43DB1648E467">全局数据服务简介</a></p>
                     </div>
                  </div>
               </div>
               <a id="GSMUG691"></a><div class="props_rev_3"><a id="GUID-BFBDFB7E-8B7C-40F8-B7E5-DD328B6EF8D4" name="GUID-BFBDFB7E-8B7C-40F8-B7E5-DD328B6EF8D4"></a><h4 id="GSMUG-GUID-BFBDFB7E-8B7C-40F8-B7E5-DD328B6EF8D4" class="sect4"><span class="enumeration_section">1.5.1</span>亲和力</h4>
                  <div>
                     <p>全局服务管理器提供有关如何将传入工作定向到全局数据服务配置中的数据库的建议，该配置为该工作提供最佳服务质量。负载平衡建议还会向客户端，Oracle Net服务事件的订户（如通用连接池（UCP）和ODP.NET连接池等）发送额外的关联信息，是否应重新连接到相同的数据库将会话重新连接到同一数据库可以提高缓冲区缓存效率并降低CPU使用率和事务延迟。亲和性信息指示亲和关系对于特定数据库是活动的还是非活动的。对于单个实例数据库，它始终处于非活动状态，如果数据库是Oracle RAC，则对于特定实例可以是活动的或非活动的。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-E5084527-71AE-414D-8A7D-B3441834B411">全局运行时连接负载平衡</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GSMUG692"></a><div class="props_rev_3"><a id="GUID-0817EA9C-5C8A-47AD-8D46-442537A3E57A" name="GUID-0817EA9C-5C8A-47AD-8D46-442537A3E57A"></a><h4 id="GSMUG-GUID-0817EA9C-5C8A-47AD-8D46-442537A3E57A" class="sect4"><span class="enumeration_section">1.5.2</span>磁盘I / O和CPU阈值</h4>
                  <div>
                     <p>磁盘I / O和CPU阈值是数据库管理员可以设置的资源消耗限制。通过设置单块读取延迟限制来配置磁盘I / O阈值，并通过设置CPU使用率限制来设置CPU阈值。全局服务管理器监视资源使用情况并检查是否已达到I / O和CPU阈值。当数据库达到其中一个阈值时，负载平衡咨询会重新调整其有关如何将传入工作定向到此数据库的建议。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-E5084527-71AE-414D-8A7D-B3441834B411">全局运行时连接负载平衡</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="GSMUG135"></a><div class="props_rev_3"><a id="GUID-63143CA0-23BF-46D2-A349-401FECD24FBD" name="GUID-63143CA0-23BF-46D2-A349-401FECD24FBD"></a><h3 id="GSMUG-GUID-63143CA0-23BF-46D2-A349-401FECD24FBD" class="sect3"><span class="enumeration_section">1.6</span>全球服务故障转移</h3>
               <div>
                  <p>当全局服务或数据库发生故障时，在数据库上运行的全局服务将故障转移到启用了全局服务但尚未运行的另一个数据库（如果数据库角色与服务角色匹配）。全局服务管理器将首选数据库视为可用数据库之前的故障转移目标。</p>
                  <p>如果使用GDSCTL停止全局服务，则该服务不会故障转移到另一个数据库。但是，停止服务的数据库仍然是此服务的故障转移目标。如果服务在另一个数据库上失败，则该服务可以在该数据库上启动。</p>
                  <p>当全局服务故障转移到可用数据库时，全局数据服务框架在首选数据库重新启动时不会将服务移回首选数据库，原因如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>该服务具有所需的基数</p>
                     </li>
                     <li>
                        <p>在当前实例或数据库上维护服务可提供更高级别的服务可用性</p>
                     </li>
                     <li>
                        <p>不将服务移回初始首选实例或数据库可防止第二次中断</p>
                     </li>
                  </ul>
                  <p>如有必要，可以在服务重新启动后手动将全局服务重定位回首选数据库，而不终止活动会话。</p>
                  <p>在包含Oracle Data Guard代理配置的全局数据服务池中，全局数据服务框架支持基于角色的全局服务。有效角色为<code class="codeph">PRIMARY</code> ， <code class="codeph">PHYSICAL_STANDBY</code> ， <code class="codeph">LOGICAL_STANDBY</code>和<code class="codeph">SNAPSHOT_STANDBY</code> 。仅当数据库角色与为服务指定的角色匹配时，全局数据服务框架才会自动启动全局服务。
                  </p>
                  <p>如果数据库切换角色或失败，则Oracle Data Guard代理会向全局数据服务框架通知角色更改或失败，并且全局服务管理器确保服务根据新数据库角色启动。</p>
                  <div class="infoboxnote" id="GUID-63143CA0-23BF-46D2-A349-401FECD24FBD__GUID-DB5B2B5C-EC99-439D-9197-F3B2797358DA">
                     <p class="notep1">注意：</p>
                     <p>如果locality参数设置为<code class="codeph">LOCAL_ONLY</code> ，并且未启用区域间故障转移，则全局服务无法从一个全局数据服务区域中的数据库故障转移到另一个区域中的数据库。
                     </p>
                  </div>
                  <p>当全局服务进行故障转移时，快速连接故障转移（如果在Oracle客户端上启用）可以快速故障转移到该全局服务的连接。与Oracle RAC类似，全局数据服务框架使用快速应用程序通知（FAN）来通知应用程序有关服务中断的信息。客户端不会等待应用程序轮询数据库并检测问题，而是立即接收FAN事件并作出反应。终止故障实例或节点的会话，并将新连接定向到提供全局服务的可用实例。</p>
                  <p>所有全局服务管理器都监视全局数据服务配置中所有数据库的服务可用性。当全局服务管理器检测到全局服务由于故障而变得不可用时，将在可用数据库上启动全局服务。</p>
                  <div class="infoboxnote" id="GUID-63143CA0-23BF-46D2-A349-401FECD24FBD__GUID-C407C9D4-68AA-4430-A00A-48A564BE3D41">
                     <p class="notep1">注意：</p>
                     <p>如果服务无法连接到全局数据服务目录，则全局服务管理器无法自动对服务进行故障转移。</p>
                  </div>
                  <div class="infoboxnote" id="GUID-63143CA0-23BF-46D2-A349-401FECD24FBD__GUID-4A5E13CF-59A3-4ECB-94E3-801D5C96B614">
                     <p class="notep1">注意：</p>
                     <p>当故障转移的目标数据库受Oracle Clusterware控制时，在此数据库上启动服务的全局服务管理器故障转移请求可能会导致启动另一个实例的Oracle Clusterware“上拉”事件。当至少一个实例向全局服务管理器侦听器注册时，将发生这种情况，允许全局服务管理器注意数据库正在运行，因此是故障转移的有效目标，但该服务尚未在数据库上运行。当注册的实例不是服务的主要或有效实例时，可能会发生这种情况，因为它是管理员管理的Oracle RAC数据库上的可用实例，或者因为它是策略管理的Oracle RAC数据库的实例，不在与服务相同的服务器池中。</p>
                  </div>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-415B8BB5-5C8D-4C78-8E76-43DB1648E467">全局数据服务简介</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-47D2FA68-FA1A-4FE5-A6EF-A0070F2E1F14" name="GUID-47D2FA68-FA1A-4FE5-A6EF-A0070F2E1F14"></a><h3 id="GSMUG-GUID-47D2FA68-FA1A-4FE5-A6EF-A0070F2E1F14" class="sect3"><span class="enumeration_section">1.7</span>全球服务经理流程套件架构</h3>
               <div>
                  <p>全局服务管理器进程套件体系结构是一个包含多个使用共享内存进行通信的进程的进程套件全局服务管理器包含以下过程：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>监控 - 监控流程套件中所有其他流程的运行状况。负责启动其他全局服务管理器进程，创建共享内存区域并在检测到其死亡后重新生成全局服务管理器进程。</p>
                     </li>
                     <li>
                        <p>侦听器 - 侦听传入的客户端连接请求，并将请求转发到适当的数据库实例。全局数据服务配置中的每个实例都为所有全局服务管理器侦听器建立通信通道。此通道用于注册全局服务并向侦听器发送性能指标。这些度量标准稍后用于连接时和运行时负载平衡。检测数据库实例何时关闭。侦听器进程提供常规数据库侦听器的完整功能。因此，全局服务管理器扮演全局数据服务配置中所有数据库的远程侦听器角色。全局服务管理器侦听器将连接请求直接路由到本地数据库侦听器，绕过Oracle RAC数据库上的SCAN侦听器。</p>
                     </li>
                     <li>
                        <p>Pinger  - 通过与其他地区的全球服务经理的pinger流程交换数据来衡量地区之间的网络延迟。全局分布式数据库云中的连接时和运行时负载平衡需要进行测量。监控其他全球服务经理，并在必须成为区域或主人时告诉其自己的全球服务经理</p>
                     </li>
                     <li>
                        <p>OCI流程 - 负责建立与全球数据服务数据库的SQLNET连接以管理服务，以及负责管理全局数据服务配置的全局数据服务目录。</p>
                     </li>
                     <li>
                        <p>ONS服务器 - 将RLB和HA风扇事件发布到区域ONS网络，以便客户端可以订阅事件。</p>
                     </li>
                     <li>
                        <p>ONS客户端 - 负责订阅由全局数据服务配置中的Oracle RAC数据库发布的HA事件。</p>
                     </li>
                  </ul>
                  <p><a href="intro-global-data-services.html#GUID-47D2FA68-FA1A-4FE5-A6EF-A0070F2E1F14__CHDECJFF">图1-2</a>显示了内部流程体系结构以及流程内外的信息流。
                  </p>
                  <div class="figure" id="GUID-47D2FA68-FA1A-4FE5-A6EF-A0070F2E1F14__CHDECJFF">
                     <p class="titleinfigure">图1-2 Global Service Manager Process Suite体系结构</p><br><img src="img/gsmug_vm_011.png" alt="下面是图1-2的描述" title="下面是图1-2的描述" longdesc="img_text/gsmug_vm_011.html"><br><a href="img_text/gsmug_vm_011.html">“图1-2全球服务管理器流程套件架构”的说明</a><br></div>
                  <!-- class="figure" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-415B8BB5-5C8D-4C78-8E76-43DB1648E467">全局数据服务简介</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GSMUG709"></a><div class="props_rev_3"><a id="GUID-1BB1ACBB-CD68-4A83-81D0-5D3047A41387" name="GUID-1BB1ACBB-CD68-4A83-81D0-5D3047A41387"></a><h3 id="GSMUG-GUID-1BB1ACBB-CD68-4A83-81D0-5D3047A41387" class="sect3"><span class="enumeration_section">1.8</span>全球数据服务用例</h3>
               <div>
                  <p>以下是Oracle全球数据服务的一些用例：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-2C1BCB71-F746-4984-A4D4-48E36AABC0D5">负载平衡复制数据库</a><br></li>
                     <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-3A98F51E-687D-4CBD-80D9-B9AACF00A087">复制数据库的服务故障转移</a><br></li>
                     <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-A2486F11-3064-4214-82DF-4854572C2B67">Oracle GoldenGate Multi-Master中的区域亲和力</a><br></li>
                     <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-2C309E5D-921C-4ABE-8009-87C31887EE27">Oracle GoldenGate Multi-Master中的负载平衡</a><br></li>
                     <li class="ulchildlink"><a href="intro-global-data-services.html#GUID-993D619D-9991-4B2E-854B-FBEB441C61E4">平衡Oracle Active Data Guard和Oracle GoldenGate Reader Farms</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-415B8BB5-5C8D-4C78-8E76-43DB1648E467">全局数据服务简介</a></p>
                     </div>
                  </div>
               </div>
               <a id="GSMUG717"></a><a id="GSMUG710"></a><div class="props_rev_3"><a id="GUID-2C1BCB71-F746-4984-A4D4-48E36AABC0D5" name="GUID-2C1BCB71-F746-4984-A4D4-48E36AABC0D5"></a><h4 id="GSMUG-GUID-2C1BCB71-F746-4984-A4D4-48E36AABC0D5" class="sect4"><span class="enumeration_section">1.8.1</span>复制数据库的负载平衡</h4>
                  <div>
                     <p>全局数据服务将Oracle RAC式连接时和运行时负载平衡功能（在数据中心内和跨数据中心）扩展到一组复制数据库。该算法考虑了负载指标，区域关联性，网络延迟和负载平衡目标。它通过在Active Data Guard上启用全局数据服务，最大限度地提高性能并实现高效的资源利用。</p>
                     <p><a href="intro-global-data-services.html#GUID-2C1BCB71-F746-4984-A4D4-48E36AABC0D5__CHDIDADG">图1-3</a>显示了全局数据服务配置中本地和远程复制数据库之间的负载平衡。读写服务在主（或主）数据库上运行。只读服务在两个备用（或副本）数据库上运行。客户端连接在备用数据库（跨两个数据中心）上运行的只读服务之间进行负载平衡。
                     </p>
                     <div class="figure" id="GUID-2C1BCB71-F746-4984-A4D4-48E36AABC0D5__CHDIDADG">
                        <p class="titleinfigure">图1-3复制数据库的负载平衡</p><br><img src="img/gsmug_vm_010.png" alt="下面是图1-3的描述" title="下面是图1-3的描述" longdesc="img_text/gsmug_vm_010.html"><br><a href="img_text/gsmug_vm_010.html">“图1-3复制数据库的负载平衡”的说明</a><br></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-1BB1ACBB-CD68-4A83-81D0-5D3047A41387">全局数据服务用例</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GSMUG719"></a><a id="GSMUG720"></a><a id="GSMUG718"></a><div class="props_rev_3"><a id="GUID-3A98F51E-687D-4CBD-80D9-B9AACF00A087" name="GUID-3A98F51E-687D-4CBD-80D9-B9AACF00A087"></a><h4 id="GSMUG-GUID-3A98F51E-687D-4CBD-80D9-B9AACF00A087" class="sect4"><span class="enumeration_section">1.8.2</span>复制数据库的服务故障转移</h4>
                  <div>
                     <p>Global Data Services将Oracle RAC式服务故障转移（在数据中心内和跨数据中心）和管理功能扩展到复制数据库，并考虑了服务放置策略。通过使用Active Data Guard和Oracle GoldenGate实现全球数据服务，它实现了更高的可用性和更高的可管理性。</p>
                     <p><a href="intro-global-data-services.html#GUID-3A98F51E-687D-4CBD-80D9-B9AACF00A087__CHDEJDAJ">图1-4</a>显示了在全局数据服务配置中跨两个数据中心复制的数据库。读写服务在主（或主）数据库上运行。只读服务在两个备用（或副本）数据库之间进行负载平衡。
                     </p>
                     <p><a href="intro-global-data-services.html#GUID-3A98F51E-687D-4CBD-80D9-B9AACF00A087__CHDEJDAJ">图1-4</a>描述了数据中心1中待机故障。在<a href="intro-global-data-services.html#GUID-3A98F51E-687D-4CBD-80D9-B9AACF00A087__CHDJFDBB">图1-5中，</a>全局数据服务将只读服务故障转移到另一个可用数据库（在本例中为主数据库），并使用在数据中心2中的远程备用数据库上运行的只读服务对其进行负载平衡。
                     </p>
                     <div class="figure" id="GUID-3A98F51E-687D-4CBD-80D9-B9AACF00A087__CHDEJDAJ">
                        <p class="titleinfigure">图1-4只读服务失败</p><br><img src="img/gsmug_vm_015.png" alt="下面是图1-4的描述" title="下面是图1-4的描述" longdesc="img_text/gsmug_vm_015.html"><br><a href="img_text/gsmug_vm_015.html">“图1-4只读服务失败”的描述</a><br></div>
                     <!-- class="figure" -->
                     <div class="figure" id="GUID-3A98F51E-687D-4CBD-80D9-B9AACF00A087__CHDJFDBB">
                        <p class="titleinfigure">图1-5只读服务故障转移</p><br><img src="img/gsmug_vm_016.png" alt="下面是图1-5的描述" title="下面是图1-5的描述" longdesc="img_text/gsmug_vm_016.html"><br><a href="img_text/gsmug_vm_016.html">“图1-5只读服务故障转移”的描述</a><br></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-1BB1ACBB-CD68-4A83-81D0-5D3047A41387">全局数据服务用例</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-A2486F11-3064-4214-82DF-4854572C2B67" name="GUID-A2486F11-3064-4214-82DF-4854572C2B67"></a><h4 id="GSMUG-GUID-A2486F11-3064-4214-82DF-4854572C2B67" class="sect4"><span class="enumeration_section">1.8.3</span> Oracle GoldenGate Multi-Master中的区域亲和性</h4>
                  <div>
                     <p><a href="intro-global-data-services.html#GUID-A2486F11-3064-4214-82DF-4854572C2B67__CHDCBFFG">图1-6</a>描述了全局数据服务配置中的Oracle GoldenGate多主控副本。在此用例中，应用程序需要避免多主机读/写冲突，并且全局数据服务可以将所有工作负载路由到客户端区域中最近和最佳副本。
                     </p><pre class="oac_no_warn" dir="ltr">GDSCTL&gt;添加服务--service reporting_srvc -gdspool sales -preferred_all -locality LOCAL_ONLY -region_failover GDSCTL&gt; add service -service order_entry_srvc -gdspool sales -preferred_all -locality LOCAL_ONLY -region_failover</pre><p>此用例包含以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>该应用程序处理多主冲突解决方案。</p>
                        </li>
                        <li>
                           <p>在两个副本上运行读/写和只读全局服务。</p>
                        </li>
                        <li>
                           <p>客户端连接被路由到客户端区域中最近且最佳的副本数据库，该数据库满足所请求的订单输入和报告全局服务的连接负载平衡目标。</p>
                        </li>
                        <li>
                           <p>考虑负载指标，区域关联和负载平衡目标。</p>
                        </li>
                        <li>
                           <p>Global Data Services为Oracle GoldenGate多主配置提供只读和读/写服务的工作负载路由。</p>
                        </li>
                        <li>
                           <p>通过启用Global Data Services for Oracle GoldenGate多主机配置，将所有数据库工作负载路由到最近的数据中心。</p>
                        </li>
                     </ul>
                     <div class="figure" id="GUID-A2486F11-3064-4214-82DF-4854572C2B67__CHDCBFFG">
                        <p class="titleinfigure">图1-6 Oracle GoldenGate Multi-Master中的区域亲和性</p><br><img src="img/gsmug_vm_014.png" alt="下面描述图1-6" title="下面描述图1-6" longdesc="img_text/gsmug_vm_014.html"><br><a href="img_text/gsmug_vm_014.html">“图1-6 Oracle GoldenGate Multi-Master中的区域亲和性”的描述</a><br></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-1BB1ACBB-CD68-4A83-81D0-5D3047A41387">全局数据服务用例</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-2C309E5D-921C-4ABE-8009-87C31887EE27" name="GUID-2C309E5D-921C-4ABE-8009-87C31887EE27"></a><h4 id="GSMUG-GUID-2C309E5D-921C-4ABE-8009-87C31887EE27" class="sect4"><span class="enumeration_section">1.8.4</span> Oracle GoldenGate Multi-Master中的负载均衡</h4>
                  <div>
                     <p><a href="intro-global-data-services.html#GUID-2C309E5D-921C-4ABE-8009-87C31887EE27__CHDGFJBJ">图1-7</a>描述了全局数据服务配置中的Oracle GoldenGate多主控副本。在此用例中，应用程序需要处理多主冲突解决方案，而全局数据服务为所有工作请求提供连接时和运行时负载平衡（在数据中心内和跨数据中心）。
                     </p><pre class="oac_no_warn" dir="ltr">GDSCTL&gt;添加服务-service order_entry_srvc -gdspool sales -preferred_all -clbgoal LONG GDSCTL&gt; add service -service reporting_srvc -gdspool sales -preferred_all -clbgoal LONG</pre><p>此用例包含以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>应用程序处理多主冲突解决方案。</p>
                        </li>
                        <li>
                           <p>在两个副本上运行“读写”和“只读”全局服务。</p>
                        </li>
                        <li>
                           <p>客户端连接在两个主服务器（跨数据中心）上运行的READ WRITE全局服务之间进行负载平衡。只读服务的情况也是如此。</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>考虑负载指标，区域关联，网络延迟和负载平衡目标。</p>
                              </li>
                              <li>
                                 <p>通过在Oracle GoldenGate多主配置上启用GDS来平衡所有工作负载。</p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <div class="figure" id="GUID-2C309E5D-921C-4ABE-8009-87C31887EE27__CHDGFJBJ">
                        <p class="titleinfigure">图1-7 Oracle GoldenGate Multi-Master中的负载平衡</p><br><img src="img/gsmug_vm_013.png" alt="下面是图1-7的描述" title="下面是图1-7的描述" longdesc="img_text/gsmug_vm_013.html"><br><a href="img_text/gsmug_vm_013.html">“图1-7 Oracle GoldenGate多主机负载均衡”的说明</a><br></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-1BB1ACBB-CD68-4A83-81D0-5D3047A41387">全局数据服务用例</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-993D619D-9991-4B2E-854B-FBEB441C61E4" name="GUID-993D619D-9991-4B2E-854B-FBEB441C61E4"></a><h4 id="GSMUG-GUID-993D619D-9991-4B2E-854B-FBEB441C61E4" class="sect4"><span class="enumeration_section">1.8.5</span>平衡Oracle Active Data Guard和Oracle GoldenGate Reader Farms</h4>
                  <div>
                     <p><a href="intro-global-data-services.html#GUID-993D619D-9991-4B2E-854B-FBEB441C61E4__CHDGEFCC">图1-8</a>描述了为Oracle Active Data Guard或Oracle GoldenGate阅读器服务器场启用的全局数据服务，其中物理备用/副本位于本地和远程数据中心。在使用Global Data Services的此用例中，将读/写工作负载路由到主/主服务器，平衡读取器服务器场上的只读工作负载，您可以期望提高资源利用率并提高读取工作负载的可伸缩性。
                     </p>
                     <p>此用例包含以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>读/写全局服务在主/主数据库上运行。</p>
                        </li>
                        <li>
                           <p>只读全局服务在读取器服务器场上运行。</p>
                        </li>
                        <li>
                           <p>客户端连接在读取器服务器场上运行的只读全局服务（跨数据中心）之间进行负载平衡。</p>
                        </li>
                        <li>
                           <p>全局数据服务通过平衡Oracle Active Data Guard或Oracle GoldenGate读取器服务器场上的只读工作负载，在读取器服务器场上提供连接时和运行时负载平衡（在数据中心内和跨数据中心），以及更好的资源利用率和更高的可扩展性。</p>
                        </li>
                     </ul>
                     <div class="figure" id="GUID-993D619D-9991-4B2E-854B-FBEB441C61E4__CHDGEFCC">
                        <p class="titleinfigure">图1-8平衡Oracle Active Data Guard和Oracle GoldenGate Reader Farms</p><br><img src="img/gsmug_vm_012.png" alt="下面是图1-8的描述" title="下面是图1-8的描述" longdesc="img_text/gsmug_vm_012.html"><br><a href="img_text/gsmug_vm_012.html">“图1-8平衡Oracle Active Data Guard和Oracle GoldenGate Reader Farms”的说明</a><br></div>
                     <!-- class="figure" -->
                     <div class="example" id="GUID-993D619D-9991-4B2E-854B-FBEB441C61E4__GUID-4D4C8573-2359-4B95-902D-2AA7C22CF57E">
                        <p class="titleinexample">示例1-1 Oracle GoldenGate</p><pre class="oac_no_warn" dir="ltr">GDSCTL&gt;添加服务-service reporting_srvc -gdspool sales -preferred DB02，DB03，DB04 -clbgoal LONG -rlbgoal SERVICE_TIME</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="intro-global-data-services.html#GUID-1BB1ACBB-CD68-4A83-81D0-5D3047A41387">全局数据服务用例</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
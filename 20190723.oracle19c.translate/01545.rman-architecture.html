<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Recovery Manager Architecture</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Backup and Recovery User's Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Backup and Recovery User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-backup-and-recovery-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-09T05:20:45-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96241-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="part-starting-configuring-rman.html" title="Previous" type="text/html">
      <link rel="next" href="starting-interacting-with-rman-client.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery User's Guide">
    <meta name="dcterms.isVersionOf" content="BRADV">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="part-starting-configuring-rman.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="starting-interacting-with-rman-client.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Backup and Recovery User's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-starting-configuring-rman.html" property="item" typeof="WebPage"><span property="name"> Starting and Configuring RMAN and Flashback Database</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Recovery Manager Architecture</li>
            </ol>
            <a id="GUID-8ECC1FB0-7D25-4883-B9A6-2593FDB35940" name="GUID-8ECC1FB0-7D25-4883-B9A6-2593FDB35940"></a><a id="BRADV001"></a>
            
            <h2 id="BRADV-GUID-8ECC1FB0-7D25-4883-B9A6-2593FDB35940" class="sect2"><span class="enumeration_chapter">3 </span>Recovery Manager Architecture
            </h2>
         </header>
         <div class="ind">
            <div>
               <p><a id="d17011e69" class="indexterm-anchor"></a>This chapter describes the Recovery Manager (RMAN) interface and the basic components of the RMAN environment. This chapter contains the following topics:
               </p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="rman-architecture.html#GUID-3A2C1C02-880D-4278-9F98-043CF0E7E673" title="The Recovery Manager environment consists of the various applications and databases that play a role in a backup and recovery strategy.">About the RMAN Environment</a></p>
                  </li>
                  <li>
                     <p><a href="rman-architecture.html#GUID-740E8D5C-CCB4-489D-9253-B44458237B91" title="Use the RMAN command-line client to enter commands that you can use to manage all aspects of backup and recovery operations.">About RMAN Command-Line Client</a></p>
                  </li>
                  <li>
                     <p><a href="rman-architecture.html#GUID-282FD0B6-8593-4775-9965-DB47534D349C" title="An RMAN channel represents one stream of data to a device, and corresponds to one database server session. During a backup or restore operation, the channel reads data from the input device, processes it, and writes it to the output device.">About RMAN Channels</a></p>
                  </li>
                  <li>
                     <p><a href="rman-architecture.html#GUID-D5EBBDAF-5392-4D75-B919-A298F6C0881E" title="The RMAN repository is a collection of metadata about the target databases that RMAN uses for backup, recovery, and maintenance.">About the RMAN Repository</a></p>
                  </li>
                  <li>
                     <p><a href="rman-architecture.html#GUID-12A32971-242E-4C62-AE95-26D58D5C983D" title="The Oracle Media Management Layer (MML) API lets third-party vendors build media management software that works with RMAN to allow backups to sequential media devices such as tape drives.">About Media Management Using RMAN</a></p>
                  </li>
                  <li>
                     <p><a href="rman-architecture.html#GUID-06A2CC19-9D45-4360-98D4-79FB32EE6153" title="The fast recovery area is an optional disk location that can be used to store recovery-related files.">About the Fast Recovery Area</a></p>
                  </li>
                  <li>
                     <p><a href="rman-architecture.html#GUID-B18B15EA-1F59-4858-B6E9-9870A564CD62" title="Data Guard maintains standby databases as transactionally consistent copies of production database. A standby database can be either a physical standby database or a logical standby database.">About RMAN in a Data Guard Environment</a></p>
                  </li>
                  <li>
                     <p><a href="rman-architecture.html#GUID-370362C4-9F7C-4D23-A9F8-42F0376F1F5A" title="Recovery Appliance provides a centralized remote repository for backups of all target databases in the enterprise. Backups and backup metadata for all target databases is managed by a central recovery catalog (the Recovery Appliance catalog) on Recovery Appliance.">About RMAN in a Recovery Appliance Environment</a></p>
                  </li>
               </ul>
            </div><a id="BRADV144"></a><a id="BRADV559"></a><a id="BRADV101"></a><div class="props_rev_3"><a id="GUID-3A2C1C02-880D-4278-9F98-043CF0E7E673" name="GUID-3A2C1C02-880D-4278-9F98-043CF0E7E673"></a><h3 id="BRADV-GUID-3A2C1C02-880D-4278-9F98-043CF0E7E673" class="sect3"><span class="enumeration_section">3.1 </span>About the RMAN Environment
               </h3>
               <div>
                  <p>The Recovery Manager environment consists of the various applications and databases that play a role in a backup and recovery strategy.</p>
                  <p> <a href="rman-architecture.html#GUID-3A2C1C02-880D-4278-9F98-043CF0E7E673__CHDBEBIE" title="Lists possible components of the RMAN environment">Table 3-1</a> lists some components in a typical RMAN environment.
                  </p>
                  <div class="tblformal" id="GUID-3A2C1C02-880D-4278-9F98-043CF0E7E673__CHDBEBIE">
                     <p class="titleintable">Table 3-1 Components of the RMAN Environment</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Components of the RMAN Environment" summary="Lists possible components of the RMAN environment" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="33%" id="d17011e250">Component</th>
                              <th align="left" valign="bottom" width="67%" id="d17011e253">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d17011e258" headers="d17011e250 ">
                                 <p><a href="glossary.html#GUID-BAF6F6F1-D4F1-4F46-B1B6-9F662B7AB35D"><span class="xrefglossterm">RMAN client</span></a></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d17011e258 d17011e253 ">
                                 <p>The client application that manages backup and recovery operations for a target database. The RMAN client can use Oracle Net to connect to a target database, so it can be located on any host that is connected to the target host through Oracle Net.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d17011e267" headers="d17011e250 ">
                                 <p><a href="glossary.html#GUID-272C4366-303F-4629-9679-1379AAC3FBC1"><span class="xrefglossterm">target database</span></a></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d17011e267 d17011e253 ">
                                 <p>A database containing the control files, data files, and optional archived redo logs that RMAN backs up or restores. RMAN uses the target database control file to gather metadata about the target database and to store information about its own operations. The work of backup and recovery is performed by server sessions running on the target database.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d17011e276" headers="d17011e250 ">
                                 <p><a href="glossary.html#GUID-C54D9858-2461-412B-95FF-80FBACD58AB0"><span class="xrefglossterm">recovery catalog database</span></a></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d17011e276 d17011e253 ">
                                 <p>A database containing a <a href="glossary.html#GUID-CBFA8015-2DFF-42B1-A818-D6C5B92C608F"><span class="xrefglossterm">recovery catalog</span></a>, which contains metadata that RMAN uses to perform backup and recovery. You can create one recovery catalog that contains the RMAN metadata for multiple target databases. Unless you are using RMAN with a <a href="glossary.html#GUID-009B3F56-8C1E-4CF6-AF0F-A9D2C2E4B9C2"><span class="xrefglossterm">physical standby database</span></a>, a recovery catalog is optional when using RMAN because RMAN stores its metadata in the control file of each target database.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d17011e293" headers="d17011e250 ">
                                 <p><a href="glossary.html#GUID-3EF7A531-FA6D-483B-AE34-F87D31DCE572"><span class="xrefglossterm">recovery catalog schema</span></a></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d17011e293 d17011e253 ">
                                 <p>The user within the recovery catalog database that owns the metadata tables maintained by RMAN. RMAN periodically propagates metadata from the target database control file into the recovery catalog.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d17011e302" headers="d17011e250 ">
                                 <p><a href="glossary.html#GUID-009B3F56-8C1E-4CF6-AF0F-A9D2C2E4B9C2"><span class="xrefglossterm">physical standby database</span></a></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d17011e302 d17011e253 ">
                                 <p>A copy of the primary database that is updated with redo generated by the primary database. You can fail over to the standby database if the primary database becomes inaccessible.</p>
                                 <p>RMAN can create, back up, or recover a standby database. Backups that you make at a physical standby database are usable at the primary database or another physical standby database for the same production database. The recovery catalog is required when you use RMAN to back up a physical standby database.</p>
                                 <p><span class="bold">Note: </span>A logical standby database is treated as a separate database by RMAN because it has a different DBID from its primary database.
                                 </p>
                                 <p><span class="bold">See Also: </span><a href="../sbydb/using-RMAN-in-oracle-data-guard-configurations.html#SBYDB04700" target="_blank"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> to learn how to use RMAN in a Data Guard environment
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d17011e325" headers="d17011e250 ">
                                 <p><a href="glossary.html#GUID-6E3CDD76-A573-4E5C-B12D-59C232C96C19"><span class="xrefglossterm">fast recovery area</span></a></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d17011e325 d17011e253 ">
                                 <p>A disk location that you can use to store recovery-related files such as control file and online redo log copies, archived redo logs, <a href="glossary.html#GUID-725ED3D7-5077-4F16-85AA-CDAD5BFCE554"><span class="xrefglossterm">flashback logs</span></a>, and RMAN backups. Oracle Database and RMAN manage the files in the fast recovery area automatically.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d17011e338" headers="d17011e250 ">
                                 <p><a href="glossary.html#GUID-26FF62D0-5938-481D-B7B9-929BC971813E"><span class="xrefglossterm">media management software</span></a></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d17011e338 d17011e253 ">
                                 <p>A vendor-specific application that enables RMAN to back up to a storage system such as tape </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d17011e347" headers="d17011e250 ">
                                 <p><a href="glossary.html#GUID-BF263385-102C-44FF-AE86-40FBA05CE30C"><span class="xrefglossterm">media management catalog</span></a></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d17011e347 d17011e253 ">
                                 <p>A vendor-specific repository of metadata about a media management application</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d17011e356" headers="d17011e250 ">
                                 <p>Oracle Enterprise Manager</p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d17011e356 d17011e253 ">
                                 <p>A browser-based interface to the database, including backup and recovery through RMAN</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>The only required components in an RMAN environment are a target database and RMAN client, but most real-world configurations are more complicated. For example, you use an RMAN client connecting to multiple media managers and multiple target databases, all accessed through Enterprise Manager. </p>
                  <p><a href="rman-architecture.html#GUID-3A2C1C02-880D-4278-9F98-043CF0E7E673__CHDHICBA">Figure 3-1</a> illustrates components in a possible RMAN environment. The figure shows that the primary database, standby database, and recovery catalog databases all reside on different computers. The primary and standby database hosts use a locally attached tape drive. The RMAN client and Enterprise Manager console run on a separate computer.
                  </p>
                  <div class="figure" id="GUID-3A2C1C02-880D-4278-9F98-043CF0E7E673__CHDHICBA">
                     <p class="titleinfigure">Figure 3-1 Sample RMAN Environment</p><img src="img/bradv038.gif" alt="Description of Figure 3-1 follows" title="Description of Figure 3-1 follows" longdesc="img_text/bradv038.html"><br><a href="img_text/bradv038.html">Description of "Figure 3-1 Sample RMAN Environment"</a></div>
                  <!-- class="figure" -->
                  <div class="infoboxnotealso" id="GUID-3A2C1C02-880D-4278-9F98-043CF0E7E673__GUID-D2AF0E95-1AFB-4620-931F-35AEEBD21865">
                     <p class="notep1">See Also:</p>
                     <p><a href="../netag/introducing-oracle-net-services.html#NETAG001" target="_blank"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a> to learn about Oracle Net
                     </p>
                  </div>
               </div>
            </div><a id="BRADV1002"></a><div class="props_rev_3"><a id="GUID-740E8D5C-CCB4-489D-9253-B44458237B91" name="GUID-740E8D5C-CCB4-489D-9253-B44458237B91"></a><h3 id="BRADV-GUID-740E8D5C-CCB4-489D-9253-B44458237B91" class="sect3"><span class="enumeration_section">3.2 </span>About RMAN Command-Line Client
               </h3>
               <div>
                  <p>Use the RMAN command-line client to enter commands that you can use to manage all aspects of backup and recovery operations.</p>
                  <p>RMAN uses a command language interpreter that can execute commands in interactive or batch mode.</p>
               </div>
            </div><a id="BRADV560"></a><a id="BRADV105"></a><div class="props_rev_3"><a id="GUID-282FD0B6-8593-4775-9965-DB47534D349C" name="GUID-282FD0B6-8593-4775-9965-DB47534D349C"></a><h3 id="BRADV-GUID-282FD0B6-8593-4775-9965-DB47534D349C" class="sect3"><span class="enumeration_section">3.3 </span>About RMAN Channels
               </h3>
               <div>
                  <p>An RMAN channel represents one stream of data to a device, and corresponds to one database server session. During a backup or restore operation, the channel reads data from the input device, processes it, and writes it to the output device.</p>
                  <p>The RMAN client directs database server sessions to perform all backup and recovery tasks. What constitutes a session depends on the operating system. For example, on Linux, a server session corresponds to a server process, whereas on Windows it corresponds to a thread within the database service. The RMAN client itself does not perform backup, restore, or recovery operations. </p>
                  <p>Most RMAN commands are executed by channels, which must be either configured to persist across RMAN sessions, or manually allocated in each <a href="glossary.html#GUID-01D29658-41E1-4D45-9C7F-A761D56885B9"><span class="xrefglossterm">RMAN session</span></a>. As illustrated in <a href="rman-architecture.html#GUID-282FD0B6-8593-4775-9965-DB47534D349C__I1006208">Figure 3-2</a>, a channel establishes a connection from the RMAN client to a target or auxiliary database instance by starting a server session on the instance.
                  </p>
                  <div class="figure" id="GUID-282FD0B6-8593-4775-9965-DB47534D349C__I1006208">
                     <p class="titleinfigure">Figure 3-2 Channel Allocation</p><img src="img/bradv030.gif" alt="Description of Figure 3-2 follows" title="Description of Figure 3-2 follows" longdesc="img_text/bradv030.html"><br><a href="img_text/bradv030.html">Description of "Figure 3-2 Channel Allocation"</a></div>
                  <!-- class="figure" -->
                  <div class="infoboxnotealso" id="GUID-282FD0B6-8593-4775-9965-DB47534D349C__GUID-0BFDC164-6D23-4053-A75B-FDE7BF090959">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="tuning-rman-performance.html#GUID-55347A64-8DA3-415E-99C7-9F7FB30001A3" title="Multiple factors can affect the performance when an RMAN channel is reading data from disk.During a backup, an RMAN channel reads the blocks from the input files into I/O disk buffers. The database files on the disk subsystem can be managed by either Automatic Storage Management (ASM) or an alternative volume manager or file system. The considerations for backup tuning change depending on whether you manage database files with ASM.When a channel reads from or writes to disk, the I/O is either synchronous I/O or asynchronous I/O. On operating systems that do not support native asynchronous I/O, the database can simulate it with special I/O slave processes. These processes are dedicated to performing I/O on behalf of another process. You can use the RATE parameter to set an upper limit for bytes read so that RMAN does not consume excessive disk bandwidth and degrade online performance. Essentially, RATE serves as a backup throttle. In the copy phase, a channel copies blocks from the input buffers to the output buffers and performs additional processing.When backing up to SBT, RMAN gives the media management software a stream of bytes and associates a unique name with this stream. All details of how and where that stream is stored are handled entirely by the media manager. Thus, a backup to tape involves the interaction of both RMAN and the media manager.The RMAN-specific factors affecting the SBT write phase are analogous to the factors affecting disk reads. In both cases, the buffer allocation, slave processes, and synchronous or asynchronous I/O affect performance. Multiple factors affect the speed of the backup to tape.If the tape device is remote, then the media manager must transfer data over the network. The tape native transfer rate is the speed of writing to a tape without compression. This speed represents the upper limit of the backup rate. The level of tape compression is very important for backup performance. If the tape has good compression, then the sustained backup rate is faster. Tape streaming during write operations has a major effect on tape backup performance. The physical tape block size can affect backup performance. The principal factor affecting the write phase for disk is the buffer size.">Basic Concepts of RMAN Performance Tuning</a> for a low-level description of how channels work"</span></p>
                  </div>
               </div><a id="BRADV89373"></a><div class="props_rev_3"><a id="GUID-5A4D3F72-3545-4ABC-B663-F4BE064F070A" name="GUID-5A4D3F72-3545-4ABC-B663-F4BE064F070A"></a><h4 id="BRADV-GUID-5A4D3F72-3545-4ABC-B663-F4BE064F070A" class="sect4"><span class="enumeration_section">3.3.1 </span>About RMAN Channels and Devices
                  </h4>
                  <div>
                     <p>The RMAN-supported device types are DISK and SBT (system backup to tape). </p>
                     <p>An <a href="glossary.html#GUID-2E48CE71-9547-4196-B715-5CE59033262E"><span class="xrefglossterm">SBT</span></a> device is controlled by a third-party <a href="glossary.html#GUID-26FF62D0-5938-481D-B7B9-929BC971813E"><span class="xrefglossterm">media management software</span></a>. Typically, SBT devices are tape libraries and tape drives.
                     </p>
                     <p>If you use a DISK channel for a backup, then the channel creates the backup on disk in the file name space of the target database instance creating the backup. You can make a backup on any device that can store a data file. RMAN does not call a media manager when making DISK backups.</p>
                     <p>To create backups on non-disk media, you must use media management software such as Oracle Secure Backup and allocate channels supported by this software. RMAN contacts the media manager whenever the channel type allocated is not DISK. How and when the SBT channels cause the media manager to allocate resources is vendor-specific. Some media managers allocate resources when you issue the command; others do not allocate resources until you open a file for reading or writing.</p>
                     <div class="infoboxnotealso" id="GUID-5A4D3F72-3545-4ABC-B663-F4BE064F070A__GUID-2BC6821A-95D2-415A-BAD7-F26E729D1249">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="configuring-rman-client-basic.html#GUID-3845B630-DD47-4147-BA6E-8D677CAF1CC2" title="Backups for which no destination device type is specified are directed to the configured default device. RMAN is preconfigured to use disk as the default device type. No additional configuration is necessary.">Configuring the Default Device for Backups: Disk or SBT</a>"</span></p>
                     </div>
                  </div>
               </div><a id="BRADV89374"></a><div class="props_rev_3"><a id="GUID-973B7CEF-25E2-4829-B24E-020C71E9F35E" name="GUID-973B7CEF-25E2-4829-B24E-020C71E9F35E"></a><h4 id="BRADV-GUID-973B7CEF-25E2-4829-B24E-020C71E9F35E" class="sect4"><span class="enumeration_section">3.3.2 </span>About RMAN Automatic and Manual Channels
                  </h4>
                  <div>
                     <p>RMAN can use automatic channels or manual channels for backup and recover operations.</p>
                     <p>You can use the <a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><code class="codeph">CONFIGURE CHANNEL</code></a> command to configure channels for use with disk or tape across RMAN sessions. This technique is known as <a href="glossary.html#GUID-8473579D-F533-48AA-B7E7-DB4AB8E812D6"><span class="xrefglossterm">automatic channel allocation</span></a>. RMAN comes preconfigured with one <code class="codeph">DISK</code> channel that you can use for backups to disk.
                     </p>
                     <p>When you run a command that can use automatic channels, RMAN automatically allocates the channels with the options that you specified in the <code class="codeph">CONFIGURE</code> command. For the <a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><code class="codeph">BACKUP</code></a> command, RMAN allocates only the type of channel required to back up to the specified media. For the <a href="../rcmrf/RESTORE.html#RCMRF149" target="_blank"><code class="codeph">RESTORE</code></a> command and <a id="d17011e835" class="indexterm-anchor"></a><a href="glossary.html#GUID-F89B6EF7-3067-45B0-A45C-DE5247E0C326"><span class="xrefglossterm">RMAN maintenance commands</span></a>, RMAN allocates all necessary channels for the device types required to execute the command. RMAN determines the names for automatic channels.
                     </p>
                     <p>You can also manually allocate channels. Each manually allocated channel uses a separate connection to the database. When you manually allocate a channel, you give it a user-defined name such as <code class="codeph">dev1</code> or <code class="codeph">ch2</code>.
                     </p>
                     <p>The number of channels available for use with a device when you run a command determines whether RMAN reads from or write to this device in parallel while performing the command. When the work is done in parallel, the backup of the files is done by multiple channels. Each channel may back up multiple files, but unless a <a href="glossary.html#GUID-6D6DDA5E-F1EF-4273-8649-137F1FC89EB6"><span class="xrefglossterm">multisection backup</span></a> is performed, no file is backed up by more than one channel.
                     </p>
                     <div class="infoboxnotealso" id="GUID-973B7CEF-25E2-4829-B24E-020C71E9F35E__GUID-792C3C0E-012F-4A0C-BB19-26B9565E4276">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../rcmrf/ALLOCATE-CHANNEL.html#RCMRF102" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code class="codeph">ALLOCATE</code> <code class="codeph">CHANNEL</code> syntax
                              </p>
                           </li>
                           <li>
                              <p><a href="../rcmrf/ALLOCATE-CHANNEL-FOR-MAINTENANCE.html#RCMRF103" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> on <code class="codeph">ALLOCATE</code> <code class="codeph">CHANNEL</code> <code class="codeph">FOR</code> <code class="codeph">MAINTENANCE</code></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="configuring-rman-client-basic.html#GUID-FAFF9171-43CF-493A-BA5A-AD9B59B2CFEB" title="By default, RMAN allocates one disk channel for all operations. You can specify different options for this channel, for example, a new default location for backups.">Configuring Channels for Disk</a>"</span> and <span class="q">"<a href="configuring-rman-client-basic.html#GUID-DB37EEF2-426B-4060-BA36-FEE38C11ADB8" title="Configuring SBT channels creates a persistent setting that is the default used for backup and recovery operations with a media manager.">Configuring SBT Channels for Use with a Media Manager</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="BRADV103"></a><div class="props_rev_3"><a id="GUID-D5EBBDAF-5392-4D75-B919-A298F6C0881E" name="GUID-D5EBBDAF-5392-4D75-B919-A298F6C0881E"></a><h3 id="BRADV-GUID-D5EBBDAF-5392-4D75-B919-A298F6C0881E" class="sect3"><span class="enumeration_section">3.4 </span>About the RMAN Repository
               </h3>
               <div>
                  <p>The RMAN repository is a collection of metadata about the target databases that RMAN uses for backup, recovery, and maintenance.</p>
                  <p>RMAN always stores its metadata in the control file. The version of this metadata in the control file is the authoritative record of RMAN backups of your database. This is one reason why protecting your control file is an important part of your backup strategy. RMAN can conduct all necessary backup and recovery operations using just the control file to store the <a href="glossary.html#GUID-F5643EDD-CE1B-4A9F-9E6E-ADDFD6452341"><span class="xrefglossterm">RMAN repository</span></a> information, and maintains all records necessary to meet your configured retention policy.
                  </p>
                  <p>You can also create a <a href="glossary.html#GUID-CBFA8015-2DFF-42B1-A818-D6C5B92C608F"><span class="xrefglossterm">recovery catalog</span></a>, which is a repository of RMAN metadata stored in an Oracle Database schema. The control file has limited space for records of backup activities, whereas a recovery catalog can store a much longer history. You can simplify backup and recovery administration by creating a single recovery catalog that contains the RMAN metadata for all of your databases. 
                  </p>
                  <p>The owner of a recovery catalog can grant or revoke restricted access to the catalog to other database users. Each restricted user has full read/write access to his own metadata, which is called a <a href="glossary.html#GUID-3ACE1C6A-AEA0-4F3A-973B-2308E0A5AD4B"><span class="xrefglossterm">virtual private catalog</span></a>. When one or more virtual private catalogs exist in a database, the database contains just one set of catalog tables. These tables are owned by the base recovery catalog owner. The owner of the base recovery catalog controls which databases each virtual private catalog user can access.
                  </p>
                  <p>Some RMAN features only function when you use a recovery catalog. For example, you can create a <a href="glossary.html#GUID-6A46F2BF-D1BF-4993-89BC-52A0AEC9370C"><span class="xrefglossterm">stored script</span></a> in the recovery catalog and use this script to execute RMAN jobs. Other RMAN commands are specifically related to managing the recovery catalog and so are not available (and not needed) if RMAN is not connected to a recovery catalog.
                  </p>
                  <p>The recovery catalog is maintained solely by RMAN. A target database instance never accesses the catalog directly. RMAN propagates information about the database structure, archived redo logs, backup sets, and data file copies into the recovery catalog from the target database control file after any operation that updates the repository, and also before certain operations.</p>
                  <div class="infoboxnotealso" id="GUID-D5EBBDAF-5392-4D75-B919-A298F6C0881E__GUID-BA7B77F6-23BC-4082-8513-DBDE3D0688C9">
                     <p class="notep1">See Also:</p>
                     <p><a href="maintaining-rman-backups.html#GUID-F5C3D045-279B-4AB3-8A91-3231A716402C" title="The recommended maintenance strategy is to configure a fast recovery area, a backup retention policy, and an archived redo log deletion policy. In this case, the database automatically maintains and deletes backups and archived redo logs as needed. However, manual maintenance of database backups and archived redo logs is sometimes necessary.RMAN provides multiple commands to maintain RMAN backups and repository records.RMAN always stores its metadata in the control file of each target database on which it performs operations. If you register a target database in the recovery catalog, then RMAN stores the metadata for this target database in the recovery catalog. The database in a Data Guard environment that creates a backup or copy is associated with the file. For example, if RMAN is connected to target database standby1 and backs it up, then this backup is associated with standby1.For a crosscheck, RMAN can only update the status of a file from AVAILABLE to EXPIRED when connected to the database associated with the file. RMAN can delete files when connected to any database. If RMAN is not connected as TARGET to the database associated with a file, and if RMAN cannot delete a file successfully, then RMAN prompts you to connect as TARGET to the database associated with the file. You must then use DELETE ... FORCE to delete the file metadata.If a maintenance command changes RMAN metadata only, then you can connect RMAN as TARGET to any database in the Data Guard environment. A backup remains associated with a database unless you explicitly use the CHANGE ... RESET DB_UNIQUE_NAME to associate the backup with a different database.RMAN is designed to work without a recovery catalog. If you choose not to use a recovery catalog, however, then the control file of each target database is the exclusive repository for RMAN metadata.The control file contains two types of records: circular reuse records and noncircular reuse records.When a control file record containing information about a file created in the fast recovery area is about to be reused, the database attempts to delete the file from the fast recovery area when the file is eligible for deletion. Otherwise, the database expands the size of the control file section containing the record for this file.The best way to prevent the loss of RMAN metadata because of overwritten control file records is to use a recovery catalog.If you are not using a recovery catalog to store RMAN metadata, then it is doubly important that you protect each target database control file.Although the fast recovery area is largely self-managing, some situations may require database administration intervention.RMAN uses certain rules to determine when files can be deleted from the fast recovery area.You can use the V$RECOVERY_FILE_DEST and V$RECOVERY_AREA_USAGE views to determine whether you have allocated enough space for your fast recovery area.You cannot manage the flashback logs in the fast recovery area directly other than by setting the flashback retention target or using guaranteed restore points.If the RMAN retention policy requires keeping a set of backups larger than the fast recovery area disk quota, or if the retention policy is set to NONE, then the fast recovery area can fill completely with no reclaimable space.Use the ALTER SYSTEM command to change the location of the fast recovery area.The ALTER SYSTEM command can be used to disable the fast recovery area.As a rule, the fast recovery area is self-maintaining. When an instance crashes during the creation of a file in the fast recovery area, however, the database may leave the file in the fast recovery area.Several situations can cause a discrepancy between the repository and the files that it records, including tape or disk failures and user-managed copies or deletions of RMAN-related files.To ensure that data about backups in the recovery catalog or control file is synchronized with corresponding data on disk or in the media management catalog, perform a crosscheck. The CROSSCHECK command operates only on files that are currently recorded in the RMAN repository.Crosschecks update outdated RMAN repository information about backups whose repository records do not match their physical status. For example, if a user removes archived logs from disk with an operating system command, the repository still indicates that the logs are on disk, when in fact they are not.After connecting to the target database and recovery catalog (if you use one), run CROSSCHECK commands as needed to verify the status and availability of backups known to RMAN.You can use the LIST command to report your backups and then use the CROSSCHECK command to check that specific backups described in the LIST output still exist. Use the CROSSCHECK command to verify the status and availability of preplugin backups and preplugin archived redo log files known to RMAN.RMAN provides multiple methods of changing the repository status of backups and copies.Run the CHANGE...UNAVAILABLE command when a backup cannot be found or has migrated offsite.You can designate backups as exempt from the retention policy. This technique is useful for archiving backups to comply with business requirements.Use the CHANGE command with the GUID option to change the status of backups that correspond to pluggable databases (PDBs) that have been dropped from a multitenant container database (CDB).Use the CHANGE command to modify the repository status of preplugin backups and preplugin archived redo log files.You can use the CATALOG command to make RMAN aware of the existence of archived logs not recorded in the repository or copies of database files that are created through means other than RMAN. The target database control file keeps records of all archived redo logs generated by the target database and all RMAN backups. The purpose of the CATALOG command is to add metadata to the repository when it does not have a record of files for RMAN to manage.Use the CATALOG command to propagate information about user-managed copies to the RMAN repository. After the files are cataloged, you can run the LIST command or query V$BACKUP_FILES view to confirm the information is contained in the RMAN repository.You can catalog backup pieces on disk. This technique is useful if you use an operating system utility to copy backup pieces from one location to another on the same host, or from one host to another. If you use Automatic Storage Management (ASM), an Oracle Managed Files framework, or the fast recovery area, then you may want to recatalog files that are known to the disk management system but are no longer listed in the RMAN repository. This situation can occur when the intended mechanism for tracking file names fails due to media failure, software bug, or user error.Use the CATALOG command to add preplugin archived redo log files to the RMAN repository.You can remove records for files from the RMAN repository.You can use the CHANGE ... UNCATALOG command to update the RMAN repository for the absent files.You can use the RMAN DELETE command to delete archived redo logs and RMAN backups. Every RMAN backup produces a corresponding record in the RMAN repository. This record is stored in the control file. If a recovery catalog is used, then the record can also be found in the recovery catalog after the recovery catalog is resynchronized from the control file. You can delete backups and recovery catalog records for backups.The recommended maintenance strategy is to configure a fast recovery area, a backup retention policy, and an archived redo log deletion policy.Use the RMAN DELETE command to delete backups and image copies.You can use both the DELETE and BACKUP ... DELETE commands to delete specific backups and copies.You can use BACKUP ... DELETE to back up archived redo logs, data file copies, or backup sets and then delete the input files after successfully backing them up. If you run CROSSCHECK, and if RMAN cannot locate the files, then it updates their records in the RMAN repository to EXPIRED status. You can then use the DELETE EXPIRED command to remove records of expired backups and copies from the RMAN repository.The RMAN DELETE command supports an OBSOLETE option, which deletes backups that are no longer needed to satisfy specified recoverability requirements. Use the DELETE command with the GUID option to delete backups of pluggable databases (PDBs) that have been dropped from a multitenant container database (CDB).Use the DELETE command to delete preplugin backups and prelplugin archived redo log files.To remove a database from the operating system, you can use the DROP DATABASE command in RMAN. RMAN removes the server parameter file, all data files, online redo logs, and control files belonging to the target database."> Maintaining RMAN Backups and Repository&nbsp;Records</a> and <a href="managing-recovery-catalog.html#GUID-E836E243-6620-495B-ACFB-AC0001EF4E89" title="This section explains the basic concepts related to managing a recovery catalog.A recovery catalog is a database schema used by RMAN to store metadata about one or more Oracle databases. Typically, you store the catalog in a dedicated database.The recovery catalog contains metadata about RMAN operations for each registered target database. When RMAN is connected to a recovery catalog, RMAN obtains its metadata exclusively from the catalog.The process of enrolling of a database in a recovery catalog for RMAN use is called registration.The owner of a centralized recovery catalog, which is also called the base recovery catalog, can grant or revoke restricted access to the catalog to other database users. For RMAN operations such as backup, restore, and crosscheck, RMAN always first updates the control file and then propagates the metadata to the recovery catalog. This flow of metadata from the mounted control file to the recovery catalog, which is known as recovery catalog resynchronization, ensures that the metadata that RMAN obtains from the control file is current.You can use a stored script as an alternative to a command file for managing frequently used sequences of RMAN commands. The script is stored in the recovery catalog rather than on the file system.You must use a recovery catalog to manage RMAN metadata for all physical databases, both primary and standby databases, in the Data Guard environment. RMAN uses the recovery catalog as the single source of truth for the Data Guard environment.Managing a recovery catalog consists of creating the catalog and then registering your target databases with the catalog.Creating a recovery catalog consists of multiple phases that includes configuring the recovery catalog database, creating the recovery catalog schema owner, and then creating the catalog. When you use a recovery catalog, RMAN requires that you maintain a recovery catalog schema. The recovery catalog is stored in the default tablespace of the schema. Privileged users such as SYS cannot be the owner of the recovery catalog.You must allocate space to be used by the catalog schema. The size of the recovery catalog schema depends upon the number of databases monitored by the catalog. If you are creating your recovery catalog in an existing database, then add enough room to hold the default tablespace for the recovery catalog schema. After choosing the recovery catalog database and creating the necessary space, you are ready to create the owner of the recovery catalog and grant this user necessary privileges. After creating the catalog owner, create the catalog tables with the RMAN CREATE CATALOG command. The command creates the catalog in the default tablespace of the catalog owner.Registering a target database in the recovery catalog maintains the database’s records in the recovery catalog.The process of enrolling of a target database in a recovery catalog is called registration.In a Data Guard environment, the primary and standby databases share the same DBID and database name. To be eligible for registration in the recovery catalog, each database in the Data Guard environment must have different DB_UNIQUE_NAME values.The first step in using a recovery catalog with a target database is registering the target database in the recovery catalog. If you use the catalog in a Data Guard environment, then you can only register the primary database in this way.If you have data file copies, backup pieces, or archived logs on disk, then you can catalog them in the recovery catalog with the CATALOG command. When using a recovery catalog, cataloging older backups that have aged out of the control file lets RMAN use the older backups during restore operations. RMAN provides multiple commands to create and manage virtual private catalogs.RMAN uses the Virtual Private Database (VPD) functionality to implement virtual private catalogs. Creating a virtual private catalog is a multi-step process in which you first create the database user who will own the virtual private catalog and then create the virtual private catalog.To store backup metadata for a target database in a virtual private catalog, you must register the database with the virtual private catalog.After you create a virtual private catalog, you can revoke catalog access privileges as necessary.This section describes how to use the UPGRADE CATALOG command to upgrade a virtual private catalog.Include the recovery catalog database in your backup and recovery strategy. If you do not back up the recovery catalog and a disk failure occurs that destroys the recovery catalog database, then you may lose the metadata in the catalog. Without the recovery catalog contents, recovery of your other databases is likely to be more difficult.A single recovery catalog can store metadata for multiple target databases. Consequently, loss of the recovery catalog can be disastrous. You must back up the recovery catalog frequently.The recovery catalog database is a database like any other, and is also a key part of your backup and recovery strategy. Protect the recovery catalog like any other part of your database, by backing it up. The backup strategy for your recovery catalog database is part of an overall backup and recovery strategy.When backing up the recovery catalog database, you can use RMAN to make the backups. A recovery catalog is only effective when separated from the data that it is designed to protect. Thus, you must never store a recovery catalog containing the RMAN repository for a database in the same database as the target database. Also, do not store the catalog database on the same disks as the target database.Logical backups of the RMAN recovery catalog created with the Data Pump Export utility can be a useful supplement for physical backups. Restoring and recovering the recovery catalog database is much like restoring and recovering any other database with RMAN. You can create and store scripts in the recovery catalog. You can use a stored script as an alternative to a command file for managing frequently used sequences of RMAN commands. The script is stored in the recovery catalog rather than on the file system.You can use the CREATE SCRIPT command to create a stored script. To update stored scripts, use the REPLACE SCRIPT command. Use the EXECUTE SCRIPT command to run a stored script. You can specify substitution variables in the CREATE SCRIPT command.The PRINT SCRIPT command displays a stored script or writes it out to a file. Use the LIST ... SCRIPT NAMES command to display the names of scripts defined in the recovery catalog. Use the DELETE GLOBAL SCRIPT command to delete a stored script from the recovery catalog.To run the RMAN client and start a stored script in the recovery catalog on startup, use the SCRIPT argument when starting the RMAN client.Maintaining the recovery catalog consists of tasks such as resynchronizing, updating, and upgrading the recovery catalog.After you have created a recovery catalog and registered your target databases, you must maintain this catalog.When RMAN performs a resynchronization, it compares the recovery catalog to either the current or backup control file of the target database and updates the catalog with metadata that is missing or changed. Resynchronization of the recovery catalog ensures that the metadata that RMAN obtains from the control file stays current. Resynchronizations can be full or partial. RMAN only automatically resynchronizes the recovery catalog with a database when connected to this database as TARGET. Thus, RMAN does not automatically resynchronize every database in a Data Guard environment when connected as TARGET to one database in the environment.RMAN automatically resynchronizes the recovery catalog when RMAN is connected to a target database and recovery catalog and you have executed RMAN commands. If the recovery catalog is unavailable when you issue RMAN commands that cause a partial resynchronization, then open the catalog database later and resynchronize it manually with the RESYNC CATALOG command. You can create or change an RMAN configuration for a standby database even when not connected to this database as TARGET. Your goal is to ensure that the metadata in the recovery catalog is current. Because the recovery catalog obtains its metadata from the target control file, the currency of the data in the catalog depends on the currency of the data in the control file. You must make sure that the backup metadata in the control file is recorded in the catalog before it is overwritten with new records.Use RESYNC CATALOG to force a full resynchronization of the recovery catalog with a target database control file. You may decide to change the DB_UNIQUE_NAME of a database in a Data Guard environment. In this case, you can run the CHANGE DB_UNIQUE_NAME command to associate the metadata stored in recovery catalog for the old DB_UNIQUE_NAME to the new DB_UNIQUE_NAME.You can use the UNREGISTER DATABASE command to unregister a database from the recovery catalog. Use the UNREGISTER DATABASE command to unregister a target database.The UNREGISTER command supports a DB_UNIQUE_NAME clause for use in a Data Guard environment. You can use this clause to remove metadata for a specific database.In a Zero Data Loss Recovery Appliance (Recovery Appliance) environment, the UNREGISTER DATABASE command cannot be used to unregister a protected database from the Recovery Appliance catalog. Instead, use the DBMS_RA.DELETE_DB procedure.You create an incarnation of the database when you open the database with the RESETLOGS option. You can access a record of the new incarnation in the V$DATABASE_INCARNATION view.This section explains what a recovery catalog upgrade is and when you must do it.If you are upgrading to Oracle Database 12c Release 1 (12.1.0.2) or later, then the recovery catalog database must use the Enterprise Edition of Oracle Database.Assume that you upgrade the recovery catalog schema to Oracle Database 11g or later in a Data Guard environment. When RMAN connects to a standby database, it automatically registers the new database information and resynchronizes to obtain the file names from the control file.The schema version of the recovery catalog is stored in the recovery catalog itself. The information is important in case you maintain multiple databases of different versions in your production system, and you must determine whether the catalog schema version is usable with a specific target database version.This scenario assumes that you are upgrading a recovery catalog schema to the current version. You can use the IMPORT CATALOG command in RMAN to merge one recovery catalog schema into another. When using IMPORT CATALOG, the source catalog schema is the catalog schema to import into a different schema. The destination catalog schema is the catalog schema into which you intend to import the source catalog schema.In a Recovery Appliance environment, a single, centrally-managed Recovery Appliance catalog residing on the Recovery Appliance is shared by all the protected databases. This catalog must be used by all protected databases that send backups to Recovery Appliance.A target database, recovery catalog database, and recovery catalog schema can be at different database versions. The recommended practice is to import all existing recovery catalogs into a single recovery catalog at the latest version of the recovery catalog schema. When importing one recovery catalog into another, no connection to a target database is necessary. RMAN only needs connectivity to the source and destination catalogs.The procedure for moving a recovery catalog from one database to another is a variation of the procedure for importing a catalog. The DROP CATALOG command removes those objects that were created by the CREATE CATALOG command. If the user who owns the recovery catalog also owns objects that were not created by CREATE CATALOG, then the DROP CATALOG command does not remove these objects.">	 Managing a Recovery Catalog</a></p>
                  </div>
               </div>
            </div><a id="BRADV104"></a><div class="props_rev_2"><a id="GUID-12A32971-242E-4C62-AE95-26D58D5C983D" name="GUID-12A32971-242E-4C62-AE95-26D58D5C983D"></a><h3 id="BRADV-GUID-12A32971-242E-4C62-AE95-26D58D5C983D" class="sect3"><span class="enumeration_section">3.5 </span>About Media Management Using RMAN
               </h3>
               <div>
                  <p>The Oracle Media Management Layer (MML) API lets third-party vendors build media management software that works with RMAN to allow backups to sequential media devices such as tape drives.</p>
                  <p>Media management software handles loading, unloading, and labeling of sequential media such as tapes. You must install <a href="glossary.html#GUID-26FF62D0-5938-481D-B7B9-929BC971813E"><span class="xrefglossterm">media management software</span></a> to use RMAN with sequential media devices.
                  </p>
                  <p>When backing up or restoring, the RMAN client connects to a target database instance and directs the instance to send requests to its media manager. No direct communication occurs between the RMAN client and the media manager.</p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="rman-architecture.html#GUID-C437C2D1-FB77-4AD6-9B29-210380FADA92" title="Before performing backup or restore to a media manager, you must allocate one or more channels to handle the communication with the media manager. You can also configure default channels for the media manager. The default channels are used for all backup and recovery tasks that employ the media manager and for which you have not explicitly allocated channels.">About RMAN Interaction with a Media Manager</a></p>
                     </li>
                     <li>
                        <p><a href="rman-architecture.html#GUID-03BC1495-32A8-4249-ADFA-FA07D8757665" title="Oracle Secure Backup is a media manager that provides reliable and secure data protection through file system backup to tape. All major tape drives and tape libraries in SAN, Gigabit Ethernet, and SCSI environments are supported.">About RMAN and Oracle Secure Backup</a></p>
                     </li>
                     <li>
                        <p><a href="rman-architecture.html#GUID-8C422DA7-C518-4DF3-9BD4-46CED1CEE7AD" title="The Oracle Backup Solutions Program (BSP), part of the Oracle PartnerNetwork, is a group of media manager vendors whose products are compliant with Oracle's MML specification. Several products may be available for your platform from media management vendors.">About the Backup Solutions Program</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV89375"></a><div class="props_rev_3"><a id="GUID-C437C2D1-FB77-4AD6-9B29-210380FADA92" name="GUID-C437C2D1-FB77-4AD6-9B29-210380FADA92"></a><h4 id="BRADV-GUID-C437C2D1-FB77-4AD6-9B29-210380FADA92" class="sect4"><span class="enumeration_section">3.5.1 </span>About RMAN Interaction with a Media Manager
                  </h4>
                  <div>
                     <p>Before performing backup or restore to a media manager, you must allocate one or more channels to handle the communication with the media manager. You can also configure default channels for the media manager. The default channels are used for all backup and recovery tasks that employ the media manager and for which you have not explicitly allocated channels.</p>
                     <p>RMAN does not issue specific commands to load, label, or unload tapes. When backing up, RMAN gives the media manager a stream of bytes and associates a unique name with this stream. When RMAN must restore the backup, it asks the media manager to retrieve the byte stream. All details of how and where that stream is stored are handled entirely by the media manager. For example, the media manager labels and keeps track of the tape and names of files on each tape, and automatically loads and unloads tapes, or signals an operator to do so.</p>
                     <p>Some media managers support <a href="glossary.html#GUID-C4A7D804-0F77-4FA3-AA77-85D3C7E78E2B"><span class="xrefglossterm">proxy copy</span></a> functionality, in which they handle the entire data movement between data files and the backup devices. These products may use technologies such as high-speed connections between storage and media subsystems to reduce the load on the primary database server. RMAN provides a list of files requiring backup or restore to the media manager, which in turn makes all decisions regarding how and when to move the data.
                     </p>
                     <div class="infoboxnotealso" id="GUID-C437C2D1-FB77-4AD6-9B29-210380FADA92__GUID-5253D127-6C0F-405A-9889-A013C30DB316">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="configuring-rman-client-basic.html#GUID-DB37EEF2-426B-4060-BA36-FEE38C11ADB8" title="Configuring SBT channels creates a persistent setting that is the default used for backup and recovery operations with a media manager.">Configuring SBT Channels for Use with a Media Manager</a>"</span></p>
                     </div>
                  </div>
               </div><a id="BRADV89376"></a><div class="props_rev_3"><a id="GUID-03BC1495-32A8-4249-ADFA-FA07D8757665" name="GUID-03BC1495-32A8-4249-ADFA-FA07D8757665"></a><h4 id="BRADV-GUID-03BC1495-32A8-4249-ADFA-FA07D8757665" class="sect4"><span class="enumeration_section">3.5.2 </span>About RMAN and Oracle Secure Backup
                  </h4>
                  <div>
                     <p>Oracle Secure Backup is a media manager that provides reliable and secure data protection through file system backup to tape. All major tape drives and tape libraries in SAN, Gigabit Ethernet, and SCSI environments are supported.</p>
                     <p>Although <a href="glossary.html#GUID-8879C26C-4DF5-4040-BC7A-37CF7C482C56"><span class="xrefglossterm">Oracle Secure Backup</span></a> has no specialized knowledge of database backup and recovery algorithms, it can serve as a media management layer for RMAN through the SBT interface. In this capacity, Oracle Secure Backup provides the same services for RMAN as other supported third-party SBT libraries. Oracle Secure Backup has some features, however, that are not available in other media managers.
                     </p>
                     <div class="infoboxnotealso" id="GUID-03BC1495-32A8-4249-ADFA-FA07D8757665__GUID-1B808519-D5B8-4774-A148-61B70A3C624B">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=OBADM183" target="_blank"><span class="italic">Oracle Secure Backup Administrator's Guide</span></a> to learn how to use Oracle Secure Backup
                        </p>
                     </div>
                  </div>
               </div><a id="BRADV89377"></a><div class="props_rev_3"><a id="GUID-8C422DA7-C518-4DF3-9BD4-46CED1CEE7AD" name="GUID-8C422DA7-C518-4DF3-9BD4-46CED1CEE7AD"></a><h4 id="BRADV-GUID-8C422DA7-C518-4DF3-9BD4-46CED1CEE7AD" class="sect4"><span class="enumeration_section">3.5.3 </span>About the Backup Solutions Program
                  </h4>
                  <div>
                     <p>The Oracle Backup Solutions Program (BSP), part of the Oracle PartnerNetwork, is a group of media manager vendors whose products are compliant with Oracle's MML specification. Several products may be available for your platform from media management vendors. </p>
                     <p>For more information, contact your Oracle representative for a list of available products, contact individual vendors to ask them if they participate, or access the Backup Solutions Program website at:</p>
                     <p><a href="http://www.oracle.com/technetwork/database/features/availability/bsp-088814.html" target="_blank"><code class="codeph">http://www.oracle.com/technetwork/database/features/availability/bsp-088814.html</code></a></p>
                     <p>Oracle does not certify media manager vendors for compatibility with RMAN. Questions about availability, version compatibility, and functionality can only be answered by the media manager vendor, not Oracle.</p>
                  </div>
               </div>
            </div><a id="BRADV89378"></a><div class="props_rev_3"><a id="GUID-06A2CC19-9D45-4360-98D4-79FB32EE6153" name="GUID-06A2CC19-9D45-4360-98D4-79FB32EE6153"></a><h3 id="BRADV-GUID-06A2CC19-9D45-4360-98D4-79FB32EE6153" class="sect3"><span class="enumeration_section">3.6 </span>About the Fast Recovery Area
               </h3>
               <div>
                  <p>The fast recovery area is an optional disk location that can be used to store recovery-related files.</p>
                  <p>The components that create different backup and recovery-related files have no knowledge of each other or of the size of the file systems where they store their data. With automatic disk-based backup and recovery, you can create a <a href="glossary.html#GUID-6E3CDD76-A573-4E5C-B12D-59C232C96C19"><span class="xrefglossterm">fast recovery area</span></a> (also called the <span class="bold">recovery area</span>), which automates management of backup-related files.
                  </p>
                  <p>A fast recovery area minimizes the need to manually manage disk space for backup-related files and balance the use of space among the different types of files. In this way, a fast recovery area simplifies the ongoing administration of your database. Oracle recommends that you enable a recovery area to simplify backup management.</p>
                  <p>When you create a recovery area, you choose a location on disk and set an upper bound for storage space. You also set a <a href="glossary.html#GUID-ECF0ADBB-3255-43A2-A425-26850EA598EA"><span class="xrefglossterm">backup retention policy</span></a> that governs how long backup files are needed for recovery. The database manages the storage used for backups, archived redo logs, and other recovery-related files for the database within this space. Files no longer needed are eligible for deletion when RMAN must reclaim space for new files.
                  </p>
                  <div class="infoboxnotealso" id="GUID-06A2CC19-9D45-4360-98D4-79FB32EE6153__GUID-238F9E6F-B23F-4ABA-9B3C-7ABDB3F38C39">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="configuring-rman-client-basic.html#GUID-302339EC-EE0F-45FB-9862-BB2BA138AA13" title="The fast recovery area feature enables you to set up a disk area where the database can create and manage a variety of files related to backup and recovery. Use of the fast recovery area is strongly recommended. Consider configuring a fast recovery area as a first step in implementing a backup strategy.">Configuring the Fast Recovery Area</a>"</span> to learn about the fast recovery area and how to configure it
                     </p>
                  </div>
               </div>
            </div><a id="BRADV89379"></a><div class="props_rev_3"><a id="GUID-B18B15EA-1F59-4858-B6E9-9870A564CD62" name="GUID-B18B15EA-1F59-4858-B6E9-9870A564CD62"></a><h3 id="BRADV-GUID-B18B15EA-1F59-4858-B6E9-9870A564CD62" class="sect3"><span class="enumeration_section">3.7 </span>About RMAN in a Data Guard Environment
               </h3>
               <div>
                  <p>Data Guard maintains standby databases as transactionally consistent copies of production database. A standby database can be either a physical standby database or a logical standby database.</p>
                  <p>A database in a Data Guard environment is uniquely identified by the <a href="../refrn/DB_UNIQUE_NAME.html#REFRN10242" target="_blank"><code class="codeph">DB_UNIQUE_NAME</code></a> parameter in the initialization parameter file. For RMAN to work correctly in a Data Guard environment, the <code class="codeph">DB_UNIQUE_NAME</code> must be unique across all the databases with the same DBID.
                  </p>
                  <p>When using RMAN in a Data Guard environment, a recovery catalog is required. The recovery catalog can store the metadata for all primary and standby databases. </p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="rman-architecture.html#GUID-D3BD7E4E-30F5-4696-9649-4154BBEC2C62" title="To simplify ongoing use of RMAN for backup and recovery, you can set some persistent configuration settings for each primary and physical standby database in a Data Guard environment. These settings control many aspects of RMAN behavior. For example, you can configure the backup retention policy, default destinations for backups to tape or disk, or default backup device type.">About RMAN Configuration in a Data Guard Environment</a></p>
                     </li>
                     <li>
                        <p><a href="rman-architecture.html#GUID-E514F9D2-D96E-4087-B8C5-5A8EB6A44E6B" title="RMAN uses a recovery catalog to track file names for all database files in a Data Guard environment.">About RMAN File Management in a Data Guard Environment</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-B18B15EA-1F59-4858-B6E9-9870A564CD62__GUID-7E5C403C-207C-4089-8EB6-CD370D7187E1">
                     <p class="notep1">See Also:</p>
                     <p><a href="../sbydb/using-RMAN-in-oracle-data-guard-configurations.html#SBYDB04700" target="_blank"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> to learn how to use RMAN in a Data Guard environment
                     </p>
                  </div>
               </div><a id="BRADV89380"></a><div class="props_rev_3"><a id="GUID-D3BD7E4E-30F5-4696-9649-4154BBEC2C62" name="GUID-D3BD7E4E-30F5-4696-9649-4154BBEC2C62"></a><h4 id="BRADV-GUID-D3BD7E4E-30F5-4696-9649-4154BBEC2C62" class="sect4"><span class="enumeration_section">3.7.1 </span>About RMAN Configuration in a Data Guard Environment
                  </h4>
                  <div>
                     <p>To simplify ongoing use of RMAN for backup and recovery, you can set some persistent configuration settings for each primary and physical standby database in a Data Guard environment. These settings control many aspects of RMAN behavior. For example, you can configure the backup retention policy, default destinations for backups to tape or disk, or default backup device type.</p>
                     <p>You can use the <a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><code class="codeph">CONFIGURE</code></a> command with the <code class="codeph">FOR DB_UNIQUE_NAME</code> clause to create a persistent configuration for a database in a Data Guard environment without connecting to the standby database or primary database as <code class="codeph">TARGET</code>. For example, you connect RMAN to the recovery catalog, run the <code class="codeph">SET DBID</code> command, and then can create a configuration for a physical standby database before its creation so that the RMAN configuration applies when the database is created. 
                     </p>
                     <p>RMAN updates the control file of the database when connected to it as <code class="codeph">TARGET</code> during a recovery catalog <a href="glossary.html#GUID-390A74EF-CD69-4173-B810-23EE2A5BB0EF"><span class="xrefglossterm">resynchronization</span></a>. If you use <code class="codeph">FOR DB_UNIQUE_NAME</code> for a database without being connected as <code class="codeph">TARGET</code> to this database, however, then RMAN changes configurations in the recovery catalog only.
                     </p>
                     <div class="infoboxnotealso" id="GUID-D3BD7E4E-30F5-4696-9649-4154BBEC2C62__GUID-5A8317F4-73D8-4840-BF95-D0CBDADA9F58">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="configuring-rman-client-basic.html#GUID-FDA66A53-B2AA-4C59-A142-C2F04016FAEF" title="If you use RMAN in a Data Guard environment, then you can use the CONFIGURE command to register and configure settings for the physical databases in this environment.">Configuring RMAN in a Data Guard Environment</a>"</span></p>
                     </div>
                  </div>
               </div><a id="BRADV89381"></a><div class="props_rev_3"><a id="GUID-E514F9D2-D96E-4087-B8C5-5A8EB6A44E6B" name="GUID-E514F9D2-D96E-4087-B8C5-5A8EB6A44E6B"></a><h4 id="BRADV-GUID-E514F9D2-D96E-4087-B8C5-5A8EB6A44E6B" class="sect4"><span class="enumeration_section">3.7.2 </span>About RMAN File Management in a Data Guard Environment
                  </h4>
                  <div>
                     <p>RMAN uses a recovery catalog to track file names for all database files in a Data Guard environment. </p>
                     <p>The catalog also records where the online redo log files, standby redo log files, temp files, archived redo log files, backup sets, and image copies are created. </p>
                  </div><a id="BRADV99957"></a><div class="props_rev_3"><a id="GUID-28654CD9-CC0C-4027-BA34-86D73D0D4873" name="GUID-28654CD9-CC0C-4027-BA34-86D73D0D4873"></a><h5 id="BRADV-GUID-28654CD9-CC0C-4027-BA34-86D73D0D4873" class="sect5"><span class="enumeration_section">3.7.2.1 </span>About Interchangeability of Backups in a Data Guard Environment
                     </h5>
                     <div>
                        <p>RMAN commands use the recovery catalog metadata to function transparently across different physical databases in the Data Guard environment. For example, you can back up a tablespace on a physical standby database and restore and recover it on the primary database. Similarly, you can back up a tablespace on a primary database and restore and recover it on a physical standby database.</p>
                        <p>Backups of standby control files and nonstandby control files are interchangeable. For example, you can restore a standby control file on a primary database and a primary control file on a physical standby database. This interchangeability means that you can offload control file backups to one database in a Data Guard environment. RMAN automatically updates the file names for database files during restore and recovery at the databases.</p>
                        <div class="infoboxnote" id="GUID-28654CD9-CC0C-4027-BA34-86D73D0D4873__GUID-89A197B1-F892-4022-8F27-0A7D1B1A1363">
                           <p class="notep1">Note:</p>
                           <p>Backups of logical standby databases are not usable at the primary database.</p>
                        </div>
                     </div>
                  </div><a id="BRADV99958"></a><div class="props_rev_3"><a id="GUID-3DDC5739-0A55-4F04-BE4C-4705E300C87F" name="GUID-3DDC5739-0A55-4F04-BE4C-4705E300C87F"></a><h5 id="BRADV-GUID-3DDC5739-0A55-4F04-BE4C-4705E300C87F" class="sect5"><span class="enumeration_section">3.7.2.2 </span>About Association of Backups in a Data Guard Environment
                     </h5>
                     <div>
                        <p>The recovery catalog tracks the files in the Data Guard environment by associating every database file or backup file with a <code class="codeph">DB_UNIQUE_NAME</code>. The database that creates a file is associated with the file.
                        </p>
                        <p>For example, if RMAN backs up the database with the unique name of <code class="codeph">standby1</code>, then <code class="codeph">standby1</code> is associated with this backup. A backup remains associated with the database that created it unless you use the <a href="../rcmrf/CHANGE.html#RCMRF110" target="_blank"><code class="codeph">CHANGE</code></a> <code class="codeph">...RESET DB_UNIQUE_NAME</code> command to associate the backup with a different database.
                        </p>
                     </div>
                  </div><a id="BRADV99959"></a><div class="props_rev_3"><a id="GUID-4176237B-67BE-4C87-A4B8-7AF2E0E6035E" name="GUID-4176237B-67BE-4C87-A4B8-7AF2E0E6035E"></a><h5 id="BRADV-GUID-4176237B-67BE-4C87-A4B8-7AF2E0E6035E" class="sect5"><span class="enumeration_section">3.7.2.3 </span>About Accessibility of Backups in a Data Guard Environment
                     </h5>
                     <div>
                        <p>The accessibility of a backup is different from its association. In a Data Guard environment, the recovery catalog considers disk backups as accessible only to the database with which they are associated, whereas tape backups created on one database are accessible to all databases.</p>
                        <p>If a backup file is not associated with any database, then the row describing it in the recovery catalog view shows <code class="codeph">null</code> for the <code class="codeph">SITE_KEY</code> column. By default, RMAN associates a file whose <code class="codeph">SITE_KEY</code> is <code class="codeph">null</code> with the database to which they are connected as <code class="codeph">TARGET</code>.
                        </p>
                        <p>RMAN commands such as <code class="codeph">BACKUP</code>, <code class="codeph">RESTORE</code>, and <code class="codeph">CROSSCHECK</code> work on any accessible backup. For example, for a <code class="codeph">RECOVER COPY</code> operation, RMAN considers only image copies that are associated with the database as eligible to be recovered. RMAN considers the incremental backups on disk and tape as eligible to recover the image copies. In a database recovery, RMAN considers only the disk backups associated with the database and all files on tape as eligible to be restored.
                        </p>
                        <p>To illustrate the differences in backup accessibility, assume that databases <code class="codeph">prod</code> and <code class="codeph">standby1</code> reside on different hosts. RMAN backs up data file <code class="codeph">1</code> on <code class="codeph">prod</code> to <code class="codeph">/prmhost/disk1/df1.dbf</code> on the production host and also to tape. RMAN backs up data file <code class="codeph">1</code> on <code class="codeph">standby1</code> to <code class="codeph">/sbyhost/disk2/df1.dbf</code> on the standby host and also to tape. If RMAN is connected to database <code class="codeph">prod</code>, then you cannot use RMAN commands to perform operations with the <code class="codeph">/sbyhost/disk2/df1.dbf</code> backup located on the standby host. However, RMAN does consider the tape backup made on <code class="codeph">standby1</code> as eligible to be restored.
                        </p>
                        <div class="infoboxnote" id="GUID-4176237B-67BE-4C87-A4B8-7AF2E0E6035E__GUID-0BDDBB3E-50DB-41D4-A4E2-7595C94C3792">
                           <p class="notep1">Note:</p>
                           <p>You can transfer a backup from a standby host to a primary host or vice versa, connect as <code class="codeph">TARGET</code> to the database on this host, and then use the <a href="../rcmrf/CATALOG.html#RCMRF109" target="_blank"><code class="codeph">CATALOG</code></a> command to catalog the backup. After a file is cataloged by the target database, the file is associated with the target database.
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-4176237B-67BE-4C87-A4B8-7AF2E0E6035E__GUID-79E047FD-A42A-42FE-906B-C07FB7CED1B5">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../sbydb/using-RMAN-in-oracle-data-guard-configurations.html#SBYDB04700" target="_blank"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> to learn how to perform RMAN backup and recovery in a Data Guard environment
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="maintaining-rman-backups.html#GUID-F0C0A8F9-CBDF-4EDE-BAAF-F93CC37638B1" title="The database in a Data Guard environment that creates a backup or copy is associated with the file. For example, if RMAN is connected to target database standby1 and backs it up, then this backup is associated with standby1.">About Maintenance Commands in a Data Guard Environment</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="managing-recovery-catalog.html#GUID-E836E243-6620-495B-ACFB-AC0001EF4E89" title="This section explains the basic concepts related to managing a recovery catalog.A recovery catalog is a database schema used by RMAN to store metadata about one or more Oracle databases. Typically, you store the catalog in a dedicated database.The recovery catalog contains metadata about RMAN operations for each registered target database. When RMAN is connected to a recovery catalog, RMAN obtains its metadata exclusively from the catalog.The process of enrolling of a database in a recovery catalog for RMAN use is called registration.The owner of a centralized recovery catalog, which is also called the base recovery catalog, can grant or revoke restricted access to the catalog to other database users. For RMAN operations such as backup, restore, and crosscheck, RMAN always first updates the control file and then propagates the metadata to the recovery catalog. This flow of metadata from the mounted control file to the recovery catalog, which is known as recovery catalog resynchronization, ensures that the metadata that RMAN obtains from the control file is current.You can use a stored script as an alternative to a command file for managing frequently used sequences of RMAN commands. The script is stored in the recovery catalog rather than on the file system.You must use a recovery catalog to manage RMAN metadata for all physical databases, both primary and standby databases, in the Data Guard environment. RMAN uses the recovery catalog as the single source of truth for the Data Guard environment.Managing a recovery catalog consists of creating the catalog and then registering your target databases with the catalog.Creating a recovery catalog consists of multiple phases that includes configuring the recovery catalog database, creating the recovery catalog schema owner, and then creating the catalog. When you use a recovery catalog, RMAN requires that you maintain a recovery catalog schema. The recovery catalog is stored in the default tablespace of the schema. Privileged users such as SYS cannot be the owner of the recovery catalog.You must allocate space to be used by the catalog schema. The size of the recovery catalog schema depends upon the number of databases monitored by the catalog. If you are creating your recovery catalog in an existing database, then add enough room to hold the default tablespace for the recovery catalog schema. After choosing the recovery catalog database and creating the necessary space, you are ready to create the owner of the recovery catalog and grant this user necessary privileges. After creating the catalog owner, create the catalog tables with the RMAN CREATE CATALOG command. The command creates the catalog in the default tablespace of the catalog owner.Registering a target database in the recovery catalog maintains the database’s records in the recovery catalog.The process of enrolling of a target database in a recovery catalog is called registration.In a Data Guard environment, the primary and standby databases share the same DBID and database name. To be eligible for registration in the recovery catalog, each database in the Data Guard environment must have different DB_UNIQUE_NAME values.The first step in using a recovery catalog with a target database is registering the target database in the recovery catalog. If you use the catalog in a Data Guard environment, then you can only register the primary database in this way.If you have data file copies, backup pieces, or archived logs on disk, then you can catalog them in the recovery catalog with the CATALOG command. When using a recovery catalog, cataloging older backups that have aged out of the control file lets RMAN use the older backups during restore operations. RMAN provides multiple commands to create and manage virtual private catalogs.RMAN uses the Virtual Private Database (VPD) functionality to implement virtual private catalogs. Creating a virtual private catalog is a multi-step process in which you first create the database user who will own the virtual private catalog and then create the virtual private catalog.To store backup metadata for a target database in a virtual private catalog, you must register the database with the virtual private catalog.After you create a virtual private catalog, you can revoke catalog access privileges as necessary.This section describes how to use the UPGRADE CATALOG command to upgrade a virtual private catalog.Include the recovery catalog database in your backup and recovery strategy. If you do not back up the recovery catalog and a disk failure occurs that destroys the recovery catalog database, then you may lose the metadata in the catalog. Without the recovery catalog contents, recovery of your other databases is likely to be more difficult.A single recovery catalog can store metadata for multiple target databases. Consequently, loss of the recovery catalog can be disastrous. You must back up the recovery catalog frequently.The recovery catalog database is a database like any other, and is also a key part of your backup and recovery strategy. Protect the recovery catalog like any other part of your database, by backing it up. The backup strategy for your recovery catalog database is part of an overall backup and recovery strategy.When backing up the recovery catalog database, you can use RMAN to make the backups. A recovery catalog is only effective when separated from the data that it is designed to protect. Thus, you must never store a recovery catalog containing the RMAN repository for a database in the same database as the target database. Also, do not store the catalog database on the same disks as the target database.Logical backups of the RMAN recovery catalog created with the Data Pump Export utility can be a useful supplement for physical backups. Restoring and recovering the recovery catalog database is much like restoring and recovering any other database with RMAN. You can create and store scripts in the recovery catalog. You can use a stored script as an alternative to a command file for managing frequently used sequences of RMAN commands. The script is stored in the recovery catalog rather than on the file system.You can use the CREATE SCRIPT command to create a stored script. To update stored scripts, use the REPLACE SCRIPT command. Use the EXECUTE SCRIPT command to run a stored script. You can specify substitution variables in the CREATE SCRIPT command.The PRINT SCRIPT command displays a stored script or writes it out to a file. Use the LIST ... SCRIPT NAMES command to display the names of scripts defined in the recovery catalog. Use the DELETE GLOBAL SCRIPT command to delete a stored script from the recovery catalog.To run the RMAN client and start a stored script in the recovery catalog on startup, use the SCRIPT argument when starting the RMAN client.Maintaining the recovery catalog consists of tasks such as resynchronizing, updating, and upgrading the recovery catalog.After you have created a recovery catalog and registered your target databases, you must maintain this catalog.When RMAN performs a resynchronization, it compares the recovery catalog to either the current or backup control file of the target database and updates the catalog with metadata that is missing or changed. Resynchronization of the recovery catalog ensures that the metadata that RMAN obtains from the control file stays current. Resynchronizations can be full or partial. RMAN only automatically resynchronizes the recovery catalog with a database when connected to this database as TARGET. Thus, RMAN does not automatically resynchronize every database in a Data Guard environment when connected as TARGET to one database in the environment.RMAN automatically resynchronizes the recovery catalog when RMAN is connected to a target database and recovery catalog and you have executed RMAN commands. If the recovery catalog is unavailable when you issue RMAN commands that cause a partial resynchronization, then open the catalog database later and resynchronize it manually with the RESYNC CATALOG command. You can create or change an RMAN configuration for a standby database even when not connected to this database as TARGET. Your goal is to ensure that the metadata in the recovery catalog is current. Because the recovery catalog obtains its metadata from the target control file, the currency of the data in the catalog depends on the currency of the data in the control file. You must make sure that the backup metadata in the control file is recorded in the catalog before it is overwritten with new records.Use RESYNC CATALOG to force a full resynchronization of the recovery catalog with a target database control file. You may decide to change the DB_UNIQUE_NAME of a database in a Data Guard environment. In this case, you can run the CHANGE DB_UNIQUE_NAME command to associate the metadata stored in recovery catalog for the old DB_UNIQUE_NAME to the new DB_UNIQUE_NAME.You can use the UNREGISTER DATABASE command to unregister a database from the recovery catalog. Use the UNREGISTER DATABASE command to unregister a target database.The UNREGISTER command supports a DB_UNIQUE_NAME clause for use in a Data Guard environment. You can use this clause to remove metadata for a specific database.In a Zero Data Loss Recovery Appliance (Recovery Appliance) environment, the UNREGISTER DATABASE command cannot be used to unregister a protected database from the Recovery Appliance catalog. Instead, use the DBMS_RA.DELETE_DB procedure.You create an incarnation of the database when you open the database with the RESETLOGS option. You can access a record of the new incarnation in the V$DATABASE_INCARNATION view.This section explains what a recovery catalog upgrade is and when you must do it.If you are upgrading to Oracle Database 12c Release 1 (12.1.0.2) or later, then the recovery catalog database must use the Enterprise Edition of Oracle Database.Assume that you upgrade the recovery catalog schema to Oracle Database 11g or later in a Data Guard environment. When RMAN connects to a standby database, it automatically registers the new database information and resynchronizes to obtain the file names from the control file.The schema version of the recovery catalog is stored in the recovery catalog itself. The information is important in case you maintain multiple databases of different versions in your production system, and you must determine whether the catalog schema version is usable with a specific target database version.This scenario assumes that you are upgrading a recovery catalog schema to the current version. You can use the IMPORT CATALOG command in RMAN to merge one recovery catalog schema into another. When using IMPORT CATALOG, the source catalog schema is the catalog schema to import into a different schema. The destination catalog schema is the catalog schema into which you intend to import the source catalog schema.In a Recovery Appliance environment, a single, centrally-managed Recovery Appliance catalog residing on the Recovery Appliance is shared by all the protected databases. This catalog must be used by all protected databases that send backups to Recovery Appliance.A target database, recovery catalog database, and recovery catalog schema can be at different database versions. The recommended practice is to import all existing recovery catalogs into a single recovery catalog at the latest version of the recovery catalog schema. When importing one recovery catalog into another, no connection to a target database is necessary. RMAN only needs connectivity to the source and destination catalogs.The procedure for moving a recovery catalog from one database to another is a variation of the procedure for importing a catalog. The DROP CATALOG command removes those objects that were created by the CREATE CATALOG command. If the user who owns the recovery catalog also owns objects that were not created by CREATE CATALOG, then the DROP CATALOG command does not remove these objects.">Managing a Recovery Catalog</a> to learn how to manage a recovery catalog in a Data Guard environment
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><span class="italic">Oracle Database Backup and Recovery Reference </span></a>for <code class="codeph">CONFIGURE</code> syntax
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="BRADV446"></a><div class="props_rev_3"><a id="GUID-370362C4-9F7C-4D23-A9F8-42F0376F1F5A" name="GUID-370362C4-9F7C-4D23-A9F8-42F0376F1F5A"></a><h3 id="BRADV-GUID-370362C4-9F7C-4D23-A9F8-42F0376F1F5A" class="sect3"><span class="enumeration_section">3.8 </span>About RMAN in a Recovery Appliance Environment
               </h3>
               <div>
                  <div class="p">RMAN is fully-integrated with <a href="glossary.html#GUID-238433D1-4ED8-412E-978F-24197B953D94"><span class="xrefglossterm">	Zero Data Loss Recovery Appliance (Recovery Appliance)</span></a> and RMAN commands can be used to back up protected databases to Recovery Appliance.
                     <div class="infoboxnotealso" id="GUID-370362C4-9F7C-4D23-A9F8-42F0376F1F5A__GUID-5A8317F4-73D8-4840-BF95-D0CBDADA9F58">
                        <p class="notep1">See Also:</p>
                        <p><a href="rman-architecture.html#GUID-9F0DA285-4785-4F5F-B185-5452AEF49C78" title="Recovery Appliance provides a centralized remote repository for backups of all target databases in the enterprise. Backups and backup metadata for all target databases is managed by a central recovery catalog (the Recovery Appliance catalog) on Recovery Appliance.">Creating RMAN Backups to Recovery Appliance</a></p>
                     </div>
                  </div>
               </div><a id="BRADV452"></a><a id="BRADV447"></a><div class="props_rev_3"><a id="GUID-9F0DA285-4785-4F5F-B185-5452AEF49C78" name="GUID-9F0DA285-4785-4F5F-B185-5452AEF49C78"></a><h4 id="BRADV-GUID-9F0DA285-4785-4F5F-B185-5452AEF49C78" class="sect4"><span class="enumeration_section">3.8.1 </span>Creating RMAN Backups to Recovery Appliance
                  </h4>
                  <div>
                     <p>Recovery Appliance provides a centralized remote repository for backups of all target databases in the enterprise. Backups and backup metadata for all target databases is managed by a central recovery catalog (the Recovery Appliance catalog) on Recovery Appliance.</p>
                     <div class="section">
                        <p></p>
                        <p>Before you use Recovery Appliance to manage backups of your target database, you must perform some configuration steps both on the Recovery Appliance and on the target database.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9F0DA285-4785-4F5F-B185-5452AEF49C78__GUID-76ACAAC4-C433-4F6A-AAC5-68378F7FF8F5">To back up a target database to Recovery Appliance:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Ensure that the target database meets the requirements for protected databases in Recovery Appliance environments. </span><div>
                              <div class="infoboxnotealso" id="GUID-9F0DA285-4785-4F5F-B185-5452AEF49C78__GUID-31C2871C-4389-481F-9F6F-DE61495A9A6E">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=AMAGD866" target="_blank"><span class="italic">Zero Data Loss Recovery Appliance Administrator's Guide</span></a> for information about the supported Oracle Database releases
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Install the Recovery Appliance backup module on the target database. This backup module is a shared library that is used by the target database to transfer backups to Recovery Appliance.</span><div>
                              <div class="infoboxnotealso" id="GUID-9F0DA285-4785-4F5F-B185-5452AEF49C78__GUID-8870F1B4-85D8-40DE-BCC1-464558C977AB">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=AMPDB715" target="_blank"><span class="italic">Zero Data Loss Recovery Appliance Protected Database Configuration Guide</span></a> for the steps to install the Recovery Appliance backup module
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Enroll the target database as a protected database with the Recovery Appliance.</span><div>
                              <p>This step includes creating a protection policy, configuring a Recovery Appliance database user that will be used by protected databases to authenticate with Recovery Appliance, and registering the protected database with the Recovery Appliance catalog.</p>
                              <div class="infoboxnotealso" id="GUID-9F0DA285-4785-4F5F-B185-5452AEF49C78__GUID-A000A018-ED96-44B8-BFFD-D3838B1B2BC5">
                                 <p class="notep1">See Also:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=AMAGD1085" target="_blank"><span class="italic">Zero Data Loss Recovery Appliance Administrator's Guide</span></a> for the enrolment steps on the Recovery Appliance
                                       </p>
                                    </li>
                                    <li>
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=AMPDB713" target="_blank"><span class="italic">Zero Data Loss Recovery Appliance Protected Database Configuration Guide</span></a> for the enrolment steps on the protected database
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>(Optional) Configure backup and recovery settings for the target database. These settings will be used when you perform backup and recovery operations with Recovery Appliance.</span><div>
                              <p>The <code class="codeph">CONFIGURE</code> command is used to configure backup and recovery settings for protected databases.
                              </p>
                              <div class="infoboxnotealso" id="GUID-9F0DA285-4785-4F5F-B185-5452AEF49C78__GUID-52EFFB54-9399-44C9-B586-255AB1CB5113">
                                 <p class="notep1">See Also:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><a href="configuring-rman-client-basic.html#GUID-5155F8E6-6E35-4261-9CC1-F12DAA9FAC5B" title="RMAN provides sensible defaults for most parameters required to perform basic backup and recovery. You can modify the value of default parameters or override these values for a particular session.You can use the SHOW command to display the current value of RMAN configured settings for the target database. You can also view whether these commands are currently set to their default values.Backups for which no destination device type is specified are directed to the configured default device. RMAN is preconfigured to use disk as the default device type. No additional configuration is necessary.The BACKUP command can create either backup sets or image copies. For disk, you can configure RMAN to create either backup sets or image copies as its default backup type with the CONFIGURE DEVICE TYPE DISK BACKUP TYPE TO command. An RMAN channel is a connection to a database server session. RMAN uses channels to perform most tasks.Use the CONFIGURE CHANNEL command to configure options for disk or SBT channels. You can configure generic channel settings for a device type, that is, a template that is used for any channels created based on configured settings for that device.By default, RMAN allocates one disk channel for all operations. You can specify different options for this channel, for example, a new default location for backups.The number of channels available for a device type when you run a command determines whether RMAN reads or writes in parallel. As a rule, the number of channels used in executing a command should match the number of devices accessed. If you manually allocate a channel during a job, then RMAN disregards any configured channel settings.You can configure RMAN to automatically back up the control file and server parameter file. The autobackup occurs whenever a backup record is added.By default, the format of the autobackup file for all configured devices is the substitution variable %F in the FORMAT clause.The SET CONTROLFILE AUTOBACKUP FORMAT command, which you can specify either within a RUN command or at the RMAN prompt, overrides the configured autobackup format in the current session only. On most platforms, to back up to and restore from sequential media such as tape you must integrate a media management software with your Oracle database. You can use Oracle Secure Backup, which supports both database and file system backups to tape, as your media manager. Before attempting to use RMAN with a media manager, determine the location of the media management library. After installing the media management software, perform the configuration required by your vendor so that the software can accept RMAN backups. After you have confirmed that the database server can load the media management library, test to ensure that RMAN can back up to the media manager. The ALLOCATE CHANNEL command is used to perform a basic test of RMAN communication with the media manager.After testing a channel allocation on the media manager, create and restore a test backup.Configuring SBT channels creates a persistent setting that is the default used for backup and recovery operations with a media manager.A backup piece name is determined by the FORMAT string specified in the BACKUP command, CONFIGURE CHANNEL command, or ALLOCATECHANNEL command.The easiest technique for backing up to a media manager is to configure automatic SBT channelsRMAN commands can be used to back up target databases to Zero Data Loss Recovery Appliance (Recovery Appliance). Certain configuration steps are required to use the Recovery Appliance as a centralized repository for the target database backups.Before you can use RMAN to back up a target database to Zero Data Loss Recovery Appliance (Recovery Appliance), you must install the Recovery Appliance backup module in the Oracle home of the target database.RMAN configuration is required before you can back up Oracle databases to Zero Data Loss Recovery Appliance (Recovery Appliance).Before using RMAN to back up target databases to Zero Data Loss Recovery Appliance (Recovery Appliance), you need to determine the location of the Recovery Appliance backup module on the target database host. This location is used while configuring or allocating RMAN channels for Recovery Appliance.The client configuration file, stored on the protected database, contains the configuration settings that are used by the Zero Data Loss Recovery Appliance (Recovery Appliance) backup module to communicate with the Recovery Appliance. This file is created automatically when the Recovery Appliance backup module is installed.The fast recovery area feature enables you to set up a disk area where the database can create and manage a variety of files related to backup and recovery. Use of the fast recovery area is strongly recommended. Consider configuring a fast recovery area as a first step in implementing a backup strategy.The fast recovery area can contain control files, online redo logs, archived redo logs, flashback logs, and RMAN backups. The fast recovery area can be used with Oracle Managed Files (OMF) and Automatic Storage Management (ASM)Space in the fast recovery area is balanced among backups and archived logs that must be kept according to the retention policy, and other files that may be subject to deletion. You enable the fast recovery area by setting two initialization parameters. These parameters enable the fast recovery area with or without having to shut down and restart the database instance.The larger the fast recovery area is, the more useful it becomes. Ideally, the fast recovery area is large enough to contain the control files, online redo logs, archived redo logs, and flashback logs. It should be able to contain a copy of all data files in the database and the incremental backups used by your chosen backup strategy.Use database initialization parameters to set the location and size of the fast recovery area.You can use the ALTER SYSTEM command to disable the fast recovery area.Use initialization parameters to configure the default locations for control files and redo logs. The initialization parameters CONTROL_FILES, DB_CREATE_ONLINE_LOG_DEST_n, DB_RECOVERY_FILE_DEST, and DB_CREATE_FILE_DEST all interact to determine the location where the database control files are created.Oracle recommends that you the use fast recovery area as an archiving location because the archived logs are automatically managed by the database. Certain RMAN commands or implicit actions (such as control file autobackups) can create files in the fast recovery area. The backup retention policy specifies which backups must be retained to meet your data recovery requirements.The REDUNDANCY parameter of the CONFIGURE RETENTION POLICY command specifies how many full or level 0 backups of each data file and control file that RMAN keeps. The default retention policy is REDUNDANCY 1.The RECOVERY WINDOW parameter of the CONFIGURE command specifies the number of days between the current time and the earliest point of recoverability.When you disable the retention policy, RMAN does not consider any backup as obsolete.Run the RMAN CONFIGURE command to enable and disable backup optimization. Backup optimization skips the backup of files in certain circumstances if the identical file or an identical version of the file has been backed up.When you enable backup optimization, the BACKUP command skips backing up files when the identical file has been backed up to the specified device type.Backup optimization is not always applied when backing up to SBT devices.By default, backup optimization is configured to OFF. You can use the SHOW BACKUP OPTIMIZATION command to view the current settings of backup optimization.You can use RMAN to create a persistent configuration that governs when archived redo logs are eligible for deletion from disk.You can use the CONFIGURE ARCHIVELOG DELETION POLICY command to specify when archived redo logs are eligible for deletion.By default, there is no archived redo log deletion policy and this is why the archive redo log policy is set to the NONE clause.You can use the CONFIGURE ARCHIVELOG DELETION POLICY BACKED UP integer TIMES TO DEVICE TYPE command to enable an archived log deletion policy. This configuration specifies that archived logs are eligible for deletion only when the specified number of archived log backups exist on the specified device type.By default the archived redo log deletion policy is set to NONE.If you use RMAN in a Data Guard environment, then you can use the CONFIGURE command to register and configure settings for the physical databases in this environment."> Configuring the RMAN Environment</a></p>
                                    </li>
                                    <li>
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=AMPDB815" target="_blank"><span class="italic">Zero Data Loss Recovery Appliance Protected Database Configuration Guide</span></a> for information about configuring settings in a Recovery Appliance environment
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Start RMAN and connect as <code class="codeph">TARGET</code> to the protected database and as <code class="codeph">CATALOG</code> to the Recovery Appliance catalog.</span><div>
                              <p>The connection to the target database must be as a user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege. The connection to the Recovery Appliance is as the Recovery Appliance user that has privileges required to perform backup and recovery operations for the protected database.
                              </p>
                              <div class="infoboxnotealso" id="GUID-9F0DA285-4785-4F5F-B185-5452AEF49C78__GUID-73DACD1F-3376-44A3-92E8-9D8FD5AA7DB4">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=AMPDB804" target="_blank"><span class="italic">Zero Data Loss Recovery Appliance Protected Database Configuration Guide</span></a> for information about creating connections using RMAN
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Allocate one or more RMAN SBT channels that point to the Recovery Appliance backup module. These channels are used to transfer data to the Recovery Appliance.</span><div>
                              <div class="infoboxnotealso" id="GUID-9F0DA285-4785-4F5F-B185-5452AEF49C78__GUID-F335390A-E4DF-43B3-8F20-3F94E201A38D">
                                 <p class="notep1">See Also:</p>
                                 <p><span class="q">"<a href="configuring-rman-client-basic.html#GUID-6F28089E-6D4E-4D6B-B96E-043C35D029D5" title="RMAN commands can be used to back up target databases to Zero Data Loss Recovery Appliance (Recovery Appliance). Certain configuration steps are required to use the Recovery Appliance as a centralized repository for the target database backups.">Configuring RMAN to Make Backups to Recovery Appliance</a>"</span></p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Back up the target database to Recovery Appliance. You use the regular RMAN commands to back up the database to Recovery Appliance.</span><div>
                              <div class="infoboxnotealso" id="GUID-9F0DA285-4785-4F5F-B185-5452AEF49C78__GUID-490C244B-333B-4382-AE72-54F6546ADC8D">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=AMPDB827" target="_blank"><span class="italic">Zero Data Loss Recovery Appliance Protected Database Configuration Guide</span></a> for the steps to back up protected databases
                                 </p>
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
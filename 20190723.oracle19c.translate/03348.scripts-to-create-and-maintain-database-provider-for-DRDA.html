<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>用于为DRDA创建和维护Oracle数据库提供程序的脚本</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="User&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="User&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="provider-drda-users-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T01:34:46-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2011, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96456-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="SQL-statement-support.html" title="Previous" type="text/html"></link>
      <link rel="next" href="package-binding-options.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Provider for DRDA User&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="DRDAS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="SQL-statement-support.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="package-binding-options.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">用户指导</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">用于为DRDA创建和维护Oracle数据库提供程序的脚本</li>
            </ol>
            <a id="GUID-9AAED23B-CC61-40DD-A050-D5EAF771B20C" name="GUID-9AAED23B-CC61-40DD-A050-D5EAF771B20C"></a><a id="DRDAS601"></a>
            
            <h2 id="DRDAS-GUID-9AAED23B-CC61-40DD-A050-D5EAF771B20C" class="sect2"><span class="enumeration_appendix">一种</span>用于创建和维护Oracle数据库提供的DRDA脚本</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p>用于DRDA的Oracle数据库提供程序需要多个脚本来建立适当的环境。</p>
               </div>
               <!-- class="section" -->
            </div><a id="DRDAS602"></a><div class="props_rev_3"><a id="GUID-C13A2414-D056-44C6-AD61-15044DDD4EFE" name="GUID-C13A2414-D056-44C6-AD61-15044DDD4EFE"></a><h3 id="DRDAS-GUID-C13A2414-D056-44C6-AD61-15044DDD4EFE" class="sect3">catdrdaas.sql</h3>
               <div>
                  <div class="section">
                     <p>脚本<code class="codeph">catdrdaas.sql</code>为DRDA目录对象创建Oracle数据库提供程序。
                     </p><pre class="oac_no_warn" dir="ltr">Rem catdrdaas.sql Rem Rem版权所有（c）2011，Oracle和/或其附属公司。版权所有。Rem Rem NAME Rem catdrdaas.sql  - 用于DRDA Rem Rem的CATalog Oracle数据库提供程序================================== ===================================如果初始检查中有错误，Rem立即退出Rem === ================================================== ================ WHERVER SQLERROR EXIT; DOC ################################################## ######################客户应该创建SYSIBM表空间例如：创建表空间SYSIBM数据文件'sysibm01.dbf'大小70M重用范围管理本地段空间管理自动在线; ################################################## ######################@@ prvtdpsadrda.plb</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="DRDAS603"></a><div class="props_rev_3"><a id="GUID-F4644CB7-61B9-413D-B480-D725B39B901D" name="GUID-F4644CB7-61B9-413D-B480-D725B39B901D"></a><h3 id="DRDAS-GUID-F4644CB7-61B9-413D-B480-D725B39B901D" class="sect3">catnodrdaas.sql</h3>
               <div>
                  <div class="section">
                     <p>脚本<code class="codeph">catnodrdaas.sql</code>删除DRDA目录对象的Oracle数据库提供程序</p><pre class="oac_no_warn" dir="ltr">Rem catnodrdaas.sql Rem Rem版权所有（c）2011,2013，Oracle和/或其附属公司。Rem保留所有权利。Rem Rem NAME Rem catnodrdaas.sql  -  CATalog没有针对DRDA Rem的Oracle数据库提供程序删除公共同义词DBMS_DRDAAS; drop public synonym DBMS_DRDAAS_ADMIN;删除公共同义词USER_DRDAASTRACE;公共同义词DBA_DRDAASTRACE;公共同义词ALL_DRDAASPACKAGE;删除公共同义词USER_DRDAASPACKAGE;公共同义词DBA_DRDAASPACKAGE;删除公共同义词USER_DRDAASPACKSTMT;公共同义词DBA_DRDAASPACKSTMT; drop public synonym ALL_DRDAASPACKAUTH; drop public synonym USER_DRDAASPACKAUTH; drop public synonym DBA_DRDAASPACKAUTH;公共同义词ALL_DRDAASPACKSIDE;删除公共同义词USER_DRDAASPACKSIDE;公共同义词DBA_DRDAASPACKSIDE;掉落角色DRDAAS_USER_ROLE; drop role DRDAAS_ADMIN_ROLE;删除用户SYSIBM级联;承诺; DOC ################################################## ######################客户应删除SYSIBM表空间。例如：drop tablespace SYSIBM; ################################################## #####################</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="DRDAS676"></a><div class="props_rev_3"><a id="GUID-6171D01A-3A6B-495B-9222-98DCAE943A49" name="GUID-6171D01A-3A6B-495B-9222-98DCAE943A49"></a><h3 id="DRDAS-GUID-6171D01A-3A6B-495B-9222-98DCAE943A49" class="sect3">drdapkg_db2.sql</h3>
               <div>
                  <div class="section">
                     <p></p><pre class="oac_no_warn" dir="ltr">Rem drdapkg_db2.sql Rem Rem版权所有（c）2012，Oracle和/或其附属公司。版权所有。Rem Rem NAME Rem drdapkg_db2.sql  - 初始化DRDA-AS环境，以便可以绑定Rem包并为各种SQL结构返回正确的数据类型Rem Rem Rem描述Rem需要初始化DRDA-AS环境以便初始Rem包（通常使用NTID的RDBCOLID）可以绑定。Rem使用DataDirect驱动程序，这些包名称看起来像Rem NULLID.DDOC510A，NULLID.DDOC510B和NULLID.DDOC510C Rem使用IBM驱动程序（libdb2.so），包名称看起来像Rem NULLID.SYSTAT和NULLID.SYSshyxx（其中s是L或S中的一个，Rem h是H或N中的一个，y是1,2,3或4并且Rem xx在00到FF中是somwhere）Rem此外，各个列必须是TYPEMAPped  - 它们的正常Rem属性必须改变。Rem Rem初始包绑定应该在运行Rem脚本的id下完成。也就是说，如果我们在xxxx的Oracle ID Rem下运行此脚本，那么通过ODBC驱动程序的初始连接应该是使用相同ID的Rem，即xxxx。Rem Rem NOTES Rem使用IBM驱动程序时，以下内容是相关的：libdb2.so ...Rem请注意，jdbcbinder Rem进程（DB2 / LUW中的db2jdbcbinder）生成的正常软件包集定义了包含Rem SYSSTAT，SYSLNmnn和SYSLHmnn等名称的软件包。因此，在DB2 / LUW上运行Rem jdbcbinder指定在此脚本的提示Rem中接受的Oracle Id之前，需要通知DRDA-AS该id具有Rem所需的权限，即在NULLID Rem模式中创建任何包。这是我们在这里所做的一部分。Rem Rem此脚本只能由能够使用Rem DRASAS_ADMIN_ROLE的用户运行，该DRDAAS_ADMIN_ROLE必须授予用户;此Rem角色必须通过主动执行SET ROLE DRDAAS_ADMIN_ROLE设置为默认ROLE或Rem来激活。 SET ECHO ON SET FEEDBACK 1 SET NUMWIDTH 10 SET LINESIZE 80 SET TRIMSPOOL ON SET TAB OFF SET PAGESIZE 100 SET SERVEROUTPUT ON SHOW USER / *即使DRDAAS_ADMIN_ROLE不是* / / * DEFAULT角色之一，但以下情况仍然有效授予运行此脚本的用户。* / / *（为用户设置DEFAULT ROLE的先决条件是用户* / / *已被授予ROLE）。* / SET ROLE DRDAAS_ADMIN_ROLE;提示输入将在其下创建初始包BIND的OracleID提示如果需要，请使用引号（'）。接受OracleID定义BindID =＆OracleID提示输入包绑定的默认集合ID（通常为NULLID）提示如果需要，请使用引号（'）。接受DefaultCollection定义DfltCollid =＆DefaultCollection声明id_passed CONSTANT VARCHAR2（128）：='&amp;&amp; BindId'; collid_passed CONSTANT VARCHAR2（128）：='&amp;&amp; DfltCollid'; id_to_use VARCHAR2（128）; collid_to_use VARCHAR2（128）; id_len PLS_INTEGER; collid_len PLS_INTEGER;引用CONSTANT CHAR：='''';开始id_len：= LENGTH（id_passed）; collid_len：= LENGTH（collid_passed）;如果SUBSTR（id_passed，1,1）=引用AND SUBSTR（id_passed，id_len，1）=引用THEN / *使用完全相同的传递* / id_to_use：= SUBSTR（id_passed，2，id_len  -  2）; ELSE id_to_use：= UPPER（id_passed）;万一;如果SUBSTR（collid_passed，1,1）=引用AND SUBSTR（collid_passed，collid_len，1）= quote THEN / *使用与传递完全相同的集合ID * / collid_to_use：= SUBSTR（collid_passed，2，collid_len-2）; ELSE collid_to_use：= UPPER（collid_passed）;万一; - 以下部分与所有DB2版本相关 -  ==================================== =====================  - 指定用户的id将具有任何包的所有权限 -  RDBCOLID = collid_to_use DBMS_DRDAAS_ADMIN.GRANT_PRIVILEGE（DBMS_DRDAAS_ADMIN.ALL_PRIVILEGE， collid_to_use，'*'，id_to_use）;承诺; - 如果您可能希望指定的id在rcbcolid = SCOTT中创建包，那么您需要执行以下操作： -  DBMS_DRDAAS_ADMIN.GRANT_PRIVILEGE（DBMS_DRDAAS_ADMIN.ALL_PRIVILEGE， - 'SCOTT'，'*'，id_to_use）; - 承诺; - 类型地图......-   -  collid_to_use模式中任何包中的“COUNT（*）”列的“type”应为INTEGER  -  General“COUNT（*）”case DBMS_DRDAAS_ADMIN.SET_TYPEMAP（collid_to_use，'*'，'COUNT（ *）'，'NUMBER = INTEGER'）; -  ================================================ ==  - 以下部分仅与DB2 / zOS相关 -  ================================== ================  - 要使用DB2 z / OS SPUFI作为DRDAAS，给定的oracle-id必须能够 - 在DSNESPCS和DSNESPRR模式中定义包 -  -  DB2 z / OS SPUFI包DBMS_DRDAAS_ADMIN.GRANT_PRIVILEGE（DBMS_DRDAAS_ADMIN.ALL_PRIVILEGE，'DSNESPCS'，'*'，id_to_use）; DBMS_DRDAAS_ADMIN.GRANT_PRIVILEGE（DBMS_DRDAAS_ADMIN.ALL_PRIVILEGE，'DSNESPRR'，'*'，id_to_use）;承诺; -  ================================================ ======================  -  DB2 z / OS的特定DataDirect ODBC包发现查询 - 访问collid_to_use时。DDOC510A包， - “列”MAX（SECTNO）引用表SYSIBM.SYSPACKSTMT（这是Oracle中的一个数字）应该被描述为一个SMALLINT到 - 应用程序DBMS_DRDAAS_ADMIN.SET_TYPEMAP（collid_to_use，'DDOC510A'， 'SYSIBM.SYSPACKSTMT：MAX（SECTNO）'，'NUMBER = SMALL'）; - 与上面相同，但是对于包collorder_to_use。DDOC510B DBMS_DRDAAS_ADMIN.SET_TYPEMAP（collid_to_use，'DDOC510B'，'SYSIBM.SYSPACKSTMT：MAX（SECTNO）'，'NUMBER = SMALL'）; - 访问collid_to_use时。DDOC510A包， - “列”COUNT（DISTINCT（NAME））引用表SYSIBM.SYSPACKSTMT  - （这是Oracle中的一个数字）应该被描述为SMALLINT  - 应用程序DBMS_DRDAAS_ADMIN.SET_TYPEMAP（collid_to_use，' DDOC510A'，'SYSIBM.SYSPACKSTMT：COUNT（DISTINCT（NAME））'，'NUMBER = INTEGER'）; - 与上面相同，但是对于包collorder_to_use。DDOC510B DBMS_DRDAAS_ADMIN.SET_TYPEMAP（collid_to_use，'DDOC510B'，'SYSIBM.SYSPACKSTMT：COUNT（DISTINCT（NAME））'，'NUMBER = INTEGER'）;承诺; -  ================================================ ======================  -  DB2 z / OS的特定DataDirect JDBC包发现查询 - 访问collid_to_use时。DDJC360B包，“列” -  COUNT（*） -  1引用表SYSIBM.SYSPACKSTMT（这是Oracle中的数字）应该被描述为应用程序DBMS_DRDAAS_ADMIN.SET_TYPEMAP的整数（collid_to_use，'DDJC360B'， 'SYSIBM.SYSPACKSTMT：COUNT（*） -  1'，'NUMBER = INTEGER'）; - 访问collid_to_use时。DDJC360B包，“列” -  COUNT（*） -  1引用表SYSIBM.SYSPACKSTMT（可能在Oracle术语中描述为NUMBER（0，-127））将列描述为INTEGER  - 应用程序。DBMS_DRDAAS_ADMIN.SET_TYPEMAP（collid_to_use，'DDJC360B'，'SYSIBM.SYSPACKSTMT：COUNT（*） -  1'，'NUMBER（0，-127）= INTEGER'）;承诺; -  ================================================ ==  - 以下部分仅与DB2 / luw相关 -  ================================== ================  -  ================================ ======================================  -  DB2 / LUW的特定DataDirect ODBC包发现查询DBMS_DRDAAS_ADMIN.SET_TYPEMAP（collid_to_use，'DDOC510A'，'SYSIBM.SYSPLAN：MIN（TOTALSECT）'，'NUMBER = SMALL'）; DBMS_DRDAAS_ADMIN.SET_TYPEMAP（collid_to_use，'DDOC510A'，'SYSIBM.SYSPLAN：COUNT（*）'，'NUMBER = INTEGER'）; -  DBMS_DRDAAS_ADMIN.SET_TYPEMAP（collid_to_use，'DDOC510A'， - 'MIN（TOTALSECT）'，'NUMBER = SMALL'）;承诺; -  ================================================ ==  - 以下部分仅与DB2 / iOS相关 -  ================================== ================  - 目前空着！结束; /</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="DRDAS677"></a><div class="props_rev_3"><a id="GUID-D47A692B-4DED-4A49-B846-1B8BCEE085C4" name="GUID-D47A692B-4DED-4A49-B846-1B8BCEE085C4"></a><h3 id="DRDAS-GUID-D47A692B-4DED-4A49-B846-1B8BCEE085C4" class="sect3">drdasqtt_translator_setup.sql</h3>
               <div>
                  <div class="section">
                     <p></p><pre class="oac_no_warn" dir="ltr">Rem drdasqtt_translator_setup.sql Rem Rem版权所有（c）2012，Oracle和/或其附属公司。版权所有。Rem Rem NAME Rem drdasqtt_translator_setup.sql  - 用于设置Rem外部SQL转换器的通用脚本Rem Rem Rem描述Rem此脚本可用于设置任何外部SQL转换器。Rem一些翻译，例如BableFish，可能需要额外的自定义。Rem For BabelFish，包括Rem指纹翻译的源/目标SQL文本（将被插入到Rem DBA_SQL_TRANSLATIONS中）。Rem Rem NOTES Rem应该运行“/ as sysdba”Rem SET ECHO ON SET FEEDBACK 1 SET NUMWIDTH 10 SET LINESIZE 80 SET TRIMSPOOL ON SET TAB OFF SET PAGESIZE 100 SET SERVEROUTPUT ON show user Prompt输入架构，其中SQL Translator Interface Package将同时创建提示将加载第三方SQL转换器（通常是SYSIBM）。接受TRANS_PKG_SCHEMA_提示'SQL转换器接口包架构：'DEFINE TRANSLATOR_PACKAGE_SCHEMA =＆TRANS_PKG_SCHEMA_提示输入SQL转换器接口包的非限定名称接受TRANS_PKG_NAME_提示'SQL转换器接口包名称：'DEFINE TRANSLATOR_PACKAGE_NAME =＆TRANS_PKG_NAME_提示输入转换配置文件将在其中的架构已创建：接受TRANS_PROFILE_SCHEMA_提示'翻译配置文件架构：'DEFINE TRANS_PROFILE_SCHEMA =＆TRANS_PROFILE_SCHEMA_提示输入翻译配置文件的非限定名称：接受TRANS_PROFILE_NAME_提示'翻译配置文件名称：'DEFINE TRANS_PROFILE_NAME =＆TRANS_PROFILE_NAME_提示输入翻译人员的“语言”类型：C ，java等接受TRANS_LANG_提示'翻译语言：'DEFINE TRANS_LANG =＆TRANS_LANG_提示输入第三方SQL转换程序对象的名称;提示它们应该通过rdbms / drdaas / jlib /来提供。提示如果有多个对象，请将整个集提示符括在四个引号中，例如''''object_a object_b''''。接受EXTERNAL_CODE_提示'SQL转换程序对象：'DEFINE EXTERNAL_CODE ='''＆EXTERNAL_CODE_'''DEFINE EXTERNAL_CODE提示在其中一个提示输入的SQL转换程序对象中输入“translateSQL”条目的签名：接受CALLOUT_TRANSLATE_SQL_提示符' translateSQL的条目：'DEFINE CALLOUT_TRANSLATE_SQL ='''＆CALLOUT_TRANSLATE_SQL_'''提示在其中一个提示输入的SQL转换器对象中输入'translateError'条目的签名接受CALLOUT_TRANSLATE_ERROR_提示'转发出错的错误：'DEFINE CALLOUT_TRANSLATE_ERROR ='' '＆CALLOUT_TRANSLATE_ERROR_'''Rem创建SQL转换器接口包...创建或替换包&amp;&amp; TRANSLATOR_PACKAGE_SCHEMA .. &amp;&amp; TRANSLATOR_PACKAGE_NAME作为过程translate_sql（clob中的sql_text，chrome_text out clob）; procedure translate_error（binary_integer中的error_code，binary_codeger，translate_codestate out varchar2）;结束; / show errors声明COMP_ERROR异常;编译指示EXCEPTION_INIT（COMP_ERROR，-24344）; translateSQLcode CONSTANT VARCHAR2（1024）：= &amp;&amp; CALLOUT_TRANSLATE_SQL; translateErrorcode CONSTANT VARCHAR2（1024）：= &amp;&amp; CALLOUT_TRANSLATE_ERROR; translateSQLToUse VARCHAR2（1024）; translateErrorToUse VARCHAR2（1024）;在NUMBER;引用CONSTANT CHAR：=''''; my_cursor BINARY_INTEGER; n BINARY_INTEGER;我是BINARY_INTEGER; package_body VARCHAR2（1024）; / *我们不能使用绑定变量来替换包体声明中* / * *过程的“name”部分; “名称”部分必须是* / / *单引号字符串！阿格哈！* / package_body_1 VARCHAR2（400）：='创建或替换包'|| 'body &amp;&amp; TRANSLATOR_PACKAGE_SCHEMA .. &amp;&amp; TRANSLATOR_PACKAGE_NAME为'|| 'procedure translate_sql（clob中的sql_text，'||'translated_text out clob）为'|| 'language &amp;&amp; TRANS_LANG'|| '名称 '''; package_body_2 VARCHAR2（400）：=''';' || 'procedure translate_error（binary_integer中的error_code，'||'translated_code out binary_integer，'||'translated_sqlstate out varchar2）as'|| 'language &amp;&amp; TRANS_LANG'|| '名称 '''; package_body_end VARCHAR2（10）：=''';结束;'; begin ln：= LENGTH（translateSQLcode）; IF SUBSTR（translateSQLCode，1,1）= quote AND SUBSTR（translateSQLCode，ln，1）= quote THEN translateSQLToUse：= SUBSTR（translateSQLCode，2，ln-2）; ELSE translateSQLToUse：= translateSQLCode;万一; ln：= LENGTH（translateErrorcode）; IF SUBSTR（translateErrorCode，1,1）= quote AND SUBSTR（translateErrorCode，ln，1）= quote THEN translateErrorToUse：= SUBSTR（translateErrorCode，2，ln-2）; ELSE translateErrorToUse：= translateErrorCode;万一; my_cursor：= DBMS_SQL.OPEN_CURSOR; package_body：= package_body_1 || translateSQLToUse || package_body_2 || translateErrorToUse || package_body_end; BEGIN DBMS_SQL.PARSE（my_cursor，package_body，DBMS_SQL.NATIVE）; COMP_ERROR那么EXMSPTION DBMS_OUTPUT.PUT_LINE（'SQLCODE ='|| SQLCODE ||'：'|| SQLERRM）;结束; n：= DBMS_SQL.EXECUTE（my_cursor）; DBMS_SQL.CLOSE_CURSOR（my_cursor）;结束; / show errors Rem加载Java代码Rem CALL DBMS_JAVA.LOADJAVA（' -  definer -genmissing -schema SYSIBM Rem rdbms / drdaas / jlib / DBTooSQLAPI.jar rdbms / drdaas / jlib / DBTooTranslator.class'，Rem'（（* SYSIBM） （* 上市）（* -））'）; Rem DBTooSQLAPI.jar和DBTooSQLTranslator.class是虚构的名称set showoutput on show user Rem加载指定的.class和.jar对象...声明extcode VARCHAR2（4096）：= &amp;&amp; EXTERNAL_CODE; real_extcode VARCHAR2（4096）; first_parm_first_part VARCHAR2（128）：='-definer -genmissing -schema &amp;&amp; TRANSLATOR_PACKAGE_SCHEMA'; first_parm VARCHAR2（4096）;在NUMBER; begin ln：= LENGTH（extcode）; / *我们可能有一个开始和结束的aprostrophe  -  * / / *我们需要删除它们* / IF SUBSTR（extcode，1,1）=''''和SUBSTR（extcode，ln，1）=''' '那么real_extcode：= SUBSTR（extcode，2，ln-2）; ELSE real_extcode：= extcode;万一; first_parm：= first_parm_first_part || ''|| real_extcode; /*DBMS_OUTPUT.PUT_LINE('First parm'|| first_parm）; * / DBMS_JAVA.LOADJAVA（first_parm，'（（* &amp;&amp; TRANSLATOR_PACKAGE_SCHEMA）（* PUBLIC）（*  - ））'）;结束; / GRANT EXECUTE ON &amp;&amp; TRANSLATOR_PACKAGE_SCHEMA .. &amp;&amp; TRANSLATOR_PACKAGE_NAME to PUBLIC; GRANT创建SQL TRANSLATION PROFILE到&amp;&amp; TRANS_PROFILE_SCHEMA; GRANT使用ADMIN OPTION将任何SQL转换为&amp;&amp; TRANS_PROFILE_SCHEMA; CALL DBMS_SQL_TRANSLATOR.DROP_PROFILE（'&amp;&amp; TRANS_PROFILE_SCHEMA .. &amp;&amp; TRANS_PROFILE_NAME'）; CALL DBMS_SQL_TRANSLATOR.CREATE_PROFILE（'&amp;&amp; TRANS_PROFILE_SCHEMA .. &amp;&amp; TRANS_PROFILE_NAME'）; begin dbms_sql_translator.set_attribute（'&amp;&amp; TRANS_PROFILE_SCHEMA .. &amp;&amp; TRANS_PROFILE_NAME'，dbms_sql_translator.attr_translator，'&amp;&amp; TRANSLATOR_PACKAGE_SCHEMA .. &amp;&amp; TRANSLATOR_PACKAGE_NAME'）; dbms_sql_translator.set_attribute（'&amp;&amp; TRANS_PROFILE_SCHEMA .. &amp;&amp; TRANS_PROFILE_NAME'，dbms_sql_translator.attr_translate_new_sql，dbms_sql_translator.attr_value_true）;结束; / GRANT ALL ON SQL TRANSLATION PROFILE &amp;&amp; TRANS_PROFILE_SCHEMA ..&amp;&amp; TRANS_PROFILE_NAME TO &amp;&amp; TRANSLATOR_PACKAGE_SCHEMA;授予使用SQL翻译简档&amp;&amp; TRANS_PROFILE_SCHEMA ..&amp;&amp; TRANS_PROFILE_NAME TO DRDAAS_USER_ROLE;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="DRDAS678"></a><div class="props_rev_3"><a id="GUID-EFEFE8E4-AC5C-4FF8-BA26-0BA0912EA463" name="GUID-EFEFE8E4-AC5C-4FF8-BA26-0BA0912EA463"></a><h3 id="DRDAS-GUID-EFEFE8E4-AC5C-4FF8-BA26-0BA0912EA463" class="sect3">drdasqt_set_profile_dd.sql</h3>
               <div>
                  <div class="section">
                     <p></p><pre class="oac_no_warn" dir="ltr">Rem drdasqt_set_profile_dd.sql Rem Rem版权所有（c）2012，Oracle和/或其附属公司。版权所有。Rem Rem NAME Rem drdasqt_set_profile_dd.sql  - 为每个Rem the DataDirect（dd）包设置一个sqllangprofile。Rem SET ECHO ON SET FEEDBACK 1 SET NUMWIDTH 10 SET LINIZIZE 80 SET TRIMSPOOL ON SET TAB OFF SET PAGESIZE 100 Rem将提示您输入配置文件名称。Rem必须在可以访问DRDAAS_ADMIN_ROLE角色的ID下运行。Rem在SET ROLE DRDAAS_ADMIN_ROLE上设置serveroutput上设置echo;提示输入用于DataDirect包的（限定的）配置文件名称接受SQLPROFILENAME定义PROFILE_NAMEX =＆SQLPROFILENAME提示输入默认的包集合（通常为NULLID）提示使用引号（'）如果需要接受DefaultCollection定义PACKAGE_COLLECTIONX =＆DefaultCollection声明类型FIRST_CHAR是VARRAY（4 ）CHAR（1）; TYPE SECOND_CHAR是CHAR（1）的VARRAY（3）; first_chr FIRST_CHAR：= FIRST_CHAR（）; second_chr SECOND_CHAR：= SECOND_CHAR（）; package_name VARCHAR2（128）; profile_name CONSTANT VARCHAR2（128）：='&amp;&amp; PROFILE_NAMEX'; package_collection_as_passed CONSTANT VARCHAR2（128）：='&amp;&amp; PACKAGE_COLLECTIONX'; package_collection VARCHAR2（128）; cmd VARCHAR2（255）;引用CONSTANT CHAR：='''';在BINARY_INTEGER; begin ln：= LENGTH（package_collection_as_passed）; IF SUBSTR（package_collection_as_passed，1,1）= quote AND SUBSTR（package_collection_as_passed，ln，1）= quote THEN / *完全按照传递使用package_collection * / package_collection：= SUBSTR（package_collection_as_passed，2，ln  -  2）; ELSE package_collection：= UPPER（package_collection_as_passed）;万一; first_chr。（4）延伸; first_chr（1）：='C'; first_chr（2）：='S'; first_chr（3）：='U'; first_chr（4）：='R'; second_chr。（3）延伸; second_chr（1）：='A'; second_chr（2）：='B'; second_chr（3）：='C'; FOR f IN 1..first_chr。CO IN循环为1 in ..second_chr。COUNT LOOP package_name：='DDO'|| first_chr（f）|| '510'|| second_chr（一个或多个）; cmd：='DBMS_DRDAAS_ADMIN.SET_PROFILE（'|| package_collection ||'，'|| package_name ||'，'|| profile_name ||'）'; DBMS_OUTPUT.PUT_LINE（'做'|| cmd）; DBMS_DRDAAS_ADMIN.SET_PROFILE（package_collection，package_name，profile_name）;结束循环;结束循环;结束; /</pre></div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
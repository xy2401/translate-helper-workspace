<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>UNREGISTER</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Backup and Recovery Reference"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Backup and Recovery Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-backup-and-recovery-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-09T19:31:58-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96242-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="TRANSPORT-TABLESPACE.html" title="Previous" type="text/html"></link>
      <link rel="next" href="UPGRADE-CATALOG.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery Reference"></meta>
    <meta name="dcterms.isVersionOf" content="RCMRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="TRANSPORT-TABLESPACE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="UPGRADE-CATALOG.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">备份和恢复参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="rman-commands-recover-to-validate.html" property="item" typeof="WebPage"><span property="name">RMAN命令：RECOVER to VALIDATE</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">UNREGISTER</li>
            </ol>
            <a id="GUID-CFC11D2B-0F77-4253-87E6-483C2C4452BB" name="GUID-CFC11D2B-0F77-4253-87E6-483C2C4452BB"></a><a id="RCMRF90387"></a><a id="RCMRF90388"></a><a id="RCMRF90389"></a><a id="RCMRF90390"></a><a id="RCMRF191"></a>
            
            <h2 id="RCMRF-GUID-CFC11D2B-0F77-4253-87E6-483C2C4452BB" class="sect2"><span class="enumeration_section">3.23</span> UNREGISTER</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-CFC11D2B-0F77-4253-87E6-483C2C4452BB__GUID-D727AE95-FD14-4578-8CAF-679D026D82A7">目的</p>
                  <p>使用<code class="codeph">UNREGISTER</code>命令从恢复目录中删除一个或多个已注册数据库的RMAN元数据。
                  </p>
                  <div class="infoboxnotealso" id="GUID-CFC11D2B-0F77-4253-87E6-483C2C4452BB__GUID-1F80333F-B5C0-473D-8EF3-C45252BC1A54">
                     <p class="notep1">也可以看看：</p>
                     <p><code class="codeph"><a href="DROP-DATABASE.html#GUID-6553DD22-C68F-465C-B45D-FBD09D7E30CF">DROP DATABASE</a></code>了解如何删除数据库并使用一个命令取消注册</p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-CFC11D2B-0F77-4253-87E6-483C2C4452BB__GUID-4F8764DF-C7C2-4C9C-BCF7-D05ADB80B0AC">先决条件</p>
                  <p>仅在RMAN提示符下执行此命令。RMAN必须连接到恢复目录。要取消注册的数据库当前必须在此目录中注册。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-CFC11D2B-0F77-4253-87E6-483C2C4452BB__GUID-8E37BE7B-913A-4A43-814C-AE8BE82B72C7">使用说明</p>
                  <p>当目标数据库配置为创建零数据丢失恢复设备（通常称为恢复设备）的备份时，无法使用<code class="codeph">UNREGISTER</code>命令。在这种情况下，请使用<code class="codeph">DBMS_RA.DELETE_DB</code>过程从Recovery Appliance取消注册数据库。
                  </p>
                  <div class="infoboxnotealso" id="GUID-CFC11D2B-0F77-4253-87E6-483C2C4452BB__GUID-07BE65ED-DD7D-4251-930F-9315C3ACC68E">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/rcmrf&amp;id=AMAGD-GUID-A1B5ACBD-1B8B-42F2-B8FE-772F0949481F" target="_blank"><span class="italic">零数据丢失恢复设备管理员指南</span></a> ，了解有关<code class="codeph">DBMS_RA.DELETE_DB</code>过程的信息</p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-CFC11D2B-0F77-4253-87E6-483C2C4452BB__GUID-73373557-5011-400B-BDDD-02E2D38028B1">句法</p>
                  <p><span class="bold"><span class="italic">取消注册</span> :: =</span></p>
                  <div class="figure" id="GUID-CFC11D2B-0F77-4253-87E6-483C2C4452BB__GUID-40E9A62F-AC59-424F-905A-6CF74C23B150"><img src="img/unregister.gif" alt="unregister.eps的描述如下" title="unregister.eps的描述如下" longdesc="img_text/unregister.html"><br><a href="img_text/unregister.html">插图说明unregister.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-CFC11D2B-0F77-4253-87E6-483C2C4452BB__GUID-6F23C3B1-9143-4AFD-B8F2-2ADF71F51704">语义</p>
                  <div class="tblformalwide" id="GUID-CFC11D2B-0F77-4253-87E6-483C2C4452BB__GUID-07936F18-8A75-49A6-8447-4C4F5EDA6C65">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Describes UNREGISTER command parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="29%" id="d104920e158">语法元素</th>
                              <th align="left" valign="bottom" width="71%" id="d104920e161">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d104920e166" headers="d104920e158 ">
                                 <p><code class="codeph">数据库</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d104920e166 d104920e161 ">
                                 <p>指定要注销的主数据库。RMAN取消注册主数据库及其任何关联的备用数据库（请参阅<a href="UNREGISTER.html#GUID-CFC11D2B-0F77-4253-87E6-483C2C4452BB__CHDEGBCH">示例3-80</a> ）。
                                 </p>
                                 <p>如果未指定<span class="italic"><code class="codeph">database_name</code></span> ，则RMAN必须使用以下方法之一标识数据库：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>如果RMAN作为<code class="codeph">TARGET</code>连接到数据库，则RMAN会注销目标数据库和任何关联的备用数据库。
                                       </p>
                                    </li>
                                    <li>
                                       <p>如果RMAN未作为<code class="codeph">TARGET</code>连接到数据库，或者<code class="codeph">TARGET</code>数据库的名称在恢复目录中不唯一，则RMAN使用<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">DBID</code>命令中指定的值（请参阅<a href="UNREGISTER.html#GUID-CFC11D2B-0F77-4253-87E6-483C2C4452BB__CHDBHGIC">示例3-81</a> ）。RMAN使用此DBID取消注册所有数据库。</p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d104920e208" headers="d104920e158 ">
                                 <p><code class="codeph">   </code><span class="italic"><code class="codeph">database_name</code></span></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d104920e208 d104920e161 ">
                                 <p>指定要取消注册的主数据库的名称。</p>
                                 <p>此数据库名称在恢复目录中必须是唯一的。由于数据库名称是唯一的，因此不需要将RMAN连接到目标数据库或使用<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">DBID</code>命令。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d104920e229" headers="d104920e158 "><code class="codeph">DB_UNIQUE_NAME</code> <span class="italic"><code class="codeph">db_unique_name</code></span></td>
                              <td align="left" valign="top" width="71%" headers="d104920e229 d104920e161 ">
                                 <p>删除<span class="italic"><code class="codeph">db_unique_name</code></span>指定的Data Guard数据库的备份元数据以外的所有元数据。
                                 </p>
                                 <p>指定的数据库可以是主数据库或备用数据库，但通常使用此子句取消注册备用数据库（请参阅<a href="UNREGISTER.html#GUID-CFC11D2B-0F77-4253-87E6-483C2C4452BB__CHDJBIBI">示例3-82</a> ）。
                                 </p>
                                 <p>仅当RMAN连接到已装入或打开的目标数据库或已运行<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">DBID</code>命令时，才能使用此子句。通常，目标数据库不是您要取消注册的数据库。例如，您可以将<code class="codeph">TARGET</code>连接到<code class="codeph">prod1</code>并使用<code class="codeph">DB_UNIQUE_NAME</code>取消注册<code class="codeph">standby1</code> 。<code class="codeph">SET DBID</code> DBID中使用的<code class="codeph">SET DBID</code>与主数据库及其关联的备用数据库相同。
                                 </p>
                                 <p>数据库的备份使<code class="codeph">DB_UNIQUE_NAME</code>与恢复目录中的备份文件名相关联。取消注册数据库时，这些备份文件的数据库名称将标记为<code class="codeph">null</code> 。您可以使用<code class="codeph"><a href="CHANGE.html#GUID-961151C6-EEFF-4347-AF1E-93EFDD5F5BF2">CHANGE</a></code>将数据库名称与这些文件关联<code class="codeph">...RESET DB_UNIQUE_NAME</code>命令。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d104920e289" headers="d104920e158 ">
                                 <p><code class="codeph">包括备份</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d104920e289 d104920e161 ">
                                 <p>删除<span class="italic"><code class="codeph">db_unique_name</code></span>指定的数据库的备份元数据。
                                 </p>
                                 <p><span class="bold">注意：</span>取消注册备用数据库时，不能使用此子句。
                                 </p>
                                 <p><span class="bold">注意：</span> <code class="codeph">UNREGISTER</code>命令不会删除物理备份。如果要删除物理备份，请先使用<code class="codeph"><a href="DELETE.html#GUID-FB4EAC69-4978-42F7-8B09-77C6736188B3">DELETE</a></code>命令删除它们，然后使用<code class="codeph">INCLUDING BACKUPS</code>选项执行<code class="codeph">UNREGISTER</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="29%" id="d104920e323" headers="d104920e158 ">
                                 <p><code class="codeph">NOPROMPT</code></p>
                              </td>
                              <td align="left" valign="top" width="71%" headers="d104920e323 d104920e161 ">
                                 <p>在取消注册数据库之前不会提示确认。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-CFC11D2B-0F77-4253-87E6-483C2C4452BB__GUID-51D14B96-5BAF-45AB-AF94-C742F7AA00C1">例</p>
               </div>
               <!-- class="section" -->
               <div class="example" id="GUID-CFC11D2B-0F77-4253-87E6-483C2C4452BB__CHDEGBCH">
                  <p class="titleinexample">示例3-80取消注册主数据库及其备用数据库</p>
                  <p>假设主数据库<code class="codeph">prod</code>具有关联的备用数据库<code class="codeph">dgprod3</code>和<code class="codeph">dgprod4</code> 。在此示例中，将RMAN连接到目标数据库<code class="codeph">prod</code> ，其数据库名称在恢复目录中是唯一的，并取消注册它。RMAN从目录中删除有关<code class="codeph">prod</code> ， <code class="codeph">dgprod3</code>和<code class="codeph">dgprod4</code>所有元数据。样本输出包括在内。
                  </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; CONNECT TARGET /连接到目标数据库：PROD（DBID = 1627709917）RMAN&gt; CONNECT CATALOG rco @ catdb恢复目录数据库密码：连接到恢复目录数据库的<span class="italic">密码</span> RMAN&gt; UNREGISTER DATABASE NOPROMPT;数据库名称为“PROD”，DBID为1627709917数据库未从恢复目录中注册RMAN&gt; LIST DB_UNIQUE_NAME ALL; RMAN&gt;</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-CFC11D2B-0F77-4253-87E6-483C2C4452BB__CHDBHGIC">
                  <p class="titleinexample">示例3-81取消注册目录中不唯一的数据库</p>
                  <p>假设在恢复目录中注册的两个数据库名称为<code class="codeph">prod</code> 。您的目标是取消注册具有DBID <code class="codeph">28014364</code>的<code class="codeph">prod</code>数据库。由于多个名为<code class="codeph">prod</code>数据库已在恢复目录中注册，并且由于RMAN未作为<code class="codeph">TARGET</code>连接到<code class="codeph">28014364</code>数据库（已从文件系统中删除），因此在<code class="codeph">UNREGISTER DATABASE</code>之前运行<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">DBID</code> 。此示例包括示例输出。
                  </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; CONNECT CATALOG rco @ catdb恢复目录数据库密码：连接到恢复目录数据库的<span class="italic">密码</span> RMAN&gt; SET DBID 28014364;执行命令：SET DBID数据库名称为“PROD”，DBID为28014364 RMAN&gt; UNREGISTER DATABASE;您真的要取消注册数据库（输入YES或NO）吗？<span class="bold">YES</span>数据库从恢复目录中注销</pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-CFC11D2B-0F77-4253-87E6-483C2C4452BB__CHDJBIBI">
                  <p class="titleinexample">示例3-82取消注册备用数据库</p>
                  <p>假设主数据库<code class="codeph">prod</code>具有关联的备用数据库<code class="codeph">dgprod3</code>和<code class="codeph">dgprod4</code> 。您希望取消注册<code class="codeph">dgprod4</code> ，但不删除在此数据库上执行的备份的元数据，因为这些备份仍可供环境中的其他数据库使用。此示例使用<code class="codeph"><a href="SET.html#GUID-BC501B5C-4CD0-485D-AA18-27E2894024C3">SET</a></code> <code class="codeph">DBID</code>指定备用数据库的DBID，然后取消注册它（包括示例输出）：</p><pre class="oac_no_warn" dir="ltr">RMAN&gt; CONNECT CATALOG rco @ catdb恢复目录数据库密码：连接到恢复目录数据库的<span class="italic">密码</span> RMAN&gt; SET DBID 1627367554;执行命令：SET DBID数据库名称为“PROD”，DBID为1627367554 RMAN&gt; UNREGISTER DB_UNIQUE_NAME dgprod4;数据库db_unique_name是“dgprod4”，db_name是“PROD”，DBID是1627367554想要使用目标db_unique_name取消注册数据库（输入YES或NO）？具有db_unique_name的<span class="bold">YES</span>数据库dgprod4从恢复目录中取消注册</pre></div>
               <!-- class="example" -->
            </div>
         </div>
      </article>
   </body>
</html>
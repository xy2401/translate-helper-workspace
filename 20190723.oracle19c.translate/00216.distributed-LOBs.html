<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>分布式LOB</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database SecureFiles and Large Objects Developer&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database SecureFiles and Large Objects Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="securefiles-and-large-objects-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T02:58:18-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96333-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="operations-specific-to-persistent-and-temporary-LOBs.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DDL-DML-statements-with-LOBs.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SecureFiles and Large Objects Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADLOB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="operations-specific-to-persistent-and-temporary-LOBs.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DDL-DML-statements-with-LOBs.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database SecureFiles和Large Objects Developer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="getting-started.html" property="item" typeof="WebPage"><span property="name">入门</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">分布式LOB</li>
            </ol>
            <a id="GUID-7E450E86-3E4E-4714-A164-FD36B93722F6" name="GUID-7E450E86-3E4E-4714-A164-FD36B93722F6"></a>
            
            <h2 id="ADLOB-GUID-7E450E86-3E4E-4714-A164-FD36B93722F6" class="sect2"><span class="enumeration_chapter">5个</span>分布式LOB</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p>话题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="distributed-LOBs.html#GUID-9A82A4FB-6AE0-4300-BD4F-88FA31DE5C91">使用远程LOB</a></p>
                     </li>
                     <li>
                        <p><a href="distributed-LOBs.html#GUID-E2252E8F-7086-45C9-82A9-A0CB637F1777">远程表中具有LOB的SQL语义</a></p>
                     </li>
                     <li>
                        <p><a href="distributed-LOBs.html#GUID-3F146243-4F26-4B50-AE8E-FC292BD22130">在PL / SQL中使用远程LOB</a></p>
                     </li>
                     <li>
                        <p><a href="distributed-LOBs.html#GUID-F378F295-1FC9-4081-95C4-91EC740719EA">使用带有OCILOB API的远程定位器</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div>
            <div class="sect2"><a id="GUID-9A82A4FB-6AE0-4300-BD4F-88FA31DE5C91" name="GUID-9A82A4FB-6AE0-4300-BD4F-88FA31DE5C91"></a><h3 id="ADLOB-GUID-9A82A4FB-6AE0-4300-BD4F-88FA31DE5C91" class="sect3">使用远程LOB</h3>
               <div>
                  <p></p>
                  <p>您可以通过以下方式在远程表中使用LOB数据：</p>
                  <div class="p">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>直接引用使用数据库链接访问的远程表（远程LOB列）中的LOB列。</p>
                        </li>
                        <li>
                           <p>选择远程LOB列到本地LOB定位器变量（远程定位器）</p>
                        </li>
                     </ul>
                  </div>
                  <p>话题</p>
                  <div class="p">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="distributed-LOBs.html#GUID-E9EA88B2-C8E8-48A0-BCE3-CA0FEB24101A">使用远程LOB列</a></p>
                        </li>
                        <li>
                           <p><a href="distributed-LOBs.html#GUID-B6956FD3-20E0-45D7-8E3D-C415324C49C4">使用远程定位器</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADLOB45148"></a><div class="props_rev_3"><a id="GUID-E9EA88B2-C8E8-48A0-BCE3-CA0FEB24101A" name="GUID-E9EA88B2-C8E8-48A0-BCE3-CA0FEB24101A"></a><h4 id="ADLOB-GUID-E9EA88B2-C8E8-48A0-BCE3-CA0FEB24101A" class="sect4">使用远程LOB列</h4>
                  <div>
                     <div class="section">
                        <p>通过以下方式支持远程LOB：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="distributed-LOBs.html#GUID-DF486934-96D1-448B-99D5-9E129B9F8624">将表创建为select或insert as select</a></p>
                           </li>
                           <li>
                              <p><a href="distributed-LOBs.html#GUID-BD5EB0E6-FAA0-42A0-A25B-FC8C64867A40">返回标量的远程LOB上的函数</a></p>
                           </li>
                           <li>
                              <p><a href="distributed-LOBs.html#GUID-88626227-A3F1-460B-9192-D6644E8A051C">远程LOB的数据接口</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div class="sect4"><a id="GUID-DF486934-96D1-448B-99D5-9E129B9F8624" name="GUID-DF486934-96D1-448B-99D5-9E129B9F8624"></a><h5 id="ADLOB-GUID-DF486934-96D1-448B-99D5-9E129B9F8624" class="sect5">将表创建为select或insert as select</h5>
                     <div>
                        <p></p>
                        <div class="section">
                           <p>对于按以下方式构造的语句，只允许在选择列表中使用独立的LOB列：</p><pre class="pre codeblock"><code>CREATE TABLE t AS SELECT * FROM table1 @ remote_site; INSERT INTO SELECT * FROM table1 @ remote_site; UPDATE t SET lobcol =（SELECT lobcol FROM table1 @ remote_site）; INSERT INTO table1 @ remote_site SELECT * FROM local_table; UPDATE table1 @ remote_site SET lobcol =（SELECT lobcol FROM local_table）; DELETE FROM table1 @ remote_site <span class="italic">&lt;涉及non_lob_columns的WHERE子句&gt;</span></code></pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-BD5EB0E6-FAA0-42A0-A25B-FC8C64867A40" name="GUID-BD5EB0E6-FAA0-42A0-A25B-FC8C64867A40"></a><h5 id="ADLOB-GUID-BD5EB0E6-FAA0-42A0-A25B-FC8C64867A40" class="sect5">返回标量的远程LOB上的函数</h5>
                     <div>
                        <p></p>
                        <div class="section">
                           <p>支持具有LOB参数并返回标量数据类型的SQL和PL / SQL函数。其他SQL函数和<code class="codeph">DBMS_LOB</code> API不支持与远程LOB列一起使用。例如，支持以下语句：</p><pre class="pre codeblock"><code>CREATE TABLE选项卡AS SELECT DBMS_LOB.GETLENGTH@dbs2（clob_col）len FROM tab @ dbs2; CREATE TABLE选项卡AS SELECT LENGTH（clob_col）len FROM tab @ dbs2;</code></pre><p>但是，不支持以下语句，因为<code class="codeph">DBMS_LOB.SUBSTR</code>返回LOB：</p><pre class="pre codeblock"><code>CREATE TABLE选项卡AS SELECT DBMS_LOB.SUBSTR（clob_col）来自tab @ dbs2;</code></pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-88626227-A3F1-460B-9192-D6644E8A051C" name="GUID-88626227-A3F1-460B-9192-D6644E8A051C"></a><h5 id="ADLOB-GUID-88626227-A3F1-460B-9192-D6644E8A051C" class="sect5">远程LOB的数据接口</h5>
                     <div>
                        <div class="section">
                           <p>您可以将字符或二进制缓冲区插入远程<code class="codeph">CLOB</code>或<code class="codeph">BLOB</code> ，并选择远程<code class="codeph">CLOB</code>或<code class="codeph">BLOB</code>到字符或二进制缓冲区中，例如，使用PL / SQL：</p><pre class="pre codeblock"><code>SELECT clobcol1，type1.blobattr INTO varchar_buf1，raw_buf2 FROM table1 @ remote_site; INSERT INTO table1 @ remotesite（clobcol1，type1.blobattr）VALUES varchar_buf1，raw_buf2; INSERT INTO table1 @ remotesite（lobcol）VALUES（'test'）; UPDATE table1 SET lobcol ='xxx';</code></pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-B6956FD3-20E0-45D7-8E3D-C415324C49C4" name="GUID-B6956FD3-20E0-45D7-8E3D-C415324C49C4"></a><h4 id="ADLOB-GUID-B6956FD3-20E0-45D7-8E3D-C415324C49C4" class="sect4">使用远程定位器</h4>
                  <div>
                     <p>您可以从远程表中选择一个持久LOB定位器到一个局部变量，这可以在PL / SQL或OCI中完成。远程列可以是BLOB，CLOB或NCLOB类型。以下SQL语句是本章中具有远程LOB定位符的所有示例的基础。</p><pre class="pre codeblock"><code>CREATE TABLE lob_tab（c1 NUMBER，c2 CLOB）;</code></pre><p>在以下示例中，可以使用数据库链接<code class="codeph">db2</code>和本地<code class="codeph">CLOB</code>变量<code class="codeph">lob_var1</code>访问远程数据库中定义的表<code class="codeph">lob_tab</code> （具有<code class="codeph">CLOB</code>类型的列<code class="codeph">c2</code>和类型号的<code class="codeph">c1</code> ）。
                     </p><pre class="pre codeblock"><code>SELECT c2 INTO lob_var1 FROM lob_tab @ db2 WHERE c1 = 1; SELECT c2 INTO lob_var1 FROM lob_tab @ db2 WHERE c1 = 1 for update;</code></pre><p>在PL / SQL中，函数<code class="codeph">dbms_lob.isremote</code>可用于检查特定LOB是否属于远程表。同样，在<code class="codeph">OCI</code> ，您可以使用<code class="codeph">OCI_ATTR_LOB_REMOTE</code>的属性<code class="codeph">OCILobLocator</code>检查，如果一个特定的LOB属于远程表。例如，</p><pre class="pre codeblock"><code>IF（dbms_lob.isremote（lob_var1））那么dbms_output.put_line（'LOB定位器是远程的）ENDIF;</code></pre><div class="infoboxnotealso" id="GUID-B6956FD3-20E0-45D7-8E3D-C415324C49C4__NOTE-135-3898F14F">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../arpls/DBMS_LOB.html#ARPLS-GUID-003F7DA3-EF8D-4198-8F2E-C7AFE881A2C6" target="_blank">ISREMOTE</a>功能</p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adlob&amp;id=LNOCI-GUID-E3E231A7-00B9-42F0-B47D-A38E3F131A67" target="_blank">OCI_ATTR_LOB_REMOTE</a>属性</p>
                           </li>
                        </ul>
                     </div>
                     <p>话题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="distributed-LOBs.html#GUID-4B19C029-34D4-47D6-9869-CBCF91FFEE2C">使用本地和远程定位器作为绑定查询和远程表上的DML</a></p>
                        </li>
                        <li>
                           <p><a href="distributed-LOBs.html#GUID-E6079225-9151-42C4-9BE7-D1CCD1BA6E82">使用远程LOB定位器时的限制</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="sect4"><a id="GUID-4B19C029-34D4-47D6-9869-CBCF91FFEE2C" name="GUID-4B19C029-34D4-47D6-9869-CBCF91FFEE2C"></a><h5 id="ADLOB-GUID-4B19C029-34D4-47D6-9869-CBCF91FFEE2C" class="sect5">使用本地和远程定位器作为绑定查询和远程表上的DML</h5>
                     <div>
                        <p></p>
                        <p>对于具有绑定值的查询和DML（ <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code> ），以下四种情况是可能的。第一种情况涉及本地表和定位器，是标准的LOB功能。其他三种情况是分布式LOB功能的一部分，并在本节末尾列出了限制。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用本地定位器作为绑定值的本地表。</p>
                           </li>
                           <li>
                              <p>具有远程定位器的本地表作为绑定值</p>
                           </li>
                           <li>
                              <p>具有本地定位器的远程表作为绑定值</p>
                           </li>
                           <li>
                              <p>远程定位器作为绑定值的远程表</p>
                           </li>
                        </ul>
                        <p>将支持使用远程lob定位器作为绑定值的以下形式的查询：</p>
                        <p><code class="codeph">SELECT name FROM lob_tab @ db2 WHERE length（c1）= length（：lob_v1）;</code></p>
                        <p>在上面的查询中， <code class="codeph">c1</code>是LOB列， <code class="codeph">lob_v1</code>是远程定位器。
                        </p>
                        <p></p>
                        <p>将支持使用远程LOB定位器的以下形式的DML。这里，绑定值可以是本地或远程持久LOB定位符。</p>
                        <p><code class="codeph">更新lob_tab @ db2 SET c1 =：lob_v1;</code></p>
                        <p><code class="codeph">INSERT到lob_tab @ db2 VALUES（：1，：2）;</code></p>
                        <p></p>
                        <div class="infoboxnote" id="GUID-4B19C029-34D4-47D6-9869-CBCF91FFEE2C__GUID-827389D5-5537-4D4C-A4FA-37509729C299">
                           <p class="notep1">注意：</p>用的DML <code class="codeph">returning</code>条款不支持对标量和LOB列的远程表。
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-E6079225-9151-42C4-9BE7-D1CCD1BA6E82" name="GUID-E6079225-9151-42C4-9BE7-D1CCD1BA6E82"></a><h5 id="ADLOB-GUID-E6079225-9151-42C4-9BE7-D1CCD1BA6E82" class="sect5">使用远程LOB定位器时的限制</h5>
                     <div>
                        <p></p>
                        <p>使用远程LOB定位器时的一般限制包括：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您不能使用<code class="codeph">SELECT</code>语句将远程临时LOB定位器选择到局部变量中。例如，</p>
                              <p><code class="codeph">从lob_tab @ db2中选择substr（c2,3,1），其中c1 = 1</code></p>
                              <p>上面的查询返回错误。</p>
                           </li>
                           <li>
                              <p>索引组织表（IOT）不支持远程lob功能。尝试从远程IOT表获取定位器将导致错误。</p>
                           </li>
                           <li>
                              <p>本地数据库和远程数据库都必须是Database 12.2或更高版本。</p>
                           </li>
                           <li>
                              <p>对于分布式LOB功能， <code class="codeph">from</code>子句或<code class="codeph">where</code>子句中提到的表应该在同一个数据库中并置。如果远程定位器在<code class="codeph">where</code>子句中用作绑定变量，则它们应属于同一个远程数据库。您不能将DB1中的一个定位器和DB2中的另一个定位器用作绑定变量。
                              </p>
                           </li>
                           <li>
                              <p>并置表或定位符使用相同的数据库链接。可以有2个不同的DB链接指向同一个数据库。在下面的示例中， <code class="codeph">dblink1</code>和<code class="codeph">dblink2</code>指向同一个远程数据库，但可能使用不同的身份验证方法。Oracle数据库不支持此类操作。
                              </p>
                              <p><code class="codeph">从tab2 @ dblink2插入tab1 @ dblink1 SELECT *;</code></p>
                           </li>
                           <li>
                              <p>绑定值应与列LOB类型的LOB类型相同。例如， <code class="codeph">NCLOB</code>定位符应绑定到<code class="codeph">NCLOB</code>列， <code class="codeph">CLOB</code>定位符应绑定到<code class="codeph">CLOB</code>列。远程LOB情况下不支持<code class="codeph">NCLOB</code>和<code class="codeph">CLOB</code>类型之间的隐式转换。
                              </p>
                           </li>
                           <li>
                              <p>当涉及远程定位器或涉及的表是远程表时，不支持带有数组绑定的DML（ <code class="codeph">INSERT</code> s / <code class="codeph">UPDATE</code> ）</p>
                           </li>
                           <li>
                              <p>您无法从远程表中选择<code class="codeph">BFILE</code>列到本地变量。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-E2252E8F-7086-45C9-82A9-A0CB637F1777" name="GUID-E2252E8F-7086-45C9-82A9-A0CB637F1777"></a><h3 id="ADLOB-GUID-E2252E8F-7086-45C9-82A9-A0CB637F1777" class="sect3">远程表中具有LOB的SQL语义</h3>
               <div>
                  <p></p>
                  <p>话题：</p>
                  <div class="p">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="distributed-LOBs.html#GUID-B31CB736-B03F-4333-B5E2-EEF883D7D3E5">远程LOB和BFILE的内置函数</a></p>
                        </li>
                        <li>
                           <p><a href="distributed-LOBs.html#GUID-8AD11782-080D-4772-BF8E-1F3AF2652551">将远程定位器传递给内置SQL函数</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-B31CB736-B03F-4333-B5E2-EEF883D7D3E5" name="GUID-B31CB736-B03F-4333-B5E2-EEF883D7D3E5"></a><h4 id="ADLOB-GUID-B31CB736-B03F-4333-B5E2-EEF883D7D3E5" class="sect4">远程LOB和BFILE的内置函数</h4>
                  <div>
                     <p></p>
                     <p>只要嵌套函数返回的最终值不是LOB类型，远程LOB和BFILE也支持本地LOB和BFILE上支持的任何SQL内置函数和用户定义函数。这包括远程持久和临时LOB以及BFILE的功能。</p>
                     <p>在远程站点上执行的内置SQL函数可以是任何SQL语句的一部分，如<code class="codeph">SELECT</code> ， <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>和<code class="codeph">DELETE</code> 。例如：</p><pre class="pre codeblock"><code>SELECT LENGTH（ad_sourcetext）FROM print_media @ remote_site  -  CLOB SELECT LENGTH（ad_fltextn）FROM print_media @ remote_site; -  NCLOB SELECT LENGTH（ad_composite）FROM print_media @ remote_site; - 来自print_media @ remote_site的BLOB SELECT product_id WHERE LENGTH（ad_sourcetext）&gt; 3; UPDATE print_media @ remote_site SET product_id = 2 WHERE LENGTH（ad_sourcetext）&gt; 3; SELECT TO_CHAR（foo @ dbs2（...））FROM dual @ dbs2; - 其中foo @ dbs2返回临时LOB</code></pre><p>SQL函数属于以下（不一定是独占）类别：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>LOB不支持的SQL函数：</p>
                           <p>这些函数仅与<code class="codeph">CLOB</code>相关：例如<code class="codeph">DECODE</code> 。</p>
                           <p>这些功能<span class="bold">可以</span> ，因为他们不支持本地的LOB <span class="bold">不能</span>在远程的LOB <span class="bold">支持</span> 。
                           </p>
                        </li>
                        <li>
                           <p>函数只接受一个LOB参数（所有其他参数都是其他数据类型）并且不返回LOB：</p>
                           <p>这些函数仅与CLOB，NCLOB和BLOB相关：一个例子是<code class="codeph">LENGTH</code>并且<span class="bold">它受支持</span> 。例如：</p><pre class="pre codeblock"><code>SELECT LENGTH（ad_composite）FROM print_media @ remote_site; SELECT LENGTH（ad_header.logo）FROM print_media @ remote_site; - 来自print_media @ remote_site的对象SELECT product_id中的LOB WHERE LENGTH（ad_sourcetext）&gt; 3;</code></pre></li>
                        <li>
                           <p>返回LOB的函数：</p>
                           <p><span class="bold">所有这些功能仅与CLOB和NCLOB相关。</span>这些函数可能返回原始LOB或生成临时LOB。只要返回到本地站点的结果不是LOB，就可以在远程站点上执行这些功能。</p>
                           <p>返回临时LOB的函数有： <code class="codeph">REPLACE</code> ， <code class="codeph">SUBSTR</code> ， <code class="codeph">CONCAT</code> ，||， <code class="codeph">TRIM</code> ， <code class="codeph">LTRIM</code> ， <code class="codeph">RTRIM</code> ， <code class="codeph">LOWER</code> ， <code class="codeph">UPPER</code> ， <code class="codeph">NLS_LOWER</code> ， <code class="codeph">NLS_UPPER</code> ， <code class="codeph">LPAD</code>和<code class="codeph">RPAD</code> 。</p>
                           <p>返回原始LOB定位符的函数有： <code class="codeph">NVL</code> ， <code class="codeph">DECODE</code>和<code class="codeph">CASE</code> 。请注意，即使目前不支持<code class="codeph">DECODE</code>和<code class="codeph">CASE</code>来操作LOB，它们也可以在其他数据类型上运行并返回LOB。</p>
                           <p>例如， <span class="bold">支持以下语句：</span></p><pre class="pre codeblock"><code>SELECT TO_CHAR（CONCAT（ad_sourcetext，ad_sourcetext））FROM print_media @ remote_site; SELECT TO_CHAR（SUBSTR（ad_fltextnfs，1,3））FROM print_media @ remote_site;</code></pre><p>但<span class="bold">不支持以下声明：</span></p><pre class="pre codeblock"><code>SELECT CONCAT（ad_sourcetext，ad_sourcetext）FROM print_media @ remote_site; SELECT SUBSTR（ad_sourcetext，1,3）FROM print_media @ remote_site;</code></pre></li>
                        <li>
                           <p>包含多个LOB参数的函数：</p>
                           <p>它们是： <code class="codeph">INSTR</code> ， <code class="codeph">LIKE</code> ， <code class="codeph">REPLACE</code> ， <code class="codeph">CONCAT</code> ，||， <code class="codeph">SUBSTR</code> ， <code class="codeph">TRIM</code> ， <code class="codeph">LTRIM</code> ， <code class="codeph">RTRIM</code> ， <code class="codeph">LPAD</code>和<code class="codeph">RPAD</code> 。所有这些功能仅与<code class="codeph">CLOB</code>和<code class="codeph">NCLOB</code>相关。
                           </p>
                           <p>仅当所有LOB参数位于同一<code class="codeph">dblink</code>中且返回的值不是LOB时，才支持这些函数。例如， <span class="bold">支持以下内容：</span></p><pre class="pre codeblock"><code>SELECT TO_CHAR（CONCAT（ad_sourcetext，ad_sourcetext））FROM print_media @ remote_site; -  CLOB SELECT TO_CHAR（CONCAT（ad_fltextn，ad_fltextn））FROM print_media @ remote_site; -  NCLOB</code></pre><p><span class="bold">但是不支持以下内容：</span></p><pre class="pre codeblock"><code>SELECT TO_CHAR（CONCAT（a.ad_sourcetext，b.ad_sourcetext））FROM print_media @ db1 a，print_media @ db2 b WHERE a.product_id = b.product_id;</code></pre></li>
                     </ul>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-8AD11782-080D-4772-BF8E-1F3AF2652551" name="GUID-8AD11782-080D-4772-BF8E-1F3AF2652551"></a><h4 id="ADLOB-GUID-8AD11782-080D-4772-BF8E-1F3AF2652551" class="sect4">将远程定位器传递给内置SQL函数</h4>
                  <div>
                     <p></p>
                     <div class="p">您可以将远程定位器传递给大多数内置SQL函数，例如<code class="codeph">LENGTH, INSTR, SUBSTR</code>和<code class="codeph">UPPER</code> 。例如，<pre class="pre codeblock"><code>Var lob1 CLOB; BEGIN从lob_tab @ db2中选择c2到lob1，其中c1 = 1;结束; /从双重选择长度（：lob1）;</code></pre></div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-3F146243-4F26-4B50-AE8E-FC292BD22130" name="GUID-3F146243-4F26-4B50-AE8E-FC292BD22130"></a><h3 id="ADLOB-GUID-3F146243-4F26-4B50-AE8E-FC292BD22130" class="sect3">在PL / SQL中使用远程LOB</h3>
               <div>
                  <p></p>
                  <p>话题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="distributed-LOBs.html#GUID-FC1965B0-D822-4E80-AC2F-801B7BC00986">远程LOB和BFILE的PL / SQL函数</a></p>
                     </li>
                     <li>
                        <p><a href="distributed-LOBs.html#GUID-867C48BB-BDC3-400D-BFB7-E36BBC9F2BE8">将远程定位器与DBMS_LOB一起使用</a></p>
                     </li>
                  </ul>
               </div>
               <div class="sect3"><a id="GUID-FC1965B0-D822-4E80-AC2F-801B7BC00986" name="GUID-FC1965B0-D822-4E80-AC2F-801B7BC00986"></a><h4 id="ADLOB-GUID-FC1965B0-D822-4E80-AC2F-801B7BC00986" class="sect4">远程LOB和BFILE的PL / SQL函数</h4>
                  <div>
                     <p></p>
                     <p>只要嵌套函数返回的最终值不是LOB，就允许在远程站点上执行并在远程LOB和BFILE上运行的内置和用户定义的PL / SQL函数。</p>
                     <p>下面的示例使用的<code class="codeph">print_media</code>中描述表<span class="q">“ <a href="working-with-LOBs.html#GUID-D71F0CBE-0717-41A2-BCD4-71E1DDF895D1" title="许多Oracle LOB示例使用Oracle Database Sample Schema PM的print_media表。">表对于LOB实施例：PM模式print_media表</a> ”</span></p><pre class="pre codeblock"><code>SELECT product_id FROM print_media @ dbs2 WHERE foo @ dbs2（ad_sourcetext，'aa'）&gt; 0; -  foo是一个用户定义函数，返回NUMBER DELETE FROM print_media @ dbs2 WHERE DBMS_LOB.GETLENGTH@dbs2（ad_graphic）= 0;</code></pre></div><a id="ADLOB45612"></a><div class="props_rev_3"><a id="GUID-3FF5DBCA-AC5A-4C01-8B25-802500447D78" name="GUID-3FF5DBCA-AC5A-4C01-8B25-802500447D78"></a><h5 id="ADLOB-GUID-3FF5DBCA-AC5A-4C01-8B25-802500447D78" class="sect5">远程用户定义函数的限制</h5>
                     <div>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>适用于SQL函数的限制也适用于此处。</p>
                              <div class="infoboxnotealso" id="GUID-3FF5DBCA-AC5A-4C01-8B25-802500447D78__GUID-5D3A6799-8F7C-4742-B067-F7E52A187F09">
                                 <p class="notep1">也可以看看：</p>
                                 <p><a href="distributed-LOBs.html#GUID-B31CB736-B03F-4333-B5E2-EEF883D7D3E5">远程LOB和BFILE的内置函数</a></p>
                              </div>
                           </li>
                           <li>
                              <p>一个<code class="codeph">dblink</code>的函数无法对另一个dblink中的LOB数据进行操作。例如，不支持以下语句：</p><pre class="oac_no_warn" dir="ltr">SELECT a.product_id FROM print_media @ dbs1 a，print_media @ dbs2 b WHERE CONTAINS @ dbs1（b.ad_sourcetext，'aa'）&gt; 0;</pre></li>
                           <li>
                              <p>一个查询块不能包含不同<code class="codeph">dblink</code>的表和函数。例如，不支持以下语句：</p><pre class="oac_no_warn" dir="ltr">SELECT a.product_id FROM print_media @ dbs2 a，print_media @ dbs3 b WHERE CONTAINS @ dbs2（a.ad_sourcetext，'aa'）&gt; 0 AND foo @ dbs3（b.ad_sourcetext）&gt; 0; -  foo是dbs3中的用户定义函数</pre></li>
                           <li>
                              <p>除了从PL / SQL发出SQL语句之外，不支持从PL / SQL中执行远程LOB操作（即<code class="codeph">DBMS_LOB</code> ）。</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="ADLOB45613"></a><div class="props_rev_3"><a id="GUID-99CA650D-B7A7-452F-825D-F57F314FBC00" name="GUID-99CA650D-B7A7-452F-825D-F57F314FBC00"></a><h5 id="ADLOB-GUID-99CA650D-B7A7-452F-825D-F57F314FBC00" class="sect5">PL / SQL，OCI和JDBC中的远程函数</h5>
                     <div>
                        <p>如果从PL / SQL，OCI和JDBC内部执行，则<a href="distributed-LOBs.html#GUID-3FF5DBCA-AC5A-4C01-8B25-802500447D78">远程用户定义函数的限制中</a>列出的所有SQL语句都是相同的。没有提供其他功能。
                        </p>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-6C566EFA-EA09-4276-9B54-A9FBFE77E399" name="GUID-6C566EFA-EA09-4276-9B54-A9FBFE77E399"></a><h4 id="ADLOB-GUID-6C566EFA-EA09-4276-9B54-A9FBFE77E399" class="sect4">在PL / SQL中使用远程定位器</h4>
                  <div>
                     <div class="p">远程定位器可以作为参数传递给内置的PL / SQL函数，如<code class="codeph">LENGTH</code> ， <code class="codeph">INSTR</code> ， <code class="codeph">SUBSTR</code> ， <code class="codeph">UPPER</code>等，它们接受LOB作为输入。例如，<pre class="pre codeblock"><code>DECLARE substr_data varchar2（4000）; remote_loc CLOB; BEGIN SELECT c2进入remote_loc FROM lob_tab @ db2 WHERE c1 = 1; substr_data：= substr（remote_loc，position，length）END;</code></pre></div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-867C48BB-BDC3-400D-BFB7-E36BBC9F2BE8" name="GUID-867C48BB-BDC3-400D-BFB7-E36BBC9F2BE8"></a><h4 id="ADLOB-GUID-867C48BB-BDC3-400D-BFB7-E36BBC9F2BE8" class="sect4">将远程定位器与<code class="codeph">DBMS_LOB</code></h4>
                  <div>
                     <p></p>
                     <p>除了针对BFILE的API之外的所有<code class="codeph">DBMS_LOB</code> API都支持对远程LOB定位器的操作。
                     </p>
                     <p>以下示例显示如何将远程定位器作为输入传递给<code class="codeph">dbms_lob</code>操作。
                     </p><pre class="pre codeblock"><code>DECLARE lob CLOB; buf VARCHAR2（120）：='TST';是号码（2）; len NUMBER（2）; BEGIN amt：= 30;从lob_tab @ db2中选择c2到lob，其中c1 = 3进行更新; dbms_lob.write（lob，amt，1，buf）; amt：= 30; dbms_lob.read（lob，amt，1，buf）; len：= dbms_lob.getlength（lob）; DBMS_OUTPUT.PUT_LINE（BUF）; DBMS_OUTPUT.PUT_LINE（AMT）; dbms_output.put_line（'get length output ='|| len）;结束; /</code></pre><p>话题：</p>
                     <div class="p">
                        <ul style="list-style-type:disc">
                           <li><a href="distributed-LOBs.html#GUID-49373310-BD7B-4E4A-BBE6-816283A695CD">使用DBMS_LOB使用远程定位器的限制</a></li>
                        </ul>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-49373310-BD7B-4E4A-BBE6-816283A695CD" name="GUID-49373310-BD7B-4E4A-BBE6-816283A695CD"></a><h5 id="ADLOB-GUID-49373310-BD7B-4E4A-BBE6-816283A695CD" class="sect5">使用<code class="codeph">DBMS_LOB</code>使用远程定位器的限制</h5>
                     <div>
                        <p></p>
                        <p>接受两个LOB定位器的所有API必须在一个数据库中并置两个LOB。</p>
                        <div class="infoboxnotealso" id="GUID-49373310-BD7B-4E4A-BBE6-816283A695CD__GUID-54B7E692-7508-4A22-A5A5-612FF8FD71A7">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../arpls/DBMS_LOB.html#ARPLS-GUID-A35DE03B-41A6-4E55-8CDE-77737FED9306" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以查看<code class="codeph">DBMS_LOB</code> API的完整列表。</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-F378F295-1FC9-4081-95C4-91EC740719EA" name="GUID-F378F295-1FC9-4081-95C4-91EC740719EA"></a><h3 id="ADLOB-GUID-F378F295-1FC9-4081-95C4-91EC740719EA" class="sect3">使用带有<code class="codeph">OCILOB</code> API的远程定位器</h3>
               <div>
                  <p>所有<code class="codeph">OCILOB</code> API（用于BFILE的API除外）都支持远程<code class="codeph">LOB</code>定位器上的操作。
                  </p>
                  <div class="infoboxnote" id="GUID-F378F295-1FC9-4081-95C4-91EC740719EA__ALLTHEAPISTHATACCEPTTWOLOCATORSMUST-3B3E4F61">
                     <p class="notep1">注意：</p>接受两个定位器的所有API必须通过相同的数据库链接获取两个LOB定位器。
                  </div>
                  <p>当远程<code class="codeph">LOB</code>定位器传递给它们时，以下<code class="codeph">OCILOB</code>函数列表将给出错误：</p>
                  <div class="p">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCILobAssign</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCILobLocatorAssign</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCILobArrayRead（）</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCILobArrayWrite（）</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCILobLoadFromFile2（）</code></p>
                        </li>
                     </ul>
                  </div>
                  <p>以下示例显示如何将远程定位器传递给<code class="codeph">OCILOB</code> API。</p><pre class="pre codeblock"><code>void select_read_remote_lob（）{text * select_sql =（text *）“SELECT c2 lob_tab @ dbs1 where c1 = 1”; ub4 amtp = 10; ub4 nbytes = 0; ub4 loblen = 0; OCILobLocator * one_lob; text strbuf [40]; / *初始化单个定位器* / OCIDescriptorAlloc（envhp，（dvoid **）＆one_lob，（ub4）OCI_DTYPE_LOB，（size_t）0，（dvoid **）0）OCIStmtPrepare（stmthp，errhp，select_sql，（ub4）strlen（（char *）select_sql），（ub4）OCI_NTV_SYNTAX，（ub4）OCI_DEFAULT）; OCIDefineByPos（stmthp，＆defp，errhp，（ub4）1，（dvoid *）＆one_lob，（sb4）-1，（ub2）SQLT_CLOB，（dvoid *）0，（ub2 *）0，（ub2 *）0，（ub4 ）OCI_DEFAULT））; / *将远程定位器提取到本地变量one_lob * / OCIStmtExecute（svchp，stmthp，errhp，1,0，（OCISnapshot *）0，（OCISnapshot *）0，OCI_DEFAULT）; / *获取远程LOB * / OCILobGetLength的长度（svchp，errhp，（OCILobLocator *）one_lob，（ub4 *）＆loblen）printf（“LOB length =％d \ n”，loblen）; memset（（void *）strbuf，（int）'\ 0'，（size_t）40）; / *从远程LOB * / OCILobRead读取数据（svchp，errhp，one_lob，＆amtp，（ub4）1，（dvoid *）strbuf，（ub4）＆nbytes，（dvoid *）0，（OCICallbackLobRead）0，（ ub2）0，（ub1）SQLCS_IMPLICIT））; printf（“LOB content =％s \ n”，strbuf）; }</code></pre><div class="infoboxnotealso" id="GUID-F378F295-1FC9-4081-95C4-91EC740719EA__OCIPROGRAMMERSGUIDEFORTHECOMPLETELI-3B3E42A7">
                     <p class="notep1">也可以看看：</p> <span class="italic">OCI程序员指南</span> ，获取<code class="codeph">OCILOB</code> API的完整列表</div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
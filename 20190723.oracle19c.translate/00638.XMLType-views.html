<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can create XMLType views over relational and object-relational data."></meta>
      <meta name="description" content="You can create XMLType views over relational and object-relational data."></meta>
      <title>XMLType视图</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Developer&#39;s Guide "></meta>
      <meta property="og:description" content="You can create XMLType views over relational and object-relational data."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="xml-db-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-30T12:32:42-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96222-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="relational-views-over-XML-data.html" title="Previous" type="text/html"></link>
      <link rel="next" href="XMLType-APIs.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML DB Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADXDB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="relational-views-over-XML-data.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="XMLType-APIs.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="relational-data-to-and-from-XML-data.html" property="item" typeof="WebPage"><span property="name">与XML数据之间的关系数据</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">XMLType视图</li>
            </ol>
            <a id="GUID-9F0A7B1F-269B-411F-AD8B-8F1CB2E2A671" name="GUID-9F0A7B1F-269B-411F-AD8B-8F1CB2E2A671"></a><a id="ADXDB1800"></a>
            
            <h2 id="ADXDB-GUID-9F0A7B1F-269B-411F-AD8B-8F1CB2E2A671" class="sect2"><span class="enumeration_chapter">10个</span> XMLType视图</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以在关系数据和对象关系数据上创建<code class="codeph">XMLType</code>视图。
               </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="XMLType-views.html#GUID-EF747930-3691-4BFA-B1C7-99FC449C3BFE">什么是XMLType视图？</a><br><code class="codeph">XMLType</code>视图以XML格式包装现有的关系数据和对象关系数据。这使您可以在期望XML数据和利用XML功能（包括XML Schema）的上下文中使用现有数据。
                  </li>
                  <li class="ulchildlink"><a href="XMLType-views.html#GUID-30E3C3B8-46F7-4D1E-97DE-B7A261BC2995">为XMLType视图创建视图：语法</a><br>提供了用于创建<code class="codeph">XMLType</code>视图的<code class="codeph">CREATE VIEW</code>子句的语法。
                  </li>
                  <li class="ulchildlink"><a href="XMLType-views.html#GUID-69A4022C-9FCA-4529-8A29-084EB2185FCF">创建基于非架构的XMLType视图</a><br>非XML基于Schema的<code class="codeph">XMLType</code>视图中的XML数据<code class="codeph">XMLType</code>于符合已注册的XML模式。您可以使用SQL / XML发布函数创建基于非模式的<code class="codeph">XMLType</code>视图。
                  </li>
                  <li class="ulchildlink"><a href="XMLType-views.html#GUID-4BA4C794-3CAA-43D6-B8C4-5FE946FC1134">创建基于XML模式的XMLType视图</a><br>基于XML Schema的<code class="codeph">XMLType</code>视图中的XML数据被约束为符合XML模式。您可以使用SQL / XML发布函数或使用对象类型或视图创建基于模式的<code class="codeph">XMLType</code>视图。
                  </li>
                  <li class="ulchildlink"><a href="XMLType-views.html#GUID-5191DBB9-EEA9-402C-BAD2-28AB6894E63D">从XMLType表创建XMLType视图</a><br>可以在<code class="codeph">XMLType</code>表上创建<code class="codeph">XMLType</code>视图，例如，转换XML数据或限制返回的行。
                  </li>
                  <li class="ulchildlink"><a href="XMLType-views.html#GUID-72A94695-5890-4BA1-8FD1-6D26E1C4349B">使用SQL函数REF引用XMLType视图对象</a><br>您可以使用SQL函数<code class="codeph">ref</code>引用<code class="codeph">XMLType</code>视图对象。
                  </li>
                  <li class="ulchildlink"><a href="XMLType-views.html#GUID-FF5B6A10-191B-45E0-810F-A7F0CFF71711">在XMLType视图上使用DML（数据操作语言）</a><br>给定的<code class="codeph">XMLType</code>视图可能不是可隐式更新的。在这种情况下，您必须编写替代触发器来处理所有DML。要确定<code class="codeph">XMLType</code>视图是否可隐式更新，请查询它以查看它是基于对象视图还是本身具有可更新性的构造函数。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="relational-data-to-and-from-XML-data.html#GUID-52910135-EC23-41B2-97EC-116790BF6A3C" title="您可以通过多种方式将现有关系数据视为XML数据。">与XML数据相关的关系数据</a></p>
                  </div>
               </div>
            </div>
            <a id="ADXDB5166"></a><div class="props_rev_3"><a id="GUID-EF747930-3691-4BFA-B1C7-99FC449C3BFE" name="GUID-EF747930-3691-4BFA-B1C7-99FC449C3BFE"></a><h3 id="ADXDB-GUID-EF747930-3691-4BFA-B1C7-99FC449C3BFE" class="sect3"><span class="enumeration_section">10.1</span>什么是XMLType视图？
               </h3>
               <div>
                  <p><code class="codeph">XMLType</code>视图以XML格式包装现有的关系数据和对象关系数据。这使您可以在期望XML数据和利用XML功能（包括XML Schema）的上下文中使用现有数据。
                  </p>
                  <p>使用<code class="codeph">XMLType</code>视图的主要优点是：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您可以利用使用XML Schema功能的Oracle XML DB XML功能，而无需迁移基本旧数据。</p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">XMLType</code>视图，您可以尝试各种形式的数据存储。您无需立即决定是将其存储为<code class="codeph">XMLType</code>还是要使用哪种<code class="codeph">XMLType</code>存储模型。
                        </p>
                     </li>
                  </ul>
                  <p><code class="codeph">XMLType</code>视图类似于对象视图。<code class="codeph">XMLType</code>视图的每一行对应一个<code class="codeph">XMLType</code>实例。可以使用SQL / XML函数<code class="codeph">XMLCast</code>和<code class="codeph">XMLQuery</code>创建用于唯一标识视图中每一行的对象标识符。
                  </p>
                  <p><code class="codeph">XMLType</code>视图有两种类型：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><strong class="term">非基于模式的XMLType视图。</strong>这些视图不会确认特定的XML架构。
                        </p>
                     </li>
                     <li>
                        <p><strong class="term">基于XML模式的XMLType视图。</strong> 与<code class="codeph">XMLType</code>表<code class="codeph">XMLType</code>符合特定的XML模式的观点被称为基于XML模式<code class="codeph">XMLType</code>意见。与非基于模式的<code class="codeph">XMLType</code>视图相比，它们提供了更强的类型。
                        </p>
                     </li>
                  </ul>
                  <p>在查询的XPath重写<code class="codeph">XMLType</code>意见，也是非基于架构都基于XML模式的启用和<code class="codeph">XMLType</code>意见。在<a href="XPath-rewrite-for-object-relational-storage.html#GUID-35551023-CCAC-477B-8BBF-CD0E0B44C962" title="For XMLType data stored object-relationally, queries involving XPath expression arguments to various SQL functions can often be automatically rewritten to queries against the underlying SQL tables, which are highly optimized.">XPath Rewrite for Object-Relational Storage中</a>描述了<a href="XPath-rewrite-for-object-relational-storage.html#GUID-35551023-CCAC-477B-8BBF-CD0E0B44C962" title="对于以对象方式存储的XMLType数据，涉及各种SQL函数的XPath表达式参数的查询通常可以自动重写为针对高度优化的基础SQL表的查询。">XPath重写</a> 。
                  </p>
                  <p>要创建基于XML模式的<code class="codeph">XMLType</code>视图，请首先注册XML模式。如果视图是对象视图，也就是说，如果它是使用对象类型构造的，那么XML模式应该具有表示从XML到SQL对象类型的双向映射的注释。然后，可以通过提供构造适当SQL对象类型的实例的基础查询来创建符合此已注册XML模式的<code class="codeph">XMLType</code>视图。
                  </p>
                  <p>您可以通过以下任何方式创建<code class="codeph">XMLType</code>视图：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>基于SQL / XML发布函数，例如<code class="codeph">XMLElement</code> ， <code class="codeph">XMLForest</code> ， <code class="codeph">XMLConcat</code>和<code class="codeph">XMLAgg</code> 。SQL / XML发布函数可用于构造基于非模式的<code class="codeph">XMLType</code>视图和基于XML模式的<code class="codeph">XMLType</code>视图。这样可以直接从底层关系表构造<code class="codeph">XMLType</code>视图，而无需将这些关系遗留数据物理迁移到XML中。但是，要构建基于XML模式的<code class="codeph">XMLType</code>视图，必须注册XML模式，并且必须将SQL / XML发布函数生成的XML值约束为XML模式。
                        </p>
                     </li>
                     <li>
                        <p>基于对象类型或对象视图。这使得能够直接从底层关系表或对象关系表构造<code class="codeph">XMLType</code>视图，而无需将关系或对象关系遗留数据物理地迁移到XML中。创建基于XML模式的<code class="codeph">XMLType</code>视图要求您使用现有对象类型的映射来注释XML模式，或者从现有对象类型生成XML模式。
                        </p>
                     </li>
                     <li>
                        <p>直接来自<code class="codeph">XMLType</code>表。
                        </p>
                     </li>
                  </ul>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="XML-Schema-and-query-basic.html#GUID-C09824C1-6B02-4556-A265-B1749DEE8DE1" title="XML Schema是用于描述XML文档的内容和结构的标准。您可以注册，更新和删除与Oracle XML DB一起使用的XML架构。您可以定义用于基于XML模式的数据的存储结构，并将XML模式数据类型映射到SQL数据类型。">XML模式存储和查询：基本</a></li>
                        <li><a href="relational-views-over-XML-data.html#GUID-420496CE-D62F-4EBE-A76E-861B932AE1E6" title="XML数据的关系数据库视图提供对XML内容的传统关系访问。">XML数据的关系视图</a></li>
                        <li><a href="choice-of-XMLType-storage-and-indexing.html#GUID-F1EE5B88-69E1-47B4-97FC-92F184C0CBA1" title="应用程序的重要设计选择包括要使用的XMLType存储模型以及要使用的索引方法。">选择XMLType存储和索引</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="XMLType-views.html#GUID-9F0A7B1F-269B-411F-AD8B-8F1CB2E2A671" title="您可以在关系数据和对象关系数据上创建XMLType视图。">XMLType视图</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5168"></a><a id="ADXDB5167"></a><div class="props_rev_3"><a id="GUID-30E3C3B8-46F7-4D1E-97DE-B7A261BC2995" name="GUID-30E3C3B8-46F7-4D1E-97DE-B7A261BC2995"></a><h3 id="ADXDB-GUID-30E3C3B8-46F7-4D1E-97DE-B7A261BC2995" class="sect3"><span class="enumeration_section">10.2</span>为XMLType视图创建视图：语法</h3>
               <div>
                  <p>提供了用于创建<code class="codeph">XMLType</code>视图的<code class="codeph">CREATE VIEW</code>子句的语法。
                  </p>
                  <div class="section">
                     <p><a href="XMLType-views.html#GUID-30E3C3B8-46F7-4D1E-97DE-B7A261BC2995__CJIBFAFH">图10-1</a>显示了这种语法。有关<code class="codeph">CREATE VIEW</code>语法的详细信息，请参见<a href="../sqlrf/CREATE-VIEW.html#SQLRF01504" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> 。
                     </p>
                     <div class="figure" id="GUID-30E3C3B8-46F7-4D1E-97DE-B7A261BC2995__CJIBFAFH">
                        <p class="titleinfigure">图10-1创建XMLType视图子句：语法</p><img src="img/xmltype_view_clause.gif" width="558" alt="下面是图10-1的描述" title="下面是图10-1的描述" longdesc="img_text/xmltype_view_clause.html"><br><a href="img_text/xmltype_view_clause.html">“图10-1创建XMLType视图子句：语法”的说明</a></div>
                     <!-- class="figure" -->
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="XMLType-views.html#GUID-9F0A7B1F-269B-411F-AD8B-8F1CB2E2A671" title="您可以在关系数据和对象关系数据上创建XMLType视图。">XMLType视图</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5171"></a><a id="ADXDB5169"></a><div class="props_rev_3"><a id="GUID-69A4022C-9FCA-4529-8A29-084EB2185FCF" name="GUID-69A4022C-9FCA-4529-8A29-084EB2185FCF"></a><h3 id="ADXDB-GUID-69A4022C-9FCA-4529-8A29-084EB2185FCF" class="sect3"><span class="enumeration_section">10.3</span>创建基于非模式的XMLType视图</h3>
               <div>
                  <p>非XML基于Schema的<code class="codeph">XMLType</code>视图中的XML数据<code class="codeph">XMLType</code>于符合已注册的XML模式。您可以使用SQL / XML发布函数创建基于非模式的<code class="codeph">XMLType</code>视图。
                  </p>
                  <div class="section">
                     <p><a href="XMLType-views.html#GUID-69A4022C-9FCA-4529-8A29-084EB2185FCF__I1027167">示例10-1</a>显示了如何使用SQL / XML函数<code class="codeph">XMLELement</code>创建<code class="codeph">XMLType</code>视图。
                     </p>
                     <p>关系表或视图中的现有数据可以通过这种方式公开为XML数据。如果使用SQL / XML发布函数生成视图，则通常可以重写使用XQuery表达式访问该视图的查询。然后，这些优化的查询可以直接访问底层关系列。有关详细信息，请参阅<a href="XPath-rewrite-for-object-relational-storage.html#GUID-35551023-CCAC-477B-8BBF-CD0E0B44C962" title="对于以对象方式存储的XMLType数据，涉及各种SQL函数的XPath表达式参数的查询通常可以自动重写为针对高度优化的基础SQL表的查询。">对象关系存储的XPath重写</a> 。
                     </p>
                     <p>您可以在<code class="codeph">XMLType</code>视图上执行DML操作，但是，通常，您必须编写替代触发器来处理DML操作。
                     </p>
                     <div class="infoboxnotealso" id="GUID-69A4022C-9FCA-4529-8A29-084EB2185FCF__GUID-89523654-DEE2-42CE-9A71-4B32E974C95F">
                        <p class="notep1">也可以看看：</p>
                        <p> <a href="generation-of-XML-data-from-relational-data.html#GUID-3BEB9A88-8B44-4AA3-89F4-8CBF6F8FA686" title="Oracle XML DB提供了从数据库中的关系数据生成（构造）XML数据的功能。有SQL / XML标准函数和Oracle特定的函数和包，用于从关系内容生成XML数据。">从关系数据生成XML数据</a> ，有关SQL / XML发布函数的详细信息</p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-69A4022C-9FCA-4529-8A29-084EB2185FCF__I1027167">
                     <p class="titleinexample">示例10-1使用XMLELEMENT创建XMLType视图</p><pre class="oac_no_warn" dir="ltr">创建或替换视图带有对象ID的XMLType的emp_view（XMLCast（XMLQuery（'/ Emp / @ empno'PASSING OBJECT_VALUE RETURNING CONTENT）AS BINARY_DOUBLE））AS SELECT XMLElement（“Emp”，XMLAttributes（employee_id AS“empno”），XMLForest（ e.first_name ||''|| e.last_name AS“name”，e.hire_date AS“hiredate”））AS“结果”来自员工e WHERE salary&gt; 15000; SELECT * FROM emp_view; SYS_NC_ROWINFO $ ------------------------------------------------ ------------------------------------- &lt;Emp empno =“100”&gt; &lt;name&gt; Steven King &lt;/ name&gt; &lt;hiredate&gt; 2003-06-17 &lt;/ hiredate&gt; &lt;/ Emp&gt; &lt;Emp empno =“101”&gt; &lt;name&gt; Neena Kochhar &lt;/ name&gt; &lt;hiredate&gt; 2005-09-21 &lt;/ hiredate&gt; &lt; / Emp&gt; &lt;Emp empno =“102”&gt; &lt;name&gt; Lex De Haan &lt;/ name&gt; &lt;hiredate&gt; 2001-01-13 &lt;/ hiredate&gt; &lt;/ Emp&gt;</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="XMLType-views.html#GUID-9F0A7B1F-269B-411F-AD8B-8F1CB2E2A671" title="您可以在关系数据和对象关系数据上创建XMLType视图。">XMLType视图</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5174"></a><div class="props_rev_3"><a id="GUID-4BA4C794-3CAA-43D6-B8C4-5FE946FC1134" name="GUID-4BA4C794-3CAA-43D6-B8C4-5FE946FC1134"></a><h3 id="ADXDB-GUID-4BA4C794-3CAA-43D6-B8C4-5FE946FC1134" class="sect3"><span class="enumeration_section">10.4</span>创建基于XML模式的XMLType视图</h3>
               <div>
                  <p>基于XML Schema的<code class="codeph">XMLType</code>视图中的XML数据被约束为符合XML模式。您可以使用SQL / XML发布函数或使用对象类型或视图创建基于模式的<code class="codeph">XMLType</code>视图。
                  </p>
                  <p>使用以下任一方式创建基于模式的视图：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用SQL / XML发布功能。</p>
                     </li>
                     <li>
                        <p>使用对象类型或对象视图。当您已经拥有要映射到XML数据的对象类型，视图和表时，这很方便。</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="XMLType-views.html#GUID-B3F5A02B-8D97-411A-B542-3D441BE3DEF9">使用SQL / XML发布函数创建基于XML模式的XMLType视图</a><br>您可以使用SQL / XML发布函数来创建基于XML Schema的<code class="codeph">XMLType</code>视图。
                     </li>
                     <li class="ulchildlink"><a href="XMLType-views.html#GUID-E50ECA03-3E64-4089-9770-62C98D23DD67">使用对象类型或对象视图创建基于XML模式的XMLType视图</a><br>您可以通过注释XML模式从对象类型或视图创建基于XML模式的<code class="codeph">XMLType</code>视图，以定义XML类型与SQL对象类型和对象属性之间的映射。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="XMLType-views.html#GUID-9F0A7B1F-269B-411F-AD8B-8F1CB2E2A671" title="您可以在关系数据和对象关系数据上创建XMLType视图。">XMLType视图</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5176"></a><a id="ADXDB5177"></a><a id="ADXDB5178"></a><a id="ADXDB5175"></a><div class="props_rev_3"><a id="GUID-B3F5A02B-8D97-411A-B542-3D441BE3DEF9" name="GUID-B3F5A02B-8D97-411A-B542-3D441BE3DEF9"></a><h4 id="ADXDB-GUID-B3F5A02B-8D97-411A-B542-3D441BE3DEF9" class="sect4"><span class="enumeration_section">10.4.1</span>使用SQL / XML发布函数创建基于XML模式的XMLType视图</h4>
                  <div>
                     <p>您可以使用SQL / XML发布函数来创建基于XML Schema的<code class="codeph">XMLType</code>视图。
                     </p>
                     <div class="section">
                        <ol>
                           <li>
                              <p>创建并注册包含必要XML结构的XML模式文档。您无需注释XML模式来定义XML类型和SQL对象类型之间的映射。</p>
                           </li>
                           <li>
                              <p>使用SQL / XML发布函数创建符合XML模式的<code class="codeph">XMLType</code>视图。
                              </p>
                           </li>
                        </ol>
                        <p>这两个步骤分别在<a href="XMLType-views.html#GUID-B3F5A02B-8D97-411A-B542-3D441BE3DEF9__CHDHDHAD">实施例10-2</a>和<a href="XMLType-views.html#GUID-B3F5A02B-8D97-411A-B542-3D441BE3DEF9__CHDFDJCH">实施例10-3</a>中说明。
                        </p>
                        <p><a href="XMLType-views.html#GUID-B3F5A02B-8D97-411A-B542-3D441BE3DEF9__CHDGIHBA">示例10-4</a>说明了查询<code class="codeph">XMLType</code>视图。
                        </p>
                        <p><a href="XMLType-views.html#GUID-B3F5A02B-8D97-411A-B542-3D441BE3DEF9__CHDHDHAD">示例10-2</a>假定您具有XML模式<code class="codeph">emp_simple.xsd</code> ，其中包含定义员工的XML结构。它将XML模式注册到目标位置<code class="codeph">http://www.oracle.com/emp_simple.xsd</code> 。</p>
                        <p>使用SQL / XML发布函数生成基于XML模式的内容时，必须为所有元素指定适当的名称空间信息，并使用属性<code class="codeph">xsi:schemaLocation</code>指示模式的位置。可以使用<code class="codeph">XMLAttributes</code>子句指定这些。<a href="XMLType-views.html#GUID-B3F5A02B-8D97-411A-B542-3D441BE3DEF9__CHDFDJCH">例10-3</a>说明了这一点。
                        </p>
                        <div class="infoboxnote" id="GUID-B3F5A02B-8D97-411A-B542-3D441BE3DEF9__GUID-E130F07E-D0D8-4C96-A03D-33A64077C1D9">
                           <p class="notep1">注意：</p>
                           <p>每当使用带有XML模式引用的SQL / XML函数<code class="codeph">XMLAttributes</code>来创建<code class="codeph">XMLType</code>视图时，如果可能，请在创建视图之前注册XML模式。否则，必须在注册XML模式后重新编译视图，以便生成的文档基于XML模式。
                           </p>
                        </div>
                        <p>在<a href="XMLType-views.html#GUID-B3F5A02B-8D97-411A-B542-3D441BE3DEF9__CHDFDJCH">例10-3中</a> ，函数<code class="codeph">XMLElement</code>创建XML元素<code class="codeph">Employee</code> 。函数<code class="codeph">XMLForest</code>创建元素<code class="codeph">Employee</code>的子元素。<code class="codeph">XMLElement</code>的<code class="codeph">XMLAttributes</code>子句构造所需的XML <code class="codeph">namespace</code>和模式<code class="codeph">location</code>属性，以便生成的XML数据符合视图的XML模式。对<code class="codeph">XMLForest</code>的最内部调用创建了元素<code class="codeph">department</code>的子元素，它是元素<code class="codeph">Employee</code>的子元素。
                        </p>
                        <p>默认情况下，XML生成函数会创建一个非基于模式的XML实例。但是，使用属性<code class="codeph">xsi:schemaLocation</code>或<code class="codeph">xsi:noNamespaceSchemaLocation</code>指定架构位置时，Oracle XML DB会生成基于XML架构的XML数据。对于<code class="codeph">XMLType</code>视图，只要元素和属性的名称与XML模式中的名称匹配，XML数据就会隐式转换为有效的基于XML模式的文档。当在XML实例上执行诸如验证或提取操作之类的操作时，稍后将捕获生成的XML数据中的任何错误。
                        </p>
                        <p><a href="XMLType-views.html#GUID-B3F5A02B-8D97-411A-B542-3D441BE3DEF9__CHDGIHBA">例10-4</a>查询<code class="codeph">XMLType</code>视图，从表<code class="codeph">employees</code>和<code class="codeph">departments</code>返回XML结果。为清楚起见，查询结果显示为漂亮打印。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-B3F5A02B-8D97-411A-B542-3D441BE3DEF9__CHDHDHAD">
                        <p class="titleinexample">示例10-2注册XML模式emp_simple.xsd</p><pre class="pre codeblock"><code>BEGIN DBMS_XMLSCHEMA.registerSchema（SCHEMAURL =&gt;'http://www.oracle.com/emp_simple.xsd'，SCHEMADOC =&gt;'&lt;schema xmlns =“http://www.w3.org/2001/XMLSchema"targetNamespace =” http://www.oracle.com/emp_simple.xsd“version =”1.0“xmlns：xdb =”http://xmlns.oracle.com/xdb“elementFormDefault =”qualified“&gt; &lt;element name =”Employee“&gt; &lt;complexType&gt; &lt;sequence&gt; &lt;element name =“EmployeeId”type =“positiveInteger”minOccurs =“0”/&gt; &lt;element name =“Name”type =“string”minOccurs =“0”/&gt; &lt;element name =“Job “type =”string“minOccurs =”0“/&gt; &lt;element name =”Manager“type =”positiveInteger“minOccurs =”0“/&gt; &lt;element name =”HireDate“type =”date“minOccurs =”0“/ &gt; &lt;element name =“Salary”type =“positiveInteger”minOccurs =“0”/&gt; &lt;element name =“Commission”type =“positiveInteger”minOccurs =“0”/&gt; &lt;element name =“Dept”&gt; &lt;complexType&gt; &lt;sequence&gt; &lt;element name =“DeptNo”type =“positiveInteger”minOccurs =“0”/&gt; &lt;element name =“DeptName”type =“string”minOccurs =“0”/&gt; &lt;element name =“Locat ion“type =”positiveInteger“minOccurs =”0“/&gt; &lt;/ sequence&gt; &lt;/ complexType&gt; &lt;/ element&gt; &lt;/ sequence&gt; &lt;/ complexType&gt; &lt;/ element&gt; &lt;/ schema&gt;'，LOCAL =&gt; TRUE，GENTYPES =&gt; TRUE）;结束;</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-B3F5A02B-8D97-411A-B542-3D441BE3DEF9__CHDFDJCH">
                        <p class="titleinexample">示例10-3使用SQL / XML发布函数创建XMLType视图</p><pre class="pre codeblock"><code>创建或替换视图<span class="bold">emp_simple_xml</span> OF XMLType XMLSCHEMA“http://www.oracle.com/ <span class="bold">emp_simple.xsd</span> ”ELEMENT“Employee”with OBJECT ID（XMLCast（XMLQuery（'/ Employee / EmployeeId / text（）'PASSING OBJECT_VALUE RETURNING CONTENT） AS BINARY_DOUBLE））AS SELECT XMLElement（“Employee”，XMLAttributes（'http://www.oracle.com/emp_simple.xsd'AS“xmlns”，'http：//www.w3.org/2001/XMLSchema-instance 'AS“xmlns：xsi”，'http：//www.oracle.com/emp_simple.xsd http://www.oracle.com/emp_simple.xsd'AS“xsi：schemaLocation”），XMLForest（e.employee_id AS “EmployeeId”，e.last_name AS“Name”，e.job_id AS“Job”，e.manager_id AS“Manager”，e.hire_date AS“HireDate”，e.salary AS“Salary”，e.commission_pct AS“Commission “，XMLForest（d.department_id AS”DeptNo“，d.department_name AS”DeptName“，d.location_id AS”Location“）AS”Dept“））FROM employees e，departments d WHERE e.department_id = d.department_id;</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-B3F5A02B-8D97-411A-B542-3D441BE3DEF9__CHDGIHBA">
                        <p class="titleinexample">示例10-4查询XMLType视图</p><pre class="pre codeblock"><code>SELECT OBJECT_VALUE as empULT from emp_simple_xml WHERE ROWNUM &lt;2;结果------------------------------------------------- -------------------- &lt;Employee xmlns =“http://www.oracle.com/emp_simple.xsd”xmlns：xsi =“http：// www。 w3.org/2001/XMLSchema-instance“xsi：schemaLocation =”http://www.oracle.com/emp_simple.xsd http://www.oracle.com/emp_simple.xsd“&gt; &lt;EmployeeId&gt; 200 &lt;/ EmployeeId &gt; &lt;名称&gt; Whalen &lt;/ Name&gt; &lt;Job&gt; AD_ASST &lt;/ Job&gt; &lt;Manager&gt; 101 &lt;/ Manager&gt; &lt;HireDate&gt; 2003-09-17 &lt;/ HireDate&gt; &lt;Salary&gt; 4400 &lt;/ Salary&gt; &lt;Dept&gt; &lt;DeptNo &gt; 10 &lt;/ Deptno&gt; &lt;DeptName&gt;管理&lt;/ DeptName&gt; &lt;Location&gt; 1700 &lt;/ Location&gt; &lt;/ Dept&gt; &lt;/ Employee&gt;</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="XMLType-views.html#GUID-5AA7CC36-1A4D-49D6-8071-5F2AB5CB27FE">将命名空间与SQL / XML发布函数一起使用</a><br>如果您有涉及名称空间的复杂XML模式，则必须使用SQL / XML发布函数提供的部分转义映射，并使用适当的名称空间和前缀创建元素。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="XMLType-views.html#GUID-4BA4C794-3CAA-43D6-B8C4-5FE946FC1134" title="基于XML Schema的XMLType视图中的XML数据被约束为符合XML模式。您可以使用SQL / XML发布函数或使用对象类型或视图创建基于模式的XMLType视图。">创建基于XML模式的XMLType视图</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB5180"></a><a id="ADXDB5897"></a><a id="ADXDB5898"></a><a id="ADXDB5181"></a><a id="ADXDB5179"></a><div class="props_rev_3"><a id="GUID-5AA7CC36-1A4D-49D6-8071-5F2AB5CB27FE" name="GUID-5AA7CC36-1A4D-49D6-8071-5F2AB5CB27FE"></a><h5 id="ADXDB-GUID-5AA7CC36-1A4D-49D6-8071-5F2AB5CB27FE" class="sect5"><span class="enumeration_section">10.4.1.1</span>将命名空间与SQL / XML发布函数一起使用</h5>
                     <div>
                        <p>如果您有涉及名称空间的复杂XML模式，则必须使用SQL / XML发布函数提供的部分转义映射，并使用适当的名称空间和前缀创建元素。</p>
                        <div class="section">
                           <p><a href="XMLType-views.html#GUID-5AA7CC36-1A4D-49D6-8071-5F2AB5CB27FE__CFHIIBIH">例10-5中</a>的查询创建具有正确名称空间，前缀和目标模式位置的XML实例。它可以在视图<code class="codeph">emp_simple_xml</code>的定义中用作查询。
                           </p>
                           <p>如果XML模式没有目标名称空间，那么您可以使用属性<code class="codeph">xsi:noNamespaceSchemaLocation</code>来指示。<a href="XMLType-views.html#GUID-5AA7CC36-1A4D-49D6-8071-5F2AB5CB27FE__CFHGDFAH">例10-6</a>显示了这样的XML模式。
                           </p>
                           <p><a href="XMLType-views.html#GUID-5AA7CC36-1A4D-49D6-8071-5F2AB5CB27FE__CFHEICEA">例10-7</a>创建了一个符合<a href="XMLType-views.html#GUID-5AA7CC36-1A4D-49D6-8071-5F2AB5CB27FE__CFHGDFAH">例10-6中</a>的XML模式的视图。<code class="codeph">XMLAttributes</code>子句创建一个包含<code class="codeph">noNamespace</code>架构位置属性的XML元素。
                           </p>
                           <p><a href="XMLType-views.html#GUID-5AA7CC36-1A4D-49D6-8071-5F2AB5CB27FE__CFHIBCBF">例10-8</a>创建了视图<code class="codeph">dept_xml</code> ，它符合XML模式<code class="codeph">dept.xsd</code> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-5AA7CC36-1A4D-49D6-8071-5F2AB5CB27FE__CFHIIBIH">
                           <p class="titleinexample">示例10-5在SQL / XML发布函数中使用命名空间前缀</p><pre class="pre codeblock"><code>SELECT XMLElement（“ipo：Employee”，XMLAttributes（'http://www.oracle.com/emp_simple.xsd'AS“xmlns：ipo”，'http：//www.oracle.com/emp_simple.xsd http：/ /www.oracle.com/emp_simple.xsd'AS“xmlns：xsi”），XMLForest（e.employee_id AS“ipo：EmployeeId”，e.last_name AS“ipo：Name”，e.job_id AS“ipo：Job” ，e.manager_id AS“ipo：Manager”，TO_CHAR（e.hire_date，'YYYY-MM-DD'）AS“ipo：HireDate”，e.salary AS“ipo：Salary”，e.commission_pct AS“ipo：Commission “，XMLForest（d.department_id AS”ipo：DeptNo“，d.department_name AS”ipo：DeptName“，d.location_id AS”ipo：Location“）AS”ipo：Dept“））FROM employees e，departments d .department_id = d.department_id AND d.department_id = 20; BEGIN  - 删除架构（如果已存在）（否则错误）DBMS_XMLSCHEMA.deleteSchema（'emp-noname.xsd'，4）;结束;</code></pre><pre class="pre codeblock"><code>XMLELEMENT（“IPO：EMPLOYEE”，XMLATTRIBUTES（'HTTP://WWW.ORACLE.COM/EMP_SIMPLE.XSD'AS ------------------------ -------------------------------------------------- ------ &lt;ipo：Employee xmlns：ipo =“http://www.oracle.com/emp_simple.xsd”xmlns：xsi =“http://www.oracle.com/emp_simple.xsd http：/ /www.oracle.com/emp_simple.xsd“&gt; &lt;ipo：EmployeeId&gt; 201 &lt;/ ipo：EmployeeId&gt; &lt;ipo：Name&gt; Hartstein &lt;/ ipo：Name&gt; &lt;ipo：Job&gt; MK_MAN &lt;/ ipo：Job&gt; &lt;ipo ：经理&gt; 100 &lt;/ ipo：经理&gt; &lt;ipo：HireDate&gt; 2004-02-17 &lt;/ ipo：HireDate&gt; &lt;ipo：Salary&gt; 13000 &lt;/ ipo：Salary&gt; &lt;ipo：Dept&gt; &lt;ipo：DeptNo&gt; 20 &lt; / ipo：DeptNo&gt; &lt;ipo：DeptName&gt; Marketing &lt;/ ipo：DeptName&gt; &lt;ipo：Location&gt; 1800 &lt;/ ipo：Location&gt; &lt;/ ipo：Dept&gt; &lt;/ ipo：Employee&gt; &lt;ipo：Employee xmlns：ipo =“ http://www.oracle.com/emp_simple.xsd“xmlns：xsi =”http://www.oracle.com/emp_simple.xsd http://www.oracle.com/emp_simple.xsd"&gt;&lt;ipo： EmployeeId&gt; 202 &lt;/ ipo：EmployeeId&gt; &lt;ipo：Name&gt; Fay &lt;/ ipo：Name&gt; &lt;ipo：Job&gt; MK_REP &lt;/ ipo：Job&gt; &lt;ipo：Manager&gt; 201 &lt;/ ipo：Manager&gt; &lt;ipo：HireDate&gt; 2005-08-17 &lt;/ ipo：HireDate&gt; &lt;ipo：Salary&gt; 6000 &lt;/ ipo：Salary&gt; &lt;ipo：Dept&gt; &lt;ipo：DeptNo&gt; 20 &lt;/ ipo：Dept No&gt; &lt;ipo：DeptName&gt; Marketing &lt;/ ipo：DeptName&gt; &lt;ipo：Location&gt; 1800 &lt;/ ipo：Location&gt; &lt;/ ipo：Dept&gt; &lt;/ ipo：Employee&gt;</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-5AA7CC36-1A4D-49D6-8071-5F2AB5CB27FE__CFHGDFAH">
                           <p class="titleinexample">示例10-6没有目标命名空间的XML架构</p><pre class="pre codeblock"><code>BEGIN DBMS_XMLSCHEMA.registerSchema（SCHEMAURL =&gt;' <span class="bold">emp-noname.xsd</span> '，SCHEMADOC =&gt;'&lt;schema xmlns =“http://www.w3.org/2001/XMLSchema”xmlns：xdb =“http：// xmlns。 oracle.com/xdb“&gt; &lt;element name =”Employee“&gt; &lt;complexType&gt; &lt;sequence&gt; &lt;element name =”EmployeeId“type =”positiveInteger“/&gt; &lt;element name =”Name“type =”string“/&gt; &lt; element name =“Job”type =“string”/&gt; &lt;element name =“Manager”type =“positiveInteger”/&gt; &lt;element name =“HireDate”type =“date”/&gt; &lt;element name =“Salary”type = “positiveInteger”/&gt; &lt;element name =“Commission”type =“positiveInteger”/&gt; &lt;element name =“Dept”&gt; &lt;complexType&gt; &lt;sequence&gt; &lt;element name =“DeptNo”type =“positiveInteger”/&gt; &lt;element name =“DeptName”type =“string”/&gt; &lt;element name =“Location”type =“positiveInteger”/&gt; &lt;/ sequence&gt; &lt;/ complexType&gt; &lt;/ element&gt; &lt;/ sequence&gt; &lt;/ complexType&gt; &lt;/ element&gt; &lt; / schema&gt;'，LOCAL =&gt; TRUE，GENTYPES =&gt; TRUE）;结束;</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-5AA7CC36-1A4D-49D6-8071-5F2AB5CB27FE__CFHEICEA">
                           <p class="titleinexample">示例10-7为没有目标命名空间的XML模式创建视图</p><pre class="pre codeblock"><code>创建或替换视图<span class="bold">emp_xml的</span> XMLType XMLSCHEMA“emp-noname.xsd”ELEMENT“Employee”WITH OBJECT ID（XMLCast（XMLQuery（'/ Employee / EmployeeId / text（）'PASSING OBJECT_VALUE RETURNING CONTENT）AS BINARY_DOUBLE））AS SELECT XMLElement（ “Employee”，XMLAttributes（'http://www.w3.org/2001/XMLSchema-instance'AS“xmlns：xsi”，'emp-noname.xsd'AS“ <span class="bold">xsi：noNamespaceSchemaLocation</span> ”），XMLForest（e.employee_id AS“EmployeeId”，e.last_name AS“Name”，e.job_id AS“Job”，e.manager_id AS“Manager”，e.hire_date AS“HireDate”，e.salary AS“Salary”，e.commission_pct AS“ Commission“，XMLForest（d.department_id AS”DeptNo“，d.department_name AS”DeptName“，d.location_id AS”Location“）AS”Dept“））FROM employees e，departments d WHERE e.department_id = d.department_id;</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-5AA7CC36-1A4D-49D6-8071-5F2AB5CB27FE__CFHIBCBF">
                           <p class="titleinexample">示例10-8在基于XML模式的XMLType视图中使用SQL / XML函数</p><pre class="pre codeblock"><code>BEGIN  - 删除架构（如果已存在）（否则错误）DBMS_XMLSCHEMA.deleteSchema（'http://www.oracle.com/dept.xsd'，4）;结束; / BEGIN DBMS_XMLSCHEMA.registerSchema（SCHEMAURL =&gt; 'http://www.oracle.com/ <span class="bold">dept.xsd'，SCHEMADOC&gt;“&lt;</span>架构的xmlns = “http://www.w3.org/2001/XMLSchema” targetNamespace的= “http://www.oracle.com/dept.xsd”version =“1.0”xmlns：xdb =“http://xmlns.oracle.com/xdb”elementFormDefault =“qualified”&gt; &lt;element name =“Department” &gt; &lt;complexType&gt; &lt;sequence&gt; &lt;element name =“DeptNo”type =“positiveInteger”/&gt; &lt;element name =“DeptName”type =“string”/&gt; &lt;element name =“Location”type =“positiveInteger”/&gt; &lt; element name =“Employee”maxOccurs =“unbounded”&gt; &lt;complexType&gt; &lt;sequence&gt; &lt;element name =“EmployeeId”type =“positiveInteger”/&gt; &lt;element name =“Name”type =“string”/&gt; &lt;element name = “Job”type =“string”/&gt; &lt;element name =“Manager”type =“positiveInteger”/&gt; &lt;element name =“HireDate”type =“date”/&gt; &lt;element name =“Salary”type =“positiveInteger” /&gt; &lt;element name =“Commission”type =“positiveInteger”/&gt; &lt;/ sequence&gt; &lt;/ complexType&gt; &lt;/ element&gt; &lt;/ sequence&gt; &lt;/ complexType&gt; &lt;/ element&gt; &lt;/ schema&gt;'，LO CAL =&gt; TRUE，GENTYPES =&gt; FALSE）;结束; /创建或替换视图<span class="bold">dept_xml的</span> XMLType XMLSCHEMA“http://www.oracle.com/dept.xsd”元素“部门”与对象ID（XMLCast（XMLQuery（'/ Department / DeptNo'PASSING OBJECT_VALUE RETURNING CONTENT）作为BINARY_DOUBLE） ）AS SELECT XMLElement（“Department”，XMLAttributes（'http://www.oracle.com/emp.xsd'AS“xmlns”，'http：//www.w3.org/2001/XMLSchema-instance'AS“ xmlns：xsi“，'http：//www.oracle.com/dept.xsd http://www.oracle.com/dept.xsd'AS”xsi：schemaLocation“），XMLForest（d.department_id AS”DeptNo“ ，d.department_name AS“DeptName”，d.location_id AS“Location”），（SELECT XMLagg（XMLElement（“Employee”，XMLForest（e.employee_id AS“EmployeeId”，e.last_name AS“Name”，e.job_id AS “Job”，e.manager_id AS“Manager”，to_char（e.hire_date，'YYYY-MM-DD'）AS“Hiredate”，e.salary AS“Salary”，e.commission_pct AS“Commission”）））FROM员工e WHERE e.department_id = d.department_id））来自部门d;</code></pre><p>这是结果的<code class="codeph">XMLType</code>实例：</p><pre class="pre codeblock"><code>SELECT OBJECT_VALUE AS result dept_xml WHERE ROWNUM &lt;2;结果------------------------------------------------- --------------- &lt;Department xmlns =“http://www.oracle.com/emp.xsd”xmlns：xsi =“http://www.w3.org/2001 / XMLSchema-instance“xsi：schemaLocation =”http://www.oracle.com/dept.xsd http://www.oracle.com/dept.xsd“&gt; &lt;DeptNo&gt; 10 &lt;/ DeptNo&gt; &lt;DeptName&gt;管理&lt;/ DeptName&gt; &lt;Location&gt; 1700 &lt;/ Location&gt; &lt;Employee&gt; &lt;EmployeeId&gt; 200 &lt;/ EmployeeId&gt; &lt;Name&gt; Whalen &lt;/ Name&gt; &lt;Job&gt; AD_ASST &lt;/ Job&gt; &lt;Manager&gt; 101 &lt;/ Manager&gt; &lt;Hiredate&gt; 2003-09-17 &lt;/ Hiredate&gt; &lt;薪水&gt; 4400 &lt;/薪水&gt; &lt;/员工&gt; &lt;/部门&gt;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="XMLType-views.html#GUID-B3F5A02B-8D97-411A-B542-3D441BE3DEF9" title="您可以使用SQL / XML发布函数来创建基于XML Schema的XMLType视图。">使用SQL / XML发布函数创建基于XML模式的XMLType视图</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADXDB5182"></a><div class="props_rev_3"><a id="GUID-E50ECA03-3E64-4089-9770-62C98D23DD67" name="GUID-E50ECA03-3E64-4089-9770-62C98D23DD67"></a><h4 id="ADXDB-GUID-E50ECA03-3E64-4089-9770-62C98D23DD67" class="sect4"><span class="enumeration_section">10.4.2</span>使用对象类型或对象视图创建基于XML模式的XMLType视图</h4>
                  <div>
                     <p>您可以通过注释XML模式从对象类型或视图创建基于XML模式的<code class="codeph">XMLType</code>视图，以定义XML类型与SQL对象类型和对象属性之间的映射。
                     </p>
                     <div class="section">
                        <p>要从对象类型或对象视图创建基于XML Schema的<code class="codeph">XMLType</code>视图，请执行以下操作：</p>
                        <ol>
                           <li>
                              <p>创建对象类型（如果它们尚不存在）。</p>
                           </li>
                           <li>
                              <p>创建并注册XML模式，对其进行注释以定义XML类型与SQL对象类型和属性之间的映射。</p>
                              <p><span class="italic">在</span>注册<span class="italic">之前</span>注释XML模式。通常在包装现有数据以创建<code class="codeph">XMLType</code>视图时执行此操作。
                              </p>
                              <p>注册此类XML架构文档时，可能会发生以下验证：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>基于<code class="codeph">simpleType</code>属性或元素的<code class="codeph">SQLType</code> 。SQL类型必须与相应<code class="codeph">XMLType</code>数据的XML类型兼容。例如，XML <code class="codeph">string</code>数据类型只能映射到<code class="codeph">VARCHAR2</code>或大对象（LOB）数据类型。
                                    </p>
                                 </li>
                                 <li>
                                    <p>为基于<code class="codeph">complexType</code>元素指定的<code class="codeph">SQLType</code> 。这是一个LOB或一个对象类型，其结构必须与<code class="codeph">complexType</code>的声明兼容，也就是说，对象类型必须具有正确数量的具有正确数据类型的属性。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>创建<code class="codeph">XMLType</code>视图，指定XML架构URL和根元素名称。定义视图的查询首先构造对象实例，然后将它们转换为XML。</p>
                              <ol type="a">
                                 <li>
                                    <p>创建一个对象视图。</p>
                                 </li>
                                 <li>
                                    <p>在对象视图上创建<code class="codeph">XMLType</code>视图。
                                    </p>
                                 </li>
                              </ol>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>本节中的主题提供了使用对象类型或对象视图创建基于XML模式的<code class="codeph">XMLType</code>视图的示例。它们基于包含员工和部门数据的关系表。
                        </p>
                        <p>相同的关系数据用于创建两个<code class="codeph">XMLType</code>视图中的每一个。在员工视图<code class="codeph">emp_xml</code> ，XML文档描述员工，员工的部门作为嵌套信息。在部门视图<code class="codeph">dept_xml</code> ，XML数据描述了一个部门，部门的员工作为嵌套信息。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="XMLType-views.html#GUID-205D69F3-0966-4418-A241-A7BBB37C79A4">使用嵌套的部门信息创建XMLType员工视图</a><br>这里的<code class="codeph">emp_xml</code>基于对象视图创建<code class="codeph">XMLType</code>视图<code class="codeph">emp_xml</code> 。
                        </li>
                        <li class="ulchildlink"><a href="XMLType-views.html#GUID-6FFDAA7E-8505-4055-A476-6EEEBCF6D79E">使用嵌套的员工信息创建XMLType部门视图</a><br>创建<code class="codeph">XMLType</code>视图<code class="codeph">dept_xml</code> ，以便视图中的每个部门都包含嵌套的员工信息。
                        </li>
                     </ul>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="XML-Schema-and-query-basic.html#GUID-C09824C1-6B02-4556-A265-B1749DEE8DE1" title="XML Schema是用于描述XML文档的内容和结构的标准。您可以注册，更新和删除与Oracle XML DB一起使用的XML架构。您可以定义用于基于XML模式的数据的存储结构，并将XML模式数据类型映射到SQL数据类型。">XML模式存储和查询：基本</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="XMLType-views.html#GUID-4BA4C794-3CAA-43D6-B8C4-5FE946FC1134" title="基于XML Schema的XMLType视图中的XML数据被约束为符合XML模式。您可以使用SQL / XML发布函数或使用对象类型或视图创建基于模式的XMLType视图。">创建基于XML模式的XMLType视图</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB5183"></a><div class="props_rev_3"><a id="GUID-205D69F3-0966-4418-A241-A7BBB37C79A4" name="GUID-205D69F3-0966-4418-A241-A7BBB37C79A4"></a><h5 id="ADXDB-GUID-205D69F3-0966-4418-A241-A7BBB37C79A4" class="sect5"><span class="enumeration_section">10.4.2.1</span>使用嵌套的部门信息创建XMLType员工视图</h5>
                     <div>
                        <p>这里的<code class="codeph">emp_xml</code>基于对象视图创建<code class="codeph">XMLType</code>视图<code class="codeph">emp_xml</code> 。
                        </p>
                        <div class="section">
                           <p>对于视图创建的<span class="italic">最后</span>一步，有两种<span class="italic">选择</span> ：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="XMLType-views.html#GUID-197D406F-1384-4E86-B778-4F743E741433" title="使用对象类型创建XMLType视图。">步骤3a。创建XMLType视图emp_xml使用对象类型emp_t</a> -创建<code class="codeph">XMLType</code>视图<code class="codeph">emp_xml</code>使用对象类型<code class="codeph">emp_t</code></p>
                              </li>
                              <li>
                                 <p><a href="XMLType-views.html#GUID-EF8A2855-1364-4D6E-9023-7F6358F0A995" title="使用对象视图创建XMLType视图。">步骤3b。创建XMLType视图emp_xml使用对象视图emp_v</a> -创建<code class="codeph">XMLType</code>视图<code class="codeph">emp_xml</code>使用对象视图<code class="codeph">emp_v</code></p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="XMLType-views.html#GUID-8B26B5AC-0449-4708-8B61-3A1F003D9922">步骤1。为XMLType Employee View创建对象类型</a><br>为基于XML模式的视图创建对象类型。
                           </li>
                           <li class="ulchildlink"><a href="XMLType-views.html#GUID-288BB72F-FFD9-453B-BDCA-9A75AA555192">第2步。创建并注册XML Schema emp_complex.xsd</a><br>创建并注册XML模式<code class="codeph">emp_complex.xsd</code> 。该模式将XML元素和属性映射到相应的对象 - 关系对象属性。
                           </li>
                           <li class="ulchildlink"><a href="XMLType-views.html#GUID-197D406F-1384-4E86-B778-4F743E741433">步骤3a。使用对象类型emp_t创建XMLType视图emp_xml</a><br>使用对象类型创建<code class="codeph">XMLType</code>视图。
                           </li>
                           <li class="ulchildlink"><a href="XMLType-views.html#GUID-EF8A2855-1364-4D6E-9023-7F6358F0A995">步骤3b。创建XMLType视图emp_xml使用对象视图emp_v</a><br>使用对象视图创建<code class="codeph">XMLType</code>视图。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="XMLType-views.html#GUID-E50ECA03-3E64-4089-9770-62C98D23DD67" title="您可以通过注释XML模式从对象类型或视图创建基于XML模式的XMLType视图，以定义XML类型与SQL对象类型和对象属性之间的映射。">使用对象类型或对象视图创建基于XML模式的XMLType视图</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ADXDB5185"></a><a id="ADXDB5184"></a><div class="props_rev_3"><a id="GUID-8B26B5AC-0449-4708-8B61-3A1F003D9922" name="GUID-8B26B5AC-0449-4708-8B61-3A1F003D9922"></a><h6 id="ADXDB-GUID-8B26B5AC-0449-4708-8B61-3A1F003D9922" class="sect6"><span class="enumeration_section">10.4.2.1.1</span>第1步。为XMLType Employee View创建对象类型</h6>
                        <div>
                           <p>为基于XML模式的视图创建对象类型。</p>
                           <div class="section">
                              <p><a href="XMLType-views.html#GUID-8B26B5AC-0449-4708-8B61-3A1F003D9922__CHDEBBJC">例10-9</a>创建了其他步骤中使用的对象类型。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-8B26B5AC-0449-4708-8B61-3A1F003D9922__CHDEBBJC">
                              <p class="titleinexample">示例10-9为基于模式的XMLType视图创建对象类型</p><pre class="pre codeblock"><code>CREATE TYPE dept_t AS OBJECT（deptno NUMBER（4），dname VARCHAR2（30），loc NUMBER（4））; / CREATE TYPE emp_t AS OBJECT（empno NUMBER（6），ename VARCHAR2（25），job VARCHAR2（10），mgr NUMBER（6），hiredate DATE，sal NUMBER（8,2），comm NUMBER（2,2）， dept dept_t）; /</code></pre></div>
                           <!-- class="example" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="XMLType-views.html#GUID-205D69F3-0966-4418-A241-A7BBB37C79A4" title="这里的示例基于对象视图创建XMLType视图emp_xml。">使用嵌套的部门信息创建XMLType员工视图</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADXDB5189"></a><a id="ADXDB5186"></a><div class="props_rev_3"><a id="GUID-288BB72F-FFD9-453B-BDCA-9A75AA555192" name="GUID-288BB72F-FFD9-453B-BDCA-9A75AA555192"></a><h6 id="ADXDB-GUID-288BB72F-FFD9-453B-BDCA-9A75AA555192" class="sect6"><span class="enumeration_section">10.4.2.1.2</span>第2步。创建并注册XML Schema emp_complex.xsd</h6>
                        <div>
                           <p>创建并注册XML模式<code class="codeph">emp_complex.xsd</code> 。该模式将XML元素和属性映射到相应的对象 - 关系对象属性。
                           </p>
                           <div class="section">
                              <p>创建XML模式<code class="codeph">emp_complex.xsd</code> ，它指定XML元素和属性如何映射到对象类型（ <code class="codeph">xdb:SQLType</code>注释）中的相应对象属性，然后注册它。<a href="XMLType-views.html#GUID-288BB72F-FFD9-453B-BDCA-9A75AA555192__CHDFDHFI">例10-10</a>注册它。
                              </p>
                              <p><a href="XMLType-views.html#GUID-288BB72F-FFD9-453B-BDCA-9A75AA555192__CHDFDHFI">例10-10</a>使用目标位置<code class="codeph">http://www.oracle.com/emp_complex.xsd</code>创建并注册XML模式。</p>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-288BB72F-FFD9-453B-BDCA-9A75AA555192__CHDFDHFI">
                              <p class="titleinexample">示例10-10创建和注册XML模式emp_complex.xsd</p><pre class="pre codeblock"><code>BEGIN  - 删除架构（如果已存在）（否则错误）DBMS_XMLSCHEMA.deleteSchema（'http://www.oracle.com/emp_complex.xsd'，4）;结束; / COMMIT; BEGIN DBMS_XMLSCHEMA.registerSchema（SCHEMAURL =&gt;'http://www.oracle.com/emp_complex.xsd'，SCHEMADOC =&gt;'&lt;？xml版本=“1.0”？&gt; &lt;xsd：schema xmlns：xsd =“http://www.w3.org/2001/XMLSchema”xmlns：xsi =“http://www.w3.org/2001/XMLSchema-instance”xmlns：xdb =“ http://xmlns.oracle.com/xdb“xsi：schemaLocation =”http://xmlns.oracle.com/xdb http://xmlns.oracle.com/xdb/XDBSchema.xsd“&gt; &lt;xsd：元素名称=“ <span class="bold">Employee</span> ”type =“EMP_TType”xdb：SQLType =“EMP_T”/&gt; &lt;xsd：complexType name =“EMP_TType”xdb：SQLType =“ <span class="bold">EMP_T</span> ”xdb：maintainDOM =“false”&gt; &lt;xsd：sequence&gt; &lt;xsd： element name =“EMPNO”type =“xsd：double”xdb：SQLName =“EMPNO”xdb：SQLType =“NUMBER”/&gt; &lt;xsd：element name =“ENAME”xdb：SQLName =“ENAME”xdb：SQLType =“ VARCHAR2“&gt; &lt;xsd：simpleType&gt; &lt;xsd：restriction base =”xsd：string“&gt; &lt;xsd：maxLength value =”25“/&gt; &lt;/ xsd：restriction&gt; &lt;/ xsd：simpleType&gt; &lt;/ xsd：element&gt; &lt; xsd：element name =“JOB”xdb：SQLName =“JOB”xdb：SQLType =“VARCHAR2”&gt; &lt;xsd：simpleType&gt; &lt;xsd：restriction base =“xsd：string”&gt; &lt;xsd：maxLength value =“10”/ &gt; &lt;/ xsd：restriction&gt; &lt;/ xsd：simpleType&gt; &lt;/ xsd：element&gt; &lt;xsd：element name =“MGR”type =“xsd：double”xdb：SQLName =“MGR”xdb：SQLType =“NUMBER”/ &gt; &lt;xsd：元素名称=“HIREDATE”type =“xsd：date”xdb：SQLName =“HIREDATE”xdb：SQLType =“DATE”/&gt; &lt;xsd：element name =“SAL”type =“xsd：double”xdb：SQLName =“SAL” xdb：SQLType =“NUMBER”/&gt; &lt;xsd：element name =“COMM”type =“xsd：double”xdb：SQLName =“COMM”xdb：SQLType =“NUMBER”/&gt; &lt;xsd：element name =“ <span class="bold">DEPT</span> ” type =“DEPT_TType”xdb：SQLName =“DEPT”xdb：SQLType =“DEPT_T”/&gt; &lt;/ xsd：sequence&gt; &lt;/ xsd：complexType&gt; &lt;xsd：complexType name =“DEPT_TType”xdb：SQLType =“ <span class="bold">DEPT_T</span> ”xdb ：maintainDOM =“false”&gt; &lt;xsd：sequence&gt; &lt;xsd：element name =“DEPTNO”type =“xsd：double”xdb：SQLName =“DEPTNO”xdb：SQLType =“NUMBER”/&gt; &lt;xsd：element name = “DNAME”xdb：SQLName =“DNAME”xdb：SQLType =“VARCHAR2”&gt; &lt;xsd：simpleType&gt; &lt;xsd：restriction base =“xsd：string”&gt; &lt;xsd：maxLength value =“30”/&gt; &lt;/ xsd： restriction&gt; &lt;/ xsd：simpleType&gt; &lt;/ xsd：element&gt; &lt;xsd：element name =“LOC”type =“xsd：double”xdb：SQLName =“LOC”xdb：SQLType =“NUMBER”/&gt; &lt;/ xsd： sequence&gt; &lt;/ xsd：complexType&gt; &lt;/ xsd：schema&gt;'，LOCAL =&gt; TRUE，GENTYPES =&gt; FALSE）;结束; /</code></pre></div>
                           <!-- class="example" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="XMLType-views.html#GUID-205D69F3-0966-4418-A241-A7BBB37C79A4" title="这里的示例基于对象视图创建XMLType视图emp_xml。">使用嵌套的部门信息创建XMLType员工视图</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADXDB5191"></a><a id="ADXDB5190"></a><div class="props_rev_3"><a id="GUID-197D406F-1384-4E86-B778-4F743E741433" name="GUID-197D406F-1384-4E86-B778-4F743E741433"></a><h6 id="ADXDB-GUID-197D406F-1384-4E86-B778-4F743E741433" class="sect6"><span class="enumeration_section">10.4.2.1.3</span>步骤3a。使用对象类型emp_t创建XMLType视图emp_xml</h6>
                        <div>
                           <p>使用对象类型创建<code class="codeph">XMLType</code>视图。
                           </p>
                           <div class="section">
                              <p><a href="XMLType-views.html#GUID-197D406F-1384-4E86-B778-4F743E741433__CHDJAGIC">示例10-11</a>使用对象类型<code class="codeph">emp_t</code>创建<code class="codeph">XMLType</code>视图。
                              </p>
                              <p><a href="XMLType-views.html#GUID-197D406F-1384-4E86-B778-4F743E741433__CHDJAGIC">示例10-11</a>使用<code class="codeph">OBJECT ID</code>子句中的SQL / XML函数<code class="codeph">XMLCast</code>将XML员工编号转换为SQL数据类型<code class="codeph">BINARY_DOUBLE</code> 。</p>
                              <div class="infoboxnotealso" id="GUID-197D406F-1384-4E86-B778-4F743E741433__GUID-37726CAE-DA92-4A28-BA09-8DF6A2FC61BF">
                                 <p class="notep1">也可以看看：</p>
                                 <p><a href="XMLType-views.html#GUID-EF8A2855-1364-4D6E-9023-7F6358F0A995" title="使用对象视图创建XMLType视图。">步骤3b。创建XMLType视图emp_xml使用Object View emp_v</a>提供另一种创建视图<code class="codeph">emp_xml</code> ，该方法使用对象视图<code class="codeph">emp_v</code></p>
                              </div>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-197D406F-1384-4E86-B778-4F743E741433__CHDJAGIC">
                              <p class="titleinexample">示例10-11创建XMLType视图emp_xml使用对象类型emp_t</p><pre class="oac_no_warn" dir="ltr">创建或替换视图<span class="bold">emp_xml的</span> XMLType XMLSCHEMA“http://www.oracle.com/emp_complex.xsd”带有对象ID的元素“Employee”（XMLCast（XMLQuery（'/ Employee / EMPNO'PASSING OBJECT_VALUE RETURNING CONTENT）as BINARY_DOUBLE）） AS SELECT <span class="bold">emp_t</span> （e.employee_id，e.last_name，e.job_id，e.manager_id，e.hire_date，e.salary，e.commission_pct，dept_t（d.department_id，d.department_name，d.location_id））FROM employees e ，部门d WHERE e.department_id = d.department_id;</pre></div>
                           <!-- class="example" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="XMLType-views.html#GUID-205D69F3-0966-4418-A241-A7BBB37C79A4" title="这里的示例基于对象视图创建XMLType视图emp_xml。">使用嵌套的部门信息创建XMLType员工视图</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADXDB5193"></a><a id="ADXDB5192"></a><div class="props_rev_3"><a id="GUID-EF8A2855-1364-4D6E-9023-7F6358F0A995" name="GUID-EF8A2855-1364-4D6E-9023-7F6358F0A995"></a><h6 id="ADXDB-GUID-EF8A2855-1364-4D6E-9023-7F6358F0A995" class="sect6"><span class="enumeration_section">10.4.2.1.4</span>步骤3b。创建XMLType视图emp_xml使用对象视图emp_v</h6>
                        <div>
                           <p>使用对象视图创建<code class="codeph">XMLType</code>视图。
                           </p>
                           <div class="section">
                              <p><a href="XMLType-views.html#GUID-EF8A2855-1364-4D6E-9023-7F6358F0A995__CHDEAFJH">示例10-12</a>创建对象视图<code class="codeph">emp_v</code> ，然后基于该对象视图创建<code class="codeph">XMLType</code>视图<code class="codeph">emp_xml</code> 。
                              </p>
                              <div class="infoboxnotealso" id="GUID-EF8A2855-1364-4D6E-9023-7F6358F0A995__GUID-5C90308D-690D-4D23-BFF2-9D388BA4F0E2">
                                 <p class="notep1">也可以看看：</p>
                                 <p><a href="XMLType-views.html#GUID-197D406F-1384-4E86-B778-4F743E741433" title="使用对象类型创建XMLType视图。">步骤3a。创建XMLType视图emp_xml使用对象类型emp_t</a>创建视图<code class="codeph">emp_xml</code>的替代方法，该方法使用对象类型<code class="codeph">emp_t</code></p>
                              </div>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-EF8A2855-1364-4D6E-9023-7F6358F0A995__CHDEAFJH">
                              <p class="titleinexample">示例10-12基于对象视图创建对象视图和XMLType视图</p><pre class="oac_no_warn" dir="ltr">创建或替换视图<span class="bold">emp_v</span> OF <span class="bold">emp_t</span> WITH OBJECT ID（empno）AS SELECT <span class="bold">emp_t</span> （e.employee_id，e.last_name，e.job_id，e.manager_id，e.hire_date，e.salary，e.commission_pct，dept_t（d.department_id） ，d.department_name，d.location_id））FROM employees e，departments d WHERE e.department_id = d.department_id;创建或替换视图<span class="bold">emp_xml的</span> XMLType XMLSCHEMA“http://www.oracle.com/emp_complex.xsd”元素“Employee”，对象ID默认为选择值（p）FROM <span class="bold">emp_v</span> p;</pre></div>
                           <!-- class="example" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="XMLType-views.html#GUID-205D69F3-0966-4418-A241-A7BBB37C79A4" title="这里的示例基于对象视图创建XMLType视图emp_xml。">使用嵌套的部门信息创建XMLType员工视图</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="ADXDB5194"></a><div class="props_rev_3"><a id="GUID-6FFDAA7E-8505-4055-A476-6EEEBCF6D79E" name="GUID-6FFDAA7E-8505-4055-A476-6EEEBCF6D79E"></a><h5 id="ADXDB-GUID-6FFDAA7E-8505-4055-A476-6EEEBCF6D79E" class="sect5"><span class="enumeration_section">10.4.2.2</span>使用嵌套的员工信息创建XMLType部门视图</h5>
                     <div>
                        <p>创建<code class="codeph">XMLType</code>视图<code class="codeph">dept_xml</code> ，以便视图中的每个部门都包含嵌套的员工信息。
                        </p>
                        <div class="section">
                           <p>对于视图创建的<span class="italic">最后</span>一步，有两种<span class="italic">选择</span> ：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="XMLType-views.html#GUID-B30BAAA4-A9B0-4C74-96C7-89FCD44F7AA0" title="使用对象类型dept_t创建XMLType视图dept_xml。">步骤3a。创建XMLType视图dept_xml使用对象类型dept_t</a> - 使用部门的对象类型创建<code class="codeph">XMLType</code>视图<code class="codeph">dept_xml</code> ， <code class="codeph">dept_t</code></p>
                              </li>
                              <li>
                                 <p><a href="XMLType-views.html#GUID-50B49D70-F4A9-4C25-BABC-E0FBBB5F6FEF" title="您可以使用SQL / XML发布函数从关系表创建XMLType视图dept_xml，而无需使用对象类型dept_t。">步骤3b。创建XMLType视图dept_xml直接使用关系数据</a> - 直接使用关系数据</a>创建<code class="codeph">XMLType</code>视图<code class="codeph">dept_xml</code></p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="XMLType-views.html#GUID-055D62F0-797F-44DE-ADAE-AD3AEF5F4F6C">步骤1。为XMLType Department View创建对象类型</a><br>为基于XML模式的视图创建对象类型。
                           </li>
                           <li class="ulchildlink"><a href="XMLType-views.html#GUID-A55D6F10-D953-44C6-8D71-3EDF99CAD0D3">第2步。注册XML Schema dept_complex.xsd</a><br>注册XML模式<code class="codeph">dept_complex.xsd</code> 。
                           </li>
                           <li class="ulchildlink"><a href="XMLType-views.html#GUID-B30BAAA4-A9B0-4C74-96C7-89FCD44F7AA0">步骤3a。创建XMLType视图dept_xml使用对象类型dept_t</a><br>创建<code class="codeph">XMLType</code>视图<code class="codeph">dept_xml</code>使用对象类型<code class="codeph">dept_t</code> 。
                           </li>
                           <li class="ulchildlink"><a href="XMLType-views.html#GUID-50B49D70-F4A9-4C25-BABC-E0FBBB5F6FEF">步骤3b。创建XMLType视图dept_xml直接使用关系数据</a><br>您可以使用SQL / XML发布函数从关系表创建<code class="codeph">XMLType</code>视图<code class="codeph">dept_xml</code> ，而无需使用对象类型<code class="codeph">dept_t</code> 。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="XMLType-views.html#GUID-E50ECA03-3E64-4089-9770-62C98D23DD67" title="您可以通过注释XML模式从对象类型或视图创建基于XML模式的XMLType视图，以定义XML类型与SQL对象类型和对象属性之间的映射。">使用对象类型或对象视图创建基于XML模式的XMLType视图</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ADXDB5196"></a><a id="ADXDB5195"></a><div class="props_rev_3"><a id="GUID-055D62F0-797F-44DE-ADAE-AD3AEF5F4F6C" name="GUID-055D62F0-797F-44DE-ADAE-AD3AEF5F4F6C"></a><h6 id="ADXDB-GUID-055D62F0-797F-44DE-ADAE-AD3AEF5F4F6C" class="sect6"><span class="enumeration_section">10.4.2.2.1</span>第1步。为XMLType Department View创建对象类型</h6>
                        <div>
                           <p>为基于XML模式的视图创建对象类型。</p>
                           <div class="section">
                              <p><a href="XMLType-views.html#GUID-055D62F0-797F-44DE-ADAE-AD3AEF5F4F6C__CHDFHJCJ">例10-13</a>创建了其他步骤中使用的对象类型。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-055D62F0-797F-44DE-ADAE-AD3AEF5F4F6C__CHDFHJCJ">
                              <p class="titleinexample">示例10-13创建对象类型</p><pre class="pre codeblock"><code>CREATE TYPE emp_t AS OBJECT（empno NUMBER（6），ename VARCHAR2（25），job VARCHAR2（10），mgr NUMBER（6），hiredate DATE，sal NUMBER（8,2），comm NUMBER（2,2））; / CREATE OR REPLACE TYPE emplist_t AS TABLE OF emp_t; / CREATE TYPE dept_t AS OBJECT（deptno NUMBER（4），dname VARCHAR2（30），loc NUMBER（4），emps emplist_t）; /</code></pre></div>
                           <!-- class="example" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="XMLType-views.html#GUID-6FFDAA7E-8505-4055-A476-6EEEBCF6D79E" title="创建XMLType视图dept_xml，以便视图中的每个部门都包含嵌套的员工信息。">使用嵌套的员工信息创建XMLType部门视图</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADXDB5198"></a><a id="ADXDB5197"></a><div class="props_rev_3"><a id="GUID-A55D6F10-D953-44C6-8D71-3EDF99CAD0D3" name="GUID-A55D6F10-D953-44C6-8D71-3EDF99CAD0D3"></a><h6 id="ADXDB-GUID-A55D6F10-D953-44C6-8D71-3EDF99CAD0D3" class="sect6"><span class="enumeration_section">10.4.2.2.2</span>第2步。注册XML Schema dept_complex.xsd</h6>
                        <div>
                           <p>注册XML模式<code class="codeph">dept_complex.xsd</code> 。
                           </p>
                           <div class="section">
                              <p><a href="XMLType-views.html#GUID-A55D6F10-D953-44C6-8D71-3EDF99CAD0D3__CHDJDCGF">例10-14</a>说明了这一点。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-A55D6F10-D953-44C6-8D71-3EDF99CAD0D3__CHDJDCGF">
                              <p class="titleinexample">示例10-14注册XML Schema dept_complex.xsd</p><pre class="pre codeblock"><code>BEGIN  - 删除架构（如果已存在）（否则错误）DBMS_XMLSCHEMA.deleteSchema（'http://www.oracle.com/dept_complex.xsd'，4）;结束; / BEGIN DBMS_XMLSCHEMA.registerSchema（SCHEMAURL =&gt;'http://www.oracle.com/dept_complex.xsd',SCHEMADOC =&gt;'&lt;？xml版本=“1.0”？&gt; &lt;xsd：schema xmlns：xsd =“http://www.w3.org/2001/XMLSchema”xmlns：xsi =“http://www.w3.org/2001/XMLSchema-instance”xmlns：xdb =“ http://xmlns.oracle.com/xdb“xsi：schemaLocation =”http://xmlns.oracle.com/xdb http://xmlns.oracle.com/xdb/XDBSchema.xsd“&gt; &lt;xsd：元素名称=“ <span class="bold">Department</span> ”type =“DEPT_TType”xdb：SQLType =“ <span class="bold">DEPT_T</span> ”/&gt; &lt;xsd：complexType name =“DEPT_TType”xdb：SQLType =“ <span class="bold">DEPT_T</span> ”xdb：maintainDOM =“false”&gt; &lt;xsd：sequence&gt; &lt;xsd： element name =“DEPTNO”type =“xsd：double”xdb：SQLName =“DEPTNO”xdb：SQLType =“NUMBER”/&gt; &lt;xsd：element name =“DNAME”xdb：SQLName =“DNAME”xdb：SQLType =“ VARCHAR2“&gt; &lt;xsd：simpleType&gt; &lt;xsd：restriction base =”xsd：string“&gt; &lt;xsd：maxLength value =”30“/&gt; &lt;/ xsd：restriction&gt; &lt;/ xsd：simpleType&gt; &lt;/ xsd：element&gt; &lt; xsd：element name =“LOC”type =“xsd：double”xdb：SQLName =“LOC”xdb：SQLType =“NUMBER”/&gt; &lt;xsd：element name =“ <span class="bold">EMPS</span> ”type =“EMP_TType”maxOccurs =“unbounded” minOccurs =“0”xdb：SQLName =“EMPS”xdb：SQLCollType =“EMPLIST_T”xdb：SQLType =“ <span class="bold">EMP_T</span> ”xdb：SQLCollSchema =“HR”/&gt; &lt;/ xsd：sequence&gt; &lt;/ xsd：complexTyp e&gt; &lt;xsd：complexType name =“EMP_TType”xdb：SQLType =“ <span class="bold">EMP_T</span> ”xdb：maintainDOM =“false”&gt; &lt;xsd：sequence&gt; &lt;xsd：element name =“EMPNO”type =“xsd：double”xdb：SQLName =“EMPNO”xdb：SQLType =“NUMBER”/&gt; &lt;xsd：element name =“ENAME”xdb：SQLName =“ENAME”xdb：SQLType =“VARCHAR2”&gt; &lt;xsd：simpleType&gt; &lt;xsd：restriction base =“xsd ：string“&gt; &lt;xsd：maxLength value =”25“/&gt; &lt;/ xsd：restriction&gt; &lt;/ xsd：simpleType&gt; &lt;/ xsd：element&gt; &lt;xsd：element name =”JOB“xdb：SQLName =”JOB“xdb ：SQLType =“VARCHAR2”&gt; &lt;xsd：simpleType&gt; &lt;xsd：restriction base =“xsd：string”&gt; &lt;xsd：maxLength value =“10”/&gt; &lt;/ xsd：restriction&gt; &lt;/ xsd：simpleType&gt; &lt;/ xsd ：element&gt; &lt;xsd：element name =“MGR”type =“xsd：double”xdb：SQLName =“MGR”xdb：SQLType =“NUMBER”/&gt; &lt;xsd：element name =“HIREDATE”type =“xsd：date “xdb：SQLName =”HIREDATE“xdb：SQLType =”DATE“/&gt; &lt;xsd：element name =”SAL“type =”xsd：double“xdb：SQLName =”SAL“xdb：SQLType =”NUMBER“/&gt; &lt; xsd：element name =“COMM”type =“xsd：double”xdb：SQLName =“COMM”xdb：SQLType =“NUMBER”/&gt; &lt;/ xsd：sequence&gt; &lt;/ xsd：complexType&gt; &lt;/ xsd：schema&gt;' ，LOCAL =&gt; TRUE，GENTYP ES =&gt; FALSE）;结束; /</code></pre></div>
                           <!-- class="example" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="XMLType-views.html#GUID-6FFDAA7E-8505-4055-A476-6EEEBCF6D79E" title="创建XMLType视图dept_xml，以便视图中的每个部门都包含嵌套的员工信息。">使用嵌套的员工信息创建XMLType部门视图</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADXDB5200"></a><a id="ADXDB5199"></a><div class="props_rev_3"><a id="GUID-B30BAAA4-A9B0-4C74-96C7-89FCD44F7AA0" name="GUID-B30BAAA4-A9B0-4C74-96C7-89FCD44F7AA0"></a><h6 id="ADXDB-GUID-B30BAAA4-A9B0-4C74-96C7-89FCD44F7AA0" class="sect6"><span class="enumeration_section">10.4.2.2.3</span>步骤3a。创建XMLType视图dept_xml使用对象类型dept_t</h6>
                        <div>
                           <p>创建<code class="codeph">XMLType</code>视图<code class="codeph">dept_xml</code>使用对象类型<code class="codeph">dept_t</code> 。
                           </p>
                           <div class="section">
                              <p><a href="XMLType-views.html#GUID-B30BAAA4-A9B0-4C74-96C7-89FCD44F7AA0__CHDBHBCH">例10-15</a>说明了这一点。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-B30BAAA4-A9B0-4C74-96C7-89FCD44F7AA0__CHDBHBCH">
                              <p class="titleinexample">示例10-15使用对象类型dept_t创建XMLType视图dept_xml</p><pre class="pre codeblock"><code>创建或替换视图dept_xml的XMLType XMLSCHEMA“http://www.oracle.com/dept_complex.xsd”元素“部门”与对象ID（XMLCast（XMLQuery（'/ Department / DEPTNO'PASSING OBJECT_VALUE RETURNING CONTENT））作为BINARY_DOUBLE）） AS SELECT <span class="bold">dept_t</span> （d.department_id，d.department_name，d.location_id，cast（MULTISET（SELECT emp_t（e.employee_id，e.last_name，e.job_id，e.manager_id，e.hire_date，e.salary，e.commission_pct ）FROM employees e WHERE e.department_id = d.department_id）AS emplist_t））FROM departments d;</code></pre></div>
                           <!-- class="example" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="XMLType-views.html#GUID-6FFDAA7E-8505-4055-A476-6EEEBCF6D79E" title="创建XMLType视图dept_xml，以便视图中的每个部门都包含嵌套的员工信息。">使用嵌套的员工信息创建XMLType部门视图</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADXDB5202"></a><a id="ADXDB5201"></a><div class="props_rev_3"><a id="GUID-50B49D70-F4A9-4C25-BABC-E0FBBB5F6FEF" name="GUID-50B49D70-F4A9-4C25-BABC-E0FBBB5F6FEF"></a><h6 id="ADXDB-GUID-50B49D70-F4A9-4C25-BABC-E0FBBB5F6FEF" class="sect6"><span class="enumeration_section">10.4.2.2.4</span>步骤3b。创建XMLType视图dept_xml直接使用关系数据</h6>
                        <div>
                           <p>您可以使用SQL / XML发布函数从关系表创建<code class="codeph">XMLType</code>视图<code class="codeph">dept_xml</code> ，而无需使用对象类型<code class="codeph">dept_t</code> 。
                           </p>
                           <div class="section">
                              <p><a href="XMLType-views.html#GUID-50B49D70-F4A9-4C25-BABC-E0FBBB5F6FEF__CHDEHIFF">例10-16</a>说明了这一点。
                              </p>
                              <div class="infoboxnote" id="GUID-50B49D70-F4A9-4C25-BABC-E0FBBB5F6FEF__GUID-2E06B65F-12C2-4D27-9A94-E43164A83C40">
                                 <p class="notep1">注意：</p>
                                 <p>必须在视图级别指定XML模式和元素信息，因为<code class="codeph">SELECT</code>列表可以从基础表中任意构造不同XML模式的XML。
                                 </p>
                              </div>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-50B49D70-F4A9-4C25-BABC-E0FBBB5F6FEF__CHDEHIFF">
                              <p class="titleinexample">示例10-16创建XMLType视图dept_xml直接使用关系数据</p><pre class="pre codeblock"><code>创建或替换视图dept_xml的XMLType XMLSCHEMA“http://www.oracle.com/dept_complex.xsd”元素“部门”与对象ID（XMLCast（XMLQuery（'/ Department / DEPTNO'PASSING OBJECT_VALUE RETURNING CONTENT））作为BINARY_DOUBLE）） AS SELECT XMLElement（“部门”，XMLAttributes（'http://www.oracle.com/dept_complex.xsd'AS“xmlns”，'http：//www.w3.org/2001/XMLSchema-instance'AS“xmlns ：xsi“，'http：//www.oracle.com/dept_complex.xsd http://www.oracle.com/dept_complex.xsd'AS”xsi：schemaLocation“），XMLForest（d.department_id”DeptNo“，d .department_name“DeptName”，d.location_id“Location”），（SELECT XMLAgg（XMLElement（“Employee”，XMLForest（e.employee_id“EmployeeId”，e.last_name“Name”，e.job_id“Job”，e.manager_id “经理”，e.hire_date“Hiredate”，e.salary“薪水”，e.commission_pct“佣金”）））来自员工e.eERE_idpartment_id = d.department_id））来自部门d;</code></pre></div>
                           <!-- class="example" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="XMLType-views.html#GUID-6FFDAA7E-8505-4055-A476-6EEEBCF6D79E" title="创建XMLType视图dept_xml，以便视图中的每个部门都包含嵌套的员工信息。">使用嵌套的员工信息创建XMLType部门视图</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
               </div>
            </div><a id="ADXDB5204"></a><a id="ADXDB5205"></a><a id="ADXDB5203"></a><div class="props_rev_3"><a id="GUID-5191DBB9-EEA9-402C-BAD2-28AB6894E63D" name="GUID-5191DBB9-EEA9-402C-BAD2-28AB6894E63D"></a><h3 id="ADXDB-GUID-5191DBB9-EEA9-402C-BAD2-28AB6894E63D" class="sect3"><span class="enumeration_section">10.5</span>从XMLType表创建XMLType视图</h3>
               <div>
                  <p>可以在<code class="codeph">XMLType</code>表上创建<code class="codeph">XMLType</code>视图，例如，转换XML数据或限制返回的行。
                  </p>
                  <div class="section">
                     <p><a href="XMLType-views.html#GUID-5191DBB9-EEA9-402C-BAD2-28AB6894E63D__CFHJBHJI">示例10-17</a>通过限制基础<code class="codeph">XMLType</code>表中包含的行来创建<code class="codeph">XMLType</code>视图。它使用XML模式<code class="codeph">dept_complex.xsd</code>来创建基础表 - 请参阅<a href="XMLType-views.html#GUID-6FFDAA7E-8505-4055-A476-6EEEBCF6D79E" title="创建XMLType视图dept_xml，以便视图中的每个部门都包含嵌套的员工信息。">使用嵌套员工信息创建XMLType部门视图</a> 。
                     </p>
                     <p><a href="XMLType-views.html#GUID-5191DBB9-EEA9-402C-BAD2-28AB6894E63D__CHDIIIAG">示例10-18</a>显示了如何通过使用XSL样式表转换XML数据来创建<code class="codeph">XMLType</code>视图。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"></div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-5191DBB9-EEA9-402C-BAD2-28AB6894E63D__CFHJBHJI">
                     <p class="titleinexample">示例10-17通过限制XMLType表中的行来创建XMLType视图</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE dept_xml_tab OF XMLType XMLSchema“http://www.oracle.com/dept_complex.xsd”ELEMENT“Department”NESTED TABLE XMLDATA。“EMPS”STORE AS dept_xml_tab_tab1;创建或替换视图dallas_dept_view XMLType XMLSchema“http://www.oracle.com/dept.xsd”元素“部门”AS SELECT OBJECT_VALUE FROM dept_xml_tab WHERE XMLCast（XMLQuery（'/ Department / LOC'PASSING OBJECT_VALUE RETURNING CONTENT）AS VARCHAR2 （20））='达拉斯';</pre><p>这里， <code class="codeph">dallas_dept_view</code>将<code class="codeph">XMLType</code>表行限制为位于达拉斯的那些部门。
                     </p>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-5191DBB9-EEA9-402C-BAD2-28AB6894E63D__CHDIIIAG">
                     <p class="titleinexample">示例10-18通过转换XMLType表创建XMLType视图</p><pre class="oac_no_warn" dir="ltr">创建或替换视图hr_po_tab XMLType元素“PurchaseOrder”，带OBJECT ID DEFAULT作为SELECT XMLtransform（OBJECT_VALUE，x.col1）FROM purchaseorder p，xsl_tab x;</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="transformation-and-validation-of-XMLType-data.html#GUID-9E65513C-C113-4EA1-8511-462AC3EEE2D8" title="SQL函数XMLtransform使用XSLT样式表转换XML文档。它按照样式表的指定将处理后的输出作为XML，HTML等返回。">SQL函数XMLTRANSFORM和XMLType方法TRANSFORM（）</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="XMLType-views.html#GUID-9F0A7B1F-269B-411F-AD8B-8F1CB2E2A671" title="您可以在关系数据和对象关系数据上创建XMLType视图。">XMLType视图</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5206"></a><div class="props_rev_3"><a id="GUID-72A94695-5890-4BA1-8FD1-6D26E1C4349B" name="GUID-72A94695-5890-4BA1-8FD1-6D26E1C4349B"></a><h3 id="ADXDB-GUID-72A94695-5890-4BA1-8FD1-6D26E1C4349B" class="sect3"><span class="enumeration_section">10.6</span>使用SQL函数REF引用XMLType视图对象</h3>
               <div>
                  <p>您可以使用SQL函数<code class="codeph">ref</code>引用<code class="codeph">XMLType</code>视图对象。
                  </p>
                  <div class="section"><pre class="pre codeblock"><code>SELECT ref（d）FROM dept_xml_tab d;</code></pre><p><code class="codeph">XMLType</code>视图引用基于以下对象ID之一：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>系统生成的OID  - 用于<code class="codeph">XMLType</code>表或对象视图的视图</p>
                        </li>
                        <li>
                           <p>基于主键的OID  - 用于具有<code class="codeph">OBJECT ID</code>表达式的视图</p>
                        </li>
                     </ul>
                     <p>这些<code class="codeph">REF</code>可用于在OCI对象高速缓存中获取<code class="codeph">OCIXMLType</code>实例，或者它们可用于SQL查询。这些<code class="codeph">REF</code>与<code class="codeph">REF</code>对象视图的作用相同。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="XMLType-views.html#GUID-9F0A7B1F-269B-411F-AD8B-8F1CB2E2A671" title="您可以在关系数据和对象关系数据上创建XMLType视图。">XMLType视图</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB5208"></a><a id="ADXDB5207"></a><div class="props_rev_3"><a id="GUID-FF5B6A10-191B-45E0-810F-A7F0CFF71711" name="GUID-FF5B6A10-191B-45E0-810F-A7F0CFF71711"></a><h3 id="ADXDB-GUID-FF5B6A10-191B-45E0-810F-A7F0CFF71711" class="sect3"><span class="enumeration_section">10.7</span>在XMLType视图上使用DML（数据操作语言）</h3>
               <div>
                  <p>给定的<code class="codeph">XMLType</code>视图可能不是可隐式更新的。在这种情况下，您必须编写替代触发器来处理所有DML。要确定<code class="codeph">XMLType</code>视图是否可隐式更新，请查询它以查看它是基于对象视图还是本身具有可更新性的构造函数。
                  </p>
                  <div class="section">
                     <p> <a href="XMLType-views.html#GUID-FF5B6A10-191B-45E0-810F-A7F0CFF71711__CFHBIHCF">例10-19</a>说明了这一点。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-FF5B6A10-191B-45E0-810F-A7F0CFF71711__CFHBIHCF">
                     <p class="titleinexample">示例10-19确定XMLType视图是否可隐式更新并更新它</p><pre class="pre codeblock"><code>CREATE TYPE dept_t AS OBJECT（deptno NUMBER（4），dname VARCHAR2（30），loc NUMBER（4））; / BEGIN  - 删除架构（如果已存在）（否则错误）DBMS_XMLSCHEMA.deleteSchema（'http://www.oracle.com/dept_t.xsd'，4）;结束; / COMMIT; BEGIN DBMS_XMLSCHEMA.registerSchema（SCHEMAURL =&gt;'http://www.oracle.com/dept_t.xsd'，SCHEMADOC =&gt;'&lt;？xml版本=“1.0”？&gt; &lt;xsd：schema xmlns：xsd =“http://www.w3.org/2001/XMLSchema”xmlns：xsi =“http://www.w3.org/2001/XMLSchema-instance”xmlns：xdb =“ http://xmlns.oracle.com/xdb“xsi：schemaLocation =”http://xmlns.oracle.com/xdb http://xmlns.oracle.com/xdb/XDBSchema.xsd“&gt; &lt;xsd：元素名称=“Department”type =“DEPT_TType”xdb：SQLType =“DEPT_T”/&gt; &lt;xsd：complexType name =“DEPT_TType”xdb：SQLType =“DEPT_T”xdb：maintainDOM =“false”&gt; &lt;xsd：sequence&gt; &lt;xsd： element name =“DEPTNO”type =“xsd：double”xdb：SQLName =“DEPTNO”xdb：SQLType =“NUMBER”/&gt; &lt;xsd：element name =“DNAME”xdb：SQLName =“DNAME”xdb：SQLType =“ VARCHAR2“&gt; &lt;xsd：simpleType&gt; &lt;xsd：restriction base =”xsd：string“&gt; &lt;xsd：maxLength value =”30“/&gt; &lt;/ xsd：restriction&gt; &lt;/ xsd：simpleType&gt; &lt;/ xsd：element&gt; &lt; xsd：element name =“LOC”type =“xsd：double”xdb：SQLName =“LOC”xdb：SQLType =“NUMBER”/&gt; &lt;/ xsd：sequence&gt; &lt;/ xsd：complexType&gt; &lt;/ xsd：schema&gt;' ，LOCAL =&gt; TRUE，GENTYPES =&gt; FALSE）;结束; /创建或替换视图dept_xml的XMLType XMLSchema“http://www.oracle.com/dept_t.xsd”元素“Department”WITH OBJECT ID（XMLCast（XMLQuery（'/ Department / DEPTNO'PASSING OBJECT_VALUE RETURNING CONTENT）as BINARY_DOUBLE） ）AS SELECT dept_t（d.department_id，d.department_name，d.location_id）FROM departments d; INSERT INTO dept_xml VALUES（XMLType.createXML（'&lt;Department xmlns：xsi =“http://www.w3.org/2001/XMLSchema-instance”xsi：noNamespaceSchemaLocation =“http://www.oracle.com/dept_t。 xsd“&gt; &lt;DEPTNO&gt; 300 &lt;/ DEPTNO&gt; &lt;DNAME&gt;处理&lt;/ DNAME&gt; &lt;LOC&gt; 1700 &lt;/ LOC&gt; &lt;/ Department&gt;'））;更新dept_xml d SET d。OBJECT_VALUE = XMLQuery（'copy $ i：= $ p1 modify（$ i / Department / DNAME中的$ j返回$ $节点$ j的替换值）返回$ i'PASSING d。OBJECT_VALUE为“p1”，'Shipping'AS“p2”返回内容）XMLExists（'/ Department [DEPTNO = 300]'PASSING OBJECT_VALUE）;</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="XMLType-views.html#GUID-9F0A7B1F-269B-411F-AD8B-8F1CB2E2A671" title="您可以在关系数据和对象关系数据上创建XMLType视图。">XMLType视图</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
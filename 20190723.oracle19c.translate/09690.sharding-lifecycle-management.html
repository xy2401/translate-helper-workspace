<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Oracle Sharding provides tools and some automation for the administration of a sharded database."></meta>
      <meta name="description" content="Oracle Sharding provides tools and some automation for the administration of a sharded database."></meta>
      <title>分片数据库管理</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Using Oracle Sharding"></meta>
      <meta property="og:description" content="Oracle Sharding provides tools and some automation for the administration of a sharded database."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Using Oracle Sharding"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="using-oracle-sharding.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-14T12:19:13-08:00"></meta>
      <meta name="dcterms.title" content="Using Oracle Sharding"></meta>
      <meta name="dcterms.dateCopyrighted" content="2018, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E87088-04"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="sharding-loading-data.html" title="Previous" type="text/html"></link>
      <link rel="next" href="sharding-troubleshooting.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="SHARD"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="sharding-loading-data.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="sharding-troubleshooting.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">使用Oracle Sharding</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">分片数据库管理</li>
            </ol>
            <a id="GUID-1A3B887E-148D-4167-81B5-B0FA35746E4B" name="GUID-1A3B887E-148D-4167-81B5-B0FA35746E4B"></a>
            
            <h2 id="SHARD-GUID-1A3B887E-148D-4167-81B5-B0FA35746E4B" class="sect2"><span class="enumeration_chapter">10</span> Sharded Database Administration</h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle Sharding为分片数据库的管理提供了工具和一些自动化。</p>
               <p>以下主题详细描述了分片数据库管理：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-2C97E1C6-D57C-45F1-9847-8ADD626EE207">管理启用分片的堆栈</a><br></li>
                  <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-BF41A59D-10F7-40E8-88DD-8EBF96B9B6B5">管理Oracle Sharding数据库用户</a><br></li>
                  <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-E23CF5A3-2A30-47D3-8F61-F625F3518A1C">监控Sharded数据库</a><br>可以使用Enterprise Manager Cloud Control或GDSCTL监视分片数据库。</li>
                  <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-99A32370-00BD-4C30-A2DB-19F4EA168064">备份和恢复分片数据库</a><br>由于分片托管在各个Oracle数据库上，因此您可以使用Oracle最高可用性最佳实践单独备份和还原分片。
                  </li>
                  <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-8DF6BEA5-42AE-42FF-980B-949EF15BF7DA">修改分片数据库模式</a><br>在对分片数据库中的重复表或分片表进行更改时，应从分片目录数据库中完成这些更改。
                  </li>
                  <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-92ADAEAE-D44A-4DF3-AACC-E4EE888DEC82">跨越Shards的参数设置的传播</a><br>在分片目录中配置系统参数设置时，它们会自动传播到分片数据库的所有分片。
                  </li>
                  <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-95B0C1F3-D7F7-43F8-84B2-1DDDDF5F8380">管理Sharded Database软件版本</a><br></li>
                  <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-85D98DBC-E4CA-4C11-B887-650595E6A8CB">碎片管理</a><br>您可以使用Oracle Enterprise Manager Cloud Control和GDSCTL管理Oracle Sharding部署中的分片。</li>
                  <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-9F8CEDA8-42ED-4039-ADF7-608D0763E3A8">块管理</a><br>您可以使用Oracle Enterprise Manager Cloud Control和GDSCTL管理Oracle Sharding部署中的块。</li>
                  <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-493D8985-89B3-4B96-B84B-F2BFF95A57D5">Shard董事管理</a><br>您可以使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中添加，编辑和删除分片导向器。
                  </li>
                  <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-90BD3394-3D65-4DDF-B8C8-662CD4E825C2">区域管理</a><br>您可以使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中添加，编辑和删除区域。
                  </li>
                  <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-F034CE27-6F6B-4C0D-ACE6-15FC14209D06">Shardspace管理</a><br>您可以使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中添加，编辑和删除分片空间。
                  </li>
                  <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-C9885B8A-1588-4EA1-AB51-24628A42002E">碎片组管理</a><br>您可以使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中添加，编辑和删除分片组。
                  </li>
                  <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-84C8DF7F-0136-4FA5-85C9-AEDB9403E972">服务管理</a><br>您可以使用Oracle Enterprise Manager Cloud Control管理Oracle Sharding部署中的服务。
                  </li>
               </ul>
            </div>
            
            <div class="props_rev_3"><a id="GUID-2C97E1C6-D57C-45F1-9847-8ADD626EE207" name="GUID-2C97E1C6-D57C-45F1-9847-8ADD626EE207"></a><h3 id="SHARD-GUID-2C97E1C6-D57C-45F1-9847-8ADD626EE207" class="sect3"><span class="enumeration_section">10.1</span>管理支持分片的堆栈</h3>
               <div>
                  <p>本节介绍分片数据库配置中组件的启动和关闭。它包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-7D399EDE-4C93-4F76-AC4D-3E64A6E3A595">启动启用分片的堆栈</a><br></li>
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-803B09A1-DFD2-4857-849A-8FEE3D776C22">关闭启用分片的堆栈</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-1A3B887E-148D-4167-81B5-B0FA35746E4B" title="Oracle Sharding为分片数据库的管理提供了工具和一些自动化。">Sharded Database Administration</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-7D399EDE-4C93-4F76-AC4D-3E64A6E3A595" name="GUID-7D399EDE-4C93-4F76-AC4D-3E64A6E3A595"></a><h4 id="SHARD-GUID-7D399EDE-4C93-4F76-AC4D-3E64A6E3A595" class="sect4"><span class="enumeration_section">10.1.1</span>启动启用分片的堆栈</h4>
                  <div>
                     <p>以下是启用分片的堆栈的建议启动顺序：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>启动分片目录数据库和本地侦听器。</p>
                        </li>
                        <li>
                           <p>启动分片导向器（GSM）。</p>
                        </li>
                        <li>
                           <p>启动分片数据库和本地侦听器。</p>
                        </li>
                        <li>
                           <p>启动全球服务。</p>
                        </li>
                        <li>
                           <p>启动连接池和客户端。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-2C97E1C6-D57C-45F1-9847-8ADD626EE207">管理启用Sharding的堆栈</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-803B09A1-DFD2-4857-849A-8FEE3D776C22" name="GUID-803B09A1-DFD2-4857-849A-8FEE3D776C22"></a><h4 id="SHARD-GUID-803B09A1-DFD2-4857-849A-8FEE3D776C22" class="sect4"><span class="enumeration_section">10.1.2</span>关闭启用分片的堆栈</h4>
                  <div>
                     <p>以下是启用分片的堆栈的建议关闭顺序：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>关闭连接池和客户端。</p>
                        </li>
                        <li>
                           <p>停止全球服务。</p>
                        </li>
                        <li>
                           <p>关闭分片数据库和本地侦听器。</p>
                        </li>
                        <li>
                           <p>停止分片导演（GSM）。</p>
                        </li>
                        <li>
                           <p>停止分片目录数据库和本地侦听器。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-2C97E1C6-D57C-45F1-9847-8ADD626EE207">管理启用Sharding的堆栈</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-BF41A59D-10F7-40E8-88DD-8EBF96B9B6B5" name="GUID-BF41A59D-10F7-40E8-88DD-8EBF96B9B6B5"></a><h3 id="SHARD-GUID-BF41A59D-10F7-40E8-88DD-8EBF96B9B6B5" class="sect3"><span class="enumeration_section">10.2</span>管理Oracle Sharding数据库用户</h3>
               <div>
                  <p>本节介绍Oracle Sharding特有的数据库用户。它包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-C6369C76-3DCF-4258-9F6B-B43D80BE0AD6">关于GSMUSER账户</a><br>GDSCTL和全球服务管理器使用<code class="codeph">GSMUSER</code>帐户连接到GDS配置中的数据库。
                     </li>
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-506BB8D0-6150-4622-9F1B-34EA81B49745">关于GSMROOTUSER帐户</a><br><code class="codeph">GSMROOTUSER</code>是特定于Oracle Sharding的数据库帐户，仅在存在可插入数据库（PDB）分<code class="codeph">GSMROOTUSER</code>使用。GDSCTL和全局服务管理器使用该帐户连接到容器数据库（CDB）的根容器以执行管理任务。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-1A3B887E-148D-4167-81B5-B0FA35746E4B" title="Oracle Sharding为分片数据库的管理提供了工具和一些自动化。">Sharded Database Administration</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-C6369C76-3DCF-4258-9F6B-B43D80BE0AD6" name="GUID-C6369C76-3DCF-4258-9F6B-B43D80BE0AD6"></a><h4 id="SHARD-GUID-C6369C76-3DCF-4258-9F6B-B43D80BE0AD6" class="sect4"><span class="enumeration_section">10.2.1</span>关于GSMUSER账户</h4>
                  <div>
                     <p>GDSCTL和全球服务管理器使用<code class="codeph">GSMUSER</code>帐户连接到GDS配置中的数据库。
                     </p>
                     <p>默认情况下，任何Oracle数据库<code class="codeph">GSMUSER</code>存在<code class="codeph">GSMUSER</code> 。在Oracle Sharding配置中，该帐户用于连接到分片而不是池数据库，并且在解锁帐户后必须同时授予SYSDG和SYSBACKUP系统权限。
                     </p>
                     <p>提供给<code class="codeph">GSMUSER</code>帐户的密码用于<code class="codeph">gdsctl add shard</code>命令。没有给予SYSDG和SYSBACKUP到<code class="codeph">GSMUSER</code>上一个新的碎片导致<code class="codeph">gdsctl add shard</code>失败与ORA-1031：权限不足而失败。
                     </p>
                     <p>如果使用<code class="codeph">gdsctl create shard</code>命令使用Database Configuration Assistant（DBCA）创建新分片，则<code class="codeph">GSMUSER</code>帐户将自动授予SYSDG和SYSBACKUP权限，并在部署过程中分配随机密码。由于<code class="codeph">GSMUSER</code>帐户永远不需要以交互方式登录，因此管理员无需知道密码的价值;但是，如果需要，可以在部署后使用<code class="codeph">alter user</code> SQL命令并结合<code class="codeph">gdsctl modify shard -pwd</code>命令<code class="codeph">gdsctl modify shard -pwd</code> 。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-C6369C76-3DCF-4258-9F6B-B43D80BE0AD6__GUID-CA435811-903B-41DA-BCB7-120A6EEA2C3F">
                        <p class="notep1">也可以看看：</p><a href="../gsmug/gdsctl-reference.html#GSMUG-GUID-8371BD52-60E3-45AC-A32F-938BD7B7B373" target="_blank">添加碎片</a>在<span class="italic">全球数据服务的概念和管理指南</span></div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-BF41A59D-10F7-40E8-88DD-8EBF96B9B6B5">管理Oracle Sharding数据库用户</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-506BB8D0-6150-4622-9F1B-34EA81B49745" name="GUID-506BB8D0-6150-4622-9F1B-34EA81B49745"></a><h4 id="SHARD-GUID-506BB8D0-6150-4622-9F1B-34EA81B49745" class="sect4"><span class="enumeration_section">10.2.2</span>关于GSMROOTUSER账户</h4>
                  <div>
                     <p><code class="codeph">GSMROOTUSER</code>是特定于Oracle Sharding的数据库帐户，仅在存在可插入数据库（PDB）分<code class="codeph">GSMROOTUSER</code>使用。GDSCTL和全局服务管理器使用该帐户连接到容器数据库（CDB）的根容器以执行管理任务。
                     </p>
                     <p>如果未使用PDB分片，则GSMROOTUSER用户不应在任何数据库上解锁或分配密码。但是，在包含PDB分片的分片配置中，必须先解锁GSMROOTUSER并授予SYSDG和SYSBACKUP权限，然后才能执行成功的<code class="codeph">gdsctl add cdb</code>命令。如果需要，可以使用CDB的根容器中的<code class="codeph">alter user</code> SQL命令结合<code class="codeph">gdsctl modify cdb -pwd</code>命令在部署后更改GSMROOTUSER帐户的密码。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-506BB8D0-6150-4622-9F1B-34EA81B49745__GUID-CA435811-903B-41DA-BCB7-120A6EEA2C3F">
                        <p class="notep1">也可以看看：</p>在“ <span class="italic">全局数据服务概念和管理指南”中</span> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/shard&amp;id=GSMUG-GUID-3C0D9A90-002B-4F7F-91B6-3F0DA6A65F54" target="_blank">添加cdb</a></div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-BF41A59D-10F7-40E8-88DD-8EBF96B9B6B5">管理Oracle Sharding数据库用户</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-E23CF5A3-2A30-47D3-8F61-F625F3518A1C" name="GUID-E23CF5A3-2A30-47D3-8F61-F625F3518A1C"></a><h3 id="SHARD-GUID-E23CF5A3-2A30-47D3-8F61-F625F3518A1C" class="sect3"><span class="enumeration_section">10.3</span>监视分片数据库</h3>
               <div>
                  <p>可以使用Enterprise Manager Cloud Control或GDSCTL监视分片数据库。</p>
                  <p>请参阅以下主题以使用Enterprise Manager Cloud Control或GDSCTL来监视分片数据库。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-9A68D887-EC8A-4D06-84A2-1653C8341708">使用GDSCTL监视分片数据库</a><br>有许多<code class="codeph">GDSCTL CONFIG</code>命令可用于获取各个分片，分片组，分片空间和分片控制器的运行状况。
                     </li>
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-10E66462-C6B2-4C6B-900C-AE909105FA8F">使用Enterprise Manager云控制监视分片数据库</a><br>Oracle Enterprise Manager Cloud Control允许您发现，监视和管理分片数据库的组件。
                     </li>
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-46B36EC1-90BA-403F-9D5B-BD7499199C13">跨Shards查询系统对象</a><br>使用SHARDS（）子句查询Oracle提供的表，以从V $视图和DBA_ *视图收集性能，诊断和审计数据。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-1A3B887E-148D-4167-81B5-B0FA35746E4B" title="Oracle Sharding为分片数据库的管理提供了工具和一些自动化。">Sharded Database Administration</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-9A68D887-EC8A-4D06-84A2-1653C8341708" name="GUID-9A68D887-EC8A-4D06-84A2-1653C8341708"></a><h4 id="SHARD-GUID-9A68D887-EC8A-4D06-84A2-1653C8341708" class="sect4"><span class="enumeration_section">10.3.1</span>使用GDSCTL监视分片数据库</h4>
                  <div>
                     <p>有许多<code class="codeph">GDSCTL CONFIG</code>命令可用于获取各个分片，分片组，分片空间和分片控制器的运行状况。
                     </p>
                     <p>监视分片就像监视普通数据库一样，应该使用标准的Oracle最佳实践来监视单个分片的个体运行状况。但是，监控整个分片环境的整体运行状况也很重要。GDSCTL命令也可以通过使用调度程序编写脚本，并且可以定期完成，以帮助确保一切运行顺利。使用Oracle GoldenGate进行复制时，监控每个复制流的延迟也很重要。</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-9A68D887-EC8A-4D06-84A2-1653C8341708__GUID-51036695-34F3-4D04-BFA2-FBC31B8B252C">
                        <p class="notep1">也可以看看：</p>
                        <p>有关使用<code class="codeph">GDSCTL CONFIG</code>命令的信息，请<code class="codeph">GDSCTL CONFIG</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/shard&amp;id=GSMUG-GUID-1BA69DEA-66A1-45EB-BA86-E24957C10CF3" target="_blank"><span><cite>“Oracle数据库全局数据服务概念和管理指南”</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-E23CF5A3-2A30-47D3-8F61-F625F3518A1C" title="可以使用Enterprise Manager Cloud Control或GDSCTL监视分片数据库。">监视分片数据库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-10E66462-C6B2-4C6B-900C-AE909105FA8F" name="GUID-10E66462-C6B2-4C6B-900C-AE909105FA8F"></a><h4 id="SHARD-GUID-10E66462-C6B2-4C6B-900C-AE909105FA8F" class="sect4"><span class="enumeration_section">10.3.2</span>使用Enterprise Manager云控制监视分片数据库</h4>
                  <div>
                     <p>Oracle Enterprise Manager Cloud Control允许您发现，监视和管理分片数据库的组件。</p>
                     <p>可以在“所有目标”页面中找到分片数据库目标。</p>
                     <div class="figure" id="GUID-10E66462-C6B2-4C6B-900C-AE909105FA8F__GUID-736CF777-EC4E-4403-8546-9B053FE920B3">
                        <p class="titleinfigure">图10-1所有目标中的分片数据库优化搜索窗格</p><img src="img/shard_em_alltargets.png" alt="下面是图10-1的描述" title="下面是图10-1的描述" longdesc="img_text/shard_em_alltargets.html"><br><a href="img_text/shard_em_alltargets.html">“图10-1所有目标中的分片数据库优化搜索窗格”的说明</a></div>
                     <!-- class="figure" -->
                     <p>分片数据库的目标主页显示分片数据库组件及其状态的摘要。</p>
                     <p>要监视分片数据库组件，必须先发现它们。有关更多信息，请参阅<a href="sharding-lifecycle-management.html#GUID-6D7959C7-60B6-4471-98E2-E4918B2BCC66" title="在Enterprise Manager云控制中，您可以发现分片目录和分片数据库，然后使用引导式发现添加分片导向器，分片数据库，分片空间和分片组。">发现分片数据库组件</a> 。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-10E66462-C6B2-4C6B-900C-AE909105FA8F__GUID-959105E7-B998-44C8-AD21-548138888006">摘要</p>
                        <p>页面左上角的“摘要”窗格显示以下信息：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>分片数据库名称</p>
                           </li>
                           <li>
                              <p>分片数据库域名</p>
                           </li>
                           <li>
                              <p>分片目录名称。您可以单击名称以查看有关分片目录的更多信息。</p>
                           </li>
                           <li>
                              <p>分片目录数据库版本</p>
                           </li>
                           <li>
                              <p>用于分片数据库的Sharding方法</p>
                           </li>
                           <li>
                              <p>用于高可用性的复制技术</p>
                           </li>
                           <li>
                              <p>分片导演的数量和状态</p>
                           </li>
                           <li>
                              <p>大师碎片导演的名字。您可以单击名称以查看有关主分片导向器的更多信息。</p>
                           </li>
                        </ul>
                        <div class="figure" id="GUID-10E66462-C6B2-4C6B-900C-AE909105FA8F__GUID-FB98CA30-F19D-4612-A451-B0ABC8BC2D04">
                           <p class="titleinfigure">图10-2“Sharded Database Summary”窗格</p><img src="img/shard_em_summary.png" alt="下面是图10-2的描述" title="下面是图10-2的描述" longdesc="img_text/shard_em_summary.html"><br><a href="img_text/shard_em_summary.html">“图10-2分片数据库摘要窗格”的说明</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-10E66462-C6B2-4C6B-900C-AE909105FA8F__GUID-CB70981B-CADC-4550-ABCF-D1A965EF5F3E">碎片加载地图</p>
                        <p>页面右上角的碎片加载图显示了一个图形图，说明了如何在碎片之间分配事务。</p>
                        <div class="figure" id="GUID-10E66462-C6B2-4C6B-900C-AE909105FA8F__GUID-CD5B8A8E-EE23-49C0-BC1E-3F064D24F249">
                           <p class="titleinfigure">图10-3分片数据库分片加载映射</p><img src="img/shard_em_loadmap.png" alt="下面是图10-3的描述" title="下面是图10-3的描述" longdesc="img_text/shard_em_loadmap.html"><br><a href="img_text/shard_em_loadmap.html">“图10-3分片数据库分片加载映射”的说明</a></div>
                        <!-- class="figure" -->
                        <p>您可以在图表上方选择不同的视图级别。</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>数据库</p>
                              <p>数据库视图将Oracle RAC集群数据库中的数据库实例聚合到标有Oracle RAC集群数据库目标名称的单个单元中。这使您可以轻松地比较Oracle RAC环境中的总数据库负载。</p>
                           </li>
                           <li>
                              <p>例</p>
                              <p>实例视图单独显示所有数据库实例，但Oracle RAC实例组合在一起作为Oracle RAC数据库目标的子单元。此视图本质上是一个两级树映射，其中数据库级别是主要分区，数据库中的实例是辅助分区。这允许对Oracle RAC数据库中的实例进行负载比较;例如，轻松发现跨实例的负载不平衡。</p>
                           </li>
                           <li>
                              <p>可插拔数据库</p>
                              <p>虽然显示了PDB选项，但当前版本中的Oracle Sharding不支持PDB。</p>
                           </li>
                        </ul>
                        <p>请注意，图表的单元格大小不同。每个单元格对应一个分片目标，实例或集群数据库。单元格大小（其面积）与平均活动会话中测量的目标数据库负载成比例，因此具有更高负载的目标具有更大的单元大小。单元格按从左到右，从上到下的大小排序。因此，具有最高负载的目标始终显示为图中最左上方的单元格。</p>
                        <p>您可以将鼠标指针悬停在图形的特定单元格上，以查看总活动负载（I / O与CPU比率），CPU，I / O和等待时间。图表的段被着色以指示主要负载：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>绿色表示CPU时间占主导地位</p>
                           </li>
                           <li>
                              <p>蓝色表示I / O主导负载</p>
                           </li>
                           <li>
                              <p>黄色表示WAIT主导负载</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-10E66462-C6B2-4C6B-900C-AE909105FA8F__GUID-41E1CD10-F5A7-492C-90AD-883340631C6E">会员</p>
                        <p>页面左下方的“成员”窗格显示有关每个组件的一些相关信息。</p>
                        <div class="figure" id="GUID-10E66462-C6B2-4C6B-900C-AE909105FA8F__GUID-C2420645-B954-4B6C-B2B9-69B4BD742F34">
                           <p class="titleinfigure">图10-4“Sharded Database Members”窗格</p><img src="img/shard_em_members.png" alt="下面是图10-4的描述" title="下面是图10-4的描述" longdesc="img_text/shard_em_members.html"><br><a href="img_text/shard_em_members.html">“图10-4分片数据库成员窗格”的说明</a></div>
                        <!-- class="figure" -->
                        <p>该窗格分为每个组件的选项卡：Shardspaces，Shardgroups，Shard Directors和Shards。单击选项卡可查看有关每种组件类型的信息</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>Shardspaces</p>
                              <p>Shardspaces选项卡显示分片空间名称，状态，块数和Data Guard保护模式。可以单击分片空间名称以显示有关所选分片空间的更多详细信息。</p>
                           </li>
                           <li>
                              <p>Shardgroups</p>
                              <p>Shardgroups选项卡显示分片组名称，状态，它所属的分片空间，块的数量，Data Guard角色以及它所属的区域。您可以单击分片组和分片空间名称以显示有关所选组件的更多详细信息。</p>
                           </li>
                           <li>
                              <p>碎片导演</p>
                              <p>Shard Directors选项卡显示分片主管名称，状态，区域，主机和Oracle主目录。您可以单击可以单击的分片导演名称以显示有关所选分片导向器的更多详细信息。</p>
                           </li>
                           <li>
                              <p>碎片</p>
                              <p>“分片”选项卡显示分片名称，部署状态，状态，它们所属的分片空间和分片组，Data Guard角色以及它们所属的区域。在“名称”列中，可以展开“主分片”以显示有关其相应备用分片的信息。您可以将鼠标悬停在“已部署”列图标上，并显示部署状态详细信息。您可以单击分片，分片空间和分片组名称以显示有关所选组件的更多详细信息。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-10E66462-C6B2-4C6B-900C-AE909105FA8F__GUID-416F9503-7A23-4347-A96D-2F165CD90E8D">服务</p>
                        <p>“服务”窗格位于页面右下角，显示分片数据库服务的名称，状态和Data Guard角色。列表上方显示了服务总数以及显示特定状态中有多少服务的图标。您可以将鼠标指针悬停在图标上以阅读状态图标的说明。</p>
                        <div class="figure" id="GUID-10E66462-C6B2-4C6B-900C-AE909105FA8F__GUID-1AAC8D4F-6A53-4F24-9470-A4EAD9A11757">
                           <p class="titleinfigure">图10-5“Sharded Database Services”窗格</p><img src="img/shard_em_services.png" alt="下面是图10-5的描述" title="下面是图10-5的描述" longdesc="img_text/shard_em_services.html"><br><a href="img_text/shard_em_services.html">“图10-5 Sharded Database Services窗格”的说明</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-10E66462-C6B2-4C6B-900C-AE909105FA8F__GUID-9A908F87-2ED0-4FC4-83F6-0B725201E1A1">事故</p>
                        <p>“事件”窗格显示有关分片数据库环境中各种组件的消息和警告。有关如何使用此窗格的更多信息，请参阅Cloud Control联机帮助。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-10E66462-C6B2-4C6B-900C-AE909105FA8F__GUID-4497F01C-2C46-4EFA-B935-74B0AB3065F5">分片数据库菜单</p>
                        <p>位于左上角的“Sharded Database”菜单为您提供了管理分片数据库组件的权限。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-10E66462-C6B2-4C6B-900C-AE909105FA8F__GUID-D70E1AB8-AA58-43FF-B47C-14557BAC9CF7">目标导航</p>
                        <p>“目标导航”窗格使您可以轻松访问有关分片数据库中任何组件的更多详细信息。</p><img src="img/shard_em_navicon.png" alt="shard_em_navicon.png的描述如下" title="shard_em_navicon.png的描述如下" longdesc="img_text/shard_em_navicon.html"><br><a href="img_text/shard_em_navicon.html">shard_em_navicon.png插图的描述</a><p>单击页面左上角的导航树图标可打开“目标导航”窗格。此窗格以树形式显示分片数据库中的所有已发现组件。</p>
                        <p>扩展分片空间会显示其中的分片组。扩展分片组会显示该分片组中的分片。</p>
                        <p>可以单击任何组件名称以查看有关它们的更多详细信息。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-6D7959C7-60B6-4471-98E2-E4918B2BCC66">发现分片数据库组件</a><br>在Enterprise Manager云控制中，您可以发现分片目录和分片数据库，然后使用引导式发现添加分片导向器，分片数据库，分片空间和分片组。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-E23CF5A3-2A30-47D3-8F61-F625F3518A1C" title="可以使用Enterprise Manager Cloud Control或GDSCTL监视分片数据库。">监视分片数据库</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-6D7959C7-60B6-4471-98E2-E4918B2BCC66" name="GUID-6D7959C7-60B6-4471-98E2-E4918B2BCC66"></a><h5 id="SHARD-GUID-6D7959C7-60B6-4471-98E2-E4918B2BCC66" class="sect5"><span class="enumeration_section">10.3.2.1</span>情迷分片数据库组件</h5>
                     <div>
                        <p>在Enterprise Manager云控制中，您可以发现分片目录和分片数据库，然后使用引导式发现添加分片导向器，分片数据库，分片空间和分片组。</p>
                        <div class="p">
                           <p>作为先决条件，您必须使用Cloud Control来发现分片导向器主机和.shard目录数据库。由于目录数据库和每个分片都是数据库本身，因此您可以使用标准数据库发现过程。</p>
                           <p>只有在使用数据库发现发现单个分片时，才能监视分片。发现分片是发现分片数据库的可选方法，因为您可以在没有分片的情况下进行分片数据库配置。</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>在Enterprise Manager Cloud Control中，选择“ <span class="uicontrol bold">设置”</span> ，选择“ <span class="uicontrol bold">添加目标”</span> ，然后选择“ <span class="uicontrol bold">手动添加目标”</span> 。</span></li>
                           <li class="stepexpand"><span>在“手动添加目标”页面中，单击“ <span class="uicontrol bold">使用引导过程</span>添加非主机目标”面板中的“使用引导过程添加”。</span></li>
                           <li class="stepexpand"><span>在Add Using Guided Process对话框中，找到并选择<span class="uicontrol bold">Sharded Database</span> ，然后单击<span class="uicontrol bold">Add</span> 。</span></li>
                           <li class="stepexpand"><span>在Add Sharded Database：Catalog Database页面中，单击<span class="uicontrol bold">Catalog Database</span>旁边的浏览图标以找到SDB目录数据库。</span></li>
                           <li class="stepexpand"><span>在“选择目标”对话框中，单击与目录数据库对应的目标名称，然后单击“ <span class="uicontrol bold">选择”</span> 。</span><div>
                                 <p>如果存在，则填写Catalog Database和Monitoring Credentials字段。监视凭据用于查询目录数据库以获取配置信息。监视用户被授予GDS_CATALOG_SELECT角色，并且对目录库表具有只读权限。</p>
                                 <p>单击“ <span class="uicontrol bold">下一步”</span>继续下一步。
                                 </p>
                                 <p>在“添加分片数据库：组件”页面中，显示有关由目录数据库管理的分片数据库的信息，包括分片数据库名称，域名，分片数据库上使用的分片方法以及已发现的分片导向器列表。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>要在分片导向器上设置监视凭据，请单击列表条目右侧的加号图标。</span><div>
                                 <p>将打开一个对话框，允许您设置凭据。</p>
                                 <p>单击“ <span class="uicontrol bold">确定”</span>关闭对话框，然后单击“ <span class="uicontrol bold">下一步”</span>继续下一步。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>在“添加分片数据库：查看”页面中，验证是否已发现所有分片导向器，分片空间和分片组。</span></li>
                           <li class="stepexpand"><span>单击“ <span class="uicontrol bold">提交”</span>以完成步骤。</span><div>
                                 <p>提交企业管理器部署过程，您将返回到“手动添加目标”页面。</p>
                                 <p>在页面顶部，您将看到有关提交以将所有已发现组件添加到Cloud Control的脚本的信息。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>单击链接以查看分片数据库组件的配置状态。</span><div>
                                 <p>在另一个浏览器窗口中，您可以转到Cloud Control All Targets页面以观察分片数据库的状态。</p>
                              </div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>完成目标发现过程后，将在Cloud Control中添加分片数据库目标。您可以在Cloud Control中打开分片数据库以监视和管理组件。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-10E66462-C6B2-4C6B-900C-AE909105FA8F" title="Oracle Enterprise Manager Cloud Control允许您发现，监视和管理分片数据库的组件。">使用Enterprise Manager云控制监视分片数据库</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-46B36EC1-90BA-403F-9D5B-BD7499199C13" name="GUID-46B36EC1-90BA-403F-9D5B-BD7499199C13"></a><h4 id="SHARD-GUID-46B36EC1-90BA-403F-9D5B-BD7499199C13" class="sect4"><span class="enumeration_section">10.3.3</span>跨Shards查询系统对象</h4>
                  <div>
                     <p>使用SHARDS（）子句查询Oracle提供的表，以从V $视图和DBA_ *视图收集性能，诊断和审计数据。</p>
                     <p></p>
                     <p>分片目录数据库可以用作使用SQL <code class="codeph">SHARDS()</code>子句进行集中诊断操作的入口点。<code class="codeph">SHARDS()</code>子句允许您在所有分片上查询相同的Oracle提供的对象，例如V $，DBA / USER / ALL视图以及字典对象和表，并返回聚合结果。
                     </p>
                     <p>如下面的示例所示， <code class="codeph">SELECT</code>语句的<code class="codeph">FROM</code>部分中的对象包装在<code class="codeph">SHARDS()</code>子句中，以指定这不是对本地对象的查询，而是对分片数据库配置中所有分片上的对象的查询。在执行多分片查询期间，名为<code class="codeph">SHARD_ID</code>的虚拟列会自动添加到<code class="codeph">SHARDS()</code>包装的对象，以指示结果中每一行的来源。可以在谓词中使用相同的列来修剪查询。
                     </p>
                     <p>带有<code class="codeph">SHARDS()</code>子句的查询只能在分片目录数据库上运行。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-46B36EC1-90BA-403F-9D5B-BD7499199C13__GUID-9503A37B-4491-4CD2-9F87-344CC9CBFA44">例子</p>
                        <p>以下语句查询性能视图</p><pre class="pre codeblock"><code>SQL&gt; SELECT shard_id，callspersec FROM <span class="bold">SHARDS</span> （v $ servicemetric）WHERE service_name LIKE'oltp％'AND group_id = 10;</code></pre><p>以下声明收集统计信息。</p><pre class="pre codeblock"><code>SQL&gt; SELECT table_name，partition_name，blocks，num_rows FROM <span class="bold">SHARDS</span> （dba_tab_partition）p WHERE p.table_owner =：1;</code></pre><p>以下示例语句显示如何查找每个分片的<code class="codeph">SHARD_ID</code>值。
                        </p><pre class="pre codeblock"><code>SQL&gt;从SHARDS中选择ORA_SHARD_ID，INSTANCE_NAME（sys.v_ $ instance）; ORA_SHARD_ID INSTANCE_NAME ------------ ---------------- 1 sh1 11 sh2 21 sh3 31 sh4</code></pre><p>以下示例语句显示如何使用<code class="codeph">SHARD_ID</code>修剪查询。
                        </p><pre class="pre codeblock"><code>SQL&gt;从SHARDS（sys.v_ $ instance）中选择ORA_SHARD_ID，INSTANCE_NAME，其中ORA_SHARD_ID = 21; ORA_SHARD_ID INSTANCE_NAME ------------ ---------------- 21 sh3</code></pre></div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-46B36EC1-90BA-403F-9D5B-BD7499199C13__GUID-CACC08E1-BB09-4946-8E6C-35424AED677C">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">SHARDS()</code>子句的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/shard&amp;id=SQLRF-GUID-CFA006CA-6FF1-4972-821E-6996142A51C6" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a> 。
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-E23CF5A3-2A30-47D3-8F61-F625F3518A1C" title="可以使用Enterprise Manager Cloud Control或GDSCTL监视分片数据库。">监视分片数据库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-99A32370-00BD-4C30-A2DB-19F4EA168064" name="GUID-99A32370-00BD-4C30-A2DB-19F4EA168064"></a><h3 id="SHARD-GUID-99A32370-00BD-4C30-A2DB-19F4EA168064" class="sect3"><span class="enumeration_section">10.4</span>备份和恢复分片数据库</h3>
               <div>
                  <p>由于分片托管在各个Oracle数据库上，因此您可以使用Oracle最高可用性最佳实践单独备份和还原分片。</p>
                  <p>如果您正在使用Data Guard和Oracle Active Data Guard实现SDB高可用性，请确保在使主数据库或备用数据库脱机之前使观察者脱机并禁用快速启动故障转移。</p>
                  <p>有关在发生灾难时恢复分片的特定步骤，请与Oracle支持部门联系。</p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-99A32370-00BD-4C30-A2DB-19F4EA168064__GUID-4CD17737-8006-4644-B8A5-95CD0551BF8F">
                     <p class="notep1">也可以看看：</p>
                     <p>适用于MAA最佳实践的<a href="http://www.oracle.com/goto/maa" target="_blank">Oracle最高可用性架构</a>白皮书</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-1A3B887E-148D-4167-81B5-B0FA35746E4B" title="Oracle Sharding为分片数据库的管理提供了工具和一些自动化。">Sharded Database Administration</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-8DF6BEA5-42AE-42FF-980B-949EF15BF7DA" name="GUID-8DF6BEA5-42AE-42FF-980B-949EF15BF7DA"></a><h3 id="SHARD-GUID-8DF6BEA5-42AE-42FF-980B-949EF15BF7DA" class="sect3"><span class="enumeration_section">10.5</span>修改分片数据库模式</h3>
               <div>
                  <p>在对分片数据库中的重复表或分片表进行更改时，应从分片目录数据库中完成这些更改。</p>
                  <p>在对分片数据库执行任何DDL操作之前，请启用分片DDL</p><pre class="pre codeblock"><code>ALTER SESSION ENABLE SHARD DDL;</code></pre><p>此语句确保将DDL更改传播到分片数据库中的每个分片。</p>
                  <p>传播的DDL更改是定义为“架构相关”的命令，其中包括<code class="codeph">ALTER TABLE</code>和<code class="codeph">CREATE TRIGGER</code> 。还有其他操作传播到每个分片，例如用于简化用户管理的<code class="codeph">CREATE, ALTER, DROP</code>用户命令，以及用于简化在多个分片上创建表空间的<code class="codeph">TABLESPACE</code>操作。
                  </p>
                  <p><code class="codeph">GRANT</code>和<code class="codeph">REVOKE</code>操作可以从分片目录中完成，并传播到每个分片，前提是您已为会话启用了分片DDL。如果需要更精细的控制，您可以直接在每个分片上发出命令。
                  </p>
                  <p>不传播DBMS包调用或类似操作等操作。例如，收集分片目录统计信息的操作不会传播到每个分片。</p>
                  <p>如果执行需要锁定表的操作（例如添加非空列），请务必记住每个分片都需要获取表上的锁才能执行DDL操作。Oracle在单个实例中应用DDL的最佳实践适用于分片环境。</p>
                  <p>在分片目录上执行的多分片查询在每个分片上的数据库连接之间发出远程查询。在这种情况下，重要的是确保用户对每个分片具有适当的权限，无论查询是否将从该分片返回数据。</p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-8DF6BEA5-42AE-42FF-980B-949EF15BF7DA__GUID-432F3C6C-2E9E-454E-B21A-A96F1028FA01">
                     <p class="notep1">也可以看看：</p>
                     <p>有关与重复表和分片表一起使用的操作的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/shard&amp;id=SQLRF-GUID-B7052D25-F224-459A-A17B-FA5A37BFD237" target="_blank"><span><cite>参见“Oracle数据库SQL语言参考</cite></span></a> ”</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-1A3B887E-148D-4167-81B5-B0FA35746E4B" title="Oracle Sharding为分片数据库的管理提供了工具和一些自动化。">Sharded Database Administration</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-92ADAEAE-D44A-4DF3-AACC-E4EE888DEC82" name="GUID-92ADAEAE-D44A-4DF3-AACC-E4EE888DEC82"></a><h3 id="SHARD-GUID-92ADAEAE-D44A-4DF3-AACC-E4EE888DEC82" class="sect3"><span class="enumeration_section">10.6</span>跨Shards参数设置的传播</h3>
               <div>
                  <p>在分片目录中配置系统参数设置时，它们会自动传播到分片数据库的所有分片。</p>
                  <p>在Oracle Database 19c之前，必须在分片数据库中的每个分片上配置<code class="codeph">ALTER SYSTEM</code>参数设置。在Oracle Database 19c中，Oracle Sharding允许您在分片目录上设置参数，从而提供集中管理。然后，设置将自动传播到分片数据库的所有分片。
                  </p>
                  <p>只有在分片目录下的<code class="codeph">ENABLE SHARD DDL</code>下完成系统参数的传播，然后在<code class="codeph">ALTER</code>语句中包含<code class="codeph">SHARD=ALL</code> 。
                  </p><pre class="pre codeblock"><code>SQL&gt; alter session <span class="bold">enable shard ddl</span> ; SQL&gt; alter system set enable_ddl_logging = true <span class="bold">shard = all</span> ;</code></pre><div class="infoboxnote" id="GUID-92ADAEAE-D44A-4DF3-AACC-E4EE888DEC82__GUID-6E94AD08-9C48-40D8-B5E1-A9540D1993CA">
                     <p class="notep1">注意：</p>不支持传播<code class="codeph">enable_goldengate_replication</code>参数设置。
                  </div>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-1A3B887E-148D-4167-81B5-B0FA35746E4B" title="Oracle Sharding为分片数据库的管理提供了工具和一些自动化。">Sharded Database Administration</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-95B0C1F3-D7F7-43F8-84B2-1DDDDF5F8380" name="GUID-95B0C1F3-D7F7-43F8-84B2-1DDDDF5F8380"></a><h3 id="SHARD-GUID-95B0C1F3-D7F7-43F8-84B2-1DDDDF5F8380" class="sect3"><span class="enumeration_section">10.7</span>管理分片数据库软件版本</h3>
               <div>
                  <p>本节介绍分片数据库配置中软件组件的版本管理。它包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-6117DFCF-9C21-4730-9B00-131ACA322618">修补和升级分片数据库</a><br>将Oracle补丁应用于分片数据库环境可以在单个分片或所有分片上完成;但是，您使用的方法取决于用于环境的复制选项以及要应用的修补程序的类型。
                     </li>
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-62AC31EB-2FEE-412B-9DF0-2C235BB32A2A">升级分片数据库组件</a><br>升级分片数据库组件的顺序对于限制停机时间和避免错误非常重要，因为组件已关闭并重新联机。
                     </li>
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-49C60AEC-137C-47F3-AD75-24EB81F08AB4">降级分片数据库</a><br>Oracle Sharding不支持降级。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-1A3B887E-148D-4167-81B5-B0FA35746E4B" title="Oracle Sharding为分片数据库的管理提供了工具和一些自动化。">Sharded Database Administration</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-6117DFCF-9C21-4730-9B00-131ACA322618" name="GUID-6117DFCF-9C21-4730-9B00-131ACA322618"></a><h4 id="SHARD-GUID-6117DFCF-9C21-4730-9B00-131ACA322618" class="sect4"><span class="enumeration_section">10.7.1</span>修补和升级分片数据库</h4>
                  <div>
                     <p>将Oracle补丁应用于分片数据库环境可以在单个分片或所有分片上完成;但是，您使用的方法取决于用于环境的复制选项以及要应用的修补程序的类型。</p>
                     <p></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-6117DFCF-9C21-4730-9B00-131ACA322618__GUID-44D1543C-5803-439D-BA3A-7D7A1786D5A8">修补分片数据库</p>
                        <p>大多数补丁可以一次应用于单个分片;但是，应该在所有分片上应用一些补丁。使用Oracle的最佳实践将修补程序应用于单个分片，就像使用非分片数据库一样，同时牢记与SDB一起使用的复制方法。 Oracle <code class="codeph">opatchauto</code>可用于一次将修补程序应用于多个分片，并且可以滚动方式完成。Data Guard配置一个接一个地应用，在某些情况下（取决于补丁），您可以使用Standby First修补。使用Oracle GoldenGate时，请确保在整个分片空间中并行应用补丁。如果修补程序解决了多分片查询，复制或分片基础结构的问题，则应将其应用于SDB中的所有分片。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6117DFCF-9C21-4730-9B00-131ACA322618__GUID-3948D479-0793-40F1-B1F2-5BEB7E5CF300">升级Sharded数据库</p>
                        <p>升级Oracle Sharding环境与升级其他Oracle数据库和全局服务管理器环境没有太大区别;但是，必须按特定顺序升级组件，以便首先升级分片目录，然后是分片导向器，最后是分片。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-6117DFCF-9C21-4730-9B00-131ACA322618__GUID-8BBCC122-B08D-4F15-8048-D2F4FB789CA4">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/shard&amp;id=OPTCH149" target="_blank"><span class="italic">Oracle OPatch用户指南</span></a></p>
                        <p>有关升级分片<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/shard&amp;id=GSMUG-GUID-39AD169B-86B6-4968-A126-2C61109857A8" target="_blank"><span><cite>导向</cite></span></a>器的信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/shard&amp;id=GSMUG-GUID-39AD169B-86B6-4968-A126-2C61109857A8" target="_blank"><span><cite>“Oracle数据库全局数据服务概念和管理指南”</cite></span></a> 。
                        </p>
                        <p>有关在Oracle Data Guard配置中进行修补和升级的信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/shard&amp;id=SBYDB-GUID-A4FBE490-7E7E-4998-B80E-01C93C77AE2F" target="_blank"><span><cite>Oracle Data Guard概念和管理</cite></span></a> 。
                        </p>
                        <p></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-95B0C1F3-D7F7-43F8-84B2-1DDDDF5F8380">管理分片数据库软件版本</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-62AC31EB-2FEE-412B-9DF0-2C235BB32A2A" name="GUID-62AC31EB-2FEE-412B-9DF0-2C235BB32A2A"></a><h4 id="SHARD-GUID-62AC31EB-2FEE-412B-9DF0-2C235BB32A2A" class="sect4"><span class="enumeration_section">10.7.2</span>升级分片数据库组件</h4>
                  <div>
                     <p>升级分片数据库组件的顺序对于限制停机时间和避免错误非常重要，因为组件已关闭并重新联机。</p>
                     <div class="p">
                        <p>在升级任何分片数据库组件之前，您必须</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>完成正在进行的任何待处理的<code class="codeph">MOVE CHUNK</code>操作。
                              </p>
                           </li>
                           <li>
                              <p>不要启动任何新的<code class="codeph">MOVE CHUNK</code>操作。
                              </p>
                           </li>
                           <li>
                              <p>在升级过程中不要添加任何新分片。</p>
                           </li>
                           <li>
                              <p>如果要升级包含可插拔数据库（PDB）分片的Oracle Database 18c分片数据库配置，请遵循<a href="sharding-deployment.html#GUID-4FFB5665-B925-4DB6-ACDD-807D6E699365" title="您可以在Oracle Sharding配置中将包含可插拔数据库（PDB）的多租户容器数据库（CDB）用作分片和分片目录。">使用Oracle Multitenant和Oracle Sharding中</a>的特定于PDB的升级说明。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>升级碎片时请注意以下几点。</span><div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>对于系统管理的分片数据库：以滚动方式升级Data Guard Broker配置中的每组分片。</p>
                                 </li>
                                 <li>
                                    <p>对于用户定义的分片数据库：以滚动方式升级分片空间中的每组分片。</p>
                                 </li>
                                 <li>
                                    <p>对于复合分片数据库：在给定的分片空间中，以滚动方式升级Data Guard Broker配置中的每组分片。</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>升级分片目录数据库。</span><div>
                              <p>为获得最佳结果，应使用滚动数据库升级来升级目录;但是，如果目录不可用，则在升级期间全局服务将保持可用，但不会发生服务故障转移。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>升级用于运行GDSCTL客户端的任何分片导向器，以及不运行全局服务管理器服务器的分片导向器。</span><div>
                              <p>Shard导演升级应该就地完成;但是，就地升级会导致错误的错误消息，除非以下平台的以下文件的权限更新为755：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>在Linux，Solaris64和Solaris Sparc64上：</p><pre class="pre codeblock"><code>$ ORACLE_HOME / QOpatch / qopiprep.bat $ ORACLE_HOME / jdk / bin / jcontrol $ ORACLE_HOME / jdk / jre / bin / jcontrol</code></pre></li>
                                 <li>
                                    <p>在AIX上：</p><pre class="pre codeblock"><code>$ ORACLE_HOME / QOpatch / qopiprep.bat $ ORACLE_HOME / jdk / jre / bin / classic / libjvm.a $ ORACLE_HOME / jdk / bin / policytool</code></pre></li>
                                 <li>
                                    <p>关于HPI：</p><pre class="pre codeblock"><code>$ ORACLE_HOME / jdk / jre / lib / IA64N / server / Xusage.txt $ ORACLE_HOME / jdk / jre / bin / jcontrol $ ORACLE_HOME / QOpatch / qopiprep.bat</code></pre></li>
                                 <li>
                                    <p>在Windows上，不需要错误消息。</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>一次停止，升级和重新启动所有分片导向器服务器。</span><div>
                              <p>为确保零停机时间，应始终运行至少一个分片导向器服务器。比目录更早版本的Shard Director服务器将继续完全运行，直到进行目录更改。</p>
                           </div>
                        </li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-62AC31EB-2FEE-412B-9DF0-2C235BB32A2A__GUID-75005FED-960F-4CFF-A000-6CF2A337EF64">
                        <p class="notep1">也可以看看：</p>
                        <p>有关使用DBMS_ROLLING执行滚动升级的信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/shard&amp;id=SBYDB-GUID-70C09F5B-90BE-4C8C-96A5-45A52E05D380" target="_blank"><span><cite>Oracle Data Guard概念和管理</cite></span></a> 。
                        </p>
                        <p>有关在Oracle Data Guard配置中修补和升级数据库的信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/shard&amp;id=SBYDB-GUID-A4FBE490-7E7E-4998-B80E-01C93C77AE2F" target="_blank"><span><cite>Oracle Data Guard概念和管理</cite></span></a> 。
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-95B0C1F3-D7F7-43F8-84B2-1DDDDF5F8380">管理分片数据库软件版本</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-49C60AEC-137C-47F3-AD75-24EB81F08AB4" name="GUID-49C60AEC-137C-47F3-AD75-24EB81F08AB4"></a><h4 id="SHARD-GUID-49C60AEC-137C-47F3-AD75-24EB81F08AB4" class="sect4"><span class="enumeration_section">10.7.3</span>降级分片数据库</h4>
                  <div>
                     <p>Oracle Sharding不支持降级。</p>
                     <p>分片数据库目录和分片不能降级。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-95B0C1F3-D7F7-43F8-84B2-1DDDDF5F8380">管理分片数据库软件版本</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-85D98DBC-E4CA-4C11-B887-650595E6A8CB" name="GUID-85D98DBC-E4CA-4C11-B887-650595E6A8CB"></a><h3 id="SHARD-GUID-85D98DBC-E4CA-4C11-B887-650595E6A8CB" class="sect3"><span class="enumeration_section">10.8</span>碎片管理</h3>
               <div>
                  <p>您可以使用Oracle Enterprise Manager Cloud Control和GDSCTL管理Oracle Sharding部署中的分片。</p>
                  <p>以下主题描述了分片管理概念和任务：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-6BEF1886-33D6-40AF-ACB0-DE5B6E0439C6">关于添加碎片</a><br>可以将新分片添加到现有分片数据库环境中以进行扩展并提高容错能力。
                     </li>
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-B09D6699-D7D1-4A44-B5CD-506AF997F2C6">Resharding和Hot Spot Elimination</a><br>由分片数量的变化触发的在分片之间重新分配数据的过程称为重新分片。自动重新分片是系统管理的分片方法的一项功能，可提供SDB的弹性可伸缩性。</li>
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-68815552-B995-419E-86B5-7CDF21D3D95C">从池中删除碎片</a><br>可能需要临时或永久地从分片数据库环境中删除分片，而不会丢失驻留在该分片上的任何数据。
                     </li>
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-18B880AE-68F1-4784-AFBA-EE1B53315096">添加待机碎片</a><br>您可以将Data Guard备用分片添加到Oracle Sharding环境中;但是有一些限制。
                     </li>
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-39ADA215-630C-4F6E-9EB4-81786A6E4C08">使用Oracle Enterprise Manager云控制管理碎片</a><br>您可以使用Oracle Enterprise Manager Cloud Control管理数据库分片</li>
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-4D5E555A-6B3F-4389-9705-6F6E7595F8CD">使用GDSCTL管理碎片</a><br>您可以使用GDSCTL命令行实用程序在Oracle Sharding部署中管理分片。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-1A3B887E-148D-4167-81B5-B0FA35746E4B" title="Oracle Sharding为分片数据库的管理提供了工具和一些自动化。">Sharded Database Administration</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-6BEF1886-33D6-40AF-ACB0-DE5B6E0439C6" name="GUID-6BEF1886-33D6-40AF-ACB0-DE5B6E0439C6"></a><h4 id="SHARD-GUID-6BEF1886-33D6-40AF-ACB0-DE5B6E0439C6" class="sect4"><span class="enumeration_section">10.8.1</span>关于添加碎片</h4>
                  <div>
                     <p>可以将新分片添加到现有分片数据库环境中以进行扩展并提高容错能力。</p>
                     <p>对于容错，有许多较小的分片比一些非常大的分片是有益的。随着应用程序的成熟和数据量的增加，您可以向SDB添加整个分片或多个分片以增加容量。</p>
                     <p>将分片添加到分片数据库时，如果环境通过一致哈希进行分片，则现有分片中的分块会自动移动到新分片以重新平衡分片环境。</p>
                     <p>使用用户定义的分片时，使用数据填充新分片可能需要使用GDSCTL <code class="codeph">split chunk</code>手动将块从现有分片移动到新<code class="codeph">split chunk</code>并<code class="codeph">move chunk</code>命令。
                     </p>
                     <p>Oracle Enterprise Manager Cloud Control可用于帮助识别可能是移动，拆分和移动到新分片的良好候选块。</p>
                     <p>将分片添加到环境时，请验证备用服务器是否准备就绪，并在新分片到位后，对备份<code class="codeph">move chunk</code>操作中涉及的任何分片进行备份。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-85D98DBC-E4CA-4C11-B887-650595E6A8CB" title="您可以使用Oracle Enterprise Manager Cloud Control和GDSCTL管理Oracle Sharding部署中的分片。">碎片管理</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-B09D6699-D7D1-4A44-B5CD-506AF997F2C6" name="GUID-B09D6699-D7D1-4A44-B5CD-506AF997F2C6"></a><h4 id="SHARD-GUID-B09D6699-D7D1-4A44-B5CD-506AF997F2C6" class="sect4"><span class="enumeration_section">10.8.2</span>重新分析和消除热点</h4>
                  <div>
                     <p>由分片数量的变化触发的在分片之间重新分配数据的过程称为重新分片。自动重新分片是系统管理的分片方法的一项功能，可提供SDB的弹性可伸缩性。</p>
                     <p>有时，SDB中的数据需要从一个分片迁移到另一个分片。在以下情况下，需要跨分片进行数据迁移：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在SDB中添加或删除一个或多个分片时</p>
                        </li>
                        <li>
                           <p>跨分片的数据或工作负载分布存在偏差时</p>
                        </li>
                     </ul>
                     <p>分片之间的数据迁移单位是块。以块的形式迁移数据保证将来自不同分片表的相关数据一起移动。</p>
                     <p>将分片添加到SDB或从SDB中删除分片时，将迁移多个分块以在分片中维护分块和工作负载的均衡分布。</p>
                     <p>根据分片方法，重新分片会自动发生（系统管理）或由用户（复合）引导。下图显示了将分片添加到具有三个分片的SDB时自动重新分片的阶段。</p>
                     <div class="figure" id="GUID-B09D6699-D7D1-4A44-B5CD-506AF997F2C6__GUID-8706DE06-6CA1-48A4-8643-00CF4F29144B">
                        <p class="titleinfigure">图10-6重新分配SDB</p><img src="img/admin_3v_132a.png" alt="下面是图10-6的描述" title="下面是图10-6的描述" longdesc="img_text/admin_3v_132a.html"><br><a href="img_text/admin_3v_132a.html">“图10-6重新分配SDB”的描述</a></div>
                     <!-- class="figure" -->
                     <p>当发生数据或工作负载偏斜时，特定块也可以从一个分片移动到另一个分片，而不会更改分片数量。在这种情况下，数据库管理员可以启动块迁移以消除热点。</p>
                     <p>RMAN增量备份，可传输表空间和Oracle Notification Service技术用于最大限度地减少块迁移对应用程序可用性的影响。在块迁移期间，块保持在线状态。当存储在块中的数据仅可用于只读访问时，存在短时间（几秒）。</p>
                     <p>启用FAN的客户端在源分片中即将成为只读块时收到通知，并且在块迁移完成时目标分片中的块完全可用时再次收到通知。当客户端收到<code class="codeph">chunk read-only</code>事件时，它们可以重复连接尝试，直到块迁移完成，或者访问源块中的只读块。在后一种情况下，尝试写入块将导致运行时错误。
                     </p>
                     <div class="infoboxnote" id="GUID-B09D6699-D7D1-4A44-B5CD-506AF997F2C6__GUID-1377A5A2-7E38-4DA4-A6B9-18BD06675BF7">
                        <p class="notep1">注意：</p>
                        <p>在分片数据库重新分片时运行多分片查询可能会导致错误，因此建议您在多分片工作负载期间不要部署新分片。</p>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-B09D6699-D7D1-4A44-B5CD-506AF997F2C6__GUID-8F802D02-29B6-42D7-B771-F94C0FB0D750">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="sharding-lifecycle-management.html#GUID-37E6DB26-3156-4348-B69D-4BC5FB628702" title="将分片添加到系统管理的SDB可弹性扩展SDB。在系统管理的SDB中，在添加新分片后会自动重新平衡分块。">将碎片添加到系统管理的SDB</a></p>
                        <p><a href="sharding-methods.html#GUID-3B07D91C-CEAA-4170-A94B-ACF47BEE617B" title="本章讨论Oracle Sharding支持的分片方法，如何选择方法以及如何使用子分区。">分片方法</a></p> 
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-85D98DBC-E4CA-4C11-B887-650595E6A8CB" title="您可以使用Oracle Enterprise Manager Cloud Control和GDSCTL管理Oracle Sharding部署中的分片。">碎片管理</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-68815552-B995-419E-86B5-7CDF21D3D95C" name="GUID-68815552-B995-419E-86B5-7CDF21D3D95C"></a><h4 id="SHARD-GUID-68815552-B995-419E-86B5-7CDF21D3D95C" class="sect4"><span class="enumeration_section">10.8.3</span>从池中删除碎片</h4>
                  <div>
                     <p>可能需要临时或永久地从分片数据库环境中删除分片，而不会丢失驻留在该分片上的任何数据。</p>
                     <p>例如，如果在繁忙假期后缩小分片环境，或者替换数据中心内的服务器或基础结构，则可能需要删除分片。在停用分片之前，必须将分片中的所有块移动到将保持联机的其他分片。移动它们时，尝试在所有分片中保持数据和活动的平衡。</p>
                     <p>如果仅暂时删除分片，请跟踪移动到每个分片的块，以便在维护完成后可以轻松识别它们并将其移回。</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-68815552-B995-419E-86B5-7CDF21D3D95C__GUID-BB8896C4-F566-47CD-8E3B-D9C6349E326E">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="sharding-lifecycle-management.html#GUID-623BEA35-8288-40B5-8D3B-B9F9B0FE5837" title="有时需要将一个块从一个碎片移动到另一个碎片。为了保持分片环境的可伸缩性，尝试在所有分片中保持负载和活动的平均分布非常重要。">关于移动块</a></p>
                        <p>有关使用<code class="codeph">GDSCTL REMOVE SHARD</code>命令的信息，请<code class="codeph">GDSCTL REMOVE SHARD</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/shard&amp;id=GSMUG-GUID-417F8D04-908C-4A35-A24E-7722742A09DB" target="_blank"><span><cite>“Oracle数据库全局数据服务概念和管理指南”</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-85D98DBC-E4CA-4C11-B887-650595E6A8CB" title="您可以使用Oracle Enterprise Manager Cloud Control和GDSCTL管理Oracle Sharding部署中的分片。">碎片管理</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-18B880AE-68F1-4784-AFBA-EE1B53315096" name="GUID-18B880AE-68F1-4784-AFBA-EE1B53315096"></a><h4 id="SHARD-GUID-18B880AE-68F1-4784-AFBA-EE1B53315096" class="sect4"><span class="enumeration_section">10.8.4</span>添加待机碎片</h4>
                  <div>
                     <p>您可以将Data Guard备用分片添加到Oracle Sharding环境中;但是有一些限制。</p>
                     <div class="section">
                        <p>使用Data Guard作为分片数据库的复制方法时，Oracle Sharding仅支持添加主要或物理备用分片;将新备用数据库添加到分片数据库时，不支持其他类型的Data Guard备用数据库。但是，已经成为分片数据库一部分的分片可以从物理备用数据库转换为快照备用数据库。将物理备用数据库转换为快照备用数据库时，应遵循以下步骤：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>使用GDSCTL命令<code class="codeph">STOP SERVICE</code>停止分片上的所有全局服务。</span></li>
                        <li class="stepexpand"><span>使用GDSCTL命令<code class="codeph">DISABLE SERVICE</code>禁用分片上的所有全局服务。</span></li>
                        <li class="stepexpand"><span>使用Data Guard文档中描述的过程将分片转换为快照备用数据库。</span><div>
                              <p>此时，分片仍然是分片数据库的一部分，但不接受使用分片键的连接。</p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>如果将数据库转换回物理备用数据库，则可以启用并再次启动全局服务，并且分片将成为分片数据库的活动成员。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-18B880AE-68F1-4784-AFBA-EE1B53315096__GUID-6CF66164-AD55-4898-B78F-4E1A4F68F201">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/shard&amp;id=SBYDB-GUID-CE30E2D6-5B53-4389-8B02-FC0F341C8C1A" target="_blank"><span><cite>Oracle Data Guard概念和管理</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-85D98DBC-E4CA-4C11-B887-650595E6A8CB" title="您可以使用Oracle Enterprise Manager Cloud Control和GDSCTL管理Oracle Sharding部署中的分片。">碎片管理</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-39ADA215-630C-4F6E-9EB4-81786A6E4C08" name="GUID-39ADA215-630C-4F6E-9EB4-81786A6E4C08"></a><h4 id="SHARD-GUID-39ADA215-630C-4F6E-9EB4-81786A6E4C08" class="sect4"><span class="enumeration_section">10.8.5</span>使用Oracle Enterprise Manager云控制管理碎片</h4>
                  <div>
                     <p>您可以使用Oracle Enterprise Manager Cloud Control管理数据库分片</p>
                     <p>要使用Cloud Control管理分片，必须首先发现它们。由于每个数据库分片都是数据库本身，因此您可以使用标准的Cloud Control数据库发现过程。</p>
                     <p>以下主题描述使用Oracle Enterprise Manager云控制进行分片管理：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-308240CC-999B-4AE9-A0B3-555679816CEB">验证碎片</a><br>在将分片添加到Oracle Sharding部署之前验证分片。
                        </li>
                        <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-67BCDEA9-29CC-41A2-986C-F45325E77F41">添加主要碎片</a><br>使用Oracle Enterprise Manager Cloud Control将主分片添加到Oracle Sharding部署。
                        </li>
                        <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-387A011C-6429-47A9-AD7D-C371C56C2D52">添加待机碎片</a><br>使用Oracle Enterprise Manager Cloud Control将备用分片添加到Oracle Sharding部署。
                        </li>
                        <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-4A89ADCE-5486-40E8-AF31-8D31EC2FC27D">部署碎片</a><br>使用Oracle Enterprise Manager Cloud Control部署已添加到Oracle Sharding环境的分片。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-85D98DBC-E4CA-4C11-B887-650595E6A8CB" title="您可以使用Oracle Enterprise Manager Cloud Control和GDSCTL管理Oracle Sharding部署中的分片。">碎片管理</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-308240CC-999B-4AE9-A0B3-555679816CEB" name="GUID-308240CC-999B-4AE9-A0B3-555679816CEB"></a><h5 id="SHARD-GUID-308240CC-999B-4AE9-A0B3-555679816CEB" class="sect5"><span class="enumeration_section">10.8.5.1</span>验证分片</h5>
                     <div>
                        <p>在将分片添加到Oracle Sharding部署之前验证分片。</p>
                        <div class="section">
                           <p>在将分片添加到Oracle Sharding部署之前，您可以使用Oracle Enterprise Manager Cloud Control来验证分片。您还可以在部署后验证分片，以确认稍后在分片生命周期中设置仍然有效。例如，在软件升级后，您可以验证现有分片以确认其参数和配置的正确性。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="p">
                           <p>要使用Cloud Control验证分片，它们应该是Cloud Control正在监视的现有目标。</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>从分片组管理页面中，打开位于分片组目标页面左上角的<span class="bold">Shardgroup</span>菜单，然后选择<span class="bold">Manage Shards</span> 。</span></li>
                           <li><span>如果出现提示，请输入分片目录凭据，选择要在<span class="uicontrol bold">Shard Director凭据</span>下管理的分片导向器，选择分片导向器主机凭据，然后登录。</span></li>
                           <li><span>从列表中选择一个分片，然后单击“ <span class="uicontrol bold">验证”</span> 。</span></li>
                           <li><span>单击“确定”以确认您要验证分片。</span></li>
                           <li><span>单击页面顶部“ <span class="uicontrol bold">信息”</span>框中的链接以查看分片的配置状态。</span></li>
                        </ol>
                        <div class="section">
                           <p>分片验证脚本成功运行时，检查输出中报告的错误。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-39ADA215-630C-4F6E-9EB4-81786A6E4C08" title="您可以使用Oracle Enterprise Manager Cloud Control管理数据库分片">使用Oracle Enterprise Manager云控制管理碎片</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-67BCDEA9-29CC-41A2-986C-F45325E77F41" name="GUID-67BCDEA9-29CC-41A2-986C-F45325E77F41"></a><h5 id="SHARD-GUID-67BCDEA9-29CC-41A2-986C-F45325E77F41" class="sect5"><span class="enumeration_section">10.8.5.2</span>添加主分片</h5>
                     <div>
                        <p>使用Oracle Enterprise Manager Cloud Control将主分片添加到Oracle Sharding部署。</p>
                        <div class="p">
                           <p>主分片应该是Cloud Control正在监视的现有目标。</p>
                           <p>强烈建议您在将分片添加到Oracle Sharding环境之前验证该分片。您可以使用Cloud Control来验证分片（请参阅<a href="sharding-lifecycle-management.html#GUID-308240CC-999B-4AE9-A0B3-555679816CEB" title="在将分片添加到Oracle Sharding部署之前验证分片。">验证分片</a> ），或使用SQL * Plus对分片运行DBMS_GSM_FIX.validateShard过程（请参阅<a href="sharding-lifecycle-management.html#GUID-E00AFC57-26DC-4324-9E0B-058242AD74A1" title="在将新创建的分片添加到分片配置之前，必须验证是否已为分片环境正确配置分片。">验证分片</a> ）。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>打开位于Sharded Database目标页面左上角的<span class="uicontrol bold">Sharded Database</span>菜单，然后选择<span class="uicontrol bold">Add Primary Shards</span> 。</span></li>
                           <li class="stepexpand"><span>如果出现提示，请输入分片目录凭据，选择要在<span class="uicontrol bold">Shard Director凭据</span>下管理的分片导向器，选择分片导向器主机凭据，然后登录。</span></li>
                           <li class="stepexpand"><span>选择<span class="uicontrol bold">在分</span>片<span class="uicontrol bold">数据库</span>中部署所有分片以部署添加到分片数据库配置的所有分片。</span><div>
                                 <p>部署操作验证分片的配置并执行最终配置步骤。碎片只能在部署后使用。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>单击<span class="uicontrol bold">添加</span> 。</span></li>
                           <li class="stepexpand"><span>在“碎片详细信息”对话框的“ <span class="uicontrol bold">数据库”</span>字段中，选择一个碎片，然后单击“ <span class="uicontrol bold">选择”</span> 。</span></li>
                           <li class="stepexpand"><span>在复合Oracle Sharding环境中，您可以选择要添加分片的分片空间。</span></li>
                           <li class="stepexpand"><span>单击<span class="uicontrol bold">确定</span> 。</span></li>
                           <li class="stepexpand"><span>如有必要，输入GSMUSER凭据，然后单击“ <span class="uicontrol bold">下一步”</span> 。</span></li>
                           <li class="stepexpand"><span>指示何时应执行ADD SHARD操作，然后单击“ <span class="uicontrol bold">下一步”</span> 。</span><div>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="uicontrol bold">立即</span> ：在确认后提供碎片</p>
                                    </li>
                                    <li>
                                       <p><span class="uicontrol bold">稍后</span> ：使用相邻字段中的日历工具安排添加碎片的时间</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li class="stepexpand"><span>查看要添加的分片的配置，然后单击“ <span class="uicontrol bold">提交”</span> 。</span></li>
                           <li class="stepexpand"><span>单击页面顶部“ <span class="uicontrol bold">信息”</span>框中的链接以查看分片的配置状态。</span></li>
                        </ol>
                        <div class="section">
                           <p>如果在上述过程中未<span class="uicontrol bold">在分片数据库</span>中选择“ <span class="uicontrol bold">部署所有</span>碎片”，请使用“ <a href="sharding-lifecycle-management.html#GUID-4A89ADCE-5486-40E8-AF31-8D31EC2FC27D" title="Use Oracle Enterprise Manager Cloud Control to deploy shards that have been added to your Oracle Sharding environment.">部署碎片”</a>任务在Oracle Sharding部署中<a href="sharding-lifecycle-management.html#GUID-4A89ADCE-5486-40E8-AF31-8D31EC2FC27D" title="使用Oracle Enterprise Manager Cloud Control部署已添加到Oracle Sharding环境的分片。">部署碎片</a> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-39ADA215-630C-4F6E-9EB4-81786A6E4C08" title="您可以使用Oracle Enterprise Manager Cloud Control管理数据库分片">使用Oracle Enterprise Manager云控制管理碎片</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-387A011C-6429-47A9-AD7D-C371C56C2D52" name="GUID-387A011C-6429-47A9-AD7D-C371C56C2D52"></a><h5 id="SHARD-GUID-387A011C-6429-47A9-AD7D-C371C56C2D52" class="sect5"><span class="enumeration_section">10.8.5.3</span>添加待机碎片</h5>
                     <div>
                        <p>使用Oracle Enterprise Manager Cloud Control将备用分片添加到Oracle Sharding部署。</p>
                        <div class="p">
                           <p>备用分片应该是Cloud Control正在监视的现有目标。</p>
                           <p>强烈建议您在将分片添加到Oracle Sharding环境之前验证该分片。您可以使用Cloud Control来验证分片（请参阅<a href="sharding-lifecycle-management.html#GUID-308240CC-999B-4AE9-A0B3-555679816CEB" title="在将分片添加到Oracle Sharding部署之前验证分片。">验证分片</a> ），或使用SQL * Plus对分片运行DBMS_GSM_FIX.validateShard过程（请参阅<a href="sharding-lifecycle-management.html#GUID-E00AFC57-26DC-4324-9E0B-058242AD74A1" title="在将新创建的分片添加到分片配置之前，必须验证是否已为分片环境正确配置分片。">验证分片</a> ）。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>打开位于Sharded Database目标页面左上角的<span class="uicontrol bold">Sharded Database</span>菜单，然后选择<span class="uicontrol bold">Add Standby Shards</span> 。</span></li>
                           <li class="stepexpand"><span>如果出现提示，请输入分片目录凭据，选择要在<span class="uicontrol bold">Shard Director凭据</span>下管理的分片导向器，选择分片导向器主机凭据，然后登录。</span></li>
                           <li class="stepexpand"><span>选择<span class="uicontrol bold">在分</span>片<span class="uicontrol bold">数据库</span>中部署所有分片以部署添加到分片数据库配置的所有分片。</span><div>
                                 <p>部署操作验证分片的配置并执行最终配置步骤。碎片只能在部署后使用。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>选择一个主分片，新分片将在<span class="uicontrol bold">主分片</span>列表中充当备用分片。</span></li>
                           <li class="stepexpand"><span>单击<span class="uicontrol bold">添加</span> 。</span></li>
                           <li class="stepexpand"><span>在“分片详细信息”对话框的“ <span class="uicontrol bold">数据库”</span>字段中，选择备用分片。</span></li>
                           <li class="stepexpand"><span>选择要添加分片的分片组。</span><div>
                                 <p>仅显示尚未包含所选主数据库的备用数据库的分片组。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>单击<span class="uicontrol bold">确定</span> 。</span></li>
                           <li class="stepexpand"><span>如有必要，输入GSMUSER凭据，然后单击“ <span class="uicontrol bold">下一步”</span> 。</span></li>
                           <li class="stepexpand"><span>指示何时应执行ADD SHARD操作，然后单击“ <span class="uicontrol bold">下一步”</span> 。</span><div>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="uicontrol bold">立即</span> ：在确认后提供碎片</p>
                                    </li>
                                    <li>
                                       <p><span class="uicontrol bold">稍后</span> ：使用相邻字段中的日历工具安排添加碎片的时间</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li class="stepexpand"><span>查看要添加的分片的配置，然后单击“ <span class="uicontrol bold">提交”</span> 。</span></li>
                           <li class="stepexpand"><span>单击页面顶部“ <span class="uicontrol bold">信息”</span>框中的链接以查看分片的配置状态。</span></li>
                        </ol>
                        <div class="section">
                           <p>如果在上述过程中未<span class="uicontrol bold">在分片数据库</span>中选择“ <span class="uicontrol bold">部署所有</span>碎片”，请使用“ <a href="sharding-lifecycle-management.html#GUID-4A89ADCE-5486-40E8-AF31-8D31EC2FC27D" title="Use Oracle Enterprise Manager Cloud Control to deploy shards that have been added to your Oracle Sharding environment.">部署碎片”</a>任务在Oracle Sharding部署中<a href="sharding-lifecycle-management.html#GUID-4A89ADCE-5486-40E8-AF31-8D31EC2FC27D" title="使用Oracle Enterprise Manager Cloud Control部署已添加到Oracle Sharding环境的分片。">部署碎片</a> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-39ADA215-630C-4F6E-9EB4-81786A6E4C08" title="您可以使用Oracle Enterprise Manager Cloud Control管理数据库分片">使用Oracle Enterprise Manager云控制管理碎片</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-4A89ADCE-5486-40E8-AF31-8D31EC2FC27D" name="GUID-4A89ADCE-5486-40E8-AF31-8D31EC2FC27D"></a><h5 id="SHARD-GUID-4A89ADCE-5486-40E8-AF31-8D31EC2FC27D" class="sect5"><span class="enumeration_section">10.8.5.4</span>部署碎片</h5>
                     <div>
                        <p>使用Oracle Enterprise Manager Cloud Control部署已添加到Oracle Sharding环境的分片。</p>
                        <ol>
                           <li class="stepexpand"><span>打开位于Sharded Database目标页面左上角的<span class="uicontrol bold">Sharded Database</span>菜单，然后选择<span class="uicontrol bold">Deploy Shards</span> 。</span></li>
                           <li class="stepexpand"><span>如果出现提示，请输入分片目录凭据，选择要在<span class="uicontrol bold">Shard Director凭据</span>下管理的分片导向器，选择分片导向器主机凭据，然后登录。</span></li>
                           <li class="stepexpand"><span>选中“ <span class="uicontrol bold">执行重新平衡”</span>复选框可在部署分片后自动在分片之间重新分配数据。</span><div>
                                 <p>如果要手动将块移动到分片，请取消选中此框。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>单击“ <span class="uicontrol bold">提交”</span></span></li>
                           <li class="stepexpand"><span>单击页面顶部“ <span class="uicontrol bold">信息”</span>框中的链接以查看分片的配置状态。</span></li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-39ADA215-630C-4F6E-9EB4-81786A6E4C08" title="您可以使用Oracle Enterprise Manager Cloud Control管理数据库分片">使用Oracle Enterprise Manager云控制管理碎片</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-4D5E555A-6B3F-4389-9705-6F6E7595F8CD" name="GUID-4D5E555A-6B3F-4389-9705-6F6E7595F8CD"></a><h4 id="SHARD-GUID-4D5E555A-6B3F-4389-9705-6F6E7595F8CD" class="sect4"><span class="enumeration_section">10.8.6使用GDSCTL</span>管理碎片</h4>
                  <div>
                     <p>您可以使用GDSCTL命令行实用程序在Oracle Sharding部署中管理分片。</p>
                     <p>以下主题描述了使用GDSCTL进行分片管理：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-E00AFC57-26DC-4324-9E0B-058242AD74A1">验证碎片</a><br>在将新创建的分片添加到分片配置之前，必须验证是否已为分片环境正确配置分片。
                        </li>
                        <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-37E6DB26-3156-4348-B69D-4BC5FB628702">将碎片添加到系统管理的SDB</a><br>将分片添加到系统管理的SDB可弹性扩展SDB。在系统管理的SDB中，在添加新分片后会自动重新平衡分块。
                        </li>
                        <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-628FDBEA-9CE9-4C42-9693-3FF294E3B8B9">替换碎片</a><br>如果分片失败且无法恢复，或者您只是出于其他原因想要将分片移动到新主机，则可以使用GDSCTL中的ADD SHARD -REPLACE命令替换它。</li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-85D98DBC-E4CA-4C11-B887-650595E6A8CB" title="您可以使用Oracle Enterprise Manager Cloud Control和GDSCTL管理Oracle Sharding部署中的分片。">碎片管理</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-E00AFC57-26DC-4324-9E0B-058242AD74A1" name="GUID-E00AFC57-26DC-4324-9E0B-058242AD74A1"></a><h5 id="SHARD-GUID-E00AFC57-26DC-4324-9E0B-058242AD74A1" class="sect5"><span class="enumeration_section">10.8.6.1</span>验证分片</h5>
                     <div>
                        <p>在将新创建的分片添加到分片配置之前，必须验证是否已为分片环境正确配置分片。</p>
                        <p>在运行<code class="codeph">ADD SHARD</code>之前，对将添加为分片的数据库运行<code class="codeph">validateShard</code>过程。<code class="codeph">validateShard</code>过程验证目标数据库是否具有成功作为分片所需的初始化参数和特征。
                        </p>
                        <p><code class="codeph">validateShard</code>过程分析目标数据库并报告在该数据库上运行<code class="codeph">GDSCTL ADD SHARD</code>之前需要解决的任何问题。<code class="codeph">validateShard</code>过程不会对数据库或其参数进行任何更改;它只报告信息和可能的问题。
                        </p>
                        <p><code class="codeph">validateShard</code>过程采用一个可选参数，该参数指定是使用Data Guard将分片添加到分片目录还是使用Oracle GoldenGate作为其复制技术添加到分片目录。如果您使用的是Data Guard，请调用<code class="codeph">validateShard('DG')</code> 。如果您使用的是Oracle GoldenGate，请使用<code class="codeph">validateShard('OGG')</code> 。如果没有参数传递给<code class="codeph">validateShard</code>则默认值为Data Guard。
                        </p>
                        <p><code class="codeph">validateShard</code>过程也可以在部署分片后运行，以确认设置在分片生命周期的后期仍然有效。例如，在软件升级之后或在部署分片之后，可以在现有分片上运行<code class="codeph">validateShard</code>以确认其参数和配置的正确性。
                        </p>
                        <p>运行<code class="codeph">validateShard</code>如下：</p><pre class="pre codeblock"><code>sqlplus / as sysdba SQL&gt;在SQL上设置serveroutput&gt;执行dbms_gsm_fix.validateShard</code></pre><p>以下是输出的示例。</p><pre class="pre codeblock"><code>INFO：请求Data Guard分片验证。信息：数据库角色是主要的。信息：数据库名称为DEN27B。信息：数据库唯一名称是den27b。信息：数据库ID是718463507。信息：数据库打开模式为READ WRITE。 INFO：归档日志模式下的数据库。信息：闪回已打开。信息：强制记录已启用。信息：数据库平台是Linux x86 64位。信息：数据库字符集是WE8DEC。该值必须与目录数据库的字符集匹配。INFO：'compatible'初始化参数已成功验证。信息：数据库不是多租户容器数据库。信息：数据库正在使用服务器参数文件（spfile）。INFO：db_create_file_dest设置为：'&lt;ORACLE_BASE&gt; / oracle / dbs2'INFO：db_recovery_file_dest设置为：'&lt;ORACLE_BASE&gt; / oracle / dbs2'INFO：db_files = 1000。必须大于要在分片中创建的块和/或表空间的数量。INFO：dg_broker_start设置为TRUE。 INFO：remote_login_passwordfile设置为EXCLUSIVE。 INFO：db_file_name_convert设置为：'/ dbs / dt，/ dbs / bt，dbs2 / DEN27D /，dbs2 / DEN27B /'信息：GSMUSER帐户已成功验证。INFO：DATA_PUMP_DIR是'&lt;ORACLE_BASE&gt; // oracle / dbs2'。</code></pre><p>任何标有<code class="codeph">INFO</code>都是信息性的，并确认正确的设置。标有“ <code class="codeph">WARNING</code>可能会也可能不会出现问题，具体取决于您的配置。例如，报告与Data Guard参数相关的问题，但如果您的配置仅包括主数据库，则可以忽略任何Data Guard问题。最后，必须更正具有<code class="codeph">ERROR</code>标记的任何输出，以使分片在分片配置中正确部署和运行。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-4D5E555A-6B3F-4389-9705-6F6E7595F8CD" title="您可以使用GDSCTL命令行实用程序在Oracle Sharding部署中管理分片。">使用GDSCTL管理碎片</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-37E6DB26-3156-4348-B69D-4BC5FB628702" name="GUID-37E6DB26-3156-4348-B69D-4BC5FB628702"></a><h5 id="SHARD-GUID-37E6DB26-3156-4348-B69D-4BC5FB628702" class="sect5"><span class="enumeration_section">10.8.6.2</span>将碎片添加到系统管理的SDB</h5>
                     <div>
                        <p>将分片添加到系统管理的SDB可弹性扩展SDB。在系统管理的SDB中，在添加新分片后会自动重新平衡分块。</p>
                        <div class="p">
                           <p>要准备新的分片主机，请按照初始分片数据库环境所做的所有设置过程执行，包括：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="sharding-deployment.html#GUID-3F3A387E-FAC5-467C-A45E-4A7DFF95B62D" title="在将托管分片目录或数据库分片的每个系统上安装Oracle数据库。">安装Oracle数据库软件</a></p>
                              </li>
                              <li>
                                 <p>按照<a href="sharding-deployment.html#GUID-96ABB404-844C-457E-9C10-2D5C352D3928" title="必须将分片目录，分片控制器和分片配置为相互通信。">设置Oracle Sharding Management和Routing Tier中的说明</a>注册远程调度程序代理</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>连接到分片导向器主机，并验证环境变量。</span><div><pre class="pre codeblock"><code>$ ssh <span class="variable" translate="no">os_user</span> <span class="variable" translate="no">shard_director_home</span> $ env | grep ORA ORACLE_BASE = / u01 / app / oracle ORACLE_HOME = / u01 / app / oracle / product / 18.0.0 / gsmhome_1</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>为当前会话设置全局服务管理器，并指定要管理它的凭据。</span><div><pre class="pre codeblock"><code>$ gdsctl GDSCTL&gt; set gsm -gsm sharddirector1 GDSCTL&gt; connect mysdbadmin / <span class="variable" translate="no">mysdbadmin_password</span></code></pre></div>
                           </li>
                           <li class="stepexpand"><span>验证当前的分片配置。</span><div><pre class="pre codeblock"><code>GDSCTL&gt; config shard Name Shard Group Status State Region Availability ---- ----------- ------ ----- ------ ------- ----- sh1 primary_shardgroup Ok已部署的region1 ONLINE sh2 standby_shardgroup Ok已部署的region2 READ_ONLY sh3 primary_shardgroup Ok已部署的region1 ONLINE sh4 standby_shardgroup Ok已部署的region2 READ_ONLY</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>为每个新分片指定分片组，目标和凭据。</span><div>
                                 <p>在示例中，新的分片主机称为shard5和shard6，它们使用NETCA和DBCA的默认模板。</p><pre class="pre codeblock"><code>GDSCTL&gt; add invitenode shard5 GDSCTL&gt; create shard -shardgroup primary_shardgroup -destination shard5 -credential <span class="variable" translate="no">os_credential</span> -sys_password GDSCTL&gt; add invitenode shard6 GDSCTL&gt; create shard -shardgroup standby_shardgroup -destination shard6 -credential <span class="variable" translate="no">os_credential</span> -sys_password</code></pre><p>创建分片时，您还可以使用<code class="codeph">-sys_password</code>在<code class="codeph">create shard</code> <code class="codeph">-sys_password</code>设置SYS密码，如上例所示。这在<code class="codeph">DEPLOY</code>期间创建分片后设置SYS密码。</p>
                                 <p>上面的示例使用CREATE SHARD方法创建新的分片。要使用ADD SHARD命令添加预配置的sahrd，请在<code class="codeph">ADD INVITEDNODE</code>之后执行以下<code class="codeph">ADD INVITEDNODE</code> ：</p><pre class="pre codeblock"><code>GDSCTL&gt;添加shard -shardgroup primary_shardgroup -connect <span class="variable" translate="no">shard_host</span> ： <span class="variable" translate="no">TNS_listener_port</span> / <span class="variable" translate="no">shard_database_name</span> -pwd <span class="variable" translate="no">GSMUSER_password</span></code></pre><p>如果要添加的分片是PDB，则必须使用<code class="codeph">ADD SHARD</code> <code class="codeph">-cdb</code>中的<code class="codeph">-cdb</code>选项指定PDB分片所在的CDB。此外，必须在<code class="codeph">ADD SHARD</code>命令之前使用<code class="codeph">ADD CDB</code>将CDB添加到目录中。有关<code class="codeph">ADD CDB</code>和<code class="codeph">ADD SHARD</code>的语法，请参阅“ <span><cite>Oracle数据库全局数据服务概念和管理指南”</cite></span> 。</p>
                                 <div class="infoboxnote" id="GUID-37E6DB26-3156-4348-B69D-4BC5FB628702__GUID-DECB158C-3ABC-4687-889E-00F725C85015">
                                    <p class="notep1">注意：</p>
                                    <p>有关自动VNCR注册的信息，请参阅此<a href="sharding-deployment.html#GUID-4E77F1B8-F665-40C4-B4AC-B321C7302AA9__THEVALIDNODECHECKINGFORREGISTRATION-3F858F5D">注释</a> 。
                                    </p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>运行<code>DEPLOY</code>命令以创建分片和副本。</span><div><pre class="pre codeblock"><code>GDSCTL&gt;部署</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>验证是否已部署新分片。</span><div><pre class="pre codeblock"><code>GDSCTL&gt; config shard Name Shard Group Status State Region Availability ---- ----------- ------ ----- ------ ------- ----- sh1 primary_shardgroup Ok已部署的region1 ONLINE sh2 standby_shardgroup Ok已部署的region2 READ_ONLY sh3 primary_shardgroup Ok已部署的region1 ONLINE sh4 standby_shardgroup Ok已部署的region2 READ_ONLY sh5 primary_shardgroup Ok已部署的region1 ONLINE sh6 standby_shardgroup Ok已部署的region2 READ_ONLY</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>每隔一两分钟检查一次块配置，以查看块自动重新平衡的进度。</span><div><pre class="pre codeblock"><code>$ gdsctl config chunks -show_Reshard Chunks ------------------------数据库从To -------- ----  -  sh1 1 4 sh2 1 4 sh3 7 10 sh4 7 10 sh5 5 6 sh5 11 12 sh6 5 6 sh6 11 12正在进行的块运动------------------------块源目标状态----- ------ ------ ------</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>观察到碎片（数据库）是自动注册的。</span><div><pre class="pre codeblock"><code>$ gdsctl数据库数据库：“sh1”已注册：Y状态：确定ONS：N。角色：主要实例：1地区：region1服务：“oltp_ro_srvc”全球启动：Y已启动：N扫描：N已启用：Y首选：Y服务： “oltp_rw_srvc”全局启动：Y已启动：Y扫描：N已启用：Y首选：Y已注册实例：cust_sdb％1数据库：“sh2”已注册：Y状态：确定ONS：N。角色：PH_STNDBY实例：1区域：region2服务：“oltp_ro_srvc”全局启动：Y已启动：Y扫描：N已启用：Y首选：Y服务：“oltp_rw_srvc”全局启动：Y已启动：N扫描：N已启用：Y首选：Y已注册实例：cust_sdb％11数据库：“ sh3“已注册：Y状态：确定ON：N。角色：主要实例：1地区：region1服务：”oltp_ro_srvc“全球启动：Y已启动：N扫描：N已启用：Y首选：Y服务：”oltp_rw_srvc“全球启动：是开始：Y扫描：N启用：Y首选：Y已注册实例：cust_sdb％21数据库：“sh4”已注册：Y状态：确定ONS：N。作用：PH_STNDBY实例：1区域：region2服务：“oltp_ro_srvc”全局启动：Y已启动：Y扫描：N已启用：Y首选：Y服务：“oltp_rw_srvc”全局启动：Y已启动：N扫描：N已启用：Y首选：Y已注册实例：cust_sdb％31数据库：“ <span class="bold">sh5</span> ”已注册：Y状态：确定ONS：N。 <span class="bold">角色：主要</span>实例：1地区：region1服务：“oltp_ro_srvc”全球启动：Y开始：N扫描：N启用：Y首选：Y <span class="bold">服务：“oltp_rw_srvc”</span>全局启动：Y已<span class="bold">启动：Y</span>扫描：N已启用：Y首选：Y已注册实例：cust_sdb％41数据库：“ <span class="bold">sh6</span> ”已注册：Y状态：确定ONS：N。 <span class="bold">角色：PH_STNDBY</span>实例：1区域：region2 <span class="bold">服务：“oltp_ro_srvc “</span>全局启动：Y已<span class="bold">启动：Y</span>扫描：N已启用：Y首选：Y服务：”oltp_rw_srvc“全局启动：Y已启动：N扫描：N已启用：Y首选：Y已注册实例：cust_sdb％51</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>观察到服务会自动显示在新分片上。</span><div><pre class="pre codeblock"><code>$ gdsctl services服务“ <span class="bold">oltp_ro_srvc</span> .cust_sdb.oradbcloud”有3个实例。亲和性：ANYWHERE实例“cust_sdb％11”，名称：“sh2”，db：“sh2”，region：“region2”，状态：就绪。实例“cust_sdb％31”，名称：“sh4”，db：“sh4”，区域：“region2”，状态：就绪。实例“cust_sdb％51”，名称：“sh6”，db：“sh6”，区域：“region2”，状态：就绪。服务“ <span class="bold">oltp_rw_srvc</span> .cust_sdb.oradbcloud”有3个实例。亲和性：ANYWHERE实例“cust_sdb％1”，名称：“sh1”，db：“sh1”，region：“region1”，状态：就绪。实例“cust_sdb％21”，名称：“sh3”，db：“sh3”，区域：“region1”，状态：就绪。实例“cust_sdb％41”，名称：“sh5”，db：“sh5”，区域：“region1”，状态：就绪。
</code></pre></div>
                           </li>
                        </ol>
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-37E6DB26-3156-4348-B69D-4BC5FB628702__GUID-FB113C5D-C378-4180-A352-92958B6963BF">
                           <p class="notep1">也可以看看：</p>
                           <p>有关GDSCTL命令用法的信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/shard&amp;id=GSMUG-GUID-E6E76443-AD85-455C-99AA-BF0A7856F880" target="_blank"><span><cite>“Oracle数据库全局数据服务概念和管理指南”</cite></span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-4D5E555A-6B3F-4389-9705-6F6E7595F8CD" title="您可以使用GDSCTL命令行实用程序在Oracle Sharding部署中管理分片。">使用GDSCTL管理碎片</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-628FDBEA-9CE9-4C42-9693-3FF294E3B8B9" name="GUID-628FDBEA-9CE9-4C42-9693-3FF294E3B8B9"></a><h5 id="SHARD-GUID-628FDBEA-9CE9-4C42-9693-3FF294E3B8B9" class="sect5"><span class="enumeration_section">10.8.6.3</span>更换碎片</h5>
                     <div>
                        <p>如果分片失败且无法恢复，或者您只是出于其他原因想要将分片移动到新主机，则可以使用GDSCTL中的ADD SHARD -REPLACE命令替换它。</p>
                        <p>当分片数据库失败并且可以在同一主机上恢复数据库时（使用RMAN备份/恢复或其他方法），不需要使用-replace参数替换分片。如果无法在本地恢复分片，或者由于某些其他原因您希望将分片重定位到另一个主机或CDB，则可以在新主机上创建其副本。通过在GDSCTL命令ADD SHARD中指定-replace选项，可以使用新信息更新分片配置。</p>
                        <p>以下是使用ADD SHARD -REPLACE替换分片的一些情况。</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>运行分片数据库的服务器（机器）遭受了无法修复的损坏，必须进行更换</p>
                           </li>
                           <li>
                              <p>您必须将另一个（更强大的）服务器替换为工作服务器</p>
                           </li>
                           <li>
                              <p>PDB中的碎片从一个CDB重新定位到另一个CDB</p>
                           </li>
                        </ul>
                        <p>在所有这些情况下，执行ADD SHARD后，分片数和分片数据分布不会改变;分片被另一个包含相同数据的分片替换。这与在没有-replace选项时使用的ADD SHARD不同，当分片数量增加并且数据被重新分配时。</p>
                        <p>运行ADD SHARD -REPLACE后，旧的分片参数（如connect_string，db_unique_name等）将替换为其新值。新数据库可以具有与失败数据库不同的db_unique_name。在Data Guard配置中替换备用数据库时，新数据库的DBID必须与旧数据库的DBID匹配，因为Data Guard要求配置的所有成员具有相同的DBID。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-628FDBEA-9CE9-4C42-9693-3FF294E3B8B9__GUID-2A95E5C5-EF60-4BDD-9EB2-DA42085A137F">在使用替换之前</p>
                           <p>在使用ADD SHARD -REPLACE之前，请验证以下内容：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>您已正确还原数据库（例如，使用RMAN还原或其他方法）。新数据库分片必须具有与故障分片相同的分片元数据。执行基本验证以确保您不会意外地为错误的分片提供连接字符串。</p>
                              </li>
                              <li>
                                 <p>失败的分片必须在发生故障之前处于已部署状态。</p>
                              </li>
                              <li>
                                 <p>执行ADD SHARD -REPLACE命令时，失败的分片必须关闭。</p>
                              </li>
                              <li>
                                 <p>如果启用了快速启动故障切换（默认情况下是快速启动故障切换），则必须运行快速启动故障切换观察器。</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-628FDBEA-9CE9-4C42-9693-3FF294E3B8B9__GUID-671123F0-0926-4809-AA7C-4E8A9FE63073">替换Data Guard环境中的分片</p>
                           <p><code class="codeph">ADD SHARD -REPLACE</code>命令只能在主服务器仍处于活动状态时用于替换备用分片。为了替换失败的主分片，在尝试替换失败的分片之前，等待其中一个备用分区切换到主角色。
                           </p>
                           <p>如果无法进行切换（主站点和所有备用站点都已关闭），则必须为从主站点开始的每个成员运行ADD SHARD -REPLACE。这将从头开始创建新的代理配置。</p>
                           <p>在没有备用数据库的MAXPROTECTION模式下，主数据库关闭以维持保护模式。在这种情况下，如果备用数据库不活动，则无法打开主数据库。要在此方案中处理替换操作，必须首先使用DGMGRL（至MAXAVAILABILITY或MAXPERFORMANCE）通过以挂载模式启动数据库来降级Data Guard保护模式。设置保护模式后，打开主数据库并使用GDSCTL执行替换操作。更换操作完成后，您可以使用DGMGRL将保护模式恢复到上一级别。</p>
                           <p>在Data Guard配置中替换备用数据库时，新数据库的DBID必须与旧数据库的DBID匹配，因为Data Guard要求配置的所有成员具有相同的DBID。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-628FDBEA-9CE9-4C42-9693-3FF294E3B8B9__GUID-4E546FDF-4EF1-4706-8029-08B1D8851E5B">
                           <p class="titleinexample">示例10-1示例1：在配置中没有备用数据库的情况下替换主分片</p>
                           <p>初始配置部署了两个主分片，没有备用分区，如以下示例所示。shdc的可用性显示为破折号，因为它在灾难情况下已经下降。</p><pre class="pre codeblock"><code>$ gdsctl config shard名称分片组状态状态区可用性---- ----------- ------ ----- ------ ------- ----- shdb dbs1 Ok Deployed east ONLINE shdc dbs1 Ok Deployed east  -</code></pre><p>要进行恢复，可以使用RMAN从备份创建主服务器的副本。对于此示例，将使用db_unique_name shdd和connect string inst4创建新分片。现在，旧的分片shdc可以用新的分片shdd替换，如下所示：</p><pre class="pre codeblock"><code>$ gdsctl add shard -replace shdc -connect inst4 -pwd password DB唯一名称：SHDD</code></pre><p>您可以按如下方式验证配置：</p><pre class="pre codeblock"><code>$ gdsctl config shard名称分片组状态状态区可用性---- ----------- ------ ----- ------ ------- ----- shdb dbs1 Ok部署到东部ONLINE <span class="bold">shdd dbs1 Ok部署到东部ONLINE</span></code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-628FDBEA-9CE9-4C42-9693-3FF294E3B8B9__GUID-5C002E7F-0E33-417B-A06A-26564D868020">
                           <p class="titleinexample">例10-2示例2：替换备用分片</p>
                           <p>请注意，当配置包含备用分片时，您无法替换主分片。在这种情况下，如果主要设备发生故障，则必须在其中一个备用设备通过自动切换成为新的主设备后执行更换操作。</p>
                           <p>初始配置有两个分片组：一个主分区和一个备用分区，每个分区组包含两个分片，当备用分区shdd关闭时。</p><pre class="pre codeblock"><code>$ gdsctl config shard名称分片组状态状态区可用性---- ----------- ------ ----- ------ ------- ----- shdb dbs1 Ok部署东ONLINE shdc dbs1 Ok部署东ONLINE shdd dbs2 Ok部署东 -  shde dbs2 Ok部署东部只读</code></pre><p>创建一个新的备用。由于主服务器正在运行，因此应使用带有<code class="codeph">FOR STANDBY</code>选项的<code class="codeph">RMAN DUPLICATE</code>命令来完成此操作。一旦新的备用数据库shdf准备就绪，替换旧的分片shdd，如下所示：</p><pre class="pre codeblock"><code>$ gdsctl add shard -replace shdd -connect inst6 -pwd password DB唯一名称：shdf</code></pre><p>您可以按如下方式验证配置：</p><pre class="pre codeblock"><code>$ gdsctl config shard名称分片组状态状态区可用性---- ----------- ------ ----- ------ ------- ----- shdb dbs1 Ok部署东ONLINE shdc dbs1 Ok部署东ONLINE shde dbs2 Ok部署东READ ONLY shdf dbs2 Ok部署东东只读</code></pre></div>
                        <!-- class="example" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-628FDBEA-9CE9-4C42-9693-3FF294E3B8B9__GUID-2745163B-FFB5-4267-A815-6F9C67DDA5AE">在Oracle GoldenGate环境中替换分片</p>
                           <p>Oracle GoldenGate不支持GDSCTL命令选项ADD SHARD -REPLACE。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-628FDBEA-9CE9-4C42-9693-3FF294E3B8B9__GUID-11628A98-8DD7-4C63-9ED7-DCFD4DF4FCC8">常见错误</p>
                           <p>ORA-03770：为替换提供了错误的分片</p>
                           <p>为替换操作提供的分片不是原始分片的副本时，抛出此错误。具体而言，分片元数据与此分片的分片目录中存储的元数据不匹配。确保正确复制数据库，最好使用RMAN。请注意，这不是详尽的检查。假设您正确创建了副本。</p>
                           <p>ORA-03768：要替换的数据库仍在运行：shardc</p>
                           <p>运行<code class="codeph">add shard -replace</code>命令时，不得运行要替换的数据库。通过查看GDSCTL命令<code class="codeph">config shard</code>的输出来验证这一点。如果分片失败但仍在输出中显示ONLINE，请等待一段时间（约2分钟）并重试。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-628FDBEA-9CE9-4C42-9693-3FF294E3B8B9__GUID-130F8756-7676-4D77-91AA-0CD74A45E4B0">
                           <p class="notep1">也可以看看：</p>
                           <p>有关ADD SHARD命令的信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/shard&amp;id=GSMUG-GUID-8371BD52-60E3-45AC-A32F-938BD7B7B373" target="_blank"><span><cite>“Oracle数据库全局数据服务概念和管理指南”</cite></span></a> 。
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-4D5E555A-6B3F-4389-9705-6F6E7595F8CD" title="您可以使用GDSCTL命令行实用程序在Oracle Sharding部署中管理分片。">使用GDSCTL管理碎片</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-9F8CEDA8-42ED-4039-ADF7-608D0763E3A8" name="GUID-9F8CEDA8-42ED-4039-ADF7-608D0763E3A8"></a><h3 id="SHARD-GUID-9F8CEDA8-42ED-4039-ADF7-608D0763E3A8" class="sect3"><span class="enumeration_section">10.9</span>块管理</h3>
               <div>
                  <p>您可以使用Oracle Enterprise Manager Cloud Control和GDSCTL管理Oracle Sharding部署中的块。</p>
                  <p>以下主题描述了块管理概念和任务：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-623BEA35-8288-40B5-8D3B-B9F9B0FE5837">关于移动块</a><br>有时需要将一个块从一个碎片移动到另一个碎片。为了保持分片环境的可伸缩性，尝试在所有分片中保持负载和活动的平均分布非常重要。
                     </li>
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-253313C9-D7F3-47FF-AEE8-25E02AAE585F">移动块</a><br>您可以使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中将块从一个分片移动到另一个分片。
                     </li>
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-E76B23E8-B7DA-4EF6-8DBF-C44418A96B44">关于拆分块</a><br>当块变得太大或者只有一部分块必须迁移到另一个分片时，需要在分片数据库中拆分块。
                     </li>
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-145EACB4-5D10-4226-AE19-FC78EF2626A0">拆分大块</a><br>您可以使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中拆分块。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-1A3B887E-148D-4167-81B5-B0FA35746E4B" title="Oracle Sharding为分片数据库的管理提供了工具和一些自动化。">Sharded Database Administration</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-623BEA35-8288-40B5-8D3B-B9F9B0FE5837" name="GUID-623BEA35-8288-40B5-8D3B-B9F9B0FE5837"></a><h4 id="SHARD-GUID-623BEA35-8288-40B5-8D3B-B9F9B0FE5837" class="sect4"><span class="enumeration_section">10.9.1</span>关于移动块</h4>
                  <div>
                     <p>有时需要将一个块从一个碎片移动到另一个碎片。为了保持分片环境的可伸缩性，尝试在所有分片中保持负载和活动的平均分布非常重要。</p>
                     <p>随着环境在复合SDB中成熟，一些分片可能变得更活跃并且具有比其他分片更多的数据。为了在环境中保持平衡，您必须将块从更活跃的服务器移动到活动较少的服务器。移动块还有其他原因：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>当分片变得比其他分片更活跃时，您可以将块移动到不太活跃的分片，以帮助在环境中均匀地重新分配负载。</p>
                        </li>
                        <li>
                           <p>使用范围，列表或复合分片时，您正在将分片添加到分片组。</p>
                        </li>
                        <li>
                           <p>使用范围，列表或复合分片时，您从分片组中删除分片。</p>
                        </li>
                        <li>
                           <p>拆分块后，通常建议将生成的块中的一个移动到新的碎片。</p>
                        </li>
                     </ul>
                     <p>移动分片以保持可伸缩性时，块的理想目标是不活跃的分片，或者具有较小部分的数据。Oracle Enterprise Manager和AWR报告可以帮助您识别分片中活动的分布，并帮助识别适合大块移动的分片。</p>
                     <div class="infoboxnote" id="GUID-623BEA35-8288-40B5-8D3B-B9F9B0FE5837__GUID-94350070-5D05-452F-BD73-C76F9579F056">
                        <p class="notep1">注意：</p>
                        <p>每当一个块从一个碎片移动到另一个碎片时，您应该对操作中涉及的数据库进行完全备份（块移动的源和块移动的目标）。</p>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-623BEA35-8288-40B5-8D3B-B9F9B0FE5837__GUID-55C4BB8D-21A4-4BF4-9531-777CB6D48919">
                        <p class="notep1">也可以看看：</p>
                        <p>有关使用<code class="codeph">GDSCTL MOVE CHUNK</code>命令的信息，请<code class="codeph">GDSCTL MOVE CHUNK</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/shard&amp;id=GSMUG-GUID-79AC416D-E338-446A-AFB1-74137C63F974" target="_blank"><span><cite>“Oracle数据库全局数据服务概念和管理指南”</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-9F8CEDA8-42ED-4039-ADF7-608D0763E3A8" title="您可以使用Oracle Enterprise Manager Cloud Control和GDSCTL管理Oracle Sharding部署中的块。">块管理</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-253313C9-D7F3-47FF-AEE8-25E02AAE585F" name="GUID-253313C9-D7F3-47FF-AEE8-25E02AAE585F"></a><h4 id="SHARD-GUID-253313C9-D7F3-47FF-AEE8-25E02AAE585F" class="sect4"><span class="enumeration_section">10.9.2</span>移动块</h4>
                  <div>
                     <p>您可以使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中将块从一个分片移动到另一个分片。</p>
                     <ol>
                        <li class="stepexpand"><span>在shardspace管理页面中，打开位于Sharded Database目标页面左上角的<span class="uicontrol bold">Shardspace</span>菜单，然后选择<span class="uicontrol bold">Manage Shardgroups</span> 。</span></li>
                        <li class="stepexpand"><span>在列表中选择一个分片组，然后单击“ <span class="uicontrol bold">移动块”</span> 。</span></li>
                        <li class="stepexpand"><span>在“移动块”对话框中，选择要在其之间移动块的源和目标分片。</span></li>
                        <li class="stepexpand"><span>选择其中一个选项，选择要移动的块。</span><div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="uicontrol bold">输入ID列表</span> ：输入逗号分隔块ID号列表</p>
                                 </li>
                                 <li>
                                    <p><span class="uicontrol bold">从表中选择ID</span> ：单击<span class="uicontrol bold">表中</span>的块ID</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>指示何时应发生块移动。</span><div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="uicontrol bold">立即</span> ：确认后提供块移动</p>
                                 </li>
                                 <li>
                                    <p><span class="uicontrol bold">稍后</span> ：使用相邻字段中的日历工具安排块移动的时间</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击<span class="uicontrol bold">确定</span> 。</span></li>
                        <li class="stepexpand"><span>单击页面顶部“ <span class="uicontrol bold">信息”</span>框中的链接以查看块移动的配置状态。</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-9F8CEDA8-42ED-4039-ADF7-608D0763E3A8" title="您可以使用Oracle Enterprise Manager Cloud Control和GDSCTL管理Oracle Sharding部署中的块。">块管理</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-E76B23E8-B7DA-4EF6-8DBF-C44418A96B44" name="GUID-E76B23E8-B7DA-4EF6-8DBF-C44418A96B44"></a><h4 id="SHARD-GUID-E76B23E8-B7DA-4EF6-8DBF-C44418A96B44" class="sect4"><span class="enumeration_section">10.9.3</span>关于拆分块</h4>
                  <div>
                     <p>当块变得太大或者只有一部分块必须迁移到另一个分片时，需要在分片数据库中拆分块。</p>
                     <p>Oracle Sharding支持块的在线拆分。从理论上讲，每个分片都可以有一个块，并在每次需要数据迁移时将其拆分。但是，即使块拆分不会影响数据可用性，拆分也是一项耗时且占用大量CPU的操作，因为它会扫描正在拆分的分区的所有行，然后将它们逐个插入到新分区中。对于复合分片，这是耗时的，并且可能需要停机时间来重新定义分片键或超级分片键的新值。</p>
                     <p>因此，建议您在每个分片上预先创建多个块，并在分块数量不足以在重新分片期间平衡重新分配数据时分割它们，或者特定块已成为热点。</p>
                     <p>即使使用系统管理的分片，单个块也可能比其他块大，或者可能变得更加活跃。在这种情况下，拆分该块并允许自动重新分片将生成的块之一移动到另一个碎片，可以在整个环境中保持更均衡的数据和活动分布。</p>
                     <p>Oracle Enterprise Manager热图显示哪些块比其他块更活跃。使用此功能将有助于识别可以拆分哪些块，然后可以将其中一个生成的块移动到另一个碎片以帮助重新平衡环境。</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-E76B23E8-B7DA-4EF6-8DBF-C44418A96B44__GUID-7F0C7BC7-747E-4A7B-AB09-7F275452652D">
                        <p class="notep1">也可以看看：</p>
                        <p>有关使用<code class="codeph">GDSCTL SPLIT CHUNK</code>命令的信息，请<code class="codeph">GDSCTL SPLIT CHUNK</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/shard&amp;id=GSMUG-GUID-3FAB0646-22CD-444C-92EF-72B955C4C69E" target="_blank"><span><cite>“Oracle数据库全局数据服务概念和管理指南”</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-9F8CEDA8-42ED-4039-ADF7-608D0763E3A8" title="您可以使用Oracle Enterprise Manager Cloud Control和GDSCTL管理Oracle Sharding部署中的块。">块管理</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-145EACB4-5D10-4226-AE19-FC78EF2626A0" name="GUID-145EACB4-5D10-4226-AE19-FC78EF2626A0"></a><h4 id="SHARD-GUID-145EACB4-5D10-4226-AE19-FC78EF2626A0" class="sect4"><span class="enumeration_section">10.9.4</span>分裂块</h4>
                  <div>
                     <p>您可以使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中拆分块。</p>
                     <ol>
                        <li class="stepexpand"><span>打开位于Sharded Database目标页面左上角的<span class="uicontrol bold">Sharded Database</span>菜单，然后选择<span class="uicontrol bold">Shardspaces</span> 。</span></li>
                        <li class="stepexpand"><span>如果出现提示，请输入分片目录凭据，选择要在<span class="uicontrol bold">Shard Director凭据</span>下管理的分片导向器，选择分片导向器主机凭据，然后登录。</span></li>
                        <li class="stepexpand"><span>在列表中选择一个shardspace，然后单击<span class="uicontrol bold">Split Chunks</span> 。</span></li>
                        <li class="stepexpand"><span>通过选择其中一个选项来选择要拆分的块。</span><div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="uicontrol bold">输入ID列表</span> ：输入逗号单独的块ID号列表</p>
                                 </li>
                                 <li>
                                    <p><span class="uicontrol bold">从表中选择ID</span> ：单击<span class="uicontrol bold">表中</span>的块ID</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>指示何时应发生块拆分。</span><div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="uicontrol bold">立即</span> ：在确认后提供块分割</p>
                                 </li>
                                 <li>
                                    <p><span class="uicontrol bold">稍后</span> ：使用相邻字段中的日历工具安排块拆分的时间</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击<span class="uicontrol bold">确定</span> 。</span></li>
                        <li class="stepexpand"><span>单击页面顶部“ <span class="uicontrol bold">信息”</span>框中的链接以查看块拆分的配置状态。</span></li>
                     </ol>
                     <div class="section">成功拆分块后，在<span class="uicontrol bold">Shardspaces</span>列表中更新块的数量。您可能需要刷新页面才能看到更新。
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-9F8CEDA8-42ED-4039-ADF7-608D0763E3A8" title="您可以使用Oracle Enterprise Manager Cloud Control和GDSCTL管理Oracle Sharding部署中的块。">块管理</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-493D8985-89B3-4B96-B84B-F2BFF95A57D5" name="GUID-493D8985-89B3-4B96-B84B-F2BFF95A57D5"></a><h3 id="SHARD-GUID-493D8985-89B3-4B96-B84B-F2BFF95A57D5" class="sect3"><span class="enumeration_section">10.10</span> Shard董事管理</h3>
               <div>
                  <p>您可以使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中添加，编辑和删除分片导向器。</p>
                  <p>以下主题描述了分片导向器管理任务：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-A678EA35-344C-45CD-BAA5-D542022E69FC">创建Shard Director</a><br>使用Oracle Enterprise Manager Cloud Control为Oracle Sharding部署创建和添加分片导向器。
                     </li>
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-D7381484-75D6-426E-A14E-D3930A45E632">编辑Shard Director配置</a><br>使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中编辑分片导向器配置。
                     </li>
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-DDE156D7-77FD-45F4-A3C4-0EAA5630086F">删除Shard Director</a><br>使用Oracle Enterprise Manager Cloud Control从Oracle Sharding部署中删除分片导向器。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-1A3B887E-148D-4167-81B5-B0FA35746E4B" title="Oracle Sharding为分片数据库的管理提供了工具和一些自动化。">Sharded Database Administration</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-A678EA35-344C-45CD-BAA5-D542022E69FC" name="GUID-A678EA35-344C-45CD-BAA5-D542022E69FC"></a><h4 id="SHARD-GUID-A678EA35-344C-45CD-BAA5-D542022E69FC" class="sect4"><span class="enumeration_section">10.10.1</span>创建Shard Director</h4>
                  <div>
                     <p>使用Oracle Enterprise Manager Cloud Control为Oracle Sharding部署创建和添加分片导向器。</p>
                     <ol>
                        <li class="stepexpand"><span>打开位于Sharded Database目标页面左上角的<span class="uicontrol bold">Sharded Database</span>菜单，然后选择<span class="uicontrol bold">Shard Directors</span> 。</span></li>
                        <li class="stepexpand"><span>如果出现提示，请输入分片目录凭据，选择要在<span class="uicontrol bold">Shard Director凭据</span>下管理的分片导向器，选择分片导向器主机凭据，然后登录。</span></li>
                        <li class="stepexpand"><span>单击“ <span class="uicontrol bold">创建”</span> ，或从列表中选择一个分片导向器，然后单击“ <span class="uicontrol bold">创建类似”</span> 。</span><div>
                              <p>选择“ <span class="uicontrol bold">创建”</span>将打开“添加分片导向器”对话框，其中包含字段中的默认配置值。
                              </p>
                              <p>选择“ <span class="uicontrol bold">创建类似”</span>将打开“添加分片导向器”对话框，其中包含字段中所选分片导向器的配置值。您必须从列表中选择一个分片导向器以启用“ <span class="uicontrol bold">创建类似”</span>选项。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在Add Shard Director对话框中输入所需信息，然后单击<span class="uicontrol bold">OK</span> 。</span><div>
                              <div class="infoboxnote" id="GUID-A678EA35-344C-45CD-BAA5-D542022E69FC__GUID-E79E961A-731A-436E-91CB-0E12189E087F">
                                 <p class="notep1">注意：</p>
                                 <p>如果您不希望shard director在创建时立即开始运行，则必须取消选中<span class="uicontrol bold">Start Shard Director After Creation</span>复选框。
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在确认对话框中单击“ <span class="uicontrol bold">确定</span> ”。</span></li>
                        <li class="stepexpand"><span>单击页面顶部“ <span class="uicontrol bold">信息”</span>框中的链接以查看分片导向器的配置状态。</span></li>
                     </ol>
                     <div class="section">当成功创建碎片导演出现在<span class="uicontrol bold">碎片董事</span>名单。您可能需要刷新页面才能看到更新。
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-493D8985-89B3-4B96-B84B-F2BFF95A57D5" title="您可以使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中添加，编辑和删除分片导向器。">Shard Director Management</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-D7381484-75D6-426E-A14E-D3930A45E632" name="GUID-D7381484-75D6-426E-A14E-D3930A45E632"></a><h4 id="SHARD-GUID-D7381484-75D6-426E-A14E-D3930A45E632" class="sect4"><span class="enumeration_section">10.10.2</span>编辑Shard Director配置</h4>
                  <div>
                     <p>使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中编辑分片导向器配置。</p>
                     <div class="section">您可以在Cloud Control中更改分片导向器的区域，端口，本地端点和主机凭据。您无法编辑分片导向器名称，主机或Oracle主目录。</div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>打开位于Sharded Database目标页面左上角的<span class="uicontrol bold">Sharded Database</span>菜单，然后选择<span class="uicontrol bold">Shard Directors</span> 。</span></li>
                        <li class="stepexpand"><span>如果出现提示，请输入分片目录凭据，选择要在<span class="uicontrol bold">Shard Director凭据</span>下管理的分片导向器，选择分片导向器主机凭据，然后登录。</span></li>
                        <li class="stepexpand"><span>从列表中选择一个分片导向器，然后单击<span class="uicontrol bold">编辑</span> 。</span><div>
                              <p>请注意，您无法编辑分片导向器名称，主机或Oracle主目录。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>编辑字段，输入GSMCATUSER密码，然后单击“ <span class="uicontrol bold">确定”</span> 。</span></li>
                        <li class="stepexpand"><span>单击页面顶部“ <span class="uicontrol bold">信息”</span>框中的链接以查看分片导向器配置更改的设置状态。</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-493D8985-89B3-4B96-B84B-F2BFF95A57D5" title="您可以使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中添加，编辑和删除分片导向器。">Shard Director Management</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-DDE156D7-77FD-45F4-A3C4-0EAA5630086F" name="GUID-DDE156D7-77FD-45F4-A3C4-0EAA5630086F"></a><h4 id="SHARD-GUID-DDE156D7-77FD-45F4-A3C4-0EAA5630086F" class="sect4"><span class="enumeration_section">10.10.3</span>删除Shard Director</h4>
                  <div>
                     <p>使用Oracle Enterprise Manager Cloud Control从Oracle Sharding部署中删除分片导向器。</p>
                     <div class="p">
                        <p>如果你想删除的碎片导演是行政碎片主任，作为由查马克<span class="uicontrol bold">碎片董事</span>名单的该列指示，必须选择其他碎片总监删除之前是行政碎片主任。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>打开位于Sharded Database目标页面左上角的<span class="uicontrol bold">Sharded Database</span>菜单，然后选择<span class="uicontrol bold">Shard Directors</span> 。</span></li>
                        <li><span>如果出现提示，请输入分片目录凭据，选择要在<span class="uicontrol bold">Shard Director凭据</span>下管理的分片导向器，选择分片导向器主机凭据，然后登录。</span></li>
                        <li><span>从列表中选择一个分片导向器，然后单击“ <span class="uicontrol bold">删除”</span> 。</span></li>
                        <li><span>单击页面顶部“ <span class="uicontrol bold">信息”</span>框中的链接以查看分片导向器删除的配置状态。</span></li>
                     </ol>
                     <div class="section">成功删除分片导向器后，它不再出现在分片<span class="uicontrol bold">导演</span>列表中。您可能需要刷新页面才能看到更改。
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-493D8985-89B3-4B96-B84B-F2BFF95A57D5" title="您可以使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中添加，编辑和删除分片导向器。">Shard Director Management</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-90BD3394-3D65-4DDF-B8C8-662CD4E825C2" name="GUID-90BD3394-3D65-4DDF-B8C8-662CD4E825C2"></a><h3 id="SHARD-GUID-90BD3394-3D65-4DDF-B8C8-662CD4E825C2" class="sect3"><span class="enumeration_section">10.11</span>区域管理</h3>
               <div>
                  <p>您可以使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中添加，编辑和删除区域。</p>
                  <p>以下主题描述了区域管理任务：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-78074F56-69A9-43E1-938E-498BFA8D8D19">创建一个地区</a><br>使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中创建分片数据库区域。
                     </li>
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-BA2E8126-195A-46DE-B592-8298397530E6">编辑区域配置</a><br>使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中编辑分片数据库区域配置。
                     </li>
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-0216F896-7807-49C3-9384-6C27B678F161">删除区域</a><br>使用Oracle Enterprise Manager Cloud Control删除Oracle Sharding部署中的分片数据库区域。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-1A3B887E-148D-4167-81B5-B0FA35746E4B" title="Oracle Sharding为分片数据库的管理提供了工具和一些自动化。">Sharded Database Administration</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-78074F56-69A9-43E1-938E-498BFA8D8D19" name="GUID-78074F56-69A9-43E1-938E-498BFA8D8D19"></a><h4 id="SHARD-GUID-78074F56-69A9-43E1-938E-498BFA8D8D19" class="sect4"><span class="enumeration_section">10.11.1</span>创建区域</h4>
                  <div>
                     <p>使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中创建分片数据库区域。</p>
                     <ol>
                        <li><span>打开位于Sharded Database目标页面左上角的<span class="uicontrol bold">Sharded Database</span>菜单，然后选择<span class="uicontrol bold">Regions</span> 。</span></li>
                        <li><span>如果出现提示，请输入分片目录凭据，选择要在<span class="uicontrol bold">Shard Director凭据</span>下管理的分片导向器，选择分片导向器主机凭据，然后登录。</span></li>
                        <li><span>单击“ <span class="uicontrol bold">创建”</span></span></li>
                        <li><span>在“创建区域”对话框中输入区域的唯一名称。</span></li>
                        <li><span>可选地，从现有区域中选择伙伴区域。</span></li>
                        <li><span>单击<span class="uicontrol bold">确定</span> 。</span></li>
                        <li><span>单击页面顶部“ <span class="uicontrol bold">信息”</span>框中的链接以查看该区域的配置状态。</span></li>
                     </ol>
                     <div class="section">成功创建区域后，它将显示在“ <span class="uicontrol bold">区域”</span>列表中。您可能需要刷新页面才能看到更新。
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-90BD3394-3D65-4DDF-B8C8-662CD4E825C2" title="您可以使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中添加，编辑和删除区域。">区域管理</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-BA2E8126-195A-46DE-B592-8298397530E6" name="GUID-BA2E8126-195A-46DE-B592-8298397530E6"></a><h4 id="SHARD-GUID-BA2E8126-195A-46DE-B592-8298397530E6" class="sect4"><span class="enumeration_section">10.11.2</span>编辑区域配置</h4>
                  <div>
                     <p>使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中编辑分片数据库区域配置。</p>
                     <div class="section">您可以在Cloud Control中更改分片数据库区域的伙伴区域。您无法编辑区域名称。</div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>打开位于Sharded Database目标页面左上角的<span class="uicontrol bold">Sharded Database</span>菜单，然后选择<span class="uicontrol bold">Regions</span> 。</span></li>
                        <li><span>如果出现提示，请输入分片目录凭据，在<span class="uicontrol bold">Shard Director凭据</span>下选择分片导向器，选择分片导向器主机凭据，然后登录。</span></li>
                        <li><span>从列表中选择一个区域，然后单击“ <span class="uicontrol bold">编辑”</span> 。</span></li>
                        <li><span>选择或删除好友区域，然后单击“ <span class="uicontrol bold">确定”</span> 。</span></li>
                        <li><span>单击页面顶部“ <span class="uicontrol bold">信息”</span>框中的链接以查看区域配置更改的配置状态。</span></li>
                     </ol>
                     <div class="section">
                        <p>成功更新区域配置后，更改将显示在“ <span class="uicontrol bold">区域”</span>列表中。您可能需要刷新页面才能看到更新。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-90BD3394-3D65-4DDF-B8C8-662CD4E825C2" title="您可以使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中添加，编辑和删除区域。">区域管理</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-0216F896-7807-49C3-9384-6C27B678F161" name="GUID-0216F896-7807-49C3-9384-6C27B678F161"></a><h4 id="SHARD-GUID-0216F896-7807-49C3-9384-6C27B678F161" class="sect4"><span class="enumeration_section">10.11.3</span>删除区域</h4>
                  <div>
                     <p>使用Oracle Enterprise Manager Cloud Control删除Oracle Sharding部署中的分片数据库区域。</p>
                     <ol>
                        <li><span>打开位于Sharded Database目标页面左上角的<span class="uicontrol bold">Sharded Database</span>菜单，然后选择<span class="uicontrol bold">Regions</span> 。</span></li>
                        <li><span>如果出现提示，请输入分片目录凭据，在<span class="uicontrol bold">Shard Director凭据</span>下选择分片导向器，选择分片导向器主机凭据，然后登录。</span></li>
                        <li><span>从列表中选择一个区域，然后单击“ <span class="uicontrol bold">删除”</span> 。</span></li>
                        <li><span>单击页面顶部“ <span class="uicontrol bold">信息”</span>框中的链接以查看区域删除的配置状态。</span></li>
                     </ol>
                     <div class="section">
                        <p>成功删除区域配置后，更改将显示在“ <span class="uicontrol bold">区域”</span>列表中。您可能需要刷新页面才能看到更新。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-90BD3394-3D65-4DDF-B8C8-662CD4E825C2" title="您可以使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中添加，编辑和删除区域。">区域管理</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-F034CE27-6F6B-4C0D-ACE6-15FC14209D06" name="GUID-F034CE27-6F6B-4C0D-ACE6-15FC14209D06"></a><h3 id="SHARD-GUID-F034CE27-6F6B-4C0D-ACE6-15FC14209D06" class="sect3"><span class="enumeration_section">10.12</span> Shardspace管理</h3>
               <div>
                  <p>您可以使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中添加，编辑和删除分片空间。</p>
                  <p>以下主题描述了分片空间管理任务：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-51DD2C36-6578-4474-B775-BA8850A345FD">创建一个Shardspace</a><br>使用Oracle Enterprise Manager Cloud Control在复合Oracle Sharding部署中创建分片空间。
                     </li>
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-117CB323-68C1-4180-9F93-4A01D31BA3AF">将Shardspace添加到复合分片数据库</a><br>学习创建新的分片空间，将分片添加到分片空间，在新的分片空间中创建表空间集，并将分区集添加到分片表中以添加分片空间。然后验证表中的分区是否在相应表空间中新添加的分片中创建。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-1A3B887E-148D-4167-81B5-B0FA35746E4B" title="Oracle Sharding为分片数据库的管理提供了工具和一些自动化。">Sharded Database Administration</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-51DD2C36-6578-4474-B775-BA8850A345FD" name="GUID-51DD2C36-6578-4474-B775-BA8850A345FD"></a><h4 id="SHARD-GUID-51DD2C36-6578-4474-B775-BA8850A345FD" class="sect4"><span class="enumeration_section">10.12.1</span>创建Shardspace</h4>
                  <div>
                     <p>使用Oracle Enterprise Manager Cloud Control在复合Oracle Sharding部署中创建分片空间。</p>
                     <div class="section">只有使用复合方法分片的数据库才能有多个分片空间。系统管理的分片数据库只能有一个分片空间。</div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>打开位于Sharded Database目标页面左上角的<span class="uicontrol bold">Sharded Database</span>菜单，然后选择<span class="uicontrol bold">Shardspaces</span> 。</span></li>
                        <li class="stepexpand"><span>如果出现提示，请输入分片目录凭据，选择要在<span class="uicontrol bold">Shard Director凭据</span>下管理的分片导向器，选择分片导向器主机凭据，然后登录。</span></li>
                        <li class="stepexpand"><span>单击“ <span class="uicontrol bold">创建”</span></span><div>
                              <div class="infoboxnote" id="GUID-51DD2C36-6578-4474-B775-BA8850A345FD__GUID-0AA6E056-6225-47A6-AAAC-DF0EA653909C">
                                 <p class="notep1">注意：</p>对于系统管理的分片数据库，在Shardspaces页面中禁用此选项。
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在“添加Shardspace”对话框的字段中输入值，然后单击“ <span class="uicontrol bold">确定”</span> 。</span><div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="uicontrol bold">名称</span> ：输入分片空间的唯一名称（必填）</p>
                                 </li>
                                 <li>
                                    <p><span class="uicontrol bold">块</span> ：输入应在分片空间中创建的块数（默认为120）</p>
                                 </li>
                                 <li>
                                    <p><span class="uicontrol bold">保护模式</span> ：选择Data Guard保护模式（默认最高性能）</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击页面顶部“ <span class="uicontrol bold">信息”</span>框中的链接以查看分片空间的配置状态。</span></li>
                     </ol>
                     <div class="section">成功创建分片空间后，它将显示在<span class="uicontrol bold">Shardspaces</span>列表中。您可能需要刷新页面才能看到更新。
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-F034CE27-6F6B-4C0D-ACE6-15FC14209D06" title="您可以使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中添加，编辑和删除分片空间。">Shardspace管理</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-117CB323-68C1-4180-9F93-4A01D31BA3AF" name="GUID-117CB323-68C1-4180-9F93-4A01D31BA3AF"></a><h4 id="SHARD-GUID-117CB323-68C1-4180-9F93-4A01D31BA3AF" class="sect4"><span class="enumeration_section">10.12.2</span>将Shardspace添加到复合分片数据库</h4>
                  <div>
                     <p>学习创建新的分片空间，将分片添加到分片空间，在新的分片空间中创建表空间集，并将分区集添加到分片表中以添加分片空间。然后验证表中的分区是否在相应表空间中新添加的分片中创建。</p>
                     <div class="p">要向现有分片数据库添加新的分片空间，请确保部署了复合分片数据库，并将所有DDL传播到分片。</div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>创建新的分片空间，将分片添加到分片空间，以及部署环境。</span><ol type="a">
                              <li class="substepexpand"><span>连接到分片目录数据库。</span><div><pre class="pre codeblock"><code>GDSCTL&gt;连接mysdbadmin / mysdbadmin_password</code></pre></div>
                              </li>
                              <li class="substepexpand"><span>添加分片空间并将分片组添加到分片空间。</span><div><pre class="pre codeblock"><code>GDSCTL&gt;添加shardspace -chunks 8 -shardspace cust_asia GDSCTL&gt; add shardgroup -shardspace cust_asia -shardgroup asia_shgrp1 -deploy_as primary -region region3</code></pre></div>
                              </li>
                              <li class="substepexpand"><span>添加碎片</span><div><pre class="pre codeblock"><code>GDSCTL&gt;添加shard -shardgroup asia_shgrp1 -connect shard_host：TNS_listener_port / shard_database_name -pwd GSMUSER_password GDSCTL&gt; add shard asia_shgrp1 -connect shard_host：TNS_listener_port / shard_database_name -pwd GSMUSER_password</code></pre></div>
                              </li>
                              <li class="substepexpand"><span>部署环境。</span><div><pre class="pre codeblock"><code>GDSCTL&gt;部署</code></pre></div>
                              </li>
                           </ol>
                           <div>运行<code class="codeph">DEPLOY</code>可确保在新分片上重播所有以前的DDL，并创建所有表。分区在默认的SYS_SHARD_TS表空间中创建。
                           </div>
                        </li>
                        <li class="stepexpand"><span>在分片目录上，为分片空间创建表空间集，并将分区集添加到分片根表。</span><ol type="a">
                              <li class="substepexpand"><span>创建表空间集。</span><div><pre class="pre codeblock"><code>SQL&gt; CREATE TABLESPACE使用模板在分区空间cust_asia中设置TSP_SET_3（数据文件大小100m自动扩展，在下一个10M maxsize无限范围管理本地段空间管理自动）;</code></pre></div>
                              </li>
                              <li class="substepexpand"><span>添加分区集。</span><div><pre class="pre codeblock"><code>SQL&gt; ALTER表客户添加PARTITIONSET asia VALUES（'ASIA''）TABLESPACE SET TSP_SET_3;</code></pre></div>
                              </li>
                              <li class="substepexpand"><span>当存在lobs时，为lobs创建表空间集，并在add partitionset命令中提及lob存储信息。</span><div><pre class="pre codeblock"><code>SQL&gt; alter table customers添加partitionset asia VALUES（'ASIA'）表空间设置TSP_SET_3 lob（docn）store as（tablespace set LOBTSP_SET_4））;</code></pre></div>
                              </li>
                              <li class="substepexpand"><span>当根表包含子分区时，使用store as子句指定为子分区设置的表空间。</span><div><pre class="pre codeblock"><code>SQL&gt; alter table customers添加partitionset asia VALUES（'ASIA'）表空间集TSP_SET_3子分区存储在（SUB_TSP_SET_1，SUB_TSP_SET_2）;</code></pre></div>
                              </li>
                           </ol>
                           <div><code class="codeph">ADD PARTITIONSET</code>命令确保将子表移动到适当的表空间。
                           </div>
                        </li>
                        <li class="stepexpand"><span>验证新分片空间中的分区是否已移动到新的表空间。</span><div>
                              <p>连接到新分片并验证是否在新表空间集中创建了分区。</p><pre class="pre codeblock"><code>SQL&gt;从dba_tab_partitions中选择table_name，partition_name，tablespace_name，read_only;</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-F034CE27-6F6B-4C0D-ACE6-15FC14209D06" title="您可以使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中添加，编辑和删除分片空间。">Shardspace管理</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-C9885B8A-1588-4EA1-AB51-24628A42002E" name="GUID-C9885B8A-1588-4EA1-AB51-24628A42002E"></a><h3 id="SHARD-GUID-C9885B8A-1588-4EA1-AB51-24628A42002E" class="sect3"><span class="enumeration_section">10.13</span> Shardgroup Management</h3>
               <div>
                  <p>您可以使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中添加，编辑和删除分片组。</p>
                  <p>以下主题描述了分片组管理任务：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-10DC71A4-AD54-4C1E-9F37-808037225C99">创建一个Shardgroup</a><br>使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中创建分片组。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-1A3B887E-148D-4167-81B5-B0FA35746E4B" title="Oracle Sharding为分片数据库的管理提供了工具和一些自动化。">Sharded Database Administration</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-10DC71A4-AD54-4C1E-9F37-808037225C99" name="GUID-10DC71A4-AD54-4C1E-9F37-808037225C99"></a><h4 id="SHARD-GUID-10DC71A4-AD54-4C1E-9F37-808037225C99" class="sect4"><span class="enumeration_section">10.13.1</span>创建Shardgroup</h4>
                  <div>
                     <p>使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中创建分片组。</p>
                     <ol>
                        <li class="stepexpand"><span>选择要添加分片组的分片空间。</span></li>
                        <li class="stepexpand"><span>打开位于shardspace目标页面左上角的<span class="uicontrol bold">Shardspace</span>菜单，然后选择<span class="uicontrol bold">Manage Shardgroups</span> 。</span></li>
                        <li class="stepexpand"><span>单击“ <span class="uicontrol bold">创建”</span></span></li>
                        <li class="stepexpand"><span>在“创建分片组”对话框中输入值，然后单击“ <span class="uicontrol bold">确定”</span> 。</span></li>
                        <li class="stepexpand"><span>单击页面顶部“ <span class="uicontrol bold">信息”</span>框中的链接以查看分片组的配置状态。</span><div>
                              <p>例如，使用上面屏幕截图中输入的值，运行以下命令：</p><pre class="pre codeblock"><code>GDSCTL命令：添加SHARDGROUP -SHARDGROUP'north'-SHARDSPACE'shardspaceora'-REGION'north'-DEPLOY_AS'STANDBY'</code></pre></div>
                        </li>
                     </ol>
                     <div class="section">成功创建分片组后，它将显示在“ <span class="uicontrol bold">管理分片组”</span>列表中。您可能需要刷新页面才能看到更新。
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-C9885B8A-1588-4EA1-AB51-24628A42002E" title="您可以使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中添加，编辑和删除分片组。">Shardgroup Management</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-84C8DF7F-0136-4FA5-85C9-AEDB9403E972" name="GUID-84C8DF7F-0136-4FA5-85C9-AEDB9403E972"></a><h3 id="SHARD-GUID-84C8DF7F-0136-4FA5-85C9-AEDB9403E972" class="sect3"><span class="enumeration_section">10.14</span>服务管理</h3>
               <div>
                  <p>您可以使用Oracle Enterprise Manager Cloud Control管理Oracle Sharding部署中的服务。</p>
                  <p>要管理Oracle Sharding服务，请打开Sharded Database目标页面左上角的<span class="bold">Sharded Database</span>菜单，然后选择<span class="bold">Services</span> 。在“服务”页面上，使用服务列表顶部的控件，可以启动，停止，启用，禁用，创建，编辑和删除服务。
                  </p>
                  <p>选择服务将打开服务详细信息列表，其中显示正在运行服务的主机和分片，以及每个实例的状态，状态和Data Guard角色。通过在此列表中选择分片，您可以在各个分片上启用，禁用，启动和停止服务。</p>
                  <p>以下主题描述了服务管理任务：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sharding-lifecycle-management.html#GUID-C13C94A5-064E-41D9-ACFB-52F703056DD2">创建服务</a><br>使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中创建服务。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-1A3B887E-148D-4167-81B5-B0FA35746E4B" title="Oracle Sharding为分片数据库的管理提供了工具和一些自动化。">Sharded Database Administration</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-C13C94A5-064E-41D9-ACFB-52F703056DD2" name="GUID-C13C94A5-064E-41D9-ACFB-52F703056DD2"></a><h4 id="SHARD-GUID-C13C94A5-064E-41D9-ACFB-52F703056DD2" class="sect4"><span class="enumeration_section">10.14.1</span>创建服务</h4>
                  <div>
                     <p>使用Oracle Enterprise Manager Cloud Control在Oracle Sharding部署中创建服务。</p>
                     <ol>
                        <li class="stepexpand"><span>打开位于Sharded Database目标页面左上角的<span class="uicontrol bold">Sharded Database</span>菜单，然后选择<span class="uicontrol bold">Services</span> 。</span></li>
                        <li class="stepexpand"><span>如果出现提示，请输入分片目录凭据，选择要在<span class="uicontrol bold">Shard Director凭据</span>下管理的分片导向器，选择分片导向器主机凭据，然后登录。</span></li>
                        <li class="stepexpand"><span>单击“ <span class="uicontrol bold">创建”</span> ，或从列表中选择一项服务，然后单击“ <span class="uicontrol bold">创建类似”</span> 。</span><div>
                              <p>选择“ <span class="uicontrol bold">创建”</span>将在字段中使用默认配置值打开“创建服务”对话框。
                              </p>
                              <p>选择“ <span class="uicontrol bold">创建类似”</span>将打开“创建类似服务”对话框，其中包含字段中所选服务的配置值。您必须从列表中选择一项服务才能启用“ <span class="uicontrol bold">创建类似”</span>选项。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在对话框中输入所需信息，然后单击“ <span class="uicontrol bold">确定”</span> 。</span><div>
                              <div class="infoboxnote" id="GUID-C13C94A5-064E-41D9-ACFB-52F703056DD2__GUID-E79E961A-731A-436E-91CB-0E12189E087F">
                                 <p class="notep1">注意：</p>
                                 <p>如果您不希望服务在创建时立即开始运行，则必须取消选中“ <span class="uicontrol bold">创建后所有分片上</span>的<span class="uicontrol bold">启动服务”</span>复选框。
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击页面顶部“ <span class="uicontrol bold">信息”</span>框中的链接以查看服务的配置状态。</span></li>
                     </ol>
                     <div class="section">成功创建服务后，它将显示在“ <span class="uicontrol bold">服务”</span>列表中。您可能需要刷新页面才能看到更新。
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-lifecycle-management.html#GUID-84C8DF7F-0136-4FA5-85C9-AEDB9403E972" title="您可以使用Oracle Enterprise Manager Cloud Control管理Oracle Sharding部署中的服务。">服务管理</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
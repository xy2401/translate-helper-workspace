<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Once you have captured a SQL workload that you want to analyze into a SQL tuning set (STS), you can run SQL Performance Analyzer to analyze the effects of a system change on SQL performance."></meta>
      <meta name="description" content="Once you have captured a SQL workload that you want to analyze into a SQL tuning set (STS), you can run SQL Performance Analyzer to analyze the effects of a system change on SQL performance."></meta>
      <title>创建分析任务</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Testing Guide "></meta>
      <meta property="og:description" content="Once you have captured a SQL workload that you want to analyze into a SQL tuning set (STS), you can run SQL Performance Analyzer to analyze the effects of a system change on SQL performance."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Testing Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="testing-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-07T01:43:11-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2008, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96279-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="introduction-to-sql-performance-analyzer.html" title="Previous" type="text/html"></link>
      <link rel="next" href="creating-a-pre-change-sql-trial.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Testing Guide"></meta>
    <meta name="dcterms.isVersionOf" content="RATUG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="introduction-to-sql-performance-analyzer.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="creating-a-pre-change-sql-trial.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">测试指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="sql-performance-analyzer.html" property="item" typeof="WebPage"><span property="name">SQL性能分析器</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">创建分析任务</li>
            </ol>
            <a id="GUID-41CB8DDE-01C8-42BF-AD16-3494D4648A63" name="GUID-41CB8DDE-01C8-42BF-AD16-3494D4648A63"></a><a id="RATUG175"></a>
            
            <h2 id="RATUG-GUID-41CB8DDE-01C8-42BF-AD16-3494D4648A63" class="sect2"><span class="enumeration_chapter">3</span>创建分析任务</h2>
         </header>
         <div class="ind">
            <div>
               <div><span>一旦捕获了要分析到SQL调优集（STS）的SQL工作负载，就可以运行SQL Performance Analyzer来分析系统更改对SQL性能的影响。</span> 要运行SQL Performance Analyzer，必须首先创建SQL Performance Analyzer任务。任务是一个容器，它封装有关完整SQL Performance Analyzer分析的所有数据。SQL性能分析器分析包含至少两个SQL试验和比较。SQL试用版捕获特定环境条件下SQL调优集的执行性能，可以使用SQL Performance Analyzer通过以下方法之一自动生成：</div>
               <ul style="list-style-type:disc">
                  <li>
                     <p>测试执行SQL语句</p>
                  </li>
                  <li>
                     <p>生成SQL语句的执行计划</p>
                  </li>
                  <li>
                     <p>引用SQL调优集中捕获的执行统计信息和计划</p>
                  </li>
               </ul>
               <p>创建SQL Performance Analyzer任务时，您需要选择一个<a id="d4474e96" class="indexterm-anchor"></a> SQL调优设置为其输入源。SQL调优集将用作测试执行的源或生成SQL试验的执行计划。因此，试验之间的性能差异是由环境差异引起的。
               </p>
               <p>本章介绍如何创建SQL Performance Analyzer任务，并包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="creating-an-analysis-task.html#GUID-F7F7C88D-7692-414B-97F5-FB57D9E8219C" title="Oracle Enterprise Manager中有几个工作流可用于创建SQL Performance Analyzer任务。">使用Enterprise Manager创建分析任务</a></p>
                  </li>
                  <li>
                     <p><a href="creating-an-analysis-task.html#GUID-A00000CF-F2DA-4138-BBFB-6FA03D889EBA" title="本节介绍如何使用DBMS_SQLPA.CREATE_ANALYSIS_TASK函数创建SQL Performance Analyzer任务。任务是SQL Performance Analyzer执行输入和结果的数据库容器。">使用API创建分析任务</a></p>
                  </li>
                  <li>
                     <p><a href="creating-an-analysis-task.html#GUID-F8BBF7BE-382C-4EF8-B074-F39A74D011DC" title="本节介绍如何在创建SQL Performance Analyzer任务后配置它。">使用API配置分析任务</a></p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-41CB8DDE-01C8-42BF-AD16-3494D4648A63__GUID-8FC05C30-C593-4426-B753-B137D31DF359">
                  <p class="notep1">注意：</p>
                  <p>运行SQL Performance Analyzer的主要接口是Oracle Enterprise Manager。如果由于某种原因Oracle Enterprise Manager不可用，您可以使用<code class="codeph">DBMS_SQLPA</code> PL / SQL包运行SQL Performance Analyzer。
                  </p>
               </div>
               <div class="infoboxnotealso" id="GUID-41CB8DDE-01C8-42BF-AD16-3494D4648A63__GUID-5E623767-14CE-4620-9838-7B5560610763">
                  <p class="notep1">也可以看看：</p>
                  <p><span class="q">“ <a href="introduction-to-sql-performance-analyzer.html#GUID-9EF13018-5EDB-4B60-85F8-187DF25EECFF" title="捕获SQL工作负载并将其传输到测试系统并正确配置初始数据库环境后，可以运行SQL Performance Analyzer来分析系统更改对SQL性能的影响。">创建SQL性能分析器任务</a> ”</span></p>
               </div>
            </div><a id="RATUG315"></a><a id="RATUG176"></a><div class="props_rev_3"><a id="GUID-F7F7C88D-7692-414B-97F5-FB57D9E8219C" name="GUID-F7F7C88D-7692-414B-97F5-FB57D9E8219C"></a><h3 id="RATUG-GUID-F7F7C88D-7692-414B-97F5-FB57D9E8219C" class="sect3"><span class="enumeration_section">3.1</span>使用Enterprise Manager创建分析任务</h3>
               <div>
                  <p>Oracle Enterprise Manager中有几个工作流可用于创建SQL Performance Analyzer任务。</p>
                  <div class="p">在运行SQL Performance Analyzer之前，将要在性能分析中使用的SQL工作负载捕获到生产系统上的SQL调优集中，然后将其传输到将执行性能分析的测试系统，如<span class="q">“ <a href="introduction-to-sql-performance-analyzer.html#GUID-3828F92F-62BC-4A5E-8303-9720DCCB64B4" title="Before running SQL Performance Analyzer, capture a set of SQL statements on the production system that represents the SQL workload which you intend to analyze.">捕获SQL工作负载</a> ”中<a href="introduction-to-sql-performance-analyzer.html#GUID-3828F92F-62BC-4A5E-8303-9720DCCB64B4" title="在运行SQL Performance Analyzer之前，在生产系统上捕获一组SQL语句，这些语句表示您要分析的SQL工作负载。">所述</a> “</span> 。
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F7F7C88D-7692-414B-97F5-FB57D9E8219C__GUID-2E0D87E0-C9C5-4806-89A1-D5A817AF6948">使用Enterprise Manager创建分析任务：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>从<span class="bold">Performance</span>菜单中，选择<span class="bold">SQL</span> ，然后选择<span class="bold">SQL Performance Analyzer</span> 。</span><div>
                           <p>如果出现“数据库登录”页面，则以具有管理员权限的用户身份登录。</p>
                           <p>将出现SQL Performance Analyzer主页。</p>
                           <div class="figure" id="GUID-F7F7C88D-7692-414B-97F5-FB57D9E8219C__GUID-92AFFF7A-D898-48FA-9B9D-ACC6402EE59F"><img src="img/spa.gif" width="450" alt="spa.gif的描述如下" title="spa.gif的描述如下" longdesc="img_text/spa.html"><br><a href="img_text/spa.html">插图描述spa.gif</a></div>
                           <!-- class="figure" -->
                        </div>
                     </li>
                     <li class="stepexpand"><span>在SQL Performance Analyzer工作流下，选择用于创建所需类型的分析任务的工作流：</span><div>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>从9 <span class="italic">i</span>或10.1升级</p>
                                 <p>使用9 <span class="italic">i</span>或10.1工作流程升级来测试从Oracle9 <span class="italic">i</span>数据库或Oracle数据库<span class="italic">10g</span>第1版到Oracle数据库<span class="italic">10g</span>第2版及更新版本的<span class="q"><a href="testing-a-database-upgrade.html#GUID-54F449B7-987E-496E-AD15-97F0B6A70C66" title="SQL Performance Analyzer supports testing database upgrades of Oracle9i Database and Oracle Database 10g Release 1 to Oracle Database 11g Release 2 or higher releases.">数据库升级</a></span> ，如<span class="q">“ <a href="testing-a-database-upgrade.html#GUID-54F449B7-987E-496E-AD15-97F0B6A70C66" title="SQL Performance Analyzer支持测试Oracle9i数据库和Oracle数据库10g第1版到Oracle Database 11g第2版或更高版本的数据库升级。">从Oracle9i数据库和Oracle数据库10g第1版升级</a> ”中</span>所述<span class="q">“</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>从10.2或11 <span class="italic">克</span>升级</p>
                                 <p>使用10.2或11 <span class="italic">g</span>工作流的升级来测试从Oracle Database <span class="italic">10g</span>第2版或Oracle Database 11 <span class="italic">g</span>到更高版本的<span class="q"><a href="testing-a-database-upgrade.html#GUID-AD6C3094-99C3-4F3D-A387-C7C70ACC43C4" title="You can use SQL Performance Analyzer to test the impact on SQL response time of a database upgrade from Oracle Database 10g Release 2 or a newer release to any later release by capturing a SQL tuning set on the production system, then executing it twice remotely over a database link on a test system—first to create a pre-change SQL trial, then again to create a post-change SQL trial.">数据库升级</a></span> ，如<span class="q">“ <a href="testing-a-database-upgrade.html#GUID-AD6C3094-99C3-4F3D-A387-C7C70ACC43C4" title="您可以使用SQL性能分析器通过捕获生产系统上的SQL调整集，然后通过a远程执行两次来测试从Oracle数据库10g第2版或更新版本到任何更高版本的数据库升级对SQL响应时间的影响。测试系统上的数据库链接 - 首先创建一个更改前的SQL试用版，然后再创建一个更改后的SQL试用版。">从Oracle Database 10g第2版和更新版本升级</a> ”中所述</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>参数变化</p>
                                 <p>使用参数更改工作流来确定数据库初始化参数更改将如何影响SQL性能，如<span class="q">“ <a href="creating-an-analysis-task.html#GUID-55DB02F0-E3F7-45C4-BDB0-EB6EDF4091DD" title="通过参数更改工作流，您可以在更改单个环境初始化参数的值时测试SQL工作负载的性能影响。">使用参数更改工作流</a> ”中所述</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>优化器统计</p>
                                 <p>使用优化程序统计工作流来分析对优化程序统计信息的更改将如何影响SQL性能，如<span class="q">“ <a href="creating-an-analysis-task.html#GUID-F28593A6-6688-4574-ACEB-DB2550813965" title="优化程序统计工作流使您可以分析优化程序统计信息更改对SQL工作负载性能的影响。">使用优化程序统计信息工作流程</a> ”中所述</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>Exadata仿真</p>
                                 <p>使用Exadata仿真工作流来模拟使用Oracle Exadata如何影响SQL性能，如<span class="q">“ <a href="creating-an-analysis-task.html#GUID-58FA5887-382C-4FA8-9947-C8B77F6D0EE3" title="通过Exadata仿真工作流，您可以模拟Exadata存储服务器安装对SQL工作负载性能的影响。">使用Exadata Simulation工作流程</a> ”中所述</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>引导工作流程</p>
                                 <p>使用指导工作流来比较所有其他类型系统更改的SQL性能，如<span class="q">“ <a href="creating-an-analysis-task.html#GUID-F9D4E8D3-0581-4CF4-ADEC-20720E51E20D" title="通过引导式工作流，您可以测试任何类型的系统更改对SQL工作负载的性能影响。">使用引导式工作流</a> ”中所述</span> 。
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </li>
                  </ol>
               </div><a id="RATUG274"></a><a id="RATUG177"></a><div class="props_rev_3"><a id="GUID-55DB02F0-E3F7-45C4-BDB0-EB6EDF4091DD" name="GUID-55DB02F0-E3F7-45C4-BDB0-EB6EDF4091DD"></a><h4 id="RATUG-GUID-55DB02F0-E3F7-45C4-BDB0-EB6EDF4091DD" class="sect4"><span class="enumeration_section">3.1.1</span>使用参数更改工作流程</h4>
                  <div>
                     <div><span>通过参数更改工作流，您可以在更改单个环境初始化参数的值时测试SQL工作负载的性能影响。</span> 例如，您可以通过将<code class="codeph">OPTIMIZER_FEATURES_ENABLE</code>初始化参数设置为10.2.0.4和12.1.0.1来比较SQL性能。
                     </div>
                     <div class="section">
                        <p>选择SQL调优集和比较指标后，SQL Performance Analyzer将创建一个任务并执行试验，并将初始化参数设置为原始值。然后，SQL Performance Analyzer通过发出<code class="codeph">ALTER SESSION</code>语句执行第二次试验，并将参数设置为更改的值。因此，变更的影响包含在测试会话的本地。在系统生成的SQL Performance Analyzer报告中报告任何性能的回归或变化。
                        </p>
                        <div class="infoboxnote" id="GUID-55DB02F0-E3F7-45C4-BDB0-EB6EDF4091DD__GUID-B4D4F476-34A0-4FA9-89E4-25A35499D643">
                           <p class="notep1">注意：</p>
                           <p>要为其他类型的系统更改创建分析任务，请改用指导工作流程，如<span class="q">“ <a href="creating-an-analysis-task.html#GUID-F9D4E8D3-0581-4CF4-ADEC-20720E51E20D" title="通过引导式工作流，您可以测试任何类型的系统更改对SQL工作负载的性能影响。">使用引导式工作流程</a> ”中所述</span> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-55DB02F0-E3F7-45C4-BDB0-EB6EDF4091DD__GUID-D1D3D1C7-B801-428E-9C2C-38E233F45660">要使用SQL Performance Analyzer参数更改工作流程：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>在SQL Performance Analyzer主页上的“SQL Performance Analyzer工作流”下，单击“ <span class="bold">参数更改”</span> 。
                              </p>
                              <p>将出现“参数更改”页面。</p>
                              <div class="figure" id="GUID-55DB02F0-E3F7-45C4-BDB0-EB6EDF4091DD__GUID-56047581-14CD-439E-A496-452A9E7CAD67"><img src="img/spa_param_change.gif" width="285" alt="下面是spa_param_change.gif的描述" title="下面是spa_param_change.gif的描述" longdesc="img_text/spa_param_change.html"><br><a href="img_text/spa_param_change.html">插图描述spa_param_change.gif</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>在“任务名称”字段中，输入任务的名称。</p>
                           </li>
                           <li>
                              <p>在“SQL调整集”字段中，输入包含要分析的SQL工作负载的SQL调优集的名称。</p>
                              <p>或者，单击搜索图标以使用“搜索并选择：SQL调整集”窗口搜索SQL调整集。</p>
                              <p>选定的SQL调优集现在出现在SQL调整集字段中。</p>
                           </li>
                           <li>
                              <p>在“描述”字段中，可以选择输入任务的描述。</p>
                           </li>
                           <li id="GUID-55DB02F0-E3F7-45C4-BDB0-EB6EDF4091DD__CACBGAAI">
                              <p>在“创建方法”列表中，通过执行以下操作之一来确定如何创建SQL试用版以及生成哪些内容：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>选择<span class="bold">执行SQL</span> 。
                                    </p>
                                    <p>SQL试验通过实际运行SQL语句为SQL调优集中的每个SQL语句生成执行计划和统计信息。</p>
                                 </li>
                                 <li>
                                    <p>选择<span class="bold">生成计划</span> 。</p>
                                    <p>SQL试用版仅调用优化器来创建执行计划，而不实际运行SQL语句。</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>在“每SQL时间限制”列表中，通过执行以下操作之一来确定试用期间SQL执行的时间限制：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>选择<span class="bold">5分钟</span> 。
                                    </p>
                                    <p>执行将在SQL调优设置中运行每个SQL语句最多5分钟并收集性能数据。</p>
                                 </li>
                                 <li>
                                    <p>选择<span class="bold">无限制</span> 。
                                    </p>
                                    <p>执行将运行SQL调优集中的每个SQL语句以完成并收集性能数据。收集执行统计信息可以提高性能分析的准确性，但需要更长的时间。建议不要使用此设置，因为任务可能会被一个SQL语句在较长时间内停止。</p>
                                 </li>
                                 <li>
                                    <p>选择“ <span class="bold">自定义”</span>并输入指定的秒数，分钟数或小时数。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>在“参数更改”部分中，完成以下步骤：</p>
                              <ol type="a">
                                 <li>
                                    <p>在“参数名称”字段中，输入要修改其值的初始化参数的名称，或单击“搜索”图标以使用“搜索并选择：初始化参数”窗口选择初始化参数。</p>
                                 </li>
                                 <li>
                                    <p>在“基值”字段中，输入初始化参数的当前值。</p>
                                 </li>
                                 <li>
                                    <p>在“更改的值”字段中，输入初始化参数的新值。</p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>在“比较度量标准”列表中，选择要用于分析的比较度量标准：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>如果您在步骤<a href="creating-an-analysis-task.html#GUID-55DB02F0-E3F7-45C4-BDB0-EB6EDF4091DD__CACBGAAI">5中</a>选择了<span class="bold">生成计划</span> ，则选择<span class="bold">优化程序成本</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>如果在步骤<a href="creating-an-analysis-task.html#GUID-55DB02F0-E3F7-45C4-BDB0-EB6EDF4091DD__CACBGAAI">5中</a>选择了“ <span class="bold">执行SQL”</span> ，则选择以下选项之一：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><span class="bold">经过的时间</span></p>
                                       </li>
                                       <li>
                                          <p><span class="bold">CPU时间</span></p>
                                       </li>
                                       <li>
                                          <p><span class="bold">用户I / O时间</span></p>
                                       </li>
                                       <li>
                                          <p><span class="bold">缓冲区获取</span></p>
                                       </li>
                                       <li>
                                          <p><span class="bold">物理I / O.</span></p>
                                       </li>
                                       <li>
                                          <p><span class="bold">优化成本</span></p>
                                       </li>
                                       <li>
                                          <p><span class="bold">I / O互连字节</span></p>
                                       </li>
                                    </ul>
                                 </li>
                              </ul>
                              <p>要使用多个比较指标执行比较分析，请使用不同的指标重复此过程，以执行单独的比较分析。</p>
                           </li>
                           <li>
                              <p>在Schedule部分中：</p>
                              <ol type="a">
                                 <li>
                                    <p>在时区列表中，选择您的时区代码。</p>
                                 </li>
                                 <li>
                                    <p>选择<span class="bold">立即立即</span>启动任务，或<span class="bold">稍后</span>选择安排任务在使用日期和时间字段指定的时间启动。
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">提交”</span>
                              </p>
                              <p>将出现SQL Performance Analyzer主页。</p>
                              <p>在“SQL性能分析器任务”部分中，将显示此任务的状态。要刷新状态图标，请单击“ <span class="bold">刷新”</span> 。任务完成后，“状态”字段将更改为“已完成”。
                              </p>
                              <div class="figure" id="GUID-55DB02F0-E3F7-45C4-BDB0-EB6EDF4091DD__GUID-FF9E73E7-0675-4632-8906-BBD6BBE2F1CE"><img src="img/spa_tasks_param_change.gif" width="496" alt="下面是spa_tasks_param_change.gif的说明" title="下面是spa_tasks_param_change.gif的说明" longdesc="img_text/spa_tasks_param_change.html"><br><a href="img_text/spa_tasks_param_change.html">插图描述spa_tasks_param_change.gif</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>在“SQL性能分析器任务”部分中，选择任务，然后单击“名称”列中的链接。</p>
                              <p>将出现“SQL性能分析器任务”页面。</p>
                              <div class="figure" id="GUID-55DB02F0-E3F7-45C4-BDB0-EB6EDF4091DD__GUID-971BC435-5DFB-457D-B27F-0FBA4B6BF4CC"><img src="img/spa_task_param_change.gif" width="501" alt="下面是spa_task_param_change.gif的说明" title="下面是spa_task_param_change.gif的说明" longdesc="img_text/spa_task_param_change.html"><br><a href="img_text/spa_task_param_change.html">插图描述spa_task_param_change.gif</a></div>
                              <!-- class="figure" -->
                              <p>此页面包含以下部分：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>SQL调优集</p>
                                    <p>本节总结了有关SQL调优集的信息，包括其名称，所有者，描述以及它包含的SQL语句数。</p>
                                 </li>
                                 <li>
                                    <p>SQL试验</p>
                                    <p>本节包括一个表，其中列出了SQL Performance Analyzer任务中使用的SQL试验。</p>
                                 </li>
                                 <li>
                                    <p>SQL试用比较</p>
                                    <p>本节包含一个列出SQL试验比较结果的表</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>单击“比较报告”列中的图标。</p>
                              <p>将出现“SQL性能分析器任务结果”页面。</p>
                           </li>
                           <li>
                              <p>查看性能分析的结果，如<span class="q">“ <a href="comparing-sql-trials.html#GUID-98608C0D-8BA8-4F10-94D8-3AE987087CBF" title="完成SQL性能分析器任务后，生成的数据将生成到SQL性能分析器报告中，该报告将比较更改前和更改后的SQL性能。">使用Oracle Enterprise Manager查看SQL Performance Analyzer报告</a> ”中所述</span> 。
                              </p>
                           </li>
                           <li>
                              <p>如果确定了回归，请单击“SQL Tune报告”列中的图标以查看SQL调整报告。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG317"></a><a id="RATUG316"></a><div class="props_rev_3"><a id="GUID-F28593A6-6688-4574-ACEB-DB2550813965" name="GUID-F28593A6-6688-4574-ACEB-DB2550813965"></a><h4 id="RATUG-GUID-F28593A6-6688-4574-ACEB-DB2550813965" class="sect4"><span class="enumeration_section">3.1.2</span>使用优化程序统计工作流程</h4>
                  <div>
                     <p>优化程序统计工作流使您可以分析优化程序统计信息更改对SQL工作负载性能的影响。</p>
                     <div class="section">
                        <p>该<a id="d4474e786" class="indexterm-anchor"></a></p>
                        <p>SQL Performance Analyzer通过在测试会话中启用挂起的优化程序统计信息来测试新优化程序统计信息的效果。第一个SQL试验测量基线SQL调优集性能;第二个SQL试用版使用挂起的优化程序统计信息。然后，您可以为两个SQL试验运行比较报告。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F28593A6-6688-4574-ACEB-DB2550813965__GUID-21660A02-9F6F-4FAC-B325-FE663BF56EBB">要使用优化程序统计工作流程：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>在SQL Performance Analyzer主页上的“SQL Performance Analyzer工作流”下，单击“ <span class="bold">优化程序统计信息”</span> 。
                              </p>
                              <p>将出现“优化程序统计信息”页</p>
                              <div class="figure" id="GUID-F28593A6-6688-4574-ACEB-DB2550813965__GUID-E87E6126-2540-4ED7-9206-6DE9CF547806"><img src="img/spa_optimizer_stats.gif" width="282" alt="spa_optimizer_stats.gif的描述如下" title="spa_optimizer_stats.gif的描述如下" longdesc="img_text/spa_optimizer_stats.html"><br><a href="img_text/spa_optimizer_stats.html">插图描述spa_optimizer_stats.gif</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>在“任务名称”字段中，输入任务的名称。</p>
                           </li>
                           <li>
                              <p>在“SQL调整集”字段中，输入包含要分析的SQL工作负载的SQL调优集的名称。</p>
                              <p>或者，单击搜索图标以使用“搜索并选择：SQL调整集”窗口搜索SQL调整集。</p>
                              <p>选定的SQL调优集现在出现在SQL调整集字段中。</p>
                           </li>
                           <li>
                              <p>在“描述”字段中，可以选择输入任务的描述。</p>
                           </li>
                           <li>
                              <p>在“创建方法”列表中，通过执行以下操作之一来确定如何创建SQL试用版以及生成哪些内容：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>选择<span class="bold">执行SQL</span> 。
                                    </p>
                                    <p>SQL试验通过实际运行SQL语句为SQL调优集中的每个SQL语句生成执行计划和统计信息。</p>
                                 </li>
                                 <li>
                                    <p>选择<span class="bold">生成计划</span> 。</p>
                                    <p>SQL试用版仅调用优化器来创建执行计划，而不实际运行SQL语句。</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>在“每SQL时间限制”列表中，通过执行以下操作之一来确定试用期间SQL执行的时间限制：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>选择<span class="bold">5分钟</span> 。
                                    </p>
                                    <p>执行将在SQL调优设置中运行每个SQL语句最多5分钟并收集性能数据。</p>
                                 </li>
                                 <li>
                                    <p>选择<span class="bold">无限制</span> 。
                                    </p>
                                    <p>执行将运行SQL调优集中的每个SQL语句以完成并收集性能数据。收集执行统计信息可以提高性能分析的准确性，但需要更长的时间。建议不要使用此设置，因为任务可能会被一个SQL语句在较长时间内停止。</p>
                                 </li>
                                 <li>
                                    <p>选择“ <span class="bold">自定义”</span>并输入指定的秒数，分钟数或小时数。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>在“比较度量标准”列表中，选择要用于比较分析的比较度量标准：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="bold">经过的时间</span></p>
                                 </li>
                                 <li>
                                    <p><span class="bold">CPU时间</span></p>
                                 </li>
                                 <li>
                                    <p><span class="bold">用户I / O时间</span></p>
                                 </li>
                                 <li>
                                    <p><span class="bold">缓冲区获取</span></p>
                                 </li>
                                 <li>
                                    <p><span class="bold">物理I / O.</span></p>
                                 </li>
                                 <li>
                                    <p><span class="bold">优化成本</span></p>
                                 </li>
                                 <li>
                                    <p><span class="bold">I / O互连字节</span></p>
                                 </li>
                              </ul>
                              <p>如果您选择仅在SQL试验中生成执行计划，则优化程序成本是唯一可用的比较指标。</p>
                              <p>要使用多个比较指标执行比较分析，请通过使用不同的指标重复此过程来执行单独的比较分析。</p>
                           </li>
                           <li>
                              <p>确保收集待处理的优化程序统计信息，并选择<span class="bold">收集的待处理优化程序统计信息</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在Schedule部分中：</p>
                              <ol type="a">
                                 <li>
                                    <p>在时区列表中，选择您的时区代码。</p>
                                 </li>
                                 <li>
                                    <p>选择<span class="bold">立即立即</span>启动任务，或<span class="bold">稍后</span>选择安排任务在使用日期和时间字段指定的时间启动。
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">提交”</span>
                              </p>
                              <p>将出现SQL Performance Analyzer主页。</p>
                              <p>在“SQL性能分析器任务”部分中，将显示此任务的状态。要刷新状态图标，请单击“ <span class="bold">刷新”</span> 。任务完成后，“状态”字段将更改为“已完成”。
                              </p>
                              <div class="figure" id="GUID-F28593A6-6688-4574-ACEB-DB2550813965__GUID-AF9FAFC2-3938-4288-ABDF-067AF6219FD5"><img src="img/spa_tasks_optimizer.gif" width="488" alt="下面是spa_tasks_optimizer.gif的说明" title="下面是spa_tasks_optimizer.gif的说明" longdesc="img_text/spa_tasks_optimizer.html"><br><a href="img_text/spa_tasks_optimizer.html">插图描述spa_tasks_optimizer.gif</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>在“SQL性能分析器任务”部分中，选择任务，然后单击“名称”列中的链接。</p>
                              <p>将出现“SQL性能分析器任务”页面。</p>
                              <div class="figure" id="GUID-F28593A6-6688-4574-ACEB-DB2550813965__GUID-C4CD97FB-1FE9-47B4-A362-3CF7531B1789"><img src="img/spa_task_optimizer.gif" width="477" alt="spa_task_optimizer.gif的描述如下" title="spa_task_optimizer.gif的描述如下" longdesc="img_text/spa_task_optimizer.html"><br><a href="img_text/spa_task_optimizer.html">插图描述spa_task_optimizer.gif</a></div>
                              <!-- class="figure" -->
                              <p>此页面包含以下部分：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>SQL调优集</p>
                                    <p>本节总结了有关SQL调优集的信息，包括其名称，所有者，描述以及它包含的SQL语句数。</p>
                                 </li>
                                 <li>
                                    <p>SQL试验</p>
                                    <p>本节包括一个表，其中列出了SQL Performance Analyzer任务中使用的SQL试验。</p>
                                 </li>
                                 <li>
                                    <p>SQL试用比较</p>
                                    <p>本节包含一个列出SQL试验比较结果的表</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>单击“比较报告”列中的图标。</p>
                              <p>将出现“SQL性能分析器任务结果”页面。</p>
                           </li>
                           <li>
                              <p>查看性能分析的结果，如<span class="q">“ <a href="comparing-sql-trials.html#GUID-98608C0D-8BA8-4F10-94D8-3AE987087CBF" title="完成SQL性能分析器任务后，生成的数据将生成到SQL性能分析器报告中，该报告将比较更改前和更改后的SQL性能。">使用Oracle Enterprise Manager查看SQL Performance Analyzer报告</a> ”中所述</span> 。
                              </p>
                              <p>可以使用SQL计划基准和SQL Tuning Advisor修复性能中发现的任何回归。如果待定优化程序统计信息产生令人满意的性能，则可以发布以供使用。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG294"></a><a id="RATUG293"></a><div class="props_rev_3"><a id="GUID-58FA5887-382C-4FA8-9947-C8B77F6D0EE3" name="GUID-58FA5887-382C-4FA8-9947-C8B77F6D0EE3"></a><h4 id="RATUG-GUID-58FA5887-382C-4FA8-9947-C8B77F6D0EE3" class="sect4"><span class="enumeration_section">3.1.3</span>使用Exadata Simulation工作流程</h4>
                  <div>
                     <p>通过Exadata仿真工作流，您可以模拟Exadata存储服务器安装对SQL工作负载性能的影响。</p>
                     <div class="section">
                        <p>Oracle Exadata提供了极大的I / O带宽，并能够将SQL处理从数据库卸载到存储。这使Oracle数据库可以显着减少通过I / O互连发送的数据量，同时将CPU资源卸载到Exadata存储单元。</p>
                        <p>SQL Performance Analyzer可以通过模拟Exadata存储服务器安装并测量SQL工作负载的I / O互连使用量的减少来分析Exadata SQL卸载处理的有效性。</p>
                        <p>运行Exadata模拟不需要对系统进行任何硬件或配置更改。选择SQL调优集后，SQL Performance Analyzer将创建一个任务并在禁用Exadata存储服务器模拟的情况下执行初始试用。然后，SQL Performance Analyzer会在启用Exadata存储服务器模拟的情况下执行第二次试用。然后，SQL Performance Analyzer使用I / O互连字节比较度量标准对两个试验进行比较，并生成SQL性能分析器报告，该报告估计如果Oracle Exadata是，则不需要从Exadata存储单元发送到数据库的数据量。正在使用。在两个SQL试验中，SQL语句执行完成，I / O互连字节测量分别作为第一次和第二次试验的实际和模拟Exadata值。测量的I / O互连字节的变化可以很好地估计Exadata存储单元中可以执行的过滤量，以及通常用于处理此数据的CPU量，但现在可以从数据库。</p>
                        <div class="infoboxnote" id="GUID-58FA5887-382C-4FA8-9947-C8B77F6D0EE3__GUID-B941349F-4330-420C-BB08-A8DF022F195C">
                           <p class="notep1">注意：</p>
                           <p>使用Exadata模拟不会导致任何计划更改。Exadata存储服务器安装中的执行计划不会更改，因为模拟侧重于测量I / O互连使用的改进。此外，I / O互连字节不会增加，除非使用数据压缩（请参阅下一个注释），因为Oracle Exadata只会减少发送到数据库的数据量。</p>
                        </div>
                        <div class="infoboxnote" id="GUID-58FA5887-382C-4FA8-9947-C8B77F6D0EE3__GUID-24A80E60-7D0E-4BF6-9171-63AC5F3665AD">
                           <p class="notep1">注意：</p>
                           <p>由于I / O互连字节是用于衡量使用Exadata存储服务器安装对性能更改影响的唯一指标，因此如果Oracle Exadata与数据压缩一起使用，则无法正常工作。由于Exadata存储单元也对数据进行解压缩，因此SQL语句的Oracle Exadata（或第二个SQL试用版）的I / O互连字节可能大于没有Oracle Exadata（或第一个SQL试用版）的I / O互连字节。数据被压缩。这种比较会产生误导，因为SQL语句将被报告为回归;事实上，事实并非如此。</p>
                        </div>
                        <div class="infoboxnote" id="GUID-58FA5887-382C-4FA8-9947-C8B77F6D0EE3__GUID-F9612D7A-D350-42F7-A83A-D7D7E0819B4D">
                           <p class="notep1">注意：</p>
                           <p>Exadata仿真工作流用于模拟非Exadata硬件上的Exadata Storage Server安装。要测试Exadata硬件上的更改，请使用标准SQL Performance Analyzer工作流。</p>
                        </div>
                        <div class="infoboxnote" id="GUID-58FA5887-382C-4FA8-9947-C8B77F6D0EE3__GUID-9DAD22A3-532F-4AA2-8E38-41F733CF8E6E">
                           <p class="notep1">注意：</p>
                           <p>Exadata仿真仅支持DSS和数据仓库工作负载。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-58FA5887-382C-4FA8-9947-C8B77F6D0EE3__GUID-F1FB4617-AA6B-45B3-BA86-3F3A3EF93911">要使用SQL Performance Analyzer Exadata仿真工作流程：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>在SQL Performance Analyzer主页上的“SQL Performance Analyzer工作流”下，单击“ <span class="bold">Exadata Simulation”</span> 。
                              </p>
                              <p>将出现Exadata Simulation页面。</p>
                              <div class="figure" id="GUID-58FA5887-382C-4FA8-9947-C8B77F6D0EE3__GUID-C8E1B6B7-7172-4978-B3B5-6F5A4A204B74"><img src="img/spa_exadata_sim.gif" width="283" alt="下面是spa_exadata_sim.gif的描述" title="下面是spa_exadata_sim.gif的描述" longdesc="img_text/spa_exadata_sim.html"><br><a href="img_text/spa_exadata_sim.html">插图描述spa_exadata_sim.gif</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>在“任务名称”字段中，输入任务的名称。</p>
                           </li>
                           <li>
                              <p>在“SQL调整集”字段中，输入包含要分析的SQL工作负载的SQL调优集的名称。</p>
                              <p>或者，单击搜索图标以使用“搜索并选择：SQL调整集”窗口搜索SQL调整集。</p>
                              <p>选定的SQL调优集现在出现在SQL调整集字段中。</p>
                           </li>
                           <li>
                              <p>在“描述”字段中，可以选择输入任务的描述。</p>
                           </li>
                           <li>
                              <p>在“每SQL时间限制”列表中，通过执行以下操作之一来确定试用期间SQL执行的时间限制：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>选择<span class="bold">5分钟</span> 。
                                    </p>
                                    <p>执行将在SQL调优设置中运行每个SQL语句最多5分钟并收集性能数据。</p>
                                 </li>
                                 <li>
                                    <p>选择<span class="bold">无限制</span> 。
                                    </p>
                                    <p>执行将运行SQL调优集中的每个SQL语句以完成并收集性能数据。收集执行统计信息可以提高性能分析的准确性，但需要更长的时间。建议不要使用此设置，因为任务可能会被一个SQL语句在较长时间内停止。</p>
                                 </li>
                                 <li>
                                    <p>选择“ <span class="bold">自定义”</span>并输入指定的秒数，分钟数或小时数。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>在Schedule部分中：</p>
                              <ol type="a">
                                 <li>
                                    <p>在时区列表中，选择您的时区代码。</p>
                                 </li>
                                 <li>
                                    <p>选择<span class="bold">立即立即</span>启动任务，或<span class="bold">稍后</span>选择安排任务在使用日期和时间字段指定的时间启动。
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>单击“ <span class="bold">提交”</span>
                              </p>
                              <p>将出现SQL Performance Analyzer主页。</p>
                              <p>在“SQL性能分析器任务”部分中，将显示此任务的状态。要刷新状态图标，请单击“ <span class="bold">刷新”</span> 。任务完成后，“状态”字段将更改为“已完成”。
                              </p>
                              <div class="figure" id="GUID-58FA5887-382C-4FA8-9947-C8B77F6D0EE3__GUID-ECEB77A5-C924-4510-871B-B163E0530942"><img src="img/spa_tasks_exadata.gif" width="496" alt="下面是spa_tasks_exadata.gif的说明" title="下面是spa_tasks_exadata.gif的说明" longdesc="img_text/spa_tasks_exadata.html"><br><a href="img_text/spa_tasks_exadata.html">插图描述spa_tasks_exadata.gif</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>在“SQL性能分析器任务”部分中，选择任务，然后单击“名称”列中的链接。</p>
                              <p>将出现“SQL性能分析器任务”页面。</p>
                              <div class="figure" id="GUID-58FA5887-382C-4FA8-9947-C8B77F6D0EE3__GUID-DBEB2052-DC18-4243-B126-82ECFBB1D47D"><img src="img/spa_task_exadata_sim.gif" width="478" alt="下面是spa_task_exadata_sim.gif的描述" title="下面是spa_task_exadata_sim.gif的描述" longdesc="img_text/spa_task_exadata_sim.html"><br><a href="img_text/spa_task_exadata_sim.html">插图描述spa_task_exadata_sim.gif</a></div>
                              <!-- class="figure" -->
                              <p>此页面包含以下部分：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>SQL调优集</p>
                                    <p>本节总结了有关SQL调优集的信息，包括其名称，所有者，描述以及它包含的SQL语句数。</p>
                                 </li>
                                 <li>
                                    <p>SQL试验</p>
                                    <p>本节包括一个表，其中列出了SQL Performance Analyzer任务中使用的SQL试验。</p>
                                 </li>
                                 <li>
                                    <p>SQL试用比较</p>
                                    <p>本节包含一个列出SQL试验比较结果的表</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>单击“比较报告”列中的图标。</p>
                              <p>将出现“SQL性能分析器任务结果”页面。</p>
                           </li>
                           <li>
                              <p>查看性能分析的结果，如<span class="q">“ <a href="comparing-sql-trials.html#GUID-98608C0D-8BA8-4F10-94D8-3AE987087CBF" title="完成SQL性能分析器任务后，生成的数据将生成到SQL性能分析器报告中，该报告将比较更改前和更改后的SQL性能。">使用Oracle Enterprise Manager查看SQL Performance Analyzer报告</a> ”中所述</span> 。
                              </p>
                              <p>报告中捕获了第一次和第二次试验之间Exadata模拟的任何SQL性能改进。通常，如果SQL工作负载包含扫描大量行或一小部分表列的查询，则可能会产生更大的影响。相反，查询具有较少行的索引表或表的SQL工作负载将导致Exadata模拟的影响较小。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG275"></a><a id="RATUG178"></a><div class="props_rev_3"><a id="GUID-F9D4E8D3-0581-4CF4-ADEC-20720E51E20D" name="GUID-F9D4E8D3-0581-4CF4-ADEC-20720E51E20D"></a><h4 id="RATUG-GUID-F9D4E8D3-0581-4CF4-ADEC-20720E51E20D" class="sect4"><span class="enumeration_section">3.1.4</span>使用引导式工作流程</h4>
                  <div>
                     <div><span>通过引导式工作流，您可以测试任何类型的系统更改对SQL工作负载的性能影响。</span> 有关可能影响SQL性能的系统更改列表，请参阅<span class="q">“ <a href="introduction-to-oracle-database-testing.html#GUID-F2920E05-3680-4699-B074-92DBEF682B70" title="系统更改（例如升级数据库或添加索引）可能会导致更改SQL语句的执行计划，从而对SQL性能产生重大影响。">SQL性能分析器</a> ”</span> 。
                     </div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-F9D4E8D3-0581-4CF4-ADEC-20720E51E20D__GUID-770DD204-BD7B-49AE-9411-F84CE01BB0E9">
                           <p class="notep1">注意：</p>
                           <p>要创建分析任务以测试数据库初始化参数更改，请使用简化参数更改工作流程，如<span class="q">“ <a href="creating-an-analysis-task.html#GUID-55DB02F0-E3F7-45C4-BDB0-EB6EDF4091DD" title="通过参数更改工作流，您可以在更改单个环境初始化参数的值时测试SQL工作负载的性能影响。">使用参数更改工作流程</a> ”中所述</span> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F9D4E8D3-0581-4CF4-ADEC-20720E51E20D__GUID-A92C616F-3868-40C5-B6CD-74454F7317D4">要使用SQL Performance Analyzer任务指导的工作流程：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>在SQL Performance Analyzer主页的“SQL性能分析器工作流”下，单击“ <span class="bold">引导式工作流”</span> 。</span><div>
                              <p>将出现“引导式工作流程”页面。</p>
                              <p>通过引导的工作流，您可以在执行任何类型的系统更改时测试SQL工作负载的性能影响，如<span class="q">“ <a href="introduction-to-oracle-database-testing.html#GUID-F2920E05-3680-4699-B074-92DBEF682B70" title="系统更改（例如升级数据库或添加索引）可能会导致更改SQL语句的执行计划，从而对SQL性能产生重大影响。">SQL性能分析器</a> ”中所述</span> 。
                              </p>
                              <p>此页面按顺序列出SQL Performance Analyzer任务中的必需步骤。必须按照显示的顺序完成每个步骤，然后才能开始下一步骤。</p>
                              <div class="figure" id="GUID-F9D4E8D3-0581-4CF4-ADEC-20720E51E20D__GUID-ED07EE9B-B749-4F01-A014-CC3DCE5B7569"><img src="img/spa_guided_workflow.gif" width="501" alt="spa_guided_workflow.gif的描述如下" title="spa_guided_workflow.gif的描述如下" longdesc="img_text/spa_guided_workflow.html"><br><a href="img_text/spa_guided_workflow.html">插图描述spa_guided_workflow.gif</a></div>
                              <!-- class="figure" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span>在“引导式工作流”页面上，单击“步骤1：基于SQL调整集创建SQL性能分析器任务”的“ <span class="bold">执行”</span>图标。</span><div>
                              <p>将出现“创建SQL性能分析器任务”页面。</p>
                              <div class="figure" id="GUID-F9D4E8D3-0581-4CF4-ADEC-20720E51E20D__GUID-CC862E37-A8B5-48CF-A958-AFE4830FC248"><img src="img/spa_create_task.gif" width="499" alt="spa_create_task.gif的描述如下" title="spa_create_task.gif的描述如下" longdesc="img_text/spa_create_task.html"><br><a href="img_text/spa_create_task.html">插图描述spa_create_task.gif</a></div>
                              <!-- class="figure" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span>在“名称”字段中，输入任务的名称。</span></li>
                        <li class="stepexpand"><span>在“描述”字段中，可以选择输入任务的描述。</span></li>
                        <li class="stepexpand"><span>在“SQL调整集”下的“名称”字段中，输入包含要分析的SQL工作负载的SQL调优集的名称。</span><div>
                              <p>或者，单击搜索图标以从“搜索并选择：SQL调整集”窗口中选择SQL调整集。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="bold">创建”</span></span><div>
                              <p>将出现“引导式工作流程”页面。</p>
                              <p>此步骤的“状态”图标已更改为复选标记，现在启用了下一步的“ <span class="bold">执行”</span>图标。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>创建分析任务后，您可以通过执行存储在SQL调优集中的SQL语句来构建更改前的性能数据，如<a href="creating-a-pre-change-sql-trial.html#GUID-34F13B73-7FFA-4E5E-862E-2D38128ED582" title="在创建SQL Performance Analyzer任务并选择SQL调优集作为输入源之后，您需要在测试系统上建立初始环境。">创建更改前SQL测试中所述</a> 。</span></li>
                     </ol>
                  </div>
               </div>
            </div><a id="RATUG179"></a><div class="props_rev_3"><a id="GUID-A00000CF-F2DA-4138-BBFB-6FA03D889EBA" name="GUID-A00000CF-F2DA-4138-BBFB-6FA03D889EBA"></a><h3 id="RATUG-GUID-A00000CF-F2DA-4138-BBFB-6FA03D889EBA" class="sect3"><span class="enumeration_section">3.2</span>使用API创建分析任务</h3>
               <div>
                  <p>本节介绍如何使用<code class="codeph">DBMS_SQLPA.CREATE_ANALYSIS_TASK</code>函数创建SQL Performance Analyzer任务。任务是SQL Performance Analyzer执行输入和结果的数据库容器。
                  </p>
                  <div class="p">在继续之前，将要在性能分析中使用的SQL工作负载捕获到生产系统上的SQL调优集中，然后将其传输到将执行性能分析的测试系统，如<span class="q">“ <a href="introduction-to-sql-performance-analyzer.html#GUID-3828F92F-62BC-4A5E-8303-9720DCCB64B4" title="在运行SQL Performance Analyzer之前，在生产系统上捕获一组SQL语句，这些语句表示您要分析的SQL工作负载。">捕获SQL工作负载</a> ”中所述</span> 。
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A00000CF-F2DA-4138-BBFB-6FA03D889EBA__GUID-4D45B59D-06A6-4631-A04A-5C3A60D78ACD">要创建分析任务：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>打电话给<a id="d4474e1508" class="indexterm-anchor"></a> <code class="codeph">CREATE_ANALYSIS_TASK</code>函数使用以下参数：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>设置<code class="codeph">task_name</code>以指定SQL Performance Analyzer任务的可选名称。
                                 </p>
                              </li>
                              <li>
                                 <p>将<code class="codeph">sqlset_name</code>设置为SQL调优集的名称。
                                 </p>
                              </li>
                              <li>
                                 <p>将<code class="codeph">sqlset_owner</code>设置为SQL调优集的所有者。默认值是当前架构所有者。
                                 </p>
                              </li>
                              <li>
                                 <p>将<code class="codeph">basic_filter</code>设置为用于从SQL调优集中过滤SQL的SQL谓词。
                                 </p>
                              </li>
                              <li>
                                 <p>设置<code class="codeph">order_by</code>以指定执行SQL语句的顺序。
                                 </p>
                                 <p>您可以使用此参数来确保处理更重要的SQL语句，并在达到时间限制时不跳过。</p>
                              </li>
                              <li>
                                 <p>将<code class="codeph">top_sql</code>设置为仅在过滤和排名后考虑最重要的SQL语句数。
                                 </p>
                              </li>
                           </ul>
                           <p>以下示例说明了函数调用：</p><pre class="oac_no_warn" dir="ltr">VARIABLE t_name VARCHAR2（100）; EXEC：t_name：= DBMS_SQLPA.CREATE_ANALYSIS_TASK（sqlset_name =&gt;'my_sts'， -  task_name =&gt;'my_spa_task'）;</pre></li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>创建分析任务后，您可以通过执行存储在SQL调优集中的SQL语句来构建更改前的性能数据，如<a href="creating-a-pre-change-sql-trial.html#GUID-34F13B73-7FFA-4E5E-862E-2D38128ED582" title="在创建SQL Performance Analyzer任务并选择SQL调优集作为输入源之后，您需要在测试系统上建立初始环境。">创建更改前SQL测试中所述</a> 。
                     </p>
                     <div class="infoboxnotealso" id="GUID-A00000CF-F2DA-4138-BBFB-6FA03D889EBA__GUID-CDEBB300-1AEA-4321-A06A-325A536CC768">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../arpls/DBMS_SQLPA.html#ARPLS229" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a>以了解有关<code class="codeph">DBMS_SQLPA.CREATE_ANALYSIS_TASK</code>函数的更多信息</p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="RATUG4234"></a><div class="sect2"><a id="GUID-F8BBF7BE-382C-4EF8-B074-F39A74D011DC" name="GUID-F8BBF7BE-382C-4EF8-B074-F39A74D011DC"></a><h3 id="RATUG-GUID-F8BBF7BE-382C-4EF8-B074-F39A74D011DC" class="sect3"><span class="enumeration_section">3.3</span>使用API配置分析任务</h3>
               <div>
                  <div><span>本节介绍如何在创建SQL Performance Analyzer任务后配置它。</span> 您可以使用<code class="codeph">DBMS_SQLPA.SET_ANALYSIS_TASK_PARAMETER</code>过程设置其参数来配置分析任务。
                  </div>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="creating-an-analysis-task.html#GUID-44B1467E-C355-4184-B9C3-A7982A4F39A1" title="您可以配置比较方法，该方法确定SQL Performance Analyzer任务何时执行逐行执行计划比较。">使用API配置分析任务的执行计划比较方法</a></p>
                     </li>
                     <li>
                        <p><a href="creating-an-analysis-task.html#GUID-F4FD92EB-480C-4FE1-BF15-69EE593D9E1C" title="您可以配置SQL Performance Analyzer以运行Oracle Exadata模拟。">使用API为Exadata Simulation配置分析任务</a></p>
                     </li>
                     <li>
                        <p><a href="creating-an-analysis-task.html#GUID-1206AB9E-14D3-4784-AEC0-A1929A36857D" title="您可以将捕获的SQL语句存储在SQL调优集中，并在创建SQL Performance Analyzer任务时将其用作输入源。然后，SQL Performance Analyzer使用SQL调优集作为测试执行的源或为SQL试验生成执行计划。">使用API在分析任务中重新映射多租户容器数据库标识符</a></p>
                     </li>
                     <li>
                        <p><a href="creating-an-analysis-task.html#GUID-EE47E8F7-FE2F-464A-A30E-1C8ADA201960" title="您可以配置是否在分析任务中执行触发器。默认情况下，触发器由SQL Performance Analyzer执行。">在分析任务中配置触发器执行</a></p>
                     </li>
                     <li>
                        <p><a href="creating-an-analysis-task.html#GUID-7C742DB2-A1AB-44FC-8709-BC323336505B" title="您可以配置如何处理分析任务中引用SYSDATE的SQL语句。">配置分析任务中的呼叫返回的日期</a></p>
                     </li>
                     <li>
                        <p><a href="creating-an-analysis-task.html#GUID-952CD60A-6673-468E-BE87-ABC0E41D1201" title="您可以配置分析任务中为SQL语句提取的行数。">配置要为分析任务获取的行数</a></p>
                     </li>
                     <li>
                        <p><a href="creating-an-analysis-task.html#GUID-ADF5573F-0ADC-46DD-9AB1-433D97856F1F" title="您可以设置并行度并启用并发SQL执行。">配置分析任务的并行度</a></p>
                     </li>
                     <li>
                        <p><a href="creating-an-analysis-task.html#GUID-34BDF1DE-2711-48E3-81D7-F1AAA8D3E08E" title="现在，在运行两个“测试 - 执行”SQL性能分析器（SPA）试验时，支持SQL结果集的比较。">使用SQL Performance Analyzer验证SQL结果集</a></p>
                     </li>
                  </ul>
               </div><a id="RATUG4236"></a><a id="RATUG4237"></a><a id="RATUG4235"></a><div class="props_rev_3"><a id="GUID-44B1467E-C355-4184-B9C3-A7982A4F39A1" name="GUID-44B1467E-C355-4184-B9C3-A7982A4F39A1"></a><h4 id="RATUG-GUID-44B1467E-C355-4184-B9C3-A7982A4F39A1" class="sect4"><span class="enumeration_section">3.3.1</span>使用API配置分析任务的执行计划比较方法</h4>
                  <div>
                     <div><span>您可以配置比较方法，该方法确定SQL Performance Analyzer任务何时执行逐行执行计划比较。</span> 默认情况下，仅当计划哈希值未知时，SQL性能分析器任务才会执行执行计划的逐行比较。
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-44B1467E-C355-4184-B9C3-A7982A4F39A1__GUID-C617C5BD-7AD4-481D-9E09-610F5F00890D">要配置分析任务的执行计划比较方法：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<a id="d4474e1824" class="indexterm-anchor"></a> <code class="codeph">SET_ANALYSIS_TASK_PARAMETER</code>过程设置<code class="codeph">PLAN_LINES_COMPARISON</code>参数的值。
                              </p>
                              <p><a href="creating-an-analysis-task.html#GUID-44B1467E-C355-4184-B9C3-A7982A4F39A1__CHDGHEBF" title="此表列出了SQL Performance Analyzer任务的执行计划比较方法">表3-1</a>列出了<code class="codeph">PLAN_LINES_COMPARISON</code>参数的<code class="codeph">PLAN_LINES_COMPARISON</code> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="tblformal" id="GUID-44B1467E-C355-4184-B9C3-A7982A4F39A1__CHDGHEBF">
                           <p class="titleintable">表3-1 SQL性能分析器任务执行计划方法</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SQL性能分析器任务执行计划方法" width="100%" border="1" summary="This table lists the execution plan comparison methods for a SQL Performance Analyzer task" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d4474e1854">方法</th>
                                    <th align="left" valign="bottom" width="80%" id="d4474e1857">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d4474e1862" headers="d4474e1854 ">
                                       <p><code class="codeph">总是</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d4474e1862 d4474e1857 ">
                                       <p>分析任务始终执行执行计划的逐行比较。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d4474e1870" headers="d4474e1854 ">
                                       <p><code class="codeph">汽车</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d4474e1870 d4474e1857 ">
                                       <p>仅当第一个SQL试验的计划哈希值的计算已更改或第二个SQL试验不可用时，分析任务才会执行执行计划的逐行比较。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d4474e1878" headers="d4474e1854 ">
                                       <p><code class="codeph">没有</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d4474e1878 d4474e1857 ">
                                       <p>仅当计划哈希值未知时，分析任务才会执行执行计划的逐行比较。这是默认值。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>以下示例显示如何将分析任务的执行计划方法设置为<code class="codeph">AUTO</code> ：</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SQLPA.SET_ANALYSIS_TASK_PARAMETER（task_name =&gt;'my_spa_task'， -  parameter =&gt;'PLAN_LINES_COMPARISON'， -  value =&gt;'AUTO'）;</pre><div class="infoboxnotealso" id="GUID-44B1467E-C355-4184-B9C3-A7982A4F39A1__GUID-C0367EAB-A1A3-4114-9514-7AFF52C592BC">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">DBMS_SQLPA.SET_ANALYSIS_TASK_PARAMETER</code>过程的信息，请参阅<a href="../arpls/DBMS_SQLPA.html#ARPLS68371" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG318"></a><div class="props_rev_3"><a id="GUID-F4FD92EB-480C-4FE1-BF15-69EE593D9E1C" name="GUID-F4FD92EB-480C-4FE1-BF15-69EE593D9E1C"></a><h4 id="RATUG-GUID-F4FD92EB-480C-4FE1-BF15-69EE593D9E1C" class="sect4"><span class="enumeration_section">3.3.2</span>使用API配置Exadata仿真的分析任务</h4>
                  <div>
                     <div><span>您可以配置SQL Performance Analyzer以运行Oracle Exadata模拟。</span> 有关SQL Performance Analyzer如何模拟Exadata存储服务器安装对SQL工作负载性能的影响的信息，请参阅<span class="q">“ <a href="creating-an-analysis-task.html#GUID-58FA5887-382C-4FA8-9947-C8B77F6D0EE3" title="通过Exadata仿真工作流，您可以模拟Exadata存储服务器安装对SQL工作负载性能的影响。">使用Exadata Simulation工作流</a> ”</span> 。
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-F4FD92EB-480C-4FE1-BF15-69EE593D9E1C__GUID-8D003C42-9E54-44FB-8B94-9165EC28294E">要为分析任务启用Exadata模拟：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>打电话给<a id="d4474e2000" class="indexterm-anchor"></a>创建更改后的SQL试验之前的<code class="codeph">SET_ANALYSIS_TASK_PARAMETER</code>过程，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SQLPA.SET_ANALYSIS_TASK_PARAMETER（task_name =&gt;'my_spa_task'， -  parameter =&gt;'CELL_SIMULATION_ENABLED'， -  value =&gt;'TRUE'）;</pre><p>这将在您创建更改后的SQL试验时启用Exadata模拟，然后可以将其与在禁用Exadata模拟时创建的更改前SQL试验进行比较。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>或者，您可以使用<code class="codeph">tcellsim.sql</code>脚本运行Exadata模拟。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F4FD92EB-480C-4FE1-BF15-69EE593D9E1C__GUID-6670C45A-198A-4696-AA45-EEA036FBAF40">要使用tcellsim.sql运行Exadata模拟：</p>
                        <ol>
                           <li>
                              <p>在SQL提示符下，输入：</p><pre class="oac_no_warn" dir="ltr">@ $ ORACLE_HOME / RDBMS /管理/ tcellsim.sql</pre></li>
                           <li>
                              <p>输入要使用的SQL调整集的名称和所有者：</p><pre class="oac_no_warn" dir="ltr">输入sts_name的值：MY_STS输入sts_owner的值：IMMCHAN</pre><p>然后该脚本自动运行以下四个步骤：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>创建SQL Performance Analyzer任务</p>
                                 </li>
                                 <li>
                                    <p>测试执行禁用Exadata模拟的SQL语句</p>
                                 </li>
                                 <li>
                                    <p>Test在启用Exadata模拟的情况下执行SQL语句</p>
                                 </li>
                                 <li>
                                    <p>比较性能并生成分析报告</p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-F4FD92EB-480C-4FE1-BF15-69EE593D9E1C__GUID-38E07F20-BB88-4D69-8311-3C83B76D6B8C">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">DBMS_SQLPA.SET_ANALYSIS_TASK_PARAMETER</code>过程的信息，请参阅<a href="../arpls/DBMS_SQLPA.html#ARPLS68371" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="RATUG4193"></a><div class="props_rev_3"><a id="GUID-1206AB9E-14D3-4784-AEC0-A1929A36857D" name="GUID-1206AB9E-14D3-4784-AEC0-A1929A36857D"></a><h4 id="RATUG-GUID-1206AB9E-14D3-4784-AEC0-A1929A36857D" class="sect4"><span class="enumeration_section">3.3.3</span>使用API重新分析分析任务中的多租户容器数据库标识符</h4>
                  <div>
                     <p>您可以将捕获的SQL语句存储在SQL调优集中，并在创建SQL Performance Analyzer任务时将其用作输入源。然后，SQL Performance Analyzer使用SQL调优集作为测试执行的源或为SQL试验生成执行计划。</p>
                     <div class="section">
                        <p>如果使用从非CDB传输到多租户容器数据库（CDB）作为输入源的SQL调整集，则必须重新映射SQL调优集中SQL语句的CDB标识符，以使STS在CDB。重新映射CDB标识符将SQL调优集中的每个SQL语句与CDB标识符相关联，CDB标识符可以重新映射到CDB中相应的可插拔数据库（PDB）。</p>
                        <p>通常，当SQL调整集从非CDB传输到CDB时，应重新映射CDB标识符。在这种情况下，您只需使用SQL调优集作为SQL Performance Analyzer的输入源。但是，如果您使用的是尚未重新映射CDB标识符的SQL调优集，则可以将重新映射指定为SQL Performance Analyzer任务属性。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1206AB9E-14D3-4784-AEC0-A1929A36857D__GUID-96E2505B-5A2B-4CA1-99C6-95B4F6514223">要重新映射分析任务的CDB标识符：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<a id="d4474e2150" class="indexterm-anchor"></a> <code class="codeph">SET_ANALYSIS_TASK_PARAMETER</code>过程，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SQLPA.SET_ANALYSIS_TASK_PARAMETER（task_name =&gt;'non_cdb_spa1'， -  parameter =&gt;'CON_DBID_MAPPING'， -  value =&gt;'1234：5678,1357：2468'）;</pre><p>在该示例中，CDB标识符<code class="codeph">1234</code>和<code class="codeph">1357</code>分别被重新映射到<code class="codeph">5678</code>和<code class="codeph">2468</code> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>重新映射CDB标识符后，SQL Performance Analyzer在找到旧CDB标识符的匹配项时使用新的CDB标识符，并在CDB中的相应PDB中执行SQL语句。</p>
                        <div class="infoboxnotealso" id="GUID-1206AB9E-14D3-4784-AEC0-A1929A36857D__GUID-BB85A80D-2780-4086-AA2D-EB629288790C">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关传输SQL调优集的信息，请<a href="../tgsql/managing-sql-tuning-sets.html#TGSQL533" target="_blank"><span><cite>参见“Oracle数据库SQL调优指南”</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">DBMS_SQLPA.SET_ANALYSIS_TASK_PARAMETER</code>过程的信息，请参阅<a href="../arpls/DBMS_SQLPA.html#ARPLS68371" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-EE47E8F7-FE2F-464A-A30E-1C8ADA201960" name="GUID-EE47E8F7-FE2F-464A-A30E-1C8ADA201960"></a><h4 id="RATUG-GUID-EE47E8F7-FE2F-464A-A30E-1C8ADA201960" class="sect4"><span class="enumeration_section">3.3.4</span>在分析任务中配置触发器执行</h4>
                  <div>
                     <p>您可以配置是否在分析任务中执行触发器。默认情况下，触发器由SQL Performance Analyzer执行。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-EE47E8F7-FE2F-464A-A30E-1C8ADA201960__GUID-F8594D6C-4D86-42FB-BF84-7EBDC3557E67">要在分析任务中配置触发器执行：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<code class="codeph">SET_ANALYSIS_TASK_PARAMETER</code>过程设置<code class="codeph">EXECUTE_TRIGGERS</code>参数的值。
                              </p>
                              <p><a href="creating-an-analysis-task.html#GUID-EE47E8F7-FE2F-464A-A30E-1C8ADA201960__VALUEDESCRIPTION-F3C4DD85" title="此表描述了可以为SET_ANALYSIS_TASK_PARAMETER过程的EXECUTE_TRIGGERS参数设置的值。">表3-2</a>列出了<code class="codeph">EXECUTE_TRIGGERS</code>参数的有效值。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="tblformal" id="GUID-EE47E8F7-FE2F-464A-A30E-1C8ADA201960__VALUEDESCRIPTION-F3C4DD85">
                           <p class="titleintable">表3-2 EXECUTE_TRIGGERS参数的有效值</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="EXECUTE_TRIGGERS参数的有效值" width="100%" border="1" summary="This table describes the values that can be set for the EXECUTE_TRIGGERS parameter for the SET_ANALYSIS_TASK_PARAMETER procedure." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d4474e2317">值</th>
                                    <th align="left" valign="bottom" width="20%" id="d4474e2320">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d4474e2325" headers="d4474e2317 ">
                                       <p><code class="codeph">假</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d4474e2325 d4474e2320 ">
                                       <p>即使在TEST EXECUTE的EXECUTE_FULLDML模式下，SQL Performance Analyzer也不会执行触发器。这是默认值。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d4474e2333" headers="d4474e2317 ">
                                       <p><code class="codeph">真正</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d4474e2333 d4474e2320 ">
                                       <p>所有触发器都由SQL Performance Analyzer执行。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>以下示例显示如何将<code class="codeph">EXECUTE_TRIGGERS</code>参数的值设置为<code class="codeph">FALSE</code> ，确保SQL Performance Analyzer不执行触发器：</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SQLPA.SET_ANALYSIS_TASK_PARAMETER（task_name =&gt;'my_spa_task'， -  parameter =&gt;'EXECUTE_TRIGGERS'， -  value =&gt;'FALSE'）;</pre><div class="infoboxnotealso" id="GUID-EE47E8F7-FE2F-464A-A30E-1C8ADA201960__GUID-3BF94762-7861-42AC-9774-01058AAEE0E8">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">DBMS_SQLPA.SET_ANALYSIS_TASK_PARAMETER</code>过程的信息，请参阅<a href="../arpls/DBMS_SQLPA.html#ARPLS68371" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-7C742DB2-A1AB-44FC-8709-BC323336505B" name="GUID-7C742DB2-A1AB-44FC-8709-BC323336505B"></a><h4 id="RATUG-GUID-7C742DB2-A1AB-44FC-8709-BC323336505B" class="sect4"><span class="enumeration_section">3.3.5</span>配置分析任务中呼叫返回的日期</h4>
                  <div>
                     <p>您可以配置如何处理分析任务中引用SYSDATE的SQL语句。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-7C742DB2-A1AB-44FC-8709-BC323336505B__GUID-F98B4999-6C82-444C-8E32-25B9066F7E94">要在分析任务中通过调用SYSDATE来配置返回的日期：</p>
                        <p>设置<code class="codeph">REPLACE_SYSDATE_WITH</code>参数时，任务执行中对SYSDATE的所有调用都会返回参数指定的日期。当SPA任务的输入是SQL调整集（STS）时，可以使用此选项。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<code class="codeph">SET_ANALYSIS_TASK_PARAMETER</code>过程设置<code class="codeph">REPLACE_SYSDATE_WITH</code>参数的值。
                              </p>
                           </li>
                        </ul>
                        <p><a href="creating-an-analysis-task.html#GUID-7C742DB2-A1AB-44FC-8709-BC323336505B__VALUEDESCRIPTION-F3C7B630" title="此表描述了可以为SET_ANALYSIS_TASK_PARAMETER过程的REPLACE_SYSDATE_WITH参数设置的值。">表3-3</a>列出了<code class="codeph">REPLACE_SYSDATE_WITH</code>参数的有效值。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="tblformal" id="GUID-7C742DB2-A1AB-44FC-8709-BC323336505B__VALUEDESCRIPTION-F3C7B630">
                           <p class="titleintable">表3-3 REPLACE_SYSDATE_WITH参数的有效值</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REPLACE_SYSDATE_WITH参数的有效值" width="100%" border="1" summary="This table describes the values that can be set for the REPLACE_SYSDATE_WITH parameter for the SET_ANALYSIS_TASK_PARAMETER procedure." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d4474e2489">值</th>
                                    <th align="left" valign="bottom" id="d4474e2492">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d4474e2497" headers="d4474e2489 ">
                                       <p>CURRENT_SYSDATE</p>
                                    </td>
                                    <td align="left" valign="top" headers="d4474e2497 d4474e2492 ">
                                       <p>在任务执行期间对SYSDATE的所有调用都返回当前的SYSDATE。这是默认值。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d4474e2504" headers="d4474e2489 ">
                                       <p>SQLSET_SYSDATE</p>
                                    </td>
                                    <td align="left" valign="top" headers="d4474e2504 d4474e2492 ">
                                       <p>对于每个具有SYSDATE调用的SQL语句，SQL Performance Analyzer将使用该SQL语句的<code class="codeph">DBA_SQLSET_STATEMENTS</code>视图的<code class="codeph">LAST_EXEC_START_TIME</code>列中的值替换其值。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnote" id="GUID-7C742DB2-A1AB-44FC-8709-BC323336505B__GUID-C3A01F7D-841C-4851-910B-7BF1549CC86D">
                           <p class="notep1">注意：</p>
                           <p>此参数的设置不会影响对SQL Performance Analyzer任务执行之外的SYSDATE的调用。</p>
                        </div>
                        <p>以下示例显示如何将<code class="codeph">REPLACE_SYSDATE_WITH</code>参数的值设置为<code class="codeph">SQLSET_SYSDATE</code> ，确保在任务执行期间对SYDATE的调用返回SQL调优集中的SYSDATE。
                        </p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SQLPA.SET_ANALYSIS_TASK_PARAMETER（task_name =&gt;'my_spa_task'， -  parameter =&gt;'REPLACE_SYSDATE_WITH'， -  value =&gt;'SQLSET_SYSDATE'）;</pre><div class="infoboxnotealso" id="GUID-7C742DB2-A1AB-44FC-8709-BC323336505B__GUID-C64BB513-83EB-4A5E-991B-FB944E069EAF">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">DBMS_SQLPA.SET_ANALYSIS_TASK_PARAMETER</code>过程的信息，请参阅<a href="../arpls/DBMS_SQLPA.html#ARPLS68371" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">DBA_SQLSET_STATEMENTS</code>视图的更多信息，请<code class="codeph">DBA_SQLSET_STATEMENTS</code> <a href="../refrn/DBA_SQLSET_STATEMENTS.html#REFRN-GUID-25025608-4761-4794-8D1A-5A4E415C43C9" target="_blank"><span><cite>Oracle数据库参考</cite></span></a> 。
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-952CD60A-6673-468E-BE87-ABC0E41D1201" name="GUID-952CD60A-6673-468E-BE87-ABC0E41D1201"></a><h4 id="RATUG-GUID-952CD60A-6673-468E-BE87-ABC0E41D1201" class="sect4"><span class="enumeration_section">3.3.6</span>配置分析任务获取的行数</h4>
                  <div>
                     <p>您可以配置分析任务中为SQL语句提取的行数。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-952CD60A-6673-468E-BE87-ABC0E41D1201__GUID-52237BC5-D68F-49E1-A523-1EA15097AB79">要配置分析任务中要提取的行数，请执行以下操作：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<code class="codeph">SET_ANALYSIS_TASK_PARAMETER</code>过程设置<code class="codeph">NUM_ROWS_TO_FETCH</code>参数的值。
                              </p>
                              <p><a href="creating-an-analysis-task.html#GUID-952CD60A-6673-468E-BE87-ABC0E41D1201__VALUEDESCRIPTION-F3CB21C0" title="此表描述了可以为SET_ANALYSIS_TASK_PARAMETER过程的NUM_ROWS_TO_FETCH参数设置的值。">表3-4</a>列出了<code class="codeph">NUM_ROWS_TO_FETCH</code>参数的有效值。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="tblformal" id="GUID-952CD60A-6673-468E-BE87-ABC0E41D1201__VALUEDESCRIPTION-F3CB21C0">
                           <p class="titleintable">表3-4 NUM_ROWS_TO_FETCH参数的有效值</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="NUM_ROWS_TO_FETCH参数的有效值" width="100%" border="1" summary="This table describes the values that can be set for the NUM_ROWS_TO_FETCH parameter for the SET_ANALYSIS_TASK_PARAMETER procedure." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d4474e2673">值</th>
                                    <th align="left" valign="bottom" id="d4474e2676">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d4474e2681" headers="d4474e2673 ">
                                       <p>ALL_ROWS</p>
                                    </td>
                                    <td align="left" valign="top" headers="d4474e2681 d4474e2676 ">
                                       <p>获取SQL的所有行。这是默认值。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d4474e2688" headers="d4474e2673 ">
                                       <p>汽车</p>
                                    </td>
                                    <td align="left" valign="top" headers="d4474e2688 d4474e2676 ">
                                       <p>结果行数使用SQL调优集中捕获的优化器环境中的<code class="codeph">OPTIMIZER_MODE</code>参数值确定。如果<code class="codeph">OPTIMIZER_MODE</code>的值为<code class="codeph">ALL_ROWS</code> ，则将获取所有结果行。如果其值为<code class="codeph">FIRST_ROWS_</code> <span class="italic">n</span> ，则SQL Performance Analyzer将提取<span class="italic">n个</span>结果行。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d4474e2712" headers="d4474e2673 ">
                                       <p>平均</p>
                                    </td>
                                    <td align="left" valign="top" headers="d4474e2712 d4474e2676 ">
                                       <p>结果行数计算为SQL调优集中每个SQL处理的总行数与总执行次数之比。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d4474e2719" headers="d4474e2673 ">
                                       <p>有效号码</p>
                                    </td>
                                    <td align="left" valign="top" headers="d4474e2719 d4474e2676 ">
                                       <p>如果要获取的行数较少，则结果行的数量将等于指定的值，或更少。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>以下示例显示如何将<code class="codeph">NUM_ROWS_TO_FETCH</code>参数的值设置为<code class="codeph">ALL_ROWS</code> ，以便获取SQL的所有行。
                        </p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SQLPA.SET_ANALYSIS_TASK_PARAMETER（task_name =&gt;'my_spa_task'， -  parameter =&gt;'NUM_ROWS_TO_FETCH'， -  value =&gt;'ALL_ROWS'）;</pre><div class="infoboxnotealso" id="GUID-952CD60A-6673-468E-BE87-ABC0E41D1201__GUID-55A74FDE-2203-4683-9E1F-8A85F5BCCD2D">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">DBMS_SQLPA.SET_ANALYSIS_TASK_PARAMETER</code>过程的信息，请参阅<a href="../arpls/DBMS_SQLPA.html#ARPLS68371" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">OPTIMIZER_MODE</code>数据库初始化参数的详细信息，请<a href="../refrn/OPTIMIZER_MODE.html#REFRN-GUID-DE448A8A-992F-4BAB-9302-A020039641E5" target="_blank"><span><cite>参见Oracle数据库参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-ADF5573F-0ADC-46DD-9AB1-433D97856F1F" name="GUID-ADF5573F-0ADC-46DD-9AB1-433D97856F1F"></a><h4 id="RATUG-GUID-ADF5573F-0ADC-46DD-9AB1-433D97856F1F" class="sect4"><span class="enumeration_section">3.3.7</span>配置分析任务的并行度</h4>
                  <div>
                     <p>您可以设置并行度并启用并发SQL执行。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-ADF5573F-0ADC-46DD-9AB1-433D97856F1F__GUID-BAD47F16-0F5D-4BB3-B297-A38F2D744869">要为分析任务配置并行度：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<code class="codeph">SET_ANALYSIS_TASK_PARAMETER</code>过程设置<code class="codeph">TEST_EXECUTE_DOP</code>参数的值。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>下表列出了<code class="codeph">TEST_EXECUTE_DOP</code>参数的<code class="codeph">TEST_EXECUTE_DOP</code> 。
                        </p>
                        <div class="tblformal" id="GUID-ADF5573F-0ADC-46DD-9AB1-433D97856F1F__GUID-2EE820F0-12C0-4E07-830B-F7A684EB9590">
                           <p class="titleintable">表3-5 TEST_EXECUTE_DOP参数的有效值</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="TEST_EXECUTE_DOP参数的有效值" width="100%" border="1" summary="This table describes the values that can be set for the TEST_EXECUTE_DOP parameter for the SET_ANALYSIS_TASK_PARAMETER procedure." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d4474e2875">值</th>
                                    <th align="left" valign="bottom" id="d4474e2878">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d4474e2883" headers="d4474e2875 ">
                                       <p><code class="codeph">0</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d4474e2883 d4474e2878 ">
                                       <p>这是默认值。该任务是连续执行的。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d4474e2891" headers="d4474e2875 ">
                                       <p>大于或等于<code class="codeph">2</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d4474e2891 d4474e2878 ">
                                       <p>并发执行已启用。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="p">以下示例显示如何将<code class="codeph">TEST_EXECUTE_DOP</code>参数的值设置为<code class="codeph">4</code>并启用并发执行：<pre class="oac_no_warn" dir="ltr">EXEC DBMS_SQLPA.SET_ANALYSIS_TASK_PARAMETER（task_name =&gt;'my_spa_task'， -  parameter =&gt;'TEST_EXECUTE_DOP'， -  value =&gt; 4）;</pre><div class="infoboxnote" id="GUID-ADF5573F-0ADC-46DD-9AB1-433D97856F1F__GUID-970D2C54-8A2E-4044-A062-4A41BD9A26D1">
                              <p class="notep1">注意：</p>
                              <p>只有<code class="codeph">EXPLAIN PLAN</code>和<code class="codeph">TEST EXECUTE</code>执行类型支持并发执行。
                              </p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-ADF5573F-0ADC-46DD-9AB1-433D97856F1F__GUID-65C4AE10-7AB2-4DAB-AB95-AA782974E11F">
                              <p class="notep1">也可以看看：</p>
                              <p>有关<code class="codeph">DBMS_SQLPA.SET_ANALYSIS_TASK_PARAMETER</code>过程的信息，请参阅<a href="../arpls/DBMS_SQLPA.html#ARPLS68371" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                           </div>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-34BDF1DE-2711-48E3-81D7-F1AAA8D3E08E" name="GUID-34BDF1DE-2711-48E3-81D7-F1AAA8D3E08E"></a><h4 id="RATUG-GUID-34BDF1DE-2711-48E3-81D7-F1AAA8D3E08E" class="sect4"><span class="enumeration_section">3.3.8</span>使用SQL Performance Analyzer验证SQL结果集</h4>
                  <div>
                     <p>现在，在运行两个“测试 - 执行”SQL性能分析器（SPA）试验时，支持SQL结果集的比较。</p>
                     <div class="section">
                        <p>验证SQL结果集，如果行数或值不匹配，则会将其记录在SQL Performance Analyzer报告中。SQL结果集验证由<code class="codeph">COMPARE_RESULTSET</code>参数控制。
                        </p>
                        <p><code class="codeph">SET_ANALYSIS_TASK_PARAMETER</code>过程用于设置<code class="codeph">COMPARE_RESULTSET</code>参数的值。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>下表列出了<code class="codeph">COMPARE_RESULTSET</code>参数的<code class="codeph">COMPARE_RESULTSET</code> 。
                        </p>
                        <div class="tblformal" id="GUID-34BDF1DE-2711-48E3-81D7-F1AAA8D3E08E__GUID-2E449204-EB94-4C92-AEF8-740608E0DAF5">
                           <p class="titleintable">表3-6 COMPARE_RESULTSET参数的有效值</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="COMPARE_RESULTSET参数的有效值" width="100%" border="1" summary="This table describes the values that can be set for the COMPARE_RESULTSET parameter." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d4474e3045">值</th>
                                    <th align="left" valign="bottom" width="20%" id="d4474e3048">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d4474e3053" headers="d4474e3045 ">
                                       <p><code class="codeph">真正</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d4474e3053 d4474e3048 ">
                                       <p>执行SQL结果集比较。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d4474e3061" headers="d4474e3045 ">
                                       <p><code class="codeph">假</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d4474e3061 d4474e3048 ">
                                       <p>不执行SQL结果集比较。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>以下示例显示如何将<code class="codeph">COMPARE_RESULTSET</code>参数的值设置为<code class="codeph">TRUE</code> 。</p><pre class="pre codeblock"><code>EXEC DBMS_SQLPA.SET_ANALYSIS_TASK_PARAMETER（task_name =&gt;'my_spa_task'， -  parameter =&gt;'COMPARE_RESULTSET'， -  value =&gt;'TRUE'）;</code></pre><div class="infoboxnotealso" id="GUID-34BDF1DE-2711-48E3-81D7-F1AAA8D3E08E__GUID-92B1C317-30C3-4C42-ABEE-5B4F00799A67">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">DBMS_SQLPA.SET_ANALYSIS_TASK_PARAMETER</code>过程的信息，请参阅<a href="../arpls/DBMS_SQLPA.html#ARPLS68371" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
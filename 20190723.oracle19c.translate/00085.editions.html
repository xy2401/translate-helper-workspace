<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>使用基于版本的重新定义</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Development Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Development Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-development-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-31T23:23:15-08:00"></meta>
      <meta name="dcterms.title" content="Database Development Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96334-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="schema-object-dependency.html" title="Previous" type="text/html"></link>
      <link rel="next" href="transaction-guard.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADFNS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="schema-object-dependency.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="transaction-guard.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库开发指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="advanced-part.html" property="item" typeof="WebPage"><span property="name">应用程序开发人员的高级主题</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用基于版本的重新定义</li>
            </ol>
            <a id="GUID-58DE05A0-5DEF-4791-8FA8-F04D11964906" name="GUID-58DE05A0-5DEF-4791-8FA8-F04D11964906"></a>
            
            <h2 id="ADFNS-GUID-58DE05A0-5DEF-4791-8FA8-F04D11964906" class="sect2"><span class="enumeration_chapter">27</span>使用基于版本的重新定义</h2>
         </header>
         <div class="ind">
            <div>
               <p>基于版本的重定义（EBR）允许您在应用程序使用时升级其数据库组件，从而最大限度地减少或消除停机时间。</p>
               <div class="section">
                  <p class="subhead1" id="GUID-58DE05A0-5DEF-4791-8FA8-F04D11964906__GUID-77363C49-2CF6-4AA1-8C94-624C77808DC6">话题：</p>
               </div>
               <!-- class="section" -->
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="editions.html#GUID-C213A6AA-5427-4426-80B5-D5301386253E">基于版本的重新定义概述</a></p>
                  </li>
                  <li>
                     <p><a href="editions.html#GUID-3C543B31-9BA6-421D-9791-D85866185052">版本</a></p>
                  </li>
                  <li>
                     <p><a href="editions.html#GUID-B027A882-3848-4DA1-ABF3-6F9F0F7EFB0B">编辑视图</a></p>
                  </li>
                  <li>
                     <p><a href="editions.html#GUID-474231E0-F8D7-4E39-86F5-BCC52FACEB37">Crossedition触发器</a></p>
                  </li>
                  <li>
                     <p><a href="editions.html#GUID-1B0311B5-CBC7-43E2-9EA0-37DE2E670508">显示有关EBR功能的信息</a></p>
                  </li>
                  <li>
                     <p><a href="editions.html#GUID-B14D3C67-5871-41CF-8645-185139347CCC" title="您可以使用触发器升级现有应用程序。">使用EBR升级应用程序</a></p>
                  </li>
               </ul>
            </div>
            <div class="sect2"><a id="GUID-C213A6AA-5427-4426-80B5-D5301386253E" name="GUID-C213A6AA-5427-4426-80B5-D5301386253E"></a><h3 id="ADFNS-GUID-C213A6AA-5427-4426-80B5-D5301386253E" class="sect3">基于版本的重新定义概述</h3>
               <div>
                  <p>要在应用程序正在使用时升级该应用程序，您必须复制包含该应用程序的数据库组件的数据库对象，并单独重新定义复制的对象。您的更改不会影响应用程序的用户 - 他们可以继续运行未更改的应用程序。如果您确定更改正确，则可以将升级的应用程序提供给所有用户。</p>
                  <p>使用EBR意味着使用其一个或多个组件功能。您使用的功能和停机时间取决于以下因素：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您重新定义了哪种数据库对象</p>
                     </li>
                     <li>
                        <p>在重新定义数据库对象时，数据库对象必须具有多大的可用性</p>
                     </li>
                     <li>
                        <p>是否为某些用户提供升级的应用程序，而其他用户继续使用旧版本的应用程序</p>
                     </li>
                  </ul>
                  <p>您始终使用<span class="bold">版本</span>功能复制数据库对象并单独重新定义复制的对象;这就是为什么本章描述的在线升级应用程序的过程称为基于版本的重定义（EBR）。
                  </p>
                  <p>如果要重新定义的每个对象<span class="bold">都已编辑</span> （在<a href="editions.html#GUID-F0D940E0-618D-4656-982E-1C5E49FCCD42">版本化和非编辑对象中</a>定义），则该版本是您使用的唯一功能。
                  </p>
                  <p>表不是编辑对象。如果更改一个或多个表的结构，则还可以使用<span class="bold">版本控制视图</span>功能。
                  </p>
                  <p>如果其他用户在更改其结构时必须能够更改表中的数据，那么您还可以使用<span class="bold">前向交叉触发器</span> 。如果升级前和升级后的应用程序将同时正常使用（ <span class="bold">热翻转</span> ），那么您还使用<span class="bold">反向交叉触发器</span> 。Crossedition触发器不是应用程序的永久部分 - 当所有用户使用升级后应用程序时，您将删除它们。
                  </p>
                  <p>当应用程序在其他版本中运行时，您可以在一个版本中对应用程序执行的EBR操作是<span class="bold">实时操作</span> 。
                  </p>
               </div>
            </div><a id="ADFNS1279"></a><a id="ADFNS020"></a><a id="ADFNS1278"></a><a id="ADFNS0201"></a><div class="props_rev_3"><a id="GUID-3C543B31-9BA6-421D-9791-D85866185052" name="GUID-3C543B31-9BA6-421D-9791-D85866185052"></a><h3 id="ADFNS-GUID-3C543B31-9BA6-421D-9791-D85866185052" class="sect3">版本</h3>
               <div>
                  <p>版本是非抄本对象;因此，他们没有所有者。版本在单个命名空间中创建，多个版本可以在数据库中共存。</p>
                  <p>数据库必须至少有一个版本。每个新创建或升级的Oracle数据库都以一个名为<code class="codeph">ora$base</code>版本开头。
                  </p>
                  <div class="infoboxnote" id="GUID-3C543B31-9BA6-421D-9791-D85866185052__GUID-039969AF-3D59-49AF-809E-E384F9A6D80C">
                     <p class="notep1">注意：</p>
                     <p>在多租户容器数据库（CDB）中，版本，编辑视图或交叉触发器的范围是可在其中创建功能的可插拔数据库（PDB）。在非CDB中，每个功能的范围都是整个数据库。</p>
                  </div>
                  <div class="section">
                     <p class="subhead2" id="GUID-3C543B31-9BA6-421D-9791-D85866185052__GUID-0DFB7B26-D4C5-4B34-8FA7-E01E5DEF9BE9">话题：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="editions.html#GUID-F0D940E0-618D-4656-982E-1C5E49FCCD42">版本和非编辑对象</a></p>
                        </li>
                        <li>
                           <p><a href="editions.html#GUID-581CE195-E9FD-421D-A47F-8DF573B0A1AC">创建一个版本</a></p>
                        </li>
                        <li>
                           <p><a href="editions.html#GUID-6E30D1F1-AD6D-44CB-AF7B-714FB251E7DC">版本化对象和复制更改</a></p>
                        </li>
                        <li>
                           <p><a href="editions.html#GUID-76045F34-B7BB-45DB-AE35-689CF4F6759A">为某些用户提供版本</a></p>
                        </li>
                        <li>
                           <p><a href="editions.html#GUID-B9A89ED5-7DC8-4B49-A38D-5B8CA94E7459">为所有用户提供版本</a></p>
                        </li>
                        <li>
                           <p><a href="editions.html#GUID-4FDF6CA7-AA70-4DAC-A5F6-B75CF4AB383C">当前版和会话版</a></p>
                        </li>
                        <li>
                           <p><a href="editions.html#GUID-023BBAD2-16DB-4E08-A4AF-183633B211CD">退休一个版本</a></p>
                        </li>
                        <li>
                           <p><a href="editions.html#GUID-E6DBE175-2598-430F-9D0A-AB22CAE7DDDA">删除版本</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-3C543B31-9BA6-421D-9791-D85866185052__FORINFORMATIONABOUTCDBSANDPDBSSEEOR-CB583112">
                        <p class="notep1">也可以看看：</p>
                        <p>有关CDB和PDB的信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN13506" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS1280"></a><a id="ADFNS99923"></a><div class="props_rev_3"><a id="GUID-F0D940E0-618D-4656-982E-1C5E49FCCD42" name="GUID-F0D940E0-618D-4656-982E-1C5E49FCCD42"></a><h4 id="ADFNS-GUID-F0D940E0-618D-4656-982E-1C5E49FCCD42" class="sect4">版本和非编辑对象</h4>
                  <div>
                     <div class="infoboxnote" id="GUID-F0D940E0-618D-4656-982E-1C5E49FCCD42__GUID-E82BF57C-8A6D-45F1-B718-5019D93C9C9E">
                        <p class="notep1">注意：</p>
                        <p><span class="bold">用户</span>和<span class="bold">架构</span>这两个术语是同义词。架构对象的<span class="bold">所有者</span>是拥有它的用户/架构。
                        </p>
                     </div>
                     <p>已<span class="bold">编辑的对象</span>具有可在其所有者中进行<code class="codeph">EDITIONABLE</code>的架构对象类型以及<code class="codeph">EDITIONABLE</code>属性。版本具有自己的已编辑对象副本，并且该版本只能看到该副本。
                     </p>
                     <p>非<span class="bold">专用对象</span>具有在其所有者中不可编辑的模式对象类型或<code class="codeph">NONEDITIONABLE</code>属性。版本不能拥有自己的非专用对象副本。所有版本都可以看到非专用对象。
                     </p>
                     <p>一个对象<span class="bold">可能editioned</span>如果启用版本其在其所有者类型将使其成为editioned对象。
                     </p>
                     <p>已编辑的对象同时属于架构和版本，并由其<code class="codeph">OBJECT_NAME</code> ， <code class="codeph">OWNER</code>和<code class="codeph">EDITION_NAME</code>唯一标识。非专用对象仅属于架构，并由其<code class="codeph">OBJECT_NAME</code>唯一标识， <code class="codeph">OWNER</code> -its <code class="codeph">EDITION_NAME</code>为<code class="codeph">NULL</code> 。 （严格地说，对象的<code class="codeph">NAMESPACE</code>也需要唯一标识对象，但是您可以忽略这一事实，因为任何隐式或显式引用该对象的语句都会指定其<code class="codeph">NAMESPACE</code> 。）
                     </p>
                     <p>您可以使用静态数据字典视图<code class="codeph">*_OBJECTS</code>和<code class="codeph">*_OBJECTS_AE</code>显示对象的<code class="codeph">OBJECT_NAME</code> ， <code class="codeph">OWNER</code>和<code class="codeph">EDITION_NAME</code> 。</p>
                     <p>您无需知道对象的<code class="codeph">EDITION_NAME</code>即可引用该对象（如果您确实知道它，则无法指定它）。引用的上下文隐式指定了版本。如果上下文是数据定义语言（DDL）语句，则该版本是发出该命令的会话的当前版本。如果上下文是源代码，则编辑是对象实际的版本。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-F0D940E0-618D-4656-982E-1C5E49FCCD42__GUID-B7749254-2832-4C91-A7B1-A235A4F75B05">话题：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="editions.html#GUID-42FA041C-5C7D-4C33-B1F8-188B2C784121">版本化和非编辑对象的名称解析</a></p>
                           </li>
                           <li>
                              <p><a href="editions.html#GUID-489F83FF-A86D-47BE-9B28-952E076C3874">可以依赖于编辑对象的非编辑对象</a></p>
                           </li>
                           <li>
                              <p><a href="editions.html#GUID-38E0AA62-BC3D-47E5-AD30-A008EE62A3A9">可编辑和非可编程模式对象类型</a></p>
                           </li>
                           <li>
                              <p><a href="editions.html#GUID-FF93CEED-D23A-48D3-8FD7-5B0FB22024DF">为用户启用版本</a></p>
                           </li>
                           <li>
                              <p><a href="editions.html#GUID-8329DD56-528C-4848-AEE5-EC6640A4B228">适用性和不可接受的属性</a></p>
                           </li>
                           <li>
                              <p><a href="editions.html#GUID-156B1E2C-1543-4F2F-BCF1-A9BA86353D59">版本化对象的规则</a></p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-F0D940E0-618D-4656-982E-1C5E49FCCD42__NOTE-13102-CB585E07">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="editions.html#GUID-FF93CEED-D23A-48D3-8FD7-5B0FB22024DF">为用户启用版本</a></p>
                              </li>
                              <li>
                                 <p><a href="editions.html#GUID-4FDF6CA7-AA70-4DAC-A5F6-B75CF4AB383C">当前版和会话版</a></p>
                              </li>
                              <li>
                                 <p><a href="editions.html#GUID-6E30D1F1-AD6D-44CB-AF7B-714FB251E7DC">版本化对象和复制更改</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADFNS1036"></a><div class="props_rev_3"><a id="GUID-42FA041C-5C7D-4C33-B1F8-188B2C784121" name="GUID-42FA041C-5C7D-4C33-B1F8-188B2C784121"></a><h5 id="ADFNS-GUID-42FA041C-5C7D-4C33-B1F8-188B2C784121" class="sect5">版本化和非编辑对象的名称解析</h5>
                     <div>
                        <p>为了尝试解析对象名称，Oracle数据库使用<a href="schema-object-dependency.html#GUID-46C57DB9-847E-4709-9587-0673CCC5E5F0">模式范围</a>中的<a href="schema-object-dependency.html#GUID-46C57DB9-847E-4709-9587-0673CCC5E5F0">名称解析中</a>描述的过程。要使过程成功，对象名称的所有部分必须在当前版本中可见。
                        </p>
                        <p>在对已编辑对象进行名称解析期间，当前版本中的已编辑对象和非加工对象都是可见的。</p>
                        <p>在非分区对象的名称解析期间，只有非加工对象可见。因此，如果您尝试创建引用已编辑对象的非授权对象（在<a href="editions.html#GUID-489F83FF-A86D-47BE-9B28-952E076C3874">可依赖于版本化对象的非编辑对象中</a>描述的情况除外），则创建将失败并显示错误。
                        </p>
                        <p>更改引用的已编辑对象时，其所有依赖项（直接和间接）将变为无效。引用无效对象时，数据库会尝试验证该对象。</p>
                        <div class="infoboxnotealso" id="GUID-42FA041C-5C7D-4C33-B1F8-188B2C784121__GUID-382ECCC7-8DB0-4E8F-B3A6-46E165531632">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="editions.html#GUID-4FDF6CA7-AA70-4DAC-A5F6-B75CF4AB383C">当前版和会话版</a></p>
                              </li>
                              <li>
                                 <p><a href="schema-object-dependency.html#GUID-488AF7D9-EDEB-4589-A503-FDE31CE55B60">了解架构对象依赖关系</a> ， <a href="schema-object-dependency.html#GUID-488AF7D9-EDEB-4589-A503-FDE31CE55B60">了解有关架构对象之间依赖关系</a>的一般信息，包括失效，重新验证和名称解析</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="ADFNS1325"></a><a id="ADFNS1324"></a><div class="props_rev_3"><a id="GUID-489F83FF-A86D-47BE-9B28-952E076C3874" name="GUID-489F83FF-A86D-47BE-9B28-952E076C3874"></a><h5 id="ADFNS-GUID-489F83FF-A86D-47BE-9B28-952E076C3874" class="sect5">可以依赖于编辑对象的非编辑对象</h5>
                     <div>
                        <p>通常，非编辑对象不能依赖于编辑的对象，因为在名称解析期间编辑的对象是不可见的。但是，如果未编辑的对象指定了在名称解析期间搜索已编辑对象的<span class="bold">编辑</span> - <span class="bold">评估版</span> - 那么它<span class="italic">可以</span>依赖于编辑的对象。要指定评估版，非授权对象必须是以下之一：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>物化视图</p>
                           </li>
                           <li>
                              <p>虚拟专栏</p>
                           </li>
                        </ul>
                        <div class="section">
                           <p class="subhead3" id="GUID-489F83FF-A86D-47BE-9B28-952E076C3874__GUID-93C4FC90-BF88-4FC6-ABD3-290953D1C845">话题：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="editions.html#GUID-7EE9F3DE-0CA8-4F9A-9100-3A47EE28A4DB">物化观点</a></p>
                              </li>
                              <li>
                                 <p><a href="editions.html#GUID-731FE9F2-CBC9-46E1-9129-A163C26669CB">虚拟列</a></p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div><a id="ADFNS1326"></a><div class="props_rev_3"><a id="GUID-7EE9F3DE-0CA8-4F9A-9100-3A47EE28A4DB" name="GUID-7EE9F3DE-0CA8-4F9A-9100-3A47EE28A4DB"></a><h6 id="ADFNS-GUID-7EE9F3DE-0CA8-4F9A-9100-3A47EE28A4DB" class="sect6">物化观点</h6>
                        <div>
                           <p>物化视图是一个非专用对象，可以指定评估版本，从而使其能够依赖于已编辑的对象。依赖于已编辑对象的物化视图可能仅适用于您在<span class="italic"><code class="codeph">query_rewrite_clause</code></span>指定的特定版本的版本中进行查询重写。
                           </p>
                           <p>用于创建物化视图的简化语法是：</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW [ <span class="italic">schema</span> 。] <span class="italic">materialized_view</span> <span class="italic">other_clauses</span> [ <span class="italic">evaluation_edition_clause</span> ] [ <span class="italic">query_rewrite_clause</span> ] AS <span class="italic">子查询</span>
</pre><p>其中<span class="italic"><code class="codeph">evaluation_edition_clause</code></span>是：</p><pre class="oac_no_warn" dir="ltr">使用{CURRENT EDITION |评估EDITION <span class="italic">版</span> | NULL EDITION}</pre><p>而<span class="italic"><code class="codeph">query_rewrite_clause</code></span>是：</p><pre class="oac_no_warn" dir="ltr">{DISABLE | ENABLE} QUERY REWRITE [ <span class="italic">unavailableable_before_clause</span> ] [ <span class="italic">unavailableable_beginning_clause</span> ]</pre><p>其中<span class="italic"><code class="codeph">unusable_before_clause</code></span>是：</p><pre class="oac_no_warn" dir="ltr">{CURRENT EDITION |之前无法使用<span class="italic">版本</span> }</pre><p><span class="italic"><code class="codeph">unusable_beginning_clause</code></span>是：</p><pre class="oac_no_warn" dir="ltr">无法使用{当前版本| EDITION <span class="italic">版</span> | NULL EDITION}</pre><p><code class="codeph">CURRENT</code> <code class="codeph">EDITION</code>是DDL语句运行的版本。指定<code class="codeph">NULL</code> <code class="codeph">EDITION</code>相当于省略包含它的子句。如果省略<span class="italic"><code class="codeph">evaluation_edition_clause</code></span> ，然后editioned对象名称解析过程中不可见。
                           </p>
                           <p>要禁用，启用或更改评估版或不可用版本，请使用<code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>语句。
                           </p>
                           <p>要显示物化视图的评估版本和不可用版本，请使用静态数据字典视图<code class="codeph">*_MVIEWS</code> 。
                           </p>
                           <p>删除评估版会使实体化视图无效。删除物化视图可用的版本不会使实例化视图无效。</p>
                           <div class="infoboxnotealso" id="GUID-7EE9F3DE-0CA8-4F9A-9100-3A47EE28A4DB__FORTHECOMPLETESYNTAXANDSEMANTICSOFT-CB59D474">
                              <p class="notep1">也可以看看：</p>
                              <p>有关<code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>语句的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01302" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF00808" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 
                              </p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20139" target="_blank"><span class="italic">Oracle数据库参考</span></a></p>
                           </div>
                        </div>
                     </div><a id="ADFNS1328"></a><div class="props_rev_3"><a id="GUID-731FE9F2-CBC9-46E1-9129-A163C26669CB" name="GUID-731FE9F2-CBC9-46E1-9129-A163C26669CB"></a><h6 id="ADFNS-GUID-731FE9F2-CBC9-46E1-9129-A163C26669CB" class="sect6">虚拟列</h6>
                        <div>
                           <p>虚拟列（也称为“生成列”）不占用磁盘空间。数据库通过评估表达式按需生成虚拟列中的值。表达式可以调用PL / SQL函数（可以是编辑对象）。虚拟列可以指定评估版，从而使其能够依赖于调用已编辑的PL / SQL函数的表达式。</p>
                           <p>创建虚拟列的语法是：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">column</span> [ <span class="italic">datatype</span> ] [GENERATED ALWAYS] AS（ <span class="italic">column_expression</span> ）[VIRTUAL] [ <span class="italic">evaluation_edition_clause</span> ] [ <span class="italic">unusable_before_clause</span> ] [ <span class="italic">unusable_beginning_clause</span> ] [ <span class="italic">inline_constraint</span> ] ...
</pre><p>其中<span class="italic"><code class="codeph">evaluation_edition_clause</code></span>如<a href="editions.html#GUID-7EE9F3DE-0CA8-4F9A-9100-3A47EE28A4DB">物化视图中所述</a> 。
                           </p>
                           <p>数据库不保持对虚拟列调用的函数的依赖性。因此，如果删除评估版，或者虚拟列依赖于非专用函数并且函数已编辑，则以下任何一项都可能引发异常：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>试图查询虚拟列</p>
                              </li>
                              <li>
                                 <p>尝试更新包含虚拟列的行</p>
                              </li>
                              <li>
                                 <p>尝试访问虚拟列的触发器</p>
                              </li>
                           </ul>
                           <p>要显示虚拟列的评估版本，请使用静态数据字典视图<code class="codeph">*_TAB_COLS</code> 。
                           </p>
                           <div class="infoboxnotealso" id="GUID-731FE9F2-CBC9-46E1-9129-A163C26669CB__GUID-6E90BA3F-1EFE-40D3-B48F-EE2B0337B9DC">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF54465" target="_blank"><span class="italic">Oracle数据库SQL语言参考，</span></a>用于获取虚拟列定义的完整语法和语义</p>
                                 </li>
                                 <li>
                                    <p>有关<code class="codeph">ALL_TAB_COLS</code>更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20276" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div>
                  </div><a id="ADFNS898"></a><div class="props_rev_3"><a id="GUID-38E0AA62-BC3D-47E5-AD30-A008EE62A3A9" name="GUID-38E0AA62-BC3D-47E5-AD30-A008EE62A3A9"></a><h5 id="ADFNS-GUID-38E0AA62-BC3D-47E5-AD30-A008EE62A3A9" class="sect5">可编辑和非可编程模式对象类型</h5>
                     <div>
                        <p>在架构对象类型可以在架构中进行编辑之前，它必须可以在数据库中进行编辑。可在数据库中编辑的模式对象类型由<code class="codeph">COMPATIBLE</code>初始化参数的值确定，并由动态性能视图<code class="codeph">V$EDITIONABLE_TYPES</code> 。
                        </p>
                        <p>如果<code class="codeph">COMPATIBLE</code>值为12或更大，则这些模式对象类型可在数据库中进行编辑：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">代名词</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">视图</code></p>
                           </li>
                           <li>
                              <p>SQL翻译配置文件</p>
                           </li>
                           <li>
                              <p>所有PL / SQL对象类型：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">功能</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">图书馆</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">PACKAGE</code>和<code class="codeph">PACKAGE</code> <code class="codeph">BODY</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">程序</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">触发</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">TYPE</code>和<code class="codeph">TYPE</code> <code class="codeph">BODY</code></p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <p>所有其他模式对象类型在数据库和每个模式中都是不可编辑的，并且该类型的对象始终是非编辑的。<code class="codeph">TABLE</code>是不可编辑的模式对象类型的示例。表始终是非专用对象。
                        </p>
                        <p>如果模式对象类型在数据库中是可编辑的，那么它可以在模式中进行编辑。</p>
                        <div class="infoboxnotealso" id="GUID-38E0AA62-BC3D-47E5-AD30-A008EE62A3A9__NOTE-137-CB5AEC29">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">COMPATIBLE</code>初始化参数的详细信息，请<code class="codeph">COMPATIBLE</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN11112" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">V$EDITIONABLE_TYPES</code>更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN30660" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                              </li>
                              <li>
                                 <p><a href="editions.html#GUID-FF93CEED-D23A-48D3-8FD7-5B0FB22024DF">为用户启用版本</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="ADFNS1281"></a><a id="ADFNS99878"></a><div class="props_rev_3"><a id="GUID-FF93CEED-D23A-48D3-8FD7-5B0FB22024DF" name="GUID-FF93CEED-D23A-48D3-8FD7-5B0FB22024DF"></a><h5 id="ADFNS-GUID-FF93CEED-D23A-48D3-8FD7-5B0FB22024DF" class="sect5">为用户启用版本</h5>
                     <div>
                        <div class="section">
                           <div class="infoboxnote" id="GUID-FF93CEED-D23A-48D3-8FD7-5B0FB22024DF__GUID-52BFDABF-53F5-402E-BC56-A3534E8A5CAE">
                              <p class="notep1">注意：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>启用版本不是实时操作。</p>
                                 </li>
                                 <li>
                                    <p>当数据库从版本11.2升级到版本12.1时，在升级后数据库中为版本启用的用户将在升级后数据库中启用版本，并且默认架构对象类型可在其架构中进行编辑。静态数据字典视图<code class="codeph">DBA_EDITIONED_TYPES</code>显示默认模式对象类型。未在升级前数据库中启用版本的用户未在升级后数据库中启用版本，并且在其架构中不可编辑任何架构对象类型。
                                    </p>
                                 </li>
                                 <li>
                                    <p>要查看已启用版本的用户，请参阅静态数据字典视图<code class="codeph">DBA_USERS</code>或<code class="codeph">USER_USERS</code>的<code class="codeph">EDITIONS_ENABLED</code>列。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <p>要为用户启用版本，请使用<code class="codeph">CREATE</code> <code class="codeph">USER</code>或<code class="codeph">ALTER</code> <code class="codeph">USER</code>语句的<code class="codeph">ENABLE</code> <code class="codeph">EDITIONS</code>子句。
                           </p>
                           <p>使用<code class="codeph">ALTER</code> <code class="codeph">USER</code>语句，您可以指定在模式中可编辑的模式对象类型：</p><pre class="oac_no_warn" dir="ltr">ALTER USER <span class="italic">用户</span> ENABLE EDITIONS [FOR <span class="italic">type</span> [， <span class="italic">type</span> ] ...]</pre><p>尽管可以在数据库中进行编辑，但您在<code class="codeph">FOR</code>列表中省略的任何类型在模式中都是不可编辑的。（如果某个类型在数据库中不可用，那么在每个模式中它都是不可编辑的。）
                           </p>
                           <p>如果省略<code class="codeph">ALTER</code> <code class="codeph">USER</code>语句中的<code class="codeph">FOR</code>列表，或使用<code class="codeph">CREATE</code> <code class="codeph">USER</code>语句为用户启用版本，则模式中可编辑的类型是静态数据字典视图<code class="codeph">DBA_EDITIONED_TYPES</code>为该模式显示的<code class="codeph">DBA_EDITIONED_TYPES</code> （在<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN23867" target="_blank"><span class="italic">Oracle数据库参考</span></a> ）。
                           </p>
                           <p>启用版本具有追溯性和不可逆转性。为用户启用版本时，该用户将永久启用版本。在架构中为架构对象类型启用版本时，该类型将在该架构中永久启用版本。启用版本的用户拥有或将拥有的每个对象如果其类型在架构中可编辑且具有<code class="codeph">EDITIONABLE</code>属性，则成为已编辑的<code class="codeph">EDITIONABLE</code> 。有关<code class="codeph">EDITIONABLE</code>属性的信息，请参阅<a href="editions.html#GUID-8329DD56-528C-4848-AEE5-EC6640A4B228">版本和不可用的属性</a> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-FF93CEED-D23A-48D3-8FD7-5B0FB22024DF__GUID-7370C2EF-5308-4D7C-A78E-6260707F4077">话题：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="editions.html#GUID-93114A16-ED9E-44C0-B027-D7E9CA208E1D">具有非专属受抚养人的潜在版本对象</a></p>
                              </li>
                              <li>
                                 <p><a href="editions.html#GUID-91AC1B6E-4D95-4A13-B8F8-C199D8551DA6">无法启用版本的用户</a></p>
                              </li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-FF93CEED-D23A-48D3-8FD7-5B0FB22024DF__GUID-DCA53233-F3FB-41F3-A3E6-3A37EEFA5020">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="italic">Oracle Database SQL语言参考</span> ，了解<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01503" target="_blank"><code class="codeph">CREATE</code> <code class="codeph">USER</code></a>和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01103" target="_blank"><code class="codeph">ALTER</code> <code class="codeph">USER</code></a>语句的完整语法和语义</p>
                              <p>有关<code class="codeph">DBA_EDITIONED_TYPES</code>详细信息，请<code class="codeph">DBA_EDITIONED_TYPES</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN23867" target="_blank"><span class="italic">Oracle数据库参考</span></a></p>
                              <p>有关<code class="codeph">DBA_USERS</code>更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN23302" target="_blank"><span class="italic">参见Oracle数据库参考</span></a> 
                              </p>
                              <p>有关<code class="codeph">USER_USERS</code>更多信息， <code class="codeph">USER_USERS</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN26302" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div><a id="ADFNS1282"></a><div class="props_rev_3"><a id="GUID-93114A16-ED9E-44C0-B027-D7E9CA208E1D" name="GUID-93114A16-ED9E-44C0-B027-D7E9CA208E1D"></a><h6 id="ADFNS-GUID-93114A16-ED9E-44C0-B027-D7E9CA208E1D" class="sect6">具有非专属受抚养人的潜在版本对象</h6>
                        <div>
                           <p>如果潜在的已编辑对象具有未经过编辑的从属对象，则只有在满足以下条件之一时，才能为可能已编辑的对象的所有者启用版本：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>为潜在版本的对象的所有者启用版本将导致未编辑的从属版本被编辑。</p>
                              </li>
                              <li>
                                 <p>您指定<code class="codeph">FORCE</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER USER <span class="italic">用户</span> ENABLE EDITIONS [FOR <span class="italic">type</span> [， <span class="italic">type</span> ] ...] <span class="bold">FORCE</span> ;</pre><p>上述语句为指定用户启用版本，并使编辑对象的非编辑依赖项无效。</p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-93114A16-ED9E-44C0-B027-D7E9CA208E1D__GUID-4744EFAB-5B55-44AB-8F42-1C7EE03F3A4C">
                              <p class="notep1">注意：</p>
                              <p>如果前面的语句使包含抽象数据类型（ADT）的非授权从属对象无效，并且删除包含无效对象所依赖的已编辑对象的版本，则无法重新编译无效对象。因此，对象仍然无效。</p>
                           </div>
                           <p><code class="codeph">FORCE</code>在以下情况下很有用：您必须为用户<code class="codeph">A</code>和<code class="codeph">B</code>启用版本。用户<code class="codeph">A</code>拥有可能已编辑的对象<code class="codeph">a1</code>和<code class="codeph">a2</code> 。用户<code class="codeph">B</code>拥有可能已编辑的对象<code class="codeph">b1</code>和<code class="codeph">b2</code> 。对象<code class="codeph">a1</code>取决于对象<code class="codeph">b1</code> 。对象<code class="codeph">b2</code>取决于对象<code class="codeph">a2</code> 。版本 - 使用户<code class="codeph">A</code>和<code class="codeph">B</code>像这样：</p>
                           <ol>
                              <li>
                                 <p>使用<code class="codeph">FORCE</code> ，为用户<code class="codeph">A</code>启用版本：</p><pre class="oac_no_warn" dir="ltr">更改用户A ENABLE版本强制;</pre><p>现在<code class="codeph">a1</code>和<code class="codeph">a2</code>是编辑对象，非编辑对象<code class="codeph">b2</code> （取决于<code class="codeph">a2</code> ）无效。
                                 </p>
                              </li>
                              <li>
                                 <p>为用户<code class="codeph">B</code>启用版本：</p><pre class="oac_no_warn" dir="ltr">ALTER USER B ENABLE EDITIONS;</pre><p>现在<code class="codeph">b1</code>和<code class="codeph">b2</code>是编辑对象;但是， <code class="codeph">b2</code>仍然无效。
                                 </p>
                              </li>
                              <li>
                                 <p>使用带有<code class="codeph">COMPILE</code>的相应<code class="codeph">ALTER</code>语句重新编译<code class="codeph">b2</code> 。对于PL / SQL对象，还要指定<code class="codeph">REUSE</code> <code class="codeph">SETTINGS</code> 。</p>
                                 <p>例如，如果<code class="codeph">b2</code>是一个过程，请使用以下语句：</p><pre class="oac_no_warn" dir="ltr">更改程序b2编译重新设置</pre></li>
                           </ol>
                           <p>在以下情况下不需要<code class="codeph">FORCE</code> ：您必须启用版本 - 启用用户<code class="codeph">C</code> ，该用户<code class="codeph">C</code>拥有可能已编辑的对象<code class="codeph">c1</code> 。对象<code class="codeph">c1</code>具有从属<code class="codeph">d1</code> ，用户<code class="codeph">D</code>拥有的潜在编辑对象。用户<code class="codeph">D</code>拥有可能由<code class="codeph">C</code>拥有的家属的潜在版本对象。如果您首先启用<code class="codeph">D</code>版本，使<code class="codeph">d1</code>成为编辑对象，则可以在不违反未编辑对象不依赖于编辑对象的规则的情况下启用<code class="codeph">C</code>版本。
                           </p>
                           <div class="infoboxnotealso" id="GUID-93114A16-ED9E-44C0-B027-D7E9CA208E1D__NOTE-137-CB5C9384">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>有关PL / SQL对象的<code class="codeph">ALTER</code>语句的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS99974" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                                 </li>
                                 <li>
                                    <p>有关SQL对象的<code class="codeph">ALTER</code>语句的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF008" target="_blank"><span class="italic">参见“Oracle数据库SQL语言参考</span></a> ”</p>
                                 </li>
                                 <li>
                                    <p><a href="schema-object-dependency.html#GUID-AEC8DF50-2AC2-4697-8CA9-F13108FBB810">有关从属对象失效的</a>信息<a href="schema-object-dependency.html#GUID-AEC8DF50-2AC2-4697-8CA9-F13108FBB810">，从属对象</a>无效</p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div><a id="ADFNS1283"></a><div class="props_rev_3"><a id="GUID-91AC1B6E-4D95-4A13-B8F8-C199D8551DA6" name="GUID-91AC1B6E-4D95-4A13-B8F8-C199D8551DA6"></a><h6 id="ADFNS-GUID-91AC1B6E-4D95-4A13-B8F8-C199D8551DA6" class="sect6">无法启用版本的用户</h6>
                        <div>
                           <p>您无法为这些用户启用版本：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>Oracle维护的用户</p>
                                 <p>对于Oracle维护的用户，* _USERS视图中ORACLE_MAINTAINED列的值为Y.</p>
                              </li>
                              <li>
                                 <p>CDB中的普通用户</p>
                              </li>
                              <li>
                                 <p>拥有一个或多个演进ADT的用户。</p>
                                 <p>试图这样做会导致错误ORA-38820。如果ADT没有表依赖项，则可以使用<code class="codeph">ALTER</code> <code class="codeph">TYPE</code> <code class="codeph">RESET</code>语句将其版本重置为1，以便不再将其视为进化。（将ADT的版本重置为1会使其依赖项无效。）
                                 </p>
                              </li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-91AC1B6E-4D95-4A13-B8F8-C199D8551DA6__NOTE-134-CB5CE743">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>有关CDB中常见用户的信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN13508" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                                 </li>
                                 <li>
                                    <p>有关<code class="codeph">ALTER</code> <code class="codeph">TYPE</code> <code class="codeph">RESET</code>语句语法的<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS99995" target="_blank"><span class="italic">Oracle Database PL / SQL语言参考</span></a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div>
                  </div><a id="ADFNS1285"></a><a id="ADFNS1284"></a><div class="props_rev_3"><a id="GUID-8329DD56-528C-4848-AEE5-EC6640A4B228" name="GUID-8329DD56-528C-4848-AEE5-EC6640A4B228"></a><h5 id="ADFNS-GUID-8329DD56-528C-4848-AEE5-EC6640A4B228" class="sect5">适用性和不可接受的属性</h5>
                     <div>
                        <div class="infoboxnote" id="GUID-8329DD56-528C-4848-AEE5-EC6640A4B228__GUID-5B070913-81FC-4D1A-A038-C4A03A042156">
                           <p class="notep1">注意：</p>
                           <p>当数据库从版本11.2升级到版本12.1时，用户创建的架构中的对象将获得<code class="codeph">EDITIONABLE</code>属性，而公共同义词将获得<code class="codeph">NONEDITIONABLE</code>属性。
                           </p>
                        </div>
                        <p>可以在数据库中编辑的架构对象类型的<code class="codeph">CREATE</code>和<code class="codeph">ALTER</code>语句允许您指定要创建或更改的对象是“可<code class="codeph">EDITIONABLE</code>或“ <code class="codeph">NONEDITIONABLE</code> 。</p>
                        <p><code class="codeph">DBMS_SQL_TRANSLATOR.CREATE_PROFILE</code>过程允许您指定要创建的SQL转换配置文件是“可<code class="codeph">EDITIONABLE</code>或“ <code class="codeph">NONEDITIONABLE</code> 。</p>
                        <p>看哪些对象是<code class="codeph">EDITIONABLE</code> ，请参阅<code class="codeph">EDITIONABLE</code>静态数据字典视图的列<code class="codeph">*_OBJECTS</code>或<code class="codeph">*_OBJECTS_AE</code> 。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-8329DD56-528C-4848-AEE5-EC6640A4B228__GUID-6927AC8D-1596-4949-9E11-2A67C88DD987">话题：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="editions.html#GUID-008D6CB5-53C6-4920-879C-4DECA6405304">创建新的可设置和不可编辑的对象</a></p>
                              </li>
                              <li>
                                 <p><a href="editions.html#GUID-4B118A0F-60D8-4F38-99EF-F7645037CA21">替换或更改可设置和不可编辑的对象</a></p>
                              </li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-8329DD56-528C-4848-AEE5-EC6640A4B228__GUID-0B1A2F9C-4E2D-4C3C-BC8E-6FB88B5E04CA">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS99979" target="_blank"><span class="italic">Oracle Database PL / SQL语言参考</span></a> ，用于PL / SQL模式对象的<code class="codeph">CREATE</code>和<code class="codeph">ALTER</code>语句的语法和语义</p>
                                 </li>
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF-GUID-049B7AE8-11E1-4110-B3E4-D117907D77AC" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> ，用于SQL模式对象的<code class="codeph">CREATE</code>和<code class="codeph">ALTER</code>语句的语法和语义</p>
                                 </li>
                                 <li>
                                    <p>有关<code class="codeph">DBMS_SQL_TRANSLATOR.CREATE_PROFILE</code>过程的信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS73547" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                                 </li>
                                 <li>
                                    <p>有关<code class="codeph">*_OBJECTS</code>更多信息，请<a href="../refrn/ALL_OBJECTS.html#REFRN20146" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                                 </li>
                                 <li>
                                    <p>有关<code class="codeph">*_OBJECTS_AE</code>更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20578" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div><a id="ADFNS1286"></a><div class="props_rev_3"><a id="GUID-008D6CB5-53C6-4920-879C-4DECA6405304" name="GUID-008D6CB5-53C6-4920-879C-4DECA6405304"></a><h6 id="ADFNS-GUID-008D6CB5-53C6-4920-879C-4DECA6405304" class="sect6">创建新的可设置和不可编辑的对象</h6>
                        <div>
                           <div class="section">
                              <p>创建可在数据库中进行类型编辑的新架构对象时，可以指定属性“ <code class="codeph">EDITIONABLE</code>或“ <code class="codeph">NONEDITIONABLE</code> 。如果省略该属性，则默认情况下该对象为“ <code class="codeph">EDITIONABLE</code> ，除非它是以下之一：</p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">PUBLIC</code> <code class="codeph">SYNONYM</code> ，默认情况下<code class="codeph">NONEDITIONABLE</code>用</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">PACKAGE</code> <code class="codeph">BODY</code> ，它继承了包规范的属性</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">TYPE</code> <code class="codeph">BODY</code> ，它继承了类型规范的属性</p>
                                 </li>
                              </ul>
                              <p>对于<code class="codeph">PACKAGE</code> <code class="codeph">BODY</code>或<code class="codeph">TYPE</code> <code class="codeph">BODY</code> ，如果指定属性，则它必须与相应包或类型规范的属性匹配。
                              </p>
                              <p>创建可在其模式中进行编辑的类型的<code class="codeph">EDITIONABLE</code>对象时，新对象是仅在创建对象时当前版本中可见的编辑对象。创建已编辑的对象是与新对象不可见的版本相关的实时操作。
                              </p>
                              <p>当您创建具有<code class="codeph">NONEDITIONABLE</code>属性的对象或其架构中类型不可编辑的对象时，新对象是一个非对称对象，对所有版本都可见。
                              </p>
                              <p>假设在当前版本中，您的模式没有名为<code class="codeph">obj</code>模式对象，但在另一个版本中，您的模式具有名为<code class="codeph">obj</code>已编辑对象。您可以在当前版本的架构中创建名为<code class="codeph">obj</code>的对象，但它必须是已编辑的对象（即由其<code class="codeph">OBJECT_NAME</code> ， <code class="codeph">OWNER</code>和<code class="codeph">EDITION_NAME</code>唯一标识）。新对象的类型（可以与具有相同名称的现有已编辑对象的类型不同）必须可在模式中进行编辑，并且新对象必须具有<code class="codeph">EDITIONABLE</code>属性。
                              </p>
                              <div class="infoboxnotealso" id="GUID-008D6CB5-53C6-4920-879C-4DECA6405304__NOTE-1326-CB5E351F">
                                 <p class="notep1">也可以看看：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>有关当前版本的信息<a href="editions.html#GUID-4FDF6CA7-AA70-4DAC-A5F6-B75CF4AB383C">，请参见当前版本和会话版</a></p>
                                    </li>
                                    <li>
                                       <p><a href="editions.html#GUID-8A0ECFF9-CCC6-40D1-82B0-DFD8BA09FC4F">示例：删除已编辑的对象</a></p>
                                    </li>
                                    <li>
                                       <p><a href="editions.html#GUID-E5413F14-76A9-432E-A3AC-C162266B43DE">示例：使用已删除的继承对象的名称创建对象</a></p>
                                    </li>
                                 </ul>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="ADFNS1287"></a><div class="props_rev_3"><a id="GUID-4B118A0F-60D8-4F38-99EF-F7645037CA21" name="GUID-4B118A0F-60D8-4F38-99EF-F7645037CA21"></a><h6 id="ADFNS-GUID-4B118A0F-60D8-4F38-99EF-F7645037CA21" class="sect6">替换或更改可设置和不可编辑的对象</h6>
                        <div>
                           <div class="section">
                              <p>替换或更改现有对象时（使用<code class="codeph">CREATE</code> <code class="codeph">OR</code> <code class="codeph">REPLACE</code>或<code class="codeph">ALTER</code>语句）：</p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>如果未对版本启用架构，则可以将对象的属性从“ <code class="codeph">EDITIONABLE</code>为“ <code class="codeph">NONEDITIONABLE</code> ，反之亦然。
                                    </p>
                                 </li>
                                 <li>
                                    <p>如果为要替换或更改的对象的类型的版本启用了架构，则无法将对象的属性从“ <code class="codeph">EDITIONABLE</code>为“ <code class="codeph">NONEDITIONABLE</code> ，反之亦然。
                                    </p>
                                 </li>
                              </ul>
                              <p>更改已编辑的对象是与更改的对象不可见的版本相关的实时操作。</p>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div><a id="ADFNS1288"></a><div class="props_rev_3"><a id="GUID-156B1E2C-1543-4F2F-BCF1-A9BA86353D59" name="GUID-156B1E2C-1543-4F2F-BCF1-A9BA86353D59"></a><h5 id="ADFNS-GUID-156B1E2C-1543-4F2F-BCF1-A9BA86353D59" class="sect5">版本化对象的规则</h5>
                     <div>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>非专用对象通常不能依赖于编辑的对象。</p>
                           </li>
                           <li>
                              <p>抽象数据类型（ADT）既不能进行编辑也不能进化。</p>
                           </li>
                           <li>
                              <p>已编辑的对象不能是<code class="codeph">FOREIGN</code> <code class="codeph">KEY</code>约束的起点或终点。
                              </p>
                              <p>此规则仅影响已编辑的视图。编辑视图可以是普通视图或编辑视图。</p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-156B1E2C-1543-4F2F-BCF1-A9BA86353D59__NOTE-133-CB5F43DE">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="editions.html#GUID-42FA041C-5C7D-4C33-B1F8-188B2C784121">版本化和非编辑对象的名称解析</a></p>
                              </li>
                              <li>
                                 <p>有关类型演变的信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADOBJ00603" target="_blank"><span class="italic">Oracle数据库对象关系开发人员指南</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="ADFNS899"></a><div class="props_rev_3"><a id="GUID-581CE195-E9FD-421D-A47F-8DF573B0A1AC" name="GUID-581CE195-E9FD-421D-A47F-8DF573B0A1AC"></a><h4 id="ADFNS-GUID-581CE195-E9FD-421D-A47F-8DF573B0A1AC" class="sect4">创建一个版本</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-581CE195-E9FD-421D-A47F-8DF573B0A1AC__GUID-0C9EC78A-54D0-4DA2-AA77-72F7BCE0F178">
                           <p class="notep1">注意：</p>
                           <p>Oracle建议不要在CDB的Root中创建版本。</p>
                        </div>
                        <p>要创建版本，请使用SQL语句<code class="codeph">CREATE</code> <code class="codeph">EDITION</code> 。</p>
                        <p>您必须将该版本创建为现有版本的子项。使用<code class="codeph">CREATE</code> <code class="codeph">EDITION</code>语句创建的第一版的父级是<code class="codeph">ora$base</code> 。该语句创建版本<code class="codeph">e2</code>作为<code class="codeph">ora$base</code>的子代：</p><pre class="oac_no_warn" dir="ltr">创建版e2</pre><p>（ <a href="editions.html#GUID-72EE5A42-34E7-49CE-BA1D-213DABE29E6A">例如：Editioned Objects和Copy-on-Change</a>以及其他使用前面的语句。）
                        </p>
                        <p>一个版本最多只能有一个孩子。</p>
                        <p>版本的<span class="bold">后代</span>是它的孩子，它的孩子的孩子，等等。版本的<span class="bold">祖先</span>是其父级，父级的父级，依此类推。<span class="bold">根版</span>没有父<span class="bold">版</span> ， <span class="bold">叶版</span>没有子<span class="bold">版</span> 。
                        </p>
                        <div class="infoboxnotealso" id="GUID-581CE195-E9FD-421D-A47F-8DF573B0A1AC__GUID-1723FE67-A7F3-4ECD-AF32-4ACE05B1209F">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">CREATE</code> <code class="codeph">EDITION</code>语句的信息，包括使用它所需的权限，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF20017" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p>有关CDB的信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN13508" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS900"></a><a id="ADFNS901"></a><a id="ADFNS902"></a><a id="ADFNS99922"></a><div class="props_rev_3"><a id="GUID-6E30D1F1-AD6D-44CB-AF7B-714FB251E7DC" name="GUID-6E30D1F1-AD6D-44CB-AF7B-714FB251E7DC"></a><h4 id="ADFNS-GUID-6E30D1F1-AD6D-44CB-AF7B-714FB251E7DC" class="sect4">版本化对象和复制更改</h4>
                  <div>
                     <p>创建版本时，其父版本中的所有已编辑对象都将复制到该版本。对一个版本中的已编辑对象的更改不会影响其他版本中该已编辑对象的副本。</p>
                     <p>前一段描述了概念上发生的事情。实际上，为了优化性能，只有在后代版本更改对象时，Oracle数据库才会将编辑后的对象从祖先版本复制到后代版本。此策略称为<span class="bold">copy-on-change</span> 。
                     </p>
                     <p>概念上（但实际上）未复制到后代版本的编辑<span class="bold">对象</span>称为<span class="bold">继承对象</span> 。当后代版本的用户在DDL语句中引用继承的对象时，Oracle数据库实际上将该对象复制到后代版本。此复制操作称为<span class="bold">实现</span> ，它在后代版本中创建<span class="bold">实际对象</span> 。
                     </p>
                     <div class="infoboxnote" id="GUID-6E30D1F1-AD6D-44CB-AF7B-714FB251E7DC__GUID-7B196719-572C-4D6B-B8C0-BC7270FE0C05">
                        <p class="notep1">注意：</p>
                        <p>前一段中的实现规则有一个例外：当<code class="codeph">CREATE</code> <code class="codeph">OR</code> <code class="codeph">REPLACE</code> <span class="italic"><code class="codeph">object</code></span>语句用相同的对象（即具有相同源代码和设置的<span class="italic"><code class="codeph">object</code></span>替换继承的对象时，Oracle数据库<span class="italic">不会</span>创建实际的后代版中的对象。
                        </p>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-72EE5A42-34E7-49CE-BA1D-213DABE29E6A" name="GUID-72EE5A42-34E7-49CE-BA1D-213DABE29E6A"></a><h5 id="ADFNS-GUID-72EE5A42-34E7-49CE-BA1D-213DABE29E6A" class="sect5">示例：Editioned对象和Copy-on-Change</h5>
                     <div>
                        <p><a href="editions.html#GUID-72EE5A42-34E7-49CE-BA1D-213DABE29E6A__BABFFCHG">例27-1</a>在<code class="codeph">ora$base</code>版本中创建了一个名为<code class="codeph">hello</code>的过程，然后将版本<code class="codeph">e2</code>创建为<code class="codeph">ora$base</code> 。当<code class="codeph">e2</code>调用<code class="codeph">hello</code> ，它会调用<code class="codeph">ora$base</code>的继承过程。然后<code class="codeph">e2</code>改变<code class="codeph">hello</code> ，实现它。现在，当<code class="codeph">e2</code>调用<code class="codeph">hello</code> ，它会调用自己的实际过程。版本<code class="codeph">ora$base</code>的过程<code class="codeph">hello</code>保持不变。
                        </p>
                        <div class="example" id="GUID-72EE5A42-34E7-49CE-BA1D-213DABE29E6A__BABFFCHG">
                           <p class="titleinexample">示例27-1版本化对象和Copy-on-Change</p>
                           <ol>
                              <li>
                                 <p>假设此过程是<code class="codeph">ora$base</code>已编辑对象：</p><pre class="oac_no_warn" dir="ltr">创建或替换程序你好是BEGIN DBMS_OUTPUT.PUT_LINE（'你好，第1版。“）;结束你好; /</pre></li>
                              <li>
                                 <p>在<code class="codeph">ora$base</code> ，调用过程：</p><pre class="oac_no_warn" dir="ltr">BEGIN你好（）;结束; /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr"><span class="bold">您好，第1版。</span>PL / SQL过程成功完成。
</pre></li>
                              <li>
                                 <p>创建子版：</p><pre class="oac_no_warn" dir="ltr">创作版e2;</pre><p>从概念上讲，该过程将复制到子版本，并且只有副本在子版本中可见。副本是继承的对象，而不是实际的对象。</p>
                              </li>
                              <li>
                                 <p>使用儿童版：</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET EDITION = e2;</pre><p></p>
                              </li>
                              <li>
                                 <p>调用程序：</p><pre class="oac_no_warn" dir="ltr">BEGIN你好（）;结束; /</pre><p>从概念上讲，子版本会调用自己的过程副本（与父版本中的过程相同， <code class="codeph">ora$base</code> ）。但是，子版本实际上调用了父版本中的过程。结果：</p><pre class="oac_no_warn" dir="ltr"><span class="bold">您好，第1版。</span>PL / SQL过程成功完成。
</pre></li>
                              <li>
                                 <p>改变程序：</p><pre class="oac_no_warn" dir="ltr">创建或替换程序你好是BEGIN DBMS_OUTPUT.PUT_LINE（'你好，第<span class="bold">2</span>版。“）;结束你好; /</pre><p>Oracle数据库实现了子版本中的过程，并且更改仅影响子版本中的实际对象，而不影响父版本中的过程。</p>
                              </li>
                              <li>
                                 <p>调用程序：</p><pre class="oac_no_warn" dir="ltr">BEGIN你好（）;结束; /</pre><p>子版本调用自己的实际程序：</p><pre class="oac_no_warn" dir="ltr"><span class="bold">你好，第2版。</span>PL / SQL过程成功完成。
</pre></li>
                              <li>
                                 <p>返回父版：</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET EDITION = ora $ base;</pre></li>
                              <li>
                                 <p>调用该过程并看到它没有更改：</p><pre class="oac_no_warn" dir="ltr">BEGIN你好（）;结束; /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr"><span class="bold">您好，第1版。</span>PL / SQL过程成功完成。
</pre></li>
                           </ol>
                        </div>
                        <!-- class="example" -->
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-72EE5A42-34E7-49CE-BA1D-213DABE29E6A__NOTE-1241-CB7E25B8">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="editions.html#GUID-943C7AE8-6A5D-47EC-AC45-3132518AF36B">更改会话版</a>以获取有关<code class="codeph">ALTER SESSION SET EDITION</code></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-8A0ECFF9-CCC6-40D1-82B0-DFD8BA09FC4F" name="GUID-8A0ECFF9-CCC6-40D1-82B0-DFD8BA09FC4F"></a><h5 id="ADFNS-GUID-8A0ECFF9-CCC6-40D1-82B0-DFD8BA09FC4F" class="sect5">示例：删除已编辑的对象</h5>
                     <div>
                        <p><a href="editions.html#GUID-8A0ECFF9-CCC6-40D1-82B0-DFD8BA09FC4F__BABHACJF">例27-2</a>在<code class="codeph">ora$base</code>版本中创建一个名为<code class="codeph">goodbye</code>的过程，然后创建版本<code class="codeph">e2</code>作为<code class="codeph">ora$base</code> 。在<code class="codeph">e2</code> <code class="codeph">goodbye</code> ，它再也无法调用它，但是<code class="codeph">ora$base</code>仍然可以调用它。
                        </p>
                        <p>因为<code class="codeph">e2</code>放弃了程序<code class="codeph">goodbye</code> ：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>它的后代不继承程序<code class="codeph">goodbye</code> 。
                              </p>
                           </li>
                           <li>
                              <p>在<code class="codeph">e2</code>没有可见的名为<code class="codeph">goodbye</code>对象，因此<code class="codeph">e2</code>可以创建一个名为<code class="codeph">goodbye</code>的对象，但它必须是一个已编辑的对象。如果<code class="codeph">e2</code>创建一个名为<code class="codeph">goodbye</code>的新版本对象，则<code class="codeph">e2</code>的后代继承该对象。
                              </p>
                           </li>
                        </ul>
                        <div class="example" id="GUID-8A0ECFF9-CCC6-40D1-82B0-DFD8BA09FC4F__BABHACJF">
                           <p class="titleinexample">示例27-2删除已编辑的对象</p>
                           <ol>
                              <li>
                                 <p>假设此过程是<code class="codeph">ora$base</code>已编辑对象：</p><pre class="oac_no_warn" dir="ltr">创建或替换程序再见是BEGIN DBMS_OUTPUT.PUT_LINE（'再见！“）;结束再见; /</pre></li>
                              <li>
                                 <p>调用程序：</p><pre class="oac_no_warn" dir="ltr">开始再见;结束; /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">再见！PL / SQL过程成功完成。
</pre></li>
                              <li>
                                 <p>创建版本<code class="codeph">e2</code>作为<code class="codeph">ora$base</code>的孩子：</p><pre class="oac_no_warn" dir="ltr">创作版e2;</pre><p>在<code class="codeph">e2</code> ，该过程是一个继承的对象。
                                 </p>
                              </li>
                              <li>
                                 <p>使用版本<code class="codeph">e2</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET EDITION = e2;</pre><p><code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">SET</code> <code class="codeph">EDITION</code>必须是顶级SQL语句。
                                 </p>
                              </li>
                              <li>
                                 <p>在<code class="codeph">e2</code> ，调用过程：</p><pre class="oac_no_warn" dir="ltr">开始再见;结束; /</pre><p><code class="codeph">e2</code>调用<code class="codeph">ora$base</code>的过程：</p><pre class="oac_no_warn" dir="ltr">再见！PL / SQL过程成功完成。
</pre></li>
                              <li>
                                 <p>在<code class="codeph">e2</code> ，删除程序：</p><pre class="oac_no_warn" dir="ltr">DROP PROCEDURE再见;</pre></li>
                              <li>
                                 <p>在<code class="codeph">e2</code> ，尝试调用已删除的过程：</p><pre class="oac_no_warn" dir="ltr">开始再见;结束; /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">开始再见;结束; *第1行的错误：ORA-06550：第1行第7列：PLS-00201：必须声明标识符'GOODBYE'ORA-06550：第1行第7列：PL / SQL：语句被忽略</pre></li>
                              <li>
                                 <p>返回<code class="codeph">ora$base</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET EDITION = ora $ base;</pre></li>
                              <li>
                                 <p>在<code class="codeph">ora$base</code> ，调用过程：</p><pre class="oac_no_warn" dir="ltr">开始再见;结束; /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">再见！PL / SQL过程成功完成。
</pre></li>
                           </ol>
                        </div>
                        <!-- class="example" -->
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-8A0ECFF9-CCC6-40D1-82B0-DFD8BA09FC4F__NOTE-1271-CB7EF2F4">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>有关<code class="codeph">DROP</code> <code class="codeph">PROCEDURE</code>语句的更多信息，包括使用它所需的权限，请参阅<a href="../lnpls/DROP-PROCEDURE-statement.html#LNPLS99991" target="_blank"><span class="italic">Oracle Database PL / SQL语言参考</span></a></p>
                                 </li>
                                 <li>
                                    <p><a href="editions.html#GUID-008D6CB5-53C6-4920-879C-4DECA6405304">创建新的可设置和不可编辑的对象</a></p>
                                 </li>
                                 <li>
                                    <p><a href="editions.html#GUID-943C7AE8-6A5D-47EC-AC45-3132518AF36B">更改会话版</a>以获取有关<code class="codeph">ALTER SESSION SET EDITION</code>更多信息</p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-E5413F14-76A9-432E-A3AC-C162266B43DE" name="GUID-E5413F14-76A9-432E-A3AC-C162266B43DE"></a><h5 id="ADFNS-GUID-E5413F14-76A9-432E-A3AC-C162266B43DE" class="sect5">示例：使用已删除的继承对象的名称创建对象</h5>
                     <div>
                        <p>在<a href="editions.html#GUID-E5413F14-76A9-432E-A3AC-C162266B43DE__BABEADAA">例27-3中</a> ， <code class="codeph">e2</code>创建一个名为<code class="codeph">goodbye</code>的函数，然后创建一个名为<code class="codeph">e3</code>的版本作为<code class="codeph">e2</code>的子<code class="codeph">e2</code> 。当<code class="codeph">e3</code>尝试调用<span class="italic">过程</span> <code class="codeph">goodbye</code> （ <code class="codeph">e2</code>掉线）时，会发生错误，但是<code class="codeph">e3</code>成功调用<span class="italic">函数</span> <code class="codeph">goodbye</code> （ <code class="codeph">e2</code>创建）。
                        </p>
                        <div class="example" id="GUID-E5413F14-76A9-432E-A3AC-C162266B43DE__BABEADAA">
                           <p class="titleinexample">示例27-3使用丢弃的继承对象的名称创建对象</p>
                           <ol>
                              <li>
                                 <p>返回<code class="codeph">e2</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET EDITION = e2;</pre></li>
                              <li>
                                 <p>在<code class="codeph">e2</code> ，创建一个名为<code class="codeph">goodbye</code>的函数：</p><pre class="oac_no_warn" dir="ltr">创建或替换功能再见RETURN BOOLEAN是BEGIN RETURN（TRUE）;结束再见; /</pre><p>此功能必须是已编辑的对象。它默认具有<code class="codeph">EDITIONABLE</code>属性。如果模式中的类型<code class="codeph">FUNCTION</code>不可编辑，则必须使用<code class="codeph">ALTER</code> <code class="codeph">USER</code>语句对其进行编辑。
                                 </p>
                              </li>
                              <li>
                                 <p>创建版本<code class="codeph">e3</code> ：</p><pre class="oac_no_warn" dir="ltr">创建版本e3作为e2的孩子;</pre><p>版本<code class="codeph">e3</code>继承了功能<code class="codeph">goodbye</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>使用版本<code class="codeph">e3</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET EDITION = e3;</pre></li>
                              <li>
                                 <p>在<code class="codeph">e3</code> ，尝试调用<span class="italic">程序</span> <code class="codeph">goodbye</code> ：</p><pre class="oac_no_warn" dir="ltr">开始再见;结束; /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">第2行的错误：ORA-06550：第2行第3列：PLS-00306：调用'GOODBYE'ORA-06550时参数的数量或类型错误：第2行第3列：PL / SQL：语句被忽略</pre></li>
                              <li>
                                 <p>在<code class="codeph">e3</code> ，调用<span class="italic">函数</span> <code class="codeph">goodbye</code> ：</p><pre class="oac_no_warn" dir="ltr">BEGIN如果再见那么DBMS_OUTPUT.PUT_LINE（'再见！“）;万一;结束; /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">再见！PL / SQL过程成功完成。</pre></li>
                           </ol>
                        </div>
                        <!-- class="example" -->
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-E5413F14-76A9-432E-A3AC-C162266B43DE__NOTE-1231-CB7FCD1A">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="editions.html#GUID-943C7AE8-6A5D-47EC-AC45-3132518AF36B">更改会话版</a>以获取有关<code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">SET</code> <code class="codeph">EDITION</code></p>
                                 </li>
                                 <li>
                                    <p><a href="editions.html#GUID-FF93CEED-D23A-48D3-8FD7-5B0FB22024DF">为用户</a>启用版本以获取为用户启用版本的说明</p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADFNS903"></a><div class="props_rev_3"><a id="GUID-76045F34-B7BB-45DB-AE35-689CF4F6759A" name="GUID-76045F34-B7BB-45DB-AE35-689CF4F6759A"></a><h4 id="ADFNS-GUID-76045F34-B7BB-45DB-AE35-689CF4F6759A" class="sect4">为某些用户提供版本</h4>
                  <div>
                     <div class="section">
                        <p>作为版本的创建者，您自动拥有<code class="codeph">USE</code>权限<code class="codeph">WITH</code> <code class="codeph">GRANT</code> <code class="codeph">OPTION</code> 。要将版本的<code class="codeph">USE</code>权限授予其他用户，请使用SQL语句<code class="codeph">GRANT</code> <code class="codeph">USE</code> <code class="codeph">ON</code> <code class="codeph">EDITION</code> 。</p>
                        <div class="infoboxnotealso" id="GUID-76045F34-B7BB-45DB-AE35-689CF4F6759A__NOTE-1312-CB604835">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">GRANT</code>语句的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01603" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS99876"></a><div class="props_rev_3"><a id="GUID-B9A89ED5-7DC8-4B49-A38D-5B8CA94E7459" name="GUID-B9A89ED5-7DC8-4B49-A38D-5B8CA94E7459"></a><h4 id="ADFNS-GUID-B9A89ED5-7DC8-4B49-A38D-5B8CA94E7459" class="sect4">为所有用户提供版本</h4>
                  <div>
                     <div class="section">
                        <p>要为所有用户提供版本，请执行以下任一操作：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>将版本的<code class="codeph">USE</code>权限授予<code class="codeph">PUBLIC</code> ：</p><pre class="oac_no_warn" dir="ltr">授予使用版本<span class="italic">edition_name</span>到PUBLIC</pre><p></p>
                           </li>
                           <li>
                              <p>使版本成为数据库默认版本：</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE DEFAULT EDITION = <span class="italic">edition_name</span>
</pre><p>这具有允许所有用户使用该版本的副作用，因为它有效地将<span class="italic"><code class="codeph">edition_name</code></span>的<code class="codeph">USE</code>特权授予<code class="codeph">PUBLIC</code> 。</p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-B9A89ED5-7DC8-4B49-A38D-5B8CA94E7459__NOTE-1322-CB608135">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code>语句的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF00802" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">GRANT</code>语句的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01603" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS1292"></a><a id="ADFNS99921"></a><div class="props_rev_3"><a id="GUID-4FDF6CA7-AA70-4DAC-A5F6-B75CF4AB383C" name="GUID-4FDF6CA7-AA70-4DAC-A5F6-B75CF4AB383C"></a><h4 id="ADFNS-GUID-4FDF6CA7-AA70-4DAC-A5F6-B75CF4AB383C" class="sect4">当前版和会话版</h4>
                  <div>
                     <p>每个数据库会话一次只使用一个版本。数据库会话在任何时候使用的<span class="bold">版本</span>称为其<span class="bold">当前版本</span> 。当数据库会话开始时，其当前版本是其<span class="bold">会话版本</span> ，它是它开始的版本。如果您更改会话版本，则当前版本会更改为相同的内容。但是，在某些情况下，当前版本和会话版本会有所不同。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-4FDF6CA7-AA70-4DAC-A5F6-B75CF4AB383C__GUID-6E6DD368-8880-41AE-9EA1-0A3CFFBDC9D2">话题：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="editions.html#GUID-267CE6EB-C904-491C-8B73-DD28DBD1DF74">您的初始会话版</a></p>
                           </li>
                           <li>
                              <p><a href="editions.html#GUID-943C7AE8-6A5D-47EC-AC45-3132518AF36B">更改会话版</a></p>
                           </li>
                           <li>
                              <p><a href="editions.html#GUID-87387D05-8BEB-4A47-8F8A-77EDD15224F2">显示当前版本和会话版本的名称</a></p>
                           </li>
                           <li>
                              <p><a href="editions.html#GUID-E98E984F-5DB7-44FE-9C88-70936690EC4A">当前版本可能与会话版不同</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADFNS904"></a><div class="props_rev_3"><a id="GUID-267CE6EB-C904-491C-8B73-DD28DBD1DF74" name="GUID-267CE6EB-C904-491C-8B73-DD28DBD1DF74"></a><h5 id="ADFNS-GUID-267CE6EB-C904-491C-8B73-DD28DBD1DF74" class="sect5">您的初始会话版</h5>
                     <div>
                        <p>连接到数据库时，可以指定初始会话版本。您的初始会话版本可以是数据库默认版本或您具有<code class="codeph">USE</code>权限的任何版本。要查看可供您使用的版本的名称，请使用以下查询：</p><pre class="oac_no_warn" dir="ltr">从ALL_EDITIONS中选择EDITION_NAME;</pre><p>如何在连接时指定初始会话版本取决于您连接数据库的方式 - 请参阅界面文档。</p>
                        <div class="infoboxnotealso" id="GUID-267CE6EB-C904-491C-8B73-DD28DBD1DF74__GUID-605834B3-EEF8-4334-9860-06A53E4FC768">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关设置数据库缺省版本的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN13170" target="_blank"><span class="italic">Oracle数据库管理员指南</span></a> ”</p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQPUG013" target="_blank"><span class="italic">SQL * Plus用户指南和参考</span></a>有关使用SQL * Plus连接数据库的信息</p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNOCI08100" target="_blank"><span class="italic">Oracle Call Interface Programmer's Guide</span></a> ，了解有关使用Oracle Call Interface（OCI）连接数据库的信息</p>
                              </li>
                              <li>
                                 <p>有关使用JDBC连接数据库的信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=JJDBC-GUID-864DB502-5E50-4044-8132-33D6AAF8927A" target="_blank"><span class="italic">“Oracle数据库JDBC开发人员指南”</span></a></p>
                              </li>
                           </ul>
                        </div>
                        <p>从Oracle Database <span class="italic">11g</span>第2版（11.2.0.2）开始，如果在连接时未指定会话版，则：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果使用数据库服务连接到数据库，并且为该服务指定了初始会话版本，则该服务的初始会话版本是您的初始会话版本。</p>
                           </li>
                           <li>
                              <p>否则，您的初始会话版本是数据库默认版本。</p>
                           </li>
                        </ul>
                        <p>从版本11.2.0.2开始，在创建或修改数据库服务时，可以指定其初始会话版本。</p>
                        <p>要创建或修改数据库服务，Oracle建议使用<code class="codeph">srvctl</code> <code class="codeph">add</code> <code class="codeph">service</code>或<code class="codeph">srvctl</code> <code class="codeph">modify</code> <code class="codeph">service</code>命令。要指定服务的默认初始会话版本，请使用<code class="codeph">-edition</code>选项。
                        </p>
                        <p>或者，您可以使用<code class="codeph">DBMS_SERVICE</code>创建或修改数据库服务。 <code class="codeph">CREATE_SERVICE</code>或<code class="codeph">DBMS_SERVICE</code> 。 <code class="codeph">MODIFY_SERVICE</code>过程，并使用<code class="codeph">EDITION</code>属性指定服务的默认初始会话版本。
                        </p>
                        <div class="infoboxnote" id="GUID-267CE6EB-C904-491C-8B73-DD28DBD1DF74__GUID-622CFC88-4CD7-4453-B08A-66590E2C14A7">
                           <p class="notep1">注意：</p>
                           <p>从Oracle Database <span class="italic">11g</span>第2版（11.2.0.1）开始， <code class="codeph">DBMS_SERVICE</code> 。 <code class="codeph">CREATE_SERVICE</code>和<code class="codeph">DBMS_SERVICE</code> 。在Oracle Clusterware和Oracle Restart管理的数据库中不推荐使用<code class="codeph">MODIFY_SERVICE</code>过程。
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-267CE6EB-C904-491C-8B73-DD28DBD1DF74__GUID-90D9710A-7F8C-4202-A1B3-F3DC8FBD9109">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">srvctl</code> <code class="codeph">add</code> <code class="codeph">service</code>命令的<code class="codeph">-edition</code>选项的信息，请<code class="codeph">-edition</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ADMIN12956" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">srvctl</code> <code class="codeph">modify</code> <code class="codeph">service</code>命令的<code class="codeph">-edition</code>选项的信息，请<code class="codeph">-edition</code> <a href="../admin/configuring-automatic-restart-of-an-oracle-database.html#ADMIN12980" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">DBMS_SERVICE</code>的<code class="codeph">EDITION</code>属性的信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS68021" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> 。 <code class="codeph">CREATE_SERVICE</code>过程</p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">DBMS_SERVICE</code>的<code class="codeph">EDITION</code>属性的信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS68027" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> 。 <code class="codeph">MODIFY_SERVICE</code>程序</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="ADFNS905"></a><div class="props_rev_3"><a id="GUID-943C7AE8-6A5D-47EC-AC45-3132518AF36B" name="GUID-943C7AE8-6A5D-47EC-AC45-3132518AF36B"></a><h5 id="ADFNS-GUID-943C7AE8-6A5D-47EC-AC45-3132518AF36B" class="sect5">更改会话版</h5>
                     <div>
                        <div class="section">
                           <p>连接到数据库后，您可以使用SQL语句<code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">SET</code> <code class="codeph">EDITION</code>更改会话版本。您可以将会话版本更改为数据库默认版本或具有<code class="codeph">USE</code>权限的任何版本。更改会话版时，当前版本将更改为同一版本。
                           </p>
                           <p><a href="editions.html#GUID-72EE5A42-34E7-49CE-BA1D-213DABE29E6A">示例：Editioned Objects和Copy-on-Change</a>以及<a href="editions.html#GUID-8A0ECFF9-CCC6-40D1-82B0-DFD8BA09FC4F">示例：删除版本化对象中的</a>这些语句<a href="editions.html#GUID-72EE5A42-34E7-49CE-BA1D-213DABE29E6A">将会话</a>版本（和当前版本）首先更改为<code class="codeph">e2</code> ，然后更改为<code class="codeph">ora$base</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET EDITION = e2 ......ALTER SESSION SET EDITION = ora $ base</pre><div class="infoboxnote" id="GUID-943C7AE8-6A5D-47EC-AC45-3132518AF36B__GUID-D01FA8CF-EA9E-468A-99CB-84F5A9CC1751">
                              <p class="notep1">注意：</p>
                              <p><code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">SET</code> <code class="codeph">EDITION</code>必须是顶级SQL语句。要延迟版本更改（例如，在登录触发器中），请使用<code class="codeph">DBMS_SESSION</code> 。 <code class="codeph">SET_EDITION_DEFERRED</code>程序。
                              </p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-943C7AE8-6A5D-47EC-AC45-3132518AF36B__GUID-7EC350FC-C210-4C64-92A5-869019DA7BA3">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>有关<code class="codeph">ALTER</code> <code class="codeph">SESSION</code> <code class="codeph">SET</code> <code class="codeph">EDITION</code>语句的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF00901" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                                 </li>
                                 <li>
                                    <p>有关<code class="codeph">DBMS_SESSION</code>更多信息，请<code class="codeph">DBMS_SESSION</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS72968" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> 。 <code class="codeph">SET_EDITION_DEFERRED</code>程序</p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADFNS906"></a><div class="props_rev_3"><a id="GUID-87387D05-8BEB-4A47-8F8A-77EDD15224F2" name="GUID-87387D05-8BEB-4A47-8F8A-77EDD15224F2"></a><h5 id="ADFNS-GUID-87387D05-8BEB-4A47-8F8A-77EDD15224F2" class="sect5">显示当前版本和会话版本的名称</h5>
                     <div>
                        <div class="section">
                           <p>此语句返回当前版本的名称：</p><pre class="oac_no_warn" dir="ltr">SELECT SYS_CONTEXT（'USERENV'，'CURRENT_EDITION_NAME'）FROM DUAL;</pre><p>此语句返回会话版本的名称：</p><pre class="oac_no_warn" dir="ltr">SELECT SYS_CONTEXT（'USERENV'，'SESSION_EDITION_NAME'）FROM DUAL;</pre><div class="infoboxnotealso" id="GUID-87387D05-8BEB-4A47-8F8A-77EDD15224F2__GUID-EA9E128B-BB95-4850-A941-D5CC0A72B6DF">
                              <p class="notep1">也可以看看：</p>
                              <p>有关<code class="codeph">SYS_CONTEXT</code>函数的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF06117" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADFNS908"></a><a id="ADFNS907"></a><div class="props_rev_3"><a id="GUID-E98E984F-5DB7-44FE-9C88-70936690EC4A" name="GUID-E98E984F-5DB7-44FE-9C88-70936690EC4A"></a><h5 id="ADFNS-GUID-E98E984F-5DB7-44FE-9C88-70936690EC4A" class="sect5">当前版本可能与会话版不同</h5>
                     <div>
                        <p>在这些情况下，当前版本可能与会话版本不同：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>交叉触发器触发。</p>
                           </li>
                           <li>
                              <p>您通过调用<code class="codeph">DBMS_SQL</code>运行语句。 <code class="codeph">PARSE</code>过程，指定运行语句的版本，如<a href="editions.html#GUID-E98E984F-5DB7-44FE-9C88-70936690EC4A__CHDBCBEF">例27-4所示</a> 。
                              </p>
                              <p>语句正在运行时，当前版本是指定版本，但会话版本不会更改。</p>
                           </li>
                        </ul>
                        <p><a href="editions.html#GUID-E98E984F-5DB7-44FE-9C88-70936690EC4A__CHDBCBEF">例27-4</a>创建了一个返回会话版本和当前版本名称的函数。然后它创建一个子版本，它会调用该函数两次。第一次，会话版和当前版是相同的。第二次，它们不是，因为不同的版本作为参数传递给<code class="codeph">DBMS_SQL</code> 。 <code class="codeph">PARSE</code>程序。
                        </p>
                        <div class="example" id="GUID-E98E984F-5DB7-44FE-9C88-70936690EC4A__CHDBCBEF">
                           <p class="titleinexample">例27-4当前版与Session Edition不同</p>
                           <ol>
                              <li>
                                 <p>创建返回会话版本和当前版本名称的函数：</p><pre class="oac_no_warn" dir="ltr">创建或替换函数session_and_current_editions RETURN VARCHAR2 IS BEGIN RETURN'会话：'|| SYS_CONTEXT（'USERENV'，'SESSION_EDITION_NAME'）|| '/'|| '当前：'|| SYS_CONTEXT（'USERENV'，'CURRENT_EDITION_NAME'）; END session_and_current_editions; /</pre></li>
                              <li>
                                 <p>创建儿童版：</p><pre class="oac_no_warn" dir="ltr">创建版本e2作为ora $ base的孩子;</pre></li>
                              <li>
                                 <p>使用儿童版：</p><pre class="oac_no_warn" dir="ltr"><span class="bold">ALTER SESSION SET EDITION = e2;</span>
</pre></li>
                              <li>
                                 <p>调用功能：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_OUTPUT.PUT_LINE（session_and_current_editions（））;结束; /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr"><span class="bold">会话：E2 /当前：E2</span> PL / SQL过程成功完成。
</pre></li>
                              <li>
                                 <p>再次调用函数：</p><pre class="oac_no_warn" dir="ltr">DECLARE c NUMBER：= DBMS_SQL.OPEN_CURSOR（）; v VARCHAR2（200）;假号码; <span class="bold">stmt CONSTANT VARCHAR2（32767）</span> <span class="bold">：='SELECT session_and_current_editions（）FROM DUAL';</span> BEGIN <span class="bold">DBMS_SQL.PARSE</span> （c =&gt; c， <span class="bold">statement =&gt; stmt</span> ，language_flag =&gt; DBMS_SQL.NATIVE， <span class="bold">edition =&gt;'ora $ base'</span> ）; DBMS_SQL.DEFINE_COLUMN（c，1，v，200）; dummy：= DBMS_SQL.EXECUTE_AND_FETCH（c，true）; DBMS_SQL.COLUMN_VALUE（c，1，v）; DBMS_SQL.CLOSE_CURSOR（C）; DBMS_OUTPUT.PUT_LINE（v）;结束; /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr"><span class="bold">会话：E2 /当前：ORA $ BASE</span> PL / SQL过程成功完成。</pre></li>
                           </ol>
                        </div>
                        <!-- class="example" -->
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-E98E984F-5DB7-44FE-9C88-70936690EC4A__NOTE-1261-CB81321C">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="editions.html#GUID-DD52E151-0C01-4EFD-8E88-33215FF5A0D1">Crossedition触发器与版本的交互</a></p>
                                 </li>
                                 <li>
                                    <p>有关<code class="codeph">DBMS_SQL</code>信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS68277" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> 。 <code class="codeph">PARSE</code>程序</p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADFNS99920"></a><div class="props_rev_3"><a id="GUID-023BBAD2-16DB-4E08-A4AF-183633B211CD" name="GUID-023BBAD2-16DB-4E08-A4AF-183633B211CD"></a><h4 id="ADFNS-GUID-023BBAD2-16DB-4E08-A4AF-183633B211CD" class="sect4">退休一个版本</h4>
                  <div>
                     <div class="section">
                        <p>在为所有用户提供新版本（升级的应用程序）之后，退出旧版本（原始应用程序），以便除<code class="codeph">SYS</code>之外的任何用户都不能使用旧版本。
                        </p>
                        <div class="infoboxnote" id="GUID-023BBAD2-16DB-4E08-A4AF-183633B211CD__GUID-66ABC8B4-0C73-4158-9F71-FABF0974259E">
                           <p class="notep1">注意：</p>
                           <p>如果旧版本是数据库默认版本，则在退出旧版本之前将另一版本作为数据库默认版本：</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE DEFAULT EDITION = <span class="italic">edition_name</span>
</pre></div>
                        <p>要退出版本，您必须从每个受助者撤消该版本的<code class="codeph">USE</code>权限。要列出受助者，请使用此查询，其中： <code class="codeph">e</code>是要删除的版本名称的占位符：</p><pre class="oac_no_warn" dir="ltr">SELECT GRANTEE，来自DBA_TAB_PRIVS的特权，其中TABLE_NAME =：e AND TYPE ='EDITION'/</pre><p>退出版本时，请相应地更新评估版本和非编辑对象的不可用版本。</p>
                        <div class="infoboxnotealso" id="GUID-023BBAD2-16DB-4E08-A4AF-183633B211CD__NONEDITIONEDOBJECTSTHATCANDEPENDONE-CBC6D8C4">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="editions.html#GUID-489F83FF-A86D-47BE-9B28-952E076C3874">可以依赖于版本化对象</a>的非<a href="editions.html#GUID-489F83FF-A86D-47BE-9B28-952E076C3874">编辑对象，</a>以获取有关更改评估版本和未使用版本的信息</p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">REVOKE</code>语句的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01609" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code>语句的信息，请<a href="../sqlrf/ALTER-DATABASE.html#SQLRF00802" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS99919"></a><div class="props_rev_3"><a id="GUID-E6DBE175-2598-430F-9D0A-AB22CAE7DDDA" name="GUID-E6DBE175-2598-430F-9D0A-AB22CAE7DDDA"></a><h4 id="ADFNS-GUID-E6DBE175-2598-430F-9D0A-AB22CAE7DDDA" class="sect4">删除版本</h4>
                  <div>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-E6DBE175-2598-430F-9D0A-AB22CAE7DDDA__GUID-1C55F191-1C86-4392-A23B-ECFB7AA4CA0C">
                           <p class="notep1">注意：</p>
                           <p>如果版本包含<a href="editions.html#GUID-F78E82CC-3239-436E-B3DC-2D09BA66040D">crossedition触发器</a> ，请在删除版本之前参阅<a href="editions.html#GUID-F78E82CC-3239-436E-B3DC-2D09BA66040D">删除Crossedition触发器</a> 。
                           </p>
                        </div>
                        <p><a id="d160084e5802" class="indexterm-anchor"></a>要删除版本，请使用<code class="codeph">DROP</code> <code class="codeph">EDITION</code>语句。如果版本具有实际对象，则必须指定<code class="codeph">CASCADE</code>子句，该子句删除实际对象。
                        </p>
                        <p>如果在正常结束（例如，电源故障）之前中断<code class="codeph">DROP</code> <code class="codeph">EDITION</code> <span class="italic"><code class="codeph">edition</code></span> <code class="codeph">CASCADE</code>语句，则静态数据字典视图<code class="codeph">*_EDITIONS</code>显示<code class="codeph">USABLE</code> for <span class="italic"><code class="codeph">edition</code></span>值为<code class="codeph">NO</code> 。您可以在这种不可用的<span class="italic"><code class="codeph">edition</code></span>上执行的唯一操作是<code class="codeph">DROP</code> <code class="codeph">EDITION</code> <code class="codeph">CASCADE</code> 。</p>
                        <p>您可以在以下情况下删除版本：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您想要回滚应用程序升级。</p>
                           </li>
                           <li>
                              <p>（可选）您已退出该版本。</p>
                           </li>
                        </ul>
                        <p>只有在所有这些陈述都成立时，您才可以删除版本：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>该版本是根版或叶版。</p>
                           </li>
                           <li>
                              <p>该版本未使用。（也就是说，它不是会话的当前版本或会话版本。）</p>
                           </li>
                           <li>
                              <p>该版本不是数据库默认版本。</p>
                           </li>
                        </ul>
                        <p>如果版本是root，并且<code class="codeph">COMPATIBLE</code>参数设置为12.2.0或更高版本，则该版本将标记为不可用。被覆盖的对象是一个已编辑的对象，不再在任何可用的后代版本中继承。任何不可用版本中的每个覆盖对象都将通过自动计划维护过程进行删除。在根不可用版本中没有任何对象后，版本本身会自动删除。对于找到的每个不可用的根版本，将重复此清理过程。用户可以通过手动执行<code class="codeph">DBMS_EDITIONS_UTILITIES</code>按需运行此过程。 <code class="codeph">CLEAN_UNUSABLE_EDITIONS</code>过程（请参阅<a href="../arpls/DBMS_EDITIONS_UTILITIES.html#ARPLS-GUID-40AD8944-D7E0-4ACA-9A05-3DC502F47D27" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考</span></a> ）。
                        </p>
                        <p>如果<code class="codeph">COMPATIBLE</code>设置为12.1.0或更低，则根版本必须没有其后代继承的对象。必须先实现或删除从根版本继承的每个对象，然后才能删除该版本。
                        </p>
                        <p>如果版本是叶子，则会删除叶子中的每个已编辑对象，然后在语句完成执行之前进行编辑。</p>
                        <div class="infoboxnote" id="GUID-E6DBE175-2598-430F-9D0A-AB22CAE7DDDA__GUID-5312F8CA-A920-4630-A904-090FCD5F016A">
                           <p class="notep1">注意：</p>
                           <p>删除版本后，无法重新编译<a id="d160084e5907" class="indexterm-anchor"></a>如果满足以下两个条件，则取决于已编辑对象的非编辑对象：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>非专用对象包含ADT。</p>
                              </li>
                              <li>
                                 <p>当使用<code class="codeph">FORCE</code>版本启用了所依赖的编辑对象的所有者时，未编辑的对象无效。</p>
                              </li>
                           </ul>
                        </div>
                        <p>要在子版本中显式实现继承的对象：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>让儿童版成为您的会话版。</span><div>
                              <p>有关说明，请参阅<a href="editions.html#GUID-943C7AE8-6A5D-47EC-AC45-3132518AF36B">更改会话版</a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>使用适当的<code class="codeph">ALTER</code>语句和<code class="codeph">COMPILE</code>编译对象。对于PL / SQL对象，还要指定<code class="codeph">REUSE</code> <code class="codeph">SETTINGS</code> 。</span><div>
                              <p>例如，此语句实现了过程<code class="codeph">p1</code> ：</p><pre class="oac_no_warn" dir="ltr">更改程序p1 COMPILE REUSE SETTINGS</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>删除版本时，请更新<a id="d160084e5963" class="indexterm-anchor"></a>评估版和<a id="d160084e5968" class="indexterm-anchor"></a>因此，无法使用的非编辑对象的版本。
                        </p>
                        <div class="infoboxnotealso" id="GUID-E6DBE175-2598-430F-9D0A-AB22CAE7DDDA__GUID-AB865864-6AF4-446A-A04B-34A27017379F">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">ALTER</code> <code class="codeph">LIBRARY</code>语句的信息，请<a href="../sqlrf/ALTER-LIBRARY.html#SQLRF00818" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">ALTER</code> <code class="codeph">VIEW</code>语句的信息，请<a href="../sqlrf/ALTER-VIEW.html#SQLRF01104" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">ALTER</code> <code class="codeph">FUNCTION</code>语句的信息，请<a href="../lnpls/ALTER-FUNCTION-statement.html#LNPLS99999" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">ALTER</code> <code class="codeph">PACKAGE</code>语句的信息，请<a href="../lnpls/ALTER-PACKAGE-statement.html#LNPLS99998" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">ALTER</code> <code class="codeph">PROCEDURE</code>语句的信息，请<a href="../lnpls/ALTER-PROCEDURE-statement.html#LNPLS99997" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">ALTER</code> <code class="codeph">TRIGGER</code>语句的信息，请<a href="../lnpls/ALTER-TRIGGER-statement.html#LNPLS99996" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">ALTER</code> <code class="codeph">TYPE</code>语句的信息，请<a href="../lnpls/ALTER-TYPE-statement.html#LNPLS99995" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">DROP</code> <code class="codeph">EDITION</code>语句的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF20019" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p>有关PL / SQL对象的<code class="codeph">ALTER</code>语句的信息，请<a href="../lnpls/sql-statements-for-stored-plsql-units.html#LNPLS99974" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p>有关SQL对象的<code class="codeph">ALTER</code>语句的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF008" target="_blank"><span class="italic">参见“Oracle数据库SQL语言参考</span></a> ”。
                                 </p>
                              </li>
                              <li>
                                 <p><a href="editions.html#GUID-489F83FF-A86D-47BE-9B28-952E076C3874">可以依赖于版本化对象</a>的非<a href="editions.html#GUID-489F83FF-A86D-47BE-9B28-952E076C3874">编辑对象，</a>以获取有关更改评估版本和未使用版本的信息</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADFNS1293"></a><a id="ADFNS0202"></a><div class="props_rev_3"><a id="GUID-B027A882-3848-4DA1-ABF3-6F9F0F7EFB0B" name="GUID-B027A882-3848-4DA1-ABF3-6F9F0F7EFB0B"></a><h3 id="ADFNS-GUID-B027A882-3848-4DA1-ABF3-6F9F0F7EFB0B" class="sect3">编辑视图</h3>
               <div>
                  <p>在非编辑视图中，您可以定义的唯一触发器类型是<code class="codeph">INSTEAD</code> <code class="codeph">OF</code>触发器。在编辑视图中，您可以定义可以在表上定义的每种类型的触发器（除了交叉触发器，它们是临时触发器和<code class="codeph">INSTEAD</code> <code class="codeph">OF</code>触发器）。因此，由于可以对其进行编辑，因此通过编辑视图可以将基表视为基表的编辑。但是，您无法向版本视图添加索引或约束;如果升级的应用程序需要新索引或约束，则必须将它们添加到基表。
                  </p>
                  <div class="infoboxnote" id="GUID-B027A882-3848-4DA1-ABF3-6F9F0F7EFB0B__GUID-AAE65B2B-AEA0-4CAB-8414-CBF8A9BE20D1">
                     <p class="notep1">注意：</p>
                     <p>如果要更改基表的基表或索引，请参阅<span class="q">“ <a href="sql-processing-for-application-developers.html#GUID-42F52650-84EC-4D7C-B5A8-FBEFE73366C2">非阻塞和阻止DDL语句”</a> 。</span></p>
                  </div>
                  <p>版本控制视图从单个基表中选择列的子集，并可选择为它们提供别名。在提供别名时，编辑视图将物理列名称（由基表使用）映射到逻辑列名称（由应用程序使用）。版本化视图就像是表的API。</p>
                  <p>通过编辑视图访问表而不是直接访问表没有性能损失。也就是说，如果SQL <code class="codeph">SELECT</code> ， <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code>或<code class="codeph">MERGE</code>语句使用一个或多个版本视图，一次或多次，并使用其基表的名称替换每个版本化视图名称，并在必要时调整列名称，表现不会改变。
                  </p>
                  <p>静态数据字典视图<code class="codeph">*_EDITIONING_VIEWS</code>描述了会话版中可见的数据库中的每个版本视图。<code class="codeph">*_EDITIONING_VIEWS_AE</code>描述了每个版本中数据库中每个版本视图中的每个实际对象。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-B027A882-3848-4DA1-ABF3-6F9F0F7EFB0B__GUID-4A8544E6-D2F7-42F5-A3D6-C1B38545664F">话题：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="editions.html#GUID-0732E020-438E-436B-A0E4-234EAF60D8DE">创建版本视图</a></p>
                        </li>
                        <li>
                           <p><a href="editions.html#GUID-34C95B6B-CB41-4ED0-B965-432A346CD488">分区扩展版本视图名称</a></p>
                        </li>
                        <li>
                           <p><a href="editions.html#GUID-3B80F0F0-D893-4499-B172-1C7F1413429D">改变版本视图的可写性</a></p>
                        </li>
                        <li>
                           <p><a href="editions.html#GUID-0C09AC34-6E58-479D-98A6-8A8B10E4F174">替换版本视图</a></p>
                        </li>
                        <li>
                           <p><a href="editions.html#GUID-A483D542-35A4-45D8-8989-953AD88F30A4">删除或重命名的基表</a></p>
                        </li>
                        <li>
                           <p><a href="editions.html#GUID-A2E893BC-4ADA-4F4D-A9CB-0011B93ACACC">将索引和约束添加到基表</a></p>
                        </li>
                        <li>
                           <p><a href="editions.html#GUID-E11AE837-565C-44BF-810D-AC99FEAD7CBA">SQL优化器索引提示</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-B027A882-3848-4DA1-ABF3-6F9F0F7EFB0B__GUID-9DBBB268-5D23-4872-82F7-F9051CFF11B8">
                        <p class="notep1">也可以看看：</p>
                        <p>有关静态数据字典视图的更多信息，请参阅<span class="italic">Oracle数据库参考</span> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20668" target="_blank"><code class="codeph">*_EDITIONING_VIEWS</code></a>和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20683" target="_blank"><code class="codeph">*_EDITIONING_VIEWS_AE</code></a> 。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS99916"></a><div class="props_rev_3"><a id="GUID-0732E020-438E-436B-A0E4-234EAF60D8DE" name="GUID-0732E020-438E-436B-A0E4-234EAF60D8DE"></a><h4 id="ADFNS-GUID-0732E020-438E-436B-A0E4-234EAF60D8DE" class="sect4">创建版本视图</h4>
                  <div>
                     <div class="section">
                        <p>在创建版本视图之前，其所有者必须启用版本，并且架构对象类型<code class="codeph">VIEW</code>必须在其所有者中可编辑。
                        </p>
                        <p>要创建版本视图，请使用带有关键字“ <code class="codeph">EDITIONING</code>的SQL语句<code class="codeph">CREATE</code> <code class="codeph">VIEW</code> 。要使编辑视图为只读，请指定<code class="codeph">WITH</code> <code class="codeph">READ</code> <code class="codeph">ONLY</code> ;使其读写，省略<code class="codeph">WITH</code> <code class="codeph">READ</code> <code class="codeph">ONLY</code> 。不指定<code class="codeph">NONEDITIONABLE</code> ，否则会发生错误。
                        </p>
                        <p>如果版本控制视图是<span class="bold">只读的</span> ，则未更改的应用程序的用户可以查看基表中的数据，但无法更改它。基表具有<span class="bold">半可用性</span> 。对于诸如在线词典之类的应用程序而言，半可用性是可接受的，用户可以阅读但不会更改。如果未在基表上定义crossedition触发器，则使编辑视图为只读。
                        </p>
                        <p>如果编辑视图是<span class="bold">读写的</span> ，则未更改的应用程序的用户可以查看和更改基表中的数据。基表具有<span class="bold">最大可用性</span> 。用户提交采购订单等在线商店等应用程序需要最大可用性。如果在基表上定义了交叉触发器，请将编辑视图设置为读写。
                        </p>
                        <p>由于版本控制视图只能从基表中选择列的子集并为它们提供别名，因此<code class="codeph">CREATE</code> <code class="codeph">VIEW</code>的<code class="codeph">CREATE</code> <code class="codeph">VIEW</code>语句具有限制。违反这些限制会导致视图创建失败，即使您指定<code class="codeph">FORCE</code> 。</p>
                        <div class="infoboxnotealso" id="GUID-0732E020-438E-436B-A0E4-234EAF60D8DE__GUID-23701F3A-0451-4DCD-8E6E-BA771BF3F6ED">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关使用<code class="codeph">CREATE</code> <code class="codeph">VIEW</code>语句创建编辑视图（包括限制）的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01504" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p><a href="editions.html#GUID-FF93CEED-D23A-48D3-8FD7-5B0FB22024DF">为用户启用版本</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS913"></a><div class="props_rev_3"><a id="GUID-34C95B6B-CB41-4ED0-B965-432A346CD488" name="GUID-34C95B6B-CB41-4ED0-B965-432A346CD488"></a><h4 id="ADFNS-GUID-34C95B6B-CB41-4ED0-B965-432A346CD488" class="sect4">分区扩展版本视图名称</h4>
                  <div>
                     <p>在分区表上定义的版本视图可以具有分区扩展名，其中分区和子分区名称引用基表的分区和子分区。</p>
                     <p>支持分区扩展表名的数据操作语言（DML）语句也支持分区扩展版本视图名称。这些陈述是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">删除</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">插入</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">选择</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">UPDATE</code></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-34C95B6B-CB41-4ED0-B965-432A346CD488__GUID-C11D985B-4CA1-48FD-8506-4AAEBBFA281B">
                        <p class="notep1">也可以看看：</p>
                        <p>有关引用分区表的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF00223" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                     </div>
                  </div>
               </div><a id="ADFNS99915"></a><div class="props_rev_3"><a id="GUID-3B80F0F0-D893-4499-B172-1C7F1413429D" name="GUID-3B80F0F0-D893-4499-B172-1C7F1413429D"></a><h4 id="ADFNS-GUID-3B80F0F0-D893-4499-B172-1C7F1413429D" class="sect4">改变版本视图的可写性</h4>
                  <div>
                     <div class="section">
                        <p>要将现有的编辑视图从只读更改为读写，请使用SQL语句<code class="codeph">ALTER</code> <code class="codeph">VIEW</code> <code class="codeph">READ</code> <code class="codeph">WRITE</code> 。要将现有的编辑视图从读写更改为只读，请使用SQL语句<code class="codeph">ALTER</code> <code class="codeph">VIEW</code> <code class="codeph">READ</code> <code class="codeph">ONLY</code> 。</p>
                        <div class="infoboxnotealso" id="GUID-3B80F0F0-D893-4499-B172-1C7F1413429D__GUID-099CE4D1-8ECD-47D9-AC43-36860A949D5B">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">ALTER</code> <code class="codeph">VIEW</code>语句的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01104" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS911"></a><div class="props_rev_3"><a id="GUID-0C09AC34-6E58-479D-98A6-8A8B10E4F174" name="GUID-0C09AC34-6E58-479D-98A6-8A8B10E4F174"></a><h4 id="ADFNS-GUID-0C09AC34-6E58-479D-98A6-8A8B10E4F174" class="sect4">替换版本视图</h4>
                  <div>
                     <div class="section">
                        <p>要替换版本视图，请使用带有<code class="codeph">OR</code> <code class="codeph">REPLACE</code>子句的SQL语句<code class="codeph">CREATE</code> <code class="codeph">VIEW</code>和关键字“ <code class="codeph">EDITIONING</code> 。</p>
                        <p>您只能将版本视图替换为另一个版本视图。将保留在替换的编辑视图上定义的任何触发器。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS912"></a><div class="props_rev_3"><a id="GUID-A483D542-35A4-45D8-8989-953AD88F30A4" name="GUID-A483D542-35A4-45D8-8989-953AD88F30A4"></a><h4 id="ADFNS-GUID-A483D542-35A4-45D8-8989-953AD88F30A4" class="sect4">删除或重命名的基表</h4>
                  <div>
                     <p>如果删除或重命名定义了版本控制视图的基表，则不会删除版本控制视图，但版本控制视图及其依赖项将变为无效。但是，版本视图上定义的任何触发器仍然存在。</p>
                  </div>
               </div><a id="ADFNS914"></a><div class="props_rev_3"><a id="GUID-A2E893BC-4ADA-4F4D-A9CB-0011B93ACACC" name="GUID-A2E893BC-4ADA-4F4D-A9CB-0011B93ACACC"></a><h4 id="ADFNS-GUID-A2E893BC-4ADA-4F4D-A9CB-0011B93ACACC" class="sect4">将索引和约束添加到基表</h4>
                  <div>
                     <div class="section">
                        <p>如果升级的应用程序需要新索引或约束，则必须将它们添加到基表。您无法将它们添加到版本视图中。</p>
                        <p>如果新索引可能会对旧版本（原始应用程序）产生负面影响，请使它们不可见。在必须使用新索引的crossedition触发器中，在<code class="codeph">INDEX</code>提示中指定它们。
                        </p>
                        <p>当所有用户仅使用升级的应用程序时：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果新索引仅由交叉触发器使用，则删除它们。</p>
                           </li>
                           <li>
                              <p>如果新索引在升级的应用程序中有用，请使它们可见。</p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-A2E893BC-4ADA-4F4D-A9CB-0011B93ACACC__GUID-3BAEEC67-F250-44C1-A442-6011A1D10A65">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="indexes.html#GUID-58E6B9ED-06AE-4232-806B-79C28E7F7956">管理索引指南</a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">INDEX</code>提示的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF50405" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p><a href="editions.html#GUID-E11AE837-565C-44BF-810D-AC99FEAD7CBA">SQL优化器索引提示</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS918"></a><div class="props_rev_3"><a id="GUID-E11AE837-565C-44BF-810D-AC99FEAD7CBA" name="GUID-E11AE837-565C-44BF-810D-AC99FEAD7CBA"></a><h4 id="ADFNS-GUID-E11AE837-565C-44BF-810D-AC99FEAD7CBA" class="sect4">SQL优化器索引提示</h4>
                  <div>
                     <p>SQL优化器索引提示是根据参与索引的列的逻辑名称指定的。使用逻辑列名在版本控制视图上指定的任何SQL优化程序索引提示必须映射到基表中相应物理列上的索引。</p>
                     <div class="infoboxnotealso" id="GUID-E11AE837-565C-44BF-810D-AC99FEAD7CBA__GUID-BC9DFFAB-4A26-4821-9C9A-763C0E1782E1">
                        <p class="notep1">也可以看看：</p>
                        <p>有关使用提示的信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF00219" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                     </div>
                  </div>
               </div>
            </div><a id="ADFNS1294"></a><a id="ADFNS0203"></a><div class="props_rev_3"><a id="GUID-474231E0-F8D7-4E39-86F5-BCC52FACEB37" name="GUID-474231E0-F8D7-4E39-86F5-BCC52FACEB37"></a><h3 id="ADFNS-GUID-474231E0-F8D7-4E39-86F5-BCC52FACEB37" class="sect3">Crossedition触发器</h3>
               <div>
                  <p>交叉触发和非交叉触发之间最重要的区别在于它们如何与版本交互。交叉触发器仅在其实际版本中可见，从不在后代版本中。前向交叉触发器将数据从旧版本使用的列移动到新版本使用的列;反向交叉触发反向。</p>
                  <p>其他重要的区别是：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>可以使用在其他表上定义的触发器对Crossedition触发器进行排序，而非crossedition触发器只能与在同一个表上定义的其他触发器一起排序。</p>
                     </li>
                     <li>
                        <p>Crossedition触发器是临时的 - 您在将重组的表提供给所有用户之后删除它们。</p>
                     </li>
                  </ul>
                  <div class="section">
                     <p class="subhead2" id="GUID-474231E0-F8D7-4E39-86F5-BCC52FACEB37__GUID-1BA87FCB-C09F-401E-9F53-91A163AC815E">话题：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="editions.html#GUID-25716FEA-3F91-4EE1-9AC0-579D3A5DBFE3">前向交叉触发器</a></p>
                        </li>
                        <li>
                           <p><a href="editions.html#GUID-79EBB047-E313-4BF6-BA3D-85D5215C5618">反向交叉触发器</a></p>
                        </li>
                        <li>
                           <p><a href="editions.html#GUID-DD52E151-0C01-4EFD-8E88-33215FF5A0D1">Crossedition触发器与版本的交互</a></p>
                        </li>
                        <li>
                           <p><a href="editions.html#GUID-12AAB773-F459-4C61-A96E-4DAB506656CA">创建一个Crossedition触发器</a></p>
                        </li>
                        <li>
                           <p><a href="editions.html#GUID-90F88E8E-D924-473B-9A61-B81909ECFA3A">将数据从升级前表示转换为升级后表示</a></p>
                        </li>
                        <li>
                           <p><a href="editions.html#GUID-F78E82CC-3239-436E-B3DC-2D09BA66040D">删除Crossedition触发器</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-474231E0-F8D7-4E39-86F5-BCC52FACEB37__GUID-3A373AEC-44A6-429C-9D4A-FDABA629A012">
                        <p class="notep1">也可以看看：</p>
                        <p>有关触发器的一般信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS020" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS99910"></a><div class="props_rev_3"><a id="GUID-25716FEA-3F91-4EE1-9AC0-579D3A5DBFE3" name="GUID-25716FEA-3F91-4EE1-9AC0-579D3A5DBFE3"></a><h4 id="ADFNS-GUID-25716FEA-3F91-4EE1-9AC0-579D3A5DBFE3" class="sect4">前向交叉触发器</h4>
                  <div>
                     <p>您在升级后版本中对表所做的DML更改仅写入新列或新表，而不会写入升级前（祖先）版本的用户可能正在读取或写入的列。但是，如果祖先版本的用户更改了表格数据，则您看到的版本控制视图必须准确反映这些更改。这是通过前向交叉触发实现的。</p>
                     <p>前向交叉触发器定义<span class="bold">变换</span> ，该<span class="bold">变换</span>是用于将旧行变换为一个或多个新行的规则。<span class="bold">旧行</span>是升级前表示中的一行数据。<span class="bold">新行</span>是升级后表示中的一行数据。触发器的名称是指触发器本身以及触发器定义的变换。
                     </p>
                  </div>
               </div><a id="ADFNS99909"></a><div class="props_rev_3"><a id="GUID-79EBB047-E313-4BF6-BA3D-85D5215C5618" name="GUID-79EBB047-E313-4BF6-BA3D-85D5215C5618"></a><h4 id="ADFNS-GUID-79EBB047-E313-4BF6-BA3D-85D5215C5618" class="sect4">反向交叉触发器</h4>
                  <div>
                     <p>如果升级前和升级后的版本将同时正常使用（热翻转），请使用反向交叉触发器以确保当升级后版本的用户对表数据进行更改时，更改会准确地反映出来在升级前的版本中。</p>
                  </div>
               </div><a id="ADFNS694"></a><a id="ADFNS99908"></a><div class="props_rev_3"><a id="GUID-DD52E151-0C01-4EFD-8E88-33215FF5A0D1" name="GUID-DD52E151-0C01-4EFD-8E88-33215FF5A0D1"></a><h4 id="ADFNS-GUID-DD52E151-0C01-4EFD-8E88-33215FF5A0D1" class="sect4">Crossedition触发器与版本的交互</h4>
                  <div>
                     <p>交叉触发和非交叉触发之间最重要的区别在于它们如何与版本交互。</p>
                     <p>在本主题中， <span class="bold">当前版本</span>是运行触发DML语句的版本。当前版本可能与会话版本不同。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DD52E151-0C01-4EFD-8E88-33215FF5A0D1__GUID-EB7687C6-4EAD-4517-A53C-34C78537C0CB">话题：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="editions.html#GUID-791B49DE-C10A-4BCE-8667-AA3BB103C67C">哪些触发器是可见的</a></p>
                           </li>
                           <li>
                              <p><a href="editions.html#GUID-33EF4573-6616-421C-9636-BE3CBD5436DD">什么样的触发器可以触发</a></p>
                           </li>
                           <li>
                              <p><a href="editions.html#GUID-626EB84F-B6D6-482C-BCF3-E565EE74284A">发射顺序</a></p>
                           </li>
                           <li>
                              <p><a href="editions.html#GUID-CECB6C28-9750-4405-A3BE-77BC89C46652">Crossedition触发器执行</a></p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-DD52E151-0C01-4EFD-8E88-33215FF5A0D1__NOTE-1342-CBC82817">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="editions.html#GUID-E98E984F-5DB7-44FE-9C88-70936690EC4A">当前版本可能与会话版不同</a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADFNS921"></a><div class="props_rev_3"><a id="GUID-791B49DE-C10A-4BCE-8667-AA3BB103C67C" name="GUID-791B49DE-C10A-4BCE-8667-AA3BB103C67C"></a><h5 id="ADFNS-GUID-791B49DE-C10A-4BCE-8667-AA3BB103C67C" class="sect5">哪些触发器是可见的</h5>
                     <div>
                        <p>版本继承非串行触发器的方式与继承其他已编辑对象的方式相同（请参阅<a href="editions.html#GUID-6E30D1F1-AD6D-44CB-AF7B-714FB251E7DC">版本化对象和更改后复制</a> ）。
                        </p>
                        <p>版本不继承交叉触发器。交叉触发器可能会响应另一个版本运行的DML语句而触发，但其名称仅在创建它的版本中可见。因此，版本可以重用在祖先版本中创建的交叉触发器的名称。重用crossedition触发器的名称不会更改旧触发器触发的条件。</p>
                        <p>出现在静态数据字典视图中的Crossedition触发器是当前版本中的实际对象。</p>
                     </div>
                  </div><a id="ADFNS695"></a><a id="ADFNS922"></a><div class="props_rev_3"><a id="GUID-33EF4573-6616-421C-9636-BE3CBD5436DD" name="GUID-33EF4573-6616-421C-9636-BE3CBD5436DD"></a><h5 id="ADFNS-GUID-33EF4573-6616-421C-9636-BE3CBD5436DD" class="sect5">什么样的触发器可以触发</h5>
                     <div>
                        <p>触发什么类型的触发器取决于触发DML语句的类别。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-33EF4573-6616-421C-9636-BE3CBD5436DD__GUID-7FAEE213-1F2A-44CE-8B16-12E08C7B5EBD">分类：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="editions.html#GUID-07D608F7-E8E1-425A-8853-AAF4081E7432">正向交叉触发器SQL</a></p>
                              </li>
                              <li>
                                 <p><a href="editions.html#GUID-89084E8C-0CAA-47E4-B19C-939B04560D18">反向交叉触发器SQL</a></p>
                              </li>
                              <li>
                                 <p><a href="editions.html#GUID-C9996C1E-81A5-4FDF-BAFF-39F24056DFD5">应用程序SQL</a></p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-33EF4573-6616-421C-9636-BE3CBD5436DD__GUID-12AFF9BD-DEBE-4DC4-95A0-F5761290D079">
                              <p class="notep1">注意：</p>
                              <p>关于SQL <code class="codeph">INSERT</code>语句的<code class="codeph">APPEND</code>提示不会阻止激发交叉触发器。
                              </p>
                              <div class="p">
                                 <div class="infoboxnotealso" id="GUID-33EF4573-6616-421C-9636-BE3CBD5436DD__NOTE-133231-CBC84EBE">
                                    <p class="notep1">也可以看看：</p>
                                    <p>有关<code class="codeph">APPEND</code>提示的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF50901" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                                 </div>
                              </div>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div><a id="ADFNS1295"></a><div class="props_rev_3"><a id="GUID-07D608F7-E8E1-425A-8853-AAF4081E7432" name="GUID-07D608F7-E8E1-425A-8853-AAF4081E7432"></a><h6 id="ADFNS-GUID-07D608F7-E8E1-425A-8853-AAF4081E7432" class="sect6">正向交叉触发器SQL</h6>
                        <div>
                           <p><span class="bold">前向交叉触发器SQL</span>是以下列方式之一执行的SQL：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>直接从前方交叉触发器的身体</p>
                                 <p>仅当子程序是前向交叉触发的本地时，此类别才包含调用的子程序中的SQL。</p>
                              </li>
                              <li>
                                 <p>通过调用<code class="codeph">DBMS_SQL</code> 。 <code class="codeph">PARSE</code>过程， <code class="codeph">apply_crossedition_trigger</code>参数的非<code class="codeph">NULL</code>值</p>
                                 <p><code class="codeph">apply_crossedition_trigger</code>参数唯一有效的非<code class="codeph">NULL</code>值是前向交叉触发的非限定名称。
                                 </p>
                              </li>
                           </ul>
                           <p>如果前向交叉触发器在另一个编译单元中调用子程序，则只有在<code class="codeph">DBMS_SQL</code>调用时，子程序中的SQL才是前向交叉触发器SQL。 <code class="codeph">PARSE</code>过程， <code class="codeph">apply_crossedition_trigger</code>参数的非<code class="codeph">NULL</code>值。
                           </p>
                           <p>前向交叉触发器SQL只能触发满足所有这些条件的触发器：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>它们是前向交叉触发器。</p>
                              </li>
                              <li>
                                 <p>它们是在当前版本或当前版本的后代中创建的。</p>
                              </li>
                              <li>
                                 <p>他们明确地遵循前进的交叉触发。</p>
                              </li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-07D608F7-E8E1-425A-8853-AAF4081E7432__NOTE-136-CBC8BA57">
                              <p class="notep1">也可以看看：</p>
                              <p>有关<code class="codeph">DBMS_SQL</code>更多信息，请<a href="../arpls/DBMS_SQL.html#ARPLS058" target="_blank"><span class="italic">参见Oracle Database PL / SQL包和类型参考</span></a> 。 <code class="codeph">PARSE</code>程序</p>
                           </div>
                        </div>
                     </div><a id="ADFNS1296"></a><div class="props_rev_3"><a id="GUID-89084E8C-0CAA-47E4-B19C-939B04560D18" name="GUID-89084E8C-0CAA-47E4-B19C-939B04560D18"></a><h6 id="ADFNS-GUID-89084E8C-0CAA-47E4-B19C-939B04560D18" class="sect6">反向交叉触发器SQL</h6>
                        <div>
                           <p><span class="bold">反向交叉触发器SQL</span>是直接从反向交叉触发器的主体执行的SQL。仅当子程序是反向交叉触发的本地时，此类别才包含调用的子程序中的SQL。
                           </p>
                           <p>反向交叉触发器SQL只能触发满足所有这些条件的触发器：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>它们是反向交叉触发器。</p>
                              </li>
                              <li>
                                 <p>它们是在当前版本或当前版本的祖先中创建的。</p>
                              </li>
                              <li>
                                 <p>它们明确地位于运行的反向交叉触发之前。</p>
                              </li>
                           </ul>
                        </div>
                     </div><a id="ADFNS1297"></a><div class="props_rev_3"><a id="GUID-C9996C1E-81A5-4FDF-BAFF-39F24056DFD5" name="GUID-C9996C1E-81A5-4FDF-BAFF-39F24056DFD5"></a><h6 id="ADFNS-GUID-C9996C1E-81A5-4FDF-BAFF-39F24056DFD5" class="sect6">应用程序SQL</h6>
                        <div>
                           <p><span class="bold">Application SQL</span>是除了crossedition触发器SQL之外的所有SQL，包括这些DML语句：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>使用<code class="codeph">DBMS_SQL</code>包编码的动态SQL DML语句。
                                 </p>
                              </li>
                              <li>
                                 <p>由Java存储过程和外部过程执行的DML语句（即使这些过程由<code class="codeph">CALL</code>触发器调用）</p>
                              </li>
                           </ul>
                           <p>根据以下规则，应用程序SQL会触发非交叉触发和交叉触发：</p>
                           <div class="tblformal" id="GUID-C9996C1E-81A5-4FDF-BAFF-39F24056DFD5__GUID-33000B90-6023-47C4-B852-3DF271E8FACF">
                              <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table summarizes the conditions under which the different kinds of triggers can fire." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="25%" id="d160084e8527">触发类型</th>
                                       <th align="left" valign="bottom" width="75%" id="d160084e8530">触发器可以触发的条件</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="25%" id="d160084e8535" headers="d160084e8527 ">
                                          <p>Noncrossedition</p>
                                       </td>
                                       <td align="left" valign="top" width="75%" headers="d160084e8535 d160084e8530 ">
                                          <p>触发器在当前版本中可见并启用。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="25%" id="d160084e8542" headers="d160084e8527 ">
                                          <p>前向交叉</p>
                                       </td>
                                       <td align="left" valign="top" width="75%" headers="d160084e8542 d160084e8530 ">
                                          <p>触发器是在当前版本的后代中创建的。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="25%" id="d160084e8549" headers="d160084e8527 ">
                                          <p>反向交叉</p>
                                       </td>
                                       <td align="left" valign="top" width="75%" headers="d160084e8549 d160084e8530 ">
                                          <p>触发器是在当前版本或当前版本的祖先中创建的。</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <div class="infoboxnotealso" id="GUID-C9996C1E-81A5-4FDF-BAFF-39F24056DFD5__NOTE-135-CBC94EF3">
                              <p class="notep1">也可以看看：</p>
                              <p>有关<code class="codeph">DBMS_SQL</code>包的信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS01108" target="_blank"><span class="italic">Oracle Database PL / SQL语言参考</span></a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ADFNS1057"></a><a id="ADFNS926"></a><div class="props_rev_3"><a id="GUID-626EB84F-B6D6-482C-BCF3-E565EE74284A" name="GUID-626EB84F-B6D6-482C-BCF3-E565EE74284A"></a><h5 id="ADFNS-GUID-626EB84F-B6D6-482C-BCF3-E565EE74284A" class="sect5">发射顺序</h5>
                     <div>
                        <p>对于响应特定DML语句而触发的触发器，触发器必须：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>做对了</p>
                           </li>
                           <li>
                              <p>满足选择标准（例如，DML语句的类型和<code class="codeph">WHEN</code>子句）</p>
                           </li>
                           <li>
                              <p>被启用</p>
                           </li>
                        </ul>
                        <p>对于满足这些要求的触发器，触发顺序取决于<code class="codeph">FOLLOWS</code>和<code class="codeph">PRECEDES</code>子句，触发器类型和版本。
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-626EB84F-B6D6-482C-BCF3-E565EE74284A__GUID-4069F667-E97F-4643-AB49-27299E3A822C">话题：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="editions.html#GUID-2339D4FC-294C-44EB-AA56-1CD203786931">遵循以下条款和条款</a></p>
                              </li>
                              <li>
                                 <p><a href="editions.html#GUID-1D3CBD46-56AA-42AB-B3C4-9C698F04D612">触发类型和版本</a></p>
                              </li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-626EB84F-B6D6-482C-BCF3-E565EE74284A__GUID-BDAEAF6A-2D19-4D84-AADA-D8E652656602">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>有关触发器触发顺序的一般信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS99985" target="_blank"><span class="italic">Oracle Database PL / SQL语言参考</span></a></p>
                                 </li>
                                 <li>
                                    <p><a href="editions.html#GUID-33EF4573-6616-421C-9636-BE3CBD5436DD">什么样的触发器可以触发</a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div><a id="ADFNS927"></a><div class="props_rev_3"><a id="GUID-2339D4FC-294C-44EB-AA56-1CD203786931" name="GUID-2339D4FC-294C-44EB-AA56-1CD203786931"></a><h6 id="ADFNS-GUID-2339D4FC-294C-44EB-AA56-1CD203786931" class="sect6">遵循以下条款和条款</h6>
                        <div>
                           <p>当触发器A和B在同一时间点触发时，如果其中任何一个为真，则在B触发之前触发：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>A明确先于B.</p>
                              </li>
                              <li>
                                 <p>B明确遵循A.</p>
                              </li>
                           </ul>
                           <p>此规则独立于以下条件：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>是启用还是禁用触发器</p>
                              </li>
                              <li>
                                 <p>是否修改了<code class="codeph">UPDATE</code> <code class="codeph">OF</code>子句中指定的列</p>
                              </li>
                              <li>
                                 <p>是否满足<code class="codeph">WHEN</code>条款</p>
                              </li>
                              <li>
                                 <p>触发器是否与相同类型的DML语句（ <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>或<code class="codeph">DELETE</code> ）相关联</p>
                              </li>
                              <li>
                                 <p>触发器是否具有重叠的定时点</p>
                              </li>
                           </ul>
                           <p>未明确遵循或先于彼此的触发器的触发顺序是不可预测的。</p>
                        </div>
                     </div><a id="ADFNS928"></a><div class="props_rev_3"><a id="GUID-1D3CBD46-56AA-42AB-B3C4-9C698F04D612" name="GUID-1D3CBD46-56AA-42AB-B3C4-9C698F04D612"></a><h6 id="ADFNS-GUID-1D3CBD46-56AA-42AB-B3C4-9C698F04D612" class="sect6">触发类型和版本</h6>
                        <div>
                           <p>对于与触发DML语句关联的每个时间点，符合条件的触发器按此顺序触发。在<code class="codeph">FOLLOWS</code> <a href="editions.html#GUID-1D3CBD46-56AA-42AB-B3C4-9C698F04D612__g5068739">1</a>至<a href="editions.html#GUID-1D3CBD46-56AA-42AB-B3C4-9C698F04D612__g5068945">3类中</a> ， <code class="codeph">FOLLOWS</code>关联关系;在第<a href="editions.html#GUID-1D3CBD46-56AA-42AB-B3C4-9C698F04D612__g5069005">4</a>类和第<a href="editions.html#GUID-1D3CBD46-56AA-42AB-B3C4-9C698F04D612__g5069209">5类中</a> ， <code class="codeph">PRECEDES</code>关系适用。
                           </p>
                           <ol>
                              <li id="GUID-1D3CBD46-56AA-42AB-B3C4-9C698F04D612__g5068739">
                                 <p>非交叉触发</p>
                              </li>
                              <li>
                                 <p>在当前版本中创建的前向交叉触发器</p>
                              </li>
                              <li id="GUID-1D3CBD46-56AA-42AB-B3C4-9C698F04D612__g5068945">
                                 <p>在当前版本的后代中创建的前向交叉触发器，按照创建后代的顺序（子，孙等）</p>
                              </li>
                              <li id="GUID-1D3CBD46-56AA-42AB-B3C4-9C698F04D612__g5069005">
                                 <p>当前版本中创建的反向交叉触发器</p>
                              </li>
                              <li id="GUID-1D3CBD46-56AA-42AB-B3C4-9C698F04D612__g5069209">
                                 <p>在当前版本的祖先中创建的反向交叉触发器，与创建祖先的顺序相反（父级，祖父级等）</p>
                              </li>
                           </ol>
                        </div>
                     </div>
                  </div><a id="ADFNS929"></a><div class="props_rev_3"><a id="GUID-CECB6C28-9750-4405-A3BE-77BC89C46652" name="GUID-CECB6C28-9750-4405-A3BE-77BC89C46652"></a><h5 id="ADFNS-GUID-CECB6C28-9750-4405-A3BE-77BC89C46652" class="sect5">Crossedition触发器执行</h5>
                     <div>
                        <p>交叉触发器使用创建它的版本运行。交叉触发器调用的任何代码（包括包引用，PL / SQL子程序调用和SQL语句）也在创建交叉触发器的版本中运行。</p>
                        <p>如果PL / SQL包在多个版本中是实际的，则包变量和其他状态在每个版本中都是私有的，即使在单个会话中也是如此。因为每个交叉触发器及其调用的代码都使用创建了交叉触发器的版本运行，所以同一会话可以实例化具有相同名称的软件包的两个或更多版本。</p>
                     </div>
                  </div>
               </div><a id="ADFNS99912"></a><div class="props_rev_3"><a id="GUID-12AAB773-F459-4C61-A96E-4DAB506656CA" name="GUID-12AAB773-F459-4C61-A96E-4DAB506656CA"></a><h4 id="ADFNS-GUID-12AAB773-F459-4C61-A96E-4DAB506656CA" class="sect4">创建一个Crossedition触发器</h4>
                  <div>
                     <div class="section">
                        <p>在创建crossedition触发器之前，其所有者必须启用版本，并且架构对象类型<code class="codeph">TRIGGER</code>必须在其所有者中可编辑。（有关说明，请<a href="editions.html#GUID-FF93CEED-D23A-48D3-8FD7-5B0FB22024DF">参阅为用户启用版本</a> 。）
                        </p>
                        <p>使用SQL语句<code class="codeph">CREATE</code> <code class="codeph">TRIGGER</code>创建一个crossedition触发器，观察以下规则：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>必须在表上定义crossedition触发器，而不是视图。</p>
                           </li>
                           <li>
                              <p>交叉触发器必须具有<code class="codeph">EDITIONABLE</code>属性。
                              </p>
                           </li>
                           <li>
                              <p>交叉触发必须是DML触发器（简单或复合）。</p>
                              <p>crossedition触发器主体中的DML语句可以是静态SQL语句或本机动态SQL语句。</p>
                           </li>
                           <li>
                              <p>除非指定<code class="codeph">REVERSE</code>否则交叉触发器是向前的。 （指定<code class="codeph">FORWARD</code>是可选的。）
                              </p>
                           </li>
                           <li>
                              <p>仅在创建前向交叉触发或非交叉触发时才允许<code class="codeph">FOLLOWS</code>子句。（ <code class="codeph">FOLLOWS</code>子句指示正在创建的触发器是在指定的触发器触发后触发。）
                              </p>
                           </li>
                           <li>
                              <p>仅在创建反向交叉触发时才允许<code class="codeph">PRECEDES</code>子句。（ <code class="codeph">PRECEDES</code>子句指示正在创建的触发器是在指定的触发器触发之前触发。）
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">FOLLOWS</code>或<code class="codeph">PRECEDES</code>子句中指定的触发器必须存在，但不需要启用或成功编译。
                              </p>
                           </li>
                           <li>
                              <p>与非交叉触发器一样，除非指定<code class="codeph">DISABLE</code>否则会在启用状态下创建交叉触发器。 （指定<code class="codeph">ENABLE</code>是可选的。）
                              </p>
                              <div class="infobox-tip" id="GUID-12AAB773-F459-4C61-A96E-4DAB506656CA__GUID-CEE25584-9243-4A0E-A217-8FD673504281">
                                 <p class="notep1">小费：</p>
                                 <p>在禁用状态下创建交叉触发器，并在确定它们成功编译后启用它们。如果在启用状态下创建它们，并且它们无法编译，则该故障会影响现有应用程序的用户。</p>
                              </div>
                           </li>
                           <li>
                              <p>交叉触发体中的操作必须是<span class="bold">幂等的</span> （即，多次执行操作是多余的;它不会改变结果）。
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-12AAB773-F459-4C61-A96E-4DAB506656CA__GUID-1413AB2D-C900-49A0-B342-9351544161F2">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关使用<code class="codeph">CREATE</code> <code class="codeph">TRIGGER</code>语句创建交叉触发器的更多信息，请<a href="../lnpls/CREATE-TRIGGER-statement.html#LNPLS01374" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p>有关静态SQL的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS00601" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p>有关本机动态SQL的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS01102" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADFNS1299"></a><a id="ADFNS1298"></a><div class="props_rev_3"><a id="GUID-E555E7BE-66FD-466C-8572-85A3289EE008" name="GUID-E555E7BE-66FD-466C-8572-85A3289EE008"></a><h5 id="ADFNS-GUID-E555E7BE-66FD-466C-8572-85A3289EE008" class="sect5">编码前向交叉触发体</h5>
                     <div>
                        <div class="section">
                           <p>前向交叉触发器体内的操作必须是幂等的，因为无法预测：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>主体首先运行旧行的上下文。</p>
                                 <p>可能性是：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>当祖先版本的用户运行触发触发器的DML语句时（ <span class="bold">偶然的更改</span> ）</p>
                                    </li>
                                    <li>
                                       <p><span class="bold">应用</span>触发器定义<span class="bold">的转换时</span> （从旧格式批量升级行到新格式）</p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>每个旧行的身体将运行多少次。</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-E555E7BE-66FD-466C-8572-85A3289EE008__GUID-53D6286F-C38D-4DDC-8950-180BE473A627">话题：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="editions.html#GUID-4918288A-9CDB-47DB-ACDB-38621651E8AD">处理数据转换冲突</a></p>
                              </li>
                              <li>
                                 <p><a href="editions.html#GUID-23274482-B620-4792-9DFF-01549726F9D9">处理对其他表的更改</a></p>
                              </li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-E555E7BE-66FD-466C-8572-85A3289EE008__NOTE-1242-CBCA9338">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="editions.html#GUID-90F88E8E-D924-473B-9A61-B81909ECFA3A">将数据从升级前表示</a>转换为<a href="editions.html#GUID-90F88E8E-D924-473B-9A61-B81909ECFA3A">升级后表示，</a>以获取有关应用转换的信息</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div><a id="ADFNS1304"></a><a id="ADFNS1300"></a><div class="props_rev_3"><a id="GUID-4918288A-9CDB-47DB-ACDB-38621651E8AD" name="GUID-4918288A-9CDB-47DB-ACDB-38621651E8AD"></a><h6 id="ADFNS-GUID-4918288A-9CDB-47DB-ACDB-38621651E8AD" class="sect6">处理数据转换冲突</h6>
                        <div>
                           <div class="section">
                              <p>如果前向交叉触发器填充新表（而不是表的新列），则其主体必须处理数据转换冲突。</p>
                              <p>例如，假设新表的列具有<code class="codeph">UNIQUE</code>约束。偶然的更改会触发前向交叉触发器，该触发器会在新表中插入一行。之后，另一个偶然发生的变化会触发前向交叉触发，或者应用触发器定义的变换。触发器尝试在新表中插入一行，违反<code class="codeph">UNIQUE</code>约束。
                              </p>
                              <p>如果碰撞处理策略取决于触发器运行的原因，则可以使用<code class="codeph">APPLYING_CROSSEDITION_TRIGGER</code>函数确定原因。当直接从触发器主体调用时，如果触发器由于偶然的更改而运行，则此函数返回<code class="codeph">BOOLEAN</code>值<code class="codeph">TRUE</code>如果触发器正在运行，则返回<code class="codeph">FALSE</code> ，因为您正在批量应用转换。（ <code class="codeph">APPLYING_CROSSEDITION_TRIGGER</code>在包<code class="codeph">DBMS_STANDARD</code>定义。它没有参数。）
                              </p>
                              <p>要忽略冲突并插入不与现有行冲突的行，请将<code class="codeph">IGNORE_ROW_ON_DUPKEY_INDEX</code>提示放在<code class="codeph">INSERT</code>语句中。
                              </p>
                              <p>如果您不想忽略此类冲突，但想要知道它们发生的位置以便可以处理它们，请将<code class="codeph">CHANGE_DUPKEY_ERROR_INDEX</code>提示放在<code class="codeph">INSERT</code>或<code class="codeph">UPDATE</code>语句中，指定索引或列集。然后，当针对该索引或一组列发生唯一键冲突时，将报告ORA-38911而不是ORA-00001。您可以为ORA-38911编写异常处理程序。
                              </p>
                              <div class="infoboxnote" id="GUID-4918288A-9CDB-47DB-ACDB-38621651E8AD__GUID-3EE0ED3F-1314-4913-83A4-C68FF3CC6876">
                                 <p class="notep1">注意：</p>
                                 <p>虽然它们具有提示语法，但<code class="codeph">IGNORE_ROW_ON_DUPKEY_INDEX</code>和<code class="codeph">CHANGE_DUPKEY_ERROR_INDEX</code>是<code class="codeph">IGNORE_ROW_ON_DUPKEY_INDEX</code> 。优化器总是使用它们。
                                 </p>
                              </div>
                              <p><a href="editions.html#GUID-4918288A-9CDB-47DB-ACDB-38621651E8AD__BABEDEFI">实施例27-5</a>创建一个使用一个crossedition触发<code class="codeph">APPLYING_CROSSEDITION_TRIGGER</code>功能和<code class="codeph">IGNORE_ROW_ON_DUPKEY_INDEX</code>和<code class="codeph">CHANGE_DUPKEY_ERROR_INDEX</code>提示来处理数据变换的碰撞。触发器将<code class="codeph">table1</code>旧行转换为<code class="codeph">table2</code>新行。表格创建如下：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE table1（键NUMBER，值VARCHAR2（20））; CREATE TABLE table2（键NUMBER，值VARCHAR2（20），last_updated TIMESTAMP）;在table2（key）上创建UNIQUE INDEX i2;</pre><div class="infoboxnotealso" id="GUID-4918288A-9CDB-47DB-ACDB-38621651E8AD__GUID-06FA1FFE-BC09-4D23-B5C8-716910AD5EA8">
                                 <p class="notep1">也可以看看：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>有关<code class="codeph">IGNORE_ROW_ON_DUPKEY_INDEX</code>详细信息，请<code class="codeph">IGNORE_ROW_ON_DUPKEY_INDEX</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF30052" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                                    </li>
                                    <li>
                                       <p>有关<code class="codeph">CHANGE_DUPKEY_ERROR_INDEX</code>详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF30053" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                                    </li>
                                    <li>
                                       <p>有关提示的一般信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF00219" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                                    </li>
                                 </ul>
                              </div>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-4918288A-9CDB-47DB-ACDB-38621651E8AD__BABEDEFI">
                              <p class="titleinexample">示例27-5处理数据转换冲突的交叉触发器</p><pre class="oac_no_warn" dir="ltr">在table1上插入或更新之前创建或替换TRIGGER触发器1对于每个行CROSSEDITION DECLARE row_already_present EXCEPTION; PRAGMA EXCEPTION_INIT（row_already_present，-38911）; BEGIN IF <span class="bold">APPLYING_CROSSEDITION_TRIGGER</span> THEN / *由于应用了变换，触发器正在运行。如果应用程序的旧版本已经导致此触发器插入行，则我们不会在应用转换时修改行。因此，仅当新行尚未存在时才将新行插入到table2中。* / <span class="bold">INSERT / * + IGNORE_ROW_ON_DUPKEY_INDEX（table2（key））* /</span> INTO table2 VALUES（：new.key，：new.value，to_date（'1900-01-01'，'YYYY-MM-DD'））; ELSE / *由于偶然发生的变化，触发器正在运行。如果先前没有触发器已经将相应的行插入到table2中，则插入新行;否则，更新以前插入的行。* / BEGIN <span class="bold">INSERT / * + CHANGE_DUPKEY_ERROR_INDEX（table2（key））* /</span> INTO table2 VALUES（：new.key，：new.value，SYSTIMESTAMP）; row_already_present THEN UPDATE table2 SET value =：new.value，last_updated = SYSTIMESTAMP WHERE key =：new.key; EXCEPTION结束;万一;结束; /</pre></div>
                           <!-- class="example" -->
                        </div>
                     </div><a id="ADFNS1305"></a><div class="props_rev_3"><a id="GUID-23274482-B620-4792-9DFF-01549726F9D9" name="GUID-23274482-B620-4792-9DFF-01549726F9D9"></a><h6 id="ADFNS-GUID-23274482-B620-4792-9DFF-01549726F9D9" class="sect6">处理对其他表的更改</h6>
                        <div>
                           <div class="section">
                              <p>如果前向交叉触发器的主体包含显式SQL语句，这些语句更改除定义触发器之外的表，并且这些表的行与表上的行没有一一对应关系定义了触发器，然后正文代码必须实现一个正确处理这些情况的锁定机制：</p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>两个或多个祖先版本的用户同时为定义触发器的表发出DML语句。</p>
                                 </li>
                                 <li>
                                    <p>祖先版本的至少一个用户为定义了触发器的表发出DML语句。</p>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div>
               </div><a id="ADFNS99907"></a><div class="props_rev_3"><a id="GUID-90F88E8E-D924-473B-9A61-B81909ECFA3A" name="GUID-90F88E8E-D924-473B-9A61-B81909ECFA3A"></a><h4 id="ADFNS-GUID-90F88E8E-D924-473B-9A61-B81909ECFA3A" class="sect4">将数据从升级前表示转换为升级后表示</h4>
                  <div>
                     <div class="section">
                        <p>重新定义组成要升级的应用程序的数据库对象（在新版本中）之后，必须将应用程序数据从其升级前的表示形式（在旧版本中）转换为其升级后的表示形式（在新版本中） 。此转换的规则称为<span class="bold">转换</span> ，它们由前向交叉触发器定义。
                        </p>
                        <p>一些旧行可能通过<span class="bold">偶然的变化</span>转换为新行;也就是说，升级前应用程序的用户所做的更改会触发前向交叉触发器。但是，任何未被偶然更改转换的行仍处于升级前表示形式。要确保将所有旧行转换为新行，必须<span class="bold">应用在</span>存储应用程序数据的表上定义<span class="bold">的转换</span> 。
                        </p>
                        <p>有三种方法可以应用转换：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>触发在表的每一行定义变换的触发器，一次一行。</p>
                           </li>
                           <li>
                              <p>而不是触发触发器，运行一个SQL语句来执行触发器将执行的操作，但速度更快，然后触发跟随该触发器的任何触发器。</p>
                              <p>如果您已替换整个表或创建新表，则建议采用第二种方式。</p>
                           </li>
                           <li>
                              <p>调用过程<code class="codeph">DBMS_EDITIONS_UTILITIES</code> 。 <code class="codeph">SET_NULL_COLUMN_VALUES_TO_EXPR</code>使用元数据操作将转换应用于新列。
                              </p>
                              <p>第三种方式具有最快的安装时间，但是表示转换的表达式存在限制，并且在用实际数据替换元数据之前新列的查询较慢。</p>
                              <p>元数据被实际数据取代：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>在更新的单个列元素中。</p>
                                 </li>
                                 <li>
                                    <p>在使用联机表重新定义来“压缩”表的列的每个元素中。</p>
                                 </li>
                              </ul>
                              <p>。</p>
                           </li>
                        </ul>
                        <p>对于应用转换的前两种方法，请调用<code class="codeph">DBMS_SQL</code> 。 <code class="codeph">PARSE</code>过程或<code class="codeph">DBMS_PARALLEL_EXECUTE</code>包中的子程序。如果您有大量数据，建议使用后者。子程序使您能够以两个高级步骤并行地逐步更新大表中的数据：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>将表中的行集合成较小的块。</span></li>
                        <li><span>并行地将所需的<code class="codeph">UPDATE</code>语句应用于块，每次处理完块时提交。</span></li>
                     </ol>
                     <div class="section">
                        <p>优点是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您一次只锁定一组行，时间相对较短，而不是锁定整个表。</p>
                           </li>
                           <li>
                              <p>如果在整个操作完成之前出现故障，您不会丢失已完成的工作。</p>
                           </li>
                        </ul>
                        <p>对于<code class="codeph">DBMS_SQL</code> 。 <code class="codeph">PARSE</code>过程和<code class="codeph">DBMS_PARALLEL_EXECUTE</code>子程序， <code class="codeph">apply_crossedition_trigger</code> ， <code class="codeph">fire_apply_trigger</code>和<code class="codeph">sql_stmt</code>的实际参数值是相同的：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对于<code class="codeph">apply_crossedition_trigger</code> ，请指定定义要应用的变换的前向交叉接触触发器的名称。
                              </p>
                           </li>
                           <li>
                              <p>要在表的每一行触发触发器，一次一行：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>对于<code class="codeph">fire_apply_trigger</code>的值，请指定<code class="codeph">TRUE</code> 。</p>
                                 </li>
                                 <li>
                                    <p>对于<code class="codeph">sql_stmt</code> ，提供一个SQL语句，其唯一重要的作用是选择要触发的前向交叉触发器;例如，一个<code class="codeph">UPDATE</code>语句，它将某些列设置为每行中自己的现有值。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>要运行执行触发器操作的SQL语句，然后触发该触发器后面的任何触发器：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>对于<code class="codeph">fire_apply_trigger</code>的值，请指定<code class="codeph">FALSE</code> 。</p>
                                 </li>
                                 <li>
                                    <p>对于<code class="codeph">sql_stmt</code> ，提供一个SQL语句，该语句执行前向交叉触发器将执行的操作，但速度更快 - 例如，调用一个或多个PL / SQL子程序的PL / SQL匿名块。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-90F88E8E-D924-473B-9A61-B81909ECFA3A__GUID-490D7198-F5F7-48F6-AD17-918546453034">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">DBMS_SQL</code>更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS058" target="_blank"><span class="italic">参见Oracle Database PL / SQL包和类型参考</span></a> 。 <code class="codeph">PARSE</code>程序</p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">DBMS_PARALLEL_EXECUTE</code>包的更多信息，请<code class="codeph">DBMS_PARALLEL_EXECUTE</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS233" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                              </li>
                              <li>
                                 <p><a href="editions.html#GUID-25716FEA-3F91-4EE1-9AC0-579D3A5DBFE3">前</a>向交叉触发器有关前向交叉触发器的信息</p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">DBMS_EDITIONS_UTILITIES</code>更多信息，请<code class="codeph">DBMS_EDITIONS_UTILITIES</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS73756" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> 。 <code class="codeph">SET_NULL_COLUMN_VALUES_TO_EXPR</code>程序</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADFNS1306"></a><div class="props_rev_3"><a id="GUID-3C63E5A4-3EA7-43D7-B730-D2CCB90DC999" name="GUID-3C63E5A4-3EA7-43D7-B730-D2CCB90DC999"></a><h5 id="ADFNS-GUID-3C63E5A4-3EA7-43D7-B730-D2CCB90DC999" class="sect5">防止丢失更新</h5>
                     <div>
                        <div class="section">
                           <p>要在应用转换时防止丢失更新，请使用以下过程：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>启用交叉触发器。</span></li>
                           <li class="stepexpand"><span>等到提交或回滚对受影响的表的挂起更改。</span><div>
                                 <p>使用<code class="codeph">DBMS_UTILITY</code> 。 <code class="codeph">WAIT_ON_PENDING_DML</code>程序。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>应用转换。</span></li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnote" id="GUID-3C63E5A4-3EA7-43D7-B730-D2CCB90DC999__GUID-64A28948-4F06-47A3-8B88-4E6DCC123FAB">
                              <p class="notep1">注意：</p>
                              <p>这种情况下，前向交叉触发仅更改定义它的表，足以说明风险。假设当尚未启用crossedition触发器时，Session One会对表发出<code class="codeph">UPDATE</code>语句;然后会话2启用交叉触发并立即应用转换。
                              </p>
                              <p>当Session One和Session Two都改变同一行（第<span class="italic">n</span>行）时，现在可以发生竞争条件。机会确定哪个会话首先到达行<span class="italic">n</span> 。两个更新都成功，即使到达第<span class="italic">n</span>行的会话必须等到达到它的会话首先提交其更改并释放其锁定。
                              </p>
                              <p>当第二场比赛赢得比赛时会出现问题。因为它的SQL语句是在启用触发器之后编译的，所以实现该语句的程序也实现了触发器操作;因此，为行<span class="italic">n</span>设置了预期的升级后列值。现在，Session One到达第<span class="italic">n</span>行，并且因为它的SQL语句是在启用触发器之前编译的，所以实现该语句的程序不会实现触发器操作。因此，会话二在升级后列中设置的值不会更改 - 它们反映了源列在会话一更新行<span class="italic">n</span>之前所具有的值。也就是说，会话一的更新的预期副作用将丢失。
                              </p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-3C63E5A4-3EA7-43D7-B730-D2CCB90DC999__NOTE-1232-CBCB2D43">
                              <p class="notep1">也可以看看：</p>
                              <p>有关<code class="codeph">DBMS_UTILITY</code>更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS73275" target="_blank"><span class="italic">参见Oracle Database PL / SQL包和类型参考</span></a> 。 <code class="codeph">WAIT_ON_PENDING_DML</code>程序</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADFNS930"></a><div class="props_rev_3"><a id="GUID-F78E82CC-3239-436E-B3DC-2D09BA66040D" name="GUID-F78E82CC-3239-436E-B3DC-2D09BA66040D"></a><h4 id="ADFNS-GUID-F78E82CC-3239-436E-B3DC-2D09BA66040D" class="sect4">删除Crossedition触发器</h4>
                  <div>
                     <div class="section">
                        <p>要删除交叉触发器，请使用<code class="codeph">DROP</code> <code class="codeph">TRIGGER</code>语句。或者，您可以通过使用带有<code class="codeph">CASCADE</code>子句的<code class="codeph">DROP</code> <code class="codeph">EDITION</code>语句删除它们实际的版本来删除交叉触发器。
                        </p>
                        <p>在这些情况下，您会删除交叉触发器：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您正在回滚应用程序升级（删除升级后版本）。</p>
                              <p>在删除升级后版本之前，必须禁用或删除新列的任何约束。</p>
                           </li>
                           <li>
                              <p>您已完成应用程序升级，并为所有用户提供升级后版本。</p>
                              <p>当所有会话都使用升级后版本时，您可以删除前向交叉触发器。但是，在删除反向交叉触发器之前，必须禁用或删除旧列上的任何约束。</p>
                           </li>
                        </ul>
                        <p>要禁用或删除约束，请使用带有<code class="codeph">DISABLE</code> <code class="codeph">CONSTRAINT</code>或<code class="codeph">DROP</code> <code class="codeph">CONSTRAINT</code>子句的<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句。 。
                        </p>
                        <div class="infoboxnotealso" id="GUID-F78E82CC-3239-436E-B3DC-2D09BA66040D__NOTE-1323-CBCBA0B9">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">DROP</code> <code class="codeph">TRIGGER</code>语句的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS99990" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p><a href="editions.html#GUID-E6DBE175-2598-430F-9D0A-AB22CAE7DDDA">删除版本</a>以获取有关删除版本的更多信息</p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01001" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADFNS1307"></a><a id="ADFNS0204"></a><div class="props_rev_3"><a id="GUID-1B0311B5-CBC7-43E2-9EA0-37DE2E670508" name="GUID-1B0311B5-CBC7-43E2-9EA0-37DE2E670508"></a><h3 id="ADFNS-GUID-1B0311B5-CBC7-43E2-9EA0-37DE2E670508" class="sect3">显示有关EBR功能的信息</h3>
               <div>
                  <div class="section">
                     <p class="subhead2" id="GUID-1B0311B5-CBC7-43E2-9EA0-37DE2E670508__GUID-08F3CB65-6907-4575-84AD-0B0AA7D96C50">话题：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="editions.html#GUID-7095786B-799B-4A56-84D7-81BF8E34AE06">显示有关版本的信息</a></p>
                        </li>
                        <li>
                           <p><a href="editions.html#GUID-EC3C09C5-59CD-443A-A77B-34B3522AB138">显示有关编辑视图的信息</a></p>
                        </li>
                        <li>
                           <p><a href="editions.html#GUID-F8709A6C-9DFE-4F9A-83B4-3FD42DC82F60">显示有关Crossedition触发器的信息</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS932"></a><a id="ADFNS1308"></a><div class="props_rev_3"><a id="GUID-7095786B-799B-4A56-84D7-81BF8E34AE06" name="GUID-7095786B-799B-4A56-84D7-81BF8E34AE06"></a><h4 id="ADFNS-GUID-7095786B-799B-4A56-84D7-81BF8E34AE06" class="sect4">显示有关版本的信息</h4>
                  <div>
                     <div class="section">
                        <p><a href="editions.html#GUID-7095786B-799B-4A56-84D7-81BF8E34AE06__G4932472" title="此表汇总了提供有关版本信息的DBA_字典视图。">表27-1</a>简要描述了显示有关版本信息的静态数据字典视图。
                        </p>
                        <div class="tblformal" id="GUID-7095786B-799B-4A56-84D7-81BF8E34AE06__G4932472">
                           <p class="titleintable">表27-1 * _带有版本信息的字典视图</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="* _包含版本信息的字典视图" width="100%" border="1" summary="This table summarizes the DBA_ dictionary views that provide information about Editions." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="28%" id="d160084e10699">视图</th>
                                    <th align="left" valign="bottom" width="72%" id="d160084e10702">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d160084e10707" headers="d160084e10699 ">
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20634" target="_blank"><code class="codeph">* _EDITIONS</code></a></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d160084e10707 d160084e10702 ">
                                       <p>描述数据库中的每个版本。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d160084e10717" headers="d160084e10699 ">
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20635" target="_blank"><code class="codeph">* _EDITION_COMMENTS</code></a></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d160084e10717 d160084e10702 ">
                                       <p>显示与数据库中每个版本关联的注释。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d160084e10727" headers="d160084e10699 ">
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN23867" target="_blank"><code class="codeph">* _EDITIONED_TYPES</code></a></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d160084e10727 d160084e10702 ">
                                       <p>列出每个模式中默认编辑的模式对象类型。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d160084e10737" headers="d160084e10699 ">
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20146" target="_blank"><code class="codeph">* _OBJECTS</code></a></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d160084e10737 d160084e10702 ">
                                       <p>描述数据库中当前版本中可见的每个对象。对于每个对象，此视图显示它是否可编辑。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d160084e10747" headers="d160084e10699 ">
                                       <p id="GUID-7095786B-799B-4A56-84D7-81BF8E34AE06__G4936767"><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20578" target="_blank"><code class="codeph">* _OBJECTS_AE</code></a></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d160084e10747 d160084e10702 ">
                                       <p>描述每个版本中数据库中的每个对象。对于每个对象，此视图显示它是否可编辑。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d160084e10757" headers="d160084e10699 ">
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20065" target="_blank"><code class="codeph">* _ERRORS</code></a></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d160084e10757 d160084e10702 ">
                                       <p>描述当前版本中数据库中的每个错误。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d160084e10767" headers="d160084e10699 ">
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20577" target="_blank"><code class="codeph">* _ERRORS_AE</code></a></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d160084e10767 d160084e10702 ">
                                       <p>描述每个版本中数据库中的每个错误。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d160084e10777" headers="d160084e10699 ">
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20302" target="_blank"><code class="codeph">* _USERS</code></a></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d160084e10777 d160084e10702 ">
                                       <p>描述数据库中的每个用户。用于显示哪些用户已启用版本。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d160084e10787" headers="d160084e10699 ">
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20465" target="_blank"><code class="codeph">*_服务</code></a></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d160084e10787 d160084e10702 ">
                                       <p>描述数据库中的每个服务。<code class="codeph">EDITIONS</code>本栏显示默认的初始当前版本。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d160084e10800" headers="d160084e10699 ">
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20139" target="_blank"><code class="codeph">* _MVIEWS</code></a></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d160084e10800 d160084e10702 ">
                                       <p>描述每个物化视图。如果物化视图引用了已编辑的对象，则此视图将显示评估版本以及物化视图符合查询重写条件的版本范围。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d160084e10810" headers="d160084e10699 ">
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20276" target="_blank"><code class="codeph">* _TAB_COLS</code></a></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d160084e10810 d160084e10702 ">
                                       <p>描述每个表，视图和集群的每一列。对于每个虚拟列，此视图显示评估版本和可用范围。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnote" id="GUID-7095786B-799B-4A56-84D7-81BF8E34AE06__GUID-499A42A1-909B-4B63-8C04-C983F0D74C3E">
                           <p class="notep1">注意：</p>
                           <p><code class="codeph">*_OBJECTS</code>和<code class="codeph">*_OBJECTS_AE</code>包括仅在执行以下操作之一后由<a href="schema-object-dependency.html#GUID-AEC8DF50-2AC2-4697-8CA9-F13108FBB810__G1008856" title="第1列列出影响对象状态的操作，第2列显示对象的相应结果状态，第3列显示依赖对象的相应结果状态。">表26-2中</a>的操作无效的依赖对象：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>对象的引用（在编译或执行期间）</p>
                              </li>
                              <li>
                                 <p>调用<code class="codeph">DBMS_UTILITY</code> 。 <code class="codeph">COMPILE_SCHEMA</code> 
                                 </p>
                              </li>
                              <li>
                                 <p>调用任何<code class="codeph">UTL_RECOMP</code>子程序</p>
                              </li>
                           </ul>
                        </div>
                        <div class="infoboxnotealso" id="GUID-7095786B-799B-4A56-84D7-81BF8E34AE06__NOTE-1315-CBCC0D76">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>有关特定视图的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN002" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></li>
                              <li>
                                 <p>有关<code class="codeph">DBMS_UTILITY</code>更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS-GUID-A279BC5C-6CF5-4467-931D-0917C984DAB2" target="_blank"><span class="italic">参见Oracle Database PL / SQL包和类型参考</span></a> 。 <code class="codeph">COMPILE_SCHEMA</code>程序</p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">UTL_RECOMP</code>子程序的更多信息，请<code class="codeph">UTL_RECOMP</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS380" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS933"></a><a id="ADFNS1309"></a><div class="props_rev_3"><a id="GUID-EC3C09C5-59CD-443A-A77B-34B3522AB138" name="GUID-EC3C09C5-59CD-443A-A77B-34B3522AB138"></a><h4 id="ADFNS-GUID-EC3C09C5-59CD-443A-A77B-34B3522AB138" class="sect4">显示有关编辑视图的信息</h4>
                  <div>
                     <div class="section">
                        <p><a href="editions.html#GUID-EC3C09C5-59CD-443A-A77B-34B3522AB138__G4942508" title="此表汇总了提供有关编辑视图的信息的DBA_字典视图。">表27-2</a>简要描述了显示有关编辑视图的信息的静态数据字典视图。
                        </p>
                        <div class="tblformal" id="GUID-EC3C09C5-59CD-443A-A77B-34B3522AB138__G4942508">
                           <p class="titleintable">表27-2带有编辑视图信息的* _字典视图</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="* _具有版本查看信息的字典视图" width="100%" border="1" summary="This table summarizes the DBA_ dictionary views that provide information about Editioning Views." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="30%" id="d160084e11001">视图</th>
                                    <th align="left" valign="bottom" width="70%" id="d160084e11004">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d160084e11009" headers="d160084e11001 ">
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20305" target="_blank"><code class="codeph">* _VIEWS</code></a></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d160084e11009 d160084e11004 ">
                                       <p>描述数据库中当前版本中可见的每个视图，包括编辑视图。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d160084e11019" headers="d160084e11001 ">
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20668" target="_blank"><code class="codeph">* _EDITIONING_VIEWS</code></a></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d160084e11019 d160084e11004 ">
                                       <p>描述当前版本中可见的数据库中的每个版本视图。用于显示编辑视图与其基表之间的关系。加入<a href="editions.html#GUID-7095786B-799B-4A56-84D7-81BF8E34AE06__G4936767">* _OBJECTS_AE</a>以获取更多信息。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d160084e11032" headers="d160084e11001 ">
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20681" target="_blank"><code class="codeph">* _EDITIONING_VIEWS_AE</code></a></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d160084e11032 d160084e11004 ">
                                       <p>描述每个版本中数据库中每个版本视图中的每个实际对象。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d160084e11042" headers="d160084e11001 ">
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20669" target="_blank"><code class="codeph">* _EDITIONING_VIEW_COLS</code></a></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d160084e11042 d160084e11004 ">
                                       <p>描述当前版本中可见的数据库中每个版本视图的列。用于显示版本视图列和它们映射到的表列之间的关系。有关其他信息，请加入<a href="editions.html#GUID-7095786B-799B-4A56-84D7-81BF8E34AE06__G4936767">* _OBJECTS_AE</a> ， <code class="codeph">*_TAB_COL</code>或两者。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d160084e11058" headers="d160084e11001 ">
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20683" target="_blank"><code class="codeph">* _EDITIONING_VIEW_COLS_AE</code></a></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d160084e11058 d160084e11004 ">
                                       <p>描述每个版本中数据库中每个版本视图的列。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>的每一行<code class="codeph">*_EDITIONING_VIEWS</code>中的恰好一个行匹配<code class="codeph">*_VIEWS</code> ，和每行<code class="codeph">*_VIEWS</code>具有<code class="codeph">EDITIONING_VIEW</code> = <code class="codeph">'Y'</code>完全相符的一行<code class="codeph">*_EDITIONING_VIEWS</code> 。因此，在此示例中， <code class="codeph">WHERE</code>子句是多余的：</p><pre class="oac_no_warn" dir="ltr">选择 ...来自DBA_EDITIONING_VIEWS INNER JOIN DBA_VIEWS使用（所有者，VIEW_NAME） <span class="bold">WHERE EDITIONING_VIEW ='Y'</span>和...
</pre><p>的行<code class="codeph">*_VIEWS</code>匹配的行<code class="codeph">*_EDITIONING_VIEWS</code>有<code class="codeph">EDITIONING_VIEW</code> = <code class="codeph">'Y</code> ”的定义。相反地，没有行的<code class="codeph">*_VIEWS</code>具有<code class="codeph">EDITIONING_VIEW</code> = <code class="codeph">'N'</code>具有对应于<code class="codeph">*_ EDITIONING_VIEWS</code> 。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-EC3C09C5-59CD-443A-A77B-34B3522AB138__NOTE-1321-CBCCF454">
                           <p class="notep1">也可以看看：</p>
                           <p>有关特定视图的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN002" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADFNS1310"></a><div class="props_rev_3"><a id="GUID-F8709A6C-9DFE-4F9A-83B4-3FD42DC82F60" name="GUID-F8709A6C-9DFE-4F9A-83B4-3FD42DC82F60"></a><h4 id="ADFNS-GUID-F8709A6C-9DFE-4F9A-83B4-3FD42DC82F60" class="sect4">显示有关Crossedition触发器的信息</h4>
                  <div>
                     <div class="section">
                        <p><a href="../refrn/about-static-data-dictionary-views.html#REFRN002" target="_blank"><span class="italic">Oracle数据库参考</span></a>中描述了显示有关触发器信息的静态数据字典视图。出现在静态数据字典视图中的Crossedition触发器是当前版本中的实际对象。
                        </p>
                        <p>如果可能运行的交叉触发器集不同，则无法共享子游标。动态性能视图<code class="codeph">V$SQL_SHARED_CURSOR</code>和<code class="codeph">GV$SQL_SHARED_CURSOR</code>有一个<code class="codeph">CROSSEDITION_TRIGGER_MISMATCH</code>列，告诉它是否为真。
                        </p>
                        <div class="infoboxnotealso" id="GUID-F8709A6C-9DFE-4F9A-83B4-3FD42DC82F60__NOTE-1313-CBCD1721">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">V$SQL_SHARED_CURSOR</code>信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN30254" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADFNS1312"></a><a id="ADFNS1311"></a><div class="props_rev_3"><a id="GUID-B14D3C67-5871-41CF-8645-185139347CCC" name="GUID-B14D3C67-5871-41CF-8645-185139347CCC"></a><h3 id="ADFNS-GUID-B14D3C67-5871-41CF-8645-185139347CCC" class="sect3">使用EBR升级应用程序</h3>
               <div>
                  <div class="section">
                     <p>要使用EBR在线升级您的应用程序，您必须首先准备好您的应用程序：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand" id="GUID-B14D3C67-5871-41CF-8645-185139347CCC__BABIBAFI"><span>版本 - 在其模式中启用适当的用户和相应的模式对象类型。</span><div>
                           <p>在您将创建编辑视图的模式中（在下一步中），类型<code class="codeph">VIEW</code>必须是可编辑的。
                           </p>
                           <p>有关说明，请<a href="editions.html#GUID-FF93CEED-D23A-48D3-8FD7-5B0FB22024DF">参阅为用户启用版本</a> 。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>准备应用程序以使用版本视图。</span><div>
                           <p>有关说明，请参阅<a href="editions.html#GUID-6092BFD8-4FA5-4CAF-A704-687DEF5C009C">准备应用程序以使用编辑视图</a> 。
                           </p>
                        </div>
                     </li>
                  </ol>
                  <div class="section">
                     <p>有了版本视图，您可以根据需要使用EBR在线升级您的应用程序。每次升级：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果要重新定义的每个对象的类型都是可编辑的（表格不可编辑），请<a href="editions.html#GUID-984C4E1A-6A1D-4576-A217-E0904A579E90">使用“仅使用版本的EBR</a>过程”中的<a href="editions.html#GUID-984C4E1A-6A1D-4576-A217-E0904A579E90">过程</a> 。
                           </p>
                        </li>
                        <li>
                           <p>如果要更改一个或多个表的结构，并且在执行此操作时，其他用户<span class="italic">无需</span>更改这些表中的数据，请使用“ <a href="editions.html#GUID-D24DA011-7EE6-471B-9542-F7C5D10FC559">使用编辑视图的EBR</a>过程”中的<a href="editions.html#GUID-D24DA011-7EE6-471B-9542-F7C5D10FC559">过程</a> 。
                           </p>
                        </li>
                        <li>
                           <p>如果要更改一个或多个表的结构，并且在执行此操作时，其他用户必须能够更改这些表中的数据，然后使用“ <a href="editions.html#GUID-847C93E1-1001-418A-9A46-F3D3226DE8F9">使用Crossedition触发器的EBR</a>过程”中的<a href="editions.html#GUID-847C93E1-1001-418A-9A46-F3D3226DE8F9">过程</a> 。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>话题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="editions.html#GUID-6092BFD8-4FA5-4CAF-A704-687DEF5C009C">准备应用程序以使用编辑视图</a></p>
                        </li>
                        <li>
                           <p><a href="editions.html#GUID-984C4E1A-6A1D-4576-A217-E0904A579E90">仅使用版本的EBR的过程</a></p>
                        </li>
                        <li>
                           <p><a href="editions.html#GUID-D24DA011-7EE6-471B-9542-F7C5D10FC559">使用编辑视图的EBR过程</a></p>
                        </li>
                        <li>
                           <p><a href="editions.html#GUID-847C93E1-1001-418A-9A46-F3D3226DE8F9">使用Crossedition触发器的EBR的过程</a></p>
                        </li>
                        <li>
                           <p><a href="editions.html#GUID-5391380B-5539-441F-93BA-86C427555BD6">回滚应用程序升级</a></p>
                        </li>
                        <li>
                           <p><a href="editions.html#GUID-0EDE043F-771B-4A2A-8526-D3DC47C53061">回收未使用的表格列占用的空间</a></p>
                        </li>
                        <li>
                           <p><a href="editions.html#GUID-8E622E13-2830-4FDF-A304-EEBF463FA1E4" title="您可以使用触发器升级现有应用程序。">示例：使用EBR升级应用程序</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADFNS99917"></a><div class="props_rev_3"><a id="GUID-6092BFD8-4FA5-4CAF-A704-687DEF5C009C" name="GUID-6092BFD8-4FA5-4CAF-A704-687DEF5C009C"></a><h4 id="ADFNS-GUID-6092BFD8-4FA5-4CAF-A704-687DEF5C009C" class="sect4">准备应用程序以使用编辑视图</h4>
                  <div>
                     <div class="section">
                        <p>使用一个或多个表的应用程序必须使用版本视图覆盖每个表。当所有这些陈述都成立时，版本视图会<span class="bold">涵盖</span>一个表格：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>应用程序中的每个普通对象仅通过编辑视图引用该表。（ <span class="bold">普通对象</span>是除了编辑视图或交叉触发器之外的任何对象。编辑视图和crossedition触发器必须引用表。）
                              </p>
                           </li>
                           <li>
                              <p>应用程序用户仅在版本视图上被授予对象权限，而不是在表上。</p>
                           </li>
                           <li>
                              <p>Oracle虚拟专用数据库（VPD）策略仅附加到版本视图，而不附加到表。（定期审计和细粒度审计（FGA）政策仅附在表格中。）</p>
                           </li>
                        </ul>
                        <p>在实现编辑视图时，VPD策略的副本将附加到实现的编辑视图。（策略由其名称及其附加的对象唯一标识。）如果策略功能也已实现，则策略的副本使用实现的策略功能;否则，它使用原始政策功能。</p>
                        <p>描述VPD策略的静态数据字典视图<code class="codeph">*_POLICIES</code>在不同版本中可能会有不同的结果。
                        </p>
                        <div class="infoboxnotealso" id="GUID-6092BFD8-4FA5-4CAF-A704-687DEF5C009C__GUID-4550C229-BC83-4A5E-87BA-2D31D2D0544A">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关VPD的信息，请参阅“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=DBSEG007" target="_blank"><span class="italic">Oracle数据库安全指南”</span></a> ，其中包括显示有关VPD策略信息的静态数据字典视图</p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">*_POLICIES</code>信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=REFRN20164" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                              </li>
                           </ul>
                        </div>
                        <p>如果现有应用程序不使用版本控制视图，请按照此过程对其使用的每个表进行准备以使用它们：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>为表提供一个新名称（以便您可以将其当前名称提供给其编辑视图）。</span><div>
                              <p>Oracle建议选择与原始名称相关的新名称并反映更改历史记录。例如，如果原始表名是<code class="codeph">Data</code> ，则新表名可能是<code class="codeph">Data_1</code> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>（可选）为表的每一列指定一个新名称。</span><div>
                              <p>同样，Oracle建议选择与原始名称相关的新名称并反映更改历史记录。例如， <code class="codeph">Name</code>和<code class="codeph">Number</code>可能会更改为<code class="codeph">Name_1</code>和<code class="codeph">Number_1</code> 。
                              </p>
                              <p>依赖于重命名列的任何触发器现在都无效。有关详细信息，请参阅<a href="schema-object-dependency.html#GUID-AEC8DF50-2AC2-4697-8CA9-F13108FBB810__G1008856" title="第1列列出影响对象状态的操作，第2列显示对象的相应结果状态，第3列显示依赖对象的相应结果状态。">表26-2中</a> <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> <span class="italic"><code class="codeph">table</code></span> <code class="codeph">RENAME</code> <span class="italic"><code class="codeph">column</code></span>的条目。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>创建版本视图，为其提供表的原始名称。</span><div>
                              <p>有关说明，请参阅<a href="editions.html#GUID-0732E020-438E-436B-A0E4-234EAF60D8DE">创建版本视图</a> 。
                              </p>
                              <p>由于版本控制视图具有表所具有的名称，因此引用该名称的对象现在引用了编辑视图。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>如果在表上定义了触发器，则删除它们，然后重新运行创建它们的代码。</span><div>
                              <p>现在，在表上定义的触发器在版本视图中定义。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>如果将VPD策略附加到表，请删除策略和策略函数，然后重新运行创建它们的代码。</span><div>
                              <p>现在附加到表的VPD策略附加到编辑视图。</p>
                           </div>
                        </li>
                        <li class="stepexpand" id="GUID-6092BFD8-4FA5-4CAF-A704-687DEF5C009C__BABHGIGB"><span>撤消所有应用程序用户对表的所有对象权限。</span><div>
                              <p>要查看哪些应用程序用户对表具有哪些对象权限，请使用以下查询：</p><pre class="oac_no_warn" dir="ltr">SELECT GRANTEE，PRIVALEGE FROM DBA_TAB_PRIVS WHERE TABLE_NAME =' <span class="italic">table_name</span> ';</pre></div>
                        </li>
                        <li class="stepexpand"><span>对于在步骤<a href="editions.html#GUID-6092BFD8-4FA5-4CAF-A704-687DEF5C009C__BABHGIGB">6中</a>撤消的每个权限，在版本控制视图上授予相同的权限。</span></li>
                        <li class="stepexpand" id="GUID-6092BFD8-4FA5-4CAF-A704-687DEF5C009C__BABEDGHI"><span>对于拥有引用该表的私有同义词的每个用户，启用版本，指定<code class="codeph">SYNONYM</code>类型可在模式中进行编辑（有关说明，请<a href="editions.html#GUID-FF93CEED-D23A-48D3-8FD7-5B0FB22024DF">参阅为用户启用版本</a> ）。</span></li>
                        <li class="stepexpand" id="GUID-6092BFD8-4FA5-4CAF-A704-687DEF5C009C__BABCGJIB"><span>通知引用表的私有同义词的所有者必须重新创建这些同义词。</span></li>
                     </ol>
                  </div>
               </div><a id="ADFNS910"></a><a id="ADFNS99918"></a><div class="props_rev_3"><a id="GUID-984C4E1A-6A1D-4576-A217-E0904A579E90" name="GUID-984C4E1A-6A1D-4576-A217-E0904A579E90"></a><h4 id="ADFNS-GUID-984C4E1A-6A1D-4576-A217-E0904A579E90" class="sect4">仅使用版本的EBR的过程</h4>
                  <div>
                     <div class="section">
                        <p>仅当您要重新定义的每个对象都已编辑时（在<a href="editions.html#GUID-F0D940E0-618D-4656-982E-1C5E49FCCD42">Editioned和Noneditioned对象中</a>定义），才使用此过程。表永远不是已编辑的对象。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>创建一个新版本。</span><div>
                              <p>有关说明，请参阅<a href="editions.html#GUID-581CE195-E9FD-421D-A47F-8DF573B0A1AC">创建版本</a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>使新版本成为会话版。</span><div>
                              <p>有关说明，请参阅<a href="editions.html#GUID-943C7AE8-6A5D-47EC-AC45-3132518AF36B">更改会话版</a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand" id="GUID-984C4E1A-6A1D-4576-A217-E0904A579E90__BABIDGGJ"><span>对应用程序的已编辑对象进行必要的更改。</span></li>
                        <li class="stepexpand"><span>确保所有对象都有效。</span><div>
                              <p>在每个版本中查询静态数据字典<code class="codeph">*_OBJECTS_AE</code> ，它描述数据库中的每个实际对象。如果仍然存在无效对象，请使用任何<code class="codeph">UTL_RECOMP</code>子程序（在<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS380" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考中</span></a>描述）重新编译它们。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>检查更改是否按预期工作。</span><div>
                              <p>如果是，请转到步骤<a href="editions.html#GUID-984C4E1A-6A1D-4576-A217-E0904A579E90__BABIABAI">6</a> 。
                              </p>
                              <p>如果没有，请进行进一步更改（返回步骤<a href="editions.html#GUID-984C4E1A-6A1D-4576-A217-E0904A579E90__BABIDGGJ">3</a> ）或回滚应用程序升级（有关说明，请参阅<a href="editions.html#GUID-5391380B-5539-441F-93BA-86C427555BD6">回滚应用程序升级</a> ）。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand" id="GUID-984C4E1A-6A1D-4576-A217-E0904A579E90__BABIABAI"><span>使新版本（升级的应用程序）可供所有用户使用。</span><div>
                              <p>有关说明，请参阅<a href="editions.html#GUID-B9A89ED5-7DC8-4B49-A38D-5B8CA94E7459">使所有用户都可以使用该版本</a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>退出旧版本（原始应用程序），以便除<code class="codeph">SYS</code>之外的所有用户仅使用升级的应用程序。</span><div>
                              <p>有关说明，请参阅<a href="editions.html#GUID-023BBAD2-16DB-4E08-A4AF-183633B211CD">停用版本</a> 。
                              </p>
                           </div>
                           <div>
                              <p><a href="editions.html#GUID-984C4E1A-6A1D-4576-A217-E0904A579E90__CHDGEDCC">例27-6</a>显示了如何使用前面的过程来更改一个非常简单的PL / SQL过程。
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="example" id="GUID-984C4E1A-6A1D-4576-A217-E0904A579E90__CHDGEDCC">
                        <p class="titleinexample">例27-6非常简单程序的EBR</p>
                        <ol>
                           <li>
                              <p>为此示例创建PL / SQL过程：</p><pre class="oac_no_warn" dir="ltr">创建或替换程序你好是BEGIN DBMS_OUTPUT.PUT_LINE（'你好，第1版。“）;结束你好; /</pre></li>
                           <li>
                              <p>调用PL / SQL过程：</p><pre class="oac_no_warn" dir="ltr">BEGIN你好（）;结束; /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">您好，第1版。PL / SQL过程成功完成。
</pre></li>
                           <li>
                              <p>做程序的EBR：</p>
                              <ol type="a">
                                 <li>
                                    <p>创建新版本：</p><pre class="oac_no_warn" dir="ltr">创建版本e2作为ora $ base的孩子;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">版本创建。
</pre></li>
                                 <li>
                                    <p>制作新版本的会话版：</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET EDITION = e2;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">会话改变了。
</pre></li>
                                 <li>
                                    <p>变更程序：</p><pre class="oac_no_warn" dir="ltr">创建或替换程序你好是BEGIN DBMS_OUTPUT.PUT_LINE（'你好，第2版。“）;结束你好; /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">程序已创建。
</pre></li>
                                 <li>
                                    <p>检查更改是否按预期工作：</p><pre class="oac_no_warn" dir="ltr">BEGIN你好（）;结束; /</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">你好，第2版。PL / SQL过程成功完成。
</pre></li>
                                 <li>
                                    <p>为所有用户提供新版本（需要系统权限）：</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE DEFAULT EDITION = e2;</pre></li>
                                 <li>
                                    <p>退出旧版本（需要系统权限）：</p>
                                    <p>名单受助人：</p><pre class="oac_no_warn" dir="ltr">SELECT GRANTEE，来自DBA_TAB_PRIVS的特权WHERE TABLE_NAME = UPPER（'ora $ base'）/</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">GRANTEE PRIVILEGE ------------------------------ ---------公共使用1行选择。
</pre><p>撤销所有受助人使用旧版本：</p><pre class="oac_no_warn" dir="ltr">REVOKE使用版本ora $ base来自PUBLIC;</pre></li>
                              </ol>
                           </li>
                        </ol>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADFNS99914"></a><div class="props_rev_3"><a id="GUID-D24DA011-7EE6-471B-9542-F7C5D10FC559" name="GUID-D24DA011-7EE6-471B-9542-F7C5D10FC559"></a><h4 id="ADFNS-GUID-D24DA011-7EE6-471B-9542-F7C5D10FC559" class="sect4">使用编辑视图的EBR过程</h4>
                  <div>
                     <div class="section">
                        <p>仅当您要更改一个或多个表的结构时才使用此过程，并且在执行此操作时，其他用户<span class="italic">无需</span>更改这些表中的数据。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>创建一个新版本。</span><div>
                              <p>有关说明，请参阅<a href="editions.html#GUID-581CE195-E9FD-421D-A47F-8DF573B0A1AC">创建版本</a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>使新版本成为会话版。</span><div>
                              <p>有关说明，请参阅<a href="editions.html#GUID-943C7AE8-6A5D-47EC-AC45-3132518AF36B">更改会话版</a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在新版本中，如果版本视图是只读的，请将它们写为可读。</span><div>
                              <p>有关说明，请参阅<a href="editions.html#GUID-3B80F0F0-D893-4499-B172-1C7F1413429D">更改版本视图的可写性</a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在除新版本之外的每个版本中，将编辑视图设置为只读。</span></li>
                        <li class="stepexpand" id="GUID-D24DA011-7EE6-471B-9542-F7C5D10FC559__BABIFHFC"><span>对应用程序的对象进行必要的更改。</span></li>
                        <li class="stepexpand"><span>确保所有对象都有效。</span><div>
                              <p>在每个版本中查询静态数据字典<code class="codeph">*_OBJECTS_AE</code> ，它描述数据库中的每个实际对象。如果仍然存在无效对象，请使用任何<code class="codeph">UTL_RECOMP</code>子程序（在<a href="../arpls/UTL_RECOMP.html#ARPLS380" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考中</span></a>描述）重新编译它们。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>检查更改是否按预期工作。</span><div>
                              <p>如果是，请转到步骤<a href="editions.html#GUID-D24DA011-7EE6-471B-9542-F7C5D10FC559__BABDECFA">8</a> 。
                              </p>
                              <p>如果没有，请进行进一步更改（返回步骤<a href="editions.html#GUID-D24DA011-7EE6-471B-9542-F7C5D10FC559__BABIFHFC">5</a> ）或回滚应用程序升级（有关说明，请参阅<a href="editions.html#GUID-5391380B-5539-441F-93BA-86C427555BD6">回滚应用程序升级</a> ）。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand" id="GUID-D24DA011-7EE6-471B-9542-F7C5D10FC559__BABDECFA"><span>使升级的应用程序可供所有用户使用。</span><div>
                              <p>有关说明，请参阅<a href="editions.html#GUID-B9A89ED5-7DC8-4B49-A38D-5B8CA94E7459">使所有用户都可以使用该版本</a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>退出旧版本（原始应用程序），以便除<code class="codeph">SYS</code>之外的所有用户仅使用升级的应用程序。</span><div>
                              <p>有关说明，请参阅<a href="editions.html#GUID-023BBAD2-16DB-4E08-A4AF-183633B211CD">停用版本</a> 。
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADFNS99906"></a><div class="props_rev_3"><a id="GUID-847C93E1-1001-418A-9A46-F3D3226DE8F9" name="GUID-847C93E1-1001-418A-9A46-F3D3226DE8F9"></a><h4 id="ADFNS-GUID-847C93E1-1001-418A-9A46-F3D3226DE8F9" class="sect4">使用Crossedition触发器的EBR的过程</h4>
                  <div>
                     <div class="section">
                        <p>仅当您要更改一个或多个表的结构时才使用此过程，并且在执行此操作时，其他用户必须能够更改这些表中的数据。</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>创建一个新版本。</span><div>
                              <p>有关说明，请参阅<a href="editions.html#GUID-581CE195-E9FD-421D-A47F-8DF573B0A1AC">创建版本</a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>使新版本成为会话版。</span><div>
                              <p>有关说明，请参阅<a href="editions.html#GUID-943C7AE8-6A5D-47EC-AC45-3132518AF36B">更改会话版</a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand" id="GUID-847C93E1-1001-418A-9A46-F3D3226DE8F9__BABCEBJI"><span>对应用程序的对象进行永久性更改。</span><div>
                              <p>例如，向表中添加新列并创建任何新的永久子程序。</p>
                              <p>依赖于您更改的对象的对象现在可能无效。有关更多信息，请参阅<a href="schema-object-dependency.html#GUID-AEC8DF50-2AC2-4697-8CA9-F13108FBB810__G1008856" title="第1列列出影响对象状态的操作，第2列显示对象的相应结果状态，第3列显示依赖对象的相应结果状态。">表26-2</a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>确保所有对象都有效。</span><div>
                              <p>在每个版本中查询静态数据字典<code class="codeph">*_OBJECTS_AE</code> ，它描述数据库中的每个实际对象。如果仍然存在无效对象，请使用任何<code class="codeph">UTL_RECOMP</code>子程序（在<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS380" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考中</span></a>描述）重新编译它们。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>创建临时对象 - 交叉触发（处于禁用状态）和所需的任何子程序。</span><div>
                              <p>有关说明，请参阅<a href="editions.html#GUID-12AAB773-F459-4C61-A96E-4DAB506656CA">创建Crossedition触发器</a> 。
                              </p>
                              <p>只有在执行步骤<a href="editions.html#GUID-847C93E1-1001-418A-9A46-F3D3226DE8F9__BABDHEFG">10</a>时才需要反向交叉触发，这是可选的。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>当crossedition触发成功编译时，启用它们。</span><div>
                              <p>使用带有<code class="codeph">ENABLE</code>选项的<code class="codeph">ALTER</code> <code class="codeph">TRIGGER</code>语句。有关此语句的信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=LNPLS99996" target="_blank"><span class="italic">Oracle Database PL / SQL语言参考</span></a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>等到提交或回滚挂起的更改。</span><div>
                              <p>使用<code class="codeph">DBMS_UTILITY</code>过程。 <code class="codeph">WAIT_ON_PENDING_DML</code> ，在<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS73275" target="_blank"><span class="italic">Oracle数据库PL / SQL包和类型参考中描述</span></a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>应用变换。</span><div>
                              <p>有关说明，请参阅<a href="editions.html#GUID-90F88E8E-D924-473B-9A61-B81909ECFA3A">将数据从转换前表示转换为升级后表示</a> 。
                              </p>
                              <div class="infoboxnote" id="GUID-847C93E1-1001-418A-9A46-F3D3226DE8F9__GUID-89CC1A49-47FA-4BC6-927D-A1CAA5A567DD">
                                 <p class="notep1">注意：</p>
                                 <p>在祖先版本的用户更新，插入或删除该行中的数据之前，无法预测此步骤是否访问现有行。</p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>检查更改是否按预期工作。</span><div>
                              <p>如果是，请转到步骤<a href="editions.html#GUID-847C93E1-1001-418A-9A46-F3D3226DE8F9__BABDHEFG">10</a> 。
                              </p>
                              <p>如果没有，请进行进一步更改（返回步骤<a href="editions.html#GUID-847C93E1-1001-418A-9A46-F3D3226DE8F9__BABCEBJI">3</a> ）或回滚应用程序升级（有关说明，请参阅<a href="editions.html#GUID-5391380B-5539-441F-93BA-86C427555BD6">回滚应用程序升级</a> ）。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand" id="GUID-847C93E1-1001-418A-9A46-F3D3226DE8F9__BABDHEFG"><span>（可选）将会话版本的<code class="codeph">USE</code>权限授予升级后的应用程序的早期用户。</span><div>
                              <p>有关说明，请参阅<a href="editions.html#GUID-76045F34-B7BB-45DB-AE35-689CF4F6759A">为某些用户提供版本</a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>使升级的应用程序可供所有用户使用。</span><div>
                              <p>有关说明，请参阅<a href="editions.html#GUID-B9A89ED5-7DC8-4B49-A38D-5B8CA94E7459">使所有用户都可以使用该版本</a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>禁用或删除约束，然后删除交叉触发器。</span><div>
                              <p>有关说明，请参阅<a href="editions.html#GUID-F78E82CC-3239-436E-B3DC-2D09BA66040D">删除Crossedition触发器</a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand" id="GUID-847C93E1-1001-418A-9A46-F3D3226DE8F9__BABIIIHE"><span>退出旧版本（原始应用程序），以便除<code class="codeph">SYS</code>之外的所有用户仅使用升级的应用程序。</span><div>
                              <p>有关说明，请参阅<a href="editions.html#GUID-023BBAD2-16DB-4E08-A4AF-183633B211CD">停用版本</a> 。
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADFNS1313"></a><div class="props_rev_3"><a id="GUID-5391380B-5539-441F-93BA-86C427555BD6" name="GUID-5391380B-5539-441F-93BA-86C427555BD6"></a><h4 id="ADFNS-GUID-5391380B-5539-441F-93BA-86C427555BD6" class="sect4">回滚应用程序升级</h4>
                  <div>
                     <div class="section">
                        <p>要回滚应用程序升级：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>将会话版本更改为您为升级创建的新版本以外的版本。</span><div>
                              <p>有关说明，请参阅<a href="editions.html#GUID-943C7AE8-6A5D-47EC-AC45-3132518AF36B">更改会话版</a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>删除为升级创建的新版本。</span><div>
                              <p>有关说明，请参阅<a href="editions.html#GUID-E6DBE175-2598-430F-9D0A-AB22CAE7DDDA">删除版本</a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>如果在升级期间创建了新的表列，则回收它们占用的空间（有关说明，请参阅<a href="editions.html#GUID-0EDE043F-771B-4A2A-8526-D3DC47C53061">回收未使用的表列占用的空间</a> ）。</span></li>
                     </ol>
                  </div>
               </div><a id="ADFNS1314"></a><div class="props_rev_3"><a id="GUID-0EDE043F-771B-4A2A-8526-D3DC47C53061" name="GUID-0EDE043F-771B-4A2A-8526-D3DC47C53061"></a><h4 id="ADFNS-GUID-0EDE043F-771B-4A2A-8526-D3DC47C53061" class="sect4">回收未使用的表格列占用的空间</h4>
                  <div>
                     <div class="section">
                        <p>如果回滚为其创建新表列的升级，</p>
                        <p>要回收未使用列占用的空间：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>将未使用列的值设置为<code class="codeph">NULL</code> 。</span><div>
                              <p>要避免在执行此操作时锁定其他用户，请使用<code class="codeph">DBMS_PARALLEL_EXECUTE</code>过程（在<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS233" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考中描述</span></a> ）。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>将未使用的列设置为<code class="codeph">UNUSED</code> 。</span><div>
                              <p>使用<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句（在<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF01001" target="_blank"><span class="italic">Oracle数据库SQL语言参考中</span></a>描述）和<code class="codeph">SET</code> <code class="codeph">UNUSED</code>子句（在<a href="../sqlrf/ALTER-TABLE.html#SQLRF53205" target="_blank"><span class="italic">Oracle数据库SQL语言参考中</span></a>描述）。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>收缩桌子。</span><div>
                              <p>使用<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句（在<a href="../sqlrf/ALTER-TABLE.html#SQLRF01001" target="_blank"><span class="italic">Oracle数据库SQL语言参考中</span></a>描述）和<code class="codeph">SHRINK</code> <code class="codeph">SPACE</code>子句（在<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=SQLRF53181" target="_blank"><span class="italic">Oracle数据库SQL语言参考中</span></a>描述）。
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADFNS1315"></a><a id="ADFNS99913"></a><div class="props_rev_3"><a id="GUID-8E622E13-2830-4FDF-A304-EEBF463FA1E4" name="GUID-8E622E13-2830-4FDF-A304-EEBF463FA1E4"></a><h4 id="ADFNS-GUID-8E622E13-2830-4FDF-A304-EEBF463FA1E4" class="sect4">示例：使用EBR升级应用程序</h4>
                  <div>
                     <div class="section">
                        <p>此示例使用版本，编辑视图，前向交叉触发和反向交叉触发。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8E622E13-2830-4FDF-A304-EEBF463FA1E4__GUID-AB559954-01F0-417F-AB70-ECC0CD4DB3F1">话题：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="editions.html#GUID-6692B153-6517-4A78-AAA3-FB8EADFDA823">现有申请</a></p>
                           </li>
                           <li>
                              <p><a href="editions.html#GUID-61BBC031-6D7B-470A-8882-C2EBAEBA4634">准备应用程序以使用编辑视图</a></p>
                           </li>
                           <li>
                              <p><a href="editions.html#GUID-D9907361-0E4D-4C99-ADE1-0EE4FCA76DC6" title="您可以使用触发器升级现有应用程序。">使用EBR升级应用程序</a></p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-8E622E13-2830-4FDF-A304-EEBF463FA1E4__GUID-B3B54E98-8131-4D70-A6BA-EA32ED5AFD80">
                           <p class="notep1">注意：</p>
                           <p>在使用EBR升级应用程序之前，必须为应用程序使用的每个模式启用版本。有关说明，请<a href="editions.html#GUID-FF93CEED-D23A-48D3-8FD7-5B0FB22024DF">参阅为用户启用版本</a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="ADFNS935"></a><a id="ADFNS936"></a><a id="ADFNS934"></a><div class="props_rev_3"><a id="GUID-6692B153-6517-4A78-AAA3-FB8EADFDA823" name="GUID-6692B153-6517-4A78-AAA3-FB8EADFDA823"></a><h5 id="ADFNS-GUID-6692B153-6517-4A78-AAA3-FB8EADFDA823" class="sect5">现有申请</h5>
                     <div>
                        <div class="section">
                           <p>现有应用程序 - 要升级的应用程序 - 由单个表组成，在该表上定义了触发器。</p>
                           <p>现有应用程序有一个触发器，您可以检查。以下示例显示了现有应用程序：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="editions.html#GUID-5165137C-5EE5-4FA6-B6BD-955EE4C0C0DE">示例：创建现有应用程序</a></p>
                              </li>
                              <li>
                                 <p><a href="editions.html#GUID-3AD149F5-AC08-40AA-9ED6-C6C35414A938">示例：查看现有表中的数据</a></p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div class="sect5"><a id="GUID-5165137C-5EE5-4FA6-B6BD-955EE4C0C0DE" name="GUID-5165137C-5EE5-4FA6-B6BD-955EE4C0C0DE"></a><h6 id="ADFNS-GUID-5165137C-5EE5-4FA6-B6BD-955EE4C0C0DE" class="sect6">示例：如何创建现有应用程序</h6>
                        <div>
                           <p></p>
                           <p>应用程序的创建与<a href="editions.html#GUID-5165137C-5EE5-4FA6-B6BD-955EE4C0C0DE__BABEDAGA">例27-7相同</a> 。
                           </p>
                           <div class="example" id="GUID-5165137C-5EE5-4FA6-B6BD-955EE4C0C0DE__BABEDAGA">
                              <p class="titleinexample">示例27-7创建现有应用程序</p>
                              <ol>
                                 <li>
                                    <p>创建表格：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE联系人（ID NUMBER（6,0）CONSTRAINT Contacts_PK PRIMARY KEY，Name VARCHAR2（47），Phone_Number VARCHAR2（20））;</pre></li>
                                 <li>
                                    <p>填充表（未显示）。</p>
                                 </li>
                                 <li>
                                    <p>准备在桌面上创建触发器：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE联系人ENABLE VALIDATE CONSTRAINT Contacts_PK; DECLARE Max_ID INTEGER; BEGIN SELECT MAX（ID）INTO Max_ID FROM Contacts; EXECUTE IMMEDIATE'创建序列Contacts_Seq START WITH'|| To_Char（Max_ID + 1）;结束; /</pre></li>
                                 <li>
                                    <p>创建触发器：</p><pre class="oac_no_warn" dir="ltr">创建触发器Contacts_BI在插入联系人之前，每行开始：NEW.ID：= Contacts_Seq。NEXTVAL;结束; /</pre></li>
                              </ol>
                           </div>
                           <!-- class="example" -->
                        </div>
                     </div>
                     <div class="sect5"><a id="GUID-3AD149F5-AC08-40AA-9ED6-C6C35414A938" name="GUID-3AD149F5-AC08-40AA-9ED6-C6C35414A938"></a><h6 id="ADFNS-GUID-3AD149F5-AC08-40AA-9ED6-C6C35414A938" class="sect6">示例：查看现有表中的数据</h6>
                        <div>
                           <p><a href="editions.html#GUID-3AD149F5-AC08-40AA-9ED6-C6C35414A938__BABJEBDB">例27-8</a>显示了在填充数据之后表<code class="codeph">Contacts</code>外观。
                           </p>
                           <div class="example" id="GUID-3AD149F5-AC08-40AA-9ED6-C6C35414A938__BABJEBDB">
                              <p class="titleinexample">示例27-8查看现有表中的数据</p>
                              <p>查询：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM Contacts ORDER BY Name;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">ID NAME PHONE_NUMBER ---------- ------------------------------------- ---------- -------------------- 174 Abel，Ellen 011.44.1644.429267 166 Ande，Sundar 011.44.1346.629268 130 Atkinson，Mozhe 650.124。 6234 105 Austin，David 590.423.4569 204 Baer，Hermann 515.123.8888 116 Baida，Shelli 515.127.4563 167 Banda，Amit 011.44.1346.729268 172 Bates，Elizabeth 011.44.1343.529268 192 Bell，Sarah 650.501.1876 151 Bernstein，David 011.44.1344.345268 129 Bissot，Laura 650.124.5234 169 Bloom，Harrison 011.44.1343.829268 185 Bull，Alexis 650.509.2876 187 Cabrio，Anthony 650.509.4876 148 Cambrault，Gerald 011.44.1344.619268 154 Cambrault，Nanette 011.44.1344.987668 110 Chen，John 515.124.4269。 ..120 Weiss，Matthew 650.123.1234 200 Whalen，Jennifer 515.123.4444 149 Zlotkey，Eleni 011.44.1344.429018 107行选择。
</pre><p>假设你必须重新定义<code class="codeph">Contacts</code> ，更换<code class="codeph">Name</code>与列列<code class="codeph">First_Name</code>和<code class="codeph">Last_Name</code> ，并添加列<code class="codeph">Country_Code</code> 。还假设在进行此结构更改时，其他用户必须能够更改“ <code class="codeph">Contacts</code>的数据。
                              </p>
                              <p>您需要EBR的所有功能：始终需要的版本;版本视图，因为你正在重新定义一个表;和crossedition触发器，因为其他用户必须能够在重新定义表时更改表中的数据。</p>
                           </div>
                           <!-- class="example" -->
                        </div>
                     </div>
                  </div><a id="ADFNS938"></a><a id="ADFNS937"></a><div class="props_rev_3"><a id="GUID-61BBC031-6D7B-470A-8882-C2EBAEBA4634" name="GUID-61BBC031-6D7B-470A-8882-C2EBAEBA4634"></a><h5 id="ADFNS-GUID-61BBC031-6D7B-470A-8882-C2EBAEBA4634" class="sect5">准备应用程序以使用编辑视图</h5>
                     <div>
                        <div class="section">
                           <p><a href="editions.html#GUID-61BBC031-6D7B-470A-8882-C2EBAEBA4634__BABJFGJD">示例27-9</a>显示了如何创建编辑视图，在新版本中重新定义表时，其他用户将从该视图访问表<code class="codeph">Contacts</code> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-61BBC031-6D7B-470A-8882-C2EBAEBA4634__BABJFGJD">
                           <p class="titleinexample">示例27-9为现有表创建版本视图</p>
                           <ol>
                              <li>
                                 <p>为表提供一个新名称（以便您可以将其当前名称提供给版本视图）：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE联系人RENAME TO Contacts_Table;</pre></li>
                              <li>
                                 <p>（可选）为表新名称列提供：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE Contacts_Table RENAME COLUMN Name to Name_1; ALTER TABLE Contacts_Table RENAME COLUMN Phone_Number TO Phone_Number_1;</pre></li>
                              <li>
                                 <p>创建版本视图：</p><pre class="oac_no_warn" dir="ltr">创建或替换版本视图联系人AS SELECT ID ID，Name_1名称，Phone_Number_1 Phone_Number FROM Contacts_Table;</pre></li>
                              <li id="GUID-61BBC031-6D7B-470A-8882-C2EBAEBA4634__BABHBBHF">
                                 <p>将触发器<code class="codeph">Contacts_BI</code>从表移动到版本视图：</p><pre class="oac_no_warn" dir="ltr">DROP TRIGGER Contacts_BI;创建触发器Contacts_BI在插入联系人之前，每行开始：NEW.ID：= Contacts_Seq。NEXTVAL;结束; /</pre></li>
                           </ol>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="ADFNS940"></a><a id="ADFNS941"></a><a id="ADFNS942"></a><a id="ADFNS943"></a><a id="ADFNS944"></a><a id="ADFNS939"></a><div class="props_rev_3"><a id="GUID-D9907361-0E4D-4C99-ADE1-0EE4FCA76DC6" name="GUID-D9907361-0E4D-4C99-ADE1-0EE4FCA76DC6"></a><h5 id="ADFNS-GUID-D9907361-0E4D-4C99-ADE1-0EE4FCA76DC6" class="sect5">使用EBR升级示例应用程序</h5>
                     <div>
                        <p>您可以使用触发器升级现有应用程序。</p>
                        <div class="section">
                           <p>以下示例显示如何使用触发器更新示例应用程序：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="editions.html#GUID-A356E1BC-3E63-4C59-A00E-95436F3C1DF7">示例：创建用于升级示例应用程序的版本</a></p>
                              </li>
                              <li>
                                 <p><a href="editions.html#GUID-97280B8B-D48E-425D-944F-4C98F60A01DF">示例：更改表并替换版本视图</a></p>
                              </li>
                              <li>
                                 <p><a href="editions.html#GUID-4F992EF7-770A-4939-BA95-D77ACD205E94">示例：创建和启用Crossedition触发器</a></p>
                              </li>
                              <li>
                                 <p><a href="editions.html#GUID-B3BA1977-C5E2-4A8A-BF34-82E07232BB27">示例：应用变换</a></p>
                              </li>
                              <li>
                                 <p><a href="editions.html#GUID-239A6927-E6FD-464D-9ACC-B6DCFF11786C">示例：在更改的表中查看数据</a></p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div class="sect5"><a id="GUID-A356E1BC-3E63-4C59-A00E-95436F3C1DF7" name="GUID-A356E1BC-3E63-4C59-A00E-95436F3C1DF7"></a><h6 id="ADFNS-GUID-A356E1BC-3E63-4C59-A00E-95436F3C1DF7" class="sect6">示例：创建用于升级示例应用程序的版本</h6>
                        <div>
                           <p><a href="editions.html#GUID-A356E1BC-3E63-4C59-A00E-95436F3C1DF7__BABBAEFA">例27-10</a>显示了如何创建升级现有应用程序的版本（在<a href="editions.html#GUID-6692B153-6517-4A78-AAA3-FB8EADFDA823">现有应用程序中</a> ），使新版本成为会话版本，并检查新版本是否真的是会话版本。
                           </p>
                           <div class="example" id="GUID-A356E1BC-3E63-4C59-A00E-95436F3C1DF7__BABBAEFA">
                              <p class="titleinexample">示例27-10创建用于升级示例应用程序的版本</p>
                              <ol>
                                 <li>
                                    <p>创建新版本：</p><pre class="oac_no_warn" dir="ltr">创建版Post_Upgrade作为Ora $ Base的孩子;</pre></li>
                                 <li>
                                    <p>制作新版本的会话版：</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET EDITION = Post_Upgrade;</pre></li>
                                 <li>
                                    <p>查看会话版：</p><pre class="oac_no_warn" dir="ltr">SELECT SYS_CONTEXT（'Userenv'，'Current_Edition_Name'）“Current_Edition”FROM DUAL;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">Current_Edition ------------------------------------------------- ---------------------------- POST_UPGRADE选择了1行。
</pre></li>
                              </ol>
                              <p>在<code class="codeph">Post_Upgrade</code>版本中， <a href="editions.html#GUID-A356E1BC-3E63-4C59-A00E-95436F3C1DF7">示例：创建升级示例应用程序的版本</a>显示如何将新列添加到物理表并重新编译通过添加列而失效的触发器。然后，它显示如何替换版本视图<code class="codeph">Contacts</code>以便按所需的逻辑名称选择表的列。
                              </p>
                              <div class="infoboxnote" id="GUID-A356E1BC-3E63-4C59-A00E-95436F3C1DF7__GUID-D5F2948A-DB09-4FDE-9FDB-869F520E6305">
                                 <p class="notep1">注意：</p>
                                 <p>因为您将更改基表，请参阅<span class="q">“ <a href="sql-processing-for-application-developers.html#GUID-42F52650-84EC-4D7C-B5A8-FBEFE73366C2">非阻塞和阻止DDL语句”</a> 。</span></p>
                              </div>
                           </div>
                           <!-- class="example" -->
                        </div>
                     </div>
                     <div class="sect5"><a id="GUID-97280B8B-D48E-425D-944F-4C98F60A01DF" name="GUID-97280B8B-D48E-425D-944F-4C98F60A01DF"></a><h6 id="ADFNS-GUID-97280B8B-D48E-425D-944F-4C98F60A01DF" class="sect6">示例：更改表并替换版本视图</h6>
                        <div>
                           <p>在<code class="codeph">Post_Upgrade</code>版本中， <a href="editions.html#GUID-97280B8B-D48E-425D-944F-4C98F60A01DF__BABBJGBJ">示例27-11</a>显示了如何为前向交叉触发器创建两个过程以使用，在禁用状态下创建正向和反向交叉触发，并启用它们。
                           </p>
                           <div class="example" id="GUID-97280B8B-D48E-425D-944F-4C98F60A01DF__BABBJGBJ">
                              <p class="titleinexample">示例27-11更改表并替换版本视图</p>
                              <ol>
                                 <li>
                                    <p>将新列添加到物理表：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE Contacts_Table ADD（First_Name_2 varchar2（20），Last_Name_2 varchar2（25），Country_Code_2 varchar2（20），Phone_Number_2 varchar2（20））;</pre><p>（这是非阻塞DDL。）</p>
                                 </li>
                                 <li>
                                    <p>重新编译无效的触发器：</p><pre class="oac_no_warn" dir="ltr">ALTER TRIGGER Contacts_BI COMPILE REUSE SETTINGS;</pre></li>
                                 <li>
                                    <p>替换版本视图，以便选择具有所需逻辑名称的替换列：</p><pre class="oac_no_warn" dir="ltr">创建或替换版本视图联系人AS SELECT ID ID，First_Name_2 First_Name，Last_Name_2 Last_Name，Country_Code_2 Country_Code，Phone_Number_2 Phone_Number FROM Contacts_Table;</pre></li>
                              </ol>
                           </div>
                           <!-- class="example" -->
                        </div>
                     </div>
                     <div class="sect5"><a id="GUID-4F992EF7-770A-4939-BA95-D77ACD205E94" name="GUID-4F992EF7-770A-4939-BA95-D77ACD205E94"></a><h6 id="ADFNS-GUID-4F992EF7-770A-4939-BA95-D77ACD205E94" class="sect6">示例：创建和启用Crossedition触发器</h6>
                        <div>
                           <p>在<code class="codeph">Post_Upgrade</code>版本中， <a href="editions.html#GUID-4F992EF7-770A-4939-BA95-D77ACD205E94__BABEGFDD">示例27-12</a>显示了如何应用转换。
                           </p>
                           <div class="example" id="GUID-4F992EF7-770A-4939-BA95-D77ACD205E94__BABEGFDD">
                              <p class="titleinexample">示例27-12创建和启用Crossedition触发器</p>
                              <ol>
                                 <li>
                                    <p>创建前向交叉触发器使用的第一个过程：</p><pre class="oac_no_warn" dir="ltr">创建或替换过程Set_First_And_Last_Name（名称IN VARCHAR2，First_Name OUT VARCHAR2，Last_Name OUT VARCHAR2）IS Comma_Pos NUMBER：= INSTR（Name，'，'）; BEGIN如果Comma_Pos为空或Comma_Pos &lt;2那么升高Program_Error;万一; Last_Name：= SUBSTR（Name，1，Comma_Pos-1）; Last_Name：= RTRIM（Ltrim（Last_Name））; First_Name：= SUBSTR（Name，Comma_Pos + 1）; First_Name：= RTRIM（LTRIM（First_Name））; END Set_First_And_Last_Name; /</pre></li>
                                 <li>
                                    <p>创建前向交叉触发器使用的第二个过程：</p><pre class="oac_no_warn" dir="ltr">创建或替换过程Set_Country_Code_And_Phone_No（Phone_Number IN VARCHAR2，Country_Code OUT VARCHAR2，Phone_Number_V2 OUT VARCHAR2）IS Char_To_Number_Error EXCEPTION; PRAGMA EXCEPTION_INIT（Char_To_Number_Error，-06502）; Bad_Phone_Number EXCEPTION; Nmbr VARCHAR2（30）：= REPLACE（Phone_Number，'。'，' - '）;功能Is_US_Number（Nmbr IN VARCHAR2）RETURN BOOLEAN是Len NUMBER：= LENGTH（Nmbr）; Dash_Pos NUMBER：= INSTR（Nmbr，' - '）; n PLS_INTEGER;如果Len为NULL或Len &lt;&gt; 12则开始返回FALSE;万一;如果Dash_Pos为NULL或Dash_Pos &lt;&gt; 4那么返回错误;万一; BEGIN n：= TO_NUMBER（SUBSTR（Nmbr，1,3））;当Char_To_Number_Error返回错误时的异常;结束; Dash_Pos：= INSTR（Nmbr，' - '，5）;如果Dash_Pos为NULL或Dash_Pos &lt;&gt; 8那么返回错误;万一; BEGIN n：= TO_NUMBER（SUBSTR（Nmbr，5,3））;当Char_To_Number_Error返回错误时的异常;结束; BEGIN n：= TO_NUMBER（SUBSTR（Nmbr，9））;当Char_To_Number_Error返回错误时的异常;结束;返回;结束Is_US_Number;如果Nmbr喜欢'011-％'，那么声明Dash_Pos NUMBER：= INSTR（Nmbr，' - '，5）; BEGIN Country_Code：='+'|| TO_NUMBER（SUBSTR（Nmbr，5，Dash_Pos-5））; Phone_Number_V2：= SUBSTR（Nmbr，Dash_Pos + 1）; Char_To_Number_Error然后提出Bad_Phone_Number的异常;结束; ELSIF Is_US_Number（Nmbr）那么Country_Code：='+ 1'; Phone_Number_V2：= Nmbr; ELSE RAISE Bad_Phone_Number;万一; Bad_Phone_Number THEN Country_Code：='+ 0'时的异常; Phone_Number_V2：='000-000-0000'; END Set_Country_Code_And_Phone_No; /</pre></li>
                                 <li>
                                    <p>在禁用状态下创建前向交叉触发器：</p><pre class="oac_no_warn" dir="ltr">在插入或更新之前创建或替换TRIGGER Contacts_Fwd_Xed对于每个行<span class="bold">向前交叉，</span> <span class="bold">禁止</span> BEGIN Set_First_And_Last_Name（：NEW.Name_1，：NEW.First_Name_2，：NEW.Last_Name_2）; Set_Country_Code_And_Phone_No（：NEW.Phone_Number_1，：NEW.Country_Code_2，：NEW.Phone_Number_2）; END Contacts_Fwd_Xed; /</pre></li>
                                 <li>
                                    <p>启用前向交叉触发：</p><pre class="oac_no_warn" dir="ltr">ALTER TRIGGER Contacts_Fwd_Xed <span class="bold">ENABLE</span> ;</pre></li>
                                 <li>
                                    <p>在禁用状态下创建反向交叉触发器：</p><pre class="oac_no_warn" dir="ltr">在插入或更新之前创建或替换TRIGGER Contacts_Rvrs_Xed对于每个行<span class="bold">反向</span> <span class="bold">禁止</span>崩溃开始：NEW.Name_1：=：NEW.Last_Name_2 ||'，'||：NEW.First_Name_2; ：NEW.Phone_Number_1：= CASE：新。Country_Code_2当'+1'然后替换（：NEW.Phone_Number_2，' - '，'。'）ELSE'011。'|| LTRIM（：NEW.Country_Code_2，'+'）||'。“|| REPLACE（：NEW.Phone_Number_2，' - '，'。'） 结束; END Contacts_Rvrs_Xed; /</pre></li>
                                 <li>
                                    <p>启用反向交叉触发：</p><pre class="oac_no_warn" dir="ltr">ALTER TRIGGER Contacts_Rvrs_Xed <span class="bold">ENABLE</span> ;</pre></li>
                                 <li>
                                    <p>等到提交或回滚挂起的更改：</p><pre class="oac_no_warn" dir="ltr">DECLARE scn NUMBER：= NULL; timeout CONSTANT INTEGER：= NULL; BEGIN IF NOT DBMS_UTILITY.WAIT_ON_PENDING_DML（Tables =&gt;'Contacts_Table'，timeout =&gt; timeout，scn =&gt; scn）THEN RAISE_APPLICATION_ERROR（-20000，'Wait_On_Pending_DML（）超时。在SCN之前启用了CET：'|| SCN）;万一;结束; /</pre></li>
                              </ol>
                              <div class="infoboxnotealso" id="GUID-4F992EF7-770A-4939-BA95-D77ACD205E94__NOTE-1233-CBCFDC47">
                                 <p class="notep1">也可以看看：</p>
                                 <p>有关<code class="codeph">DBMS_UTILITY</code>信息<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adfns&amp;id=ARPLS73275" target="_blank"><span class="italic">，请参见Oracle Database PL / SQL包和类型参考</span></a> 。 <code class="codeph">WAIT_ON_PENDING_DML</code>程序</p>
                              </div>
                           </div>
                           <!-- class="example" -->
                        </div>
                     </div>
                     <div class="sect5"><a id="GUID-B3BA1977-C5E2-4A8A-BF34-82E07232BB27" name="GUID-B3BA1977-C5E2-4A8A-BF34-82E07232BB27"></a><h6 id="ADFNS-GUID-B3BA1977-C5E2-4A8A-BF34-82E07232BB27" class="sect6">示例：应用变换</h6>
                        <div>
                           <p>在Post_Upgrade版本中， <a href="editions.html#GUID-B3BA1977-C5E2-4A8A-BF34-82E07232BB27__BABHAFBD">示例</a> 27-13示例显示了如何应用转换。
                           </p>
                           <div class="example" id="GUID-B3BA1977-C5E2-4A8A-BF34-82E07232BB27__BABHAFBD">
                              <p class="titleinexample">示例27-13应用转换</p><pre class="oac_no_warn" dir="ltr">DECLARE c NUMBER：= DBMS_SQL.OPEN_CURSOR（）; x NUMBER; BEGIN DBMS_SQL.PARSE（c =&gt; c，Language_Flag =&gt; DBMS_SQL.NATIVE，Statement =&gt;'UPDATE Contacts_Table SET ID = ID'，Apply_Crossedition_Trigger =&gt;'Contacts_Fwd_Xed'）; x：= DBMS_SQL.EXECUTE（c）; DBMS_SQL.CLOSE_CURSOR（C）;承诺;结束; /</pre></div>
                           <!-- class="example" -->
                        </div>
                     </div>
                     <div class="sect5"><a id="GUID-239A6927-E6FD-464D-9ACC-B6DCFF11786C" name="GUID-239A6927-E6FD-464D-9ACC-B6DCFF11786C"></a><h6 id="ADFNS-GUID-239A6927-E6FD-464D-9ACC-B6DCFF11786C" class="sect6">示例：在更改的表中查看数据</h6>
                        <div>
                           <p>在<code class="codeph">Post_Upgrade</code>版本中， <a href="editions.html#GUID-239A6927-E6FD-464D-9ACC-B6DCFF11786C__BABHACHI">示例27-14</a>显示了如何检查更改是否按预期工作。比较<a href="editions.html#GUID-239A6927-E6FD-464D-9ACC-B6DCFF11786C">示例：在已更改的表</a>中<a href="editions.html#GUID-3AD149F5-AC08-40AA-9ED6-C6C35414A938">查看数据</a>到<a href="editions.html#GUID-3AD149F5-AC08-40AA-9ED6-C6C35414A938">示例：查看现有表中的数据</a> 。
                           </p>
                           <div class="example" id="GUID-239A6927-E6FD-464D-9ACC-B6DCFF11786C__BABHACHI">
                              <p class="titleinexample">示例27-14在更改的表中查看数据</p>
                              <ol>
                                 <li>
                                    <p>格式列以提高可读性：</p><pre class="oac_no_warn" dir="ltr">COLUMN ID FORMAT 999 COLUMN Last_Name FORMAT A15 COLUMN First_Name FORMAT A15 COLUMN Country_Code FORMAT A12 COLUMN Phone_Number FORMAT A12</pre></li>
                                 <li>
                                    <p>查询：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM Contacts ORDER BY Last_Name;</pre><p>结果：</p><pre class="oac_no_warn" dir="ltr">ID FIRST_NAME LAST_NAME COUNTRY_CODE PHONE_NUMBER ---- --------------- --------------- ----------- -  ------------ 174 Ellen Abel +44 1644-429267 166 Sundar Ande +44 1346-629268 130 Mozhe Atkinson +1 650-124-6234 105 David Austin +1 590-423-4569 204 Hermann Baer +1 515-123-8888 116 Shelli Baida +1 515-127-4563 167 Amit Banda +44 1346-729268 172 Elizabeth Bates +44 1343-529268 192 Sarah Bell +1 650-501-1876 151 David Bernstein +44 1344-345268 129 Laura Bissot +1 650-124-5234 169 Harrison Bloom +44 1343-829268 185 Alexis Bull +1 650-509-2876 187 Anthony Cabrio +1 650-509-4876 154 Nanette Cambrault +44 1344-987668 148 Gerald Cambrault +44 1344-619268 110 John Chen +1 515-124-4269 ...120 Matthew Weiss +1 650-123-1234 200 Jennifer Whalen +1 515-123-4444 149 Eleni Zlotkey +44 1344-429018 107行选择。
</pre></li>
                              </ol>
                              <p>如果更改按预期工作，您现在可以按照“ <a href="editions.html#GUID-847C93E1-1001-418A-9A46-F3D3226DE8F9">使用交叉触发器的EBR</a>过程”中的<a href="editions.html#GUID-847C93E1-1001-418A-9A46-F3D3226DE8F9">过程的</a>步骤<a href="editions.html#GUID-847C93E1-1001-418A-9A46-F3D3226DE8F9__BABDHEFG">10</a>到<a href="editions.html#GUID-847C93E1-1001-418A-9A46-F3D3226DE8F9__BABIIIHE">13</a>进行<a href="editions.html#GUID-847C93E1-1001-418A-9A46-F3D3226DE8F9">操作</a> 。
                              </p>
                           </div>
                           <!-- class="example" -->
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
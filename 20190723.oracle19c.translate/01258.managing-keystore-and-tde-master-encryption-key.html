<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can modify settings for the keystore and TDE master encryption key, and store Oracle Database and store Oracle GoldenGate secrets in a keystore."></meta>
      <meta name="description" content="You can modify settings for the keystore and TDE master encryption key, and store Oracle Database and store Oracle GoldenGate secrets in a keystore."></meta>
      <title>管理密钥库和主加密密钥</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Advanced Security Guide "></meta>
      <meta property="og:description" content="You can modify settings for the keystore and TDE master encryption key, and store Oracle Database and store Oracle GoldenGate secrets in a keystore."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Advanced Security Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="advanced-security-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-13T09:26:12-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96301-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="configuring-transparent-data-encryption.html" title="Previous" type="text/html"></link>
      <link rel="next" href="managing-keystores-encryption-keys-in-united-mode.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Advanced Security Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ASOAG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="configuring-transparent-data-encryption.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="managing-keystores-encryption-keys-in-united-mode.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">高级安全指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="asopart1.html" property="item" typeof="WebPage"><span property="name">使用透明数据加密</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理密钥库和主加密密钥</li>
            </ol>
            <a id="GUID-0C080CA8-1812-4DCD-AC30-FE47534C7962" name="GUID-0C080CA8-1812-4DCD-AC30-FE47534C7962"></a><a id="ASOAG10475"></a>
            
            <h2 id="ASOAG-GUID-0C080CA8-1812-4DCD-AC30-FE47534C7962" class="sect2"><span class="enumeration_chapter">4</span>管理密钥库和主加密密钥</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以修改密钥库和TDE主加密密钥的设置，并存储Oracle数据库并将Oracle GoldenGate机密存储在密钥库中。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076">管理密钥库</a><br>您可以在密钥库上执行维护活动，例如更改密码以及备份，合并和移动密钥库。
                  </li>
                  <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-CDF39F23-2371-4E93-A503-25798F1E97E4">管理TDE主加密密钥</a><br>您可以通过多种方式管理TDE主加密密钥。
                  </li>
                  <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FF270B27-A456-477A-81E0-50E74926A810">存储Oracle数据库的秘密</a><br>秘密是支持内部Oracle数据库功能的数据，这些功能将外部客户端（如Oracle GoldenGate）集成到数据库中。
                  </li>
                  <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FBAC7644-B19F-4899-8FA0-0C487CABF368">在密钥库中存储Oracle GoldenGate秘密</a><br>您可以将Oracle GoldenGate机密存储在透明数据加密密钥库中。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="asopart1.html" title="第一部分介绍了如何使用透明数据加密。">使用透明数据加密</a></p>
                  </div>
               </div>
            </div>
            <a id="ASOAG10311"></a><div class="props_rev_3"><a id="GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" name="GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076"></a><h3 id="ASOAG-GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" class="sect3">管理密钥库</h3>
               <div>
                  <p>您可以在密钥库上执行维护活动，例如更改密码以及备份，合并和移动密钥库。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-AB8F896D-A068-47AC-AA26-DDA52BFE5699">执行需要密钥库密码的操作</a><br>对于软件和硬件密钥库，许多<code class="codeph">ADMINISTER KEY MANAGEMENT</code>操作都需要访问密钥库密码。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-56595198-9FD2-4857-9BB9-D908BA89904C">更改软件密钥库的密码</a><br>Oracle数据库使您可以轻松更改受密码保护的软件密钥库密码。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-ADE52945-DC1A-4F59-9BA5-0813208017C3">更改硬件密钥库的密码</a><br>要更改硬件密钥库的密码，必须使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-4F6206B6-A33F-4FB1-9223-DD61FFAD3F12">为密钥库密码配置外部存储</a><br>密钥库密码的外部存储将密钥库密码存储在集中访问和管理的位置。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-43BBC184-F801-45A9-B4D0-BB7E9767AED0">备份受密码保护的软件密钥库</a><br>备份受密码保护的软件密钥库时，可以创建备份标识符字符串以描述备份类型。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0AB9DABF-266A-400A-953A-81B5A379A0D5">V $ ENCRYPTION_WALLET视图如何解释备份操作</a><br><code class="codeph">V$ENCRYPTION_WALLET</code>视图的<code class="codeph">BACKUP</code>列指示如何创建密钥库的副本。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-3A7806BB-B5C2-4DF4-9EA9-15715FF36B30">硬件密钥库的备份</a><br>您无法使用Oracle数据库备份硬件密钥库。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DF77BD8F-83FC-4F0F-8B2D-2E51D753A6F1">合并软件密钥库</a><br>您可以通过各种方式合并软件密钥库。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-3BD2DD80-4DB5-4EA7-AFA2-D48D02839BED">将TDE主加密密钥移动到新密钥库中</a><br>您可以将现有TDE主加密密钥从现有软件密码密钥库移动到新密钥库中。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B3BEFCC2-0817-4C55-869D-6D3BEC42F6C4">将软件密钥库移动到新位置</a><br>更新<code class="codeph">WALLET_ROOT</code>参数后，将软件密钥库移动到新位置。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-6CB2C353-44C5-46B5-9CDB-2B4D9D0841BC">将软件密钥库移出自动存储管理</a><br>您可以使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句将软件密钥库移出自动存储管理。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-4335220F-49FF-40BC-9EB0-21442608F436">在软件密码密钥库和硬件密钥库之间迁移</a><br>您可以在受密码保护的软件密钥库和硬件密钥库之间进行迁移。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-83DE1475-04DD-4B85-9CFA-D00AB0013EC8">从Key Key Vault迁移密钥库</a><br>您可以使用Oracle Key Vault将软件和硬件密钥库迁移到Oracle Key Vault或从Oracle Key Vault迁移。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-952ABBF4-D92C-4DB9-A1AB-5B2E25582956">配置自动存储管理的密钥库</a><br>您可以在自动存储管理（ASM）磁盘组上存储软件密钥库。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-672990D8-A3C6-45A0-BEA8-86B7104FE402">关闭密钥库</a><br>您可以手动关闭软件和硬件密钥库。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-F11271F4-7789-4F0D-B999-86DAFBE9152C">加密数据的备份和恢复</a><br>对于软件密钥库，如果没有TDE主加密密钥，则无法访问加密数据。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-5CC83A60-8EA4-4984-AD2C-42BC12E5A16F">删除密钥库的危险</a><br>Oracle强烈建议您在将密钥库加密密钥移动到新密钥库之前不要删除密钥库。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0C080CA8-1812-4DCD-AC30-FE47534C7962" title="您可以修改密钥库和TDE主加密密钥的设置，并存储Oracle数据库并将Oracle GoldenGate机密存储在密钥库中。">管理密钥库和主加密密钥</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-AB8F896D-A068-47AC-AA26-DDA52BFE5699" name="GUID-AB8F896D-A068-47AC-AA26-DDA52BFE5699"></a><h4 id="ASOAG-GUID-AB8F896D-A068-47AC-AA26-DDA52BFE5699" class="sect4">执行需要密钥库密码的操作</h4>
                  <div>
                     <p>对于软件和硬件密钥库，许多<code class="codeph">ADMINISTER KEY MANAGEMENT</code>操作都需要访问密钥库密码。
                     </p>
                     <p>在某些情况下，软件密钥库在操作成功之前依赖于自动登录密钥库。必须关闭自动登录密钥库，并且必须先打开受密码保护的密钥库，然后才能访问密码。自动登录密钥库在配置并请求密钥时自动打开。它们通常用于可以关闭密钥库但数据库操作需要密钥的操作（例如，在重新启动数据库之后）。由于自动登录密钥库会自动打开，因此可以检索它以执行数据库操作，而无需手动干预。但是，在打开自动登录密钥库时，无法执行某些需要密钥库密码的密钥库操作。必须关闭自动登录密钥库，并且必须为需要密码的密钥库操作打开受密码保护的密钥库。</p>
                     <p>在多租户环境中，重新打开密钥库会影响其他PDB。例如，根中的自动登录密钥库必须可由CDB中的PDB访问此根。</p>
                     <p>执行以下操作时，可以通过在<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句中包含<code class="codeph">FORCE KEYSTORE</code>子句来临时打开密钥库：旋转密钥库密码;创建，使用，重新加密，标记，导入，导出，迁移或反向迁移加密密钥;打开或备份密钥库;添加，更新或删除密钥库。在多租户环境中，如果根目录中未打开任何密钥库，则<code class="codeph">FORCE KEYSTORE</code>将在根目录中打开受密码保护的密钥库。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="您可以在密钥库上执行维护活动，例如更改密码以及备份，合并和移动密钥库。">管理密钥库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10312"></a><div class="props_rev_3"><a id="GUID-56595198-9FD2-4857-9BB9-D908BA89904C" name="GUID-56595198-9FD2-4857-9BB9-D908BA89904C"></a><h4 id="ASOAG-GUID-56595198-9FD2-4857-9BB9-D908BA89904C" class="sect4">更改软件密钥库的密码</h4>
                  <div>
                     <p>Oracle数据库使您可以轻松更改受密码保护的软件密钥库密码。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-4F880551-71F9-4181-97F4-0604C1B3F3E5">关于更改受密码保护的软件密钥库的密码</a><br>您只能更改受保护的软件密钥库的密码。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-530B3EDF-393D-41C8-A393-B643DF0143A0">更改受密码保护的软件密钥库密码</a><br>要更改受密码保护的软件密钥库的密码，必须使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="您可以在密钥库上执行维护活动，例如更改密码以及备份，合并和移动密钥库。">管理密钥库</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10518"></a><div class="props_rev_3"><a id="GUID-4F880551-71F9-4181-97F4-0604C1B3F3E5" name="GUID-4F880551-71F9-4181-97F4-0604C1B3F3E5"></a><h5 id="ASOAG-GUID-4F880551-71F9-4181-97F4-0604C1B3F3E5" class="sect5">关于更改受密码保护的软件密钥库的密码</h5>
                     <div>
                        <p>您只能更改受保护的软件密钥库的密码。</p>
                        <p>您可以根据网站的安全策略，合规性指南和其他安全要求随时更改此密码。作为更改密码的命令的一部分，您将被强制指定<code class="codeph">WITH BACKUP</code>子句，从而强制备份当前密钥库。在密码更改操作期间，加密和解密等透明数据加密操作将继续正常工作。
                        </p>
                        <p>您可以随时更改此密码。如果您认为密码被泄露，则可能需要更改此密码。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-56595198-9FD2-4857-9BB9-D908BA89904C" title="Oracle数据库使您可以轻松更改受密码保护的软件密钥库密码。">更改软件密钥库的密码</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10519"></a><div class="props_rev_3"><a id="GUID-530B3EDF-393D-41C8-A393-B643DF0143A0" name="GUID-530B3EDF-393D-41C8-A393-B643DF0143A0"></a><h5 id="ASOAG-GUID-530B3EDF-393D-41C8-A393-B643DF0143A0" class="sect5">更改受密码保护的软件密钥库密码</h5>
                     <div>
                        <p>要更改受密码保护的软件密钥库的密码，必须使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句。
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>以已被授予<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限的用户身份登录数据库实例。
                                 </p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm输入密码： <span class="italic">password</span>已连接。
</pre></li>
                              <li>
                                 <p>使用以下语法更改受密码保护的软件密钥库的密码：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理ALTER KEYSTORE PASSWORD [FORCE KEYSTORE]由<span class="italic">old_password</span>设置标识<span class="italic">new_password</span> [WITH BACKUP [ <span class="italic">USING'backup_identifier</span> ']];</pre><p>在本规范中：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code>临时打开此操作的受密码保护的密钥库。您必须打开此操作的密钥库。
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">old_password</code></span>是您要更改的当前密钥库密码。
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">new_password</code></span>是您将为密钥库设置的新密码。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">WITH BACKUP</code>在更改密码之前创建当前密钥库的备份。您必须包含此子句。
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">backup_identifier</code></span>为创建的备份指定可选的标识符字符串。<span class="italic"><code class="codeph">backup_identifier</code></span>将添加到备份文件的名称中。将<span class="italic"><code class="codeph">backup_identifier</code></span>括在单引号（''）中。该标识符被附加到指定密钥库文件（例如， <code class="codeph">ewallet_</code> <span class="italic"><code class="codeph">time_stamp</code></span> <code class="codeph">_emp_key_pwd_change.p12</code> ）。
                                       </p>
                                    </li>
                                 </ul>
                                 <p>以下示例备份当前密钥库，然后更改密钥库的密码：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理ALTER KEYSTORE PASSWORD FORCE KEYSTORE由<span class="italic">old_password</span>识别SET <span class="italic">new_password</span> WITH BACKUP使用'pwd_change';密钥库已更改。</pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-56595198-9FD2-4857-9BB9-D908BA89904C" title="Oracle数据库使您可以轻松更改受密码保护的软件密钥库密码。">更改软件密钥库的密码</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG10397"></a><div class="props_rev_3"><a id="GUID-ADE52945-DC1A-4F59-9BA5-0813208017C3" name="GUID-ADE52945-DC1A-4F59-9BA5-0813208017C3"></a><h4 id="ASOAG-GUID-ADE52945-DC1A-4F59-9BA5-0813208017C3" class="sect4">更改硬件密钥库的密码</h4>
                  <div>
                     <p>要更改硬件密钥库的密码，必须使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句。
                     </p>
                     <div class="section">
                        <ol>
                           <li>
                              <p>以已被授予<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限的用户身份登录数据库实例。
                              </p>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm输入密码： <span class="italic">password</span>已连接。
</pre></li>
                           <li>
                              <p>关闭硬件密钥库。</p>
                              <p>例如，对于HSM：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE CLOSE由“psmith： <span class="italic">password</span> ”标识;</pre><p>对于密码存储在外部的密钥库：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理设置由外部商店识别的KEYSTORE CLOSE;</pre></li>
                           <li>
                              <p>从硬件安全模块管理界面，创建新的硬件安全模块密码。</p>
                           </li>
                           <li>
                              <p>在SQL * Plus中，打开硬件密钥库。</p>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN由“psmith： <span class="italic">new_password</span> ”识别;管理员密钥管理设置KEYSTORE OPEN由外部商店识别;</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-C8CF91A0-9EF9-4479-880D-1D8C2FBE05B2" title="要关闭硬件密钥库，必须将ADMINISTER KEY MANAGEMENT语句与SET KEYSTORE CLOSE子句一起使用。">关闭硬件密钥库</a></li>
                           <li><a href="configuring-transparent-data-encryption.html#GUID-81E6D2BA-EE27-4D35-96FB-2FFC0BCD396B" title="要打开硬件密钥库，请使用ADMINISTER KEY MANAGEMENT语句和SET KEYSTORE OPEN子句。">打开硬件密钥库</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="您可以在密钥库上执行维护活动，例如更改密码以及备份，合并和移动密钥库。">管理密钥库</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-4F6206B6-A33F-4FB1-9223-DD61FFAD3F12" name="GUID-4F6206B6-A33F-4FB1-9223-DD61FFAD3F12"></a><h4 id="ASOAG-GUID-4F6206B6-A33F-4FB1-9223-DD61FFAD3F12" class="sect4">为密钥库密码配置外部存储</h4>
                  <div>
                     <p>密钥库密码的外部存储将密钥库密码存储在集中访问和管理的位置。</p>
                     <div class="section">当运行自动化工具的脚本包含硬编码密码时，使用自动化工具执行需要密码的透明数据加密操作的情况下，密码的外部存储非常有用。为避免在脚本中对密码进行硬编码，可以将此密码存储在数据库服务器上的外部存储中。在多租户环境中，不同的PDB可以使用外部存储。</div>
                     <!-- class="section" -->
                     <div class="section">在<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句中使用<code class="codeph">IDENTIFIED BY EXTERNAL STORE</code>子句之前，必须完成以下步骤。
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>使用以下方法之一设置外部密钥库凭据位置：</span><ul>
                              <li>为<code class="codeph">EXTERNAL_KEYSTORE_CREDENTIAL_LOCATION</code>参数运行<code class="codeph">ALTER SYSTEM</code>语句。例如：<pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET EXTERNAL_KEYSTORE_CREDENTIAL_LOCATION =“/ etc / ORACLE / WALLETS / orcl / external_store”SCOPE = SPFILE;</pre></li>
                              <li>编辑数据库实例的<code class="codeph">init.ora</code>文件。例如：<pre class="oac_no_warn" dir="ltr">EXTERNAL_KEYSTORE_CREDENTIAL_LOCATION =“/ etc / ORACLE / WALLETS / orcl / external_store”</pre><p>缺省情况下， <code class="codeph">init.ora</code>文件位于<code class="codeph"><span class="codeinlineitalic">ORACLE_HOME</span> /dbs</code>目录或<code class="codeph">TNS_ADMIN</code>环境变量设置的位置。
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li class="stepexpand"><span>以已授予<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限且具有<code class="codeph">ALTER SYSTEM</code>系统特权的用户身份登录。</span><div>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as sysdba输入密码： <span class="italic">password</span>已连接。</pre></div>
                        </li>
                        <li class="stepexpand"><span>通过将<code class="codeph">ADD SECRET</code>子句包含在<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句中，创建包含密钥库密码的自动登录密钥库。</span><div>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理为客户端'TDE_WALLET'添加秘密' <span class="italic">密码</span> '到LOCAL AUTO_LOGIN KEYSTORE'/ etc / ORACLE / WALLETS / orcl / external_store';</pre><p>在此示例中，为<code class="codeph">FOR CLIENT</code>子句设置的<code class="codeph"><span class="codeinlineitalic">client_identifier</span></code>值输入大写字母的<code class="codeph">'TDE_WALLET'</code>并用单引号括起来。这是一个固定值，必须按照此处所示输入<code class="codeph">ADD SECRET</code>子句的此应用程序。否则，TDE将无法找到此秘密，并且尝试使用<code class="codeph">IDENTIFIED BY EXTERNAL STORE</code>设置将生成<code class="codeph">ORA-00988: missing or invalid password(s)</code>错误消息。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>重启数据库。</span><div><pre class="oac_no_warn" dir="ltr">关机立即启动</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>之后，您必须使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句中的<code class="codeph">EXTERNAL STORE</code>子句执行以下操作：打开，关闭，备份密钥库;添加，更新或删除秘密密钥库;创建，使用，重新加密，标记，导入，导出加密密钥。
                        </p>
                        <p>例如：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理设置KEYSTORE OPEN由外部商店识别;</pre><p>您可以使用<code class="codeph">ADMINISTER KEY MANAGEMENT UPDATE CLIENT SECRET</code>语句或<code class="codeph">ADMINISTER KEY MANAGEMENT DELETE CLIENT SECRET</code>语句更改或删除外部密钥库密码。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FF270B27-A456-477A-81E0-50E74926A810" title="秘密是支持内部Oracle数据库功能的数据，这些功能将外部客户端（如Oracle GoldenGate）集成到数据库中。">存储Oracle数据库的秘密</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="您可以在密钥库上执行维护活动，例如更改密码以及备份，合并和移动密钥库。">管理密钥库</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="ASOAG10313"></a><div class="props_rev_3"><a id="GUID-43BBC184-F801-45A9-B4D0-BB7E9767AED0" name="GUID-43BBC184-F801-45A9-B4D0-BB7E9767AED0"></a><h4 id="ASOAG-GUID-43BBC184-F801-45A9-B4D0-BB7E9767AED0" class="sect4">备份受密码保护的软件密钥库</h4>
                  <div>
                     <p>备份受密码保护的软件密钥库时，可以创建备份标识符字符串以描述备份类型。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-3B1B2668-8F8A-48C0-9E97-10576CD78DFA">关于备份受密码保护的软件密钥库</a><br>您必须根据站点的安全策略和要求备份受密码保护的软件密钥库。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-99B51117-42E3-4BB8-825B-48CDF62FDD63">为备份密钥库创建备份标识符字符串</a><br>软件密码密钥库的备份文件名源自受密码保护的软件密钥库的名称。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-645FA0D7-1AAB-48B9-AD7D-9FC2C13ED352">备份受密码保护的软件密钥库</a><br><code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句的<code class="codeph">BACKUP KEYSTORE</code>子句备份受密码保护的软件密钥库。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="您可以在密钥库上执行维护活动，例如更改密码以及备份，合并和移动密钥库。">管理密钥库</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10409"></a><div class="props_rev_3"><a id="GUID-3B1B2668-8F8A-48C0-9E97-10576CD78DFA" name="GUID-3B1B2668-8F8A-48C0-9E97-10576CD78DFA"></a><h5 id="ASOAG-GUID-3B1B2668-8F8A-48C0-9E97-10576CD78DFA" class="sect5">关于备份受密码保护的软件密钥库</h5>
                     <div>
                        <p>您必须根据站点的安全策略和要求备份受密码保护的软件密钥库。</p>
                        <p>密钥库的备份包含原始密钥库中包含的所有密钥。Oracle数据库使用创建时间戳（UTC）为备份密钥库添加前缀。如果提供标识符字符串，则会在时间戳和密钥库名称之间插入此字符串。</p>
                        <p>完成备份操作后，原始密钥库中的密钥将标记为“已备份”。您可以检查查询<code class="codeph">V$ENCRYPTION_WALLET</code>数据字典视图的键的状态。
                        </p>
                        <p>您无法备份自动登录或本地自动登录软件密钥库。不能通过<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句操作直接向其添加新密钥。这些密钥库中的信息只能读取，因此不需要备份。
                        </p>
                        <p>如果尚未备份密钥库，则可以在创建TDE主加密密钥时在<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句中包含<code class="codeph">BACKUP</code>子句。这两者都备份密钥库并创建TDE主加密密钥。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-43BBC184-F801-45A9-B4D0-BB7E9767AED0" title="备份受密码保护的软件密钥库时，可以创建备份标识符字符串以描述备份类型。">备份受密码保护的软件密钥库</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10540"></a><a id="ASOAG10410"></a><div class="props_rev_3"><a id="GUID-99B51117-42E3-4BB8-825B-48CDF62FDD63" name="GUID-99B51117-42E3-4BB8-825B-48CDF62FDD63"></a><h5 id="ASOAG-GUID-99B51117-42E3-4BB8-825B-48CDF62FDD63" class="sect5">为备份密钥库创建备份标识符字符串</h5>
                     <div>
                        <p>软件密码密钥库的备份文件名源自受密码保护的软件密钥库的名称。</p>
                        <ul>
                           <li class="stepexpand"><span>要为备份密钥库创建备份标识符字符串，请使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code> SQL语句和<code class="codeph">BACKUP KEYSTORE</code>子句，语法如下：</span><div><pre class="oac_no_warn" dir="ltr">ewallet_ <span class="italic">creation-time-stamp-in-UTC</span> _ <span class="italic">用户定义字符串</span> .p12</pre><p>创建备份标识符（ <span class="italic"><code class="codeph">user_defined_string</code></span> ）时，请使用操作系统文件命名约定。例如，在UNIX系统中，您可能希望确保此设置没有空格。
                                 </p>
                                 <p>以下示例显示了创建备份密钥库，该备份密钥库使用错误编号作为用户标识的字符串，以及生成的密钥库如何显示在文件系统中。此示例包括在使用自动登录密钥库或密钥库已关闭的情况下的<code class="codeph">FORCE KEYSTORE</code>子句。
                                 </p><pre class="oac_no_warn" dir="ltr">管理员密钥管理备份KEYSTORE使用'BUG1296'FORCE KEYSTORE由<span class="italic">keystore_password</span>识别;</pre><p>此版本适用于密码存储在外部存储中的情况：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理备份KEYSTORE使用外部商店识别的'BUG1296'FORFF KEYSTORE;</pre><p>结果密钥库文件：</p><pre class="oac_no_warn" dir="ltr">ewallet_2013041513244657_BUG1296.p12</pre></div>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-43BBC184-F801-45A9-B4D0-BB7E9767AED0" title="备份受密码保护的软件密钥库时，可以创建备份标识符字符串以描述备份类型。">备份受密码保护的软件密钥库</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10411"></a><div class="props_rev_3"><a id="GUID-645FA0D7-1AAB-48B9-AD7D-9FC2C13ED352" name="GUID-645FA0D7-1AAB-48B9-AD7D-9FC2C13ED352"></a><h5 id="ASOAG-GUID-645FA0D7-1AAB-48B9-AD7D-9FC2C13ED352" class="sect5">备份受密码保护的软件密钥库</h5>
                     <div>
                        <p><code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句的<code class="codeph">BACKUP KEYSTORE</code>子句备份受密码保护的软件密钥库。
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>以已被授予<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限的用户身份登录数据库实例。
                                 </p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm输入密码： <span class="italic">password</span>已连接。
</pre></li>
                              <li>
                                 <p>使用以下语法备份密钥库</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理备份KEYSTORE [使用' <span class="italic">backup_identifier</span> '] FORCE KEYSTORE]由[EXTERNAL STORE | <span class="italic">software_keystore_password</span> ] [ <span class="italic">TO'keystore_location</span> '];</pre><p>在本规范中：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">USING</code> <span class="italic"><code class="codeph">backup_identifier</code></span>是一个可选字符串，您可以提供该字符串来标识备份。将此标识符括在单引号（ <code class="codeph">' '</code> ）中。此标识符附加到指定的密钥库文件（例如， <code class="codeph">ewallet_</code> <span class="italic"><code class="codeph">time-stamp</code></span> <code class="codeph">_emp_key_backup.p12</code> ）。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code>临时打开此操作的受密码保护的密钥库。您必须打开此操作的密钥库。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">IDENTIFIED BY</code>可以是以下设置之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">EXTERNAL STORE</code>使用存储在外部存储中的密钥库密码来执行密钥库操作。
                                             </p>
                                          </li>
                                          <li>
                                             <p><span class="italic"><code class="codeph">software_keystore_password</code></span>是密钥库的密码。
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">keystore_location</code></span>是备份密钥库的存储路径。如果未指定<span class="italic"><code class="codeph">keystore_location</code></span> ，则会在与原始密钥库相同的目录中创建备份。将此位置括在单引号（ <code class="codeph">' '</code> ）中。
                                       </p>
                                    </li>
                                 </ul>
                                 <p>以下示例在与源密钥库相同的位置备份软件密钥库。</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理BACKUP密钥库USING 'hr.emp_keystore' FORCE密钥库IDENTIFIED BY <span class="italic">software_keystore_password</span> TO '的/ etc / ORACLE /密钥库/ DB1 /';密钥库已更改。
</pre><p>在以下版本中，密钥库的密码是外部密码，因此使用<code class="codeph">EXTERNAL STORE</code>子句。密钥库将备份到与当前密钥库相同的目录中。
                                 </p><pre class="oac_no_warn" dir="ltr">管理员密钥管理备份KEYSTORE使用'hr.emp_keystore'FORCE KEYSTORE由外部商店识别;</pre><p>运行此语句后， <code class="codeph">ewallet_</code> <span class="italic"><code class="codeph">identifier</code></span> <code class="codeph">.p12</code>文件（例如， <code class="codeph">ewallet_</code> <span class="italic"><code class="codeph">time-stamp</code></span> <code class="codeph">_hr.emp_keystore.p12</code> ）将显示在密钥库位置中。
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-43BBC184-F801-45A9-B4D0-BB7E9767AED0" title="备份受密码保护的软件密钥库时，可以创建备份标识符字符串以描述备份类型。">备份受密码保护的软件密钥库</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG10505"></a><div class="props_rev_3"><a id="GUID-0AB9DABF-266A-400A-953A-81B5A379A0D5" name="GUID-0AB9DABF-266A-400A-953A-81B5A379A0D5"></a><h4 id="ASOAG-GUID-0AB9DABF-266A-400A-953A-81B5A379A0D5" class="sect4">V $ ENCRYPTION_WALLET视图如何解释备份操作</h4>
                  <div>
                     <p><code class="codeph">V$ENCRYPTION_WALLET</code>视图的<code class="codeph">BACKUP</code>列指示如何创建密钥库的副本。
                     </p>
                     <p>该列指示是否已<code class="codeph">WITH BACKUP</code> <code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句的<code class="codeph">WITH BACKUP</code>子句或<code class="codeph">ADMINISTER KEY MANAGEMENT BACKUP KEYSTORE</code>语句创建密钥库的副本。
                     </p>
                     <p>当您修改密钥或密钥时，您所做的修改在先前备份的副本中不存在，因为您制作副本然后自行修改密钥。由于以前的密钥库中没有修改的副本，因此<code class="codeph">BACKUP</code>列设置为<code class="codeph">NO</code> ，即使之前已将<code class="codeph">BACKUP</code>设置为<code class="codeph">YES</code> 。因此，如果<code class="codeph">BACKUP</code>列为<code class="codeph">YES</code> ，则在执行需要备份的操作（例如添加自定义属性标记）后， <code class="codeph">BACKUP</code>列值将更改为<code class="codeph">NO</code> 。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="您可以在密钥库上执行维护活动，例如更改密码以及备份，合并和移动密钥库。">管理密钥库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10506"></a><div class="props_rev_3"><a id="GUID-3A7806BB-B5C2-4DF4-9EA9-15715FF36B30" name="GUID-3A7806BB-B5C2-4DF4-9EA9-15715FF36B30"></a><h4 id="ASOAG-GUID-3A7806BB-B5C2-4DF4-9EA9-15715FF36B30" class="sect4">硬件密钥库的备份</h4>
                  <div>
                     <p>您无法使用Oracle数据库备份硬件密钥库。</p>
                     <p>有关备份硬件密钥库密钥的信息，请参阅HSM供应商说明。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="您可以在密钥库上执行维护活动，例如更改密码以及备份，合并和移动密钥库。">管理密钥库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10314"></a><div class="props_rev_3"><a id="GUID-DF77BD8F-83FC-4F0F-8B2D-2E51D753A6F1" name="GUID-DF77BD8F-83FC-4F0F-8B2D-2E51D753A6F1"></a><h4 id="ASOAG-GUID-DF77BD8F-83FC-4F0F-8B2D-2E51D753A6F1" class="sect4">合并软件密钥库</h4>
                  <div>
                     <p>您可以通过各种方式合并软件密钥库。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0CF462D4-4920-480F-B967-4569F4459C86">关于合并软件密钥库</a><br>您可以合并任何软件密钥库的组合，但合并的密钥库必须受密码保护。它可以具有与组成密钥库不同的密码。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-31237A4D-B35D-4EC7-92A1-957A193A3E23">将一个软件密钥库合并到现有软件密钥库中</a><br>您可以将<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句与<code class="codeph">MERGE KEYSTORE</code>子句一起使用，将一个软件密钥库合并到另一个现有软件密钥库中。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-D6DE486E-90EA-403D-8FCD-31A0DCE38E80">将两个软件密钥库合并到第三个新密钥库中</a><br>您可以将两个软件密钥库合并到第三个新密钥库中，以便不更改两个现有密钥库。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0F748689-BA29-4DA0-8C3F-BF0404E83621">将自动登录软件密钥库合并到现有的受密码保护的软件密钥库中</a><br>您可以将自动登录软件密钥库合并到现有的受密码保护的软件密钥库中。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-C87C030F-43ED-420A-A896-9860A9CF33F4">反转软件密钥库合并操作</a><br>您无法直接反转密钥库合并操作。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="您可以在密钥库上执行维护活动，例如更改密码以及备份，合并和移动密钥库。">管理密钥库</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10315"></a><div class="props_rev_3"><a id="GUID-0CF462D4-4920-480F-B967-4569F4459C86" name="GUID-0CF462D4-4920-480F-B967-4569F4459C86"></a><h5 id="ASOAG-GUID-0CF462D4-4920-480F-B967-4569F4459C86" class="sect5">关于合并软件密钥库</h5>
                     <div>
                        <p>您可以合并任何软件密钥库的组合，但合并的密钥库必须受密码保护。它可以具有与组成密钥库不同的密码。</p>
                        <p>要使用合并的密钥库，必须在创建合并的密钥库后显式打开它，即使其中一个组成密钥库在合并之前已打开。</p>
                        <p>是否将两个源密钥库中的公用密钥添加或覆盖到合并密钥库取决于您编写<code class="codeph">ADMINISTER KEY MANAGEMENT</code>合并语句的方式。例如，如果合并密钥库1和密钥库2以创建密钥库3，则密钥库1中的密钥将添加到密钥库3中。如果将Keystore 1合并到Keystore 2中，则不会覆盖Keystore 2中的公用密钥。
                        </p>
                        <p><code class="codeph">ADMINISTER KEY MANAGEMENT</code>合并语句与正在使用的已配置密钥库无关。但是，如果需要，可以将合并的密钥库用作新配置的数据库密钥库。请记住，如果要使用新创建的密钥库作为<code class="codeph">WALLET_ROOT</code>参数配置的位置的数据库的密钥库，则必须重新打开密钥库。
                        </p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-4335220F-49FF-40BC-9EB0-21442608F436" title="您可以在受密码保护的软件密钥库和硬件密钥库之间进行迁移。">在软件密码密钥库和硬件密钥库之间迁移</a></li>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-37296947-18DB-4CFA-A112-794A55E942E2" title="根据您创建的密钥库的类型，您必须先手动打开密钥库，然后才能使用它。">第3步：打开软件密钥库</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DF77BD8F-83FC-4F0F-8B2D-2E51D753A6F1" title="您可以通过各种方式合并软件密钥库。">合并软件密钥库</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10317"></a><div class="props_rev_3"><a id="GUID-31237A4D-B35D-4EC7-92A1-957A193A3E23" name="GUID-31237A4D-B35D-4EC7-92A1-957A193A3E23"></a><h5 id="ASOAG-GUID-31237A4D-B35D-4EC7-92A1-957A193A3E23" class="sect5">将一个软件密钥库合并到现有软件密钥库中</h5>
                     <div>
                        <p>您可以将<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句与<code class="codeph">MERGE KEYSTORE</code>子句一起使用，将一个软件密钥库合并到另一个现有软件密钥库中。
                        </p>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要执行此类合并，请按照<a href="managing-keystore-and-tde-master-encryption-key.html#GUID-D6DE486E-90EA-403D-8FCD-31A0DCE38E80" title="您可以将两个软件密钥库合并到第三个新密钥库中，以便不更改两个现有密钥库。">将两个软件密钥库合并到第三个新密钥库中</a>的步骤操作，但使用以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理MERGE密钥库<span class="italic">'keystore1_location'[IDENTIFIED</span> BY <span class="italic">software_keystore1_password]</span> INTO IDENTIFIED BY <span class="italic">software_keystore2_password</span>现有密钥库<span class="italic">'keystore2_location'[WITH</span> BACKUP <span class="italic">[USING'backup_identifier]];</span></pre><p>在本规范中：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="italic"><code class="codeph">keystore1_location</code></span>是第一个密钥库的目录位置，在合并后将保持不变。将此路径括在单引号（''）中。
                                       </p>
                                    </li>
                                    <li>
                                       <p>如果第一个密钥库是受密码保护的密钥库，则<code class="codeph">IDENTIFIED BY</code>子句是必需的。 <span class="italic"><code class="codeph">software_keystore1_password</code></span>是第一个密钥库的密码。
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">keystore2_location</code></span>是第一个密钥库要合并到的第二个密钥库的目录位置。将此路径括在单引号（''）中。
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">software_keystore2_password</code></span>是第二个密钥库的密码。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">WITH BACKUP</code>创建软件密钥库的备份。（可选）您可以使用<code class="codeph">USING</code>子句添加备份的简要说明。将此描述括在单引号（''）中。此标识符附加到指定的密钥库文件（例如， <code class="codeph">ewallet_</code> <span class="italic"><code class="codeph">time-stamp</code></span> <span class="italic"><code class="codeph">_emp_key_backup</code></span> <code class="codeph">.p12</code> ，其中<span class="italic"><code class="codeph">emp_key_backup</code></span>是备份标识符）。遵循操作系统使用的文件命名约定。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                           <p>合并操作后生成的密钥库始终是受密码保护的密钥库。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DF77BD8F-83FC-4F0F-8B2D-2E51D753A6F1" title="您可以通过各种方式合并软件密钥库。">合并软件密钥库</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-D6DE486E-90EA-403D-8FCD-31A0DCE38E80" name="GUID-D6DE486E-90EA-403D-8FCD-31A0DCE38E80"></a><h5 id="ASOAG-GUID-D6DE486E-90EA-403D-8FCD-31A0DCE38E80" class="sect5">将两个软件密钥库合并到第三个新密钥库中</h5>
                     <div>
                        <p>您可以将两个软件密钥库合并到第三个新密钥库中，以便不更改两个现有密钥库。</p>
                        <ol>
                           <li class="stepexpand"><span>以已被授予<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限的用户身份登录数据库实例。</span><div>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm输入密码： <span class="italic">password</span>已连接。
</pre></div>
                           </li>
                           <li class="stepexpand"><span>使用以下语法合并软件密钥库：</span><div><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理MERGE密钥库<span class="italic">'keystore1_location'[IDENTIFIED</span> BY <span class="italic">software_keystore1_password]</span> AND密钥库<span class="italic">'keystore2_location'[IDENTIFIED</span> BY <span class="italic">software_keystore2_password]</span> INTO IDENTIFIED BY <span class="italic">software_keystore3_password</span>新的密钥库<span class="italic">'keystore3_location';</span></pre><p>在本规范中：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="italic"><code class="codeph">keystore1_location</code></span>是第一个密钥库的目录位置，在合并后将保持不变。将此路径括在单引号（ <code class="codeph">' '</code> ）中。
                                       </p>
                                    </li>
                                    <li>
                                       <p>如果第一个密钥库是受密码保护的密钥库，则<code class="codeph">IDENTIFIED BY</code>子句是必需的。 <span class="italic"><code class="codeph">software_keystore1_password</code></span>是第一个密钥库的当前密码。
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">keystore2_location</code></span>是第二个密钥库的目录位置。将此路径括在单引号（ <code class="codeph">' '</code> ）中。
                                       </p>
                                    </li>
                                    <li>
                                       <p>如果第二个密钥库是受密码保护的密钥库，则<code class="codeph">IDENTIFIED BY</code>子句是必需的。 <span class="italic"><code class="codeph">software_keystore2_password</code></span>是第二个密钥库的当前密码。
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">keystore3_location</code></span>指定新合并密钥库的目录位置。将此路径括在单引号（ <code class="codeph">' '</code> ）中。如果此位置已存在现有密钥库，则该命令将退出并显示错误。
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">software_keystore3_password</code></span>是合并密钥库的新密码。
                                       </p>
                                    </li>
                                 </ul>
                                 <p>以下示例将自动登录软件密钥库与受密码保护的密钥库合并，以在新位置创建合并的受密码保护的密钥库：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理MERGE KEYSTORE'/ etc / ORACLE / KEYSTORE / DB1'和KEYSTORE'/ etc / ORACLE / KEYSTORE / DB2'ENFENTIFIED BY <span class="italic">existing_password_for_keystore_2</span> INTO NEW KEYSTORE'/ etc / ORACLE / KEYSTORE / DB3'由<span class="italic">new_password_for_keystore_3</span>识别;密钥库已更改。</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DF77BD8F-83FC-4F0F-8B2D-2E51D753A6F1" title="您可以通过各种方式合并软件密钥库。">合并软件密钥库</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10463"></a><a id="ASOAG10318"></a><div class="props_rev_3"><a id="GUID-0F748689-BA29-4DA0-8C3F-BF0404E83621" name="GUID-0F748689-BA29-4DA0-8C3F-BF0404E83621"></a><h5 id="ASOAG-GUID-0F748689-BA29-4DA0-8C3F-BF0404E83621" class="sect5">将自动登录软件密钥库合并到现有的受密码保护的软件密钥库中</h5>
                     <div>
                        <p>您可以将自动登录软件密钥库合并到现有的受密码保护的软件密钥库中。</p>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>使用<code class="codeph">ADMINISTER KEY MANAGEMENT MERGE KEYSTORE</code> SQL语句将自动登录软件密钥库合并到现有的受密码保护的软件密钥库中。
                                 </p>
                              </li>
                           </ul>
                           <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0F748689-BA29-4DA0-8C3F-BF0404E83621__CIHJCHCI">示例4-1</a>显示了如何将自动登录软件密钥库合并到受密码保护的软件密钥库中。它还会在创建合并密钥库之前创建第二个密钥库的备份。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-0F748689-BA29-4DA0-8C3F-BF0404E83621__CIHJCHCI">
                           <p class="titleinexample">示例4-1将软件自动登录密钥库合并到密码密钥库中</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理MERGE KEYSTORE'/ etc / ORACLE / KEYSTORE / DB1'进入现有的KEYSTORE'/ etc / ORACLE / KEYSTORE / DB2'IDENTIFIED BY <span class="italic">keystore_password</span> WITH BACKUP;</pre><p>在本规范中：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">MERGE KEYSTORE</code>必须指定自动登录密钥库。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">EXISTING KEYSTORE</code>是指密码密钥库。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DF77BD8F-83FC-4F0F-8B2D-2E51D753A6F1" title="您可以通过各种方式合并软件密钥库。">合并软件密钥库</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10319"></a><div class="props_rev_3"><a id="GUID-C87C030F-43ED-420A-A896-9860A9CF33F4" name="GUID-C87C030F-43ED-420A-A896-9860A9CF33F4"></a><h5 id="ASOAG-GUID-C87C030F-43ED-420A-A896-9860A9CF33F4" class="sect5">反转软件密钥库合并操作</h5>
                     <div>
                        <p>您无法直接反转密钥库合并操作。</p>
                        <div class="section">
                           <p>将密钥库合并到现有密钥库（而不是创建新密钥库）时，必须在<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句中包含<code class="codeph">WITH BACKUP</code>子句以创建此现有密钥库的备份。稍后，如果您决定必须撤消合并，则可以将合并的软件密钥库替换为您备份的密钥库。
                           </p>
                           <p>换句话说，假设您希望将密钥库A合并到密钥库B中。通过使用<code class="codeph">WITH BACKUP</code>子句，可以在合并操作开始之前为密钥库B创建备份。（最初的Keystore A仍然完好无损。）要反转合并操作，请还原到您对Keystore B所做的备份。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>使用<code class="codeph">ADMINISTER KEY MANAGEMENT MERGE KEYSTORE</code> SQL语句执行合并操作。
                                 </p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>例如，要对现有密钥库执行合并操作：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理MERGE KEYSTORE'/ etc / ORACLE / KEYSTORE / DB1'进入现有的KEYSTORE'/ etc / ORACLE / KEYSTORE / DB2'IDENTIFIED BY <span class="italic">密码</span> WITH BACKUP使用“merge1”;</pre><p>将新密钥库替换为备份密钥库，在本例中将其命名为<code class="codeph">ewallet_</code> <span class="italic"><code class="codeph">time-stamp</code></span> <code class="codeph">_merge1.p12</code> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p>要将自动登录密钥库合并到基于密码的密钥库中，请使用<code class="codeph">ADMINISTER KEY MANAGEMENT MERGE KEYSTORE</code> SQL语句。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DF77BD8F-83FC-4F0F-8B2D-2E51D753A6F1" title="您可以通过各种方式合并软件密钥库。">合并软件密钥库</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-3BD2DD80-4DB5-4EA7-AFA2-D48D02839BED" name="GUID-3BD2DD80-4DB5-4EA7-AFA2-D48D02839BED"></a><h4 id="ASOAG-GUID-3BD2DD80-4DB5-4EA7-AFA2-D48D02839BED" class="sect4">将TDE主加密密钥移动到新密钥库中</h4>
                  <div>
                     <p>您可以将现有TDE主加密密钥从现有软件密码密钥库移动到新密钥库中。</p>
                     <div class="section">此功能使您可以删除未使用的密钥库：将加密密钥移动到新密钥库后，可以删除旧密钥库。</div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以已被授予<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限的用户身份登录数据库实例。</span><div>例如：<pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm输入密码： <span class="italic">password</span>已连接。
</pre></div>
                        </li>
                        <li class="stepexpand"><span>查询<code class="codeph">V$ENCRYPTION_KEYS</code>视图的<code class="codeph">KEY_ID</code>列以查找要将键移动到的密钥库的密钥标识符。</span><div>例如：<pre class="oac_no_warn" dir="ltr">SELECT KEY_ID FROM V $ ENCRYPTION_KEYS; KEY_ID ------------------------------------------------- --- ARaHD762tUkkvyLgPzAi6hMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用以下语法将密钥移动到新的密钥库中：</span><div><pre class="oac_no_warn" dir="ltr">管理员密钥管理移动[加密]密钥到新<span class="italic">密钥</span> ' <span class="italic">keystore_location1</span> '通过<span class="italic">keystore1_password</span>标识FROM [FORCE] KEYSTORE由<span class="italic">keystore_password</span>标识[WITH IDENTIFIER IN {' <span class="italic">key_identifier</span> '[，' <span class="italic">key_identifier</span> '] ... | （ <span class="italic">子查询</span> ）}] [WITH BACKUP [使用' <span class="italic">backup_identifier</span> ']];</pre><p>在本规范中：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">keystore_location1</span></code>是将存储新密钥库<code class="codeph">.p12</code>文件的<code class="codeph">wallet</code>目录的路径。默认情况下，此目录位于<code class="codeph">$ORACLE_BASE/admin/ <span class="codeinlineitalic">db_unique_name</span> /wallet</code> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">keystore1_password</span></code>是从中移动新密钥库的密钥<code class="codeph"><span class="codeinlineitalic">keystore1_password</span></code>的密码。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">keystore_password</span></code>是密钥从中移动的密钥<code class="codeph"><span class="codeinlineitalic">keystore_password</span></code>的密码。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">key_identifier</span></code>是您查询<code class="codeph">V$ENCRYPTION_KEYS</code>视图的<code class="codeph">KEY_ID</code>列时找到的密钥标识符。将此设置括在单引号（ <code class="codeph">' '</code> ）中。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">subquery</span></code>可用于查找所需的确切密钥标识符。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">backup_identifier</span></code>是备份的可选描述。将<code class="codeph"><span class="codeinlineitalic">backup_identifier</span></code>括在单引号（ <code class="codeph">' '</code> ）中。
                                    </p>
                                 </li>
                              </ul>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理将密钥移动到新的KEYSTORE $ ORACLE_BASE / admin / orcl / wallet IDENTIFIED by <span class="italic">keystore_password</span> FROM FORCE KEYSTORE IDENTIFIED by <span class="italic">keystore_password</span> WITH IDENTIFIER IN（SELECT KEY_ID FROM V $ ENCRYPTION_KEYS WHERE ROWNUM &lt;2）;</pre></div>
                        </li>
                        <li class="stepexpand"><span>要删除旧密钥库，请转到<code class="codeph">wallet</code>目录，然后手动删除包含密钥库的<code class="codeph">.p12</code>文件。</span><div>要查找密钥库的位置，请打开密钥库，然后查询<code class="codeph">V$ENCRYPTION_WALLET</code>视图的<code class="codeph">WRL_PARAMETER</code>列。
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-5CC83A60-8EA4-4984-AD2C-42BC12E5A16F" title="Oracle强烈建议您在将密钥库加密密钥移动到新密钥库之前不要删除密钥库。">删除密钥库的危险</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="您可以在密钥库上执行维护活动，例如更改密码以及备份，合并和移动密钥库。">管理密钥库</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="ASOAG10337"></a><div class="props_rev_3"><a id="GUID-B3BEFCC2-0817-4C55-869D-6D3BEC42F6C4" name="GUID-B3BEFCC2-0817-4C55-869D-6D3BEC42F6C4"></a><h4 id="ASOAG-GUID-B3BEFCC2-0817-4C55-869D-6D3BEC42F6C4" class="sect4">将软件密钥库移动到新位置</h4>
                  <div>
                     <p>更新<code class="codeph">WALLET_ROOT</code>参数后，将软件密钥库移动到新位置。
                     </p>
                     <div class="section">
                        <p>如果您使用的是Oracle Key Vault，则可以配置密钥保管库直接管理主加密密钥的TDE直接连接。在这种情况下，您永远不需要手动将密钥库移动到新位置。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>以已被授予<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限的用户身份登录数据库实例。
                              </p>
                           </li>
                           <li>
                              <p>备份软件密钥库。</p>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理BACKUP密钥库USING 'hr.emp_keystore' FORCE密钥库IDENTIFIED BY <span class="italic">software_keystore_password</span> TO '的/ etc / ORACLE /密钥库/ DB1 /';</pre></li>
                           <li>
                              <p>关闭软件密钥库。</p>
                              <p>可以关闭密钥库的方法示例如下。</p>
                              <p>对于自动登录软件密钥库：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理设置KEYSTORE CLOSE;</pre><p>对于受密码保护的软件密钥库：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理设置KEYSTORE关闭由<span class="italic">software_keystore_password</span>标识;</pre><p>对于密码存储在外部的密钥库：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理设置由外部商店识别的KEYSTORE CLOSE;</pre></li>
                           <li>
                              <p>退出数据库会话。</p>
                              <p>例如，如果您已登录到SQL * Plus：</p><pre class="oac_no_warn" dir="ltr">出口</pre></li>
                           <li>
                              <p>在数据库实例的<code class="codeph">init.ora</code>文件中，更新<code class="codeph">WALLET_ROOT</code>参数以指向要移动密钥库的新位置。
                              </p>
                           </li>
                           <li>
                              <p>使用操作系统移动命令（例如<code class="codeph">mv</code> ）将密钥库及其所有密钥移动到新目录位置。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/asoag&amp;id=OKVAG10564" target="_blank"><span><cite>Oracle Key Vault管理员指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="您可以在密钥库上执行维护活动，例如更改密码以及备份，合并和移动密钥库。">管理密钥库</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-6CB2C353-44C5-46B5-9CDB-2B4D9D0841BC" name="GUID-6CB2C353-44C5-46B5-9CDB-2B4D9D0841BC"></a><h4 id="ASOAG-GUID-6CB2C353-44C5-46B5-9CDB-2B4D9D0841BC" class="sect4">将软件密钥库移出自动存储管理</h4>
                  <div>
                     <p>您可以使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句将软件密钥库移出自动存储管理。
                     </p>
                     <ol>
                        <li class="stepexpand"><span>以已被授予<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限的用户身份登录数据库实例。</span><div>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm输入密码： <span class="italic">password</span>已连接。</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用以下语法在文件系统上初始化目标密钥库：</span><div><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理CREATE KEYSTORE <span class="italic">targetKeystorePath</span> IDENTIFIED BY <span class="italic">targetKeystorePassword</span> ;</pre><p>在本规范中：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">targetKeystorePath</span></code>是文件系统上目标密钥库的目录路径。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">targetKeystorePassword</span></code>是您为密钥库创建的密码。
                                    </p>
                                 </li>
                              </ul>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理创建KEYSTORE'/ etc / ORACLE / KEYSTORE / DB1 /'IDENTIFIED BY“ <span class="italic">targetKeystorePassword</span> ”;</pre></div>
                        </li>
                        <li class="stepexpand"><span>将密钥库从ASM复制到刚刚创建的目标密钥库。</span><div>
                              <p>此步骤要求您将密钥库从ASM合并到文件系统，如下所示：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理MERGE KEYSTORE <span class="italic">srcKeystorePath</span> IDENTIFIED <span class="italic">by srcKeystorePassword</span> INTO EXISTING KEYSTORE <span class="italic">targetKeystorePath</span> IDENTIFIED BY <span class="italic">targetKeystorePassword</span> with BACKUP USING <span class="italic">backupIdentifier</span> ;</pre><p>在本规范中：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">srcKeystorePath</span></code>是源密钥库的目录路径。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">srcKeystorePassword</span></code>是源密钥库密码。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">targetKeystorePath</span></code>是目标密钥库的路径。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">targetKeystorePassword</span></code>是目标密钥库密码。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">backupIdentifier</span></code>是要添加到备份文件名的备份标识符。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <div>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理MERGE KEYSTORE'+ DATAFILE'由“srcPassword”识别“INTO EXISTING KEYSTORE”/ etc / ORACLE / KEYSTORE / DB1 /'IDENTIFIED BY“ <span class="italic">targetKeystorePassword</span> ”WITH BACKUP USING“bkup”;</pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="您可以在密钥库上执行维护活动，例如更改密码以及备份，合并和移动密钥库。">管理密钥库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10323"></a><div class="props_rev_3"><a id="GUID-4335220F-49FF-40BC-9EB0-21442608F436" name="GUID-4335220F-49FF-40BC-9EB0-21442608F436"></a><h4 id="ASOAG-GUID-4335220F-49FF-40BC-9EB0-21442608F436" class="sect4">在软件密码密钥库和硬件密钥库之间迁移</h4>
                  <div>
                     <p>您可以在受密码保护的软件密钥库和硬件密钥库之间进行迁移。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-99267A06-A5B9-4051-A833-4F61F598A1B1">从受密码保护的软件密钥库迁移到硬件密钥库</a><br>您可以从受密码保护的软件密钥库迁移到硬件密钥库。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-01C2DB62-E887-4BD9-AFDB-B8772E52A450">从硬件密钥库迁移到基于密码的软件密钥库</a><br>您可以将硬件密钥库迁移到软件密钥库。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-F87514AE-4D8B-475F-A5D9-85C4737C7D70">迁移后的密钥库顺序</a><br>执行迁移后，密钥库的顺序可以是主存储或辅助存储。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="您可以在密钥库上执行维护活动，例如更改密码以及备份，合并和移动密钥库。">管理密钥库</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10377"></a><div class="props_rev_3"><a id="GUID-99267A06-A5B9-4051-A833-4F61F598A1B1" name="GUID-99267A06-A5B9-4051-A833-4F61F598A1B1"></a><h5 id="ASOAG-GUID-99267A06-A5B9-4051-A833-4F61F598A1B1" class="sect5">从受密码保护的软件密钥库迁移到硬件密钥库</h5>
                     <div>
                        <p>您可以从受密码保护的软件密钥库迁移到硬件密钥库。</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-5698CCCE-43CC-4E8D-9B03-211EE3EFCABF">步骤1：使用硬件密钥库将软件密钥库转换为打开</a><br>某些Oracle工具需要访问旧软件密钥库才能加密或解密使用软件密钥库导出或备份的数据。
                           </li>
                           <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FDA226C3-A9C1-41CC-8FCE-5FE89071D615">步骤2：配置硬件安全模块密钥库类型</a><br>您可以使用<code class="codeph">ALTER SYSTEM</code>语句来配置HSM密钥库类型。
                           </li>
                           <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-64DECC07-1E78-43D9-8431-948ABE44AC85">第3步：执行硬件密钥库迁移</a><br>您可以使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code> SQL语句执行硬件密钥库迁移。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-4335220F-49FF-40BC-9EB0-21442608F436" title="您可以在受密码保护的软件密钥库和硬件密钥库之间进行迁移。">在软件密码密钥库和硬件密钥库之间迁移</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ASOAG10507"></a><div class="props_rev_3"><a id="GUID-5698CCCE-43CC-4E8D-9B03-211EE3EFCABF" name="GUID-5698CCCE-43CC-4E8D-9B03-211EE3EFCABF"></a><h6 id="ASOAG-GUID-5698CCCE-43CC-4E8D-9B03-211EE3EFCABF" class="sect6">步骤1：使用硬件密钥库将软件密钥库转换为打开</h6>
                        <div>
                           <p>某些Oracle工具需要访问旧软件密钥库才能加密或解密使用软件密钥库导出或备份的数据。</p>
                           <div class="section">
                              <p>这些工具的示例是Oracle Data Pump和Oracle Recovery Manager。</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code> SQL语句将软件密钥库转换为使用硬件密钥库打开。
                                    </p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>要将软件密钥库密码设置为硬件密钥库的密码，请使用以下语法：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理ALTER KEYSTORE PASSWORD FORCE KEYSTORE由<span class="italic">software_keystore_password</span>标识SET“ <span class="italic">hardware_keystore_credentials</span> ”WITH BACKUP [使用' <span class="italic">backup_identifier</span> '];</pre><p>在本规范中：</p>
                                          <ul style="list-style-type:disc">
                                             <li>
                                                <p><span class="italic"><code class="codeph">software_keystore_password</code></span>与创建软件密钥库时使用的密码相同。
                                                </p>
                                             </li>
                                             <li>
                                                <p><span class="italic"><code class="codeph">hardware_keystore_credentials</code></span>是新的软件密钥库密码，与硬件密钥库的密码相同。
                                                </p>
                                             </li>
                                             <li>
                                                <p><code class="codeph">WITH BACKUP</code>创建软件密钥库的备份。（可选）您可以使用<code class="codeph">USING</code>子句添加备份的简要说明。将此描述括在单引号（''）中。此标识符附加到指定的密钥库文件（例如， <code class="codeph">ewallet_</code> <span class="italic"><code class="codeph">time-stamp</code></span> <span class="italic"><code class="codeph">_emp_key_backup</code></span> <code class="codeph">.p12</code> ，其中<span class="italic"><code class="codeph">emp_key_backup</code></span>是备份标识符）。遵循操作系统使用的文件命名约定。
                                                </p>
                                             </li>
                                          </ul>
                                       </li>
                                    </ul>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>要为软件密钥库创建自动登录密钥库，请使用以下语法：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理CREATE [LOCAL] AUTO_LOGIN密钥库FROM IDENTIFIED BY <span class="italic">software_keystore_password</span>密钥库<span class="italic">'keystore_location';</span></pre><p>在本规范中：</p>
                                          <ul style="list-style-type:disc">
                                             <li>
                                                <p><code class="codeph">LOCAL</code>使您可以创建本地自动登录软件密钥库。否则，如果您希望其他计算机可以访问密钥库，请省略此子句。
                                                </p>
                                             </li>
                                             <li>
                                                <p><span class="italic"><code class="codeph">keystore_location</code></span>是<code class="codeph">sqlnet.ora</code>文件中配置的密钥库的密钥库目录位置的路径。
                                                </p>
                                             </li>
                                             <li>
                                                <p><span class="italic"><code class="codeph">software_keystore_password</code></span>是已配置的软件密钥库的现有密码。
                                                </p>
                                             </li>
                                          </ul>
                                       </li>
                                    </ul>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-99267A06-A5B9-4051-A833-4F61F598A1B1" title="您可以从受密码保护的软件密钥库迁移到硬件密钥库。">从受密码保护的软件密钥库迁移到硬件密钥库</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ASOAG10325"></a><a id="ASOAG10378"></a><div class="props_rev_3"><a id="GUID-FDA226C3-A9C1-41CC-8FCE-5FE89071D615" name="GUID-FDA226C3-A9C1-41CC-8FCE-5FE89071D615"></a><h6 id="ASOAG-GUID-FDA226C3-A9C1-41CC-8FCE-5FE89071D615" class="sect6">步骤2：配置硬件安全模块密钥库类型</h6>
                        <div>
                           <p>您可以使用<code class="codeph">ALTER SYSTEM</code>语句来配置HSM密钥库类型。
                           </p>
                           <div class="section">要使用硬件密钥库打开软件密钥库，软件密钥库必须具有与硬件密钥库相同的密码，或者，您可以为软件密钥库创建自动登录密钥库。</div>
                           <!-- class="section" -->
                           <ol>
                              <li class="stepexpand"><span>以已被授予<code class="codeph">SYSDBA</code>管理权限的用户身份登录数据库实例。</span><div>例如：<pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as sysdba输入密码： <span class="italic">password</span></pre></div>
                              </li>
                              <li class="stepexpand"><span>设置<code class="codeph">TDE_CONFIGURATION</code>动态初始化参数。</span><div>
                                    <p>以下示例从TDE密钥库迁移到硬件密钥库：</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION =“KEYSTORE_CONFIGURATION = FILE | HSM”;</pre><p>下一个示例从TDE密钥库迁移到Oracle Key Vault密钥库：</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION =“KEYSTORE_CONFIGURATION = FILE | OKV”;</pre></div>
                              </li>
                              <li class="stepexpand"><span>重启数据库。</span><div><pre class="oac_no_warn" dir="ltr">关机立即启动</pre></div>
                              </li>
                           </ol>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-99267A06-A5B9-4051-A833-4F61F598A1B1" title="您可以从受密码保护的软件密钥库迁移到硬件密钥库。">从受密码保护的软件密钥库迁移到硬件密钥库</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ASOAG10379"></a><div class="props_rev_3"><a id="GUID-64DECC07-1E78-43D9-8431-948ABE44AC85" name="GUID-64DECC07-1E78-43D9-8431-948ABE44AC85"></a><h6 id="ASOAG-GUID-64DECC07-1E78-43D9-8431-948ABE44AC85" class="sect6">第3步：执行硬件密钥库迁移</h6>
                        <div>
                           <p>您可以使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code> SQL语句执行硬件密钥库迁移。
                           </p>
                           <div class="section">
                              <p>要从软件密钥库迁移到硬件密钥库，必须使用<code class="codeph">ADMINISTER KEY MANAGEMENT SET KEY</code> SQL语句中的<code class="codeph">MIGRATE USING</code> <span class="italic"><code class="codeph">keystore_password</code></span>子句， <code class="codeph">MIGRATE USING</code>软件中的TDE主加密密钥解密现有<a href="glossary.html#GUID-78CFC3BC-9BDD-406E-A6E2-2374AC636269"><span class="xrefglossterm">TDE表密钥</span></a>和<a href="glossary.html#GUID-5101B9BB-386F-4826-B639-2BE246A66E90"><span class="xrefglossterm">表空间加密密钥</span></a> 。密钥库，然后使用硬件密钥库中新创建的TDE主加密密钥重新加密它们。
                              </p>
                              <p>完成迁移后，您无需重新启动数据库，也无需手动重新打开硬件密钥库。迁移过程会自动在内存中重新加载密钥库密钥。</p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>使用以下语法迁移硬件密钥库：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理集由“ <span class="italic">user_name</span> ： <span class="italic">password</span> ”标识的加密密钥MIGRATE使用<span class="italic">software_keystore_password</span> [WITH BACKUP [使用' <span class="italic">backup_identifier</span> ']];</pre><p>在本规范中：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><span class="italic"><code class="codeph">user_name</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">password</code></span>是在<a href="configuring-transparent-data-encryption.html#GUID-7838C4B8-FF6A-4B81-86C1-8583D3555291" title="要配置第三方硬件安全模块，必须将PKCS＃11库复制到正确的位置，并按照供应商的说明进行操作。">步骤2：配置硬件安全模块</a> （在<a href="configuring-transparent-data-encryption.html#GUID-C5D20EAE-3369-411F-9A7E-13AB14139F1D" title="您可以配置软件或硬件密钥库，以用于单个表列或整个表空间。">配置透明数据加密中</a> ）中的步骤<a href="configuring-transparent-data-encryption.html#GUID-7838C4B8-FF6A-4B81-86C1-8583D3555291__CIHHFABB">2</a>中创建的用户标识和密码。括在双引号（此设置<code class="codeph">" "</code> ）和独立的<span class="italic"><code class="codeph">user_name</code></span>和<span class="italic"><code class="codeph">password</code></span>以冒号（ <code class="codeph">:</code> ）。
                                          </p>
                                       </li>
                                       <li>
                                          <p><span class="italic"><code class="codeph">software_keystore_password</code></span>与您在创建软件密钥库时使用的密码相同，或者您在<a href="managing-keystore-and-tde-master-encryption-key.html#GUID-5698CCCE-43CC-4E8D-9B03-211EE3EFCABF" title="Some Oracle tools require access to the old software keystore to encrypt or decrypt data that was exported or backed up using the software keystore.">步骤1</a>中将密码更改为<a href="managing-keystore-and-tde-master-encryption-key.html#GUID-5698CCCE-43CC-4E8D-9B03-211EE3EFCABF" title="某些Oracle工具需要访问旧软件密钥库才能加密或解密使用软件密钥库导出或备份的数据。">：使用硬件密钥库将软件密钥库转换为打开</a> 。
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">USING</code>可以添加备份的简要说明。将此描述括在单引号（ <code class="codeph">' '</code> ）中。此标识符附加到指定的密钥库文件（例如， <code class="codeph">ewallet_</code> <span class="italic"><code class="codeph">time-stamp</code></span> <code class="codeph">_</code> <span class="italic"><code class="codeph">emp_key_backup</code></span> <code class="codeph">.p12</code> ，其中<span class="italic"><code class="codeph">emp_key_backup</code></span>是备份标识符）。遵循操作系统使用的文件命名约定。
                                          </p>
                                       </li>
                                    </ul>
                                 </li>
                              </ul>
                              <div class="infoboxnote" id="GUID-64DECC07-1E78-43D9-8431-948ABE44AC85__GUID-8D7EF3D3-3CFF-4484-AC63-553C2DB203C7">
                                 <p class="notep1">注意：</p>
                                 <p>如果数据库包含使用公钥加密的列，则使用基于HSM的透明数据加密生成的AES对称密钥对列进行解密和重新加密。</p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-99267A06-A5B9-4051-A833-4F61F598A1B1" title="您可以从受密码保护的软件密钥库迁移到硬件密钥库。">从受密码保护的软件密钥库迁移到硬件密钥库</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="ASOAG10327"></a><div class="props_rev_3"><a id="GUID-01C2DB62-E887-4BD9-AFDB-B8772E52A450" name="GUID-01C2DB62-E887-4BD9-AFDB-B8772E52A450"></a><h5 id="ASOAG-GUID-01C2DB62-E887-4BD9-AFDB-B8772E52A450" class="sect5">从硬件密钥库迁移到基于密码的软件密钥库</h5>
                     <div>
                        <p>您可以将硬件密钥库迁移到软件密钥库。</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0C8C054A-0F63-4BD1-9B4C-C2581029B463">关于从硬件密钥库迁移</a><br>要从使用硬件密钥库解决方案切换到软件密钥库，您可以使用密钥库的反向迁移。
                           </li>
                           <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DF8887D9-DE13-4C32-AE87-4125055AE4F9">步骤1：配置硬件安全模块密钥库类型</a><br>您可以使用<code class="codeph">ALTER SYSTEM</code>语句配置硬件安全模块密钥库类型。
                           </li>
                           <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-77A58031-0DC5-4EFF-A35F-CF15B489EA59">步骤2：为反向迁移配置密钥库</a><br>具有<code class="codeph">SET ENCRYPTION KEY</code>和<code class="codeph">REVERSE MIGRATE</code>子句的<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句可用于反转密钥库的迁移。
                           </li>
                           <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-254D94A4-E185-4ADA-8003-32DD04957031">步骤3：使用Software Keystore配置要打开的硬件密钥库</a><br>完成迁移后，迁移过程会自动在内存中重新加载密钥库密钥。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-4335220F-49FF-40BC-9EB0-21442608F436" title="您可以在受密码保护的软件密钥库和硬件密钥库之间进行迁移。">在软件密码密钥库和硬件密钥库之间迁移</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ASOAG10380"></a><div class="props_rev_3"><a id="GUID-0C8C054A-0F63-4BD1-9B4C-C2581029B463" name="GUID-0C8C054A-0F63-4BD1-9B4C-C2581029B463"></a><h6 id="ASOAG-GUID-0C8C054A-0F63-4BD1-9B4C-C2581029B463" class="sect6">关于从硬件密钥库迁移</h6>
                        <div>
                           <p>要从使用硬件密钥库解决方案切换到软件密钥库，您可以使用密钥库的反向迁移。</p>
                           <p>完成交换机后，请保留硬件安全模块，以防早期备份文件依赖硬件安全模块中的TDE主加密密钥。</p>
                           <p>如果您最初从软件密钥库迁移到硬件安全模块并按照<a href="configuring-transparent-data-encryption.html#GUID-5CDB2D10-81DE-4C98-9F9C-155C45E31CDB" title="如果先前已配置软件密钥库，则必须迁移先前配置的TDE主加密密钥。">以前配置的TDE主加密密钥的迁移中</a>所述重新配置了软件密钥库，那么您已经拥有一个密码与HSM密码相同的现有密钥库。反向迁移将此密钥库配置为使用新密码作为新软件密钥库。如果现有密钥库是自动登录软件密钥库，并且您具有此自动登录密钥库的基于密码的软件密钥库，则使用基于密码的密钥库。如果基于密码的密钥库不可用，则将自动登录密钥库合并到新创建的基于空密码的密钥库中，并使用新创建的基于密码的密钥库。
                           </p>
                           <p>如果您没有现有密钥库，则必须使用<code class="codeph">init.ora</code>文件中的<code class="codeph">WALLET_ROOT</code>参数指定密钥库位置。执行反向迁移时，请迁移到以前的密钥库，以免丢失密钥。
                           </p>
                        </div>
                        <div>
                           <div class="relinfo">
                              <p><strong>相关话题</strong></p>
                              <ul>
                                 <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DF77BD8F-83FC-4F0F-8B2D-2E51D753A6F1" title="您可以通过各种方式合并软件密钥库。">合并软件密钥库</a></li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-01C2DB62-E887-4BD9-AFDB-B8772E52A450" title="您可以将硬件密钥库迁移到软件密钥库。">从硬件密钥库迁移到基于密码的软件密钥库</a></p>
                              </div>
                           </div>
                        </div>
                     </div><a id="ASOAG10381"></a><div class="props_rev_3"><a id="GUID-DF8887D9-DE13-4C32-AE87-4125055AE4F9" name="GUID-DF8887D9-DE13-4C32-AE87-4125055AE4F9"></a><h6 id="ASOAG-GUID-DF8887D9-DE13-4C32-AE87-4125055AE4F9" class="sect6">步骤1：配置硬件安全模块密钥库类型</h6>
                        <div>
                           <p>您可以使用<code class="codeph">ALTER SYSTEM</code>语句配置硬件安全模块密钥库类型。
                           </p>
                           <ol>
                              <li class="stepexpand"><span>以已被授予<code class="codeph">SYSDBA</code>管理权限的用户身份登录数据库实例。</span><div>例如：<pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as sysdba输入密码： <span class="italic">password</span></pre></div>
                              </li>
                              <li class="stepexpand"><span>设置<code class="codeph">TDE_CONFIGURATION</code>动态初始化参数以指定TDE密钥库类型。</span><div>例如：<pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION =“KEYSTORE_CONFIGURATION = HSM”;</pre></div>
                              </li>
                              <li class="stepexpand"><span>重启数据库。</span><div><pre class="oac_no_warn" dir="ltr">关机立即启动</pre></div>
                              </li>
                           </ol>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-01C2DB62-E887-4BD9-AFDB-B8772E52A450" title="您可以将硬件密钥库迁移到软件密钥库。">从硬件密钥库迁移到基于密码的软件密钥库</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ASOAG10382"></a><div class="props_rev_3"><a id="GUID-77A58031-0DC5-4EFF-A35F-CF15B489EA59" name="GUID-77A58031-0DC5-4EFF-A35F-CF15B489EA59"></a><h6 id="ASOAG-GUID-77A58031-0DC5-4EFF-A35F-CF15B489EA59" class="sect6">步骤2：为反向迁移配置密钥库</h6>
                        <div>
                           <p>具有<code class="codeph">SET ENCRYPTION KEY</code>和<code class="codeph">REVERSE MIGRATE</code>子句的<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句可用于反转密钥库的迁移。
                           </p>
                           <div class="section">
                              <ol>
                                 <li>
                                    <p>以已被授予<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限的用户身份登录数据库实例。
                                    </p>
                                    <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm输入密码： <span class="italic">password</span>已连接。
</pre></li>
                                 <li>
                                    <p>使用以下语法反向迁移密钥库：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理集由<span class="italic">software_keystore_password</span>标识的加密密钥REVERSE MIGRATE使用“ <span class="italic">user_name</span> ： <span class="italic">password</span> ”[WITH BACKUP [使用' <span class="italic">backup_identifier</span> ']];</pre><p>在本规范中：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><span class="italic"><code class="codeph">software_keystore_password</code></span>是现有密钥库或新密钥库的密码。
                                          </p>
                                       </li>
                                       <li>
                                          <p><span class="italic"><code class="codeph">user_name</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">password</code></span>是在<a href="configuring-transparent-data-encryption.html#GUID-7838C4B8-FF6A-4B81-86C1-8583D3555291" title="要配置第三方硬件安全模块，必须将PKCS＃11库复制到正确的位置，并按照供应商的说明进行操作。">步骤2：配置硬件安全模块</a> （在<a href="configuring-transparent-data-encryption.html#GUID-C5D20EAE-3369-411F-9A7E-13AB14139F1D" title="您可以配置软件或硬件密钥库，以用于单个表列或整个表空间。">配置透明数据加密中</a> ）的步骤<a href="configuring-transparent-data-encryption.html#GUID-7838C4B8-FF6A-4B81-86C1-8583D3555291__CIHHFABB">2</a>中创建的用户标识和密码。如果预硬件安全模块软件密钥库是新密钥库，则必须确保它在发出反向迁移命令之前具有与<span class="italic"><code class="codeph">user_name</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">password</code></span>相同的密码。用双引号（ <code class="codeph">" "</code> ）括起此设置。
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">WITH BACKUP</code>创建软件密钥库的备份。（可选）您可以包含<code class="codeph">USING</code>子句以添加备份的简要说明。将此描述括在单引号（ <code class="codeph">' '</code> ）中。此标识符附加到指定的密钥库文件（例如， <code class="codeph">ewallet_</code> <span class="italic"><code class="codeph">time-stamp</code></span> <code class="codeph">_</code> <span class="italic"><code class="codeph">emp_key_backup</code></span> <code class="codeph">.p12</code> ，其中<span class="italic"><code class="codeph">emp_key_backup</code></span>是备份标识符）。遵循操作系统使用的文件命名约定。
                                          </p>
                                       </li>
                                    </ul>
                                    <p>例如：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理设置<span class="italic">密码</span> REVERSE MIGRATE使用“psmith： <span class="italic">password</span> ”WITH BACKUP识别的密钥;密钥库已更改。
</pre></li>
                                 <li>
                                    <p>（可选）更改密钥库密码。</p>
                                    <p>例如：</p><pre class="oac_no_warn" dir="ltr">通过<span class="italic">old_password</span>标识的ADMINISTER密钥管理ALTER KEYSTORE PASSWORD使用'pwd_change'设置<span class="italic">new_password</span> WITH BACKUP</pre></li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="relinfo">
                              <p><strong>相关话题</strong></p>
                              <ul>
                                 <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-56595198-9FD2-4857-9BB9-D908BA89904C" title="Oracle数据库使您可以轻松更改受密码保护的软件密钥库密码。">更改软件密钥库的密码</a></li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-01C2DB62-E887-4BD9-AFDB-B8772E52A450" title="您可以将硬件密钥库迁移到软件密钥库。">从硬件密钥库迁移到基于密码的软件密钥库</a></p>
                              </div>
                           </div>
                        </div>
                     </div><a id="ASOAG10508"></a><div class="props_rev_3"><a id="GUID-254D94A4-E185-4ADA-8003-32DD04957031" name="GUID-254D94A4-E185-4ADA-8003-32DD04957031"></a><h6 id="ASOAG-GUID-254D94A4-E185-4ADA-8003-32DD04957031" class="sect6">步骤3：使用Software Keystore配置要打开的硬件密钥库</h6>
                        <div>
                           <p>完成迁移后，迁移过程会自动在内存中重新加载密钥库密钥。</p>
                           <p>您无需重新启动数据库，也无需手动重新打开软件密钥库。</p>
                           <p>反向迁移后仍可能需要硬件密钥库，因为旧密钥可能已用于加密备份或Oracle Data Pump和Oracle Recovery Manager等工具。您应该将硬件密钥库凭据缓存在密钥库中，以便可以使用软件密钥库打开HSM。</p>
                        </div>
                        <div>
                           <div class="relinfo">
                              <p><strong>相关话题</strong></p>
                              <ul>
                                 <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-1BD98DB6-696B-4653-A8AC-B24EDE3BAE0D" title="可以将硬件安全模块配置为使用自动登录功能。">配置自动登录硬件安全模块</a></li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-01C2DB62-E887-4BD9-AFDB-B8772E52A450" title="您可以将硬件密钥库迁移到软件密钥库。">从硬件密钥库迁移到基于密码的软件密钥库</a></p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10477"></a><a id="ASOAG10476"></a><div class="props_rev_3"><a id="GUID-F87514AE-4D8B-475F-A5D9-85C4737C7D70" name="GUID-F87514AE-4D8B-475F-A5D9-85C4737C7D70"></a><h5 id="ASOAG-GUID-F87514AE-4D8B-475F-A5D9-85C4737C7D70" class="sect5">迁移后的密钥库顺序</h5>
                     <div>
                        <p>执行迁移后，密钥库的顺序可以是主存储或辅助存储。</p>
                        <p><code class="codeph">V$ENCRYPTION_WALLET</code>动态视图的<code class="codeph">WALLET_ORDER</code>列描述密钥库是主要的（即，它保存当前的TDE主加密密钥）还是次要的（它包含先前的TDE主加密密钥）。<code class="codeph">WRL_TYPE</code>列描述密钥库的定位符类型（例如， <code class="codeph">sqlnet.ora</code>文件的<code class="codeph">FILE</code> ）。如果未将两个密钥库一起配置且以前未执行任何迁移，则<code class="codeph">WALLET_ORDER</code>列将显示<code class="codeph">SINGLE</code> 。
                        </p>
                        <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-F87514AE-4D8B-475F-A5D9-85C4737C7D70__CIHGJDFE" title="迁移后的密钥库顺序">表4-1</a>说明了执行迁移后密钥库顺序的工作原理。
                        </p>
                        <div class="tblformalwide" id="GUID-F87514AE-4D8B-475F-A5D9-85C4737C7D70__CIHGJDFE">
                           <p class="titleintable">表4-1迁移后的密钥库顺序</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="迁移后的密钥库顺序" width="100%" border="1" summary="Keystore Order After Migration" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="23%" id="d17214e4769">完成的迁移类型</th>
                                    <th align="left" valign="bottom" width="15%" id="d17214e4772">WRL_TYPE</th>
                                    <th align="left" valign="bottom" width="22%" id="d17214e4775">WALLET_ORDER</th>
                                    <th align="left" valign="bottom" width="41%" id="d17214e4778">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d17214e4783" headers="d17214e4769 ">
                                       <p>将软件密钥库迁移到HSM</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d17214e4783 d17214e4772 ">
                                       <p><code class="codeph">HSM</code></p>
                                       <p><code class="codeph">文件</code></p>
                                    </td>
                                    <td align="left" valign="top" width="22%" headers="d17214e4783 d17214e4775 ">
                                       <p><code class="codeph">主</code></p>
                                       <p><code class="codeph">二级</code></p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d17214e4783 d17214e4778 ">
                                       <p>HSM和软件密钥库都已配置。TDE主加密密钥可以在HSM中，也可以在软件密钥库中。</p>
                                       <p>首先在HSM中搜索TDE主加密密钥。</p>
                                       <p>如果TDE主加密密钥不在主密钥库（HSM）中，则将在软件密钥库中搜索它。</p>
                                       <p>所有新的TDE主加密密钥都将在主密钥库（在本例中为HSM）中创建。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d17214e4810" headers="d17214e4769 ">
                                       <p>将HSM反向迁移到软件密钥库</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d17214e4810 d17214e4772 ">
                                       <p><code class="codeph">文件</code></p>
                                       <p><code class="codeph">HSM</code></p>
                                    </td>
                                    <td align="left" valign="top" width="22%" headers="d17214e4810 d17214e4775 ">
                                       <p><code class="codeph">主</code></p>
                                       <p><code class="codeph">二级</code></p>
                                    </td>
                                    <td align="left" valign="top" width="41%" headers="d17214e4810 d17214e4778 ">
                                       <p>HSM和软件密钥库都已配置。TDE主加密密钥可以在HSM中，也可以在软件密钥库中。</p>
                                       <p>首先在软件密钥库中搜索TDE主加密密钥。</p>
                                       <p>如果主要（即软件）密钥库中不存在TDE主加密密钥，则将在HSM中搜索它。</p>
                                       <p>所有新的TDE主加密密钥都将在主密钥库（在本例中为软件密钥库）中创建。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-4335220F-49FF-40BC-9EB0-21442608F436" title="您可以在受密码保护的软件密钥库和硬件密钥库之间进行迁移。">在软件密码密钥库和硬件密钥库之间迁移</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG10607"></a><div class="props_rev_3"><a id="GUID-83DE1475-04DD-4B85-9CFA-D00AB0013EC8" name="GUID-83DE1475-04DD-4B85-9CFA-D00AB0013EC8"></a><h4 id="ASOAG-GUID-83DE1475-04DD-4B85-9CFA-D00AB0013EC8" class="sect4">从Key Key Vault迁移密钥库</h4>
                  <div>
                     <p>您可以使用Oracle Key Vault将软件和硬件密钥库迁移到Oracle Key Vault或从Oracle Key Vault迁移。</p>
                     <p>这使您可以集中管理密钥库，然后根据需要与企业中其他启用TDE的数据库共享密钥库。</p>
                     <p>通过Oracle Key Vault，您可以将密钥库上载到称为虚拟钱包的容器中，然后根据以前上载的Oracle密钥库的内容创建新的虚拟钱包。例如，假设您之前上载了包含5个密钥的密钥库。您可以创建一个仅包含其中3个密钥的新虚拟钱包。然后，您可以将此密钥库下载到另一个启用TDE的数据库。此过程不会修改原始密钥库。</p>
                     <p>除了Oracle密钥库之外，Oracle Key Vault还使您能够在整个企业中安全地共享其他安全对象，例如凭证文件和Java密钥库。它可以防止由于忘记密码或意外删除密钥库而丢失密钥和密钥库。您可以将Oracle Key Vault与TDE以外的产品一起使用：Oracle Real Application Security，Oracle Active Data Guard和Oracle GoldenGate。Oracle Key Vault使用Oracle Data Pump和Oracle可传输表空间来促进加密数据的移动。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/asoag&amp;id=OKVAG10693" target="_blank"><span><cite>Oracle Key Vault管理员指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="您可以在密钥库上执行维护活动，例如更改密码以及备份，合并和移动密钥库。">管理密钥库</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-952ABBF4-D92C-4DB9-A1AB-5B2E25582956" name="GUID-952ABBF4-D92C-4DB9-A1AB-5B2E25582956"></a><h4 id="ASOAG-GUID-952ABBF4-D92C-4DB9-A1AB-5B2E25582956" class="sect4">配置自动存储管理的密钥库</h4>
                  <div>
                     <p>您可以在自动存储管理（ASM）磁盘组上存储软件密钥库。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-4F449052-4C60-4C26-B2E7-87F5BB0463EE">关于配置自动存储管理的密钥库</a><br>您可以为独立数据库或多租户环境配置自动存储管理（ASM）的密钥库。<code class="codeph">WALLET_ROOT</code>位置可以与Oracle Managed File（OMF）系统兼容或不兼容。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-8AA69CCF-B4A1-4F41-8A04-591F81639BC7">在独立数据库上配置密钥库以指向ASM位置</a><br>在独立数据库系统上，您可以将<code class="codeph">WALLET_ROOT</code>参数设置为指向ASM位置。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-E2C06ABF-A765-4C27-90F5-AAD73EF6DA6B">在多租户环境中配置密钥库以指向ASM位置</a><br>您可以将<code class="codeph">WALLET_ROOT</code>设置为指向一个ASM目录，其中CDB根目录的TDE密钥库（所有联合模式PDB共享）和所有隔离模式PDB的TDE密钥库都位于该ASM目录中。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-57D52CE4-8E14-45C8-8FD4-FAC5438D1B8C">当WALLET_ROOT位置不遵循OMF指南时，将密钥库配置为指向ASM位置</a><br>如果所选的<code class="codeph">WALLET_ROOT</code>位置不符合Oracle托管文件（OMF）准则，则Oracle数据库无法执行目录创建的自动化。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="您可以在密钥库上执行维护活动，例如更改密码以及备份，合并和移动密钥库。">管理密钥库</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-4F449052-4C60-4C26-B2E7-87F5BB0463EE" name="GUID-4F449052-4C60-4C26-B2E7-87F5BB0463EE"></a><h5 id="ASOAG-GUID-4F449052-4C60-4C26-B2E7-87F5BB0463EE" class="sect5">关于配置自动存储管理的密钥库</h5>
                     <div>
                        <p>您可以为独立数据库或多租户环境配置自动存储管理（ASM）的密钥库。<code class="codeph">WALLET_ROOT</code>位置可以与Oracle Managed File（OMF）系统兼容或不兼容。
                        </p>
                        <p>您应该使用<code class="codeph">WALLET_ROOT</code>和<code class="codeph">TDE_CONFIGURATION</code>初始化参数来配置ASM系统中的密钥库位置。所述<code class="codeph">TDE_CONFIGURATION</code>参数必须与属性被设置<code class="codeph">KEYSTORE_CONFIGURATION=FILE</code>为了使<code class="codeph">WALLET_ROOT</code>参数工作。请注意，从Oracle Database版本19c开始，不推荐使用<code class="codeph">sqlnet.ora</code>文件中设置的<code class="codeph">ENCRYPTION_WALLET_LOCATION</code> ，而使用<code class="codeph">WALLET_ROOT</code>和<code class="codeph">TDE_CONFIGURATION</code> 。</p>
                        <p>要执行配置，必须指定一个<code class="codeph">+</code>号，然后指定ASM磁盘组和密钥库所在的路径。例如：</p><pre class="oac_no_warn" dir="ltr">WALLET_ROOT = + <span class="italic">disk_group</span> / <span class="italic">path</span></pre><p>请注意以下事项：</p>
                        <ul id="GUID-4F449052-4C60-4C26-B2E7-87F5BB0463EE__UL_HGT_KT1_ZFB" style="list-style-type:disc">
                           <li>在独立或多租户环境或<code class="codeph">WALLET_ROOT</code>位置符合或不符合Oracle托管文件（OMF）目录命名约定的环境中为数据库指定<code class="codeph">WALLET_ROOT</code>的路径时，请注意此路径必须遵循某些约定，数据库可以为您自动创建TDE密钥库位置的目录组件。否则，您必须在<code class="codeph">WALLET_ROOT</code>位置下手动创建目录。
                           </li>
                           <li>如果必须在常规文件系统和ASM文件系统之间移动或合并软件密钥库，则可以使用用于合并软件密钥库的相同密钥库合并语句。</li>
                           <li>要执行命令以管理ASM环境中的密钥库，可以使用<code class="codeph">ASMCMD</code>实用程序。
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DF77BD8F-83FC-4F0F-8B2D-2E51D753A6F1" title="您可以通过各种方式合并软件密钥库。">合并软件密钥库</a></li>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-82EAFC96-5B0E-4BA6-B748-14385D04E002" title="您必须通过在数据库实例中的init.ora和TDE_CONFIGURATION中设置WALLET_ROOT来配置密钥库位置和类型。">步骤1：配置软件密钥库位置和类型</a></li>
                              <li><a href="../ostmg/manage-asm-asmcmd.html#OSTMG016" target="_blank"><span><cite>Oracle自动存储管理管理员指南</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-952ABBF4-D92C-4DB9-A1AB-5B2E25582956" title="您可以在自动存储管理（ASM）磁盘组上存储软件密钥库。">配置自动存储管理的密钥库</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-8AA69CCF-B4A1-4F41-8A04-591F81639BC7" name="GUID-8AA69CCF-B4A1-4F41-8A04-591F81639BC7"></a><h5 id="ASOAG-GUID-8AA69CCF-B4A1-4F41-8A04-591F81639BC7" class="sect5">在独立数据库上配置密钥库以指向ASM位置</h5>
                     <div>
                        <p>在独立数据库系统上，您可以将<code class="codeph">WALLET_ROOT</code>参数设置为指向ASM位置。
                        </p>
                        <ol>
                           <li class="stepexpand"><span>确保<code class="codeph">TDE_CONFIGURATION</code>动态初始化参数的<code class="codeph">KEYSTORE_CONFIGURATION</code>属性设置为<code class="codeph">FILE</code> 。</span><div>例如，在SQL * Plus中：<pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION =“KEYSTORE_CONFIGURATION = FILE”;</pre></div>
                           </li>
                           <li class="stepexpand"><span>在<code class="codeph">init.ora</code>文件中，将<code class="codeph">WALLET_ROOT</code>静态初始化参数设置为ASM磁盘组位置。</span><div>（可选）包括<code class="codeph">OMF</code> （大写），以提供Oracle托管文件（OMF）合规性并促进目录创建的自动化。
                              </div>
                              <div>例如：<pre class="oac_no_warn" dir="ltr">WALLET_ROOT = + <span class="italic">disk_group_name</span> / OMF</pre></div>
                              <div>该设置场所独立数据库系统的密钥库TDE在<code class="codeph"><span class="codeinlineitalic">WALLET_ROOT</span> /tde</code>目录（即， <code class="codeph">+ <span class="codeinlineitalic">disk_group_name</span> /OMF/tde</code>与<code class="codeph">tde</code>路径的部件被自动地由数据库服务器创建）。
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-952ABBF4-D92C-4DB9-A1AB-5B2E25582956" title="您可以在自动存储管理（ASM）磁盘组上存储软件密钥库。">配置自动存储管理的密钥库</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-E2C06ABF-A765-4C27-90F5-AAD73EF6DA6B" name="GUID-E2C06ABF-A765-4C27-90F5-AAD73EF6DA6B"></a><h5 id="ASOAG-GUID-E2C06ABF-A765-4C27-90F5-AAD73EF6DA6B" class="sect5">在多租户环境中配置密钥库以指向ASM位置</h5>
                     <div>
                        <p>您可以将<code class="codeph">WALLET_ROOT</code>设置为指向一个ASM目录，其中CDB根目录的TDE密钥库（所有联合模式PDB共享）和所有隔离模式PDB的TDE密钥库都位于该ASM目录中。
                        </p>
                        <ol>
                           <li class="stepexpand"><span>确保<code class="codeph">TDE_CONFIGURATION</code>动态初始化参数的<code class="codeph">KEYSTORE_CONFIGURATION</code>属性设置为<code class="codeph">FILE</code> 。</span><div>对于CDB，在CDB根目录中设置<code class="codeph">TDE_CONFIGURATION</code> ;对于PDB，将其设置在PDB中。</div>
                              <div>例如，在SQL * Plus中：<pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION =“KEYSTORE_CONFIGURATION = FILE”;</pre></div>
                           </li>
                           <li class="stepexpand"><span>将<code class="codeph">WALLET_ROOT</code>静态初始化参数设置为ASM磁盘组位置，然后是<code class="codeph">DB_UNIQUE_NAME</code>初始化参数值。</span><div>必须包含<code class="codeph">DB_UNIQUE_NAME</code>的值才能允许数据库服务器在此位置下自动创建必要的目录。
                              </div>
                              <div>您不能将<code class="codeph">OMF</code>用作<code class="codeph">WALLET_ROOT</code>位置的目录组件（与独立数据库配置部分不同）。
                              </div>
                              <div>例如：<pre class="oac_no_warn" dir="ltr">WALLET_ROOT = + <span class="italic">disk_group_name</span> / <span class="italic">db_unique_name</span></pre><p>此设置将查找根目录和<code class="codeph"><span class="codeinlineitalic">WALLET_ROOT</span> / <span class="codeinlineitalic">db_unique_name</span> /tde</code>目录中所有联合模式PDB（即<code class="codeph">+ <span class="codeinlineitalic">disk_group_name</span> / <span class="codeinlineitalic">db_unique_name</span> /tde</code> ）使用的TDE钱包。
                                 </p>
                                 <p>此设置定位每个隔离模式PDB在<code class="codeph"><span class="codeinlineitalic">WALLET_ROOT</span> / <span class="codeinlineitalic">db_unique_name</span> / <span class="codeinlineitalic">PDB_GUID</span> /tde</code>目录中使用的TDE钱包（即，在<code class="codeph">+ <span class="codeinlineitalic">disk_group_name</span> / <span class="codeinlineitalic">db_unique_name</span> / <span class="codeinlineitalic">PDB_GUID</span> /tde</code> ）。
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-952ABBF4-D92C-4DB9-A1AB-5B2E25582956" title="您可以在自动存储管理（ASM）磁盘组上存储软件密钥库。">配置自动存储管理的密钥库</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-57D52CE4-8E14-45C8-8FD4-FAC5438D1B8C" name="GUID-57D52CE4-8E14-45C8-8FD4-FAC5438D1B8C"></a><h5 id="ASOAG-GUID-57D52CE4-8E14-45C8-8FD4-FAC5438D1B8C" class="sect5">当WALLET_ROOT位置不遵循OMF指南时，将密钥库配置为指向ASM位置</h5>
                     <div>
                        <p>如果所选的<code class="codeph">WALLET_ROOT</code>位置不符合Oracle托管文件（OMF）准则，则Oracle数据库无法执行目录创建的自动化。
                        </p>
                        <div class="section">在这种情况下，必须使用<code class="codeph">ALTER DISKGROUP</code>命令在<code class="codeph">WALLET_ROOT</code>位置下手动创建必要的目录。你必须使用<code class="codeph">ALTER DISKGROUP</code> ......<code class="codeph">ADD DIRECTORY</code>语句以手动创建必要的目录，因为当<code class="codeph">WALLET_ROOT</code>参数未使用符合OMF的值时，无法自动创建目录。
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>确保<code class="codeph">TDE_CONFIGURATION</code>动态初始化参数的<code class="codeph">KEYSTORE_CONFIGURATION</code>属性设置为<code class="codeph">FILE</code> 。</span><div>例如，在SQL * Plus中：<pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION =“KEYSTORE_CONFIGURATION = FILE”;</pre></div>
                           </li>
                           <li class="stepexpand"><span>在<code class="codeph">init.ora</code>文件中，将<code class="codeph">WALLET_ROOT</code>静态初始化参数设置为ASM磁盘组位置。</span><div>例如， <code class="codeph"><span class="codeinlineitalic">disk_group_name</span></code>之后的以下路径<code class="codeph"><span class="codeinlineitalic">disk_group_name</span></code>包含大写的OMF目录元素：<pre class="oac_no_warn" dir="ltr">WALLET_ROOT =“+ <span class="italic">disk_group_name</span> / mydir / wallets”</pre></div>
                           </li>
                           <li class="stepexpand"><span>使用<code class="codeph">SYSASM</code>管理权限连接到数据库实例。</span><div><pre class="oac_no_warn" dir="ltr">connect / as sysasm</pre></div>
                           </li>
                           <li class="stepexpand"><span>执行<code class="codeph">ALTER DISKGROUP</code>语句以创建必要的目录。</span><div>您必须执行此步骤，因为数据库服务器无法自动创建这些目录，因为为<code class="codeph">WALLET_ROOT</code>选择的位置不符合Oracle Managed Files准则（即，它没有以大写字母包含<code class="codeph">OMF</code>组件） 。
                              </div>
                              <div>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP“ <span class="italic">disk_group_name</span> ”ADD DIRECTORY'+ <span class="italic">disk_group_name</span> / mydir / wallets / <span class="italic">tde</span> ';</pre><p>对于多租户环境，请查找将存储密钥库的PDB的PDB GUID，如下所示：</p><pre class="oac_no_warn" dir="ltr">SELECT GUID FROM DBA_PDBS WHERE PDB_NAME =' <span class="italic">pdb name</span> ';</pre><p>接下来，在以下<code class="codeph">ALTER DISKGROUP</code>语句中包含PDB GUID，以便为<code class="codeph">WALLET_ROOT</code>位置内的隔离模式PDB创建必要的目录。例如，假设GUID为<code class="codeph">4756C705E52A8768E053F82DC40A5329</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER DISKGROUP“ <span class="italic">disk_group_name</span> ”ADD DIRECTORY'+ <span class="italic">disk_group_name</span> / mydir / wallets / 4756C705E52A8768E053F82DC40A5329'ALTER DISKGROUP“ <span class="italic">disk_group_name</span> ”ADD DIRECTORY'+ <span class="italic">disk_group_name</span> / mydir / wallets / 4756C705E52A8768E053F82DC40A5329 / tde';</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-952ABBF4-D92C-4DB9-A1AB-5B2E25582956" title="您可以在自动存储管理（ASM）磁盘组上存储软件密钥库。">配置自动存储管理的密钥库</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG10321"></a><div class="props_rev_3"><a id="GUID-672990D8-A3C6-45A0-BEA8-86B7104FE402" name="GUID-672990D8-A3C6-45A0-BEA8-86B7104FE402"></a><h4 id="ASOAG-GUID-672990D8-A3C6-45A0-BEA8-86B7104FE402" class="sect4">关闭密钥库</h4>
                  <div>
                     <p>您可以手动关闭软件和硬件密钥库。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-9777F9A7-EDB8-40DB-B7D8-FAC2FDFFBEB4">关于关闭密钥库</a><br>打开密钥库后，它将保持打开状态，直到您关闭数据库实例。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-814E9D78-04D5-4063-A70D-893469E35C8B">关闭软件密钥库</a><br>您可以手动关闭基于密码的软件密钥库，自动登录软件密钥库和本地自动登录软件密钥库。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-C8CF91A0-9EF9-4479-880D-1D8C2FBE05B2">关闭硬件密钥库</a><br>要关闭硬件密钥库，必须将<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句与<code class="codeph">SET KEYSTORE CLOSE</code>子句一起使用。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="您可以在密钥库上执行维护活动，例如更改密码以及备份，合并和移动密钥库。">管理密钥库</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10412"></a><div class="props_rev_3"><a id="GUID-9777F9A7-EDB8-40DB-B7D8-FAC2FDFFBEB4" name="GUID-9777F9A7-EDB8-40DB-B7D8-FAC2FDFFBEB4"></a><h5 id="ASOAG-GUID-9777F9A7-EDB8-40DB-B7D8-FAC2FDFFBEB4" class="sect5">关于关闭密钥库</h5>
                     <div>
                        <p>打开密钥库后，它将保持打开状态，直到您关闭数据库实例。</p>
                        <p>重新启动数据库实例时，自动登录和本地自动登录软件密钥库会在需要时自动打开（即必须访问TDE主加密密钥时）。但是，基于密码的软件和硬件密钥库不会自动打开。您必须先手动打开它们才能使用它们。</p>
                        <p>关闭软件或硬件密钥库时，将禁用数据库上的所有加密和解密操作。因此，在重新打开密钥库之前，数据库用户或应用程序无法执行涉及加密数据的任何操作。</p>
                        <p>关闭密钥库后重新打开密钥库时，密钥库内容将重新加载回数据库。因此，如果内容已被修改（例如在迁移期间），则数据库将具有最新的密钥库内容。</p>
                        <p>您可以通过查询<code class="codeph">V$ENCRYPTION_WALLET</code>视图的<code class="codeph">STATUS</code>列来检查密钥库是否已关闭。
                        </p>
                        <p>如果无法访问密钥库，以下数据操作将失败：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>从加密列中<code class="codeph">SELECT</code>数据</p>
                           </li>
                           <li>
                              <p><code class="codeph">INSERT</code>数据插入加密列</p>
                           </li>
                           <li>
                              <p><code class="codeph">CREATE</code>一个包含加密列的表</p>
                           </li>
                           <li>
                              <p><code class="codeph">CREATE</code>加密表空间</p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-672990D8-A3C6-45A0-BEA8-86B7104FE402" title="您可以手动关闭软件和硬件密钥库。">关闭密钥库</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10320"></a><div class="props_rev_3"><a id="GUID-814E9D78-04D5-4063-A70D-893469E35C8B" name="GUID-814E9D78-04D5-4063-A70D-893469E35C8B"></a><h5 id="ASOAG-GUID-814E9D78-04D5-4063-A70D-893469E35C8B" class="sect5">关闭软件密钥库</h5>
                     <div>
                        <p>您可以手动关闭基于密码的软件密钥库，自动登录软件密钥库和本地自动登录软件密钥库。</p>
                        <div class="section">
                           <p>如果是自动登录密钥库，在访问密钥库时会自动打开，如果将其移动到新位置，请手动将其关闭。如果要将配置从自动登录密钥库更改为基于密码的密钥库，则执行此操作：移出自动登录密钥库，然后关闭自动登录密钥库。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ol>
                              <li>
                                 <p>以已被授予<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限的用户身份登录数据库实例。
                                 </p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm输入密码： <span class="italic">password</span>已连接。
</pre></li>
                              <li>
                                 <p>运行<code class="codeph">ADMINISTER KEY MANAGEMENT</code> SQL语句。
                                 </p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>对于基于密码的软件密钥库，请使用以下语法：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理设置KEYSTORE关闭[由[外部商店|确定] <span class="italic">software_keystore_password</span> ]];</pre><p>在本规范中：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">IDENTIFIED BY</code>可以是以下之一：</p>
                                             <ul style="list-style-type:disc">
                                                <li>
                                                   <p><code class="codeph">EXTERNAL STORE</code>使用存储在外部存储中的密钥库密码来执行密钥库操作。
                                                   </p>
                                                </li>
                                                <li>
                                                   <p><span class="italic"><code class="codeph">software_keystore_password</code></span>是创建密钥库的用户的密码。
                                                   </p>
                                                </li>
                                             </ul>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p>对于自动登录或本地自动登录软件密钥库，请使用以下SQL语句：</p><pre class="oac_no_warn" dir="ltr"><code class="codeph">管理员密钥管理设置KEYSTORE CLOSE;</code>
</pre><p>您无需为此语句指定密码。</p>
                                    </li>
                                 </ul>
                              </li>
                           </ol>
                           <p>关闭密钥库将禁用所有加密和解密操作。任何加密或解密数据或访问加密数据的尝试都会导致错误。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-672990D8-A3C6-45A0-BEA8-86B7104FE402" title="您可以手动关闭软件和硬件密钥库。">关闭密钥库</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10413"></a><div class="props_rev_3"><a id="GUID-C8CF91A0-9EF9-4479-880D-1D8C2FBE05B2" name="GUID-C8CF91A0-9EF9-4479-880D-1D8C2FBE05B2"></a><h5 id="ASOAG-GUID-C8CF91A0-9EF9-4479-880D-1D8C2FBE05B2" class="sect5">关闭硬件密钥库</h5>
                     <div>
                        <p>要关闭硬件密钥库，必须将<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句与<code class="codeph">SET KEYSTORE CLOSE</code>子句一起使用。
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>日志<code class="codeph"></code>作为已被授予<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限的用户进入数据库实例。
                                 </p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm输入密码： <span class="italic">password</span>已连接。
</pre></li>
                              <li>
                                 <p>使用以下语法关闭硬件密钥库：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理设置关键字由[外部商店|]识别“ <span class="italic">hardware_keystore_credentials</span> ”];</pre><p>在本规范中：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">IDENTIFIED BY</code>可以是以下设置之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">EXTERNAL STORE</code>使用存储在外部存储中的密钥库密码来执行密钥库操作。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph"><span class="codeinlineitalic">hardware_keystore_credentials</span></code>是指HSM或Oracle Key Vault硬件密钥库的凭据。对于HSM，请使用此格式指定凭据，用引号括起并用冒号分隔组件： <code class="codeph">“ <span class="codeinlineitalic">user_name</span> : <span class="codeinlineitalic">password</span> ”</code> ，其中<code class="codeph"><span class="codeinlineitalic">user_name</span></code>是创建HSM的用户，密码是此用户的密码。对于Oracle Key Vault，仅输入创建密钥库的用户的密码。用引号括起此密码。
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                 </ul>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE CLOSE由“psmith： <span class="italic">password</span> ”标识;</pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-672990D8-A3C6-45A0-BEA8-86B7104FE402" title="您可以手动关闭软件和硬件密钥库。">关闭密钥库</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG9546"></a><div class="props_rev_3"><a id="GUID-F11271F4-7789-4F0D-B999-86DAFBE9152C" name="GUID-F11271F4-7789-4F0D-B999-86DAFBE9152C"></a><h4 id="ASOAG-GUID-F11271F4-7789-4F0D-B999-86DAFBE9152C" class="sect4">加密数据的备份和恢复</h4>
                  <div>
                     <p>对于软件密钥库，如果没有TDE主加密密钥，则无法访问加密数据。</p>
                     <p>由于TDE主加密密钥存储在密钥库中，因此应定期将软件密钥库备份到安全位置。每当设置新的TDE主加密密钥或执行写入密钥库的任何操作时，都必须备份密钥库的副本。</p>
                     <p>不要将软件密钥库备份在与加密数据相同的位置。分别备份软件密钥库。当您使用自动登录密钥库时，尤其如此，该密钥库不需要打开密码。如果备份磁带丢失，恶意用户应该无法同时获取加密数据和密钥库。</p>
                     <p>Oracle Recovery Manager（Oracle RMAN）不会将软件密钥库备份为数据库备份的一部分。使用Oracle Secure Backup等介质管理器和Oracle RMAN时，Oracle Secure Backup会自动排除自动打开的密钥库（ <code class="codeph">cwallet.sso</code>文件）。但是，它不会自动排除加密密钥库（ <code class="codeph">ewallet.p12</code>文件）。最好将以下<code class="codeph">exclude</code>数据集语句添加到Oracle Secure Backup配置中：</p><pre class="oac_no_warn" dir="ltr">排除名称* .p12</pre><p>此设置指示Oracle Secure Backup从备份集中排除加密密钥库。</p>
                     <p>如果丢失了存储TDE主加密密钥的软件密钥库，则可以通过将备份版本的密钥库复制到适当的位置来恢复对加密数据的访问。如果在上次重置TDE主加密密钥后归档已还原的密钥库，则无需执行任何其他操作。</p>
                     <p>如果还原的软件密钥库不包含最新的TDE主加密密钥，则可以通过将数据库的状态回滚到该时间点来恢复TDE主加密密钥重置时的旧数据。重置TDE主加密密钥后对加密列的所有修改都将丢失。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../bradv/rman-complete-database-recovery.html#BRADV8005" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="您可以在密钥库上执行维护活动，例如更改密码以及备份，合并和移动密钥库。">管理密钥库</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="ASOAG10376"></a><div class="props_rev_3"><a id="GUID-5CC83A60-8EA4-4984-AD2C-42BC12E5A16F" name="GUID-5CC83A60-8EA4-4984-AD2C-42BC12E5A16F"></a><h4 id="ASOAG-GUID-5CC83A60-8EA4-4984-AD2C-42BC12E5A16F" class="sect4">删除密钥库的危险</h4>
                  <div>
                     <p>Oracle强烈建议您在将密钥库加密密钥移动到新密钥库之前不要删除密钥库。</p>
                     <p>如果已配置透明数据加密并且密钥库正在使用中，则删除仍包含密钥的密钥库特别危险。通过在打开密钥库后查询<code class="codeph">V$ENCRYPTION_WALLET</code>视图的<code class="codeph">STATUS</code>列，可以找到密钥库是否正在使用中。
                     </p>
                     <p>您不应删除其中包含活动密钥的密钥库的原因是密钥库包含用于数据库的所有密钥的列表。删除密钥库会删除这些密钥，并可能导致丢失加密数据。删除密钥库甚至可能妨碍Oracle数据库的正常运行。即使您解密了数据库中的所有数据，仍然不应该删除密钥库，因为密钥库中的TDE主加密密钥也用于其他Oracle数据库功能，例如离线表空间，Oracle Recovery Manager和Oracle Secure Backup。</p>
                     <p>即使将软件密钥库迁移到硬件密钥库，也不应删除原始密钥库。稍后将需要原始密钥库中的密钥，例如在恢复脱机加密表空间时。即使没有未加密的在线数据，密钥仍可能正在使用中。</p>
                     <p>例外情况是软件自动登录（或自动登录本地）密钥库。如果您不想使用这种类型的密钥库，那么理想情况下您应该将其移动到安全目录。如果您确定它来自特定的基于密码的软件密钥库并且该密钥库可用，则仅删除自动登录密钥库。密钥库应该可用且已知。</p>
                     <p>如果必须删除密钥库，请务必小心。您必须先使用<code class="codeph">ADMINISTER KEY MANAGEMENT MOVE KEYS TO NEW KEYSTORE</code>语句将密钥库中的密钥移动到新的密钥库。密钥在新密钥库中后，您可以安全地删除旧密钥库。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-3BD2DD80-4DB5-4EA7-AFA2-D48D02839BED" title="您可以将现有TDE主加密密钥从现有软件密码密钥库移动到新密钥库中。">将TDE主加密密钥移动到新密钥库中</a></li>
                           <li><a href="managing-keystores-encryption-keys-in-united-mode.html#GUID-CBB8C6CC-CF87-4E10-9170-938C7CE7483B" title="在联合模式下，您可以将现有TDE主加密密钥从现有软件密码密钥库移动到新密钥库中。">将TDE主加密密钥移动到联合模式下的新密钥库中</a></li>
                           <li><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-5F84010F-F74C-41FC-900F-741185B29AA0" title="在隔离模式下，您可以将现有TDE主加密密钥从现有软件密码密钥库移动到新密钥库中。">在隔离模式下将TDE主加密密钥移动到新密钥库中</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B9108322-E1B4-4B24-9D0C-E90B4F30A076" title="您可以在密钥库上执行维护活动，例如更改密码以及备份，合并和移动密钥库。">管理密钥库</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="ASOAG10407"></a><div class="props_rev_3"><a id="GUID-CDF39F23-2371-4E93-A503-25798F1E97E4" name="GUID-CDF39F23-2371-4E93-A503-25798F1E97E4"></a><h3 id="ASOAG-GUID-CDF39F23-2371-4E93-A503-25798F1E97E4" class="sect3">管理TDE主加密密钥</h3>
               <div>
                  <p>您可以通过多种方式管理TDE主加密密钥。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-270396F9-B023-4F57-8640-D19445F36CF8">创建用户定义的TDE主加密密钥</a><br>您可以通过生成TDE主加密密钥ID在数据库外部创建用户定义的TDE主加密密钥。</li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EA686044-5B10-4F70-88F2-B45BF1DD1E55">创建TDE主加密密钥以供以后使用</a><br>您可以创建可在以后激活的TDE主加密密钥。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-59B10A94-CED1-47D4-8DEB-E79E8B3624F2">激活TDE主加密密钥</a><br>激活TDE主加密密钥后，可以使用它。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EFE76B37-D5F0-41E1-B650-3ABA61AF0AD0">TDE主加密密钥属性管理</a><br>TDE主加密密钥属性存储有关TDE主加密密钥的信息。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EBBA92B5-E5D0-43F5-BF55-3B44367F6105">为报告创建自定义TDE主加密密钥属性</a><br>自定义TDE主加密密钥属性使您可以定义特定于您需要的属性。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FDA3856D-5B88-42FD-A666-BC965C92689C">在密钥库中设置或重新加密TDE主加密密钥</a><br>您可以为软件密钥库和硬件密钥库设置或重新生成TDE主加密密钥。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F">导出和导入TDE主加密密钥</a><br>您可以以不同方式导出和导入TDE主加密密钥。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-48512BB6-C588-4704-B2BD-22606C0F05BC">使用Oracle Key Vault管理TDE主加密密钥</a><br>您可以使用Oracle Key Vault在整个企业中管理和共享TDE主加密密钥。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0C080CA8-1812-4DCD-AC30-FE47534C7962" title="您可以修改密钥库和TDE主加密密钥的设置，并存储Oracle数据库并将Oracle GoldenGate机密存储在密钥库中。">管理密钥库和主加密密钥</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-270396F9-B023-4F57-8640-D19445F36CF8" name="GUID-270396F9-B023-4F57-8640-D19445F36CF8"></a><h4 id="ASOAG-GUID-270396F9-B023-4F57-8640-D19445F36CF8" class="sect4">创建用户定义的TDE主加密密钥</h4>
                  <div>
                     <p>您可以通过生成TDE主加密密钥ID在数据库外部创建用户定义的TDE主加密密钥。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-55EE7E49-B6E4-4EA8-8DB9-F4D3CCC020D0">关于用户定义的TDE主加密密钥</a><br>数据库外部的TDE主加密密钥具有自己的用户生成ID，用于跟踪TDE主加密密钥的使用情况。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-33E7D22D-4FB4-47D7-8F88-EFDC22E71A64">创建用户定义的TDE主加密密钥</a><br>要创建用户定义的TDE主加密密钥，请使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句和<code class="codeph">SET | CREATE [ENCRYPTION] KEY</code>子句。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-CDF39F23-2371-4E93-A503-25798F1E97E4" title="您可以通过多种方式管理TDE主加密密钥。">管理TDE主加密密钥</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-55EE7E49-B6E4-4EA8-8DB9-F4D3CCC020D0" name="GUID-55EE7E49-B6E4-4EA8-8DB9-F4D3CCC020D0"></a><h5 id="ASOAG-GUID-55EE7E49-B6E4-4EA8-8DB9-F4D3CCC020D0" class="sect5">关于用户定义的TDE主加密密钥</h5>
                     <div>
                        <p>数据库外部的TDE主加密密钥具有自己的用户生成ID，用于跟踪TDE主加密密钥的使用情况。</p>
                        <p>您可以使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code>来创建和设置用户定义的TDE主加密密钥ID。生成TDE主加密密钥后，可以将此密钥带入数据库。（可选）您可以在各种<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句中指定TDE主加密密钥ID。
                        </p>
                        <p>此类配置有利于Oracle Fusion SaaS云环境，因为它使您能够生成符合站点要求的TDE主加密密钥。您生成的此密钥支持当前的加密算法，可用于软件密钥库。</p>
                        <p>生成TDE主加密密钥ID后，您可以像平常一样加密数据。</p>
                        <p>任何审核日志都不会捕获TDE主加密密钥及其相应的ID。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-270396F9-B023-4F57-8640-D19445F36CF8" title="您可以通过生成TDE主加密密钥ID在数据库外部创建用户定义的TDE主加密密钥。">创建用户定义的TDE主加密密钥</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-33E7D22D-4FB4-47D7-8F88-EFDC22E71A64" name="GUID-33E7D22D-4FB4-47D7-8F88-EFDC22E71A64"></a><h5 id="ASOAG-GUID-33E7D22D-4FB4-47D7-8F88-EFDC22E71A64" class="sect5">创建用户定义的TDE主加密密钥</h5>
                     <div>
                        <p>要创建用户定义的TDE主加密密钥，请使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句和<code class="codeph">SET | CREATE [ENCRYPTION] KEY</code>子句。
                        </p>
                        <ol>
                           <li class="stepexpand"><span>以已被授予<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限的用户身份登录数据库实例。</span><div>例如：<pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm输入密码： <span class="italic">password</span>已连接。
</pre></div>
                           </li>
                           <li class="stepexpand"><span>使用以下语法创建用户定义的TDE主加密密钥：</span><div><pre class="oac_no_warn" dir="ltr">管理员密钥管理集|创建[ENCRYPTION] KEY'[ <span class="italic">mkid</span> ： <span class="italic">mk</span> | <span class="italic">mk</span> ]'[使用算法' <span class="italic">算法</span> '] [FORCE KEYSTORE]由[EXTERNAL STORE]识别<span class="italic">keystore_password</span> ] [WITH BACKUP [使用' <span class="italic">backup_identifier</span> ']];</pre><p>在本规范中：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">SET | CREATE</code> ：如果要创建主服务器并立即激活TDE主加密密钥，请输入<code class="codeph">SET</code>如果要创建密钥供以后使用，请选择<code class="codeph">CREATE</code> ，而不激活它。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph"><span class="codeinlineitalic">mkid</span></code>和<code class="codeph"><span class="codeinlineitalic">mk</span></code> ：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph"><span class="codeinlineitalic">mkid</span></code>是TDE主加密密钥ID，是一个16字节的十六进制编码值，您可以指定或让Oracle数据库生成。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph"><span class="codeinlineitalic">mk</span></code>是TDE主加密密钥，是一个十六进制编码的值，您可以指定或让Oracle数据库生成，32字节（对于<code class="codeph">AES256</code> ， <code class="codeph">ARIA256</code>和<code class="codeph">GOST256</code>算法）或16字节（对于<code class="codeph">SEED128</code>算法）。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>如果省略<code class="codeph"><span class="codeinlineitalic">mkid</span> : <span class="codeinlineitalic">mk</span> | <span class="codeinlineitalic">mkid</span></code>子句但包含<code class="codeph"><span class="codeinlineitalic">mk</span></code>值，然后Oracle数据库为<code class="codeph"><span class="codeinlineitalic">mk</span></code>生成<code class="codeph"><span class="codeinlineitalic">mkid</span></code> 。
                                       </p>
                                       <p>如果省略整个<code class="codeph"><span class="codeinlineitalic">mkid</span> : <span class="codeinlineitalic">mk</span> | <span class="codeinlineitalic">mkid</span></code>子句，然后Oracle数据库为您生成这些值。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">USING ALGORITHM</code> ：指定以下支持的算法之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">AES256</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ARIA256</code> 
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SEED128</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">GOST256</code></p>
                                          </li>
                                       </ul>
                                       <p>如果省略算法，则使用默认值<code class="codeph">AES256</code> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code>临时打开此操作的受密码保护的密钥库。您必须打开此操作的密钥库。
                                       </p>
                                    </li>
                                 </ul>
                                 <p>以下示例包括用户创建的TDE主加密密钥，但没有TDE主加密密钥ID，因此生成TDE主加密密钥ID：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理集加密密钥'3D432109DF88967A541967062A6F4E460E892318E307F017BA048707B402493C'使用算法'GOST256'由<span class="italic">keystore_password</span>识别的FORCE KEYSTORE;</pre><p>下一个示例为主加密ID和TDE主加密密钥创建用户定义的密钥。它省略了算法规范，因此使用默认算法<code class="codeph">AES256</code> 。
                                 </p><pre class="oac_no_warn" dir="ltr">管理员密钥管理创建加密密钥'10203040506070801112131415161718：3D432109DF88967A541967062A6F4E460E892318E307F017BA048707B402493C'由<span class="italic">keystore_password</span>识别;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="introduction-to-transparent-data-encryption.html#GUID-AAE3C965-C6A8-45D6-BA5D-F88B300A301A" title="默认情况下，透明数据加密（TDE）列加密使用高级加密标准（AES）。">支持的加密和完整性算法</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-270396F9-B023-4F57-8640-D19445F36CF8" title="您可以通过生成TDE主加密密钥ID在数据库外部创建用户定义的TDE主加密密钥。">创建用户定义的TDE主加密密钥</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div><a id="ASOAG10414"></a><div class="props_rev_3"><a id="GUID-EA686044-5B10-4F70-88F2-B45BF1DD1E55" name="GUID-EA686044-5B10-4F70-88F2-B45BF1DD1E55"></a><h4 id="ASOAG-GUID-EA686044-5B10-4F70-88F2-B45BF1DD1E55" class="sect4">创建TDE主加密密钥以供以后使用</h4>
                  <div>
                     <p>您可以创建可在以后激活的TDE主加密密钥。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-9E9A93AB-401B-49CD-874E-E4751DE310AD">关于创建TDE主加密密钥以供以后使用</a><br><code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句的<code class="codeph">CREATE KEY</code>子句可以创建要在以后激活的TDE主加密密钥。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-8E7F27F9-99A5-4233-BC16-5B0479F947F9">创建TDE主加密密钥供以后使用</a><br>必须先打开密钥库，然后才能创建TDE主加密密钥以供日后使用。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DD3685E7-C44E-4861-B5A2-93F49BA61380">示例：在单个数据库中创建TDE主加密密钥</a><br>您可以使用<code class="codeph">ADMINISTER KEY MANAGEMENT CREATE KEY USING TAG</code>语句在单个数据库中创建TDE主加密密钥。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-CDF39F23-2371-4E93-A503-25798F1E97E4" title="您可以通过多种方式管理TDE主加密密钥。">管理TDE主加密密钥</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10415"></a><div class="props_rev_3"><a id="GUID-9E9A93AB-401B-49CD-874E-E4751DE310AD" name="GUID-9E9A93AB-401B-49CD-874E-E4751DE310AD"></a><h5 id="ASOAG-GUID-9E9A93AB-401B-49CD-874E-E4751DE310AD" class="sect5">关于创建TDE主加密密钥以供以后使用</h5>
                     <div>
                        <p><code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句的<code class="codeph">CREATE KEY</code>子句可以创建要在以后激活的TDE主加密密钥。
                        </p>
                        <p>然后，您可以在同一数据库上激活此密钥，或将其导出到另一个数据库并在那里激活它。</p>
                        <p>当您必须重新创建TDE主加密密钥时，这种TDE主加密密钥创建方法在多租户环境中很有用。<code class="codeph">CREATE KEY</code>子句使您可以使用单个SQL语句为多租户环境中的所有PDB生成新的TDE主加密密钥。新TDE主加密密钥的创建时间晚于当前正在使用的TDE主加密密钥的激活。因此，创建时间可以用作提醒所有PDB尽快激活最近创建的TDE主加密密钥。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EA686044-5B10-4F70-88F2-B45BF1DD1E55" title="您可以创建可在以后激活的TDE主加密密钥。">创建TDE主加密密钥供以后使用</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10416"></a><div class="props_rev_3"><a id="GUID-8E7F27F9-99A5-4233-BC16-5B0479F947F9" name="GUID-8E7F27F9-99A5-4233-BC16-5B0479F947F9"></a><h5 id="ASOAG-GUID-8E7F27F9-99A5-4233-BC16-5B0479F947F9" class="sect5">创建TDE主加密密钥供以后使用</h5>
                     <div>
                        <p>必须先打开密钥库，然后才能创建TDE主加密密钥以供日后使用。</p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>以已被授予<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限的用户身份登录数据库实例。
                                 </p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm输入密码： <span class="italic">password</span>已连接。
</pre></li>
                              <li>
                                 <p>使用以下语法创建TDE主加密密钥：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理创建密钥[使用标记' <span class="italic">标记</span> '] [FORCE KEYSTORE]由[EXTERNAL STORE | <span class="italic">keystore_password</span> ] [WITH BACKUP [使用' <span class="italic">backup_identifier</span> ']];</pre><p>在本规范中：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="italic"><code class="codeph">tag</code></span>是您定义的关联属性和信息。将此设置括在单引号（''）中。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code>临时打开此操作的受密码保护的密钥库。您必须打开此操作的密钥库。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">IDENTIFIED BY</code>可以是以下设置之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">EXTERNAL STORE</code>使用存储在外部存储中的密钥库密码来执行密钥库操作。
                                             </p>
                                          </li>
                                          <li>
                                             <p><span class="italic"><code class="codeph">keystore_password</code></span>是您在创建原始密钥库时使用的必需密钥库密码。它区分大小写。
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><code class="codeph">WITH BACKUP</code>将TDE主加密密钥备份在与密钥相同的位置，由<code class="codeph">V$ENCRYPTION_WALLET</code>视图的<code class="codeph">WRL_PARAMETER</code>列标识。要查找所有数据库实例的关键位置，请查询<code class="codeph">GV$ENCRYPTION_WALLET</code>视图。
                                       </p>
                                       <p>您必须备份基于密码的软件密钥库。您无需备份自动登录或本地自动登录软件密钥库。（可选）包括<code class="codeph">USING</code> <span class="italic"><code class="codeph">backup_identifier</code></span>子句以添加备份的描述。将<span class="italic"><code class="codeph">backup_identifier</code></span>括在单引号（ <code class="codeph">' '</code> ）中。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>如有必要，请激活TDE主加密密钥。</p>
                                 <ol type="a">
                                    <li>
                                       <p>获取密钥ID。</p><pre class="oac_no_warn" dir="ltr">SELECT KEY_ID FROM V $ ENCRYPTION_KEYS; KEY_ID ------------------------------------------------- --- AWsHwVYC2U + Nv3RVphn / yAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</pre></li>
                                    <li>
                                       <p>使用此密钥ID激活密钥。</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理使用密钥'AWsHwVYC2U + Nv3RVphn / yAIAAAAAAAAAAAAAAAAAAAAAAAAAAAA'使用标签'季度：秒;描述：激活备用密钥'IDENTIFIED BY <span class="italic">密码</span> WITH BACKUP;</pre></li>
                                 </ol>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-37296947-18DB-4CFA-A112-794A55E942E2" title="根据您创建的密钥库的类型，您必须先手动打开密钥库，然后才能使用它。">第3步：打开软件密钥库</a></li>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-81E6D2BA-EE27-4D35-96FB-2FFC0BCD396B" title="要打开硬件密钥库，请使用ADMINISTER KEY MANAGEMENT语句和SET KEYSTORE OPEN子句。">打开硬件密钥库</a></li>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-59B10A94-CED1-47D4-8DEB-E79E8B3624F2" title="激活TDE主加密密钥后，可以使用它。">激活TDE主加密密钥</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EA686044-5B10-4F70-88F2-B45BF1DD1E55" title="您可以创建可在以后激活的TDE主加密密钥。">创建TDE主加密密钥供以后使用</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10417"></a><a id="ASOAG10520"></a><div class="props_rev_3"><a id="GUID-DD3685E7-C44E-4861-B5A2-93F49BA61380" name="GUID-DD3685E7-C44E-4861-B5A2-93F49BA61380"></a><h5 id="ASOAG-GUID-DD3685E7-C44E-4861-B5A2-93F49BA61380" class="sect5">示例：在单个数据库中创建TDE主加密密钥</h5>
                     <div>
                        <p>您可以使用<code class="codeph">ADMINISTER KEY MANAGEMENT CREATE KEY USING TAG</code>语句在单个数据库中创建TDE主加密密钥。
                        </p>
                        <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DD3685E7-C44E-4861-B5A2-93F49BA61380__CIHCGBDD">例4-2</a>显示了如何在单个数据库中创建TDE主加密密钥。运行此语句后，将在该数据库的密钥库中创建带有标记定义的TDE主加密密钥。您可以在<code class="codeph">V$ENCRYPTION_KEYS</code>视图的<code class="codeph">TAG</code>列中查询新创建的密钥的标识符。您可以查询<code class="codeph">CREATION_TIME</code>列以查找最近创建的密钥，该密钥将是您从此语句创建的密钥。如果您希望或稍后在本地激活此密钥，可以将此密钥导出到另一个数据库，如<a href="managing-keystore-and-tde-master-encryption-key.html#GUID-59B10A94-CED1-47D4-8DEB-E79E8B3624F2" title="激活TDE主加密密钥后，可以使用它。">激活TDE主加密密钥中所述</a> 。
                        </p>
                        <div class="example" id="GUID-DD3685E7-C44E-4861-B5A2-93F49BA61380__CIHCGBDD">
                           <p class="titleinexample">示例4-2在单个数据库中创建TDE主加密密钥</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理使用TAG'创建密钥'来源：admin @ source; target：db1 @ target'IDENTIFIED BY <span class="italic">密码</span> WITH BACKUP;密钥库已更改。
</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EA686044-5B10-4F70-88F2-B45BF1DD1E55" title="您可以创建可在以后激活的TDE主加密密钥。">创建TDE主加密密钥供以后使用</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG10419"></a><div class="props_rev_3"><a id="GUID-59B10A94-CED1-47D4-8DEB-E79E8B3624F2" name="GUID-59B10A94-CED1-47D4-8DEB-E79E8B3624F2"></a><h4 id="ASOAG-GUID-59B10A94-CED1-47D4-8DEB-E79E8B3624F2" class="sect4">激活TDE主加密密钥</h4>
                  <div>
                     <p>激活TDE主加密密钥后，可以使用它。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0B645D42-A7FE-4199-9A88-AFD416F1ECF1">关于激活TDE主加密密钥</a><br>您可以<code class="codeph">USE KEY</code> <code class="codeph">ADMINSTER KEY MANAGEMENT</code>的<code class="codeph">USE KEY</code>子句激活以前创建或导入的TDE主加密密钥。</li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-2A15CA6E-88CC-41FB-BE48-090BCA2C3B90">激活TDE主加密密钥</a><br>要激活TDE主加密密钥，您必须打开密钥库并使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code>和<code class="codeph">USE KEY</code>子句。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-72F5FDA3-7F93-4288-B3BE-4F7814EC8132">示例：激活TDE主加密密钥</a><br>您可以使用<span class="apiname" translate="no">ADMINISTER KEY MANAGEMENT</span> SQL语句激活TDE主加密密钥。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-CDF39F23-2371-4E93-A503-25798F1E97E4" title="您可以通过多种方式管理TDE主加密密钥。">管理TDE主加密密钥</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10420"></a><div class="props_rev_3"><a id="GUID-0B645D42-A7FE-4199-9A88-AFD416F1ECF1" name="GUID-0B645D42-A7FE-4199-9A88-AFD416F1ECF1"></a><h5 id="ASOAG-GUID-0B645D42-A7FE-4199-9A88-AFD416F1ECF1" class="sect5">关于激活TDE主加密密钥</h5>
                     <div>
                        <p>您可以<code class="codeph">USE KEY</code> <code class="codeph">ADMINSTER KEY MANAGEMENT</code>的<code class="codeph">USE KEY</code>子句激活以前创建或导入的TDE主加密密钥。</p>
                        <p>激活密钥后，即可使用。密钥将用于保护所有列密钥和所有<a href="glossary.html#GUID-5101B9BB-386F-4826-B639-2BE246A66E90"><span class="xrefglossterm">表空间加密密钥</span></a> 。如果已部署逻辑备用数据库，则必须在重新创建后导出TDE主加密密钥，然后将它们导入备用数据库。您可以在主数据库和备用数据库上使用TDE主加密密钥。为此，必须在将TDE主加密密钥导入逻辑备用数据库后激活它。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-59B10A94-CED1-47D4-8DEB-E79E8B3624F2" title="激活TDE主加密密钥后，可以使用它。">激活TDE主加密密钥</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10421"></a><div class="props_rev_3"><a id="GUID-2A15CA6E-88CC-41FB-BE48-090BCA2C3B90" name="GUID-2A15CA6E-88CC-41FB-BE48-090BCA2C3B90"></a><h5 id="ASOAG-GUID-2A15CA6E-88CC-41FB-BE48-090BCA2C3B90" class="sect5">激活TDE主加密密钥</h5>
                     <div>
                        <p>要激活TDE主加密密钥，您必须打开密钥库并使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code>和<code class="codeph">USE KEY</code>子句。
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>以已被授予<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限的用户身份登录数据库实例。
                                 </p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm输入密码： <span class="italic">password</span>已连接。
</pre></li>
                              <li>
                                 <p>查询<code class="codeph">V$ENCRYPTION_KEYS</code>视图的<code class="codeph">KEY_ID</code>列以查找密钥标识符。
                                 </p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">SELECT KEY_ID FROM V $ ENCRYPTION_KEYS; KEY_ID ------------------------------------------------- --- ARaHD762tUkkvyLgPzAi6hMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</pre></li>
                              <li>
                                 <p>使用此密钥标识符可以使用以下语法激活TDE主加密密钥：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理使用密钥' <span class="italic">key_identifier_from_V $ ENCRYPTION_KEYS</span> '[使用标记' <span class="italic">标记</span> '] [FORCE KEYSTORE]由[EXTERNAL STORE | <span class="italic">keystore_password</span> ] [WITH BACKUP [使用' <span class="italic">backup_identifier</span> ']];</pre><p>在本规范中：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="italic"><code class="codeph">key_identifier_from_V$ENCRYPTION_KEYS</code></span>是密钥标识。将此设置括在单引号（ <code class="codeph">' '</code> ）中。
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">tag</code></span>是您定义的关联属性和信息。将此设置括在单引号（ <code class="codeph">' '</code> ）中。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code>临时打开此操作的受密码保护的密钥库。您必须打开此操作的密钥库。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">IDENTIFIED BY</code>可以是以下设置之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">EXTERNAL STORE</code>使用存储在外部存储中的密钥库密码来执行密钥库操作。
                                             </p>
                                          </li>
                                          <li>
                                             <p><span class="italic"><code class="codeph">keystore_password</code></span>是您在创建原始密钥库时使用的必需密钥库密码。
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><code class="codeph">WITH BACKUP</code>将TDE主加密密钥备份在与密钥相同的位置，由<code class="codeph">V$ENCRYPTION_WALLET</code>视图的<code class="codeph">WRL_PARAMETER</code>列标识。要查找所有数据库实例的关键位置，请查询<code class="codeph">GV$ENCRYPTION_WALLET</code>视图。
                                       </p>
                                       <p>您必须备份基于密码的软件密钥库。您无需备份自动登录或本地自动登录软件密钥库。（可选）包括<code class="codeph">USING</code> <span class="italic"><code class="codeph">backup_identifier</code></span>子句以添加备份的描述。将<code class="codeph">backup_identifier</code>括在单引号（ <code class="codeph">' '</code> ）中。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-A9C23E31-CF57-477A-9E85-856DD411718D" title="要打开软件密钥库，必须将ADMINISTER KEY MANAGEMENT语句与SET KEYSTORE OPEN子句一起使用。">打开软件密钥库</a></li>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-81E6D2BA-EE27-4D35-96FB-2FFC0BCD396B" title="要打开硬件密钥库，请使用ADMINISTER KEY MANAGEMENT语句和SET KEYSTORE OPEN子句。">打开硬件密钥库</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-59B10A94-CED1-47D4-8DEB-E79E8B3624F2" title="激活TDE主加密密钥后，可以使用它。">激活TDE主加密密钥</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10422"></a><a id="ASOAG10521"></a><div class="props_rev_3"><a id="GUID-72F5FDA3-7F93-4288-B3BE-4F7814EC8132" name="GUID-72F5FDA3-7F93-4288-B3BE-4F7814EC8132"></a><h5 id="ASOAG-GUID-72F5FDA3-7F93-4288-B3BE-4F7814EC8132" class="sect5">示例：激活TDE主加密密钥</h5>
                     <div>
                        <p>您可以使用<span class="apiname" translate="no">ADMINISTER KEY MANAGEMENT</span> SQL语句激活TDE主加密密钥。
                        </p>
                        <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-72F5FDA3-7F93-4288-B3BE-4F7814EC8132__CIHCHHHA">例4-3</a>显示了如何激活先前导入的TDE主加密密钥，然后更新其标记。使用当前数据库时间戳和时区激活此密钥。
                        </p>
                        <div class="example" id="GUID-72F5FDA3-7F93-4288-B3BE-4F7814EC8132__CIHCHHHA">
                           <p class="titleinexample">示例4-3激活TDE主加密密钥</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理使用密钥'ARaHD762tUkkvyLgPzAi6hMAAAAAAAAAAAAAAAAAAAAAAAAAAAA'使用标签'季度：秒;描述：激活密钥备用'IDENTIFIED BY <span class="italic">密码</span> WITH BACKUP;密钥库已更改。</pre><p>在此版本的相同操作中，如果正在使用自动登录密钥库，或者密钥库已关闭，则会添加<code class="codeph">FORCE KEYSTORE</code>子句。密钥库的密码存储在外部，因此<code class="codeph">EXTERNAL STORE</code>设置用于<code class="codeph">IDENTIFIED BY</code>子句。
                           </p><pre class="oac_no_warn" dir="ltr">管理员密钥管理使用密钥'ARaHD762tUkkvyLgPzAi6hMAAAAAAAAAAAAAAAAAAAAAAAAAAAA'使用标签'季度：秒;描述：激活备用密钥'由外部商店通过备份识别的FORCE KEYSTORE;密钥库已更改。</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-59B10A94-CED1-47D4-8DEB-E79E8B3624F2" title="激活TDE主加密密钥后，可以使用它。">激活TDE主加密密钥</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG10328"></a><div class="props_rev_3"><a id="GUID-EFE76B37-D5F0-41E1-B650-3ABA61AF0AD0" name="GUID-EFE76B37-D5F0-41E1-B650-3ABA61AF0AD0"></a><h4 id="ASOAG-GUID-EFE76B37-D5F0-41E1-B650-3ABA61AF0AD0" class="sect4">TDE主加密密钥属性管理</h4>
                  <div>
                     <p>TDE主加密密钥属性存储有关TDE主加密密钥的信息。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EE8D119A-32CC-423F-B4A3-ABC685061B7C">TDE主加密密钥属性</a><br>TDE主加密密钥属性包括有关TDE主加密密钥的详细信息。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-5DC912A5-77ED-4B21-90AA-7E8DBED548A1">查找正在使用的TDE主加密密钥</a><br>正在使用的TDE主加密密钥是最近为数据库激活的加密密钥。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-CDF39F23-2371-4E93-A503-25798F1E97E4" title="您可以通过多种方式管理TDE主加密密钥。">管理TDE主加密密钥</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10329"></a><div class="props_rev_3"><a id="GUID-EE8D119A-32CC-423F-B4A3-ABC685061B7C" name="GUID-EE8D119A-32CC-423F-B4A3-ABC685061B7C"></a><h5 id="ASOAG-GUID-EE8D119A-32CC-423F-B4A3-ABC685061B7C" class="sect5">TDE主加密密钥属性</h5>
                     <div>
                        <p>TDE主加密密钥属性包括有关TDE主加密密钥的详细信息。</p>
                        <p>该信息包含以下类型：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">关键时间戳信息：</span>内部安全策略和合规性策略通常决定密钥更新频率。您应该在密钥达到其生命周期结束时使密钥到期，然后生成新密钥。时间戳属性（如密钥创建时间和激活时间）可帮助您准确确定密钥年龄，并自动生成密钥。
                              </p>
                              <p><code class="codeph">V$ENCRYPTION_KEYS</code>视图包含<code class="codeph">CREATION_TIME</code>和<code class="codeph">ACTIVATION_TIME.</code>等列<code class="codeph">ACTIVATION_TIME.</code>有关<code class="codeph">V$ENCRYPTION_KEYS</code>视图的完整说明，请参见<a href="../refrn/V-ENCRYPTION_KEYS.html#REFRN30661" target="_blank"><span><cite>Oracle数据库参考</cite></span></a> 。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">密钥所有者信息：</span>密钥所有者属性可帮助您确定创建或激活密钥的用户。这些属性对于安全性，审计和跟踪目的非常重要。密钥所有者属性还包括密钥使用信息，例如密钥是用于独立TDE操作还是用于多租户环境。
                              </p>
                              <p><code class="codeph">V$ENCRYPTION_KEYS</code>视图包括<code class="codeph">CREATOR, CREATOR_ID, USER, USER_ID,</code>和<code class="codeph">KEY_USE.</code>等<code class="codeph">KEY_USE.</code></p>
                           </li>
                           <li>
                              <p><span class="bold">关键源信息：</span>密钥通常必须在数据库之间移动，以执行诸如导入导出操作和Data Guard相关操作之类的操作。密钥源属性使您可以跟踪每个密钥的来源。您可以跟踪密钥是在本地创建还是导入，以及创建密钥的数据库的数据库名称和实例编号。在多租户环境中，您可以跟踪创建密钥的PDB。
                              </p>
                              <p><code class="codeph">V$ENCRYPTION_KEYS</code>视图包括<code class="codeph">CREATOR_DBNAME, CREATOR_DBID, CREATOR_INSTANCE_NAME, CREATOR_INSTANCE_NUMBER, CREATOR_PDBNAME,</code>等列。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">密钥用法信息：</span>密钥用法信息确定<span class="bold">使用</span>密钥的数据库或PDB。它还有助于确定密钥是否处于活动状态。
                              </p>
                              <p><code class="codeph">V$ENCRYPTION_KEYS</code>视图包括<code class="codeph">ACTIVATING_DBNAME, ACTIVATING_DBID, ACTIVATING_INSTANCE_NAME, ACTIVATING_PDBNAME,</code>等列。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">用户定义的信息和其他信息：</span>创建密钥时，可以使用<code class="codeph">TAG</code>选项使用信息对其进行<code class="codeph">TAG</code> 。每个密钥都包含重要信息，例如是否已备份。
                              </p>
                              <p><code class="codeph">V$ENCRYPTION_KEYS</code>视图包括<code class="codeph">KEY_ID, TAG,</code>和其他各列等列，例如<code class="codeph">BACKED_UP</code> 。</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-EE8D119A-32CC-423F-B4A3-ABC685061B7C__GUID-EE4A99A7-59A8-4C7A-B021-5DD4EEBFB36C">
                           <p class="notep1">注意：</p>仅具有PKCS＃11数据对象支持的硬件安全模块支持TDE主密钥属性和标记。
                        </div>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EFE76B37-D5F0-41E1-B650-3ABA61AF0AD0" title="TDE主加密密钥属性存储有关TDE主加密密钥的信息。">TDE主加密密钥属性管理</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10446"></a><div class="props_rev_3"><a id="GUID-5DC912A5-77ED-4B21-90AA-7E8DBED548A1" name="GUID-5DC912A5-77ED-4B21-90AA-7E8DBED548A1"></a><h5 id="ASOAG-GUID-5DC912A5-77ED-4B21-90AA-7E8DBED548A1" class="sect5">查找正在使用的TDE主加密密钥</h5>
                     <div>
                        <p>正在使用的TDE主加密密钥是最近为数据库激活的加密密钥。</p>
                        <ul>
                           <li class="stepexpand"><span>要查找TDE主加密密钥，请查询<code class="codeph">V$ENCRYPTION_KEYS</code>动态视图。</span><div>例如：<pre class="oac_no_warn" dir="ltr">SELECT KEY_ID FROM V $ ENCRYPTION_KEYS WHERE ACTIVATION_TIME =（SELECT MAX（ACTIVATION_TIME）FROM V $ ENCRYPTION_KEYS WHERE ACTIVATING_DBID =（从V $ DATABASE中选择DBID））;</pre></div>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EFE76B37-D5F0-41E1-B650-3ABA61AF0AD0" title="TDE主加密密钥属性存储有关TDE主加密密钥的信息。">TDE主加密密钥属性管理</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG10333"></a><div class="props_rev_3"><a id="GUID-EBBA92B5-E5D0-43F5-BF55-3B44367F6105" name="GUID-EBBA92B5-E5D0-43F5-BF55-3B44367F6105"></a><h4 id="ASOAG-GUID-EBBA92B5-E5D0-43F5-BF55-3B44367F6105" class="sect4">为报告创建自定义TDE主加密密钥属性</h4>
                  <div>
                     <p>自定义TDE主加密密钥属性使您可以定义特定于您需要的属性。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-2934A241-AB48-4EEF-8A65-3638209931AB">关于创建自定义属性标记</a><br>使用属性标记可以监视用户执行的特定活动，例如访问特定的终端ID。</li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-9D7F2315-0021-4E25-B75A-70C180D88307">创建自定义属性标记</a><br>要创建自定义属性标记，必须使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句的<code class="codeph">SET TAG</code>子句。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-CDF39F23-2371-4E93-A503-25798F1E97E4" title="您可以通过多种方式管理TDE主加密密钥。">管理TDE主加密密钥</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10334"></a><div class="props_rev_3"><a id="GUID-2934A241-AB48-4EEF-8A65-3638209931AB" name="GUID-2934A241-AB48-4EEF-8A65-3638209931AB"></a><h5 id="ASOAG-GUID-2934A241-AB48-4EEF-8A65-3638209931AB" class="sect5">关于创建自定义属性标记</h5>
                     <div>
                        <p>使用属性标记可以监视用户执行的特定活动，例如访问特定的终端ID。</p>
                        <p>默认情况下，Oracle数据库定义一组属性，这些属性描述您创建的TDE主加密密钥的各种特征，例如创建时间，使用TDE主加密密钥的数据库等。这些属性由<code class="codeph">V$ENCRYPTION_KEY</code>动态视图捕获。
                        </p>
                        <p>您可以创建可由<code class="codeph">V$ENCRYPTION_KEYS</code>动态视图的<code class="codeph">TAG</code>列捕获的自定义属性。这使您可以定义可能要监视的行为，例如对加密密钥执行活动的用户。标签可以包含多个属性，例如来自特定终端的会话ID。
                        </p>
                        <p>为TDE主加密密钥创建标记后，其名称应出现在该TDE主加密密钥的<code class="codeph">V$ENCRYPTION_KEYS</code>视图的<code class="codeph">TAG</code>列中。如果为密钥创建标记，则标记将显示在<code class="codeph">V$CLIENT_SECRETS</code>视图的<code class="codeph">SECRET_TAG</code>列中。如果使用标记创建机密，则标记将显示在<code class="codeph">V$CLIENT_SECRETS</code>视图的<code class="codeph">SECRET_TAG</code>列中。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EBBA92B5-E5D0-43F5-BF55-3B44367F6105" title="自定义TDE主加密密钥属性使您可以定义特定于您需要的属性。">为报告创建自定义TDE主加密密钥属性</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10335"></a><div class="props_rev_3"><a id="GUID-9D7F2315-0021-4E25-B75A-70C180D88307" name="GUID-9D7F2315-0021-4E25-B75A-70C180D88307"></a><h5 id="ASOAG-GUID-9D7F2315-0021-4E25-B75A-70C180D88307" class="sect5">创建自定义属性标记</h5>
                     <div>
                        <p>要创建自定义属性标记，必须使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句的<code class="codeph">SET TAG</code>子句。
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>以已被授予<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限的用户身份登录数据库实例。
                                 </p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm输入密码： <span class="italic">password</span>已连接。
</pre></li>
                              <li>
                                 <p>如有必要，请查询<code class="codeph">V$ENCRYPTION_KEY</code>动态视图的<code class="codeph">TAG</code>列，以查找TDE主加密密钥的现有标记列表。
                                 </p>
                                 <p>为TDE主加密密钥创建新标记时，它会覆盖该TDE主加密密钥的现有标记。</p>
                              </li>
                              <li>
                                 <p>使用以下语法创建自定义属性标记：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理SET TAG '标签'已确定BY [外挂<span class="italic">'master_key_identifier'[FORCE</span>密钥库] | <span class="italic">keystore_password</span> ] [WITH BACKUP [使用' <span class="italic">backup_identifier</span> ']];</pre><p>在本说明书中</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="italic"><code class="codeph">tag</code></span>是您定义的关联属性或信息。将此信息用单引号（''）括起来。
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">master_key_identifier</code></span>标识为其设置<span class="italic"><code class="codeph">tag</code></span>的TDE主加密密钥。要查找TDE主加密密钥标识符列表，请查询<code class="codeph">V$ENCRYPTION_KEYS</code>动态视图的<code class="codeph">KEY_ID</code>列。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code>临时打开此操作的受密码保护的密钥库。您必须打开此操作的密钥库。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">IDENTIFIED BY</code>可以是以下设置之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">EXTERNAL STORE</code>使用存储在外部存储中的密钥库密码来执行密钥库操作。
                                             </p>
                                          </li>
                                          <li>
                                             <p><span class="italic"><code class="codeph">keystore_password</code></span>是用于创建密钥库的密码。
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">backup_identifier</code></span>定义标记值。将此设置括在单引号（ <code class="codeph">' '</code> ）中，并用冒号分隔每个值。
                                       </p>
                                    </li>
                                 </ul>
                                 <p>例如，要创建使用两个值的标记，一个用于捕获特定的会话ID，另一个用于捕获特定的终端ID：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理集加密密钥使用标记'sessionid = 3205062574：terminal = xcvt'通过<span class="italic">keystore_password</span> IDENTIFIED WITH BACKUP;密钥库已更改。
</pre><p>会话ID（ <code class="codeph">3205062574</code> ）和终端ID（ <code class="codeph">xcvt</code> ）都可以通过使用带有<code class="codeph">USERENV</code>名称空间的<code class="codeph">SYS_CONTEXT</code>函数或使用<code class="codeph">USERENV</code>函数来派生它们的值。
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EBBA92B5-E5D0-43F5-BF55-3B44367F6105" title="自定义TDE主加密密钥属性使您可以定义特定于您需要的属性。">为报告创建自定义TDE主加密密钥属性</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG9525"></a><div class="props_rev_3"><a id="GUID-FDA3856D-5B88-42FD-A666-BC965C92689C" name="GUID-FDA3856D-5B88-42FD-A666-BC965C92689C"></a><h4 id="ASOAG-GUID-FDA3856D-5B88-42FD-A666-BC965C92689C" class="sect4">在密钥库中设置或重新加密TDE主加密密钥</h4>
                  <div>
                     <p>您可以为软件密钥库和硬件密钥库设置或重新生成TDE主加密密钥。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0A2BDFB2-C190-4513-AF14-03263441D23F">关于在密钥库中设置或重新加密TDE主加密密钥</a><br>您可以为基于软件密码的软件密钥库和硬件密钥库设置或重新生成TDE主加密密钥。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-7465BA4F-79D5-40A7-A2B3-6FB6ACEECE4E">创建，标记和备份TDE主加密密钥</a><br><code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句使您可以创建，标记和备份TDE主加密密钥。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-B788CBF7-DB54-48D4-AB32-7AA06289153B">关于重新加密TDE主加密密钥</a><br>Oracle数据库使用统一的TDE主加密密钥进行TDE列加密和TDE表空间加密。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-A687C8D0-7597-4D92-BB75-CEE35B012970">重新加密TDE主加密密钥</a><br>您可以使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句重新生成TDE主加密密钥。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DFF126F3-6E49-4E98-9846-F4417A665E18">更改表空间的TDE主加密密钥</a><br>您可以使用<code class="codeph">ALTER TABLESPACE</code>语句的<code class="codeph">ENCRYPT</code>和<code class="codeph">REKEY</code>子句来加密表空间。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-CDF39F23-2371-4E93-A503-25798F1E97E4" title="您可以通过多种方式管理TDE主加密密钥。">管理TDE主加密密钥</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10336"></a><div class="props_rev_3"><a id="GUID-0A2BDFB2-C190-4513-AF14-03263441D23F" name="GUID-0A2BDFB2-C190-4513-AF14-03263441D23F"></a><h5 id="ASOAG-GUID-0A2BDFB2-C190-4513-AF14-03263441D23F" class="sect5">关于在密钥库中设置或重新加密TDE主加密密钥</h5>
                     <div>
                        <p>您可以为基于软件密码的软件密钥库和硬件密钥库设置或重新生成TDE主加密密钥。</p>
                        <p>TDE主加密密钥存储在外部安全模块（密钥库）中，用于保护<a href="glossary.html#GUID-78CFC3BC-9BDD-406E-A6E2-2374AC636269"><span class="xrefglossterm">TDE表密钥</span></a>和<a href="glossary.html#GUID-5101B9BB-386F-4826-B639-2BE246A66E90"><span class="xrefglossterm">表空间加密密钥</span></a> 。默认情况下，TDE主加密密钥是由透明数据加密（TDE）创建的系统生成的随机值。
                        </p>
                        <p>使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句设置或重置（ <code class="codeph">REKEY</code> ）TDE主加密密钥。设置主加密密钥后，则认为TDE已启用且无法禁用。
                        </p>
                        <p>在加密或解密数据库列或表空间之前，必须生成TDE主加密密钥。Oracle数据库对TDE列加密和TDE表空间加密使用相同的TDE主加密密钥。设置软件或硬件TDE主加密密钥的说明解释了如何生成tDE主加密密钥。</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-15E41F0A-5D80-4A7A-88F6-30EE86FA44E8" title="密钥库打开后，您可以为其设置TDE主加密密钥。">步骤4：在软件密钥库中设置TDE主加密密钥</a></li>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-96BEF7DD-2B37-48F2-9651-38059DE499C5" title="打开硬件密钥库后，即可设置硬件密钥库TDE主加密密钥。">步骤4：设置硬件密钥库TDE主加密密钥</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FDA3856D-5B88-42FD-A666-BC965C92689C" title="您可以为软件密钥库和硬件密钥库设置或重新生成TDE主加密密钥。">在密钥库中设置或重新加密TDE主加密密钥</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG9526"></a><div class="props_rev_3"><a id="GUID-7465BA4F-79D5-40A7-A2B3-6FB6ACEECE4E" name="GUID-7465BA4F-79D5-40A7-A2B3-6FB6ACEECE4E"></a><h5 id="ASOAG-GUID-7465BA4F-79D5-40A7-A2B3-6FB6ACEECE4E" class="sect5">创建，标记和备份TDE主加密密钥</h5>
                     <div>
                        <p><code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句使您可以创建，标记和备份TDE主加密密钥。
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>以已被授予<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限的用户身份登录数据库实例。
                                 </p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm输入密码： <span class="italic">password</span>已连接。
</pre></li>
                              <li>
                                 <p>使用以下语法创建并备份TDE主加密密钥并应用标记：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理集加密密钥[使用标记' <span class="italic">标记</span> '] [FORCE KEYSTORE]由[EXTERNAL STORE | <span class="italic">keystore_password</span> ] WITH BACKUP [使用' <span class="italic">backup_identifier</span> '];</pre><p>在本规范中：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="italic"><code class="codeph">tag</code></span>是您要创建的标记。将此标记括在单引号（ <code class="codeph">' '</code> ）中。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code>临时打开此操作的受密码保护的密钥库。您必须打开此操作的密钥库。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">IDENTIFIED BY</code>可以是以下设置之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">EXTERNAL STORE</code>使用存储在外部存储中的密钥库密码来执行密钥库操作。
                                             </p>
                                          </li>
                                          <li>
                                             <p><span class="italic"><code class="codeph">keystore_password</code></span>是<span class="italic"><code class="codeph">software_keystore_password</code></span>或<span class="italic"><code class="codeph">hardware_keystore_credentials</code></span> 。与软件密码一样，它区分大小写。您必须将密码字符串括在双引号（ <code class="codeph">" "</code> ）中。单独<span class="italic"><code class="codeph">user_name</code></span>和<span class="italic"><code class="codeph">password</code></span>以冒号（ <code class="codeph">:</code> ）。
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><code class="codeph">WITH BACKUP</code>将TDE主加密密钥备份到与密钥相同的位置，由<code class="codeph">V$ENCRYPTION_WALLET</code>视图的<code class="codeph">WRL_PARAMETER</code>列标识。要查找所有数据库实例的<code class="codeph">WRL_PARAMETER</code>值，请查询<code class="codeph">GV$ENCRYPTION_WALLET</code>视图。
                                       </p>
                                       <p>您必须备份基于密码的软件密钥库。您无需将其用于自动登录或本地自动登录软件密钥库。（可选）包括<code class="codeph">USING</code> <span class="italic"><code class="codeph">backup_identifier</code></span>子句以添加备份的描述。将此标识符括在单引号（ <code class="codeph">' '</code> ）中。
                                       </p>
                                    </li>
                                 </ul>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理设置密钥使用标记'备份'通过<span class="italic">密码</span> IDENTIFIED使用BACKUP使用'hr.emp_key_backup';密钥库已更改。
</pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>Oracle数据库使用初始化参数文件中<code class="codeph">WALLET_ROOT</code>参数指定的密钥库位置中的密钥库来存储TDE主加密密钥。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EBBA92B5-E5D0-43F5-BF55-3B44367F6105" title="自定义TDE主加密密钥属性使您可以定义特定于您需要的属性。">为报告创建自定义TDE主加密密钥属性</a></li>
                              <li><a href="using-sqlnet-ora-to-configure-tde-keystores.html#GUID-DF9504EF-BA08-4585-895D-2E5F4BA30E50" title="Oracle建议您使用WALLET_ROOT和TDE_CONFIGURATION参数来配置密钥库位置，但另一种方法是配置sqlnet.ora文件。">关于sqlnet.ora文件中的密钥库位置</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FDA3856D-5B88-42FD-A666-BC965C92689C" title="您可以为软件密钥库和硬件密钥库设置或重新生成TDE主加密密钥。">在密钥库中设置或重新加密TDE主加密密钥</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG9527"></a><div class="props_rev_3"><a id="GUID-B788CBF7-DB54-48D4-AB32-7AA06289153B" name="GUID-B788CBF7-DB54-48D4-AB32-7AA06289153B"></a><h5 id="ASOAG-GUID-B788CBF7-DB54-48D4-AB32-7AA06289153B" class="sect5">关于重新加密TDE主加密密钥</h5>
                     <div>
                        <p>Oracle数据库使用统一的TDE主加密密钥进行TDE列加密和TDE表空间加密。</p>
                        <p>当您为TDE列加密重新生成TDE主加密密钥时，TDE表空间加密的TDE主加密密钥也会重新生成密钥。仅在TDE主加密密钥被泄露或根据组织的安全策略时才重新生成密钥。此过程将停用先前的TDE主加密密钥。</p>
                        <p>为了更好的安全性并满足合规性规定，请定期重新生成TDE主加密密钥。此过程取消激活先前的TDE主加密密钥，创建新的TDE主加密密钥，然后激活它。您可以通过查询<code class="codeph">V$ENCRYPTION_KEYS</code>视图中的<code class="codeph">CREATION_TIME</code>列来检查最近创建的密钥。要查找最近激活的键，请在<code class="codeph">V$ENCRYPTION_KEYS</code>视图中查询<code class="codeph">ACTIVATION_TIME</code>列。
                        </p>
                        <p>您无法更改TDE主加密密钥或重新生成自动登录密钥库的TDE主加密密钥。由于自动登录密钥库没有密码，因此管理员或特权用户可以在不知道安全主管的情况下更改密钥。但是，如果自动登录和基于密码的密钥库都存在于配置的位置（如<code class="codeph">sqlnet.ora</code>文件中所设置），则当您重新生成TDE主加密密钥时，会向两者添加TDE主加密密钥。自动登录和基于密码的密钥库。如果自动登录密钥库的使用位置与基于密码的密钥库的位置不同，则必须重新创建自动登录密钥库。
                        </p>
                        <p>不要在联机表空间重定密钥操作的同时执行主密钥的重定密钥操作。您可以通过发出以下查询来查找在线表空间是否正在成为TDE主加密密钥的过程中：</p><pre class="oac_no_warn" dir="ltr">从V $ ENCRYPTED_TABLESPACES中选择TS＃，ENCRYPTIONALG，STATUS;</pre><p><code class="codeph">REKEYING</code>状态意味着仍在重新键入相应的表空间。
                        </p>
                        <div class="infoboxnote" id="GUID-B788CBF7-DB54-48D4-AB32-7AA06289153B__GUID-6B7DA46C-91A3-432C-A581-98A75E927FFE">
                           <p class="notep1">注意：</p>
                           <p>您无法单独向自动登录密钥库添加新信息。</p>
                        </div>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FDA3856D-5B88-42FD-A666-BC965C92689C" title="您可以为软件密钥库和硬件密钥库设置或重新生成TDE主加密密钥。">在密钥库中设置或重新加密TDE主加密密钥</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10541"></a><div class="props_rev_3"><a id="GUID-A687C8D0-7597-4D92-BB75-CEE35B012970" name="GUID-A687C8D0-7597-4D92-BB75-CEE35B012970"></a><h5 id="ASOAG-GUID-A687C8D0-7597-4D92-BB75-CEE35B012970" class="sect5">重新加密TDE主加密密钥</h5>
                     <div>
                        <p>您可以使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句重新生成TDE主加密密钥。
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>以已被授予<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限的用户身份登录数据库实例。
                                 </p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm输入密码： <span class="italic">password</span>已连接。
</pre></li>
                              <li>
                                 <p>如果要为启用了自动登录的密钥库重新加密TDE主加密密钥，请确保存在由<code class="codeph">.sso</code>文件标识的自动登录密钥库和<code class="codeph">.p12</code>文件标识的加密密钥库。
                                 </p>
                                 <p>您可以通过查询<code class="codeph">V$ENCRYPTION_WALLET</code>视图的<code class="codeph">WRL_PARAMETER</code>列来查找这些文件的位置。要查找所有数据库实例的<code class="codeph">WRL_PARAMETER</code>值，请查询<code class="codeph">GV$ENCRYPTION_WALLET</code>视图。
                                 </p>
                              </li>
                              <li>
                                 <p>使用以下语法重新生成TDE主加密密钥：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理集[加密]密钥[FORCE KEYSTORE] [使用标记' <span class="italic">tag_name</span> ']由[EXTERNAL STORE | <span class="italic">keystore_password</span> ] [WITH BACKUP [使用' <span class="italic">backup_identifier</span> ']];</pre><p>在本规范中：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="italic"><code class="codeph">tag</code></span>是您定义的关联属性和信息。将此设置括在单引号（ <code class="codeph">' '</code> ）中。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code>临时打开此操作的受密码保护的密钥库。您必须打开此操作的密钥库。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">IDENTIFIED BY</code>可以是以下设置之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">EXTERNAL STORE</code>使用存储在外部存储中的密钥库密码来执行密钥库操作。
                                             </p>
                                          </li>
                                          <li>
                                             <p><span class="italic"><code class="codeph">keystore_password</code></span>是您在<a href="configuring-transparent-data-encryption.html#GUID-F098129B-BBFF-4C86-B119-80AB706DB2A1" title="为软件密钥库指定目录位置后，可以创建密钥库。">步骤2：创建软件密钥</a>库中创建密钥库时创建的必需密钥库密码。
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><code class="codeph">WITH BACKUP</code>创建密钥库的备份。您必须将此选项用于基于密码和硬件的密钥库。（可选）您可以使用<code class="codeph">USING</code>子句添加备份的简要说明。将此描述括在单引号（ <code class="codeph">' '</code> ）中。此标识符附加到指定的密钥库文件（例如， <code class="codeph">ewallet_</code> <span class="italic"><code class="codeph">time-stamp</code></span> <code class="codeph">_emp_key_backup.p12</code> ）。遵循操作系统使用的文件命名约定。
                                       </p>
                                    </li>
                                 </ul>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理设置密钥强制关键字由<span class="italic">keystore_password</span>标识，带有备份使用'emp_key_backup';密钥库已更改。
</pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-37296947-18DB-4CFA-A112-794A55E942E2" title="根据您创建的密钥库的类型，您必须先手动打开密钥库，然后才能使用它。">第3步：打开软件密钥库</a></li>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-4FBC5088-A045-4306-88C0-FEBC07CA18AC" title="配置硬件安全模块后，必须先打开硬件密钥库，然后才能使用它。">第3步：打开硬件密钥库</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FDA3856D-5B88-42FD-A666-BC965C92689C" title="您可以为软件密钥库和硬件密钥库设置或重新生成TDE主加密密钥。">在密钥库中设置或重新加密TDE主加密密钥</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-DFF126F3-6E49-4E98-9846-F4417A665E18" name="GUID-DFF126F3-6E49-4E98-9846-F4417A665E18"></a><h5 id="ASOAG-GUID-DFF126F3-6E49-4E98-9846-F4417A665E18" class="sect5">更改表空间的TDE主加密密钥</h5>
                     <div>
                        <p>您可以使用<code class="codeph">ALTER TABLESPACE</code>语句的<code class="codeph">ENCRYPT</code>和<code class="codeph">REKEY</code>子句来加密表空间。
                        </p>
                        <ol>
                           <li class="stepexpand"><span>确保表空间以读写模式打开。</span><div>
                                 <p>您可以查询<code class="codeph">V$INSTANCE</code>动态视图的<code class="codeph">STATUS</code>列以查找数据库是否已打开以及<code class="codeph">V$DATABASE</code>视图的<code class="codeph">OPEN_MODE</code>列以查找它是否处于读写模式。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>如有必要，请以读写模式打开数据库。</span><div><pre class="oac_no_warn" dir="ltr">ALTER DATABASE OPEN READ WRITE;</pre></div>
                           </li>
                           <li class="stepexpand"><span>运行<code class="codeph">ALTER TABLESPACE</code> SQL语句以加密表空间。</span><div>
                                 <p>如果表空间尚未加密，则使用<code class="codeph">ENCRYPT</code>子句：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE使用'AES256'ENCRYPT加密加密加密;</pre><p>要更改<code class="codeph">SYSTEM</code> ， <code class="codeph">SYSAUX</code>或<code class="codeph">UNDO</code>表空间的加密，必须在线重新键入表空间。使用<code class="codeph">ONLINE</code>和<code class="codeph">REKEY</code>子句。例如，要更改<code class="codeph">SYSTEM</code>表空间的加密算法：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE系统使用'AES256'REKEY在线加密;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-16AD6D1C-F7BB-42DC-A392-B7C128BC054C" title="您可以在联机时加密，解密或重新密钥现有用户表空间以及SYSTEM，SYSAUX和UNDO表空间。">关于现有联机表空间的加密转换</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FDA3856D-5B88-42FD-A666-BC965C92689C" title="您可以为软件密钥库和硬件密钥库设置或重新生成TDE主加密密钥。">在密钥库中设置或重新加密TDE主加密密钥</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div><a id="ASOAG10330"></a><div class="props_rev_3"><a id="GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F" name="GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F"></a><h4 id="ASOAG-GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F" class="sect4">导出和导入TDE主加密密钥</h4>
                  <div>
                     <p>您可以以不同方式导出和导入TDE主加密密钥。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-7EFED8DE-8586-417C-A192-FF5232FD1A73">关于导出和导入TDE主加密密钥</a><br>Oracle数据库功能（如可传输表空间和Oracle Data Pump）可以移动可能在数据库之间加密的数据。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-E2BDCF92-CFAA-42E6-86D7-05A3E76C9260">关于导出TDE主加密密钥</a><br>您可以使用<code class="codeph">ADMINISTER KEY MANAGEMENT EXPORT</code>从密钥库导出TDE主加密密钥，然后将它们导入另一个密钥库。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-1F87839D-4D04-4752-A62E-399EFAD7E46E">导出TDE主加密密钥</a><br>带有<code class="codeph">EXPORT [ENCRYPTION] KEYS WITH SECRET</code>子句的<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句<code class="codeph">EXPORT [ENCRYPTION] KEYS WITH SECRET</code> TDE主加密密钥。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-9BB20801-FE2D-468D-B59F-6C3463029E3C">示例：使用子查询导出TDE主加密密钥</a><br><code class="codeph">ADMINISTER KEY MANAGEMENT EXPORT ENCRYPTION KEYS</code>语句可以使用子查询导出TDE主加密密钥。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-8541C442-4819-45EB-A63F-F08273EDBFA3">示例：将TDE主加密密钥标识符列表导出到文件</a><br>具有<code class="codeph">ADMINISTER KEY MANAGEMENT EXPORT ENCRYPTION KEYS WITH SECRET</code>语句的<code class="codeph">ADMINISTER KEY MANAGEMENT EXPORT ENCRYPTION KEYS WITH SECRET</code>可以将TDE主加密密钥标识符列表导出到文件。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-3E44E073-E1C3-4F04-9F3A-6B98D1A5FB49">示例：导出数据库的所有TDE主加密密钥</a><br><code class="codeph">ADMINISTER KEY MANAGEMENT EXPORT ENCRYPTION KEYS</code> SQL语句可以导出数据库的所有TDE主加密密钥。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-E72639A8-43B7-4EAC-B0F9-85DF4A714E3A">关于导入TDE主加密密钥</a><br><code class="codeph">ADMINISTER KEY MANAGEMENT IMPORT</code>语句可以将导出的TDE主加密密钥从密钥导出文件导入目标密钥库。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-76D1E67E-DC61-42B5-A8BF-8CA420307B52">导入TDE主加密密钥</a><br>具有<code class="codeph">IMPORT [ENCRYPTION] KEYS WITH SECRET</code>子句的<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句可以导入TDE主加密密钥。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0096C965-552F-4BB9-8B42-32D446D91887">示例：导入TDE主加密密钥</a><br>您可以使用<span class="apiname" translate="no">ADMINISTER KEY MANAGEMENT IMPORT KEYS</span> SQL语句导入TDE主加密密钥。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-3988C759-E1DA-4385-91B9-A8F1215128B4">密钥库合并如何与TDE主加密密钥导出或导入不同</a><br>密钥库合并操作与TDE主加密密钥导出和导入操作不同。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-CDF39F23-2371-4E93-A503-25798F1E97E4" title="您可以通过多种方式管理TDE主加密密钥。">管理TDE主加密密钥</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10423"></a><div class="props_rev_3"><a id="GUID-7EFED8DE-8586-417C-A192-FF5232FD1A73" name="GUID-7EFED8DE-8586-417C-A192-FF5232FD1A73"></a><h5 id="ASOAG-GUID-7EFED8DE-8586-417C-A192-FF5232FD1A73" class="sect5">关于导出和导入TDE主加密密钥</h5>
                     <div>
                        <p>Oracle数据库功能（如可传输表空间和Oracle Data Pump）可以移动可能在数据库之间加密的数据。</p>
                        <p>这些是一些常见的方案，您可以选择导出和导入TDE主加密密钥以在源密钥库和目标密钥库之间移动它们。对于Data Guard（逻辑备用），必须将主数据库中的密钥库复制到备用数据库。您可以导出正在使用的TDE主加密密钥，然后将其导入备用数据库，而不是将主数据库密钥库与备用数据库合并。移动在数据库之间加密的可传输表空间要求您在源数据库中导出TDE主加密密钥，然后将其导入目标数据库。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F" title="您可以以不同方式导出和导入TDE主加密密钥。">导出和导入TDE主加密密钥</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10424"></a><div class="props_rev_3"><a id="GUID-E2BDCF92-CFAA-42E6-86D7-05A3E76C9260" name="GUID-E2BDCF92-CFAA-42E6-86D7-05A3E76C9260"></a><h5 id="ASOAG-GUID-E2BDCF92-CFAA-42E6-86D7-05A3E76C9260" class="sect5">关于导出TDE主加密密钥</h5>
                     <div>
                        <p>您可以使用<code class="codeph">ADMINISTER KEY MANAGEMENT EXPORT</code>从密钥库导出TDE主加密密钥，然后将它们导入另一个密钥库。
                        </p>
                        <p>TDE主加密密钥与其密钥标识符和密钥属性一起导出。导出的密钥在导出文件中使用密码（机密）进行保护。</p>
                        <p>您可以使用<code class="codeph">ADMINSITER KEY MANAGENT EXPORT</code>语句的<code class="codeph">WITH IDENTIFIER</code>子句指定要导出的TDE主加密密钥。要导出TDE主加密密钥，您可以将其密钥标识符指定为以逗号分隔的列表，也可以指定枚举其密钥标识符的查询。请注意，Oracle数据库执行查询，确定当前用户权限内的密钥标识符，而不是定义者的权限。
                        </p>
                        <p>如果省略<code class="codeph">WITH IDENTIFER</code>子句，则导出数据库的所有TDE主加密密钥。
                        </p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-3592D355-F190-4A6F-BF1D-00ABCC0E02BE" title="在隔离模式下，ADMINISTER KEY MANAGEMENT EXPORT的EXPORT和IMPORT子句可以导出或导入PDB的主加密密钥。">在隔离模式下导出和导入PDB的主加密密钥</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F" title="您可以以不同方式导出和导入TDE主加密密钥。">导出和导入TDE主加密密钥</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10522"></a><div class="props_rev_3"><a id="GUID-1F87839D-4D04-4752-A62E-399EFAD7E46E" name="GUID-1F87839D-4D04-4752-A62E-399EFAD7E46E"></a><h5 id="ASOAG-GUID-1F87839D-4D04-4752-A62E-399EFAD7E46E" class="sect5">导出TDE主加密密钥</h5>
                     <div>
                        <p>带有<code class="codeph">EXPORT [ENCRYPTION] KEYS WITH SECRET</code>子句的<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句<code class="codeph">EXPORT [ENCRYPTION] KEYS WITH SECRET</code> TDE主加密密钥。
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>以已被授予<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限的用户身份登录数据库实例。
                                 </p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm输入密码： <span class="italic">password</span>已连接。
</pre></li>
                              <li>
                                 <p>使用以下语法导出TDE主加密密钥：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理导出[加密]密钥与“外部商店”识别的“ <span class="italic">export_secret</span> ”到' <span class="italic">file_path</span> '[FORCE KEYSTORE] <span class="italic">keystore_password</span> ] [WITH IDENTIFIER <span class="italic">IN'key_id1</span> '，' <span class="italic">key_id2</span> '，' <span class="italic">key_idn</span> '| （ <span class="italic">SQL_query</span> ）];</pre><p>在本规范中：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="italic"><code class="codeph">export_secret</code></span>是一个密码，您可以指定该密码来加密导出包含导出密钥的文件。用双引号（“”）括起这个秘密，或者如果秘密没有空格，你可以省略引号。
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">file_path</code></span>是必须将密钥导出到的文件的完整路径和名称。将此路径括在单引号（ <code class="codeph">' ')</code> 。您只能导出到常规文件系统。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code>临时打开此操作的受密码保护的密钥库。您必须打开此操作的密钥库。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">IDENTIFIED BY</code>可以是以下设置之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">EXTERNAL STORE</code>使用存储在外部存储中的密钥库密码来执行密钥库操作。
                                             </p>
                                          </li>
                                          <li>
                                             <p><span class="italic"><code class="codeph">software_keystore_password</code></span>是包含密钥的密钥库的密码。
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">key_id1</code></span> ， <span class="italic"><code class="codeph">key_id2</code></span> ， <span class="italic"><code class="codeph">key_idn</code></span>是用于导出的TDE主加密密钥的一个或多个TDE主加密密钥标识符的字符串。用逗号分隔每个密钥标识符，并将每个密钥标识符用单引号（ <code class="codeph">' '</code> ）括起来。要查找TDE主加密密钥标识符列表，请查询<code class="codeph">V$ENCRYPTION_KEYS</code>动态视图的<code class="codeph">KEY_ID</code>列。
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">SQL_query</code></span>是一个获取TDE主加密密钥标识符列表的查询。它应该只返回一个包含TDE主加密密钥标识符的列。使用当前用户权限执行此查询。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-37296947-18DB-4CFA-A112-794A55E942E2" title="根据您创建的密钥库的类型，您必须先手动打开密钥库，然后才能使用它。">第3步：打开软件密钥库</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F" title="您可以以不同方式导出和导入TDE主加密密钥。">导出和导入TDE主加密密钥</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10426"></a><a id="ASOAG10523"></a><div class="props_rev_3"><a id="GUID-9BB20801-FE2D-468D-B59F-6C3463029E3C" name="GUID-9BB20801-FE2D-468D-B59F-6C3463029E3C"></a><h5 id="ASOAG-GUID-9BB20801-FE2D-468D-B59F-6C3463029E3C" class="sect5">示例：使用子查询导出TDE主加密密钥</h5>
                     <div>
                        <p><code class="codeph">ADMINISTER KEY MANAGEMENT EXPORT ENCRYPTION KEYS</code>语句可以使用子查询导出TDE主加密密钥。
                        </p>
                        <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-8541C442-4819-45EB-A63F-F08273EDBFA3__CIHEHFIH">例4-5</a>显示了如何将查询提取标识符的TDE主加密密钥导出到名为<code class="codeph">export.exp</code>的文件中。文件中的TDE主加密密钥使用秘密<code class="codeph">my_secret</code>加密。<code class="codeph">SELECT</code>语句查找要导出的TDE主加密密钥的标识符。
                        </p>
                        <div class="example" id="GUID-9BB20801-FE2D-468D-B59F-6C3463029E3C__CIHHCDBI">
                           <p class="titleinexample">示例4-4将TDE主加密密钥标识符列表导出到文件</p><pre class="oac_no_warn" dir="ltr">ADMINISTER WITH SECRET “my_secret”与标识符'AdoxnJ0uH08cv7xkz83ovwsAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'， 'AW5z3CoyKE / yv3cNT5CWCXUAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' IDENTIFIED BY <span class="italic">密码</span> '/TDE/export.exp' FORCE密钥库密钥管理输出加密密钥;密钥库已更改。
</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F" title="您可以以不同方式导出和导入TDE主加密密钥。">导出和导入TDE主加密密钥</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10425"></a><div class="props_rev_3"><a id="GUID-8541C442-4819-45EB-A63F-F08273EDBFA3" name="GUID-8541C442-4819-45EB-A63F-F08273EDBFA3"></a><h5 id="ASOAG-GUID-8541C442-4819-45EB-A63F-F08273EDBFA3" class="sect5">示例：将TDE主加密密钥标识符列表导出到文件</h5>
                     <div>
                        <p>具有<code class="codeph">ADMINISTER KEY MANAGEMENT EXPORT ENCRYPTION KEYS WITH SECRET</code>语句的<code class="codeph">ADMINISTER KEY MANAGEMENT EXPORT ENCRYPTION KEYS WITH SECRET</code>可以将TDE主加密密钥标识符列表导出到文件。
                        </p>
                        <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-9BB20801-FE2D-468D-B59F-6C3463029E3C__CIHHCDBI">例4-4</a>显示了如何通过将名称标识符作为列表指定到<code class="codeph">export.exp</code>文件来导出TDE主加密密钥。文件中的TDE主加密密钥使用秘密<code class="codeph">my_secret</code>加密。要导出的TDE主加密密钥的标识符以逗号分隔列表的形式提供。
                        </p>
                        <div class="example" id="GUID-8541C442-4819-45EB-A63F-F08273EDBFA3__CIHEHFIH">
                           <p class="titleinexample">示例4-5使用子查询导出TDE主加密密钥标识符</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理导出加密密钥与秘密“my_secret”TO“/etc/TDE/export.exp”FORCE KEYSTORE由IDENTIFIER IN识别<span class="italic">密码</span> （从V $ ENCRYPTION_KEYS中选择KEY_ID，其中ROWNUM &lt;3）;密钥库已更改。
</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F" title="您可以以不同方式导出和导入TDE主加密密钥。">导出和导入TDE主加密密钥</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10524"></a><div class="props_rev_3"><a id="GUID-3E44E073-E1C3-4F04-9F3A-6B98D1A5FB49" name="GUID-3E44E073-E1C3-4F04-9F3A-6B98D1A5FB49"></a><h5 id="ASOAG-GUID-3E44E073-E1C3-4F04-9F3A-6B98D1A5FB49" class="sect5">示例：导出数据库的所有TDE主加密密钥</h5>
                     <div>
                        <p><code class="codeph">ADMINISTER KEY MANAGEMENT EXPORT ENCRYPTION KEYS</code> SQL语句可以导出数据库的所有TDE主加密密钥。
                        </p>
                        <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-3E44E073-E1C3-4F04-9F3A-6B98D1A5FB49__BGBGDDCG">例4-6</a>显示了如何将数据库的所有TDE主加密密钥导出到名为<code class="codeph">export.exp</code>的文件中。文件中的TDE主加密密钥使用秘密<code class="codeph">my_secret</code>加密。
                        </p>
                        <div class="example" id="GUID-3E44E073-E1C3-4F04-9F3A-6B98D1A5FB49__BGBGDDCG">
                           <p class="titleinexample">示例4-6导出数据库的所有TDE主加密密钥</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理导出加密密钥与秘密“my_secret”TO“/etc/TDE/export.exp”FORCE KEYSTORE IDENTIFIED BY password;密钥库已更改。</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F" title="您可以以不同方式导出和导入TDE主加密密钥。">导出和导入TDE主加密密钥</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10427"></a><div class="props_rev_3"><a id="GUID-E72639A8-43B7-4EAC-B0F9-85DF4A714E3A" name="GUID-E72639A8-43B7-4EAC-B0F9-85DF4A714E3A"></a><h5 id="ASOAG-GUID-E72639A8-43B7-4EAC-B0F9-85DF4A714E3A" class="sect5">关于导入TDE主加密密钥</h5>
                     <div>
                        <p><code class="codeph">ADMINISTER KEY MANAGEMENT IMPORT</code>语句可以将导出的TDE主加密密钥从密钥导出文件导入目标密钥库。
                        </p>
                        <p>您无法重新导入已导入的TDE主加密密钥。</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="managing-keystores-encryption-keys-in-isolated-mode.html#GUID-3592D355-F190-4A6F-BF1D-00ABCC0E02BE" title="在隔离模式下，ADMINISTER KEY MANAGEMENT EXPORT的EXPORT和IMPORT子句可以导出或导入PDB的主加密密钥。">在隔离模式下导出和导入PDB的主加密密钥</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F" title="您可以以不同方式导出和导入TDE主加密密钥。">导出和导入TDE主加密密钥</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10525"></a><div class="props_rev_3"><a id="GUID-76D1E67E-DC61-42B5-A8BF-8CA420307B52" name="GUID-76D1E67E-DC61-42B5-A8BF-8CA420307B52"></a><h5 id="ASOAG-GUID-76D1E67E-DC61-42B5-A8BF-8CA420307B52" class="sect5">导入TDE主加密密钥</h5>
                     <div>
                        <p>具有<code class="codeph">IMPORT [ENCRYPTION] KEYS WITH SECRET</code>子句的<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句可以导入TDE主加密密钥。
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>以已被授予<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限的用户身份登录数据库实例。
                                 </p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm输入密码： <span class="italic">password</span>已连接。
</pre></li>
                              <li>
                                 <p>运行以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理导入[加密]密钥“ <span class="italic">admin_secret</span> ”FROM“ <span class="italic">file_name</span> ”[FORCE KEYSTORE]由[EXTERNAL STORE | <span class="italic">keystore_password</span> ] [WITH BACKUP [使用' <span class="italic">backup_identifier</span> ']];</pre><p>在本规范中：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="italic"><code class="codeph">import_secret</code></span>与导出操作期间用于加密密钥的密码相同。用双引号（“”）括起这个秘密，或者如果秘密没有空格，你可以省略引号。
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">file_name</code></span>是需要从中导入密钥的文件的完整路径和名称。将此设置括在单引号（ <code class="codeph">' '</code> ）中。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code>临时打开此操作的受密码保护的密钥库。您必须打开此操作的密钥库。
                                       </p>
                                       <p></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">IDENTIFIED BY</code>可以是以下设置之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">EXTERNAL STORE</code>使用存储在外部存储中的密钥库密码来执行密钥库操作。
                                             </p>
                                          </li>
                                          <li>
                                             <p><span class="italic"><code class="codeph">software_keystore_password</code></span>是导入密钥的软件密钥库的密码。
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p>如果在导入操作之前未备份目标密钥库，则必须使用<code class="codeph">WITH BACKUP</code> 。 <span class="italic"><code class="codeph">backup_identifier</code></span>是一个可选字符串，您可以提供该字符串以标识密钥库备份。将此设置括在单引号（ <code class="codeph">' '</code> ）中。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-37296947-18DB-4CFA-A112-794A55E942E2" title="根据您创建的密钥库的类型，您必须先手动打开密钥库，然后才能使用它。">第3步：打开软件密钥库</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F" title="您可以以不同方式导出和导入TDE主加密密钥。">导出和导入TDE主加密密钥</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10428"></a><a id="ASOAG10526"></a><div class="props_rev_3"><a id="GUID-0096C965-552F-4BB9-8B42-32D446D91887" name="GUID-0096C965-552F-4BB9-8B42-32D446D91887"></a><h5 id="ASOAG-GUID-0096C965-552F-4BB9-8B42-32D446D91887" class="sect5">示例：导入TDE主加密密钥</h5>
                     <div>
                        <p>您可以使用<span class="apiname" translate="no">ADMINISTER KEY MANAGEMENT IMPORT KEYS</span> SQL语句导入TDE主加密密钥。
                        </p>
                        <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0096C965-552F-4BB9-8B42-32D446D91887__CIHEAHBC">例4-7</a>显示了如何导入存储在文件<code class="codeph">export.exp</code>并使用秘密<code class="codeph">my_secret</code>加密的TDE主加密密钥标识符。
                        </p>
                        <div class="example" id="GUID-0096C965-552F-4BB9-8B42-32D446D91887__CIHEAHBC">
                           <p class="titleinexample">示例4-7从导出文件导入TDE主加密密钥标识符</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理导入密钥与秘密“my_secret”FROM'/etc/TDE/export.exp'FORCE KEYSTORE IDENTIFIED由<span class="italic">密码</span> WITH BACKUP;密钥库已更改。</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F" title="您可以以不同方式导出和导入TDE主加密密钥。">导出和导入TDE主加密密钥</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10527"></a><div class="props_rev_3"><a id="GUID-3988C759-E1DA-4385-91B9-A8F1215128B4" name="GUID-3988C759-E1DA-4385-91B9-A8F1215128B4"></a><h5 id="ASOAG-GUID-3988C759-E1DA-4385-91B9-A8F1215128B4" class="sect5">密钥库合并如何与TDE主加密密钥导出或导入不同</h5>
                     <div>
                        <p>密钥库合并操作与TDE主加密密钥导出和导入操作不同。</p>
                        <p>即使<code class="codeph">ADMINISTER KEY MANAGEMENT MERGE</code>语句和<code class="codeph">ADMINISTER KEY MANAGEMENT EXPORT</code>和<code class="codeph">IMPORT</code>语句最终都将TDE主加密密钥从一个密钥库移动到下一个密钥库，但这两个语句的运行方式也存在差异。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">MERGE</code>语句合并两个密钥库，而<code class="codeph">EXPORT</code>和<code class="codeph">IMPORT</code>语句将密钥导出到文件或从文件导入密钥。密钥库与导出文件不同，两者不能互换使用。导出文件不是密钥库，无法配置为与数据库一起用作密钥库。同样， <code class="codeph">IMPORT</code>语句无法从密钥库中提取TDE主加密密钥。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">MERGE</code>语句合并指定密钥库的所有TDE主加密密钥，因为<code class="codeph">EXPORT</code>和<code class="codeph">IMPORT</code>语句可以是选择性的。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">EXPORT</code>和<code class="codeph">IMPORT</code>语句要求用户提供导出文件的位置（文件<code class="codeph">filepath</code> ）和文件名，而<code class="codeph">MERGE</code>语句仅接受密钥库的位置。
                              </p>
                           </li>
                           <li>
                              <p>密钥库的文件名是固定的，由<code class="codeph">MERGE</code>操作决定，可以是<code class="codeph">ewallet.p12</code>或<code class="codeph">cwallet.sso</code> 。<code class="codeph">EXPORT</code> <code class="codeph">IMPORT</code>语句中使用的导出文件的文件名由用户指定。
                              </p>
                           </li>
                           <li>
                              <p>自动存储管理（ASM）磁盘组或常规文件系统上的密钥库可以与<code class="codeph">MERGE</code>语句合并。<code class="codeph">EXPORT</code>和<code class="codeph">IMPORT</code>语句中使用的导出文件只能是常规操作系统文件，不能位于ASM磁盘组中。
                              </p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">MERGE</code>语句合并的密钥库不需要配置或与数据库一起使用。<code class="codeph">EXPORT</code>语句只能从已配置和与数据库一起使用的密钥库中导出密钥，并且在导出完成时也会打开。<code class="codeph">IMPORT</code>语句只能将密钥导入到打开，配置和与数据库一起使用的密钥库中。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">MERGE</code>语句永远不会修改与TDE主加密密钥关联的元数据。<code class="codeph">EXPORT</code>和<code class="codeph">IMPORT</code>操作可以在需要时修改TDE主加密密钥的元数据，例如在PDB插件操作期间。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-85A465EB-50E2-482C-8AC5-851436AB8F8F" title="您可以以不同方式导出和导入TDE主加密密钥。">导出和导入TDE主加密密钥</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG10608"></a><div class="props_rev_3"><a id="GUID-48512BB6-C588-4704-B2BD-22606C0F05BC" name="GUID-48512BB6-C588-4704-B2BD-22606C0F05BC"></a><h4 id="ASOAG-GUID-48512BB6-C588-4704-B2BD-22606C0F05BC" class="sect4">使用Oracle Key Vault管理TDE主加密密钥</h4>
                  <div>
                     <p>您可以使用Oracle Key Vault在整个企业中管理和共享TDE主加密密钥。</p>
                     <p>Oracle Key Vault将密钥安全地存储在中央存储库中，以及其他安全对象（如凭证文件和Java密钥库），并使您可以与其他启用TDE的数据库共享这些对象。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-83DE1475-04DD-4B85-9CFA-D00AB0013EC8" title="您可以使用Oracle Key Vault将软件和硬件密钥库迁移到Oracle Key Vault或从Oracle Key Vault迁移。">从Key Key Vault迁移密钥库</a></li>
                           <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/asoag&amp;id=OKVAG10693" target="_blank"><span><cite>Oracle Key Vault管理员指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-CDF39F23-2371-4E93-A503-25798F1E97E4" title="您可以通过多种方式管理TDE主加密密钥。">管理TDE主加密密钥</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="ASOAG10398"></a><div class="props_rev_3"><a id="GUID-FF270B27-A456-477A-81E0-50E74926A810" name="GUID-FF270B27-A456-477A-81E0-50E74926A810"></a><h3 id="ASOAG-GUID-FF270B27-A456-477A-81E0-50E74926A810" class="sect3">存储Oracle数据库的秘密</h3>
               <div>
                  <p>秘密是支持内部Oracle数据库功能的数据，这些功能将外部客户端（如Oracle GoldenGate）集成到数据库中。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-F35ACC55-A567-4CB8-9B13-B62F67F3DAB8">关于在密钥库中存储Oracle数据库的秘密</a><br>Keystore可以存储支持内部Oracle数据库功能的机密，并集成外部客户端，如Oracle GoldenGate。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-8C994DBB-1804-48AD-9C9F-03359C73E4C9">在软件密钥库中存储Oracle数据库秘密</a><br><code class="codeph">ADMINISTER KEY MANAGEMENT ADD SECRET|UPDATE SECRET|DELETE SECRET</code>语句可以添加密钥，更新机密和从密钥库中删除机密。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-A00025BA-1DAE-4E3C-BB28-AFC1ECF16425">示例：将HSM密码添加到软件密钥库</a><br><code class="codeph">ADMINISTER KEY MANAGEMENT ADD SECRET</code>语句可以将HSM密码添加到软件密钥库。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-111BF673-5DD1-4FA1-8DE0-3F63DAA8B479">示例：更改存储为软件密钥库中的密钥的HSM密码</a><br><code class="codeph">ADMINISTER KEY MANAGEMENT UPDATE SECRET</code>语句可以更改在软件密钥库中存储为密钥的HSM密码。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-647817C3-E465-4B4C-A78A-DBC377272CCE">示例：删除存储为软件密钥库中的密钥的HSM密码</a><br><code class="codeph">ADMINISTER KEY MANAGEMENT DELETE SECRET</code>语句可以删除存储为软件密钥库中的机密的HSM密码。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-D20146E5-E2B4-40D6-B503-189211FBD874">在硬件密钥库中存储Oracle数据库秘密</a><br><code class="codeph">ADMINISTER KEY MANAGEMENT ADD SECRET|UPDATE SECRET|DELETE SECRET</code>语句可以添加，更新和删除机密。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-780B5AFA-9353-479E-9462-A7EE078CE59F">示例：将Oracle数据库机密添加到硬件密钥库</a><br><code class="codeph">ADMINISTER KEY MANAGEMENT ADD SECRET</code>语句可以将Oracle数据库密钥添加到硬件密钥库。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-917EC3B1-BAE5-4F29-8DCF-FA8CDA0E8C49">示例：更改硬件密钥库中的Oracle数据库密钥</a><br><code class="codeph">ADMINISTER KEY MANAGEMENT MANAGEMENT UPDATE SECRET</code>语句可以更改硬件密钥库中的Oracle数据库密钥。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-259B198F-E8CB-4134-8139-916500215955">示例：删除硬件密钥库中的Oracle数据库密钥</a><br><code class="codeph">ADMINISTER KEY MANAGEMENT DELETE SECRET FOR CLIENT</code>语句可以删除硬件密钥库中的Oracle数据库密钥。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-1BD98DB6-696B-4653-A8AC-B24EDE3BAE0D">配置自动登录硬件安全模块</a><br>可以将硬件安全模块配置为使用自动登录功能。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0C080CA8-1812-4DCD-AC30-FE47534C7962" title="您可以修改密钥库和TDE主加密密钥的设置，并存储Oracle数据库并将Oracle GoldenGate机密存储在密钥库中。">管理密钥库和主加密密钥</a></p>
                     </div>
                  </div>
               </div>
               <a id="ASOAG10399"></a><div class="props_rev_3"><a id="GUID-F35ACC55-A567-4CB8-9B13-B62F67F3DAB8" name="GUID-F35ACC55-A567-4CB8-9B13-B62F67F3DAB8"></a><h4 id="ASOAG-GUID-F35ACC55-A567-4CB8-9B13-B62F67F3DAB8" class="sect4">关于在密钥库中存储Oracle数据库的秘密</h4>
                  <div>
                     <p>Keystore可以存储支持内部Oracle数据库功能的机密，并集成外部客户端，如Oracle GoldenGate。</p>
                     <p>密钥必须是符合Oracle标识符规则的字符串。您可以在现有密钥库中添加，更新或删除客户端密钥。Oracle GoldenGate Extract进程必须具有数据加密密钥才能解密数据文件和<code class="codeph">REDO</code>或<code class="codeph">UNDO</code>日志中的数据。当您在Oracle数据库和Oracle GoldenGate客户端之间共享密钥时，密钥将使用共享密钥进行加密。软件密钥库存储共享密钥。
                     </p>
                     <p>根据您站点的要求，即使配置了硬件安全模块，您也可能需要自动打开密钥库操作。因此，硬件安全模块密码可以存储在软件自动登录密钥库中，从而启用硬件安全模块的自动登录功能。Oracle数据库端还可以存储数据库的凭据以登录软件密钥库中的外部存储服务器。</p>
                     <p>您可以将Oracle数据库机密存储在软件密钥库和硬件密钥库中：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">软件密钥库：</span>您可以在基于密码的软件，自动登录和本地自动登录软件密钥库中存储机密。如果要将密钥存储在自动登录（或自动登录本地）密钥库中，请注意以下事项：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>如果软件自动登录密钥库与其对应的基于密码的软件密钥库位于同一位置，则会自动添加密钥。</p>
                              </li>
                              <li>
                                 <p>如果软件自动登录密钥库与其对应的基于密码的软件密钥库位于不同的位置，则必须从基于密码的密钥库再次创建自动登录密钥库，并使这两个密钥库保持同步。</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p><span class="bold">硬件密钥库：</span>您可以将<span class="bold">密钥</span>存储在标准硬件安全模块中。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-D20146E5-E2B4-40D6-B503-189211FBD874" title="ADMINISTER密钥管理添加SECRET | UPDATE SECRET | DELETE SECRET语句可以添加，更新和删除机密。">在硬件密钥库中存储Oracle数据库秘密</a></li>
                           <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-1BD98DB6-696B-4653-A8AC-B24EDE3BAE0D" title="可以将硬件安全模块配置为使用自动登录功能。">配置自动登录硬件安全模块</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FF270B27-A456-477A-81E0-50E74926A810" title="秘密是支持内部Oracle数据库功能的数据，这些功能将外部客户端（如Oracle GoldenGate）集成到数据库中。">存储Oracle数据库秘密</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="ASOAG10400"></a><div class="props_rev_3"><a id="GUID-8C994DBB-1804-48AD-9C9F-03359C73E4C9" name="GUID-8C994DBB-1804-48AD-9C9F-03359C73E4C9"></a><h4 id="ASOAG-GUID-8C994DBB-1804-48AD-9C9F-03359C73E4C9" class="sect4">在软件密钥库中存储Oracle数据库秘密</h4>
                  <div>
                     <p><code class="codeph">ADMINISTER KEY MANAGEMENT ADD SECRET|UPDATE SECRET|DELETE SECRET</code>语句可以添加密钥，更新机密和从密钥库中删除机密。
                     </p>
                     <p>与所有<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句一样，您必须具有<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>管理权限。要查找有关现有机密的信息，可以查询<code class="codeph">V$CLIENT_SECRETS</code>动态视图。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">添加密码：</span>使用以下语法：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理添加秘密' <span class="italic">秘密</span> '为客户' <span class="italic">client_identifier</span> '[使用标签' <span class="italic">标签</span> '] [TO [[LOCAL] AUTOLOGIN] KEYSTORE <span class="italic">keystore_location</span> [FORCE KEYSTORE]由[EXTERNAL STORE | <span class="italic">keystore_password</span> ] [WITH BACKUP [USING <span class="italic">backup_id</span> ];</pre></li>
                        <li>
                           <p><span class="bold">更新密码：</span>使用以下语法：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理更新秘密' <span class="italic">秘密</span> '为客户' <span class="italic">client_identifier</span> '[使用标签' <span class="italic">标签</span> '] [TO [[LOCAL] AUTOLOGIN] KEYSTORE <span class="italic">keystore_location</span> [FORCE KEYSTORE]由[EXTERNAL STORE | <span class="italic">keystore_password</span> ] [WITH BACKUP [USING <span class="italic">backup_id</span> ];</pre></li>
                        <li>
                           <p><span class="bold">删除机密：</span>使用以下语法：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理删除客户端' <span class="italic">client_identifier</span> '的秘密[FROM [[LOCAL] AUTOLOGIN] KEYSTORE <span class="italic">keystore_location</span> [FORCE KEYSTORE]由[EXTERNAL STORE | <span class="italic">keystore_password</span> ] [WITH BACKUP [USING <span class="italic">backup_id</span> ];</pre></li>
                     </ul>
                     <p>在所有这些陈述中，规范如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="italic"><code class="codeph">secret</code></span>是要存储，更新或删除的客户端密钥。如果密码没有空格，请将此设置括在单引号（ <code class="codeph">' '</code> ）中或省略引号。要查找有关现有机密及其客户机标识符的信息，请查询<code class="codeph">V$CLIENT_SECRETS</code>动态视图。
                           </p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">client_identifier</code></span>是用于标识密钥的字母数字字符串。 <span class="italic"><code class="codeph">client_identifier</code></span>没有默认值。将此设置括在单引号（ <code class="codeph">' '</code> ）中。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">TO [[LOCAL] AUTOLOGIN] KEYSTORE</code>是指自动登录密钥库的位置，该密钥库在<code class="codeph">sqlnet.ora</code>文件中指定。
                           </p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">tag</code></span>是要存储的密钥的可选的用户定义描述。您可以将<span class="italic"><code class="codeph">tag</code></span>与<code class="codeph">ADD</code>和<code class="codeph">UPDATE</code>操作一起使用。将此设置括在单引号（ <code class="codeph">' '</code> ）中。此标记显示在<code class="codeph">V$CLIENT_SECRETS</code>视图的<code class="codeph">SECRET_TAG</code>列中。
                           </p>
                           <p>如果在<code class="codeph">ADD</code> ， <code class="codeph">UPDATE</code>或<code class="codeph">DELETE</code>操作之前未备份密钥库，则需要<code class="codeph">WITH BACKUP</code> 。 <span class="italic"><code class="codeph">backup_identifier</code></span>是备份的可选用户定义描述。将<span class="italic"><code class="codeph">backup_identifier</code></span>括在单引号（ <code class="codeph">' '</code> ）中。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">[TO | FROM [[LOCAL] AUTOLOGIN] KEYSTORE</code>指定自动登录或密码密钥库的位置，该密钥库在s <code class="codeph">qlnet.ora</code>文件中设置。
                           </p>
                        </li>
                        <li>
                           <p>如果自动登录密钥库已打开（并且正在使用中）或密钥库已关闭， <code class="codeph">FORCE KEYSTORE</code>暂时打开此操作的受密码保护的密钥库。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">IDENTIFIED BY</code>可以是以下设置之一：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">EXTERNAL STORE</code>使用存储在外部存储中的密钥库密码来执行密钥库操作。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">keystore_password</code></span>是<span class="italic"><code class="codeph">keystore_password</code></span>的密码。
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EBBA92B5-E5D0-43F5-BF55-3B44367F6105" title="自定义TDE主加密密钥属性使您可以定义特定于您需要的属性。">为报告创建自定义TDE主加密密钥属性</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FF270B27-A456-477A-81E0-50E74926A810" title="秘密是支持内部Oracle数据库功能的数据，这些功能将外部客户端（如Oracle GoldenGate）集成到数据库中。">存储Oracle数据库秘密</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="ASOAG10401"></a><a id="ASOAG10528"></a><div class="props_rev_3"><a id="GUID-A00025BA-1DAE-4E3C-BB28-AFC1ECF16425" name="GUID-A00025BA-1DAE-4E3C-BB28-AFC1ECF16425"></a><h4 id="ASOAG-GUID-A00025BA-1DAE-4E3C-BB28-AFC1ECF16425" class="sect4">示例：将HSM密码添加到软件密钥库</h4>
                  <div>
                     <p><code class="codeph">ADMINISTER KEY MANAGEMENT ADD SECRET</code>语句可以将HSM密码添加到软件密钥库。
                     </p>
                     <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-A00025BA-1DAE-4E3C-BB28-AFC1ECF16425__CIHJBCFE">例4-8</a>显示了如何将硬件安全模块（HSM）密码添加为软件密钥库的机密。
                     </p>
                     <div class="example" id="GUID-A00025BA-1DAE-4E3C-BB28-AFC1ECF16425__CIHJBCFE">
                        <p class="titleinexample">示例4-8将Oracle数据库密钥添加到软件密钥库</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理添加秘密'psmith： <span class="italic">密码</span> 'FOR CLIENT'HSM_PASSWORD'使用TAG'HSM凭证'FORCE KEYSTORE由<span class="italic">密码</span> WITH BACKUP识别;</pre><p>在此版本中，密钥库密码位于外部存储中，因此<code class="codeph">EXTERNAL STORE</code>设置用于<code class="codeph">IDENTIFIED BY</code> ：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理添加秘密'psmith： <span class="italic">密码</span> 'FOR CLIENT'HSM_PASSWORD'使用TAG'HSM凭证'FORCE KEYSTORE由外部商店通过备份识别;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FF270B27-A456-477A-81E0-50E74926A810" title="秘密是支持内部Oracle数据库功能的数据，这些功能将外部客户端（如Oracle GoldenGate）集成到数据库中。">存储Oracle数据库秘密</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10430"></a><div class="props_rev_3"><a id="GUID-111BF673-5DD1-4FA1-8DE0-3F63DAA8B479" name="GUID-111BF673-5DD1-4FA1-8DE0-3F63DAA8B479"></a><h4 id="ASOAG-GUID-111BF673-5DD1-4FA1-8DE0-3F63DAA8B479" class="sect4">示例：更改存储为软件密钥库中的密钥的HSM密码</h4>
                  <div>
                     <p><code class="codeph">ADMINISTER KEY MANAGEMENT UPDATE SECRET</code>语句可以更改在软件密钥库中存储为密钥的HSM密码。
                     </p>
                     <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-111BF673-5DD1-4FA1-8DE0-3F63DAA8B479__CIHJCFCI">例4-9</a>显示了如何更改在软件密钥库中存储为密钥的HSM密码。
                     </p>
                     <div class="example" id="GUID-111BF673-5DD1-4FA1-8DE0-3F63DAA8B479__CIHJCFCI">
                        <p class="titleinexample">示例4-9将Oracle数据库机密更改为软件密钥库</p><pre class="oac_no_warn" dir="ltr">ADMINISTER客户端'管理@ myhost的'使用标记<span class="italic">'new_host_credentials'</span> IDENTIFIED BY <span class="italic">software_keytore_password</span> FORCE密钥库密钥管理UPDATE SECRET <span class="italic">ADMIN_PASSWORD;</span></pre><p>在此版本中，密钥库的密码位于外部存储中：</p><pre class="oac_no_warn" dir="ltr">DMINISTER密钥管理UPDATE SECRET <span class="italic">ADMIN_PASSWORD</span>客户端“管理@ myhost的”使用鉴定BY外部存储标签<span class="italic">“new_host_credentials”</span> FORCE密钥库;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FF270B27-A456-477A-81E0-50E74926A810" title="秘密是支持内部Oracle数据库功能的数据，这些功能将外部客户端（如Oracle GoldenGate）集成到数据库中。">存储Oracle数据库秘密</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10431"></a><div class="props_rev_3"><a id="GUID-647817C3-E465-4B4C-A78A-DBC377272CCE" name="GUID-647817C3-E465-4B4C-A78A-DBC377272CCE"></a><h4 id="ASOAG-GUID-647817C3-E465-4B4C-A78A-DBC377272CCE" class="sect4">示例：删除存储为软件密钥库中的密钥的HSM密码</h4>
                  <div>
                     <p><code class="codeph">ADMINISTER KEY MANAGEMENT DELETE SECRET</code>语句可以删除存储为软件密钥库中的机密的HSM密码。
                     </p>
                     <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-647817C3-E465-4B4C-A78A-DBC377272CCE__CIHEEJDB">示例4-10</a>显示了如何删除在软件密钥库中作为机密存储的HSM密码。
                     </p>
                     <div class="example" id="GUID-647817C3-E465-4B4C-A78A-DBC377272CCE__CIHEEJDB">
                        <p class="titleinexample">示例4-10删除软件密钥库中的Oracle数据库密钥</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理删除客户端的密码'HSM_PASSWORD'FORCE KEYSTORE由<span class="italic">密码</span> WITH BACKUP识别;</pre><p>在此版本中，密钥库的密码位于外部存储中：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理删除客户'HSM_PASSWORD'FORFF KEYSTORE的秘密，由外部商店通过备份识别;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FF270B27-A456-477A-81E0-50E74926A810" title="秘密是支持内部Oracle数据库功能的数据，这些功能将外部客户端（如Oracle GoldenGate）集成到数据库中。">存储Oracle数据库秘密</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10403"></a><div class="props_rev_3"><a id="GUID-D20146E5-E2B4-40D6-B503-189211FBD874" name="GUID-D20146E5-E2B4-40D6-B503-189211FBD874"></a><h4 id="ASOAG-GUID-D20146E5-E2B4-40D6-B503-189211FBD874" class="sect4">在硬件密钥库中存储Oracle数据库秘密</h4>
                  <div>
                     <p><code class="codeph">ADMINISTER KEY MANAGEMENT ADD SECRET|UPDATE SECRET|DELETE SECRET</code>语句可以添加，更新和删除机密。
                     </p>
                     <p>与所有<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句一样，您必须具有<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>管理权限。当您从正在使用或当前打开的密钥库添加，更新或删除机密时，您必须在根目录中运行<code class="codeph">ADMINISTER KEY MANAGEMENT</code> 。
                     </p>
                     <p>您可以将Oracle数据库机密存储在HSM和Oracle Key Vault硬件密钥库中，但请注意，如果将<code class="codeph">HSM_PASSWORD</code>存储在密钥库密钥库中，则自动登录不起作用。
                     </p>
                     <div class="infoboxnote" id="GUID-D20146E5-E2B4-40D6-B503-189211FBD874__GUID-6246DD1A-2CC4-4D27-A85C-27A3F31F3C1C">
                        <p class="notep1">注意：</p>
                        <p>在尝试将密钥添加到硬件安全模块之前，请确保它具有PKCS＃11数据对象支持。</p>
                     </div>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">添加密码：</span>使用以下语法：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理添加秘密' <span class="italic">秘密</span> '为客户' <span class="italic">client_identifier</span> '[使用标签' <span class="italic">标签</span> '] [TO [[LOCAL] AUTOLOGIN] KEYSTORE <span class="italic">keystore_location</span> [FORCE KEYSTORE] IDENTIFIED BY“ <span class="italic">hardware_keystore_credentials</span> ”[WITH BACKUP [USING <span class="italic">backup_id</span> ]];</pre></li>
                        <li>
                           <p><span class="bold">更新密码：</span>使用以下语法：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理更新秘密' <span class="italic">秘密</span> '为客户' <span class="italic">client_identifier</span> '[使用标签' <span class="italic">标签</span> '] [TO [[LOCAL] AUTOLOGIN] KEYSTORE <span class="italic">keystore_location</span> [FORCE KEYSTORE]标识为“ <span class="italic">hardware_keystore_credentials</span> ”[WITH BACKUP [USING <span class="italic">backup_id</span> ]];</pre></li>
                        <li>
                           <p><span class="bold">删除机密：</span>使用以下语法：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理删除客户端' <span class="italic">client_identifier</span> '的秘密[FROM [[LOCAL] AUTOLOGIN] KEYSTORE <span class="italic">keystore_location</span> [FORCE KEYSTORE] IDENTIFIED BY“ <span class="italic">hardware_keystore_credentials</span> ”[WITH BACKUP [USING <span class="italic">backup_id</span> ]];</pre></li>
                     </ul>
                     <p>在所有这些陈述中，规范如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="italic"><code class="codeph">secret</code></span>是要存储，更新或删除的客户端密钥。如果密码没有空格，请将此设置括在双引号（ <code class="codeph">' '</code> ）中或省略引号。要查找有关现有机密及其客户机标识符的信息，请查询<code class="codeph">V$CLIENT_SECRETS</code>动态视图。
                           </p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">client_identifier</code></span>是用于标识密钥的字母数字字符串。 <span class="italic"><code class="codeph">client_identifier</code></span>没有默认值。将此设置括在单引号（''）中。
                           </p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">tag</code></span>是要存储的密钥的可选的用户定义描述。您可以将<span class="italic"><code class="codeph">tag</code></span>与<code class="codeph">ADD</code>和<code class="codeph">UPDATE</code>操作一起使用。将此设置括在单引号（ <code class="codeph">' '</code> ）中。此标记显示在<code class="codeph">V$CLIENT_SECRETS</code>视图的<code class="codeph">SECRET_TAG</code>列中。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">[TO | FROM [[LOCAL] AUTOLOGIN] KEYSTORE</code>指定用于硬件密钥库的密钥库的位置。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph"><span class="codeinlineitalic">hardware_keystore_credentials</span></code>是指HSM或Oracle Key Vault硬件密钥库的凭据。对于HSM，请使用此格式指定凭据，用引号括起并用冒号分隔组件： <code class="codeph">“ <span class="codeinlineitalic">user_name</span> : <span class="codeinlineitalic">password</span> ”</code> ，其中<code class="codeph"><span class="codeinlineitalic">user_name</span></code>是创建HSM的用户，密码是此用户的密码。对于Oracle Key Vault，仅输入创建密钥库的用户的密码。用引号括起此密码。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EBBA92B5-E5D0-43F5-BF55-3B44367F6105" title="自定义TDE主加密密钥属性使您可以定义特定于您需要的属性。">为报告创建自定义TDE主加密密钥属性</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FF270B27-A456-477A-81E0-50E74926A810" title="秘密是支持内部Oracle数据库功能的数据，这些功能将外部客户端（如Oracle GoldenGate）集成到数据库中。">存储Oracle数据库秘密</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="ASOAG10432"></a><a id="ASOAG10529"></a><div class="props_rev_3"><a id="GUID-780B5AFA-9353-479E-9462-A7EE078CE59F" name="GUID-780B5AFA-9353-479E-9462-A7EE078CE59F"></a><h4 id="ASOAG-GUID-780B5AFA-9353-479E-9462-A7EE078CE59F" class="sect4">示例：将Oracle数据库机密添加到硬件密钥库</h4>
                  <div>
                     <p><code class="codeph">ADMINISTER KEY MANAGEMENT ADD SECRET</code>语句可以将Oracle数据库密钥添加到硬件密钥库。
                     </p>
                     <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-780B5AFA-9353-479E-9462-A7EE078CE59F__CIHFCIFC">示例4-11</a>显示了如何将用户的密码添加到硬件密钥库。
                     </p>
                     <div class="example" id="GUID-780B5AFA-9353-479E-9462-A7EE078CE59F__CIHFCIFC">
                        <p class="titleinexample">示例4-11将Oracle数据库密钥添加到硬件密钥库</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理添加秘密' <span class="italic">密码</span> '为客户'admin @ myhost'使用标签'myhost admin credentials'标识为“psmith： <span class="italic">password</span> ”;</pre><p>在此版本中，密钥库密码位于外部存储中，因此<code class="codeph">EXTERNAL STORE</code>设置用于<code class="codeph">IDENTIFIED BY</code> ：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理添加秘密' <span class="italic">密码</span> '为客户'admin @ myhost'使用标签'myhost admin credentials'由外部商店识别;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FF270B27-A456-477A-81E0-50E74926A810" title="秘密是支持内部Oracle数据库功能的数据，这些功能将外部客户端（如Oracle GoldenGate）集成到数据库中。">存储Oracle数据库秘密</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10433"></a><div class="props_rev_3"><a id="GUID-917EC3B1-BAE5-4F29-8DCF-FA8CDA0E8C49" name="GUID-917EC3B1-BAE5-4F29-8DCF-FA8CDA0E8C49"></a><h4 id="ASOAG-GUID-917EC3B1-BAE5-4F29-8DCF-FA8CDA0E8C49" class="sect4">示例：更改硬件密钥库中的Oracle数据库密钥</h4>
                  <div>
                     <p><code class="codeph">ADMINISTER KEY MANAGEMENT MANAGEMENT UPDATE SECRET</code>语句可以更改硬件密钥库中的Oracle数据库密钥。
                     </p>
                     <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-917EC3B1-BAE5-4F29-8DCF-FA8CDA0E8C49__CIHBADJF">示例4-12</a>显示了如何更改在硬件密钥库中存储为密钥的密码。
                     </p>
                     <div class="example" id="GUID-917EC3B1-BAE5-4F29-8DCF-FA8CDA0E8C49__CIHBADJF">
                        <p class="titleinexample">示例4-12更改硬件密钥库中的Oracle数据库密钥</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理管理更新秘密' <span class="italic">password2</span> '为客户'admin @ myhost'使用标签'新主机凭证'标识为“psmith：password”;</pre><p>在此版本中，密钥库的密码位于外部存储中：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理管理更新秘密' <span class="italic">password2</span> '为客户'admin @ myhost'使用标签'新主机凭证'由外部商店识别;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FF270B27-A456-477A-81E0-50E74926A810" title="秘密是支持内部Oracle数据库功能的数据，这些功能将外部客户端（如Oracle GoldenGate）集成到数据库中。">存储Oracle数据库秘密</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10434"></a><div class="props_rev_3"><a id="GUID-259B198F-E8CB-4134-8139-916500215955" name="GUID-259B198F-E8CB-4134-8139-916500215955"></a><h4 id="ASOAG-GUID-259B198F-E8CB-4134-8139-916500215955" class="sect4">示例：删除硬件密钥库中的Oracle数据库密钥</h4>
                  <div>
                     <p><code class="codeph">ADMINISTER KEY MANAGEMENT DELETE SECRET FOR CLIENT</code>语句可以删除硬件密钥库中的Oracle数据库密钥。
                     </p>
                     <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-259B198F-E8CB-4134-8139-916500215955__CIHEEACE">例4-13</a>显示了如何删除在硬件密钥库中存储为机密的硬件安全模块密码。
                     </p>
                     <div class="example" id="GUID-259B198F-E8CB-4134-8139-916500215955__CIHEEACE">
                        <p class="titleinexample">示例4-13删除硬件密钥库中的Oracle数据库密钥</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理删除客户端'admin @ myhost'的秘密IDENTIFIED BY“psmith： <span class="italic">password</span> ”;</pre><p>在此版本中，密钥库的密码位于外部存储中：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理删除客户'admin @ myhost'的秘密由外部商店识别;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FF270B27-A456-477A-81E0-50E74926A810" title="秘密是支持内部Oracle数据库功能的数据，这些功能将外部客户端（如Oracle GoldenGate）集成到数据库中。">存储Oracle数据库秘密</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10435"></a><div class="props_rev_3"><a id="GUID-1BD98DB6-696B-4653-A8AC-B24EDE3BAE0D" name="GUID-1BD98DB6-696B-4653-A8AC-B24EDE3BAE0D"></a><h4 id="ASOAG-GUID-1BD98DB6-696B-4653-A8AC-B24EDE3BAE0D" class="sect4">配置自动登录硬件安全模块</h4>
                  <div>
                     <p>可以将硬件安全模块配置为使用自动登录功能。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-D7ACB0B7-CA85-4F72-B29E-2E283409546F">关于配置自动登录硬件安全模块</a><br>自动登录硬件安全模块将硬件安全模块凭证存储在自动登录密钥库中。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-1E8CD504-A87D-4690-8076-B2F1BA8EC645">配置自动登录硬件安全模块</a><br><code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句配置自动登录硬件安全模块。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FF270B27-A456-477A-81E0-50E74926A810" title="秘密是支持内部Oracle数据库功能的数据，这些功能将外部客户端（如Oracle GoldenGate）集成到数据库中。">存储Oracle数据库秘密</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10530"></a><div class="props_rev_3"><a id="GUID-D7ACB0B7-CA85-4F72-B29E-2E283409546F" name="GUID-D7ACB0B7-CA85-4F72-B29E-2E283409546F"></a><h5 id="ASOAG-GUID-D7ACB0B7-CA85-4F72-B29E-2E283409546F" class="sect5">关于配置自动登录硬件安全模块</h5>
                     <div>
                        <p>自动登录硬件安全模块将硬件安全模块凭证存储在自动登录密钥库中。</p>
                        <p>这种配置降低了整个系统的安全性。但是，此配置确实支持无人操作或自动操作，并且在需要自动重新登录硬件安全模块的部署中非常有用。</p>
                        <p>请注意，执行查询<code class="codeph">SELECT * FROM V$ENCRYPTION_WALLET</code>将自动打开自动登录硬件安全模块。例如，假设您配置了自动登录硬件安全模块。如果关闭密钥库并查询<code class="codeph">V$ENCRYPTION_WALLET</code>视图，则输出将指示密钥库已打开。这是因为<code class="codeph">V$ENCRYPTION_WALLET</code>打开了自动登录硬件，然后显示了自动登录密钥库的状态。
                        </p>
                        <p>要为硬件安全模块启用自动登录功能，必须将硬件安全模块凭据存储在硬件密钥库中。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-1BD98DB6-696B-4653-A8AC-B24EDE3BAE0D" title="可以将硬件安全模块配置为使用自动登录功能。">配置自动登录硬件安全模块</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10531"></a><div class="props_rev_3"><a id="GUID-1E8CD504-A87D-4690-8076-B2F1BA8EC645" name="GUID-1E8CD504-A87D-4690-8076-B2F1BA8EC645"></a><h5 id="ASOAG-GUID-1E8CD504-A87D-4690-8076-B2F1BA8EC645" class="sect5">配置自动登录硬件安全模块</h5>
                     <div>
                        <p><code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句配置自动登录硬件安全模块。
                        </p>
                        <div class="p">在开始此过程之前，请确保已配置TDE硬件密钥库。请参阅<a href="configuring-transparent-data-encryption.html#GUID-753C4808-CC51-4DA1-A5C3-980417FDAB14" title="硬件密钥库位于硬件安全模块（HSM）中，该模块用于存储加密密钥。">配置硬件密钥库</a> 。
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ol>
                              <li>
                                 <p>重新配置<code class="codeph">init.ora</code>文件中的<code class="codeph">WALLET_ROOT</code>参数以包括软件密钥库的密钥库位置（如果尚不存在）。
                                 </p>
                                 <p>如果您之前已迁移到使用HSM，则软件密钥库位置可能已存在。</p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">WALLET_ROOT =的/ etc / ORACLE /钱包/ ORCL</pre></li>
                              <li>
                                 <p>在软件密钥库中添加或更新密钥。</p>
                                 <p>秘密是硬件安全模块密码，客户端是<code class="codeph">HSM_PASSWORD</code> 。 <code class="codeph">HSM_PASSWORD</code>是Oracle定义的客户端名称，用于将HSM密码表示为软件密钥库中的密钥。
                                 </p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理添加秘密' <span class="italic">user_name</span> ： <span class="italic">密码</span> 'FOR CLIENT'HSM_PASSWORD'到LOCAL AUTOLOGIN KEYSTORE <span class="italic">software_keystore_location</span> WITH BACKUP;</pre><p>在此示例中， <code class="codeph"><span class="codeinlineitalic">software_keystore_location</span></code>是您刚刚定义的软件密钥库的位置。
                                 </p>
                              </li>
                           </ol>
                           <p>在此阶段，下次执行TDE操作时，硬件安全模块自动登录密钥库将自动打开。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="using-sqlnet-ora-to-configure-tde-keystores.html#GUID-DF9504EF-BA08-4585-895D-2E5F4BA30E50" title="Oracle建议您使用WALLET_ROOT和TDE_CONFIGURATION参数来配置密钥库位置，但另一种方法是配置sqlnet.ora文件。">关于sqlnet.ora文件中的密钥库位置</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-1BD98DB6-696B-4653-A8AC-B24EDE3BAE0D" title="可以将硬件安全模块配置为使用自动登录功能。">配置自动登录硬件安全模块</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="ASOAG10338"></a><div class="props_rev_3"><a id="GUID-FBAC7644-B19F-4899-8FA0-0C487CABF368" name="GUID-FBAC7644-B19F-4899-8FA0-0C487CABF368"></a><h3 id="ASOAG-GUID-FBAC7644-B19F-4899-8FA0-0C487CABF368" class="sect3">在密钥库中存储Oracle GoldenGate秘密</h3>
               <div>
                  <p>您可以将Oracle GoldenGate机密存储在透明数据加密密钥库中。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EEF80967-1671-465F-A13D-69C1CB676B39">关于在Keystore中存储Oracle GoldenGate秘密</a><br>您可以使用密钥库来存储工具和外部客户端（如Oracle GoldenGate）的密钥。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-69D83D36-8922-48FE-870C-F9EFCBEDDB24">Oracle GoldenGate提取经典捕获模式TDE要求</a><br>确保您满足Oracle GoldenGate Extract的要求，以支持透明数据加密捕获。
                     </li>
                     <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-D4E24734-07A9-4861-9948-E072D327238C">配置Oracle GoldenGate的密钥库支持</a><br>您可以使用密钥库的共享密钥为Oracle GoldenGate配置透明数据加密密钥库支持。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-0C080CA8-1812-4DCD-AC30-FE47534C7962" title="您可以修改密钥库和TDE主加密密钥的设置，并存储Oracle数据库并将Oracle GoldenGate机密存储在密钥库中。">管理密钥库和主加密密钥</a></p>
                     </div>
                  </div>
               </div>
               <a id="ASOAG10385"></a><div class="props_rev_3"><a id="GUID-EEF80967-1671-465F-A13D-69C1CB676B39" name="GUID-EEF80967-1671-465F-A13D-69C1CB676B39"></a><h4 id="ASOAG-GUID-EEF80967-1671-465F-A13D-69C1CB676B39" class="sect4">关于在Keystore中存储Oracle GoldenGate秘密</h4>
                  <div>
                     <p>您可以使用密钥库来存储工具和外部客户端（如Oracle GoldenGate）的密钥。</p>
                     <p>密钥必须是符合Oracle标识符规则的字符串。您可以在现有密钥库中添加，更新或删除客户端密钥。本节介绍如何使用经典捕获模式在Oracle GoldenGate Extract（Extract）进程中捕获透明数据加密加密数据。</p>
                     <p>当Extract处于经典捕获模式时，TDE支持需要交换以下键：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在Extract流程的经典捕获模式下，对Oracle GoldenGate的TDE支持要求Oracle数据库和Extract进程共享密钥以加密正在交换的敏感信息。共享密钥安全地存储在Oracle数据库和Oracle GoldenGate域中。共享密钥作为数据库密钥存储在软件密钥库或HSM中。</p>
                        </li>
                        <li>
                           <p>解密密钥是一个密码，称为共享密钥，安全地存储在Oracle数据库和Oracle GoldenGate域中。只有拥有共享密钥的一方才能解密该表并重做日志密钥。</p>
                        </li>
                     </ul>
                     <p>配置共享密钥后，Oracle GoldenGate Extract使用共享密钥来解密数据。Oracle GoldenGate Extract本身不处理TDE主加密密钥，也不知道密钥库密码。TDE主加密密钥和密码保留在Oracle数据库配置中。</p>
                     <p>Oracle GoldenGate Extract仅将解密的数据写入Oracle GoldenGate跟踪文件，Oracle GoldenGate在传输过程中会保留该文件。您可以使用站点的操作系统标准安全协议以及Oracle GoldenGate AES加密选项来保护此文件。Oracle GoldenGate不会将加密数据写入丢弃文件（使用<code class="codeph">DISCARDFILE</code>参数指定）。<code class="codeph">ENCRYPTED</code>一词将写入正在使用的任何丢弃文件。
                     </p>
                     <p>Oracle GoldenGate确实要求在处理加密数据时打开密钥库。Oracle GoldenGate功能对TDE操作没有性能影响。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FBAC7644-B19F-4899-8FA0-0C487CABF368" title="您可以将Oracle GoldenGate机密存储在透明数据加密密钥库中。">在密钥库中存储Oracle GoldenGate秘密</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10386"></a><div class="props_rev_3"><a id="GUID-69D83D36-8922-48FE-870C-F9EFCBEDDB24" name="GUID-69D83D36-8922-48FE-870C-F9EFCBEDDB24"></a><h4 id="ASOAG-GUID-69D83D36-8922-48FE-870C-F9EFCBEDDB24" class="sect4">Oracle GoldenGate提取经典捕获模式TDE要求</h4>
                  <div>
                     <p>确保您满足Oracle GoldenGate Extract的要求，以支持透明数据加密捕获。</p>
                     <p>要求如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>要保持高安全性标准，请确保Oracle GoldenGate Extract进程作为Oracle用户（运行Oracle数据库的用户）的一部分运行。这样，密钥在内存中受到与Oracle用户相同的权限的保护。</p>
                        </li>
                        <li>
                           <p>在与Oracle数据库安装相同的计算机上运行Oracle GoldenGate Extract进程。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FBAC7644-B19F-4899-8FA0-0C487CABF368" title="您可以将Oracle GoldenGate机密存储在透明数据加密密钥库中。">在密钥库中存储Oracle GoldenGate秘密</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10387"></a><div class="props_rev_3"><a id="GUID-D4E24734-07A9-4861-9948-E072D327238C" name="GUID-D4E24734-07A9-4861-9948-E072D327238C"></a><h4 id="ASOAG-GUID-D4E24734-07A9-4861-9948-E072D327238C" class="sect4">配置Oracle GoldenGate的密钥库支持</h4>
                  <div>
                     <p>您可以使用密钥库的共享密钥为Oracle GoldenGate配置透明数据加密密钥库支持。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-57DCFB1D-9244-4FA1-8FBA-009969D5F861">第1步：确定密钥库的共享密钥</a><br>密钥库的共享密钥是密码。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-35602580-D58B-48D6-B1F0-FBEBF24E5071">步骤2：为Oracle GoldenGate配置Oracle数据库以支持TDE</a><br><code class="codeph">DBMS_INTERNAL_CLKM</code> PL / SQL包使您可以为Oracle GoldenGate配置TDE支持。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-901DF9D1-DDDC-4B07-9802-6E11B63E577F">第3步：将TDE GoldenGate共享密钥存储在密钥库中</a><br><code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句可以在密钥库中存储TDE GoldenGate共享密钥。
                        </li>
                        <li class="ulchildlink"><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-42B72C81-F22F-4063-BFD0-9E5F22C9B325">第4步：在Extract Process中设置TDE Oracle GoldenGate共享密钥</a><br>GoldenGate软件命令接口（GGSCI）实用程序在提取过程中设置TDE Oracle GoldenGate共享密钥。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-FBAC7644-B19F-4899-8FA0-0C487CABF368" title="您可以将Oracle GoldenGate机密存储在透明数据加密密钥库中。">在密钥库中存储Oracle GoldenGate秘密</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10388"></a><div class="props_rev_3"><a id="GUID-57DCFB1D-9244-4FA1-8FBA-009969D5F861" name="GUID-57DCFB1D-9244-4FA1-8FBA-009969D5F861"></a><h5 id="ASOAG-GUID-57DCFB1D-9244-4FA1-8FBA-009969D5F861" class="sect5">第1步：确定密钥库的共享密钥</h5>
                     <div>
                        <p>密钥库的共享密钥是密码。</p>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>确定符合或超过Oracle数据库密码标准的共享密钥。</p>
                              </li>
                           </ul>
                           <p>除了负责配置透明数据加密以使用Oracle GoldenGate Extract的受信任管理员之外，不要与任何其他用户共享此密码。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="../dbseg/keeping-your-oracle-database-secure.html#DBSEG10005" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-D4E24734-07A9-4861-9948-E072D327238C" title="您可以使用密钥库的共享密钥为Oracle GoldenGate配置透明数据加密密钥库支持。">为Oracle GoldenGate配置密钥库支持</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10389"></a><div class="props_rev_3"><a id="GUID-35602580-D58B-48D6-B1F0-FBEBF24E5071" name="GUID-35602580-D58B-48D6-B1F0-FBEBF24E5071"></a><h5 id="ASOAG-GUID-35602580-D58B-48D6-B1F0-FBEBF24E5071" class="sect5">步骤2：为Oracle GoldenGate配置Oracle数据库以支持TDE</h5>
                     <div>
                        <p><code class="codeph">DBMS_INTERNAL_CLKM</code> PL / SQL包使您可以为Oracle GoldenGate配置TDE支持。
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>使用<code class="codeph">SYSDBA</code>管理权限以<code class="codeph">SYS</code>用户身份登录数据库实例。
                                 </p>
                                 <p>例如</p><pre class="oac_no_warn" dir="ltr">sqlplus sys as sysdba输入密码： <span class="italic">password</span>已连接。
</pre></li>
                              <li>
                                 <p>加载Oracle数据库提供的<code class="codeph">DBMS_INTERNAL_CLKM</code> PL / SQL包。
                                 </p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">@？/app/oracle/product/12.2/rdbms/admin/prvtclkm.plb</pre><p><code class="codeph">prvtclkm.plb</code>文件还使Oracle GoldenGate能够从Oracle数据库中提取加密数据。
                                 </p>
                              </li>
                              <li>
                                 <p>将<code class="codeph">DBMS_INTERNAL_CLKM</code> PL / SQL包的<code class="codeph">EXECUTE</code>特权授予Oracle GoldenGate Extract数据库用户。
                                 </p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">GRMS EXECUTE DBMS_INTERNAL_CLKM到psmith;</pre><p>此过程使Oracle数据库和Oracle GoldenGate Extract能够交换信息。</p>
                              </li>
                              <li>
                                 <p>退出SQL * Plus。</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-D4E24734-07A9-4861-9948-E072D327238C" title="您可以使用密钥库的共享密钥为Oracle GoldenGate配置透明数据加密密钥库支持。">为Oracle GoldenGate配置密钥库支持</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10390"></a><div class="props_rev_3"><a id="GUID-901DF9D1-DDDC-4B07-9802-6E11B63E577F" name="GUID-901DF9D1-DDDC-4B07-9802-6E11B63E577F"></a><h5 id="ASOAG-GUID-901DF9D1-DDDC-4B07-9802-6E11B63E577F" class="sect5">第3步：将TDE GoldenGate共享密钥存储在密钥库中</h5>
                     <div>
                        <p><code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句可以在密钥库中存储TDE GoldenGate共享密钥。
                        </p>
                        <div class="p">在开始此过程之前，请确保已根据<a href="configuring-transparent-data-encryption.html#GUID-1FA85E9E-5666-4CF3-A3C7-1F8A9230B0C9" title="软件密钥库是主加密密钥的容器，它驻留在软件文件系统中。">配置软件密钥库</a>和<a href="configuring-transparent-data-encryption.html#GUID-753C4808-CC51-4DA1-A5C3-980417FDAB14" title="A hardware keystore resides in a hardware security module (HSM), which is designed to store encryption keys.">配置硬件密钥库</a>配置了TDE软件或硬件密钥<a href="configuring-transparent-data-encryption.html#GUID-753C4808-CC51-4DA1-A5C3-980417FDAB14" title="硬件密钥库位于硬件安全模块（HSM）中，该模块用于存储加密密钥。">库</a> 。
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ol>
                              <li>
                                 <p>使用以下语法在密钥库中设置Oracle GoldenGate-TDE密钥。</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理添加|更新|删除秘密' <span class="italic">秘密</span> '为客户' <span class="italic">secret_identifier</span> '[使用标签' <span class="italic">标签</span> ']由<span class="italic">keystore_password</span>识别[WITH BACKUP [使用' <span class="italic">backup_identifier</span> ']];</pre><p>在本规范中：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="italic"><code class="codeph">secret</code></span>是要存储，更新或删除的客户端密钥。将此设置括在单引号（ <code class="codeph">' '</code> ）中。
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">secret_identifier</code></span>是用于标识密钥的字母数字字符串。 <span class="italic"><code class="codeph">secret_identifier</code></span>没有默认值。将此设置括在单引号（ <code class="codeph">' '</code> ）中。
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">tag</code></span>是要存储的密钥的可选的用户定义描述。 <span class="italic"><code class="codeph">tag</code></span>可以与<code class="codeph">ADD</code>和<code class="codeph">UPDATE</code>操作一起使用。将此设置括在单引号（ <code class="codeph">' '</code> ）中。此标记显示在<code class="codeph">V$CLIENT_SECRETS</code>视图的<code class="codeph">SECRET_TAG</code>列中。<a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EBBA92B5-E5D0-43F5-BF55-3B44367F6105" title="自定义TDE主加密密钥属性使您可以定义特定于您需要的属性。">为报告创建自定义TDE主加密密钥属性</a> 
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">keystore_password</code></span>是配置的密钥<span class="italic"><code class="codeph">keystore_password</code></span>的密码。
                                       </p>
                                    </li>
                                    <li>
                                       <p>如果在<code class="codeph">ADD</code> ， <code class="codeph">UPDATE</code>或<code class="codeph">DELETE</code>操作之前未备份密钥库，则需要<code class="codeph">WITH BACKUP</code> 。 <span class="italic"><code class="codeph">backup_identifier</code></span>是备份的可选用户定义描述。将<span class="italic"><code class="codeph">backup_identifier</code></span>括在单引号（ <code class="codeph">' '</code> ）中。
                                       </p>
                                    </li>
                                 </ul>
                                 <p>以下示例将密钥添加到密钥库，并在与密钥库相同的目录中创建备份：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理添加秘密'some_secret'为客户'ORACLE_GG'使用标记'GoldenGate秘密'通过<span class="italic">密码</span>识别'使用'GG备份'备份;</pre></li>
                              <li>
                                 <p>验证刚刚创建的条目。</p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">SELECT CLIENT，SECRET_TAG来自V $ CLIENT_SECRETS WHERE CLIENT ='ORACLEGG'; CLIENT SECRET_TAG -------- ---------------------------------------- -  ORACLEGG some_secret</pre></li>
                              <li>
                                 <p>切换日志文件。</p><pre class="oac_no_warn" dir="ltr">CONNECT / AS SYSDBA ALTER SYSTEM SWITCH LOGFILE;</pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-901DF9D1-DDDC-4B07-9802-6E11B63E577F__GUID-20328BEC-86B7-42AF-A171-1B5966366287">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EBBA92B5-E5D0-43F5-BF55-3B44367F6105" title="自定义TDE主加密密钥属性使您可以定义特定于您需要的属性。">为报告创建自定义TDE主加密密钥属性以</a>获取有关标记的更多信息</p>
                              </li>
                              <li>
                                 <p>有关切换日志文件的详细信息，请参见<a href="../admin/managing-the-redo-log.html#ADMIN11325" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a></p>
                              </li>
                              <li>
                                 <p>如果在Oracle Real Application Clusters环境中使用此过程时遇到问题， <a href="using-transparent-data-encryption-with-other-oracle-features.html#GUID-68EE178A-6B6C-497A-B720-052FB23B5794" title="Oracle RAC节点可以共享软件密钥库和硬件安全模块。">透明数据加密如何与Oracle Real Application Clusters</a>一起使用</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-D4E24734-07A9-4861-9948-E072D327238C" title="您可以使用密钥库的共享密钥为Oracle GoldenGate配置透明数据加密密钥库支持。">为Oracle GoldenGate配置密钥库支持</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10391"></a><div class="props_rev_3"><a id="GUID-42B72C81-F22F-4063-BFD0-9E5F22C9B325" name="GUID-42B72C81-F22F-4063-BFD0-9E5F22C9B325"></a><h5 id="ASOAG-GUID-42B72C81-F22F-4063-BFD0-9E5F22C9B325" class="sect5">第4步：在Extract Process中设置TDE Oracle GoldenGate共享密钥</h5>
                     <div>
                        <p>GoldenGate软件命令接口（GGSCI）实用程序在提取过程中设置TDE Oracle GoldenGate共享密钥。</p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>启动GGSCI实用程序。</p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">GGSCI</pre></li>
                              <li>
                                 <p>在GGSCI实用程序中，运行<code class="codeph">ENCRYPT PASSWORD</code>命令以加密共享密钥，以便在Oracle GoldenGate Extract参数文件中对其进行模糊处理。
                                 </p><pre class="oac_no_warn" dir="ltr">ENCRYPT PASSWORD <span class="italic">shared_secret算法</span> ENCRYPTKEY <span class="italic">键名</span>
</pre><p>在本规范中：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="italic"><code class="codeph">shared_secret</code></span>是您在确定密钥库的共享密钥时创建的明文共享密钥。此设置区分大小写。
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">algorithm</code></span>是指定AES加密的以下值之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">AES128</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AES192</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AES256</code></p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">keyname</code></span>是<code class="codeph">ENCKEYS</code>查找文件中加密密钥的逻辑名称。Oracle GoldenGate使用此名称来查找<code class="codeph">ENCKEYS</code>文件中的实际密钥。
                                       </p>
                                    </li>
                                 </ul>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">加密密码<span class="italic">密码</span> AES256 ENCRYPTKEY mykey1</pre></li>
                              <li>
                                 <p>在Oracle GoldenGate Extract参数文件中，使用<code class="codeph">DECRYPTPASSWORD</code>选项设置<code class="codeph">DBOPTIONS</code>参数。
                                 </p>
                                 <p>作为输入，提供加密的共享密钥和Oracle GoldenGate生成的或用户定义的解密密钥。</p><pre class="oac_no_warn" dir="ltr">DBOPTIONS DECRYPTPASSWORD <span class="italic">shared_secret</span> <span class="italic">算法</span> ENCRYPTKEY <span class="italic">keyname</span>
</pre><p>在本规范中：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="italic"><code class="codeph">shared_secret</code></span>是您在确定密钥库的共享密钥时创建的明文共享密钥。此设置区分大小写。
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">algorithm</code></span>是指定AES加密的以下值之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">AES128</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AES192</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AES256</code></p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">keyname</code></span>是<code class="codeph">ENCKEYS</code>查找文件中加密密钥的逻辑名称。
                                       </p>
                                       <p>例如：</p><pre class="oac_no_warn" dir="ltr">DBOPTIONS DECRYPTPASSWORD AACAAAAAAAAAAAIALCKDZIRHOJBHOJUH AES256 ENCRYPTKEY mykey1</pre></li>
                                 </ul>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-57DCFB1D-9244-4FA1-8FBA-009969D5F861" title="密钥库的共享密钥是密码。">第1步：确定密钥库的共享密钥</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-keystore-and-tde-master-encryption-key.html#GUID-D4E24734-07A9-4861-9948-E072D327238C" title="您可以使用密钥库的共享密钥为Oracle GoldenGate配置透明数据加密密钥库支持。">为Oracle GoldenGate配置密钥库支持</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
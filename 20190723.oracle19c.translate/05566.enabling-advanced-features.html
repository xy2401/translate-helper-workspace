<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>启用Oracle Net Services的高级功能</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Net Services Administrator&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Net Services Administrator&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="net-services-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-24T04:25:53-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96313-04"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="configuring-profiles.html" title="Previous" type="text/html"></link>
      <link rel="next" href="optimizing-performance.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Net Services Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="NETAG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="configuring-profiles.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="optimizing-performance.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">网络服务管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-II-config-and-admin-of-oracle-net-services.html" property="item" typeof="WebPage"><span property="name">Oracle Net Services的配置和管理</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">启用Oracle Net Services的高级功能</li>
            </ol>
            <a id="GUID-4354E9E3-F521-48B7-83A0-AADC1970C84F" name="GUID-4354E9E3-F521-48B7-83A0-AADC1970C84F"></a><a id="NETAG013"></a>
            
            <h2 id="NETAG-GUID-4354E9E3-F521-48B7-83A0-AADC1970C84F" class="sect2"><span class="enumeration_chapter">13</span>启用Oracle Net Services的高级功能</h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='enabling-advanced-features'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]u003e </style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>此页面上的脚本内容仅用于导航目的，不会以任何方式更改内容。</p>
            </noscript>
            <div>
               <p>了解如何配置Oracle Net Services的高级功能，包括高级连接数据参数， <a href="glossary.html#GUID-BBAB896F-C9F1-46C3-936E-2D0EA5FC117C"><span class="xrefglossterm">负载平衡</span></a> ， <a href="glossary.html#GUID-AAE7BF84-FA74-4EE0-A56F-742500110B0E"><span class="xrefglossterm">故障转移</span></a>以及与非数据库服务的连接。
               </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-D4894B70-971C-4AF6-B4F6-19503F853959">配置高级网络地址和连接数据信息</a><br></li>
                  <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-75CC9084-51BB-4B7A-98F7-535B2F8E9B6E">了解连接负载平衡</a><br></li>
                  <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-8F532535-C401-4B51-BE0B-04FD74BB0621">配置透明应用程序故障转移</a><br></li>
                  <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-64F8244D-530A-41ED-AB80-3B27F271CD01">指定主要和辅助实例配置的实例角色</a><br></li>
                  <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-0203C8FA-A4BE-44A5-9A25-3D1E578E879F">了解静态服务注册</a><br></li>
                  <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-9E45CE8B-BCAB-407D-8F8E-14A05036BC3D">配置与第三方数据库服务的连接</a><br></li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="part-II-config-and-admin-of-oracle-net-services.html#GUID-18C53DE7-28A6-4D01-AEA4-56A5F42B1B2A">Oracle Net Services的配置和管理</a></p>
                  </div>
               </div>
            </div>
            <a id="NETAG328"></a><div class="sect2"><a id="GUID-D4894B70-971C-4AF6-B4F6-19503F853959" name="GUID-D4894B70-971C-4AF6-B4F6-19503F853959"></a><h3 id="NETAG-GUID-D4894B70-971C-4AF6-B4F6-19503F853959" class="sect3"><span class="enumeration_section">13.1</span>配置高级网络地址和连接数据信息</h3>
               <div>
                  <p>可以通过多个路由和协议地址访问数据库服务。您可以通过设置协议地址列表来配置要使用的路由。您可以通过指定地址参数来配置使用的订单地址。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5">创建侦听器协议地址列表</a><br></li>
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-39241458-E9E1-4B4C-99FD-48975F307239">关于地址列表参数</a><br></li>
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-FEF9B98D-65D1-4F49-8355-112351670BB7">关于高级连接数据参数</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-4354E9E3-F521-48B7-83A0-AADC1970C84F">启用Oracle Net Services的高级功能</a></p>
                     </div>
                  </div>
               </div>
               <a id="NETAG1171"></a><a id="NETAG1172"></a><a id="NETAG329"></a><div class="sect3"><a id="GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5" name="GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5"></a><h4 id="NETAG-GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5" class="sect4"><span class="enumeration_section">13.1.1</span>创建监听器协议地址列表</h4>
                  <div>
                     <p>数据库服务可以由多个网络路由或协议地址访问。在以下示例中， <code class="codeph">sales.us.example.com</code>可以使用<code class="codeph">sales1-server</code>或<code class="codeph">sales2-server</code>上的侦听器连接到<code class="codeph">sales.us.example.com</code>服务。
                     </p><pre class="oac_no_warn" dir="ltr">sales.us.example.com =（DESCRIPTION = <span class="bold">（ADDRESS_LIST =</span> <span class="bold">（ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521）</span> ） <span class="bold">（ADDRESS =（PROTOCOL = tcp）（HOST = sales2-server） （PORT = 1521）</span> ））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com）））</pre><p>要将网络协议地址添加到现有网络服务名称或数据库服务，请使用以下过程之一：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="enabling-advanced-features.html#GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5__BABBICDC">使用Oracle Enterprise Manager云控制添加网络协议</a></p>
                        </li>
                        <li>
                           <p><a href="enabling-advanced-features.html#GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5__BABGBHBG">使用Oracle Net Manager添加网络协议</a></p>
                        </li>
                     </ul>
                     <div class="section" id="GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5__BABBICDC">
                        <p class="subhead3" id="GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5__GUID-931CF15A-2872-49FA-8903-71E958F2784C">使用Oracle Enterprise Manager云控制添加网络协议</p>
                     </div>
                     <!-- class="section" -->
                     <p>以下过程介绍如何使用Oracle Enterprise Manager Cloud Control将网络协议添加到现有网络服务名称或数据库服务：</p>
                     <ol>
                        <li>
                           <p>访问Oracle Enterprise Manager云控制中的目录命名或本地命名页面：</p>
                           <ol type="a">
                              <li>
                                 <p>访问Oracle企业管理器云控制中的“网络服务管理”页面。</p>
                                 <div class="infoboxnotealso" id="GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5__GUID-9E649881-AE97-4EEC-958B-F1D2398892AF">
                                    <p class="notep1">也可以看看：</p>
                                    <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-697E4B64-854C-49BB-B287-C2B4C57F987F">使用Oracle Enterprise Manager云控制配置Oracle Net服务</a> ”</span></p>
                                 </div>
                              </li>
                              <li>
                                 <p>从“管理”列表中选择“ <span class="bold">本地命名”</span>或“ <span class="bold">目录命名</span> ”，然后选择目录服务器的Oracle主目录或本地配置文件的位置。
                                 </p>
                              </li>
                              <li>
                                 <p>单击<span class="bold">Go</span> 。</p>
                                 <p>将显示“本地命名或目录命名”页面。</p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>选择目录服务或网络服务名称。</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>对于“本地命名”，从列表中选择网络服务，然后单击“ <span class="bold">编辑”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>对于目录命名，请在“简单搜索”部分中搜索网络服务名称，然后从“结果”列表中选择网络服务或数据库服务，然后单击“ <span class="bold">编辑”</span> 。
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>在“地址”部分中，单击“ <span class="bold">添加”</span> 。
                           </p>
                           <p>将出现“添加地址”页面。</p>
                        </li>
                        <li>
                           <p>从“协议”列表中，选择侦听器配置为侦听的协议。此协议也必须安装在客户端上。</p>
                        </li>
                        <li>
                           <p>在提供的字段中输入所选协议的相应参数信息。</p>
                           <div class="infoboxnotealso" id="GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5__GUID-641B1F5A-F5BA-4F7C-8BCA-8FF277998DD1">
                              <p class="notep1">也可以看看：</p>
                              <p> 协议参数设置的<a href="../netrf/protocol-address-configuration.html#NETRF-GUID-71A0702F-A5C6-4122-907D-5E9BFA1DCE45" target="_blank"><span class="italic">Oracle数据库网络服务参考</span></a></p>
                           </div>
                        </li>
                        <li>
                           <p>（可选）在“高级参数”部分中，在“总发送缓冲区大小”和“总接收缓冲区大小”字段中指定会话的发送和接收操作的I / O缓冲区空间限制。</p>
                           <div class="infoboxnotealso" id="GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5__GUID-63C53BED-55B9-4316-8FDC-09E3AFDA791A">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="optimizing-performance.html#GUID-E94D2ABA-23C8-44E9-BBCB-077FADA85F29">配置I / O缓冲区空间</a> ”</span>以获取有关缓冲区空间的其他信息</p>
                           </div>
                        </li>
                        <li>
                           <p>单击<span class="bold">确定</span> 。</p>
                           <p>协议地址将添加到“地址”部分。</p>
                        </li>
                        <li>
                           <p>单击“ <span class="bold">确定”</span>以更新地址信息。
                           </p>
                        </li>
                     </ol>
                     <div class="section" id="GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5__BABGBHBG">
                        <p class="subhead3" id="GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5__GUID-4282929B-F057-4E5D-A47D-2341941A6FEE">使用Oracle Net Manager添加网络协议</p>
                     </div>
                     <!-- class="section" -->
                     <p>以下过程介绍如何使用Oracle Net Manager将网络协议添加到现有网络服务名称或数据库服务：</p>
                     <ol>
                        <li>
                           <p>启动Oracle Net Manager。</p>
                           <div class="infoboxnotealso" id="GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5__GUID-B1D0488E-7D3C-4E6A-BB05-DCEF7C68EBE2">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-2294BF67-B05F-44A2-9584-6CF0855A0F56">使用Oracle Net Manager配置Oracle Net服务</a> ”</span></p>
                           </div>
                        </li>
                        <li>
                           <p>在导航器窗格中，从“目录”或“本地”菜单中选择“ <span class="bold">服务命名</span> ”。
                           </p>
                        </li>
                        <li>
                           <p>选择网络服务名称或数据库服务。</p>
                           <p>右侧窗格显示当前目标服务和地址列表。</p>
                        </li>
                        <li>
                           <p>在“地址配置”框中，单击加号（+）以添加新地址。</p>
                           <p>出现一个新的地址选项卡：</p>
                           <ol type="a">
                              <li>
                                 <p>选择协议并输入适当的地址信息。</p>
                                 <div class="infoboxnotealso" id="GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5__GUID-FE9B69BC-B8D7-4BCA-9549-44594294B429">
                                    <p class="notep1">也可以看看：</p>
                                    <p>有关协议地址参数的详细信息，请参阅<a href="../netrf/protocol-address-configuration.html#NETRF0041" target="_blank"><span class="italic">Oracle数据库网络服</span></a></p>
                                 </div>
                              </li>
                              <li>
                                 <p>（可选）在“地址”选项卡上，单击“ <span class="bold">高级”</span>以在“总发送缓冲区大小”和“总接收缓冲区大小”字段中指定会话的发送和接收操作的I / O缓冲区空间限制。
                                 </p>
                                 <div class="infoboxnotealso" id="GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5__GUID-AB4EEA14-8978-41AE-9A8A-7CDFB1B7B92E">
                                    <p class="notep1">也可以看看：</p>
                                    <p><span class="q">“ <a href="optimizing-performance.html#GUID-E94D2ABA-23C8-44E9-BBCB-077FADA85F29">配置I / O缓冲区空间</a> ”</span>以获取有关缓冲区空间的其他信息</p>
                                 </div>
                              </li>
                              <li>
                                 <p>使用左箭头和右箭头按钮订购协议地址。这将按顺序排列协议地址列表中的地址。除非配置了多个地址选项，否则将联系列表中的第一个地址。</p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>从文件菜单中选择<span class="bold">保存网络配置</span> 。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-D4894B70-971C-4AF6-B4F6-19503F853959">配置高级网络地址和连接数据信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETAG1173"></a><a id="NETAG1174"></a><a id="NETAG332"></a><div class="sect3"><a id="GUID-39241458-E9E1-4B4C-99FD-48975F307239" name="GUID-39241458-E9E1-4B4C-99FD-48975F307239"></a><h4 id="NETAG-GUID-39241458-E9E1-4B4C-99FD-48975F307239" class="sect4"><span class="enumeration_section">13.1.2</span>关于地址列表参数</h4>
                  <div>
                     <p>当多个侦听器协议地址可访问数据库服务时，请指定地址的使用顺序，例如随机选择或按顺序尝试。<a href="enabling-advanced-features.html#GUID-39241458-E9E1-4B4C-99FD-48975F307239__g492599" title="地址列表参数">表13-1</a>列出了与多个协议地址一起使用的参数。
                     </p>
                     <div class="tblformal" id="GUID-39241458-E9E1-4B4C-99FD-48975F307239__g492599">
                        <p class="titleintable">表13-1 tnsnames.ora文件中的地址列表参数</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="tnsnames.ora文件中的地址列表参数" width="100%" border="1" summary="Address List Parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="27%" id="d38386e570">参数</th>
                                 <th align="left" valign="bottom" width="73%" id="d38386e573">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d38386e578" headers="d38386e570 ">
                                    <p>故障切换<a id="d38386e581" class="indexterm-anchor"></a><a id="d38386e585" class="indexterm-anchor"></a><a id="d38386e591" class="indexterm-anchor"></a><a id="d38386e598" class="indexterm-anchor"></a><a id="d38386e605" class="indexterm-anchor"></a><a id="d38386e607" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d38386e578 d38386e573 ">
                                    <p>在连接时，如果第一个侦听器在设置为<code class="codeph">on</code>时失败，则此参数指示Oracle Net故障转移到其他侦听器。列表中的地址数决定了尝试的地址数。设置为<code class="codeph">off</code> ，指示Oracle Net尝试一个地址。
                                    </p>
                                    <p>连接时故障转移被接通<code class="codeph">on</code>默认为多个地址列表（ADDRESS_LIST），连接描述符（描述），和多个连接描述符（DESCRIPTION_LIST）。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d38386e628" headers="d38386e570 ">
                                    <p>负载均衡<a id="d38386e631" class="indexterm-anchor"></a><a id="d38386e633" class="indexterm-anchor"></a><a id="d38386e639" class="indexterm-anchor"></a> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d38386e628 d38386e573 ">
                                    <p>设置为<code class="codeph">on</code> ，此参数指示Oracle Net以随机顺序通过协议地址列表，平衡各种侦听器的负载。设置为<code class="codeph">off</code> ，指示Oracle Net按顺序尝试地址，直到成功为止。
                                    </p>
                                    <p>客户端负载平衡将<code class="codeph">on</code>默认情况下，多个连接描述符（DESCRIPTION_LIST）。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="27%" id="d38386e661" headers="d38386e570 ">
                                    <p>SOURCE_ROUTE<a id="d38386e664" class="indexterm-anchor"></a><a id="d38386e666" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="73%" headers="d38386e661 d38386e573 ">
                                    <p>设置为<code class="codeph">on</code> ，此参数指示Oracle Net按所示顺序使用每个地址，直到到达目标。使用特定路由（即特定计算机）到达目标时需要此参数。此参数用于启用与<a href="glossary.html#GUID-73188D8F-3751-4E9E-A0ED-8BB9D51FB745"><span class="xrefglossterm">Oracle Connection Manager的连接</span></a> 。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnote" id="GUID-39241458-E9E1-4B4C-99FD-48975F307239__GUID-4E200ADA-1016-43C4-8494-9BEF76EB9900">
                        <p class="notep1">注意：</p>
                        <p>您不能将源路由（SOURCE_ROUTE）设置为与连接时故障转移（FAILOVER）或客户端负载平衡（LOAD_BALANCE）相同的级别。源路由按顺序连接到列表中的每个地址，而连接时故障转移和客户端负载平衡从列表中选择单个地址。</p>
                        <p>当<code class="codeph">tnsnames.ora</code>文件中的连接描述符包含至少两个Oracle Connection Manager跃点的协议地址时，则可以在文件中包含跃点内的连接时故障转移和负载平衡的参数。
                        </p>
                     </div>
                     <p><a href="enabling-advanced-features.html#GUID-39241458-E9E1-4B4C-99FD-48975F307239__g492573" title="地址列表选项对话框">表13-2</a>描述了<a id="d38386e696" class="indexterm-anchor"></a><a id="d38386e698" class="indexterm-anchor"></a>地址列表选项。
                     </p>
                     <div class="tblformal" id="GUID-39241458-E9E1-4B4C-99FD-48975F307239__g492573">
                        <p class="titleintable">表13-2“地址列表选项”对话框</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="地址列表选项对话框" width="100%" border="1" summary="Address List Options Dialog Box" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="62%" id="d38386e713">选项</th>
                                 <th align="left" valign="bottom" width="38%" id="d38386e724">参数设定</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="62%" id="d38386e729" headers="d38386e713 ">
                                    <p>按顺序尝试每个地址，直到成功为止。</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d38386e729 d38386e724 ">
                                    <p>FAILOVER = ON<a id="d38386e735" class="indexterm-anchor"></a><a id="d38386e737" class="indexterm-anchor"></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="62%" id="d38386e744" headers="d38386e713 ">
                                    <p>随机尝试每个地址，直到成功。</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d38386e744 d38386e724 ">
                                    <p>LOAD_BALANCE =上</p>
                                    <p>FAILOVER = ON</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="62%" id="d38386e753" headers="d38386e713 ">
                                    <p>尝试一个随机选择的地址。</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d38386e753 d38386e724 ">
                                    <p>LOAD_BALANCE =上</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="62%" id="d38386e760" headers="d38386e713 ">
                                    <p>按顺序使用每个地址，直到到达目的地。</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d38386e760 d38386e724 ">
                                    <p>SOURCE_ROUTE =上</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="62%" id="d38386e767" headers="d38386e713 ">
                                    <p>仅使用第一个地址。</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d38386e767 d38386e724 ">
                                    <p>LOAD_BALANCE =关</p>
                                    <p>FAILOVER =关</p>
                                    <p>SOURCE_ROUTE =关</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>以下示例显示为客户端负载平衡配置的<code class="codeph">tnsnames.ora</code>文件：</p><pre class="oac_no_warn" dir="ltr">sales.us.example.com =（DESCRIPTION =（ADDRESS_LIST = <span class="bold">（LOAD_BALANCE = on）</span> （ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521））（ADDRESS =（PROTOCOL = tcp）（HOST） = sales2-server）（PORT = 1521）））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com）））</pre><p>以下示例显示了为连接时故障转移配置的<code class="codeph">tnsnames.ora</code>文件：</p><pre class="oac_no_warn" dir="ltr">sales.us.example.com =（DESCRIPTION =（ADDRESS_LIST = <span class="bold">（LOAD_BALANCE = off）</span> <span class="bold">（FAILOVER = on）</span> （ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521））（ADDRESS =（PROTOCOL） = tcp）（HOST = sales2-server）（PORT = 1521）））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com）））</pre><p>以下示例显示为Oracle Connection Manager和负载平衡配置的tnsnames.ora文件：</p><pre class="oac_no_warn" dir="ltr">sales.us.example.com =（DESCRIPTION =（SOURCE_ROUTE = ON）（ADDRESS =（PROTOCOL = tcp）（HOST = cman-pc1）（PORT = 1630））（ADDRESS =（LOAD_BALANCE = ON）（ADDRESS =（PROTOCOL） = tcp）（HOST = cman-pc2）（PORT = 1521））（ADDRESS =（PROTOCOL = tcp）（HOST = cman-pc3）（PORT = 1521）））（CONNECT_DATA =（SERVICE_NAME = sales.us.example。 COM）））</pre></div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-1D71DC57-B877-4FE4-A3C5-4402258DCCF8">配置地址列表参数</a><br></li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-39241458-E9E1-4B4C-99FD-48975F307239__GUID-E36BBA3B-1B06-4055-AD9D-02FAB4732FA3">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="configuring-oracle-connection-manager.html#GUID-A37427A9-8D37-42E8-980B-4A76C210616C">为Oracle Connection Manager配置客户端</a> ”，</span>以获取有关为源路由配置客户端的其他信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-D4894B70-971C-4AF6-B4F6-19503F853959">配置高级网络地址和连接数据信息</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="NETAG1586"></a><div class="sect4"><a id="GUID-1D71DC57-B877-4FE4-A3C5-4402258DCCF8" name="GUID-1D71DC57-B877-4FE4-A3C5-4402258DCCF8"></a><h5 id="NETAG-GUID-1D71DC57-B877-4FE4-A3C5-4402258DCCF8" class="sect5"><span class="enumeration_section">13.1.2.1</span>配置地址列表参数</h5>
                     <div>
                        <p>以下过程介绍了如何配置地址列表参数：</p>
                        <ol>
                           <li>
                              <p>执行<span class="q">“ <a href="enabling-advanced-features.html#GUID-B18560CC-2855-4A5F-8CDF-3066127C41F5">创建监听器协议地址列表</a> ”中的过程</span> 。
                              </p>
                           </li>
                           <li>
                              <p>使用Oracle Enterprise Manager Cloud Control或Oracle Net Manager配置地址列表选项。</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>对于Oracle Enterprise Manager Cloud Control，请在“连接时故障转移和客户端负载平衡”部分中选择相应的选项。</p>
                                 </li>
                                 <li>
                                    <p>对于Oracle Net Manager，请在“地址配置”框中单击“ <span class="bold">高级</span> ”。将出现“地址列表选项”对话框。选择适当的选项。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-39241458-E9E1-4B4C-99FD-48975F307239">关于地址列表参数</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="NETAG1175"></a><a id="NETAG1176"></a><a id="NETAG1177"></a><a id="NETAG0131"></a><div class="sect3"><a id="GUID-FEF9B98D-65D1-4F49-8355-112351670BB7" name="GUID-FEF9B98D-65D1-4F49-8355-112351670BB7"></a><h4 id="NETAG-GUID-FEF9B98D-65D1-4F49-8355-112351670BB7" class="sect4"><span class="enumeration_section">13.1.3</span>关于高级连接数据参数</h4>
                  <div>
                     <p>从Oracle Database 12 <span class="italic">c第</span> 2版（12.2）开始，可以在<code class="codeph">sqlnet.ora</code>文件中设置数据压缩。设置压缩的参数是SQLNET.COMPRESSION和SQLNET.COMPRESSION_LEVELS。在设置这些参数<code class="codeph">sqlnet.ora</code>文件会影响使用所有连接<code class="codeph">sqlnet.ora</code>文件除了为Oracle Data Guard的流重做和的SecureFiles的LOB（大对象）。以下示例显示了如何设置压缩：</p><pre class="oac_no_warn" dir="ltr">SQLNET.COMPRESSION = on SQLNET.COMPRESSION_LEVELS =（低，高）</pre><p><code class="codeph">tnsnames.ora</code>文件中连接描述符的CONNECT_DATA部分定义目标数据库服务。在以下示例中，SERVICE_NAME定义了一个名为<code class="codeph">sales.us.example.com</code>的服务：</p><pre class="oac_no_warn" dir="ltr">sales.us.example.com =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales-server）（PORT = 1521）） <span class="bold">（CONNECT_DATA =</span> <span class="bold">（SERVICE_NAME = sales.us.example.com）</span> ））</pre><p>除服务名称外，您还可以选择使用<a href="enabling-advanced-features.html#GUID-FEF9B98D-65D1-4F49-8355-112351670BB7__G492533" title="高级连接数据设置">表13-3中</a>所述的参数配置连接数据信息。
                     </p>
                     <div class="tblformalwide" id="GUID-FEF9B98D-65D1-4F49-8355-112351670BB7__G492533">
                        <p class="titleintable">表13-3 tnsnames.ora文件中的高级连接数据设置</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="tnsnames.ora文件中的高级连接数据设置" width="100%" border="1" summary="Advanced Connect Data Settings" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="20%" id="d38386e1004">Oracle企业管理器云控制/ Oracle Net Manager选件</th>
                                 <th align="left" valign="bottom" width="23%" id="d38386e1007">tnsnames.ora文件参数</th>
                                 <th align="left" valign="bottom" width="57%" id="d38386e1010">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d38386e1015" headers="d38386e1004 ">
                                    <p>实例名称</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d38386e1015 d38386e1007 ">
                                    <p><a id="d38386e1020" class="indexterm-anchor"></a><a id="d38386e1022" class="indexterm-anchor"></a> INSTANCE_NAME<a id="d38386e1027" class="indexterm-anchor"></a><a id="d38386e1029" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d38386e1015 d38386e1010 ">
                                    <p>要访问的数据库实例。可以从初始化参数文件中的INSTANCE_NAME参数获取实例名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d38386e1039" headers="d38386e1004 ">
                                    <p>会话数据单元大小</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d38386e1039 d38386e1007 ">
                                    <p><a id="d38386e1044" class="indexterm-anchor"></a><a id="d38386e1048" class="indexterm-anchor"></a> SDU<a id="d38386e1053" class="indexterm-anchor"></a><a id="d38386e1055" class="indexterm-anchor"></a><a id="d38386e1061" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d38386e1039 d38386e1010 ">
                                    <p>通过网络发送的数据包的传输速率。您可以指定<a href="glossary.html#GUID-DDF7E038-5341-44CA-8634-C03D77EB50BA"><span class="xrefglossterm">会话数据单元（SDU）</span></a>大小，以更改与通过网络发送的数据包有关的性能特征。SDU大小限制为2 MB。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d38386e1073" headers="d38386e1004 ">
                                    <p>用于异构服务</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d38386e1073 d38386e1007 ">
                                    <p><a id="d38386e1078" class="indexterm-anchor"></a><a id="d38386e1080" class="indexterm-anchor"></a> HS<a id="d38386e1085" class="indexterm-anchor"></a><a id="d38386e1087" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d38386e1073 d38386e1010 ">
                                    <p>如果希望Oracle数据库服务器通过“ <a href="glossary.html#GUID-DA7016FB-3B8F-43D7-876B-BD8502DFADBE"><span class="xrefglossterm">异构服务”</span></a>访问第三方系统，请将此选项设置为<code class="codeph">on</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d38386e1104" headers="d38386e1004 ">
                                    <p><a id="d38386e1106" class="indexterm-anchor"></a><a id="d38386e1108" class="indexterm-anchor"></a> Oracle RDB数据库</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d38386e1104 d38386e1007 ">
                                    <p>RDB_DATABASE<a id="d38386e1116" class="indexterm-anchor"></a><a id="d38386e1118" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d38386e1104 d38386e1010 ">
                                    <p>Oracle Rdb数据库的文件名。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d38386e1128" headers="d38386e1004 ">
                                    <p><a id="d38386e1130" class="indexterm-anchor"></a><a id="d38386e1132" class="indexterm-anchor"></a>服务类型</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d38386e1128 d38386e1007 ">
                                    <p>TYPE_OF_SERVICE<a id="d38386e1140" class="indexterm-anchor"></a><a id="d38386e1142" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d38386e1128 d38386e1010 ">
                                    <p>用于Oracle Rdb数据库的服务类型。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="20%" id="d38386e1152" headers="d38386e1004 ">
                                    <p><a id="d38386e1154" class="indexterm-anchor"></a><a id="d38386e1156" class="indexterm-anchor"></a>全局数据库名称</p>
                                 </td>
                                 <td align="left" valign="top" width="23%" headers="d38386e1152 d38386e1007 ">
                                    <p>GLOBAL_NAME<a id="d38386e1166" class="indexterm-anchor"></a><a id="d38386e1168" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d38386e1152 d38386e1010 ">
                                    <p>Oracle Rdb数据库标识符。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>在以下示例中，设置了数据包的传输速率：</p><pre class="oac_no_warn" dir="ltr">sales.us.example.com =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales-server）（PORT = 1521）） <span class="bold">（CONNECT_DATA =</span> <span class="bold">（SERVICE_NAME = sales.us.example.com）</span> <span class="bold"><code class="codeph">(SDU=8192)</code></span> ））</pre><p>使用Oracle Enterprise Manager Cloud Control或Oracle Net Manager为网络服务名称或数据库服务配置高级CONNECT_DATA参数。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-FEF9B98D-65D1-4F49-8355-112351670BB7__GUID-E02F2EB7-F52B-4F88-8E4C-423CBF8E5006">使用Oracle Enterprise Manager云控制配置高级连接描述符参数</p>
                     </div>
                     <!-- class="section" -->
                     <p>以下过程介绍了如何使用Oracle Enterprise Manager Cloud Control配置高级连接描述符参数：</p>
                     <ol>
                        <li>
                           <p>访问Oracle Enterprise Manager Cloud Control中的目录命名或本地命名页面，如下所示：</p>
                           <ol type="a">
                              <li>
                                 <p>访问Oracle企业管理器云控制中的“网络服务管理”页面。</p>
                                 <div class="infoboxnotealso" id="GUID-FEF9B98D-65D1-4F49-8355-112351670BB7__GUID-DC61D362-A4A6-49E1-800F-9E52AD5F66E0">
                                    <p class="notep1">也可以看看：</p>
                                    <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-697E4B64-854C-49BB-B287-C2B4C57F987F">使用Oracle Enterprise Manager云控制配置Oracle Net服务</a> ”</span></p>
                                 </div>
                              </li>
                              <li>
                                 <p>从“ <span class="bold">管理”</span>列表中选择“ <span class="bold">本地命名”</span>或“ <span class="bold">目录命名</span> ”，然后选择目录服务器的Oracle主目录或本地配置文件的位置。
                                 </p>
                              </li>
                              <li>
                                 <p>单击<span class="bold">Go</span> 。</p>
                                 <p>将显示“目录命名”或“本地命名”页面。</p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>选择目录服务或网络服务名称。</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>对于“本地命名”，从列表中选择网络服务，然后单击“ <span class="bold">编辑”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>对于目录命名，通过从“结果”列表中选择网络服务或数据库服务，然后单击“ <span class="bold">编辑”</span> ，在“简单搜索”部分中搜索网络服务名称。
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>单击“ <span class="bold">高级”</span>选项卡。
                           </p>
                        </li>
                        <li>
                           <p>输入字段或根据需要选择选项，然后单击“ <span class="bold">确定”</span> 。</p>
                        </li>
                        <li>
                           <p>单击“ <span class="bold">确定”</span>以更新连接数据信息。
                           </p>
                        </li>
                     </ol>
                     <div class="section">
                        <p class="subhead3" id="GUID-FEF9B98D-65D1-4F49-8355-112351670BB7__GUID-25B3917A-5B77-45CE-B46E-28445E4C4226">使用Oracle Net Manager配置高级连接描述符参数</p>
                     </div>
                     <!-- class="section" -->
                     <p>以下过程介绍了如何使用Oracle Net Manager配置高级连接描述符参数：</p>
                     <ol>
                        <li>
                           <p>启动Oracle Net Manager。</p>
                           <div class="infoboxnotealso" id="GUID-FEF9B98D-65D1-4F49-8355-112351670BB7__GUID-C9339266-0FA6-4016-BA9A-9723969581C0">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-2294BF67-B05F-44A2-9584-6CF0855A0F56">使用Oracle Net Manager配置Oracle Net服务</a> ”</span></p>
                           </div>
                        </li>
                        <li>
                           <p>在导航器窗格中，从“目录”或“本地”菜单中选择“ <span class="bold">服务命名”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>选择网络服务名称或数据库服务。</p>
                           <p>右侧窗格显示当前目标服务和地址列表。</p>
                        </li>
                        <li>
                           <p>在“服务标识”框中，单击“ <span class="bold">高级”</span> 。
                           </p>
                           <p>将出现“高级服务选项”对话框。</p>
                        </li>
                        <li>
                           <p>输入字段或根据需要选择选项，然后单击“ <span class="bold">确定”</span> 。</p>
                        </li>
                        <li>
                           <p>如果要对“本地”文件夹进行这些更改，请从“文件”菜单中选择“ <span class="bold">保存网络配置</span> ”。对目录文件夹的更改会自动保存。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-D4894B70-971C-4AF6-B4F6-19503F853959">配置高级网络地址和连接数据信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="NETAG335"></a><div class="sect2"><a id="GUID-75CC9084-51BB-4B7A-98F7-535B2F8E9B6E" name="GUID-75CC9084-51BB-4B7A-98F7-535B2F8E9B6E"></a><h3 id="NETAG-GUID-75CC9084-51BB-4B7A-98F7-535B2F8E9B6E" class="sect3"><span class="enumeration_section">13.2</span>了解连接负载平衡</h3>
               <div>
                  <p><a href="glossary.html#GUID-65C69E90-90B0-4D0D-AF6B-771E4409314A"><span class="xrefglossterm">连接负载平衡</span></a>功能通过平衡多个<a href="glossary.html#GUID-6A50A995-E885-4B57-88A3-F0DA6E3B1B60"><span class="xrefglossterm">调度程序</span></a>之间的活动连接数来提高连接性能。在<a href="glossary.html#GUID-771FD3A1-1859-4DF9-9151-DF02A8ECFBA3"><span class="xrefglossterm">Oracle Real Application Clusters（Oracle RAC）</span></a>环境中，连接负载平衡还可以平衡多个实例之间的活动连接数。
                  </p>
                  <p>由于监听器注册（LREG）进程可以向远程侦听器注册，因此监听器始终可以了解所有实例和调度程序，无论其位置如何。根据负载信息，侦听器决定哪个实例，如果配置了共享服务器，则决定发送传入客户端请求的调度程序。</p>
                  <p>在<a href="glossary.html#GUID-1217C512-0795-497A-BE6B-13D8E18E08CA"><span class="xrefglossterm">共享服务器</span></a>配置中，侦听器按以下顺序选择调度程序：</p>
                  <ol>
                     <li>
                        <p>最小负载节点。</p>
                     </li>
                     <li>
                        <p>最少加载的实例。</p>
                     </li>
                     <li>
                        <p>该实例的最小负载调度程序。</p>
                     </li>
                  </ol>
                  <p>在<a href="glossary.html#GUID-111D574E-F53B-45C4-9F52-FB63F969DA4F"><span class="xrefglossterm">专用服务器</span></a>配置中，侦听器按以下顺序选择实例：</p>
                  <ol>
                     <li>
                        <p>最小负载节点。</p>
                     </li>
                     <li>
                        <p>最少加载的实例。</p>
                     </li>
                  </ol>
                  <p>此版本中引入了跨节点的负载平衡以进行HTTP呈现。远程侦听器可以使用HTTP重定向在不同节点上的实例之间进行负载均衡以进行HTTP呈现。</p>
                  <p>Oracle RAC环境要求每个实例上的调度程序与其他节点上的其他侦听器交叉注册。这是通过使用DISPATCHERS参数的<code class="codeph">LISTENER</code>属性实现的。
                  </p>
                  <div class="infoboxnote" id="GUID-75CC9084-51BB-4B7A-98F7-535B2F8E9B6E__GUID-FE839E17-DCF0-4F98-98BD-0886A6AA3E62">
                     <p class="notep1">注意：</p>
                     <p>为了获得最佳的连接负载平衡结果，属于同一数据库服务的实例应该在等效的硬件和软件配置上。</p>
                  </div>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-CEC21150-7831-4501-BEAC-6CC800E7B0E5">共享服务器配置的连接负载平衡示例</a><br></li>
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-1A1CCEFC-197A-4547-89E3-A062969F6269">专用服务器配置的连接负载平衡示例</a><br></li>
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-3D6D04A8-3E62-4F69-871C-6FB374262BBF">客户端连接的COLOCATION_TAG</a><br><code class="codeph">COLOCATION_TAG</code>参数是一个字母数字字符串，可以与TNS连接字符串的<code class="codeph">CONNECT_DATA</code>参数一起使用。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-75CC9084-51BB-4B7A-98F7-535B2F8E9B6E__GUID-DBC7168E-44DA-434A-81DA-E0CA0B0AB4B3">
                     <p class="notep1">也可以看看：</p>
                     <p></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="configuring-and-administering-oracle-net-listener.html#GUID-09139A19-5265-4216-9054-3237B225E09D">使用远程监听器注册信息</a> ”</span>以获取有关交叉注册的其他信息</p>
                        </li>
                        <li>
                           <p>有关SERVICE_NAMES和INSTANCE_NAME参数的完整信息，请<a href="../refrn/initialization-parameters.html#REFRN001" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                        </li>
                        <li>
                           <p><a href="configuring-shared-server-architecture.html#GUID-CAF99423-AFB9-4141-A36B-5EAF6B2CA7C0">配置共享服务器体系结构</a>以获取有关<code class="codeph">LISTENER</code>属性的其他信息</p>
                        </li>
                        <li>
                           <p><a href="../gsmug/global-data-services-admin.html#GSMUG-GUID-3A51492C-6214-4585-8609-56962180A12A" target="_blank"><span class="italic">“Oracle数据库全球数据服务概念和管理指南”</span></a> ，了解有关全局服务管理的信息</p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-4354E9E3-F521-48B7-83A0-AADC1970C84F">启用Oracle Net Services的高级功能</a></p>
                     </div>
                  </div>
               </div>
               <a id="NETAG1178"></a><a id="NETAG1179"></a><a id="NETAG336"></a><div class="sect3"><a id="GUID-CEC21150-7831-4501-BEAC-6CC800E7B0E5" name="GUID-CEC21150-7831-4501-BEAC-6CC800E7B0E5"></a><h4 id="NETAG-GUID-CEC21150-7831-4501-BEAC-6CC800E7B0E5" class="sect4"><span class="enumeration_section">13.2.1</span>共享服务器配置的连接负载平衡示例</h4>
                  <div>
                     <p><a href="enabling-advanced-features.html#GUID-CEC21150-7831-4501-BEAC-6CC800E7B0E5__BABHIHIA">图13-1</a>显示了具有相同服务<code class="codeph">sales.us.example.com</code>两个实例<code class="codeph">sales1</code>和<code class="codeph">sales2</code>的Oracle RAC共享服务器数据库。实例<code class="codeph">sales1</code>和<code class="codeph">sales2</code>驻留在计算机<code class="codeph">sales1-server</code>和<code class="codeph">sales2-server</code>上。实例<code class="codeph">sales1</code>有一个调度程序，实例<code class="codeph">sales2</code>有两个调度程序。名为<code class="codeph">listener</code>器的<code class="codeph">listener</code>器在节点1和2上运行。DISPATCHERS参数中的<code class="codeph">listener</code>属性已配置为允许向两个侦听器的服务注册信息。
                     </p>
                     <div class="figure" id="GUID-CEC21150-7831-4501-BEAC-6CC800E7B0E5__BABHIHIA">
                        <p class="titleinfigure">图13-1共享服务器配置的负载平衡环境</p><img width="435" src="img/netag034.gif" alt="下面是图13-1的描述" title="下面是图13-1的描述" longdesc="img_text/netag034.html"><br><a href="img_text/netag034.html">“图13-1共享服务器配置的负载平衡环境”的说明</a></div>
                     <!-- class="figure" -->
                     <p>在此示例中， <code class="codeph">sales2-server</code>是负载最少的节点， <code class="codeph">sales2</code>是负载最少的实例， <code class="codeph">dispatcher2</code>是负载最少的调度程序。注册以下负载信息。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>一分钟平均负载为每个实例是600 <code class="codeph">sales1</code>和400 <code class="codeph">sales2</code> 。如果在<code class="codeph">sales1-server</code>上需要更多处理，则会发生这种情况。
                           </p>
                        </li>
                        <li>
                           <p>每个实例的连接数是200 <code class="codeph">sales1</code>和300 <code class="codeph">sales2</code> 。
                           </p>
                        </li>
                        <li>
                           <p>每个实例分配器的连接的数量是200，用于<code class="codeph">dispatcher1</code> ，100 <code class="codeph">dispatcher2</code>和200为<code class="codeph">dispatcher3</code> 。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">sales1</code> （200）的连接数与其唯一的调度程序<code class="codeph">dispatcher1</code>的连接数相同。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">sales2</code> （300）上的连接数是其两个调度程序<code class="codeph">dispatcher2</code> （100）和<code class="codeph">dispatcher3</code> （200）上的连接总和。
                           </p>
                        </li>
                     </ul>
                     <p><code class="codeph">(LISTENER=listeners_sales)</code>的<code class="codeph">listeners_sales</code>值通过两个服务器上的本地<code class="codeph">tnsnames.ora</code>文件解析，如下所示：</p><pre class="oac_no_warn" dir="ltr">listeners_sales =（DESCRIPTION =（ADDRESS_LIST =（ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521））（ADDRESS =（PROTOCOL = tcp）（HOST = sales2-server）（PORT = 1521）） ））</pre><p>根据环境，会发生以下操作。编号的操作对应于<a href="enabling-advanced-features.html#GUID-CEC21150-7831-4501-BEAC-6CC800E7B0E5__BABEFIEE">图13-2中</a>的箭头：</p>
                     <ol>
                        <li>
                           <p>实例<code class="codeph">sales1</code>和<code class="codeph">sales2</code> LREG进程向两个侦听<code class="codeph">sales2</code>注册。侦听器会根据实例和调度程序的负载动态更新。
                           </p>
                        </li>
                        <li>
                           <p>客户端发送连接请求。连接描述符配置为随机尝试每个协议地址，直到成功为止：</p><pre class="oac_no_warn" dir="ltr">sales.us.example.com =（DESCRIPTION =（ <span class="bold"><code class="codeph">LOAD_BALANCE=on</code></span> ）（ <span class="bold"><code class="codeph">FAILOVER=on</code></span> ）（ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521））（ADDRESS =（PROTOCOL = tcp） （HOST = sales2-server）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com）））</pre><p>随机选择<code class="codeph">sales1-server</code>上的监听器来接收客户端连接请求。</p>
                           <p><code class="codeph">sales1-server</code>上的监听器比较实例<code class="codeph">sales1</code>和<code class="codeph">sales2</code>的负载。该比较分别考虑了节点<code class="codeph">sales1-server</code>和<code class="codeph">sales2-server</code>上的负载。由于<code class="codeph">sales2-server</code>的负载低于<code class="codeph">sales1-server</code> ，因此侦听器选择<code class="codeph">sales2-server</code>不是<code class="codeph">sales1-server</code> 。
                           </p>
                        </li>
                        <li>
                           <p>侦听器比较调度程序<code class="codeph">dispatcher2</code>和<code class="codeph">dispatcher3</code>上的负载。因为<code class="codeph">dispatcher2</code>的负载少于<code class="codeph">dispatcher3</code> ，所以侦听器将客户端连接请求重定向到<code class="codeph">dispatcher2</code> 。
                           </p>
                        </li>
                        <li>
                           <p>客户端直接连接到<code class="codeph">dispatcher2</code> 。
                           </p>
                        </li>
                     </ol>
                     <div class="figure" id="GUID-CEC21150-7831-4501-BEAC-6CC800E7B0E5__BABEFIEE">
                        <p class="titleinfigure">图13-2共享服务器配置的负载平衡示例</p><img width="568" src="img/netag033.gif" alt="下面是图13-2的描述" title="下面是图13-2的描述" longdesc="img_text/netag033.html"><br><a href="img_text/netag033.html">“图13-2共享服务器配置的负载平衡示例”的说明</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-75CC9084-51BB-4B7A-98F7-535B2F8E9B6E">了解连接负载平衡</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETAG1180"></a><a id="NETAG1182"></a><a id="NETAG337"></a><div class="sect3"><a id="GUID-1A1CCEFC-197A-4547-89E3-A062969F6269" name="GUID-1A1CCEFC-197A-4547-89E3-A062969F6269"></a><h4 id="NETAG-GUID-1A1CCEFC-197A-4547-89E3-A062969F6269" class="sect4"><span class="enumeration_section">13.2.2</span>专用服务器配置的连接负载均衡示例</h4>
                  <div>
                     <p><a href="enabling-advanced-features.html#GUID-1A1CCEFC-197A-4547-89E3-A062969F6269__i480663">图13-3</a>示出了具有两个实例，一个Oracle RAC专用服务器数据库<code class="codeph">sales1</code>和<code class="codeph">sales2</code> ，相同的服务， <code class="codeph">sales.us.example.com</code> 。实例<code class="codeph">sales1</code>和<code class="codeph">sales2</code>驻留在计算机<code class="codeph">sales1-server</code>和<code class="codeph">sales2-server</code>上。名为<code class="codeph">listener</code>器的<code class="codeph">listener</code>器在节点1和2上运行。REMOTE_LISTENER初始化参数已配置为允许向两个侦听器的服务注册信息。
                     </p>
                     <div class="figure" id="GUID-1A1CCEFC-197A-4547-89E3-A062969F6269__i480663">
                        <p class="titleinfigure">图13-3专用服务器配置的负载平衡环境</p><img width="437" src="img/netag125.gif" alt="下面是图13-3的描述" title="下面是图13-3的描述" longdesc="img_text/netag125.html"><br><a href="img_text/netag125.html">“图13-3专用服务器配置的负载平衡环境”的说明</a></div>
                     <!-- class="figure" -->
                     <p>在此示例中，注册了以下负载信息：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">sales1-server</code>的节点平均负载为每分钟450。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">sales2-server</code>的节点平均负载为每分钟200。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">sales1</code>有200个连接。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">sales2</code>有150个连接。
                           </p>
                        </li>
                     </ul>
                     <p><code class="codeph">(REMOTE_LISTENER=listener_sales1)</code>的<code class="codeph">listener_sales1</code>值通过<code class="codeph">sales2-server</code>上的本地<code class="codeph">tnsnames.ora</code>文件解析，如下所示：</p><pre class="oac_no_warn" dir="ltr">listener_sales1 =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521）））</pre><p><code class="codeph">(REMOTE_LISTENER=listener_sales2)</code>的<code class="codeph">listener_sales2</code>值通过<code class="codeph">sales1-server</code>上的本地<code class="codeph">tnsnames.ora</code>文件解析，如下所示：</p><pre class="oac_no_warn" dir="ltr">listener_sales2 =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales2-server）（PORT = 1521）））</pre><p>根据环境，会发生以下操作。编号的操作对应于<a href="enabling-advanced-features.html#GUID-1A1CCEFC-197A-4547-89E3-A062969F6269__BABBAEAD">图13-4中</a>的箭头：</p>
                     <ol>
                        <li>
                           <p>实例<code class="codeph">sales1</code>和<code class="codeph">sales2</code> LREG进程向两个侦听<code class="codeph">sales2</code>注册。侦听器会根据实例的负载动态更新。
                           </p>
                           <p>根据前面的信息， <code class="codeph">sales2-server</code>是负载最少的节点， <code class="codeph">sales2</code>是负载最少的实例。
                           </p>
                        </li>
                        <li>
                           <p>客户端发送连接请求。</p>
                           <p>连接描述符配置为随机尝试每个协议地址，直到成功为止：</p><pre class="oac_no_warn" dir="ltr">sales.us.example.com =（DESCRIPTION =（ADDRESS_LIST =（ <span class="bold"><code class="codeph">LOAD_BALANCE=on</code></span> ） <a id="d38386e1969" class="indexterm-anchor"></a> <span class="bold"><code class="codeph">(FAILOVER=on)</code></span> （ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521））（ADDRESS =（PROTOCOL = tcp）（HOST = sales2-server）（PORT = 1521）））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com）））</pre><p>随机选择<code class="codeph">sales1-server</code>上的监听器来接收客户端连接请求。</p>
                           <p><code class="codeph">sales1-server</code>上的监听器比较实例<code class="codeph">sales1</code>和<code class="codeph">sales2</code>的负载。该比较分别考虑了节点<code class="codeph">sales1-server</code>和<code class="codeph">sales2-server</code>上的负载。由于<code class="codeph">sales2-server</code>的负载低于<code class="codeph">sales1-server</code> ，因此侦听器选择<code class="codeph">sales2-server</code>不是<code class="codeph">sales1-server</code> 。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">sales1-server</code>上的监听器将客户端连接请求重定向到<code class="codeph">sales2-server</code>上的监听器。
                           </p>
                        </li>
                        <li>
                           <p>客户端连接到<code class="codeph">sale2-server</code>上的侦听器。侦听器启动专用服务器进程，专用服务器进程继承侦听器的连接请求。
                           </p>
                        </li>
                     </ol>
                     <div class="figure" id="GUID-1A1CCEFC-197A-4547-89E3-A062969F6269__BABBAEAD">
                        <p class="titleinfigure">图13-4专用服务器配置的负载平衡示例</p><img width="616" src="img/netag126.gif" alt="下面是图13-4的描述" title="下面是图13-4的描述" longdesc="img_text/netag126.html"><br><a href="img_text/netag126.html">“图13-4专用服务器配置的负载平衡示例”的说明</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-75CC9084-51BB-4B7A-98F7-535B2F8E9B6E">了解连接负载平衡</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-3D6D04A8-3E62-4F69-871C-6FB374262BBF" name="GUID-3D6D04A8-3E62-4F69-871C-6FB374262BBF"></a><h4 id="NETAG-GUID-3D6D04A8-3E62-4F69-871C-6FB374262BBF" class="sect4"><span class="enumeration_section">13.2.3</span>客户端连接的COLOCATION_TAG</h4>
                  <div>
                     <p><code class="codeph">COLOCATION_TAG</code>参数是一个字母数字字符串，可以与TNS连接字符串的<code class="codeph">CONNECT_DATA</code>参数一起使用。
                     </p>
                     <p>当您设置<code class="codeph">colocation_tag</code>的内<code class="codeph">CONNECT_DATA</code>参数，负载均衡将被忽略。侦听器努力将具有相同<code class="codeph">colocation_tag</code>所有连接发送到同一数据库实例。实例选择算法基于<code class="codeph">colocation_tag</code>以及指定服务的可用实例列表。
                     </p>
                     <p>例如，侦听器将尝试将所有客户端路由到在连接描述符<code class="codeph">COLOCATION_TAG</code>设置为interactive的同一数据库实例。
                     </p><pre class="pre codeblock"><code>sales.us.example.com =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales-server）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com）（COLOCATION_TAG = interactive ）））</code></pre><div class="infoboxnote" id="GUID-3D6D04A8-3E62-4F69-871C-6FB374262BBF__GUID-3FCDE296-6232-429D-88C0-1155FB661C99">
                        <p class="notep1">注意：</p>在某些情况下，例如，当达到实例的最大负载或为服务添加或删除新实例时，具有相同<code class="codeph">colocation_tag</code>的客户端连接与同一数据库实例的共置可能不一致。
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../netrf/local-naming-parameters-in-tns-ora-file.html#NETRF-GUID-9D06528E-BBC4-4629-A119-C216EBF70201" target="_blank">COLOCATION_TAG</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-75CC9084-51BB-4B7A-98F7-535B2F8E9B6E">了解连接负载平衡</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="NETAG455"></a><div class="sect2"><a id="GUID-8F532535-C401-4B51-BE0B-04FD74BB0621" name="GUID-8F532535-C401-4B51-BE0B-04FD74BB0621"></a><h3 id="NETAG-GUID-8F532535-C401-4B51-BE0B-04FD74BB0621" class="sect3"><span class="enumeration_section">13.3</span>配置透明应用程序故障转移</h3>
               <div>
                  <p><a id="d38386e2196" class="indexterm-anchor"></a>透明应用程序故障转移（TAF）指示Oracle Net将失败的连接故障转移到其他侦听器。这使用户能够继续使用新连接工作，就像原始连接从未失败一样。
                  </p>
                  <p>TAF涉及手动配置包含的网络服务名称<a id="d38386e2203" class="indexterm-anchor"></a> FAILOVER_MODE参数包含在连接描述符的CONNECT_DATA部分中。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-1BCF4B66-3F06-468B-9D22-13F057247B93">关于透明应用程序故障转移</a><br></li>
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-E260F418-B04C-43A0-BBB9-2D1D814DA749">什么透明应用程序故障转移还原</a><br></li>
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-21C469A4-1743-40DD-806C-48057E4A4BBD">关于FAILOVER_MODE参数</a><br></li>
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-466CD611-155F-4DD6-9E6C-0A8E6A58B796">实现透明应用程序故障转移</a><br></li>
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-2DACA598-A593-4283-BAD2-7406C56CC146">验证透明应用程序故障转移</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-4354E9E3-F521-48B7-83A0-AADC1970C84F">启用Oracle Net Services的高级功能</a></p>
                     </div>
                  </div>
               </div>
               <a id="NETAG338"></a><div class="sect3"><a id="GUID-1BCF4B66-3F06-468B-9D22-13F057247B93" name="GUID-1BCF4B66-3F06-468B-9D22-13F057247B93"></a><h4 id="NETAG-GUID-1BCF4B66-3F06-468B-9D22-13F057247B93" class="sect4"><span class="enumeration_section">13.3.1</span>关于透明应用程序故障转移</h4>
                  <div>
                     <p>TAF是一种客户端功能，允许客户端在数据库实例发生故障时重新连接到正常运行的数据库。服务器使用通知在客户端触发TAF回调。</p>
                     <p>使用客户端指定的TNS（透明网络基板）连接字符串或使用服务器端服务属性配置TAF。如果两种方法都用于配置TAF，则服务器端服务属性将取代客户端设置。服务器端服务属性是设置TAF的首选方式。</p>
                     <p>TAF可以以两种模式之一运行：会话故障转移和选择故障转移。会话故障转移重新创建丢失的连接和会话。选择“故障转移”重播正在进行的查询。</p>
                     <p>发生故障时，使用Oracle调用接口（OCI）回调在客户端启动回调函数。这适用于标准OCI连接以及连接池和会话池连接。</p>
                     <p>TAF与Oracle Data Guard一起运行以提供自动故障转移。TAF使用以下数据库配置来有效地屏蔽数据库故障：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Oracle Real Application Clusters</p>
                        </li>
                        <li>
                           <p>复制系统</p>
                        </li>
                        <li>
                           <p>备用数据库</p>
                        </li>
                        <li>
                           <p>单实例Oracle数据库</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-1BCF4B66-3F06-468B-9D22-13F057247B93__GUID-1724338D-F4E0-4844-A3F9-533E0C1305E8">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../racad/ensuring-application-continuity.html#RACAD-GUID-DEF850F6-27E9-428E-B8FC-530230D78AD2" target="_blank"><span class="italic">“Oracle Real Application Clusters管理和部署指南”</span></a></p>
                           </li>
                           <li>
                              <p><a href="../lnoci/high-availability-in-oci.html#LNOCI-GUID-0CBC5C17-608B-4C5D-9A88-37FBE27D8029" target="_blank"><span class="italic">Oracle Call Interface Programmer's Guide</span></a> ，了解有关回调和会话池的更多详细信息</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-8F532535-C401-4B51-BE0B-04FD74BB0621">配置透明应用程序故障转移</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETAG339"></a><div class="sect3"><a id="GUID-E260F418-B04C-43A0-BBB9-2D1D814DA749" name="GUID-E260F418-B04C-43A0-BBB9-2D1D814DA749"></a><h4 id="NETAG-GUID-E260F418-B04C-43A0-BBB9-2D1D814DA749" class="sect4"><span class="enumeration_section">13.3.2</span>什么透明应用程序故障转移还原</h4>
                  <div>
                     <p>TAF自动恢复与活动数据库连接关联的部分或全部以下元素。可能需要在应用程序代码中嵌入其他元素以使TAF能够恢复连接。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>客户端 - 服务器数据库连接：TAF使用您在配置故障转移时指定的相同连接字符串或备用连接字符串自动重新建立连接。</p>
                        </li>
                        <li>
                           <p>用户的数据库会话：TAF使用与故障前相同的用户ID自动记录用户。如果多个用户正在使用该连接，则TAF会在尝试处理数据库命令时自动将其登录。不幸的是，TAF无法自动恢复其他会话属性。可以通过调用回调函数来恢复这些属性。</p>
                        </li>
                        <li>
                           <p>已完成的命令：如果在连接失败时完成命令，并且它更改了数据库的状态，则TAF不会重新发送该命令。如果TAF重新连接以响应可能已更改数据库的命令，则TAF向应用程序发出错误消息。</p>
                        </li>
                        <li>
                           <p>用于获取的打开游标：TAF允许在故障转移之前开始从游标中获取行的应用程序在故障转移后继续获取行。这称为选择故障转移。它是通过使用相同的快照重新运行<code class="codeph">SELECT</code>语句，丢弃已经获取的那些行并检索最初未提取的那些行来完成的。TAF验证丢弃的行是最初返回的行，还是返回错误消息。
                           </p>
                        </li>
                        <li>
                           <p>活动事务：任何活动事务在发生故障时回滚，因为TAF无法在故障转移后保留活动事务。在提交<code class="codeph">ROLLBACK</code>命令之前，应用程序会收到错误消息。
                           </p>
                           <p></p>
                        </li>
                        <li>
                           <p>服务器端程序变量：服务器端程序变量（如PL / SQL包状态）在故障期间丢失，TAF无法恢复它们。可以通过从故障转移回调调用来初始化它们。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-E260F418-B04C-43A0-BBB9-2D1D814DA749__GUID-AE09DEDA-6623-4822-BFF1-18313DF4E6C5">
                        <p class="notep1">也可以看看：</p>
                        <p> <a href="../lnoci/session-and-connection-pooling.html#LNOCI090" target="_blank"><span class="italic">Oracle调用接口程序员指南</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-8F532535-C401-4B51-BE0B-04FD74BB0621">配置透明应用程序故障转移</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETAG1183"></a><a id="NETAG347"></a><div class="sect3"><a id="GUID-21C469A4-1743-40DD-806C-48057E4A4BBD" name="GUID-21C469A4-1743-40DD-806C-48057E4A4BBD"></a><h4 id="NETAG-GUID-21C469A4-1743-40DD-806C-48057E4A4BBD" class="sect4"><span class="enumeration_section">13.3.3</span>关于FAILOVER_MODE参数</h4>
                  <div>
                     <p>FAILOVER_MODE参数必须包含在连接描述符的CONNECT_DATA部分中。FAILOVER_MODE参数可以包含<a href="enabling-advanced-features.html#GUID-21C469A4-1743-40DD-806C-48057E4A4BBD__CEGIJFCA" title="FAILOVER_MODE参数的子参数">表13-4中</a>描述的参数。
                     </p>
                     <div class="tblformal" id="GUID-21C469A4-1743-40DD-806C-48057E4A4BBD__CEGIJFCA">
                        <p class="titleintable">表13-4 FAILOVER_MODE参数的附加参数</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="FAILOVER_MODE参数的附加参数" width="100%" border="1" summary="Subparameters of the FAILOVER_MODE Parameter" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="23%" id="d38386e2509">FAILOVER_MODE参数</th>
                                 <th align="left" valign="bottom" width="77%" id="d38386e2512">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d38386e2517" headers="d38386e2509 ">
                                    <p><a id="d38386e2519" class="indexterm-anchor"></a><a id="d38386e2521" class="indexterm-anchor"></a> BACKUP</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d38386e2517 d38386e2512 ">
                                    <p>备份连接的其他网络服务名称。使用<code class="codeph">preconnect</code>预先建立连接时，应指定备份。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d38386e2535" headers="d38386e2509 ">
                                    <p>延迟</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d38386e2535 d38386e2512 ">
                                    <p>连接尝试之间等待的时间（以秒为单位）。如果指定了RETRIES，则DELAY默认为一秒。</p>
                                    <p>如果注册了回调函数，则忽略此参数。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d38386e2544" headers="d38386e2509 ">
                                    <p><a id="d38386e2546" class="indexterm-anchor"></a><a id="d38386e2548" class="indexterm-anchor"></a>方法</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d38386e2544 d38386e2512 ">
                                    <p>从主节点到备份节点的快速故障转移设置：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><code class="codeph">basic</code> ：设置为在故障转移时建立连接。在故障转移时间之前，此选项几乎不需要备份服务器上的任何工作。
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">preconnect</code> ：设置为预先建立的连接。这提供了更快的故障转移，但要求备份实例能够支持来自每个受支持实例的所有连接。
                                          </p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d38386e2570" headers="d38386e2509 ">
                                    <p>RETRIES</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d38386e2570 d38386e2512 ">
                                    <p>故障转移后尝试连接的次数。如果指定了DELAY，则RETRIES默认为五次重试尝试。</p>
                                    <p>如果注册了回调函数，则忽略此参数。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d38386e2579" headers="d38386e2509 ">
                                    <p>交易</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d38386e2579 d38386e2512 ">
                                    <p>在可恢复的数据库错误之后完成事务的能力。使用SRVCTL实用程序或DBMS_SERVICE包设置此参数。</p>
                                    <p>此参数与<code class="codeph">COMMIT_OUTCOME=TRUE</code> 。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d38386e2591" headers="d38386e2509 ">
                                    <p><a id="d38386e2593" class="indexterm-anchor"></a><a id="d38386e2595" class="indexterm-anchor"></a>类型</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d38386e2591 d38386e2512 ">
                                    <p>故障转移的类型。默认情况下，Oracle Call Interface（OCI）应用程序可以使用三种类型的Oracle Net故障转移功能：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><code class="codeph">session</code> ：设置为对会话进行故障转移。如果用户的连接丢失，则会在备份上为用户自动创建新会话。此类故障转移不会尝试恢复选择操作。
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">select</code> ：设置为允许具有打开游标的用户在失败后继续获取它们。但是，此模式涉及正常选择操作中客户端的开销。
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">none</code> ：这是默认值。没有使用故障转移功能。这也可以明确指定，以防止发生故障转移。
                                          </p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnote" id="GUID-21C469A4-1743-40DD-806C-48057E4A4BBD__GUID-2EAD55C9-2E66-4D87-8A4B-61B7776DA8D4">
                        <p class="notep1">注意：</p>
                        <p>Oracle Net Manager不提供对TAF参数的支持。必须手动设置这些参数。</p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-8F532535-C401-4B51-BE0B-04FD74BB0621">配置透明应用程序故障转移</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="NETAG348"></a><div class="sect3"><a id="GUID-466CD611-155F-4DD6-9E6C-0A8E6A58B796" name="GUID-466CD611-155F-4DD6-9E6C-0A8E6A58B796"></a><h4 id="NETAG-GUID-466CD611-155F-4DD6-9E6C-0A8E6A58B796" class="sect4"><span class="enumeration_section">13.3.4</span>实现透明应用程序故障转移</h4>
                  <div>
                     <p>根据FAILOVER_MODE参数，您可以通过多种方式实现TAF。Oracle建议使用以下方法：</p>
                     <div class="infoboxnote" id="GUID-466CD611-155F-4DD6-9E6C-0A8E6A58B796__GUID-E0BF5257-B7A9-4395-B9B5-8253E9F966F6">
                        <p class="notep1">重要：</p>
                        <p>不要在<code class="codeph">listener.ora</code>文件的SID_LIST_ <span class="italic">listener_name</span>部分中设置GLOBAL_DBNAME参数。静态配置的全局数据库名称禁用TAF。<a id="d38386e2689" class="indexterm-anchor"></a></p>
                     </div>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-BEFE6A66-E624-446F-8D9B-881E6C5B72C3">具有连接时故障转移和客户端负载平衡的TAF</a><br></li>
                        <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-394C9DC9-84A4-4DC4-8D56-9E75E1C96250">TAF重试连接</a><br></li>
                        <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-27B3BD1B-49ED-4D78-A5CA-42E3CC1FC2DD">TAF预先建立连接</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-8F532535-C401-4B51-BE0B-04FD74BB0621">配置透明应用程序故障转移</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="NETAG349"></a><div class="sect4"><a id="GUID-BEFE6A66-E624-446F-8D9B-881E6C5B72C3" name="GUID-BEFE6A66-E624-446F-8D9B-881E6C5B72C3"></a><h5 id="NETAG-GUID-BEFE6A66-E624-446F-8D9B-881E6C5B72C3" class="sect5"><span class="enumeration_section">13.3.4.1</span>具有连接时故障转移和客户端负载平衡的TAF</h5>
                     <div>
                        <p>通过连接时故障转移和多个地址的客户端负载平衡实现TAF。在以下示例中，Oracle Net随机连接到<code class="codeph">sales1-server</code>或<code class="codeph">sales2-server</code>上的其中一个协议地址。如果实例在连接后失败，则TAF应用程序将故障转移到另一个节点的侦听器，并保留正在进行的任何<code class="codeph">SELECT</code>语句。
                        </p><pre class="oac_no_warn" dir="ltr">sales.us.example.com =（DESCRIPTION = <span class="bold">（LOAD_BALANCE = on）</span> <span class="bold">（FAILOVER = on）</span> （ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521））（ADDRESS =（PROTOCOL = tcp） （HOST = sales2-server）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com） <span class="bold">（FAILOVER_MODE =</span> <span class="bold">（TYPE = select）</span> <span class="bold">（METHOD = basic））</span> ））</pre><p>虽然前面的示例有多个地址，但未使用<code class="codeph">ADDRESS_LIST</code>参数。这是因为<code class="codeph">ADDRESS_LIST</code>参数不是必需的。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-466CD611-155F-4DD6-9E6C-0A8E6A58B796">实现透明应用程序故障转移</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="NETAG350"></a><div class="sect4"><a id="GUID-394C9DC9-84A4-4DC4-8D56-9E75E1C96250" name="GUID-394C9DC9-84A4-4DC4-8D56-9E75E1C96250"></a><h5 id="NETAG-GUID-394C9DC9-84A4-4DC4-8D56-9E75E1C96250" class="sect5"><span class="enumeration_section">13.3.4.2</span> TAF重试连接</h5>
                     <div>
                        <p>如果第一次连接尝试失败并且使用RETRIES和DELAY参数，TAF还可以自动重试连接。在以下示例中，Oracle Net尝试重新连接到<code class="codeph">sales1-server</code>上的侦听器。如果故障转移连接失败，则Oracle Net会等待15秒再尝试重新连接。Oracle Net尝试重新连接最多20次。
                        </p><pre class="oac_no_warn" dir="ltr">sales.us.example.com =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com） <span class="bold">（FAILOVER_MODE =</span> <span class="bold">（ TYPE = select）</span> <span class="bold">（METHOD = basic）</span> <span class="bold">（RETRIES = 20）</span> <span class="bold">（DELAY = 15））</span> ））</pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-466CD611-155F-4DD6-9E6C-0A8E6A58B796">实现透明应用程序故障转移</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="NETAG351"></a><div class="sect4"><a id="GUID-27B3BD1B-49ED-4D78-A5CA-42E3CC1FC2DD" name="GUID-27B3BD1B-49ED-4D78-A5CA-42E3CC1FC2DD"></a><h5 id="NETAG-GUID-27B3BD1B-49ED-4D78-A5CA-42E3CC1FC2DD" class="sect5"><span class="enumeration_section">13.3.4.3</span> TAF预建连接</h5>
                     <div>
                        <p>可以预先建立备份连接。必须明确指定初始连接和备份连接。在以下示例中，使用网络服务名称<code class="codeph">sales1.us.example.com</code>连接到<code class="codeph">sales1-server</code>上的侦听<code class="codeph">sales1-server</code>也预先连接到<code class="codeph">sales2-server</code> 。如果<code class="codeph">sales1-server</code>在连接后失败，则Oracle Net会故障转移到<code class="codeph">sales2-server</code> ，同时保留正在进行的任何<code class="codeph">SELECT</code>语句。同样，Oracle网络preconnects以<code class="codeph">sales1-server</code>对于那些使用客户<code class="codeph">sales2.us.example.com</code>连接到听者<code class="codeph">sales2-server</code> 。
                        </p><pre class="oac_no_warn" dir="ltr">sales1.us.example.com =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com）（INSTANCE_NAME = sales1 ） <span class="bold">（FAILOVER_MODE =</span> <span class="bold">（BACKUP = sales2.us.example.com）</span> <span class="bold">（TYPE = select）</span> <span class="bold">（METHOD =</span> preconnect <span class="bold">））</span> ））sales2.us.example.com =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales2-server）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com）（INSTANCE_NAME = sales2） <span class="bold">（FAILOVER_MODE =</span> <span class="bold">（BACKUP = sales1.us.example.com）</span> <span class="bold">（TYPE = select）</span> <span class="bold">（METHOD =预连接））</span> ））</pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-466CD611-155F-4DD6-9E6C-0A8E6A58B796">实现透明应用程序故障转移</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="NETAG352"></a><div class="sect3"><a id="GUID-2DACA598-A593-4283-BAD2-7406C56CC146" name="GUID-2DACA598-A593-4283-BAD2-7406C56CC146"></a><h4 id="NETAG-GUID-2DACA598-A593-4283-BAD2-7406C56CC146" class="sect4"><span class="enumeration_section">13.3.5</span>验证透明应用程序故障转移</h4>
                  <div>
                     <p>您可以在V $ SESSION视图中查询FAILOVER_TYPE，FAILOVER_METHOD和FAILED_OVER列，以验证是否正确配置了TAF。要查看列，请使用类似于以下内容的查询：</p><pre class="oac_no_warn" dir="ltr">SELECT MACHINE，FAILOVER_TYPE，FAILOVER_METHOD，FAILED_OVER，COUNT（*）来自V $ SESSION GROUP BY MACHINE，FAILOVER_TYPE，FAILOVER_METHOD，FAILED_OVER;</pre><p>故障转移之前的输出类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">MACHINE FAILOVER_TYPE FAILOVER_METHOD FAILED_OVER COUNT（*）-------------------- ------------- --------- -  --- ---------- sales1 NONE NONE NO 11 sales2 SELECT PRECONNECT NO 1</pre><p>故障转移后的输出类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">MACHINE FAILOVER_TYPE FAILOVER_METHOD FAILED_OVER COUNT（*）-------------------- ------------- --------- -  --- ---------- sales2 NONE NONE NO 10 sales2 SELECT PRECONNECT YES 1</pre><p></p>
                     <div class="infoboxnote" id="GUID-2DACA598-A593-4283-BAD2-7406C56CC146__GUID-9512CA75-49C8-4E76-9B53-5AAF90C064C3">
                        <p class="notep1">注意：</p>
                        <p>您可以使用适当配置的<code class="codeph">OCI TAF CALLBACK</code>功能监控TAF的每个步骤。
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-2DACA598-A593-4283-BAD2-7406C56CC146__GUID-47E38FBB-239E-42ED-A796-8D4ECF55F258">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../lnoci/high-availability-in-oci.html#LNOCI-GUID-F7817CD2-4A2C-4D37-BD36-56DBABD4725F" target="_blank"><span class="italic">Oracle调用接口程序员指南</span></a></p>
                           </li>
                           <li>
                              <p>有关的其他信息，请参阅<a href="../refrn/V-SESSION.html#REFRN30223" target="_blank"><span class="italic">Oracle数据库参考</span></a> <a id="d38386e3080" class="indexterm-anchor"></a> V $ SESSION视图</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-8F532535-C401-4B51-BE0B-04FD74BB0621">配置透明应用程序故障转移</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="NETAG1594"></a><a id="NETAG1184"></a><a id="NETAG1185"></a><a id="NETAG1186"></a><a id="NETAG353"></a><div class="sect2"><a id="GUID-64F8244D-530A-41ED-AB80-3B27F271CD01" name="GUID-64F8244D-530A-41ED-AB80-3B27F271CD01"></a><h3 id="NETAG-GUID-64F8244D-530A-41ED-AB80-3B27F271CD01" class="sect3"><span class="enumeration_section">13.4</span>指定主实例配置和辅助实例配置的实例角色</h3>
               <div>
                  <p>INSTANCE_ROLE <a id="d38386e3173" class="indexterm-anchor"></a><a id="d38386e3175" class="indexterm-anchor"></a> parameter是连接描述符的CONNECT_DATA部分的可选参数。它使您可以指定与Oracle RAC配置的主要或辅助实例的连接。
                  </p>
                  <p>在以下情况下此参数很有用</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您希望显式连接到主实例或辅助实例。默认值是主实例。</p>
                     </li>
                     <li>
                        <p>您希望使用TAF预连接到辅助实例。</p>
                     </li>
                  </ul>
                  <p><a href="enabling-advanced-features.html#GUID-64F8244D-530A-41ED-AB80-3B27F271CD01__CEGCCJGC" title="INSTANCE_ROLE参数">表13-5说明</a>了INSTANCE_ROLE参数。
                  </p>
                  <div class="tblformal" id="GUID-64F8244D-530A-41ED-AB80-3B27F271CD01__CEGCCJGC">
                     <p class="titleintable">表13-5 INSTANCE_ROLE参数</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="INSTANCE_ROLE参数" width="100%" border="1" summary="INSTANCE_ROLE parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d38386e3207">INSTANCE_ROLE参数</th>
                              <th align="left" valign="bottom" width="69%" id="d38386e3210">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d38386e3215" headers="d38386e3207 ">
                                 <p>主</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d38386e3215 d38386e3210 ">
                                 <p>指定与主实例的连接。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d38386e3222" headers="d38386e3207 ">
                                 <p>二级</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d38386e3222 d38386e3210 ">
                                 <p>指定与辅助实例的连接。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d38386e3229" headers="d38386e3207 ">
                                 <p>任何</p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d38386e3229 d38386e3210 ">
                                 <p>指定与具有最低负载的任何实例的连接，而不管主实例或辅助实例角色。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-64F8244D-530A-41ED-AB80-3B27F271CD01__GUID-B53E7B23-B74E-4355-833A-1C14A0692B46">连接到实例角色类型</p>
                  </div>
                  <!-- class="section" -->
                  <p>在以下<code class="codeph">tnsnames.ora</code>文件示例中，网络服务名称<code class="codeph">sales_primary</code>启用与主实例的连接，网络服务名称<code class="codeph">sales_secondary</code>启用与辅助实例的连接。
                  </p><pre class="oac_no_warn" dir="ltr">sales_primary =（DESCRIPTION =（ADDRESS_LIST =（ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521））（ADDRESS =（PROTOCOL = tcp）（HOST = sales2-server）（PORT = 1521）） ）（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com） <span class="bold">（INSTANCE_ROLE = primary）</span> ））sales_secondary =（DESCRIPTION =（ADDRESS_LIST =（ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521） ）（ADDRESS =（PROTOCOL = tcp）（HOST = sales2-server）（PORT = 1521）））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com） <span class="bold">（INSTANCE_ROLE = secondary）</span> ））</pre><div class="section">
                     <p class="subhead2" id="GUID-64F8244D-530A-41ED-AB80-3B27F271CD01__GUID-168D471D-B4D6-4BF0-ADBF-833D2750916C">连接到特定实例</p>
                  </div>
                  <!-- class="section" -->
                  <p>有时Oracle Enterprise Manager Cloud Control和其他系统管理产品需要连接到特定实例，而不管其角色是否执行管理任务。对于这些类型的连接，请配置（ <code class="codeph">INSTANCE_NAME=</code> <span class="italic"><code class="codeph">instance_name</code></span> <code class="codeph">)</code>和（ <code class="codeph">INSTANCE_ROLE=any)</code>以连接到实例，无论其角色如何。
                  </p>
                  <p>在以下示例中，网络服务名称<code class="codeph">sales1</code>启用与<code class="codeph">sales1-server</code>上的实例的连接， <code class="codeph">sales2</code>启用与<code class="codeph">sales2-server</code>上的实例的连接。<code class="codeph">(SERVER=dedicated)</code>指定强制专用服务器连接。
                  </p><pre class="oac_no_warn" dir="ltr">sales1 =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com） <span class="bold">（INSTANCE_ROLE = any）</span> （INSTANCE_NAME = sales1） <span class="bold"><code class="codeph">(SERVER=dedicated)</code></span> ））sales2 =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales2-server）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com） <span class="bold">（INSTANCE_ROLE =任何）</span> （INSTANCE_NAME = sales2） <span class="bold"><code class="codeph">(SERVER=dedicated)</code></span> ））</pre><div class="infoboxnote" id="GUID-64F8244D-530A-41ED-AB80-3B27F271CD01__GUID-6BE995F8-B2A7-4889-9317-AA782F6C4731">
                     <p class="notep1">注意：</p>
                     <p>故障转移与前面的设置不兼容。</p>
                  </div>
                  <div class="section">
                     <p class="subhead2" id="GUID-64F8244D-530A-41ED-AB80-3B27F271CD01__GUID-0745013D-2C14-4022-B94A-0EBC3469E0C0">TAF预先建立连接</p>
                  </div>
                  <!-- class="section" -->
                  <p>如果配置了TAF，则可以预先建立备用连接到辅助实例。必须明确指定初始连接和备份连接。在以下示例中，Oracle Net连接到<code class="codeph">sales1-server</code>上的侦听器，并预连接到<code class="codeph">sales2-server</code> （辅助实例）。如果<code class="codeph">sales1-server</code>在连接后失败，则TAF应用程序将故障转移到<code class="codeph">sales2-server</code> （辅助实例），保留正在进行的任何<code class="codeph">SELECT</code>语句。
                  </p><pre class="oac_no_warn" dir="ltr">sales1.example.com =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales1-server）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com） <span class="bold">（INSTANCE_ROLE = primary）</span> <span class="bold"><code class="codeph">(FAILOVER_MODE=</code></span> <span class="bold"><code class="codeph">(BACKUP=sales2.example.com)</code></span> <span class="bold"><code class="codeph">(TYPE=select)</code></span> <span class="bold"><code class="codeph">(METHOD=preconnect))</code></span> preconnect <span class="bold"><code class="codeph">(METHOD=preconnect))</code></span> ））sales2.example.com =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = sales2-server）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com） <span class="bold">（INSTANCE_ROLE = secondary）</span> ））</pre></div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-4354E9E3-F521-48B7-83A0-AADC1970C84F">启用Oracle Net Services的高级功能</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="NETAG1590"></a><a id="NETAG1591"></a><a id="NETAG1589"></a><div class="sect2"><a id="GUID-0203C8FA-A4BE-44A5-9A25-3D1E578E879F" name="GUID-0203C8FA-A4BE-44A5-9A25-3D1E578E879F"></a><h3 id="NETAG-GUID-0203C8FA-A4BE-44A5-9A25-3D1E578E879F" class="sect3"><span class="enumeration_section">13.5</span>了解静态服务注册</h3>
               <div>
                  <p>在<code class="codeph">listener.ora</code>文件中使用静态配置的信息之前，侦听器使用有关数据库和实例的动态服务信息。在以下情况下，必须配置静态服务信息：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用外部过程调用</p>
                     </li>
                     <li>
                        <p>使用Oracle异构服务</p>
                     </li>
                     <li>
                        <p>使用Oracle Data Guard</p>
                     </li>
                     <li>
                        <p>从Oracle Enterprise Manager Cloud Control以外的工具启动远程数据库</p>
                     </li>
                     <li>
                        <p>早于Oracle8 <span class="italic">i</span>版本2（8.1）的Oracle数据库连接</p>
                     </li>
                  </ul>
                  <p><a href="enabling-advanced-features.html#GUID-0203C8FA-A4BE-44A5-9A25-3D1E578E879F__CEGIHJEE">例13-1</a>显示了为静态服务注册配置的<code class="codeph">listener.ora</code>文件。LISTENER条目定义名为Listener的侦听器的侦听协议地址<a id="d38386e3464" class="indexterm-anchor"></a> SID_LIST_LISTENER条目提供有关监听器侦听器静态支持的外部服务的信息。
                  </p>
                  <div class="example" id="GUID-0203C8FA-A4BE-44A5-9A25-3D1E578E879F__CEGIHJEE">
                     <p class="titleinexample">例13-1示例listener.ora文件</p><pre class="oac_no_warn" dir="ltr"><span class="bold">LISTENER</span> =（DESCRIPTION =（ADDRESS_LIST =（ADDRESS =（PROTOCOL = tcp）（HOST = sales-server）（PORT = 1521））（ADDRESS =（PROTOCOL = ipc）（KEY = extproc）（queuesize = 50）））） <span class="bold">SID_LIST_listener</span> =（SID_LIST =（SID_DESC =（SID_NAME = plsextproc）（ORACLE_HOME = / oracle8）（PROGRAM = extproc）））</pre></div>
                  <!-- class="example" -->
                  <p><code class="codeph">listener.ora</code>文件中的SID_LIST_ <span class="italic">listener_name</span>参数设置指定有关侦听器所服务的数据库的信息。静态配置服务时，侦听器在收到客户端请求时会启动专用服务器进程。如果实例未启动，则服务器将返回<code class="codeph">Oracle not available</code>错误消息。
                  </p>
                  <p>如果数据库找不到侦听器，则使用配置<code class="codeph">listener.ora</code>文件<a id="d38386e3496" class="indexterm-anchor"></a> GLOBAL_DBNAME参数，如以下示例所示</p><pre class="oac_no_warn" dir="ltr">SID_LIST_listener =（SID_LIST =（SID_DESC =（ <span class="bold"><code class="codeph">GLOBAL_DBNAME</code></span> = sales.example.com）（SID_NAME =销售额）（ORACLE_HOME = / u01 / app / oracle））</pre><div class="infoboxnote" id="GUID-0203C8FA-A4BE-44A5-9A25-3D1E578E879F__GUID-C90B3DD4-676F-4AF9-B260-1E338F907652">
                     <p class="notep1">注意：</p>
                     <p>静态配置的全局数据库名称禁用TAF。 <a id="d38386e3508" class="indexterm-anchor"></a>要使用TAF，请不要在<code class="codeph">listener.ora</code>文件的SID_LIST_ <span class="italic">listener_name</span>部分中设置GLOBAL_DBNAME参数。
                     </p>
                  </div>
                  <p><a href="enabling-advanced-features.html#GUID-0203C8FA-A4BE-44A5-9A25-3D1E578E879F__CEGGAGIE" title="sqlnet.ora中的静态服务设置">表13-6说明</a>了<code class="codeph">listener.ora</code>文件中的静态服务设置。
                  </p>
                  <div class="tblformalwide" id="GUID-0203C8FA-A4BE-44A5-9A25-3D1E578E879F__CEGGAGIE">
                     <p class="titleintable">表13-6 listener.ora中的静态服务设置</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="listener.ora中的静态服务设置" width="100%" border="1" summary="Static Service Settings in sqlnet.ora" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="19%" id="d38386e3539">Oracle Net Manager字段</th>
                              <th align="left" valign="bottom" width="21%" id="d38386e3542">listener.ora文件参数</th>
                              <th align="left" valign="bottom" width="61%" id="d38386e3545">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="19%" id="d38386e3550" headers="d38386e3539 ">
                                 <p><a id="d38386e3552" class="indexterm-anchor"></a><a id="d38386e3554" class="indexterm-anchor"></a> SID</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d38386e3550 d38386e3542 ">
                                 <p><a id="d38386e3563" class="indexterm-anchor"></a><a id="d38386e3565" class="indexterm-anchor"></a> SID_NAME</p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d38386e3550 d38386e3545 ">
                                 <p>该<a id="d38386e3575" class="indexterm-anchor"></a><a id="d38386e3577" class="indexterm-anchor"></a><a id="d38386e3583" class="indexterm-anchor"></a><a id="d38386e3585" class="indexterm-anchor"></a>实例的<a href="glossary.html#GUID-8747716F-4706-44ED-B15F-046D1691CA72"><span class="xrefglossterm">Oracle系统标识符（SID）</span></a> 。您可以从初始化参数文件中的INSTANCE_NAME参数获取SID值。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="19%" id="d38386e3596" headers="d38386e3539 ">
                                 <p><a id="d38386e3598" class="indexterm-anchor"></a><a id="d38386e3600" class="indexterm-anchor"></a>服务名称</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d38386e3596 d38386e3542 ">
                                 <p><a id="d38386e3609" class="indexterm-anchor"></a><a id="d38386e3611" class="indexterm-anchor"></a> GLOBAL_DBNAME</p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d38386e3596 d38386e3545 ">
                                 <p>数据库服务。</p>
                                 <p>在处理客户端连接请求时，侦听器会尝试将此参数的值与客户端连接描述符中的SERVICE_NAME参数的值进行匹配。如果客户端连接描述符使用SID参数，则侦听器不会尝试映射值。此参数主要用于具有Oracle8数据库的配置（其中专用服务器不支持动态服务注册）。某些配置可能还需要此参数才能与Oracle8 <span class="italic">i</span>及更高版本的数据库服务一起使用。
                                 </p>
                                 <p>此参数的值通常从初始化参数文件中的DB_NAME和DB_DOMAIN参数（DB_NAME.DB_DOMAIN）的组合中获取，但该值还可以包含客户端用于标识服务的任何有效名称。</p>
                                 <p>将连接描述符与SERVICE_NAME参数一起使用时，请确保任何SID_DESC条目都没有值<code class="codeph">GLOBAL_DBNAME</code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="19%" id="d38386e3634" headers="d38386e3539 ">
                                 <p><a id="d38386e3636" class="indexterm-anchor"></a><a id="d38386e3638" class="indexterm-anchor"></a> Oracle主目录</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d38386e3634 d38386e3542 ">
                                 <p><a id="d38386e3647" class="indexterm-anchor"></a><a id="d38386e3649" class="indexterm-anchor"></a> ORACLE_HOME</p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d38386e3634 d38386e3545 ">
                                 <p>实例的Oracle主目录位置。如果没有此设置，则侦听器将为其预设Oracle主目录。</p>
                                 <p>在Linux和UNIX上，此设置是可选的。</p>
                                 <p>在Microsoft Windows上，将忽略此设置。使用由Microsoft Windows注册表的<code class="codeph">HKEY_LOCAL_MACHINE\SOFTWARE\ORACLE\HOME</code> <span class="italic"><code class="codeph">ID</code></span>中的ORACLE_HOME参数指定的Oracle主目录。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="19%" id="d38386e3670" headers="d38386e3539 ">
                                 <p>不适用</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d38386e3670 d38386e3542 ">
                                 <p>SID_LIST_ <span class="italic">listener_name</span></p>
                              </td>
                              <td align="left" valign="top" width="61%" headers="d38386e3670 d38386e3545 ">
                                 <p><code class="codeph">listener.ora</code>文件的一部分，用于定义<code class="codeph">listener.ora</code>器所服务的数据库。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-E850457F-60EC-4BCB-B4EC-53A97E0A3919">配置监听器的静态注册</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-4354E9E3-F521-48B7-83A0-AADC1970C84F">启用Oracle Net Services的高级功能</a></p>
                     </div>
                  </div>
               </div>
               <a id="NETAG1592"></a><div class="sect3"><a id="GUID-E850457F-60EC-4BCB-B4EC-53A97E0A3919" name="GUID-E850457F-60EC-4BCB-B4EC-53A97E0A3919"></a><h4 id="NETAG-GUID-E850457F-60EC-4BCB-B4EC-53A97E0A3919" class="sect4"><span class="enumeration_section">13.5.1</span>配置监听器的静态注册</h4>
                  <div>
                     <p>以下过程描述了如何静态配置侦听器：</p>
                     <div class="infoboxnote" id="GUID-E850457F-60EC-4BCB-B4EC-53A97E0A3919__GUID-E5931323-914C-4E69-9D64-5606440A7DC4">
                        <p class="notep1">注意：</p>
                        <p><a id="d38386e3749" class="indexterm-anchor"></a>如果你是<a id="d38386e3754" class="indexterm-anchor"></a><a id="d38386e3758" class="indexterm-anchor"></a>使用连接时故障转移或TAF（例如在Oracle Real Application Clusters环境中），则不要设置GLOBAL_DBNAME参数。
                        </p>
                     </div>
                     <ol>
                        <li>
                           <p>访问Oracle企业管理器云控制中的“网络服务管理”页面。</p>
                           <div class="infoboxnotealso" id="GUID-E850457F-60EC-4BCB-B4EC-53A97E0A3919__GUID-5B5B1C24-BD81-4A29-A6D0-9467C06B0FC7">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-697E4B64-854C-49BB-B287-C2B4C57F987F">使用Oracle Enterprise Manager云控制配置Oracle Net服务</a> ”</span></p>
                           </div>
                        </li>
                        <li>
                           <p>从“管理”列表中选择“ <span class="bold">侦听器</span> ”，然后选择包含配置文件的Oracle主目录。
                           </p>
                        </li>
                        <li>
                           <p>单击<span class="bold">Go</span> 。系统可能会提示您登录数据库服务器。
                           </p>
                           <p>将显示“监听器”页面。</p>
                        </li>
                        <li>
                           <p>选择一个侦听器，然后单击“ <span class="bold">编辑”</span> 。
                           </p>
                           <p>将出现“编辑侦听器”页面。</p>
                        </li>
                        <li>
                           <p>单击“ <span class="bold">静态数据库注册”</span>选项卡，然后单击“ <span class="bold">添加”</span> 。
                           </p>
                           <p>将出现“添加数据库服务”页面在字段中输入所需信息。</p>
                        </li>
                        <li>
                           <p>单击<span class="bold">确定</span> 。</p>
                           <div class="infoboxnote" id="GUID-E850457F-60EC-4BCB-B4EC-53A97E0A3919__GUID-200E7B9D-DCD1-463F-8E33-5DD219F2F9C1">
                              <p class="notep1">注意：</p>
                              <p>您还可以使用Oracle Net Manager配置静态服务信息。有关其他<span class="bold">信息</span> ，请参阅联机帮助中的<span class="bold">静态配置数据库服务</span>信息。
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-E850457F-60EC-4BCB-B4EC-53A97E0A3919__GUID-2D855FC6-D152-40B5-8EA5-7F483848EE95">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="configuring-and-administering-oracle-net-listener.html#GUID-A7F49477-1F13-49E7-9B23-9A50A4627862">配置动态服务注册</a> ”</span>以获取有关配置动态服务注册Oracle数据库的其他信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-0203C8FA-A4BE-44A5-9A25-3D1E578E879F">了解静态服务注册</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="NETAG888"></a><div class="sect2"><a id="GUID-9E45CE8B-BCAB-407D-8F8E-14A05036BC3D" name="GUID-9E45CE8B-BCAB-407D-8F8E-14A05036BC3D"></a><h3 id="NETAG-GUID-9E45CE8B-BCAB-407D-8F8E-14A05036BC3D" class="sect3"><span class="enumeration_section">13.6</span>配置与第三方数据库服务的连接</h3>
               <div>
                  <p>以下主题描述如何配置与第三方数据库服务的连接：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB">外部过程的默认配置</a><br></li>
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-AD068B69-6790-4699-A710-A22C3482AE4B">关于Oracle Net Services for Oracle异构服务</a><br></li>
                     <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-647A53C5-A519-47D5-A879-F178246B1010">为Oracle Rdb数据库配置Oracle Net Services</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-4354E9E3-F521-48B7-83A0-AADC1970C84F">启用Oracle Net Services的高级功能</a></p>
                     </div>
                  </div>
               </div>
               <a id="NETAG1189"></a><a id="NETAG0132"></a><div class="sect3"><a id="GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB" name="GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB"></a><h4 id="NETAG-GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB" class="sect4"><span class="enumeration_section">13.6.1</span>外部过程的默认配置</h4>
                  <div>
                     <p>一个<a id="d38386e3957" class="indexterm-anchor"></a> <a href="glossary.html#GUID-EFD64542-6B81-4634-A0E1-CE819AEF558E"><span class="xrefglossterm">外部程序</span></a> <a id="d38386e3964" class="indexterm-anchor"></a><a id="d38386e3968" class="indexterm-anchor"></a><a id="d38386e3972" class="indexterm-anchor"></a><a id="d38386e3976" class="indexterm-anchor"></a>是一个用另一个程序调用的程序，用不同的语言编写。一个例子是PL / SQL程序调用执行专用处理所需的一个或多个C例程。
                     </p>
                     <p>当应用程序调用外部过程时<a id="d38386e3983" class="indexterm-anchor"></a> ，Oracle Database启动一个名为的外部过程代理<a id="d38386e3988" class="indexterm-anchor"></a><a id="d38386e3990" class="indexterm-anchor"></a> EXTPROC。使用Oracle数据库建立的网络连接，应用程序将以下信息传递给代理：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>DLL或共享库名称</p>
                        </li>
                        <li>
                           <p>外部程序名称</p>
                        </li>
                        <li>
                           <p>任何参数</p>
                        </li>
                     </ul>
                     <p>然后，代理加载DLL或共享库，并运行外部过程并将外部过程返回的任何值传递回应用程序。代理必须与进行外部过程调用的应用程序驻留在同一台计算机上。</p>
                     <p>对外部过程使用默认配置时， <code class="codeph">extproc</code>代理将由Oracle数据库直接生成。<code class="codeph">listener.ora</code>或<code class="codeph">tnsnames.ora</code>文件不需要进行任何配置更改。但是，必须在<code class="codeph">ORACLE_HOME/hs/admin</code>目录中的<code class="codeph">extproc.ora</code>文件中定义外部过程使用的环境变量。如果未使用外部过程的默认配置，则必须设置<a href="enabling-advanced-features.html#GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB__G508505" title="listener.ora中的外部过程设置">表13-7中</a>列出的参数。
                     </p>
                     <div class="tblformalwide" id="GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB__G508505">
                        <p class="titleintable">表13-7 listener.ora中的外部过程设置</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="listener.ora中的外部过程设置" width="100%" border="1" summary="External Procedures Settings in listener.ora" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d38386e4041">Oracle企业管理器云控制字段</th>
                                 <th align="left" valign="bottom" width="16%" id="d38386e4044">listener.ora参数</th>
                                 <th align="left" valign="bottom" width="62%" id="d38386e4047">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d38386e4052" headers="d38386e4041 ">
                                    <p><a id="d38386e4054" class="indexterm-anchor"></a><a id="d38386e4056" class="indexterm-anchor"></a>程序名称</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d38386e4052 d38386e4044 ">
                                    <p><a id="d38386e4065" class="indexterm-anchor"></a><a id="d38386e4067" class="indexterm-anchor"></a>程序</p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d38386e4052 d38386e4047 ">
                                    <p>外部过程代理可执行文件的名称。</p>
                                    <p><span class="bold">注意：</span>在Microsoft Windows上，可执行文件必须位于<code class="codeph">ORACLE_HOME\bin</code>目录中。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d38386e4085" headers="d38386e4041 ">
                                    <p><a id="d38386e4087" class="indexterm-anchor"></a><a id="d38386e4089" class="indexterm-anchor"></a>环境变量</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d38386e4085 d38386e4044 ">
                                    <p><a id="d38386e4098" class="indexterm-anchor"></a><a id="d38386e4100" class="indexterm-anchor"></a> ENVS</p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d38386e4085 d38386e4047 ">
                                    <p>位于<code class="codeph">ORACLE_HOME/hs/admin</code>目录中的<code class="codeph">extproc.ora</code>文件中的外部过程使用的环境变量。
                                    </p>
                                    <p><span class="bold">注意：</span>当使用<code class="codeph">extproc.ora</code> ，它在<code class="codeph">listener.ora</code>的<code class="codeph">ENVS</code>的相同环境变量之前。
                                    </p>
                                    <p><span class="bold">语法：</span> <code class="codeph">SET</code> <span class="italic"><code class="codeph">name=</code></span> <span class="italic"><code class="codeph">value</code></span></p>
                                    <p><span class="bold">示例：</span> <code class="codeph">SET EXTPROC_DLLS=ANY</code></p>
                                    <p>指定<a id="d38386e4149" class="indexterm-anchor"></a> EXTPROC_DLLS环境变量，用于限制允许加载extproc代理的DLL。如果没有EXTPROC_DLLS环境变量，extproc代理将从UNIX操作系统上的<code class="codeph">ORACLE_HOME/lib</code>目录和Microsoft Windows上的<code class="codeph">ORACLE_HOME\bin</code>目录中加载DLL。
                                    </p>
                                    <p>将EXTPROC_DLLS设置为以下值之一：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>以冒号分隔的DLL <a id="GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB__CEGIAGDJ" name="GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB__CEGIAGDJ" href="#GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB__CEGIAGDJ" the="" dlls="" are="" separated="" by="" semi-colons="" (;)="" on="" microsoft="" windows=")" ="" ="" onclick="footdisplay(1, "><sup>脚1</sup></a>列表</p>
                                          <p><span class="bold">语法：</span> <code class="codeph">"</code> <span class="italic"><code class="codeph">DLL</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">DLL</code></span> <code class="codeph">"</code></p>
                                          <p>此值允许extproc代理从UNIX操作系统上的<code class="codeph">ORACLE_HOME/lib</code>目录和Microsoft Windows上的<code class="codeph">ORACLE_HOME\bin</code>目录加载指定的DLL和DLL。您必须输入DLL的完整目录路径和文件名。
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">ONLY</code> （建议最大安全性） <a id="fnsrc_d38386e4196" name="fnsrc_d38386e4196" href="#fnsrc_d38386e4196" the="" dlls="" are="" separated="" by="" semi-colons="" (;)="" on="" microsoft="" windows=")" ="" ="" onclick="footdisplay(1, "><sup>Footref 1</sup></a></p>
                                          <p><span class="bold">语法：</span> <code class="codeph">"ONLY:</code> <span class="italic"><code class="codeph">DLL</code></span> <code class="codeph">:</code> <span class="italic"><code class="codeph">DLL</code></span> <code class="codeph">"</code></p>
                                          <p>此值允许extproc代理仅加载指定的DLL。您必须输入DLL的完整目录路径和文件名。</p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">任何</code></p>
                                          <p><span class="bold">语法：</span> <code class="codeph">"ANY"</code></p>
                                          <p><span class="bold">说明：</span>此值允许extproc代理加载任何DLL。 <code class="codeph">ANY</code>禁用DLL检查。
                                          </p>
                                       </li>
                                    </ul>
                                    <p><span class="bold">例子：</span></p><pre class="oac_no_warn" dir="ltr">“EXTPROC_DLLS = / home / xyz / mylib.so:/home/abc/urlib.so,LD_LIBRARY_PATH = / private / xpm / lib：/ private / mylibs，MYPATH = / usr / ucb：/ usr / local / packages，APL_ENV_FILE = / apl / conf / env.txt“”EXTPROC_DLLS = ONLY：/home/xyz/mylib.so:/home/abc/urlib.so,LD_LIBRARY_PATH = / private / xpm / lib：/ private / mylibs，MYPATH = / usr / ucb：/usr/local/packages,APL_ENV_FILE=/apl/conf/env.txt“”EXTPROC_DLLS = ANY，LD_LIBRARY_PATH = / private / xpm / lib：/ private / mylibs，MYPATH = / usr / ucb：/ usr /local/packages,APL_ENV_FILE=/apl/conf/env.txt”</pre><div class="infoboxnote" id="GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB__GUID-B1949C7E-B3C6-4435-AA5E-71437932B432">
                                       <p class="notep1">注意：</p>如果有效用户和真实用户，或有效组和实际组不同，则忽略<code class="codeph">LD_LIBRARY_PATH</code>环境设置。
                                    </div>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d38386e4244" headers="d38386e4041 ">
                                    <p><a id="d38386e4246" class="indexterm-anchor"></a><a id="d38386e4248" class="indexterm-anchor"></a> Oracle主目录</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d38386e4244 d38386e4044 ">
                                    <p><a id="d38386e4257" class="indexterm-anchor"></a><a id="d38386e4259" class="indexterm-anchor"></a> ORACLE_HOME</p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d38386e4244 d38386e4047 ">
                                    <p>代理的Oracle主目录位置。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d38386e4270" headers="d38386e4041 ">
                                    <p>Oracle系统标识符（ <a id="d38386e4273" class="indexterm-anchor"></a><a id="d38386e4275" class="indexterm-anchor"></a> SID）</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d38386e4270 d38386e4044 ">
                                    <p><a id="d38386e4284" class="indexterm-anchor"></a><a id="d38386e4286" class="indexterm-anchor"></a> SID_NAME</p>
                                 </td>
                                 <td align="left" valign="top" width="62%" headers="d38386e4270 d38386e4047 ">
                                    <p>任何名称的外部过程代理的系统标识符。</p>
                                    <p>有关如何使用Oracle侦听器生成的外部过程代理的详细信息，请参阅<a href="enabling-advanced-features.html#GUID-CFDD995D-54F5-4CD9-8CA1-345609A0113A">配置Oracle Net Services for External Procedures中</a>的示例。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p class="tablefootnote"><sup class="tablefootnote">脚注1</sup></p><p>DLL在Microsoft Windows上由分号（;）分隔。</p>
                     <p></p>
                     <div class="infoboxnote" id="GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB__GUID-4A4E3C3C-7F8C-49B8-B266-F3186B7F43D6">
                        <p class="notep1">注意：</p>
                        <p>外部过程的默认配置不需要网络侦听器与Oracle数据库和<code class="codeph">extproc</code>代理一起使用。<code class="codeph">extproc</code>代理由Oracle数据库直接生成，消除了Oracle Listener可能意外生成<code class="codeph">extproc</code>代理的风险。建议使用此默认配置以获得最大安全性。
                        </p>
                        <p>您可以更改外部过程的默认配置，并让Oracle Listener生成<code class="codeph">extproc</code>代理。为此，您必须执行其他网络配置步骤。
                        </p>
                        <p>如果您使用以下内容，则必须使用Oracle Listener生成的<code class="codeph">extproc</code>代理：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>多线程代理</p>
                           </li>
                           <li>
                              <p>Microsoft Windows上的MTS模式下的Oracle数据库</p>
                           </li>
                           <li>
                              <p>LIBRARY规范的AGENT子句或PROCEDURE规范的AGENT IN子句，以便您可以将外部过程重定向到不同的<code class="codeph">extproc</code>代理。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-CFDD995D-54F5-4CD9-8CA1-345609A0113A">为外部过程配置Oracle Net Services</a><br></li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB__GUID-99D8F1EF-1BEE-4E14-AA51-641E93777F32">
                        <p class="notep1">也可以看看：</p>
                        <p>有关保护外部过程的其他信息，请参见<a href="../dbseg/managing-security-for-application-developers.html#DBSEG656" target="_blank"><span class="italic">“Oracle数据库安</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-9E45CE8B-BCAB-407D-8F8E-14A05036BC3D">配置与第三方数据库服务的连接</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="NETAG1187"></a><a id="NETAG1188"></a><a id="NETAG354"></a><div class="sect4"><a id="GUID-CFDD995D-54F5-4CD9-8CA1-345609A0113A" name="GUID-CFDD995D-54F5-4CD9-8CA1-345609A0113A"></a><h5 id="NETAG-GUID-CFDD995D-54F5-4CD9-8CA1-345609A0113A" class="sect5"><span class="enumeration_section">13.6.1.1</span>为外部过程配置Oracle Net Services</h5>
                     <div>
                        <p>您可以更改外部过程的默认配置，并使侦听器生成类似于早期版本的Oracle数据库的extproc代理。这是过程：</p>
                        <p>1。配置现有侦听器或创建新侦听器以提供外部过程。</p>
                        <p><a href="enabling-advanced-features.html#GUID-CFDD995D-54F5-4CD9-8CA1-345609A0113A__CEGGJBFC">例13-2</a>显示了<code class="codeph">listener.ora</code>文件中的示例配置。
                        </p>
                        <div class="example" id="GUID-CFDD995D-54F5-4CD9-8CA1-345609A0113A__CEGGJBFC">
                           <p class="titleinexample">示例13-2带有外部过程的listener.ora文件</p><pre class="oac_no_warn" dir="ltr">LISTENER =（DESCRIPTION =（ADDRESS_LIST =（ADDRESS =（PROTOCOL = tcp）（HOST = sale-server）（PORT = 1521）） <span class="bold">（ADDRESS =（PROTOCOL = ipc）（KEY = extproc）</span> ）））SID_LIST_LISTENER =（SID_LIST = （SID_DESC =（GLOBAL_DBNAME = sales.us.example.com）（ORACLE_HOME = / oracle）（SID_NAME = sales））（SID_DESC =（SID_NAME = plsextproc）（ORACLE_HOME = / oracle）（PROGRAM = extproc）））</pre></div>
                        <!-- class="example" -->
                        <p>2。在<code class="codeph">tnsnames.ora</code>添加一个新条目。
                        </p>
                        <p><a href="enabling-advanced-features.html#GUID-CFDD995D-54F5-4CD9-8CA1-345609A0113A__CEGBICIC">例13-3</a>显示了<code class="codeph">tnsnames.ora</code>文件中的示例配置。
                        </p>
                        <div class="example" id="GUID-CFDD995D-54F5-4CD9-8CA1-345609A0113A__CEGBICIC">
                           <p class="titleinexample">示例13-3带外部过程的tnsnames.ora文件</p><pre class="oac_no_warn" dir="ltr">EXTPROC_CONNECTION_DATA_1 =（DESCRIPTION =（ADDRESS =（PROTOCOL = ipc） <span class="bold"><code class="codeph">(KEY=extproc)</code></span> ）（CONNECT_DATA = <span class="bold"><code class="codeph">(SID=plsextproc)</code></span> ））</pre></div>
                        <!-- class="example" -->
                        <p>3。使用<code class="codeph">AGENT</code>的条款<code class="codeph">LIBRARY</code>说明书或<code class="codeph">AGENT IN</code>的条款<code class="codeph">PROCEDURE</code>规范，使得可以将外部程序重定向到一个不同<code class="codeph">extproc</code>剂（例如， <code class="codeph">extproc</code>由Oracle侦听生成）。
                        </p><pre class="pre codeblock"><code>$ cat test.c #include &lt;stdlib.h&gt; int negative（char * db，int n）{return -1 * n; } char * mygetenv（const char * env）{return getenv（env）; } $ gcc -shared -fPIC -o test.so test.c $ cp test.so $ ORACLE_HOME / lib</code></pre><p>在<code class="codeph">SQL*PLUS</code> ，运行：</p><pre class="pre codeblock"><code>DROP DATABASE LINK extproclink;创建数据库链接extproclink使用'extproc_connection_data_1';创建或替换LIBRARY test1 AS'$ ORACLE_HOME / lib / test.so'; /  - 在LIBRARY SPEC中使用'AGENT'子句 - 创建或替换库test2 AS'$ ORACLE_HOME / lib / test.so'AGENT'txtproclink'; /  -   - 在功能中使用'AGENT IN'子句 - 创建或替换功能ftest1（x VARCHAR2，y BINARY_INTEGER）返回BINARY_INTEGER作为语言C库test1名称“否定”参数（x STRING，y INT）代理（x ）; / CREATE或REPLACE FUNCTION ftest2（x VARCHAR2）RETURN VARCHAR2 as LANGUAGE C LIBRARY test2 NAME“mygetenv”; / $ select ftest1（'extproclink'，123）来自dual; $ select ftest2（'LD_LIBRARY_PATH'）来自dual;</code></pre><p>外部过程的侦听器应该具有一个用户帐户，该用户帐户不具有对<code class="codeph">oracle</code>用户拥有的文件的一般访问权限。具体而言，此用户不应具有读取或写入数据库文件或Oracle服务器地址空间的权限。此外，此用户应具有对<code class="codeph">listener.ora</code>文件的读访问权限，但不能具有对其的写访问权。
                        </p>
                        <p>使用较低权限运行侦听器还会阻止使用Listener Control <code class="codeph">SET</code>命令更改<code class="codeph">listener.ora</code>文件中侦听器的配置。因此，Oracle建议您在运行侦听器之前完成<code class="codeph">listener.ora</code>文件配置。
                        </p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-55464AA2-686D-43C3-8BA3-DF539AE03CA1">修改外部过程的默认配置</a><br></li>
                           <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-80C459B1-4D97-4A90-ABA6-2252895442DA">创建一个新的监听器来运行外部程序</a><br></li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB">外部过程的默认配置</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="NETAG1473"></a><div class="sect5"><a id="GUID-55464AA2-686D-43C3-8BA3-DF539AE03CA1" name="GUID-55464AA2-686D-43C3-8BA3-DF539AE03CA1"></a><h6 id="NETAG-GUID-55464AA2-686D-43C3-8BA3-DF539AE03CA1" class="sect6"><span class="enumeration_section">13.6.1.1.1</span>修改外部过程的默认配置</h6>
                        <div>
                           <p><a id="d38386e4566" class="indexterm-anchor"></a><a id="d38386e4572" class="indexterm-anchor"></a>要修改外部过程的默认配置，请配置并运行单独的或现有的侦听器以提供外部过程。以下过程介绍了如何修改默认配置：</p>
                           <ol>
                              <li>
                                 <p>使用Oracle Net Configuration Assistant配置现有侦听器以提供外部过程，如下所示。对于大多数安装类型，此侦听器名为<code class="codeph">LISTENER</code> 。</p>
                                 <ol type="a">
                                    <li>
                                       <p>访问Oracle企业管理器云控制中的“网络服务管理”页面。</p>
                                    </li>
                                    <li>
                                       <p>从“管理”列表中选择“ <span class="bold">侦听器</span> ”，然后选择包含配置文件位置的Oracle主目录。
                                       </p>
                                    </li>
                                    <li>
                                       <p>单击<span class="bold">Go</span> 。</p>
                                       <p>将显示“监听器”页面。</p>
                                    </li>
                                    <li>
                                       <p>选择Oracle Net Configuration Assistant创建的现有侦听器，然后单击“ <span class="bold">编辑”</span> 。
                                       </p>
                                       <p>将出现“编辑侦听器”页面。</p>
                                    </li>
                                    <li>
                                       <p>在“地址”部分中，选择外部过程的协议地址，然后单击“ <span class="bold">添加”</span> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p>单击“ <span class="bold">其他服务”</span>选项卡。
                                       </p>
                                    </li>
                                    <li>
                                       <p>选择表示外部过程的服务信息的行，然后单击“ <span class="bold">添加”</span> 。
                                       </p>
                                    </li>
                                 </ol>
                              </li>
                              <li>
                                 <p>在<code class="codeph">listener.ora</code>文件中添加有关extproc代理的服务信息，包括<a href="enabling-advanced-features.html#GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB__G508505" title="listener.ora中的外部过程设置">表13-7中</a>描述的参数。
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-CFDD995D-54F5-4CD9-8CA1-345609A0113A">为外部过程配置Oracle Net Services</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="NETAG1474"></a><div class="sect5"><a id="GUID-80C459B1-4D97-4A90-ABA6-2252895442DA" name="GUID-80C459B1-4D97-4A90-ABA6-2252895442DA"></a><h6 id="NETAG-GUID-80C459B1-4D97-4A90-ABA6-2252895442DA" class="sect6"><span class="enumeration_section">13.6.1.1.2</span>创建新的侦听器以运行外部过程</h6>
                        <div>
                           <p>要配置和运行单独的侦听器以提供外部过程，请使用Oracle Net Configuration Assistant为其他侦听器创建外部过程条目。以下过程描述如何创建新侦听器：</p>
                           <ol>
                              <li>
                                 <p>创建一个侦听器来专门处理外部过程，如下所示：</p>
                                 <ol type="a">
                                    <li>
                                       <p>导航到“监听器”页面。</p>
                                    </li>
                                    <li>
                                       <p>单击“ <span class="bold">创建”</span>
                                       </p>
                                       <p>将出现“创建侦听器”页面。</p>
                                    </li>
                                    <li>
                                       <p>在Listener Name字段中，在Listener Name字段中输入唯一的侦听器名称，例如<code class="codeph">LISTENEREXTPROC</code> 。
                                       </p>
                                    </li>
                                 </ol>
                              </li>
                              <li>
                                 <p>在“地址”部分中，配置IPC协议地址，如下所示：</p>
                                 <ol type="a">
                                    <li>
                                       <p>单击<span class="bold">添加</span> 。
                                       </p>
                                       <p>将出现“添加地址”页面。</p>
                                    </li>
                                    <li>
                                       <p>从Protocol列表中，选择<span class="bold">IPC</span> 。</p>
                                    </li>
                                    <li>
                                       <p>在“密钥”字段中，输入extproc代理的密钥值。</p>
                                    </li>
                                    <li>
                                       <p>单击<span class="bold">确定</span> 。</p>
                                       <div class="infoboxnotealso" id="GUID-80C459B1-4D97-4A90-ABA6-2252895442DA__GUID-4DE6D66B-0088-4424-B95C-300477DCEA1A">
                                          <p class="notep1">也可以看看：</p>
                                          <p><span class="q">“ <a href="configuring-and-administering-oracle-net-listener.html#GUID-B16FD816-5871-4AD7-86D1-55DDD8531322">配置听力协议地址</a> ”</span>为附加信息有关配置侦听协议地址</p>
                                       </div>
                                    </li>
                                 </ol>
                              </li>
                              <li>
                                 <p>在<code class="codeph">listener.ora</code>文件中添加有关extproc代理的服务信息，包括<a href="enabling-advanced-features.html#GUID-8B71CC48-B8F7-4543-915B-87FF6C3E39DB__G508505" title="listener.ora中的外部过程设置">表13-7中</a>描述的参数，如下所示：<a id="d38386e4765" class="indexterm-anchor"></a></p>
                                 <ol type="a">
                                    <li>
                                       <p>单击“ <span class="bold">其他服务”</span>选项卡。
                                       </p>
                                    </li>
                                    <li>
                                       <p>单击<span class="bold">添加</span> 。
                                       </p>
                                       <p>将出现“创建其他服务”页面。</p>
                                    </li>
                                    <li>
                                       <p>在字段中输入以下值：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>程序名称字段中的<code class="codeph">extproc</code> 。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">extproc</code>可执行文件所在的Oracle主目录位于Oracle主目录字段中。
                                             </p>
                                          </li>
                                          <li>
                                             <p>SID字段中的系统标识符，例如<code class="codeph">extproc</code> 。
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p>在“环境变量”部分中，单击“ <span class="bold">添加另一行”</span> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p>在“名称”字段中输入EXTPROC_DLLS环境变量，在“值”字段中输入DLL的目录路径和文件名。</p>
                                    </li>
                                    <li>
                                       <p>单击<span class="bold">确定</span> 。</p>
                                       <p>将出现“创建侦听器”页面。</p>
                                    </li>
                                    <li>
                                       <p>单击“ <span class="bold">确定”</span>以添加侦听器。
                                       </p>
                                       <p>侦听器将添加到“侦听器”页面。</p>
                                       <p><code class="codeph">listener.ora</code>文件更新了外部过程的信息，如以下输出所示：</p><pre class="oac_no_warn" dir="ltr">LISTENEREXTPROC =（DESCRIPTION =（ADDRESS =（PROTOCOL = ipc）（KEY = extproc）））</pre></li>
                                 </ol>
                              </li>
                              <li>
                                 <p>从具有比<code class="codeph">oracle</code>用户更低权限的用户帐户启动外部过程的侦听器。
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-80C459B1-4D97-4A90-ABA6-2252895442DA__GUID-ED1C9CC0-3D62-4C00-8574-BDD3F94BE05B">
                              <p class="notep1">也可以看看：</p>
                              <p></p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="quick-start-oracle-net-services.html#GUID-CE3F16F8-E4AD-45C2-B439-123DC49AB1D3">启动Oracle Net Listener和Oracle数据库服务器</a> ”</span>以获取有关使用监听器控制实用程序<code class="codeph">START</code>命令启动监听器的说明</p>
                                 </li>
                                 <li>
                                    <p><a href="../adfns/design_basics.html#ADFNS010" target="_blank"><span class="italic">Oracle数据库开发指南，</span></a>了解有关启用外部过程调用的说明</p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-CFDD995D-54F5-4CD9-8CA1-345609A0113A">为外部过程配置Oracle Net Services</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
               </div><a id="NETAG0133"></a><div class="sect3"><a id="GUID-AD068B69-6790-4699-A710-A22C3482AE4B" name="GUID-AD068B69-6790-4699-A710-A22C3482AE4B"></a><h4 id="NETAG-GUID-AD068B69-6790-4699-A710-A22C3482AE4B" class="sect4"><span class="enumeration_section">13.6.2</span>关于Oracle Net Services for Oracle异构服务</h4>
                  <div>
                     <p><a id="d38386e4940" class="indexterm-anchor"></a>异构服务是Oracle数据库服务器中的集成组件，提供从Oracle数据库服务器访问第三方系统的通用技术。异构服务使您能够：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用Oracle SQL透明地访问存储在第三方系统中的数据，就像数据驻留在Oracle数据库服务器中一样。</p>
                        </li>
                        <li>
                           <p>使用Oracle过程调用从Oracle分布式环境透明地访问第三方系统，服务或应用程序编程接口（API）。</p>
                        </li>
                     </ul>
                     <p>虽然异构服务在Oracle数据库服务器中提供通用技术，但是访问特定第三方系统需要异构服务代理。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="enabling-advanced-features.html#GUID-9A8E2F23-9E7C-4607-8FA3-45A5D9DA9C3C">配置Oracle数据库以连接到代理</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-9E45CE8B-BCAB-407D-8F8E-14A05036BC3D">配置与第三方数据库服务的连接</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="NETAG1587"></a><div class="sect4"><a id="GUID-9A8E2F23-9E7C-4607-8FA3-45A5D9DA9C3C" name="GUID-9A8E2F23-9E7C-4607-8FA3-45A5D9DA9C3C"></a><h5 id="NETAG-GUID-9A8E2F23-9E7C-4607-8FA3-45A5D9DA9C3C" class="sect5"><span class="enumeration_section">13.6.2.1</span>配置Oracle数据库以连接到代理</h5>
                     <div>
                        <p>要启动与第三方系统的连接，Oracle数据库服务器将通过网关上的侦听器启动代理进程。以下过程描述如何配置Oracle数据库服务器以便能够连接到代理：</p>
                        <ol>
                           <li>
                              <p><a id="d38386e5020" class="indexterm-anchor"></a><a id="d38386e5022" class="indexterm-anchor"></a>在网关上配置侦听器以侦听来自Oracle数据库服务器的传入请求，并通过在<code class="codeph">listener.ora</code>文件中配置以下参数来生成异构服务代理：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a id="d38386e5033" class="indexterm-anchor"></a><a id="d38386e5035" class="indexterm-anchor"></a> PROGRAM：代理可执行文件的名称</p>
                                 </li>
                                 <li>
                                    <p><a id="d38386e5044" class="indexterm-anchor"></a><a id="d38386e5046" class="indexterm-anchor"></a> ORACLE_HOME：代理可执行文件的Oracle主位置</p>
                                 </li>
                                 <li>
                                    <p><a id="d38386e5055" class="indexterm-anchor"></a><a id="d38386e5057" class="indexterm-anchor"></a> SID_NAME：Oracle系统标识符（SID）</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>在Oracle Enterprise Manager云控制中配置PROGRAM，ORACLE_HOME和SID参数。</p>
                              <ol type="a">
                                 <li>
                                    <p>访问Oracle企业管理器云控制中的“网络服务管理”页面。</p>
                                    <div class="infoboxnotealso" id="GUID-9A8E2F23-9E7C-4607-8FA3-45A5D9DA9C3C__GUID-F479F068-0264-48A8-92EF-8A60F6A805D8">
                                       <p class="notep1">也可以看看：</p>
                                       <p><span class="q">“ <a href="managing-oracle-net-services.html#GUID-697E4B64-854C-49BB-B287-C2B4C57F987F">使用Oracle Enterprise Manager云控制配置Oracle Net服务</a> ”</span></p>
                                    </div>
                                 </li>
                                 <li>
                                    <p>从“管理”列表中选择“ <span class="bold">侦听器</span> ”，然后选择包含配置文件位置的Oracle主目录。
                                    </p>
                                 </li>
                                 <li>
                                    <p>单击<span class="bold">Go</span> 。</p>
                                    <p>将显示“监听器”页面。</p>
                                 </li>
                                 <li>
                                    <p>选择Oracle Net Configuration Assistant创建的侦听器，然后单击“ <span class="bold">编辑”</span> 。
                                    </p>
                                    <p>将出现“编辑侦听器”页面。</p>
                                 </li>
                                 <li>
                                    <p>单击“ <span class="bold">其他服务”</span>选项卡。
                                    </p>
                                 </li>
                                 <li>
                                    <p>单击<span class="bold">添加</span> 。
                                    </p>
                                    <p>将出现“创建其他服务”页面。</p>
                                 </li>
                                 <li>
                                    <p>在程序名称字段中输入程序名称，该字段将运行以创建网关，代理可执行文件所在的Oracle主目录位于Oracle主目录字段中，以及Oracle系统标识符（SID）或第三方系统的服务名称在SID字段中。</p>
                                 </li>
                                 <li>
                                    <p>单击<span class="bold">确定</span> 。</p>
                                    <p>将出现“编辑侦听器”页面。</p>
                                 </li>
                                 <li>
                                    <p>单击“ <span class="bold">确定”</span>以修改侦听器。
                                    </p>
                                    <p>将显示“监听器”页面。</p>
                                    <p><code class="codeph">listener.ora</code>文件更新有关异构服务的信息，如下所示：</p><pre class="oac_no_warn" dir="ltr">SID_LIST_LISTENER =（SID_LIST = <span class="bold">（SID_DESC =</span> <span class="bold">（SID_NAME = sybasegw）</span> <span class="bold">（ORACLE_HOME = / oracle12c）</span> <span class="bold">（PROGRAM = tg4sybs））</span> ）</pre></li>
                              </ol>
                           </li>
                           <li>
                              <p>在Oracle数据库所在的计算机上，设置网络服务名称以连接到网关上的侦听器。连接描述符必须包含<code class="codeph">HS=ok</code>子句，以确保连接使用异构服务，如下所示：</p>
                              <ol type="a">
                                 <li>
                                    <p>创建可用于从Oracle数据库服务器到第三方系统的连接的网络服务名称。</p>
                                    <div class="infoboxnotealso" id="GUID-9A8E2F23-9E7C-4607-8FA3-45A5D9DA9C3C__GUID-FB20C684-B431-41CD-B583-913406D3253F">
                                       <p class="notep1">也可以看看：</p>
                                       <p><a href="configuring-naming-methods.html#GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__BABJBJBE">任务1，“配置网络服务名称”</a>以获取本地命名说明和<a href="configuring-naming-methods.html#GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__BABGIEFF">任务2“在目录中创建网络服务名称”</a>以获取目录命名说明</p>
                                    </div>
                                 </li>
                                 <li>
                                    <p>使用Oracle Enterprise Manager Cloud Control或Oracle Net Manager配置<code class="codeph">HS=ok</code> 。
                                    </p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>对于Oracle Enterprise Manager Cloud Control，请访问“ <span class="bold">网络服务管理”</span>页面，为侦听器选择“本地命名”，然后单击“创建网络服务名称”页面中的“ <span class="bold">高级”</span>选项卡。接下来，单击“ <span class="bold">用于异构服务”</span> 。
                                          </p>
                                       </li>
                                       <li>
                                          <p>对于Oracle Net Manager，请单击“服务标识”框中的“ <span class="bold">高级</span> ”。将出现“高级服务选项”对话框。点击<a id="d38386e5194" class="indexterm-anchor"></a><a id="d38386e5196" class="indexterm-anchor"></a> <span class="bold">用于异构服务</span> 。
                                          </p>
                                       </li>
                                    </ul>
                                 </li>
                                 <li>
                                    <p>单击“ <span class="bold">确定”</span>以确认更改。
                                    </p>
                                    <p><code class="codeph">tnsnames.ora</code>文件使用为异构服务配置的新网络服务名称进行更新，如下所示：</p><pre class="oac_no_warn" dir="ltr">sybase_gtw =（DESCRIPTION =（ADDRESS =（PROTOCOL = tcp）（HOST = gate-server）（PORT = 1521））（CONNECT_DATA =（SERVICE_NAME = sybasegw）） <span class="bold">（HS = ok）</span> ）））</pre></li>
                              </ol>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-9A8E2F23-9E7C-4607-8FA3-45A5D9DA9C3C__GUID-E0AE7F48-F12D-460A-910F-47F338A4B9D8">
                           <p class="notep1">也可以看看：</p>
                           <p> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/netag&amp;id=HETER-GUID-9E8667AA-0D1B-4E45-8448-8C6E25CD9F58" target="_blank"><span class="italic">Oracle数据库异构连接管理员指南</span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-AD068B69-6790-4699-A710-A22C3482AE4B">关于Oracle Net Services for Oracle异构服务</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="NETAG1190"></a><a id="NETAG356"></a><div class="sect3"><a id="GUID-647A53C5-A519-47D5-A879-F178246B1010" name="GUID-647A53C5-A519-47D5-A879-F178246B1010"></a><h4 id="NETAG-GUID-647A53C5-A519-47D5-A879-F178246B1010" class="sect4"><span class="enumeration_section">13.6.3</span>为Oracle Rdb数据库配置Oracle Net Services</h4>
                  <div>
                     <p>Oracle Rdb是用于数字64位操作系统的数据库。由于Oracle Rdb具有自己的侦听器，因此客户端与Rdb的交互方式与对Oracle数据库的交互方式相同。</p>
                     <p>要启动与Oracle Rdb的连接，请使用<a href="enabling-advanced-features.html#GUID-647A53C5-A519-47D5-A879-F178246B1010__g510382" title="连接描述符中的Oracle RDB数据库设置">表13-8中</a>所述的参数设置网络服务名称以连接到Oracle Rdb数据库。
                     </p>
                     <div class="tblformalwide" id="GUID-647A53C5-A519-47D5-A879-F178246B1010__g510382">
                        <p class="titleintable">表13-8 Connect描述符中的Oracle RDB数据库设置</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="连接描述符中的Oracle RDB数据库设置" width="100%" border="1" summary="Oracle RDB Database Settings in a Connect Descriptor" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="22%" id="d38386e5319">Oracle企业管理器云控制字段</th>
                                 <th align="left" valign="bottom" width="25%" id="d38386e5322">tnsnames.ora参数</th>
                                 <th align="left" valign="bottom" width="53%" id="d38386e5325">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d38386e5330" headers="d38386e5319 ">
                                    <p><a id="d38386e5332" class="indexterm-anchor"></a><a id="d38386e5334" class="indexterm-anchor"></a> Rdb数据库</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d38386e5330 d38386e5322 ">
                                    <p><a id="d38386e5343" class="indexterm-anchor"></a> RDB_DATABASE</p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d38386e5330 d38386e5325 ">
                                    <p>Oracle Rdb数据库的文件名。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d38386e5350" headers="d38386e5319 ">
                                    <p><a id="d38386e5352" class="indexterm-anchor"></a><a id="d38386e5354" class="indexterm-anchor"></a>服务类型</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d38386e5350 d38386e5322 ">
                                    <p><a id="d38386e5363" class="indexterm-anchor"></a> TYPE_OF_SERVICE</p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d38386e5350 d38386e5325 ">
                                    <p>用于Oracle Rdb数据库的服务类型。它由Rdb接口工具使用。仅当应用程序同时支持Oracle Rdb和Oracle数据库服务，并且您希望应用程序在两者之间进行负载平衡时，才应使用此功能。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="22%" id="d38386e5370" headers="d38386e5319 ">
                                    <p><a id="d38386e5372" class="indexterm-anchor"></a><a id="d38386e5374" class="indexterm-anchor"></a>全局数据库名称</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d38386e5370 d38386e5322 ">
                                    <p><a id="d38386e5383" class="indexterm-anchor"></a> GLOBAL_NAME</p>
                                 </td>
                                 <td align="left" valign="top" width="53%" headers="d38386e5370 d38386e5325 ">
                                    <p>Oracle Rdb数据库。可选的。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p><a id="d38386e5390" class="indexterm-anchor"></a>以下过程介绍了如何为Oracle Rdb数据库配置客户端：<a id="d38386e5395" class="indexterm-anchor"></a></p>
                     <ol>
                        <li>
                           <p>创建可用于从Oracle服务器到第三方系统的连接的网络服务名称。</p>
                           <div class="infoboxnotealso" id="GUID-647A53C5-A519-47D5-A879-F178246B1010__GUID-F07353F9-57E2-4DF1-BE72-6CB80CEA8BBF">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="configuring-naming-methods.html#GUID-6CEC8686-78EB-4D0B-BD0E-D50A5AC89348__BABJBJBE">任务1，“配置网络服务名称”</a>以获取本地命名说明和<a href="configuring-naming-methods.html#GUID-F780E4E8-91A5-4D57-A769-6EDC143903DC__BABGIEFF">任务2“在目录中创建网络服务名称”</a>以获取目录命名说明</p>
                           </div>
                        </li>
                        <li>
                           <p>使用Oracle Enterprise Manager Cloud Control或Oracle Net Manager设置Oracle Rdb参数。</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>对于Oracle Enterprise Manager Cloud Control，请访问“ <span class="bold">网络服务管理”</span>页面，为侦听器选择“本地命名”，然后单击“创建网络服务名称”页面中的“ <span class="bold">高级”</span>选项卡。
                                 </p>
                              </li>
                              <li>
                                 <p>对于Oracle Net Manager，请单击“服务标识”部分中的“ <span class="bold">高级</span> ”。将出现“高级服务选项”对话框。
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>在Rdb Database字段中输入Oracle Rdb数据库的文件名。</p>
                        </li>
                        <li>
                           <p>（可选）如果需要，在“服务类型”字段中指定服务类型，并在“全局数据库名称”字段中输入全局数据库名称，然后单击“ <span class="bold">确定”。</span></p>
                           <p><code class="codeph">tnsnames.ora</code>文件使用为Oracle Rdb数据库配置的新网络服务名称进行更新，类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">alpha5 =（DESCRIPTION =（ADDRESS = ...）（CONNECT_DATA =（SERVICE_NAME = generic） <span class="bold">（RDB_DATABASE = [。mf] mf_personnel.rdb）</span> <span class="bold">（GLOBAL_NAME = alpha5）））</span>
</pre><p>在以下示例中，TYPE_OF_SERVICE参数用于在Oracle Rdb数据库服务和Oracle数据库服务之间进行负载平衡：</p><pre class="oac_no_warn" dir="ltr">alpha5 =（DESCRIPTION_LIST =（DESCRIPTION =（ADDRESS = ...）（CONNECT_DATA =（SERVICE_NAME = generic） <span class="bold">（RDB_DATABASE = [。mf] mf_personnel.rdb）</span> <span class="bold">（GLOBAL_NAME = alpha5）</span> ））（DESCRIPTION =（ADDRESS = ...）（CONNECT_DATA =（SERVICE_NAME = sales.us.example.com）） <span class="bold">（TYPE_OF_SERVICE = oracle_database））</span></pre></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="enabling-advanced-features.html#GUID-9E45CE8B-BCAB-407D-8F8E-14A05036BC3D">配置与第三方数据库服务的连接</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
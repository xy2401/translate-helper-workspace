<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking."></meta>
      <meta name="description" content="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking."></meta>
      <title>图像处理和虚拟马赛克</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="GeoRaster Developer&#39;s Guide "></meta>
      <meta property="og:description" content="This chapter describes advanced image processing capabilities, including GCP georeferencing, reprojection, rectification, orthorectification, warping, image scaling, stretching, filtering, masking, segmentation, NDVI computation, Tasseled Cap Transformation, image appending, bands merging, and large-scale advanced image mosaicking."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="GeoRaster Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="spatial-and-graph-georaster-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-14T11:48:45-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E94793-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="raster-algebra-and-analytics.html" title="Previous" type="text/html"></link>
      <link rel="next" href="SDO_GEOR-reference.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Spatial and Graph GeoRaster Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="GEORS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="raster-algebra-and-analytics.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="SDO_GEOR-reference.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">GeoRaster开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">图像处理和虚拟马赛克</li>
            </ol>
            <a id="GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" name="GUID-EB60166B-6A52-4974-AF16-139CD6480EBC"></a><a id="GEORS1217"></a>
            
            <h2 id="GEORS-GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" class="sect2"><span class="enumeration_chapter">6</span>图像处理和虚拟马赛克</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。</p>
               <p>本章还介绍了<span class="italic">虚拟马赛克</span>在大型图像数据库环境中的概念和应用，以及对其的动态空间查询。
               </p>
               <p>本章中的操作最常用于处理地理空间图像，特别是原始卫星图像和空中照片。但是，这些操作与GeoRaster栅格代数一样，适用于所有栅格数据类型。</p>
               <p>本章包含以下主要部分。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-AA625889-BB88-4633-BECD-E76FAE05EE01">高级地理配准</a><br>除了空间参考功能外，还提供了高级地理配准功能。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-7AEE808F-F450-41C2-AB4C-AA7D740AF928">图像重新投影</a><br>图像重投影是将图像从一个SRS（空间参考系统或坐标系）转换为另一个的过程。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-EFDF0FB9-9FFA-4254-997B-1C7D3D7CF897">图像校正</a><br>大多数来自地面以上远程传感器的栅格数据通常会受到地形，仪器视角和地球不规则形状引起的失真。如本节所述，图像校正是转换图像以减少一些失真的过程。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-1EA97BE8-2B6B-4E0E-B89E-57ECD1C33F95">图像正射校正</a><br>正射校正是一种整流变换过程，其中使用有关高程，地形和地球形状的信息来改善输出整流图像的质量。Oracle GeoRaster支持具有平均高度值或DEM的单图像正射校正。</li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-F9C2917F-B85A-4D24-B760-A60CB5685501">图像变形</a><br>图像变形使用来自指定SDO_GEOR_SRS对象的空间参考信息将输入GeoRaster对象转换为输出GeoRaster对象。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-E4C18793-CFE6-49CC-8957-6FA9DD99CB7B">图像仿射变换和缩放</a><br>仿射变换是在图像上使用平移，缩放，旋转，剪切和反射的几何变换以产生另一图像的过程。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-1BFCB081-6C19-4727-B07E-1127515D75CD">图像拉伸，标准化，均衡，直方图匹配和闪避</a><br>可以增强图像的颜色和对比度以改善其视觉质量。SDO_GEOR_IP包（用于图像处理的“IP”）提供用于图像增强的一组子程序，包括执行图像拉伸，图像归一化，图像均衡，直方图匹配和图像躲避。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-F3C5A387-4E89-4E85-B17D-75FB75917869">图像过滤</a><br>图像过滤是在图像上应用卷积滤波器以实现特定目的的过程。例如，在图像上应用低通滤波器可以平滑并降低图像中的噪声，而在图像上应用高通滤波器可以增强图像的细节甚至检测图像内的边缘。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-21CA4981-4DFB-4918-BC1F-13803AFEAD28">图像分割</a><br>分割是一种简单类型的分类算法，可用于将某些类型的图像分类为更大的地面特征类别，例如陆地，云，水或雪。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77">图像金字塔：并行生成和部分更新</a><br>图像金字塔是构建大规模图像数据库中最常用的过程之一。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-60EC1E32-9E68-4E4D-8FFE-54A8A19A07EE">位图金字塔</a><br>在某些传统金字塔不足的情况下，位图金字塔可以生成高质量的金字塔。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-C2D99D00-071F-4BBC-A0A5-50C6F0FAF355">植被指数计算</a><br>在遥感中，归一化植被指数（NDVI）是一种广泛使用的植被指数，使用户能够快速识别植被区域并监测植物的生长和“状况”。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-2530F5D2-7386-4DD4-877A-F004F2109912">Tasseled Cap Transformation</a><br>Tasseled Cap Transformation（TCT）是一种使用遥感图像分析物理地面特征的有用工具。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-846AEB51-5BCC-48D6-8B27-8F846F38CC15">图像掩蔽</a><br>要执行图像蒙版，应用程序可以在GeoRaster数据库中查询位图蒙版，检索所需的位图蒙版或蒙版，并在目标GeoRaster对象上应用蒙版操作，以显示对象或执行其他一些处理。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-8BE9EF2F-EAFE-4247-B8CD-50B3AD3A3807">乐队合并</a><br>对于图像分类，时间序列分析和栅格GIS建模，可能需要将多个波段或不同GeoRaster对象的图层合并到单个GeoRaster对象中。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-EE1AFE0D-730E-49DC-80AF-E99504D14156">图像追加</a><br>当两个图像具有相同数量的波段时，您可以将一个图像附加到另一个图像。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA">大规模图像镶嵌</a><br>大型地理空间区域通常由许多较小的航空照片或卫星图像组成。大规模图像镶嵌可以将这些小的地理空间图像拼接成一个大图像，以更好地查看整个空间区域。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-16C91449-1E94-4B3F-9403-EEFE483251AD">虚拟马赛克</a><br>虚拟马赛克将一组GeoRaster图像视为一个大的几乎镶嵌图像。
                  </li>
                  <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-639C081E-8E7F-4467-8B89-3363810F561F">图像服务</a><br>通过GeoRaster PL / SQL和Java API的许多功能支持向客户端或应用程序提供图像和栅格数据。</li>
               </ul>
            </div>
            <a id="GEORS1310"></a><a id="GEORS1311"></a><a id="GEORS1218"></a><div class="props_rev_3"><a id="GUID-AA625889-BB88-4633-BECD-E76FAE05EE01" name="GUID-AA625889-BB88-4633-BECD-E76FAE05EE01"></a><h3 id="GEORS-GUID-AA625889-BB88-4633-BECD-E76FAE05EE01" class="sect3"><span class="enumeration_section">6.1</span>高级地理配准</h3>
               <div>
                  <p>除了空间参考功能外，还提供了高级地理配准功能。</p>
                  <p>在GeoRaster中，空间参考能力称为SRS（空间参考系统）或地理参考，其可能与地理或地理空间方案相关，也可能不相关。地理配准是GeoRaster的一个关键特性，是地理空间图像和网格栅格数据的空间查询和操作的基础。有关SRS模型的详细说明，请参阅<a href="georaster-overview-and-concepts.html#GUID-E32BF03B-DB83-422E-B7D0-C0F3073890F9" title="GeoRaster空间参考系统（SRS）是GeoRaster对象的元数据组件，包括与地理配准相关的信息。地理配准建立了GeoRaster数据的单元坐标与真实世界地面坐标（或某些本地坐标）之间的关系。地理配准将地面坐标分配给单元格坐标，将单元格坐标分配给地面坐标。">地理配准</a> 。
                  </p>
                  <p>GeoRaster支持非地理空间图像，美术照片和多维数组，这些数据可能与任何坐标系无关。对于那些图像和栅格，通常不需要地理参考，但是大多数GeoRaster操作仍然适用于它们，例如金字塔，缩放，子集，波段合并，拉伸和代数运算。在这些情况下，您使用栅格的单元格空间坐标（即行，列和波段）来处理像素（单元格）。</p>
                  <p>您还可以创建与地理无关的用户定义坐标系（新SRID），并且可以将该SRID用作栅格的模型坐标系。然后，您可以在空间上将这些栅格引用到该SRID;也就是说，将为每个栅格创建一个SRS元数据组件。这样做会导致这些栅格被空间参考，从而共同位于该用户定义的模型坐标系中。在为所有相关栅格完成此操作后，GeoRaster操作将对这些栅格进行处理，就像它们被地理坐标系统地理坐标系统一样。例如，假设一位艺术家在墙上画了一幅大型壁画，并且您希望能够拍摄这张墙的不同瓷砖的许多高分辨率照片，然后将它们拼接在一起。您可以在空间上参考平铺图像，然后使用GeoRaster镶嵌功能进行拼接。</p>
                  <p>如果未定义新坐标系，则仍可以在单元格空间中共同定位图像。也就是说，您可以通过调用<a href="SDO_GEOR-reference.html#GUID-B5BF3AB1-3EB5-4D86-B417-28662B7AD00B">SDO_GEOR.setULTCoordinate</a>过程为图像设置不同的ULT坐标，以便图像在同一坐标系中对齐，然后可以镶嵌。
                  </p>
                  <p>您拥有的大多数地理空间图像和光栅文件可能已经被其他软件工具地理配准，因此它们可能带有地理配准信息。在这些情况下，可以使用<a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a> ， <a href="SDO_GEOR-reference.html#GUID-0406AB05-BA9B-4331-8613-B480A9F12C09">SDO_GEOR.setSRS</a> ，GeoRaster加载程序工具，GDAL或其他第三方ETL工具直接使用栅格或之后加载地理配准信息。有关更多信息，请查看<a href="georaster-overview-and-concepts.html#GUID-4813E3BC-2DB8-4310-82E5-3ADC467C0253" title="Oracle Spatial包括用于查看，加载和导出GeoRaster数据的工具。">GeoRaster工具：Viewer_ Loader_ Exporter</a>和<a href="georaster-database-creation-management.html#GUID-5E9E62CA-A4CB-4298-9345-0351F60DECC0">Georeferencing GeoRaster Objects</a> 。
                  </p>
                  <p>如果地理空间图像没有空间参考信息，您可以使用GeoRaster地面控制点（GCP）支持对图像进行地理配准。GCP由遥感系统自动收集或随后手动收集。对于没有GCP信息的图像，您可以使用GeoRaster可视化工具来收集GeoRaster对象的GCP。<a href="georaster-overview-and-concepts.html#GUID-EC9DEF7E-54B5-488A-BBCC-932334C9FF9E">地面控制点（GCP）地理配准模型</a>中描述了<a href="georaster-overview-and-concepts.html#GUID-EC9DEF7E-54B5-488A-BBCC-932334C9FF9E">GCP</a> 。
                  </p>
                  <p>拥有GCP并希望将它们存储在GeoRaster元数据中之后，您可以使用<a href="SDO_GEOR-reference.html#GUID-9150C734-101F-479C-8FE4-3B3613C54EE1">SDO_GEOR.getGCPGeorefModel</a>函数和<a href="SDO_GEOR-reference.html#GUID-C6DD6322-F4C7-48B9-B009-AD92A54AFBC8">SDO_GEOR.setGCPGeorefModel</a>过程来获取和设置基于GCP的地理配准模式。要仅获取，设置和编辑GCP，请使用<a href="SDO_GEOR-reference.html#GUID-C2E30658-697E-413D-9EC7-1C55814B5BBD">SDO_GEOR.getControlPoint</a>函数以及<a href="SDO_GEOR-reference.html#GUID-44A07135-D379-4DE1-86B1-D299388033E4">SDO_GEOR.setControlPoint</a>和<a href="SDO_GEOR-reference.html#GUID-ACB2F70E-DAB7-4AFC-9DDE-F35F451A19C1">SDO_GEOR.deleteControlPoint</a>过程。当您调用<a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a>时，GCP也可以存储在GeoRaster元数据中。
                  </p>
                  <p>要仅获取和设置几何模型，请使用<a href="SDO_GEOR-reference.html#GUID-A6BBF1F3-E28C-414D-BE24-8F8C8266B121">SDO_GEOR.getGCPGeorefMethod</a>函数和<a href="SDO_GEOR-reference.html#GUID-7F595E4E-2770-4012-9CFE-3B4725C82EF1">SDO_GEOR.setGCPGeorefMethod</a>过程。GeoRaster还允许您存储检查点（ <code class="codeph">pointType</code> = 2），这些检查点以与控制点（ <code class="codeph">pointType</code> = 1）相同的方式进行处理和操作，除了在调用<a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a>时不使用检查点来创建SRS系数。 GCP。
                  </p>
                  <p>如果您具有存储在GeoRaster对象中的地面控制点（GCP），并且您想要计算功能拟合地理配准模型，则可以调用<a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a>过程来查找解决方案。功能拟合地理配准模型存储GeoRaster SRS中的所有系数，并启用单元空间和模型空间之间的坐标变换。要使用GCP生成功能拟合地理配准模型，必须指定适当的几何模型。<a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a>支持的特定几何模型是仿射变换，二次多项式，立方多项式，DLT，二次有理和RPC。 <a href="georaster-overview-and-concepts.html#GUID-D07DEFFD-F25A-4D8D-8A94-9AFD05CE4256">功能拟合地理配准模型</a>中描述了这些<a href="georaster-overview-and-concepts.html#GUID-D07DEFFD-F25A-4D8D-8A94-9AFD05CE4256">模型</a> 。
                  </p>
                  <div class="example" id="GUID-AA625889-BB88-4633-BECD-E76FAE05EE01__CHDDDIGC">
                     <p class="titleinexample">示例6-1设置GCP地理配准模型</p>
                     <p>例如，如果您在普通区域中有Landsat图像并希望对其进行地理配准，则可以选择“二次多项式”几何模型。为此，假设您已经收集了9个GCP（在这种情况下至少有6个GCP）和3个检查点，您可以使用<a href="image-processing-virtual-mosaic.html#GUID-AA625889-BB88-4633-BECD-E76FAE05EE01__CHDDDIGC">例6-1中</a>的代码设置GCP并将它们存储在GeoRaster的元数据中。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; georefModel SDO_GEOR_GCPGEOREFTYPE; GCPs SDO_GEOR_GCP_COLLECTION;从georaster_table开始选择georaster INTO gr1 WHERE georid = 1 FOR UPDATE; GCP：= SDO_GEOR_GCP_COLLECTION（SDO_GEOR_GCP（'1'，''，1,2，sdo_number_array（25,73），2，sdo_number_array（237036.9,897987.2），NULL，NULL），SDO_GEOR_GCP（'2'，''，1， 2，sdo_number_array（100,459），2，sdo_number_array（237229.6,897949.7），NULL，NULL），SDO_GEOR_GCP（'3'，''，1,2，sdo_number_array（362,77），2，sdo_number_array（237038.9,897818.8） ），NULL，NULL），SDO_GEOR_GCP（'4'，''，1,2，sdo_number_array（478,402），2，sdo_number_array（237201.06,897760.56），NULL，NULL），SDO_GEOR_GCP（'5'，''， 1,2，sdo_number_array（167,64），2，sdo_number_array（237032.02,897916.26），NULL，NULL），SDO_GEOR_GCP（'6'，''，1,2，sdo_number_array（101,257），2，sdo_number_array（237128.9） ，897949.3），NULL，NULL），SDO_GEOR_GCP（'7'，''，1,2，sdo_number_array（235,501），2，sdo_number_array（237250.9,897882.2），NULL，NULL），SDO_GEOR_GCP（'8'，' '，1,2，sdo_number_array（423,214），2，sdo_number_array（237107.3,897788.0），NULL，NULL），SDO_GEOR_GCP（'9'，''，1,2，sdo_number_array（127,178），2，sdo_number_array （237089.0,8 97936.5），NULL，NULL），SDO_GEOR_GCP（'10'，''，2,2，sdo_number_array（131,425），2，sdo_number_array（237212.8,897934.2），NULL，NULL），SDO_GEOR_GCP（'11'，'' ，2,2，sdo_number_array（299,111），2，sdo_number_array（237055.7,897850.4），NULL，NULL），SDO_GEOR_GCP（'12'，''，2,2，sdo_number_array（329,253），2，sdo_number_array（ 237126.9,897835.4），NULL，NULL））; georefModel：= SDO_GEOR_GCPGEOREFTYPE（'QuadraticPolynomial'，GCPs.count，GCPs，NULL）; - 将GCP地理参考模型设置并存储到GeoRaster对象的元数据sdo_geor.setGCPGeorefModel（gr1，georefModel）;更新georaster_table SET georaster = gr1 WHERE georid = 1;承诺;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-AA625889-BB88-4633-BECD-E76FAE05EE01__CHDECJDC">
                     <p class="titleinexample">例6-2使用GCP生成功能拟合模型</p>
                     <p>使用<a href="image-processing-virtual-mosaic.html#GUID-AA625889-BB88-4633-BECD-E76FAE05EE01__CHDDDIGC">例6-1中</a>的代码后，可以使用<a href="image-processing-virtual-mosaic.html#GUID-AA625889-BB88-4633-BECD-E76FAE05EE01__CHDECJDC">例6-2中</a>的代码生成函数拟合模型系数。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; rms sdo_number_array;从georaster_table开始选择georaster INTO gr1 WHERE georid = 1 FOR UPDATE; - 使用存储在图像元数据中的GCP对图像进行地理配准rms：= sdo_geor.georeference（gr1，null，26986,0，'TRUE'）;更新georaster_table SET georaster = gr1 WHERE georid = 1;承诺;结束; /</pre><p>中的步骤<a href="image-processing-virtual-mosaic.html#GUID-AA625889-BB88-4633-BECD-E76FAE05EE01__CHDDDIGC">实施例6-1</a>和<a href="image-processing-virtual-mosaic.html#GUID-AA625889-BB88-4633-BECD-E76FAE05EE01__CHDECJDC">实施例6-2</a>可以无需预先设定的地面控制点到GeoRaster对象的元数据（参见示例中被组合<a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a>在<a href="SDO_GEOR-reference.html#GUID-587A19B6-40FF-4F1C-AC13-556891070C30" title="SDO_GEOR包中包含用于创建，修改和检索有关GeoRaster对象的信息的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR包参考</a> ）。<a href="image-processing-virtual-mosaic.html#GUID-AA625889-BB88-4633-BECD-E76FAE05EE01__CHDECJDC">例6-2</a>中<a href="SDO_GEOR-reference.html#GUID-BFA20035-A3A9-41C6-A7B0-DFB014C73F34">SDO_GEOR.georeference</a>的返回值数组包含每个GCP的RMS值和残差。使用这些，您可以检查解决方案的准确性并识别不稳定的GCP。如果准确性不令人满意，请重新检查所有GCP以确保它们准确无误并根据需要添加更多GCP，然后再次运行脚本或脚本。
                     </p>
                     <p>GeoRaster中的GCP支持使您能够在空间上参考任何<span class="italic">非</span>地理空间图像和栅格。
                     </p>
                     <p>在对地理空间图像进行地理配准后，您可以处理这些图像，例如应用校正，重投影和镶嵌，以及使用不同坐标系中的几何多边形对栅格进行空间查询和子集化。</p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1327"></a><a id="GEORS1274"></a><div class="props_rev_3"><a id="GUID-7AEE808F-F450-41C2-AB4C-AA7D740AF928" name="GUID-7AEE808F-F450-41C2-AB4C-AA7D740AF928"></a><h3 id="GEORS-GUID-7AEE808F-F450-41C2-AB4C-AA7D740AF928" class="sect3"><span class="enumeration_section">6.2</span>图像重新投影</h3>
               <div>
                  <p>图像重投影是将图像从一个SRS（空间参考系统或坐标系）转换为另一个的过程。</p>
                  <p>对于组合两个或多个对象的某些GeoRaster操作，重新投影特别有用，因为它要求所涉及的所有GeoRaster对象都在同一个SRS中。</p>
                  <p>GeoRaster中的基本重新投影由<a href="SDO_GEOR-reference.html#GUID-9B3FA7F4-E6CA-4FDB-9DF9-EFEC63C19A55">SDO_GEOR.reproject</a>过程执行，并要求源GeoRaster SRID与输出SRID不同。</p>
                  <div class="example" id="GUID-7AEE808F-F450-41C2-AB4C-AA7D740AF928__CHDBGHBG">
                     <p class="titleinexample">例6-3图像重新投影</p>
                     <p><a href="image-processing-virtual-mosaic.html#GUID-7AEE808F-F450-41C2-AB4C-AA7D740AF928__CHDBGHBG">示例6-3</a>重新投影已使用SRID 4326加载到GeoRaster对象中的光栅图像，但需要重新投影以具有与先前使用SRID 23619存储的其他图像相同的SRID。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; gr2 sdo_georaster; BEGIN从georaster_load_table中选择栅格到gr1，其中georid = 10;从georaster_table删除georid = 54;插入georaster_table值（54，'reprojected'，sdo_geor.init（））将georaster返回到gr2; sdo_geor.reproject（inGeoRaster =&gt; gr1，pyramidLevel =&gt; 0，cropArea =&gt; null，layerNumbers =&gt; null，resampleParam =&gt;'resampling = BILINEAR'，storageParam =&gt; null，outSRID =&gt; 32619，outGeoraster =&gt; gr2）;更新georaster_table set georaster = gr2 where georid = 54;承诺;结束;</pre><p>可以通过<a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a>过程完成相同的操作，产生类似的结果。<a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a>过程提供比<a href="SDO_GEOR-reference.html#GUID-9B3FA7F4-E6CA-4FDB-9DF9-EFEC63C19A55">SDO_GEOR.reproject</a>更多的功能和灵活性;例如，输入和输出SRID可以相同，用户可以指定输出的精确分辨率（参见<a href="image-processing-virtual-mosaic.html#GUID-EFDF0FB9-9FFA-4254-997B-1C7D3D7CF897" title="大多数来自地面以上远程传感器的栅格数据通常会受到地形，仪器视角和地球不规则形状引起的失真。如本节所述，图像校正是转换图像以减少一些失真的过程。">图像校正</a> ）。
                     </p>
                     <p>如果GeoRaster对象没有关联的SRS，则在地理配准<a href="georaster-database-creation-management.html#GUID-5E9E62CA-A4CB-4298-9345-0351F60DECC0">GeoRaster对象</a>和<a href="image-processing-virtual-mosaic.html#GUID-EFDF0FB9-9FFA-4254-997B-1C7D3D7CF897" title="大多数来自地面以上远程传感器的栅格数据通常会受到地形，仪器视角和地球不规则形状引起的失真。如本节所述，图像校正是转换图像以减少一些失真的过程。">图像校正</a>中将解释地理配准和纠正它的过程。
                     </p>
                     <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程支持并行重投影。
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1328"></a><a id="GEORS1275"></a><div class="props_rev_3"><a id="GUID-EFDF0FB9-9FFA-4254-997B-1C7D3D7CF897" name="GUID-EFDF0FB9-9FFA-4254-997B-1C7D3D7CF897"></a><h3 id="GEORS-GUID-EFDF0FB9-9FFA-4254-997B-1C7D3D7CF897" class="sect3"><span class="enumeration_section">6.3</span>图像校正</h3>
               <div>
                  <p>大多数来自地面以上远程传感器的栅格数据通常会受到地形，仪器视角和地球不规则形状引起的失真。如本节所述，图像校正是转换图像以减少一些失真的过程。</p>
                  <p>整改由<a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a>过程执行，并要求源GeoRaster对象至少具有功能拟合地理配准模型。这意味着图像不需要纠正，但需要在元数据中包含地理参考信息（请参阅<a href="georaster-database-creation-management.html#GUID-5E9E62CA-A4CB-4298-9345-0351F60DECC0">地理配准GeoRaster对象</a> ）。
                  </p>
                  <p><a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a>过程可以使用源GeoRaster对象中可用的信息自动建立输出GeoRaster的空间范围，维度和SRID，用户还可以使用适当的参数指定不同的值。
                  </p>
                  <div class="example" id="GUID-EFDF0FB9-9FFA-4254-997B-1C7D3D7CF897__GUID-B95EF199-B348-4417-AF59-AA520AB727FB">
                     <p class="titleinexample">例6-4图像校正</p>
                     <p><a href="image-processing-virtual-mosaic.html#GUID-7AEE808F-F450-41C2-AB4C-AA7D740AF928__CHDBGHBG">例6-3</a>对已加载到GeoRaster中并随后使用GCP进行地理配准的航拍图像进行校正（请参阅<a href="image-processing-virtual-mosaic.html#GUID-AA625889-BB88-4633-BECD-E76FAE05EE01" title="除了空间参考功能外，还提供了高级地理配准功能。">高级</a>地理参考）。对图像进行校正，以使输出GeoRaster对象具有与现有GeoRaster对象相同的SRS和分辨率。图像将限制在现有GeoRaster对象的区域，像素应与现有的GeoRaster对象完美对齐。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr_src sdo_georaster; gr_ref sdo_georaster; gr_out sdo_georaster; BEGIN从georaster_load_table中选择栅格到gr_src，其中georid = 15;从georaster_table中选择栅格到gr_ref，其中georid = 1;从georaster_table删除georid = 2;插入georaster_table值（2，'rectified'，sdo_geor.init（））将georaster返回到gr_out; sdo_geor.rectify（inGeoRaster =&gt; gr_src，pyramidLevel =&gt; null，elevationParam =&gt; null，dem =&gt; null，outSRID =&gt; sdo_geor.getModelSRID（gr_ref），outModelCoordLoc =&gt; null，cropArea =&gt; sdo_geor.generateSpatialExtent（gr_ref），polygonClip =&gt; null，layerNumbers =&gt; null，outResolutions =&gt; sdo_geor.getSpatialResolutions（gr_ref），resolutionUnit =&gt;'unit = meters'，referencePoint =&gt; sdo_geor.getModelCoordinate（gr_ref，0，sdo_number_array（-0.5，-0.5）），resampleParam =&gt; null，storageParam =&gt; null，outGeoraster =&gt; gr_out）;更新georaster_table set georaster = gr_out其中georid = 2;承诺;结束;</pre><p>如果有关高程的信息传递给<a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a>程序，则可以显着改善整流输出。（有关高程的更多信息，请参见<a href="image-processing-virtual-mosaic.html#GUID-1EA97BE8-2B6B-4E0E-B89E-57ECD1C33F95" title="正射校正是一种整流变换过程，其中使用有关高程，地形和地球形状的信息来改善输出整流图像的质量。Oracle GeoRaster支持具有平均高度值或DEM的单图像正射校正。">图像正射校正</a> 。）
                     </p>
                     <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程支持并行纠正。
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1276"></a><div class="props_rev_3"><a id="GUID-1EA97BE8-2B6B-4E0E-B89E-57ECD1C33F95" name="GUID-1EA97BE8-2B6B-4E0E-B89E-57ECD1C33F95"></a><h3 id="GEORS-GUID-1EA97BE8-2B6B-4E0E-B89E-57ECD1C33F95" class="sect3"><span class="enumeration_section">6.4</span>图像正射校正</h3>
               <div>
                  <p>正射校正是一种整流变换过程，其中使用有关高程，地形和地球形状的信息来改善输出整流图像的质量。Oracle GeoRaster支持具有平均高度值或DEM的单图像正射校正。</p>
                  <p>正射校正由<a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a>过程完成，并要求源GeoRaster具有3D SRS。 <a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a>程序可以仅使用区域的平均高度或使用详细的数字高程模型（DEM）执行正射校正。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-2A0127F1-E83D-4462-B19B-52DB968F1737">平均高度正射校正</a><br></li>
                     <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-C79FECF7-D80B-4B50-91D6-398D81315C77">用DEM进行正射校正</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               <a id="GEORS1330"></a><a id="GEORS1329"></a><div class="props_rev_3"><a id="GUID-2A0127F1-E83D-4462-B19B-52DB968F1737" name="GUID-2A0127F1-E83D-4462-B19B-52DB968F1737"></a><h4 id="GEORS-GUID-2A0127F1-E83D-4462-B19B-52DB968F1737" class="sect4"><span class="enumeration_section">6.4.1</span>平均高度的正射校正</h4>
                  <div>
                     <p>具有数字高程模型（DEM）的GeoRaster对象是正射校正的可选对象。对于相对平坦的地形，3D SRS连同平均高度值可能足以校正源图像的失真。</p>
                     <div class="example" id="GUID-2A0127F1-E83D-4462-B19B-52DB968F1737__CHDEFJEE">
                        <p class="titleinexample">例6-5平均高度的正射校正</p>
                        <p><a href="image-processing-virtual-mosaic.html#GUID-2A0127F1-E83D-4462-B19B-52DB968F1737__CHDEFJEE">例6-5</a>显示了具有平均高度的正射校正。对于此示例，源图像是使用RPC从DigitalGlobe获取的。 DEM不可用，但已知该区域的平均海拔为1748.0米。
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE gr_src sdo_georaster; gr_out sdo_georaster; BEGIN从georaster_table中选择georaster到gr_src，其中georid = 1;从georaster_table删除georid = 3;插入georaster_table值（3，'没有DEM的正射校正'，sdo_geor.init（'rdt_4'，3））将georaster返回到gr_out; sdo_geor.rectify（inGeoRaster =&gt; gr_src，pyramidLevel =&gt; null，elevationParam =&gt;'average = 1748.8'，dem =&gt; null，outSRID =&gt; 32613，outModelCoordLoc =&gt; null，cropArea =&gt; null，polygonClip =&gt; null，layerNumbers = &gt; null，outResolutions =&gt; null，resolutionUnit =&gt; null，referencePoint =&gt; null，resampleParam =&gt;'resampling = AVERAGE4'，storageParam =&gt; null，outGeoraster =&gt; gr_out）;更新georaster_table set georaster = gr_out其中georid = 3;承诺;结束;</pre><p>在<a href="image-processing-virtual-mosaic.html#GUID-2A0127F1-E83D-4462-B19B-52DB968F1737__CHDEFJEE">示例6-5中</a> ， <code class="codeph">dem</code>参数为null，并且<code class="codeph">elevationParam</code>平均高程必须与SRS在同一单元中。此外，在<code class="codeph">elevationParam</code> ， <span class="italic">未</span>指定<code class="codeph">offset</code>和scale <code class="codeph">keywords</code> ，因为只有在指定DEM时它们才相关。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-1EA97BE8-2B6B-4E0E-B89E-57ECD1C33F95" title="正射校正是一种整流变换过程，其中使用有关高程，地形和地球形状的信息来改善输出整流图像的质量。Oracle GeoRaster支持具有平均高度值或DEM的单图像正射校正。">图像正射校正</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS1332"></a><a id="GEORS1333"></a><a id="GEORS1331"></a><div class="props_rev_3"><a id="GUID-C79FECF7-D80B-4B50-91D6-398D81315C77" name="GUID-C79FECF7-D80B-4B50-91D6-398D81315C77"></a><h4 id="GEORS-GUID-C79FECF7-D80B-4B50-91D6-398D81315C77" class="sect4"><span class="enumeration_section">6.4.2</span>使用DEM进行正射校正</h4>
                  <div>
                     <p>使用DEM（数字高程模型）层可提高整流过程的准确性，从而生成更高质量的输出GeoRaster对象。</p>
                     <p>使用DEM进行正射校正需要源GeoRaster具有3D SRS。 DEM必须覆盖所有目标输出区域，并且它应与输出位于相同的SRID中。DEM的分辨率应与输出GeoRaster对象的预期分辨率相似。</p>
                     <p>对于使用DEM进行正射校正， <code class="codeph">elevationParam</code> <code class="codeph">average</code>关键字是可选的;如果未指定，则该过程基于从目标区域上的DEM提取的样本值来估计高程值。
                     </p>
                     <p><code class="codeph">elevationParam</code> <code class="codeph">offset</code>和<code class="codeph">scale</code>值可用于修改DEM中的值。例如，如果DEM值的值不是源GeoRaster SRS的单位，则可以使用<code class="codeph">scale</code>进行单位转换，并且可以使用<code class="codeph">offset</code>来执行大地水准校正或其他偏移。但是，这些规范不会对GeoRaster对象中的DEM值应用更改。另一种方法是通过在正射校正之前对DEM数据应用缩放和偏移来预处理DEM值，如<a href="raster-algebra-and-analytics.html#GUID-34B59129-70AC-4E51-BF6D-2E43AA2A813B" title="您可以执行栅格数据缩放和偏移操作。">栅格数据缩放和偏移中所述</a> 。
                     </p>
                     <div class="example" id="GUID-C79FECF7-D80B-4B50-91D6-398D81315C77__CHDCFHEH">
                        <p class="titleinexample">实施例6-6用DEM正射校正</p>
                        <p><a href="image-processing-virtual-mosaic.html#GUID-C79FECF7-D80B-4B50-91D6-398D81315C77__CHDCFHEH">例6-6</a>示例使用DEM执行正射校正。 DEM以近似于输出GeoRaster分辨率的分辨率覆盖所有输出区域。DEM值以米为单位，但源图像SRS以英尺为单位。该区域的大地水准面修正约为-15.3米：</p><pre class="oac_no_warn" dir="ltr">DECLARE gr_src sdo_georaster; gr_dem sdo_georaster; gr_out sdo_georaster; BEGIN从georaster_table中选择georaster到gr_src，其中georid = 1;从Georaster_table中选择georaster到gr_dem，其中georid = 5;从georaster_table删除georid = 6;插入georaster_table值（5，'与DEM正面重新'，sdo_geor.init（'rdt_4'，6））将georaster返回到gr_out; sdo_geor.rectify（inGeoRaster =&gt; gr_src，pyramidLevel =&gt; null，elevationParam =&gt;'average = 1748.8 offset = -15.3'，dem =&gt; gr_dem，outSRID =&gt; 32613，outModelCoordLoc =&gt; null，cropArea =&gt; null，polygonClip =&gt; null，layerNumbers =&gt; null，outResolutions =&gt; null，resolutionUnit =&gt; null，referencePoint =&gt; null，resampleParam =&gt;'resampling = BILINEAR'，storageParam =&gt; null，outGeoraster =&gt; gr_out）;更新georaster_table set georaster = gr_out其中georid = 6;承诺;结束;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-C79FECF7-D80B-4B50-91D6-398D81315C77__CHDCAIHF">
                        <p class="titleinexample">实施例6-7用裁剪的DEM进行正射校正</p>
                        <p>通常，DEM覆盖的区域远大于目标区域，并且分辨率比输出GeoRaster对象的目标分辨率更粗糙。按“原样”使用这种DEM会导致质量差的正射校正。该常见问题的解决方案是将DEM裁剪到目标区域并将其重新调整为所需的分辨率，如<a href="image-processing-virtual-mosaic.html#GUID-C79FECF7-D80B-4B50-91D6-398D81315C77__CHDCAIHF">例6-7</a>所示。此示例使用<a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a>过程将低分辨率DEM GeoRaster对象转换为第二个DEM GeoRaster对象，该对象具有与第二次调用<a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a>过程生成的正射校正GeoRaster对象相同的分辨率。
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE高度数：= 1748.8; gr_src sdo_georaster; gr_out sdo_georaster; gr_dem sdo_georaster; gr_dem2 sdo_georaster; gm_area sdo_geometry;开始从georaster_table中选择georaster到gr_src，其中georid = 1;从georaster_table中选择georaster到gr_dem，其中georid = 2; - 计算裁剪区域gm_area：= sdo_cs.make_2d（sdo_geor.generateSpatialExtent（gr_src，height），sdo_geor.getModelSRID（gr_dem））; - 从Georaster_table中删除整理dem（重新投影，裁剪区域，重新缩放和重新采样），georid = 4;插入georaster_table值（4，'矫正DEM'，sdo_geor.init（'rdt_4'，4））将georaster返回到gr_dem2; sdo_geor.rectify（inGeoRaster =&gt; gr_dem，pyramidLevel =&gt; null，elevationParam =&gt; null，dem =&gt; null，outSRID =&gt; 32613，outModelCoordLoc =&gt; null，cropArea =&gt; gm_area，polygonClip =&gt; null，layerNumbers =&gt; null，outResolutions =&gt; sdo_number_array（0.6,0.6），resolutionUnit =&gt; null，referencePoint =&gt; null，resampleParam =&gt;'resampling = CUBIC'，storageParam =&gt; null，outGeoraster =&gt; gr_dem2）;更新georaster_table set georaster = gr_dem2其中georid = 4;承诺; - 使用DEM选择正射校正从georaster_table选择georaster到gr_dem2，其中georid = 4;从Georaster_table删除georid = 5;插入georaster_table值（5，'orthorectified'，sdo_geor.init（'rdt_4'，5））将georaster返回到gr_out; sdo_geor.rectify（inGeoRaster =&gt; gr_src，pyramidLevel =&gt; null，elevationParam =&gt;'average ='|| height ||'offset = -15.588'，dem =&gt; gr_dem2，outSRID =&gt; 32613，outModelCoordLoc =&gt; null，cropArea = &gt; gm_area，polygonClip =&gt; null，layerNumbers =&gt; null，outResolutions =&gt; sdo_number_array（0.6,0.6），resolutionUnit =&gt; null，referencePoint =&gt; null，resampleParam =&gt;'resampling = average16'，storageParam =&gt; null，outGeoraster =&gt; gr_out）;更新georaster_table set georaster = gr_out其中georid = 5;承诺;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-1EA97BE8-2B6B-4E0E-B89E-57ECD1C33F95" title="正射校正是一种整流变换过程，其中使用有关高程，地形和地球形状的信息来改善输出整流图像的质量。Oracle GeoRaster支持具有平均高度值或DEM的单图像正射校正。">图像正射校正</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-F9C2917F-B85A-4D24-B760-A60CB5685501" name="GUID-F9C2917F-B85A-4D24-B760-A60CB5685501"></a><h3 id="GEORS-GUID-F9C2917F-B85A-4D24-B760-A60CB5685501" class="sect3"><span class="enumeration_section">6.5</span>图像变形</h3>
               <div>
                  <p>图像变形使用来自指定SDO_GEOR_SRS对象的空间参考信息将输入GeoRaster对象转换为输出GeoRaster对象。</p>
                  <p>可以从现有GeoRaster对象复制参考SDO_GEOR_SRS对象，也可以使用构造函数创建对象。（有关更多信息，请参阅<a href="georaster-datatypes.html#GUID-A7C5B4C6-2B57-4E3F-B796-3313F6D67E57">SDO_GEOR_SRS对象类型</a> 。）
                  </p>
                  <p>变形由<a href="SDO_GEOR-reference.html#GUID-1B480F30-85C6-4F02-BC5E-142A872BEF64">SDO_GEOR.warp</a>过程执行，并要求源GeoRaster对象至少具有功能拟合地理配准模型。这意味着图像不需要纠正，但需要在元数据中包含地理参考信息（请参阅<a href="georaster-database-creation-management.html#GUID-5E9E62CA-A4CB-4298-9345-0351F60DECC0">地理配准GeoRaster对象</a> ）。
                  </p>
                  <div class="example" id="GUID-F9C2917F-B85A-4D24-B760-A60CB5685501__IMAGEWARPING-28D5437D">
                     <p class="titleinexample">例6-8图像变形</p>
                     <p>以下示例使用来自一个GeoRaster图像（ <code class="codeph">gr1</code> ）的SDO_GEOR_SRS信息作为参考，将现有GeoRaster对象（ <code class="codeph">gr2</code> ）转换为新的（扭曲的）GeoRaster对象（ <code class="codeph">gr3</code> ）。因此，第三个GeoRaster对象是第二个GeoRaster对象的“复制”（实际上是转换），但反映了与第一个GeoRaster对象相同的地理配准。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE srs sdo_geor_srs; gr1 sdo_georaster; gr2 sdo_georaster; gr3 sdo_georaster; BEGIN从georaster_table中选择georaster到gr1，其中georid = 1;从Georaster_table中选择georaster到gr2，其中georid = 2; srs：= sdo_geor.getSRS（gr1）; - 从图像1获取SRS。插入georaster_table值（3，'扭曲对象'，sdo_geor.init（'imagery_rdt'））将georaster返回到gr3; sdo_geor.warp（inGeoRaster =&gt; gr2，pyramidLevel =&gt; null，outSRS =&gt; srs， - 将SRS应用于warp transformation cropArea =&gt; null，dimensionSize =&gt; null，layerNumbers =&gt; null，elevationParam =&gt; null，resampleParam =&gt;' resampling = AVERAGE4'，storageParam =&gt;'pyramid = true'，outGeoRaster =&gt; gr3，bgValues =&gt; sdo_number_array（0,0,0），parallelParam =&gt;'parellel = 4'）;更新georaster_table set georaster = gr3其中georid = 3;承诺;结束;</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1334"></a><a id="GEORS1335"></a><a id="GEORS1277"></a><div class="props_rev_3"><a id="GUID-E4C18793-CFE6-49CC-8957-6FA9DD99CB7B" name="GUID-E4C18793-CFE6-49CC-8957-6FA9DD99CB7B"></a><h3 id="GEORS-GUID-E4C18793-CFE6-49CC-8957-6FA9DD99CB7B" class="sect3"><span class="enumeration_section">6.6</span>图像仿射变换和缩放</h3>
               <div>
                  <p>仿射变换是在图像上使用平移，缩放，旋转，剪切和反射的几何变换以产生另一图像的过程。</p>
                  <p>有关详细信息和示例，请参阅<a href="SDO_GEOR-reference.html#GUID-9C8F8F29-5D1A-4403-9147-B9FD1A30B767">SDO_GEOR.affineTransform</a>参考主题。
                  </p>
                  <p>图像缩放是通过改变图像的行和列尺寸的像素大小来放大或缩小图像的过程。图像缩放重新采样原始图像中的像素值，以构建该图像的重新缩放版本。可以通过多种方式执行图像缩放：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用<a href="SDO_GEOR-reference.html#GUID-3F7A39BD-67FB-40B7-9143-32FA5DFD9628">SDO_GEOR.scaleCopy</a>过程并为<code class="codeph">scaleParam</code>指定要应用于输入图像尺寸的<code class="codeph">scaleFactor</code>或输出图像的<code class="codeph">maxDimSize</code> 。
                        </p>
                     </li>
                     <li>
                        <p>使用<a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a>过程并指定输出图像的分辨率。（此过程可以并行执行。）
                        </p>
                     </li>
                     <li>
                        <p id="GUID-E4C18793-CFE6-49CC-8957-6FA9DD99CB7B___GOBACK-3ADA4D9C">在仿射变换期间，使用<a href="SDO_GEOR-reference.html#GUID-9C8F8F29-5D1A-4403-9147-B9FD1A30B767">SDO_GEOR.affineTransform</a>过程的<code class="codeph">scales</code>参数。在该过程中， <code class="codeph">scales</code>参数是一个两位数组，您可以在其中单独指定行和列的比例因子。（此过程可以并行执行。）
                        </p>
                     </li>
                  </ul>
                  <div class="example" id="GUID-E4C18793-CFE6-49CC-8957-6FA9DD99CB7B__CHDCBFGA">
                     <p class="titleinexample">示例6-9使用SDO_GEOR.scaleCopy进行图像缩放</p>
                     <p>此示例使用<a href="SDO_GEOR-reference.html#GUID-3F7A39BD-67FB-40B7-9143-32FA5DFD9628">SDO_GEOR.scaleCopy</a>执行重新缩放，并将<code class="codeph">scaleFactor</code>值指定为2。输入图像将具有比原始图像多2倍的行和2倍的列，并且这些值将通过<code class="codeph">average16</code>算法重新采样。请注意，图像将比原始图像大4倍。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr_src sdo_georaster; gr_out sdo_georaster; BEGIN从georaster_table中选择georaster到gr_src，其中georid = 7; - 从georaster_table重新缩放删除，其中georid = 9;插入georaster_table值（9，'由scaleCopy重新缩放'，sdo_geor.init（'rdt_4'，9））将georaster返回到gr_out; <span class="bold">sdo_geor.scaleCopy</span> （inGeoRaster =&gt; null， <span class="bold">scaleFactor =&gt;'scaleFactor = 2'</span> ，resampleParam =&gt;'resampling = AVERAGE16'，storageParam =&gt; null，outGeoraster =&gt; gr_out）;更新georaster_table set georaster = gr_out其中georid = 9;承诺;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-E4C18793-CFE6-49CC-8957-6FA9DD99CB7B__CHDJGFIF">
                     <p class="titleinexample">示例6-10使用SDO_GEOR.rectify进行图像缩放</p>
                     <p>此示例使用<a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a>并指定<code class="codeph">outResolutions</code>参数执行重新缩放。输入图像已经过校正，输出将与输入具有相同的SRID。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr_src sdo_georaster; gr_out sdo_georaster; BEGIN从georaster_table中选择georaster到gr_src，其中georid = 7; - 从georaster_table重新缩放删除，其中georid = 10;插入georaster_table值（10，'通过矫正'重新缩放'，sdo_geor.init（'rdt_4'，10））将georaster返回到gr_out; <span class="bold">sdo_geor.rectify</span> （inGeoRaster =&gt; null，pyramidLevel =&gt; null，elevationParam =&gt; null，dem =&gt; null，outSRID =&gt; null，outModelCoordLoc =&gt; null，cropArea =&gt; null，polygonClip =&gt; null，layerNumbers =&gt; null， <span class="bold">outResolutions =&gt; sdo_number_array（1.2,1.2）</span> ，resolutionUnit =&gt; null，referencePoint =&gt; null，resampleParam =&gt;'resampling = CUBIC'，storageParam =&gt; null，outGeoraster =&gt; gr_out，parallelParam =&gt;'parallel = 4'）;更新georaster_table set georaster = gr_out其中georid = 10;承诺;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-E4C18793-CFE6-49CC-8957-6FA9DD99CB7B__GUID-A1B493D3-6F40-49F5-86F1-616A068678B2">
                     <p class="titleinexample">例6-11使用SDO_GEOR.affineTransform重新缩放</p>
                     <p>此示例使用<a href="SDO_GEOR-reference.html#GUID-9C8F8F29-5D1A-4403-9147-B9FD1A30B767">SDO_GEOR.affineTransform</a>过程执行重新缩放，并指定将<code class="codeph">scales</code>参数<code class="codeph">scales</code>为<code class="codeph">sdo_number_array(2, 2)</code> ，指示图像将在行维上放大2次，在<code class="codeph">sdo_number_array(2, 2)</code>上放大2倍。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; gr2 sdo_georaster; BEGIN从georaster_table中选择georaster到gr1，其中georid = 1;插入georaster_table值（2，'向左旋转90'，sdo_geor.init（'rdt0'，2））将georaster返回到gr2; sdo_geor.affineTransform（inGeoRaster =&gt; gr1，translation =&gt; null， <span class="bold">scales =&gt; sdo_number_array（2,2）</span> ，rotatePt =&gt; null，rotateAngle =&gt; null，shear =&gt; null，reflection =&gt; null，storageParam =&gt; null，outGeoraster =&gt; gr2，parallelParam =&gt;'parallel = 4'）;更新georaster_table set georaster = gr2 where georid = 2;承诺;结束;</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1337"></a><a id="GEORS1338"></a><a id="GEORS1336"></a><div class="props_rev_3"><a id="GUID-1BFCB081-6C19-4727-B07E-1127515D75CD" name="GUID-1BFCB081-6C19-4727-B07E-1127515D75CD"></a><h3 id="GEORS-GUID-1BFCB081-6C19-4727-B07E-1127515D75CD" class="sect3"><span class="enumeration_section">6.7</span>图像拉伸，标准化，均衡，直方图匹配和闪避</h3>
               <div>
                  <p>可以增强图像的颜色和对比度以改善其视觉质量。SDO_GEOR_IP包（用于图像处理的“IP”）提供用于图像增强的一组子程序，包括执行图像拉伸，图像归一化，图像均衡，直方图匹配和图像躲避。</p>
                  <p><span class="bold">线性拉伸</span>和<span class="bold">分段拉伸</span>可以基于最小和最大单元格值或在指定的值范围<span class="bold">线性地拉伸</span>所有单元格值的图像单元值，以实现更好的颜色和对比度。要执行图像拉伸，可以使用以下过程：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="SDO_GEOR_IP-reference-ref.html#GUID-B6E29A85-58A4-4DCA-BF00-D0B4C46DFE8E">SDO_GEOR_IP.stretch将</a>任何支持的单元格深度（1BIT到64BIT_REAL）中的GeoRaster对象拉伸到8BIT_U的单元深度以用于显示目的。
                        </p>
                     </li>
                     <li>
                        <p><a href="SDO_GEOR_IP-reference-ref.html#GUID-4996A4C1-3CEA-4F4A-9D3E-1251AC3DEFB3">SDO_GEOR_IP.piecewiseStretch</a>将任何支持的单元格深度的GeoRaster对象拉伸到更高或更低单元格深度的GeoRaster对象，不限于8BIT_U。</p>
                     </li>
                  </ul>
                  <p>图像<span class="bold">归一化</span>基于图像单元值的统计（平均值和标准偏差）线性地拉伸图像。要执行图像规范化，请使用<a href="SDO_GEOR_IP-reference-ref.html#GUID-2D8EF3FF-9A5D-49ED-BC27-56D145E96C77">SDO_GEOR_IP.normalize</a> 。
                  </p>
                  <p>图像<span class="bold">均衡</span>通过均衡其直方图来增强图像对比度。要执行均衡，请使用<a href="SDO_GEOR_IP-reference-ref.html#GUID-5E8228CC-DD00-42F4-80A4-458533A998EA">SDO_GEOR_IP.equalize</a>过程。
                  </p>
                  <p>图像<span class="bold">直方图匹配</span>拉伸图像以匹配指定的直方图或参考图像的直方图。要执行图像直方图匹配，请使用<a href="SDO_GEOR_IP-reference-ref.html#GUID-A3F4F825-3B80-4673-9CC0-010AFCBE01AA">SDO_GEOR_IP.histogramMatch</a>过程。
                  </p>
                  <p>图像<span class="bold">躲避</span>通过在本地而不是全局地拉伸图像的对比度来平衡图像颜色。要执行图像躲避，请使用<a href="SDO_GEOR_IP-reference-ref.html#GUID-6E3461D5-3DCB-4212-ADE5-7E200F541FA4">SDO_GEOR_IP.dodge</a>过程。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-F3C5A387-4E89-4E85-B17D-75FB75917869" name="GUID-F3C5A387-4E89-4E85-B17D-75FB75917869"></a><h3 id="GEORS-GUID-F3C5A387-4E89-4E85-B17D-75FB75917869" class="sect3"><span class="enumeration_section">6.8</span>图像过滤</h3>
               <div>
                  <p>图像过滤是在图像上应用卷积滤波器以实现特定目的的过程。例如，在图像上应用低通滤波器可以平滑并降低图像中的噪声，而在图像上应用高通滤波器可以增强图像的细节甚至检测图像内的边缘。</p>
                  <p><a href="SDO_GEOR_IP-reference-ref.html#GUID-2EDEFFD7-15AA-4C94-B1D0-87B078B7444E">SDO_GEOR_IP.filter</a>过程提供标准滤波器，如低通滤波器（LPF），高通滤波器（HPF）和高升压滤波器（HBF）。它还允许您在图像上应用自定义过滤器。
                  </p>
                  <p>以下示例通过在图像上提供定制的3乘3拉普拉斯滤波器来执行图像滤波，以进行边缘检测。</p><pre class="pre codeblock"><code>DECLARE gr1 sdo_georaster; gr2 sdo_georaster; cropArea sdo_geometry; BEGIN INSERT INTO georaster_table（georid，georaster）VALUES（41，sdo_geor.init（'RDT_1'））RETURNING georaster INTO gr2; SELECT georaster INTO gr1 FROM georaster_table WHERE georid = 4; sdo_geor_ip.filter（gr1,0，cropArea，null，'filtertype = CUSTOM，kernelsize =（3,3）'，sdo_number_array（0,1,0,1，-4,1,0,1,0），null， GR2）;更新georaster_table SET georaster = gr2 WHERE georid = 41;承诺;结束; /</code></pre></div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1339"></a><div class="props_rev_3"><a id="GUID-21CA4981-4DFB-4918-BC1F-13803AFEAD28" name="GUID-21CA4981-4DFB-4918-BC1F-13803AFEAD28"></a><h3 id="GEORS-GUID-21CA4981-4DFB-4918-BC1F-13803AFEAD28" class="sect3"><span class="enumeration_section">6.9</span>图像分割</h3>
               <div>
                  <p>分割是一种简单类型的分类算法，可用于将某些类型的图像分类为更大的地面特征类别，例如陆地，云，水或雪。</p>
                  <p><a id="d24355e1241" class="indexterm-anchor"></a>您可以使用<a href="sdo-geor-ra-ref.html#GUID-D9DA6608-7D97-4428-B1B2-002C371846E9">SDO_GEOR_RA.classify</a>过程将阈值应用于图像。<span class="bold">阈值处理</span>是最简单的分割，它通过使用单个单元格值作为阈值将图像分为两类。生成的图像只有两个值，可以直接在同一进程中转换为二进制位图掩码。
                  </p>
                  <p>您还可以使用<a href="sdo-geor-ra-ref.html#GUID-D9DA6608-7D97-4428-B1B2-002C371846E9">SDO_GEOR_RA.classify</a>过程应用更多图像分割操作，首先在多个波段上应用算术运算，然后将结果分类为多个类别。
                  </p>
                  <p>有关使用<a href="sdo-geor-ra-ref.html#GUID-D9DA6608-7D97-4428-B1B2-002C371846E9">SDO_GEOR_RA.classify</a>过程的示例，请参阅<a href="raster-algebra-and-analytics.html#GUID-57DE5ACD-7DE9-4871-9DF0-CC685DF5114E" title="可以在源GeoRaster对象上应用分类（分段）操作以生成新对象。">分类操作</a> 。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1341"></a><a id="GEORS1342"></a><a id="GEORS1340"></a><div class="props_rev_3"><a id="GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77" name="GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77"></a><h3 id="GEORS-GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77" class="sect3"><span class="enumeration_section">6.10</span>图像拼接：并行生成和部分更新</h3>
               <div>
                  <p>图像金字塔是构建大规模图像数据库中最常用的过程之一。</p>
                  <p>本主题讨论了一些相关技术：并行金字塔生成，金字塔部分更新以及批处理和并发处理。</p>
                  <p>为了更有效地使用金字塔，您可以并行生成金字塔并执行金字塔的部分更新。（本节假设您了解<a href="georaster-overview-and-concepts.html#GUID-739D74CC-E256-4E89-AB7F-9251054B9E82" title="金字塔是GeoRaster对象的子对象，表示不同大小和分辨率的栅格图像或栅格数据。">金字塔中</a>解释的概念。）
                  </p>
                  <div class="example" id="GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77__CHDDJJHI">
                     <p class="titleinexample">例6-12并行生成金字塔</p>
                     <p>为了更快地生成金字塔，可以使用<a href="SDO_GEOR-reference.html#GUID-896CB187-FAC1-4A2C-9921-B98AC4E92F3B">SDO_GEOR.generatePyramid</a>过程指定<code class="codeph">parallelParam</code>参数。在<a href="image-processing-virtual-mosaic.html#GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77__CHDDJJHI">例6-12中</a> ，并行度设置为4。（金字塔生成的实际性能改进取决于Oracle数据库可用的CPU数量。）
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr sdo_georaster; BEGIN SELECT georaster INTO gr FROM georaster_table WHERE georid = 6 FOR UPDATE; - 生成金字塔。sdo_geor.generatePyramid（gr，'rLevel = 5，resampling = NN'，null， <span class="bold">'parallel = 4'</span> ）; - 更新原始GeoRaster对象。更新georaster_table SET georaster = gr WHERE georid = 6;承诺;结束; /</pre><p>为了启用金字塔生成的并行处理， <a href="SDO_GEOR-reference.html#GUID-896CB187-FAC1-4A2C-9921-B98AC4E92F3B">SDO_GEOR.generatePyramid</a>执行隐式提交操作。如果在调用期间出现错误，则GeoRaster对象可能处于无效状态。如果发生这种情况，请使用<a href="SDO_GEOR-reference.html#GUID-351B293B-CE47-45E0-92F0-DC7A52D84FDF">SDO_GEOR.deletePyramid</a>删除GeoRaster对象的新生成和上部金字塔等级。
                     </p>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77__CHDIABFI">
                     <p class="titleinexample">例6-13金字塔的部分更新</p>
                     <p>您可以使用<a href="SDO_GEOR-reference.html#GUID-ED3D72BF-B5C4-46B1-832C-287BF7696B3E">SDO_GEOR.updateRaster</a>过程部分更新金字塔。在<a href="image-processing-virtual-mosaic.html#GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77__CHDIABFI">例6-13中</a> ，指定区域（ <code class="codeph">targetArea</code>指定为<code class="codeph">area</code> ）的目标GeoRaster对象由另一个GeoRaster对象更新。<code class="codeph">updateUpperPyramids</code>参数设置为<code class="codeph">true</code> ，因此目标GeoRaster对象的上部金字塔仅在指定区域部分更新。换句话说，上金字塔等级没有完全再生，但只有该targetArea中的单元被重新生成，因此性能得到改善。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; gr2 sdo_georaster; area sdo_number_array：= sdo_number_array（-200，-50,201,162）; BEGIN SELECT georaster INTO gr2 FROM georaster_table WHERE georid = 0 FOR UPDATE; SELECT georaster INTO gr1 FROM georaster_table WHERE georid = 1; SDO_GEOR.updateRaster（gr2,0，null， <span class="bold">area</span> ，gr1,0，null， <span class="bold">'true'</span> ）; UPDATE GEORASTER_TABLE SET georaster = gr2 WHERE georid = 0;承诺;结束; /</pre><p>加速和自动化金字塔化过程的其他技术包括批处理和并发处理。要批量金字塔特定区域中的许多图像，请参阅<a href="georaster-data-manipulation.html#GUID-13578486-979A-410B-94BB-863DBB4AA7E2">查询和搜索GeoRaster对象中</a>的示例。要同时处理多个批处理，您可以启动不同的数据库会话</p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1344"></a><a id="GEORS1343"></a><div class="props_rev_3"><a id="GUID-60EC1E32-9E68-4E4D-8FFE-54A8A19A07EE" name="GUID-60EC1E32-9E68-4E4D-8FFE-54A8A19A07EE"></a><h3 id="GEORS-GUID-60EC1E32-9E68-4E4D-8FFE-54A8A19A07EE" class="sect3"><span class="enumeration_section">6.11</span>位图金字塔</h3>
               <div>
                  <p>在某些传统金字塔不足的情况下，位图金字塔可以生成高质量的金字塔。</p>
                  <p>对于大多数栅格数据类型，图像金字塔<a href="image-processing-virtual-mosaic.html#GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77" title="Image pyramiding is one of the most commonly used processes in building large-scale image databases.">：并行生成和部分更新中</a>描述的<a href="image-processing-virtual-mosaic.html#GUID-9935029B-2ED5-4A7B-9157-336AD5F57D77" title="图像金字塔是构建大规模图像数据库中最常用的过程之一。">图像</a>金字塔形成了高质量的金字塔。但是，对于通常以1位单元格深度存储的点，线或折线的位图栅格，相同的金字塔方法可能无法创建高质量的金字塔。在那些金字塔中常见扭曲的点图案和虚线。
                  </p>
                  <p>要解决此类问题，可以使用<a href="SDO_GEOR-reference.html#GUID-78D4949A-D751-43F9-8066-C479980C8FB8">SDO_GEOR.generateBitmapPyramid</a>过程而不是<a href="SDO_GEOR-reference.html#GUID-896CB187-FAC1-4A2C-9921-B98AC4E92F3B">SDOGEOR.generatePyramid</a>来对位图GeoRaster对象执行金字塔处理。<a href="SDO_GEOR-reference.html#GUID-78D4949A-D751-43F9-8066-C479980C8FB8">SDO_GEOR.generateBitmapPyramid</a>过程通过避免失真模式（特别是虚线或位图栅格中的缺失线条，如道路栅格地图或公用事业网络栅格地图）显着提高金字塔质量。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1346"></a><a id="GEORS1345"></a><div class="props_rev_3"><a id="GUID-C2D99D00-071F-4BBC-A0A5-50C6F0FAF355" name="GUID-C2D99D00-071F-4BBC-A0A5-50C6F0FAF355"></a><h3 id="GEORS-GUID-C2D99D00-071F-4BBC-A0A5-50C6F0FAF355" class="sect3"><span class="enumeration_section">6.12</span>植被指数计算</h3>
               <div>
                  <p>在遥感中，归一化植被指数（NDVI）是一种广泛使用的植被指数，使用户能够快速识别植被区域并监测植物的生长和“状况”。</p>
                  <p>使用Landsat TM图像，标准NDVI计算公式为：（TM4-TM3）/（TM4 + TM3）。</p>
                  <div class="example" id="GUID-C2D99D00-071F-4BBC-A0A5-50C6F0FAF355__CHDICBDG">
                     <p class="titleinexample">例6-14植被指数计算</p>
                     <p><a href="image-processing-virtual-mosaic.html#GUID-C2D99D00-071F-4BBC-A0A5-50C6F0FAF355__CHDICBDG">例6-14</a>采用Landsat 7 ETM +图像并以并行度计算NDVI。结果存储为另一个浮点数数据类型的栅格。请注意，在GeoRaster代数语言中，波段编号从0开始，因此公式转换为表达式：（{3}  -  {2}）/（{3} + {2}）。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE geor1 SDO_GEORASTER; geor2 SDO_GEORASTER; EBGIN  - 来源ETM +图像从Georaster_table中选择geor1到geor1，其中georid = 2; - 从georaster_table存储NDVI选择georaster到geor2，georid = 3用于更新; sdo_geor_ra.rasterMathOp（geor1，SDO_STRING2_ARRAY（'（{3}  -  {2}）/（{3} + {2}）'），'celldepth = 32bit_real'，geor2，null，null，'parallel = 4'）;更新georaster_table set georaster = geor2 where georid = 3;承诺;结束; /</pre><p>除NDVI外，遥感领域还有许多其他植被指数。其中许多可以使用GeoRaster栅格代数进行类似的计算。</p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1348"></a><a id="GEORS1347"></a><div class="props_rev_3"><a id="GUID-2530F5D2-7386-4DD4-877A-F004F2109912" name="GUID-2530F5D2-7386-4DD4-877A-F004F2109912"></a><h3 id="GEORS-GUID-2530F5D2-7386-4DD4-877A-F004F2109912" class="sect3"><span class="enumeration_section">6.13</span> Tasseled Cap Transformation</h3>
               <div>
                  <p>Tasseled Cap Transformation（TCT）是一种使用遥感图像分析物理地面特征的有用工具。</p>
                  <p>利用各种Landsat图像，它使用原始数字（DN）或反射率数据的5个波段生成6个新波段，每个波段代表不同的地面特征。产生的6个带通常称为（土壤）亮度，（植被）绿度，（土壤和冠层）湿度，雾度，TC5和TC6。每一种或它们的组合对于不同的应用是有用的，例如作物生长监测和分析，生物量研究和农业规划。</p>
                  <div class="example" id="GUID-2530F5D2-7386-4DD4-877A-F004F2109912__CHDGFEHH">
                     <p class="titleinexample">例6-15 Tasseled Cap Transformation</p>
                     <p><a href="image-processing-virtual-mosaic.html#GUID-2530F5D2-7386-4DD4-877A-F004F2109912__CHDGFEHH">例6-15</a>将Landsat 5 TM图像的DN数据作为输入，使用具有并行性的GeoRaster栅格代数执行TCT，并创建保存结果的新图像。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; gr2 sdo_georaster; ret varchar2（32）; BEGIN从georaster_table中选择georaster到gr1，其中georid = 2;从georaster_table中选择georaster到gr2，其中georid = 4表示更新; sdo_geor_ra.rasterMathOp（gr1，SDO_STRING2_ARRAY（'0.3561 * {0} + 0.3972 * {1} + 0.3904 * {2} + 0.6966 * {3} + 0.2286 * {4} + 0.1596 * {6}'，'（ -  0.3344 ）* {0} -0.3544 * {1} -0.4556 * {2} + 0.6966 * {3} -0.0242 * {4} -0.2630 * {6}'，'0.2626 * {0} + 0.2141 * {1} + 0.0926 * {2} + 0.0656 * {3} -0.7629 * {4} -0.5388 * {6}'，'0.0805 * {0} -0.0498 * {1} + 0.1950 * {2} -0.1327 * {3} + 0.5752 * {4} -0.7775 * {6}'，'（ -  0.7252）* {0} -0.0202 * {1} + 0.6683 * {2} + 0.0631 * {3} -0.1494 * {4} -0.0274 * { 6}'，'0.4000 * {0} -0.8172 * {1} + 0.3832 * {2} + 0.0602 * {3} -0.1095 * {4} + 0.0985 * {6}'），'celldepth = 32BIT_REAL'，gr2 ，null，null，'parallel = 4'）;更新georaster_table set georaster = gr2 where georid = 4;承诺;结束; /</pre><p>还可以使用相同的光栅代数语言在添加代码<a href="image-processing-virtual-mosaic.html#GUID-2530F5D2-7386-4DD4-877A-F004F2109912__CHDGFEHH">实施例6-15</a>到32位浮点数图像转换成8位整数图像和应用图像拉伸（描述<a href="image-processing-virtual-mosaic.html#GUID-1BFCB081-6C19-4727-B07E-1127515D75CD" title="可以增强图像的颜色和对比度以改善其视觉质量。SDO_GEOR_IP包（用于图像处理的“IP”）提供用于图像增强的一组子程序，包括执行图像拉伸，图像归一化，图像均衡，直方图匹配和图像躲避。">图象扩张</a>所得TCT图像上），以生成新的GeoRaster对象以进行可视化和分析。
                     </p>
                     <p>除了使用栅格代数算法的优化实现和嵌入式并行处理之外，您还可以利用Oracle网格计算基础架构快速计算NDVI或在存储在GeoRaster数据库中的数千个图像上应用TCT。</p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1349"></a><div class="props_rev_3"><a id="GUID-846AEB51-5BCC-48D6-8B27-8F846F38CC15" name="GUID-846AEB51-5BCC-48D6-8B27-8F846F38CC15"></a><h3 id="GEORS-GUID-846AEB51-5BCC-48D6-8B27-8F846F38CC15" class="sect3"><span class="enumeration_section">6.14</span>图像掩蔽</h3>
               <div>
                  <p>要执行图像蒙版，应用程序可以在GeoRaster数据库中查询位图蒙版，检索所需的位图蒙版或蒙版，并在目标GeoRaster对象上应用蒙版操作，以显示对象或执行其他一些处理。</p>
                  <p>位图掩码（ <a href="georaster-overview-and-concepts.html#GUID-20696505-9B9E-4E08-B165-1B23A574BEB3" title="位图掩码是一个特殊的一位深矩形栅格网格，每个像素的值为0或1。它用于在另一个图像内定义不规则形状的区域。1位定义区域的内部，0位定义区域的外部。">在位</a>图掩码中描述）可以存储为独立的GeoRaster对象;它也可以作为元数据存储在GeoRaster对象中，并与单个波段或整个GeoRaster对象相关联。
                  </p>
                  <p>您还可以使用<a href="SDO_GEOR-reference.html#GUID-A1FF83F0-481F-436C-BA4A-5C0490A4A7ED">SDO_GEOR.mask</a>过程在数据库内执行屏蔽操作以生成新的GeoRaster对象。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1351"></a><a id="GEORS1350"></a><div class="props_rev_3"><a id="GUID-8BE9EF2F-EAFE-4247-B8CD-50B3AD3A3807" name="GUID-8BE9EF2F-EAFE-4247-B8CD-50B3AD3A3807"></a><h3 id="GEORS-GUID-8BE9EF2F-EAFE-4247-B8CD-50B3AD3A3807" class="sect3"><span class="enumeration_section">6.15</span>乐队合并</h3>
               <div>
                  <p>对于图像分类，时间序列分析和栅格GIS建模，可能需要将多个波段或不同GeoRaster对象的图层合并到单个GeoRaster对象中。</p>
                  <p>此操作在GeoRaster中称为带或层合并，可以使用<a href="SDO_GEOR-reference.html#GUID-859F107A-4D75-4C36-B9FC-690FA202789C">SDO_GEOR.mergeLayers</a>过程或<a href="sdo-geor-ra-ref.html#GUID-BB7A762E-E615-43AD-9D74-5E917D29F333">SDO_GEOR_RA.rasterMathOp</a>过程来执行。您可以将源GeoRaster对象的指定波段附加到目标GeoRaster对象，也可以将两个GeoRaster对象中的不同波段合并到一个新的GeoRaster对象中。通过迭代执行此合并或追加，您可以将无限数量的波段合并到单个GeoRaster对象中。
                  </p>
                  <div class="example" id="GUID-8BE9EF2F-EAFE-4247-B8CD-50B3AD3A3807__CHDFDJDE">
                     <p class="titleinexample">例6-16波段合并</p>
                     <p><a href="image-processing-virtual-mosaic.html#GUID-8BE9EF2F-EAFE-4247-B8CD-50B3AD3A3807__CHDFDJDE">例6-16</a>包括两个例子。第一个示例假设有八个GeoRaster对象，每个对象<span class="italic">只</span>包含<span class="italic">一个</span>从GeoTIFF格式的单波段Landsat ETM +图像文件加载的波段。每个GeoRaster对象中的波段数与GeoRaster对象的GEORID列值相同。该示例将所有波段合并为单个GeoRaster对象，以创建完整的ETM +场景。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; BEGIN从georaster_table选择georaster到gr1，georid = 1用于更新; for rec in（从Georaster_table中选择georaster，georid&gt; = 2，georid &lt;= 8 order by georid）loop <span class="bold">sdo_geor.mergelayers（gr1，rec.georaster）</span> ;结束循环;更新georaster_table set georaster = gr1其中georid = 1;承诺;结束; /</pre><p>第二个例子假设有八个GeoRaster对象，每个对象包含<span class="italic">三个</span>波段。该示例从每个GeoRaster对象中拾取一个波段，并将它们并行合并为一个8波段GeoRaster对象。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE geor SDO_GEORASTER; geo_array SDO_GEORASTER_ARRAY; BEGIN SELECT georaster INTO geor FROM georaster_table WHERE georid = 0 for update; geo_array：= SDO_GEORASTER_ARRAY（）; for rec in（从Georaster_table中选择georaster，其中georid&gt; = 1，georid &lt;= 8 order by georid）loop geo_array.extend（1）; geo_array（geo_array.last）：= rec.georaster;结束循环; sdo_geor_ra.rasterMathOp（geo_array，SDO_STRING2_ARRAY（ '{0,0}'， '{1,1}'， '{2,2}'， '{3,0}'， '{4,1}'，“{ 5,2}”， '{6,0}'， '{7,1}'，），NULL，geor， '假'，NULL， '平行= 4'）;更新georaster_table SET georaster = geor WHERE georid = 0;承诺;结束; /</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1353"></a><a id="GEORS1352"></a><div class="props_rev_3"><a id="GUID-EE1AFE0D-730E-49DC-80AF-E99504D14156" name="GUID-EE1AFE0D-730E-49DC-80AF-E99504D14156"></a><h3 id="GEORS-GUID-EE1AFE0D-730E-49DC-80AF-E99504D14156" class="sect3"><span class="enumeration_section">6.16</span>图像附加</h3>
               <div>
                  <p>当两个图像具有相同数量的波段时，您可以将一个图像附加到另一个图像。</p>
                  <p>当以一定间隔收集地理空间图像并且稍后需要将捕获的图像附加到现有图像以制作整个空间区域的大图像时，图像附加是有用的。图像附加对于使用新图像更新现有图像也很有用。</p>
                  <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-D47B17BE-79C2-4610-B75A-D03182FD40FB">SDO_GEOR_AGGR.append</a>过程通过使用另一个GeoRaster对象部分更新现有GeoRaster对象来实现图像追加。如果现有的GeoRaster对象包含金字塔，则使用新数据部分更新具有阻塞的金字塔。
                  </p>
                  <p><a href="image-processing-virtual-mosaic.html#GUID-EE1AFE0D-730E-49DC-80AF-E99504D14156__CHDFIAID">例6-17</a>将一个图像附加到另一个图像，同时更新带有阻塞的金字塔。由于<code class="codeph">appendParam</code>参数指定<code class="codeph">'nodata=true'</code> ，因此重叠区域中的NODATA值被视为透明。
                  </p>
                  <div class="example" id="GUID-EE1AFE0D-730E-49DC-80AF-E99504D14156__CHDFIAID">
                     <p class="titleinexample">示例6-17将一个图像附加到另一个图像</p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; gr1 sdo_georaster; BEGIN从georaster_table选择georaster到gr1，georid = 1用于更新;从Georaster_table中选择georaster到gr2，其中georid = 2; <span class="bold">sdo_geor_aggr.append（gr1，gr2,0，'nodata = true'）</span> ;更新georaster_table set georaster = gr1其中georid = 1;承诺;结束; /</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1355"></a><a id="GEORS1357"></a><a id="GEORS1354"></a><div class="props_rev_3"><a id="GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA" name="GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA"></a><h3 id="GEORS-GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA" class="sect3"><span class="enumeration_section">6.17</span>大规模图像镶嵌</h3>
               <div>
                  <p>大型地理空间区域通常由许多较小的航空照片或卫星图像组成。大规模图像镶嵌可以将这些小的地理空间图像拼接成一个大图像，以更好地查看整个空间区域。</p>
                  <p>GeoRaster提供大规模镶嵌功能，允许间隙，重叠和缺少源GeoRaster对象。它支持整流和未整理的图像。它支持内部重投和校正，公共点规则和简单的色彩平衡。您还可以在某个金字塔级别拼接。这种镶嵌过程会产生单个GeoRaster对象，与<span class="italic">虚拟镶嵌</span>相反，也称为<span class="bold">物理</span> <span class="italic">镶嵌</span> （有关虚拟镶嵌的信息，请参阅<a href="image-processing-virtual-mosaic.html#GUID-16C91449-1E94-4B3F-9403-EEFE483251AD" title="虚拟马赛克将一组GeoRaster图像视为一个大的几乎镶嵌图像。">虚拟镶嵌</a> ）。
                  </p>
                  <p><a href="SDO_GEOR-reference.html#GUID-17F61F94-A06C-41F4-A064-9243C8904F31">SDO_GEOR.mosaic</a>和<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>程序为图像镶嵌提供支持;但是，强烈建议您使用<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset，</a>因为它提供了更多高级功能和选项，并且还通过并行实现。<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>可以采用虚拟马赛克，例如GeoRaster表列表，带有GeoRaster列的数据库视图或REF CURSOR作为源图像。
                  </p>
                  <p><a href="SDO_GEOR-reference.html#GUID-17F61F94-A06C-41F4-A064-9243C8904F31">SDO_GEOR.mosaic</a>过程镶嵌了一组经过纠正的源GeoRaster图像，在相同的SRID下进行地理空间对齐，并具有相同的分辨率。马赛克的结果是另一个GeoRaster对象。如果源图像之间存在重叠，则马赛克结果将在重叠区域具有最后源图像的内容。此过程适用于预处理和完美对齐的源图像。
                  </p>
                  <p>在本节的示例中，源图像存储在源GeoRaster表GRTAB，GRTAB1和GRTAB2中，这些表由以下列定义：</p><pre class="oac_no_warn" dir="ltr">（id NUMBER PRIMARY KEY，cloud_cover NUMBER  - 云覆盖率的百分比last_update TIMESTAMP  -  GeoRaster对象的上次更新时间grobj SDO_GEORASTER）</pre><p>已在这些表中的GeoRaster对象的<code class="codeph">spatialExtent</code>属性上创建Oracle Spatial和Graph空间索引。
                  </p>
                  <p>在这些示例中，镶嵌图像存储在GEORASTER_TABLE中，该值在<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数中</a>定义。
                  </p>
                  <div class="example" id="GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA__CHDBHAHJ">
                     <p class="titleinexample">例6-18 SDO_GEOR.mosaic（表和列名）</p>
                     <p><a href="image-processing-virtual-mosaic.html#GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA__CHDBHAHJ">例6-18</a>显示了<a href="SDO_GEOR-reference.html#GUID-17F61F94-A06C-41F4-A064-9243C8904F31">SDO_GEOR.mosaic</a>过程。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr sdo_georaster; BEGIN INSERT INTO georaster_table（georid，georaster）VALUES（12，sdo_geor.init（'rdt_1'））RETURNING georaster INTO gr; <span class="bold">sdo_geor.mosaic（'grtab'，'grobj'，gr，'blocking = optimalpadding blocksize =（512,512,1）'）</span> ;更新georaster_table SET georaster = gr WHERE id = 12;结束; /</pre><p>然而，在现实世界中，源图像通常在不同的环境下被收集，以便具有不同的分辨率或大的重叠区域，或者使用不同的地理参考系统。在这种情况下，您可以使用<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程将这些源图像拼接成一个统一的镶嵌图像。与<a href="SDO_GEOR-reference.html#GUID-17F61F94-A06C-41F4-A064-9243C8904F31">SDO_GEOR.mosaic</a>相比， <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程提供了更多功能和选项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>源图像不必位于相同的坐标系（SRID）中，并且具有相同的地理配准信息或分辨率。</p>
                        </li>
                        <li>
                           <p>可以在用户指定的金字塔等级上镶嵌源图像。</p>
                        </li>
                        <li>
                           <p>源图像可以在用户指定的波段上镶嵌。</p>
                        </li>
                        <li>
                           <p>输出图像可以具有与输入图像不同的坐标系和分辨率（ <code class="codeph">outSRID</code>和<code class="codeph">outResolutions</code>参数）。
                           </p>
                        </li>
                        <li>
                           <p>您可以通过<code class="codeph">mosaicParam</code>参数更多地控制重叠区域的输出： <code class="codeph">commonPointRule</code>可以指定在重叠区域用于输出的单元格值， <code class="codeph">NODATA</code>可以指示是否考虑重叠区域的NODATA值。
                           </p>
                        </li>
                        <li>
                           <p>输出镶嵌图像可以在指定点（参考点）对齐。如果源图像的对齐方式多于在<code class="codeph">mosaicParam</code>指定的<code class="codeph">resampleTolerance</code>值，则可以对源图像进行重新采样，以便与参考点对齐。
                           </p>
                        </li>
                        <li>
                           <p>如果源图像是小于2个像素宽之间小的间隙，它可以使用相邻像素值时被填充<code class="codeph">fillGap</code>是<code class="codeph">true</code>在<code class="codeph">mosaicParam</code> 。
                           </p>
                        </li>
                        <li>
                           <p>支持有限的色彩平衡（线性拉伸和标准化）。</p>
                        </li>
                        <li>
                           <p>支持并行处理以加速镶嵌过程。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA__CHDCDABA">
                     <p class="titleinexample">例6-19 SDO_GEOR_AGGR.mosaicSubset</p>
                     <p><a href="image-processing-virtual-mosaic.html#GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA__CHDCDABA">例6-19</a>使用<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>将来自两个GeoRaster表（GRTAB1和GRTAB2）的所有源图像拼接成SRID 4326中的大型镶嵌图像，x和y维度上的分辨率为30米。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE决议sdo_number_array; gr sdo_georaster; BEGIN插入georaster_table（georid，georaster）值（10，sdo_geor.init（'RDT_1'，10））将georaster返回到gr; <span class="bold">resolution：= sdo_number_array（30,30）</span> ; <span class="bold">sdo_geor_aggr.mosaicSubset（'grtab1，grtab2'，'grobj，grobj'，0,4326</span> <span class="bold">，null，null，null，</span> <span class="bold">null，null，null，resolutions，'unit = meter'，</span> <span class="bold">'commonPointRule = end，nodata = true，resampleTolerance = 0.2，重新采样= bilinear，fillGap = true'，</span> <span class="bold">'blocking = optimalpadding blocksize =（512,512,3）'，gr，null，'parallel = 4'）</span> ;更新georaster_table set georaster = gr其中georid = 10;承诺;结束; /</pre><p>在<a href="image-processing-virtual-mosaic.html#GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA__CHDCDABA">例6-19中</a> ：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>任何未纠正的源图像都会被纠正;不在SRID 4326中的任何源图像被重新投影到SRID 4326。</p>
                        </li>
                        <li>
                           <p>任何分辨率不是30米的源图像都会缩放到30米的分辨率。</p>
                        </li>
                        <li>
                           <p>在<code class="codeph">nodata</code>在关键字<code class="codeph">mosaicParam</code>参数被指定为<code class="codeph">true</code> ，这意味着在所述重叠区域中的NODATA值不考虑。
                           </p>
                        </li>
                        <li>
                           <p>该<code class="codeph">resampleTolerance</code>在关键字<code class="codeph">mosaicParam</code>参数被指定为0.2，这意味着，如果源图像是从所述目标由大于0.2的像素偏移量，源图像被重新采样。
                           </p>
                        </li>
                        <li>
                           <p>重采样方法在<code class="codeph">mosaicParam</code>参数中指定为<code class="codeph">bilinear</code> 。
                           </p>
                        </li>
                        <li>
                           <p>并行度在<code class="codeph">parallelParam</code>参数中指定为4。
                           </p>
                        </li>
                     </ul>
                     <p>您可以在调用<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-517B4271-BF48-45C3-B989-88EE40CF780A">SDO_GEOR_AGGR.getMosaicSubset</a>之前调用<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.validateForMosaicSubset</a> ，以确保可以镶嵌源图像。
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-123957BD-EF8E-43D2-A2C9-40A6CFE3FA19">在镶嵌期间的颜色平衡</a><br></li>
                     <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-8BA68795-65F7-40A6-AD9C-8E774B527176">并行压缩，复制和子集</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-123957BD-EF8E-43D2-A2C9-40A6CFE3FA19" name="GUID-123957BD-EF8E-43D2-A2C9-40A6CFE3FA19"></a><h4 id="GEORS-GUID-123957BD-EF8E-43D2-A2C9-40A6CFE3FA19" class="sect4"><span class="enumeration_section">6.17.1镶嵌时的</span>色彩平衡</h4>
                  <div>
                     <p>由于在捕获图像时照明条件，一天中的时间或其他因素的差异，镶嵌操作的源图像可以具有不同的亮度或颜色。色彩平衡可最大限度地减少相邻图像之间的色差，使得生成的马赛克看起来更加无缝。</p>
                     <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>和<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a>在镶嵌过程中提供一些基本的色彩平衡方法。提供了几种颜色平衡方法。它们由<code class="codeph">mosaicParam</code>参数中的关键字<code class="codeph">colorbalance</code>标识：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">LINEARSTRETCHING</code> ：在源图像的每个波段上执行最小 - 最大拉伸到参考最小和最大范围。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">STATISTICSMATCHING</code> ：执行图像拉伸，以便拉伸源图像的每个波段的平均值和标准偏差，并与参考平均值和标准偏差值相匹配。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">HISTOGRAMMATCHING</code> ：执行图像拉伸，使得结果图像的直方图与参考直方图匹配。
                           </p>
                        </li>
                     </ul>
                     <p>有几种方法可以指定颜色平衡方法的参考值。它们由<code class="codeph">mosaicParam</code>参数中的关键字<code class="codeph">cbreference</code>标识：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>VALUE：参考值直接通过<code class="codeph">referenceValue1</code> ， <code class="codeph">referenceValue2</code>或<code class="codeph">refHistograms</code>参数提供。
                           </p>
                        </li>
                        <li>
                           <p>IMAGE：参考值来自<code class="codeph">referenceImage</code>参数指定的图像。参考图像必须具有与源图像相同的带数。
                           </p>
                        </li>
                        <li>
                           <p>重叠：参考值由相邻图像通过与相邻图像重叠的区域确定。此选项要求源图像具有足够大的重叠，以便可以从重叠区域导出参考值。请注意，由于线性拉伸方法不能为此选项提供良好的结果，因此线性拉伸方法不支持重叠区域参考。</p>
                        </li>
                     </ul>
                     <div class="example" id="GUID-123957BD-EF8E-43D2-A2C9-40A6CFE3FA19__GUID-B8853B44-D4B7-4EB5-B2CB-C8C646CE6E18">
                        <p class="titleinexample">例6-20 LINEARSTRETCHING颜色平衡</p>
                        <p>此示例显示如何在<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程中对源图像使用<code class="codeph">LINEARSTRETCHING</code>颜色平衡方法。参考最小值和最大值在<code class="codeph">referenceValue1</code>和<code class="codeph">referenceValue2</code>参数中指定。在该示例中，每个频带具有不同的参考值。
                        </p><pre class="pre codeblock"><code>DECLARE gr sdo_georaster;分辨率sdo_number_array; ref_min sdo_number_arrray; ref_max sdo_number_array; BEGIN  - 创建新的GeoRaster对象，将镶嵌插入到georaster_table（georid，georaster）值（10，sdo_geor.init（'RDT_1'，10））中，将georaster返回到gr; - 设置输出分辨率分辨率：= sdo_number_array（30,30）; - 设置参考值，有3个值，每个频段对应一个ref_min：= sdo_number_array（10,10,10）; ref_max：= sdo_number_array（200,255,230）; -  Mosaic sdo_geor_aggr。MosaicSubset（'georaster_table_1'，'georaster'，null，32610，null，null，null，null，null，null，null，resolution，null， <span class="bold">'colorBalance = linearstretching，cbreference = value'，</span> 'blocking = optimalpadding，blocksize =（ 512,512,3）'，gr，null，'parallel = 4'，referenceValue1 =&gt; ref_min， <span class="bold">referenceValue2 =&gt; ref_max</span> ）;更新georaster_table set georaster = gr其中georid = 10;承诺;结束; /</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-123957BD-EF8E-43D2-A2C9-40A6CFE3FA19__GUID-A558E3FE-4B69-4938-884C-2E3A2AD9F860">
                        <p class="titleinexample">例6-21 HISTOGRAMMATCHING色彩平衡</p>
                        <p>此示例显示如何在<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程中对源图像使用HISTOGRAMMATCHING颜色平衡方法。参考直方图是从参考图像导出的。参考图像必须与源图像具有相同数量的波段。
                        </p><pre class="pre codeblock"><code>DECLARE gr sdo_georaster;分辨率sdo_number_array; ref_gr sdo_georaster; BEGIN  - 创建新的GeoRaster对象，将镶嵌插入到georaster_table（georid，georaster）值（10，sdo_geor.init（'RDT_1'，10））中，将georaster返回到gr; - 设置输出分辨率分辨率：= sdo_number_array（30,30）; - 检索参考图像从georaster_table中选择georaster到ref_gr，其中georid = 1; -  Mosaic sdo_geor_aggr。MosaicSubset（'georaster_table_1'，'georaster'，null，32610，null，null，null，null，null，null，null，resolution，null， <span class="bold">'colorBalance = histogramMatching，cbreference = image'，</span> 'blocking = optimalpadding，blocksize =（ 512,512,3）'，gr，null，'parallel = 4'， <span class="bold">refereneImage =&gt; ref_gr</span> ）;更新georaster_table set georaster = gr其中georid = 10;承诺;结束; /</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-123957BD-EF8E-43D2-A2C9-40A6CFE3FA19__GUID-5E444286-C9D1-4564-AC09-18A66329F027">
                        <p class="titleinexample">例6-22 STATISTICSMATCHING颜色平衡</p>
                        <p>此示例显示如何在<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程中对源图像使用<code class="codeph">STATISTICSMATCHING</code>颜色平衡方法。从相邻图像的重叠区域计算参考统计值。这要求源图像具有显着的重叠，使得重叠区域的统计可以反映相邻图像之间的色差。
                        </p><pre class="pre codeblock"><code>DECLARE gr sdo_georaster;分辨率sdo_number_array; BEGIN  - 创建新的GeoRaster对象，将镶嵌插入到georaster_table（georid，georaster）值（10，sdo_geor.init（'RDT_1'，10））中，将georaster返回到gr; - 设置输出分辨率分辨率：= sdo_number_array（30,30）; -  Mosaic sdo_geor_aggr。MosaicSubset（'georaster_table_1'，'georaster'，null，32610，null，null，null，null，null，null，null，resolution，null， <span class="bold">'colorBalance = statisticsMatching，cbreference = overlap'，</span> 'blocking = optimalpadding，blocksize =（ 512,512,3）'，gr，null，'parallel = 4'）;更新georaster_table set georaster = gr其中georid = 10;承诺;结束; /</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA" title="大型地理空间区域通常由许多较小的航空照片或卫星图像组成。大规模图像镶嵌可以将这些小的地理空间图像拼接成一个大图像，以更好地查看整个空间区域。">大规模图像镶嵌</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS1388"></a><a id="GEORS1389"></a><a id="GEORS1390"></a><a id="GEORS1380"></a><div class="props_rev_3"><a id="GUID-8BA68795-65F7-40A6-AD9C-8E774B527176" name="GUID-8BA68795-65F7-40A6-AD9C-8E774B527176"></a><h4 id="GEORS-GUID-8BA68795-65F7-40A6-AD9C-8E774B527176" class="sect4"><span class="enumeration_section">6.17.2</span>并行压缩，复制和子集</h4>
                  <div>
                     <p>要使整流，正射校正和重新投射并行化，请使用<a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a> 。要并行化变形，请调用<a href="SDO_GEOR-reference.html#GUID-1B480F30-85C6-4F02-BC5E-142A872BEF64">SDO_GEOR.warp</a> 。所有栅格代数操作也是并行化的。
                     </p>
                     <p>您可以使用<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程执行多种类型的并行操作，包括并行压缩和解压缩，并行复制或更改格式复制，并行子集化，并行重投影和并行校正。复制和子集化操作不直接并行化。对于JPEG和DEFLATE，如果不需要重新格式化，则可以调用<a href="SDO_GEOR-reference.html#GUID-9C8E8AE6-4C33-4813-B94A-A69C6206E8C4">SDO_GEOR.changeFormatCopy</a>过程来执行并行压缩和解压缩。本主题提供了并行压缩，复制和子集化操作的一些示例。在所有这些情况下， <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程适用于单个GeoRaster对象。
                     </p>
                     <p>为了说明并行化操作，本节中的示例对大多数参数使用空值。在您的应用程序中，您可以应用<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程的所有其他参数;但是，当输入是单个GeoRaster对象时， <code class="codeph">mosaicParam</code>参数无效。
                     </p>
                     <div class="example" id="GUID-8BA68795-65F7-40A6-AD9C-8E774B527176__CHDEDHCE">
                        <p class="titleinexample">例6-23并行压缩</p>
                        <p><a href="image-processing-virtual-mosaic.html#GUID-8BA68795-65F7-40A6-AD9C-8E774B527176__CHDEDHCE">例6-23</a>显示了使用<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程的并行压缩。这适用于DEFLATE和JPEG压缩和解压缩。
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE gr sdo_georaster; cur sys_refcursor; crop_area sdo_geometry：= null; BEGIN  - 使用georid = 2创建一个新的georaster对象 - 保持压缩图像从georaster_table删除，其中georid = 2;插入georaster_table（georid，georaster）值（2，sdo_geor.init（'RDT2'，2））将georaster返回到gr; - 使用georid = 1将图像重新锁定并压缩成JPEG，使用8开放曲线的平行度，用于georaster_table中georid = 1的选择georaster; sdo_geor_aggr.mosaicSubset（cur，0，null，null，null，crop_area，null，null，null，null，null，null，'compression = JPEG-F，blocking = optimalpadding，blocksize =（512,512,3）'，gr， null，'parallel = 8'）;更新georaster_table set georaster = gr其中georid = 2;承诺;结束; /</pre><p>在前面的示例中，如果调整storageParam参数，它将作为并行化的<a href="SDO_GEOR-reference.html#GUID-9C8E8AE6-4C33-4813-B94A-A69C6206E8C4">SDO_GEOR.changeFormatCopy</a>操作，包括压缩和解压缩。
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-8BA68795-65F7-40A6-AD9C-8E774B527176__CHDIAIBB">
                        <p class="titleinexample">例6-24并行子集和复制</p>
                        <p><a href="image-processing-virtual-mosaic.html#GUID-8BA68795-65F7-40A6-AD9C-8E774B527176__CHDIAIBB">例6-24</a>显示了使用<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程的并行子集和复制。
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE gr sdo_georaster; cur sys_refcursor; crop_area sdo_geometry：= null; BEGIN  - 使用georid = 2创建一个新的georaster对象，以便从georaster_table中保存副本删除，其中georid = 2;插入georaster_table（georid，georaster）值（2，sdo_geor.init（'RDT2'，2））将georaster返回到gr; - 设置crop_area进行子集化。crop_area：= sdo_geometry（2003,26986，null，sdo_elem_info_array（1,1003,1），sdo_ordinate_array（237040,897924,237013.3,897831.6,237129,897840,237182.5,897785.5,237239.9,897902.7,237223,897954,237133,897899， 237040,897924））; - 使用georid = 1的图像子集，使用8的平行度 - 并进行多边形裁剪 - 如果crop_area设置为null，则相同的调用将执行简单的并行复制而不进行子集化。'georaid = 1'中的'georaster from georaster_table'; sdo_geor_aggr.mosaicSubset（cur，0，null，null，null，crop_area，'true'，null，null，null，null，null，'pyramid = true'，gr，null，'parallel = 8'）;更新georaster_table set georaster = gr其中georid = 2;承诺;结束; /</pre><p>在<a href="image-processing-virtual-mosaic.html#GUID-8BA68795-65F7-40A6-AD9C-8E774B527176__CHDIAIBB">例6-24中</a> ，如果调整<code class="codeph">storageParam</code>参数，它将作为并行副本或<a href="SDO_GEOR-reference.html#GUID-9C8E8AE6-4C33-4813-B94A-A69C6206E8C4">SDO_GEOR.changeFormatCopy</a>操作，包括压缩和解压缩。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA" title="大型地理空间区域通常由许多较小的航空照片或卫星图像组成。大规模图像镶嵌可以将这些小的地理空间图像拼接成一个大图像，以更好地查看整个空间区域。">大规模图像镶嵌</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="GEORS1358"></a><div class="props_rev_3"><a id="GUID-16C91449-1E94-4B3F-9403-EEFE483251AD" name="GUID-16C91449-1E94-4B3F-9403-EEFE483251AD"></a><h3 id="GEORS-GUID-16C91449-1E94-4B3F-9403-EEFE483251AD" class="sect3"><span class="enumeration_section">6.18</span>虚拟马赛克</h3>
               <div>
                  <p>虚拟马赛克将一组GeoRaster图像视为一个大的几乎镶嵌图像。</p>
                  <p>对于某些应用，将图像集合镶嵌到单个物理马赛克中是不必要或不可取的。例如，您可能没有足够的磁盘空间来单独存储马赛克，或者您只是想节省磁盘空间。另一个例子是，如果您不想保留相同数据集的两个相同副本，但希望原始数据集按原样存储，例如DEM数据集，但您希望无缝地查询此数据集。另一个例子是，如果您想在镶嵌源图像时对同一区域应用不同的处理和镶嵌规则 - 物理马赛克没有这种灵活性。</p>
                  <p>在这种情况下，您可以创建虚拟马赛克，而不是将一组GeoRaster图像拼接成一个大的GeoRaster图像并将其存储在GeoRaster表中。虚拟马赛克将一组GeoRaster图像视为一个大的几乎镶嵌图像，而不将其存储在GeoRaster表中。</p>
                  <p>在GeoRaster中， <span class="bold">虚拟马赛克</span>被定义为来自一个或多个GeoRaster表或视图的任何大量地理参考GeoRaster对象（已纠正或未整理），这些表被视为单个GeoRaster对象。支持虚拟马赛克的金字塔。虚拟马赛克可以包含无限数量的图像，整个GeoRaster数据库可以被视为虚拟马赛克。您可以发出单个调用以根据感兴趣区域（即子集或裁剪）查询虚拟镶嵌，并且可以请求裁剪的图像位于具有不同分辨率的不同坐标系中。基于用户请求，使用公共点规则进行重新采样和镶嵌的动态转换在查询过程中在内部自动完成。
                  </p>
                  <p>以下是定义虚拟马赛克的方法：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>作为GeoRaster表或GeoRaster表的列表（请参阅<a href="image-processing-virtual-mosaic.html#GUID-FF053675-AB0E-47AB-8D33-418B6A153E70">虚拟马赛克作为一个或GeoRaster表列表</a> ）</p>
                     </li>
                     <li>
                        <p>作为带有GeoRaster列的数据库视图（请参阅<a href="image-processing-virtual-mosaic.html#GUID-BA5D3A32-A095-4A3D-9A1F-364D7248CDD3">虚拟马赛克作为带有GeoRaster列的视图</a> ）</p>
                     </li>
                     <li>
                        <p>作为导致GeoRaster对象集合的SQL查询语句（游标）（请参阅<a href="image-processing-virtual-mosaic.html#GUID-809D9B4C-AEB7-47A2-864A-6881FB3FB6AA">虚拟镶嵌作为SQL查询语句或游标</a> ）</p>
                     </li>
                  </ul>
                  <p>无论如何定义虚拟镶嵌，GeoRaster表中的GeoRaster对象都必须生成或设置<code class="codeph">spatialExtent</code>属性;否则， <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a>和<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程返回一个空的lob定位器或空的GeoRaster对象。对于一般用例和最佳查询性能，您应始终事先在<code class="codeph">spatialExtent</code>属性上创建空间索引。
                  </p>
                  <p>定义虚拟镶嵌后，您可以使用这些过程来查询或处理它：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a>通过虚拟马赛克执行即时查询</p>
                        <p>在该虚拟镶嵌图像的任何部分的空间查询中， <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a>过程动态地为查询区域执行镶嵌操作，并在BLOB中即时返回所需结果，就好像它是物理存储的镶嵌图像的子集一样。
                        </p>
                     </li>
                     <li>
                        <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>将镶嵌的子集作为GeoRaster对象存储在数据库中</p>
                        <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程为查询区域执行镶嵌操作，并将所需结果永久存储在另一个GeoRaster对象中</p>
                     </li>
                  </ul>
                  <p>有关使用虚拟马赛克的典型工作流程，请参阅<a href="image-processing-virtual-mosaic.html#GUID-D785EAD0-F1AD-4F1F-9C4A-AF1C73012B38">在应用程序中使用虚拟马赛克</a> ，以及<a href="image-processing-virtual-mosaic.html#GUID-F59FD2B5-6E1A-4998-BF3A-2BCE3EE7F49D">大规模虚拟马赛克的特殊注意事项</a>及其相关主题<a href="image-processing-virtual-mosaic.html#GUID-0926A2AC-B835-470D-9D73-B63F745CDA7B">使用MIN_X_RES $和MAX_X_RES $提高查询性能</a> 。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-FF053675-AB0E-47AB-8D33-418B6A153E70">虚拟马赛克作为一个或一个GeoRaster表列表</a><br></li>
                     <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-BA5D3A32-A095-4A3D-9A1F-364D7248CDD3">虚拟马赛克作为具有GeoRaster列的视图</a><br></li>
                     <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-809D9B4C-AEB7-47A2-864A-6881FB3FB6AA">虚拟马赛克作为SQL查询语句或游标</a><br></li>
                     <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-D785EAD0-F1AD-4F1F-9C4A-AF1C73012B38">在应用程序中使用虚拟镶嵌</a><br></li>
                     <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-F59FD2B5-6E1A-4998-BF3A-2BCE3EE7F49D">大规模虚拟马赛克的特殊考虑</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               <a id="GEORS1359"></a><a id="GEORS1368"></a><div class="props_rev_3"><a id="GUID-FF053675-AB0E-47AB-8D33-418B6A153E70" name="GUID-FF053675-AB0E-47AB-8D33-418B6A153E70"></a><h4 id="GEORS-GUID-FF053675-AB0E-47AB-8D33-418B6A153E70" class="sect4"><span class="enumeration_section">6.18.1</span>虚拟马赛克作为一个或一组GeoRaster表</h4>
                  <div>
                     <p>虚拟马赛克可以定义为一个GeoRaster表或GeoRaster表列表。应用程序指定每个表及其GeoRaster列。在此方法中，GeoRaster表的指定GeoRaster列中的所有GeoRaster对象都是虚拟镶嵌的一部分。</p>
                     <p><a href="image-processing-virtual-mosaic.html#GUID-FF053675-AB0E-47AB-8D33-418B6A153E70__CHDIFABC">实施例6-25</a>指定的GeoRaster表（GRTAB1，GRTAB2和GRTAB3，其具有在相同的定义GRTAB的列表虚拟镶嵌源图像<a href="image-processing-virtual-mosaic.html#GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA" title="大型地理空间区域通常由许多较小的航空照片或卫星图像组成。大规模图像镶嵌可以将这些小的地理空间图像拼接成一个大图像，以更好地查看整个空间区域。">大规模图像镶嵌</a> ）。
                     </p>
                     <div class="example" id="GUID-FF053675-AB0E-47AB-8D33-418B6A153E70__CHDIFABC">
                        <p class="titleinexample">示例6-25虚拟马赛克作为GeoRaster表的列表</p><pre class="oac_no_warn" dir="ltr">DECLARE lb blob; cropArea sdo_geometry; outArea sdo_geometry：= null; outWin sdo_number_array：= null;分辨率sdo_number_array; BEGIN dbms_lob.createTemporary（lb，TRUE）; cropArea：= sdo_geometry（2003,32610，null，sdo_elem_info_array（1,1003,3），sdo_ordinate_array（399180,4247820,496140,4353900））; resolution：= sdo_number_array（30,30）; sdo_geor_aggr.getMosaicSubset（ <span class="bold">'grtab1，grtab2，grtab3'，</span> <span class="bold">'grobj，grobj，grobj'，0,32610</span> ，null，null，cropArea，null，null，null，resolutions，null，'commonPointRule = end，nodata = true'， lb，outArea，outWin）; dbms_lob.freeTemporary（磅）;如果outWin不为null则为dbms_output.put_line（'输出窗口：（'|| outWin（1）||'，'|| outWin（2）||'，'|| outWin（3）||'，'| | outWin（4）||'）'）;万一;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-16C91449-1E94-4B3F-9403-EEFE483251AD" title="虚拟马赛克将一组GeoRaster图像视为一个大的几乎镶嵌图像。">虚拟马赛克</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS1360"></a><a id="GEORS1369"></a><div class="props_rev_3"><a id="GUID-BA5D3A32-A095-4A3D-9A1F-364D7248CDD3" name="GUID-BA5D3A32-A095-4A3D-9A1F-364D7248CDD3"></a><h4 id="GEORS-GUID-BA5D3A32-A095-4A3D-9A1F-364D7248CDD3" class="sect4"><span class="enumeration_section">6.18.2</span>虚拟马赛克作为具有GeoRaster列的视图</h4>
                  <div>
                     <p>可以将虚拟马赛克定义为具有GeoRaster列的一个数据库视图。应用程序指定视图名称及其GeoRaster列。在此方法中，视图的指定GeoRaster列中的所有GeoRaster对象都是虚拟镶嵌的一部分。这种方法允许您从任意数量的GeoRaster表中以复杂的方式为虚拟马赛克选择图像，利用空间索引和任何其他相关索引。</p>
                     <p>您还可以将虚拟马赛克定义为组合GeoRaster视图和GeoRaster表的列表。</p>
                     <p>将虚拟马赛克定义为数据库视图时，可以在<code class="codeph">georasterTableNames</code>参数中查询该视图。<a href="image-processing-virtual-mosaic.html#GUID-BA5D3A32-A095-4A3D-9A1F-364D7248CDD3__CHDGIHDD">例6-26</a>查询定义为视图的虚拟马赛克。请注意，在此示例中，查询根据图像的创建时间对图像进行排序，并在重叠区域中为生成的马赛克选择最新（最新）图像。
                     </p>
                     <div class="example" id="GUID-BA5D3A32-A095-4A3D-9A1F-364D7248CDD3__CHDGIHDD">
                        <p class="titleinexample">示例6-26在GeoRaster表上使用视图进行虚拟镶嵌</p><pre class="oac_no_warn" dir="ltr">创建或替换视图grview作为select * from（选择grobj，last_update来自grtab1，其中cloud_cover = 0 union all选择grobj，last_update来自grtab2，其中cloud_cover = 0 union all选择grobj，last_update来自grtab3）order by last_update; DECLARE lb blob; cropArea sdo_geometry; outArea sdo_geometry：= null; outWin sdo_number_array：= null;分辨率sdo_number_array; BEGIN dbms_lob.createTemporary（lb，TRUE）; cropArea：= sdo_geometry（2003,32610，null，sdo_elem_info_array（1,1003,3），sdo_ordinate_array（399180,4247820,496140,4353900））; resolution：= sdo_number_array（30,30）; sdo_geor_aggr.getMosaicSubset（ <span class="bold">'grview'，'grobj'</span> ， <span class="bold">0,32610</span> ，null，null，cropArea，null，null，null，resolutions，null，'commonPointRule = end，nodata = true'，lb，outArea，outWin）; dbms_lob.freeTemporary（磅）;如果outWin不为null则为dbms_output.put_line（'输出窗口：（'|| outWin（1）||'，'|| outWin（2）||'，'|| outWin（3）||'，'| | outWin（4）||'）'）;万一;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-16C91449-1E94-4B3F-9403-EEFE483251AD" title="虚拟马赛克将一组GeoRaster图像视为一个大的几乎镶嵌图像。">虚拟马赛克</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS1361"></a><a id="GEORS1370"></a><div class="props_rev_3"><a id="GUID-809D9B4C-AEB7-47A2-864A-6881FB3FB6AA" name="GUID-809D9B4C-AEB7-47A2-864A-6881FB3FB6AA"></a><h4 id="GEORS-GUID-809D9B4C-AEB7-47A2-864A-6881FB3FB6AA" class="sect4"><span class="enumeration_section">6.18.3</span>虚拟马赛克作为SQL查询语句或游标</h4>
                  <div>
                     <p>您可以将虚拟镶嵌定义为SQL语句或运行时数据库游标，而不是创建视图，该游标将从数据库中选择一组GeoRaster对象。应用程序从SQL语句创建游标，并将光标用作虚拟马赛克。在此定义中，光标中的所有GeoRaster对象都是虚拟镶嵌的一部分。此方法允许您从任意数量的GeoRaster表中以复杂的方式选择虚拟马赛克的图像。但是，空间索引不会自动用于此类虚拟马赛克的查询中。要利用空间索引，请使用查询窗口直接向SQL语句动态添加空间查询条件，以便可以更快地找到该查询窗口中的所有图像。</p>
                     <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a>和<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程接受GeoRaster对象的光标作为虚拟镶嵌，如<a href="image-processing-virtual-mosaic.html#GUID-809D9B4C-AEB7-47A2-864A-6881FB3FB6AA__CHDHFCBB">例6-27</a>所示。请注意，在此示例中，查询根据图像的创建时间对图像进行排序，并在重叠区域中为生成的马赛克选择最新（最新）图像。为了在表中有许多GeoRaster对象时获得最佳性能，光标查询应使用空间查询窗口过滤掉不相关的GeoRaster对象，如前一段所述。
                     </p>
                     <div class="example" id="GUID-809D9B4C-AEB7-47A2-864A-6881FB3FB6AA__CHDHFCBB">
                        <p class="titleinexample">示例6-27将光标用于虚拟马赛克</p><pre class="oac_no_warn" dir="ltr">DECLARE lb blob; outArea sdo_geometry：= null; outWin sdo_number_array：= null;分辨率sdo_number_array; mosaic_stmt varchar2（1000）; condition varchar2（1000）; BEGIN dbms_lob.createTemporary（lb，TRUE）; resolution：= sdo_number_array（30,30）; - 定义查询窗口（cropArea）cropArea：= sdo_geometry（2003,32610，null，sdo_elem_info_array（1,1003,3），sdo_ordinate_array（399180,4247820,496140,4353900））; - 定义虚拟马赛克mosaic_stmt：='select grobj from（select grobj，last_update from grtab1'||'其中cloud_cover = 0 union all select grobj，last_update from grtab2'||'where cloud_cover = 0）t'; - 使用查询窗口（cropArea）应用过滤以加快查询性能条件：='其中sdo_anyinteract（t.grobj.spatialExtent，：1）=''true'''|| '按last_update排序'; - 为mosaic_stmt ||打开虚拟马赛克以查询open cur条件使用cropArea; - 查询虚拟马赛克（确保此处使用的cropArea与打开游标时使用的相同）sdo_geor_aggr.getMosaicSubset（ <span class="bold">cur</span> ，0,32610，null，null，cropArea，null，null，null，resolution ，null，'commonPointRule = end，nodata = true'，lb，outArea，outWin）; dbms_lob.freeTemporary（磅）;关闭如果outWin不为null则为dbms_output.put_line（'输出窗口：（'|| outWin（1）||'，'|| outWin（2）||'，'|| outWin（3）||'，'| | outWin（4）||'）'）;万一;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-16C91449-1E94-4B3F-9403-EEFE483251AD" title="虚拟马赛克将一组GeoRaster图像视为一个大的几乎镶嵌图像。">虚拟马赛克</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS1371"></a><div class="props_rev_3"><a id="GUID-D785EAD0-F1AD-4F1F-9C4A-AF1C73012B38" name="GUID-D785EAD0-F1AD-4F1F-9C4A-AF1C73012B38"></a><h4 id="GEORS-GUID-D785EAD0-F1AD-4F1F-9C4A-AF1C73012B38" class="sect4"><span class="enumeration_section">6.18.4</span>在应用程序中使用虚拟马赛克</h4>
                  <div>
                     <div class="section">
                        <p>虚拟马赛克可以用作图像服务引擎以及各种其他应用场景。虚拟马赛克的定义可以由应用程序分别以字符串或其他形式存储。除了主要的查询程序<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a>和<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset之外</a> ，GeoRaster还在SDO_GEOR_AGGR包中提供其他子程序以方便应用程序开发：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-517B4271-BF48-45C3-B989-88EE40CF780A">SDO_GEOR_AGGR.validateForMosaicSubset</a></p>
                           </li>
                           <li>
                              <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-74A098CB-5EC9-406B-9437-FAEDEB012A2C">SDO_GEOR_AGGR.getMosaicExtent</a></p>
                           </li>
                           <li>
                              <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-D0BB7FCA-490F-4988-95BD-5DDF49D5B8CF">SDO_GEOR_AGGR.getMosaicResolutions</a></p>
                           </li>
                        </ul>
                        <p>可以在应用程序中调用<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-517B4271-BF48-45C3-B989-88EE40CF780A">SDO_GEOR_AGGR.validateForMosaicSubset</a> ， <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-74A098CB-5EC9-406B-9437-FAEDEB012A2C">SDO_GEOR_AGGR.getMosaicExtent</a>和<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-D0BB7FCA-490F-4988-95BD-5DDF49D5B8CF">SDO_GEOR_AGGR.getMosaicResolutions</a> ，以确保虚拟马赛克有效并且空间查询属于虚拟马赛克。以下步骤描述了应用程序中虚拟镶嵌的可能工作流程：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>定义虚拟马赛克。例如：</span><div><pre class="oac_no_warn" dir="ltr">创建或替换视图grview作为select * from（选择grobj，last_update来自grtab1，其中cloud_cover = 0 union all选择grobj，last_update来自grtab2，其中cloud_cover = 0 union all选择grobj，last_update来自grtab3）order by last_update;</pre><p>请注意，表GRTAB1，GRTAB2和GRTAB3是使用与<a href="image-processing-virtual-mosaic.html#GUID-992BAEDB-C6EC-4E0E-97AA-C18A59F960FA" title="大型地理空间区域通常由许多较小的航空照片或卫星图像组成。大规模图像镶嵌可以将这些小的地理空间图像拼接成一个大图像，以更好地查看整个空间区域。">大规模图像</a>镶嵌中的GRTAB相同的定义创建的，并且已在这些表中的GeoRaster对象的<code class="codeph">spatialExtent</code>属性上创建了Oracle Spatial和Graph空间索引。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>验证虚拟镶嵌数据集。例如：</span><div><pre class="oac_no_warn" dir="ltr">EXECUTE SDO_GEOR_AGGR.validateForMosaicSubset（'grview'，'grobj'，OUTSRID，OUTResolutions）;</pre><p>如果需要更详细的验证信息，则可以创建验证错误表并将其传递给调用。有关详细信息，请参阅<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-517B4271-BF48-45C3-B989-88EE40CF780A">SDO_GEOR_AGGR.validateForMosaicSubset</a>参考部分。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>获取虚拟马赛克的空间范围。例如：</span><div><pre class="oac_no_warn" dir="ltr">从双重中选择SDO_GEOR_AGGR.getMosaicExtent（'grview'，'grobj'，OUTSRID）;</pre></div>
                        </li>
                        <li class="stepexpand"><span>获取现有源图像的分辨率范围。例如：</span><div><pre class="oac_no_warn" dir="ltr">从双重中选择SDO_GEOR_AGGR.getMosaicResolutions（'grview'，'grobj'，'unit = meter'）;</pre><p>分辨率范围反映了源图像的最小和最大分辨率，包括所有金字塔等级。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>基于前两个步骤中获取的信息，根据应用程序请求传入空间查询窗口<code class="codeph">cropArea</code>和<code class="codeph">OUTResolutions</code> ，以获取虚拟马赛克的子集，并可选地应用不同的重采样方法，不同的公共点规则，特殊的节点处理，和色彩平衡。例如：</span><div><pre class="oac_no_warn" dir="ltr">SDO_GEOR_AGGR.getMosaicSubset（'grview'，'grobj'，null，OUTSRID，null，null，cropArea，null，null，null，OUTResolutions，null，'commonPointRule = end，nodata = true'，lb，outArea，outWin）;</pre><p>请注意， <code class="codeph">OUTResolutions</code>必须在源图像分辨率范围内。如果<code class="codeph">OUTResolutions</code>与指定金字塔等级的源图像的分辨率相同，则在输出镶嵌中使用金字塔数据;否则，源图像缩放到目标分辨率。
                              </p>
                              <p>典型的应用程序重复应用该步骤以在相同的虚拟马赛克上查询感兴趣的不同区域以用于图像显示，图像分发或其他目的。</p>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-16C91449-1E94-4B3F-9403-EEFE483251AD" title="虚拟马赛克将一组GeoRaster图像视为一个大的几乎镶嵌图像。">虚拟马赛克</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="GEORS1376"></a><div class="props_rev_3"><a id="GUID-F59FD2B5-6E1A-4998-BF3A-2BCE3EE7F49D" name="GUID-F59FD2B5-6E1A-4998-BF3A-2BCE3EE7F49D"></a><h4 id="GEORS-GUID-F59FD2B5-6E1A-4998-BF3A-2BCE3EE7F49D" class="sect4"><span class="enumeration_section">6.18.5</span>大规模虚拟马赛克的特殊考虑</h4>
                  <div>
                     <p>虚拟马赛克只能包含多个图像，但它也可以包含数万或数百万个图像。<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a>和<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset都会</a>自动搜索（使用本机空间索引）所有触摸或在<code class="codeph">cropArea</code>内部的图像的虚拟马赛克，并检查这些图像及其金字塔的分辨率。只有那些图像或其相应的金字塔等级接触或在<code class="codeph">cropArea</code>内，并且其分辨率接近所请求的分辨率将用于镶嵌过程。因此，源图像及其金字塔的配置对于结果的质量和整体查询性能至关重要。
                     </p>
                     <p>该指南旨在以所要求的分辨率避免在所请求的作物区域中来自不同源图像或其金字塔的太多小图像。</p>
                     <p>对于只有少量图像的较小虚拟马赛克，只需为每个源图像生成完整的金字塔，查询性能对大多数应用程序都有好处。</p>
                     <p>对于具有大量图像（超过几百个图像）的大区域，应用程序可以为每个源图像仅生成一定数量的金字塔等级，将其顶部金字塔镶嵌到新的GeoRaster对象中，然后为这些对象生成金字塔马赛克等等。对于大规模Web可视化项目，源分辨率和较低分辨率级别的所有图像可能存储为GeoRaster对象，而不会为其构建任何金字塔。</p>
                     <p>在这些情况下（大量图像和大规模网络可视化），如果每个源图像很小并且虚拟马赛克中存在许多分辨率级别，则对较低分辨率级别的查询将涉及对许多不必要图像的元数据解析查询。更高的分辨率级别，这会降低查询速度。为了提高性能，应用程序可以定义许多虚拟马赛克，每个虚拟马赛克仅包括特定分辨率或几个分辨率级别的所有图像。然后，应用程序根据请求的分辨率找到正确的虚拟马赛克或马赛克作为第一步，然后仅在空间上查询这些选定的虚拟马赛克。这种方法可以显着提高性能。</p>
                     <p>除了上述注意事项之外，请参阅<a href="image-processing-virtual-mosaic.html#GUID-0926A2AC-B835-470D-9D73-B63F745CDA7B">使用MIN_X_RES $和MAX_X_RES $提高查询性能，</a>以查询同一区域涉及许多不同分辨率级别的查询。
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="image-processing-virtual-mosaic.html#GUID-0926A2AC-B835-470D-9D73-B63F745CDA7B">使用MIN_X_RES $和MAX_X_RES $提高查询性能</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-16C91449-1E94-4B3F-9403-EEFE483251AD" title="虚拟马赛克将一组GeoRaster图像视为一个大的几乎镶嵌图像。">虚拟马赛克</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="GEORS1377"></a><div class="props_rev_3"><a id="GUID-0926A2AC-B835-470D-9D73-B63F745CDA7B" name="GUID-0926A2AC-B835-470D-9D73-B63F745CDA7B"></a><h5 id="GEORS-GUID-0926A2AC-B835-470D-9D73-B63F745CDA7B" class="sect5"><span class="enumeration_section">6.18.5.1</span>使用MIN_X_RES $和MAX_X_RES $提高查询性能</h5>
                     <div>
                        <div class="section">
                           <p>如果同一区域涉及许多不同的分辨率级别，则可以使用更通用的解决方案（而不是定义多个虚拟马赛克）来加速虚拟马赛克查询，即使用GeoRaster表或视图中的MIN_X_RES $和MAX_X_RES $列。您必须在虚拟马赛克的GeoRaster表中定义这些列（NUMBER数据类型），其中它们分别指定源GeoRaster对象的最小和最大空间分辨率值。添加这些列并使用正确的分辨率数据填充后， <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a>过程将（如果使用带有<code class="codeph">georasterTableNames</code>参数的格式）使用存储在这些列中的分辨率范围来过滤掉未请求的源GeoRaster对象<code class="codeph">outResolutions</code>参数中指定的<code class="codeph">outResolutions</code> 。这样可以避免解析<code class="codeph">cropArea</code>中每个GeoRaster对象的元数据，从而显着提高性能。
                           </p>
                           <p>要使用此方法，请按照下列步骤操作：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>将MIN_X_RES $和MAX_X_RES $列添加到GeoRaster表中。例如：</span><div><pre class="oac_no_warn" dir="ltr">ALTER TABLE georaster_table ADD（MIN_X_RES $ number，MAX_X_RES $ number）;</pre></div>
                           </li>
                           <li class="stepexpand"><span>填充MIN_X_RES $列。例如：</span><div><pre class="oac_no_warn" dir="ltr">更新georaster_table t SET min_x_res $ =（从（从两个中选择sdo_geor.generateSpatialResolutions（t.georaster，null，t.georaster.spatialextent.sdo_srid）中选择column_value）WHERE rownum = 1）;</pre></div>
                           </li>
                           <li class="stepexpand"><span>填充MAX_X_RES $列。例如：</span><div><pre class="oac_no_warn" dir="ltr">更新georaster_table t max_x_res $ = min_x_res $ * power（2，sdo_geor.getPyramidMaxLevel（t.georaster））;</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>如果将虚拟马赛克定义为视图，则视图也应具有两列。例如， <a href="image-processing-virtual-mosaic.html#GUID-BA5D3A32-A095-4A3D-9A1F-364D7248CDD3__CHDGIHDD">示例6-26中</a>的视图定义必须更改为以下内容：</p><pre class="oac_no_warn" dir="ltr">创建或替换视图grview作为select * from（选择grobj， <span class="bold">min_x_res $，max_x_res $，</span> last_update来自grtab1，其中cloud_cover = 0 union all选择grobj， <span class="bold">min_x_res $，max_x_res $，</span> last_update来自grtab2，其中cloud_cover = 0 union all选择grobj， <span class="bold">min_x_res $，max_x_res $，</span>来自grtab3的last_update）by last_update;</pre><p>在按照本节中的描述定义虚拟马赛克之后，应用程序可以以与所有其他虚拟马赛克相同的方式查询和使用它，但是对于涉及许多分辨率级别的大规模虚拟马赛克具有更好的性能。有关更多信息，请参阅<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a>和<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>参考部分。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-F59FD2B5-6E1A-4998-BF3A-2BCE3EE7F49D">大规模虚拟马赛克的特殊注意事项</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="GEORS1362"></a><div class="props_rev_3"><a id="GUID-639C081E-8E7F-4467-8B89-3363810F561F" name="GUID-639C081E-8E7F-4467-8B89-3363810F561F"></a><h3 id="GEORS-GUID-639C081E-8E7F-4467-8B89-3363810F561F" class="sect3"><span class="enumeration_section">6.19</span>图像服务</h3>
               <div>
                  <p>通过GeoRaster PL / SQL和Java API的许多功能支持向客户端或应用程序提供图像和栅格数据。</p>
                  <p>直接图像服务包括搜索然后对光栅进行子集化或裁剪（ <a href="SDO_GEOR-reference.html#GUID-CC66F0CA-96A9-4C4F-AB94-AEB5FE53C83D">SDO_GEOR.getRasterSubset</a> ），在裁剪图像时动态应用重投影和校正（ <a href="SDO_GEOR-reference.html#GUID-9B3FA7F4-E6CA-4FDB-9DF9-EFEC63C19A55">SDO_GEOR.reproject</a>和<a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a> ），并直接导出到文件（ <a href="SDO_GEOR-reference.html#GUID-6261233E-5E90-479C-97FD-8125C28EC838">SDO_GEOR.exportTo）</a> ）。
                  </p>
                  <p>虚拟马赛克主要用于向各种应用程序提供图像数据库，尤其是当您不想创建大型物理马赛克时。虚拟马赛克不需要预先对源图像进行预处理或镶嵌。相反，所有图像都按原样存储，并且可以使用对服务器的单个调用（ <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a> ）基于感兴趣的小区域来提供整个图像数据集。
                  </p>
                  <p>通常，将一个或一系列预处理操作应用于多个GeoRaster对象以创建生成的GeoRaster对象，然后在生成的GeoRaster对象上使用本节中描述的功能将栅格数据直接提供给应用程序。因此，可以将丰富的GeoRaster图像处理和栅格代数功能（在<a href="georaster-data-manipulation.html#GUID-C56DB84D-5F94-432A-A9BB-E31CF4D1B7AA" title="本章介绍如何执行几个重要的GeoRaster数据查询和操作操作。">GeoRaster数据查询和操作</a> ， <a href="raster-algebra-and-analytics.html#GUID-C75744C9-FA04-4391-96F2-59EF2EA212FF" title="本章介绍了栅格代数语言（PL / SQL和代数表达式）和相关的栅格操作，包括条件查询，基于单元格的更新或编辑，数学运算，分类，动态统计分析，逻辑运算及其制图建模中的应用。">栅格代数和分析</a>以及本章中描述）集成到工作流程中，以满足复杂的图像服务要求。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
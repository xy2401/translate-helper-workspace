<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter provides an overview of Oracle Spatial and Graph support for property graph features."></meta>
      <meta name="description" content="This chapter provides an overview of Oracle Spatial and Graph support for property graph features."></meta>
      <title>空间和图形属性图支持概述</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Property Graph Developer’s Guide"></meta>
      <meta property="og:description" content="This chapter provides an overview of Oracle Spatial and Graph support for property graph features."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Property Graph Developer’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="spatial-and-graph-property-graph-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-10T15:23:57-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2016, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E94800-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="changes-in-this-release.html" title="Previous" type="text/html"></link>
      <link rel="next" href="using-property-graphs-oracle-database.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Spatial and Graph Property Graph Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="SPGDG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="changes-in-this-release.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="using-property-graphs-oracle-database.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Property Graph开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">空间和图形属性图支持概述</li>
            </ol>
            <a id="GUID-CCF6BB1E-3C8F-4746-A938-BA3E6EDC9541" name="GUID-CCF6BB1E-3C8F-4746-A938-BA3E6EDC9541"></a><a id="BDSPA109"></a><a id="BDSPA108"></a>
            
            <h2 id="SPGDG-GUID-CCF6BB1E-3C8F-4746-A938-BA3E6EDC9541" class="sect2"><span class="enumeration_chapter">1</span>空间和图形属性图支持概述</h2>
         </header>
         <div class="ind">
            <div>
               <div><span>本章概述了Oracle Spatial和Graph对属性图功能的支持。</span></div>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="property-graph-overview-spgdg.html#GUID-24F531CA-9B4F-42A4-99A3-0121DA5421BB">关于Property Graph支持</a><br>Oracle Spatial and Graph在Oracle数据库中提供高级空间和图形分析功能。
                  </li>
                  <li class="ulchildlink"><a href="property-graph-overview-spgdg.html#GUID-FF149F69-574D-43B8-B888-4CCD019DAE56">属性图先决条件</a><br>虽然不需要特殊的配置操作，但使用属性图功能的要求如下。
                  </li>
                  <li class="ulchildlink"><a href="property-graph-overview-spgdg.html#GUID-2CC5C368-685A-4E99-A37E-A40DF213C339">属性图功能</a><br>图形管理链接数据的网络，作为顶点和边的顶点，边和属性。
                  </li>
                  <li class="ulchildlink"><a href="property-graph-overview-spgdg.html#GUID-0611C729-C1D6-441C-A477-5A02F2D65527">属性图中的空间支持</a><br>Oracle Spatial and Graph选项中的属性图支持与空间支持集成在一起。
                  </li>
               </ul>
            </div>
            
            <div class="props_rev_3"><a id="GUID-24F531CA-9B4F-42A4-99A3-0121DA5421BB" name="GUID-24F531CA-9B4F-42A4-99A3-0121DA5421BB"></a><h3 id="SPGDG-GUID-24F531CA-9B4F-42A4-99A3-0121DA5421BB" class="sect3"><span class="enumeration_section">1.1</span>关于Property Graph支持</h3>
               <div>
                  <p>Oracle Spatial and Graph在Oracle数据库中提供高级空间和图形分析功能。</p>
                  <p>属性图具有支持图形操作，索引，查询，搜索和内存分析功能。</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="property-graph-overview-spgdg.html#GUID-CCF6BB1E-3C8F-4746-A938-BA3E6EDC9541" title="本章概述了Oracle Spatial和Graph对属性图功能的支持。">空间和图形属性图支持概述</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-FF149F69-574D-43B8-B888-4CCD019DAE56" name="GUID-FF149F69-574D-43B8-B888-4CCD019DAE56"></a><h3 id="SPGDG-GUID-FF149F69-574D-43B8-B888-4CCD019DAE56" class="sect3"><span class="enumeration_section">1.2</span>属性图先决条件</h3>
               <div>
                  <p>虽然不需要特殊的配置操作，但使用属性图功能的要求如下。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>必须安装Oracle Spatial and Graph。</p>
                     </li>
                     <li>
                        <p>必须<code class="codeph">enabled</code> <code class="codeph">max_string_size</code> ，</p>
                     </li>
                     <li>
                        <p>必须将<code class="codeph">AL16UTF16</code> （而不是<code class="codeph">UTF8</code> ）指定为NLS_NCHAR_CHARACTERSET。</p>
                        <p><code class="codeph">AL32UTF8 (UTF8)</code>应该是默认字符集，但<code class="codeph">AL16UTF16</code>必须是NLS_NCHAR_CHARACTERSET。</p>
                     </li>
                     <li>
                        <p>必须安装Java 8或更高版本。</p>
                        <p>但是，不需要单独安装，因为JDK 8安装在$ ORACLE_HOME下。只需确保使用正确版本的Java来运行基于属性图的应用程序。</p>
                     </li>
                     <li>
                        <p>如果使用属性图架构，如<a href="using-property-graphs-oracle-database.html#GUID-728A5FBC-998C-4675-9C0A-31C9195B737D" title="属性图PL / SQL和Java API使用特殊的Oracle数据库模式对象。">Oracle数据库的属性图架构对象中</a>所述，则需要Oracle分区许可证。请注意，如果按照使用双表模式<a href="using-property-graphs-oracle-database.html#GUID-7A2037E1-2DB7-40A2-AA37-0A91D0E34D00" title="对于具有相对固定，简单数据结构的属性图，您不需要灵活的&lt;graph_name&gt; VT $和&lt;graph_name&gt; GE $键/值数据表的顶点和边，您可以使用两表模式来实现更好的运行时性能。">处理属性图中所述使用双表模式</a> ，则Oracle分区是可选的。
                        </p>
                     </li>
                     <li>
                        <p>如果使用SolrCloud进行文本索引，则必须单独下载SolrCloud并手动配置。</p>
                        <p>有关使用SolrCloud和其他搜索引擎<a href="using-property-graphs-oracle-database.html#GUID-72E0D670-D477-4C0F-914C-8E70E45F9692" title="Indexes in Oracle Spatial and Graph property graph support allow fast retrieval of elements by a particular key/value or key/text pair. These indexes are created based on an element type (vertices or edges), a set of keys (and values), and an index type.">管理的文本索引的信息</a> ，请参阅<a href="using-property-graphs-oracle-database.html#GUID-72E0D670-D477-4C0F-914C-8E70E45F9692" title="Oracle Spatial and Graph属性图支持中的索引允许通过特定键/值或键/文本对快速检索元素。这些索引是基于元素类型（顶点或边），一组键（和值）和索引类型创建的。">管理属性图数据的文本索引</a> 。
                        </p>
                        <p>有关下载和使用Apache Solr的信息， <a href="https://lucene.apache.org/solr/guide/" target="_blank">请访问https://lucene.apache.org/solr/guide/</a> 。</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="property-graph-overview-spgdg.html#GUID-CCF6BB1E-3C8F-4746-A938-BA3E6EDC9541" title="本章概述了Oracle Spatial和Graph对属性图功能的支持。">空间和图形属性图支持概述</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-2CC5C368-685A-4E99-A37E-A40DF213C339" name="GUID-2CC5C368-685A-4E99-A37E-A40DF213C339"></a><h3 id="SPGDG-GUID-2CC5C368-685A-4E99-A37E-A40DF213C339" class="sect3"><span class="enumeration_section">1.3</span>属性图特征</h3>
               <div>
                  <p>图形管理链接数据的网络，作为顶点和边的顶点，边和属性。</p>
                  <p>图形通常用于建模，存储和分析社交网络，网络安全，公用事业和电信，生命科学和临床数据以及知识网络中的关系。</p>
                  <p>典型的图形分析包括图形遍历，建议，查找社区和影响因素以及模式匹配。包括电信，生命科学和医疗保健，安全，媒体和出版在内的行业可以从图表中受益。</p>
                  <p>Oracle Special和Graph的属性图功能支持具有以下功能的用例：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>可伸缩的图形数据库</p>
                     </li>
                     <li>
                        <p>基于开发人员的API，基于Tinkerpop蓝图和Java图形API</p>
                     </li>
                     <li>
                        <p>通过与Apache Lucene，SolrCloud和Oracle Text集成进行文本搜索和查询</p>
                     </li>
                     <li>
                        <p>脚本语言支持Groovy和Python</p>
                     </li>
                     <li>
                        <p>并行的内存中图形分析引擎</p>
                     </li>
                     <li>
                        <p>一套快速，可扩展的社交网络分析功能，包括排名，中心，推荐，社区检测，路径查找</p>
                     </li>
                     <li>
                        <p>以Oracle定义的平面文件格式并行批量加载和导出属性图数据</p>
                     </li>
                     <li>
                        <p>通过基于Groovy的控制台实现Java和Tinkerpop Gremlin API的可管理性</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="property-graph-overview-spgdg.html#GUID-BED893F6-A786-4FAF-AABE-10617FB466F0">属性图调整建议</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="property-graph-overview-spgdg.html#GUID-CCF6BB1E-3C8F-4746-A938-BA3E6EDC9541" title="本章概述了Oracle Spatial和Graph对属性图功能的支持。">空间和图形属性图支持概述</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-BED893F6-A786-4FAF-AABE-10617FB466F0" name="GUID-BED893F6-A786-4FAF-AABE-10617FB466F0"></a><h4 id="SPGDG-GUID-BED893F6-A786-4FAF-AABE-10617FB466F0" class="sect4"><span class="enumeration_section">1.3.1</span>属性图大小建议</h4>
                  <div>
                     <p>以下是属性图安装的建议。</p>
                     <div class="tblformal" id="GUID-BED893F6-A786-4FAF-AABE-10617FB466F0__PROPERTYGRAPHSIZINGRECOMMENDATIONS-10BEDBA7">
                        <p class="titleintable">表1-1属性图大小建议</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="属性图调整建议" width="100%" border="1" summary="Property graph sizing recommendations. Column 1 is Graph Size, column 2 is recommended physical memory to be dedicated, column 3 is recommended number of CPU processors." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="19%" id="d3250e422">图表大小</th>
                                 <th align="left" valign="bottom" width="37%" id="d3250e425">推荐的物理内存专用</th>
                                 <th align="left" valign="bottom" width="44%" id="d3250e428">推荐的CPU处理器数量</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d3250e433" headers="d3250e422 ">
                                    <p>10到100M的边缘</p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d3250e433 d3250e425 ">
                                    <p>最高14 GB RAM</p>
                                 </td>
                                 <td align="left" valign="top" width="44%" headers="d3250e433 d3250e428 ">
                                    <p>2到4个处理器，最多16个处理器，用于更多计算密集型工作负载</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d3250e443" headers="d3250e422 ">
                                    <p>100M到1B边缘</p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d3250e443 d3250e425 ">
                                    <p>14 GB到100 GB RAM</p>
                                 </td>
                                 <td align="left" valign="top" width="44%" headers="d3250e443 d3250e428 ">
                                    <p>4到12个处理器，最多16到32个处理器，用于更多计算密集型工作负载</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d3250e453" headers="d3250e422 ">
                                    <p>超过1B边缘</p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d3250e453 d3250e425 ">
                                    <p>超过100 GB的RAM</p>
                                 </td>
                                 <td align="left" valign="top" width="44%" headers="d3250e453 d3250e428 ">
                                    <p>12到32个处理器，或更多，特别是计算密集型工作负载</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="property-graph-overview-spgdg.html#GUID-2CC5C368-685A-4E99-A37E-A40DF213C339" title="图形管理链接数据的网络，作为顶点和边的顶点，边和属性。">属性图功能</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-0611C729-C1D6-441C-A477-5A02F2D65527" name="GUID-0611C729-C1D6-441C-A477-5A02F2D65527"></a><h3 id="SPGDG-GUID-0611C729-C1D6-441C-A477-5A02F2D65527" class="sect3"><span class="enumeration_section">1.4</span>属性图中的空间支持</h3>
               <div>
                  <p>Oracle Spatial and Graph选项中的属性图支持与空间支持集成在一起。</p>
                  <p>集成具有以下方面：在属性Graph中表示空间数据，在该空间数据上创建空间索引，以及查询该空间数据。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="property-graph-overview-spgdg.html#GUID-5411672D-89D0-4829-AEB6-25232A12E897">在属性图中表示空间数据</a><br></li>
                     <li class="ulchildlink"><a href="property-graph-overview-spgdg.html#GUID-343F4472-EE93-40C7-A78A-1C8B96D9B47A">在属性图数据上创建空间索引</a><br></li>
                     <li class="ulchildlink"><a href="property-graph-overview-spgdg.html#GUID-00843648-F8C3-40B2-885E-A58B36092240">查询属性图中的空间数据</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="property-graph-overview-spgdg.html#GUID-CCF6BB1E-3C8F-4746-A938-BA3E6EDC9541" title="本章概述了Oracle Spatial和Graph对属性图功能的支持。">空间和图形属性图支持概述</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-5411672D-89D0-4829-AEB6-25232A12E897" name="GUID-5411672D-89D0-4829-AEB6-25232A12E897"></a><h4 id="SPGDG-GUID-5411672D-89D0-4829-AEB6-25232A12E897" class="sect4"><span class="enumeration_section">1.4.1</span>在属性图中表示空间数据</h4>
                  <div>
                     <p>空间数据可用作顶点属性和边缘属性的值。</p>
                     <p>例如，实体可以将点（经度/纬度）作为名为<span class="italic">location</span>的属性的值。作为另一示例，边可以具有多边形作为属性的值，并且该属性可以表示建立该链接（关系）的位置。
                     </p>
                     <p>以下显示了在属性图中编码空间数据的一些示例语法。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>点： <code class="codeph">'-122.230 37.560'</code></p>
                        </li>
                        <li>
                           <p>点： <code class="codeph">'POINT(-122.241 37.567)'</code></p>
                        </li>
                        <li>
                           <p>指定SRID的点： <code class="codeph">'srid/8307 POINT(-122.246 37.572)'</code></p>
                        </li>
                        <li>
                           <p>多边形：' <code class="codeph">POLYGON((-83.6 34.1, -83.6 34.3, -83.4 34.3, -83.4 34.1, -83.6 34.1))'</code></p>
                        </li>
                        <li>
                           <p>指定了SRID的多边形： <code class="codeph">'srid/8307 POLYGON((-83.6 34.1, -83.6 34.3, -83.4 34.3, -83.4 34.1, -83.6 34.1))'</code></p>
                        </li>
                        <li>
                           <p>线串： <code class="codeph">'LINESTRING (30 10, 10 30, 40 40)'</code></p>
                        </li>
                        <li>
                           <p>多行字符串： <code class="codeph">'MULTILINESTRING ((10 10, 20 20, 10 40), (40 40, 30 30, 40 20, 30 10))'</code></p>
                        </li>
                     </ul>
                     <p>假设一个名为<code class="codeph">test</code>的测试属性图。以下语句添加一组顶点，每个顶点的坐标（经度和纬度）均为空间。
                     </p><pre class="pre codeblock"><code>插入testVT $（vid，k，t，v）值（100，'geoloc'，20，' -  122.230 37.560'）;插入testVT $（vid，k，t，v）值（101，'geoloc'，20，' -  122.231 37.561'）;插入testVT $（vid，k，t，v）值（102，'geoloc'，20，' -  122.236 37.562914'）;插入testVT $（vid，k，t，v）值（103，'geoloc'，20，' -  122.241 37.567'）;插入testVT $（vid，k，t，v）值（104，'geoloc'，20，' -  122.246 37.572'）;插入testVT $（vid，k，t，v）值（105，'geoloc'，20，' -  122.251 37.577'）;插入testVT $（vid，k，t，v）值（200，'geoloc'，20，' -  122.256 37.582'）;插入testVT $（vid，k，t，v）值（201，'geoloc'，20，' -  122.261 37.587'）;</code></pre><p>属性图中的空间数据可用于构造SDO_GEOMETRY对象。例如， <a href="OPG_APIS-reference.html#GUID-0150DE12-7AAF-4973-B204-90D73FECF157">OPG_APIS.GET_GEOMETRY_FROM_V_T_COLS</a>函数可用于从V列读取指定值（例如20）的所有T的空间数据，并返回SDO_GEOMETRY对象。如果值看起来是两个数字，则此函数尝试将值解析为坐标，如果值不是简单点，则它使用SDO_GEOMETRY构造函数。最后，如果提供了SRID，它将使用SDO_CS_TRANSFORM过程使用给定的坐标系进行变换。
                     </p>
                     <p>以下示例使用<a href="OPG_APIS-reference.html#GUID-0150DE12-7AAF-4973-B204-90D73FECF157">OPG_APIS.GET_GEOMETRY_FROM_V_T_COLS</a>函数从<code class="codeph">test</code>属性图中获取几何。它包括一些输出。
                     </p><pre class="pre codeblock"><code>SQL&gt; select vid，k， <span class="bold">opg_apis.get_geometry_from_v_t_cols</span> from testVT $ order by vid，k; 。 。 。100 geoloc SDO_GEOMETRY（2001,8307，SDO_POINT_TYPE（-122.23,37.56，NULL），NULL，NULL）101 geoloc SDO_GEOMETRY（2001,8307，SDO_POINT_TYPE（-122.231,37.561，NULL），NULL，NULL）102 geoloc SDO_GEOMETRY（2001， 8307，SDO_POINT_TYPE（-122.236,37.562914，NULL），NULL，NULL）103 geoloc SDO_GEOMETRY（2001,8307，SDO_POINT_TYPE（-122.241,37.567，NULL），NULL，NULL）。 。 。
</code></pre><p>您可以从WKT文字生成SDO_GEOMETRY对象。以下示例插入WKT文字，然后使用<a href="OPG_APIS-reference.html#GUID-B24DF56A-18BB-4D6E-B325-BBA173CC359B">OPG_APIS.GET_WKTGEOMETRY_FROM_V_T_COLS</a>函数从V，T列构造SDO_GEOMETRY对象。
                     </p><pre class="pre codeblock"><code>截断表testGE $;截断表testVT $;插入testVT $（vid，k，t，v）值（101，'geoloc'，20，'POLYGON（（ -  83.6 34.1，-83.6 34.3，-83.4 34.3，-83.4 34.1，-83.6 34.1））'） ;插入testVT $（vid，k，t，v）值（103，'geoloc'，20，'POINT（-122.241 37.567）'）;插入testVT $（vid，k，t，v）值（105，'geoloc'，20，'POINT（-122.251 37.577）'）;插入testVT $（vid，k，t，v）值（200，'geoloc'，20，'MULTILINESTRING（（10 10,20 20,10 40），（40 40,30 30,40 20,30 10） ）'）;插入testVT $（vid，k，t，v）值（201，'geoloc'，20，'LINESTRING（30 10,10 30,40 40）'）;提示显示几何信息SQL&gt; select vid，k， <span class="bold">opg_apis.get_wktgeometry_from_v_t_cols（v，t）</span>来自testVT $ order by vid，k; 。 。 。101 geoloc SDO_GEOMETRY（2003,8307，NULL，SDO_ELEM_INFO_ARRAY（1,1003,1），SDO_ORDINATE_ARRAY（-83.6,34.1，-83.6,34.3，-83.4,34.3，-83.4,34.1，-83.6,34.1））103 geoloc SDO_GEOMETRY （2001,8307，SDO_POINT_TYPE（-122.241,37.567，NULL），NULL，NULL）105 geoloc SDO_GEOMETRY（2001,8307，SDO_POINT_TYPE（-122.251,37.577，NULL），NULL，NULL）200 geoloc SDO_GEOMETRY（2006,8307，NULL ，SDO_ELEM_INFO_ARRAY（1,2,1,7,2,1），SDO_ORDINATE_ARRAY（10,10,20,20,10,40,40,30,30,30,40,30,10））201 geoloc SDO_GEOMETRY （2002,8307，NULL，SDO_ELEM_INFO_ARRAY（1,2,1），SDO_ORDINATE_ARRAY（30,10,10,30,40,40））</code></pre></div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="property-graph-overview-spgdg.html#GUID-0611C729-C1D6-441C-A477-5A02F2D65527" title="Oracle Spatial and Graph选项中的属性图支持与空间支持集成在一起。">属性图中的空间支持</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-343F4472-EE93-40C7-A78A-1C8B96D9B47A" name="GUID-343F4472-EE93-40C7-A78A-1C8B96D9B47A"></a><h4 id="SPGDG-GUID-343F4472-EE93-40C7-A78A-1C8B96D9B47A" class="sect4"><span class="enumeration_section">1.4.2</span>在属性图数据上创建空间索引</h4>
                  <div>
                     <p>将空间数据添加到属性图后，可以使用OPG_APIS包子程序构造SDO_GEOMETRY对象，然后可以在顶点（VT $）或边（VT $）表上创建基于函数的空间索引。</p>
                     <p>使用名为<code class="codeph">test</code>的示例属性图，以下语句添加必要的元数据并创建基于函数的空间索引。
                     </p><pre class="pre codeblock"><code>SQL&gt;  - 在拥有属性图TEST的模式中：SQL&gt;  -  SQL&gt;插入user_sdo_geom_metadata values（'TESTVT $'，'mdsys.opg_apis.get_geometry_from_v_t_cols（v，t）'，sdo_dim_array（sdo_dim_element（'Longitude'） ，-180,180,0.005），sdo_dim_element（'纬度'， -  90,90,0.005）），8307）;承诺; SQL&gt;  - 在testVT上创建一个基于函数的空间索引SQL&gt; create index testVTXGEO $（mdsys.opg_apis.get_geometry_from_v_t_cols（v，t））indextype是mdsys.spatial_index_v2参数（'tablespace = USERS'）parallel 4 local;</code></pre><p>（要在您自己的属性图上创建空间索引，请将图名称<code class="codeph">test</code>替换为图表的名称。）
                     </p>
                     <p>如果在V列中使用WKT文字，则将<span class="italic">mdsys.opg_apis.get_ <span class="bold">geometry</span> _from_v_t_cols</span>替换为前两个SQL语句中的<span class="italic">mdsys.opg_apis.get_ <span class="bold">wktgeometry</span> _from_v_t_cols</span> 。
                     </p>
                     <p>请注意，前面的SQL空间索引创建步骤包含在<code class="codeph">oracle.pg.rdbms</code>包中定义的<code class="codeph">OraclePropertyGraph</code>类中的方便Java方法中：</p><pre class="oac_no_warn" dir="ltr">/ ** *此API在<span class="bold">边上</span>创建默认的空间索引。它假定*将使用* mdsys.opg_apis.get_geometry_from_v_t_cols（v，t）PL / SQL来创建基于函数的Spatial索引。此外，它还在user_sdo_geom_metadata中添加了预定义的*值。要进行自定义，请参阅dev *指南，向user_sdo_geom_metadata添加行，然后手动创建* Spatial索引。*请注意，将执行DDL，因此需要进行隐含提交。如果您有不希望保留的更改，请在调用*此方法之前运行回滚。* @param dop of degreeism用于创建Spatial索引* / public void createDefaultSpatialIndexOn <span class="bold">Edges</span> （int dop）; / ** *此API在<span class="bold">顶点</span>上创建默认的空间索引。它假定*将使用* mdsys.opg_apis.get_geometry_from_v_t_cols（v，t）PL / SQL来创建基于函数的Spatial索引。此外，它还在user_sdo_geom_metadata中添加了预定义的*值。要进行自定义，请参阅dev *指南，向user_sdo_geom_metadata添加行，然后手动创建* Spatial索引。*请注意，将执行DDL，因此需要进行隐含提交。如果您有不希望保留的更改，请在调用*此方法之前运行回滚。* @param dop并行度用于创建Spatial索引* / public void createDefaultSpatialIndexOn <span class="bold">Vertices</span> （int dop）;</pre></div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="property-graph-overview-spgdg.html#GUID-0611C729-C1D6-441C-A477-5A02F2D65527" title="Oracle Spatial and Graph选项中的属性图支持与空间支持集成在一起。">属性图中的空间支持</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-00843648-F8C3-40B2-885E-A58B36092240" name="GUID-00843648-F8C3-40B2-885E-A58B36092240"></a><h4 id="SPGDG-GUID-00843648-F8C3-40B2-885E-A58B36092240" class="sect4"><span class="enumeration_section">1.4.3</span>查询属性图中的空间数据</h4>
                  <div>
                     <p>Oracle Spatial and Graph地理空间查询函数可以应用于属性图中的空间数据。本主题提供了一些示例。</p>
                     <p>请注意，基于空间信息的查询可以与导航和模式匹配相结合。</p>
                     <p>以下示例查找位置（点几何）的指定距离（此处为1英里）内的实体（顶点）。</p><pre class="pre codeblock"><code>SQL&gt;  - 使用SDO_WITHIN_DISTANCE过滤顶点SQL&gt;从testvt $中选择vid，k，t，v其中sdo_within_distance（mdsys.opg_apis.get_geometry_from_v_t_cols（v，t），mdsys.sdo_geometry（2001,8307，mdsys.sdo_point_type（-122.23） ，37.56，null），null，null），'distance = 1 unit = mile'）='TRUE'顺序由vid，k;</code></pre><p>输出和执行计划可包括以下内容。请注意，在执行中使用了新创建的域indexTESTVTXGEO $。</p><pre class="oac_no_warn" dir="ltr">100 geoloc 20 -122.230 37.560 101 geoloc 20 -122.231 37.561 ...... ......-------------------------------------------------- -------------------------------------------------- ------------------------------------------------ | Id |操作|名称|行|字节|成本（％CPU）|时间| Pstart时| Pstop | TQ | IN-OUT | PQ Distrib | -------------------------------------------------- -------------------------------------------------- ------------------------------------------------ | 0 |选择声明| | 1 | 18176 | 2（50）| 00:00:01 | | | | | | | 1 | PX COORDINATOR | | | | | | | | | | | | 2 | PX SEND QC（订购）| ：TQ10001 | 1 | 18176 | 2（50）| 00:00:01 | | | Q1,01 | P-&gt; S | QC（订单）| | 3 |排序顺序| | 1 | 18176 | 2（50）| 00:00:01 | | | Q1,01 | PCWP | | | 4 | PX RECEIVE | | 1 | 18176 | 1（0）| 00:00:01 | | | Q1,01 | PCWP | | | 5 | PX SEND RANGE | ：TQ10000 | 1 | 18176 | 1（0）| 00:00:01 | | | Q1,00 | P-&gt; P |范围| | 6 | PX PARTITION HASH ALL | | 1 | 18176 | 1（0）| 00:00:01 | 1 | 8 | Q1,00 | PCWC | | | * 7 |通过LOCAL INDEX ROWID表的访问权限TESTVT $ | 1 | 18176 | 1（0）| 00:00:01 | 1 | 8 | Q1,00 | PCWP | | | * 8 | <span class="bold">DOMAIN INDEX</span> （SEL：0.000000％）| <span class="bold">TESTVTXGEO $</span> | | | 1（0）| 00:00:01 | | | Q1,00 | | | -------------------------------------------------- -------------------------------------------------- ------------------------------------------------谓词信息（由操作ID标识）：------------------------------------------- -------- 7  - 过滤器（INTERNAL_FUNCTION（“K”）和INTERNAL_FUNCTION（“V”））8  - 访问（“MDSYS”。“SDO_WITHIN_DISTANCE”（“OPG_APIS”。“GET_GEOMETRY_FROM_V_T_COLS”（“V”， “T”），“MDSYS”。“SDO_GEOMETRY”（2001,8307，“MDSYS”。“SDO_P OINT_TYPE”（（ -  122.23），37.56，NULL），NULL，NULL），'距离= 1单位=英里'） = 'TRUE'）</pre><p>以下示例根据实体（顶点）与位置的距离对实体（顶点）进行排序。</p><pre class="pre codeblock"><code>- 基于距离（英里）排序SQL&gt; select vid，dist from（select vid，k，t，v，sdo_geom.sdo_distance（mdsys.opg_apis.get_geometry_from_v_t_cols（v，t），mdsys.sdo_geometry（2001,8307，mdsys。 sdo_point_type（-122.23,37.56，null），null，null），1.0，'unit = mile'）dist from testvt $ where t = 20）order by dist asc;</code></pre><p>输出和执行计划可包括以下内容。</p><pre class="oac_no_warn" dir="ltr">...101 .088148935 102 .385863422 103 .773127682 104 1.2068052 105 1.64421947 200 2.08301065 ...-------------------------------------------------- --------------------------------------------- | Id |操作|名称|行|字节|成本（％CPU）|时间| Pstart时| Pstop | -------------------------------------------------- --------------------------------------------- | 0 |选择声明| | 1 | 15062 | 1366（1）| 00:00:01 | | | | 1 |排序顺序| | 1 | 15062 | 1366（1）| 00:00:01 | | | | 2 | PARTITION HASH ALL | | 1 | 15062 | 1365（1）| 00:00:01 | 1 | 8 | | * 3 |表访问完全| TESTVT $ | 1 | 15062 | 1365（1）| 00:00:01 | 1 | 8 | -------------------------------------------------- ---------------------------------------------谓词信息（由操作ID）：---------------------------------------------- ----- 3  - 过滤器（“T”= 20 AND INTERNAL_FUNCTION（“V”））</pre></div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="property-graph-overview-spgdg.html#GUID-0611C729-C1D6-441C-A477-5A02F2D65527" title="Oracle Spatial and Graph选项中的属性图支持与空间支持集成在一起。">属性图中的空间支持</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
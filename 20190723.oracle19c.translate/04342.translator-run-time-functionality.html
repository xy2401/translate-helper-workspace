<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>翻译和运行时功能</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQLJ Developer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQLJ Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sqlj-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T08:20:03-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96458-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="translator-command-line-and-options.html" title="Previous" type="text/html"></link>
      <link rel="next" href="performance-and-debugging.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQLJ Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="JSQLJ"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="translator-command-line-and-options.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="performance-and-debugging.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQLJ开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">翻译和运行时功能</li>
            </ol>
            <a id="GUID-19E43C02-712C-4CF7-BE74-C7A16665C1D2" name="GUID-19E43C02-712C-4CF7-BE74-C7A16665C1D2"></a><a id="JSQLJ700"></a>
            
            <h2 id="JSQLJ-GUID-19E43C02-712C-4CF7-BE74-C7A16665C1D2" class="sect2"><span class="enumeration_chapter">10</span>转换器和运行时功能</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章讨论Oracle SQLJ转换程序的内部操作和功能以及运行时。</p>
               <p>涵盖以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="translator-run-time-functionality.html#GUID-D48A9F0A-67FD-4B49-B219-7EC6FEE1F4E3">内部翻译操作</a></p>
                  </li>
                  <li>
                     <p><a href="translator-run-time-functionality.html#GUID-AEB9AFD5-5CE3-43AA-8883-A0A03D82A43D">译者错误的功能_消息_和退出代码</a></p>
                  </li>
                  <li>
                     <p><a href="translator-run-time-functionality.html#GUID-AFF5C519-028E-4554-98E8-B8FF103515D1">SQLJ运行时</a></p>
                  </li>
                  <li>
                     <p><a href="translator-run-time-functionality.html#GUID-50785BF7-712B-4BFC-BE22-0E86B626BBA6">翻译和运行时的全球化支持</a></p>
                  </li>
               </ul>
            </div><a id="JSQLJ701"></a><div class="props_rev_3"><a id="GUID-D48A9F0A-67FD-4B49-B219-7EC6FEE1F4E3" name="GUID-D48A9F0A-67FD-4B49-B219-7EC6FEE1F4E3"></a><h3 id="JSQLJ-GUID-D48A9F0A-67FD-4B49-B219-7EC6FEE1F4E3" class="sect3">内部翻译操作</h3>
               <div>
                  <p>以下主题总结了SQLJ翻译在翻译期间执行的操作：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="translator-run-time-functionality.html#GUID-87DB4A97-BF52-4059-A64C-665733D75B62">Java和SQLJ代码解析和语法检查</a></p>
                     </li>
                     <li>
                        <p><a href="translator-run-time-functionality.html#GUID-CD0DF951-697A-47E1-90B0-DAF8E2E58DB9">SQL语义 - 检查和脱机解析</a></p>
                     </li>
                     <li>
                        <p><a href="translator-run-time-functionality.html#GUID-930ED5CD-CB40-488E-94D9-509DEB9C2A8D">代码生成</a></p>
                     </li>
                     <li>
                        <p><a href="translator-run-time-functionality.html#GUID-9A0CD688-00C7-4DBB-9F76-1727E5C291C4">Java编译</a></p>
                     </li>
                     <li>
                        <p><a href="translator-run-time-functionality.html#GUID-1C3E2732-1185-4961-BA6B-5BA97A35EA48">配置文件定制（ISO代码生成）</a></p>
                     </li>
                  </ul>
               </div><a id="JSQLJ702"></a><div class="props_rev_3"><a id="GUID-87DB4A97-BF52-4059-A64C-665733D75B62" name="GUID-87DB4A97-BF52-4059-A64C-665733D75B62"></a><h4 id="JSQLJ-GUID-87DB4A97-BF52-4059-A64C-665733D75B62" class="sect4">Java和SQLJ代码解析和语法检查</h4>
                  <div>
                     <p>在SQLJ转换的第一阶段，SQLJ解析器和Java解析器用于处理所有源代码和检查语法。当SQLJ转换器解析<code class="codeph">.sqlj</code>文件时，它会调用Java解析器来检查Java语句的语法，并调用SQLJ解析器来检查SQLJ结构的语法（以<code class="codeph">#sql</code>任何<code class="codeph">#sql</code> ）。SQLJ解析器还调用Java解析器来检查SQLJ可执行语句中Java主机变量和表达式的语法。
                     </p>
                     <p>SQLJ解析器根据SQLJ语言规范检查SQLJ构造的语法。但是，它<span class="italic">不</span>检查嵌入的SQL操作的语法。在语义检查或脱机解析步骤之前，不会检查SQL语法。
                     </p>
                     <p>此语法检查将查找错误，例如缺少分号，大括号不匹配以及明显的类型不匹配，例如将数字乘以字符串。如果解析器在此阶段发现任何语法错误或类型不匹配，则中止转换并将错误报告给用户。</p>
                  </div>
               </div><a id="JSQLJ703"></a><div class="props_rev_3"><a id="GUID-CD0DF951-697A-47E1-90B0-DAF8E2E58DB9" name="GUID-CD0DF951-697A-47E1-90B0-DAF8E2E58DB9"></a><h4 id="JSQLJ-GUID-CD0DF951-697A-47E1-90B0-DAF8E2E58DB9" class="sect4">SQL语义 - 检查和脱机解析</h4>
                  <div>
                     <p>一旦SQLJ和Java应用程序源代码被验证为语法正确，翻译器就会进入语义检查阶段，并根据SQLJ选项设置调用SQL语义检查器或SQL脱机解析器或两者。</p>
                     <p>设置<code class="codeph">-user</code>选项启用在线检查，并设置<code class="codeph">-password</code>和<code class="codeph">-url</code>选项指定的数据库连接，如果没有指定的密码和网址<code class="codeph">-user</code>选项。<code class="codeph">-offline</code>或<code class="codeph">-online</code>选项指定要使用的检查程序。默认值（通常是足够的）是一个名为<code class="codeph">OracleChecker</code>的检查程序前端，它根据您是否启用了在线检查以及您正在使用的Java数据库连接（JDBC）驱动程序来选择最合适的检查程序。
                     </p>
                     <p><code class="codeph">-parse</code>选项（默认为<code class="codeph">true</code> ）用于启用脱机解析器，它提供了一种方法来验证SQL和PL / SQL语法（但不是针对数据库列的数据类型），而无需在转换期间进行数据库连接。请注意， <code class="codeph">-parse</code>选项的某些设置将覆盖<code class="codeph">-user</code>选项并禁用在线检查。
                     </p>
                     <div class="infoboxnotealso" id="GUID-CD0DF951-697A-47E1-90B0-DAF8E2E58DB9__GUID-5FF88CB8-0C4B-4BA8-9CC7-DBAF8CFC121A">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="translator-command-line-and-options.html#GUID-E001FA35-824A-47A1-8973-AA5771B0DFE5">连接选项</a> ”</span>和<span class="q">“ <a href="translator-command-line-and-options.html#GUID-ED7DD3DE-CA91-4085-82B2-D07EC9B15FB6">语义 - 检查和脱机 - 解析选项</a> ”</span></p>
                     </div>
                     <div class="infoboxnote" id="GUID-CD0DF951-697A-47E1-90B0-DAF8E2E58DB9__GUID-70A54398-B084-4FF9-8159-DB44AB09B003">
                        <p class="notep1">注意：</p>
                        <p>对于ISO代码生成，也可以在先前执行SQLJ转换器期间生成的配置文件上执行语义检查。请参阅<span class="q">“ <a href="appendix.html#GUID-B0B2AAD4-3AE2-43F1-A38E-37D48343C353">SQLCheckerCustomizer for Profile Semantics-Checking</a> ”</span> 。
                        </p>
                     </div>
                     <p>无论在线检查或离线解析的状态如何，在语义检查期间始终执行以下任务：</p>
                     <ol>
                        <li>
                           <p>SQLJ分析SQLJ可执行语句中的Java表达式类型。</p>
                           <p>这包括检查要翻译的SQLJ源文件，在命令行上输入的任何<code class="codeph">.java</code>文件，以及可以通过类路径找到其<code class="codeph">.class</code>文件或<code class="codeph">.java</code>文件的任何导入的Java类。SQLJ检查是否以及如何在<code class="codeph">SELECT</code>或<code class="codeph">CAST</code>语句中使用流类型，在迭代器列或<code class="codeph">INTO</code>列表中使用哪些Java类型，将哪些Java类型用作输入主机变量，以及将哪些Java类型用作输出主机变量。
                           </p>
                           <p>SQLJ还在语法上处理<code class="codeph">FETCH</code> ， <code class="codeph">CAST</code> ， <code class="codeph">CALL</code> ， <code class="codeph">SET TRANSACTION</code> ， <code class="codeph">VALUES</code>和<code class="codeph">SET</code>语句。
                           </p>
                           <p>SQLJ可执行语句中的任何Java表达式都必须具有对给定情况和用法有效的Java类型。例如，请考虑以下语句：</p><pre class="oac_no_warn" dir="ltr">#sql [myCtx] {更新...};</pre><p><code class="codeph">myCtx</code>变量（可能用于为此语句指定连接上下文实例或执行上下文实例）必须实际解析为SQLJ连接上下文类型或执行上下文类型。
                           </p>
                           <p>现在考虑以下示例：</p><pre class="oac_no_warn" dir="ltr">#sql {UPDATE employees SET salary =：newSal};</pre><p>如果<code class="codeph">newSal</code>是一个变量，而不是字段，那么如果<code class="codeph">newSal</code>没有声明<code class="codeph">newSal</code> ，则会生成错误。在任何情况下，如果无法将其分配给有效的Java类型或者无法在SQL语句中使用其Java类型（例如， <code class="codeph">java.util. ，则会生成错误<code class="codeph">java.util.Vector</code> ）。
                           </p>
                           <div class="infoboxnote" id="GUID-CD0DF951-697A-47E1-90B0-DAF8E2E58DB9__GUID-7F8B9E22-CBA0-4FD9-88F6-73D99DC5AE28">
                              <p class="notep1">注意：</p>
                              <p>仅对SQLJ可执行语句中的Java表达式执行Java类型的语义检查。在Java编译器编译之前， <span class="italic">不会</span>检测标准Java语句中的此类错误。
                              </p>
                           </div>
                        </li>
                        <li>
                           <p>SQLJ尝试对嵌入式SQL操作进行分类。每个操作都必须具有可识别的关键字，例如<code class="codeph">SELECT</code>或<code class="codeph">INSERT</code> ，以便SQLJ知道它是什么类型的操作。例如，以下语句将生成错误：</p><pre class="oac_no_warn" dir="ltr">#sql {foo};</pre></li>
                        <li>
                           <p>如果启用了在线检查或脱机解析（或两者），则SQLJ会分析并验证嵌入式SQL和PL / SQL操作的语法。</p>
                        </li>
                        <li>
                           <p>如果启用了在线检查或脱机解析（或两者），则SQLJ将根据数据库中相应列的SQL类型和相应参数的SQL类型检查SQLJ可执行语句中的Java表达式类型，并返回存储过程和函数的变量。</p>
                           <p>在执行此操作的过程中，SQLJ会验证SQLJ可执行语句中使用的SQL实体（例如表，视图和存储过程）是否实际存在于数据库中。SQLJ还检查其数据被选择到Java原始类型的迭代器列的数据库列的可空性，这些列不能处理空数据。但是，不检查存储过程和函数输出参数和返回值的可为空性。</p>
                        </li>
                     </ol>
                  </div>
               </div><a id="JSQLJ705"></a><a id="JSQLJ706"></a><a id="JSQLJ707"></a><a id="JSQLJ708"></a><a id="JSQLJ709"></a><a id="JSQLJ704"></a><div class="props_rev_3"><a id="GUID-930ED5CD-CB40-488E-94D9-509DEB9C2A8D" name="GUID-930ED5CD-CB40-488E-94D9-509DEB9C2A8D"></a><h4 id="JSQLJ-GUID-930ED5CD-CB40-488E-94D9-509DEB9C2A8D" class="sect4">代码生成</h4>
                  <div>
                     <div class="section">
                        <p>对于<code class="codeph">.sqlj</code>应用程序源文件，SQLJ转换器生成<code class="codeph">.java</code>文件，并且对于ISO标准SQLJ代码生成，至少生成一个配置文件（在<code class="codeph">.ser</code>或<code class="codeph">.class</code>文件中）。<code class="codeph">.java</code>包含已翻译的应用程序源代码，您声明的任何私有迭代器和连接上下文的类定义，以及ISO代码，SQLJ内部生成和使用的profile-keys类定义。</p>
                        <div class="infoboxnote" id="GUID-930ED5CD-CB40-488E-94D9-509DEB9C2A8D__GUID-F8D215D9-269A-41CE-BBF4-63606CE7AE80">
                           <p class="notep1">注意：</p>
                           <p>如果使用默认的Oracle特定代码生成模式，则不会生成任何profiles或profile-keys类。</p>
                           <p>使用ISO代码生成时，如果您不在代码中使用任何SQLJ可执行语句，则不会有profile或profile-keys类。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-930ED5CD-CB40-488E-94D9-509DEB9C2A8D__GUID-B43AE7AB-ED82-462D-8800-A676B4DECEB5">在.java文件中生成应用程序代码</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>对于默认的Oracle特定代码生成，为应用程序生成的<code class="codeph">.java</code>文件包含对Oracle JDBC驱动程序的直接调用，而不是原始SQLJ可执行语句。还有一些特定于Oracle的SQLJ运行时调用。对于ISO标准SQLJ代码生成，SQLJ可执行语句被对SQLJ运行时的调用所取代，而SQLJ运行时又包含对JDBC驱动程序的调用。
                        </p>
                        <p>为方便起见，生成的<code class="codeph">.java</code>文件还包含每个<code class="codeph">#sql</code>语句的注释，完整地重复该语句以供参考。生成的<code class="codeph">.java</code>文件将具有与输入<code class="codeph">.sqlj</code>文件相同的基本名称，该文件将是<code class="codeph">.sqlj</code>文件中定义的公共类的名称，或者在没有公共类时定义的第一个类。例如， <code class="codeph">Foo.sqlj</code>定义了<code class="codeph">Foo</code>类。<code class="codeph">Foo.java</code>源文件将由翻译器生成。
                        </p>
                        <p>生成的<code class="codeph">.java</code>文件的位置取决于您是否以及如何设置SQLJ <code class="codeph">-dir</code>选项。默认情况下， <code class="codeph">.java</code>文件将放在<code class="codeph">.sqlj</code>输入文件的目录中。
                        </p>
                        <div class="infoboxnotealso" id="GUID-930ED5CD-CB40-488E-94D9-509DEB9C2A8D__GUID-F0A38166-7B45-453C-BD30-B6849717B12B">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="translator-command-line-and-options.html#GUID-93FF52FC-8C29-488C-B82D-FFA8A6C5A03B">生成的.java文件的输出目录（-dir）</a> ”</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-930ED5CD-CB40-488E-94D9-509DEB9C2A8D__GUID-791FF0BD-C741-418E-A3B8-3F4B6AB0BCA0">.java文件中生成的配置文件密钥类（ISO代码生成）</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>如果使用ISO标准SQLJ代码生成，SQLJ会生成一个profile-keys类，它在运行时内部使用它来加载和访问序列化配置文件。此类包含已翻译应用程序中的SQLJ运行时调用与放置在序列化概要文件中的SQL操作之间的映射信息。它还包含访问序列化配置文件的方法。</p>
                        <div class="infoboxnote" id="GUID-930ED5CD-CB40-488E-94D9-509DEB9C2A8D__GUID-3B4E9DB9-1B7B-4A31-BAB9-9C5279E12ACF">
                           <p class="notep1">注意：</p>
                           <p>如果使用默认的Oracle特定代码生成，则不会生成任何配置文件或配置文件密钥类。</p>
                        </div>
                        <p>profile-keys类在同一个<code class="codeph">.java</code>输出文件中定义，该文件包含已翻译的应用程序源代码，其类名基于<code class="codeph">.sqlj</code>源文件的基本名称，如下所示：</p><pre class="oac_no_warn" dir="ltr">Basename_SJProfileKeys</pre><p>例如，翻译<code class="codeph">Foo.sqlj</code>在生成的<code class="codeph">.java</code>文件中定义以下profile-keys类：</p><pre class="oac_no_warn" dir="ltr">Foo_SJProfileKeys</pre><p>如果您的应用程序在一个包中，则会相应地反映出来。例如，在<code class="codeph">ab</code>包中翻译<code class="codeph">Foo.sqlj</code>定义了以下类：</p><pre class="oac_no_warn" dir="ltr">ABFoo_SJProfileKeys</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-930ED5CD-CB40-488E-94D9-509DEB9C2A8D__GUID-9CEFF778-6755-416A-A1D3-D0DE8DED144C">.ser或.class文件中生成的配置文件（ISO代码生成）</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>如果使用ISO标准SQLJ代码生成，SQLJ会生成用于存储有关在输入文件中找到的SQL操作的信息的配置文件。将为您在应用程序中使用的每个连接上下文类生成配置文件。它描述了使用关联连接上下文类的实例执行的操作，例如要执行的SQL操作，要访问的表以及要调用的存储过程和函数。</p>
                        <div class="infoboxnote" id="GUID-930ED5CD-CB40-488E-94D9-509DEB9C2A8D__GUID-653119F0-7B9A-4A6B-A757-319F9A6E55BA">
                           <p class="notep1">注意：</p>
                           <p>如果使用默认的Oracle特定代码生成，那么有关SQL操作的信息将嵌入到生成的代码中，该代码直接调用Oracle JDBC驱动程序。在这种情况下，SQLJ不会生成配置文件。</p>
                        </div>
                        <p>配置文件在<code class="codeph">.ser</code>序列化资源文件中生成。但是，如果启用SQLJ <code class="codeph">-ser2class</code>选项，则配置文件将自动转换为<code class="codeph">.class</code>文件，作为转换的一部分。在这种情况下，不可能进一步定制配置文件。您必须删除<code class="codeph">.class</code>文件并重新运行SQLJ转换器以重新生成配置文件。
                        </p>
                        <p>与profile-keys类名称类似地生成配置文件基本名称。它们完全限定了包名，后跟<code class="codeph">.sqlj</code>文件基名，后跟字符串：</p><pre class="oac_no_warn" dir="ltr">_SJProfile <span class="italic">n</span>
</pre><p>其中<span class="italic"><code class="codeph">n</code></span>是为特定<code class="codeph">.sqlj</code>输入文件生成的每个配置文件的唯一编号，从0开始。
                        </p>
                        <p>再次使用<code class="codeph">Foo.sqlj</code>输入文件的示例，如果生成了两个配置文件，那么它们将具有以下基本名称（假设没有包）：</p><pre class="oac_no_warn" dir="ltr">Foo_SJProfile0 Foo_SJProfile1</pre><p>如果<code class="codeph">Foo.sqlj</code>在<code class="codeph">ab</code>包中，那么配置文件基名将是：</p><pre class="oac_no_warn" dir="ltr">ABFoo_SJProfile0 abFoo_SJProfile1</pre><p>物理上，配置文件作为资源文件中包含的Java序列化对象存在。包含配置文件的资源文件使用<code class="codeph">.ser</code>扩展名，并根据配置文件的基本名称命名（不包括软件包名称）。前面提到的两个配置文件的资源文件将命名如下：</p><pre class="oac_no_warn" dir="ltr">Foo_SJProfile0.ser Foo_SJProfile1.ser</pre><p>或者，如果启用<code class="codeph">-ser2class</code>选项，它们将被命名为<code class="codeph">Foo_SJProfile0.class</code>和<code class="codeph">Foo_SJProfile1.class</code> 。如果选择此选项，则会在自定义步骤<span class="italic">之后</span>转换为<code class="codeph">.class</code> 。
                        </p>
                        <div class="infoboxnotealso" id="GUID-930ED5CD-CB40-488E-94D9-509DEB9C2A8D__GUID-C7583720-72AF-43CA-AA7A-72694117D17D">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="translator-command-line-and-options.html#GUID-18BBFFC9-9FA1-4AB9-B65F-D822D3B2A6C3">.ser文件转换为.class文件（-ser2class）</a> ”</span></p>
                        </div>
                        <p>这些文件的位置取决于SQLJ <code class="codeph">-d</code>选项的设置方式，它决定了所有生成的<code class="codeph">.ser</code>和<code class="codeph">.class</code>文件的放置位置。
                        </p>
                        <div class="infoboxnotealso" id="GUID-930ED5CD-CB40-488E-94D9-509DEB9C2A8D__GUID-00B01D10-DD89-4602-BB77-42AE715B63CF">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="translator-command-line-and-options.html#GUID-93FF52FC-8C29-488C-B82D-FFA8A6C5A03B">生成的.ser和.class文件的输出目录（-d）</a> ”</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-930ED5CD-CB40-488E-94D9-509DEB9C2A8D__GUID-ADFA0FDF-B071-4BFA-8F54-1375E8C8B441">有关生成的SQLJ运行时调用的更多信息</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>当通过调用JDBC驱动程序（用于Oracle特定代码生成）或SQLJ运行时（用于ISO标准SQLJ代码生成）替换<code class="codeph">#sql</code>语句时，这些调用将实现<a href="translator-run-time-functionality.html#GUID-930ED5CD-CB40-488E-94D9-509DEB9C2A8D__CHEFIGGA" title="摘要">表10-1中</a>的步骤。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-930ED5CD-CB40-488E-94D9-509DEB9C2A8D__CHEFIGGA">
                        <p class="titleintable">表10-1生成呼叫的步骤，ISO标准与Oracle特定</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="生成调用的步骤，ISO标准与Oracle特定" width="100%" border="1" summary="summary" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="50%" id="d61763e639">ISO标准代码生成的步骤</th>
                                 <th align="left" valign="bottom" width="50%" id="d61763e642">Oracle代码生成的步骤</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d61763e647" headers="d61763e639 ">
                                    <p>使用存储在关联的配置文件条目中的信息获取SQLJ语句对象。</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d61763e647 d61763e642 ">
                                    <p>获取Oracle JDBC语句对象。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d61763e654" headers="d61763e639 ">
                                    <p>使用语句对象的<code class="codeph">set</code> <span class="italic"><code class="codeph">XXX</code></span> <code class="codeph">()</code>方法将输入绑定到语句中。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d61763e654 d61763e642 ">
                                    <p>使用Oracle JDBC语句方法绑定输入，并在必要时注册输出参数。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d61763e669" headers="d61763e639 ">
                                    <p>使用语句对象的<code class="codeph">executeUpdate()</code>或<code class="codeph">executeQuery()</code>方法执行语句。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d61763e669 d61763e642 ">
                                    <p>执行Oracle语句。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d61763e682" headers="d61763e639 ">
                                    <p>如果适用，创建迭代器实例。</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d61763e682 d61763e642 ">
                                    <p>如果适用，创建迭代器实例。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d61763e689" headers="d61763e639 ">
                                    <p>使用语句对象的<code class="codeph">get</code> <span class="italic"><code class="codeph">XXX</code></span> <code class="codeph">()</code>方法从语句中检索输出。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d61763e689 d61763e642 ">
                                    <p>使用适当的JDBC getter方法从语句中检索输出。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d61763e704" headers="d61763e639 ">
                                    <p>关闭SQLJ语句对象（默认情况下，通过SQLJ语句高速缓存将其回收）。</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d61763e704 d61763e642 ">
                                    <p>关闭JDBC语句对象（默认情况下，通过JDBC语句高速缓存将其回收）。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>SQLJ运行时使用与JDBC语句对象类似的SQLJ语句对象，尽管SQLJ的特定实现可能会也可能不会直接使用JDBC语句类。SQLJ语句类添加了特定于SQLJ的功能。例如：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果要将数据库中的空值输出到原始Java类型（如<code class="codeph">int</code>或<code class="codeph">float</code> ，标准SQLJ语句对象引发SQL异常，该类型不能采用空值。
                              </p>
                           </li>
                           <li>
                              <p>Oracle SQLJ语句对象允许将用户定义的对象和集合类型传递到Oracle数据库或从Oracle数据库中检索。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ710"></a><div class="props_rev_3"><a id="GUID-9A0CD688-00C7-4DBB-9F76-1727E5C291C4" name="GUID-9A0CD688-00C7-4DBB-9F76-1727E5C291C4"></a><h4 id="JSQLJ-GUID-9A0CD688-00C7-4DBB-9F76-1727E5C291C4" class="sect4">Java编译</h4>
                  <div>
                     <p>代码生成后，SQLJ调用Java编译器来编译生成的<code class="codeph">.java</code>文件。这会为您在应用程序中定义的每个类生成一个<code class="codeph">.class</code>文件，包括迭代器和连接上下文声明，以及生成的profile-keys类的<code class="codeph">.class</code>文件，如果您使用ISO代码生成（并假设您的应用程序使用SQLJ可执行文件）语句）。您在SQLJ命令行上直接指定的任何<code class="codeph">.java</code>文件（例如，用于类型解析）也会在此时编译。
                     </p>
                     <p>在<span class="q">“ <a href="translator-run-time-functionality.html#GUID-930ED5CD-CB40-488E-94D9-509DEB9C2A8D">代码生成</a> ”中</span>使用的示例中，将在相应的目录中<span class="q"><a href="translator-run-time-functionality.html#GUID-930ED5CD-CB40-488E-94D9-509DEB9C2A8D">生成</a></span>以下<code class="codeph">.class</code>文件（在源代码中给定包信息）：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">让Foo.class</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">Foo_SJProfileKeys.class</code> （仅限ISO代码生成）</p>
                        </li>
                        <li>
                           <p>您在<code class="codeph">Foo.sqlj</code>定义的每个附加类的<code class="codeph">.class</code>文件</p>
                        </li>
                        <li>
                           <p>您在<code class="codeph">Foo.sqlj</code>声明的每个迭代器和连接上下文类的<code class="codeph">.class</code>文件（无论是公共还是私有）</p>
                        </li>
                     </ul>
                     <p>为了确保<code class="codeph">.class</code>文件和配置文件（如果有的话，无论是<code class="codeph">.ser</code>还是<code class="codeph">.class</code> ）将位于同一目录中，SQLJ将其<code class="codeph">-d</code>选项传递给Java编译器。如果未设置<code class="codeph">-d</code>选项，则<code class="codeph">.class</code>文件和配置文件与生成的<code class="codeph">.java</code>文件放在同一目录中，该文件根据<code class="codeph">-dir</code>选项设置放置。
                     </p>
                     <p>此外，为了使SQLJ和Java编译器使用相同的编码，SQLJ将其<code class="codeph">-encoding</code>选项传递给Java编译器，除非关闭SQLJ <code class="codeph">-compiler-encoding-flag</code> 。如果未设置<code class="codeph">-encoding</code>选项，则SQLJ和编译器将使用Java虚拟机（JVM） <code class="codeph">file.encoding</code>属性中的设置。
                     </p>
                     <p>默认情况下，SQLJ调用Sun Microsystems Java Development Kit（JDK）的标准<code class="codeph">javac</code>编译器，但也可以使用其他编译器。您可以通过设置SQLJ <code class="codeph">-compiler-executable</code>选项来请求使用备用Java编译<code class="codeph">-compiler-executable</code> 。
                     </p>
                     <div class="infoboxnote" id="GUID-9A0CD688-00C7-4DBB-9F76-1727E5C291C4__GUID-519B5687-3A4D-4710-AAD2-91FEF1F40234">
                        <p class="notep1">注意：</p>
                        <p>如果您使用的是SQLJ <code class="codeph">-encoding</code>选项但使用的编译器没有<code class="codeph">-encoding</code>选项，请关闭SQLJ <code class="codeph">-compiler-encoding-flag</code> 。否则，SQLJ将尝试将<code class="codeph">-encoding</code>选项传递给编译器。
                        </p>
                     </div>
                  </div>
               </div><a id="JSQLJ711"></a><div class="props_rev_3"><a id="GUID-1C3E2732-1185-4961-BA6B-5BA97A35EA48" name="GUID-1C3E2732-1185-4961-BA6B-5BA97A35EA48"></a><h4 id="JSQLJ-GUID-1C3E2732-1185-4961-BA6B-5BA97A35EA48" class="sect4">配置文件定制（ISO代码生成）</h4>
                  <div>
                     <div class="section">
                        <p>在Java编译之后，如果您使用ISO标准代码生成，则会自定义包含有关嵌入式SQL指令信息的生成的配置文件，以便您的应用程序可以有效地与数据库一起使用并使用特定于供应商的扩展。</p>
                        <div class="infoboxnote" id="GUID-1C3E2732-1185-4961-BA6B-5BA97A35EA48__GUID-C2C785A9-8906-4F52-8821-C5E67E9D6E5A">
                           <p class="notep1">注意：</p>
                           <p>如果使用默认的Oracle特定代码生成，则SQLJ不会生成任何配置文件并跳过自定义步骤。您的代码将通过直接调用Oracle JDBC应用程序编程接口（API）来支持特定于Oracle的功能。</p>
                        </div>
                        <p>如果要检查已在自定义程序上设置的选项，则可以使用以下命令：</p><pre class="oac_no_warn" dir="ltr">％sqlj -P-print * .ser</pre><p>有关配置文件打印选项的更多信息，请参阅<span class="q">“ <a href="appendix.html#GUID-F5F49038-71D7-4C4C-A567-355FB0FFB99A">专业定制器：配置文件打印选项（打印）</a> ”</span> 。
                        </p>
                        <p>为了完成自定义，SQLJ调用称为自定义程序工具的前端，这是一个充当命令行实用程序的Java类。反过来，线束会调用特定的自定义程序，默认的Oracle自定义程序或通过SQLJ选项设置指定的自定义程序。</p>
                        <p>在自定义过程中，配置文件将通过以下方式更新：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使应用程序能够使用任何特定于供应商的数据库类型或功能（如果适用）</p>
                           </li>
                           <li>
                              <p>定制配置文件，以便在使用相关数据库环境的功能时尽可能高效地运行应用程序</p>
                           </li>
                        </ul>
                        <p>如果没有自定义，您只能访问和使用标准JDBC类型。</p>
                        <p>例如，Oracle定制程序可以更新配置文件以支持您定义的SQL <code class="codeph">PERSON</code>类型。然后，您可以像使用任何其他支持的数据类型一样使用<code class="codeph">PERSON</code> 。
                        </p>
                        <p>您还必须使用Oracle自定义程序进行自定义以使用任何<code class="codeph">oracle.sql</code>类型扩展。
                        </p>
                        <div class="infoboxnote" id="GUID-1C3E2732-1185-4961-BA6B-5BA97A35EA48__GUID-7044CFBD-5675-4EB8-B9E5-45E6BF843550">
                           <p class="notep1">注意：</p>
                           <p>请注意有关配置文件自定义的以下内容：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>每当您在翻译期间使用Oracle自定义程序时，您的应用程序都将需要Oracle SQLJ运行时和Oracle JDBC驱动程序，即使您未在代码中使用Oracle扩展。</p>
                              </li>
                              <li>
                                 <p>如果您的应用程序没有自定义项，或者没有适合连接的自定义项，则将使用通用SQLJ运行时。</p>
                              </li>
                              <li>
                                 <p>您可以通过在命令行上指定<code class="codeph">.ser</code>文件或包含<code class="codeph">.ser</code>文件的<code class="codeph">.jar</code>文件来自定义以前创建的配置文件。但是你不能在正在进行翻译的SQLJ运行中执行此操作。您可以指定要自定义的<code class="codeph">.ser</code> / <code class="codeph">.jar</code>文件或要转换，编译和自定义的<code class="codeph">.sqlj</code> / <code class="codeph">.java</code>文件，但不能指定这两个类别。有关如何使用<code class="codeph">.jar</code>文件的更多信息，请参阅<span class="q">“ <a href="appendix.html#GUID-337DCFDF-48AD-495F-918B-63B86CD71039">用于配置文件的JAR文件</a> ”</span> 。
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="JSQLJ712"></a><div class="props_rev_3"><a id="GUID-AEB9AFD5-5CE3-43AA-8883-A0A03D82A43D" name="GUID-AEB9AFD5-5CE3-43AA-8883-A0A03D82A43D"></a><h3 id="JSQLJ-GUID-AEB9AFD5-5CE3-43AA-8883-A0A03D82A43D" class="sect3">转换器错误，消息和退出代码的功能</h3>
               <div>
                  <p>本节概述了SQLJ转换器消息和退出代码。它包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="translator-run-time-functionality.html#GUID-FA67998B-E9A1-41C6-81F8-5F8677A6FDDD">翻译错误_警告_和信息消息</a></p>
                     </li>
                     <li>
                        <p><a href="translator-run-time-functionality.html#GUID-A1E4272B-002E-4CD9-9B19-62EDB9EB1BC3">翻译状态消息</a></p>
                     </li>
                     <li>
                        <p><a href="translator-run-time-functionality.html#GUID-17DEEF13-D43F-490A-8A8E-067311A77771">翻译退出代码</a></p>
                     </li>
                  </ul>
               </div><a id="JSQLJ714"></a><a id="JSQLJ713"></a><div class="props_rev_3"><a id="GUID-FA67998B-E9A1-41C6-81F8-5F8677A6FDDD" name="GUID-FA67998B-E9A1-41C6-81F8-5F8677A6FDDD"></a><h4 id="JSQLJ-GUID-FA67998B-E9A1-41C6-81F8-5F8677A6FDDD" class="sect4">转换程序错误，警告和信息消息</h4>
                  <div>
                     <div class="section">
                        <p>在翻译阶段您可能会遇到三种主要级别的SQLJ消息：错误，警告和信息。警告消息可以进一步细分为两个级别：不可抑制和可抑制。因此，有四种消息类别（按严重程度排序）：</p>
                        <ol>
                           <li>
                              <p>错误</p>
                           </li>
                           <li>
                              <p>不可抑制的警告</p>
                           </li>
                           <li>
                              <p>可抑制的警告</p>
                           </li>
                           <li>
                              <p>信息</p>
                           </li>
                        </ol>
                        <p>您可以使用SQLJ <code class="codeph">-warn</code>选项控制可抑制警告和信息。
                        </p>
                        <p>以<code class="codeph">Error:</code>为前缀的错误消息表示遇到以下情况之一：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>阻止编译的条件（例如，源文件包含名称与基本文件名不匹配的公共类）</p>
                           </li>
                           <li>
                              <p>如果执行代码将导致运行时错误的条件（例如，代码尝试将<code class="codeph">VARCHAR</code>提取到<code class="codeph">java.util.Vector</code> ，使用Oracle JDBC驱动程序）</p>
                           </li>
                        </ul>
                        <p>如果在SQLJ转换期间遇到错误，则不会生成任何输出，也不会执行编译和自定义。</p>
                        <p>不可抑制的警告消息（以<code class="codeph">Warning:</code>为前缀）表示遇到以下情况之一：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果执行代码可能（但不一定）导致运行时错误的条件（例如，其输出未分配给任何内容的<code class="codeph">SELECT</code>语句）</p>
                           </li>
                           <li>
                              <p>一种损害SQLJ验证源代码运行时方面的能力的条件（例如，无法连接到您为在线检查指定的数据库）</p>
                           </li>
                           <li>
                              <p>可能由编码错误或疏忽导致的情况</p>
                           </li>
                        </ul>
                        <p>如果遇到不可抑制的警告，SQLJ转换将完成，但您应该分析问题并确定在运行应用程序之前是否应该修复它。如果指定了在线检查但无法完成，则执行离线检查。</p>
                        <div class="infoboxnote" id="GUID-FA67998B-E9A1-41C6-81F8-5F8677A6FDDD__GUID-D6D26ED0-DED9-425C-BB43-40EA1C4AB949">
                           <p class="notep1">注意：</p>
                           <p>出于逻辑原因，SQLJ转换程序用于分析SQL操作的解析器与将在运行时使用的顶级SQL解析器不同。因此，在翻译期间偶尔会检测到错误，这些错误在应用程序运行时实际上不会导致问题。因此，这些错误被报告为不可抑制的警告，而不是致命的错误。</p>
                        </div>
                        <p>可抑制警告消息（也以<code class="codeph">Warning:</code>为前缀）表示应用程序的特定方面存在问题，例如可移植性。例如，使用特定于Oracle的类型，例如<code class="codeph">oracle.sql.NUMBER</code> ，读取或写入Oracle Database 12 <span class="italic">c</span>第1版（12.1）。
                        </p>
                        <p>以<code class="codeph">Info:</code>为前缀的<code class="codeph">Info:</code>或状态消息不表示错误情况。它们仅提供有关翻译阶段发生情况的其他信息。
                        </p>
                        <p>使用各种<code class="codeph">-warn</code>选项标志可以抑制可抑制的警告和状态消息：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">cast/nocast</code> ：当尝试将对象类型实例<code class="codeph">nocast</code>为子类型的实例时， <code class="codeph">nocast</code>设置会抑制有关可能的运行时错误的警告。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">precision/noprecision</code> ： <code class="codeph">noprecision</code>设置可抑制有关转换期间数据精度可能丢失的警告。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">nulls/nonulls</code> ： <code class="codeph">nonulls</code>设置抑制由于可为空的列或类型而导致的可能的运行时错误的警告。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">portable/noportable</code> ： <code class="codeph">noportable</code>设置禁止有关使用Oracle特定功能的SQLJ代码的警告，否则可能是非标准的，因此无法移植到其他环境。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">strict/nostrict</code> ：如果命名迭代器中的列少于填充迭代器的选定数据中的列，则<code class="codeph">nostrict</code>设置将禁止发出警告。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">verbose/noverbose</code> ： <code class="codeph">noverbose</code>设置抑制仅仅是信息性的状态消息，并不表示错误或警告条件。
                              </p>
                           </li>
                        </ul>
                        <p>如果您在SQLJ翻译期间收到警告，那么您可以尝试使用<code class="codeph">-warn=none</code>再次运行翻译器，以查看是否有任何警告更严重（不可抑制）。
                        </p>
                        <p>下表总结了SQLJ转换程序生成的错误和状态消息的类别。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-FA67998B-E9A1-41C6-81F8-5F8677A6FDDD__CHEFFDGC">
                        <p class="titleintable">表10-2 SQLJ转换程序错误消息类别</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="SQLJ转换程序错误消息类别" width="100%" border="1" summary="summary" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="25%" id="d61763e1225">消息类别</th>
                                 <th align="left" valign="bottom" width="16%" id="d61763e1228">字首</th>
                                 <th align="left" valign="bottom" width="35%" id="d61763e1231">指示</th>
                                 <th align="left" valign="bottom" width="24%" id="d61763e1234">抑制</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d61763e1239" headers="d61763e1225 ">
                                    <p>错误</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d61763e1239 d61763e1228 ">
                                    <p><code class="codeph">错误：</code></p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d61763e1239 d61763e1231 ">
                                    <p>导致编译失败或运行时失败的致命错误（转换中止）</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d61763e1239 d61763e1234 ">
                                    <p>NA</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d61763e1253" headers="d61763e1225 ">
                                    <p>不可抑制的警告</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d61763e1253 d61763e1228 ">
                                    <p><code class="codeph">Warning</code> ：</p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d61763e1253 d61763e1231 ">
                                    <p>阻止正常翻译或可能导致运行时故障的条件（已完成翻译）</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d61763e1253 d61763e1234 ">
                                    <p>NA</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d61763e1268" headers="d61763e1225 ">
                                    <p>可抑制的警告</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d61763e1268 d61763e1228 ">
                                    <p><code class="codeph">Warning</code> ：</p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d61763e1268 d61763e1231 ">
                                    <p>关于您的申请的特定方面的问题（翻译已完成）</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d61763e1268 d61763e1234 ">
                                    <p><code class="codeph">-warn</code>选项标志： <code class="codeph">nocast noprecision nonulls noportable nostrict</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d61763e1297" headers="d61763e1225 ">
                                    <p>信息/状态消息</p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d61763e1297 d61763e1228 ">
                                    <p><code class="codeph">Info</code> ：</p>
                                 </td>
                                 <td align="left" valign="top" width="35%" headers="d61763e1297 d61763e1231 ">
                                    <p>有关翻译过程的信息</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d61763e1297 d61763e1234 ">
                                    <p><code class="codeph">-warn</code>选项标志： <code class="codeph">noverbose</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="JSQLJ715"></a><div class="props_rev_3"><a id="GUID-A1E4272B-002E-4CD9-9B19-62EDB9EB1BC3" name="GUID-A1E4272B-002E-4CD9-9B19-62EDB9EB1BC3"></a><h4 id="JSQLJ-GUID-A1E4272B-002E-4CD9-9B19-62EDB9EB1BC3" class="sect4">翻译状态消息</h4>
                  <div>
                     <p>除了错误，警告和信息消息之外，SQLJ还可以在SQLJ操作的所有阶段生成状态消息：转换，编译和自定义。在处理每个文件时以及在SQLJ操作的每个阶段生成状态消息。</p>
                     <p>您可以使用SQLJ <code class="codeph">-status</code>选项控制状态消息。
                     </p>
                     <div class="infoboxnotealso" id="GUID-A1E4272B-002E-4CD9-9B19-62EDB9EB1BC3__GUID-6CF1D5CF-3D84-4F19-81E9-ACE63F93E5AD">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="translator-command-line-and-options.html#GUID-6608C203-942D-4E92-8AA5-C523516449D1__I1007388">实时状态消息（-status）</a> ”</span></p>
                     </div>
                  </div>
               </div><a id="JSQLJ716"></a><div class="props_rev_3"><a id="GUID-17DEEF13-D43F-490A-8A8E-067311A77771" name="GUID-17DEEF13-D43F-490A-8A8E-067311A77771"></a><h4 id="JSQLJ-GUID-17DEEF13-D43F-490A-8A8E-067311A77771" class="sect4">翻译退出代码</h4>
                  <div>
                     <p>完成后，SQLJ转换器将以下退出代码返回给操作系统：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">0</code> ：执行时没有错误</p>
                        </li>
                        <li>
                           <p><code class="codeph">1</code> ：SQLJ执行出错</p>
                        </li>
                        <li>
                           <p><code class="codeph">2</code> ：Java编译出错</p>
                        </li>
                        <li>
                           <p><code class="codeph">3</code> ：配置文件自定义错误</p>
                        </li>
                        <li>
                           <p><code class="codeph">4</code> ：类检测中的错误，从<code class="codeph">.sqlj</code>源文件到生成的<code class="codeph">.class</code>文件的行号的可选映射</p>
                        </li>
                        <li>
                           <p><code class="codeph">5</code> ： <code class="codeph">ser2class</code>转换出错，可以将<code class="codeph">.ser</code>文件中的配置文件可选转换为<code class="codeph">.class</code>文件</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-17DEEF13-D43F-490A-8A8E-067311A77771__GUID-29C6215C-9F24-4380-A415-E9C3934B023D">
                        <p class="notep1">注意：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果发出<code class="codeph">-help</code>或<code class="codeph">-version</code>选项，则SQLJ退出代码为<code class="codeph">0</code> 。
                              </p>
                           </li>
                           <li>
                              <p>如果在未指定要处理的任何文件的情况下运行SQLJ，则SQLJ会发出帮助输出并返回退出代码<code class="codeph">1</code> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="JSQLJ717"></a><div class="props_rev_3"><a id="GUID-AFF5C519-028E-4554-98E8-B8FF103515D1" name="GUID-AFF5C519-028E-4554-98E8-B8FF103515D1"></a><h3 id="JSQLJ-GUID-AFF5C519-028E-4554-98E8-B8FF103515D1" class="sect3">SQLJ运行时</h3>
               <div>
                  <p>本节介绍有关Oracle SQLJ运行时的信息，该运行时是在JDBC驱动程序之上运行的纯Java代码的薄层。</p>
                  <p>如果使用默认的Oracle特定代码生成，则SQLJ运行时层变得更薄，运行时子集与Oracle JDBC驱动程序一起使用。大多数运行时功能都直接编译到Oracle JDBC调用中。您不能使用非Oracle JDBC驱动程序。</p>
                  <div class="infoboxnotealso" id="GUID-AFF5C519-028E-4554-98E8-B8FF103515D1__GUID-BE21A7F6-14D3-448A-9CBE-3939D169B8C4">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="key-programming-considerations.html#GUID-E0F0C310-400E-4F9C-8036-B44FB2A3E2FD">特定于Oracle的代码生成（无配置文件）</a> ”</span></p>
                  </div>
                  <p>当SQLJ使用ISO标准代码生成转换SQLJ源代码时，Java应用程序中的嵌入式SQL命令将被对SQLJ运行时的调用所取代。运行时类充当等效JDBC类的包装器，提供特殊的SQLJ功能。当最终用户运行应用程序时，SQLJ运行时充当中介，从配置文件中读取有关SQL操作的信息，并将指令传递给JDBC驱动程序。</p>
                  <p>但是，一般来说，可以实现SQLJ运行时以使用任何JDBC驱动程序或供应商专有的访问数据库的方法。Oracle SQLJ运行时需要JDBC驱动程序，但可以使用任何标准JDBC驱动程序。但是，要使用特定于Oracle的数据类型和功能，必须使用Oracle JDBC驱动程序。出于本文档的目的，通常假定您使用的是Oracle数据库和Oracle JDBC驱动程序之一。</p>
                  <div class="infoboxnote" id="GUID-AFF5C519-028E-4554-98E8-B8FF103515D1__GUID-4EAC28BE-FE04-4F1E-9FDD-FCE0556B495D">
                     <p class="notep1">注意：</p>
                     <p>对于ISO标准SQLJ代码生成，只要在转换期间使用Oracle自定义程序，您的应用程序就需要Oracle SQLJ运行时和Oracle JDBC驱动程序，即使您不在代码中使用Oracle扩展。如果您的应用程序没有自定义项，或者没有适合连接的自定义项，则将使用通用SQLJ运行时。</p>
                  </div>
               </div><a id="JSQLJ719"></a><a id="JSQLJ720"></a><a id="JSQLJ718"></a><div class="props_rev_3"><a id="GUID-7B13542C-1664-40CC-882A-C44361F817F0" name="GUID-7B13542C-1664-40CC-882A-C44361F817F0"></a><h4 id="JSQLJ-GUID-7B13542C-1664-40CC-882A-C44361F817F0" class="sect4">SQLJ运行时包</h4>
                  <div>
                     <p>Oracle SQLJ运行时包括您可能直接导入和使用的包，以及仅间接使用的其他包。</p>
                     <div class="infoboxnote" id="GUID-7B13542C-1664-40CC-882A-C44361F817F0__GUID-3D1FF1CA-E3FE-4CFA-B7FC-89D8CE366AEA">
                        <p class="notep1">注意：</p>
                        <p>这些包包含在运行时库<code class="codeph">runtime12</code> ， <code class="codeph">runtime12ee</code>和<code class="codeph">runtime</code> 。
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-7B13542C-1664-40CC-882A-C44361F817F0__GUID-A2D72335-C3EF-42A9-A922-CB3F495EA780">直接使用的包</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>包含可以在应用程序中直接导入和使用的类的包是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">sqlj.runtime</code></p>
                              <p>该软件包包括<code class="codeph">ExecutionContext</code>类， <code class="codeph">ConnectionContext</code>接口， <code class="codeph">ConnectionContextFactory</code>接口， <code class="codeph">ResultSetIterator</code>接口， <code class="codeph">ScrollableResultSetIterator</code>接口以及流的包装类（ <code class="codeph">BinaryStream</code>和<code class="codeph">CharacterStream</code> ，以及不推荐使用的<code class="codeph">AsciiStream</code>和<code class="codeph">UnicodeStream</code> ）。
                              </p>
                              <p>此包中的接口和抽象类由<code class="codeph">sqlj.runtime.ref</code>或<code class="codeph">oracle.sqlj.runtime</code>包中的类或SQLJ转换器生成的类实现。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">sqlj.runtime.ref</code></p>
                              <p>此包中的类实现了<code class="codeph">sqlj.runtime</code>包中的接口和抽象类。您可能会使用<code class="codeph">sqlj.runtime.ref.DefaultContext</code>类，用于指定默认连接并创建默认连接上下文实例。SQLJ在内部使用此包中的其他类在代码生成期间定义类，例如在SQLJ代码中声明的迭代器类和连接上下文类。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">oracle.sqlj.runtime</code></p>
                              <p>此包包含可用于实例化<code class="codeph">DefaultContext</code>类并建立默认连接的<code class="codeph">Oracle</code>类。它还包含Oracle实现SQLJ所使用的特定于Oracle的运行时类，包括与Oracle类型扩展进行转换的功能。
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-7B13542C-1664-40CC-882A-C44361F817F0__GUID-C92F0F02-A7A6-4653-9414-ED4A6CB1DD25">
                           <p class="notep1">注意：</p>
                           <p>名称以<code class="codeph">oracle</code>开头的软件包用于特定于Oracle的SQLJ功能。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7B13542C-1664-40CC-882A-C44361F817F0__GUID-03F3C57E-F7AB-47A9-B606-07F9FA65EC82">间接使用的包</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>包含供SQLJ内部使用的类的包是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">sqlj.runtime.profile</code></p>
                              <p>此包包含定义SQLJ配置文件外观的接口和抽象类（仅适用于ISO标准代码生成）。这包括<code class="codeph">EntryInfo</code>和<code class="codeph">TypeInfo</code>类。配置文件中的每个条目都由<code class="codeph">EntryInfo</code>对象描述，其中配置文件条目对应于应用程序中的SQL操作。配置文件条目中的每个参数都由<code class="codeph">TypeInfo</code>对象描述。
                              </p>
                              <p>此包中的接口和类由<code class="codeph">sqlj.runtime.profile.ref</code>包中的类实现。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">sqlj.runtime.profile.ref</code></p>
                              <p>此包包含实现<code class="codeph">sqlj.runtime.profile</code>包的接口和抽象类的类，并由SQLJ转换器在定义概要文件时内部使用（仅适用于ISO标准代码生成）。它还提供默认的基于JDBC的运行时实现。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">sqlj.runtime.error</code></p>
                              <p>此包由SQLJ在内部使用，包含可由SQLJ转换器生成的所有通用（非特定于Oracle）错误消息的资源文件。</p>
                           </li>
                           <li>
                              <p><code class="codeph">oracle.sqlj.runtime.error</code></p>
                              <p>此包由SQLJ在内部使用，包含可由SQLJ转换器生成的所有特定于Oracle的错误消息的资源文件。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ721"></a><div class="props_rev_3"><a id="GUID-6967B6B3-C5EC-4894-803A-31FBA18A3A6B" name="GUID-6967B6B3-C5EC-4894-803A-31FBA18A3A6B"></a><h4 id="JSQLJ-GUID-6967B6B3-C5EC-4894-803A-31FBA18A3A6B" class="sect4">运行时错误的类别</h4>
                  <div>
                     <p>可以通过以下任何方式生成运行时错误：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>SQLJ运行时</p>
                        </li>
                        <li>
                           <p>JDBC驱动程序</p>
                        </li>
                        <li>
                           <p>RDBMS</p>
                        </li>
                     </ul>
                     <p>在任何这些情况下，都会生成SQL异常作为<code class="codeph">java.sql.的实例<code class="codeph">java.sql.SQLException</code>类，或者作为子类，例如<code class="codeph">sqlj.runtime.SQLNullException</code> 。
                     </p>
                     <p>根据错误的来源，可以使用<code class="codeph">getSQLState()</code> ， <code class="codeph">getErrorCode()</code>和<code class="codeph">getMessage()</code>方法从异常中检索有意义的信息。例如，SQLJ错误包括有意义的SQL状态和消息。
                     </p>
                     <p>如果Oracle JDBC驱动程序或RDBMS在运行时生成错误，请查看前缀并查阅相应的文档：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="../jjdbc/JDBC-error-messages.html#JJDBC-GUID-F3E50939-FCB2-4254-9B33-43024A0BD6F5" target="_blank"><span class="italic">Oracle数据库JDBC开发人员</span></a> JDBC错误<a href="../jjdbc/JDBC-error-messages.html#JJDBC-GUID-F3E50939-FCB2-4254-9B33-43024A0BD6F5" target="_blank"><span class="italic">指南</span></a></p>
                        </li>
                        <li>
                           <p>有关RDBMS错误的Oracle错误消息文档（请参阅<span class="q">“ <a href="preface.html#GUID-77D8845E-2F3A-4BF8-9501-561D66752F1B">相关文档</a> ”</span> ）</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="JSQLJ722"></a><div class="sect2"><a id="GUID-50785BF7-712B-4BFC-BE22-0E86B626BBA6" name="GUID-50785BF7-712B-4BFC-BE22-0E86B626BBA6"></a><h3 id="JSQLJ-GUID-50785BF7-712B-4BFC-BE22-0E86B626BBA6" class="sect3">翻译和运行时的全球化支持</h3>
               <div>
                  <p>Oracle SQLJ实现使用Java内置功能来支持全球化。本节讨论以下内容：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>SQLJ支持全球化和本地字符编码的基础知识，首先介绍了Oracle实现中字符编码和语言支持的一些实现细节的背景信息</p>
                     </li>
                     <li>
                        <p>通过SQLJ命令行可用的选项，使您可以调整Oracle全球化支持配置</p>
                     </li>
                     <li>
                        <p>扩展的Oracle全球化支持</p>
                     </li>
                     <li>
                        <p>SQLJ之外的相关操作用于全球化支持</p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-50785BF7-712B-4BFC-BE22-0E86B626BBA6__GUID-492C0B3C-7073-4B40-97A9-B04BE1CF98CE">
                     <p class="notep1">注意：</p>
                     <p>假定有一些Oracle全球化支持的先验知识，尤其是关于字符编码和语言环境的知识。有关信息，请参阅：</p><a href="../nlspg/choosing-character-set.html#NLSPG-GUID-1943C2FB-0438-45AD-A82B-D4090A3F4A94" target="_blank"><span><cite>Oracle数据库全球化支持指南</cite></span></a></div>
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="translator-run-time-functionality.html#GUID-6AC46A6E-C8DD-4BD2-908E-76FAB9BA2027">字符编码和语言支持</a></p>
                     </li>
                     <li>
                        <p><a href="translator-run-time-functionality.html#GUID-7C321BCC-133C-44AB-BEE0-02B418720E95">用于字符编码和语言支持的SQLJ和Java设置</a></p>
                     </li>
                     <li>
                        <p><a href="translator-run-time-functionality.html#GUID-F5BA9A5C-E700-48F6-BEDC-0164574C0077">SQLJ扩展全球化支持</a></p>
                     </li>
                     <li>
                        <p><a href="translator-run-time-functionality.html#GUID-6E2C17A1-CEE6-4BE7-B7AA-6EE2A9FC3BC3">用于全局化支持的SQLJ之外的操作</a></p>
                     </li>
                  </ul>
               </div><a id="JSQLJ724"></a><a id="JSQLJ725"></a><a id="JSQLJ726"></a><a id="JSQLJ723"></a><div class="props_rev_3"><a id="GUID-6AC46A6E-C8DD-4BD2-908E-76FAB9BA2027" name="GUID-6AC46A6E-C8DD-4BD2-908E-76FAB9BA2027"></a><h4 id="JSQLJ-GUID-6AC46A6E-C8DD-4BD2-908E-76FAB9BA2027" class="sect4">字符编码和语言支持</h4>
                  <div>
                     <p>SQLJ全球化支持有两个主要方面：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>字符编码</p>
                           <p>这有三个部分：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>用于在SQLJ转换期间读取和生成源文件的字符编码</p>
                              </li>
                              <li>
                                 <p>用于在SQLJ转换期间生成错误和状态消息的字符编码</p>
                              </li>
                              <li>
                                 <p>用于在应用程序运行时生成错误和状态消息的字符编码</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>语言支持</p>
                           <p>这决定了SQLJ在SQLJ转换期间或SQLJ运行时向用户输出消息时使用的错误和状态消息列表的转换。</p>
                        </li>
                     </ul>
                     <p>运行时的全球化支持对用户是透明的，假设您的SQLJ源代码和SQL字符数据仅使用数据库字符集中的字符。SQL字符数据透明地映射到Unicode和从Unicode中映射。</p>
                     <p>请注意，对于多语言应用程序，建议使用以下选项之一：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用其字符集支持Unicode的数据库。</p>
                        </li>
                        <li>
                           <p>即使数据库字符集不支持Unicode，也请指定国家语言字符集支持Unicode。（请参阅<a href="../nlspg/overview-of-globalization-support.html#NLSPG-GUID-4530259E-9CA6-4FC3-A024-3EB6C2D90DAE" target="_blank"><span><cite>Oracle数据库全球化支持指南</cite></span></a> 。）在这种情况下，您通常将使用<span class="q">“ <a href="translator-run-time-functionality.html#GUID-F5BA9A5C-E700-48F6-BEDC-0164574C0077">SQLJ扩展全球化支持</a> ”中</span>描述的SQLJ Unicode字符类型。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-6AC46A6E-C8DD-4BD2-908E-76FAB9BA2027__GUID-65C74012-F53D-48E2-B2AE-D5AE254932B4">
                        <p class="notep1">注意：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>SQLJ转换器完全支持Unicode 2.0和Java Unicode转义序列。但是，SQLJ命令行实用程序不支持Unicode转义序列。您只能使用操作系统支持的本机字符。需要Unicode转义序列的命令行选项可以在SQLJ属性文件中输入，因为属性文件确实支持Unicode转义序列。</p>
                           </li>
                           <li>
                              <p>嵌入式SQL操作中的字符编码和转换以及读取或写入数据库的字符都由JDBC直接处理。SQLJ在这方面没有发挥作用。但是，如果在转换期间启用了在线语义检查，那么如果SQL数据操作语言（DML）操作的文本中可能无法转换为数据库字符集，则会发出警告。</p>
                           </li>
                           <li>
                              <p>有关JDBC全球化支持功能的信息，请参阅<a href="../jjdbc/globalization-support.html#JJDBC-GUID-CE02B998-DD6A-46FC-8ECF-AD2413F09A97" target="_blank"><span class="italic">Oracle数据库JDBC开发人员指南</span> <span><cite>Oracle数据库JDBC开发人员指南</cite></span></a> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-6AC46A6E-C8DD-4BD2-908E-76FAB9BA2027__GUID-102F5957-EA23-409B-A409-CBDB384F4D19">字符编码概述</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>源文件的字符编码设置告诉SQLJ两件事：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>源代码如何在<code class="codeph">.sqlj</code>和<code class="codeph">.java</code>输入文件中表示，SQLJ转换器必须读取这些文件</p>
                           </li>
                           <li>
                              <p>SQLJ应如何表示它生成的<code class="codeph">.java</code>输出文件中的源代码</p>
                           </li>
                        </ul>
                        <p>默认情况下，SQLJ使用JVM <code class="codeph">file.encoding</code>属性指示的编码。如果源文件使用其他编码，则必须将此指示给SQLJ，以便可以执行适当的转换。
                        </p>
                        <p>使用SQLJ <code class="codeph">-encoding</code>选项来完成此任务。SQLJ还将<code class="codeph">-encoding</code>设置传递给编译器，以便它用于读取<code class="codeph">.java</code>文件，除非SQLJ <code class="codeph">-compiler-encoding-flag</code>关闭。
                        </p>
                        <div class="infoboxnote" id="GUID-6AC46A6E-C8DD-4BD2-908E-76FAB9BA2027__GUID-FE482270-838A-4B55-8DDC-5981880D5C9A">
                           <p class="notep1">注意：</p>
                           <p>请勿更改<code class="codeph">file.encoding</code>系统属性以指定源文件的编码。这可能会影响Java操作的其他方面，并且可能仅提供有限数量的编码，具体取决于平台或操作系统注意事项。
                           </p>
                        </div>
                        <p>系统字符编码设置还确定在转换期间或最终用户运行应用程序的运行时期间输出给用户时SQLJ错误和状态消息的表示方式。这是根据<code class="codeph">file.encoding</code>属性设置的，不受SQLJ <code class="codeph">-encoding</code>选项的影响。
                        </p>
                        <p>对于源文件编码，你可以使用<code class="codeph">-encoding</code>选项来指定由您的Java环境支持的任何字符编码。如果您使用的是Sun Microsystems JDK，则可以在<code class="codeph">native2ascii</code>文档中列出这些文档，您可以在以下Web站点中找到它们：</p>
                        <p>https://docs.oracle.com/javase/8/docs/technotes/tools/windows/native2ascii.html</p>
                        <p>Sun Microsystems JDK支持数十种编码。这些包括<code class="codeph">8859_1</code>至<code class="codeph">8859_9</code> （ISO Latin-1至ISO Latin-9）， <code class="codeph">JIS</code> （日语）， <code class="codeph">SJIS</code> （shift-JIS，日语）和<code class="codeph">UTF8</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6AC46A6E-C8DD-4BD2-908E-76FAB9BA2027__GUID-029CAE8C-7E24-42D7-BD90-63C57C273B92">字符编码注释</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>请注意以下事项：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对于消息或源文件使用的编码中无法表示的字符始终可以表示为Java Unicode转义序列。其形式为<code class="codeph">\uHHHH</code> ，其中每个H是十六进制数字。
                              </p>
                           </li>
                           <li>
                              <p>在转换期间读取和处理<code class="codeph">.sqlj</code>源文件时，错误消息根据输入编码中的字符位置（而不是字节位置）引用源位置。
                              </p>
                           </li>
                           <li>
                              <p>通过SQLJ <code class="codeph">-encoding</code>选项或Java <code class="codeph">file.encoding</code>设置设置的<code class="codeph">-encoding</code>设置不适用于Java属性文件，例如<code class="codeph">sqlj.properties</code>和<code class="codeph">connect.properties</code> 。属性文件始终使用编码<code class="codeph">8859_1</code> 。这是Java的一个特性，特别是SQLJ。但是，您可以在属性文件中使用Unicode转义序列。您可以使用<code class="codeph">native2ascii</code>实用程序来确定转义序列。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6AC46A6E-C8DD-4BD2-908E-76FAB9BA2027__GUID-102D475A-333F-428C-B2C8-C5412CD91BBB">语言支持概述</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在转换期间或运行时期间，SQLJ错误和状态报告使用JVM <code class="codeph">user.language</code>属性中的Java语言环境设置。用户通常不必更改此设置。
                        </p>
                        <p>语言支持通过使用键/值对的消息资源实现。例如，在英语资源具有键/值对<code class="codeph">"OkKey", "Okay"</code> ，德语语言资源具有键/值对<code class="codeph">"OkKey", "Gut"</code> 。区域设置确定使用的消息资源。
                        </p>
                        <p>SQLJ支持<code class="codeph">en</code> （英语）， <code class="codeph">de</code> （德语）， <code class="codeph">fr</code> （法语）和<code class="codeph">ja</code> （日语）的语言环境设置。
                        </p>
                        <div class="infoboxnote" id="GUID-6AC46A6E-C8DD-4BD2-908E-76FAB9BA2027__GUID-0E66AB31-70FE-43CA-AA4D-2021374A40E4">
                           <p class="notep1">注意：</p>
                           <p>除语言扩展外，Java语言环境设置还可以支持国家/地区和变体扩展。例如，考虑<code class="codeph">ErrorMessages_de_CH_var1</code> ，其中<code class="codeph">CH</code>是德语的瑞士国家/地区扩展名， <code class="codeph">var1</code>是另一种变体。但是，SQLJ目前仅支持语言扩展（在本例中为<code class="codeph">de</code> ），忽略了国家和变体扩展。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSQLJ728"></a><a id="JSQLJ729"></a><a id="JSQLJ730"></a><a id="JSQLJ727"></a><div class="sect3"><a id="GUID-7C321BCC-133C-44AB-BEE0-02B418720E95" name="GUID-7C321BCC-133C-44AB-BEE0-02B418720E95"></a><h4 id="JSQLJ-GUID-7C321BCC-133C-44AB-BEE0-02B418720E95" class="sect4">用于字符编码和语言支持的SQLJ和Java设置</h4>
                  <div>
                     <p>Oracle SQLJ实现提供了一些语法，使您可以设置以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>SQLJ转换程序和Java编译器在表示源代码时使用的字符编码</p>
                           <p>使用SQLJ <code class="codeph">-encoding</code>选项。
                           </p>
                        </li>
                        <li>
                           <p>SQLJ转换程序使用的字符编码和运行时表示错误和状态消息</p>
                           <p>使用SQLJ <code class="codeph">-J</code>前缀设置Java <code class="codeph">file.encoding</code>属性。
                           </p>
                        </li>
                        <li>
                           <p>SQLJ转换程序使用的语言环境以及错误和状态消息的运行时</p>
                           <p>使用SQLJ <code class="codeph">-J</code>前缀设置Java <code class="codeph">user.language</code>属性。
                           </p>
                        </li>
                     </ul>
                     <div class="section">
                        <p class="subhead3" id="GUID-7C321BCC-133C-44AB-BEE0-02B418720E95__GUID-083A5F6D-FE73-4173-BF42-BBAF7A20A49B">设置源代码的字符编码</p>
                     </div>
                     <!-- class="section" -->
                     <p>使用SQLJ <code class="codeph">-encoding</code>选项，以确定代表使用的字符编码<code class="codeph">.sqlj</code>翻译者读取文件， <code class="codeph">.java</code>通过翻译生成的文件和<code class="codeph">.java</code>文件编译器读取。除非SQLJ <code class="codeph">-compiler-encoding-flag</code>关闭，否则选项设置由SQLJ传递给编译<code class="codeph">-compiler-encoding-flag</code> 。
                     </p>
                     <p>可以在命令行或<code class="codeph">SQLJ_OPTIONS</code>环境变量上设置此选项，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">-encoding = SJIS</pre><p>或者，您可以在SQLJ属性文件中设置它，如下所示：</p><pre class="oac_no_warn" dir="ltr">sqlj.encoding = SJIS</pre><p>如果未设置编码选项，则转换程序和编译器将使用JVM <code class="codeph">file.encoding</code>属性中指定的编码。这也可以通过SQLJ命令行设置。
                     </p>
                     <div class="infoboxnotealso" id="GUID-7C321BCC-133C-44AB-BEE0-02B418720E95__GUID-A96C4CEA-17D8-4D6A-8033-5DCC853F1CA4">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="translator-command-line-and-options.html#GUID-93FF52FC-8C29-488C-B82D-FFA8A6C5A03B">输入和输出源文件的编码（-encoding）</a> ”</span>和<span class="q">“ <a href="translator-command-line-and-options.html#GUID-A0033E23-525B-4538-80FE-4BA1641EB245">编译器编码支持（-compiler-encoding-flag）</a> ”</span> <a href="translator-command-line-and-options.html#GUID-93FF52FC-8C29-488C-B82D-FFA8A6C5A03B">输入和输出源文件的编码（-encoding）</a></p>
                     </div>
                     <div class="infoboxnote" id="GUID-7C321BCC-133C-44AB-BEE0-02B418720E95__GUID-1948CD1C-346B-49C0-B0CF-458C5F80CDA3">
                        <p class="notep1">注意：</p>
                        <p>如果要将<code class="codeph">-encoding</code>常规设置为相同的值，则最方便在属性文件中指定它，如第二个示例中所示。
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-7C321BCC-133C-44AB-BEE0-02B418720E95__GUID-4738A92C-0A71-41EB-8C71-360AE15C0803">设置SQLJ消息的字符编码和区域设置</p>
                     </div>
                     <!-- class="section" -->
                     <p>在转换和运行时期间生成的SQLJ错误和状态消息的字符编码和语言环境由Java <code class="codeph">file.encoding</code>和<code class="codeph">user.language</code>属性决定。虽然通常不需要，但您可以使用SQLJ <code class="codeph">-J</code>前缀在SQLJ命令行中设置这些和其他JVM属性。标记为此前缀的选项将传递给JVM。</p>
                     <p>设置字符编码，如下例所示，它指定shift-JIS日语字符编码：</p><pre class="oac_no_warn" dir="ltr">-J-指定-Dfile.encoding = SJIS</pre><div class="infoboxnote" id="GUID-7C321BCC-133C-44AB-BEE0-02B418720E95__GUID-5C986A56-69B9-4088-9F84-315075C821FB">
                        <p class="notep1">注意：</p>
                        <p>根据平台或操作系统的考虑，可能只提供有限数量的编码。</p>
                     </div>
                     <p>设置语言环境，如以下示例所示（指定日语语言环境）：</p><pre class="oac_no_warn" dir="ltr">-J-Duser.language = JA</pre><p><code class="codeph">-J</code>前缀只能在命令行或<code class="codeph">SQLJ_OPTIONS</code>环境变量中使用。它不能在属性文件中使用，因为在调用JVM之后会读取属性文件。
                     </p>
                     <div class="infoboxnote" id="GUID-7C321BCC-133C-44AB-BEE0-02B418720E95__GUID-9EC673A6-05E7-49D4-BDEF-C0920C27EAFC">
                        <p class="notep1">注意：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果要将<code class="codeph">file.encoding</code> ， <code class="codeph">user.language</code>或任何其他Java属性定期设置为相同的值，则最方便的是在<code class="codeph">SQLJ_OPTIONS</code>环境变量中指定<code class="codeph">-J</code>设置。这样，您不必在命令行上重复指定它们。语法与命令行上的语法基本相同。有关更多信息，请参阅<span class="q">“ <a href="translator-command-line-and-options.html#GUID-599F34B4-58F0-45FD-ACCF-F2AA34508546">选项设置的SQLJ_OPTIONS环境变量</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>请记住，如果未设置SQLJ <code class="codeph">-encoding</code>选项，则设置<code class="codeph">file.encoding</code>将影响源文件的编码以及错误和状态消息。
                              </p>
                           </li>
                           <li>
                              <p>请注意，更改<code class="codeph">file.encoding</code>属性可能会对Java操作的其他方面产生无法预料的后果。此外，任何新设置都必须与您的操作系统兼容。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-7C321BCC-133C-44AB-BEE0-02B418720E95__GUID-328B9DEE-83B9-4A3E-A12E-50B7EBCE837A">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="translator-command-line-and-options.html#GUID-763B9DED-7755-408F-9DD1-5679118979B2">命令行语法和操作</a> ”</span>和<span class="q">“ <a href="translator-command-line-and-options.html#GUID-A54F8576-478C-4A96-9B9E-EA8778FD91B0">传递给Java虚拟机的选项</a> ”</span></p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-7C321BCC-133C-44AB-BEE0-02B418720E95__GUID-B3113754-5A5F-40F8-A393-CA400940F270">SQLJ命令行示例：设置编码和区域设置</p>
                     </div>
                     <!-- class="section" -->
                     <p>以下是完整的SQLJ命令行，包括JVM <code class="codeph">file.encoding</code>和<code class="codeph">user.language</code>设置：</p><pre class="oac_no_warn" dir="ltr">％sqlj -encoding = 8859_1 -J-Dfile.encoding = SJIS -J-Duser.language = ja Foo.sqlj</pre><p>此示例使用SQLJ <code class="codeph">-encoding</code>选项指定<code class="codeph">8859_1</code> SQLJ翻译过程中的源代码表示（Latin-1的）。翻译器在读取<code class="codeph">.sqlj</code>输入文件和生成<code class="codeph">.java</code>输出文件时使用此编码。然后将编码传递给Java编译器，以用于读取生成的<code class="codeph">.java</code>文件。该<code class="codeph">-encoding</code>选项，指定时，总是传递给Java编译器，除非SQLJ <code class="codeph">-compiler-encoding-flag</code>被禁用。
                     </p>
                     <p>对于在<code class="codeph">Foo.sqlj</code>的转换期间输出的错误和状态消息，SQLJ转换器使用<code class="codeph">SJIS</code>编码和<code class="codeph">ja</code>语言环境。
                     </p>
                  </div>
               </div><a id="JSQLJ732"></a><a id="JSQLJ733"></a><a id="JSQLJ734"></a><a id="JSQLJ735"></a><a id="JSQLJ731"></a><div class="sect3"><a id="GUID-F5BA9A5C-E700-48F6-BEDC-0164574C0077" name="GUID-F5BA9A5C-E700-48F6-BEDC-0164574C0077"></a><h4 id="JSQLJ-GUID-F5BA9A5C-E700-48F6-BEDC-0164574C0077" class="sect4">SQLJ扩展全球化支持</h4>
                  <div>
                     <p>Oracle SQLJ实现包括对从现有字符和流类型派生的Java类型（Unicode字符类型）的支持，这些类型传达了全球化的预期用法。在SQLJ中，不可能直接使用JDBC语句或结果集方法，否则这些方法将用于全球化支持。如果您对有关这些方法的信息感兴趣，请参阅<a href="../jjdbc/globalization-support.html#JJDBC-GUID-CE02B998-DD6A-46FC-8ECF-AD2413F09A97" target="_blank"><span class="italic">Oracle数据库JDBC开发人员指南</span></a></p>
                     <p>如果数据库本身支持Unicode，则不需要以下部分中描述的类型。在这种情况下，全球化支持将以透明方式处理。当数据库本身不支持Unicode，但具有支持Unicode的国家语言字符集时，通常会使用这些类型（对于使用本地语言字符集的列）。</p>
                     <div class="section" id="GUID-F5BA9A5C-E700-48F6-BEDC-0164574C0077__CHEBDEFG">
                        <p class="subhead3" id="GUID-F5BA9A5C-E700-48F6-BEDC-0164574C0077__GUID-07468B05-0A0D-4AA6-B59D-D359315FC6A6">全球化支持的Java类型</p>
                     </div>
                     <!-- class="section" -->
                     <p>Oracle SQLJ实现提供了许多用于全球化支持的Java类型。下表说明了这些全球化支持类型与通用JDBC和SQLJ字符和流类型之间的对应关系。除<code class="codeph">NString</code>之外，每个全球化支持类型都是其对应的JDBC或SQLJ类型的子类。
                     </p>
                     <div class="tblformal" id="GUID-F5BA9A5C-E700-48F6-BEDC-0164574C0077__CHEBEAGE">
                        <p class="titleintable">表10-3 JDBC和SQLJ类型以及相应的全球化类型</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="JDBC和SQLJ类型以及相应的全球化类型" width="100%" border="1" summary="This table describes the JDBC and SQLJ Types and the corresponding Globalization Types." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="43%" id="d61763e2473">JDBC和SQLJ类型</th>
                                 <th align="left" valign="bottom" width="57%" id="d61763e2476">全球化支持类型</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="43%" id="d61763e2486" headers="d61763e2473 ">
                                    <p><span class="bold">JDBC类型：</span></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d61763e2486 d61763e2476 ">
                                    <p> </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="43%" id="d61763e2494" headers="d61763e2473 ">
                                    <p><code class="codeph">oracle.sql。CHAR</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d61763e2494 d61763e2476 ">
                                    <p><code class="codeph">oracle.sql。NCHAR</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="43%" id="d61763e2503" headers="d61763e2473 ">
                                    <p><code class="codeph">java.lang中。串</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d61763e2503 d61763e2476 ">
                                    <p><code class="codeph">oracle.sql。NString</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="43%" id="d61763e2512" headers="d61763e2473 ">
                                    <p><code class="codeph">oracle.sql。CLOB</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d61763e2512 d61763e2476 ">
                                    <p><code class="codeph">oracle.sql。NCLOB</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="43%" id="d61763e2521" headers="d61763e2473 ">
                                    <p><span class="bold">SQLJ类型：</span></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d61763e2521 d61763e2476 ">
                                    <p> </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="43%" id="d61763e2529" headers="d61763e2473 ">
                                    <p><code class="codeph">sqlj.runtime。CharacterStream</code></p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d61763e2529 d61763e2476 ">
                                    <p><code class="codeph">oracle.sqlj.runtime。NcharCharacterStream</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="43%" id="d61763e2538" headers="d61763e2473 ">
                                    <p><code class="codeph">sqlj.runtime。AsciiStream</code></p>
                                    <p>（已弃用;使用<code class="codeph">CharacterStream</code> 。）
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d61763e2538 d61763e2476 ">
                                    <p><code class="codeph">oracle.sqlj.runtime。NcharAsciiStream</code></p>
                                    <p>（不推荐使用;使用<code class="codeph">NcharCharacterStream</code> 。）
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="43%" id="d61763e2557" headers="d61763e2473 ">
                                    <p><code class="codeph">sqlj.runtime。UnicodeStream</code></p>
                                    <p>（已弃用;使用<code class="codeph">CharacterStream</code> 。）
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="57%" headers="d61763e2557 d61763e2476 ">
                                    <p><code class="codeph">oracle.sqlj.runtime。NcharUnicodeStream</code></p>
                                    <p>（不推荐使用;使用<code class="codeph">NcharCharacterStream</code> 。）
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>在应用程序必须处理国家语言字符串的情况下，要么将它们插入或从国家语言字符集列中选择它们，请使用全球化支持类型而不是相应的通用类型。</p>
                     <div class="infoboxnote" id="GUID-F5BA9A5C-E700-48F6-BEDC-0164574C0077__GUID-73297022-6B89-4B71-AC27-C6B69D644137">
                        <p class="notep1">注意：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>所有全球化支持类型都为<code class="codeph">IN</code>和<code class="codeph">OUT</code>参数添加了预期用途的自动注册，但在使用方面与相应的JDBC或SQLJ类型（包括构造函数）相同。
                              </p>
                           </li>
                           <li>
                              <p>迭代器列中不需要使用全球化支持类型，因为底层网络协议隐式支持底层结果集的国家语言字符。</p>
                           </li>
                        </ul>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-F5BA9A5C-E700-48F6-BEDC-0164574C0077__GUID-03FECBDD-202E-473C-9898-8BD6399E2F71">NString类用法和注释</p>
                     </div>
                     <!-- class="section" -->
                     <p><code class="codeph">oracle.sql.CHAR</code>类及其<code class="codeph">NCHAR</code>子类仅提供需要显式知道数据库字符集的构造函数。因此， <code class="codeph">oracle.sql.NString</code>类， <code class="codeph">java.lang.的包装器<code class="codeph">java.lang.String</code> ，在大多数情况下是优选的。<code class="codeph">NString</code>类提供更简单的构造函数，并确保使用JDBC驱动程序注册使用的国家语言字符形式。
                     </p>
                     <p>以下是关键的<code class="codeph">NString</code>方法：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">NString(String)</code> ：此构造函数从现有<code class="codeph">String</code>实例创建<code class="codeph">NString</code>实例。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">String toString()</code> ：此方法返回基础<code class="codeph">String</code>实例。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">String getString()</code> ：此方法还返回基础<code class="codeph">String</code>实例。
                           </p>
                        </li>
                     </ul>
                     <p><code class="codeph">toString()</code>方法使您可以在字符串连接表达式中使用<code class="codeph">NString</code>实例（例如<code class="codeph">"a"+b</code> ，其中<code class="codeph">b</code>是字符串）。<code class="codeph">CHAR</code>超类中提供的<code class="codeph">getString()</code>方法也支持一致性。此外， <code class="codeph">String</code>类的成员方法被转移到<code class="codeph">NString</code>包装器类，使您能够编写更简洁的代码。
                     </p>
                     <p>在SQLJ应用程序，用于Oracle以前版本数据库11 <span class="italic">克</span> ，则必须使用的主机变量<code class="codeph">NString</code>类型绑定列<code class="codeph">NCHAR</code>类型。例如，请考虑下表：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE Tbl1（ColA CHAR NColB NCHAR）</pre><p>要通过SQLJ应用程序在此表中插入行，请使用类似于以下内容的代码：</p><pre class="oac_no_warn" dir="ltr">...String v_a =“\ uFF5E”; NString v_nb =“\ uFF5E”; #sql {INSERT INTO Tbl1（ColA，NColB）VALUES（：v_a，：v_nb）}; ...
</pre><p>从Oracle Database <span class="italic">11g</span>第1版开始，SQLJ应用程序可以使用<code class="codeph">String</code>变量来绑定<code class="codeph">NCHAR</code>列。因此，前面的例子可以重写如下：</p><pre class="oac_no_warn" dir="ltr">...String v_a =“\ uFF5E”; String v_nb =“\ uFF5E”; #sql {INSERT INTO Tbl1（ColA，NColB）VALUES（：v_a，：v_nb）}; ...
</pre><p>但是，如果要使用<code class="codeph">String</code>主机变量绑定到<code class="codeph">NCHAR</code>列，则必须使用<code class="codeph">-ncharconv</code> SQLJ转换器选项转换SQLJ文件，如下所示：</p><pre class="oac_no_warn" dir="ltr">sqlj -ncharconv [ - <span class="italic">options</span> ] app.sqlj</pre><p>在上面的命令中， <span class="italic"><code class="codeph">options</code></span>可以是其他SQLJ选项， <code class="codeph">app.sqlj</code>是包含代码的SQLJ文件。
                     </p>
                     <p>使用此选项时， <a id="d61763e2729" class="indexterm-anchor"></a> <code class="codeph">setFormOfUse</code>字符列的所有绑定生成<code class="codeph">setFormOfUse</code>方法，即<code class="codeph">CHAR</code>或<code class="codeph">NCHAR</code>列。
                     </p>
                     <div class="infoboxnote" id="GUID-F5BA9A5C-E700-48F6-BEDC-0164574C0077__GUID-8BF3E3E9-0693-4800-B491-1F7307006EFE">
                        <p class="notep1">注意：</p>
                        <p>使用<code class="codeph">-ncharconv</code>选项编译SQLJ文件时， <code class="codeph">setFormOfUse</code>方法将在生成的<code class="codeph">setFormOfUse</code> <code class="codeph">codegen=oracle</code>代码中使用。对于<code class="codeph">codegen=iso</code> ，此选项信息将传递给Oracle SQLJ运行时，该运行时在运行时内部使用<code class="codeph">SetFormOfUse</code>进行绑定。
                        </p>
                     </div>
                     <p>SQLJ应用程序可以使用<code class="codeph">String</code>主机变量从服务器检索数据而不使用<code class="codeph">-ncharconv</code>选项，因为有关列类型的信息是在客户端获取的，而JDBC在内部设置适当列的表单。
                     </p>
                     <div class="infoboxnote" id="GUID-F5BA9A5C-E700-48F6-BEDC-0164574C0077__GUID-C088CCBF-FF10-416C-AA7A-9C051840498E">
                        <p class="notep1">注意：</p>
                        <p>使用<code class="codeph">-ncharconv</code>选项时，性能可能会有很小的差异，具体取决于数据库字符集和国家字符集以及表中的字符列数。
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-F5BA9A5C-E700-48F6-BEDC-0164574C0077__GUID-3FB8EF78-3CAB-4AB4-93EC-951A4B0E23AB">全球化支持实例</p>
                     </div>
                     <!-- class="section" -->
                     <p>以下示例显示了<code class="codeph">NString</code>类的<code class="codeph">NString</code> ：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">NString</code>作为<code class="codeph">IN</code>参数</p>
                           <p>此示例使用<code class="codeph">NString</code>实例作为数据库的输入参数。
                           </p><pre class="oac_no_warn" dir="ltr">import oracle.sql。NString; ...NString nc_name = new NString（“带有奇怪字符的名字”）; #sql {update PEOPLE set city = :( new NString（“\ ufff2”）），name =：nc_name其中num =：n}; ...
</pre></li>
                        <li id="GUID-F5BA9A5C-E700-48F6-BEDC-0164574C0077__I1006452">
                           <p><code class="codeph">NString</code>作为<code class="codeph">OUT</code>参数</p>
                           <p>此示例使用<code class="codeph">NString</code>实例作为数据库的输出参数。
                           </p><pre class="oac_no_warn" dir="ltr">import oracle.sql。NString; ...NString nstr; #sql {call foo（：out nstr）}; System.out.println（“结果是：”+ nstr）; //或者，显式：System.out.println（“Result is：”+ nstr.toString（））; ...
</pre></li>
                        <li>
                           <p><code class="codeph">NString</code>作为<code class="codeph">Result Set</code>列</p>
                           <p>此示例将<code class="codeph">NString</code>类型用于迭代器列。这种用法是多余的，因为底层网络协议隐含地支持国家语言字符，但是无害。此示例还显示了一个<code class="codeph">String</code>方法<code class="codeph">substring()</code> ，该方法被转移到<code class="codeph">NString</code> 。
                           </p><pre class="oac_no_warn" dir="ltr">import oracle.sql。NString; import oracle.sql。NCLOB; ...#sql iterator NIter（NString title，NCLOB文章）;尼特; #sql nit = {SELECT article，title FROM page_table}; while（nit.next（））{System.out.println（“&lt;TITLE&gt;”+ nit.title（）+“&lt;/ TITLE&gt;”）; ...nit.article（）。substring（0,1000）; ...}</pre></li>
                     </ul>
                     <div class="infoboxnote" id="GUID-F5BA9A5C-E700-48F6-BEDC-0164574C0077__GUID-EFF353BC-AED4-428E-92F6-9001A0D2D051">
                        <p class="notep1">注意：</p>
                        <p>对于前面的示例，使用<code class="codeph">NCHAR</code>类型而不是<code class="codeph">NString</code>类型需要进行以下更改：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用适当的<code class="codeph">NCHAR</code>构造函数。<code class="codeph">NCHAR</code>构造函数镜像<code class="codeph">CHAR</code>构造函数，如下所示：</p><pre class="oac_no_warn" dir="ltr">NCHAR（String str，oracle.sql。CharacterSet charset）</pre></li>
                           <li>
                              <p>虽然您可以选择使用<code class="codeph">toString()</code>或<code class="codeph">getString()</code>从<code class="codeph">NString</code>实例检索基础<code class="codeph">String</code>实例，但对于<code class="codeph">NCHAR</code>实例，您必须使用<code class="codeph">getString()</code>方法。使用<code class="codeph">NString</code>类型时， <code class="codeph">toString()</code>方法将自动用于字符串连接。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="JSQLJ737"></a><a id="JSQLJ738"></a><a id="JSQLJ739"></a><a id="JSQLJ736"></a><div class="sect3"><a id="GUID-6E2C17A1-CEE6-4BE7-B7AA-6EE2A9FC3BC3" name="GUID-6E2C17A1-CEE6-4BE7-B7AA-6EE2A9FC3BC3"></a><h4 id="JSQLJ-GUID-6E2C17A1-CEE6-4BE7-B7AA-6EE2A9FC3BC3" class="sect4">用于全局化支持的SQLJ之外的操作</h4>
                  <div>
                     <p>本节讨论在SQLJ之外操作Oracle全球化支持配置的方法。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-6E2C17A1-CEE6-4BE7-B7AA-6EE2A9FC3BC3__GUID-20756741-CC60-4117-8883-CB0BFE7FAB28">在应用程序运行时设置编码和区域设置</p>
                     </div>
                     <!-- class="section" -->
                     <p>与运行任何Java应用程序的任何最终用户一样，运行SQLJ应用程序的用户可以在调用JVM来运行应用程序时直接指定JVM属性，例如<code class="codeph">file.encoding</code>和<code class="codeph">user.language</code> 。这将确定应用程序执行时用于消息输出的编码和语言环境。
                     </p>
                     <p>他们可以在以下示例中完成此操作：</p><pre class="oac_no_warn" dir="ltr">％java -Dfile.encoding = SJIS -Duser.language = ja Foo</pre><p>这将使用<code class="codeph">SJIS</code>编码和日语语言环境。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-6E2C17A1-CEE6-4BE7-B7AA-6EE2A9FC3BC3__GUID-DE10AD9B-F7C8-4F0C-97CB-D27B5148DCE3">使用API确定Java属性</p>
                     </div>
                     <!-- class="section" -->
                     <p>在Java代码中，您可以使用<code class="codeph">java.lang.确定Java属性的值<code class="codeph">java.lang.System.getProperty()</code>方法，指定适当的属性。例如：</p><pre class="oac_no_warn" dir="ltr">public class Settings {public static void main（String [] args）{System.out.println（“Encoding：”+ System.getProperty（“file.encoding”）+“，Language：”+ System.getProperty（“user。语言”））; }}</pre><p>您可以编译它并将其作为独立实用程序运行。</p>
                     <p>还有一个<code class="codeph">getProperties()</code>方法返回所有属性的值，但如果您尝试在服务器中运行的代码中使用它，则会引发安全性异常。
                     </p>
                     <div class="section" id="GUID-6E2C17A1-CEE6-4BE7-B7AA-6EE2A9FC3BC3__I1006518">
                        <p class="subhead3" id="GUID-6E2C17A1-CEE6-4BE7-B7AA-6EE2A9FC3BC3__GUID-AA921057-67A7-4DF5-9C3F-020081549102">使用native2ascii进行源文件编码</p>
                     </div>
                     <!-- class="section" -->
                     <p>如果您使用的是Sun Microsystems JDK，则可以使用SQLJ为源文件执行字符编码。您可以使用<code class="codeph">native2ascii</code>实用程序将具有本机编码的源转换为具有Unicode转义序列的7位ASCII源。
                     </p>
                     <div class="infoboxnote" id="GUID-6E2C17A1-CEE6-4BE7-B7AA-6EE2A9FC3BC3__GUID-000A9D95-130C-45EE-862F-25C0C8C93B12">
                        <p class="notep1">注意：</p>
                        <p>要使用SQLJ翻译<code class="codeph">native2ascii</code>创建的源，请确保调用SQLJ的JVM具有支持7位ASCII超集的<code class="codeph">file.encoding</code>设置。 EBCDIC或Unicode编码的设置不是这种情况。
                        </p>
                     </div>
                     <p>运行<code class="codeph">native2ascii</code>如下：</p><pre class="oac_no_warn" dir="ltr">％native2ascii &lt; <span class="italic">options</span> &gt; &lt; <span class="italic">inputfile</span> &gt; &lt; <span class="italic">outputfile</span> &gt;</pre><p>如果省略输入文件或输出文件，则使用标准输入或标准输出。支持两个选项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">-reverse</code> （反转转换。从Latin-1或Unicode转换为本机编码）</p>
                        </li>
                        <li>
                           <p><span class="italic"><code class="codeph">encoding</code></span> <code class="codeph">-encoding &lt;</code> <span class="italic"><code class="codeph">encoding</code></span> <code class="codeph">&gt;</code></p>
                        </li>
                     </ul>
                     <p>例如：</p><pre class="oac_no_warn" dir="ltr">％native2ascii -encoding SJIS Foo.sqlj Temp.sqlj</pre><p>有关更多信息，请访问以下Web站点：</p>
                     <p>https://docs.oracle.com/javase/8/docs/technotes/tools/windows/native2ascii.html</p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
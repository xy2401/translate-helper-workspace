<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>JDBC编码技巧</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="JDBC Developer&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="JDBC Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="jdbc-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-13T13:20:37-08:00"></meta>
      <meta name="dcterms.title" content="JDBC Developer&#39;s Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96471-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="Oracle-RAC-FAN-API.html" title="Previous" type="text/html"></link>
      <link rel="next" href="JDBC-error-messages.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="JJDBC"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="Oracle-RAC-FAN-API.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="JDBC-error-messages.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">JDBC开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="appendixes.html" property="item" typeof="WebPage"><span property="name">附录</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">JDBC编码技巧</li>
            </ol>
            <a id="GUID-EE479007-D105-4F82-8D51-000CBBD4BC77" name="GUID-EE479007-D105-4F82-8D51-000CBBD4BC77"></a><a id="JJDBC28948"></a>
            
            <h2 id="JJDBC-GUID-EE479007-D105-4F82-8D51-000CBBD4BC77" class="sect2"><span class="enumeration_chapter">C</span> JDBC编码技巧</h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='JDBC-coding-tips'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]u003e </style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>此页面上的脚本内容仅用于导航目的，不会以任何方式更改内容。</p>
            </noscript>
            <div>
               <div class="section">
                  <p>本附录描述了优化Java数据库连接（JDBC）应用程序的方法。它包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="JDBC-coding-tips.html#GUID-18F42BF6-AACA-46A7-B326-F6F5F1742763">JDBC和多线程</a></p>
                     </li>
                     <li>
                        <p><a href="JDBC-coding-tips.html#GUID-3C6C396A-A540-4760-92AA-D580221FF217">JDBC程序的性能优化</a></p>
                     </li>
                     <li>
                        <p><a href="JDBC-coding-tips.html#GUID-CB52B83B-3E87-454E-8DF0-96178DE9EEDC">JDBC中的事务隔离级别和访问模式</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div><a id="JJDBC28949"></a><div class="props_rev_3"><a id="GUID-18F42BF6-AACA-46A7-B326-F6F5F1742763" name="GUID-18F42BF6-AACA-46A7-B326-F6F5F1742763"></a><h3 id="JJDBC-GUID-18F42BF6-AACA-46A7-B326-F6F5F1742763" class="sect3"><span class="enumeration_section">C.1</span> JDBC和多线程</h3>
               <div>
                  <p>Oracle JDBC驱动程序为使用Java多线程的应用程序提供全面支持，并对其进行高度优化。对连接的受控串行访问（例如连接缓存提供的连接）是必要和鼓励的。但是，Oracle强烈反对在多个线程之间共享数据库连接。避免允许多个线程同时访问连接。如果多个线程必须共享连接，请使用规范的开始使用/结束使用协议。</p>
                  <p>在处理多线程应用程序时，请牢记以下几点：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>将<code class="codeph">Connection</code>对象用作局部变量。
                        </p>
                     </li>
                     <li>
                        <p>在退出方法之前关闭<code class="codeph">finally</code>块中的连接。例如：</p><pre class="oac_no_warn" dir="ltr">连接conn = null;尝试{...终于{if（conn！）= null）conn.close（）; }</pre></li>
                     <li>
                        <p>不要在线程之间共享<code class="codeph">Connection</code>对象。
                        </p>
                     </li>
                     <li>
                        <p>永远不要在JDBC对象上同步，因为它是由驱动程序在内部完成的。</p>
                     </li>
                     <li>
                        <p>使用<code class="codeph">Statement.setQueryTimeout</code>方法设置执行查询的时间，而不是从其他线程取消长时间运行的查询。
                        </p>
                     </li>
                     <li>
                        <p>将<code class="codeph">Statement.cancel</code>方法用于SQL操作，如<code class="codeph">SELECT</code> ， <code class="codeph">UPDATE</code>或<code class="codeph">DELETE</code> 。</p>
                     </li>
                     <li>
                        <p>将<code class="codeph">Connection.cancel</code>方法用于SQL操作，如<code class="codeph">COMMIT</code> ， <code class="codeph">ROLLBACK</code>等。
                        </p>
                     </li>
                     <li>
                        <p>不要使用<code class="codeph">Thread.interrupt</code>方法。
                        </p>
                     </li>
                  </ul>
               </div>
            </div><a id="JJDBC28950"></a><div class="props_rev_3"><a id="GUID-3C6C396A-A540-4760-92AA-D580221FF217" name="GUID-3C6C396A-A540-4760-92AA-D580221FF217"></a><h3 id="JJDBC-GUID-3C6C396A-A540-4760-92AA-D580221FF217" class="sect3"><span class="enumeration_section">C.2</span> JDBC程序的性能优化</h3>
               <div>
                  <div class="section">
                     <p>您可以<a id="d94980e153" class="indexterm-anchor"></a><a id="d94980e155" class="indexterm-anchor"></a>使用以下任何功能显着提高JDBC程序的性能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="JDBC-coding-tips.html#GUID-0E566AD1-2283-40A0-AD28-0EFBEF99FC9B">禁用自动提交模式</a></p>
                        </li>
                        <li>
                           <p><a href="JDBC-coding-tips.html#GUID-B83114F0-8B95-473C-8018-5083C777B5A3">标准提取大小和Oracle行预取</a></p>
                        </li>
                        <li>
                           <p><a href="JDBC-coding-tips.html#GUID-83AB4D89-F617-4480-BD44-55A8BA50F689">关于设置会话数据单元大小</a></p>
                        </li>
                        <li>
                           <p><a href="JDBC-coding-tips.html#GUID-FF975EC3-328E-4956-92C2-BE9F8C35571D">JDBC更新批处理</a></p>
                        </li>
                        <li>
                           <p><a href="JDBC-coding-tips.html#GUID-5A32FAF3-3B57-4CA1-9EC0-78458EDB4CBD">声明缓存</a></p>
                        </li>
                        <li>
                           <p><a href="JDBC-coding-tips.html#GUID-A9277F8F-0CB0-4DAF-88D8-921DC5CE00F0">内置SQL和Java类型之间的映射</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="JJDBC28952"></a><a id="JJDBC28951"></a><div class="props_rev_3"><a id="GUID-0E566AD1-2283-40A0-AD28-0EFBEF99FC9B" name="GUID-0E566AD1-2283-40A0-AD28-0EFBEF99FC9B"></a><h4 id="JJDBC-GUID-0E566AD1-2283-40A0-AD28-0EFBEF99FC9B" class="sect4"><span class="enumeration_section">C.2.1</span>禁用自动提交模式</h4>
                  <div>
                     <div class="section">
                        <p>自动提交模式<a id="d94980e215" class="indexterm-anchor"></a>指示数据库是否在每次SQL操作后发出自动<code class="codeph">COMMIT</code>操作。例如，如果您使用不同的绑定变量重复相同的语句，则处于自动提交模式在时间和处理工作方面可能是昂贵的。
                        </p>
                        <p>默认情况下，新连接对象处于自动提交模式。但是，您可以使用连接对象的<code class="codeph">setAutoCommit</code>方法（ <code class="codeph">java.sql.禁用自动提交模式<code class="codeph">java.sql.Conection</code>或<code class="codeph">oracle.jdbc.OracleConnection</code> 。
                        </p>
                        <p>在自动提交模式下， <code class="codeph">COMMIT</code>操作在语句完成或下一次执行时发生，以先到者为准。在声明返回的情况下<a id="d94980e239" class="indexterm-anchor"></a><a id="d94980e243" class="indexterm-anchor"></a> <code class="codeph">ResultSet</code>对象，语句在检索到结果集的最后一行或结果集已关闭时完成。在更复杂的情况下，单个语句可以返回多个结果以及输出参数值。这里，在检索到所有结果和输出参数值时发生<code class="codeph">COMMIT</code> 。
                        </p>
                        <p>如果使用<code class="codeph">setAutoCommit(false)</code>调用禁用自动提交模式，则必须使用连接对象的<code class="codeph">commit</code>或<code class="codeph">rollback</code>方法手动提交或回滚操作组。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0E566AD1-2283-40A0-AD28-0EFBEF99FC9B__GUID-386E6072-C08B-48AB-B758-DF5E4D830A83">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下示例说明了加载驱动程序和连接到数据库。由于默认情况下新连接处于自动提交模式，因此该示例显示了如何禁用自动提交。在示例中， <code class="codeph">conn</code>表示<code class="codeph">Connection</code>对象， <code class="codeph">stmt</code>表示<code class="codeph">Statement</code>对象。
                        </p><pre class="oac_no_warn" dir="ltr">//连接到数据库//您可以在连接URL中的@符号后面添加数据库主机名。 OracleDataSource ods = new OracleDataSource（）; ods.setURL（ “JDBC：预言：OCI：@”）; ods.setUser（ “HR”）; ods.setPassword（ “HR”）; Connection conn = ods.getConnection（）; //当自动提交关闭时，它会更快conn.setAutoCommit（false）; //创建一个Statement语句stmt = conn.createStatement（）; ...
</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDBC28953"></a><div class="props_rev_3"><a id="GUID-B83114F0-8B95-473C-8018-5083C777B5A3" name="GUID-B83114F0-8B95-473C-8018-5083C777B5A3"></a><h4 id="JJDBC-GUID-B83114F0-8B95-473C-8018-5083C777B5A3" class="sect4"><span class="enumeration_section">C.2.2</span>标准提取大小和Oracle行预取</h4>
                  <div>
                     <div class="section">
                        <p>Oracle JDBC连接和语句对象允许您在查询期间填充结果集时指定每次访问数据库时预取到客户端的行数。您可以在连接对象中设置一个值，该值影响通过该连接生成的每个语句，并且您可以在任何特定语句对象中覆盖该值。连接对象中的默认值为10。将数据预取到客户端可减少到服务器的往返次数。</p>
                        <p>类似地，并且具有更大的灵活性，JDBC 2.0使您能够指定每次行程要获取的行数，包括语句对象（影响后续查询）和结果集对象（影响行重新获取）。默认情况下，结果集使用生成它的语句对象的值。如果未设置JDBC 2.0提取大小，则默认使用Oracle连接行预取值。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="resultset.html#GUID-BD27B43E-525F-44C4-973F-18D2BB8BA007">行获取大小</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="JJDBC29168"></a><div class="props_rev_3"><a id="GUID-83AB4D89-F617-4480-BD44-55A8BA50F689" name="GUID-83AB4D89-F617-4480-BD44-55A8BA50F689"></a><h4 id="JJDBC-GUID-83AB4D89-F617-4480-BD44-55A8BA50F689" class="sect4"><span class="enumeration_section">C.2.3</span>关于设置会话数据单元大小</h4>
                  <div>
                     <div class="section">
                        <p>会话数据单元（SDU）是Oracle Net在通过网络传输数据之前用于放置数据的缓冲区。Oracle Net在请求完成或填满时将数据发送到缓冲区。</p>
                        <p>您可以配置SDU并获得以下好处，其中包括：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>减少在整个网络中传输SQL查询和结果所需的时间</p>
                           </li>
                           <li>
                              <p>传输更大的数据块</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-83AB4D89-F617-4480-BD44-55A8BA50F689__GUID-E6C89DB3-2D55-42DC-8DCA-67757CB6079E">
                           <p class="notep1">注意：</p>
                           <p>如果设置更大的SDU大小，则客户端和服务器进程的占用空间会增加。</p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-83AB4D89-F617-4480-BD44-55A8BA50F689__GUID-B31FD88D-081B-4ADA-A8DC-738D125BDD8F">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../netag/optimizing-performance.html#NETAG014" target="_blank"><span class="italic">Oracle数据库网络服务管理员指南</span></a></p>
                        </div>
                        <p>本节介绍以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="JDBC-coding-tips.html#GUID-728D92F7-E219-4BC0-A42E-FD16132B8A7A">关于设置数据库服务器的SDU大小</a></p>
                           </li>
                           <li>
                              <p><a href="JDBC-coding-tips.html#GUID-5BD94D52-91A8-486F-A3AA-E50487C0EA03">关于设置JDBC瘦客户机的SDU大小</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="JJDBC29169"></a><div class="props_rev_3"><a id="GUID-728D92F7-E219-4BC0-A42E-FD16132B8A7A" name="GUID-728D92F7-E219-4BC0-A42E-FD16132B8A7A"></a><h5 id="JJDBC-GUID-728D92F7-E219-4BC0-A42E-FD16132B8A7A" class="sect5"><span class="enumeration_section">C.2.3.1</span>关于设置数据库服务器的SDU大小</h5>
                     <div>
                        <div class="section">
                           <p>要设置数据库服务器的SDU大小，请在<code class="codeph">sqlnet.ora</code>文件中配置<code class="codeph">DEFAULT_SDU_SIZE</code>参数。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDBC29171"></a><div class="props_rev_3"><a id="GUID-AD710EC4-7BA1-4BF5-A710-340E16997BFD" name="GUID-AD710EC4-7BA1-4BF5-A710-340E16997BFD"></a><h5 id="JJDBC-GUID-AD710EC4-7BA1-4BF5-A710-340E16997BFD" class="sect5"><span class="enumeration_section">C.2.3.2</span>关于设置JDBC OCI客户端的SDU大小</h5>
                     <div>
                        <div class="section">
                           <p>JDBC OCI客户端使用Oracle Net层。因此，您可以通过在<code class="codeph">sqlnet.ora</code>文件中配置<code class="codeph">DEFAULT_SDU_SIZE</code>参数来设置JDBC OCI客户端的SDU大小。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="JJDBC29170"></a><div class="props_rev_3"><a id="GUID-5BD94D52-91A8-486F-A3AA-E50487C0EA03" name="GUID-5BD94D52-91A8-486F-A3AA-E50487C0EA03"></a><h5 id="JJDBC-GUID-5BD94D52-91A8-486F-A3AA-E50487C0EA03" class="sect5"><span class="enumeration_section">C.2.3.3</span>关于设置JDBC瘦客户机的SDU大小</h5>
                     <div>
                        <div class="section">
                           <p>您可以通过在特定连接描述符的<code class="codeph">DESCRIPTION</code>参数中指定JDBC瘦客户机来设置它的SDU大小。
                           </p><pre class="oac_no_warn" dir="ltr">sales.example.com =（DESCRIPTION =（SDU = 11280）（ADDRESS =（PROTOCOL = tcp）（HOST = sales-server）（PORT = 5221））（CONNECT_DATA =（SERVICE_NAME = sales.example.com）））</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="JJDBC28954"></a><div class="props_rev_3"><a id="GUID-FF975EC3-328E-4956-92C2-BE9F8C35571D" name="GUID-FF975EC3-328E-4956-92C2-BE9F8C35571D"></a><h4 id="JJDBC-GUID-FF975EC3-328E-4956-92C2-BE9F8C35571D" class="sect4"><span class="enumeration_section">C.2.4</span> JDBC更新批处理</h4>
                  <div>
                     <div class="section">
                        <p>Oracle JDBC驱动程序使您能够在客户端累积<code class="codeph">INSERT</code>准备语句的<code class="codeph">INSERT</code> ， <code class="codeph">DELETE</code>和<code class="codeph">UPDATE</code>操作，并将它们批量发送到服务器。此功能可减少到服务器的往返。
                        </p>
                        <div class="infoboxnote" id="GUID-FF975EC3-328E-4956-92C2-BE9F8C35571D__GUID-E58F8455-57E3-49AC-BD84-78604340A824">
                           <p class="notep1">注意：</p>
                           <p>Oracle建议将批处理大小保持在100或更小的范围内。较大的批次提供很少或没有性能改进，并且实际上可能由于处理大批量所需的客户端资源而降低性能。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JJDBC28955"></a><div class="props_rev_3"><a id="GUID-5A32FAF3-3B57-4CA1-9EC0-78458EDB4CBD" name="GUID-5A32FAF3-3B57-4CA1-9EC0-78458EDB4CBD"></a><h4 id="JJDBC-GUID-5A32FAF3-3B57-4CA1-9EC0-78458EDB4CBD" class="sect4"><span class="enumeration_section">C.2.5</span>语句缓存</h4>
                  <div>
                     <div class="section">
                        <p>语句缓存通过缓存重复使用的可执行语句（例如循环或重复调用的方法）来提高性能。应用程序使用语句高速缓存来缓存与特定物理连接关联的语句。启用Statement缓存时，在调用<code class="codeph">close</code>方法时会缓存Statement对象。由于每个物理连接都有自己的缓存，因此如果为多个物理连接启用Statement缓存，则可以存在多个缓存。
                        </p>
                        <div class="infoboxnote" id="GUID-5A32FAF3-3B57-4CA1-9EC0-78458EDB4CBD__GUID-E441ABC1-ACEE-4607-8DFC-ACD14DBEF978">
                           <p class="notep1">注意：</p>
                           <p>Oracle JDBC驱动程序已经过优化，可与Oracle Statement缓存一起使用。Oracle强烈建议您使用Oracle语句缓存（隐式或显式）。</p>
                        </div>
                        <p>在连接高速缓存上启用语句高速缓存时，逻辑连接将受益于在基础物理连接上启用的语句高速缓存。如果您尝试在连接缓存所持有的逻辑连接上启用语句缓存，则会引发异常。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="statement-and-resultset-caching.html#GUID-F3F4BB63-356A-4F65-81B1-5C84FC35A16D">语句和结果集缓存</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="JJDBC28957"></a><a id="JJDBC28956"></a><div class="props_rev_3"><a id="GUID-A9277F8F-0CB0-4DAF-88D8-921DC5CE00F0" name="GUID-A9277F8F-0CB0-4DAF-88D8-921DC5CE00F0"></a><h4 id="JJDBC-GUID-A9277F8F-0CB0-4DAF-88D8-921DC5CE00F0" class="sect4"><span class="enumeration_section">C.2.6</span>内置SQL和Java类型之间的映射</h4>
                  <div>
                     <div class="section">
                        <p>SQL内置类型是具有系统定义名称的类型，例如<code class="codeph">NUMBER</code>和<code class="codeph">CHAR</code> ，而不是具有用户定义名称的Oracle对象，varray和嵌套表类型。在访问内置SQL类型数据的JDBC程序中，所有类型转换都是明确的，因为程序上下文确定了要转换SQL数据的Java类型。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-A9277F8F-0CB0-4DAF-88D8-921DC5CE00F0__GUID-88E5B547-B34E-46D2-A4E8-B79644F5D7B3">
                        <p class="titleintable">表C-1 SQL数据类型到表示SQL数据类型的Java类的映射</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="将SQL数据类型映射到表示SQL数据类型的Java类" width="100%" border="1" summary="table" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d94980e592">SQL数据类型</th>
                                 <th align="left" valign="bottom" width="69%" id="d94980e595">ORACLE Mapping  - 表示SQL数据类型的Java类</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d94980e602" headers="d94980e592 ">
                                    <p> <code class="codeph">CHAR</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d94980e602 d94980e595 ">
                                    <p><code class="codeph">oracle.sql。CHAR</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d94980e612" headers="d94980e592 ">
                                    <p> <code class="codeph">VARCHAR2</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d94980e612 d94980e595 ">
                                    <p><code class="codeph">oracle.sql。CHAR</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d94980e622" headers="d94980e592 ">
                                    <p> <code class="codeph">日期</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d94980e622 d94980e595 ">
                                    <p><code class="codeph">oracle.sql。日期</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d94980e632" headers="d94980e592 ">
                                    <p> <code class="codeph">DECIMAL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d94980e632 d94980e595 ">
                                    <p><code class="codeph">oracle.sql。数</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d94980e642" headers="d94980e592 ">
                                    <p> <code class="codeph">双精度</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d94980e642 d94980e595 ">
                                    <p><code class="codeph">oracle.sql。数</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d94980e652" headers="d94980e592 ">
                                    <p> <code class="codeph">浮动</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d94980e652 d94980e595 ">
                                    <p><code class="codeph">oracle.sql。数</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d94980e662" headers="d94980e592 ">
                                    <p> <code class="codeph">整数</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d94980e662 d94980e595 ">
                                    <p><code class="codeph">oracle.sql。数</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d94980e672" headers="d94980e592 ">
                                    <p> <code class="codeph">真实</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d94980e672 d94980e595 ">
                                    <p><code class="codeph">oracle.sql。数</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d94980e682" headers="d94980e592 ">
                                    <p> <code class="codeph">生的</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d94980e682 d94980e595 ">
                                    <p><code class="codeph">oracle.sql。生的</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d94980e692" headers="d94980e592 ">
                                    <p> <code class="codeph">LONG RAW</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d94980e692 d94980e595 ">
                                    <p><code class="codeph">oracle.sql。生的</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d94980e702" headers="d94980e592 ">
                                    <p> <code class="codeph">REF CURSOR</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d94980e702 d94980e595 ">
                                    <p><code class="codeph">java.sql中。结果集</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d94980e713" headers="d94980e592 ">
                                    <p> <code class="codeph">CLOB LOCATOR</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d94980e713 d94980e595 ">
                                    <p><code class="codeph">oracle.jdbc。OracleClob</code> <a id="fn_1" name="fn_1" href="#fn_1" class="" starting="" from="" oracle="" database="" 12c="" release="" 1="" (12.1),="" the="" oracle.sql.clob="" is="" deprecated="" and="" replaced="" with="" oracle.jdbc.oracleclob="" interface=")" ="" onclick="footdisplay(1, "><sup>Foot 1</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d94980e735" headers="d94980e592 ">
                                    <p> <code class="codeph">BLOB LOCATOR</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d94980e735 d94980e595 ">
                                    <p><code class="codeph">oracle.jdbc。OracleBlob</code> <a id="fn_2" name="fn_2" href="#fn_2" class="" starting="" from="" oracle="" database="" 12c="" release="" 1="" (12.1),="" the="" oracle.sql.blob="" is="" deprecated="" and="" replaced="" with="" oracle.jdbc.oracleblob="" interface=")" ="" onclick="footdisplay(2, "><sup>Foot 2</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d94980e757" headers="d94980e592 ">
                                    <p> <code class="codeph">BFILE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d94980e757 d94980e595 ">
                                    <p><code class="codeph">oracle.sql。BFILE</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d94980e767" headers="d94980e592 ">
                                    <p>嵌套表</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d94980e767 d94980e595 ">
                                    <p><code class="codeph">oracle.jdbc。OracleArray</code> <a id="fn_3" name="fn_3" href="#fn_3" class="" starting="" from="" oracle="" database="" 12c="" release="" 1="" (12.1),="" the="" oracle.sql.array="" is="" deprecated="" and="" replaced="" with="" oracle.jdbc.oraclearray="" interface=")" ="" onclick="footdisplay(3, "><sup>Foot 3</sup></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d94980e787" headers="d94980e592 ">
                                    <p>VARRAY</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d94980e787 d94980e595 ">
                                    <p><code class="codeph">oracle.jdbc。OracleArray</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d94980e795" headers="d94980e592 ">
                                    <p>SQL对象值</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d94980e795 d94980e595 ">
                                    <p>如果类型映射中没有对象值的条目：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><code class="codeph">oracle.jdbc。OracleStruct</code> <a id="fn_4" name="fn_4" href="#fn_4" class="" starting="" from="" oracle="" database="" 12c="" release="" 1="" (12.1),="" the="" oracle.sql.struct="" is="" deprecated="" and="" replaced="" with="" oracle.jdbc.oraclestruct="" interface=")" ="" onclick="footdisplay(4, "><sup>Foot 4</sup></a></p>
                                       </li>
                                    </ul>
                                    <p>如果类型映射中有对象值的条目：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>定制的Java类</p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d94980e825" headers="d94980e592 ">
                                    <p>REF到SQL对象类型</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d94980e825 d94980e595 ">
                                    <p>实现<code class="codeph">oracle.sql.类<code class="codeph">oracle.sql.SQLRef</code> ，通常通过实现<code class="codeph">oracle.jdbc.OracleRef</code> <a id="fn_5" name="fn_5" href="#fn_5" class="" starting="" from="" oracle="" database="" 12c="" release="" 1="" (12.1),="" the="" oracle.sql.ref="" is="" deprecated="" and="" replaced="" with="" oracle.jdbc.oracleref="" interface=")" ="" onclick="footdisplay(5, "><sup>Foot 5</sup></a></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p class="tablefootnote"><sup class="tablefootnote">脚注1</sup></p><p>从Oracle Database 12 <span class="italic">c</span>第1版（12.1）开始， <code class="codeph">oracle.sql.不推荐使用CLOB</code>类，并将其替换为<code class="codeph">oracle.jdbc.OracleClob</code>接口。
                        </p>
                     <p></p>
                     <p class="tablefootnote"><sup class="tablefootnote">脚注2</sup></p><p>从Oracle Database 12 <span class="italic">c</span>第1版（12.1）开始， <code class="codeph">oracle.sql.不推荐使用BLOB</code>类，并将其替换为<code class="codeph">oracle.jdbc.OracleBlob</code>接口。
                        </p>
                     <p></p>
                     <p class="tablefootnote"><sup class="tablefootnote">脚注3</sup></p><p>从Oracle Database 12 <span class="italic">c</span>第1版（12.1）开始， <code class="codeph">oracle.sql.不推荐使用ARRAY</code>类，并将其替换为<code class="codeph">oracle.jdbc.OracleArray</code>接口。
                        </p>
                     <p></p>
                     <p class="tablefootnote"><sup class="tablefootnote">脚注4</sup></p><p>从Oracle Database 12 <span class="italic">c</span>第1版（12.1）开始， <code class="codeph">oracle.sql.不推荐使用STRUCT</code>类，并将其替换为<code class="codeph">oracle.jdbc.OracleStruct</code>接口。
                        </p>
                     <p></p>
                     <p class="tablefootnote"><sup class="tablefootnote">脚注5</sup></p><p>从Oracle Database 12 <span class="italic">c</span>第1版（12.1）开始， <code class="codeph">oracle.sql.不推荐使用REF</code>类，并将其替换为<code class="codeph">oracle.jdbc.OracleRef</code>接口。
                        </p>
                     <p></p>
                     <div class="section">
                        <p>访问数字数据的最有效方法是使用原始Java类型，如<code class="codeph">int</code> ， <code class="codeph">float</code> ， <code class="codeph">long</code>和<code class="codeph">double</code> 。但是，这些类型的值范围与SQL <code class="codeph">NUMBER</code>数据类型的值范围不完全匹配。结果，可能会有一些信息丢失。如果在整个值范围内需要绝对精度，则使用<code class="codeph">BigDecimal</code>类型。
                        </p>
                        <p>所有字符数据都将转换为Java的UCS2字符集。访问字符数据的最有效方法是<code class="codeph">java.lang.String</code> 。在最坏的情况下，当数据库字符集中的两个或多个字符映射到单个UCS2字符时，这可能导致信息丢失。从Oracle Database <span class="italic">11g开始</span> ，字符集中的所有字符都映射到UCS2字符集中的字符。但是，某些字符会映射到代理对。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="JJDBC28958"></a><div class="props_rev_3"><a id="GUID-CB52B83B-3E87-454E-8DF0-96178DE9EEDC" name="GUID-CB52B83B-3E87-454E-8DF0-96178DE9EEDC"></a><h3 id="JJDBC-GUID-CB52B83B-3E87-454E-8DF0-96178DE9EEDC" class="sect3"><span class="enumeration_section">C.3</span> JDBC中的事务隔离级别和访问模式</h3>
               <div>
                  <div class="section">
                     <p><a id="d94980e903" class="indexterm-anchor"></a><a id="d94980e909" class="indexterm-anchor"></a> Oracle JDBC驱动程序支持只读连接，但Oracle服务器不支持只读连接。
                     </p>
                     <p>对于事务，Oracle服务器仅支持<code class="codeph">TRANSACTION_READ_COMMITTED</code>和<code class="codeph">TRANSACTION_SERIALIZABLE</code>事务隔离级别。默认值为<code class="codeph">TRANSACTION_READ_COMMITTED</code> 。使用<code class="codeph">oracle.jdbc.的以下方法<code class="codeph">oracle.jdbc.获取和设置级别的OracleConnection</code>接口：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">getTransactionIsolation</code> ：获取连接的当前事务隔离级别。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">setTransactionIsolation</code> ：使用<code class="codeph">TRANSACTION_READ_COMMITTED</code>或<code class="codeph">TRANSACTION_SERIALIZABLE</code>值更改事务隔离级别。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
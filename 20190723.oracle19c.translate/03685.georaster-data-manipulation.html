<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter describes how to perform several important GeoRaster data query and manipulation operations."></meta>
      <meta name="description" content="This chapter describes how to perform several important GeoRaster data query and manipulation operations."></meta>
      <title>GeoRaster数据查询和操作</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="GeoRaster Developer&#39;s Guide "></meta>
      <meta property="og:description" content="This chapter describes how to perform several important GeoRaster data query and manipulation operations."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="GeoRaster Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="spatial-and-graph-georaster-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-14T11:48:45-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E94793-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="georaster-database-creation-management.html" title="Previous" type="text/html"></link>
      <link rel="next" href="raster-algebra-and-analytics.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Spatial and Graph GeoRaster Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="GEORS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="georaster-database-creation-management.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="raster-algebra-and-analytics.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">GeoRaster开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">GeoRaster数据查询和操作</li>
            </ol>
            <a id="GUID-C56DB84D-5F94-432A-A9BB-E31CF4D1B7AA" name="GUID-C56DB84D-5F94-432A-A9BB-E31CF4D1B7AA"></a>
            
            <h2 id="GEORS-GUID-C56DB84D-5F94-432A-A9BB-E31CF4D1B7AA" class="sect2"><span class="enumeration_chapter">4</span> GeoRaster数据查询和操作</h2>
         </header>
         <div class="ind">
            <div>
               <div><span>本章介绍如何执行几个重要的GeoRaster数据查询和操作操作。</span> 典型的GeoRaster数据查询和操作涉及所描述的大多数或所有操作。
               </div>
               <p>另请参阅<a href="georaster-database-creation-management.html#GUID-92D80CF0-F503-40BE-B1E6-D06A1DF033B6" title="本章介绍如何执行重要的GeoRaster数据库创建和管理操作。">GeoRaster数据库创建和管理中的操作</a> 。
               </p>
               <p>本书的其他章节涵盖了高级主题（ <a href="raster-algebra-and-analytics.html#GUID-C75744C9-FA04-4391-96F2-59EF2EA212FF" title="本章介绍了栅格代数语言（PL / SQL和代数表达式）和相关的栅格操作，包括条件查询，基于单元格的更新或编辑，数学运算，分类，动态统计分析，逻辑运算及其制图建模中的应用。">光栅代数和分析</a>以及<a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a> ），并提供了有关GeoRaster PL / SQL包的详细参考信息（ <a href="SDO_GEOR-reference.html#GUID-587A19B6-40FF-4F1C-AC13-556891070C30" title="SDO_GEOR包中包含用于创建，修改和检索有关GeoRaster对象的信息的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR包参考</a> ， <a href="SDO_GEOR_ADMIN-reference.html#GUID-6F9B00F3-56C1-4AF9-82A6-DFBAB1BB489E" title="SDO_GEOR_ADMIN包中包含与GeoRaster相关的管理操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR_ADMIN包参考</a> ， <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-92406947-E079-487D-B0D0-3342ECC23E34" title="SDO_GEOR_AGGR包中包含用于在GeoRaster对象上执行高级大规模镶嵌，追加和虚拟镶嵌操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR_AGGR包参考</a> ， <a href="sdo-geor-ra-ref.html#GUID-7E8EC42B-D663-49EF-B6D8-158A0EC10333" title="SDO_GEOR_RA包中包含用于与GeoRaster相关的栅格代数和分析操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR_RA包参考</a> ，以及<a href="SDO_GEOR_UTL-reference.html#GUID-080B4F44-F59D-4E2A-AA97-FF209C69C4D2" title="SDO_GEOR_UTL包中包含与GeoRaster相关的实用程序操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR_UTL包参考</a> ）。
               </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="georaster-data-manipulation.html#GUID-13578486-979A-410B-94BB-863DBB4AA7E2">查询和搜索GeoRaster对象</a><br></li>
                  <li class="ulchildlink"><a href="georaster-data-manipulation.html#GUID-C27E5446-4222-447C-9661-19A5AA8CE9FC">更改和优化光栅存储</a><br></li>
                  <li class="ulchildlink"><a href="georaster-data-manipulation.html#GUID-5D4085E6-5A61-4AC1-B386-C7E1ABA63174">复制GeoRaster对象</a><br></li>
                  <li class="ulchildlink"><a href="georaster-data-manipulation.html#GUID-01A627A0-0EC5-4FAE-AA6A-950116E2FBB8">使用多边形剪切子集GeoRaster对象</a><br></li>
                  <li class="ulchildlink"><a href="georaster-data-manipulation.html#GUID-DB762BC3-88BA-4716-9F0C-A4DC4AEC624F">查询和更新GeoRaster元数据</a><br></li>
                  <li class="ulchildlink"><a href="georaster-data-manipulation.html#GUID-D78B30EA-E592-4D34-94AC-AB2B1435D60E">查询和更新GeoRaster单元数据</a><br></li>
                  <li class="ulchildlink"><a href="georaster-data-manipulation.html#GUID-8C2E91C6-54EF-4285-9B6F-83002E347B3E">插值细胞值</a><br></li>
                  <li class="ulchildlink"><a href="georaster-data-manipulation.html#GUID-D5389E0F-A151-4476-8EA6-DCA329FEFB31">处理和分析GeoRaster对象</a><br></li>
                  <li class="ulchildlink"><a href="georaster-data-manipulation.html#GUID-AA00D7EE-B6ED-4A42-9475-F353CB5989AC">监控和报告GeoRaster操作进度</a><br></li>
                  <li class="ulchildlink"><a href="georaster-data-manipulation.html#GUID-900D8B54-15B7-4044-AF7F-7BC6854535FE">压缩和解压缩GeoRaster对象</a><br></li>
                  <li class="ulchildlink"><a href="georaster-data-manipulation.html#GUID-3FE51533-061E-4A2F-BB3E-49A723FE3553">删除GeoRaster对象，并在GeoRaster表和RDT上执行操作</a><br></li>
                  <li class="ulchildlink"><a href="georaster-data-manipulation.html#GUID-CA53EDD9-AC59-479F-8280-82EAF85A2141">执行跨模式操作</a><br></li>
                  <li class="ulchildlink"><a href="georaster-data-manipulation.html#GUID-EF5B66A9-DD46-4178-96F6-B699D4AF3808">管理内存以提高性能</a><br></li>
                  <li class="ulchildlink"><a href="georaster-data-manipulation.html#GUID-7AB60C10-E48E-4281-A03A-DA38FFA9F121">在提交之前更新GeoRaster对象</a><br></li>
                  <li class="ulchildlink"><a href="georaster-data-manipulation.html#GUID-0603D2D3-AD36-4F30-970D-038309F55A17">在循环中更新GeoRaster对象</a><br></li>
                  <li class="ulchildlink"><a href="georaster-data-manipulation.html#GUID-A77AAC5B-B0EE-4F8A-9569-79A14D88658B">使用与模板相关的子程序开发GeoRaster应用程序</a><br></li>
               </ul>
            </div>
            <a id="GEORS1243"></a><div class="props_rev_3"><a id="GUID-13578486-979A-410B-94BB-863DBB4AA7E2" name="GUID-13578486-979A-410B-94BB-863DBB4AA7E2"></a><h3 id="GEORS-GUID-13578486-979A-410B-94BB-863DBB4AA7E2" class="sect3"><span class="enumeration_section">4.1</span>查询和搜索GeoRaster对象</h3>
               <div>
                  <p>GeoRaster表是常规关系表，可以具有各种列，例如ID号，名称，时间戳和字符串形式的唯一描述。可以对这些列建立索引，并使用标准数据库索引和查询语句查询GeoRaster对象，如本手册中的许多示例所示。</p>
                  <p>在对GeoRaster表进行空间索引后（请参阅<a href="georaster-database-creation-management.html#GUID-F31E1BAD-DE81-462E-8103-7A67CF7A8D0E">索引GeoRaster对象</a> ），您还可以使用几何图形快速查询或搜索GeoRaster对象。例如，您可能希望在特定区域内找到所有图像（可能数百或更多），然后为每个图像生成完整的金字塔，如下例所示。
                  </p>
                  <div class="example" id="GUID-13578486-979A-410B-94BB-863DBB4AA7E2__GUID-A4E581D7-EC1C-48E2-AD01-D4FB2B0E4BD0">
                     <p class="titleinexample">例4-1搜索GeoRaster对象并为它们生成金字塔</p><pre class="oac_no_warn" dir="ltr">DECLARE类型curtype是引用游标; my_cursor curtype; stmt varchar2（1000）; tid号码; gr sdo_georaster; gm sdo_geometry;开始 -  1。在EPSG 4326（WGS84）坐标系中定义查询区域gm：= sdo_geometry（2003,4326，null，sdo_elem_info_array（1,1003,3），sdo_ordinate_array（5,6,30,30））; -  2。使用给定的几何体定义GeoRaster表（city_images）上的查询语句stmt：='select id from city_images t'|| 'sdo_inside（t.image.spatialextent，：1）=''TRUE'''; -  3。空间查询查询区域内的所有图像 - 并为每个图像生成完整的金字塔，使用gm打开my_cursor for stmt;循环获取my_cursor到tid;当my_cursor％NOTFOUND时退出; - 检索图像以生成金字塔选择图像到city_images中的gr，其中id = tid用于更新; sdo_geor.generatePyramid（gr，'resampling = bilinear'，null，'parallel = 4'）;更新city_images set image = gr其中id = tid;承诺;结束循环;关闭my_cursor;结束;</pre><p>您还可以将这些块包装到PL / SQL过程中并将其存储在数据库中，然后直接调用存储过程。这些功能使您能够组织复杂的流程并自动执行数据库管理任务。</p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-data-manipulation.html#GUID-C56DB84D-5F94-432A-A9BB-E31CF4D1B7AA" title="本章介绍如何执行几个重要的GeoRaster数据查询和操作操作。">GeoRaster数据查询和操作</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1000"></a><div class="props_rev_3"><a id="GUID-C27E5446-4222-447C-9661-19A5AA8CE9FC" name="GUID-C27E5446-4222-447C-9661-19A5AA8CE9FC"></a><h3 id="GEORS-GUID-C27E5446-4222-447C-9661-19A5AA8CE9FC" class="sect3"><span class="enumeration_section">4.2</span>更改和优化光栅存储</h3>
               <div>
                  <p>您可以更改或指定栅格图像数据存储或将要存储方式的某些方面：栅格阻塞大小，单元格深度，交错类型和其他方面。这种灵活性允许您优化栅格数据存储格式，以节省磁盘空间并提高应用程序性能。</p>
                  <p>要加载和处理GeoRaster对象以创建另一个GeoRaster对象，可以使用GeoRaster PL / SQL子程序指定存储参数。也就是说，您可以在调用函数或过程时指定输出格式，例如<a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR.importFrom</a> ， <a href="SDO_GEOR-reference.html#GUID-827C49FA-3759-4EC3-8ED5-A9A4E623EEEB">SDO_GEOR.subset</a> ， <a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a> ， <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-D47B17BE-79C2-4610-B75A-D03182FD40FB">SDO_GEOR_AGGR.append</a> ， <a href="SDO_GEOR-reference.html#GUID-859F107A-4D75-4C36-B9FC-690FA202789C">SDO_GEOR.mergeLayers</a> ， <a href="SDO_GEOR-reference.html#GUID-5C7E6DDA-B9C1-4A67-9C1B-5FA35D2FB7C1">SDO_GEOR.createTemplate</a> ， <a href="sdo-geor-ra-ref.html#GUID-BB7A762E-E615-43AD-9D74-5E917D29F333">SDO_GEOR_RA.rasterMathOp</a>和<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a> 。您无法在现有GeoRaster对象上直接进行此类更改;但是，您可以使用<a href="SDO_GEOR-reference.html#GUID-9C8E8AE6-4C33-4813-B94A-A69C6206E8C4">SDO_GEOR.changeFormatCopy</a>过程，并使用<code class="codeph">storageParam</code>参数指定所需的存储参数值，以制作现有GeoRaster对象的副本。
                  </p>
                  <p>生成的GeoRaster对象的<code class="codeph">storageParam</code>参数应基于诸如数据大小，维度大小和应用程序需求等因素来确定。但是，块大小也可以根据GeoRaster对象的维度大小和用户所需的所需输出自动优化，以便每个GeoRaster对象仅使用最小填充空间但仍满足应用程序要求。根据栅格尺寸大小和所需的阻塞大小，填充可能会浪费一些存储空间，因此在调用GeoRaster过程时，应始终考虑在输出GeoRaster的<code class="codeph">storageParam</code>参数中指定<code class="codeph">blocking=OPTIMALPADDING</code> 。
                  </p>
                  <p>有关更多信息，请参阅<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数</a> ，尤其是<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D__CHDHJCBF" title="此2列表列出了栅格数据的storageParam关键字。第1列是关键字。第2列解释了关键字。">表1-1</a> 。有关应用最佳填充的示例，请参阅<a href="georaster-overview-and-concepts.html#GUID-4B5901B5-879D-4E5F-BE73-2242F3D7CF9D">存储参数</a>末尾的PL / SQL示例和<a href="georaster-database-creation-management.html#GUID-FFB6CD25-B4AC-4746-BAC5-E9ED82D763F0">使用阻塞和最佳填充加载时</a>的GDAL示例</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-data-manipulation.html#GUID-C56DB84D-5F94-432A-A9BB-E31CF4D1B7AA" title="本章介绍如何执行几个重要的GeoRaster数据查询和操作操作。">GeoRaster数据查询和操作</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1001"></a><div class="props_rev_3"><a id="GUID-5D4085E6-5A61-4AC1-B386-C7E1ABA63174" name="GUID-5D4085E6-5A61-4AC1-B386-C7E1ABA63174"></a><h3 id="GEORS-GUID-5D4085E6-5A61-4AC1-B386-C7E1ABA63174" class="sect3"><span class="enumeration_section">4.3</span>复制GeoRaster对象</h3>
               <div>
                  <div class="section">
                     <p>要复制GeoRaster对象，必须将其复制到空的GeoRaster对象中或覆盖现有的有效GeoRaster对象。（空的GeoRaster对象在<a href="georaster-overview-and-concepts.html#GUID-C4D574D6-340B-49DC-95BD-87FDEB11CE16">空白和空GeoRaster对象中</a>进行了解释。）要创建源GeoRaster对象的相同副本，请使用<a href="SDO_GEOR-reference.html#GUID-72D93D49-BF98-4AB9-8FEA-C386A1BE1071">SDO_GEOR.copy</a>过程;要制作包含存储格式更改的副本，请使用<a href="SDO_GEOR-reference.html#GUID-9C8E8AE6-4C33-4813-B94A-A69C6206E8C4">SDO_GEOR.changeFormatCopy</a>过程（请参阅<a href="georaster-data-manipulation.html#GUID-C27E5446-4222-447C-9661-19A5AA8CE9FC">更改和优化光栅存储</a> ）。
                     </p>
                     <p>要使用空的GeoRaster对象复制GeoRaster对象，请按照下列步骤操作：</p>
                     <ol>
                        <li>
                           <p>在将空GeoRaster对象插入目标表时初始化该空对象，返回空GeoRaster对象。</p>
                        </li>
                        <li>
                           <p>使用<a href="SDO_GEOR-reference.html#GUID-72D93D49-BF98-4AB9-8FEA-C386A1BE1071">SDO_GEOR.copy</a>或<a href="SDO_GEOR-reference.html#GUID-9C8E8AE6-4C33-4813-B94A-A69C6206E8C4">SDO_GEOR.changeFormatCopy</a>过程将GeoRaster对象复制到返回的空GeoRaster对象中。
                           </p>
                        </li>
                        <li>
                           <p>使用UPDATE语句更新目标表中的所需行，以使其GeoRaster列包含复制的GeoRaster对象。</p>
                        </li>
                        <li>
                           <p>准备好提交事务时，请使用COMMIT语句。</p>
                        </li>
                     </ol>
                     <p>有关使用空GeoRaster对象进行复制的示例，请参阅<a href="SDO_GEOR-reference.html#GUID-72D93D49-BF98-4AB9-8FEA-C386A1BE1071">SDO_GEOR</a>程序<a href="SDO_GEOR-reference.html#GUID-587A19B6-40FF-4F1C-AC13-556891070C30" title="SDO_GEOR包中包含用于创建，修改和检索有关GeoRaster对象的信息的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">包参考中</a> <a href="SDO_GEOR-reference.html#GUID-72D93D49-BF98-4AB9-8FEA-C386A1BE1071">SDO_GEOR.copy</a>过程的示例。
                     </p>
                     <p>要复制GeoRaster对象以覆盖（替换）现有的GeoRaster对象，请按照下列步骤操作：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>选择现有的GeoRaster对象进行更新。</span></li>
                     <li><span>使用<a href="SDO_GEOR-reference.html#GUID-72D93D49-BF98-4AB9-8FEA-C386A1BE1071">SDO_GEOR.copy</a>或<a href="SDO_GEOR-reference.html#GUID-9C8E8AE6-4C33-4813-B94A-A69C6206E8C4">SDO_GEOR.changeFormatCopy</a>过程将选定的GeoRaster对象复制到有效的现有GeoRaster对象或空的GeoRaster对象中。</span></li>
                     <li><span>使用UPDATE语句更新目标表中的所需行，以使其GeoRaster列包含复制的GeoRaster对象。</span></li>
                     <li><span>准备好提交事务时，请使用COMMIT语句。</span></li>
                  </ol>
                  <div class="section">
                     <p>有关复制以替换现有GeoRaster对象并更改其存储格式的示例，请参阅<a href="SDO_GEOR-reference.html#GUID-9C8E8AE6-4C33-4813-B94A-A69C6206E8C4">SDO_GEOR</a>程序<a href="SDO_GEOR-reference.html#GUID-587A19B6-40FF-4F1C-AC13-556891070C30" title="SDO_GEOR包中包含用于创建，修改和检索有关GeoRaster对象的信息的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">包参考中</a>的<a href="SDO_GEOR-reference.html#GUID-9C8E8AE6-4C33-4813-B94A-A69C6206E8C4">SDO_GEOR.changeFormatCopy</a>过程示例。
                     </p>
                     <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程支持并行复制和子集化。对于并行复制和更改格式复制，请参见<a href="image-processing-virtual-mosaic.html#GUID-8BA68795-65F7-40A6-AD9C-8E774B527176">并行压缩，复制和子</a>集中的<a href="image-processing-virtual-mosaic.html#GUID-8BA68795-65F7-40A6-AD9C-8E774B527176__CHDIAIBB">示例6-24</a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-data-manipulation.html#GUID-C56DB84D-5F94-432A-A9BB-E31CF4D1B7AA" title="本章介绍如何执行几个重要的GeoRaster数据查询和操作操作。">GeoRaster数据查询和操作</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-01A627A0-0EC5-4FAE-AA6A-950116E2FBB8" name="GUID-01A627A0-0EC5-4FAE-AA6A-950116E2FBB8"></a><h3 id="GEORS-GUID-01A627A0-0EC5-4FAE-AA6A-950116E2FBB8" class="sect3"><span class="enumeration_section">4.4</span>使用多边形裁剪子集GeoRaster对象</h3>
               <div>
                  <p>使用GeoRaster，子集化意味着在空间上裁剪栅格，提取或复制栅格图层，或同时执行这两者。要执行子集，请使用<a href="SDO_GEOR-reference.html#GUID-827C49FA-3759-4EC3-8ED5-A9A4E623EEEB">SDO_GEOR.subset</a>过程。例如，您可以调用此过程来裁剪一个小区域或获取GeoRaster对象的几个层的子集，复制图层，指定存储参数（如生成的对象的阻塞和交错）以及执行多边形裁剪。
                  </p>
                  <p>有关示例，请参阅<a href="SDO_GEOR-reference.html#GUID-827C49FA-3759-4EC3-8ED5-A9A4E623EEEB">SDO_GEOR.subset</a>参考主题。
                  </p>
                  <p>您还可以使用<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程来执行并行化子集化（请参阅<a href="image-processing-virtual-mosaic.html#GUID-8BA68795-65F7-40A6-AD9C-8E774B527176">并行压缩，复制和子集</a> ）。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-data-manipulation.html#GUID-C56DB84D-5F94-432A-A9BB-E31CF4D1B7AA" title="本章介绍如何执行几个重要的GeoRaster数据查询和操作操作。">GeoRaster数据查询和操作</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1002"></a><div class="props_rev_3"><a id="GUID-DB762BC3-88BA-4716-9F0C-A4DC4AEC624F" name="GUID-DB762BC3-88BA-4716-9F0C-A4DC4AEC624F"></a><h3 id="GEORS-GUID-DB762BC3-88BA-4716-9F0C-A4DC4AEC624F" class="sect3"><span class="enumeration_section">4.5</span>查询和更新GeoRaster元数据</h3>
               <div>
                  <p>您可以查询GeoRaster对象的元数据，还可以更新元数据的许多属性。</p>
                  <p>您可以使用许多函数，其大多数名称以<span class="italic">get</span>开头，以查询元数据和辅助信息（例如， <a href="SDO_GEOR-reference.html#GUID-2063052F-9197-45EC-9E94-2CE3761A9D16">SDO_GEOR.getTotalLayerNumber</a>和<a href="SDO_GEOR-reference.html#GUID-6BE36C22-6E17-4E96-9928-29EB46869425">SDO_GEOR.hasPseudoColor</a> ）。
                  </p>
                  <p>您可以使用多个子程序（大多数名称以<span class="italic">set</span>开头）来更新元数据和辅助数据（例如， <a href="SDO_GEOR-reference.html#GUID-0406AB05-BA9B-4331-8613-B480A9F12C09">SDO_GEOR.setSRS</a>和<a href="SDO_GEOR-reference.html#GUID-0A226840-C338-4B71-B705-47F7CDD6FC09">SDO_GEOR.setColorMap</a> ）。
                  </p>
                  <p>对于许多<span class="italic">get</span>函数，有一个相应的过程，其名称以<span class="italic">set</span>开头，用于设置，修改或删除元数据属性的值。对于大多数<span class="italic">set</span>过程，要删除过程旨在修改的元数据属性的值，请为该属性指定null值。例如，要删除GeoRaster对象层的bin表，请调用<a href="SDO_GEOR-reference.html#GUID-2D5830C4-DBF6-4338-86B6-0D10EBF5BF23">SDO_GEOR.setBinTable</a>过程并指定null <code class="codeph">tableName</code>参数。但是，在大多数情况下，您无法为其他相关属性指定空值。例如，在调用<a href="SDO_GEOR-reference.html#GUID-2D5830C4-DBF6-4338-86B6-0D10EBF5BF23">SDO_GEOR.setBinTable</a>过程时，不能指定null <code class="codeph">layerNumber</code>参数。
                  </p>
                  <p>请注意以下建议，要求和限制：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>大多数GeoRaster元数据也可以使用XMLType方法或XML特定的SQL函数（如<code class="codeph">extract</code>进行检索，并使用XQuery Update进行修改。但是，如果存在要检索或更改的元数据属性的GeoRaster <span class="italic">获取</span>或<span class="italic">设置</span>子程序，请使用GeoRaster子程序而不是XMLType接口，因为GeoRaster子程序在进行任何更改之前会对其进行验证。如果确实调用XMLType方法或特定于XML的SQL函数来更新元数据，则应在提交事务之前验证GeoRaster对象。
                        </p>
                     </li>
                     <li>
                        <p>永远不要将元数据直接设置为null。</p>
                     </li>
                     <li>
                        <p>不要直接更新GeoRaster对象的rasterType属性;相反，调用<a href="SDO_GEOR-reference.html#GUID-E04962DA-2B64-4FF0-9DFC-C498A761A8A8">SDO_GEOR.setRasterType</a>过程。
                        </p>
                     </li>
                     <li>
                        <p>要更改栅格数据表名称，请使用<a href="SDO_GEOR_UTL-reference.html#GUID-9B5168A6-2624-4E80-B8C8-DC4815B94E36">SDO_GEOR_UTL.renameRDT</a>过程。
                        </p>
                     </li>
                     <li>
                        <p>通常，除了<code class="codeph">spatialExtent</code>属性之外，不应直接更新GeoRaster对象的属性。
                        </p>
                     </li>
                     <li>
                        <p>更新GeoRaster对象的元数据或单元数据（或两者）之后，在提交数据库事务之前，应调用SQL UPDATE语句来更新GeoRaster对象（请参阅<a href="georaster-data-manipulation.html#GUID-7AB60C10-E48E-4281-A03A-DA38FFA9F121">在提交之前更新GeoRaster对象</a> ）。
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-data-manipulation.html#GUID-C56DB84D-5F94-432A-A9BB-E31CF4D1B7AA" title="本章介绍如何执行几个重要的GeoRaster数据查询和操作操作。">GeoRaster数据查询和操作</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1003"></a><div class="props_rev_3"><a id="GUID-D78B30EA-E592-4D34-94AC-AB2B1435D60E" name="GUID-D78B30EA-E592-4D34-94AC-AB2B1435D60E"></a><h3 id="GEORS-GUID-D78B30EA-E592-4D34-94AC-AB2B1435D60E" class="sect3"><span class="enumeration_section">4.6</span>查询和更新GeoRaster单元数据</h3>
               <div>
                  <p>要查询GeoRaster对象的单元（像素）数据以进行处理和可视化，您可以查询栅格数据以查找单元格（像素），一系列单元格或GeoRaster对象的整个栅格：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="SDO_GEOR-reference.html#GUID-1E61D84B-F431-4532-B16E-E005596D4DAC">SDO_GEOR.getCellValue</a>返回指定位置的一个或多个图层或波段的单元格值。
                        </p>
                     </li>
                     <li>
                        <p><a href="SDO_GEOR-reference.html#GUID-A5CB5BAE-B73C-43BF-8196-E21FD1196275">SDO_GEOR.getCellValues</a>返回数组中一个或多个单元格的单元格值。
                        </p>
                     </li>
                     <li>
                        <p><a href="SDO_GEOR-reference.html#GUID-3997A37D-60FD-4F24-A9D0-F90E9BCCC523">SDO_GEOR.evaluateDouble</a>使用指定的插值方法根据相邻单元格值计算直接位置，并返回该位置的指定band或图层的栅格值（双精度数）。（有关详细信息，请参阅<a href="georaster-data-manipulation.html#GUID-8C2E91C6-54EF-4285-9B6F-83002E347B3E">插值单元格值</a> 。）
                        </p>
                     </li>
                     <li>
                        <p><a href="SDO_GEOR-reference.html#GUID-0E56C4EF-7AA4-4EA1-9E82-B5534193178C">SDO_GEOR.evaluateDoubles</a>使用指定的插值方法计算多个位置，并返回指定的带或层的栅格值（双精度数）。
                        </p>
                     </li>
                     <li>
                        <p><a href="SDO_GEOR-reference.html#GUID-CC66F0CA-96A9-4C4F-AB94-AEB5FE53C83D">SDO_GEOR.getRasterSubset</a>创建单个BLOB对象或单个内存中SDO_NUMBER_ARRAY对象，该对象包含GeoRaster对象的精确子集的所有单元格（由矩形窗口或剪切多边形几何，图层或带编号以及金字塔等级指定）。此BLOB对象或SDO_NUMBER_ARRAY对象仅包含栅格单元格，不包含相关元数据。
                        </p>
                     </li>
                     <li>
                        <p><a href="SDO_GEOR-reference.html#GUID-4C357F31-6844-4CF2-BB86-E49A15F40522">SDO_GEOR.getRasterData</a>创建一个BLOB对象，该对象包含指定金字塔等级的GeoRaster对象的所有单元格。此BLOB对象仅包含栅格单元格，不包含相关元数据。
                        </p>
                     </li>
                     <li>
                        <p><a href="SDO_GEOR-reference.html#GUID-684DC2C4-0F25-4EC8-A18C-8E1985A172E9">SDO_GEOR.getRasterBlocks</a>返回一个对象，该对象包含指定窗口内或触摸指定窗口的所有图像数据。具体来说，它返回SDO_RASTERSET集合类型的对象，该对象标识指定窗口内部或触摸指定窗口的指定金字塔等级的所有块。
                        </p>
                     </li>
                     <li>
                        <p><a href="SDO_GEOR-reference.html#GUID-9B3FA7F4-E6CA-4FDB-9DF9-EFEC63C19A55">SDO_GEOR.reproject</a>不仅可以将整个GeoRaster对象从一个投影坐标系转换为另一个，还可以通过直接将查询结果转换为不同的坐标系来实现与<a href="SDO_GEOR-reference.html#GUID-CC66F0CA-96A9-4C4F-AB94-AEB5FE53C83D">SDO_GEOR.getRasterSubset</a>相同的功能。
                        </p>
                     </li>
                     <li>
                        <p><a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a>基于查询窗口对全部或部分地理配准的GeoRaster对象执行重投影，修正或正射校正。生成的对象可以是新的GeoRaster对象（用于持久存储）或BLOB（用于临时使用）。
                        </p>
                     </li>
                     <li>
                        <p><a href="sdo-geor-ra-ref.html#GUID-67FDA0FA-D055-4821-964F-600660861A72">SDO_GEOR_RA.findCells</a>使用GeoRaster Raster Algebra语言基于单元格值生成新的GeoRaster对象。（有关详细信息，请参阅<a href="raster-algebra-and-analytics.html#GUID-FF9C7591-6CCB-41B2-941D-7998F94B8FE9" title="使用基于单元格的条件查询，您可以根据指定的条件生成新的GeoRaster对象。">基于单元格值的条件查询</a> 。）
                        </p>
                     </li>
                     <li>
                        <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>将一些GeoRaster对象镶嵌到一个GeoRaster对象中。
                        </p>
                     </li>
                     <li>
                        <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a>允许您查询虚拟马赛克并即时返回镶嵌的子集。
                        </p>
                     </li>
                     <li>
                        <p><a href="SDO_GEOR-reference.html#GUID-15EE67B7-1CB4-46C9-AAA3-5823D9D9C87F">SDO_GEOR.getBitmapMask</a> ， <a href="SDO_GEOR-reference.html#GUID-FD56B2AC-429D-4558-8C49-93B9FEE7B963">SDO_GEOR.getBitmapMaskSubset</a> ， <a href="SDO_GEOR-reference.html#GUID-6F14DFC5-C9F1-44DF-8D39-771A642E9189">SDO_GEOR.getBitmapMaskValue</a>和<a href="SDO_GEOR-reference.html#GUID-168512A1-60B7-4C69-BADB-EB605E72A9CC">SDO_GEOR.getBitmapMaskValues</a>允许您基于完整的栅格，窗口或单个单元格查询位图蒙版。
                        </p>
                     </li>
                  </ul>
                  <p>您还可以使用<a href="SDO_GEOR-reference.html#GUID-6261233E-5E90-479C-97FD-8125C28EC838">SDO_GEOR.exportTo</a>过程将全部或部分光栅图像导出为BLOB对象（二进制图像格式）或指定文件格式类型的文件。
                  </p>
                  <p>栅格更新有两种类型：基于空间和基于单元格的值</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>基于空间的栅格更新允许您使用单个值或另一个GeoRaster对象更新指定窗口内的GeoRaster对象的栅格数据。</p>
                        <p>要将指定窗口中栅格单元格的值更新或更改为单个值，可以使用<a href="SDO_GEOR-reference.html#GUID-7F2859CD-4A33-4711-A926-5CFA405C7551">SDO_GEOR.changeCellValue</a>过程。若要将行/列数组或多点几何指定的栅格单元格的值更改为新值，可以使用<a href="SDO_GEOR-reference.html#GUID-087181AF-7695-4B17-A764-C63AF9096FA4">SDO_GEOR.changeCellValues</a>过程。您可以调用<a href="SDO_GEOR-reference.html#GUID-ED3D72BF-B5C4-46B1-832C-287BF7696B3E">SDO_GEOR.updateRaster</a>过程来更新指定区域的指定金字塔，或一个GeoRaster对象的重叠部分，以及指定的金字塔和另一个GeoRaster对象的指定波段或层。<a href="SDO_GEOR-reference.html#GUID-7F2859CD-4A33-4711-A926-5CFA405C7551">SDO_GEOR.changeCellValue</a>和<a href="SDO_GEOR-reference.html#GUID-ED3D72BF-B5C4-46B1-832C-287BF7696B3E">SDO_GEOR.updateRaster</a>过程都支持所有金字塔等级，包括原始栅格数据（即金字塔等级0）。
                        </p>
                        <p><a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-D47B17BE-79C2-4610-B75A-D03182FD40FB">SDO_GEOR_AGGR.append</a>过程还可用于使用新图像更新现有图像（请参阅<a href="image-processing-virtual-mosaic.html#GUID-EE1AFE0D-730E-49DC-80AF-E99504D14156" title="当两个图像具有相同数量的波段时，您可以将一个图像附加到另一个图像。">图像附加</a> ）。
                        </p>
                     </li>
                     <li>
                        <p>基于单元格值的栅格更新允许您使用GeoRaster Raster Algebra语言基于单元格值更新GeoRaster对象的栅格数据。</p>
                        <p><a href="sdo-geor-ra-ref.html#GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E">SDO_GEOR_RA.rasterUpdate</a>根据<code class="codeph">conditions</code>参数中指定的布尔字符串从指定的GeoRaster对象中选择单元格，并通过计算<code class="codeph">vals</code>参数中指定的表达式字符串来更新相应的单元格值。<code class="codeph">conditions</code>和<code class="codeph">vals</code>参数都可以是使用栅格代数语言的复杂表达式。（有关详细信息，请参阅<a href="raster-algebra-and-analytics.html#GUID-0AEAF37F-6147-4CC7-9573-929B1EF6B44F" title="您可以根据条件更新栅格单元格值。">基于单元格值的条件更新（编辑）</a> 。）
                        </p>
                     </li>
                  </ul>
                  <p>如果在执行基于空间或基于栅格单元格的更新时已在GeoRaster对象中设置了统计信息，则在运行光栅更新过程后，统计信息不会自动删除或更新。如有必要，您应删除或重新生成统计信息。</p>
                  <div class="infoboxnote" id="GUID-D78B30EA-E592-4D34-94AC-AB2B1435D60E__GUID-B2B388D0-6C32-4AF5-B4A0-3432DB0214E2">
                     <p class="notep1">注意：</p>
                     <p>如果使用在输入GeoRaster对象中添加或覆盖数据的任何过程，则应复制原始GeoRaster对象并对复制的对象使用该过程。对程序结果感到满意后，可以根据需要丢弃原始GeoRaster对象。</p>
                  </div>
                  <p>如果要更改栅格数据表名称，GeoRaster对象的属性或任何其他元数据，请参阅<a href="georaster-data-manipulation.html#GUID-DB762BC3-88BA-4716-9F0C-A4DC4AEC624F">查询和更新GeoRaster元数据中</a>记录的建议，要求和限制。
                  </p>
                  <p>更新GeoRaster对象的元数据或单元数据（或两者）之后，在提交数据库事务之前，应调用SQL UPDATE语句来更新GeoRaster对象（请参阅<a href="georaster-data-manipulation.html#GUID-7AB60C10-E48E-4281-A03A-DA38FFA9F121">在提交之前更新GeoRaster对象</a> ）。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-data-manipulation.html#GUID-C56DB84D-5F94-432A-A9BB-E31CF4D1B7AA" title="本章介绍如何执行几个重要的GeoRaster数据查询和操作操作。">GeoRaster数据查询和操作</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1244"></a><div class="props_rev_3"><a id="GUID-8C2E91C6-54EF-4285-9B6F-83002E347B3E" name="GUID-8C2E91C6-54EF-4285-9B6F-83002E347B3E"></a><h3 id="GEORS-GUID-8C2E91C6-54EF-4285-9B6F-83002E347B3E" class="sect3"><span class="enumeration_section">4.7</span>插值细胞值</h3>
               <div>
                  <p>GeoRaster对象是网格覆盖。网格覆盖的“评估”操作也称为<span class="bold">网格内插</span> ，一种用于在单元之间或单元内的点位置处内插单元值的方法。GeoRaster中的此操作由<a href="SDO_GEOR-reference.html#GUID-3997A37D-60FD-4F24-A9D0-F90E9BCCC523">SDO_GEOR.evaluateDouble</a>函数执行，该函数评估栅格中的任何点并返回该位置的双精度值。您可以使用六种不同插值方法中的任何一种（在<a href="georaster-overview-and-concepts.html#GUID-3BD837FF-70CF-44B3-8489-242FF4590D61" title="许多图像和光栅变换和操作涉及像素或单元重采样和插值。">重采样和插值中</a>列出）进行评估。例如，如果georaster对象是DEM图层，则可以使用以下示例找出随机点位置的高程：</p><pre class="oac_no_warn" dir="ltr">SELECT SDO_GEOR.evaluateDouble（a.georaster，0，SDO_GEOMETRY（2001,4326，SDO_POINT_TYPE（112.704,41.917，NULL），NULL，NULL），'1'，'interpolationMethod = BILINEAR'）FROM georaster_table a WHERE raster_name ='myDEM' ;</pre><p>如果使用<code class="codeph">'interpolationMethod=NN'</code>调用<a href="SDO_GEOR-reference.html#GUID-3997A37D-60FD-4F24-A9D0-F90E9BCCC523">SDO_GEOR.evaluateDouble</a> ，则GeoRaster对象将被视为离散栅格，前面与调用<a href="SDO_GEOR-reference.html#GUID-1E61D84B-F431-4532-B16E-E005596D4DAC">SDO_GEOR.getCellValue</a>相同，后者为您提供相同的值（即单元格值）。细胞内的不同点位置。在这种情况下，您可以直接调用<a href="SDO_GEOR-reference.html#GUID-1E61D84B-F431-4532-B16E-E005596D4DAC">SDO_GEOR.getCellValue</a> ，尤其是当您仅查询单个波段的单元格值时。其他插值方法将栅格视为连续曲面，并且可以在单元格内的不同点位置为您提供不同的值。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-data-manipulation.html#GUID-C56DB84D-5F94-432A-A9BB-E31CF4D1B7AA" title="本章介绍如何执行几个重要的GeoRaster数据查询和操作操作。">GeoRaster数据查询和操作</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1004"></a><div class="props_rev_3"><a id="GUID-D5389E0F-A151-4476-8EA6-DCA329FEFB31" name="GUID-D5389E0F-A151-4476-8EA6-DCA329FEFB31"></a><h3 id="GEORS-GUID-D5389E0F-A151-4476-8EA6-DCA329FEFB31" class="sect3"><span class="enumeration_section">4.8</span>处理和分析GeoRaster对象</h3>
               <div>
                  <p>您可以对GeoRaster数据执行各种栅格和图像处理操作，包括更改内部栅格存储格式，子集（裁剪），缩放，旋转，遮罩，拉伸，过滤，闪避，重新投影（从一个坐标系到另一个坐标系），整顿，正射校正，翘曲，镶嵌，追加和生成金字塔。GeoRaster还支持虚拟马赛克。一些相关的子程序是<a href="SDO_GEOR-reference.html#GUID-9C8E8AE6-4C33-4813-B94A-A69C6206E8C4">SDO_GEOR.changeFormatCopy</a> ， <a href="SDO_GEOR-reference.html#GUID-827C49FA-3759-4EC3-8ED5-A9A4E623EEEB">SDO_GEOR.subset</a> ， <a href="SDO_GEOR-reference.html#GUID-9B3FA7F4-E6CA-4FDB-9DF9-EFEC63C19A55">SDO_GEOR.reproject</a> ， <a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.rectify</a> ， <a href="SDO_GEOR-reference.html#GUID-896CB187-FAC1-4A2C-9921-B98AC4E92F3B">SDO_GEOR.generatePyramid</a> ， <a href="SDO_GEOR-reference.html#GUID-351B293B-CE47-45E0-92F0-DC7A52D84FDF">SDO_GEOR.deletePyramid</a> ， <a href="SDO_GEOR-reference.html#GUID-3F7A39BD-67FB-40B7-9143-32FA5DFD9628">SDO_GEOR.scaleCopy</a> ， <a href="SDO_GEOR-reference.html#GUID-859F107A-4D75-4C36-B9FC-690FA202789C">SDO_GEOR.mergeLayers</a> ， <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a> ， <a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-89303715-7E1A-46B9-8CDE-0228C48388D7">SDO_GEOR_AGGR.getMosaicSubset</a>和<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-D47B17BE-79C2-4610-B75A-D03182FD40FB">SDO_GEOR_AGGR.append</a> 。有关详细说明，请参见<a href="image-processing-virtual-mosaic.html#GUID-EB60166B-6A52-4974-AF16-139CD6480EBC" title="本章介绍了高级图像处理功能，包括GCP地理配准，重投影，校正，正射校正，变形，图像缩放，拉伸，滤波，遮蔽，分割，NDVI计算，Tasseled Cap变换，图像追加，波段合并以及大规模高级图像镶嵌。">图像处理和虚拟马赛克</a> ， <a href="SDO_GEOR-reference.html#GUID-587A19B6-40FF-4F1C-AC13-556891070C30" title="SDO_GEOR包中包含用于创建，修改和检索有关GeoRaster对象的信息的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR包参考</a>和<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-92406947-E079-487D-B0D0-3342ECC23E34" title="SDO_GEOR_AGGR包中包含用于在GeoRaster对象上执行高级大规模镶嵌，追加和虚拟镶嵌操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR_AGGR包参考</a> 。
                  </p>
                  <p>对于基于栅格单元值的代数运算和制图建模和分析，GeoRaster支持栅格代数语言（PL / SQL和代数表达式）和相关的栅格操作，包括条件查询（ <a href="sdo-geor-ra-ref.html#GUID-67FDA0FA-D055-4821-964F-600660861A72">SDO_GEOR_RA.findCells</a> ），基于单元格值的更新或编辑（ <a href="sdo-geor-ra-ref.html#GUID-7F1A50AC-9595-4AC3-83E3-D7233C9FAF2E">SDO_GEOR_RA.rasterUpdate</a> ），逻辑和数学运算（ <a href="sdo-geor-ra-ref.html#GUID-BB7A762E-E615-43AD-9D74-5E917D29F333">SDO_GEOR_RA.rasterMathOp</a> ），以及图像和栅格分割（ <a href="sdo-geor-ra-ref.html#GUID-D9DA6608-7D97-4428-B1B2-002C371846E9">SDO_GEOR_RA.classify</a> ）。<a href="SDO_GEOR-reference.html#GUID-96B2E47F-17E2-491D-9FF6-AC7BEFB434D7">SDO_GEOR.generateStatistics</a>函数支持基于多边形的统计和直方图生成。以下动态函数支持GeoRaster对象或其层的交互式统计分析： <a href="SDO_GEOR-reference.html#GUID-FD88A636-A97B-456E-A07A-DE2D6AE54545">SDO_GEOR.generateStatisticsMax</a> ， <a href="SDO_GEOR-reference.html#GUID-CE118FEB-6F5D-4B42-9D95-2989355D7222">SDO_GEOR.generateStatisticsMean</a> ， <a href="SDO_GEOR-reference.html#GUID-5726F33E-CDE7-4793-9973-B0F779E629E8">SDO_GEOR.generateStatisticsMedian</a> ， <a href="SDO_GEOR-reference.html#GUID-963EB183-C710-471B-A1DA-9665D93FE2DC">SDO_GEOR.generateStatisticsMin</a> ， <a href="SDO_GEOR-reference.html#GUID-D36B7F54-FEF4-4111-AF3F-99A193BEC0D9">SDO_GEOR.generateStatisticsMode</a>和<a href="SDO_GEOR-reference.html#GUID-453A78AC-CCDB-4E87-9A67-7C2C113B1C57">SDO_GEOR.generateStatisticsSTD</a> 。有关详细说明，请参阅<a href="raster-algebra-and-analytics.html#GUID-C75744C9-FA04-4391-96F2-59EF2EA212FF" title="本章介绍了栅格代数语言（PL / SQL和代数表达式）和相关的栅格操作，包括条件查询，基于单元格的更新或编辑，数学运算，分类，动态统计分析，逻辑运算及其制图建模中的应用。">栅格代数和分析</a>以及<a href="sdo-geor-ra-ref.html#GUID-7E8EC42B-D663-49EF-B6D8-158A0EC10333" title="SDO_GEOR_RA包中包含用于与GeoRaster相关的栅格代数和分析操作的子程序（函数和过程）。本章为每个子程序提供一个或多个示例的参考信息。">SDO_GEOR_RA包参考</a> 。
                  </p>
                  <p>有关示例和说明性注释，另请参阅<a href="georaster-overview-and-concepts.html#GUID-0B5D0180-E897-4F30-9E65-65D827024A95" title="GeoRaster includes several PL/SQL and Java sample code files that show common operations.">GeoRaster PL / SQL和Java演示文件中</a>描述的<a href="georaster-overview-and-concepts.html#GUID-0B5D0180-E897-4F30-9E65-65D827024A95" title="GeoRaster包含几个显示常见操作的PL / SQL和Java示例代码文件。">GeoRaster PL / SQL演示文件</a> 。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-data-manipulation.html#GUID-C56DB84D-5F94-432A-A9BB-E31CF4D1B7AA" title="本章介绍如何执行几个重要的GeoRaster数据查询和操作操作。">GeoRaster数据查询和操作</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1245"></a><div class="props_rev_3"><a id="GUID-AA00D7EE-B6ED-4A42-9475-F353CB5989AC" name="GUID-AA00D7EE-B6ED-4A42-9475-F353CB5989AC"></a><h3 id="GEORS-GUID-AA00D7EE-B6ED-4A42-9475-F353CB5989AC" class="sect3"><span class="enumeration_section">4.9</span>监控和报告GeoRaster操作进度</h3>
               <div>
                  <div class="section">
                     <p>GeoRaster允许您监视和报告许多操作的执行进度（ <a href="georaster-overview-and-concepts.html#GUID-B57F4783-7F39-4AC2-AB95-02984E3C44E9" title="For some resource-intensive operations, GeoRaster enables you to monitor and report their execution progress.">在GeoRaster</a>中的<a href="georaster-overview-and-concepts.html#GUID-B57F4783-7F39-4AC2-AB95-02984E3C44E9" title="对于某些资源密集型操作，GeoRaster使您可以监视和报告其执行进度。">报告操作进度中</a>列出）。以下是报告操作进度的基本步骤：</p>
                     <ol>
                        <li>
                           <p>使用<a href="SDO_GEOR_UTL-reference.html#GUID-E35FA2E9-24FD-455B-B53F-B42DDDD3D71C">SDO_GEOR_UTL.createReportTable</a>过程在相应用户的架构下创建报表。（必须先调用一次，然后才能监视任何操作。）
                           </p><pre class="oac_no_warn" dir="ltr">EXECUTE SDO_GEOR_UTL.createReportTable;</pre></li>
                        <li>
                           <p>在要执行和监视操作的用户会话中，执行以下操作：</p>
                           <ol type="a">
                              <li>
                                 <p>使用<a href="SDO_GEOR_UTL-reference.html#GUID-15481B20-58FD-47D8-A97D-65F8F1FE287D">SDO_GEOR_UTL.enableReport</a>启用监视。（您必须调用此过程才能稍后获取状态报告。）
                                 </p><pre class="oac_no_warn" dir="ltr">EXECUTE SDO_GEOR_UTL.enableReport;</pre></li>
                              <li>
                                 <p>（可选）使用<a href="SDO_GEOR_UTL-reference.html#GUID-C0CB06F5-4A64-436E-99D3-C9F48C759585">SDO_GEOR_UTL.setClientID</a>设置客户端ID。客户端ID用于标识执行操作的用户会话。如果未调用此过程，则客户端ID默认为SQL会话ID。例如：</p><pre class="oac_no_warn" dir="ltr">EXECUTE SDO_GEOR_UTL.setClientID（100）;</pre></li>
                              <li>
                                 <p>（可选）使用<a href="SDO_GEOR_UTL-reference.html#GUID-1E056015-616E-4D1D-8524-248A6E60CEE9">SDO_GEOR_UTL.setSeqID</a>设置序列ID。序列ID用于标识同一SQL会话中的重复操作。如果未调用此过程，则序列ID默认为0。例如：</p><pre class="oac_no_warn" dir="ltr">EXECUTE SDO_GEOR_UTL.setSeqID（1）;</pre></li>
                              <li>
                                 <p>执行要监视的操作。例如：</p><pre class="oac_no_warn" dir="ltr">- 为georid = 6生成金字塔。可以通过步骤3监视此generatePyramid调用的进度。DECLARE gr sdo_georaster; BEGIN SELECT georaster INTO gr FROM georaster_table WHERE georid = 6 FOR UPDATE; sdo_geor.generatePyramid（gr，'rLevel = 5，resampling = NN'）;更新georaster_table SET georaster = gr WHERE georid = 6;承诺;结束; /</pre></li>
                              <li>
                                 <p>可选地，对于要监视的每个附加操作重复步骤c和d。例如：</p><pre class="oac_no_warn" dir="ltr">EXECUTE SDO_GEOR_UTL.setSeqID（2）; - 为georid = 7生成金字塔。可以通过步骤3监视此generatePyramid调用的进度。DECLARE gr sdo_georaster; BEGIN SELECT georaster INTO gr FROM georaster_table WHERE georid = 7 FOR UPDATE; sdo_geor.generatePyramid（gr，'rLevel = 5，resampling = NN'）;更新georaster_table SET georaster = gr WHERE georid = 7;承诺;结束; /</pre></li>
                              <li>
                                 <p>（可选）使用<a href="SDO_GEOR_UTL-reference.html#GUID-7102EF4A-0279-4079-83FB-1B8EFE8C3A12">SDO_GEOR_UTL.disableReport</a>禁用监视。如果未调用此过程，则在用户会话结束时自动停止监视。
                                 </p><pre class="oac_no_warn" dir="ltr">EXECUTE SDO_GEOR_UTL.disableReport;</pre></li>
                           </ol>
                        </li>
                        <li>
                           <p>从同一用户下的另一个会话中，检索执行状态报告。</p>
                           <p>要获取由客户端ID和序列ID标识的特定操作的进度，请使用<a href="SDO_GEOR_UTL-reference.html#GUID-34284A54-1792-4845-8F27-078AAE159413">SDO_GEOR_UTL.getProgress</a>函数。此函数将进度返回0到1之间的数字，反映完成百分比。例如，以下查询显示55％完成时的操作：</p><pre class="oac_no_warn" dir="ltr">SELECT sdo_geor_utl.getProgress（100,2）进度FROM DUAL;进展--------选择0.55 1行。
</pre><p>要获取由客户端ID和序列ID标识的特定操作的状态报告，请使用<a href="SDO_GEOR_UTL-reference.html#GUID-7AC9801F-D891-4A9B-9BD9-87D273C7DC6F">SDO_GEOR_UTL.getStatusReport</a>函数。此函数返回一个字符串数组，描述进度和有关操作的其他信息。例如：</p><pre class="oac_no_warn" dir="ltr">- 检查georid上的generatePyramid的状态= 6 SELECT sdo_geor_utl.getStatusReport（100,1）FROM DUAL; SDO_GEOR_UTL.GETSTATUSREPORT（100,1）------------------------------------------ ----------------------------------- SDO_STRING2_ARRAY（'31 -OCT-11 02.20.04.854558 PM'，' GeneratePyramid'，'RDT：RDT_1'，'RID：6'，'100％完成'，'操作已完成'）选择1行。- 检查georid上的generatePyramid的状态= 7 SELECT sdo_geor_utl.getStatusReport（100,2）FROM DUAL; SDO_GEOR_UTL.GETSTATUSREPORT（100,2）------------------------------------------ ----------------------------------- SDO_STRING2_ARRAY（'31 -OCT-11 02.20.08.854558 PM'，' GeneratePyramid'，'RDT：RDT_1'，'RID：7'，'55％完成'，'操作已完成'）选择1行。
</pre><p>要获取所有受监视操作的状态，请输入以下语句：</p><pre class="oac_no_warn" dir="ltr">SELECT * from（select sdo_geor_utl.getAllStatusReport（）FROM DUAL）; COLUMN_VALUE ------------------------------------------------- ----------------------------- SDO_STRING2_ARRAY（'Client：100'，'Sequence：1'，'31 -OCT-11 02.20 .04.854558 PM'，'GeneratePyramid'，'RDT：RDT_1'，'RID：6'，'100％完成'，'操作已完成'）SDO_STRING2_ARRAY（'Client：100'，'Sequence：2'，'31 -OCT -11 02.20.08.854558 PM'，'GeneratePyramid'，'RDT：RDT_1'，'RID：7'，'55％complete'，NULL）选择2行。
</pre></li>
                     </ol>
                     <p>如果需要清除或删除报告表，请分别使用<a href="SDO_GEOR_UTL-reference.html#GUID-DC1098B1-94FF-4150-9BBF-13E30CE34F15">SDO_GEOR_UTL.clearReportTable</a>或<a href="SDO_GEOR_UTL-reference.html#GUID-E4389281-1803-4FB7-A61C-42D0CD4105FC">SDO_GEOR_UTL.dropReportTable</a>过程：</p><pre class="oac_no_warn" dir="ltr">EXECUTE SDO_GEOR_UTL.clearReportTable; - 或：EXECUTE SDO_GEOR_UTL.dropReportTable;</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-data-manipulation.html#GUID-C56DB84D-5F94-432A-A9BB-E31CF4D1B7AA" title="本章介绍如何执行几个重要的GeoRaster数据查询和操作操作。">GeoRaster数据查询和操作</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1005"></a><div class="props_rev_3"><a id="GUID-900D8B54-15B7-4044-AF7F-7BC6854535FE" name="GUID-900D8B54-15B7-4044-AF7F-7BC6854535FE"></a><h3 id="GEORS-GUID-900D8B54-15B7-4044-AF7F-7BC6854535FE" class="sect3"><span class="enumeration_section">4.10</span>压缩和解压缩GeoRaster对象</h3>
               <div>
                  <p>您可以通过使用JPEG-F，DEFLATE或JPEG 2000压缩来压缩GeoRaster对象，从而减少对它们的存储空间要求。您可以解压缩任何压缩的GeoRaster对象，但任何GeoRaster操作都不需要这样做，因为可以在压缩的GeoRaster对象上执行可以在未压缩（解压缩）的GeoRaster对象上执行的任何GeoRaster操作。</p>
                  <p>对于JPEG-F和DEFLATE，要压缩或解压缩GeoRaster对象，请使用<code class="codeph">storageParam</code>参数中的<code class="codeph">compression</code>关键字和<a href="SDO_GEOR-reference.html#GUID-9C8E8AE6-4C33-4813-B94A-A69C6206E8C4">SDO_GEOR.changeFormatCopy</a>过程，或者使用其他几个过程来加载和处理GeoRaster对象以创建另一个GeoRaster对象，包括<a href="SDO_GEOR-reference.html#GUID-07B69D26-239F-4C52-A2D2-E776B2BABF8B">SDO_GEOR .importFrom</a> ， <a href="SDO_GEOR-reference.html#GUID-17F61F94-A06C-41F4-A064-9243C8904F31">SDO_GEOR.mosaic</a> ， <a href="SDO_GEOR-reference.html#GUID-3F7A39BD-67FB-40B7-9143-32FA5DFD9628">SDO_GEOR.scaleCopy</a> ， <a href="SDO_GEOR-reference.html#GUID-827C49FA-3759-4EC3-8ED5-A9A4E623EEEB">SDO_GEOR.subset</a> ，栅格代数（SDO_GEOR_RA）过程和<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a> 。（对于JPEG-F和DEFLATE压缩，没有单独的程序来压缩和解压缩GeoRaster对象。）
                  </p>
                  <p>对于JPEG 2000，请分别使用<a href="SDO_GEOR-reference.html#GUID-B9F2CE15-3808-46E7-B1E5-A666B3E76BEE">SDO_GEOR.compressJP2</a>和<a href="SDO_GEOR-reference.html#GUID-6B411E83-F1F7-4EB3-9A65-99F95F52EF97">SDO_GEOR.decompressJP2</a>过程压缩和解压缩GeoRastrer对象。大多数其他过程和函数（ <a href="SDO_GEOR-reference.html#GUID-7F2859CD-4A33-4711-A926-5CFA405C7551">SDO_GEOR.changeCellValue</a> ， <a href="SDO_GEOR-reference.html#GUID-FAC58FA1-3707-498F-BC69-7D36C17BDFA1">SDO_GEOR.reproject</a> ， <a href="SDO_GEOR-reference.html#GUID-3F7A39BD-67FB-40B7-9143-32FA5DFD9628">sdo_geor.scaleScopy</a>和<a href="SDO_GEOR-reference.html#GUID-17F61F94-A06C-41F4-A064-9243C8904F31">sdo_geor.mosaic除外</a> ）可以在执行操作时在内部解压缩JP2压缩的GeoRaster对象。
                  </p>
                  <p>有关GeoRaster压缩和解压缩的详细信息，请参阅<a href="georaster-overview-and-concepts.html#GUID-9BEA34A1-E05E-4E70-B09D-97A0EF1027B8" title="GeoRaster provides the following types of native compression to reduce storage space requirements for GeoRaster objects: JPEG (JPEG-F), JPEG 2000, and DEFLATE.">压缩</a>和解<a href="georaster-overview-and-concepts.html#GUID-9BEA34A1-E05E-4E70-B09D-97A0EF1027B8" title="GeoRaster提供以下类型的本机压缩，以减少GeoRaster对象的存储空间要求：JPEG（JPEG-F），JPEG 2000和DEFLATE。">压缩</a> ，包括有关在第三方压缩<a href="georaster-overview-and-concepts.html#GUID-D2F21C14-DC30-49A9-A5AD-6220412F9A81">插件中</a>支持第三方压缩解决方案的信息。
                  </p>
                  <p>此外，当JPEG-F或DEFLATE压缩与GeoRaster对象一起使用时，需要考虑一些特殊用法注意事项：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果要压缩大型GeoRaster对象并在其上构建完整金字塔，则首先在未压缩的GeoRaster对象上生成金字塔然后应用压缩会更快。</p>
                     </li>
                     <li>
                        <p>对于大规模镶嵌，在不首先施加压缩，然后生成金字塔然后施加压缩的情况下拼接更快。</p>
                     </li>
                     <li>
                        <p>在某些操作中，GeoRaster使用临时表空间来压缩和解压缩数据，因此为GeoRaster用户<a href="georaster-database-creation-management.html#GUID-2162EF15-706C-43D2-B2BF-AAD219D8CB88">添加临时表空间对于</a>性能至关重要（请参阅<a href="georaster-database-creation-management.html#GUID-2162EF15-706C-43D2-B2BF-AAD219D8CB88">为GeoRaster用户添加临时表空间</a> ）。
                        </p>
                     </li>
                  </ul>
                  <p><a href="SDO_GEOR-reference.html#GUID-9C8E8AE6-4C33-4813-B94A-A69C6206E8C4">SDO_GEOR.changeFormatCopy</a>过程支持JPEG和DEFLATE的并行压缩和解压缩，如果不需要重新格式化，则使用<code class="codeph">storageParam</code>参数中的<code class="codeph">parallel</code>关键字。您还可以调用<a href="SDO_GEOR_AGGR-referencer-ref.html#GUID-85F23FB6-7F4B-40C4-B023-25DE37FA53BF">SDO_GEOR_AGGR.mosaicSubset</a>过程，如果要在执行并行压缩或解压缩时更改栅格格式，则可以提供更好的性能。并行压缩和解压缩显着提高了性能，这对于大图像尤其有用。请参见<a href="image-processing-virtual-mosaic.html#GUID-8BA68795-65F7-40A6-AD9C-8E774B527176">并行压缩，复制和子</a>集中的<a href="image-processing-virtual-mosaic.html#GUID-8BA68795-65F7-40A6-AD9C-8E774B527176__CHDEDHCE">示例6-23</a></p>
                  <p>如果要存储压缩的GeoRaster对象，请确保为用户创建临时表空间。有关更多信息，请参阅<a href="georaster-database-creation-management.html#GUID-2162EF15-706C-43D2-B2BF-AAD219D8CB88">为GeoRaster用户添加临时表空间</a> 。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-data-manipulation.html#GUID-C56DB84D-5F94-432A-A9BB-E31CF4D1B7AA" title="本章介绍如何执行几个重要的GeoRaster数据查询和操作操作。">GeoRaster数据查询和操作</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1246"></a><div class="props_rev_3"><a id="GUID-3FE51533-061E-4A2F-BB3E-49A723FE3553" name="GUID-3FE51533-061E-4A2F-BB3E-49A723FE3553"></a><h3 id="GEORS-GUID-3FE51533-061E-4A2F-BB3E-49A723FE3553" class="sect3"><span class="enumeration_section">4.11</span>删除GeoRaster对象，并对GeoRaster表和RDT执行操作</h3>
               <div>
                  <p>GeoRaster自动维护GeoRaster元数据以及GeoRaster表和栅格数据表（RDT）之间的关系。因此，对于大多数操作，您可以使用相关的传统SQL语句。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="bold">要删除GeoRaster对象</span> ，请使用DELETE语句删除包含该对象的行（例如， <code class="codeph">DELETE FROM geor_table WHERE ...;</code> ）。
                        </p>
                        <p>从GeoRaster表中删除GeoRaster对象后，将自动删除存储在RDT中的所有相关栅格数据。切勿直接在栅格数据表中插入或删除任何行。</p>
                     </li>
                     <li>
                        <p><span class="bold">要删除GeoRaster表</span> ，请使用DROP语句（例如， <code class="codeph">DROP geor_table;</code> ）。
                        </p>
                        <p>删除GeoRaster表后，将自动删除与已删除的GeoRaster表中的GeoRaster对象关联的所有栅格数据。</p>
                     </li>
                     <li>
                        <p><span class="bold">要重命名GeoRaster表</span> ，请使用RENAME语句（例如， <code class="codeph">RENAME geor_table1 TO geor_table2;</code> ）。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">要将GeoRaster列添加到表中</span> ，请使用ALTER TABLE语句。
                        </p>
                        <p>但是，如果使用ALTER TABLE语句添加一个或多个GeoRaster列，则必须调用<a href="SDO_GEOR_UTL-reference.html#GUID-CCA772B5-AA1E-4A53-B64C-67D8F6052CF2">SDO_GEOR_UTL.createDMLTrigger</a>过程以在每个添加的GeoRaster列上创建DML触发器。例如：</p><pre class="pre codeblock"><code>ALTER TABLE geor_table ADD（image SDO_GEORASTER）; CALL sdo_geor_utl.createdmltrigger（'GEOR_TABLE'，'IMAGE'）;）</code></pre></li>
                     <li>
                        <p><span class="bold">要删除表中的GeoRaster列</span> ，请使用ALTER TABLE语句（例如， <code class="codeph">ALTER TABLE geor_table DROP COLUMN image;</code> ）。
                        </p>
                        <p>警告：删除GeoRaster列将删除该列中的所有GeoRaster对象。</p>
                     </li>
                     <li>
                        <p><span class="bold">要删除RDT</span> ，必须先删除所有引用RDT的GeoRaster对象，然后才能在RDT上使用DROP语句。</p>
                        <p>如果在尝试删除RDT之前未删除引用RDT的所有GeoRaster对象，则会引发异常。</p>
                     </li>
                     <li>
                        <p><span class="bold">要重命名RDT</span> ，请使用<a href="SDO_GEOR_UTL-reference.html#GUID-9B5168A6-2624-4E80-B8C8-DC4815B94E36">SDO_GEOR_UTL.renameRDT</a>过程。
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-data-manipulation.html#GUID-C56DB84D-5F94-432A-A9BB-E31CF4D1B7AA" title="本章介绍如何执行几个重要的GeoRaster数据查询和操作操作。">GeoRaster数据查询和操作</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-CA53EDD9-AC59-479F-8280-82EAF85A2141" name="GUID-CA53EDD9-AC59-479F-8280-82EAF85A2141"></a><h3 id="GEORS-GUID-CA53EDD9-AC59-479F-8280-82EAF85A2141" class="sect3"><span class="enumeration_section">4.12</span>执行跨模式操作</h3>
               <div>
                  <p>所有GeoRaster操作都可以处理在当前连接模式之外的模式中定义的GeoRaster对象。换句话说，GeoRaster完全支持跨模式访问，更新和处理。</p>
                  <p>有关更多信息，请参阅<a href="georaster-overview-and-concepts.html#GUID-19C1371A-74D8-409C-89C8-D52FF41F405F">使用GeoRaster的跨模式支持</a> 。
                  </p>
                  <div class="example" id="GUID-CA53EDD9-AC59-479F-8280-82EAF85A2141__GUID-1F52A77A-C5E6-4B25-B74E-A3FADE5B6A06">
                     <p class="titleinexample">例4-2交叉模式复制操作</p>
                     <p>在以下示例中，USER2从USER1复制图像并将其存储在USER2架构中。假设USER1拥有GEORASTER_TABLE表，并且USER2拥有G_TABLE表。</p><pre class="pre codeblock"><code>- 连接到user1并向user2授予权限--assume user1将图像存储在georaster_table中，图像的RDT表是rdt_1 conn user1 / pswd1将georaster_table的grant select选择为user2;将rdt_1上的select选择给user2; - 连接到user2并从user1 conn user2 / pswd2创建georaster的副本SQL&gt; DECLARE gr1 sdo_georaster; gr2 sdo_georaster; BEGIN  - 从user1中选择georaster_table中的图像，从user1.georaster_table中选择georaster到gr1，其中georid = 100; - 副本将存储在user2中的g_table中，假设georaster对象已经启动，则从g_table选择geor到gr2，其中id = 1用于更新; sdo_geor.changeFormatCopy（gr1，'blocking = OPTIMALPADDING blocksize =（512,512,3）interleaving = BIP'，gr2）; update g_table set geor = gr2 where id = 1;承诺;结束; /</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-CA53EDD9-AC59-479F-8280-82EAF85A2141__GUID-F4C522CC-09B6-45D0-B18C-3055B68CFC09">
                     <p class="titleinexample">例4-3交叉模式栅格代数和复制操作</p>
                     <p>在以下示例中，USER2对USER1模式中的图像运行栅格代数运算，并将结果存储在USER1中。假设USER1拥有GEORASTER_TABLE和G_TABLE表。现有图像位于GEORASTER_TABLE中，图像的栅格数据表为RDT_1。生成的图像存储在G_TABLE中，其栅格数据表为RDT_2。</p><pre class="pre codeblock"><code>- 连接到user1并向user2 conn user1 / pswd1授予权限，将georaster_table的grant select选择为user2;将rdt_1上的select选择给user2;授予user2选择，更新，插入，删除g_table;授予selectd，update，insert，delete on rdt_2 to user2; - 连接到user2并对user1中的图像运行栅格代数操作conn user2 / pswd2 DECLARE gr1 sdo_georaster; gr2 sdo_georaster; BEGIN  - 从user1中选择georaster_table中的图像，从user1.georaster_table中选择georaster到gr1，其中georid = 100; - 结果存储在user1的g_table中，假设georaster对象已经启动，从user1.g_table选择geor到gr2，其中id = 1用于更新; sdo_geor_ra.rasterMathOp（gr1，sdo_string2_array（'{0}'，'{1}'，'{2}'），'blocking = OPTIMALPADDING blocksize =（512,512,3）interleaving = BIP'，gr2）;更新user1.g_table set geor = gr2 where id = 1;承诺;结束; /</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-data-manipulation.html#GUID-C56DB84D-5F94-432A-A9BB-E31CF4D1B7AA" title="本章介绍如何执行几个重要的GeoRaster数据查询和操作操作。">GeoRaster数据查询和操作</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-EF5B66A9-DD46-4178-96F6-B699D4AF3808" name="GUID-EF5B66A9-DD46-4178-96F6-B699D4AF3808"></a><h3 id="GEORS-GUID-EF5B66A9-DD46-4178-96F6-B699D4AF3808" class="sect3"><span class="enumeration_section">4.13</span>管理内存以提高性能</h3>
               <div>
                  <p id="GUID-EF5B66A9-DD46-4178-96F6-B699D4AF3808__GEORASTERHASITSOWNBUFFERSYSTEMTOREA-DD25A4AE">GeoRaster有自己的缓冲系统来读写光栅（LOB）数据。该系统与Oracle数据库缓冲系统分开。下表列出了可用于配置GeoRaster缓冲区系统的参数，该系统用于GeoRaster对象上的所有I / O操作。</p>
                  <div class="tblformal" id="GUID-EF5B66A9-DD46-4178-96F6-B699D4AF3808__GUID-57380349-638D-47C9-980D-03CDBFEB9623">
                     <p class="titleintable">表4-1 GeoRaster缓冲参数</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="GeoRaster缓冲参数" border="1" summary="This 3 column table lists parameters for managing memory used for GeoRaster buffering.  Column 1 is the parameter name. Column 2 describes the parameter. Column 3 gives the default value." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="20%" id="d19314e1731">参数名称</th>
                              <th align="left" valign="bottom" width="20%" id="d19314e1733">描述</th>
                              <th align="left" valign="bottom" width="20%" id="d19314e1735">默认值</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d19314e1739" headers="d19314e1731 ">MemMaxSize</td>
                              <td align="left" valign="top" width="20%" headers="d19314e1739 d19314e1733 ">可用于每个GeoRaster对象的GeoRaster缓冲的内存的上限大小。</td>
                              <td align="left" valign="top" width="20%" headers="d19314e1739 d19314e1735 ">17 MB</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d19314e1746" headers="d19314e1731 ">MemReadBlockSize</td>
                              <td align="left" valign="top" width="20%" headers="d19314e1746 d19314e1733 ">用于缓存栅格数据的只读操作的内部数据块大小。</td>
                              <td align="left" valign="top" width="20%" headers="d19314e1746 d19314e1735 ">32 KB</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d19314e1753" headers="d19314e1731 ">MemWriteBlockSize</td>
                              <td align="left" valign="top" width="20%" headers="d19314e1753 d19314e1733 ">用于缓存栅格数据的读/写操作的内部数据块大小。</td>
                              <td align="left" valign="top" width="20%" headers="d19314e1753 d19314e1735 ">64 KB</td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>您可以使用以下PL / SQL子程序获取和设置这些参数的值：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="SDO_GEOR_UTL-reference.html#GUID-75EFC6D7-A1F9-4FC1-A31D-91E82521B8DD">SDO_GEOR_UTL.getMaxMemSize</a></p>
                     </li>
                     <li>
                        <p><a href="SDO_GEOR_UTL-reference.html#GUID-C24BCE97-C7D9-4720-B169-190CD66405F8">SDO_GEOR_UTL.setMaxMemSize</a></p>
                     </li>
                     <li>
                        <p><a href="SDO_GEOR_UTL-reference.html#GUID-0E714A7B-2225-4561-95BC-0AE5AD5AC20C">SDO_GEOR_UTL.getReadBlockMemSize</a></p>
                     </li>
                     <li>
                        <p><a href="SDO_GEOR_UTL-reference.html#GUID-32CABCD8-4AF1-4A43-B4FA-F664C939215F">SDO_GEOR_UTL.setReadBlockMemSize</a></p>
                     </li>
                     <li>
                        <p><a href="SDO_GEOR_UTL-reference.html#GUID-736EBE83-DFC0-45B5-B31D-AD3F2DED89A6">SDO_GEOR_UTL.getWriteBlockMemSize</a></p>
                     </li>
                     <li>
                        <p><a href="SDO_GEOR_UTL-reference.html#GUID-DCAF3CC8-8A5F-4E76-AA33-9A5CAE083B6F">SDO_GEOR_UTL.setWriteBlockMemSize</a></p>
                     </li>
                  </ul>
                  <p>因为参数是使用PL / SQL设置的，所以它们的值是在数据库会话期间定义的。对于任何后续会话，如果要对任何参数使用任何非默认值，则必须使用适当的过程设置它们。</p>
                  <p>通常，使用较大的参数值可以提高GeoRaster I / O操作的性能。以下是一些具体的考虑因素和指南。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>分配更多内存（增加<code class="codeph">MemMaxSize</code> ）可减少磁盘访问;理想情况下，分配足够大的内存来容纳整个GeoRaster对象将大大提高性能。但是，Oracle数据库允许多个用户和并发访问，因此您应该在这样的环境中实现平衡内存分配。
                        </p>
                     </li>
                     <li>增加读取块大小（增加<code class="codeph">MemReadBlockSize</code> ）可减少OCI LOB读取操作的数量，从而提高性能。但是，由于操作中源和目标GeoRaster对象之间的交错不同，如果<code class="codeph">MemReadBlockSize</code>值无法保存整个GeoRaster对象，则读取块大小可能过大并导致频繁的读取块页面<code class="codeph">MemReadBlockSize</code>和页面调出操作，因此降低性能。
                     </li>
                     <li>几乎所有GeoRaster操作都是写驱动的，因此更大的写块大小（增加<code class="codeph">MemWriteBlockSize</code> ）将减少OCI LOB写操作的数量，从而提高性能。
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-data-manipulation.html#GUID-C56DB84D-5F94-432A-A9BB-E31CF4D1B7AA" title="本章介绍如何执行几个重要的GeoRaster数据查询和操作操作。">GeoRaster数据查询和操作</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1009"></a><a id="GEORS1008"></a><div class="props_rev_3"><a id="GUID-7AB60C10-E48E-4281-A03A-DA38FFA9F121" name="GUID-7AB60C10-E48E-4281-A03A-DA38FFA9F121"></a><h3 id="GEORS-GUID-7AB60C10-E48E-4281-A03A-DA38FFA9F121" class="sect3"><span class="enumeration_section">4.14</span>在提交之前更新GeoRaster对象</h3>
               <div>
                  <p>在提交插入，更新，重新格式化，压缩，解压缩或删除GeoRaster单元数据或元数据的数据库事务之前，应使用SQL UPDATE语句更新GeoRaster对象。如果在更改单元格数据后未更新GeoRaster对象，则可能会导致以下一种或多种情况：无效的GeoRaster对象，悬挂的栅格数据和不一致的元数据。如果在更改GeoRaster元数据后未更新GeoRaster对象，则元数据更改将不会生效。</p>
                  <p>如果您决定回滚事务而不是提交事务，则不需要UPDATE语句。</p>
                  <p>在<a href="georaster-data-manipulation.html#GUID-7AB60C10-E48E-4281-A03A-DA38FFA9F121__CIHIIFDE">例4-4中</a> ，在调用<a href="SDO_GEOR-reference.html#GUID-9C8E8AE6-4C33-4813-B94A-A69C6206E8C4">SDO_GEOR.changeFormatCopy</a>过程之后和COMMIT语句之前需要UPDATE语句。
                  </p>
                  <div class="example" id="GUID-7AB60C10-E48E-4281-A03A-DA38FFA9F121__CIHIIFDE">
                     <p class="titleinexample">示例4-4在提交之前更新GeoRaster对象</p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; gr2 sdo_georaster;从georaster_table开始选择georaster INTO gr2 WHERE georid = 11 FOR UPDATE; SELECT georaster INTO gr1 from georaster_table WHERE georid = 1; sdo_geor.changeFormatCopy（gr1，'blocksize =（2048,2048）'，gr2）;更新georaster_table SET georaster = gr2 WHERE georid = 11;承诺;结束; /</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-data-manipulation.html#GUID-C56DB84D-5F94-432A-A9BB-E31CF4D1B7AA" title="本章介绍如何执行几个重要的GeoRaster数据查询和操作操作。">GeoRaster数据查询和操作</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-0603D2D3-AD36-4F30-970D-038309F55A17" name="GUID-0603D2D3-AD36-4F30-970D-038309F55A17"></a><h3 id="GEORS-GUID-0603D2D3-AD36-4F30-970D-038309F55A17" class="sect3"><span class="enumeration_section">4.15</span>循环更新GeoRaster对象</h3>
               <div>
                  <p>当要更新多个GeoRaster对象时，通常使用游标。但是，如果循环中的GeoRaster操作是并行启用的，或者在每个UPDATE语句之后执行COMMIT语句，则游标的SQL查询不能具有FOR UPDATE子句，因为循环内的提交将使该子句的游标无效。</p>
                  <div class="example" id="GUID-0603D2D3-AD36-4F30-970D-038309F55A17__GUID-7A275412-C48B-4258-B9A0-4D923591D941">
                     <p class="titleinexample">示例4-5在启用并行处理的循环中更新GeoRaster对象</p>
                     <p>在以下示例中，在表中的所有GeoRaster对象上生成金字塔。每次更新后都会执行显式提交，并为<a href="SDO_GEOR-reference.html#GUID-896CB187-FAC1-4A2C-9921-B98AC4E92F3B">SDO_GEOR.generatePyramid</a>过程启用并行处理（ <code class="codeph">parallel=4</code> ）。使用FOR UPDATE子句查询GeoRaster对象是在循环内执行的，而不是在游标查询语句中执行。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE gr1 sdo_georaster; BEGIN FOR rec in（SELECT georid FROM georaster_table ORDER BY georid）LOOP SELECT georaster INTO gr1 FROM georaster_table WHERE georid = rec.georid <span class="bold">FOR UPDATE</span> ; sdo_geor.generatePyramid（gr1，'rlevel = 5，resampling = bilinear'，null，' <span class="bold">parallel = 4</span> '）;更新georaster_table SET georaster = gr1 WHERE georid = rec.georid; <span class="bold">COMMIT</span> ;结束循环;结束; /</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-0603D2D3-AD36-4F30-970D-038309F55A17__GUID-E34B25BD-D9AB-4EBA-940E-A2BAB7F0EE6E">
                     <p class="titleinexample">示例4-6在未启用并行处理的情况下更新循环中的GeoRaster对象</p>
                     <p>如果循环中的GeoRaster操作未并行启用（如本示例中的情况），则不是在每次更新后执行COMMIT，而是可以在游标循环<span class="italic">外</span>执行COMMIT语句，以避免使用FOR UPDATE子句使游标无效。另请注意，该示例将NODATA添加到表中的所有GeoRaster对象。
                     </p><pre class="oac_no_warn" dir="ltr">开始录入（SELECT georid，georaster FROM georaster_table <span class="bold">FOR UPDATE</span> ）LOOP sdo_geor.addNODATA（rec.georaster，0,0）;更新georaster_table SET georaster = rec.georaster WHERE georid = rec.georid;结束循环; <span class="bold">COMMIT</span> ;结束; /</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-data-manipulation.html#GUID-C56DB84D-5F94-432A-A9BB-E31CF4D1B7AA" title="本章介绍如何执行几个重要的GeoRaster数据查询和操作操作。">GeoRaster数据查询和操作</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="GEORS1010"></a><div class="props_rev_3"><a id="GUID-A77AAC5B-B0EE-4F8A-9569-79A14D88658B" name="GUID-A77AAC5B-B0EE-4F8A-9569-79A14D88658B"></a><h3 id="GEORS-GUID-A77AAC5B-B0EE-4F8A-9569-79A14D88658B" class="sect3"><span class="enumeration_section">4.16</span>使用与模板相关的子程序开发GeoRaster应用程序</h3>
               <div>
                  <p><a href="SDO_GEOR-reference.html#GUID-5C7E6DDA-B9C1-4A67-9C1B-5FA35D2FB7C1">SDO_GEOR.createTemplate</a>和<a href="SDO_GEOR-reference.html#GUID-D16DF6A5-7526-4574-8ECE-5D9D08CD6207">SDO_GEOR.getRasterBlockLocator</a>子程序使您能够通过读取和编写GeoRaster元数据和二进制栅格数据来开发GeoRaster应用程序，例如与GeoRaster对象一起使用的ETL工具和图像处理系统，而无需直接处理Oracle XMLType，即GeoRaster XML模式和Oracle BLOB。
                  </p>
                  <p>在创建新的GeoRaster对象（在<a href="georaster-database-creation-management.html#GUID-A6E26D1A-490F-4D47-B86C-3E4AD707457D">创建新的GeoRaster对象中进行了</a>解释）之后，您可以使用<a href="SDO_GEOR-reference.html#GUID-5C7E6DDA-B9C1-4A67-9C1B-5FA35D2FB7C1">SDO_GEOR.createTemplate</a>函数使用基本信息填充GeoRaster对象的元数据，例如栅格类型，尺寸大小，ultCoordinates，单元格深度，交错类型，阻塞和块大小，金字塔重采样方法和降低级别，压缩方法和质量。此功能可以选择使用包含空BLOB的光栅块组成的正确行数和行数据填充栅格数据表。
                  </p>
                  <p><a href="SDO_GEOR-reference.html#GUID-5C7E6DDA-B9C1-4A67-9C1B-5FA35D2FB7C1">SDO_GEOR.createTemplate</a>函数生成的XML元数据符合GeoRaster元数据模式。然后，您可以使用其他GeoRaster子程序来查询或更新元数据（请参阅<a href="georaster-data-manipulation.html#GUID-DB762BC3-88BA-4716-9F0C-A4DC4AEC624F">查询和更新GeoRaster元数据</a> ）。
                  </p>
                  <p>您可以使用<a href="SDO_GEOR-reference.html#GUID-D16DF6A5-7526-4574-8ECE-5D9D08CD6207">SDO_GEOR.getRasterBlockLocator</a>过程通过指定金字塔等级和块编号来获取栅格块定位器。如果您有栅格块定位器，则可以使用OCI或Java JDBC LOB接口来读取和写入二进制栅格数据。（ <a href="SDO_GEOR-reference.html#GUID-D16DF6A5-7526-4574-8ECE-5D9D08CD6207">SDO_GEOR.getRasterBlockLocator</a>过程本身不会读取或处理LOB数据。）要使用此方法，您必须了解栅格数据的物理存储（在<a href="georaster-overview-and-concepts.html#GUID-DB21CC32-06DC-4E18-A4FB-B15C389C1F72" title="GeoRaster优化元数据和数据的物理存储。">GeoRaster</a>物理存储中进行了解释），并且必须在读取或写入BLOB之前根据需要压缩和解压缩数据。</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="georaster-data-manipulation.html#GUID-C56DB84D-5F94-432A-A9BB-E31CF4D1B7AA" title="本章介绍如何执行几个重要的GeoRaster数据查询和操作操作。">GeoRaster数据查询和操作</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can configure software or hardware keystores, for use on both individual table columns or entire tablespaces."></meta>
      <meta name="description" content="You can configure software or hardware keystores, for use on both individual table columns or entire tablespaces."></meta>
      <title>配置透明数据加密</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Advanced Security Guide "></meta>
      <meta property="og:description" content="You can configure software or hardware keystores, for use on both individual table columns or entire tablespaces."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Advanced Security Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="advanced-security-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-13T09:26:12-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96301-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="introduction-to-transparent-data-encryption.html" title="Previous" type="text/html"></link>
      <link rel="next" href="managing-keystore-and-tde-master-encryption-key.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Advanced Security Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ASOAG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="introduction-to-transparent-data-encryption.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="managing-keystore-and-tde-master-encryption-key.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">高级安全指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="asopart1.html" property="item" typeof="WebPage"><span property="name">使用透明数据加密</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">配置透明数据加密</li>
            </ol>
            <a id="GUID-C5D20EAE-3369-411F-9A7E-13AB14139F1D" name="GUID-C5D20EAE-3369-411F-9A7E-13AB14139F1D"></a><a id="ASOAG10474"></a>
            
            <h2 id="ASOAG-GUID-C5D20EAE-3369-411F-9A7E-13AB14139F1D" class="sect2"><span class="enumeration_chapter">3</span>配置透明数据加密</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以配置软件或硬件密钥库，以用于单个表列或整个表空间。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-C7989D41-F54B-4A48-ADE7-19175E88889C">关于配置透明数据加密</a><br>要配置透明数据加密，必须在创建密钥库和加密数据之前执行一次性设置。
                  </li>
                  <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-AFC2AF54-3C53-46EB-B867-01DA523F7870">透明数据加密密钥库搜索顺序</a><br>TDE密钥库的搜索顺序取决于您如何设置实例初始化参数， <code class="codeph">sqlnet.ora</code>参数或环境变量。
                  </li>
                  <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-1FA85E9E-5666-4CF3-A3C7-1F8A9230B0C9">配置软件密钥库</a><br>软件密钥库是主加密密钥的容器，它驻留在软件文件系统中。
                  </li>
                  <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-753C4808-CC51-4DA1-A5C3-980417FDAB14">配置硬件密钥库</a><br>硬件密钥库位于硬件安全模块（HSM）中，该模块用于存储加密密钥。
                  </li>
                  <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE">加密表中的列</a><br>您可以使用透明数据加密来加密数据库表中的各个列。
                  </li>
                  <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8">表空间和数据库的加密转换</a><br>您可以在脱机和联机表空间和数据库上执行加密操作。
                  </li>
                  <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-F2CB30AB-99AA-4BF6-A95F-41C1C205963F">透明数据加密数据动态和数据字典视图</a><br>您可以查询一组动态和数据字典视图，以查找有关透明数据加密（TDE）数据的更多信息。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="asopart1.html" title="第一部分介绍了如何使用透明数据加密。">使用透明数据加密</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-C7989D41-F54B-4A48-ADE7-19175E88889C" name="GUID-C7989D41-F54B-4A48-ADE7-19175E88889C"></a><h3 id="ASOAG-GUID-C7989D41-F54B-4A48-ADE7-19175E88889C" class="sect3">关于配置透明数据加密</h3>
               <div>
                  <p>要配置透明数据加密，必须在创建密钥库和加密数据之前执行一次性设置。</p>
                  <p>在配置密钥库并开始加密数据之前，必须使用<code class="codeph">WALLET_ROOT</code>和<code class="codeph">TDE_CONFIGURATION</code>参数执行一次性配置，以指定计划创建的密钥库的位置和类型。
                  </p>
                  <p><code class="codeph">WALLET_ROOT</code>参数指定密钥库目录位置。在设置<code class="codeph">WALLET_ROOT</code>之前，请确保您具有可用于存储密钥库的现有目录。（通常，此目录称为<code class="codeph">wallet</code> 。）
                  </p>
                  <p><code class="codeph">TDE_CONFIGURATION</code>参数指定密钥库的类型（软件密钥库，硬件密钥库或Oracle密钥库密钥库）。如果省略<code class="codeph">TDE_CONFIGURATION</code>参数，则Oracle数据库使用<code class="codeph">sqlnet.ora</code>文件设置。使用<code class="codeph">TDE_CONFIGURATION</code>设置密钥库的类型后，在创建密钥库时，Oracle数据库会在密钥库类型的<code class="codeph">WALLET_ROOT</code>位置内创建一个目录。例如，如果将<code class="codeph">TDE_CONFIGURATION</code>设置为<code class="codeph">FILE</code> ，则对于透明数据加密密钥库，Oracle Database会在wallet目录中创建名为<code class="codeph">tde</code> （小写）的目录。如果要从一种密钥库类型迁移到另一种密钥库类型，则必须先将<code class="codeph">TDE_CONFIGURATION</code>参数设置为要使用的密钥库类型，然后使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句执行迁移。例如，您可以从硬件安全模块（HSM）密钥库迁移到TDE密钥库。
                  </p>
                  <p><code class="codeph">V$ENCRYPTION_WALLET</code>动态视图的<code class="codeph">KEYSTORE_MODE</code>列显示是否已配置联合模式或隔离模式。
                  </p>
                  <div class="infoboxnote" id="GUID-C7989D41-F54B-4A48-ADE7-19175E88889C__GUID-F7541009-C008-4471-81DE-EF015D242305">
                     <p class="notep1">注意：</p>在以前的版本中， <code class="codeph">SQLNET.ENCRYPTION_WALLET_LOCATION</code>参数用于定义密钥库目录位置。此参数已被弃用。Oracle建议您<code class="codeph">WALLET_ROOT</code>使用<code class="codeph">WALLET_ROOT</code>静态初始化参数和<code class="codeph">TDE_CONFIGURATION</code>动态初始化参数。
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="configuring-transparent-data-encryption.html#GUID-AFC2AF54-3C53-46EB-B867-01DA523F7870" title="TDE密钥库的搜索顺序取决于您如何设置实例初始化参数，sqlnet.ora参数或环境变量。">透明数据加密密钥库搜索顺序</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-C5D20EAE-3369-411F-9A7E-13AB14139F1D" title="您可以配置软件或硬件密钥库，以用于单个表列或整个表空间。">配置透明数据加密</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-AFC2AF54-3C53-46EB-B867-01DA523F7870" name="GUID-AFC2AF54-3C53-46EB-B867-01DA523F7870"></a><h3 id="ASOAG-GUID-AFC2AF54-3C53-46EB-B867-01DA523F7870" class="sect3">透明数据加密密钥库搜索顺序</h3>
               <div>
                  <p>TDE密钥库的搜索顺序取决于您如何设置实例初始化参数， <code class="codeph">sqlnet.ora</code>参数或环境变量。
                  </p>
                  <p>Oracle数据库通过在以下顺序中搜索这些位置来检索密钥库：</p>
                  <ol id="GUID-AFC2AF54-3C53-46EB-B867-01DA523F7870__OL_DGJ_KKL_YFB">
                     <li>
                        <p>由设置的位置<code class="codeph">WALLET_ROOT</code>实例的初始化参数，当<code class="codeph">KEYSTORE_CONFIGURATION</code>的属性<code class="codeph">TDE_CONFIGURATION</code>初始化参数设置为<code class="codeph">FILE</code> 。 Oracle建议您使用此参数来配置密钥库位置。
                        </p>
                     </li>
                     <li>
                        <p>如果<code class="codeph">TDE_CONFIGURATION</code>初始化参数的<code class="codeph">KEYSTORE_CONFIGURATION</code>属性未设置为<code class="codeph">FILE</code>或未设置<code class="codeph">WALLET_ROOT</code> ，则由<code class="codeph">sqlnet.ora</code>文件中的<code class="codeph">WALLET_LOCATION</code>设置指定的位置。
                        </p>
                     </li>
                     <li>
                        <p>如果未设置<code class="codeph">WALLET_ROOT</code>和<code class="codeph">WALLET_LOCATION</code> ，则在<code class="codeph">sqlnet.ora</code>文件中由<code class="codeph">ENCRYPTION_WALLET_LOCATION</code>参数指定的位置（现在不赞成使用<code class="codeph">WALLET_ROOT</code> ）。
                        </p>
                     </li>
                     <li>
                        <p>如果未设置这些参数，并且设置了<code class="codeph">ORACLE_BASE</code>环境变量， <code class="codeph">$ORACLE_BASE/admin/ <span class="codeinlineitalic">db_unique_name</span> /wallet</code>目录。如果未设置<code class="codeph">ORACLE_BASE</code> ，则<code class="codeph">$ORACLE_HOME/admin/ <span class="codeinlineitalic">db_unique_name</span> /wallet</code> 。
                        </p>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-C5D20EAE-3369-411F-9A7E-13AB14139F1D" title="您可以配置软件或硬件密钥库，以用于单个表列或整个表空间。">配置透明数据加密</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ASOAG10274"></a><div class="props_rev_3"><a id="GUID-1FA85E9E-5666-4CF3-A3C7-1F8A9230B0C9" name="GUID-1FA85E9E-5666-4CF3-A3C7-1F8A9230B0C9"></a><h3 id="ASOAG-GUID-1FA85E9E-5666-4CF3-A3C7-1F8A9230B0C9" class="sect3">配置软件密钥库</h3>
               <div>
                  <p>软件密钥库是主加密密钥的容器，它驻留在软件文件系统中。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-01E3A39B-87BD-4E3F-9198-6CBD896B405B">关于配置软件密钥库</a><br>软件密钥库是存储TDE主加密密钥的容器。
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-82EAFC96-5B0E-4BA6-B748-14385D04E002">步骤1：配置软件密钥库位置和类型</a><br>您必须通过在数据库实例中的<code class="codeph">init.ora</code>和<code class="codeph">TDE_CONFIGURATION</code>中设置<code class="codeph">WALLET_ROOT</code>来配置密钥库位置和类型。
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-F098129B-BBFF-4C86-B119-80AB706DB2A1">第2步：创建软件密钥库</a><br>为软件密钥库指定目录位置后，可以创建密钥库。
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-37296947-18DB-4CFA-A112-794A55E942E2">第3步：打开软件密钥库</a><br>根据您创建的密钥库的类型，您必须先手动打开密钥库，然后才能使用它。
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-15E41F0A-5D80-4A7A-88F6-30EE86FA44E8">步骤4：在软件密钥库中设置TDE主加密密钥</a><br>密钥库打开后，您可以为其设置TDE主加密密钥。
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-9D157063-2C48-40AC-8697-0FD1A866F038">第5步：加密您的数据</a><br>现在您已完成密钥库配置，您可以开始加密PDB中的数据。</li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-C5D20EAE-3369-411F-9A7E-13AB14139F1D" title="您可以配置软件或硬件密钥库，以用于单个表列或整个表空间。">配置透明数据加密</a></p>
                     </div>
                  </div>
               </div>
               <a id="ASOAG10275"></a><div class="props_rev_3"><a id="GUID-01E3A39B-87BD-4E3F-9198-6CBD896B405B" name="GUID-01E3A39B-87BD-4E3F-9198-6CBD896B405B"></a><h4 id="ASOAG-GUID-01E3A39B-87BD-4E3F-9198-6CBD896B405B" class="sect4">关于配置软件密钥库</h4>
                  <div>
                     <p>软件密钥库是存储TDE主加密密钥的容器。</p>
                     <p>在配置密钥库之前，首先必须通过在<code class="codeph">init.ora</code>文件中设置<code class="codeph">WALLET_ROOT</code>参数来为其定义位置。数据库首先检查<code class="codeph">WALLET_ROOT</code>设置来查找此密钥库。如果尚未创建此设置，则数据库将检查<code class="codeph">sqlnet.ora</code>文件。您可以根据需要创建其他密钥库，例如密钥库的副本和导出包含密钥的文件。如果必须删除或删除在<code class="codeph">WALLET_ROOT</code>位置中配置的密钥库，则必须在将此密钥库中的TDE主加密密钥移动到另一个密钥库后才能执行此操作。然后，您必须重置<code class="codeph">WALLET_ROOT</code>以指向密钥库的新位置。
                     </p>
                     <p>使用<code class="codeph">WALLET_ROOT</code>参数配置软件密钥库位置后，可以登录到数据库实例以创建和打开密钥库，然后设置TDE主加密密钥。完成这些步骤后，您可以开始加密数据。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-1FA85E9E-5666-4CF3-A3C7-1F8A9230B0C9" title="软件密钥库是主加密密钥的容器，它驻留在软件文件系统中。">配置软件密钥库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-82EAFC96-5B0E-4BA6-B748-14385D04E002" name="GUID-82EAFC96-5B0E-4BA6-B748-14385D04E002"></a><h4 id="ASOAG-GUID-82EAFC96-5B0E-4BA6-B748-14385D04E002" class="sect4">步骤1：配置软件密钥库位置和类型</h4>
                  <div>
                     <p>您必须通过在数据库实例中的<code class="codeph">init.ora</code>和<code class="codeph">TDE_CONFIGURATION</code>中设置<code class="codeph">WALLET_ROOT</code>来配置密钥库位置和类型。
                     </p>
                     <ol>
                        <li class="stepexpand"><span>登录Oracle数据库所在的服务器。</span></li>
                        <li class="stepexpand"><span>如有必要，请创建一个钱包目录。</span><div>通常，wallet目录位于<code class="codeph">$ORACLE_BASE/admin/ <span class="codeinlineitalic">db_unique_name</span></code>目录中，名为<code class="codeph">wallet</code> 。优选地，该目录应该是空的。
                           </div>
                        </li>
                        <li class="stepexpand"><span>编辑数据库实例的<code class="codeph">init.ora</code>初始化文件，以包含wallet目录的<code class="codeph">WALLET_ROOT</code>静态初始化参数。</span><div>默认情况下， <code class="codeph">init.ora</code>文件位于<code class="codeph">$ORACLE_HOME/dbs</code>目录中。
                           </div>
                           <div>例如，对于名为<code class="codeph">orcl</code>的数据库实例：<pre class="oac_no_warn" dir="ltr">WALLET_ROOT = $ ORACLE_BASE /管理/ ORCL /钱包</pre></div>
                        </li>
                        <li class="stepexpand"><span>以已被授予<code class="codeph">SYSDBA</code>管理权限的用户身份登录数据库实例。</span><div>例如：<pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as sysdba输入密码： <span class="italic">password</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>设置<code class="codeph">TDE_CONFIGURATION</code>动态初始化参数以指定密钥库类型。</span><div>例如：<pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION =“KEYSTORE_CONFIGURATION = <span class="italic">keystore_type</span> ”SCOPE = <span class="italic">scope_type</span> ;</pre><p>在本规范中：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>必须将<code class="codeph"><span class="codeinlineitalic">keystore_type</span></code>设置为<code class="codeph">FILE</code>才能配置TDE密钥库。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">scope_type</span></code>设置范围的类型（例如， <code class="codeph">both</code> ， <code class="codeph">memory</code>或<code class="codeph">spfile</code> 。
                                    </p>
                                 </li>
                              </ul>
                              <p>例如，要在参数文件（ <code class="codeph">pfile</code> ）正在使用时配置TDE密钥库，请将<code class="codeph">scope</code>设置为<code class="codeph">memory</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION =“KEYSTORE_CONFIGURATION = FILE”scope = memory;</pre><p>要配置TDE密钥库如果服务器参数文件（ <code class="codeph">spfile</code> ）在使用中，设定<code class="codeph">scope</code> ，以<code class="codeph">both</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION =“KEYSTORE_CONFIGURATION = FILE”scope = both;</pre></div>
                        </li>
                        <li class="stepexpand"><span>重启数据库。</span><div><pre class="oac_no_warn" dir="ltr">关机立即启动</pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-1FA85E9E-5666-4CF3-A3C7-1F8A9230B0C9" title="软件密钥库是主加密密钥的容器，它驻留在软件文件系统中。">配置软件密钥库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10282"></a><div class="props_rev_3"><a id="GUID-F098129B-BBFF-4C86-B119-80AB706DB2A1" name="GUID-F098129B-BBFF-4C86-B119-80AB706DB2A1"></a><h4 id="ASOAG-GUID-F098129B-BBFF-4C86-B119-80AB706DB2A1" class="sect4">第2步：创建软件密钥库</h4>
                  <div>
                     <p>为软件密钥库指定目录位置后，可以创建密钥库。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-5DAB02E7-CEE2-4C06-B2E0-6070F7BF8BDE">关于创建软件密钥库</a><br>有三种不同类型的软件密钥库。
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-0AB76778-7D98-4C23-B848-C00BD05DFEFE">创建受密码保护的软件密钥库</a><br>受密码保护的软件密钥库需要用户密码，该密码用于保护存储在密钥库中的密钥和凭证。
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-98BA94DA-571B-429C-8E7A-B6A1020E9420">创建自动登录或本地自动登录软件密钥库</a><br>作为受密码保护的密钥库的替代方法，您可以创建自动登录或本地自动登录软件密钥库。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-1FA85E9E-5666-4CF3-A3C7-1F8A9230B0C9" title="软件密钥库是主加密密钥的容器，它驻留在软件文件系统中。">配置软件密钥库</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10501"></a><div class="props_rev_3"><a id="GUID-5DAB02E7-CEE2-4C06-B2E0-6070F7BF8BDE" name="GUID-5DAB02E7-CEE2-4C06-B2E0-6070F7BF8BDE"></a><h5 id="ASOAG-GUID-5DAB02E7-CEE2-4C06-B2E0-6070F7BF8BDE" class="sect5">关于创建软件密钥库</h5>
                     <div>
                        <p>有三种不同类型的软件密钥库。</p>
                        <p>您可以创建受密码保护的软件密钥库，自动登录软件密钥库和本地自动登录软件密钥库。</p>
                        <p>请注意，执行查询<code class="codeph">SELECT * FROM V$ENCRYPTION_WALLET</code>将自动打开自动登录软件密钥库。例如，假设您有受密码保护的密钥库和自动登录密钥库。如果受密码保护的密钥库已打开并且您关闭受密码保护的密钥库，然后查询<code class="codeph">V$ENCRYPTION_WALLET</code>视图，则输出将指示密钥库已打开。但是，这是因为<code class="codeph">V$ENCRYPTION_WALLET</code>打开了自动登录软件密钥库，然后显示了自动登录密钥库的状态。
                        </p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="introduction-to-transparent-data-encryption.html#GUID-4B020933-2A30-4ED1-AE58-F8F6BD26A224" title="Oracle数据库支持软件密钥库和硬件密钥库。">密钥库的类型</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-F098129B-BBFF-4C86-B119-80AB706DB2A1" title="为软件密钥库指定目录位置后，可以创建密钥库。">步骤2：创建软件密钥库</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10283"></a><div class="props_rev_3"><a id="GUID-0AB76778-7D98-4C23-B848-C00BD05DFEFE" name="GUID-0AB76778-7D98-4C23-B848-C00BD05DFEFE"></a><h5 id="ASOAG-GUID-0AB76778-7D98-4C23-B848-C00BD05DFEFE" class="sect5">创建受密码保护的软件密钥库</h5>
                     <div>
                        <p>受密码保护的软件密钥库需要用户密码，该密码用于保护存储在密钥库中的密钥和凭证。</p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>以已被授予<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限的用户身份登录数据库实例。
                                 </p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm输入密码： <span class="italic">password</span>已连接。
</pre><p>如果SQL * Plus已经打开并且您在此期间修改了<code class="codeph">init.ora</code>文件以设置<code class="codeph">WALLET_ROOT</code>参数，则重新连接到SQL * Plus。必须先更改数据库会话，然后<code class="codeph">init.ora</code>更改才能生效。
                                 </p>
                              </li>
                              <li>
                                 <p>使用以下语法创建密钥库：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY管理创建密钥库<span class="italic">'keystore_location'</span> IDENTIFIED BY <span class="italic">software_keystore_password;</span></pre><p>在本规范中：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="italic"><code class="codeph">keystore_location</code></span>是要为其创建自动登录密钥库的受密码保护的密钥库的密钥库目录位置的路径（例如， <code class="codeph">/etc/ORACLE/WALLETS/orcl</code> ）。如果<code class="codeph">WALLET_ROOT</code>参数设置的路径是您要使用的路径，则可以省略<span class="italic"><code class="codeph">keystore_location</code></span>设置。
                                       </p>
                                       <p>如果指定<span class="italic"><code class="codeph">keystore_location</code></span> ，则将其用单引号（ <code class="codeph">' '</code> ）括起来。要查找此位置，可以查询<code class="codeph">V$ENCRYPTION_WALLET</code>视图的<code class="codeph">WRL_PARAMETER</code>列。（如果未在默认位置创建密钥库，则<code class="codeph">V$ENCRYPTION_WALLET</code>视图的<code class="codeph">STATUS</code> <code class="codeph">NOT_AVAILABLE</code> 。）如果设置了<code class="codeph">WALLET_ROOT</code>并且您想要使用<code class="codeph">WALLET_ROOT</code>指向的目录，则可以省略<span class="italic"><code class="codeph">keystore_location</code></span>设置。
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">software_keystore_password</code></span>是您（安全管理员）创建的密钥库的密码。
                                       </p>
                                    </li>
                                 </ul>
                                 <p>例如，要在<code class="codeph">/etc/ORACLE/WALLETS/orcl</code>目录中创建密钥库：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理CREATE密钥库<code class="codeph">'/etc/ORACLE/WALLETS/orcl</code> ' IDENTIFIED BY <span class="italic">密码</span> ;密钥库已更改。
</pre><p>运行此语句后， <code class="codeph">ewallet.p12</code>文件（即密钥库）将显示在密钥库位置中。
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-F098129B-BBFF-4C86-B119-80AB706DB2A1" title="为软件密钥库指定目录位置后，可以创建密钥库。">步骤2：创建软件密钥库</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10284"></a><div class="props_rev_3"><a id="GUID-98BA94DA-571B-429C-8E7A-B6A1020E9420" name="GUID-98BA94DA-571B-429C-8E7A-B6A1020E9420"></a><h5 id="ASOAG-GUID-98BA94DA-571B-429C-8E7A-B6A1020E9420" class="sect5">创建自动登录或本地自动登录软件密钥库</h5>
                     <div>
                        <p>作为受密码保护的密钥库的替代方法，您可以创建自动登录或本地自动登录软件密钥库。</p>
                        <div class="section">
                           <p>这两个密钥库都有系统生成的密码。它们也是基于PKCS＃12的文件。可以从此密钥库所在的计算机的不同计算机上打开自动登录软件密钥库，但只能从创建该密钥库的计算机上打开本地自动登录软件密钥库。自动登录和本地自动登录密钥库都是从受密码保护的软件密钥库创建的。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ol>
                              <li>
                                 <p>以已被授予<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限的用户身份登录数据库实例。
                                 </p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm输入密码： <span class="italic">password</span>已连接。
</pre><p>如果SQL * Plus已经打开并且您在此期间修改了<code class="codeph">init.ora</code>文件以设置<code class="codeph">WALLET_ROOT</code>参数，则重新连接到SQL * Plus。必须先更改数据库会话，然后<code class="codeph">init.ora</code>更改才能生效。
                                 </p>
                              </li>
                              <li>
                                 <p>创建受密码保护的软件密钥库。</p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理CREATE密钥库'的/ etc / ORACLE /钱包/ ORCL' IDENTIFIED BY <span class="italic">keystore_password;</span></pre></li>
                              <li>
                                 <p>使用以下语法创建自动登录或本地自动登录密钥库：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理CREATE [LOCAL] AUTO_LOGIN密钥库FROM IDENTIFIED BY <span class="italic">software_keystore_password</span>密钥库<span class="italic">'keystore_location';</span></pre><p>在本规范中：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">LOCAL</code>使您可以创建本地自动登录软件密钥库。否则，如果您希望其他计算机可以访问密钥库，请省略此子句。
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">keystore_location</code></span>是要为其创建自动登录密钥库的受密码保护的密钥库的目录位置的路径（例如， <code class="codeph">/etc/ORACLE/WALLETS/orcl</code> ）。将此设置括在单引号（ <code class="codeph">' '</code> ）中。要查找此位置，请查询<code class="codeph">V$ENCRYPTION_WALLET</code>视图的<code class="codeph">WRL_PARAMETER</code>列。
                                       </p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">software_keystore_password</code></span>是要为其创建自动登录密钥库的受密码保护的密钥库。
                                       </p>
                                    </li>
                                 </ul>
                                 <p>例如，要创建位于<code class="codeph">/etc/ORACLE/WALLETS/orcl</code>目录中的受密码保护的密钥库的自动登录软件密钥库：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理<code class="codeph">FROM KEYSTORE '/etc/ORACLE/WALLETS/orcl</code>创建AUTO_LOGIN KEYSTORE <code class="codeph">FROM KEYSTORE '/etc/ORACLE/WALLETS/orcl</code> '通过<span class="italic">密码</span>识别;密钥库已更改。
</pre><p>运行此语句后， <code class="codeph">cwallet.sso</code>文件将显示在密钥库位置中。<code class="codeph">ewallet.p12</code>文件是受密码保护的钱包。
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>请遵循以下准则：</p>
                           <ul id="GUID-98BA94DA-571B-429C-8E7A-B6A1020E9420__UL_NRN_WRW_XFB" style="list-style-type:disc">
                              <li>创建自动登录密钥库（ <code class="codeph">.sso</code>文件）后，请勿删除<code class="codeph">PKCS#12</code>钱包（ <code class="codeph">ewallet.p12</code>文件）。您必须拥有<code class="codeph">PKCS#12</code>钱包才能在将来重新生成或重新生成TDE主加密密钥。默认情况下，此文件位于<code class="codeph">$ORACLE_BASE</code>或<code class="codeph">$ORACLE_HOME</code>位置的<code class="codeph">admin/ <span class="codeinlineitalic">db_unique_name</span> /wallet</code>目录中。
                              </li>
                              <li>请记住，透明数据加密仅在正确位置（ <code class="codeph">WALLET_ROOT</code> ， <code class="codeph">WALLET_LOCATION</code> ， <code class="codeph">ENCRYPTION_WALLET_LOCATION</code>或默认密钥库位置）可用时才使用自动登录密钥库，并且尚未执行打开加密密钥库的SQL语句。请注意，自动登录密钥库是加密的，因为它们具有系统生成的密码。如果设置了<code class="codeph">ENCRYPTION_WALLET_LOCATION</code>参数，则请注意不推荐使用此参数。Oracle建议您<code class="codeph">WALLET_ROOT</code>使用<code class="codeph">WALLET_ROOT</code>静态初始化参数和<code class="codeph">TDE_CONFIGURATION</code>动态初始化参数。
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-0AB76778-7D98-4C23-B848-C00BD05DFEFE" title="受密码保护的软件密钥库需要用户密码，该密码用于保护存储在密钥库中的密钥和凭证。">创建受密码保护的软件密钥库</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-F098129B-BBFF-4C86-B119-80AB706DB2A1" title="为软件密钥库指定目录位置后，可以创建密钥库。">步骤2：创建软件密钥库</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div><a id="ASOAG10285"></a><div class="props_rev_3"><a id="GUID-37296947-18DB-4CFA-A112-794A55E942E2" name="GUID-37296947-18DB-4CFA-A112-794A55E942E2"></a><h4 id="ASOAG-GUID-37296947-18DB-4CFA-A112-794A55E942E2" class="sect4">第3步：打开软件密钥库</h4>
                  <div>
                     <p>根据您创建的密钥库的类型，您必须先手动打开密钥库，然后才能使用它。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-F3652F6F-B1B8-485A-BCBE-32C0875E93E5">关于打开软件密钥库</a><br>必须先打开受密码保护的软件密钥库，然后才能在密钥库中创建或访问任何TDE主加密密钥。
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-A9C23E31-CF57-477A-9E85-856DD411718D">打开软件密钥库</a><br>要打开软件密钥库，必须将<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句与<code class="codeph">SET KEYSTORE OPEN</code>子句一起使用。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-1FA85E9E-5666-4CF3-A3C7-1F8A9230B0C9" title="软件密钥库是主加密密钥的容器，它驻留在软件文件系统中。">配置软件密钥库</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10286"></a><div class="props_rev_3"><a id="GUID-F3652F6F-B1B8-485A-BCBE-32C0875E93E5" name="GUID-F3652F6F-B1B8-485A-BCBE-32C0875E93E5"></a><h5 id="ASOAG-GUID-F3652F6F-B1B8-485A-BCBE-32C0875E93E5" class="sect5">关于打开软件密钥库</h5>
                     <div>
                        <p>必须先打开受密码保护的软件密钥库，然后才能在密钥库中创建或访问任何TDE主加密密钥。</p>
                        <p>许多透明数据加密操作都需要打开软件密钥库。您可以通过两种方式打开软件密钥库：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>通过发出<code class="codeph">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN</code>语句手动打开密钥库。之后，您可以执行操作。
                              </p>
                           </li>
                           <li>
                              <p>在<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句中包含<code class="codeph">FORCE KEYSTORE</code>子句，该语句用于执行操作。<code class="codeph">FORCE KEYSTORE</code>在操作期间临时打开密钥库，当操作完成时，密钥库将再次关闭。<code class="codeph">FORCE KEYSTORE</code>对于数据库负载很重的情况很有用。在这种情况下，由于对数据库中加密对象的并发访问，自动登录密钥库在关闭后但在用户有机会打开基于密码的密钥库之前立即继续打开。
                              </p>
                           </li>
                        </ul>
                        <p>密钥库可以处于以下状态：打开，关闭，打开但没有主加密密钥，打开但具有未知的主加密密钥，未定义或不可用（即， <code class="codeph">WALLET_ROOT</code>位置中不存在）。
                        </p>
                        <p>手动打开密钥库后，它将保持打开状态，直到您手动关闭它。每次重新启动数据库实例时，都必须手动打开密码密钥库以重新启用加密和解密操作。</p>
                        <p>您可以通过查询<code class="codeph">V$ENCRYPTION_WALLET</code>视图的<code class="codeph">STATUS</code>列来检查密钥库是否打开的<code class="codeph">STATUS</code> 。
                        </p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-AB8F896D-A068-47AC-AA26-DDA52BFE5699" title="对于软件和硬件密钥库，许多ADMINISTER KEY MANAGEMENT操作都需要访问密钥库密码。">执行需要密钥库密码的操作</a></li>
                              <li><a href="managing-keystores-encryption-keys-in-united-mode.html#GUID-75855CB2-3FBC-41E4-BC89-8EA2078E633E" title="您应该了解密钥库打开和关闭操作如何在联合模式下工作。">密钥库打开和关闭操作如何在联合模式下工作</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-37296947-18DB-4CFA-A112-794A55E942E2" title="根据您创建的密钥库的类型，您必须先手动打开密钥库，然后才能使用它。">步骤3：打开Software Keystore</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10287"></a><div class="props_rev_3"><a id="GUID-A9C23E31-CF57-477A-9E85-856DD411718D" name="GUID-A9C23E31-CF57-477A-9E85-856DD411718D"></a><h5 id="ASOAG-GUID-A9C23E31-CF57-477A-9E85-856DD411718D" class="sect5">打开软件密钥库</h5>
                     <div>
                        <p>要打开软件密钥库，必须将<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句与<code class="codeph">SET KEYSTORE OPEN</code>子句一起使用。
                        </p>
                        <ol>
                           <li class="stepexpand"><span>以已被授予<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限的用户身份登录数据库实例。</span><div>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm输入密码： <span class="italic">password</span>已连接。
</pre></div>
                           </li>
                           <li class="stepexpand"><span>运行<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句以打开密钥库。</span><div><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN由<span class="italic">密码</span>识别;密钥库已更改。</pre><p>要在配置自动登录密钥库并且当前处于打开状态时切换到打开受密码保护的软件密钥库，请按如下所示指定<code class="codeph">FORCE KEYSTORE</code>子句。
                                 </p><pre class="oac_no_warn" dir="ltr">管理员密钥管理设置KEYSTORE OPEN FORCE KEYORE由外部商店识别;密钥库已更改。</pre><p>此处， <code class="codeph">IDENTIFIED BY EXTERNAL STORE</code>子句包含在语句中，因为密钥库凭据存在于外部存储中。这样可以打开受密码保护的密钥库，而无需在语句本身中指定密钥库密码。
                                 </p>
                                 <p>如果已设置<code class="codeph">WALLET_ROOT</code>参数，则Oracle数据库通过在此路径中搜索来查找外部存储： <code class="codeph"><span class="codeinlineitalic">WALLET_ROOT</span> / <span class="codeinlineitalic">PDB_GUID</span> /tde_seps</code> 。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>确认密钥库已打开。</span><div><pre class="oac_no_warn" dir="ltr">从V $ ENCRYPTION_WALLET中选择状态;</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>请注意，如果密钥库已打开但尚未创建TDE主加密密钥，则<code class="codeph">V$ENCRYPTION_WALLET</code>视图的<code class="codeph">STATUS</code>列会提醒您<code class="codeph">OPEN_NO_MASTER_KEY</code>状态。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-37296947-18DB-4CFA-A112-794A55E942E2" title="根据您创建的密钥库的类型，您必须先手动打开密钥库，然后才能使用它。">步骤3：打开Software Keystore</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG10288"></a><div class="props_rev_3"><a id="GUID-15E41F0A-5D80-4A7A-88F6-30EE86FA44E8" name="GUID-15E41F0A-5D80-4A7A-88F6-30EE86FA44E8"></a><h4 id="ASOAG-GUID-15E41F0A-5D80-4A7A-88F6-30EE86FA44E8" class="sect4">步骤4：在软件密钥库中设置TDE主加密密钥</h4>
                  <div>
                     <p>密钥库打开后，您可以为其设置TDE主加密密钥。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-C44968C5-9B77-4D19-82F4-5705268BF429">关于设置软件密钥库TDE主加密密钥</a><br>TDE主加密密钥存储在密钥库中。
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-9C72F219-B6DC-4F57-B5FC-40F1F4C1EA21">在软件密钥库中设置TDE主加密密钥</a><br>要在软件密钥库中设置TDE主加密密钥，请使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句和<code class="codeph">SET KEY</code>子句。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-1FA85E9E-5666-4CF3-A3C7-1F8A9230B0C9" title="软件密钥库是主加密密钥的容器，它驻留在软件文件系统中。">配置软件密钥库</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10289"></a><div class="props_rev_3"><a id="GUID-C44968C5-9B77-4D19-82F4-5705268BF429" name="GUID-C44968C5-9B77-4D19-82F4-5705268BF429"></a><h5 id="ASOAG-GUID-C44968C5-9B77-4D19-82F4-5705268BF429" class="sect5">关于设置软件密钥库TDE主加密密钥</h5>
                     <div>
                        <p>TDE主加密密钥存储在密钥库中。</p>
                        <p>TDE主加密密钥保护<a href="glossary.html#GUID-78CFC3BC-9BDD-406E-A6E2-2374AC636269"><span class="xrefglossterm">TDE表密钥</span></a>和<a href="glossary.html#GUID-5101B9BB-386F-4826-B639-2BE246A66E90"><span class="xrefglossterm">表空间加密密钥</span></a> 。默认情况下，TDE主加密密钥是TDE生成的密钥。您可以通过查询<code class="codeph">V$ENCRYPTION_WALLET</code>视图的<code class="codeph">STATUS</code>列来查找密钥库是否没有TDE主加密密钥集或未知的TDE主加密密钥。
                        </p>
                        <p>您可以在数据库外部手动创建主加密ID，这对云环境很有用。您还可以创建TDE主加密密钥以供以后使用，然后手动激活它们。</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-270396F9-B023-4F57-8640-D19445F36CF8" title="您可以通过生成TDE主加密密钥ID在数据库外部创建用户定义的TDE主加密密钥。">创建用户定义的TDE主加密密钥</a></li>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-EA686044-5B10-4F70-88F2-B45BF1DD1E55" title="您可以创建可在以后激活的TDE主加密密钥。">创建TDE主加密密钥以供以后使用</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-15E41F0A-5D80-4A7A-88F6-30EE86FA44E8" title="密钥库打开后，您可以为其设置TDE主加密密钥。">步骤4：在软件密钥库中设置TDE主加密密钥</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10290"></a><div class="props_rev_3"><a id="GUID-9C72F219-B6DC-4F57-B5FC-40F1F4C1EA21" name="GUID-9C72F219-B6DC-4F57-B5FC-40F1F4C1EA21"></a><h5 id="ASOAG-GUID-9C72F219-B6DC-4F57-B5FC-40F1F4C1EA21" class="sect5">在软件密钥库中设置TDE主加密密钥</h5>
                     <div>
                        <p>要在软件密钥库中设置TDE主加密密钥，请使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句和<code class="codeph">SET KEY</code>子句。
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>以已被授予<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限的用户身份登录数据库实例。
                                 </p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm输入密码： <span class="italic">password</span>已连接。
</pre></li>
                              <li>
                                 <p>确保数据库在<code class="codeph">READ WRITE</code>模式下打开。
                                 </p>
                                 <p>如果<code class="codeph">OPEN_MODE</code>设置为<code class="codeph">READ WRITE</code>则可以设置TDE主加密密钥。要查找状态，请查询<code class="codeph">V$DATABASE</code>动态视图的<code class="codeph">OPEN_MODE</code>列。（如果无法访问此视图，请以<code class="codeph">SYSDBA</code>身份连接并再次尝试查询。要以<code class="codeph">SYSKM</code>身份连接此类查询，必须为其创建密码文件。）
                                 </p>
                              </li>
                              <li>
                                 <p>使用以下语法在软件中设置TDE主加密密钥：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理集密钥[使用标记' <span class="italic">标记</span> '] [强制关键字]由[外部存储]标识<span class="italic">keystore_password</span> [WITH BACKUP [使用' <span class="italic">backup_identifier</span> ']];</pre><p>在本规范中：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="italic"><code class="codeph">tag</code></span>是您定义的关联属性和信息。将此设置括在单引号（ <code class="codeph">' '</code> ）中。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code>临时打开此操作的受密码保护的密钥库。您必须打开此操作的密钥库。
                                       </p>
                                    </li>
                                    <li>
                                       <p>如果密钥库已关闭，则应包括<code class="codeph">FORCE KEYSTORE</code> 。这会在设置TDE主加密密钥之前自动打开密钥库。当配置自动登录密钥库并且当前打开时， <code class="codeph">FORCE KEYSTORE</code>子句还会切换到打开受密码保护的软件密钥库。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">IDENTIFIED BY</code>指定密钥库密码。或者，如果密钥库密码位于外部存储中，则可以使用<code class="codeph">IDENTIFIED BY EXTERNAL STORE</code>子句。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">WITH BACKUP</code>创建密钥库的备份。您必须将此选项用于受密码保护的密钥库。（可选）您可以使用<code class="codeph">USING</code>子句添加备份的简要说明。将此描述括在单引号（ <code class="codeph">' '</code> ）中。该标识符被附加到指定密钥库文件（例如， <code class="codeph">ewallet_</code> <span class="italic"><code class="codeph">time_stamp</code></span> <code class="codeph">_emp_key_backup.p12</code> ，与<code class="codeph">emp_key_backup</code>作为备份标识符）。遵循操作系统使用的文件命名约定。
                                       </p>
                                    </li>
                                 </ul>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理设置密钥强制关键字由<span class="italic">keystore_password</span>标识，带有备份使用'emp_key_backup';密钥库已更改。</pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-15E41F0A-5D80-4A7A-88F6-30EE86FA44E8" title="密钥库打开后，您可以为其设置TDE主加密密钥。">步骤4：在软件密钥库中设置TDE主加密密钥</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG10291"></a><div class="props_rev_3"><a id="GUID-9D157063-2C48-40AC-8697-0FD1A866F038" name="GUID-9D157063-2C48-40AC-8697-0FD1A866F038"></a><h4 id="ASOAG-GUID-9D157063-2C48-40AC-8697-0FD1A866F038" class="sect4">第5步：加密您的数据</h4>
                  <div>
                     <p>现在您已完成密钥库配置，您可以开始加密PDB中的数据。</p>
                     <div class="section">
                        <p>您可以加密单个表列或整个表空间或数据库中的数据。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="configuring-transparent-data-encryption.html#GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" title="您可以使用透明数据加密来加密数据库表中的各个列。">加密表中的列</a></li>
                           <li><a href="configuring-transparent-data-encryption.html#GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" title="您可以在脱机和联机表空间和数据库上执行加密操作。">表空间和数据库的加密转换</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-1FA85E9E-5666-4CF3-A3C7-1F8A9230B0C9" title="软件密钥库是主加密密钥的容器，它驻留在软件文件系统中。">配置软件密钥库</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="ASOAG10292"></a><div class="props_rev_3"><a id="GUID-753C4808-CC51-4DA1-A5C3-980417FDAB14" name="GUID-753C4808-CC51-4DA1-A5C3-980417FDAB14"></a><h3 id="ASOAG-GUID-753C4808-CC51-4DA1-A5C3-980417FDAB14" class="sect3">配置硬件密钥库</h3>
               <div>
                  <p>硬件密钥库位于硬件安全模块（HSM）中，该模块用于存储加密密钥。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-B2A6A003-BA45-4740-8BA8-308307CACC33">关于配置硬件（外部）密钥库</a><br>硬件密钥库（也称为外部密钥库）是为加密密钥提供安全存储的单独服务器或设备。
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-3F97FA3A-75D6-47BB-9678-72F34392983C">步骤1：配置硬件密钥库类型</a><br>您可以通过设置<code class="codeph">TDE_CONFIGURATION</code>参数来配置硬件密钥库类型。
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-7838C4B8-FF6A-4B81-86C1-8583D3555291">步骤2：配置硬件安全模块</a><br>要配置第三方硬件安全模块，必须将PKCS＃11库复制到正确的位置，并按照供应商的说明进行操作。
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-4FBC5088-A045-4306-88C0-FEBC07CA18AC">第3步：打开硬件密钥库</a><br>配置硬件安全模块后，必须先打开硬件密钥库，然后才能使用它。
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-96BEF7DD-2B37-48F2-9651-38059DE499C5">步骤4：设置硬件密钥库TDE主加密密钥</a><br>打开硬件密钥库后，即可设置硬件密钥库TDE主加密密钥。
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-34017F99-A5AC-46BF-828A-1EBDF51A796D">第5步：加密您的数据</a><br>现在您已完成硬件密钥库或Oracle Key Vault密钥库的配置，您可以开始加密数据。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-C5D20EAE-3369-411F-9A7E-13AB14139F1D" title="您可以配置软件或硬件密钥库，以用于单个表列或整个表空间。">配置透明数据加密</a></p>
                     </div>
                  </div>
               </div>
               <a id="ASOAG10293"></a><div class="props_rev_3"><a id="GUID-B2A6A003-BA45-4740-8BA8-308307CACC33" name="GUID-B2A6A003-BA45-4740-8BA8-308307CACC33"></a><h4 id="ASOAG-GUID-B2A6A003-BA45-4740-8BA8-308307CACC33" class="sect4">关于配置硬件（外部）密钥库</h4>
                  <div>
                     <p>硬件密钥库（也称为外部密钥库）是为加密密钥提供安全存储的单独服务器或设备。</p>
                     <p>外部密钥库位于Oracle数据库的外部。Oracle数据库可以与外部密钥库连接，但不能在Oracle接口之外操作它们。Oracle数据库可以请求外部密钥库创建密钥，但无法定义此密钥如何存储在外部数据库中。（相反，对于使用TDE创建的软件密钥库，Oracle数据库具有完全控制权：即，您可以使用SQL语句来操作此类密钥库。）外部密钥库的示例是硬件安全模块或Oracle Key Vault密钥库。可以集中管理多个数据库之间的外部密钥库，例如Oracle Key Vault。</p>
                     <p>要为硬件安全模块（硬件密钥库）配置密钥库，必须首先在<code class="codeph">TDE_CONFIGURATION</code>参数设置中包含密钥库类型，配置并打开硬件密钥库，然后设置硬件密钥库TDE主加密密钥。简而言之，每个数据库有一个硬件密钥库，数据库通过检查您在<code class="codeph">TDE_CONFIGURATION</code>参数中定义的密钥库类型来定位此密钥库。
                     </p>
                     <p>运行<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句时如何指定<code class="codeph">IDENTIFIED BY</code>子句取决于硬件密钥库的类型。在大多数情况下，在本指南的示例中，您将使用以下语法来实现硬件安全模块（ <code class="codeph">HSM</code> ）或云密钥管理服务（ <code class="codeph">KMS</code> ）密钥库：</p><pre class="oac_no_warn" dir="ltr">由“ <span class="italic">user_name</span> ： <span class="italic">password</span> ”标识</pre><p>但是，根据您站点的HSM配置，凭证的语法可能是<code class="codeph">“ <span class="codeinlineitalic">password</span> : <span class="codeinlineitalic">user_name</span> ”</code> 。
                     </p>
                     <p>对于Oracle Key Vault密钥库，您可以省略<code class="codeph"><span class="codeinlineitalic">user_name</span></code>和冒号，但必须包含引号：</p><pre class="oac_no_warn" dir="ltr">通过“ <span class="italic">密码</span> ”识别</pre><p>配置硬件密钥库后，您就可以开始加密数据了。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-753C4808-CC51-4DA1-A5C3-980417FDAB14" title="硬件密钥库位于硬件安全模块（HSM）中，该模块用于存储加密密钥。">配置硬件密钥库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10294"></a><div class="props_rev_3"><a id="GUID-3F97FA3A-75D6-47BB-9678-72F34392983C" name="GUID-3F97FA3A-75D6-47BB-9678-72F34392983C"></a><h4 id="ASOAG-GUID-3F97FA3A-75D6-47BB-9678-72F34392983C" class="sect4">步骤1：配置硬件密钥库类型</h4>
                  <div>
                     <p>您可以通过设置<code class="codeph">TDE_CONFIGURATION</code>参数来配置硬件密钥库类型。
                     </p>
                     <ol>
                        <li class="stepexpand"><span>以已被授予<code class="codeph">SYSDBA</code>管理权限的用户身份登录数据库实例。</span><div>例如：<pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as sysdba输入密码： <span class="italic">password</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>设置<code class="codeph">TDE_CONFIGURATION</code>动态初始化参数以使用以下语法指定密钥库类型：</span><div><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION =“KEYSTORE_CONFIGURATION = <span class="italic">keystore_type</span> ”SCOPE = <span class="italic">scope_type</span> ;</pre><p>在本规范中：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">keystore_type</span></code>可以是以下类型之一：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><code class="codeph">HSM</code>配置硬件安全模块（HSM）密钥库</p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">OKV</code>配置Oracle Key Vault密钥库</p>
                                       </li>
                                    </ul>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="codeinlineitalic">scope_type</span></code>设置范围的类型（例如， <code class="codeph">both</code> ， <code class="codeph">memory</code>或<code class="codeph">spfile</code> 。
                                    </p>
                                 </li>
                              </ul>
                              <p>例如，要在参数文件（ <code class="codeph">pfile</code> ）正在使用时配置HSM密钥库，请将<code class="codeph">scope</code>设置为<code class="codeph">memory</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION =“KEYSTORE_CONFIGURATION = HSM”scope = memory;</pre><p>配置Oracle密钥库密钥库如果服务器参数文件（ <code class="codeph">spfile</code> ）在使用中，设定<code class="codeph">scope</code> ，以<code class="codeph">both</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET TDE_CONFIGURATION =“KEYSTORE_CONFIGURATION = OKV”scope = both;</pre></div>
                        </li>
                        <li class="stepexpand"><span>重启数据库。</span><div><pre class="oac_no_warn" dir="ltr">关机立即启动</pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-753C4808-CC51-4DA1-A5C3-980417FDAB14" title="硬件密钥库位于硬件安全模块（HSM）中，该模块用于存储加密密钥。">配置硬件密钥库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10295"></a><div class="props_rev_3"><a id="GUID-7838C4B8-FF6A-4B81-86C1-8583D3555291" name="GUID-7838C4B8-FF6A-4B81-86C1-8583D3555291"></a><h4 id="ASOAG-GUID-7838C4B8-FF6A-4B81-86C1-8583D3555291" class="sect4">步骤2：配置硬件安全模块</h4>
                  <div>
                     <p>要配置第三方硬件安全模块，必须将PKCS＃11库复制到正确的位置，并按照供应商的说明进行操作。</p>
                     <div class="section">如果您使用的是Oracle Key Vault，则可以绕过此部分。</div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>将PKCS＃11库复制到正确的路径。</p>
                              <p>您的硬件密钥库供应商应为您提供关联的PKCS＃11库。一次只支持一个PKCS＃11库。如果要使用新供应商提供的硬件密钥库，则必须使用新供应商中的库替换早期供应商的PKCS＃11库。</p>
                              <p>将此库复制到适当的位置以确保Oracle数据库可以找到此库：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="bold">UNIX系统：</span>使用以下语法将库复制到此目录：</p><pre class="oac_no_warn" dir="ltr">/ opt / oracle / extapi / [32,64] / hsm / { <span class="italic">VENDOR</span> } / { <span class="italic">VERSION</span> } / lib <span class="italic">apiname。</span>所以</pre></li>
                                 <li>
                                    <p><span class="bold">Windows系统：</span>使用以下语法将库复制到此目录：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">％SYSTEM_DRIVE％</span> \ oracle \ extapi \ [32,64] \ hsm \ { <span class="italic">VENDOR</span> } \ { <span class="italic">VERSION</span> } \ lib <span class="italic">apiname。</span> DLL</pre></li>
                              </ul>
                              <p>在本规范中：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">[32,64]</code>指定提供的二进制文件是32位还是64位。
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="italic"><code class="codeph">VENDOR</code></span>代表供应库的供应商的名称</p>
                                 </li>
                                 <li>
                                    <p><span class="italic"><code class="codeph">VERSION</code></span>指的是库的版本。最好采用格式<span class="italic"><code class="codeph">number.number.number</code></span></p>
                                 </li>
                                 <li>
                                    <p><span class="italic"><code class="codeph">apiname</code></span>不需要特殊格式。但是， <span class="italic"><code class="codeph">apiname</code></span>必须以单词<code class="codeph">lib</code>为前缀，如语法中所示。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li id="GUID-7838C4B8-FF6A-4B81-86C1-8583D3555291__CIHHFABB">
                              <p>按照供应商的说明设置硬件密钥库。</p>
                              <p>使用硬件密钥库管理界面和HSM供应商提供的说明来设置硬件密钥库。创建数据库必须用于与硬件密钥库交互的用户帐户和密码。此过程创建并配置与Oracle数据库通信的硬件密钥库。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-753C4808-CC51-4DA1-A5C3-980417FDAB14" title="硬件密钥库位于硬件安全模块（HSM）中，该模块用于存储加密密钥。">配置硬件密钥库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10296"></a><div class="props_rev_3"><a id="GUID-4FBC5088-A045-4306-88C0-FEBC07CA18AC" name="GUID-4FBC5088-A045-4306-88C0-FEBC07CA18AC"></a><h4 id="ASOAG-GUID-4FBC5088-A045-4306-88C0-FEBC07CA18AC" class="sect4">第3步：打开硬件密钥库</h4>
                  <div>
                     <p>配置硬件安全模块后，必须先打开硬件密钥库，然后才能使用它。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-CEDB143A-BC7E-43EF-AD41-59BD0ED36421">关于打开硬件密钥库</a><br>必须先打开硬件密钥库，以便数据库可以访问它，然后才能执行任何加密或解密。
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-81E6D2BA-EE27-4D35-96FB-2FFC0BCD396B">打开硬件密钥库</a><br>要打开硬件密钥库，请使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句和<code class="codeph">SET KEYSTORE OPEN</code>子句。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-753C4808-CC51-4DA1-A5C3-980417FDAB14" title="硬件密钥库位于硬件安全模块（HSM）中，该模块用于存储加密密钥。">配置硬件密钥库</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10297"></a><div class="props_rev_3"><a id="GUID-CEDB143A-BC7E-43EF-AD41-59BD0ED36421" name="GUID-CEDB143A-BC7E-43EF-AD41-59BD0ED36421"></a><h5 id="ASOAG-GUID-CEDB143A-BC7E-43EF-AD41-59BD0ED36421" class="sect5">关于打开硬件密钥库</h5>
                     <div>
                        <p>必须先打开硬件密钥库，以便数据库可以访问它，然后才能执行任何加密或解密。</p>
                        <p>如果数据库需要恢复操作（例如，如果数据库未完全关闭，并且具有需要恢复的加密表空间），则必须先打开硬件密钥库，然后才能打开数据库本身。</p>
                        <p>您可以通过两种方式打开硬件密钥库：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>通过发出<code class="codeph">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN</code>语句手动打开密钥库。之后，您可以执行操作。
                              </p>
                           </li>
                           <li>
                              <p>在<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句中包含<code class="codeph">FORCE KEYSTORE</code>子句。<code class="codeph">FORCE KEYSTORE</code>在操作期间临时打开密钥库，当操作完成时，密钥库将再次关闭。<code class="codeph">FORCE KEYSTORE</code>对于数据库负载很重的情况很有用。在这种情况下，由于对数据库中加密对象的并发访问，自动登录密钥库在关闭之后但在用户有机会打开基于密码的密钥库之前立即继续打开。
                              </p>
                           </li>
                        </ul>
                        <p>要检查密钥库的<code class="codeph">STATUS</code> ，请查询<code class="codeph">V$ENCRYPTION_WALLET</code>视图的<code class="codeph">STATUS</code>列。密钥库可以处于以下状态： <code class="codeph">CLOSED</code> ， <code class="codeph">NOT_AVAILABLE</code> （即， <code class="codeph">WALLET_ROOT</code>位置中不存在）， <code class="codeph">OPEN</code> ， <code class="codeph">OPEN_NO_MASTER_KEY</code> ， <code class="codeph">OPEN_UNKNOWN_MASTER_KEY_STATUS</code> 。</p>
                        <p>请注意，对于硬件密钥库，如果数据库处于已装入状态，则无法检查是否已设置主密钥，因为数据字典不可用。在这种情况下，状态将为<code class="codeph">OPEN_UNKNOWN_MASTER_KEY_STATUS</code> 。</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="managing-keystores-encryption-keys-in-united-mode.html#GUID-75855CB2-3FBC-41E4-BC89-8EA2078E633E" title="您应该了解密钥库打开和关闭操作如何在联合模式下工作。">密钥库打开和关闭操作如何在联合模式下工作</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-4FBC5088-A045-4306-88C0-FEBC07CA18AC" title="配置硬件安全模块后，必须先打开硬件密钥库，然后才能使用它。">步骤3：打开Hardware Keystore</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10298"></a><div class="props_rev_3"><a id="GUID-81E6D2BA-EE27-4D35-96FB-2FFC0BCD396B" name="GUID-81E6D2BA-EE27-4D35-96FB-2FFC0BCD396B"></a><h5 id="ASOAG-GUID-81E6D2BA-EE27-4D35-96FB-2FFC0BCD396B" class="sect5">打开硬件密钥库</h5>
                     <div>
                        <p>要打开硬件密钥库，请使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句和<code class="codeph">SET KEYSTORE OPEN</code>子句。
                        </p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>以已被授予<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限的用户身份登录数据库实例。
                                 </p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm输入密码： <span class="italic">password</span>已连接。
</pre></li>
                              <li>
                                 <p>使用以下语法打开硬件密钥库：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理设置KEYSTORE OPEN [FORCE KEYSTORE]由“ <span class="italic">hardware_keystore_password</span> ”识别;</pre><p>在本规范中：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>如果密钥库已关闭， <code class="codeph">FORCE KEYSTORE</code>启用密钥库操作。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">IDENTIFIED BY</code>可以是以下设置之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">EXTERNAL STORE</code>使用存储在外部存储中的密钥库密码来执行密钥库操作。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph"><span class="codeinlineitalic">hardware_keystore_credentials</span></code>是指HSM或Oracle Key Vault硬件密钥库的凭据。对于HSM，请使用此格式指定凭据，用引号括起并用冒号分隔组件： <code class="codeph">“ <span class="codeinlineitalic">user_name</span> : <span class="codeinlineitalic">password</span> ”</code> ，其中<code class="codeph"><span class="codeinlineitalic">user_name</span></code>是创建HSM的用户，密码是此用户的密码。对于Oracle Key Vault，仅输入创建密钥库的用户的密码。用引号括起此密码。
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                 </ul>
                                 <p>例如，对于HSM：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN由“psmith： <span class="italic">password</span> ”识别;密钥库已更改。
</pre></li>
                              <li>
                                 <p>每次重新启动数据库实例时重复此过程。</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-4FBC5088-A045-4306-88C0-FEBC07CA18AC" title="配置硬件安全模块后，必须先打开硬件密钥库，然后才能使用它。">步骤3：打开Hardware Keystore</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG10299"></a><div class="props_rev_3"><a id="GUID-96BEF7DD-2B37-48F2-9651-38059DE499C5" name="GUID-96BEF7DD-2B37-48F2-9651-38059DE499C5"></a><h4 id="ASOAG-GUID-96BEF7DD-2B37-48F2-9651-38059DE499C5" class="sect4">步骤4：设置硬件密钥库TDE主加密密钥</h4>
                  <div>
                     <p>打开硬件密钥库后，即可设置硬件密钥库TDE主加密密钥。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-E3DC7C57-A8F3-41D5-98FB-1DBE6EE10D1E">关于设置硬件密钥库TDE主加密密钥</a><br>您必须创建存储在硬件密钥库中的TDE主加密密钥。
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-6781E98E-F59C-420E-AC7E-8CC57D33E706">设置新的TDE主加密密钥</a><br>如果以前没有为透明数据加密配置硬件密钥库，则应完成此过程。
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-5CDB2D10-81DE-4C98-9F9C-155C45E31CDB">迁移先前配置的TDE主加密密钥</a><br>如果先前已配置软件密钥库，则必须迁移先前配置的TDE主加密密钥。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-753C4808-CC51-4DA1-A5C3-980417FDAB14" title="硬件密钥库位于硬件安全模块（HSM）中，该模块用于存储加密密钥。">配置硬件密钥库</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10502"></a><div class="props_rev_3"><a id="GUID-E3DC7C57-A8F3-41D5-98FB-1DBE6EE10D1E" name="GUID-E3DC7C57-A8F3-41D5-98FB-1DBE6EE10D1E"></a><h5 id="ASOAG-GUID-E3DC7C57-A8F3-41D5-98FB-1DBE6EE10D1E" class="sect5">关于设置硬件密钥库TDE主加密密钥</h5>
                     <div>
                        <p>您必须创建存储在硬件密钥库中的TDE主加密密钥。</p>
                        <p>Oracle数据库使用主加密密钥来加密或解密硬件安全模块内的<a href="glossary.html#GUID-78CFC3BC-9BDD-406E-A6E2-2374AC636269"><span class="xrefglossterm">TDE表密钥</span></a>或<a href="glossary.html#GUID-5101B9BB-386F-4826-B639-2BE246A66E90"><span class="xrefglossterm">表空间加密密钥</span></a> 。
                        </p>
                        <p>如果以前没有为TDE配置软件密钥库，则必须设置主加密密钥。如果您已为TDE配置了软件密钥库，则必须将其迁移到硬件安全模块。</p>
                        <p>与当前的主加密密钥一起，Oracle钱包维护历史主加密密钥，这些密钥是在重新键入主加密密钥的每次重新密钥操作之后生成的。这些历史主密钥有助于恢复以前使用其中一个历史主加密密钥进行的Oracle数据库备份。</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-6781E98E-F59C-420E-AC7E-8CC57D33E706" title="如果以前没有为透明数据加密配置硬件密钥库，则应完成此过程。">设置新的TDE主加密密钥</a></li>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-5CDB2D10-81DE-4C98-9F9C-155C45E31CDB" title="如果先前已配置软件密钥库，则必须迁移先前配置的TDE主加密密钥。">迁移先前配置的TDE主加密密钥</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-96BEF7DD-2B37-48F2-9651-38059DE499C5" title="打开硬件密钥库后，即可设置硬件密钥库TDE主加密密钥。">步骤4：设置硬件密钥库TDE主加密密钥</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10503"></a><div class="props_rev_3"><a id="GUID-6781E98E-F59C-420E-AC7E-8CC57D33E706" name="GUID-6781E98E-F59C-420E-AC7E-8CC57D33E706"></a><h5 id="ASOAG-GUID-6781E98E-F59C-420E-AC7E-8CC57D33E706" class="sect5">设置新的TDE主加密密钥</h5>
                     <div>
                        <p>如果以前没有为透明数据加密配置硬件密钥库，则应完成此过程。</p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>以已被授予<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限的用户身份登录数据库实例。
                                 </p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as syskm输入密码： <span class="italic">password</span>已连接。
</pre></li>
                              <li>
                                 <p>确保数据库在<code class="codeph">READ WRITE</code>模式下打开。
                                 </p>
                                 <p>如果<code class="codeph">OPEN_MODE</code>设置为<code class="codeph">READ WRITE</code>则可以设置主加密密钥。要查找状态，请为非多租户环境查询<code class="codeph">V$DATABASE</code>动态视图的<code class="codeph">OPEN_MODE</code>列。如果您处于多租户环境中，请运行<code class="codeph">show_pdbs</code>命令。
                                 </p>
                              </li>
                              <li>
                                 <p>使用以下语法设置新的主加密密钥：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理集密钥[使用标记' <span class="italic">标记</span> '] [FORCE KEYSTORE]由[EXTERNAL STORE | “ <span class="italic">hardware_keystore_credentials</span> ”];</pre><p>在本规范中：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="italic"><code class="codeph">tag</code></span>是您定义的关联属性和信息。将此设置括在单引号（ <code class="codeph">' '</code> ）中。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FORCE KEYSTORE</code>临时打开此操作的受密码保护的密钥库。您必须打开此操作的密钥库。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">IDENTIFIED BY</code>可以是以下设置之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">EXTERNAL STORE</code>使用存储在外部存储中的密钥库密码来执行密钥库操作。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph"><span class="codeinlineitalic">hardware_keystore_credentials</span></code>是指HSM或Oracle Key Vault硬件密钥库的凭据。对于HSM，请使用此格式指定凭据，用引号括起并用冒号分隔组件： <code class="codeph">“ <span class="codeinlineitalic">user_name</span> : <span class="codeinlineitalic">password</span> ”</code> ，其中<code class="codeph"><span class="codeinlineitalic">user_name</span></code>是创建HSM的用户，密码是此用户的密码。对于Oracle Key Vault，仅输入创建密钥库的用户的密码。用引号括起此密码。
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                 </ul>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">管理员密钥管理设置关键力量关键字由“psmith： <span class="italic">password</span> ”标识;密钥库已更改。</pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-8E7F27F9-99A5-4233-BC16-5B0479F947F9" title="必须先打开密钥库，然后才能创建TDE主加密密钥以供日后使用。">创建TDE主加密密钥供以后使用</a></li>
                              <li><a href="../admin/getting-started-with-database-administration.html#ADMIN11056" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-96BEF7DD-2B37-48F2-9651-38059DE499C5" title="打开硬件密钥库后，即可设置硬件密钥库TDE主加密密钥。">步骤4：设置硬件密钥库TDE主加密密钥</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10504"></a><div class="props_rev_3"><a id="GUID-5CDB2D10-81DE-4C98-9F9C-155C45E31CDB" name="GUID-5CDB2D10-81DE-4C98-9F9C-155C45E31CDB"></a><h5 id="ASOAG-GUID-5CDB2D10-81DE-4C98-9F9C-155C45E31CDB" class="sect5">迁移先前配置的TDE主加密密钥</h5>
                     <div>
                        <p>如果先前已配置软件密钥库，则必须迁移先前配置的TDE主加密密钥。</p>
                        <p>Oracle Data Pump和Oracle Recovery Manager等工具需要访问旧的软件密钥库，以便对使用软件密钥库导出或备份的数据执行解密和加密操作。您可以从软件迁移到硬件密钥库。</p>
                        <p>与当前的主加密密钥一起，Oracle密钥库维护在每次重新启动主加密密钥操作之后生成的历史主加密密钥。这些历史主加密密钥有助于恢复以前使用其中一个历史主加密密钥进行的Oracle数据库备份。</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-4335220F-49FF-40BC-9EB0-21442608F436" title="您可以在受密码保护的软件密钥库和硬件密钥库之间进行迁移。">在软件密码密钥库和硬件密钥库之间迁移</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-96BEF7DD-2B37-48F2-9651-38059DE499C5" title="打开硬件密钥库后，即可设置硬件密钥库TDE主加密密钥。">步骤4：设置硬件密钥库TDE主加密密钥</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div><a id="ASOAG10301"></a><div class="props_rev_3"><a id="GUID-34017F99-A5AC-46BF-828A-1EBDF51A796D" name="GUID-34017F99-A5AC-46BF-828A-1EBDF51A796D"></a><h4 id="ASOAG-GUID-34017F99-A5AC-46BF-828A-1EBDF51A796D" class="sect4">第5步：加密您的数据</h4>
                  <div>
                     <p>现在您已完成硬件密钥库或Oracle Key Vault密钥库的配置，您可以开始加密数据。</p>
                     <div class="section">
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/asoag&amp;id=OKVAG10489" target="_blank"><span><cite>“Oracle Key Vault管理员指南”</cite></span></a>介绍了如何配置Oracle Key Vault密钥库。
                        </p>
                        <p>您可以加密表或整个表空间中的各个列。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="configuring-transparent-data-encryption.html#GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" title="您可以使用透明数据加密来加密数据库表中的各个列。">加密表中的列</a></li>
                           <li><a href="configuring-transparent-data-encryption.html#GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" title="您可以在脱机和联机表空间和数据库上执行加密操作。">表空间和数据库的加密转换</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-753C4808-CC51-4DA1-A5C3-980417FDAB14" title="硬件密钥库位于硬件安全模块（HSM）中，该模块用于存储加密密钥。">配置硬件密钥库</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="ASOAG10143"></a><div class="props_rev_3"><a id="GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" name="GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE"></a><h3 id="ASOAG-GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" class="sect3">加密表中的列</h3>
               <div>
                  <p>您可以使用透明数据加密来加密数据库表中的各个列。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-86FCB830-28B8-4F7C-97B6-EB80B20D8752">关于加密表中的列</a><br>您可以加密表中的各个列。
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-E9DFE595-0119-4189-84AD-19FFE5683CC6">可以使用TDE列加密加密的数据类型</a><br>Oracle数据库支持一组可用于TDE列加密的特定数据类型。
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-9A78E72B-D9D9-4BA2-BFEF-11C0060B6F91">使用TDE列加密的限制</a><br>TDE列加密在SQL层执行。绕过SQL层的Oracle数据库实用程序无法使用TDE列加密服务。
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-FC8D6E7E-CD47-4972-89B4-E90CB8A811AA">使用加密列创建表</a><br>Oracle数据库提供了一系列不同的算法，您可以使用这些算法来定义加密列中使用的加密。
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-613F7E02-EA77-4CF4-9683-A0344DF724D0">加密现有表中的列</a><br>您可以加密现有表中的列。与新表一样，您可以选择使用不同的算法来确定加密。
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-9E4EC0E4-A395-4C79-B841-CB13BDE41B4C">在加密列上创建索引</a><br>您可以在加密列上创建索引。
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-3A298444-09BB-409E-94E5-1FA5FFA89A1D">将Salt添加到加密列</a><br>Salt是加密前添加到数据中的随机字符串，是加强加密数据安全性的一种方法。 。
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-F1C34179-BE14-4966-82B7-97904AB4CF44">从加密列中删除Salt</a><br>您可以使用<span class="apiname" translate="no">ALTER TABLE</span> SQL语句从加密列中删除salt。
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-2931A16D-84E8-4A42-8D01-662FD693A711">更改具有加密列的表的加密密钥或算法</a><br>您可以使用<code class="codeph">ALTER TABLE</code> SQL语句更改加密列中使用的加密密钥或算法。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-C5D20EAE-3369-411F-9A7E-13AB14139F1D" title="您可以配置软件或硬件密钥库，以用于单个表列或整个表空间。">配置透明数据加密</a></p>
                     </div>
                  </div>
               </div>
               <a id="ASOAG10302"></a><div class="props_rev_3"><a id="GUID-86FCB830-28B8-4F7C-97B6-EB80B20D8752" name="GUID-86FCB830-28B8-4F7C-97B6-EB80B20D8752"></a><h4 id="ASOAG-GUID-86FCB830-28B8-4F7C-97B6-EB80B20D8752" class="sect4">关于加密表中的列</h4>
                  <div>
                     <p>您可以加密表中的各个列。</p>
                     <p>是否选择加密单个列或整个表空间取决于表具有的数据类型。还有一些功能不支持TDE列加密。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="configuring-transparent-data-encryption.html#GUID-E9DFE595-0119-4189-84AD-19FFE5683CC6" title="Oracle数据库支持一组可用于TDE列加密的特定数据类型。">可以使用TDE列加密加密的数据类型</a></li>
                           <li><a href="configuring-transparent-data-encryption.html#GUID-9A78E72B-D9D9-4BA2-BFEF-11C0060B6F91" title="TDE列加密在SQL层执行。绕过SQL层的Oracle数据库实用程序无法使用TDE列加密服务。">使用TDE列加密的限制</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" title="您可以使用透明数据加密来加密数据库表中的各个列。">加密表中的列</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="ASOAG10158"></a><a id="ASOAG9579"></a><div class="props_rev_3"><a id="GUID-E9DFE595-0119-4189-84AD-19FFE5683CC6" name="GUID-E9DFE595-0119-4189-84AD-19FFE5683CC6"></a><h4 id="ASOAG-GUID-E9DFE595-0119-4189-84AD-19FFE5683CC6" class="sect4">可以使用TDE列加密加密的数据类型</h4>
                  <div>
                     <p>Oracle数据库支持一组可用于TDE列加密的特定数据类型。</p>
                     <div class="section">
                        <p>您可以加密使用各种不同数据类型的数据列。</p>
                        <p>支持的数据类型如下：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">BINARY_DOUBLE</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">BINARY_FLOAT</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">CHAR</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">日期</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">间隔第二天</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">间隔年至月</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">NCHAR</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">数</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">NVARCHAR2</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">RAW</code> （遗留或扩展）</p>
                           </li>
                           <li>
                              <p><code class="codeph">TIMESTAMP</code> （包括<code class="codeph">TIMESTAMP WITH TIME ZONE</code>和<code class="codeph">TIMESTAMP WITH LOCAL TIME ZONE</code> ）</p>
                           </li>
                           <li>
                              <p><code class="codeph">VARCHAR2</code> （传统或扩展）</p>
                           </li>
                        </ul>
                        <p>如果要加密大型二进制对象（LOB），则可以使用Oracle SecureFiles。Oracle SecureFiles使您可以安全地存储LOB数据。要使用SecureFiles加密LOB，请使用<code class="codeph">CREATE TABLE</code>或<code class="codeph">ALTER TABLE</code>语句。
                        </p>
                        <p>如果加密列大小大于列的数据类型允许的大小，则无法加密列。</p>
                        <p><a href="configuring-transparent-data-encryption.html#GUID-E9DFE595-0119-4189-84AD-19FFE5683CC6__CJAIDCFJ" title="数据类型和大小">表3-1</a>显示了各种数据类型的最大允许大小。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-E9DFE595-0119-4189-84AD-19FFE5683CC6__CJAIDCFJ">
                        <p class="titleintable">表3-1数据类型的最大允许大小</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="数据类型的最大允许大小" width="100%" border="1" summary="Data types and sizes" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d6228e4404">数据类型</th>
                                 <th align="left" valign="bottom" width="69%" id="d6228e4407">最大尺寸</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d6228e4412" headers="d6228e4404 ">
                                    <p><code class="codeph">CHAR</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d6228e4412 d6228e4407 ">
                                    <p>1932字节</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d6228e4420" headers="d6228e4404 ">
                                    <p><code class="codeph">VARCHAR2</code> （传统）</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d6228e4420 d6228e4407 ">
                                    <p>3932个字节</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d6228e4429" headers="d6228e4404 ">
                                    <p><code class="codeph">VARCHAR2</code> （扩展）</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d6228e4429 d6228e4407 ">
                                    <p>32,699字节</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d6228e4438" headers="d6228e4404 ">
                                    <p><code class="codeph">NVARCHAR2</code> （传统）</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d6228e4438 d6228e4407 ">
                                    <p>1966字节</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d6228e4447" headers="d6228e4404 ">
                                    <p><code class="codeph">NVARCHAR2</code> （扩展）</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d6228e4447 d6228e4407 ">
                                    <p>16,315字节</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d6228e4456" headers="d6228e4404 ">
                                    <p><code class="codeph">NCHAR</code></p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d6228e4456 d6228e4407 ">
                                    <p>966个字节</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d6228e4464" headers="d6228e4404 ">
                                    <p><code class="codeph">RAW</code> （扩展）</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d6228e4464 d6228e4407 ">
                                    <p>32,699字节</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <div class="infoboxnote" id="GUID-E9DFE595-0119-4189-84AD-19FFE5683CC6__GUID-3B5429F4-360E-415D-8E11-19A5B8AC079B">
                           <p class="notep1">注意：</p>
                           <p>TDE表空间加密没有这些数据类型限制。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="configuring-transparent-data-encryption.html#GUID-EA4F9C84-0BE8-44AF-8638-3B7EFE4CA92C" title="您应该了解加密表空间时使用透明数据加密的限制。">使用透明数据加密表空间加密的限制</a></li>
                           <li><a href="../adlob/using-oracle-LOBs-storage.html#ADLOB-GUID-36592CEE-0C08-46A4-8218-D6CB1EB9EA12" target="_blank"><span><cite>Oracle Database SecureFiles和大对象开发人员指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" title="您可以使用透明数据加密来加密数据库表中的各个列。">加密表中的列</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="ASOAG9518"></a><div class="props_rev_3"><a id="GUID-9A78E72B-D9D9-4BA2-BFEF-11C0060B6F91" name="GUID-9A78E72B-D9D9-4BA2-BFEF-11C0060B6F91"></a><h4 id="ASOAG-GUID-9A78E72B-D9D9-4BA2-BFEF-11C0060B6F91" class="sect4">使用TDE列加密的限制</h4>
                  <div>
                     <p>TDE列加密在SQL层执行。绕过SQL层的Oracle数据库实用程序无法使用TDE列加密服务。</p>
                     <p>不要将TDE列加密与以下数据库功能一起使用：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>B树以外的索引类型</p>
                        </li>
                        <li>
                           <p>范围扫描搜索索引</p>
                        </li>
                        <li>
                           <p>同步更改数据捕获</p>
                        </li>
                        <li>
                           <p>可传输的表空间</p>
                        </li>
                        <li>
                           <p>已创建为标识列的列</p>
                        </li>
                     </ul>
                     <p>此外，您不能使用TDE列加密来加密外键约束中使用的列。</p>
                     <p>必须使用这些不受支持的功能的应用程序可以使用<code class="codeph">DBMS_CRYPTO</code> PL / SQL程序包来满足其加密需求。
                     </p>
                     <p>透明数据加密可保护存储在磁盘或其他介质上的数据。它不保护传输中的数据。使用“ <a href="../dbseg/stong-authentication-administration-tools.html#DBSEG451" target="_blank"><span><cite>Oracle数据库安全指南”中</cite></span></a>讨论的网络加密解决方案来加密网络上的数据。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="using-transparent-data-encryption-with-other-oracle-features.html#GUID-15CB716C-74A5-42E5-9BCA-7EC9C9FFA712" title="Oracle Data Pump可以导出和导入包含加密列的表，以及加密整个转储集。">透明数据加密如何与导出和导入操作一起使用</a></li>
                           <li><a href="configuring-transparent-data-encryption.html#GUID-E9DFE595-0119-4189-84AD-19FFE5683CC6" title="Oracle数据库支持一组可用于TDE列加密的特定数据类型。">可以使用TDE列加密加密的数据类型</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" title="您可以使用透明数据加密来加密数据库表中的各个列。">加密表中的列</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="ASOAG9529"></a><div class="props_rev_3"><a id="GUID-FC8D6E7E-CD47-4972-89B4-E90CB8A811AA" name="GUID-FC8D6E7E-CD47-4972-89B4-E90CB8A811AA"></a><h4 id="ASOAG-GUID-FC8D6E7E-CD47-4972-89B4-E90CB8A811AA" class="sect4">使用加密列创建表</h4>
                  <div>
                     <p>Oracle数据库提供了一系列不同的算法，您可以使用这些算法来定义加密列中使用的加密。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-F2EECC3A-0AEC-48B7-8EC9-8CA829146A6B">关于使用加密列创建表</a><br>您可以使用<code class="codeph">CREATE TABLE</code> SQL语句创建具有加密列的表。
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-5235D492-19CB-4E23-80A0-68030C7D5C85">使用默认算法创建具有加密列的表</a><br>默认情况下，TDE使用<code class="codeph">AES</code>加密算法，密钥长度为192位（ <code class="codeph">AES192</code> ）。
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-F27449B1-AD0D-4F94-8249-EF072584FF68">使用无算法或非默认算法创建具有加密列的表</a><br>您可以使用<code class="codeph">CREATE TABLE</code> SQL语句创建具有加密列的表。
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-0332B6B4-2A41-498A-B584-713E5ED3AB62">使用NOMAC参数节省磁盘空间并提高性能</a><br>您可以绕过TDE执行的检查。这可以为每个加密值节省多达20个字节的磁盘空间。
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-DFAB21A7-7024-4A7E-9DFE-B6E667857DA7">示例：在CREATE TABLE语句中使用NOMAC参数</a><br>您可以使用<span class="apiname" translate="no">CREATE TABLE</span> SQL语句使用<span class="apiname" translate="no">NOMAC</span>参数加密表列。
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-ACAB9AA5-6EC8-4430-A799-54117177CC91">示例：更改表的完整性算法</a><br>您可以使用<span class="apiname" translate="no">ALTER TABLE</span> SQL语句更改数据库表的完整性算法。
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-936CC3D2-8102-454C-AC49-D0126929D738">在外部表中创建加密列</a><br>外部表功能使您可以访问外部源中的数据，就像数据位于数据库表中一样。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" title="您可以使用透明数据加密来加密数据库表中的各个列。">加密表中的列</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10375"></a><div class="props_rev_3"><a id="GUID-F2EECC3A-0AEC-48B7-8EC9-8CA829146A6B" name="GUID-F2EECC3A-0AEC-48B7-8EC9-8CA829146A6B"></a><h5 id="ASOAG-GUID-F2EECC3A-0AEC-48B7-8EC9-8CA829146A6B" class="sect5">关于使用加密列创建表</h5>
                     <div>
                        <p>您可以使用<code class="codeph">CREATE TABLE</code> SQL语句创建具有加密列的表。
                        </p>
                        <p>要使用加密列创建关系表，可以在使用<code class="codeph">CREATE TABLE</code> SQL语句定义数据库列时指定SQL <code class="codeph">ENCRYPT</code>子句。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-FC8D6E7E-CD47-4972-89B4-E90CB8A811AA" title="Oracle数据库提供了一系列不同的算法，您可以使用这些算法来定义加密列中使用的加密。">使用加密列创建表</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG9530"></a><div class="props_rev_3"><a id="GUID-5235D492-19CB-4E23-80A0-68030C7D5C85" name="GUID-5235D492-19CB-4E23-80A0-68030C7D5C85"></a><h5 id="ASOAG-GUID-5235D492-19CB-4E23-80A0-68030C7D5C85" class="sect5">使用默认算法创建具有加密列的表</h5>
                     <div>
                        <p>默认情况下，TDE使用<code class="codeph">AES</code>加密算法，密钥长度为192位（ <code class="codeph">AES192</code> ）。
                        </p>
                        <div class="section">
                           <p>如果在未指定算法的情况下加密表列，则使用<code class="codeph">AES192</code>算法对列进行加密。
                           </p>
                           <p>TDE增加了<a href="glossary.html#GUID-6803F75B-7883-4D0B-B1FF-0084AD65E001"><span class="xrefglossterm">盐</span></a>在加密前明文。添加盐使攻击者更难通过暴力攻击窃取数据。TDE还向数据添加消息验证代码（MAC）以进行完整性检查。默认情况下使用<code class="codeph">SHA-1</code>完整性算法。
                           </p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要创建加密列的表，请使用带有<code class="codeph">ENCRYPT</code>子句的<code class="codeph">CREATE TABLE</code> SQL语句。
                                 </p>
                                 <p>例如，要使用默认算法加密表列：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE employee（first_name VARCHAR2（128），last_name VARCHAR2（128），empID NUMBER，salary NUMBER（6） <span class="bold">ENCRYPT</span> ）;</pre><p>此示例创建一个带有加密列（ <code class="codeph">salary</code> ）的新表。该列使用默认加密算法（ <code class="codeph">AES192</code> ）加密。默认情况下会添加Salt和MAC。此示例假定密钥库已打开且已设置主加密密钥。
                                 </p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-5235D492-19CB-4E23-80A0-68030C7D5C85__GUID-0939699C-0204-41CB-A778-63F344B7DB5A">
                              <p class="notep1">注意：</p>
                              <p>如果表中有多个加密列，则所有这些列都必须使用相同的加密和完整性算法对。</p>
                              <p>Salt在列级别指定。这意味着表中的加密列可以选择不使用salt，而不管表中的其他加密列是否使用salt。</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-FC8D6E7E-CD47-4972-89B4-E90CB8A811AA" title="Oracle数据库提供了一系列不同的算法，您可以使用这些算法来定义加密列中使用的加密。">使用加密列创建表</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG9531"></a><div class="props_rev_3"><a id="GUID-F27449B1-AD0D-4F94-8249-EF072584FF68" name="GUID-F27449B1-AD0D-4F94-8249-EF072584FF68"></a><h5 id="ASOAG-GUID-F27449B1-AD0D-4F94-8249-EF072584FF68" class="sect5">使用无算法或非默认算法创建具有加密列的表</h5>
                     <div>
                        <p>您可以使用<code class="codeph">CREATE TABLE</code> SQL语句创建具有加密列的表。
                        </p>
                        <div class="section">
                           <p>默认情况下，TDE增加了<a href="glossary.html#GUID-6803F75B-7883-4D0B-B1FF-0084AD65E001"><span class="xrefglossterm">盐</span></a>在加密前的明文。添加盐使攻击者更难通过暴力攻击窃取数据。但是，如果您计划索引加密列，则必须使用<code class="codeph">NO SALT</code>参数。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要创建使用非默认算法或无算法的加密列的表，请运行<code class="codeph">CREATE TABLE</code> SQL语句，如下所示：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>如果您不想使用任何算法，请包含<code class="codeph">ENCRYPT NO SALT</code>子句。
                                       </p>
                                    </li>
                                    <li>
                                       <p>如果要使用非默认算法，则使用<code class="codeph">ENCRYPT USING</code>子句，然后使用单引号括起来的以下算法之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">3DES168</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AES128</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AES192</code> （默认）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">AES256</code></p>
                                          </li>
                                       </ul>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                           <p>以下示例显示如何为<code class="codeph">empID</code>和<code class="codeph">salary</code>列指定加密设置。
                           </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE employee（first_name VARCHAR2（128），last_name VARCHAR2（128），empID NUMBER <span class="bold">ENCRYPT NO SALT</span> ，薪水编号（6） <span class="bold">加密使用'3DES168'</span> ）;</pre><p>在这个例子中：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">empID</code>列已加密，不使用salt。<code class="codeph">empID</code>和<code class="codeph">salary</code>列都将使用<code class="codeph">3DES168</code>加密算法，因为表中的所有加密列必须使用相同的加密算法。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">salary</code>列使用<code class="codeph">3DES168</code>加密算法加密。请注意，指定算法的字符串必须用单引号（''）括起来。<code class="codeph">salary</code>列默认使用salt。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-FC8D6E7E-CD47-4972-89B4-E90CB8A811AA" title="Oracle数据库提供了一系列不同的算法，您可以使用这些算法来定义加密列中使用的加密。">使用加密列创建表</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10146"></a><div class="props_rev_3"><a id="GUID-0332B6B4-2A41-498A-B584-713E5ED3AB62" name="GUID-0332B6B4-2A41-498A-B584-713E5ED3AB62"></a><h5 id="ASOAG-GUID-0332B6B4-2A41-498A-B584-713E5ED3AB62" class="sect5">使用NOMAC参数节省磁盘空间并提高性能</h5>
                     <div>
                        <p>您可以绕过TDE执行的检查。这可以为每个加密值节省多达20个字节的磁盘空间。</p>
                        <div class="section">
                           <p>如果表中的行数和加密列数很大，则绕过TDE检查会累积大量磁盘空间。此外，这节省了处理周期并降低了与TDE相关的性能开销。</p>
                           <p>TDE默认使用<code class="codeph">SHA-1</code>完整性算法。表中的所有加密列必须使用相同的完整性算法。如果已使用<code class="codeph">SHA-1</code>算法的表列，则无法使用<code class="codeph">NOMAC</code>参数加密同一表中的另一列。
                           </p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要在加密和解密操作期间绕过完整性检查，请在<code class="codeph">CREATE TABLE</code>和<code class="codeph">ALTER TABLE</code>语句中使用<code class="codeph">NOMAC</code>参数。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="general-considerations-of-using-transparent-data-encryption.html#GUID-2B082CD7-EDDA-4705-9B61-1B1015AB287B" title="透明数据加密的性能可能会有所不同。">透明数据加密的性能和存储开销</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-FC8D6E7E-CD47-4972-89B4-E90CB8A811AA" title="Oracle数据库提供了一系列不同的算法，您可以使用这些算法来定义加密列中使用的加密。">使用加密列创建表</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="ASOAG10147"></a><div class="props_rev_3"><a id="GUID-DFAB21A7-7024-4A7E-9DFE-B6E667857DA7" name="GUID-DFAB21A7-7024-4A7E-9DFE-B6E667857DA7"></a><h5 id="ASOAG-GUID-DFAB21A7-7024-4A7E-9DFE-B6E667857DA7" class="sect5">示例：在CREATE TABLE语句中使用NOMAC参数</h5>
                     <div>
                        <p>您可以使用<span class="apiname" translate="no">CREATE TABLE</span> SQL语句使用<span class="apiname" translate="no">NOMAC</span>参数加密表列。
                        </p>
                        <p><a href="configuring-transparent-data-encryption.html#GUID-DFAB21A7-7024-4A7E-9DFE-B6E667857DA7__CHDGCAIG">例3-1</a>创建了一个带有加密列的表。<code class="codeph">empID</code>列使用<code class="codeph">NOMAC</code>参数加密。
                        </p>
                        <div class="example" id="GUID-DFAB21A7-7024-4A7E-9DFE-B6E667857DA7__CHDGCAIG">
                           <p class="titleinexample">示例3-1在CREATE TABLE语句中使用NOMAC参数</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE employee（first_name VARCHAR2（128），last_name VARCHAR2（128），empID NUMBER <span class="bold">ENCRYPT'NOMAC'</span> ，工资NUMBER（6））;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-FC8D6E7E-CD47-4972-89B4-E90CB8A811AA" title="Oracle数据库提供了一系列不同的算法，您可以使用这些算法来定义加密列中使用的加密。">使用加密列创建表</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10303"></a><div class="props_rev_3"><a id="GUID-ACAB9AA5-6EC8-4430-A799-54117177CC91" name="GUID-ACAB9AA5-6EC8-4430-A799-54117177CC91"></a><h5 id="ASOAG-GUID-ACAB9AA5-6EC8-4430-A799-54117177CC91" class="sect5">示例：更改表的完整性算法</h5>
                     <div>
                        <p>您可以使用<span class="apiname" translate="no">ALTER TABLE</span> SQL语句更改数据库表的完整性算法。
                        </p>
                        <p><a href="configuring-transparent-data-encryption.html#GUID-ACAB9AA5-6EC8-4430-A799-54117177CC91__CHDDAFEG">示例3-2</a>显示了如何更改表中加密列的完整性算法。加密算法设置为<code class="codeph">3DES168</code> ，完整性算法设置为<code class="codeph">SHA-1</code> 。第二个<code class="codeph">ALTER TABLE</code>语句将完整性算法设置为<code class="codeph">NOMAC</code> 。</p>
                        <div class="example" id="GUID-ACAB9AA5-6EC8-4430-A799-54117177CC91__CHDDAFEG">
                           <p class="titleinexample">例3-2更改表的完整性算法</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE EMPLOYEE REKEY使用'3DES168''SHA <span class="bold">-1</span> '; ALTER TABLE EMPLOYEE REKEY使用' <span class="bold">3DES168''NOMAC</span> ';</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-FC8D6E7E-CD47-4972-89B4-E90CB8A811AA" title="Oracle数据库提供了一系列不同的算法，您可以使用这些算法来定义加密列中使用的加密。">使用加密列创建表</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10148"></a><a id="ASOAG9532"></a><div class="props_rev_3"><a id="GUID-936CC3D2-8102-454C-AC49-D0126929D738" name="GUID-936CC3D2-8102-454C-AC49-D0126929D738"></a><h5 id="ASOAG-GUID-936CC3D2-8102-454C-AC49-D0126929D738" class="sect5">在外部表中创建加密列</h5>
                     <div>
                        <p>外部表功能使您可以访问外部源中的数据，就像数据位于数据库表中一样。</p>
                        <div class="section">
                           <p>可以使用<code class="codeph">ORACLE_DATAPUMP</code>访问驱动程序更新外部表。
                           </p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要加密外部表中的特定列，请在定义这些列时使用<code class="codeph">ENCRYPT</code>子句：</p>
                                 <p>系统生成的密钥对列进行加密。例如，以下<code class="codeph">CREATE TABLE</code> SQL语句使用<code class="codeph">3DES168</code>算法加密<code class="codeph">ssn</code>列：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE emp_ext（first_name，....
    <span class="bold">ssn ENCRYPT使用'3DES168'</span> ，....

</pre></li>
                           </ul>
                           <p>如果您计划将外部表移动到新位置，则无法使用随机生成的密钥来加密列。这是因为随机生成的密钥在新位置不可用。</p>
                           <p>对于此类方案，您应在加密列时指定密码。移动数据后，可以使用相同的密码重新生成访问新位置的加密列数据所需的密钥。</p>
                           <p>表分区交换还需要受密码保护的<a href="glossary.html#GUID-78CFC3BC-9BDD-406E-A6E2-2374AC636269"><span class="xrefglossterm">TDE表密钥</span></a> 。
                           </p>
                           <p><a href="configuring-transparent-data-encryption.html#GUID-936CC3D2-8102-454C-AC49-D0126929D738__BABHGEAC">例3-3</a>使用密码创建外部表以创建<a href="glossary.html#GUID-78CFC3BC-9BDD-406E-A6E2-2374AC636269"><span class="xrefglossterm">TDE表键</span></a> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-936CC3D2-8102-454C-AC49-D0126929D738__BABHGEAC">
                           <p class="titleinexample">示例3-3使用密码生成的TDE表密钥创建新的外部表</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE emp_ext（first_name，last_name，empID，salary，ssn <span class="bold">ENCRYPT IDENTIFIED BY</span> <span class="italic"><span class="bold">password</span></span> ）ORGANIZATION EXTERNAL（TYPE ORACLE_DATAPUMP DEFAULT DIRECTORY“D_DIR”LOCATION（'emp_ext.dat'））REJECT LIMIT UNZIMITED AS SELECT * FROM EMPLOYEE;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-FC8D6E7E-CD47-4972-89B4-E90CB8A811AA" title="Oracle数据库提供了一系列不同的算法，您可以使用这些算法来定义加密列中使用的加密。">使用加密列创建表</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG9533"></a><div class="props_rev_3"><a id="GUID-613F7E02-EA77-4CF4-9683-A0344DF724D0" name="GUID-613F7E02-EA77-4CF4-9683-A0344DF724D0"></a><h4 id="ASOAG-GUID-613F7E02-EA77-4CF4-9683-A0344DF724D0" class="sect4">加密现有表中的列</h4>
                  <div>
                     <p>您可以加密现有表中的列。与新表一样，您可以选择使用不同的算法来确定加密。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-7BEE47F1-A3FE-4B1D-9744-B8F24E699B01">关于加密现有表中的列</a><br><code class="codeph">ALTER TABLE</code> SQL语句使您可以加密现有表中的列。
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-2720E333-6335-42CC-935F-35041991D130">将加密列添加到现有表</a><br>您可以加密现有表中的列，使用不同的算法，并使用<code class="codeph">NO SALT</code>索引列。
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-E3CAE9C6-CD38-4854-B53F-F082A41A14F5">加密未加密的列</a><br>您可以使用<code class="codeph">ALTER TABLE MODIFY</code>语句来加密现有的未加密列。
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-49ADF60E-73A2-4672-8494-11F499160AB0">禁用列上的加密</a><br>出于兼容性或性能的原因，您可能希望禁用加密。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" title="您可以使用透明数据加密来加密数据库表中的各个列。">加密表中的列</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10304"></a><div class="props_rev_3"><a id="GUID-7BEE47F1-A3FE-4B1D-9744-B8F24E699B01" name="GUID-7BEE47F1-A3FE-4B1D-9744-B8F24E699B01"></a><h5 id="ASOAG-GUID-7BEE47F1-A3FE-4B1D-9744-B8F24E699B01" class="sect5">关于加密现有表中的列</h5>
                     <div>
                        <p><code class="codeph">ALTER TABLE</code> SQL语句使您可以加密现有表中的列。
                        </p>
                        <p>要将加密列添加到现有表，或加密或解密现有列，可以使用带有<code class="codeph">ADD</code>或<code class="codeph">MODIFY</code>子句的<code class="codeph">ALTER TABLE</code> SQL语句。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-613F7E02-EA77-4CF4-9683-A0344DF724D0" title="您可以加密现有表中的列。与新表一样，您可以选择使用不同的算法来确定加密。">加密现有表中的列</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10149"></a><a id="ASOAG9534"></a><div class="props_rev_3"><a id="GUID-2720E333-6335-42CC-935F-35041991D130" name="GUID-2720E333-6335-42CC-935F-35041991D130"></a><h5 id="ASOAG-GUID-2720E333-6335-42CC-935F-35041991D130" class="sect5">将加密列添加到现有表</h5>
                     <div>
                        <p>您可以加密现有表中的列，使用不同的算法，并使用<code class="codeph">NO SALT</code>索引列。
                        </p>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要将加密列添加到现有表，请使用<code class="codeph">ALTER TABLE ADD</code>语句，使用<code class="codeph">ENCRYPT</code>子句指定新列。
                                 </p>
                              </li>
                           </ul>
                           <p><a href="configuring-transparent-data-encryption.html#GUID-2720E333-6335-42CC-935F-35041991D130__BABEDGDA">示例3-4</a>将加密列<code class="codeph">ssn</code>添加到名为<code class="codeph">employee</code>的现有表中。<code class="codeph">ssn</code>列使用默认的<code class="codeph">AES192</code>算法加密。默认情况下会添加Salt和MAC。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-2720E333-6335-42CC-935F-35041991D130__BABEDGDA">
                           <p class="titleinexample">示例3-4将加密列添加到现有表</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE员工ADD（ssn VARCHAR2（11）ENCRYPT）;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-613F7E02-EA77-4CF4-9683-A0344DF724D0" title="您可以加密现有表中的列。与新表一样，您可以选择使用不同的算法来确定加密。">加密现有表中的列</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG9535"></a><div class="props_rev_3"><a id="GUID-E3CAE9C6-CD38-4854-B53F-F082A41A14F5" name="GUID-E3CAE9C6-CD38-4854-B53F-F082A41A14F5"></a><h5 id="ASOAG-GUID-E3CAE9C6-CD38-4854-B53F-F082A41A14F5" class="sect5">加密未加密的列</h5>
                     <div>
                        <p>您可以使用<code class="codeph">ALTER TABLE MODIFY</code>语句来加密现有的未加密列。
                        </p>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要加密现有的未加密列，请使用<code class="codeph">ALTER TABLE MODIFY</code>语句，使用<code class="codeph">ENCRYPT</code>子句指定未加密的列。
                                 </p>
                              </li>
                           </ul>
                           <p>以下示例加密<code class="codeph">employee</code>表中的<code class="codeph">first_name</code>列。<code class="codeph">first_name</code>列使用默认的<code class="codeph">AES192</code>算法加密。默认情况下，Salt会添加到数据中。您可以使用其他算法加密列。如果要索引列，则必须指定<code class="codeph">NO SALT</code> 。您还可以使用<code class="codeph">NOMAC</code>参数绕过完整性检查。
                           </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE员工MODIFY（first_name ENCRYPT）;</pre><p>以下示例使用<code class="codeph">NOMAC</code>参数加密employee表中的<code class="codeph">first_name</code>列。
                           </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE员工MODIFY（first_name ENCRYPT'NOMAC'）;</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-613F7E02-EA77-4CF4-9683-A0344DF724D0" title="您可以加密现有表中的列。与新表一样，您可以选择使用不同的算法来确定加密。">加密现有表中的列</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG10152"></a><a id="ASOAG9536"></a><div class="props_rev_3"><a id="GUID-49ADF60E-73A2-4672-8494-11F499160AB0" name="GUID-49ADF60E-73A2-4672-8494-11F499160AB0"></a><h5 id="ASOAG-GUID-49ADF60E-73A2-4672-8494-11F499160AB0" class="sect5">禁用列上的加密</h5>
                     <div>
                        <p>出于兼容性或性能的原因，您可能希望禁用加密。</p>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要禁用列加密，请使用带有<code class="codeph">DECRYPT</code>子句的<code class="codeph">ALTER TABLE MODIFY</code>命令。
                                 </p>
                              </li>
                           </ul>
                           <p><a href="configuring-transparent-data-encryption.html#GUID-49ADF60E-73A2-4672-8494-11F499160AB0__BABHAIFI">示例3-5</a>解密<code class="codeph">employee</code>表中的<code class="codeph">first_name</code>列。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-49ADF60E-73A2-4672-8494-11F499160AB0__BABHAIFI">
                           <p class="titleinexample">示例3-5关闭列加密</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE员工MODIFY（first_name <span class="bold">DECRYPT</span> ）;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-613F7E02-EA77-4CF4-9683-A0344DF724D0" title="您可以加密现有表中的列。与新表一样，您可以选择使用不同的算法来确定加密。">加密现有表中的列</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ASOAG10153"></a><a id="ASOAG9537"></a><div class="props_rev_3"><a id="GUID-9E4EC0E4-A395-4C79-B841-CB13BDE41B4C" name="GUID-9E4EC0E4-A395-4C79-B841-CB13BDE41B4C"></a><h4 id="ASOAG-GUID-9E4EC0E4-A395-4C79-B841-CB13BDE41B4C" class="sect4">在加密列上创建索引</h4>
                  <div>
                     <p>您可以在加密列上创建索引。</p>
                     <div class="section">
                        <p>被索引的列必须加密而不<a href="glossary.html#GUID-6803F75B-7883-4D0B-B1FF-0084AD65E001"><span class="xrefglossterm">加盐</span></a> 。如果列使用salt加密，则<code class="codeph">ORA-28338: cannot encrypt indexed column(s) with salt</code>错误的<code class="codeph">ORA-28338: cannot encrypt indexed column(s) with salt</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>要在加密列上创建索引，请使用带有<code class="codeph">ENCRYPT NO SALT</code>子句的<code class="codeph">CREATE INDEX</code>语句。
                              </p>
                           </li>
                        </ul>
                        <p><a href="configuring-transparent-data-encryption.html#GUID-9E4EC0E4-A395-4C79-B841-CB13BDE41B4C__CHDFIGCF">示例3-6</a>显示了如何在没有salt的情况下加密的列上创建索引。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-9E4EC0E4-A395-4C79-B841-CB13BDE41B4C__CHDFIGCF">
                        <p class="titleinexample">示例3-6在没有Salt的情况下加密的列上创建索引</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE employee（first_name VARCHAR2（128），last_name VARCHAR2（128），empID NUMBER <span class="bold">ENCRYPT NO SALT</span> ，薪水编号（6）加密使用'3DES168'）;在employee（empID）上创建INDEX employee_idx;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" title="您可以使用透明数据加密来加密数据库表中的各个列。">加密表中的列</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG9538"></a><div class="props_rev_3"><a id="GUID-3A298444-09BB-409E-94E5-1FA5FFA89A1D" name="GUID-3A298444-09BB-409E-94E5-1FA5FFA89A1D"></a><h4 id="ASOAG-GUID-3A298444-09BB-409E-94E5-1FA5FFA89A1D" class="sect4">将Salt添加到加密列</h4>
                  <div>
                     <p>Salt是加密前添加到数据中的随机字符串，是加强加密数据安全性的一种方法。 。</p>
                     <div class="section">
                        <p>Salt确保相同的明文数据不会始终转换为相同的加密文本。Salt删除了入侵者用来窃取数据的一种常用方法，即匹配加密文本的模式。添加<a href="glossary.html#GUID-6803F75B-7883-4D0B-B1FF-0084AD65E001"><span class="xrefglossterm">盐</span></a>需要每个加密数据值额外增加16个字节的存储空间。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>要从加密列添加或删除salt，请使用<code class="codeph">ALTER TABLE MODIFY</code> SQL语句。
                              </p>
                           </li>
                        </ul>
                        <p>例如，假设您要使用salt加密<code class="codeph">first_name</code>列。如果<code class="codeph">first_name</code>列先前没有加密盐，则<code class="codeph">ALTER TABLE MODIFY</code>语句使用salt重新加密。
                        </p><pre class="oac_no_warn" dir="ltr">ALTER TABLE员工MODIFY（first_name ENCRYPT SALT）;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" title="您可以使用透明数据加密来加密数据库表中的各个列。">加密表中的列</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-F1C34179-BE14-4966-82B7-97904AB4CF44" name="GUID-F1C34179-BE14-4966-82B7-97904AB4CF44"></a><h4 id="ASOAG-GUID-F1C34179-BE14-4966-82B7-97904AB4CF44" class="sect4">从加密列中删除Salt</h4>
                  <div>
                     <p>您可以使用<span class="apiname" translate="no">ALTER TABLE</span> SQL语句从加密列中删除salt。
                     </p>
                     <div class="section">
                        <p></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>要从加密列中删除salt，请使用<span class="apiname" translate="no">ALTER TABLE</span> SQL语句中的<code class="codeph">ENCRYPT NO SALT</code>子句。
                              </p>
                           </li>
                        </ul>
                        <p>例如，假设您要从<code class="codeph">first_name</code>列中删除salt。如果必须索引使用salt加密的列，则可以在索引之前使用此语句删除salt</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE员工MODIFY（first_name ENCRYPT NO SALT）;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" title="您可以使用透明数据加密来加密数据库表中的各个列。">加密表中的列</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10305"></a><a id="ASOAG9539"></a><div class="props_rev_3"><a id="GUID-2931A16D-84E8-4A42-8D01-662FD693A711" name="GUID-2931A16D-84E8-4A42-8D01-662FD693A711"></a><h4 id="ASOAG-GUID-2931A16D-84E8-4A42-8D01-662FD693A711" class="sect4">更改具有加密列的表的加密密钥或算法</h4>
                  <div>
                     <p>您可以使用<code class="codeph">ALTER TABLE</code> SQL语句更改加密列中使用的加密密钥或算法。
                     </p>
                     <div class="section">
                        <p>每个表的列只能有一个<a href="glossary.html#GUID-78CFC3BC-9BDD-406E-A6E2-2374AC636269"><span class="xrefglossterm">TDE表键</span></a> 。您可以使用<code class="codeph">ALTER TABLE</code>语句重新生成TDE表键。此过程生成新密钥，使用先前密钥解密表中的数据，使用新密钥重新加密数据，然后使用新密钥信息更新表元数据。您还可以为新的TDE表键使用不同的加密算法。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>要更改包含加密列的表的加密密钥或算法，请使用带有<code class="codeph">REKEY</code>或<code class="codeph">REKEY USING</code>子句的<code class="codeph">ALTER TABLE</code> SQL语句。
                              </p>
                           </li>
                        </ul>
                        <p>例如：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE员工REKEY;</pre><p><a href="configuring-transparent-data-encryption.html#GUID-2931A16D-84E8-4A42-8D01-662FD693A711__CIHHEEFF">例3-7</a>使用<code class="codeph">3DES168</code>算法重新生成<code class="codeph">employee</code>表的TDE表键。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-2931A16D-84E8-4A42-8D01-662FD693A711__CIHHEEFF">
                        <p class="titleinexample">示例3-7更改加密表列加密密钥和算法</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE员工REKEY使用'3DES168';</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-A0E2C279-10F6-48D9-AB92-C547529C06EE" title="您可以使用透明数据加密来加密数据库表中的各个列。">加密表中的列</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ASOAG620"></a><div class="props_rev_3"><a id="GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" name="GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8"></a><h3 id="ASOAG-GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" class="sect3">表空间和数据库的加密转换</h3>
               <div>
                  <p>您可以在脱机和联机表空间和数据库上执行加密操作。</p>
                  <p></p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-79072DFC-4DC6-4920-9B2A-D649123D15C7">关于表空间和数据库的加密转换</a><br><code class="codeph">CREATE TABLESPACE</code> SQL语句可用于加密新的表空间。<code class="codeph">ALTER TABLESPACE</code>可以加密现有的表空间。
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-11A97890-F4F4-4DC5-90C7-84535CF7A0FF">封闭式TDE密钥库对加密表空间的影响</a><br>当Oracle管理的表空间被加密时，可以关闭或迁移TDE密钥库，并且必须关闭数据库系统本身以禁止对Oracle管理的表空间进行操作。
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-EA4F9C84-0BE8-44AF-8638-3B7EFE4CA92C">使用透明数据加密表空间加密的限制</a><br>您应该了解加密表空间时使用透明数据加密的限制。
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-F95E13AA-FE30-423B-930C-13D355CE46B3">创建加密的新表空间</a><br>创建新表空间时，可以在创建过程中配置其加密设置。
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-9D9BDB52-CA0F-4275-B16E-B71173C76D56">加密未来表空间</a><br>您可以将Oracle数据库配置为自动加密将要创建的未来表空间。
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-833FDC4E-0980-4291-8F56-53BD6C8F7EEF">数据字典中的加密敏感凭证数据</a><br>您可以加密<code class="codeph">SYS.LINK$</code>和<code class="codeph">SYS.SCHEDULER$_CREDENTIAL</code>系统表中的敏感凭据数据。
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-DE533D60-C711-4ECD-AB1B-36E41A331A35">现有脱机表空间的加密转换</a><br>您可以使用<code class="codeph">ALTER TABLESPACE</code> SQL语句<code class="codeph">OFFLINE</code> ， <code class="codeph">ENCRYPT</code>和<code class="codeph">DECRYPT</code>子句执行脱机加密转换。
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-46D2C2FC-A09E-4036-8DB7-FDAB3D346F19">现有在线表空间的加密转换</a><br>您可以使用带有<code class="codeph">ONLINE</code>和<code class="codeph">ENCRYPT</code>或<code class="codeph">DECRYPT</code>子句的<code class="codeph">ALTER TABLESPACE</code> SQL语句来加密和解密在线现有表空间。
                     </li>
                     <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-445053E7-8568-4990-A4C6-2ED68787ED2C">现有数据库的加密转换</a><br>您可以加密脱机和联机数据库。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-C5D20EAE-3369-411F-9A7E-13AB14139F1D" title="您可以配置软件或硬件密钥库，以用于单个表列或整个表空间。">配置透明数据加密</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-79072DFC-4DC6-4920-9B2A-D649123D15C7" name="GUID-79072DFC-4DC6-4920-9B2A-D649123D15C7"></a><h4 id="ASOAG-GUID-79072DFC-4DC6-4920-9B2A-D649123D15C7" class="sect4">关于表空间和数据库的加密转换</h4>
                  <div>
                     <p><code class="codeph">CREATE TABLESPACE</code> SQL语句可用于加密新的表空间。<code class="codeph">ALTER TABLESPACE</code>可以加密现有的表空间。
                     </p>
                     <p>除了加密新的和现有的表空间之外，您还可以加密完整的数据库，这需要加密<a href="glossary.html#GUID-CD28FCE6-F90B-4353-B594-C19FCFF4FDE9"><span class="xrefglossterm">Oracle管理的表空间</span></a> （在此版本中， <code class="codeph">SYSTEM</code> ， <code class="codeph">SYSAUX</code> ， <code class="codeph">TEMP</code>和<code class="codeph">UNDO</code>表空间）。要加密完整数据库，请使用<code class="codeph">ALTER TABLESPACE</code>语句而不是<code class="codeph">ALTER DATABASE</code>来加密Oracle管理的表空间。
                     </p>
                     <p>下表比较了表空间和数据库的脱机和在线加密转换之间的差异。</p>
                     <div class="tblformal" id="GUID-79072DFC-4DC6-4920-9B2A-D649123D15C7__COMPARISONBETWEENOFFLINEANDONLINETA-DC9FA811">
                        <p class="titleintable">表3-2脱机和联机表空间和数据库加密转换</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="脱机和联机表空间和数据库加密转换" border="1" summary="Comparison Between Offline and Online Tablespace and Database Encryption Conversion" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d6228e7008">功能</th>
                                 <th align="left" valign="bottom" id="d6228e7010">离线转换</th>
                                 <th align="left" valign="bottom" id="d6228e7012">在线转换</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7016" headers="d6228e7008 ">
                                    <p>以最小转换能力发布</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7016 d6228e7010 ">
                                    <p>Oracle Database 11g第2版（11.2）</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7016 d6228e7012 ">
                                    <p>Oracle Database 12c第2版（12.2）及更高版本</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7026" headers="d6228e7008 ">
                                    <p>什么可以向后移植？</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7026 d6228e7010 ">
                                    <div class="p">使用<code class="codeph">AES128</code>算法加密或解密数据文件的能力（使用<pre class="pre codeblock"><code>ALTER DATABASE DATAFILE <span class="italic">data_file</span> ENCRYPT</code></pre>或<code class="codeph">DECRYPT</code> ）可用于Oracle数据库版本12.1.0.2和11.2.0.4。
                                    </div>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7026 d6228e7012 ">
                                    <p>没有</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7048" headers="d6228e7008 ">
                                    <p>支持算法</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7048 d6228e7010 ">
                                    <p>TDE支持的所有对称加密算法。请参阅<a href="introduction-to-transparent-data-encryption.html#GUID-AAE3C965-C6A8-45D6-BA5D-F88B300A301A" title="默认情况下，透明数据加密（TDE）列加密使用高级加密标准（AES）。">支持的加密和完整性算法</a> 。另请参阅<a href="configuring-transparent-data-encryption.html#GUID-689A82BA-F09A-47AB-8A81-41375F833C7D" title="当表空间脱机或数据库未打开时，您可以加密或解密用户表空间的现有数据文件。">关于现有脱机表空间的加密转换</a> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7048 d6228e7012 ">
                                    <p>TDE支持的所有对称加密算法。请参阅<a href="introduction-to-transparent-data-encryption.html#GUID-AAE3C965-C6A8-45D6-BA5D-F88B300A301A" title="默认情况下，透明数据加密（TDE）列加密使用高级加密标准（AES）。">支持的加密和完整性算法</a> 。另请参阅<a href="configuring-transparent-data-encryption.html#GUID-16AD6D1C-F7BB-42DC-A392-B7C128BC054C" title="您可以在联机时加密，解密或重新密钥现有用户表空间以及SYSTEM，SYSAUX和UNDO表空间。">关于现有联机表空间的加密转换</a> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7091" headers="d6228e7008 ">
                                    <p>什么时候可以运行转换？</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7091 d6228e7010 ">
                                    <p>当表空间脱机或数据库处于挂载阶段时。</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7091 d6228e7012 ">
                                    <p>当表空间处于联机状态且数据库以读/写模式打开时。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7101" headers="d6228e7008 ">
                                    <p>是否需要辅助空间进行转换？</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7101 d6228e7010 ">
                                    <p>没有</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7101 d6228e7012 ">
                                    <p>是。有关指南，请参阅<a href="configuring-transparent-data-encryption.html#GUID-79DC7E79-E687-4FB3-BDD5-639ACD1872AF" title="要使用联机转换加密现有表空间，请使用带有ONLINE和ENCRYPT子句的ALTER TABLESPACE。">使用联机转换加密现有表空间</a> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7126" headers="d6228e7008 ">
                                    <p>Oracle Data Guard转换指南</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7126 d6228e7010 ">
                                    <p>手动转换主要和备用。首先转换备用数据库，然后切换到最小停机时间</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7126 d6228e7012 ">
                                    <p>转换主数据库后，备用转换将自动进行。您无法直接在待机状态下执行在线转换。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7136" headers="d6228e7008 ">
                                    <p>加密<code class="codeph">SYSTEM</code> ， <code class="codeph">SYSAUX</code>和<code class="codeph">UNDO</code>表空间（数据库转换）</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7136 d6228e7010 ">
                                    <p>Oracle Database 12c仅发布2（12.2）及更高版本。您必须将<code class="codeph">COMPATIBILITY</code>设置为<code class="codeph">12.2.0.0</code> 。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7136 d6228e7012 ">
                                    <p>Oracle Database 12c仅发布2（12.2）及更高版本。您必须将<code class="codeph">COMPATIBILITY</code>设置为<code class="codeph">12.2.0.0</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7167" headers="d6228e7008 ">
                                    <p>可以转换现有的<code class="codeph">TEMP</code>表空间吗？
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7167 d6228e7010 ">
                                    <p>不，但您可以在Oracle Database 12c第2版（12.2）及更高版本中创建加密的<code class="codeph">TEMP</code>表空间，使其成为默认的临时表空间，然后删除原始的<code class="codeph">TEMP</code>表空间。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7167 d6228e7012 ">
                                    <p>不，但您可以在Oracle Database 12c第2版（12.2）及更高版本中创建加密的<code class="codeph">TEMP</code>表空间，使其成为默认的临时表空间，然后删除原始的<code class="codeph">TEMP</code>表空间。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7192" headers="d6228e7008 ">
                                    <p>可以解密现有的表空间吗？</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7192 d6228e7010 ">
                                    <p>您只能解密先前由脱机加密操作加密的表空间或数据文件。Oracle建议您在加密后不建议解密<code class="codeph">UNDO</code>表空间。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7192 d6228e7012 ">
                                    <p>是的，但Oracle不建议您在加密后解密<code class="codeph">UNDO</code>表空间。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7208" headers="d6228e7008 ">
                                    <p>加密密钥可以重新加密吗？</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7208 d6228e7010 ">
                                    <p>不，但在表空间加密后，您可以使用在线转换在Oracle Database 12c第2版（12.2）兼容性中重新生成密钥。</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7208 d6228e7012 ">
                                    <p>是</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7218" headers="d6228e7008 ">
                                    <p>加密操作可以并行运行吗？</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7218 d6228e7010 ">
                                    <p>您可以在数据文件级别运行并行加密转换，并运行多个用户会话。</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7218 d6228e7012 ">
                                    <p>您可以在表空间级别运行并行加密转换，并运行多个用户会话。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7229" headers="d6228e7008 ">
                                    <p>如果加密转换SQL语句无法完成该怎么办？</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7229 d6228e7010 ">
                                    <p>重新发出加密或解密SQL语句，以确保表空间中的所有数据文件始终加密或解密。</p>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7229 d6228e7012 ">
                                    <p>重新运行SQL语句但使用<code class="codeph">FINISH</code>子句。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" title="您可以在脱机和联机表空间和数据库上执行加密操作。">表空间和数据库的加密转换</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-11A97890-F4F4-4DC5-90C7-84535CF7A0FF" name="GUID-11A97890-F4F4-4DC5-90C7-84535CF7A0FF"></a><h4 id="ASOAG-GUID-11A97890-F4F4-4DC5-90C7-84535CF7A0FF" class="sect4">封闭式TDE密钥库对加密表空间的影响</h4>
                  <div>
                     <p>当Oracle管理的表空间被加密时，可以关闭或迁移TDE密钥库，并且必须关闭数据库系统本身以禁止对Oracle管理的表空间进行操作。</p>
                     <p>关闭的TDE密钥库对涉及加密的<a href="glossary.html#GUID-CD28FCE6-F90B-4353-B594-C19FCFF4FDE9"><span class="xrefglossterm">Oracle管理的表空间</span></a> （在此版本中为<code class="codeph">SYSTEM</code> ， <code class="codeph">SYSAUX</code> ， <code class="codeph">TEMP</code>和<code class="codeph">UNDO</code>表空间）的操作没有影响。这使得后台进程（例如，日志编写器）执行的操作可以在TDE密钥库关闭时继续在这些表空间上工作。如果要禁止对加密的Oracle管理的表空间进行操作，则必须关闭数据库。
                     </p>
                     <p>对于用户创建的表空间，封闭的TDE密钥库会导致诸如旋转密钥或解密表空间等操作失败， <code class="codeph">ORA-28365 wallet is not open</code>错误，就像在早期版本中一样。如果要禁止对用户创建的表空间执行操作，请关闭TDE密钥库（或关闭数据库）。
                     </p>
                     <p>用户创建的数据可以在TDE密钥库打开时从用户创建的表空间复制到加密的Oracle管理的表空间（例如，通过<code class="codeph">DBMS_STATS</code>统计信息收集等内部过程）。在查询<code class="codeph">V$ENCRYPTION_WALLET</code>视图时，当TDE密钥库处于<code class="codeph">CLOSED</code>状态时，关闭密钥库不会阻止用户查看此数据。通过尝试查询加密的用户创建的表空间来访问原始数据将失败，导致<code class="codeph">ORA-28365 wallet is not open</code>错误。
                     </p>
                     <p><a href="configuring-transparent-data-encryption.html#GUID-11A97890-F4F4-4DC5-90C7-84535CF7A0FF__TABLE_SZP_TFD_V2B" title="此表描述了禁止或允许对用户表空间和Oracle管理的表空间中的加密数据进行操作所必需的命令。从左到右：表空间加密方案，禁止对加密的用户创建的表空间数据执行操作的命令，禁止对加密的Oracle管理的表空间数据执行操作的命令，允许对加密的用户创建的表空间数据执行操作的命令，允许操作的命令加密的Oracle管理的表空间数据。">表3-3说明</a>了在用户创建的表空间和Oracle管理的表空间中禁止或允许对加密数据进行操作所必需的操作。例如，在第一个场景中，用户创建的表空间和Oracle管理的表空间都是加密的。在这种情况下，对于加密的用户创建的表空间中的加密数据，管理员可以关闭或打开密钥库，并使用加密的用户创建的表空间关闭和打开数据库。配置加密的Oracle管理的表空间时，管理员可以通过关闭数据库来禁止操作，并且可以通过以装载模式启动，打开TDE密钥库，然后打开数据库来允许操作。（ <span class="italic">在</span>打开数据库<span class="italic">之前</span>必须打开TDE密钥库<span class="italic">，</span>因为系统可能需要TDE主加密密钥来解密引导字典表，这些表位于加密的Oracle管理的表空间中。）此表中的N / A标志指的是非加密数据，除非关闭实例，否则您可以始终对其进行操作。
                     </p>
                     <div class="tblformalwide" id="GUID-11A97890-F4F4-4DC5-90C7-84535CF7A0FF__TABLE_SZP_TFD_V2B">
                        <p class="titleintable">表3-3禁止或允许对加密数据执行操作的必要命令</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="禁止或允许对加密数据进行操作的必要命令" width="100%" border="1" summary="This table describes commands that are necessary to disallow or allow operations on encrypted data in user tablespaces and Oracle-managed tablespaces. From left to right: Tablespace Encryption Scenarios, Commands to Disallow Operations on Encrypted User-Created Tablespace Data, Commands to Disallow Operations on Encrypted Oracle-Managed Tablespace Data, Commands to Allow Operations on Encrypted User-Created Tablespace Data, Commands to Allow Operations on Encrypted Oracle-Managed Tablespace Data." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d6228e7379">表空间加密方案</th>
                                 <th align="left" valign="bottom" id="d6228e7381">禁止对加密的用户创建的表空间数据执行操作的命令</th>
                                 <th align="left" valign="bottom" id="d6228e7383">禁止对加密的Oracle管理的表空间数据执行操作的命令</th>
                                 <th align="left" valign="bottom" id="d6228e7385">允许对加密的用户创建的表空间数据执行操作的命令</th>
                                 <th align="left" valign="bottom" id="d6228e7387">允许对加密的Oracle管理的表空间数据进行操作的命令</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7391" headers="d6228e7379 ">用户创建的表和Oracle管理的表空间都已加密</td>
                                 <td align="left" valign="top" headers="d6228e7391 d6228e7381 ">
                                    <ul id="GUID-11A97890-F4F4-4DC5-90C7-84535CF7A0FF__UL_ZCV_2GD_V2B" style="list-style-type:disc">
                                       <li><code class="codeph">管理员密钥管理设置KEYSTORE CLOSE通过<span class="codeinlineitalic">密码</span>识别;</code></li>
                                       <li><code class="codeph">关掉</code></li>
                                    </ul>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7391 d6228e7383 "><code class="codeph">关掉</code></td>
                                 <td align="left" valign="top" headers="d6228e7391 d6228e7385 ">
                                    <ul id="GUID-11A97890-F4F4-4DC5-90C7-84535CF7A0FF__UL_QLH_PGD_V2B" style="list-style-type:disc">
                                       <li><code class="codeph">启动安装;</code></li>
                                       <li><code class="codeph">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN由<span class="codeinlineitalic">密码</span>识别;</code></li>
                                       <li><code class="codeph">ALTER DATABASE OPEN</code></li>
                                    </ul>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7391 d6228e7387 ">
                                    <ul id="GUID-11A97890-F4F4-4DC5-90C7-84535CF7A0FF__UL_OLW_B3D_V2B" style="list-style-type:disc">
                                       <li><code class="codeph">启动安装;</code></li>
                                       <li><code class="codeph">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN由<span class="codeinlineitalic">密码</span>识别;</code></li>
                                       <li><code class="codeph">ALTER DATABASE OPEN</code></li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7436" headers="d6228e7379 ">用户表空间已加密; Oracle管理的表空间未加密</td>
                                 <td align="left" valign="top" headers="d6228e7436 d6228e7381 ">
                                    <ul id="GUID-11A97890-F4F4-4DC5-90C7-84535CF7A0FF__UL_XDQ_SHD_V2B" style="list-style-type:disc">
                                       <li><code class="codeph">管理员密钥管理设置KEYSTORE CLOSE通过<span class="codeinlineitalic">密码</span>识别;</code></li>
                                       <li><code class="codeph">关掉</code></li>
                                    </ul>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7436 d6228e7383 ">N / A</td>
                                 <td align="left" valign="top" headers="d6228e7436 d6228e7385 ">
                                    <ul id="GUID-11A97890-F4F4-4DC5-90C7-84535CF7A0FF__UL_YXN_5HD_V2B" style="list-style-type:disc">
                                       <li><code class="codeph">启动安装;</code></li>
                                       <li><code class="codeph">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN由<span class="codeinlineitalic">密码</span>识别;</code></li>
                                       <li><code class="codeph">ALTER DATABASE OPEN</code></li>
                                    </ul>
                                 </td>
                                 <td align="left" valign="top" headers="d6228e7436 d6228e7387 ">N / A</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7468" headers="d6228e7379 ">用户表空间未加密; Oracle管理的表空间已加密</td>
                                 <td align="left" valign="top" headers="d6228e7468 d6228e7381 ">N / A</td>
                                 <td align="left" valign="top" headers="d6228e7468 d6228e7383 "><code class="codeph">关掉</code></td>
                                 <td align="left" valign="top" headers="d6228e7468 d6228e7385 ">N / A</td>
                                 <td align="left" valign="top" headers="d6228e7468 d6228e7387 ">
                                    <ul id="GUID-11A97890-F4F4-4DC5-90C7-84535CF7A0FF__UL_O2K_C3D_V2B" style="list-style-type:disc">
                                       <li><code class="codeph">启动安装;</code></li>
                                       <li><code class="codeph">ADMINISTER KEY MANAGEMENT SET KEYSTORE OPEN由<span class="codeinlineitalic">密码</span>识别;</code></li>
                                       <li><code class="codeph">ALTER DATABASE OPEN</code></li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d6228e7492" headers="d6228e7379 ">用户和Oracle管理的表空间都没有加密</td>
                                 <td align="left" valign="top" headers="d6228e7492 d6228e7381 ">N / A</td>
                                 <td align="left" valign="top" headers="d6228e7492 d6228e7383 ">N / A</td>
                                 <td align="left" valign="top" headers="d6228e7492 d6228e7385 ">N / A</td>
                                 <td align="left" valign="top" headers="d6228e7492 d6228e7387 ">N / A</td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" title="您可以在脱机和联机表空间和数据库上执行加密操作。">表空间和数据库的加密转换</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ASOAG10162"></a><div class="props_rev_3"><a id="GUID-EA4F9C84-0BE8-44AF-8638-3B7EFE4CA92C" name="GUID-EA4F9C84-0BE8-44AF-8638-3B7EFE4CA92C"></a><h4 id="ASOAG-GUID-EA4F9C84-0BE8-44AF-8638-3B7EFE4CA92C" class="sect4">使用透明数据加密表空间加密的限制</h4>
                  <div>
                     <p>您应该了解加密表空间时使用透明数据加密的限制。</p>
                     <p>请注意以下限制：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>透明数据加密（TDE）表空间加密在读取和写入操作期间加密或解密数据，而不是在SQL层加密和解密数据的TDE列加密。这意味着适用于TDE列加密的大多数限制（例如数据类型限制和索引类型限制）不适用于TDE表空间加密。</p>
                        </li>
                        <li>
                           <p>要执行导入和导出操作，请使用Oracle Data Pump。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-EA4F9C84-0BE8-44AF-8638-3B7EFE4CA92C__GUID-456ABB31-8537-4E39-9566-A277423B4DE2">
                        <p class="notep1">也可以看看：</p>有关Oracle Data Pump的更多信息，请参见<a href="../sutil/oracle-data-pump-overview.html#SUTIL100" target="_blank"><span><cite>Oracle数据库实用程序</cite></span></a></div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" title="您可以在脱机和联机表空间和数据库上执行加密操作。">表空间和数据库的加密转换</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-F95E13AA-FE30-423B-930C-13D355CE46B3" name="GUID-F95E13AA-FE30-423B-930C-13D355CE46B3"></a><h4 id="ASOAG-GUID-F95E13AA-FE30-423B-930C-13D355CE46B3" class="sect4">创建加密的新表空间</h4>
                  <div>
                     <p>创建新表空间时，可以在创建过程中配置其加密设置。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-058B849C-6014-4730-B395-E1FF36900F0F">步骤1：为表空间加密设置COMPATIBLE初始化参数</a><br>在创建加密表空间之前，必须设置<code class="codeph">COMPATIBLE</code>初始化参数。
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-A00B8C8A-3C98-41A5-BB80-EC7BE3E46252">步骤2：设置表空间TDE主加密密钥</a><br>您应确保已配置TDE主加密密钥。
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-161BDCBD-BC49-4D49-A1B5-9AE7F942FE4B">第3步：创建加密表空间</a><br>设置<code class="codeph">COMPATIBLE</code>初始化参数后，即可创建加密表空间。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" title="您可以在脱机和联机表空间和数据库上执行加密操作。">表空间和数据库的加密转换</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ASOAG10307"></a><div class="props_rev_3"><a id="GUID-058B849C-6014-4730-B395-E1FF36900F0F" name="GUID-058B849C-6014-4730-B395-E1FF36900F0F"></a><h5 id="ASOAG-GUID-058B849C-6014-4730-B395-E1FF36900F0F" class="sect5">步骤1：为表空间加密设置COMPATIBLE初始化参数</h5>
                     <div>
                        <p>在创建加密表空间之前，必须设置<code class="codeph">COMPATIBLE</code>初始化参数。
                        </p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-FC737030-FB70-4E7E-809D-22ABAF8A4C09">关于为表空间加密设置COMPATIBLE初始化参数</a><br>最低<code class="codeph">COMPATIBLE</code>初始化参数设置<code class="codeph">11.2.0.0</code>启用全套表空间加密功能。
                           </li>
                           <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-DE637157-E201-482D-B12D-F5C59FF9618D">为表空间加密设置COMPATIBLE初始化参数</a><br>要设置<code class="codeph">COMPATIBLE</code>初始化参数，必须编辑数据库实例的初始化参数文件。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-F95E13AA-FE30-423B-930C-13D355CE46B3" title="创建新表空间时，可以在创建过程中配置其加密设置。">创建加密的新表空间</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ASOAG10516"></a><div class="props_rev_3"><a id="GUID-FC737030-FB70-4E7E-809D-22ABAF8A4C09" name="GUID-FC737030-FB70-4E7E-809D-22ABAF8A4C09"></a><h6 id="ASOAG-GUID-FC737030-FB70-4E7E-809D-22ABAF8A4C09" class="sect6">关于为表空间加密设置COMPATIBLE初始化参数</h6>
                        <div>
                           <p>最低<code class="codeph">COMPATIBLE</code>初始化参数设置<code class="codeph">11.2.0.0</code>启用全套表空间加密功能。
                           </p>
                           <p>将兼容性设置为<code class="codeph">11.2.0.0</code>可启用以下功能：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">11.2.0.0</code>设置使数据库能够使用四种支持的数据加密算法（ <code class="codeph">3DES168</code> ， <code class="codeph">AES128</code> ， <code class="codeph">AES192</code>和<code class="codeph">AES256</code> ）。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">11.2.0.0</code>设置允许将密钥从软件密钥库迁移到硬件密钥库（确保为硬件密钥库配置了TDE主加密密钥）</p>
                              </li>
                              <li>
                                 <p><code class="codeph">11.2.0.0</code>设置允许重新加密TDE主加密密钥</p>
                              </li>
                           </ul>
                           <p>请注意，将<code class="codeph">COMPATIBLE</code>参数设置为<code class="codeph">11.2.0.0</code> ，更改将不可逆转。要使用表空间加密，请确保兼容性设置最小，即<code class="codeph">11.2.0.0</code> 。
                           </p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-FC737030-FB70-4E7E-809D-22ABAF8A4C09__GUID-E3D7450D-3507-4CCD-9722-EFAA4AD01832">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>有关<code class="codeph">COMPATIBLE</code>参数的详细信息，请<a href="../refrn/COMPATIBLE.html#REFRN10019" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                                 </li>
                                 <li>
                                    <p>有关初始化参数文件的详细信息，请参见<a href="../admin/creating-and-configuring-an-oracle-database.html#ADMIN11099" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a></p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-058B849C-6014-4730-B395-E1FF36900F0F" title="在创建加密表空间之前，必须设置COMPATIBLE初始化参数。">步骤1：为表空间加密设置COMPATIBLE初始化参数</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ASOAG10517"></a><div class="props_rev_3"><a id="GUID-DE637157-E201-482D-B12D-F5C59FF9618D" name="GUID-DE637157-E201-482D-B12D-F5C59FF9618D"></a><h6 id="ASOAG-GUID-DE637157-E201-482D-B12D-F5C59FF9618D" class="sect6">为表空间加密设置COMPATIBLE初始化参数</h6>
                        <div>
                           <p>要设置<code class="codeph">COMPATIBLE</code>初始化参数，必须编辑数据库实例的初始化参数文件。
                           </p>
                           <div class="section">
                              <ol>
                                 <li>
                                    <p>登录数据库实例。</p>
                                    <p>在多租户环境中，登录PDB。例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin @hrpdb输入密码： <span class="italic">密码</span>已连接。
</pre><p>要查找可用的PDB，请运行<code class="codeph">show pdbs</code>命令。要检查当前PDB，请运行<code class="codeph">show con_name</code>命令。
                                    </p>
                                 </li>
                                 <li>
                                    <p>检查<code class="codeph">COMPATIBLE</code>参数的当前设置。
                                    </p>
                                    <p>例如：</p><pre class="oac_no_warn" dir="ltr">SHOW PARAMETER COMPATIBLE NAME TYPE VALUE ------------------------------------ -------- --- ------------------------------兼容字符串11.2.0.0 noncdbcompatible BOOLEAN FALSE</pre></li>
                                 <li>
                                    <p>如果必须更改<code class="codeph">COMPATIBLE</code>参数，请完成此过程中的其余步骤。
                                    </p>
                                    <p>该值应为11.2.0.0或更高。</p>
                                 </li>
                                 <li>
                                    <p>从命令行，找到数据库实例的初始化参数文件。</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><span class="bold">UNIX系统：</span>此文件位于<span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">/dbs</code>目录中，名为<code class="codeph">init</code> <span class="italic"><code class="codeph">ORACLE_SID</code></span> <code class="codeph">.ora</code> （例如， <code class="codeph">initmydb.ora</code> ）。
                                          </p>
                                       </li>
                                       <li>
                                          <p><span class="bold">Windows系统：</span>此文件位于<span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">\database</code>目录中，名为<code class="codeph">init</code> <span class="italic"><code class="codeph">ORACLE_SID</code></span> <code class="codeph">.ora</code> （例如， <code class="codeph">initmydb.ora</code> ）。
                                          </p>
                                       </li>
                                    </ul>
                                 </li>
                                 <li>
                                    <p>编辑初始化参数文件以使用新的<code class="codeph">COMPATIBLE</code>设置。
                                    </p>
                                    <p>例如：</p><pre class="oac_no_warn" dir="ltr">兼容= 12.2.0.0.0</pre></li>
                                 <li>
                                    <p>在SQL * Plus中，以具有<code class="codeph">SYSDBA</code>管理权限的用户身份进行连接，然后重新启动数据库。
                                    </p>
                                    <p>例如：</p><pre class="oac_no_warn" dir="ltr">CONNECT / AS SYSDBA SHUTDOWN STARTUP</pre><p>如果正在使用表空间加密，则在数据库装入时打开密钥库。必须先打开密钥库，然后才能访问加密表空间中的数据。</p>
                                    <p>例如：</p><pre class="oac_no_warn" dir="ltr">启动安装;管理员密钥管理设置KEYSTORE OPEN由<span class="italic">keystore_password</span>标识; ALTER DATABASE OPEN;</pre></li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-058B849C-6014-4730-B395-E1FF36900F0F" title="在创建加密表空间之前，必须设置COMPATIBLE初始化参数。">步骤1：为表空间加密设置COMPATIBLE初始化参数</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="ASOAG9556"></a><div class="props_rev_3"><a id="GUID-A00B8C8A-3C98-41A5-BB80-EC7BE3E46252" name="GUID-A00B8C8A-3C98-41A5-BB80-EC7BE3E46252"></a><h5 id="ASOAG-GUID-A00B8C8A-3C98-41A5-BB80-EC7BE3E46252" class="sect5">步骤2：设置表空间TDE主加密密钥</h5>
                     <div>
                        <p>您应确保已配置TDE主加密密钥。</p>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>设置TDE主加密密钥如下：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>对于软件TDE主加密密钥，请参阅<a href="configuring-transparent-data-encryption.html#GUID-15E41F0A-5D80-4A7A-88F6-30EE86FA44E8" title="密钥库打开后，您可以为其设置TDE主加密密钥。">步骤4：在软件密钥库中设置TDE主加密密钥</a> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p>有关硬件TDE主加密密钥，请参阅<a href="configuring-transparent-data-encryption.html#GUID-96BEF7DD-2B37-48F2-9651-38059DE499C5" title="打开硬件密钥库后，即可设置硬件密钥库TDE主加密密钥。">步骤4：设置硬件密钥库TDE主加密密钥</a> 。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-F95E13AA-FE30-423B-930C-13D355CE46B3" title="创建新表空间时，可以在创建过程中配置其加密设置。">创建加密的新表空间</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ASOAG9558"></a><div class="props_rev_3"><a id="GUID-161BDCBD-BC49-4D49-A1B5-9AE7F942FE4B" name="GUID-161BDCBD-BC49-4D49-A1B5-9AE7F942FE4B"></a><h5 id="ASOAG-GUID-161BDCBD-BC49-4D49-A1B5-9AE7F942FE4B" class="sect5">第3步：创建加密表空间</h5>
                     <div>
                        <p>设置<code class="codeph">COMPATIBLE</code>初始化参数后，即可创建加密表空间。
                        </p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-5B8CCF8D-278D-411B-B8EF-F69F9364D762">关于创建加密表空间</a><br>要创建加密表空间，可以使用<code class="codeph">CREATE TABLESPACE</code> SQL语句。
                           </li>
                           <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-A0D33E93-FC64-45F1-B45A-D0D80AD37176">创建加密表空间</a><br>要创建加密表空间，必须使用带有<code class="codeph">ENCRYPTION USING</code>子句的<code class="codeph">CREATE TABLESPACE</code>语句。
                           </li>
                           <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-9E5ACD09-D598-4DB1-8C8F-1BB5F646B6E9">示例：创建使用AES192的加密表空间</a><br>您可以使用<code class="codeph">CREATE TABLESPACE</code> SQL语句创建加密表空间。
                           </li>
                           <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-A7FE953F-048E-462F-8E2A-851A05AF9A04">示例：创建使用默认算法的加密表空间</a><br>您可以使用<code class="codeph">CREATE TABLESPACE</code> SQL语句创建使用默认算法的加密表空间。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-F95E13AA-FE30-423B-930C-13D355CE46B3" title="创建新表空间时，可以在创建过程中配置其加密设置。">创建加密的新表空间</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ASOAG10308"></a><div class="props_rev_3"><a id="GUID-5B8CCF8D-278D-411B-B8EF-F69F9364D762" name="GUID-5B8CCF8D-278D-411B-B8EF-F69F9364D762"></a><h6 id="ASOAG-GUID-5B8CCF8D-278D-411B-B8EF-F69F9364D762" class="sect6">关于创建加密表空间</h6>
                        <div>
                           <p>要创建加密表空间，可以使用<code class="codeph">CREATE TABLESPACE</code> SQL语句。
                           </p>
                           <p>您必须具有<code class="codeph">CREATE TABLESPACE</code>系统特权才能创建加密表空间。
                           </p>
                           <p>您可以使用Oracle Data Pump将数据导入加密的表空间。您还可以使用SQL语句，例如<code class="codeph">CREATE TABLE...AS SELECT...</code>或<code class="codeph">ALTER TABLE...MOVE...</code>将数据移动到加密的表空间。<code class="codeph">CREATE TABLE...AS SELECT...</code>语句从现有表创建表。<code class="codeph">ALTER TABLE...MOVE...</code>语句将表移动到加密的表空间中。
                           </p>
                           <p>出于安全原因，您无法使用<code class="codeph">NO SALT</code>选项加密表空间。
                           </p>
                           <p>您可以查询<code class="codeph">DBA_TABLESPACES</code>和<code class="codeph">USER_TABLESPACES</code>数据字典视图的<code class="codeph">ENCRYPTED</code>列，以验证表空间是否已加密。
                           </p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-5B8CCF8D-278D-411B-B8EF-F69F9364D762__GUID-A14F401C-494B-409F-A962-A6E84FD8FF06">
                              <p class="notep1">也可以看看：</p>
                              <p>有关<a href="../refrn/DBA_TABLESPACES.html#REFRN23287" target="_blank"><code class="codeph">DBA_TABLESPACES</code></a>和<a href="../refrn/USER_TABLESPACES.html#REFRN26287" target="_blank"><code class="codeph">USER_TABLESPACES</code></a>数据字典视图的更多信息，请<a href="../refrn/DBA_TABLESPACES.html#REFRN23287" target="_blank"><code class="codeph">DBA_TABLESPACES</code></a> <span><cite>Oracle数据库参考</cite></span></p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-161BDCBD-BC49-4D49-A1B5-9AE7F942FE4B" title="设置COMPATIBLE初始化参数后，即可创建加密表空间。">步骤3：创建加密表空间</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ASOAG10309"></a><div class="props_rev_3"><a id="GUID-A0D33E93-FC64-45F1-B45A-D0D80AD37176" name="GUID-A0D33E93-FC64-45F1-B45A-D0D80AD37176"></a><h6 id="ASOAG-GUID-A0D33E93-FC64-45F1-B45A-D0D80AD37176" class="sect6">创建加密表空间</h6>
                        <div>
                           <p>要创建加密表空间，必须使用带有<code class="codeph">ENCRYPTION USING</code>子句的<code class="codeph">CREATE TABLESPACE</code>语句。
                           </p>
                           <div class="section">
                              <ol>
                                 <li>
                                    <p>以已被授予<code class="codeph">CREATE TABLESPACE</code>系统特权的用户身份登录数据库实例。
                                    </p>
                                    <p>在多租户环境中，登录PDB。例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin @hrpdb as syskm输入密码： <span class="italic">password</span>已连接。
</pre><p>要查找可用的PDB，请运行<code class="codeph">show pdbs</code>命令。要检查当前PDB，请运行<code class="codeph">show con_name</code>命令。
                                    </p>
                                 </li>
                                 <li>
                                    <p>使用其加密子句运行<code class="codeph">CREATE TABLESPACE</code>语句。
                                    </p>
                                    <p>例如：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLESPACE encrypt_ts DATAFILE'$ ORACLE_HOME / dbs / encrypt_df.dbf'SIZE 1M <span class="bold">ENCRYPTION使用'</span> AES256'ENCRYPT <span class="bold">;</span>
</pre><p>在本规范中：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><code class="codeph">ENCRYPTION USING 'AES256' ENCRYPT</code>指定加密算法和加密的密钥长度。<code class="codeph">ENCRYPT</code>子句加密表空间。将此设置括在单引号（''）中。密钥长度包含在算法名称中。如果未指定加密算法，则使用默认加密算法<code class="codeph">AES128</code> 。
                                          </p>
                                       </li>
                                    </ul>
                                 </li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-A0D33E93-FC64-45F1-B45A-D0D80AD37176__GUID-E1D5B7FD-161E-453C-954E-947065EC4B53">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="introduction-to-transparent-data-encryption.html#GUID-AAE3C965-C6A8-45D6-BA5D-F88B300A301A" title="默认情况下，透明数据加密（TDE）列加密使用高级加密标准（AES）。">支持的加密和完整性算法</a></p>
                                 </li>
                                 <li>
                                    <p><a href="../sqlrf/CREATE-TABLESPACE.html#SQLRF01403" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-161BDCBD-BC49-4D49-A1B5-9AE7F942FE4B" title="设置COMPATIBLE初始化参数后，即可创建加密表空间。">步骤3：创建加密表空间</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ASOAG10160"></a><a id="ASOAG10310"></a><div class="props_rev_3"><a id="GUID-9E5ACD09-D598-4DB1-8C8F-1BB5F646B6E9" name="GUID-9E5ACD09-D598-4DB1-8C8F-1BB5F646B6E9"></a><h6 id="ASOAG-GUID-9E5ACD09-D598-4DB1-8C8F-1BB5F646B6E9" class="sect6">示例：创建使用AES192的加密表空间</h6>
                        <div>
                           <p>您可以使用<code class="codeph">CREATE TABLESPACE</code> SQL语句创建加密表空间。
                           </p>
                           <p><a href="configuring-transparent-data-encryption.html#GUID-9E5ACD09-D598-4DB1-8C8F-1BB5F646B6E9__CJABGBEJ">例3-8</a>创建了一个名为<code class="codeph">securespace_1</code>的表空间，该表空间使用<code class="codeph">AES192</code>算法加密。密钥长度为192位。
                           </p>
                           <div class="example" id="GUID-9E5ACD09-D598-4DB1-8C8F-1BB5F646B6E9__CJABGBEJ">
                              <p class="titleinexample">示例3-8创建使用AES192的加密表空间</p><pre class="oac_no_warn" dir="ltr">使用'AES192'ENCRYPT创建TABLESPACE securespace_1 DATAFILE'/ home / user / oradata / secure01.dbf'SIZE 150M加密;</pre></div>
                           <!-- class="example" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-161BDCBD-BC49-4D49-A1B5-9AE7F942FE4B" title="设置COMPATIBLE初始化参数后，即可创建加密表空间。">步骤3：创建加密表空间</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ASOAG10161"></a><div class="sect5"><a id="GUID-A7FE953F-048E-462F-8E2A-851A05AF9A04" name="GUID-A7FE953F-048E-462F-8E2A-851A05AF9A04"></a><h6 id="ASOAG-GUID-A7FE953F-048E-462F-8E2A-851A05AF9A04" class="sect6">示例：创建使用默认算法的加密表空间</h6>
                        <div>
                           <p>您可以使用<code class="codeph">CREATE TABLESPACE</code> SQL语句创建使用默认算法的加密表空间。
                           </p>
                           <p><a href="configuring-transparent-data-encryption.html#GUID-A7FE953F-048E-462F-8E2A-851A05AF9A04__CJADCCEH">例3-9</a>创建了一个名为<code class="codeph">securespace_2</code>的表空间。由于未指定加密算法，因此使用默认加密算法（ <code class="codeph">AES128</code> ）。密钥长度为128位。
                           </p>
                           <p>您无法加密现有表空间。</p>
                           <div class="example" id="GUID-A7FE953F-048E-462F-8E2A-851A05AF9A04__CJADCCEH">
                              <p class="titleinexample">示例3-9创建使用默认算法的加密表空间</p><pre class="oac_no_warn" dir="ltr">CREATE TABLESPACE securespace_2 DATAFILE'/ home / user / oradata / secure01.dbf'SIZE 150M ENCRYPTION ENCRYPT;</pre></div>
                           <!-- class="example" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-161BDCBD-BC49-4D49-A1B5-9AE7F942FE4B" title="设置COMPATIBLE初始化参数后，即可创建加密表空间。">步骤3：创建加密表空间</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-9D9BDB52-CA0F-4275-B16E-B71173C76D56" name="GUID-9D9BDB52-CA0F-4275-B16E-B71173C76D56"></a><h4 id="ASOAG-GUID-9D9BDB52-CA0F-4275-B16E-B71173C76D56" class="sect4">加密未来表空间</h4>
                  <div>
                     <p>您可以将Oracle数据库配置为自动加密将要创建的未来表空间。</p>
                     <p></p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-A288B628-28B5-4A4F-9F08-395B0BB49871">关于加密未来表空间</a><br>加密未来表空间的能力有助于防止Oracle云环境中的数据泄露。
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-63BC7CE0-1EB8-44D2-9C4D-D85294AF00AE">设置将来的表空间加密</a><br>您可以设置<code class="codeph">ENCRYPT_NEW_TABLESPACES</code>数据库初始化参数以自动加密您创建的未来表空间。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" title="您可以在脱机和联机表空间和数据库上执行加密操作。">表空间和数据库的加密转换</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-A288B628-28B5-4A4F-9F08-395B0BB49871" name="GUID-A288B628-28B5-4A4F-9F08-395B0BB49871"></a><h5 id="ASOAG-GUID-A288B628-28B5-4A4F-9F08-395B0BB49871" class="sect5">关于加密未来表空间</h5>
                     <div>
                        <p>加密未来表空间的能力有助于防止Oracle云环境中的数据泄露。</p>
                        <p><code class="codeph">ENCRYPT_NEW_TABLESPACES</code>数据库初始化参数控制未来数据库的加密方式。
                        </p>
                        <p>您可以在Oracle Cloud中完全创建和运行Oracle数据库。由于此配置在云中托管客户的数据，因此Oracle建议您尽可能启用加密。长期目标是加密Oracle Cloud中的所有数据。或者，您可以在云中和内部部署数据库。</p>
                        <p>在Oracle Cloud环境中，在Oracle Cloud和本地环境中创建加密表空间时，可能会出现以下情况：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您在Oracle Cloud中创建测试数据库，并且在将<code class="codeph">ENCRYPT_NEW_TABLESPACE</code>参数设置为自动创建加密的云数据库时使用加密表空间。但是，您可能没有意图甚至高级安全选项许可证将加密数据库带回本地。
                              </p>
                           </li>
                           <li>
                              <p>您可以创建混合定义者权限环境，其中主数据库位于内部，备用数据库位于Oracle Cloud上。如果发生切换操作，则新主服务器位于Oracle Cloud上。如果对新表空间进行透明加密，则可能会出现与此列表中第一项类似的方案。例如，假设您没有高级安全选项（ASO）许可证，并且Oracle云中有自动加密的表空间。内部备用数据库也会自动加密。在这种情况下，由于您没有ASO许可证，因此无法使用备用数据库。要解决此问题，请将<code class="codeph">ENCRYPT_NEW_TABLESPACES</code>设置为DDL，以防止在Oracle Cloud中加密表空间。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-9D9BDB52-CA0F-4275-B16E-B71173C76D56" title="您可以将Oracle数据库配置为自动加密将要创建的未来表空间。">加密未来表空间</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-63BC7CE0-1EB8-44D2-9C4D-D85294AF00AE" name="GUID-63BC7CE0-1EB8-44D2-9C4D-D85294AF00AE"></a><h5 id="ASOAG-GUID-63BC7CE0-1EB8-44D2-9C4D-D85294AF00AE" class="sect5">设置将来的表空间加密</h5>
                     <div>
                        <p>您可以设置<code class="codeph">ENCRYPT_NEW_TABLESPACES</code>数据库初始化参数以自动加密您创建的未来表空间。
                        </p>
                        <ul>
                           <li class="stepexpand"><span>在SQL * Plus中，输入以下<code class="codeph">ALTER SYSTEM</code>语句：</span><div><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET ENCRYPT_NEW_TABLESPACES = <span class="italic">value</span> ;</pre><p>在本规范中， <code class="codeph"><span class="codeinlineitalic">value</span></code>可以是：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>如果未指定<code class="codeph">CREATE TABLESPACE</code> SQL语句的<code class="codeph">ENCRYPTION</code>子句， <code class="codeph">CLOUD_ONLY</code>将使用<code class="codeph">AES128</code>算法透明地加密云中的表空间。它仅适用于Oracle云环境。如果您在内部创建表空间，那么它将遵循您输入的<code class="codeph">CREATE TABLESPACE</code>语句规范。例如，如果省略<code class="codeph">ENCRYPTION</code>子句，则表空间将以未加密方式创建。如果包含此子句并使用其他算法，则表空间将使用该算法。<code class="codeph">CLOUD_ONLY</code>是默认值。
                                       </p>
                                    </li>
                                    <li>
                                       <p>如果省略了云计算和前提方案的<code class="codeph">CREATE TABLESPACE</code>的<code class="codeph">ENCRYPTION</code>子句，则<code class="codeph">ALWAYS</code>使用<code class="codeph">AES128</code>算法自动加密表空间。
                                       </p>但是，如果确实提供了<code class="codeph">ENCRYPTION</code>子句，则指定的算法优先于<code class="codeph">AES128</code> 。
                                    </li>
                                    <li>
                                       <p>对于Oracle Cloud和本地环境， <code class="codeph">DDL</code>使用<code class="codeph">CREATE TABLESPACE</code>的<code class="codeph">ENCRYPTION</code>子句的指定设置对表空间进行<code class="codeph">ENCRYPTION</code> 。
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/asoag&amp;id=REFRN-GUID-44EF2AAC-1313-4437-B0F3-A427F45016F2" target="_blank">ENCRYPT_NEW_TABLESPACES</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-9D9BDB52-CA0F-4275-B16E-B71173C76D56" title="您可以将Oracle数据库配置为自动加密将要创建的未来表空间。">加密未来表空间</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-833FDC4E-0980-4291-8F56-53BD6C8F7EEF" name="GUID-833FDC4E-0980-4291-8F56-53BD6C8F7EEF"></a><h4 id="ASOAG-GUID-833FDC4E-0980-4291-8F56-53BD6C8F7EEF" class="sect4">数据字典中的加密敏感凭证数据</h4>
                  <div>
                     <p>您可以加密<code class="codeph">SYS.LINK$</code>和<code class="codeph">SYS.SCHEDULER$_CREDENTIAL</code>系统表中的敏感凭据数据。
                     </p>
                     <p>默认情况下， <code class="codeph">SYS.LINK$</code>和<code class="codeph">SYS.SCHEDULER$_CREDENTIAL</code>系统表中的凭据数据将进行模糊处理。但是，由于许多类型的去混淆算法的可用性，Oracle建议您加密此敏感凭据数据。要检查数据字典凭据的状态，可以查询<code class="codeph">DICTIONARY_CREDENTIALS_ENCRYPT</code>数据字典视图。
                     </p>
                     <p>这两个系统表中的敏感凭证数据的加密使用透明数据加密。凭证数据的加密使用AES256算法。要加密凭据数据，您不需要Oracle Advanced Security Option许可证，但必须授予您<code class="codeph">SYSKM</code>管理权限，并且数据库必须具有开放密钥库。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/encrypt-sensitive-data.html#DBSEG-GUID-F9451BB4-8BF5-4E0B-8C49-8CE9C0C4AB1F" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" title="您可以在脱机和联机表空间和数据库上执行加密操作。">表空间和数据库的加密转换</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-DE533D60-C711-4ECD-AB1B-36E41A331A35" name="GUID-DE533D60-C711-4ECD-AB1B-36E41A331A35"></a><h4 id="ASOAG-GUID-DE533D60-C711-4ECD-AB1B-36E41A331A35" class="sect4">现有脱机表空间的加密转换</h4>
                  <div>
                     <p>您可以使用<code class="codeph">ALTER TABLESPACE</code> SQL语句<code class="codeph">OFFLINE</code> ， <code class="codeph">ENCRYPT</code>和<code class="codeph">DECRYPT</code>子句执行脱机加密转换。
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-689A82BA-F09A-47AB-8A81-41375F833C7D">关于现有脱机表空间的加密转换</a><br>当表空间脱机或数据库未打开时，您可以加密或解密用户表空间的现有数据文件。
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-57B9D24B-02CC-4DEF-909E-81577E35DD5F">使用脱机转换加密现有的用户定义表空间</a><br>要使用脱机转换加密现有表空间，可以使用带有<code class="codeph">OFFLINE</code>和<code class="codeph">ENCRYPT</code>子句的<code class="codeph">ALTER TABLESPACE</code> SQL语句。
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-68BAB7C8-2757-4513-BE78-CA251C27B65F">使用脱机转换解密现有表空间</a><br>要使用脱机转换解密现有表空间，可以将<code class="codeph">ALTER TABLESPACE</code> SQL语句与<code class="codeph">OFFLINE</code>和<code class="codeph">DECRYPT</code>子句一起使用。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" title="您可以在脱机和联机表空间和数据库上执行加密操作。">表空间和数据库的加密转换</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-689A82BA-F09A-47AB-8A81-41375F833C7D" name="GUID-689A82BA-F09A-47AB-8A81-41375F833C7D"></a><h5 id="ASOAG-GUID-689A82BA-F09A-47AB-8A81-41375F833C7D" class="sect5">关于现有脱机表空间的加密转换</h5>
                     <div>
                        <p>当表空间脱机或数据库未打开时，您可以加密或解密用户表空间的现有数据文件。</p>
                        <p>如果您不打算将数据库的兼容性从Oracle Database 11c第2版（11.2）或Oracle Database 12c第1版（12.1）更改为版本18c（这是不可逆转的），请使用脱机加密方法。如果要在将此数据库升级到版本18c之前快速使用透明数据加密，则脱机加密方法也很有用。您可以加密和解密脱机表空间。</p>
                        <p>请注意以下事项：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果要使用脱机转换方法加密Oracle数据库提供的表空间（ <code class="codeph">SYSTEM</code> ， <code class="codeph">SYSAUX</code>和<code class="codeph">UNDO</code> ），则必须使用<a href="configuring-transparent-data-encryption.html#GUID-F64315CB-F80F-4F06-B7B1-A71A80B96710" title="使用脱机转换加密现有数据库时，对于Oracle管理的表空间，不指定加密算法。">加密具有脱机转换的现有数据库中</a>描述的方法。
                              </p>
                           </li>
                           <li>
                              <p>您可以使用联机方法重新键入先前使用脱机方法加密的表空间。</p>
                           </li>
                           <li>
                              <p>如果已配置Oracle Data Guard，则可以先通过加密备用数据库上的表空间，切换到主数据库，然后加密主数据库上的表空间来最大限度地减少停机时间。</p>
                           </li>
                           <li>
                              <p>您可以使用<code class="codeph">USING ...ENCRYPT</code>子句指定加密算法。支持的算法包括<code class="codeph">AES128</code> ， <code class="codeph">AES192</code> ， <code class="codeph">AES256</code>和其他算法，如<code class="codeph">ARIA</code>和<code class="codeph">GOST</code> 。要检查加密密钥，请查询<code class="codeph">V$DATABASE_KEY_INFO</code>视图中的<code class="codeph">ENCRYPTIONALG</code>列。
                              </p>
                           </li>
                           <li>
                              <p>您可以使用<code class="codeph">ALTER TABLESPACE</code>语句通过使用多个前台会话来并行转换脱机表空间来加密不同的数据文件。
                              </p>
                           </li>
                           <li>
                              <p>如果您使用的是Oracle Data Guard，则可以通过首先加密备用数据库上的表空间，切换，然后加密原始主数据库上的表空间来最小化停机时间。</p>
                           </li>
                           <li>
                              <p>对于Oracle Database 11g第2版（11.2.0.4）和Oracle Database 12c第1版（12.1.0.2），您无法对<code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code>表空间执行脱机加密。此外，Oracle不建议在这些版本中脱机加密<code class="codeph">UNDO</code>表空间。这样做可以防止密钥库被关闭，这会阻止数据库运行。此外，在数据库脱机时加密<code class="codeph">UNDO</code>表空间不是必需的，因为与任何加密表空间关联的所有撤消记录都已在<code class="codeph">UNDO</code>表空间中自动加密。如果要加密<code class="codeph">TEMP</code>表空间，则必须删除然后将其重新创建为加密。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="introduction-to-transparent-data-encryption.html#GUID-AAE3C965-C6A8-45D6-BA5D-F88B300A301A" title="默认情况下，透明数据加密（TDE）列加密使用高级加密标准（AES）。">支持的加密和完整性算法</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-DE533D60-C711-4ECD-AB1B-36E41A331A35" title="您可以使用ALTER TABLESPACE SQL语句OFFLINE，ENCRYPT和DECRYPT子句执行脱机加密转换。">现有脱机表空间的加密转换</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-57B9D24B-02CC-4DEF-909E-81577E35DD5F" name="GUID-57B9D24B-02CC-4DEF-909E-81577E35DD5F"></a><h5 id="ASOAG-GUID-57B9D24B-02CC-4DEF-909E-81577E35DD5F" class="sect5">使用脱机转换加密现有的用户定义表空间</h5>
                     <div>
                        <p>要使用脱机转换加密现有表空间，可以使用带有<code class="codeph">OFFLINE</code>和<code class="codeph">ENCRYPT</code>子句的<code class="codeph">ALTER TABLESPACE</code> SQL语句。
                        </p>
                        <div class="section">本节中描述的过程适用于您要加密数据库中单个用户创建的表空间的情况。这些表空间可以脱机加密。但是，Oracle数据库提供的<code class="codeph">SYSTEM</code>和<code class="codeph">UNDO</code>表空间无法脱机。如果要脱机加密表空间，则必须使用<a href="configuring-transparent-data-encryption.html#GUID-F64315CB-F80F-4F06-B7B1-A71A80B96710" title="使用脱机转换加密现有数据库时，对于Oracle管理的表空间，不指定加密算法。">加密具有脱机转换的现有数据库中</a>描述的方法。
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以具有<code class="codeph">SYSDBA</code>管理权限的用户身份进行连接。</span><div>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as sysdba输入密码： <span class="italic">password</span></pre><p>如果计划加密<code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code>表空间，则必须具有<code class="codeph">SYSDBA</code>管理权限。否则，请使用<code class="codeph">SYSKM</code>管理权限进行连接。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>使表空间脱机。</span><div><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE用户OFFLINE NORMAL;</pre></div>
                           </li>
                           <li class="stepexpand"><span>备份表空间。</span><div>
                                 <p>离线转换方法不使用辅助磁盘空间或文件，它直接对数据文件进行就地操作。因此，您应该在脱机转换之前执行用户表空间的完整备份。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>作为已被授予<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限的用户，请打开软件密钥库。</span><div>例如：<pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理集KEYSTORE OPEN由<span class="italic">software_keystore_password</span>识别;</pre></div>
                           </li>
                           <li class="stepexpand"><span>加密表空间。</span><div>例如，要加密整个表空间，请包含其数据文件：<pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE用户1 ENCRYPTION OFFLINE ENCRYPT;</pre><p>此示例使用默认加密算法<code class="codeph">AES128</code>加密表空间。要使用其他加密算法，请输入类似于以下内容的语句：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE用户2使用'AES256'ENCRYPT离线加密;</pre></div>
                              <div>要加密表空间中的各个数据文件，请使用<code class="codeph">ALTER DATABASE DATAFILE</code> SQL语句。例如，要加密数据文件<code class="codeph">user_01.dbf</code>和<code class="codeph">user_02.dbf</code> ：<pre class="oac_no_warn" dir="ltr">ALTER DATABASE DATAFILE'user_01.dbf'ENCRYPT; ALTER DATABASE DATAFILE'user_02.dbf'ENCRYPT;</pre><p>在同一个数据库会话中，这些语句依次加密每个数据文件。如果您在自己的数据库会话中执行每个语句，那么它们将并行执行。</p>
                              </div>
                              <div>如果加密过程中断，则重新运行<code class="codeph">ALTER TABLESPACE</code>语句。中断时可能出现的错误类型是一般错误，例如文件系统或存储文件系统错误。表空间中的数据文件应始终加密。例如，假设您使具有10个文件的表空间脱机但由于某种原因，加密仅针对9个文件完成，留下一个解密。如果<code class="codeph">COMPATIBLE</code>参数设置为<code class="codeph">12.2.0.0</code>或更高，则可以使用这种不一致的加密使表空间重新联机，但不建议将表空间保留在此状态。如果<code class="codeph">COMPATIBLE</code>小于<code class="codeph">12.2.0.0</code> ，则如果加密属性在数据文件中不一致，则无法使表空间联机。
                              </div>
                           </li>
                           <li class="stepexpand"><span>使表空间重新联机或打开数据库。</span><ul>
                                 <li>要使表空间重新联机：<pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE用户在线;</pre></li>
                                 <li>
                                    <p>要在非多租户环境中打开数据库：</p><pre class="oac_no_warn" dir="ltr">ALTER DATABASE OPEN</pre></li>
                                 <li>
                                    <p>在多租户环境中，如果根目录已打开且PDB未打开，则可以使用脱机方法加密数据文件或表空间。例如，对于名为<code class="codeph">hr_pdb</code>的PDB：</p><pre class="oac_no_warn" dir="ltr">ALTER PLUGGABLE DATABASE hr_pdb OPEN</pre></li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-A9C23E31-CF57-477A-9E85-856DD411718D" title="要打开软件密钥库，必须将ADMINISTER KEY MANAGEMENT语句与SET KEYSTORE OPEN子句一起使用。">打开软件密钥库</a></li>
                              <li><a href="introduction-to-transparent-data-encryption.html#GUID-AAE3C965-C6A8-45D6-BA5D-F88B300A301A" title="默认情况下，透明数据加密（TDE）列加密使用高级加密标准（AES）。">支持的加密和完整性算法</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-DE533D60-C711-4ECD-AB1B-36E41A331A35" title="您可以使用ALTER TABLESPACE SQL语句OFFLINE，ENCRYPT和DECRYPT子句执行脱机加密转换。">现有脱机表空间的加密转换</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-68BAB7C8-2757-4513-BE78-CA251C27B65F" name="GUID-68BAB7C8-2757-4513-BE78-CA251C27B65F"></a><h5 id="ASOAG-GUID-68BAB7C8-2757-4513-BE78-CA251C27B65F" class="sect5">使用脱机转换解密现有表空间</h5>
                     <div>
                        <p>要使用脱机转换解密现有表空间，可以将<code class="codeph">ALTER TABLESPACE</code> SQL语句与<code class="codeph">OFFLINE</code>和<code class="codeph">DECRYPT</code>子句一起使用。
                        </p>
                        <ol>
                           <li class="stepexpand"><span>以具有<code class="codeph">SYSDBA</code>管理权限的用户身份进行连接。</span><div>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as sysdba输入密码： <span class="italic">password</span></pre><p>如果计划解密<code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code>表空间，则必须具有<code class="codeph">SYSDBA</code>管理权限。否则，请使用<code class="codeph">SYSKM</code>管理权限进行连接。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>使表空间脱机。</span><div><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE用户OFFLINE NORMAL;</pre></div>
                           </li>
                           <li class="stepexpand"><span>作为已被授予<code class="codeph">ADMINISTER KEY MANAGEMENT</code>或<code class="codeph">SYSKM</code>权限的用户，请打开密钥库。</span><div>例如：<pre class="oac_no_warn" dir="ltr">ADMINISTER密钥管理集KEYSTORE OPEN由<span class="italic">software_keystore_password</span>识别;</pre></div>
                           </li>
                           <li class="stepexpand"><span>运行<code class="codeph">ALTER TABLESPACE</code> SQL语句以执行解密。</span><div>例如，对于名为<code class="codeph">users</code>的表空间：<pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE用户ENCRYPTION OFFLINE DECRYPT;</pre></div>
                              <div>
                                 <p>如果解密过程中断，则重新运行<code class="codeph">ALTER TABLESPACE</code>语句。中断时可能出现的错误类型是一般错误，例如文件系统或存储文件系统错误。应始终解密表空间中的数据文件。例如，假设您使具有10个文件的表空间脱机但由于某种原因，解密仅针对9个文件完成，留下一个加密。如果<code class="codeph">COMPATIBLE</code>参数设置为<code class="codeph">12.2.0.0</code>或更高，则可以使表空间重新联机并使用这种不一致的解密，则不建议将表空间保持在此状态。如果<code class="codeph">COMPATIBLE</code>小于<code class="codeph">12.2.0.0</code> ，则如果加密属性在数据文件中不一致，则无法使表空间联机。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>使表空间在线。</span><div><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE用户在线;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-A9C23E31-CF57-477A-9E85-856DD411718D" title="要打开软件密钥库，必须将ADMINISTER KEY MANAGEMENT语句与SET KEYSTORE OPEN子句一起使用。">打开软件密钥库</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-DE533D60-C711-4ECD-AB1B-36E41A331A35" title="您可以使用ALTER TABLESPACE SQL语句OFFLINE，ENCRYPT和DECRYPT子句执行脱机加密转换。">现有脱机表空间的加密转换</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-46D2C2FC-A09E-4036-8DB7-FDAB3D346F19" name="GUID-46D2C2FC-A09E-4036-8DB7-FDAB3D346F19"></a><h4 id="ASOAG-GUID-46D2C2FC-A09E-4036-8DB7-FDAB3D346F19" class="sect4">现有在线表空间的加密转换</h4>
                  <div>
                     <p>您可以使用带有<code class="codeph">ONLINE</code>和<code class="codeph">ENCRYPT</code>或<code class="codeph">DECRYPT</code>子句的<code class="codeph">ALTER TABLESPACE</code> SQL语句来加密和解密在线现有表空间。
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-16AD6D1C-F7BB-42DC-A392-B7C128BC054C">关于现有联机表空间的加密转换</a><br>您可以在联机时加密，解密或重新密钥现有用户表空间以及<code class="codeph">SYSTEM</code> ， <code class="codeph">SYSAUX</code>和<code class="codeph">UNDO</code>表空间。
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-79DC7E79-E687-4FB3-BDD5-639ACD1872AF">使用在线转换加密现有表空间</a><br>要使用联机转换加密现有表空间，请使用带有<code class="codeph">ONLINE</code>和<code class="codeph">ENCRYPT</code>子句的<code class="codeph">ALTER TABLESPACE</code> 。
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-EC3DF033-8975-4233-B4A5-B933A48897E7">使用在线转换重新键入现有表空间</a><br>要<code class="codeph">REKEY</code>联机的现有表空间，可以使用<code class="codeph">ALTER TABLESPACE</code> SQL语句的<code class="codeph">REKEY</code>子句。
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-22675921-3A4C-4E6C-86DD-6172A1526689">使用在线转换解密现有表空间</a><br>要使用联机转换解密现有表空间，可以将<code class="codeph">ALTER TABLESPACE</code> SQL语句与<code class="codeph">DECRYPT</code>子句一起使用。
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-CD29F72C-780F-455C-B2BB-B089F23025E5">完成中断的在线加密转换</a><br>如果在线加密过程中断，则可以使用<code class="codeph">FINISH</code>子句重新运行<code class="codeph">ALTER TABLESPACE</code>语句来完成转换。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" title="您可以在脱机和联机表空间和数据库上执行加密操作。">表空间和数据库的加密转换</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-16AD6D1C-F7BB-42DC-A392-B7C128BC054C" name="GUID-16AD6D1C-F7BB-42DC-A392-B7C128BC054C"></a><h5 id="ASOAG-GUID-16AD6D1C-F7BB-42DC-A392-B7C128BC054C" class="sect5">关于现有联机表空间的加密转换</h5>
                     <div>
                        <p>您可以在联机时加密，解密或重新密钥现有用户表空间以及<code class="codeph">SYSTEM</code> ， <code class="codeph">SYSAUX</code>和<code class="codeph">UNDO</code>表空间。
                        </p>
                        <p>但是，您无法在线加密，解密或重新密钥临时表空间。</p>
                        <p>可以使用<code class="codeph">CREATE TABLESPACE</code> SQL语句的<code class="codeph">ONLINE</code>子句创建联机表空间。在线加密或重新加密表空间时，表空间将拥有自己独立的加密密钥和算法。
                        </p>
                        <p>请注意以下事项：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果已对加密的脱机表空间进行加密，则可以在线重新键入该表空间以使用其他算法。</p>
                           </li>
                           <li>
                              <p>您可以使用多个前台会话来加密不同的表空间，从而在线并行加密多个表空间。在每个表空间内，数据文件按顺序加密。</p>
                           </li>
                           <li>
                              <p>如果转换中断，则可以通过发出<code class="codeph">ALTER TABLESPACE</code> SQL语句的<code class="codeph">FINISH</code>子句来恢复该过程。
                              </p>
                           </li>
                           <li>
                              <p>为每个联机表空间转换生成重做日志。</p>
                           </li>
                           <li>
                              <p>不要与其他表空间同时加密<code class="codeph">SYSTEM</code>和<code class="codeph">UNDO</code>表空间。
                              </p>
                           </li>
                           <li>
                              <p>在加密表空间时，不能将可传输表空间功能与Oracle Data Pump一起使用。</p>
                           </li>
                           <li>
                              <div class="p">您不能与以下功能同时运行<code class="codeph">ALTER TABLESPACE</code>语句：<ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">ADMINSTER KEY MANAGEMENT SET KEY</code> SQL语句</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FLASHBACK DATABASE</code> SQL语句</p>
                                    </li>
                                 </ul> 
                              </div>
                           </li>
                           <li>
                              <p>如果您使用Oracle管理的文件作为数据文件，则加密过程会重新键入与表空间关联的数据文件，然后将其复制或移动到默认的Oracle管理文件位置。</p>
                           </li>
                           <li>
                              <p>您可以在加密后将新文件添加到表空间。Oracle数据库使用新的加密密钥重新格式化新文件。块将使用新密钥加密。</p>
                           </li>
                           <li>
                              <p>在根或PDB中发生的先前操作可能需要在开始在线转换过程之前对数据字典交叉检查控制文件。<code class="codeph">ORA-241 operation disallowed: control file is not yet checked against data dictionary</code>错误。要解决此问题，请重新启动root或PDB，然后再次尝试发出联机转换命令。
                              </p>
                           </li>
                           <li>出于安全原因，一旦在线转换处理数据文件，Oracle将在删除之前将原始数据文件清零。这可以防止数据库在磁盘扇区上留下重影数据。但是，如果在Oracle Recovery Manager（Oracle RMAN）验证文件的同时执行联机表空间转换，则会出现已知的限制。在线表空间转换一次处理一个文件。如果Oracle RMAN在通过联机表空间转换处理文件的同时验证文件，则Oracle RMAN可能会报告损坏问题（ <code class="codeph">ORA-01578: ORACLE data block corrupted (file # , block # )</code> ）。这样做是因为它将构成文件的块视为零。这是一个误报，你可以忽略错误。如果发生这种情况，请尝试再次运行Oracle RMAN验证过程。
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="introduction-to-transparent-data-encryption.html#GUID-AAE3C965-C6A8-45D6-BA5D-F88B300A301A" title="默认情况下，透明数据加密（TDE）列加密使用高级加密标准（AES）。">支持的加密和完整性算法</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-46D2C2FC-A09E-4036-8DB7-FDAB3D346F19" title="您可以使用带有ONLINE和ENCRYPT或DECRYPT子句的ALTER TABLESPACE SQL语句来加密和解密在线现有表空间。">现有联机表空间的加密转换</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-79DC7E79-E687-4FB3-BDD5-639ACD1872AF" name="GUID-79DC7E79-E687-4FB3-BDD5-639ACD1872AF"></a><h5 id="ASOAG-GUID-79DC7E79-E687-4FB3-BDD5-639ACD1872AF" class="sect5">使用在线转换加密现有表空间</h5>
                     <div>
                        <p>要使用联机转换加密现有表空间，请使用带有<code class="codeph">ONLINE</code>和<code class="codeph">ENCRYPT</code>子句的<code class="codeph">ALTER TABLESPACE</code> 。
                        </p>
                        <ol>
                           <li class="stepexpand"><span>以具有<code class="codeph">SYSDBA</code>管理权限的用户身份进行连接。</span><div>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as sysdba输入密码： <span class="italic">password</span></pre><p>如果计划加密<code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code>表空间，则必须具有<code class="codeph">SYSDBA</code>管理权限。否则，请使用<code class="codeph">SYSKM</code>管理权限进行连接。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>确保<code class="codeph">COMPATIBLE</code>初始化参数设置为12.2.0.0。</span><div>
                                 <p>您可以使用<code class="codeph">SHOW PARAMETER</code>命令检查<code class="codeph">SHOW PARAMETER</code>的当前设置。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>确保数据库以读写模式打开。</span><div>
                                 <p>您可以查询<code class="codeph">V$INSTANCE</code>动态视图的<code class="codeph">STATUS</code>列以查找数据库是否已打开以及<code class="codeph">V$DATABASE</code>视图的<code class="codeph">OPEN_MODE</code>列以查找它是否处于读写模式。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>如有必要，请以读写模式打开数据库。</span><div><pre class="oac_no_warn" dir="ltr">ALTER DATABASE OPEN READ WRITE;</pre></div>
                           </li>
                           <li class="stepexpand"><span>确保辅助空间的大小至少与此表空间的最大数据文件大小相同。</span><div>
                                 <p>此大小要求是因为Oracle数据库一次执行一个文件的转换。例如，如果表空间的最大数据文件是32 GB，则确保您有32 GB的辅助空间。要查找数据文件使用的空间，请查询<code class="codeph">V$DATAFILE</code>动态性能视图的<code class="codeph">BYTES</code>或<code class="codeph">BLOCKS</code>列。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>创建并打开主加密密钥。</span><div>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">ADMINISTER KEY管理创建密钥库<span class="italic">'keystore_location'</span> IDENTIFIED BY <span class="italic">software_keystore_password;</span> ADMINISTER密钥管理集KEYSTORE OPEN由<span class="italic">software_keystore_password</span>识别;管理员密钥管理设置密钥由<span class="italic">software_keystore_password</span> WITH BACKUP识别;</pre></div>
                           </li>
                           <li class="stepexpand"><span>使用<code class="codeph">ENCRYPTION</code>和<code class="codeph">ENCRYPT</code>子句运行<code class="codeph">ALTER TABLESPACE</code>语句以执行加密。</span><div>
                                 <p>例如，对于名为<code class="codeph">users</code>的非Oracle托管文件表空间：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE用户使用'AES192'ENCRYPT FILE_NAME_CONVERT =（'users.dbf'，'users_enc.dbf'）在线加密！</pre><p>在这个例子中：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">ENCRYPTION ONLINE USING 'AES192' ENCRYPT</code>设置语句在表空间<code class="codeph">users</code>联机时加密，并为其分配<code class="codeph">AES192</code>加密算法。如果省略<code class="codeph">USING</code> <code class="codeph"><span class="variable" translate="no">algorithm</span></code>子句，则使用默认算法<code class="codeph">AES128</code> 。对于<code class="codeph">SYSTEM</code>和<code class="codeph">UNDO</code>表空间，可以使用<code class="codeph">ENCRYPT</code>子句加密表空间，但不能指定加密算法，因为它们必须在第一次使用现有数据库密钥加密。加密表空间后，使用<code class="codeph">REKEY</code>子句指定算法。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">FILE_NAME_CONVERT</code>指定与表空间关联的一对或多对数据文件。该对中的第一个名称是现有数据文件，第二个名称用于此数据文件的加密版本，该文件将在<code class="codeph">ALTER TABLESPACE</code>语句成功执行后创建。如果表空间有多个数据文件，则必须在此语句中处理它们。请注意以下事项：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>用逗号分隔每个文件名，包括多对文件。例如：</p><pre class="oac_no_warn" dir="ltr">FILE_NAME_CONVERT =（'users1.dbf'，'users1_enc.dbf'，'users2.dbf'，'users2_enc.dbf'）</pre></li>
                                          <li>
                                             <p>您可以在<code class="codeph">FILE_NAME_CONVERT</code>子句中指定目录路径。例如，以下子句将表空间的匹配文件从<code class="codeph">dbs</code>目录转换并移动到<code class="codeph">dbs/enc</code>目录：</p><pre class="oac_no_warn" dir="ltr">FILE_NAME_CONVERT =（'dbs'，'dbs / enc'）</pre></li>
                                          <li>
                                             <p><code class="codeph">FILE_NAME_CONVERT</code>子句识别模式。以下示例将数据文件<code class="codeph">users_1.dbf</code>和<code class="codeph">users_2.dbf</code>为<code class="codeph">users_enc1.dbf</code>和<code class="codeph">users_enc2.dbf</code> ：</p><pre class="oac_no_warn" dir="ltr">FILE_NAME_CONVERT =（'用户'，'users_enc'）</pre></li>
                                          <li>
                                             <p>在Oracle Data Guard环境中，在<code class="codeph">FILE_NAME_CONVERT</code>设置中包含备用数据库数据文件的名称。
                                             </p>
                                          </li>
                                          <li>
                                             <p>如果您使用的是Oracle管理的文件模式，则会在内部分配新文件名，因此该文件名不应影响站点的文件命名标准。如果您使用的是非Oracle管理的文件模式，并且省略了<code class="codeph">FILE_NAME_CONVERT</code>子句，则Oracle Database会在内部分配一个辅助文件名，然后将其重命名为原始名称。这使加密过程能够使用您最初为文件加密的名称。重命名操作有效地创建了该文件的另一个副本，因此它比显式包含<code class="codeph">FILE_NAME_CONVERT</code>子句慢。为了获得更好的性能，请包含<code class="codeph">FILE_NAME_CONVERT</code>子句。
                                             </p>
                                          </li>
                                          <li>
                                             <p>您可以通过查询<code class="codeph">V$DATAFILE</code>或<code class="codeph">V$DATAFILE_HEADER</code>动态视图来查找表空间的数据文件。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>默认情况下，数据文件位于<code class="codeph">$ORACLE_HOME/dbs</code>目录中。如果数据文件位于那里，则您不必指定路径。
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ol>
                        <div class="section">完成转换后，可以通过查询<code class="codeph">V$ENCRYPTED_TABLESPACES</code>动态视图的<code class="codeph">STATUS</code>列来检查加密状态。此视图的<code class="codeph">ENCRYPTIONALG</code>列显示了使用的加密算法。如果转换过程中断，则可以通过使用<code class="codeph">FINISH</code>子句运行<code class="codeph">ALTER TABLESPACE</code>来恢复它。例如，如果主数据文件转换但备用数据文件没有，则可以运行<code class="codeph">ALTER TABLESPACE ...在备用数据库上完成备用数据文件的FINISH</code> 。
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-DE637157-E201-482D-B12D-F5C59FF9618D" title="要设置COMPATIBLE初始化参数，必须编辑数据库实例的初始化参数文件。">为表空间加密设置COMPATIBLE初始化参数</a></li>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-CD29F72C-780F-455C-B2BB-B089F23025E5" title="如果在线加密过程中断，则可以使用FINISH子句重新运行ALTER TABLESPACE语句来完成转换。">完成中断的在线加密转换</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-46D2C2FC-A09E-4036-8DB7-FDAB3D346F19" title="您可以使用带有ONLINE和ENCRYPT或DECRYPT子句的ALTER TABLESPACE SQL语句来加密和解密在线现有表空间。">现有联机表空间的加密转换</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-EC3DF033-8975-4233-B4A5-B933A48897E7" name="GUID-EC3DF033-8975-4233-B4A5-B933A48897E7"></a><h5 id="ASOAG-GUID-EC3DF033-8975-4233-B4A5-B933A48897E7" class="sect5">使用在线转换重新键入现有表空间</h5>
                     <div>
                        <p>要<code class="codeph">REKEY</code>联机的现有表空间，可以使用<code class="codeph">ALTER TABLESPACE</code> SQL语句的<code class="codeph">REKEY</code>子句。
                        </p>
                        <div class="section">在执行重定密钥操作之前，请注意以下事项：<ul style="list-style-type:disc">
                              <li>
                                 <p>您无法重新键入<code class="codeph">TEMP</code>表空间。如果要为<code class="codeph">TEMP</code>表空间分配不同的加密算法，请删除<code class="codeph">TEMP</code>并使用正确的加密算法重新创建它。
                                 </p>
                              </li>
                              <li>
                                 <p>不要同时使用主密钥操作执行联机表空间重定密钥操作。要查找当前是否正在重新键入任何表空间，请发出以下查询以查找加密表空间的重定密钥状态：</p><pre class="oac_no_warn" dir="ltr">从V $ ENCRYPTED_TABLESPACES中选择TS＃，ENCRYPTIONALG，STATUS;</pre><p><code class="codeph">REKEYING</code>状态意味着仍在重新键入相应的表空间。此状态生效时，请勿重新生成主密钥。
                                 </p>
                              </li>
                           </ul>
                           <p>要通过在线转换重新生成现有表空间：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以具有<code class="codeph">SYSDBA</code>管理权限的用户身份进行连接。</span><div>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as sysdba输入密码： <span class="italic">password</span></pre><p>如果计划重新生成<code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code>表空间，则必须具有<code class="codeph">SYSDBA</code>管理权限。否则，请使用<code class="codeph">SYSKM</code>管理权限进行连接。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>确保满足以下要求：</span><ul>
                                 <li><code class="codeph">COMPATIBLE</code>初始化参数设置为12.2.0.0。
                                 </li>
                                 <li>数据库处于打开状态并处于读写模式。</li>
                                 <li>已创建主加密密钥并已打开。</li>
                              </ul>
                           </li>
                           <li class="stepexpand"><span>查询<code class="codeph">V$ENCRYPTED_TABLESPACES</code>动态视图的<code class="codeph">KEY_VERSION</code>和<code class="codeph">STATUS</code>列，以查找主加密密钥使用的加密算法的当前状态。</span></li>
                           <li class="stepexpand" id="GUID-EC3DF033-8975-4233-B4A5-B933A48897E7__PERFORMTHEREKEYOPERATIONBASEDONTHES-438B420C"><span>根据<code class="codeph">V$ENCRYPTED_TABLESPACES</code>动态视图返回的状态执行重定密钥操作：</span><ul>
                                 <li>
                                    <p>如果表空间的密钥版本状态为<code class="codeph">NORMAL</code> ，则指定联机表空间重新生成密钥的新算法。
                                    </p> 
                                    <p>例如：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE用户加密使用'AES192'REKEY FILE_NAME_CONVERT =（'users.dbf'，'users_enc.dbf'）;</pre></li>
                                 <li>
                                    <p>如果密钥版本状态为<code class="codeph">ENCRYPTING</code> ， <code class="codeph">DECRYPTING</code>或<code class="codeph">REKEYING</code> ，则使用<code class="codeph">FINISH</code>子句。
                                    </p>
                                    <p>例如：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE用户ENCRYPTION ONLINE FINISH REKEY FILE_NAME_CONVERT =（'users.dbf'，'users_enc.dbf'）;</pre></li>
                              </ul>
                           </li>
                           <li class="stepexpand"><span>如果<code class="codeph">ORA-00241 operation disallowed: control file inconsistent with data dictionary</code>出现<code class="codeph">ORA-00241 operation disallowed: control file inconsistent with data dictionary</code>错误<code class="codeph">ORA-00241 operation disallowed: control file inconsistent with data dictionary</code> ，则重新启动数据库。</span><div>在多租户环境中，重新启动CDB根数据库，然后重试步骤<a href="configuring-transparent-data-encryption.html#GUID-EC3DF033-8975-4233-B4A5-B933A48897E7__PERFORMTHEREKEYOPERATIONBASEDONTHES-438B420C">4</a> 。
                              </div>
                           </li>
                        </ol>
                        <div class="section">如果转换过程中断，则可以通过使用<code class="codeph">FINISH</code>子句运行<code class="codeph">ALTER TABLESPACE</code>来恢复它。
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-79DC7E79-E687-4FB3-BDD5-639ACD1872AF" title="要使用联机转换加密现有表空间，请使用带有ONLINE和ENCRYPT子句的ALTER TABLESPACE。">使用在线转换加密现有表空间</a></li>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-16AD6D1C-F7BB-42DC-A392-B7C128BC054C" title="您可以在联机时加密，解密或重新密钥现有用户表空间以及SYSTEM，SYSAUX和UNDO表空间。">关于现有联机表空间的加密转换</a></li>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-CD29F72C-780F-455C-B2BB-B089F23025E5" title="如果在线加密过程中断，则可以使用FINISH子句重新运行ALTER TABLESPACE语句来完成转换。">完成中断的在线加密转换</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-46D2C2FC-A09E-4036-8DB7-FDAB3D346F19" title="您可以使用带有ONLINE和ENCRYPT或DECRYPT子句的ALTER TABLESPACE SQL语句来加密和解密在线现有表空间。">现有联机表空间的加密转换</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-22675921-3A4C-4E6C-86DD-6172A1526689" name="GUID-22675921-3A4C-4E6C-86DD-6172A1526689"></a><h5 id="ASOAG-GUID-22675921-3A4C-4E6C-86DD-6172A1526689" class="sect5">使用在线转换解密现有表空间</h5>
                     <div>
                        <p>要使用联机转换解密现有表空间，可以将<code class="codeph">ALTER TABLESPACE</code> SQL语句与<code class="codeph">DECRYPT</code>子句一起使用。
                        </p>
                        <ol>
                           <li class="stepexpand"><span>以具有<code class="codeph">SYSDBA</code>管理权限的用户身份进行连接。</span><div>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as sysdba输入密码： <span class="italic">password</span></pre><p>如果计划解密<code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code>表空间，则必须具有<code class="codeph">SYSDBA</code>管理权限。否则，请使用<code class="codeph">SYSKM</code>管理权限进行连接。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>确保满足以下要求：</span><ul>
                                 <li><code class="codeph">COMPATIBLE</code>初始化参数设置为12.2.0.0。
                                 </li>
                                 <li>数据库处于打开状态并处于读写模式。</li>
                                 <li>已创建主加密密钥并已打开。</li>
                                 <li>有足够的辅助空间来完成解密。</li>
                              </ul>
                           </li>
                           <li class="stepexpand"><span>使用<code class="codeph">DECRYPT</code>子句运行<code class="codeph">ALTER TABLESPACE</code> SQL语句。</span><div>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE用户ENCRYPTION ONLINE DECRYPT FILE_NAME_CONVERT =（'users_enc.dbf'，'users.dbf'）;</pre><p>在本规范中：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>指定要解密的文件时，请按与其最初加密的相反顺序输入它们。也就是说，首先输入加密文件的名称（ <code class="codeph">users_enc.dbf</code> ），然后输入数据文件（ <code class="codeph">users.dbf</code> ）。
                                       </p>
                                    </li>
                                    <li>
                                       <p>不要为解密提供算法密钥。</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ol>
                        <div class="section">如果转换过程中断，则可以通过使用<code class="codeph">FINISH</code>子句运行<code class="codeph">ALTER TABLESPACE</code>来恢复它。
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-79DC7E79-E687-4FB3-BDD5-639ACD1872AF" title="要使用联机转换加密现有表空间，请使用带有ONLINE和ENCRYPT子句的ALTER TABLESPACE。">使用在线转换加密现有表空间</a></li>
                              <li><a href="configuring-transparent-data-encryption.html#GUID-CD29F72C-780F-455C-B2BB-B089F23025E5" title="如果在线加密过程中断，则可以使用FINISH子句重新运行ALTER TABLESPACE语句来完成转换。">完成中断的在线加密转换</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-46D2C2FC-A09E-4036-8DB7-FDAB3D346F19" title="您可以使用带有ONLINE和ENCRYPT或DECRYPT子句的ALTER TABLESPACE SQL语句来加密和解密在线现有表空间。">现有联机表空间的加密转换</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-CD29F72C-780F-455C-B2BB-B089F23025E5" name="GUID-CD29F72C-780F-455C-B2BB-B089F23025E5"></a><h5 id="ASOAG-GUID-CD29F72C-780F-455C-B2BB-B089F23025E5" class="sect5">完成中断的在线加密转换</h5>
                     <div>
                        <p>如果在线加密过程中断，则可以使用<code class="codeph">FINISH</code>子句重新运行<code class="codeph">ALTER TABLESPACE</code>语句来完成转换。
                        </p>
                        <div class="section">例如，中断的加密过程（加密，重新密钥或解密）可以是<code class="codeph">ORA-28425: missing a valid FILE_NAME_CONVERT clause</code>在<code class="codeph">ALTER TABLESPACE</code> SQL语句的<code class="codeph">FILE_NAME_CONVERT</code>子句中<code class="codeph">ORA-28425: missing a valid FILE_NAME_CONVERT clause</code>错误。中断进程的其他示例是转换是否跳过数据文件，如果Oracle DataBase WRiter（DBWR）进程对数据文件进行了分类，或者辅助文件没有足够的空间，则会发生错误。即使您没有使用<code class="codeph">FINISH</code>子句重新运行<code class="codeph">ALTER TABLESPACE</code>语句，表空间也应该可以运行。
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>查询<code class="codeph">V$ENCRYPTED_TABLESPACES</code>以检查表空间的<code class="codeph">STATUS</code>列。</span><div>
                                 <p>如果<code class="codeph">STATUS</code>列报告<code class="codeph">ENCRYPTING</code> ， <code class="codeph">DECRYPTING</code>或<code class="codeph">REKEYING</code> ，则使用<code class="codeph">FINISH</code>子句重新运行<code class="codeph">ALTER TABLESPACE</code>语句，如此过程中所述。如果<code class="codeph">STATUS</code>报告<code class="codeph">NORMAL</code> ，则可以在没有<code class="codeph">FINISH</code>子句的情况下重新运行<code class="codeph">ALTER TABLESPACE</code> 。
                                 </p>
                                 <p>您可以通过查询<code class="codeph">V$DATAFILE_HEADER</code>视图找到与<code class="codeph">TS#</code>和<code class="codeph">TABLESPACE_NAME</code>列匹配的表空间名称。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>如有必要，请查询以下附加视图以查找有关在线转换中断的表空间的信息：</span><ul>
                                 <li><code class="codeph">DBA_TABLESPACES</code>查找表空间的<code class="codeph">STATUS</code>是否指示它是在线还是离线。
                                 </li>
                                 <li><code class="codeph">V$ENCRYPTED_TABLESPACES</code>查找表空间的<code class="codeph">STATUS</code>是否指示它是否已加密，以及加密密钥的<code class="codeph">KEY_VERSION</code>是什么。
                                 </li>
                                 <li><code class="codeph">V$DATAFILE</code>和<code class="codeph">V$DATAFILE_HEADER</code>用于查找与表空间关联的数据文件。
                                 </li>
                              </ul>
                           </li>
                           <li class="stepexpand"><span>使用<code class="codeph">FINISH</code>子句运行<code class="codeph">ALTER TABLESPACE</code>语句。</span><div>示例如下：<ul style="list-style-type:disc">
                                    <li>
                                       <div class="p">对于加密操作：<pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE用户ENCRYPTION ONLINE FINISH ENCRYPT FILE_NAME_CONVERT =（'users.dbf'，'users_enc.dbf'）;</pre></div>
                                    </li>
                                    <li>
                                       <div class="p">对于解密操作：<pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE用户ENCRYPTION ONLINE FINISH DECRYPT FILE_NAME_CONVERT =（'users_enc.dbf'，'users.dbf'）;</pre></div>
                                       <p>请注意指定文件的顺序：首先是加密文件的名称，然后是数据文件的名称。（在加密操作中，首先指定数据文件的名称，然后指定加密文件的名称。）</p>
                                    </li>
                                    <li>
                                       <div class="p">对于重定密钥操作：<pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE用户ENCRYPTION ONLINE FINISH REKEY FILE_NAME_CONVERT =（'users.dbf'，'users_enc.dbf'）;</pre>在<code class="codeph">ALTER TABLESPACE</code>语句中使用<code class="codeph">FINISH</code>子句时，无法指定算法。
                                       </div>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li class="stepexpand"><span>要检查转换，请查询<code class="codeph">V$ENCRYPTED_TABLESPACES</code>视图的<code class="codeph">STATUS</code>列。</span><div>状态应为<code class="codeph">NORMAL</code> 。在Oracle Data Guard环境中，如果数据库没有<code class="codeph">NORMAL</code>作为<code class="codeph">STATUS</code> ，则运行<code class="codeph">ALTER TABLESPACE ...关于未成功转换的主数据文件或备用数据文件的FINISH</code>语句。
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-46D2C2FC-A09E-4036-8DB7-FDAB3D346F19" title="您可以使用带有ONLINE和ENCRYPT或DECRYPT子句的ALTER TABLESPACE SQL语句来加密和解密在线现有表空间。">现有联机表空间的加密转换</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-445053E7-8568-4990-A4C6-2ED68787ED2C" name="GUID-445053E7-8568-4990-A4C6-2ED68787ED2C"></a><h4 id="ASOAG-GUID-445053E7-8568-4990-A4C6-2ED68787ED2C" class="sect4">现有数据库的加密转换</h4>
                  <div>
                     <p>您可以加密脱机和联机数据库。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-504FCF09-227E-4CFD-92CD-91D1A4577AD3">关于现有数据库的加密转换</a><br>整个数据库的加密转换会加密所有表空间，包括Oracle提供的<code class="codeph">SYSTEM</code> ， <code class="codeph">SYSAUX</code> ， <code class="codeph">UNDO</code>和<code class="codeph">TEMP</code>表空间。
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-F64315CB-F80F-4F06-B7B1-A71A80B96710">使用脱机转换加密现有数据库</a><br>使用脱机转换加密现有数据库时，对于Oracle管理的表空间，不指定加密算法。
                        </li>
                        <li class="ulchildlink"><a href="configuring-transparent-data-encryption.html#GUID-86F51DED-4CFE-4B41-8654-55E3D087735D">使用在线转换加密现有数据库</a><br>使用联机转换加密现有数据库时，不指定加密算法。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-1CA947A5-164A-4AA9-AD75-F7D9D4F6FFF8" title="您可以在脱机和联机表空间和数据库上执行加密操作。">表空间和数据库的加密转换</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-504FCF09-227E-4CFD-92CD-91D1A4577AD3" name="GUID-504FCF09-227E-4CFD-92CD-91D1A4577AD3"></a><h5 id="ASOAG-GUID-504FCF09-227E-4CFD-92CD-91D1A4577AD3" class="sect5">关于现有数据库的加密转换</h5>
                     <div>
                        <p>整个数据库的加密转换会加密所有表空间，包括Oracle提供的<code class="codeph">SYSTEM</code> ， <code class="codeph">SYSAUX</code> ， <code class="codeph">UNDO</code>和<code class="codeph">TEMP</code>表空间。
                        </p>
                        <p>请注意以下事项：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>要执行加密，您可以使用表空间加密转换的脱机和联机功能。</p>
                           </li>
                           <li>
                              <p>您可以按任何顺序加密任何或所有Oracle提供的表空间。Oracle提供的表空间的加密对用户创建的表空间的加密没有影响。</p>
                           </li>
                           <li>
                              <p>加密Oracle提供的表空间时，Oracle数据库会阻止密钥库关闭。</p>
                           </li>
                           <li>
                              <p>您无法加密现有的临时表空间，但可以删除现有的临时表空间，然后将其重新创建为加密的。</p>
                           </li>
                           <li>
                              <p>从加密表空间中的敏感数据生成的<code class="codeph">UNDO</code>和<code class="codeph">TEMP</code>元数据已自动加密。因此，加密<code class="codeph">UNDO</code>和<code class="codeph">TEMP</code>是可选的。
                              </p>
                           </li>
                           <li>
                              <p>Oracle建议您使用默认的表空间加密算法<code class="codeph">AES128</code>加密Oracle提供的表空间。但是，您可以在之后重新键入任何这些表空间，以便根据需要使用其他加密算法。（要查找当前数据库的当前加密密钥，可以查询<code class="codeph">V$DATABASE_KEY_INFO</code>动态视图。）
                              </p>
                           </li>
                           <li>
                              <p>加密数据库中所有表空间的性能影响取决于工作负载和平台。许多现代CPU提供内置硬件加速，从而最大限度地降低性能。</p>
                           </li>
                           <li>
                              <p>在多租户环境中，您可以加密任何可插拔数据库（PDB）中的任何表空间，包括Oracle提供的表空间。但是，CDB根目录中的密钥库必须始终打开，以便PDB可以打开其密钥库。您可以通过查询<code class="codeph">V$ENCRYPTION_WALLET</code>视图的<code class="codeph">STATUS</code>列来检查密钥库是否打开的<code class="codeph">STATUS</code></p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-445053E7-8568-4990-A4C6-2ED68787ED2C" title="您可以加密脱机和联机数据库。">现有数据库的加密转换</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-F64315CB-F80F-4F06-B7B1-A71A80B96710" name="GUID-F64315CB-F80F-4F06-B7B1-A71A80B96710"></a><h5 id="ASOAG-GUID-F64315CB-F80F-4F06-B7B1-A71A80B96710" class="sect5">使用脱机转换加密现有数据库</h5>
                     <div>
                        <p>使用脱机转换加密现有数据库时，对于Oracle管理的表空间，不指定加密算法。</p>
                        <ol>
                           <li class="stepexpand"><span>以具有<code class="codeph">SYSDBA</code>管理权限的用户身份进行连接。</span><div>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus sec_admin as sysdba输入密码： <span class="italic">password</span></pre><p>您必须具有<code class="codeph">SYSDBA</code>管理权限才能加密<code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code>表空间。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>装入数据库。</span><div><pre class="oac_no_warn" dir="ltr">启动安装</pre></div>
                           </li>
                           <li class="stepexpand"><span>打开密钥库。</span><div><pre class="oac_no_warn" dir="ltr">管理员密钥管理设置KEYSTORE OPEN由<span class="italic">keystore_password</span>标识;</pre></div>
                           </li>
                           <li class="stepexpand"><span>运行<code class="codeph">ALTER TABLESPACE</code> SQL语句以加密<code class="codeph">SYSTEM</code> ， <code class="codeph">SYSAUX</code>和<code class="codeph">UNDO</code>表空间。不要与其他表空间的加密同时加密<code class="codeph">SYSTEM</code>表空间。</span><div>
                                 <p>例如，要加密<code class="codeph">SYSTEM</code>表空间：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE系统加密离线加密;</pre></div>
                           </li>
                           <li class="stepexpand"><span>打开数据库。</span><div>例如，以读/写模式打开数据库：<pre class="oac_no_warn" dir="ltr">ALTER DATABASE OPEN READ WRITE;</pre></div>
                           </li>
                           <li class="stepexpand"><span>运行<code class="codeph">ALTER TABLESPACE</code> SQL语句以加密其他用户表空间。</span><div>或者，您可以继续执行下一步并首先打开数据库，然后执行<a href="configuring-transparent-data-encryption.html#GUID-57B9D24B-02CC-4DEF-909E-81577E35DD5F" title="要使用脱机转换加密现有表空间，可以使用带有OFFLINE和ENCRYPT子句的ALTER TABLESPACE SQL语句。">使用脱机转换加密现有用户定义表空间中</a>描述的步骤。
                              </div>
                           </li>
                           <li class="stepexpand"><span>打开数据库。</span><div><pre class="oac_no_warn" dir="ltr">ALTER DATABASE OPEN;</pre></div>
                           </li>
                        </ol>
                        <div class="section">加密表空间后，如果要为<code class="codeph">SYSTEM</code> ， <code class="codeph">SYSAUX</code>和<code class="codeph">UNDO</code>表空间使用不同的加密算法（更改TDE主加密密钥），则必须使用在线转换。除<code class="codeph">AES128</code> ，支持的加密算法还包括<code class="codeph">AES192</code>和<code class="codeph">AES256</code> ，以及其他算法，如<code class="codeph">ARIA</code>和<code class="codeph">GOST</code> 。</div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DFF126F3-6E49-4E98-9846-F4417A665E18" title="您可以使用ALTER TABLESPACE语句的ENCRYPT和REKEY子句来加密表空间。">更改表空间的TDE主加密密钥</a></li>
                              <li><a href="introduction-to-transparent-data-encryption.html#GUID-AAE3C965-C6A8-45D6-BA5D-F88B300A301A" title="默认情况下，透明数据加密（TDE）列加密使用高级加密标准（AES）。">支持的加密和完整性算法</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-445053E7-8568-4990-A4C6-2ED68787ED2C" title="您可以加密脱机和联机数据库。">现有数据库的加密转换</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-86F51DED-4CFE-4B41-8654-55E3D087735D" name="GUID-86F51DED-4CFE-4B41-8654-55E3D087735D"></a><h5 id="ASOAG-GUID-86F51DED-4CFE-4B41-8654-55E3D087735D" class="sect5">使用在线转换加密现有数据库</h5>
                     <div>
                        <p>使用联机转换加密现有数据库时，不指定加密算法。</p>
                        <div class="section">第一次执行加密时不需要指定加密算法的原因是必须使用加密数据库的表空间使用数据库密钥自动加密。如果要更改算法，则可以在初始加密后发出<code class="codeph">ALTER TABLESPACE ENCRYPTION REKEY</code> SQL语句。
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>执行以下任务，这些任务在<a href="configuring-transparent-data-encryption.html#GUID-79DC7E79-E687-4FB3-BDD5-639ACD1872AF" title="要使用联机转换加密现有表空间，请使用带有ONLINE和ENCRYPT子句的ALTER TABLESPACE。">使用联机转换加密现有表空间中</a>进行了描述：</span><ol type="a">
                                 <li><span>以已被授予<code class="codeph">SYSDBA</code>管理权限的用户身份进行连接。</span></li>
                                 <li><span>确保<code class="codeph">COMPATIBLE</code>参数设置为<code class="codeph">12.2.0.0</code> 。</span></li>
                                 <li><span>确保数据库以读写模式打开。</span></li>
                                 <li><span>确保您有足够的辅助空间来完成加密。</span></li>
                                 <li><span>备份必须加密的表空间。</span></li>
                                 <li><span>打开密钥库。</span></li>
                              </ol>
                           </li>
                           <li class="stepexpand"><span>运行<code class="codeph">ALTER TABLESPACE</code> SQL语句以加密<code class="codeph">SYSTEM</code> ， <code class="codeph">SYSAUX</code>和<code class="codeph">UNDO</code>表空间。不指定算法，也不要与其他表空间的加密同时加密<code class="codeph">SYSTEM</code>表空间。</span><div>
                                 <p>例如，要加密<code class="codeph">SYSTEM</code>表空间：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE系统加密在线加密FILE_NAME_CONVERT =（'system01.dbf'，'system01_enc.dbf'）;</pre></div>
                           </li>
                           <li class="stepexpand"><span>对于临时表空间，请将其删除，然后将其重新创建为加密。不要指定算法。</span><div>
                                 <p>例如，对于用户创建的表空间：</p><pre class="oac_no_warn" dir="ltr">DROP TABLESPACE temp_01; CREATE TEMPORARY TABLESPACE temp_01 TEMPFILE'timp01.dbf'SIZE 5M AUTOEXTEND ON ENCRYPTION ENCRYPT;</pre></div>
                              <div>
                                 <p>您无法删除默认的<code class="codeph">TEMP</code>表空间。您必须首先创建一个新的表空间并将其设置为默认值，然后才能删除<code class="codeph">TEMP</code> 。</p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">CREATE TEMPORARY TABLESPACE temp_01 TEMPFILE'timp01.dbf'SIZE 5M AUTOEXTEND ON ENCRYPTION ENCRYPT; ALTER DATABASE DEFAULT TEMPORARY TABLESPACE temp_01; DROP TABLESPACE TEMP;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="managing-keystore-and-tde-master-encryption-key.html#GUID-DFF126F3-6E49-4E98-9846-F4417A665E18" title="您可以使用ALTER TABLESPACE语句的ENCRYPT和REKEY子句来加密表空间。">更改表空间的TDE主加密密钥</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-445053E7-8568-4990-A4C6-2ED68787ED2C" title="您可以加密脱机和联机数据库。">现有数据库的加密转换</a></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="ASOAG10362"></a><a id="ASOAG9555"></a><div class="props_rev_3"><a id="GUID-F2CB30AB-99AA-4BF6-A95F-41C1C205963F" name="GUID-F2CB30AB-99AA-4BF6-A95F-41C1C205963F"></a><h3 id="ASOAG-GUID-F2CB30AB-99AA-4BF6-A95F-41C1C205963F" class="sect3">透明数据加密数据动态和数据字典视图</h3>
               <div>
                  <p>您可以查询一组动态和数据字典视图，以查找有关透明数据加密（TDE）数据的更多信息。</p>
                  <div class="section">
                     <p><a href="configuring-transparent-data-encryption.html#GUID-F2CB30AB-99AA-4BF6-A95F-41C1C205963F__CIHGBGHG" title="TDE观点">表3-4</a>描述了这些动态和数据字典视图。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-F2CB30AB-99AA-4BF6-A95F-41C1C205963F__CIHGBGHG">
                     <p class="titleintable">表3-4透明数据加密相关视图</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="透明数据加密相关视图" width="100%" border="1" summary="TDE views" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="34%" id="d6228e12323">视图</th>
                              <th align="left" valign="bottom" width="66%" id="d6228e12326">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d6228e12331" headers="d6228e12323 ">
                                 <p><code class="codeph">ALL_ENCRYPTED_COLUMNS</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d6228e12331 d6228e12326 ">
                                 <p>显示当前用户可访问的表中的加密列的加密信息</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d6228e12339" headers="d6228e12323 ">
                                 <p><code class="codeph">DBA_ENCRYPTED_COLUMNS</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d6228e12339 d6228e12326 ">
                                 <p>显示数据库中所有加密列的加密信息</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d6228e12347" headers="d6228e12323 ">
                                 <p><code class="codeph">USER_ENCRYPTED_COLUMNS</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d6228e12347 d6228e12326 ">
                                 <p>显示当前用户架构中加密表列的加密信息</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d6228e12355" headers="d6228e12323 ">
                                 <p><code class="codeph">DBA_TABLESPACE_USAGE_METRICS</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d6228e12355 d6228e12326 ">
                                 <p>描述所有类型的表空间的表空间使用度量标准，包括永久，临时和撤消表空间</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d6228e12363" headers="d6228e12323 ">
                                 <p><code class="codeph">V $ CLIENT_SECRETS</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d6228e12363 d6228e12326 ">
                                 <p>列出存储在密钥库中的各种功能（客户端）的字符串（机密）的属性。</p>
                                 <p>在多租户环境中，当您在PDB中查询此视图时，它会显示有关为当前PDB创建或激活的键的信息。如果在根中查询此视图，则会显示有关所有PDB的密钥的信息。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d6228e12373" headers="d6228e12323 ">
                                 <p><code class="codeph">V $ DATABASE_KEY_INFO</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d6228e12373 d6228e12326 ">
                                 <p>显示有关用于当前数据库的默认加密密钥的信息。默认为<code class="codeph">AES128</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d6228e12384" headers="d6228e12323 ">
                                 <p><code class="codeph">V $ ENCRYPTED_TABLESPACES</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d6228e12384 d6228e12326 ">
                                 <p>显示有关已加密的表空间的信息</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d6228e12392" headers="d6228e12323 ">
                                 <p><code class="codeph">V $ ENCRYPTION_KEYS</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d6228e12392 d6228e12326 ">
                                 <p>与使用<code class="codeph">ADMINISTER KEY MANAGEMENT</code>语句重新键入的密钥一起使用时，显示有关TDE主加密密钥的信息。
                                 </p>
                                 <p>在多租户环境中，当您在PDB中查询此视图时，它会显示有关为当前PDB创建或激活的键的信息。如果在根中查询此视图，则会显示有关所有PDB的键的信息。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d6228e12405" headers="d6228e12323 ">
                                 <p><code class="codeph">V $ ENCRYPTION_WALLET</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d6228e12405 d6228e12326 ">
                                 <p>显示有关密钥库状态和TDE密钥库位置的信息</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d6228e12413" headers="d6228e12323 ">
                                 <p><code class="codeph">V $钱包</code></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d6228e12413 d6228e12326 ">
                                 <p>显示PKI证书的元数据信息，该证书可用作TDE的主加密密钥</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-F2CB30AB-99AA-4BF6-A95F-41C1C205963F__GUID-0D627C67-A82E-4C3E-BCC3-AD6B6DD3731F">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/asoag&amp;id=REFRN" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>有关这些视图的详细信息</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-transparent-data-encryption.html#GUID-C5D20EAE-3369-411F-9A7E-13AB14139F1D" title="您可以配置软件或硬件密钥库，以用于单个表列或整个表空间。">配置透明数据加密</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
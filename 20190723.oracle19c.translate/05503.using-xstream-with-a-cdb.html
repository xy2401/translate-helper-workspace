<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can use Oracle Database XStream in a multitenant container database (CDB)."></meta>
      <meta name="description" content="You can use Oracle Database XStream in a multitenant container database (CDB)."></meta>
      <title>将XStream与CDB一起使用</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator’s Guide "></meta>
      <meta property="og:description" content="You can use Oracle Database XStream in a multitenant container database (CDB)."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="multitenant-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-20T09:59:22-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2017, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96136-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="using-oracle-database-vault-with-a-cdb.html" title="Previous" type="text/html"></link>
      <link rel="next" href="glossary.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Multitenant Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="MULTI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-oracle-database-vault-with-a-cdb.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="glossary.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="using-oracle-features-in-a-multitenant-environment.html" property="item" typeof="WebPage"><span property="name">在多租户环境中使用Oracle功能</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">将XStream与CDB一起使用</li>
            </ol>
            <a id="GUID-37EA80B6-8131-46C9-8CB8-CA597ACE5563" name="GUID-37EA80B6-8131-46C9-8CB8-CA597ACE5563"></a>
            
            <h2 id="MULTI-GUID-37EA80B6-8131-46C9-8CB8-CA597ACE5563" class="sect2"><span class="enumeration_chapter">25</span>将XStream与CDB一起使用</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以在多租户容器数据库（CDB）中使用Oracle Database XStream。</p>
               <p>本章包含以下主题：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="using-xstream-with-a-cdb.html#GUID-644C0567-E409-4611-9D9E-C5C51FBF2DE0">关于XStream</a><br>XStream由Oracle数据库组件和应用程序编程接口（API）组成，这些接口使客户端应用程序能够从Oracle数据库接收数据更改并将数据更改发送到Oracle数据库。
                  </li>
                  <li class="ulchildlink"><a href="using-xstream-with-a-cdb.html#GUID-CBD258F9-D53D-4DA8-98CE-D87232D06655">系统创建的规则和多租户环境</a><br>多租户环境使Oracle数据库能够包含一组可移植的模式，对象和相关结构，这些模式在逻辑上作为单独的数据库出现在应用程序中。这个自包含的集合称为可插拔数据库（PDB）。CDB包含PDB。
                  </li>
                  <li class="ulchildlink"><a href="using-xstream-with-a-cdb.html#GUID-6F932401-47F6-4A5A-BA72-EBFF2342C579">XStream Out和多租户环境</a><br>多租户环境使数据库能够包含一组可移植的模式，对象和相关结构，这些模式在逻辑上作为单独的数据库出现在应用程序中。
                  </li>
                  <li class="ulchildlink"><a href="using-xstream-with-a-cdb.html#GUID-1DBE4654-FA5C-4968-90FC-A2F79AA6B719">在CDB中配置XStream Out</a><br>在CDB中配置XStream Out时，必须确定XStream Out将捕获哪些数据库更改并将其发送到客户端应用程序。
                  </li>
                  <li class="ulchildlink"><a href="using-xstream-with-a-cdb.html#GUID-4E7FDA7C-002C-41D3-8E7C-2918913C2B13">XStream In和多租户环境</a><br>多租户环境使Oracle数据库能够包含一组可移植的模式，对象和相关结构，这些模式在逻辑上作为单独的数据库出现在应用程序中。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="using-oracle-features-in-a-multitenant-environment.html#GUID-CE922DAA-66FB-430B-96E5-29FF50BFD2FF" title="您可以在多租户环境中使用Oracle数据库功能。">在多租户环境中使用Oracle功能</a></p>
                  </div>
               </div>
            </div>
            
            <div class="props_rev_3"><a id="GUID-644C0567-E409-4611-9D9E-C5C51FBF2DE0" name="GUID-644C0567-E409-4611-9D9E-C5C51FBF2DE0"></a><h3 id="MULTI-GUID-644C0567-E409-4611-9D9E-C5C51FBF2DE0" class="sect3"><span class="enumeration_section">25.1</span>关于XStream</h3>
               <div>
                  <p>XStream由Oracle数据库组件和应用程序编程接口（API）组成，这些接口使客户端应用程序能够从Oracle数据库接收数据更改并将数据更改发送到Oracle数据库。</p>
                  <p>可以在Oracle数据库和其他系统之间共享这些数据更改。其他系统包括非Oracle数据库，非RDBMS Oracle产品，文件系统，第三方软件应用程序等。客户端应用程序由用户设计用于特定目的和用例。</p>
                  <p>XStream包含两个主要功能：XStream Out和XStream In。<span class="bold">XStream Out</span>提供Oracle数据库组件和API，使您可以与其他系统共享对Oracle数据库所做的数据更改。XStream Out可以从重做日志中检索数据操作语言（DML）和数据定义语言（DDL）更改，并将这些更改发送到使用API的客户端应用程序，如下图所示。
                  </p>
                  <div class="figure" id="GUID-644C0567-E409-4611-9D9E-C5C51FBF2DE0__CHDIAHDB">
                     <p class="titleinfigure">图25-1 XStream Out</p><img src="img/xstrm082.png" width="380" alt="下面是图25-1的描述" title="下面是图25-1的描述" longdesc="img_text/xstrm082.html"><br><a href="img_text/xstrm082.html">“图25-1 XStream Out”的描述</a></div>
                  <!-- class="figure" -->
                  <p><span class="bold">XStream In</span>提供Oracle数据库组件和API，使您可以与Oracle数据库共享对其他系统所做的数据更改。XStream In可以将这些更改应用于Oracle数据库中的数据库对象，如下图所示。
                  </p>
                  <div class="figure" id="GUID-644C0567-E409-4611-9D9E-C5C51FBF2DE0__CHDHFBIB">
                     <p class="titleinfigure">图25-2 XStream In</p><img src="img/xstrm083.png" width="380" alt="下面是图25-2的描述" title="下面是图25-2的描述" longdesc="img_text/xstrm083.html"><br><a href="img_text/xstrm083.html">“图25-2 XStream In”的描述</a></div>
                  <!-- class="figure" -->
                  <p>XStream使用Oracle数据库的捕获和应用功能。这些功能为XStream启用了以下功能：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>流数据库更改的逻辑更改记录（LCR）格式</p>
                        <p><span class="bold">LCR</span>是具有描述数据库更改的特定格式的消息。如果更改是数据操作语言（DML）操作，则<span class="bold">行LCR</span>封装由DML操作产生的每个行更改。一个DML操作可能会导致多行更改，因此一个DML操作可能会导致多行LCR。如果更改是数据定义语言（DDL）操作，则单个<span class="bold">DDL LCR</span>将封装DDL更改。
                        </p>
                     </li>
                     <li>
                        <p>控制行为的规则和规则集，包括包含和排除规则</p>
                        <p>规则允许在数据库级别，架构级别，表级别和行/列级别过滤数据库更改。</p>
                     </li>
                     <li>
                        <p>基于规则的转换，用于修改捕获的数据更改</p>
                     </li>
                     <li>
                        <p>支持数据库中的大多数数据类型，包括LOB， <code class="codeph">LONG</code> ， <code class="codeph">LONG</code> <code class="codeph">RAW</code>和<code class="codeph">XMLType</code></p>
                     </li>
                     <li>
                        <p>自定义配置，包括到单个数据库实例的多个入站流，来自单个数据库实例的多个出站流，来自单个捕获过程的多个出站流，等等</p>
                     </li>
                     <li>
                        <p>全功能适用于XStream In，包括应用并行性以获得最佳性能，SQL生成，冲突检测和解决，错误处理以及使用应用处理程序的自定义应用</p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-644C0567-E409-4611-9D9E-C5C51FBF2DE0__GUID-D13C098C-7C9E-43CD-BECB-D062D7F3621B">
                     <p class="notep1">注意：</p>
                     <p>在XStream Out和XStream In配置中，客户端应用程序必须使用专用服务器连接。</p>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../xstrm/introduction-to-xstream.html#XSTRM-GUID-5939CB6C-8BA9-4594-8F96-B0453D246722" target="_blank"><span><cite>Oracle数据库XStream指南</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-xstream-with-a-cdb.html#GUID-37EA80B6-8131-46C9-8CB8-CA597ACE5563" title="您可以在多租户容器数据库（CDB）中使用Oracle Database XStream。">将XStream与CDB一起使用</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-CBD258F9-D53D-4DA8-98CE-D87232D06655" name="GUID-CBD258F9-D53D-4DA8-98CE-D87232D06655"></a><h3 id="MULTI-GUID-CBD258F9-D53D-4DA8-98CE-D87232D06655" class="sect3"><span class="enumeration_section">25.2</span>系统创建的规则和多租户环境</h3>
               <div>
                  <p>多租户环境使Oracle数据库能够包含一组可移植的模式，对象和相关结构，这些模式在逻辑上作为单独的数据库出现在应用程序中。这个自包含的集合称为可插拔数据库（PDB）。CDB包含PDB。</p>
                  <p>它还可以包含应用程序容器。应用程序容器是CDB的可选组件，它由应用程序根目录和与之关联的应用程序PDB组成。应用程序容器存储一个或多个应用程序的数据。应用程序容器共享应用程序元数据和公共数据在CDB中，以下各项都是容器：CDB根，每个PDB，每个应用程序根和每个应用程序PDB。</p>
                  <p>在CDB中，LCR可以包含更改源自<code class="codeph">source_database_name</code>属性的容器的全局名称，以及<code class="codeph">root_name</code>属性中CDB根的全局名称。XStream组件的规则可以考虑这些属性。
                  </p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-xstream-with-a-cdb.html#GUID-60589C03-2095-42AA-8F2F-AFD83B110F31">CDB和XStream Out中的系统创建规则</a><br>在CDB中，必须在CDB根目录中配置XStream Out。因此，创建系统创建的规则的<code class="codeph">DBMS_XSTREAM_ADM</code>包中的PL / SQL过程必须在作为普通用户连接时在CDB根目录中运行。
                     </li>
                     <li class="ulchildlink"><a href="using-xstream-with-a-cdb.html#GUID-8B64C3F0-2EB0-495B-BB29-A08F1A1CD7C9">CDB和XStream中的系统创建规则</a><br>您可以在根或CDB中的任何容器中配置XStream In。</li>
                  </ul>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="multitenant-architecture.html#GUID-BBAD3448-8A5A-4397-BD3A-F05D945DB7F8" title="多租户架构使Oracle数据库可用作多租户容器数据库（CDB）。">多租户架构</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-xstream-with-a-cdb.html#GUID-37EA80B6-8131-46C9-8CB8-CA597ACE5563" title="您可以在多租户容器数据库（CDB）中使用Oracle Database XStream。">将XStream与CDB一起使用</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-60589C03-2095-42AA-8F2F-AFD83B110F31" name="GUID-60589C03-2095-42AA-8F2F-AFD83B110F31"></a><h4 id="MULTI-GUID-60589C03-2095-42AA-8F2F-AFD83B110F31" class="sect4"><span class="enumeration_section">25.2.1</span> CDB和XStream Out中的系统创建规则</h4>
                  <div>
                     <p>在CDB中，必须在CDB根目录中配置XStream Out。因此，创建系统创建的规则的<code class="codeph">DBMS_XSTREAM_ADM</code>包中的PL / SQL过程必须在作为普通用户连接时在CDB根目录中运行。
                     </p>
                     <p>排除为传播创建规则的过程，为XStream Out创建系统创建规则的过程（如<code class="codeph">ADD_GLOBAL_RULES</code>过程）包括下表中的关键参数：</p>
                     <div class="tblformal" id="GUID-60589C03-2095-42AA-8F2F-AFD83B110F31__GUID-F2B0932E-2D66-4652-A805-A570A10E53C4">
                        <p class="titleintable">表25-1 CDB中系统创建规则的关键过程参数</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="CDB中系统创建规则的关键过程参数" width="100%" border="1" summary="This table describes the parameters for system-created rules in a CDB." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="25%" id="d115896e510">参数</th>
                                 <th align="left" valign="bottom" width="75%" id="d115896e513">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d115896e518" headers="d115896e510 ">
                                    <p><code class="codeph">source_database</code></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d115896e518 d115896e513 ">
                                    <p>源数据库的全局名称。在CDB中，指定规则所属的容器的全局名称。容器可以是CDB根，PDB，应用程序根或应用程序PDB。以下是示例： <code class="codeph">mycdb.example.com</code>或<code class="codeph">hrpdb.example.com</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d115896e532" headers="d115896e510 ">
                                    <p><code class="codeph">source_root_name</code></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d115896e532 d115896e513 ">
                                    <p>源CDB中CDB根的全局名称。以下是示例： <code class="codeph">mycdb.example.com</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d115896e543" headers="d115896e510 ">
                                    <p><code class="codeph">source_container_name</code></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d115896e543 d115896e513 ">
                                    <p>源容器的简称。容器可以是CDB根，PDB，应用程序根或应用程序PDB。以下是示例： <code class="codeph">CDB$ROOT</code>或<code class="codeph">hrpdb</code> 。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>如果在指定<code class="codeph">source_database</code>或<code class="codeph">source_root_name</code>时未包含域名，则过程会自动将其附加到名称。例如，如果指定<code class="codeph">DBS1</code> ，则域为<code class="codeph">.EXAMPLE.COM</code> ，然后该过程指定<code class="codeph">DBS1.EXAMPLE.COM</code>自动。
                     </p>
                     <p>这些关键参数的组合根据过程生成的规则确定哪些容器更改XStream Out捕获并流式传输到客户端应用程序。无论这些参数的设置如何，系统生成的规则仍然可以限制捕获的更改并将流传输到特定的模式和表。</p>
                     <p>本地捕获意味着捕获进程在源CDB上运行。在本地捕获配置中， <code class="codeph">source_root_name</code>参数指定本地CDB中CDB根的全局名称。如果此参数为<code class="codeph">NULL</code> ，则自动指定本地CDB中CDB根的全局名称。生成的规则包括当前CDB中CDB根的全局名称的条件。</p>
                     <p>下游捕获意味着捕获过程在除源CDB之外的CDB上运行。在下游捕获配置中， <code class="codeph">source_root_name</code>参数必须为非<code class="codeph">NULL</code> ，并且必须在远程源CDB中指定CDB根的全局名称。生成的规则包括远程CDB中CDB根的全局名称的条件。如果此参数为<code class="codeph">NULL</code> ，则假定为本地捕获。
                     </p>
                     <p>下表介绍了本地捕获配置中各种<code class="codeph">source_database</code>和<code class="codeph">source_container_name</code>参数设置的规则条件。
                     </p>
                     <div class="tblformal" id="GUID-60589C03-2095-42AA-8F2F-AFD83B110F31__BABFDIDE">
                        <p class="titleintable">表25-2本地捕获和XStream Out容器规则条件</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="本地捕获和XStream输出容器规则条件" width="100%" border="1" summary="This table shows different values of the source_root_name and source_database parameters and describes the resulting rules in a local capture configuration." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="25%" id="d115896e613">source_database参数设置</th>
                                 <th align="left" valign="bottom" width="25%" id="d115896e616">source_container_name参数设置</th>
                                 <th align="left" valign="bottom" width="50%" id="d115896e619">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d115896e624" headers="d115896e613 ">
                                    <p><code class="codeph">空值</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d115896e624 d115896e616 ">
                                    <p><code class="codeph">空值</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d115896e624 d115896e619 ">
                                    <p>XStream Out捕获并流式传输本地CDB中任何容器中所做的更改，包括CDB根，所有PDB，所有应用程序根和所有应用程序PDB。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d115896e636" headers="d115896e613 ">
                                    <p>非<code class="codeph">NULL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d115896e636 d115896e616 ">
                                    <p><code class="codeph">空值</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d115896e636 d115896e619 ">
                                    <p>XStream Out捕获并流式传输在本地CDB的指定源容器中所做的更改。源容器可以是CDB根，PDB，应用程序根或应用程序PDB。 <code class="codeph">DBMS_XSTREAM_ADM</code>过程查询<code class="codeph">CDB_PDBS</code>视图和<code class="codeph">CDB_PROPERTIES</code>视图以确定<code class="codeph">source_container_name</code>值。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d115896e661" headers="d115896e613 ">
                                    <p><code class="codeph">空值</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d115896e661 d115896e616 ">
                                    <p>非<code class="codeph">NULL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d115896e661 d115896e619 ">
                                    <p>XStream Out捕获并流式传输在本地CDB的指定源容器中所做的更改。源容器可以是CDB根，PDB，应用程序根或应用程序PDB。 <code class="codeph">DBMS_XSTREAM_ADM</code>过程查询<code class="codeph">CDB_PDBS</code>视图和<code class="codeph">CDB_PROPERTIES</code>视图以确定<code class="codeph">source_database</code>值。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d115896e686" headers="d115896e613 ">
                                    <p>非<code class="codeph">NULL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d115896e686 d115896e616 ">
                                    <p>非<code class="codeph">NULL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d115896e686 d115896e619 ">
                                    <p>XStream Out捕获并流式传输在本地CDB的指定源容器中所做的更改。源容器可以是CDB根，PDB，应用程序根或应用程序PDB。</p>
                                    <p>如果<code class="codeph">source_database</code>值的前缀与<code class="codeph">source_container_name</code>值不同，则生成的规则包括<code class="codeph">source_database</code>值的条件，内部表将<code class="codeph">source_database</code>值映射到<code class="codeph">source_container_name</code>值。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>下表介绍了下游捕获配置中各种<code class="codeph">source_database</code>和<code class="codeph">source_container_name</code>参数设置的规则条件。
                     </p>
                     <div class="tblformal" id="GUID-60589C03-2095-42AA-8F2F-AFD83B110F31__BABIDHGF">
                        <p class="titleintable">表25-3下游捕获和XStream Out容器规则条件</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="下游捕获和XStream输出容器规则条件" width="100%" border="1" summary="This table shows different values of the source_root_name and source_database parameters and describes the resulting rules in a downstream capture configuration." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="25%" id="d115896e735">source_database参数设置</th>
                                 <th align="left" valign="bottom" width="25%" id="d115896e738">source_container_name参数设置</th>
                                 <th align="left" valign="bottom" width="50%" id="d115896e741">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d115896e746" headers="d115896e735 ">
                                    <p><code class="codeph">空值</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d115896e746 d115896e738 ">
                                    <p><code class="codeph">空值</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d115896e746 d115896e741 ">
                                    <p>XStream Out捕获和流式处理远程源CDB中任何容器中所做的更改，包括CDB根，所有PDB，所有应用程序根和所有应用程序PDB。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d115896e758" headers="d115896e735 ">
                                    <p>非<code class="codeph">NULL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d115896e758 d115896e738 ">
                                    <p><code class="codeph">空值</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d115896e758 d115896e741 ">
                                    <p>XStream Out捕获并流式传输在远程源CDB的指定源容器中所做的更改。源容器可以是CDB根，PDB，应用程序根或应用程序PDB。 <code class="codeph">DBMS_XSTREAM_ADM</code>过程从<code class="codeph">source_database</code>值的前缀派生<code class="codeph">source_container_name</code>值。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d115896e780" headers="d115896e735 ">
                                    <p><code class="codeph">空值</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d115896e780 d115896e738 ">
                                    <p>非<code class="codeph">NULL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d115896e780 d115896e741 ">
                                    <p><code class="codeph">DBMS_XSTREAM_ADM</code>过程引发错误。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d115896e796" headers="d115896e735 ">
                                    <p>非<code class="codeph">NULL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d115896e796 d115896e738 ">
                                    <p>非<code class="codeph">NULL</code></p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d115896e796 d115896e741 ">
                                    <p>XStream Out捕获并流式传输在远程源CDB的指定源容器中所做的更改。源容器可以是CDB根，PDB，应用程序根或应用程序PDB。</p>
                                    <p>如果<code class="codeph">source_database</code>值的前缀与<code class="codeph">source_container_name</code>值不同，则生成的规则包括<code class="codeph">source_database</code>值的条件，内部表将<code class="codeph">source_database</code>值映射到<code class="codeph">source_container_name</code>值。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../xstrm/xstream-out-concepts.html#XSTRM-GUID-CC32AED8-6587-4CA7-8786-CDF2C4968DB1" target="_blank"><span><cite>Oracle数据库XStream指南</cite></span></a></li>
                           <li><a href="../arpls/DBMS_XSTREAM_ADM.html#ARPLS-GUID-1ABE7BC0-9252-44A0-A6B8-1E3AE8D085C9" target="_blank"><span><cite>Oracle数据库PL / SQL包和类型参考</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-xstream-with-a-cdb.html#GUID-CBD258F9-D53D-4DA8-98CE-D87232D06655" title="多租户环境使Oracle数据库能够包含一组可移植的模式，对象和相关结构，这些模式在逻辑上作为单独的数据库出现在应用程序中。这个自包含的集合称为可插拔数据库（PDB）。CDB包含PDB。">系统创建的规则和多租户环境</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-8B64C3F0-2EB0-495B-BB29-A08F1A1CD7C9" name="GUID-8B64C3F0-2EB0-495B-BB29-A08F1A1CD7C9"></a><h4 id="MULTI-GUID-8B64C3F0-2EB0-495B-BB29-A08F1A1CD7C9" class="sect4"><span class="enumeration_section">25.2.2</span> CDB和XStream中的系统创建规则</h4>
                  <div>
                     <p>您可以在根或CDB中的任何容器中配置XStream In。</p>
                     <p>通常，入站服务器不使用规则集或规则。相反，它通常处理从客户端应用程序接收的所有LCR。入站服务器只能将更改应用于当前容器。因此，如果在CDB根目录中配置了入站服务器，则它只能将更改应用于CDB根目录。如果在PDB中配置了入站服务器，则它只能将更改应用于该PDB。如果在应用程序根目录中配置了入站服务器，则它只能将更改应用于该应用程序根目录，如果在应用程序PDB中配置了入站服务器，则它只能将更改应用于该应用程序PDB。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="managing-a-multitenant-environment.html#GUID-93F1E584-D309-4301-82E0-AD0E60D4977C" title="您可以使用SQL * Plus或企业管理器云控制（云控制）管理多租户环境。">管理多租户环境</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-xstream-with-a-cdb.html#GUID-CBD258F9-D53D-4DA8-98CE-D87232D06655" title="多租户环境使Oracle数据库能够包含一组可移植的模式，对象和相关结构，这些模式在逻辑上作为单独的数据库出现在应用程序中。这个自包含的集合称为可插拔数据库（PDB）。CDB包含PDB。">系统创建的规则和多租户环境</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-6F932401-47F6-4A5A-BA72-EBFF2342C579" name="GUID-6F932401-47F6-4A5A-BA72-EBFF2342C579"></a><h3 id="MULTI-GUID-6F932401-47F6-4A5A-BA72-EBFF2342C579" class="sect3"><span class="enumeration_section">25.3</span> XStream Out和多租户环境</h3>
               <div>
                  <p>多租户环境使数据库能够包含一组可移植的模式，对象和相关结构，这些模式在逻辑上作为单独的数据库出现在应用程序中。</p>
                  <p>这个自包含的集合称为可插拔数据库（PDB）。多租户容器数据库（CDB）包含PDB。在CDB中，XStream Out的功能与非CDB中的功能大致相同。</p>
                  <p>CDB还可以包含应用程序容器。应用程序容器是CDB的可选组件，它由应用程序根目录和与之关联的所有应用程序PDB组成。应用程序容器存储一个或多个应用程序的数据。应用程序容器共享应用程序元数据和公共数据在CDB中，以下各项都是容器：CDB根，每个PDB，每个应用程序根和每个应用程序PDB。</p>
                  <p>XBream Out在CDB和非CDB中的主要区别在于：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>必须仅在CDB根目录中配置XStream Out。</p>
                     </li>
                     <li>
                        <p>XStream Out可以查看对CDB中任何容器所做的更改。</p>
                     </li>
                     <li>
                        <p>XStream Out捕获规则可以将LCR限制为客户端应用程序所需的LCR。系统生成的捕获规则根据传递给<code class="codeph">DBMS_XSTREAM_ADM</code>包中的<code class="codeph">ADD_OUTBOUND</code>和<code class="codeph">CREATE_OUTBOUND</code>过程的参数选择适当的LCR。您可以在同一个包中使用<code class="codeph">ADD_*_RULES</code>过程，以便对XStream Out组件使用的规则进行更细粒度的控制。
                        </p>
                     </li>
                     <li>
                        <p>执行XStream Out任务的用户必须是普通用户。</p>
                     </li>
                  </ul>
                  <div class="section">
                     <p class="subhead2" id="GUID-6F932401-47F6-4A5A-BA72-EBFF2342C579__GUID-2524370F-946C-4514-87C4-558B2DEA6DDB">在XStream环境中拔下插头和插件操作</p>
                     <p>当XBream Out涉及的PDB，应用程序根或应用程序PDB从其CDB中拔出并插入另一个CDB时，任何捕获进程或出站服务器都不被视为容器的一部分。您必须在另一个CDB中再次配置捕获进程和出站服务器。</p>
                     <p>如果出站服务器配置在与捕获过程不同的数据库中，则拔出和插入操作还有其他注意事项。</p>
                     <p>对于此示例，假设以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>名为<code class="codeph">CDB1</code>的CDB包含PDB <code class="codeph">PDB1</code> 。
                           </p>
                        </li>
                        <li>
                           <p>捕获过程在<code class="codeph">CDB1</code>配置，它将LCR从<code class="codeph">PDB1</code>发送到名为<code class="codeph">CDB2</code>的CDB中的出站服务器。
                           </p>
                        </li>
                        <li>
                           <p>您从<code class="codeph">CDB1</code>拔出<code class="codeph">PDB1</code> ，然后将其插入名为<code class="codeph">CDB3</code>的CDB。
                           </p>
                        </li>
                     </ul>
                     <p>要继续从提供的LCR <code class="codeph">PDB1</code>在出站服务器<code class="codeph">CDB2</code> ，必须配置一个新的捕获过程<code class="codeph">CDB3</code>捕获和发送的LCR到<code class="codeph">CDB2</code> 。
                     </p>
                     <p>通过在数据库B出站服务器所使用的规则必须被改变以改变的根引用<code class="codeph">CDB1</code>到的根<code class="codeph">CDB3</code> 。此外，如果<code class="codeph">PDB1</code>在赋予了不同的名称<code class="codeph">CDB3</code> ，那么规则必须改变，以反映新的PDB名称。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-6F932401-47F6-4A5A-BA72-EBFF2342C579__GUID-C5293004-860E-49E9-9987-BDD1DCC0D1AD">XStream环境中的应用程序容器</p>
                     <p>当CDB具有一个或多个应用程序容器时，必须在CDB根目录中配置XStream Out，并且XStream Out可以捕获在CDB中的任何容器中所做的更改，包括应用程序根和应用程序PDB。可以将应用程序容器中捕获的更改发送到任何类型的容器，包括PDB，应用程序根和应用程序PDB。</p>
                     <p>将更改从一个应用程序根复制到另一个应用程序根时，XStream可以复制<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句。为避免错误，应用语句的目标应用程序根目录必须与源应用程序根目录安装相同的应用程序，并且应用程序名称在两个应用程序根目录中必须相同。
                     </p>
                     <p>为了避免在将更改从应用程序根目录复制到非应用程序根目录的容器时出错，必须确保不复制<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句。
                     </p>
                     <p>使用XStream OCI API，您可以控制是否使用<code class="codeph">OCIXStreamOutAttach</code>函数和<code class="codeph">OCILCRHeaderGet</code>函数复制<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句。使用XStream Java API，您可以使用<code class="codeph">XStreamOut.attach</code>方法中的<code class="codeph">mode</code>参数控制此行为。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="using-xstream-with-a-cdb.html#GUID-CBD258F9-D53D-4DA8-98CE-D87232D06655" title="多租户环境使Oracle数据库能够包含一组可移植的模式，对象和相关结构，这些模式在逻辑上作为单独的数据库出现在应用程序中。这个自包含的集合称为可插拔数据库（PDB）。CDB包含PDB。">系统创建的规则和多租户环境</a></li>
                        <li><a href="using-xstream-with-a-cdb.html#GUID-1DBE4654-FA5C-4968-90FC-A2F79AA6B719" title="在CDB中配置XStream Out时，必须确定XStream Out将捕获哪些数据库更改并将其发送到客户端应用程序。">在CDB中配置XStream Out</a></li>
                        <li><a href="multitenant-architecture.html#GUID-BBAD3448-8A5A-4397-BD3A-F05D945DB7F8" title="多租户架构使Oracle数据库可用作多租户容器数据库（CDB）。">多租户架构</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-xstream-with-a-cdb.html#GUID-37EA80B6-8131-46C9-8CB8-CA597ACE5563" title="您可以在多租户容器数据库（CDB）中使用Oracle Database XStream。">将XStream与CDB一起使用</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-1DBE4654-FA5C-4968-90FC-A2F79AA6B719" name="GUID-1DBE4654-FA5C-4968-90FC-A2F79AA6B719"></a><h3 id="MULTI-GUID-1DBE4654-FA5C-4968-90FC-A2F79AA6B719" class="sect3"><span class="enumeration_section">25.4</span>在CDB中配置XStream Out</h3>
               <div>
                  <p>在CDB中配置XStream Out时，必须确定XStream Out将捕获哪些数据库更改并将其发送到客户端应用程序。</p>
                  <p>XStream Out可以为所有容器流式传输所有数据库更改，包括CDB根和所有PDB，应用程序根和应用程序PDB，或者XStream Out可以从特定容器流式传输更改。此外，您可以使用本地捕获配置XStream Out，也可以使用下游捕获对其进行配置，以卸载从源数据库捕获更改所需的工作。</p>
                  <p>在CDB中配置XStream Out时，以下限制适用：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>捕获进程和出站服务器必须位于CDB根目录中。</p>
                     </li>
                     <li>
                        <p>捕获进程和出站服务器必须位于同一CDB中。</p>
                     </li>
                     <li>
                        <p>在XStream Out配置期间，CDB中的每个容器都必须打开。</p>
                     </li>
                     <li>
                        <p>捕获对应用程序根目录所做的更改时，必须确保<code class="codeph">ALTER PLUGGABLE DATABASE APPLICATION</code>语句仅复制到其他应用程序根目录。
                        </p>
                     </li>
                  </ul>
                  <p>此外，请确保为CDB正确创建XStream管理员。</p>
                  <div class="infoboxnote" id="GUID-1DBE4654-FA5C-4968-90FC-A2F79AA6B719__GUID-1A3069BE-D8C1-4258-BB59-4036CB35DC09">
                     <p class="notep1">注意：</p>
                     <p>使用非CDB创建容器时，非CDB中的任何XStream Out组件都不能在容器中使用。您必须在CDB根目录中删除并重新创建XStream Out组件，包括捕获进程和出站服务器。</p>
                  </div>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-xstream-with-a-cdb.html#GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669">在CDB中使用本地捕获配置XStream Out</a><br>一个示例说明了在CDB中使用本地捕获配置XStream Out。</li>
                     <li class="ulchildlink"><a href="using-xstream-with-a-cdb.html#GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A">在CDB中使用下游捕获配置XStream Out</a><br>使用下游捕获，XStream Out组件可以驻留在源数据库以外的数据库中。
                     </li>
                  </ul>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="using-xstream-with-a-cdb.html#GUID-6F932401-47F6-4A5A-BA72-EBFF2342C579" title="多租户环境使数据库能够包含一组可移植的模式，对象和相关结构，这些模式在逻辑上作为单独的数据库出现在应用程序中。">XStream Out和多租户环境</a></li>
                        <li><a href="using-xstream-with-a-cdb.html#GUID-60589C03-2095-42AA-8F2F-AFD83B110F31" title="在CDB中，必须在CDB根目录中配置XStream Out。因此，创建系统创建的规则的DBMS_XSTREAM_ADM包中的PL / SQL过程必须在作为普通用户连接时在CDB根目录中运行。">CDB和XStream Out中的系统创建规则</a></li>
                        <li><a href="../xstrm/configuring-xstream-out.html#XSTRM-GUID-C0E1C4AC-994A-4F62-B580-63742C9B7128" target="_blank"><span><cite>Oracle数据库XStream指南</cite></span></a></li>
                        <li><a href="overview-of-pdb-creation.html#GUID-F68E6FE9-919B-4665-95F7-785E69E07264" title="您有多个选项可以将非CDB移动到PDB中。">从非CDB创建PDB的选项</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-xstream-with-a-cdb.html#GUID-37EA80B6-8131-46C9-8CB8-CA597ACE5563" title="您可以在多租户容器数据库（CDB）中使用Oracle Database XStream。">将XStream与CDB一起使用</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669" name="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669"></a><h4 id="MULTI-GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669" class="sect4"><span class="enumeration_section">25.4.1</span>在CDB中使用本地捕获配置XStream Out</h4>
                  <div>
                     <p>一个示例说明了在CDB中使用本地捕获配置XStream Out。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__GUID-00AD2429-E547-452E-98A6-CA92348CBA65">先决条件</p>
                        <p>在配置XStream Out之前，请确保在XStream Out配置期间CDB中的所有容器都处于打开的读/写模式。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__GUID-84DC71F1-4410-424A-972F-3060FC80405F">假设</p>
                        <p>本节做出以下假设：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>捕获过程将是本地捕获过程，它将在与出站服务器相同的数据库上运行。</p>
                           </li>
                           <li>
                              <p>出站服务器的名称是<code class="codeph">xout</code> 。
                              </p>
                           </li>
                           <li>
                              <p>对PDB <code class="codeph">pdb1.example.com</code>中的<code class="codeph">oe.orders</code>和<code class="codeph">oe.order_items</code>表所做的数据操作语言（DML）和数据定义语言（DDL）更改将发送到出站服务器。
                              </p>
                           </li>
                           <li>
                              <p>对PDB <code class="codeph">pdb1.example.com</code>中的<code class="codeph">hr</code>模式所做的DML和DDL更改将发送到出站服务器。
                              </p>
                           </li>
                        </ul>
                        <p><a href="using-xstream-with-a-cdb.html#GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__BHCJJGJI">图25-3</a>提供了此XStream Out配置的概述。
                        </p>
                        <div class="figure" id="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__BHCJJGJI">
                           <p class="titleinfigure">图25-3使用CREATE_OUTBOUND为PDB创建的示例XStream Out配置</p><img src="img/xstrm084.png" width="586" alt="下面是图25-3的描述" title="下面是图25-3的描述" longdesc="img_text/xstrm084.html"><br><a href="img_text/xstrm084.html">“图25-3使用CREATE_OUTBOUND为PDB创建的示例XStream Out配置”的描述</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__GUID-D9311E5F-77CA-4913-BDB2-0B213ABEEFA4">使用<code class="codeph">CREATE_OUTBOUND</code>过程创建出站服务器：</p>
                        <ol>
                           <li>
                              <p>在SQL * Plus中，以XStream管理员身份连接到CDB中的根（而不是PDB <code class="codeph">pdb1.example.com</code> ）。
                              </p>
                           </li>
                           <li>
                              <p>创建出站服务器和其他XStream组件。</p>
                              <ol type="a">
                                 <li>
                                    <p>确保源CDB中的所有容器都处于打开的读/写模式。</p>
                                 </li>
                                 <li id="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__BHCHIDBF">
                                    <p>运行<code class="codeph">CREATE_OUTBOUND</code>过程。
                                    </p>
                                    <p>鉴于此示例的假设，请运行以下<code class="codeph">CREATE_OUTBOUND</code>过程：</p><pre class="pre codeblock"><code>DECLARE表DBMS_UTILITY.UNCL_ARRAY; schemas DBMS_UTILITY.UNCL_ARRAY; BEGIN表（1）：='oe.orders'; tables（2）：='oe.order_items'; schemas（1）：='hr'; DBMS_XSTREAM_ADM.CREATE_OUTBOUND（server_name =&gt;'xout'，source_database =&gt;'pdb1.example.com'，table_names =&gt; tables，schema_names =&gt; schemas）;结束; /</code></pre><div class="infoboxnote" id="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__GUID-3F2AE034-37D6-42BA-B960-D4DA290E1B30">
                                       <p class="notep1">注意：</p>
                                       <p>要捕获CDB中所有容器（包括CDB根，所有PDB，所有应用程序根和所有应用程序PDB）中的更改，并将这些更改发送到XStream客户端应用程序，可以在运行<code class="codeph">CREATE_OUTBOUND</code>过程时省略<code class="codeph">source_database</code>参数。
                                       </p>
                                    </div>
                                 </li>
                                 <li>
                                    <p><code class="codeph">CREATE_OUTBOUND</code>过程成功完成后，如有必要，可以选择更改一个或多个容器的打开模式。
                                    </p>
                                 </li>
                              </ol>
                              <p>在步骤<a href="using-xstream-with-a-cdb.html#GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__BHCHIDBF">b中</a>运行该过程将执行以下操作：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>为<code class="codeph">oe.orders</code>和<code class="codeph">oe.order_items</code>表以及<code class="codeph">pdb1.example.com</code> PDB中<code class="codeph">hr</code>模式中的所有表配置补充日志记录。</p>
                                 </li>
                                 <li>
                                    <p>使用捕获进程和出站服务器使用的系统生成的名称创建队列。</p>
                                 </li>
                                 <li>
                                    <p>使用系统生成的名称创建并启动捕获过程，该名称带有规则集，指示它从<code class="codeph">pdb1.example.com</code> PDB捕获对<code class="codeph">oe.orders</code>表， <code class="codeph">oe.order_items</code>表和<code class="codeph">hr</code>模式的DML和DDL更改。</p>
                                 </li>
                                 <li>
                                    <p>使用规则集创建和启动名为<code class="codeph">xout</code>的出站服务器，该规则集指示它将<code class="codeph">oe.orders</code>表， <code class="codeph">oe.order_items</code>表和<code class="codeph">hr</code>模式的DML和DDL更改发送到客户端应用程序。
                                    </p>
                                 </li>
                                 <li>
                                    <p>将当前用户设置为出站服务器的连接用户。在此示例中，当前用户是XStream管理员。客户端应用程序必须以连接用户身份连接到数据库才能与出站服务器进行交互。</p>
                                 </li>
                              </ul>
                              <div class="infoboxnote" id="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__GUID-675A65B7-B11D-41A0-859F-2DC85081FCB2">
                                 <p class="notep1">注意：</p>
                                 <p><code class="codeph">server_name</code>值不能超过30个字节。
                                 </p>
                              </div>
                              <div class="infobox-tip" id="GUID-EE2BC80F-8EBE-49F7-8C6A-5A5D19A93669__GUID-28CF918F-2949-43B6-AFD1-2B117B7D40F9">
                                 <p class="notep1">小费：</p>
                                 <p>要捕获<code class="codeph">pdb1.example.com</code>数据库中的所有数据库更改并将其发送到出站服务器，请为<code class="codeph">table_names</code>和<code class="codeph">schema_names</code>参数指定<code class="codeph">NULL</code> （缺省值）。
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>创建并运行将连接到CDB根目录中的出站服务器并接收LCR的客户端应用程序。</p>
                              <p>运行客户端应用程序时，将自动启动出站服务器。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../xstrm/configuring-xstream-out.html#XSTRM-GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" target="_blank"><span><cite>Oracle数据库XStream指南</cite></span></a></li>
                           <li><a href="../xstrm/sample-xstream-client-application.html#XSTRM-GUID-B914FF75-92AA-4270-BF71-E9A5AA9228F8" target="_blank"><span><cite>Oracle数据库XStream指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-xstream-with-a-cdb.html#GUID-1DBE4654-FA5C-4968-90FC-A2F79AA6B719" title="在CDB中配置XStream Out时，必须确定XStream Out将捕获哪些数据库更改并将其发送到客户端应用程序。">在CDB中配置XStream Out</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A" name="GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A"></a><h4 id="MULTI-GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A" class="sect4"><span class="enumeration_section">25.4.2</span>使用CDB中的下游捕获配置XStream输出</h4>
                  <div>
                     <p>使用下游捕获，XStream Out组件可以驻留在源数据库以外的数据库中。</p>
                     <div class="section">当您有多个CDB时，源数据库可以位于一个CDB中，您可以使用下游捕获来捕获另一个CDB中的更改。</div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__GUID-F64F89D7-DA05-467B-8EC7-E37228C54AA4">先决条件</p>
                        <p>在配置XStream Out之前，必须满足以下先决条件：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在XStream Out配置期间，确保CDB中的所有容器都处于打开的读/写模式。</p>
                           </li>
                           <li>
                              <p>此示例使用下游捕获。因此，您必须配置从源数据库到下游数据库的日志文件传输。</p>
                           </li>
                           <li>
                              <p>如果要使用实时下游捕获，则还必须添加所需的备用重做日志。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__GUID-D96EFF46-F06B-46A0-A290-92D845C7820D">假设</p>
                        <p>本节做出以下假设：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>出站服务器的名称是<code class="codeph">xout</code> 。
                              </p>
                           </li>
                           <li>
                              <p>出站服务器使用的队列是<code class="codeph">c##xstrmadmin.xstream_queue</code> 。
                              </p>
                           </li>
                           <li>
                              <p>源数据库是PDB <code class="codeph">pdb1.example.com</code>在CDB <code class="codeph">data.example.com</code> 。
                              </p>
                           </li>
                           <li>
                              <p>捕获过程在CDB <code class="codeph">capture.example.com</code>中运行。
                              </p>
                           </li>
                           <li>
                              <p>出站服务器在CDB <code class="codeph">capture.example.com</code>运行。
                              </p>
                           </li>
                           <li>
                              <p>从PDB <code class="codeph">pdb1.example.com</code>对<code class="codeph">oe.orders</code>和<code class="codeph">oe.order_items</code>表进行的DML和DDL更改将发送到出站服务器。
                              </p>
                           </li>
                           <li>
                              <p>从PDB <code class="codeph">pdb1.example.com</code>对<code class="codeph">hr</code>模式进行的DML和DDL更改将发送到出站服务器。
                              </p>
                           </li>
                        </ul>
                        <p>下图概述了此XStream Out配置。</p>
                        <div class="figure" id="GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__BHCDEHBB">
                           <p class="titleinfigure">图25-4使用多个CDB和下游捕获的示例XStream Out配置</p><img src="img/xstrm085.png" width="594" alt="下面是图25-4的描述" title="下面是图25-4的描述" longdesc="img_text/xstrm085.html"><br><a href="img_text/xstrm085.html">“图25-4使用多个CDB和下游捕获的示例XStream Out配置”的描述</a></div>
                        <!-- class="figure" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__GUID-4731220D-3633-4364-A189-721FD3517454">使用CDB中的下游捕获配置XStream Out：</p>
                        <ol>
                           <li>
                              <p>在SQL * Plus中，以XStream管理员身份连接到下游捕获CDB的根目录。</p>
                              <p>在这个例子中。下游捕获CDB是<code class="codeph">capture.example.com</code> 。
                              </p>
                           </li>
                           <li>
                              <p>创建将由捕获进程使用的队列。</p>
                              <p>例如，运行以下过程：</p><pre class="pre codeblock"><code>BEGIN DBMS_XSTREAM_ADM.SET_UP_QUEUE（queue_table =&gt;'c ## xstrmadmin.xstream_queue_table'，queue_name =&gt;'c ## xstrmadmin.xstream_queue'）;结束; /</code></pre></li>
                           <li id="GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__BHCCCAIA">
                              <p>（可选）创建从下游捕获CDB中的根目录到源CDB中的根目录的数据库链接。</p>
                              <p>在此示例中，创建一个数据库链接，从<code class="codeph">capture.example.com</code>中的根目录到<code class="codeph">data.example.com</code>的根目录。例如，如果用户<code class="codeph">c##xstrmadmin</code>是两个数据库上的XStream管理员，则创建以下数据库链接：</p><pre class="pre codeblock"><code>创建数据库链接data.example.com连接到c ## xstrmadmin通过<span class="italic">密码</span>使用'data.example.com'标识;</code></pre></li>
                           <li>
                              <p>确保源CDB中的所有容器都处于打开的读/写模式。</p>
                           </li>
                           <li>
                              <p>如果未在步骤<a href="using-xstream-with-a-cdb.html#GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__BHCCCAIA">3中</a>创建数据库链接，则必须在源CDB的根目录中完成其他步骤。</p>
                              <p>如果在步骤<a href="using-xstream-with-a-cdb.html#GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__BHCCCAIA">3中</a>创建了数据库链接，则不需要这些步骤。
                              </p>
                              <p>运行<code class="codeph">BUILD</code>过程并确保为源CDB中的数据库对象指定了所需的补充日志记录：</p>
                              <ol type="a">
                                 <li>
                                    <p>以XStream管理员身份连接到源CDB中的根目录。</p>
                                 </li>
                                 <li>
                                    <p>运行<code class="codeph">DBMS_CAPTURE_ADM.BUILD</code>过程。例如：</p><pre class="pre codeblock"><code>SET SERVEROUTPUT ON DECLARE scn NUMBER; BEGIN DBMS_CAPTURE_ADM.BUILD（first_scn =&gt; scn）; DBMS_OUTPUT.PUT_LINE（'First SCN Value ='|| scn）;结束; /第一个SCN值= 409391</code></pre><p>此过程显示将在<code class="codeph">capture.example.com</code> CDB的根目录中创建的捕获进程的有效第一个SCN值。记下返回的SCN值，因为在步骤<a href="using-xstream-with-a-cdb.html#GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__BHCHAEJF">6中</a>创建捕获过程时将使用它。
                                    </p>
                                 </li>
                                 <li>
                                    <p>确保为源CDB中的数据库对象指定了必需的补充日志记录。</p>
                                    <p>对于此示例，请确保为<code class="codeph">hr</code>模式， <code class="codeph">oe.orders</code>表和<code class="codeph">pdb1.example.com</code> PDB中的<code class="codeph">oe.order_items</code>表配置了补充日志记录。</p>
                                 </li>
                              </ol>
                           </li>
                           <li id="GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__BHCHAEJF">
                              <p>连接到下游捕获CDB中的根时，创建捕获过程。</p>
                              <p>例如，运行以下过程以在作为XStream管理员连接到<code class="codeph">capture.example.com</code>时创建捕获过程：</p><pre class="pre codeblock"><code>BEGIN DBMS_CAPTURE_ADM.CREATE_CAPTURE（queue_name =&gt;'c ## xstrmadmin.xstream_queue'，capture_name =&gt;'real_time_capture'，rule_set_name =&gt; NULL，start_scn =&gt; NULL，source_database =&gt; NULL，use_database_link =&gt; TRUE，first_scn =&gt; NULL，logfile_assignment = &gt;'implicit'，source_root_name =&gt;'data.example.com'，capture_class =&gt;'xstream'）;结束; /</code></pre><p>如果在步骤<a href="using-xstream-with-a-cdb.html#GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__BHCCCAIA">3中</a>未创建数据库链接，则指定<code class="codeph">DBMS_CAPTURE_ADM.BUILD</code>过程为<code class="codeph">first_scn</code>参数返回的SCN值。
                              </p>
                              <p>不要开始捕获过程。</p>
                           </li>
                           <li>
                              <p>创建捕获过程后，如有必要，可以选择更改一个或多个PDB的打开模式。</p>
                           </li>
                           <li>
                              <p>运行<code class="codeph">ADD_OUTBOUND</code>过程。
                              </p>
                              <p>给定此部分的假设，运行以下<code class="codeph">ADD_OUTBOUND</code>过程：</p><pre class="pre codeblock"><code>DECLARE表DBMS_UTILITY.UNCL_ARRAY; schemas DBMS_UTILITY.UNCL_ARRAY; BEGIN表（1）：='oe.orders'; tables（2）：='oe.order_items'; schemas（1）：='hr'; DBMS_XSTREAM_ADM.ADD_OUTBOUND（server_name =&gt;'xout'，queue_name =&gt;'c ## xstrmadmin.xstream_queue'，source_database =&gt;'pdb1.example.com'，table_names =&gt; tables，schema_names =&gt; schemas，source_root_name =&gt;'data.example .com'，source_container_name =&gt;'pdb1'）;结束; /</code></pre><p>运行此过程将执行以下操作：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>创建名为<code class="codeph">xout</code>的出站服务器。出站服务器具有规则集，指示它将<code class="codeph">oe.orders</code>表， <code class="codeph">oe.order_items</code>表和<code class="codeph">hr</code>模式的DML和DDL更改发送到客户端应用程序。该规则规定，这些变化必须起源于PDB <code class="codeph">pdb1.example.com</code>在CDB <code class="codeph">data.example.com</code> 。出站服务器将LCR从队列<code class="codeph">c##xstrmadmin.xstream_queue</code> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>将当前用户设置为出站服务器的<code class="codeph">connect_user</code> 。在此示例中， <code class="codeph">current_user</code>是XStream管理员。客户端应用程序必须以<code class="codeph">connect_user</code>身份连接到数据库才能与出站服务器进行交互。
                                    </p>
                                 </li>
                              </ul>
                              <div class="infoboxnote" id="GUID-0E4AD3F3-AE28-40E3-A95E-D8E4B935B99A__GUID-692609D0-11F7-4EE7-9F4C-55DB5E31F93D">
                                 <p class="notep1">注意：</p>
                                 <p><code class="codeph">server_name</code>值不能超过30个字节。
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>创建并运行将连接到出站服务器并接收LCR的客户端应用程序。</p>
                              <p>运行客户端应用程序时，将在下游捕获CDB自动启动出站服务器。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../xstrm/configuring-xstream-out.html#XSTRM-GUID-C3391C7F-D2C5-4A65-AA29-4B0EBC2B205E" target="_blank"><span><cite>Oracle数据库XStream指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-xstream-with-a-cdb.html#GUID-1DBE4654-FA5C-4968-90FC-A2F79AA6B719" title="在CDB中配置XStream Out时，必须确定XStream Out将捕获哪些数据库更改并将其发送到客户端应用程序。">在CDB中配置XStream Out</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-4E7FDA7C-002C-41D3-8E7C-2918913C2B13" name="GUID-4E7FDA7C-002C-41D3-8E7C-2918913C2B13"></a><h3 id="MULTI-GUID-4E7FDA7C-002C-41D3-8E7C-2918913C2B13" class="sect3"><span class="enumeration_section">25.5</span> XStream In和多租户环境</h3>
               <div>
                  <p>多租户环境使Oracle数据库能够包含一组可移植的模式，对象和相关结构，这些模式在逻辑上作为单独的数据库出现在应用程序中。</p>
                  <p>这个自包含的集合称为可插拔数据库（PDB）。多租户容器数据库（CDB）包含PDB。它还可以包含应用程序容器。应用程序容器是CDB的可选组件，它由应用程序根目录和与之关联的所有应用程序PDB组成。应用程序容器存储一个或多个应用程序的数据。应用程序容器共享应用程序元数据和公共数据在CDB中，以下各项都是容器：CDB根，每个PDB，每个应用程序根和每个应用程序PDB。</p>
                  <p>在CDB中，入站服务器仅限于从一个源数据库接收LCR，并且仅在当前容器中执行更改（一个PDB，一个应用程序根，一个应用程序PDB或CDB根）。单个入站服务器无法将更改应用于CDB中的多个容器。</p>
                  <p>当入站服务器位于CDB根目录中时，应用用户必须是普通用户。当入站服务器位于应用程序根目录中时，应用用户必须是普通用户或应用程序公共用户。当入站服务器位于PDB或应用程序PDB中时，应用用户可以是普通用户或本地用户。</p>
                  <div class="infoboxnote" id="GUID-4E7FDA7C-002C-41D3-8E7C-2918913C2B13__GUID-72FF3C44-9583-4898-B869-1B6183E5CEEC">
                     <p class="notep1">注意：</p>
                     <p>XStream不会同步应用程序根容器中所做的更改。不要使用XStream In复制来复制在应用程序根容器中完成的操作。您可以在目标中的应用程序根容器中手动应用这些更改。请注意，仍可以复制在PDB中完成的操作。</p>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="using-xstream-with-a-cdb.html#GUID-CBD258F9-D53D-4DA8-98CE-D87232D06655" title="多租户环境使Oracle数据库能够包含一组可移植的模式，对象和相关结构，这些模式在逻辑上作为单独的数据库出现在应用程序中。这个自包含的集合称为可插拔数据库（PDB）。CDB包含PDB。">系统创建的规则和多租户环境</a></li>
                        <li><a href="multitenant-architecture.html#GUID-BBAD3448-8A5A-4397-BD3A-F05D945DB7F8" title="多租户架构使Oracle数据库可用作多租户容器数据库（CDB）。">多租户架构</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-xstream-with-a-cdb.html#GUID-37EA80B6-8131-46C9-8CB8-CA597ACE5563" title="您可以在多租户容器数据库（CDB）中使用Oracle Database XStream。">将XStream与CDB一起使用</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
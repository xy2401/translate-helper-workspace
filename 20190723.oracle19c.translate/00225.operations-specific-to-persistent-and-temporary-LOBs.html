<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>特定于持久和临时LOB的操作</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database SecureFiles and Large Objects Developer&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database SecureFiles and Large Objects Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="securefiles-and-large-objects-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T02:58:18-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96333-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="using-oracle-LOBs-storage.html" title="Previous" type="text/html"></link>
      <link rel="next" href="distributed-LOBs.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SecureFiles and Large Objects Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADLOB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-oracle-LOBs-storage.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="distributed-LOBs.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database SecureFiles和Large Objects Developer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="getting-started.html" property="item" typeof="WebPage"><span property="name">入门</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">特定于持久和临时LOB的操作</li>
            </ol>
            <a id="GUID-7B3D15D3-A182-4ED1-A265-8EE15E793C46" name="GUID-7B3D15D3-A182-4ED1-A265-8EE15E793C46"></a><a id="ADLOB45635"></a>
            
            <h2 id="ADLOB-GUID-7B3D15D3-A182-4ED1-A265-8EE15E793C46" class="sect2"><span class="enumeration_chapter">4</span>持久性和临时LOB特有的操作</h2>
         </header>
         <div class="ind">
            <div>
               <p>持久性和临时LOB实例之间的LOB操作可能不同。</p>
               <p>话题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="operations-specific-to-persistent-and-temporary-LOBs.html#GUID-45C84AD5-42D3-45BD-A04C-FCA37D0BFE6E">持久的LOB操作</a></p>
                  </li>
                  <li>
                     <p><a href="operations-specific-to-persistent-and-temporary-LOBs.html#GUID-DE7A5AA6-6A30-4F5D-A1E7-37E71584A31E">临时LOB操作</a></p>
                  </li>
                  <li>
                     <p><a href="operations-specific-to-persistent-and-temporary-LOBs.html#GUID-18AE018F-3943-418D-B2C5-2555A19112E0">在PL / SQL中创建持久和临时LOB</a></p>
                  </li>
                  <li>
                     <p><a href="operations-specific-to-persistent-and-temporary-LOBs.html#GUID-20481180-4E23-4693-B1CD-32C2E77EBFBA">在OCI释放临时LOB</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-7B3D15D3-A182-4ED1-A265-8EE15E793C46__GUID-6765CD7C-52BB-46FC-8C2B-6E12053135E0">
                  <p class="notep1">也可以看看：</p>
                  <p></p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-LOB-APIs.html#GUID-5BEE64AC-5528-45DC-AB57-A8EDE8E4DE65" title="您可以使用PL / SQL过程DBMS_LOB.CONVERTTOCLOB将BLOB实例转换为CLOB。">使用LOB API</a>提供了可用于临时或永久LOB的LOB API的API使用的详细信息和示例。
                        </p>
                     </li>
                     <li>
                        <p><a href="LOB-APIs-for-BFILE-operations.html#GUID-043A9B91-69C8-44D4-A38A-E872B0A2B9A9" title="您可以使用INSTRoperation确定BFILE中是否存在模式。">用于BFILE操作</a>的LOB API提供了使用在BFILE上运行的LOB API的详细信息和示例。
                        </p>
                     </li>
                  </ul>
               </div>
            </div><a id="ADLOB45636"></a><div class="props_rev_3"><a id="GUID-45C84AD5-42D3-45BD-A04C-FCA37D0BFE6E" name="GUID-45C84AD5-42D3-45BD-A04C-FCA37D0BFE6E"></a><h3 id="ADLOB-GUID-45C84AD5-42D3-45BD-A04C-FCA37D0BFE6E" class="sect3">持久的LOB操作</h3>
               <div>
                  <p>本节介绍仅适用于永久LOB的操作。</p>
               </div><a id="ADLOB45637"></a><div class="props_rev_3"><a id="GUID-92061E43-8CB8-4A82-9FDE-F3F42ABD551E" name="GUID-92061E43-8CB8-4A82-9FDE-F3F42ABD551E"></a><h4 id="ADLOB-GUID-92061E43-8CB8-4A82-9FDE-F3F42ABD551E" class="sect4">将LOB插入表中</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用多种方法将LOB实例插入到持久性LOB列中。</p>
                        <div class="infoboxnotealso" id="GUID-92061E43-8CB8-4A82-9FDE-F3F42ABD551E__DDLANDDMLSTATEMENTSWITHLOBS-DD47C174">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="DDL-DML-statements-with-LOBs.html#GUID-17F0F935-FD78-4F41-B6DF-86409522D667" title="您可以通过初始化LOB定位器绑定变量来插入行。">带有LOB的DDL和DML语句，</a>以获取有关将LOB实例插入到持久性LOB列中的不同方法的更多信息</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45638"></a><div class="props_rev_3"><a id="GUID-1247D9C9-AB93-4635-A878-24D6AD928E5D" name="GUID-1247D9C9-AB93-4635-A878-24D6AD928E5D"></a><h4 id="ADLOB-GUID-1247D9C9-AB93-4635-A878-24D6AD928E5D" class="sect4">从表中选择LOB</h4>
                  <div>
                     <div class="section">
                        <p>您可以像处理任何其他数据类型一样从表中选择持久性LOB。在以下示例中，将不同类型的持久性LOB实例选择到PL / SQL变量中。</p><pre class="oac_no_warn" dir="ltr">声明blob1 BLOB; blob2 BLOB; clob1 CLOB; nclob1 NCLOB; BEGIN SELECT ad_photo INTO blob1 FROM print_media WHERE Product_id = 2268 FOR UPDATE; SELECT ad_photo INTO blob2 FROM print_media WHERE Product_id = 3106; SELECT ad_sourcetext INTO clob1 FROM Print_media WHERE product_id = 3106 and ad_id = 13001 FOR UPDATE; SELECT ad_fltextn INTO nclob1 FROM Print_media WHERE product_id = 3060 and ad_id = 11001 FOR UPDATE;结束; /显示错误;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADLOB45639"></a><div class="props_rev_3"><a id="GUID-DE7A5AA6-6A30-4F5D-A1E7-37E71584A31E" name="GUID-DE7A5AA6-6A30-4F5D-A1E7-37E71584A31E"></a><h3 id="ADLOB-GUID-DE7A5AA6-6A30-4F5D-A1E7-37E71584A31E" class="sect3">临时LOB操作</h3>
               <div>
                  <p>本节介绍仅适用于临时LOB实例的操作。</p>
               </div><a id="ADLOB1005"></a><div class="props_rev_3"><a id="GUID-1216E5A8-792D-46CE-B68E-4CAFB70E5CC4" name="GUID-1216E5A8-792D-46CE-B68E-4CAFB70E5CC4"></a><h4 id="ADLOB-GUID-1216E5A8-792D-46CE-B68E-4CAFB70E5CC4" class="sect4">创建和释放临时LOB</h4>
                  <div>
                     <div class="section">
                        <p>要创建临时LOB实例，必须声明给定LOB数据类型的变量，并将该变量传递给<code class="codeph">CREATETEMPORARY</code> API。</p>
                        <p>临时LOB实例存在于您的应用程序中，直到它超出范围，您的会话终止，或者您明确释放该实例。建议释放临时LOB实例以释放系统资源。</p>
                        <p>以下示例演示如何使用DBMS_LOB包在PL / SQL环境中创建和释放临时LOB。</p><pre class="oac_no_warn" dir="ltr">声明blob1 BLOB; blob2 BLOB; clob1 CLOB; nclob1 NCLOB; BEGIN  - 创建临时LOB DBMS_LOB.CREATETEMPORARY（blob1，TRUE，DBMS_LOB.SESSION）; DBMS_LOB.CREATETEMPORARY（blob2，TRUE，DBMS_LOB.SESSION）; DBMS_LOB.CREATETEMPORARY（clob1，TRUE，DBMS_LOB.SESSION）; DBMS_LOB.CREATETEMPORARY（nclob1，TRUE，DBMS_LOB.SESSION）; - 填充数据writeDataToLOB_proc（blob1）; writeDataToLOB_proc（blob2）; -  CHAR-&gt; LOB转换clob1：='abcde'; nclob1：= TO_NCLOB（clob1）; - 其他API call_lob_apis（blob1，blob2，clob1，nclob1）; - 免费临时LOBs DBMS_LOB.FREETEMPORARY（blob1）; DBMS_LOB.FREETEMPORARY（blob2）; DBMS_LOB.FREETEMPORARY（clob1）; DBMS_LOB.FREETEMPORARY（nclob1）;结束; /显示错误;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADLOB45640"></a><div class="props_rev_3"><a id="GUID-18AE018F-3943-418D-B2C5-2555A19112E0" name="GUID-18AE018F-3943-418D-B2C5-2555A19112E0"></a><h3 id="ADLOB-GUID-18AE018F-3943-418D-B2C5-2555A19112E0" class="sect3">在PL / SQL中创建持久和临时LOB</h3>
               <div>
                  <div class="section">
                     <p>下面的代码示例说明了如何在PL / SQL中创建持久和临时LOB。此代码位于演示文件中：</p><pre class="oac_no_warn" dir="ltr"><span>$ ORACLE_HOME / RDBMS /演示/ LOBS / PLSQL / lobdemo.sql</span>
</pre><p>此演示文件还调用单独的PL / SQL文件中的过程，这些文件说明了其他LOB API的用法。</p>
                     <div class="infoboxnotealso" id="GUID-18AE018F-3943-418D-B2C5-2555A19112E0__PLSQLLOBDEMONSTRATIONFILESFORALISTO-DD485C65">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="LOB-demonstration-files.html#GUID-6F195C50-2EC1-4F24-8DF4-F1EC25D0C7F2">PL / SQL LOB演示文件，</a>用于演示文件和链接的列表，以获取有关相关LOB API的更多信息</p>
                     </div><pre class="oac_no_warn" dir="ltr">-------------------------------------------------- --------------------------- ----------------------- - 持久LOB操作------------------------ --------------------- -------------------------------------------------- ------声明blob1 BLOB; blob2 BLOB; clob1 CLOB; nclob1 NCLOB; BEGIN SELECT ad_photo INTO blob1 FROM print_media WHERE Product_id = 2268 FOR UPDATE; SELECT ad_photo INTO blob2 FROM print_media WHERE Product_id = 3106; SELECT ad_sourcetext INTO clob1 FROM Print_media WHERE product_id = 3106 and ad_id = 13001 FOR UPDATE; SELECT ad_fltextn INTO nclob1 FROM Print_media WHERE product_id = 3060 and ad_id = 11001 FOR UPDATE; call_lob_apis（blob1，blob2，clob1，nclob1）;回滚;结束; /显示错误; -------------------------------------------------- --------------------------- ----------------------- - 临时LOB操作------------------------ --------------------- -------------------------------------------------- ------声明blob1 BLOB; blob2 BLOB; clob1 CLOB; nclob1 NCLOB; BEGIN  - 创建临时LOB DBMS_LOB.CREATETEMPORARY（blob1，TRUE，DBMS_LOB.SESSION）; DBMS_LOB.CREATETEMPORARY（blob2，TRUE，DBMS_LOB.SESSION）; DBMS_LOB.CREATETEMPORARY（clob1，TRUE，DBMS_LOB.SESSION）; DBMS_LOB.CREATETEMPORARY（nclob1，TRUE，DBMS_LOB.SESSION）; - 填充数据writeDataToLOB_proc（blob1）; writeDataToLOB_proc（blob2）; -  CHAR-&gt; LOB转换clob1：='abcde'; nclob1：= TO_NCLOB（clob1）; - 其他API call_lob_apis（blob1，blob2，clob1，nclob1）; - 免费临时LOBs DBMS_LOB.FREETEMPORARY（blob1）; DBMS_LOB.FREETEMPORARY（blob2）; DBMS_LOB.FREETEMPORARY（clob1）; DBMS_LOB.FREETEMPORARY（nclob1）;结束; /显示错误;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADLOB45641"></a><div class="props_rev_3"><a id="GUID-20481180-4E23-4693-B1CD-32C2E77EBFBA" name="GUID-20481180-4E23-4693-B1CD-32C2E77EBFBA"></a><h3 id="ADLOB-GUID-20481180-4E23-4693-B1CD-32C2E77EBFBA" class="sect3">在OCI释放临时LOB</h3>
               <div>
                  <div class="section">
                     <p>每当您的OCI程序从SQL或PL / SQL获取LOB定位器时，请检查定位器是否是临时的。如果是，请在应用程序完成后释放定位器。定位器可以在select或out绑定期间来自定义。临时LOB持续时间始终在发送到客户端时升级到会话。在定位器被下一行的定位器覆盖之前，应用程序必须执行以下操作：</p><pre class="oac_no_warn" dir="ltr">OCILobIsTemporary（env，err，locator，is_temporary）; if（is_temporary）OCILobFreeTemporary（svc，err，locator）;</pre><div class="infoboxnotealso" id="GUID-20481180-4E23-4693-B1CD-32C2E77EBFBA__GUID-203832B6-0E04-4230-9AD0-43A75F46321C">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../lnoci/lob-functions.html#LNOCI162" target="_blank"><span class="italic">Oracle调用接口程序员指南</span></a>第16章“LOB函数”部分。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
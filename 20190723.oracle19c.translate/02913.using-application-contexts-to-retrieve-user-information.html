<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="An application context stores user identification that can enable or prevent a user from accessing data in the database."></meta>
      <meta name="description" content="An application context stores user identification that can enable or prevent a user from accessing data in the database."></meta>
      <title>使用应用程序上下文来检索用户信息</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Security Guide "></meta>
      <meta property="og:description" content="An application context stores user identification that can enable or prevent a user from accessing data in the database."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Security Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-security-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-28T14:57:12-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96299-04"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="part_3.html" title="Previous" type="text/html"></link>
      <link rel="next" href="using-oracle-vpd-to-control-data-access.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Security Guide"></meta>
    <meta name="dcterms.isVersionOf" content="DBSEG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="part_3.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="using-oracle-vpd-to-control-data-access.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">安全指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part_3.html" property="item" typeof="WebPage"><span property="name">控制对数据的访问</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用应用程序上下文来检索用户信息</li>
            </ol>
            <a id="GUID-51C9D5FA-6787-4F05-82EF-A5968BEDC5A0" name="GUID-51C9D5FA-6787-4F05-82EF-A5968BEDC5A0"></a><a id="DBSEG011"></a>
            
            <h2 id="DBSEG-GUID-51C9D5FA-6787-4F05-82EF-A5968BEDC5A0" class="sect2"><span class="enumeration_chapter">11</span>使用应用程序上下文检索用户信息</h2>
         </header>
         <div class="ind">
            <div>
               <p>应用程序上下文存储可以启用或阻止用户访问数据库中的数据的用户标识。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-6745DB10-F540-45D7-9761-9E8F342F1435">关于应用程序上下文</a><br>应用程序上下文在控制用户对数据的访问方面提供了许多好处。
                  </li>
                  <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-90AE6214-2B6F-48F0-B6D1-A92D3A9E985B">应用程序上下文的类型</a><br>应用程序上下文有三种常规类别。
                  </li>
                  <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC">使用基于数据库会话的应用程序上下文</a><br>基于数据库会话的应用程序上下文使您可以检索有关用户的基于会话的信息。
                  </li>
                  <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6">全球应用程序上下文</a><br>您可以使用全局应用程序上下文跨数据库会话访问应用程序值，包括Oracle Real Application Clusters环境。
                  </li>
                  <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-DD567E61-0D89-48D0-A0CB-47297461824F">使用基于客户端会话的应用程序上下文</a><br>基于客户端会话的应用程序上下文存储在用户全局区域（UGA）中。
                  </li>
                  <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-D3F0FFD2-6C58-4A8E-816D-CCE7B3117526">应用上下文数据字典视图</a><br>Oracle数据库提供数据字典视图，提供有关应用程序上下文的信息。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="part_3.html" title="第III部分介绍了如何控制对数据的访问。">控制对数据的访问</a></p>
                  </div>
               </div>
            </div>
            <a id="DBSEG70071"></a><div class="props_rev_3"><a id="GUID-6745DB10-F540-45D7-9761-9E8F342F1435" name="GUID-6745DB10-F540-45D7-9761-9E8F342F1435"></a><h3 id="DBSEG-GUID-6745DB10-F540-45D7-9761-9E8F342F1435" class="sect3">关于应用程序上下文</h3>
               <div>
                  <p>应用程序上下文在控制用户对数据的访问方面提供了许多好处。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-5841261E-988F-4A56-A2B4-71114AB3D51D">什么是应用程序上下文？</a><br><strong class="term">应用程序上下文</strong>是Oracle数据库存储在内存中的一组名称 - 值对。
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-6DC4B8EC-7C39-4E27-B189-BC5388C9D5E1">应用程序上下文的组件</a><br>应用程序上下文包含两个组件，包括名称 - 值对。
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-0955BECE-16B1-4D1B-9685-16AD8CD7517B">应用程序上下文值存储在何处？</a><br>Oracle数据库将应用程序上下文值存储在安全数据高速缓存中。
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-76E3671E-8C6F-4972-AA8B-D693BA6C457D">使用应用程序上下文的好处</a><br>大多数应用程序包含可用于应用程序上下文的信息。
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-6B4B0ACA-F129-48DB-90BC-B7D0AA76D7D7">版本如何影响应用程序上下文值</a><br>Oracle数据库在受应用程序上下文包影响的所有版本中设置应用程序上下文。
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-60DBA142-691E-4710-B8F2-2522E5B37745">多租户环境中的应用程序上下文</a><br>在多租户环境中创建应用程序的位置确定您必须在何处创建应用程序上下文。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-51C9D5FA-6787-4F05-82EF-A5968BEDC5A0" title="应用程序上下文存储可以启用或阻止用户访问数据库中的数据的用户标识。">使用应用程序上下文检索用户信息</a></p>
                     </div>
                  </div>
               </div>
               <a id="DBSEG165"></a><div class="props_rev_3"><a id="GUID-5841261E-988F-4A56-A2B4-71114AB3D51D" name="GUID-5841261E-988F-4A56-A2B4-71114AB3D51D"></a><h4 id="DBSEG-GUID-5841261E-988F-4A56-A2B4-71114AB3D51D" class="sect4">什么是应用程序上下文？</h4>
                  <div>
                     <p><strong class="term">应用程序上下文</strong>是Oracle数据库存储在内存中的一组名称 - 值对。
                     </p>
                     <p>上下文有一个名为<strong class="term">命名空间</strong>的标签（例如， <code class="codeph">empno_ctx</code>用于检索员工ID的应用程序上下文）。此上下文使Oracle数据库能够在身份验证期间查找有关数据库和非数据库用户的信息。
                     </p>
                     <p>在上下文中是名称 - 值对（关联数组）：名称指向内存中保存值的位置。应用程序可以使用应用程序上下文来访问有关用户的会话信息，例如用户ID或其他用户特定信息或客户端ID，然后将此数据安全地传递到数据库。</p>
                     <p>然后，您可以使用此信息来允许或阻止用户通过应用程序访问数据。您可以使用应用程序上下文对数据库和非数据库用户进行身份验证。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="configuring-audit-policies.html#GUID-1AC48317-FDF8-4D94-99AD-6B88E4909436" title="您可以使用AUDIT语句来审计应用程序上下文值。">审核应用程序上下文值</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-6745DB10-F540-45D7-9761-9E8F342F1435" title="应用程序上下文在控制用户对数据的访问方面提供了许多好处。">关于应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG166"></a><div class="props_rev_3"><a id="GUID-6DC4B8EC-7C39-4E27-B189-BC5388C9D5E1" name="GUID-6DC4B8EC-7C39-4E27-B189-BC5388C9D5E1"></a><h4 id="DBSEG-GUID-6DC4B8EC-7C39-4E27-B189-BC5388C9D5E1" class="sect4">应用程序上下文的组件</h4>
                  <div>
                     <p>应用程序上下文包含两个组件，包括名称 - 值对。</p>
                     <p>这些组件如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">名称。</span> 引用与值关联的属性集的名称。例如，如果<code class="codeph">empno_ctx</code>应用程序上下文从<code class="codeph">HR.EMPLOYEES</code>表中检索员工ID，则它可以具有诸如<code class="codeph">employee_id</code>的名称。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">值。</span> 引用属性设置的值。例如，对于<code class="codeph">empno_ctx</code>应用程序上下文，如果要从<code class="codeph">HR.EMPLOYEES</code>表中检索员工ID，可以创建一个名为<code class="codeph">emp_id</code>的值来设置此ID的值。</p>
                        </li>
                     </ul>
                     <p>将应用程序上下文视为一个全局变量，它保存在数据库会话期间访问的信息。要设置安全应用程序上下文的值，必须创建使用<code class="codeph">DBMS_SESSION.SET_CONTEXT</code>过程的PL / SQL程序包过程。实际上，如果上下文未标记为<code class="codeph">INITIALIZED EXTERNALLY</code>或<code class="codeph">INITIALIZED GLOBALLY</code> ，则这是设置应用程序上下文值的唯一方法。您可以在运行时将值分配给应用程序上下文属性，而不是在创建应用程序上下文时。由于<span class="bold">可信</span>过程而非用户分配值，因此它是一个称为安全应用程序上下文。对于基于客户端会话的应用程序上下文，设置应用程序上下文的另一种方法是使用Oracle调用接口（OCI）调用。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-6745DB10-F540-45D7-9761-9E8F342F1435" title="应用程序上下文在控制用户对数据的访问方面提供了许多好处。">关于应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG167"></a><div class="props_rev_3"><a id="GUID-0955BECE-16B1-4D1B-9685-16AD8CD7517B" name="GUID-0955BECE-16B1-4D1B-9685-16AD8CD7517B"></a><h4 id="DBSEG-GUID-0955BECE-16B1-4D1B-9685-16AD8CD7517B" class="sect4">应用程序上下文值存储在何处？</h4>
                  <div>
                     <p>Oracle数据库将应用程序上下文值存储在安全数据高速缓存中。</p>
                     <p>此缓存在用户全局区域（UGA）或系统（有时称为“共享”）全局区域（SGA）中可用。这样，在会话期间检索应用程序上下文值。由于应用程序上下文将值存储在此数据高速缓存中，因此可以提高应用程序的性能。您可以单独使用应用程序上下文，使用Oracle虚拟专用数据库策略，也可以使用其他细粒度的访问控制策略。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="using-oracle-vpd-to-control-data-access.html#GUID-36849380-3641-4485-B03F-3D494158BAB3" title="您可以将应用程序上下文与Oracle虚拟专用数据库策略一起使用。">Oracle Virtual Private Database与应用程序上下文一起使用</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-6745DB10-F540-45D7-9761-9E8F342F1435" title="应用程序上下文在控制用户对数据的访问方面提供了许多好处。">关于应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="DBSEG168"></a><div class="props_rev_3"><a id="GUID-76E3671E-8C6F-4972-AA8B-D693BA6C457D" name="GUID-76E3671E-8C6F-4972-AA8B-D693BA6C457D"></a><h4 id="DBSEG-GUID-76E3671E-8C6F-4972-AA8B-D693BA6C457D" class="sect4">使用应用程序上下文的好处</h4>
                  <div>
                     <p>大多数应用程序包含可用于应用程序上下文的信息。</p>
                     <p>例如，在使用包含<code class="codeph">ORDER_NUMBER</code>和<code class="codeph">CUSTOMER_NUMBER</code>列的表的订单输入应用程序中，您可以使用这些列中的值作为安全属性来限制客户根据该客户的ID访问他或她自己的订单。
                     </p>
                     <p>应用程序上下文可用于以下目的：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>实施细粒度访问控制（例如，在Oracle虚拟专用数据库策略中）</p>
                        </li>
                        <li>
                           <p>跨多个环境保留用户身份</p>
                        </li>
                        <li>
                           <p>为应用程序提供更强的安全性，因为应用程序上下文由受信任的过程控制，而不是由用户控制</p>
                        </li>
                        <li>
                           <p>通过充当应用程序所需的属性的安全数据高速缓存来提高性能，以进行细粒度审计或在PL / SQL条件语句或循环中使用</p>
                           <p>每次需要这些属性时，此缓存可以节省查询数据库的重复开销。由于应用程序上下文将会话数据存储在缓存中而不是强制应用程序从表中重复检索此数据，因此它极大地提高了应用程序的性能。</p>
                        </li>
                        <li>
                           <p>用作应用程序可以定义，修改和访问的名称 - 值对的保留区域</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-6745DB10-F540-45D7-9761-9E8F342F1435" title="应用程序上下文在控制用户对数据的访问方面提供了许多好处。">关于应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG169"></a><div class="props_rev_3"><a id="GUID-6B4B0ACA-F129-48DB-90BC-B7D0AA76D7D7" name="GUID-6B4B0ACA-F129-48DB-90BC-B7D0AA76D7D7"></a><h4 id="DBSEG-GUID-6B4B0ACA-F129-48DB-90BC-B7D0AA76D7D7" class="sect4">版本如何影响应用程序上下文值</h4>
                  <div>
                     <p>Oracle数据库在受应用程序上下文包影响的所有版本中设置应用程序上下文。</p>
                     <p></p>
                     <p>应用程序上下文设置的值在应用程序上下文影响的所有版本中都可见。要查找数据库中的所有版本以及它们是否可用，您可以查询<span class="apiname" translate="no">ALL_EDITIONS</span>数据字典视图。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-6B4B0ACA-F129-48DB-90BC-B7D0AA76D7D7__GUID-2E12405D-6FE4-4B24-8F9D-4A84A3885DC5">
                        <p class="notep1">也可以看看：</p>
                        <p>有关版本的详细信息，请参见<a href="../adfns/editions.html#ADFNS020" target="_blank"><span><cite>“Oracle数据库开发指南</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-6745DB10-F540-45D7-9761-9E8F342F1435" title="应用程序上下文在控制用户对数据的访问方面提供了许多好处。">关于应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-60DBA142-691E-4710-B8F2-2522E5B37745" name="GUID-60DBA142-691E-4710-B8F2-2522E5B37745"></a><h4 id="DBSEG-GUID-60DBA142-691E-4710-B8F2-2522E5B37745" class="sect4">多租户环境中的应用程序上下文</h4>
                  <div>
                     <p>在多租户环境中创建应用程序的位置确定您必须在何处创建应用程序上下文。</p>
                     <p>如果应用程序安装在应用程序根目录或CDB根目录中，则可以跨应用程序容器或系统容器以及关联的应用程序PDB访问该应用程序。您需要在此根目录中创建一个公共应用程序上下文。</p>
                     <p>创建用于应用程序容器的公共应用程序上下文时，请注意以下事项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>您可以通过在<code class="codeph">CREATE CONTEXT</code> SQL语句中设置<code class="codeph">CONTAINER</code>子句来在多租户环境中创建应用程序上下文。例如，要在应用程序根目录中创建公共应用程序上下文，必须执行<code class="codeph">CREATE CONTEXT</code>并将<code class="codeph">CONTAINER</code>设置为<code class="codeph">ALL</code> 。要在PDB中创建应用程序上下文，请将<code class="codeph">CONTAINER</code>设置为<code class="codeph">CURRENT</code> 。</p>
                        </li>
                        <li>
                           <p>对于公共应用程序上下文，您不能对本地应用程序上下文使用相同的名称。您可以通过运行以下查询来查找现有应用程序上下文的名称：</p><pre class="pre codeblock"><code>SELECT OBJECT_NAME FROM DBA_OBJECTS WHERE OBJECT_TYPE ='CONTEXT';</code></pre></li>
                        <li>
                           <p>您为管理公共应用程序上下文而创建的PL / SQL包必须是常见的PL / SQL包。也就是说，它必须存在于应用程序根目录或CDB根目录中。如果为特定PDB创建应用程序上下文，则必须将关联的PL / SQL程序包存储在该PDB中。</p>
                        </li>
                        <li>
                           <p>当普通用户访问不同的容器时，无法从其他应用程序容器或系统容器访问您在应用程序容器或公共应用程序上下文的系统容器下在公共会话应用程序上下文中设置的名称 - 值对。</p>
                        </li>
                        <li>
                           <p>您在应用程序容器或系统容器的公共全局应用程序上下文中设置的名称 - 值对只能在同一用户会话中的同一容器中访问。</p>
                        </li>
                        <li>
                           <p>应用程序可以检索应用程序上下文的值，无论它是驻留在应用程序根目录，CDB根目录还是PDB中。</p>
                        </li>
                        <li>
                           <p>在PDB到CDB或应用程序容器的插件操作期间，如果公共应用程序上下文的名称与PDB的本地应用程序上下文冲突，则PDB必须以受限模式打开。然后，数据库管理员需要在正常模式下打开PDB之前纠正冲突。</p>
                        </li>
                        <li>
                           <p>在拔出操作期间，公共应用程序上下文保留其常用语义，因此稍后，如果将PDB插入到存在具有相同名称的公共应用程序上下文的另一CDB中，则它将继续表现为公共对象。如果将PDB插入应用程序容器或系统容器（其中不存在相同的公共应用程序上下文），则其行为类似于本地对象。</p>
                        </li>
                     </ul>
                     <p>要查找应用程序上下文是本地应用程序上下文还是应用程序公共应用程序上下文，请查询<code class="codeph">DBA_CONTEXT</code>或<code class="codeph">ALL_CONTEXT</code>数据字典视图的<code class="codeph">SCOPE</code>列。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-6745DB10-F540-45D7-9761-9E8F342F1435" title="应用程序上下文在控制用户对数据的访问方面提供了许多好处。">关于应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="DBSEG171"></a><a id="DBSEG170"></a><div class="props_rev_3"><a id="GUID-90AE6214-2B6F-48F0-B6D1-A92D3A9E985B" name="GUID-90AE6214-2B6F-48F0-B6D1-A92D3A9E985B"></a><h3 id="DBSEG-GUID-90AE6214-2B6F-48F0-B6D1-A92D3A9E985B" class="sect3">应用程序上下文的类型</h3>
               <div>
                  <p>应用程序上下文有三种常规类别。</p>
                  <p>这些类别如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="bold">基于数据库会话的应用程序上下文。</span> 此类型检索存储在数据库用户会话（即UGA）缓存中的数据。基于数据库会话的应用程序上下文有三类：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">在本地初始化。</span> 在本地将应用程序上下文初始化为用户的会话。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">外部初始化。</span> 从Oracle调用接口（OCI）应用程序，作业队列进程或连接的用户数据库链接初始化应用程序上下文。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">全球初始化。</span> 使用集中位置（例如LDAP目录）中的属性和值。
                              </p>
                           </li>
                        </ul>
                        <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="基于数据库会话的应用程序上下文使您可以检索有关用户的基于会话的信息。">使用基于数据库会话的应用程序上下文</a>描述了此类应用程序上下文。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">全局应用程序上下文。</span> 此类型检索存储在系统全局区域（SGA）中的数据，以便可以将其用于使用无会话模型的应用程序，例如三层体系结构中的中间层应用程序。如果必须跨会话共享会话上下文（例如，通过连接池实现），则全局应用程序上下文非常有用。
                        </p>
                        <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6" title="您可以使用全局应用程序上下文跨数据库会话访问应用程序值，包括Oracle Real Application Clusters环境。">全局应用程序上下文</a>描述了这种类型。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">基于客户端会话的应用程序上下文。</span> 此类型使用客户端上的Oracle调用接口函数来设置用户会话数据，然后执行必要的安全检查以限制用户访问。
                        </p>
                        <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-DD567E61-0D89-48D0-A0CB-47297461824F" title="基于客户端会话的应用程序上下文存储在用户全局区域（UGA）中。">使用基于客户端会话的应用程序上下文</a>描述了这种类型。
                        </p>
                     </li>
                  </ul>
                  <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-90AE6214-2B6F-48F0-B6D1-A92D3A9E985B__G1015746" title="此表列出了不同类型的应用程序上下文是存储在UGA还是SGA中，它们是否支持连接的用户数据库链接，它们是否支持LDAP目录中的集中存储，以及它们是否支持无会话多层应用程序。">表11-1</a>总结了不同类型的应用程序上下文。
                  </p>
                  <div class="tblformalwide" id="GUID-90AE6214-2B6F-48F0-B6D1-A92D3A9E985B__G1015746">
                     <p class="titleintable">表11-1应用程序上下文的类型</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="应用程序上下文的类型" width="100%" border="1" summary="This table lists whether the different types of application context are stored in the UGA or SGA, whether they support connected user database links, whether they support centralized storage in an LDAP directory, and whether they suppport sessionless multitier applications." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="24%" id="d84552e1410">应用上下文类型</th>
                              <th align="left" valign="bottom" width="8%" id="d84552e1413">存储在UGA中</th>
                              <th align="left" valign="bottom" width="8%" id="d84552e1416">存储在SGA中</th>
                              <th align="left" valign="bottom" width="19%" id="d84552e1419">支持连接的用户数据库链接</th>
                              <th align="left" valign="bottom" width="22%" id="d84552e1422">支持用户应用环境的集中存储</th>
                              <th align="left" valign="bottom" width="20%" id="d84552e1425">支持无会话多层应用程序</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d84552e1430" headers="d84552e1410 ">
                                 <p>在本地初始化基于数据库会话的应用程序上下</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d84552e1430 d84552e1413 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d84552e1430 d84552e1416 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d84552e1430 d84552e1419 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d84552e1430 d84552e1422 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d84552e1430 d84552e1425 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d84552e1449" headers="d84552e1410 ">
                                 <p>从外部初始化基于数据库会话的应用程序上下</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d84552e1449 d84552e1413 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d84552e1449 d84552e1416 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d84552e1449 d84552e1419 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d84552e1449 d84552e1422 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d84552e1449 d84552e1425 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d84552e1468" headers="d84552e1410 ">
                                 <p>全局初始化基于数据库会话的应用程序上下文</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d84552e1468 d84552e1413 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d84552e1468 d84552e1416 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d84552e1468 d84552e1419 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d84552e1468 d84552e1422 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d84552e1468 d84552e1425 ">
                                 <p>没有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d84552e1487" headers="d84552e1410 ">
                                 <p>全球应用背景</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d84552e1487 d84552e1413 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d84552e1487 d84552e1416 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d84552e1487 d84552e1419 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d84552e1487 d84552e1422 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d84552e1487 d84552e1425 ">
                                 <p>是</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="24%" id="d84552e1506" headers="d84552e1410 ">
                                 <p>基于客户端会话的应用程序上下</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d84552e1506 d84552e1413 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="8%" headers="d84552e1506 d84552e1416 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="19%" headers="d84552e1506 d84552e1419 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" width="22%" headers="d84552e1506 d84552e1422 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d84552e1506 d84552e1425 ">
                                 <p>是</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-51C9D5FA-6787-4F05-82EF-A5968BEDC5A0" title="应用程序上下文存储可以启用或阻止用户访问数据库中的数据的用户标识。">使用应用程序上下文检索用户信息</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="DBSEG172"></a><div class="props_rev_3"><a id="GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" name="GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC"></a><h3 id="DBSEG-GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" class="sect3">使用基于数据库会话的应用程序上下文</h3>
               <div>
                  <p>基于数据库会话的应用程序上下文使您可以检索有关用户的基于会话的信息。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-8332230F-45D0-4832-9593-89BC518B91BF">关于基于数据库会话的应用程序上下文</a><br>基于数据库会话的应用程序上下文检索数据库用户的会话信息。
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-F0968CAC-E281-4C45-BCF7-7DB157A322D1">基于数据库会话的应用程序上下文的组件</a><br>基于数据库会话的应用程序上下文检索并设置上下文的数据，然后在用户登录时设置此上下文。
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-985ECAE9-426D-4A03-9DFB-555ADD753634">创建基于数据库会话的应用程序上下文</a><br>基于数据库会话的应用程序上下文是存储用户会话信息的命名对象。
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-490E8823-64A9-4439-B80D-88001438D560">创建包以设置基于数据库会话的应用程序上下文</a><br>PL / SQL包可用于检索会话信息并设置应用程序上下文的名称 - 值属性。
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-580EE6B3-D244-4AAE-BBB5-BB606A456410">登录触发器以运行数据库会话应用程序上下文包</a><br>用户登录数据库实例后必须运行数据库会话应用程序上下文包。
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-ADAC8F4F-47B9-4BC0-8247-70F140E0A3CE">示例：创建简单登录触发器</a><br><code class="codeph">CREATE TRIGGER</code>语句可以创建一个简单的登录触发器。
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-0495E52D-8396-4F3D-9A69-636C88DF4622">示例：为生产环境创建登录触发器</a><br><code class="codeph">CREATE TRIGGER</code>语句可以为生产环境创建登录触发器。
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-CEE3B516-C036-4715-A472-01D0110AD95F">示例：为开发环境创建登录触发器</a><br><code class="codeph">CREATE TRIGGER</code>语句可以为开发环境创建登录触发器。
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-6F6FE37D-8D2D-4D0E-A5AA-C96D958F8BD5">教程：创建和使用基于数据库会话的应用程序上下文</a><br>本教程演示如何创建应用程序上下文，以检查尝试登录数据库的用户的ID。
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-115D80C9-8498-439B-8D18-6215ACB12005">从外部初始化基于数据库会话的应用程序上下文</a><br>从外部初始化基于数据库会话的应用程序上下文会提高性能，因为应用程序上下文存储在用户全局区域（UGA）中。
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-92F2E244-3516-4A52-AA31-D81F535E488C">全局初始化基于数据库会话的应用程序上下文</a><br>当基于数据库会话的应用程序存储在集中位置时，可以从LDAP目录全局使用它。
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-CE34F5E2-76F5-44C5-B71D-7F6AD6B73D40">基于外部化数据库会话的应用程序上下文</a><br>许多应用程序在数据库元数据表中存储用于细粒度访问控制的属性。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-51C9D5FA-6787-4F05-82EF-A5968BEDC5A0" title="应用程序上下文存储可以启用或阻止用户访问数据库中的数据的用户标识。">使用应用程序上下文检索用户信息</a></p>
                     </div>
                  </div>
               </div>
               <a id="DBSEG173"></a><div class="props_rev_3"><a id="GUID-8332230F-45D0-4832-9593-89BC518B91BF" name="GUID-8332230F-45D0-4832-9593-89BC518B91BF"></a><h4 id="DBSEG-GUID-8332230F-45D0-4832-9593-89BC518B91BF" class="sect4">关于基于数据库会话的应用程序上下文</h4>
                  <div>
                     <p>基于数据库会话的应用程序上下文检索数据库用户的会话信息。</p>
                     <p>此类应用程序上下文使用Oracle数据库中的PL / SQL过程来检索，设置和保护其管理的数据。</p>
                     <p>基于数据库会话的应用程序上下文完全在Oracle数据库中管理。Oracle数据库设置值，然后当用户退出会话时，自动清除存储在缓存中的应用程序上下文值。如果用户连接异常结束，例如，在电源故障期间，则PMON后台进程清理应用程序上下文数据。您无需从缓存中明确清除应用程序上下文。</p>
                     <p>让Oracle数据库管理应用程序上下文的优点是可以集中应用程序上下文管理。访问此数据库的任何应用程序都需要使用此应用程序上下文来允许或阻止用户访问该应用程序。这提供了改进的性能和更强的安全性的好处。</p>
                     <div class="infoboxnote" id="GUID-8332230F-45D0-4832-9593-89BC518B91BF__GUID-38945F4F-8E7A-417F-B8F4-D376292295A5">
                        <p class="notep1">注意：</p>
                        <p>如果您的用户是应用程序用户，即不在数据库中的用户，请考虑使用全局应用程序上下文。</p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="using-application-contexts-to-retrieve-user-information.html#GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6" title="您可以使用全局应用程序上下文跨数据库会话访问应用程序值，包括Oracle Real Application Clusters环境。">全球应用程序上下文</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="基于数据库会话的应用程序上下文使您可以检索有关用户的基于会话的信息。">使用基于数据库会话的应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-F0968CAC-E281-4C45-BCF7-7DB157A322D1" name="GUID-F0968CAC-E281-4C45-BCF7-7DB157A322D1"></a><h4 id="DBSEG-GUID-F0968CAC-E281-4C45-BCF7-7DB157A322D1" class="sect4">基于数据库会话的应用程序上下文的组件</h4>
                  <div>
                     <p>基于数据库会话的应用程序上下文检索并设置上下文的数据，然后在用户登录时设置此上下文。</p>
                     <p>您必须使用三个组件来创建和使用基于数据库会话的应用程序上下文：应用程序上下文，检索数据和设置上下文的过程，以及在用户登录时设置上下文的方法。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">应用程序上下文。</span> 您可以使用<code class="codeph">CREATE CONTEXT</code> SQL语句来创建应用程序上下文。此语句命名应用程序上下文（命名空间）并将其与PL / SQL过程相关联，该过程旨在检索会话数据并设置应用程序上下文。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">用于执行数据检索和设置上下文的PL / SQL过程。</span> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-FB3C6D57-3714-4CD4-8678-A29539382876" title="这定义了管理应用程序上下文所代表的会话数据的过程。">关于管理基于数据库会话的应用程序的程序包上下文</a>描述了此过程必须执行的任务。理想情况下，在包中创建此过程，以便您可以根据需要包含其他过程（例如，执行错误检查任务）。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">一种在用户登录时设置应用程序上下文的方法。</span> 登录到使用应用程序上下文的应用程序的用户必须运行设置应用程序上下文的PL / SQL包。您可以使用每次用户登录时触发的登录触发器来实现此目的，也可以在应用程序中嵌入此功能。
                           </p>
                        </li>
                     </ul>
                     <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-6F6FE37D-8D2D-4D0E-A5AA-C96D958F8BD5" title="本教程演示如何创建应用程序上下文，以检查尝试登录数据库的用户的ID。">教程：创建和使用基于数据库会话的应用程序上下文</a>显示如何创建和使用在本地初始化的基于数据库会话的应用程序上下文。
                     </p>
                     <p>此外，您可以在外部或全局初始化基于会话的应用程序上下文。这两种方法都将上下文信息存储在用户会话中。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">外部初始化。</span> 此类型可以来自OCI接口，作业队列进程或连接的用户数据库链接。有关详细信息，请参阅在<a href="using-application-contexts-to-retrieve-user-information.html#GUID-115D80C9-8498-439B-8D18-6215ACB12005" title="从外部初始化基于数据库会话的应用程序上下文会提高性能，因为应用程序上下文存储在用户全局区域（UGA）中。">外部初始化基于数据库会话的应用程序上下文</a> 。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">全局初始化。</span> 此类型使用集中位置（例如LDAP目录）中的属性和值。<a href="using-application-contexts-to-retrieve-user-information.html#GUID-92F2E244-3516-4A52-AA31-D81F535E488C" title="当基于数据库会话的应用程序存储在集中位置时，可以从LDAP目录全局使用它。">初始化基于数据库会话的应用程序上下文全局</a>提供更多信息。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="基于数据库会话的应用程序上下文使您可以检索有关用户的基于会话的信息。">使用基于数据库会话的应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG174"></a><div class="props_rev_3"><a id="GUID-985ECAE9-426D-4A03-9DFB-555ADD753634" name="GUID-985ECAE9-426D-4A03-9DFB-555ADD753634"></a><h4 id="DBSEG-GUID-985ECAE9-426D-4A03-9DFB-555ADD753634" class="sect4">创建基于数据库会话的应用程序上下文</h4>
                  <div>
                     <p>基于数据库会话的应用程序上下文是存储用户会话信息的命名对象。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-025F63D5-C7BB-44DB-BA84-A700B48E6B01">关于创建基于数据库会话的应用程序上下文</a><br>数据库用户会话（UGA）使用用户创建的命名空间存储基于会话的应用程序上下文。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-57D60A57-483B-428D-A3EF-2B95F27DFA45">创建基于数据库会话的应用程序上下文</a><br><code class="codeph">CREATE</code> <code class="codeph">CONTEXT</code> SQL语句可用于创建基于数据库会话的应用程序上下文。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-390A8C5F-4A01-4F9B-B147-6EFD19A4C622">基于数据库会话的多应用程序应用程序上下文</a><br>对于每个应用程序，您可以创建具有自己属性的应用程序上下文。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="基于数据库会话的应用程序上下文使您可以检索有关用户的基于会话的信息。">使用基于数据库会话的应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="DBSEG769"></a><div class="props_rev_3"><a id="GUID-025F63D5-C7BB-44DB-BA84-A700B48E6B01" name="GUID-025F63D5-C7BB-44DB-BA84-A700B48E6B01"></a><h5 id="DBSEG-GUID-025F63D5-C7BB-44DB-BA84-A700B48E6B01" class="sect5">关于创建基于数据库会话的应用程序上下文</h5>
                     <div>
                        <p>数据库用户会话（UGA）使用用户创建的命名空间存储基于会话的应用程序上下文。</p>
                        <p>每个应用程序上下文必须具有唯一属性并属于命名空间。也就是说，上下文名称在数据库中必须是唯一的，而不仅仅是在模式中。</p>
                        <p>如果要<code class="codeph">DROP ANY CONTEXT</code>应用程序上下文，则必须具有<code class="codeph">CREATE ANY CONTEXT</code>系统特权才能创建应用程序上下文，并具有<code class="codeph">DROP ANY CONTEXT</code>特权才能使用<code class="codeph">DROP CONTEXT</code>语句。
                        </p>
                        <p>应用程序上下文的所有权如下所示：即使已被授予<code class="codeph">CREATE ANY CONTEXT</code>和<code class="codeph">DROP ANY CONTEXT</code>权限的用户可以创建和删除应用程序上下文，它也归<code class="codeph">SYS</code>模式所有。Oracle数据库将上下文与创建它的模式帐户相关联，但如果删除此用户，则上下文仍存在于<code class="codeph">SYS</code>模式中。作为用户<code class="codeph">SYS</code> ，您可以删除应用程序上下文。
                        </p>
                        <p>您可以通过运行以下查询来查找现有应用程序上下文的名称：</p><pre class="oac_no_warn" dir="ltr">SELECT OBJECT_NAME FROM DBA_OBJECTS WHERE OBJECT_TYPE ='CONTEXT';</pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-985ECAE9-426D-4A03-9DFB-555ADD753634" title="基于数据库会话的应用程序上下文是存储用户会话信息的命名对象。">创建基于数据库会话的应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG771"></a><div class="props_rev_3"><a id="GUID-57D60A57-483B-428D-A3EF-2B95F27DFA45" name="GUID-57D60A57-483B-428D-A3EF-2B95F27DFA45"></a><h5 id="DBSEG-GUID-57D60A57-483B-428D-A3EF-2B95F27DFA45" class="sect5">创建基于数据库会话的应用程序上下文</h5>
                     <div>
                        <p><code class="codeph">CREATE</code> <code class="codeph">CONTEXT</code> SQL语句可用于创建基于数据库会话的应用程序上下文。
                        </p>
                        <div class="section">
                           <p>创建基于数据库会话的应用程序上下文时，必须为应用程序上下文创建命名空间，然后将其与管理保存用户会话信息的名称 - 值对的PL / SQL包关联。在创建上下文时，PL / SQL包不需要存在，但必须在运行时存在。</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要创建基于数据库会话的应用程序上下文，请使用<code class="codeph">CREATE</code> <code class="codeph">CONTEXT</code> SQL语句。
                                 </p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">CREATE CONTEXT empno_ctx使用set_empno_ctx_pkg CONTAINER = CURRENT;</pre></li>
                           </ul>
                           <p>在这个例子中：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">empno_ctx</code>是上下文命名空间。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">set_empno_ctx_pkg</code>是设置<code class="codeph">empno_ctx</code>命名空间属性的包（创建上下文时不需要存在）。<a href="using-application-contexts-to-retrieve-user-information.html#GUID-89E3A675-21F1-41A6-AE96-9E068CBF714C" title="接下来，您必须创建一个PL / SQL包来检索会话数据，然后设置应用程序上下文。">步骤3：创建用于检索会话数据的包并设置应用程序上下文</a>显示了如何创建可与此应用程序上下文一起使用的包的示例。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">CONTAINER</code>在当前PDB中创建应用程序上下文。要在应用程序或CDB根目录中创建应用程序上下文，必须将<code class="codeph">CONTAINER</code>设置为<code class="codeph">ALL</code> 。</p>
                              </li>
                           </ul>
                           <p>请注意，在创建上下文时，不要在<code class="codeph">CREATE CONTEXT</code>语句中设置其名称 - 值属性。相反，您可以在与应用程序上下文关联的PL / SQL包中设置它们。您必须这样做的原因是为了防止恶意用户在没有适当的属性验证的情况下更改上下文属性。确保此包与应用程序上下文位于同一容器中。例如，如果您在PDB中创建了应用程序上下文，则PL / SQL程序包必须驻留在该PDB中。</p>
                           <div class="infoboxnote" id="GUID-57D60A57-483B-428D-A3EF-2B95F27DFA45__GUID-9CDAE360-AE65-41D3-AFA4-CA0DFA9AB65C">
                              <p class="notep1">注意：</p>
                              <p>您无法创建名为<code class="codeph">CLIENTCONTEXT</code>的上下文。此单词保留用于基于客户端会话的应用程序上下文。有关此类<a href="using-application-contexts-to-retrieve-user-information.html#GUID-DD567E61-0D89-48D0-A0CB-47297461824F" title="A client session-based application context is stored in the User Global Area (UGA).">应用程序上下文</a>的详细信息，请参阅<a href="using-application-contexts-to-retrieve-user-information.html#GUID-DD567E61-0D89-48D0-A0CB-47297461824F" title="基于客户端会话的应用程序上下文存储在用户全局区域（UGA）中。">使用基于客户端会话的应用</a>程序上下文。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-985ECAE9-426D-4A03-9DFB-555ADD753634" title="基于数据库会话的应用程序上下文是存储用户会话信息的命名对象。">创建基于数据库会话的应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG989"></a><div class="props_rev_3"><a id="GUID-390A8C5F-4A01-4F9B-B147-6EFD19A4C622" name="GUID-390A8C5F-4A01-4F9B-B147-6EFD19A4C622"></a><h5 id="DBSEG-GUID-390A8C5F-4A01-4F9B-B147-6EFD19A4C622" class="sect5">基于数据库会话的多应用程序应用程序上下文</h5>
                     <div>
                        <p>对于每个应用程序，您可以创建具有自己属性的应用程序上下文。</p>
                        <div class="section">
                           <p>例如，假设您有三个应用程序：总帐，订单输入和人力资源。</p>
                           <p>您可以为每个应用程序指定不同的属性：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>对于订单输入应用程序上下文，您可以指定属性<code class="codeph">CUSTOMER_NUMBER.</code></p>
                              </li>
                              <li>
                                 <p>对于总帐应用程序上下文，您可以指定属性<code class="codeph">SET_OF_BOOKS</code>和<code class="codeph">TITLE.</code></p>
                              </li>
                              <li>
                                 <p>对于人力资源应用程序上下文，您可以指定<code class="codeph">ORGANIZATION_ID</code> ， <code class="codeph">POSITION</code>和<code class="codeph">COUNTRY</code>属性。</p>
                              </li>
                           </ul>
                           <p>属性访问的数据存储在应用程序后面的表中。例如，订单输入应用程序使用名为<code class="codeph">OE.CUSTOMERS</code>的表，该表包含<code class="codeph">CUSTOMER_NUMBER</code>列，该列提供<code class="codeph">CUSTOMER_NUMBER</code>属性的数据。在每种情况下，您都可以根据您的精确安全需求调整应用程序上下文。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-985ECAE9-426D-4A03-9DFB-555ADD753634" title="基于数据库会话的应用程序上下文是存储用户会话信息的命名对象。">创建基于数据库会话的应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="DBSEG176"></a><div class="props_rev_3"><a id="GUID-490E8823-64A9-4439-B80D-88001438D560" name="GUID-490E8823-64A9-4439-B80D-88001438D560"></a><h4 id="DBSEG-GUID-490E8823-64A9-4439-B80D-88001438D560" class="sect4">创建包以设置基于数据库会话的应用程序上下文</h4>
                  <div>
                     <p>PL / SQL包可用于检索会话信息并设置应用程序上下文的名称 - 值属性。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-FB3C6D57-3714-4CD4-8678-A29539382876">关于管理基于数据库会话的应用程序上下文的包</a><br>这定义了管理应用程序上下文所代表的会话数据的过程。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-BB59A1A8-D3C2-4620-A941-91AD37CEDF12">使用SYS_CONTEXT函数检索会话信息</a><br>您可以使用<code class="codeph">SYS_CONTEXT</code>函数检索应用程序上下文的会话信息。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-A9A66E6A-14B6-4A9D-828D-0858BB8E4F90">检查SYS_CONTEXT设置</a><br>您可以检查存储在<code class="codeph">DUAL</code>表中的<code class="codeph">SYS_CONTEXT</code>设置。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-D3E2E03C-6B63-4541-9B11-613E81E0B872">使用SYS_CONTEXT的动态SQL</a><br>在您希望在给定查询的执行之间更改策略的会话期间，查询必须使用动态SQL。</li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-8469C2F8-4424-4281-AA9A-F233588CE9AF">并行查询中的SYS_CONTEXT</a><br>如果在嵌入在并行查询中的SQL函数内使用<code class="codeph">SYS_CONTEXT</code> ，则该函数包括应用程序上下文。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-DEA99DFA-FED5-4C18-858C-06350FF59AF7">带数据库链接的SYS_CONTEXT</a><br><code class="codeph">SYS_CONTEXT</code>函数与数据库链接的使用兼容。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-5648314E-4CB9-4911-876F-759C3EACB0A9">DBMS_SESSION.SET_CONTEXT用于设置会话信息</a><br>在<code class="codeph">SYS_CONTEXT</code>检索用户的会话数据后，您可以从用户会话中设置应用程序上下文值。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-41D0A62A-367D-46E5-9522-9956233A263A">示例：创建应用程序上下文值的简单过程</a><br>您可以在过程中使用<span class="apiname" translate="no">DBMS_SESSION.SET_CONTEXT</span>语句来设置应用程序上下文值。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="基于数据库会话的应用程序上下文使您可以检索有关用户的基于会话的信息。">使用基于数据库会话的应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="DBSEG177"></a><div class="props_rev_3"><a id="GUID-FB3C6D57-3714-4CD4-8678-A29539382876" name="GUID-FB3C6D57-3714-4CD4-8678-A29539382876"></a><h5 id="DBSEG-GUID-FB3C6D57-3714-4CD4-8678-A29539382876" class="sect5">关于管理基于数据库会话的应用程序上下文的包</h5>
                     <div>
                        <p>这定义了管理应用程序上下文所代表的会话数据的过程。</p>
                        <p>此程序包通常在安全管理员架构中创建。该包必须执行以下任务：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">检索会话信息。</span> 要检索用户会话信息，可以使用<code class="codeph">SYS_CONTEXT</code> SQL函数。<code class="codeph">SYS_CONTEXT</code>函数返回与上下文命名空间关联的参数的值。您可以在SQL和PL / SQL语句中使用此函数。通常，您将使用内置的<code class="codeph">USERENV</code>命名空间来检索用户的会话信息。您还可以使用<code class="codeph">SYS_SESSION_ROLES</code>命名空间来指示当前是否为会话启用了指定的角色。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">使用CREATE CONTEXT设置您创建的应用程序上下文的名称 - 值属性。</span>您可以使用<code class="codeph">DBMS_SESSION.SET_CONTEXT</code>过程来设置应用程序上下文的名称 - 值属性。名称 - 值属性可以包含诸如用户ID，IP地址，身份验证模式，应用程序名称等信息。您设置的属性值将保留，直到您重置它们，或者直到用户结束会话。请注意以下事项：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>如果已经设置了名称空间中参数的值，则<code class="codeph">SET_CONTEXT</code>覆盖此值。
                                    </p>
                                 </li>
                                 <li>
                                    <p>请注意，上下文值中的任何更改都会立即反映，后续通过<code class="codeph">SYS_CONTEXT</code>函数访问该值的调用将返回最新值。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><span class="bold">由用户执行。</span> 创建包后，用户需要在登录时执行包。您可以创建登录触发器以在用户登录时自动执行程序包，也可以在应用程序中嵌入此功能。请记住，当用户结束会话时，将自动清除应用程序上下文会话值，因此您无需手动删除会话数据。
                              </p>
                           </li>
                        </ul>
                        <p>重要的是要记住该过程是一个受信任的过程：它旨在防止用户设置自己的应用程序上下文属性值。用户运行该过程，但该过程设置应用程序上下文值，而不是用户。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-FB3C6D57-3714-4CD4-8678-A29539382876__GUID-1DB9E02C-59F7-45CA-A47C-FD7A531775ED">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">SYS_CONTEXT</code>函数的详细信息，请<a href="../sqlrf/SYS_CONTEXT.html#SQLRF06117" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                              </li>
                              <li>
                                 <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-6F6FE37D-8D2D-4D0E-A5AA-C96D958F8BD5" title="本教程演示如何创建应用程序上下文，以检查尝试登录数据库的用户的ID。">教程：创建和使用基于数据库会话的应用程序上下文</a>显示了如何创建基于数据库会话的应用程序上下文</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-490E8823-64A9-4439-B80D-88001438D560" title="PL / SQL包可用于检索会话信息并设置应用程序上下文的名称 - 值属性。">创建包以设置基于数据库会话的应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG178"></a><div class="props_rev_3"><a id="GUID-BB59A1A8-D3C2-4620-A941-91AD37CEDF12" name="GUID-BB59A1A8-D3C2-4620-A941-91AD37CEDF12"></a><h5 id="DBSEG-GUID-BB59A1A8-D3C2-4620-A941-91AD37CEDF12" class="sect5">使用SYS_CONTEXT函数检索会话信息</h5>
                     <div>
                        <p>您可以使用<code class="codeph">SYS_CONTEXT</code>函数检索应用程序上下文的会话信息。
                        </p>
                        <div class="section">
                           <p><code class="codeph">SYS_CONTEXT</code>函数提供默认命名空间<code class="codeph">USERENV</code> ，它描述了登录用户的当前会话。<code class="codeph">SYS_CONTEXT</code>使您可以检索有关用户的不同类型的基于会话的信息，例如用户主机计算机ID，主机IP地址，操作系统用户名等。请记住，您只使用<code class="codeph">USERENV</code>来<span class="italic">检索</span>会话数据，而不是<span class="italic">设置</span>它。预定义的属性列在<a href="../sqlrf/SYS_CONTEXT.html#SQLRF06117" target="_blank"><span><cite>Oracle数据库SQL语言参考中</cite></span></a>的PL / SQL函数的描述中。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要使用检索会话信息，请设置命名空间，参数和（可选） <code class="codeph">SYS_CONTEXT</code>函数的长度值。
                                 </p>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">SYS_CONTEXT（'USERENV'，'主机'）</pre></li>
                           </ul>
                           <p>PL / SQL函数<code class="codeph">SYS_CONTEXT</code>的语法如下：</p><pre class="oac_no_warn" dir="ltr">SYS_CONTEXT（' <span class="italic">namespace</span> '，' <span class="italic">parameter</span> '[， <span class="italic">length</span> ]）</pre><p>在本规范中：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="italic"><code class="codeph">namespace</code></span>是应用程序上下文的名称。您可以指定字符串或计算结果为字符串的表达式。<code class="codeph">SYS_CONTEXT</code>函数返回当前时刻与上下文命名空间关联的参数值。如果已经设置了名称空间中参数的值，则<code class="codeph">SET_CONTEXT</code>覆盖此值。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">parameter</code></span>是<span class="italic"><code class="codeph">namespace</code></span>应用程序上下文中的参数。该值可以是字符串或表达式。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">length</code></span>是返回类型的默认最大大小，即256个字节，但您可以通过指定最多4000个字节的值来覆盖长度。输入<code class="codeph">NUMBER</code>数据类型的值，或者可以隐式转换为<code class="codeph">NUMBER</code> 。 <code class="codeph">SYS_CONTEXT</code>返回类型的数据类型是<code class="codeph">VARCHAR2</code> 。此设置是可选的。
                                 </p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-BB59A1A8-D3C2-4620-A941-91AD37CEDF12__GUID-0869D29F-1DB3-459E-95C5-0A4261768E4C">
                              <p class="notep1">注意：</p>
                              <p><code class="codeph">USERENV</code>应用程序上下文命名空间取代了早期Oracle数据库版本中提供的<code class="codeph">USERENV</code>函数。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-490E8823-64A9-4439-B80D-88001438D560" title="PL / SQL包可用于检索会话信息并设置应用程序上下文的名称 - 值属性。">创建包以设置基于数据库会话的应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG1031"></a><div class="props_rev_3"><a id="GUID-A9A66E6A-14B6-4A9D-828D-0858BB8E4F90" name="GUID-A9A66E6A-14B6-4A9D-828D-0858BB8E4F90"></a><h5 id="DBSEG-GUID-A9A66E6A-14B6-4A9D-828D-0858BB8E4F90" class="sect5">检查SYS_CONTEXT设置</h5>
                     <div>
                        <p>您可以检查存储在<code class="codeph">DUAL</code>表中的<code class="codeph">SYS_CONTEXT</code>设置。
                        </p>
                        <div class="section">
                           <p><code class="codeph">DUAL</code>表是数据字典中的一个小表，Oracle数据库和用户编写的程序可以引用该表来保证已知结果。该表有一列名为<code class="codeph">DUMMY</code> ，另一行包含值<code class="codeph">X</code></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要检查<code class="codeph">SYS_CONTEXT</code>设置，请在<code class="codeph">DUAL</code>表上发出<code class="codeph">SELECT</code> SQL语句。
                                 </p>
                              </li>
                           </ul>
                           <p>例如，要找到您登录主机，假设您登录到<code class="codeph">SHOBEEN_PC</code>下主机<code class="codeph">EMP_USERS</code> ：</p><pre class="oac_no_warn" dir="ltr">SELECT SYS_CONTEXT（'USERENV'，'HOST'）FROM DUAL; SYS_CONTEXT（USERENV，HOST）------------------------- EMP_USERS \ SHOBEEEN_PC</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-490E8823-64A9-4439-B80D-88001438D560" title="PL / SQL包可用于检索会话信息并设置应用程序上下文的名称 - 值属性。">创建包以设置基于数据库会话的应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG180"></a><div class="props_rev_3"><a id="GUID-D3E2E03C-6B63-4541-9B11-613E81E0B872" name="GUID-D3E2E03C-6B63-4541-9B11-613E81E0B872"></a><h5 id="DBSEG-GUID-D3E2E03C-6B63-4541-9B11-613E81E0B872" class="sect5">使用SYS_CONTEXT的动态SQL</h5>
                     <div>
                        <p>在您希望在给定查询的执行之间更改策略的会话期间，查询必须使用动态SQL。</p>
                        <p>您必须使用动态SQL，因为静态SQL和动态SQL解析语句的方式不同：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在编译时解析静态SQL语句。出于性能原因，它们在执行时不会再次解析。</p>
                           </li>
                           <li>
                              <p>每次执行时都会解析动态SQL语句。</p>
                           </li>
                        </ul>
                        <p>考虑编译SQL语句时策略A生效的情况，然后切换到策略B并运行该语句。使用静态SQL，策略A仍然有效。Oracle数据库在编译时解析该语句，但在执行时不会再次解析它。使用动态SQL，Oracle数据库在执行时解析语句，然后切换到策略B生效。</p>
                        <p>例如，请考虑以下策略：</p><pre class="oac_no_warn" dir="ltr">EMPLOYEE_NAME = SYS_CONTEXT（'USERENV'，'SESSION_USER'）</pre><p>策略<code class="codeph">EMPLOYEE_NAME</code>与数据库用户名匹配。它以Oracle虚拟专用数据库中的SQL谓词的形式表示：谓词被视为策略。如果谓词发生更改，则必须再次解析该语句以生成正确的结果。
                        </p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="using-oracle-vpd-to-control-data-access.html#GUID-F03172A8-730B-48EC-A904-FE747761863B" title="对使用细粒度访问控制启用的对象的查询运行策略函数，以便为每个策略使用最新谓词。">自动重新分析细粒度访问控制策略的功能</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-490E8823-64A9-4439-B80D-88001438D560" title="PL / SQL包可用于检索会话信息并设置应用程序上下文的名称 - 值属性。">创建包以设置基于数据库会话的应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="DBSEG14002"></a><div class="props_rev_3"><a id="GUID-8469C2F8-4424-4281-AA9A-F233588CE9AF" name="GUID-8469C2F8-4424-4281-AA9A-F233588CE9AF"></a><h5 id="DBSEG-GUID-8469C2F8-4424-4281-AA9A-F233588CE9AF" class="sect5">并行查询中的SYS_CONTEXT</h5>
                     <div>
                        <p>如果在嵌入在并行查询中的SQL函数内使用<code class="codeph">SYS_CONTEXT</code> ，则该函数包括应用程序上下文。
                        </p>
                        <p>考虑SQL语句中的用户定义函数，该函数将用户ID设置为5：</p><pre class="oac_no_warn" dir="ltr">CREATE FUNCTION set_id如果SYS_CONTEXT（'hr'，'id'）= 5那么返回数字是否为返回1; ELSE RETURN 2;万一;结束;</pre><p>现在考虑以下声明：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM emp WHERE set_id（）= 1;</pre><p>当此语句作为并行查询运行时，包含应用程序上下文信息的用户会话将传播到并行执行服务器（查询子进程）。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-490E8823-64A9-4439-B80D-88001438D560" title="PL / SQL包可用于检索会话信息并设置应用程序上下文的名称 - 值属性。">创建包以设置基于数据库会话的应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG181"></a><div class="props_rev_3"><a id="GUID-DEA99DFA-FED5-4C18-858C-06350FF59AF7" name="GUID-DEA99DFA-FED5-4C18-858C-06350FF59AF7"></a><h5 id="DBSEG-GUID-DEA99DFA-FED5-4C18-858C-06350FF59AF7" class="sect5">带数据库链接的SYS_CONTEXT</h5>
                     <div>
                        <p><code class="codeph">SYS_CONTEXT</code>函数与数据库链接的使用兼容。
                        </p>
                        <p>当用户会话中的SQL语句涉及数据库链接时，Oracle数据库在数据库链接的主机上运行<code class="codeph">SYS_CONTEXT</code>函数，然后在主机中捕获上下文信息。
                        </p>
                        <p>如果在数据库链接上运行远程PL / SQL过程调用，则Oracle数据库在链接的目标数据库中的此类过程内运行任何<code class="codeph">SYS_CONTEXT</code>函数。
                        </p>
                        <p>在这种情况下，只有外部初始化的应用程序上下文在数据库链接目标站点上可用。出于安全原因，Oracle数据库仅从启动数据库链接站点将外部初始化的应用程序上下文信息传播到目标站点。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-490E8823-64A9-4439-B80D-88001438D560" title="PL / SQL包可用于检索会话信息并设置应用程序上下文的名称 - 值属性。">创建包以设置基于数据库会话的应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG182"></a><div class="props_rev_3"><a id="GUID-5648314E-4CB9-4911-876F-759C3EACB0A9" name="GUID-5648314E-4CB9-4911-876F-759C3EACB0A9"></a><h5 id="DBSEG-GUID-5648314E-4CB9-4911-876F-759C3EACB0A9" class="sect5">DBMS_SESSION.SET_CONTEXT用于设置会话信息</h5>
                     <div>
                        <p>在<code class="codeph">SYS_CONTEXT</code>检索用户的会话数据后，您可以从用户会话中设置应用程序上下文值。
                        </p>
                        <p>要设置上下文值，可以使用<code class="codeph">DBMS_SESSION.SET_CONTEXT</code>过程。您必须具有<code class="codeph">DBMS_SESSION</code> PL / SQL包的<code class="codeph">EXECUTE</code>特权。
                        </p>
                        <p><code class="codeph">DBMS_SESSION.SET_CONTEXT</code>的语法如下：</p><pre class="oac_no_warn" dir="ltr">DBMS_SESSION.SET_CONTEXT（名称空间VARCHAR2，属性VARCHAR2，值VARCHAR2，用户名VARCHAR2，client_id VARCHAR2）;</pre><p>在本规范中：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">namespace</code>是要设置的应用程序上下文的名称空间，限制为30个字节。例如，如果您使用名为<code class="codeph">custno_ctx</code>的命名空间，则<code class="codeph">custno_ctx</code>如下方式指定：</p><pre class="oac_no_warn" dir="ltr">namespace =&gt;'custno_ctx'，</pre></li>
                           <li>
                              <p><code class="codeph">attribute</code>是要设置的应用程序上下文的属性，限制为30个字节。例如，要为<code class="codeph">custno_ctx</code>命名空间创建<code class="codeph">ctx_attrib</code>属性：</p><pre class="oac_no_warn" dir="ltr">attribute =&gt;'ctx_attrib'，</pre></li>
                           <li>
                              <p><code class="codeph">value</code>是要设置的应用程序上下文的值，限制为4000个字节。通常，这是<code class="codeph">SYS_CONTEXT</code>函数检索并存储在变量中的值。例如：</p><pre class="oac_no_warn" dir="ltr">value =&gt; ctx_value，</pre></li>
                           <li>
                              <p><code class="codeph">username</code>是应用程序上下文的数据库用户名属性。默认值为<code class="codeph">NULL</code> ，允许任何用户访问会话。对于基于数据库会话的应用程序上下文，请省略此设置，以使其使用<code class="codeph">NULL</code>默认值。此设置是可选的。
                              </p>
                              <p><code class="codeph">username</code>和<code class="codeph">client_id</code>参数用于全局访问的应用程序上下文。有关更多信息，请参阅<a href="using-application-contexts-to-retrieve-user-information.html#GUID-A1A09E1A-7D2F-4407-8A6E-688E64A663F8" title="DBMS_SESSION.SYS_CONTEXT过程提供client_id和username参数，用于全局应用程序上下文。">DBMS_SESSION.SET_CONTEXT用户名和client_id参数</a> 。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">client_id</code>是应用程序上下文的特定于应用程序的<code class="codeph">client_id</code>属性（最大64字节）。默认值为<code class="codeph">NULL</code> ，表示未指定客户端ID。对于基于数据库会话的应用程序上下文，请省略此设置，以使其使用<code class="codeph">NULL</code>默认值。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-5648314E-4CB9-4911-876F-759C3EACB0A9__GUID-501A1D94-20DB-4A56-A45E-18B25BDFE79F">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-6F6FE37D-8D2D-4D0E-A5AA-C96D958F8BD5" title="本教程演示如何创建应用程序上下文，以检查尝试登录数据库的用户的ID。">教程：创建和使用基于数据库会话的应用程序上下文</a> ，了解如何创建检索用户会话信息的包，然后根据此信息设置应用程序上下文</p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">DBMS_SESSION.SET_CONTEXT</code>过程的详细信息，请<code class="codeph">DBMS_SESSION.SET_CONTEXT</code> <a href="../arpls/DBMS_SESSION.html#ARPLS054" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">DBMS_SESSION</code>包的详细信息，请<code class="codeph">DBMS_SESSION</code> <a href="../arpls/DBMS_SESSION.html#ARPLS054" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-490E8823-64A9-4439-B80D-88001438D560" title="PL / SQL包可用于检索会话信息并设置应用程序上下文的名称 - 值属性。">创建包以设置基于数据库会话的应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG183"></a><div class="props_rev_3"><a id="GUID-41D0A62A-367D-46E5-9522-9956233A263A" name="GUID-41D0A62A-367D-46E5-9522-9956233A263A"></a><h5 id="DBSEG-GUID-41D0A62A-367D-46E5-9522-9956233A263A" class="sect5">示例：创建应用程序上下文值的简单过程</h5>
                     <div>
                        <p>您可以在过程中使用<span class="apiname" translate="no">DBMS_SESSION.SET_CONTEXT</span>语句来设置应用程序上下文值。
                        </p>
                        <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-41D0A62A-367D-46E5-9522-9956233A263A__CIHCABHB">例11-1</a>显示了如何创建一个为<code class="codeph">empno_ctx</code>应用程序上下文创建属性的简单过程。
                        </p>
                        <div class="example" id="GUID-41D0A62A-367D-46E5-9522-9956233A263A__CIHCABHB">
                           <p class="titleinexample">例11-1创建应用程序上下文值的简单过程</p><pre class="oac_no_warn" dir="ltr">创建或替换过程set_empno_ctx_proc（emp_value IN VARCHAR2）是BEGIN DBMS_SESSION.SET_CONTEXT（'empno_ctx'，'empno_attrib'，emp_value）;结束; /</pre><p>在这个例子中：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">emp_value IN VARCHAR2</code>将<code class="codeph">emp_value</code>作为输入参数。此参数指定与应用程序上下文属性<code class="codeph">empno_attrib</code>关联的值。限制是4000字节。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">DBMS_SESSION.SET_CONTEXT('empno_ctx', 'empno_attrib', emp_value)</code>使用<code class="codeph">DBMS_SESSION.SET_CONTEXT</code>过程设置应用程序上下文的值，如下所示：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">'empno_ctx'</code>指的是应用程序上下文命名空间。将其名称用单引号括起来。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">'empno_attrib'</code>创建与应用程序上下文命名空间关联的属性。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">emp_value</code>指定<code class="codeph">empno_attrib</code>属性的值。这里，它指的是<code class="codeph">emp_value</code>参数。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                           <p>在此阶段，您可以运行<code class="codeph">set_empno_ctx_proc</code>过程来设置应用程序上下文：</p><pre class="oac_no_warn" dir="ltr">EXECUTE set_empno_ctx_proc（'42783'）;</pre><p>（在实际场景中，您将在过程本身中设置应用程序上下文值，以使其成为受信任的过程。此示例仅用于显示如何为演示目的设置数据。）</p>
                           <p>要检查应用程序上下文设置，请运行以下<code class="codeph">SELECT</code>语句：</p><pre class="oac_no_warn" dir="ltr">SELECT SYS_CONTEXT（'empno_ctx'，'empno_attrib'）empno_attrib FROM DUAL; EMPNO_ATTRIB -------------- 42783</pre><p>您还可以查询<code class="codeph">SESSION_CONTEXT</code>数据字典视图，以查找数据库实例的当前会话中的所有应用程序上下文设置。例如：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM SESSION_CONTEXT; NAMESPACE ATTRIBUTE VALUE ----------------------------------------------- --- EMPNO_CTX EMP_ID 42783</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-490E8823-64A9-4439-B80D-88001438D560" title="PL / SQL包可用于检索会话信息并设置应用程序上下文的名称 - 值属性。">创建包以设置基于数据库会话的应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="DBSEG60634"></a><div class="props_rev_3"><a id="GUID-580EE6B3-D244-4AAE-BBB5-BB606A456410" name="GUID-580EE6B3-D244-4AAE-BBB5-BB606A456410"></a><h4 id="DBSEG-GUID-580EE6B3-D244-4AAE-BBB5-BB606A456410" class="sect4">登录触发器以运行数据库会话应用程序上下文包</h4>
                  <div>
                     <p>用户登录数据库实例后必须运行数据库会话应用程序上下文包。</p>
                     <p>您可以创建一个自动处理此操作的登录触发器。您无需授予用户<code class="codeph">EXECUTE</code>权限即可运行该程序包。
                     </p>
                     <p>请注意以下事项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">如果登录触发器调用的PL / SQL程序包过程有任何未处理的异常或引发任何异常（例如，因为安全检查失败），则登录触发器将失败。</span> 当登录触发器失败时，登录失败，即拒绝用户登录数据库的权限。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">登录触发器可能会影响性能。</span> 此外，在为数据库创建示例模式用户之前，首先测试它的登录触发器。这样，如果出现错误，您可以轻松纠正错误。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">请注意如果您有一组不断变化的书籍，或者位置不断变化的情况。</span> 在这些情况下，可能无法立即拾取新属性值，您必须强制使用光标重新分析来拾取它们。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-580EE6B3-D244-4AAE-BBB5-BB606A456410__GUID-9D50F345-7809-421C-98BD-02F0B7ACFF01">
                        <p class="notep1">注意：</p>
                        <p>可以使用登录触发器，因为应在用户访问任何数据之前设置用户上下文（诸如<code class="codeph">EMPNO</code> ， <code class="codeph">GROUP</code> ， <code class="codeph">MANAGER</code> ）。
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="基于数据库会话的应用程序上下文使您可以检索有关用户的基于会话的信息。">使用基于数据库会话的应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG184"></a><div class="props_rev_3"><a id="GUID-ADAC8F4F-47B9-4BC0-8247-70F140E0A3CE" name="GUID-ADAC8F4F-47B9-4BC0-8247-70F140E0A3CE"></a><h4 id="DBSEG-GUID-ADAC8F4F-47B9-4BC0-8247-70F140E0A3CE" class="sect4">示例：创建简单登录触发器</h4>
                  <div>
                     <p><code class="codeph">CREATE TRIGGER</code>语句可以创建一个简单的登录触发器。
                     </p>
                     <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-ADAC8F4F-47B9-4BC0-8247-70F140E0A3CE__CIHBAGDG">例11-2</a>显示了一个执行PL / SQL过程的简单登录触发器。
                     </p>
                     <div class="example" id="GUID-ADAC8F4F-47B9-4BC0-8247-70F140E0A3CE__CIHBAGDG">
                        <p class="titleinexample">示例11-2创建简单登录触发器</p><pre class="oac_no_warn" dir="ltr">创建或替换TRIGGER set_empno_ctx_trig登录数据库BEGIN之后sec_mgr.set_empno_ctx_proc;结束;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="基于数据库会话的应用程序上下文使您可以检索有关用户的基于会话的信息。">使用基于数据库会话的应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG185"></a><div class="props_rev_3"><a id="GUID-0495E52D-8396-4F3D-9A69-636C88DF4622" name="GUID-0495E52D-8396-4F3D-9A69-636C88DF4622"></a><h4 id="DBSEG-GUID-0495E52D-8396-4F3D-9A69-636C88DF4622" class="sect4">示例：为生产环境创建登录触发器</h4>
                  <div>
                     <p><code class="codeph">CREATE TRIGGER</code>语句可以为生产环境创建登录触发器。
                     </p>
                     <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-0495E52D-8396-4F3D-9A69-636C88DF4622__CIHEEHID">例11-3</a>显示了如何创建使用<code class="codeph">WHEN OTHERS</code>异常的登录触发器。否则，如果PL / SQL逻辑中存在创建未处理异常的错误，则会阻止与数据库的所有连接。
                     </p>
                     <p>此示例显示<code class="codeph">WHEN OTHERS</code>异常，该异常将错误写入安全管理员架构中的表。在生产环境中，这比将输出发送到用户会话更安全，因为它可能容易受到安全攻击。
                     </p>
                     <div class="example" id="GUID-0495E52D-8396-4F3D-9A69-636C88DF4622__CIHEEHID">
                        <p class="titleinexample">示例11-3为生产环境创建登录触发器</p><pre class="oac_no_warn" dir="ltr">创建或替换TRIGGER set_empno_ctx_trig登录数据库BEGIN之后sec_mgr.set_empno_ctx_proc;除此之外的异常v_code：= SQLCODE; v_errm：= SUBSTR（SQLERRM，1,64）; - 调用另一个过程， - 用PRAGMA AUTONOMOUS_TRANSACTION声明， - 插入有关错误的信息。INSERT INTO sec_mgr.errors VALUES（v_code，v_errm，SYSTIMESTAMP）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="基于数据库会话的应用程序上下文使您可以检索有关用户的基于会话的信息。">使用基于数据库会话的应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG186"></a><div class="props_rev_3"><a id="GUID-CEE3B516-C036-4715-A472-01D0110AD95F" name="GUID-CEE3B516-C036-4715-A472-01D0110AD95F"></a><h4 id="DBSEG-GUID-CEE3B516-C036-4715-A472-01D0110AD95F" class="sect4">示例：为开发环境创建登录触发器</h4>
                  <div>
                     <p><code class="codeph">CREATE TRIGGER</code>语句可以为开发环境创建登录触发器。
                     </p>
                     <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-CEE3B516-C036-4715-A472-01D0110AD95F__CIHHDGJE">示例11-4</a>显示了如何为开发环境创建相同的登录触发器，您可能希望在其中输出用户会话的错误以进行调试。
                     </p>
                     <div class="example" id="GUID-CEE3B516-C036-4715-A472-01D0110AD95F__CIHHDGJE">
                        <p class="titleinexample">示例11-4为开发环境创建登录触发器</p><pre class="oac_no_warn" dir="ltr">创建TRIGGER set_empno_ctx_trig登录DATABASE BEGIN后sysadmin_ctx.set_empno_ctx_pkg.set_empno;其他等RAISE_APPLICATION_ERROR（-20000，'触发sysadmin_ctx.set_empno_ctx_trig违规。登录被拒绝。“）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="基于数据库会话的应用程序上下文使您可以检索有关用户的基于会话的信息。">使用基于数据库会话的应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG187"></a><div class="props_rev_3"><a id="GUID-6F6FE37D-8D2D-4D0E-A5AA-C96D958F8BD5" name="GUID-6F6FE37D-8D2D-4D0E-A5AA-C96D958F8BD5"></a><h4 id="DBSEG-GUID-6F6FE37D-8D2D-4D0E-A5AA-C96D958F8BD5" class="sect4">教程：创建和使用基于数据库会话的应用程序上下文</h4>
                  <div>
                     <p>本教程演示如何创建应用程序上下文，以检查尝试登录数据库的用户的ID。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-EA61C66F-D481-480B-B61C-4F34B1EA7E0B">步骤1：创建用户帐户并确保用户SCOTT处于活动状态</a><br>要开始本教程，您必须创建必要的数据库帐户并确保<code class="codeph">SCOTT</code>用户帐户处于活动状态。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-79039102-9AB9-4B68-A601-D4497692F3B2">步骤2：创建基于数据库会话的应用程序上下文</a><br>作为<code class="codeph">sysadmin_ctx</code>用户，您可以创建基于数据库会话的应用程序上下文。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-89E3A675-21F1-41A6-AE96-9E068CBF714C">步骤3：创建包以检索会话数据并设置应用程序上下文</a><br>接下来，您必须创建一个PL / SQL包来检索会话数据，然后设置应用程序上下文。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-AC5266B9-0FC6-47A8-B0BE-DBA5F8E5A62D">步骤4：为包创建登录触发器</a><br>登录触发器将在用户登录时执行。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-ADB55B22-DB05-4180-AD58-C397FE8FC033">第5步：测试应用程序上下文</a><br>现在组件都已就绪，您就可以测试应用程序上下文了。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-8327F4B9-FE89-4776-A54D-963F9D444C31">第6步：删除本教程的组件</a><br>如果您不再需要本教程的组件，则可以删除它们。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="基于数据库会话的应用程序上下文使您可以检索有关用户的基于会话的信息。">使用基于数据库会话的应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="DBSEG188"></a><div class="props_rev_3"><a id="GUID-EA61C66F-D481-480B-B61C-4F34B1EA7E0B" name="GUID-EA61C66F-D481-480B-B61C-4F34B1EA7E0B"></a><h5 id="DBSEG-GUID-EA61C66F-D481-480B-B61C-4F34B1EA7E0B" class="sect5">步骤1：创建用户帐户并确保用户SCOTT处于活动状态</h5>
                     <div>
                        <p>要开始本教程，您必须创建必要的数据库帐户并确保<code class="codeph">SCOTT</code>用户帐户处于活动状态。
                        </p>
                        <ol>
                           <li class="stepexpand"><span>以<code class="codeph">SYS</code>用户身份登录，并使用<code class="codeph">SYSDBA</code>管理权限进行连接。</span><div><pre class="oac_no_warn" dir="ltr">sqlplus sys as sysdba输入密码： <span class="italic">password</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>在多租户环境中，连接到相应的PDB。</span><div>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">CONNECT SYS @hrpdb AS SYSDBA输入密码： <span class="italic">password</span>
</pre><p>要查找可用的PDB，请运行<code class="codeph">show pdbs</code>命令。要检查当前PDB，请运行<code class="codeph">show con_name</code>命令。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>创建本地用户帐户<code class="codeph">sysadmin_ctx</code> ，该帐户将管理基于数据库会话的应用程序上下文。</span><div><pre class="oac_no_warn" dir="ltr">CREATE USER sysadmin_ctx IDENTIFIED BY <span class="italic">password</span> ;授予创建会话，创建任何背景，创建程序，创建触发器，管理数据库触发器到sysadmin_ctx;授予阅读HR.EMPLOYEES至sysadmin_ctx;在DBMS_SESSION上执行GRANT EXECUTE到sysadmin_ctx;</pre><p>请遵循<a href="configuring-authentication.html#GUID-AA1AA635-1CD5-422E-B8CA-681ED7C253CA" title="Oracle provides a set of minimum requirements for passwords.">密码最低要求中</a>的准则，使用安全<a href="configuring-authentication.html#GUID-AA1AA635-1CD5-422E-B8CA-681ED7C253CA" title="Oracle提供了一组密码的最低要求。">密码</a>替换<span class="italic"><code class="codeph">password</code></span> 。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>为Lisa Ozer创建以下用户帐户，该帐户在<code class="codeph">HR.EMPLOYEES</code>表中列为其电子邮件帐户的<code class="codeph">lozer</code> 。</span><div><pre class="oac_no_warn" dir="ltr">授予通过<span class="italic">密码</span>识别的LOZER创建会话;</pre><p>使用安全密码替换<span class="italic"><code class="codeph">password</code></span> 。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>示例用户<code class="codeph">SCOTT</code>也将在本教程中使用，因此请查询<code class="codeph">DBA_USERS</code>数据字典视图以确保<code class="codeph">SCOTT</code>的帐户状态为<code class="codeph">OPEN</code> 。</span><div><pre class="oac_no_warn" dir="ltr">SELECT USERNAME，ACCOUNT_STATUS FROM DBA_USERS WHERE USERNAME ='SCOTT';</pre><p>如果<code class="codeph">DBA_USERS</code>视图将用户<code class="codeph">SCOTT</code>列为已锁定且已过期，则输入以下语句以解锁<code class="codeph">SCOTT</code>帐户并为其创建新密码：</p><pre class="oac_no_warn" dir="ltr">更改用户SCOTT帐户解锁<span class="italic">密码</span>识别;</pre><p>输入安全的密码。为了提高安全性，请<span class="bold">不要</span>为<code class="codeph">SCOTT</code>帐户提供与以前版本的Oracle数据库相同的密码。有关创建密码的最低要求，请参阅<a href="configuring-authentication.html#GUID-AA1AA635-1CD5-422E-B8CA-681ED7C253CA" title="Oracle提供了一组密码的最低要求。">密码</a>的最低要求。
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-6F6FE37D-8D2D-4D0E-A5AA-C96D958F8BD5" title="本教程演示如何创建应用程序上下文，以检查尝试登录数据库的用户的ID。">教程：创建和使用基于数据库会话的应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG189"></a><div class="props_rev_3"><a id="GUID-79039102-9AB9-4B68-A601-D4497692F3B2" name="GUID-79039102-9AB9-4B68-A601-D4497692F3B2"></a><h5 id="DBSEG-GUID-79039102-9AB9-4B68-A601-D4497692F3B2" class="sect5">步骤2：创建基于数据库会话的应用程序上下文</h5>
                     <div>
                        <p>作为<code class="codeph">sysadmin_ctx</code>用户，您可以创建基于数据库会话的应用程序上下文。
                        </p>
                        <ol>
                           <li class="stepexpand"><span>以<code class="codeph">sysadmin_ctx</code>身份登录到SQL * Plus。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT sysadmin_ctx <span class="italic">- 或者，CONNECT sysadmin_ctx @hrpdb</span>输入密码： <span class="italic">password</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>使用以下语句创建应用程序上下文：</span><div><pre class="oac_no_warn" dir="ltr">CREATE CONTEXT empno_ctx使用set_empno_ctx_pkg;</pre><p>请记住，即使用户<code class="codeph">sysadmin_ctx</code>已创建此应用程序上下文， <code class="codeph">SYS</code>架构也拥有上下文。
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-6F6FE37D-8D2D-4D0E-A5AA-C96D958F8BD5" title="本教程演示如何创建应用程序上下文，以检查尝试登录数据库的用户的ID。">教程：创建和使用基于数据库会话的应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG190"></a><a id="DBSEG66353"></a><div class="props_rev_3"><a id="GUID-89E3A675-21F1-41A6-AE96-9E068CBF714C" name="GUID-89E3A675-21F1-41A6-AE96-9E068CBF714C"></a><h5 id="DBSEG-GUID-89E3A675-21F1-41A6-AE96-9E068CBF714C" class="sect5">步骤3：创建包以检索会话数据并设置应用程序上下文</h5>
                     <div>
                        <p>接下来，您必须创建一个PL / SQL包来检索会话数据，然后设置应用程序上下文。</p>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要创建包，请使用<code class="codeph">CREATE OR REPLACE PACKAGE</code>语句。
                                 </p>
                              </li>
                           </ul>
                           <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-89E3A675-21F1-41A6-AE96-9E068CBF714C__CIHHCEAJ">例11-5</a>显示了如何创建检索会话数据和设置应用程序上下文所需的包。在创建程序包之前，请确保您仍以用户<code class="codeph">sysadmin_ctx</code>身份登录。（您可以通过将光标定位在第一行中<code class="codeph">CREATE OR REPLACE</code>的开头来复制和粘贴此文本。）
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-89E3A675-21F1-41A6-AE96-9E068CBF714C__CIHHCEAJ">
                           <p class="titleinexample">示例11-5用于检索会话数据和设置数据库会话的包</p><pre class="pre codeblock"><code>CREATE或REPLACE PACKAGE set_empno_ctx_pkg IS PROCEDURE set_empno;结束; / CREATE OR REPLACE PACKAGE BODY set_empno_ctx_pkg IS PROCEDURE set_empno IS emp_id HR.EMPLOYEES.EMPLOYEE_ID％TYPE; BEGIN SELECT EMPLOYEE_ID INTO emp_id FROM HR.EMPLOYEES WHERE email = SYS_CONTEXT（'USERENV'，'SESSION_USER'）; DBMS_SESSION.SET_CONTEXT（'empno_ctx'，'employee_id'，emp_id）; NO_DATA_FOUND为零时的异常;结束;结束; /</code></pre><p>此包创建一个名为<code class="codeph">set_empno</code>的过程，该过程执行以下操作：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">emp_id HR.EMPLOYEES.EMPLOYEE_ID%TYPE</code>声明一个变量<code class="codeph">emp_id</code> ，用于存储登录用户的员工ID。它使用与<code class="codeph">HR.EMPLOYEES</code>的<code class="codeph">EMPLOYEE_ID</code>列相同的数据类型。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">SELECT EMPLOYEE_ID INTO emp_id FROM HR.EMPLOYEES</code>执行<code class="codeph">SELECT</code>语句，将存储在<code class="codeph">employee_id</code>列数据中的员工ID从<code class="codeph">HR.EMPLOYEES</code>表复制到<code class="codeph">emp_id</code>变量中。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">WHERE email = SYS_CONTEXT('USERENV', 'SESSION_USER')</code>使用<code class="codeph">WHERE</code>子句查找与会话用户的电子邮件帐户匹配的所有员工ID。<code class="codeph">SYS_CONTEXT</code>函数使用预定义的<code class="codeph">USERENV</code>上下文来检索用户会话ID，该ID与<code class="codeph">email</code>列数据相同。例如，Lisa Ozer的用户ID和电子邮件地址都是相同的： <code class="codeph">lozer</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">DBMS_SESSION.SET_CONTEXT('empno_ctx', 'employee_id', emp_id)</code>使用<code class="codeph">DBMS_SESSION.SET_CONTEXT</code>过程来设置应用程序上下文：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">'empno_ctx'</code> ：调用应用程序上下文<code class="codeph">empno_ctx</code> 。将<code class="codeph">empno_ctx</code>在单引号中。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">'employee_id'</code> ：通过命名<code class="codeph">employee_id</code>创建<code class="codeph">empno_ctx</code>应用程序上下文名称 - 值对的属性值。将<code class="codeph">employee_id</code>括在单引号中。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">emp_id</code> ：将<code class="codeph">employee_id</code>属性的值设置为<code class="codeph">emp_id</code>变量中存储的值。
                                       </p>
                                    </li>
                                 </ul>
                                 <p>总而言之， <code class="codeph">set_empno_ctx_pkg.set_empno</code>过程说：“获取用户的会话ID，然后将其与<code class="codeph">HR.EMPLOYEES</code>表中列出的任何用户的员工ID和电子邮件地址进行匹配。”</p>
                              </li>
                              <li>
                                 <p><code class="codeph">例外......WHEN_NO_DATA_FOUND</code>添加<code class="codeph">WHEN NO_DATA_FOUND</code>系统异常以捕获可能由<code class="codeph">SELECT</code>语句导致的任何<code class="codeph">no data found</code>错误。如果没有此异常，包和登录触发器将正常工作并根据需要设置应用程序上下文，但是除了<code class="codeph">HR.EMPLOYEES</code>表中列出的用户之外的任何非系统管理员用户将无法登录到数据库。其他用户应该能够登录到数据库，假设他们是有效的数据库用户。一旦设置了应用程序上下文信息，您就可以使用此会话信息来控制用户对特定应用程序的访问。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-6F6FE37D-8D2D-4D0E-A5AA-C96D958F8BD5" title="本教程演示如何创建应用程序上下文，以检查尝试登录数据库的用户的ID。">教程：创建和使用基于数据库会话的应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG191"></a><div class="props_rev_3"><a id="GUID-AC5266B9-0FC6-47A8-B0BE-DBA5F8E5A62D" name="GUID-AC5266B9-0FC6-47A8-B0BE-DBA5F8E5A62D"></a><h5 id="DBSEG-GUID-AC5266B9-0FC6-47A8-B0BE-DBA5F8E5A62D" class="sect5">步骤4：为包创建登录触发器</h5>
                     <div>
                        <p>登录触发器将在用户登录时执行。</p>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>作为用户<code class="codeph">sysadmin_ctx</code> ，为<code class="codeph">set_empno_ctx_pkg.set_empno</code>包过程创建登录触发器。
                                 </p>
                              </li>
                           </ul><pre class="oac_no_warn" dir="ltr">创建TRIGGER set_empno_ctx_trig登录DATABASE BEGIN后sysadmin_ctx.set_empno_ctx_pkg.set_empno;结束; /</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-6F6FE37D-8D2D-4D0E-A5AA-C96D958F8BD5" title="本教程演示如何创建应用程序上下文，以检查尝试登录数据库的用户的ID。">教程：创建和使用基于数据库会话的应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG192"></a><div class="props_rev_3"><a id="GUID-ADB55B22-DB05-4180-AD58-C397FE8FC033" name="GUID-ADB55B22-DB05-4180-AD58-C397FE8FC033"></a><h5 id="DBSEG-GUID-ADB55B22-DB05-4180-AD58-C397FE8FC033" class="sect5">第5步：测试应用程序上下文</h5>
                     <div>
                        <p>现在组件都已就绪，您就可以测试应用程序上下文了。</p>
                        <ol>
                           <li class="stepexpand"><span>以用户<code class="codeph">lozer</code>登录。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT lozer <span class="italic">- 或者，CONNECT lozer @ hrpdb</span>输入密码： <span class="italic">password</span>
</pre><p>当用户<code class="codeph">lozer</code>登录时， <code class="codeph">empno_ctx</code>应用程序上下文将收集其员工ID。您可以按如下方式检查：</p><pre class="oac_no_warn" dir="ltr">SELECT SYS_CONTEXT（'empno_ctx'，'employee_id'）emp_id FROM DUAL;</pre><p>应出现以下输出：</p><pre class="oac_no_warn" dir="ltr">EMP_ID ------------------------------------------------- ------- 168</pre></div>
                           </li>
                           <li class="stepexpand"><span>以<code class="codeph">SCOTT</code>用户身份登录。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT SCOTT <span class="italic">- 或者，连接SCOTT @ hrpdb</span>输入密码： <span class="italic">密码</span>
</pre><p>用户<code class="codeph">SCOTT</code>未在<code class="codeph">HR.EMPLOYEES</code>表中列为员工，因此<code class="codeph">empno_ctx</code>应用程序上下文无法为他收集员工ID。
                                 </p><pre class="oac_no_warn" dir="ltr">SELECT SYS_CONTEXT（'empno_ctx'，'employee_id'）emp_id FROM DUAL;</pre><p>应出现以下输出：</p><pre class="oac_no_warn" dir="ltr">EMP_ID ------------------------------------------------- -------</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>从这里，应用程序可以使用用户会话信息来确定用户可以在数据库中访问多少。您可以使用Oracle虚拟专用数据库来完成此任务。 。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="using-oracle-vpd-to-control-data-access.html#GUID-06022729-9210-4895-BF04-6177713C65A7" title="Oracle虚拟专用数据库（VPD）使您可以过滤访问数据的用户。">使用Oracle虚拟专用数据库控制数据访问</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-6F6FE37D-8D2D-4D0E-A5AA-C96D958F8BD5" title="本教程演示如何创建应用程序上下文，以检查尝试登录数据库的用户的ID。">教程：创建和使用基于数据库会话的应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="DBSEG193"></a><div class="props_rev_3"><a id="GUID-8327F4B9-FE89-4776-A54D-963F9D444C31" name="GUID-8327F4B9-FE89-4776-A54D-963F9D444C31"></a><h5 id="DBSEG-GUID-8327F4B9-FE89-4776-A54D-963F9D444C31" class="sect5">第6步：删除本教程的组件</h5>
                     <div>
                        <p>如果您不再需要本教程的组件，则可以删除它们。</p>
                        <ol>
                           <li class="stepexpand"><span>以<code class="codeph">SYS</code>身份连接<code class="codeph">SYSDBA</code>管理权限。</span><div><pre class="oac_no_warn" dir="ltr">将SYS作为SYSDBA连接<span class="italic">- 或者，连接SYS @hrpdb AS SYSDBA</span>输入密码： <span class="italic">password</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>删除用户<code class="codeph">sysadmin_ctx</code>和<code class="codeph">lozer</code> ：</span><div><pre class="oac_no_warn" dir="ltr">DROP USER sysadmin_ctx CASCADE; DROP USER lozer;</pre></div>
                           </li>
                           <li class="stepexpand"><span>删除应用程序上下文。</span><div><pre class="oac_no_warn" dir="ltr">DROP CONTEXT empno_ctx;</pre><p>请记住，即使<code class="codeph">sysadmin_ctx</code>创建了应用程序上下文，它也归<code class="codeph">SYS</code>架构所有。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>如果您愿意，请锁定并使<code class="codeph">SCOTT</code>过期，除非其他用户想要使用此帐户：</span><div><pre class="oac_no_warn" dir="ltr">ALTER USER SCOTT PASSWORD EXPIRE ACCOUNT LOCK;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-6F6FE37D-8D2D-4D0E-A5AA-C96D958F8BD5" title="本教程演示如何创建应用程序上下文，以检查尝试登录数据库的用户的ID。">教程：创建和使用基于数据库会话的应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="DBSEG70744"></a><div class="props_rev_3"><a id="GUID-115D80C9-8498-439B-8D18-6215ACB12005" name="GUID-115D80C9-8498-439B-8D18-6215ACB12005"></a><h4 id="DBSEG-GUID-115D80C9-8498-439B-8D18-6215ACB12005" class="sect4">从外部初始化基于数据库会话的应用程序上下文</h4>
                  <div>
                     <p>从外部初始化基于数据库会话的应用程序上下文会提高性能，因为应用程序上下文存储在用户全局区域（UGA）中。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-5A3A707B-1679-46E0-958A-404C0EB3B348">关于在外部初始化基于数据库会话的应用程序上下文</a><br>您必须使用特殊类型的命名空间在外部初始化基于会话的应用程序上下文。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-2605BCCC-43BF-42DE-8C11-BECD406F9C14">用户的默认值</a><br>Oracle数据库使您可以捕获和使用用户的默认值。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-2190964F-C68F-48FC-9CB6-1DD5D03CC41E">其他外部资源的价值</a><br>应用程序上下文可以通过外部资源接受属性和值的初始化。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-BA679A30-A319-4860-B0B8-9CDE0BD55182">示例：创建基于外部化数据库会话的应用程序上下文</a><br><code class="codeph">CREATE CONTEXT</code> SQL语句可以创建基于外部化数据库会话的应用程序上下文。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-7D0A7A59-814D-4B30-89AB-5691A0FF59E2">从中间层服务器初始化应用程序上下文值</a><br>中间层服务器可以代表数据库用户初始化应用程序上下文值。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="基于数据库会话的应用程序上下文使您可以检索有关用户的基于会话的信息。">使用基于数据库会话的应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="DBSEG1071"></a><div class="props_rev_3"><a id="GUID-5A3A707B-1679-46E0-958A-404C0EB3B348" name="GUID-5A3A707B-1679-46E0-958A-404C0EB3B348"></a><h5 id="DBSEG-GUID-5A3A707B-1679-46E0-958A-404C0EB3B348" class="sect5">关于在外部初始化基于数据库会话的应用程序上下文</h5>
                     <div>
                        <p>您必须使用特殊类型的命名空间在外部初始化基于会话的应用程序上下文。</p>
                        <p>此命名空间必须接受来自外部资源的属性值的初始化，然后将它们存储在本地用户会话中。</p>
                        <p>从外部初始化应用程序上下文可以提高性能，因为它存储在UGA中，可以将属性从一个会话自动传播到另一个会话。只有从基于OCI的外部源初始化的应用程序上下文才支持连接的用户数据库链接。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：在</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-115D80C9-8498-439B-8D18-6215ACB12005" title="从外部初始化基于数据库会话的应用程序上下文会提高性能，因为应用程序上下文存储在用户全局区域（UGA）中。">外部初始化基于数据库会话的应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG194"></a><div class="props_rev_3"><a id="GUID-2605BCCC-43BF-42DE-8C11-BECD406F9C14" name="GUID-2605BCCC-43BF-42DE-8C11-BECD406F9C14"></a><h5 id="DBSEG-GUID-2605BCCC-43BF-42DE-8C11-BECD406F9C14" class="sect5">用户的默认值</h5>
                     <div>
                        <p>Oracle数据库使您可以捕获和使用用户的默认值。</p>
                        <p>有时您需要用户的默认值。最初，这些默认值可能是提示或首选项，然后在验证后，它们将成为可信上下文。类似地，客户端初始化某些默认值，然后依赖登录事件触发器或应用程序来验证值可能更方便。</p>
                        <p>对于作业队列，作业提交例程记录在提交作业时设置的上下文，并在执行批处理作业时还原它。为了保持上下文的完整性，作业队列不能绕过指定的PL / SQL包来设置上下文。而是，外部初始化的应用程序上下文接受来自作业队列进程的上下文值的初始化。</p>
                        <p>将上下文自动传播到远程会话可能会产生安全问题。开发人员或管理员可以通过使用登录触发器在用户登录时重置上下文，有效地处理从指定的PL / SQL过程以外的资源获取默认值的上下文。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：在</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-115D80C9-8498-439B-8D18-6215ACB12005" title="从外部初始化基于数据库会话的应用程序上下文会提高性能，因为应用程序上下文存储在用户全局区域（UGA）中。">外部初始化基于数据库会话的应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG195"></a><div class="props_rev_3"><a id="GUID-2190964F-C68F-48FC-9CB6-1DD5D03CC41E" name="GUID-2190964F-C68F-48FC-9CB6-1DD5D03CC41E"></a><h5 id="DBSEG-GUID-2190964F-C68F-48FC-9CB6-1DD5D03CC41E" class="sect5">其他外部资源的价值</h5>
                     <div>
                        <p>应用程序上下文可以通过外部资源接受属性和值的初始化。</p>
                        <p>示例包括Oracle调用接口（OCI）接口，作业队列进程或数据库链接。</p>
                        <p>外部初始化的应用程序上下文提供以下功能：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对于远程会话，自动传播外部初始化的应用程序上下文命名空间中的上下文值</p>
                           </li>
                           <li>
                              <p>对于作业队列，还原外部初始化的应用程序上下文命名空间中的上下文值</p>
                           </li>
                           <li>
                              <p>对于OCI接口，一种初始化外部初始化的应用程序上下文命名空间中的上下文值的机制</p>
                           </li>
                        </ul>
                        <p>虽然使用Oracle Call Interface的任何客户端程序都可以初始化此类型的命名空间，但您可以使用登录事件触发器来验证值。应用程序可以解释和信任属性的值。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：在</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-115D80C9-8498-439B-8D18-6215ACB12005" title="从外部初始化基于数据库会话的应用程序上下文会提高性能，因为应用程序上下文存储在用户全局区域（UGA）中。">外部初始化基于数据库会话的应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG196"></a><div class="sect4"><a id="GUID-BA679A30-A319-4860-B0B8-9CDE0BD55182" name="GUID-BA679A30-A319-4860-B0B8-9CDE0BD55182"></a><h5 id="DBSEG-GUID-BA679A30-A319-4860-B0B8-9CDE0BD55182" class="sect5">示例：创建基于外部化数据库会话的应用程序上下文</h5>
                     <div>
                        <p><code class="codeph">CREATE CONTEXT</code> SQL语句可以创建基于外部化数据库会话的应用程序上下文。
                        </p>
                        <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-BA679A30-A319-4860-B0B8-9CDE0BD55182__CIHFBBFH">示例11-6</a>显示了如何创建从外部源获取值的基于数据库会话的应用程序上下文。
                        </p>
                        <div class="example" id="GUID-BA679A30-A319-4860-B0B8-9CDE0BD55182__CIHFBBFH">
                           <p class="titleinexample">示例11-6创建外部化数据库基于会话的应用程序上下文</p><pre class="oac_no_warn" dir="ltr">创建语境ext_ctx使用ext_ctx_pkg外部初始化;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：在</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-115D80C9-8498-439B-8D18-6215ACB12005" title="从外部初始化基于数据库会话的应用程序上下文会提高性能，因为应用程序上下文存储在用户全局区域（UGA）中。">外部初始化基于数据库会话的应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG197"></a><div class="props_rev_3"><a id="GUID-7D0A7A59-814D-4B30-89AB-5691A0FF59E2" name="GUID-7D0A7A59-814D-4B30-89AB-5691A0FF59E2"></a><h5 id="DBSEG-GUID-7D0A7A59-814D-4B30-89AB-5691A0FF59E2" class="sect5">从中间层服务器初始化应用程序上下文值</h5>
                     <div>
                        <p>中间层服务器可以代表数据库用户初始化应用程序上下文值。</p>
                        <p>在此过程中，在初始化时为远程会话传播上下文属性，如果命名空间在外部初始化，则远程数据库接受这些值。</p>
                        <p>例如，通过OCI或JDBC / OCI创建轻量级用户会话的三层应用程序可以访问<code class="codeph">USERENV</code>的<code class="codeph">PROXY_USER</code>属性。使用此属性可以确定用户会话是否是由中间层应用程序创建的。您可以允许用户仅访问代理用户的连接的数据。如果用户直接连接到数据库，那么他们将无法访问任何数据。
                        </p>
                        <p>您可以使用Oracle Virtual Private Database中<code class="codeph">USERENV</code>命名空间的<code class="codeph">PROXY_USER</code>属性来确保用户只能通过特定的中间层应用程序访问数据。对于不同的方法，您可以开发安全的应用程序角色来强制执行用户仅通过特定代理访问数据库的策略。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-7D0A7A59-814D-4B30-89AB-5691A0FF59E2__GUID-DC0A79E2-25B5-435D-AF70-BF985FB9ED66">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="configuring-authentication.html#GUID-94CF6D9C-08A0-4671-BD82-694EB67D06C9" title="您可以使用中间层服务器进行代理身份验证和客户端标识符，以识别数据库未知的应用程序用户。">在多区域环境中保留用户身份以</a>获取有关代理身份验证的信息以及使用<code class="codeph">USERENV</code>属性<code class="codeph">CLIENT_IDENTIFIER</code>在多个层中保留用户身份的信息</p>
                              </li>
                              <li>
                                 <p><a href="configuring-authentication.html#GUID-DC21CB47-D1B7-4ED9-B20A-16AE9C7FAAA7" title="Oracle调用接口（OCI），JDBC / OCI或JDBC精简驱动程序支持用于数据库用户或企业用户的代理身份验证的中间层。">中间层服务器用于代理身份验证，</a>以获取有关使用安全应用程序角色通过特定代理强制实施策略的信息</p>
                              </li>
                              <li>
                                 <p><a href="../lnoci/managing-scalable-platforms.html#LNOCI840" target="_blank"><span><cite>Oracle调用接口程序员指南</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：在</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-115D80C9-8498-439B-8D18-6215ACB12005" title="从外部初始化基于数据库会话的应用程序上下文会提高性能，因为应用程序上下文存储在用户全局区域（UGA）中。">外部初始化基于数据库会话的应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="DBSEG70745"></a><div class="props_rev_3"><a id="GUID-92F2E244-3516-4A52-AA31-D81F535E488C" name="GUID-92F2E244-3516-4A52-AA31-D81F535E488C"></a><h4 id="DBSEG-GUID-92F2E244-3516-4A52-AA31-D81F535E488C" class="sect4">全局初始化基于数据库会话的应用程序上下文</h4>
                  <div>
                     <p>当基于数据库会话的应用程序存储在集中位置时，可以从LDAP目录全局使用它。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-95E685B9-2C71-4D33-8880-AB8F5A2EBE04">关于在全局范围内初始化基于数据库会话的应用程序上下文</a><br>您可以使用集中位置来存储用户的基于数据库会话的应用程序上下文。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-85CEAB23-970B-4ABD-BEB2-CBCCE7115909">基于数据库会话的应用程序上下文与LDAP</a><br>全局初始化的应用程序上下文使用LDAP，一种标准，可扩展且高效的目录访问协议。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-743200E0-3697-4604-B1B5-B1BD54EFF27F">全局初始化基于数据库会话的应用程序上下文如何工作</a><br>要使用全局初始化的安全应用程序，必须先配置企业用户安全性。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-66D6590A-D405-4FE9-8095-B9183599494E">全局初始化基于数据库会话的应用程序上下文</a><br>您可以在LDAP目录中为用户配置和存储初始应用程序上下文，例如部门名称和标题。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="基于数据库会话的应用程序上下文使您可以检索有关用户的基于会话的信息。">使用基于数据库会话的应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="DBSEG559"></a><div class="props_rev_3"><a id="GUID-95E685B9-2C71-4D33-8880-AB8F5A2EBE04" name="GUID-95E685B9-2C71-4D33-8880-AB8F5A2EBE04"></a><h5 id="DBSEG-GUID-95E685B9-2C71-4D33-8880-AB8F5A2EBE04" class="sect5">关于在全局范围内初始化基于数据库会话的应用程序上下文</h5>
                     <div>
                        <p>您可以使用集中位置来存储用户的基于数据库会话的应用程序上下文。</p>
                        <p>集中式位置使应用程序能够在初始化期间根据用户身份设置用户上下文。</p>
                        <p>特别是，此功能支持Oracle Label Security标签和权限。全局初始化应用程序上下文可以更轻松地管理大量用户和数据库的上下文。</p>
                        <p>例如，许多组织希望在基于LDAP的目录中集中管理用户信息。Enterprise User Security支持Oracle Internet Directory中的集中用户和授权管理。但是，应用程序必须从轻量级目录访问协议（LDAP）中检索用于Oracle虚拟专用数据库实施的其他属性，例如用户标题，组织或物理位置。全局初始化应用程序上下文使您可以检索这些类型的属性。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-92F2E244-3516-4A52-AA31-D81F535E488C" title="当基于数据库会话的应用程序存储在集中位置时，可以从LDAP目录全局使用它。">在全局范围内初始化基于数据库会话的应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG199"></a><a id="DBSEG198"></a><div class="props_rev_3"><a id="GUID-85CEAB23-970B-4ABD-BEB2-CBCCE7115909" name="GUID-85CEAB23-970B-4ABD-BEB2-CBCCE7115909"></a><h5 id="DBSEG-GUID-85CEAB23-970B-4ABD-BEB2-CBCCE7115909" class="sect5">基于数据库会话的应用程序上下文与LDAP</h5>
                     <div>
                        <p>全局初始化的应用程序上下文使用LDAP，一种标准，可扩展且高效的目录访问协议。</p>
                        <p>LDAP目录存储分配了此应用程序的用户列表。Oracle数据库使用目录服务（通常是Oracle Internet Directory）来验证和授权企业用户。</p>
                        <div class="infoboxnote" id="GUID-85CEAB23-970B-4ABD-BEB2-CBCCE7115909__GUID-1E0B88CA-153B-4480-ACD4-06A0531842EC">
                           <p class="notep1">注意：</p>
                           <p>您可以使用第三方目录（如Microsoft Active Directory和Sun Microsystems SunONE）作为目录服务。</p>
                        </div>
                        <p><code class="codeph">orclDBApplicationContext</code> LDAP对象（ <code class="codeph">groupOfUniqueNames</code>的子类）将应用程序上下文值存储在目录中。<a href="using-application-contexts-to-retrieve-user-information.html#GUID-85CEAB23-970B-4ABD-BEB2-CBCCE7115909__BHAGIEHB">图11-1中</a>描述了应用程序上下文对象的位置，该对象基于人力资源示例。
                        </p>
                        <p>LDAP对象<code class="codeph">inetOrgPerson</code>允许某些属性存在多个条目。但是，请注意，当这些条目加载到数据库中并使用<code class="codeph">SYS_LDAP_USER_DEFAULT</code>上下文命名空间进行访问时，只返回第一个条目。例如，用户的<code class="codeph">inetOrgPerson</code>对象允许<code class="codeph">telephoneNumber</code>多个条目（从而允许用户存储多个电话号码）。使用<code class="codeph">SYS_LDAP_USER_DEFAULT</code>上下文命名空间时，仅检索第一个电话号码。如果提供的属性和值列表不足以满足您的需要，则可以使用<code class="codeph">DBMS_LDAP</code> PL / SQL包从目录中获取其他值。
                        </p>
                        <p>在LDAP端，需要内部C函数来检索<code class="codeph">orclDBApplicationContext</code>值，该值将应用程序上下文值列表返回给数据库。在此示例中， <code class="codeph">HR</code>是命名空间; <code class="codeph">Title</code>和<code class="codeph">Project</code>是属性; <code class="codeph">Manager</code>和<code class="codeph">Promotion</code>是价值观。
                        </p>
                        <div class="figure" id="GUID-85CEAB23-970B-4ABD-BEB2-CBCCE7115909__BHAGIEHB">
                           <p class="titleinfigure">图11-1 LDAP目录信息树中应用程序上下文的位置</p><img src="img/adfns001.gif" alt="下面是图11-1的描述" title="下面是图11-1的描述" longdesc="img_text/adfns001.html"><br><a href="img_text/adfns001.html">“图11-1 LDAP目录信息树中应用程序上下文的位置”的描述</a></div>
                        <!-- class="figure" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-92F2E244-3516-4A52-AA31-D81F535E488C" title="当基于数据库会话的应用程序存储在集中位置时，可以从LDAP目录全局使用它。">在全局范围内初始化基于数据库会话的应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG200"></a><div class="props_rev_3"><a id="GUID-743200E0-3697-4604-B1B5-B1BD54EFF27F" name="GUID-743200E0-3697-4604-B1B5-B1BD54EFF27F"></a><h5 id="DBSEG-GUID-743200E0-3697-4604-B1B5-B1BD54EFF27F" class="sect5">全局初始化基于数据库会话的应用程序上下文如何工作</h5>
                     <div>
                        <p>要使用全局初始化的安全应用程序，必须先配置企业用户安全性。</p>
                        <p>然后，在数据库和目录中为用户配置应用程序上下文值。</p>
                        <p>当全局用户（企业用户）连接到数据库时，Enterprise User Security会验证连接到数据库的用户的身份。身份验证后，将从目录中检索全局用户角色和应用程序上下文。当用户登录到数据库时，已设置全局角色和初始应用程序上下文。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-743200E0-3697-4604-B1B5-B1BD54EFF27F__GUID-90D5531D-7F54-4740-9FC7-4D91E5A7E74B">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../dbimi/enterprise-user-security-configuration-tasks-and-troubleshooting.html#DBIMI150" target="_blank"><span><cite>“Oracle数据库企业用户安全性管理员指南”，</cite></span></a>以获取有关配置企业用户安</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-92F2E244-3516-4A52-AA31-D81F535E488C" title="当基于数据库会话的应用程序存储在集中位置时，可以从LDAP目录全局使用它。">在全局范围内初始化基于数据库会话的应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG201"></a><div class="props_rev_3"><a id="GUID-66D6590A-D405-4FE9-8095-B9183599494E" name="GUID-66D6590A-D405-4FE9-8095-B9183599494E"></a><h5 id="DBSEG-GUID-66D6590A-D405-4FE9-8095-B9183599494E" class="sect5">全局初始化基于数据库会话的应用程序上下文</h5>
                     <div>
                        <p>您可以在LDAP目录中为用户配置和存储初始应用程序上下文，例如部门名称和标题。</p>
                        <div class="section">
                           <p>在用户登录期间检索这些值，以便正确设置上下文。此外，检索与用户相关的任何信息并将其存储在<code class="codeph">SYS_USER_DEFAULTS</code>应用程序上下文命名空间中。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>在数据库中创建应用程序上下文。</span><div><pre class="oac_no_warn" dir="ltr">使用hrapps.hr_manage_pkg创建上下文小时全局初始化;</pre></div>
                           </li>
                           <li class="stepexpand"><span>在LDAP目录中创建和添加新条目。</span><div>
                                 <p>下面是添加到LDAP目录的条目示例。这些条目使用应用程序（名称空间） <code class="codeph">HR</code>的属性值<code class="codeph">Manager</code>创建名为<code class="codeph">Title</code>的属性，并为用户名<code class="codeph">user1</code>和<code class="codeph">user2</code>分配。在下文中， <code class="codeph">cn=example</code>表示域的名称。
                                 </p><pre class="oac_no_warn" dir="ltr">dn：cn = OracleDBAppContext，cn = example，cn = OracleDBSecurity，cn = Products，cn = OracleContext，ou = Americas，o = oracle，c = US changetype：add cn：OracleDBAppContext objectclass：top objectclass：orclContainer dn：cn = hr ，cn = OracleDBAppContext，cn = example，cn = OracleDBSecurity，cn = Products，cn = OracleContext，ou = Americas，o = oracle，c = US changetype：add cn：hr objectclass：top objectclass：orclContainer dn：cn = Title， cn = hr，cn = OracleDBAppContext，cn = example，cn = OracleDBSecurity，cn = Products，cn = OracleContext，ou = Americas，o = oracle，c = US changetype：add cn：Title objectclass：top objectclass：orclContainer dn：cn = Manager，cn = Title，cn = hr，cn = OracleDBAppContext，cn = example，cn = OracleDBSecurity，cn = Products，cn = OracleContext，ou = Americas，o = oracle，c = US cn：Manager objectclass：top objectclass： groupofuniquenames objectclass：orclDBApplicationContext uniquemember：CN = user1，OU = Americas，O = Oracle，L = Redwoodshores，ST = CA，C = US uniquemember：CN = user2，OU = Americas，O = Oracle，L = Redwoodshores，ST = CA ，C = US</pre><p></p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>如果用户存在LDAP <code class="codeph">inetOrgPerson</code>对象条目，则连接将从<code class="codeph">inetOrgPerson</code>检索属性，并将它们分配给命名空间<code class="codeph">SYS_LDAP_USER_DEFAULT</code> 。请注意，上下文仅使用属于<code class="codeph">inetOrgPerson</code>对象类的非<code class="codeph">NULL</code>值填充。不会填充其他属性。</span><div>
                                 <p>以下是<code class="codeph">inetOrgPerson</code>条目的示例：</p><pre class="oac_no_warn" dir="ltr">dn：cn = user1，ou = Americas，O = oracle，L = redwoodshores，ST = CA，C = US changetype：add objectClass：top objectClass：person objectClass：organizationalPerson objectClass：inetOrgPerson cn：user1 sn：one givenName：User initials ：UO标题：经理，产品开发uid：uone mail：uone@us.example.com telephoneNumber：+1 650 555 0105 employeeNumber：00001 employeeType：全职</pre><p></p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>连接到数据库。</span><div>
                                 <p>当<code class="codeph">user1</code>连接到属于<code class="codeph">example</code>域的数据库时， <code class="codeph">user1</code>将其<code class="codeph">Title</code>设置为<code class="codeph">Manager</code> 。将从LDAP目录中检索与<code class="codeph">user1</code>相关的任何信息。可以使用以下语法获取该值：</p><pre class="oac_no_warn" dir="ltr">SYS_CONTEXT（' <span class="italic">命名空间</span> '，' <span class="italic">属性名</span> '）</pre><p>例如：</p><pre class="oac_no_warn" dir="ltr">DECLARE tmpstr1 VARCHAR2（30）; tmpstr2 VARCHAR2（30）; BEGIN tmpstr1 = SYS_CONTEXT（'HR'，'TITLE）; tmpstr2 = SYS_CONTEXT（'SYS_LDAP_USER_DEFAULT'，'telephoneNumber'）; DBMS_OUTPUT.PUT_LINE（'标题是'|| tmpstr1）; DBMS_OUTPUT.PUT_LINE（'电话号码'|| tmpstr2）;结束;</pre><p>这个例子的输出是：</p><pre class="oac_no_warn" dir="ltr">标题是经理电话号码是+1 650 555 0105</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-92F2E244-3516-4A52-AA31-D81F535E488C" title="当基于数据库会话的应用程序存储在集中位置时，可以从LDAP目录全局使用它。">在全局范围内初始化基于数据库会话的应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="DBSEG202"></a><div class="props_rev_3"><a id="GUID-CE34F5E2-76F5-44C5-B71D-7F6AD6B73D40" name="GUID-CE34F5E2-76F5-44C5-B71D-7F6AD6B73D40"></a><h4 id="DBSEG-GUID-CE34F5E2-76F5-44C5-B71D-7F6AD6B73D40" class="sect4">基于外部化数据库会话的应用程序上下文</h4>
                  <div>
                     <p>许多应用程序在数据库元数据表中存储用于细粒度访问控制的属性。</p>
                     <p>例如， <code class="codeph">employees</code>表可以包括成本中心，标题，签名权限以及对细粒度访问控制有用的其他信息。组织还集中用户信息，以便在基于LDAP的目录（例如Oracle Internet Directory）中进行用户管理和访问控制。应用程序上下文属性可以存储在Oracle Internet Directory中，并分配给一个或多个企业用户。它们也可以在登录企业用户时自动检索，然后用于初始化应用程序上下文。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-CE34F5E2-76F5-44C5-B71D-7F6AD6B73D40__GUID-9C0A3A4A-5029-48C4-A3D3-96172B44C9FA">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>从外部初始化<a href="using-application-contexts-to-retrieve-user-information.html#GUID-115D80C9-8498-439B-8D18-6215ACB12005" title="从外部初始化基于数据库会话的应用程序上下文会提高性能，因为应用程序上下文存储在用户全局区域（UGA）中。">基于数据库会话的应用程序上下文，</a>以获取有关通过外部资源（如OCI接口，作业队列进程或数据库链接）初始化本地应用程序上下文的信息</p>
                           </li>
                           <li>
                              <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-92F2E244-3516-4A52-AA31-D81F535E488C" title="当基于数据库会话的应用程序存储在集中位置时，可以从LDAP目录全局使用它。">在全局范围内初始化基于数据库会话的应用程序上下文，</a>以获取有关通过集中式资源（如Oracle Internet Directory）初始化本地应用程序上下文的信息</p>
                           </li>
                           <li>
                              <p><a href="../dbimi/introducing-enterprise-user-security.html#DBIMI152" target="_blank"><span><cite>“Oracle数据库企业用户安全管理员指南”</cite></span></a> ，了解有关企业用户的信息</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="基于数据库会话的应用程序上下文使您可以检索有关用户的基于会话的信息。">使用基于数据库会话的应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="DBSEG70005"></a><div class="props_rev_3"><a id="GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6" name="GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6"></a><h3 id="DBSEG-GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6" class="sect3">全球应用程序上下文</h3>
               <div>
                  <p>您可以使用全局应用程序上下文跨数据库会话访问应用程序值，包括Oracle Real Application Clusters环境。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-84D31ED7-EF4B-4467-AAF9-9EDDCF09FB1A">关于全球应用程序上下文</a><br>全局应用程序上下文使应用程序上下文值可以跨数据库会话访问，包括Oracle RAC实例。
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-20BFC484-5A4E-47CC-9A5D-F4E9367577EC">用于全球应用程序上下文</a><br>全局应用程序上下文有三种常规用法。
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-A21F1DDA-8E0E-4B17-9770-B0CD46C74664">全局应用程序上下文的组件</a><br>全局应用程序上下文使用包来管理其属性，使用中间层应用程序来管理客户端会话ID。</li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-1BC71E53-B267-4661-AC4E-F14FDC524983">Oracle Real Application Clusters环境中的全局应用程序上下文</a><br>在Oracle RAC环境中，每当加载或更改全局应用程序上下文时，它仅对现有活动实例可见。
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-F532A86A-DB97-4D38-8606-68868AFC9BD4">创建全局应用程序上下文</a><br><code class="codeph">CREATE CONTEXT</code> SQL语句创建全局应用程序上下文，然后该上下文位于<code class="codeph">SYS</code>模式中。
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-38FA1A00-CA96-4BC4-AE3A-68893B5BDD80">用于管理全局应用程序上下文的PL / SQL包</a><br>用于管理全局应用程序上下文的<code class="codeph">DBMS_SESSION</code> PL / SQL包。
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-82E6BFA4-8A78-4EBE-86E5-222237183C15">在中间层应用程序中嵌入调用以管理客户机会话ID</a><br>您可以在中间层应用程序中嵌入调用来管理客户端会话ID。
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-BF276A5E-BC14-4B49-A02A-2EC984325805">教程：创建使用客户端会话ID的全局应用程序上下文</a><br>本教程演示了如何创建使用客户端会话ID的全局应用程序上下文。</li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-BCE6DEDC-E0AD-4EEB-8FC3-EE89CBB40E61">全局应用程序上下文进程</a><br>一个简单的全局应用程序上下文使用数据库用户帐户创建用户会话;全局应用程序上下文适用于轻量级用户。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-51C9D5FA-6787-4F05-82EF-A5968BEDC5A0" title="应用程序上下文存储可以启用或阻止用户访问数据库中的数据的用户标识。">使用应用程序上下文检索用户信息</a></p>
                     </div>
                  </div>
               </div>
               <a id="DBSEG203"></a><div class="props_rev_3"><a id="GUID-84D31ED7-EF4B-4467-AAF9-9EDDCF09FB1A" name="GUID-84D31ED7-EF4B-4467-AAF9-9EDDCF09FB1A"></a><h4 id="DBSEG-GUID-84D31ED7-EF4B-4467-AAF9-9EDDCF09FB1A" class="sect4">关于全球应用程序上下文</h4>
                  <div>
                     <p>全局应用程序上下文使应用程序上下文值可以跨数据库会话访问，包括Oracle RAC实例。</p>
                     <p>Oracle数据库将全局应用程序上下文信息存储在系统（有时称为“共享”）全局区域（SGA）中，以便它可以用于使用无会话模型的应用程序，例如三层体系结构中的中间层应用程序。</p>
                     <p>这些应用程序无法使用基于会话的应用程序上下文，因为用户对应用程序进行身份验证，然后它通常作为单个标识连接到数据库。Oracle数据库初始化一次全局应用程序上下文，而不是每个用户会话。这样可以提高性能，因为连接可以从连接池中重用。</p>
                     <p>您可以通过运行<code class="codeph">ALTER SYSTEM FLUSH GLOBAL_CONTEXT</code> SQL语句来清除全局应用程序上下文值。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6" title="您可以使用全局应用程序上下文跨数据库会话访问应用程序值，包括Oracle Real Application Clusters环境。">全局应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-20BFC484-5A4E-47CC-9A5D-F4E9367577EC" name="GUID-20BFC484-5A4E-47CC-9A5D-F4E9367577EC"></a><h4 id="DBSEG-GUID-20BFC484-5A4E-47CC-9A5D-F4E9367577EC" class="sect4">用于全球应用程序上下文</h4>
                  <div>
                     <p>全局应用程序上下文有三种常规用法。</p>
                     <p>这些用途如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">您必须为所有数据库用户全局共享应用程序值。</span> 例如，您可能需要根据特定情况禁用对应用程序的访问。在这种情况下，应用程序上下文设置的值不是特定于用户的，也不是基于用户的私有数据。应用程序上下文定义了一种情况，例如，指示正在运行的应用程序模块的版本。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">您有数据库用户必须从一个应用程序移动到另一个应用程序</span> 在这种情况下，用户移动到的第二个应用程序具有与第一个应用程序不同的访问要求。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">您必须对非数据库用户（即数据库不知道的用户）进行身份验证。</span> 此类用户（没有数据库帐户）通常使用连接池通过Web应用程序进行连接。这些类型的应用程序使用One Big Application User身份验证模型将用户作为单个用户连接到数据库。要对此类用户进行身份验证，请使用该用户的客户端会话ID。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6" title="您可以使用全局应用程序上下文跨数据库会话访问应用程序值，包括Oracle Real Application Clusters环境。">全局应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-A21F1DDA-8E0E-4B17-9770-B0CD46C74664" name="GUID-A21F1DDA-8E0E-4B17-9770-B0CD46C74664"></a><h4 id="DBSEG-GUID-A21F1DDA-8E0E-4B17-9770-B0CD46C74664" class="sect4">全局应用程序上下文的组件</h4>
                  <div>
                     <p>全局应用程序上下文使用包来管理其属性，使用中间层应用程序来管理客户端会话ID。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">全局应用程序上下文。</span> 您可以使用<code class="codeph">CREATE CONTEXT</code> SQL语句创建全局应用程序上下文，并在语句中包含<code class="codeph">ACCESSED GLOBALLY</code>子句。此语句命名应用程序上下文，并将其与用于设置应用程序数据上下文数据的PL / SQL过程相关联。创建全局应用程序上下文并将其存储在创建它的安全管理员的数据库模式中。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">用于设置属性的PL / SQL包。</span> 该包必须包含使用<code class="codeph">DBMS_SESSION.SET_CONTEXT</code>过程设置全局应用程序上下文的过程。<code class="codeph">SET_CONTEXT</code>过程提供的参数使您能够创建适合本节中描述的三种用户情况中的任何一种的全局应用程序上下文。您可以在数据库服务器上创建，存储和运行PL / SQL包。通常，它属于创建它的安全管理员的模式。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">用于获取和设置客户端会话ID的中间层应用程序。</span>对于需要对客户端会话ID进行身份验证的非数据库用户，可以使用中间层应用程序中的Oracle调用接口（OCI）调用来检索和设置其会话数据。您还可以使用<code class="codeph">DBMS_SESSION.SET_IDENTIFIER</code>过程来设置客户端会话ID。创建用于存储非数据库用户名的客户端会话ID的一个优点是，您可以查询<code class="codeph">DBA_AUDIT_TRAIL</code> ， <code class="codeph">DBA_FGA_AUDIT_TRAIL</code>和<code class="codeph">DBA_COMMON_AUDIT_TRAIL</code>数据字典视图的<code class="codeph">CLIENT_ID</code>列以审核此用户的活动。
                           </p>
                           <div class="infoboxnote" id="GUID-A21F1DDA-8E0E-4B17-9770-B0CD46C74664__GUID-B9A0D994-EC51-4AB5-8DA9-95937DE96323">
                              <p class="notep1">注意：</p>
                              <p>请注意， <code class="codeph">DBMS_APPLICATION_INFO.SET_CLIENT_INFO</code>设置可以覆盖该值。
                              </p>
                           </div>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="configuring-authentication.html#GUID-E229BFB0-43FB-49DD-803D-760E4EE658D5" title="DBMS_SESSION PL / SQL包管理中间层和数据库本身的客户端标识符。">使用DBMS_SESSION PL / SQL包来设置和清除客户端标识符</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6" title="您可以使用全局应用程序上下文跨数据库会话访问应用程序值，包括Oracle Real Application Clusters环境。">全局应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="DBSEG584"></a><div class="props_rev_3"><a id="GUID-1BC71E53-B267-4661-AC4E-F14FDC524983" name="GUID-1BC71E53-B267-4661-AC4E-F14FDC524983"></a><h4 id="DBSEG-GUID-1BC71E53-B267-4661-AC4E-F14FDC524983" class="sect4">Oracle Real Application Clusters环境中的全局应用程序上下文</h4>
                  <div>
                     <p>在Oracle RAC环境中，每当加载或更改全局应用程序上下文时，它仅对现有活动实例可见。</p>
                     <p>请注意，在Oracle RAC环境中设置全局应用程序上下文值会产生性能开销，即将上下文值一致地传播到所有Oracle RAC实例。</p>
                     <p>如果在一个Oracle RAC实例中刷新全局应用程序上下文（使用<code class="codeph">ALTER SYSTEM FLUSH GLOBAL_CONTEXT</code> SQL语句），则所有其他Oracle RAC实例中的所有全局应用程序上下文也会刷新。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6" title="您可以使用全局应用程序上下文跨数据库会话访问应用程序值，包括Oracle Real Application Clusters环境。">全局应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG204"></a><div class="props_rev_3"><a id="GUID-F532A86A-DB97-4D38-8606-68868AFC9BD4" name="GUID-F532A86A-DB97-4D38-8606-68868AFC9BD4"></a><h4 id="DBSEG-GUID-F532A86A-DB97-4D38-8606-68868AFC9BD4" class="sect4">创建全局应用程序上下文</h4>
                  <div>
                     <p><code class="codeph">CREATE CONTEXT</code> SQL语句创建全局应用程序上下文，然后该上下文位于<code class="codeph">SYS</code>模式中。
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-6A158C09-730F-437B-800C-13F835D40E22">全球应用背景的所有权</a><br>全局应用程序上下文由<code class="codeph">SYS</code>架构拥有。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-E8DB3FFA-A482-4C53-848B-A8BB21F04219">创建全局应用程序上下文</a><br>与本地应用程序上下文一样，全局应用程序上下文将创建并存储在安全管理员的数据库模式中。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6" title="您可以使用全局应用程序上下文跨数据库会话访问应用程序值，包括Oracle Real Application Clusters环境。">全局应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="DBSEG1034"></a><div class="props_rev_3"><a id="GUID-6A158C09-730F-437B-800C-13F835D40E22" name="GUID-6A158C09-730F-437B-800C-13F835D40E22"></a><h5 id="DBSEG-GUID-6A158C09-730F-437B-800C-13F835D40E22" class="sect5">全球应用背景的所有权</h5>
                     <div>
                        <p>全局应用程序上下文由<code class="codeph">SYS</code>架构拥有。
                        </p>
                        <p>全局应用程序上下文的所有权如下所示：即使已被授予<code class="codeph">CREATE ANY CONTEXT</code>和<code class="codeph">DROP ANY CONTEXT</code>权限的用户可以创建和删除全局应用程序上下文，它也归<code class="codeph">SYS</code>模式所有。
                        </p>
                        <p>Oracle数据库将上下文与创建它的模式帐户相关联，但如果删除此用户，则上下文仍存在于<code class="codeph">SYS</code>模式中。作为用户<code class="codeph">SYS</code> ，您可以删除应用程序上下文。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-F532A86A-DB97-4D38-8606-68868AFC9BD4" title="CREATE CONTEXT SQL语句创建全局应用程序上下文，然后该上下文位于SYS模式中。">创建全局应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG1048"></a><div class="props_rev_3"><a id="GUID-E8DB3FFA-A482-4C53-848B-A8BB21F04219" name="GUID-E8DB3FFA-A482-4C53-848B-A8BB21F04219"></a><h5 id="DBSEG-GUID-E8DB3FFA-A482-4C53-848B-A8BB21F04219" class="sect5">创建全局应用程序上下文</h5>
                     <div>
                        <p>与本地应用程序上下文一样，全局应用程序上下文将创建并存储在安全管理员的数据库模式中。</p>
                        <div class="section">
                           <p>您必须具有<code class="codeph">CREATE ANY CONTEXT</code>系统特权才能创建全局应用程序上下文，并且必须具有<code class="codeph">DROP ANY CONTEXT</code>特权才能使用<code class="codeph">DROP CONTEXT</code>语句<code class="codeph">DROP CONTEXT</code> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要创建全局应用程序上下文，请使用<code class="codeph">CREATE CONTEXT</code> SQL语句创建应用程序上下文，并在语句中包含<code class="codeph">ACCESSED GLOBALLY</code>子句。
                                 </p>
                              </li>
                           </ul>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">创建或替换上下文global_hr_ctx使用hr_ctx_pkg访问全球容器=全部;</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-F532A86A-DB97-4D38-8606-68868AFC9BD4" title="CREATE CONTEXT SQL语句创建全局应用程序上下文，然后该上下文位于SYS模式中。">创建全局应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="DBSEG206"></a><div class="props_rev_3"><a id="GUID-38FA1A00-CA96-4BC4-AE3A-68893B5BDD80" name="GUID-38FA1A00-CA96-4BC4-AE3A-68893B5BDD80"></a><h4 id="DBSEG-GUID-38FA1A00-CA96-4BC4-AE3A-68893B5BDD80" class="sect4">用于管理全局应用程序上下文的PL / SQL包</h4>
                  <div>
                     <p>用于管理全局应用程序上下文的<code class="codeph">DBMS_SESSION</code> PL / SQL包。
                     </p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-280970AB-BC5E-40FE-85A3-3724017E9417">关于管理全局应用程序上下文的包</a><br>与全局应用程序上下文关联的程序包使用<code class="codeph">DBMS_SESSION</code>程序包来设置和清除全局应用程序上下文值。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-075BCAB6-8462-4825-B738-B81F31DF033A">版本如何影响全局应用程序上下文PL / SQL包的结果</a><br>全局应用程序上下文包，Oracle虚拟专用数据库包和细粒度审计策略可用于多个版本。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-A1A09E1A-7D2F-4407-8A6E-688E64A663F8">DBMS_SESSION.SET_CONTEXT用户名和client_id参数</a><br><code class="codeph">DBMS_SESSION.SYS_CONTEXT</code>过程提供<code class="codeph">client_id</code>和<code class="codeph">username</code>参数，用于全局应用程序上下文。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-DAFAB260-B04F-4311-BA6B-A19A49AE8640">共享所有数据库用户的全局应用程序上下文值</a><br>您可以共享所有数据库用户的全局应用程序值，以便他们访问数据库中的数据。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-5A6B636E-E712-4094-AD24-5174F07608B1">示例：用于管理所有数据库用户的全局应用程序值的包</a><br><code class="codeph">CREATE PACKAGE</code>语句可以管理所有数据库用户的全局应用程序值。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-347946B7-D66D-4346-8EF8-F06F12AB6F83">在应用程序之间移动的数据库用户的全局上下文</a><br>即使应用程序具有不同的访问要求，全局应用程序上下文也可用于在应用程序之间移动的数据库用户。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-59436329-F584-4410-B6EE-B1A481278141">非数据库用户的全局应用程序上下文</a><br>当非数据库用户启动客户端会话时，应用程序服务器会生成客户端会话ID。</li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-32003F45-C354-49F4-9BC7-812E469B941B">示例：用于管理非数据库用户的全局应用程序上下文值的程序包</a><br><code class="codeph">CREATE PACKAGE</code>语句可以管理非数据库用户的全局应用程序上下文值。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-AAFC08F3-DE49-4F3D-A692-61B90A6E5C76">会话关闭时清除会话数据</a><br>应用程序上下文存在于内存中，因此当用户退出会话时，必须清除<code class="codeph">client_identifier</code>上下文值。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6" title="您可以使用全局应用程序上下文跨数据库会话访问应用程序值，包括Oracle Real Application Clusters环境。">全局应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="DBSEG207"></a><div class="props_rev_3"><a id="GUID-280970AB-BC5E-40FE-85A3-3724017E9417" name="GUID-280970AB-BC5E-40FE-85A3-3724017E9417"></a><h5 id="DBSEG-GUID-280970AB-BC5E-40FE-85A3-3724017E9417" class="sect5">关于管理全局应用程序上下文的包</h5>
                     <div>
                        <p>与全局应用程序上下文关联的程序包使用<code class="codeph">DBMS_SESSION</code>程序包来设置和清除全局应用程序上下文值。
                        </p>
                        <p>在使用其过程之前，必须具有<code class="codeph">DBMS_SESSION</code>程序包的<code class="codeph">EXECUTE</code>特权。通常，您可以在安全管理员的数据库模式中创建和存储此程序包。<code class="codeph">SYS</code>架构拥有<code class="codeph">DBMS_SESSION</code>包。
                        </p>
                        <p>与用于设置本地应用程序上下文的PL / SQL包不同，您不包含<code class="codeph">SYS_CONTEXT</code>函数来获取用户会话数据。您不需要包含此功能，因为记录在<code class="codeph">USERENV</code>上下文中的会话所有者对于每个正在连接的用户都是相同的。
                        </p>
                        <p>您可以随时在PL / SQL包中运行全局应用程序上下文的过程。您无需创建登录和注销触发器来执行与全局应用程序上下文关联的包过程。通常的做法是从数据库应用程序中运行包过程。此外，对于非数据库用户，您使用中间层应用程序来获取和设置客户端会话ID。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-280970AB-BC5E-40FE-85A3-3724017E9417__GUID-0EFB083C-A74F-4416-A406-76B17C0A7135">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">DBMS_SESSION</code>包的详细信息，请<code class="codeph">DBMS_SESSION</code> <a href="../arpls/DBMS_SESSION.html#ARPLS054" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-38FA1A00-CA96-4BC4-AE3A-68893B5BDD80" title="用于管理全局应用程序上下文的DBMS_SESSION PL / SQL包。">用于管理全局应用程序上下文的PL / SQL包</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG208"></a><div class="props_rev_3"><a id="GUID-075BCAB6-8462-4825-B738-B81F31DF033A" name="GUID-075BCAB6-8462-4825-B738-B81F31DF033A"></a><h5 id="DBSEG-GUID-075BCAB6-8462-4825-B738-B81F31DF033A" class="sect5">版本如何影响全局应用程序上下文PL / SQL包的结果</h5>
                     <div>
                        <p>全局应用程序上下文包，Oracle虚拟专用数据库包和细粒度审计策略可用于多个版本。</p>
                        <p>请遵循以下准则：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">如果您希望PL / SQL包的结果在所有版本中都相同。</span> 为此，请在未启用版本的用户的架构中创建包。要查找未启用版本的用户，可以查询<code class="codeph">DBA_USERS</code>和<code class="codeph">USER_USERS</code>数据字典视图。请记住， <code class="codeph">DBA_REGISTRY</code>数据字典视图中列出的<code class="codeph">SYS</code> ， <code class="codeph">SYSTEM</code>和其他默认Oracle数据库管理帐户不能也不能启用版本。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">如果您希望PL / SQL包结果取决于运行包的版本的当前状态。</span> 此处，包适用的所有版本的结果可能不同。在这种情况下，请在已启用版本的用户的架构中创建包。如果架构是启用了版本，那么很可能在不同版本中将有不同的包实际副本，其中每个副本具有不同的行为。这对以下类型的方案很有用：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>包必须使用新的应用程序上下文。</p>
                                 </li>
                                 <li>
                                    <p>包必须使用不同的方案对输入值进行编码。</p>
                                 </li>
                                 <li>
                                    <p>程序包必须为登录数据库的用户应用不同的验证规则。</p>
                                 </li>
                              </ul>
                              <p>对于设置全局应用程序上下文的PL / SQL包，使用单个getter函数来包装将读取键值应用程序上下文对的原语<code class="codeph">SYS_CONTEXT</code>调用。您可以将此getter函数放在与应用程序上下文setter过程相同的包中。此方法允许您标记应用程序上下文键的值以反映相关概念。例如，标签可以是setter功能实际的版本。或者，它可以是设置上下文的会话的当前版本，您可以使用<code class="codeph">SYS_CONTEXT('USERENV', 'CURRENT_EDITION_NAME')</code>找到该上下文。此标记可以是setter函数适用的任何特定概念。
                              </p>
                              <div class="infoboxnotealso" id="GUID-075BCAB6-8462-4825-B738-B81F31DF033A__GUID-A150F24F-9B29-401E-B444-F349581FDEF6">
                                 <p class="notep1">也可以看看：</p>
                                 <p>有关版本的详细信息，请参见<a href="../adfns/editions.html#ADFNS020" target="_blank"><span><cite>“Oracle数据库开发指南</cite></span></a></p>
                              </div>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-38FA1A00-CA96-4BC4-AE3A-68893B5BDD80" title="用于管理全局应用程序上下文的DBMS_SESSION PL / SQL包。">用于管理全局应用程序上下文的PL / SQL包</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG209"></a><a id="DBSEG77432"></a><div class="props_rev_3"><a id="GUID-A1A09E1A-7D2F-4407-8A6E-688E64A663F8" name="GUID-A1A09E1A-7D2F-4407-8A6E-688E64A663F8"></a><h5 id="DBSEG-GUID-A1A09E1A-7D2F-4407-8A6E-688E64A663F8" class="sect5">DBMS_SESSION.SET_CONTEXT用户名和client_id参数</h5>
                     <div>
                        <p><code class="codeph">DBMS_SESSION.SYS_CONTEXT</code>过程提供<code class="codeph">client_id</code>和<code class="codeph">username</code>参数，用于全局应用程序上下文。
                        </p>
                        <div class="section">
                           <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-A1A09E1A-7D2F-4407-8A6E-688E64A663F8__CIHJGGGF" title="设置DBMS_SESSION.SYS_CONTEXT用户名和client_id参数的结果">表11-2</a>说明了这些设置的组合如何控制您可以创建的全局应用程序上下文的类型。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformalwide" id="GUID-A1A09E1A-7D2F-4407-8A6E-688E64A663F8__CIHJGGGF">
                           <p class="titleintable">表11-2设置DBMS_SESSION.SET_CONTEXT用户名和client_id参数</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="设置DBMS_SESSION.SET_CONTEXT用户名和client_id参数" width="100%" border="1" summary="Results of Setting the DBMS_SESSION.SYS_CONTEXT username and client_id Parameters" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d84552e9890">组合设置</th>
                                    <th align="left" valign="bottom" width="69%" id="d84552e9893">结果</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d84552e9898" headers="d84552e9890 ">
                                       <p><code class="codeph">username</code>设置为<code class="codeph">NULL</code></p>
                                       <p><code class="codeph">client_id</code>设置为<code class="codeph">NULL</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d84552e9898 d84552e9893 ">
                                       <p>此组合使所有用户都可以访问应用程序上下文。有关更多信息，请参阅<a href="using-application-contexts-to-retrieve-user-information.html#GUID-DAFAB260-B04F-4311-BA6B-A19A49AE8640" title="您可以共享所有数据库用户的全局应用程序值，以便他们访问数据库中的数据。">为所有数据库用户共享全局应用程</a>
                                       </p>
                                       <p>这些设置也用于基于数据库会话的应用程序上下文。有关更多信息，请参阅<a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CD6D7E1-C30C-4009-A68F-553DA072DDBC" title="基于数据库会话的应用程序上下文使您可以检索有关用户的基于会话的信息。">使用基于数据库会话的应用程序上下文</a> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d84552e9929" headers="d84552e9890 ">
                                       <p><code class="codeph">username</code>设置为值</p>
                                       <p><code class="codeph">client_id</code>设置为<code class="codeph">NULL</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d84552e9929 d84552e9893 ">
                                       <p>只要<code class="codeph">username</code>设置始终相同，此组合就可以通过多个会话访问应用程序上下文。确保指定的用户名是有效的数据库用户。有关详细信息，请参阅<a href="using-application-contexts-to-retrieve-user-information.html#GUID-347946B7-D66D-4346-8EF8-F06F12AB6F83" title="即使应用程序具有不同的访问要求，全局应用程序上下文也可用于在应用程序之间移动的数据库用户。">在应用程序之间移动的数据库用户的全局上下文</a> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d84552e9953" headers="d84552e9890 ">
                                       <p><code class="codeph">username</code>设置为<code class="codeph">NULL</code></p>
                                       <p><code class="codeph">client_id</code>设置为值</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d84552e9953 d84552e9893 ">
                                       <p>只要<code class="codeph">client_id</code>参数始终设置为相同的值，此组合就可以通过多个用户会话访问应用程序。这使所有用户的会话能够查看应用程序上下文值。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d84552e9971" headers="d84552e9890 ">
                                       <p><code class="codeph">username</code>设置为值</p>
                                       <p><code class="codeph">client_id</code>设置为值</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d84552e9971 d84552e9893 ">
                                       <p>此组合可实现以下两种方案：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><span class="bold">轻量级用户。</span> 如果用户没有数据库帐户，则指定的用户名是连接池所有者。然后， <code class="codeph">client_id</code>设置与正在登录的非数据库用户相关联。
                                             </p>
                                          </li>
                                          <li>
                                             <p><span class="bold">数据库用户。</span> 如果用户是数据库用户，则此组合可用于无状态Web会话。
                                             </p>
                                          </li>
                                       </ul>
                                       <p>将<code class="codeph">SET_CONTEXT</code>过程中的<code class="codeph">username</code>参数设置为<code class="codeph">USER</code>调用Oracle数据库提供的<code class="codeph">USER</code>函数。<code class="codeph">USER</code>函数从应用程序上下文检索过程指定会话所有者，并确保只有设置应用程序上下文的用户才能访问上下文。有关<code class="codeph">USER</code>函数的更多信息，请参见<a href="../sqlrf/USER.html#SQLRF06156" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> 。
                                       </p>
                                       <p>有关详细信息，请参阅<a href="using-application-contexts-to-retrieve-user-information.html#GUID-59436329-F584-4410-B6EE-B1A481278141" title="当非数据库用户启动客户端会话时，应用程序服务器会生成客户端会话ID。">Nondatabase用户的全局应用程序上下文</a> 。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-38FA1A00-CA96-4BC4-AE3A-68893B5BDD80" title="用于管理全局应用程序上下文的DBMS_SESSION PL / SQL包。">用于管理全局应用程序上下文的PL / SQL包</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG210"></a><div class="props_rev_3"><a id="GUID-DAFAB260-B04F-4311-BA6B-A19A49AE8640" name="GUID-DAFAB260-B04F-4311-BA6B-A19A49AE8640"></a><h5 id="DBSEG-GUID-DAFAB260-B04F-4311-BA6B-A19A49AE8640" class="sect5">共享所有数据库用户的全局应用程序上下文值</h5>
                     <div>
                        <p>您可以共享所有数据库用户的全局应用程序值，以便他们访问数据库中的数据。</p>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要共享所有数据库用户的全局应用程序值，请在<code class="codeph">SET_CONTEXT</code>过程中设置<code class="codeph">namespace</code> ， <code class="codeph">attribute</code>和<code class="codeph">value</code>参数。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="using-application-contexts-to-retrieve-user-information.html#GUID-5A6B636E-E712-4094-AD24-5174F07608B1" title="CREATE PACKAGE语句可以管理所有数据库用户的全局应用程序值。">示例：用于管理所有数据库用户的全局应用程序值的包</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-38FA1A00-CA96-4BC4-AE3A-68893B5BDD80" title="用于管理全局应用程序上下文的DBMS_SESSION PL / SQL包。">用于管理全局应用程序上下文的PL / SQL包</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="DBSEG211"></a><div class="props_rev_3"><a id="GUID-5A6B636E-E712-4094-AD24-5174F07608B1" name="GUID-5A6B636E-E712-4094-AD24-5174F07608B1"></a><h5 id="DBSEG-GUID-5A6B636E-E712-4094-AD24-5174F07608B1" class="sect5">示例：用于管理所有数据库用户的全局应用程序值的包</h5>
                     <div>
                        <p><code class="codeph">CREATE PACKAGE</code>语句可以管理所有数据库用户的全局应用程序值。
                        </p>
                        <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-5A6B636E-E712-4094-AD24-5174F07608B1__CIHCBBCI">例11-7</a>显示了如何创建一个包，为所有数据库用户设置和清除全局应用程序上下文。
                        </p>
                        <div class="example" id="GUID-5A6B636E-E712-4094-AD24-5174F07608B1__CIHCBBCI">
                           <p class="titleinexample">示例11-7用于管理所有数据库用户的全局应用程序值的程序包</p><pre class="oac_no_warn" dir="ltr">创建或替换包hr_ctx_pkg AS PROCEDURE set_hr_ctx（sec_level IN VARCHAR2）;程序clear_hr_context;结束; / CREATE OR REPLACE PACKAGE BODY hr_ctx_pkg AS PROCEDURE set_hr_ctx（sec_level IN VARCHAR2）AS BEGIN DBMS_SESSION.SET_CONTEXT（namespace =&gt;'global_hr_ctx'，attribute =&gt;'job_role'，value =&gt; sec_level）; END set_hr_ctx;程序clear_hr_context AS BEGIN DBMS_SESSION.CLEAR_CONTEXT（'global_hr_ctx'，'job_role'）; END clear_context;结束; /</pre><p>在这个例子中：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">DBMS_SESSION.SET_CONTEXT ......END set_hr_ctx</code>使用<code class="codeph">DBMS_SESSION.SET_CONTEXT</code>过程来设置<code class="codeph">namespace</code> ， <code class="codeph">attribute</code>和<code class="codeph">value</code>参数的<code class="codeph">value</code> 。当数据库应用程序运行<code class="codeph">hr_ctx_pkg.set_hr_ctx</code>过程时，将指定<code class="codeph">sec_level</code>值。
                                 </p>
                                 <p>未设置<code class="codeph">username</code>和<code class="codeph">client_id</code>值，因此它们为<code class="codeph">NULL</code> 。这使所有用户（数据库用户）都可以访问这些值，这适用于服务器范围的设置。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">namespace =&gt; 'global_hr_ctx'</code>在<code class="codeph">SET_CONTEXT</code>过程中将<code class="codeph">namespace</code>设置为<code class="codeph">global_hr_ctx</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">attribute =&gt; 'job_role'</code>创建<code class="codeph">job_role</code>属性。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">value =&gt; sec_level</code>将<code class="codeph">job_role</code>属性的值设置为<code class="codeph">sec_level</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">PROCEDURE clear_hr_context</code>创建<code class="codeph">clear_hr_context</code>过程以清除上下文值。有关详细<a href="using-application-contexts-to-retrieve-user-information.html#GUID-AAFC08F3-DE49-4F3D-A692-61B90A6E5C76" title="The application context exists within memory, so when the user exits a session, you must clear the client_identifier context value.">信息，</a>请参阅<a href="using-application-contexts-to-retrieve-user-information.html#GUID-AAFC08F3-DE49-4F3D-A692-61B90A6E5C76" title="应用程序上下文存在于内存中，因此当用户退出会话时，必须清除client_identifier上下文值。">会话关闭时清除会话数据</a> 。
                                 </p>
                              </li>
                           </ul>
                           <p>通常，您在数据库应用程序中执行此过程。例如，如果登录的所有用户都是职员，并且您希望使用“职员”作为安全级别，则可以在数据库应用程序中嵌入一个类似于以下内容的调用：</p><pre class="oac_no_warn" dir="ltr">BEGIN hr_ctx_pkg.set_hr_ctx（'职员'）;结束; /</pre><p>如果过程成功完成，则可以按如下方式检查应用程序上下文值：</p><pre class="oac_no_warn" dir="ltr">SELECT SYS_CONTEXT（'global_hr_ctx'，'job_role'）job_role FROM DUAL; JOB_ROLE -----------职员</pre><p>您可以通过运行以下过程清除所有数据库用户的全局应用程序上下文值：</p><pre class="oac_no_warn" dir="ltr">BEGIN hr_ctx_pkg.clear_hr_context;结束; /</pre><p>要检查是否确实清除了全局上下文值，以下<code class="codeph">SELECT</code>语句不应返回任何值：</p><pre class="oac_no_warn" dir="ltr">SELECT SYS_CONTEXT（'global_hr_ctx'，'job_role'）job_role FROM DUAL;职业角色  -  -  -  -  - -</pre><p>如果Oracle数据库返回错误消息，指出您没有足够的权限，请确保已正确创建全局应用程序上下文。您还应该查询<code class="codeph">DBA_CONTEXT</code>数据库视图以确保您的设置正确，例如，您从您创建它的模式中调用过程。
                           </p>
                           <p>如果返回<code class="codeph">NULL</code> ，则可能无意中设置了客户端标识符。要清除客户端标识符，请运行以下过程：</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SESSION.CLEAR_IDENTIFIER;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-38FA1A00-CA96-4BC4-AE3A-68893B5BDD80" title="用于管理全局应用程序上下文的DBMS_SESSION PL / SQL包。">用于管理全局应用程序上下文的PL / SQL包</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG213"></a><a id="DBSEG212"></a><div class="props_rev_3"><a id="GUID-347946B7-D66D-4346-8EF8-F06F12AB6F83" name="GUID-347946B7-D66D-4346-8EF8-F06F12AB6F83"></a><h5 id="DBSEG-GUID-347946B7-D66D-4346-8EF8-F06F12AB6F83" class="sect5">在应用程序之间移动的数据库用户的全局上下文</h5>
                     <div>
                        <p>即使应用程序具有不同的访问要求，全局应用程序上下文也可用于在应用程序之间移动的数据库用户。</p>
                        <p>为此，必须在<code class="codeph">DBMS_SESSION.SET_CONTEXT</code>过程中包含<code class="codeph">username</code>参数。
                        </p>
                        <p>此参数指定对所有会话使用相同的架构。</p>
                        <p>您可以使用以下<code class="codeph">DBMS_SESSION.SET_CONTEXT</code>参数：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">命名空间</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">属性</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">值</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">用户名</code> 
                              </p>
                           </li>
                        </ul>
                        <p>Oracle数据库与<code class="codeph">username</code>值匹配，以便其他应用程序可以识别应用程序上下文。这使用户可以在应用程序之间移动。
                        </p>
                        <p>通过省略<code class="codeph">client_id</code>设置，其值为<code class="codeph">NULL</code> ，默认值。这意味着如果对于在不同应用程序中维护相同上下文的数据库用户的<code class="codeph">username</code>设置相同，则可以通过多个会话看到值。例如，您可以拥有一套应用程序，通过Oracle虚拟专用数据库策略控制用户访问，每个用户都被限制为工作角色。
                        </p>
                        <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-347946B7-D66D-4346-8EF8-F06F12AB6F83__CIHCFCIH">例11-8</a>演示了如何设置<code class="codeph">username</code>参数，以便特定用户可以在应用程序之间移动。<code class="codeph">username</code>参数的使用以<span class="bold">粗体</span>字体表示。
                        </p>
                        <div class="example" id="GUID-347946B7-D66D-4346-8EF8-F06F12AB6F83__CIHCFCIH">
                           <p class="titleinexample">示例11-8用于在应用程序之间移动的全局应用程序上下文值的包</p><pre class="oac_no_warn" dir="ltr">创建或替换包hr_ctx_pkg AS PROCEDURE set_hr_ctx（sec_level IN VARCHAR2， <span class="bold">user_name IN VARCHAR2）;</span>程序clear_hr_context;结束; / CREATE OR REPLACE PACKAGE BODY hr_ctx_pkg AS PROCEDURE set_hr_ctx（sec_level IN VARCHAR2， <span class="bold">user_name IN VARCHAR2）</span> AS BEGIN DBMS_SESSION.SET_CONTEXT（namespace =&gt;'global_hr_ctx'，attribute =&gt;'job_role'，value =&gt; sec_level， <span class="bold">username =&gt; user_name）;</span> END set_hr_ctx;程序clear_hr_context AS BEGIN DBMS_SESSION.CLEAR_CONTEXT（'global_hr_ctx'）; END clear_context;结束; /</pre><p>通常，您通过嵌入类似于以下示例的调用在数据库应用程序中执行此过程。确保<code class="codeph">user_name</code>参数（在本例中为<code class="codeph">scott</code> ）的值是有效的数据库用户名。
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN hr_ctx_pkg.set_hr_ctx（'clerk'，'scott'）;结束;</pre><p>管理此类全局应用程序上下文的安全方法是在您的应用程序中，嵌入代码以向用户授予安全应用程序角色。此代码应包含设置应用程序上下文的可信PL / SQL包的<code class="codeph">EXECUTE</code>权限。换句话说，应用程序而不是用户将为用户设置上下文。
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-38FA1A00-CA96-4BC4-AE3A-68893B5BDD80" title="用于管理全局应用程序上下文的DBMS_SESSION PL / SQL包。">用于管理全局应用程序上下文的PL / SQL包</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG214"></a><div class="props_rev_3"><a id="GUID-59436329-F584-4410-B6EE-B1A481278141" name="GUID-59436329-F584-4410-B6EE-B1A481278141"></a><h5 id="DBSEG-GUID-59436329-F584-4410-B6EE-B1A481278141" class="sect5">非数据库用户的全局应用程序上下文</h5>
                     <div>
                        <p>当非数据库用户启动客户端会话时，应用程序服务器会生成客户端会话ID。</p>
                        <p>非数据库用户是数据库不知道的用户，例如Web应用程序用户。</p>
                        <p>在应用程序服务器上设置此ID后，必须将其传递到数据库服务器端。您可以使用<code class="codeph">DBMS_SESSION.SET_IDENTIFIER</code>过程来设置客户端会话ID。</p>
                        <p>要设置上下文，可以在服务器端的PL / SQL过程中的<code class="codeph">DBMS_SESSION.SET_CONTEXT</code>过程中设置<code class="codeph">client_id</code>参数。这使您可以全局管理应用程序上下文，但每个客户端只能看到他或她指定的应用程序上下文。
                        </p>
                        <p><code class="codeph">client_id</code>值是获取和设置全局应用程序上下文的正确属性的关键。请记住，客户端标识符由中间层应用程序控制，一旦设置，它将保持打开状态，直到它被清除。
                        </p>
                        <p>管理此类应用程序上下文的典型方法是将<code class="codeph">session_id</code>值（ <code class="codeph">client_identifier</code> ）放在cookie中，并将其发送到最终用户的HTML页面，以便在下一个请求时返回。应用程序中的查找表还应保留客户端标识符，以防止它们被其他用户重用并实现最终用户会话超时。
                        </p>
                        <p>对于非数据库用户，请配置以下<code class="codeph">SET_CONTEXT</code>参数：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">命名空间</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">属性</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">值</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">用户名</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">CLIENT_ID</code></p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="using-application-contexts-to-retrieve-user-information.html#GUID-BF276A5E-BC14-4B49-A02A-2EC984325805" title="本教程演示了如何创建使用客户端会话ID的全局应用程序上下文。">教程：创建使用客户端会话ID的全局应用程序上下文</a></li>
                              <li><a href="using-application-contexts-to-retrieve-user-information.html#GUID-2CC90B78-934C-4741-9E6C-29D973A16AC7" title="接下来，您已准备好使用中间层应用程序设置客户端会话ID。">步骤2：使用中间层应用程序设置客户端会话ID</a></li>
                              <li><a href="configuring-authentication.html#GUID-18333ED1-0FE1-4110-A3A5-EA9B1B989DA4" title="客户端标识符保留中间层系统中的用户身份;它们也可以独立于全局应用程序上下文使用。">使用客户端标识符识别数据库未知的应用程序用户</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-38FA1A00-CA96-4BC4-AE3A-68893B5BDD80" title="用于管理全局应用程序上下文的DBMS_SESSION PL / SQL包。">用于管理全局应用程序上下文的PL / SQL包</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="DBSEG215"></a><div class="props_rev_3"><a id="GUID-32003F45-C354-49F4-9BC7-812E469B941B" name="GUID-32003F45-C354-49F4-9BC7-812E469B941B"></a><h5 id="DBSEG-GUID-32003F45-C354-49F4-9BC7-812E469B941B" class="sect5">示例：用于管理非数据库用户的全局应用程序上下文值的程序包</h5>
                     <div>
                        <p><code class="codeph">CREATE PACKAGE</code>语句可以管理非数据库用户的全局应用程序上下文值。
                        </p>
                        <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-32003F45-C354-49F4-9BC7-812E469B941B__CIHIEJHD">示例11-9</a>显示了如何创建管理此类全局应用程序上下文的包。
                        </p>
                        <div class="example" id="GUID-32003F45-C354-49F4-9BC7-812E469B941B__CIHIEJHD">
                           <p class="titleinexample">示例11-9管理非数据库用户的全局应用程序上下文值的程序包</p><pre class="oac_no_warn" dir="ltr">创建或替换包hr_ctx_pkg AS程序set_session_id（session_id_p IN NUMBER）; PROCEDURE set_hr_ctx（sec_level_attr IN VARCHAR2，sec_level_val IN VARCHAR2）;程序clear_hr_session（session_id_p IN NUMBER）;程序clear_hr_context;结束; /创建或替换包裹身份hr_ctx_pkg AS session_id_global NUMBER; PROCEDURE set_session_id（session_id_p IN NUMBER）AS BEGIN session_id_global：= session_id_p; DBMS_SESSION.SET_IDENTIFIER（session_id_p）; END set_session_id; PROCEDURE set_hr_ctx（sec_level_attr IN VARCHAR2，sec_level_val IN VARCHAR2）AS BEGIN DBMS_SESSION.SET_CONTEXT（namespace =&gt;'global_hr_ctx'，attribute =&gt; sec_level_attr，value =&gt; sec_level_val，username =&gt; USER，client_id =&gt; session_id_global）; END set_hr_ctx;程序clear_hr_session（session_id_p IN NUMBER）AS BEGIN DBMS_SESSION.SET_IDENTIFIER（session_id_p）; DBMS_SESSION.CLEAR_IDENTIFIER;结束clear_hr_session;程序clear_hr_context AS BEGIN DBMS_SESSION.CLEAR_CONTEXT（'global_hr_ctx'，session_id_global）;结束clear_hr_context;结束; /</pre><p>在这个例子中：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">session_id_global NUMBER</code>创建<code class="codeph">session_id_global</code>变量，该变量将保存客户端会话ID。 <code class="codeph">session_id_global</code>变量在整个包定义中引用，包括创建全局应用程序上下文属性并为其赋值的过程。这意味着全局应用程序上下文值将始终与此特定会话ID相关联。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">程序set_session_id ......END set_session_id</code>创建<code class="codeph">set_session_id</code>过程，该过程将客户端会话ID写入<code class="codeph">session_id_global</code>变量。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">程序set_hr_ctx ......END set_hr_ctx</code>创建<code class="codeph">set_hr_ctx</code>过程，该过程创建全局应用程序上下文属性，并允许您为这些属性赋值。在此程序中：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">username =&gt; USER</code>指定<code class="codeph">username</code>值。此示例通过调用Oracle数据库提供的<code class="codeph">USER</code>函数来设置它，该函数从上下文检索过程添加会话所有者。<code class="codeph">USER</code>函数确保只有设置应用程序上下文的用户才能访问上下文。有关<code class="codeph">USER</code>函数的更多信息，请参见<a href="../sqlrf/USER.html#SQLRF06156" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。
                                       </p>
                                       <p>如果您指定了<code class="codeph">NULL</code> （ <code class="codeph">username</code>参数的默认值），则任何用户都可以访问上下文。
                                       </p>
                                       <p>设置<code class="codeph">username</code>和<code class="codeph">client_id</code>值可启用两种方案。对于轻量级用户，请将<code class="codeph">username</code>参数设置为连接池所有者（例如， <code class="codeph">APPS_USER</code> ），然后将<code class="codeph">client_id</code>设置为客户端会话ID。如果要使用无状态Web会话，请将<code class="codeph">user_name</code>参数设置为已登录的同一数据库用户，并确保此用户保留相同的客户端会话ID。有关不同<code class="codeph">username</code>和<code class="codeph">client_id</code>设置如何工作的说明，请参阅<a href="using-application-contexts-to-retrieve-user-information.html#GUID-A1A09E1A-7D2F-4407-8A6E-688E64A663F8" title="DBMS_SESSION.SYS_CONTEXT过程提供client_id和username参数，用于全局应用程序上下文。">DBMS_SESSION.SET_CONTEXT用户名和client_id参数</a> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">client_id =&gt; session_id_global</code>指定<code class="codeph">client_id</code>值。此示例将其设置为<code class="codeph">session_id_global</code>变量。这将此处定义的上下文设置与特定客户端会话ID相关联，即运行<code class="codeph">set_session_id</code>过程时设置的客户端会话ID。如果指定<code class="codeph">client_id</code>参数default， <code class="codeph">NULL</code> ，则任何会话都可以使用全局应用程序上下文设置。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p><code class="codeph">程序clear_hr_session ......END clear_hr_session</code>创建<code class="codeph">clear_hr_session</code>过程以清除客户端会话标识符。<code class="codeph">AS</code>子句将其设置为确保清除正确的会话ID，即存储在<code class="codeph">CREATE OR REPLACE PACKAGE BODY</code> <code class="codeph">hr_ctx_pkg</code>过程中定义的变量<code class="codeph">session_id_p</code>中的会话ID。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">程序clear_hr_context ...END clear_hr_context</code>创建<code class="codeph">clear_hr_context</code>过程，以便您可以清除当前用户会话的上下文设置，这些设置由<code class="codeph">global_hr_ctx</code>变量定义。有关详细<a href="using-application-contexts-to-retrieve-user-information.html#GUID-AAFC08F3-DE49-4F3D-A692-61B90A6E5C76" title="The application context exists within memory, so when the user exits a session, you must clear the client_identifier context value.">信息，</a>请参阅<a href="using-application-contexts-to-retrieve-user-information.html#GUID-AAFC08F3-DE49-4F3D-A692-61B90A6E5C76" title="应用程序上下文存在于内存中，因此当用户退出会话时，必须清除client_identifier上下文值。">会话关闭时清除会话数据</a> 。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-38FA1A00-CA96-4BC4-AE3A-68893B5BDD80" title="用于管理全局应用程序上下文的DBMS_SESSION PL / SQL包。">用于管理全局应用程序上下文的PL / SQL包</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG216"></a><div class="props_rev_3"><a id="GUID-AAFC08F3-DE49-4F3D-A692-61B90A6E5C76" name="GUID-AAFC08F3-DE49-4F3D-A692-61B90A6E5C76"></a><h5 id="DBSEG-GUID-AAFC08F3-DE49-4F3D-A692-61B90A6E5C76" class="sect5">会话关闭时清除会话数据</h5>
                     <div>
                        <p>应用程序上下文存在于内存中，因此当用户退出会话时，必须清除<code class="codeph">client_identifier</code>上下文值。
                        </p>
                        <div class="section">这会释放内存并防止其他用户意外使用任何遗留值。</div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要在用户退出会话时清除会话数据，请在服务器端PL / SQL包中使用以下任一方法：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="bold">用户退出会话时清除客户端标识符。</span> 使用<code class="codeph">DBMS_SESSION.CLEAR_IDENTIFIER</code>过程。例如：</p><pre class="oac_no_warn" dir="ltr">DBMS_SESSION.CLEAR_IDENTIFIER;</pre></li>
                                    <li>
                                       <p><span class="bold">继续会话但仍然清除上下文。</span> 如果希望会话继续，但仍需要清除上下文，请使用<code class="codeph">DBMS_SESSION.CLEAR_CONTEXT</code>或<code class="codeph">DBMS_SESSION.CLEAR_ALL_CONTEXT</code>过程。例如：</p><pre class="oac_no_warn" dir="ltr">DBMS_SESSION.CLEAR_CONTEXT（'my_ctx'，'my_attribute'）;</pre><p><code class="codeph">CLEAR_CONTEXT</code>过程清除当前用户的上下文。要清除所有用户的上下文值，例如，当您需要关闭应用程序服务器时，请使用<code class="codeph">CLEAR_ALL_CONTEXT</code>过程。
                                       </p>
                                       <p>全局应用程序上下文值在清除之前可用，因此您应使用<code class="codeph">CLEAR_CONTEXT</code>或<code class="codeph">CLEAR_ALL_CONTEXT</code>来确保其他会话无权访问这些值。请注意，上下文值中的任何更改都会立即反映，后续通过<code class="codeph">SYS_CONTEXT</code>函数访问该值的调用将返回最新值。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-38FA1A00-CA96-4BC4-AE3A-68893B5BDD80" title="用于管理全局应用程序上下文的DBMS_SESSION PL / SQL包。">用于管理全局应用程序上下文的PL / SQL包</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="DBSEG70785"></a><div class="props_rev_3"><a id="GUID-82E6BFA4-8A78-4EBE-86E5-222237183C15" name="GUID-82E6BFA4-8A78-4EBE-86E5-222237183C15"></a><h4 id="DBSEG-GUID-82E6BFA4-8A78-4EBE-86E5-222237183C15" class="sect4">在中间层应用程序中嵌入调用以管理客户机会话ID</h4>
                  <div>
                     <p>您可以在中间层应用程序中嵌入调用来管理客户端会话ID。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-EB934276-06A5-42AB-BEA2-8DD19EF20BB9">关于使用中间层应用程序管理客户端会话ID</a><br>应用程序服务器生成客户端会话ID。</li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-872FB47B-0689-4C69-8EA7-BB5FD1AC649D">步骤1：使用中间层应用程序检索客户端会话ID</a><br>当用户启动客户端会话时，应用程序服务器会生成客户端会话ID。</li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-2CC90B78-934C-4741-9E6C-29D973A16AC7">步骤2：使用中间层应用程序设置客户端会话ID</a><br>接下来，您已准备好使用中间层应用程序设置客户端会话ID。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-9CE6A247-1C82-4E72-B79B-4D5727A641AE">步骤3：使用中间层应用程序清除会话数据</a><br>应用程序上下文完全存在于内存中。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6" title="您可以使用全局应用程序上下文跨数据库会话访问应用程序值，包括Oracle Real Application Clusters环境。">全局应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="DBSEG217"></a><div class="props_rev_3"><a id="GUID-EB934276-06A5-42AB-BEA2-8DD19EF20BB9" name="GUID-EB934276-06A5-42AB-BEA2-8DD19EF20BB9"></a><h5 id="DBSEG-GUID-EB934276-06A5-42AB-BEA2-8DD19EF20BB9" class="sect5">关于使用中间层应用程序管理客户端会话ID</h5>
                     <div>
                        <p>应用程序服务器生成客户端会话ID。</p>
                        <p>从中间层应用程序，您可以获取，设置和清除客户端会话ID。为此，您可以将Oracle调用接口（OCI）调用或<code class="codeph">DBMS_SESSION</code> PL / SQL包过程嵌入到中间层应用程序代码中。
                        </p>
                        <p>应用程序对用户进行身份验证，设置客户端标识符，并在当前会话中对其进行设置。PL / SQL包<code class="codeph">SET_CONTEXT</code>在应用程序上下文中设置<code class="codeph">client_identifier</code>值。
                        </p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="using-application-contexts-to-retrieve-user-information.html#GUID-59436329-F584-4410-B6EE-B1A481278141" title="当非数据库用户启动客户端会话时，应用程序服务器会生成客户端会话ID。">非数据库用户的全局应用程序上下文</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-82E6BFA4-8A78-4EBE-86E5-222237183C15" title="您可以在中间层应用程序中嵌入调用来管理客户端会话ID。">在中间层应用程序中嵌入调用以管理客户机会话ID</a></p>
                           </div>
                        </div>
                     </div>
                  </div><a id="DBSEG77851"></a><div class="props_rev_3"><a id="GUID-872FB47B-0689-4C69-8EA7-BB5FD1AC649D" name="GUID-872FB47B-0689-4C69-8EA7-BB5FD1AC649D"></a><h5 id="DBSEG-GUID-872FB47B-0689-4C69-8EA7-BB5FD1AC649D" class="sect5">步骤1：使用中间层应用程序检索客户端会话ID</h5>
                     <div>
                        <p>当用户启动客户端会话时，应用程序服务器会生成客户端会话ID。</p>
                        <div class="section">
                           <p>您可以检索此ID以用于验证用户的访问权限。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要检索此客户端ID，请将<code class="codeph">OCIStmtExecute</code>调用与以下任何语句一起使用：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">SELECT SYS_CONTEXT（'userenv'，'client_identifier'）FROM DUAL;</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">从V $ SESSION中选择CLIENT_IDENTIFIER;</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">SELECT值FROM session_context WHERE attribute ='CLIENT_IDENTIFIER';</code></p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                           <p>例如，要使用<code class="codeph">OCIStmtExecute</code>调用来检索客户端会话ID值：</p><pre class="pre codeblock"><code>oratext clientid [31]; OCIDefine * defnp1 =（OCIDefine *）0; OCIStmt * statementhndle; oratext * selcid =（oratext *）“SELECT SYS_CONTEXT（'userenv'，'client_identifier'）FROM DUAL”; OCIStmtPrepare（statementhndle，errhp，selcid，（ub4）strlen（（char *）selcid），（ub4）OCI_NTV_SYNTAX，（ub4）OCI_DEFAULT）; OCIDefineByPos（statementhndle，＆defnp1，errhp，1，（dvoid *）clientid，31，SQLT_STR，（dvoid *）0，（ub2 *）0，（ub2 *）0，OCI_DEFAULT）; OCIStmtExecute（servhndle，statementhndle，errhp，（ub4）1，（ub4）0，（CONST OCISnapshot *）NULL，（OCISnapshot *）NULL，OCI_DEFAULT）; printf（“CLIENT_IDENTIFIER =％s \ n”，clientid）;</code></pre><p>在这个例子中：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">oratext</code> ， <code class="codeph">OCIDefine</code> ， <code class="codeph">OCIStmt</code>和<code class="codeph">oratext</code>创建变量来存储客户端会话ID， <code class="codeph">OCIDefine</code>引用调用，语句句柄和要使用的<code class="codeph">SELECT</code>语句。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCIStmtPrepar</code>准备语句<code class="codeph">selcid</code>以供执行。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCIDefineByPos</code>为客户端会话ID定义输出变量<code class="codeph">clientid</code> 。</p>
                              </li>
                              <li>
                                 <p><code class="codeph">OCIStmtExecute</code>执行<code class="codeph">selcid</code>变量中的语句。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">printf</code>打印检索到的客户端会话ID的格式化输出。</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-82E6BFA4-8A78-4EBE-86E5-222237183C15" title="您可以在中间层应用程序中嵌入调用来管理客户端会话ID。">在中间层应用程序中嵌入调用以管理客户机会话ID</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG219"></a><div class="props_rev_3"><a id="GUID-2CC90B78-934C-4741-9E6C-29D973A16AC7" name="GUID-2CC90B78-934C-4741-9E6C-29D973A16AC7"></a><h5 id="DBSEG-GUID-2CC90B78-934C-4741-9E6C-29D973A16AC7" class="sect5">步骤2：使用中间层应用程序设置客户端会话ID</h5>
                     <div>
                        <p>接下来，您已准备好使用中间层应用程序设置客户端会话ID。</p>
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-30B60A39-1D72-4CB9-A9A3-295E73F69550">关于使用中间层应用程序设置客户端会话ID</a><br>使用<code class="codeph">OCIStmtExecute</code>调用来检索客户端会话ID后，您就可以设置此ID。</li>
                           <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-BC21558D-544C-4CD3-BC0E-DBF36A9202F6">使用中间层应用程序设置客户端会话ID</a><br>Oracle Call Interface或<code class="codeph">DBMS_SESSION</code> PL / SQL包可以使用中间层应用程序设置客户端会话ID。
                           </li>
                           <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-D9E13BDD-65F1-4315-9B76-3665AD8A6CD6">检查客户端标识符的值</a><br>对于<code class="codeph">OCIAttrSet</code>和<code class="codeph">DBMS_SESSION.SET_IDENTIFIER</code> ，您可以检查客户端标识符的值。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-82E6BFA4-8A78-4EBE-86E5-222237183C15" title="您可以在中间层应用程序中嵌入调用来管理客户端会话ID。">在中间层应用程序中嵌入调用以管理客户机会话ID</a></p>
                           </div>
                        </div>
                     </div>
                     
                     <div class="props_rev_3"><a id="GUID-30B60A39-1D72-4CB9-A9A3-295E73F69550" name="GUID-30B60A39-1D72-4CB9-A9A3-295E73F69550"></a><h6 id="DBSEG-GUID-30B60A39-1D72-4CB9-A9A3-295E73F69550" class="sect6">关于使用中间层应用程序设置客户端会话ID</h6>
                        <div>
                           <p>使用<code class="codeph">OCIStmtExecute</code>调用来检索客户端会话ID后，您就可以设置此ID。</p>
                           <p>然后，服务器端PL / SQL包中的<code class="codeph">DBMS_SESSION.SET_CONTEXT</code>过程设置此会话ID，并可选择覆盖应用程序上下文值。
                           </p>
                           <p>您必须确保中间层应用程序代码检查客户机会话ID值（例如，前面示例中写入<code class="codeph">user_id</code>的值）是否与服务器端<code class="codeph">DBMS_SESSION.SET_CONTEXT</code>过程中定义的<code class="codeph">client_id</code>设置匹配。应用程序服务器端的调用顺序应如下所示：</p>
                           <ol>
                              <li>
                                 <p>获取当前客户端会话ID。会话应该已经具有此ID，但确保它确实具有正确的值更安全。</p>
                              </li>
                              <li>
                                 <p>清除当前客户端会话ID。这使应用程序准备服务来自不同最终用户的请求。</p>
                              </li>
                              <li>
                                 <p>设置新客户端会话ID或已分配给最终用户的客户端会话ID。这可确保会话使用一组不同的全局应用程序上下文值。</p>
                              </li>
                           </ol>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-2CC90B78-934C-4741-9E6C-29D973A16AC7" title="接下来，您已准备好使用中间层应用程序设置客户端会话ID。">步骤2：使用中间层应用程序设置客户端会话ID</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="props_rev_3"><a id="GUID-BC21558D-544C-4CD3-BC0E-DBF36A9202F6" name="GUID-BC21558D-544C-4CD3-BC0E-DBF36A9202F6"></a><h6 id="DBSEG-GUID-BC21558D-544C-4CD3-BC0E-DBF36A9202F6" class="sect6">使用中间层应用程序设置客户端会话ID</h6>
                        <div>
                           <p>Oracle Call Interface或<code class="codeph">DBMS_SESSION</code> PL / SQL包可以使用中间层应用程序设置客户端会话ID。
                           </p>
                           <div class="section">
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>使用以下任一方法在应用程序服务器端设置客户端会话ID：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><span class="bold">Oracle调用接口。</span> 在<code class="codeph">OCIAttrSet</code> OCI调用中设置<code class="codeph">OCI_ATTR_CLIENT_IDENTIFIER</code>属性。此属性设置会话句柄中的客户端标识符以跟踪最终用户标识。
                                          </p>
                                          <p>以下示例显示如何将<code class="codeph">OCIAttrSet</code>与<code class="codeph">ATTR_CLIENT_IDENTIFIER</code>参数一起使用。<code class="codeph">user_id</code>设置是指存储正在登录的用户的ID的变量。
                                          </p><pre class="oac_no_warn" dir="ltr">OCIAttrSet（（void *）session_handle，（ub4）OCI_HTYPE_SESSION，（void *）user_id，（ub4）strlen（user_id），OCI_ATTR_CLIENT_IDENTIFIER，error_handle）;</pre></li>
                                       <li>
                                          <p><span class="bold">DBMS_SESSION包。</span> 使用<code class="codeph">DBMS_SESSION.SET_IDENTIFIER</code>过程为全局应用程序上下文设置客户端标识符。例如，假设您将登录用户的ID存储在名为<code class="codeph">user_id</code>的变量中，则应在中间层应用程序代码中输入以下行：</p><pre class="oac_no_warn" dir="ltr">DBMS_SESSION.SET_IDENTIFIER（USER_ID）;</pre></li>
                                    </ul>
                                 </li>
                              </ul>
                              <div class="infoboxnote" id="GUID-BC21558D-544C-4CD3-BC0E-DBF36A9202F6__GUID-D0E82562-A265-4EC0-B54D-43FA6D908D03">
                                 <p class="notep1">注意：</p>
                                 <p>当应用程序生成用作<code class="codeph">CLIENT_IDENTIFIER</code>的会话ID时，会话ID必须适当随机并通过加密在网络上受到保护。如果会话ID不是随机的，则恶意用户可以猜测会话ID并访问另一个用户的数据。如果会话ID未通过网络加密，则恶意用户可以检索会话ID并访问连接。
                                 </p>
                                 <p>您可以使用网络数据加密来加密会话ID。有关更多信息，请参阅<a href="configuring-network-data-encryption-and-integrity.html#GUID-7F12066A-2BA1-476C-809B-BB95A3F727CF" title="您可以为服务器和客户端配置本机Oracle Net Services数据加密和数据完整性。">配置Oracle数据库本机网络加密和数据完整性</a> 。
                                 </p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-2CC90B78-934C-4741-9E6C-29D973A16AC7" title="接下来，您已准备好使用中间层应用程序设置客户端会话ID。">步骤2：使用中间层应用程序设置客户端会话ID</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="props_rev_3"><a id="GUID-D9E13BDD-65F1-4315-9B76-3665AD8A6CD6" name="GUID-D9E13BDD-65F1-4315-9B76-3665AD8A6CD6"></a><h6 id="DBSEG-GUID-D9E13BDD-65F1-4315-9B76-3665AD8A6CD6" class="sect6">检查客户端标识符的值</h6>
                        <div>
                           <p>对于<code class="codeph">OCIAttrSet</code>和<code class="codeph">DBMS_SESSION.SET_IDENTIFIER</code> ，您可以检查客户端标识符的值。
                           </p>
                           <div class="section">
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>要检查客户端标识符的值，请使用以下方法之一：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>要使用<code class="codeph">SYS_CONTEXT</code>函数检查它：</p><pre class="oac_no_warn" dir="ltr">SELECT SYS_CONTEXT（'userenv'，'client_identifier'）FROM DUAL;</pre></li>
                                       <li>
                                          <p>要通过查询<code class="codeph">V$SESSION</code>视图来检查它：</p><pre class="oac_no_warn" dir="ltr">从V $ SESSION中选择CLIENT_IDENTIFIER;</pre></li>
                                    </ul>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-2CC90B78-934C-4741-9E6C-29D973A16AC7" title="接下来，您已准备好使用中间层应用程序设置客户端会话ID。">步骤2：使用中间层应用程序设置客户端会话ID</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div><a id="DBSEG220"></a><div class="props_rev_3"><a id="GUID-9CE6A247-1C82-4E72-B79B-4D5727A641AE" name="GUID-9CE6A247-1C82-4E72-B79B-4D5727A641AE"></a><h5 id="DBSEG-GUID-9CE6A247-1C82-4E72-B79B-4D5727A641AE" class="sect5">步骤3：使用中间层应用程序清除会话数据</h5>
                     <div>
                        <p>应用程序上下文完全存在于内存中。</p>
                        <div class="section">
                           <p>当用户退出会话时，您必须清除<code class="codeph">client_identifier</code>值的上下文。这会释放内存并防止其他用户意外使用任何遗留值</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>要在用户退出会话时清除会话数据，请在中间层应用程序代码中使用以下任一方法：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="bold">用户退出会话时清除客户端标识符。</span> 使用<code class="codeph">DBMS_SESSION.CLEAR_IDENTIFIER</code>过程。例如：</p><pre class="oac_no_warn" dir="ltr">DBMS_SESSION.CLEAR_IDENTIFIER;</pre></li>
                                    <li>
                                       <p><span class="bold">继续会话但仍然清除上下文。</span> 如果希望会话继续，但仍需要清除上下文，请使用<code class="codeph">DBMS_SESSION.CLEAR_CONTEXT</code>或<code class="codeph">DBMS_SESSION.CLEAR_ALL_CONTEXT</code>过程。例如：</p><pre class="oac_no_warn" dir="ltr">DBMS_SESSION.CLEAR_CONTEXT（ <span class="italic">namespace</span> ， <span class="italic">client_identifier</span> ， <span class="italic">attribute</span> ）;</pre><p><code class="codeph">CLEAR_CONTEXT</code>过程清除当前用户的上下文。要清除所有用户的上下文值，例如，当您需要关闭应用程序服务器时，请使用<code class="codeph">CLEAR_ALL_CONTEXT</code>过程。
                                       </p>
                                       <p>全局应用程序上下文值在清除之前可用，因此您应使用<code class="codeph">CLEAR_CONTEXT</code>或<code class="codeph">CLEAR_ALL_CONTEXT</code>来确保其他会话无权访问这些值。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-82E6BFA4-8A78-4EBE-86E5-222237183C15" title="您可以在中间层应用程序中嵌入调用来管理客户端会话ID。">在中间层应用程序中嵌入调用以管理客户机会话ID</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="DBSEG79745"></a><div class="props_rev_3"><a id="GUID-BF276A5E-BC14-4B49-A02A-2EC984325805" name="GUID-BF276A5E-BC14-4B49-A02A-2EC984325805"></a><h4 id="DBSEG-GUID-BF276A5E-BC14-4B49-A02A-2EC984325805" class="sect4">教程：创建使用客户端会话ID的全局应用程序上下文</h4>
                  <div>
                     <p>本教程演示了如何创建使用客户端会话ID的全局应用程序上下文。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-14EA22E5-818D-4780-88CE-C2643E9CDF1C">关于本教程</a><br>本教程介绍如何创建使用轻量级用户应用程序的客户端会话ID的全局应用程序上下文。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-651F737F-E16F-4B77-A5E6-04A3022ED2D9">第1步：创建用户帐户</a><br>安全管理员将管理应用程序上下文及其程序包，用户帐户将拥有连接池。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-72898F83-8073-407E-ABE1-99FDB6B83500">第2步：创建全局应用程序上下文</a><br>接下来，您已准备好创建全局应用程序上下文。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-CAEBCFA5-581F-415E-A27E-0AAC2D7A3951">第3步：为全局应用程序上下文创建一个包</a><br>PL / SQL包将管理您创建的全局应用程序上下文。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-445250D8-B9F1-4221-A541-A8502110154F">第4步：测试新创建的全局应用程序上下文</a><br>在此阶段，您已准备好了解此全局应用程序上下文和会话ID设置的工作方式。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-9AD32F5C-F601-430D-A3F0-662DE8D4251F">步骤5：修改会话ID并再次测试全局应用程序上下文</a><br>接下来，清除然后修改会话ID并再次测试全局应用程序上下文。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-749E5C36-1D7F-44F8-A843-351B69483D3C">第6步：删除本教程的组件</a><br>如果您不再需要本教程的组件，则可以删除它们。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6" title="您可以使用全局应用程序上下文跨数据库会话访问应用程序值，包括Oracle Real Application Clusters环境。">全局应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="DBSEG561"></a><div class="props_rev_3"><a id="GUID-14EA22E5-818D-4780-88CE-C2643E9CDF1C" name="GUID-14EA22E5-818D-4780-88CE-C2643E9CDF1C"></a><h5 id="DBSEG-GUID-14EA22E5-818D-4780-88CE-C2643E9CDF1C" class="sect5">关于本教程</h5>
                     <div>
                        <p>本教程介绍如何创建使用轻量级用户应用程序的客户端会话ID的全局应用程序上下文。</p>
                        <p>它演示了如何使用连接池控制非数据库用户访问。如果您使用的是多租户环境，则本教程仅适用于当前的PDB。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-BF276A5E-BC14-4B49-A02A-2EC984325805" title="本教程演示了如何创建使用客户端会话ID的全局应用程序上下文。">教程：创建使用客户机会话ID的全局应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG221"></a><div class="props_rev_3"><a id="GUID-651F737F-E16F-4B77-A5E6-04A3022ED2D9" name="GUID-651F737F-E16F-4B77-A5E6-04A3022ED2D9"></a><h5 id="DBSEG-GUID-651F737F-E16F-4B77-A5E6-04A3022ED2D9" class="sect5">第1步：创建用户帐户</h5>
                     <div>
                        <p>安全管理员将管理应用程序上下文及其程序包，用户帐户将拥有连接池。</p>
                        <ol>
                           <li class="stepexpand"><span>使用<code class="codeph">SYSDBA</code>管理权限以<code class="codeph">SYS</code>身份登录到SQL * Plus。</span><div><pre class="oac_no_warn" dir="ltr">sqlplus sys as sysdba输入密码： <span class="italic">password</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>在多租户环境中，连接到相应的PDB。</span><div>
                                 <p>例如：</p><pre class="oac_no_warn" dir="ltr">CONNECT SYS @ my_pdb AS SYSDBA输入密码： <span class="italic">密码</span>
</pre><p>要查找可用的PDB，请查询<code class="codeph">DBA_PDBS</code>数据字典视图。要检查当前PDB，请运行<code class="codeph">show con_name</code>命令。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>创建本地用户帐户<code class="codeph">sysadmin_ctx</code> ，该帐户将管理全局应用程序上下文。</span><div><pre class="oac_no_warn" dir="ltr">CREATE USER sysadmin_ctx IDENTIFIED BY <span class="italic">密码</span> CONTAINER = CURRENT;授予创建会话，创建任何上下文，为sysadmin_ctx创建程序;在DBMS_SESSION上执行GRANT EXECUTE到sysadmin_ctx;</pre><p>请遵循<a href="configuring-authentication.html#GUID-AA1AA635-1CD5-422E-B8CA-681ED7C253CA" title="Oracle provides a set of minimum requirements for passwords.">密码最低要求中</a>的准则，使用安全<a href="configuring-authentication.html#GUID-AA1AA635-1CD5-422E-B8CA-681ED7C253CA" title="Oracle提供了一组密码的最低要求。">密码</a>替换<span class="italic"><code class="codeph">password</code></span> 。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>创建将拥有连接池的本地数据库帐户<code class="codeph">apps_user</code> 。</span><div><pre class="oac_no_warn" dir="ltr">CREATE USER apps_user IDENTIFIED BY <span class="italic">密码</span> CONTAINER = CURRENT; GRANT创建会话到apps_user;</pre><p>使用安全密码替换<span class="italic"><code class="codeph">password</code></span> 。
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-BF276A5E-BC14-4B49-A02A-2EC984325805" title="本教程演示了如何创建使用客户端会话ID的全局应用程序上下文。">教程：创建使用客户机会话ID的全局应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG222"></a><div class="props_rev_3"><a id="GUID-72898F83-8073-407E-ABE1-99FDB6B83500" name="GUID-72898F83-8073-407E-ABE1-99FDB6B83500"></a><h5 id="DBSEG-GUID-72898F83-8073-407E-ABE1-99FDB6B83500" class="sect5">第2步：创建全局应用程序上下文</h5>
                     <div>
                        <p>接下来，您已准备好创建全局应用程序上下文。</p>
                        <ol>
                           <li class="stepexpand"><span>以安全管理员<code class="codeph">sysadmin_ctx</code>身份登录。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT sysadmin_ctx <span class="italic">- 或者，CONNECT sysadmin_ctx @hrpdb</span>输入密码： <span class="italic">password</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>创建<code class="codeph">cust_ctx</code>全局应用程序上下文。</span><div><pre class="oac_no_warn" dir="ltr">CREATE CONTEXT global_cust_ctx使用cust_ctx_pkg全球访问;</pre><p>将创建<code class="codeph">cust_ctx</code>上下文，并将其与安全管理员<code class="codeph">sysadmin_ctx</code>的架构相关联。但是， <code class="codeph">SYS</code>架构拥有应用程序上下文。
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-BF276A5E-BC14-4B49-A02A-2EC984325805" title="本教程演示了如何创建使用客户端会话ID的全局应用程序上下文。">教程：创建使用客户机会话ID的全局应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG223"></a><div class="props_rev_3"><a id="GUID-CAEBCFA5-581F-415E-A27E-0AAC2D7A3951" name="GUID-CAEBCFA5-581F-415E-A27E-0AAC2D7A3951"></a><h5 id="DBSEG-GUID-CAEBCFA5-581F-415E-A27E-0AAC2D7A3951" class="sect5">第3步：为全局应用程序上下文创建一个包</h5>
                     <div>
                        <p>PL / SQL包将管理您创建的全局应用程序上下文。</p>
                        <ol>
                           <li class="stepexpand"><span>作为<code class="codeph">sysadmin_ctx</code> ，创建以下PL / SQL包：</span><div><pre class="oac_no_warn" dir="ltr">CREATE或REPLACE PACKAGE cust_ctx_pkg AS PROCEDURE set_session_id（session_id_p IN NUMBER）; PROCEDURE set_cust_ctx（sec_level_attr IN VARCHAR2，sec_level_val IN VARCHAR2）;程序clear_hr_session（session_id_p IN NUMBER）;程序clear_hr_context;结束; / CREATE OR REPLACE PACKAGE BODY cust_ctx_pkg AS session_id_global NUMBER; PROCEDURE set_session_id（session_id_p IN NUMBER）AS BEGIN session_id_global：= session_id_p; DBMS_SESSION.SET_IDENTIFIER（session_id_p）; END set_session_id; PROCEDURE set_cust_ctx（sec_level_attr IN VARCHAR2，sec_level_val IN VARCHAR2）AS BEGIN DBMS_SESSION.SET_CONTEXT（namespace =&gt;'global_cust_ctx'，attribute =&gt; sec_level_attr，value =&gt; sec_level_val，username =&gt; USER， <span class="italic">- 检索会话用户，在本例中， apps_user</span> client_id =&gt; session_id_global）; END set_cust_ctx;程序clear_hr_session（session_id_p IN NUMBER）AS BEGIN DBMS_SESSION.SET_IDENTIFIER（session_id_p）; DBMS_SESSION.CLEAR_IDENTIFIER;结束clear_hr_session;程序clear_hr_context AS BEGIN DBMS_SESSION.CLEAR_CONTEXT（'global_cust_ctx'，session_id_global）;结束clear_hr_context;结束; /</pre><p>有关此类包的工作原理的详细说明，请参见<a href="using-application-contexts-to-retrieve-user-information.html#GUID-32003F45-C354-49F4-9BC7-812E469B941B__CIHIEJHD">例11-9</a> 。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>将<code class="codeph">cust_ctx_pkg</code>包的<code class="codeph">EXECUTE</code>特权授予连接池所有者<code class="codeph">apps_user</code> 。</span><div><pre class="oac_no_warn" dir="ltr">GRANT EXECUTE ON cust_ctx_pkg TO apps_user;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-BF276A5E-BC14-4B49-A02A-2EC984325805" title="本教程演示了如何创建使用客户端会话ID的全局应用程序上下文。">教程：创建使用客户机会话ID的全局应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG952"></a><div class="props_rev_3"><a id="GUID-445250D8-B9F1-4221-A541-A8502110154F" name="GUID-445250D8-B9F1-4221-A541-A8502110154F"></a><h5 id="DBSEG-GUID-445250D8-B9F1-4221-A541-A8502110154F" class="sect5">第4步：测试新创建的全局应用程序上下文</h5>
                     <div>
                        <p>在此阶段，您已准备好了解此全局应用程序上下文和会话ID设置的工作方式。</p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>以连接池所有者用户<code class="codeph">apps_user</code>身份登录到SQL * Plus。
                                 </p><pre class="oac_no_warn" dir="ltr">CONNECT apps_user  - <span class="italic">或者，CONNECT apps_user @ hrpdb</span>输入密码： <span class="italic">password</span>
</pre></li>
                              <li id="GUID-445250D8-B9F1-4221-A541-A8502110154F__CIHIGCDB">
                                 <p>当连接池用户登录时，应用程序将按如下方式设置客户端会话标识符：</p><pre class="oac_no_warn" dir="ltr">BEGIN sysadmin_ctx.cust_ctx_pkg.set_session_id（34256）;结束; /</pre></li>
                              <li>
                                 <p>测试客户端会话标识符的值。</p>
                                 <ol type="a">
                                    <li>
                                       <p>设置会话ID：</p><pre class="oac_no_warn" dir="ltr">EXEC sysadmin_ctx.cust_ctx_pkg.set_session_id（34256）;</pre></li>
                                    <li>
                                       <p>检查会话ID：</p><pre class="oac_no_warn" dir="ltr">SELECT SYS_CONTEXT（'userenv'，'client_identifier'）FROM DUAL;</pre><p>应出现以下输出：</p><pre class="oac_no_warn" dir="ltr">SYS_CONTEXT（'USERENV'，'CLIENT_IDENTIFIER'）---------------------------------------- ---------- 34256</pre></li>
                                 </ol>
                              </li>
                              <li>
                                 <p>设置全局应用程序上下文如下：</p><pre class="oac_no_warn" dir="ltr">EXEC sysadmin_ctx.cust_ctx_pkg.set_cust_ctx（'类别'，'金牌合作伙伴'）; EXEC sysadmin_ctx.cust_ctx_pkg.set_cust_ctx（'Benefit Level'，'Highest'）;</pre><p>（在实际场景中，中间层应用程序将设置全局应用程序上下文值，类似于在步骤<a href="using-application-contexts-to-retrieve-user-information.html#GUID-445250D8-B9F1-4221-A541-A8502110154F__CIHIGCDB">2</a>中设置客户端会话标识符的方式。）
                                 </p>
                              </li>
                              <li>
                                 <p>输入以下<code class="codeph">SELECT SYS_CONTEXT</code>语句以检查设置是否成功：</p><pre class="oac_no_warn" dir="ltr">col类别格式a13 col benefit_level格式a14 SELECT SYS_CONTEXT（'global_cust_ctx'，'Category'）类别，SYS_CONTEXT（'global_cust_ctx'，'Benefit Level'）benefit_level FROM DUAL;</pre><p>应出现以下输出：</p><pre class="oac_no_warn" dir="ltr">CATEGORY BENEFIT_LEVEL ------------- --------------金牌合作伙伴最高</pre></li>
                           </ol>
                           <p>在客户端会话<code class="codeph">apps_user</code>在此处完成的操作是代表非数据库用户设置全局应用程序上下文。此上下文将<code class="codeph">Category</code>和<code class="codeph">Benefit Level</code> <code class="codeph">DBMS_SESSION.SET_CONTEXT attributes</code>设置为<code class="codeph">Gold Partner</code>和<code class="codeph">Highest</code> 。上下文仅存<code class="codeph">apps_user</code>客户端ID为<code class="codeph">apps_user</code>的用户<code class="codeph">apps_user</code> 。当非数据库用户在后台登录时，他或她实际上是以连接池用户<code class="codeph">apps_user</code> 。因此，非<code class="codeph">Gold Partner</code>用户可以使用<code class="codeph">Gold Partner</code>和<code class="codeph">Highest</code>上下文值。
                           </p>
                           <p>假设用户是数据库用户，可以在不使用预期应用程序的情况下登录。（例如，用户使用SQL * Plus登录。）由于用户尚未通过连接池用户<code class="codeph">apps_user</code> ，因此全局应用程序上下文对我们的错误用户显示为空。这是因为在<code class="codeph">apps_user</code>会话下创建并设置了上下文。如果用户运行<code class="codeph">SELECT SYS_CONTEXT</code>语句，则会显示以下输出：</p><pre class="oac_no_warn" dir="ltr">CATEGORY BENEFIT_LEVEL ------------- --------------</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-BF276A5E-BC14-4B49-A02A-2EC984325805" title="本教程演示了如何创建使用客户端会话ID的全局应用程序上下文。">教程：创建使用客户机会话ID的全局应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG1051"></a><div class="props_rev_3"><a id="GUID-9AD32F5C-F601-430D-A3F0-662DE8D4251F" name="GUID-9AD32F5C-F601-430D-A3F0-662DE8D4251F"></a><h5 id="DBSEG-GUID-9AD32F5C-F601-430D-A3F0-662DE8D4251F" class="sect5">步骤5：修改会话ID并再次测试全局应用程序上下文</h5>
                     <div>
                        <p>接下来，清除然后修改会话ID并再次测试全局应用程序上下文。</p>
                        <ol>
                           <li class="stepexpand"><span>作为用户<code class="codeph">apps_user</code> ，清除会话ID。</span><div><pre class="oac_no_warn" dir="ltr">EXEC sysadmin_ctx.cust_ctx_pkg.clear_hr_session（34256）;</pre></div>
                           </li>
                           <li class="stepexpand"><span>再次检查全局应用程序上下文设置。</span><div><pre class="oac_no_warn" dir="ltr">SELECT SYS_CONTEXT（'global_cust_ctx'，'Category'）类别，SYS_CONTEXT（'global_cust_ctx'，'Benefit Level'）benefit_level FROM DUAL; CATEGORY BENEFIT_LEVEL ------------- --------------</pre><p>由于<code class="codeph">apps_user</code>已清除会话ID，因此全局应用程序上下文设置不再可用。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>将会话ID还原为34256，然后检查上下文值。</span><div><pre class="oac_no_warn" dir="ltr">EXEC sysadmin_ctx.cust_ctx_pkg.set_session_id（34256）; SELECT SYS_CONTEXT（'global_cust_ctx'，'Category'）类别，SYS_CONTEXT（'global_cust_ctx'，'Benefit Level'）benefit_level FROM DUAL;</pre><p>应出现以下输出：</p><pre class="oac_no_warn" dir="ltr">CATEGORY BENEFIT_LEVEL ------------- --------------金牌合作伙伴最高</pre><p>如您所见，将会话ID重置为34256会再次返回应用程序上下文值。总而言之，必须为该用户仅设置<span class="italic">一次</span>全局应用程序上下文，但<span class="italic">每次</span>用户登录时<span class="italic">都</span>必须设置客户端会话ID。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>现在尝试清除然后检查全局应用程序上下文值。</span><div><pre class="oac_no_warn" dir="ltr">EXEC sysadmin_ctx.cust_ctx_pkg.clear_hr_context; SELECT SYS_CONTEXT（'global_cust_ctx'，'Category'）类别，SYS_CONTEXT（'global_cust_ctx'，'Benefit Level'）benefit_level FROM DUAL;</pre><p>应出现以下输出：</p><pre class="oac_no_warn" dir="ltr">CATEGORY BENEFIT_LEVEL ------------- --------------</pre><p>在此阶段，客户端会话ID 34256仍然存在，但应用程序上下文设置不再存在。这使您可以继续此用户的会话，但不使用先前设置的应用程序上下文值。</p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-BF276A5E-BC14-4B49-A02A-2EC984325805" title="本教程演示了如何创建使用客户端会话ID的全局应用程序上下文。">教程：创建使用客户机会话ID的全局应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG225"></a><div class="props_rev_3"><a id="GUID-749E5C36-1D7F-44F8-A843-351B69483D3C" name="GUID-749E5C36-1D7F-44F8-A843-351B69483D3C"></a><h5 id="DBSEG-GUID-749E5C36-1D7F-44F8-A843-351B69483D3C" class="sect5">第6步：删除本教程的组件</h5>
                     <div>
                        <p>如果您不再需要本教程的组件，则可以删除它们。</p>
                        <ol>
                           <li class="stepexpand"><span>以<code class="codeph">SYS</code>身份连接<code class="codeph">SYSDBA</code>管理权限。</span><div><pre class="oac_no_warn" dir="ltr">将SYS作为SYSDBA连接<span class="italic">- 或者，连接SYS @ mypdb AS SYSDBA</span>输入密码： <span class="italic">password</span>
</pre></div>
                           </li>
                           <li class="stepexpand"><span>删除全局应用程序上下文。</span><div><pre class="oac_no_warn" dir="ltr">DROP CONTEXT global_cust_ctx;</pre><p>请记住，即使<code class="codeph">sysadmin_ctx</code>创建了全局应用程序上下文，它也归<code class="codeph">SYS</code>架构所有。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>删除两个示例用户。</span><div><pre class="oac_no_warn" dir="ltr">DROP USER sysadmin_ctx CASCADE; DROP USER apps_user;</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-BF276A5E-BC14-4B49-A02A-2EC984325805" title="本教程演示了如何创建使用客户端会话ID的全局应用程序上下文。">教程：创建使用客户机会话ID的全局应用程序上下文</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="DBSEG226"></a><div class="props_rev_3"><a id="GUID-BCE6DEDC-E0AD-4EEB-8FC3-EE89CBB40E61" name="GUID-BCE6DEDC-E0AD-4EEB-8FC3-EE89CBB40E61"></a><h4 id="DBSEG-GUID-BCE6DEDC-E0AD-4EEB-8FC3-EE89CBB40E61" class="sect4">全局应用程序上下文进程</h4>
                  <div>
                     <p>一个简单的全局应用程序上下文使用数据库用户帐户创建用户会话;全局应用程序上下文适用于轻量级用户。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-08E276B4-B0A5-4670-9B32-B96800F7AF4D">简单全局应用上下文过程</a><br>在简单的全局应用程序上下文进程中，应用程序使用数据库用户来创建用户会话。
                        </li>
                        <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-D58D6556-3DF0-4E51-BEF6-A2D30C5158B5">轻量级用户的全局应用程序上下文过程</a><br>您可以为轻量级用户设置全局应用程序上下文。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-85E9C986-4D83-4DBB-9A2E-000E737F30D6" title="您可以使用全局应用程序上下文跨数据库会话访问应用程序值，包括Oracle Real Application Clusters环境。">全局应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="DBSEG227"></a><div class="props_rev_3"><a id="GUID-08E276B4-B0A5-4670-9B32-B96800F7AF4D" name="GUID-08E276B4-B0A5-4670-9B32-B96800F7AF4D"></a><h5 id="DBSEG-GUID-08E276B4-B0A5-4670-9B32-B96800F7AF4D" class="sect5">简单全局应用上下文过程</h5>
                     <div>
                        <p>在简单的全局应用程序上下文进程中，应用程序使用数据库用户来创建用户会话。</p>
                        <p>可以从<code class="codeph">SELECT</code>语句中检索简单全局应用程序上下文进程的context属性的值。
                        </p>
                        <p>考虑应用服务器<code class="codeph">AppSvr</code> ，它已将客户端标识符<code class="codeph">12345</code>分配给客户端<code class="codeph">SCOTT</code> 。 <code class="codeph">AppSvr</code>应用程序使用<code class="codeph">SCOTT</code>用户创建会话。（换句话说，它不是连接池。）分配给context属性的值可以来自任何地方，例如，在保存用户责任代码的表上运行<code class="codeph">SELECT</code>语句。填充应用程序上下文时，它将存储在内存中。因此，任何需要责任代码的操作都可以使用<code class="codeph">SYS_CONTEXT</code>调用快速访问它，而无需访问表的开销。在这种情况下，全局上下文优于本地上下文的唯一优势是<code class="codeph">SCOTT</code>经常更改应用程序并在每个应用程序中使用相同的上下文。
                        </p>
                        <p>以下步骤显示了全局应用程序上下文进程如何为<code class="codeph">SCOTT</code>设置客户端标识符：</p>
                        <ol>
                           <li>
                              <p>管理员使用以下语句创建全局上下文命名空间：</p><pre class="oac_no_warn" dir="ltr">创建或替换上下文hr_ctx使用hr.init全局访问;</pre></li>
                           <li>
                              <p>管理员为<code class="codeph">hr_ctx</code>应用程序上下文创建一个PL / SQL包，以指示对于此客户端标识符，在<code class="codeph">HR</code>名称空间中有一个名为<code class="codeph">responsibility</code>的应用程序上下文，值为<code class="codeph">13</code> ：</p><pre class="oac_no_warn" dir="ltr">创建或替换过程hr.init AS BEGIN DBMS_SESSION.SET_CONTEXT（namespace =&gt;'hr_ctx'，attribute =&gt;'责任'，值=&gt;'13'，用户名=&gt;'SCOTT'，client_id =&gt;'12345'）;结束; /</pre><p>此PL / SQL过程存储在<code class="codeph">HR</code>数据库模式中，但通常存储在安全管理员的模式中。
                              </p>
                           </li>
                           <li>
                              <p>每次<code class="codeph">scott</code>使用<code class="codeph">AppSvr</code>连接到数据库时，AppSvr应用程序都会发出以下命令以指示连接客户端标识：</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SESSION.SET_IDENTIFIER（'12345'）;</pre></li>
                           <li>
                              <p>当数据库会话中存在<code class="codeph">SYS_CONTEXT('hr_ctx','responsibility')</code>调用时，数据库将客户端标识符<code class="codeph">12345</code>与全局上下文匹配，然后返回值<code class="codeph">13</code> 。
                              </p>
                           </li>
                           <li>
                              <p>退出此数据库会话时， <code class="codeph">AppSvr</code>通过发出以下过程<code class="codeph">AppSvr</code>清除客户端标识符：</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_SESSION.CLEAR_IDENTIFIER（）;</pre></li>
                           <li>
                              <p>要释放应用程序上下文使用的内存， <code class="codeph">AppSvr</code>发出以下过程：</p><pre class="oac_no_warn" dir="ltr">DBMS_SESSION.CLEAR_CONTEXT（'hr_ctx'，'12345'）;</pre><p><code class="codeph">CLEAR_CONTEXT</code>当用户会话不再有效，或者在明确注销，超时，或由所确定的其他条件需要<code class="codeph">AppSvr</code>应用。
                              </p>
                           </li>
                        </ol>
                        <div class="infoboxnote" id="GUID-08E276B4-B0A5-4670-9B32-B96800F7AF4D__GUID-7E72A1CA-043A-4F5E-BC90-53729E089D68">
                           <p class="notep1">注意：</p>
                           <p>清除会话中的客户端标识符后，它将变为<code class="codeph">NULL</code>值。这意味着后续<code class="codeph">SYS_CONTEXT</code>调用仅检索具有<code class="codeph">NULL</code>客户端标识符的应用程序上下文，直到使用<code class="codeph">SET_IDENTIFIER</code>接口再次设置客户端标识符。
                           </p>
                        </div>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-BCE6DEDC-E0AD-4EEB-8FC3-EE89CBB40E61" title="一个简单的全局应用程序上下文使用数据库用户帐户创建用户会话;全局应用程序上下文适用于轻量级用户。">全局应用程序上下文进程</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="DBSEG228"></a><div class="props_rev_3"><a id="GUID-D58D6556-3DF0-4E51-BEF6-A2D30C5158B5" name="GUID-D58D6556-3DF0-4E51-BEF6-A2D30C5158B5"></a><h5 id="DBSEG-GUID-D58D6556-3DF0-4E51-BEF6-A2D30C5158B5" class="sect5">轻量级用户的全局应用程序上下文过程</h5>
                     <div>
                        <p>您可以为轻量级用户设置全局应用程序上下文。</p>
                        <p>您可以配置此访问权限，以便在其他用户登录时，他们无法访问全局应用程序上下文。</p>
                        <p>以下步骤显示轻量级用户应用程序的全局应用程序上下文进程。轻量级用户<code class="codeph">robert</code>通过应用程序不为数据库所知。
                        </p>
                        <ol>
                           <li>
                              <p>管理员使用以下语句创建全局上下文命名空间：</p><pre class="oac_no_warn" dir="ltr">创建语境hr_ctx使用hr.init全局访问;</pre></li>
                           <li>
                              <p><code class="codeph">HR</code>应用程序服务器<code class="codeph">AppSvr</code>作为<code class="codeph">appsmgr</code>用户启动并建立与<code class="codeph">HR</code>数据库的多个连接。
                              </p>
                           </li>
                           <li>
                              <p>用户<code class="codeph">robert</code>登录<code class="codeph">HR</code>应用服务器。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">AppSvr</code> <code class="codeph">robert</code>认证到应用程序。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">AppSvr</code>分配临时会话ID（或使用应用程序用户ID） <code class="codeph">12345</code> 。
                              </p>
                           </li>
                           <li>
                              <p>会话ID返回给<code class="codeph">robert</code>使用的Web浏览器，作为cookie的一部分或由<code class="codeph">AppSvr</code>维护。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">AppSvr</code>通过调用<code class="codeph">hr.init</code>包<code class="codeph">AppSvr</code>初始化此客户端的应用程序上下文，该包发出以下语句：</p><pre class="oac_no_warn" dir="ltr">DBMS_SESSION.SET_CONTEXT（'hr_ctx'，'id'，'robert'，'APPSMGR'，12345）; DBMS_SESSION.SET_CONTEXT（'hr_ctx'，'dept'，'sales'，'APPSMGR'，12345）;</pre></li>
                           <li>
                              <p><code class="codeph">AppSvr</code>为此会话分配数据库连接，并通过发出以下语句来初始化会话：</p><pre class="oac_no_warn" dir="ltr">DBMS_SESSION.SET_IDENTIFIER（12345）;</pre></li>
                           <li>
                              <p>此数据库会话中的所有<code class="codeph">SYS_CONTEXT</code>调用都返回仅属于客户端会话的应用程序上下文值。
                              </p>
                              <p>例如， <code class="codeph">SYS_CONTEXT('hr','id')</code>返回值<code class="codeph">robert</code> 。
                              </p>
                           </li>
                           <li>
                              <p>完成会话后， <code class="codeph">AppSvr</code>发出以下语句来清除客户端标识：</p><pre class="oac_no_warn" dir="ltr">DBMS_SESSION.CLEAR_IDENTIFIER（）;</pre></li>
                        </ol>
                        <p>即使其他用户登录到数据库，此用户也无法访问<code class="codeph">AppSvr</code>设置的全局上下文，因为<code class="codeph">AppSvr</code>指定只有登录了用户<code class="codeph">APPSMGR</code>的应用程序才能看到它。如果<code class="codeph">AppSvr</code>使用以下内容，则客户端ID设置为<code class="codeph">12345</code>任何用户会话都可以看到全局上下文：</p><pre class="oac_no_warn" dir="ltr">DBMS_SESSION.SET_CONTEXT（'hr_ctx'，'id'，'robert'，NULL，12345）; DBMS_SESSION.SET_CONTEXT（'hr_ctx'，'dept'，'sales'，NULL，12345）;</pre><p>将<code class="codeph">USERNAME</code>设置为<code class="codeph">NULL</code>可以使不同的用户共享相同的上下文。
                        </p>
                        <div class="infoboxnote" id="GUID-D58D6556-3DF0-4E51-BEF6-A2D30C5158B5__GUID-57539F15-8DBA-42B6-838F-4FAFF1F6EDBD">
                           <p class="notep1">注意：</p>
                           <p>请注意全局上下文的不同设置的安全含义。用户名中的<code class="codeph">NULL</code>表示任何用户都可以访问全局上下文。全局上下文中的<code class="codeph">NULL</code>客户端ID表示具有未初始化的客户端ID的会话可以访问全局上下文。要确保只有已登录的用户可以访问会话，请指定<code class="codeph">USER</code>而不是<code class="codeph">NULL</code> 。</p>
                        </div>
                        <p>您可以按如下方式查询会话中设置的客户端标识符：</p><pre class="oac_no_warn" dir="ltr">SELECT SYS_CONTEXT（'USERENV'，'CLIENT_IDENTIFIER'）FROM DUAL;</pre><p>应出现以下输出：</p><pre class="oac_no_warn" dir="ltr">SYS_CONTEXT（'USERENV'，'CLIENT_IDENTIFIER'）---------------------------------------- --------- 12345</pre><p>通过查询<code class="codeph">CLIENT_IDENTIFIER</code>和<code class="codeph">USERNAME</code>的<code class="codeph">V$SESSION</code>视图，安全管理员可以查看哪些会话具有客户端标识符，例如：</p><pre class="oac_no_warn" dir="ltr">COL client_identifier格式a18 SELECT CLIENT_IDENTIFIER，来自V $ SESSION的USERNAME;</pre><p>应出现以下输出：</p><pre class="oac_no_warn" dir="ltr">CLIENT_IDENTIFIER USERNAME ------------------ -------- 12345 APPSMGR</pre><p>要检查正在使用的全局上下文区域（以字节为单位）的数量，请使用以下查询：</p><pre class="oac_no_warn" dir="ltr">SELECT SYS_CONTEXT（'USERENV'，'GLOBAL_CONTEXT_MEMORY'）FROM DUAL;</pre><p>应出现以下输出：</p><pre class="oac_no_warn" dir="ltr">SYS_CONTEXT（'USERENV'，'GLOBAL_CONTEXT_MEMORY'）---------------------------------------- ------ 584</pre></div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-D58D6556-3DF0-4E51-BEF6-A2D30C5158B5__GUID-6F2C5DD2-DEAA-4731-B38B-7E3CC33D0308">
                           <p class="notep1">也可以看看：</p>
                           <p>有关使用<code class="codeph">USERENV</code>应用程序上下文的<code class="codeph">CLIENT_IDENTIFIER</code>预定义属性的更多信息：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="configuring-authentication.html#GUID-7BE66BDB-CDC9-4589-904B-60A24A9C74B8" title="内置应用程序上下文命名空间USERENV的CLIENT_IDENTIFIER预定义属性捕获用于全局应用程序上下文的应用程序用户名。">使用CLIENT_IDENTIFIER属性来保留用户身份</a></p>
                              </li>
                              <li>
                                 <p><a href="../sqlrf/USERENV.html#SQLRF06157" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></p>
                              </li>
                              <li>
                                 <p><a href="../lnoci/managing-scalable-platforms.html#LNOCI080" target="_blank"><span><cite>Oracle调用接口程序员指南</cite></span></a> 
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-BCE6DEDC-E0AD-4EEB-8FC3-EE89CBB40E61" title="一个简单的全局应用程序上下文使用数据库用户帐户创建用户会话;全局应用程序上下文适用于轻量级用户。">全局应用程序上下文进程</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="DBSEG70748"></a><div class="props_rev_3"><a id="GUID-DD567E61-0D89-48D0-A0CB-47297461824F" name="GUID-DD567E61-0D89-48D0-A0CB-47297461824F"></a><h3 id="DBSEG-GUID-DD567E61-0D89-48D0-A0CB-47297461824F" class="sect3">使用基于客户端会话的应用程序上下文</h3>
               <div>
                  <p>基于客户端会话的应用程序上下文存储在用户全局区域（UGA）中。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-66E7658C-0DD5-4283-902B-787C4AA2742E">关于基于客户端会话的应用程序上下文</a><br>Oracle调用接口（OCI）功能可以设置和清除用户全局区（UGA）用户会话信息。
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-63EC9C37-6415-43F1-BA98-7807D0458C57">在CLIENTCONTEXT命名空间中设置值</a><br>Oracle调用接口（OCI）可以设置<code class="codeph">CLIENTCONTEXT</code>命名空间。
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-9A1DBE71-0D3D-480F-8A04-81683F11B1DD">检索CLIENTCONTEXT命名空间</a><br>您可以使用Oracle Call Interface检索<code class="codeph">CLIEINTCONTEXT</code>命名空间。
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-F91C6512-F590-495A-92F9-D238B292AB11">示例：检索基于客户端会话的上下文的客户端会话ID值</a><br>OCI <code class="codeph">OCIStmtExecute</code>调用可以检索基于客户端会话的上下文的客户端会话ID值。
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-1DB451A4-7EB4-4499-A9E6-EC65C1ACB506">清除CLIENTCONTEXT命名空间中的设置</a><br>您可以使用Oracle Call Interface清除<code class="codeph">CLIENTCONTEXT</code>命名空间。
                     </li>
                     <li class="ulchildlink"><a href="using-application-contexts-to-retrieve-user-information.html#GUID-E53BB503-2639-421C-8F90-0072D32BBE7F">清除CLIENTCONTEXT命名空间中的所有设置</a><br>您可以使用Oracle调用接口（OCI）清除<code class="codeph">CLIENTCONTEXT</code>命名空间。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-51C9D5FA-6787-4F05-82EF-A5968BEDC5A0" title="应用程序上下文存储可以启用或阻止用户访问数据库中的数据的用户标识。">使用应用程序上下文检索用户信息</a></p>
                     </div>
                  </div>
               </div>
               <a id="DBSEG229"></a><div class="props_rev_3"><a id="GUID-66E7658C-0DD5-4283-902B-787C4AA2742E" name="GUID-66E7658C-0DD5-4283-902B-787C4AA2742E"></a><h4 id="DBSEG-GUID-66E7658C-0DD5-4283-902B-787C4AA2742E" class="sect4">关于基于客户端会话的应用程序上下文</h4>
                  <div>
                     <p>Oracle调用接口（OCI）功能可以设置和清除用户全局区（UGA）用户会话信息。</p>
                     <p>此类应用程序上下文在基于会话的应用程序上下文中的优点是，单个应用程序可以检查特定的非数据库用户会话数据，而不是让数据库执行此任务。另一个优点是，设置应用程序上下文值的调用包含在下一次调用服务器中，从而提高了性能。</p>
                     <p>但是，请注意应用程序上下文安全性会受到基于客户端会话的应用程序上下文的影响：任何应用程序用户都可以设置客户端应用程序上下文，并且不会在数据库中执行检查。</p>
                     <p>您只为客户端应用程序配置基于客户端会话的应用程序上下文。您不在客户端连接的数据库服务器上配置任何设置。数据库服务器中的任何应用程序上下文设置都不会影响基于客户端会话的应用程序上下</p>
                     <p>要配置基于客户端会话的应用程序上下文，请使用<code class="codeph">OCIAppCtxSet</code> OCI功能。基于客户端会话的应用程序上下文使用<code class="codeph">CLIENTCONTEXT</code>命名空间，可由任何OCI客户端或现有<code class="codeph">DBMS_SESSION</code>包更新，以用于应用程序上下文。Oracle数据库不会对此类型执行任何特权或程序包安全检查。
                     </p>
                     <p><code class="codeph">CLIENTCONTEXT</code>命名空间使单个应用程序事务既可以更改用户上下文信息，也可以使用相同的用户会话句柄来为新用户请求提供服务。您可以在<code class="codeph">CLIENTCONTEXT</code>命名空间中为属性设置或清除单个值，或清除其所有值。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>OCI客户端使用<code class="codeph">OCIAppCtx</code>函数为名称空间设置可变长度数据，称为<code class="codeph">OCISessionHandle</code> 。OCI网络单一往返传输在一次往返中将所有信息发送到服务器。在服务器端，您可以使用命名空间上的<code class="codeph">SYS_CONTEXT</code> SQL函数查询应用程序上下文信息。例如：</p>
                        </li>
                        <li>
                           <p>JDBC客户端使用<code class="codeph">oracle.jdbc.internal.OracleConnection</code>功能实现了同样的目的。
                           </p>
                        </li>
                     </ul>
                     <p>任何用户都可以在<code class="codeph">CLIENTCONTEXT</code>命名空间中设置，清除或收集信息，因为它不受基于包的安全性的保护。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-66E7658C-0DD5-4283-902B-787C4AA2742E__GUID-69368DEA-0A4E-4ED6-9A19-7E761B6A603C">
                        <p class="notep1">也可以看看：</p>
                        <p>有关客户端应用程序上下文的更多信息，请参阅<a href="../lnoci/managing-scalable-platforms.html#LNOCI3605" target="_blank"><span><cite>“Oracle调用接口程序员指南”</cite></span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-DD567E61-0D89-48D0-A0CB-47297461824F" title="基于客户端会话的应用程序上下文存储在用户全局区域（UGA）中。">使用基于客户端会话的应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG60025"></a><div class="props_rev_3"><a id="GUID-63EC9C37-6415-43F1-BA98-7807D0458C57" name="GUID-63EC9C37-6415-43F1-BA98-7807D0458C57"></a><h4 id="DBSEG-GUID-63EC9C37-6415-43F1-BA98-7807D0458C57" class="sect4">在CLIENTCONTEXT命名空间中设置值</h4>
                  <div>
                     <p>Oracle调用接口（OCI）可以设置<code class="codeph">CLIENTCONTEXT</code>命名空间。
                     </p>
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>要在<code class="codeph">CLIENTCONTEXT</code>命名空间中设置值，请使用<code class="codeph">OCIAppCTXSet</code>命令，使用以下语法：</p><pre class="oac_no_warn" dir="ltr">ERR = OCIAppCtxSet（（无效<span class="italic">*）session_handle，（dvoid</span> *） “CLIENTCONTEXT”，（UB4）13，（dvoid *） <span class="italic">属性名称</span> <span class="italic">，length_of_attribute_name（dvoid</span> <span class="italic"><span class="italic">*）ATTRIBUTE_VALUE，length_of_attribute_value，errhp，OCI_DEFAULT）;</span></span></pre></li>
                        </ul>
                        <p>在本规范中：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="italic"><code class="codeph">session_handle</code></span>表示<code class="codeph">OCISessionHandle</code>命名空间。
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">attribute_name</code></span>是<span class="italic"><code class="codeph">attribute_name</code></span>的名称。例如， <code class="codeph">responsibility</code> ，长度为<code class="codeph">14</code> 。
                              </p>
                           </li>
                           <li>
                              <p><span class="italic"><code class="codeph">attribute_value</code></span>是<span class="italic"><code class="codeph">attribute_value</code></span>的值。例如， <code class="codeph">manager</code> ，长度为<code class="codeph">7</code> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-63EC9C37-6415-43F1-BA98-7807D0458C57__GUID-4329F080-2FD1-4C87-A936-46FD859A5BF6">
                        <p class="notep1">也可以看看：</p>有关<code class="codeph">OCIAppCtx</code>功能的详细信息，请参阅<a href="../lnoci/managing-scalable-platforms.html#LNOCI080" target="_blank"><span><cite>Oracle Call Interface Programmer's Guide</cite></span></a></div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-DD567E61-0D89-48D0-A0CB-47297461824F" title="基于客户端会话的应用程序上下文存储在用户全局区域（UGA）中。">使用基于客户端会话的应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG97851"></a><div class="props_rev_3"><a id="GUID-9A1DBE71-0D3D-480F-8A04-81683F11B1DD" name="GUID-9A1DBE71-0D3D-480F-8A04-81683F11B1DD"></a><h4 id="DBSEG-GUID-9A1DBE71-0D3D-480F-8A04-81683F11B1DD" class="sect4">检索CLIENTCONTEXT命名空间</h4>
                  <div>
                     <p>您可以使用Oracle Call Interface检索<code class="codeph">CLIEINTCONTEXT</code>命名空间。
                     </p>
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>要检索<code class="codeph">CLIENTCONTEXT</code>命名空间，请使用以下任一语句的<code class="codeph">OCIStmtExecute</code>调用：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">SELECT SYS_CONTEXT('CLIENTCONTEXT', '</code> <span class="italic"><code class="codeph">attribute-1</code></span> <code class="codeph">') FROM DUAL;</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">SELECT VALUE FROM SESSION_CONTEXT WHERE NAMESPACE='CLIENTCONTEXT' AND ATTRIBUTE='</code> <span class="italic"><code class="codeph">attribute-1</code></span> <code class="codeph">';</code></p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <p><span class="italic"><code class="codeph">attribute-1</code></span>值可以是已在<code class="codeph">CLIENTCONTEXT</code>命名空间中设置的任何属性值。Oracle数据库仅检索set属性;否则，它返回<code class="codeph">NULL</code> 。通常，您可以使用<code class="codeph">OCIAppCtxSet</code>调用来设置属性。此外，您可以在OCI代码中嵌入<code class="codeph">DBMS_SESSION.SET_CONTEXT</code>调用来设置属性值。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-DD567E61-0D89-48D0-A0CB-47297461824F" title="基于客户端会话的应用程序上下文存储在用户全局区域（UGA）中。">使用基于客户端会话的应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG230"></a><div class="props_rev_3"><a id="GUID-F91C6512-F590-495A-92F9-D238B292AB11" name="GUID-F91C6512-F590-495A-92F9-D238B292AB11"></a><h4 id="DBSEG-GUID-F91C6512-F590-495A-92F9-D238B292AB11" class="sect4">示例：检索基于客户端会话的上下文的客户端会话ID值</h4>
                  <div>
                     <p>OCI <code class="codeph">OCIStmtExecute</code>调用可以检索基于客户端会话的上下文的客户端会话ID值。
                     </p>
                     <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-F91C6512-F590-495A-92F9-D238B292AB11__CIHCHABC">例11-10</a>显示了如何使用<code class="codeph">OCIStmtExecute</code>调用来检索客户端会话ID值。
                     </p>
                     <div class="example" id="GUID-F91C6512-F590-495A-92F9-D238B292AB11__CIHCHABC">
                        <p class="titleinexample">示例11-10检索基于客户端会话的上下文的客户端会话ID值</p><pre class="oac_no_warn" dir="ltr">oratext clientid [31]; OCIDefine * defnp1 =（OCIDefine *）0; OCIStmt * statementhndle; oratext * selcid =（oratext *）“SELECT SYS_CONTEXT（'CLIENTCONTEXT'，attribute）FROM DUAL”; OCIStmtPrepare（statementhndle，errhp，selcid，（ub4）strlen（（char *）selcid），（ub4）OCI_NTV_SYNTAX，（ub4）OCI_DEFAULT）; OCIDefineByPos（statementhndle，＆defnp1，errhp，1，（dvoid *）clientid，31，SQLT_STR，（dvoid *）0，（ub2 *）0，（ub2 *）0，OCI_DEFAULT）; OCIStmtExecute（servhndle，statementhndle，errhp，（ub4）1，（ub4）0，（CONST OCISnapshot *）NULL，（OCISnapshot *）NULL，OCI_DEFAULT）; printf（“CLIENT_IDENTIFIER =％s \ n”，clientid）;</pre><p>在这个例子中：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">oratext</code> ， <code class="codeph">OCIDefine</code> ， <code class="codeph">OCIStmt</code>和<code class="codeph">oratext</code>创建变量来存储客户端会话ID， <code class="codeph">OCIDefine</code>引用调用，语句句柄和要使用的<code class="codeph">SELECT</code>语句。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">OCIStmtPrepare</code>准备语句<code class="codeph">selcid</code>以供执行。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">OCIDefineByPos</code>为客户端会话ID定义输出变量<code class="codeph">clientid</code> 。</p>
                           </li>
                           <li>
                              <p><code class="codeph">OCIStmtExecute</code>执行<code class="codeph">selcid</code>变量中的语句。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">printf</code>打印检索到的客户端会话ID的格式化输出。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-DD567E61-0D89-48D0-A0CB-47297461824F" title="基于客户端会话的应用程序上下文存储在用户全局区域（UGA）中。">使用基于客户端会话的应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG231"></a><div class="props_rev_3"><a id="GUID-1DB451A4-7EB4-4499-A9E6-EC65C1ACB506" name="GUID-1DB451A4-7EB4-4499-A9E6-EC65C1ACB506"></a><h4 id="DBSEG-GUID-1DB451A4-7EB4-4499-A9E6-EC65C1ACB506" class="sect4">清除CLIENTCONTEXT命名空间中的设置</h4>
                  <div>
                     <p>您可以使用Oracle Call Interface清除<code class="codeph">CLIENTCONTEXT</code>命名空间。
                     </p>
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>要清除<code class="codeph">CLIENTCONTEXT</code>中的设置，请使用以下命令之一将值设置为<code class="codeph">NULL</code>或空字符串：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>以下命令将空字符串设置为零：</p><pre class="oac_no_warn" dir="ltr">（无效）OCIAppCtxSet（（无效<span class="italic">*）session_handle，（dvoid</span> *） “CLIENTCONTEXT”，13，（dvoid *） <span class="italic">属性名称</span> <span class="italic">，length_of_attribute_name，（dvoid</span> *）0，0，errhp OCI_DEFAULT）;</pre></li>
                                 <li>
                                    <p>以下命令将空字符串设置为空值：</p><pre class="oac_no_warn" dir="ltr">（无效）OCIAppCtxSet（（无效<span class="italic">*）session_handle，（dvoid</span> *） “CLIENTCONTEXT”，13（dvoid *） <span class="italic">属性名称</span> <span class="italic">，length_of_attribute_name，（dvoid</span> *） “”，0，errhp，OCI_DEFAULT）;</pre><p></p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-DD567E61-0D89-48D0-A0CB-47297461824F" title="基于客户端会话的应用程序上下文存储在用户全局区域（UGA）中。">使用基于客户端会话的应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="DBSEG232"></a><div class="props_rev_3"><a id="GUID-E53BB503-2639-421C-8F90-0072D32BBE7F" name="GUID-E53BB503-2639-421C-8F90-0072D32BBE7F"></a><h4 id="DBSEG-GUID-E53BB503-2639-421C-8F90-0072D32BBE7F" class="sect4">清除CLIENTCONTEXT命名空间中的所有设置</h4>
                  <div>
                     <p>您可以使用Oracle调用接口（OCI）清除<code class="codeph">CLIENTCONTEXT</code>命名空间。
                     </p>
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>要清除命名空间，请使用以下格式的<code class="codeph">OCIAppCtxClearAll</code>命令：</p><pre class="oac_no_warn" dir="ltr">err = OCIAppCtxClearAll（（void *） <span class="italic">session_handle</span> ，（dvoid *）“CLIENTCONTEXT”，13，errhp，OCI_DEFAULT）;</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-DD567E61-0D89-48D0-A0CB-47297461824F" title="基于客户端会话的应用程序上下文存储在用户全局区域（UGA）中。">使用基于客户端会话的应用程序上下文</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="DBSEG234"></a><a id="DBSEG233"></a><div class="props_rev_3"><a id="GUID-D3F0FFD2-6C58-4A8E-816D-CCE7B3117526" name="GUID-D3F0FFD2-6C58-4A8E-816D-CCE7B3117526"></a><h3 id="DBSEG-GUID-D3F0FFD2-6C58-4A8E-816D-CCE7B3117526" class="sect3">应用上下文数据字典视图</h3>
               <div>
                  <p>Oracle数据库提供数据字典视图，提供有关应用程序上下文的信息。</p>
                  <div class="section">
                     <p><a href="using-application-contexts-to-retrieve-user-information.html#GUID-D3F0FFD2-6C58-4A8E-816D-CCE7B3117526__CIHEEEHH" title="应用上下文视图">表11-3</a>列出了这些数据字典视图。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformalwide" id="GUID-D3F0FFD2-6C58-4A8E-816D-CCE7B3117526__CIHEEEHH">
                     <p class="titleintable">表11-3显示有关应用程序上下文的信息的数据字典视图</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="显示有关应用程序上下文信息的数据字典视图" width="100%" border="1" summary="Application Context Views" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="26%" id="d84552e15869">视图</th>
                              <th align="left" valign="bottom" width="74%" id="d84552e15872">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d84552e15877" headers="d84552e15869 ">
                                 <p><code class="codeph">ALL_CONTEXT</code></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d84552e15877 d84552e15872 ">
                                 <p>描述当前会话中使用<code class="codeph">DBMS_SESSION.SET_CONTEXT</code>过程指定了属性和值的所有上下文命名空间。它列出了命名空间及其关联的模式和PL / SQL包。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d84552e15888" headers="d84552e15869 ">
                                 <p><code class="codeph">ALL_POLICY_CONTEXTS</code></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d84552e15888 d84552e15872 ">
                                 <p>描述为当前用户可访问的同义词，表和视图定义的驱动上下文。（驱动上下文是虚拟专用数据库策略中使用的上下文。）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d84552e15896" headers="d84552e15869 ">
                                 <p><code class="codeph">DBA_CONTEXT</code></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d84552e15896 d84552e15872 ">
                                 <p>提供数据库中的所有上下文命名空间信息它的列与<code class="codeph">ALL_CONTEXT</code>视图中的列相同，只是它包含<code class="codeph">TYPE</code>列。<code class="codeph">TYPE</code>列描述了如何访问或初始化应用程序上下文。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d84552e15913" headers="d84552e15869 ">
                                 <p><code class="codeph">DBA_OBJECTS</code></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d84552e15913 d84552e15872 ">
                                 <p>提供现有应用程序上下文的名称。查询<code class="codeph">OBJECT_TYPE</code>所述的柱<code class="codeph">DBA_OBJECTS</code>视图，如下所示：</p><pre class="oac_no_warn" dir="ltr">SELECT OBJECT_NAME FROM DBA_OBJECTS WHERE OBJECT_TYPE ='CONTEXT';</pre></td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d84552e15929" headers="d84552e15869 ">
                                 <p><code class="codeph">DBA_POLICY_CONTEXTS</code></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d84552e15929 d84552e15872 ">
                                 <p>描述<code class="codeph">DBMS_RLS.ADD_POLICY_CONTEXT</code>过程添加的数据库中的所有驱动上下文。其列与<code class="codeph">ALL_POLICY_CONTEXTS</code>列相同。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d84552e15943" headers="d84552e15869 ">
                                 <p><code class="codeph">SESSION_CONTEXT</code></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d84552e15943 d84552e15872 ">
                                 <p>描述为当前会话设置的上下文属性及其值。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d84552e15951" headers="d84552e15869 ">
                                 <p><code class="codeph">USER_POLICY_CONTEXTS</code></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d84552e15951 d84552e15872 ">
                                 <p>描述为当前用户拥有的同义词，表和视图定义的驱动上下文。它的列（除了<code class="codeph">OBJECT_OWNER</code> ）是相同的<code class="codeph">ALL_POLICY_CONTEXTS</code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d84552e15965" headers="d84552e15869 ">
                                 <p><code class="codeph">V $ CONTEXT</code></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d84552e15965 d84552e15872 ">
                                 <p>列表在当前PDB会话中设置属性。除非您授予用户对其的<code class="codeph">SELECT</code>权限，否则用户无权访问此视图。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="26%" id="d84552e15976" headers="d84552e15869 ">
                                 <p><code class="codeph">V $ SESSION</code></p>
                              </td>
                              <td align="left" valign="top" width="74%" headers="d84552e15976 d84552e15872 ">
                                 <p>列出有关每个当前PDB会话的详细信息。除非您授予用户对其的<code class="codeph">SELECT</code>权限，否则用户无权访问此视图。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <div class="infobox-tip" id="GUID-D3F0FFD2-6C58-4A8E-816D-CCE7B3117526__GUID-308D2526-9B08-45DE-A068-38A7D164AB82">
                        <p class="notep1">小费：</p>
                        <p>除了这些视图之外，如果在运行使用应用程序上下文的应用程序时发现错误，请检查数据库跟踪文件。<code class="codeph">USER_DUMP_DEST</code>初始化参数设置跟踪文件的目录位置。您可以通过在SQL * Plus中发出<code class="codeph">SHOW PARAMETER USER_DUMP_DEST</code>来查找此参数的值。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-D3F0FFD2-6C58-4A8E-816D-CCE7B3117526__GUID-A664E0C0-5581-4B74-93F1-5882F79B65A8">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关跟踪文件的详细信息，请<a href="../tgsql/performing-application-tracing.html#TGSQL809" target="_blank"><span><cite>参见“Oracle数据库SQL调优指南”</cite></span></a></p>
                        </li>
                        <li>
                           <p><a href="../refrn/index.html" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>有关这些视图的详细信息</p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-application-contexts-to-retrieve-user-information.html#GUID-51C9D5FA-6787-4F05-82EF-A5968BEDC5A0" title="应用程序上下文存储可以启用或阻止用户访问数据库中的数据的用户标识。">使用应用程序上下文检索用户信息</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
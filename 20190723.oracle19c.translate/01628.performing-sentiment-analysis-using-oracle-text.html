<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Sentiment analysis enables you to identify a positive or negative sentiment in a search topic."></meta>
      <meta name="description" content="Sentiment analysis enables you to identify a positive or negative sentiment in a search topic."></meta>
      <title>使用Oracle Text执行情感分析</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Application Developer&#39;s Guide "></meta>
      <meta property="og:description" content="Sentiment analysis enables you to identify a positive or negative sentiment in a search topic."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Application Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="text-application-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-07T01:45:16-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96275-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="using-XML-query-result-set-interface.html" title="Previous" type="text/html"></link>
      <link rel="next" href="administering-oracle-text.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Text Application Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="CCAPP"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-XML-query-result-set-interface.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="administering-oracle-text.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">应用程序开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用Oracle Text执行情感分析</li>
            </ol>
            <a id="GUID-12014209-8E70-49A8-BD75-86A9C4D401F6" name="GUID-12014209-8E70-49A8-BD75-86A9C4D401F6"></a>
            
            <h2 id="CCAPP-GUID-12014209-8E70-49A8-BD75-86A9C4D401F6" class="sect2"><span class="enumeration_chapter">16</span>使用Oracle Text执行情感分析</h2>
         </header>
         <div class="ind">
            <div>
               <p>情感分析使您能够识别搜索主题中的积极或消极情绪。</p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-3E08A4C1-D50A-49FE-AEAE-50F487BFD935" title="情感分析使用经过训练的情感分类器来为文档中的文档或主题提供情绪信息。">情绪分析概述</a></p>
                  </li>
                  <li>
                     <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-28A9255E-38A0-422F-B97B-4D518DAA1B7C" title="使用CTX_DDL.CREATE_PREFERENCE过程创建情绪分类器首选项，并使用CTX_DDL.SET_ATTRIBUTE过程来定义其属性。与用户定义的情绪分类器首选项相关联的分类器类型是SENTIMENT_CLASSIFIER。">创建情感分类器首选项</a></p>
                  </li>
                  <li>
                     <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-7F1B2D64-7F7F-436F-81D3-7C8D18E956BE" title="训练情绪分类器生成用于为搜索关键字提供正面或负面情绪的分类规则。">训练情绪量词</a></p>
                  </li>
                  <li>
                     <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-B18361E3-7A3E-4AA7-B96E-80F99247986D" title="使用CTX_DOC包中的过程对文档集中的单个文档执行情绪分析。对于每个文档，您可以确定整个文档的单个情绪分数，也可以确定文档中每个主题的个人情绪分数。">使用CTX_DOC包执行情感分析</a></p>
                  </li>
                  <li>
                     <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-0573BE5F-5D3D-41CB-B991-F209345B67E8" title="XML查询结果集接口（RSI）使您可以使用默认情绪分类器或用户定义的情绪分类器对一组文档执行情绪分析。必须执行情感分析的文档存储在文档表中。">使用RSI执行情感分析</a></p>
                  </li>
               </ul>
            </div>
            <div class="sect2"><a id="GUID-3E08A4C1-D50A-49FE-AEAE-50F487BFD935" name="GUID-3E08A4C1-D50A-49FE-AEAE-50F487BFD935"></a><h3 id="CCAPP-GUID-3E08A4C1-D50A-49FE-AEAE-50F487BFD935" class="sect3"><span class="enumeration_section">16.1</span>情绪分析概述</h3>
               <div>
                  <p>情感分析使用经过训练的情感分类器来为文档中的文档或主题提供情绪信息。</p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-BCC4B880-0569-486D-B11A-00CF3BF18C65" title="Oracle Text允许您使用经过训练识别情绪元数据的情绪分类器对主题或文档执行情绪分析。">关于情感分析</a></p>
                     </li>
                     <li>
                        <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-BFCAB1FF-C8A1-4B1F-A2DD-ADD202306A65" title="情感分类器是一种文档分类器，用于提取关于主题或文档的情感元数据。">关于情感分类器</a></p>
                     </li>
                     <li>
                        <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-AE1A5F94-980D-4B47-A615-556BCB1AE96B" title="要执行情绪分析，请运行包含情绪分类器的情绪查询，该情绪分类器必须用于识别情绪信息。分类器可以是默认值或用户定义的情绪分类器。">关于执行情感分析</a></p>
                     </li>
                     <li>
                        <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-763CEE48-6799-4E41-B909-9CD8DDACD819" title="Oracle Text支持多个接口来执行情绪分析。">情感分析界面</a></p>
                     </li>
                  </ul>
               </div>
               <div class="sect3"><a id="GUID-BCC4B880-0569-486D-B11A-00CF3BF18C65" name="GUID-BCC4B880-0569-486D-B11A-00CF3BF18C65"></a><h4 id="CCAPP-GUID-BCC4B880-0569-486D-B11A-00CF3BF18C65" class="sect4"><span class="enumeration_section">16.1.1</span>关于情感分析</h4>
                  <div>
                     <p>Oracle Text允许您使用经过训练识别情绪元数据的情绪分类器对主题或文档执行情绪分析。</p>
                     <p>随着数据量的不断增加，组织必须获得有关其数据的更多见解，而不仅仅是获取点击以响应搜索查询。洞察力可以是回答某些基本类型的查询（例如天气查询或关于最近事件的查询）或提供关于用户指定主题的意见的形式。关键字搜索提供包含搜索字词的结果列表。但是，要识别关于搜索词的情绪或意见，必须浏览结果，然后手动找到所需的情绪信息。情感分析提供了一个识别一组文档中的情绪信息的一步过程。</p>
                     <p>情感分析是从一组文档中识别和提取关于指定主题或实体的情感元数据的过程。训练有素的情绪分类器可以识别情绪。当您使用情绪分析运行查询时，除了搜索结果之外，还会识别并显示情绪元数据。情感分析提供了诸如“产品评论是正面还是负面？”等问题的答案。或“客户是否满意或不满意？”例如，从包含针对特定产品的多个评论的文档集中，您可以确定指示产品是好还是坏的整体情绪。</p>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-BFCAB1FF-C8A1-4B1F-A2DD-ADD202306A65" name="GUID-BFCAB1FF-C8A1-4B1F-A2DD-ADD202306A65"></a><h4 id="CCAPP-GUID-BFCAB1FF-C8A1-4B1F-A2DD-ADD202306A65" class="sect4"><span class="enumeration_section">16.1.2</span>关于情感分类器</h4>
                  <div>
                     <p>情感分类器是一种文档分类器，用于提取关于主题或文档的情感元数据。</p>
                     <p>要使用情绪分类器执行情绪分析，您必须首先将情绪分类器首选项与情绪分类器相关联，然后训练情绪分类器。</p>
                     <p>您可以将用户定义的情绪分类与<code class="codeph">SENTIMENT_CLASSIFIER.</code>类型的情绪分类器首选项相关联<code class="codeph">SENTIMENT_CLASSIFIER.</code>情绪分类器首选项指定用于训练情绪分类器的参数。这些参数被定义为情感分类器偏好的属性。您可以创建情绪分类器首选项，也可以使用默认的<code class="codeph">CTXSYS.DEFAULT_SENTIMENT_CLASSIFIER.</code>要创建用户定义的情绪分类器首选项，请使用<code class="codeph">CTX_DDL.CREATE_PREFERENCE</code>过程定义情绪分类器首选项，并使用<code class="codeph">CTX_DDL.SET_ATTRIBUTE</code>过程定义其参数。
                     </p>
                     <p>要训练情绪分类器，您需要提供关联的情绪分类器首选项，培训文档集和情绪类别。如果未指定分类器首选项，则Oracle Text将使用训练参数的默认值。您可以使用示例文档集和指定的首选项来训练情绪分类器。您将每个示例文档分配到一个类别。Oracle Text使用此情绪分类器推导出一组分类规则，用于定义必须如何执行情感分析。使用<code class="codeph">CTX_CLS.SA_TRAIN</code>过程训练情绪分类器。
                     </p>
                     <p>通常，您可以为不同类别的文档定义和培训单独的情感分类器，例如财务，产品评论和音乐。如果您不想创建自己的情绪分类器，或者如果没有合适的训练数据来训练您的分类器，则可以使用Oracle Text提供的默认情绪分类器。默认情绪分类器是无人监管的。</p>
                     <div class="infoboxnote" id="GUID-BFCAB1FF-C8A1-4B1F-A2DD-ADD202306A65__GUID-C91FE32D-4FC5-4568-B62E-1886CB0D7D9B">
                        <p class="notep1">注意：</p>
                        <p>默认情绪分类器仅适用于<code class="codeph">AUTO_LEXER.</code>不要将<code class="codeph">AUTO_LEXER</code>与用户定义的情绪分类器一起使用。
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-BFCAB1FF-C8A1-4B1F-A2DD-ADD202306A65__GUID-11C05CC2-7BA8-433F-B483-73CCDF9B212E">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-28A9255E-38A0-422F-B97B-4D518DAA1B7C" title="使用CTX_DDL.CREATE_PREFERENCE过程创建情绪分类器首选项，并使用CTX_DDL.SET_ATTRIBUTE过程来定义其属性。与用户定义的情绪分类器首选项相关联的分类器类型是SENTIMENT_CLASSIFIER。">创建情感分类器首选项</a></p>
                           </li>
                           <li>
                              <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-7F1B2D64-7F7F-436F-81D3-7C8D18E956BE" title="训练情绪分类器生成用于为搜索关键字提供正面或负面情绪的分类规则。">训练情绪量词</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-AE1A5F94-980D-4B47-A615-556BCB1AE96B" name="GUID-AE1A5F94-980D-4B47-A615-556BCB1AE96B"></a><h4 id="CCAPP-GUID-AE1A5F94-980D-4B47-A615-556BCB1AE96B" class="sect4"><span class="enumeration_section">16.1.3</span>关于执行情感分析</h4>
                  <div>
                     <p>要执行情绪分析，请运行包含情绪分类器的情绪查询，该情绪分类器必须用于识别情绪信息。分类器可以是默认值或用户定义的情绪分类器。</p>
                     <p>您只能在搜索操作中执行情绪分析。Oracle Text搜索指定的关键字并生成结果集。然后，对结果集执行情绪分析以识别每个结果的情绪分数。如果未在查询中显式指定情绪分类器，则使用默认分类器。</p>
                     <p>您可以为整个文档标识一个单一情绪，也可以为文档中的每个主题单独表达情绪。大多数情况下，文档包含多个主题，作者对每个主题的情绪可能不同。在这种情况下，文档级别的情绪分数可能没有用，因为它们无法识别与文档中不同主题相关联的情绪分数。识别主题级别的情绪分数可提供所需的答案。例如，在搜索包含相机评论的一组文档时，文档级别的情绪会告诉您相机是否良好。假设您想要关于相机图像质量的一般意见。执行主题级情绪分析，以“图像质量”作为主题之一提供所需信息。</p>
                     <div class="infoboxnote" id="GUID-AE1A5F94-980D-4B47-A615-556BCB1AE96B__GUID-1D6BF387-1E09-4916-8077-B9B948E64952">
                        <p class="notep1">注意：</p>
                        <p>如果您没有为情绪分析指定感兴趣的主题，那么Oracle Text将返回整个文档的整体情绪。</p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-AE1A5F94-980D-4B47-A615-556BCB1AE96B__GUID-67C1CA1D-CC3D-4D41-B2AB-16DB200E0352">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-B18361E3-7A3E-4AA7-B96E-80F99247986D" title="使用CTX_DOC包中的过程对文档集中的单个文档执行情绪分析。对于每个文档，您可以确定整个文档的单个情绪分数，也可以确定文档中每个主题的个人情绪分数。">使用CTX_DOC包执行情感分析</a></p>
                           </li>
                           <li>
                              <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-0573BE5F-5D3D-41CB-B991-F209345B67E8" title="XML查询结果集接口（RSI）使您可以使用默认情绪分类器或用户定义的情绪分类器对一组文档执行情绪分析。必须执行情感分析的文档存储在文档表中。">使用RSI执行情感分析</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-763CEE48-6799-4E41-B909-9CD8DDACD819" name="GUID-763CEE48-6799-4E41-B909-9CD8DDACD819"></a><h4 id="CCAPP-GUID-763CEE48-6799-4E41-B909-9CD8DDACD819" class="sect4"><span class="enumeration_section">16.1.4</span>情感分析界面</h4>
                  <div>
                     <p>Oracle Text支持多个接口来执行情绪分析。</p>
                     <p>使用以下其中一个接口运行情绪查询：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">CTX_DOC</code>包中的程序</p>
                        </li>
                        <li>
                           <p>XML查询结果集接口（RSI）</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-763CEE48-6799-4E41-B909-9CD8DDACD819__GUID-B715DDD9-40AA-40A6-A47F-61204A81FB3F">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-B18361E3-7A3E-4AA7-B96E-80F99247986D" title="使用CTX_DOC包中的过程对文档集中的单个文档执行情绪分析。对于每个文档，您可以确定整个文档的单个情绪分数，也可以确定文档中每个主题的个人情绪分数。">使用CTX_DOC包执行情感分析</a></p>
                           </li>
                           <li>
                              <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-0573BE5F-5D3D-41CB-B991-F209345B67E8" title="XML查询结果集接口（RSI）使您可以使用默认情绪分类器或用户定义的情绪分类器对一组文档执行情绪分析。必须执行情感分析的文档存储在文档表中。">使用RSI执行情感分析</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-28A9255E-38A0-422F-B97B-4D518DAA1B7C" name="GUID-28A9255E-38A0-422F-B97B-4D518DAA1B7C"></a><h3 id="CCAPP-GUID-28A9255E-38A0-422F-B97B-4D518DAA1B7C" class="sect3"><span class="enumeration_section">16.2</span>创建情感分类器首选项</h3>
               <div>
                  <p>使用<code class="codeph">CTX_DDL.CREATE_PREFERENCE</code>过程创建情绪分类器首选项，并使用<code class="codeph">CTX_DDL.SET_ATTRIBUTE</code>过程来定义其属性。与用户定义的情绪分类器首选项相关联的分类器类型是<code class="codeph">SENTIMENT_CLASSIFIER</code> 。</p>
                  <div class="section">
                     <p>要创建情绪分类器首选项：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>要定义情绪分类器首选项，请使用<code class="codeph">CTX_DDL.CREATE_PREFERENCE</code>过程。分类器必须是<code class="codeph">SENTIMENT_CLASSIFIER.</code>类型<code class="codeph">SENTIMENT_CLASSIFIER.</code></span></li>
                     <li><span>要定义情绪分类器首选项的属性，请使用<code class="codeph">CTX_DDL.SET_ATTRIBUTE</code>过程。属性定义用于训练情绪分类器的参数。</span></li>
                  </ol>
                  <div class="example" id="GUID-28A9255E-38A0-422F-B97B-4D518DAA1B7C__GUID-B7C85F21-D69F-4A34-94C0-124806CA3E6A">
                     <p class="titleinexample">示例16-1创建情感分类器首选项</p>
                     <p>以下示例创建名为<code class="codeph">clsfier_camera.</code>的情感分类器首选项<code class="codeph">clsfier_camera.</code> 此首选项用于对包含SLR相机评论的一组文档进行分类。
                     </p>
                     <ol>
                        <li>
                           <p>使用类型<code class="codeph">SENTIMENT_CLASSIFIER.</code>定义名为<code class="codeph">clsfier_camera</code>的情感分类器首选项<code class="codeph">SENTIMENT_CLASSIFIER.</code></p><pre class="oac_no_warn" dir="ltr">exec ctx_ddl.create_preference（'clsfier_camera'，'SENTIMENT_CLASSIFIER'）;</pre></li>
                        <li>
                           <p>定义<code class="codeph">clsfier_camera</code>情绪分类器首选项的属性。将1000设置为要提取的最大要素数。将600设置为分类器运行的迭代次数。
                           </p><pre class="pre codeblock"><code>exec ctx_ddl.set_attribute（'clsfier_camera'，'MAX_FEATURES'，'1000'）; exec ctx_ddl.set_attribute（'clsfier_camera'，'NUM_ITERATIONS'，'600'）;</code></pre></li>
                     </ol>
                     <p>对于未明确定义的属性，将使用默认值。</p>
                     <div class="infoboxnotealso" id="GUID-28A9255E-38A0-422F-B97B-4D518DAA1B7C__GUID-BE8410FE-45F3-493A-BD1A-3363FC421717">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../ccref/CTX_DDL-package.html#CCREF-GUID-56C4580F-6A43-43F4-BB83-DFAEB72A8DC3" target="_blank"><span><cite>Oracle Text Reference</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-BFCAB1FF-C8A1-4B1F-A2DD-ADD202306A65" title="情感分类器是一种文档分类器，用于提取关于主题或文档的情感元数据。">关于情感分类器</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="example" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-7F1B2D64-7F7F-436F-81D3-7C8D18E956BE" name="GUID-7F1B2D64-7F7F-436F-81D3-7C8D18E956BE"></a><h3 id="CCAPP-GUID-7F1B2D64-7F7F-436F-81D3-7C8D18E956BE" class="sect3"><span class="enumeration_section">16.3</span>训练情绪分类器</h3>
               <div>
                  <p>训练情绪分类器生成用于为搜索关键字提供正面或负面情绪的分类规则。</p>
                  <div class="section">
                     <p>以下示例训练情绪分类器，该分类器可以对摄像机的用户评论执行情绪分析：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>创建并填充培训文档表。此表包含培训集文档的实际文本或文件名（如果文档存在于外部）。</span><div>
                           <p>确保随机选择培训文档，以避免受过训练的情绪分类器出现任何可能的偏差。积极和消极文件的分发不得有偏差。Oracle Text在训练情绪分类器时检查分布。</p>
                        </div>
                        <div><pre class="pre codeblock"><code>create table training_camera（review_id number primary key，text varchar2（2000））;插入training_camera值（1，'/ sa / reviews / cameras / review1.txt'）;插入training_camera值（2，'/ sa / reviews / cameras / review2.txt'）;插入training_camera值（3，'/ sa / reviews / cameras / review3.txt'）;插入training_camera值（4，'/ sa / reviews / cameras / review4.txt'）;</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>创建并填充类别表。</span><div>
                           <p>此表指定文档表中存在的文档的培训标签。它告诉分类器训练集文档的真实情绪。</p>
                           <p>文档表的主键必须与类别表的唯一键具有外键关系。必须将这些列的名称传递给<code class="codeph">CTX_CLS.SA_TRAIN</code>过程，以便情感标签可以与相应的文档相关联。
                           </p>
                           <p>Oracle Text验证为分类器首选项和<code class="codeph">category</code>值指定的参数。<code class="codeph">category</code>值限制为1表示正数，2表示负数，0表示中性情绪。训练分类器时不使用<code class="codeph">category</code>为0的文档（中性文档）。除了文档ID和类别之外，类别表中的其他列也不被分类器使用。
                           </p>
                        </div>
                        <div><pre class="pre codeblock"><code>create table train_category（doc_id number，category number，category_desc varchar2（100））;插入train_category值（1,0，'中性'）;插入train_category值（2,1，'positive'）;插入train_category值（3,2，'negative'）;插入train_category值（4,2，'negative'）;</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>在培训文档表上创建上下文索引。该索引用于在训练情感分类器的同时提取训练文档的元数据。</span><div>
                           <p>在此示例中，创建索引而不填充它。</p><pre class="pre codeblock"><code>exec ctx_ddl.create_preference（'fds'，'FILE_DATASTORE'）;在training_camera（text）上创建索引docx indextype是ctxsys.context参数（'datastore fds nopopulate'）;</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>（可选）创建<code class="codeph">clsfier_camera</code>情感分类器首选项，该首选项对包含相机评论的文档集执行情绪分析。</span></li>
                     <li class="stepexpand"><span>训练情绪分类器<code class="codeph">clsfier_camera.</code></span><div>
                           <p>在培训期间，Oracle Text确定正面和负面文档的比例。如果该比率不在0.4到0.6的范围内，则写入CTX日志的警告表示情绪分类器是倾斜的。在对情绪分类器进行训练之后，可以将其用于情绪查询以执行情绪分析。</p>
                           <p>在以下示例中， <code class="codeph">clsfier_camera</code>是正在训练的情绪分类器的名称， <code class="codeph">review_id</code>是文档训练集中文档ID列的名称， <code class="codeph">train_category</code>是包含训练集文档的标签的类别表的名称， <code class="codeph">doc_id</code>是类别表中的文档ID列， <code class="codeph">category</code>是类别表中的category列， <code class="codeph">clsfier</code>是用于训练分类器的情感分类器首选项的名称。
                           </p><pre class="pre codeblock"><code>exec ctx_cls.sa_train_model（'clsfier_camera'，'docx'，'review_id'，'train_category'，'doc_id'，'category'，'clsfier'）;</code></pre><div class="infoboxnote" id="GUID-7F1B2D64-7F7F-436F-81D3-7C8D18E956BE__GUID-809DC3C9-C6AD-4BC9-9EC9-61E1F47EF6B9">
                              <p class="notep1">注意：</p>
                              <p>如果在运行<code class="codeph">CTX_CLS.SA_TRAIN_MODEL</code>过程时未指定情绪分类器首选项，则Oracle Text将使用默认首选项<code class="codeph">CTXSYS.DEFAULT_SENTIMENT_CLASSIFIER.</code></p>
                           </div>
                        </div>
                     </li>
                  </ol>
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-7F1B2D64-7F7F-436F-81D3-7C8D18E956BE__GUID-BF0078BC-2A5D-4733-BA1E-2A1593D32743">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-28A9255E-38A0-422F-B97B-4D518DAA1B7C" title="使用CTX_DDL.CREATE_PREFERENCE过程创建情绪分类器首选项，并使用CTX_DDL.SET_ATTRIBUTE过程来定义其属性。与用户定义的情绪分类器首选项相关联的分类器类型是SENTIMENT_CLASSIFIER。">创建情感分类器首选项</a></p>
                           </li>
                           <li>
                              <p><a href="performing-sentiment-analysis-using-oracle-text.html#GUID-BFCAB1FF-C8A1-4B1F-A2DD-ADD202306A65" title="情感分类器是一种文档分类器，用于提取关于主题或文档的情感元数据。">关于情感分类器</a></p>
                           </li>
                           <li>
                              <p><a href="../ccref/CTX_CLS-package.html#CCREF-GUID-DACF815B-1797-4DAD-85B5-C156BF22D76D" target="_blank"><span><cite>Oracle Text Reference</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-B18361E3-7A3E-4AA7-B96E-80F99247986D" name="GUID-B18361E3-7A3E-4AA7-B96E-80F99247986D"></a><h3 id="CCAPP-GUID-B18361E3-7A3E-4AA7-B96E-80F99247986D" class="sect3"><span class="enumeration_section">16.4</span>使用CTX_DOC程序包执行情感分析</h3>
               <div>
                  <p>使用<code class="codeph">CTX_DOC</code>包中的过程对文档集中的单个文档执行情绪分析。对于每个文档，您可以确定整个文档的单个情绪分数，也可以确定文档中每个主题的个人情绪分数。
                  </p>
                  <div class="p">
                     <p>在执行情绪分析之前，必须在文档集上创建上下文索引。以下命令在<code class="codeph">camera_reviews</code>表中的文档集上创建<code class="codeph">camera_revidx</code>上下文索引：</p><pre class="pre codeblock"><code>在camera_reviews（review_text）上创建索引camera_revidx indextype是ctxsys.context参数（'lexer mylexer stoplist ctxsys.default_stoplist'）;</code></pre><p>要使用<code class="codeph">CTX_DOC</code>包执行情绪分析，请使用以下方法之一：</p>
                  </div>
                  <!-- class="section" -->
                  <ul>
                     <li class="stepexpand"><span>使用所需参数运行<code class="codeph">CTX_DOC.SENTIMENT_AGGREGATE</code>过程。</span><div>
                           <p>此过程为整个文档提供单个合并情绪分数。</p>
                           <p>情绪分数是-100到100范围内的值，它表示情绪的强度。负分表示负面情绪，正分表示积极情绪。根据情绪分数，您可以将分数分组为强烈否定（-80至-100），负数（-80至-50），中性（-50至+50），正数（+50至+80）等标签，并且非常积极（+80到+100）。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>使用所需参数运行<code class="codeph">CTX_DOC.SENTIMENT</code>过程。</span><div>
                           <p>此过程返回文档中包含搜索词的各个段，并为每个段提供关联的情绪分数。</p>
                        </div>
                     </li>
                  </ul>
                  <div class="example" id="GUID-B18361E3-7A3E-4AA7-B96E-80F99247986D__GUID-37B3FD88-0844-4A80-BFEF-F6BEF51D3872">
                     <p class="titleinexample">例16-2获取文档的单一情绪分数</p>
                     <p>以下示例使用<code class="codeph">clsfier_camera</code>情绪分类器为整个文档提供单个聚合情绪分数。情绪分类器是创建和训练的。包含文档集的表具有<code class="codeph">camera_revidx</code>上下文索引。文档表中必须执行情感分析的文档的<code class="codeph">doc_id</code>是49。正在生成情感分数的主题是“尼康”。
                     </p><pre class="pre codeblock"><code>从双重选择ctx_doc.sentiment_aggregate（'camera_revidx'，'49'，'Nikon'，'clsfier_camera'）; CTX_DOC.SENTIMENT_AGGREGATE（'CAMERA_REVIDX'，'49'，'NIKON'，'CLSFIER_CAMERA'）------------------------------ -------------------------------------------- 74选1行。
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-B18361E3-7A3E-4AA7-B96E-80F99247986D__GUID-EA45FCE3-64BE-49B2-8EE1-FE36FCD45729">
                     <p class="titleinexample">示例16-3使用默认分类器获取单个情绪分数</p>
                     <p>以下示例使用默认情绪分类器为整个文档提供聚合情绪分数。包含文档集的表具有<code class="codeph">camera_revidx</code>上下文索引。文档表中必须进行情感分析的文档的<code class="codeph">doc_id</code>是1。
                     </p><pre class="pre codeblock"><code>从双重中选择ctx_doc.sentiment_aggregate（'camera_revidx'，'1'）; CTX_DOC.SENTIMENT_AGGREGATE（'CAMERA_REVIDX'，'1'）-------------------------------------- ------ 2选1行。
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-B18361E3-7A3E-4AA7-B96E-80F99247986D__GUID-86693482-588A-4CB9-96C0-DABEF42DA3B0">
                     <p class="titleinexample">示例16-4获取文档中每个主题的情绪分数</p>
                     <p>以下示例使用<code class="codeph">clsfier_camera</code>情绪分类器为文档中的每个段生成情绪分数。情绪分类器是创建和训练的。包含文档集的表具有<code class="codeph">camera_revidx</code>上下文索引。文档表中必须执行情感分析的文档的<code class="codeph">doc_id</code>是49。正在生成情感分数的主题是“尼康”。将使用列片段（ <code class="codeph">CLOB</code> ）和分数（ <code class="codeph">NUMBER</code> ）创建将使用分析结果填充的<code class="codeph">restab</code>结果表。
                     </p><pre class="pre codeblock"><code>exec ctx_doc.sentiment（'camera_revidx'，'49'，'Nikon'，'restab'，'clsfier_camera'，starttag =&gt;'&lt;&lt;'，endtag =&gt;'&gt;&gt;'）; SQL&gt; select * from restab; SNIPPET ------------------------------------------------- ------------------------------- SCORE ----------它花了&lt;&lt; Nikon &gt;&gt; a虽然生产出精湛的紧凑型85mm镜头，但这一次他们终于做对了。毫无疑问，这是一款精美的人像镜头，用于拍摄头肩肖像（唯一一款光学上更好的镜头是“尼康”的传奇10 5mm f2.5尼克尔镜头，以及它的近光学双镜头， 105毫米f2.8微尼克尔。75由于105mm f2.5尼克尔镜头没有自动对焦版本，因此对于“尼康”自动对焦单反相机的拥有者而言，这可能是完美适中的长焦镜头。选择84 3行。
</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-B18361E3-7A3E-4AA7-B96E-80F99247986D__GUID-0D4F4F16-81A5-4698-87F8-CEC92C8F922F">
                     <p class="titleinexample">示例16-5获取文档中主题的情感分数</p>
                     <p>以下示例使用<code class="codeph">tdrbrtsent03_cl</code>情绪分类器为文档中的每个段生成情绪分数。情绪分类器是创建和训练的。包含文档集的表具有<code class="codeph">tdrbrtsent03_idx</code>上下文索引。文档表中必须进行情感分析的文档的<code class="codeph">doc_id</code>是1。正在生成情感分数的主题是“电影”。将使用列片段和分数创建<code class="codeph">tdrbrtsent03_rtab</code>结果表，该表将填充分析结果。
                     </p><pre class="pre codeblock"><code>SQL&gt; exec ctx_doc.sentiment（'tdrbrtsent03_idx'，'1'，'movie'，'tdrbrtsent03_rtab'，'tdrbrtsent03_cl'）; PL / SQL过程成功完成。SQL&gt; select * from tdrbrtsent03_rtab; SNIPPET ------------------------------------------------- ------------------------------- SCORE ---------- &lt;b&gt;电影&lt;/ b &gt;有点长，但是nicholson非常有趣，运行时间非常快 - 选择了62行。</code></pre><div class="infoboxnotealso" id="GUID-B18361E3-7A3E-4AA7-B96E-80F99247986D__GUID-ADB82467-72DA-4B33-A9F1-C78A1965F378">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../ccref/CTX_DOC-package.html#CCREF-GUID-F1588275-38FF-4515-BD39-DD67C98444CB" target="_blank"><span><cite>Oracle Text Reference中的</cite></span></a> <code class="codeph">CTX_DOC.SENTIMENT_AGGREGATE</code></p>
                           </li>
                           <li>
                              <p><a href="../ccref/CTX_DOC-package.html#CCREF-GUID-539DCA29-C32C-4749-9C0E-EE57EAC42A6E" target="_blank"><span><cite>Oracle Text Reference中的</cite></span></a> <code class="codeph">CTX_DOC.SENTIMENT</code></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="example" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-0573BE5F-5D3D-41CB-B991-F209345B67E8" name="GUID-0573BE5F-5D3D-41CB-B991-F209345B67E8"></a><h3 id="CCAPP-GUID-0573BE5F-5D3D-41CB-B991-F209345B67E8" class="sect3"><span class="enumeration_section">16.5</span>使用RSI执行情感分析</h3>
               <div>
                  <p>XML查询结果集接口（RSI）使您可以使用默认情绪分类器或用户定义的情绪分类器对一组文档执行情绪分析。必须执行情感分析的文档存储在文档表中。</p>
                  <div class="section">
                     <p>使用输入RSI中的<code class="codeph">sentiment</code>元素指示除了结果集描述符（RSD）中指定的其他操作之外，还必须在查询时执行情绪分析。如果为<code class="codeph">sentiment</code>元素的<code class="codeph">classifier</code>属性指定值，则使用指定的情绪分类器来执行情绪分析。如果省略<code class="codeph">classifier</code>属性，则Oracle Text将使用默认情绪分类器执行情绪分析。<code class="codeph">sentiment</code>元素包含一个名为<code class="codeph">item</code>的子元素，用于指定在情绪分析期间必须生成情绪的主题或概念。
                     </p>
                     <p>您可以为每个文档生成单个情绪分数，也可以为文档中的每个主题生成单独的情绪分数。使用<code class="codeph">item</code>元素的<code class="codeph">agg</code>属性为每个文档生成单个聚合情绪分数。
                     </p>
                     <p>您可以使用关键字查询或<code class="codeph">ABOUT</code>运算符执行情绪分类。使用<code class="codeph">ABOUT</code>运算符时，结果集包含使用同义词库标识的关键字的同义词。
                     </p>
                     <p>要使用RSI执行情绪分析：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>创建并训练您将用于执行情绪分析的情绪分类器。</span></li>
                     <li class="stepexpand"><span>创建包含要分析的文档和文档表上的上下文索引的文档表。</span></li>
                     <li class="stepexpand"><span>使用查询中的必需元素和属性来执行情绪分析。</span><div>
                           <p>RSI必须包含<code class="codeph">sentiment</code>元素。
                           </p>
                        </div>
                     </li>
                  </ol>
                  <div class="example" id="GUID-0573BE5F-5D3D-41CB-B991-F209345B67E8__GUID-086DCCA1-B2A0-4932-B2EF-BFADF7C736F3">
                     <p class="titleinexample">例16-6输入RSD以执行情绪分析</p>
                     <p>以下示例执行情绪分析并为“镜头”主题生成情绪。驾驶查询是“相机”的关键字查询。<code class="codeph">sentiment</code>元素指定必须使用<code class="codeph">clsfier_camera</code>情绪分类器执行情绪分析。之前使用<code class="codeph">CTX_CLS.SA_TRAIN_MODEL</code>过程创建并训练了此分类器。<code class="codeph">camera_revidx</code>上下文索引位于文档集表中。
                     </p>
                     <p>情绪评分范围为-100至100。正分表示积极情绪，而负分表示负面情绪。分数的绝对值表示正面和负面情绪的大小。</p>
                     <p>要执行情绪分析并获取文档中每个主题的情绪分数：</p>
                     <ol>
                        <li>
                           <p>创建将存储搜索操作结果的<code class="codeph">rs</code>结果集表。
                           </p><pre class="pre codeblock"><code>SQL&gt; var rs clob; SQL&gt; exec dbms_lob.createtemporary（：rs，TRUE，DBMS_LOB.SESSION）;</code></pre></li>
                        <li>
                           <p>执行情绪分析作为搜索查询的一部分。</p>
                           <p>搜索的关键字是“相机”。进行情绪分析的主题是“镜头”。</p><pre class="pre codeblock"><code>begin ctx_query.result_set（'camera_revidx'，'camera'，'&lt;ctx_result_set_descriptor&gt; &lt;hitlist start_hit_num =“1”end_hit_num =“10”order =“score desc”&gt; &lt;sentiment classifier =“clsfier_camera”&gt; &lt;item topic =“lens “/&gt; &lt;item topic =”picture quality“agg =”true“/&gt; &lt;/ sentiment&gt; &lt;/ hitlist&gt; &lt;/ ctx_result_set_descriptor&gt;'，：rs）;结束; /</code></pre></li>
                        <li>
                           <p>查看存储在结果表中的结果。</p>
                           <p>其他应用程序可以使用XML结果集进行进一步处理。为简洁起见，删除了一些输出。对于文档中的每个细分，得分代表细分市场的情绪评分。</p><pre class="pre codeblock"><code>SQL&gt;从double中选择xmltype（：rs）; XMLTYPE（：RS）--------------------------------------------- ----------------------------------- &lt;ctx_result_set&gt; &lt;hitlist&gt; &lt;hit&gt; &lt;sentiment&gt; &lt;item topic =“lens”&gt; &lt;segment&gt; &lt;segment_text&gt;第一次发送是因为&lt;b&gt;镜头&lt;/ b&gt;门无法打开相机，而且几乎要从轨道上掉下来了。八个月后，闪存退出所有模式工作，门再次失败！&lt;/ segment_text&gt; &lt;segment_score&gt; -81 &lt;/ segment_score&gt; &lt;/ segment&gt; &lt;/ item&gt; &lt;item topic =“picture quality”&gt; &lt;score&gt; -75 &lt;/ score&gt; &lt;/ item&gt; &lt;/ sentiment&gt; &lt;/ hit &gt; &lt;hit&gt; &lt;sentiment&gt; &lt;item topic =“lens”&gt; &lt;segment&gt; &lt;segment_text&gt;我真的对它印象深刻。强大的变焦，清晰的&lt;b&gt;镜头&lt;/ b&gt;，图像质量不错。我也在各个商店玩过其他一些Panasonic型号，只是为了更好地感受它们，以及花费几个小时&lt;/ segment_text&gt; &lt;segment_score&gt; 67 &lt;/ segment_score&gt; &lt;/ segment&gt; &lt;/ item&gt; &lt;item topic =“picture quality”&gt; &lt;score&gt; -1 &lt;/ score&gt; &lt;/ item&gt; &lt;/ sentiment&gt; &lt;/ hit&gt;。 。 。。 。 。&lt;/ hitlist&gt; &lt;/ ctx_result_set&gt;</code></pre></li>
                     </ol>
                     <div class="infoboxnotealso" id="GUID-0573BE5F-5D3D-41CB-B991-F209345B67E8__GUID-63371DD2-2497-4E35-8A10-00E066ECC8E5">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../ccref/CTX_QUERY-package.html#CCREF-GUID-EBB44B13-1648-444D-BACA-134C3EBA2058" target="_blank"><span><cite>Oracle Text Reference</cite></span></a></p>
                     </div>
                  </div>
                  <!-- class="example" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
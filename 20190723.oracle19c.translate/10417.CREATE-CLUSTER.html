<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>创建集群</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Language Reference "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Language Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96310-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="CREATE-AUDIT-POLICY-Unified-Auditing.html" title="Previous" type="text/html"></link>
      <link rel="next" href="CREATE-CONTEXT.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference"></meta>
    <meta name="dcterms.isVersionOf" content="SQLRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="CREATE-AUDIT-POLICY-Unified-Auditing.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="CREATE-CONTEXT.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL语言参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="SQL-Statements-COMMIT-to-CREATE-JAVA.html" property="item" typeof="WebPage"><span property="name">SQL语句：COMMIT到CREATE JAVA</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">创建集群</li>
            </ol>
            <a id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7" name="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7"></a><a id="SQLRF53782"></a><a id="SQLRF53783"></a><a id="SQLRF53784"></a><a id="SQLRF56679"></a><a id="SQLRF53785"></a><a id="SQLRF53786"></a><a id="SQLRF53787"></a><a id="SQLRF53788"></a><a id="SQLRF53789"></a><a id="SQLRF53790"></a><a id="SQLRF55610"></a><a id="SQLRF53791"></a><a id="SQLRF53792"></a><a id="SQLRF53793"></a><a id="SQLRF53794"></a><a id="SQLRF53795"></a><a id="SQLRF53796"></a><a id="SQLRF53797"></a><a id="SQLRF53798"></a><a id="SQLRF53799"></a><a id="SQLRF53800"></a><a id="SQLRF53801"></a><a id="SQLRF53802"></a><a id="SQLRF53803"></a><a id="SQLRF56680"></a><a id="SQLRF56681"></a><a id="SQLRF53804"></a><a id="SQLRF53805"></a><a id="SQLRF53806"></a><a id="SQLRF53807"></a><a id="SQLRF53808"></a><a id="SQLRF56682"></a><a id="SQLRF01201"></a>
            
            <h2 id="SQLRF-GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7" class="sect2">创建集群</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-B6508060-622A-4864-A1EC-67B7FAFFAE2D">目的</p>
                  <p><a id="d304879e185" class="indexterm-anchor"></a>使用<code class="codeph">CREATE</code> <code class="codeph">CLUSTER</code>语句创建集群。<span class="bold">集群</span>是包含来自一个或多个表的数据的模式对象。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="bold">索引集群</span>必须包含多个表，并且集群中的所有表都有一个或多个共同列。Oracle数据库将所有共享相同群集密钥的表中的所有行存储在一起。
                        </p>
                     </li>
                     <li>
                        <p>在可以包含一个或多个表的<span class="bold">散列集群中</span> ，Oracle数据库将具有相同散列键值的行存储在一起。
                        </p>
                     </li>
                  </ul>
                  <p>有关现有集群的信息，请查询<code class="codeph">USER_CLUSTERS</code> ， <code class="codeph">ALL_CLUSTERS</code>和<code class="codeph">DBA_CLUSTERS</code>数据字典视图。
                  </p>
                  <div class="infoboxnotealso" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-0FC72F17-C658-4C42-B392-5AB30E64C00D">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="../cncpt/tables-and-table-clusters.html#CNCPT608" target="_blank"><span class="italic">Oracle Database Concepts</span></a>获取有关集群的一般信息</p>
                        </li>
                        <li>
                           <p>有关何时使用群集的建议，请<a href="../tgsql/index.html" target="_blank"><span class="italic">参见“Oracle数据库SQL调优指南”</span></a></p>
                        </li>
                        <li>
                           <p>有关数据字典视图的信息，请参阅<a href="../refrn/about-static-data-dictionary-views.html#REFRN002" target="_blank"><span class="italic">Oracle数据库参考</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-B2030990-35B5-4F48-AB81-974B3E6D3CBF">先决条件</p>
                  <p>要在自己的架构中创建集群，您必须具有<code class="codeph">CREATE</code> <code class="codeph">CLUSTER</code>系统特权。要在另一个用户的架构中创建集群，您必须具有<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">CLUSTER</code>系统特权。此外，包含集群的模式的所有者必须在包含集群的表空间上具有空间配额，或者具有<code class="codeph">UNLIMITED</code> <code class="codeph">TABLESPACE</code>系统特权。
                  </p>
                  <p>最初创建群集时，Oracle数据库不会自动为群集创建索引。在使用<code class="codeph">CREATE</code> <code class="codeph">INDEX</code>语句创建集群索引之前，无法对索引集群中的集群表发出数据操作语言（DML）语句。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-71EAF7AC-D9D0-4980-B492-C418C047C986">句法</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-7ECBEFF7-F431-4809-B111-C83C24D45EB7"><span class="italic">create_cluster</span> :: =</p>
                  <div class="figure" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-1110AAD7-919D-4F56-8499-C3FFB8AF10A5"><img src="img/create_cluster.gif" alt="下面是create_cluster.eps的描述" title="下面是create_cluster.eps的描述" longdesc="img_text/create_cluster.html"><br><a href="img_text/create_cluster.html">说明create_cluster.eps的说明</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="CREATE-CLUSTER.html#GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2127411">physical_attributes_clause :: =</a></span> ， <span class="italic"><a href="size_clause.html#GUID-E97FADC2-A6E1-4D68-9F79-DCA271B86517__CHDEAIID">size_clause :: =</a></span> ， <span class="italic"><a href="CREATE-CLUSTER.html#GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__CACHDBII">cluster_range_partitions :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2127411">
                  <p class="subhead1" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-1F2F0FB3-6E36-4E02-B199-FCCE53694F95"><span class="italic">physical_attributes_clause</span> :: =</p><a id="d304879e311" class="indexterm-anchor"></a><div class="figure" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-B81E97AB-4AB0-4B30-931D-17C95912706A"><img src="img/physical_attributes_clause.gif" alt="physical_attributes_clause.eps的描述如下" title="physical_attributes_clause.eps的描述如下" longdesc="img_text/physical_attributes_clause.html"><br><a href="img_text/physical_attributes_clause.html">physical_attributes_clause.eps插图的描述</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="storage_clause.html#GUID-C5A67610-3160-41E9-8D48-03206BD5ED15__CJACEJGB">storage_clause :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-F7F2D588-640D-4227-AF9E-84DD8529A4B7"><span class="italic">parallel_clause</span> :: =</p>
                  <div class="figure" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-8460B8B5-F291-486D-8208-7F124B1799D5"><img src="img/parallel_clause.gif" alt="parallel_clause.eps的描述如下" title="parallel_clause.eps的描述如下" longdesc="img_text/parallel_clause.html"><br><a href="img_text/parallel_clause.html">parallel_clause.eps插图的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__CACHDBII">
                  <p class="subhead1" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-45490A5E-4631-4235-ABBF-F1B0004FCC02"><span class="italic">cluster_range_partitions</span> :: =</p>
                  <div class="figure" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-3C150C55-579B-4217-A045-DDA8BC8BE232"><img src="img/cluster_range_partitions.gif" alt="下面是cluster_range_partitions.eps的描述" title="下面是cluster_range_partitions.eps的描述" longdesc="img_text/cluster_range_partitions.html"><br><a href="img_text/cluster_range_partitions.html">插图描述cluster_range_partitions.eps</a></div>
                  <!-- class="figure" -->
                  <p>（ <span class="italic"><a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__I2125922">range_values_clause :: =</a></span> ， <span class="italic"><a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__I2127282">table_partition_description :: =</a></span> ）</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-15F5C359-F9BF-4088-A277-2C62AD4E7CB0">语义</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-67C695D0-9F67-4B23-A141-404B8C608A3F"><span class="italic">模式</span></p>
                  <p>指定要包含群集的架构。如果省略<span class="italic"><code class="codeph">schema</code></span> ，则Oracle Database会在当前模式中创建集群。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-12C7881C-E89E-4677-A4D7-F5CEB00F4129"><span class="italic">簇</span></p>
                  <p>Specify是要创建的集群的名称。该名称必须满足<span class="q">“ <a href="Database-Object-Names-and-Qualifiers.html#GUID-75337742-67FD-4EC0-985F-741C93D918DA">数据库对象命名规则</a> ”中</span>列出的要求。
                  </p>
                  <p>创建群集后，可以向其中添加表。一个集群最多可以包含32个表。包含LOB列或<code class="codeph">Any*</code> Oracle提供的类的列的对象表和表不能是群集的一部分。创建集群并向其添加表后，集群是透明的。您可以使用SQL语句访问聚簇表，就像访问非聚簇表一样。
                  </p>
                  <div class="infoboxnotealso" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-E5298ADE-07A3-4FD2-844A-57114D612490">
                     <p class="notep1">也可以看看：</p>
                     <p>有关将表添加到集群的信息，请参阅<a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6">CREATE TABLE</a> ， <span class="q">“ <a href="CREATE-CLUSTER.html#GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2105033">创建集群：示例</a> ”</span>和<span class="q">“ <a href="CREATE-CLUSTER.html#GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2129354">将表添加到集群：示例</a> ”</span></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-40A26293-2600-4F3A-8856-1CEA74ADCCE1"><span class="italic">柱</span></p>
                  <p>在群集密钥中指定一个或多个列的名称。您最多可以指定16个群集密钥列。这些列必须在每个聚簇表中的数据类型和大小与列中对应，尽管它们不需要在名称中对应。</p>
                  <p>您不能将完整性约束指定为群集键列定义的一部分。相反，您可以将完整性约束与属于该集群的表相关联。</p>
                  <div class="infoboxnotealso" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-CD338A8C-92E0-4B64-96B4-19DC546B0778">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="CREATE-CLUSTER.html#GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2129341">群集密钥：示例</a> ”</span></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-FF130B4C-B331-49D8-8B4C-2D0AE0318C40"><span class="italic">数据类型</span></p>
                  <p>指定每个群集键列的数据类型。</p>
                  <p><span class="bold">群集数据类型的限制</span></p>
                  <p>群集数据类型受以下限制：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您不能指定数据类型为<code class="codeph">LONG</code> ， <code class="codeph">LONG</code> <code class="codeph">RAW</code> ， <code class="codeph">REF</code> ，嵌套表，varray， <code class="codeph">BLOB</code> ， <code class="codeph">CLOB</code> ， <code class="codeph">BFILE</code> ， <code class="codeph">Any*</code> Oracle提供的类型或用户定义的对象类型的群集键列。
                        </p>
                     </li>
                     <li>
                        <p>您可以指定<code class="codeph">ROWID</code>类型的列，但Oracle数据库不保证此类列中的值是有效的rowid。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-15882F2E-7BD6-4C78-9393-39298E66D0A0">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="Data-Types.html#GUID-A3C0D836-BADB-44E5-A5D4-265BA5968483">数据类型</a> ”</span>有关数据类型的信息</p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-3E76F857-DE4B-4CA4-8C6D-1A69F1C685DE">COLLATE</p>
                  <p>使用此子句为群集键中的字符数据类型列指定数据绑定排序规则。</p>
                  <p>对于<span class="italic"><code class="codeph">column_collation_name</code></span> ，请按如下所示指定排序规则：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>创建索引集群或已排序的散列集群时，可以指定以下排序规则之一： <code class="codeph">BINARY</code> ， <code class="codeph">USING_NLS_COMP</code> ， <code class="codeph">USING_NLS_SORT</code>或<code class="codeph">USING_NLS_SORT_CS</code> 。</p>
                     </li>
                     <li>
                        <p>创建未排序的哈希集群时，可以指定任何有效的命名排序规则或伪排序规则。</p>
                     </li>
                  </ul>
                  <p>如果省略此子句，则群集键中的列将继承包含群集的架构的有效架构默认排序规则。有关有效架构默认排序规则的详细信息，请参阅<code class="codeph">ALTER</code> <code class="codeph">SESSION</code>的<a href="ALTER-SESSION.html#GUID-27186B28-7EFC-4998-B1ED-2B905CC0211B__DEFAULT_COLLATION-39CF7241">DEFAULT_COLLATION</a>子句。
                  </p>
                  <p>群集键列的排序规则必须与群集中创建的表中相应列的排序规则相匹配。</p>
                  <p>仅当<code class="codeph">COMPATIBLE</code>初始化参数设置为<code class="codeph">12.2</code>或更高，并且<code class="codeph">MAX_STRING_SIZE</code>初始化参数设置为<code class="codeph">EXTENDED</code> ，才能指定<code class="codeph">COLLATE</code>子句。</p>
                  <p>若要更改群集键列的排序规则，必须重新创建群集。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-177601AC-C0EA-402A-823C-DCD92F337B1C">分类</p>
                  <p><a id="d304879e522" class="indexterm-anchor"></a>仅当您要创建哈希群集时， <code class="codeph">SORT</code>关键字才有效。在执行DML操作时应用哈希函数后，此子句指示Oracle数据库对此列上的集群行进行排序。这样做可能会在后续查询群集数据期间缩短响应时间。
                  </p>
                  <p><span class="bold">对分类哈希集群的限制</span></p>
                  <p>排序的散列簇不支持行依赖性。</p>
                  <div class="infoboxnotealso" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-0FD5B8B6-9897-4EBF-8D91-530CD8691FCE">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关创建哈希群集的信息，请参阅<span class="q">“ <a href="CREATE-CLUSTER.html#GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2143441">HASHKEYS子句</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>有关更多信息，请<a href="../admin/managing-hash-clusters.html#ADMIN-GUID-ADB821B7-70D2-4829-956A-F74436754BCF" target="_blank"><span class="italic">参见Oracle数据库管理员指南</span></a> 。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-53570B9D-E9C0-45F2-8FA6-2BA2DD5F1D15"><span class="italic">physical_attributes_clause</span></p>
                  <p><span class="italic"><code class="codeph">physical_attributes_clause</code></span>允许您指定集群的存储特征。群集中的每个表也使用这些存储特性。如果未指定这些参数的值，则Oracle数据库使用以下默认值：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">PCTFREE</code> ：10</p>
                     </li>
                     <li>
                        <p><code class="codeph">PCTUSED</code> ：40</p>
                     </li>
                     <li>
                        <p><code class="codeph">INITRANS</code> ：2或包含群集的表空间的默认值，以较大者为准</p>
                        <div class="infoboxnotealso" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-61E79AEE-1D8B-42B5-B38B-485D5D38F35E">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="italic"><a href="physical_attributes_clause.html#GUID-A15063A9-3237-43D3-B0AE-D01F6E80B393">physical_attributes_clause</a></span>和<span class="italic"><a href="physical_attributes_clause.html#GUID-A15063A9-3237-43D3-B0AE-D01F6E80B393__I1026834">storage_clause</a></span>获取这些子句的完整描述</p>
                        </div>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-80193066-D39B-48A6-A784-418B81744B2D">尺寸</p>
                  <p><a id="d304879e593" class="indexterm-anchor"></a><a id="d304879e597" class="indexterm-anchor"></a>指定保留的空间量，以存储具有相同群集键值或相同哈希值的所有行。此空间确定存储在数据块中的最大簇数或散列值。如果<code class="codeph">SIZE</code>不是数据块大小的除数，则Oracle数据库使用下一个最大除数。如果<code class="codeph">SIZE</code>大于数据块大小，则数据库使用操作系统块大小，为每个群集或散列值保留至少一个数据块。
                  </p>
                  <p>在确定具有群集密钥值的行要保留多少空间时，数据库还会考虑群集密钥的长度。较大的群集密钥需要更大的大小。要查看实际大小，请查询<code class="codeph">USER_CLUSTERS</code>数据字典视图的<code class="codeph">KEY_SIZE</code>列。（此值不适用于散列簇，因为散列值实际上不存储在群集中。）
                  </p>
                  <p>如果省略此参数，则数据库会为每个群集键值或哈希值保留一个数据块。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-1AF77BBB-9A08-4AF9-ADBD-452F74CAF2BD">TABLESPACE</p>
                  <p><a id="d304879e624" class="indexterm-anchor"></a><a id="d304879e628" class="indexterm-anchor"></a>指定要在其中创建集群的表空间。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-A6725492-C92D-4A03-9299-388A5DBF24F9">INDEX条款</p>
                  <p><a id="d304879e637" class="indexterm-anchor"></a><a id="d304879e641" class="indexterm-anchor"></a><a id="d304879e645" class="indexterm-anchor"></a>指定<code class="codeph">INDEX</code>以创建<span class="bold">索引群集</span> 。在索引集群中，Oracle数据库将具有相同集群键值的行存储在一起。每个不同的群集键值仅在每个数据块中存储一次，而不管其出现的表和行的数量。如果既未指定<code class="codeph">INDEX</code>也未指定<code class="codeph">HASHKEYS</code> ，则Oracle数据库默认情况下会创建索引集群。
                  </p>
                  <p>创建索引集群后，必须先在集群密钥上创建索引，然后才能对集群中的表发出任何数据操作语言（DML）语句。该索引称为<span class="bold">集群索引</span> 。
                  </p>
                  <p>您无法为散列集群创建集群索引，也无需在散列集群键上创建索引。</p>
                  <div class="infoboxnotealso" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-9E977F02-2559-40B4-8CE5-D6FB02631BA7">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="CREATE-INDEX.html#GUID-1F89BBC0-825F-4215-AF71-7588E31D8BFE">CREATE INDEX</a>用于创建集群索引和<a href="../cncpt/tables-and-table-clusters.html#CNCPT608" target="_blank"><span class="italic">Oracle Database Concepts</span></a>的信息，以获取索引集群中的常规信息</p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2143441">
                  <p class="subhead1" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-3AB91083-FBD7-4919-BE6D-DC37F432F51E">HASHKEYS条款</p>
                  <p><a id="d304879e683" class="indexterm-anchor"></a><a id="d304879e687" class="indexterm-anchor"></a><a id="d304879e691" class="indexterm-anchor"></a>指定<code class="codeph">HASHKEYS</code>子句以创建<span class="bold">散列簇</span>并指定<span class="bold">散列簇</span>的散列值数。在散列集群中，Oracle数据库将具有相同散列键值的行存储在一起。行的哈希值是群集的哈希函数返回的值。
                  </p>
                  <p>Oracle数据库将<code class="codeph">HASHKEYS</code>值向上<code class="codeph">HASHKEYS</code>入为最接近的素数，以获得实际的哈希值数。此参数的最小值为2。如果省略<code class="codeph">INDEX</code>子句和<code class="codeph">HASHKEYS</code>参数，则数据库默认情况下会创建索引集群。
                  </p>
                  <p>创建哈希集群时，数据库会立即根据<code class="codeph">SIZE</code>和<code class="codeph">HASHKEYS</code>参数的值为集群分配空间。
                  </p>
                  <div class="infoboxnotealso" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-06713289-8E68-459C-8D30-1920B3DC88E2">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../cncpt/tables-and-table-clusters.html#CNCPT609" target="_blank"><span class="italic">Oracle数据库概念</span></a> ，以获取有关Oracle数据库如何为集群分配空间和<span class="q">“ <a href="CREATE-CLUSTER.html#GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2129365">哈希集群：示例</a> ”的</span>更多信息</p>
                  </div>
                  <p><span class="bold">单表</span> <a id="d304879e735" class="indexterm-anchor"></a><a id="d304879e739" class="indexterm-anchor"></a><a id="d304879e743" class="indexterm-anchor"></a></p>
                  <p><code class="codeph">SINGLE</code> <code class="codeph">TABLE</code>表示集群是一种只包含一个表的散列集群。此子句可以更快地访问表中的行。
                  </p>
                  <p><span class="bold">单表群集的限制</span></p>
                  <p>一次只能在群集中存在一个表。但是，您可以删除表并在同一群集中创建不同的表。</p>
                  <div class="infoboxnotealso" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-136537C2-6467-490E-844C-7BF80766CF03">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="CREATE-CLUSTER.html#GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2129381">单表哈希集群：示例</a> ”</span></p>
                  </div>
                  <p><span class="bold">HASH是</span> <span class="bold"><span class="italic">expr</span></span></p>
                  <p>指定要用作散列簇的散列函数的表达式。表达方式：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>必须评估为正值</p>
                     </li>
                     <li>
                        <p>必须包含至少一个列，其中包含任何数据类型的引用列，只要整个表达式的计算结果为0。例如： <span class="italic"><code class="codeph">number_column</code></span> * <code class="codeph">LENGTH</code> （ <span class="italic"><code class="codeph">varchar2_column</code></span> ）</p>
                     </li>
                     <li>
                        <p>无法引用用户定义的PL / SQL函数</p>
                     </li>
                     <li>
                        <p>无法引用伪列<code class="codeph">LEVEL</code>或<code class="codeph">ROWNUM</code></p>
                     </li>
                     <li>
                        <p>无法引用用户相关的函数<code class="codeph">USERENV</code> ， <code class="codeph">UID</code>或<code class="codeph">USER</code>或日期时间函数<code class="codeph">CURRENT_DATE</code> ， <code class="codeph">CURRENT_TIMESTAMP</code> ， <code class="codeph">DBTIMEZONE</code> ， <code class="codeph">EXTRACT</code> （datetime）， <code class="codeph">FROM_TZ</code> ， <code class="codeph">LOCALTIMESTAMP</code> ， <code class="codeph">NUMTODSINTERVAL</code> ， <code class="codeph">NUMTOYMINTERVAL</code> ， <code class="codeph">SESSIONTIMEZONE</code> ， <code class="codeph">SYSDATE</code> ， <code class="codeph">SYSTIMESTAMP</code> ， <code class="codeph">TO_DSINTERVAL</code> ， <code class="codeph">TO_TIMESTAMP</code> ， <code class="codeph">TO_DATE</code> ， <code class="codeph">TO_TIMESTAMP_TZ</code> ， <code class="codeph">TO_YMINTERVAL</code>和<code class="codeph">TZ_OFFSET</code> 。</p>
                     </li>
                     <li>
                        <p>无法评估为常数</p>
                     </li>
                     <li>
                        <p>不能是标量子查询表达式</p>
                     </li>
                     <li>
                        <p>不能包含使用架构或对象名称限定的列（群集名称除外）</p>
                     </li>
                  </ul>
                  <p>如果省略<code class="codeph">HASH</code> <code class="codeph">IS</code>子句，则Oracle数据库<code class="codeph">HASH</code>哈希群集使用内部哈希函数。
                  </p>
                  <p>有关现有散列函数的信息，请查询<code class="codeph">USER_</code> ， <code class="codeph">ALL_</code>和<code class="codeph">DBA_CLUSTER_HASH_EXPRESSIONS</code>数据字典表。
                  </p>
                  <p>哈希列的群集键可以具有任何数据类型的一个或多个列。具有由非整数列组成的复合集群密钥或集群密钥的散列集群必须使用内部散列函数。</p>
                  <div class="infoboxnotealso" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-3185CD8C-2D78-488D-B30C-4AEF1764E250">
                     <p class="notep1">也可以看看：</p>
                     <p>有关数据字典视图的信息，请参阅<a href="../refrn/about-static-data-dictionary-views.html#REFRN002" target="_blank"><span class="italic">Oracle数据库参考</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-19493FF7-7EFA-4D0B-94FD-722B414A2CE0"><span class="italic">parallel_clause</span></p>
                  <p><span class="italic"><code class="codeph">parallel_clause</code></span>允许您并行化集群的创建。
                  </p>
                  <p>有关此子句的完整信息，请参阅<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>文档中的<span class="italic"><a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__I2159323">parallel_clause</a></span> 。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-4B7B115D-1BB9-4357-8204-1EBA9280DFBA">NOROWDEPENDENCIES | ROWDEPENDENCIES</p>
                  <p><a id="d304879e934" class="indexterm-anchor"></a><a id="d304879e938" class="indexterm-anchor"></a><a id="d304879e942" class="indexterm-anchor"></a><a id="d304879e944" class="indexterm-anchor"></a>此子句与它对表的群集具有相同的行为。有关信息，请参阅<code class="codeph">CREATE</code> <code class="codeph">TABLE</code> <span class="q">“ <a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__CJAEEGDA">NOROWDEPENDENCIES | ROWDEPENDENCIES</a> ”</span> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2177270">
                  <p class="subhead1" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-40764930-AE77-4016-B97D-232120C6C3F0">CACHE | NOCACHE</p>
                  <p><span class="bold">CACHE</span><a id="d304879e965" class="indexterm-anchor"></a><a id="d304879e969" class="indexterm-anchor"></a><a id="d304879e973" class="indexterm-anchor"></a></p>
                  <p>如果希望在执行全表扫描时将为此群集检索的块放在缓冲区高速缓存中最近最少使用（LRU）列表的最近使用的末尾，请指定<code class="codeph">CACHE</code> 。该子句对小型查找表很有用。
                  </p>
                  <p><span class="bold">NOCACHE</span></p>
                  <p>如果希望在执行全表扫描时将为此群集检索的块放在缓冲区高速缓存中最近最少使用的LRU列表末端，请指定<code class="codeph">NOCACHE</code> 。这是默认行为。
                  </p>
                  <p><code class="codeph">NOCACHE</code>对您在<span class="italic"><code class="codeph">storage_clause</code></span>指定<code class="codeph">KEEP</code>群集没有影响。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__CACGBDJH">
                  <p class="subhead1" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-C57888FA-1352-44EC-9C1F-A0B5867958CC"><span class="italic">cluster_range_partitions</span></p>
                  <p><a id="d304879e1007" class="indexterm-anchor"></a>指定<span class="italic"><code class="codeph">cluster_range_partitions</code></span>子句以创建范围分区的散列集群。如果指定此子句，则还必须指定<code class="codeph">HASHKEYS</code>子句。
                  </p>
                  <p>使用<span class="italic"><code class="codeph">cluster_range_partitions</code></span>子句在列列表中对值范围进行分区。将表添加到范围分区的散列集群时，它会在相同的列上自动分区，具有相同数量的分区，并且在与集群相同的分区边界上。Oracle数据库将系统生成的名称分配给表分区。
                  </p>
                  <p>具有字符数据类型的每个分区键列必须具有以下声明的排序规则之一： <code class="codeph">BINARY</code> ， <code class="codeph">USING_NLS_COMP</code> ， <code class="codeph">USING_NLS_SORT</code>或<code class="codeph">USING_NLS_SORT_CS</code> 。</p>
                  <p><span class="italic"><code class="codeph">cluster_range_partitions</code></span>子句与<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>的<span class="italic"><code class="codeph">range_partitions</code></span>子句具有相同的语义，但在此处不能指定<code class="codeph">INTERVAL</code>子句。有关完整信息，请参阅<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>文档中的<span class="italic"><a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__BABJDACD">range_partitions</a></span> 。</p>
                  <div class="infoboxnotealso" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-E399CE66-1490-494D-806A-204B0736EF1D">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="CREATE-CLUSTER.html#GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__CACCJEAG">Range-Partitioned Hash Clusters：Example</a> ”</span></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2105031">
                  <p class="subhead1" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-E46A10DA-F98E-45D6-82EF-0B9AF415350B">例子</p>
                  <p id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2105033"><span class="bold">创建集群：示例</span></p>
                  <p>以下语句创建一个名为<code class="codeph">personnel</code>的集群，其中包含集群键列<code class="codeph">department</code> ，集群大小为512字节，以及存储参数值：</p><pre class="oac_no_warn" dir="ltr">CREATE CLUSTER人员（部门编号（4））SIZE 512 STORAGE（初始100K，下一个50K）;</pre><p id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2129341"><span class="bold">群集密钥：示例</span></p>
                  <p>以下语句在<code class="codeph">personnel</code>的集群密钥上创建集群索引：</p><pre class="oac_no_warn" dir="ltr">在CLUSTER人员上创建INDEX idx_personnel;</pre><p>创建集群索引后，可以将表添加到索引并对这些表执行DML操作。</p>
                  <p id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2129354"><span class="bold">将表添加到群集：示例</span></p>
                  <p>以下语句从示例<code class="codeph">hr.employees</code>表创建一些部门表，并将它们添加到前面示例中创建的人员集群中：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE dept_10 CLUSTER人员（department_id）AS SELECT * FROM employees WHERE department_id = 10; CREATE TABLE dept_20 CLUSTER人员（department_id）AS SELECT * FROM employees WHERE department_id = 20;</pre><p id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2129365"><span class="bold">Hash Clusters：示例</span></p>
                  <p>以下语句创建一个名为<code class="codeph">language</code>的哈希集群，其中包含簇密钥列<code class="codeph">cust_language</code> ，最多10个哈希键值，每个值分配512个字节，以及存储参数值：</p><pre class="oac_no_warn" dir="ltr">CREATE CLUSTER语言（cust_language VARCHAR2（3））SIZE 512 HASHKEYS 10 STORAGE（INITIAL 100k next 50k）;</pre><p>由于前面的语句省略了<code class="codeph">HASH</code> <code class="codeph">IS</code>子句，因此Oracle数据库使用集群的内部哈希函数。
                  </p>
                  <p>以下语句创建一个名为<code class="codeph">address</code>的哈希集群，其簇密钥由<code class="codeph">postal_code</code>和<code class="codeph">country_id</code>列组成，并使用包含这些列的SQL表达式作为哈希函数：</p><pre class="oac_no_warn" dir="ltr">CREATE CLUSTER地址（postal_code NUMBER，country_id CHAR（2））HASHKEYS 20 HASH IS MOD（postal_code + country_id，101）;</pre><p id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2129381"><span class="bold">单表哈希集群：示例</span></p>
                  <p>以下语句创建一个名为<code class="codeph">cust_orders</code>的单表哈希集群，其集群密钥为<code class="codeph">customer_id</code> ，最多包含100个哈希键值，每个值分配512个字节：</p><pre class="oac_no_warn" dir="ltr">CREATE CLUSTER cust_orders（customer_id NUMBER（6））SIZE 512 SINGLE TABLE HASHKEYS 100;</pre><p id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__CACCJEAG"><span class="bold">范围分区哈希集群：示例</span></p>
                  <p>以下语句根据<code class="codeph">sales</code>创建一个名为<code class="codeph">sales</code>的范围分区哈希集群，其中包含五个范围分区。群集密钥由<code class="codeph">amount_sold</code>和<code class="codeph">prod_id</code>列<code class="codeph">amount_sold</code> 。群集使用散列函数<code class="codeph">(amount_sold * 10 + prod_id)</code>并且最多具有100000个散列键值，每个散列值分配300个字节。
                  </p><pre class="oac_no_warn" dir="ltr">创建集群销售额（amount_sold NUMBER，prod_id NUMBER）HASHKEYS 100000 HASH IS（amount_sold * 10 + prod_id）SIZE 300 TABLESPACE示例按范围划分（amount_sold）（PARTITION p1值小于（2001），PARTITION p2值小于（4001），分区p3值小于（6001），分区p4值小于（8001），分区p5值小于（MAXVALUE））;</pre><p><span class="bold">创建群集表：示例</span></p>
                  <p>以下语句使用默认密钥大小（600）创建名为<code class="codeph">emp_dept</code>的集群：</p><pre class="pre codeblock"><code>CREATE CLUSTER emp_dept（deptno NUMBER（3））SIZE 600 TABLESPACE USERS STARAGE（初始200K，下一个300K MINEXTENTS 2 PCTINCREASE 33）;</code></pre><p>以下语句在<code class="codeph">emp_dept</code> cluster下创建名为<code class="codeph">dept</code>的集群表：</p><pre class="pre codeblock"><code>CREATE TABLE dept（deptno NUMBER（3）PRIMARY KEY）CLUSTER emp_dept（deptno）;</code></pre><p>以下语句在<code class="codeph">emp_dept</code> cluster下创建另一个名为<code class="codeph">empl</code>集群表：</p><pre class="pre codeblock"><code>CREATE TABLE empl（emplno NUMBER（5）PRIMARY KEY，emplname VARCHAR2（15）NOT NULL，deptno NUMBER（3）REFERENCES dept）CLUSTER emp_dept（deptno）;</code></pre><p>以下语句为<code class="codeph">emp_dept</code>集群创建索引：</p><pre class="pre codeblock"><code>CREATE INDEX emp_dept_index ON CLUSTER emp_dept TABLESPACE USERS STORAGE（初始50K，下一个50K MINEXTENTS 2 MAXEXTENTS 10 PCTINCREASE 33）;</code></pre><p>以下语句查询<code class="codeph">USER_CLUSTERS</code>以显示集群元数据：</p><pre class="pre codeblock"><code>SELECT CLUSTER_NAME，TABLESPACE_NAME，CLUSTER_TYPE，PCT_INCREASE，MIN_EXTENTS，USER_CLUSTERS的MAX_EXTENTS; CLUSTER_NAME TABLESPACE CLUST PCT_INCREASE MIN_EXTENTS MAX_EXTENTS --------------- ---------- ----- ------------  - --------- ----------- EMP_DEPT USERS INDEX 1 2147483645</code></pre><p>以下语句查询<code class="codeph">USER_CLU_COLUMNS</code>以显示集群元数据：</p><pre class="pre codeblock"><code>SELECT * FROM USER_CLU_COLUMNS; CLUSTER_NAME CLU_COLUMN_NAME TABLE_NAME TAB_COLUMN_NAME --------------- -------------------- ----------- ------------------- EMP_DEPT DEPTNO DEPT DEPTNO EMP_DEPT DEPTNO EMPL DEPTNO</code></pre><p>以下语句查询<code class="codeph">USER_INDEXES</code>以显示<code class="codeph">emp_dept</code>集群的索引属性：</p><pre class="pre codeblock"><code>SELECT INDEX_NAME，INDEX_TYPE，PCT_INCREASE，MIN_EXTENTS，MAX_EXTENTS FROM USER_INDEXES WHERE TABLE_NAME ='EMP_DEPT'; INDEX_NAME INDEX_TYPE PCT_INCREASE MIN_EXTENTS MAX_EXTENTS --------------- --------------- ------------ --- -------- ----------- EMP_DEPT_INDEX CLUSTER 1 2147483645</code></pre><div class="infoboxnote" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-89AC024C-09E8-4A4F-925F-AAB767D99E67">
                     <p class="notep1">实时SQL：</p>
                     <p>在<a href="https://livesql.oracle.com/apex/livesql/docs/sqlrf/create-cluster/cluster-table.html" target="_blank"><span class="italic">Create Cluster Tables</span></a>上查看并运行Oracle Live SQL上的相关示例</p>
                  </div>
               </div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
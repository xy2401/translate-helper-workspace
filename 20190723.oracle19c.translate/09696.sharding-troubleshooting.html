<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can enable tracing, locate log and trace files, and troubleshooting common issues.">
      <meta name="description" content="You can enable tracing, locate log and trace files, and troubleshooting common issues.">
      <title>Troubleshooting Oracle Sharding</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Using Oracle Sharding">
      <meta property="og:description" content="You can enable tracing, locate log and trace files, and troubleshooting common issues.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Using Oracle Sharding">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="using-oracle-sharding.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-14T12:19:13-08:00">
      <meta name="dcterms.title" content="Using Oracle Sharding">
      <meta name="dcterms.dateCopyrighted" content="2018, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E87088-04">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="sharding-lifecycle-management.html" title="Previous" type="text/html">
      <link rel="next" href="book-index.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="SHARD">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="sharding-lifecycle-management.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="book-index.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Using Oracle Sharding</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Troubleshooting Oracle Sharding</li>
            </ol>
            <a id="GUID-629262E5-7910-4690-A726-A565C59BA73E" name="GUID-629262E5-7910-4690-A726-A565C59BA73E"></a>
            
            <h2 id="SHARD-GUID-629262E5-7910-4690-A726-A565C59BA73E" class="sect2"><span class="enumeration_chapter">11 </span>Troubleshooting Oracle Sharding
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>You can enable tracing, locate log and trace files, and troubleshooting common issues.</p>
               <p>The following topics describe Oracle Sharding troubleshooting in detail:</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="sharding-troubleshooting.html#GUID-8D44BB2E-40C5-454F-A864-8004B1FC930D">Oracle Sharding Tracing and Debug Information</a><br>The following topics explain how to enable tracing and find the logs.
                  </li>
                  <li class="ulchildlink"><a href="sharding-troubleshooting.html#GUID-2DD22217-BDA6-4C07-A4C6-19081960B743">Common Error Patterns and Resolutions for Sharded Databases</a><br>See the following topics for information about troubleshooting common errors in Oracle Sharding.
                  </li>
               </ul>
            </div>
            
            <div class="sect2"><a id="GUID-8D44BB2E-40C5-454F-A864-8004B1FC930D" name="GUID-8D44BB2E-40C5-454F-A864-8004B1FC930D"></a><h3 id="SHARD-GUID-8D44BB2E-40C5-454F-A864-8004B1FC930D" class="sect3"><span class="enumeration_section">11.1 </span>Oracle Sharding Tracing and Debug Information
               </h3>
               <div>
                  <p>The following topics explain how to enable tracing and find the logs.</p>
                  <p></p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sharding-troubleshooting.html#GUID-6BA8B440-BEFE-4F7C-A8BB-70CCC57BD11D">Enabling Tracing for Oracle Sharding</a><br>Enable PL/SQL tracing to track down issues in the sharded database.
                     </li>
                     <li class="ulchildlink"><a href="sharding-troubleshooting.html#GUID-56202B11-CDF5-48DD-A112-7CD562D36C65">Where to Find Oracle Sharding Alert Logs and Trace Files</a><br>There are several places to look for trace and alert logs in the Oracle Sharding environment.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="sharding-troubleshooting.html#GUID-629262E5-7910-4690-A726-A565C59BA73E" title="You can enable tracing, locate log and trace files, and troubleshooting common issues.">Troubleshooting Oracle Sharding</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-6BA8B440-BEFE-4F7C-A8BB-70CCC57BD11D" name="GUID-6BA8B440-BEFE-4F7C-A8BB-70CCC57BD11D"></a><h4 id="SHARD-GUID-6BA8B440-BEFE-4F7C-A8BB-70CCC57BD11D" class="sect4"><span class="enumeration_section">11.1.1 </span>Enabling Tracing for Oracle Sharding
                  </h4>
                  <div>
                     <p>Enable PL/SQL tracing to track down issues in the sharded database.</p>
                     <p>To get full tracing, set the <code class="codeph">GWM_TRACE</code> level as shown here. The following statement provides immediate tracing, but the trace is disabled after a database restart.
                     </p><pre class="pre codeblock"><code>ALTER SYSTEM SET EVENTS 'immediate trace name GWM_TRACE level 7';</code></pre><p>The following statement enables tracing that continues in perpetuity, but only after restarting the database.</p><pre class="pre codeblock"><code>ALTER SYSTEM SET EVENT='10798 trace name context forever, level 7' SCOPE=spfile;</code></pre><p>It is recommended that you set both of the above traces to be thorough.</p>
                     <p>To trace everything in the Oracle Sharding environment, you must enable tracing on the shard catalog and all of the shards. The traces are written to the RDBMS session trace file for either the GDSCTL session on the shard catalog, or the session(s) created by the shard director (a.k.a. GSM) on the individual shards.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="sharding-troubleshooting.html#GUID-8D44BB2E-40C5-454F-A864-8004B1FC930D" title="The following topics explain how to enable tracing and find the logs.">Oracle Sharding Tracing and Debug Information</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-56202B11-CDF5-48DD-A112-7CD562D36C65" name="GUID-56202B11-CDF5-48DD-A112-7CD562D36C65"></a><h4 id="SHARD-GUID-56202B11-CDF5-48DD-A112-7CD562D36C65" class="sect4"><span class="enumeration_section">11.1.2 </span>Where to Find Oracle Sharding Alert Logs and Trace Files
                  </h4>
                  <div>
                     <p>There are several places to look for trace and alert logs in the Oracle Sharding environment.</p>
                     <p>Standard RDBMS trace files located in diag/rdbms/.. will contain trace output.</p>
                     <p>Output from ‘deploy’ will go to job queue trace files <span class="variable" translate="no">db_unique_name</span>_jXXX_<span class="variable" translate="no">PID</span>.trc. 
                     </p>
                     <p>Output from other GDSCTL commands will go to either a shared server trace file <span class="variable" translate="no">db_unique_name</span>_sXXX_<span class="variable" translate="no">PID</span>.trc or dedicated trace file <span class="variable" translate="no">db_unique_name</span>_ora_<span class="variable" translate="no">PID</span>.trc depending on connect strings used.
                     </p>
                     <p>Shared servers are typically used for many of the connections to the catalog and shards, so the tracing is in a shared server trace file named <span class="variable" translate="no">SID</span>_s00*.trc.
                     </p>
                     <p>GDSCTL has several commands that can display status and error information.</p>
                     <p>Use <code class="codeph">GDSCTL STATUS GSM</code> to view locations for shard director (GSM) trace and log files. 
                     </p><pre class="pre codeblock"><code>GDSCTL&gt; status
Alias                     SHARDDIRECTOR1
Version                   18.0.0.0.0
Start Date                25-FEB-2016 07:27:39
Trace Level               support
<span class="bold">Listener Log File         /u01/app/oracle/diag/gsm/slc05abw/sharddirector1/alert/log.xml
</span><span class="bold">Listener Trace File       /u01/app/oracle/diag/gsm/slc05abw/sharddirector1/trace</span>/
ora_10516_139939557888352.trc
Endpoint summary          (ADDRESS=(HOST=shard0)(PORT=1571)(PROTOCOL=tcp))
GSMOCI Version            2.2.1
Mastership                N
Connected to GDS catalog  Y
Process Id                10535
Number of reconnections   0
Pending tasks.     Total  0
Tasks in  process. Total  0
Regional Mastership       TRUE
Total messages published  71702
Time Zone                 +00:00
Orphaned Buddy Regions:   None
GDS region                region1
Network metrics:
   Region: region2 Network factor:0</code></pre><p>The non-XML version of the alert.log file can be found in the /trace directory as shown here.</p><pre class="pre codeblock"><code>/u01/app/oracle/diag/gsm/<kbd class="userinput">shard-director-node</kbd>/sharddirector1/trace/alert*.log</code></pre><p>To decrypt log output in GSM use the following command.</p><pre class="pre codeblock"><code>GDSCTL&gt; set _event 17 -config_only</code></pre><p>Master shard director (GSM) trace/alert files include status and errors on any and all asynchronous commands or background tasks (move chunk, split chunk, deploy, shard registration, Data Guard configuration, shard DDL execution, etc.)</p>
                     <p>To find pending AQ requests for the shard director, including error status, use GDSCTL CONFIG.</p>
                     <p>To see ongoing and scheduled chunk movement, use GDSCTL CONFIG CHUNKS -show_reshard</p>
                     <p>To see shards with failed DDLs, use GDSCTL SHOW DDL -failed_only</p>
                     <p>To see the DDL error information for a given shard, use GDSCTL CONFIG SHARD -shard <span class="variable" translate="no">shard_name</span></p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="sharding-troubleshooting.html#GUID-8D44BB2E-40C5-454F-A864-8004B1FC930D" title="The following topics explain how to enable tracing and find the logs.">Oracle Sharding Tracing and Debug Information</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-2DD22217-BDA6-4C07-A4C6-19081960B743" name="GUID-2DD22217-BDA6-4C07-A4C6-19081960B743"></a><h3 id="SHARD-GUID-2DD22217-BDA6-4C07-A4C6-19081960B743" class="sect3"><span class="enumeration_section">11.2 </span>Common Error Patterns and Resolutions for Sharded Databases
               </h3>
               <div>
                  <p>See the following topics for information about troubleshooting common errors in Oracle Sharding.</p>
                  <p></p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sharding-troubleshooting.html#GUID-134A3FCD-4F19-4355-984E-F157EBC7802F">Issues Starting Remote Scheduler Agent</a><br>If you encounter issues starting Remote Scheduler Agent on all the shard hosts, try the following:
                     </li>
                     <li class="ulchildlink"><a href="sharding-troubleshooting.html#GUID-96F666F4-953B-411C-9537-0510062A8B6E">Shard Director Fails to Start</a><br>If you encounter issues starting the shard director, try the following:
                     </li>
                     <li class="ulchildlink"><a href="sharding-troubleshooting.html#GUID-90876128-74A2-48EE-8EFD-3E2F274B79D9">Errors From Shards Created with CREATE SHARD</a><br>For errors that occur during a DEPLOY from shards created with the GDSCTL CREATE SHARD command check the following:
                     </li>
                     <li class="ulchildlink"><a href="sharding-troubleshooting.html#GUID-E5F09B41-2304-4139-B1C1-479E0EE1681D">Issues Using Create Shard</a><br>The following are solutions to some issues that occur when using the GDSCTL CREATE SHARD command..
                     </li>
                     <li class="ulchildlink"><a href="sharding-troubleshooting.html#GUID-924E1530-F486-4049-B674-A275C3841D3A">Issues Using Deploy Command</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="sharding-troubleshooting.html#GUID-629262E5-7910-4690-A726-A565C59BA73E" title="You can enable tracing, locate log and trace files, and troubleshooting common issues.">Troubleshooting Oracle Sharding</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-134A3FCD-4F19-4355-984E-F157EBC7802F" name="GUID-134A3FCD-4F19-4355-984E-F157EBC7802F"></a><h4 id="SHARD-GUID-134A3FCD-4F19-4355-984E-F157EBC7802F" class="sect4"><span class="enumeration_section">11.2.1 </span>Issues Starting Remote Scheduler Agent
                  </h4>
                  <div>
                     <p>If you encounter issues starting Remote Scheduler Agent on all the shard hosts, try the following:</p>
                     <p>To start Scheduler you must be inside ORACLE_HOME on each shard server.</p><pre class="pre codeblock"><code>[oracle@shard2 ~]$ echo welcome | schagent -registerdatabase 192.0.2.24 8080
Agent Registration Password?
Failed to get agent Registration Info from db: No route to host

Solution: Disable firewall

service ipchains stop
service iptables stop
chkconfig ipchains off
chkconfig iptables off
</code></pre></div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="sharding-troubleshooting.html#GUID-2DD22217-BDA6-4C07-A4C6-19081960B743" title="See the following topics for information about troubleshooting common errors in Oracle Sharding.">Common Error Patterns and Resolutions for Sharded Databases</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-96F666F4-953B-411C-9537-0510062A8B6E" name="GUID-96F666F4-953B-411C-9537-0510062A8B6E"></a><h4 id="SHARD-GUID-96F666F4-953B-411C-9537-0510062A8B6E" class="sect4"><span class="enumeration_section">11.2.2 </span>Shard Director Fails to Start
                  </h4>
                  <div>
                     <p>If you encounter issues starting the shard director, try the following:</p>
                     <p>To start Scheduler you must be inside ORACLE_HOME on each shard server.</p><pre class="pre codeblock"><code>GDSCTL&gt;start gsm -gsm shardDGdirector
GSM-45054: GSM error
GSM-40070: GSM is not able to establish connection to GDS catalog

GSM alert log, /u01/app/oracle/diag/gsm/shard1/sharddgdirector/trace/alert_gds.log
GSM-40112: OCI error. Code (-1). See GSMOCI trace for details.
GSM-40122: OCI Catalog Error. Code: 12514. Message: ORA-12514: TNS:listener does not 
currently know of service requested in connect descriptor
GSM-40112: OCI error. Code (-1). See GSMOCI trace for details.
2017-04-20T22:50:22.496362+05:30
Process 1 in GSM instance is down
GSM shutdown is successful
GSM shutdown is in progress
NOTE : if not message displayed in the GSM log then enable GSM trace level to 16 
while adding GSM itself.</code></pre><ol>
                        <li>
                           <p>Remove the newly created shard director (GSM) that failed to start.</p><pre class="pre codeblock"><code>GDSCTL&gt; remove gsm -gsm shardDGdirector
</code></pre></li>
                        <li>
                           <p>Add the shard director using trace level 16.</p><pre class="pre codeblock"><code>GDSCTL&gt; add gsm -gsm shardDGdirector -listener <span class="variable" translate="no">port_num</span> -pwd <span class="variable" translate="no">gsmcatuser_password</span>
 -catalog <span class="variable" translate="no">hostname</span>:<span class="variable" translate="no">port_num</span>:<span class="variable" translate="no">shard_catalog_name</span>
 -region region1 <span class="bold">-trace_level 16</span></code></pre></li>
                        <li>
                           <p>If the shard catalog database is running on a non-default port (other than 1521), set the remote listener.</p><pre class="pre codeblock"><code>SQL&gt; alter system set local_listener='(DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)
(HOST=<span class="variable" translate="no">hostname</span>)(PORT=<span class="variable" translate="no">port_num</span>)))';</code></pre></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="sharding-troubleshooting.html#GUID-2DD22217-BDA6-4C07-A4C6-19081960B743" title="See the following topics for information about troubleshooting common errors in Oracle Sharding.">Common Error Patterns and Resolutions for Sharded Databases</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-90876128-74A2-48EE-8EFD-3E2F274B79D9" name="GUID-90876128-74A2-48EE-8EFD-3E2F274B79D9"></a><h4 id="SHARD-GUID-90876128-74A2-48EE-8EFD-3E2F274B79D9" class="sect4"><span class="enumeration_section">11.2.3 </span>Errors From Shards Created with CREATE SHARD
                  </h4>
                  <div>
                     <p>For errors that occur during a DEPLOY from shards created with the GDSCTL CREATE SHARD command check the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Remote Scheduler Agent logs on shard hosts</p>
                        </li>
                        <li>
                           <p>DBA_SCHEDULER_JOB_RUN_DETAILS view on shard catalog</p>
                        </li>
                        <li>
                           <p>NETCA/DBCA output files in $ORACLE_BASE/cfgtoollogs on shard hosts</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="sharding-troubleshooting.html#GUID-2DD22217-BDA6-4C07-A4C6-19081960B743" title="See the following topics for information about troubleshooting common errors in Oracle Sharding.">Common Error Patterns and Resolutions for Sharded Databases</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-E5F09B41-2304-4139-B1C1-479E0EE1681D" name="GUID-E5F09B41-2304-4139-B1C1-479E0EE1681D"></a><h4 id="SHARD-GUID-E5F09B41-2304-4139-B1C1-479E0EE1681D" class="sect4"><span class="enumeration_section">11.2.4 </span>Issues Using Create Shard
                  </h4>
                  <div>
                     <p>The following are solutions to some issues that occur when using the GDSCTL CREATE SHARD command..</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-E5F09B41-2304-4139-B1C1-479E0EE1681D__GUID-7BE89BC5-DF70-4EBA-B029-B3AC01ECFAE6">Make sure to create $ORACLE_BASE/oradata and $ORACLE_BASE/fast_recovery_area directories to avoid the following errors</p><pre class="pre codeblock"><code>GDSCTL&gt; create shard -shardgroup primary_shardgroup -destination che -osaccount
 oracle -ospassword oracle
GSM-45029: SQL error
ORA-03710: directory does not exist or is not writeable at destination:
 $ORACLE_BASE/oradata
ORA-06512: at "GSMADMIN_INTERNAL.DBMS_GSM_POOLADMIN", line 6920
ORA-06512: at "SYS.DBMS_SYS_ERROR", line 86
ORA-06512: at "GSMADMIN_INTERNAL.DBMS_GSM_POOLADMIN", line 4730
ORA-06512: at line 1

GDSCTL&gt;create shard -shardgroup primary_shardgroup -destination che -osaccount oracle
 -ospassword oracle
GSM-45029: SQL error
ORA-03710: directory does not exist or is not writeable at destination:
 $ORACLE_BASE/fast_recovery_area
ORA-06512: at "GSMADMIN_INTERNAL.DBMS_GSM_POOLADMIN", line 6920
ORA-06512: at "SYS.DBMS_SYS_ERROR", line 86
ORA-06512: at "GSMADMIN_INTERNAL.DBMS_GSM_POOLADMIN", line 4755
ORA-06512: at line 1</code></pre><p>Solution: Create oradata,fast_recovery_area under $ORACLE_BASE on all the shard hosts.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E5F09B41-2304-4139-B1C1-479E0EE1681D__GUID-AAC9EA73-4EEA-471D-B851-A2F1CD624F03">Privilege issues</p><pre class="pre codeblock"><code>GDSCTL&gt;create shard -shardgroup primary_shardgroup -destination blr -credential cred
GSM-45029: SQL error
ORA-02610: Remote job failed with error:
EXTERNAL_LOG_ID="job_79126_3",
USERNAME="oracle",
STANDARD_ERROR="Launching external job failed: Login executable not setuid-root"
ORA-06512: at "GSMADMIN_INTERNAL.DBMS_GSM_POOLADMIN", line 6920
ORA-06512: at "SYS.DBMS_SYS_ERROR", line 86
ORA-06512: at "GSMADMIN_INTERNAL.DBMS_GSM_POOLADMIN", line 4596
ORA-06512: at line 1</code></pre><p>Solution: Make sure to have root privilege on following directories,</p><pre class="pre codeblock"><code>chown root $ORACLE_HOME/bin/extjob
chmod 4750 $ORACLE_HOME/bin/extjob
chown root $ORACLE_HOME/rdbms/admin/externaljob.ora
chmod 640 $ORACLE_HOME/rdbms/admin/externaljob.ora
chown root $ORACLE_HOME/bin/jssu
chmod 4750 $ORACLE_HOME/bin/jssu</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E5F09B41-2304-4139-B1C1-479E0EE1681D__GUID-BBA7ECD4-9F3D-4328-9743-339B0A5086A5">Error on create shard</p><pre class="pre codeblock"><code>GDSCTL&gt;create shard -shardgroup primary_shardgroup -destination mysql02 -osaccount
 oracle -ospassword oracle
GSM-45029: SQL error
ORA-03719: Shard character set does not match catalog character set.
ORA-06512: at "GSMADMIN_INTERNAL.DBMS_GSM_POOLADMIN", line 7469
ORA-06512: at "SYS.DBMS_SYS_ERROR", line 79
ORA-06512: at "GSMADMIN_INTERNAL.DBMS_GSM_POOLADMIN", line 5770
ORA-06512: at line 1</code></pre><p>Solution: Check the JAVA version, it must be the same on the shard catalog and all shard servers.</p><pre class="pre codeblock"><code>rpm -qa|grep java</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="sharding-troubleshooting.html#GUID-2DD22217-BDA6-4C07-A4C6-19081960B743" title="See the following topics for information about troubleshooting common errors in Oracle Sharding.">Common Error Patterns and Resolutions for Sharded Databases</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-924E1530-F486-4049-B674-A275C3841D3A" name="GUID-924E1530-F486-4049-B674-A275C3841D3A"></a><h4 id="SHARD-GUID-924E1530-F486-4049-B674-A275C3841D3A" class="sect4"><span class="enumeration_section">11.2.5 </span>Issues Using Deploy Command
                  </h4>
                  <div>
                     <p></p><pre class="pre codeblock"><code>GDSCTL&gt; deploy
GSM-45029: SQL error
ORA-29273: HTTP request failed
ORA-06512: at "SYS.DBMS_ISCHED", line 3715
ORA-06512: at "SYS.UTL_HTTP", line 1267
ORA-29276: transfer timeout
ORA-06512: at "SYS.UTL_HTTP", line 651
ORA-06512: at "SYS.UTL_HTTP", line 1257
ORA-06512: at "SYS.DBMS_ISCHED", line 3708
ORA-06512: at "SYS.DBMS_SCHEDULER", line 2609
ORA-06512: at "GSMADMIN_INTERNAL.DBMS_GSM_POOLADMIN", line 14284
ORA-06512: at line 1</code></pre><p>Solution : Check the $ORACLE_HOME/data/pendingjobs for the exact error. ORA-1017 is thrown if any issues on wallet.</p>
                     <ol>
                        <li>
                           <p>On problematic Shard host stop the remote scheduler agent.</p><pre class="pre codeblock"><code>schagent -stop</code></pre></li>
                        <li>
                           <p>rename wallet direcotry on Database home</p><pre class="pre codeblock"><code>mv $ORACLE_HOME/data/wallet $ORACLE_HOME/data/wallet.old</code></pre></li>
                        <li>
                           <p>start the remote scheduler agent and it will create new wallet directory</p><pre class="pre codeblock"><code>schagent -start 
schagent -status 
echo welcome | schagent -registerdatabase 10.10.10.10 8080</code></pre></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="sharding-troubleshooting.html#GUID-2DD22217-BDA6-4C07-A4C6-19081960B743" title="See the following topics for information about troubleshooting common errors in Oracle Sharding.">Common Error Patterns and Resolutions for Sharded Databases</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
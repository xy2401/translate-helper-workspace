<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>克隆Oracle Clusterware</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Clusterware Administration and Deployment Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Clusterware Administration and Deployment Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="clusterware-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-24T07:05:38-07:00"></meta>
      <meta name="dcterms.title" content="Clusterware Administration and Deployment Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E95727-05"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="adding-and-deleting-cluster-nodes.html" title="Previous" type="text/html"></link>
      <link rel="next" href="making-applications-highly-available-using-oracle-clusterware.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="CWADD"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="adding-and-deleting-cluster-nodes.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="making-applications-highly-available-using-oracle-clusterware.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">“Clusterware管理和部署指南”</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">克隆Oracle Clusterware</li>
            </ol>
            <a id="GUID-502ABA1D-8246-4A13-BE72-3E806B77AB8F" name="GUID-502ABA1D-8246-4A13-BE72-3E806B77AB8F"></a><a id="CWADD03202"></a>
            
            <h2 id="CWADD-GUID-502ABA1D-8246-4A13-BE72-3E806B77AB8F" class="sect2"><span class="enumeration_chapter">8</span>克隆Oracle Clusterware</h2>
         </header>
         <div class="ind">
            <div>
               <p><a id="d43988e125" class="indexterm-anchor"></a><a id="d43988e129" class="indexterm-anchor"></a>本章介绍如何克隆Oracle Grid Infrastructure主目录并使用克隆主目录创建群集。您可以通过以静默方式运行脚本来执行本章中的克隆过程。克隆过程适用于Linux和UNIX系统。虽然本章中的示例使用Linux和UNIX命令，但克隆概念和过程通常适用于所有平台。
               </p>
               <div class="infoboxnote" id="GUID-502ABA1D-8246-4A13-BE72-3E806B77AB8F__GUID-D143331D-EABA-402A-93F3-53DC416DC516">
                  <p class="notep1">注意：</p>
                  <p>本章假定您正在克隆如下配置的Oracle Clusterware 12 <span class="italic">c</span>安装：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>无网格命名服务（GNS）</p>
                     </li>
                     <li>
                        <p>没有智能平台管理接口规范（IPMI）</p>
                     </li>
                     <li>
                        <p>投票文件和Oracle Cluster Registry（OCR）存储在Oracle自动存储管理（ASM）中</p>
                     </li>
                     <li>
                        <p>单客户端访问名称（SCAN）通过DNS解析</p>
                     </li>
                  </ul>
               </div>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="cloning-oracle-clusterware.html#GUID-A1BF4F1D-02D8-4128-8FE0-195FE177B861">克隆Oracle Clusterware简介</a></p>
                  </li>
                  <li>
                     <p><a href="cloning-oracle-clusterware.html#GUID-CC78C17B-1A45-4664-AF14-7743D70FCD1C">准备Oracle Grid Infrastructure Home进行克隆</a></p>
                  </li>
                  <li>
                     <p><a href="cloning-oracle-clusterware.html#GUID-850143F9-E53A-4EE6-B8A2-E6DA0FEDE4CE" title="要设置新的Oracle Clusterware环境，请在一个节点上以交互模式或静默模式运行gridSetup.sh实用程序，就像为新集群安装Oracle Grid Infrastructure时一样。">通过克隆Oracle Clusterware创建群集</a></p>
                  </li>
                  <li>
                     <p><a href="cloning-oracle-clusterware.html#GUID-D02E842E-28C5-42C6-848E-80B055B48867" title="您还可以使用克隆将节点添加到群集。">使用克隆将节点添加到群集</a></p>
                  </li>
                  <li>
                     <p><a href="cloning-oracle-clusterware.html#GUID-79E673C8-5E8B-4E5B-8AE7-0DE5BF0545CE">查找和查看克隆过程中生成的日志文件</a></p>
                  </li>
               </ul>
            </div><a id="CWADD92115"></a><div class="props_rev_3"><a id="GUID-A1BF4F1D-02D8-4128-8FE0-195FE177B861" name="GUID-A1BF4F1D-02D8-4128-8FE0-195FE177B861"></a><h3 id="CWADD-GUID-A1BF4F1D-02D8-4128-8FE0-195FE177B861" class="sect3">克隆Oracle Clusterware简介</h3>
               <div>
                  <p>克隆是将现有Oracle Clusterware安装复制到其他位置，然后更新复制的安装以在新环境中工作的过程。克隆后，还会显示在源Oracle Grid Infrastructure主目录上应用的一次性修补程序所做的更改。在克隆过程中，您将运行一个脚本，该脚本将重放安装Oracle Grid Infrastructure主目录的操作。</p>
                  <p>克隆要求您从成功安装的Oracle Grid Infrastructure主目录开始。您可以使用此主目录作为实现扩展Oracle Grid Infrastructure主目录的脚本的基础，以创建基于原始Grid主目录的集群。</p>
                  <p>手动创建克隆脚本可能容易出错，因为您在没有交互式检查的情况下准备脚本以验证输入。尽管如此，对于运行单个脚本来配置数十个甚至数百个集群的情况，最初的努力是值得的。如果只有一个要安装的集群，则应使用传统的自动化交互式安装方法，例如Oracle Universal Installer（OUI）或Oracle Enterprise Manager的Provisioning Pack功能。</p>
                  <div class="infoboxnote" id="GUID-A1BF4F1D-02D8-4128-8FE0-195FE177B861__GUID-E378E47C-8214-48D5-B097-E361A39D6EB4">
                     <p class="notep1">注意：</p>
                     <p>克隆不是Oracle Enterprise Manager克隆的替代品，它是Provisioning Pack的一部分。在Oracle Enterprise Manager克隆期间，配置过程通过交互式询问有关Oracle主目录的详细信息来简化克隆。面试问题涉及的主题包括您要部署克隆环境的位置，Oracle数据库主目录的名称，群集中节点的列表等。</p>
                  </div>
                  <p>Oracle企业管理器网格控制的Provisioning Pack功能提供了一个自动配置节点和集群的框架。对于具有多个集群的数据中心，创建克隆过程以向现有集群配置新集群和新节点的投资是值得的。</p>
                  <p>以下列表描述了克隆有用的一些情况：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>克隆一次准备Oracle Grid Infrastructure主目录并同时将其部署到多个主机。您可以以静默方式完成安装，作为非交互式过程。您无需使用图形用户界面（GUI）控制台，并且可以根据需要从Secure Shell（SSH）终端会话执行克隆。</p>
                     </li>
                     <li>
                        <p>通过克隆，您可以创建一个安装（生产，测试或开发安装的副本），并在一个步骤中应用所有修补程序。在源系统上执行基本安装并应用所有修补程序集和修补程序后，克隆将作为单个过程执行所有这些单独的步骤。这与通过安装过程执行单独步骤以在群集中的每个节点上安装，配置和修补安装形成对比。</p>
                     </li>
                     <li>
                        <p>通过克隆安装Oracle Clusterware是一个快速的过程。例如，将Oracle Grid Infrastructure主目录克隆到具有两个以上节点的集群需要几分钟时间来安装Oracle软件，并且每个节点需要几分钟（大约运行<code class="codeph">root.sh</code>脚本所需的时间） ）。
                        </p>
                     </li>
                     <li>
                        <p>克隆提供了一种在多个集群上准确重复相同Oracle Clusterware安装的有保证的方法。</p>
                     </li>
                  </ul>
                  <p>克隆安装的作用与其源安装相同。例如，您可以使用OUI删除克隆的Oracle Grid Infrastructure主目录，或使用OPatch对其进行修补。您还可以使用克隆的Oracle Grid Infrastructure主目录作为另一个克隆操作的源。您可以使用命令行克隆脚本创建测试，开发或生产安装的克隆副本。</p>
                  <p>默认克隆程序适用于大多数情况。但是，您还可以自定义克隆的某些方面，例如指定自定义端口分配或保留自定义设置。</p>
                  <p>例如，您可以为侦听器指定自定义端口，如下所示：</p><pre class="oac_no_warn" dir="ltr">$ export ORACLE_HOME = / u01 / app / 12.1.0 / grid $ $ ORACLE_HOME / bin / srvctl modify listener -endpoints tcp：12345</pre><p>克隆过程的工作方式是将源Oracle Grid Infrastructure主目录中的所有文件复制到目标Oracle Grid Infrastructure主目录。您可以克隆本地（非共享）或共享Oracle Grid Infrastructure主目录。因此，源实例使用的位于源Oracle Grid Infrastructure主目录结构之外的任何文件都不会复制到目标位置。</p>
                  <p>源和目标上的二进制文件的大小可能不同，因为这些文件作为克隆操作的一部分重新链接，并且这两个位置之间的操作系统修补程序级别也可能不同。此外，克隆主页中的文件数将增加，因为从源复制的多个文件（特别是实例化的文件）将作为克隆操作的一部分进行备份。</p>
               </div>
            </div><a id="CWADD92116"></a><div class="props_rev_3"><a id="GUID-CC78C17B-1A45-4664-AF14-7743D70FCD1C" name="GUID-CC78C17B-1A45-4664-AF14-7743D70FCD1C"></a><h3 id="CWADD-GUID-CC78C17B-1A45-4664-AF14-7743D70FCD1C" class="sect3">准备Oracle Grid Infrastructure Home进行克隆</h3>
               <div>
                  <p>要准备要克隆的源Oracle Grid Infrastructure主目录，请创建已安装的Oracle Grid Infrastructure主目录的副本，然后使用它来在其他节点上执行克隆过程。使用以下分步过程准备Oracle Grid Infrastructure主目录的副本：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="cloning-oracle-clusterware.html#GUID-BB876830-F840-4C9D-9592-A682740E6BF8">第1步：安装Oracle Clusterware</a></p>
                     </li>
                     <li>
                        <p><a href="cloning-oracle-clusterware.html#GUID-2D254450-A272-4049-9E1D-4A93E003B97B">第2步：关闭运行软件</a></p>
                     </li>
                     <li>
                        <p><a href="cloning-oracle-clusterware.html#GUID-2BED2A9B-0D67-4D18-867D-0E33EC42FB1B">步骤3：创建Oracle Grid Infrastructure Home的副本</a></p>
                     </li>
                  </ul>
               </div><a id="CWADD92373"></a><div class="props_rev_3"><a id="GUID-BB876830-F840-4C9D-9592-A682740E6BF8" name="GUID-BB876830-F840-4C9D-9592-A682740E6BF8"></a><h4 id="CWADD-GUID-BB876830-F840-4C9D-9592-A682740E6BF8" class="sect4">第1步：安装Oracle Clusterware</h4>
                  <div>
                     <div class="section">
                        <p>使用“ <span><cite>Oracle Grid Infrastructure安装和升级指南”中</cite></span>的详细说明在源节点上执行以下步骤：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>安装Oracle Clusterware 12 <span class="italic">c</span> 。此安装将Oracle Cluster Registry（OCR）和投票文件放在Oracle自动存储管理（Oracle ASM）上。</span><div>
                              <div class="infoboxnote" id="GUID-BB876830-F840-4C9D-9592-A682740E6BF8__GUID-277D4C68-AC5D-46F9-A76E-B8897BE21F4A">
                                 <p class="notep1">注意：</p>
                                 <p>如平台特定的<span><cite>Oracle Grid Infrastructure安装和升级指南中</cite></span>所述，为集群安装和配置Oracle Grid Infrastructure，或仅安装Oracle Clusterware软件。
                                 </p>
                              </div>
                              <p>如果为群集安装并配置了Oracle Grid Infrastructure，则必须在执行克隆过程之前停止Oracle Clusterware。如果您执行了纯软件安装，则不必停止Oracle Clusterware。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>如有必要，安装所需的任何修补程序（例如，Oracle Grid Infrastructure捆绑修补程序）。</span></li>
                        <li class="stepexpand"><span>如有必要，请应用一次性补丁。</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure安装和升级指南</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD92374"></a><div class="props_rev_3"><a id="GUID-2D254450-A272-4049-9E1D-4A93E003B97B" name="GUID-2D254450-A272-4049-9E1D-4A93E003B97B"></a><h4 id="CWADD-GUID-2D254450-A272-4049-9E1D-4A93E003B97B" class="sect4">第2步：关闭运行软件</h4>
                  <div>
                     <div class="section">
                        <p>在复制源Oracle Grid Infrastructure主目录之前，请关闭在该节点上运行的所有服务，数据库，侦听器，应用程序，Oracle Clusterware和Oracle ASM实例。Oracle建议您使用服务器控制（SRVCTL）实用程序首先关闭数据库，然后使用Oracle Clusterware Control（CRSCTL）实用程序关闭其余组件。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../racad/server-control-utility-reference.html#RACAD-GUID-C2D37BAB-DA98-49B4-A777-F2B3AA8D2E7A" target="_blank"><span><cite>“Oracle Real Application Clusters管理和部署指南”</cite></span></a></li>
                           <li><a href="oracle-clusterware-control-crsctl-utility-reference.html#GUID-1A6774CF-FD5F-463E-817F-34E4466443C7" title="CRSCTL是您与Oracle Clusterware之间的接口，用于解析和调用Oracle Clusterware API的Oracle Clusterware API。有关使用CRSCTL命令行界面的信息。在Oracle RAC或Oracle Restart环境中使用这些命令。检查群集同步服务的状态。检查事件管理器的状态。检索本地服务器的主机名。注册要由Oracle Clusterware管理的资源。从Oracle Clusterware配置中删除资源。预测在不更改系统的情况下添加资源的效果。预测资源失败的后果。模拟重新定位资源而不更改系统。预测在不更改系统的情况下修改资源的效果。预测在不更改系统的情况下启动资源的影响。预测在不更改系统的情况下停止资源的效果。显示指定资源的用户和组权限。修改Oracle Clusterware中特定资源的属性。将资源重定位到群集中的另一台服务器。重新启动集群中的空闲资源，而不必运行两个命令来停止和启动资源。设置特定资源的权限。在群集中的特定服务器上启动空闲资源。获取任意数量的特定资源的状态和配置信息。停止运行资源。根据资源组类型创建资源组。对指定组的所有成员资源启动检查操作。从Oracle Clusterware中删除一个或多个资源组。预测添加资源组而不更改系统的影响。预测资源失败的后果。预测在不更改系统的情况下重新定位资源组的效果。预测启动资源组而不更改系统的影响。预测在不更改系统的情况下停止资源组的效果。将资源组及其成员资源的完整信息和属性导出到脚本文件。修改资源组以添加属性或更新现有属性的值。将联机资源组从源服务器重定位到目标服务器。在它们当前所在的服务器上重新启动资源组。在特定或预配置的服务器或服务器池上启动一个或多个资源组。显示资源组的状态。在可选指定的预配置服务器或服务器池上停止一个或多个资源组。在Oracle Clusterware中注册新的资源组类型。从Oracle Clusterware中删除一个或多个资源组类型。修改资源组类型以添加属性或更新现有属性的值。返回特定模块的跟踪设置。设置特定模块的跟踪参数。在Oracle Clusterware中创建资源类型。从Oracle Clusterware配置中删除资源类型。获得特定资源类型的权限。修改现有资源类型。设置特定资源类型的资源的权限。获取一个或多个特定资源类型的配置信息。创建并添加用户到钱包。从钱包中删除钱包或用户。修改特定钱包中特定用户的密码。从钱包中查询低权限用户。您只能在Oracle RAC环境中使用以下命令。对特定资源执行特定操作。添加服务器类别。删除服务器类别。修改现有服务器类别。获取有关服务器类别的信息。从群集中的任何节点检查Oracle Clusterware堆栈的状态。在群集中的任何节点上运行时启动Oracle Clusterware堆栈。在群集中的任何节点上运行命令时，停止群集中的所有服务器或特定服务器上的Oracle Clusterware堆栈。获取集群类信息。显示集群配置信息。从用于保护节点间通信的禁用密码套件列表添加密码套件或从中删除密码套件。确定群集是否为扩展群集。获取Oracle Flex Cluster中Hub节点的值。设置Oracle Flex Cluster的最大Hub节点数。确定是否为Oracle Flex Clusters配置了群集或获取当前状态。将标准群集更改为Oracle Flex群集。显示当前群集名称。使用crsctl add cluster site命令将站点添加到扩展群集。使用crsctl delete cluster site命令从扩展群集中删除特定站点。修改扩展群集中站点的配置。显示扩展群集中的站点信息。列出传输层安全性使用的可用密码套件，用于保护节点间通信。使用crsctl get cluster type命令确定群集是Oracle Flex群集还是应用程序群集。设置集群的类型。crsctl get cpu equivalency命令获取CPU_EQUIVALENCY服务器配置属性的值。crsctl set cpu equivalency命令为CPU_EQUIVALENCY服务器配置属性设置一个值。检查本地服务器上的Oracle高可用性服务和Oracle Clusterware堆栈的状态。显示Oracle高可用性服务自动启动配置。在服务器引导时阻止Oracle高可用性服务的自动启动。在服务器引导时启用Oracle高可用性服务的自动启动。在本地服务器上启动Oracle High Availability Services。在本地服务器上停止Oracle高可用性服务。显示群集中运行的Oracle Clusterware软件的活动版本和已配置的修补程序级别。将用户添加到群集管理员列表中。从Oracle Clusterware管理员列表中删除用户。显示具有Oracle Clusterware管理权限的用户列表。获取Oracle Clusterware自动资源启动条件的值。设置Oracle Clusterware自动资源启动条件。显示在修补节点时在Grid Home修补程序存储库中更新的修补程序级别。显示存储在本地节点上的二进制文件中的Oracle Clusterware软件的版本。使用crsctl query crs site命令确定特定主机或磁盘所属的站点。显示已安装的Oracle Clusterware的已配置修补程序级别。显示已在指定节点上成功启动的软件的最新版本。获取特定Cluster Synchronization Services参数的值。引发许多特定节点。设置Cluster Synchronization Services参数的值。取消许多服务器。取消设置Cluster Synchronization Services参数的值并将其恢复为默认值。检索存储在本地智能平台管理接口（IPMI）设备的Oracle本地注册表中的地址。存储Oracle本地注册表中本地智能平台管理接口（IPMI）设备的地址。存储Oracle本地注册表中智能平台管理界面（IPMI）管理员的登录凭据。确定本地服务器上的Oracle Clusterware是否已配置为使用IPMI进行故障隔离。清除Oracle本地注册表中以前存储的所有IPMI配置（登录凭据和IP地址）。确定本地系统上是否存在智能平台管理接口（IPMI）驱动程序。列出禁用自动重新启动群集同步服务的问题。发生特定问题时停止自动重新启动群集同步服务。从Oracle Clusterware配置中删除投票文件。显示群集同步服务使用的投票文件，投票文件的状态以及磁盘的位置，无论它们是存储在Oracle ASM中还是存储在其他位置。检查群集时间同步服务的状态。在指定端口的网络上发送DHCP发现数据包。如果网络上存在DHCP服务器，则它们会响应发现消息并且命令成功。显示Oracle Clusterware代理用于从DHCP服务器获取已配置群集资源的IP地址的客户端ID。VIP类型是必需的。向特定客户端ID发送DHCP租约释放请求，并将网络上的释放数据包发送到特定端口。将网络上的DHCP请求报文发送到指定端口。替换用于查找投票文件的现有发现字符串。获取DNS查找具有指定DNS服务器的名称返回的地址列表。使用指定的子网掩码在指定接口上启动给定的IP名称或IP地址。检查网络上的给定IP地址是否已启动。使用指定的子网掩码停止指定接口上的给定IP名称或IP地址。列出可以调试的模块的组件。为新成员集群创建配置部署文件。删除成员集群配置。显示成员集群的配置。从群集中删除节点。获取本地节点的名称。获取群集中节点的已配置节点角色。将配置策略添加到策略集。从策略集中删除配置策略。预测在不更改系统的情况下激活特定策略的效果。修改现有配置策略。获取配置策略的状态和定义。以文本文件的形式创建一个反映服务器池配置的策略集。修改现有策略集。获取策略集中的当前策略，包括访问控制列表，该列表管理谁可以修改集，最后激活的策略以及现在生效的配置（称为当前策略）。在特定资源的特定于应用程序的代理程序内启动检查操作。将资源重定位到群集中的另一台服务器。检查RESOURCE_USE_ENABLED服务器配置参数的当前设置值。为运行此命令的服务器设置RESOURCE_USE_ENABLED服务器配置参数的值。将Oracle Clusterware和Oracle ASM转换为滚动补丁模式。将Oracle Clusterware和Oracle ASM转换为滚动补丁模式。将Oracle Clusterware和Oracle ASM转换为滚动升级模式。模拟添加服务器而不更改系统。预测删除服务器而不更改系统的影响。预测在不更改系统的情况下将服务器重定位到其他服务器池的影响。修改特定服务器的配置。将服务器重定位到其他服务器池。获取一个或多个特定服务器的状态和配置信息。获取CSS_CRITICAL服务器属性的当前配置值设置CSS_CRITICAL服务器属性的配置值。检查SERVER_LABEL服务器属性的当前设置值。为运行此命令的服务器设置SERVER_LABEL服务器配置属性的配置值。添加用于将非数据库资源（例如应用程序服务器）托管到Oracle Clusterware的服务器池。从Oracle Clusterware配置中删除服务器池。预测添加服务器池而不更改系统的影响。模拟删除服务器池而不更改系统。使用crsctl eval modify serverpool命令可预测修改服务器池的效果，而无需更改系统。此命令可能对群集管理员有用。检索特定服务器池的权限。修改现有服务器池。设置特定服务器池的权限。检索一个或多个特定服务器池的状态和配置信息。验证守护程序是否可以侦听指定的地址和端口。启动将侦听指定IP地址和端口的测试DNS服务器。查询在指定地址和本地主机名上运行的测试DNS服务器。停止测试DNS服务器。移动或替换现有的投票文件。您只能在Oracle Restart环境中使用这些命令。检查ohasd的状态。显示服务器上Oracle高可用性服务堆栈的自动启动配置。在服务器启动时禁用Oracle High Availability Services堆栈的自动启动。在服务器启动时启用Oracle High Availability Services堆栈的自动启动。显示存储在本地节点上的二进制文件中的Oracle Clusterware软件的发行版本。显示本地节点上的软件版本。在本地服务器上启动Oracle High Availability Services。在本地服务器上停止Oracle高可用性服务。您可以使用crsctl set log命令作为root用户，以便为群集就绪服务（CRS），群集同步服务（CSS），事件管理器（EVM）和群集件子组件启用动态调试。设置Oracle Clusterware的日志级别。您可以通过设置环境变量或运行crsctl set log命令来启用Oracle Clusterware模块及其组件和资源的调试。">Oracle Clusterware Control（CRSCTL）实用程序参考</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD92375"></a><div class="props_rev_3"><a id="GUID-2BED2A9B-0D67-4D18-867D-0E33EC42FB1B" name="GUID-2BED2A9B-0D67-4D18-867D-0E33EC42FB1B"></a><h4 id="CWADD-GUID-2BED2A9B-0D67-4D18-867D-0E33EC42FB1B" class="sect4">步骤3：创建Oracle Grid Infrastructure Home的副本</h4>
                  <div>
                     <p>要将已安装的Oracle Grid Infrastructure作为工作主页，请复制源Oracle Grid Infrastructure主目录以进行克隆。</p>
                     <div class="infobox-tip" id="GUID-2BED2A9B-0D67-4D18-867D-0E33EC42FB1B__GUID-20C4C14C-9A54-45CB-AA8D-3FBFDC4EF6B7">
                        <p class="notep1">小费：</p>
                        <p>创建副本时，最佳做法是在文件名中包含版本号。</p>
                     </div>
                     <p>使用以下方法之一创建Oracle Grid Infrastructure主目录的压缩副本，其中<span class="italic"><code class="codeph">Grid_home</code></span>是原始节点上包含所有文件的原始Oracle Grid Infrastructure主目录，而<span class="italic"><code class="codeph">copy_path</code></span>是复制的Oracle Grid Infrastructure主目录的目录路径。删除不必要的文件
                     </p>
                  </div>
                  <div class="props_rev_3"><a id="GUID-31B10BCD-359F-47C7-935F-2775836610A0" name="GUID-31B10BCD-359F-47C7-935F-2775836610A0"></a><h5 id="CWADD-GUID-31B10BCD-359F-47C7-935F-2775836610A0" class="sect5">方法1：创建Oracle Grid Infrastructure Home的副本并从副本中删除不必要的文件</h5>
                     <div>
                        <ol>
                           <li class="stepexpand"><span>在源节点上，创建Oracle Grid Infrastructure主目录的副本。要将已安装的Oracle Grid Infrastructure作为工作主页，请复制源Oracle Grid Infrastructure主目录并从副本中删除不必要的文件。例如，在Linux系统上以<code class="codeph">root</code>身份运行<code class="codeph">cp</code>命令：</span><div><pre class="pre codeblock"><code>#cp <span class="variable" translate="no">Grid_home</span> <span class="variable" translate="no">copy_path</span>
</code></pre></div>
                           </li>
                           <li class="stepexpand" id="GUID-31B10BCD-359F-47C7-935F-2775836610A0__BABBDFJJ"><span>从副本中删除不需要的文件。</span><div>
                                 <p>Oracle Grid Infrastructure主目录包含仅与源节点相关的文件，因此您可以从<code class="codeph">log</code> ， <code class="codeph">crs/init</code> ， <code class="codeph">crf</code>和<code class="codeph">cdata</code>目录中的Oracle Grid Infrastructure主目录副本中删除不必要的文件。以下Linux和UNIX系统示例显示了要从Oracle Grid Infrastructure主目录的<span class="italic">副本</span>中删除不必要文件的命令：</p><pre class="pre codeblock"><code>[root @ node1 root] #cd <span class="italic">copy_path</span> [root @ node1 grid] <span class="italic">#rm</span> -rf log / <span class="italic">host_name</span> [root @ node1 grid] #rm -rf gpnp / <span class="italic">host_name</span> [root @ node1 grid] #find gpnp -type f -exec rm -F {} \; [root @ node1 grid] #rm -rf cfgtoollogs / * [root @ node1 grid] #rm -rf crs / init / * [root @ node1 grid] #rm -rf cdata / * [root @ node1 grid] #rm  - rf crf / * [root @ node1 grid] #rm -rf network / admin / * .ora [root @ node1 grid] #rm -rf crs / install / crsconfig_params [root @ node1 grid] #rm -rf crs / install / crsgenconfig_params [root @ node1 grid] #find。 -name'* .ouibak'-exec rm {} \; [root @ node1 grid] #find。 -name'* .ouibak.1'-exec rm {} \; [root @ node1 grid] #rm -rf root.sh * [root @ node1 grid] #rm -rf bin / clsecho / * [root @ node1 grid] #rm -rf rdbms / audit / * [root @ node1 grid] #rm -rf rdbms / log / * [root @ node1 grid] #rm -rf inventory / backup / *</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>在Linux和UNIX系统上使用tar或gzip创建以前复制的Oracle Grid Infrastructure主目录的压缩副本。确保您使用的工具保留权限和文件时间戳。例如：</span><div>
                                 <p>在Linux和UNIX系统上：</p><pre class="pre codeblock"><code>[root @ node1 root] #cd <span class="variable" translate="no">copy_path</span> [root @ node1 grid] #tar -zcvpf / <span class="variable" translate="no">copy_path</span> /gridHome.tgz</code></pre><p>在前面的示例中， <code class="codeph">cd</code>命令将位置更改为Oracle Grid Infrastructure主目录的副本，并删除了在此过程的前两个步骤中创建的不必要文件， <code class="codeph">tar</code>命令创建名为<code class="codeph">gridHome.tgz</code>的文件。在<code class="codeph">tar</code>命令中， <code class="codeph"><span class="variable" translate="no">copy_path</span></code>表示Oracle Grid Infrastructure主目录副本的位置。
                                 </p>
                                 <p>在AIX或HPUX系统上：</p><pre class="oac_no_warn" dir="ltr">解压缩gridHome.tar。Z tar xvf gridHome.tar</pre><p>在Windows系统上，使用WinZip创建zip文件。</p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-7C975130-A803-4DBC-855B-B51C77CCFA4A" name="GUID-7C975130-A803-4DBC-855B-B51C77CCFA4A"></a><h5 id="CWADD-GUID-7C975130-A803-4DBC-855B-B51C77CCFA4A" class="sect5">方法2：使用-X选项创建Oracle Grid Infrastructure Home的压缩副本</h5>
                     <div>
                        <ol>
                           <li class="stepexpand"><span>创建一个列出Oracle Grid Infrastructure主目录中不必要文件的文件。例如，在名为<code class="codeph">excludeFileList</code>的文件中使用星号（*）通配符列出以下文件名：</span><div><pre class="pre codeblock"><code><span class="variable" translate="no">Grid_home</span> / <span class="variable" translate="no">host_name</span> <span class="variable" translate="no">Grid_home</span> / log / <span class="variable" translate="no">host_name</span> <span class="variable" translate="no">Grid_home</span> / gpnp / * <span class="variable" translate="no">Grid_home</span> / bin / clsecho / * <span class="variable" translate="no">Grid_home</span> / crs / init / * <span class="variable" translate="no">Grid_home</span> / cdata / * <span class="variable" translate="no">Grid_home</span> / crf / * <span class="variable" translate="no">Grid_home</span> /network/admin/*.ora <span class="variable" translate="no">Grid_home</span> / root。 sh * <span class="variable" translate="no">Grid_home</span> / cfgtoollogs / * <span class="variable" translate="no">Grid_home</span> / crs / install / crsconfig_params <span class="variable" translate="no">Grid_home</span> / crs / install / crsgenconfig_params <span class="variable" translate="no">Grid_home</span> / rdbms / audit / * <span class="variable" translate="no">Grid_home</span> / rdbms / log / * <span class="variable" translate="no">Grid_home</span> / inventory / backup / * * .ouibak * .ouibak1</code></pre></div>
                           </li>
                           <li class="stepexpand" id="GUID-7C975130-A803-4DBC-855B-B51C77CCFA4A__USETHETARCOMMANDORWINZIPTOCREATEACO-A5639C57"><span>使用<code class="codeph">tar</code>命令或Winzip创建Oracle Grid Infrastructure主目录的压缩副本。例如，在Linux和UNIX系统上，运行以下命令以归档和压缩源Oracle Grid Infrastructure主目录：</span><div><pre class="pre codeblock"><code>tar cpfX  -  excludeFileList <span class="variable" translate="no">Grid_home</span> | compress -fv&gt; temp_dir / gridHome.tar。ž</code></pre><div class="infoboxnote" id="GUID-7C975130-A803-4DBC-855B-B51C77CCFA4A__GUID-A2AC5EE9-F2B1-4792-B69C-5E7A2EEC3CD1">
                                    <p class="notep1">注意：</p>
                                    <p>请勿使用jar实用程序复制和压缩Oracle Grid Infrastructure主目录。</p>
                                 </div>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div>
               </div>
            </div><a id="CWADD92123"></a><a id="CWADD92122"></a><div class="props_rev_3"><a id="GUID-850143F9-E53A-4EE6-B8A2-E6DA0FEDE4CE" name="GUID-850143F9-E53A-4EE6-B8A2-E6DA0FEDE4CE"></a><h3 id="CWADD-GUID-850143F9-E53A-4EE6-B8A2-E6DA0FEDE4CE" class="sect3">通过克隆Oracle Clusterware创建群集</h3>
               <div>
                  <p>本节介绍如何通过克隆已成功安装的Oracle Clusterware环境并将其复制到目标群集上的节点来创建群集。本节中的过程描述了如何为Linux，UNIX和Windows系统使用克隆。从克隆成功创建群集后，两个群集之间不共享OCR和投票文件。</p>
                  <p>例如，您可以使用克隆快速复制成功安装的Oracle Clusterware环境以创建集群。<a href="cloning-oracle-clusterware.html#GUID-850143F9-E53A-4EE6-B8A2-E6DA0FEDE4CE__CCHBIEGG">图8-1</a>显示了克隆过程的结果，其中节点1上的Oracle Grid Infrastructure主目录已克隆到群集2上的节点2和节点3，从而使群集2成为新的双节点群集。
                  </p>
                  <div class="figure" id="GUID-850143F9-E53A-4EE6-B8A2-E6DA0FEDE4CE__CCHBIEGG">
                     <p class="titleinfigure">图8-1克隆以创建Oracle Clusterware环境</p><img src="img/cwadd003.gif" alt="下面是图8-1的描述" title="下面是图8-1的描述" longdesc="img_text/cwadd003.html"><br><a href="img_text/cwadd003.html">“图8-1克隆以创建Oracle Clusterware环境”的说明</a></div>
                  <!-- class="figure" -->
                  <p>通过克隆创建集群的步骤如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="cloning-oracle-clusterware.html#GUID-1DB1D1CE-AED4-4B15-A21A-2E6E7B612197">步骤1：准备新的群集节点</a></p>
                     </li>
                     <li>
                        <p><a href="cloning-oracle-clusterware.html#GUID-CA8E8E78-738C-4C1E-8CC8-5C4F09F792A8">第2步：部署Oracle Grid Infrastructure Home</a></p>
                     </li>
                     <li>
                        <p><a href="cloning-oracle-clusterware.html#GUID-5025BEA3-2549-498E-A481-B2FE68AB519D" title="要设置新的Oracle Clusterware环境，请在一个节点上以交互模式或静默模式运行gridSetup.sh实用程序，就像为新集群安装Oracle Grid Infrastructure时一样。">第3步：运行gridSetup.sh实用程序</a></p>
                     </li>
                  </ul>
               </div><a id="CWADD92124"></a><div class="props_rev_3"><a id="GUID-1DB1D1CE-AED4-4B15-A21A-2E6E7B612197" name="GUID-1DB1D1CE-AED4-4B15-A21A-2E6E7B612197"></a><h4 id="CWADD-GUID-1DB1D1CE-AED4-4B15-A21A-2E6E7B612197" class="sect4">步骤1：准备新的群集节点</h4>
                  <div>
                     <div class="section">
                        <p>在每个目标节点上，执行以下预安装步骤：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>指定内核参数</p>
                           </li>
                           <li>
                              <p>为Oracle Clusterware设备配置块设备</p>
                           </li>
                           <li>
                              <p>确保已正确设置块设备权限</p>
                           </li>
                           <li>
                              <p>对<code class="codeph">/etc/hosts</code>文件中的所有名称使用短的非域限定名称</p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">ping</code>命令测试是否可以访问互连接口</p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">ping</code>命令验证在克隆过程开始时VIP地址是否处于活动状态（VIP地址的<code class="codeph">ping</code>命令必须失败）</p>
                           </li>
                           <li>
                              <p>在AIX系统上以及运行供应商集群件的Solaris x86-64位系统上，如果向集群添加节点，则必须运行<code class="codeph">rootpre.sh</code>脚本（位于安装点，您从DVD安装Oracle Clusterware或在将节点添加到群集之前，在节点上解压缩tar文件的目录中</p>
                           </li>
                           <li>
                              <p>运行CVU以验证您的硬件和操作系统环境</p>
                           </li>
                        </ul>
                        <p>有关完整的预安装核对表，请参阅特定于平台的Oracle Clusterware安装指南。</p>
                        <div class="infoboxnote" id="GUID-1DB1D1CE-AED4-4B15-A21A-2E6E7B612197__GUID-DDD0CEFE-A45F-4CC0-96CC-52AD9F8E6DD0">
                           <p class="notep1">注意：</p>
                           <p>与传统的安装方法不同，克隆过程不会在准备阶段验证您的输入。（相比之下，在使用OUI的传统安装方法中，在访谈阶段会进行各种检查。）因此，如果在硬件设置或准备阶段出错，则克隆的安装将失败。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="CWADD92125"></a><div class="props_rev_3"><a id="GUID-CA8E8E78-738C-4C1E-8CC8-5C4F09F792A8" name="GUID-CA8E8E78-738C-4C1E-8CC8-5C4F09F792A8"></a><h4 id="CWADD-GUID-CA8E8E78-738C-4C1E-8CC8-5C4F09F792A8" class="sect4">第2步：部署Oracle Grid Infrastructure Home</h4>
                  <div>
                     <div class="section">
                        <p>在开始本节中描述的克隆过程之前，请确保已完成先决条件任务以创建Oracle Grid Infrastructure主目录的副本，如<span class="q">“准备Oracle Grid Infrastructure Home进行克隆”一节中所述</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>在群集中的一个节点上，部署您在<span class="q">“步骤3：创建Oracle Grid Infrastructure主目录的副本”中创建的Oracle Grid Infrastructure主目录的副本</span> ，如下所示：</span><div>
                              <p>例如，在Linux或UNIX系统上，运行类似于以下内容的命令：</p><pre class="pre codeblock"><code>[root @ node1 root] #mkdir -p <span class="variable" translate="no">location_of_the_copy_of_the_Grid_home</span> [root @ node1 root] #cd <span class="variable" translate="no">location_of_the_copy_of_the_Grid_home</span> [root @ node1 crs] #tar -zxvf /gridHome.tgz</code></pre><p>在此示例中， <code class="codeph"><span class="variable" translate="no">location_of_the_copy_of_the_Grid_home</span></code>表示要在其中安装Oracle Grid Infrastructure主目录的目录结构，例如<code class="codeph">/u01/app/12.1.0/grid</code> 。请注意，您可以将Grid主页位置更改为该过程的一部分。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>如果尚未从Oracle Grid Infrastructure主目录中删除不必要的文件，请重复<span class="q">“方法2：使用-X选项创建Oracle Grid Infrastructure主目录的压缩副本”中的</span>步骤<a href="cloning-oracle-clusterware.html#GUID-7C975130-A803-4DBC-855B-B51C77CCFA4A__USETHETARCOMMANDORWINZIPTOCREATEACO-A5639C57">2</a> 。</span></li>
                        <li class="stepexpand"><span>如有必要，请将Oracle Grid Infrastructure主目录中的所有文件的所有权更改为Oracle Grid Infrastructure安装所有者和Oracle Inventory（ <code class="codeph">oinstall</code>权限）组所有。如果Oracle Grid Infrastructure安装所有者是<code class="codeph">oracle</code> ，并且Oracle Inventory组是<code class="codeph">oinstall</code> ，则以下示例显示在Linux系统上执行此操作的命令：</span><div><pre class="pre codeblock"><code>[root @ node1 crs] #chown -R oracle：oinstall / u01 / app</code></pre><p>在Grid主页上运行上述命令时，它会清除Oracle二进制文件中的<code class="codeph">setuid</code>和<code class="codeph">setgid</code>信息。正如所料，该命令还清除以下二进制文件中的<code class="codeph">setuid</code> ：</p><pre class="pre codeblock"><code><span class="variable" translate="no">Grid_home</span> / bin / extjob <span class="variable" translate="no">Grid_home</span> / bin / jssu <span class="variable" translate="no">Grid_home</span> / bin / oradism</code></pre><p><code class="codeph">setuid</code>信息在后续步骤中正确设置。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在继续之前，必须从源节点和目标节点上的<code class="codeph"><span class="variable" translate="no">Grid_home</span></code>目录中删除任何Oracle网络文件。</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="cloning-oracle-clusterware.html#GUID-2BED2A9B-0D67-4D18-867D-0E33EC42FB1B">步骤3：创建Oracle Grid Infrastructure Home的副本</a></li>
                           <li><a href="cloning-oracle-clusterware.html#GUID-7C975130-A803-4DBC-855B-B51C77CCFA4A">方法2：使用-X选项创建Oracle Grid Infrastructure Home的压缩副本</a></li>
                           <li><a href="cloning-oracle-clusterware.html#GUID-CC78C17B-1A45-4664-AF14-7743D70FCD1C">准备Oracle Grid Infrastructure Home进行克隆</a></li>
                           <li><a href="cloning-oracle-clusterware.html#GUID-79E673C8-5E8B-4E5B-8AE7-0DE5BF0545CE">查找和查看克隆过程中生成的日志文件</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD92126"></a><div class="props_rev_3"><a id="GUID-5025BEA3-2549-498E-A481-B2FE68AB519D" name="GUID-5025BEA3-2549-498E-A481-B2FE68AB519D"></a><h4 id="CWADD-GUID-5025BEA3-2549-498E-A481-B2FE68AB519D" class="sect4">第3步：运行gridSetup.sh实用程序</h4>
                  <div>
                     <p>要设置新的Oracle Clusterware环境，请在一个节点上以交互模式或静默模式运行<code class="codeph">gridSetup.sh</code>实用程序，就像为新集群安装Oracle Grid Infrastructure时一样。
                     </p>
                     <div class="section">
                        <p>启动<code class="codeph"><span class="variable" translate="no">$ORACLE_home</span> /gridSetup.sh</code>实用程序后，您可以选择以交互模式，使用交互式界面或以静默模式运行它，您可以在其中提供响应文件。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="CWADD92138"></a><a id="CWADD92137"></a><div class="props_rev_3"><a id="GUID-D02E842E-28C5-42C6-848E-80B055B48867" name="GUID-D02E842E-28C5-42C6-848E-80B055B48867"></a><h3 id="CWADD-GUID-D02E842E-28C5-42C6-848E-80B055B48867" class="sect3">使用克隆将节点添加到群集</h3>
               <div>
                  <p>您还可以使用克隆将节点添加到群集。</p>
                  <div class="section">
                     <p><a href="cloning-oracle-clusterware.html#GUID-D02E842E-28C5-42C6-848E-80B055B48867__BABGHDGF">图8-2</a>显示了克隆过程的结果，其中节点1上的Oracle Grid Infrastructure主目录已克隆到同一群集中的节点2，从而使其成为双节点群集。新添加的节点共享相同的OCR和投票文件。
                     </p>
                     <div class="figure" id="GUID-D02E842E-28C5-42C6-848E-80B055B48867__BABGHDGF">
                        <p class="titleinfigure">图8-2克隆以向群集添加节点</p><img src="img/cwadd03.gif" alt="下面是图8-2的描述" title="下面是图8-2的描述" longdesc="img_text/cwadd03.html"><br><a href="img_text/cwadd03.html">“图8-2克隆以向节点添加节点”的说明</a></div>
                     <!-- class="figure" -->
                     <p>以<a href="cloning-oracle-clusterware.html#GUID-D02E842E-28C5-42C6-848E-80B055B48867__BABGHDGF">图8-2</a>为例，以下过程说明如何使用克隆将节点添加到集群。在此过程中，您将用于创建节点1的映像（克隆）的副本最初创建到节点2。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="p">
                     <p>按照<span class="q">“ <a href="cloning-oracle-clusterware.html#GUID-1DB1D1CE-AED4-4B15-A21A-2E6E7B612197">步骤1：准备新群集节点</a> ”中的说明</span>准备节点2。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>在节点2上部署Oracle Grid Infrastructure主目录，如<span class="q">“ <a href="cloning-oracle-clusterware.html#GUID-CA8E8E78-738C-4C1E-8CC8-5C4F09F792A8">步骤2：在目标节点上部署Oracle Grid Infrastructure主目录</a> ”中所述</span> 。</span><div>
                           <p>使用tar实用程序在节点1上创建Oracle Grid Infrastructure主目录的存档，并将其复制到节点2。如果节点1上的Oracle Grid Infrastructure主目录的位置为<code class="codeph">$ORACLE_HOME</code> ，则必须将此目录用作节点2上的目标位置。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>运行<code class="codeph">gridSetup.sh</code>脚本并选择“ <code>Software Only</code>安装选项。</span></li>
                     <li class="stepexpand"><span>此步骤不适用于Windows。</span><div>
                           <p>在节点2上的中央清单目录中，以<code class="codeph">root</code>身份运行<code class="codeph">orainstRoot.sh</code>脚本。此脚本使用中央库存的位置填充<code class="codeph">/etc/oraInst.loc</code>目录。例如：</p><pre class="pre codeblock"><code>[root @ node2 root]＃/ opt / oracle /oraInventory / orainstRoot.sh</code></pre><p>您可以同时在多个目标节点上运行该脚本。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>运行<code class="codeph">gridSetup.sh -noCopy</code>脚本，然后选择“ <code>Add more nodes to cluster</code> 。</span></li>
                     <li class="stepexpand"><span>在节点2上，运行<code class="codeph"><span class="variable" translate="no">Grid_home</span> /root.sh</code>脚本。</span><div>
                           <div class="infoboxnote" id="GUID-D02E842E-28C5-42C6-848E-80B055B48867__GUID-16ADBFE5-A616-4D76-9537-433CAFBDBDE8">
                              <p class="notep1">注意：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>确保在运行<code class="codeph">root.sh</code>或<code class="codeph">gridconfig.bat</code>脚本之前扩展任何数据库<code class="codeph">gridconfig.bat</code> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>此示例中的集群只有两个节点。将多个节点添加到群集时，可以在所有节点上同时运行<code class="codeph">root.sh</code>
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <p>以下示例适用于Linux或UNIX系统。在节点2上，运行以下命令：</p><pre class="pre codeblock"><code>[root @ node2 root] <span class="variable" translate="no">Grid_home</span> /root.sh</code></pre><p><code class="codeph">root.sh</code>脚本自动配置Oracle Cluster Registry（OCR）中的虚拟IP（VIP）资源。
                           </p>
                           <p>在Windows上，在节点2上运行以下命令：</p><pre class="pre codeblock"><code>C：\&gt; Grid_home \ CRS \配置\ gridconfig.bat</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>在节点1上运行以下群集验证实用程序（CVU）命令：</span><div><pre class="pre codeblock"><code>$ cluvfy stage -post nodeadd -n <span class="variable" translate="no">destination_node_name</span> [-verbose]</code></pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="cluster-verification-utility-reference.html#GUID-F9E3F87E-BFEC-4D50-A11E-0F096EC05880">cluvfy stage [-pre | -post] nodeadd</a></li>
                     </ul>
                  </div>
               </div>
            </div><a id="CWADD92140"></a><a id="CWADD92141"></a><a id="CWADD92139"></a><div class="props_rev_3"><a id="GUID-79E673C8-5E8B-4E5B-8AE7-0DE5BF0545CE" name="GUID-79E673C8-5E8B-4E5B-8AE7-0DE5BF0545CE"></a><h3 id="CWADD-GUID-79E673C8-5E8B-4E5B-8AE7-0DE5BF0545CE" class="sect3">查找和查看克隆过程中生成的日志文件</h3>
               <div>
                  <div class="section">
                     <p>克隆脚本运行多个工具，每个工具都可以生成日志文件。<code class="codeph">gridSetup.sh</code>实用程序完成运行后，您可以查看日志文件以获取有关克隆过程状态的更多信息。<a href="cloning-oracle-clusterware.html#GUID-79E673C8-5E8B-4E5B-8AE7-0DE5BF0545CE__CCHDHACB" title="克隆过程中生成的日志文件，它们所在的位置以及它们的用途。">表8-1</a>列出了克隆过程中生成的日志文件，这些日志文件是用于诊断目的的关键日志文件。
                     </p>
                     <div class="infoboxnote" id="GUID-79E673C8-5E8B-4E5B-8AE7-0DE5BF0545CE__GUID-BD308F7D-79E2-4E40-8FEE-1668E59E7328">
                        <p class="notep1">注意：</p>
                        <p><a href="cloning-oracle-clusterware.html#GUID-79E673C8-5E8B-4E5B-8AE7-0DE5BF0545CE__CCHDHACB" title="克隆过程中生成的日志文件，它们所在的位置以及它们的用途。">表8-1中的</a> <span class="italic"><code class="codeph">Central_inventory</code></span>是指Oracle Inventory目录。
                        </p>
                     </div>
                     <div class="tblformalwide" id="GUID-79E673C8-5E8B-4E5B-8AE7-0DE5BF0545CE__CCHDHACB">
                        <p class="titleintable">表8-1克隆日志文件及其说明</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="克隆日志文件及其说明" width="100%" border="1" summary="Log files generated during cloning, where they are located, and what their purpose is." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="49%" id="d43988e2422">日志文件名称和位置</th>
                                 <th align="left" valign="bottom" width="51%" id="d43988e2425">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d43988e2430" headers="d43988e2422 "><code class="codeph"><span class="variable" translate="no">Central_inventory</span> / logs / cloneActions <span class="variable" translate="no">timestamp</span> .log</code></td>
                                 <td align="left" valign="top" width="51%" headers="d43988e2430 d43988e2425 ">
                                    <p>包含克隆的OUI部分期间发生的操作的详细日志。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d43988e2442" headers="d43988e2422 "><code class="codeph"><span class="variable" translate="no">Central_inventory</span> / logs / oraInstall <span class="variable" translate="no">timestamp</span> .err</code></td>
                                 <td align="left" valign="top" width="51%" headers="d43988e2442 d43988e2425 ">
                                    <p>包含有关OUI运行时发生的错误的信息。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="49%" id="d43988e2454" headers="d43988e2422 "><code class="codeph"><span class="variable" translate="no">Central_inventory</span> / logs / oraInstall <span class="variable" translate="no">timestamp</span> .out</code></td>
                                 <td align="left" valign="top" width="51%" headers="d43988e2454 d43988e2425 ">
                                    <p>包含其他杂项信息。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p><a href="cloning-oracle-clusterware.html#GUID-79E673C8-5E8B-4E5B-8AE7-0DE5BF0545CE__CCHHGGEI" title="在哪里可以找到Oracle Inventory目录，其成员被授予写入oraInventory目录的OINSTALL权限，即服务器上Oracle安装的中央库存。">表8-2</a>列出了各种平台的Oracle Inventory目录的位置。
                     </p>
                     <div class="tblformalwide" id="GUID-79E673C8-5E8B-4E5B-8AE7-0DE5BF0545CE__CCHHGGEI">
                        <p class="titleintable">表8-2查找Oracle Inventory目录的位置</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="查找Oracle Inventory目录的位置" width="100%" border="1" summary="Where to find the Oracle Inventory directory, whose members are granted the OINSTALL privilege of writing to the oraInventory directory, the central inventory of Oracle installations on a server." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="25%" id="d43988e2487">系统类型</th>
                                 <th align="left" valign="bottom" width="75%" id="d43988e2490">Oracle Inventory Directory的位置</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d43988e2495" headers="d43988e2487 ">
                                    <p>除Linux和IBM AIX之外的所有UNIX计算机</p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d43988e2495 d43988e2490 ">
                                    <p><code class="codeph">/var/opt/oracle/oraInst.loc</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d43988e2503" headers="d43988e2487 ">
                                    <p>IBM AIX和Linux</p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d43988e2503 d43988e2490 ">
                                    <p><code class="codeph">/etc/oraInst.loc中</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d43988e2511" headers="d43988e2487 ">
                                    <p>视窗</p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d43988e2511 d43988e2490 ">
                                    <p><code class="codeph">C：\ Program Files \ Oracle \ Inventory</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
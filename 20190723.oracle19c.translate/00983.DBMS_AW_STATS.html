<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="DBMS_AW_STATS contains subprograms for managing optimizer statistics for cubes and dimensions. Generating the statistics does not have a significant performance cost."></meta>
      <meta name="description" content="DBMS_AW_STATS contains subprograms for managing optimizer statistics for cubes and dimensions. Generating the statistics does not have a significant performance cost."></meta>
      <title>DBMS_AW_STATS</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="DBMS_AW_STATS contains subprograms for managing optimizer statistics for cubes and dimensions. Generating the statistics does not have a significant performance cost."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_AUTO_TASK_ADMIN.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_CAPTURE_ADM.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_AUTO_TASK_ADMIN.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_CAPTURE_ADM.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_AW_STATS</li>
            </ol>
            <a id="GUID-CD60E488-79D3-4373-AB3C-959F1E72B3C8" name="GUID-CD60E488-79D3-4373-AB3C-959F1E72B3C8"></a><a id="ARPLS217"></a><a id="ARPLS217"></a>
            
            <h2 id="ARPLS-GUID-CD60E488-79D3-4373-AB3C-959F1E72B3C8" class="sect2"><span class="enumeration_chapter">32</span> DBMS_AW_STATS</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_AW_STATS</code>包含用于管理多维数据集和维度的优化程序统计信息的子程序。生成统计信息不会产生显着的性能成本。
               </p>
               <div class="infoboxnotealso" id="GUID-CD60E488-79D3-4373-AB3C-959F1E72B3C8__GUID-D6180EFB-961E-42F6-B9B8-53421D636CC5">
                  <p class="notep1">也可以看看：</p>
                  <p>有关使用OLAP选项支持商业智能和分析应用程序的<a href="../olaug/administering-oracle-olap.html#OLAUG701" target="_blank"><span class="italic">Oracle OLAP用户指南</span></a></p>
               </div>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_AW_STATS.html#GUID-65E1C774-3268-4BC2-A37E-CE76A687E6D7" title="多维数据集和维度是支持多维分析的一流数据对象。它们存储在称为分析工作区的容器中。Oracle数据库的OLAP选项提供了多维对象和分析。">使用DBMS_AW_STATS</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_AW_STATS.html#GUID-C1977789-CB4A-418D-9385-AB32759110F0" title="DBMS_AW_STATS使用ANALYZE和CLEAR过程。">DBMS_AW_STATS子程序摘要</a></p>
                  </li>
               </ul>
            </div><a id="ARPLS65458"></a><a id="ARPLS65458"></a><div class="props_rev_3"><a id="GUID-65E1C774-3268-4BC2-A37E-CE76A687E6D7" name="GUID-65E1C774-3268-4BC2-A37E-CE76A687E6D7"></a><h3 id="ARPLS-GUID-65E1C774-3268-4BC2-A37E-CE76A687E6D7" class="sect3"><span class="enumeration_section">32.1</span>使用DBMS_AW_STATS</h3>
               <div>
                  <p>多维数据集和维度是支持多维分析的一流数据对象。它们存储在称为分析工作区的容器中。Oracle数据库的OLAP选项提供了多维对象和分析。</p>
                  <div class="section">
                     <p>优化程序统计信息用于为连接两个多维数据集视图或将多维数据集视图连接到表或表视图的查询创建执行计划。它们还用于查询重写到多维数据集物化视图。您只需为这些类型的查询生成统计信息。</p>
                     <p>针对单个多维数据集的查询不使用优化程序统计信息。这些查询在分析工作区内自动优化。</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS65459"></a><a id="ARPLS65460"></a><a id="ARPLS65460"></a><a id="ARPLS65459"></a><div class="props_rev_3"><a id="GUID-C1977789-CB4A-418D-9385-AB32759110F0" name="GUID-C1977789-CB4A-418D-9385-AB32759110F0"></a><h3 id="ARPLS-GUID-C1977789-CB4A-418D-9385-AB32759110F0" class="sect3"><span class="enumeration_section">32.2</span> DBMS_AW_STATS子程序摘要</h3>
               <div>
                  <p><code class="codeph">DBMS_AW_STATS</code>使用ANALYZE和CLEAR过程。
                  </p>
                  <div class="tblformal" id="GUID-C1977789-CB4A-418D-9385-AB32759110F0__GUID-FD0A1167-D2B3-477D-AECF-EEE0084DBAF5">
                     <p class="titleintable">表32-1 DBMS_AW_STATS包子程序</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_AW_STATS包子程序" width="100%" border="1" summary="Descriptions of DBMS_AW_STATS subprograms" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d159992e322">子程序</th>
                              <th align="left" valign="bottom" width="69%" id="d159992e325">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d159992e330" headers="d159992e322 ">
                                 <p><a href="DBMS_AW_STATS.html#GUID-16CACCE3-E813-42E4-8019-E47BE00C5239" title="此过程生成多维数据集或多维数据集维度的优化程序统计信息。">分析程序</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d159992e330 d159992e325 ">
                                 <p>生成有关多维数据集和多维数据集维度的优化程</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d159992e342" headers="d159992e322 ">
                                 <p><a href="DBMS_AW_STATS.html#GUID-88FEE1D2-4A0B-4000-93D8-9CB60E1BF362" title="此过程清除ANALYZE过程生成的统计信息。">清除程序</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d159992e342 d159992e325 ">
                                 <p>从多维数据集和多维数据集维度中清除优化程序统</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS65461"></a><a id="ARPLS65462"></a><a id="ARPLS65462"></a><a id="ARPLS65461"></a><div class="props_rev_3"><a id="GUID-16CACCE3-E813-42E4-8019-E47BE00C5239" name="GUID-16CACCE3-E813-42E4-8019-E47BE00C5239"></a><h4 id="ARPLS-GUID-16CACCE3-E813-42E4-8019-E47BE00C5239" class="sect4"><span class="enumeration_section">32.2.1</span>分析程序</h4>
                  <div>
                     <p>此过程生成多维数据集或多维数据集维度的优化程序统计信息。</p>
                     <div class="section">
                        <p>这些统计信息用于生成一些执行计划，如<span class="q">“ <a href="DBMS_AW_STATS.html#GUID-65E1C774-3268-4BC2-A37E-CE76A687E6D7" title="多维数据集和维度是支持多维分析的一流数据对象。它们存储在称为分析工作区的容器中。Oracle数据库的OLAP选项提供了多维对象和分析。">使用DBMS_AW_STATS</a> ”中所述</span> 。
                        </p>
                        <p>对于多维数据集，统计信息适用于与多维数据集关联的所有度量和计算度量。这些统计包括：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>数据值的平均长度</p>
                           </li>
                           <li>
                              <p>最大数据值的长度</p>
                           </li>
                           <li>
                              <p>最小值</p>
                           </li>
                           <li>
                              <p>不同值的数量</p>
                           </li>
                           <li>
                              <p>空值的数量</p>
                           </li>
                        </ul>
                        <p>对于维度，统计信息适用于维度及其属性，级别和层次结构。这些统计包括：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>值的平均长度</p>
                           </li>
                           <li>
                              <p>最大值的长度</p>
                           </li>
                           <li>
                              <p>最小值</p>
                           </li>
                           <li>
                              <p>最大值</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-16CACCE3-E813-42E4-8019-E47BE00C5239__GUID-8F3D5C0F-9A11-4DA1-82F9-8B9F702545C7">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_AW_STATS.ANALYZE（inname IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-16CACCE3-E813-42E4-8019-E47BE00C5239__GUID-C346E18E-2B56-4EDE-A6FE-2F74FADBDCC4">参数</p>
                        <div class="tblformal" id="GUID-16CACCE3-E813-42E4-8019-E47BE00C5239__GUID-AC22F8BE-8502-47BA-80DD-FD1887D0097E">
                           <p class="titleintable">表32-2 ANALYZE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ANALYZE过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_AW_STATS.ANALYZE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="19%" id="d159992e507">参数</th>
                                    <th align="left" valign="bottom" width="81%" id="d159992e510">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d159992e515" headers="d159992e507 ">
                                       <p><code class="codeph">inname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="81%" headers="d159992e515 d159992e510 ">
                                       <p>多维数据集或维度的限定名称。</p>
                                       <p>对于多维数据集，限定名称的格式为<span class="italic"><code class="codeph">owner.cube_name</code></span> 。
                                       </p>
                                       <p>对于维度，格式为<span class="italic"><code class="codeph">owner.dimension_name</code></span> 。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-16CACCE3-E813-42E4-8019-E47BE00C5239__GUID-08BA8826-049F-45B4-ACD5-A06CC99F5279">使用说明</p>
                        <p>始终先分析尺寸，然后再分析立方体。</p>
                        <p>分析维度后，分析使用该维度的所有多维数据集。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-16CACCE3-E813-42E4-8019-E47BE00C5239__GUID-4CC0AB52-9AD6-4F3D-902F-2A250988A070">例</p>
                        <p>此示例脚本生成有关<code class="codeph">UNITS_CUBE</code>及其维度的优化程序统计信息。
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AW_STATS.ANALYZE（'time'）; DBMS_AW_STATS.ANALYZE（ '顾客'）; DBMS_AW_STATS.ANALYZE（ '产品'）; DBMS_AW_STATS.ANALYZE（ '通道'）; DBMS_AW_STATS.ANALYZE（ 'UNITS_CUBE'）;结束; /</pre><p>以下语句为连接<code class="codeph">UNITS_CUBE_VIEW</code> ， <code class="codeph">CUSTOMER_PRIMARY_VIEW</code>和<code class="codeph">ACCOUNTS</code>表中的列的<code class="codeph">SELECT</code>语句创建并显示执行计划：</p><pre class="oac_no_warn" dir="ltr">EXPLAIN PLAN FOR SELECT cu.long_description客户，a.city city，a.zip_pc zip，cu.level_name“LEVEL”，round（f.sales）sales / *来自维度视图和多维数据集视图* / FROM time_calendar_view t，product_primary_view p， customer_view cu，channel_view ch，units_cube_view f，account a / *创建级别过滤器而不是GROUP BY * / WHERE t.long_description ='2004'和p.level_name ='TOTAL'和cu.customer_account_id类似'COMP％'和ch。 level_name ='TOTAL'/ *将维视图连接到多维数据集视图* / AND t.dim_key = f。TIME和p.dim_key = f.product AND cu.dim_key = f.customer AND ch.dim_key = f.channel AND a.account_id = cu.customer_account_id ORDER BY zip;</pre><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT plan_table_output FROM TABLE（dbms_xplan.display（））; PLAN_TABLE_OUTPUT ------------------------------------------------- ------------------------------------------------计划哈希值：3890178023 ----------------------------------------------- ------------------------------------------------ | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- --------------------------------------------- | 0 |选择声明| | 1 | 89 | 6（34）| 00:00:01 | | 1 |排序顺序| | 1 | 89 | 6（34）| 00:00:01 | | * 2 | HASH JOIN | | 1 | 89 | 5（20）| 00:00:01 | | 3 | JOINED CUBE SCAN PARTIAL OUTER | | | | | | | 4 | CUBE ACCESS | UNITS_CUBE | | | | | | 5 | CUBE ACCESS | CHANNEL | | | | | | 6 | CUBE ACCESS |客户| | | | | | 7 | CUBE ACCESS |产品| | | | | | * 8 | CUBE ACCESS |时间| 1 | 55 | 2（0）| 00:00:01 | | * 9 |表访问完全|帐户| 3 | 102 | 2（0）| 00:00:01 | -------------------------------------------------- ---------------------------------------------谓词信息（由操作ID）：---------------------------------------------- ----- 2  - 访问（“A”。“ACCOUNT_ID”= SYS_OP_ATG（VALUE（KOKBF $），39,40,2））8  - 过滤器（SYS_OP_ATG（VALUE（KOKBF $），16,17,2） ='2004'和SYS_OP_ATG（VALUE（KOKBF $），39,40,2）LIKE'COMP％'和SYS_OP_ATG（VALUE（KOKBF $），47,48,2）='TOTAL'和SYS_OP_ATG（VALUE（KOKBF $） ），25,26,2）='TOTAL'）9  - 过滤器（“A”。“ACCOUNT_ID”LIKE'COMP％'）注意-----  - 用于此语句的动态统计信息选择30行。</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65463"></a><a id="ARPLS65464"></a><a id="ARPLS65464"></a><a id="ARPLS65463"></a><div class="props_rev_3"><a id="GUID-88FEE1D2-4A0B-4000-93D8-9CB60E1BF362" name="GUID-88FEE1D2-4A0B-4000-93D8-9CB60E1BF362"></a><h4 id="ARPLS-GUID-88FEE1D2-4A0B-4000-93D8-9CB60E1BF362" class="sect4"><span class="enumeration_section">32.2.2</span>清除程序</h4>
                  <div>
                     <p>此过程清除ANALYZE过程生成的统计信息。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-88FEE1D2-4A0B-4000-93D8-9CB60E1BF362__GUID-D0355268-79CD-432F-A2E9-EBA77193D882">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_AW_STATS.CLEAR（inname IN VARCHAR2;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-88FEE1D2-4A0B-4000-93D8-9CB60E1BF362__GUID-6931AB36-0084-4FFD-856E-100FF7E2B299">参数</p>
                        <div class="tblformal" id="GUID-88FEE1D2-4A0B-4000-93D8-9CB60E1BF362__GUID-D88D1270-7036-4B02-B0C5-56DBB4B27CE2">
                           <p class="titleintable">表32-3 CLEAR过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CLEAR过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_AW_STATS.CLEAR subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d159992e676">参数</th>
                                    <th align="left" valign="bottom" width="80%" id="d159992e679">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d159992e684" headers="d159992e676 ">
                                       <p><code class="codeph">inname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="80%" headers="d159992e684 d159992e679 ">
                                       <p>多维数据集或维度的限定名称。</p>
                                       <p>对于多维数据集，限定名称的格式为<span class="italic"><code class="codeph">owner.cube_name</code></span> 。
                                       </p>
                                       <p>对于维度，格式为<span class="italic"><code class="codeph">owner.dimension_name</code></span> 。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-88FEE1D2-4A0B-4000-93D8-9CB60E1BF362__GUID-9400CF48-F89E-46AA-8A45-58F84590A4B2">例子</p>
                        <p>以下脚本清除<code class="codeph">UNITS_CUBE</code>及其维度的统计信息。
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_AW_STATS.clear（'units_cube'）; DBMS_AW_STATS.clear（ '时间'）; DBMS_AW_STATS.clear（ '顾客'）; DBMS_AW_STATS.clear（ '产品'）; DBMS_AW_STATS.clear（ '通道'）;结束; /</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
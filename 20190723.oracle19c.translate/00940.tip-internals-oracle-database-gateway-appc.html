<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>提示内部</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="User&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="User&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-gateway-appc-users-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-16T18:35:49-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="F18239-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="data-type-conversion-oracle-database-gateway-appc.html" title="Previous" type="text/html"></link>
      <link rel="next" href="admin-utility-samples-oracle-database-gateway-appc.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Gateway for APPC User&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="APPUG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="data-type-conversion-oracle-database-gateway-appc.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="admin-utility-samples-oracle-database-gateway-appc.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">用户指导</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">提示内部</li>
            </ol>
            <a id="GUID-9F4E3177-13B0-43CE-AD0A-5BCD66B3FD17" name="GUID-9F4E3177-13B0-43CE-AD0A-5BCD66B3FD17"></a><a id="APPUG130"></a>
            
            <h2 id="APPUG-GUID-9F4E3177-13B0-43CE-AD0A-5BCD66B3FD17" class="sect2"><span class="enumeration_appendix">E</span> Tip Internals</h2>
         </header>
         <div class="ind">
            <div>
               <p>PGAU可在大多数情况下生成完整且可操作的TIP。<a id="d52678e30" class="indexterm-anchor"></a><a id="d52678e34" class="indexterm-anchor"></a><a id="d52678e38" class="indexterm-anchor"></a><a id="d52678e42" class="indexterm-anchor"></a>提供TIP内部信息是为了帮助您诊断PGAU生成的TIP问题，以及编写自定义TIP（如果您选择这样做）。
               </p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><span class="bold">如果您的网关使用SNA通信协议：</span> 
                     </p>
                     <p>本附录涉及一个名为<code class="codeph">pgadb2i</code>的样本。此TIP的来源存档<a id="d52678e58" class="indexterm-anchor"></a><a id="d52678e60" class="indexterm-anchor"></a> <code class="codeph">pgadb2i.sql</code>在<code class="codeph">%ORACLE_HOME%\dg4appc\demo\CICS</code>目录Microsoft Windows和<code class="codeph">$ORACLE_HOME/dg4appc/demo/CICS</code>目录基于UNIX的系统。
                     </p>
                  </li>
                  <li>
                     <p><span class="bold">如果您的网关使用TCP / IP通信协议：</span></p>
                     <p>本附录涉及一个名为<code class="codeph">pgaims</code>的示例。此TIP的源位于Microsoft Windows的<code class="codeph">%ORACLE_HOME%\dg4appc\demo\IMS</code>目录中的文件<code class="codeph">pgtflipd.sql</code>和基于UNIX的系统上的<code class="codeph">$ORACLE_HOME/dg4appc/demo/IMS</code>目录。
                     </p>
                  </li>
               </ul>
               <p></p>
               <p>Toipics：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="tip-internals-oracle-database-gateway-appc.html#GUID-18D221F7-64EA-4089-8C63-429F8EA70625">背景阅读</a></p>
                  </li>
                  <li>
                     <p><a href="tip-internals-oracle-database-gateway-appc.html#GUID-D39446FA-9841-417F-9C65-3A7BB04BDD2D">PL / SQL包和TIP文件分离</a></p>
                  </li>
               </ul>
            </div><a id="APPUG1121"></a><div class="props_rev_3"><a id="GUID-18D221F7-64EA-4089-8C63-429F8EA70625" name="GUID-18D221F7-64EA-4089-8C63-429F8EA70625"></a><h3 id="APPUG-GUID-18D221F7-64EA-4089-8C63-429F8EA70625" class="sect3">背景阅读</h3>
               <div>
                  <div class="section">
                     <p>有几个主题对理解很重要<a id="d52678e138" class="indexterm-anchor"></a> TIP运营与发展;以下是对TIP操作至关重要的概念列表以及您可以参考的建议源，以获取更多信息。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关PL / SQL包的信息，请参阅<a href="../arpls/index.html" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a> 。
                           </p>
                        </li>
                        <li>
                           <p>有关PGA应用程序概念的信息，请参阅本指南中的以下章节：</p>
                        </li>
                        <li>
                           <p><span class="bold">如果您的通信协议是SNA：</span>请参阅<a href="developing-appc-client-app-sna-only.html#GUID-9D1AFA3A-C1DC-4D52-AAAB-41269D6D5788">客户端应用程序开发（仅限SNA）</a> ;</p>
                        </li>
                        <li>
                           <p><span class="bold">如果您的通信协议是TCP / IP：</span>请参阅<a href="developing-appc-client-app-tcpip-only.html#GUID-705991C2-2CC2-4FAB-A04C-D63485B571FC">客户端应用程序开发（仅限TCP / IP）</a> 。
                           </p>
                        </li>
                        <li>
                           <p>有关PGA RPC接口的信息，请参阅<a href="oracle-database-gateway-appc-rpc-interface.html#GUID-E715B6DF-B773-4D0D-9382-643472B34FC3">网关RPC接口</a> 。
                           </p>
                        </li>
                        <li>
                           <p>有关PGA <code class="codeph">UTL_PG</code>接口的信息，请参阅<a href="oracle-database-gateway-appc-utl_pg-interface.html#GUID-A6AC77AC-DE2C-476B-AC68-DF8E8F9C600E">UTL_PG接口</a> 。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="APPUG1122"></a><div class="props_rev_3"><a id="GUID-D39446FA-9841-417F-9C65-3A7BB04BDD2D" name="GUID-D39446FA-9841-417F-9C65-3A7BB04BDD2D"></a><h3 id="APPUG-GUID-D39446FA-9841-417F-9C65-3A7BB04BDD2D" class="sect3">PL / SQL包和TIP文件分离</h3>
               <div>
                  <div class="section">
                     <p>PGAU <a id="d52678e224" class="indexterm-anchor"></a><a id="d52678e226" class="indexterm-anchor"></a> <code class="codeph">GENERATE</code>将每个输出TIP写入标准<a id="d52678e233" class="indexterm-anchor"></a> PL / SQL包规范文件和正文文件。这种分离是有益和重要的。有关更多信息，请参阅<a href="../adfns/index.html" target="_blank"><span class="italic">Oracle数据库开发指南</span></a>和<a href="../lnpls/index.html" target="_blank"><span class="italic">Oracle数据库PL / SQL语言参考</span></a> 。有关构建PL / SQL包的更多信息，另请参阅<a href="pga-utility-oracle-database-gateway-appc.html#GUID-F73E20E7-D94C-468F-BA65-CC34F6373F19">Procedural Gateway Administration Utility中的</a> <span class="q">“ <a href="pga-utility-oracle-database-gateway-appc.html#GUID-3ABF57C3-C8F6-4DA7-9D7F-C415C805A402">GENERATE</a> ”</span> 。
                     </p>
                     <p><a id="d52678e257" class="indexterm-anchor"></a>提示是<a id="d52678e262" class="indexterm-anchor"></a> PL / SQL包。每次重新编译包规范时，依赖于该包的所有对象都将被无效并在引用时隐式重新编译，即使规范没有更改也是如此。
                     </p>
                     <p>依赖于的对象<a id="d52678e267" class="indexterm-anchor"></a> TIP规范包括调用TIP与远程主机事务交互的客户端应用程序。
                     </p>
                     <p>由于以下原因，更改TIP主体可能很重要：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>Oracle发布影响TIP主体的维护。</p>
                        </li>
                        <li>
                           <p>Oracle为TIP主体所依赖的<code class="codeph">UTL_RAW</code>或<code class="codeph">UTL_PG</code>转换函数提供维护。
                           </p>
                           <p>有关这些功能的更多详细信息，请参阅<a href="oracle-database-gateway-appc-utl_pg-interface.html#GUID-A6AC77AC-DE2C-476B-AC68-DF8E8F9C600E">UTL_PG接口</a> 。
                           </p>
                        </li>
                        <li>
                           <p>如果远程主机网络或程序位置参数已更改。有关更多信息，请参阅<a href="pga-utility-oracle-database-gateway-appc.html#GUID-F73E20E7-D94C-468F-BA65-CC34F6373F19">Procedural Gateway Administration Utility中的</a> <span class="q">“ <a href="pga-utility-oracle-database-gateway-appc.html#GUID-EC8B6848-0566-45CD-BA08-78F15ED0EEB4">DEFINE TRANSACTION</a> ”</span></p>
                        </li>
                     </ul>
                     <p>如果TIP规范不需要更改或重新编译，则<a id="d52678e305" class="indexterm-anchor"></a>可以重新生成和重新编译TIP正文以获取更改，而不会导致调用TIP的客户端应用程序失效和隐式重新编译。</p>
                     <p>正是由于这个原因，PGAU现在将输出TIP分成规范和正文文件。有关文件标识的讨论，请参阅<a href="pga-utility-oracle-database-gateway-appc.html#GUID-F73E20E7-D94C-468F-BA65-CC34F6373F19">Procedural Gateway Administration Utility</a>中的<span class="q">“ <a href="pga-utility-oracle-database-gateway-appc.html#GUID-3ABF57C3-C8F6-4DA7-9D7F-C415C805A402">GENERATE</a> ”</span> 。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div><a id="APPUG1123"></a><div class="props_rev_3"><a id="GUID-94D30139-FE31-4A3C-9BB4-96DB121EB29D" name="GUID-94D30139-FE31-4A3C-9BB4-96DB121EB29D"></a><h4 id="APPUG-GUID-94D30139-FE31-4A3C-9BB4-96DB121EB29D" class="sect4">独立的TIP身体变化</h4>
                  <div>
                     <div class="section">
                        <p><a id="d52678e353" class="indexterm-anchor"></a>独立的TIP主体更改是内部的，不需要更改TIP规范。此类更改的示例包括： <code class="codeph">UTL_RAW</code>或<code class="codeph">UTL_PG</code>转换的更改，诊断的包含或网络事务参数的更改。
                        </p>
                        <p>在这些情况下，当PGAU用于重新生成TIP时，新的<a id="d52678e366" class="indexterm-anchor"></a> TIP规范文件可以保存或丢弃，但不应重新编译。应该重新编译新的TIP主体<a id="d52678e369" class="indexterm-anchor"></a><a id="d52678e373" class="indexterm-anchor"></a>在SQL * Plus。如果TIP主体更改是独立的，则新的主体编译完成且没有错误，并且前一个TIP规范仍然有效。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div><a id="APPUG1124"></a><div class="props_rev_3"><a id="GUID-C2506E37-6A46-447A-8093-4D3B5E195C0E" name="GUID-C2506E37-6A46-447A-8093-4D3B5E195C0E"></a><h5 id="APPUG-GUID-C2506E37-6A46-447A-8093-4D3B5E195C0E" class="sect5">确定规范是否保留有效</h5>
                     <div>
                        <div class="section">
                           <p>要确定规范是否仍然有效，请根据您的通信协议从SQL * Plus发出以下语句：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="bold">如果您的网关使用SNA通信协议，请</span>发出以下命令：</p><pre class="oac_no_warn" dir="ltr">SQL&gt;列ddl_date格式A22标题'LAST_DDL'SQL&gt; select owner_name，2 object_type，3 to_char（last_ddl_time，'MON-DD -YY HH：MM：SS'）ddl_date，4来自all_objects的状态5其中owner ='PGAADMIN'6按object_type，object_name排序; OBJECT_NAME OBJECT_TYPE LAST_DDL状态----------- ----------- -------------------- ---- ----- PGADB2I PACKAGE NOV-24-1999 09:09:13 VALID PGADB2I PACKAGE BODY NOV-24-1999 09:11:44有效DB2IDRIV程序DEC-30-1999 12:12:14有效DB2IDRVM程序DEC-30 -1999 12:12:53有效的DB2IFORM PROCEDURE DEC-14-1999 11:12:24有效</pre><p><code class="codeph">LAST_DDL</code>列是完成对对象的最后一次DDL更改的日期和时间。它表明编译的顺序是：</p><pre class="oac_no_warn" dir="ltr">PGADB2I PACKAGE（规范）DB2IDRVM PROCEDURE（第一个客户端应用程序，取决于PGADB2I）DB2IFORM PROCEDURE（第二个客户端应用程序，取决于PGADB2I）DB2IDRIV PROCEDURE（第三个客户端应用程序，取决于PGADB2I）PGADB2I PACKAGE BODY（重新编译正文）</pre><p>请注意，正文的重新编译不会间接使其依赖对象，规范或客户端应用程序无效。</p>
                              </li>
                              <li>
                                 <p><span class="bold">如果您的网关使用TCP / IP通信协议，请</span>从SQL * Plus发出以下命令：</p><pre class="oac_no_warn" dir="ltr">SQL&gt;列ddl_date格式A22标题'LAST_DDL'SQL&gt; select owner_name，2 object_type，3 to_char（last_ddl_time，'MON-DD -YY HH：MM：SS'）ddl_date，4来自all_objects的状态5其中owner ='PGAADMIN'6按object_type，object_name排序; OBJECT_NAME OBJECT_TYPE LAST_DDL状态----------- ----------- -------------------- ---- ----- PGTFLIP PACKAGE APR-24-03 03:04:58 VALID PGTFLIP PACKAGE BODY APR-24-03 03:04:02 VALID PGTFLIPD PROCEDURE APR-24-03 03:04:09 VALID</pre><p><code class="codeph">LAST_DDL</code>列是完成对对象的最后一次DDL更改的日期和时间。它表明编译的顺序是：</p><pre class="oac_no_warn" dir="ltr">PGTFLIP PACKAGE（规格）PGTFLIPD PROCEDURE（客户端应用取决于PGADB2I）PGTFLIP PACKAGE BODY（身体的重新编译）</pre></li>
                           </ul>
                           <p>请注意，正文的重新编译不会间接使其依赖对象，规范或客户端应用程序无效。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="APPUG1125"></a><div class="props_rev_3"><a id="GUID-F2E56692-C475-4B8F-88EF-3994D1E5F7E1" name="GUID-F2E56692-C475-4B8F-88EF-3994D1E5F7E1"></a><h4 id="APPUG-GUID-F2E56692-C475-4B8F-88EF-3994D1E5F7E1" class="sect4">依赖TIP主体或规范更改</h4>
                  <div>
                     <p>您还可以更改远程主机事务的数据结构或调用交换序列。但是，这种更改会暴露给依赖的客户端应用程序，因为公共数据类型或函数在<a id="d52678e497" class="indexterm-anchor"></a> TIP规范也将更改并需要重新编译，这反过来又会导致Oracle数据库重新编译此类从属客户端应用程序。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">如果您的网关使用SNA通信协议</span> ，请发出以下命令：</p><pre class="oac_no_warn" dir="ltr">SQL&gt;列ddl_date格式A22标题'LAST_DDL'SQL&gt;选择object_name，2 object_type，3 to_char（LAST_DDL_TIME，'MON-DD -YY HH：MM：SS'）ddl_date，4来自all_objects的状态5，其中owner ='PGAADMIN'6按object_type，object_name排序; OBJECT_NAME OBJECT_TYPE LAST_DDL状态---------- ----------- --------------------- ---- ----- PGADB2I PACKAGE NOV-24-1999 09:09:13 VALID PGADB2I PACKAGE BODY NOV-24-1999 09:11:44 INVALID DB2IDRIV PROCEDURE DEC-30-1999 12:12:14 INVALID DB2IDRVM PROCEDURE DEC-30 -1999 12:12:53无效的DB2IFORM程序DEC-14-1999 11:12:24无效</pre></li>
                        <li>
                           <p><span class="bold">如果您的网关使用TCP / IP通信协议，请</span>发出以下命令：</p><pre class="oac_no_warn" dir="ltr">SQL&gt;列ddl_date格式A22标题'LAST_DDL'SQL&gt;选择object_name，2 object_type，3 to_char（LAST_DDL_TIME，'MON-DD -YY HH：MM：SS'）ddl_date，4来自all_objects的状态5，其中owner ='PGAADMIN'6按object_type，object_name排序; OBJECT_NAME OBJECT_TYPE LAST_DDL状态---------- ----------- --------------------- ---- ----- PGTFLIP PACKAGE APR-24-03 03:04:58 VALID PGTFLIP PACKAGE BODY APR-24-03 05:03:52 INVALID PGTFLIP PROCEDURE APR-24-03 05:04:29 INVALID</pre></li>
                     </ul>
                  </div><a id="APPUG1126"></a><div class="props_rev_3"><a id="GUID-AD6729E2-14FF-4814-A964-2F7A91EB2648" name="GUID-AD6729E2-14FF-4814-A964-2F7A91EB2648"></a><h5 id="APPUG-GUID-AD6729E2-14FF-4814-A964-2F7A91EB2648" class="sect5">重新编译TIP主体</h5>
                     <div>
                        <p>请注意，重新编译规范已使其依赖对象无效，除了包体之外还有三个客户端应用程序。要完成这些更改，必须重新编译正文以使其符合规范，然后可以手动编译三个客户端应用程序，或者Oracle数据库在引用时自动编译它们。</p>
                        <p>如果客户端应用程序在引用时由Oracle数据库重新编译，则在重新编译期间会出现一次性延迟。</p>
                        <p><a id="d52678e552" class="indexterm-anchor"></a><a id="d52678e556" class="indexterm-anchor"></a>客户端应用程序中的重新编译错误（如果有）归因于：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>客户应用程序源中的客户更改</p>
                           </li>
                           <li>
                              <p>如果重新生成TIP，则改变TIP的PG DD定义</p>
                           </li>
                           <li>
                              <p>如果已重新生成TIP，则从PG DD中保存的多个事务条目版本生成错误的版本</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="APPUG1127"></a><div class="props_rev_3"><a id="GUID-61FDA096-F183-4593-A501-909ED485BE19" name="GUID-61FDA096-F183-4593-A501-909ED485BE19"></a><h4 id="APPUG-GUID-61FDA096-F183-4593-A501-909ED485BE19" class="sect4">无意中改变了TIP规范</h4>
                  <div>
                     <p>如果在生成提示时出错（例如，如果更改PG DD事务定义，或者在重新生成期间无意中指定了错误的版本），则重新编译的主体将与存储的规范不匹配;因此，Oracle数据库将使规范和任何从属客户端应用程序无效。</p>
                     <p>您可能必须重新生成并重新编译TIP及其相关的客户端应用程序才能恢复正确的操作。</p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
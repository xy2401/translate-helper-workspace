<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Understand the concepts related to read-only materialized views."></meta>
      <meta name="description" content="Understand the concepts related to read-only materialized views."></meta>
      <title>只读物化视图概念</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Administrator’s Guide "></meta>
      <meta property="og:description" content="Understand the concepts related to read-only materialized views."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Administrator’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-14T11:02:35-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96348-04"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="managing-read-only-materialized-views.html" title="Previous" type="text/html"></link>
      <link rel="next" href="read-only-materialized-view-architecture.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADMIN"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-read-only-materialized-views.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="read-only-materialized-view-architecture.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="managing-read-only-materialized-views.html" property="item" typeof="WebPage"><span property="name">管理只读物化视图</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">只读物化视图概念</li>
            </ol>
            <a id="GUID-A422B474-4BED-4A60-AEDB-E93630746083" name="GUID-A422B474-4BED-4A60-AEDB-E93630746083"></a>
            
            <h2 id="ADMIN-GUID-A422B474-4BED-4A60-AEDB-E93630746083" class="sect2"><span class="enumeration_chapter">36</span>只读物化视图概念</h2>
         </header>
         <div class="ind">
            <p>理解与只读物化视图相关的概念。</p>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-4904A2D2-4BF4-4641-8C17-BF144C06B3E4">复制数据库</a><br><strong class="term">复制</strong>是在包含分布式数据库系统的多个数据库中复制和维护数据库对象（如表）的过程。支持复制的一种方法是只读的物化视图。
                  </li>
                  <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-6CFDE35B-3410-474C-A8D3-559C7CACBBDF">只读物化视图</a><br><span class="bold">只读物化视图</span>包含单个时间点的目标主表的完整或部分副本。部分副本可以包括行的子集，列的子集或两者。
                  </li>
                  <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-DF9A3C8C-BD92-4C6A-958F-7D17FADB6276">物化观点的使用</a><br>您可以使用物化视图来实现诸如缓解网络负载，启用数据子集以及启用断开连接计算等目标。
                  </li>
                  <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-350A169D-8937-484D-B21F-37B46A024782">可用的物化视图</a><br>可用的物化视图包括主键物化视图，对象物化视图， <code class="codeph">ROWID</code>物化视图和复杂物化视图。
                  </li>
                  <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-D9DD5673-C8FA-46B6-8E42-99F781CBD9A1">与物化视图相关的用户和权限</a><br>与物化视图相关的用户包括创建者，复习者和所有者。在物化视图上执行操作所需的权限取决于执行操作的用户类型。
                  </li>
                  <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-1AC3EF2C-C45F-469B-AE9C-ED6066B83326">物化视图的数据子集</a><br>您可以使用行子集和列子集来配置实体化视图，以反映主表中数据的子集。
                  </li>
                  <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-57260AFB-C323-40AF-A181-6ADF08E550DF">物化视图刷新</a><br>要确保实例化视图与其主表一致，必须定期<strong class="term">刷新实例</strong>化视图。
                  </li>
                  <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-31E1E90D-C565-40EF-BD22-4DB2D13462AA">刷新组</a><br>如果物化视图在事务上彼此一致很重要，则可以将它们组织到<strong class="term">刷新组中</strong> 。
                  </li>
                  <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-E479B069-EE7D-4DF5-8086-8CB558A4B62A">物化视图日志</a><br><strong class="term">物化视图日志</strong>是数据库中包含物化视图主表的表。它将所有DML更改记录到主表。
                  </li>
                  <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-52580CD0-2320-45BB-BCF1-89F4EA768291">物化视图和用户定义的数据类型</a><br>具有用户定义数据类型的物化视图有特殊注意事项。
                  </li>
                  <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-08C1AA5F-4681-41B5-BCE8-5E586ED644AC">主数据库中的物化视图注册</a><br>在主数据库中，Oracle数据库会根据其主表自动注册有关实例化视图的信息。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="managing-read-only-materialized-views.html#GUID-7AAEC1A7-01BA-4293-AF46-F026AA2B0237" title="只读物化视图可以提供对主表数据的只读访问。您可以创建和管理只读的物化视图。">管理只读实体化视图</a></p>
                  </div>
               </div>
            </div>
            
            <div class="props_rev_3"><a id="GUID-4904A2D2-4BF4-4641-8C17-BF144C06B3E4" name="GUID-4904A2D2-4BF4-4641-8C17-BF144C06B3E4"></a><h3 id="ADMIN-GUID-4904A2D2-4BF4-4641-8C17-BF144C06B3E4" class="sect3"><span class="enumeration_section">36.1</span>复制数据库</h3>
               <div>
                  <p><strong class="term">复制</strong>是在包含分布式数据库系统的多个数据库中复制和维护数据库对象（如表）的过程。支持复制的一种方法是只读的物化视图。
                  </p>
                  <p>复制环境支持两种基本类型的数据库： <strong class="term">主数据库</strong>和<a id="d326248e171" class="indexterm-anchor"></a> <strong class="term">物化视图数据库</strong> 。物化视图数据库包含来自特定时间点的表数据的图像或物化视图。定义物化视图的表是物化视图的<span class="bold">主表</span> 。通常，定期刷新实例化视图以使其与其主表同步。
                  </p>
                  <p>您可以将物化视图组织到<a id="d326248e181" class="indexterm-anchor"></a><a id="d326248e183" class="indexterm-anchor"></a> <strong class="term">刷新组</strong> 。刷新组中的物化视图会同时刷新，以确保刷新组中所有物化视图中的数据对应于相同的事务一致时间点。
                  </p>
                  <div class="infoboxnote" id="GUID-4904A2D2-4BF4-4641-8C17-BF144C06B3E4__GUID-B632CC8E-6DC8-4446-82DC-1953D25A2710">
                     <p class="notep1">注意：</p>Oracle GoldenGate是Oracle全功能的复制解决方案。有关更多信息，请参阅Oracle GoldenGate文档。
                  </div>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-A422B474-4BED-4A60-AEDB-E93630746083" title="理解与只读物化视图相关的概念。">只读实体化视图概念</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-6CFDE35B-3410-474C-A8D3-559C7CACBBDF" name="GUID-6CFDE35B-3410-474C-A8D3-559C7CACBBDF"></a><h3 id="ADMIN-GUID-6CFDE35B-3410-474C-A8D3-559C7CACBBDF" class="sect3"><span class="enumeration_section">36.2</span>只读物化视图</h3>
               <div>
                  <p><span class="bold">只读物化视图</span>包含单个时间点的目标主表的完整或部分副本。部分副本可以包括行的子集，列的子集或两者。
                  </p>
                  <p>只读物化视图可以提供对主表数据的只读访问。应用程序可以从只读物化视图查询数据，以避免网络访问主数据库，无论网络可用性如何。但是，整个系统中的应用程序必须访问master数据库中的数据才能执行数据操作语言更改（DML）。<a href="read-only-materialized-view-concepts.html#GUID-6CFDE35B-3410-474C-A8D3-559C7CACBBDF__BABJEBCA">图36-1</a>说明了基本的只读复制。
                  </p>
                  <div class="figure" id="GUID-6CFDE35B-3410-474C-A8D3-559C7CACBBDF__BABJEBCA">
                     <p class="titleinfigure">图36-1只读物化视图</p><img src="img/admin553.gif" width="333" alt="下面是图36-1的描述" title="下面是图36-1的描述" longdesc="img_text/admin553.html"><br><a href="img_text/admin553.html">“图36-1只读物化视图”的说明</a></div>
                  <!-- class="figure" -->
                  <p>物化视图提供以下好处：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>启用本地访问，从而缩短响应时间和可用性</p>
                     </li>
                     <li>
                        <p>当物化视图位于与其源不同的数据库中时，从主数据库卸载查询，因为用户可以查询本地物化视图</p>
                     </li>
                     <li>
                        <p>通过使您仅复制目标主数据集的选定子集来提高数据安全性</p>
                     </li>
                  </ul>
                  <p>用户可以根据需要同步（刷新）只读的物化视图。当用户刷新只读实例化视图时，它们会收到自上次刷新以来主表上发生的任何更改。</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-A422B474-4BED-4A60-AEDB-E93630746083" title="理解与只读物化视图相关的概念。">只读实体化视图概念</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-DF9A3C8C-BD92-4C6A-958F-7D17FADB6276" name="GUID-DF9A3C8C-BD92-4C6A-958F-7D17FADB6276"></a><h3 id="ADMIN-GUID-DF9A3C8C-BD92-4C6A-958F-7D17FADB6276" class="sect3"><span class="enumeration_section">36.3</span>物化观点的使用</h3>
               <p>您可以使用物化视图来实现诸如缓解网络负载，启用数据子集以及启用断开连接计算等目标。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-FAAAFBAA-6E5B-4543-9D97-B4C0D5AB1BFB">轻松网络负载</a><br>如果您的目标之一是减少网络负载，则可以使用物化视图将公司数据库分发到区域数据库。
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-75D9E645-0904-4D80-A29B-9BAEA7FC4166">启用数据子集</a><br>物化视图使您能够基于列级和行级子集复制数据。
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-2D466622-9D0B-4213-8BA6-7F8EB81500EF">启用断开连接计算</a><br>物化视图不需要专用的网络连接。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-A422B474-4BED-4A60-AEDB-E93630746083" title="理解与只读物化视图相关的概念。">只读实体化视图概念</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-FAAAFBAA-6E5B-4543-9D97-B4C0D5AB1BFB" name="GUID-FAAAFBAA-6E5B-4543-9D97-B4C0D5AB1BFB"></a><h4 id="ADMIN-GUID-FAAAFBAA-6E5B-4543-9D97-B4C0D5AB1BFB" class="sect4"><span class="enumeration_section">36.3.1</span>缓解网络负载</h4>
                  <div>
                     <p>如果您的目标之一是减少网络负载，则可以使用物化视图将公司数据库分发到区域数据库。</p>
                     <p>用户负载分布在多个数据库服务器上，而不是整个公司访问单个数据库服务器。要减少复制的数据量，物化视图可以是主表的子集。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-DF9A3C8C-BD92-4C6A-958F-7D17FADB6276" title="您可以使用物化视图来实现诸如缓解网络负载，启用数据子集以及启用断开连接计算等目标。">物化视图的使用</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-75D9E645-0904-4D80-A29B-9BAEA7FC4166" name="GUID-75D9E645-0904-4D80-A29B-9BAEA7FC4166"></a><h4 id="ADMIN-GUID-75D9E645-0904-4D80-A29B-9BAEA7FC4166" class="sect4"><span class="enumeration_section">36.3.2</span>启用数据子集</h4>
                  <div>
                     <p>物化视图使您能够基于列级和行级子集复制数据。</p>
                     <p>数据子集使您可以复制仅与特定数据库相关的信息。例如，如果您有一个区域销售办事处，那么您可能只复制该区域所需的数据，从而减少不必要的网络流量。</p>
                     <p>行和列子集都允许您创建包含主表的数据的部分副本的实体化视图。行子集使您可以使用<code class="codeph">WHERE</code>子句仅包含物化视图中主服务器所需的行。通过列子集，您可以仅包含物化视图中主服务器所需的列。您可以通过在物化视图创建期间在<code class="codeph">SELECT</code>语句中指定特定列来执行此操作。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-DF9A3C8C-BD92-4C6A-958F-7D17FADB6276" title="您可以使用物化视图来实现诸如缓解网络负载，启用数据子集以及启用断开连接计算等目标。">物化视图的使用</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-2D466622-9D0B-4213-8BA6-7F8EB81500EF" name="GUID-2D466622-9D0B-4213-8BA6-7F8EB81500EF"></a><h4 id="ADMIN-GUID-2D466622-9D0B-4213-8BA6-7F8EB81500EF" class="sect4"><span class="enumeration_section">36.3.3</span>启用断开连接的计算</h4>
                  <div>
                     <p>物化视图不需要专用的网络连接。</p>
                     <p>虽然您可以选择通过计划作业来自动执行刷新过程，但您可以按需手动刷新物化视图，这是在笔记本电脑上运行查询的理想解决方案。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-DF9A3C8C-BD92-4C6A-958F-7D17FADB6276" title="您可以使用物化视图来实现诸如缓解网络负载，启用数据子集以及启用断开连接计算等目标。">物化视图的使用</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-350A169D-8937-484D-B21F-37B46A024782" name="GUID-350A169D-8937-484D-B21F-37B46A024782"></a><h3 id="ADMIN-GUID-350A169D-8937-484D-B21F-37B46A024782" class="sect3"><span class="enumeration_section">36.4</span>可用的物化视图</h3>
               <p>可用的物化视图包括主键物化视图，对象物化视图， <code class="codeph">ROWID</code>物化视图和复杂物化视图。
               </p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-7594385C-E1C8-4207-A4A1-48C6FFA6C8B8">关于可用的物化视图</a><br>Oracle提供了几种类型的只读物化视图，以满足许多不同复制（和非复制）情况的需要。
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-31D07B2A-4B42-4B26-BB6F-0BA90FC0FB0D">主键物化视图</a><br>主键物化视图是物化视图的默认类型。
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-4F7AABAF-867A-4B0C-8D52-6C1E2CE71313">对象物化视图</a><br>如果物化视图基于对象表并使用<code class="codeph">OF</code> <span class="italic">类型</span>子句创建，则物化视图称为对象物化视图。
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-4CA3E07A-7E8A-4B5E-B863-13B324124AD9">ROWID物化视图</a><br><code class="codeph">ROWID</code>物化视图基于主表中行的物理行标识符（rowid）。
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-359AFF60-D6A8-4017-A0E9-9A7525ADCA00">复杂的物化观点</a><br>复杂的物化视图无法快速刷新。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-A422B474-4BED-4A60-AEDB-E93630746083" title="理解与只读物化视图相关的概念。">只读实体化视图概念</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-7594385C-E1C8-4207-A4A1-48C6FFA6C8B8" name="GUID-7594385C-E1C8-4207-A4A1-48C6FFA6C8B8"></a><h4 id="ADMIN-GUID-7594385C-E1C8-4207-A4A1-48C6FFA6C8B8" class="sect4"><span class="enumeration_section">36.4.1</span>关于可用的物化视图</h4>
                  <div>
                     <p>Oracle提供了几种类型的只读物化视图，以满足许多不同复制（和非复制）情况的需要。</p>
                     <p>无论何时创建实例化视图（无论其类型如何），始终在实例化视图的查询中指定表所有者的模式名称。例如，请考虑以下<code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>语句：</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW hr.employees AS SELECT * FROM hr.employees@orc1.example.com;</pre><p>这里，模式<code class="codeph">hr</code>在查询中指定。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-350A169D-8937-484D-B21F-37B46A024782" title="可用的物化视图包括主键物化视图，对象物化视图，ROWID物化视图和复杂物化视图。">可用的物化视图</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-31D07B2A-4B42-4B26-BB6F-0BA90FC0FB0D" name="GUID-31D07B2A-4B42-4B26-BB6F-0BA90FC0FB0D"></a><h4 id="ADMIN-GUID-31D07B2A-4B42-4B26-BB6F-0BA90FC0FB0D" class="sect4"><span class="enumeration_section">36.4.2</span>主键物化视图</h4>
                  <div>
                     <p>主键物化视图是物化视图的默认类型。</p>
                     <p>以下是用于创建主键物化视图的SQL语句的示例：</p><pre class="oac_no_warn" dir="ltr">创建物化视图oe.customers与主要关键选择*来自oe.customers@orc1.example.com;</pre><p>由于主键物化视图是默认视图，因此以下语句还会生成主键物化视图：</p><pre class="oac_no_warn" dir="ltr">创建物质化视图oe.customers AS SELECT * FROM oe.customers@orc1.example.com;</pre><p>主键物化视图可以包含子查询，以便您可以在远程物化视图数据库中创建行的子集。子查询是嵌入在主查询中的查询，因此您在<code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>语句中有多个<code class="codeph">SELECT</code>语句。此子查询可以像基本<code class="codeph">WHERE</code>子句一样简单，也可以像多级<code class="codeph">WHERE</code> <code class="codeph">EXISTS</code>子句一样复杂。如果引用的每个主节点都具有实例化视图日志，则仍可以递增（或快速）刷新包含所选子类查询的主键物化视图。<a id="d326248e672" class="indexterm-anchor"></a><a id="d326248e674" class="indexterm-anchor"></a>快速刷新使用物化视图日志仅更新自上次刷新以来已更改的行。
                     </p>
                     <p>使用包含子查询的<code class="codeph">WHERE</code>子句创建以下物化视图：</p><pre class="oac_no_warn" dir="ltr">创建物化视图oe.orders快速刷新选择*来自oe.orders@orc1.example.com o EXERE EXISTS（SELECT * FROM oe.customers@orc1.example.com c WHERE o.customer_id = c.customer_id AND c.credit_limit &gt; 10000）;</pre><p>这种物化视图称为子查询物化视图。</p>
                     <div class="infoboxnote" id="GUID-31D07B2A-4B42-4B26-BB6F-0BA90FC0FB0D__GUID-3210F432-DFF7-4AF2-B8ED-DC1CA9F20530">
                        <p class="notep1">注意：</p>
                        <p>要创建此<code class="codeph">oe.orders</code>物化视图，必须在主表的物化视图日志中记录<code class="codeph">credit_limit</code> 。有关详细信息，请参阅<span class="q">“ <a href="planning-for-read-only-materialized-views.html#GUID-FAAF0273-7321-4FD0-8A5D-A3A8364E10F9" title="创建实例化视图日志时，可以向日志添加列以快速刷新实例化视图。">在实体化视图日志中记录列</a> ”</span> 。
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-31D07B2A-4B42-4B26-BB6F-0BA90FC0FB0D__GUID-E37C9FBB-78C0-417B-B522-FA3F9D995797">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="read-only-materialized-view-concepts.html#GUID-C705F5EF-B389-4A30-9674-11653263A24A" title="如果要根据多个表中的信息复制数据，则维护和定义这些物化视图可能很困难。">带子查询的物化视图</a> ”</span> ，了解有关子查询的物化视图的更多信息</p>
                           </li>
                           <li>
                              <p>有关快速刷新的详细信息，请参阅<span class="q">“ <a href="read-only-materialized-view-architecture.html#GUID-6F85F48F-F633-424B-B43F-2B27F0043C79" title="Oracle数据库可以使用快速，完整或强制刷新来刷新实例化视图。">刷新类型</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="read-only-materialized-view-architecture.html#GUID-7CDE1F79-1BBF-4A7E-BBAB-2A87E1F77B7C" title="主表上需要物化视图日志，以根据主表对物化视图执行快速刷新。">物化视图日志</a> ”</span> ，了解有关物化视图日志的更多信息</p>
                           </li>
                           <li>
                              <p>有关子查询的更多信息，请<a href="../sqlrf/SQL-Queries-and-Subqueries.html#SQLRF007" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-350A169D-8937-484D-B21F-37B46A024782" title="可用的物化视图包括主键物化视图，对象物化视图，ROWID物化视图和复杂物化视图。">可用的物化视图</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-4F7AABAF-867A-4B0C-8D52-6C1E2CE71313" name="GUID-4F7AABAF-867A-4B0C-8D52-6C1E2CE71313"></a><h4 id="ADMIN-GUID-4F7AABAF-867A-4B0C-8D52-6C1E2CE71313" class="sect4"><span class="enumeration_section">36.4.3</span>对象物化视图</h4>
                  <div>
                     <p>如果物化视图基于对象表并使用<code class="codeph">OF</code> <span class="italic">类型</span>子句创建，则物化视图称为对象物化视图。
                     </p>
                     <p>对象物化视图的构造方式与对象表相同。也就是说，对象物化视图由行对象组成，并且每个行对象由对象标识符（OID）列标识。</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-4F7AABAF-867A-4B0C-8D52-6C1E2CE71313__GUID-A33DF527-96AC-4BF7-90A8-98148D2AFC3A">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="read-only-materialized-view-concepts.html#GUID-33DAEE07-5EC9-49C2-BA95-F9E1213664A8" title="如果物化视图基于对象表并使用OF类型子句创建，则物化视图称为对象物化视图。">基于对象表的物化视图</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="creating-and-managing-read-only-materialized-views.html#GUID-41870D29-1EB3-45FA-A9A8-FBEB3BA95971" title="创建只读的物化视图，以在物化视图数据库中复制主表的数据。">创建只读物化视图</a> ”</span>用于创建对象物化视图的示例</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-350A169D-8937-484D-B21F-37B46A024782" title="可用的物化视图包括主键物化视图，对象物化视图，ROWID物化视图和复杂物化视图。">可用的物化视图</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-4CA3E07A-7E8A-4B5E-B863-13B324124AD9" name="GUID-4CA3E07A-7E8A-4B5E-B863-13B324124AD9"></a><h4 id="ADMIN-GUID-4CA3E07A-7E8A-4B5E-B863-13B324124AD9" class="sect4"><span class="enumeration_section">36.4.4</span> ROWID物化视图</h4>
                  <div>
                     <p><code class="codeph">ROWID</code>物化视图基于主表中行的物理行标识符（rowid）。
                     </p>
                     <p><code class="codeph">ROWID</code>物化视图可用于基于没有主键的主表的物化视图，也可用于不包含主表的所有主键列的物化视图。
                     </p>
                     <p>以下是创建<code class="codeph">ROWID</code>化视图的<code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>语句的示例：</p><pre class="oac_no_warn" dir="ltr">创建物化视图oe.orders REFRESH，ROWID as SELECT *来自oe.orders@orc1.example.com;</pre></div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-4CA3E07A-7E8A-4B5E-B863-13B324124AD9__GUID-0EB79C41-47F8-484D-8FA4-DD25C4526BD5">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="read-only-materialized-view-architecture.html#GUID-7CDE1F79-1BBF-4A7E-BBAB-2A87E1F77B7C" title="主表上需要物化视图日志，以根据主表对物化视图执行快速刷新。">物化视图日志</a> ”</span> ，以获取有关<code class="codeph">ROWID</code>和主键物化视图之间差异的更多信息</p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>语句中<code class="codeph">WITH</code> <code class="codeph">ROWID</code>子句的更多信息，请<a href="../sqlrf/CREATE-MATERIALIZED-VIEW.html#SQLRF01302" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-350A169D-8937-484D-B21F-37B46A024782" title="可用的物化视图包括主键物化视图，对象物化视图，ROWID物化视图和复杂物化视图。">可用的物化视图</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-359AFF60-D6A8-4017-A0E9-9A7525ADCA00" name="GUID-359AFF60-D6A8-4017-A0E9-9A7525ADCA00"></a><h4 id="ADMIN-GUID-359AFF60-D6A8-4017-A0E9-9A7525ADCA00" class="sect4"><span class="enumeration_section">36.4.5</span>复杂的物化视图</h4>
                  <p>复杂的物化视图无法快速刷新。</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-C59C92AB-06FD-4781-A414-0209E5BCB13E">关于复杂物化视图</a><br>要快速刷新，物化视图的定义查询必须遵守某些限制。
                        </li>
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-4B47C659-A787-4564-AE12-6AF295541131">简单与复杂物化观的比较</a><br>对于某些应用程序，您可能需要考虑使用复杂的物化视图。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-350A169D-8937-484D-B21F-37B46A024782" title="可用的物化视图包括主键物化视图，对象物化视图，ROWID物化视图和复杂物化视图。">可用的物化视图</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-C59C92AB-06FD-4781-A414-0209E5BCB13E" name="GUID-C59C92AB-06FD-4781-A414-0209E5BCB13E"></a><h5 id="ADMIN-GUID-C59C92AB-06FD-4781-A414-0209E5BCB13E" class="sect5"><span class="enumeration_section">36.4.5.1</span>关于复杂物化视图</h5>
                     <div>
                        <p>要快速刷新，物化视图的定义查询必须遵守某些限制。</p>
                        <p>如果您需要物化视图，其定义查询更通用且无法遵守限制，则物化视图很复杂，无法快速刷新。</p>
                        <p>具体而言，当物化视图的定义查询包含以下任何内容时，物化视图被认为是复杂的：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">CONNECT</code> <code class="codeph">BY</code>子句</p>
                              <p>例如，以下语句创建复杂的物化视图：</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW hr.emp_hierarchy AS SELECT LPAD（''，4 *（LEVEL-1））|| email USERNAME FROM hr.employees@orc1.example.com START WITH manager_id IS NULL CONNECT BY PRIOR employee_id = manager_id;</pre></li>
                           <li>
                              <p><code class="codeph">INTERSECT</code> ， <code class="codeph">MINUS</code>或<code class="codeph">UNION</code> <code class="codeph">ALL</code>设置操作</p>
                              <p>例如，以下语句创建复杂的物化视图，因为它具有<code class="codeph">UNION</code> <code class="codeph">ALL</code>设置操作：</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW hr.mview_employees AS SELECT employees.employee_id，employees.email FROM hr.employees@orc1.example.com UNION ALL SELECT new_employees.employee_id，new_employees.email FROM hr.new_employees@orc1.example.com;</pre></li>
                           <li>
                              <p><code class="codeph">DISTINCT</code>或<code class="codeph">UNIQUE</code>关键字</p>
                              <p>例如，以下语句创建复杂的物化视图：</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW hr.employee_depts AS SELECT DISTINCT department_id FROM hr.employees@orc1.example.com ORDER BY department_id;</pre></li>
                           <li>
                              <p>在某些情况下，聚合函数，虽然可以在定义查询中具有聚合函数，但仍然具有简单的物化视图</p>
                              <p>例如，以下语句创建复杂的物化视图：</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW hr.average_sal AS SELECT AVG（薪水）“平均”来自hr.employees@orc1.example.com;</pre></li>
                           <li>
                              <p>在某些情况下，除了子查询中的连接之外的连接，尽管可以在定义查询中具有连接并且仍然具有简单的物化视图</p>
                              <p>例如，以下语句创建复杂的物化视图：</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW hr.emp_join_dep AS SELECT last_name FROM hr.employees@orc1.example.com e，hr.departments @ orc1.example.com d WHERE e.department_id = d.department_id;</pre></li>
                           <li>
                              <p>在某些情况下， <code class="codeph">UNION</code>操作</p>
                              <p>具体来说，如果满足以下任一条件，则具有<code class="codeph">UNION</code>操作的物化视图很复杂：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">UNION</code>任何查询都很复杂。前面的项目符号项指定查询何时使实体化视图复杂化。
                                    </p>
                                 </li>
                                 <li>
                                    <p>最外层的<code class="codeph">SELECT</code>列表列与<code class="codeph">UNION</code>的查询不匹配。在以下示例中，第一个查询在最外面的<code class="codeph">SELECT</code>列表中只有<code class="codeph">order_total</code> ，而第二个查询在最外面的<code class="codeph">SELECT</code>列表中有<code class="codeph">customer_id</code> 。因此，物化视图很复杂。
                                    </p><pre class="oac_no_warn" dir="ltr">创建物化视图oe.orders AS SELECT order_total FROM oe.orders@orc1.example.com o EXERE EXISTS（SELECT cust_first_name，cust_last_name FROM oe.customers@orc1.example.com c WHERE o.customer_id = c.customer_id AND c.credit_limit &gt; 50）UNION SELECT customer_id FROM oe.orders@orc1.example.com o EXERE EXISTS（SELECT cust_first_name，cust_last_name FROM oe.customers@orc1.example.com c WHERE o.customer_id = c.customer_id AND c.account_mgr_id = 30） ;</pre><p>最里面的<code class="codeph">SELECT</code>列表与物化视图是否复杂无关。在前面的例子中，最里面的<code class="codeph">SELECT</code>列表<code class="codeph">cust_first_name</code>和<code class="codeph">cust_last_name</code>在两个查询<code class="codeph">UNION</code> 。</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>不符合<span class="q">“ <a href="read-only-materialized-view-concepts.html#GUID-0C401A1A-D5BC-4009-B6DD-A1C61D65F9E9" title="具有子查询的物化视图的定义查询受若干限制，以保留物化视图的快速刷新功能。">使用子查询限制物化视图的限制</a> ”中</span>详述的要求的子句</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-C59C92AB-06FD-4781-A414-0209E5BCB13E__GUID-D328D0DF-3AA4-4BA5-82D4-EB6D26CEE0DB">
                           <p class="notep1">注意：</p>
                           <p>如果可能，应避免使用复杂的物化视图，因为它们无法快速刷新，这可能会降低性能。</p>
                        </div>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-C59C92AB-06FD-4781-A414-0209E5BCB13E__GUID-51A6B651-BB76-42A3-AAB0-DEEC5E524025">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="read-only-materialized-view-architecture.html#GUID-C98891B9-13D3-4B22-83AF-B349FF06AF08" title="物化视图刷新是一种有效的批处理操作，它使物化视图反映其主表的更新当前状态。">刷新过程</a> ”</span></p>
                              </li>
                              <li>
                                 <p><a href="../dwhsg/sql-aggregation-data-warehouses.html#DWHSG-GUID-E051A04E-0C53-491D-9B16-B71BA00B80C2" target="_blank"><span class="italic">“Oracle数据库数据仓库指南”，</span></a>以获取有关具有聚合函数和联接的实例化视图的信息</p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">CONNECT</code> <code class="codeph">BY</code>子句，set operations， <code class="codeph">DISTINCT</code>关键字和聚合函数的详细信息，请<a href="../sqlrf/CREATE-MATERIALIZED-VIEW.html#SQLRF01302" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-359AFF60-D6A8-4017-A0E9-9A7525ADCA00" title="复杂的物化视图无法快速刷新。">复杂实体化视图</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-4B47C659-A787-4564-AE12-6AF295541131" name="GUID-4B47C659-A787-4564-AE12-6AF295541131"></a><h5 id="ADMIN-GUID-4B47C659-A787-4564-AE12-6AF295541131" class="sect5"><span class="enumeration_section">36.4.5.2</span>简单和复杂物化视图的比较</h5>
                     <div>
                        <p>对于某些应用程序，您可能需要考虑使用复杂的物化视图。</p>
                        <p><a href="read-only-materialized-view-concepts.html#GUID-4B47C659-A787-4564-AE12-6AF295541131__BABIDGFA">图36-2</a>和以下文本讨论了您应该考虑的一些问题。
                        </p>
                        <div class="figure" id="GUID-4B47C659-A787-4564-AE12-6AF295541131__BABIDGFA">
                           <p class="titleinfigure">图36-2简单和复杂物化视图的比较</p><img src="img/admin523.gif" width="593" alt="下面是图36-2的描述" title="下面是图36-2的描述" longdesc="img_text/admin523.html"><br><a href="img_text/admin523.html">“图36-2简单和复杂物化视图的比较”的描述</a></div>
                        <!-- class="figure" -->
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">复杂物化视图</span> ： <a href="read-only-materialized-view-concepts.html#GUID-4B47C659-A787-4564-AE12-6AF295541131__BABIDGFA">图36-2</a>中的方法A显示了复杂的物化视图。Database II中的物化视图展示了高效的查询性能，因为在物化视图刷新期间完成了连接操作。但是，必须执行完全刷新，因为物化视图很复杂，并且这些刷新可能比快速刷新慢。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">具有连接视图的简单物化视图</span> ： <a href="read-only-materialized-view-concepts.html#GUID-4B47C659-A787-4564-AE12-6AF295541131__BABIDGFA">图36-2</a>中的方法B显示了Database II中的两个简单物化视图，以及在物化视图的数据库中执行连接的视图。针对视图的查询性能不如针对方法A中的复杂物化视图的查询性能那么好。但是，使用快速刷新和物化视图日志可以更有效地刷新简单的物化视图。
                              </p>
                           </li>
                        </ul>
                        <p>总之，要决定使用哪种方法：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果您很少刷新并希望获得更快的查询性能，那么请使用方法A（复杂的物化视图）。</p>
                           </li>
                           <li>
                              <p>如果定期刷新并且可能牺牲查询性能，则使用方法B（简单的物化视图）。</p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-359AFF60-D6A8-4017-A0E9-9A7525ADCA00" title="复杂的物化视图无法快速刷新。">复杂实体化视图</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-D9DD5673-C8FA-46B6-8E42-99F781CBD9A1" name="GUID-D9DD5673-C8FA-46B6-8E42-99F781CBD9A1"></a><h3 id="ADMIN-GUID-D9DD5673-C8FA-46B6-8E42-99F781CBD9A1" class="sect3"><span class="enumeration_section">36.5</span>与物化视图相关的用户和权限</h3>
               <p>与物化视图相关的用户包括创建者，复习者和所有者。在物化视图上执行操作所需的权限取决于执行操作的用户类型。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-0A13D7EF-7AA3-42B1-9174-A6A245493DAE">物化视图操作所需的权限</a><br>三种不同类型的用户在物化视图上执行操作。
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-9997750F-913E-4FEC-BA12-36497E422EEA">创作者是所有者</a><br>如果物化视图的创建者也拥有物化视图，则该用户必须具有创建物化视图所需的权限。
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-92890867-8914-47D6-907C-4DD2796D47B2">创作者不是所有者</a><br>如果物化视图的创建者不是所有者，则必须授予创建者和所有者某些特权以创建物化视图。
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-575DE322-9807-4C9E-A8A5-FA77D1B0CF4E">复习者是所有者</a><br>如果物化视图的刷新还拥有物化视图，则此用户必须具有创建物化视图所需的权限。
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-51254468-BE93-4534-892D-5DFB43697CA4">复习者不是所有者</a><br>如果物化视图的复习不是所有者，则必须向复习者和所有者授予某些特权。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-A422B474-4BED-4A60-AEDB-E93630746083" title="理解与只读物化视图相关的概念。">只读实体化视图概念</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-0A13D7EF-7AA3-42B1-9174-A6A245493DAE" name="GUID-0A13D7EF-7AA3-42B1-9174-A6A245493DAE"></a><h4 id="ADMIN-GUID-0A13D7EF-7AA3-42B1-9174-A6A245493DAE" class="sect4"><span class="enumeration_section">36.5.1</span>物化视图操作所需的权限</h4>
                  <div>
                     <p>三种不同类型的用户在物化视图上执行操作。</p>
                     <p>这些用户是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">创建者：</span>创建物化视图的用户。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">刷新：</span>刷新物化视图的用户。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">所有者：</span>拥有物化视图的用户。物化视图位于此用户的架构中。
                           </p>
                        </li>
                     </ul>
                     <p>一个用户可以在特定的物化视图上执行所有这些操作。但是，在某些复制环境中，不同的用户在特定的物化视图上执行这些操作。执行这些操作所需的权限取决于同一用户是执行它们还是不同用户执行它们。</p>
                     <p>如果物化视图数据库中物化视图的所有者具有指向主数据库的专用数据库链接，则数据库链接将连接到主数据库上主表的所有者。否则，适用于通过数据库链接的连接的常规规则。</p>
                     <div class="infoboxnote" id="GUID-0A13D7EF-7AA3-42B1-9174-A6A245493DAE__GUID-21644220-6176-4712-987F-9D26B7258B27">
                        <p class="notep1">注意：</p>
                        <p>以下部分未涵盖在启用查询重写的情况下创建实例化视图所需的要求。有关信息，请参见<a href="../sqlrf/CREATE-MATERIALIZED-VIEW.html#SQLRF01302" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-0A13D7EF-7AA3-42B1-9174-A6A245493DAE__GUID-48E69571-5BF3-4CA0-85B0-066C5807DBC4">
                        <p class="notep1">也可以看看：</p>
                        <p>以下部分讨论数据库链接。有关使用数据库链接的详细信息，请参阅<a href="distributed-database-concepts.html#GUID-36A35EC6-D3BA-4284-ADA0-732E10F3425E" title="与分布式数据库相关的概念包括分布式数据库架构，数据库链接，事务处理，应用程序开发和字符集支持。">分布式数</a>
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-D9DD5673-C8FA-46B6-8E42-99F781CBD9A1" title="与物化视图相关的用户包括创建者，复习者和所有者。在物化视图上执行操作所需的权限取决于执行操作的用户类型。">与实体化视图相关的用户和权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-9997750F-913E-4FEC-BA12-36497E422EEA" name="GUID-9997750F-913E-4FEC-BA12-36497E422EEA"></a><h4 id="ADMIN-GUID-9997750F-913E-4FEC-BA12-36497E422EEA" class="sect4"><span class="enumeration_section">36.5.2</span>创作者是所有者</h4>
                  <div>
                     <p>如果物化视图的创建者也拥有物化视图，则该用户必须具有创建物化视图所需的权限。</p>
                     <p>必须明确授予以下权限，而不是通过角色：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">CREATE</code> <code class="codeph">TABLE</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code></p>
                        </li>
                        <li>
                           <p>主表和主表的物化视图日志上的<code class="codeph">READ</code>或<code class="codeph">SELECT</code>对象特权，或<code class="codeph">READ</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>或<code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>系统特权</p>
                           <p>如果master数据库是远程数据库，则必须向master数据库的用户授予<code class="codeph">READ</code>或<code class="codeph">SELECT</code>对象权限，物化视图数据库中的用户通过数据库链接将该数据库连接到该数据库。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-D9DD5673-C8FA-46B6-8E42-99F781CBD9A1" title="与物化视图相关的用户包括创建者，复习者和所有者。在物化视图上执行操作所需的权限取决于执行操作的用户类型。">与实体化视图相关的用户和权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-92890867-8914-47D6-907C-4DD2796D47B2" name="GUID-92890867-8914-47D6-907C-4DD2796D47B2"></a><h4 id="ADMIN-GUID-92890867-8914-47D6-907C-4DD2796D47B2" class="sect4"><span class="enumeration_section">36.5.3</span>创作者不是所有者</h4>
                  <div>
                     <p>如果物化视图的创建者不是所有者，则必须授予创建者和所有者某些特权以创建物化视图。</p>
                     <p>必须明确授予创建者的特权和所有者的特权，而不是通过角色授予。</p>
                     <p><a href="read-only-materialized-view-concepts.html#GUID-92890867-8914-47D6-907C-4DD2796D47B2__BABDDCEJ" title="此表显示创建者和所有者在创建者不是所有者的情况下创建实体化视图时所需的权限。">表36-1</a>显示了物化视图的创建者不是所有者时所需的权限。
                     </p>
                     <div class="tblformal" id="GUID-92890867-8914-47D6-907C-4DD2796D47B2__BABDDCEJ">
                        <p class="titleintable">表36-1创建实体化视图所需的权限（创建者！=所有者）</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="创建物化视图所需的权限（创建者！=所有者）" width="100%" border="1" summary="This table shows the required privileges for the creator and the owner when creating materialized views for the case where the creator is not the owner." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="40%" id="d326248e1607">创造者</th>
                                 <th align="left" valign="bottom" width="60%" id="d326248e1610">所有者</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="40%" id="d326248e1615" headers="d326248e1607 ">
                                    <p><code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code></p>
                                 </td>
                                 <td align="left" valign="top" width="60%" headers="d326248e1615 d326248e1610 ">
                                    <p><code class="codeph">CREATE</code> <code class="codeph">TABLE</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code></p>
                                    <p>主表和主表的物化视图日志上的<code class="codeph">READ</code>或<code class="codeph">SELECT</code>对象特权，或<code class="codeph">READ</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>或<code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>系统特权</p>
                                    <p>如果master数据库是远程数据库，则必须向master数据库的用户授予<code class="codeph">READ</code>或<code class="codeph">SELECT</code>对象权限，物化视图数据库中的用户通过数据库链接将该数据库连接到该数据库。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-D9DD5673-C8FA-46B6-8E42-99F781CBD9A1" title="与物化视图相关的用户包括创建者，复习者和所有者。在物化视图上执行操作所需的权限取决于执行操作的用户类型。">与实体化视图相关的用户和权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-575DE322-9807-4C9E-A8A5-FA77D1B0CF4E" name="GUID-575DE322-9807-4C9E-A8A5-FA77D1B0CF4E"></a><h4 id="ADMIN-GUID-575DE322-9807-4C9E-A8A5-FA77D1B0CF4E" class="sect4"><span class="enumeration_section">36.5.4</span>复习者是所有者</h4>
                  <div>
                     <p>如果物化视图的刷新还拥有物化视图，则此用户必须具有创建物化视图所需的权限。</p>
                     <p>具体而言，此用户必须对主表和主表的物化视图日志具有<code class="codeph">READ</code>或<code class="codeph">SELECT</code>对象特权，或者具有<code class="codeph">READ</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>或<code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>系统特权。如果master数据库是远程数据库，则必须向master数据库的用户授予<code class="codeph">READ</code>或<code class="codeph">SELECT</code>对象权限，物化视图数据库中的用户通过数据库链接将该数据库连接到该数据库。可以显式或通过角色授予此权限。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-D9DD5673-C8FA-46B6-8E42-99F781CBD9A1" title="与物化视图相关的用户包括创建者，复习者和所有者。在物化视图上执行操作所需的权限取决于执行操作的用户类型。">与实体化视图相关的用户和权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-51254468-BE93-4534-892D-5DFB43697CA4" name="GUID-51254468-BE93-4534-892D-5DFB43697CA4"></a><h4 id="ADMIN-GUID-51254468-BE93-4534-892D-5DFB43697CA4" class="sect4"><span class="enumeration_section">36.5.5</span>复习不是所有者</h4>
                  <div>
                     <p>如果物化视图的复习不是所有者，则必须向复习者和所有者授予某些特权。</p>
                     <p>可以显式或通过角色授予这些权限。</p>
                     <p><a href="read-only-materialized-view-concepts.html#GUID-51254468-BE93-4534-892D-5DFB43697CA4__BABGBAID" title="此表显示了在刷新器不是所有者的情况下刷新物化视图时刷新器和所有者所需的权限。">表36-2</a>显示了物化视图的复习不是所有者时所需的权限。
                     </p>
                     <div class="tblformal" id="GUID-51254468-BE93-4534-892D-5DFB43697CA4__BABGBAID">
                        <p class="titleintable">表36-2刷新实体化视图所需的权限（复习！=所有者）</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="刷新物化视图所需的权限（复习！=所有者）" width="100%" border="1" summary="This table shows the required privileges for the refresher and the owner when refreshing materialized views for the case where the refresher is not the owner." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="39%" id="d326248e1794">复习</th>
                                 <th align="left" valign="bottom" width="61%" id="d326248e1797">所有者</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d326248e1802" headers="d326248e1794 ">
                                    <p><code class="codeph">ALTER</code> <code class="codeph">ANY</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code></p>
                                 </td>
                                 <td align="left" valign="top" width="61%" headers="d326248e1802 d326248e1797 ">
                                    <p>如果master数据库是本地数据库，则必须在主表和主表的物化视图日志或<code class="codeph">READ</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>或<code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>系统特权上授予<code class="codeph">READ</code>或<code class="codeph">SELECT</code>对象特权。
                                    </p>
                                    <p>如果master数据库是远程数据库，则必须向master数据库的用户授予<code class="codeph">READ</code>或<code class="codeph">SELECT</code>对象权限，物化视图数据库中的用户通过数据库链接将该数据库连接到该数据库。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-D9DD5673-C8FA-46B6-8E42-99F781CBD9A1" title="与物化视图相关的用户包括创建者，复习者和所有者。在物化视图上执行操作所需的权限取决于执行操作的用户类型。">与实体化视图相关的用户和权限</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-1AC3EF2C-C45F-469B-AE9C-ED6066B83326" name="GUID-1AC3EF2C-C45F-469B-AE9C-ED6066B83326"></a><h3 id="ADMIN-GUID-1AC3EF2C-C45F-469B-AE9C-ED6066B83326" class="sect3"><span class="enumeration_section">36.6</span>具有物化视图的数据子集</h3>
               <p>您可以使用行子集和列子集来配置实体化视图，以反映主表中数据的子集。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-899DBA13-2CAD-45E4-963A-6472EF5DFC66">关于物化视图的数据子集</a><br>在某些情况下，您可能希望物化视图反映主表中数据的子集。
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-C705F5EF-B389-4A30-9674-11653263A24A">具有子查询的物化视图</a><br>如果要根据多个表中的信息复制数据，则维护和定义这些物化视图可能很困难。
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-0C401A1A-D5BC-4009-B6DD-A1C61D65F9E9">具有子查询的物化视图的限制</a><br>具有子查询的物化视图的定义查询受若干限制，以保留物化视图的快速刷新功能。
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-08630525-1F61-43F4-979C-57491141322A">包含子查询的联合对物化视图的限制</a><br>对于包含子查询的联合的快速刷新实体化视图存在限制。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-A422B474-4BED-4A60-AEDB-E93630746083" title="理解与只读物化视图相关的概念。">只读实体化视图概念</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-899DBA13-2CAD-45E4-963A-6472EF5DFC66" name="GUID-899DBA13-2CAD-45E4-963A-6472EF5DFC66"></a><h4 id="ADMIN-GUID-899DBA13-2CAD-45E4-963A-6472EF5DFC66" class="sect4"><span class="enumeration_section">36.6.1</span>关于物化视图的数据子集</h4>
                  <div>
                     <p>在某些情况下，您可能希望物化视图反映主表中数据的子集。</p>
                     <p>行子集化使您可以使用<code class="codeph">WHERE</code>子句仅在实例化视图中包含主表所需的行。通过列子集，您只能在实例化视图中包含主表所需的列。您可以通过在物化视图创建期间在<code class="codeph">SELECT</code>语句中指定某些选择列来执行此操作。
                     </p>
                     <p>使用数据子集的一些原因是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">减少网络流量</span> ：在列子集化的物化视图中，只有满足物化视图定义查询的<code class="codeph">WHERE</code>子句的更改才会应用于物化视图数据库，从而减少传输的数据量并减少网络流量。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">安全敏感数据</span> ：用户只能查看满足物化视图定义查询的数据。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">降低资源要求</span> ：如果物化视图位于笔记本电脑上，则硬盘通常比公司服务器上的硬盘小得多。子集化的物化视图可能需要更少的存储空间。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">改进刷新时间</span> ：由于较少的数据应用于物化视图数据库，因此刷新过程更快，这对于需要使用笔记本电脑的网络连接刷新物化视图的人来说可能是必不可少的。
                           </p>
                        </li>
                     </ul>
                     <p>例如，以下语句基于<code class="codeph">oe.orders@orc1.example.com</code>主表创建实例化视图，并且仅包含<code class="codeph">sales_rep_id</code>数为<code class="codeph">173</code>的销售代表的行：</p><pre class="oac_no_warn" dir="ltr">创建物化视图oe.orders快速选择*来自oe.orders@orc1.example.com WHERE sales_rep_id = 173;</pre><p>具有除<code class="codeph">173</code>之外的<code class="codeph">sales_rep_id</code>数的orders表的<code class="codeph">sales_rep_id</code>从此物化视图中排除。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-1AC3EF2C-C45F-469B-AE9C-ED6066B83326" title="您可以使用行子集和列子集来配置实体化视图，以反映主表中数据的子集。">使用物化视图的数据子集</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-C705F5EF-B389-4A30-9674-11653263A24A" name="GUID-C705F5EF-B389-4A30-9674-11653263A24A"></a><h4 id="ADMIN-GUID-C705F5EF-B389-4A30-9674-11653263A24A" class="sect4"><span class="enumeration_section">36.6.2带子</span>查询的物化视图</h4>
                  <p>如果要根据多个表中的信息复制数据，则维护和定义这些物化视图可能很困难。</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-60F4C19C-076E-4FDB-8190-9CB91893CC51">多对一子查询</a><br>您可以使用具有多对一关系的子查询创建实例化视图。
                        </li>
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-4C913A6E-A150-4073-9242-820AE34DE9CD">一对多子查询</a><br>您可以使用具有一对多关系的子查询创建实例化视图。
                        </li>
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-1EB1B34F-65D8-45FA-9DC9-E281BE657A79">多对多子查询</a><br>您可以使用具有多对多关系的子查询创建实例化视图。
                        </li>
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-3AF20597-E07E-4BC6-A6C4-AA2D971A41CB">具有子查询和联合的物化视图</a><br>您可以使用子查询和联合创建实例化视图。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-1AC3EF2C-C45F-469B-AE9C-ED6066B83326" title="您可以使用行子集和列子集来配置实体化视图，以反映主表中数据的子集。">使用物化视图的数据子集</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-60F4C19C-076E-4FDB-8190-9CB91893CC51" name="GUID-60F4C19C-076E-4FDB-8190-9CB91893CC51"></a><h5 id="ADMIN-GUID-60F4C19C-076E-4FDB-8190-9CB91893CC51" class="sect5"><span class="enumeration_section">36.6.2.1</span>多对一子查询</h5>
                     <div>
                        <p>您可以使用具有多对一关系的子查询创建实例化视图。</p>
                        <p>考虑这样一种情况，即在<code class="codeph">oe</code>模式中有<code class="codeph">customers</code>表和<code class="codeph">orders</code>表，并且您希望根据<code class="codeph">orders</code>表和<code class="codeph">customers</code>表中的数据创建<code class="codeph">orders</code>表的物化视图。例如，假设销售人员希望查看信用额度超过10,000美元的客户的所有订单。在这种情况下，创建<code class="codeph">orders</code>物化视图的<code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>语句具有多对一关系的子查询，因为每个客户可以有许多订单。
                        </p>
                        <p>查看<a href="read-only-materialized-view-concepts.html#GUID-60F4C19C-076E-4FDB-8190-9CB91893CC51__BABEIGBD">图36-3</a>中的关系，注意<code class="codeph">customers</code>和<code class="codeph">orders</code>表是通过<code class="codeph">customer_id</code>列相关的。以下声明满足销售人员的原始目标。也就是说，以下语句创建一个物化视图，其中包含信用额度大于$ 10,000的客户的订单：</p><pre class="oac_no_warn" dir="ltr">创建物化视图oe.orders快速刷新选择*来自oe.orders@orc1.example.com o EXERE EXISTS（SELECT * FROM oe.customers@orc1.example.com c WHERE o.customer_id = c.customer_id AND c.credit_limit &gt; 10000）;</pre><div class="infoboxnote" id="GUID-60F4C19C-076E-4FDB-8190-9CB91893CC51__GUID-871AF3C0-B6F6-403F-BE9D-C983D45F4C85">
                           <p class="notep1">注意：</p>
                           <p>要创建此<code class="codeph">oe.orders</code>物化视图，必须在主表的物化视图日志中记录<code class="codeph">credit_limit</code> 。有关详细信息，请参阅<span class="q">“ <a href="planning-for-read-only-materialized-views.html#GUID-FAAF0273-7321-4FD0-8A5D-A3A8364E10F9" title="创建实例化视图日志时，可以向日志添加列以快速刷新实例化视图。">在实体化视图日志中记录列</a> ”</span> 。
                           </p>
                        </div>
                        <div class="figure" id="GUID-60F4C19C-076E-4FDB-8190-9CB91893CC51__BABEIGBD">
                           <p class="titleinfigure">图36-3具有多对一子查询的行子集</p><img src="img/admin588.gif" width="516" alt="下面是图36-3的描述" title="下面是图36-3的描述" longdesc="img_text/admin588.html"><br><a href="img_text/admin588.html">“图36-3具有多对一子查询的行子集”的说明</a></div>
                        <!-- class="figure" -->
                        <p>如您所见，此语句创建的物化视图可快速刷新。如果识别出具有大于10,000美元信用额度的新客户，则在随后的刷新过程中新数据将传播到物化视图数据库。同样，如果客户的信用额度降至10,000美元以下，那么客户的数据将在后续刷新过程中从物化视图中删除。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-C705F5EF-B389-4A30-9674-11653263A24A" title="如果要根据多个表中的信息复制数据，则维护和定义这些物化视图可能很困难。">带子查询的物化视图</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-4C913A6E-A150-4073-9242-820AE34DE9CD" name="GUID-4C913A6E-A150-4073-9242-820AE34DE9CD"></a><h5 id="ADMIN-GUID-4C913A6E-A150-4073-9242-820AE34DE9CD" class="sect5"><span class="enumeration_section">36.6.2.2</span>一对多子查询</h5>
                     <div>
                        <p>您可以使用具有一对多关系的子查询创建实例化视图。</p>
                        <p>考虑这样你有一个方案<code class="codeph">customers</code>表和<code class="codeph">orders</code>表在<code class="codeph">oe</code>模式，并且要创建的物化视图<code class="codeph">customers</code>基于两个数据表<code class="codeph">customers</code>表和<code class="codeph">orders</code>表。例如，假设销售人员想要查看订单总额超过20,000美元的订单的所有客户。在这种情况下，最有效的方法是在物化视图的定义查询中创建具有一对多子查询的物化视图。
                        </p>
                        <p>这里， <code class="codeph">customers</code>表上<code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>语句中的定义查询具有一个具有一对多关系的子查询。也就是说，一个客户可以有很多订单。
                        </p>
                        <p>查看<a href="read-only-materialized-view-concepts.html#GUID-4C913A6E-A150-4073-9242-820AE34DE9CD__BABCGECH">图36-4</a>中的关系，注意<code class="codeph">orders</code>表和<code class="codeph">customers</code>表是通过<code class="codeph">customer_id</code>列相关的。以下声明满足销售人员的原始目标。也就是说，此语句创建一个物化视图，其中包含订单总额大于$ 20,000的订单的客户：</p><pre class="oac_no_warn" dir="ltr">创建物化视图oe.customers快速选择*来自oe.customers@orc1.example.com c何处出现（SELECT * FROM oe.orders@orc1.example.com o WHERE c.customer_id = o.customer_id AND o.order_total &gt; 20000）;</pre><div class="infoboxnote" id="GUID-4C913A6E-A150-4073-9242-820AE34DE9CD__GUID-4AEFDD03-ECED-4C5A-B0EA-A36AE8590134">
                           <p class="notep1">注意：</p>
                           <p>要创建此<code class="codeph">oe.customers</code>物化视图，必须在<code class="codeph">orders</code>主表的物化视图日志中记录<code class="codeph">customer_id</code>和<code class="codeph">order_total</code> 。有关详细信息，请参阅<span class="q">“ <a href="planning-for-read-only-materialized-views.html#GUID-FAAF0273-7321-4FD0-8A5D-A3A8364E10F9" title="创建实例化视图日志时，可以向日志添加列以快速刷新实例化视图。">在实体化视图日志中记录列</a> ”</span> 。
                           </p>
                        </div>
                        <div class="figure" id="GUID-4C913A6E-A150-4073-9242-820AE34DE9CD__BABCGECH">
                           <p class="titleinfigure">图36-4使用一对多子查询的行子集</p><img src="img/admin587.gif" width="557" alt="下面是图36-4的描述" title="下面是图36-4的描述" longdesc="img_text/admin587.html"><br><a href="img_text/admin587.html">“图36-4使用一对多子查询进行子行设置”的说明</a></div>
                        <!-- class="figure" -->
                        <p>此语句创建的物化视图可快速刷新。如果识别出订单总数超过20,000美元的新客户，则新数据将在后续刷新过程中传播到物化视图数据库。同样，如果客户取消订单总额超过20,000美元并且没有其他订单总额超过20,000美元的订单，那么客户的数据将在后续刷新过程中从物化视图中删除。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-C705F5EF-B389-4A30-9674-11653263A24A" title="如果要根据多个表中的信息复制数据，则维护和定义这些物化视图可能很困难。">带子查询的物化视图</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-1EB1B34F-65D8-45FA-9DC9-E281BE657A79" name="GUID-1EB1B34F-65D8-45FA-9DC9-E281BE657A79"></a><h5 id="ADMIN-GUID-1EB1B34F-65D8-45FA-9DC9-E281BE657A79" class="sect5"><span class="enumeration_section">36.6.2.3</span>多对多子查询</h5>
                     <div>
                        <p>您可以使用具有多对多关系的子查询创建实例化视图。</p>
                        <p>考虑一种情况，其中您在<code class="codeph">oe</code>模式中具有<code class="codeph">order_items</code>表和<code class="codeph">inventories</code>表，并且您希望基于<code class="codeph">inventories</code>表和<code class="codeph">order_items</code>表中的数据创建<code class="codeph">inventories</code>表的物化视图。例如，假设销售人员想要查看其<code class="codeph">product_id</code>在<code class="codeph">order_items</code>表中的每个产品的库存数量大于0（零）的所有库存。换句话说，销售人员希望看到客户订购的所有产品的库存大于零。这里，库存是特定仓库中特定数量的产品。因此，某个产品可以包含在许多订单商品和许多库存中。
                        </p>
                        <p>为了实现销售人员的目标，您可以在<code class="codeph">order_items</code>表和<code class="codeph">inventories</code>表之间的多对多关系上创建具有子查询的物化视图。
                        </p>
                        <p>创建<code class="codeph">inventories</code>物化视图时，您希望检索<code class="codeph">order_items</code>表中显示的产品的库存数量大于零的库存。查看<a href="read-only-materialized-view-concepts.html#GUID-1EB1B34F-65D8-45FA-9DC9-E281BE657A79__BABCFJDF">图36-5</a>中的关系，并注意<code class="codeph">inventories</code>表和<code class="codeph">order_items</code>表通过<code class="codeph">product_id</code>列相关。以下语句创建实例化视图：</p><pre class="oac_no_warn" dir="ltr">创建物化视图oe.inventories快速选择*来自oe.inventories@orc1.example.com我在哪里i.quantity_on_hand&gt; 0和EXISTS（SELECT * FROM oe.order_items@orc1.example.com o在哪里i.product_id = o .product_id）;</pre><div class="infoboxnote" id="GUID-1EB1B34F-65D8-45FA-9DC9-E281BE657A79__GUID-C73131D8-94EC-4D9D-B527-211935AA84F3">
                           <p class="notep1">注意：</p>
                           <p>要创建此<code class="codeph">oe.inventories</code>物化视图， <code class="codeph">order_items</code>主表中的<code class="codeph">product_id</code>列必须记录在主表的物化视图日志中。有关详细信息，请参阅<span class="q">“ <a href="planning-for-read-only-materialized-views.html#GUID-FAAF0273-7321-4FD0-8A5D-A3A8364E10F9" title="创建实例化视图日志时，可以向日志添加列以快速刷新实例化视图。">在实体化视图日志中记录列</a> ”</span> 。
                           </p>
                        </div>
                        <div class="figure" id="GUID-1EB1B34F-65D8-45FA-9DC9-E281BE657A79__BABCFJDF">
                           <p class="titleinfigure">图36-5具有多对多子查询的行子集</p><img src="img/admin589.gif" width="597" alt="下面是图36-5的描述" title="下面是图36-5的描述" longdesc="img_text/admin589.html"><br><a href="img_text/admin589.html">“图36-5具有多对多子查询的行子集”的说明</a></div>
                        <!-- class="figure" -->
                        <p>此语句创建的物化视图可快速刷新。如果为<code class="codeph">order_items</code>表中的产品标识了大于零的新库存，则新数据将在后续刷新过程中传播到物化视图数据库。同样，如果客户取消产品订单并且<code class="codeph">order_items</code>表中没有该产品的其他订单，则在后续刷新过程中将从物化视图中删除产品的库存。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-C705F5EF-B389-4A30-9674-11653263A24A" title="如果要根据多个表中的信息复制数据，则维护和定义这些物化视图可能很困难。">带子查询的物化视图</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-3AF20597-E07E-4BC6-A6C4-AA2D971A41CB" name="GUID-3AF20597-E07E-4BC6-A6C4-AA2D971A41CB"></a><h5 id="ADMIN-GUID-3AF20597-E07E-4BC6-A6C4-AA2D971A41CB" class="sect5"><span class="enumeration_section">36.6.2.4</span>具有子查询和<span class="enumeration_section">联合的</span>物化视图</h5>
                     <div>
                        <p>您可以使用子查询和联合创建实例化视图。</p>
                        <p>在您希望单个物化视图包含与两个或更多不同查询的完整结果匹配的数据的情况下，可以使用<code class="codeph">UNION</code>运算符。使用<code class="codeph">UNION</code>运算符创建<code class="codeph">UNION</code>化视图时，每个<code class="codeph">UNION</code>运算符周围都有两个<code class="codeph">SELECT</code>语句;一个在它上面，一个在它下面。生成的物化视图包含由任一查询选择的行。
                        </p>
                        <p>您可以使用<code class="codeph">UNION</code>运算符来创建满足“或”条件的快速可刷新实体化视图，而无需在子查询的<code class="codeph">WHERE</code>子句中使用<code class="codeph">OR</code>表达式。在某些情况下，在子查询的<code class="codeph">WHERE</code>子句中使用<code class="codeph">OR</code>表达式会导致生成的实例化视图变得复杂，因此无法快速刷新。
                        </p>
                        <div class="infoboxnotealso" id="GUID-3AF20597-E07E-4BC6-A6C4-AA2D971A41CB__GUID-D281C29D-C7FE-4AAE-B879-F63839D48133">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="read-only-materialized-view-concepts.html#GUID-0C401A1A-D5BC-4009-B6DD-A1C61D65F9E9" title="具有子查询的物化视图的定义查询受若干限制，以保留物化视图的快速刷新功能。">有子查询的物化视图的限制</a> ”</span> ，以获取有关子查询中<code class="codeph">OR</code>表达式的更多信息</p>
                        </div>
                        <p>例如，假设一个销售人员要为产品中的特定产品的信息<code class="codeph">category_id</code>这<span class="italic">要么是</span>在加州的一家仓库<span class="italic">或</span>包含单词“胭脂扣”在他们的翻译产品说明（为法国翻译）。以下语句使用<code class="codeph">UNION</code>运算符和子查询在<code class="codeph">category_id</code> 29中的产品的物化视图中捕获此数据：</p><pre class="oac_no_warn" dir="ltr">创建物化视图oe.product_information快速选择*来自oe.product_information@orc1.example.com pi其中pi.category_id = 29 AND EXISTS（SELECT * FROM oe.product_descriptions@orc1.example.com pd WHERE pi.product_id = pd .product_id AND pd.translated_description LIKE'％Rouge％'）UNION SELECT * FROM oe.product_information@orc1.example.com pi WHERE pi.category_id = 29 AND EXISTS（SELECT * FROM oe.inventories@orc1.example.com i WHERE pi.product_id = i.product_id AND EXISTS（SELECT * FROM oe.warehouses@orc1.example.com w WHERE i.warehouse_id = w.warehouse_id AND EXISTS（SELECT * FROM hr.locations@orc1.example.com l WHERE w。 location_id = l.location_id AND l.state_province ='California'）））;</pre><div class="infoboxnote" id="GUID-3AF20597-E07E-4BC6-A6C4-AA2D971A41CB__GUID-A9E0D2B8-4219-430D-B84F-B3530C600829">
                           <p class="notep1">注意：</p>
                           <p>要创建<code class="codeph">oe.product_information</code>物化视图， <code class="codeph">translated_description</code>在<code class="codeph">oe.product_descriptions</code>主表中， <code class="codeph">state_province</code>的<code class="codeph">hr.locations</code>主表，以及<code class="codeph">location_id</code>列<code class="codeph">oe.warehouses</code>主表必须在每个主人的物化视图日志中记录。有关详细信息，请参阅<span class="q">“ <a href="planning-for-read-only-materialized-views.html#GUID-FAAF0273-7321-4FD0-8A5D-A3A8364E10F9" title="创建实例化视图日志时，可以向日志添加列以快速刷新实例化视图。">在实体化视图日志中记录列</a> ”</span> 。
                           </p>
                        </div>
                        <p><a href="read-only-materialized-view-concepts.html#GUID-3AF20597-E07E-4BC6-A6C4-AA2D971A41CB__BABHFIII">图36-6</a>显示了此语句中涉及的主表的关系。
                        </p>
                        <div class="figure" id="GUID-3AF20597-E07E-4BC6-A6C4-AA2D971A41CB__BABHFIII">
                           <p class="titleinfigure">图36-6带子查询和联合的行子集</p><img src="img/admin590.gif" width="556" alt="下面是图36-6的描述" title="下面是图36-6的描述" longdesc="img_text/admin590.html"><br><a href="img_text/admin590.html">“图36-6使用子查询和联合进行子行设置”的说明</a></div>
                        <!-- class="figure" -->
                        <p>除了<code class="codeph">UNION</code>操作之外，此语句还包含以下子查询：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>引用<code class="codeph">product_information</code>表和<code class="codeph">product_descriptions</code>表的子查询。此子查询是一对多的，因为一个产品可以有多个产品描述（针对不同的语言）。
                              </p>
                           </li>
                           <li>
                              <p>引用<code class="codeph">product_information</code>表和<code class="codeph">inventories</code>表的子查询。这个子查询是一对多的，因为产品可以包含在许多库存中。
                              </p>
                           </li>
                           <li>
                              <p>引用<code class="codeph">inventories</code>表和<code class="codeph">warehouses</code>表的子查询。这个子查询是多对一的，因为许多库存可以存储在一个仓库中。
                              </p>
                           </li>
                           <li>
                              <p>引用<code class="codeph">warehouses</code>表和<code class="codeph">locations</code>表的子查询。这个子查询是多对一的，因为许多仓库可以在一个位置。
                              </p>
                           </li>
                        </ul>
                        <p>此语句创建的物化视图可快速刷新。如果添加了存储在加利福尼亚州仓库中的新产品或在已翻译的产品说明中包含字符串“Rouge”的新产品，则新数据将在后续刷新过程中传播到<code class="codeph">product_information</code>物化视图。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-C705F5EF-B389-4A30-9674-11653263A24A" title="如果要根据多个表中的信息复制数据，则维护和定义这些物化视图可能很困难。">带子查询的物化视图</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-0C401A1A-D5BC-4009-B6DD-A1C61D65F9E9" name="GUID-0C401A1A-D5BC-4009-B6DD-A1C61D65F9E9"></a><h4 id="ADMIN-GUID-0C401A1A-D5BC-4009-B6DD-A1C61D65F9E9" class="sect4"><span class="enumeration_section">36.6.3带子</span>查询的物化视图的限制</h4>
                  <div>
                     <p>具有子查询的物化视图的定义查询受若干限制，以保留物化视图的快速刷新功能。</p>
                     <p>以下是使用子查询快速刷新实体化视图的限制：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>物化视图必须是主键物化视图。</p>
                        </li>
                        <li>
                           <p><a id="d326248e2753" class="indexterm-anchor"></a><a id="d326248e2759" class="indexterm-anchor"></a><a id="d326248e2763" class="indexterm-anchor"></a>主表的物化视图日志必须包含子查询中引用的某些列。有关必须包含哪些列的信息，请参阅<span class="q">“ <a href="planning-for-read-only-materialized-views.html#GUID-FAAF0273-7321-4FD0-8A5D-A3A8364E10F9" title="创建实例化视图日志时，可以向日志添加列以快速刷新实例化视图。">在实体化视图日志中记录列</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p><a id="d326248e2780" class="indexterm-anchor"></a><a id="d326248e2786" class="indexterm-anchor"></a><a id="d326248e2792" class="indexterm-anchor"></a>如果子查询是多对多或一对多，则不包含主键的连接列必须包含在主表的实例化视图日志中。此限制不适用于多个到一个子查询。
                           </p>
                        </li>
                        <li>
                           <p><a id="d326248e2801" class="indexterm-anchor"></a><a id="d326248e2807" class="indexterm-anchor"></a><a id="d326248e2811" class="indexterm-anchor"></a>子查询必须是正子查询。例如，您可以使用<code class="codeph">EXISTS</code>条件，但不能使用<code class="codeph">NOT</code> <code class="codeph">EXISTS</code>条件。
                           </p>
                        </li>
                        <li>
                           <p>子查询必须使用<code class="codeph">EXISTS</code>连接每个嵌套级别（不允许使用<code class="codeph">IN</code> ）。
                           </p>
                        </li>
                        <li>
                           <p>每个表只能有一个<code class="codeph">EXISTS</code>表达式。
                           </p>
                        </li>
                        <li>
                           <p><a id="d326248e2844" class="indexterm-anchor"></a><a id="d326248e2850" class="indexterm-anchor"></a>连接表达式必须使用完全匹配或相等比较（即equi-joins）。
                           </p>
                        </li>
                        <li>
                           <p>每个表只能在子查询中连接一次。</p>
                        </li>
                        <li>
                           <p>每个嵌套级别的每个表必须存在一个主键。</p>
                        </li>
                        <li>
                           <p>每个嵌套级别只能引用其上方级别的表。</p>
                        </li>
                        <li>
                           <p><a id="d326248e2868" class="indexterm-anchor"></a><a id="d326248e2874" class="indexterm-anchor"></a><a id="d326248e2878" class="indexterm-anchor"></a><a id="d326248e2882" class="indexterm-anchor"></a><a id="d326248e2888" class="indexterm-anchor"></a><a id="d326248e2892" class="indexterm-anchor"></a>子查询可以包含<code class="codeph">AND</code>条件，但每个<code class="codeph">OR</code>条件只能引用一行中包含的列。子查询中的多个<code class="codeph">OR</code>条件可以与<code class="codeph">AND</code>条件连接。
                           </p>
                        </li>
                        <li>
                           <p>子查询中引用的所有表必须位于同一个master数据库中。</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-0C401A1A-D5BC-4009-B6DD-A1C61D65F9E9__GUID-7869BBBB-C15C-4CBD-BE02-F43C577C4AA9">
                        <p class="notep1">注意：</p>
                        <p><a id="d326248e2918" class="indexterm-anchor"></a><a id="d326248e2924" class="indexterm-anchor"></a>如果<code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>语句包含<code class="codeph">ON</code> <code class="codeph">PREBUILT</code> <code class="codeph">TABLE</code>子句和子查询，则子查询将被视为多对多。因此，在这种情况下，必须将连接列记录在物化视图日志中。有关<code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>语句中的<code class="codeph">ON</code> <code class="codeph">PREBUILT</code> <code class="codeph">TABLE</code>子句的更多信息，请参见<a href="../sqlrf/CREATE-MATERIALIZED-VIEW.html#SQLRF01302" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-0C401A1A-D5BC-4009-B6DD-A1C61D65F9E9__GUID-A2B454E6-2DD1-4FC9-A004-B9B3EE8AE416">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关主键物化视图的更多信息，请参阅<span class="q">“ <a href="read-only-materialized-view-concepts.html#GUID-31D07B2A-4B42-4B26-BB6F-0BA90FC0FB0D" title="主键物化视图是物化视图的默认类型。">主键物化视图</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="creating-and-managing-read-only-materialized-views.html#GUID-7B26829E-1389-46CF-81AD-28EA6C2F13A1" title="通过尝试使用REFRESH FAST子句或使用DBMS_MVIEW.EXPLAIN_MVIEW过程创建实例化视图，可以确定实例化视图是否可以快速刷新。">确定物化视图的快速刷新功能</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-1AC3EF2C-C45F-469B-AE9C-ED6066B83326" title="您可以使用行子集和列子集来配置实体化视图，以反映主表中数据的子集。">使用物化视图的数据子集</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-08630525-1F61-43F4-979C-57491141322A" name="GUID-08630525-1F61-43F4-979C-57491141322A"></a><h4 id="ADMIN-GUID-08630525-1F61-43F4-979C-57491141322A" class="sect4"><span class="enumeration_section">36.6.4</span>包含子查询的联合的物化视图限制</h4>
                  <div>
                     <p>对于包含子查询的联合的快速刷新实体化视图存在限制。</p>
                     <p>以下是对包含子查询的联合的快速刷新实例化视图的限制：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="read-only-materialized-view-concepts.html#GUID-0C401A1A-D5BC-4009-B6DD-A1C61D65F9E9" title="具有子查询的物化视图的定义查询受若干限制，以保留物化视图的快速刷新功能。">使用子查询限制物化视图</a></span>的限制”中描述的所有限制都适用于每个联合块中的子查询。
                           </p>
                        </li>
                        <li>
                           <p>所有连接列都必须包含在主表的实例化视图日志中，即使子查询是多对一的。</p>
                        </li>
                        <li>
                           <p>所有在<span class="q">“</span>中描述的限制， <span class="q"><a href="read-only-materialized-view-concepts.html#GUID-C59C92AB-06FD-4781-A414-0209E5BCB13E" title="要快速刷新，物化视图的定义查询必须遵守某些限制。">复杂的物化视图</a> ”</span>申请条款与<code class="codeph">UNIONS</code> 。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-B276CBED-2FD5-4CA3-A21E-90024BE71474">包含子查询的联合的物化视图示例</a><br>示例说明使用包含子查询的联合创建实例化视图。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-1AC3EF2C-C45F-469B-AE9C-ED6066B83326" title="您可以使用行子集和列子集来配置实体化视图，以反映主表中数据的子集。">使用物化视图的数据子集</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-B276CBED-2FD5-4CA3-A21E-90024BE71474" name="GUID-B276CBED-2FD5-4CA3-A21E-90024BE71474"></a><h5 id="ADMIN-GUID-B276CBED-2FD5-4CA3-A21E-90024BE71474" class="sect5"><span class="enumeration_section">36.6.4.1</span>包含子查询的<span class="enumeration_section">联合</span>的物化视图示例</h5>
                     <div>
                        <p>示例说明使用包含子查询的联合创建实例化视图。</p>
                        <p>以下语句创建<code class="codeph">oe.orders</code>物化视图。此物化视图可快速刷新，因为每个联合块中的子查询满足<span class="q">“ <a href="read-only-materialized-view-concepts.html#GUID-0C401A1A-D5BC-4009-B6DD-A1C61D65F9E9" title="The defining query of a materialized view with a subquery is subject to several restrictions to preserve the materialized view&#39;s fast refresh capability.">使用子查询限制物化视图的限制</a> ”中</span>描述的子查询的<span class="q"><a href="read-only-materialized-view-concepts.html#GUID-0C401A1A-D5BC-4009-B6DD-A1C61D65F9E9" title="具有子查询的物化视图的定义查询受若干限制，以保留物化视图的快速刷新功能。">限制</a></span> 。
                        </p><pre class="oac_no_warn" dir="ltr">创建物化视图oe.orders快速刷新选择*来自oe.orders@orc1.example.com o EXERE EXISTS（SELECT * FROM oe.customers@orc1.example.com c WHERE o.customer_id = c.customer_id AND c.credit_limit &gt; 50）UNION SELECT * FROM oe.orders@orc1.example.com o EXERE EXISTS（SELECT * FROM oe.customers@orc1.example.com c WHERE o.customer_id = c.customer_id AND c.account_mgr_id = 30）;</pre><p>请注意，子查询的一个限制是每个表只能在一个<code class="codeph">EXISTS</code>表达式中。这里， <code class="codeph">customers</code>表出现在两个<code class="codeph">EXISTS</code>表达式中，但<code class="codeph">EXISTS</code>表达式位于单独的<code class="codeph">UNION</code>块中。由于<span class="q">“ <a href="read-only-materialized-view-concepts.html#GUID-0C401A1A-D5BC-4009-B6DD-A1C61D65F9E9" title="The defining query of a materialized view with a subquery is subject to several restrictions to preserve the materialized view&#39;s fast refresh capability.">使用子查询限制物化视图</a> ”中</span>描述的<span class="q"><a href="read-only-materialized-view-concepts.html#GUID-0C401A1A-D5BC-4009-B6DD-A1C61D65F9E9" title="具有子查询的物化视图的定义查询受若干限制，以保留物化视图的快速刷新功能。">限制</a></span>仅适用于每个<code class="codeph">UNION</code>块，而不适用于整个<code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>语句，因此物化视图可快速刷新。
                        </p>
                        <p>相反，使用以下语句创建的物化视图无法快速刷新，因为在同一个<code class="codeph">UNION</code>块中的两个不同的<code class="codeph">EXISTS</code>表达式中引用了<code class="codeph">orders</code>表：</p><pre class="oac_no_warn" dir="ltr">创建物化视图oe.orders AS SELECT * FROM oe.orders@orc1.example.com o EXERE EXISTS（SELECT * FROM oe.customers@orc1.example.com c WHERE o.customer_id = c.customer_id  - 首次参考订单table AND c.credit_limit&gt; 50 AND EXISTS（SELECT * FROM oe.orders@orc1.example.com o WHERE order_total&gt; 5000 AND o.customer_id = c.customer_id）） - 对订单表的第二次引用UNION SELECT * FROM oe。 orders@orc1.example.com o WHERE EXISTS（SELECT * FROM oe.customers@orc1.example.com c WHERE o.customer_id = c.customer_id AND c.account_mgr_id = 30）;</pre></div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-B276CBED-2FD5-4CA3-A21E-90024BE71474__GUID-528D5AB9-3EC6-43E6-9DFB-3E8A63D51FAB">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="creating-and-managing-read-only-materialized-views.html#GUID-7B26829E-1389-46CF-81AD-28EA6C2F13A1" title="通过尝试使用REFRESH FAST子句或使用DBMS_MVIEW.EXPLAIN_MVIEW过程创建实例化视图，可以确定实例化视图是否可以快速刷新。">确定物化视图的快速刷新功能</a> ”</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-08630525-1F61-43F4-979C-57491141322A" title="对于包含子查询的联合的快速刷新实体化视图存在限制。">包含子查询的联合的物化视图的限制</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-57260AFB-C323-40AF-A181-6ADF08E550DF" name="GUID-57260AFB-C323-40AF-A181-6ADF08E550DF"></a><h3 id="ADMIN-GUID-57260AFB-C323-40AF-A181-6ADF08E550DF" class="sect3"><span class="enumeration_section">36.7</span>物化视图刷新</h3>
               <div>
                  <p>要确保实例化视图与其主表一致，必须定期<strong class="term">刷新实例</strong>化视图。
                  </p>
                  <p>Oracle提供了以下三种方法来刷新实例化视图：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><strong class="term">快速刷新</strong>使用物化视图日志仅更新自上次刷新以来已更改的行。
                        </p>
                     </li>
                     <li>
                        <p><strong class="term">完成刷新会</strong>更新整个物化视图。
                        </p>
                     </li>
                     <li>
                        <p><strong class="term">强制刷新</strong>会尽可能快速刷新。当无法快速刷新时，强制刷新会执行完全刷新。
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-A422B474-4BED-4A60-AEDB-E93630746083" title="理解与只读物化视图相关的概念。">只读实体化视图概念</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-31E1E90D-C565-40EF-BD22-4DB2D13462AA" name="GUID-31E1E90D-C565-40EF-BD22-4DB2D13462AA"></a><h3 id="ADMIN-GUID-31E1E90D-C565-40EF-BD22-4DB2D13462AA" class="sect3"><span class="enumeration_section">36.8</span>刷新组</h3>
               <div>
                  <p>如果物化视图在事务上彼此一致很重要，则可以将它们组织到<strong class="term">刷新组中</strong> 。
                  </p>
                  <p>通过刷新刷新组，可以确保刷新组中所有实例化视图中的数据对应于相同的事务一致性时间点。刷新组中的实例化视图仍可单独刷新，但这样做会使刷新组的优势无效，因为单独刷新实例化视图不会刷新刷新组中的其他实例化视图。</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-A422B474-4BED-4A60-AEDB-E93630746083" title="理解与只读物化视图相关的概念。">只读实体化视图概念</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-E479B069-EE7D-4DF5-8086-8CB558A4B62A" name="GUID-E479B069-EE7D-4DF5-8086-8CB558A4B62A"></a><h3 id="ADMIN-GUID-E479B069-EE7D-4DF5-8086-8CB558A4B62A" class="sect3"><span class="enumeration_section">36.9</span>物化视图日志</h3>
               <div>
                  <p><strong class="term">物化视图日志</strong>是数据库中包含物化视图主表的表。它将所有DML更改记录到主表。
                  </p>
                  <p>物化视图日志与单个主表关联，并且每个主表只有一个物化视图日志，无论从主表刷新多少物化视图。仅当物化视图的主表具有物化视图日志时，才可以快速刷新物化视图。快速刷新实例化视图时，物化视图的相关物化视图日志中自上次刷新实例化视图后出现的条目将应用于实例化视图。</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-A422B474-4BED-4A60-AEDB-E93630746083" title="理解与只读物化视图相关的概念。">只读实体化视图概念</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-52580CD0-2320-45BB-BCF1-89F4EA768291" name="GUID-52580CD0-2320-45BB-BCF1-89F4EA768291"></a><h3 id="ADMIN-GUID-52580CD0-2320-45BB-BCF1-89F4EA768291" class="sect3"><span class="enumeration_section">36.10</span>物化视图和用户定义数据类型</h3>
               <p>具有用户定义数据类型的物化视图有特殊注意事项。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-5F36705B-9947-4E8A-93A8-DDA4B330B404">物化视图如何与对象类型和集合一起使用</a><br>您可以在复制环境中的主数据库和物化视图数据库之间复制对象类型和对象。
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-2E11F29F-BF60-4E3B-B94C-74EBB8C06F34">在复制数据库中键入协议</a><br>用户定义的类型包括使用<code class="codeph">CREATE</code> <code class="codeph">TYPE</code>语句创建的所有类型，包括object，嵌套表， <code class="codeph">VARRAY</code>和indextype。要基于用户定义的类型复制架构对象，用户定义的类型本身必须存在，并且必须在master数据库和物化视图数据库中相同。
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-84F76978-04A6-4A4D-9E6A-3D3514F59B5C">使用列对象的主列的子列设置</a><br>只读实例化视图可以复制列对象的特定属性，而无需复制其他属性。
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-7F5570DE-EFD3-411B-BE36-F3041C47D551">基于对象表的物化视图</a><br>您可以基于对象表创建实例化视图。
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-306B2693-B88F-46D3-A8CA-43419B8B1F44">带有集合列的物化视图</a><br>集合列是基于varray和嵌套表数据类型的列。Oracle支持使用集合列创建物化视图。
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-A5FB1CBF-E221-4EB7-ADDE-9F5EAE1E863F">带REF列的物化视图</a><br>物化视图可以包含<code class="codeph">REF</code>列。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-A422B474-4BED-4A60-AEDB-E93630746083" title="理解与只读物化视图相关的概念。">只读实体化视图概念</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-5F36705B-9947-4E8A-93A8-DDA4B330B404" name="GUID-5F36705B-9947-4E8A-93A8-DDA4B330B404"></a><h4 id="ADMIN-GUID-5F36705B-9947-4E8A-93A8-DDA4B330B404" class="sect4"><span class="enumeration_section">36.10.1</span>物化视图如何使用对象类型和集合</h4>
                  <div>
                     <p>您可以在复制环境中的主数据库和物化视图数据库之间复制对象类型和对象。</p>
                     <p>Oracle <span class="bold">对象</span> <span class="bold">类型</span>是用户定义的数据类型，可以将复杂的现实世界实体（如客户和订单）建模为数据库中的单个实体（称为<span class="bold">对象）</span> 。您可以使用<code class="codeph">CREATE</code> <code class="codeph">TYPE</code>创建对象类型<code class="codeph">...</code> <code class="codeph">AS</code> <code class="codeph">OBJECT</code>语句。
                     </p>
                     <p>占用表中单个列的Oracle对象称为<span class="bold">列对象</span> 。通常，包含列对象的表还包含其他列，这些列可以是内置数据类型，例如<code class="codeph">VARCHAR2</code>和<code class="codeph">NUMBER</code> 。 <span class="bold">对象表</span>是一种特殊的表，其中每一行代表一个对象。对象表中的每一行都是一个<span class="bold">行对象</span> 。
                     </p>
                     <p>您还可以复制<span class="bold">集合</span> 。集合是基于<code class="codeph">VARRAY</code>和嵌套表数据类型的用户定义数据类型。使用<code class="codeph">CREATE</code> <code class="codeph">TYPE</code>创建varrays <code class="codeph">...</code> <code class="codeph">AS</code> <code class="codeph">VARRAY</code>语句，您使用<code class="codeph">CREATE</code> <code class="codeph">TYPE</code>创建嵌套表<code class="codeph">...</code> <code class="codeph">AS</code> <code class="codeph">TABLE</code>语句。
                     </p>
                     <div class="infoboxnote" id="GUID-5F36705B-9947-4E8A-93A8-DDA4B330B404__GUID-16FACB38-B82F-4E70-8415-20122D4DC779">
                        <p class="notep1">注意：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a id="d326248e3614" class="indexterm-anchor"></a><a id="d326248e3618" class="indexterm-anchor"></a><a id="d326248e3624" class="indexterm-anchor"></a>您无法基于具有用户定义类型或Oracle提供的类型的主表创建基于提交的刷新实例化视图。Refresh-on-commit实体化视图是使用<code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>语句中的<code class="codeph">ON</code> <code class="codeph">COMMIT</code> <code class="codeph">REFRESH</code>子句<code class="codeph">CREATE</code> <code class="codeph">VIEW</code> 。
                              </p>
                           </li>
                           <li>
                              <p>不支持使用<code class="codeph">NOT</code> <code class="codeph">FINAL</code>子句创建的类型继承和类型。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-5F36705B-9947-4E8A-93A8-DDA4B330B404__GUID-DCD9ACF2-C482-4917-8592-8960E88E55D3">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../adobj/introduction-to-oracle-objects.html#ADOBJ001" target="_blank"><span class="italic">Oracle数据库对象关系开发人员指南</span></a> ，了解有关用户定义类型，Oracle对象和集合的详细信息。本节假定您对这些概念有基本的了解。
                              </p>
                           </li>
                           <li>
                              <p>有关用户定义类型和Oracle提供的类型的更多信息，请<a href="../sqlrf/Basic-Elements-of-Oracle-SQL.html#SQLRF002" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-52580CD0-2320-45BB-BCF1-89F4EA768291" title="具有用户定义数据类型的物化视图有特殊注意事项。">实体化视图和用户定义数据类型</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-2E11F29F-BF60-4E3B-B94C-74EBB8C06F34" name="GUID-2E11F29F-BF60-4E3B-B94C-74EBB8C06F34"></a><h4 id="ADMIN-GUID-2E11F29F-BF60-4E3B-B94C-74EBB8C06F34" class="sect4"><span class="enumeration_section">36.10.2</span>复制数据库中的类型协议</h4>
                  <div>
                     <p>用户定义的类型包括使用<code class="codeph">CREATE</code> <code class="codeph">TYPE</code>语句创建的所有类型，包括object，嵌套表， <code class="codeph">VARRAY</code>和indextype。要基于用户定义的类型复制架构对象，用户定义的类型本身必须存在，并且必须在master数据库和物化视图数据库中相同。
                     </p>
                     <p>复制用户定义的类型及其所基于的架构对象时，以下条件适用：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在创建依赖于这些类型的任何物化视图之前，必须在物化视图数据库中创建在master数据库和物化视图数据库中复制的用户定义类型。</p>
                        </li>
                        <li>
                           <p>物化视图所基于的所有主表必须位于同一主数据库中，才能创建具有用户定义类型的物化视图。</p>
                        </li>
                        <li>
                           <p>所有数据库的用户定义类型必须相同：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>对于每个复制的用户定义类型，所有复制数据库必须具有相同的对象标识符（OID），架构所有者和类型名称。</p>
                              </li>
                              <li>
                                 <p>如果用户定义的类型是对象类型，则所有数据库必须就对象类型中属性的顺序和数据类型达成一致。在创建对象类型时，可以建立属性的顺序和数据类型。例如，请考虑以下对象类型：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE cust_address_typ AS OBJECT（street_address VARCHAR2（40），postal_code VARCHAR2（10），city VARCHAR2（30），state_province VARCHAR2（10），country_id CHAR（2））; /</pre><p>在所有数据库中， <code class="codeph">street_address</code>必须是此类型的第一个属性，并且必须是<code class="codeph">VARCHAR2(40)</code> ， <code class="codeph">postal_code</code>必须是第二个属性且必须是<code class="codeph">VARCHAR2(10)</code> ， <code class="codeph">city</code>必须是第三个属性且必须是<code class="codeph">VARCHAR2(30)</code> ，并且等等。
                                 </p>
                              </li>
                              <li>
                                 <p><a id="d326248e3780" class="indexterm-anchor"></a>所有数据库必须就用户定义类型的哈希码达成一致。Oracle检查用户定义的类型并分配哈希码。此检查包括类型属性，属性顺序和类型名称。当所有这些项对于两种或更多种类型相同时，类型具有相同的哈希码。您可以通过查询<code class="codeph">DBA_TYPE_VERSIONS</code>数据字典视图来查看类型的哈希<code class="codeph">DBA_TYPE_VERSIONS</code> 。
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <p>您可以在物化视图数据库中使用<code class="codeph">CREATE</code> <code class="codeph">TYPE</code>语句来创建类型。可能需要执行此操作以创建使用该类型的只读实例化视图。
                     </p>
                     <p>如果选择此选项，则必须确保以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>该类型在物化视图数据库和主数据库中处于相同的模式中。</p>
                        </li>
                        <li>
                           <p>该类型在物化视图数据库和主数据库中具有相同顺序的相同属性。</p>
                        </li>
                        <li>
                           <p>该类型在物化视图数据库和主数据库中的每个属性具有相同的数据类型。</p>
                        </li>
                        <li>
                           <p>该类型在物化视图数据库和主数据库中具有相同的对象标识符。</p>
                        </li>
                     </ul>
                     <p>您可以通过查询<code class="codeph">DBA_TYPES</code>数据字典视图找到类型的对象标识符。例如，要查找<code class="codeph">cust_address_typ</code>的对象标识符（OID），请输入以下查询：</p><pre class="oac_no_warn" dir="ltr">SELECT TYPE_OID FROM DBA_TYPES WHERE TYPE_NAME ='CUST_ADDRESS_TYP'; TYPE_OID -------------------------------- 6F9BC33653681B7CE03400400B40A607</pre><p>例如，既然您知道master数据库中类型的OID，则可以完成以下步骤以在实例化视图数据库中创建类型：</p>
                     <ol>
                        <li>
                           <p>以在master数据库中拥有该类型的用户身份登录到物化视图数据库。如果物化视图数据库中不存在此用户，则创建用户。</p>
                        </li>
                        <li>
                           <p>发出<code class="codeph">CREATE</code> <code class="codeph">TYPE</code>语句并指定OID：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE oe.cust_address_typ OID'6F9BC33653681B7CE03400400B40A607'AS OBJECT（street_address VARCHAR2（40），postal_code VARCHAR2（10），city VARCHAR2（30），state_province VARCHAR2（10），country_id CHAR（2））; /</pre></li>
                     </ol>
                     <p>该类型现在可以在物化视图数据库中使用。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-52580CD0-2320-45BB-BCF1-89F4EA768291" title="具有用户定义数据类型的物化视图有特殊注意事项。">实体化视图和用户定义数据类型</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-84F76978-04A6-4A4D-9E6A-3D3514F59B5C" name="GUID-84F76978-04A6-4A4D-9E6A-3D3514F59B5C"></a><h4 id="ADMIN-GUID-84F76978-04A6-4A4D-9E6A-3D3514F59B5C" class="sect4">大师<span class="enumeration_section">36.10.3</span>柱子集与列对象</h4>
                  <div>
                     <p>只读实例化视图可以复制列对象的特定属性，而无需复制其他属性。</p>
                     <p>例如，使用上一节中描述的<code class="codeph">cust_address_typ</code>用户定义数据类型，假设在master数据库<code class="codeph">orc1.example.com</code>创建了<code class="codeph">customers_sub</code>主表：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE oe.customers_sub（customer_id NUMBER（6）PRIMARY KEY，cust_first_name VARCHAR2（20），cust_last_name VARCHAR2（20），cust_address oe.cust_address_typ）;</pre><p>您可以在远程物化视图数据库中创建以下只读物化视图：</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW oe.customers_mv1 AS SELECT customer_id，cust_last_name，c.cust_address.postal_code FROM oe.customers_sub@orc1.example.com c;</pre><p>注意， <code class="codeph">postal_code</code>属性是在指定<code class="codeph">cust_address</code>列对象。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-52580CD0-2320-45BB-BCF1-89F4EA768291" title="具有用户定义数据类型的物化视图有特殊注意事项。">实体化视图和用户定义数据类型</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-7F5570DE-EFD3-411B-BE36-F3041C47D551" name="GUID-7F5570DE-EFD3-411B-BE36-F3041C47D551"></a><h4 id="ADMIN-GUID-7F5570DE-EFD3-411B-BE36-F3041C47D551" class="sect4"><span class="enumeration_section">36.10.4</span>基于对象表的物化视图</h4>
                  <p>您可以基于对象表创建实例化视图。</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-33DAEE07-5EC9-49C2-BA95-F9E1213664A8">关于基于对象表的物化视图</a><br>如果物化视图基于对象表并使用<code class="codeph">OF</code> <span class="italic">类型</span>子句创建，则物化视图称为<span class="bold">对象物化视图</span> 。
                        </li>
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-17D4EE32-E494-4FAE-8499-16195D40F265">基于不使用OF类型子句创建的对象表的物化视图</a><br>如果在不使用<code class="codeph">OF</code> <span class="italic">类型</span>子句的情况下基于对象表创建实例化视图，则实例化视图将丢失它所基于的对象表的对象属性。
                        </li>
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-2CCD97C7-05F2-4E5E-9E64-CAD8122EA2D3">对象物化视图中的OID保留</a><br>对象物化视图继承其主体的对象标识符（OID）规范。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-52580CD0-2320-45BB-BCF1-89F4EA768291" title="具有用户定义数据类型的物化视图有特殊注意事项。">实体化视图和用户定义数据类型</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-33DAEE07-5EC9-49C2-BA95-F9E1213664A8" name="GUID-33DAEE07-5EC9-49C2-BA95-F9E1213664A8"></a><h5 id="ADMIN-GUID-33DAEE07-5EC9-49C2-BA95-F9E1213664A8" class="sect5"><span class="enumeration_section">36.10.4.1</span>关于基于对象表的物化视图</h5>
                     <div>
                        <p>如果物化视图基于对象表并使用<code class="codeph">OF</code> <span class="italic">类型</span>子句创建，则物化视图称为<span class="bold">对象物化视图</span> 。
                        </p>
                        <p>对象物化视图的构造方式与对象表相同。也就是说，对象物化视图由行对象组成。</p>
                        <p>如果在不使用<code class="codeph">OF</code> <span class="italic">类型</span>子句的情况下创建基于对象表的实例化视图，则实例化视图不是对象实体化视图。也就是说，这样的物化视图具有常规行，而不是行对象。
                        </p>
                        <p>要基于对象表创建物化视图，物化视图所依赖的类型必须存在于物化视图数据库中，并且每个类型必须具有与在master数据库中相同的对象标识符。</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-33DAEE07-5EC9-49C2-BA95-F9E1213664A8__GUID-5FD77D60-E225-47AA-A60B-EC0D80EF2E89">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="creating-and-managing-read-only-materialized-views.html#GUID-41870D29-1EB3-45FA-A9A8-FBEB3BA95971" title="创建只读的物化视图，以在物化视图数据库中复制主表的数据。">创建只读物化视图</a> ”</span>用于创建对象物化视图的示例</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-7F5570DE-EFD3-411B-BE36-F3041C47D551" title="您可以基于对象表创建实例化视图。">基于对象表的物化视图</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-17D4EE32-E494-4FAE-8499-16195D40F265" name="GUID-17D4EE32-E494-4FAE-8499-16195D40F265"></a><h5 id="ADMIN-GUID-17D4EE32-E494-4FAE-8499-16195D40F265" class="sect5"><span class="enumeration_section">36.10.4.2</span>基于不使用OF <span class="italic">类型</span>子句创建的对象表的物化视图</h5>
                     <div>
                        <p>如果在不使用<code class="codeph">OF</code> <span class="italic">类型</span>子句的情况下基于对象表创建实例化视图，则实例化视图将丢失它所基于的对象表的对象属性。
                        </p>
                        <p>也就是说，生成的只读实体化视图包含主表的一列或多列，但每行在关系表中充当一行。行不是行对象。</p>
                        <p>例如，您可以使用以下SQL语句基于<code class="codeph">categories_tab</code> master创建实例化视图：</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW oe.categories_relmv AS SELECT * FROM oe.categories_tab@orc1.example.com;</pre><p>在这种情况下，此物化视图中的行的功能与关系表中的行的功能相同。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-7F5570DE-EFD3-411B-BE36-F3041C47D551" title="您可以基于对象表创建实例化视图。">基于对象表的物化视图</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-2CCD97C7-05F2-4E5E-9E64-CAD8122EA2D3" name="GUID-2CCD97C7-05F2-4E5E-9E64-CAD8122EA2D3"></a><h5 id="ADMIN-GUID-2CCD97C7-05F2-4E5E-9E64-CAD8122EA2D3" class="sect5"><span class="enumeration_section">36.10.4.3</span>对象物化视图中的OID保留</h5>
                     <div>
                        <p>对象物化视图继承其主体的对象标识符（OID）规范。</p>
                        <p>如果主表具有基于主键的OID，则实例化视图中的行对象的OID是基于主键的。如果主表具有系统生成的OID，则物化视图中的行对象的OID是系统生成的。此外，对象物化视图中每行的OID与主表中相同行的OID匹配，并且在物化视图的刷新期间保留OID。因此，对象表中的行的<code class="codeph">REF</code>在物化视图数据库中保持有效。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-7F5570DE-EFD3-411B-BE36-F3041C47D551" title="您可以基于对象表创建实例化视图。">基于对象表的物化视图</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-306B2693-B88F-46D3-A8CA-43419B8B1F44" name="GUID-306B2693-B88F-46D3-A8CA-43419B8B1F44"></a><h4 id="ADMIN-GUID-306B2693-B88F-46D3-A8CA-43419B8B1F44" class="sect4"><span class="enumeration_section">36.10.5</span>带有集合列的物化视图</h4>
                  <div>
                     <p>集合列是基于varray和嵌套表数据类型的列。Oracle支持使用集合列创建物化视图。</p>
                     <p>如果集合列是嵌套表，则可以选择在物化视图创建期间指定<span class="italic">nested_table_storage_clause</span> 。<span class="italic">nested_table_storage_clause</span>允许您在<span class="italic">实例化视图中</span>指定嵌套表的存储表的名称。
                     </p>
                     <p>例如，假设您创建主表<code class="codeph">people_reltab</code>在主数据库<code class="codeph">orc1.example.com</code>包含嵌套表<code class="codeph">phones_ntab</code> ：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE oe.phone_typ AS OBJECT（location VARCHAR2（15），num VARCHAR2（14））; / CREATE TYPE oe.phone_ntabtyp AS TABLE of oe.phone_typ; / CREATE TABLE oe.people_reltab（id NUMBER（4）CONSTRAINT pk_people_reltab PRIMARY KEY，first_name VARCHAR2（20），last_name VARCHAR2（20），phones_ntab oe.phone_ntabtyp）NESTED TABLE phones_ntab STORE AS phone_store_ntab（（PRIMARY KEY（NESTED_TABLE_ID，location）） ）;</pre><p>请注意前面SQL语句的最后一行中的<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code>规范。如果计划基于其父表创建实例化视图，则必须为存储表指定主键。在这种情况下，存储表是<code class="codeph">phone_store_ntab</code> ，父表是<code class="codeph">people_reltab</code> 。
                     </p>
                     <p>要创建可以快速刷新的实例化视图，请在父表和存储表上创建实例化视图日志，并将嵌套表列指定为父表的实例化视图日志的过滤器列：</p><pre class="oac_no_warn" dir="ltr">创建物化视图登录oe.people_reltab; ALTER MATERIALIZED VIEW LOG ON oe.people_reltab ADD（phones_ntab）;使用PRIMARY KEY创建物料化视图登录oe.phone_store_ntab;</pre><p>在物化视图数据库中，创建所需类型，确保每种类型的对象标识符与master数据库中的对象标识符相同。然后，您可以基于<code class="codeph">people_reltab</code>创建<code class="codeph">people_reltab</code>化视图，并使用以下语句指定其存储表：</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW oe.people_reltab_mv NESTED TABLE phones_ntab STORE as phone_store_ntab_mv REFRESH FAST AS SELECT * FROM oe.people_reltab@orc1.example.com;</pre><p>在这种情况下， <span class="italic">nested_table_storage_clause</span>是在前一个示例中以“ <code class="codeph">NESTED</code> <code class="codeph">TABLE</code> ”开头的行，它指定存储表的名称为<code class="codeph">phone_store_ntab_mv</code> 。 <span class="italic">nested_table_storage_clause</span>是可选的。如果未指定此子句，则Oracle数据库会自动为存储表命名。要查看存储表的名称，请查询<code class="codeph">DBA_NESTED_TABLES</code>数据字典表。
                     </p>
                     <p>存储表：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>是一个单独的辅助物化视图</p>
                        </li>
                        <li>
                           <p>刷新包含嵌套表的实例化视图时会自动刷新</p>
                        </li>
                        <li>
                           <p>删除包含嵌套表的实例化视图时会自动删除</p>
                        </li>
                        <li>
                           <p>继承主存储表的主键约束</p>
                        </li>
                     </ul>
                     <p>由于存储表继承了主表的存储表的主键约束，因此不要在<code class="codeph">STORE</code> <code class="codeph">AS</code>子句中指定<code class="codeph">PRIMARY</code> <code class="codeph">KEY</code> 。
                     </p>
                     <p>在物化视图中的嵌套表的存储表上不允许直接执行以下操作：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>刷新存储表</p>
                        </li>
                        <li>
                           <p>更改存储表</p>
                        </li>
                        <li>
                           <p>删除存储表</p>
                        </li>
                        <li>
                           <p>在存储表上生成复制支持</p>
                        </li>
                     </ul>
                     <p>在包含嵌套表的实例化视图上执行这些操作时，可以间接发生这些操作。此外，您无法复制存储表中的列的子集。</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-5DC6A685-CC4F-4C98-ACBC-C17C33858C16">带有集合列的物化视图的限制</a><br>限制适用于具有集合列的物化视图。
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-306B2693-B88F-46D3-A8CA-43419B8B1F44__GUID-66A3816E-9384-4F91-9559-1CD65844CBD1">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<span class="italic">nested_table_col_properties的</span>更多信息，请<span class="italic">参阅</span> <a href="../sqlrf/ALTER-TABLE.html#SQLRF53214" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> ，该文档在<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>语句中有详细说明</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-52580CD0-2320-45BB-BCF1-89F4EA768291" title="具有用户定义数据类型的物化视图有特殊注意事项。">实体化视图和用户定义数据类型</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-5DC6A685-CC4F-4C98-ACBC-C17C33858C16" name="GUID-5DC6A685-CC4F-4C98-ACBC-C17C33858C16"></a><h5 id="ADMIN-GUID-5DC6A685-CC4F-4C98-ACBC-C17C33858C16" class="sect5"><span class="enumeration_section">36.10.5.1</span>带有集合列的物化视图的限制</h5>
                     <div>
                        <p>限制适用于具有集合列的物化视图。</p>
                        <p>以下限制适用：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>不允许对集合列进行行子集化。但是，您可以在嵌套表的父表上使用行子集，这样做可能会导致实例化视图中嵌套表的子集。</p>
                           </li>
                           <li>
                              <p>不允许对集合列进行列子集。</p>
                           </li>
                           <li>
                              <p>嵌套表的存储表必须具有主键。</p>
                           </li>
                           <li>
                              <p>要快速刷新嵌套表的父表，父表和嵌套表的存储表都必须具有物化视图日志。</p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-306B2693-B88F-46D3-A8CA-43419B8B1F44" title="集合列是基于varray和嵌套表数据类型的列。Oracle支持使用集合列创建物化视图。">具有集合列的物化视图</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-A5FB1CBF-E221-4EB7-ADDE-9F5EAE1E863F" name="GUID-A5FB1CBF-E221-4EB7-ADDE-9F5EAE1E863F"></a><h4 id="ADMIN-GUID-A5FB1CBF-E221-4EB7-ADDE-9F5EAE1E863F" class="sect4"><span class="enumeration_section">36.10.6</span>带REF列的物化视图</h4>
                  <p>物化视图可以包含<code class="codeph">REF</code>列。
                  </p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-40F5445B-CAFE-476B-B39F-69B199024BB7">关于带REF列的物化视图</a><br>您可以使用<code class="codeph">REF</code>列创建实体化视图。<code class="codeph">REF</code>是Oracle内置数据类型，它是对象表中行对象的逻辑“指针”。
                        </li>
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-65D6A665-A693-48CB-961C-8F983796F569">Scoped REF色谱柱</a><br>如果要基于具有作用域<code class="codeph">REF</code>列的主表创建实例化视图，则可以将<code class="codeph">REF</code>重新扫描到实例化视图数据库中的其他对象表或对象实例化视图。
                        </li>
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-A0264465-33AD-4246-BE3E-320975A776C4">无范围的REF色谱柱</a><br>如果基于具有未作用域<code class="codeph">REF</code>列的远程主表创建物化视图，则在物化视图中创建<code class="codeph">REF</code>列，但<code class="codeph">REF</code>被视为悬空，因为它们指向远程数据库。
                        </li>
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-B995D651-2D79-4EF4-97E2-1BDA1C332B05">在物化视图日志中记录REF列</a><br>如有必要，您可以在物化视图日志中记录<code class="codeph">REF</code>列。
                        </li>
                        <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-5325AA68-7DD9-49F4-83DE-C74E062D3375">使用WITH ROWID子句创建的REF</a><br>如果为<code class="codeph">REF</code>列指定了<code class="codeph">WITH</code> <code class="codeph">ROWID</code>子句，则Oracle数据库会维护<code class="codeph">REF</code>引用的对象的rowid。</li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-52580CD0-2320-45BB-BCF1-89F4EA768291" title="具有用户定义数据类型的物化视图有特殊注意事项。">实体化视图和用户定义数据类型</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-40F5445B-CAFE-476B-B39F-69B199024BB7" name="GUID-40F5445B-CAFE-476B-B39F-69B199024BB7"></a><h5 id="ADMIN-GUID-40F5445B-CAFE-476B-B39F-69B199024BB7" class="sect5"><span class="enumeration_section">36.10.6.1</span>关于带REF列的物化视图</h5>
                     <div>
                        <p>您可以使用<code class="codeph">REF</code>列创建实体化视图。<code class="codeph">REF</code>是Oracle内置数据类型，它是对象表中行对象的逻辑“指针”。
                        </p>
                        <p>范围内的<code class="codeph">REF</code>是一个<code class="codeph">REF</code> ，它只能包含对指定对象表的引用，而未范围内的<code class="codeph">REF</code>可以包含对数据库中基于相应对象类型的任何对象表的引用。范围内的<code class="codeph">REF</code>需要较少的存储空间，并且提供比未范围的<code class="codeph">REF</code>更高效的访问。</p>
                        <p>在创建实例化视图期间，您可以将<code class="codeph">REF</code>列重新映射到物化视图数据库中的本地物化视图或表。如果不重新扫描<code class="codeph">REF</code>列，则它将继续指向远程主表。无范围的<code class="codeph">REF</code>列始终继续指向主表。当物化视图数据库中的<code class="codeph">REF</code>列指向远程主表时， <code class="codeph">REF</code>被视为悬空。在SQL中，取消引用悬空<code class="codeph">REF</code>返回<code class="codeph">NULL</code> 。此外，PL / SQL仅通过使用<code class="codeph">UTL_OBJECT</code>包支持解除引用<code class="codeph">REF</code> ，并为悬空<code class="codeph">REF</code>引发异常。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-A5FB1CBF-E221-4EB7-ADDE-9F5EAE1E863F" title="物化视图可以包含REF列。">具有REF列的物化视图</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-65D6A665-A693-48CB-961C-8F983796F569" name="GUID-65D6A665-A693-48CB-961C-8F983796F569"></a><h5 id="ADMIN-GUID-65D6A665-A693-48CB-961C-8F983796F569" class="sect5"><span class="enumeration_section">36.10.6.2</span> Scoped REF色谱柱</h5>
                     <div>
                        <p>如果要基于具有作用域<code class="codeph">REF</code>列的主表创建实例化视图，则可以将<code class="codeph">REF</code>重新扫描到实例化视图数据库中的其他对象表或对象实例化视图。
                        </p>
                        <p>通常，您可以将<code class="codeph">REF</code>列重新扫描到本地对象物化视图而不是原始远程对象表。要重新生成实例化视图，可以在<code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>语句中使用<code class="codeph">SCOPE</code> <code class="codeph">FOR</code>子句，也可以在<code class="codeph">CREATE</code>实例化视图后使用<code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>语句。如果不重新扫描<code class="codeph">REF</code>列，则实例化视图将保留主表的<code class="codeph">REF</code>范围。
                        </p>
                        <p>例如，假设您使用以下语句在<code class="codeph">orc1.example.com</code>主数据库中创建<code class="codeph">customers_with_ref</code>主表：</p><pre class="oac_no_warn" dir="ltr">- 创建用户定义的数据类型cust_address_typ。CREATE TYPE oe.cust_address_typ AS OBJECT（street_address VARCHAR2（40），postal_code VARCHAR2（10），city VARCHAR2（30），state_province VARCHAR2（10），country_id CHAR（2））; /  - 创建对象表cust_address_objtab。CREATE TABLE oe.cust_address_objtab OF oe.cust_address_typ; - 使用REF创建表到cust_address_typ。CREATE TABLE oe.customers_with_ref（customer_id NUMBER（6）PRIMARY KEY，cust_first_name VARCHAR2（20），cust_last_name VARCHAR2（20），cust_address REF oe.cust_address_typ SCOPE IS oe.cust_address_objtab）;</pre><p>假设<code class="codeph">cust_address_typ</code>存在于物化视图数据库中，其对象标识符与master数据库中的类型相同，则可以使用以下语句创建<code class="codeph">cust_address_objtab_mv</code>对象物化视图：</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW oe.cust_address_objtab_mv oe.cust_address_typ AS SELECT * FROM oe.cust_address_objtab@orc1.example.com;</pre><p>现在，您可以使用以下语句创建<code class="codeph">customers_with_ref</code>主表的物化视图，并将<code class="codeph">REF</code>重新<code class="codeph">cust_address_objtab_mv</code>到<code class="codeph">cust_address_objtab_mv</code>物化视图：</p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED VIEW oe.customers_with_ref_mv（SCOPE FOR（cust_address）IS oe.cust_address_objtab_mv）AS SELECT * FROM oe.customers_with_ref@orc1.example.com;</pre><p>要在创建<code class="codeph">SCOPE</code>化视图时使用<code class="codeph">SCOPE</code> <code class="codeph">FOR</code>子句，请记住首先创建在<code class="codeph">SCOPE</code> <code class="codeph">FOR</code>子句中指定的<code class="codeph">SCOPE</code>化视图或表。否则，您无法在物化视图创建期间指定<code class="codeph">SCOPE</code> <code class="codeph">FOR</code>子句。例如，如果你创造了<code class="codeph">customers_with_ref_mv</code>物化视图创建之前<code class="codeph">cust_address_objtab_mv</code>物化视图，那么你就不能使用<code class="codeph">SCOPE</code> <code class="codeph">FOR</code>当你创建的第<code class="codeph">customers_with_ref_mv</code>物化视图。在这种情况下， <code class="codeph">REF</code>被认为是悬空的，因为它们指向远程主数据库中的对象表。
                        </p>
                        <p>但是，即使在创建实例化视图时未使用<code class="codeph">SCOPE</code> <code class="codeph">FOR</code>子句，也可以更改实例化视图以指定<code class="codeph">SCOPE</code> <code class="codeph">FOR</code>子句。例如，您可以使用以下语句更改<code class="codeph">customers_with_ref_mv</code>物化视图：</p><pre class="oac_no_warn" dir="ltr">ALTER MATERIALIZED VIEW oe.customers_with_ref_mv MODIFY SCOPE FOR（cust_address）IS oe.cust_address_objtab_mv;</pre></div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-A5FB1CBF-E221-4EB7-ADDE-9F5EAE1E863F" title="物化视图可以包含REF列。">具有REF列的物化视图</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-A0264465-33AD-4246-BE3E-320975A776C4" name="GUID-A0264465-33AD-4246-BE3E-320975A776C4"></a><h5 id="ADMIN-GUID-A0264465-33AD-4246-BE3E-320975A776C4" class="sect5"><span class="enumeration_section">36.10.6.3</span>无结构REF色谱柱</h5>
                     <p>如果基于具有未作用域<code class="codeph">REF</code>列的远程主表创建物化视图，则在物化视图中创建<code class="codeph">REF</code>列，但<code class="codeph">REF</code>被视为悬空，因为它们指向远程数据库。
                     </p>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-A5FB1CBF-E221-4EB7-ADDE-9F5EAE1E863F" title="物化视图可以包含REF列。">具有REF列的物化视图</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-B995D651-2D79-4EF4-97E2-1BDA1C332B05" name="GUID-B995D651-2D79-4EF4-97E2-1BDA1C332B05"></a><h5 id="ADMIN-GUID-B995D651-2D79-4EF4-97E2-1BDA1C332B05" class="sect5"><span class="enumeration_section">36.10.6.4</span>在物化视图日志中记录REF列</h5>
                     <div>
                        <p>如有必要，您可以在物化视图日志中记录<code class="codeph">REF</code>列。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-B995D651-2D79-4EF4-97E2-1BDA1C332B05__GUID-542AECAD-491C-4BFD-8E13-F6AC6C705EE6">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="planning-for-read-only-materialized-views.html#GUID-FAAF0273-7321-4FD0-8A5D-A3A8364E10F9" title="创建实例化视图日志时，可以向日志添加列以快速刷新实例化视图。">在物化视图日志中记录列</a> ”</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-A5FB1CBF-E221-4EB7-ADDE-9F5EAE1E863F" title="物化视图可以包含REF列。">具有REF列的物化视图</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-5325AA68-7DD9-49F4-83DE-C74E062D3375" name="GUID-5325AA68-7DD9-49F4-83DE-C74E062D3375"></a><h5 id="ADMIN-GUID-5325AA68-7DD9-49F4-83DE-C74E062D3375" class="sect5"><span class="enumeration_section">36.10.6.5</span>使用WITH ROWID子句创建的REF</h5>
                     <div>
                        <p>如果为<code class="codeph">REF</code>列指定了<code class="codeph">WITH</code> <code class="codeph">ROWID</code>子句，则Oracle数据库会维护<code class="codeph">REF</code>引用的对象的rowid。</p>
                        <p>Oracle数据库可以使用<code class="codeph">REF</code>包含的rowid直接找到引用的对象，而无需从OID索引中获取rowid。因此，您使用<code class="codeph">WITH</code> <code class="codeph">ROWID</code>子句指定rowid提示。范围内的<code class="codeph">REF</code>不支持<code class="codeph">WITH</code> <code class="codeph">ROWID</code>子句。
                        </p>
                        <p>复制使用<code class="codeph">WITH</code> <code class="codeph">ROWID</code>子句创建的<code class="codeph">REF</code>导致每个复制数据库中的rowid提示不正确，但首次创建或修改<code class="codeph">REF</code>数据库除外。<code class="codeph">REF</code>的<code class="codeph">ROWID</code>信息在其他数据库中没有意义，Oracle数据库不会自动更正rowid提示。无效的rowid提示可能会导致性能问题。在这种情况下，您可以使用<code class="codeph">ANALYZE</code> <code class="codeph">TABLE</code>语句的<code class="codeph">VALIDATE</code> <code class="codeph">STRUCTURE</code>选项来确定每个复制数据库中哪些rowid提示不正确。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-5325AA68-7DD9-49F4-83DE-C74E062D3375__GUID-5903FB80-70DF-47E9-AC6F-C222CB14C6D7">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">ANALYZE</code> <code class="codeph">TABLE</code>语句的更多信息，请<a href="../sqlrf/ANALYZE.html#SQLRF01105" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-A5FB1CBF-E221-4EB7-ADDE-9F5EAE1E863F" title="物化视图可以包含REF列。">具有REF列的物化视图</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-08C1AA5F-4681-41B5-BCE8-5E586ED644AC" name="GUID-08C1AA5F-4681-41B5-BCE8-5E586ED644AC"></a><h3 id="ADMIN-GUID-08C1AA5F-4681-41B5-BCE8-5E586ED644AC" class="sect3"><span class="enumeration_section">36.11</span>主数据库中的物化视图注册</h3>
               <p>在主数据库中，Oracle数据库会根据其主表自动注册有关实例化视图的信息。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-C3A4F5C6-D543-463D-8635-8E3CDAAB4128">查看已注册的物化视图的信息</a><br>物化视图在其主数据库中注册。
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-9AFD2B18-2C2C-493F-80F9-6EE7C70F7D85">内部机制</a><br>在创建实例化视图时，Oracle数据库会自动在其主数据库中注册实例化视图，并在删除实例化视图时取消注册实例化视图。
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-concepts.html#GUID-8380D7D3-11E2-4166-8204-2EB058A9B181">手动物化视图注册</a><br>如有必要，您可以手动维护注册。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-A422B474-4BED-4A60-AEDB-E93630746083" title="理解与只读物化视图相关的概念。">只读实体化视图概念</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-C3A4F5C6-D543-463D-8635-8E3CDAAB4128" name="GUID-C3A4F5C6-D543-463D-8635-8E3CDAAB4128"></a><h4 id="ADMIN-GUID-C3A4F5C6-D543-463D-8635-8E3CDAAB4128" class="sect4"><span class="enumeration_section">36.11.1</span>查看已注册的物化视图的信息</h4>
                  <div>
                     <p>物化视图在其主数据库中注册。</p>
                     <div class="section">
                        <p>您可以在主数据库中查询<code class="codeph">DBA_REGISTERED_MVIEWS</code>数据字典视图，以列出有关远程<code class="codeph">DBA_REGISTERED_MVIEWS</code>视图的以下信息：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>包含实例化视图的所有者，名称和数据库</p>
                           </li>
                           <li>
                              <p>物化视图定义查询</p>
                           </li>
                           <li>
                              <p>其他物化视图特征，例如其刷新方法</p>
                           </li>
                        </ul>
                        <p>您还可以在主数据库中查询<code class="codeph">DBA_MVIEW_REFRESH_TIMES</code>视图，以获取每个物化视图的上次刷新时间。如果必须删除，更改或重新定位主表，管理员可以使用此信息来监视物化视图活动并协调对物化视图数据库的更改。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-08C1AA5F-4681-41B5-BCE8-5E586ED644AC" title="在主数据库中，Oracle数据库会根据其主表自动注册有关实例化视图的信息。">主数据库中的物化视图注册</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-9AFD2B18-2C2C-493F-80F9-6EE7C70F7D85" name="GUID-9AFD2B18-2C2C-493F-80F9-6EE7C70F7D85"></a><h4 id="ADMIN-GUID-9AFD2B18-2C2C-493F-80F9-6EE7C70F7D85" class="sect4"><span class="enumeration_section">36.11.2</span>内部机制</h4>
                  <div>
                     <p>在创建实例化视图时，Oracle数据库会自动在其主数据库中注册实例化视图，并在删除实例化视图时取消注册实例化视图。</p>
                     <div class="infoboxnote" id="GUID-9AFD2B18-2C2C-493F-80F9-6EE7C70F7D85__GUID-E638E643-0C7B-4961-ABA3-D23384B4E090">
                        <p class="notep1">注意：</p>
                        <p>在创建或删除实例化视图期间，Oracle数据库无法保证在其主数据库中注册或取消注册实例化视图。如果Oracle数据库在创建期间无法成功注册<code class="codeph">DBMS_MVIEW</code>化视图，则必须使用<code class="codeph">DBMS_MVIEW</code>包中的<code class="codeph">REGISTER_MVIEW</code>过程手动完成注册。如果删除实例化视图时Oracle数据库无法成功取消注册实例化视图，则实体化视图的注册信息将保留在master数据库中，直到手动取消注册为止。复杂的物化视图可能无法注册。
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-08C1AA5F-4681-41B5-BCE8-5E586ED644AC" title="在主数据库中，Oracle数据库会根据其主表自动注册有关实例化视图的信息。">主数据库中的物化视图注册</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-8380D7D3-11E2-4166-8204-2EB058A9B181" name="GUID-8380D7D3-11E2-4166-8204-2EB058A9B181"></a><h4 id="ADMIN-GUID-8380D7D3-11E2-4166-8204-2EB058A9B181" class="sect4"><span class="enumeration_section">36.11.3</span>手动物化视图注册</h4>
                  <div>
                     <p>如有必要，您可以手动维护注册。</p>
                     <p>使用master数据库中<code class="codeph">DBMS_MVIEW</code>程序包的<code class="codeph">REGISTER_MVIEW</code>和<code class="codeph">UNREGISTER_MVIEW</code>过程添加，修改或删除物化视图注册信息。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-8380D7D3-11E2-4166-8204-2EB058A9B181__GUID-F0FF1666-915A-4EBB-9913-3FBB4EE755B2">
                        <p class="notep1">也可以看看：</p>
                        <p><code class="codeph">REGISTER_MVIEW</code>和<code class="codeph">UNREGISTER_MVIEW</code>过程在<a href="../arpls/DBMS_MVIEW.html#ARPLS027" target="_blank"><span class="variable" translate="no">Oracle Database PL/SQL Packages and Types Reference</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-concepts.html#GUID-08C1AA5F-4681-41B5-BCE8-5E586ED644AC" title="在主数据库中，Oracle数据库会根据其主表自动注册有关实例化视图的信息。">主数据库中的物化视图注册</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
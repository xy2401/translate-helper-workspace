<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>在PL / SQL中声明和初始化对象</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Object-Relational Developer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Object-Relational Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="object-relational-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T02:05:10-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96436-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="using-pl-sql-with--object-types.html" title="Previous" type="text/html"></link>
      <link rel="next" href="object-manipulation-in-plsql.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Object-Relational Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADOBJ"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="using-pl-sql-with--object-types.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="object-manipulation-in-plsql.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">对象关系开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="using-pl-sql-with--object-types.html" property="item" typeof="WebPage"><span property="name">将PL / SQL与对象类型一起使用</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">在PL / SQL中声明和初始化对象</li>
            </ol>
            <a id="GUID-AA6DEB60-3D57-44CE-B0F6-D1AEC0B47AE0" name="GUID-AA6DEB60-3D57-44CE-B0F6-D1AEC0B47AE0"></a><a id="ADOBJ07001"></a>
            
            <h2 id="ADOBJ-GUID-AA6DEB60-3D57-44CE-B0F6-D1AEC0B47AE0" class="sect2"><span class="enumeration_section">3.1</span>在PL / SQL中声明和初始化对象</h2>
         </header>
         <div class="ind">
            <div>
               <p>在PL / SQL块，子程序或包中使用对象类型分为两步。</p>
               <ol>
                  <li>
                     <p>您必须使用SQL语句<code class="codeph">CREATE TYPE</code> ，SQL * Plus或其他类似程序来定义对象类型。
                     </p>
                     <p>在模式中定义并安装对象类型后，可以在任何PL / SQL块，子程序或包中使用它。</p>
                  </li>
                  <li>
                     <p>在PL / SQL中，然后声明一个变量，其数据类型是您刚刚定义的用户定义类型或ADT。</p>
                  </li>
               </ol>
               <p>对象或ADT遵循通常的范围和实例化规则。</p>
               <div class="infoboxnotealso" id="GUID-AA6DEB60-3D57-44CE-B0F6-D1AEC0B47AE0__GUID-CCDA6775-2CBC-45A6-A51C-D98E57036D7E">
                  <p class="notep1">也可以看看：</p>
                  <p><span class="q">“ <a href="key-features-object-relational-model.html#GUID-0C7CE261-467B-4F8B-A04D-B0900E1FB284" title="对象类型是一种数据类型。">关于对象类型</a> ”</span></p>
               </div>
            </div><a id="ADOBJ7172"></a><a id="ADOBJ7171"></a><div class="props_rev_3"><a id="GUID-844171F2-515B-4345-B667-679803BF5FC4" name="GUID-844171F2-515B-4345-B667-679803BF5FC4"></a><h3 id="ADOBJ-GUID-844171F2-515B-4345-B667-679803BF5FC4" class="sect3"><span class="enumeration_section">3.1.1</span>定义对象类型</h3>
               <div>
                  <div class="section">
                     <p>您可以使用<code class="codeph">CREATE TYPE</code>定义对象类型。</p>
                     <p><a href="declaring-initializing-objects-in-plsql.html#GUID-844171F2-515B-4345-B667-679803BF5FC4__CIHGJHHA">例3-1</a>提供了两种对象类型和一个对象类型表。后续示例显示如何在PL / SQL中声明这些对象类型的变量，并使用这些对象执行其他操作。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-844171F2-515B-4345-B667-679803BF5FC4__CIHGJHHA">
                     <p class="titleinexample">示例3-1使用对象类型</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE address_typ AS OBJECT（street VARCHAR2（30），city VARCHAR2（20），state CHAR（2），postal_code VARCHAR2（6））; / CREATE TYPE employee_typ AS OBJECT（employee_id NUMBER（6），first_name VARCHAR2（20），last_name VARCHAR2（25），电子邮件VARCHAR2（25），phone_number VARCHAR2（20），hire_date DATE，job_id VARCHAR2（10），工资NUMBER（8） ，2），commission_pct NUMBER（2,2），manager_id NUMBER（6），department_id NUMBER（4），地址address_typ，MAP成员函数get_idno返回编号，成员程序display_address（SELF IN OUT NOCOPY employee_typ））; / CREATE TYPE BODY employee_typ AS MAP会员功能get_idno返回号码是BEGIN RETURN employee_id;结束;成员程序display_address（SELF IN OUT NOCOPY employee_typ）IS BEGIN DBMS_OUTPUT.PUT_LINE（first_name ||''|| last_name）; DBMS_OUTPUT.PUT_LINE（address.street）; DBMS_OUTPUT.PUT_LINE（address.city ||'，'|| address.state ||''|| address.postal_code）;结束;结束; / CREATE TABLE employee_tab OF employee_typ;</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="ADOBJ7174"></a><a id="ADOBJ7173"></a><div class="props_rev_3"><a id="GUID-FA468D73-0858-484F-B1BF-2811215F3632" name="GUID-FA468D73-0858-484F-B1BF-2811215F3632"></a><h3 id="ADOBJ-GUID-FA468D73-0858-484F-B1BF-2811215F3632" class="sect3"><span class="enumeration_section">3.1.2</span>声明PL / SQL块中的对象</h3>
               <div>
                  <div class="section">
                     <p>只要可以使用<code class="codeph">CHAR</code>或<code class="codeph">NUMBER</code>等内置类型，就可以使用对象或ADT。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>以声明内置类型的方式声明对象。</p>
                        </li>
                     </ul>
                     <p><a href="declaring-initializing-objects-in-plsql.html#GUID-FA468D73-0858-484F-B1BF-2811215F3632__BABIHHCG">例3-2</a>声明了<code class="codeph">employee_typ</code>类型的对象<code class="codeph">emp</code> 。然后，对象类型<code class="codeph">employee_typ</code>的构造函数初始化对象。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-FA468D73-0858-484F-B1BF-2811215F3632__BABIHHCG">
                     <p class="titleinexample">示例3-2在PL / SQL块中声明对象</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。3-1 DECLARE emp employee_typ; -  emp原子为空BEGIN  - 调用employee_typ的构造函数emp：= employee_typ（315，'Francis'，'Logan'，'FLOGAN'，'415.555.0100'，'01 -MAY-04'，'SA_MAN' ，11000，.15,101,110，address_typ（'376 Mission'，'San Francisco'，'CA'，'94222'））; DBMS_OUTPUT.PUT_LINE（emp.first_name ||''|| emp.last_name）; - 显示详细信息emp.display_address（）; - 调用对象方法显示细节END; /</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <p>PL / SQL子程序的形式参数可以具有用户定义类型的数据类型。因此，您可以将对象传递给存储的子程序以及从一个子程序传递到另一个子程序。</p>
                     <p>在下一个代码行中，对象类型<code class="codeph">employee_typ</code>指定形式参数的数据类型：</p>
                     <p><code class="codeph">程序open_acct（new_acct IN OUT employee_typ）是......</code></p>
                     <p>在此代码行中，对象类型<code class="codeph">employee_typ</code>指定函数的返回类型：</p>
                     <p><code class="codeph">功能get_acct（acct_id IN NUMBER）RETURN employee_typ IS ...</code></p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADOBJ7175"></a><div class="props_rev_3"><a id="GUID-23135172-82E2-4C3E-800D-E584B43B578E" name="GUID-23135172-82E2-4C3E-800D-E584B43B578E"></a><h3 id="ADOBJ-GUID-23135172-82E2-4C3E-800D-E584B43B578E" class="sect3"><span class="enumeration_section">3.1.3</span> PL / SQL如何处理未初始化的对象</h3>
               <div>
                  <p>用户定义的类型，就像集合一样，在原子上为null，直到通过调用其对象类型的构造函数来初始化对象。也就是说，对象本身是null，而不仅仅是它的属性。</p>
                  <p>将null对象与任何其他对象进行比较总会产生<code class="codeph">NULL</code> 。此外，如果将原子空对象分配给另一个对象，则另一个对象将自动变为空（并且必须重新初始化）。同样，如果将非值<code class="codeph">NULL</code>指定给对象，则该对象将自动变为空。
                  </p>
                  <p>在表达式中，未初始化对象的属性求值为<code class="codeph">NULL</code> 。当应用于未初始化的对象或其属性时， <code class="codeph">IS</code> <code class="codeph">NULL</code>比较运算符产生<code class="codeph">TRUE</code> 。</p>
                  <p>有关null对象和具有null属性的对象的说明，请参见<a href="Sql-object-types-and-references.html#GUID-821233F6-ABA9-4100-B5E4-937F7DC57102__CIHGJFGD">示例2-1</a> 。
                  </p>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
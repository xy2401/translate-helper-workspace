<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Transporting data moves the data from one database to another."></meta>
      <meta name="description" content="Transporting data moves the data from one database to another."></meta>
      <title>传输数据</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Administrator’s Guide "></meta>
      <meta property="og:description" content="Transporting data moves the data from one database to another."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Administrator’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-14T11:02:35-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96348-04"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="managing-data-files-and-temp-files.html" title="Previous" type="text/html"></link>
      <link rel="next" href="managing-undo.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADMIN"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-data-files-and-temp-files.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="managing-undo.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-database-structure-and-storage.html" property="item" typeof="WebPage"><span property="name">Oracle数据库结构和存储</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">传输数据</li>
            </ol>
            <a id="GUID-1901E9C3-8FCE-4D4E-AB65-34D703474E52" name="GUID-1901E9C3-8FCE-4D4E-AB65-34D703474E52"></a><a id="ADMIN13721"></a>
            
            <h2 id="ADMIN-GUID-1901E9C3-8FCE-4D4E-AB65-34D703474E52" class="sect2"><span class="enumeration_chapter">15</span>运输数据</h2>
         </header>
         <div class="ind">
            <p>传输数据会将数据从一个数据库移动到另一个数据库。</p>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="transporting-data.html#GUID-C8044A0E-B870-4F21-8D46-5CE5EFE7F0D9">关于传输数据</a><br>您可以在以下级别传输数据：数据库，表空间，表，分区和子分区。
                  </li>
                  <li class="ulchildlink"><a href="transporting-data.html#GUID-399ECCDE-1E8C-432E-AACD-6DE2AD6A4B26">传输数据库</a><br>您可以将数据库传输到新的Oracle数据库实例。
                  </li>
                  <li class="ulchildlink"><a href="transporting-data.html#GUID-F7B2B591-AA88-4D16-8DCF-712763923FFB">在数据库之间传输表空间</a><br>您可以在数据库之间传输表空间。
                  </li>
                  <li class="ulchildlink"><a href="transporting-data.html#GUID-E1270F3E-2476-44C2-A721-6A456A372379">在数据库之间传输表，分区或子分区</a><br>您可以在数据库之间传输表，分区和子分区。
                  </li>
                  <li class="ulchildlink"><a href="transporting-data.html#GUID-E4B0F929-79D0-4DEE-B1DD-378BDBC31A0B">在平台之间转换数据</a><br>当您执行可传输操作，并且源平台和目标平台具有不同的字节顺序时，您必须将传输的数据转换为目标平台格式。如果源平台和目标平台具有相同的字节顺序，则不需要进行数据转换。您可以使用<code class="codeph">DBMS_FILE_TRANSFER</code>包或RMAN <code class="codeph">CONVERT</code>命令来转换数据。
                  </li>
                  <li class="ulchildlink"><a href="transporting-data.html#GUID-4F6AE634-053F-4CA9-AB53-7DA8B0047699">传输数据文件的准则</a><br>传输数据文件时，应遵循一套准则。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="oracle-database-structure-and-storage.html#GUID-F11D30A7-BF12-4D8F-A1C2-D7437D38F8C7" title="您可以创建和管理数据库结构和存储组件。">Oracle数据库结构和存储</a></p>
                  </div>
               </div>
            </div>
            <a id="ADMIN13722"></a><div class="props_rev_3"><a id="GUID-C8044A0E-B870-4F21-8D46-5CE5EFE7F0D9" name="GUID-C8044A0E-B870-4F21-8D46-5CE5EFE7F0D9"></a><h3 id="ADMIN-GUID-C8044A0E-B870-4F21-8D46-5CE5EFE7F0D9" class="sect3"><span class="enumeration_section">15.1</span>关于传输数据</h3>
               <p>您可以在以下级别传输数据：数据库，表空间，表，分区和子分区。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="transporting-data.html#GUID-6410B400-0B7E-4772-9BC0-DFC976240190">传输数据的目的</a><br>传输数据比执行相同数据的导出/导入或卸载/加载要快得多。它更快，因为对于用户定义的表空间，包含所有实际数据的数据文件将复制到目标位置，并且您使用Data Pump仅将数据库对象的元数据传输到新数据库。
                     </li>
                     <li class="ulchildlink"><a href="transporting-data.html#GUID-DE09D211-D0C8-481A-9ECE-1F4B702E9452">传输数据：场景</a><br>在几种情况下，传输数据非常有用。
                     </li>
                     <li class="ulchildlink"><a href="transporting-data.html#GUID-FE3003B9-605A-4269-B167-005AC778C870">跨平台传输数据</a><br>您可以跨平台传输数据。
                     </li>
                     <li class="ulchildlink"><a href="transporting-data.html#GUID-28800719-6CB9-4A71-95DD-4B61AA603173">传输数据的一般限制</a><br>传输数据存在一般限制。还存在特定于完全可传输导出/导入，可传输表空间或可传输表的限制。
                     </li>
                     <li class="ulchildlink"><a href="transporting-data.html#GUID-AC5C8D9D-796A-4EDE-AC35-AF963ECCFE5C">传输数据的兼容性注意事项</a><br>传输数据时，Oracle数据库会计算目标数据库必须运行的最低兼容级别。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-1901E9C3-8FCE-4D4E-AB65-34D703474E52" title="传输数据会将数据从一个数据库移动到另一个数据库。">传输数据</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN13723"></a><div class="props_rev_3"><a id="GUID-6410B400-0B7E-4772-9BC0-DFC976240190" name="GUID-6410B400-0B7E-4772-9BC0-DFC976240190"></a><h4 id="ADMIN-GUID-6410B400-0B7E-4772-9BC0-DFC976240190" class="sect4"><span class="enumeration_section">15.1.1</span>传输数据的目的</h4>
                  <div>
                     <p>传输数据比执行相同数据的导出/导入或卸载/加载要快得多。它更快，因为对于用户定义的表空间，包含所有实际数据的数据文件将复制到目标位置，并且您使用Data Pump仅将数据库对象的元数据传输到新数据库。</p>
                     <p>您可以传输以下任何级别的数据：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>数据库</p>
                           <p>您可以使用<span class="bold">完全可传输的导出/导入</span>功能将整个数据库移动到其他数据库实例。
                           </p>
                        </li>
                        <li>
                           <p>表空间</p>
                           <p>您可以使用可<span class="bold">传输表空间</span>功能在数据库之间移动一组表空间。
                           </p>
                        </li>
                        <li>
                           <p>表，分区和子分区</p>
                           <p>您可以使用可<span class="bold">传输表</span>功能在数据库之间移动一组表，分区和子分区。
                           </p>
                        </li>
                     </ul>
                     <p>可传输表空间和可传输表仅传输驻留在用户定义的表空间中的数据。但是，完全可传输的导出/导入传输驻留在用户定义和管理表空间（如<code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code> 。完全可传输的导出/导入传输用户定义的表空间中包含的对象的元数据，以及管理表空间中包含的用户定义的对象的元数据和数据。具体而言，对于完全可传输的导出/导入，导出转储文件仅包含用户定义的表空间中包含的对象的元数据，但它包括管理表空间中包含的用户定义对象的元数据和数据。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-C8044A0E-B870-4F21-8D46-5CE5EFE7F0D9" title="您可以在以下级别传输数据：数据库，表空间，表，分区和子分区。">关于传输数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11403"></a><div class="props_rev_3"><a id="GUID-DE09D211-D0C8-481A-9ECE-1F4B702E9452" name="GUID-DE09D211-D0C8-481A-9ECE-1F4B702E9452"></a><h4 id="ADMIN-GUID-DE09D211-D0C8-481A-9ECE-1F4B702E9452" class="sect4"><span class="enumeration_section">15.1.2</span>传输数据：场景</h4>
                  <p>在几种情况下，传输数据非常有用。</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="transporting-data.html#GUID-FA4AAD15-5305-45A9-9644-DB7D7DCD30D2">完全可运输出口/进口的情景</a><br>完全可传输的导出/导入功能在多种情况下很有用。
                        </li>
                        <li class="ulchildlink"><a href="transporting-data.html#GUID-5158E6EB-591A-4DF0-9A44-BAF1E10338A8">可传输表空间或可传输表的方案</a><br>可传输表空间或可传输表功能在多种情况下都很有用。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-C8044A0E-B870-4F21-8D46-5CE5EFE7F0D9" title="您可以在以下级别传输数据：数据库，表空间，表，分区和子分区。">关于传输数据</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN13922"></a><div class="props_rev_3"><a id="GUID-FA4AAD15-5305-45A9-9644-DB7D7DCD30D2" name="GUID-FA4AAD15-5305-45A9-9644-DB7D7DCD30D2"></a><h5 id="ADMIN-GUID-FA4AAD15-5305-45A9-9644-DB7D7DCD30D2" class="sect5"><span class="enumeration_section">15.1.2.1</span>完全可运输出口/进口的情景</h5>
                     <p>完全可传输的导出/导入功能在多种情况下很有用。</p>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="transporting-data.html#GUID-5CFCF440-E6AA-4C11-8532-454FED203547">将非CDB移入CDB</a><br>多租户架构使Oracle数据库可以作为多租户容器数据库（CDB）运行，该数据库包括一个或多个客户创建的可插拔数据库（PDB）。您可以通过传输数据库将非CDB移动到CDB。
                           </li>
                           <li class="ulchildlink"><a href="transporting-data.html#GUID-686A76DB-C059-4012-BE2F-5380A2490EEF">将数据库移动到新的计算机系统</a><br>您可以使用完全可传输的导出/导入将数据库从一个计算机系统移动到另一个计算机系统。您可能希望将数据库移动到新计算机系统以升级硬件或将数据库移动到其他平台。
                           </li>
                           <li class="ulchildlink"><a href="transporting-data.html#GUID-55D4E16F-AF36-460B-9FBD-6C2D99FE7399">升级到Oracle数据库的新版本</a><br>您可以使用完全可传输的导出/导入将数据库从Oracle Database <span class="italic">11g</span>第2版（11.2.0.3）或更高版本升级到Oracle Database 19c。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-DE09D211-D0C8-481A-9ECE-1F4B702E9452" title="在几种情况下，传输数据非常有用。">传输数据：方案</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ADMIN13923"></a><div class="props_rev_3"><a id="GUID-5CFCF440-E6AA-4C11-8532-454FED203547" name="GUID-5CFCF440-E6AA-4C11-8532-454FED203547"></a><h6 id="ADMIN-GUID-5CFCF440-E6AA-4C11-8532-454FED203547" class="sect6"><span class="enumeration_section">15.1.2.1.1</span>将非CDB移入CDB</h6>
                        <div>
                           <p>多租户架构使Oracle数据库可以作为多租户容器数据库（CDB）运行，该数据库包括一个或多个客户创建的可插拔数据库（PDB）。您可以通过传输数据库将非CDB移动到CDB。</p>
                           <p>传输的数据库成为与CDB相关联的可插拔数据库（PDB）。完全可传输的导出/导入可以有效地将Oracle Database <span class="italic">11g</span>第2版（11.2.0.3）或更高版本移动到Oracle Database 19c CDB中。
                           </p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-5CFCF440-E6AA-4C11-8532-454FED203547__GUID-6947619B-4A0C-4719-B086-AB6AD1FD051E">
                              <p class="notep1">也可以看看：</p>
                              <p></p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="transporting-data.html#GUID-05DFEA70-FDAF-4FAF-BF26-37225151A7D7" title="You can transport a database using an export dump file.">使用导出转储文件传输数据库</a> ”，</span>以获取描述<span class="q"><a href="transporting-data.html#GUID-05DFEA70-FDAF-4FAF-BF26-37225151A7D7" title="您可以使用导出转储文件传输数据库。">使用导出转储文件</a></span>将非CDB传输到CDB的说明</p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="transporting-data.html#GUID-032C9715-B2F8-4ACD-8A1C-C1A899DEA3C1" title="You can transport a database over the network.">通过网络传输数据库</a> ”，</span>用于描述<span class="q"><a href="transporting-data.html#GUID-032C9715-B2F8-4ACD-8A1C-C1A899DEA3C1" title="您可以通过网络传输数据库。">通过网络</a></span>将非CDB传输到CDB的说明</p>
                                 </li>
                                 <li>
                                    <p><a href="../multi/index.html" target="_blank"><span><cite>Oracle多租户管理员指南</cite></span></a></p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-FA4AAD15-5305-45A9-9644-DB7D7DCD30D2" title="完全可传输的导出/导入功能在多种情况下很有用。">完全可传输导出/导入的方案</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN13924"></a><div class="props_rev_3"><a id="GUID-686A76DB-C059-4012-BE2F-5380A2490EEF" name="GUID-686A76DB-C059-4012-BE2F-5380A2490EEF"></a><h6 id="ADMIN-GUID-686A76DB-C059-4012-BE2F-5380A2490EEF" class="sect6"><span class="enumeration_section">15.1.2.1.2</span>将数据库移动到新的计算机系统</h6>
                        <div>
                           <p>您可以使用完全可传输的导出/导入将数据库从一个计算机系统移动到另一个计算机系统。您可能希望将数据库移动到新计算机系统以升级硬件或将数据库移动到其他平台。</p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-686A76DB-C059-4012-BE2F-5380A2490EEF__GUID-4033DA70-4339-46D9-B256-6F7032B79A2A">
                              <p class="notep1">也可以看看：</p>
                              <p></p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="transporting-data.html#GUID-399ECCDE-1E8C-432E-AACD-6DE2AD6A4B26" title="您可以将数据库传输到新的Oracle数据库实例。">传输数据库</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="transporting-data.html#GUID-FE3003B9-605A-4269-B167-005AC778C870" title="您可以跨平台传输数据。">跨平台传输数据</a> ”</span></p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-FA4AAD15-5305-45A9-9644-DB7D7DCD30D2" title="完全可传输的导出/导入功能在多种情况下很有用。">完全可传输导出/导入的方案</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN13925"></a><div class="props_rev_3"><a id="GUID-55D4E16F-AF36-460B-9FBD-6C2D99FE7399" name="GUID-55D4E16F-AF36-460B-9FBD-6C2D99FE7399"></a><h6 id="ADMIN-GUID-55D4E16F-AF36-460B-9FBD-6C2D99FE7399" class="sect6"><span class="enumeration_section">15.1.2.1.3</span>升级到Oracle数据库的新版本</h6>
                        <div>
                           <p>您可以使用完全可传输的导出/导入将数据库从Oracle Database <span class="italic">11g</span>第2版（11.2.0.3）或更高版本升级到Oracle Database 19c。
                           </p>
                           <p>为此，请安装Oracle Database 19c并创建一个空数据库。接下来，使用完全可传输的导出/导入将Oracle Database <span class="italic">11g</span>第2版（11.2.0.3）或更高版本的数据库传输到Oracle Database 19c数据库。
                           </p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-55D4E16F-AF36-460B-9FBD-6C2D99FE7399__GUID-2F84041A-E323-48B3-8D6A-0A47F2F0D5B4">
                              <p class="notep1">也可以看看：</p>
                              <p></p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="transporting-data.html#GUID-399ECCDE-1E8C-432E-AACD-6DE2AD6A4B26" title="您可以将数据库传输到新的Oracle数据库实例。">传输数据库</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><a href="../install-and-upgrade.html" target="_blank"><span class="italic">Oracle数据库安装指南</span></a></p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-FA4AAD15-5305-45A9-9644-DB7D7DCD30D2" title="完全可传输的导出/导入功能在多种情况下很有用。">完全可传输导出/导入的方案</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-5158E6EB-591A-4DF0-9A44-BAF1E10338A8" name="GUID-5158E6EB-591A-4DF0-9A44-BAF1E10338A8"></a><h5 id="ADMIN-GUID-5158E6EB-591A-4DF0-9A44-BAF1E10338A8" class="sect5"><span class="enumeration_section">15.1.2.2</span>可传输表空间或可传输表的方案</h5>
                     <p>可传输表空间或可传输表功能在多种情况下都很有用。</p>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="transporting-data.html#GUID-9D3BA96E-C9E8-44A7-AD78-1A2FA36FB8CC">适用于可传输表空间或可传输表的方案</a><br>对于某些情况，可传输表空间或可传输表可能很有用。对于其他方案，只有可传输的表空间可能很有用，或者只有可传输的表可能很有用。
                           </li>
                           <li class="ulchildlink"><a href="transporting-data.html#GUID-8B2068FD-3006-4227-825A-1099A587B48F">传输和附加数据仓库的分区</a><br>您可以使用可传输表和可传输的表空间来附加数据仓库的分区。
                           </li>
                           <li class="ulchildlink"><a href="transporting-data.html#GUID-9FF1EB3F-7401-47FE-A3FD-7D4634CC5EC5">在CD上发布结构化数据</a><br>可传输表空间和可传输表都提供了在CD上发布结构化数据的方法。</li>
                           <li class="ulchildlink"><a href="transporting-data.html#GUID-AA3D4235-2C5C-4841-9973-F62089A37FFE">在多个数据库上以只读方式挂载相同的表空间</a><br>您可以使用可传输表空间在多个数据库上以只读方式挂载表空间。
                           </li>
                           <li class="ulchildlink"><a href="transporting-data.html#GUID-F9A58819-23CA-40D0-8397-15660FB5E0DA">存档历史数据</a><br>使用可传输表空间或可传输表时，传输的数据是一组独立的文件，可以导入任何Oracle数据库。因此，您可以使用可传输表空间和可传输表过程将旧数据库或历史数据存档在企业数据仓库中。
                           </li>
                           <li class="ulchildlink"><a href="transporting-data.html#GUID-1ADBD956-8C31-40E4-8811-F19BC156AD7A">使用可传输表空间执行TSPITR</a><br>您可以使用可传输表空间来执行表空间时间点恢复（TSPITR）。
                           </li>
                           <li class="ulchildlink"><a href="transporting-data.html#GUID-09D3A7EA-FD5C-4149-A327-2F1C6949B3E9">复制或移动单个表</a><br>您可以使用可传输表将一个表或一组表从一个数据库移动到另一个数据库，而无需传输包含表的整个表空间。您还可以使用可传输表将单个分区和子分区从一个数据库复制或移动到另一个数据库。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-DE09D211-D0C8-481A-9ECE-1F4B702E9452" title="在几种情况下，传输数据非常有用。">传输数据：方案</a></p>
                           </div>
                        </div>
                     </div>
                     <a id="ADMIN13927"></a><a id="ADMIN13926"></a><div class="props_rev_3"><a id="GUID-9D3BA96E-C9E8-44A7-AD78-1A2FA36FB8CC" name="GUID-9D3BA96E-C9E8-44A7-AD78-1A2FA36FB8CC"></a><h6 id="ADMIN-GUID-9D3BA96E-C9E8-44A7-AD78-1A2FA36FB8CC" class="sect6"><span class="enumeration_section">15.1.2.2.1</span>适用于可传输表空间或可传输表的方案</h6>
                        <div>
                           <p>对于某些情况，可传输表空间或可传输表可能很有用。对于其他方案，只有可传输的表空间可能很有用，或者只有可传输的表可能很有用。</p>
                           <p><a href="transporting-data.html#GUID-9D3BA96E-C9E8-44A7-AD78-1A2FA36FB8CC__BEHGJDDE" title="此表列出了每个方案，并显示它是否适用于可传输表空间和可传输表。">表15-1</a>显示了可以为每个方案使用的功能。
                           </p>
                           <div class="tblformal" id="GUID-9D3BA96E-C9E8-44A7-AD78-1A2FA36FB8CC__BEHGJDDE">
                              <p class="titleintable">表15-1可传输表空间和可传输表的方案</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="可传输表空间和可传输表的方案" width="100%" border="1" summary="This table lists each scenario and shows whether it applies to transportable tablespaces and transportable tables." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="60%" id="d158599e661">方案</th>
                                       <th align="left" valign="bottom" width="20%" id="d158599e664">可传输的表空间</th>
                                       <th align="left" valign="bottom" width="20%" id="d158599e667">可移动的桌子</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="60%" id="d158599e672" headers="d158599e661 ">
                                          <p><a href="transporting-data.html#GUID-8B2068FD-3006-4227-825A-1099A587B48F" title="您可以使用可传输表和可传输的表空间来附加数据仓库的分区。">传输和附加数据仓库的分区</a></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d158599e672 d158599e664 ">
                                          <p>是</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d158599e672 d158599e667 ">
                                          <p>是</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="60%" id="d158599e687" headers="d158599e661 ">
                                          <p><a href="transporting-data.html#GUID-9FF1EB3F-7401-47FE-A3FD-7D4634CC5EC5" title="可传输表空间和可传输表都提供了在CD上发布结构化数据的方法。">在CD上发布结构化数据</a></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d158599e687 d158599e664 ">
                                          <p>是</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d158599e687 d158599e667 ">
                                          <p>是</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="60%" id="d158599e702" headers="d158599e661 ">
                                          <p><a href="transporting-data.html#GUID-F9A58819-23CA-40D0-8397-15660FB5E0DA" title="使用可传输表空间或可传输表时，传输的数据是一组独立的文件，可以导入任何Oracle数据库。因此，您可以使用可传输表空间和可传输表过程将旧数据库或历史数据存档在企业数据仓库中。">存档历史数据</a></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d158599e702 d158599e664 ">
                                          <p>是</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d158599e702 d158599e667 ">
                                          <p>是</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="60%" id="d158599e717" headers="d158599e661 ">
                                          <p><a href="transporting-data.html#GUID-1ADBD956-8C31-40E4-8811-F19BC156AD7A" title="您可以使用可传输表空间来执行表空间时间点恢复（TSPITR）。">使用可传输表空间执行TSPITR</a></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d158599e717 d158599e664 ">
                                          <p>是</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d158599e717 d158599e667 ">
                                          <p>没有</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="60%" id="d158599e732" headers="d158599e661 ">
                                          <p><a href="transporting-data.html#GUID-09D3A7EA-FD5C-4149-A327-2F1C6949B3E9" title="您可以使用可传输表将一个表或一组表从一个数据库移动到另一个数据库，而无需传输包含表的整个表空间。您还可以使用可传输表将单个分区和子分区从一个数据库复制或移动到另一个数据库。">复制或移动单个表</a></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d158599e732 d158599e664 ">
                                          <p>没有</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d158599e732 d158599e667 ">
                                          <p>是</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <p>以下部分更详细地描述了这些方案。</p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-5158E6EB-591A-4DF0-9A44-BAF1E10338A8" title="可传输表空间或可传输表功能在多种情况下都很有用。">可传输表空间或可传输表的方案</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN11404"></a><div class="props_rev_3"><a id="GUID-8B2068FD-3006-4227-825A-1099A587B48F" name="GUID-8B2068FD-3006-4227-825A-1099A587B48F"></a><h6 id="ADMIN-GUID-8B2068FD-3006-4227-825A-1099A587B48F" class="sect6"><span class="enumeration_section">15.1.2.2.2</span>传输和附加数据仓库的分区</h6>
                        <div>
                           <p>您可以使用可传输表和可传输的表空间来附加数据仓库的分区。</p>
                           <p>典型的企业数据仓库包含一个或多个大型事实表。这些事实表可以按日期进行分区，使企业数据仓库成为历史数据库。您可以构建索引以加速星型查询。Oracle建议您为此类历史分区表构建本地索引，以避免每次从历史数据库中删除最旧的分区时重建全局索引。</p>
                           <p>假设您每个月都要将一个月的数据加载到数据仓库中。数据仓库中有一个名为<code class="codeph">sales</code>的大型事实表，它包含以下列：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE销售（invoice_no NUMBER，sale_year INT NOT NULL，sale_month INT NOT NULL，sale_day INT NOT NULL）按范围划分（sale_year，sale_month，sale_day）（分区jan2011价值低于（2011年，2,1），分区feb2011 VALUES LESS THAN（2011年，3月1日），分区2011年3月的价值低于（2011年，4月1日），分区2011年2月的价值低于（2011年，5月1日），分区可能2011年价值低于（2011年，6月1日），分区jun2011价值低于（2011年，7,1））;</pre><p>您创建一个本地非前缀索引：</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX sales_index ON sales（invoice_no）LOCAL;</pre><p>最初，所有分区都是空的，并且位于相同的默认表空间中。您每个月都要创建一个分区并将其附加到分区的<code class="codeph">sales</code>表。
                           </p>
                           <p>假设它是2011年7月，您希望将7月销售数据加载到分区表中。在临时数据库中，创建一个表<code class="codeph">jul_sales</code> ，其列类型与<code class="codeph">sales</code>表相同。（可选）您可以在创建表之前创建新的表空间<code class="codeph">ts_jul</code> ，并在此表空间中创建表。您可以使用<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>创建表<code class="codeph">jul_sales</code> ...<code class="codeph">AS</code> <code class="codeph">SELECT</code>语句。在创建和填充<code class="codeph">jul_sales</code> ，您还可以为表创建索引<code class="codeph">jul_sale_index</code> ，将同一列索引为<code class="codeph">sales</code>表中的本地索引。有关在数据仓库环境中创建和填充临时表的详细信息，请参阅“ <a href="../dwhsg/transportation-data-warehouses.html#DWHSG8301" target="_blank"><span class="italic">Oracle数据库数据仓库指南”</span></a> 。
                           </p>
                           <p>创建表并构建索引后，使用以下方法之一将表的数据传输到数据仓库：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>您可以使用可传输表将<code class="codeph">jul_sales</code>表传输到数据仓库。
                                 </p>
                              </li>
                              <li>
                                 <p>如果您创建了<code class="codeph">ts_jul</code>表空间，则可以使用可传输表空间将表空间<code class="codeph">ts_jul</code>传输到数据仓库。
                                 </p>
                              </li>
                           </ul>
                           <p>在数据仓库中，将分区添加到7月销售数据的<code class="codeph">sales</code>表中。这还为本地非前缀索引创建了另一个分区：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE销售增加分数jul2011价值低于（2011年，8,1）;</pre><p>通过将传输的表<code class="codeph">jul_sales</code>与新分区交换，将其附加到表<code class="codeph">sales</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE sales EXCHANGE PARTITION jul2011 with TABLE jul_sales包含没有验证的索引;</pre><p>此语句将7月销售数据放入新分区<code class="codeph">jul2011</code> ，将新数据附加到分区表。此语句还将索引<code class="codeph">jul_sale_index</code>转换为<code class="codeph">sales</code>表的本地索引的分区。此语句应立即返回，因为它仅对结构信息进行操作，并且只是切换数据库指针。如果您知道新分区中的数据与先前分区中的数据不重叠，则建议您指定<code class="codeph">WITHOUT VALIDATION</code>子句。否则，该语句将遍历新分区中的所有新数据，以尝试验证该分区的范围。
                           </p>
                           <p>如果<code class="codeph">sales</code>表的所有分区都来自同一个staging数据库（从不销毁登台数据库），那么exchange语句总是成功。但是，通常，如果分区表中的数据来自不同的数据库，则交换操作可能会失败。例如，如果<code class="codeph">jan2011</code> <code class="codeph">sales</code>分区不是来自同一个登台数据库，那么前面的交换操作可能会失败，返回以下错误：</p><pre class="oac_no_warn" dir="ltr">ORA-19728：表SALES中的表JUL_SALES和分区JAN2011之间的数据对象号冲突</pre><p>要解决此冲突，请通过发出以下语句来移动违规分区：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE销售MOVE PARTITION jan2011;</pre><p>然后重试交换操作。</p>
                           <p>交换成功后，您可以安全地删除<code class="codeph">jul_sales</code>和<code class="codeph">jul_sale_index</code> （两者现在都是空的）。因此，您已成功将7月销售数据加载到数据仓库中。
                           </p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-5158E6EB-591A-4DF0-9A44-BAF1E10338A8" title="可传输表空间或可传输表功能在多种情况下都很有用。">可传输表空间或可传输表的方案</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN11405"></a><div class="props_rev_3"><a id="GUID-9FF1EB3F-7401-47FE-A3FD-7D4634CC5EC5" name="GUID-9FF1EB3F-7401-47FE-A3FD-7D4634CC5EC5"></a><h6 id="ADMIN-GUID-9FF1EB3F-7401-47FE-A3FD-7D4634CC5EC5" class="sect6"><span class="enumeration_section">15.1.2.2.3</span>在CD上发布结构化数据</h6>
                        <div>
                           <p>可传输表空间和可传输表都提供了在CD上发布结构化数据的方法。</p>
                           <p>您可以将要发布的数据（包括数据文件和导出转储文件）复制到CD。然后可以分发该CD。如果使用可传输表空间，则必须在将数据复制到CD之前生成可传输集。</p>
                           <p>当客户收到此CD时，他们可以将CD内容添加到现有数据库，而无需将数据文件从CD复制到磁盘存储。例如，假设在Microsoft Windows系统上D：驱动器是CD驱动器。您可以导入数据文件<code class="codeph">catalog.f</code>和导出转储文件<code class="codeph">expdat.dmp</code> ，如下所示：</p><pre class="oac_no_warn" dir="ltr">impdp <span class="italic">user_name / password</span> DUMPFILE = expdat.dmp DIRECTORY = dpump_dir TRANSPORT_DATAFILES ='D：\ catalog.f'</pre><p>您可以在数据库仍处于运行状态时删除CD。对数据的后续查询返回错误，指示数据库无法打开CD上的数据文件。但是，对数据库其他部分的操作不受影响。将CD放回驱动器会使数据再次可读。</p>
                           <p>删除CD与删除只读表空间的数据文件相同。如果关闭并重新启动数据库，则数据库指示它无法找到已删除的数据文件并且不会打开数据库（除非将初始化参数<code class="codeph">READ_ONLY_OPEN_DELAYED</code>设置为<code class="codeph">TRUE</code> ）。当<code class="codeph">READ_ONLY_OPEN_DELAYED</code>设置为<code class="codeph">TRUE</code> ，数据库仅在有人查询数据时才读取文件。因此，从CD传输数据时，请将<code class="codeph">READ_ONLY_OPEN_DELAYED</code>初始化参数设置为<code class="codeph">TRUE</code> ，除非CD永久连接到数据库。
                           </p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-5158E6EB-591A-4DF0-9A44-BAF1E10338A8" title="可传输表空间或可传输表功能在多种情况下都很有用。">可传输表空间或可传输表的方案</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="sect5"><a id="GUID-AA3D4235-2C5C-4841-9973-F62089A37FFE" name="GUID-AA3D4235-2C5C-4841-9973-F62089A37FFE"></a><h6 id="ADMIN-GUID-AA3D4235-2C5C-4841-9973-F62089A37FFE" class="sect6"><span class="enumeration_section">15.1.2.2.4</span>在多个数据库上以只读方式挂载相同的表空间</h6>
                        <div>
                           <p>您可以使用可传输表空间在多个数据库上以只读方式挂载表空间。</p>
                           <p>通过这种方式，单独的数据库可以在磁盘上共享相同的数据，而不是在不同的磁盘上复制数据。所有数据库都必须可以访问表空间数据文件。为避免数据库损坏，表空间必须在挂载表空间的所有数据库中保持只读，并且表空间的数据文件在操作系统级别必须是只读的。</p>
                           <p>以下是在多个数据库上以只读方式挂载相同表空间的两种方案：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>表空间源自与将共享表空间的数据库分开的数据库。</p>
                                 <p>您可以在源数据库中生成可传输集，将可传输集放到所有数据库都可访问的磁盘上，然后将元数据导入到要装入表空间的每个数据库中。</p>
                              </li>
                              <li>
                                 <p>表空间已经属于将共享表空间的其中一个数据库。</p>
                                 <p>假设数据文件已经在共享磁盘上。在表空间已存在的数据库中，将表空间设置为只读，生成可传输集，然后将表空间导入其他数据库，将数据文件保留在共享磁盘上的相同位置。</p>
                              </li>
                           </ul>
                           <p>您可以通过多种方式使多台计算机可以访问磁盘。您可以使用群集文件系统或原始磁盘。您也可以使用网络文件系统（NFS），但请注意，如果用户在NFS关闭时查询共享表空间，数据库将挂起，直到NFS操作超时。</p>
                           <p>稍后，您可以删除某些数据库中的只读表空间。这样做不会修改表空间的数据文件。因此，drop操作不会破坏表空间。除非只有一个数据库正在挂载表空间，否则不要对表空间进行读/写。</p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-5158E6EB-591A-4DF0-9A44-BAF1E10338A8" title="可传输表空间或可传输表功能在多种情况下都很有用。">可传输表空间或可传输表的方案</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN11407"></a><div class="props_rev_3"><a id="GUID-F9A58819-23CA-40D0-8397-15660FB5E0DA" name="GUID-F9A58819-23CA-40D0-8397-15660FB5E0DA"></a><h6 id="ADMIN-GUID-F9A58819-23CA-40D0-8397-15660FB5E0DA" class="sect6"><span class="enumeration_section">15.1.2.2.5</span>存档历史数据</h6>
                        <div>
                           <p>使用可传输表空间或可传输表时，传输的数据是一组独立的文件，可以导入任何Oracle数据库。因此，您可以使用可传输表空间和可传输表过程将旧数据库或历史数据存档在企业数据仓库中。</p>
                           <div class="section"></div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-F9A58819-23CA-40D0-8397-15660FB5E0DA__GUID-EECAB887-D7CD-4E13-9514-CF071182DD42">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="../dwhsg/transportation-data-warehouses.html#DWHSG8301" target="_blank"><span class="italic">Oracle数据库数据仓库指南</span></a>了解更多详细信息</p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-5158E6EB-591A-4DF0-9A44-BAF1E10338A8" title="可传输表空间或可传输表功能在多种情况下都很有用。">可传输表空间或可传输表的方案</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN11408"></a><div class="props_rev_3"><a id="GUID-1ADBD956-8C31-40E4-8811-F19BC156AD7A" name="GUID-1ADBD956-8C31-40E4-8811-F19BC156AD7A"></a><h6 id="ADMIN-GUID-1ADBD956-8C31-40E4-8811-F19BC156AD7A" class="sect6"><span class="enumeration_section">15.1.2.2.6</span>使用可传输表空间执行TSPITR</h6>
                        <div>
                           <p>您可以使用可传输表空间来执行表空间时间点恢复（TSPITR）。</p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-1ADBD956-8C31-40E4-8811-F19BC156AD7A__GUID-FCDEEBB6-A9A4-46FD-B666-F2E74DBE936C">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="../bradv/performing-rman-tspitr.html#BRADV009" target="_blank"><span class="italic">“Oracle数据库备份和恢复用户指南”</span></a> ，了解有关如何使用可传输表空间执行TSPITR的信息</p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-5158E6EB-591A-4DF0-9A44-BAF1E10338A8" title="可传输表空间或可传输表功能在多种情况下都很有用。">可传输表空间或可传输表的方案</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div><a id="ADMIN13928"></a><div class="props_rev_3"><a id="GUID-09D3A7EA-FD5C-4149-A327-2F1C6949B3E9" name="GUID-09D3A7EA-FD5C-4149-A327-2F1C6949B3E9"></a><h6 id="ADMIN-GUID-09D3A7EA-FD5C-4149-A327-2F1C6949B3E9" class="sect6"><span class="enumeration_section">15.1.2.2.7</span>复制或移动单个表</h6>
                        <div>
                           <p>您可以使用可传输表将一个表或一组表从一个数据库移动到另一个数据库，而无需传输包含表的整个表空间。您还可以使用可传输表将单个分区和子分区从一个数据库复制或移动到另一个数据库。</p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-09D3A7EA-FD5C-4149-A327-2F1C6949B3E9__GUID-25B24EC0-ADAD-4A23-916D-40232C069175">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="transporting-data.html#GUID-E1270F3E-2476-44C2-A721-6A456A372379" title="您可以在数据库之间传输表，分区和子分区。">在数据库之间传输表，分区或子分区</a> ”</span></p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-5158E6EB-591A-4DF0-9A44-BAF1E10338A8" title="可传输表空间或可传输表功能在多种情况下都很有用。">可传输表空间或可传输表的方案</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
               </div><a id="ADMIN11395"></a><div class="props_rev_3"><a id="GUID-FE3003B9-605A-4269-B167-005AC778C870" name="GUID-FE3003B9-605A-4269-B167-005AC778C870"></a><h4 id="ADMIN-GUID-FE3003B9-605A-4269-B167-005AC778C870" class="sect4"><span class="enumeration_section">15.1.3</span>跨平台传输数据</h4>
                  <div>
                     <p>您可以跨平台传输数据。</p>
                     <p>跨平台传输数据的功能可用于：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使数据库可以从一个平台迁移到另一个平台。</p>
                        </li>
                        <li>
                           <p>为内容提供商提供更简单，更有效的方法来发布结构化数据并将其分发给在不同平台上运行Oracle数据库的客户。</p>
                        </li>
                        <li>
                           <p>简化从数据仓库环境到数据集市的数据分发，数据集市通常在较小的平台上运行。</p>
                        </li>
                        <li>
                           <p>假设您可以从这些平台访问存储系统并且平台都具有相同的字节顺序，从而在不同操作系统或平台上的Oracle数据库安装之间共享只读表空间，如以下各节所述。</p>
                        </li>
                     </ul>
                     <p>跨平台数据传输支持许多（但不是全部）平台。您可以查询<code class="codeph">V$TRANSPORTABLE_PLATFORM</code>视图以查看支持的平台，并确定每个平台的endian格式（字节顺序）。以下查询显示支持跨平台数据传输的平台：</p><pre class="oac_no_warn" dir="ltr">COLUMN PLATFORM_NAME FORMAT A40 COLUMN ENDIAN_FORMAT A14 SELECT PLATFORM_ID，PLATFORM_NAME，ENDIAN_FORMAT from V $ TRANSPORTABLE_PLATFORM ORDER BY PLATFORM_ID; PLATFORM_ID PLATFORM_NAME ENDIAN_FORMAT ----------- ------------------------------------ ---- -------------- 1 Solaris [tm] OE（32位）Big 2 Solaris [tm] OE（64位）Big 3 HP-UX（64位） ）Big 4 HP-UX IA（64位）Big 5 HP Tru64 UNIX Little 6基于AIX的系统（64位）Big 7 Microsoft Windows IA（32位）Little 8 Microsoft Windows IA（64位）Little 9基于IBM zSeries的Linux Big 10 Linux IA（32位）小11 Linux IA（64位）小12 Microsoft Windows x86 64位小13 Linux x86 64位小15 HP Open VMS小16 Apple Mac OS Big 17 Solaris操作系统（x86）Little 18 IBM Power Based Linux Big 19 HP IA Open VMS Little 20 Solaris操作系统（x86-64）Little 21 Apple Mac OS（x86-64）Little</pre><p>如果源平台和目标平台具有相同的字节顺序，则数据将从源平台传输到目标平台，而无需任何数据转换。</p>
                     <p>如果源平台和目标平台具有不同的字节序，则必须将传输的数据转换为目标平台格式。您可以使用以下方法之一转换数据：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">DBMS_FILE_TRANSFER</code>包中的<code class="codeph">GET_FILE</code>或<code class="codeph">PUT_FILE</code>过程</p>
                           <p>当您使用这些过程之一在源平台和目标平台之间移动数据文件时，每个数据文件中的每个块都将转换为目标平台的字节顺序。转换发生在目标平台上。</p>
                        </li>
                        <li>
                           <p>RMAN <code class="codeph">CONVERT</code>命令</p>
                           <p>在源或目标平台上运行RMAN <code class="codeph">CONVERT</code>命令。此命令将传输的数据转换为目标平台格式。
                           </p>
                           <div class="infoboxnote" id="GUID-FE3003B9-605A-4269-B167-005AC778C870__GUID-F343AF05-3FEB-4B1E-B7AC-2CF107ACCB5B">
                              <p class="notep1">注意：</p>
                              <p>具有还原段的数据文件不支持在不同的endian格式之间转换数据文件。</p>
                           </div>
                        </li>
                     </ul>
                     <p>在将数据文件中的数据传输到不同平台之前，数据文件头必须标识它所属的平台。要在不同平台上的Oracle数据库安装之间传输只读表空间，请至少对数据文件进行一次读/写操作。</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-FE3003B9-605A-4269-B167-005AC778C870__GUID-376BEF20-20C7-4F80-AD06-72D260D5263E">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="transporting-data.html#GUID-E4B0F929-79D0-4DEE-B1DD-378BDBC31A0B" title="当您执行可传输操作，并且源平台和目标平台具有不同的字节顺序时，您必须将传输的数据转换为目标平台格式。如果源平台和目标平台具有相同的字节顺序，则不需要进行数据转换。您可以使用DBMS_FILE_TRANSFER包或RMAN CONVERT命令来转换数据。">在平台之间转换数据</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-C8044A0E-B870-4F21-8D46-5CE5EFE7F0D9" title="您可以在以下级别传输数据：数据库，表空间，表，分区和子分区。">关于传输数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11396"></a><div class="props_rev_3"><a id="GUID-28800719-6CB9-4A71-95DD-4B61AA603173" name="GUID-28800719-6CB9-4A71-95DD-4B61AA603173"></a><h4 id="ADMIN-GUID-28800719-6CB9-4A71-95DD-4B61AA603173" class="sect4"><span class="enumeration_section">15.1.4</span>传输数据的一般限制</h4>
                  <div>
                     <p>传输数据存在一般限制。还存在特定于完全可传输导出/导入，可传输表空间或可传输表的限制。</p>
                     <p>您计划传输数据时请注意以下一般限制：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>源数据库和目标数据库必须使用兼容的数据库字符集。具体而言，必须满足以下条件之一：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>源数据库和目标数据库的数据库字符集是相同的。</p>
                              </li>
                              <li>
                                 <p>源数据库字符集是目标数据库字符集的严格（二进制）子集，并且满足以下三个条件：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>源数据库是Oracle数据库<span class="italic">10g</span>第1版（10.1.0.3）或更高版本。
                                       </p>
                                    </li>
                                    <li>
                                       <p>要传输的表空间不包含具有字符长度语义的表列，或者源数据库字符集和目标数据库字符集中的最大字符宽度相同。</p>
                                    </li>
                                    <li>
                                       <p>要传输的数据不包含具有<code class="codeph">CLOB</code>数据类型的列，或者源数据库字符集和目标数据库字符集都是单字节或两者都是多字节的。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>源数据库字符集是目标数据库字符集的严格（二进制）子集，并且满足以下两个条件：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>源数据库位于Oracle Database <span class="italic">10g</span>第1版（10.1.0.3）之前。
                                       </p>
                                    </li>
                                    <li>
                                       <p>源数据库字符集和目标数据库字符集中的最大字符宽度相同。</p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-28800719-6CB9-4A71-95DD-4B61AA603173__GUID-8FDC40DD-E377-450A-B74E-9A4F9B49EBA6">
                              <p class="notep1">注意：</p>
                              <p><a href="../nlspg/appendix-A-locale-data.html#NLSPG584" target="_blank"><span class="italic">Oracle数据库全球化支持指南</span></a>中介绍了<a href="../nlspg/appendix-A-locale-data.html#NLSPG584" target="_blank"><span class="italic">Oracle数据库</span></a>识别的字符集之间的子集 - 超集关系。
                              </p>
                           </div>
                        </li>
                        <li>
                           <p>源数据库和目标数据库必须使用兼容的国家字符集。具体而言，必须满足以下条件之一：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>源数据库和目标数据库的国家字符集是相同的。</p>
                              </li>
                              <li>
                                 <p>源数据库是Oracle数据库<span class="italic">10g</span>第1版（10.1.0.3）或更高版本，要传输的表空间不包含具有<code class="codeph">NCHAR</code> ， <code class="codeph">NVARCHAR2</code>或<code class="codeph">NCLOB</code>数据类型的列。
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>运行可传输导出操作时，以下限制适用：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>执行导出的用户的默认表空间不能是正在传输的表空间之一。</p>
                              </li>
                              <li>
                                 <p>执行导出的用户的默认表空间必须是可写的。</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>在非CDB中，您无法将表空间传输到包含同名表空间的目标数据库。</p>
                           <p>在CDB中，您无法将表空间传输到包含同名表空间的目标容器。但是，不同的容器可以具有相同名称的表空间。</p>
                           <p>您可以使用<code class="codeph">REMAP_TABLESPACE</code>导入参数将数据库对象导入到其他表空间中。或者，在传输操作之前，您可以重命名要传输的表空间或目标表空间。
                           </p>
                           <p>从Oracle Database 12 <span class="italic">c</span>第2版（12.2）开始，Recovery Manager（RMAN） <code class="codeph">RECOVER</code>命令可以在重新映射表空间时将表移动到其他模式。有关更多信息，请参见“ <a href="../bradv/rman-recovering-tables-partitions.html#BRADV-GUID-907031B5-B355-43D8-8E2B-A0A6F2283BD7" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南”</cite></span></a> 。
                           </p>
                        </li>
                        <li>
                           <p>在CDB中，默认的数据泵目录对象<code class="codeph">DATA_PUMP_DIR</code>不适用于PDB。您必须在PDB中使用Data Pump导出/导入定义显式目录对象。
                           </p>
                        </li>
                        <li>
                           <p>使用XMLTypes传输数据具有以下限制：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>目标数据库必须安装XML DB。</p>
                              </li>
                              <li>
                                 <p>XMLType表引用的模式不能是XML DB标准模式。</p>
                              </li>
                              <li>
                                 <p>如果目标数据库中不存在传输的XMLType表的模式，则会导入并注册该模式。如果目标数据库中已存在架构，则在导入期间将显示一条消息。</p>
                              </li>
                              <li>
                                 <p>您必须仅使用Data Pump导出和导入包含XMLTypes的数据的元数据。</p>
                              </li>
                           </ul>
                           <p>以下查询返回包含XMLTypes的表空间列表：</p><pre class="oac_no_warn" dir="ltr">从dba_tablespaces p中选择distinct p.tablespace_name，dba_xml_tables x，dba_users u，all_all_tables t其中t.table_name = x.table_name和t.tablespace_name = p.tablespace_name和x.owner = u.username;</pre><p>有关XMLTypes的信息，请参阅<a href="../adxdb/intro-to-XML-DB.html#ADXDB3970" target="_blank"><span class="italic">Oracle XML DB Developer's Guide</span></a> 。
                           </p>
                        </li>
                        <li>
                           <p>可以传输其解释是特定于应用程序且对数据库不透明的类型（例如<code class="codeph">RAW</code> ， <code class="codeph">BFILE</code>和AnyTypes），但它们不会作为跨平台传输操作的一部分进行转换。它们的实际结构仅为应用程序所知，因此应用程序必须在将这些类型移动到新平台后解决任何字节序问题。直接或间接使用这些不透明类型的类型和对象也受此限制。
                           </p>
                        </li>
                        <li>
                           <p>在具有不同时区的数据库之间传输包含具有<code class="codeph">TIMESTAMP</code> <code class="codeph">WITH</code> <code class="codeph">LOCAL</code> <code class="codeph">TIME</code> <code class="codeph">ZONE</code> （TSLTZ）数据的表的表空间时，不传输具有TSLTZ数据的表。错误消息描述未传输的表。但是，表空间中不包含TSLTZ数据的表将被传输。
                           </p>
                           <p>您可以使用以下查询确定数据库的时区：</p><pre class="oac_no_warn" dir="ltr">从DUAL中选择DBTIMEZONE;</pre><p>您可以使用<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> SQL语句<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code>的时区。
                           </p>
                           <p>传输操作完成后，您可以使用Data Pump执行传统的TSLTZ数据表导出/导入。</p>
                        </li>
                        <li>
                           <p>分析工作区不能成为跨平台传输操作的一部分。如果源平台和目标平台不同，则使用数据泵导出/导入来导出和导入分析工作区。有关分析工作区的详细信息，请参阅<a href="../oladm/olap-dml-basic-concepts.html#OLADM107" target="_blank"><span class="italic">Oracle OLAP DML参考</span></a> 。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-28800719-6CB9-4A71-95DD-4B61AA603173__GUID-1CE8C3EE-8D71-422D-85EF-2A94ECFCB736">
                        <p class="notep1">注意：</p>
                        <p>除Oracle技术支持部门要求外，不要将数据泵导出实用程序<code class="codeph">expdp</code>或导入实用程序<code class="codeph">impdp</code>作为<code class="codeph">SYSDBA</code>调用。<code class="codeph">SYSDBA</code>在内部使用，具有专门的功能;它的行为与普通用户不同。
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="transporting-data.html#GUID-5A1ECB8A-63BC-471B-9BD0-6474ABFF9AA2" title="完全可运输的出口/进口存在限制。">完全可运输出口/进口的限制</a></li>
                           <li><a href="transporting-data.html#GUID-DAB51E42-9BBC-4001-B5CB-0ECDBE128787" title="本节列出了可传输表空间的限制。">可传输表空间的限制</a></li>
                           <li><a href="transporting-data.html#GUID-B05E88D1-689C-4E83-A32D-61D66A179A18" title="可移动表格有限制。">可移动桌子的限制</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-C8044A0E-B870-4F21-8D46-5CE5EFE7F0D9" title="您可以在以下级别传输数据：数据库，表空间，表，分区和子分区。">关于传输数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13046"></a><a id="ADMIN11397"></a><div class="props_rev_3"><a id="GUID-AC5C8D9D-796A-4EDE-AC35-AF963ECCFE5C" name="GUID-AC5C8D9D-796A-4EDE-AC35-AF963ECCFE5C"></a><h4 id="ADMIN-GUID-AC5C8D9D-796A-4EDE-AC35-AF963ECCFE5C" class="sect4"><span class="enumeration_section">15.1.5</span>传输数据的兼容性注意事项</h4>
                  <div>
                     <p>传输数据时，Oracle数据库会计算目标数据库必须运行的最低兼容级别。</p>
                     <p>即使目标数据库位于相同或不同的平台上，也可以使用可传输的表空间将表空间或表从源数据库传输到具有相同或更高兼容性设置的目标数据库。如果源数据库的兼容级别高于目标数据库的兼容级别，则数据传输操作将失败。</p>
                     <p>下表显示了各种方案中源和目标数据库的最低兼容性要求。源数据库和目标数据库不需要具有相同的兼容性设置。</p>
                     <div class="tblformal" id="GUID-AC5C8D9D-796A-4EDE-AC35-AF963ECCFE5C__GUID-AC086468-6A1A-4516-AE04-CB12339B55B0">
                        <p class="titleintable">表15-2最低兼容性要求</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="最低兼容性要求" width="100%" border="1" summary="The leftmost column lists three database scenarios. The second and third columns shows the minimum compatibility requirements for the source and target tablespace, respectively." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th rowspan="2" align="left" valign="bottom" width="37%" id="d158599e1626">运输方案</th>
                                 <th colspan="2" class="text-center" valign="bottom" id="d158599e1629">最低兼容性设置</th>
                              </tr>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d158599e1633">源数据库</th>
                                 <th align="left" valign="bottom" width="31%" id="d158599e1636">目标数据库</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d158599e1641" headers="d158599e1626 ">
                                    <p>使用完全可传输的导出/导入传输数据库</p>
                                 </td>
                                 <td align="left" valign="top" width="31%" headers="d158599e1641 d158599e1629 d158599e1633 ">
                                    <p>12.0（Oracle Database <span class="italic">12c</span>或更高版本数据库的<code class="codeph">COMPATIBLE</code>初始化参数设置</p>
                                    <p>12（11.2.0.3或更高版本数据库的<code class="codeph">VERSION</code> Data Pump导出参数设置）</p>
                                 </td>
                                 <td align="left" valign="top" width="31%" headers="d158599e1641 d158599e1629 d158599e1636 ">
                                    <p>12.0（ <code class="codeph">COMPATIBLE</code>初始化参数设置）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d158599e1665" headers="d158599e1626 ">
                                    <p>使用可传输表空间在同一平台上的数据库之间传输表空间</p>
                                 </td>
                                 <td align="left" valign="top" width="31%" headers="d158599e1665 d158599e1629 d158599e1633 ">
                                    <p>8.0（ <code class="codeph">COMPATIBLE</code>初始化参数设置）</p>
                                 </td>
                                 <td align="left" valign="top" width="31%" headers="d158599e1665 d158599e1629 d158599e1636 ">
                                    <p>8.0（ <code class="codeph">COMPATIBLE</code>初始化参数设置）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d158599e1681" headers="d158599e1626 ">
                                    <p>使用可传输表空间传输具有与目标数据库不同的数据库块大小的表空间</p>
                                 </td>
                                 <td align="left" valign="top" width="31%" headers="d158599e1681 d158599e1629 d158599e1633 ">
                                    <p>9.0（ <code class="codeph">COMPATIBLE</code>初始化参数设置）</p>
                                 </td>
                                 <td align="left" valign="top" width="31%" headers="d158599e1681 d158599e1629 d158599e1636 ">
                                    <p>9.0（ <code class="codeph">COMPATIBLE</code>初始化参数设置）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d158599e1697" headers="d158599e1626 ">
                                    <p>使用可传输表空间在不同平台上的数据库之间传输表空间</p>
                                 </td>
                                 <td align="left" valign="top" width="31%" headers="d158599e1697 d158599e1629 d158599e1633 ">
                                    <p>10.0（ <code class="codeph">COMPATIBLE</code>初始化参数设置）</p>
                                 </td>
                                 <td align="left" valign="top" width="31%" headers="d158599e1697 d158599e1629 d158599e1636 ">
                                    <p>10.0（ <code class="codeph">COMPATIBLE</code>初始化参数设置）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="37%" id="d158599e1713" headers="d158599e1626 ">
                                    <p>在数据库之间传输表</p>
                                 </td>
                                 <td align="left" valign="top" width="31%" headers="d158599e1713 d158599e1629 d158599e1633 ">
                                    <p>11.2.0（Oracle Database <span class="italic">12c</span>或更高版本数据库的<code class="codeph">COMPATIBLE</code>初始化参数设置</p>
                                 </td>
                                 <td align="left" valign="top" width="31%" headers="d158599e1713 d158599e1629 d158599e1636 ">
                                    <p>11.2.0（ <code class="codeph">COMPATIBLE</code>初始化参数设置）</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnote" id="GUID-AC5C8D9D-796A-4EDE-AC35-AF963ECCFE5C__GUID-6BF99C5C-7257-443E-A8F4-946A4009F53F">
                        <p class="notep1">注意：</p>
                        <ul id="GUID-AC5C8D9D-796A-4EDE-AC35-AF963ECCFE5C__UL_LPM_NZN_2GB" style="list-style-type:disc">
                           <li>
                              <p>使用完全可传输导出/导入时，源数据库必须是Oracle Database <span class="italic">11g</span>第2版（11.2.0.3）或更高版本的数据库，并且目标数据库必须是Oracle Database 12 <span class="italic">c</span>或更高版本的数据库。
                              </p>
                           </li>
                           <li>
                              <p>当输送从Oracle数据库<span class="italic">11克</span> 2版（11.2.0.3）或更高版本的数据库数据库以Oracle数据库12个<span class="italic">C</span>或更高版本的数据库，则必须将数据泵出口参数设置<code class="codeph">VERSION</code>到<code class="codeph">12</code>或更高。
                              </p>
                           </li>
                           <li>
                              <p>将数据库从Oracle Database 19c数据库传输到Oracle Database 19c数据库时，必须将初始化参数<code class="codeph">COMPATIBLE</code>设置为<code class="codeph">19.0.0</code>或更高版本。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-C8044A0E-B870-4F21-8D46-5CE5EFE7F0D9" title="您可以在以下级别传输数据：数据库，表空间，表，分区和子分区。">关于传输数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN13724"></a><div class="props_rev_3"><a id="GUID-399ECCDE-1E8C-432E-AACD-6DE2AD6A4B26" name="GUID-399ECCDE-1E8C-432E-AACD-6DE2AD6A4B26"></a><h3 id="ADMIN-GUID-399ECCDE-1E8C-432E-AACD-6DE2AD6A4B26" class="sect3"><span class="enumeration_section">15.2</span>传输数据库</h3>
               <p>您可以将数据库传输到新的Oracle数据库实例。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="transporting-data.html#GUID-AA3C177A-EBD8-459B-9F25-19F13C304EEE">完全可运输出口/进口简介</a><br>您可以使用完全可传输的导出/导入功能将整个数据库从一个Oracle数据库实例复制到另一个Oracle数据库实例。
                     </li>
                     <li class="ulchildlink"><a href="transporting-data.html#GUID-5A1ECB8A-63BC-471B-9BD0-6474ABFF9AA2">完全可运输出口/进口的限制</a><br>完全可运输的出口/进口存在限制。
                     </li>
                     <li class="ulchildlink"><a href="transporting-data.html#GUID-05DFEA70-FDAF-4FAF-BF26-37225151A7D7">使用导出转储文件传输数据库</a><br>您可以使用导出转储文件传输数据库。
                     </li>
                     <li class="ulchildlink"><a href="transporting-data.html#GUID-032C9715-B2F8-4ACD-8A1C-C1A899DEA3C1">通过网络传输数据库</a><br>您可以通过网络传输数据库。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-1901E9C3-8FCE-4D4E-AB65-34D703474E52" title="传输数据会将数据从一个数据库移动到另一个数据库。">传输数据</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN13725"></a><div class="props_rev_3"><a id="GUID-AA3C177A-EBD8-459B-9F25-19F13C304EEE" name="GUID-AA3C177A-EBD8-459B-9F25-19F13C304EEE"></a><h4 id="ADMIN-GUID-AA3C177A-EBD8-459B-9F25-19F13C304EEE" class="sect4"><span class="enumeration_section">15.2.1</span>完全可运输的出口/进口简介</h4>
                  <div>
                     <p>您可以使用完全可传输的导出/导入功能将整个数据库从一个Oracle数据库实例复制到另一个Oracle数据库实例。</p>
                     <p>您可以使用Data Pump生成导出转储文件，必要时将转储文件传输到目标数据库，然后导入导出转储文件。或者，您可以使用Data Pump通过网络复制数据库。</p>
                     <p>正在传输的数据库中的表空间可以是字典管理的，也可以是本地管理的。数据库中的表空间不需要与目标数据库标准块大小具有相同的块大小。</p>
                     <div class="infoboxnote" id="GUID-AA3C177A-EBD8-459B-9F25-19F13C304EEE__GUID-43E01286-EF59-418E-958C-D81A3E9748DD">
                        <p class="notep1">注意：</p>
                        <p>此传输数据库的方法要求您以只读模式将用户定义的表空间放在数据库中，直到完成导出。如果这是不合需要的，则可以使用<a href="../bradv/creating-transportable-tablespace-sets.html#BRADV05141" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南中</span></a>描述的备份功能中的可传输表空间。
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-AA3C177A-EBD8-459B-9F25-19F13C304EEE__GUID-9F7D1ADD-A687-4E79-A2C3-2CA288D4BB92">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="transporting-data.html#GUID-C8044A0E-B870-4F21-8D46-5CE5EFE7F0D9" title="您可以在以下级别传输数据：数据库，表空间，表，分区和子分区。">关于传输数据</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-399ECCDE-1E8C-432E-AACD-6DE2AD6A4B26" title="您可以将数据库传输到新的Oracle数据库实例。">传输数据库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13894"></a><div class="props_rev_3"><a id="GUID-5A1ECB8A-63BC-471B-9BD0-6474ABFF9AA2" name="GUID-5A1ECB8A-63BC-471B-9BD0-6474ABFF9AA2"></a><h4 id="ADMIN-GUID-5A1ECB8A-63BC-471B-9BD0-6474ABFF9AA2" class="sect4"><span class="enumeration_section">15.2.2</span>完全可运输出口/进口的限制</h4>
                  <div>
                     <p>完全可运输的出口/进口存在限制。</p>
                     <p>请注意完全可移动的导出/导入的以下限制：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="transporting-data.html#GUID-28800719-6CB9-4A71-95DD-4B61AA603173" title="There are general limitations on transporting data. There are also limitations that are specific to full transportable export/import, transportable tablespaces, or transportable tables.">运输数据</a></span>的一般限制”中描述的<span class="q"><a href="transporting-data.html#GUID-28800719-6CB9-4A71-95DD-4B61AA603173" title="传输数据存在一般限制。还存在特定于完全可传输导出/导入，可传输表空间或可传输表的限制。">一般限制</a></span>适用于完全可运输的出口/进口。
                           </p>
                        </li>
                        <li>
                           <p>您无法将加密的表空间传输到具有不同字节序的平台。</p>
                           <p>要将加密表空间传输到具有相同字节顺序的平台，请在导出期间将<code class="codeph">ENCRYPTION_PWD_PROMPT</code>导出实用程序参数设置为<code class="codeph">YES</code> ，或使用<code class="codeph">ENCRYPTION_PASSWORD</code>导出实用程序参数。在导入期间，使用等效的import utility参数，并将值设置为用于导出的相同密码。
                           </p>
                        </li>
                        <li>
                           <p>完全可传输的导出/导入可以使用常规数据泵导出/导入（例如直接路径或外部表）在管理表空间中导出和导入用户定义的数据库对象。管理表空间是Oracle数据库提供的非用户表空间，例如<code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code>表空间。
                           </p>
                        </li>
                        <li>
                           <p>完全可传输的导出/导入无法传输在管理表空间（例如<code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code> ）和用户定义的表空间中定义的数据库对象。例如，分区表可能存储在用户定义的表空间和管理表空间中。如果数据库中有这样的数据库对象，则可以在传输它们之前重新定义它们，以便它们完全存储在管理表空间或用户定义的表空间中。如果无法重新定义数据库对象，则可以使用常规Data Pump导出/导入。
                           </p>
                        </li>
                        <li>
                           <p>使用完全可传输导出/导入通过网络传输数据库时，如果审计跟踪信息本身存储在用户定义的表空间中，则无法对存储在管理表空间（例如<code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code> ）中的表启用审计。有关审核的详细信息，请参见“ <a href="../dbseg/part_6.html#DBSEG006" target="_blank"><span class="italic">Oracle数据库安全指南”</span></a> 。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-399ECCDE-1E8C-432E-AACD-6DE2AD6A4B26" title="您可以将数据库传输到新的Oracle数据库实例。">传输数据库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13727"></a><a id="ADMIN13729"></a><a id="ADMIN13731"></a><a id="ADMIN13732"></a><a id="ADMIN13733"></a><a id="ADMIN13734"></a><a id="ADMIN13726"></a><div class="props_rev_3"><a id="GUID-05DFEA70-FDAF-4FAF-BF26-37225151A7D7" name="GUID-05DFEA70-FDAF-4FAF-BF26-37225151A7D7"></a><h4 id="ADMIN-GUID-05DFEA70-FDAF-4FAF-BF26-37225151A7D7" class="sect4"><span class="enumeration_section">15.2.3</span>使用导出转储文件传输数据库</h4>
                  <div>
                     <p>您可以使用导出转储文件传输数据库。</p>
                     <div class="section">
                        <p>以下任务列表总结了使用导出转储文件传输数据库的过程。后续示例中提供了每项任务的详细信息。</p>
                        <ol>
                           <li>
                              <p>在源数据库中，以只读模式配置每个用户定义的表空间并导出数据库。</p>
                              <p>确保将以下参数设置为指定值：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">可携带= ALWAYS</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">FULL = Y</code></p>
                                 </li>
                              </ul>
                              <p>如果源数据库是Oracle Database 11 <span class="italic">g</span>数据库（11.2.0.3或更高版本），则必须将<code class="codeph">VERSION</code>参数设置为<code class="codeph">12</code>或更高。
                              </p>
                              <p>如果源数据库包含任何包含加密列表的加密表空间或表空间，则必须指定<code class="codeph">ENCRYPTION_PWD_PROMPT=YES</code> ，或指定<code class="codeph">ENCRYPTION_PASSWORD</code>参数。
                              </p>
                              <p>导出转储文件包括用户定义的表空间中包含的对象的元数据，以及管理表空间（如<code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code>包含的用户定义对象的元数据和数据。</p>
                           </li>
                           <li>
                              <p>传输导出转储文件。</p>
                              <p>将导出转储文件复制到目标数据库可访问的位置。</p>
                           </li>
                           <li>
                              <p>传输数据库中所有用户定义的表空间的数据文件。</p>
                              <p>将数据文件复制到目标数据库可访问的位置。</p>
                              <p>如果源平台和目标平台不同，则通过在<span class="q">“ <a href="transporting-data.html#GUID-FE3003B9-605A-4269-B167-005AC778C870" title="您可以跨平台传输数据。">跨平台传输数据</a> ”中</span>的<code class="codeph">V$TRANSPORTABLE_PLATFORM</code>视图上运行查询来检查每个平台的endian格式。
                              </p>
                              <p>如果源平台的endian格式与目标平台的endian格式不同，则使用以下方法之一转换数据文件：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>使用<code class="codeph">DBMS_FILE_TRANSFER</code>包中的<code class="codeph">GET_FILE</code>或<code class="codeph">PUT_FILE</code>过程来传输数据文件。这些过程自动将数据文件转换为目标平台的endian格式。
                                    </p>
                                 </li>
                                 <li>
                                    <p>使用RMAN <code class="codeph">CONVERT</code>命令将数据文件转换为目标平台的endian格式。
                                    </p>
                                    <div class="infoboxnote" id="GUID-05DFEA70-FDAF-4FAF-BF26-37225151A7D7__GUID-9C9CBCC4-AFF9-426F-AB4E-C27CB7114A7A">
                                       <p class="notep1">注意：</p>
                                       <p>具有还原段的数据文件不支持在不同的endian格式之间转换数据文件。</p>
                                    </div>
                                 </li>
                              </ul>
                              <p>有关详细信息，请参阅<span class="q">“ <a href="transporting-data.html#GUID-E4B0F929-79D0-4DEE-B1DD-378BDBC31A0B" title="当您执行可传输操作，并且源平台和目标平台具有不同的字节顺序时，您必须将传输的数据转换为目标平台格式。如果源平台和目标平台具有相同的字节顺序，则不需要进行数据转换。您可以使用DBMS_FILE_TRANSFER包或RMAN CONVERT命令来转换数据。">在平台之间转换数据</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>（可选）将用户定义的表空间恢复为源数据库上的读/写模式。</p>
                           </li>
                           <li>
                              <p>在目标数据库中，导入数据库。</p>
                              <p>导入完成后，用户定义的表空间处于读/写模式。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-05DFEA70-FDAF-4FAF-BF26-37225151A7D7__GUID-A968C73D-3295-402C-BF34-33FB4763000D">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在此示例中详细说明了传输数据库的任务。此示例假定源平台是Solaris，目标平台是Microsoft Windows。</p>
                        <p>它还假定源平台具有以下数据文件和表空间：</p>
                        <div class="tblformal" id="GUID-05DFEA70-FDAF-4FAF-BF26-37225151A7D7__GUID-402E0B8E-FE63-4F9E-AF25-7F4555FD8526">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table lists the data files and tablespaces for the source platform as an example. Column 1 provides the tablespace name, column 2 describes the tablespace type, and column 3 lists its datafile." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="19%" id="d158599e2176">表空间</th>
                                    <th align="left" valign="bottom" width="24%" id="d158599e2179">类型</th>
                                    <th align="left" valign="bottom" width="57%" id="d158599e2182">数据文件</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d158599e2187" headers="d158599e2176 ">
                                       <p>销售</p>
                                    </td>
                                    <td align="left" valign="top" width="24%" headers="d158599e2187 d158599e2179 ">
                                       <p>用户自定义</p>
                                    </td>
                                    <td align="left" valign="top" width="57%" headers="d158599e2187 d158599e2182 ">
                                       <p>/u01/app/oracle/oradata/mydb/sales01.dbf</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d158599e2197" headers="d158599e2176 ">
                                       <p>顾客</p>
                                    </td>
                                    <td align="left" valign="top" width="24%" headers="d158599e2197 d158599e2179 ">
                                       <p>用户自定义</p>
                                    </td>
                                    <td align="left" valign="top" width="57%" headers="d158599e2197 d158599e2182 ">
                                       <p>/u01/app/oracle/oradata/mydb/cust01.dbf</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d158599e2207" headers="d158599e2176 ">
                                       <p>雇员</p>
                                    </td>
                                    <td align="left" valign="top" width="24%" headers="d158599e2207 d158599e2179 ">
                                       <p>用户自定义</p>
                                    </td>
                                    <td align="left" valign="top" width="57%" headers="d158599e2207 d158599e2182 ">
                                       <p>/u01/app/oracle/oradata/mydb/emp01.dbf</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d158599e2217" headers="d158599e2176 ">
                                       <p>系统</p>
                                    </td>
                                    <td align="left" valign="top" width="24%" headers="d158599e2217 d158599e2179 ">
                                       <p>行政的</p>
                                    </td>
                                    <td align="left" valign="top" width="57%" headers="d158599e2217 d158599e2182 ">
                                       <p>/u01/app/oracle/oradata/mydb/system01.dbf</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d158599e2227" headers="d158599e2176 ">
                                       <p>SYSAUX</p>
                                    </td>
                                    <td align="left" valign="top" width="24%" headers="d158599e2227 d158599e2179 ">
                                       <p>行政的</p>
                                    </td>
                                    <td align="left" valign="top" width="57%" headers="d158599e2227 d158599e2182 ">
                                       <p>/u01/app/oracle/oradata/mydb/sysaux01.dbf</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>此示例进行以下附加假设：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>目标数据库是使用源数据库中的数据填充的新数据库。源数据库的名称是<code class="codeph">mydb</code> 。
                              </p>
                           </li>
                           <li>
                              <p>源数据库和目标数据库都是Oracle Database 19c数据库。</p>
                           </li>
                        </ul>
                        <p>完成以下任务以使用导出转储文件传输数据库：</p>
                        <dl>
                           <dt class="dlterm"><a name="GUID-05DFEA70-FDAF-4FAF-BF26-37225151A7D7__GUID-DC0987E2-F2E5-4448-B2FB-C25FAC9AA026"><!-- --></a>任务1生成导出转储文件</dt>
                           <dd>
                              <p>通过完成以下步骤生成导出转储文件：</p>
                              <ol>
                                 <li>
                                    <p>启动SQL * Plus并以管理员或具有<code class="codeph">ALTER</code> <code class="codeph">TABLESPACE</code>或<code class="codeph">MANAGE</code> <code class="codeph">TABLESPACE</code>系统特权的用户身份连接到数据库。
                                    </p>
                                 </li>
                                 <li>
                                    <p>使数据库中的所有用户定义的表空间都是只读的。</p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE销售仅供参考; ALTER TABLESPACE客户只读; ALTER TABLESPACE员工只读;</pre></li>
                                 <li>
                                    <p>以具有<code class="codeph">DATAPUMP_EXP_FULL_DATABASE</code>角色的用户身份调用Data Pump导出实用程序，并指定完整的可传输导出/导入选项。
                                    </p><pre class="oac_no_warn" dir="ltr">SQL&gt; HOST $ expdp <span class="italic">user_name</span> full = y dumpfile = expdat.dmp directory = data_pump_dir transportable = always logfile = export.log密码： <span class="italic">password</span>
</pre><p>您必须始终指定<code class="codeph">TRANSPORTABLE=ALWAYS</code> ，它确定是否使用可传输选项。
                                    </p>
                                    <p>此示例指定以下数据泵参数：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><code class="codeph">FULL</code>参数指定正在导出整个数据库。
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">DUMPFILE</code>参数指定要创建的结构信息导出转储文件的名称<code class="codeph">expdat.dmp</code> 。
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">DIRECTORY</code>参数指定指向转储文件的操作系统或Oracle自动存储管理位置的目录对象。必须在调用Data Pump之前创建<code class="codeph">DIRECTORY</code>对象，并且必须将该目录的<code class="codeph">READ</code>和<code class="codeph">WRITE</code>对象权限授予运行Export实用程序的用户。有关<code class="codeph">CREATE</code> <code class="codeph">DIRECTORY</code>命令的信息，请参见<a href="../sqlrf/CREATE-DIRECTORY.html#SQLRF01207" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。
                                          </p>
                                          <p>在非CDB中，将自动创建目录对象<code class="codeph">DATA_PUMP_DIR</code> 。对此目录的读写访问权限自动授予<code class="codeph">DBA</code>角色，从而授予用户<code class="codeph">SYS</code>和<code class="codeph">SYSTEM</code> 。</p>
                                          <p>但是，目录对象<code class="codeph">DATA_PUMP_DIR</code>不会在PDB中自动创建。因此，在导入PDB时，在PDB中创建目录对象，并在运行Data Pump时指定目录对象。
                                          </p>
                                          <div class="infoboxnotealso" id="GUID-05DFEA70-FDAF-4FAF-BF26-37225151A7D7__GUID-F395958A-2A2F-4668-B866-97039DA75405">
                                             <p class="notep1">也可以看看：</p>
                                             <ul style="list-style-type:disc">
                                                <li>
                                                   <p>有关默认目录的信息，请参阅<a href="../sutil/oracle-data-pump-overview.html#SUTIL810" target="_blank"><span class="italic">Oracle Database Utilities</span></a> ，省略<code class="codeph">DIRECTORY</code>参数</p>
                                                </li>
                                                <li>
                                                   <p>有关PDB的详细信息，请参阅<a href="../multi/overview-of-managing-a-multitenant-environment.html#MULTI-GUID-528FBE02-2B84-4E97-BD87-36AEF9EA524D" target="_blank"><span><cite>“Oracle Multitenant管理员指南”</cite></span></a></p>
                                                </li>
                                             </ul>
                                          </div>
                                       </li>
                                       <li>
                                          <p><code class="codeph">LOGFILE</code>参数指定要由导出实用程序写入的日志文件的文件名。在此示例中，日志文件将写入与转储文件相同的目录，但可以将其写入其他位置。
                                          </p>
                                       </li>
                                    </ul>
                                    <p>要在Oracle Database <span class="italic">11g</span>第2版（11.2.0.3）或更高版本的Oracle Database 11 <span class="italic">g</span>数据库上执行完全可传输导出，请使用<code class="codeph">VERSION</code>参数，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">expdp <span class="italic">user_name</span> full = y dumpfile = expdat.dmp directory = data_pump_dir transportable = always version = 12 logfile = export.log</pre><p>仅对Oracle Database 12 <span class="italic">c</span>及更高版本的数据库支持完全可传输导入。
                                    </p>
                                    <div class="infoboxnote" id="GUID-05DFEA70-FDAF-4FAF-BF26-37225151A7D7__GUID-32300C0F-18BB-446D-A799-DF76914A1446">
                                       <p class="notep1">注意：</p>
                                       <p>在此示例中，Data Pump实用程序仅用于导出用户定义的表空间的数据字典结构信息（元数据）。仅为管理表空间（ <code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code> ）卸载实际数据，因此即使对于大型用户定义的表空间，此操作也会相对快速地进行。
                                       </p>
                                    </div>
                                 </li>
                                 <li>
                                    <p>检查日志文件是否有错误，并记下必须传输到目标数据库的转储文件和数据文件。 <code class="codeph">expdp</code>在这些消息中输出这些文件的名称和路径：</p><pre class="oac_no_warn" dir="ltr">************************************************** ****************************为SYSTEM.SYS_EXPORT_TRANSPORTABLE_01设置的转储文件是：/ u01 / app / oracle / admin / mydb / dpdump / expdat.dmp *********************************************** *******************************可传输表空间SALES所需的数据文件：/ u01 / app / oracle / oradata / mydb / sales01 .dbf可传输表空间CUSTOMERS所需的数据文件：/u01/app/oracle/oradata/mydb/cust01.dbf可传输表空间所需的数据文件EMPLOYEES：/u01/app/oracle/oradata/mydb/emp01.dbf</pre></li>
                                 <li>
                                    <p>完成后，退回到SQL * Plus：</p><pre class="oac_no_warn" dir="ltr">$退出</pre></li>
                              </ol>
                              <div class="infoboxnotealso" id="GUID-05DFEA70-FDAF-4FAF-BF26-37225151A7D7__GUID-00761BE8-87CD-4678-AEAB-B6711887070D">
                                 <p class="notep1">也可以看看：</p>
                                 <p>有关使用Data Pump实用<a href="../sutil/oracle-data-pump-export-utility.html#SUTIL200" target="_blank"><span class="italic">程序</span></a>的信息，请<a href="../sutil/oracle-data-pump-export-utility.html#SUTIL200" target="_blank"><span class="italic">参见Oracle数据库实用</span></a>程序</p>
                              </div>
                           </dd>
                           <dt class="dlterm"><a name="GUID-05DFEA70-FDAF-4FAF-BF26-37225151A7D7__GUID-8B83801E-E630-45E9-ABDE-3BB4E7B7C568"><!-- --></a>任务2传输导出转储文件</dt>
                           <dd>
                              <p>将转储文件传输到<code class="codeph">DATA_PUMP_DIR</code>目录对象指向的目录，或者传输到您选择的任何其他目录。目标数据库必须可以访问新位置。
                              </p>
                              <p>在目标数据库中，运行以下查询以确定<code class="codeph">DATA_PUMP_DIR</code>的位置：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM DBA_DIRECTORIES WHERE DIRECTORY_NAME ='DATA_PUMP_DIR'; OWNER DIRECTORY_NAME DIRECTORY_PATH ---------- ---------------- --------------------- -------------- SYS DATA_PUMP_DIR C：\ app \ orauser \ admin \ orawin \ dpdump \</pre></dd>
                           <dt class="dlterm"><a name="GUID-05DFEA70-FDAF-4FAF-BF26-37225151A7D7__GUID-EC523CED-5A08-463D-A9FF-AEC2F603C857"><!-- --></a>任务3传输用户定义表空间的数据文件</dt>
                           <dd>
                              <p>将数据库中用户定义的表空间的数据文件传输到目标数据库可访问的位置。</p>
                              <p>在此示例中，将以下数据文件从源数据库传输到目标数据库：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">sales01.dbf</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">cust01.dbf</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">emp01.dbf</code></p>
                                 </li>
                              </ul>
                              <p>如果要将数据库传输到与源平台不同的平台，请确定源平台和目标平台是否支持跨平台数据库传输，并确定每个平台的字节顺序。如果两个平台具有相同的字节顺序，则无需转换。否则，您必须在源数据库或目标数据库中对数据库中的每个表空间进行转换。</p>
                              <p>如果要将数据库传输到其他平台，则可以在每个平台上执行以下查询。如果查询返回一行，则该平台支持跨平台表空间传输。</p><pre class="oac_no_warn" dir="ltr">选择d。PLATFORM_NAME，来自V $ TRANSPORTABLE_PLATFORM的ENDIAN_FORMAT tp，V $ DATABASE d WHERE tp。PLATFORM_NAME = d。PLATFORM_NAME;</pre><p>以下是源平台的查询结果：</p><pre class="oac_no_warn" dir="ltr">PLATFORM_NAME ENDIAN_FORMAT ---------------------------------- -------------- Solaris [tm] OE（32位）大</pre><p>以下是目标平台的查询结果：</p><pre class="oac_no_warn" dir="ltr">PLATFORM_NAME ENDIAN_FORMAT ---------------------------------- -------------- Microsoft Windows IA（32位）很少</pre><p>在此示例中，您可以看到endian格式不同。因此，在这种情况下，转换对于传输数据库是必要的。使用<code class="codeph">DBMS_FILE_TRANSFER</code>包中的<code class="codeph">GET_FILE</code>或<code class="codeph">PUT_FILE</code>过程来传输数据文件。这些过程自动将数据文件转换为目标平台的endian格式。将数据文件传输到目标数据库的现有数据文件的位置。在UNIX和Linux平台上，此位置通常为/ u01 / app / oracle / oradata / <span class="italic">dbname</span> /或+ <span class="italic">DISKGROUP</span> / <span class="italic">dbname</span> / datafile /。或者，您可以使用RMAN <code class="codeph">CONVERT</code>命令转换数据文件。有关详细信息，请参阅<span class="q">“ <a href="transporting-data.html#GUID-E4B0F929-79D0-4DEE-B1DD-378BDBC31A0B" title="当您执行可传输操作，并且源平台和目标平台具有不同的字节顺序时，您必须将传输的数据转换为目标平台格式。如果源平台和目标平台具有相同的字节顺序，则不需要进行数据转换。您可以使用DBMS_FILE_TRANSFER包或RMAN CONVERT命令来转换数据。">在平台之间转换数据</a> ”</span> 。
                              </p>
                              <div class="infoboxnote" id="GUID-05DFEA70-FDAF-4FAF-BF26-37225151A7D7__GUID-DB8CDFE4-37CF-45B6-A97C-F7DDADE7A274">
                                 <p class="notep1">注意：</p>
                                 <p>如果不需要表空间的字节顺序转换，则可以使用任何文件传输方法传输文件。</p>
                              </div>
                           </dd>
                           <dt class="dlterm"><a name="GUID-05DFEA70-FDAF-4FAF-BF26-37225151A7D7__GUID-4229FFC9-CB5B-4E18-9B46-16A7D609A31B"><!-- --></a>任务4（可选）将表空间恢复为读/写模式</dt>
                           <dd>
                              <p>使传输的表空间在源数据库中再次读/写，如下所示：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE销售READ WRITE; ALTER TABLESPACE客户READ WRITE; ALTER TABLESPACE员工READ WRITE;</pre><p>您可以推迟此任务以首先确保导入过程成功。</p>
                           </dd>
                           <dt class="dlterm"><a name="GUID-05DFEA70-FDAF-4FAF-BF26-37225151A7D7__GUID-84008ECA-E44F-4B86-BD5B-604935F22D19"><!-- --></a>任务5在目标数据库中，导入数据库</dt>
                           <dd>
                              <p>以具有<code class="codeph">DATAPUMP_IMP_FULL_DATABASE</code>角色的用户身份调用Data Pump导入实用程序，并指定完全可传输的导出/导入选项。
                              </p><pre class="oac_no_warn" dir="ltr">impdp <span class="italic">user_name</span> full = Y dumpfile = expdat.dmp directory = data_pump_dir transport_datafiles ='/ u01 / app / oracle / oradata / mydb / users01.dbf'，'/ u01 / app / oracle /oradata / mydb / cust01.dbf'，' /u01/app/oracle/oradata/mydb/emp01.dbf'logfile = import.log密码： <span class="italic">密码</span>
</pre><p>此示例指定以下数据泵参数：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">FULL</code>参数指定以<code class="codeph">FULL</code>模式导入整个数据库。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DUMPFILE</code>参数指定导出的文件，其中包含用户定义的表空间的元数据以及要导入的管理表空间的元数据和数据。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DIRECTORY</code>参数指定标识导出转储文件位置的目录对象。您必须在调用Data Pump之前创建<code class="codeph">DIRECTORY</code>对象，并且必须将该目录的<code class="codeph">READ</code>和<code class="codeph">WRITE</code>对象权限授予运行Import实用程序的用户。有关<code class="codeph">CREATE</code> <code class="codeph">DIRECTORY</code>命令的信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=SQLRF01207" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。
                                    </p>
                                    <p>在非CDB中，将自动创建目录对象<code class="codeph">DATA_PUMP_DIR</code> 。对此目录的读写访问权限自动授予<code class="codeph">DBA</code>角色，从而授予用户<code class="codeph">SYS</code>和<code class="codeph">SYSTEM</code> 。</p>
                                    <p>但是，目录对象<code class="codeph">DATA_PUMP_DIR</code>不会在PDB中自动创建。因此，在导入PDB时，在PDB中创建目录对象，并在运行Data Pump时指定目录对象。
                                    </p>
                                    <div class="infoboxnotealso" id="GUID-05DFEA70-FDAF-4FAF-BF26-37225151A7D7__GUID-64A0F3C4-FAC2-41B7-9E14-C7B4D6E8B657">
                                       <p class="notep1">也可以看看：</p>
                                       <p></p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>有关默认目录的信息，请参阅<a href="../sutil/oracle-data-pump-overview.html#SUTIL810" target="_blank"><span class="italic">Oracle Database Utilities</span></a> ，省略<code class="codeph">DIRECTORY</code>参数</p>
                                          </li>
                                          <li>
                                             <p>有关PDB的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=MULTI-GUID-528FBE02-2B84-4E97-BD87-36AEF9EA524D" target="_blank"><span><cite>“Oracle Multitenant管理员指南”</cite></span></a></p>
                                          </li>
                                       </ul>
                                    </div>
                                 </li>
                                 <li>
                                    <p><code class="codeph">TRANSPORT_DATAFILES</code>参数标识要导入的所有数据文件。
                                    </p>
                                    <p>如果有许多数据文件，则可以在使用<code class="codeph">PARFILE</code>参数指定的参数文件中多次指定<code class="codeph">TRANSPORT_DATAFILES</code>参数。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">LOGFILE</code>参数指定要由导入实用程序写入的日志文件的文件名。在此示例中，日志文件将写入从中读取转储文件的目录，但可以将其写入其他位置。
                                    </p>
                                 </li>
                              </ul>
                              <p>成功执行此语句后，请检查导入日志文件以确保未发生意外错误。</p>
                              <p>处理大量数据文件时，在语句行中指定数据文件名列表可能是一个费力的过程。它甚至可以超过声明行限制。在这种情况下，您可以使用导入参数文件。例如，您可以按如下方式调用Data Pump导入实用程序：</p><pre class="oac_no_warn" dir="ltr">impdp <span class="italic">user_name</span> parfile ='par.f'</pre><p>例如， <code class="codeph">par.f</code>可能包含以下行：</p><pre class="oac_no_warn" dir="ltr">FULL = Y DUMPFILE = expdat.dmp DIRECTORY = data_pump_dir TRANSPORT_DATAFILES ='/ u01 / app / oracle / oradata / mydb / valley01.dbf'，'/ u01 / app / oracle / oradata / mydb / cust01.dbf'，'/ u01 /app/oracle/oradata/mydb/emp01.dbf'logFILE = import.log</pre><div class="infoboxnote" id="GUID-05DFEA70-FDAF-4FAF-BF26-37225151A7D7__GUID-98FEE9C0-1907-460F-99DE-44C2D71E9BC1">
                                 <p class="notep1">注意：</p>
                                 <p></p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>在导入期间，可能会暂时对用户定义的表空间进行读/写以进行元数据加载。确保在导入期间不对用户进行任何更改。成功完成导入后，所有用户定义的表空间都是可读/写的。</p>
                                    </li>
                                    <li>
                                       <p>执行网络数据库导入时，必须将<code class="codeph">TRANSPORTABLE</code>参数设置为<code class="codeph">always</code> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p><a id="d158599e2699" class="indexterm-anchor"></a><a id="d158599e2703" class="indexterm-anchor"></a><a id="d158599e2707" class="indexterm-anchor"></a>在CDB中导入PDB时，请在用户名后指定PDB的连接标识符。例如，如果PDB的连接标识符是<code class="codeph">hrpdb</code> ，则在运行Oracle Data Pump Import实用程序时输入以下内容：</p><pre class="oac_no_warn" dir="ltr">impdp <span class="italic">user_name</span> @hrpdb ...</pre></li>
                                 </ul>
                              </div>
                              <div class="infoboxnotealso" id="GUID-05DFEA70-FDAF-4FAF-BF26-37225151A7D7__GUID-7A1B83CA-F24F-4E0A-A6BC-B55150EA2679">
                                 <p class="notep1">也可以看看：</p>
                                 <p> </p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>有关使用导入实用<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=SUTIL300" target="_blank"><span class="italic">程序</span></a>的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=SUTIL300" target="_blank"><span class="italic">参见Oracle Database Utilities</span></a></p>
                                    </li>
                                    <li>
                                       <p><a href="../multi/managing-a-multitenant-environment.html#MULTI-GUID-93F1E584-D309-4301-82E0-AD0E60D4977C" target="_blank"><span><cite>Oracle多租户管理员指南</cite></span></a></p>
                                    </li>
                                 </ul>
                              </div>
                           </dd>
                        </dl>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-399ECCDE-1E8C-432E-AACD-6DE2AD6A4B26" title="您可以将数据库传输到新的Oracle数据库实例。">传输数据库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13874"></a><a id="ADMIN13875"></a><a id="ADMIN13876"></a><a id="ADMIN13877"></a><a id="ADMIN13878"></a><a id="ADMIN13895"></a><a id="ADMIN13873"></a><div class="props_rev_3"><a id="GUID-032C9715-B2F8-4ACD-8A1C-C1A899DEA3C1" name="GUID-032C9715-B2F8-4ACD-8A1C-C1A899DEA3C1"></a><h4 id="ADMIN-GUID-032C9715-B2F8-4ACD-8A1C-C1A899DEA3C1" class="sect4"><span class="enumeration_section">15.2.4</span>通过网络传输数据库</h4>
                  <div>
                     <p>您可以通过网络传输数据库。</p>
                     <div class="section">
                        <p>要通过网络传输数据库，请使用<code class="codeph">NETWORK_LINK</code>参数执行导入，使用数据库链接执行导入，并且不涉及转储文件。
                        </p>
                        <p>以下任务列表总结了通过网络传输数据库的过程。后续示例中提供了每项任务的详细信息。</p>
                        <ol>
                           <li>
                              <p>创建从目标数据库到源数据库的数据库链接。</p>
                              <p>进口操作必须通过与目标数据库上的用户进行<code class="codeph">DATAPUMP_IMP_FULL_DATABASE</code>角色，而数据库链接必须连接到与源数据库的用户<code class="codeph">DATAPUMP_EXP_FULL_DATABASE</code>作用。源数据库上的用户不能是具有<code class="codeph">SYSDBA</code>管理权限的用户。如果数据库链接是已连接的用户数据库链接，则目标数据库上的用户不能是具有<code class="codeph">SYSDBA</code>管理权限的用户。有关连接的用户数据库链接的信息，请参阅<span class="q">“ <a href="distributed-database-concepts.html#GUID-27C0C352-804F-4545-B43C-E33FA4506E44" title="创建链接时，您可以确定哪个用户应连接到远程数据库以访问数据。">数据库链接的用户</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在源数据库中，使数据库中的用户定义表空间为只读。</p>
                           </li>
                           <li>
                              <p>传输数据库中所有用户定义的表空间的数据文件。</p>
                              <p>将数据文件复制到目标数据库可访问的位置。</p>
                              <p>如果源平台和目标平台不同，则通过在<span class="q">“ <a href="transporting-data.html#GUID-FE3003B9-605A-4269-B167-005AC778C870" title="您可以跨平台传输数据。">跨平台传输数据</a> ”中</span>的<code class="codeph">V$TRANSPORTABLE_PLATFORM</code>视图上运行查询来检查每个平台的endian格式。
                              </p>
                              <p>如果源平台的endian格式与目标平台的endian格式不同，则使用以下方法之一转换数据文件：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>使用<code class="codeph">DBMS_FILE_TRANSFER</code>包中的<code class="codeph">GET_FILE</code>或<code class="codeph">PUT_FILE</code>过程来传输数据文件。这些过程自动将数据文件转换为目标平台的endian格式。
                                    </p>
                                 </li>
                                 <li>
                                    <p>使用RMAN <code class="codeph">CONVERT</code>命令将数据文件转换为目标平台的endian格式。
                                    </p>
                                    <div class="infoboxnote" id="GUID-032C9715-B2F8-4ACD-8A1C-C1A899DEA3C1__GUID-855AE69B-0881-4F82-B6DB-9B1FEC3C9FB4">
                                       <p class="notep1">注意：</p>
                                       <p>具有还原段的数据文件不支持在不同的endian格式之间转换数据文件。</p>
                                    </div>
                                 </li>
                              </ul>
                              <p>有关详细信息，请参阅<span class="q">“ <a href="transporting-data.html#GUID-E4B0F929-79D0-4DEE-B1DD-378BDBC31A0B" title="当您执行可传输操作，并且源平台和目标平台具有不同的字节顺序时，您必须将传输的数据转换为目标平台格式。如果源平台和目标平台具有相同的字节顺序，则不需要进行数据转换。您可以使用DBMS_FILE_TRANSFER包或RMAN CONVERT命令来转换数据。">在平台之间转换数据</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在目标数据库中，导入数据库。</p>
                              <p>调用Data Pump实用程序以导入用户定义的表空间的元数据以及管理表空间的元数据和数据。</p>
                              <p>确保将以下参数设置为指定值：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">可携带= ALWAYS</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">TRANSPORT_DATAFILES=</code> <span class="italic"><code class="codeph">list_of_datafiles</code></span></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">FULL = Y</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">NETWORK_LINK=</code> <span class="italic"><code class="codeph">source_database_link</code></span></p>
                                    <p>将<span class="italic"><code class="codeph">source_database_link</code></span>替换为源数据库的数据库链接的名称。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">VERSION = 12</code></p>
                                    <p>如果源数据库是Oracle Database <span class="italic">11g</span>第2版（11.2.0.3）或更高版本的Oracle Database 11 <span class="italic">g</span>数据库，则<code class="codeph">VERSION</code>参数是必需的，必须设置为<code class="codeph">12</code> 。如果源数据库是Oracle Database <span class="italic">12c</span>或更高版本的数据库，则不需要<code class="codeph">VERSION</code>参数。
                                    </p>
                                 </li>
                              </ul>
                              <p>如果源数据库包含任何包含加密列表的加密表空间或表空间，则必须指定<code class="codeph">ENCRYPTION_PWD_PROMPT=YES</code> ，或指定<code class="codeph">ENCRYPTION_PASSWORD</code>参数。
                              </p>
                              <p>Data Pump网络导入复制用户定义的表空间中包含的对象的元数据，以及管理表空间（如<code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code>包含的用户定义对象的元数据和数据。</p>
                              <p>导入完成后，用户定义的表空间处于读/写模式。</p>
                           </li>
                           <li>
                              <p>（可选）将用户定义的表空间恢复为源数据库上的读/写模式。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-032C9715-B2F8-4ACD-8A1C-C1A899DEA3C1__GUID-CDC7755A-4C10-4D90-8948-E015325D8F9F">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>这些用于传输数据库的任务在下面的示例中进行了更全面的说明，其中假设存在以下数据文件和表空间：</p>
                        <div class="tblformal" id="GUID-032C9715-B2F8-4ACD-8A1C-C1A899DEA3C1__GUID-88214CEC-A176-448C-A7D1-A6990B83C754">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table lists the assumptions for the following example. Column 1 provides the tablespace name, column 2 describes the tablespace type, and column 3 lists its datafile." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="19%" id="d158599e2969">表空间</th>
                                    <th align="left" valign="bottom" width="24%" id="d158599e2972">类型</th>
                                    <th align="left" valign="bottom" width="57%" id="d158599e2975">数据文件</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d158599e2980" headers="d158599e2969 ">
                                       <p>销售</p>
                                    </td>
                                    <td align="left" valign="top" width="24%" headers="d158599e2980 d158599e2972 ">
                                       <p>用户自定义</p>
                                    </td>
                                    <td align="left" valign="top" width="57%" headers="d158599e2980 d158599e2975 ">
                                       <p>/u01/app/oracle/oradata/mydb/sales01.dbf</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d158599e2990" headers="d158599e2969 ">
                                       <p>顾客</p>
                                    </td>
                                    <td align="left" valign="top" width="24%" headers="d158599e2990 d158599e2972 ">
                                       <p>用户自定义</p>
                                    </td>
                                    <td align="left" valign="top" width="57%" headers="d158599e2990 d158599e2975 ">
                                       <p>/u01/app/oracle/oradata/mydb/cust01.dbf</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d158599e3000" headers="d158599e2969 ">
                                       <p>雇员</p>
                                    </td>
                                    <td align="left" valign="top" width="24%" headers="d158599e3000 d158599e2972 ">
                                       <p>用户自定义</p>
                                    </td>
                                    <td align="left" valign="top" width="57%" headers="d158599e3000 d158599e2975 ">
                                       <p>/u01/app/oracle/oradata/mydb/emp01.dbf</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d158599e3010" headers="d158599e2969 ">
                                       <p>系统</p>
                                    </td>
                                    <td align="left" valign="top" width="24%" headers="d158599e3010 d158599e2972 ">
                                       <p>行政的</p>
                                    </td>
                                    <td align="left" valign="top" width="57%" headers="d158599e3010 d158599e2975 ">
                                       <p>/u01/app/oracle/oradata/mydb/system01.dbf</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="19%" id="d158599e3020" headers="d158599e2969 ">
                                       <p>SYSAUX</p>
                                    </td>
                                    <td align="left" valign="top" width="24%" headers="d158599e3020 d158599e2972 ">
                                       <p>行政的</p>
                                    </td>
                                    <td align="left" valign="top" width="57%" headers="d158599e3020 d158599e2975 ">
                                       <p>/u01/app/oracle/oradata/mydb/sysaux01.dbf</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>此示例进行以下附加假设：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>目标数据库是使用源数据库中的数据填充的新数据库。源数据库的名称是<code class="codeph">sourcedb</code> 。
                              </p>
                           </li>
                           <li>
                              <p>源数据库和目标数据库在具有相同字节顺序的同一平台上运行。</p>
                              <p>要检查平台的字节顺序，请运行以下查询：</p><pre class="oac_no_warn" dir="ltr">选择d。PLATFORM_NAME，来自V $ TRANSPORTABLE_PLATFORM的ENDIAN_FORMAT tp，V $ DATABASE d WHERE tp。PLATFORM_NAME = d。PLATFORM_NAME;</pre></li>
                           <li>
                              <p><code class="codeph">sales</code>表空间已加密。其他表空间未加密。
                              </p>
                           </li>
                           <li>
                              <p>源数据库是Oracle Database <span class="italic">11g</span>第2版（11.2.0.3）数据库，目标数据库是Oracle Database 19c数据库。
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-032C9715-B2F8-4ACD-8A1C-C1A899DEA3C1__GUID-23F364A5-F51A-4829-BAE6-1608F0C873E7">
                           <p class="notep1">注意：</p>
                           <p>此示例说明了将Oracle Database <span class="italic">11g</span>第2版（11.2.0.3）传输到CDB中的新Oracle Database 19c PDB所需的任务。这些任务还说明了如何将一个非CDB传输到另一个非CDB。</p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-032C9715-B2F8-4ACD-8A1C-C1A899DEA3C1__GUID-07B80F0F-7D7B-456A-AE8D-D624B1BD7499">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../multi/managing-a-multitenant-environment.html#MULTI-GUID-93F1E584-D309-4301-82E0-AD0E60D4977C" target="_blank"><span><cite>Oracle多租户管理员指南</cite></span></a></p>
                        </div>
                        <p>完成以下任务以通过网络传输数据库：</p>
                        <dl>
                           <dt class="dlterm"><a name="GUID-032C9715-B2F8-4ACD-8A1C-C1A899DEA3C1__GUID-FAD7FB06-78B3-459C-8970-4F044C08E702"><!-- --></a>任务1创建从目标数据库到源数据库的数据库链接</dt>
                           <dd>
                              <p>通过完成以下步骤，创建从目标数据库到源数据库的数据库链接：</p>
                              <ol>
                                 <li>
                                    <p>确保在源数据库和目标数据库之间配置了网络连接。</p>
                                    <p>有关说明，请参见“ <a href="../netag/index.html" target="_blank"><span class="italic">Oracle数据库网络服务管理员指南</span></a> ”。
                                    </p>
                                 </li>
                                 <li>
                                    <p>启动SQL * Plus并以管理员身份连接到目标数据库，管理员将使用Data Pump导入来传输数据库。此用户必须具有<code class="codeph">DATAPUMP_IMP_FULL_DATABASE</code>角色才能传输数据库。
                                    </p>
                                    <p>有关说明，请参阅<span class="q">“ <a href="getting-started-with-database-administration.html#GUID-895EC72B-C620-4D93-9F23-3F6DC1706764" title="Oracle数据库包括以下组件：Oracle数据库实例，它是进程和内存的集合，以及一组包含用户数据和系统数据的磁盘文件。">使用SQL * Plus连接到数据库</a> ”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>创建数据库链接：</p><pre class="oac_no_warn" dir="ltr">创建公共数据库链接sourcedb使用'sourcedb';</pre><p>在using子句中指定源数据库的服务名称。</p>
                                    <p>在导入操作期间，数据库链接必须使用<code class="codeph">DATAPUMP_EXP_FULL_DATABASE</code>角色连接到源数据库上的用户。源数据库上的用户不能是具有<code class="codeph">SYSDBA</code>管理权限的用户。
                                    </p>
                                 </li>
                              </ol>
                              <div class="infoboxnotealso" id="GUID-032C9715-B2F8-4ACD-8A1C-C1A899DEA3C1__GUID-F24162DC-C314-4FD4-9EC6-4938130A0186">
                                 <p class="notep1">也可以看看：</p>
                                 <p></p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="q">“ <a href="managing-a-distributed-database.html#GUID-B5950167-35F8-4C88-B063-382E0290CB53" title="要支持对分布式数据库系统中的数据和模式对象的应用程序访问，必须创建所有必需的数据库链接。">创建数据库链接</a> ”</span></p>
                                    </li>
                                    <li>
                                       <p><a href="../sqlrf/CREATE-DATABASE-LINK.html#SQLRF01205" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                                    </li>
                                 </ul>
                              </div>
                           </dd>
                           <dt class="dlterm"><a name="GUID-032C9715-B2F8-4ACD-8A1C-C1A899DEA3C1__GUID-944628FF-D6F5-45E1-AE18-34D806BFCE4E"><!-- --></a>任务2使用户定义的表空间为只读</dt>
                           <dd>
                              <p>完成以下步骤：</p>
                              <ol>
                                 <li>
                                    <p>启动SQL * Plus并以管理员或具有<code class="codeph">ALTER</code> <code class="codeph">TABLESPACE</code>或<code class="codeph">MANAGE</code> <code class="codeph">TABLESPACE</code>系统特权的用户身份连接到源数据库。
                                    </p>
                                    <p>有关说明，请参阅<span class="q">“ <a href="getting-started-with-database-administration.html#GUID-895EC72B-C620-4D93-9F23-3F6DC1706764" title="Oracle数据库包括以下组件：Oracle数据库实例，它是进程和内存的集合，以及一组包含用户数据和系统数据的磁盘文件。">使用SQL * Plus连接到数据库</a> ”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>使数据库中的所有用户定义的表空间都是只读的。</p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE销售仅供参考; ALTER TABLESPACE客户只读; ALTER TABLESPACE员工只读;</pre></li>
                              </ol>
                           </dd>
                           <dt class="dlterm"><a name="GUID-032C9715-B2F8-4ACD-8A1C-C1A899DEA3C1__GUID-00FC8503-C849-4E12-9F0C-3ADCF3FF5C20"><!-- --></a>任务3传输用户定义表空间的数据文件</dt>
                           <dd>
                              <p>将数据文件传输到目标数据库的现有数据文件的位置。</p>
                              <p>在UNIX和Linux平台上，此位置通常为/ u01 / app / oracle / oradata / <span class="italic">dbname</span> /或+ <span class="italic">DISKGROUP</span> / <span class="italic">dbname</span> / datafile /。
                              </p>
                              <p>在此示例中，将以下数据文件从源数据库传输到目标数据库：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">sales01.dbf</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">cust01.dbf</code></p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">emp01.dbf</code></p>
                                 </li>
                              </ul>
                              <div class="infoboxnotealso" id="GUID-032C9715-B2F8-4ACD-8A1C-C1A899DEA3C1__GUID-6B0B2EAC-791B-4BE6-8198-3C2CFF8BB9B6">
                                 <p class="notep1">也可以看看：</p>
                                 <p> <span class="q">“ <a href="transporting-data.html#GUID-4F6AE634-053F-4CA9-AB53-7DA8B0047699" title="传输数据文件时，应遵循一套准则。">传输数据文件的指南</a> ”</span></p>
                              </div>
                           </dd>
                           <dt class="dlterm"><a name="GUID-032C9715-B2F8-4ACD-8A1C-C1A899DEA3C1__GUID-6C757736-BD95-433F-80D8-04F91D92B50B"><!-- --></a>任务4在目标数据库中，导入数据库</dt>
                           <dd>
                              <p>以具有<code class="codeph">DATAPUMP_IMP_FULL_DATABASE</code>角色的用户身份调用Data Pump导入实用程序，并指定完全可传输的导出/导入选项。
                              </p><pre class="oac_no_warn" dir="ltr">impdp <span class="italic">user_name</span> full = Y network_link = sourcedb transportable = always transport_datafiles ='/ u01 / app / oracle /oradata / mydb / users01.dbf'，'/ u01 / app / oora / odata / mydb / cust01.dbf'，'/ u01 /app/oracle/oradata/mydb/emp01.dbf'encrypt_pwd_prompt = YES version = 12 logfile = import.log密码： <span class="italic">密码</span>
</pre><p>此示例指定以下数据泵参数：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">FULL</code>参数指定以<code class="codeph">FULL</code>模式导入整个数据库。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">NETWORK_LINK</code>参数指定用于网络导入的数据库链接。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">TRANSPORTABLE</code>参数指定导入使用可传输选项。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">TRANSPORT_DATAFILES</code>参数标识要导入的所有数据文件。
                                    </p>
                                    <p>如果有许多数据文件，则可以在使用<code class="codeph">PARFILE</code>参数指定的参数文件中多次指定<code class="codeph">TRANSPORT_DATAFILES</code>参数。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ENCRYPTION_PWD_PROMPT</code>参数指示Data Pump提示您输入加密密码，Data Pump会加密通过网络连接发送的数据和元数据。当加密的表空间或带有加密列的表是导入操作的一部分时，需要<code class="codeph">ENCRYPTION_PWD_PROMPT</code>参数或<code class="codeph">ENCRYPTION_PASSWORD</code>参数。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">VERSION</code>参数设置为<code class="codeph">12</code>因为源数据库是Oracle Database <span class="italic">11g</span>第2版（11.2.0.3）或更高版本的Oracle Database 11 <span class="italic">g</span>数据库。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">LOGFILE</code>参数指定要由导入实用程序写入的日志文件的文件名。
                                    </p>
                                 </li>
                              </ul>
                              <p>成功执行此语句后，请检查导入日志文件以确保未发生意外错误。</p>
                              <p>处理大量数据文件时，在语句行中指定数据文件名列表可能是一个费力的过程。它甚至可以超过声明行限制。在这种情况下，您可以使用导入参数文件。</p>
                              <p>当加密的表空间或带有加密列的表是导入操作的一部分时，还建议使用导入参数文件。在这种情况下，请在导入参数文件中指定<code class="codeph">ENCRYPTION_PWD_PROMPT=YES</code> 。
                              </p>
                              <p>例如，您可以按如下方式调用Data Pump导入实用程序：</p><pre class="oac_no_warn" dir="ltr">impdp <span class="italic">user_name</span> parfile ='par.f'</pre><p>例如， <code class="codeph">par.f</code>可能包含以下行：</p><pre class="oac_no_warn" dir="ltr">FULL = Y NETWORK_LINK = sourcedb TRANSPORTABLE =始终TRANSPORT_DATAFILES ='/ u01 / app / oracle /oradata / mydb / sort01.dbf'，'/ u01 / app / oracle /oradata / mydb / cust01.dbf'，'/ u01 / app /oracle/oradata/mydb/emp01.dbf'ENCRYPTION_PWD_PROMPT = YES VERSION = 12 LOGFILE = import.log</pre><div class="infoboxnote" id="GUID-032C9715-B2F8-4ACD-8A1C-C1A899DEA3C1__GUID-609A291B-F8EE-4D67-9BD4-83F3DD7430D2">
                                 <p class="notep1">注意：</p>
                                 <p></p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>在导入期间，可能会暂时对用户定义的表空间进行读/写以进行元数据加载。确保在导入期间不对用户进行任何更改。成功完成导入后，所有用户定义的表空间都是可读/写的。</p>
                                    </li>
                                    <li>
                                       <p><a id="d158599e3342" class="indexterm-anchor"></a><a id="d158599e3346" class="indexterm-anchor"></a><a id="d158599e3350" class="indexterm-anchor"></a>在CDB中导入PDB时，请在用户名后指定PDB的连接标识符。例如，如果PDB的连接标识符是<code class="codeph">hrpdb</code> ，则在运行Oracle Data Pump Import实用程序时输入以下内容：</p><pre class="oac_no_warn" dir="ltr">impdp <span class="italic">user_name</span> @hrpdb ...</pre></li>
                                 </ul>
                              </div>
                              <div class="infoboxnotealso" id="GUID-032C9715-B2F8-4ACD-8A1C-C1A899DEA3C1__GUID-84ED5E1B-C46A-475D-B457-446E8DFC8200">
                                 <p class="notep1">也可以看看：</p>
                                 <p>有关使用导入实用<a href="../sutil/datapump-import-utility.html#SUTIL300" target="_blank"><span class="italic">程序</span></a>的信息，请<a href="../sutil/datapump-import-utility.html#SUTIL300" target="_blank"><span class="italic">参见Oracle Database Utilities</span></a></p>
                              </div>
                           </dd>
                           <dt class="dlterm"><a name="GUID-032C9715-B2F8-4ACD-8A1C-C1A899DEA3C1__GUID-677D71FF-7876-4A16-9206-87CE48853C93"><!-- --></a>任务5（可选）将用户定义的表空间恢复为读/写模式</dt>
                           <dd>
                              <p>使用户定义的表空间在源数据库中再次读/写，如下所示：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE销售READ WRITE; ALTER TABLESPACE客户READ WRITE; ALTER TABLESPACE员工READ WRITE;</pre><p>您可以推迟此任务以首先确保导入过程成功。</p>
                           </dd>
                        </dl>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-399ECCDE-1E8C-432E-AACD-6DE2AD6A4B26" title="您可以将数据库传输到新的Oracle数据库实例。">传输数据库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN11394"></a><div class="props_rev_3"><a id="GUID-F7B2B591-AA88-4D16-8DCF-712763923FFB" name="GUID-F7B2B591-AA88-4D16-8DCF-712763923FFB"></a><h3 id="ADMIN-GUID-F7B2B591-AA88-4D16-8DCF-712763923FFB" class="sect3"><span class="enumeration_section">15.3</span>在数据库之间传输表空间</h3>
               <div>
                  <p>您可以在数据库之间传输表空间。</p>
                  <div class="infoboxnote" id="GUID-F7B2B591-AA88-4D16-8DCF-712763923FFB__GUID-B2E8A834-D8C4-4D19-BC34-B5B63426C5A8">
                     <p class="notep1">注意：</p>
                     <p>要在不同平台上将可传输表空间集导入Oracle数据库，两个数据库的兼容性必须至少设置为10.0.0。有关跨版本级别传输表空间的数据库兼容性的讨论，请参阅<span class="q">“ <a href="transporting-data.html#GUID-AC5C8D9D-796A-4EDE-AC35-AF963ECCFE5C" title="传输数据时，Oracle数据库会计算目标数据库必须运行的最低兼容级别。">传输数据的兼容性注意事项</a> ”</span> 。
                     </p>
                  </div>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="transporting-data.html#GUID-9304426D-9D40-4F0D-8661-F53B608A652F">可传输表空间简介</a><br>您可以使用可传输表空间功能将一组表空间从一个Oracle数据库复制到另一个Oracle数据库。
                     </li>
                     <li class="ulchildlink"><a href="transporting-data.html#GUID-DAB51E42-9BBC-4001-B5CB-0ECDBE128787">可传输表空间的限制</a><br>本节列出了可传输表空间的限制。
                     </li>
                     <li class="ulchildlink"><a href="transporting-data.html#GUID-E4C56852-73A5-44A2-BB10-938831DA6E4C">在数据库之间传输表空间</a><br>您可以在数据库之间传输表空间或一组表空间。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-1901E9C3-8FCE-4D4E-AB65-34D703474E52" title="传输数据会将数据从一个数据库移动到另一个数据库。">传输数据</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN01101"></a><div class="props_rev_3"><a id="GUID-9304426D-9D40-4F0D-8661-F53B608A652F" name="GUID-9304426D-9D40-4F0D-8661-F53B608A652F"></a><h4 id="ADMIN-GUID-9304426D-9D40-4F0D-8661-F53B608A652F" class="sect4"><span class="enumeration_section">15.3.1</span>可传输表空间简介</h4>
                  <div>
                     <p>您可以使用可传输表空间功能将一组表空间从一个Oracle数据库复制到另一个Oracle数据库。</p>
                     <p>传输的表空间可以是字典管理的，也可以是本地管理的。传输的表空间不需要与目标数据库标准块大小具有相同的块大小。<span class="q">“ <a href="transporting-data.html#GUID-DE09D211-D0C8-481A-9ECE-1F4B702E9452" title="在几种情况下，传输数据非常有用。">传输数据：场景</a> ”</span>中讨论了这些场景。
                     </p>
                     <p>有两种传输表空间的方法：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>手动，按照本节中描述的步骤操作。这涉及向SQL * Plus和Data Pump发出命令。</p>
                        </li>
                        <li>
                           <p>在Oracle Enterprise Manager云控制中使用传输表空间向导</p>
                           <p><span class="bold">要运行传输表空间向导：</span></p>
                           <ol>
                              <li>
                                 <p>使用具有<code class="codeph">DATAPUMP_EXP_FULL_DATABASE</code>角色的用户登录Cloud Control。
                                 </p>
                              </li>
                              <li>
                                 <p>访问数据库主页。</p>
                              </li>
                              <li>
                                 <p>从Schema菜单中，选择<span class="bold">Database Export / Import</span> ，然后选择<span class="bold">Transport Tablespaces</span> 。
                                 </p>
                              </li>
                           </ol>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-9304426D-9D40-4F0D-8661-F53B608A652F__GUID-A81DF2AA-C824-4369-81CE-28D0A434E360">
                        <p class="notep1">注意：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>这种传输表空间的方法要求您将表空间放置为以只读模式传输，直到完成传输过程。如果这是不合需要的，你可以使用<a id="d158599e3543" class="indexterm-anchor"></a> <a href="../bradv/creating-transportable-tablespace-sets.html#BRADV05141" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南中</span></a>描述的来自备份功能的可传输表空间。
                              </p>
                           </li>
                           <li>
                              <p>您必须将Data Pump用于可传输的表空间。您可以使用原始导入和导出实用程序IMP和EXP的唯一情况是将XMLType数据向后迁移到Oracle数据库<span class="italic">10g</span>第2版（10.2）或更早版本的数据库。有关这些实用<a href="../sutil/index.html" target="_blank"><span class="italic">程序</span></a>的更多信息，请参阅<a href="../sutil/index.html" target="_blank"><span class="italic">Oracle数据库实用程序</span></a> ;有关XMLType的更多信息，请参阅<a href="../sutil/index.html" target="_blank"><span class="italic">Oracle</span></a> <a href="../adxdb/intro-to-XML-DB.html#ADXDB3970" target="_blank"><span class="italic">XML DB Developer's Guide</span></a> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-9304426D-9D40-4F0D-8661-F53B608A652F__GUID-AEB8870E-DE9A-4736-AFA7-4449D5E70587">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="transporting-data.html#GUID-C8044A0E-B870-4F21-8D46-5CE5EFE7F0D9" title="您可以在以下级别传输数据：数据库，表空间，表，分区和子分区。">关于传输数据</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../dwhsg/transportation-data-warehouses.html#DWHSG8301" target="_blank"><span class="italic">“Oracle数据库数据仓库指南”，</span></a>以获取有关在数据仓库环境中使用可传输表空间的信息</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-F7B2B591-AA88-4D16-8DCF-712763923FFB" title="您可以在数据库之间传输表空间。">在数据库之间传输表空间</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13896"></a><div class="props_rev_3"><a id="GUID-DAB51E42-9BBC-4001-B5CB-0ECDBE128787" name="GUID-DAB51E42-9BBC-4001-B5CB-0ECDBE128787"></a><h4 id="ADMIN-GUID-DAB51E42-9BBC-4001-B5CB-0ECDBE128787" class="sect4"><span class="enumeration_section">15.3.2可</span>传输表空间的限制</h4>
                  <div>
                     <p>本节列出了可传输表空间的限制。</p>
                     <p>请注意可传输表空间的以下限制：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="transporting-data.html#GUID-28800719-6CB9-4A71-95DD-4B61AA603173" title="There are general limitations on transporting data. There are also limitations that are specific to full transportable export/import, transportable tablespaces, or transportable tables.">传输数据</a></span>的一般限制”中描述的<span class="q"><a href="transporting-data.html#GUID-28800719-6CB9-4A71-95DD-4B61AA603173" title="传输数据存在一般限制。还存在特定于完全可传输导出/导入，可传输表空间或可传输表的限制。">一般限制</a></span>适用于可传输的表空间。
                           </p>
                        </li>
                        <li>
                           <p>传输表空间集时，除非所有底层或包含的对象都在表空间集中，否则具有基础对象（如物化视图）或包含对象（如分区表）的对象不可传输。</p>
                        </li>
                        <li>
                           <p>可传输表空间无法跨具有不同时区文件版本的平台传输具有<code class="codeph">TIMESTAMP</code> <code class="codeph">WITH</code> <code class="codeph">TIMEZONE</code> （TSTZ）数据的表。可传输表空间操作会跳过这些表。您可以按常规导出和导入这些表。
                           </p>
                           <p>有关更多信息，请参见<a href="../sutil/oracle-data-pump-overview.html#SUTIL4292" target="_blank"><span class="italic">Oracle数据库实用程序</span></a>
                           </p>
                        </li>
                        <li>
                           <p>您不能在可传输的表空间集中包含管理表空间，例如<code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code> 。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-F7B2B591-AA88-4D16-8DCF-712763923FFB" title="您可以在数据库之间传输表空间。">在数据库之间传输表空间</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12607"></a><a id="ADMIN10140"></a><div class="props_rev_3"><a id="GUID-E4C56852-73A5-44A2-BB10-938831DA6E4C" name="GUID-E4C56852-73A5-44A2-BB10-938831DA6E4C"></a><h4 id="ADMIN-GUID-E4C56852-73A5-44A2-BB10-938831DA6E4C" class="sect4"><span class="enumeration_section">15.3.3</span>在数据库之间传输表空间</h4>
                  <div>
                     <p>您可以在数据库之间传输表空间或一组表空间。</p>
                     <div class="section">
                        <p>以下任务列表总结了传输表空间的过程。后续示例中提供了每项任务的详细信息。</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>选择一组自包含的表空间。</span></li>
                        <li class="stepexpand"><span>在源数据库中，以只读模式配置表空间集并生成可传输的表空间集。</span><div>
                              <p>可传输表空间集（或可传输集）由正在传输的表空间集的数据文件和包含该表空间集的结构信息（元数据）的导出转储文件组成。您使用Data Pump执行导出。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>传输导出转储文件。</span><div>
                              <p>将导出转储文件复制到目标数据库可访问的位置。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>传输表空间集。</span><div>
                              <p>将数据文件复制到目标数据库可访问的目录。</p>
                              <p>如果源平台和目标平台不同，则通过在<code class="codeph">V$TRANSPORTABLE_PLATFORM</code>视图上运行查询来检查每个平台的endian格式。
                              </p>
                              <p>如果源平台的endian格式与目标平台的endian格式不同，则使用以下方法之一转换数据文件：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>使用<code class="codeph">DBMS_FILE_TRANSFER</code>包中的<code class="codeph">GET_FILE</code>或<code class="codeph">PUT_FILE</code>过程来传输数据文件。这些过程自动将数据文件转换为目标平台的endian格式。
                                    </p>
                                 </li>
                                 <li>
                                    <p>使用RMAN <code class="codeph">CONVERT</code>命令将数据文件转换为目标平台的endian格式。
                                    </p>
                                    <div class="infoboxnote" id="GUID-E4C56852-73A5-44A2-BB10-938831DA6E4C__GUID-63CB5E30-AE50-4AF5-B33C-5824DF05EE56">
                                       <p class="notep1">注意：</p>
                                       <p>具有还原段的数据文件不支持在不同的endian格式之间转换数据文件。</p>
                                    </div>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>（可选）将表空间还原到源数据库上的读/写模式。</span></li>
                        <li class="stepexpand"><span>在目标数据库中，导入表空间集。</span><div>
                              <p>运行Data Pump实用程序以导入表空间集的元数据。</p>
                           </div>
                        </li>
                     </ol>
                     <div class="example" id="GUID-E4C56852-73A5-44A2-BB10-938831DA6E4C__GUID-EE6E795C-760E-4B65-A4C1-0455EC60ED6E">
                        <p class="titleinexample">例15-1例子</p>
                        <p>这些用于传输表空间的任务在下面的示例中进行了更全面的说明，其中假设存在以下数据文件和表空间：</p>
                        <div class="tblformal" id="GUID-E4C56852-73A5-44A2-BB10-938831DA6E4C__GUID-CD9FD4F3-4253-44BE-92C4-A1D64CF7DAAF">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table lists the assumptions for the following example. Column 1 provides the tablespace name, column 2 lists its datafile." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="29%" id="d158599e3795">表空间</th>
                                    <th align="left" valign="bottom" width="71%" id="d158599e3798">数据文件</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d158599e3803" headers="d158599e3795 ">
                                       <p><code class="codeph">sales_1</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d158599e3803 d158599e3798 ">
                                       <p><code class="codeph">/u01/app/oracle/oradata/salesdb/sales_101.dbf</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d158599e3813" headers="d158599e3795 ">
                                       <p><code class="codeph">sales_2</code> 
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d158599e3813 d158599e3798 ">
                                       <p><code class="codeph">/u01/app/oracle/oradata/salesdb/sales_201.dbf</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="transporting-data.html#GUID-BF7A7711-499D-4E54-A3E9-D51950E562B2">任务1：选择一组自包含的表空间</a><br>可传输集中的数据库对象与可传输集外部的数据库对象之间可能存在逻辑或物理依赖关系。您只能传输自包含的表空间集，也就是说，表空间集内的任何数据库对象都不依赖于该表空间集之外的任何数据库对象。
                        </li>
                        <li class="ulchildlink"><a href="transporting-data.html#GUID-95D18E42-D533-46B7-9910-291EACFF06AD">任务2：生成可传输的表空间集</a><br>确保您拥有要传输的自包含表空间集后，生成可传输的表空间集。
                        </li>
                        <li class="ulchildlink"><a href="transporting-data.html#GUID-CEDFBF9B-3A3B-43D4-9FF2-84EA2537BA8C">任务3：传输导出转储文件</a><br>将转储文件传输到<code class="codeph">DATA_PUMP_DIR</code>目录对象指向的目录，或者传输到您选择的任何其他目录。目标数据库必须可以访问新位置。
                        </li>
                        <li class="ulchildlink"><a href="transporting-data.html#GUID-41D10DCA-7733-4E4C-A41A-B94F63A82F7C">任务4：传输表空间集</a><br>将表空间的数据文件传输到目标数据库可访问的目录。
                        </li>
                        <li class="ulchildlink"><a href="transporting-data.html#GUID-089D9EC2-4736-4B6F-9CF2-B78206110224">任务5 :(可选）将表空间恢复为读/写模式</a><br>使传输的表空间在源数据库中再次读/写。
                        </li>
                        <li class="ulchildlink"><a href="transporting-data.html#GUID-CD4A446A-3DCA-4488-A381-47390A4F2CFF">任务6：导入表空间集</a><br>要完成可传输表空间操作，请导入表空间集。
                        </li>
                     </ul>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="transporting-data.html#GUID-FE3003B9-605A-4269-B167-005AC778C870" title="您可以跨平台传输数据。">跨平台传输数据</a></li>
                           <li><a href="transporting-data.html#GUID-E4B0F929-79D0-4DEE-B1DD-378BDBC31A0B" title="当您执行可传输操作，并且源平台和目标平台具有不同的字节顺序时，您必须将传输的数据转换为目标平台格式。如果源平台和目标平台具有相同的字节顺序，则不需要进行数据转换。您可以使用DBMS_FILE_TRANSFER包或RMAN CONVERT命令来转换数据。">在平台之间转换数据</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-F7B2B591-AA88-4D16-8DCF-712763923FFB" title="您可以在数据库之间传输表空间。">在数据库之间传输表空间</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN11399"></a><div class="props_rev_3"><a id="GUID-BF7A7711-499D-4E54-A3E9-D51950E562B2" name="GUID-BF7A7711-499D-4E54-A3E9-D51950E562B2"></a><h5 id="ADMIN-GUID-BF7A7711-499D-4E54-A3E9-D51950E562B2" class="sect5"><span class="enumeration_section">15.3.3.1</span>任务1：选择一组自包含的表空间</h5>
                     <div>
                        <p>可传输集中的数据库对象与可传输集外部的数据库对象之间可能存在逻辑或物理依赖关系。您只能传输自包含的表空间集，也就是说，表空间集内的任何数据库对象都不依赖于该表空间集之外的任何数据库对象。</p>
                        <div class="section">
                           <p>自包含表空间违规的一些示例是：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>表空间集内的索引用于表空间集之外的表。</p>
                                 <div class="infoboxnote" id="GUID-BF7A7711-499D-4E54-A3E9-D51950E562B2__GUID-D7B7271E-6765-4A35-9FAC-0CC9C161012E">
                                    <p class="notep1">注意：</p>
                                    <p>如果表的相应索引在表空间集之外，则不违反。</p>
                                 </div>
                              </li>
                              <li>
                                 <p>分区表部分包含在表空间集中。</p>
                                 <p>要复制的表空间集必须包含分区表的所有分区，或者不包含分区表的任何分区。要传输分区表的子集，必须将分区交换为表。</p>
                                 <p>有关交换分区的信息，请参见“ <a href="../vldbg/maintenance-partition-tables-indexes.html#VLDBG1156" target="_blank"><span class="italic">Oracle数据库VLDB和分区指南”</span></a> 。
                                 </p>
                              </li>
                              <li>
                                 <p>引用完整性约束指向跨集合边界的表。</p>
                                 <p>传输一组表空间时，可以选择包含参照完整性约束。但是，这样做会影响一组表空间是否是自包含的。如果您决定不传输约束，则不将约束视为指针。</p>
                              </li>
                              <li>
                                 <p>表空间集内的表包含一个<code class="codeph">LOB</code>列，指向表空间集外的<code class="codeph">LOB</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>由用户A注册的XML DB模式（* .xsd）导入由用户B注册的全局模式，并且以下情况属实：用户A的默认表空间是表空间A，用户B的默认表空间是表空间B，只有表空间A包含在表空间集中。</p>
                              </li>
                           </ul>
                           <p>要确定一组表空间是否为自包含，请在Oracle提供的包<code class="codeph">DBMS_TTS</code>运行<code class="codeph">TRANSPORT_SET_CHECK</code>过程。您必须已被授予<code class="codeph">EXECUTE_CATALOG_ROLE</code>角色（最初签名到<code class="codeph">SYS</code> ）才能运行此过程。
                           </p>
                           <p>运行<code class="codeph">DBMS_TTS.TRANSPORT_SET_CHECK</code>过程时，请指定要检查自包含的可传输集中的表空间列表。您可以选择指定是否必须包含约束。对于严格或完全包含，您必须另外将<code class="codeph">TTS_FULL_CHECK</code>参数设置为<code class="codeph">TRUE</code> 。</p>
                           <p>严格或完整的包含检查适用于不仅要捕获可移动集外部的引用，还要捕获进入集合的引用的情况。表空间时间点恢复（TSPITR）就是这样一种情况，其中依赖对象必须完全包含或完全位于可传输集之外。</p>
                           <p>例如，对包含表<code class="codeph">t</code>但不包含其索引<code class="codeph">i</code>的表空间执行TSPITR是违规的，因为索引和数据在传输后将不一致。完整的包含检查可确保外部没有依赖关系或进入可传输集。请参阅“ <a href="../bradv/performing-rman-tspitr.html#BRADV89796" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南”中的</span></a> TSPITR示例。
                           </p>
                           <div class="infoboxnote" id="GUID-BF7A7711-499D-4E54-A3E9-D51950E562B2__GUID-1E5E0575-9246-4BD4-91C0-BE81589C0859">
                              <p class="notep1">注意：</p>
                              <p>可传输表空间的默认设置是检查自包含而不是完全包含。</p>
                           </div>
                           <p>以下语句可用于确定表空间<code class="codeph">sales_1</code>和<code class="codeph">sales_2</code>是否为自包含，并考虑了引用完整性约束（由<code class="codeph">TRUE</code>表示）。
                           </p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_TTS.TRANSPORT_SET_CHECK（'sales_1，sales_2'，TRUE）;</pre><p>运行<code class="codeph">DBMS_TTS.TRANSPORT_SET_CHECK</code>过程后，您可以通过从<code class="codeph">TRANSPORT_SET_VIOLATIONS</code>视图中进行选择来查看所有违规<span class="italic">。</span> 如果表空间集是自包含的，则此视图为空。以下示例说明了存在两种违规的情况：跨表空间集边界的外键约束<code class="codeph">dept_fk</code> ，以及部分包含在表空间集中的分区表<code class="codeph">jim.sales</code> 。
                           </p><pre class="oac_no_warn" dir="ltr">SELECT * FROM TRANSPORT_SET_VIOLATIONS; VIOLATIONS ------------------------------------------------- --------------------------在表空间SALES_1中的表JIM.EMP与表空间中的表JIM.DEPT之间约束DEPT_FK其他分区表JIM.SALES是部分包含在可移动装置中</pre><p>您必须先解决这些违规行为，然后<code class="codeph">sales_1</code>传输<code class="codeph">sales_1</code>和<code class="codeph">sales_2</code> 。如下一个任务所述，绕过完整性约束违规的一个选择是不导出完整性约束。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-BF7A7711-499D-4E54-A3E9-D51950E562B2__GUID-7FC3B229-B978-44F1-85BF-9DD21BD699D2">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">DBMS_TTS</code>包的更多信息，请<code class="codeph">DBMS_TTS</code> <a href="../arpls/DBMS_TTS.html#ARPLS063" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                              </li>
                              <li>
                                 <p><a href="../bradv/performing-rman-tspitr.html#BRADV89796" target="_blank"><span class="italic">“Oracle数据库备份和恢复用户指南”，</span></a>以获取有关使用<code class="codeph">DBMS_TTS</code>包的特定信息</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-E4C56852-73A5-44A2-BB10-938831DA6E4C" title="您可以在数据库之间传输表空间或一组表空间。">在数据库之间传输表空间</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11400"></a><div class="props_rev_3"><a id="GUID-95D18E42-D533-46B7-9910-291EACFF06AD" name="GUID-95D18E42-D533-46B7-9910-291EACFF06AD"></a><h5 id="ADMIN-GUID-95D18E42-D533-46B7-9910-291EACFF06AD" class="sect5"><span class="enumeration_section">15.3.3.2</span>任务2：生成可传输的表空间集</h5>
                     <div>
                        <p>确保您拥有要传输的自包含表空间集后，生成可传输的表空间集。</p>
                        <div class="section">
                           <p>要生成可传输的表空间集：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>启动SQL * Plus并以管理员或具有<code class="codeph">ALTER</code> <code class="codeph">TABLESPACE</code>或<code class="codeph">MANAGE</code> <code class="codeph">TABLESPACE</code>系统特权的用户身份连接到数据库。</span></li>
                           <li class="stepexpand"><span>将集合中的所有表空间设置为只读。</span><div><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE sales_1只读; ALTER TABLESPACE sales_2只读;</pre></div>
                           </li>
                           <li class="stepexpand"><span>以具有<code class="codeph">DATAPUMP_EXP_FULL_DATABASE</code>角色的用户身份运行Data Pump导出实用程序，并在可传输集中指定表空间。</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; HOST $ expdp <span class="italic">user_name</span> dumpfile = expdat.dmp directory = data_pump_dir transport_tablespaces = sales_1，sales_2 logfile = tts_export.log密码： <span class="italic">password</span>
</pre><p>您必须始终指定<code class="codeph">TRANSPORT_TABLESPACES</code> ，它指定使用可传输选项。此示例指定以下附加数据泵参数：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">DUMPFILE</code>参数指定要创建的结构信息导出转储文件的名称<code class="codeph">expdat.dmp</code> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">DIRECTORY</code>参数指定指向转储文件的操作系统或Oracle自动存储管理位置的目录对象。必须在调用Data Pump之前创建<code class="codeph">DIRECTORY</code>对象，并且必须将该目录的<code class="codeph">READ</code>和<code class="codeph">WRITE</code>对象权限授予运行Export实用程序的用户。
                                       </p>
                                       <p>在非CDB中，将自动创建目录对象<code class="codeph">DATA_PUMP_DIR</code> 。对此目录的读写访问权限自动授予<code class="codeph">DBA</code>角色，从而授予用户<code class="codeph">SYS</code>和<code class="codeph">SYSTEM</code> 。</p>
                                       <p>但是，目录对象<code class="codeph">DATA_PUMP_DIR</code>不会在PDB中自动创建。因此，在导入PDB时，在PDB中创建目录对象，并在运行Data Pump时指定目录对象。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">LOGFILE</code>参数指定要为导出实用程序创建的日志文件。在此示例中，日志文件与转储文件在同一目录中创建，但您可以指定用于存储日志文件的任何其他目录。
                                       </p>
                                    </li>
                                    <li>
                                       <p>默认情况下，触发器和索引包含在导出操作中。</p>
                                    </li>
                                 </ul>
                                 <p>要使用严格包含检查执行传输表空间操作，请使用<code class="codeph">TRANSPORT_FULL_CHECK</code>参数，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">expdp <span class="italic">use_name</span> dumpfile = expdat.dmp directory = data_pump_dir transport_tablespaces = sales_1，sales_2 transport_full_check = y logfile = tts_export.log</pre><p>在这种情况下，Data Pump导出实用程序会验证可传输集内的对象与可传输集外部的对象之间是否存在依赖关系。如果正在传输的表空间集不是自包含的，则导出失败并指示可传输集不是自包含的。您必须解决这些违规，然后再次运行此任务。</p>
                                 <div class="infoboxnote" id="GUID-95D18E42-D533-46B7-9910-291EACFF06AD__GUID-1F177546-8F81-4C16-A6C2-5ECE4012A97A">
                                    <p class="notep1">注意：</p>
                                    <p>在此示例中，Data Pump实用程序仅用于导出表空间的数据字典结构信息（元数据）。没有卸载实际数据，因此即使对于大型表空间集，此操作也会相对快速地进行。</p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span><code class="codeph">expdp</code>实用程序在命令行上显示转储文件的名称和路径以及数据文件，如以下示例所示。这些是您需要传输到目标数据库的文件。另外，检查日志文件是否有任何错误。</span><div><pre class="oac_no_warn" dir="ltr">************************************************** ***************************为SYSTEM.SYS_EXPORT_TRANSPORTABLE_01设置的转储文件是：/ u01 / app / oracle / admin / salesdb / dpdump / expdat .dmp ************************************************* *****************************可传输表空间SALES_1所需的数据文件：/u01/app/oracle/oradata/salesdb/sales_101.dbf可传输表空间SALES_2所需的数据文件：/u01/app/oracle/oradata/salesdb/sales_201.dbf</pre></div>
                           </li>
                           <li class="stepexpand"><span>完成数据泵导出操作后，退出<code class="codeph">expdp</code>实用程序以返回到SQL * Plus：</span><div><pre class="oac_no_warn" dir="ltr">$ EXIT</pre><div class="infoboxnotealso" id="GUID-95D18E42-D533-46B7-9910-291EACFF06AD__GUID-8E749174-6CA7-491F-89F5-C6974ECBC064">
                                    <p class="notep1">也可以看看：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>有关<code class="codeph">CREATE DIRECTORY</code>命令的信息，请<a href="../sqlrf/CREATE-DIRECTORY.html#SQLRF01207" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                                       </li>
                                       <li>
                                          <p>有关默认目录的信息，请参阅<a href="../sutil/oracle-data-pump-overview.html#SUTIL810" target="_blank"><span class="italic">Oracle Database Utilities</span></a> ，省略<code class="codeph">DIRECTORY</code>参数</p>
                                       </li>
                                       <li>
                                          <p>有关使用Data Pump实用<a href="../sutil/oracle-data-pump-export-utility.html#SUTIL200" target="_blank"><span class="italic">程序</span></a>的信息，请<a href="../sutil/oracle-data-pump-export-utility.html#SUTIL200" target="_blank"><span class="italic">参见Oracle数据库实用</span></a>程序</p>
                                       </li>
                                       <li>
                                          <p>有关PDB的详细信息，请参阅<a href="../multi/overview-of-managing-a-multitenant-environment.html#MULTI-GUID-528FBE02-2B84-4E97-BD87-36AEF9EA524D" target="_blank"><span><cite>“Oracle Multitenant管理员指南”</cite></span></a></p>
                                       </li>
                                    </ul>
                                 </div>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-E4C56852-73A5-44A2-BB10-938831DA6E4C" title="您可以在数据库之间传输表空间或一组表空间。">在数据库之间传输表空间</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13736"></a><div class="props_rev_3"><a id="GUID-CEDFBF9B-3A3B-43D4-9FF2-84EA2537BA8C" name="GUID-CEDFBF9B-3A3B-43D4-9FF2-84EA2537BA8C"></a><h5 id="ADMIN-GUID-CEDFBF9B-3A3B-43D4-9FF2-84EA2537BA8C" class="sect5"><span class="enumeration_section">15.3.3.3</span>任务3：传输导出转储文件</h5>
                     <div>
                        <p>将转储文件传输到<code class="codeph">DATA_PUMP_DIR</code>目录对象指向的目录，或者传输到您选择的任何其他目录。目标数据库必须可以访问新位置。
                        </p>
                        <div class="section">
                           <p>在目标数据库中，运行以下查询以确定<code class="codeph">DATA_PUMP_DIR</code>的位置：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM DBA_DIRECTORIES WHERE DIRECTORY_NAME ='DATA_PUMP_DIR'; OWNER DIRECTORY_NAME DIRECTORY_PATH ---------- ---------------- --------------------- -------------- SYS DATA_PUMP_DIR C：\ app \ orauser \ admin \ orawin \ dpdump \</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-E4C56852-73A5-44A2-BB10-938831DA6E4C" title="您可以在数据库之间传输表空间或一组表空间。">在数据库之间传输表空间</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11401"></a><div class="props_rev_3"><a id="GUID-41D10DCA-7733-4E4C-A41A-B94F63A82F7C" name="GUID-41D10DCA-7733-4E4C-A41A-B94F63A82F7C"></a><h5 id="ADMIN-GUID-41D10DCA-7733-4E4C-A41A-B94F63A82F7C" class="sect5"><span class="enumeration_section">15.3.3.4</span>任务4：传输表空间集</h5>
                     <div>
                        <p>将表空间的数据文件传输到目标数据库可访问的目录。</p>
                        <div class="section">
                           <p>在此示例中，将以下文件从源数据库传输到目标数据库：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">sales_101.dbf</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">sales_201.dbf</code></p>
                              </li>
                           </ul>
                           <p>如果要将表空间集传输到与源平台不同的平台，则确定源平台和目标平台是否支持跨平台表空间传输，并确定每个平台的字节顺序。如果两个平台具有相同的字节顺序，则无需转换。否则，您必须在源数据库或目标数据库上执行数据转换。</p>
                           <p>如果<code class="codeph">sales_1</code>和<code class="codeph">sales_2</code>传输到其他平台，则可以在每个平台上运行以下查询。如果查询返回一行，则该平台支持跨平台表空间传输。
                           </p><pre class="oac_no_warn" dir="ltr">选择d。PLATFORM_NAME，来自V $ TRANSPORTABLE_PLATFORM的ENDIAN_FORMAT tp，V $ DATABASE d WHERE tp。PLATFORM_NAME = d。PLATFORM_NAME;</pre><p>以下是源平台的查询结果：</p><pre class="oac_no_warn" dir="ltr">PLATFORM_NAME ENDIAN_FORMAT ---------------------------------- -------------- Solaris [tm] OE（32位）大</pre><p>以下是目标平台的结果：</p><pre class="oac_no_warn" dir="ltr">PLATFORM_NAME ENDIAN_FORMAT ---------------------------------- -------------- Microsoft Windows IA（32位）很少</pre><p>在此示例中，您可以看到endian格式不同。因此，在这种情况下，转换对于传输数据库是必要的。使用<code class="codeph">DBMS_FILE_TRANSFER</code>包中的<code class="codeph">GET_FILE</code>或<code class="codeph">PUT_FILE</code>过程来传输数据文件。这些过程自动将数据文件转换为目标平台的endian格式。将数据文件传输到目标数据库的现有数据文件的位置。在UNIX和Linux平台上，此位置通常为/ u01 / app / oracle / oradata / <span class="italic">dbname</span> /或+ <span class="italic">DISKGROUP</span> / <span class="italic">dbname</span> / datafile /。或者，您可以使用转换数据文件。
                           </p>
                           <div class="infoboxnote" id="GUID-41D10DCA-7733-4E4C-A41A-B94F63A82F7C__GUID-6A96BCDA-3DB1-42D5-9E93-CFB80520CFF6">
                              <p class="notep1">注意：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>如果使用RMAN <code class="codeph">CONVERT</code>命令，则具有还原段的数据文件不支持在不同的endian格式之间转换数据文件。
                                    </p>
                                 </li>
                                 <li>
                                    <p>如果不需要表空间的字节顺序转换，则可以使用任何文件传输方法传输文件。</p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="transporting-data.html#GUID-E4B0F929-79D0-4DEE-B1DD-378BDBC31A0B" title="当您执行可传输操作，并且源平台和目标平台具有不同的字节顺序时，您必须将传输的数据转换为目标平台格式。如果源平台和目标平台具有相同的字节顺序，则不需要进行数据转换。您可以使用DBMS_FILE_TRANSFER包或RMAN CONVERT命令来转换数据。">在平台之间转换数据</a></li>
                              <li><a href="transporting-data.html#GUID-4F6AE634-053F-4CA9-AB53-7DA8B0047699" title="传输数据文件时，应遵循一套准则。">传输数据文件的准则</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-E4C56852-73A5-44A2-BB10-938831DA6E4C" title="您可以在数据库之间传输表空间或一组表空间。">在数据库之间传输表空间</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN12892"></a><div class="props_rev_3"><a id="GUID-089D9EC2-4736-4B6F-9CF2-B78206110224" name="GUID-089D9EC2-4736-4B6F-9CF2-B78206110224"></a><h5 id="ADMIN-GUID-089D9EC2-4736-4B6F-9CF2-B78206110224" class="sect5"><span class="enumeration_section">15.3.3.5</span>任务5 :(可选）将表空间恢复为读/写模式</h5>
                     <div>
                        <p>使传输的表空间在源数据库中再次读/写。</p>
                        <div class="section">
                           <p>以下语句使<code class="codeph">sales_1</code>和<code class="codeph">sales_2</code>表空间可读/写：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE sales_1 READ WRITE; ALTER TABLESPACE sales_2 READ WRITE;</pre><p>您可以推迟此任务以首先确保导入过程成功。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-E4C56852-73A5-44A2-BB10-938831DA6E4C" title="您可以在数据库之间传输表空间或一组表空间。">在数据库之间传输表空间</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11402"></a><div class="props_rev_3"><a id="GUID-CD4A446A-3DCA-4488-A381-47390A4F2CFF" name="GUID-CD4A446A-3DCA-4488-A381-47390A4F2CFF"></a><h5 id="ADMIN-GUID-CD4A446A-3DCA-4488-A381-47390A4F2CFF" class="sect5"><span class="enumeration_section">15.3.3.6</span>任务6：导入表空间集</h5>
                     <div>
                        <p>要完成可传输表空间操作，请导入表空间集。</p>
                        <div class="section">
                           <p>要导入表空间集：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>以具有<code class="codeph">DATAPUMP_IMP_FULL_DATABASE</code>角色的用户身份运行Data Pump导入实用程序，并导入表空间元数据。</span><div><pre class="oac_no_warn" dir="ltr">impdp <span class="italic">user_name</span> dumpfile = expdat.dmp directory = data_pump_dir transport_datafiles ='c：\ app \ orauser \ oradata \ orawin \ sales_101.dbf'，'c：\ app \ orauser \ oradata \ orawin \ sales_201.dbf'reverp_schema = sales1：crm1 remap_schema = sales2：crm2 logfile = tts_import.log密码： <span class="italic">密码</span>
</pre><p>此示例指定以下数据泵参数：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">DUMPFILE</code>参数指定包含要导入的表空间的元数据的导出文件。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">DIRECTORY</code>参数指定标识导出转储文件位置的目录对象。您必须在运行Data Pump之前创建<code class="codeph">DIRECTORY</code>对象，并且必须将该目录的<code class="codeph">READ</code>和<code class="codeph">WRITE</code>对象权限授予运行Import实用程序的用户。有关<code class="codeph">CREATE</code> <code class="codeph">DIRECTORY</code>命令的信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=SQLRF01207" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。
                                       </p>
                                       <p>在非CDB中，数据库自动创建目录对象<code class="codeph">DATA_PUMP_DIR</code> 。对此目录的读写访问权限自动授予<code class="codeph">DBA</code>角色，从而授予用户<code class="codeph">SYS</code>和<code class="codeph">SYSTEM</code> 。</p>
                                       <p>但是，数据库不会在PDB中自动创建目录对象<code class="codeph">DATA_PUMP_DIR</code> 。因此，在导入PDB时，在PDB中创建目录对象，并在运行Data Pump时指定目录对象。
                                       </p>
                                       <div class="infoboxnotealso" id="GUID-CD4A446A-3DCA-4488-A381-47390A4F2CFF__GUID-0049674F-E7B7-46B9-AEA5-7D03631D9B90">
                                          <p class="notep1">也可以看看：</p>
                                          <ul style="list-style-type:disc">
                                             <li>
                                                <p>有关默认目录的信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=SUTIL810" target="_blank"><span class="italic">Oracle Database Utilities</span></a> ，省略<code class="codeph">DIRECTORY</code>参数</p>
                                             </li>
                                             <li>
                                                <p>有关PDB的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=MULTI-GUID-528FBE02-2B84-4E97-BD87-36AEF9EA524D" target="_blank"><span><cite>“Oracle Multitenant管理员指南”</cite></span></a></p>
                                             </li>
                                          </ul>
                                       </div>
                                    </li>
                                    <li>
                                       <p><code class="codeph">TRANSPORT_DATAFILES</code>参数标识包含要导入的表空间的所有数据文件。
                                       </p>
                                       <p>如果有许多数据文件，则可以在使用<code class="codeph">PARFILE</code>参数指定的参数文件中多次指定<code class="codeph">TRANSPORT_DATAFILES</code>参数。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">REMAP_SCHEMA</code>参数更改数据库对象的所有权。如果未指定<code class="codeph">REMAP_SCHEMA</code> ，则所有数据库对象（如表和索引）都在与源数据库相同的用户模式中创建，并且这些用户必须已存在于目标数据库中。如果它们不存在，则导入实用程序将返回错误。在此示例中，导入表空间集后，源数据库中<code class="codeph">sales1</code>拥有的表空间集中的对象将由目标数据库中的<code class="codeph">crm1</code>拥有。同样，源数据库中<code class="codeph">sales2</code>拥有的对象将由目标数据库中的<code class="codeph">crm2</code>拥有。在这种情况下，目标数据库不需要具有用户<code class="codeph">sales1</code>和<code class="codeph">sales2</code> ，但必须具有用户<code class="codeph">crm1</code>和<code class="codeph">crm2</code> 。
                                       </p>
                                       <p></p>
                                       <p>从Oracle Database 12 <span class="italic">c</span>第2版（12.2）开始，Recovery Manager（RMAN） <code class="codeph">RECOVER</code>命令可以在重新映射表时将表移动到其他模式。有关更多信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=BRADV-GUID-907031B5-B355-43D8-8E2B-A0A6F2283BD7" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南”</cite></span></a> 。
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">LOGFILE</code>参数指定要由导入实用程序写入的日志文件的文件名。在此示例中，日志文件将写入从中读取转储文件的目录，但可以将其写入其他位置。
                                       </p>
                                    </li>
                                 </ul>
                                 <p>成功运行此语句后，正在复制的集中的所有表空间都保持只读模式。检查导入日志文件以确保没有发生错误。</p>
                                 <p>处理大量数据文件时，在语句行中指定数据文件名列表可能是一个费力的过程，因为数据文件列表甚至可能超过语句行限制。在这种情况下，您可以使用导入参数文件。例如，您可以按如下方式运行Data Pump导入实用程序：</p><pre class="oac_no_warn" dir="ltr">impdp <span class="italic">user_name</span> parfile ='par.f'</pre><p><code class="codeph">par.f</code>参数文件包含以下内容：</p><pre class="oac_no_warn" dir="ltr">DUMPFILE = expdat.dmp DIRECTORY = data_pump_dir TRANSPORT_DATAFILES ='C：\ app \ orauser \ oradata \ orawin \ sales_101.dbf'，'C：\ app \ orauser \ oradata \ orawin \ sales_201.dbf'REMAP_SCHEMA = sales1：crm1 REMAP_SCHEMA = sales2：crm2 LOGFILE = tts_import.log</pre><div class="infoboxnotealso" id="GUID-CD4A446A-3DCA-4488-A381-47390A4F2CFF__GUID-A802350C-4910-4A33-88BF-4AC5268F3593">
                                    <p class="notep1">也可以看看：</p>
                                    <p>有关使用导入实用<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=SUTIL300" target="_blank"><span class="italic">程序</span></a>的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=SUTIL300" target="_blank"><span class="italic">参见Oracle Database Utilities</span></a></p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>如果需要，将表空间置于目标数据库上的读/写模式。</span></li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-E4C56852-73A5-44A2-BB10-938831DA6E4C" title="您可以在数据库之间传输表空间或一组表空间。">在数据库之间传输表空间</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADMIN13897"></a><div class="props_rev_3"><a id="GUID-E1270F3E-2476-44C2-A721-6A456A372379" name="GUID-E1270F3E-2476-44C2-A721-6A456A372379"></a><h3 id="ADMIN-GUID-E1270F3E-2476-44C2-A721-6A456A372379" class="sect3"><span class="enumeration_section">15.4</span>在数据库之间传输表，分区或子分区</h3>
               <p>您可以在数据库之间传输表，分区和子分区。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="transporting-data.html#GUID-96032842-40B1-4547-8876-574E31C3CEEC">可移动表简介</a><br>您可以使用可传输表功能将一组表，分区或子分区从一个Oracle数据库复制到另一个Oracle数据库。可传输表操作将指定表，分区或子分区的元数据移动到目标数据库。
                     </li>
                     <li class="ulchildlink"><a href="transporting-data.html#GUID-B05E88D1-689C-4E83-A32D-61D66A179A18">可移动桌子的限制</a><br>可移动表格有限制。
                     </li>
                     <li class="ulchildlink"><a href="transporting-data.html#GUID-AB90794C-48B3-4A42-93D9-FE522E95DEBD">使用导出转储文件传输表，分区或子分区</a><br>您可以使用导出文件在数据库之间传输表，分区或子分区。
                     </li>
                     <li class="ulchildlink"><a href="transporting-data.html#GUID-9B585706-F91F-42E1-9F9E-30D3B758B52E">通过网络传输表，分区或子分区</a><br>要通过网络传输表，请使用<code class="codeph">NETWORK_LINK</code>参数执行导入，使用数据库链接执行导入，并且不涉及转储文件。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-1901E9C3-8FCE-4D4E-AB65-34D703474E52" title="传输数据会将数据从一个数据库移动到另一个数据库。">传输数据</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN13898"></a><div class="props_rev_3"><a id="GUID-96032842-40B1-4547-8876-574E31C3CEEC" name="GUID-96032842-40B1-4547-8876-574E31C3CEEC"></a><h4 id="ADMIN-GUID-96032842-40B1-4547-8876-574E31C3CEEC" class="sect4"><span class="enumeration_section">15.4.1</span>可移动表简介</h4>
                  <div>
                     <p>您可以使用可传输表功能将一组表，分区或子分区从一个Oracle数据库复制到另一个Oracle数据库。可传输表操作将指定表，分区或子分区的元数据移动到目标数据库。</p>
                     <p>可传输表操作自动识别指定表使用的表空间。要移动数据，请将这些表空间的数据文件复制到目标数据库。Data Pump导入会自动释放由不属于可传输表操作的表，分区或子分区占用的数据文件中的块。它还释放了不属于可传输表操作的表的从属对象占用的块。</p>
                     <p>您可以通过以下方式传输表，分区和子分区：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用导出转储文件</p>
                           <p>在导出期间，指定<code class="codeph">TABLES</code>参数并将<code class="codeph">TRANSPORTABLE</code>参数设置为<code class="codeph">ALWAYS</code> 。导入期间，请勿指定<code class="codeph">TRANSPORTABLE</code>参数。数据泵导入自动识别可传输表操作。
                           </p>
                        </li>
                        <li>
                           <p>通过网络</p>
                           <p>在导入期间，指定<code class="codeph">TABLES</code>参数，将<code class="codeph">TRANSPORTABLE</code>参数设置为<code class="codeph">ALWAYS</code> ，并指定<code class="codeph">NETWORK_LINK</code>参数以标识源数据库。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-E1270F3E-2476-44C2-A721-6A456A372379" title="您可以在数据库之间传输表，分区和子分区。">在数据库之间传输表，分区或子分区</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13899"></a><div class="props_rev_3"><a id="GUID-B05E88D1-689C-4E83-A32D-61D66A179A18" name="GUID-B05E88D1-689C-4E83-A32D-61D66A179A18"></a><h4 id="ADMIN-GUID-B05E88D1-689C-4E83-A32D-61D66A179A18" class="sect4"><span class="enumeration_section">15.4.2可移动台的</span>限制</h4>
                  <div>
                     <p>可移动表格有限制。</p>
                     <p>请注意可传输表的以下限制：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="transporting-data.html#GUID-28800719-6CB9-4A71-95DD-4B61AA603173" title="There are general limitations on transporting data. There are also limitations that are specific to full transportable export/import, transportable tablespaces, or transportable tables.">传输数据</a></span>的一般限制”中描述的<span class="q"><a href="transporting-data.html#GUID-28800719-6CB9-4A71-95DD-4B61AA603173" title="传输数据存在一般限制。还存在特定于完全可传输导出/导入，可传输表空间或可传输表的限制。">一般限制</a></span>适用于可移动表。
                           </p>
                        </li>
                        <li>
                           <p>您无法将表传输到包含同一模式中同名表的目标数据库。但是，您可以使用<code class="codeph">REMAP_TABLE</code>导入参数将数据导入到其他表中。或者，在传输操作之前，您可以重命名要传输的表或目标表。
                           </p>
                           <p>从Oracle Database 12 <span class="italic">c</span>第2版（12.2）开始，Recovery Manager（RMAN） <code class="codeph">RECOVER</code>命令可以在重新映射表时将表移动到其他模式。有关更多信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=BRADV-GUID-907031B5-B355-43D8-8E2B-A0A6F2283BD7" target="_blank"><span><cite>Oracle数据库备份和恢复用户指南”</cite></span></a> 。
                           </p>
                        </li>
                        <li>
                           <p>您不能跨具有不同时区文件版本的平台使用<code class="codeph">TIMESTAMP</code> <code class="codeph">WITH</code> <code class="codeph">TIMEZONE</code> （TSTZ）数据传输表。
                           </p>
                           <p>有关更多信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=SUTIL4292" target="_blank"><span class="italic">Oracle数据库实用程序</span></a>
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-E1270F3E-2476-44C2-A721-6A456A372379" title="您可以在数据库之间传输表，分区和子分区。">在数据库之间传输表，分区或子分区</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13901"></a><a id="ADMIN13902"></a><a id="ADMIN13903"></a><a id="ADMIN13904"></a><a id="ADMIN13905"></a><a id="ADMIN13906"></a><a id="ADMIN13900"></a><div class="props_rev_3"><a id="GUID-AB90794C-48B3-4A42-93D9-FE522E95DEBD" name="GUID-AB90794C-48B3-4A42-93D9-FE522E95DEBD"></a><h4 id="ADMIN-GUID-AB90794C-48B3-4A42-93D9-FE522E95DEBD" class="sect4"><span class="enumeration_section">15.4.3</span>使用导出转储文件传输表，分区或子分区</h4>
                  <div>
                     <p>您可以使用导出文件在数据库之间传输表，分区或子分区。</p>
                     <div class="section">
                        <p>以下任务列表总结了使用导出转储文件在数据库之间传输表的过程。后续示例中提供了每项任务的详细信息。</p>
                        <ol>
                           <li>
                              <p>选择一组表，分区或子分区。</p>
                              <p>如果要传输分区，则可以在可传输表操作中仅从一个表中指定分区，并且不能在同一操作中传输其他表。此外，如果在可传输表操作中仅导出表的分区的子集，则在导入时，每个分区将成为非分区表。</p>
                           </li>
                           <li>
                              <p>在源数据库中，将与表，分区或子分区的数据文件关联的表空间置于只读模式。</p>
                              <p>要查看表的表空间，请查询<code class="codeph">DBA_TABLES</code>视图。要查看表空间的数据文件，请查询<code class="codeph">DBA_DATA_FILES</code>视图。
                              </p>
                           </li>
                           <li>
                              <p>执行数据泵导出。</p>
                           </li>
                           <li>
                              <p>传输导出转储文件。</p>
                              <p>将导出转储文件复制到目标数据库可访问的位置。</p>
                           </li>
                           <li>
                              <p>传输表，分区或子分区的数据文件。</p>
                              <p>将数据文件复制到目标数据库可访问的位置。</p>
                              <p>如果源平台和目标平台不同，则通过在<span class="q">“ <a href="transporting-data.html#GUID-FE3003B9-605A-4269-B167-005AC778C870" title="您可以跨平台传输数据。">跨平台传输数据</a> ”中</span>的<code class="codeph">V$TRANSPORTABLE_PLATFORM</code>视图上运行查询来检查每个平台的endian格式。
                              </p>
                              <p>如果源平台的endian格式与目标平台的endian格式不同，则使用以下方法之一转换数据文件：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>使用<code class="codeph">DBMS_FILE_TRANSFER</code>包中的<code class="codeph">GET_FILE</code>或<code class="codeph">PUT_FILE</code>过程来传输数据文件。这些过程自动将数据文件转换为目标平台的endian格式。
                                    </p>
                                 </li>
                                 <li>
                                    <p>使用RMAN <code class="codeph">CONVERT</code>命令将数据文件转换为目标平台的endian格式。
                                    </p>
                                    <div class="infoboxnote" id="GUID-AB90794C-48B3-4A42-93D9-FE522E95DEBD__GUID-BF5A3CBF-BC09-4F17-A709-6012709E007F">
                                       <p class="notep1">注意：</p>
                                       <p>具有还原段的数据文件不支持在不同的endian格式之间转换数据文件。</p>
                                    </div>
                                 </li>
                              </ul>
                              <p>有关详细信息，请参阅<span class="q">“ <a href="transporting-data.html#GUID-E4B0F929-79D0-4DEE-B1DD-378BDBC31A0B" title="当您执行可传输操作，并且源平台和目标平台具有不同的字节顺序时，您必须将传输的数据转换为目标平台格式。如果源平台和目标平台具有相同的字节顺序，则不需要进行数据转换。您可以使用DBMS_FILE_TRANSFER包或RMAN CONVERT命令来转换数据。">在平台之间转换数据</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>（可选）将表空间还原到源数据库上的读/写模式。</p>
                           </li>
                           <li>
                              <p>在目标数据库中，执行导入。</p>
                              <p>调用Data Pump实用程序以导入表的元数据。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AB90794C-48B3-4A42-93D9-FE522E95DEBD__GUID-D63013BA-F4BF-4CF9-B358-9A13EAB5A244">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>使用数据泵转储文件传输表，分区和子分区的这些任务将在下面的示例中进行更全面的说明，其中假定<code class="codeph">sh.sales_prt</code>表中存在以下分区：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">sales_q1_2000</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">sales_q2_2000</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">sales_q3_2000</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">sales_q4_2000</code></p>
                           </li>
                        </ul>
                        <p>此示例将其中两个分区传输到目标数据库。</p>
                        <p>以下SQL语句在<code class="codeph">sh</code>模式中创建<code class="codeph">sales_prt</code>表及其分区，并为表创建表空间和数据文件。这些语句还通过使用<code class="codeph">sh</code>示例模式中的数据将数据插入到分区中。
                        </p><pre class="oac_no_warn" dir="ltr">CREATE TABLESPACE sales_prt_tbs DATAFILE'sales_prt.dbf'SIZE 20M ONLINE; CREATE TABLE sh.sales_prt（prod_id NUMBER（6），cust_id NUMBER，time_id DATE，channel_id CHAR（1），promo_id NUMBER（6），quantity_sold NUMBER（3），amount_sold NUMBER（10,2））PARTITION BY RANGE（time_id） （PARTITION SALES_Q1_2000的价值不到（截止日期（'01-APR-2000'，'DD-MON-YYYY'，'NLS_DATE_LANGUAGE =美国'）），PARTITION SALES_Q2_2000价值不到（截止日期（'01 -JUL-2000'，'） DD-MON-YYYY'，'NLS_DATE_LANGUAGE = American'）），PARTITION SALES_Q3_2000价值低于（TO_DATE（'01 -OCT-2000'，'DD-MON-YYYY'，'NLS_DATE_LANGUAGE = American'）），PARTITION SALES_Q4_2000 VALUES （少于（'01 -JAN-2001'，'DD-MON-YYYY'，'NLS_DATE_LANGUAGE = American'））TABLESPACE sales_prt_tbs; INSERT INTO sh.sales_prt PARTITION（sales_q1_2000）SELECT * FROM sh.sales PARTITION（sales_q1_2000）; INSERT INTO sh.sales_prt PARTITION（sales_q2_2000）SELECT * FROM sh.sales PARTITION（sales_q2_2000）; INSERT INTO sh.sales_prt PARTITION（sales_q3_2000）SELECT * FROM sh.sales PARTITION（sales_q3_2000）; INSERT INTO sh.sales_prt PARTITION（sales_q4_2000）SELECT * FROM sh.sales PARTITION（sales_q4_2000）;承诺;</pre><p>此示例进行以下附加假设：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>源数据库的名称是<code class="codeph">sourcedb</code> 。
                              </p>
                           </li>
                           <li>
                              <p>源数据库和目标数据库在具有相同字节顺序的同一平台上运行。要检查平台的字节顺序，请运行以下查询：</p><pre class="oac_no_warn" dir="ltr">选择d。PLATFORM_NAME，来自V $ TRANSPORTABLE_PLATFORM的ENDIAN_FORMAT tp，V $ DATABASE d WHERE tp。PLATFORM_NAME = d。PLATFORM_NAME;</pre></li>
                           <li>
                              <p>只有<code class="codeph">sales_q1_2000</code>和<code class="codeph">sales_q2_2000</code>分区才会传输到目标数据库。其他两个分区不运输。
                              </p>
                           </li>
                        </ul>
                        <p>完成以下任务以使用导出转储文件传输分区：</p>
                        <dl>
                           <dt class="dlterm"><a name="GUID-AB90794C-48B3-4A42-93D9-FE522E95DEBD__GUID-4C8AF026-6244-43E9-A7A0-F0D5FC69194A"><!-- --></a>任务1生成导出转储文件</dt>
                           <dd>
                              <p>通过完成以下步骤生成导出转储文件：</p>
                              <ol>
                                 <li>
                                    <p>启动SQL * Plus并以管理员或具有<code class="codeph">ALTER</code> <code class="codeph">TABLESPACE</code>或<code class="codeph">MANAGE</code> <code class="codeph">TABLESPACE</code>系统特权的用户身份连接到源数据库。
                                    </p>
                                    <p>有关说明，请参阅<span class="q">“ <a href="getting-started-with-database-administration.html#GUID-895EC72B-C620-4D93-9F23-3F6DC1706764" title="Oracle数据库包括以下组件：Oracle数据库实例（一组进程和内存）以及一组包含用户数据和系统数据的磁盘文件。">使用SQL * Plus连接到数据库</a> ”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>使包含表的所有表空间都以只读方式传输。</p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE sales_prt_tbs只读;</pre></li>
                                 <li>
                                    <p>以具有<code class="codeph">DATAPUMP_EXP_FULL_DATABASE</code>角色的用户身份调用Data Pump导出实用程序，并指定可传输表选项。
                                    </p><pre class="oac_no_warn" dir="ltr">SQL&gt; HOST expdp <span class="italic">user_name</span> dumpfile = sales_prt.dmp directory = data_pump_dir tables = sh.sales_prt：sales_q1_2000，sh.sales_prt：sales_q2_2000 transportable = always logfile = exp.log密码： <span class="italic">password</span>
</pre><p>您必须始终指定<code class="codeph">TRANSPORTABLE=ALWAYS</code> ，它指定使用可传输选项。
                                    </p>
                                    <p>此示例指定以下附加数据泵参数：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><code class="codeph">DUMPFILE</code>参数指定要创建的结构信息导出转储文件的名称<code class="codeph">sales_prt.dmp</code> 。
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">DIRECTORY</code>参数指定指向转储文件的操作系统或Oracle自动存储管理位置的目录对象。必须在调用Data Pump之前创建<code class="codeph">DIRECTORY</code>对象，并且必须将该目录的<code class="codeph">READ</code>和<code class="codeph">WRITE</code>对象权限授予运行Export实用程序的用户。有关<code class="codeph">CREATE</code> <code class="codeph">DIRECTORY</code>命令的信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=SQLRF01207" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。
                                          </p>
                                          <p>在非CDB中，将自动创建目录对象<code class="codeph">DATA_PUMP_DIR</code> 。对此目录的读写访问权限自动授予<code class="codeph">DBA</code>角色，从而授予用户<code class="codeph">SYS</code>和<code class="codeph">SYSTEM</code> 。</p>
                                          <p>但是，目录对象<code class="codeph">DATA_PUMP_DIR</code>不会在PDB中自动创建。因此，在导入PDB时，在PDB中创建目录对象，并在运行Data Pump时指定目录对象。
                                          </p>
                                          <div class="infoboxnotealso" id="GUID-AB90794C-48B3-4A42-93D9-FE522E95DEBD__GUID-ADCFC7B1-E086-468F-8D6E-E1FACD40DEF6">
                                             <p class="notep1">也可以看看：</p>
                                             <ul style="list-style-type:disc">
                                                <li>
                                                   <p>有关默认目录的信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=SUTIL810" target="_blank"><span class="italic">Oracle Database Utilities</span></a> ，省略<code class="codeph">DIRECTORY</code>参数</p>
                                                </li>
                                                <li>
                                                   <p>有关PDB的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=MULTI-GUID-528FBE02-2B84-4E97-BD87-36AEF9EA524D" target="_blank"><span><cite>“Oracle Multitenant管理员指南”</cite></span></a></p>
                                                </li>
                                             </ul>
                                          </div>
                                       </li>
                                       <li>
                                          <p><code class="codeph">TABLES</code>参数指定要导出的表，分区或子分区。
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">LOGFILE</code>参数指定要由导出实用程序写入的日志文件的文件名。在此示例中，日志文件将写入与转储文件相同的目录，但可以将其写入其他位置。
                                          </p>
                                       </li>
                                    </ul>
                                 </li>
                                 <li>
                                    <p>检查日志文件是否有意外错误，并记下必须传输到目标数据库的转储文件和数据文件。 <code class="codeph">expdp</code>在这些消息中输出这些文件的名称和路径：</p><pre class="oac_no_warn" dir="ltr">处理对象类型TABLE_EXPORT / TABLE / PLUGTS_BLK处理对象类型TABLE_EXPORT / TABLE / TABLE处理对象类型TABLE_EXPORT / TABLE / END_PLUGTS_BLK主表“SYSTEM”。“SYS_EXPORT_TABLE_01”已成功加载/卸载************* ************************************************** *************** SYSTEM.SYS_EXPORT_TABLE_01的转储文件集是：/u01/app/oracle/rdbms/log/sales_prt.dmp ************ ************************************************** ****************可传输表空间SALES_PRT_TBS所需的数据文件：/u01/app/oracle/oradata/sourcedb/sales_prt.dbf作业“SYSTEM”。“SYS_EXPORT_TABLE_01”在11成功完成： 32:13</pre></li>
                                 <li>
                                    <p>完成后，退回到SQL * Plus：</p><pre class="oac_no_warn" dir="ltr">$退出</pre></li>
                              </ol>
                              <div class="infoboxnotealso" id="GUID-AB90794C-48B3-4A42-93D9-FE522E95DEBD__GUID-7A138D6E-5725-449A-A3AC-A75C6B8F57FF">
                                 <p class="notep1">也可以看看：</p>
                                 <p>有关使用Data Pump实用<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=SUTIL200" target="_blank"><span class="italic">程序</span></a>的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=SUTIL200" target="_blank"><span class="italic">参见Oracle数据库实用</span></a>程序</p>
                              </div>
                           </dd>
                           <dt class="dlterm"><a name="GUID-AB90794C-48B3-4A42-93D9-FE522E95DEBD__GUID-FD6B2B79-89F6-46A2-8196-F8D677AC2AD5"><!-- --></a>任务2传输导出转储文件</dt>
                           <dd>
                              <p>将转储文件传输到目标数据库上的<code class="codeph">DATA_PUMP_DIR</code>目录对象指向的目录，或者传输到您选择的任何其他目录。目标数据库必须可以访问新位置。
                              </p>
                              <p>在此示例中，将<code class="codeph">sales_prt.dmp</code>转储文件从源数据库传输到目标数据库。
                              </p>
                              <p>在目标数据库中，运行以下查询以确定<code class="codeph">DATA_PUMP_DIR</code>的位置：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM DBA_DIRECTORIES WHERE DIRECTORY_NAME ='DATA_PUMP_DIR'; OWNER DIRECTORY_NAME DIRECTORY_PATH ---------- ---------------- --------------------- -------------- SYS DATA_PUMP_DIR / u01 / app / oracle / rdbms / log /</pre></dd>
                           <dt class="dlterm"><a name="GUID-AB90794C-48B3-4A42-93D9-FE522E95DEBD__GUID-7C6B70C1-75B4-4458-A738-86F70D45C47B"><!-- --></a>任务3传输表的数据文件</dt>
                           <dd>
                              <p>将包含要传输的表的表空间的数据文件传输到目标数据库可访问的位置。</p>
                              <p>通常，您将数据文件传输到目标数据库的现有数据文件的位置。在UNIX和Linux平台上，此位置通常为/ u01 / app / oracle / oradata / <span class="italic">dbname</span> /或+ <span class="italic">DISKGROUP</span> / <span class="italic">dbname</span> / datafile /。
                              </p>
                              <p>在此示例中，将<code class="codeph">sales_prt.dbf</code>数据文件从源数据库传输到目标数据库。
                              </p>
                              <div class="infoboxnotealso" id="GUID-AB90794C-48B3-4A42-93D9-FE522E95DEBD__GUID-56DADE67-4FD5-44DE-A969-F69F16123E60">
                                 <p class="notep1">也可以看看：</p>
                                 <p> <span class="q">“ <a href="transporting-data.html#GUID-4F6AE634-053F-4CA9-AB53-7DA8B0047699" title="传输数据文件时，应遵循一套准则。">传输数据文件的指南</a> ”</span></p>
                              </div>
                           </dd>
                           <dt class="dlterm"><a name="GUID-AB90794C-48B3-4A42-93D9-FE522E95DEBD__GUID-B679E70B-9E96-4360-B71B-7D30BD84CAFF"><!-- --></a>任务4（可选）将表空间恢复为读/写模式</dt>
                           <dd>
                              <p>使包含要传输的表的表空间在源数据库中再次读/写，如下所示：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE sales_prt_tbs READ WRITE;</pre><p>您可以推迟此任务以首先确保导入过程成功。</p>
                           </dd>
                           <dt class="dlterm"><a name="GUID-AB90794C-48B3-4A42-93D9-FE522E95DEBD__GUID-27A60C69-A6AA-458B-A671-19E594DF91C9"><!-- --></a>任务5在目标数据库中，导入分区</dt>
                           <dd>
                              <p>在目标数据库中，以具有<code class="codeph">DATAPUMP_IMP_FULL_DATABASE</code>角色的用户身份调用Data Pump导入实用程序，并指定可传输表选项。
                              </p><pre class="oac_no_warn" dir="ltr">impdp <span class="italic">user_name</span> dumpfile = sales_prt.dmp directory = data_pump_dir transport_datafiles ='/ u01 / app / oracle / oradata / targetdb / sales_prt.dbf'stats = sh.sales_prt：sales_q1_2000，sh.sales_prt：sales_q2_2000 logfile = imp.log密码： <span class="italic">密码</span>
</pre><p>此示例指定以下数据泵参数：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">DUMPFILE</code>参数指定包含要导入的数据的元数据的导出文件。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">DIRECTORY</code>参数指定标识导出转储文件位置的目录对象。您必须在调用Data Pump之前创建<code class="codeph">DIRECTORY</code>对象，并且必须将该目录的<code class="codeph">READ</code>和<code class="codeph">WRITE</code>对象权限授予运行Import实用程序的用户。有关<code class="codeph">CREATE</code> <code class="codeph">DIRECTORY</code>命令的信息，请参见<a href="../sqlrf/CREATE-DIRECTORY.html#SQLRF01207" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。
                                    </p>
                                    <p>在非CDB中，将自动创建目录对象<code class="codeph">DATA_PUMP_DIR</code> 。对此目录的读写访问权限自动授予<code class="codeph">DBA</code>角色，从而授予用户<code class="codeph">SYS</code>和<code class="codeph">SYSTEM</code> 。</p>
                                    <p>但是，目录对象<code class="codeph">DATA_PUMP_DIR</code>不会在PDB中自动创建。因此，在导入PDB时，在PDB中创建目录对象，并在运行Data Pump时指定目录对象。
                                    </p>
                                    <div class="infoboxnotealso" id="GUID-AB90794C-48B3-4A42-93D9-FE522E95DEBD__GUID-EA249106-6AA0-4A7A-98E1-DA3FE9750DED">
                                       <p class="notep1">也可以看看：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>有关默认目录的信息，请参阅<a href="../sutil/oracle-data-pump-overview.html#SUTIL810" target="_blank"><span class="italic">Oracle Database Utilities</span></a> ，省略<code class="codeph">DIRECTORY</code>参数</p>
                                          </li>
                                          <li>
                                             <p>有关PDB的详细信息，请参阅<a href="../multi/overview-of-managing-a-multitenant-environment.html#MULTI-GUID-528FBE02-2B84-4E97-BD87-36AEF9EA524D" target="_blank"><span><cite>“Oracle Multitenant管理员指南”</cite></span></a></p>
                                          </li>
                                       </ul>
                                    </div>
                                 </li>
                                 <li>
                                    <p><code class="codeph">TRANSPORT_DATAFILES</code>参数标识要导入的所有数据文件。
                                    </p>
                                    <p>如果有许多数据文件，则可以在使用<code class="codeph">PARFILE</code>参数指定的参数文件中多次指定<code class="codeph">TRANSPORT_DATAFILES</code>参数。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">TABLES</code>参数指定要导入的表，分区或子分区。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">LOGFILE</code>参数指定要由导入实用程序写入的日志文件的文件名。在此示例中，日志文件将写入从中读取转储文件的目录，但可以将其写入其他位置。
                                    </p>
                                 </li>
                              </ul>
                              <p>成功执行此语句后，请检查导入日志文件以确保未发生意外错误。</p>
                              <p>处理大量数据文件时，在语句行中指定数据文件名列表可能是一个费力的过程。它甚至可以超过声明行限制。在这种情况下，您可以使用导入参数文件。例如，您可以按如下方式调用Data Pump导入实用程序：</p><pre class="oac_no_warn" dir="ltr">impdp <span class="italic">user_name</span> parfile ='par.f'</pre><p>例如， <code class="codeph">par.f</code>可能包含以下行：</p><pre class="oac_no_warn" dir="ltr">DUMPFILE = sales_prt.dmp DIRECTORY = data_pump_dir TRANSPORT_DATAFILES ='/ u01 / app / oracle / oradata / targetdb / sales_prt.dbf'TABLES = sh.sales_prt：sales_q1_2000，sh.sales_prt：sales_q2_2000 LOGFILE = imp.log</pre><div class="infoboxnote" id="GUID-AB90794C-48B3-4A42-93D9-FE522E95DEBD__GUID-1676B1A9-8CBC-4ADC-8FBE-9C895B9A594F">
                                 <p class="notep1">注意：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>分区作为目标数据库中的单独表导入，因为此示例传输分区的子集。</p>
                                    </li>
                                    <li>
                                       <p>在导入期间，可能会临时对表空间进行读/写以进行元数据加载。确保在导入期间不对用户进行任何更改。成功完成导入后，所有用户定义的表空间都是可读/写的。</p>
                                    </li>
                                    <li>
                                       <p>执行网络数据库导入时，必须将<code class="codeph">TRANSPORTABLE</code>参数设置为<code class="codeph">always</code> 。
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                              <div class="infoboxnotealso" id="GUID-AB90794C-48B3-4A42-93D9-FE522E95DEBD__GUID-19380385-03C1-4CD5-A9DE-56DB60F887F2">
                                 <p class="notep1">也可以看看：</p>
                                 <p>有关使用导入实用<a href="../sutil/datapump-import-utility.html#SUTIL300" target="_blank"><span class="italic">程序</span></a>的信息，请<a href="../sutil/datapump-import-utility.html#SUTIL300" target="_blank"><span class="italic">参见Oracle Database Utilities</span></a></p>
                              </div>
                           </dd>
                        </dl>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-E1270F3E-2476-44C2-A721-6A456A372379" title="您可以在数据库之间传输表，分区和子分区。">在数据库之间传输表，分区或子分区</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13908"></a><a id="ADMIN13909"></a><a id="ADMIN13910"></a><a id="ADMIN13911"></a><a id="ADMIN13912"></a><a id="ADMIN13913"></a><a id="ADMIN13907"></a><div class="props_rev_3"><a id="GUID-9B585706-F91F-42E1-9F9E-30D3B758B52E" name="GUID-9B585706-F91F-42E1-9F9E-30D3B758B52E"></a><h4 id="ADMIN-GUID-9B585706-F91F-42E1-9F9E-30D3B758B52E" class="sect4"><span class="enumeration_section">15.4.4</span>通过网络传输表，分区或子分区</h4>
                  <div>
                     <p>要通过网络传输表，请使用<code class="codeph">NETWORK_LINK</code>参数执行导入，使用数据库链接执行导入，并且不涉及转储文件。
                     </p>
                     <div class="section">
                        <p>以下任务列表总结了通过网络在数据库之间传输表，分区和子分区的过程。后续示例中提供了每项任务的详细信息。</p>
                        <ol>
                           <li>
                              <p>选择一组表，分区或子分区。</p>
                              <p>如果要传输分区，则可以在可传输表操作中仅从一个表中指定分区，并且不能在同一操作中传输其他表。此外，如果在可传输表操作中仅导出表的分区的子集，则在导入时，每个分区将成为非分区表。</p>
                           </li>
                           <li>
                              <p>在源数据库中，将与表，分区或子分区的数据文件关联的表空间置于只读模式。</p>
                              <p>要查看表的表空间，请查询<code class="codeph">DBA_TABLES</code>视图。要查看表空间的数据文件，请查询<code class="codeph">DBA_DATA_FILES</code>视图。
                              </p>
                           </li>
                           <li>
                              <p>传输表，分区或子分区的数据文件。</p>
                              <p>将数据文件复制到目标数据库可访问的位置。</p>
                              <p>如果源平台和目标平台不同，则通过在<span class="q">“ <a href="transporting-data.html#GUID-FE3003B9-605A-4269-B167-005AC778C870" title="您可以跨平台传输数据。">跨平台传输数据</a> ”中</span>的<code class="codeph">V$TRANSPORTABLE_PLATFORM</code>视图上运行查询来检查每个平台的endian格式。
                              </p>
                              <p>如果源平台的endian格式与目标平台的endian格式不同，则使用以下方法之一转换数据文件：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>使用<code class="codeph">DBMS_FILE_TRANSFER</code>包中的<code class="codeph">GET_FILE</code>或<code class="codeph">PUT_FILE</code>过程来传输数据文件。这些过程自动将数据文件转换为目标平台的endian格式。
                                    </p>
                                 </li>
                                 <li>
                                    <p>使用RMAN <code class="codeph">CONVERT</code>命令将数据文件转换为目标平台的endian格式。
                                    </p>
                                    <div class="infoboxnote" id="GUID-9B585706-F91F-42E1-9F9E-30D3B758B52E__GUID-2F80A40C-E5D9-44B0-9C74-DBB82174A25E">
                                       <p class="notep1">注意：</p>
                                       <p>具有还原段的数据文件不支持在不同的endian格式之间转换数据文件。</p>
                                    </div>
                                 </li>
                              </ul>
                              <p>有关详细信息，请参阅<span class="q">“ <a href="transporting-data.html#GUID-E4B0F929-79D0-4DEE-B1DD-378BDBC31A0B" title="当您执行可传输操作，并且源平台和目标平台具有不同的字节顺序时，您必须将传输的数据转换为目标平台格式。如果源平台和目标平台具有相同的字节顺序，则不需要进行数据转换。您可以使用DBMS_FILE_TRANSFER包或RMAN CONVERT命令来转换数据。">在平台之间转换数据</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在目标数据库中，执行导入。</p>
                              <p>调用Data Pump实用程序以导入表的元数据。</p>
                           </li>
                           <li>
                              <p>（可选）将表空间还原到源数据库上的读/写模式。</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9B585706-F91F-42E1-9F9E-30D3B758B52E__GUID-C49B2277-E1C8-43A5-8595-CF3B9FAC8479">例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>这些通过网络传输表的任务在下面的示例中进行了更全面的说明，其中假设表存在于源数据库中：</p>
                        <div class="tblformal" id="GUID-9B585706-F91F-42E1-9F9E-30D3B758B52E__GUID-D925EB7D-349E-4F78-B3F0-CDE49DE0A53A">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table lists the assumptions for the following example. Column 1 provides the table or partition name, column 2 provides the tablespace name, and column 3 lists its datafile." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="28%" id="d158599e5698">表</th>
                                    <th align="left" valign="bottom" width="19%" id="d158599e5701">表空间</th>
                                    <th align="left" valign="bottom" width="53%" id="d158599e5704">数据文件</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d158599e5709" headers="d158599e5698 ">
                                       <p><code class="codeph">hr.emp_ttbs</code></p>
                                    </td>
                                    <td align="left" valign="top" width="19%" headers="d158599e5709 d158599e5701 ">
                                       <p><code class="codeph">emp_tsp</code></p>
                                    </td>
                                    <td align="left" valign="top" width="53%" headers="d158599e5709 d158599e5704 ">
                                       <p>/u01/app/oracle/oradata/sourcedb/emp.dbf</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d158599e5721" headers="d158599e5698 ">
                                       <p><code class="codeph">oe.orders_ttbs</code></p>
                                    </td>
                                    <td align="left" valign="top" width="19%" headers="d158599e5721 d158599e5701 ">
                                       <p><code class="codeph">orders_tsp</code></p>
                                    </td>
                                    <td align="left" valign="top" width="53%" headers="d158599e5721 d158599e5704 ">
                                       <p>/u01/app/oracle/oradata/sourcedb/orders.dbf</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>此示例将这些表传输到目标数据库。要完成此示例，这些表必须存在于源数据库中。</p>
                        <p>以下SQL语句在<code class="codeph">hr</code>模式中创建表，并为表创建表空间和数据文件。这些语句还使用<code class="codeph">hr</code>和<code class="codeph">oe</code>示例模式中的数据将数据插入表中。
                        </p><pre class="oac_no_warn" dir="ltr">CREATE TABLESPACE emp_tsp DATAFILE'emp.dbf'SIZE 1M ONLINE; CREATE TABLE hr.emp_ttbs（employee_id NUMBER（6），first_name VARCHAR2（20），last_name VARCHAR2（25），电子邮件VARCHAR2（25），phone_number VARCHAR2（20），hire_date DATE，job_id VARCHAR2（10），工资NUMBER（8， 2），commission_pct NUMBER（2,2），manager_id NUMBER（6），department_id NUMBER（4））TABLESPACE emp_tsp; INSERT INTO hr.emp_ttbs SELECT * FROM hr.employees; CREATE TABLESPACE orders_tsp DATAFILE'order.dbf'SIZE 1M ONLINE; CREATE TABLE oe.orders_ttbs（order_id NUMBER（12），order_date TIMESTAMP WITH LOCAL TIME ZONE，order_mode VARCHAR2（8），customer_id NUMBER（6），order_status NUMBER（2），order_total NUMBER（8,2），sales_rep_id NUMBER（6） ，promotion_id NUMBER（6））TABLESPACE orders_tsp; INSERT INTO oe.orders_ttbs SELECT * FROM oe.orders;承诺;</pre><p>此示例进行以下附加假设：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>源数据库的名称是<code class="codeph">sourcedb</code> 。
                              </p>
                           </li>
                           <li>
                              <p>源数据库和目标数据库在具有相同字节顺序的同一平台上运行。要检查平台的字节顺序，请运行以下查询：</p><pre class="oac_no_warn" dir="ltr">选择d。PLATFORM_NAME，来自V $ TRANSPORTABLE_PLATFORM的ENDIAN_FORMAT tp，V $ DATABASE d WHERE tp。PLATFORM_NAME = d。PLATFORM_NAME;</pre></li>
                        </ul>
                        <p>完成以下任务以通过网络传输表：</p>
                        <dl>
                           <dt class="dlterm"><a name="GUID-9B585706-F91F-42E1-9F9E-30D3B758B52E__GUID-9ED8AA23-E772-42BF-9D5B-92A0BD1170C6"><!-- --></a>任务1创建从目标数据库到源数据库的数据库链接</dt>
                           <dd>
                              <p>通过完成以下步骤，创建从目标数据库到源数据库的数据库链接：</p>
                              <ol>
                                 <li>
                                    <p>确保在源数据库和目标数据库之间配置了网络连接。</p>
                                    <p>有关说明，请参见“ <a href="../netag/index.html" target="_blank"><span class="italic">Oracle数据库网络服务管理员指南</span></a> ”。
                                    </p>
                                 </li>
                                 <li>
                                    <p>启动SQL * Plus并以管理员身份连接到目标数据库，管理员将使用Data Pump导入传输数据。此用户必须具有<code class="codeph">DATAPUMP_IMP_FULL_DATABASE</code>角色才能传输数据。
                                    </p>
                                    <p>有关说明，请参阅<span class="q">“ <a href="getting-started-with-database-administration.html#GUID-895EC72B-C620-4D93-9F23-3F6DC1706764" title="Oracle数据库包括以下组件：Oracle数据库实例（一组进程和内存）以及一组包含用户数据和系统数据的磁盘文件。">使用SQL * Plus连接到数据库</a> ”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>创建数据库链接：</p><pre class="oac_no_warn" dir="ltr">创建公共数据库链接sourcedb使用'sourcedb';</pre><p>在using子句中指定源数据库的服务名称。</p>
                                    <p>在导入操作期间，数据库链接必须使用<code class="codeph">DATAPUMP_EXP_FULL_DATABASE</code>角色连接到源数据库上的用户。源数据库上的用户不能是具有<code class="codeph">SYSDBA</code>管理权限的用户。
                                    </p>
                                 </li>
                              </ol>
                              <div class="infoboxnotealso" id="GUID-9B585706-F91F-42E1-9F9E-30D3B758B52E__GUID-5D43C6F0-8133-42EB-A89D-6F5BA0CFB851">
                                 <p class="notep1">也可以看看：</p>
                                 <p></p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="q">“ <a href="managing-a-distributed-database.html#GUID-B5950167-35F8-4C88-B063-382E0290CB53" title="要支持对分布式数据库系统中的数据和模式对象的应用程序访问，必须创建所有必需的数据库链接。">创建数据库链接</a> ”</span></p>
                                    </li>
                                    <li>
                                       <p><a href="../sqlrf/CREATE-DATABASE-LINK.html#SQLRF01205" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                                    </li>
                                 </ul>
                              </div>
                           </dd>
                           <dt class="dlterm"><a name="GUID-9B585706-F91F-42E1-9F9E-30D3B758B52E__GUID-4D5C8C39-FB4B-428A-ADDF-66F8B516E87A"><!-- --></a>任务2使包含表的表空间为只读</dt>
                           <dd>
                              <p>在源数据库中，完成以下步骤：</p>
                              <ol>
                                 <li>
                                    <p>启动SQL * Plus并以管理员或具有<code class="codeph">ALTER</code> <code class="codeph">TABLESPACE</code>或<code class="codeph">MANAGE</code> <code class="codeph">TABLESPACE</code>系统特权的用户身份连接到源数据库。
                                    </p>
                                    <p>有关说明，请参阅<span class="q">“ <a href="getting-started-with-database-administration.html#GUID-895EC72B-C620-4D93-9F23-3F6DC1706764" title="Oracle数据库包括以下组件：Oracle数据库实例（一组进程和内存）以及一组包含用户数据和系统数据的磁盘文件。">使用SQL * Plus连接到数据库</a> ”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>使包含数据的所有表空间都以只读方式传输。</p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE emp_tsp READ ONLY; ALTER TABLESPACE orders_tsp READ ONLY;</pre></li>
                              </ol>
                           </dd>
                           <dt class="dlterm"><a name="GUID-9B585706-F91F-42E1-9F9E-30D3B758B52E__GUID-03200024-3E5E-4C1C-BFDA-6B6F97D02976"><!-- --></a>任务3传输表的数据文件</dt>
                           <dd>
                              <p>将包含要传输的表的表空间的数据文件传输到目标数据库可访问的位置。</p>
                              <p>通常，您将数据文件传输到目标数据库的现有数据文件的位置。在UNIX和Linux平台上，此位置通常为/ u01 / app / oracle / oradata / <span class="italic">dbname</span> /或+ <span class="italic">DISKGROUP</span> / <span class="italic">dbname</span> / datafile /。
                              </p>
                              <p>在此示例中，将<code class="codeph">emp.dbf</code>和<code class="codeph">orders.dbf</code>数据文件从源数据库传输到目标数据库。
                              </p>
                              <div class="infoboxnotealso" id="GUID-9B585706-F91F-42E1-9F9E-30D3B758B52E__GUID-88FCEF78-B41F-46B0-BB1D-33C80E3831C9">
                                 <p class="notep1">也可以看看：</p>
                                 <p> <span class="q">“ <a href="transporting-data.html#GUID-4F6AE634-053F-4CA9-AB53-7DA8B0047699" title="传输数据文件时，应遵循一套准则。">传输数据文件的指南</a> ”</span></p>
                              </div>
                           </dd>
                           <dt class="dlterm"><a name="GUID-9B585706-F91F-42E1-9F9E-30D3B758B52E__GUID-86D6977F-F096-44BE-8402-2A54EFC256E5"><!-- --></a>任务4在目标数据库中，导入数据库</dt>
                           <dd>
                              <p>以具有<code class="codeph">DATAPUMP_IMP_FULL_DATABASE</code>角色的用户身份调用Data Pump导入实用程序，并指定完全可传输的导出/导入选项。
                              </p><pre class="oac_no_warn" dir="ltr">impdp <span class="italic">user_name</span> network_link = sourcedb transportable = always transport_datafiles ='/ u01 / app /oracle / oradata / targetdb / emp.dbf''/ u01 / app / oracle / oradata / target = orders.dbf'stats = hr.emp_ttbs，oe。 orders_ttbs logfile = import.log密码： <span class="italic">密码</span>
</pre><p>此示例指定以下数据泵参数：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">NETWORK_LINK</code>参数指定用于网络导入的源数据库的数据库链接。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">TRANSPORTABLE</code>参数指定导入使用可传输选项。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">TRANSPORT_DATAFILES</code>参数标识要导入的所有数据文件。
                                    </p>
                                    <p>如果有许多数据文件，则可以在使用<code class="codeph">PARFILE</code>参数指定的参数文件中多次指定<code class="codeph">TRANSPORT_DATAFILES</code>参数。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">TABLES</code>参数指定要导入的表。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">LOGFILE</code>参数指定要由导入实用程序写入的日志文件的文件名。
                                    </p>
                                 </li>
                              </ul>
                              <p>成功执行此语句后，请检查导入日志文件以确保未发生意外错误。</p>
                              <p>处理大量数据文件时，在语句行中指定数据文件名列表可能是一个费力的过程。它甚至可以超过声明行限制。在这种情况下，您可以使用导入参数文件。例如，您可以按如下方式调用Data Pump导入实用程序：</p><pre class="oac_no_warn" dir="ltr">impdp <span class="italic">user_name</span> parfile ='par.f'</pre><p>例如， <code class="codeph">par.f</code>可能包含以下行：</p><pre class="oac_no_warn" dir="ltr">NETWORK_LINK = sourcedb TRANSPORTABLE =始终TRANSPORT_DATAFILES ='/ u01 / app / oracle / aoradata / targetdb / emp.dbf''/ u01 / app / oracle / oradata / target = orders.dbf'TABLES = hr.emp_ttbs，oe.orders_ttbs LOGFILE = import.log</pre><div class="infoboxnote" id="GUID-9B585706-F91F-42E1-9F9E-30D3B758B52E__GUID-0A8A8BC4-46B9-4747-881E-313D517B3F2B">
                                 <p class="notep1">注意：</p>
                                 <p>在导入期间，可能会暂时对用户定义的表空间进行读/写以进行元数据加载。确保在导入期间不对用户进行任何更改。成功完成导入后，所有用户定义的表空间都是可读/写的。</p>
                              </div>
                              <div class="infoboxnotealso" id="GUID-9B585706-F91F-42E1-9F9E-30D3B758B52E__GUID-EE571B79-45F7-4B0D-85BF-BFFAADEC4AAB">
                                 <p class="notep1">也可以看看：</p>
                                 <p>有关使用导入实用<a href="../sutil/datapump-import-utility.html#SUTIL300" target="_blank"><span class="italic">程序</span></a>的信息，请<a href="../sutil/datapump-import-utility.html#SUTIL300" target="_blank"><span class="italic">参见Oracle Database Utilities</span></a></p>
                              </div>
                           </dd>
                           <dt class="dlterm"><a name="GUID-9B585706-F91F-42E1-9F9E-30D3B758B52E__GUID-8BBF8FA3-3D4F-46CF-9854-BDFF637F3F22"><!-- --></a>任务5（可选）将表空间恢复为读/写模式</dt>
                           <dd>
                              <p>使包含要传输的表的表在源数据库中再次读/写，如下所示：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE emp_tsp READ WRITE; ALTER TABLESPACE orders_tsp READ WRITE;</pre></dd>
                        </dl>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-E1270F3E-2476-44C2-A721-6A456A372379" title="您可以在数据库之间传输表，分区和子分区。">在数据库之间传输表，分区或子分区</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN13737"></a><div class="props_rev_3"><a id="GUID-E4B0F929-79D0-4DEE-B1DD-378BDBC31A0B" name="GUID-E4B0F929-79D0-4DEE-B1DD-378BDBC31A0B"></a><h3 id="ADMIN-GUID-E4B0F929-79D0-4DEE-B1DD-378BDBC31A0B" class="sect3"><span class="enumeration_section">15.5</span>在平台之间转换数据</h3>
               <div>
                  <p>当您执行可传输操作，并且源平台和目标平台具有不同的字节顺序时，您必须将传输的数据转换为目标平台格式。如果源平台和目标平台具有相同的字节顺序，则不需要进行数据转换。您可以使用<code class="codeph">DBMS_FILE_TRANSFER</code>包或RMAN <code class="codeph">CONVERT</code>命令来转换数据。
                  </p>
                  <div class="infoboxnote" id="GUID-E4B0F929-79D0-4DEE-B1DD-378BDBC31A0B__GUID-32AE1858-0485-49F7-B293-FDE2AC0A0011">
                     <p class="notep1">注意：</p>
                     <p>某些限制可能适用于这些部分中未描述的限制。有关更多信息，请参阅以下文档：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关检查平台字节顺序的信息，请参阅<span class="q">“ <a href="transporting-data.html#GUID-FE3003B9-605A-4269-B167-005AC778C870" title="您可以跨平台传输数据。">跨平台传输数据</a> ”</span></p>
                        </li>
                        <li>
                           <p>有关与<code class="codeph">DBMS_FILE_TRANSFER</code>程序包相关的限制的信息，请<code class="codeph">DBMS_FILE_TRANSFER</code> <a href="../arpls/DBMS_FILE_TRANSFER.html#ARPLS095" target="_blank"><span class="italic">Oracle Database PL / SQL程序包和类型参考</span></a></p>
                        </li>
                        <li>
                           <p>有关RMAN <code class="codeph">CONVERT</code>命令相关限制的信息<a href="../rcmrf/CONVERT.html#RCMRF192" target="_blank"><span class="italic">，请参见Oracle数据库备份和恢复参考</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="transporting-data.html#GUID-1F6EA48A-92A8-45DE-8DFF-30E424B61C43">使用DBMS_FILE_TRANSFER包在平台之间转换数据</a><br>您可以使用<code class="codeph">GET_FILE</code>或<code class="codeph">PUT_FILE</code>的议事<code class="codeph">DBMS_FILE_TRANSFER</code>包中的数据文件传输过程中的平台之间的数据转换。
                     </li>
                     <li class="ulchildlink"><a href="transporting-data.html#GUID-DDFA71A3-396A-440A-B9AB-E0970F843904">使用RMAN在平台之间转换数据</a><br>使用RMAN <code class="codeph">CONVERT</code>命令转换数据时，可以在运行Data Pump导出后转换源平台上的数据，也可以在运行Data Pump导入之前转换目标平台上的数据。在任何一种情况下，您都必须将数据文件从源系统传输到目标系统。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-1901E9C3-8FCE-4D4E-AB65-34D703474E52" title="传输数据会将数据从一个数据库移动到另一个数据库。">传输数据</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN14066"></a><div class="props_rev_3"><a id="GUID-1F6EA48A-92A8-45DE-8DFF-30E424B61C43" name="GUID-1F6EA48A-92A8-45DE-8DFF-30E424B61C43"></a><h4 id="ADMIN-GUID-1F6EA48A-92A8-45DE-8DFF-30E424B61C43" class="sect4"><span class="enumeration_section">15.5.1</span>使用DBMS_FILE_TRANSFER包在平台之间转换数据</h4>
                  <div>
                     <p>您可以使用<code class="codeph">GET_FILE</code>或<code class="codeph">PUT_FILE</code>的议事<code class="codeph">DBMS_FILE_TRANSFER</code>包中的数据文件传输过程中的平台之间的数据转换。
                     </p>
                     <div class="section">
                        <p>当您使用这些过程之一在源平台和目标平台之间移动数据文件时，每个数据文件中的每个块都将转换为目标平台的字节顺序。</p>
                        <p>本节使用一个示例来描述如何使用<code class="codeph">DBMS_FILE_TRANSFER</code>包将数据文件转换为其他平台。该示例做出以下假设：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">GET_FILE</code>过程将传输数据文件。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">mytable.342.123456789</code>数据文件正在转移到另一个平台。
                              </p>
                           </li>
                           <li>
                              <p>源平台的字节顺序与目标平台的字节顺序不同。</p>
                           </li>
                           <li>
                              <p>源数据库的全局名称是<code class="codeph">dbsa.example.com</code> 。
                              </p>
                           </li>
                           <li>
                              <p>源数据库和目标数据库都使用Oracle自动存储管理（Oracle ASM）。</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-1F6EA48A-92A8-45DE-8DFF-30E424B61C43__GUID-F697955B-11B3-4E7F-BC38-07DE715DD5C3">
                           <p class="notep1">注意：</p>
                           <p>您还可以使用<code class="codeph">DBMS_FILE_TRANSFER</code>包在具有相同字节顺序的平台之间传输数据文件。
                           </p>
                        </div>
                        <p>完成以下步骤以通过使用<code class="codeph">GET_FILE</code>过程传输数据文件来转换数据文件：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>使用SQL * Plus以可以创建目录对象的管理用户身份连接到源数据库。</span></li>
                        <li class="stepexpand"><span>创建目录对象以存储要传输到目标数据库的数据文件。</span><div>
                              <p>例如，要为<code class="codeph">+data/dbsa/datafile</code>目录创建名为<code class="codeph">sales_dir_source</code>的目录对象，请执行以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">创建或替换目录sales_dir_source AS'+ data / dbsa / datafile';</pre><p>创建目录对象时，指定的文件系统目录必须存在。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>使用SQL * Plus作为管理用户连接到目标数据库，管理用户可以创建数据库链接，创建目录对象，并在<code class="codeph">DBMS_FILE_TRANSFER</code>包中运行这些过程。</span></li>
                        <li class="stepexpand"><span>创建从目标数据库到源数据库的数据库链接。</span><div>
                              <p>源数据库中的已连接用户必须对您在步骤2中创建的目录对象具有读取权限。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>创建目录对象以存储要从源数据库传输的数据文件。</span><div>
                              <p>将在<code class="codeph">DBMS_FILE_TRANSFER</code>程序包中运行该过程的本地数据库用户必须对目录对象具有写权限。
                              </p>
                              <p>例如，要为<code class="codeph">+data/dbsb/datafile</code>目录创建名为<code class="codeph">sales_dir_target</code>的目录对象，请运行以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">创建或替换目录sales_dir_target AS'+ data / dbsb / datafile';</pre></div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">DBMS_FILE_TRANSFER</code>包中的<code class="codeph">GET_FILE</code>过程以传输数据文件。</span><div>
                              <p>例如，运行以下过程以使用您在步骤4中创建的数据库链接将<code class="codeph">mytable.342.123456789</code>数据文件从源数据库传输到目标数据库：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_FILE_TRANSFER.GET_FILE（source_directory_object =&gt;'sales_dir_source'，source_file_name =&gt;'mytable.342.123456789'，source_database =&gt;'dbsa.example.com'，destination_directory_object =&gt;'sales_dir_target'，destination_file_name =&gt;'mytable'）;结束; /</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-1F6EA48A-92A8-45DE-8DFF-30E424B61C43__GUID-C3EDF248-A004-42A3-AECF-C72853529A7E">
                           <p class="notep1">注意：</p>
                           <p>在此示例中，目标数据文件名是<code class="codeph">mytable</code> 。Oracle ASM不允许在<code class="codeph">GET_FILE</code>过程的<code class="codeph">destination_file_name</code>参数中使用完全限定的文件名表单。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="getting-started-with-database-administration.html#GUID-895EC72B-C620-4D93-9F23-3F6DC1706764" title="Oracle数据库包括以下组件：Oracle数据库实例（一组进程和内存）以及一组包含用户数据和系统数据的磁盘文件。">关于使用SQL * Plus连接到数据库</a></li>
                           <li><a href="managing-a-distributed-database.html#GUID-B5950167-35F8-4C88-B063-382E0290CB53" title="要支持对分布式数据库系统中的数据和模式对象的应用程序访问，必须创建所有必需的数据库链接。">创建数据库链接</a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-1F6EA48A-92A8-45DE-8DFF-30E424B61C43__GUID-3724EE3A-E181-4BCF-A2AF-3DED2AD8BE73">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关使用<code class="codeph">DBMS_FILE_TRANSFER</code>程序包的更多信息，请<a href="../arpls/DBMS_FILE_TRANSFER.html#ARPLS095" target="_blank"><span class="italic">参见Oracle Database PL / SQL程序包和类型参考</span></a></p>
                           </li>
                           <li>
                              <p>有关ASM中完全限定文件名表单的信息，请参见<a href="../ostmg/asm-files-directories-templates.html#OSTMG94200" target="_blank"><span class="italic">“Oracle自动存储管理管理员指南”</span></a></p>
                           </li>
                           <li>
                              <p>有关如何创建数据库链接的信息，请<a href="../sqlrf/CREATE-DATABASE-LINK.html#SQLRF-GUID-D966642A-B19E-449D-9968-1121AF06D793" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-E4B0F929-79D0-4DEE-B1DD-378BDBC31A0B" title="当您执行可传输操作，并且源平台和目标平台具有不同的字节顺序时，您必须将传输的数据转换为目标平台格式。如果源平台和目标平台具有相同的字节顺序，则不需要进行数据转换。您可以使用DBMS_FILE_TRANSFER包或RMAN CONVERT命令来转换数据。">在平台之间转换数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN14067"></a><div class="props_rev_3"><a id="GUID-DDFA71A3-396A-440A-B9AB-E0970F843904" name="GUID-DDFA71A3-396A-440A-B9AB-E0970F843904"></a><h4 id="ADMIN-GUID-DDFA71A3-396A-440A-B9AB-E0970F843904" class="sect4"><span class="enumeration_section">15.5.2</span>使用RMAN在平台之间转换数据</h4>
                  <div>
                     <p>使用RMAN <code class="codeph">CONVERT</code>命令转换数据时，可以在运行Data Pump导出后转换源平台上的数据，也可以在运行Data Pump导入之前转换目标平台上的数据。在任何一种情况下，您都必须将数据文件从源系统传输到目标系统。
                     </p>
                     <p>您可以使用以下RMAN <code class="codeph">CONVERT</code>命令转换数据：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">CONVERT</code> <code class="codeph">DATAFILE</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">CONVERT</code> <code class="codeph">TABLESPACE</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">CONVERT</code> <code class="codeph">DATABASE</code></p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-DDFA71A3-396A-440A-B9AB-E0970F843904__GUID-B8E7B101-BA7A-4C02-BA71-083E07EEEC88">
                        <p class="notep1">注意：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>数据类型限制适用于RMAN <code class="codeph">CONVERT</code>命令。
                              </p>
                           </li>
                           <li>
                              <p>对于具有还原段的数据文件，RMAN <code class="codeph">CONVERT</code>命令不支持在不同的endian格式之间转换数据文件。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="transporting-data.html#GUID-E52793F4-8A79-44C1-9C56-783D12261102">导出后在源系统上转换表空间</a><br>示例说明如何使用RMAN <code class="codeph">CONVERT</code> <code class="codeph">TABLESPACE</code>命令将表空间转换为其他平台。
                        </li>
                        <li class="ulchildlink"><a href="transporting-data.html#GUID-E12EFB1A-010B-4220-A898-FB6FF66D6924">导入前在目标系统上转换数据文件</a><br>示例说明如何使用RMAN <code class="codeph">CONVERT</code> <code class="codeph">DATAFILE</code>命令将数据文件转换为其他平台。
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-DDFA71A3-396A-440A-B9AB-E0970F843904__GUID-DE3F6F96-FC5E-4B85-A5AD-C9E7343211C3">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../rcmrf/CONVERT.html#RCMRF192" target="_blank"><span class="italic">Oracle数据库备份和恢复参考</span></a></p>
                           </li>
                           <li>
                              <p><a href="../bradv/rman-transporting-data-across-platforms.html#BRADV05432" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-E4B0F929-79D0-4DEE-B1DD-378BDBC31A0B" title="当您执行可传输操作，并且源平台和目标平台具有不同的字节顺序时，您必须将传输的数据转换为目标平台格式。如果源平台和目标平台具有相同的字节顺序，则不需要进行数据转换。您可以使用DBMS_FILE_TRANSFER包或RMAN CONVERT命令来转换数据。">在平台之间转换数据</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN13738"></a><div class="props_rev_3"><a id="GUID-E52793F4-8A79-44C1-9C56-783D12261102" name="GUID-E52793F4-8A79-44C1-9C56-783D12261102"></a><h5 id="ADMIN-GUID-E52793F4-8A79-44C1-9C56-783D12261102" class="sect5"><span class="enumeration_section">15.5.2.1</span>导出后在源系统上转换表空间</h5>
                     <div>
                        <p>示例说明如何使用RMAN <code class="codeph">CONVERT</code> <code class="codeph">TABLESPACE</code>命令将表空间转换为其他平台。
                        </p>
                        <div class="section">
                           <p>该示例做出以下假设：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">sales_1</code>和<code class="codeph">sales_2</code>表空间正在传输到不同的平台。
                                 </p>
                              </li>
                              <li>
                                 <p>源平台的字节顺序与目标平台的字节顺序不同。</p>
                              </li>
                              <li>
                                 <p>在将表空间集传输到目标系统之前，您希望转换源系统上的数据。</p>
                              </li>
                              <li>
                                 <p>您已在源数据库上完成数据泵导出。</p>
                              </li>
                           </ul>
                           <p>完成以下步骤以转换源系统上的表空间：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>在命令提示符处，启动RMAN并连接到源数据库：</span><div><pre class="oac_no_warn" dir="ltr">$ RMAN TARGET / Recovery Manager：版本12.1.0.1.0  - 生产版权所有（c）1982,2012，Oracle和/或其附属公司。版权所有。连接到目标数据库：salesdb（DBID = 3295731590）</pre></div>
                           </li>
                           <li class="stepexpand"><span>使用RMAN <code class="codeph">CONVERT</code> <code class="codeph">TABLESPACE</code>命令将数据文件转换为源平台上的临时位置。</span><div>
                                 <p>在此示例中，假设已创建临时位置目录<code class="codeph">/tmp</code> 。转换后的数据文件由系统分配名称。
                                 </p><pre class="oac_no_warn" dir="ltr">RMAN&gt; CONVERT TABLESPACE sales_1，sales_2 2&gt; TO PLATFORM'Microsoft Windows IA（32位）'3&gt; FORMAT'/ tmp /％U';使用通道ORA_DISK_1通道在源头开始转换ORA_DISK_1通道ORA_DISK_1：启动数据文件转换输入数据文件文件号= 00007名称= / u01 / app / oracle / oradata / salesdb / sales_101.dbf已<span class="bold">转换数据文件= / tmp / data_D-SALESDB_I -1192614013_TS-SALES_1_FNO-7_03jru08s</span>通道ORA_DISK_1：数据文件转换完成，已用时间：00：00：45通道ORA_DISK_1：启动数据文件转换输入数据文件文件号= 00008 name = / u01 / app / oracle / oradata / salesdb / sales_201.dbf已<span class="bold">转换datafile = / tmp / data_D-SALESDB_I-1192614013_TS-SALES_2_FNO-8_04jru0aa</span>频道ORA_DISK_1：数据文件转换完成，已用时间：00：00：25在30-SEP-08源头完成转换</pre><div class="infoboxnotealso" id="GUID-E52793F4-8A79-44C1-9C56-783D12261102__GUID-42DCE673-130F-4F7F-BCE9-27D0CB35FA15">
                                    <p class="notep1">也可以看看：</p>
                                    <p>有关RMAN <code class="codeph">CONVERT</code>命令的说明，请<a href="../rcmrf/CONVERT.html#RCMRF192" target="_blank"><span class="italic">参见Oracle数据库备份和恢复参考</span></a></p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>退出恢复管理器：</span><div><pre class="oac_no_warn" dir="ltr">RMAN&gt;退出Recovery Manager完成。
</pre></div>
                           </li>
                           <li class="stepexpand"><span>将数据文件传输到目标系统。</span></li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="transporting-data.html#GUID-4F6AE634-053F-4CA9-AB53-7DA8B0047699" title="传输数据文件时，应遵循一套准则。">传输数据文件的准则</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-DDFA71A3-396A-440A-B9AB-E0970F843904" title="使用RMAN CONVERT命令转换数据时，可以在运行Data Pump导出后转换源平台上的数据，也可以在运行Data Pump导入之前转换目标平台上的数据。在任何一种情况下，您都必须将数据文件从源系统传输到目标系统。">使用RMAN在平台之间转换数据</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN13739"></a><div class="props_rev_3"><a id="GUID-E12EFB1A-010B-4220-A898-FB6FF66D6924" name="GUID-E12EFB1A-010B-4220-A898-FB6FF66D6924"></a><h5 id="ADMIN-GUID-E12EFB1A-010B-4220-A898-FB6FF66D6924" class="sect5"><span class="enumeration_section">15.5.2.2</span>导入前在目标系统上转换数据文件</h5>
                     <div>
                        <p>示例说明如何使用RMAN <code class="codeph">CONVERT</code> <code class="codeph">DATAFILE</code>命令将数据文件转换为其他平台。
                        </p>
                        <div class="section">
                           <p>在转换过程中，您可以按文件名识别数据文件，而不是通过表空间名称识别。在导入表空间元数据之前，目标实例无法知道所需的表空间名称。</p>
                           <p>该示例做出以下假设：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>您尚未转换正在传输的表空间的数据文件。</p>
                                 <p>如果使用<code class="codeph">DBMS_FILE_TRANSFER</code>程序包将数据文件传输到目标系统，则在文件传输期间会自动转换数据文件。请参阅<span class="q">“ <a href="transporting-data.html#GUID-1F6EA48A-92A8-45DE-8DFF-30E424B61C43" title="您可以使用DBMS_FILE_TRANSFER程序包的GET_FILE或PUT_FILE过程在数据文件传输期间在平台之间转换数据。">使用DBMS_FILE_TRANSFER程序包在平台之间转换数据</a> ”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>以下数据文件正在传输到不同的平台：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>C：\ TEMP \ sales_101.dbf</p>
                                    </li>
                                    <li>
                                       <p>C：\ TEMP \ sales_201.dbf</p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>源平台的字节顺序与目标平台的字节顺序不同。</p>
                              </li>
                              <li>
                                 <p>在执行数据泵导入之前，您希望转换目标系统上的数据。</p>
                              </li>
                              <li>
                                 <p>转换后的数据文件放在C：\ app \ orauser \ oradata \ orawin \中，这是目标系统的现有数据文件的位置：</p>
                              </li>
                           </ul>
                           <p>完成以下步骤以转换目标系统上的表空间：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>如果您使用的是SQL * Plus，则返回主机系统：</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; HOST</pre></div>
                           </li>
                           <li class="stepexpand"><span>使用RMAN <code class="codeph">CONVERT</code> <code class="codeph">DATAFILE</code>命令转换目标平台上的数据文件：</span><div><pre class="oac_no_warn" dir="ltr">C：\&gt; RMAN TARGET / Recovery Manager：版本12.1.0.1.0  - 生产版权所有（c）1982,2012，Oracle和/或其附属公司。版权所有。连接到目标数据库：ORAWIN（DBID = 3462152886）RMAN&gt; CONVERT DATAFILE 2&gt;'C：\ Temp \ sales_101.dbf'，3&gt;'C：\ Temp \ sales_201.dbf'4&gt; TO PLATFORM =“Microsoft Windows IA（ 32位）“5&gt; FROM PLATFORM =”Solaris [tm] OE（32位）“6&gt; DB_FILE_NAME_CONVERT = 7&gt;'C：\ Temp \'，'C：\ app \ orauser \ oradata \ orawin \'8 &gt; PARALLELISM = 4;</pre><p>如果源位置，目标位置或两者都不使用Oracle自动存储管理（Oracle ASM），则源和目标平台是可选的。RMAN通过检查数据文件来确定源平台，目标平台默认为运行转换的主机的平台。</p>
                                 <p>如果源位置和目标位置都使用Oracle ASM，则必须在<code class="codeph">DB_FILE_NAME_CONVERT</code>子句中指定源平台和目标平台。
                                 </p>
                                 <div class="infoboxnotealso" id="GUID-E12EFB1A-010B-4220-A898-FB6FF66D6924__GUID-0E0F59B4-8E28-428F-B3C4-A4A2674E2247">
                                    <p class="notep1">也可以看看：</p>
                                    <p>有关RMAN <code class="codeph">CONVERT</code>命令的说明，请<a href="../rcmrf/CONVERT.html#RCMRF192" target="_blank"><span class="italic">参见Oracle数据库备份和恢复参考</span></a></p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>退出恢复管理器：</span><div><pre class="oac_no_warn" dir="ltr">RMAN&gt;退出Recovery Manager完成。</pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-DDFA71A3-396A-440A-B9AB-E0970F843904" title="使用RMAN CONVERT命令转换数据时，可以在运行Data Pump导出后转换源平台上的数据，也可以在运行Data Pump导入之前转换目标平台上的数据。在任何一种情况下，您都必须将数据文件从源系统传输到目标系统。">使用RMAN在平台之间转换数据</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADMIN13914"></a><div class="props_rev_3"><a id="GUID-4F6AE634-053F-4CA9-AB53-7DA8B0047699" name="GUID-4F6AE634-053F-4CA9-AB53-7DA8B0047699"></a><h3 id="ADMIN-GUID-4F6AE634-053F-4CA9-AB53-7DA8B0047699" class="sect3"><span class="enumeration_section">15.6</span>传输数据文件的准则</h3>
               <div>
                  <p>传输数据文件时，应遵循一套准则。</p>
                  <p>如果源和目标都是文件系统，那么您可以使用以下方式进行传输：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>用于复制平面文件的任何工具（例如，操作系统复制实用程序或ftp）</p>
                     </li>
                     <li>
                        <p><code class="codeph">DBMS_FILE_TRANSFER</code>包</p>
                     </li>
                     <li>
                        <p>RMAN</p>
                     </li>
                     <li>
                        <p>任何用于在CD上发布的工具</p>
                     </li>
                  </ul>
                  <p>如果源或目标是Oracle自动存储管理（Oracle ASM）磁盘组，则可以使用：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>ftp到或来自XML DB存储库中的<code class="codeph">/sys/asm</code>虚拟文件夹</p>
                        <p>有关更多信息，请参见“ <a href="../ostmg/asm-files-directories-templates.html#OSTMG10001" target="_blank"><span class="italic">Oracle自动存储管理管理员指南”</span></a> 。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">DBMS_FILE_TRANSFER</code>包</p>
                     </li>
                     <li>
                        <p>RMAN</p>
                     </li>
                  </ul>
                  <p>不要传输管理表空间（例如<code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code> ）或任何撤消或临时表空间的数据文件。
                  </p>
                  <p>如果要传输的块大小与接收数据的数据库的标准块大小不同，则必须首先在接收数据库参数文件中具有<code class="codeph">DB_</code> <span class="italic"><code class="codeph">n</code></span> <code class="codeph">K_CACHE_SIZE</code>初始化参数条目。
                  </p>
                  <p>例如，如果要将具有8K块大小的数据传输到具有4K标准块大小的数据库中，则必须在参数文件中包含<code class="codeph">DB_8K_CACHE_SIZE</code>初始化参数条目。如果它尚未包含在参数文件中，则可以使用<code class="codeph">ALTER SYSTEM SET</code>语句设置此参数。
                  </p>
                  <p>有关为<code class="codeph">DB_</code> <span class="italic"><code class="codeph">n</code></span> <code class="codeph">K_CACHE_SIZE</code>初始化参数指定值的信息，请参见<a href="../refrn/DB_nK_CACHE_SIZE.html#REFRN10027" target="_blank"><span class="italic">Oracle数据库参考</span></a> 。
                  </p>
                  <p>从Oracle Database 12 <span class="italic">c开始</span> ， <code class="codeph">DBMS_FILE_TRANSFER</code>包中的<code class="codeph">GET_FILE</code>或<code class="codeph">PUT_FILE</code>过程可以在数据文件传输期间在平台之间转换数据。请参阅<span class="q">“ <a href="transporting-data.html#GUID-E4B0F929-79D0-4DEE-B1DD-378BDBC31A0B" title="当您执行可传输操作，并且源平台和目标平台具有不同的字节顺序时，您必须将传输的数据转换为目标平台格式。如果源平台和目标平台具有相同的字节顺序，则不需要进行数据转换。您可以使用DBMS_FILE_TRANSFER包或RMAN CONVERT命令来转换数据。">在平台之间转换数据</a> ”</span> 。
                  </p>
                  <p>从Oracle Database 12 <span class="italic">c开始</span> ，RMAN可以使用启用网络的还原来传输文件。RMAN使用<code class="codeph">RESTORE</code>命令的<code class="codeph">FROM</code> <code class="codeph">SERVICE</code>子句从远程数据库实例通过网络还原数据库文件。启用网络的还原的主要优点是，它不需要将备份还原到磁盘上的暂存区域以及需要传输副本。因此，启用网络的还原可节省磁盘空间和时间。该技术还可以在文件传输期间提供以下优点：仅对使用的数据块进行压缩，加密和传输。有关更多信息，请参见“ <a href="../bradv/rman-recovery-advanced.html#BRADV680" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南”</span></a> 。
                  </p>
                  <div class="infoboxnote" id="GUID-4F6AE634-053F-4CA9-AB53-7DA8B0047699__GUID-8D55C54D-6F02-42DD-B9A4-CC19A7823000">
                     <p class="notep1">注意：</p>
                     <p>使用UNIX <code class="codeph">dd</code>实用程序在数据库之间复制原始设备文件时请务必小心，并注意Oracle Database <span class="italic">12c</span>及更高版本不支持数据库文件的原始设备。<code class="codeph">dd</code>实用程序可用于复制整个源原始设备文件，或者可以使用选项调用它，指示它仅复制源raw-device文件中的特定范围的块。
                     </p>
                     <p>由于隐藏的控制信息作为数据文件的一部分存储，因此很难确定原始设备文件的实际数据文件大小。如果必须使用<code class="codeph">dd</code>实用程序对原始设备进行操作，请指定整个源原始设备文件内容。如果将数据库文件内容从原始设备移动到ASM或文件系统以遵守Oracle Database 12 <span class="italic">c</span>及更高版本的原始设备的支持，则使用Oracle提供的工具（如RMAN）。</p>
                  </div>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-4F6AE634-053F-4CA9-AB53-7DA8B0047699__GUID-64103C45-2CCC-496D-9955-14D55750743A">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="managing-data-files-and-temp-files.html#GUID-411B0545-DD04-4223-80F0-3CE2A550D7B6" title="您不一定必须使用操作系统来复制数据库中的文件，或者像使用可传输表空间功能时那样在数据库之间传输文件。您可以使用DBMS_FILE_TRANSFER包来实现此目的。">使用数据库服务器复制文件</a> ”，</span>以获取有关使用<code class="codeph">DBMS_FILE_TRANSFER</code>程序包复制正在传输的文件及其元数据的信息</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="transporting-data.html#GUID-1901E9C3-8FCE-4D4E-AB65-34D703474E52" title="传输数据会将数据从一个数据库移动到另一个数据库。">传输数据</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
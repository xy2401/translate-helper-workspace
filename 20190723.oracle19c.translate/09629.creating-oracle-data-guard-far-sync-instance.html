<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="An Oracle Data Guard far sync instance is a remote Oracle Data Guard destination that accepts redo from the primary database and then ships that redo to other members of the Oracle Data Guard configuration."></meta>
      <meta name="description" content="An Oracle Data Guard far sync instance is a remote Oracle Data Guard destination that accepts redo from the primary database and then ships that redo to other members of the Oracle Data Guard configuration."></meta>
      <title>使用远程同步实例</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Concepts and Administration "></meta>
      <meta property="og:description" content="An Oracle Data Guard far sync instance is a remote Oracle Data Guard destination that accepts redo from the primary database and then ships that redo to other members of the Oracle Data Guard configuration."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Concepts and Administration"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="data-guard-concepts-and-administration.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T10:50:21-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96244-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="creating-oracle-data-guard-logical-standby.html" title="Previous" type="text/html"></link>
      <link rel="next" href="oracle-data-guard-protection-modes.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Data Guard Concepts and Administration"></meta>
    <meta name="dcterms.isVersionOf" content="SBYDB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="creating-oracle-data-guard-logical-standby.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="oracle-data-guard-protection-modes.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">概念和管理</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-data-guard-concepts.html" property="item" typeof="WebPage"><span property="name">概念和管理</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用远程同步实例</li>
            </ol>
            <a id="GUID-8AD7FBA2-42B0-46CF-852B-1AF0CB4A36E8" name="GUID-8AD7FBA2-42B0-46CF-852B-1AF0CB4A36E8"></a><a id="SBYDB5416"></a>
            
            <h2 id="SBYDB-GUID-8AD7FBA2-42B0-46CF-852B-1AF0CB4A36E8" class="sect2"><span class="enumeration_chapter">5</span>使用远程同步实例</h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle Data Guard远程同步实例是远程Oracle Data Guard目标，它接受来自主数据库的重做，然后将该重做发送到Oracle Data Guard配置的其他成员。</p>
               <p>远程同步实例管理控制文件，将重做接收到备用重做日志（SRL），并将这些SRL归档到本地归档重做日志，但这是与备用数据库的相似性结束的地方。远程同步实例没有用户数据文件，无法打开访问权限，无法运行重做应用，并且永远不能在主要角色中运行或转换为任何类型的备用数据库。</p>
               <p>远程同步实例是Oracle Active Data Guard远程同步功能的一部分，该功能需要Oracle Active Data Guard许可证。</p>
               <p>远程同步实例占用的磁盘和处理资源非常少，但却能够在没有数据丢失的情况下故障转移到终端目标，并且可以卸载其他类型开销的主数据库（例如，重做传输）。</p>
               <p>在为远程同步实例提供服务时，也可以使用主服务器在为典型备用目标服务时可用的所有重做传输选项。在维护终端目标时，所有重做传输选项都可用于远程同步实例（例如，执行重做传输压缩，如果您拥有Oracle Advanced Compression选项的许可证）。</p>
               <p>许多配置都使用异步传输将主数据库重新发送到备用数据库，但有可能在故障转移时丢失一些数据。使用同步重做传输实现零数据丢失可能不是一个可行的选择，因为由于两个数据库之间的网络延迟而对主要的提交响应时间产生影响。</p>
               <p>创建靠近主服务器的远程同步实例的好处是可以将提交响应时间的影响降至可接受的阈值（由于主同步和远程同步实例之间的网络延迟较小），同时允许更高的数据保护保证 - 如果主要是失败，并假设远程同步实例在失败时同步，远程同步实例和终端备用数据库将协调从远程同步实例到备用数据库的最终重做装运，以便发送任何尚未提供给备用数据库的重做然后执行零数据丢失故障转移。</p>
               <p>请参阅以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="creating-oracle-data-guard-far-sync-instance.html#GUID-3B796B03-DB88-4592-84CB-3E019C977CBA" title="创建远程同步实例类似于创建物理备用数据库，但远程同步实例中不存在数据文件。">创建远程同步实例</a></p>
                  </li>
                  <li>
                     <p><a href="creating-oracle-data-guard-far-sync-instance.html#GUID-5CA464E7-40B6-486C-AF95-2F04493EB2DD" title="使用LOG_ARCHIVE_DEST_n初始化参数的GROUP属性将日志归档目标分配给组。使用LOG_ARCHIVE_DEST_n初始化参数的PRIORITY属性在日志归档目标组中分配目标首选项，可以控制故障恢复机制，尤其是对于组内的多个成员。您还可以使用PRIORITY属性配置组，以便在首选目标失败时将其发送到多个目标。多个日志归档目标组可用于特定于站点的高可用性注意事项，也可用于通过大型级联（读取器场）配置分发服务。Oracle Data Guard通过定期轮询已配置的目标以确定其可用性，跟踪日志归档目标组中可用但不活动的目标的当前状态。">替代目的地</a></p>
                  </li>
                  <li>
                     <p><a href="creating-oracle-data-guard-far-sync-instance.html#GUID-A06EDCC8-7AE3-423E-826A-4C1A1B5FA987" title="可以设置远程同步实例配置以提供不同级别的数据保护。">配置备用目标</a></p>
                  </li>
                  <li>
                     <p><a href="creating-oracle-data-guard-far-sync-instance.html#GUID-54F9001B-A5F2-4134-A6BA-521DC7E41E57" title="在最高性能或最高可用性模式下支持远程同步实例。">远程同步实例支持的保护模式</a></p>
                  </li>
               </ul>
            </div><a id="SBYDB5417"></a><div class="props_rev_3"><a id="GUID-3B796B03-DB88-4592-84CB-3E019C977CBA" name="GUID-3B796B03-DB88-4592-84CB-3E019C977CBA"></a><h3 id="SBYDB-GUID-3B796B03-DB88-4592-84CB-3E019C977CBA" class="sect3"><span class="enumeration_section">5.1</span>创建远程同步实例</h3>
               <div>
                  <p>创建远程同步实例类似于创建物理备用数据库，但远程同步实例中不存在数据文件。</p>
                  <p>因此，在远程同步实例上，无需复制数据文件或从备份还原数据文件。创建远程同步实例后，将修改配置以在最高可用性模式下从主数据库同步向重同步实例发送重做，然后远程同步实例将实时异步转发重做。最后，原始异步备用（称为终端备用）配置为在远程同步实例的通信中断的情况下充当远同步实例的备用。</p>
                  <div class="infoboxnote" id="GUID-3B796B03-DB88-4592-84CB-3E019C977CBA__GUID-56AA04D2-8AD7-4D1E-8CAF-1A068CA8D3E3">
                     <p class="notep1">注意：</p>
                     <p>在包含远程同步实例的配置中，主数据库和远程备用数据库之间仍必须存在直接网络连接。主数据库和远程备用数据库之间的直接连接用于执行运行状况检查和切换处理任务。它不用于重做传输，除非备用数据库已配置为备用目标，以防远程同步实例失败并且没有配置备用远程同步来维护保护级别。</p>
                  </div>
               </div><a id="SBYDB5418"></a><a id="SBYDB5436"></a><div class="props_rev_3"><a id="GUID-43FE645C-1383-44F1-9127-7EFB2A402DB3" name="GUID-43FE645C-1383-44F1-9127-7EFB2A402DB3"></a><h4 id="SBYDB-GUID-43FE645C-1383-44F1-9127-7EFB2A402DB3" class="sect4"><span class="enumeration_section">5.1.1</span>创建和配置远程同步实例</h4>
                  <div>
                     <div class="section">
                        <p>按照以下步骤创建远程同步实例：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>为远程同步实例创建控制文件，如以下示例所示（主数据库不必打开，但必须至少安装）：</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE创建远程同步实例控制文件AS  - &gt;'/arch2/chicagoFS/control01.ctl';</pre><p>生成的控制文件使<code class="codeph">chicagoFS</code>能够作为远程同步实例运行，该实例从主数据库<code class="codeph">chicago</code>接收重做。显示的路径和文件名只是一个例子;您可以使用任何您想要的路径或文件名。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>从主数据库使用的服务器参数文件（SPFILE）创建参数文件（PFILE）。虽然参数文件中的大多数初始化设置也适用于远程同步实例，但必须进行一些修改。例如，在远程同步实例上，必须设置<code class="codeph">DB_FILE_NAME_CONVERT</code>和<code class="codeph">LOG_FILE_NAME_CONVERT</code>参数，并且必须修改远程同步实例的<code class="codeph">DB_UNIQUE_NAME</code>和远程同步实例控制文件的位置。<a href="creating-oracle-data-guard-far-sync-instance.html#GUID-43FE645C-1383-44F1-9127-7EFB2A402DB3__CJADCDJE">示例5-1</a>显示了具有<code class="codeph">chicagoFS</code>的<code class="codeph">DB_UNIQUE_NAME</code>的<code class="codeph">chicagoFS</code>同步实例的示例参数文件内容。</span></li>
                        <li class="stepexpand"><span>从编辑的参数文件（PFILE）创建服务器参数文件（SPFILE），以便于对参数值进行任何后续更改。如果不使用SPFILE，则在将远程同步实例添加到Oracle Data Guard代理配置时，会在<code class="codeph">SHOW</code> <code class="codeph">CONFIGURATION</code>输出中返回警告。</span></li>
                        <li class="stepexpand"><span>使用操作系统复制实用程序将步骤1中创建的远程同步实例控制文件和步骤3中创建的服务器参数文件（SPFILE）从主系统复制到远程同步实例系统上的相应位置。</span></li>
                        <li class="stepexpand"><span>创建备用重做日志的方式与为常规备用数据库创建备用重做日志的方式相同。请参阅<a href="oracle-data-guard-redo-transport-services.html#GUID-E6EC6104-3C38-482D-B807-A0E84ECFB937">管理备用重做日志</a> 。</span><div>
                              <p>由于在远程同步实例上指定了<code class="codeph">LOG_FILE_NAME_CONVERT</code>参数（请参见<a href="creating-oracle-data-guard-far-sync-instance.html#GUID-43FE645C-1383-44F1-9127-7EFB2A402DB3__CJADCDJE">示例5-1</a> ），因此，如果在主服务器上创建重做传输，则会自动创建备用重做日志，如<a href="creating-oracle-data-guard-physical-standby.html#GUID-CA9076B9-3360-4A36-87AF-3390B391CEFF" title="如果这是第一次将备用数据库添加到配置中，则最佳做法是将主数据库配置为接收重做。">配置要接收的主数据库中所述重做数据</a> 。
                              </p>
                              <div class="infoboxnote" id="GUID-43FE645C-1383-44F1-9127-7EFB2A402DB3__GUID-E6A3F20E-442D-4024-8FD4-2524A358E1FB">
                                 <p class="notep1">注意：</p>
                                 <p>远程同步实例中使用的备用重做日志文件无法与其他数据库共享。因此，待机重做日志文件的<a href="getting-started-with-oracle-data-guard.html#GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699" title="The directory structure of the various standby databases is important because it determines the path names for the standby data files, archived redo log files, and standby redo log files.">备用数据库目录结构注意事项中</a>讨论的所有相关注意<a href="getting-started-with-oracle-data-guard.html#GUID-B59DBCF7-13A7-4F49-97E9-BF1BEF803699" title="各种备用数据库的目录结构很重要，因为它确定备用数据文件，归档重做日志文件和备用重做日志文件的路径名。">事项</a>也适用于远程同步实例。
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>如果远程同步实例要托管在Windows系统上，请使用ORADIM实用程序创建Windows服务。例如：</span><div><pre class="oac_no_warn" dir="ltr">oradim -NEW -SID ChicagoFS -STARTMODE手册</pre><p>创建并运行远程同步实例后，您可以将<code class="codeph">STARTMODE</code>更改为<code class="codeph">auto</code>以启用远程同步实例的自动启动</p>
                              <p>ORADIM实用程序自动确定应为其创建此服务的用户名，并提示输入该用户名的密码（如果该用户名需要密码）。有关使用ORADIM实用程序的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=NTQRF05011" target="_blank"><span class="italic">适用于Microsoft Windows的Oracle数据库平台指南</span></a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>如果操作系统身份验证用于管理用户，并且SSL用于重做传输身份验证，则此步骤是可选的。如果没有，则将主数据库的远程登录密码文件复制到远程同步实例上的相应目录。只要授予或撤销管理权限（ <code class="codeph">SYSDG</code> ， <code class="codeph">SYSOPER</code> ， <code class="codeph">SYSDBA</code>等），并且在具有管理权限的任何用户的密码更改后，必须重新复制密码文件。</span><div>
                              <p>如Oracle数据库<span class="italic">12c的</span>第2版（12.2.0.1），当口令文件手动更新在远同步例如，包含从主数据库相同的密码变更重做自动传播到被设置为任何备用数据库从该远程同步实例接收重做。应用重做时，备用数据库上的密码文件会更新。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在远程同步实例站点上，使用Oracle Net Manager为远程同步实例配置侦听器。<a id="d13202e416" class="indexterm-anchor"></a><a id="d13202e420" class="indexterm-anchor"></a></span><div>
                              <p>有关侦听器的更多信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=NETAG219" target="_blank"><span class="italic">Oracle数据库网络服务管理员指南”</span></a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在主系统上，使用Oracle Net Manager为重做传输服务使用的远程同步实例（ <code class="codeph">chicagoFS</code> ）创建网络服务名称。</span><div>
                              <p>在远程同步实例系统上，使用Oracle Net Manager为重做传输服务使用的主要（ <code class="codeph">chicago</code> ）和终端备用（ <code class="codeph">boston</code> ）创建网络服务名称。
                              </p>
                              <p>Oracle Net服务名称必须解析为连接描述符，该连接描述符使用您为主数据库，远程同步实例和终端备用数据库配置侦听器时指定的相同协议，主机地址，端口和服务。连接描述符还必须指定使用专用服务器。</p>
                              <p>有关服务名称的详细信息，请参阅“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sbydb&amp;id=NETAG175" target="_blank"><span class="italic">Oracle数据库网络服务管理员指南”</span></a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>以挂载模式启动远程同步实例。</span></li>
                        <li class="stepexpand"><span>验证远程同步实例是否正常运行。</span><div>
                              <p>有关在创建远程同步实例后验证配置的信息，请参阅<a href="oracle-data-guard-redo-transport-services.html#GUID-A0AAA20B-4DF8-4698-A7E0-3BED5A2C11E9" title="要在创建Oracle Data Guard配置后验证它，请从配置中的任何数据库查询V $ DATAGUARD_CONFIG视图。">验证配置</a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>将配置的保护模式增加到“最高可用性”。在主数据库上，执行以下命令：</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE SET STANDBY以最大限度地提高可用性;</pre><div class="infoboxnotealso" id="GUID-43FE645C-1383-44F1-9127-7EFB2A402DB3__GUID-E1891A3E-8A2C-4741-9EAC-1091C41CC046">
                                 <p class="notep1">也可以看看：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><a href="creating-oracle-data-guard-far-sync-instance.html#GUID-54F9001B-A5F2-4134-A6BA-521DC7E41E57" title="在最高性能或最高可用性模式下支持远程同步实例。">远程同步实例支持的保护模式，</a>以获取有关远程同步和保护模式的更多信息</p>
                                    </li>
                                    <li>
                                       <p>有关配置不同数据保护模式的详细信息，请参阅<a href="oracle-data-guard-protection-modes.html#GUID-16298839-9B8A-4E58-8EC9-27912E57F1CE" title="Oracle Data Guard允许您设置不同的数据保护模式。">Oracle Data Guard</a>保护模式</p>
                                    </li>
                                 </ul>
                              </div>
                           </div>
                        </li>
                     </ol>
                     <div class="example" id="GUID-43FE645C-1383-44F1-9127-7EFB2A402DB3__CJADCDJE">
                        <p class="titleinexample">示例5-1用于远程同步实例的一些初始化参数</p>
                        <p><span class="bold">主要</span> <span class="bold">数据库芝加哥</span></p><pre class="oac_no_warn" dir="ltr">DB_UNIQUE_NAME =芝加哥CONTROL_FILES ='/ arch1 / chicago / control01.ctl'DB_FILE_NAME_CONVERT ='/ boston /'，'/ chicago /'LOG_FILE_NAME_CONVERT ='/ boston /'，'/ chicago /'FAL_SERVER = boston LOG_ARCHIVE_CONFIG ='DG_CONFIG =（ chicago，chicagoFS，boston）'LOG_ARCHIVE_DEST_1 ='LOCATION = USE_DB_RECOVERY_FILE_DEST VALID_FOR =（ALL_LOGFILES，ALL_ROLES）DB_UNIQUE_NAME = chicago'LOG_ARCHIVE_DEST_2 ='SERVICE = chicagoFS SYNC AFFIRM VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）DB_UNIQUE_NAME = chicagoFS'</pre><p><span class="bold">远程同步实例chicagoFS</span></p><pre class="oac_no_warn" dir="ltr">DB_UNIQUE_NAME = chicagoFS CONTROL_FILES ='/ arch2 / chicagoFS / control01.ctl'DB_FILE_NAME_CONVERT ='/ chicago /'，'/ chicagoFS /'，'/ boston /'，'/ chicagoFS /'LOG_FILE_NAME_CONVERT ='/ chicago /'，'/ / chicagoFS /'，'/ boston /'，'/ chicagoFS /'FAL_SERVER = chicago LOG_ARCHIVE_CONFIG ='DG_CONFIG =（chicago，chicagoFS，boston）'LOG_ARCHIVE_DEST_1 ='LOCATION = USE_DB_RECOVERY_FILE_DEST VALID_FOR =（ALL_LOGFILES，ALL_ROLES）DB_UNIQUE_NAME = chicagoFS'LOG_ARCHIVE_DEST_2 = 'SERVICE = boston ASYNC VALID_FOR =（STANDBY_LOGFILES，STANDBY_ROLE）DB_UNIQUE_NAME = boston'</pre><p><span class="bold">物理待机波士顿</span></p><pre class="oac_no_warn" dir="ltr">DB_UNIQUE_NAME = boston CONTROL_FILES ='/ arch3 / boston / control01.ctl'DB_FILE_NAME_CONVERT ='/ chicago /'，'/ boston /'LOG_FILE_NAME_CONVERT ='/ chicago /'，'/ boston /'FAL_SERVER ='chicagoFS'，'chicago' LOG_ARCHIVE_CONFIG ='DG_CONFIG =（chicago，chicagoFS，boston）'LOG_ARCHIVE_DEST_1 ='LOCATION = USE_DB_RECOVERY_FILE_DEST VALID_FOR =（ALL_LOGFILES，ALL_ROLES）DB_UNIQUE_NAME = boston'LOG_ARCHIVE_DEST_2 ='SERVICE =芝加哥ASYNC VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）DB_UNIQUE_NAME = chicago'</pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-5CA464E7-40B6-486C-AF95-2F04493EB2DD" name="GUID-5CA464E7-40B6-486C-AF95-2F04493EB2DD"></a><h3 id="SBYDB-GUID-5CA464E7-40B6-486C-AF95-2F04493EB2DD" class="sect3"><span class="enumeration_section">5.2</span>替代目的地</h3>
               <div>
                  <p>执行<a href="creating-oracle-data-guard-far-sync-instance.html#GUID-43FE645C-1383-44F1-9127-7EFB2A402DB3">创建和配置远程同步实例中</a>的步骤后，远程同步实例通过将重做转发到WAN上的远程站点的终端备用数据库，为配置提供零数据丢失功能。要使配置在远程同步实例无法访问的情况下保持受保护，您必须配置备用数据库的备用重做传输路径。这是使用<code class="codeph">LOG_ARCHIVE_DEST_ <span class="codeinlineitalic">n</span></code>参数的<code class="codeph">GROUP</code>和<code class="codeph">PRIORITY</code>属性完成的。（从Oracle Database 12 <span class="italic">c</span>第2版（12.2.0.1）开始， <code class="codeph">GROUP</code>和<code class="codeph">PRIORITY</code>属性已替换远程重做目标的<code class="codeph">ALTERNATE</code>属性。）
                  </p>
                  <p>使用日志归档目标组的概念增加了可能的备用远程目标的数量。日志归档目标组指定多个归档目标，可用于从远程同步实例或通过级联将重做分发到多个目标。然后可以对组中的目标进行优先级排序，以便主数据库上一次只有一个目标处于活动状态。如果活动目标不可用，则其他目标可用于激活。要扩展数据库的可能存档目标数，可以指定多个组。</p>
                  <div class="infoboxnotealso" id="GUID-5CA464E7-40B6-486C-AF95-2F04493EB2DD__GUID-E7AD0647-9BDA-434B-B708-310A467AD87B">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-ALTERNATE-attribute-to-configure-alternate-destinations.html#GUID-7055337B-A852-402F-8B2F-2E119CBE6437" title="从Oracle Database 12c第2版（12.2）开始，为活动目标失败而为远程备用数据库和远程同步实例创建备用日志归档目标的首选方法是使用GROUP和PRIORITY属性。">使用ALTERNATE属性配置远程备用目标，</a>以获取有关使用旧的<code class="codeph">ALTERNATE</code>语法配置备用远程目标的信息。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-DB84EA69-8B64-4230-88AB-E83D5298C009" name="GUID-DB84EA69-8B64-4230-88AB-E83D5298C009"></a><h4 id="SBYDB-GUID-DB84EA69-8B64-4230-88AB-E83D5298C009" class="sect4"><span class="enumeration_section">5.2.1</span>将日志归档目标分配给组</h4>
                  <div>
                     <p>使用<code class="codeph">LOG_ARCHIVE_DEST_ <span class="codeinlineitalic">n</span></code>初始化参数的<code class="codeph">GROUP</code>属性将日志归档目标分配给组。
                     </p>
                     <p>如果使用日志归档目标组，则只要组中至少有一个目标仍然可用，则至少有一个目标保持启用且处于活动状态。未分配给组的日志归档目标的行为与Oracle Database 12 <span class="italic">c</span>第2版（12.2.0.1）之前的日志归档目标的行为相同。
                     </p>
                     <p>一个组中最多可以有30个日志归档目标。日志归档目标组由其组编号引用，该组编号在创建组时分配。组的编号从1到8。日志归档目标组包含一组远程（ <code class="codeph">SERVICE=</code> ...）目标。（日志归档目标组中不支持本地归档（ <code class="codeph">LOCATION=</code> ...）目标，并且必须使用<code class="codeph">ALTERNATE</code>属性作为备用本地归档位置。见<a href="LOG_ARCHIVE_DEST_n-parameter-attributes.html#GUID-88222D10-22FD-4F3B-BBE5-B59C8ABEC725" title="ALTERNATE属性指定在原始目标失败时要使用的备用归档目标。">ALTERNATE</a> 。</p>
                     <p>组中的一个日志归档目标始终处于活动状态，而其他日志归档目标可在活动日志归档目标发生故障时使用。当失败的目标再次变为可用时，如果当前活动目标失败，则它将变为合格，但它不会立即生效，除非所有其他组成员也不可用。例如，以下声明可用于将三个远程同步实例指定为同一组的成员并具有相同的优先级（组中的优先级将在下一节中介绍）。这些是示例参数定义，不包含所有必需的属性。不要逐字使用它们。在此示例中，只有第一个目标处于活动状态，第二个目标可用于在目标1变为不可用时接管。</p><pre class="pre codeblock"><code>LOG_ARCHIVE_DEST_2 ='SERVICE = chicagoFS SYNC VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）GROUP = 1'LOG_ARCHIVE_DEST_STATE_2 = ENABLE LOG_ARCHIVE_DEST_3 ='SERVICE = chicagoFS1 SYNC VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）GROUP = 1'LOG_ARCHIVE_DEST_STATE_3 = ALTERNATE</code></pre><div class="infoboxnote" id="GUID-DB84EA69-8B64-4230-88AB-E83D5298C009__GUID-13E2E8C8-BD3C-4792-BFED-2CCDDBC95555">
                        <p class="notep1">注意：</p>由于日志归档目标组将替换<code class="codeph">LOG_ARCHIVE_DEST_ <span class="codeinlineitalic">n</span></code> <code class="codeph">ALTERNATE</code>属性，因此不允许将<code class="codeph">ALTERNATE</code>属性与不在默认组（其中<code class="codeph">GROUP</code>指定为1到8）中的日志归档目标一起使用。
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-872B6548-DEC9-4BD1-9997-E1A4E3D2B808" name="GUID-872B6548-DEC9-4BD1-9997-E1A4E3D2B808"></a><h4 id="SBYDB-GUID-872B6548-DEC9-4BD1-9997-E1A4E3D2B808" class="sect4"><span class="enumeration_section">5.2.2</span> <span class="bold">为组中的日志归档目标分配优先级</span></h4>
                  <div>
                     <p>使用<code class="codeph">LOG_ARCHIVE_DEST_ <span class="codeinlineitalic">n</span></code>初始化参数的<code class="codeph">PRIORITY</code>属性在日志归档目标组中分配目标首选项，可以控制故障恢复机制，尤其是对于组内的多个成员。
                     </p>
                     <p>在上一节中，两个远程同步实例目标没有优先级，这意味着当在第一个目标发生故障后激活备用目标时，它将保持为活动目标，直到它失败。优先级用于确定在启动数据库或远程同步实例或目标失败时组中哪个日志归档目标处于活动状态。在以下情况下，日志归档目标将变为活动状态：主数据库以读/写模式打开，安装远程同步实例，或者以只读模式挂载或打开备用数据库。可以将相同的优先级值分配给组中的多个日志归档目标。优先级值是1到8范围内的整数。数字越低表示优先级越高。默认优先级为1（最高优先级）。</p>
                     <p>当先前失败的目的地再次可用时，优先级将发挥作用。默认情况下，分配给同一组的一组日志归档目标具有相同的优先级。因此，如果一个目标失败，则会对该集的另一个成员进行故障转移。当失败的目标再次可用时，它不会成为活动目标，因为两个目标具有相同的优先级。如果第二个目标在第一个目标再次可用后失败，则数据库将以相同的优先级故障转移到第一个目标或组中的另一个目标。如果在活动目标失败之前另一个目标始终可用，则此循环可无限重复。</p>
                     <p>继续前面的示例，可以将优先级添加到日志归档目标，以控制目标何时变为活动状态。在以下示例中，添加了第三个远程同步实例，但优先级较低：</p><pre class="pre codeblock"><code>LOG_ARCHIVE_DEST_2 ='SERVICE = chicagoFS SYNC VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）GROUP = 1 PRIORITY = 1'LOG_ARCHIVE_DEST_STATE_2 = ENABLE LOG_ARCHIVE_DEST_3 ='SERVICE = chicagoFS1 SYNC VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）GROUP = 1 PRIORITY = 1'LOG_ARCHIVE_DEST_STATE_3 = ALTERNATE LOG_ARCHIVE_DEST_4 = 'SERVICE = chicagoFS2 ASYNC VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）GROUP = 1 PRIORITY = 2'LOG_ARCHIVE_DEST_STATE_4 = ALTERNATE</code></pre><p>此声明会导致以下行为：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>主要船舶重做到两个首选远程同步实例中的第一个，即<code class="codeph">chicagoFS</code></p>
                        </li>
                        <li>
                           <p>如果<code class="codeph">chicagoFS</code>变得不可用，那么主要运送到<code class="codeph">chicagoFS1</code> 。
                           </p>
                        </li>
                        <li>
                           <p>如果<code class="codeph">chicagoFS</code>再次可用，则不会发生故障恢复。它成为<code class="codeph">chicagoFS1</code>的替代品，因为优先级相同。
                           </p>
                        </li>
                        <li>
                           <p>如果<code class="codeph">chicagoFS</code>和<code class="codeph">chicagoFS1</code>变得不可用，则主要发送到<code class="codeph">chicagoFS2</code> （在这种情况下通过<code class="codeph">ASYNC</code>重做传输模式）。
                           </p>
                        </li>
                        <li>
                           <p>如果在将主数据库发送到<code class="codeph">chicagoFS2</code>时<code class="codeph">chicagoFS</code>或<code class="codeph">chicagoFS1</code>可用，则主数据库将故障回复到该可用的首选日志存档目标。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-3FFF0F6A-2C9D-46BD-860C-F166F8ADF9D6" name="GUID-3FFF0F6A-2C9D-46BD-860C-F166F8ADF9D6"></a><h4 id="SBYDB-GUID-3FFF0F6A-2C9D-46BD-860C-F166F8ADF9D6" class="sect4"><span class="enumeration_section">5.2.3</span> <span class="bold">运送到组中的多个活动目的地</span></h4>
                  <div>
                     <p>您还可以使用<code class="codeph">PRIORITY</code>属性配置组，以便在首选目标失败时将其发送到多个目标。
                     </p>
                     <p>支持单个组内多个活动目标的机制是，定义最低优先级（ <code class="codeph">PRIORITY=8</code> ）以激活该组中该优先级的目标，通常用于将重做直接发送到目标备用数据库。以下日志归档目标声明显示了如何配置它。在此示例中，有一个远程同步实例将重做转发到两个终端备用数据库：</p><pre class="pre codeblock"><code>LOG_ARCHIVE_DEST_2 ='SERVICE = chicagoFS SYNC VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）GROUP = 1 PRIORITY = 1'LOG_ARCHIVE_DEST_STATE_2 = ENABLE LOG_ARCHIVE_DEST_3 ='SERVICE = boston ASYNC VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）GROUP = 1 PRIORITY = 8'LOG_ARCHIVE_DEST_STATE_3 = ALTERNATE LOG_ARCHIVE_DEST_4 = 'SERVICE = newyork ASYNC VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）GROUP = 1 PRIORITY = 8'LOG_ARCHIVE_DEST_STATE_4 = ALTERNATE</code></pre><p>此声明会导致以下行为：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>主要船舶重做到首选的远程同步实例<code class="codeph">chicagoFS</code> 。</p>
                        </li>
                        <li>
                           <p>如果<code class="codeph">chicagoFS</code>不可用，则主要服务器以<code class="codeph">ASYNC</code>模式直接发送到终端备用服务器<code class="codeph">boston</code>和<code class="codeph">newyork</code> 。
                           </p>
                        </li>
                        <li>
                           <p>虽然运到<code class="codeph">boston</code>和<code class="codeph">newyork</code> ，如果<code class="codeph">chicagoFS</code>变为可用，则主站直接运到<code class="codeph">boston</code>和<code class="codeph">newyork</code> ，并开始，而不是运到<code class="codeph">chicagoFS</code> 。</p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-EF90DBDE-E91B-48DA-A346-B264247BE893" name="GUID-EF90DBDE-E91B-48DA-A346-B264247BE893"></a><h4 id="SBYDB-GUID-EF90DBDE-E91B-48DA-A346-B264247BE893" class="sect4"><span class="enumeration_section">5.2.4</span> <span class="bold">使用多个日志归档目标组</span></h4>
                  <div>
                     <p>多个日志归档目标组可用于特定于站点的高可用性注意事项，也可用于通过大型级联（读取器场）配置分发服务。</p>
                     <p>下面的声明建立与多个日志归档的目的地组<code class="codeph">chicagoFS</code>和<code class="codeph">chicagoFS1</code>在组1和<code class="codeph">chicagoFS3</code>和<code class="codeph">chicagoFS4</code>在组2：</p><pre class="pre codeblock"><code>LOG_ARCHIVE_DEST_2 ='SERVICE = chicagoFS SYNC VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）GROUP = 1 PRIORITY = 1'LOG_ARCHIVE_DEST_STATE_2 = ENABLE LOG_ARCHIVE_DEST_3 ='SERVICE = chicagoFS1 SYNC VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）GROUP = 1 PRIORITY = 1'LOG_ARCHIVE_DEST_STATE_3 = ALTERNATE LOG_ARCHIVE_DEST_4 = 'SERVICE = chicagoFS3 SYNC VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）GROUP = 2 PRIORITY = 1'LOG_ARCHIVE_DEST_STATE_4 = ENABLE LOG_ARCHIVE_DEST_5 ='SERVICE = chicagoFS4 SYNC VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）GROUP = 2 PRIORITY = 1'LOG_ARCHIVE_DEST_STATE_5 = ALTERNATE</code></pre></div>
               </div>
               <div class="sect3"><a id="GUID-0603306C-B432-4D55-BC40-E8FC5DBE1A1C" name="GUID-0603306C-B432-4D55-BC40-E8FC5DBE1A1C"></a><h4 id="SBYDB-GUID-0603306C-B432-4D55-BC40-E8FC5DBE1A1C" class="sect4"><span class="enumeration_section">5.2.5</span> <span class="bold">确定日志归档目标的可用性状态</span></h4>
                  <div>
                     <p>Oracle Data Guard通过定期轮询已配置的目标以确定其可用性，跟踪日志归档目标组中可用但不活动的目标的当前状态。</p>
                     <p>用于确定可用性的信息源自<code class="codeph">MAX_FAILURE</code>属性，该属性指定重做传输服务在主数据库放弃目标之前尝试重新建立通信并将重做数据传输到失败目标的连续次数。使用<code class="codeph">GROUP</code>和<code class="codeph">PRIORITY</code>属性时， <code class="codeph">MAX_FAILURE</code>的默认值为1。
                     </p>
                     <p>Oracle Database 12 <span class="italic">c</span>第1版（12.1）和Oracle Database 12 <span class="italic">c</span>第2版（12.2）之间的<code class="codeph">MAX_FAILURE</code>属性的行为不同。了解差异非常重要。
                     </p>
                     <div class="infoboxnotealso" id="GUID-0603306C-B432-4D55-BC40-E8FC5DBE1A1C__GUID-10E70CB9-FE50-4C5B-8B97-2AE34BF485DD">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="LOG_ARCHIVE_DEST_n-parameter-attributes.html#GUID-3655C0B5-E669-4475-95B9-01A67AE6A144" title="MAX_FAILURE属性控制日志交换机的连续次数，重做传输服务尝试重新建立通信，并在主数据库放弃目标之前将重做数据传输到失败的目标。">MAX_FAILURE</a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-A06EDCC8-7AE3-423E-826A-4C1A1B5FA987" name="GUID-A06EDCC8-7AE3-423E-826A-4C1A1B5FA987"></a><h3 id="SBYDB-GUID-A06EDCC8-7AE3-423E-826A-4C1A1B5FA987" class="sect3"><span class="enumeration_section">5.3</span>配置备用目的地</h3>
               <div>
                  <p>可以设置远程同步实例配置以提供不同级别的数据保护。</p>
                  <p>以下主题扩展了上一节中提供的示例，并提供了另外两个远程同步实例配置的示例，这些配置可在您使用远程同步实例时提供更好的数据保护。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="creating-oracle-data-guard-far-sync-instance.html#GUID-AE4BB5CA-D8F3-417F-948D-F41414748E82" title="对于所有远程同步实例配置，重要的是重做继续发送到终端备用数据库以继续提供对主数据库的保护。">远程同步失败后减少保护</a></p>
                     </li>
                     <li>
                        <p><a href="creating-oracle-data-guard-far-sync-instance.html#GUID-32FFD623-EB0B-40B5-9EE2-98D94EDB025C" title="如果首选远程同步实例由于某种原因失败，则配置备用远程同步实例会将配置的保护级别保持在配置的最高可用性保护级别。">远程同步实例高可用性</a></p>
                     </li>
                     <li>
                        <p><a href="creating-oracle-data-guard-far-sync-instance.html#GUID-8A5DA942-04A5-4C35-A072-420EEBF92DCB" title="这些示例描述了在角色更改后如何维护数据保护。">角色更改后维护保护</a></p>
                     </li>
                  </ul>
               </div>
               <div class="sect3"><a id="GUID-AE4BB5CA-D8F3-417F-948D-F41414748E82" name="GUID-AE4BB5CA-D8F3-417F-948D-F41414748E82"></a><h4 id="SBYDB-GUID-AE4BB5CA-D8F3-417F-948D-F41414748E82" class="sect4"><span class="enumeration_section">5.3.1</span> <span class="bold">远程同步失败后的保护减少</span></h4>
                  <div>
                     <p>对于所有远程同步实例配置，重要的是重做继续发送到终端备用数据库以继续提供对主数据库的保护。</p>
                     <p>在最简单的配置中，有一个远程同步实例（ <code class="codeph">chicagoFS</code> ）和一个终端备用数据库（ <code class="codeph">boston</code> ）。
                     </p>
                     <p>如果远程同步实例失败，则应通过向主数据库（ <code class="codeph">chicago</code>添加其他日志归档目标，将重做直接发送到终端备用数据库。这确实降低了保护级别，因为重做传输然后处于<code class="codeph">ASYNC</code>模式而不是<code class="codeph">SYNC</code>模式。
                     </p>
                     <div class="example" id="GUID-AE4BB5CA-D8F3-417F-948D-F41414748E82__GUID-D218622C-B538-4A2F-86D4-C063AC734C02">
                        <p class="titleinexample">示例5-2配置单目标故障转移</p>
                        <p><span class="bold">主要数据库芝加哥</span></p><pre class="pre codeblock"><code>LOG_ARCHIVE_DEST_2 ='SERVICE = chicagoFS SYNC AFFIRM VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）DB_UNIQUE_NAME = chicagoFS GROUP = 1 PRIORITY = 1'LOG_ARCHIVE_DEST_STATE_2 = ENABLE LOG_ARCHIVE_DEST_3 ='SERVICE = boston ASYNC NOAFFIRM VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）DB_UNIQUE_NAME = boston GROUP = 1 PRIORITY = 2'LOG_ARCHIVE_DEST_STATE_3 =替换</code></pre></div>
                     <!-- class="example" -->
                     <p>如果远程同步实例<code class="codeph">chicagoFS</code>失败，则此声明会导致主数据库将重做直接发送到终端备用数据库。如果远程同步实例再次可用，则它将成为活动目标，并且重做传输将转到远程同步实例。
                     </p>
                     <p>如果远程同步实例具有多个终端备用数据库，那么您将使用<code class="codeph">PRIORITY=8</code>来确保所有这些目标在远程同步实例失败时直接从主数据库接收重做。
                     </p>
                     <div class="example" id="GUID-AE4BB5CA-D8F3-417F-948D-F41414748E82__GUID-56DE47E4-27E5-4DE7-9EF7-45CCD9B5573A">
                        <p class="titleinexample">示例5-3配置多个备用数据库重做目标故障转移</p>
                        <p><span class="bold">主要数据库芝加哥</span></p>
                        <p>与前面的示例一样，修改远程同步实例的主数据库上的日志归档目标，以将其添加到优先级为1的组，然后为每个备用数据库添加新的日志归档目标，优先级为8的远程同步实例服务在ASYNC模式下。</p><pre class="pre codeblock"><code>LOG_ARCHIVE_DEST_2 ='SERVICE = chicagoFS SYNC AFFIRM VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）DB_UNIQUE_NAME = chicagoFS GROUP = 1 PRIORITY = 1'LOG_ARCHIVE_DEST_STATE_2 = ENABLE LOG_ARCHIVE_DEST_3 ='SERVICE = boston ASYNC NOAFFIRM VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）DB_UNIQUE_NAME = boston GROUP = 1 PRIORITY = 8'LOG_ARCHIVE_DEST_STATE_3 = ALTERNATE LOG_ARCHIVE_DEST_4 ='SERVICE = newyork ASYNC NOAFFIRM VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）DB_UNIQUE_NAME = newyork GROUP = 1 PRIORITY = 8'LOG_ARCHIVE_DEST_STATE_3 = ALTERNATE</code></pre></div>
                     <!-- class="example" -->
                     <p>如果远程同步实例<code class="codeph">chicagoFS</code>失败，则此声明会导致主数据库将重做直接发送到两个终端备用数据库。如果远程同步实例再次可用，则它将成为活动目标，并且重做传输将转到远程同步实例。
                     </p>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-32FFD623-EB0B-40B5-9EE2-98D94EDB025C" name="GUID-32FFD623-EB0B-40B5-9EE2-98D94EDB025C"></a><h4 id="SBYDB-GUID-32FFD623-EB0B-40B5-9EE2-98D94EDB025C" class="sect4"><span class="enumeration_section">5.3.2</span> <span class="bold">远程同步实例高可用性</span></h4>
                  <div>
                     <p>如果首选远程同步实例由于某种原因失败，则配置备用远程同步实例会将配置的保护级别保持在配置的最高可用性保护级别。</p>
                     <p>在上述两个示例中，配置的保护级别将超出最大可用性，因为重做不再以<code class="codeph">SYNC</code>模式运送。为了更好地防止系统或网络故障，可以配置一个额外的远程同步实例，为活动远程同步实例提供高可用性。在此配置中，一个是首选的活动远程同步实例，另一个是备用远程同步实例。
                     </p>
                     <p>如果主服务器在首选远程同步实例中检测到故障，则主服务器会自动开始发送到备用远程同步实例。在这些类型的配置中，主数据库仅使用一个远程同步实例在任何给定时间重新分配重做。</p>
                     <p>要保持最高可用性保护级别，请在主数据库附近配置两个远程同步实例，并将它们设置为相互保护。然后，如果活动远程同步实例变得不可用，则主数据库可以自动开始以同步模式将重做发送到备用远程同步实例，从而保持最高可用性的提升保护级别。但是在这种情况下，两个远程同步实例具有相同的优先级，当一个远程同步实例接管另一个实例时，它仍然是活动的远程同步实例，直到它失败。为了确保在两个远程同步实例都失败的情况下继续将重做发送到终端备用数据库，终端备用数据库的配置与<code class="codeph">PRIORITY=2</code> 。（如果有多个终端备用数据库，则为它们使用<code class="codeph">PRIORITY=8</code> ）。
                     </p>
                     <p>将使用与<a href="creating-oracle-data-guard-far-sync-instance.html#GUID-43FE645C-1383-44F1-9127-7EFB2A402DB3">创建和配置远程同步实例中</a>给出的步骤相同的步骤创建高可用性<a href="creating-oracle-data-guard-far-sync-instance.html#GUID-43FE645C-1383-44F1-9127-7EFB2A402DB3">远程同步实例</a> ，并将其配置为将重做转发到终端备用波士顿。
                     </p>
                     <div class="example" id="GUID-32FFD623-EB0B-40B5-9EE2-98D94EDB025C__GUID-D2249FF0-7CAF-43E7-BE8F-FA912C19EF86">
                        <p class="titleinexample">示例5-4用于设置高可用性远程同步实例的参数</p>
                        <p><span class="bold">主要数据库芝加哥</span></p><pre class="pre codeblock"><code>LOG_ARCHIVE_CONFIG ='DG_CONFIG =（chicago，chicagoFS，chicagoFS1，boston）'LOG_ARCHIVE_DEST_2 ='SERVICE = chicagoFS SYNC AFFIRM VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）DB_UNIQUE_NAME = chicagoFS GROUP = 1 PRIORITY = 1'LOG_ARCHIVE_DEST_STATE_2 = ENABLE LOG_ARCHIVE_DEST_3 ='SERVICE = chicagoFS1 SYNC AFFIRM VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）DB_UNIQUE_NAME = chicagoFS1 GROUP = 1 PRIORITY = 1'LOG_ARCHIVE_DEST_STATE_3 = ALTERNATE LOG_ARCHIVE_DEST_4 ='SERVICE = boston ASYNC NOAFFIRM VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）DB_UNIQUE_NAME = boston GROUP = 1 PRIORITY = 2'LOG_ARCHIVE_DEST_STATE_4 = ALTERNATE</code></pre></div>
                     <!-- class="example" -->
                     <p>Oracle Data Guard现在可以继续同步将重做发送到远程同步实例，如果远程同步实例失败，则保持最高可用性所需的零数据丢失保护模式。如果两个远程同步实例都失败，则重做以<code class="codeph">ASYNC</code>模式直接发送到<code class="codeph">boston</code> ，保护级别降低。和以前一样，当任何一个失败的远程同步实例再次可用时，Oracle Data Guard会自动重新同步它并返回到原始配置，其中主数据库将重做发送到活动的远程同步实例，然后将该重做转发到终端备用数据库。同步完成后，备用数据库的备用目标（前一示例中的<code class="codeph">LOG_ARCHIVE_DEST_4</code> ）将再次变为休眠状态。
                     </p>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-8A5DA942-04A5-4C35-A072-420EEBF92DCB" name="GUID-8A5DA942-04A5-4C35-A072-420EEBF92DCB"></a><h4 id="SBYDB-GUID-8A5DA942-04A5-4C35-A072-420EEBF92DCB" class="sect4"><span class="enumeration_section">5.3.3</span> <span class="bold">角色转换后维护保护</span></h4>
                  <div>
                     <p>这些示例描述了在角色更改后如何维护数据保护。</p>
                     <p>前面部分中描述的配置可以很好地使配置在最高可用性下运行，直到所有远程同步实例都失败并且重做直接发送到备用数据库。但是，在<code class="codeph">boston</code>成为主要数据库并且<code class="codeph">chicago</code>成为终端待命的角色转换之后，这将是不合适的。远程同步实例<code class="codeph">chicagoFS</code>和<code class="codeph">chicagoFS1</code>对于<code class="codeph">boston</code>来说<code class="codeph">chicagoFS1</code>而不能用作同步目标，因为两个站点之间的网络延迟足够大，会影响提交响应时间。为了保持零数据丢失的最大可用性保护级别，必须建立接近<code class="codeph">boston</code>的第二个远程同步实例配置，以便为将来的角色转换事件做好准备。
                     </p>
                     <p>使用<a href="creating-oracle-data-guard-far-sync-instance.html#GUID-43FE645C-1383-44F1-9127-7EFB2A402DB3">创建和配置远程同步实例中</a>描述的相同过程，在备用数据库<code class="codeph">boston</code>附近创建名为<code class="codeph">bostonFS</code>和<code class="codeph">bostonFS1</code>两个远程同步实例，并将它们配置为在它们处于活动状态时以<code class="codeph">ASYNC</code>模式将重做发送到<code class="codeph">chicago</code> 。然后将它们添加到<code class="codeph">boston</code>这样当<code class="codeph">boston</code>是主要的时候，它会将重做发送到<code class="codeph">SYNC</code>模式中的一个远程同步实例，并具有为<code class="codeph">chicago</code>及其远程同步实例配置的所有故障转移功能。您需要将新的<code class="codeph">boston</code>远程同步实例添加到<code class="codeph">boston</code>和<code class="codeph">chicago</code>的<code class="codeph">LOG_ARCHIVE_CONFIG</code> 。
                     </p>
                     <div class="example" id="GUID-8A5DA942-04A5-4C35-A072-420EEBF92DCB__GUID-A22D5CF9-5680-4634-A9AA-D81B3D7C26C5">
                        <p class="titleinexample">示例5-5角色更改后用于设置保护的参数</p>
                        <p><span class="bold">主数据库波士顿</span></p><pre class="pre codeblock"><code>LOG_ARCHIVE_CONFIG ='DG_CONFIG =（chicago，chicagoFS，chicagoFS1，boston，bostonFS，bostonFS1）'LOG_ARCHIVE_DEST_2 ='SERVICE = bostonFS SYNC AFFIRM VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）DB_UNIQUE_NAME = bostonFS GROUP = 1 PRIORITY = 1'LOG_ARCHIVE_DEST_STATE_2 = ENABLE LOG_ARCHIVE_DEST_3 =' SERVICE = bostonFS1 SYNC AFFIRM VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）DB_UNIQUE_NAME = bostonFS1 GROUP = 1 PRIORITY = 1'LOG_ARCHIVE_DEST_STATE_3 = ALTERNATE LOG_ARCHIVE_DEST_4 ='SERVICE =芝加哥ASYNC NOAFFIRM VALID_FOR =（ONLINE_LOGFILES，PRIMARY_ROLE）DB_UNIQUE_NAME = chicago GROUP = 1 PRIORITY = 2' LOG_ARCHIVE_DEST_STATE_4 = ALTERNATE</code></pre><p><span class="bold">主要数据库芝加哥</span></p><pre class="pre codeblock"><code>LOG_ARCHIVE_CONFIG ='DG_CONFIG =（chicago，chicagoFS，chicagoFS1，boston，bostonFS，bostonFS1）'</code></pre></div>
                     <!-- class="example" -->
                     <p>鉴于这些声明，远程同步实例<code class="codeph">bostonFS</code>从<code class="codeph">boston</code>接收重做并仅在<code class="codeph">boston</code>是主数据库时将其发送到<code class="codeph">chicago</code> 。但是，即使<code class="codeph">boston</code>不是主数据库，Oracle建议保持远程同步实例<code class="codeph">bostonFS</code>和<code class="codeph">bostonFS1</code>准备就绪，以便将来进行角色转换。
                     </p>
                  </div>
               </div>
            </div><a id="SBYDB5443"></a><div class="props_rev_3"><a id="GUID-54F9001B-A5F2-4134-A6BA-521DC7E41E57" name="GUID-54F9001B-A5F2-4134-A6BA-521DC7E41E57"></a><h3 id="SBYDB-GUID-54F9001B-A5F2-4134-A6BA-521DC7E41E57" class="sect3"><span class="enumeration_section">5.4</span>远程同步实例支持的保护模式</h3>
               <div>
                  <p>在最高性能或最高可用性模式下支持远程同步实例。</p>
               </div><a id="SBYDB5444"></a><div class="props_rev_3"><a id="GUID-1353E8E6-848C-451A-89EC-42FD178AA256" name="GUID-1353E8E6-848C-451A-89EC-42FD178AA256"></a><h4 id="SBYDB-GUID-1353E8E6-848C-451A-89EC-42FD178AA256" class="sect4"><span class="enumeration_section">5.4.1</span>最高可用性模式配置中的远程同步实例</h4>
                  <div>
                     <p>在最大可用性模式下，远程同步实例相对靠近主数据库以最小化网络延迟，而主要服务使用<code class="codeph">SYNC</code>传输进行远程同步实例。
                     </p>
                     <div class="infoboxnote" id="GUID-1353E8E6-848C-451A-89EC-42FD178AA256__GUID-4A75A031-80CD-4959-8A39-CDB7DDC70051">
                        <p class="notep1">注意：</p>
                        <p>在最大可用性模式下，可以将主同步实例和远同步实例分开的距离没有架构限制。实际距离限制取决于给定应用程序对同步配置中网络延迟影响的容忍度。此外，通过使用新的Oracle Data Guard FastSync功能（ <code class="codeph">SYNC/NOAFFIRM</code> ），可以降低任何给定距离的性能影响。请参阅<span class="q">“ <a href="oracle-data-guard-protection-modes.html#GUID-7EF6EFEE-7E31-4F80-9C97-1B25DAA025F8__BABBFEGF">最高可用性模式下的性能与保护</a> ”</span> 。
                        </p>
                     </div>
                     <p>在远程同步实例的主服务器上建立的<code class="codeph">LOG_ARCHIVE_DEST_</code> <span class="italic"><code class="codeph">n</code></span>上支持<code class="codeph">SYNC/AFFIRM</code>和<code class="codeph">SYNC/NOAFFIRM</code>语义。有关使用每个<a href="oracle-data-guard-protection-modes.html#GUID-7EF6EFEE-7E31-4F80-9C97-1B25DAA025F8" title="Oracle Data Guard provides three protection modes: maximum availability, maximum performance, and maximum protection.">模式</a>的权衡信息，请参阅<a href="oracle-data-guard-protection-modes.html#GUID-7EF6EFEE-7E31-4F80-9C97-1B25DAA025F8" title="Oracle Data Guard提供三种保护模式：最大可用性，最高性能和最大保护。">Oracle Data Guard保护模式</a> 。
                     </p>
                     <p>当主服务器使用<code class="codeph">SYNC</code>传输服务远程同步实例时，所有提交的重做都驻留在远程同步实例的磁盘上。这允许远程同步实例使用其中一个终端备用目标，以便在主数据库丢失时进行无数据丢失故障转移。
                     </p>
                     <p>远程同步实例使用<code class="codeph">ASYNC</code>传输将传入的重做传送到可能更远的终端备用数据库。这样就不会将数据丢失保护扩展到远离主数据库的目的地，以便直接使用<code class="codeph">SYNC</code>传输进行服务，因为会导致事务吞吐量降低。即使配置中只有一个备用目标，远程同步实例也是有益的。
                     </p>
                  </div>
               </div><a id="SBYDB5445"></a><div class="props_rev_3"><a id="GUID-5FB20778-2EB5-4E96-B47E-53D67F9A4536" name="GUID-5FB20778-2EB5-4E96-B47E-53D67F9A4536"></a><h4 id="SBYDB-GUID-5FB20778-2EB5-4E96-B47E-53D67F9A4536" class="sect4"><span class="enumeration_section">5.4.2</span>最高性能模式配置中的远程同步实例</h4>
                  <div>
                     <p>在最高性能模式下，主数据库使用<code class="codeph">ASYNC</code>重做传输为远程同步实例目标服务。
                     </p>
                     <p>无论主数据实例与远程同步实例之间的物理距离如何都是如此，因为当使用<code class="codeph">ASYNC</code>传输服务目标时，高网络延迟不会影响事务吞吐量。
                     </p>
                     <p>在最高性能模式下，远程同步实例可以使管理多个远程目标的Oracle Data Guard配置受益。虽然每个<code class="codeph">ASYNC</code>目标对主数据库性能的影响几乎为零，但如果有许多远程目标（例如，多个Oracle Active Data Guard备用数据库构成一个读取器服务器场），则效果可以变得可测量。使用远程同步实例时，添加到配置的每个远程目标的增量效果为零。此外，重做传输压缩也可以卸载到远程同步实例。当使用远程同步实例时，主要仅需要为远程同步实例提供服务，然后远程同步实例为其余配置提供服务;目的地越多，性能效益越大。
                     </p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
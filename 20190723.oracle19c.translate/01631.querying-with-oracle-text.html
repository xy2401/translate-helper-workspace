<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Become familiar with Oracle Text querying and associated features."></meta>
      <meta name="description" content="Become familiar with Oracle Text querying and associated features."></meta>
      <title>查询Oracle Text</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Application Developer&#39;s Guide "></meta>
      <meta property="og:description" content="Become familiar with Oracle Text querying and associated features."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Application Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="text-application-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-07T01:45:16-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96275-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="maintaining-oracle-text-indexes.html" title="Previous" type="text/html"></link>
      <link rel="next" href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Text Application Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="CCAPP"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="maintaining-oracle-text-indexes.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">应用程序开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">查询Oracle Text</li>
            </ol>
            <a id="GUID-7310390A-4E76-45D3-99E8-070692043E6B" name="GUID-7310390A-4E76-45D3-99E8-070692043E6B"></a><a id="CCAPP0400"></a>
            
            <h2 id="CCAPP-GUID-7310390A-4E76-45D3-99E8-070692043E6B" class="sect2"><span class="enumeration_chapter">6</span>使用Oracle Text查询</h2>
         </header>
         <div class="ind">
            <div>
               <p>熟悉Oracle Text查询和相关功能。</p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="querying-with-oracle-text.html#GUID-3EAE4D7D-C73B-4E19-BBF2-5EBE05C21D9C">查询概述</a></p>
                  </li>
                  <li>
                     <p><a href="querying-with-oracle-text.html#GUID-D0633C95-0A90-47B8-8A7B-B134C0226B93" title="Oracle Text具有各种查询功能。您可以在查询应用程序中使用这些查询功能。">Oracle Text Query功能</a></p>
                  </li>
               </ul>
            </div><a id="CCAPP9135"></a><div class="props_rev_3"><a id="GUID-3EAE4D7D-C73B-4E19-BBF2-5EBE05C21D9C" name="GUID-3EAE4D7D-C73B-4E19-BBF2-5EBE05C21D9C"></a><h3 id="CCAPP-GUID-3EAE4D7D-C73B-4E19-BBF2-5EBE05C21D9C" class="sect3"><span class="enumeration_section">6.1</span>查询概述</h3>
               <div>
                  <p>基本的Oracle Text查询将查询表达式（通常是带或不带运算符的单词）作为输入。Oracle Text返回满足表达式的所有文档（先前已编入索引）以及每个文档的相关性分数。您可以使用分数来对结果集中的文档进行排序。</p>
                  <p>要输入Oracle Text查询，请使用SQL <code class="codeph">SELECT</code>语句。根据索引的类型，您可以在<code class="codeph">WHERE</code>子句中使用<code class="codeph">CONTAINS</code>或<code class="codeph">CATSEARCH</code>运算符。只要可以使用<code class="codeph">SELECT</code>语句，就可以以编程方式使用这些运算符，例如在PL / SQL游标中。
                  </p>
                  <p>使用<code class="codeph">MATCHES</code>运算符使用<code class="codeph">CTXRULE</code>索引对文档进行分类。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-13F9B749-125B-40FD-9AFD-A636597447D0">查询CONTAINS</a></p>
                     </li>
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-9A182607-C033-4B4A-8177-5E5C0DE2D520">使用CATSEARCH查询</a></p>
                     </li>
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-E330ED1C-CEEF-4433-B0A2-7ACB39763053">用MATCHES查询</a></p>
                     </li>
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-F0106274-B719-4F65-BB62-65D52E6BDFA2">单词和短语查询</a></p>
                     </li>
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-D8D4E361-E226-40AF-A539-F3C991D90CC4">查询停用词</a></p>
                     </li>
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-E3ED0880-E919-43BE-BC10-1837D76F0E8F">关于查询和主题</a></p>
                     </li>
                  </ul>
               </div><a id="CCAPP9136"></a><div class="props_rev_3"><a id="GUID-13F9B749-125B-40FD-9AFD-A636597447D0" name="GUID-13F9B749-125B-40FD-9AFD-A636597447D0"></a><h4 id="CCAPP-GUID-13F9B749-125B-40FD-9AFD-A636597447D0" class="sect4"><span class="enumeration_section">6.1.1</span>使用CONTAINS查询</h4>
                  <div>
                     <p>创建<code class="codeph">CONTEXT</code>类型的索引时，必须使用<code class="codeph">CONTAINS</code>运算符输入查询。该索引适用于索引大型连贯文档的集合。
                     </p>
                     <p>使用<code class="codeph">CONTAINS</code>运算符，您可以使用许多运算符来定义搜索条件。这些运算符使您可以输入逻辑，邻近，模糊，词干，词库和通配符搜索。使用正确配置的索引，您还可以在具有内部结构（如HTML和XML）的文档上输入节搜索。</p>
                     <p>使用<code class="codeph">CONTAINS,</code>您还可以使用<code class="codeph">ABOUT</code>运算符搜索文档主题。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-5BE34ED3-4B35-412A-BD53-E3F663B9EB8C">包含SQL示例</a></p>
                        </li>
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-9B0E2AF2-9E20-41D2-86AB-D97B0639F16E">包含PL / SQL示例</a></p>
                        </li>
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-80D2E2D8-8B8A-4D0D-815C-CCAF976DFDBF">使用CONTAINS进行结构化查询</a></p>
                        </li>
                     </ul>
                  </div><a id="CCAPP9137"></a><div class="props_rev_3"><a id="GUID-5BE34ED3-4B35-412A-BD53-E3F663B9EB8C" name="GUID-5BE34ED3-4B35-412A-BD53-E3F663B9EB8C"></a><h5 id="CCAPP-GUID-5BE34ED3-4B35-412A-BD53-E3F663B9EB8C" class="sect5"><span class="enumeration_section">6.1.1.1包含</span> SQL示例</h5>
                     <div>
                        <p>在<code class="codeph">SELECT</code>语句中，使用<code class="codeph">CONTAINS</code>运算符在<code class="codeph">WHERE</code>子句中指定查询。同时指定<code class="codeph">SCORE</code>运算符以返回命中列表中每个命中的分数。以下示例显示了如何输入查询：</p><pre class="oac_no_warn" dir="ltr">SELECT SCORE（1），标题来自新闻WHERE CONTAINS（text，'oracle'，1）&gt; 0;</pre><p>您可以使用<code class="codeph">ORDER</code> <code class="codeph">BY</code>子句将最高得分文档的结果排序到最低得分文档，如下所示：</p><pre class="oac_no_warn" dir="ltr">SELECT SCORE（1），新闻标题WHERE CONTAINS（text，'oracle'，1）&gt; 0 ORDER BY SCORE（1）DESC;</pre><p><code class="codeph">CONTAINS</code>运算符必须始终后跟&gt; 0语法，该语法指定<code class="codeph">CONTAINS</code>运算符返回的分数值必须大于零才能返回行。
                        </p>
                        <p>在<code class="codeph">SELECT</code>语句中调用<code class="codeph">SCORE</code>运算符时， <code class="codeph">CONTAINS</code>运算符必须引用第三个参数中的分数标签值，如上例所示。
                        </p>
                     </div>
                  </div><a id="CCAPP9138"></a><div class="props_rev_3"><a id="GUID-9B0E2AF2-9E20-41D2-86AB-D97B0639F16E" name="GUID-9B0E2AF2-9E20-41D2-86AB-D97B0639F16E"></a><h5 id="CCAPP-GUID-9B0E2AF2-9E20-41D2-86AB-D97B0639F16E" class="sect5"><span class="enumeration_section">6.1.1.2包含</span> PL / SQL示例</h5>
                     <div>
                        <p>在PL / SQL应用程序中，您可以使用游标来获取查询结果。</p>
                        <p>以下示例针对<code class="codeph">NEWS</code>表输入<code class="codeph">CONTAINS</code>查询，以查找包含单词<span class="italic">oracle的</span>所有文章<span class="italic">。</span> 输出前十个命中的标题和分数。
                        </p><pre class="oac_no_warn" dir="ltr">声明rowno数：= 0;开始于c1 in（SELECT SCORE（1）得分，标题FROM news WHERE CONTAINS（text，'oracle'，1）&gt; 0 ORDER BY SCORE（1）DESC）loop rowno：= rowno + 1; dbms_output.put_line（c1.title ||'：'|| c1.score）;当rowno = 10时退出;结束循环;结束;</pre><p>此示例使用游标<code class="codeph">FOR</code>循环来检索前十个匹配。为<code class="codeph">SCORE</code>运算符的返回值声明别名<span class="italic">分数</span> 。使用光标点表示法将分数和标题显示为输出。
                        </p>
                     </div>
                  </div><a id="CCAPP9139"></a><div class="props_rev_3"><a id="GUID-80D2E2D8-8B8A-4D0D-815C-CCAF976DFDBF" name="GUID-80D2E2D8-8B8A-4D0D-815C-CCAF976DFDBF"></a><h5 id="CCAPP-GUID-80D2E2D8-8B8A-4D0D-815C-CCAF976DFDBF" class="sect5"><span class="enumeration_section">6.1.1.3</span>使用CONTAINS的结构化查询示例</h5>
                     <div>
                        <p>结构化查询（也称为混合查询）是一种查询，其具有一个用于查询文本列的<code class="codeph">CONTAINS</code>谓词和另一个用于查询结构化数据列的谓词。
                        </p>
                        <p>要输入结构化查询，请在<code class="codeph">SELECT</code>语句的<code class="codeph">WHERE</code>条件中指定结构化子句。
                        </p>
                        <p>例如，以下<code class="codeph">SELECT</code>语句将返回包含在1997年10月1日或之后写入的单词<span class="italic">oracle的</span>所有文章：</p><pre class="oac_no_warn" dir="ltr">SELECT SCORE（1），title，issue_date from news WHERE CONTAINS（text，'oracle'，1）&gt; 0 AND issue_date&gt; =（'01 -OCT-97'）ORDER BY SCORE（1）DESC;</pre><div class="infoboxnote" id="GUID-80D2E2D8-8B8A-4D0D-815C-CCAF976DFDBF__GUID-8CF4D5B5-D07E-4C3C-8ECC-B9A984D16644">
                           <p class="notep1">注意：</p>
                           <p>虽然您可以使用<code class="codeph">CONTAINS,</code>输入结构化查询<code class="codeph">CONTAINS,</code>考虑创建<code class="codeph">CTXCAT</code>索引并使用<code class="codeph">CATSEARCH,</code>发出查询<code class="codeph">CATSEARCH,</code>从而提供更好的结构化查询性能。
                           </p>
                        </div>
                     </div>
                  </div>
               </div><a id="CCAPP9140"></a><div class="props_rev_3"><a id="GUID-9A182607-C033-4B4A-8177-5E5C0DE2D520" name="GUID-9A182607-C033-4B4A-8177-5E5C0DE2D520"></a><h4 id="CCAPP-GUID-9A182607-C033-4B4A-8177-5E5C0DE2D520" class="sect4"><span class="enumeration_section">6.1.2</span>使用CATSEARCH查询</h4>
                  <div>
                     <p>创建<code class="codeph">CTXCAT</code>类型的索引时，必须使用<code class="codeph">CATSEARCH</code>运算符输入查询。当您的应用程序在文本列中存储短文本片段以及在相关列中存储关联信息时，此索引适用。
                     </p>
                     <p>例如，服务于在线拍卖站点的应用程序包括在文本列中存储项目描述的表格以及在其他列中存储日期和价格信息的表格。使用<code class="codeph">CTXCAT</code>索引，您可以在一列或多列上创建b-tree索引，以便混合查询的查询性能通常更快。
                     </p>
                     <p>可用于<code class="codeph">CATSEARCH</code>查询的运算符仅限于<code class="codeph">AND</code>或<code class="codeph">OR.</code>等逻辑运算<code class="codeph">OR.</code>要定义结构化条件，请使用以下运算符：大于，小于，等于， <code class="codeph">BETWEEN,</code>和<code class="codeph">IN.</code></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-FB8EACA2-4FA4-4DD9-8796-3F2E4C1A3DBA">CATSEARCH SQL查询</a></p>
                        </li>
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-C9691A05-609A-47BC-99D4-7238E1304D61">CATSEARCH示例</a></p>
                        </li>
                     </ul>
                  </div><a id="CCAPP9141"></a><div class="props_rev_3"><a id="GUID-FB8EACA2-4FA4-4DD9-8796-3F2E4C1A3DBA" name="GUID-FB8EACA2-4FA4-4DD9-8796-3F2E4C1A3DBA"></a><h5 id="CCAPP-GUID-FB8EACA2-4FA4-4DD9-8796-3F2E4C1A3DBA" class="sect5"><span class="enumeration_section">6.1.2.1</span> CATSEARCH SQL查询示例</h5>
                     <div>
                        <p>使用<code class="codeph">CATSEARCH</code>的典型查询包括以下结构化子句，以查找包含按<code class="codeph">bid_close</code>日期排序的单词<span class="italic">camera的</span>所有行：</p><pre class="oac_no_warn" dir="ltr">从拍卖中选择WHERE CATSEARCH（标题，'相机'，'按bid_close desc排序'）&gt; 0;</pre><p>您可以输入的结构化查询类型取决于您创建子索引的方式。</p>
                        <div class="infoboxnotealso" id="GUID-FB8EACA2-4FA4-4DD9-8796-3F2E4C1A3DBA__GUID-E46E5210-C8BB-4997-8930-D6A79C5DE474">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="creating-oracle-text-indexes.html#GUID-210F00C9-8866-466F-909F-71C672CF469B">创建CTXCAT索引</a> ”</span></p>
                        </div>
                        <p>如上例所示，您使用第三个<code class="codeph">structured_query</code>参数指定<code class="codeph">CATSEARCH</code>查询的<code class="codeph">structured_query</code>化部分。结构化表达式中的列必须具有相应的子索引。
                        </p>
                        <p>例如，假设<code class="codeph">category_id</code>和<code class="codeph">bid_close</code>在<code class="codeph">AUCTION</code>表的<code class="codeph">ctxcat</code>索引中有<code class="codeph">ctxcat</code>索引，请输入以下结构化查询：</p><pre class="oac_no_warn" dir="ltr">从拍卖中选择WHERE CATSEARCH（标题，'相机'，'category_id = 99 by bid_close desc'）&gt; 0;</pre></div>
                  </div><a id="CCAPP9142"></a><div class="props_rev_3"><a id="GUID-C9691A05-609A-47BC-99D4-7238E1304D61" name="GUID-C9691A05-609A-47BC-99D4-7238E1304D61"></a><h5 id="CCAPP-GUID-C9691A05-609A-47BC-99D4-7238E1304D61" class="sect5"><span class="enumeration_section">6.1.2.2</span> CATSEARCH示例</h5>
                     <div>
                        <p>以下示例显示针对<code class="codeph">CTXCAT</code>索引的字段部分搜索。它通过<code class="codeph">CATSEARCH</code>查询中的查询模板使用<code class="codeph">CONTEXT</code>语法。
                        </p><pre class="oac_no_warn" dir="ltr">- 创建并填充表创建表BOOKS（ID号，INFO varchar2（200），PUBDATE DATE）;插入BOOKS值（1，'&lt;作者&gt; NOAM CHOMSKY &lt;/ author&gt; &lt;subject&gt; CIVIL RIGHTS &lt;/ subject&gt; &lt;语言&gt; ENGLISH &lt;/ language&gt; &lt;publisher&gt; MIT PRESS &lt;/ publisher&gt;'，' -  1  -  NO- 2003' ）;插入BOOKS值（2，'&lt;author&gt; NICANOR PARRA &lt;/ author&gt; &lt;subject&gt; POEMS AND ANTIPOEMS &lt;/ subject&gt; &lt;language&gt; SPANISH &lt;/ language&gt; &lt;publisher&gt; VASQUEZ &lt;/ publisher&gt;'，'01 -JAN- 2001' ）;插入BOOKS值（1，'&lt;author&gt; LUC SANTE &lt;/ author&gt; &lt;subject&gt; XML DATABASE &lt;/ subject&gt; &lt;language&gt; FRENCH &lt;/ language&gt; &lt;publisher&gt; FREE PRESS &lt;/ publisher&gt;'，'15 -MAY- 2002' ）;承诺;</pre><pre class="oac_no_warn" dir="ltr">- 创建索引集和节组exec ctx_ddl.create_index_set（'BOOK_INDEX_SET'）; exec ctx_ddl.add_index（'BOOK_INDEX_SET'，'PUBDATE'）; exec ctx_ddl.create_section_group（'BOOK_SECTION_GROUP'，'BASIC_SECTION_GROUP'）; exec ctx_ddl.add_field_section（'BOOK_SECTION_GROUP'，'AUTHOR'，'AUTHOR'）; exec ctx_ddl.add_field_section（'BOOK_SECTION_GROUP'，'SUBJECT'，'SUBJECT'）; exec ctx_ddl.add_field_section（'BOOK_SECTION_GROUP'，'LANGUAGE'，'LANGUAGE'）; exec ctx_ddl.add_field_section（'BOOK_SECTION_GROUP'，'PUBLISHER'，'PUBLISHER'）; - 创建索引创建索引books_index on books（info）indextype是ctxsys.ctxcat参数（'index set book_index_set section group book_section_group'）; - 使用索引 - 请注意：即使可以使用字段部分创建CTXCAT索引，也不能使用CTXCAT语法（CATSEARCH的默认值）访问它。- 我们需要使用带有CONTEXT语法的查询模板来访问字段 - 具有CATSEARCH选择id的部分，来自书籍的信息，其中catsearch（信息，'&lt;query&gt; &lt;textquery语法=“上下文”&gt;作者中的NOAM和语言中的英语&lt; / textquery&gt; &lt;/ query&gt;'，'按pubdate排序'）&gt; 0;</pre></div>
                  </div>
               </div><a id="CCAPP9143"></a><div class="props_rev_3"><a id="GUID-E330ED1C-CEEF-4433-B0A2-7ACB39763053" name="GUID-E330ED1C-CEEF-4433-B0A2-7ACB39763053"></a><h4 id="CCAPP-GUID-E330ED1C-CEEF-4433-B0A2-7ACB39763053" class="sect4"><span class="enumeration_section">6.1.3</span>使用MATCHES查询</h4>
                  <div>
                     <p>创建<code class="codeph">CTXRULE,</code>类型的索引时<code class="codeph">CTXRULE,</code>必须使用<code class="codeph">MATCHES</code>运算符对文档进行分类。<code class="codeph">CTXRULE</code>索引本质上是定义分类的查询集的索引。
                     </p>
                     <p>例如，如果您有需要根据内容路由的传入文档流，则可以创建一组定义类别的查询。您可以在文本列中将查询创建为行。您可以使用<code class="codeph">CTX_CLS.TRAIN</code>过程创建此类型的表。
                     </p>
                     <p>然后，您可以索引表以创建<code class="codeph">CTXRULE</code>索引。当文档到达时，您使用<code class="codeph">MATCHES</code>运算符对每个文档进行分类</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-13DDFE35-13E6-4885-B175-EA4A7207A540">匹配SQL查询</a></p>
                        </li>
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-E94DF92E-E089-4916-8CB3-551494A0CCCD">MATCHES PL / SQL示例</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-E330ED1C-CEEF-4433-B0A2-7ACB39763053__GUID-90CD6D95-2FE1-486E-B075-C8943807A8BF">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="classifying-documents-in-oracle-text.html#GUID-D694A98B-3B18-48B2-B10E-FB884B436FAF" title="Oracle Text提供了各种文档分类方法。">在Oracle Text中对文档进行分类</a></p>
                     </div>
                  </div><a id="CCAPP9144"></a><div class="props_rev_3"><a id="GUID-13DDFE35-13E6-4885-B175-EA4A7207A540" name="GUID-13DDFE35-13E6-4885-B175-EA4A7207A540"></a><h5 id="CCAPP-GUID-13DDFE35-13E6-4885-B175-EA4A7207A540" class="sect5"><span class="enumeration_section">6.1.3.1</span>匹配SQL查询</h5>
                     <div>
                        <p><code class="codeph">MATCHES</code>查询查找查询表中与给定文档匹配的所有行。假设可<code class="codeph">querytable</code>表与<code class="codeph">CTXRULE</code>索引相关联，请输入以下查询：</p><pre class="oac_no_warn" dir="ltr">SELECT分类FROM querytable WHERE MATCHES（query_string，：doc_text）&gt; 0;</pre><p><code class="codeph">:doc_text</code>绑定变量包含要分类的<code class="codeph">CLOB</code>文档。
                        </p>
                        <p>这是一个简单的例子：</p><pre class="oac_no_warn" dir="ltr">创建表查询（query_id number，query_string varchar2（80））;插入查询值（1，'oracle'）;插入查询值（2，'larry或ellison'）;插入查询值（3，'oracle和text'）;插入查询值（4，'市场份额'）;在查询上创建索引queryx（query_string）indextype是ctxsys.ctxrule;从匹配的查询中选择query_id（query_string，'Oracle宣布其在数据库中的市场份额比去年增加。'）&gt; 0</pre><p>此查询返回查询1（单词<span class="italic">oracle</span>出现在文档中）和4（短语<span class="italic">市场份额</span>出现在文档中），但不是2（单词<span class="italic">larry</span>和单词<span class="italic">ellison</span>都没有出现，而不是3（没有文本）文档，因此它与查询不匹配）。
                        </p>
                        <p>在此示例中，为简单起见，文档作为字符串传递。您的文档通常在绑定变量中传递。</p>
                        <p><code class="codeph">MATCHES</code>查询中使用的文档文本可以是<code class="codeph">VARCHAR2</code>或<code class="codeph">CLOB.</code>它不接受<code class="codeph">BLOB</code>输入，因此您无法直接匹配过滤的文档。相反，您必须使用<code class="codeph">AUTO_FILTER.</code>将二进制内容过滤到<code class="codeph">CLOB</code> <code class="codeph">AUTO_FILTER.</code>以下示例进行了两个假设：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>文档数据位于<code class="codeph">:doc_blob</code>绑定变量中。
                              </p>
                           </li>
                           <li>
                              <p>您已经定义<code class="codeph">my_policy</code>是<code class="codeph">CTX_DOC.POLICY_FILTER</code>可以使用。
                              </p>
                           </li>
                        </ul>
                        <p>例如：</p><pre class="oac_no_warn" dir="ltr">声明doc_text clob; begin  - 创建一个临时CLOB来保存文档文本doc_text：= dbms_lob.createtemporary（doc_text，TRUE，DBMS_LOB.SESSION）; - 为此示例创建一个简单的策略ctx_ddl.create_preference（preference_name =&gt;'fast_filter'，object_name =&gt;'AUTO_FILTER'）; ctx_ddl.set_attribute（preference_name =&gt;'fast_filter'，attribute_name =&gt;'OUTPUT_FORMATTING'，attribute_value =&gt;'FALSE'）; ctx_ddl.create_policy（policy_name =&gt;'my_policy'，filter =&gt;'fast_filter）; - 调用ctx_doc.policy_filter将BLOB过滤为CLOB数据ctx_doc.policy_filter（'my_policy'，：doc_blob，doc_text，FALSE）; - 现在使用cOB in的CLOB版本进行匹配查询（select * from matches where matches（query_string，doc_text）&gt; 0）loop  - 在这里做你需要做的结束循环; dbms_lob.freetemporary（doc_text）;结束;</pre><p><code class="codeph">CTX_DOC.POLICY_FILTER</code>过程将<code class="codeph">BLOB</code>过滤到<code class="codeph">CLOB</code>数据中，因为您必须将文本放入<code class="codeph">CLOB</code>才能输入<code class="codeph">MATCHES</code>查询。作为一个参数，它使用<code class="codeph">CTX_DDL.CREATE_POLICY</code>创建的策略的名称。</p>
                        <div class="infoboxnotealso" id="GUID-13DDFE35-13E6-4885-B175-EA4A7207A540__GUID-3B600221-BF1E-41C2-A377-511F70DB2097">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">CTX_DOC.POLICY_FILTER</code>信息，请<code class="codeph">CTX_DOC.POLICY_FILTER</code> <a href="../ccref/CTX_DOC-package.html#CCREF0700" target="_blank"><span class="italic">Oracle Text Reference</span></a></p>
                        </div>
                        <p>如果文件是数据库字符集中的文本，则可以使用<code class="codeph">DBMS_LOB.LOADFROMFILE</code>函数创建<code class="codeph">BFILE</code>并将其加载到<code class="codeph">CLOB</code> ，也可以使用<code class="codeph">UTL_FILE</code>将文件读入临时<code class="codeph">CLOB</code>定位器。
                        </p>
                        <p>如果您的文件需要<code class="codeph">AUTO_FILTER</code>过滤，则可以将文件加载到<code class="codeph">BLOB</code> ，然后调用<code class="codeph">CTX_DOC.POLICY_FILTER</code> ，如前所示。
                        </p>
                        <div class="infoboxnotealso" id="GUID-13DDFE35-13E6-4885-B175-EA4A7207A540__GUID-E323501E-3264-4C39-AEF5-B0D8A64A1DB2">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="classifying-documents-in-oracle-text.html#GUID-D694A98B-3B18-48B2-B10E-FB884B436FAF" title="Oracle Text offers various approaches to document classification.">在Oracle Text中</a>对<a href="classifying-documents-in-oracle-text.html#GUID-D694A98B-3B18-48B2-B10E-FB884B436FAF" title="Oracle Text提供了各种文档分类方法。">文档进行</a>分类以获得更多扩展分类示例</p>
                        </div>
                     </div>
                  </div><a id="CCAPP9145"></a><div class="props_rev_3"><a id="GUID-E94DF92E-E089-4916-8CB3-551494A0CCCD" name="GUID-E94DF92E-E089-4916-8CB3-551494A0CCCD"></a><h5 id="CCAPP-GUID-E94DF92E-E089-4916-8CB3-551494A0CCCD" class="sect5"><span class="enumeration_section">6.1.3.2</span> MATCHES PL / SQL示例</h5>
                     <div>
                        <p>以下示例假定查询的<code class="codeph">profiles</code>表与<code class="codeph">CTXRULE</code>索引相关联。它还假设<code class="codeph">newsfeed</code>表包含一组要分类的新闻文章。
                        </p>
                        <p>此示例循环遍历<code class="codeph">newsfeed</code>表，使用<code class="codeph">MATCHES</code>运算符对每篇文章进行分类。结果存储在<code class="codeph">results</code>表中。
                        </p><pre class="oac_no_warn" dir="ltr">PROMPT根据新闻源文章PROMPT set serveroutput on填充类别表;声明mypk号码; mytitle varchar2（1000）; myarticles clob; mycategory varchar2（100）;光标doccur是选择pk，title，来自newsfeed的文章; cursor mycur是匹配的配置文件中选择的类别（rule，myarticles）&gt; 0;光标重新选择类别，pk，标题从结果中按类别排序，pk; begin dbms_output.enable（1000000）;开放的证据;循环获取doccur到mypk，mytitle，myarticles; doccur％notfound时退出;打开mycur;循环获取mycur到mycategory; mycur％notfound时退出;插入结果值（mycategory，mypk，mytitle）;结束循环;关闭mycur;承诺;结束循环;关闭doccur;承诺;结束;</pre><p>以下示例按类别显示分类的文章。</p><pre class="oac_no_warn" dir="ltr">PROMPT显示每个类别PROMPT set serveroutput on的文章列表;声明mypk号码; mytitle varchar2（1000）; mycategory varchar2（100）; cursor catcur是从类别中按类别选择类别; cursor rescur是select pk，title from results by category = mycategory order by pk; begin dbms_output.enable（1000000）;开放的; loop fetch catcur into mycategory;当catcur％notfound时退出; dbms_output.put_line（'********** CATEGORY：'|| mycategory ||'*************'）;开放的;循环获取重新进入mypk，mytitle;当rescur％notfound时退出; dbms_output.put_line（'**（'|| mypk ||'）。'|| mytitle）;结束循环;关闭; DBMS_OUTPUT.PUT_LINE（ '**'）; DBMS_OUTPUT.PUT_LINE（'********* **********'）;结束循环;密切关注结束;</pre><div class="infoboxnotealso" id="GUID-E94DF92E-E089-4916-8CB3-551494A0CCCD__GUID-1A429F59-A4C5-4BE2-A68A-2E7F01786480">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="classifying-documents-in-oracle-text.html#GUID-D694A98B-3B18-48B2-B10E-FB884B436FAF" title="Oracle Text offers various approaches to document classification.">在Oracle Text中</a>对<a href="classifying-documents-in-oracle-text.html#GUID-D694A98B-3B18-48B2-B10E-FB884B436FAF" title="Oracle Text提供了各种文档分类方法。">文档进行</a>分类以获得更多扩展分类示例</p>
                        </div>
                     </div>
                  </div>
               </div><a id="CCAPP9146"></a><div class="props_rev_3"><a id="GUID-F0106274-B719-4F65-BB62-65D52E6BDFA2" name="GUID-F0106274-B719-4F65-BB62-65D52E6BDFA2"></a><h4 id="CCAPP-GUID-F0106274-B719-4F65-BB62-65D52E6BDFA2" class="sect4"><span class="enumeration_section">6.1.4</span>单词和短语查询</h4>
                  <div>
                     <p>单词查询是对单词或短语的查询。例如，要查找文本表中包含单词<span class="italic">dog的</span>所有行，请输入一个指定<span class="italic">dog</span>作为查询字词的查询。
                     </p>
                     <p>您可以使用<code class="codeph">CONTAINS</code>和<code class="codeph">CATSEARCH</code> SQL运算符输入单词查询。但是，短语查询的解释方式不同。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>包含<span class="bold">短语查询：</span>如果查询表达式中包含多个单词，仅由空格（无操作符）分隔，则单词字符串将被视为短语。Oracle Text在查询期间搜索整个字符串。例如，要查找包含<span class="italic">国际法</span>一词的所有文档，请使用短语<span class="italic">国际法</span>输入您的查询<span class="italic">。</span></p>
                        </li>
                        <li>
                           <p><span class="bold">CATSEARCH短语查询：</span>使用<code class="codeph">CATSEARCH</code>运算符，可以在短语中的单词之间插入<code class="codeph">AND</code>运算符。例如，诸如国际法的查询被解释为<span class="italic">国际AND法。</span></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="CCAPP9149"></a><div class="props_rev_3"><a id="GUID-D8D4E361-E226-40AF-A539-F3C991D90CC4" name="GUID-D8D4E361-E226-40AF-A539-F3C991D90CC4"></a><h4 id="CCAPP-GUID-D8D4E361-E226-40AF-A539-F3C991D90CC4" class="sect4"><span class="enumeration_section">6.1.5</span>查询停用词</h4>
                  <div>
                     <p>停用词是Oracle Text不会为其创建索引条目的词。它们通常是您的语言中不太可能被搜索的常用词。</p>
                     <p>Oracle Text包含您的语言的默认停用词列表。此列表称为停止列表。例如，在英语中，单词<span class="italic">this</span>和<span class="italic">that</span>在默认停止列表中定义为停用词。您可以使用<code class="codeph">CTX_DDL</code>包修改默认停止列表或创建新的停止列表。您还可以在使用<code class="codeph">ALTER INDEX</code>语句建立索引后添加停用词。
                     </p>
                     <p>您无法查询禁用词本身或仅由停用词组成的短语。例如，在单词查询<span class="italic">其</span>返回时， <span class="italic">这</span>被定义为停用词没有命中。
                     </p>
                     <p>因为Oracle Text索引记录了停用词的位置，即使它没有为它们创建索引条目，您也可以查询包含停用词和可索引词的短语，例如<span class="italic">这个男孩跟那个女孩说话</span> 。
                     </p>
                     <p>当您在查询词组中包含停用词时，停用词会与任何词匹配。例如，以下查询假定<span class="italic">was</span>是一个停用词。它匹配像<span class="italic">杰克</span>这样的短语<span class="italic">很大</span>而<span class="italic">杰克变大了。</span> 它也匹配<span class="italic">增长，</span>即使它不是一个禁用词。
                     </p><pre class="oac_no_warn" dir="ltr">'杰克很大'</pre><p>从Oracle Database 12 <span class="italic">c</span>第2版（12.2）开始，在查询结果的初始阶段，与早期版本不同，查询结果中的停用词和一元运算符将被忽略。例如，以下查询不返回文档，因为<code class="codeph">the</code>是一个停用词，并且在查询处理期间忽略<code class="codeph">$</code>运算符和停用词：</p><pre class="pre codeblock"><code>SQL&gt; select tab（1）from tabx where contains（text，'$ the'）&gt; 0; <span class="italic">。</span> 
<span class="italic">COUNT（1）</span> <span class="italic">----------</span> <span class="italic">0</span></code></pre><p>下一个查询返回包含<code class="codeph">first</code>文档，因为忽略<code class="codeph">the</code> stopword和<code class="codeph">$</code>运算符。
                     </p><pre class="pre codeblock"><code>SQL&gt; select tab（1）from tabx where contains（text，'first and $ the'）&gt; 0; <span class="italic">。</span> 
<span class="italic">COUNT（1）</span> <span class="italic">----------</span> <span class="italic">2</span></code></pre></div>
               </div><a id="CCAPP9685"></a><a id="CCAPP9150"></a><div class="props_rev_3"><a id="GUID-E3ED0880-E919-43BE-BC10-1837D76F0E8F" name="GUID-E3ED0880-E919-43BE-BC10-1837D76F0E8F"></a><h4 id="CCAPP-GUID-E3ED0880-E919-43BE-BC10-1837D76F0E8F" class="sect4"><span class="enumeration_section">6.1.6</span>关于查询和主题</h4>
                  <div>
                     <p><code class="codeph">ABOUT</code>查询是对文档主题的查询。文档主题是在文本中充分发展的概念。例如， <code class="codeph">ABOUT</code> <span class="italic">美国政治</span>的<code class="codeph">ABOUT</code>查询可能会返回包含有关美国总统选举和美国外交政策信息的文件。文件不必包含要返回的<span class="italic">美国政治</span>的确切短语。
                     </p>
                     <p>在索引期间，文档主题源自知识库，知识库是表示世界视图的类别和概念的分层列表。知识目录中的一些主题例子是<span class="italic">爵士音乐，</span> <span class="italic">足球</span>或<span class="italic">纳尔逊曼德拉</span>等具体概念<span class="italic">。</span> 主题也可以是抽象的概念，如<span class="italic">幸福</span>或<span class="italic">诚实。</span></p>
                     <p>在索引期间，系统还可以识别和索引在文档中充分开发但在知识库中不存在的文档主题。</p>
                     <p>您可以扩充知识库，以定义特定于您的行业或查询应用程序的概念和术语。执行此操作时， <code class="codeph">ABOUT</code>查询对于添加的概念更加精确。
                     </p>
                     <p>在索引中创建主题组件时， <code class="codeph">ABOUT</code>查询的效果最佳。主题组件默认为英语和法语创建。
                     </p>
                     <div class="infoboxnotealso" id="GUID-E3ED0880-E919-43BE-BC10-1837D76F0E8F__GUID-F9E819D4-0F60-4579-AED7-72ABEDDDC73D">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../ccref/oracle-text-CONTAINS-query-operators.html#CCREF0301" target="_blank"><span class="italic">Oracle Text Reference</span></a> 
                        </p>
                     </div>
                     <div class="section">
                        <p class="subhead3" id="GUID-E3ED0880-E919-43BE-BC10-1837D76F0E8F__GUID-D03DCF69-4DA8-4F91-84C0-3784F0D3E6BC">查询停止主题</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Oracle Text使您可以使用<code class="codeph">ABOUT</code>运算符查询主题。stoptheme是一个不被索引的主题。您可以使用<code class="codeph">CTX_DDL</code>包添加和删除stopthemes。您可以在使用<code class="codeph">ALTER INDEX</code>语句建立索引后添加stopthemes。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-D0633C95-0A90-47B8-8A7B-B134C0226B93" name="GUID-D0633C95-0A90-47B8-8A7B-B134C0226B93"></a><h3 id="CCAPP-GUID-D0633C95-0A90-47B8-8A7B-B134C0226B93" class="sect3"><span class="enumeration_section">6.2</span> Oracle文本查询功能</h3>
               <div>
                  <p>Oracle Text具有各种查询功能。您可以在查询应用程序中使用这些查询功能。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-97609E8B-1B57-44A0-B89B-93FB018CAD9D">查询表达式</a></p>
                     </li>
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-FE3062A2-A78D-488F-9EBB-87EC6CD7D8E4">区分大小写的搜索</a></p>
                     </li>
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-7D6C35CE-73D2-48DA-82C1-0D508A055F62">查询反馈</a></p>
                     </li>
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-CE8A7113-DC6F-4E21-9605-BEAA62C186C7">查询解释计划</a></p>
                     </li>
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-156424C0-B89B-418B-BE22-1EF13B257FD4">在查询中使用同义词库</a></p>
                     </li>
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-705128B8-E8F0-40B3-A965-E531F87A9783">关于文档部分搜索</a></p>
                     </li>
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-57BA56DA-CDEC-442A-BF2B-CB8BFEA7C001">使用查询模板</a></p>
                     </li>
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-0E8B2943-055A-4B4C-8D9C-B5E1972DFBF3">查询分析</a></p>
                     </li>
                     <li>
                        <p><a href="querying-with-oracle-text.html#GUID-D06D1E5E-C530-47AF-93D5-A178DFD05446">其他查询功能</a></p>
                     </li>
                  </ul>
               </div><a id="CCAPP9152"></a><div class="props_rev_3"><a id="GUID-97609E8B-1B57-44A0-B89B-93FB018CAD9D" name="GUID-97609E8B-1B57-44A0-B89B-93FB018CAD9D"></a><h4 id="CCAPP-GUID-97609E8B-1B57-44A0-B89B-93FB018CAD9D" class="sect4"><span class="enumeration_section">6.2.1</span>查询表达式</h4>
                  <div>
                     <p>查询表达式是<code class="codeph">CONTAINS</code>或<code class="codeph">CATSEARCH</code>运算符的<code class="codeph">text_query</code>参数中单引号之间的所有内容。<code class="codeph">CONTAINS</code>查询中的查询表达式的内容与<code class="codeph">CATSEARCH</code>运算符的内容不同。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-F27F0325-4FF1-4B71-8D93-473F20D7454C">包含运营商</a></p>
                        </li>
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-A79E888C-D100-45BA-B604-BE84C21AA325">CATSEARCH运营商</a></p>
                        </li>
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-10A4DD8B-2FA4-457A-B42A-CF3340295AFB">MATCHES运营商</a></p>
                        </li>
                     </ul>
                  </div><a id="CCAPP9153"></a><div class="props_rev_3"><a id="GUID-F27F0325-4FF1-4B71-8D93-473F20D7454C" name="GUID-F27F0325-4FF1-4B71-8D93-473F20D7454C"></a><h5 id="CCAPP-GUID-F27F0325-4FF1-4B71-8D93-473F20D7454C" class="sect5"><span class="enumeration_section">6.2.1.1包含</span>运营商</h5>
                     <div>
                        <p><code class="codeph">CONTAINS</code>查询表达式可以包含启用逻辑，邻近，全局，模糊和通配符搜索的查询运算符。也可以使用存储的表达式进行查询。在查询表达式中，您可以使用分组字符来更改运算符优先级。本书将这些运算符称为<code class="codeph">CONTEXT</code>语法。
                        </p>
                        <p>使用<code class="codeph">CONTAINS</code> ，您还可以使用<code class="codeph">ABOUT</code>查询来查询文档主题。
                        </p>
                        <div class="infoboxnotealso" id="GUID-F27F0325-4FF1-4B71-8D93-473F20D7454C__GUID-1541E5F7-5ADA-464D-9ED1-F57F79063BF0">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-7070C025-54E1-4FBB-8585-1FCBD525927D">语境语法</a> ”</span></p>
                        </div>
                     </div>
                  </div><a id="CCAPP9154"></a><div class="props_rev_3"><a id="GUID-A79E888C-D100-45BA-B604-BE84C21AA325" name="GUID-A79E888C-D100-45BA-B604-BE84C21AA325"></a><h5 id="CCAPP-GUID-A79E888C-D100-45BA-B604-BE84C21AA325" class="sect5"><span class="enumeration_section">6.2.1.2</span> CATSEARCH运算符</h5>
                     <div>
                        <p>随着<code class="codeph">CATSEARCH</code>运营商，你指定与查询表达式<code class="codeph">text_query</code>参数，并与您的可选结构标准<code class="codeph">structured_query</code>说法。<code class="codeph">text_query</code>参数使您可以查询单词和短语。您可以使用逻辑操作，例如逻辑和，或，而不是。本书将这些运算符称为<code class="codeph">CTXCAT</code>语法。
                        </p>
                        <p>如果要使用<code class="codeph">CONTEXT</code>语法支持的更丰富的运算符集，可以将查询模板功能与<code class="codeph">CATSEARCH.</code>一起<code class="codeph">CATSEARCH.</code></p>
                        <p>使用<code class="codeph">structured_query</code>参数，可以指定结构化条件。您可以使用以下SQL操作：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">=</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">&lt;=</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">&gt; =</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">&gt;</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">&lt;</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">在</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">之间</code></p>
                           </li>
                        </ul>
                        <p>您还可以使用<code class="codeph">ORDER BY</code>子句对输出进行排序。
                        </p>
                        <div class="infoboxnotealso" id="GUID-A79E888C-D100-45BA-B604-BE84C21AA325__GUID-5D0AEAE8-DEAE-4E1E-997E-A374B04B655F">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-6920E017-A76E-4911-A7C3-CFF7A3CF1016">CTXCAT语法</a> ”</span></p>
                        </div>
                     </div>
                  </div><a id="CCAPP9155"></a><div class="props_rev_3"><a id="GUID-10A4DD8B-2FA4-457A-B42A-CF3340295AFB" name="GUID-10A4DD8B-2FA4-457A-B42A-CF3340295AFB"></a><h5 id="CCAPP-GUID-10A4DD8B-2FA4-457A-B42A-CF3340295AFB" class="sect5"><span class="enumeration_section">6.2.1.3</span>匹配运算符</h5>
                     <div>
                        <p>与<code class="codeph">CONTAINS</code>和<code class="codeph">CATSEARCH,</code>不同<code class="codeph">CATSEARCH,</code> <code class="codeph">MATCHES</code>不会将查询表达式作为输入。
                        </p>
                        <p>相反， <code class="codeph">MATCHES</code>运算符将文档作为输入，并查找与其匹配的查询（规则）表中的所有行。因此，您可以使用<code class="codeph">MATCHES</code>根据匹配的规则对文档进行分类。
                        </p>
                        <div class="infoboxnotealso" id="GUID-10A4DD8B-2FA4-457A-B42A-CF3340295AFB__GUID-7AAC1A47-2BCF-4D28-9F9E-917CB15BD96F">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="querying-with-oracle-text.html#GUID-E330ED1C-CEEF-4433-B0A2-7ACB39763053">用MATCHES查询</a> ”</span></p>
                        </div>
                     </div>
                  </div>
               </div><a id="CCAPP9156"></a><div class="props_rev_3"><a id="GUID-FE3062A2-A78D-488F-9EBB-87EC6CD7D8E4" name="GUID-FE3062A2-A78D-488F-9EBB-87EC6CD7D8E4"></a><h4 id="CCAPP-GUID-FE3062A2-A78D-488F-9EBB-87EC6CD7D8E4" class="sect4"><span class="enumeration_section">6.2.2</span>区分大小写的搜索</h4>
                  <div>
                     <p>Oracle Text支持word和<code class="codeph">ABOUT</code>查询的区分大小写。
                     </p>
                     <p>默认情况下，Word查询<span class="italic">不</span>区分大小写。这意味着对术语<span class="italic">dog</span>的查询将返回文本表中包含单词<span class="italic">dog</span>但不包含<span class="italic">Dog</span>或<span class="italic">DOG的行。</span></p>
                     <p>您可以使用<code class="codeph">BASIC_LEXER</code>索引首选项中的<code class="codeph">MIXED_CASE</code>属性启用或禁用区分大小写的搜索。对于区分大小写的索引，必须在确切的情况下输入查询。例如，对<span class="italic">Dog</span>的查询仅匹配带有<span class="italic">Dog的</span>文档<span class="italic">。</span> 带有<span class="italic">狗</span>或<span class="italic">狗的</span>文件不会作为点击返回。
                     </p>
                     <p>要启用不区分大小写的搜索，请将<code class="codeph">BASIC_LEXER</code>索引首选项中的<code class="codeph">MIXED_CASE</code>属性设置为<code class="codeph">NO.</code></p>
                     <div class="infoboxnote" id="GUID-FE3062A2-A78D-488F-9EBB-87EC6CD7D8E4__GUID-20AF14C5-7A13-49B2-BFA7-37CACAFD9D74">
                        <p class="notep1">注意：</p>
                        <p>如果为单词查询启用区分大小写，并且查询包含停用词和可索引单词的短语，则必须为停用词指定正确的大小写。例如，对<span class="italic">狗</span>查询不会返回包含<span class="italic">狗，</span> <span class="italic">假设</span>是一个停用词文本。
                        </p>
                     </div>
                     <p>当查询使用适当的大小写时， <code class="codeph">ABOUT</code>查询会给出最佳结果，因为查询的规范化基于知识目录。知识目录区分大小写。需要注意案例，特别是对于根据情况具有不同含义的词语，例如<span class="italic">土耳其</span>鸟和<span class="italic">土耳其</span>这个国家。
                     </p>
                     <p>但是，您不必在确切的情况下输入查询以从<code class="codeph">ABOUT</code>查询中获取相关结果。系统会尽力解释您的查询。例如，如果输入<code class="codeph">ORACLE</code>的查询并且系统在知识目录中未找到此概念，则系统可能将<span class="italic">Oracle</span>用作查找的相关概念。
                     </p>
                  </div>
               </div><a id="CCAPP9160"></a><div class="props_rev_3"><a id="GUID-7D6C35CE-73D2-48DA-82C1-0D508A055F62" name="GUID-7D6C35CE-73D2-48DA-82C1-0D508A055F62"></a><h4 id="CCAPP-GUID-7D6C35CE-73D2-48DA-82C1-0D508A055F62" class="sect4"><span class="enumeration_section">6.2.3</span>查询反馈</h4>
                  <div>
                     <p>反馈为具有<code class="codeph">CONTEXT</code>索引的指定查询提供更广泛，更窄的术语和相关术语信息。您可以使用<code class="codeph">CTX_QUERY.HFEEDBACK</code>过程以编程方式获取此信息。
                     </p>
                     <p>更广泛的术语，更窄的术语和相关的术语信息对于在查询应用程序中向用户建议其他查询术语非常有用。</p>
                     <p>返回的反馈信息从知识库获得，并且仅包含也在索引中的那些术语。此过程增加了从<code class="codeph">HFEEDBACK</code>返回的术语在当前索引的文档集上产生命中的机会。
                     </p>
                     <div class="infoboxnotealso" id="GUID-7D6C35CE-73D2-48DA-82C1-0D508A055F62__GUID-7689B15D-940F-48F5-BEFE-9BBF8305C100">
                        <p class="notep1">也可以看看：</p>
                        <p>有关使用<code class="codeph">CTX_QUERY.HFEEDBACK</code>更多信息，请<code class="codeph">CTX_QUERY.HFEEDBACK</code> <a href="../ccref/CTX_QUERY-package.html#CCREF0908" target="_blank"><span class="italic">Oracle Text Reference</span></a></p>
                     </div>
                  </div>
               </div><a id="CCAPP9161"></a><div class="props_rev_3"><a id="GUID-CE8A7113-DC6F-4E21-9605-BEAA62C186C7" name="GUID-CE8A7113-DC6F-4E21-9605-BEAA62C186C7"></a><h4 id="CCAPP-GUID-CE8A7113-DC6F-4E21-9605-BEAA62C186C7" class="sect4"><span class="enumeration_section">6.2.4</span>查询说明计划</h4>
                  <div>
                     <p>解释计划信息提供<code class="codeph">CONTAINS</code>查询表达式的解析树的图形表示。您可以使用<code class="codeph">CTX_QUERY.EXPLAIN</code>过程以编程方式获取此信息。
                     </p>
                     <p>解释计划信息告诉您如何在不让系统执行查询的情况下扩展和解析查询。获取解释信息对于了解特定词干，通配符，同义词库，模糊，soundex或<code class="codeph">ABOUT</code>查询的扩展非常有用。解析树还显示以下信息：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>执行顺序</p>
                        </li>
                        <li>
                           <p><code class="codeph">ABOUT</code>查询规范化</p>
                        </li>
                        <li>
                           <p>查询表达式优化</p>
                        </li>
                        <li>
                           <p>停用词转换</p>
                        </li>
                        <li>
                           <p>支持语言的复合词标记的细分</p>
                           <div class="infoboxnotealso" id="GUID-CE8A7113-DC6F-4E21-9605-BEAA62C186C7__GUID-1B49A23F-039D-4DF6-914D-7D5FFC781FEF">
                              <p class="notep1">也可以看看：</p>
                              <p>有关使用<code class="codeph">CTX_QUERY.EXPLAIN</code>详细信息，请<code class="codeph">CTX_QUERY.EXPLAIN</code> <a href="../ccref/CTX_QUERY-package.html#CCREF0906" target="_blank"><span class="italic">Oracle Text Reference</span></a></p>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div><a id="CCAPP9162"></a><div class="props_rev_3"><a id="GUID-156424C0-B89B-418B-BE22-1EF13B257FD4" name="GUID-156424C0-B89B-418B-BE22-1EF13B257FD4"></a><h4 id="CCAPP-GUID-156424C0-B89B-418B-BE22-1EF13B257FD4" class="sect4"><span class="enumeration_section">6.2.5</span>在查询中使用同义词库</h4>
                  <div>
                     <p>Oracle Text使您可以为查询应用程序定义同义词库，并更智能地处理查询。</p>
                     <p>由于用户可能不知道哪些单词代表某个主题，因此您可以为可能的查询字词定义同义词或更窄的术语。您可以使用同义词库运算符来扩展查询以包含同义词术语。</p>
                     <div class="infoboxnotealso" id="GUID-156424C0-B89B-418B-BE22-1EF13B257FD4__GUID-5D7A3A93-08E3-4473-B0B2-4C36C7EBF74D">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="working-with-thesaurus-in-oracle-text.html#GUID-05C24323-568D-4952-9358-7C98D68B19BF" title="您可以使用同义词库来改进查询应用程序。">使用Oracle Text中的同义词库</a></p>
                     </div>
                  </div>
               </div><a id="CCAPP9163"></a><div class="props_rev_3"><a id="GUID-705128B8-E8F0-40B3-A965-E531F87A9783" name="GUID-705128B8-E8F0-40B3-A965-E531F87A9783"></a><h4 id="CCAPP-GUID-705128B8-E8F0-40B3-A965-E531F87A9783" class="sect4"><span class="enumeration_section">6.2.6</span>文档部分搜索</h4>
                  <div>
                     <p>通过截面搜索，您可以将文本查询缩小到文档中的部分。</p>
                     <p>当文档具有内部结构时，您可以实现部分搜索，例如HTML和XML文档。例如，您可以为&lt;H1&gt;标记定义一个部分，使您可以使用<code class="codeph">WITHIN</code>运算符在此部分中进行查询。
                     </p>
                     <p>您可以将系统设置为自动从XML文档创建节。</p>
                     <p>您还可以定义属性部分以搜索XML文档中的属性文本。</p>
                     <div class="infoboxnote" id="GUID-705128B8-E8F0-40B3-A965-E531F87A9783__GUID-8B5F185E-88FB-490E-907F-EB8D59FE4B0F">
                        <p class="notep1">注意：</p>
                        <p>仅对具有<code class="codeph">CONTEXT</code>索引的单词查询支持截面搜索。
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-705128B8-E8F0-40B3-A965-E531F87A9783__GUID-04335311-515D-4028-963D-1575987AFE11">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="searching-document-sections-in-oracle-text.html#GUID-9455DBD9-2C23-4CB0-A3C5-FB8B2033516A" title="您可以在文本查询应用程序中使用文档部分。">在Oracle Text中搜索文档部分</a></p>
                     </div>
                  </div>
               </div><a id="CCAPP9164"></a><div class="props_rev_3"><a id="GUID-57BA56DA-CDEC-442A-BF2B-CB8BFEA7C001" name="GUID-57BA56DA-CDEC-442A-BF2B-CB8BFEA7C001"></a><h4 id="CCAPP-GUID-57BA56DA-CDEC-442A-BF2B-CB8BFEA7C001" class="sect4"><span class="enumeration_section">6.2.7</span>使用查询模板</h4>
                  <div>
                     <p>询问<a id="d16071e2906" class="indexterm-anchor"></a>模板是现有查询语言的替代方案。您不是将查询字符串传递给<code class="codeph">CONTAINS</code>或<code class="codeph">CATSEARCH</code> ，而是传递包含标记元素中的查询字符串的结构化文档。在此结构化文档或查询模板中，您可以启用其他查询功能。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-6CEBFF66-B74A-4739-A11D-BBC8E1927856">查询重写</a></p>
                        </li>
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-7DD2AF6B-88FD-40B7-A522-3F59309D3B35">查询放松</a></p>
                        </li>
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-636AC3D9-23D5-4E10-916D-AA45EC423547">查询语言</a></p>
                        </li>
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-8F27E182-FA4A-474C-BB69-4E149AD575AD">按SDATA部分排序</a></p>
                        </li>
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-89EAF7C5-AFB6-469E-8948-7F7A66DBBBB4">替代和用户定义的评分</a></p>
                        </li>
                        <li>
                           <p><a href="querying-with-oracle-text.html#GUID-58F6A035-9483-454B-BD8F-0AC933B93405">替代语法</a></p>
                        </li>
                     </ul>
                  </div><a id="CCAPP9165"></a><div class="props_rev_3"><a id="GUID-6CEBFF66-B74A-4739-A11D-BBC8E1927856" name="GUID-6CEBFF66-B74A-4739-A11D-BBC8E1927856"></a><h5 id="CCAPP-GUID-6CEBFF66-B74A-4739-A11D-BBC8E1927856" class="sect5"><span class="enumeration_section">6.2.7.1</span>查询重写</h5>
                     <div>
                        <p>查询应用程序有时会解析最终用户查询，通过使用不同的运算符组合以一种或多种方式解释查询字符串。例如，如果用户输入<span class="italic">kukui nut</span>的查询<span class="italic">，</span>您的应用程序将输入<span class="italic">{kukui nut}</span>和<span class="italic">{kukui或nut}</span>查询以增加召回。
                        </p>
                        <p>该<a id="d16071e3027" class="indexterm-anchor"></a>查询重写功能使您可以提交单个查询，将原始查询扩展为重写版本。结果返回时没有重复。
                        </p>
                        <p>您可以使用查询模板功能指定重写序列。只需调用<code class="codeph">CONTAINS</code>或<code class="codeph">CATSEARCH.</code>即可高效执行查询的重写版本<code class="codeph">CATSEARCH.</code></p>
                        <p>以下模板定义了查询重写序列。<span class="italic">{kukui nut}</span>的查询重写如下：</p>
                        <p><span class="italic">{kukui} {nut}</span></p>
                        <p><span class="italic">{kukui}; {坚果}</span></p>
                        <p><span class="italic">{kukui}和{nut}</span></p>
                        <p><span class="italic">{kukui} ACCUM {nut}</span></p>
                        <p>该<a id="d16071e3058" class="indexterm-anchor"></a>以下是这些转换的查询重写模板：</p><pre class="oac_no_warn" dir="ltr">从文件中选择ID，其中CONTAINS（text，'&lt;query&gt; &lt;textquery lang =“ENGLISH”grammar =“CONTEXT”&gt; kukui nut &lt;progression&gt; &lt;seq&gt; &lt;rewrite&gt; transform（（TOKENS，“{”，“}”， “”））&lt;/ rewrite&gt; &lt;/ seq&gt; &lt;seq&gt; &lt;rewrite&gt; transform（（TOKENS，“{”，“}”，“;”））&lt;/ rewrite&gt; &lt;/ seq&gt; &lt;seq&gt; &lt;rewrite&gt; transform（（TOKENS，“{”，“}”，“AND”））&lt;/ rewrite&gt; &lt;/ seq&gt; &lt;seq&gt; &lt;rewrite&gt; transform（（TOKENS，“{”，“}”，“ACCUM”）） &lt;/ rewrite&gt; &lt;/ seq&gt; &lt;/ progression&gt; &lt;/ textquery&gt; &lt;score datatype =“INTEGER”algorithm =“COUNT”/&gt; &lt;/ query&gt;'）&gt; 0;</pre></div>
                  </div><a id="CCAPP9166"></a><div class="props_rev_3"><a id="GUID-7DD2AF6B-88FD-40B7-A522-3F59309D3B35" name="GUID-7DD2AF6B-88FD-40B7-A522-3F59309D3B35"></a><h5 id="CCAPP-GUID-7DD2AF6B-88FD-40B7-A522-3F59309D3B35" class="sect5"><span class="enumeration_section">6.2.7.2</span>查询松弛</h5>
                     <div>
                        <p>查询放宽功能使您的应用程序能够首先执行查询的最严格版本，并逐步放松查询，直到获得所需的匹配数。</p>
                        <p>例如，您的应用程序首先搜索<span class="italic">黑色笔</span> ，然后查询放松到<span class="italic">黑色NEAR笔</span>以获得更多匹配。
                        </p>
                        <p>以下查询模板定义查询松弛序列。按顺序输入<span class="italic">黑笔</span>的查询。
                        </p>
                        <p><span class="italic">{black} {pen}</span> 
                        </p>
                        <p><span class="italic">{black} NEAR {pen}</span>  
                        </p>
                        <p><span class="italic">{black} AND {pen}</span> 
                        </p>
                        <p><span class="italic">{black} ACCUM {pen}</span></p>
                        <p>该<a id="d16071e3163" class="indexterm-anchor"></a>以下是这些转换的查询松弛模板：</p><pre class="oac_no_warn" dir="ltr">从文件中选择ID，其中CONTAINS（text，'&lt;query&gt; &lt;textquery lang =“ENGLISH”grammar =“CONTEXT”&gt; &lt;progression&gt; &lt;seq&gt; {black} {pen} &lt;/ seq&gt; &lt;seq&gt; {black} NEAR { pen} &lt;/ seq&gt; &lt;seq&gt; {black} AND {pen} &lt;/ seq&gt; &lt;seq&gt; {black} ACCUM {pen} &lt;/ seq&gt; &lt;/ progression&gt; &lt;/ textquery&gt; &lt;score datatype =“INTEGER”算法=“COUNT”/&gt; &lt;/ query&gt;'）&gt; 0;</pre><p>只要应用程序需要结果，查询命中就会按此顺序返回，不会重复。</p>
                        <p>当您的应用程序需要查询的前N个匹配时，查询放宽最有效，您可以使用<code class="codeph">DOMAIN_INDEX_SORT</code>提示或PL / SQL游标获取该查询。
                        </p>
                        <p>使用查询模板来放松查询比重新执行查询更有效。</p>
                     </div>
                  </div><a id="CCAPP9167"></a><div class="props_rev_3"><a id="GUID-636AC3D9-23D5-4E10-916D-AA45EC423547" name="GUID-636AC3D9-23D5-4E10-916D-AA45EC423547"></a><h5 id="CCAPP-GUID-636AC3D9-23D5-4E10-916D-AA45EC423547" class="sect5"><span class="enumeration_section">6.2.7.3</span>查询语言</h5>
                     <div>
                        <p>当您使用<code class="codeph">MULTI_LEXER</code>索引包含不同语言的文档的列时，您可以指定在查询期间使用哪种语言词法分析器。你这样做是通过使用<a id="d16071e3250" class="indexterm-anchor"></a>查询模板中的<code class="codeph">lang</code>参数，它指定文档级词法分析器。
                        </p><pre class="oac_no_warn" dir="ltr">从文档中选择id，其中CONTAINS（text，'&lt;query&gt; &lt;textquery lang =“french”&gt; bon soir &lt;/ textquery&gt; &lt;/ query&gt;'）&gt; 0;</pre><div class="infoboxnotealso" id="GUID-636AC3D9-23D5-4E10-916D-AA45EC423547__GUID-C5285B7E-2091-4E6A-A4EE-11DCCBE9E05B">
                           <p class="notep1">也可以看看：</p>
                           <p>有关ALTER INDEX和文档sublexer的<code class="codeph">LANGUAGE</code>和<code class="codeph">lang</code>信息的<a href="../ccref/oracle-text-SQL-statements-and-operators.html#CCREF0101" target="_blank"><span class="italic">Oracle Text Reference</span></a></p>
                        </div>
                     </div>
                  </div><a id="CCAPP9549"></a><div class="props_rev_3"><a id="GUID-8F27E182-FA4A-474C-BB69-4E149AD575AD" name="GUID-8F27E182-FA4A-474C-BB69-4E149AD575AD"></a><h5 id="CCAPP-GUID-8F27E182-FA4A-474C-BB69-4E149AD575AD" class="sect5"><span class="enumeration_section">6.2.7.4</span>按SDATA部分排序</h5>
                     <div>
                        <p>您可以使用查询模板的<code class="codeph">&lt;order&gt;</code>和<code class="codeph">&lt;orderkey&gt;</code>元素，根据<code class="codeph">SDATA</code>部分的内容对查询结果进行<code class="codeph">&lt;order&gt;</code> 。
                        </p>
                        <p>在以下示例中，第一级排序是在<code class="codeph">SDATA</code> <code class="codeph">price</code>部分上执行的，该部分按升序排序。第二级和第三级排序由<code class="codeph">SDATA</code> <code class="codeph">pub_date</code>部分和得分执行，两者都按降序排序。
                        </p><pre class="oac_no_warn" dir="ltr">从文档中选择ID，其中CONTAINS（text，'&lt;query&gt; &lt;textquery lang =“ENGLISH”grammar =“CONTEXT”&gt; Oracle &lt;/ textquery&gt; &lt;score datatype =“INTEGER”algorithm =“COUNT”/&gt; &lt;order&gt; &lt;orderkey &gt; SDATA（价格）ASC &lt;/ orderkey&gt; &lt;orderkey&gt; SDATA（pub_date）DESC &lt;/ orderKey&gt; &lt;orderkey&gt;得分DESC &lt;/ orderkey&gt; &lt;/ order&gt; &lt;/ query&gt;'，1）&gt; 0;</pre><div class="infoboxnote" id="GUID-8F27E182-FA4A-474C-BB69-4E149AD575AD__GUID-8B180FA2-8B02-42DF-982D-07219F52C411">
                           <p class="notep1">注意：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>您可以向索引添加其他<code class="codeph">SDATA</code>节。请参阅<a href="../ccref/oracle-text-SQL-statements-and-operators.html#CCREF0101" target="_blank"><span class="italic">Oracle Text Reference中</span></a> <code class="codeph">ALTER INDEX</code>下的<code class="codeph">ADD SDATA SECTION</code>参数字符串<a href="../ccref/oracle-text-SQL-statements-and-operators.html#CCREF0101" target="_blank">。</a></p>
                              </li>
                              <li>
                                 <p>在添加<code class="codeph">SDATA</code>部分之前编制索引的文档不会反映此新首选项。在这种情况下重建索引。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="infoboxnotealso" id="GUID-8F27E182-FA4A-474C-BB69-4E149AD575AD__GUID-F71A2212-CC8F-43FC-85EE-C443E0AD5400">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../ccref/oracle-text-SQL-statements-and-operators.html#CCREF-GUID-827A6E7D-106E-4341-9398-2FF6ABB05E59" target="_blank"><span class="italic">Oracle Text Reference，</span></a>用于查询模板的<code class="codeph">&lt;order&gt;</code>和<code class="codeph">&lt;orderkey&gt;</code>元素的语法</p>
                        </div>
                     </div>
                  </div><a id="CCAPP9168"></a><div class="props_rev_3"><a id="GUID-89EAF7C5-AFB6-469E-8948-7F7A66DBBBB4" name="GUID-89EAF7C5-AFB6-469E-8948-7F7A66DBBBB4"></a><h5 id="CCAPP-GUID-89EAF7C5-AFB6-469E-8948-7F7A66DBBBB4" class="sect5"><span class="enumeration_section">6.2.7.5</span>替代和用户定义的评分</h5>
                     <div>
                        <p>您可以使用查询模板来指定<a id="d16071e3471" class="indexterm-anchor"></a>替代评分算法。这些算法可帮助您自定义<code class="codeph">CONTAINS</code>的评分方式。它们还使<code class="codeph">SDATA</code>可用作评分表达式的一部分。通过这种方式，您不仅可以使用预定义的评分组件，还可以使用<code class="codeph">SDATA</code>组件，在数学上定义评分表达式。
                        </p>
                        <p>使用其他用户定义的评分，您可以指定：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>通过定义用于定义查询应如何评分的算术表达式，对术语表达式进行评分</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>预定义的评分算法： <code class="codeph">DISCRETE</code> ， <code class="codeph">OCCURRENCE</code> ， <code class="codeph">RELEVANCE</code>和<code class="codeph">COMPLETION</code></p>
                                 </li>
                                 <li>
                                    <p>算术运算：加，减，乘，除</p>
                                 </li>
                                 <li>
                                    <p>算术函数： <code class="codeph">ABS(n)</code> ，求<span class="italic">n</span>的绝对值; <code class="codeph">LOG(n)</code> ，发现<span class="italic">n</span>的基极- 10对数值</p>
                                 </li>
                                 <li>
                                    <p>数字文字</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>在学期级别评分表达式</p>
                           </li>
                           <li>
                              <p>计算分数时不应考虑的术语</p>
                           </li>
                           <li>
                              <p>如何合并<code class="codeph">OR</code>和<code class="codeph">AND</code>运算符的子元素的分数</p>
                           </li>
                           <li>
                              <p>使用</p>
                           </li>
                        </ul>
                        <p>您还可以使用存储数字或<code class="codeph">DATETIME</code>值的<code class="codeph">SDATA</code>来影响文档的最终得分。
                        </p>
                        <p>以下示例指定了另一种评分算法：</p><pre class="oac_no_warn" dir="ltr">从文档中选择id，其中CONTAINS（text，'&lt;query&gt; &lt;textquery grammar =“CONTEXT”lang =“english”&gt; mustang &lt;/ textquery&gt; &lt;score datatype =“float”algorithm =“DEFAULT”/&gt; &lt;/ query&gt;' ）&gt; 0</pre><p>以下查询模板示例包括<code class="codeph">SDATA</code>值作为最终得分的一部分：</p><pre class="oac_no_warn" dir="ltr">从文档中选择id，其中CONTAINS（text，'&lt;query&gt; &lt;textquery grammar =“CONTEXT”lang =“english”&gt; mustang &lt;/ textquery&gt; &lt;score datatype =“float”algorithm =“DEFAULT”normalization_expr =“doc_score + SDATA（价格）“/&gt; &lt;/查询&gt;'）&gt; 0”</pre><div class="infoboxnotealso" id="GUID-89EAF7C5-AFB6-469E-8948-7F7A66DBBBB4__GUID-3D182C40-82C7-45A1-8802-B1D99CC90D1D">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="working-with-CONTEXT-and-CTXCAT-grammars-in-oracle-text.html#GUID-2E1DB163-02FE-4B2E-AF28-0C33E09926BE">使用DEFINESCORE和DEFINEMERGE进行用户定义的评分</a> ”</span></p>
                        </div>
                     </div>
                  </div><a id="CCAPP9169"></a><div class="props_rev_3"><a id="GUID-58F6A035-9483-454B-BD8F-0AC933B93405" name="GUID-58F6A035-9483-454B-BD8F-0AC933B93405"></a><h5 id="CCAPP-GUID-58F6A035-9483-454B-BD8F-0AC933B93405" class="sect5"><span class="enumeration_section">6.2.7.6</span>替代语法</h5>
                     <div>
                        <p><a id="d16071e3639" class="indexterm-anchor"></a>查询模板使您可以将<code class="codeph">CONTEXT</code>语法与<code class="codeph">CATSEARCH</code>查询一起使用，反之亦然。
                        </p><pre class="oac_no_warn" dir="ltr">从文档中选择id，其中CONTAINS（text，'&lt;query&gt; &lt;textquery grammar =“CTXCAT”&gt; San Diego &lt;/ textquery&gt; &lt;score datatype =“integer”/&gt; &lt;/ query&gt;'）&gt; 0;</pre></div>
                  </div>
               </div><a id="CCAPP9170"></a><div class="props_rev_3"><a id="GUID-0E8B2943-055A-4B4C-8D9C-B5E1972DFBF3" name="GUID-0E8B2943-055A-4B4C-8D9C-B5E1972DFBF3"></a><h4 id="CCAPP-GUID-0E8B2943-055A-4B4C-8D9C-B5E1972DFBF3" class="sect4"><span class="enumeration_section">6.2.8</span>查询分析</h4>
                  <div>
                     <p>Oracle Text使您可以创建查询日志并分析查询。例如，假设您有一个搜索大型动物数据库的应用程序，并且您对其查询的分析显示用户搜索单词<span class="italic">mouse。</span> 此分析表明您应该重写应用程序以避免返回不成功的搜索。相反，搜索<span class="italic">鼠标</span>会将用户重定向到小动物数据库。
                     </p>
                     <p>通过查询分析，您可以找到：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>进行了哪些查询</p>
                        </li>
                        <li>
                           <p>哪些查询成功</p>
                        </li>
                        <li>
                           <p>哪些查询不成功</p>
                        </li>
                        <li>
                           <p>每个查询的次数</p>
                        </li>
                     </ul>
                     <p>您可以通过各种方式组合这些因素，例如确定应用程序发出的50个最常见的不成功查询。</p>
                     <p>使用<code class="codeph">CTX_OUTPUT.START_QUERY_LOG.</code>启动查询日志记录<code class="codeph">CTX_OUTPUT.START_QUERY_LOG.</code>查询日志包含对程序正在使用的所有<code class="codeph">CONTEXT</code>索引所做的所有查询，直到输入<code class="codeph">CTX_OUTPUT.END_QUERY_LOG</code>过程为止。使用<code class="codeph">CTX_REPORT.QUERY_LOG_SUMMARY</code>获取查询报告。
                     </p>
                     <div class="infoboxnotealso" id="GUID-0E8B2943-055A-4B4C-8D9C-B5E1972DFBF3__GUID-0F57BFF5-6838-48F2-82B8-8FB8013DE948">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../ccref/oracle-text-CONTAINS-query-operators.html#CCREF0300" target="_blank"><span class="italic">Oracle Text Reference</span></a>了解这些过程的语法和示例</p>
                     </div>
                  </div>
               </div><a id="CCAPP9503"></a><a id="CCAPP9171"></a><div class="props_rev_3"><a id="GUID-D06D1E5E-C530-47AF-93D5-A178DFD05446" name="GUID-D06D1E5E-C530-47AF-93D5-A178DFD05446"></a><h4 id="CCAPP-GUID-D06D1E5E-C530-47AF-93D5-A178DFD05446" class="sect4"><span class="enumeration_section">6.2.9</span>其他查询功能</h4>
                  <div>
                     <p>在查询应用程序中，您可以使用其他查询功能，例如邻近搜索。<a href="querying-with-oracle-text.html#GUID-D06D1E5E-C530-47AF-93D5-A178DFD05446__BABGJEID" title="此表描述了其他Oracle Text查询功能。">表6-1</a>列出了其中一些功能。
                     </p>
                     <div class="tblformal" id="GUID-D06D1E5E-C530-47AF-93D5-A178DFD05446__BABGJEID">
                        <p class="titleintable">表6-1其他Oracle文本查询功能</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="其他Oracle Text Query功能" width="100%" border="1" summary="This table describes other Oracle Text query features." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="29%" id="d16071e3858">特征</th>
                                 <th align="left" valign="bottom" width="39%" id="d16071e3861">描述</th>
                                 <th align="left" valign="bottom" width="32%" id="d16071e3864">实施</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e3869" headers="d16071e3858 ">
                                    <p>区分大小写的搜索</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e3869 d16071e3861 ">
                                    <p>使您能够搜索与查询中输入完全相同的单词或短语。例如，对<span class="italic">Roman</span>的搜索返回包含<span class="italic">罗马</span>而不是<span class="italic">罗马的</span>文档。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e3869 d16071e3864 ">
                                    <p>创建索引时的<code class="codeph">BASIC_LEXER</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e3890" headers="d16071e3858 ">
                                    <p>基本字母转换</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e3890 d16071e3861 ">
                                    <p>查询带或不带变音符号的单词，如波浪号，重音符号和变音符号。例如，对于西班牙语基本字母索引， <span class="italic">energía</span>的查询匹配包含<span class="italic">energía</span>和<span class="italic">energia的</span>文档。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e3890 d16071e3864 ">
                                    <p>创建索引时的<code class="codeph">BASIC_LEXER</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e3911" headers="d16071e3858 ">
                                    <p>Word Decompounding</p>
                                    <p>（德语和荷兰语）</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e3911 d16071e3861 ">
                                    <p>允许搜索包含指定术语的单词作为子复合词。</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e3911 d16071e3864 ">
                                    <p>创建索引时的<code class="codeph">BASIC_LEXER</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e3925" headers="d16071e3858 ">
                                    <p>替代拼写</p>
                                    <p>（德语，荷兰语和瑞典语）</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e3925 d16071e3861 ">
                                    <p>搜索单词的替代拼写。</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e3925 d16071e3864 ">
                                    <p>创建索引时的<code class="codeph">BASIC_LEXER</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e3939" headers="d16071e3858 ">
                                    <p>邻近搜索</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e3939 d16071e3861 ">
                                    <p>搜索彼此附近的单词。</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e3939 d16071e3864 ">
                                    <p>输入查询时<code class="codeph">NEAR</code>运算符</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e3951" headers="d16071e3858 ">
                                    <p>扩展运算符，包含<code class="codeph">PHRASE</code> ， <code class="codeph">NEAR</code>和<code class="codeph">AND</code>运算符的功能。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e3951 d16071e3861 ">
                                    <p>根据给定的查询将文档分成块。每个丛都基于主要特征进行分类，并根据次要特征进行评分。最终文档分数添加了丛集分数，使得主要特征的排序决定了文档分数的初始排序。</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e3951 d16071e3864 ">
                                    <p>输入查询时<code class="codeph">NEAR2</code>运算符</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e3972" headers="d16071e3858 ">
                                    <p>词干</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e3972 d16071e3861 ">
                                    <p>搜索与指定术语具有相同根的单词。</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e3972 d16071e3864 ">
                                    <p>输入查询时的$运算符</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e3982" headers="d16071e3858 ">
                                    <p>模糊搜索</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e3982 d16071e3861 ">
                                    <p>搜索与指定术语具有相似拼写的单词。</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e3982 d16071e3864 ">
                                    <p>输入查询时的<code class="codeph">FUZZY</code>运算符</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e3994" headers="d16071e3858 ">
                                    <p>查询解释计划</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e3994 d16071e3861 ">
                                    <p>生成查询解析信息。</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e3994 d16071e3864 ">
                                    <p>索引后的<code class="codeph">CTX_QUERY.EXPLAIN</code> PL / SQL过程</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e4006" headers="d16071e3858 ">
                                    <p>分层查询反馈</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e4006 d16071e3861 ">
                                    <p>为查询生成更广泛的术语，更窄的术语和相关的术语信息。</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e4006 d16071e3864 ">
                                    <p>索引后的<code class="codeph">CTX_QUERY.HFEEDBACK</code> PL / SQL过程</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e4018" headers="d16071e3858 ">
                                    <p>浏览索引</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e4018 d16071e3861 ">
                                    <p>浏览索引中种子词周围的单词。</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e4018 d16071e3864 ">
                                    <p>索引后<code class="codeph">CTX_QUERY.BROWSE_WORDS</code> PL / SQL</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e4031" headers="d16071e3858 ">
                                    <p>点击次数</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e4031 d16071e3861 ">
                                    <p>计算查询中的命中数。</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e4031 d16071e3864 ">
                                    <p>索引后的<code class="codeph">CTX_QUERY.COUNT_HITS</code> PL / SQL过程</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e4043" headers="d16071e3858 ">
                                    <p>存储的查询表达式</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e4043 d16071e3861 ">
                                    <p>存储查询表达式的文本，以便以后在另一个查询中重用。</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e4043 d16071e3864 ">
                                    <p>索引后的<code class="codeph">CTX_QUERY.STORE_SQE</code> PL / SQL过程</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16071e4055" headers="d16071e3858 ">
                                    <p>Theaaural Queries</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d16071e4055 d16071e3861 ">
                                    <p>使用同义词库来扩展查询。</p>
                                 </td>
                                 <td align="left" valign="top" width="32%" headers="d16071e4055 d16071e3864 ">
                                    <p>同义词运算符如<code class="codeph">SYN</code>和<code class="codeph">BT</code>以及<code class="codeph">ABOUT</code>运算符</p>
                                    <p>（使用<code class="codeph">CTX_THES</code>包来维护同义词库。）
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
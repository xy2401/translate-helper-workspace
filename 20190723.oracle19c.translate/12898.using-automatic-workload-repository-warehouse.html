<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>使用自动工作负载存储库仓库生成性能报告</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database 2 Day + Performance Tuning Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database 2 Day + Performance Tuning Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-2-day-performance-tuning-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T02:50:24-08:00"></meta>
      <meta name="dcterms.title" content="Database 2 Day + Performance Tuning Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96346-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="resolving-performance-degradation-over-time.html" title="Previous" type="text/html"></link>
      <link rel="next" href="part-IV-sql-tuning.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TDPPT"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="resolving-performance-degradation-over-time.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="part-IV-sql-tuning.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库2天+性能调整指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-III-reactive-database-tuning.html" property="item" typeof="WebPage"><span property="name">反应性数据库调整</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用自动工作负载存储库仓库生成性能报告</li>
            </ol>
            <a id="GUID-532BD061-FE4A-4AF6-AA86-37F436EEA005" name="GUID-532BD061-FE4A-4AF6-AA86-37F436EEA005"></a><a id="TDPPT145"></a>
            
            <h2 id="TDPPT-GUID-532BD061-FE4A-4AF6-AA86-37F436EEA005" class="sect2"><span class="enumeration_chapter">10</span>使用自动工作负载存储库仓库生成性能报告</h2>
         </header>
         <div class="ind">
            <div>
               <p>企业管理器AWR Warehouse使您可以合并和存储来自重要Oracle数据库的自动工作负载存储库的详细性能数据。此整合的AWR Warehouse允许DBA和开发人员查看和分析源数据库的AWR保留期之外的历史性能数据。Enterprise Manager从一个或多个源数据库目标中提取自动工作负载存储库（AWR）数据，并将其传输到AWR仓库，该仓库独立于源数据库进行维护。通过AWR Warehouse，您可以永久地（如果已配置）从选定的企业管理器数据库目标中保留AWR数据的长期历史记录。这样可以跨数据库对AWR数据进行长期分析，而不会对源数据库目标产生性能或存储影响。<a id="d19609e80" class="indexterm-anchor"></a></p>
               <p>因此，通过将AWR数据上载到集中式AWR仓库，可以节省空间并提高生产系统的性能。</p>
               <p>要配置AWR仓库，企业管理器管理员需要将现有企业管理器数据库目标指定为AWR仓库。仓库使用SYSAUX表空间在SYS模式中构建。仓库目标数据库必须是版本12.1.0.2或更高版本或版本11.2.0.4以及相应的修补程序。它也必须是它所容纳的源数据库的相同或更高的数据库版本。</p>
               <p>要使用此功能，首先需要设置Enterprise Manager可用作AWR Warehouse的Oracle数据库。设置仓库数据库后，您可以识别要提取其存储库并上载到仓库的源数据库。</p>
               <p>要访问AWR Warehouse页面：</p>
               <ol>
                  <li>
                     <p>从“ <span class="bold">目标”</span>菜单中，选择“ <span class="bold">数据库”</span> 。
                     </p>
                  </li>
                  <li>
                     <p>在“数据库”页面上，单击“ <span class="bold">性能”</span> ，然后选择“ <span class="bold">AWR仓库”</span> 。
                     </p>
                  </li>
               </ol>
               <p>最初，也就是说，在仓库设置之前，页面左侧显示功能工作流程，右侧显示配置访问权限。</p>
               <p>设置完成后，页面右侧会汇总仓库配置，并以图形方式描绘用作可用空间百分比的空间。在此视图中，您可以配置仓库。</p>
               <p>初始设置后，主页将成为仪表板，您可以在其中执行以下任务：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p>添加和删除源数据库。</p>
                  </li>
                  <li>
                     <p>启用和禁用快照上载。</p>
                  </li>
                  <li>
                     <p>按需上传快照。</p>
                  </li>
                  <li>
                     <p>授予管理员访问存储在仓库中的AWR数据的权限。</p>
                  </li>
                  <li>
                     <p>监控和研究事件和错误。</p>
                  </li>
                  <li>
                     <p>在仓库上运行性能报告和分析与在本地AWR上运行相同。</p>
                  </li>
               </ul>
               <p>本节介绍AWR仓库的以下内容：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="using-automatic-workload-repository-warehouse.html#GUID-FEFEF41F-6DF4-4BB1-82FE-2AE93170CD54">设置AWR仓库</a></p>
                  </li>
                  <li>
                     <p><a href="using-automatic-workload-repository-warehouse.html#GUID-94468159-633C-459B-9A15-7462F3B0B310">使用源数据库</a></p>
                  </li>
                  <li>
                     <p><a href="using-automatic-workload-repository-warehouse.html#GUID-BF97FC5E-DAD7-4923-A4DD-D619CB205FA7">将快照上传到AWR仓库</a></p>
                  </li>
                  <li>
                     <p><a href="using-automatic-workload-repository-warehouse.html#GUID-5A720673-ACEA-4436-BD22-D59463819106">将性能页面与AWR Warehouse一起使用</a></p>
                  </li>
                  <li>
                     <p><a href="using-automatic-workload-repository-warehouse.html#GUID-1FB8C39B-50D8-4507-9D27-A0E6F7650DA3">监测和研究事故和错误</a></p>
                  </li>
               </ul>
            </div><a id="TDPPT561"></a><div class="props_rev_3"><a id="GUID-FEFEF41F-6DF4-4BB1-82FE-2AE93170CD54" name="GUID-FEFEF41F-6DF4-4BB1-82FE-2AE93170CD54"></a><h3 id="TDPPT-GUID-FEFEF41F-6DF4-4BB1-82FE-2AE93170CD54" class="sect3"><span class="enumeration_section">10.1</span>设置AWR仓库</h3>
               <div>
                  <div class="section">
                     <p>在将数据库指定为AWR Warehouse之前，请确保满足这些先决条件：<a id="d19609e248" class="indexterm-anchor"></a></p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>目标数据库必须是现有版本12.1.0.2或更高版本或11.2.0.4，并在Enterprise Manager Cloud Control中具有相应的修补程序级别托管目标。Oracle建议任何其他应用程序不使用所选数据库，并且不要将Enterprise Manager Cloud Control存储库用作仓库。</p>
                        </li>
                        <li>
                           <p>有足够的空间可容纳要上载的数据，作为每天每个源数据库的一个因子。经验法则是每天每个数据库4-10MB的范围。</p>
                        </li>
                        <li>
                           <p>您必须具有超级管理员权限才能配置AWR Warehouse。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>从“ <span class="bold">目标”</span>菜单中，选择“ <span class="bold">数据库”</span> 。</span></li>
                     <li><span>在“数据库”页面上，单击“ <span class="bold">性能”</span> ，然后选择“ <span class="bold">AWR仓库”</span> 。</span></li>
                     <li><span>单击工作流程图右侧窗格中的“ <span class="bold">配置”</span> 。出现第一个配置页面（存储库）。</span></li>
                     <li><span>单击搜索图标以选择要用作AWR Warehouse的数据库。</span></li>
                     <li><span>选择为目标数据库建立的首选或命名凭据。您还可以提供新凭据。</span></li>
                     <li><span>选择为目标数据库主机建立的首选或命名凭据。您还可以提供新凭据。</span></li>
                     <li><span>单击<span class="bold">下一步</span> 。出现第二个配置页面（AWR快照管理）。</span></li>
                     <li><span>将保留期设置为若干年。（可选）您可以选择无限期保留数据。</span></li>
                     <li><span>设置快照上传间隔。默认值为24小时最小间隔为一小时。您还可以按需上载快照。</span></li>
                     <li><span>选择仓库数据库主机上的位置以保存导出的转储文件。对于单实例数据库，该位置默认为代理状态目录。对于群集数据库，您必须指定所有节点均可访问的位置。</span></li>
                     <li><span>单击“ <span class="bold">提交”</span>这将提交前缀为CAW_LOAD_SETUP_的作业。成功完成作业后，仓库已准备好添加源数据库。</span></li>
                  </ol>
               </div>
            </div><a id="TDPPT563"></a><a id="TDPPT564"></a><a id="TDPPT565"></a><a id="TDPPT566"></a><a id="TDPPT562"></a><div class="props_rev_3"><a id="GUID-94468159-633C-459B-9A15-7462F3B0B310" name="GUID-94468159-633C-459B-9A15-7462F3B0B310"></a><h3 id="TDPPT-GUID-94468159-633C-459B-9A15-7462F3B0B310" class="sect3"><span class="enumeration_section">10.2</span>使用源数据库</h3>
               <div>
                  <div class="section">
                     <p>使用仪表板管理组成AWR仓库的源数据库，包括以下活动：<a id="d19609e406" class="indexterm-anchor"></a></p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>添加和删除源数据库。</p>
                        </li>
                        <li>
                           <p>启用和禁用快照上载。</p>
                        </li>
                        <li>
                           <p>按需上传快照</p>
                        </li>
                        <li>
                           <p>授予对集中存储的AWR数据的查看访问权限。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-94468159-633C-459B-9A15-7462F3B0B310__GUID-C2BBC4B7-3BDD-42DF-BD1C-CB002193D310">添加和删除源数据库</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>要将其上载到仓库的AWR数据必须与仓库数据库版本相同或更早（至10.2.0.4）的源数据库。如果您有权访问数据库目标，则可以添加和删除源数据库，也可以在<code class="codeph">sys.dbms_swrf_internal</code>包和DBA角色上具有执行权限的数据库凭据。
                     </p>
                     <p>单击工具栏上的“ <span class="bold">添加”</span>按钮，然后选择要添加到AWR Warehouse的源数据库。在仪表板上选择源数据库，然后单击“ <span class="bold">删除”</span>按钮将其删除。删除数据库时，其数据将保留一段时间，直到作业运行以清除数据。如果要保留数据，请禁用快照上载而不是删除数据库。<a id="d19609e441" class="indexterm-anchor"></a></p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-94468159-633C-459B-9A15-7462F3B0B310__GUID-1E3F6B5C-90CA-47FB-A99E-2D2327379EB6">启用和禁用快照上载</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>添加源数据库时，默认情况下会启用其快照上载。您必须是所有者或代理才能禁用（并重新启用）源数据库的快照上载。禁用上载时，允许在上载停止之前完成任何进程内作业。重新启用后，上传将在下一次计划上传时恢复。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-94468159-633C-459B-9A15-7462F3B0B310__GUID-EB602FCF-3FB4-4172-A6EB-B9B9A230E111">按需上传快照</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>您还可以按需上载快照。在仪表板上选择源数据库，然后从“ <span class="bold">操作”</span>菜单中选择“ <span class="bold">立即上载快照”</span> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-94468159-633C-459B-9A15-7462F3B0B310__GUID-C7EF06F7-868B-4D9C-AE87-88C48C483FA1">授予对AWR快照的查看访问权限</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>源数据库所有者可以授予其他企业管理器管理员视图对AWR仓库中存储的AWR快照的访问权限。<a id="d19609e467" class="indexterm-anchor"></a></p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>在仪表板表中选择源数据库，然后单击工具栏中的“ <span class="bold">权限”</span>按钮。</span></li>
                     <li><span>在打开的对话框中，将管理员名称从“可用”列表移动到“选定”列表。</span></li>
                     <li><span>单击“ <span class="bold">确定”</span>以授予对所选名称的查看权限。</span></li>
                  </ol>
               </div>
            </div><a id="TDPPT568"></a><a id="TDPPT569"></a><a id="TDPPT570"></a><a id="TDPPT567"></a><div class="props_rev_3"><a id="GUID-BF97FC5E-DAD7-4923-A4DD-D619CB205FA7" name="GUID-BF97FC5E-DAD7-4923-A4DD-D619CB205FA7"></a><h3 id="TDPPT-GUID-BF97FC5E-DAD7-4923-A4DD-D619CB205FA7" class="sect3"><span class="enumeration_section">10.3</span>将快照上传到AWR仓库</h3>
               <div>
                  <p>从源数据库上载AWR快照数据是作为ETL过程进行的，ETL过程是执行ETL提取，传输，加载处理的一系列作业。<a id="d19609e574" class="indexterm-anchor"></a><a id="d19609e576" class="indexterm-anchor"></a><a id="d19609e580" class="indexterm-anchor"></a></p>
                  <div class="section">
                     <p class="subhead2" id="GUID-BF97FC5E-DAD7-4923-A4DD-D619CB205FA7__GUID-FC71447D-CA2E-4E3E-8E1D-E41323A62A0D">提取AWR数据</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>作为收集过程的一部分，DBMS作业定期运行以收集AWR快照并在目标主机上的暂存区域中创建转储。最初，此作业收集现有AWR数据，然后以增量方式收集最新快照。如果最初要收集的数据太多，则该作业会错开收集过程，以避免给源数据库带来负担。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BF97FC5E-DAD7-4923-A4DD-D619CB205FA7__GUID-BD14702D-7A11-4D55-BD7D-AC04248BEAB9">传输AWR数据</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>企业管理器作业在相应主机上定期运行，以将源数据库AWR数据传输到仓库主机上的暂存区域以进行进一步处理。此作业使用代理到代理文件传输机制复制转储文件。成功上载到仓库后，转储文件将从主机临时区域中删除。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-BF97FC5E-DAD7-4923-A4DD-D619CB205FA7__GUID-AF9B7452-08E2-4F50-8554-750206A56D93">将传输的数据加载到AWR仓库中</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>DBMS作业定期运行以处理多个源数据库转储文件并将其导入仓库模式。这会逐渐发生，以确保尚未导入快照。作为导入过程的一部分，作业映射DB ID以确保唯一性。此信息在单独的表中维护，以处理重复的DB ID并支持多租户方案;例如，多个客户的数据存储在单个AWR数据库中，其中可能存在重复的数据库名称。AWR数据保留在仓库中，直到可配置的保留期，然后清除。</p>
                     <div class="infoboxnote" id="GUID-BF97FC5E-DAD7-4923-A4DD-D619CB205FA7__GUID-5C3EBFCC-2CAB-4206-ABC0-4F25A321B5E5">
                        <p class="notep1">注意：</p>
                        <p>您还可以按需上载快照。在仪表板上选择源数据库，然后从“ <span class="bold">操作”</span>菜单中选择“ <span class="bold">立即上载快照”</span> 。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="TDPPT572"></a><a id="TDPPT573"></a><a id="TDPPT574"></a><a id="TDPPT575"></a><a id="TDPPT576"></a><a id="TDPPT571"></a><div class="props_rev_3"><a id="GUID-5A720673-ACEA-4436-BD22-D59463819106" name="GUID-5A720673-ACEA-4436-BD22-D59463819106"></a><h3 id="TDPPT-GUID-5A720673-ACEA-4436-BD22-D59463819106" class="sect3"><span class="enumeration_section">10.4</span>将性能页面与AWR Warehouse一起使用</h3>
               <div>
                  <div class="section">
                     <p>您可以通过在源数据库的相应性能页面上将<span class="bold">View Data</span>模式切换到<span class="bold">AWR Warehouse</span>来<span class="bold">查看</span>已配置的AWR Warehouse中的历史数据，图表和报告，如下所述。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5A720673-ACEA-4436-BD22-D59463819106__GUID-0739B29B-7041-4A03-B764-AF4A703AF756">表现主页</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>将Performance Home页面与AWR Warehouse一起使用，如下所示：<a id="d19609e710" class="indexterm-anchor"></a></p>
                     <ol>
                        <li>
                           <p>在仪表板上选择源数据库。</p>
                        </li>
                        <li>
                           <p>单击工具栏上的“ <span class="bold">性能主页”</span>按钮。
                           </p>
                           <p>Performance Home页面显示在Historical  -  AWR Warehouse模式中。请注意，您无需登录源数据库即可查看此页面。</p>
                        </li>
                     </ol>
                     <p>您还可以从数据库的主页访问Performance Home页面。在Performance Home页面上，从<span class="bold">View Data</span>下拉菜单中选择<span class="bold">Historical AWR Warehouse</span> 。AWR Warehouse选项仅适用于已添加为源数据库的数据库，仅适用于已被授予访问权限的用户。
                     </p>
                     <div class="infoboxnotealso" id="GUID-5A720673-ACEA-4436-BD22-D59463819106__GUID-83EA8AC2-CE76-4D1A-BD28-7D43B3753914">
                        <p class="notep1">也可以看看：</p>
                        <p>有关Performance Home页面的更多信息，请<span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-EE9118C7-708A-488F-A332-4ECFA6638A07">监视用户活动</a> ”</span> 。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5A720673-ACEA-4436-BD22-D59463819106__GUID-20962D96-8233-4093-A16C-EA6771AE4BE1">ASH Analytics页面</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>将ASH Analytics页面与AWR Warehouse一起使用，如下所示：<a id="d19609e747" class="indexterm-anchor"></a></p>
                     <ol>
                        <li>
                           <p>在仪表板上选择源数据库。</p>
                        </li>
                        <li>
                           <p>单击工具栏上的<span class="bold">ASH Analytics</span>按钮。
                           </p>
                           <p>ASH Analytics页面以Historical  -  AWR Warehouse模式显示。请注意，您无需登录源数据库即可查看此页面。</p>
                        </li>
                     </ol>
                     <p>您还可以从所选数据库的主页访问ASH Analytics页面。从Performance菜单的Performance Hub子菜单中选择<span class="bold">ASH Analytics</span> 。在ASH Analytics页面上，从<span class="bold">AWR Data Source</span>下拉菜单中选择<span class="bold">Historical  -  AWR Warehouse</span> 。
                     </p>
                     <div class="infoboxnotealso" id="GUID-5A720673-ACEA-4436-BD22-D59463819106__GUID-77CE0964-E636-438F-974C-D1FE2FD0FA36">
                        <p class="notep1">也可以看看：</p>
                        <p>有关ASH Analytics的更多信息，请参阅<span class="q">“ <a href="monitoring-real-time-database-performance.html#GUID-84551E4C-9D0E-4580-8B89-FAE9DD6A44D1">确定数据库活动高峰的原因</a> ”</span> 。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5A720673-ACEA-4436-BD22-D59463819106__GUID-62193731-D55D-4D8C-A2C5-D02A16AA10EE">AWR报告页面</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>将AWR报告页面与AWR仓库一起使用，如下所示：<a id="d19609e787" class="indexterm-anchor"></a></p>
                     <ol>
                        <li>
                           <p>在仪表板上选择源数据库。</p>
                        </li>
                        <li>
                           <p>单击工具栏上的<span class="bold">AWR报告</span>按钮。
                           </p>
                           <p>AWR报告页面显示在历史 -  AWR仓库模式中。请注意，您无需登录源数据库即可查看此页面。</p>
                        </li>
                        <li>
                           <p>单击“ <span class="bold">生成报告”</span> 。
                           </p>
                        </li>
                     </ol>
                     <p>您还可以从所选数据库的主页访问AWR报告页面。从<span class="bold">Performance</span>菜单中，选择<span class="bold">AWR</span> ，然后选择<span class="bold">AWR Report</span> 。在AWR Report页面上，从<span class="bold">AWR Data Source</span>下拉菜单中选择<span class="bold">Historical  -  AWR Warehouse</span> 。
                     </p>
                     <div class="infoboxnotealso" id="GUID-5A720673-ACEA-4436-BD22-D59463819106__GUID-03B84BCC-DDBF-4164-AA2A-0896E431EBC1">
                        <p class="notep1">也可以看看：</p>
                        <p>有关AWR报告的更多信息，请<span class="q">“ <a href="resolving-performance-degradation-over-time.html#GUID-71C2B1BD-6906-47B0-9FF5-BD3268F0C7C8">逐步解决性能</a></span>下降”。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5A720673-ACEA-4436-BD22-D59463819106__GUID-FCA4DDA1-32BF-435D-9699-26FB4AB5FCC5">比较期间ADDM页面</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>使用比较期间ADDM页面和AWR仓库，如下所示：<a id="d19609e839" class="indexterm-anchor"></a></p>
                     <ol>
                        <li>
                           <p>在仪表板上选择源数据库。</p>
                        </li>
                        <li>
                           <p>从<span class="bold">Compare Period</span>下拉菜单中选择<span class="bold">Compare Period ADDM</span> 。
                           </p>
                           <p>比较期间ADDM页面显示在历史 -  AWR仓库模式中。请注意，您无需登录源数据库即可查看此页面。</p>
                        </li>
                        <li>
                           <p>完成步骤1和2。请注意，步骤2中的数据库选择列出了您有权访问的仓库中包含AWR数据的所有数据库。</p>
                        </li>
                        <li>
                           <p>单击“运行”以运行比较。</p>
                        </li>
                     </ol>
                     <p>您还可以从所选数据库的主页访问“比较期间ADDM”页面。从<span class="bold">Performance</span>菜单中，选择<span class="bold">AWR</span> ，然后选择<span class="bold">Compare Period ADDM</span> 。在比较期间ADDM页面上，从<span class="bold">AWR数据源</span>下拉菜单中选择<span class="bold">历史 -  AWR仓库</span> 。
                     </p>
                     <div class="infoboxnotealso" id="GUID-5A720673-ACEA-4436-BD22-D59463819106__GUID-24CD42FC-EB76-4929-8CA0-4345793DD8DD">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="resolving-performance-degradation-over-time.html#GUID-E03E4B6C-11C5-48E0-8078-25C9D9AB6684">将当前系统性能与基准周期</a></span>进行比较<span class="q">”</span> ，了解有关比较周期ADDM的更多信息。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5A720673-ACEA-4436-BD22-D59463819106__GUID-8C3BC2EE-139F-4DFD-B607-9EAFCFE5D6D1">比较期间报告</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>使用比较期间报告页面和AWR仓库，如下所示：<a id="d19609e894" class="indexterm-anchor"></a></p>
                     <ol>
                        <li>
                           <p>在仪表板上选择源数据库。</p>
                        </li>
                        <li>
                           <p>从<span class="bold">比较期间</span>下拉菜单中选择<span class="bold">比较期间报告</span> 。
                           </p>
                           <p>“比较期间报告”页面显示在历史 -  AWR仓库模式中。请注意，您无需登录源数据库即可查看此页面。</p>
                        </li>
                        <li>
                           <p>完成第一和第二阶段。请注意，两个期间的选择来自仓库中的数据。对于第二个期间，您可以选择您有权访问的仓库中的任何数据库。</p>
                        </li>
                        <li>
                           <p>单击“ <span class="bold">生成报告”</span> 。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>您还可以从所选数据库的主页访问“比较期间报告”页面。从<span class="bold">Performance</span>菜单中，选择<span class="bold">AWR</span> ，然后选择<span class="bold">Compare Period Report</span> 。在比较期间报告页面上，从<span class="bold">AWR数据源</span>下拉菜单中选择<span class="bold">历史 -  AWR仓库</span> 。
                     </p>
                     <div class="infoboxnotealso" id="GUID-5A720673-ACEA-4436-BD22-D59463819106__GUID-17CE3F52-AAAC-4315-87CF-156A1CED7428">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="resolving-performance-degradation-over-time.html#GUID-A2C52987-2A76-47CC-81D2-37C67A2ED486">运行AWR比较期间报告</a> ”</span>以获取有关比较期间报告的更多信息。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="TDPPT578"></a><a id="TDPPT579"></a><a id="TDPPT580"></a><a id="TDPPT577"></a><div class="props_rev_3"><a id="GUID-1FB8C39B-50D8-4507-9D27-A0E6F7650DA3" name="GUID-1FB8C39B-50D8-4507-9D27-A0E6F7650DA3"></a><h3 id="TDPPT-GUID-1FB8C39B-50D8-4507-9D27-A0E6F7650DA3" class="sect3"><span class="enumeration_section">10.5</span>监测和研究事故和错误</h3>
               <div>
                  <div class="section">
                     <p>随着数据的不断移动，在上载过程的各个阶段都会出现问题。仪表板报告事件和错误，以便您可以跟踪和解决问题。与Enterprise Manager最佳实践一致，您可以使用现有框架来管理事件，配置通知等。<a id="d19609e1035" class="indexterm-anchor"></a><a id="d19609e1039" class="indexterm-anchor"></a></p>
                     <p>仪表板的图形区域提供了仓库上载活动期间总体遇到的问题的概览视图。引发事件时，将<span class="bold">显示“查看事件”</span>链接;单击它以直接链接到事件管理器，您可以在其中深入研究详细信息。“引导式解决方案”部分提供了用于查看报告的任何仓库错误并返回AWR仓库仪表板的链接。
                     </p>
                     <p>要查看与特定数据库源相关的<span class="bold">错误</span> ，请在仪表板中选择数据库行，然后单击工具栏上的“ <span class="bold">查看错误</span> ”。
                     </p>
                     <p>错误通常由活动-AWR Warehouse加载，源数据库提取，传输分解。下面描述了一些更常见的错误和建议的解决方案。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1FB8C39B-50D8-4507-9D27-A0E6F7650DA3__GUID-F6816D7B-6F6E-48E0-AFF6-A0F2DA6185BA">AWR仓库加载错误</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><a id="d19609e1058" class="indexterm-anchor"></a><a id="d19609e1062" class="indexterm-anchor"></a>当AWR Warehouse上的SYSAUX表空间不足以容纳AWR快照的导入时，导入失败并出现以下错误：<a id="d19609e1065" class="indexterm-anchor"></a><a id="d19609e1067" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">ORA-20115：数据泵导入遇到错误：ORA-31626：作业不存在ORA-31633：无法创建主表“SYS.SYS_IMPORT_FULL_27”ORA-06512：在“SYS.DBMS_SYS_ERROR”，第95行ORA-06512：at “SYS.KUPV $ FT”，第1048行ORA-01658：无法为表空间SYSAUX ORA-31626中的段创建INITIAL范围：作业不存在</pre><p>增加SYSAUX表空间以解决此问题。</p>
                     <p>加载作业使用Data Pump导入AWR快照转储。数据泵作业使用主表来跟踪作业的进度。如果在导入期间发生错误，则主表保持不变。由于错误累积，主表也会累积，最终导致以下错误：</p><pre class="oac_no_warn" dir="ltr">ORA-20115：数据泵导入遇到错误：ORA-31634：作业已存在ORA-31664：默认情况下无法构造唯一作业名ORA-31634：作业已存在</pre><p>解决方案是从先前失败的作业中删除主表。查询<code class="codeph">dba_datapump_jobs</code>视图以查找<code class="codeph">NOT RUNNING</code>状态下的作业，如下所示：</p><pre class="oac_no_warn" dir="ltr">SELECT job_name FROM dba_datapump_jobs WHERE owner_name ='SYS'AND operation ='IMPORT'AND job_mode ='FULL'AND job_name like'SYS_IMPORT_％'AND state ='NOT RUNNING';</pre><div class="infoboxnote" id="GUID-1FB8C39B-50D8-4507-9D27-A0E6F7650DA3__GUID-77C81CAB-0689-4F38-A1EB-3AF60739E8E4">
                        <p class="notep1">警告：</p>
                        <p>可能存在查询返回的作业名称正由活动数据泵作业使用的情况。确保没有活动的数据泵作业，以避免错误地删除其主表。</p>
                     </div>
                     <p>启用AWR Warehouse功能的修补程序包含旧版主表的修复程序，因此在应用修补程序后不应遇到此问题。</p>
                     <p>当活动数据泵作业不正常退出（例如，它中止或数据库关闭）时，后续作业将失败并显示以下错误：</p><pre class="oac_no_warn" dir="ltr">ORA-39097：数据泵作业遇到意外错误-56935 ORA-39065：DISPATCH ORA-56935中的意外主进程异常：现有数据池作业使用不同版本的时区数据文件</pre><p>要解决此问题，请在数据库启动时检查数据库属性中的某些值并采取适当的操作，如下所示：</p><pre class="oac_no_warn" dir="ltr">SELECT property_name，property_value FROM sys.database_properties WHERE property_name in（'DST_UPGRADE_STATE'，'DST_SECONDARY_TT_VERSION'）;</pre><p>如果查询分别为命名属性返回<code class="codeph">'DATAPUMP'</code>和<code class="codeph">'&lt;&gt; 0'</code> ，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">exec dbms_dst.unload_secondary（）;</pre><div class="infoboxnote" id="GUID-1FB8C39B-50D8-4507-9D27-A0E6F7650DA3__GUID-A1EB5FFA-37CB-4A13-AC4C-DF6ECAC7CA73">
                        <p class="notep1">注意：</p>
                        <p>在源数据库提取期间也可能发生此数据泵错误。</p>
                     </div>
                     <p>当源数据库时区位于AWR Warehouse时区之前时，导入最新快照转储时会发生以下错误：</p><pre class="oac_no_warn" dir="ltr">ORA-20105：无法将AWR数据移至SYS ORA-06512：在“SYS.DBMS_SWRF_INTERNAL”，第4773行ORA-13555：未找到消息13555;产物= RDBMS;设施= ORA;参数：[end_time大于SYSDATE]</pre><p>无需采取任何行动。当AWR Warehouse的<code class="codeph">SYSDATE</code>超过转储文件的日期时，该问题会自行更正。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1FB8C39B-50D8-4507-9D27-A0E6F7650DA3__GUID-610AFD93-7400-43D8-A04E-39CB1A9DB1E2">源数据库提取错误</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>当源数据库上的SYSAUX表空间不足以容纳AWR快照的提取时，提取失败并出现以下错误：<a id="d19609e1131" class="indexterm-anchor"></a><a id="d19609e1135" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">ORA-20115：数据泵导出遇到错误：ORA-31626：作业不存在ORA-31633：无法创建主表“SYS.SYS_EXPORT_TABLE_08”ORA-06512：在“SYS.DBMS_SYS_ERROR”，第95行ORA-06512：at “SYS.KUPV $ FT”，第1048行ORA-01658：无法为表空间SYSAUX ORA-06512中的段创建INITIAL范围：在“SYS.DBMS_SWRF_INTERNAL”，第2159行ORA-31626：作业不存在</pre><p>增加SYSAUX表空间以解决此问题。</p>
                     <p>提取作业使用Data Pump导出AWR快照转储。数据泵作业使用主表来跟踪作业的进度。如果在导出期间发生错误，则主表保持不变。由于错误累积，主表也会累积，最终导致以下错误：</p><pre class="oac_no_warn" dir="ltr">ORA-20115：数据泵导入遇到错误：ORA-31634：作业已存在ORA-31664：默认情况下无法构造唯一作业名ORA-31634：作业已存在</pre><p>解决方案是从先前失败的作业中删除主表。查询<code class="codeph">dba_datapump_jobs</code>视图以查找<code class="codeph">NOT RUNNING</code>状态下的作业，如下所示：</p><pre class="oac_no_warn" dir="ltr">SELECT job_name FROM dba_datapump_jobs WHERE owner_name ='SYS'AND operation ='EXPORT'AND job_mode ='TABLE'AND job_name like'SYS_EXPORT_％'AND state ='NOT RUNNING';</pre><div class="infoboxnote" id="GUID-1FB8C39B-50D8-4507-9D27-A0E6F7650DA3__GUID-44A25D36-0C90-4EC8-8C50-D961DAD15728">
                        <p class="notep1">警告：</p>
                        <p>可能存在查询返回的作业名称正由活动数据泵作业使用的情况。确保没有活动的数据泵作业，以避免错误地删除其主表。</p>
                     </div>
                     <p>启用AWR Warehouse功能的修补程序包含旧版主表的修复程序，因此在应用修补程序后不应遇到此问题。</p>
                     <p>有关源数据库提取期间的另一个潜在错误，请参阅AWR仓库负载错误下的数据泵错误。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1FB8C39B-50D8-4507-9D27-A0E6F7650DA3__GUID-49575DA0-9F7E-4853-BC10-B540CE2F3DBA">转移错误</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p><a id="d19609e1167" class="indexterm-anchor"></a><a id="d19609e1171" class="indexterm-anchor"></a>如果来自单个源数据库的许多转储文件正在等待加载到AWR Warehouse中，并且它们的总大小超过阈值（1 GB），则会出现以下错误：</p><pre class="oac_no_warn" dir="ltr">源数据库中转储文件的总大小超过阈值（大小：xxx MB，阈值：xxx MB）</pre><p>将转储文件加载到AWR Warehouse中似乎存在潜在问题，导致转储文件积压。检查并解决任何未完成的加载错误，以便继续导入。</p>
                     <p>如果等待加载到AWR Warehouse中的所有源数据库的转储文件总大小超过阈值（30 GB），则会出现以下错误：</p><pre class="oac_no_warn" dir="ltr">AWR Warehouse上的转储文件总大小超过阈值（大小：xxx MB，阈值：xxx MB）</pre><p>确定加载队列中存在待处理转储文件积压的原因。解决积压问题将使负载恢复。</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="TDPPT581"></a><div class="props_rev_3"><a id="GUID-8A6D8C16-00EE-415D-A1C2-6AA9F60B977A" name="GUID-8A6D8C16-00EE-415D-A1C2-6AA9F60B977A"></a><h3 id="TDPPT-GUID-8A6D8C16-00EE-415D-A1C2-6AA9F60B977A" class="sect3"><span class="enumeration_section">10.6</span> AWR仓库最佳实践</h3>
               <div>
                  <p>Oracle从仓库数据库角度和企业管理器角度提供最佳实践建议。</p>
               </div><a id="TDPPT582"></a><div class="props_rev_3"><a id="GUID-679D11F3-B2BB-4BF5-916C-0670AB24D442" name="GUID-679D11F3-B2BB-4BF5-916C-0670AB24D442"></a><h4 id="TDPPT-GUID-679D11F3-B2BB-4BF5-916C-0670AB24D442" class="sect4"><span class="enumeration_section">10.6.1</span>数据库最佳实践</h4>
                  <div>
                     <p>仓库数据库视角的最佳实践涉及以下方面：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-automatic-workload-repository-warehouse.html#GUID-66722833-F080-4966-813C-57244C36AE81">内存管理</a></p>
                        </li>
                        <li>
                           <p><a href="using-automatic-workload-repository-warehouse.html#GUID-1FCD72C9-D5A2-4DEF-8720-E510989BFB3A">存储要求</a></p>
                        </li>
                        <li>
                           <p><a href="using-automatic-workload-repository-warehouse.html#GUID-5A47BC31-7B73-4B2D-A3A4-5C026082D186">备用</a></p>
                        </li>
                        <li>
                           <p><a href="using-automatic-workload-repository-warehouse.html#GUID-02BFE841-D64B-454D-8832-46DF1A631D93">重做日志大小</a></p>
                        </li>
                        <li>
                           <p><a href="using-automatic-workload-repository-warehouse.html#GUID-61765875-44FA-4EAD-9464-D706673B9106">统计数据收集</a></p>
                        </li>
                        <li>
                           <p><a href="using-automatic-workload-repository-warehouse.html#GUID-C61A7BE0-8411-43ED-AD26-31FB7BA94E2A">job_queue_processes参数</a></p>
                        </li>
                        <li>
                           <p><a href="using-automatic-workload-repository-warehouse.html#GUID-ACE8F545-7434-4124-A8EF-45970C854D28">访问控制</a></p>
                        </li>
                     </ul>
                  </div><a id="TDPPT583"></a><div class="props_rev_3"><a id="GUID-66722833-F080-4966-813C-57244C36AE81" name="GUID-66722833-F080-4966-813C-57244C36AE81"></a><h5 id="TDPPT-GUID-66722833-F080-4966-813C-57244C36AE81" class="sect5"><span class="enumeration_section">10.6.1.1</span>内存管理</h5>
                     <div>
                        <p><a id="d19609e1466" class="indexterm-anchor"></a><a id="d19609e1470" class="indexterm-anchor"></a> Oracle建议您使用仓库数据库上的“自动内存管理”来根据需要对其进行管理和调整。为此，请设置目标内存大小初始化参数（MEMORY_TARGET）和可选的最大内存大小初始化参数（MEMORY_MAX_TARGET）。目标内存量取决于仓库的用户数。将其设置为至少2GB并根据负载和其他要求根据需要进行修改。<a id="d19609e1473" class="indexterm-anchor"></a><a id="d19609e1475" class="indexterm-anchor"></a></p>
                        <p>使用手动内存管理时，将SGA和实例PGA的大小设置为足够高的值，最小值为2GB。如果使用手动共享内存管理，请将各个SGA组件的大小（尤其是缓冲区高速缓存大小和共享池大小）设置为足够高的值。</p>
                     </div>
                  </div><a id="TDPPT584"></a><div class="props_rev_3"><a id="GUID-1FCD72C9-D5A2-4DEF-8720-E510989BFB3A" name="GUID-1FCD72C9-D5A2-4DEF-8720-E510989BFB3A"></a><h5 id="TDPPT-GUID-1FCD72C9-D5A2-4DEF-8720-E510989BFB3A" class="sect5"><span class="enumeration_section">10.6.1.2</span>存储要求</h5>
                     <div>
                        <p><a id="d19609e1560" class="indexterm-anchor"></a><a id="d19609e1564" class="indexterm-anchor"></a>默认情况下，Oracle数据库每小时捕获一次快照;快照大小因数据库负载而异。平均10个并发活动会话的典型系统每个快照可能需要1MB到2MB。因此，一小时默认快照间隔每天大约需要24MB到48MB。
                        </p>
                        <p>AWR数据存储在SYSAUX表空间中。所需的表空间空间取决于源数据库的数量。对源数据库使用典型负载的默认设置每个源数据库每天大约需要24MB到48MB。<a id="d19609e1569" class="indexterm-anchor"></a><a id="d19609e1571" class="indexterm-anchor"></a></p>
                        <p>要更准确地读取空间要求，请运行位于<code class="codeph">ORACLE_HOME/rdbms/admin</code>目录中的<code class="codeph">awrinfo.sql</code>脚本。特别是，请参阅“AWR快照的大小估计”部分，其中包含“AWR大小/天”和“AWR大小/周”值。在源数据库上，这些值表示在该数据库上生成的AWR数据的平均大小。在AWR Warehouse数据库中，这些值表示从所有源数据库导入的AWR数据的平均大小。使用这些值来估计仓库空间要求。当然，随着更多源数据库被添加到仓库中，存储其AWR数据所需的空间也会增加。<a id="d19609e1583" class="indexterm-anchor"></a></p>
                        <p>使用具有冗余磁盘组的自动存储管理（ASM）和小于40毫秒的“平均同步单块读取延迟”。DBA_HIST_SYSMETRIC_SUMMARY视图包含与存储和I / O相关的此指标和其他指标。<a id="d19609e1587" class="indexterm-anchor"></a></p>
                        <p>此外，确保仓库主机上有足够的可用磁盘空间（大约50GB），以存储包含来自源数据库的传入AWR数据的转储文件，直到可以将数据加载到仓库数据库中。</p>
                     </div>
                  </div><a id="TDPPT585"></a><div class="props_rev_3"><a id="GUID-5A47BC31-7B73-4B2D-A3A4-5C026082D186" name="GUID-5A47BC31-7B73-4B2D-A3A4-5C026082D186"></a><h5 id="TDPPT-GUID-5A47BC31-7B73-4B2D-A3A4-5C026082D186" class="sect5"><span class="enumeration_section">10.6.1.3</span>备份</h5>
                     <div>
                        <p>Oracle建议您定期备份AWR Warehouse，以防止任何数据丢失。使用Data Guard和RMAN可确保高可用性和数据保护。<a id="d19609e1674" class="indexterm-anchor"></a><a id="d19609e1676" class="indexterm-anchor"></a></p>
                     </div>
                  </div><a id="TDPPT586"></a><div class="props_rev_3"><a id="GUID-02BFE841-D64B-454D-8832-46DF1A631D93" name="GUID-02BFE841-D64B-454D-8832-46DF1A631D93"></a><h5 id="TDPPT-GUID-02BFE841-D64B-454D-8832-46DF1A631D93" class="sect5"><span class="enumeration_section">10.6.1.4</span>重做日志大小</h5>
                     <div>
                        <p>正确调整重做日志的大小非常重要。小的重做导致频繁的日志切换影响数据库性能。AWR Warehouse中生成的重做量因基于将AWR数据移入仓库的源数据库的数量而异。Oracle建议至少使用1GB重做日志大小。<a id="d19609e1760" class="indexterm-anchor"></a></p>
                     </div>
                  </div><a id="TDPPT587"></a><div class="props_rev_3"><a id="GUID-61765875-44FA-4EAD-9464-D706673B9106" name="GUID-61765875-44FA-4EAD-9464-D706673B9106"></a><h5 id="TDPPT-GUID-61765875-44FA-4EAD-9464-D706673B9106" class="sect5"><span class="enumeration_section">10.6.1.5</span>统计数据收集</h5>
                     <div>
                        <p>为SYS和DBSNMP架构定期收集统计数据，每天至少一次，以确保统计数据准确无误。<a id="d19609e1844" class="indexterm-anchor"></a></p>
                     </div>
                  </div><a id="TDPPT588"></a><div class="props_rev_3"><a id="GUID-C61A7BE0-8411-43ED-AD26-31FB7BA94E2A" name="GUID-C61A7BE0-8411-43ED-AD26-31FB7BA94E2A"></a><h5 id="TDPPT-GUID-C61A7BE0-8411-43ED-AD26-31FB7BA94E2A" class="sect5"><span class="enumeration_section">10.6.1.6</span> job_queue_processes参数</h5>
                     <div>
                        <p>将JOB_QUEUE_PROCESSES设置为大于0的值。Oracle调度程序作业负责导入AWR数据。设置参数可确保创建作业从站以运行调度程序作业。<a id="d19609e1929" class="indexterm-anchor"></a></p>
                     </div>
                  </div><a id="TDPPT589"></a><div class="props_rev_3"><a id="GUID-ACE8F545-7434-4124-A8EF-45970C854D28" name="GUID-ACE8F545-7434-4124-A8EF-45970C854D28"></a><h5 id="TDPPT-GUID-ACE8F545-7434-4124-A8EF-45970C854D28" class="sect5"><span class="enumeration_section">10.6.1.7</span>访问控制</h5>
                     <div>
                        <p>确保用户无法直接访问仓库数据库，因为这将绕过企业管理器安全模型。Enterprise Manager中的AWR Warehouse控制台具有一个访问控制机制，用于控制谁可以查看AWR Warehouse中的数据以及哪些源数据库。</p>
                     </div>
                  </div>
               </div><a id="TDPPT590"></a><div class="props_rev_3"><a id="GUID-8C01FF36-0EEA-49F2-A368-9512D499BE66" name="GUID-8C01FF36-0EEA-49F2-A368-9512D499BE66"></a><h4 id="TDPPT-GUID-8C01FF36-0EEA-49F2-A368-9512D499BE66" class="sect4"><span class="enumeration_section">10.6.2</span>企业管理器最佳实践</h4>
                  <div>
                     <p>企业管理器视角的最佳实践涉及以下方面：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="using-automatic-workload-repository-warehouse.html#GUID-2ED2B31F-5024-4F32-A735-326C8F6199B2">AWR仓库凭证</a></p>
                        </li>
                        <li>
                           <p><a href="using-automatic-workload-repository-warehouse.html#GUID-2B49A50B-0930-46F9-8A8A-0EAA6F9B39CC">源数据库凭据</a></p>
                        </li>
                        <li>
                           <p><a href="using-automatic-workload-repository-warehouse.html#GUID-9BF5049B-3466-4357-9FDE-0FD6CC43D428">在AWR仓库上的分段位置</a></p>
                        </li>
                        <li>
                           <p><a href="using-automatic-workload-repository-warehouse.html#GUID-1DBF0A22-06AC-4E6F-A3DF-963630ADDFB7">网络延迟</a></p>
                        </li>
                     </ul>
                  </div><a id="TDPPT591"></a><div class="props_rev_3"><a id="GUID-2ED2B31F-5024-4F32-A735-326C8F6199B2" name="GUID-2ED2B31F-5024-4F32-A735-326C8F6199B2"></a><h5 id="TDPPT-GUID-2ED2B31F-5024-4F32-A735-326C8F6199B2" class="sect5"><span class="enumeration_section">10.6.2.1</span> AWR仓库凭证</h5>
                     <div>
                        <p><a id="d19609e2197" class="indexterm-anchor"></a>将企业管理器目标配置为AWR Warehouse Repository时，请选择两个凭据：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>数据库凭据-AWR Warehouse需要SYSDBA凭据。</p>
                           </li>
                           <li>
                              <p>数据库主机凭据 - 选择对转储文件分段位置具有写入权限的凭据。默认的分段位置是代理程序用户具有必要权限的代理程序状态目录。</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="TDPPT592"></a><div class="props_rev_3"><a id="GUID-2B49A50B-0930-46F9-8A8A-0EAA6F9B39CC" name="GUID-2B49A50B-0930-46F9-8A8A-0EAA6F9B39CC"></a><h5 id="TDPPT-GUID-2B49A50B-0930-46F9-8A8A-0EAA6F9B39CC" class="sect5"><span class="enumeration_section">10.6.2.2</span>源数据库凭据</h5>
                     <div>
                        <p>在将源数据库目标添加到AWR Warehouse Repository之前，请为每个源数据库及其主机设置Preferred Credentials（Normal Credentials应该足够）。这有助于一次添加多个源数据库（在“搜索和选择：数据库”对话框中选择多个数据库）。</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>数据库凭据 - 数据库用户需要以下内容：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>DBA角色</p>
                                 </li>
                                 <li>
                                    <p>对<code class="codeph">SYS.DBMS_SWRF_INTERNAL</code>包执行权限</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>数据库主机凭据 - 用户应与代理用户相同。</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="TDPPT593"></a><div class="props_rev_3"><a id="GUID-9BF5049B-3466-4357-9FDE-0FD6CC43D428" name="GUID-9BF5049B-3466-4357-9FDE-0FD6CC43D428"></a><h5 id="TDPPT-GUID-9BF5049B-3466-4357-9FDE-0FD6CC43D428" class="sect5"><span class="enumeration_section">10.6.2.3</span> AWR仓库上的暂存位置</h5>
                     <div>
                        <p>源数据库中的AWR数据作为转储文件移动到仓库数据库主机上的分段位置。您可以在设置AWR Warehouse时配置分段位置。对于单实例数据库，该位置默认为代理状态目录。对于群集数据库，您必须指定所有节点均可访问的位置。<a id="d19609e2391" class="indexterm-anchor"></a></p>
                     </div>
                  </div><a id="TDPPT594"></a><div class="props_rev_3"><a id="GUID-1DBF0A22-06AC-4E6F-A3DF-963630ADDFB7" name="GUID-1DBF0A22-06AC-4E6F-A3DF-963630ADDFB7"></a><h5 id="TDPPT-GUID-1DBF0A22-06AC-4E6F-A3DF-963630ADDFB7" class="sect5"><span class="enumeration_section">10.6.2.4</span>网络延迟</h5>
                     <div>
                        <p><a id="d19609e2476" class="indexterm-anchor"></a> AWR Warehouse使用代理到代理文件传输方法将转储文件从源数据库移动到仓库数据库主机。源代理主机和仓库代理主机之间的连接应具有较低的网络延迟，以避免传输过程中的延迟和问题。<a id="d19609e2479" class="indexterm-anchor"></a></p>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
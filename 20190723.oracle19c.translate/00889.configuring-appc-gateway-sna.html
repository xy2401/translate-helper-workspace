<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>使用SNA通信协议配置网关</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Installation and Configuration Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Installation and Configuration Guide for IBM AIX on POWER Systems (64-Bit), Linux x86-64, Oracle Solaris on SPARC (64-Bit), and HP-UX Itanium"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-gateway-appc-installation-and-configuration-guide-aix-5l-based-systems-64-bit-hp-ux-itanium-solaris-operating-system-sparc-64-bit-linux-x86-and-linux-x86-64.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-16T19:10:33-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="F18241-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="appc-gateway-config-sna-solaris.html" title="Previous" type="text/html"></link>
      <link rel="next" href="appc-gateway-config-oltp.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Gateway for APPC Installation and Configuration Guide for AIX 5L Based Systems (64-Bit), HP-UX Itanium, Solaris Operating System (SPARC 64-Bit), Linux x86, and Linux x86-64"></meta>
    <meta name="dcterms.isVersionOf" content="APPCI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="appc-gateway-config-sna-solaris.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="appc-gateway-config-oltp.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">安装和配置指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用SNA通信协议配置网关</li>
            </ol>
            <a id="GUID-945BBB21-1C48-41FE-A909-D22B9874EBE3" name="GUID-945BBB21-1C48-41FE-A909-D22B9874EBE3"></a><a id="APPCI216"></a>
            
            <h2 id="APPCI-GUID-945BBB21-1C48-41FE-A909-D22B9874EBE3" class="sect2"><span class="enumeration_chapter">9</span>使用SNA通信协议配置网关</h2>
         </header>
         <div class="ind">
            <div>
               <p>以下主题描述如何在基于UNIX的平台上使用SNA协议为网关配置Oracle数据库。它还向您展示了如何配置commit-confirm，如果您选择实现它。</p>
               <p>这些主题提供了验证网关组件的安装和配置所需的步骤，包括可选的commit-confirm。</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="configuring-appc-gateway-sna.html#GUID-6DED1EB3-BEE6-491E-AD74-CBFFE656883C">在你开始之前</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-appc-gateway-sna.html#GUID-DB5EF405-1993-4D5A-AB38-834B75C9E31E">准备配置网关安装/升级</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-appc-gateway-sna.html#GUID-C60EA44C-85E5-45FD-8B22-CDE441C0B82D">Oracle数据库配置：首次网关安装</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-appc-gateway-sna.html#GUID-48D53BAD-4F1D-4789-842A-00FAE311B565">从以前的网关升级或迁移Oracle数据库</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-appc-gateway-sna.html#GUID-0323371A-CA16-4CC7-9055-3D136A8314A0">配置Oracle数据库网关共存</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-appc-gateway-sna.html#GUID-0DE22027-F985-4E80-982C-F5521271D288">允许多个用户的可选配置步骤</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-appc-gateway-sna.html#GUID-326E95E9-25DC-46E0-8D1F-63344DBB1CF4">配置网关</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-appc-gateway-sna.html#GUID-544B3014-8746-41E6-9132-12E473D38254">配置提交确认</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-appc-gateway-sna.html#GUID-B0F01C9F-3BBB-4579-8B3D-ACCCE3CCED56">验证网关安装和OLTP配置</a></p>
                  </li>
                  <li>
                     <p><a href="configuring-appc-gateway-sna.html#GUID-835A25DB-1E5B-485C-9054-E920CC262570">执行安装后程序</a></p>
                  </li>
               </ul>
               <p><a id="d10176e84" class="indexterm-anchor"></a><a id="d10176e88" class="indexterm-anchor"></a><a id="d10176e92" class="indexterm-anchor"></a>使用SNA为APPC配置Oracle数据库网关涉及使用以下组件：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p>Oracle数据库</p>
                  </li>
                  <li>
                     <p>UNIX系统</p>
                  </li>
                  <li>
                     <p>网络</p>
                  </li>
                  <li>
                     <p>OLTP</p>
                  </li>
               </ul>
            </div><a id="APPCI217"></a><div class="props_rev_3"><a id="GUID-6DED1EB3-BEE6-491E-AD74-CBFFE656883C" name="GUID-6DED1EB3-BEE6-491E-AD74-CBFFE656883C"></a><h3 id="APPCI-GUID-6DED1EB3-BEE6-491E-AD74-CBFFE656883C" class="sect3">在你开始之前</h3>
               <div>
                  <p>使用SNA通信协议的网关配置要求您输入系统特有的参数，以正确配置网关和SNA通信接口。</p>
                  <p>有关列出在完成配置过程之前需要了解的安装参数的工作<a href="appc-gateway-configuration-worksheet.html#GUID-2660834A-3E7D-4288-BDAA-AC38EC4D6230">表</a> ，请参阅<a href="appc-gateway-configuration-worksheet.html#GUID-2660834A-3E7D-4288-BDAA-AC38EC4D6230">配置工作</a>表。在开始之前，请让网络管理员为您提供这些唯一的参数名称。
                  </p>
               </div>
            </div><a id="APPCI362"></a><a id="APPCI363"></a><a id="APPCI364"></a><a id="APPCI218"></a><div class="props_rev_3"><a id="GUID-DB5EF405-1993-4D5A-AB38-834B75C9E31E" name="GUID-DB5EF405-1993-4D5A-AB38-834B75C9E31E"></a><h3 id="APPCI-GUID-DB5EF405-1993-4D5A-AB38-834B75C9E31E" class="sect3">准备配置网关安装/升级</h3>
               <div>
                  <div class="section">
                     <p>在安装或升级或迁移网关时，有三种方法可以建立网关 -  Oracle数据库关系：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="configuring-appc-gateway-sna.html#GUID-DB5EF405-1993-4D5A-AB38-834B75C9E31E__I1012371">当Oracle数据库和网关安装在相同的ORACLE_HOME中时</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-appc-gateway-sna.html#GUID-DB5EF405-1993-4D5A-AB38-834B75C9E31E__I1012376">在单独的系统上安装Oracle数据库和网关时</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-appc-gateway-sna.html#GUID-DB5EF405-1993-4D5A-AB38-834B75C9E31E__I1012381">当Oracle数据库和网关位于同一系统但位于不同目录中时</a></p>
                        </li>
                     </ul>
                     <p><a id="d10176e202" class="indexterm-anchor"></a><a id="d10176e206" class="indexterm-anchor"></a><a id="d10176e210" class="indexterm-anchor"></a>根据网关和Oracle数据库的位置，您可能需要将某些网关管理文件传输到安装Oracle数据库的位置。
                     </p>
                     <p>按照下面列出的网关-Oracle数据库位置组合对应的说明进行操作。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-DB5EF405-1993-4D5A-AB38-834B75C9E31E__I1012371">
                     <p class="subhead2" id="GUID-DB5EF405-1993-4D5A-AB38-834B75C9E31E__GUID-FCFA7BC4-8110-4426-8F6B-B68806B1AD47">当Oracle数据库和网关安装在相同的ORACLE_HOME中时</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>您不需要传输文件。继续<a href="configuring-appc-gateway-sna.html#GUID-C60EA44C-85E5-45FD-8B22-CDE441C0B82D">Oracle数据库配置：首次网关安装</a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-DB5EF405-1993-4D5A-AB38-834B75C9E31E__I1012376">
                     <p class="subhead2" id="GUID-DB5EF405-1993-4D5A-AB38-834B75C9E31E__GUID-9BBDC1F1-7E57-4094-89D6-19D1388A2D7A">在单独的系统上安装Oracle数据库和网关时</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>如果Oracle数据库和网关安装在不同的系统上，则需要执行以下任务：</p>
                     <ol>
                        <li>
                           <p>在网关<code class="codeph">$ORACLE_HOME/dg4appc/admin</code>目录中找到网关管理文件。此目录中包含<code class="codeph">.sql</code> ， <code class="codeph">.pkh</code> ， <span class="bold"> </span>或<code class="codeph">.pkb</code>后缀必须复制到Oracle数据库Oracle主目录中具有类似名称的目录中。
                           </p>
                        </li>
                        <li>
                           <p>现在，在网关的<code class="codeph">$ORACLE_HOME/dg4appc/demo</code>目录中找到网关演示文件和子目录。将<code class="codeph">pgavsn.sql</code>和<code class="codeph">pgaecho.sql</code>文件复制到Oracle数据库中名称相似的目录中。
                           </p>
                        </li>
                        <li>
                           <p>在远程主机上复制与已安装的OLTP相关的其他子目录和文件。例如，如果您将CICS作为唯一的OLTP，则将<code class="codeph">$ORACLE_HOME/dg4appc/demo/CICS</code>网关文件复制到Oracle数据库中名称相似的目录中。
                           </p>
                           <div class="infoboxnote" id="GUID-DB5EF405-1993-4D5A-AB38-834B75C9E31E__GUID-30E48FE2-2823-4878-A651-CF1F0549A06C">
                              <p class="notep1">注意：</p>
                              <p>在从<code class="codeph">$ORACLE_HOME/dg4appc/demo</code>目录传输文件之前，请确保已生成所需的TIP。您还需要转移TIP。
                              </p>
                              <p>有关使用Procedural Gateway Administrative Utility（PGAU）生成TIP的信息，请参阅“ <a href="../appug/pga-utility-oracle-database-gateway-appc.html#APPUG200" target="_blank"><span class="italic">Oracle Database Gateway for APPC用户指南”</span></a> 。
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-DB5EF405-1993-4D5A-AB38-834B75C9E31E__I1012381">
                     <p class="subhead2" id="GUID-DB5EF405-1993-4D5A-AB38-834B75C9E31E__GUID-0D156646-C9FA-4219-B334-48A06AF6ED00">当Oracle数据库和网关位于同一系统但位于不同目录中时</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>您必须将网关Oracle主目录更改为Oracle数据库的Oracle主目录。</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>例如，如果您的网关Oracle主目录设置如下：</span><div><pre class="oac_no_warn" dir="ltr">$ echo $ ORACLE_HOME /oracle/pga/12.2</pre><p>并且您的服务器Oracle主目录位于<code class="codeph">/oracle/pga/12.2</code>目录中，然后您需要执行以下操作：</p><pre class="oac_no_warn" dir="ltr">$ ORACLE_HOME = / oracle / pga / 12.2;导出ORACLE_HOME</pre></div>
                     </li>
                     <li class="stepexpand"><span>现在使用以下命令创建目录：<a id="d10176e311" class="indexterm-anchor"></a></span><div><pre class="oac_no_warn" dir="ltr">$ cd $ ORACLE_HOME $ mkdir dg4appc $ mkdir dg4appc / admin</pre></div>
                     </li>
                     <li class="stepexpand"><span>使用系统上可用的任何文件传输机制将所有<code class="codeph">.sql</code> ， <code class="codeph">.pkh</code>和<code class="codeph">.pkb</code>文件从网关Oracle home <code class="codeph">$ORACLE_HOME/dg4appc/admin</code>目录<code class="codeph">$ORACLE_HOME/dg4appc/admin</code>到Oracle数据库Oracle主目录<code class="codeph">$ORACLE_HOME/dg4appc/admin</code>目录。</span></li>
                     <li class="stepexpand"><span>您还可以将演示文件从网关目录传输到Oracle数据库目录。将文件和目录以递归方式从网关Oracle home <code class="codeph">$ORACLE_HOME/dg4appc/demo</code>目录<code class="codeph">$ORACLE_HOME/dg4appc/demo</code>到Oracle数据库<code class="codeph">$ORACLE_HOME/dg4appc/demo</code>目录。</span><div>
                           <p>例如：</p><pre class="oac_no_warn" dir="ltr">$ cp -p -R /oracle/pga/12.2/dg4appc/demo $ ORACLE_HOME / dg4appc</pre><div class="infoboxnote" id="GUID-DB5EF405-1993-4D5A-AB38-834B75C9E31E__GUID-C1EBFCEB-5D4C-4C35-B35F-5C30A4BCC110">
                              <p class="notep1">注意：</p>
                              <p>在从<code class="codeph">$ORACLE_HOME/dg4appc/demo</code>目录传输文件之前，请确保已生成所需的TIP。您还需要转移TIP。
                              </p>
                              <p>有关使用PGAU生成TIP的信息，请参阅“ <a href="../appug/pga-utility-oracle-database-gateway-appc.html#APPUG200" target="_blank"><span class="italic">Oracle Database Gateway for APPC用户指南”</span></a> 。</p>
                           </div>
                        </div>
                     </li>
                  </ol>
                  <div class="section">
                     <p>如果这是首次安装，请继续<a href="configuring-appc-gateway-sna.html#GUID-C60EA44C-85E5-45FD-8B22-CDE441C0B82D">Oracle数据库配置：首次网关安装</a> 。
                     </p>
                     <p>如果这是升级，请继续<a href="configuring-appc-gateway-sna.html#GUID-48D53BAD-4F1D-4789-842A-00FAE311B565">从以前的网关升级或迁移Oracle数据库</a> 。
                     </p>
                     <p>执行这些步骤后，您可能希望执行“ <a href="configuring-appc-gateway-sna.html#GUID-0DE22027-F985-4E80-982C-F5521271D288">允许多个用户</a>的<a href="configuring-appc-gateway-sna.html#GUID-0DE22027-F985-4E80-982C-F5521271D288">可选配置步骤”</a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="APPCI219"></a><div class="props_rev_3"><a id="GUID-C60EA44C-85E5-45FD-8B22-CDE441C0B82D" name="GUID-C60EA44C-85E5-45FD-8B22-CDE441C0B82D"></a><h3 id="APPCI-GUID-C60EA44C-85E5-45FD-8B22-CDE441C0B82D" class="sect3">Oracle数据库配置：首次网关安装</h3>
               <div>
                  <div class="section">
                     <p>请按照以下步骤配置您的<a id="d10176e417" class="indexterm-anchor"></a> Oracle数据库，如果您是第一次安装Oracle Database Gateway for APPC：</p>
                     <ol>
                        <li>
                           <p>确保<a id="d10176e428" class="indexterm-anchor"></a><a id="d10176e430" class="indexterm-anchor"></a><a id="d10176e434" class="indexterm-anchor"></a>您的Oracle数据库上已安装<code class="codeph">UTL_RAW</code> PL / SQL包。<a id="d10176e443" class="indexterm-anchor"></a><a id="d10176e449" class="indexterm-anchor"></a>所有PGAU生成的TIP规范都使用<code class="codeph">UTL_RAW</code> ，它提供了操作原始数据的例程。
                           </p>
                           <ol type="a">
                              <li>
                                 <p>使用<a id="d10176e461" class="indexterm-anchor"></a> SQL * Plus以<code class="codeph">SYS</code>用户身份连接到Oracle数据库。
                                 </p>
                              </li>
                              <li>
                                 <p>从SQL * Plus，输入以下命令：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; DESCRIBE UTL_RAW</pre><p><code class="codeph">DESCRIBE</code>语句在屏幕上生成输出。如果浏览输出，则应该看到一些函数，包括比较函数。如果没有看到此输出，请执行下面的步骤<a href="configuring-appc-gateway-sna.html#GUID-C60EA44C-85E5-45FD-8B22-CDE441C0B82D__I1009705">1.d</a>继续安装<code class="codeph">UTL_RAW</code> 。
                                 </p>
                                 <p>如果<a id="d10176e487" class="indexterm-anchor"></a><a id="d10176e491" class="indexterm-anchor"></a> <code class="codeph">DESCRIBE</code>语句表示成功，然后是Oracle数据库<a id="d10176e496" class="indexterm-anchor"></a> <code class="codeph">UTL_RAW</code>安装<code class="codeph">UTL_RAW</code> ，您可以继续执行步骤<a href="configuring-appc-gateway-sna.html#GUID-C60EA44C-85E5-45FD-8B22-CDE441C0B82D__I1009709">2</a> 。
                                 </p>
                              </li>
                              <li>
                                 <p>使用<a id="d10176e507" class="indexterm-anchor"></a> SQL * Plus以SYS用户身份连接到Oracle数据库。
                                 </p>
                              </li>
                              <li id="GUID-C60EA44C-85E5-45FD-8B22-CDE441C0B82D__I1009705">
                                 <p>从SQL * Plus，运行<a id="d10176e515" class="indexterm-anchor"></a><a id="d10176e519" class="indexterm-anchor"></a> <code class="codeph">utlraw.sql</code>和<a id="d10176e526" class="indexterm-anchor"></a><a id="d10176e528" class="indexterm-anchor"></a> Oracle数据库<code class="codeph">$ORACLE_HOME/rdbms/admin</code>目录中的<code class="codeph">prvtrawb.plb</code>脚本，顺序如下：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; @ $ ORACLE_HOME / rdbms / admin / utlraw.sql SQL&gt; @ $ ORACLE_HOME / rdbms / admin / prvtrawb.plb</pre></li>
                           </ol>
                        </li>
                        <li id="GUID-C60EA44C-85E5-45FD-8B22-CDE441C0B82D__I1009709">
                           <p>确保<a id="d10176e543" class="indexterm-anchor"></a><a id="d10176e545" class="indexterm-anchor"></a> DBMS_OUTPUT标准PL / SQL <a id="d10176e550" class="indexterm-anchor"></a><a id="d10176e552" class="indexterm-anchor"></a><a id="d10176e556" class="indexterm-anchor"></a>包已启用<a id="d10176e561" class="indexterm-anchor"></a> Oracle数据库。分发介质上的示例程序和安装验证程序使用此标准程序包。
                           </p>
                           <ol type="a">
                              <li>
                                 <p>如有必要，使用SQL * Plus以<code class="codeph">SYS</code>用户身份连接到Oracle数据库。
                                 </p>
                              </li>
                              <li>
                                 <p>从SQL * Plus，输入以下命令：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; DESCRIBE DBMS_OUTPUT</pre></li>
                           </ol>
                           <p>该<a id="d10176e580" class="indexterm-anchor"></a><a id="d10176e584" class="indexterm-anchor"></a> <code class="codeph">DESCRIBE</code>语句在屏幕上生成输出。如果浏览该输出，您应该看到一些功能，包括a <a id="d10176e591" class="indexterm-anchor"></a><a id="d10176e593" class="indexterm-anchor"></a> <code class="codeph">put_line</code>函数。
                           </p>
                           <p>如果没有看到此输出，则必须创建<code class="codeph">DBMS_OUTPUT</code>包。有关<code class="codeph">DBMS_OUTPUT</code>程序包的更多信息，请参阅<a href="../arpls/DBMS_OUTPUT.html#ARPLS036" target="_blank"><span class="italic">Oracle数据库PL / SQL程序包和类型参考</span></a> 。成功安装<code class="codeph">DBMS_OUTPUT</code>包后，发出<code class="codeph">DESCRIBE</code>语句。
                           </p>
                           <p>如果<code class="codeph">DESCRIBE</code>语句指示成功，则Oracle数据库已创建<code class="codeph">DBMS_OUTPUT</code> ，您可以继续执行步骤3。
                           </p>
                        </li>
                        <li>
                           <p>安装<a id="d10176e630" class="indexterm-anchor"></a><a id="d10176e634" class="indexterm-anchor"></a> <code class="codeph">UTL_PG</code> PL / SQL包。所有<a id="d10176e641" class="indexterm-anchor"></a><a id="d10176e647" class="indexterm-anchor"></a> PGAU生成的TIP规范使用<code class="codeph">UTL_PG</code> ，它提供了与原始数据进行数字转换的例程。
                           </p>
                           <ol type="a">
                              <li>
                                 <p>如有必要，使用SQL * Plus以<code class="codeph">SYS</code>用户身份连接到Oracle数据库。
                                 </p>
                              </li>
                              <li>
                                 <p>从SQL * Plus，运行<a id="d10176e665" class="indexterm-anchor"></a><a id="d10176e669" class="indexterm-anchor"></a> Oracle数据库<code class="codeph">$ORACLE_HOME/rdbms/admin</code>目录中的<code class="codeph">utlpg.sql</code>和<code class="codeph">prvtpgb.plb</code>脚本，顺序如下：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; @ $ ORACLE_HOME / rdbms / admin / utlpg.sql SQL&gt; @ $ ORACLE_HOME / rdbms / admin / prvtpgb.plb</pre></li>
                           </ol>
                        </li>
                        <li>
                           <p>我安装了异构服务（HS）目录。
                           </p>
                           <ol type="a">
                              <li>
                                 <p>如有必要，使用SQL * Plus以<code class="codeph">SYS</code>用户身份连接到Oracle数据库。
                                 </p>
                              </li>
                              <li>
                                 <p>输入以下命令：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; DESCRIBE HS_FDS_CLASS</pre><p><code class="codeph">DESCRIBE</code>语句在屏幕上生成输出。如果<code class="codeph">DESCRIBE</code>语句指示成功，则已在Oracle数据库上创建异构服务目录，您可以继续执行步骤5，否则仅在<code class="codeph">DESCRIBE</code>语句未指示成功时才执行下一步。步骤c创建异构服务目录。
                                 </p>
                              </li>
                              <li>
                                 <p>如果需要创建异构服务目录，请输入以下命令：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; $ ORACLE_HOME / rdbms / admin / caths.sql</pre></li>
                           </ol>
                        </li>
                        <li id="GUID-C60EA44C-85E5-45FD-8B22-CDE441C0B82D__I1008586">
                           <p><a id="d10176e724" class="indexterm-anchor"></a><a id="d10176e728" class="indexterm-anchor"></a>创建公共数据库链接以访问Oracle Database Gateway for APPC： <a id="d10176e735" class="indexterm-anchor"></a> 
                           </p>
                           <p>使用<a id="d10176e742" class="indexterm-anchor"></a> SQL * Plus连接到<a id="d10176e747" class="indexterm-anchor"></a> Oracle数据库作为<code class="codeph">SYSTEM</code>用户。您可以使用以下SQL * Plus <a id="d10176e753" class="indexterm-anchor"></a>表示Oracle数据库和网关是在同一系统上还是在不同系统上。在下面的示例中， <code class="codeph">pgasrv</code>是<span class="italic"><code class="codeph">tns_name_entry</code></span> ，稍后修改<code class="codeph">tnsnames.ora</code>文件时将分配给网关。
                           </p><pre class="oac_no_warn" dir="ltr">SQL&gt;使用' <span class="italic">PGASRV</span> '创建公共数据库链接PGA</pre></li>
                        <li>
                           <p>创建网关管理员用户<a id="d10176e777" class="indexterm-anchor"></a> <code class="codeph">PGAADMIN</code>并安装<a id="d10176e784" class="indexterm-anchor"></a> PG DD。</p>
                           <ol type="a">
                              <li>
                                 <p>使用SQL * Plus以<code class="codeph">SYSTEM</code>用户身份连接到Oracle数据库。
                                 </p>
                              </li>
                              <li>
                                 <p>从SQL * Plus，运行<code class="codeph">pgacr8au.sql</code> <a id="d10176e802" class="indexterm-anchor"></a><a id="d10176e804" class="indexterm-anchor"></a> <code class="codeph">$ORACLE_HOME/dg4appc/admin</code>目录中的脚本。此脚本创建<code class="codeph">PGAADMIN</code>用户标识。</p>
                                 <p>定义的初始密码<a id="d10176e818" class="indexterm-anchor"></a> <code class="codeph">PGAADMIN</code>是<code class="codeph">PGAADMIN</code> 。使用<a id="d10176e828" class="indexterm-anchor"></a><a id="d10176e830" class="indexterm-anchor"></a> <code class="codeph">ALTER USER</code>命令用于更改密码。有关密码问题的更多信息，请参阅<a href="../sqlrf/ALTER-USER.html#SQLRF01103" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。
                                 </p><pre class="oac_no_warn" dir="ltr">SQL&gt; @ $ ORACLE_HOME / dg4appc / admin / pgacr8au.sql</pre></li>
                              <li>
                                 <p>使用SQL * Plus以用户<code class="codeph">PGAADMIN</code>连接到Oracle数据库。</p>
                              </li>
                              <li>
                                 <p>从SQL * Plus，运行<code class="codeph">pgddcr8.sql</code> <a id="d10176e856" class="indexterm-anchor"></a><a id="d10176e858" class="indexterm-anchor"></a><a id="d10176e862" class="indexterm-anchor"></a> <code class="codeph">$ORACLE_HOME/dg4appc/admin</code>目录中的脚本。此脚本安装PG DD。</p><pre class="oac_no_warn" dir="ltr">SQL&gt; @ $ ORACLE_HOME / dg4appc / admin / pgddcr8.sql</pre></li>
                              <li>
                                 <p>从SQL * Plus，以<code class="codeph">SYS</code>用户身份连接到Oracle数据库。
                                 </p>
                              </li>
                              <li>
                                 <p><a id="d10176e882" class="indexterm-anchor"></a>授予执行权限<a id="d10176e887" class="indexterm-anchor"></a> <code class="codeph">DBMS_PIPE</code>到<code class="codeph">PGAADMIN</code> ：<a id="d10176e895" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">SQL&gt; GRANT EXECUTE DBMS_PIPE到PGAADMIN</pre></li>
                           </ol>
                        </li>
                        <li>
                           <p>安装<a id="d10176e904" class="indexterm-anchor"></a><a id="d10176e908" class="indexterm-anchor"></a> TIP跟踪访问PL / SQL例程。这些例程需要<a id="d10176e911" class="indexterm-anchor"></a>安装了DBMS_PIPES标准PL / SQL包<a id="d10176e914" class="indexterm-anchor"></a> <code class="codeph">PGAADMIN</code>具有执行权限。有关<code class="codeph">DBMS_PIPES</code>更多信息，请参阅<a href="../arpls/index.html" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> 。
                           </p>
                           <ol type="a">
                              <li>
                                 <p>如有必要，请使用SQL * Plus连接到<a id="d10176e932" class="indexterm-anchor"></a> Oracle数据库作为用户<code class="codeph">PGAADMIN</code> 。</p>
                              </li>
                              <li>
                                 <p>从SQL * Plus，在<code class="codeph">$ORACLE_HOME/dg4appc/admin</code>目录中运行<code class="codeph">pgatiptr.sql</code>脚本。这个脚本创建<a id="d10176e947" class="indexterm-anchor"></a> PL / SQL例程，可以调用它们来读取和清除由PGAU生成的跟踪信息<a id="d10176e952" class="indexterm-anchor"></a>提示规格。它还为这些例程创建公共同义词。该脚本会提示您输入必要的用户标识和密码。
                                 </p><pre class="oac_no_warn" dir="ltr">SQL&gt; @ $ ORACLE_HOME / dg4appc / admin / pgatiptr.sql</pre></li>
                           </ol>
                        </li>
                        <li>
                           <p>安装<code class="codeph">GPGLOCAL</code>包。编译和执行所有PGAU生成时需要此包<a id="d10176e965" class="indexterm-anchor"></a>提示规格。<a id="d10176e970" class="indexterm-anchor"></a><a id="d10176e974" class="indexterm-anchor"></a><a id="d10176e978" class="indexterm-anchor"></a>应该授予TIP开发人员执行权限<a id="d10176e983" class="indexterm-anchor"></a> <code class="codeph">GPGLOCAL</code> （请参阅<span class="q">“ <a href="configuring-appc-gateway-sna.html#GUID-0DE22027-F985-4E80-982C-F5521271D288__I1012843">允许多个用户的可选配置步骤</a> ”的</span>步骤<a href="config-appc-gateway-using-tcp-ip.html#GUID-76463C17-3AFF-497B-AF47-38E3BD4A788A__I1012843">3</a> ）。
                           </p>
                           <ol type="a">
                              <li>
                                 <p>使用SQL * Plus以用户身份连接到Oracle数据库<a id="d10176e1001" class="indexterm-anchor"></a> <code class="codeph">PGAADMIN</code> 。</p>
                              </li>
                              <li>
                                 <p>从SQL * Plus，在<code class="codeph">$ORACLE_HOME/dg4appc/admin</code>目录中运行<code class="codeph">gpglocal.pkh</code>脚本。该脚本编译<code class="codeph">GPGLOCAL</code>包规范。<a id="d10176e1020" class="indexterm-anchor"></a><a id="d10176e1022" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">SQL&gt; @ $ ORACLE_HOME / dg4appc / admin / gpglocal.pkh</pre></li>
                              <li>
                                 <p>从SQL * Plus，在<code class="codeph">$ORACLE_HOME/dg4appc/admin</code>目录中运行<code class="codeph">gpglocal.pkb</code>脚本。该脚本编译<code class="codeph">GPGLOCAL</code>包体。<a id="d10176e1042" class="indexterm-anchor"></a><a id="d10176e1044" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">SQL&gt; @ $ ORACLE_HOME / dg4appc / admin / gpglocal.pkb</pre></li>
                           </ol>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="APPCI220"></a><div class="props_rev_3"><a id="GUID-48D53BAD-4F1D-4789-842A-00FAE311B565" name="GUID-48D53BAD-4F1D-4789-842A-00FAE311B565"></a><h3 id="APPCI-GUID-48D53BAD-4F1D-4789-842A-00FAE311B565" class="sect3">从以前的网关升级或迁移Oracle数据库</h3>
               <div>
                  <div class="section">
                     <p>仅当您的系统上安装了以前版本的Oracle Database Gateway for APPC并且需要为网关的12 <span class="italic">c</span>版本2（12.2）配置它时，请遵循这些说明。
                     </p>
                     <p>将Oracle Database Gateway for APPC升级到当前版本级别，如下所示：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>使用SQL * Plus以<code class="codeph">SYS</code>用户身份连接到Oracle数据库。</span></li>
                     <li class="stepexpand"><span>安装<code class="codeph">UTL_RAW</code>包体。从SQL * Plus中，运行<code class="codeph">prvtrawb.plb</code> <a id="d10176e1118" class="indexterm-anchor"></a><a id="d10176e1120" class="indexterm-anchor"></a>来自<code class="codeph">$ORACLE_HOME/rdbms/admin</code>目录的脚本。该脚本升级<code class="codeph">UTL_RAW</code>包体。</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; @ $ ORACLE_HOME / rdbms / admin / prvtrawb.plb</pre></div>
                     </li>
                     <li class="stepexpand"><span>安装<code class="codeph">UTL_PG</code>包体。从SQL * Plus中，运行<code class="codeph">prvtpgb.plb</code> <a id="d10176e1143" class="indexterm-anchor"></a><a id="d10176e1147" class="indexterm-anchor"></a>来自<code class="codeph">$ORACLE_HOME/rdbms/admin</code>目录的脚本。 <a id="d10176e1155" class="indexterm-anchor"></a><a id="d10176e1160" class="indexterm-anchor"></a> 此脚本升级<code class="codeph">UTL_PG</code>程序包主体。</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; @ $ ORACLE_HOME / rdbms / admin / prvtpgb.plb</pre><p><code class="codeph">prvtrawb.plb</code>和<code class="codeph">prvtpgb.plb</code>脚本应该成功完成。如果由于规范不存在或无效而失败，请考虑按照以下部分的说明重新安装软件包规范。
                           </p>
                        </div>
                     </li>
                  </ol>
               </div><a id="APPCI385"></a><a id="APPCI386"></a><a id="APPCI221"></a><div class="props_rev_3"><a id="GUID-51835C81-F475-4490-B9A7-4E872EC86D38" name="GUID-51835C81-F475-4490-B9A7-4E872EC86D38"></a><h4 id="APPCI-GUID-51835C81-F475-4490-B9A7-4E872EC86D38" class="sect4">如果必须重新安装包规范</h4>
                  <div>
                     <div class="section">
                        <p>如果<a id="d10176e1223" class="indexterm-anchor"></a><a id="d10176e1229" class="indexterm-anchor"></a> <code class="codeph">UTL_RAW</code>或<a id="d10176e1238" class="indexterm-anchor"></a><a id="d10176e1244" class="indexterm-anchor"></a> <code class="codeph">UTL_PG</code>程序包已失效或卸载， <code class="codeph">prvtrawb.plb</code>和<code class="codeph">prvtpgb.plb</code>脚本可能无法成功完成，您可能必须重新安装<a id="d10176e1260" class="indexterm-anchor"></a><a id="d10176e1264" class="indexterm-anchor"></a><a id="d10176e1268" class="indexterm-anchor"></a>包装规格。
                        </p>
                        <p>如果确实重新安装了软件包规范，则任何相关对象（例如现有用户TIP和客户端应用程序）都将失效，并且随后将需要<a id="d10176e1277" class="indexterm-anchor"></a>要重新编译。这种影响是一次性能延迟，同时重新编译TIP和从属客户端应用程序。
                        </p>
                        <div class="infoboxnote" id="GUID-51835C81-F475-4490-B9A7-4E872EC86D38__GUID-B2627796-3BE1-48CA-834B-8B7D8996718A">
                           <p class="notep1">注意：</p>
                           <p>在继续重新安装包脚本之前，请确保您位于<code class="codeph">$ORACLE_HOME/dg4appc/admin</code>目录中。
                           </p>
                        </div>
                        <p>TIP在版本3.3中被拆分为单独的规范和正文文件，以避免在以后的版本中进行级联重新编译。</p>
                        <dl>
                           <dt class="dlterm"><a name="GUID-51835C81-F475-4490-B9A7-4E872EC86D38__GUID-181B9164-5FC3-407E-A2E0-2020A68CD63E"><!-- --></a>步骤1在继续PGAU升级之前运行以下脚本</dt>
                           <dd>
                              <p>从SQL * Plus，运行<code class="codeph">utlraw.sql</code>脚本：</p>
                              <ol>
                                 <li>
                                    <p>如有必要，使用SQL * Plus以<code class="codeph">SYS</code>用户身份连接到Oracle数据库。
                                    </p>
                                 </li>
                                 <li>
                                    <p>从SQL * Plus中，按以下顺序在Oracle数据库<code class="codeph">$ORACLE_HOME/rdbms/admin</code>目录中运行<code class="codeph">utlraw.sql</code>和<code class="codeph">utlpg.sql</code>脚本，以升级其各自的包规范： <a id="d10176e1325" class="indexterm-anchor"></a><a id="d10176e1329" class="indexterm-anchor"></a><a id="d10176e1333" class="indexterm-anchor"></a><a id="d10176e1337" class="indexterm-anchor"></a> 
                                    </p><pre class="oac_no_warn" dir="ltr">SQL&gt; @ $ ORACLE_HOME / rdbms / admin / utlraw.sql SQL&gt; @ $ ORACLE_HOME / rdbms / admin / utlpg.sql</pre></li>
                              </ol>
                           </dd>
                           <dt class="dlterm"><a name="GUID-51835C81-F475-4490-B9A7-4E872EC86D38__GUID-EFAADD91-92B4-4A3C-9846-64F37A6011AD"><!-- --></a>步骤2重复安装UTL_RAW和UTL_PG包体</dt>
                           <dd>
                              <p>脚本运行后，重复<a href="configuring-appc-gateway-sna.html#GUID-48D53BAD-4F1D-4789-842A-00FAE311B565">从以前的网关升级或迁移Oracle数据库中的</a>步骤2和3。然后继续执行标题为<span class="q">“ <a href="configuring-appc-gateway-sna.html#GUID-3100F0AE-E61D-485B-A37D-F5A023F6EF31">从先前网关版本升级PGAU</a> ”的部分</span> 。
                              </p>
                              <div class="infoboxnote" id="GUID-51835C81-F475-4490-B9A7-4E872EC86D38__GUID-8C266EC6-A473-4EE1-90CB-2A1B6E7416C2">
                                 <p class="notep1">注意：</p>
                                 <p>重新安装软件包规范后，必须重新编译TIP和从属客户端应用程序。有关编译TIP的信息，请参阅“ <a href="../appug/creating-tip-oracle-database-gateway-appc.html#APPUG300" target="_blank"><span class="italic">Oracle数据库网关APPC用户指南</span></a> ”第3章中的“编译提示”部分。
                                 </p>
                              </div>
                           </dd>
                        </dl>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="APPCI222"></a><div class="props_rev_3"><a id="GUID-3100F0AE-E61D-485B-A37D-F5A023F6EF31" name="GUID-3100F0AE-E61D-485B-A37D-F5A023F6EF31"></a><h4 id="APPCI-GUID-3100F0AE-E61D-485B-A37D-F5A023F6EF31" class="sect4">从以前的网关版本升级PGAU</h4>
                  <div>
                     <div class="section">
                        <p>升级了<a id="d10176e1400" class="indexterm-anchor"></a>在执行新的PGAU之前，PG DD如下：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>如有必要，使用SQL * Plus以用户<code class="codeph">PGAADMIN</code>连接到Oracle数据库。</span></li>
                        <li><span>从SQL * Plus，运行<code class="codeph">pgddupgr.sql</code> <a id="d10176e1418" class="indexterm-anchor"></a><a id="d10176e1420" class="indexterm-anchor"></a> <code class="codeph">$ORACLE_HOME/dg4appc/admin</code>目录中的脚本。此脚本升级PG DD。</span></li>
                     </ol>
                  </div>
               </div>
            </div><a id="APPCI223"></a><div class="props_rev_3"><a id="GUID-0323371A-CA16-4CC7-9055-3D136A8314A0" name="GUID-0323371A-CA16-4CC7-9055-3D136A8314A0"></a><h3 id="APPCI-GUID-0323371A-CA16-4CC7-9055-3D136A8314A0" class="sect3">配置Oracle数据库网关共存</h3>
               <div>
                  <div class="section">
                     <p><a id="d10176e1462" class="indexterm-anchor"></a>您可能已安装较旧版本的网关。请注意，虽然版本10网关可以与版本9数据字典（PGDD）通信，但版本9网关无法与版本10数据字典通信。因此，如果将数据字典升级到版本10，则没有配置版本9数据字典的网关将能够与之通信。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-0DE22027-F985-4E80-982C-F5521271D288" name="GUID-0DE22027-F985-4E80-982C-F5521271D288"></a><h3 id="APPCI-GUID-0DE22027-F985-4E80-982C-F5521271D288" class="sect3">允许多个用户的可选配置步骤</h3>
               <div>
                  <div class="section">
                     <p>以下配置步骤是可选的。如果要允许除以外的用户，请执行这些步骤<a id="d10176e1514" class="indexterm-anchor"></a> <code class="codeph">PGAADMIN</code>表演<a id="d10176e1521" class="indexterm-anchor"></a>使用PGAU的PG DD操作。</p>
                     <ol>
                        <li>
                           <p>创建<a id="d10176e1530" class="indexterm-anchor"></a><a id="d10176e1532" class="indexterm-anchor"></a> PG DD的公共同义词，允许其他用户访问表：</p>
                           <ol type="a">
                              <li>
                                 <p>使用SQL * Plus以<code class="codeph">SYSTEM</code>用户身份连接到Oracle数据库。
                                 </p>
                              </li>
                              <li>
                                 <p>从SQL * Plus，运行<a id="d10176e1547" class="indexterm-anchor"></a><a id="d10176e1549" class="indexterm-anchor"></a> <code class="codeph">$ORACLE_HOME/dg4appc/admin</code>目录中的<code class="codeph">pgddcr8s.sql</code>脚本。此脚本为PG DD创建公共同义词。</p><pre class="oac_no_warn" dir="ltr">SQL&gt; @ $ ORACLE_HOME / dg4appc / admin / pgddcr8s.sql</pre></li>
                           </ol>
                        </li>
                        <li>
                           <p>创建角色以访问PG DD，执行事务定义和生成<a id="d10176e1566" class="indexterm-anchor"></a>提示规格。<code class="codeph">PGAADMIN</code>用户可以根据需要将这些角色授予其他用户。
                           </p>
                           <ol type="a">
                              <li>
                                 <p>使用SQL * Plus以用户<code class="codeph">PGAADMIN</code>连接到Oracle数据库。</p>
                              </li>
                              <li>
                                 <p>从SQL * Plus，在<code class="codeph">$ORACLE_HOME/dg4appc/admin</code>目录中运行<code class="codeph">pgddcr8r.sql</code>脚本。该脚本创建了两个角色， <code class="codeph">PGDDDEF</code>和<code class="codeph">PGDDGEN</code> 。该<a id="d10176e1599" class="indexterm-anchor"></a><a id="d10176e1601" class="indexterm-anchor"></a> <code class="codeph">PGDDDEF</code>角色为<code class="codeph">PGDDDEF</code>角色提供<code class="codeph">SELECT</code> ， <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>和<code class="codeph">DELETE</code>权限<a id="d10176e1621" class="indexterm-anchor"></a> PG DD表和对其他人的<code class="codeph">SELECT</code>权限，并允许执行PGAU <code class="codeph">DEFINE</code> ， <code class="codeph">GENERATE</code> ， <code class="codeph">REDEFINE</code> ， <code class="codeph">REPORT</code>和<code class="codeph">UNDEFINE</code>语句。该<a id="d10176e1645" class="indexterm-anchor"></a><a id="d10176e1647" class="indexterm-anchor"></a> <code class="codeph">PGDDGEN</code>角色为PG DD表提供select权限，并且只允许执行PGAU <code class="codeph">GENERATE</code>和<code class="codeph">REPORT</code>语句。
                                 </p><pre class="oac_no_warn" dir="ltr">SQL&gt; @ $ ORACLE_HOME / dg4appc / admin / pgddcr8r.sql</pre></li>
                           </ol>
                        </li>
                        <li id="GUID-0DE22027-F985-4E80-982C-F5521271D288__I1012843">
                           <p><a id="d10176e1664" class="indexterm-anchor"></a><a id="d10176e1668" class="indexterm-anchor"></a><a id="d10176e1672" class="indexterm-anchor"></a><a id="d10176e1676" class="indexterm-anchor"></a>授予访问PGA所需包的权限。
                           </p>
                           <p><a id="d10176e1682" class="indexterm-anchor"></a><a id="d10176e1686" class="indexterm-anchor"></a> TIP开发人员需要访问随附的以下PL / SQL包<a id="d10176e1691" class="indexterm-anchor"></a> Oracle数据库：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a id="d10176e1699" class="indexterm-anchor"></a> <code class="codeph">$ORACLE_HOME/rdbms/admin</code>目录中的<code class="codeph">DBMS_PIPE</code></p>
                              </li>
                              <li>
                                 <p><a id="d10176e1709" class="indexterm-anchor"></a> <code class="codeph">$ORACLE_HOME/rdbms/admin</code>目录中的<code class="codeph">UTL_RAW</code></p>
                              </li>
                              <li>
                                 <p><a id="d10176e1719" class="indexterm-anchor"></a> <code class="codeph">$ORACLE_HOME/rdbms/admin</code> <code class="codeph">UTL_PG</code> <a id="d10176e1726" class="indexterm-anchor"></a><a id="d10176e1730" class="indexterm-anchor"></a>目录</p>
                              </li>
                           </ul>
                           <p>必须向TIP开发人员提供执行这些包的显式授权。</p>
                           <p>这些授权可以是私有的，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">$ sqlplus SYS / <span class="italic">pw @ database_specification_string</span> SQL&gt; GRANT EXECUTE ON UTL_RAW to <span class="italic">tip_developer</span> ; SQL&gt; GRANT EXECUTE ON UTL_PG to <span class="italic">tip_developer</span> ; SQL&gt; GRANT EXECUTE ON DBMS_PIPE TO <span class="italic">tip_developer;</span> SQL&gt; CONNECT PGAADMIN / <span class="italic">pw @ database_specification_string</span> SQL&gt;在PGAADMIN.PURGE_TRACE上执行GRANT EXECUTE到<span class="italic">tip_developer</span> ; SQL&gt; GRANT EXECUTE在PGAADMIN.READ_TRACE上执行<span class="italic">tip_developer</span> ; SQL&gt; GRANT EXECUTE on PGAADMIN.GPGLOCAL to <span class="italic">tip_developer;</span> SQL&gt;退出</pre><p>或者，这些授权可以是公共的，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">$ sqlplus SYS / pw @ <span class="italic">database_specification_string</span> SQL&gt;对UTL_RAW执行GRANT EXECUTE; SQL&gt;在UTL_PG上执行GRANT EXECUTE; SQL&gt; GRANT EXECUTE DBMS_PIPE到PUBLIC; SQL&gt; CONNECT PGAADMIN / <span class="italic">pw @ database_specification_string</span> SQL&gt; GRGA EXECUTE PGAADMIN.PURGE_TRACE TO PUBLIC; SQL&gt; GRGA EXECUTE PGAADMIN.READ_TRACE TO PUBLIC; SQL&gt; GRGA EXECUTE PGAADMIN.GPGLOCAL TO PUBLIC; SQL&gt; EXIT</pre><p>您可以使用私人或公共补助金。两者都足以使用PGA。公共补助更容易，现在可以执行。如果您使用私有授权，则每次创建新的TIP开发人员用户ID时都必须发布它们。<a id="d10176e1778" class="indexterm-anchor"></a><a id="d10176e1782" class="indexterm-anchor"></a></p>
                           <p>用于执行这些授权的SQL脚本在<code class="codeph">$ORACLE_HOME/dg4appc/admin</code>目录中提供。该<a id="d10176e1793" class="indexterm-anchor"></a><a id="d10176e1797" class="indexterm-anchor"></a> <code class="codeph">pgddapub.sql</code>脚本执行这些授权以公开访问包。<code class="codeph">pgddadev.sql</code>脚本执行授权，以便由单个TIP开发人员对包进行私有访问。如果要使用私有授权，则必须为每个TIP开发人员用户ID运行一次<code class="codeph">pgddadev.sql</code>脚本：</p>
                           <ol type="a">
                              <li>
                                 <p>使用SQL * Plus以用户<code class="codeph">PGAADMIN</code>连接到Oracle数据库。</p>
                              </li>
                              <li>
                                 <p>从SQL * Plus中，从<code class="codeph">$ORACLE_HOME/dg4appc/admin</code>目录运行相应的脚本（ <code class="codeph">pgddapub.sql</code>或<code class="codeph">pgddadev.sql</code> ）。该脚本执行必要的授权，如前所述。系统会提示您输入所需的用户标识，密码和数据库规范字符串。
                                 </p>
                                 <p>如果您使用私有授权，则对需要访问软件包的每个用户ID重复此步骤。</p><pre class="oac_no_warn" dir="ltr">SQL&gt; @ $ ORACLE_HOME / dg4appc / admin / pgddapub.sql SQL&gt; @ $ ORACLE_HOME / dg4appc / admin / pgddadev.sql</pre></li>
                           </ol>
                        </li>
                        <li>
                           <p><a id="d10176e1837" class="indexterm-anchor"></a><a id="d10176e1843" class="indexterm-anchor"></a>如果要从以前版本的网关进行升级，并且要升级现有版本<a id="d10176e1848" class="indexterm-anchor"></a><a id="d10176e1852" class="indexterm-anchor"></a><a id="d10176e1853" class="indexterm-anchor"></a>具有新功能和维护的TIP，然后使用。重新生成现有的T IP规范<a id="d10176e1863" class="indexterm-anchor"></a> PGAU <code class="codeph">GENERATE</code>声明。
                           </p>
                           <div class="infoboxnote" id="GUID-0DE22027-F985-4E80-982C-F5521271D288__GUID-86A409E0-92F4-49D1-94C7-30302624A3EF">
                              <p class="notep1">注意：</p>
                              <p>该<a id="d10176e1875" class="indexterm-anchor"></a> PGAU已得到增强，可自动升级现有的PG DD条目<a id="d10176e1880" class="indexterm-anchor"></a><a id="d10176e1884" class="indexterm-anchor"></a>当一个新的属性时<a id="d10176e1889" class="indexterm-anchor"></a>执行PGAU <code class="codeph">GENERATE</code>命令。要支持此增强功能，请为该增强功能添加新权限<a id="d10176e1897" class="indexterm-anchor"></a> <code class="codeph">PGDDGEN</code>角色。为此，作为<code class="codeph">PGAADMIN</code>用户，使用SQL * Plus连接到存储PG DD的Oracle数据库。然后发出以下SQL命令：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; GRANT INSERT在PGA_DATA_VALUES到PGDDGEN</pre></div>
                           <ol type="a">
                              <li>
                                 <p>在生成PGAU控制文件的目录路径中调用PGAU以及存储TIP的位置：</p><pre class="oac_no_warn" dir="ltr">$ pgau PGAU&gt; CONNECT PGAADMIN / pgaadmin @ <span class="italic">database_specification_string</span> PGAU&gt; GENERATE <span class="italic">tranname</span> PGAU&gt; EXIT</pre></li>
                           </ol>
                           <p>有关<code class="codeph">GENERATE</code>命令的更多信息，请参阅“ <a href="../appug/pga-utility-oracle-database-gateway-appc.html#APPUG200" target="_blank"><span class="italic">Oracle数据库网关APPC用户指南”</span></a>第2章中的PGAU <code class="codeph">GENERATE</code>命令部分。
                           </p>
                           <p>请注意，不必再次定义PG DD条目。</p>
                        </li>
                        <li>
                           <p>在存储新生成的TIP规范的同一目录路径中调用SQL * Plus。</p><pre class="oac_no_warn" dir="ltr">$ sqlplus <span class="italic">tip_owner / pw @ database_specification_string</span> SQL&gt; @ <span class="italic">tipname。</span> pkh SQL&gt; @ <span class="italic">tipname</span> .pkb SQL&gt;退出</pre><p><a id="d10176e1952" class="indexterm-anchor"></a><a id="d10176e1958" class="indexterm-anchor"></a><a id="d10176e1962" class="indexterm-anchor"></a> PGAU <code class="codeph">GENERATE</code>在两个输出文件中生成TIP：规范和正文。您必须先编译规范，然后再编译正文。
                           </p>
                           <p>有关<code class="codeph">GENERATE</code>命令的更多信息，请参阅“ <a href="../appug/pga-utility-oracle-database-gateway-appc.html#APPUG200" target="_blank"><span class="italic">Oracle数据库网关APPC用户指南”</span></a>第2章中的PGAU <code class="codeph">GENERATE</code>命令部分。
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="APPCI225"></a><div class="props_rev_3"><a id="GUID-326E95E9-25DC-46E0-8D1F-63344DBB1CF4" name="GUID-326E95E9-25DC-46E0-8D1F-63344DBB1CF4"></a><h3 id="APPCI-GUID-326E95E9-25DC-46E0-8D1F-63344DBB1CF4" class="sect3">配置网关</h3>
               <div>
                  <div class="section">
                     <p>要配置网关，请执行以下步骤：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>为APPC参数自定义Oracle数据库网关。</span><div>
                           <p>参数具体<a id="d10176e2023" class="indexterm-anchor"></a>网关参数文件<code class="codeph">init</code> <span class="italic"><code class="codeph">sid</code></span>中提供了网关。 <code class="codeph">ora</code> ，这是在<a id="d10176e2039" class="indexterm-anchor"></a> <code class="codeph">$ORACLE_HOME/dg4appc/admin</code>目录。示例网关参数<a id="d10176e2045" class="indexterm-anchor"></a><a id="d10176e2047" class="indexterm-anchor"></a><a id="d10176e2053" class="indexterm-anchor"></a>文件， <a id="d10176e2058" class="indexterm-anchor"></a><a id="d10176e2060" class="indexterm-anchor"></a> <code class="codeph">initPGA.ora</code>在此子目录中提供。<a id="d10176e2067" class="indexterm-anchor"></a><a id="d10176e2071" class="indexterm-anchor"></a><a id="d10176e2077" class="indexterm-anchor"></a></p>
                           <div class="infoboxnote" id="GUID-326E95E9-25DC-46E0-8D1F-63344DBB1CF4__GUID-8F262371-02CF-40BC-9035-FB067218D077">
                              <p class="notep1">注意：</p>
                              <p>在里面<a id="d10176e2084" class="indexterm-anchor"></a><a id="d10176e2086" class="indexterm-anchor"></a> <code class="codeph">init</code> <span class="italic"><code class="codeph">sid</code></span> 。 <code class="codeph">ora</code>文件，在此文件名中替换“ <span class="italic"><code class="codeph">sid</code></span> ”的<code class="codeph">dg4appc</code> SID名称。
                              </p>
                              <p><code class="codeph">init</code> <span class="italic"><code class="codeph">sid</code></span> 。 <code class="codeph">ora</code>文件包含APPC和TCP / IP参数，由描述分隔。您必须修改<code class="codeph">init</code> <span class="italic"><code class="codeph">sid</code></span> 。 <code class="codeph">ora</code>文件删除TCP / IP参数。有关有效的APPC参数，请参阅<a href="appc-gateway-initialization-parameters-sna.html#GUID-53D8F882-4389-4150-8998-300818E476B9">SNA协议的网关初始化</a>参数。
                              </p>
                           </div>
                           <p>参数分为两类：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>网关初始化<a id="d10176e2137" class="indexterm-anchor"></a><a id="d10176e2143" class="indexterm-anchor"></a>参数</p>
                                 <p>这些参数控制Oracle环境中网关的一般操作。</p>
                                 <div class="infoboxnote" id="GUID-326E95E9-25DC-46E0-8D1F-63344DBB1CF4__GUID-4B155CE5-EB9D-4CD6-ADC9-DC121DB133EA">
                                    <p class="notep1">注意：</p>
                                    <p>在执行以下步骤之前，请参阅<a href="appc-gateway-initialization-parameters-sna.html#GUID-53D8F882-4389-4150-8998-300818E476B9">SNA协议的网关初始化参数，</a>以获取有关定制网关初始化和PGA参数的信息。请特别注意有关使用<code class="codeph">PGA_CAPABILITY</code>参数的信息。
                                    </p>
                                 </div>
                              </li>
                              <li>
                                 <p>PGA <a id="d10176e2163" class="indexterm-anchor"></a><a id="d10176e2167" class="indexterm-anchor"></a>参数</p>
                                 <p>PGA参数控制网关的APPC接口部分。使用<a id="d10176e2176" class="indexterm-anchor"></a><a id="d10176e2180" class="indexterm-anchor"></a> <code class="codeph">SET</code>网关初始化参数指定PGA参数。Oracle建议您对所有<code class="codeph">SET</code>命令进行分组<a id="d10176e2192" class="indexterm-anchor"></a><a id="d10176e2194" class="indexterm-anchor"></a>对于<code class="codeph">init</code> <span class="italic"><code class="codeph">sid</code></span>末尾的PGA参数。 <code class="codeph">ora</code>文件。
                                 </p>
                                 <div class="infoboxnote" id="GUID-326E95E9-25DC-46E0-8D1F-63344DBB1CF4__GUID-8D91EB1A-7B2B-4570-A028-F62AEFD7E7C8">
                                    <p class="notep1">注意：</p>
                                    <p>拼写错误的参数将被忽略<a id="d10176e2212" class="indexterm-anchor"></a> 。但是，如果是<code class="codeph">$ORACLE_HOME/dg4appc/admin/init</code> <span class="italic"><code class="codeph">sid</code></span> 。 <code class="codeph">ora</code>文件丢失，所有对网关的调用都失败并返回<code class="codeph">PGA-20928</code>错误。
                                    </p>
                                 </div>
                              </li>
                           </ul>
                        </div>
                     </li>
                  </ol>
               </div>
            </div><a id="APPCI226"></a><div class="props_rev_3"><a id="GUID-544B3014-8746-41E6-9132-12E473D38254" name="GUID-544B3014-8746-41E6-9132-12E473D38254"></a><h3 id="APPCI-GUID-544B3014-8746-41E6-9132-12E473D38254" class="sect3">配置提交确认</h3>
               <div>
                  <div class="section">
                     <div class="infoboxnote" id="GUID-544B3014-8746-41E6-9132-12E473D38254__GUID-9C1E0C43-0172-4681-B4EC-C3E9FCE8828F">
                        <p class="notep1">注意：</p>
                        <p>如果您计划实施commit-confirm，请在继续之前阅读“ <a href="../appug/implement-appc-commit-confirm-sna-only.html#APPUG500" target="_blank"><span class="italic">Oracle数据库网关APPC用户指南</span></a> ”第5章“实现提交确认（仅限SNA）”中的commit-confirm功能的详细说明。
                        </p>
                     </div>
                     <p>请按照以下步骤配置commit-confirm组件。的步骤<a id="d10176e2270" class="indexterm-anchor"></a>配置commit-confirm包括：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>配置网关服务器将存储其事务日志信息的Oracle数据库</p>
                        </li>
                        <li>
                           <p>配置网关初始化参数</p>
                        </li>
                        <li>
                           <p>配置OLTP</p>
                        </li>
                     </ul>
                     <p>在尝试使用任何使用commit-confirm的应用程序之前，必须执行所有这些步骤。<a id="d10176e2288" class="indexterm-anchor"></a></p>
                  </div>
                  <!-- class="section" -->
               </div><a id="APPCI227"></a><div class="props_rev_3"><a id="GUID-F9218AF1-8735-4377-AC79-7325D8396BE7" name="GUID-F9218AF1-8735-4377-AC79-7325D8396BE7"></a><h4 id="APPCI-GUID-F9218AF1-8735-4377-AC79-7325D8396BE7" class="sect4">配置Oracle数据库以进行提交确认</h4>
                  <div>
                     <div class="section">
                        <p>该<a id="d10176e2325" class="indexterm-anchor"></a><a id="d10176e2329" class="indexterm-anchor"></a>网关服务器将存储其事务日志信息的Oracle数据库安装理想情况下应位于运行网关的同一系统上。服务器的配置包括创建网关DBA用户，创建提交确认日志表并创建<a id="d10176e2334" class="indexterm-anchor"></a>网关服务器用于记录事务的PL / SQL存储过程。<a id="d10176e2339" class="indexterm-anchor"></a></p>
                        <p><code class="codeph">$ORACLE_HOME/dg4appc/admin</code>目录中的<code class="codeph">pgaccau.sql</code>脚本创建网关DBA用户标识。默认用户ID为<code class="codeph">PGADBA</code> ，初始密码设置为<code class="codeph">PGADBA</code> 。如果要更改用户ID或初始密码，则必须修改脚本。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>使用<a id="d10176e2363" class="indexterm-anchor"></a> SQL * Plus以<code class="codeph">SYSTEM</code>用户身份连接到Oracle数据库。</span></li>
                        <li><span>从SQL * Plus，从<code class="codeph">$ORACLE_HOME/dg4appc/admin</code>目录运行<code class="codeph">pgaccau.sql</code>脚本。此脚本创建网关DBA用户标识。如果要在运行此脚本后随时更改密码，可以使用<code class="codeph">ALTER USER</code>命令更改密码。有关详细信息，请参阅<a href="../sqlrf/ALTER-USER.html#SQLRF01103" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。</span></li>
                        <li><span>使用SQL * Plus以<code class="codeph">PGADBA</code>用户身份连接到Oracle数据库。</span></li>
                        <li><span>从SQL * Plus，从<code class="codeph">$ORACLE_HOME/dg4appc/admin</code>目录运行<code class="codeph">pgaccpnd.sql</code>脚本。此脚本创建网关服务器用于其提交确认事务日志的<code class="codeph">PGA_CC_PENDING</code>表。</span></li>
                        <li><span>从SQL * Plus，从<code class="codeph">$ORACLE_HOME/dg4appc/admin</code>目录运行<code class="codeph">pgacclog.sql</code>脚本。该脚本创建<code class="codeph">PGA_CC_LOG</code> <a id="d10176e2428" class="indexterm-anchor"></a>网关服务器用于更新<code class="codeph">PGA_CC_PENDING</code>表的PL / SQL存储过程。</span></li>
                        <li><span>断开与Oracle数据库的连接。</span></li>
                     </ol>
                  </div>
               </div><a id="APPCI228"></a><div class="props_rev_3"><a id="GUID-DE8EFB77-D7DC-4505-A8FC-5F004E8F0E0E" name="GUID-DE8EFB77-D7DC-4505-A8FC-5F004E8F0E0E"></a><h4 id="APPCI-GUID-DE8EFB77-D7DC-4505-A8FC-5F004E8F0E0E" class="sect4">为Commit-Confirm配置网关初始化参数</h4>
                  <div>
                     <div class="section">
                        <p><a id="d10176e2469" class="indexterm-anchor"></a><a id="d10176e2475" class="indexterm-anchor"></a><a id="d10176e2479" class="indexterm-anchor"></a>网关初始化参数在<a href="appc-gateway-initialization-parameters-sna.html#GUID-53D8F882-4389-4150-8998-300818E476B9">SNA协议</a>的网关初始化参数中描述。网关中提交确认支持所需的参数是：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">PGA_CAPABILITY</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">PGA_LOG_DB</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">PGA_LOG_USER</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">PGA_LOG_PASS</code> 
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">PGA_RECOVERY_USER</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">PGA_RECOVERY_PASS</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">PGA_RECOVERY_TPNAME</code></p>
                           </li>
                        </ul>
                        <p>这些参数应该添加到您的<a id="d10176e2521" class="indexterm-anchor"></a><a id="d10176e2523" class="indexterm-anchor"></a> <code class="codeph">init</code> <span class="italic"><code class="codeph">sid</code></span> 。 <code class="codeph">ora</code>文件，其中<span class="italic"><code class="codeph">sid</code></span>是提交确认网关的网关SID。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="APPCI229"></a><div class="props_rev_3"><a id="GUID-24F30622-1E2C-443F-8376-087D3FE0D4B8" name="GUID-24F30622-1E2C-443F-8376-087D3FE0D4B8"></a><h4 id="APPCI-GUID-24F30622-1E2C-443F-8376-087D3FE0D4B8" class="sect4">配置OLTP以进行提交确认</h4>
                  <div>
                     <div class="section">
                        <p>OLTP的配置包括定义和安装以下内容：<a id="d10176e2574" class="indexterm-anchor"></a><a id="d10176e2580" class="indexterm-anchor"></a></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>提交确认事务日志数据库</p>
                           </li>
                           <li>
                              <p>提交 - 确认忘记或恢复事务</p>
                           </li>
                           <li>
                              <p>随网关提供的示例提交确认应用程序</p>
                              <div class="infoboxnote" id="GUID-24F30622-1E2C-443F-8376-087D3FE0D4B8__GUID-85A8BBDA-8502-452A-A6AA-35AEF42E17D2">
                                 <p class="notep1">注意：</p>
                                 <p>可能需要重新启动OLTP才能实现提交确认支持所需的更改。您应该与OLTP系统管理员一起制定此计划。</p>
                              </div>
                           </li>
                        </ul>
                        <p>有关为z / OS和IMS / TM配置Transaction Server的详细说明，请分别在<code class="codeph">$ORACLE_HOME/dg4appc/demo/CICS/README.doc</code>和<code class="codeph">$ORACLE_HOME/dg4appc/demo/IMS/README.doc</code>文件中提供。
                        </p>
                        <p>参考<a id="d10176e2608" class="indexterm-anchor"></a><a id="d10176e2612" class="indexterm-anchor"></a>有关commit-confirm的详细信息，请参见“ <a href="../appug/implement-appc-commit-confirm-sna-only.html#APPUG500" target="_blank"><span class="italic">Oracle数据库网关APPC用户指南</span></a> ”中的第5章“实现提交确认（仅限SNA）”。您将在稍后的<span class="q">“ <a href="configuring-appc-gateway-sna.html#GUID-BD5A0C0E-BDEE-4595-AD71-38C8DD8F0C8C">验证OLTP配置以进行提交确认</a> ”中</span>采取步骤验证提交确认的<span class="q"><a href="configuring-appc-gateway-sna.html#GUID-BD5A0C0E-BDEE-4595-AD71-38C8DD8F0C8C">配置</a></span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="APPCI230"></a><div class="props_rev_3"><a id="GUID-B0F01C9F-3BBB-4579-8B3D-ACCCE3CCED56" name="GUID-B0F01C9F-3BBB-4579-8B3D-ACCCE3CCED56"></a><h3 id="APPCI-GUID-B0F01C9F-3BBB-4579-8B3D-ACCCE3CCED56" class="sect3">验证网关安装和OLTP配置</h3>
               <div>
                  <div class="section">
                     <p>要验证网关安装和OLTP配置，请在安装Oracle Database Gateway for APPC后执行以下过程。 <a id="d10176e2661" class="indexterm-anchor"></a><a id="d10176e2667" class="indexterm-anchor"></a>此外，如果您选择配置commit-confirm，请按照步骤验证提交确认的OLTP配置。
                     </p>
                     <div class="infoboxnote" id="GUID-B0F01C9F-3BBB-4579-8B3D-ACCCE3CCED56__GUID-D9DF6D1C-6AC6-407B-85B2-8477362A3E37">
                        <p class="notep1">注意：</p>
                        <p>如果你的<a id="d10176e2677" class="indexterm-anchor"></a>数据库链接名称不是<code class="codeph">PGA</code> ，修改演示<code class="codeph">.sql</code>文件以为它们提供您在<span class="q">“ <a href="configuring-appc-gateway-sna.html#GUID-C60EA44C-85E5-45FD-8B22-CDE441C0B82D">Oracle数据库配置：首次网关安装</a> ”的</span>步骤<a href="configuring-appc-gateway-sna.html#GUID-C60EA44C-85E5-45FD-8B22-CDE441C0B82D__I1008586">5</a>中创建的特定数据库链接名称。您必须修改以下<code class="codeph">.sql</code>文件：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a id="d10176e2703" class="indexterm-anchor"></a><a id="d10176e2705" class="indexterm-anchor"></a><code class="codeph">pgavsn.sql</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">pgaecho.sql</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">pgacics.sql</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">pgaidms.sql</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">pgaims.sql</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">pgamvs.sql</code></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="APPCI231"></a><div class="props_rev_3"><a id="GUID-D52AF0FF-E0D5-4210-BA3A-D02872A1D87D" name="GUID-D52AF0FF-E0D5-4210-BA3A-D02872A1D87D"></a><h4 id="APPCI-GUID-D52AF0FF-E0D5-4210-BA3A-D02872A1D87D" class="sect4">验证网关安装</h4>
                  <div>
                     <div class="section">
                        <p>使用以验证网关软件安装<a id="d10176e2778" class="indexterm-anchor"></a>先前创建的数据库链接PGA，执行以下步骤：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>使用SQL * Plus，连接到您的<a id="d10176e2789" class="indexterm-anchor"></a> Oracle数据库为<a id="d10176e2796" class="indexterm-anchor"></a> <code class="codeph">PGAADMIN.</code></span></li>
                        <li class="stepexpand"><span>运行<code class="codeph">$ORACLE_HOME/dg4appc/demo/pgavsn.sql</code> 。</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; @ $ ORACLE_HOME / dg4appc / demo / pgavsn.sql</pre><p>服务器版本号标题出现在您的终端上。出现以下输出：</p><pre class="oac_no_warn" dir="ltr">适用于APPC的Oracle数据库网关。版本12.2.0.1.0 2016年8月24日星期三14:39:15 <a id="d10176e2813" class="indexterm-anchor"></a>版权所有（c）Oracle Corporation 1979,2016。版权所有。
</pre><p>PL / SQL过程成功完成。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>运行<code class="codeph">$ORACLE_HOME/dg4appc/demo/pgaecho.sql</code> 。</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; @ $ ORACLE_HOME / dg4appc / demo / pgaecho.sql</pre><p>您将收到以下输出：</p><pre class="oac_no_warn" dir="ltr">==&gt;恭喜，您的安装成功。 &lt;==</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="APPCI232"></a><div class="props_rev_3"><a id="GUID-AFAE9E23-FDED-41A8-8B55-951090DABEC6" name="GUID-AFAE9E23-FDED-41A8-8B55-951090DABEC6"></a><h4 id="APPCI-GUID-AFAE9E23-FDED-41A8-8B55-951090DABEC6" class="sect4">验证OLTP配置</h4>
                  <div>
                     <div class="section">
                        <p>验证OLTP配置的过程会有所不同，具体取决于您使用的OLTP以及运行OLTP的平台。目前支持用于z / OS，IMS / TM，APPC / MVS和z / OS的CICS Transaction Server <a id="d10176e2879" class="indexterm-anchor"></a> OLTPs。按照以下各节中的说明验证安装：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="configuring-appc-gateway-sna.html#GUID-6225EE5D-7C9C-4B91-806C-D196A53D762A">CICS验证</a></p>
                           </li>
                           <li>
                              <p><a href="configuring-appc-gateway-sna.html#GUID-86FF2AE4-0009-4126-A28F-5F466115E345">IMS / TM验证</a></p>
                           </li>
                           <li>
                              <p><a href="configuring-appc-gateway-sna.html#GUID-F219297D-AD2F-45E5-A517-D0EC0AD205D2">APPC / MVS验证</a></p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-AFAE9E23-FDED-41A8-8B55-951090DABEC6__GUID-C577253C-DB56-47B7-BB79-7366E4C9F467">
                           <p class="notep1">注意：</p>
                           <p>如果尚未完成<span class="q">“ <a href="configuring-appc-gateway-sna.html#GUID-DB5EF405-1993-4D5A-AB38-834B75C9E31E">准备配置网关安装/升级</a> ”中</span>详细说明的文件传输，请立即完成，然后再继续执行下一步。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="APPCI233"></a><div class="props_rev_3"><a id="GUID-6225EE5D-7C9C-4B91-806C-D196A53D762A" name="GUID-6225EE5D-7C9C-4B91-806C-D196A53D762A"></a><h5 id="APPCI-GUID-6225EE5D-7C9C-4B91-806C-D196A53D762A" class="sect5">CICS验证</h5>
                     <div>
                        <div class="section">
                           <p>如果您的OLTP是<a id="d10176e2960" class="indexterm-anchor"></a><a id="d10176e2966" class="indexterm-anchor"></a> CICS Transaction Server for z / OS，执行以下步骤以验证CICS配置。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>验证<a id="d10176e2977" class="indexterm-anchor"></a>正确安装FLIP事务，登录到您的CICS Transaction Server for z / OS并输入以下事务，在为网关配置CICS Transaction Server for z / OS时，将<code class="codeph">FLIP</code>替换为您为<code class="codeph">FLIP</code>选择的事务ID：</span><div><pre class="oac_no_warn" dir="ltr">FLIP <span class="italic"> </span>这条信息</pre><p>出现以下输出：</p><pre class="oac_no_warn" dir="ltr">EGASSEM SIHT PILF</pre></div>
                           </li>
                           <li class="stepexpand"><span>登录到UNIX。</span></li>
                           <li class="stepexpand"><span>修改<code class="codeph">pgacics.sql</code>文件，该文件位于<code class="codeph">$ORACLE_HOME/dg4appc/demo/CICS/pgacics.sql</code> 。自定义以下三个用于访问网关和CICS Transaction Server for z / OS的项目，如文件开头的注释中所述：</span><div>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><a id="d10176e3018" class="indexterm-anchor"></a> CICS事务ID</p>
                                    </li>
                                    <li>
                                       <p><a id="d10176e3025" class="indexterm-anchor"></a>侧面配置文件名称</p>
                                    </li>
                                    <li>
                                       <p><a id="d10176e3030" class="indexterm-anchor"></a> Logmode条目名称</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li class="stepexpand"><span>确保这件事<a id="d10176e3036" class="indexterm-anchor"></a>系统上的SNA通信包已启动。</span></li>
                           <li class="stepexpand"><span>登录到您的CICS Transaction Server for z / OS并运行此事务，其中<span class="italic"><code class="codeph">name</code></span>是在CICS配置步骤中运行的<code class="codeph">DFHCSDUP</code>作业安装的<code class="codeph">CONNECTION</code>定义的名称：</span><div><pre class="oac_no_warn" dir="ltr">已获得CEMT SET CONNECTION <span class="italic">（名称）</span></pre><p>此事务激活与UNIX的CICS连接。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>使用SQL * Plus以<code class="codeph">PGAADMIN</code>身份连接到Oracle数据库。</span></li>
                           <li class="stepexpand"><span>运行<code class="codeph">pgacics.sql</code> 。</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; @ $ ORACLE_HOME / dg4appc / demo / CICS / pgacics.sql</pre><p>出现以下消息：</p><pre class="oac_no_warn" dir="ltr">==&gt;恭喜，您的网关正在与CICS &lt;==进行通信</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>您的CICS Transaction Server for z / OS安装验证已完成。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="APPCI234"></a><div class="props_rev_3"><a id="GUID-86FF2AE4-0009-4126-A28F-5F466115E345" name="GUID-86FF2AE4-0009-4126-A28F-5F466115E345"></a><h5 id="APPCI-GUID-86FF2AE4-0009-4126-A28F-5F466115E345" class="sect5">IMS / TM验证</h5>
                     <div>
                        <div class="section">
                           <p>如果您的OLTP是<a id="d10176e3135" class="indexterm-anchor"></a>然后，IMS / TM执行以下步骤以验证IMS / TM配置：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>验证<a id="d10176e3146" class="indexterm-anchor"></a> FLIP事务已正确安装，登录到您的IMS / TM系统并输入以下事务，在为网关配置IMS / TM系统时，将<code class="codeph">FLIP</code>替换为您为<code class="codeph">FLIP</code>选择的事务ID：</span><div><pre class="oac_no_warn" dir="ltr">翻上这条消息</pre><p>终端上显示以下输出：</p><pre class="oac_no_warn" dir="ltr">EGASSEM SIHT PILF</pre></div>
                           </li>
                           <li class="stepexpand"><span>登录到UNIX。</span></li>
                           <li class="stepexpand"><span>修改<code class="codeph">pgaims.sql</code>文件，该文件位于<a id="d10176e3177" class="indexterm-anchor"></a><a id="d10176e3179" class="indexterm-anchor"></a> <code class="codeph">$ORACLE_HOME/dg4appc/demo/IMS/pgaims.sql</code> 。自定义以下三个用于访问网关和IMS / TM系统的项目，如文件开头的注释中所述：</span><div>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>IMS / TM事务ID</p>
                                    </li>
                                    <li>
                                       <p>侧面名称</p>
                                    </li>
                                    <li>
                                       <p>Logmode条目名称</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li class="stepexpand"><span>确保<a id="d10176e3198" class="indexterm-anchor"></a>系统上的SNA通信包已启动。</span></li>
                           <li class="stepexpand"><span> <a id="d10176e3204" class="indexterm-anchor"></a>使用SQL * Plus以<code class="codeph">PGAADMIN</code>身份连接到Oracle数据库。</span></li>
                           <li class="stepexpand"><span>运行<code class="codeph">pgaims.sql</code> 。</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; @ $ ORACLE_HOME / dg4appc / demo / IMS / pgaims.sql</pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <p>出现以下消息：</p><pre class="oac_no_warn" dir="ltr">==&gt;恭喜，您的网关正在与IMS / TM &lt;==进行通信</pre><p>您的IMS / TM安装验证现已完成。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="APPCI235"></a><div class="props_rev_3"><a id="GUID-F219297D-AD2F-45E5-A517-D0EC0AD205D2" name="GUID-F219297D-AD2F-45E5-A517-D0EC0AD205D2"></a><h5 id="APPCI-GUID-F219297D-AD2F-45E5-A517-D0EC0AD205D2" class="sect5">APPC / MVS验证</h5>
                     <div>
                        <div class="section">
                           <p>如果您的OLTP是<a id="d10176e3276" class="indexterm-anchor"></a><a id="d10176e3282" class="indexterm-anchor"></a> APPC / MVS，执行以下步骤来验证APPC / MVS配置：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>验证您的APPC / MVS子系统是否处于活动状态。</span></li>
                           <li class="stepexpand"><span>登录到UNIX</span></li>
                           <li class="stepexpand"><span>修改<code class="codeph">pgamvs.sql</code>文件，该文件位于<code class="codeph">$ORACLE_HOME/dg4appc/demo/MVS/pgamvs.sql</code> 。自定义以下三个用于访问网关和APPC / MVS系统的项目，如文件开头的注释中所述：</span><div>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>APPC / MVS交易ID</p>
                                    </li>
                                    <li>
                                       <p>侧面名称</p>
                                    </li>
                                    <li>
                                       <p>Logmode条目名称</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li class="stepexpand"><span>确保<a id="d10176e3318" class="indexterm-anchor"></a>系统上的SNA通信包已启动。</span></li>
                           <li class="stepexpand"><span>使用SQL * Plus连接到您的<a id="d10176e3324" class="indexterm-anchor"></a> Oracle数据库为<code class="codeph">PGAADMIN</code> 。</span></li>
                           <li class="stepexpand"><span>运行<code class="codeph">pgamvs.sql</code> 。</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; @ $ ORACLE_HOME / dg4appc / demo / MVS / pgamvs.sql</pre><p>出现以下消息：</p><pre class="oac_no_warn" dir="ltr">=&gt;恭喜，您的网关正在与APPC / MVS &lt;=进行通信</pre></div>
                           </li>
                        </ol>
                        <div class="section"><pre class="oac_no_warn" dir="ltr"></pre><p>您的APPC / MVS安装验证现已完成。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="APPCI236"></a><div class="props_rev_3"><a id="GUID-BD5A0C0E-BDEE-4595-AD71-38C8DD8F0C8C" name="GUID-BD5A0C0E-BDEE-4595-AD71-38C8DD8F0C8C"></a><h4 id="APPCI-GUID-BD5A0C0E-BDEE-4595-AD71-38C8DD8F0C8C" class="sect4">验证OLTP配置以进行提交确认</h4>
                  <div>
                     <div class="section">
                        <p>如果选择配置承诺，确认<a href="configuring-appc-gateway-sna.html#GUID-544B3014-8746-41E6-9132-12E473D38254">配置提交-确认</a> ，下面的部分将帮助您验证配置。
                        </p>
                        <div class="infoboxnote" id="GUID-BD5A0C0E-BDEE-4595-AD71-38C8DD8F0C8C__GUID-BC77C5F5-9F99-48FE-B470-8BD4162900DD">
                           <p class="notep1">注意：</p>
                           <p>有关commit-confirm的组件和功能的背景信息，请参阅<a href="../appug/implement-appc-commit-confirm-sna-only.html#APPUG500" target="_blank"><span class="italic">Oracle Database Gateway for APPC用户指南中的</span></a>第5章“实现Commit-Confirm”。
                           </p>
                        </div>
                        <p>样本随Transaction Server for z / OS和IMS / TM的网关一起提供，用于实现提交确认支持。它们分别位于以下目录中： <code class="codeph">$ORACLE_HOME/dg4appc/demo/CICS</code>和<code class="codeph">$ORACLE_HOME/dg4appc/demo/IMS</code> 。每个目录中的<code class="codeph">README.doc</code>文件提供有关安装和使用示例的详细信息。还提供了用于编译和链接示例程序的JCL文件。 <a id="d10176e3408" class="indexterm-anchor"></a> 网关附带的示例可帮助您完成以下操作：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>创建并初始化commit-confirm事务日志数据库并将这些数据库定义到OLTP</p>
                              <p>对于Transaction Server for z / OS，该示例使用VSAM文件作为日志数据库。对于IMS / TM，使用SHISAM / VSAM数据库。</p>
                           </li>
                           <li>
                              <p>使用子程序接收<a id="d10176e3423" class="indexterm-anchor"></a>来自网关的Oracle全局事务ID并将其记录到<a id="d10176e3426" class="indexterm-anchor"></a> commit-confirm事务日志数据库</p>
                              <p>这些子例程在<code class="codeph">pgacclg.asm</code>文件中提供。它们可以在您的应用程序中使用，以降低程序代码更改的复杂性。对于Transaction Server for z / OS，使用EXEC CICS LINK接口调用提供的子例程。对于IMS / TM，提供的子例程使用标准<code class="codeph">CALL</code>语句或其在应用程序编程语言中的等效语句来<code class="codeph">CALL</code> 。这两个子例程都是用370汇编语言编写的，以消除任何中间语言接口的复杂性和编译器依赖性。
                              </p>
                           </li>
                           <li>
                              <p>忘记和恢复交易</p>
                              <p>这些在<code class="codeph">pgareco.asm</code>文件中提供。忘记和恢复事务必须安装到您的OLTP中并可通过APPC访问，以便网关可以调用它们以在成功提交后忘记事务，并在恢复处理期间查询事务状态。这些事务会删除特定Oracle的条目<a id="d10176e3447" class="indexterm-anchor"></a>在忘记处理期间来自OLTP提交确认事务日志数据库的全局事务ID，并在恢复处理期间从OLTP提交确认事务日志数据库查询特定Oracle全局事务ID的条目。对于z / OS和IMS / TM的Transaction Server，这些事务都是用370汇编语言编写的。
                              </p>
                           </li>
                           <li>
                              <p>使用示例commit-confirm事务日志数据库和子例程</p>
                              <p>对于Transaction Server for z / OS， <code class="codeph">pgadb2c.cob</code>文件中提供了示例DB2更新事务<code class="codeph">DB2C</code> 。这是一个更新DB2示例<code class="codeph">EMP</code>表的COBOL示例。对于IMS / TM，样本DLI更新事务， <code class="codeph">PGAIMSU</code> ，在提供<code class="codeph">pgaimsu.cob</code>文件。这是更新DLI示例<code class="codeph">PARTS</code>数据库的COBOL示例。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="APPCI237"></a><div class="props_rev_3"><a id="GUID-835A25DB-1E5B-485C-9054-E920CC262570" name="GUID-835A25DB-1E5B-485C-9054-E920CC262570"></a><h3 id="APPCI-GUID-835A25DB-1E5B-485C-9054-E920CC262570" class="sect3">执行安装后程序</h3>
               <div>
                  <div class="section">
                     <p>以下是您可以根据需要执行的可选步骤。建议为OLTP安装示例应用程序，以帮助您完全了解网关的工作方式以及它与OLTP的接口方式。</p>
                  </div>
                  <!-- class="section" -->
               </div><a id="APPCI238"></a><div class="props_rev_3"><a id="GUID-7499EFA4-3633-44E1-9784-5F4D027ABFFE" name="GUID-7499EFA4-3633-44E1-9784-5F4D027ABFFE"></a><h4 id="APPCI-GUID-7499EFA4-3633-44E1-9784-5F4D027ABFFE" class="sect4">安装示例应用程序</h4>
                  <div>
                     <div class="section">
                        <p>Oracle Database Gateway for APPC包中包含以下示例PL / SQL过程和OLTP事务程序，用于演示网关的功能。</p>
                        <p><span class="bold">APPC / MVS</span></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>z / OS数据集信息</p>
                           </li>
                        </ul>
                        <p><span class="bold">适用于z / OS的CICS Transaction Server</span></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>DB2查询</p>
                           </li>
                           <li>
                              <p>DB2多行查询</p>
                           </li>
                           <li>
                              <p>DB2更新</p>
                           </li>
                           <li>
                              <p>VSAM查询</p>
                           </li>
                           <li>
                              <p>VSAM更新</p>
                           </li>
                           <li>
                              <p>DLI查询</p>
                           </li>
                           <li>
                              <p>FEPI DB2查询</p>
                           </li>
                           <li>
                              <p>FEPI VSAM查询</p>
                           </li>
                        </ul>
                        <p><span class="bold">IMS / TM</span></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用IVTNO和IVTNV样本事务进行IMS查询</p>
                           </li>
                           <li>
                              <p>IMS部件查询（ <a id="d10176e3614" class="indexterm-anchor"></a> CPI-C）</p>
                           </li>
                           <li>
                              <p>IMS部件更新（CPI-C）</p>
                           </li>
                        </ul>
                        <p>在产品的后续版本中，将附加样本添加到分发介质中。示例应用程序尽可能使用随数据库产品提供的示例数据库。</p>
                        <p>对于此版本，以下目录和文件中提供了有关安装和使用示例应用程序的完整文档：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">$ ORACLE_HOME / dg4appc / CICS / sample_CICS_applications.txt</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">$ ORACLE_HOME / dg4appc / IMS / sample_IMS_applications.txt</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">$ ORACLE_HOME / dg4appc / MVS / sample_MVS_applications.txt</code></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
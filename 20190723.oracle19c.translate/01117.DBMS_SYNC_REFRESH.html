<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The DBMS_SYNC_REFRESH package provides an interface to perform a synchronous refresh of materialized views."></meta>
      <meta name="description" content="The DBMS_SYNC_REFRESH package provides an interface to perform a synchronous refresh of materialized views."></meta>
      <title>DBMS_SYNC_REFRESH</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="The DBMS_SYNC_REFRESH package provides an interface to perform a synchronous refresh of materialized views."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_STORAGE_MAP.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_TDB.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_STORAGE_MAP.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_TDB.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_SYNC_REFRESH</li>
            </ol>
            <a id="GUID-F37D8F79-6FC5-4786-8AE6-7F97A0EA3B1E" name="GUID-F37D8F79-6FC5-4786-8AE6-7F97A0EA3B1E"></a><a id="ARPLS73623"></a><a id="ARPLS73623"></a>
            
            <h2 id="ARPLS-GUID-F37D8F79-6FC5-4786-8AE6-7F97A0EA3B1E" class="sect2"><span class="enumeration_chapter">167</span> DBMS_SYNC_REFRESH</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_SYNC_REFRESH</code>包提供了一个接口，用于执行物化视图的同步刷新。
               </p>
               <div class="infoboxnotealso" id="GUID-F37D8F79-6FC5-4786-8AE6-7F97A0EA3B1E__GUID-3D4E536B-32D8-4998-9F09-98AAA85DBBF5">
                  <p class="notep1">也可以看看：</p>
                  <p>有关使用<code class="codeph">DBMS_SYNC_REFRESH</code>详细信息，请<code class="codeph">DBMS_SYNC_REFRESH</code> <a href="../dwhsg/index.html" target="_blank"><span class="italic">“Oracle数据库数据仓库指南”</span></a></p>
               </div>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_SYNC_REFRESH.html#GUID-B84165EF-D9AA-4A23-8EF2-3BB050397217" title="同步刷新是Oracle Database Release 12c中引入的一种刷新方法，它使您能够保持一组表和在其上定义的物化视图始终保持同步。">概观</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_SYNC_REFRESH.html#GUID-4ACE8A80-4664-45C6-A7C6-683B2668C0A2" title="此包的执行权限授予PUBLIC，因此所有用户都可以执行此包中的过程以对其拥有的对象执行同步刷新。数据库管理员可以对数据库中的所有表和物化视图执行同步刷新操作。">安全模型</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_SYNC_REFRESH.html#GUID-2BE7B003-1FFC-4DA6-90C8-18F7F46C3689" title="此表列出并简要描述了DBMS_SYNC_REFRESH包子程序。">DBMS_SYNC_REFRESH子程序摘要</a></p>
                  </li>
               </ul>
            </div><a id="ARPLS73625"></a><a id="ARPLS73625"></a><div class="props_rev_3"><a id="GUID-B84165EF-D9AA-4A23-8EF2-3BB050397217" name="GUID-B84165EF-D9AA-4A23-8EF2-3BB050397217"></a><h3 id="ARPLS-GUID-B84165EF-D9AA-4A23-8EF2-3BB050397217" class="sect3"><span class="enumeration_section">167.1</span> DBMS_SYNC_REFRESH概述</h3>
               <div>
                  <p>同步刷新是Oracle Database Release 12 <span class="italic">c中</span>引入的一种刷新方法，它使您能够保持一组表和在其上定义的物化视图始终保持同步。
                  </p>
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-B84165EF-D9AA-4A23-8EF2-3BB050397217__GUID-61813EB4-C238-4A59-AE7B-FB7A723D2536">
                        <p class="notep1">也可以看看：</p>
                        <p>有关使用同步刷新的详细信息，请参阅<a href="../dwhsg/index.html" target="_blank"><span class="italic">“Oracle数据库数据仓库指南”</span></a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS73626"></a><a id="ARPLS73626"></a><div class="props_rev_3"><a id="GUID-4ACE8A80-4664-45C6-A7C6-683B2668C0A2" name="GUID-4ACE8A80-4664-45C6-A7C6-683B2668C0A2"></a><h3 id="ARPLS-GUID-4ACE8A80-4664-45C6-A7C6-683B2668C0A2" class="sect3"><span class="enumeration_section">167.2</span> DBMS_SYNC_REFRESH安全模型</h3>
               <div>
                  <p>此包的执行权限授予<code class="codeph">PUBLIC</code> ，因此所有用户都可以执行此包中的过程以对其拥有的对象执行同步刷新。数据库管理员可以对数据库中的所有表和物化视图执行同步刷新操作。
                  </p>
                  <div class="section">
                     <p>通常，如果没有<code class="codeph">DBA</code>权限的用户想要在另一个用户的表上使用同步刷新，他必须完成读取和写入该表的权限，用户必须具有<code class="codeph">SELECT</code>或<code class="codeph">READ</code> ， <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>和<code class="codeph">DELETE</code>该表或物化视图的权限。有几个例外：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">PURGE_REFRESH_STATS</code>和<code class="codeph">ALTER_REFRESH_STATS_RETENTION</code>函数</p>
                           <p>这两个函数实现清除策略，可用于更改默认保留期。这些功能只能由数据库管理员执行。</p>
                        </li>
                        <li>
                           <p><code class="codeph">CAN_SYNCREF_TABLE</code>函数</p>
                           <p>这是一个咨询功能，用于检查与指定表关联的所有物化视图的同步刷新资格。因此，此函数需要对与指定表关联的所有<code class="codeph">READ</code>化视图具有<code class="codeph">SELECT</code>或<code class="codeph">READ</code>权限。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS73627"></a><a id="ARPLS74619"></a><a id="ARPLS74619"></a><a id="ARPLS73627"></a><div class="props_rev_3"><a id="GUID-2BE7B003-1FFC-4DA6-90C8-18F7F46C3689" name="GUID-2BE7B003-1FFC-4DA6-90C8-18F7F46C3689"></a><h3 id="ARPLS-GUID-2BE7B003-1FFC-4DA6-90C8-18F7F46C3689" class="sect3"><span class="enumeration_section">167.3</span> DBMS_SYNC_REFRESH子程序摘要</h3>
               <div>
                  <p>此表列出并简要描述了<code class="codeph">DBMS_SYNC_REFRESH</code>程序。
                  </p>
                  <div class="tblformal" id="GUID-2BE7B003-1FFC-4DA6-90C8-18F7F46C3689__GUID-2C0FAF83-8F81-4CFB-B3F9-C0873530CDC0">
                     <p class="titleintable">表167-1 DBMS_SYNC_REFRESH包子程序</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_SYNC_REFRESH包子程序" width="100%" border="1" summary="This table lists and briefly describes the DBMS_SYNC_REFRESH package subprograms." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="34%" id="d1041791e467">子程序</th>
                              <th align="left" valign="bottom" width="66%" id="d1041791e470">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d1041791e475" headers="d1041791e467 ">
                                 <p><a href="DBMS_SYNC_REFRESH.html#GUID-31C77847-021A-40AE-A3D9-617EAE2C736A" title="此过程撤消PREPARE_REFRESH或EXECUTE_REFRESH对指定的同步刷新组所做的所有更改。它可以帮助您恢复到表和物化视图可用的状态，并在遇到意外错误时保持一致。">ABORT_REFRESH程序</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d1041791e475 d1041791e470 ">
                                 <p>中止刷新。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d1041791e493" headers="d1041791e467 ">
                                 <p><a href="DBMS_SYNC_REFRESH.html#GUID-CC0CEFDE-A6BA-4D55-AFAD-E558A3E0F910" title="此过程会更改以天为单位指定的刷新历史记录保留值。它旨在与PURGE_REFRESH_HISTORY结合使用。除了执行它的权限之外，它还需要SYSDBA权限。">ALTER_REFRESH_STATS_RETENTION过程</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d1041791e493 d1041791e470 ">
                                 <p>更改以天为单位指定的刷新历史记录保留值。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d1041791e511" headers="d1041791e467 ">
                                 <p><a href="DBMS_SYNC_REFRESH.html#GUID-02526EE8-8C24-4422-8889-A10B1D17F1B8" title="此过程建议表及其相关的物化视图是否符合同步刷新的条件。它提供了对其分析的解释。如果不符合条件，您可以检查原因并尽可能采取适当的措施。">CAN_SYNCREF_TABLE过程</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d1041791e511 d1041791e470 ">
                                 <p>建议表及其依赖的物化视图是否有资格进行同步刷新。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d1041791e523" headers="d1041791e467 ">
                                 <p><a href="DBMS_SYNC_REFRESH.html#GUID-EAD15BFC-29DF-465A-8FB3-DB18DD2132AE" title="此过程在DBMS_SYNC_REFRESH.PREPARE_REFRESH准备的同步刷新组上执行同步刷新。这些组由其组ID标识。">EXECUTE_REFRESH过程</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d1041791e523 d1041791e470 ">
                                 <p>在同步刷新组上执行同步刷新。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d1041791e538" headers="d1041791e467 ">
                                 <p><a href="DBMS_SYNC_REFRESH.html#GUID-D4B20742-2F92-487F-B963-5945632F279D" title="此函数返回数据库中所有同步刷新组的组ID。">GET_ALL_GROUP_IDS功能</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d1041791e538 d1041791e470 ">
                                 <p>返回数据库中所有同步刷新组的组ID。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d1041791e550" headers="d1041791e467 ">
                                 <p><a href="DBMS_SYNC_REFRESH.html#GUID-EA5AE93F-A866-4B8F-952E-1BAB57B85AA0" title="此函数返回实例化视图的组ID。组ID标识表所属的同步刷新组。同步刷新组是一组相关表及其相关的物化视图，必须将它们全部共同刷新以确保一致性和正确性。">GET_GROUP_ID函数</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d1041791e550 d1041791e470 ">
                                 <p>返回表或实例化视图的组ID。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d1041791e562" headers="d1041791e467 ">
                                 <p><a href="DBMS_SYNC_REFRESH.html#GUID-061B355B-7E7B-47EE-89F0-B67C51DB5F00" title="此函数返回给定对象列表（物化视图）中表的组ID。">GET_GROUP_ID_LIST函数</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d1041791e562 d1041791e470 ">
                                 <p>返回给定对象列表（表或物化视图）中表的组ID。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d1041791e574" headers="d1041791e467 ">
                                 <p><a href="DBMS_SYNC_REFRESH.html#GUID-D65211CF-79C0-4F55-93D5-78A59ED0AE7D" title="此过程准备刷新由输入中的组ID标识的同步刷新组。">PREPARE_REFRESH程序</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d1041791e574 d1041791e470 ">
                                 <p>准备同步刷新组以进行刷新。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d1041791e586" headers="d1041791e467 ">
                                 <p><a href="DBMS_SYNC_REFRESH.html#GUID-918D4791-025C-4EDD-A699-50D65F4E4A4F" title="此过程收集基表的分段日志中的数据统计信息，并验证日志中的数据。">PREPARE_STAGING_LOG过程</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d1041791e586 d1041791e470 ">
                                 <p>验证并收集有关暂存日志中数据的统计信息。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d1041791e598" headers="d1041791e467 ">
                                 <p><a href="DBMS_SYNC_REFRESH.html#GUID-DCE87825-C05F-46FD-A58A-825A55900C48" title="此过程将清除在BEFORE_TIMESTAMP参数指定的值之前发生的同步刷新的刷新历史记录。">PURGE_REFRESH_STATS程序</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d1041791e598 d1041791e470 ">
                                 <p>清除在timestamp参数指定的时间内发生的同步刷新的刷新历史记录。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d1041791e613" headers="d1041791e467 ">
                                 <p><a href="DBMS_SYNC_REFRESH.html#GUID-4E1ECE0F-A79E-4335-B9E6-992B58F86B46" title="此过程为同步刷新注册物化视图列表。">REGISTER_MVIEWS</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d1041791e613 d1041791e470 ">
                                 <p>注册物化视图以进行同步刷新。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d1041791e626" headers="d1041791e467 ">
                                 <p><a href="DBMS_SYNC_REFRESH.html#GUID-79818B51-CC72-4482-B5AC-5EEA9B77F244" title="此过程在基表的分区上注册分区维护操作（PMOP）。">REGISTER_PARTITION_OPERATION过程</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d1041791e626 d1041791e470 ">
                                 <p>在基表的分区上注册分区维护操作。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d1041791e638" headers="d1041791e467 ">
                                 <p><a href="DBMS_SYNC_REFRESH.html#GUID-6C2602DE-E73C-4BF3-B7E6-4A8D808C197C" title="此过程从同步刷新中取消注册实例化视图的列表。一旦物化视图未注册，用户可以使用任何传统刷新方法（例如完整或PCT）刷新来维护它。">UNREGISTER_MVIEWS</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d1041791e638 d1041791e470 ">
                                 <p>从同步刷新中取消注册实例化视图。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="34%" id="d1041791e650" headers="d1041791e467 ">
                                 <p><a href="DBMS_SYNC_REFRESH.html#GUID-13528F16-410C-44C4-965D-1DDAE63375FA" title="此过程取消注册先前已在基表上的REGISTER_PARTITION_OPERATION注册的分区维护操作（PMOP）。可以在分区上指定的三种更改操作是DROP，TRUNCATE和EXCHANGE。">UNREGISTER_PARTITION_OPERATION程序</a></p>
                              </td>
                              <td align="left" valign="top" width="66%" headers="d1041791e650 d1041791e470 ">
                                 <p>取消注册基表分区上的分区维护操作。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS74620"></a><a id="ARPLS74621"></a><a id="ARPLS74621"></a><a id="ARPLS74620"></a><div class="props_rev_3"><a id="GUID-31C77847-021A-40AE-A3D9-617EAE2C736A" name="GUID-31C77847-021A-40AE-A3D9-617EAE2C736A"></a><h4 id="ARPLS-GUID-31C77847-021A-40AE-A3D9-617EAE2C736A" class="sect4"><span class="enumeration_section">167.3.1</span> ABORT_REFRESH程序</h4>
                  <div>
                     <p>此过程撤消<code class="codeph">PREPARE_REFRESH</code>或<code class="codeph">EXECUTE_REFRESH</code>对指定的同步刷新组所做的所有更改。它可以帮助您恢复到表和物化视图可用的状态，并在遇到意外错误时保持一致。
                     </p>
                     <div class="section">
                        <p>此过程已超载。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-31C77847-021A-40AE-A3D9-617EAE2C736A__GUID-CE598E9E-E378-49D4-97D4-78FBDD0C233E">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SYNC_REFRESH.ABORT_REFRESH（group_id IN NUMBER）; DBMS_SYNC_REFRESH.ABORT_REFRESH（group_id_list IN DBMS_UTILITY.NUMBER_ARRAY）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-31C77847-021A-40AE-A3D9-617EAE2C736A__GUID-62D75C12-5971-4981-9083-CEC791E0D450">参数</p>
                        <div class="tblformal" id="GUID-31C77847-021A-40AE-A3D9-617EAE2C736A__GUID-2A654CBB-126C-49E9-B1D2-061E79F602DA">
                           <p class="titleintable">表167-2 ABORT_REFRESH过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ABORT_REFRESH过程参数" width="100%" border="1" summary="This table describes the parameters for DBMS_SYNC_REFRESH.ABORT_REFRESH." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1041791e788">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d1041791e791">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1041791e796" headers="d1041791e788 ">
                                       <p><code class="codeph">GROUP_ID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1041791e796 d1041791e791 ">
                                       <p>同步刷新组的组ID。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1041791e804" headers="d1041791e788 ">
                                       <p><code class="codeph">group_id_list</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1041791e804 d1041791e791 ">
                                       <p>要中止同步刷新的同步刷新组的组ID数组。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-31C77847-021A-40AE-A3D9-617EAE2C736A__GUID-2F7FFDC0-DF78-48FF-A5F4-E1D80DB07EBE">使用说明</p>
                        <p>如果在<code class="codeph">PREPARE_REFRESH</code>之后<code class="codeph">PREPARE_REFRESH</code> ，则此过程将删除<code class="codeph">PREPARE_REFRESH</code>创建的外部表，并解锁同步刷新组中的表和<code class="codeph">PREPARE_REFRESH</code>化视图。
                        </p>
                        <p>如果在<code class="codeph">EXECUTE_REFRESH</code>失败后调用，则此过程通过撤消已成功完成的任何分区交换来将表的状态恢复到<code class="codeph">EXECUTE_REFRESH</code>之前。
                        </p>
                        <p>此过程释放放置在同步刷新组中的表上的锁，这些锁由<code class="codeph">PREPARE_REFRESH</code>过程放置在它们上。有关这些锁的说明，请参见<span class="q">“ <a href="DBMS_SYNC_REFRESH.html#GUID-D65211CF-79C0-4F55-93D5-78A59ED0AE7D" title="此过程准备刷新由输入中的组ID标识的同步刷新组。">PREPARE_REFRESH过程</a> ”</span> 。
                        </p>
                        <p>仅当<code class="codeph">PREPARE_REFRESH</code>或<code class="codeph">EXECUTE_REFRESH</code>语句失败时， <code class="codeph">ABORT_REFRESH</code>才会起作用。成功运行这些命令后无法使用它，并在这种情况下抛出错误。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74622"></a><a id="ARPLS74623"></a><a id="ARPLS74623"></a><a id="ARPLS74622"></a><div class="props_rev_3"><a id="GUID-CC0CEFDE-A6BA-4D55-AFAD-E558A3E0F910" name="GUID-CC0CEFDE-A6BA-4D55-AFAD-E558A3E0F910"></a><h4 id="ARPLS-GUID-CC0CEFDE-A6BA-4D55-AFAD-E558A3E0F910" class="sect4"><span class="enumeration_section">167.3.2</span> ALTER_REFRESH_STATS_RETENTION过程</h4>
                  <div>
                     <p>此过程会更改以天为单位指定的刷新历史记录保留值。它旨在与<code class="codeph">PURGE_REFRESH_HISTORY</code>结合使用。除了执行它的权限之外，它还需要<code class="codeph">SYSDBA</code>权限。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-CC0CEFDE-A6BA-4D55-AFAD-E558A3E0F910__GUID-6BA37591-74FE-4EED-AE82-A179C8A3FB38">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SYNC_REFRESH.ALTER_REFRESH_STATS_RETENTION（保留在数字中）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CC0CEFDE-A6BA-4D55-AFAD-E558A3E0F910__GUID-C160AAAC-1F9F-4428-9E7C-666BE1207E6B">参数</p>
                        <div class="tblformal" id="GUID-CC0CEFDE-A6BA-4D55-AFAD-E558A3E0F910__GUID-18BE83BA-FD26-491D-84D4-B09E57135B41">
                           <p class="titleintable">表167-3 ALTER_REFRESH_STATS_RETENTION过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ALTER_REFRESH_STATS_RETENTION过程参数" width="100%" border="1" summary="This table describes the parameters for DBMS_SYNC_REFRESH.ALTER_REFRESH_STATS_RETENTION." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="26%" id="d1041791e963">参数</th>
                                    <th align="left" valign="bottom" width="74%" id="d1041791e966">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d1041791e971" headers="d1041791e963 ">
                                       <p><code class="codeph">保留</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d1041791e971 d1041791e966 ">
                                       <p>保留时间（天）。刷新历史记录将至少保留这么多天。有效范围是1到365,000。</p>
                                       <p>您可以将以下值用于特殊目的：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>-1  - <code class="codeph">PREPARE_REFRESH</code>永远不会清除刷新历史记录。</p>
                                          </li>
                                          <li>
                                             <p>0  - 永远不会保存旧刷新历史记录。<code class="codeph">PREPARE_REFRESH</code>将删除所有刷新历史记录。
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">NULL</code> - 将刷新历史记录保留更改为默认值。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74624"></a><a id="ARPLS74625"></a><a id="ARPLS74625"></a><a id="ARPLS74624"></a><div class="props_rev_3"><a id="GUID-02526EE8-8C24-4422-8889-A10B1D17F1B8" name="GUID-02526EE8-8C24-4422-8889-A10B1D17F1B8"></a><h4 id="ARPLS-GUID-02526EE8-8C24-4422-8889-A10B1D17F1B8" class="sect4"><span class="enumeration_section">167.3.3</span> CAN_SYNCREF_TABLE过程</h4>
                  <div>
                     <p>此过程建议表及其相关的物化视图是否符合同步刷新的条件。它提供了对其分析的解释。如果不符合条件，您可以检查原因并尽可能采取适当的措施。</p>
                     <div class="section">
                        <p>此过程列出了表的所有相关物化视图以及它们是否有资格进行同步刷新。请注意，实体化视图可能有资格进行同步刷新，即使基表可能不符合。</p>
                        <p><a href="../dwhsg/index.html" target="_blank"><span class="italic">Oracle数据库数据仓库指南</span></a>中详细讨论了用于同步刷新的物化视图的资格规则<a href="../dwhsg/index.html" target="_blank"><span class="italic">。</span></a></p>
                        <p>您可以通过两种方式调用<code class="codeph">CAN_SYNCREF_TABLE</code> 。第一种是使用表，而第二种是创建<code class="codeph">VARRAY</code> 。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-02526EE8-8C24-4422-8889-A10B1D17F1B8__GUID-F79C34AD-FDD8-4E7D-A8BD-A656EC75052C">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SYNC_REFRESH.CAN_SYNCREF_TABLE（schema_name IN VARCHAR2，table_name IN VARCHAR2，statement_id IN VARCHAR2）; DBMS_SYNC_REFRESH.CAN_SYNCREF_TABLE（schema_name IN VARCHAR2，table_name IN VARCHAR2，output_array IN OUT Sys。CanSyncRefTypeArray）;</pre><p></p>
                        <p>请注意，只有一个<code class="codeph">statement_id</code>或<code class="codeph">output_array</code>需要被提供给<code class="codeph">CAN_SYNCREF_TABLE</code> 。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-02526EE8-8C24-4422-8889-A10B1D17F1B8__GUID-683843EA-9EB4-4857-9E3B-45A7E604CBC6">参数</p>
                        <div class="tblformal" id="GUID-02526EE8-8C24-4422-8889-A10B1D17F1B8__GUID-239FA7B0-FBBB-49E6-84A6-07B8F2FB576A">
                           <p class="titleintable">表167-4 CAN_SYNCREF_TABLE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="CAN_SYNCREF_TABLE过程参数" width="100%" border="1" summary="This table describes the parameters for DBMS_SYNC_REFRESH.CAN_SYNCREF_TABLE." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="28%" id="d1041791e1133">参数</th>
                                    <th align="left" valign="bottom" width="72%" id="d1041791e1136">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1041791e1141" headers="d1041791e1133 ">
                                       <p><code class="codeph">SCHEMA_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1041791e1141 d1041791e1136 ">
                                       <p>基表的架构名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1041791e1149" headers="d1041791e1133 ">
                                       <p><code class="codeph">TABLE_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1041791e1149 d1041791e1136 ">
                                       <p>基表的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1041791e1157" headers="d1041791e1133 ">
                                       <p><code class="codeph">statement_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1041791e1157 d1041791e1136 ">
                                       <p>一个字符串（ <code class="codeph">VARCHAR2(30)</code> ），用于在输出定向到用户模式中名为<code class="codeph">SYNCREF_TABLE</code>的表时，标识与调用<code class="codeph">CAN_SYNCREF_TABLE</code>相关的行。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1041791e1174" headers="d1041791e1133 ">
                                       <p><code class="codeph">output_array</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1041791e1174 d1041791e1136 ">
                                       <p><code class="codeph">CAN_SYNCREF_TABLE</code>在其中记录有关基表及其相关物化视图的同步刷新资格的信息的输出数组。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-02526EE8-8C24-4422-8889-A10B1D17F1B8__GUID-08BED2FC-CD29-4975-ABA3-1B7EBE716431">使用SYNCREF_TABLE</p>
                        <p><code class="codeph">CAN_SYNCREF_TABLE</code>的输出可以定向到名为<code class="codeph">SYNCREF_TABLE</code>的表。用户负责创建<code class="codeph">SYNCREF_TABLE</code> ;它可以在不再需要时丢弃。其结构如下：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE SYNCREF_TABLE（statement_id VARCHAR2（30），schema_name VARCHAR2（30），table_name VARCHAR2（30），mv_schema_name VARCHAR2（30），mv_name VARCHAR2（30），符合条件的VARCHAR2（1），seq_num NUMBER，msg_number NUMBER，消息VARCHAR2（4000） ））;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-02526EE8-8C24-4422-8889-A10B1D17F1B8__GUID-4D02BCBC-EC8C-44D1-A908-9365BECCEF7B">使用VARRAY</p>
                        <p>您可以在PL / SQL <code class="codeph">VARRAY</code>保存<code class="codeph">CAN_SYNCREF_TABLE</code>的输出。此数组的元素是<code class="codeph">CanSyncRefMessage</code>类型，它是在<code class="codeph">SYS</code>模式中预定义的，如下所示：</p><pre class="oac_no_warn" dir="ltr">TYPE CanSyncRefMessage IS OBJECT（schema_name VARCHAR2（30），table_name VARCHAR2（30），mv_schema_name VARCHAR2（30），mv_name VARCHAR2（30），符合条件的VARCHAR2（1），seq_num NUMBER，msg_number NUMBER，消息VARCHAR2（4000））;</pre><p>数组类型<code class="codeph">CanSyncRefArrayType</code>是<code class="codeph">CanSyncRefMessage</code>对象的<code class="codeph">CanSyncRefMessage</code> ，在<code class="codeph">SYS</code>模式中预定义，如下所示：</p><pre class="oac_no_warn" dir="ltr">TYPE CanSyncRefArrayType AS VARRAY（256）OF CanSyncRefMessage;</pre><p>每个<code class="codeph">CanSyncRefMessage</code>记录都提供有关基表资格的消息或同步刷新的从属物化视图。字段的语义与<code class="codeph">SYNCREF_TABLE</code>相应字段的语义相同。但是， <code class="codeph">SYNCREF_TABLE</code>具有一个<code class="codeph">statement_id</code>字段，该字段在<code class="codeph">CanSyncRefMessage</code>不存在，因为当使用<code class="codeph">VARRAY</code>参数调用<code class="codeph">CAN_SYNCREF_TABLE</code>时，不提供<code class="codeph">statement_id</code> （因为它不是必需的）。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74626"></a><a id="ARPLS74627"></a><a id="ARPLS74627"></a><a id="ARPLS74626"></a><div class="props_rev_3"><a id="GUID-EAD15BFC-29DF-465A-8FB3-DB18DD2132AE" name="GUID-EAD15BFC-29DF-465A-8FB3-DB18DD2132AE"></a><h4 id="ARPLS-GUID-EAD15BFC-29DF-465A-8FB3-DB18DD2132AE" class="sect4"><span class="enumeration_section">167.3.4</span> EXECUTE_REFRESH过程</h4>
                  <div>
                     <p>此过程在<code class="codeph">DBMS_SYNC_REFRESH.PREPARE_REFRESH</code>准备的同步刷新组上执行同步刷新。这些组由其组ID标识。
                     </p>
                     <div class="section">
                        <p>请注意，此过程仅对已注册同步刷新的物化视图执行刷新;一旦此过程完成，任何其他物化视图将变为陈旧。</p>
                        <p>有关如何监视两个同步刷新操作（ <code class="codeph">PREPARE_REFRESH</code>和<code class="codeph">EXECUTE_REFRESH</code>以及如何使用目录视图中的信息对可能发生的错误进行故障排除的更多信息，请参阅<a href="../dwhsg/index.html" target="_blank"><span class="italic">Oracle数据库数据仓库中的</span></a> “故障排除同步刷新操作” <a href="../dwhsg/index.html" target="_blank"><span class="italic">指南。</span></a></p>
                        <p>此过程已超载。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EAD15BFC-29DF-465A-8FB3-DB18DD2132AE__GUID-0FAF0972-EADC-4258-822E-8A2ED3F9A89F">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SYNC_REFRESH.EXECUTE_REFRESH（group_id IN NUMBER）; DBMS_SYNC_REFRESH.EXECUTE_REFRESH（group_id_list IN DBMS_UTILITY.NUMBER_ARRAY）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EAD15BFC-29DF-465A-8FB3-DB18DD2132AE__GUID-D1140E0B-6353-44A1-A045-12BEAC9E150D">参数</p>
                        <div class="tblformal" id="GUID-EAD15BFC-29DF-465A-8FB3-DB18DD2132AE__GUID-7EBBADF7-B415-40E3-B4A3-4FBADB2AF711">
                           <p class="titleintable">表167-5 EXECUTE_REFRESH过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="EXECUTE_REFRESH过程参数" width="100%" border="1" summary="This table describes the parameters for DBMS_SYNC_REFRESH.EXECUTE_REFRESH." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1041791e1385">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d1041791e1388">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1041791e1393" headers="d1041791e1385 ">
                                       <p><code class="codeph">GROUP_ID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1041791e1393 d1041791e1388 ">
                                       <p>同步刷新组的组ID。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1041791e1401" headers="d1041791e1385 ">
                                       <p><code class="codeph">group_id_list</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1041791e1401 d1041791e1388 ">
                                       <p>要执行同步刷新的同步刷新组的组ID数组。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EAD15BFC-29DF-465A-8FB3-DB18DD2132AE__GUID-47504960-D877-47A9-A0AD-A956E7110E2D">使用说明</p>
                        <p>此过程还会释放由<code class="codeph">PREPARE_REFRESH</code>过程放置在同步刷新组中的表上的锁。有关这些锁和<a href="../refrn/DBA_SR_OBJ_STATUS.html#REFRN23873" target="_blank"><span class="italic">Oracle数据库参考</span></a>的说明，请参阅<span class="q">“ <a href="DBMS_SYNC_REFRESH.html#GUID-D65211CF-79C0-4F55-93D5-78A59ED0AE7D" title="此过程准备刷新由输入中的组ID标识的同步刷新组。">PREPARE_REFRESH过程</a> ”</span> ，以获取有关<code class="codeph">DBMS_SYNC_REFRESH.EXECUTE_REFRESH</code>之后的刷新操作状态的信息。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74628"></a><a id="ARPLS74629"></a><a id="ARPLS74629"></a><a id="ARPLS74628"></a><div class="props_rev_3"><a id="GUID-D4B20742-2F92-487F-B963-5945632F279D" name="GUID-D4B20742-2F92-487F-B963-5945632F279D"></a><h4 id="ARPLS-GUID-D4B20742-2F92-487F-B963-5945632F279D" class="sect4"><span class="enumeration_section">167.3.5</span> GET_ALL_GROUP_IDS功能</h4>
                  <div>
                     <p>此函数返回数据库中所有同步刷新组的组ID。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-D4B20742-2F92-487F-B963-5945632F279D__GUID-2B00A3EC-963B-4F80-9DD2-4D7D04635DC5">句法</p><pre class="oac_no_warn" dir="ltr">功能DBMS_SYNC_REFRESH.GET_ALL_GROUP_IDS返回DBMS_UTILITY.NUMBER_ARRAY;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D4B20742-2F92-487F-B963-5945632F279D__GUID-DC76E06D-5BF4-421C-9470-E329B273C991">参数</p>
                        <div class="tblformal" id="GUID-D4B20742-2F92-487F-B963-5945632F279D__GUID-8151EB04-6666-4BD2-9F18-0D194ABF64E6">
                           <p class="titleintable">表167-6 GET_ALL_GROUP_IDS函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="GET_ALL_GROUP_IDS函数参数" width="100%" border="1" summary="This table describes the parameters for DBMS_SYNC_REFRESH.GET_ALL_GROUP_IDS." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1041791e1539">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d1041791e1542">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1041791e1547" headers="d1041791e1539 ">
                                       <p><code class="codeph">get_all_group_ids</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1041791e1547 d1041791e1542 ">
                                       <p>返回数据库中所有同步刷新组的组ID。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74630"></a><a id="ARPLS74631"></a><a id="ARPLS74631"></a><a id="ARPLS74630"></a><div class="props_rev_3"><a id="GUID-EA5AE93F-A866-4B8F-952E-1BAB57B85AA0" name="GUID-EA5AE93F-A866-4B8F-952E-1BAB57B85AA0"></a><h4 id="ARPLS-GUID-EA5AE93F-A866-4B8F-952E-1BAB57B85AA0" class="sect4"><span class="enumeration_section">167.3.6</span> GET_GROUP_ID函数</h4>
                  <div>
                     <p>此函数返回实例化视图的组ID。组ID标识表所属的同步刷新组。同步刷新组是一组相关表及其相关的物化视图，必须将它们全部共同刷新以确保一致性和正确性。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-EA5AE93F-A866-4B8F-952E-1BAB57B85AA0__GUID-4622EA4D-2758-49F3-B2F8-15A77417B497">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SYNC_REFRESH.GET_GROUP_ID（object_name_list IN VARCHAR2）RETURN DBMS_UTILITY.NUMBER_ARRAY;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EA5AE93F-A866-4B8F-952E-1BAB57B85AA0__GUID-D5031120-9853-48E8-9BE3-8881B211465A">参数</p>
                        <div class="tblformal" id="GUID-EA5AE93F-A866-4B8F-952E-1BAB57B85AA0__GUID-1373027B-DD2F-4ED7-AC38-6D32946A1418">
                           <p class="titleintable">表167-7 GET_GROUP_ID函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="GET_GROUP_ID函数参数" width="100%" border="1" summary="This table describes the parameters for DBMS_SYNC_REFRESH.GET_GROUP_ID." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1041791e1660">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d1041791e1663">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1041791e1668" headers="d1041791e1660 ">
                                       <p><code class="codeph">object_name_list</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1041791e1668 d1041791e1663 ">
                                       <p>物化视图的名称。该名称可以是模式限定的。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74632"></a><a id="ARPLS74633"></a><a id="ARPLS74633"></a><a id="ARPLS74632"></a><div class="props_rev_3"><a id="GUID-061B355B-7E7B-47EE-89F0-B67C51DB5F00" name="GUID-061B355B-7E7B-47EE-89F0-B67C51DB5F00"></a><h4 id="ARPLS-GUID-061B355B-7E7B-47EE-89F0-B67C51DB5F00" class="sect4"><span class="enumeration_section">167.3.7</span> GET_GROUP_ID_LIST函数</h4>
                  <div>
                     <p>此函数返回给定对象列表（物化视图）中表的组ID。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-061B355B-7E7B-47EE-89F0-B67C51DB5F00__GUID-5C7523D3-DCD3-40A3-B1AE-C0C65B58F5E4">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SYNC_REFRESH.GET_GROUP_ID_LIST（object_name_list IN VARCHAR2）RETURN DBMS_UTILITY.NUMBER_ARRAY;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-061B355B-7E7B-47EE-89F0-B67C51DB5F00__GUID-3A40C51A-2717-4F4D-ACF2-B34A59924500">参数</p>
                        <div class="tblformal" id="GUID-061B355B-7E7B-47EE-89F0-B67C51DB5F00__GUID-BC67F18D-8308-42CE-AF16-92AC373F5758">
                           <p class="titleintable">表167-8 GET_GROUP_ID_LIST函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="GET_GROUP_ID_LIST函数参数" width="100%" border="1" summary="This table describes the parameters for DBMS_SYNC_REFRESH.GET_GROUP_ID_LIST." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1041791e1781">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d1041791e1784">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1041791e1789" headers="d1041791e1781 ">
                                       <p><code class="codeph">object_name_list</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1041791e1789 d1041791e1784 ">
                                       <p>以逗号分隔的对象名称列表（物化视图）。每个名称都可以是模式限定的。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74634"></a><a id="ARPLS74635"></a><a id="ARPLS74635"></a><a id="ARPLS74634"></a><div class="props_rev_3"><a id="GUID-D65211CF-79C0-4F55-93D5-78A59ED0AE7D" name="GUID-D65211CF-79C0-4F55-93D5-78A59ED0AE7D"></a><h4 id="ARPLS-GUID-D65211CF-79C0-4F55-93D5-78A59ED0AE7D" class="sect4"><span class="enumeration_section">167.3.8</span> PREPARE_REFRESH程序</h4>
                  <div>
                     <p>此过程准备刷新由输入中的组ID标识的同步刷新组。</p>
                     <div class="section">
                        <p>同步刷新组由一组相关表和依赖于这些基表的所有物化视图组成。请注意，此过程仅准备刷新已注册用于同步刷新的相关实例化视图。</p>
                        <p>有关如何监视两个同步刷新操作（ <code class="codeph">PREPARE_REFRESH</code>和<code class="codeph">EXECUTE_REFRESH</code>以及如何使用目录视图中的信息对可能发生的错误进行故障排除的更多信息，请参阅<a href="../dwhsg/index.html" target="_blank"><span class="italic">Oracle数据库数据仓库中的</span></a> “故障排除同步刷新操作” <a href="../dwhsg/index.html" target="_blank"><span class="italic">指南。</span></a></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D65211CF-79C0-4F55-93D5-78A59ED0AE7D__GUID-6C024CCA-C6B2-4FF0-A993-C22595F4043C">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SYNC_REFRESH.PREPARE_REFRESH（group_id IN NUMBER）返回DBMS_UTILITY.NUMBER_ARRAY;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D65211CF-79C0-4F55-93D5-78A59ED0AE7D__GUID-E588549F-698A-4EB1-9578-0F3EE3607C3B">参数</p>
                        <div class="tblformal" id="GUID-D65211CF-79C0-4F55-93D5-78A59ED0AE7D__GUID-FC9CF2A0-E70D-47F2-AF49-7F7018F19401">
                           <p class="titleintable">表167-9 PREPARE_REFRESH过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="PREPARE_REFRESH过程参数" width="100%" border="1" summary="This table describes the parameters for the DBMS_SYNC_REFRESH.PREPARE_REFRESH." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1041791e1918">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d1041791e1921">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1041791e1926" headers="d1041791e1918 ">
                                       <p><code class="codeph">GROUP_ID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1041791e1926 d1041791e1921 ">
                                       <p>要为同步刷新准备的同步刷新组的组ID。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D65211CF-79C0-4F55-93D5-78A59ED0AE7D__GUID-6EC14903-0482-46A2-B5FA-159C74A96EFC">使用说明</p>
                        <p>此过程计划同步刷新操作的三个阶段，并执行与准备阶段本身相关的步骤。这些步骤包括识别事实表的分区和已更改的物化视图，以及根据更改计算其新值。分区的新值存储在称为外部表的表中，这些表在<code class="codeph">EXECUTE_REFRESH</code>时交换到其对应的分区中。</p>
                        <p>在运行此过程之前，用户必须对组中的所有表运行<code class="codeph">PREPARE_STAGING_LOG</code> 。即使对没有更改的日志记录，这也是必需的。用户还必须使用<code class="codeph">REGISTER_PARTITION_OPERATION</code>在组中的表上注册任何分区操作。</p>
                        <p>此过程的一个副作用是正在准备的表被锁定在这个意义上：表的登台日志将被锁定以防止发生任何DML并且将禁用分区操作的注册。在您发出<code class="codeph">EXECUTE_REFRESH</code>语句之前，这些锁定将一直有效。或者，您可以发出<code class="codeph">ABORT_REFRESH</code>操作来释放这些锁。此过程的另一个副作用是从早期同步刷新操作的目录记录中清除;如果它们比保留期更早，则将其清除。
                        </p>
                        <p>准备刷新作业的并行度继承自可以使用<code class="codeph">ALTER</code> <code class="codeph">SESSION</code>语句控制的会话参数。
                        </p>
                        <p>可以使用<code class="codeph">GET_GROUP_ID(table_name)</code>找到表的组ID。可以使用<code class="codeph">GET_GROUP_ID_LIST(table_name_list)</code>找到表列表的组ID。可以使用<code class="codeph">GET_ALL_GROUP_IDS</code>检索所有表列表的组ID。</p>
                        <p>默认情况下，同步刷新不会维护属于同步刷新组中的表和物化视图的全局索引。如果您希望这样做，可以在执行<code class="codeph">PREPARE_REFRESH</code>之前设置事件31904，级别64。这将导致<code class="codeph">PREPARE_REFRESH</code>生成的分区交换DDL语句附加<code class="codeph">UPDATE</code> <code class="codeph">INDEXES</code>子句，当它们由<code class="codeph">EXECUTE_REFRESH</code>执行时，将保留全局索引。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74636"></a><a id="ARPLS74637"></a><a id="ARPLS74637"></a><a id="ARPLS74636"></a><div class="props_rev_3"><a id="GUID-918D4791-025C-4EDD-A699-50D65F4E4A4F" name="GUID-918D4791-025C-4EDD-A699-50D65F4E4A4F"></a><h4 id="ARPLS-GUID-918D4791-025C-4EDD-A699-50D65F4E4A4F" class="sect4"><span class="enumeration_section">167.3.9</span> PREPARE_STAGING_LOG过程</h4>
                  <div>
                     <p>此过程收集基表的分段日志中的数据统计信息，并验证日志中的数据。</p>
                     <div class="section">
                        <p>它可以在几种不同的模式下运行，从执行严格检查数据的强制模式到不进行检查的可信模式。您应该在加载登台日志之后和运行<code class="codeph">PREPARE_REFRESH</code>之前运行此过程。</p>
                        <p>在强制模式（默认情况下）下，此过程将填充要删除或更新的行的列的缺失值。如果发现任何违反登台日志规则的行为，则会引发错误。您可以查询视图<code class="codeph">USER_SR_STLOG_EXCEPTIONS</code>以获取有关异常的详细信息。
                        </p>
                        <p>“ <a href="../dwhsg/index.html" target="_blank"><span class="italic">Oracle数据库数据仓库指南”中</span></a>介绍了登台日志密钥的概念<a href="../dwhsg/index.html" target="_blank"><span class="italic">。</span></a></p>
                        <p>在强制模式下，此过程处理登台日志中的每个删除/更新行，如下所示：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>它使用密钥验证基表中是否存在行。</p>
                           </li>
                           <li>
                              <p>对于要删除的行（ <code class="codeph">DMLTYPE$$</code>为<code class="codeph">'D'</code> ），它会验证基表中是否存在具有此键的行;如果在暂存日志中提供了非空的非键值，则验证这些值是否与基表中的相应列匹配;否则在例外表中记录一个异常。如果缺少任何非键列的值，则会从基表中的行填充这些值。
                              </p>
                           </li>
                           <li>
                              <p>对于要更新的行（ <code class="codeph">DMLTYPE$$</code>是<code class="codeph">'UO'</code>或<code class="codeph">'UN'</code> ），它会验证基表中是否存在具有此键的行。在旧值行（ <code class="codeph">DMLTYPE$$</code>是<code class="codeph">'UO'</code> ）中，它进行相同的检查并执行与删除行相同的处理。在新值行（ <code class="codeph">DMLTYPE$$</code>是<code class="codeph">'UN'</code> ）中，它检查至少一列的值与其旧值不同;否则记录异常。
                              </p>
                           </li>
                           <li>
                              <p>在新值行（ <code class="codeph">DMLTYPE$$</code>是<code class="codeph">'UN'</code> ）中，列中的空值被解释为具有与列的旧值相同的值，除非旧值为非null且新值为null在这种情况下，列的新值被解释为null。这要求用户必须提供正在更新为<code class="codeph">NULL</code>的旧值。</p>
                           </li>
                        </ul>
                        <p>在默认强制模式下，此过程将验证是否为删除或更新操作最多指定了一次键。这意味着用户在进行更改合并时，必须将同一行的delete-insert合并到行<code class="codeph">'UO'</code>和<code class="codeph">'UN</code> ;'的更新操作中。必须将多个更新合并为单个更新;并且空行更改（例如同一行的insert-update-delete）不得出现在登台日志中。
                        </p>
                        <p>在强制模式下完成的检查可能非常耗时。如果您对数据的完整性有信心，则可以选择较低级别的检查。您可以选择：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>通过选择<code class="codeph">psl_mode</code>的<code class="codeph">DBMS_SYNC_REFRESH.INSERT_TRUSTED</code>信任所有插入行（ <code class="codeph">DMLTYPE$$</code>是<code class="codeph">'I')</code></p>
                           </li>
                           <li>
                              <p>通过选择<code class="codeph">psl_mode</code>的<code class="codeph">DBMS_SYNC_REFRESH.DELETE_TRUSTED</code>信任所有删除行（ <code class="codeph">DMLTYPE$$</code>为<code class="codeph">'D'</code> ）</p>
                           </li>
                           <li>
                              <p>通过选择<code class="codeph">psl_mode</code>的<code class="codeph">DBMS_SYNC_REFRESH.UPDATE_TRUSTED</code>信任所有更新行（ <code class="codeph">DMLTYPE$$</code>是<code class="codeph">'UO</code> '或<code class="codeph">'UN'</code> ）</p>
                           </li>
                           <li>
                              <p>通过选择<code class="codeph">psl_mode</code>的<code class="codeph">DBMS_SYNC_REFRESH.TRUSTED</code>信任所有三种类型的DML。</p>
                           </li>
                        </ul>
                        <p>此外，您可以将<code class="codeph">psl_mode</code>指定为上述标志的位掩码。例如， <code class="codeph">DBMS_SYNC_REFRESH.INSERT_TRUSTED</code> + <code class="codeph">DBMS_SYNC_REFRESH_DELETE_TRUSTED</code>会将插入和删除视为可信但不会更新。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-918D4791-025C-4EDD-A699-50D65F4E4A4F__GUID-6FBFAC87-595A-4C0D-90DA-AED7C5C346E8">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SYNC_REFRESH.PREPARE_STAGING_LOG（schema_name IN VARCHAR2，base_table_name IN VARCHAR2，psl_mode IN NUMBER DEFAULT DBMS_SYNC_REFRESH.ENFORCED）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-918D4791-025C-4EDD-A699-50D65F4E4A4F__GUID-6C4D803C-0D76-46C3-AD8D-3A01A72E9073">参数</p>
                        <div class="tblformal" id="GUID-918D4791-025C-4EDD-A699-50D65F4E4A4F__GUID-2D373676-3E32-465B-A40F-C8DB789113FF">
                           <p class="titleintable">表167-10 PREPARE_STAGING_LOG过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="PREPARE_STAGING_LOG过程参数" width="100%" border="1" summary="This table describes the parameters in DBMS_SYNC_REFRESH.PREPARE_STAGING_LOG." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1041791e2244">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d1041791e2247">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1041791e2252" headers="d1041791e2244 ">
                                       <p><code class="codeph">SCHEMA_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1041791e2252 d1041791e2247 ">
                                       <p>基表的架构名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1041791e2260" headers="d1041791e2244 ">
                                       <p><code class="codeph">base_table_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1041791e2260 d1041791e2247 ">
                                       <p>基表的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1041791e2268" headers="d1041791e2244 ">
                                       <p><code class="codeph">psl_mode</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1041791e2268 d1041791e2247 ">
                                       <p>应该进行分段日志准备的模式。可能的值是：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">DBMS_SYNC_REFRESH.ENFORCED</code> （默认值）</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DBMS_SYNC_REFRESH.INSERT_TRUSTED</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DBMS_SYNC_REFRESH.DELETE_TRUSTED</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DBMS_SYNC_REFRESH.UPDATE_TRUSTED</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">DBMS_SYNC_REFRESH.TRUSTED</code></p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74638"></a><a id="ARPLS74639"></a><a id="ARPLS74639"></a><a id="ARPLS74638"></a><div class="props_rev_3"><a id="GUID-DCE87825-C05F-46FD-A58A-825A55900C48" name="GUID-DCE87825-C05F-46FD-A58A-825A55900C48"></a><h4 id="ARPLS-GUID-DCE87825-C05F-46FD-A58A-825A55900C48" class="sect4"><span class="enumeration_section">167.3.10</span> PURGE_REFRESH_STATS程序</h4>
                  <div>
                     <p>此过程将清除在<code class="codeph">BEFORE_TIMESTAMP</code>参数指定的值之前发生的同步刷新的刷新历史记录。
                     </p>
                     <div class="section">
                        <p>除了执行它的权限之外，此过程还需要<code class="codeph">SYSDBA</code>权限。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DCE87825-C05F-46FD-A58A-825A55900C48__GUID-4CAC7F4C-1533-4477-904F-DEC0C92CC1A9">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SYNC_REFRESH.PURGE_REFRESH_STATS（带有时区的TIMESTAMP的before_timestamp）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DCE87825-C05F-46FD-A58A-825A55900C48__GUID-9912B7FC-3308-4AB9-8C9D-EAE5E799F4B4">参数</p>
                        <div class="tblformal" id="GUID-DCE87825-C05F-46FD-A58A-825A55900C48__GUID-9992F69B-EA0D-4CC5-A1FE-C33032B1A0DA">
                           <p class="titleintable">表167-11 PURGE_REFRESH_STATS过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="PURGE_REFRESH_STATS过程参数" width="100%" border="1" summary="This table describes the parameters for DBMS_SYNC_REFRESH.PURGE_REFRESH_STATS." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d1041791e2416">参数</th>
                                    <th align="left" valign="bottom" width="75%" id="d1041791e2419">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1041791e2424" headers="d1041791e2416 ">
                                       <p><code class="codeph">before_timestamp</code></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d1041791e2424 d1041791e2419 ">
                                       <p>清除此时间戳之前保存的同步刷新记录。如果为<code class="codeph">NULL</code> ，则使用自动清除使用的清除策略。自动清除将删除所有早于（当前时间 - 刷新 - 历史记录保留）的历史记录。可以使用<code class="codeph">ALTER_REFRESH_STATS_RETENTION</code>更改刷新历史记录保留值。默认值为31天。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74938"></a><a id="ARPLS74939"></a><a id="ARPLS74939"></a><a id="ARPLS74938"></a><div class="props_rev_3"><a id="GUID-4E1ECE0F-A79E-4335-B9E6-992B58F86B46" name="GUID-4E1ECE0F-A79E-4335-B9E6-992B58F86B46"></a><h4 id="ARPLS-GUID-4E1ECE0F-A79E-4335-B9E6-992B58F86B46" class="sect4"><span class="enumeration_section">167.3.11</span> REGISTER_MVIEWS</h4>
                  <div>
                     <p>此过程为同步刷新注册物化视图列表。</p>
                     <div class="section">
                        <p>它会检查列表中的每个物化视图是否符合资格，并将其置于其所属的同步刷新组中。同步刷新组是一组相关的表和在其上定义的物化视图。如果两个表之间存在引用约束，则认为它们是相关的。</p>
                        <p><a href="../dwhsg/index.html" target="_blank"><span class="italic">Oracle数据库数据仓库指南</span></a>中详细介绍了同步刷新的物化视图的资格规则<a href="../dwhsg/index.html" target="_blank"><span class="italic">。</span></a> 主要要求是必须对实例化视图进行分区，并且其分区键必须可以从其事实表的分区键派生。物化视图定义必须指定<code class="codeph">USING</code> <code class="codeph">TRUSTED</code> <code class="codeph">CONSTRAINTS</code>子句，因为同步刷新信任外键和主键关系以执行各种刷新优化。物化视图的刷新策略必须指定为<code class="codeph">ON</code> <code class="codeph">DEMAND</code> 。</p>
                        <p>您可以选择仅注册与表关联的某些物化视图，并保留一些未注册的视图。Oracle Corporation不建议这样做，在这种情况下，用户必须使用PCT或完整刷新方法维护未注册的。</p>
                        <p>必须已为物化视图列表（ <code class="codeph">mv_list</code> ）中每个物化视图的每个基表创建一个临时表，否则将引发错误。
                        </p>
                        <p>如果任何实例化视图不符合同步刷新条件，则会引发错误，并且实例化视图列表中所有实例化视图的注册将失败。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4E1ECE0F-A79E-4335-B9E6-992B58F86B46__GUID-A0EDB4E5-F8E7-4A14-9A7B-2D312F517E11">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SYNC_REFRESH.REGISTER_MVIEWS（mv_list IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4E1ECE0F-A79E-4335-B9E6-992B58F86B46__GUID-FA90F5F1-D0FA-4C91-9ABE-2780B53FD922">参数</p>
                        <div class="tblformal" id="GUID-4E1ECE0F-A79E-4335-B9E6-992B58F86B46__GUID-6C4BA349-CE8E-49EC-8112-B4371DF46DAE">
                           <p class="titleintable">表167-12 REGISTER_MVIEWS过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REGISTER_MVIEWS过程参数" width="100%" border="1" summary="This table describes the parameters of the REGISTER_MVIEWS subprogram" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1041791e2583">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d1041791e2586">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1041791e2591" headers="d1041791e2583 ">
                                       <p><code class="codeph">mv_list</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1041791e2591 d1041791e2586 ">
                                       <p>要注册的以逗号分隔的物化视图列表。这些名称可以是模式限定的。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74640"></a><a id="ARPLS74641"></a><a id="ARPLS74641"></a><a id="ARPLS74640"></a><div class="props_rev_3"><a id="GUID-79818B51-CC72-4482-B5AC-5EEA9B77F244" name="GUID-79818B51-CC72-4482-B5AC-5EEA9B77F244"></a><h4 id="ARPLS-GUID-79818B51-CC72-4482-B5AC-5EEA9B77F244" class="sect4"><span class="enumeration_section">167.3.12</span> REGISTER_PARTITION_OPERATION过程</h4>
                  <div>
                     <p>此过程在基表的分区上注册分区维护操作（PMOP）。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-79818B51-CC72-4482-B5AC-5EEA9B77F244__GUID-1E00BAE2-B4FC-41E7-B772-58464B73375A">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SYNC_REFRESH.REGISTER_PARTITION_OPERATION（partition_op IN VARCHAR2，schema_name IN VARCHAR2，base_table_name IN VARCHAR2，partition_name IN VARCHAR2，outside_partn_table_schema IN VARCHAR2，outside_partn_table_name IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-79818B51-CC72-4482-B5AC-5EEA9B77F244__GUID-03167D7A-E844-4E07-A3FD-BC750477BF05">参数</p>
                        <div class="tblformal" id="GUID-79818B51-CC72-4482-B5AC-5EEA9B77F244__GUID-54C977A7-F081-4BC8-9CEA-D4380E9E7078">
                           <p class="titleintable">表167-13 REGISTER_PARTITION_OPERATION过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REGISTER_PARTITION_OPERATION过程参数" width="100%" border="1" summary="This table describes the parameters for DBMS_SYNC_REFRESH.REGISTER_PARTITION_OPERATION." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1041791e2708">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d1041791e2711">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1041791e2716" headers="d1041791e2708 ">
                                       <p><code class="codeph">partition_op</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1041791e2716 d1041791e2711 ">
                                       <p>分区操作的名称（ <code class="codeph">DROP</code> ， <code class="codeph">EXCHANGE</code>或<code class="codeph">TRUNCATE</code> ）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1041791e2733" headers="d1041791e2708 ">
                                       <p><code class="codeph">SCHEMA_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1041791e2733 d1041791e2711 ">
                                       <p>基表的架构名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1041791e2741" headers="d1041791e2708 ">
                                       <p><code class="codeph">base_table_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1041791e2741 d1041791e2711 ">
                                       <p>基表的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1041791e2749" headers="d1041791e2708 ">
                                       <p><code class="codeph">的partition_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1041791e2749 d1041791e2711 ">
                                       <p>要更改的分区的名称;要么与外部分区表交换，要么删除或截断。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1041791e2757" headers="d1041791e2708 ">
                                       <p><code class="codeph">outside_partn_table_schema</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1041791e2757 d1041791e2711 ">
                                       <p>外部分区表的模式名称（仅限<code class="codeph">EXCHANGE</code>所需）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1041791e2768" headers="d1041791e2708 ">
                                       <p><code class="codeph">outside_partn_table_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1041791e2768 d1041791e2711 ">
                                       <p>外部分区表的名称（仅限<code class="codeph">EXCHANGE</code>所需）。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-79818B51-CC72-4482-B5AC-5EEA9B77F244__GUID-C3E5C8C5-5D0B-4D84-864B-AC82453C26B5">使用说明</p>
                        <p>可以在分区上指定的三种更改操作是<code class="codeph">DROP</code> ， <code class="codeph">TRUNCATE</code>和<code class="codeph">EXCHANGE</code> 。</p>
                        <p>如果指定了<code class="codeph">DROP</code> ，则在<code class="codeph">EXECUTE_REFRESH</code>时将从基表中删除该分区。如果指定了<code class="codeph">TRUNCATE</code> ，则将删除分区中的数据，但不会删除分区本身。这些操作提供了一种更有效的方法来指定分区中所有行的删除，而不是在分段日志中单独指定它们。
                        </p>
                        <p>如果指定了<code class="codeph">EXCHANGE</code> ，那么外部表的内容将与<code class="codeph">EXECUTE_REFRESH</code>的指定分区的内容交换。这为用户提供了另一种方法，即提供对基表的更改，而不是填充登台日志。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74940"></a><a id="ARPLS74941"></a><a id="ARPLS74941"></a><a id="ARPLS74940"></a><div class="props_rev_3"><a id="GUID-6C2602DE-E73C-4BF3-B7E6-4A8D808C197C" name="GUID-6C2602DE-E73C-4BF3-B7E6-4A8D808C197C"></a><h4 id="ARPLS-GUID-6C2602DE-E73C-4BF3-B7E6-4A8D808C197C" class="sect4"><span class="enumeration_section">167.3.13</span> UNREGISTER_MVIEWS</h4>
                  <div>
                     <p>此过程从同步刷新中取消注册实例化视图的列表。一旦物化视图未注册，用户可以使用任何传统刷新方法（例如完整或PCT）刷新来维护它。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-6C2602DE-E73C-4BF3-B7E6-4A8D808C197C__GUID-DCA727D7-9EB7-438B-8FF7-4CA8CFA63B77">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SYNC_REFRESH.UNREGISTER_MVIEWS（mv_list IN VARCHAR20;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6C2602DE-E73C-4BF3-B7E6-4A8D808C197C__GUID-63F322EF-A556-4624-B8FF-323A9DD0CC81">参数</p>
                        <div class="tblformal" id="GUID-6C2602DE-E73C-4BF3-B7E6-4A8D808C197C__GUID-70AE95C0-B42D-41EC-B7A1-667CE6AC714F">
                           <p class="titleintable">表167-14 UNREGISTER_MVIEWS参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="UNREGISTER_MVIEWS参数" width="100%" border="1" summary="This table describes UNREGISTER_MVIEWS parameters" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1041791e2917">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d1041791e2920">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1041791e2925" headers="d1041791e2917 ">
                                       <p><code class="codeph">mv_list</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1041791e2925 d1041791e2920 ">
                                       <p>要取消注册的以逗号分隔的实体化视图列表。这些名称可以是模式限定的。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74642"></a><a id="ARPLS74643"></a><a id="ARPLS74643"></a><a id="ARPLS74642"></a><div class="props_rev_3"><a id="GUID-13528F16-410C-44C4-965D-1DDAE63375FA" name="GUID-13528F16-410C-44C4-965D-1DDAE63375FA"></a><h4 id="ARPLS-GUID-13528F16-410C-44C4-965D-1DDAE63375FA" class="sect4"><span class="enumeration_section">167.3.14</span> UNREGISTER_ARTITION_OPERATION过程</h4>
                  <div>
                     <p>此过程取消注册先前已在基表上的<code class="codeph">REGISTER_PARTITION_OPERATION</code>注册的分区维护操作（PMOP）。可以在分区上指定的三种更改操作是<code class="codeph">DROP</code> ， <code class="codeph">TRUNCATE</code>和<code class="codeph">EXCHANGE</code> 。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-13528F16-410C-44C4-965D-1DDAE63375FA__GUID-1494FAC6-D547-461F-81A1-73C2DA839738">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_SYNC_REFRESH.UNREGISTER_PARTITION_OPERATION（partition_op IN VARCHAR2，schema_name IN VARCHAR2，base_table_name IN VARCHAR2，partition_name IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-13528F16-410C-44C4-965D-1DDAE63375FA__GUID-3EF3553C-C1F0-4894-A54B-464D431C47F5">参数</p>
                        <div class="tblformal" id="GUID-13528F16-410C-44C4-965D-1DDAE63375FA__GUID-1CEADCED-5189-4691-8E84-AB4E1D9E109E">
                           <p class="titleintable">表167-15 UNREGISTER_PARTITION_OPERATION过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="UNREGISTER_PARTITION_OPERATION过程参数" width="100%" border="1" summary="This table describes the parameters for DBMS_SYNC_REFRESH.UNREGISTER_PARTITION_OPERATION." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d1041791e3051">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d1041791e3054">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1041791e3059" headers="d1041791e3051 ">
                                       <p><code class="codeph">partition_op</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1041791e3059 d1041791e3054 ">
                                       <p>分区操作的名称（ <code class="codeph">DROP</code> ， <code class="codeph">EXCHANGE</code>或<code class="codeph">TRUNCATE</code> ）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1041791e3076" headers="d1041791e3051 ">
                                       <p><code class="codeph">SCHEMA_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1041791e3076 d1041791e3054 ">
                                       <p>基表的架构名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1041791e3084" headers="d1041791e3051 ">
                                       <p><code class="codeph">base_table_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1041791e3084 d1041791e3054 ">
                                       <p>基表的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d1041791e3092" headers="d1041791e3051 ">
                                       <p><code class="codeph">的partition_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d1041791e3092 d1041791e3054 ">
                                       <p>要更改的分区的名称;要么与外部分区表交换，要么删除或截断。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
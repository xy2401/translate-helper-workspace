<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The COVERAGE pragma marks PL/SQL code which is infeasible to test for coverage. These marks improve coverage metric accuracy."></meta>
      <meta name="description" content="The COVERAGE pragma marks PL/SQL code which is infeasible to test for coverage. These marks improve coverage metric accuracy."></meta>
      <title>覆盖率</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database PL/SQL Language Reference "></meta>
      <meta property="og:description" content="The COVERAGE pragma marks PL/SQL code which is infeasible to test for coverage. These marks improve coverage metric accuracy."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database PL/SQL Language Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-language-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-13T20:26:20-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96448-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="CONTINUE-statement.html" title="Previous" type="text/html"></link>
      <link rel="next" href="cursor-FOR-LOOP-statement.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Language Reference"></meta>
    <meta name="dcterms.isVersionOf" content="LNPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="CONTINUE-statement.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="cursor-FOR-LOOP-statement.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库PL / SQL语言参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="plsql-language-elements.html" property="item" typeof="WebPage"><span property="name">PL / SQL语言元素</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">覆盖率</li>
            </ol>
            <a id="GUID-38A315DC-020B-41BD-90CD-DBF4D937EE83" name="GUID-38A315DC-020B-41BD-90CD-DBF4D937EE83"></a>
            
            <h2 id="LNPLS-GUID-38A315DC-020B-41BD-90CD-DBF4D937EE83" class="sect2"><span class="enumeration_section">13.16</span>覆盖率</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">COVERAGE</code>编译指示标记PL / SQL代码，这对于测试覆盖率是不可行的。这些标记提高了覆盖度量标准。
               </p>
               <div class="section">
                  <p><code class="codeph">COVERAGE</code>编译指示标记PL / SQL源代码，以指示代码可能无法对覆盖进行可行的测试。该编译指示标记了特定的代码部分。标记不可行代码可提高用于评估已完成测试的覆盖度指标的质量。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-38A315DC-020B-41BD-90CD-DBF4D937EE83__GUID-F148F850-D9D9-43CE-9F06-C02BF6324678">话题</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="COVERAGE-pragma.html#GUID-38A315DC-020B-41BD-90CD-DBF4D937EE83__SYNTAX-585509E9">句法</a></p>
                     </li>
                     <li>
                        <p><a href="COVERAGE-pragma.html#GUID-38A315DC-020B-41BD-90CD-DBF4D937EE83__SEMANTICS-58550D60">语义</a></p>
                     </li>
                     <li>
                        <p><a href="COVERAGE-pragma.html#GUID-38A315DC-020B-41BD-90CD-DBF4D937EE83__EXAMPLES-585510BA">例子</a></p>
                     </li>
                     <li>
                        <p><a href="COVERAGE-pragma.html#GUID-38A315DC-020B-41BD-90CD-DBF4D937EE83__RELATEDTOPICS-58552C15">相关话题</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-38A315DC-020B-41BD-90CD-DBF4D937EE83__SYNTAX-585509E9">
                  <p class="subhead1" id="GUID-38A315DC-020B-41BD-90CD-DBF4D937EE83__GUID-EACF6697-0DCE-402E-A998-4AC743B0CB47">句法</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-38A315DC-020B-41BD-90CD-DBF4D937EE83__COVERAGE_PRAGMA-494D717C">
                  <p class="subhead1" id="GUID-38A315DC-020B-41BD-90CD-DBF4D937EE83__GUID-CE8EB738-F062-4B40-B375-300ABA0F4774"><span class="italic">coverage_pragma :: =</span></p>
                  <div class="figure" id="GUID-38A315DC-020B-41BD-90CD-DBF4D937EE83__FIG-1433-045C8959"><img src="img/coverage_pragma.gif" alt="下面是coverage_pragma.eps的描述" title="下面是coverage_pragma.eps的描述" longdesc="img_text/coverage_pragma.html"><br><a href="img_text/coverage_pragma.html">说明coverage_pragma.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-38A315DC-020B-41BD-90CD-DBF4D937EE83__GUID-38F07AF2-F8AD-40C5-809F-C4A5917421B9"><span class="italic">coverage_pragma_argument</span> :: =</p>
                  <div class="figure" id="GUID-38A315DC-020B-41BD-90CD-DBF4D937EE83__FIG-1435-045C809A"><img src="img/coverage_pragma_argument.gif" alt="coverage_pragma_argument.eps的描述如下" title="coverage_pragma_argument.eps的描述如下" longdesc="img_text/coverage_pragma_argument.html"><br><a href="img_text/coverage_pragma_argument.html">说明coverage_pragma_argument.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-38A315DC-020B-41BD-90CD-DBF4D937EE83__SEMANTICS-58550D60">
                  <p class="subhead1" id="GUID-38A315DC-020B-41BD-90CD-DBF4D937EE83__GUID-CD0890FF-1B32-40B2-981E-03DC15CD3D34">语义</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-38A315DC-020B-41BD-90CD-DBF4D937EE83__GUID-054F4AE6-B172-40B3-9099-F38197B8861E"><span class="italic">coverage_pragma</span></p>
                  <p><code class="codeph">COVERAGE</code>编译指示可能出现在任何声明或声明之前。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-38A315DC-020B-41BD-90CD-DBF4D937EE83__GUID-C027041F-F86D-4355-8DA9-B2CDF9902A30"><span class="italic">coverage_pragma_argument</span></p>
                  <p><code class="codeph">COVERAGE</code> pragma参数必须具有以下值之一：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>'不可行'</p>
                     </li>
                     <li>
                        <p>'NOT_FEASIBLE_START'</p>
                     </li>
                     <li>
                        <p>'NOT_FEASIBLE_END'</p>
                     </li>
                  </ul>
                  <p>当<code class="codeph">COVERAGE</code>编译指示出现参数'NOT_FEASIBLE'时，它标记整个基本块，其中包括pragma后面的第一个声明或语句的开头。
                  </p>
                  <p>参数为“NOT_FEASIBLE_START”的<code class="codeph">COVERAGE</code> pragma可能出现在任何声明或任何声明之前。必须后跟<code class="codeph">COVERAGE</code>编译指示，其参数为“NOT_FEASIBLE_END”。第二个pragma可能出现在任何声明或任何声明之前。它必须出现在与第一个pragma相同的PL / SQL块中，而不是出现在任何嵌套的子程序定义中。
                  </p>
                  <p>一对关联的<code class="codeph">COVERAGE</code>编译指示标记从基本块的开头不可行的基本块，包括第一个pragma之后的第一个语句或声明的开头到基本块的末尾，包括第二个之后的第一个语句或声明附注。
                  </p>
                  <p><code class="codeph">COVERAGE</code>编译指示，其范围包括内部子程序的定义或声明，不会将该子程序的块标记为不可行。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-38A315DC-020B-41BD-90CD-DBF4D937EE83__EXAMPLES-585510BA">
                  <p class="subhead1" id="GUID-38A315DC-020B-41BD-90CD-DBF4D937EE83__GUID-932981D5-E4C3-49EE-9458-44B25518EFD4">例子</p>
               </div>
               <!-- class="section" -->
               <div class="example" id="GUID-38A315DC-020B-41BD-90CD-DBF4D937EE83__MARKINGASINGLEBASICBLOCK-FB9278A4">
                  <p class="titleinexample">示例13-5将单个基本块标记为不可测试覆盖率</p>
                  <p>此示例显示了在z和zl基本块的赋值之前的pragma <code class="codeph">COVERAGE</code>的位置。覆盖率计算将忽略这两个基本块。第一个<code class="codeph">COVERAGE</code>编译指示（标记为1）标志着z不可行的第一个赋值;第二个（标记为2）标志着z的第三个赋值。在每种情况下，受影响的基本块从标识符z运行到下一个<code class="codeph">END IF</code> 。</p><pre class="pre codeblock"><code>IF（x&gt; 0）那么y：= 2; ELSE PRAGMA COVERAGE（'NOT_FEASIBLE'）; -  1 z：= 3;万一; IF（y&gt; 0）那么z：= 2; ELSE PRAGMA COVERAGE（'NOT_FEASIBLE'）; -  2 z：= 3;万一;</code></pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-38A315DC-020B-41BD-90CD-DBF4D937EE83__GUID-2CB994A0-2296-4EF6-AB6D-BEB0406F5383">
                  <p class="titleinexample">示例13-6将行范围标记为不可测试覆盖范围</p>
                  <p>此示例显示将整个行范围标记为不可行。行范围可能包含多个基本块。甲线范围被标记为用于使用编译覆盖不可行<code class="codeph">COVERAGE</code>与在该范围的开始处的“NOT_FEASIBLE_START”参数，并编译指示<code class="codeph">COVERAGE</code>与在该范围的端部的“NOT_FEASIBLE_END”。范围配对的<code class="codeph">COVERAGE</code>标记将所有块标记为不可行。
                  </p><pre class="pre codeblock"><code>PRAGMA COVERAGE（'NOT_FEASIBLE_START'）; IF（x&gt; 0）那么y：= 2; ELSE z：= 3;万一; IF（y&gt; 0）那么z：= 2; ELSE z：= 3;万一; PRAGMA COVERAGE（'NOT_FEASIBLE_END'）;</code></pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-38A315DC-020B-41BD-90CD-DBF4D937EE83__EXAMPLE-148-C062CF82">
                  <p class="titleinexample">示例13-7将整个单元或单个子程序标记为不可测试覆盖范围</p>
                  <p>此示例显示将整个过程foo标记为不可覆盖。通过标记其所有身体不可行，子程序被标记为完全不可行。</p><pre class="pre codeblock"><code>CREATE PROCEDURE foo是PRAGMA COVERAGE（'NOT_FEASIBLE_START'）; ......开始 ....PRAGMA COVERAGE（'NOT_FEASIBLE_END'）;结束; /</code></pre></div>
               <!-- class="example" -->
               <div class="example" id="GUID-38A315DC-020B-41BD-90CD-DBF4D937EE83__EXAMPLE-149-2C8FC6A4">
                  <p class="titleinexample">示例13-8将内部子程序标记为不可测试覆盖范围</p>
                  <p>此示例显示外部<code class="codeph">COVERAGE</code>编译指示对程序内部的覆盖范围没有影响。内部主体内部的<code class="codeph">COVERAGE</code>编译指示（标记为1）确实将x的第二个赋值标记为不可行。请注意，即使带参数'NOT_FEASIBLE_END'的pragma不是最后一行，整个过程外部也标记为不可行。该pragma确实标记了包含该pragma之后的语句的基本块，并且该块确实延伸到该过程的末尾。
                  </p><pre class="pre codeblock"><code>创建或替换程序外部是PRAGMA覆盖范围（'NOT_FEASIBLE_START'）; x NUMBER：= 7;如果x &lt;6那么x：= 19;程序内部是开始的。 ELSE PRAGMA COVERAGE（'NOT_FEASIBLE'）; -  1 x：= 203;万一;结束; BEGIN DBMS_OUTPUT.PUT_LINE（'X ='）; PRAGMA COVERAGE（'NOT_FEASIBLE_END'）; DBMS_OUTPUT.PUT_LINE（x）;结束; /</code></pre></div>
               <!-- class="example" -->
               <div class="section" id="GUID-38A315DC-020B-41BD-90CD-DBF4D937EE83__RELATEDTOPICS-58552C15">
                  <p class="subhead1" id="GUID-38A315DC-020B-41BD-90CD-DBF4D937EE83__GUID-CCC1A0AB-AA35-45FE-BAC8-342D6E70E2C4">相关话题</p>
                  <p>在这本书中：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="plsql-language-fundamentals.html#GUID-D6EFD7E8-39DF-4430-B625-B6D37E49F6F4" title="编译指示是编译器在编译时处理的指令。">编译指示</a></p>
                     </li>
                     <li>
                        <p><a href="overview.html#GUID-DF63BC59-22C2-4BA8-9240-F74D505D5102" title="PL / SQL单元受PL / SQL编译参数（一类数据库初始化参数）的影响。不同的PL / SQL单元（例如，包规范及其主体）可以具有不同的编译参数设置。">PL / SQL单元和编译参数</a>有关PLSQL_OPTIMIZE_LEVEL编译参数的更多信息</p>
                     </li>
                  </ul>
                  <p>在其他书籍中：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>有关使用PL / SQL基本块覆盖以保持质量的更多信息，请参见<a href="../adfns/basic-block-coverage.html#ADFNS-GUID-35842E6A-630A-418F-8314-6A30F1FBDF83" target="_blank"><span><cite>“Oracle数据库开发指南”</cite></span></a></p>
                     </li>
                     <li>
                        <p>有关使用DBMS_PLSQL_CODE_COVERAGE包的更多信息，请<a href="../arpls/DBMS_PLSQL_CODE_COVERAGE.html#ARPLS-GUID-55A9E502-9EC2-4118-B292-DC79E6DC465E" target="_blank"><span><cite>参见Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can create and use RDF views over relational data in Oracle Spatial and Graph RDF Semantic Graph."></meta>
      <meta name="description" content="You can create and use RDF views over relational data in Oracle Spatial and Graph RDF Semantic Graph."></meta>
      <title>RDF视图：关系数据为RDF</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="RDF Knowledge Graph Developer&#39;s Guide "></meta>
      <meta property="og:description" content="You can create and use RDF views over relational data in Oracle Spatial and Graph RDF Semantic Graph."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="RDF Knowledge Graph Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="spatial-and-graph-rdf-knowledge-graph-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-10T10:56:26-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2005, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E94798-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="user-defined-inferencing.html" title="Previous" type="text/html"></link>
      <link rel="next" href="rdf-integration-property-graph-data.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Spatial and Graph RDF Knowledge Graph Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="RDFRM"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="user-defined-inferencing.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="rdf-integration-property-graph-data.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">RDF知识图开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-concept-usage.html" property="item" typeof="WebPage"><span property="name">概念和使用信息</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">RDF视图：关系数据为RDF</li>
            </ol>
            <a id="GUID-8C19D83B-22CA-49AA-B2E9-E6935A5E0B0C" name="GUID-8C19D83B-22CA-49AA-B2E9-E6935A5E0B0C"></a><a id="RDFRM555"></a>
            
            <h2 id="RDFRM-GUID-8C19D83B-22CA-49AA-B2E9-E6935A5E0B0C" class="sect2"><span class="enumeration_chapter">8</span> RDF视图：关系数据为RDF</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以在Oracle Spatial和Graph RDF语义图中创建和使用关系数据的RDF视图。</p>
               <p>使用直接映射和R2RML映射的W3C文档中描述的两种形式的RDB2RDF映射之一，将关系数据视为虚拟RDF三元组：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><span class="italic">R2RML：RDB到RDF映射语言</span> ，W3C建议书（ <a href="http://www.w3.org/TR/r2rml/" target="_blank"><code class="codeph">http://www.w3.org/TR/r2rml/</code></a> ）</p>
                  </li>
                  <li>
                     <p><span class="italic">将关系数据直接映射到RDF</span> ，W3C建议书（ <a href="http://www.w3.org/TR/rdb-direct-mapping/" target="_blank"><code class="codeph">http://www.w3.org/TR/rdb-direct-mapping/</code></a> ）</p>
                  </li>
               </ul>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="rdf-views.html#GUID-8A9857D6-54C4-40C8-9BAB-D863C1BBF47F">为什么在关系数据上使用RDF视图？</a><br>通过对关系数据使用RDF视图，您可以集成来自不同来源的数据。
                  </li>
                  <li class="ulchildlink"><a href="rdf-views.html#GUID-213D209A-82C1-4E92-8F42-06C5F25B00BF">对RDF视图的API支持</a><br>子程序包含在SEM_APIS包中，用于创建，删除和导出（即，实现RDF视图的内容）。
                  </li>
                  <li class="ulchildlink"><a href="rdf-views.html#GUID-CEFE07FA-FAAB-4FF0-B70C-0BDA20306F87">示例：使用带直接映射的RDF视图</a><br>本主题提供了使用直接映射的RDF视图的示例。
                  </li>
                  <li class="ulchildlink"><a href="rdf-views.html#GUID-7EE22B1F-D5C1-4F0F-85B9-CAB4BB815819">将原生RDF数据与虚拟RDB2RDF数据相结合</a><br>您可以通过SERVICE关键字在单个SEM_MATCH查询中将原生三重数据与虚拟RDB2RDF三重数据相结合。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="part-concept-usage.html#GUID-FC153F2D-D51D-4498-A6E1-30B80D540FD6">概念和使用信息</a></p>
                  </div>
               </div>
            </div>
            <a id="RDFRM556"></a><div class="props_rev_3"><a id="GUID-8A9857D6-54C4-40C8-9BAB-D863C1BBF47F" name="GUID-8A9857D6-54C4-40C8-9BAB-D863C1BBF47F"></a><h3 id="RDFRM-GUID-8A9857D6-54C4-40C8-9BAB-D863C1BBF47F" class="sect3"><span class="enumeration_section">8.1</span>为什么在关系数据上使用RDF视图？
               </h3>
               <div>
                  <p>通过对关系数据使用RDF视图，您可以集成来自不同来源的数据。</p>
                  <p>您可以利用关系数据的优势，而无需物理存储与关系数据相对应的RDF三元组。在Oracle数据库12 <span class="italic">c</span>第1版（12.1）中的RDF语义图中包含RDF视图之前，您需要编写自定义SQL查询或使用非标准映射，并将生成的RDF三元组物理存储在RDF模型中。
                  </p>
                  <p>创建关系数据到RDF数据的映射的最简单方法是调用<a href="SEM_APIS-reference.html#GUID-756C5186-4552-46B4-A203-27395824523A">SEM_APIS.CREATE_RDFVIEW_MODEL</a>过程来创建RDF视图并提供您希望将其内容视为RDF的表或视图列表。这提供了这些关系表或视图的直接映射。
                  </p>
                  <p>要获得更加自定义的映射，您可以编写R2RML映射文档（例如，使用Turtle在RDF中）以指定所需的映射，将映射文档（在将其转换为N-Triple格式之后）加载到临时表（用于表定义，请参阅<a href="rdf-semantic-graph-overview.html#GUID-93BBAF2A-D906-4172-8315-4E0184FE6ABB">使用临时表批量加载语义数据</a> ），然后通过提供登台表的名称调用<a href="SEM_APIS-reference.html#GUID-756C5186-4552-46B4-A203-27395824523A">SEM_APIS.CREATE_RDFVIEW_MODEL</a>过程来创建RDF视图。
                  </p>
                  <p>此外，作为基于登台表的策略的替代方法，您可以使用<code class="codeph">r2rml_string</code>参数将R2RML映射（使用Turtle或N-Triple语法）直接提供给<a href="SEM_APIS-reference.html#GUID-756C5186-4552-46B4-A203-27395824523A">SEM_APIS.CREATE_RDFVIEW_MODEL</a> 。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="rdf-views.html#GUID-8C19D83B-22CA-49AA-B2E9-E6935A5E0B0C" title="您可以在Oracle Spatial和Graph RDF语义图中创建和使用关系数据的RDF视图。">RDF视图：关系数据作为RDF</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="RDFRM559"></a><div class="props_rev_3"><a id="GUID-213D209A-82C1-4E92-8F42-06C5F25B00BF" name="GUID-213D209A-82C1-4E92-8F42-06C5F25B00BF"></a><h3 id="RDFRM-GUID-213D209A-82C1-4E92-8F42-06C5F25B00BF" class="sect3"><span class="enumeration_section">8.2</span> RDF视图的API支持</h3>
               <div>
                  <p>子程序包含在SEM_APIS包中，用于创建，删除和导出（即，实现RDF视图的内容）。</p>
                  <p>RDF视图创建为RDF模型，但RDF模型在物理上仅包含元数据。实际数据仍存储在已为其创建RDF视图的关系表中。（SEM_APIS子程序记录在<a href="SEM_APIS-reference.html#GUID-F42AB976-445A-4DCD-974C-3B9ED810E3D5" title="SEM_APIS包中包含用于在Oracle数据库中使用资源描述框架（RDF）和Web本体语言（OWL）的子程序（函数和过程）。">SEM_APIS包子程序中</a> 。）
                  </p>
                  <p>对于本节其余部分中的示例，假设调用程序的模式中存在以下关系表：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE <span class="bold">dept</span> （deptno NUMBER CONSTRAINT pk_DeptTab_deptno PRIMARY KEY，dname VARCHAR2（30），loc VARCHAR2（30））; CREATE TABLE <span class="bold">emp</span> （empno NUMBER PRIMARY KEY，ename VARCHAR2（30），job VARCHAR2（20），deptno NUMBER REFERENCES dept（deptno））;</pre><p>请注意，如果这些表与调用者的模式不同（例如， <code class="codeph">SCOTT</code> ），则在指定这些表的名称时，需要使用模式限定的表名： <code class="codeph">"SCOTT"."DEPT"</code>和<code class="codeph">"SCOTT"."EMP"</code> 。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="rdf-views.html#GUID-3B0E1A9F-4BBA-4349-9E28-147135D2EEE2">使用直接映射创建RDF视图</a><br></li>
                     <li class="ulchildlink"><a href="rdf-views.html#GUID-1135136B-3064-4D16-B794-8A34653CF5B3">使用R2RML映射创建RDF视图</a><br></li>
                     <li class="ulchildlink"><a href="rdf-views.html#GUID-0C4D3536-516B-432B-907D-EC0FAF764A04">删除RDF视图</a><br></li>
                     <li class="ulchildlink"><a href="rdf-views.html#GUID-3081B534-5C02-42EA-B497-645501B3EA7E">将RDF视图的虚拟内容导出到临时表</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="rdf-views.html#GUID-8C19D83B-22CA-49AA-B2E9-E6935A5E0B0C" title="您可以在Oracle Spatial和Graph RDF语义图中创建和使用关系数据的RDF视图。">RDF视图：关系数据作为RDF</a></p>
                     </div>
                  </div>
               </div>
               <a id="RDFRM591"></a><a id="RDFRM736"></a><a id="RDFRM590"></a><div class="props_rev_3"><a id="GUID-3B0E1A9F-4BBA-4349-9E28-147135D2EEE2" name="GUID-3B0E1A9F-4BBA-4349-9E28-147135D2EEE2"></a><h4 id="RDFRM-GUID-3B0E1A9F-4BBA-4349-9E28-147135D2EEE2" class="sect4"><span class="enumeration_section">8.2.1</span>使用直接映射创建RDF视图</h4>
                  <div>
                     <p><a href="rdf-views.html#GUID-3B0E1A9F-4BBA-4349-9E28-147135D2EEE2__CHDDEIBF">例8-1</a>使用两个表EMP和DEPT的直接映射创建一个RDF视图模型，其基本前缀为<code class="codeph">http://empdb/</code> 。 （虚拟）RDF术语是根据<span class="italic">关系数据直接映射到RDF</span> ，W3C推荐（ <a href="http://www.w3.org/TR/rdb-direct-mapping/" target="_blank"><code class="codeph">http://www.w3.org/TR/rdb-direct-mapping/</code></a> ）生成的。</p>
                     <div class="example" id="GUID-3B0E1A9F-4BBA-4349-9E28-147135D2EEE2__CHDDEIBF">
                        <p class="titleinexample">示例8-1使用直接映射创建RDF视图</p><pre class="oac_no_warn" dir="ltr">BEGIN sem_apis.create_rdfview_model（model_name =&gt;'empdb_model'，tables =&gt; SYS.ODCIVarchar2List（'EMP'，'DEPT'），prefix =&gt;'http：// empdb /'，options =&gt;'KEY_BASED_REF_PROPERTY = T'）;结束; /</pre><p>要查看生成的属性，请输入以下语句（假定在名为TESTUSER的用户的模式中创建对象）：</p><pre class="oac_no_warn" dir="ltr">从表中选择DISTINCT（SEM_MATCH（'{？s？p？o}'，SEM_Models（'empdb_model'），NULL，NULL，NULL））; P ------------------------------------------------- ------------------------------- http：//empdb/TESTUSER.EMP#DEPTNO http：// empdb / TESTUSER。 DEPT＃LOC http：//empdb/TESTUSER.EMP#JOB http：//empdb/TESTUSER.DEPT#DEPTNO http://empdb/TESTUSER.EMP#ENAME http://www.w3.org/1999/02/ 22-rdf-syntax-ns #type http：//empdb/TESTUSER.DEPT#DNAME http：//empdb/TESTUSER.EMP#EMPNO http：//empdb/TESTUSER.EMP#ref-DEPTNO选择了9行。
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-3B0E1A9F-4BBA-4349-9E28-147135D2EEE2__CHDCIJDD">
                        <p class="titleinexample">例8-2使用CONFORMANCE = T.</p>
                        <p><a href="rdf-views.html#GUID-3B0E1A9F-4BBA-4349-9E28-147135D2EEE2__CHDCIJDD">示例8-2</a>与<a href="rdf-views.html#GUID-3B0E1A9F-4BBA-4349-9E28-147135D2EEE2__CHDDEIBF">示例8-1</a>基本相同，但它使用<code class="codeph">CONFORMANCE=T</code>选项（请参阅<a href="SEM_APIS-reference.html#GUID-756C5186-4552-46B4-A203-27395824523A">SEM_APIS.CREATE_RDFVIEW_MODEL</a>的<code class="codeph">options</code>参数说明）。请注意，在输出中，模式名称未包含在属性列表中;例如， <a href="rdf-views.html#GUID-3B0E1A9F-4BBA-4349-9E28-147135D2EEE2__CHDCIJDD">例8-2中</a>的第一个输出记录是<code class="codeph">http://empdb/DEPT#LOC</code> ，而<a href="rdf-views.html#GUID-3B0E1A9F-4BBA-4349-9E28-147135D2EEE2__CHDDEIBF">示例8-1</a>生成的对应项是<code class="codeph">http://empdb/TESTUSER.DEPT#LOC</code> 。</p><pre class="oac_no_warn" dir="ltr">BEGIN sem_apis.create_rdfview_model（model_name =&gt;'empdb_model'，tables =&gt; SYS.ODCIVarchar2List（'EMP'，'DEPT'），prefix =&gt;'http：// empdb /'，options =&gt;' <span class="bold">CONFORMANCE = T</span> '）;结束; / SELECT DISTINCT p FROM TABLE（SEM_MATCH（'{？s？p？o}'，SEM_Models（'empdb_model'），NULL，NULL，NULL））; P ------------------------------------------------- ------------------------------- http：// empdb / DEPT #Lind http：// empdb / EMP＃ref- DEPTNO http：// empdb / EMP #ENAME http：// empdb / DEPT＃DEPTNO http：// empdb / EMP＃JOB http：// empdb / EMP＃EMPNO http://www.w3.org/1999/02 / 22-rdf-syntax-ns #type http：// empdb / DEPT #DNAME http：// \ tempdb / EMP＃DEPTNO选择了9行。</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="rdf-views.html#GUID-213D209A-82C1-4E92-8F42-06C5F25B00BF" title="子程序包含在SEM_APIS包中，用于创建，删除和导出（即，实现RDF视图的内容）。">RDF视图的API支持</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="RDFRM609"></a><a id="RDFRM599"></a><div class="props_rev_3"><a id="GUID-1135136B-3064-4D16-B794-8A34653CF5B3" name="GUID-1135136B-3064-4D16-B794-8A34653CF5B3"></a><h4 id="RDFRM-GUID-1135136B-3064-4D16-B794-8A34653CF5B3" class="sect4"><span class="enumeration_section">8.2.2</span>使用R2RML映射创建RDF视图</h4>
                  <div>
                     <p>如果要使用两个表EMP和DEPT创建RDF视图，但使用自己的自定义项，则可以创建使用Turtle指定的R2RML映射文档，如下所示：</p><pre class="oac_no_warn" dir="ltr">@prefix rr：&lt;http://www.w3.org/ns/r2rml#&gt;。 @prefix xsd：&lt;http://www.w3.org/2001/XMLSchema#&gt;。 @prefix ex：&lt;http://example.com/ns#&gt;。例如：TriplesMap_Dept rr：logicalTable [rr：tableName“DEPT”]; rr：subjectMap [rr：template“http://data.example.com/department/{DEPTNO}”; rr：上课：部门; ]。 rr：predicateObjectMap [rr：predicate ex：deptNum; rr：objectMap [rr：column“DEPTNO”; rr：datatype xsd：integer]; ]。 rr：predicateObjectMap [rr：predicate ex：deptName; rr：objectMap [rr：column“DNAME”]; ]。 rr：predicateObjectMap [rr：predicate ex：deptLocation; rr：objectMap [rr：column“LOC”]; ]。例如：TriplesMap_Emp rr：logicalTable [rr：tableName“EMP”]; rr：subjectMap [rr：template“http://data.example.com/employee/{EMPNO}”; rr：class ex：Employee; ]。 rr：predicateObjectMap [rr：predicate ex：empNum; rr：objectMap [rr：column“EMPNO”; rr：datatype xsd：integer]; ]。 rr：predicateObjectMap [rr：predicate ex：empName; rr：objectMap [rr：column“ENAME”]; ]。 rr：predicateObjectMap [rr：predicate ex：jobType; rr：objectMap [rr：column“JOB”]; ]。 rr：predicateObjectMap [rr：predicate ex：worksForDeptNum; rr：objectMap [rr：column“DEPTNO”; rr：dataType xsd：integer]; ]。 rr：predicateObjectMap [rr：predicate ex：worksForDept; rr：objectMap [rr：parentTriplesMap ex：TriplesMap_Dept; rr：joinCondition [rr：child“DEPTNO”; rr：parent“DEPTNO”]]]。
</pre><p>然后，将R2RML映射（转换为N-Triples格式）加载到临时表（如SCOTT.R2RTAB）中，并将此表的<code class="codeph">SELECT</code>权限授予MDSYS。</p>
                     <p>接下来，调用<a href="SEM_APIS-reference.html#GUID-756C5186-4552-46B4-A203-27395824523A">SEM_APIS.CREATE_RDFVIEW_MODEL</a> ，如<a href="rdf-views.html#GUID-1135136B-3064-4D16-B794-8A34653CF5B3__CHDJBDIF">例8-3所示</a> 。
                     </p>
                     <div class="example" id="GUID-1135136B-3064-4D16-B794-8A34653CF5B3__CHDJBDIF">
                        <p class="titleinexample">示例8-3使用存储在临时表中的R2RML映射创建RDF视图</p><pre class="oac_no_warn" dir="ltr">BEGIN sem_apis.create_rdfview_model（model_name =&gt;'empdb_model'，tables =&gt; NULL，r2rml_table_owner =&gt;'SCOTT'，r2rml_table_name =&gt;'R2RTAB'）;结束; /</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-1135136B-3064-4D16-B794-8A34653CF5B3__GUID-4F51BEC7-C71D-4D82-9F9C-56A810A6CF26">
                        <p class="titleinexample">示例8-4使用R2RML映射字符串创建RDF视图</p>
                        <p>也可以直接从R2RML字符串创建RDF视图，如本例所示。</p><pre class="oac_no_warn" dir="ltr">DECLARE <span class="bold">r2rmlStr CLOB;</span> BEGIN r2rmlStr：='@ prefix rr：&lt;http://www.w3.org/ns/r2rml#&gt;。 “|| '@prefix xsd：&lt;http://www.w3.org/2001/XMLSchema#&gt;。 “|| '@prefix ex：&lt;http://example.com/ns#&gt;。 '||'例如：TriplesMap_Dept rr：logicalTable [rr：tableName“DEPT”]; rr：subjectMap [rr：template“http://data.example.com/department/{DEPTNO}”; rr：上课：部门; ]。 rr：predicateObjectMap [rr：predicate ex：deptNum; rr：objectMap [rr：column“DEPTNO”; rr：datatype xsd：integer]; ]。 rr：predicateObjectMap [rr：predicate ex：deptName; rr：objectMap [rr：column“DNAME”]; ]。 rr：predicateObjectMap [rr：predicate ex：deptLocation; rr：objectMap [rr：column“LOC”]; ]。'||'例如：TriplesMap_Emp rr：logicalTable [rr：tableName“EMP”]; rr：subjectMap [rr：template“http://data.example.com/employee/{EMPNO}”; rr：class ex：Employee; ]。 rr：predicateObjectMap [rr：predicate ex：empNum; rr：objectMap [rr：column“EMPNO”; rr：datatype xsd：integer]; ]。 rr：predicateObjectMap [rr：predicate ex：empName; rr：objectMap [rr：column“ENAME”]; ]。 rr：predicateObjectMap [rr：predicate ex：jobType; rr：objectMap [rr：column“JOB”]; ]。 rr：predicateObjectMap [rr：predicate ex：worksForDeptNum; rr：objectMap [rr：column“DEPTNO”; rr：dataType xsd：integer]; ]。 rr：predicateObjectMap [rr：predicate ex：worksForDept; rr：objectMap [rr：parentTriplesMap ex：TriplesMap_Dept; rr：joinCondition [rr：child“DEPTNO”; rr：parent“DEPTNO”]]]。“; sem_apis.create_rdfview_model（model_name =&gt;'empdb_model'，tables =&gt; NULL， <span class="bold">r2rml_string =&gt; r2rmlStr</span> ，r2rml_string_fmt =&gt;'TURTLE'）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="rdf-views.html#GUID-213D209A-82C1-4E92-8F42-06C5F25B00BF" title="子程序包含在SEM_APIS包中，用于创建，删除和导出（即，实现RDF视图的内容）。">RDF视图的API支持</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="RDFRM611"></a><a id="RDFRM610"></a><div class="props_rev_3"><a id="GUID-0C4D3536-516B-432B-907D-EC0FAF764A04" name="GUID-0C4D3536-516B-432B-907D-EC0FAF764A04"></a><h4 id="RDFRM-GUID-0C4D3536-516B-432B-907D-EC0FAF764A04" class="sect4"><span class="enumeration_section">8.2.3</span>删除RDF视图</h4>
                  <div>
                     <p>可以使用<a href="SEM_APIS-reference.html#GUID-5D878010-3BB4-4E42-9A6C-54B5D2CAFCF6">SEM_APIS.DROP_RDFVIEW_MODEL</a>过程删除RDF视图，如<a href="rdf-views.html#GUID-0C4D3536-516B-432B-907D-EC0FAF764A04__CHDDJIGE">例8-5</a>所示。
                     </p>
                     <div class="example" id="GUID-0C4D3536-516B-432B-907D-EC0FAF764A04__CHDDJIGE">
                        <p class="titleinexample">示例8-5删除RDF视图</p><pre class="oac_no_warn" dir="ltr">BEGIN sem_apis.drop_rdfview_model（model_name =&gt;'empdb_model'）;结束; /</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="rdf-views.html#GUID-213D209A-82C1-4E92-8F42-06C5F25B00BF" title="子程序包含在SEM_APIS包中，用于创建，删除和导出（即，实现RDF视图的内容）。">RDF视图的API支持</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="RDFRM656"></a><a id="RDFRM654"></a><div class="props_rev_3"><a id="GUID-3081B534-5C02-42EA-B497-645501B3EA7E" name="GUID-3081B534-5C02-42EA-B497-645501B3EA7E"></a><h4 id="RDFRM-GUID-3081B534-5C02-42EA-B497-645501B3EA7E" class="sect4"><span class="enumeration_section">8.2.4</span>将RDF视图的虚拟内容导出到临时表中</h4>
                  <div>
                     <p>RDF视图的内容是虚拟的;也就是说，对应于底层关系数据的RDF三元组，如直接映射或R2RML映射所映射，不会实现并存储在任何地方。但是，您可能希望在RDF模型中实现并存储这些虚拟RDF三元组以用于测试目的。<a href="SEM_APIS-reference.html#GUID-1FBBE7EF-EC33-4DB8-B393-A6CC545B7A8E">SEM_APIS.EXPORT_RDFVIEW_MODEL</a>子程序允许您将RDF视图的RDF三元组存储在临时表中。然后可以使用登台表加载到RDF模型中。
                     </p>
                     <p><a href="rdf-views.html#GUID-3081B534-5C02-42EA-B497-645501B3EA7E__CHDFJAGC">例8-6</a>将RDF视图<code class="codeph">empdb_model</code>的内容实现（以N-Triples格式）到登台表SCOTT.RDFTAB中。</p>
                     <div class="example" id="GUID-3081B534-5C02-42EA-B497-645501B3EA7E__CHDFJAGC">
                        <p class="titleinexample">示例8-6导出RDF视图</p><pre class="oac_no_warn" dir="ltr">BEGIN sem_apis.export_rdfview_model（model_name =&gt;'empdb_model'，rdf_table_owner =&gt;'SCOTT'，rdf_table_name =&gt;'RDFTAB'）;结束;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="rdf-views.html#GUID-213D209A-82C1-4E92-8F42-06C5F25B00BF" title="子程序包含在SEM_APIS包中，用于创建，删除和导出（即，实现RDF视图的内容）。">RDF视图的API支持</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="RDFRM675"></a><a id="RDFRM735"></a><a id="RDFRM661"></a><div class="props_rev_3"><a id="GUID-CEFE07FA-FAAB-4FF0-B70C-0BDA20306F87" name="GUID-CEFE07FA-FAAB-4FF0-B70C-0BDA20306F87"></a><h3 id="RDFRM-GUID-CEFE07FA-FAAB-4FF0-B70C-0BDA20306F87" class="sect3"><span class="enumeration_section">8.3</span>示例：使用带直接映射的RDF视图</h3>
               <div>
                  <p>本主题提供了使用直接映射的RDF视图的示例。</p>
                  <p><a href="rdf-views.html#GUID-CEFE07FA-FAAB-4FF0-B70C-0BDA20306F87__CHDBJBJD">例8-7</a>显示了使用带直接映射的RDF视图的简单工作流程。在其中，您：</p>
                  <ol>
                     <li>
                        <p>创建两个关系表（EMP和DEPT）。</p>
                     </li>
                     <li>
                        <p>将数据插入表中。</p>
                     </li>
                     <li>
                        <p>使用两个表的直接映射创建RDF视图模型（ <code class="codeph">empdb_model</code> ）。
                        </p>
                     </li>
                     <li>
                        <p>在基于SEM_MATCH的SQL查询中使用SPARQL查询RDF视图。</p>
                     </li>
                  </ol>
                  <p><a href="rdf-views.html#GUID-CEFE07FA-FAAB-4FF0-B70C-0BDA20306F87__CHDCDGGC">例8-8</a>显示了<a href="rdf-views.html#GUID-CEFE07FA-FAAB-4FF0-B70C-0BDA20306F87__CHDBJBJD">例8-7中</a>语句的输出。
                  </p>
                  <div class="example" id="GUID-CEFE07FA-FAAB-4FF0-B70C-0BDA20306F87__CHDBJBJD">
                     <p class="titleinexample">示例8-7使用带直接映射的RDF视图</p><pre class="oac_no_warn" dir="ltr">- 使用以下关系表。CREATE TABLE dept（deptno NUMBER CONSTRAINT pk_DeptTab_deptno PRIMARY KEY，dname VARCHAR2（30），loc VARCHAR2（30））; CREATE TABLE emp（empno NUMBER PRIMARY KEY，ename VARCHAR2（30），job VARCHAR2（20），deptno NUMBER REFERENCES dept（deptno））; - 插入一些数据。INSERT INTO dept（deptno，dname，loc）VALUES（1，'Sales'，'Boston'）; INSERT INTO dept（deptno，dname，loc）VALUES（2，'Manufacturing'，'Chicago'）; INSERT INTO dept（deptno，dname，loc）VALUES（3，'Marketing'，'Boston'）; INSERT INTO emp（empno，ename，job，deptno）VALUES（1，'Alvarez'，'SalesRep'，1）; INSERT INTO emp（empno，ename，job，deptno）VALUES（2，'Baxter'，'Supervisor'，2）; INSERT INTO emp（empno，ename，job，deptno）VALUES（3，'Chen'，'Writer'，3）; INSERT INTO emp（empno，ename，job，deptno）VALUES（4，'Davis'，'Technician'，2）; - 使用两个表（EMP和DEPT）的直接映射创建RDF视图模型 - 使用基本前缀http：// empdb /。 - 为options参数指定KEY_BASED_REF_PROPERTY = T.BEGIN sem_apis.create_rdfview_model（model_name =&gt;'empdb_model'，tables =&gt; SYS.ODCIVarchar2List（'EMP'，'DEPT'），prefix =&gt;'http：// empdb /'，options =&gt;'KEY_BASED_REF_PROPERTY = T'）;结束; /  - 在基于SEM_MATCH的SQL查询中使用SPARQL查询RDF视图。- 下一个statament是针对名为empdb_model的RDF视图的查询 - 查找为位于波士顿的任何部门工作的员工。SELECT emp FROM TABLE（SEM_MATCH（'{？emp emp：ref-DEPTNO？部门？dept dept：LOC“Boston”}'，SEM_Models（'empdb_model'），NULL，SEM_ALIASES（SEM_ALIAS（'dept'，'http：//empdb/TESTUSER.DEPT#'），SEM_ALIAS（'emp'，'http： //empdb/TESTUSER.EMP#'）），null））; - 前面的查询在功能上与此类似：SELECT e.empno FROM emp e，dept d WHERE e.deptno = d.deptno AND d.loc ='Boston';</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-CEFE07FA-FAAB-4FF0-B70C-0BDA20306F87__CHDCDGGC">
                     <p class="titleinexample">实施例8-8 <span><a href="rdf-views.html#GUID-CEFE07FA-FAAB-4FF0-B70C-0BDA20306F87__CHDBJBJD">实施例8-7的</a></span>输出</p><pre class="oac_no_warn" dir="ltr">SQL&gt;  - 使用以下关系表。SQL&gt; SQL&gt; CREATE TABLE dept（2 deptno NUMBER CONSTRAINT pk_DeptTab_deptno PRIMARY KEY，3 dname VARCHAR2（30），4 loc VARCHAR2（30）5）;表创建。SQL&gt; SQL&gt; CREATE TABLE emp（2 empno NUMBER PRIMARY KEY，3 ename VARCHAR2（30），4 job VARCHAR2（20），5 deptno NUMBER REFERENCES dept（deptno）6）;表创建。SQL&gt; SQL&gt;  - 插入一些数据。SQL&gt; SQL&gt; INSERT INTO dept（deptno，dname，loc）2 VALUES（1，'Sales'，'Boston'）;已创建1行。SQL&gt; INSERT INTO dept（deptno，dname，loc）2 VALUES（2，'Manufacturing'，'Chicago'）;已创建1行。SQL&gt; INSERT INTO dept（deptno，dname，loc）2 VALUES（3，'Marketing'，'Boston'）;已创建1行。SQL&gt; SQL&gt; INSERT INTO emp（empno，ename，job，deptno）2 VALUES（1，'Alvarez'，'SalesRep'，1）;已创建1行。SQL&gt; INSERT INTO emp（empno，ename，job，deptno）2 VALUES（2，'Baxter'，'Supervisor'，2）;已创建1行。SQL&gt; INSERT INTO emp（empno，ename，job，deptno）2 VALUES（3，'Chen'，'Writer'，3）;已创建1行。SQL&gt; INSERT INTO emp（empno，ename，job，deptno）2 VALUES（4，'Davis'，'Technician'，2）;已创建1行。SQL&gt; SQL&gt;  - 使用两个表（EMP和DEPT，SQL&gt;）的直接映射创建RDF视图模型，其基本前缀为http：// empdb /。 SQL&gt;  - 为options参数指定KEY_BASED_REF_PROPERTY = T.SQL&gt; SQL&gt; BEGIN 2 sem_apis.create_rdfview_model（3 model_name =&gt;'empdb_model'，4 tables =&gt; SYS.ODCIVarchar2List（'EMP'，'DEPT'），5 prefix =&gt;'http：// empdb /'，6个选项&gt;'KEY_BASED_REF_PROPERTY = T'7）; 8结束; 9 / PL / SQL过程成功完成。SQL&gt; SQL&gt;  - 在基于SEM_MATCH的SQL查询中使用SPARQL查询RDF视图。SQL&gt;  - 下一个statament是针对名为empdb_model SQL&gt;的RDF视图的查询 - 查找为位于波士顿的任何部门工作的员工。SQL&gt; SQL&gt; SELECT emp 2 FROM TABLE（SEM_MATCH（3'{？emp emp：ref-DEPTNO？部门？dept dept：LOC“Boston”}'，4 SEM_Models（'empdb_model'），5 NULL，6 SEM_ALIASES（7 SEM_ALIAS（'dept'，'http：//empdb/TESTUSER.DEPT#'），8 SEM_ALIAS（'emp '，'http：//empdb/TESTUSER.EMP#'）9），10 null））; EMP ------------------------------------------------- ------------------------------- http：//empdb/TESTUSER.EMP/EMPNO=1 http：// \ tempdb / TESTUSER.EMP / EMPNO = 3 SQL&gt; SQL&gt;  - 前面的查询在功能上与此类似：SQL&gt; SELECT e.empno FROM emp e，dept d WHERE e.deptno = d.deptno AND d.loc ='Boston' ; EMPNO ---------- 1 3</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="rdf-views.html#GUID-8C19D83B-22CA-49AA-B2E9-E6935A5E0B0C" title="您可以在Oracle Spatial和Graph RDF语义图中创建和使用关系数据的RDF视图。">RDF视图：关系数据作为RDF</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="RDFRM789"></a><a id="RDFRM790"></a><a id="RDFRM788"></a><div class="props_rev_3"><a id="GUID-7EE22B1F-D5C1-4F0F-85B9-CAB4BB815819" name="GUID-7EE22B1F-D5C1-4F0F-85B9-CAB4BB815819"></a><h3 id="RDFRM-GUID-7EE22B1F-D5C1-4F0F-85B9-CAB4BB815819" class="sect3"><span class="enumeration_section">8.4</span>将原生RDF数据与虚拟RDB2RDF数据相结合</h3>
               <div>
                  <p>您可以通过SERVICE关键字在单个SEM_MATCH查询中将原生三重数据与虚拟RDB2RDF三重数据相结合。</p>
                  <p>SERVICE关键字（在<a href="rdf-semantic-graph-overview.html#GUID-6ACF73EA-A1A7-49D2-ADB9-15B50AE8B73E">图形模式中</a>说明<a href="rdf-semantic-graph-overview.html#GUID-6ACF73EA-A1A7-49D2-ADB9-15B50AE8B73E">：对SPARQL 1.1联合查询的支持</a> ）通过使用表示本地（虚拟）RDF数据的特殊SERVICE URL而过载。以下前缀用于表示特殊的SERVICE URL：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>原生模型 - <code class="codeph">oram</code> ：&lt;http://xmlns.oracle.com/models/&gt;</p>
                     </li>
                     <li>
                        <p>本机虚拟模型 - <code class="codeph">oravm</code> ：&lt;http://xmlns.oracle.com/virtual_models/&gt;</p>
                     </li>
                     <li>
                        <p>RDB2RDF模型 - <code class="codeph">orardbm</code> ：&lt;http://xmlns.oracle.com/rdb_models/&gt;</p>
                     </li>
                  </ul>
                  <div class="example" id="GUID-7EE22B1F-D5C1-4F0F-85B9-CAB4BB815819__CHDCJICJ">
                     <p class="titleinexample">例8-9查询多个数据集</p>
                     <p><a href="rdf-views.html#GUID-7EE22B1F-D5C1-4F0F-85B9-CAB4BB815819__CHDCJICJ">例8-9</a>查询多个数据集。在这个查询中，第一个三重模式<code class="codeph">{ ?x rdf:type :Person }</code>会照常违反本机模型<code class="codeph">m1</code> ，但是<code class="codeph">{ ?x：名字？name }</code>将违反本地本机模型<code class="codeph">m2</code>和{ <code class="codeph">?x：电子邮件？email }</code>将违反本地RDB2RDF模型<code class="codeph">rdfview1</code> 。
                     </p><pre class="oac_no_warn" dir="ltr">select * from table（sem_match（'SELECT？X ？名称 ？电子邮件WHERE {？x rdf：type：Person。可选的{SERVICE oram：m2 {？x：名字？name}}可选{SERVICE orardbm：rdfview1 {？x：电子邮件？email}}}'sem_models（'m1'），null，null，null，null，''））;</pre><p>仅在SEM_MATCH的<code class="codeph">models</code>参数中指定的单个模型允许重载SERVICE使用。重载的SERVICE查询不允许多个模型或规则库作为输入。对于这种组合，应该使用包含多个模型和/或蕴涵的虚拟模型。此外， <code class="codeph">index_status</code>参数仅检查在models参数中作为输入传递的虚拟模型中包含的含义。这意味着不会检查在重载的SERVICE调用中引用的蕴涵状态。
                     </p>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-7EE22B1F-D5C1-4F0F-85B9-CAB4BB815819__CHDJEIJH">
                     <p class="titleinexample">示例8-10查询虚拟RDB2RDF数据和本机RDF数据</p>
                     <p><a href="rdf-views.html#GUID-7EE22B1F-D5C1-4F0F-85B9-CAB4BB815819__CHDJEIJH">示例8-10</a>查询两个数据集： <a href="rdf-views.html#GUID-CEFE07FA-FAAB-4FF0-B70C-0BDA20306F87__CHDBJBJD">示例8-7中</a>的<code class="codeph">empdb_model</code>和名为<code class="codeph">people</code>的本机模型。
                     </p><pre class="oac_no_warn" dir="ltr">- 创建本机模型人员 - 创建表atab（gval varchar2（4000），tri sdo_rdf_triple_s）;执行sem_apis.create_sem_model（'people'，'atab'，'tri'）; create table stab（RDF $ STC_GRAPH varchar2（4000），RDF $ STC_sub varchar2（4000），RDF $ STC_pred varchar2（4000），RDF $ STC_obj varchar2（4000））;授予选择stab to mdsys;在atab上授予对mdsys的插入;插入到stab值中（null，'&lt;http：//empdb/TESTUSER.EMP/EMPNO=1&gt;'，'&lt;http://people.org/age&gt;'，'“35”^^ &lt;http：// www.w3.org/2001/XMLSchema#int&gt;'）;插入到stab值中（null，'&lt;http：//empdb/TESTUSER.EMP/EMPNO=2&gt;'，'&lt;http://people.org/age&gt;'，'“39”^^ &lt;http：// www.w3.org/2001/XMLSchema#int&gt;'）;插入到stab值中（null，'&lt;http：//empdb/TESTUSER.EMP/EMPNO=3&gt;'，'&lt;http://people.org/age&gt;'，'“30”^^ &lt;http：// www.w3.org/2001/XMLSchema#int&gt;'）;插入到stab值中（null，'&lt;http：//empdb/TESTUSER.EMP/EMPNO=4&gt;'，'&lt;http://people.org/age&gt;'，'“42”^^ &lt;http：// www.w3.org/2001/XMLSchema#int&gt;'）;承诺; exec sem_apis.bulk_load_from_staging_table（'people'，'testuser'，'stab'）; - 查询多个数据集 -  SELECT emp，age FROM TABLE（SEM_MATCH（'SELECT？emp？年龄在哪里{？emp peop：年龄？age SERVICE orardbm：empdb_model {？emp emp：ref-DEPTNO？部门？dept dept：LOC“Boston”}}'，SEM_Models（'people'），NULL，SEM_ALIASES（SEM_ALIAS（'dept'，'http：//empdb/TESTUSER.DEPT#'），SEM_ALIAS（'emp'，'http ：//empdb/TESTUSER.EMP#'），SEM_ALIAS（'peop'，'http：//people.org/'）），NULL））;</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="rdf-views.html#GUID-245C5211-81B9-4F3A-BFC8-C0D712137616">具有重载服务的嵌套循环下推</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="rdf-views.html#GUID-8C19D83B-22CA-49AA-B2E9-E6935A5E0B0C" title="您可以在Oracle Spatial和Graph RDF语义图中创建和使用关系数据的RDF视图。">RDF视图：关系数据作为RDF</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-245C5211-81B9-4F3A-BFC8-C0D712137616" name="GUID-245C5211-81B9-4F3A-BFC8-C0D712137616"></a><h4 id="RDFRM-GUID-245C5211-81B9-4F3A-BFC8-C0D712137616" class="sect4"><span class="enumeration_section">8.4.1</span>具有重载服务的嵌套循环下推</h4>
                  <div>
                     <p>在某些情况下，使用嵌套循环服务可以提高性能。考虑针对多个数据集的以下检查查询，该查询查找具有35岁人员的所有部门的属性。</p><pre class="pre codeblock"><code>SELECT emp，dept，p，o FROM TABLE（SEM_MATCH（'SELECT * WHERE {？emp peop：年龄35服务orardbm：empdb_model {？emp emp：ref-DEPTNO？部门？部门？p？o}}'，SEM_Models（'people'），NULL，SEM_ALIASES（SEM_ALIAS（'dept'，'http：//empdb/TESTUSER.DEPT#'），SEM_ALIAS（'emp'，'http：// empdb / TESTUSER .EMP＃'），SEM_ALIAS（'peop'，'http：//people.org/'）），NULL））;</code></pre><p>要获得与给定图形模式匹配的所有结果，首先是三元组<code class="codeph">{ ?emp peop:age 35 }</code>与模范<code class="codeph">people</code>匹配，然后是三元组<code class="codeph">{ ?emp emp：ref-DEPTNO？d。 ？d部门：DNAME？dept }</code>与模型<code class="codeph">empdb_model</code>匹配，最后结果连接。假设模范人员中只有一个35岁的<code class="codeph">people</code> ，但是有100,000个三元组，其中包含有关部门的信息。显然，检索所有结果的策略不是最有效的，并且查询可能性能较差，因为在与查询的其余部分连接之前需要处理大量结果。
                     </p>
                     <p>在这种情况下，嵌套循环服务可以提高性能。如果使用提示<code class="codeph">OVERLOADED_NL=T</code> ，则计算查询的第一部分的结果，并且在嵌套循环中以程序方式执行SERVICE模式一次<code class="codeph">?来自根三重模式的emp</code>值。的<code class="codeph">?在每个执行中，SERVICE模式中的emp</code>主题变量被根三重模式中的常量替换。这有效地将连接条件下推到SERVICE子句中。
                     </p>
                     <p>以下示例显示了对前面的查询使用<code class="codeph">OVERLOADED_NL=T</code>提示。
                     </p><pre class="pre codeblock"><code>SELECT emp，dept，p，o FROM TABLE（SEM_MATCH（'SELECT * WHERE {？emp peop：年龄35服务orardbm：empdb_model {？emp emp：ref-DEPTNO？部门？部门？p？o}}'，SEM_Models（'people'），NULL，SEM_ALIASES（SEM_ALIAS（'dept'，'http：//empdb/TESTUSER.DEPT#'），SEM_ALIAS（'emp'，'http：// empdb / TESTUSER .EMP＃'），SEM_ALIAS（'peop'，'http：//people.org/'）），NULL，null，' <span class="bold">OVERLOADED_NL = T</span> '））;</code></pre><p>可以在SEM_MATCH选项之间或给定SERVICE图的内联注释中指定提示<code class="codeph">OVERLOADED_NL=T</code>
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="rdf-views.html#GUID-7EE22B1F-D5C1-4F0F-85B9-CAB4BB815819" title="您可以通过SERVICE关键字在单个SEM_MATCH查询中将原生三重数据与虚拟RDB2RDF三重数据相结合。">将本机RDF数据与虚拟RDB2RDF数据相结合</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
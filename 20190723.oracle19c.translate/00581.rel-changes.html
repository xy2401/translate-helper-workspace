<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>“Oracle数据库高级队列用户指南”中此版本的更改</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Advanced Queuing User&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Advanced Queuing User&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-database-advanced-queuing.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T10:53:09-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96511-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="preface.html" title="Previous" type="text/html"></link>
      <link rel="next" href="aq-introduction.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle® Database Advanced Queuing"></meta>
    <meta name="dcterms.isVersionOf" content="ADQUE"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="preface.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="aq-introduction.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">高级排队用户指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">“Oracle数据库高级队列用户指南”中此版本的更改</li>
            </ol>
            <a id="GUID-99BB7E1C-B535-4813-8D40-A4C6BB251B6C" name="GUID-99BB7E1C-B535-4813-8D40-A4C6BB251B6C"></a><a id="ADQUE3676"></a>
            
            <h2 id="ADQUE-GUID-99BB7E1C-B535-4813-8D40-A4C6BB251B6C" class="sect2">“Oracle数据库高级队列用户指南”中此版本的更改</h2>
         </header>
         <div class="ind">
            <div>
               <p>本前言包含：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="rel-changes.html#GUID-F3B96973-945F-47B3-844C-5DE92F57F04F">Oracle Database Advanced Queuing 12c第2版（12.2）中的更改</a></p>
                  </li>
                  <li>
                     <p><a href="rel-changes.html#GUID-2664B2F4-DDC8-4F83-AA01-B0B2352BF0F1">Oracle Database Advanced Queuing 12c第1版（12.1.0.2）中的更改</a></p>
                  </li>
                  <li>
                     <p><a href="rel-changes.html#GUID-A1EAA5BD-C1ED-482A-AE04-9727F37D1C78">Oracle Database Advanced Queuing 12c第1版（12.1）中的更改</a></p>
                  </li>
               </ul>
            </div>
            <div class="props_rev_3"><a id="GUID-21381200-A3D3-48DE-8603-9AF271015882" name="GUID-21381200-A3D3-48DE-8603-9AF271015882"></a><h3 id="ADQUE-GUID-21381200-A3D3-48DE-8603-9AF271015882" class="sect3">Oracle Database Advanced Queuing Release 19c，版本19.2中的更改</h3>
               <div>
                  <p>以下是<span class="italic">Oracle Database Advanced Queuing用户指南（</span>适用于Oracle Database Release 19c，版本19.2）中的更改</p>
               </div>
               <div class="props_rev_3"><a id="GUID-2FE190FB-B59D-4A9B-98C1-26210FE834CD" name="GUID-2FE190FB-B59D-4A9B-98C1-26210FE834CD"></a><h4 id="ADQUE-GUID-2FE190FB-B59D-4A9B-98C1-26210FE834CD" class="sect4">新功能</h4>
                  <div>
                     <p>以下功能是此版本中的新增功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>增强的基于密钥的消息传递</p>
                           <p>与AQ经典（非分片）队列相比，AQ分片队列的性能要好得多。这是通过对队列进行分片来实现的，其中每个分片都由数据库的特定实例拥有。默认情况下，在排队和出列操作时，分片对用户完全透明。AQ内部将消息放入适当的分片中，以获得JMS规范要求的最大性能和会话级排序。会话级别排序可确保如果两个消息都由同一会话排队并且具有相同的优先级和传送模式，则不会以与其排队顺序相反的顺序将两个消息出列。</p>
                           <p>在某些情况下，用户应用程序希望控制分片。用户应用程序可以选择将消息排入队列的分片。用户可以决定他们计划在分片队列中对其消息进行分片的方式，以根据需要支持应用程序逻辑。即使分片受用户控制，AQ分片队列的性能和排序优势仍然保持不变。应用程序可以控制以下内容</p>
                           <ul id="GUID-2FE190FB-B59D-4A9B-98C1-26210FE834CD__UL_WYF_3BS_TGB" style="list-style-type:disc">
                              <li>
                                 <p>队列的分片数</p>
                              </li>
                              <li>
                                 <p>基于密钥的入队：入队会话可以通过在入队时提供带有消息的密钥来选择队列的分片，其中消息将被入队。</p>
                              </li>
                              <li>
                                 <p>Sticky dequeues：对于单用户队列或JMSQueue，分片只能有一个活动的出队会话（类似地，对于多用户队列或JMSTopic，每个用户只有一个出队会话）。该出队会话将在会话的生命周期内坚持队列的碎片。此类功能也可用于JMS侦听器。</p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-2FE190FB-B59D-4A9B-98C1-26210FE834CD__GUID-B7FFC77D-33B7-4B6A-8C1A-8434495CDF03">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="aq-performance-scalability.html#GUID-423633E9-9B72-45B5-9C3E-95386BBEDBA0" title="应用程序可以决定在分片队列中对消息进行分片的方式。在这种情况下，应用程序显式指定将消息排入特定分片。">用户分片</a></p>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-420FC18D-3ADD-4DCB-BDEC-C94774542898" name="GUID-420FC18D-3ADD-4DCB-BDEC-C94774542898"></a><h4 id="ADQUE-GUID-420FC18D-3ADD-4DCB-BDEC-C94774542898" class="sect4">不受支持的功能</h4>
                  <div>
                     <p>此版本不支持以下功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>不支持Oracle Streams</p>
                           <p>从Oracle Database 19c开始，不支持Oracle Streams功能。使用Oracle GoldenGate替换Oracle Streams的所有复制功能。</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-F3B96973-945F-47B3-844C-5DE92F57F04F" name="GUID-F3B96973-945F-47B3-844C-5DE92F57F04F"></a><h3 id="ADQUE-GUID-F3B96973-945F-47B3-844C-5DE92F57F04F" class="sect3">Oracle Database Advanced Queuing 12 <span class="italic">c</span> Release 2（12.2。）中的更改
               </h3>
               <div>
                  <p>以下是<span class="italic">Oracle数据库高级队列用户指南（</span>适用于Oracle Database 12 <span class="italic">c</span>第2版）（12.2）中的更改。
                  </p>
               </div>
               <div class="props_rev_3"><a id="GUID-9D5D3554-8036-4DF5-A44C-A77A171D37C8" name="GUID-9D5D3554-8036-4DF5-A44C-A77A171D37C8"></a><h4 id="ADQUE-GUID-9D5D3554-8036-4DF5-A44C-A77A171D37C8" class="sect4">新功能</h4>
                  <div>
                     <p>以下功能是此版本中的新增功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>PL / SQL在Sharded队列中对JMS和非JMS（ADT或RAW）有效负载进行入队和出队支持</p>
                           <p>Oracle Database 12 <span class="italic">c</span>第2版（12.2）扩展并支持PL / SQL API，以对分片队列中的JMS，ADT和RAW有效负载执行入队和出队操作。PL / SQL Array API还支持分片队列。许多现有的非JMS应用程序现在可以使用分片队列，只需很少或不需要更改。
                           </p>
                           <p>从Oracle Database 12 <span class="italic">c</span> Release 2（12.2）开始，使用分片队列的JMS客户可以使用PL / SQL通知来注册成功入队时由AQ Server自动调用的PL / SQL过程。PL / SQL通知可以消除客户端轮询队列中消息的需要，因为消息可以在服务器上自动出列和处理。
                           </p>
                           <p>有关更多信息，请参阅<a href="aq-administrative-interface.html#GUID-803975AA-F341-4B85-B35B-B2996AB7ABB3" title="这些主题描述了如何管理分片队列。">管理分片队列</a> 。
                           </p>
                        </li>
                        <li>
                           <p>Sharded Queue可诊断性和可管理性</p>
                           <p>从12 <span class="italic">c</span>版本2（12.2）开始，AQ分片队列为其消息缓存提供顾问程序，视图和自动管理，以优化<code class="codeph">STREAMS_POOL</code>内存分配和吞吐量。
                           </p>
                           <p>有关更多信息，请参阅<a href="aq-performance-scalability.html#GUID-AE1B40DA-FCEE-4EBB-8B83-96477C47DD49">Sharded Queues Tuning</a> 。
                           </p>
                        </li>
                        <li>
                           <p>Oracle Database Advanced Queuing的更长标识符</p>
                           <p>从12 <span class="italic">c</span>版本2（12.2）开始，AQ队列名称的最大长度已增加到122个字节。订户和收件人名称的最大长度增加到128个字符。对于AQ规则引擎，规则名称和规则集名称的最大长度现在为128个字节。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADQUE3686"></a><div class="props_rev_3"><a id="GUID-2664B2F4-DDC8-4F83-AA01-B0B2352BF0F1" name="GUID-2664B2F4-DDC8-4F83-AA01-B0B2352BF0F1"></a><h3 id="ADQUE-GUID-2664B2F4-DDC8-4F83-AA01-B0B2352BF0F1" class="sect3">Oracle Database Advanced Queuing 12 <span class="italic">c</span> Release 1（12.1.0.2）中的更改</h3>
               <div>
                  <p>以下是<span class="italic">Oracle数据库高级队列用户指南（</span>适用于Oracle Database 12 <span class="italic">c</span>第1版）（12.1.0.2）中的更改。
                  </p>
               </div><a id="ADQUE3687"></a><div class="props_rev_3"><a id="GUID-D310FF4C-9901-476D-B4B9-2A42069D1034" name="GUID-D310FF4C-9901-476D-B4B9-2A42069D1034"></a><h4 id="ADQUE-GUID-D310FF4C-9901-476D-B4B9-2A42069D1034" class="sect4">新功能</h4>
                  <div>
                     <p>以下功能是此版本中的新增功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>JMS流媒体</p>
                           <p>在Oracle数据库12 <span class="italic">c</span>解除1（12.1.0.2），高级队列介绍JMS流与入队和出队，用于通过分片队列<code class="codeph">AQjmsBytesMessage</code>和<code class="codeph">AQjmsStreamMessage</code> ，对于感兴趣的发送和接收大消息数据或有效载荷的应用程序。
                           </p>
                           <p>有关更多信息，请参阅<span class="q">“ <a href="jms-introduction.html#GUID-3C01DF53-88AE-4A33-986A-5C259230491F">JMS Streaming</a> ”</span> 。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="ADQUE3677"></a><div class="props_rev_3"><a id="GUID-A1EAA5BD-C1ED-482A-AE04-9727F37D1C78" name="GUID-A1EAA5BD-C1ED-482A-AE04-9727F37D1C78"></a><h3 id="ADQUE-GUID-A1EAA5BD-C1ED-482A-AE04-9727F37D1C78" class="sect3">Oracle Database Advanced Queuing 12 <span class="italic">c</span>第1版（12.1）中的更改</h3>
               <div>
                  <p>以下是<span class="italic">Oracle数据库高级队列用户指南（</span>适用于Oracle Database 12 <span class="italic">c</span>第1版（12.1））中的更改。
                  </p>
               </div><a id="ADQUE3678"></a><div class="props_rev_3"><a id="GUID-886B084A-F632-4C6E-8CD9-7A905E1D4315" name="GUID-886B084A-F632-4C6E-8CD9-7A905E1D4315"></a><h4 id="ADQUE-GUID-886B084A-F632-4C6E-8CD9-7A905E1D4315" class="sect4">新功能</h4>
                  <div>
                     <p>以下功能是此版本中的新增功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>JMS Sh arded Queues</p>
                           <p>在Oracle Database <span class="italic">12c</span>第1版（12.1）中，高级队列引入了高性能和可伸缩的分片JMS队列。分片队列是单个逻辑队列，通过系统维护的分区划分为多个独立的物理队列。一个<a id="d6132e601" class="indexterm-anchor"></a> <a href="glossary.html#GUID-2FB637EC-4964-4E48-A71A-3C4F27606A0B"><span class="xrefglossterm">分片队列</span></a>增加了enqueue-dequeue吞吐量，特别是在Oracle RAC实例中，因为在不同队列分片上的两个消息之间进行排序是最大的努力。每个分片都是根据会话中的入队时间排序的。分片队列自动管理表分区，以便入队者和出队者不会相互竞争。此外，分片队列使用内存中的消息缓存来优化性能，并减少AQ-JMS排队和出队的磁盘和CPU开销。对于具有高入队或出队率的队列，或者对于具有多个订户的队列，分片队列是跨Rora实例使用的队列的首选JMS队列。
                           </p>
                           <p>在12.2中，Sharded Queues已得到增强，可以支持更多JMS。有关详细信息，请参阅分<a href="aq-performance-scalability.html#GUID-30265296-1110-47C0-B949-D22520D04197" title="应用程序可以决定在分片队列中对消息进行分片的方式。在这种情况下，应用程序显式指定将消息排入特定分片。">片队列</a> 。
                           </p>
                        </li>
                        <li>
                           <p>结果缓存增强</p>
                           <p>在Oracle Database 12 <span class="italic">c</span>第1版（12.1）中，规则引擎引入了一个<a id="d6132e624" class="indexterm-anchor"></a> <a href="glossary.html#GUID-26999788-C87F-44B1-B7E7-725D808A1079"><span class="xrefglossterm">结果缓存</span></a>可以提高许多常用规则的性能。如果先前已经评估了具有相同属性的表达式，则结果缓存将绕过评估阶段。并非所有规则结果都被缓存，例如规则结果可能是非确定性的，或者未评估所有规则或属性包含非标量数据类型时。对于高级队列，当订阅及其出列会话长期存在时，缓存最有用。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">LONG VARCHAR</code>支持</p>
                           <p>该<a id="d6132e637" class="indexterm-anchor"></a><a id="d6132e641" class="indexterm-anchor"></a> Oracle Database 12 <span class="italic">c</span>第1版（12.1）中的Oracle数据库高级队列支持<code class="codeph">LONG VARCHAR</code>数据类型。
                           </p>
                        </li>
                        <li>
                           <p>三层背景架构</p>
                           <p>Oracle Database 12c第1版（12.1）介绍了<a id="d6132e654" class="indexterm-anchor"></a> AQ后台流程架构采用全新的3层设计。
                           </p>
                           <p>有关更多信息，请参阅<span class="q">“ <a href="aq-basic-components.html#GUID-FBA9CCE1-1DFE-4C1D-B795-89AFA66AB4FC" title="Oracle数据库高级队列12c第1版（12.1）引入了一种新的AQ背景架构，采用3层设计。">AQ背景架构</a> ”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>支持Data Guard数据库滚动升级</p>
                           <p>现在可以使用Data Guard数据库滚动升级（仅限临时逻辑备用数据库）以滚动方式将使用Oracle数据库高级队列的数据库升级到新的Oracle数据库版本和修补程序集。从Oracle Database 12 <span class="italic">c</span>第1版（12.1）开始支持滚动升级。
                           </p>
                           <p>Data Guard数据库滚动升级通过以滚动方式升级到新数据库版本或补丁集来减少计划停机时间。此类升级的数据库停机总时间仅限于执行Data Guard切换所需的少量时间。</p>
                           <p>以下软件包将支持使用逻辑备用数据库进行滚动升级：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">DBMS_AQ</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">DBMS_AQJMS</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">DBMS_AQADM</code> ，以下过程除外：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><code class="codeph">SCHECULE_PROPAGATION</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">UNSCHEDULE_PROPAGATION</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">ALTER_PROPAGATION_SCHEDULE</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">ENABLE_PROPAGATION_SCHEDULE</code></p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">DISABLE_PROPAGATION_SCHEDULE</code></p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-886B084A-F632-4C6E-8CD9-7A905E1D4315__GUID-22768405-A65C-442E-A3D6-DF8C66C5B01B">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>有关Oracle Database AQ包的更多信息，请<a href="../arpls/index.html" target="_blank"><span class="italic">参见Oracle Database PL / SQL包和类型参考</span></a></p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
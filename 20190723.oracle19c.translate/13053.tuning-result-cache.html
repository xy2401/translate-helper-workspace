<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>调整结果缓存</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Performance Tuning Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Performance Tuning Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-performance-tuning-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-12T22:26:14-07:00"></meta>
      <meta name="dcterms.title" content="Database Performance Tuning Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96347-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="tuning-shared-pool-and-large-pool.html" title="Previous" type="text/html"></link>
      <link rel="next" href="tuning-program-global-area.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TGDBA"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="tuning-shared-pool-and-large-pool.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="tuning-program-global-area.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库性能调优指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-III-tuning-database-memory.html" property="item" typeof="WebPage"><span property="name">调整数据库内存</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">调整结果缓存</li>
            </ol>
            <a id="GUID-FA30CC32-17AB-477A-9E4C-B47BFE0968A1" name="GUID-FA30CC32-17AB-477A-9E4C-B47BFE0968A1"></a><a id="TGDBA616"></a>
            
            <h2 id="TGDBA-GUID-FA30CC32-17AB-477A-9E4C-B47BFE0968A1" class="sect2"><span class="enumeration_chapter">15</span>调整结果缓存</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章介绍如何调整结果缓存并包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="tuning-result-cache.html#GUID-9C00174C-9046-4EB1-BC1C-5E7FA03FB9AA">关于结果缓存</a></p>
                  </li>
                  <li>
                     <p><a href="tuning-result-cache.html#GUID-B4EB65AF-CBDB-4340-A526-254401AEA8D2">配置结果缓存</a></p>
                  </li>
                  <li>
                     <p><a href="tuning-result-cache.html#GUID-93F518A7-1531-4CBB-8A0F-DE3248813A4C">指定结果缓存的查询</a></p>
                  </li>
                  <li>
                     <p><a href="tuning-result-cache.html#GUID-F99D9B4F-FFFC-4C5B-BB17-96730F3C1820">监视结果缓存</a></p>
                  </li>
               </ul>
            </div><a id="TGDBA617"></a><div class="props_rev_3"><a id="GUID-9C00174C-9046-4EB1-BC1C-5E7FA03FB9AA" name="GUID-9C00174C-9046-4EB1-BC1C-5E7FA03FB9AA"></a><h3 id="TGDBA-GUID-9C00174C-9046-4EB1-BC1C-5E7FA03FB9AA" class="sect3"><span class="enumeration_section">15.1</span>关于结果缓存</h3>
               <div>
                  <p>结果缓存是共享全局区域（SGA）或客户端应用程序内存中的内存区域，其存储数据库查询或查询块的结果以供重用。缓存的行在SQL语句和会话之间共享，除非它们变得陈旧。</p>
                  <p>本节介绍两种类型的结果缓存，包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="tuning-result-cache.html#GUID-60F72D26-3DD0-4DBB-9DCE-3A7634559A3C">服务器结果缓存概念</a></p>
                     </li>
                     <li>
                        <p><a href="tuning-result-cache.html#GUID-39C521D4-5C6E-44B1-B7C7-DEADD7D9CAF0">客户端结果缓存概念</a></p>
                     </li>
                  </ul>
               </div><a id="TGDBA618"></a><div class="props_rev_3"><a id="GUID-60F72D26-3DD0-4DBB-9DCE-3A7634559A3C" name="GUID-60F72D26-3DD0-4DBB-9DCE-3A7634559A3C"></a><h4 id="TGDBA-GUID-60F72D26-3DD0-4DBB-9DCE-3A7634559A3C" class="sect4"><span class="enumeration_section">15.1.1</span>服务器结果缓存概念</h4>
                  <div>
                     <p>服务器结果缓存是共享池中的内存池。此内存池由SQL查询结果缓存（用于存储SQL查询的结果）和PL / SQL函数结果缓存（用于存储PL / SQL函数返回的值）组成。</p>
                     <p>本节介绍服务器结果缓存，包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="tuning-result-cache.html#GUID-25608BFE-B8DB-469E-9BAD-6414A0816F85">使用服务器结果缓存的好处</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-result-cache.html#GUID-6A7E9B2D-F2F1-4C3A-9C91-8569FA7F1938">了解服务器结果缓存的工作原理</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-60F72D26-3DD0-4DBB-9DCE-3A7634559A3C__GUID-7CFB7251-2749-4A6B-8ED9-1EC7CF623288">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关服务器结果缓存的信息，请参阅<a href="../cncpt/memory-architecture.html#CNCPT1919" target="_blank"><span class="italic">Oracle数据库概念</span></a></p>
                           </li>
                           <li>
                              <p>有关PL / SQL函数结果缓存的信息，请<a href="../lnpls/plsql-subprograms.html#LNPLS00817" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="TGDBA619"></a><div class="props_rev_3"><a id="GUID-25608BFE-B8DB-469E-9BAD-6414A0816F85" name="GUID-25608BFE-B8DB-469E-9BAD-6414A0816F85"></a><h5 id="TGDBA-GUID-25608BFE-B8DB-469E-9BAD-6414A0816F85" class="sect5"><span class="enumeration_section">15.1.1.1</span>使用服务器结果缓存的好处</h5>
                     <div>
                        <p>使用服务器结果缓存的好处取决于应用程序。OLAP应用程序可以从其使用中受益匪浅。缓存的良好候选者是访问大量行但返回少量数据的查询，例如数据仓库中的那些。例如，您可以使用具有等价的高级查询重写来创建实体化视图，这些视图在结果缓存中实现查询而不是使用表。</p>
                        <div class="infoboxnotealso" id="GUID-25608BFE-B8DB-469E-9BAD-6414A0816F85__GUID-5E7D9F65-C605-40CC-B637-4235B3DBADDB">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../dwhsg/advanced-query-rewrite-materialized-views.html#DWHSG0807" target="_blank"><span class="italic">“Oracle数据库数据仓库指南”，</span></a>以获取有关使用结果缓存和使用等价物进行高级查询重写的信息</p>
                        </div>
                     </div>
                  </div><a id="TGDBA620"></a><div class="props_rev_3"><a id="GUID-6A7E9B2D-F2F1-4C3A-9C91-8569FA7F1938" name="GUID-6A7E9B2D-F2F1-4C3A-9C91-8569FA7F1938"></a><h5 id="TGDBA-GUID-6A7E9B2D-F2F1-4C3A-9C91-8569FA7F1938" class="sect5"><span class="enumeration_section">15.1.1.2</span>了解服务器结果缓存的工作<span class="enumeration_section">原理</span></h5>
                     <div>
                        <p>执行查询时，数据库将搜索高速缓存以确定结果是否存在于结果高速缓存中。如果结果存在，则数据库从内存中检索结果，而不是执行查询。如果未缓存结果，则数据库执行查询，将结果作为输出返回，并将结果存储在结果缓存中。</p>
                        <p>当用户重复执行查询和函数时，数据库将从缓存中检索行，从而缩短响应时间。当修改依赖数据库对象中的数据时，缓存结果将变为无效。</p>
                        <p>以下部分包含如何从服务器结果缓存中检索结果的示例：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="tuning-result-cache.html#GUID-91493D24-813B-4075-BB4B-9BE96FA358C6">如何在查询中检索结果</a></p>
                           </li>
                           <li>
                              <p><a href="tuning-result-cache.html#GUID-5892D688-A878-467F-88C3-3C6DA566278D">如何在视图中检索结果</a></p>
                           </li>
                        </ul>
                     </div><a id="TGDBA622"></a><a id="TGDBA623"></a><a id="TGDBA621"></a><div class="props_rev_3"><a id="GUID-91493D24-813B-4075-BB4B-9BE96FA358C6" name="GUID-91493D24-813B-4075-BB4B-9BE96FA358C6"></a><h6 id="TGDBA-GUID-91493D24-813B-4075-BB4B-9BE96FA358C6" class="sect6"><span class="enumeration_section">15.1.1.2.1</span>如何在查询中检索结果</h6>
                        <div>
                           <div class="section">
                              <p>以下示例显示<code class="codeph">hr.employees</code>的查询，该查询使用<code class="codeph">RESULT_CACHE</code>提示从服务器结果缓存中检索行。
                              </p><pre class="oac_no_warn" dir="ltr">SELECT / * + RESULT_CACHE * / department_id，AVG（薪水）FROM hr.employees GROUP BY department_id;</pre><p>此查询的执行计划的一部分可能如下所示：</p><pre class="oac_no_warn" dir="ltr">-------------------------------------------------- ------------ | Id |操作|名称|行----------------------------------------------- --------------- | 0 |选择声明| | 11 | 1 | <span class="bold">RESULT CACHE</span> | <span class="bold">8fpza04gtwsfr6n595au15yj4y</span> | | 2 | HASH GROUP BY | | 11 | 3 |表访问完全|员工| 107 ------------------------------------------------- -------------</pre><p>在此示例中，直接从缓存中检索结果，如执行计划的步骤1中所示。“ <code class="codeph">Name</code>列中的值是结果的缓存ID。
                              </p>
                              <p>以下示例显示了<code class="codeph">V$RESULT_CACHE_OBJECTS</code>视图的查询，以检索有关缓存结果的详细统计信息。
                              </p><pre class="oac_no_warn" dir="ltr">SELECT id，type，creation_timestamp，block_count，column_count，pin_count，row_count FROM V $ RESULT_CACHE_OBJECTS WHERE cache_id ='8fpza04gtwsfr6n595au15yj4y';</pre><p>在此示例中， <code class="codeph">CACHE_ID</code>的值是从前面示例中的解释计划获得的缓存ID。此查询的输出可能如下所示：</p><pre class="oac_no_warn" dir="ltr">ID TYPE CREATION_ BLOCK_COUNT COLUMN_COUNT个PIN_COUNT ROW_COUNT ---------- ---------- --------- ----------- --- --------- ---------- ---------- 2结果06-NOV-11 1 2 0 12</pre></div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="TGDBA625"></a><a id="TGDBA624"></a><div class="props_rev_3"><a id="GUID-5892D688-A878-467F-88C3-3C6DA566278D" name="GUID-5892D688-A878-467F-88C3-3C6DA566278D"></a><h6 id="TGDBA-GUID-5892D688-A878-467F-88C3-3C6DA566278D" class="sect6"><span class="enumeration_section">15.1.1.2.2</span>如何在视图中检索结果</h6>
                        <div>
                           <div class="section">
                              <p><a href="tuning-result-cache.html#GUID-5892D688-A878-467F-88C3-3C6DA566278D__CDEHBEJH">例15-1</a>显示了在<code class="codeph">WITH</code>子句视图中使用<code class="codeph">RESULT_CACHE</code>提示的查询。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-5892D688-A878-467F-88C3-3C6DA566278D__CDEHBEJH">
                              <p class="titleinexample">示例15-1在WITH视图中指定的RESULT_CACHE提示</p><pre class="oac_no_warn" dir="ltr">WITH summary AS（SELECT / * + RESULT_CACHE * / department_id，avg（salary）avg_sal FROM hr.employees GROUP BY department_id）SELECT d。*，avg_sal FROM hr.departments d，summary s WHERE d.department_id = s.department_id;</pre><p>此查询的执行计划的一部分可能如下所示：</p><pre class="oac_no_warn" dir="ltr">-------------------------------------------------- ---------------------------------------------- | ID |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ---------------------------------------------- | 0 |选择声明| | 11 | 517 | 7（29）| 00:00:01 | | * 1 | HASH JOIN | | 11 | 517 | 7（29）| 00:00:01 | | 2 |查看| | 11 | 286 | 4（25）| 00:00:01 | | 3 | <span class="bold">RESULT CACHE</span> | <span class="bold">8nknkh64ctmz94a5muf2tyb8r</span> | | | | | | 4 | HASH GROUP BY | | 11 | 77 | 4（25）| 00:00:01 | | 5 |表访问完全|员工| 107 | 749 | 3（0）| 00:00:01 | | 6 |表访问完全|部门| 27 | 567 | 2（0）| 00:00:01 | -------------------------------------------------- ----------------------------------------------</pre><p>在此示例中，直接从缓存中检索<code class="codeph">summary</code>视图结果，如执行计划的步骤3中所示。“ <code class="codeph">Name</code>列中的值是结果的缓存ID。
                              </p>
                           </div>
                           <!-- class="example" -->
                        </div>
                     </div>
                  </div>
               </div><a id="TGDBA626"></a><div class="props_rev_3"><a id="GUID-39C521D4-5C6E-44B1-B7C7-DEADD7D9CAF0" name="GUID-39C521D4-5C6E-44B1-B7C7-DEADD7D9CAF0"></a><h4 id="TGDBA-GUID-39C521D4-5C6E-44B1-B7C7-DEADD7D9CAF0" class="sect4"><span class="enumeration_section">15.1.2</span>客户端结果缓存概念</h4>
                  <div>
                     <p>Oracle调用接口（OCI）客户端结果缓存是客户端进程内部的一个内存区域，用于缓存OCI应用程序的SQL查询结果集。此客户端缓存存在于每个客户端进程，并由进程内的所有会话共享。Oracle建议对只读或主要表的查询进行客户端结果缓存。</p>
                     <div class="infoboxnote" id="GUID-39C521D4-5C6E-44B1-B7C7-DEADD7D9CAF0__GUID-CBA589A6-1521-48BE-AC92-5C0F78A48022">
                        <p class="notep1">注意：</p>
                        <p>客户端结果缓存与服务器结果缓存不同，后者驻留在SGA中。启用客户端结果缓存后，可以将查询结果集缓存在客户端，服务器或两者上。即使禁用了服务器结果缓存，也可以启用客户端缓存。</p>
                     </div>
                     <p>本节介绍客户端结果缓存，包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="tuning-result-cache.html#GUID-F11479BE-6C28-4293-90E5-18AFAEEB488E">使用客户端结果缓存的好处</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-result-cache.html#GUID-4B9DD91E-7F5B-4C8C-80AA-347C2FAEC725">了解客户端结果缓存的工作原理</a></p>
                        </li>
                     </ul>
                  </div><a id="TGDBA627"></a><div class="props_rev_3"><a id="GUID-F11479BE-6C28-4293-90E5-18AFAEEB488E" name="GUID-F11479BE-6C28-4293-90E5-18AFAEEB488E"></a><h5 id="TGDBA-GUID-F11479BE-6C28-4293-90E5-18AFAEEB488E" class="sect5"><span class="enumeration_section">15.1.2.1</span>使用客户端结果缓存的好处</h5>
                     <div>
                        <p>OCI驱动程序（如OCCI，JDBC OCI驱动程序和ODP.NET）支持客户端结果缓存。使用客户端结果缓存的性能优势包括：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>减少查询响应时间</p>
                              <p>当重复执行查询时，应用程序直接从客户端缓存内存中检索结果，从而加快查询响应时间。</p>
                           </li>
                           <li>
                              <p>更有效地使用数据库资源</p>
                              <p>服务器往返的减少可以显着节省服务器资源的性能，例如服务器CPU和I / O.这些资源可以用于其他任务，从而使服务器更具可伸缩性。</p>
                           </li>
                           <li>
                              <p>降低内存成本</p>
                              <p>结果缓存使用客户端内存，这可能比服务器内存便宜。</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="TGDBA629"></a><a id="TGDBA628"></a><div class="props_rev_3"><a id="GUID-4B9DD91E-7F5B-4C8C-80AA-347C2FAEC725" name="GUID-4B9DD91E-7F5B-4C8C-80AA-347C2FAEC725"></a><h5 id="TGDBA-GUID-4B9DD91E-7F5B-4C8C-80AA-347C2FAEC725" class="sect5"><span class="enumeration_section">15.1.2.2</span>了解客户端结果缓存的工作原理</h5>
                     <div>
                        <p>客户端结果缓存存储最外层查询的结果，这些查询是OCI应用程序定义的列。不缓存子查询和查询块。</p>
                        <p>下图说明了具有数据库登录会话的客户端进程。此客户端进程在客户端进程中运行的多个应用程序会话之间共享一个客户端结果缓存。如果第一个应用程序会话运行查询，则它从数据库中检索行并将它们缓存在客户端结果缓存中。如果其他应用程序会话运行相同的查询，则它们还从客户端结果缓存中检索行。</p>
                        <div class="figure" id="GUID-4B9DD91E-7F5B-4C8C-80AA-347C2FAEC725__CDEGCHGA">
                           <p class="titleinfigure">图15-1客户端结果缓存</p><img src="img/figure_151_client_result_cache.gif" alt="下面是图15-1的描述" title="下面是图15-1的描述" longdesc="img_text/figure_151_client_result_cache.html"><br><a href="img_text/figure_151_client_result_cache.html">“图15-1客户端结果缓存”的说明</a></div>
                        <!-- class="figure" -->
                        <p>客户端结果缓存透明地使结果集与影响它的会话状态或数据库更改保持一致。当事务更改用于构建缓存结果的数据库对象的数据或元数据时，数据库会在下次往返服务器时向OCI客户端发送无效。</p>
                        <div class="infoboxnotealso" id="GUID-4B9DD91E-7F5B-4C8C-80AA-347C2FAEC725__GUID-9F047B09-6A6F-417E-80BE-58FE8C516FD0">
                           <p class="notep1">也可以看看：</p>
                           <p>有关客户端结果缓存的详细信息，请参阅<a href="../lnoci/performance-topics.html#LNOCI10103" target="_blank"><span class="italic">Oracle Call Interface Programmer's Guide</span></a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="TGDBA630"></a><div class="props_rev_3"><a id="GUID-B4EB65AF-CBDB-4340-A526-254401AEA8D2" name="GUID-B4EB65AF-CBDB-4340-A526-254401AEA8D2"></a><h3 id="TGDBA-GUID-B4EB65AF-CBDB-4340-A526-254401AEA8D2" class="sect3"><span class="enumeration_section">15.2</span>配置结果缓存</h3>
               <div>
                  <p>本节介绍如何配置服务器和客户端结果缓存，并包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="tuning-result-cache.html#GUID-E26C1BB2-F2A3-4FFD-93B0-B8A791017289">配置服务器结果缓存</a></p>
                     </li>
                     <li>
                        <p><a href="tuning-result-cache.html#GUID-21CAA1E7-9E46-4442-9F3E-CE09EEF60D92">配置客户端结果缓存</a></p>
                     </li>
                     <li>
                        <p><a href="tuning-result-cache.html#GUID-D2FA7B29-301B-4AB8-8294-2B1B015899F9">设置结果缓存模式</a></p>
                     </li>
                     <li>
                        <p><a href="tuning-result-cache.html#GUID-7E0D0BAD-ACBA-451E-AB38-1EF981AC44ED">结果缓存的要求</a></p>
                     </li>
                  </ul>
               </div><a id="TGDBA631"></a><div class="props_rev_3"><a id="GUID-E26C1BB2-F2A3-4FFD-93B0-B8A791017289" name="GUID-E26C1BB2-F2A3-4FFD-93B0-B8A791017289"></a><h4 id="TGDBA-GUID-E26C1BB2-F2A3-4FFD-93B0-B8A791017289" class="sect4"><span class="enumeration_section">15.2.1</span>配置服务器结果缓存</h4>
                  <div>
                     <p>默认情况下，在数据库启动时，Oracle数据库会将内存分配给共享池中的服务器结果缓存。分配的内存大小取决于共享池和所选内存管理系统的内存大小：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>自动共享内存管理</p>
                           <p>如果使用<code class="codeph">SGA_TARGET</code>初始化参数管理共享池的大小，Oracle数据库<code class="codeph">SGA_TARGET</code>参数值的0.50％分配给结果缓存。
                           </p>
                        </li>
                        <li>
                           <p>手动共享内存管理</p>
                           <p>如果使用<code class="codeph">SHARED_POOL_SIZE</code>初始化参数管理共享池的大小，则Oracle数据库会将1％的共享池大小分配给结果缓存。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-E26C1BB2-F2A3-4FFD-93B0-B8A791017289__GUID-8848C6B3-8143-451A-8194-F45464225567">
                        <p class="notep1">注意：</p>
                        <p>Oracle数据库不会将超过75％的共享池分配给服务器结果缓存。</p>
                     </div>
                     <p>服务器结果缓存的大小会增加，直到达到最大大小。不缓存大于缓存中可用空间的查询结果。数据库采用最近最少使用（LRU）算法来老化缓存结果，但不会自动从服务器结果缓存中释放内存。</p>
                     <p>本节介绍如何配置服务器结果缓存，并包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="tuning-result-cache.html#GUID-753CE20B-ADC5-457C-8669-83250B79DD32">使用初始化参数调整服务器结果缓存的大小</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-result-cache.html#GUID-847E4770-FF77-4011-BA35-15C28BCE1E6A">使用DBMS_RESULT_CACHE管理服务器结果缓存</a></p>
                        </li>
                     </ul>
                  </div><a id="TGDBA633"></a><a id="TGDBA632"></a><div class="props_rev_3"><a id="GUID-753CE20B-ADC5-457C-8669-83250B79DD32" name="GUID-753CE20B-ADC5-457C-8669-83250B79DD32"></a><h5 id="TGDBA-GUID-753CE20B-ADC5-457C-8669-83250B79DD32" class="sect5"><span class="enumeration_section">15.2.1.1</span>使用初始化参数调整服务器结果缓存的大小</h5>
                     <div>
                        <div class="section">
                           <p><a href="tuning-result-cache.html#GUID-753CE20B-ADC5-457C-8669-83250B79DD32__CDEHIIBJ" title="此表列出了控制服务器结果缓存的数据库初始化参数。">表15-1</a>列出了控制服务器结果缓存的数据库初始化参数。
                           </p>
                           <div class="tblformal" id="GUID-753CE20B-ADC5-457C-8669-83250B79DD32__CDEHIIBJ">
                              <p class="titleintable">表15-1服务器结果缓存初始化参数</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="服务器结果缓存初始化参数" width="100%" border="1" summary="This table lists the database initialization parameters that control the server result cache." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="46%" id="d45962e943">参数</th>
                                       <th align="left" valign="bottom" width="54%" id="d45962e946">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="46%" id="d45962e951" headers="d45962e943 ">
                                          <p><code class="codeph">RESULT_CACHE_MAX_SIZE</code></p>
                                       </td>
                                       <td align="left" valign="top" width="54%" headers="d45962e951 d45962e946 ">
                                          <p>指定分配给服务器结果缓存的内存。要禁用服务器结果缓存，请将此参数设置为0。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="46%" id="d45962e959" headers="d45962e943 ">
                                          <p><code class="codeph">RESULT_CACHE_MAX_RESULT</code></p>
                                       </td>
                                       <td align="left" valign="top" width="54%" headers="d45962e959 d45962e946 ">
                                          <p>指定可用于单个结果的服务器结果高速缓存内存的最大量（以百分比表示）。有效值介于1和100之间。默认值为5％。您可以在系统或会话级别设置此参数。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="46%" id="d45962e967" headers="d45962e943 ">
                                          <p><code class="codeph">RESULT_CACHE_REMOTE_EXPIRATION</code></p>
                                       </td>
                                       <td align="left" valign="top" width="54%" headers="d45962e967 d45962e946 ">
                                          <p>指定服务器结果缓存中依赖于远程数据库对象的结果的到期时间（以分钟为单位）。默认值为0，指定不缓存使用远程对象的结果。如果为此参数设置了非零值，则远程数据库上的DML不会使服务器结果缓存无效。</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <div class="infoboxnotealso" id="GUID-753CE20B-ADC5-457C-8669-83250B79DD32__GUID-A9F1B55B-39CC-4219-A134-02D8D4A713F8">
                              <p class="notep1">也可以看看：</p>
                              <p>有关这些初始化参数的更多信息，请<a href="../refrn/index.html" target="_blank"><span class="italic">参见Oracle数据库</span></a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-753CE20B-ADC5-457C-8669-83250B79DD32__GUID-3E688183-F05C-4978-938F-B4ABFD45DB46">要更改分配给服务器结果缓存的内存：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>将<code class="codeph">RESULT_CACHE_MAX_SIZE</code>初始化参数的值设置为所需的大小。
                                 </p>
                                 <p>在Oracle Real Application Clusters（Oracle RAC）环境中，结果缓存特定于每个数据库实例，并且在每个实例上的大小可以不同。但是，失效可跨实例进行。要在群集中禁用服务器结果缓存，必须为每个实例启动显式将此参数设置为0。</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TGDBA634"></a><div class="props_rev_3"><a id="GUID-847E4770-FF77-4011-BA35-15C28BCE1E6A" name="GUID-847E4770-FF77-4011-BA35-15C28BCE1E6A"></a><h5 id="TGDBA-GUID-847E4770-FF77-4011-BA35-15C28BCE1E6A" class="sect5"><span class="enumeration_section">15.2.1.2</span>使用DBMS_RESULT_CACHE管理服务器结果缓存</h5>
                     <div>
                        <p><code class="codeph">DBMS_RESULT_CACHE</code>包提供统计信息，信息和运算符，使您可以管理服务器结果缓存的内存分配。使用<code class="codeph">DBMS_RESULT_CACHE</code>包执行操作，例如检索有关高速缓存内存使用情况的统计信息以及刷新高速缓存。
                        </p>
                        <p>本节介绍如何使用<code class="codeph">DBMS_RESULT_CACHE</code>程序包管理服务器结果缓存，并包含以下主题：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="tuning-result-cache.html#GUID-208B207B-A624-4361-A187-CEF43C3C21FB">查看服务器结果缓存的内存使用情况统计信息</a></p>
                           </li>
                           <li>
                              <p><a href="tuning-result-cache.html#GUID-97121C67-75F3-4EDE-968D-17489386ACA5">刷新服务器结果缓存</a></p>
                           </li>
                        </ul>
                     </div><a id="TGDBA636"></a><a id="TGDBA635"></a><div class="props_rev_3"><a id="GUID-208B207B-A624-4361-A187-CEF43C3C21FB" name="GUID-208B207B-A624-4361-A187-CEF43C3C21FB"></a><h6 id="TGDBA-GUID-208B207B-A624-4361-A187-CEF43C3C21FB" class="sect6"><span class="enumeration_section">15.2.1.2.1</span>查看服务器结果缓存的内存使用情况统计信息</h6>
                        <div>
                           <div class="section">
                              <p>本节介绍如何使用<code class="codeph">DBMS_RESULT_CACHE</code>程序包查看结果缓存的内存分配统计信息。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-208B207B-A624-4361-A187-CEF43C3C21FB__GUID-241C52B3-DC9B-4682-8939-06039343172B">要查看结果缓存的内存使用情况统计信息：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>执行<code class="codeph">DBMS_RESULT_CACHE</code> 。 <code class="codeph">MEMORY_REPORT</code>程序。
                                    </p>
                                    <p><a href="tuning-result-cache.html#GUID-208B207B-A624-4361-A187-CEF43C3C21FB__CDECBJGJ">例15-2</a>显示了该过程的执行。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                           <div class="example" id="GUID-208B207B-A624-4361-A187-CEF43C3C21FB__CDECBJGJ">
                              <p class="titleinexample">示例15-2使用DBMS_RESULT_CACHE包</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SET SERVEROUTPUT ON SQL&gt; EXECUTE DBMS_RESULT_CACHE.MEMORY_REPORT</pre><p>此命令的输出可能如下所示：</p><pre class="oac_no_warn" dir="ltr">R esult C ache M emory R eport [参数]块大小= 1024字节最大缓存大小= 950272字节（928块）最大结果大小= 47104字节（46块）[内存]总内存= 46340字节[共享的0.048％]泳池] ......固定内存= 10696字节[共享池的0.011％] ...状态对象池= 2852字节[共享池的0.003％] ...高速缓冲存储器= 32792字节（32个块）[0.034％的共享池] .......未使用的内存= 30块.......使用的内存= 2块...........依赖性= 1个块...........结果= 1个街区...............SQL = 1阻止PL / SQL过程成功完成。</pre></div>
                           <!-- class="example" -->
                        </div>
                     </div><a id="TGDBA637"></a><div class="props_rev_3"><a id="GUID-97121C67-75F3-4EDE-968D-17489386ACA5" name="GUID-97121C67-75F3-4EDE-968D-17489386ACA5"></a><h6 id="TGDBA-GUID-97121C67-75F3-4EDE-968D-17489386ACA5" class="sect6"><span class="enumeration_section">15.2.1.2.2刷新</span>服务器结果缓存</h6>
                        <div>
                           <div class="section">
                              <p>本节介绍如何使用<code class="codeph">DBMS_RESULT_CACHE</code>程序包删除所有现有结果并清除结果高速缓存内存。
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-97121C67-75F3-4EDE-968D-17489386ACA5__GUID-C0CF33F6-75FF-4DCE-B0CF-510F2F0A19DF">要刷新服务器结果缓存：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>执行<code class="codeph">DBMS_RESULT_CACHE.FLUSH</code>过程。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <div class="infoboxnotealso" id="GUID-97121C67-75F3-4EDE-968D-17489386ACA5__GUID-1DF0A718-4244-4E43-967C-76C331D5E118">
                                 <p class="notep1">也可以看看：</p>
                                 <p>有关<code class="codeph">DBMS_RESULT_CACHE</code>包的信息，请参阅<a href="../arpls/DBMS_RESULT_CACHE.html#ARPLS-GUID-A9E6A34A-A277-41F2-AF0B-54E5DE624299" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a></p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div>
               </div><a id="TGDBA639"></a><a id="TGDBA638"></a><div class="props_rev_3"><a id="GUID-21CAA1E7-9E46-4442-9F3E-CE09EEF60D92" name="GUID-21CAA1E7-9E46-4442-9F3E-CE09EEF60D92"></a><h4 id="TGDBA-GUID-21CAA1E7-9E46-4442-9F3E-CE09EEF60D92" class="sect4"><span class="enumeration_section">15.2.2</span>配置客户端结果缓存</h4>
                  <div>
                     <div class="section">
                        <p><a href="tuning-result-cache.html#GUID-21CAA1E7-9E46-4442-9F3E-CE09EEF60D92__CDEICADD" title="此表列出了启用或影响客户端结果缓存行为的数据库初始化参数。">表15-2</a>列出了启用或影响客户端结果缓存行为的数据库初始化参数。
                        </p>
                        <div class="tblformal" id="GUID-21CAA1E7-9E46-4442-9F3E-CE09EEF60D92__CDEICADD">
                           <p class="titleintable">表15-2客户端结果缓存初始化参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="客户端结果缓存初始化参数" width="100%" border="1" summary="This table lists the database initialization parameters that enable or influence the behavior of the client result cache." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="39%" id="d45962e1290">参数</th>
                                    <th align="left" valign="bottom" width="61%" id="d45962e1293">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="39%" id="d45962e1298" headers="d45962e1290 ">
                                       <p><code class="codeph">CLIENT_RESULT_CACHE_SIZE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="61%" headers="d45962e1298 d45962e1293 ">
                                       <p>指定每个客户端进程的客户端结果缓存的最大大小。要启用客户端结果缓存，请将大小设置为32768字节或更大。较小的值（包括默认值0）将禁用客户端结果缓存。</p>
                                       <p><span class="bold">注意：</span>如果<code class="codeph">CLIENT_RESULT_CACHE_SIZE</code>设置禁用客户端缓存，则客户端节点无法启用它。但是，如果<code class="codeph">CLIENT_RESULT_CACHE_SIZE</code>设置启用了客户端缓存，则客户端节点可以覆盖该设置。例如，客户机节点可以禁用客户端结果缓存或增加其缓存的大小。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="39%" id="d45962e1316" headers="d45962e1290 ">
                                       <p><code class="codeph">CLIENT_RESULT_CACHE_LAG</code></p>
                                    </td>
                                    <td align="left" valign="top" width="61%" headers="d45962e1316 d45962e1293 ">
                                       <p>指定客户端结果缓存的延迟时间量（以毫秒为单位）。默认值为3000（3秒）。如果OCI应用程序在一段时间内未执行任何数据库调用，则此设置会强制执行下一个语句执行调用以检查验证。</p>
                                       <p>如果OCI应用程序不经常访问数据库，则将此参数设置为较低值会导致从OCI客户端到数据库的更多往返，以使客户端结果缓存与数据库保持同步。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="39%" id="d45962e1326" headers="d45962e1290 ">
                                       <p><code class="codeph">兼容</code></p>
                                    </td>
                                    <td align="left" valign="top" width="61%" headers="d45962e1326 d45962e1293 ">
                                       <p>指定Oracle数据库必须与之保持兼容性的版本。要启用客户端结果缓存，必须将此参数设置为11.0.0.0或更高版本。对于视图上的客户端缓存，此参数必须设置为11.2.0.0.0或更高版本。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>可选的客户端配置文件会覆盖服务器参数文件中设置的客户端结果缓存初始化参数。</p>
                        <div class="infoboxnote" id="GUID-21CAA1E7-9E46-4442-9F3E-CE09EEF60D92__GUID-2C5081CC-DA08-4C97-904D-D755D47F93D3">
                           <p class="notep1">注意：</p>
                           <p>客户端结果缓存滞后只能使用<code class="codeph">CLIENT_RESULT_CACHE_LAG</code>初始化参数进行设置。
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-21CAA1E7-9E46-4442-9F3E-CE09EEF60D92__GUID-1FD83DFE-B42B-4B0F-BA70-91867BFA013C">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../lnoci/performance-topics.html#LNOCI10103" target="_blank"><span class="italic">“Oracle调用接口程序员指南”，</span></a>以获取有关可在客户端配置文件中设置的参数的信息</p>
                              </li>
                              <li>
                                 <p><a href="../refrn/index.html" target="_blank"><span class="italic">Oracle Database Reference</span></a>有关这些客户端结果缓存初始化参数的更多信息</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TGDBA641"></a><a id="TGDBA640"></a><div class="props_rev_3"><a id="GUID-D2FA7B29-301B-4AB8-8294-2B1B015899F9" name="GUID-D2FA7B29-301B-4AB8-8294-2B1B015899F9"></a><h4 id="TGDBA-GUID-D2FA7B29-301B-4AB8-8294-2B1B015899F9" class="sect4"><span class="enumeration_section">15.2.3</span>配置结果缓存模式</h4>
                  <div>
                     <div class="section">
                        <p>结果缓存模式是一种数据库设置，用于确定哪些查询有资格在服务器和客户端结果缓存中存储结果集。如果查询符合高速缓存条件，则应用程序会检查结果高速缓存以确定查询结果集是否存在于高速缓存中。如果存在，则直接从结果缓存中检索结果。否则，数据库执行查询并将结果作为输出返回并将其存储在结果缓存中。Oracle建议对只读或主要读取数据库对象的查询进行结果缓存。</p>
                        <p>启用结果缓存后，数据库还会缓存调用非确定性PL / SQL函数的查询。当缓存调用此类函数的<code class="codeph">SELECT</code>语句时，结果缓存会跟踪PL / SQL函数和数据库对象的数据依赖性。但是，如果函数使用未跟踪的数据（例如序列， <code class="codeph">SYSDATE</code> ， <code class="codeph">SYS_CONTEXT</code>和包变量），则在调用此函数的查询上使用结果缓存可能会产生过时的结果。在这方面，结果缓存的行为与缓存PL / SQL函数相同。因此，在选择启用结果缓存时，请始终考虑数据准确性和性能。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D2FA7B29-301B-4AB8-8294-2B1B015899F9__GUID-360B7917-5295-4308-BF61-55EBB990817E">要设置结果缓存模式：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>设置值<a id="d45962e1429" class="indexterm-anchor"></a> <code class="codeph">RESULT_CACHE_MODE</code>初始化参数，用于确定结果缓存的行为。
                              </p>
                              <p>您可以为实例（ <code class="codeph">ALTER SYSTEM</code> ），会话（ <code class="codeph">ALTER SESSION</code> ）或服务器参数文件设置此参数。
                              </p>
                              <p><a href="tuning-result-cache.html#GUID-D2FA7B29-301B-4AB8-8294-2B1B015899F9__CDEICIAI" title="此表列出了RESULT_CACHE_MODE初始化参数的可能值。">表15-3</a>说明了此参数的值。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="tblformal" id="GUID-D2FA7B29-301B-4AB8-8294-2B1B015899F9__CDEICIAI">
                           <p class="titleintable">表15-3 RESULT_CACHE_MODE参数的值</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="RESULT_CACHE_MODE参数的值" width="100%" border="1" summary="This table lists the possible value for the RESULT_CACHE_MODE initialization parameter." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="13%" id="d45962e1461">值</th>
                                    <th align="left" valign="bottom" width="87%" id="d45962e1464">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d45962e1469" headers="d45962e1461 ">
                                       <p><code class="codeph">手册</code></p>
                                    </td>
                                    <td align="left" valign="top" width="87%" headers="d45962e1469 d45962e1464 ">
                                       <p>查询结果只能使用查询提示或表注释存储在结果缓存中。这是默认值和建议值。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="13%" id="d45962e1477" headers="d45962e1461 ">
                                       <p><code class="codeph">力</code></p>
                                    </td>
                                    <td align="left" valign="top" width="87%" headers="d45962e1477 d45962e1464 ">
                                       <p>所有结果都存储在结果缓存中。如果查询结果不在缓存中，则数据库执行查询并将结果存储在缓存中。后续执行相同的SQL语句（包括结果缓存提示）从缓存中检索数据。如果可能，会话将使用这些结果。要从缓存中排除查询结果，必须使用<code class="codeph">/*+ NO_RESULT_CACHE */</code>查询提示。
                                       </p>
                                       <p><span class="bold">注意：</span>建议不要使用<code class="codeph">FORCE</code>模式，因为数据库和客户端将尝试缓存所有查询，这可能会产生显着的性能和锁存开销。此外，由于调用非确定性PL / SQL函数的查询也会被缓存，因此以这种基于广泛的方式启用结果缓存可能会导致对结果进行重大更改。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnotealso" id="GUID-D2FA7B29-301B-4AB8-8294-2B1B015899F9__GUID-757476F9-D314-4852-A69D-F021F2C7D2F7">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">RESULT_CACHE_MODE</code>初始化参数的信息，请<a href="../refrn/RESULT_CACHE_MODE.html#REFRN10270" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TGDBA642"></a><div class="props_rev_3"><a id="GUID-7E0D0BAD-ACBA-451E-AB38-1EF981AC44ED" name="GUID-7E0D0BAD-ACBA-451E-AB38-1EF981AC44ED"></a><h4 id="TGDBA-GUID-7E0D0BAD-ACBA-451E-AB38-1EF981AC44ED" class="sect4"><span class="enumeration_section">15.2.4</span>结果缓存的要求</h4>
                  <div>
                     <p>启用结果缓存并不能<span class="italic">保证</span>特定结果集将包含在服务器或客户端结果缓存中。要缓存结果，必须满足以下要求：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="tuning-result-cache.html#GUID-7D6142DF-69C5-4043-81B4-7CD90E0945E6">阅读一致性要求</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-result-cache.html#GUID-E5652497-60D0-4F37-944C-208232735937">查询参数要求</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-result-cache.html#GUID-A76DEAB3-AB92-4B1F-BF87-1B0016B6A93F">结果缓存的限制</a></p>
                        </li>
                     </ul>
                  </div><a id="TGDBA643"></a><div class="props_rev_3"><a id="GUID-7D6142DF-69C5-4043-81B4-7CD90E0945E6" name="GUID-7D6142DF-69C5-4043-81B4-7CD90E0945E6"></a><h5 id="TGDBA-GUID-7D6142DF-69C5-4043-81B4-7CD90E0945E6" class="sect5"><span class="enumeration_section">15.2.4.1</span>读取一致性要求</h5>
                     <div>
                        <p>要使快照可重用，它必须具有读取一致性。要使结果集符合缓存条件，必须至少满足下列条件之一：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>用于构建结果的读一致性快照必须检索数据的最新，已提交状态。</p>
                           </li>
                           <li>
                              <p>查询指向使用闪回查询的显式时间点。</p>
                           </li>
                        </ul>
                        <p>如果当前会话具有引用查询中的对象的活动事务，则此查询的结果不适用于缓存。</p>
                     </div>
                  </div><a id="TGDBA644"></a><div class="props_rev_3"><a id="GUID-E5652497-60D0-4F37-944C-208232735937" name="GUID-E5652497-60D0-4F37-944C-208232735937"></a><h5 id="TGDBA-GUID-E5652497-60D0-4F37-944C-208232735937" class="sect5"><span class="enumeration_section">15.2.4.2</span>查询参数要求</h5>
                     <div>
                        <p>如果在查询等效且参数值相同时使用变量值对缓存结果进行参数化，则可以重用缓存结果。不同的值或绑定变量名称可能会导致缓存未命中。如果在查询中使用以下任何构造，则会对结果进行参数化：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>绑定变量</p>
                           </li>
                           <li>
                              <p>SQL函数<code class="codeph">DBTIMEZONE</code> ， <code class="codeph">SESSIONTIMEZONE</code> ， <code class="codeph">USERENV/SYS_CONTEXT</code> （带常量变量）， <code class="codeph">UID</code>和<code class="codeph">USER</code></p>
                           </li>
                           <li>
                              <p>NLS参数</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="TGDBA645"></a><div class="props_rev_3"><a id="GUID-A76DEAB3-AB92-4B1F-BF87-1B0016B6A93F" name="GUID-A76DEAB3-AB92-4B1F-BF87-1B0016B6A93F"></a><h5 id="TGDBA-GUID-A76DEAB3-AB92-4B1F-BF87-1B0016B6A93F" class="sect5"><span class="enumeration_section">15.2.4.3</span>结果缓存的限制</h5>
                     <div>
                        <p>当查询中包含以下对象或函数时，无法缓存结果：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">SYS</code>或<code class="codeph">SYSTEM</code>模式中的临时表和表</p>
                           </li>
                           <li>
                              <p>序列<code class="codeph">CURRVAL</code>和<code class="codeph">NEXTVAL</code>伪列</p>
                           </li>
                           <li>
                              <p>SQL函数<code class="codeph">CURRENT_DATE</code> ， <code class="codeph">CURRENT_TIMESTAMP</code> ， <code class="codeph">LOCAL_TIMESTAMP</code> ， <code class="codeph">USERENV/SYS_CONTEXT</code> （带有非常量变量）， <code class="codeph">SYS_GUID</code> ， <code class="codeph">SYSDATE</code>和<code class="codeph">SYS_TIMESTAMP</code></p>
                           </li>
                        </ul>
                        <p>客户端结果缓存对结果缓存有其他限制。</p>
                        <div class="infoboxnote" id="GUID-A76DEAB3-AB92-4B1F-BF87-1B0016B6A93F__GUID-44D7E5C9-3E47-4F90-8CFF-3294F5EF4826">
                           <p class="notep1">注意：</p>
                           <p>结果缓存对以只读模式打开的Active Data Guard备用数据库不起作用。</p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-A76DEAB3-AB92-4B1F-BF87-1B0016B6A93F__GUID-12D1FFA9-E3F3-4670-A8BD-5281AEEE44D9">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../lnoci/performance-topics.html#LNOCI10103" target="_blank"><span class="italic">Oracle Call Interface Programmer's Guide</span></a> ，了解有关客户端结果缓存的其他限制的信息</p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="TGDBA646"></a><div class="props_rev_3"><a id="GUID-93F518A7-1531-4CBB-8A0F-DE3248813A4C" name="GUID-93F518A7-1531-4CBB-8A0F-DE3248813A4C"></a><h3 id="TGDBA-GUID-93F518A7-1531-4CBB-8A0F-DE3248813A4C" class="sect3"><span class="enumeration_section">15.3</span>为结果缓存指定查询</h3>
               <div>
                  <p>本节介绍如何为结果缓存指定查询，并包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="tuning-result-cache.html#GUID-443C9B44-738B-420F-B6D2-25EBBD950119">使用SQL结果缓存提示</a></p>
                     </li>
                     <li>
                        <p><a href="tuning-result-cache.html#GUID-57DDBE23-9A6D-4556-AEF5-01D427BA716D">使用结果缓存表注释</a></p>
                     </li>
                  </ul>
               </div><a id="TGDBA647"></a><div class="props_rev_3"><a id="GUID-443C9B44-738B-420F-B6D2-25EBBD950119" name="GUID-443C9B44-738B-420F-B6D2-25EBBD950119"></a><h4 id="TGDBA-GUID-443C9B44-738B-420F-B6D2-25EBBD950119" class="sect4"><span class="enumeration_section">15.3.1</span>使用SQL结果缓存提示</h4>
                  <div>
                     <p>在应用程序级别使用结果缓存提示来控制缓存行为。SQL结果缓存提示优先于结果缓存模式和结果缓存表注释。</p>
                     <p>本节介绍如何使用SQL结果缓存提示，并包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="tuning-result-cache.html#GUID-433B9410-AA0F-4E03-ACAD-D90DE73F1C85">使用RESULT_CACHE提示</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-result-cache.html#GUID-A69E55B9-CDAE-429D-B45F-FDB71969C6F9">使用NO_RESULT_CACHE提示</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-result-cache.html#GUID-8755E774-1152-4A9D-A3D0-7AFE12AB732F">在视图中使用RESULT_CACHE提示</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-443C9B44-738B-420F-B6D2-25EBBD950119__GUID-BB9A63B8-CBC6-41AA-9AD0-8F859B673D10">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">RESULT_CACHE</code>和<code class="codeph">NO_RESULT_CACHE</code>提示的信息，请<a href="../sqlrf/Comments.html#SQLRF-GUID-06C047B1-133B-4211-9949-5FE9C0659D44" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                     </div>
                  </div><a id="TGDBA649"></a><a id="TGDBA648"></a><div class="props_rev_3"><a id="GUID-433B9410-AA0F-4E03-ACAD-D90DE73F1C85" name="GUID-433B9410-AA0F-4E03-ACAD-D90DE73F1C85"></a><h5 id="TGDBA-GUID-433B9410-AA0F-4E03-ACAD-D90DE73F1C85" class="sect5"><span class="enumeration_section">15.3.1.1</span>使用RESULT_CACHE提示</h5>
                     <div>
                        <div class="section">
                           <p>当结果缓存模式为<code class="codeph">MANUAL</code> ， <code class="codeph">/*+ RESULT_CACHE */</code> hint指示数据库缓存查询块的结果，并在将来的执行中使用缓存的结果。
                           </p>
                           <p><a href="tuning-result-cache.html#GUID-433B9410-AA0F-4E03-ACAD-D90DE73F1C85__CDEIEGGF">例15-3</a>显示了使用<code class="codeph">RESULT_CACHE</code>提示的查询。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-433B9410-AA0F-4E03-ACAD-D90DE73F1C85__CDEIEGGF">
                           <p class="titleinexample">例15-3使用RESULT_CACHE提示</p><pre class="oac_no_warn" dir="ltr">SELECT / * + RESULT_CACHE * / prod_id，SUM（amount_sold）FROM sales GROUP BY prod_id ORDER BY prod_id;</pre><p>在此示例中，查询指示数据库缓存<code class="codeph">sales</code>表的查询行。
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="TGDBA651"></a><a id="TGDBA650"></a><div class="props_rev_3"><a id="GUID-A69E55B9-CDAE-429D-B45F-FDB71969C6F9" name="GUID-A69E55B9-CDAE-429D-B45F-FDB71969C6F9"></a><h5 id="TGDBA-GUID-A69E55B9-CDAE-429D-B45F-FDB71969C6F9" class="sect5"><span class="enumeration_section">15.3.1.2</span>使用NO_RESULT_CACHE提示</h5>
                     <div>
                        <div class="section">
                           <p><code class="codeph">/*+ NO_RESULT_CACHE */</code> hint指示数据库<span class="italic">不要</span>将结果缓存在服务器或客户端结果缓存中。
                           </p>
                           <p><a href="tuning-result-cache.html#GUID-A69E55B9-CDAE-429D-B45F-FDB71969C6F9__CDEIJICA">示例15-4</a>显示了使用<code class="codeph">NO_RESULT_CACHE</code>提示的查询。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-A69E55B9-CDAE-429D-B45F-FDB71969C6F9__CDEIJICA">
                           <p class="titleinexample">示例15-4使用NO_RESULT_CACHE提示</p><pre class="oac_no_warn" dir="ltr">SELECT / * + NO_RESULT_CACHE * / prod_id，SUM（amount_sold）FROM sales GROUP BY prod_id ORDER BY prod_id;</pre><p>在此示例中，查询指示数据库不要为<code class="codeph">sales</code>表的查询缓存行。
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="TGDBA653"></a><a id="TGDBA654"></a><a id="TGDBA652"></a><div class="props_rev_3"><a id="GUID-8755E774-1152-4A9D-A3D0-7AFE12AB732F" name="GUID-8755E774-1152-4A9D-A3D0-7AFE12AB732F"></a><h5 id="TGDBA-GUID-8755E774-1152-4A9D-A3D0-7AFE12AB732F" class="sect5"><span class="enumeration_section">15.3.1.3</span>在视图中使用RESULT_CACHE提示</h5>
                     <div>
                        <div class="section">
                           <p><code class="codeph">RESULT_CACHE</code>提示仅适用于指定提示的查询块。如果仅在视图中指定提示，则仅缓存这些结果。视图缓存具有以下特征：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>视图必须是以下类型之一：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>标准视图（使用<code class="codeph">CREATE ...创建的视图<code class="codeph">CREATE ...VIEW</code>声明）</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">SELECT</code>语句的<code class="codeph">FROM</code>子句中指定的内联视图</p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">WITH</code>子句创建的内联视图</p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>无法缓存具有相关列（对外部查询块的引用）的视图查询的结果。</p>
                              </li>
                              <li>
                                 <p>查询结果存储在服务器结果缓存中，而不是客户端结果缓存中。</p>
                              </li>
                              <li>
                                 <p>缓存视图未合并到其外部（或引用）查询块中。</p>
                                 <p>将<code class="codeph">RESULT_CACHE</code>提示添加到内联视图会禁用外部查询和内联视图之间的优化，以最大限度地提高缓存结果的可重用性。
                                 </p>
                              </li>
                           </ul>
                           <p>以下示例显示了内联视图<code class="codeph">view1</code>的查询。
                           </p><pre class="oac_no_warn" dir="ltr">SELECT * FROM（SELECT / * + RESULT_CACHE * / department_id，manager_id，count（*）count FROM hr.employees GROUP BY department_id，manager_id）view1 WHERE department_id = 30;</pre><p>在此示例中，来自<code class="codeph">view1</code>的<code class="codeph">SELECT</code>语句是外部块，而来自<code class="codeph">employees</code>的<code class="codeph">SELECT</code>语句是内部块。由于<code class="codeph">RESULT_CACHE</code>提示仅在内部块中指定，因此内部查询的结果存储在服务器结果缓存中，但不会缓存外部查询的结果。
                           </p>
                           <p>假设同一会话运行视图<code class="codeph">view2</code>的查询，如以下示例所示。
                           </p><pre class="oac_no_warn" dir="ltr">with view2 AS（SELECT / * + RESULT_CACHE * / department_id，manager_id，count（*）count FROM hr.employees GROUP BY department_id，manager_id）SELECT * FROM view2 WHERE count BETWEEN 1和5;</pre><p>在此示例中，因为<code class="codeph">RESULT_CACHE</code>提示仅在<code class="codeph">WITH</code>子句的查询块中指定，所以<code class="codeph">employees</code>查询的结果有资格被缓存。因为这些结果是从第一个示例中的查询缓存的，所以第二个示例中<code class="codeph">WITH</code>子句中的<code class="codeph">SELECT</code>语句可以检索缓存的行。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="TGDBA656"></a><a id="TGDBA655"></a><div class="props_rev_3"><a id="GUID-57DDBE23-9A6D-4556-AEF5-01D427BA716D" name="GUID-57DDBE23-9A6D-4556-AEF5-01D427BA716D"></a><h4 id="TGDBA-GUID-57DDBE23-9A6D-4556-AEF5-01D427BA716D" class="sect4"><span class="enumeration_section">15.3.2</span>使用结果缓存表注释</h4>
                  <div>
                     <p>您还可以使用表注释来控制结果缓存。表注释会影响整个查询，而不会影响查询段。使用表注释的主要好处是避免了在应用程序级别向查询添加结果缓存提示的必要性。由于表注释的优先级低于SQL结果缓存提示，因此可以通过在查询级别使用提示来覆盖表和会话设置。</p>
                     <p><a href="tuning-result-cache.html#GUID-57DDBE23-9A6D-4556-AEF5-01D427BA716D__CDEJEFFD" title="此表列出了RESULT_CACHE表注释的有效值。">表15-4</a>说明了<code class="codeph">RESULT_CACHE</code>表注释的有效值。
                     </p>
                     <div class="tblformal" id="GUID-57DDBE23-9A6D-4556-AEF5-01D427BA716D__CDEJEFFD">
                        <p class="titleintable">表15-4 RESULT_CACHE表注释的值</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="RESULT_CACHE表注释的值" width="100%" border="1" summary="This table lists the valid values for the RESULT_CACHE table annotation." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="14%" id="d45962e2329">值</th>
                                 <th align="left" valign="bottom" width="86%" id="d45962e2332">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d45962e2337" headers="d45962e2329 ">
                                    <p><code class="codeph">默认</code></p>
                                 </td>
                                 <td align="left" valign="top" width="86%" headers="d45962e2337 d45962e2332 ">
                                    <p>如果查询中至少有一个表设置为<code class="codeph">DEFAULT</code> ，则此查询的表级别<span class="italic">不会</span>启用结果缓存，除非<code class="codeph">RESULT_CACHE_MODE</code>初始化参数设置为<code class="codeph">FORCE</code>或指定了<code class="codeph">RESULT_CACHE</code>提示。这是默认值。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="14%" id="d45962e2360" headers="d45962e2329 ">
                                    <p><code class="codeph">力</code></p>
                                 </td>
                                 <td align="left" valign="top" width="86%" headers="d45962e2360 d45962e2332 ">
                                    <p>如果查询的所有表都标记为<code class="codeph">FORCE</code> ，则查询结果将被视为缓存。表注释<code class="codeph">FORCE</code>优先于在会话级设置的<code class="codeph">MANUAL</code>的<code class="codeph">RESULT_CACHE_MODE</code>参数值。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>本节介绍如何使用<code class="codeph">RESULT_CACHE</code>表注释，并包含以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="tuning-result-cache.html#GUID-9FAEB29F-C63E-46D5-8C4B-9E4927F45616">使用DEFAULT表注释</a></p>
                        </li>
                        <li>
                           <p><a href="tuning-result-cache.html#GUID-ACE3ED57-357F-4186-98AE-AAFD7F512FA8">使用FORCE表注释</a></p>
                        </li>
                     </ul>
                  </div><a id="TGDBA658"></a><a id="TGDBA657"></a><div class="props_rev_3"><a id="GUID-9FAEB29F-C63E-46D5-8C4B-9E4927F45616" name="GUID-9FAEB29F-C63E-46D5-8C4B-9E4927F45616"></a><h5 id="TGDBA-GUID-9FAEB29F-C63E-46D5-8C4B-9E4927F45616" class="sect5"><span class="enumeration_section">15.3.2.1</span>使用DEFAULT表注释</h5>
                     <div>
                        <div class="section">
                           <p><code class="codeph">DEFAULT</code>表注释可防止数据库在表级缓存结果。
                           </p>
                           <p><a href="tuning-result-cache.html#GUID-9FAEB29F-C63E-46D5-8C4B-9E4927F45616__CDEEFHDD">示例15-5</a>显示了一个<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>语句，该语句使用<code class="codeph">DEFAULT</code>表注释来创建表<code class="codeph">sales</code>和此表的查询。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-9FAEB29F-C63E-46D5-8C4B-9E4927F45616__CDEEFHDD">
                           <p class="titleinexample">示例15-5使用DEFAULT表注释</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE销售（...）RESULT_CACHE（模式默认值）; SELECT prod_id，SUM（amount_sold）FROM sales GROUP BY prod_id ORDER BY prod_id;</pre><p>在此示例中，使用禁用结果缓存的表注释创建<code class="codeph">sales</code>表。该示例还显示了<code class="codeph">sales</code>表的查询，由于表注释，其结果不会考虑用于缓存。
                           </p>
                           <div class="infoboxnotealso" id="GUID-9FAEB29F-C63E-46D5-8C4B-9E4927F45616__GUID-9ABC114C-D755-4E2C-B153-CCB8B2F4C3C6">
                              <p class="notep1">也可以看看：</p>
                              <p>有关<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>语句及其语法的信息，请<a href="../sqlrf/CREATE-TABLE.html#SQLRF01402" target="_blank"><span class="italic">参见“Oracle数据库SQL语言参考</span></a> ”</p>
                           </div>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div><a id="TGDBA660"></a><a id="TGDBA659"></a><div class="props_rev_3"><a id="GUID-ACE3ED57-357F-4186-98AE-AAFD7F512FA8" name="GUID-ACE3ED57-357F-4186-98AE-AAFD7F512FA8"></a><h5 id="TGDBA-GUID-ACE3ED57-357F-4186-98AE-AAFD7F512FA8" class="sect5"><span class="enumeration_section">15.3.2.2</span>使用FORCE表注释</h5>
                     <div>
                        <div class="section">
                           <p>FORCE表注释强制数据库在表级别缓存结果。</p>
                           <p>使用<a href="tuning-result-cache.html#GUID-9FAEB29F-C63E-46D5-8C4B-9E4927F45616__CDEEFHDD">示例15-5</a>中创建的<code class="codeph">sales</code>表，假设您决定强制为此表进行结果缓存，可以使用<code class="codeph">FORCE</code>表注释来执行此操作。
                           </p>
                           <p><a href="tuning-result-cache.html#GUID-ACE3ED57-357F-4186-98AE-AAFD7F512FA8__CDEDCICC">例15-6</a>显示了一个<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句，该语句在<code class="codeph">sales</code>表上使用<code class="codeph">FORCE</code>表注释。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-ACE3ED57-357F-4186-98AE-AAFD7F512FA8__CDEDCICC">
                           <p class="titleinexample">示例15-6使用FORCE表注释</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE销售RESULT_CACHE（MODE FORCE）; SELECT prod_id，SUM（amount_sold）FROM sales GROUP BY prod_id HAVING prod_id = 136; SELECT / * + NO_RESULT_CACHE * / * FROM sales ORDER BY time_id DESC;</pre><p>此示例包括<code class="codeph">sales</code>表的两个查询。由于表注释，第一个查询（经常使用并返回几行）有资格进行缓存。第二个查询是返回许多行的一次性查询，它使用提示来阻止结果缓存。
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                  </div>
               </div>
            </div><a id="TGDBA662"></a><a id="TGDBA663"></a><a id="TGDBA664"></a><a id="TGDBA661"></a><div class="props_rev_3"><a id="GUID-F99D9B4F-FFFC-4C5B-BB17-96730F3C1820" name="GUID-F99D9B4F-FFFC-4C5B-BB17-96730F3C1820"></a><h3 id="TGDBA-GUID-F99D9B4F-FFFC-4C5B-BB17-96730F3C1820" class="sect3"><span class="enumeration_section">15.4</span>监控结果缓存</h3>
               <div>
                  <div class="section">
                     <p>要查看有关服务器和客户端结果缓存的信息，请查询相关的数据库视图和表。</p>
                     <p><a href="tuning-result-cache.html#GUID-F99D9B4F-FFFC-4C5B-BB17-96730F3C1820__CDECIHEI" title="此表列出了包含有关结果缓存的信息的数据库视图和表。">表15-5</a>介绍了用于监视结果缓存的最有用的视图和表。
                     </p>
                     <div class="tblformal" id="GUID-F99D9B4F-FFFC-4C5B-BB17-96730F3C1820__CDECIHEI">
                        <p class="titleintable">表15-5包含有关结果缓存的信息的视图和表</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="包含有关结果缓存的信息的视图和表" width="100%" border="1" summary="This table lists the database views and tables that contain information about the result cache." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="41%" id="d45962e2651">查看/表</th>
                                 <th align="left" valign="bottom" width="59%" id="d45962e2654">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d45962e2659" headers="d45962e2651 ">
                                    <p><code class="codeph">V $ RESULT_CACHE_STATISTICS</code></p>
                                 </td>
                                 <td align="left" valign="top" width="59%" headers="d45962e2659 d45962e2654 ">
                                    <p>列出各种服务器结果缓存设置和内存使用统计信息。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d45962e2667" headers="d45962e2651 ">
                                    <p><code class="codeph">V $ RESULT_CACHE_MEMORY</code></p>
                                 </td>
                                 <td align="left" valign="top" width="59%" headers="d45962e2667 d45962e2654 ">
                                    <p>列出服务器结果缓存中的所有内存块及其相应的统计信息。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d45962e2675" headers="d45962e2651 ">
                                    <p><code class="codeph">V $ RESULT_CACHE_OBJECTS</code></p>
                                 </td>
                                 <td align="left" valign="top" width="59%" headers="d45962e2675 d45962e2654 ">
                                    <p>列出结果在服务器结果缓存中的所有对象及其属性。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d45962e2683" headers="d45962e2651 ">
                                    <p><code class="codeph">V $ RESULT_CACHE_DEPENDENCY</code></p>
                                 </td>
                                 <td align="left" valign="top" width="59%" headers="d45962e2683 d45962e2654 ">
                                    <p>列出服务器结果缓存中的结果与这些结果之间的依赖关系之间的依赖关系详细信息。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d45962e2691" headers="d45962e2651 ">
                                    <p><code class="codeph">CLIENT_RESULT_CACHE_STATS $</code></p>
                                 </td>
                                 <td align="left" valign="top" width="59%" headers="d45962e2691 d45962e2654 ">
                                    <p>存储从OCI客户端进程获取的客户端结果缓存的缓存设置和内存使用情况统计信息。此统计信息表包含使用结果缓存的每个客户端进程的条目。客户端进程终止后，数据库将从此表中删除其条目。客户端表包含类似于<code class="codeph">V$RESULT_CACHE_STATISTICS</code> 。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d45962e2702" headers="d45962e2651 ">
                                    <p><code class="codeph">DBA_TABLES</code> ， <code class="codeph">USER_TABLES</code> ， <code class="codeph">ALL_TABLES</code></p>
                                 </td>
                                 <td align="left" valign="top" width="59%" headers="d45962e2702 d45962e2654 ">
                                    <p>包含<code class="codeph">RESULT_CACHE</code>列，该列显示表的结果缓存模式注释。如果表未注释，则此列显示<code class="codeph">DEFAULT</code> 。此列适用于服务器和客户端结果缓存。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnotealso" id="GUID-F99D9B4F-FFFC-4C5B-BB17-96730F3C1820__GUID-34A23D99-5B55-48AB-A811-797726BA5A2F">
                        <p class="notep1">也可以看看：</p>
                        <p>有关这些视图和表的更多信息，请<a href="../refrn/index.html" target="_blank"><span class="italic">参见Oracle数据库参考</span></a> 。
                        </p>
                     </div>
                     <p>以下示例显示了<code class="codeph">V$RESULT_CACHE_STATISTICS</code>视图的查询，以监视服务器结果缓存统计信息。
                     </p><pre class="oac_no_warn" dir="ltr">COLUMN name FORMAT a20 SELECT name，value FROM V $ RESULT_CACHE_STATISTICS;</pre><p>此查询的输出可能如下所示：</p><pre class="oac_no_warn" dir="ltr">NAME VALUE -------------------- ----------块大小（字节）1024块计数最大3136块计数当前32结果大小最大值（块）156创建计数成功2创建计数失败0查找计数0无效计数0删除计数无效0删除计数有效0</pre><p>以下示例显示<code class="codeph">CLIENT_RESULT_CACHE_STATS$</code>表的查询，以监视客户端结果缓存统计信息。
                     </p><pre class="oac_no_warn" dir="ltr">SELECT stat_id，SUBSTR（name，1,20），value，cache_id FROM CLIENT_RESULT_CACHE_STATS $ ORDER BY cache_id，stat_id;</pre><p>此查询的输出可能如下所示：</p><pre class="oac_no_warn" dir="ltr">STAT_ID统计值名称CACHE_ID ======= ================== ===== ======== 1块大小256 124 2块数最大256 124 3块计数当前128 124 4哈希桶数1024 124 5创建计数成功10 124 6创建计数失败0 124 7查找计数12 124 8无效计数8 124 9删除计数无效0 124 10删除计数有效0 124</pre><p><code class="codeph">CLIENT_RESULT_CACHE_STATS$</code>表包含执行客户端结果缓存的每个活动客户端进程的统计信息条目。每个客户端进程都有唯一的缓存ID。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-F99D9B4F-FFFC-4C5B-BB17-96730F3C1820__GUID-D6B344E8-EA8F-4D86-8443-0BC55D27B33A">要查找执行客户端缓存的会话的客户端连接信息：</p>
                     <ol>
                        <li>
                           <p>从<code class="codeph">GV$SESSION_CONNECT_INFO</code>视图中的<code class="codeph">CLIENT_REGID</code>列获取会话ID，该列对应于<code class="codeph">CLIENT_RESULT_CACHE_STATS$</code>表中的<code class="codeph">CACHE_ID</code>列。
                           </p>
                        </li>
                        <li>
                           <p>查询<code class="codeph">GV$SESSION_CONNECT_INFO</code>和<code class="codeph">GV$SESSION</code>视图中的相关列。
                           </p>
                        </li>
                     </ol>
                     <p>对于服务器和客户端结果缓存统计信息，针对结果缓存优化的数据库应显示“ <code class="codeph">Create Count Failure</code>和“ <code class="codeph">Delete Count Valid</code>统计信息的相对较低的值，同时显示“ <code class="codeph">Find Count</code>统计信息的相对较高的值。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
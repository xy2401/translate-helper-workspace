<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The UTL_REF package provides PL/SQL procedures to support reference-based operations. Unlike SQL, UTL_REF procedures enable you to write generic type methods without knowing the object table name."></meta>
      <meta name="description" content="The UTL_REF package provides PL/SQL procedures to support reference-based operations. Unlike SQL, UTL_REF procedures enable you to write generic type methods without knowing the object table name."></meta>
      <title>UTL_REF</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="The UTL_REF package provides PL/SQL procedures to support reference-based operations. Unlike SQL, UTL_REF procedures enable you to write generic type methods without knowing the object table name."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="UTL_RECOMP.html" title="Previous" type="text/html"></link>
      <link rel="next" href="UTL_RPADV.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="UTL_RECOMP.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="UTL_RPADV.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">UTL_REF</li>
            </ol>
            <a id="GUID-DC7D405F-4A1A-45C8-A282-C12C5B5CAEA3" name="GUID-DC7D405F-4A1A-45C8-A282-C12C5B5CAEA3"></a><a id="ARPLS385"></a><a id="ARPLS385"></a>
            
            <h2 id="ARPLS-GUID-DC7D405F-4A1A-45C8-A282-C12C5B5CAEA3" class="sect2"><span class="enumeration_chapter">265</span> UTL_REF</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">UTL_REF</code>包提供PL / SQL过程以支持基于引用的操作。与SQL不同， <code class="codeph">UTL_REF</code>过程使您能够在不知道对象表名的情况下编写泛型类型方法。
               </p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="UTL_REF.html#GUID-E2098412-B807-4B48-ACF7-7882375BFB69" title="UTL_REF过程使您能够在不知道对象表名称的情况下编写泛型类型方法。">概观</a></p>
                  </li>
                  <li>
                     <p><a href="UTL_REF.html#GUID-D9775FD8-AE3B-4DBC-ABF1-A97EE3058609" title="使用此包需要程序选项。必须在SYS（CONNECT / AS SYSDBA）下创建此程序包。此程序包提供的操作在当前调用用户下执行，而不是在程序包所有者SYS下执行。">安全模型</a></p>
                  </li>
                  <li>
                     <p><a href="UTL_REF.html#GUID-194AA3CE-ABA5-4E97-B066-B7197B2E60AC" title="对象类型是由用户定义的复合数据类型，或作为库类型提供。">类型</a></p>
                  </li>
                  <li>
                     <p><a href="UTL_REF.html#GUID-DF3D4414-58DE-440F-8CC9-EE91BFD3CA3A" title="出于各种原因，在执行UTL_REF函数期间可以返回异常。">例外</a></p>
                  </li>
                  <li>
                     <p><a href="UTL_REF.html#GUID-2D028C6A-CFC4-459F-A37A-5CF8D793C9B8" title="该表列出了UTL_REF子程序并简要描述了它们。">UTL_REF子程序摘要</a></p>
                  </li>
               </ul>
            </div><a id="ARPLS71444"></a><a id="ARPLS71444"></a><div class="props_rev_3"><a id="GUID-E2098412-B807-4B48-ACF7-7882375BFB69" name="GUID-E2098412-B807-4B48-ACF7-7882375BFB69"></a><h3 id="ARPLS-GUID-E2098412-B807-4B48-ACF7-7882375BFB69" class="sect3"><span class="enumeration_section">265.1</span> UTL_REF概述</h3>
               <div>
                  <p><code class="codeph">UTL_REF</code>过程使您能够在不知道对象表名称的情况下编写泛型类型方法。
                  </p>
                  <div class="section">
                     <p>Oracle支持用户定义的复合类型或对象类型。对象类型的任何实例都称为对象。对象类型可以用作列的类型或表的类型。</p>
                     <p>在对象表中，表的每一行都存储一个对象。您可以使用对象标识符唯一标识对象表中的对象。</p>
                     <p>引用是指向对象的持久指针，每个引用都可以包含对象标识符。引用可以是对象类型的属性，也可以存储在表的列中。给定引用，可以检索对象。</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS71445"></a><a id="ARPLS71445"></a><div class="props_rev_3"><a id="GUID-D9775FD8-AE3B-4DBC-ABF1-A97EE3058609" name="GUID-D9775FD8-AE3B-4DBC-ABF1-A97EE3058609"></a><h3 id="ARPLS-GUID-D9775FD8-AE3B-4DBC-ABF1-A97EE3058609" class="sect3"><span class="enumeration_section">265.2</span> UTL_REF安全模型</h3>
               <div>
                  <p>使用此包需要程序选项。必须在<code class="codeph">SYS</code> （ <code class="codeph">CONNECT /AS SYSDBA</code> ）下创建此程序包。此程序包提供的操作在当前调用用户下执行，而不是在程序包所有者<code class="codeph">SYS</code>下执行。</p>
                  <div class="section">
                     <p>您可以使用服务器上存储的PL / SQL过程/包中的<code class="codeph">UTL_REF</code>包，以及客户端/侧PL / SQL代码。
                     </p>
                     <p>当从服务器上的PL / SQL过程/包调用时， <code class="codeph">UTL_REF</code>验证调用者是否具有访问<code class="codeph">REF</code>指向的对象的适当权限。</p>
                     <div class="infoboxnote" id="GUID-D9775FD8-AE3B-4DBC-ABF1-A97EE3058609__GUID-F4B9AAC2-E36D-4D3E-A888-AFA268CE55E8">
                        <p class="notep1">注意：</p>
                        <p>这与服务器上的PL / SQL包/过程形成对比，后者使用定义者的权限操作，其中包所有者必须具有执行所需操作的适当权限。</p>
                     </div>
                     <p>因此，如果在用户<code class="codeph">SYS</code>下定义了<code class="codeph">UTL_REF</code> ，则用户A调用<code class="codeph">UTL_REF</code> 。 <code class="codeph">SELECT</code>从引用中选择一个对象，然后用户A（调用者）需要检查权限。
                     </p>
                     <p>从客户端PL / SQL代码调用时， <code class="codeph">UTL_REF</code>以客户端会话的权限运行，在该会话下执行PL / SQL。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS71446"></a><a id="ARPLS71446"></a><div class="props_rev_3"><a id="GUID-194AA3CE-ABA5-4E97-B066-B7197B2E60AC" name="GUID-194AA3CE-ABA5-4E97-B066-B7197B2E60AC"></a><h3 id="ARPLS-GUID-194AA3CE-ABA5-4E97-B066-B7197B2E60AC" class="sect3"><span class="enumeration_section">265.3</span> UTL_REF类型</h3>
               <div>
                  <p>对象类型是由用户定义的复合数据类型，或作为库类型提供。</p>
                  <div class="section">
                     <p>您可以使用以下语法创建对象类型<code class="codeph">employee_type</code> ：</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE employee_type AS OBJECT（名称VARCHAR2（20），id NUMBER，成员函数GET_ID（名称VARCHAR2）返回成员）;</pre><p>对象类型<code class="codeph">employee_type</code>是一个用户定义的类型，它包含两个属性： <code class="codeph">name</code>和<code class="codeph">id</code> ，以及一个成员函数<code class="codeph">GET_ID</code> （）。
                     </p>
                     <p>您可以使用以下SQL语法创建对象表：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE employee_table OF employee_type;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS71447"></a><a id="ARPLS71448"></a><a id="ARPLS71448"></a><a id="ARPLS71447"></a><div class="props_rev_3"><a id="GUID-DF3D4414-58DE-440F-8CC9-EE91BFD3CA3A" name="GUID-DF3D4414-58DE-440F-8CC9-EE91BFD3CA3A"></a><h3 id="ARPLS-GUID-DF3D4414-58DE-440F-8CC9-EE91BFD3CA3A" class="sect3"><span class="enumeration_section">265.4</span> UTL_REF例外</h3>
               <div>
                  <p>出于各种原因，在执行<code class="codeph">UTL_REF</code>函数期间可以返回异常。
                  </p>
                  <div class="section">
                     <div class="p">例如，以下方案将导致异常：<ul style="list-style-type:disc">
                           <li>
                              <p>所选对象不存在。这可能是因为：</p>
                              <ol>
                                 <li>
                                    <p>该对象已被删除，或者给定的引用是悬空（无效）。</p>
                                 </li>
                                 <li>
                                    <p>对象表已删除或不存在。</p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>无法在可序列化的事务中修改或锁定该对象。可序列化事务启动后，该对象被另一个事务修改。</p>
                           </li>
                           <li>
                              <p>您无权选择或修改对象。<code class="codeph">UTL_REF</code>子程序的调用者必须对正在选择或修改的对象具有适当的权限。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-DF3D4414-58DE-440F-8CC9-EE91BFD3CA3A__GUID-D22E7FE2-FFD7-446F-8C50-92741FBF2CB2">
                     <p class="titleintable">表265-1 <span class="italic"><span class="bold">UTL_REF异常</span></span></p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="UTL_REF例外" width="100%" border="1" summary="This table describes Exceptions raised by UTL_REF subprograms." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="30%" id="d1524950e615">例外</th>
                              <th align="left" valign="bottom" width="70%" id="d1524950e618">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d1524950e623" headers="d1524950e615 ">
                                 <p><code class="codeph">errnum == 942</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d1524950e623 d1524950e618 ">
                                 <p>权限不足。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d1524950e631" headers="d1524950e615 ">
                                 <p><code class="codeph">errnum == 1031</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d1524950e631 d1524950e618 ">
                                 <p>权限不足。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d1524950e639" headers="d1524950e615 ">
                                 <p><code class="codeph">errnum == 8177</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d1524950e639 d1524950e618 ">
                                 <p>如果在可序列化的事务中，则无法序列化。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d1524950e647" headers="d1524950e615 ">
                                 <p><code class="codeph">errnum == 60</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d1524950e647 d1524950e618 ">
                                 <p>检测到死锁。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d1524950e655" headers="d1524950e615 ">
                                 <p><code class="codeph">errnum == 1403</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d1524950e655 d1524950e618 ">
                                 <p>未找到任何数据（如果<code class="codeph">REF</code>为<code class="codeph">NULL</code> ，依此类推。）。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p><code class="codeph">UTL_REF</code>包未定义任何命名的异常。您可以定义异常处理块以捕获特定异常并适当地处理它们。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS71449"></a><a id="ARPLS71450"></a><a id="ARPLS71450"></a><a id="ARPLS71449"></a><div class="props_rev_3"><a id="GUID-2D028C6A-CFC4-459F-A37A-5CF8D793C9B8" name="GUID-2D028C6A-CFC4-459F-A37A-5CF8D793C9B8"></a><h3 id="ARPLS-GUID-2D028C6A-CFC4-459F-A37A-5CF8D793C9B8" class="sect3"><span class="enumeration_section">265.5</span> UTL_REF子程序摘要</h3>
               <div>
                  <p>该表列出了<code class="codeph">UTL_REF</code>子程序并简要描述了它们。
                  </p>
                  <div class="tblformal" id="GUID-2D028C6A-CFC4-459F-A37A-5CF8D793C9B8__GUID-00E05B0B-F60F-4A30-982E-BE74EF9A641C">
                     <p class="titleintable">表265-2 UTL_REF程序包子程序</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="UTL_REF包子程序" width="100%" border="1" summary="This table lists the UTL_REF subprograms in alphabetical order and briefly describes them." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="41%" id="d1524950e776">子程序</th>
                              <th align="left" valign="bottom" width="59%" id="d1524950e779">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d1524950e784" headers="d1524950e776 ">
                                 <p><a href="UTL_REF.html#GUID-13635F06-A558-459B-974C-9D13D18687BF" title="此过程删除给定引用的对象。">DELETE_OBJECT过程</a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d1524950e784 d1524950e779 ">
                                 <p>删除给定引用的对象</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d1524950e796" headers="d1524950e776 ">
                                 <p><a href="UTL_REF.html#GUID-0B0B48DB-D54B-4EFA-8738-6093D3E8926F" title="此过程锁定给定引用的对象。此外，此过程允许程序选择锁定的对象。">LOCK_OBJECT程序</a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d1524950e796 d1524950e779 ">
                                 <p>锁定给定引用的对象</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d1524950e808" headers="d1524950e776 ">
                                 <p><a href="UTL_REF.html#GUID-F80D8761-ABD3-4353-B084-F991C30287D0" title="此过程选择给定其引用的对象。从数据库中检索所选对象，并将其值放入PL / SQL变量“object”中。">SELECT_OBJECT过程</a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d1524950e808 d1524950e779 ">
                                 <p>选择给定引用的对象</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d1524950e820" headers="d1524950e776 ">
                                 <p><a href="UTL_REF.html#GUID-8F6A08C1-2C3F-475E-912B-D2C5D303CEA3" title="此过程更新给定引用的对象。引用的对象使用PL / SQL变量“object”中包含的值进行更新。">UPDATE_OBJECT过程</a></p>
                              </td>
                              <td align="left" valign="top" width="59%" headers="d1524950e820 d1524950e779 ">
                                 <p>更新给定引用的对象</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS71451"></a><a id="ARPLS71452"></a><a id="ARPLS71452"></a><a id="ARPLS71451"></a><div class="props_rev_3"><a id="GUID-13635F06-A558-459B-974C-9D13D18687BF" name="GUID-13635F06-A558-459B-974C-9D13D18687BF"></a><h4 id="ARPLS-GUID-13635F06-A558-459B-974C-9D13D18687BF" class="sect4"><span class="enumeration_section">265.5.1</span> DELETE_OBJECT过程</h4>
                  <div>
                     <p>此过程删除给定引用的对象。</p>
                     <div class="section">
                        <p>该子程序的语义类似于以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">DELETE FROM object_table WHERE REF（t）= reference;</pre><p>与前面的SQL语句不同，此子程序不需要您指定对象所在的对象表名称。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-13635F06-A558-459B-974C-9D13D18687BF__GUID-50F968A5-00BB-4D14-A9CF-E922239EF9EE">句法</p><pre class="oac_no_warn" dir="ltr">UTL_REF.DELETE_OBJECT（引用IN REF“&lt;typename&gt;”）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-13635F06-A558-459B-974C-9D13D18687BF__GUID-3AFECD1E-926B-4502-BFA6-493EE2EAF7CB">参数</p>
                        <div class="tblformal" id="GUID-13635F06-A558-459B-974C-9D13D18687BF__GUID-CD7B532B-31E1-4BD4-BCDC-2DEF9D40EA52">
                           <p class="titleintable">表265-3 DELETE_OBJECT过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DELETE_OBJECT过程参数" width="100%" border="1" summary="This table describes the Parameters of the UTL_REF.DELETE_OBJECT subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="28%" id="d1524950e948">参数</th>
                                    <th align="left" valign="bottom" width="72%" id="d1524950e951">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="28%" id="d1524950e956" headers="d1524950e948 ">
                                       <p><code class="codeph">参考</code></p>
                                    </td>
                                    <td align="left" valign="top" width="72%" headers="d1524950e956 d1524950e951 ">
                                       <p>要删除的对象的引用。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-13635F06-A558-459B-974C-9D13D18687BF__GUID-2CC3F192-BE31-448C-A157-E5BB56DF712E">例外</p>
                        <p>可能会被提出来。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-13635F06-A558-459B-974C-9D13D18687BF__GUID-46556982-D47A-4319-9370-59E469D1F0E3">例子</p>
                        <p>以下示例说明了使用<code class="codeph">UTL_REF</code>程序包实现此方案：如果公司的员工更改其地址，则应通知其经理。
                        </p>
                        <p>...... <code class="codeph">Address_t</code>和其他人的声明......
                        </p><pre class="oac_no_warn" dir="ltr">创建或替换类型Person_t（名称VARCHAR2（64），性别CHAR（1），地址Address_t，MEMBER PROCEDURE setAddress（addr IN Address_t））;创建或替换TYPE BODY Person_t（成员程序setAddress（addr IN Address_t）IS BEGIN地址：= addr; END;）;创建或替换TYPE Employee_t（</pre><p>在<code class="codeph">Person_t</code> ：使用<code class="codeph">REF</code>到<code class="codeph">Person_t</code>模拟继承的实现，并将<code class="codeph">setAddress</code>委托给它。
                        </p><pre class="oac_no_warn" dir="ltr">thePerson REF Person_t，empno NUMBER（5），deptREF Department_t，mgrREF Employee_t，reminders StringArray_t，MEMBER PROCEDURE setAddress（addr IN Address_t），MEMBER procedure addReminder（reminder VARCHAR2）; ）; CREATE TYPE BODY Employee_t（MEMBER PROCEDURE setAddress（addr IN Address_t）IS myMgr Employee_t; meAsPerson Person_t; BEGIN</pre><p>通过将责任委派给<code class="codeph">thePerson</code>来更新地址。从引用中锁定Person对象，并选择它：</p><pre class="oac_no_warn" dir="ltr">UTL_REF.LOCK_OBJECT（thePerson，meAsPerson）; meAsPerson.setAddress（addr）;将</pre><p>代表<code class="codeph">thePerson</code> ：</p><pre class="oac_no_warn" dir="ltr">UTL_REF.UPDATE_OBJECT（thePerson，meAsPerson）;如果mgr不是NULL那么</pre><p>给经理一个提醒：</p><pre class="oac_no_warn" dir="ltr">UTL_REF.LOCK_OBJECT（经理）; UTL_REF.SELECT_OBJECT（mgr，myMgr）; myMgr.addReminder（'在'| thePerson.name ||'的员工目录中更新地址，新地址：'|| addr.asString）; UTL_REF.UPDATE_OBJECT（mgr，myMgr）;万一;其他时间的例外情况：= SQLCODE; errmsg：= SUBSTR（SQLERRM，1,200）;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS71453"></a><a id="ARPLS71454"></a><a id="ARPLS71454"></a><a id="ARPLS71453"></a><div class="props_rev_3"><a id="GUID-0B0B48DB-D54B-4EFA-8738-6093D3E8926F" name="GUID-0B0B48DB-D54B-4EFA-8738-6093D3E8926F"></a><h4 id="ARPLS-GUID-0B0B48DB-D54B-4EFA-8738-6093D3E8926F" class="sect4"><span class="enumeration_section">265.5.2</span> LOCK_OBJECT程序</h4>
                  <div>
                     <p>此过程锁定给定引用的对象。此外，此过程允许程序选择锁定的对象。</p>
                     <div class="section">
                        <p>该子程序的语义类似于以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">SELECT VALUE（t）INTO object FROM object_table t WHERE REF（t）= reference FOR UPDATE;</pre><p>与前面的SQL语句不同，此子程序不需要您指定对象所在的对象表名称。在更新/删除对象之前无需锁定对象。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0B0B48DB-D54B-4EFA-8738-6093D3E8926F__GUID-0283F9D6-33E5-4C51-9BC0-DB5C9F6C64E9">句法</p><pre class="oac_no_warn" dir="ltr">UTL_REF.LOCK_OBJECT（引用IN REF“&lt;typename&gt;”）; UTL_REF.LOCK_OBJECT（引用IN REF“&lt;typename&gt;”，object IN OUT“&lt;typename&gt;”）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0B0B48DB-D54B-4EFA-8738-6093D3E8926F__GUID-6BFEA2B6-0BB6-4527-849B-CFAE612608B8">参数</p>
                        <div class="tblformal" id="GUID-0B0B48DB-D54B-4EFA-8738-6093D3E8926F__GUID-06DDFE2C-F45E-4352-87CB-0E76EA229376">
                           <p class="titleintable">表265-4 LOCK_OBJECT过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="LOCK_OBJECT过程参数" width="100%" border="1" summary="This table describes the Parameters of the UTL_REF.LOCK_OBJECT subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="24%" id="d1524950e1136">参数</th>
                                    <th align="left" valign="bottom" width="76%" id="d1524950e1139">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d1524950e1144" headers="d1524950e1136 ">
                                       <p><code class="codeph">参考</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d1524950e1144 d1524950e1139 ">
                                       <p>锁定对象的引用。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="24%" id="d1524950e1152" headers="d1524950e1136 ">
                                       <p><code class="codeph">宾语</code></p>
                                    </td>
                                    <td align="left" valign="top" width="76%" headers="d1524950e1152 d1524950e1139 ">
                                       <p>存储锁定对象的PL / SQL变量。此变量应与锁定对象具有相同的对象类型。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-0B0B48DB-D54B-4EFA-8738-6093D3E8926F__GUID-04DE8044-B385-41A6-8D64-477E42AB9AD3">例外</p>
                        <p>可能会被提出来。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS71455"></a><a id="ARPLS71456"></a><a id="ARPLS71456"></a><a id="ARPLS71455"></a><div class="props_rev_3"><a id="GUID-F80D8761-ABD3-4353-B084-F991C30287D0" name="GUID-F80D8761-ABD3-4353-B084-F991C30287D0"></a><h4 id="ARPLS-GUID-F80D8761-ABD3-4353-B084-F991C30287D0" class="sect4"><span class="enumeration_section">265.5.3</span> SELECT_OBJECT过程</h4>
                  <div>
                     <p>此过程选择给定其引用的对象。从数据库中检索所选对象，并将其值放入PL / SQL变量“object”中。</p>
                     <div class="section">
                        <p>该子程序的语义类似于以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">SELECT VALUE（t）INTO object FROM object_table t WHERE REF（t）= reference;</pre><p>与前面的SQL语句不同，此子程序不需要您指定对象所在的对象表名称。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F80D8761-ABD3-4353-B084-F991C30287D0__GUID-1DA2ABB1-7CC2-4705-9F88-B24914A22859">句法</p><pre class="oac_no_warn" dir="ltr">UTL_REF.SELECT_OBJECT（引用IN REF“&lt;typename&gt;”，object IN OUT“&lt;typename&gt;”）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F80D8761-ABD3-4353-B084-F991C30287D0__GUID-4213F1B8-74C3-4E3C-979A-D9EF8D46911E">参数</p>
                        <div class="tblformal" id="GUID-F80D8761-ABD3-4353-B084-F991C30287D0__GUID-B57C785A-6D43-45B6-91DD-1C15FA786F03">
                           <p class="titleintable">表265-5 SELECT_OBJECT过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SELECT_OBJECT过程参数" width="100%" border="1" summary="This table describes the Parameters of the UTL_REF.SELECT_OBJECT subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="26%" id="d1524950e1281">参数</th>
                                    <th align="left" valign="bottom" width="74%" id="d1524950e1284">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d1524950e1289" headers="d1524950e1281 ">
                                       <p><code class="codeph">参考</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d1524950e1289 d1524950e1284 ">
                                       <p>引用要选择或检索的对象。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d1524950e1297" headers="d1524950e1281 ">
                                       <p><code class="codeph">宾语</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d1524950e1297 d1524950e1284 ">
                                       <p>存储所选对象的PL / SQL变量;此变量应与引用的对象具有相同的对象类型。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F80D8761-ABD3-4353-B084-F991C30287D0__GUID-1E6901A0-A4DA-4E24-B22D-32663B6EBE25">例外</p>
                        <p>可能会被提出来。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS71457"></a><a id="ARPLS71458"></a><a id="ARPLS71458"></a><a id="ARPLS71457"></a><div class="props_rev_3"><a id="GUID-8F6A08C1-2C3F-475E-912B-D2C5D303CEA3" name="GUID-8F6A08C1-2C3F-475E-912B-D2C5D303CEA3"></a><h4 id="ARPLS-GUID-8F6A08C1-2C3F-475E-912B-D2C5D303CEA3" class="sect4"><span class="enumeration_section">265.5.4</span> UPDATE_OBJECT过程</h4>
                  <div>
                     <p>此过程更新给定引用的对象。引用的对象使用PL / SQL变量“object”中包含的值进行更新。</p>
                     <div class="section">
                        <p>该子程序的语义类似于以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">UPDATE object_table t SET VALUE（t）= object WHERE REF（t）= reference;</pre><p>与前面的SQL语句不同，此子程序不需要您指定对象所在的对象表名称。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8F6A08C1-2C3F-475E-912B-D2C5D303CEA3__GUID-66E98BFA-3E49-4D69-9069-B8EA4ACCA981">句法</p><pre class="oac_no_warn" dir="ltr">UTL_REF.UPDATE_OBJECT（引用IN REF“&lt;typename&gt;”，对象IN“&lt;typename&gt;”）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8F6A08C1-2C3F-475E-912B-D2C5D303CEA3__GUID-54C78AB9-7970-405E-9D10-EC915B5F4989">参数</p>
                        <div class="tblformal" id="GUID-8F6A08C1-2C3F-475E-912B-D2C5D303CEA3__GUID-33DE4F04-7272-4A7E-9C0D-CEF208E9CB56">
                           <p class="titleintable">表265-6 UPDATE_OBJECT过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="UPDATE_OBJECT过程参数" width="100%" border="1" summary="This table describes the Parameters of the UTL_REF.UPDATE_OBJECT subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="26%" id="d1524950e1426">参数</th>
                                    <th align="left" valign="bottom" width="74%" id="d1524950e1429">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d1524950e1434" headers="d1524950e1426 ">
                                       <p><code class="codeph">参考</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d1524950e1434 d1524950e1429 ">
                                       <p>要更新的对象的引用。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d1524950e1442" headers="d1524950e1426 ">
                                       <p><code class="codeph">宾语</code></p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d1524950e1442 d1524950e1429 ">
                                       <p>包含对象新值的PL / SQL变量。此变量应与要更新的对象具有相同的对象类型。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8F6A08C1-2C3F-475E-912B-D2C5D303CEA3__GUID-698CECA3-E922-4264-892F-FF13F920E0CC">例外</p>
                        <p>可能会被提出来。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
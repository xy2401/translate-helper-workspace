<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Review and complete these required tasks that are specified for your environment after you complete your upgrade."></meta>
      <meta name="description" content="Review and complete these required tasks that are specified for your environment after you complete your upgrade."></meta>
      <title>升级Oracle数据库后需要完成的任务</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Upgrade Guide"></meta>
      <meta property="og:description" content="Review and complete these required tasks that are specified for your environment after you complete your upgrade."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Upgrade Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-upgrade-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-25T08:26:31-07:00"></meta>
      <meta name="dcterms.title" content="Database Upgrade Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96252-05"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="how-to-show-current-state-oracle-data-dictionary.html" title="Previous" type="text/html"></link>
      <link rel="next" href="recommended-and-best-practices-complete-upgrading-oracle-database.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="UPGRD"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="how-to-show-current-state-oracle-data-dictionary.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="recommended-and-best-practices-complete-upgrading-oracle-database.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库升级指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="post-upgrade-tasks-oracle-database.html" property="item" typeof="WebPage"><span property="name">Oracle数据库的升级后任务</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">升级Oracle数据库后需要完成的任务</li>
            </ol>
            <a id="GUID-C9102D8A-0BD1-41FF-9AE9-656818267FB9" name="GUID-C9102D8A-0BD1-41FF-9AE9-656818267FB9"></a><a id="UPGRD12421"></a>
            
            <h2 id="UPGRD-GUID-C9102D8A-0BD1-41FF-9AE9-656818267FB9" class="sect2">升级Oracle数据库后需要完成的任务</h2>
         </header>
         <div class="ind">
            <div>
               <p>完成升级后，请查看并完成为您的环境指定的所需任务。</p>
               <p>升级Oracle数据库后，必须完成这些升级后任务。您必须在手动执行升级时以及使用数据库升级助手（DBUA）进行升级时完成这些任务。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="required-tasks-complete-upgrading-oracle-database.html#GUID-C9AAA819-C4E2-4674-B8E3-530921AF49F7">手动升级后在Linux和Unix系统上设置环境变量</a><br>如果您执行了Oracle数据库的手动升级，则必须确保所需的操作系统环境变量指向新Oracle数据库发行版的目录。
                  </li>
                  <li class="ulchildlink"><a href="required-tasks-complete-upgrading-oracle-database.html#GUID-1023C5FB-B409-4F16-BCA1-C14CB9B7E625">重新编译所有无效对象</a><br>Oracle建议您在安装，修补或升级数据库后运行<code>utlrp.sql</code>脚本，以识别和重新编译无效对象。
                  </li>
                  <li class="ulchildlink"><a href="required-tasks-complete-upgrading-oracle-database.html#GUID-EB3A48A3-612F-4062-B73A-CDF24C4AF15D">重新编译多租户架构数据库上的所有无效对象</a><br>在升级后的多租户架构Oracle数据库。Oracle建议您使用<code class="codeph">catcon</code> Perl脚本重新编译无效对象。
                  </li>
                  <li class="ulchildlink"><a href="required-tasks-complete-upgrading-oracle-database.html#GUID-FF36ABBF-7578-47DF-A4F2-6AC2FDA5CA33">跟踪无效对象重新编译进度</a><br>使用这些SQL查询来跟踪无效对象的<code>utlrp.sql</code>脚本重新编译的进度。
                  </li>
                  <li class="ulchildlink"><a href="required-tasks-complete-upgrading-oracle-database.html#GUID-21424A22-F527-4E2F-A072-FD600E5BD449">升级Oracle数据库后运行OPatch命令</a><br>升级Oracle数据库后，必须从新的Oracle主目录运行OPatch命令。
                  </li>
                  <li class="ulchildlink"><a href="required-tasks-complete-upgrading-oracle-database.html#GUID-04943AB1-2558-4058-81AA-26EB6C2E5C38">升级Oracle数据库后，将oratab和脚本设置为指向新的Oracle位置</a><br>您必须将脚本设置为指向新的Oracle主目录位置。
                  </li>
                  <li class="ulchildlink"><a href="required-tasks-complete-upgrading-oracle-database.html#GUID-3F55A8C1-C867-4483-AB43-B2D12D9745BA">检查PL / SQL包和依赖过程</a><br>在早期版本Oracle数据库中安装的软件包可能在新版本中不可用，这会影响应用程序。
                  </li>
                  <li class="ulchildlink"><a href="required-tasks-complete-upgrading-oracle-database.html#GUID-B57B8AF5-C22C-4CE7-8D9D-AAA00B9FF3E3">根据Oracle维护类型升级表</a><br>从Oracle Database 12 <span class="italic">c</span>第2版（12.2）及更高版本开始，您必须手动升级依赖于Oracle维护类型的用户表。
                  </li>
                  <li class="ulchildlink"><a href="required-tasks-complete-upgrading-oracle-database.html#GUID-88FB7FFD-4392-49C6-843A-45B49F8A1821">启用新的扩展数据类型功能</a><br>使系统能够利用新的扩展数据类型需要特定的升级操作。
                  </li>
                  <li class="ulchildlink"><a href="required-tasks-complete-upgrading-oracle-database.html#GUID-E3E9F44D-6769-4E30-A61F-12E91168640C">调整并行执行服务器的最小值和最大值</a><br>根据您的环境，您可以减少<span class="parmname" translate="no">PARALLEL_MIN_SERVERS</span>参数的默认设置。
                  </li>
                  <li class="ulchildlink"><a href="required-tasks-complete-upgrading-oracle-database.html#GUID-56A8346B-EA67-46FB-AB4C-A7D0710C8CD8">关于升级Oracle数据库后的恢复目录升级</a><br>如果使用的恢复目录模式版本早于RMAN客户端所需的版本，则必须对其进行升级。
                  </li>
                  <li class="ulchildlink"><a href="required-tasks-complete-upgrading-oracle-database.html#GUID-41C8B1F3-1294-4F58-99F7-AB75F9889E05">升级Oracle数据库后升级时区文件版本</a><br>如果升级前信息工具指示您在完成数据库升级后升级时区文件，则使用<code class="codeph">DBMS_DST</code> PL / SQL程序包升级时区文件。
                  </li>
                  <li class="ulchildlink"><a href="required-tasks-complete-upgrading-oracle-database.html#GUID-B22CC865-E3FB-4D7E-821F-A60159E0F833">升级Oracle数据库后升级由DBMS_STATS包创建的统计表</a><br>如果使用<code>DBMS_STATS.CREATE_STAT_TABLE</code>过程创建了统计表，则通过运行<code>DBMS_STATS.UPGRADE_STAT_TABLE</code>升级这些表。</li>
                  <li class="ulchildlink"><a href="required-tasks-complete-upgrading-oracle-database.html#GUID-751FEECC-E0C8-4C86-AC1C-AFB64C81CF00">升级Oracle数据库后升级经过外部验证的SSL用户</a><br>如果您是从Oracle9需要升级<span class="italic">我</span>第2版（9.2）或Oracle数据库<span class="italic">10g</span>第1版（10.1），并且正在使用外部认证的SSL的用户，那么你必须运行SSL外部用户转换（ <code>extusrupgrade</code> ）脚本来升级的用户。
                  </li>
                  <li class="ulchildlink"><a href="required-tasks-complete-upgrading-oracle-database.html#GUID-ACCBC4FB-2626-40AD-91A4-3E38DA4FF339">为Oracle XML DB配置FTP和HTTP端口以及HTTP身份验证</a><br>Oracle数据库配置助手（DBCA）不会对Oracle数据库<span class="italic">12c</span>中配置的Oracle XML DB港口和以后升级版本使用摘要身份验证。
                  </li>
                  <li class="ulchildlink"><a href="required-tasks-complete-upgrading-oracle-database.html#GUID-C4517406-1BB3-41AA-AD27-8E18AA2E98C5">升级Oracle数据库后安装Oracle文本提供的知识库</a><br>Oracle数据库升级后，必须重新生成Oracle Text提供的知识库的所有用户扩展。
                  </li>
                  <li class="ulchildlink"><a href="required-tasks-complete-upgrading-oracle-database.html#GUID-BC3DDABF-E041-4CD5-964F-E291AB4D453F">使用AUTO_LEXER重建Oracle文本索引</a><br>如果您是从之前版本的升级Oracle Text的比Oracle数据库<span class="italic">12c</span>中，然后查看这个话题。
                  </li>
                  <li class="ulchildlink"><a href="required-tasks-complete-upgrading-oracle-database.html#GUID-BF742F8E-61C6-4F7C-927D-26687D1A3B2F">升级Oracle数据库后更新Oracle Application Express配置</a><br>Oracle Application Express会影响升级过程，具体取决于Oracle Application Express版本和数据库安装类型。
                  </li>
                  <li class="ulchildlink"><a href="required-tasks-complete-upgrading-oracle-database.html#GUID-7A62A202-2965-4DEB-A834-5E8218B23A3C">在只读Oracle Homes中替换DEMO目录</a><br>升级只读Oracle主目录后，复制早期版本的Oracle数据库<code class="codeph">demo</code>目录，并将只读Oracle主目录中的<code class="codeph">demo</code>目录替换为新版本的<code class="codeph">demo</code>目录。
                  </li>
                  <li class="ulchildlink"><a href="required-tasks-complete-upgrading-oracle-database.html#GUID-77701CFB-0716-40B4-B9BE-6E0A77506496">配置外部网络服务的访问控制列表（ACL）</a><br>Oracle数据库<span class="italic">12c</span>与更高版本包括细粒度访问控制的<code class="codeph">UTL_TCP</code> ， <code class="codeph">UTL_SMTP</code> ， <code class="codeph">UTL_MAIL</code> ， <code class="codeph">UTL_HTTP</code> ，或<code class="codeph">UTL_INADDR</code>包。
                  </li>
                  <li class="ulchildlink"><a href="required-tasks-complete-upgrading-oracle-database.html#GUID-12B920E9-B2DA-48A0-832C-3E07D172A011">升级Oracle数据库后启用Oracle Database Vault</a><br>根据您的目标数据库版本，可能需要禁用Oracle Database Vault以完成Oracle数据库升级。
                  </li>
                  <li class="ulchildlink"><a href="required-tasks-complete-upgrading-oracle-database.html#GUID-433E0DB9-026E-4322-A8FF-BA0E108AB28B">检查SQLNET.ALLOWED_LOGON_VERSION参数行为</a><br>从版本10g之前的客户端连接到Oracle数据库失败，错误为<code class="codeph">ORA-28040: No matching authentication protocol</code> 。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="post-upgrade-tasks-oracle-database.html#GUID-637ADBD0-866B-4B64-9513-4C7CDE84895C" title="升级Oracle数据库后，完成所需的升级后任务，并考虑新版本的建议。">Oracle数据库的升级后任务</a></p>
                  </div>
               </div>
            </div>
            <a id="UPGRD12422"></a><div class="props_rev_3"><a id="GUID-C9AAA819-C4E2-4674-B8E3-530921AF49F7" name="GUID-C9AAA819-C4E2-4674-B8E3-530921AF49F7"></a><h3 id="UPGRD-GUID-C9AAA819-C4E2-4674-B8E3-530921AF49F7" class="sect3">手动升级后在Linux和Unix系统上设置环境变量</h3>
               <div>
                  <p>如果您执行了Oracle数据库的手动升级，则必须确保所需的操作系统环境变量指向新Oracle数据库发行版的目录。</p>
                  <p>确认以下环境变量指向新Oracle主目录的目录：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">ORACLE_HOME</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">路径</code></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-C9AAA819-C4E2-4674-B8E3-530921AF49F7__GUID-F9357890-AD33-41D4-822E-349F7A61EDFC">
                     <p class="notep1">注意：</p>
                     <p>DBUA自动对Oracle环境变量进行必要的更改。</p>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../admin/creating-and-configuring-an-oracle-database.html#ADMIN12480" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="required-tasks-complete-upgrading-oracle-database.html#GUID-C9102D8A-0BD1-41FF-9AE9-656818267FB9" title="完成升级后，请查看并完成为您的环境指定的所需任务。">升级Oracle数据库后需要完成的任务</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-1023C5FB-B409-4F16-BCA1-C14CB9B7E625" name="GUID-1023C5FB-B409-4F16-BCA1-C14CB9B7E625"></a><h3 id="UPGRD-GUID-1023C5FB-B409-4F16-BCA1-C14CB9B7E625" class="sect3">重新编译所有无效对象</h3>
               <div>
                  <p>Oracle建议您在安装，修补或升级数据库后运行<code>utlrp.sql</code>脚本，以识别和重新编译无效对象。
                  </p>
                  <div class="section"><code>utlrp.sql</code>脚本重新编译所有无效对象。安装后立即运行脚本，以确保用户不会遇到无效对象。
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>启动SQL * Plus：</span><div><pre class="pre codeblock"><code>sqlplus“/ AS SYSDBA”</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>运行<code>utlrp.sql</code>脚本，其中<code class="codeph"><span class="variable" translate="no">Oracle_home</span></code>是Oracle主路径：</span><div><pre class="pre codeblock"><code>SQL&gt; @ <span class="variable" translate="no">Oracle_home</span> /rdbms/admin/utlrp.sql</code></pre></div>
                     </li>
                  </ol>
                  <div class="section">
                     <p><code>utlrp.sql</code>脚本根据无效对象的数量和可用的CPU数量自动重新编译串行或并行重新编译中的无效对象。使用CPU数（ <span class="parmname" translate="no">cpu_count</span> ）乘以每个CPU的线程数（ <span class="parmname" translate="no">parallel_threads_per_cpu</span> ）计算CPU。在Oracle Real Application Clusters（Oracle RAC）上，此数字将添加到所有Oracle RAC节点。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="required-tasks-complete-upgrading-oracle-database.html#GUID-C9102D8A-0BD1-41FF-9AE9-656818267FB9" title="完成升级后，请查看并完成为您的环境指定的所需任务。">升级Oracle数据库后需要完成的任务</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-EB3A48A3-612F-4062-B73A-CDF24C4AF15D" name="GUID-EB3A48A3-612F-4062-B73A-CDF24C4AF15D"></a><h3 id="UPGRD-GUID-EB3A48A3-612F-4062-B73A-CDF24C4AF15D" class="sect3">重新编译多租户架构数据库上的所有无效对象</h3>
               <div>
                  <p>在升级后的多租户架构Oracle数据库。Oracle建议您使用<code class="codeph">catcon</code> Perl脚本重新编译无效对象。
                  </p>
                  <div class="section">
                     <p>使用<code>catcon.pl</code>实用程序在容器数据库（CDB）中的所有容器上运行<code>utlrp.sql</code> 。
                     </p>
                     <p><code>catcon.p</code> l脚本从<code>$ORACLE_HOME/rdbms/admin</code>目录运行utlrp.sql。该脚本重新编译任何剩余的存储的PL / SQL和Java代码。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-EB3A48A3-612F-4062-B73A-CDF24C4AF15D__GUID-F588FB3D-EE1A-485B-92B1-3A09BA3F9354">
                     <p class="titleinexample">示例5-1使用CATCON实用程序在CDB中的所有容器上运行utlrp.sql脚本</p><pre class="pre codeblock"><code>$ ORACLE_HOME / perl / bin / perl catcon.pl -n 1 -e -b utlrp -d'''。'''utlrp.sql</code></pre><p>请注意此用例的以下条件：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">-n</code>参数设置为1，因此脚本按顺序运行每个PDB重新编译。
                           </p>
                        </li>
                        <li>
                           <p>期望PDB的串行重新编译完成时间延迟。根据要升级的PDB数量，重新编译可能会大大超出升级脚本完成所需的时间。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="required-tasks-complete-upgrading-oracle-database.html#GUID-C9102D8A-0BD1-41FF-9AE9-656818267FB9" title="完成升级后，请查看并完成为您的环境指定的所需任务。">升级Oracle数据库后需要完成的任务</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-FF36ABBF-7578-47DF-A4F2-6AC2FDA5CA33" name="GUID-FF36ABBF-7578-47DF-A4F2-6AC2FDA5CA33"></a><h3 id="UPGRD-GUID-FF36ABBF-7578-47DF-A4F2-6AC2FDA5CA33" class="sect3">跟踪无效对象重新编译进度</h3>
               <div>
                  <p>使用这些SQL查询来跟踪无效对象的<code>utlrp.sql</code>脚本重新编译的进度。
                  </p>
                  <div class="section">Oracle建议您在升级后运行<code>utlrp.sql</code>脚本以重新编译无效对象。您可以运行SQL查询来监视脚本。
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-FF36ABBF-7578-47DF-A4F2-6AC2FDA5CA33__GUID-56510475-53D3-4F10-A1FF-1783B3DD5C85">
                     <p class="titleinexample">示例5-2剩余的无效对象数</p>
                     <p>输入此查询以返回剩余无效对象的数量。随着<code>utlrp.sql</code>脚本的运行，此数字会随着时间的推移而减少。
                     </p><pre class="pre codeblock"><code>SELECT COUNT（*）FROM obj $ WHERE status IN（4,5,6）;</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-FF36ABBF-7578-47DF-A4F2-6AC2FDA5CA33__GUID-D3A71C2E-00F0-425E-804D-65D37E47C7FA">
                     <p class="titleinexample">示例5-3重新编译的对象数</p>
                     <p>输入此查询以返回<code>utlrp.sql</code>已编译的对象数。脚本运行时，此数字会随着时间的推移而增加
                     </p><pre class="pre codeblock"><code>SELECT COUNT（*）FROM UTL_RECOMP_COMPILED;</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-FF36ABBF-7578-47DF-A4F2-6AC2FDA5CA33__GUID-EC38A517-C8CA-4578-98F7-BC6DC9192A70">
                     <p class="titleinexample">示例5-4使用错误重新编译的对象数</p>
                     <p>输入此查询以返回<code>utlrp.sql</code>编译时出错的对象数。
                     </p><pre class="pre codeblock"><code>从utl_recomp_errors中选择COUNT（DISTINCT（obj＃））“OBJECTS WITH ERRORS”;</code></pre><p>如果该数字高于预期，则检查每个对象报告的错误消息。如果您看到由于系统配置错误或资源限制而导致的错误，请修复这些错误的原因，然后再次运行<code>utlrp.sql</code> 。
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="required-tasks-complete-upgrading-oracle-database.html#GUID-C9102D8A-0BD1-41FF-9AE9-656818267FB9" title="完成升级后，请查看并完成为您的环境指定的所需任务。">升级Oracle数据库后需要完成的任务</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-21424A22-F527-4E2F-A072-FD600E5BD449" name="GUID-21424A22-F527-4E2F-A072-FD600E5BD449"></a><h3 id="UPGRD-GUID-21424A22-F527-4E2F-A072-FD600E5BD449" class="sect3">升级Oracle数据库后运行OPatch命令</h3>
               <div>
                  <p>升级Oracle数据库后，必须从新的Oracle主目录运行OPatch命令。</p>
                  <p>OPatch是一个基于Java的实用程序，可以使用Oracle Universal Installer进行安装。Opatch与平台无关。它在所有支持的操作系统上运行。另一个版本的OPatch，称为独立OPatch，也可用。它在没有Oracle Universal Installer的Oracle家庭上运行。</p>
                  <p>修补程序是复制到现有安装的一小部分文件。它们与特定版本的Oracle产品相关联。应用于已安装产品的正确版本时，修补程序会生成产品的升级版本。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-21424A22-F527-4E2F-A072-FD600E5BD449__GUID-4BD57FC7-5C23-402B-B145-473A4FCBE3E1">运行Opatch以检查Oracle数据库清单</p>
                     <p>以Oracle安装所有者身份登录，并从新的Oracle主目录运行<code class="codeph">lsinventory</code>命令。该命令可生成系统上安装的Oracle软件的准确完整清单：</p><pre class="pre codeblock"><code>opatch lsinventory -patch</code></pre><p>请定期参阅My Oracle Support说明756671.1，以获取有关版本更新（更新）和版本更新修订（修订版）的最新建议。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="https://support.oracle.com/rs?type=doc&amp;id=756671.1" target="_blank">https://support.oracle.com/rs?type=doc&amp;id=756671.1</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="required-tasks-complete-upgrading-oracle-database.html#GUID-C9102D8A-0BD1-41FF-9AE9-656818267FB9" title="完成升级后，请查看并完成为您的环境指定的所需任务。">升级Oracle数据库后需要完成的任务</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="UPGRD52744"></a><div class="props_rev_3"><a id="GUID-04943AB1-2558-4058-81AA-26EB6C2E5C38" name="GUID-04943AB1-2558-4058-81AA-26EB6C2E5C38"></a><h3 id="UPGRD-GUID-04943AB1-2558-4058-81AA-26EB6C2E5C38" class="sect3">升级Oracle数据库后，将oratab和脚本设置为指向新的Oracle位置</h3>
               <div>
                  <p>您必须将脚本设置为指向新的Oracle主目录位置。</p>
                  <div class="section">
                     <p>将Oracle数据库升级到新版本后，必须确保<code class="codeph">oratab</code>文件和设置<code><span class="variable" translate="no">ORACLE_HOME</span></code>值的任何客户端脚本指向为新Oracle Database版本创建的新Oracle主目录。DBUA自动将<code class="codeph">oratab</code>指向新的Oracle主目录。但是，无论使用何种方法升级，都必须检查客户端脚本。
                     </p>
                     <p>如果手动升级数据库，则必须以新Oracle Database版本的Oracle安装所有者身份登录，并手动更新<code class="codeph">oratab</code>文件。<code class="codeph">oratab</code>文件的位置可能因操作系统而异。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-04943AB1-2558-4058-81AA-26EB6C2E5C38__GUID-EE5369BE-203A-433F-BD9B-BEBA61D30CE3">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../admin/getting-started-with-database-administration.html#ADMIN12475" target="_blank"><span><cite>“Oracle数据库管理员指南”</cite></span></a> ，了解有关设置操作系统环境变量的信息</p>
                     <p>My Oracle Support：查找或创建Oratab文件（Doc ID 394251.1）</p>
                     <p><a href="https://support.oracle.com/rs?type=doc&amp;id=394251.1" target="_blank">https://support.oracle.com/rs?type=doc&amp;id=394251.1</a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="required-tasks-complete-upgrading-oracle-database.html#GUID-C9102D8A-0BD1-41FF-9AE9-656818267FB9" title="完成升级后，请查看并完成为您的环境指定的所需任务。">升级Oracle数据库后需要完成的任务</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD52766"></a><div class="props_rev_3"><a id="GUID-3F55A8C1-C867-4483-AB43-B2D12D9745BA" name="GUID-3F55A8C1-C867-4483-AB43-B2D12D9745BA"></a><h3 id="UPGRD-GUID-3F55A8C1-C867-4483-AB43-B2D12D9745BA" class="sect3">检查PL / SQL包和依赖过程</h3>
               <div>
                  <p>在早期版本Oracle数据库中安装的软件包可能在新版本中不可用，这会影响应用程序。</p>
                  <p>升级后，请检查以确保您在自己的脚本中使用的任何程序包或从脚本调用的程序包都在新版本中可用。依赖于软件包的测试程序应该是升级计划的一部分。</p>
                  <p>数据库应用程序中的代码可以引用连接数据库中的对象例如，Oracle调用接口（OCI）和预编译器应用程序可以提交匿名PL / SQL块。Oracle Forms应用程序中的触发器可以引用架构对象。此类应用程序依赖于它们引用的架构对象。依赖性管理技术因开发环境而异。Oracle数据库不会自动跟踪应用程序依赖性。</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../admin/managing-schema-objects.html#ADMIN11556" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="required-tasks-complete-upgrading-oracle-database.html#GUID-C9102D8A-0BD1-41FF-9AE9-656818267FB9" title="完成升级后，请查看并完成为您的环境指定的所需任务。">升级Oracle数据库后需要完成的任务</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-B57B8AF5-C22C-4CE7-8D9D-AAA00B9FF3E3" name="GUID-B57B8AF5-C22C-4CE7-8D9D-AAA00B9FF3E3"></a><h3 id="UPGRD-GUID-B57B8AF5-C22C-4CE7-8D9D-AAA00B9FF3E3" class="sect3">根据Oracle维护类型升级表</h3>
               <div>
                  <p>从Oracle Database 12 <span class="italic">c</span>第2版（12.2）及更高版本开始，您必须手动升级依赖于Oracle维护类型的用户表。
                  </p>
                  <div class="section">
                     <p>如果数据库具有依赖于Oracle维护类型的用户表（例如， <code class="codeph">AQ</code>队列表），则在升级后运行<code>utluptabdata.sql</code>命令，以对受Oracle维护更改影响的任何用户表执行<code class="codeph">ALTER TABLE UPGRADE</code>类型。此行为更改使用户表在升级期间保持<code class="codeph">READ ONLY</code>状态。禁止用户使用SYSDBA权限（ <code class="codeph">AS SYSDBA</code> ）登录应用程序，并更改依赖于Oracle维护类型的应用程序表。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-B57B8AF5-C22C-4CE7-8D9D-AAA00B9FF3E3__TOIDENTIFYTABLESTHATNEEDTOBEUPGRADE-C507515A">
                     <p>要确定数据库升级完成后需要升级的表，请连接到数据库<code class="codeph">AS SYSDBA</code> ，然后运行以下查询：</p><pre class="pre codeblock"><code>COLUMN所有者FORMAT A30 COLUMN table_name FORMAT A30 SELECT DISTINCT所有者，table_name FROM dba_tab_cols WHERE data_upgraded ='NO'ORDER BY 1,2;</code></pre><p>此查询列出未列为<code class="codeph">UPGRADED</code>所有表。但是， <code>utluptabdata.sql</code>脚本仅升级依赖于Oracle维护类型的表。如果查询列出了任何表，则运行<code>utluptabdata.sql</code>脚本以在依赖用户表上执行<code class="codeph">ALTER TABLE UPGRADE</code>命令，以便将这些Oracle维护类型升级到该类型的最新版本。
                     </p>
                     <p>您必须使用具有<code class="codeph">ALTER</code>权限的用户帐户运行<code>utluptabdata.sql</code>脚本，该用户帐户依赖于Oracle维护类型的所有表，或者授予SYSDBA系统权限的用户，并且记录在<code class="codeph">AS SYSDBA</code> 。</p>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-B57B8AF5-C22C-4CE7-8D9D-AAA00B9FF3E3__GUID-89372EC2-AC93-46B1-AF63-869BD3DC5D2E">
                     <p>当参数<span class="parmname" translate="no">SERVEROUTPUT</span>设置为<code class="codeph">ON</code> ， <code>utluptabdata.sql</code>脚本将显示所有已升级表的名称，并列出表升级期间遇到的任何错误。要将服务器输出设置为<code class="codeph">ON</code> ，请运行以下命令：</p><pre class="pre codeblock"><code>SET SERVEROUTPUT ON @ utluptabdata.sql</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="required-tasks-complete-upgrading-oracle-database.html#GUID-C9102D8A-0BD1-41FF-9AE9-656818267FB9" title="完成升级后，请查看并完成为您的环境指定的所需任务。">升级Oracle数据库后需要完成的任务</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD60138"></a><div class="props_rev_3"><a id="GUID-88FB7FFD-4392-49C6-843A-45B49F8A1821" name="GUID-88FB7FFD-4392-49C6-843A-45B49F8A1821"></a><h3 id="UPGRD-GUID-88FB7FFD-4392-49C6-843A-45B49F8A1821" class="sect3">启用新的扩展数据类型功能</h3>
               <div>
                  <p>使系统能够利用新的扩展数据类型需要特定的升级操作。</p>
                  <div class="section">
                     <p>Oracle Database 12 <span class="italic">c</span>引入了<code class="codeph">MAX_STRING_SIZE</code>来控制SQL中<code class="codeph">VARCHAR2</code> ， <code class="codeph">NVARCHAR2</code>和<code class="codeph">RAW</code>数据类型的最大大小。设置<code class="codeph">MAX_STRING_SIZE = EXTENDED</code>可启用Oracle Database 12 <span class="italic">c中</span>引入的32767字节限制。
                     </p>
                     <p>为了能够设置<code class="codeph">MAX_STRING_SIZE = EXTENDED</code> ，必须将<code class="codeph">COMPATIBLE</code>初始化参数设置为<code class="codeph">12.0.0.0</code>或更高版本</p>
                     <p>此外，在数据库以升级模式打开时，必须运行脚本<code class="codeph">utl32k.sql</code>脚本，以便使受数据类型大小更改影响的对象无效并重新编译。例如：</p><pre class="pre codeblock"><code>CONNNECT SYS / AS SYSDBA立即关闭;启动升级; ALTER SYSTEM SET max_string_size = extended; START $ ORACLE_HOME / rdbms / admin / utl32k.sql SHUTDOWN IMMEDIATE;启动;</code></pre><div class="infoboxnote" id="GUID-88FB7FFD-4392-49C6-843A-45B49F8A1821__GUID-9EC9FA32-9DEA-480D-8D94-998036111DE8">
                        <p class="notep1">警告：</p>
                        <p>您可以将<code class="codeph">MAX_STRING_SIZE</code>的值从<code class="codeph">STANDARD</code>更改为<code class="codeph">EXTENDED</code> 。但是，您无法将<code class="codeph">MAX_STRING_SIZE</code>的值从<code class="codeph">EXTENDED</code>更改为<code class="codeph">STANDARD</code> 。通过设置<code class="codeph">MAX_STRING_SIZE = EXTENDED</code> ，您将采取可能会在数据库中引入应用程序不兼容的显式操作。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-88FB7FFD-4392-49C6-843A-45B49F8A1821__GUID-8248AD25-E6A0-4040-A0F5-DFA79AC93593">
                     <p class="notep1">也可以看看：</p>
                     <p>有关<code class="codeph">MAX_STRING_SIZE</code>完整信息，请<code class="codeph">MAX_STRING_SIZE</code> <a href="../refrn/MAX_STRING_SIZE.html#REFRN10321" target="_blank"><span><cite>Oracle数据库参考</cite></span></a> ，包括建议和过程</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="required-tasks-complete-upgrading-oracle-database.html#GUID-C9102D8A-0BD1-41FF-9AE9-656818267FB9" title="完成升级后，请查看并完成为您的环境指定的所需任务。">升级Oracle数据库后需要完成的任务</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD60139"></a><div class="props_rev_3"><a id="GUID-E3E9F44D-6769-4E30-A61F-12E91168640C" name="GUID-E3E9F44D-6769-4E30-A61F-12E91168640C"></a><h3 id="UPGRD-GUID-E3E9F44D-6769-4E30-A61F-12E91168640C" class="sect3">调整并行执行服务器的最小值和最大值</h3>
               <div>
                  <p>根据您的环境，您可以减少<span class="parmname" translate="no">PARALLEL_MIN_SERVERS</span>参数的默认设置。
                  </p>
                  <div class="section">
                     <p>在Oracle数据库<span class="italic">12c</span>中，默认<span class="parmname" translate="no">PARALLEL_MIN_SERVERS</span>更改从<code class="codeph">0</code>到一个基于硬件平台上提供的值。进行此更改是为并行执行提供足够的最小支持。如果您发现新的默认设置太高，请根据您的要求调整设置。<code class="codeph">PARALLEL_MAX_SERVERS</code>的默认值未更改。如果旧环境中的默认值未更改，则无需采取进一步操作。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-E3E9F44D-6769-4E30-A61F-12E91168640C__GUID-64A537C4-9342-4D7A-993B-77A3D62CC797">
                     <p class="notep1">也可以看看：</p>
                     <p>有关<code class="codeph">PARALLEL_MIN_SERVERS</code>信息，请<a href="../refrn/PARALLEL_MIN_SERVERS.html#REFRN10160" target="_blank"><span><cite>参见Oracle数据库参考</cite></span></a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="required-tasks-complete-upgrading-oracle-database.html#GUID-C9102D8A-0BD1-41FF-9AE9-656818267FB9" title="完成升级后，请查看并完成为您的环境指定的所需任务。">升级Oracle数据库后需要完成的任务</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD12423"></a><div class="props_rev_3"><a id="GUID-56A8346B-EA67-46FB-AB4C-A7D0710C8CD8" name="GUID-56A8346B-EA67-46FB-AB4C-A7D0710C8CD8"></a><h3 id="UPGRD-GUID-56A8346B-EA67-46FB-AB4C-A7D0710C8CD8" class="sect3">关于升级Oracle数据库后的恢复目录升级</h3>
               <div>
                  <p>如果使用的恢复目录模式版本早于RMAN客户端所需的版本，则必须对其进行升级。</p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-56A8346B-EA67-46FB-AB4C-A7D0710C8CD8__GUID-7EFA2B8A-C674-4857-B9D1-D283ED5C3559">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关管理RMAN恢复目录的信息，请参见<a href="../bradv/managing-recovery-catalog.html#BRADV8015" target="_blank"><span class="italic">“Oracle数据库备份和恢复用户指南”</span></a></p>
                        </li>
                        <li>
                           <p>有关升级恢复目录和<code class="codeph">UPGRADE CATALOG</code>命令的完整信息，请<code class="codeph">UPGRADE CATALOG</code> <a href="../bradv/managing-recovery-catalog.html#BRADV188" target="_blank"><span class="italic">Oracle数据库备份和恢复用户指南”</span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="required-tasks-complete-upgrading-oracle-database.html#GUID-C9102D8A-0BD1-41FF-9AE9-656818267FB9" title="完成升级后，请查看并完成为您的环境指定的所需任务。">升级Oracle数据库后需要完成的任务</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD52684"></a><div class="props_rev_3"><a id="GUID-41C8B1F3-1294-4F58-99F7-AB75F9889E05" name="GUID-41C8B1F3-1294-4F58-99F7-AB75F9889E05"></a><h3 id="UPGRD-GUID-41C8B1F3-1294-4F58-99F7-AB75F9889E05" class="sect3">升级Oracle数据库后升级时区文件版本</h3>
               <div>
                  <p>如果升级前信息工具指示您在完成数据库升级后升级时区文件，则使用<code class="codeph">DBMS_DST</code> PL / SQL程序包升级时区文件。
                  </p>
                  <p>Oracle数据库提供多个版本的时区文件。有两种类型的文件与每个时区文件相关联：一个大文件，其中包含数据库中定义的所有时区，以及一个小文件，其中只包含最常用的时区。大版本被指定为<code class="codeph">timezlrg_ <span class="variable" translate="no">version_number</span> .dat</code> 。小版本被指定为<code class="codeph">timezone_ <span class="variable" translate="no">version_number</span> .dat</code> 。这些文件位于Oracle Database主目录下的<code>oracore/zoneinfo</code>子目录中。
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../nlspg/datetime-data-types-and-time-zone-support.html#NLSPG261" target="_blank"><span><cite>Oracle数据库全球化支持指南</cite></span></a></li>
                        <li><a href="https://support.oracle.com/rs?type=doc&amp;id=1585343.1" target="_blank">https://support.oracle.com/rs?type=doc&amp;id=1585343.1</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="required-tasks-complete-upgrading-oracle-database.html#GUID-C9102D8A-0BD1-41FF-9AE9-656818267FB9" title="完成升级后，请查看并完成为您的环境指定的所需任务。">升级Oracle数据库后需要完成的任务</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="UPGRD12424"></a><div class="props_rev_3"><a id="GUID-B22CC865-E3FB-4D7E-821F-A60159E0F833" name="GUID-B22CC865-E3FB-4D7E-821F-A60159E0F833"></a><h3 id="UPGRD-GUID-B22CC865-E3FB-4D7E-821F-A60159E0F833" class="sect3">升级Oracle数据库后升级由DBMS_STATS包创建的统计表</h3>
               <div>
                  <p>如果使用<code>DBMS_STATS.CREATE_STAT_TABLE</code>过程创建了统计表，则通过运行<code>DBMS_STATS.UPGRADE_STAT_TABLE</code>升级这些表。</p>
                  <div class="section">
                     <p></p>
                     <p>在以下示例中， <code class="codeph">green</code>是统计信息表的所有者， <code class="codeph">STAT_TABLE</code>是统计信息表的名称。
                     </p><pre class="pre codeblock"><code>EXECUTE DBMS_STATS.UPGRADE_STAT_TABLE（'green'，'stat_table'）;</code></pre><p>对每个统计表执行此过程。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-B22CC865-E3FB-4D7E-821F-A60159E0F833__GUID-9EF4BC3C-2F9D-49E3-8C4A-35EC12999E33">
                     <p class="notep1">也可以看看：</p>
                     <p>有关DBMS_STATS包的信息<a href="../arpls/DBMS_STATS.html#ARPLS059" target="_blank"><span class="italic">，请参见Oracle Database PL / SQL包和类型参考</span></a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="required-tasks-complete-upgrading-oracle-database.html#GUID-C9102D8A-0BD1-41FF-9AE9-656818267FB9" title="完成升级后，请查看并完成为您的环境指定的所需任务。">升级Oracle数据库后需要完成的任务</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD12425"></a><div class="props_rev_3"><a id="GUID-751FEECC-E0C8-4C86-AC1C-AFB64C81CF00" name="GUID-751FEECC-E0C8-4C86-AC1C-AFB64C81CF00"></a><h3 id="UPGRD-GUID-751FEECC-E0C8-4C86-AC1C-AFB64C81CF00" class="sect3">升级Oracle数据库后升级经过外部验证的SSL用户</h3>
               <div>
                  <p>如果您是从Oracle9需要升级<span class="italic">我</span>第2版（9.2）或Oracle数据库<span class="italic">10g</span>第1版（10.1），并且正在使用外部认证的SSL的用户，那么你必须运行SSL外部用户转换（ <code>extusrupgrade</code> ）脚本来升级的用户。
                  </p>
                  <div class="section">
                     <p><code>extusrupgrade</code>脚本具有以下语法，其中<code class="codeph"><span class="variable" translate="no">ORACLE_HOME</span></code>是Oracle数据库主目录， <code class="codeph"><span class="variable" translate="no">hostname</span></code>是运行数据库的主机的名称， <code class="codeph"><span class="variable" translate="no">port_no</span></code>是侦听器端口号， <code class="codeph"><span class="variable" translate="no">sid</span></code>是数据库实例的系统标识符， <code class="codeph"><span class="variable" translate="no">db_admin</span></code>是具有修改用户帐户权限的数据库管理用户。
                     </p><pre class="pre codeblock"><code><span class="variable" translate="no">ORACLE_HOME</span> / rdbms / bin / extusrupgrade --dbconnectstring <span class="variable" translate="no">hostname</span> ： <span class="variable" translate="no">port_no</span> ： <span class="variable" translate="no">sid</span> --dbuser <span class="variable" translate="no">db_admin</span> --dbuserpassword <span class="italic">password</span> -a</code></pre><p>例如：</p><pre class="pre codeblock"><code>extusrupgrade --dbconnectstring dlsun88：1521：10gR2 --dbuser system --dbuserpassword manager -a</code></pre><div class="infoboxnote" id="GUID-751FEECC-E0C8-4C86-AC1C-AFB64C81CF00__GUID-E77144F4-12C2-4319-BBFD-DF2E1F4701E4">
                        <p class="notep1">注意：</p>
                        <p>如果要从Oracle数据库<span class="italic">10g</span>第2版（10.2）或更高版本升级，则不需要运行<code class="codeph">extusrupgrade</code>脚本。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-751FEECC-E0C8-4C86-AC1C-AFB64C81CF00__GUID-513FD213-61C9-48B7-884A-C9C3CCAA576D">
                     <p class="notep1">也可以看看：</p>
                     <p>有关<code>extusrupgrade</code>脚本的详细信息，请<code>extusrupgrade</code> <a href="../dbimi/ssl-external-users-conversion-script.html#DBIMI348" target="_blank"><span><cite>“Oracle数据库企业用户安全性管理员指南”</cite></span></a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="required-tasks-complete-upgrading-oracle-database.html#GUID-C9102D8A-0BD1-41FF-9AE9-656818267FB9" title="完成升级后，请查看并完成为您的环境指定的所需任务。">升级Oracle数据库后需要完成的任务</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD52883"></a><div class="props_rev_3"><a id="GUID-ACCBC4FB-2626-40AD-91A4-3E38DA4FF339" name="GUID-ACCBC4FB-2626-40AD-91A4-3E38DA4FF339"></a><h3 id="UPGRD-GUID-ACCBC4FB-2626-40AD-91A4-3E38DA4FF339" class="sect3">为Oracle XML DB配置FTP和HTTP端口以及HTTP身份验证</h3>
               <div>
                  <p>Oracle数据库配置助手（DBCA）不会对Oracle数据库<span class="italic">12c</span>中配置的Oracle XML DB港口和以后升级版本使用摘要身份验证。
                  </p>
                  <p>Oracle建议您在配置端口时，还要配置HTTP身份验证以访问Oracle XML DB存储库，以利用改进的安全功能。</p>
                  <p>与Oracle数据库<span class="italic">12c的</span>开始，Oracle通过支持摘要式身份验证增强数据库的安全性。摘要式身份验证是一种行业标准协议，通常与HTTP协议一起使用。大多数HTTP客户端都支持它。摘要式身份验证可确保始终以安全的方式传输密码，即使未使用加密（HTTPS）连接也是如此。支持摘要式身份验证使组织能够部署使用Oracle XML DB HTTP的应用程序，而无需担心密码被泄露。Oracle XML DB中的摘要式身份验证支持还可确保Oracle XML DB HTTP服务器与Microsoft Web Folders WebDAV客户端保持兼容。
                  </p>
                  <p>安装或升级新版本后，必须手动为Oracle XML DB配置FTP和HTTP端口，如下所示：</p>
                  <ol>
                     <li>
                        <p>使用<code class="codeph">DBMS_XDB_CONFIG.setHTTPPort( <span class="variable" translate="no">HTTP_port_number</span> )</code>为Oracle XML DB设置HTTP端口：</p><pre class="pre codeblock"><code>SQL&gt; exec DBMS_XDB_CONFIG.setHTTPPort（ <span class="variable" translate="no">port_number</span> ）;</code></pre></li>
                     <li>
                        <p>使用<code class="codeph">DBMS_XDB_CONFIG.setFTPPort( <span class="variable" translate="no">FTP_port_number</span> )</code>设置Oracle XML DB的FTP端口：</p><pre class="pre codeblock"><code>SQL&gt; exec DBMS_XDB_CONFIG.setFTPPort（ <span class="variable" translate="no">FTP_port_number</span> ）;</code></pre><div class="infoboxnote" id="GUID-ACCBC4FB-2626-40AD-91A4-3E38DA4FF339__GUID-2F832128-06C1-4A83-9A9F-F6035E981B03">
                           <p class="notep1">注意：</p>
                           <p>您可以分别使用<code class="codeph">DBMS_XDB_CONFIG.getFTPPort</code>和<code class="codeph">DBMS_XDB_CONFIG.getHTTPPort</code>查询过程中用于FTP和HTTP的端口号。
                           </p>
                        </div>
                     </li>
                     <li>
                        <p>要查看所有使用的端口号，请查询<code class="codeph">DBMS_XDB_CONFIG.usedport</code> 。
                        </p>
                     </li>
                  </ol>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-ACCBC4FB-2626-40AD-91A4-3E38DA4FF339__GUID-B5E37F24-B55B-4C6A-A32B-E79E0E11F74B">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../adxdb/repository-access-using-protocols.html#ADXDB2500" target="_blank"><span><cite>Oracle XML DB Developer's Guide</cite></span></a> ，了解有关使用FTP，HTTP，HTTPS和WebDAV协议访问Oracle XML DB存储库数据的更多信息</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="required-tasks-complete-upgrading-oracle-database.html#GUID-C9102D8A-0BD1-41FF-9AE9-656818267FB9" title="完成升级后，请查看并完成为您的环境指定的所需任务。">升级Oracle数据库后需要完成的任务</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD12426"></a><div class="props_rev_3"><a id="GUID-C4517406-1BB3-41AA-AD27-8E18AA2E98C5" name="GUID-C4517406-1BB3-41AA-AD27-8E18AA2E98C5"></a><h3 id="UPGRD-GUID-C4517406-1BB3-41AA-AD27-8E18AA2E98C5" class="sect3">升级Oracle数据库后安装Oracle文本提供的知识库</h3>
               <div>
                  <p>Oracle数据库升级后，必须重新生成Oracle Text提供的知识库的所有用户扩展。</p>
                  <p>重新生成用户扩展会影响在给定Oracle主目录中安装的所有数据库。</p>
                  <p>升级后，Oracle Text提供的知识库（它们是新Oracle数据库的配套产品的一部分）无法立即使用。在升级之后，任何依赖于提供的知识库的Oracle Text功能在升级之后都不起作用。要重新启用此类功能，必须从安装介质中为新的Oracle数据库发行版安装Oracle Text提供的知识库。</p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-C4517406-1BB3-41AA-AD27-8E18AA2E98C5__GUID-2810B301-1DE5-498E-8AB4-782B077EE6DD">
                     <p class="notep1">也可以看看：</p>
                     <p></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关Oracle Text提供的知识库的信息，请参阅<a href="../ccapp/working-with-thesaurus-in-oracle-text.html#CCAPP0900" target="_blank"><span><cite>Oracle Text Application Developer's Guide</cite></span></a></p>
                        </li>
                        <li>
                           <p>适用于配套产品的<a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle数据库安装指南</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="required-tasks-complete-upgrading-oracle-database.html#GUID-C9102D8A-0BD1-41FF-9AE9-656818267FB9" title="完成升级后，请查看并完成为您的环境指定的所需任务。">升级Oracle数据库后需要完成的任务</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-BC3DDABF-E041-4CD5-964F-E291AB4D453F" name="GUID-BC3DDABF-E041-4CD5-964F-E291AB4D453F"></a><h3 id="UPGRD-GUID-BC3DDABF-E041-4CD5-964F-E291AB4D453F" class="sect3">使用AUTO_LEXER重建Oracle文本索引</h3>
               <div>
                  <p>如果您是从之前版本的升级Oracle Text的比Oracle数据库<span class="italic">12c</span>中，然后查看这个话题。
                  </p>
                  <p>完成升级到新的Oracle数据库发行版后，如果使用使用AUTO_LEXER创建的Oracle Text索引，则必须重建索引才能使查询生效。</p>
                  <div class="section">
                     <p>此外，您必须重建具有以下INDEX_STEMS类型的BASIC_LEXER集的索引：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>阿拉伯</p>
                        </li>
                        <li>
                           <p>挪威语</p>
                        </li>
                        <li>
                           <p>CATALAN</p>
                        </li>
                        <li>
                           <p>克罗地亚语</p>
                        </li>
                        <li>
                           <p>捷克</p>
                        </li>
                        <li>
                           <p>丹麦</p>
                        </li>
                        <li>
                           <p>ERIVATIONAL_NEW</p>
                        </li>
                        <li>
                           <p>DUTCH_NEW</p>
                        </li>
                        <li>
                           <p>ENGLISH_NEW</p>
                        </li>
                        <li>
                           <p>芬兰</p>
                        </li>
                        <li>
                           <p>FRENCH_NEW</p>
                        </li>
                        <li>
                           <p>GERMAN_NEW</p>
                        </li>
                        <li>
                           <p>希腊语</p>
                        </li>
                        <li>
                           <p>希伯来</p>
                        </li>
                        <li>
                           <p>匈牙利</p>
                        </li>
                        <li>
                           <p>ITALIAN_NEW</p>
                        </li>
                        <li>
                           <p>尼诺斯克</p>
                        </li>
                        <li>
                           <p>抛光</p>
                        </li>
                        <li>
                           <p>葡萄牙语</p>
                        </li>
                        <li>
                           <p>罗马尼亚语</p>
                        </li>
                        <li>
                           <p>俄语</p>
                        </li>
                        <li>
                           <p>塞尔维亚</p>
                        </li>
                        <li>
                           <p>SLOVAK</p>
                        </li>
                        <li>
                           <p>斯洛文尼亚语</p>
                        </li>
                        <li>
                           <p>SPANISH_NEW</p>
                        </li>
                        <li>
                           <p>瑞典</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="required-tasks-complete-upgrading-oracle-database.html#GUID-C9102D8A-0BD1-41FF-9AE9-656818267FB9" title="完成升级后，请查看并完成为您的环境指定的所需任务。">升级Oracle数据库后需要完成的任务</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD12427"></a><div class="props_rev_3"><a id="GUID-BF742F8E-61C6-4F7C-927D-26687D1A3B2F" name="GUID-BF742F8E-61C6-4F7C-927D-26687D1A3B2F"></a><h3 id="UPGRD-GUID-BF742F8E-61C6-4F7C-927D-26687D1A3B2F" class="sect3">升级Oracle数据库后更新Oracle Application Express配置</h3>
               <div>
                  <p>Oracle Application Express会影响升级过程，具体取决于Oracle Application Express版本和数据库安装类型。</p>
                  <p>如果升级的Oracle数据库发行版包含Oracle Application Express 3.2或更高版本，则升级到新的Oracle数据库发行版后无需执行其他配置。但是，如果Oracle Application Express在注册表中，以便升级中包含Oracle Application Express，则将<span class="parmname" translate="no">open_cursors</span>参数设置为最小值200。
                  </p>
                  <p>如果升级的Oracle数据库是Oracle Express Edition数据库，则它包含为Oracle Express Edition环境定制的早期版本的Oracle Application Express。升级期间会自动安装最新的Oracle Application Express版本。您必须完成一系列安装后步骤才能配置Oracle Application Express以与新的Oracle数据库版本一起使用。</p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-BF742F8E-61C6-4F7C-927D-26687D1A3B2F__GUID-84BD9182-1689-4FB6-B6A2-ACAEFC921003">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/upgrd&amp;id=HTMIG29181" target="_blank"><span><cite>适用</cite></span></a>于<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/upgrd&amp;id=HTMIG29181" target="_blank"><span><cite>Oracle Application Express的安装</cite></span></a>后任务的<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/upgrd&amp;id=HTMIG29181" target="_blank"><span><cite>Oracle Application Express安装指南</cite></span></a></p>
                        </li>
                        <li>
                           <p><a href="http://www.oracle.com/technetwork/developer-tools/apex/overview/index.html" target="_blank"><code class="codeph">http://www.oracle.com/technetwork/developer-tools/apex/overview/index.html</code></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="required-tasks-complete-upgrading-oracle-database.html#GUID-C9102D8A-0BD1-41FF-9AE9-656818267FB9" title="完成升级后，请查看并完成为您的环境指定的所需任务。">升级Oracle数据库后需要完成的任务</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-7A62A202-2965-4DEB-A834-5E8218B23A3C" name="GUID-7A62A202-2965-4DEB-A834-5E8218B23A3C"></a><h3 id="UPGRD-GUID-7A62A202-2965-4DEB-A834-5E8218B23A3C" class="sect3">在只读Oracle Homes中替换DEMO目录</h3>
               <div>
                  <p>升级只读Oracle主目录后，复制早期版本的Oracle数据库<code class="codeph">demo</code>目录，并将只读Oracle主目录中的<code class="codeph">demo</code>目录替换为新版本的<code class="codeph">demo</code>目录。
                  </p>
                  <div class="section">
                     <p>Oracle Database 18c及更高版本在文件路径<code><span class="variable" translate="no">Oracle_home</span> /rdbms/demo</code>包含产品演示目录。这些目录包括特定于每个Oracle数据库发行版的选项和功能的示例和产品演示，其中一些可以在升级后通过安装Oracle数据库示例添加到其中。在您的早期版本中，如果您下载并使用了早期版本的演示文件，那么您有两个问题：您希望保存早期版本的工作以便使用新版本进行审查和测试，并且您希望获得演示的更新，特定于新版本。
                     </p>
                     <p>升级Oracle主页，下载并执行您想要使用新演示文件执行的任何其他工作后，您可以刷新旧的演示文件。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-7A62A202-2965-4DEB-A834-5E8218B23A3C__GUID-76FF8422-7123-449C-A70E-12D660665006">
                     <p class="titleinexample">示例5-5在只读Oracle主目录中复制早期版本演示目录和刷新演示</p>
                     <p>升级后，使用此过程将先前<code class="codeph">demo</code>目录中的所有工作保存在只读Oracle主目录中，并将早期版本<code class="codeph">demo</code>目录替换为新版本<code class="codeph">demo</code>目录：</p>
                     <ol>
                        <li>
                           <p>以Oracle软件所有者用户（ <code class="codeph">oracle</code> ）身份登录。
                           </p>
                        </li>
                        <li>
                           <p>检查<code class="codeph">rdbms/demo</code>目录是否已复制到只读Oracle主目录。
                           </p>
                           <p>在此示例中，环境变量<code class="codeph">ORACLE_BASE_HOME</code>被定义为只读Oracle主目录的路径。
                           </p>
                           <p>Linux和Unix平台：</p><pre class="pre codeblock"><code>$ ls -l -d $ ORACLE_BASE_HOME / rdbms / demo /u01/app/oracle/product/19.0.0/dbhome_1/rdbms/demo</code></pre><p>Microsoft Windows平台</p><pre class="pre codeblock"><code>ls -l -d％ORACLE_BASE_HOME％\ rdbms \ demo％ORACLE_BASE_HOME％\ rdbms \ demo</code></pre></li>
                        <li>
                           <p>将目录更改为只读Oracle主目录并进行复制，其中<code class="codeph">demo.old_release18</code>是您为早期版本演示文件提供的名称：</p><pre class="pre codeblock"><code>cd $ ORACLE_BASE_HOME / rdbms mv demo demo.old_release18</code></pre></li>
                        <li>
                           <p>将新的<code class="codeph">demo</code>目录从已升级的Oracle主目录复制到只读Oracle主目录。
                           </p>
                           <p>在此示例中，环境变量ORACLE_HOME被定义为新版Oracle Home。</p>
                           <p>Linux和Unix：</p><pre class="pre codeblock"><code>cp -r $ ORACLE_HOME / rdbms / demo demo</code></pre><p>微软Windows</p><pre class="pre codeblock"><code>xcopy c：\％ORACLE_HOME％\ rdbms \ demo c：％ORACLE_BASE_HOME％\ rdbms \ demo / E</code></pre></li>
                     </ol><pre class="pre codeblock"><code></code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="required-tasks-complete-upgrading-oracle-database.html#GUID-C9102D8A-0BD1-41FF-9AE9-656818267FB9" title="完成升级后，请查看并完成为您的环境指定的所需任务。">升级Oracle数据库后需要完成的任务</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD12428"></a><div class="props_rev_3"><a id="GUID-77701CFB-0716-40B4-B9BE-6E0A77506496" name="GUID-77701CFB-0716-40B4-B9BE-6E0A77506496"></a><h3 id="UPGRD-GUID-77701CFB-0716-40B4-B9BE-6E0A77506496" class="sect3">配置外部网络服务的访问控制列表（ACL）</h3>
               <div>
                  <p>Oracle数据库<span class="italic">12c</span>与更高版本包括细粒度访问控制的<code class="codeph">UTL_TCP</code> ， <code class="codeph">UTL_SMTP</code> ， <code class="codeph">UTL_MAIL</code> ， <code class="codeph">UTL_HTTP</code> ，或<code class="codeph">UTL_INADDR</code>包。
                  </p>
                  <p>如果您有使用这些软件包的应用程序，那么在升级Oracle数据库之后，您必须在受影响的软件包可以像在早期版本中那样工作之前在数据库中配置网络访问控制列表（ACL）。如果没有ACL，您的应用程序可能会失败并显示错误“ORA-24247：访问控制列表（ACL）拒绝网络访问”。</p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-77701CFB-0716-40B4-B9BE-6E0A77506496__GUID-BAEB6D4F-0F26-4510-965A-508B86134D09">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../dbseg/managing-fine-grained-access-in-pl-sql-packages-and-types.html#DBSEG40012" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a>适用于更复杂的情况，例如将某些用户连接到主机A，将其他用户连接到主机B.</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="required-tasks-complete-upgrading-oracle-database.html#GUID-C9102D8A-0BD1-41FF-9AE9-656818267FB9" title="完成升级后，请查看并完成为您的环境指定的所需任务。">升级Oracle数据库后需要完成的任务</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD12429"></a><div class="props_rev_3"><a id="GUID-12B920E9-B2DA-48A0-832C-3E07D172A011" name="GUID-12B920E9-B2DA-48A0-832C-3E07D172A011"></a><h3 id="UPGRD-GUID-12B920E9-B2DA-48A0-832C-3E07D172A011" class="sect3">升级Oracle数据库后启用Oracle Database Vault</h3>
               <div>
                  <p>根据您的目标数据库版本，可能需要禁用Oracle Database Vault以完成Oracle数据库升级。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="required-tasks-complete-upgrading-oracle-database.html#GUID-216BAD89-4ED9-43CB-B7A5-F710499673BE">在不禁用Oracle Database Vault的情况下升级Oracle数据库</a><br>如果目标Oracle数据库版本为12.2或更高版本，则可以在不禁用Oracle Database Vault的情况下进行升级。
                     </li>
                     <li class="ulchildlink"><a href="required-tasks-complete-upgrading-oracle-database.html#GUID-68B42C38-0B29-49B0-8B9F-8885C450F6DF">Oracle Database Vault的常见升级方案</a><br>升级后启用Oracle Database Vault的要求会发生变化，具体取决于源Oracle Database发行版。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="required-tasks-complete-upgrading-oracle-database.html#GUID-C9102D8A-0BD1-41FF-9AE9-656818267FB9" title="完成升级后，请查看并完成为您的环境指定的所需任务。">升级Oracle数据库后需要完成的任务</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-216BAD89-4ED9-43CB-B7A5-F710499673BE" name="GUID-216BAD89-4ED9-43CB-B7A5-F710499673BE"></a><h4 id="UPGRD-GUID-216BAD89-4ED9-43CB-B7A5-F710499673BE" class="sect4">在不禁用Oracle Database Vault的情况下升级Oracle数据库</h4>
                  <div>
                     <p>如果目标Oracle数据库版本为12.2或更高版本，则可以在不禁用Oracle Database Vault的情况下进行升级。</p>
                     <p>如果在源Oracle数据库发行版中启用了Oracle Database Vault，则可以在不先禁用Oracle Database Vault的情况下将Oracle数据库升级到Oracle Database 18c及更高版本。升级后，如果源Oracle数据库版本是Oracle Database 12c第1版（12.1）或更高版本，则使用与升级之前相同的强制设置启用Oracle Database Vault。例如，如果源数据库是Oracle数据库版本12.1，并且在该版本中禁用了Oracle Database Vault，则在升级后它将保持禁用状态。如果源Oracle Database Database 12.1数据库在升级之前已启用Oracle Database Vault，则升级后将启用Oracle Database Vault。</p>
                     <p>如果在升级之前手动禁用Oracle Database Vault，则必须在升级后手动启用Oracle Database Vault。</p>
                     <p>如果在升级之前未启用Oracle Database Vault，则可以在升级后手动启用它。</p>
                     <p>使用<code class="codeph">dvsys.dbms_macadm.enable_dv()</code>过程在已升级的数据库中启用Oracle Database Vault。使用授予<code class="codeph">DV_OWNER</code>的用户帐户运行此过程。运行该过程后，重新启动数据库实例，以使该过程生效。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dvadm/disabling-and-enabling-oracle-database-vault.html#DVADM71064" target="_blank"><span><cite>Oracle Database Vault管理员指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="required-tasks-complete-upgrading-oracle-database.html#GUID-12B920E9-B2DA-48A0-832C-3E07D172A011" title="根据您的目标数据库版本，可能需要禁用Oracle Database Vault以完成Oracle数据库升级。">升级Oracle数据库后启用Oracle Database Vault</a></p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-68B42C38-0B29-49B0-8B9F-8885C450F6DF" name="GUID-68B42C38-0B29-49B0-8B9F-8885C450F6DF"></a><h4 id="UPGRD-GUID-68B42C38-0B29-49B0-8B9F-8885C450F6DF" class="sect4">Oracle Database Vault的常见升级方案</h4>
                  <div>
                     <p>升级后启用Oracle Database Vault的要求会发生变化，具体取决于源Oracle Database发行版。</p>
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>从Oracle Database <span class="italic">11g第</span> 2版（11.2）或更早版本升级：升级后，默认情况下禁用Oracle Database Vault。
                              </p>
                           </li>
                           <li>
                              <p>从Oracle Database 12 <span class="italic">c第</span> 1版（12.1）或更高版本升级：升级后，Oracle Database Vault具有与升级前相同的强制执行状态。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-68B42C38-0B29-49B0-8B9F-8885C450F6DF__GUID-34D55D32-3BAE-47C9-9D6A-17717D4925CB">
                        <p class="titleintable">表5-1常见的Oracle Database Vault升级方案和升级准备任务</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="常见的Oracle Database Vault升级方案和升级准备任务" border="1" summary="Status after upgrades of Oracle Database Vault, depending on release." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d43731e3041">源数据库发布</th>
                                 <th align="left" valign="bottom" id="d43731e3043">目标数据库发布</th>
                                 <th align="left" valign="bottom" id="d43731e3045">您是否需要在升级前禁用Database Vault</th>
                                 <th align="left" valign="bottom" id="d43731e3047">升级后的数据库保管库状态是什么</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d43731e3051" headers="d43731e3041 ">11.2或更早</td>
                                 <td align="left" valign="top" headers="d43731e3051 d43731e3043 ">12.1</td>
                                 <td align="left" valign="top" headers="d43731e3051 d43731e3045 ">是</td>
                                 <td align="left" valign="top" headers="d43731e3051 d43731e3047 ">禁用。您需要在升级后手动启用Database Vault。</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d43731e3060" headers="d43731e3041 ">11.2或更早</td>
                                 <td align="left" valign="top" headers="d43731e3060 d43731e3043 ">12.2,18.1及更高版本</td>
                                 <td align="left" valign="top" headers="d43731e3060 d43731e3045 ">没有</td>
                                 <td align="left" valign="top" headers="d43731e3060 d43731e3047 ">禁用。您需要在升级后手动启用Database Vault。</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d43731e3069" headers="d43731e3041 ">12.1,12.2,18.1及更高版本</td>
                                 <td align="left" valign="top" headers="d43731e3069 d43731e3043 ">12.2,18.1及更高版本</td>
                                 <td align="left" valign="top" headers="d43731e3069 d43731e3045 ">没有</td>
                                 <td align="left" valign="top" headers="d43731e3069 d43731e3047 ">Database Vault具有与升级前相同的强制执行状态。</td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="required-tasks-complete-upgrading-oracle-database.html#GUID-12B920E9-B2DA-48A0-832C-3E07D172A011" title="根据您的目标数据库版本，可能需要禁用Oracle Database Vault以完成Oracle数据库升级。">升级Oracle数据库后启用Oracle Database Vault</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="UPGRD60157"></a><div class="props_rev_3"><a id="GUID-433E0DB9-026E-4322-A8FF-BA0E108AB28B" name="GUID-433E0DB9-026E-4322-A8FF-BA0E108AB28B"></a><h3 id="UPGRD-GUID-433E0DB9-026E-4322-A8FF-BA0E108AB28B" class="sect3">检查SQLNET.ALLOWED_LOGON_VERSION参数行为</h3>
               <div>
                  <p>从版本10g之前的客户端连接到Oracle数据库失败，错误为<code class="codeph">ORA-28040: No matching authentication protocol</code> 。
                  </p>
                  <p>从Oracle Database 18c开始， <code class="codeph">SQLNET.ALLOWED_LOGON_VERSION</code>参数的默认值从Oracle Database 12c（12.2）中的11更改为Oracle Database 18c及更高版本中的12。不推荐使用此参数。
                  </p>
                  <p><code class="codeph">SQLNET.ALLOWED_LOGON_VERSION</code>现在替换为<code class="codeph">SQLNET.ALLOWED_LOGON_VERSION_SERVER</code>和<code class="codeph">SQLNET.ALLOWED_LOGON_VERSION_CLIENT</code>参数。如果未在已升级的数据库中显式设置<code class="codeph">SQLNET.ALLOWED_LOGON_VERSION_SERVER</code>参数，则来自版本10g之前的客户端的连接将失败，并显示错误<code class="codeph">ORA-28040: No matching authentication protocol</code> 。为了更好的安全性，请检查数据库用户的密码验证程序，然后通过设置<code class="codeph">SQLNET.ALLOWED_LOGON_VERSION_SERVER</code>和<code class="codeph">SQLNET.ALLOWED_LOGON_VERSION_CLIENT</code>参数来配置数据库以使用正确的密码验证程序。
                  </p>
                  <p>如果您在现有数据库中具有受密码保护的角色（安全角色），并且使用默认的<code class="codeph">SQLNET.ALLOWED_LOGON_VERSION_SERVER</code>设置为12升级到Oracle Database 18c及更高版本，因为这些安全角色仅具有版本10g验证程序，则密码必须由管理员重置每个安全角色，以便安全角色在升级后仍可使用。
                  </p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-433E0DB9-026E-4322-A8FF-BA0E108AB28B__GUID-102D9143-8E56-4724-A6FA-C0E3399B94B0">
                     <p class="notep1">也可以看看：</p>
                     <p></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关确保密码安全威胁的信息，请参阅“ <a href="../dbseg/configuring-authentication.html#DBSEG30324" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></p>
                        </li>
                        <li>
                           <p><a href="../dbseg/configuring-authentication.html#DBSEG3225" target="_blank"><span><cite>“Oracle数据库安全指南</cite></span> <span class="italic">Oracle数据库安全指南”，</span></a>以获取有关设置用户密码版本的信息</p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="required-tasks-complete-upgrading-oracle-database.html#GUID-C9102D8A-0BD1-41FF-9AE9-656818267FB9" title="完成升级后，请查看并完成为您的环境指定的所需任务。">升级Oracle数据库后需要完成的任务</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
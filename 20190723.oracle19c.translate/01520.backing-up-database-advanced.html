<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Backing Up the Database: Advanced Topics</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Backup and Recovery User's Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Backup and Recovery User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-backup-and-recovery-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-09T05:20:45-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96241-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="backing-up-database.html" title="Previous" type="text/html">
      <link rel="next" href="part-managing-rman-backups.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Backup and Recovery User's Guide">
    <meta name="dcterms.isVersionOf" content="BRADV">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="backing-up-database.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="part-managing-rman-backups.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Backup and Recovery User's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-backing-up-archiving.html" property="item" typeof="WebPage"><span property="name">Backing Up and Archiving Data</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Backing Up the Database: Advanced Topics</li>
            </ol>
            <a id="GUID-A4FABEF4-677C-42ED-9DF8-3731ADA12E5F" name="GUID-A4FABEF4-677C-42ED-9DF8-3731ADA12E5F"></a><a id="BRADV007"></a>
            
            <h2 id="BRADV-GUID-A4FABEF4-677C-42ED-9DF8-3731ADA12E5F" class="sect2"><span class="enumeration_chapter">10 </span>Backing Up the Database: Advanced Topics
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter explains advanced RMAN backup procedures. This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="backing-up-database-advanced.html#GUID-14E97C71-7205-44AD-A711-C5B0053EEA58" title="You can use the CONFIGURE command to create persistent settings that govern backup set size.">Limiting the Size of RMAN Backup Sets</a></p>
                  </li>
                  <li>
                     <p><a href="backing-up-database-advanced.html#GUID-BC32C333-F0EB-4F17-AD79-8882E224D2F4" title="You run the CONFIGURE BACKUP OPTIMIZATION command to enable backup optimization. When certain criteria are met, RMAN skips backups of files that are identical to files that are already backed up.">Using Backup Optimization to Skip Files</a></p>
                  </li>
                  <li>
                     <p><a href="backing-up-database-advanced.html#GUID-CBF7B516-AEBB-433F-A57C-EECAEF153C12" title="By default, the BACKUP command terminates when it cannot access a data file.">Skipping Offline, Read-Only, and Inaccessible Files</a></p>
                  </li>
                  <li>
                     <p><a href="backing-up-database-advanced.html#GUID-4CFE9BA0-E298-42B8-9FB6-D36751C09D54" title="RMAN can make up to four copies of a backup set simultaneously, each an exact duplicate of the others.">Duplexing Backup Sets</a></p>
                  </li>
                  <li>
                     <p><a href="backing-up-database-advanced.html#GUID-EEA8D192-E7CD-4457-A0E3-5062EA2E8D0C" title="Many sites keep a backup of the database stored on disk in case a media failure occurs on the primary database or an incorrect user action requires point-in-time recovery. A data file backup on disk simplifies the restore step of recovery, making recovery much quicker and more reliable.">Making Split Mirror Backups with RMAN</a></p>
                  </li>
                  <li>
                     <p><a href="backing-up-database-advanced.html#GUID-ECBE4965-57F7-49F0-BECD-734196F417F5" title="You can protect RMAN backup sets with backup encryption. Encrypted backups cannot be read if they are obtained by unauthorized users.">Encrypting RMAN Backups</a></p>
                  </li>
                  <li>
                     <p><a href="backing-up-database-advanced.html#GUID-DE4C87D6-4BE4-4B5A-A00F-CA17F301A975" title="With the restartable backup feature, RMAN backs up only those files that were not backed up after a specified date.">Restarting RMAN Backups</a></p>
                  </li>
                  <li>
                     <p><a href="backing-up-database-advanced.html#GUID-AC3D62EE-FF00-43B9-97CC-3EDF295D2C7D" title="A backup window is a period of time during which a backup must complete. For example, you may want to restrict your database backups to a window of time when user activity on your system is low, such as between 2:00 a.m. and 6:00 a.m.Use the DURATION parameter of the BACKUP command to specify how long a given backup job is allowed to run.When you specify PARTIAL, RMAN does not report an error when a backup is interrupted because of the end of the backup window. Instead, RMAN displays a message showing which files are not backed up.When using DURATION you can run the backup with the maximum possible performance, or run as slowly as possible while still finishing within the allotted time, to minimize the performance impact of backup tasks.">Managing Backup Windows</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-A4FABEF4-677C-42ED-9DF8-3731ADA12E5F__GUID-632DB451-4ED1-443E-9B9B-4B253757ADCC">
                  <p class="notep1">See Also:</p>
                  <p><a href="backing-up-database.html#GUID-93BAB347-063F-439E-BDF3-109AB8D1F8E7" title="RMAN backups are created using the BACKUP command.The primary purpose of RMAN backups is to protect your data. If a media failure or disaster occurs, then you can restore your backups and recover lost changes.You can back up all or part of your database with the BACKUP command from within the RMAN client.You can provide arguments to the BACKUP command to override the default backup options.The BACKUP command takes a DEVICE TYPE clause that specifies whether to back up to disk or tape device.RMAN can create backups on disk as image copies or as backup sets.RMAN provides a range of options to name the files generated by the BACKUP command. When backing up to disk, you can specify a format to spread the backup across several drives for improved performance. RMAN attaches a character string called a tag to every backup it creates, as a way of identifying the backup. You can either accept the default tag or specify your own with the TAG parameter of the BACKUP command.User-specified tags are a useful way to indicate the purpose or usage of different classes of backups or copies. Use the TAG parameter with the BACKUP command to specify tags for backup sets and image copies.When creating backup sets, you can use RMAN support for binary compression of backup sets by including the AS COMPRESSED BACKUPSET option to the BACKUP command.A multisection backup enables large data files to be divided into sections that can be backed up in parallel across multiple channels. This provides faster backup performance and better recovery times.While an image copy is being created, RMAN uses multiple channels to write files sections. However, the output of this operation is one copy for each data file.You can perform a whole database backup with the database mounted or open. You can back up one or more tablespaces with the BACKUP TABLESPACE command or one or more data files with the BACKUP DATAFILE command. You can back up the control file when the database is mounted or open. RMAN uses a snapshot control file to ensure a read-consistent version. A manual backup of the control file is different from a control file autobackup. RMAN makes a control file autobackup after the files specified in the BACKUP command are backed up. To make a manual backup, you can either specify INCLUDE CURRENT CONTROLFILE when backing up other files or specify BACKUP CURRENT CONTROLFILE. RMAN automatically backs up the current server parameter file in certain cases. The BACKUP SPFILE command backs up the parameter file explicitly. The server parameter file that is backed up is the one currently in use by the instance. You can only back up a database in NOARCHIVELOG mode when the database is closed and in a consistent state.Preplugin backups ensure that an RMAN backup is usable after a non-CDB is plugged in as a PDB into a CDB. Use the BACKUP command to back up multitenant container databases (CDBs) and pluggable databases (PDBs).RMAN and Oracle Enterprise Manager Cloud Control provide full support for backup and recovery in a multitenant environment.Backing up a whole multitenant container database (CDB) is similar to backing up a non-CDB. When you back up a whole CDB, RMAN backs up the root, all the pluggable databases (PDBs), and the archived redo logs.You can use RMAN to make a backup of only the root. Because the root contains critical metadata for the whole CDB, Oracle recommends that you back up the root or back up the whole CDB at regular intervals.Oracle Enterprise Manager Cloud Control (Cloud Control) can be used to back up the root.RMAN enables you to back up one or more PDBs in a CDB using the BACKUP command. Preplugin backups of a PDB can be used to perform restore and recover operations after the PDB is migrated and plugged in to a different destination CDB.Oracle Enterprise Manager Cloud Control (Cloud Control) can be used to perform backups of pluggable databases (PDBs).Because tablespaces in different PDBs can have the same name, to eliminate ambiguity you must connect directly to a PDB to back up one or more of its tablespaces.This example creates a preplugin backup of the PDB my_pdb that is contained in CDB cdb_prod. The CDB uses shared undo and is open in read-write mode.RMAN enables you to use the BACKUP command to perform backup operations on the application root, one or more application PDBs, and the application container.RMAN can back up application containers, application PDBs, and the application root.Use the RMAN BACKUP command to back up the application root.Use the BACKUP command to back up an application container, which consists of the application root and all the application PDBs that belong to the application root.The BACKUP command is used to back up one or more application PDBs. Use the BACKUP command to back up sparse databases.RMAN enables you to back up a sparse database, using steps similar to backing up a whole database, in the backup set or image copy format.You can back up one or more tablespaces containing sparse data files or individual sparse data files using the BACKUP command. RMAN enables you to back up one or more sparse PDBs in a CDB. Archived redo logs are the key to successful media recovery. You should back them up regularly.Several features of RMAN backups are specific to archived redo logs. For example, you can use BACKUP ... DELETE to delete one or all copies of archived redo logs from disk after backing them up to backup sets. Even if your redo logs are being archived to multiple destinations and you use RMAN to back up archived redo logs, RMAN selects only one copy of the archived redo log file to include in the backup set. Because logs with the same log sequence number are identical, RMAN does not need to include more than one log copy.Automatic online redo log switching is an important RMAN feature. In a CDB, archived redo logs can be backed up only when you connect to the root as a common user with the SYSDBA or SYSBACKUP privilege. To back up archived logs, use the BACKUP ARCHIVELOG command.You can indicate that RMAN should automatically skip backups of archived redo logs.You can back up archived redo logs in a multitenant container database (CDB) by using the BACKUP ARCHIVELOG command.The BACKUP ARCHIVELOG ... DELETE INPUT command deletes archived log files after they are backed up. This command eliminates the separate step of manually deleting archived redo logs. In a CDB, you can delete archived redo logs after they are backed up by using the BACKUP ARCHIVELOG ... DELETE INPUT command.An incremental backup copies only data file blocks that have changed since a specified previous backup. Use the BACKUP command to create incremental backups.RMAN incremental backups provide multiple benefits.Choose a backup strategy according to an acceptable MTTR (mean time to recover). You can use the Volume Shadow Copy Service (VSS) with the Oracle VSS writer to make a shadow copy or snapshot of files in a database.By incrementally updating backups, you can avoid the overhead of making full image copy backups of data files, while also minimizing time required for media recovery of your database. For example, if you run a daily backup script, then you never have more than 1 day of redo to apply for media recovery.To create incremental backups for use in an incrementally updated backup strategy, use the BACKUP ... FOR RECOVER OF COPY WITH TAG form of the BACKUP command. The command is best understood in a sample script that implements the strategy.The block change tracking feature for incremental backups improves backup performance by recording changed blocks for each data file.If block change tracking is enabled on a primary or standby database, then RMAN uses a block change tracking file to identify changed blocks for incremental backups. By reading this small bitmap file to determine which blocks changed, RMAN avoids having to scan every block in the data file that it is backing up.Oracle Database automatically manages space in the change tracking file to retain block change data that covers the eight most recent backups. After the maximum of eight bitmaps is reached, the oldest bitmap is overwritten by the bitmap that tracks the current changes.By default, the block change tracking file is created as an Oracle managed file in the destination specified by the DB_CREATE_FILE_DEST initialization parameter. You can also place the block change tracking file in any location that you choose, by specifying its name when enabling block change tracking. The size of the block change tracking file is proportional to the size of the database and the number of enabled threads of redo. You can enable block change tracking when the database is either open or mounted. When you disable block change tracking, the database removes the block change tracking file from the operating system.You can query the V$BLOCK_CHANGE_TRACKING view to determine whether change tracking is enabled, and if it is, the file name of the block change tracking file.To move the change tracking file, use the ALTER DATABASE RENAME FILE statement. You can use BACKUP... KEEP to create a backup that is both all-inclusive and exempt from the backup retention policy.You can exempt a backup from the retention policy by using the KEEP option with the BACKUP command. Typically, you make an archival backup to tape. Because your data protection backups are most likely to be on a set of tapes that remain accessible and are recycled, it is advisable to reserve a set of tapes for the archival backup. Use the BACKUP command with the KEEP option to make archival backups.One purpose of an archival backup is to create a test database. You can use the BACKUP BACKUPSET command to back up backup sets produced by other backup jobs. You can also use BACKUP RECOVERY AREA to back up recovery files created in the current and all previous fast recovery area destinations. The BACKUP BACKUPSET command creates additional copies of backup pieces in a backup set, but does not create a new backup set. For a backup retention policy based on redundancy, a backup set is counted as one instance of a backup. This statement is true even if there are multiple copies of the backup pieces that form the backup set, such as when a backup set has been backed up from disk to tape.Use the BACKUP BACKUPSET command to copy backup sets from disk to tape. Use the BACKUP command to back up image copies to tape."> Backing Up the Database</a> for basic backup procedures
                  </p>
               </div>
            </div><a id="BRADV89540"></a><div class="props_rev_3"><a id="GUID-14E97C71-7205-44AD-A711-C5B0053EEA58" name="GUID-14E97C71-7205-44AD-A711-C5B0053EEA58"></a><h3 id="BRADV-GUID-14E97C71-7205-44AD-A711-C5B0053EEA58" class="sect3"><span class="enumeration_section">10.1 </span>Limiting the Size of RMAN Backup Sets
               </h3>
               <div>
                  <p>You can use the <code class="codeph">CONFIGURE</code> command to create persistent settings that govern backup set size.
                  </p>
                  <p>This control is helpful when backing up very large files. If you do not have a backup set size persistently configured, then you can also use the <code class="codeph">BACKUP... MAXSETSIZE</code> command to limit the size of backup sets.
                  </p>
                  <p>You can use the <code class="codeph">CONFIGURE</code> command, but not the <code class="codeph">BACKUP</code> command, to set a limit for the size of individual backup pieces. This control is especially useful when you use a media manager that has restrictions on the sizes of files, or when you must back up very large files. 
                  </p>
                  <div class="infoboxnotealso" id="GUID-14E97C71-7205-44AD-A711-C5B0053EEA58__GUID-AB0F0F87-4202-4D39-89F0-71FD4E7ED8C9">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="configuring-rman-client-advanced.html#GUID-0A131C1F-85F1-4FED-8EFB-D747679A184A" title="The CONFIGURE MAXSETSIZE command limits the size of backup sets created on a channel. This CONFIGURE setting applies to any channel, whether manually allocated or configured, when the BACKUP command is used to create backup sets. The default value is given in bytes and is rounded down to the lowest kilobyte value.">Configuring the Maximum Size of Backup Sets</a></p>
                        </li>
                        <li>
                           <p><a href="configuring-rman-client-advanced.html#GUID-B5C38414-33DD-4A0F-B0FD-B63F1AC74B33" title="Backup piece size is an issue when it exceeds the maximum file size permitted by the file system or media management software. You can use the MAXPIECESIZE parameter of the CONFIGURE CHANNEL or ALLOCATE CHANNEL command to limit the size of backup pieces.">Configuring the Maximum Size of Backup Pieces</a></p>
                        </li>
                     </ul>
                  </div>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="backing-up-database-advanced.html#GUID-04C958FE-A0D3-41A2-B777-73868CDAD4B7" title="The MAXSETSIZE parameter of the BACKUP command specifies a maximum size for a backup set in units of bytes (default), kilobytes, megabytes, or gigabytes.">About Backup Set Size</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database-advanced.html#GUID-DD5D76A0-2C93-4847-8E79-8E75ACAF4119" title="Backup piece size is an issue in those situations where it exceeds the maximum file size of the file system or media management software. Use the MAXSETSIZE parameter of the CONFIGURE CHANNEL or ALLOCATE CHANNEL command to limit the size of backup pieces.">Limiting the Size of Backup Sets with BACKUP ... MAXSETSIZE</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database-advanced.html#GUID-F2D9FF2D-9E1C-4D38-AD8E-88B6B32F02B4" title="If you specify the SECTION SIZE parameter on the BACKUP command, then RMAN creates a backup set in which each backup piece contains the blocks from one file section.">Dividing the Backup of a Large Data File into Sections</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV89541"></a><div class="props_rev_3"><a id="GUID-04C958FE-A0D3-41A2-B777-73868CDAD4B7" name="GUID-04C958FE-A0D3-41A2-B777-73868CDAD4B7"></a><h4 id="BRADV-GUID-04C958FE-A0D3-41A2-B777-73868CDAD4B7" class="sect4"><span class="enumeration_section">10.1.1 </span>About Backup Set Size
                  </h4>
                  <div>
                     <p>The <code class="codeph">MAXSETSIZE</code> parameter of the <code class="codeph">BACKUP</code> command specifies a maximum size for a backup set in units of bytes (default), kilobytes, megabytes, or gigabytes. 
                     </p>
                     <p>For example, to limit a backup set to 305 MB, specify <code class="codeph">MAXSETSIZE 305M</code>. RMAN attempts to limit all backup sets to this size.
                     </p>
                     <p>You can use <code class="codeph">BACKUP ... MAXSETSIZE</code> to limit the size of backup sets so that the database is divided among multiple backup sets. If the backup fails part way through, then you can use the restartable backup feature to back up only those files that were not backed up during the previous attempt. 
                     </p>
                     <p>In some cases the <code class="codeph">MAXSETSIZE</code> value may be too small to contain the largest file that you are backing up. When determining whether <code class="codeph">MAXSETSIZE</code> is too small, RMAN uses the size of the original data file rather than the file size after compression. RMAN displays an error stack such as the following:
                     </p><pre class="oac_no_warn" dir="ltr">RMAN-00571: ===========================================================
RMAN-00569: =============== ERROR MESSAGE STACK FOLLOWS ===============
RMAN-00571: ===========================================================
RMAN-03002: failure of backup command at 11/03/13 14:40:33
RMAN-06182: archive log larger than MAXSETSIZE: thread 1 seq 1
            /oracle/oradata/trgt/arch/archive1_1.dbf</pre><div class="infoboxnotealso" id="GUID-04C958FE-A0D3-41A2-B777-73868CDAD4B7__GUID-3ADD80EE-82BC-4C6E-9EFF-00936157DD05">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="backing-up-database-advanced.html#GUID-DE4C87D6-4BE4-4B5A-A00F-CA17F301A975" title="With the restartable backup feature, RMAN backs up only those files that were not backed up after a specified date.">Restarting RMAN Backups</a> for information on how to restart RMAN backups
                              </p>
                           </li>
                           <li>
                              <p><a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> to learn about the <code class="codeph">CONFIGURE MAXSETSIZE</code> command
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV256"></a><a id="BRADV89542"></a><div class="props_rev_3"><a id="GUID-DD5D76A0-2C93-4847-8E79-8E75ACAF4119" name="GUID-DD5D76A0-2C93-4847-8E79-8E75ACAF4119"></a><h4 id="BRADV-GUID-DD5D76A0-2C93-4847-8E79-8E75ACAF4119" class="sect4"><span class="enumeration_section">10.1.2 </span>Limiting the Size of Backup Sets with BACKUP ... MAXSETSIZE
                  </h4>
                  <div>
                     <p>Backup piece size is an issue in those situations where it exceeds the maximum file size of the file system or media management software. Use the <code class="codeph">MAXSETSIZE</code> parameter of the <code class="codeph">CONFIGURE</code> <code class="codeph">CHANNEL</code> or <code class="codeph">ALLOCATE</code> <code class="codeph">CHANNEL</code> command to limit the size of backup pieces.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DD5D76A0-2C93-4847-8E79-8E75ACAF4119__GUID-FE70E612-DCCF-48D1-9B5B-AFD542DB21D3">To limit the size of backup sets:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database and recovery catalog (if used).</span><div>
                              <div class="infoboxnotealso" id="GUID-DD5D76A0-2C93-4847-8E79-8E75ACAF4119__GUID-9FC0EDA5-E2EC-49A4-BA1B-0B7A336C5347">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="starting-interacting-with-rman-client.html#GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C" title="You can create database connections from the RMAN client or the operating system command line. These database connection can be authenticated using a password file or with operating system authentication.">Making Database Connections with RMAN</a></p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Execute the <code class="codeph">BACKUP</code> command with the <code class="codeph">MAXSETSIZE</code> parameter.</span><div>
                              <p>The following example backs up archived logs to tape, limiting the size of each backup set to 100 MB:</p><pre class="pre codeblock"><code>BACKUP DEVICE TYPE sbt
  MAXSETSIZE 100M
  ARCHIVELOG ALL;</code></pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="BRADV257"></a><a id="BRADV89543"></a><div class="props_rev_3"><a id="GUID-F2D9FF2D-9E1C-4D38-AD8E-88B6B32F02B4" name="GUID-F2D9FF2D-9E1C-4D38-AD8E-88B6B32F02B4"></a><h4 id="BRADV-GUID-F2D9FF2D-9E1C-4D38-AD8E-88B6B32F02B4" class="sect4"><span class="enumeration_section">10.1.3 </span>Dividing the Backup of a Large Data File into Sections
                  </h4>
                  <div>
                     <p>If you specify the <code class="codeph">SECTION SIZE</code> parameter on the <code class="codeph">BACKUP</code> command, then RMAN creates a backup set in which each backup piece contains the blocks from one file section. 
                     </p>
                     <div class="section">
                        <p>A <a href="glossary.html#GUID-FDECFF77-1833-4BD3-A23C-AA4806E28241"><span class="xrefglossterm">file section</span></a> is a contiguous range of blocks in a file. This type of backup is called a <a href="glossary.html#GUID-6D6DDA5E-F1EF-4273-8649-137F1FC89EB6"><span class="xrefglossterm">multisection backup</span></a>.
                        </p>
                        <div class="infoboxnote" id="GUID-F2D9FF2D-9E1C-4D38-AD8E-88B6B32F02B4__GUID-5F174118-D4F3-4E06-A762-309DFB865E83">
                           <p class="notep1">Note:</p>
                           <p>You cannot specify <code class="codeph">SECTION SIZE</code> with <code class="codeph">MAXPIECESIZE</code>.
                           </p>
                        </div>
                        <p>The purpose of multisection backups is to enable RMAN channels to back up a single large file in parallel. RMAN divides the work among multiple channels, with each channel backing up one file section in a file. Backing up a file in separate sections can improve the performance of backups of large data files.</p>
                        <p>If a multisection backup completes successfully, then no backup set generated during the backup contains a partial data file. If a multisection backup is unsuccessful, then the RMAN metadata can contain a record for a partial backup set. RMAN does not consider partial backups for restore and recovery. You must use the <code class="codeph">DELETE</code> command to delete the partial backup set.
                        </p>
                        <p>If you specify a section size that is larger than the size of the file, then RMAN does not use multisection backup for the file. If you specify a small section size that would produce more than 256 sections, then RMAN increases the section size to a value that results in exactly 256 sections.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F2D9FF2D-9E1C-4D38-AD8E-88B6B32F02B4__GUID-F184DF51-C58A-4B99-80C2-92805F99D486">To make a multisection backup:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database and recovery catalog (if used).</span></li>
                        <li class="stepexpand"><span>If necessary, configure channel parallelism so that RMAN can make the backup parallel.</span></li>
                        <li class="stepexpand"><span>Execute <code class="codeph">BACKUP</code> with the <code class="codeph">SECTION SIZE</code> parameter.</span><div>
                              <p>For example, suppose that the <code class="codeph">users</code> tablespace contains a single data file of 900 MB. Also assume that three SBT channels are configured, with the parallelism setting for the SBT device set to 3. You can break up the data file in this tablespace into file sections as shown in the following example:
                              </p><pre class="pre codeblock"><code>BACKUP
  SECTION SIZE 300M
  TABLESPACE users;</code></pre><p>In this example, each of the three SBT channels backs up a 300 MB file section of the <code class="codeph">users</code> data file.
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-F2D9FF2D-9E1C-4D38-AD8E-88B6B32F02B4__GUID-05A5DBC1-CDCC-471C-9BFA-3C1D79C0E655">
                           <p class="notep1">See Also:</p>
                           <p><a href="validating-database-files-backups.html#GUID-044FA44E-2AEF-4BEB-A73D-EF9EA3253415__CHDDJJAI">Make Parallel the Validation of a Data File</a> to learn how to validate sections of a large data file
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="BRADV258"></a><a id="BRADV89546"></a><div class="props_rev_3"><a id="GUID-BC32C333-F0EB-4F17-AD79-8882E224D2F4" name="GUID-BC32C333-F0EB-4F17-AD79-8882E224D2F4"></a><h3 id="BRADV-GUID-BC32C333-F0EB-4F17-AD79-8882E224D2F4" class="sect3"><span class="enumeration_section">10.2 </span>Using Backup Optimization to Skip Files
               </h3>
               <div>
                  <p> You run the <code class="codeph">CONFIGURE BACKUP OPTIMIZATION</code> command to enable backup optimization. When certain criteria are met, RMAN skips backups of files that are identical to files that are already backed up.
                  </p>
                  <div class="section">
                     <p>For the following scenarios, assume that you configure backup optimization and a retention policy as shown in the following example.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-BC32C333-F0EB-4F17-AD79-8882E224D2F4__CHDFIEBH">
                     <p class="titleinexample">Example 10-1 Configuring Backup Optimization</p><pre class="pre codeblock"><code>CONFIGURE DEFAULT DEVICE TYPE TO sbt;
CONFIGURE BACKUP OPTIMIZATION ON;
CONFIGURE RETENTION POLICY TO RECOVERY WINDOW OF 4 DAYS;
</code></pre><p>With RMAN configured as shown in <a href="backing-up-database-advanced.html#GUID-BC32C333-F0EB-4F17-AD79-8882E224D2F4__CHDFIEBH">Example 10-1</a>, you run the following command every night to back up the database to tape:
                     </p><pre class="pre codeblock"><code>BACKUP DATABASE;
</code></pre><p>Because backup optimization is configured, RMAN skips backups of offline and read-only data files only if the most recent backups were made on or after the earliest point in the recovery window. RMAN does not skip backups when the most recent backups are older than the window. For example, optimization ensures you do not end up with a new backup of a read-only data file every night, so long as one backup set containing this file exists within the recovery window.</p>
                     <div class="infoboxnotealso" id="GUID-BC32C333-F0EB-4F17-AD79-8882E224D2F4__GUID-A1626397-C2F6-472A-BA27-35C6CDE3E9E2">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="configuring-rman-client-basic.html#GUID-914A65A7-872E-465B-95E5-0FD5ADAF6A9C" title="Run the RMAN CONFIGURE command to enable and disable backup optimization. Backup optimization skips the backup of files in certain circumstances if the identical file or an identical version of the file has been backed up.">Backup Optimization and the CONFIGURE command</a></p>
                           </li>
                           <li>
                              <p><a href="configuring-rman-client-basic.html#GUID-27CE5FE2-DAF0-4E96-B7DF-933616E64C45">About Backup Optimization for SBT Backups with Recovery Window Retention Policy</a> for a scenario involving backup optimization and recovery windows
                              </p>
                           </li>
                           <li>
                              <p><a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for a detailed description of criteria used by <code class="codeph">CONFIGURE BACKUP OPTIMIZATION</code> to determine whether a file is identical and can potentially be skipped
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="example" -->
               </div><a id="BRADV89548"></a><div class="props_rev_3"><a id="GUID-844430C0-E453-461F-8DDE-2943670D7745" name="GUID-844430C0-E453-461F-8DDE-2943670D7745"></a><h4 id="BRADV-GUID-844430C0-E453-461F-8DDE-2943670D7745" class="sect4"><span class="enumeration_section">10.2.1 </span>Optimizing a Daily Archived Log Backup to a Single Tape: Scenario
                  </h4>
                  <div>
                     <div class="section">
                        <p>Assume that you want to back up all the archived logs every night, but you do not want to have multiple copies of each log sequence number. With RMAN configured as shown in <a href="backing-up-database-advanced.html#GUID-BC32C333-F0EB-4F17-AD79-8882E224D2F4__CHDFIEBH">Example 10-1</a>, you run the following command in a script nightly at 1 a.m.:
                        </p><pre class="pre codeblock"><code>BACKUP DEVICE TYPE sbt 
  ARCHIVELOG ALL;
</code></pre><p>RMAN skips all logs except those produced in the last 24 hours. In this way, you keep only one copy of each archived log on tape.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV259"></a><a id="BRADV89549"></a><div class="props_rev_3"><a id="GUID-352C9B7E-FC3C-4B08-92B4-5B506FB09DDC" name="GUID-352C9B7E-FC3C-4B08-92B4-5B506FB09DDC"></a><h4 id="BRADV-GUID-352C9B7E-FC3C-4B08-92B4-5B506FB09DDC" class="sect4"><span class="enumeration_section">10.2.2 </span>Optimizing a Daily Archived Log Backup to Multiple Media Families: Scenario
                  </h4>
                  <div>
                     <p>In Oracle Secure Backup, a media family is a named group of volumes with a set of shared, user-defined attributes. In this scenario, you back up logs that are not on tape to one media family, then back up the same logs to a second media family. Finally, you delete old logs.</p>
                     <div class="section">
                        <p>With RMAN configured as shown in <a href="backing-up-database-advanced.html#GUID-352C9B7E-FC3C-4B08-92B4-5B506FB09DDC__CHDIACHH">Example 10-2</a>, run the following script at the same time every night to back up the logs generated during the previous day to two separate media families.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-352C9B7E-FC3C-4B08-92B4-5B506FB09DDC__CHDIACHH">
                        <p class="titleinexample">Example 10-2 Backing Up Archived Redo Logs to Multiple Media Families</p><pre class="pre codeblock"><code># The following command backs up just the logs that are not on tape. The 
# first copies are saved to the tapes from the media family "log_family1".
RUN
{
  ALLOCATE CHANNEL c1 DEVICE TYPE sbt
    PARMS 'ENV=(OB_MEDIA_FAMILY=log_family1)';
  BACKUP ARCHIVELOG ALL;
}
# Make one more copy of the archived logs and save them to tapes from a 
# different media family
RUN
{
  ALLOCATE CHANNEL c2 DEVICE TYPE sbt 
    PARMS 'ENV=(OB_MEDIA_FAMILY=log_family2)';
  BACKUP ARCHIVELOG
    NOT BACKED UP 2 TIMES;
}
</code></pre><p>If your goal is to delete logs from disk that have been backed up two times to SBT, then the simplest way to achieve the goal is with an <a href="glossary.html#GUID-3492E0C3-F42C-45E6-84E2-63E30A3489A4"><span class="xrefglossterm">archived redo log deletion policy</span></a>. The following one-time configuration specifies that archived redo logs are eligible for deletion from disk if two archived log backups exist on tape:
                        </p><pre class="pre codeblock"><code>CONFIGURE ARCHIVELOG DELETION POLICY 
  TO BACKED UP 2 TIMES TO DEVICE TYPE sbt;</code></pre><p>After running the script in <a href="backing-up-database-advanced.html#GUID-352C9B7E-FC3C-4B08-92B4-5B506FB09DDC__CHDIACHH">Example 10-2</a>, you can delete unneeded logs by executing <code class="codeph">DELETE ARCHIVELOG ALL</code>.
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="BRADV260"></a><a id="BRADV89550"></a><div class="props_rev_3"><a id="GUID-8EC304D5-40D2-493B-A2CD-D0629347373C" name="GUID-8EC304D5-40D2-493B-A2CD-D0629347373C"></a><h4 id="BRADV-GUID-8EC304D5-40D2-493B-A2CD-D0629347373C" class="sect4"><span class="enumeration_section">10.2.3 </span>Creating a Weekly Secondary Backup of Archived Logs: Example
                  </h4>
                  <div>
                     <div class="section">
                        <p>Assume a more sophisticated scenario in which your goal is to back up the archived logs to tape every day. You are worried about tape failure, however, so you want to ensure that you have more than one copy of each log sequence number on a separate tape before you perform your weekly deletion of logs from disk. This scenario assumes that the database is not using a fast recovery area.</p>
                        <p>First, perform a one-time configuration as follows:</p><pre class="pre codeblock"><code>CONFIGURE BACKUP OPTIMIZATION ON;
CONFIGURE DEVICE TYPE sbt PARALLELISM 1;
CONFIGURE default DEVICE TYPE TO sbt;
CONFIGURE CHANNEL DEVICE TYPE sbt PARMS 'ENV=(OB_MEDIA_FAMILY=first_copy);
</code></pre><p>Because you have optimization enabled, you can run the following command every evening to back up all archived logs to the <code class="codeph">first_copy</code> media family that have not already been backed up:
                        </p><pre class="pre codeblock"><code>BACKUP ARCHIVELOG ALL TAG first_copy;
</code></pre><p>Every Friday evening you create an additional backup of all archived logs in a different media family. After the backup, you want to delete all archived logs that have at least two copies on tape. So you run the following script:</p><pre class="pre codeblock"><code>RUN
{
  # manually allocate a channel, to specify that the backup run by this
  # channel goes to both media families "first_copy" and "second_copy"
  ALLOCATE CHANNEL c1 DEVICE TYPE sbt
      PARMS 'ENV=(OB_MEDIA_FAMILY=second_copy)';
  ALLOCATE CHANNEL c2 DEVICE TYPE sbt
      PARMS 'ENV=(OB_MEDIA_FAMILY=first_copy)';
  BACKUP 
    CHANNEL c1 
    ARCHIVELOG 
    UNTIL TIME 'SYSDATE' 
    NOT BACKED UP 2 TIMES # back up only logs without 2 backups on tape
    TAG SECOND_COPY; 
  BACKUP 
    CHANNEL c2 
    ARCHIVELOG 
    UNTIL TIME 'SYSDATE' 
    NOT BACKED UP 2 TIMES # back up only logs without 2 backups on tape
    TAG FIRST_COPY;
}

# now delete from disk all logs that have been backed up to tape at least twice
DELETE 
  ARCHIVELOG ALL
  BACKED UP 2 TIMES TO DEVICE TYPE sbt;
</code></pre><p>The following table explains the effects of the daily and weekly backup scripts.</p>
                        <div class="tblformal" id="GUID-8EC304D5-40D2-493B-A2CD-D0629347373C__GUID-69C35398-F334-40A0-955D-82A4363D1EEA">
                           <p class="titleintable">Table 10-1 Effects of Daily and Weekly Scripts</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Effects of Daily and Weekly Scripts" summary="This table describes daily backup activity under the strategy described in this section." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="14%" id="d50755e1350">Script</th>
                                    <th align="left" valign="bottom" width="43%" id="d50755e1353">Tape Contents After Script</th>
                                    <th align="left" valign="bottom" width="43%" id="d50755e1356">Disk Contents After Script</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="14%" id="d50755e1361" headers="d50755e1350 ">
                                       <p>Daily</p>
                                    </td>
                                    <td align="left" valign="top" width="43%" headers="d50755e1361 d50755e1353 ">
                                       <p>Archived logs that have not yet been backed up are now in media family <code class="codeph">first_copy</code>.
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="43%" headers="d50755e1361 d50755e1356 ">
                                       <p>All archived logs created since the last <code class="codeph">DELETE</code> command are still on disk.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="14%" id="d50755e1377" headers="d50755e1350 ">
                                       <p>Weekly</p>
                                    </td>
                                    <td align="left" valign="top" width="43%" headers="d50755e1377 d50755e1353 ">
                                       <p>Archived logs that have fewer than two backups on tape are now in media families <code class="codeph">first_copy</code> and <code class="codeph">second_copy</code>.
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="43%" headers="d50755e1377 d50755e1356 ">
                                       <p>All archived logs that have been backed up at least twice to tape are deleted.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>After the weekly backup, you can send the tape from the media family <code class="codeph">second_copy</code> to offsite storage. Use this tape backup only if the primary tape from pool <code class="codeph">first_copy</code> is damaged. Because the secondary tape is offsite, you do not want RMAN to use it for recovery, so you can mark the backup as unavailable:
                        </p><pre class="oac_no_warn" dir="ltr">CHANGE BACKUP OF ARCHIVELOG TAG SECOND_COPY UNAVAILABLE;</pre><div class="infoboxnotealso" id="GUID-8EC304D5-40D2-493B-A2CD-D0629347373C__GUID-92E9657D-B095-4AB4-99BA-043F5A0F88C9">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="maintaining-rman-backups.html#GUID-F5C3D045-279B-4AB3-8A91-3231A716402C" title="The recommended maintenance strategy is to configure a fast recovery area, a backup retention policy, and an archived redo log deletion policy. In this case, the database automatically maintains and deletes backups and archived redo logs as needed. However, manual maintenance of database backups and archived redo logs is sometimes necessary.RMAN provides multiple commands to maintain RMAN backups and repository records.RMAN always stores its metadata in the control file of each target database on which it performs operations. If you register a target database in the recovery catalog, then RMAN stores the metadata for this target database in the recovery catalog. The database in a Data Guard environment that creates a backup or copy is associated with the file. For example, if RMAN is connected to target database standby1 and backs it up, then this backup is associated with standby1.For a crosscheck, RMAN can only update the status of a file from AVAILABLE to EXPIRED when connected to the database associated with the file. RMAN can delete files when connected to any database. If RMAN is not connected as TARGET to the database associated with a file, and if RMAN cannot delete a file successfully, then RMAN prompts you to connect as TARGET to the database associated with the file. You must then use DELETE ... FORCE to delete the file metadata.If a maintenance command changes RMAN metadata only, then you can connect RMAN as TARGET to any database in the Data Guard environment. A backup remains associated with a database unless you explicitly use the CHANGE ... RESET DB_UNIQUE_NAME to associate the backup with a different database.RMAN is designed to work without a recovery catalog. If you choose not to use a recovery catalog, however, then the control file of each target database is the exclusive repository for RMAN metadata.The control file contains two types of records: circular reuse records and noncircular reuse records.When a control file record containing information about a file created in the fast recovery area is about to be reused, the database attempts to delete the file from the fast recovery area when the file is eligible for deletion. Otherwise, the database expands the size of the control file section containing the record for this file.The best way to prevent the loss of RMAN metadata because of overwritten control file records is to use a recovery catalog.If you are not using a recovery catalog to store RMAN metadata, then it is doubly important that you protect each target database control file.Although the fast recovery area is largely self-managing, some situations may require database administration intervention.RMAN uses certain rules to determine when files can be deleted from the fast recovery area.You can use the V$RECOVERY_FILE_DEST and V$RECOVERY_AREA_USAGE views to determine whether you have allocated enough space for your fast recovery area.You cannot manage the flashback logs in the fast recovery area directly other than by setting the flashback retention target or using guaranteed restore points.If the RMAN retention policy requires keeping a set of backups larger than the fast recovery area disk quota, or if the retention policy is set to NONE, then the fast recovery area can fill completely with no reclaimable space.Use the ALTER SYSTEM command to change the location of the fast recovery area.The ALTER SYSTEM command can be used to disable the fast recovery area.As a rule, the fast recovery area is self-maintaining. When an instance crashes during the creation of a file in the fast recovery area, however, the database may leave the file in the fast recovery area.Several situations can cause a discrepancy between the repository and the files that it records, including tape or disk failures and user-managed copies or deletions of RMAN-related files.To ensure that data about backups in the recovery catalog or control file is synchronized with corresponding data on disk or in the media management catalog, perform a crosscheck. The CROSSCHECK command operates only on files that are currently recorded in the RMAN repository.Crosschecks update outdated RMAN repository information about backups whose repository records do not match their physical status. For example, if a user removes archived logs from disk with an operating system command, the repository still indicates that the logs are on disk, when in fact they are not.After connecting to the target database and recovery catalog (if you use one), run CROSSCHECK commands as needed to verify the status and availability of backups known to RMAN.You can use the LIST command to report your backups and then use the CROSSCHECK command to check that specific backups described in the LIST output still exist. Use the CROSSCHECK command to verify the status and availability of preplugin backups and preplugin archived redo log files known to RMAN.RMAN provides multiple methods of changing the repository status of backups and copies.Run the CHANGE...UNAVAILABLE command when a backup cannot be found or has migrated offsite.You can designate backups as exempt from the retention policy. This technique is useful for archiving backups to comply with business requirements.Use the CHANGE command with the GUID option to change the status of backups that correspond to pluggable databases (PDBs) that have been dropped from a multitenant container database (CDB).Use the CHANGE command to modify the repository status of preplugin backups and preplugin archived redo log files.You can use the CATALOG command to make RMAN aware of the existence of archived logs not recorded in the repository or copies of database files that are created through means other than RMAN. The target database control file keeps records of all archived redo logs generated by the target database and all RMAN backups. The purpose of the CATALOG command is to add metadata to the repository when it does not have a record of files for RMAN to manage.Use the CATALOG command to propagate information about user-managed copies to the RMAN repository. After the files are cataloged, you can run the LIST command or query V$BACKUP_FILES view to confirm the information is contained in the RMAN repository.You can catalog backup pieces on disk. This technique is useful if you use an operating system utility to copy backup pieces from one location to another on the same host, or from one host to another. If you use Automatic Storage Management (ASM), an Oracle Managed Files framework, or the fast recovery area, then you may want to recatalog files that are known to the disk management system but are no longer listed in the RMAN repository. This situation can occur when the intended mechanism for tracking file names fails due to media failure, software bug, or user error.Use the CATALOG command to add preplugin archived redo log files to the RMAN repository.You can remove records for files from the RMAN repository.You can use the CHANGE ... UNCATALOG command to update the RMAN repository for the absent files.You can use the RMAN DELETE command to delete archived redo logs and RMAN backups. Every RMAN backup produces a corresponding record in the RMAN repository. This record is stored in the control file. If a recovery catalog is used, then the record can also be found in the recovery catalog after the recovery catalog is resynchronized from the control file. You can delete backups and recovery catalog records for backups.The recommended maintenance strategy is to configure a fast recovery area, a backup retention policy, and an archived redo log deletion policy.Use the RMAN DELETE command to delete backups and image copies.You can use both the DELETE and BACKUP ... DELETE commands to delete specific backups and copies.You can use BACKUP ... DELETE to back up archived redo logs, data file copies, or backup sets and then delete the input files after successfully backing them up. If you run CROSSCHECK, and if RMAN cannot locate the files, then it updates their records in the RMAN repository to EXPIRED status. You can then use the DELETE EXPIRED command to remove records of expired backups and copies from the RMAN repository.The RMAN DELETE command supports an OBSOLETE option, which deletes backups that are no longer needed to satisfy specified recoverability requirements. Use the DELETE command with the GUID option to delete backups of pluggable databases (PDBs) that have been dropped from a multitenant container database (CDB).Use the DELETE command to delete preplugin backups and prelplugin archived redo log files.To remove a database from the operating system, you can use the DROP DATABASE command in RMAN. RMAN removes the server parameter file, all data files, online redo logs, and control files belonging to the target database.">Maintaining RMAN Backups and Repository&nbsp;Records</a> to learn how to change the status of and delete backups
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF110" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> to learn about the <code class="codeph">CHANGE</code> and <code class="codeph">DELETE</code> commands
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="BRADV261"></a><a id="BRADV262"></a><a id="BRADV89569"></a><div class="props_rev_3"><a id="GUID-CBF7B516-AEBB-433F-A57C-EECAEF153C12" name="GUID-CBF7B516-AEBB-433F-A57C-EECAEF153C12"></a><h3 id="BRADV-GUID-CBF7B516-AEBB-433F-A57C-EECAEF153C12" class="sect3"><span class="enumeration_section">10.3 </span>Skipping Offline, Read-Only, and Inaccessible Files
               </h3>
               <div>
                  <p>By default, the <code class="codeph">BACKUP</code> command terminates when it cannot access a data file.
                  </p>
                  <div class="section">
                     <p> You can specify parameters to prevent termination, as listed in <a href="backing-up-database-advanced.html#GUID-CBF7B516-AEBB-433F-A57C-EECAEF153C12__CHDBBJBF" title="Descriptions of SKIP INACCESSIBLE, SKIP OFFLINE, and SKIP READONLY">Table 10-2</a>.
                     </p>
                     <div class="tblformal" id="GUID-CBF7B516-AEBB-433F-A57C-EECAEF153C12__CHDBBJBF">
                        <p class="titleintable">Table 10-2 BACKUP ... SKIP Options</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="BACKUP ... SKIP Options" summary="Descriptions of SKIP INACCESSIBLE, SKIP OFFLINE, and SKIP READONLY" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="33%" id="d50755e1676">If you specify...</th>
                                 <th align="left" valign="bottom" width="67%" id="d50755e1679">Then RMAN skips...</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d50755e1684" headers="d50755e1676 ">
                                    <p><code class="codeph">SKIP</code> <code class="codeph">INACCESSIBLE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="67%" headers="d50755e1684 d50755e1679 ">
                                    <p>Data files that RMAN cannot read. </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d50755e1695" headers="d50755e1676 ">
                                    <p><code class="codeph">SKIP</code> <code class="codeph">OFFLINE</code></p>
                                 </td>
                                 <td align="left" valign="top" width="67%" headers="d50755e1695 d50755e1679 ">
                                    <p>Offline data files. Some offline data files can still be read because they exist on disk. Others have been deleted or moved and so cannot be read, making them inaccessible.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="33%" id="d50755e1706" headers="d50755e1676 ">
                                    <p><code class="codeph">SKIP</code> <code class="codeph">READONLY</code></p>
                                 </td>
                                 <td align="left" valign="top" width="67%" headers="d50755e1706 d50755e1679 ">
                                    <p>Data files in read-only tablespaces.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>The following example uses an automatic channel to back up the database, and skips all data files that might cause the backup job to terminate.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-CBF7B516-AEBB-433F-A57C-EECAEF153C12__GUID-CA56E6B3-34A6-4DDD-871E-57D6A92B4301">
                     <p class="titleinexample">Example 10-3 Skipping Files During an RMAN Backup</p><pre class="pre codeblock"><code>BACKUP DATABASE
  SKIP INACCESSIBLE
  SKIP READONLY
  SKIP OFFLINE;</code></pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="BRADV145"></a><div class="props_rev_3"><a id="GUID-4CFE9BA0-E298-42B8-9FB6-D36751C09D54" name="GUID-4CFE9BA0-E298-42B8-9FB6-D36751C09D54"></a><h3 id="BRADV-GUID-4CFE9BA0-E298-42B8-9FB6-D36751C09D54" class="sect3"><span class="enumeration_section">10.4 </span>Duplexing Backup Sets
               </h3>
               <div>
                  <p>RMAN can make up to four copies of a backup set simultaneously, each an exact duplicate of the others.</p>
                  <p>A copy of a <a href="glossary.html#GUID-614D6594-1A1A-46EE-A041-312ADAB7E151"><span class="xrefglossterm">duplexed backup set</span></a> is a copy of each backup piece in the backup set, with each copy getting a unique copy number (for example, <code class="codeph">0tcm8u2s_1_1</code> and <code class="codeph">0tcm8u2s_1_2</code>). It is not possible to duplex backup sets to the <a href="glossary.html#GUID-6E3CDD76-A573-4E5C-B12D-59C232C96C19"><span class="xrefglossterm">fast recovery area</span></a>.
                  </p>
                  <p>You can use <a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><code class="codeph">BACKUP</code></a> <code class="codeph">...</code> <code class="codeph">COPIES</code> or <a href="../rcmrf/CONFIGURE.html#RCMRF113" target="_blank"><code class="codeph">CONFIGURE</code></a> <code class="codeph">...</code> <code class="codeph">BACKUP</code> <code class="codeph">COPIES</code> to duplex backup sets. RMAN can duplex backups to either disk or tape, but cannot duplex backups to tape and disk simultaneously. For <code class="codeph">DISK</code> channels, specify multiple values in the <code class="codeph">FORMAT</code> option to direct the multiple copies to different physical disks. For <a href="glossary.html#GUID-2E48CE71-9547-4196-B715-5CE59033262E"><span class="xrefglossterm">SBT</span></a> channels, if you use a media manager that supports Version 2 of the SBT API, then the media manager automatically writes each copy to a separate medium (for example, a separate tape). When backing up to tape, ensure that the number of copies does not exceed the number of available tape devices.
                  </p>
                  <p>Duplexing applies only to backup sets, not image copies. It is an error to specify the <code class="codeph">BACKUP... COPIES</code> when creating image copy backups, and the <code class="codeph">CONFIGURE... BACKUP COPIES </code>setting is ignored for image copy backups.
                  </p>
                  <div class="infoboxnotealso" id="GUID-4CFE9BA0-E298-42B8-9FB6-D36751C09D54__GUID-90262080-C43E-4359-B388-79853D9798A8">
                     <p class="notep1">See Also:</p>
                     <p><a href="rman-backup-concepts.html#GUID-763A9C75-90A5-48FD-9CB6-707D030A00F5" title="RMAN enables you to make multiple, identical copies of backups.">About Multiple Copies of RMAN Backups</a> for a conceptual overview of RMAN backup copies
                     </p>
                  </div>
               </div><a id="BRADV263"></a><a id="BRADV89570"></a><div class="props_rev_3"><a id="GUID-1A6816FF-3E17-443C-B271-9C298CC987FF" name="GUID-1A6816FF-3E17-443C-B271-9C298CC987FF"></a><h4 id="BRADV-GUID-1A6816FF-3E17-443C-B271-9C298CC987FF" class="sect4"><span class="enumeration_section">10.4.1 </span>Duplexing Backup Sets with CONFIGURE BACKUP COPIES
                  </h4>
                  <div>
                     <p>The <code class="codeph">CONFIGURE...BACKUP COPIES</code> command specifies the number of identical backup sets to create on the specified device type. 
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-1A6816FF-3E17-443C-B271-9C298CC987FF__GUID-D37F02D8-35B9-4438-A997-B36A715E0FA3">To duplex a backup with CONFIGURE ... BACKUP COPIES: </p>
                        <p>This setting applies to all backup sets except control file autobackups (because the autobackup of a control file always produces one copy) and backup sets when backed up with the <code class="codeph">BACKUP BACKUPSET</code> command.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Configure the number of copies on the desired device type for data files and archived redo logs on the desired device types. </span><div>
                              <p>By default, <code class="codeph">CONFIGURE...BACKUP COPIES</code> is set to <code class="codeph">1</code> for each device type. The following example configures duplexing for data files and archived logs on tape and also duplexing for data files (but not archived redo logs) on disk:
                              </p><pre class="pre codeblock"><code>CONFIGURE DEVICE TYPE sbt PARALLELISM 1;
CONFIGURE DEFAULT DEVICE TYPE TO sbt;
CONFIGURE CHANNEL DEVICE TYPE DISK FORMAT '/disk1/%U', '/disk2/%U';
CONFIGURE DATAFILE BACKUP COPIES FOR DEVICE TYPE sbt TO 2;
CONFIGURE ARCHIVELOG BACKUP COPIES FOR DEVICE TYPE sbt TO 2;
CONFIGURE DATAFILE BACKUP COPIES FOR DEVICE TYPE DISK TO 2;
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Execute the <code class="codeph">BACKUP</code> command. </span><div>
                              <p>The following command backs up the database and archived logs to tape, making two copies of each data file and archived log:</p><pre class="pre codeblock"><code>BACKUP AS BACKUPSET DATABASE PLUS ARCHIVELOG;
</code></pre><p>Because of the configured formats for the disk channel, the following command backs up the database to disk, placing one copy of the backup sets produced in the <code class="codeph">/disk1</code> directory and the other in the <code class="codeph">/disk2</code> directory:
                              </p><pre class="pre codeblock"><code>BACKUP DEVICE TYPE DISK AS BACKUPSET DATABASE;
</code></pre><p>If the <code class="codeph">FORMAT</code> clause were not configured on <code class="codeph">CONFIGURE CHANNNEL</code>, then you specify <code class="codeph">FORMAT</code> on the <code class="codeph">BACKUP</code> command itself. For example, you issue the following command:
                              </p><pre class="pre codeblock"><code>BACKUP AS BACKUPSET DATABASE 
  FORMAT '/disk1/%U', 
         '/disk2/%U';
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Issue a <a href="../rcmrf/LIST.html#RCMRF132" target="_blank"><code class="codeph">LIST</code></a> <code class="codeph">BACKUP</code> command to see a listing of backup sets and pieces. </span><div>
                              <p>For example, enter the following command:</p><pre class="pre codeblock"><code>LIST BACKUP SUMMARY;
</code></pre><p>The <code class="codeph">#Copies</code> column shows the number of backup sets, which may have been produced by duplexing or by multiple backup commands.
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-1A6816FF-3E17-443C-B271-9C298CC987FF__GUID-0F3F7988-4281-46D4-B4E3-DE0D7E294755">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="configuring-rman-client-advanced.html#GUID-2A285F87-552A-4F36-A5B9-F25A69611B4B" title="Use the CONFIGURE ... BACKUP COPIES command to specify how many copies of each backup piece are created on the specified device type for the specified type of file. This type of backup is known as a duplexed backup set.">Configuring Backup Duplexing</a></p>
                              </li>
                              <li>
                                 <p><a href="configuring-rman-client-advanced.html#GUID-2A285F87-552A-4F36-A5B9-F25A69611B4B" title="Use the CONFIGURE ... BACKUP COPIES command to specify how many copies of each backup piece are created on the specified device type for the specified type of file. This type of backup is known as a duplexed backup set.">Configuring Backup Duplexing</a> to learn about the <code class="codeph">CONFIGURE BACKUP COPIES</code> command
                                 </p>
                              </li>
                              <li>
                                 <p><a href="configuring-rman-client-basic.html#GUID-AD92E09D-0788-4AB5-8792-5F969C8D237A" title="RMAN provides sensible defaults for most parameters required to perform basic backup and recovery. You can modify the value of default parameters or override these values for a particular session.">About Configuring the Environment for RMAN Backups</a> to learn about basic backup configuration option
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV264"></a><a id="BRADV89571"></a><div class="props_rev_3"><a id="GUID-D0F9ADCE-DA22-475B-BDB6-A565E76A26F9" name="GUID-D0F9ADCE-DA22-475B-BDB6-A565E76A26F9"></a><h4 id="BRADV-GUID-D0F9ADCE-DA22-475B-BDB6-A565E76A26F9" class="sect4"><span class="enumeration_section">10.4.2 </span>Duplexing Backup Sets with BACKUP ... COPIES
                  </h4>
                  <div>
                     <p>The <code class="codeph">COPIES</code> option of the <code class="codeph">BACKUP</code> command overrides every other <code class="codeph">COPIES</code> or <code class="codeph">DUPLEX</code> setting to control duplexing of backup sets.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-D0F9ADCE-DA22-475B-BDB6-A565E76A26F9__GUID-B53B4CE2-643D-47F3-BB53-B4312F22DBC3">To duplex a backup with BACKUP ... COPIES:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Specify the number of identical copies with the <code class="codeph">COPIES</code> option of the <code class="codeph">BACKUP</code> command. For example, run the following to make three copies of each backup set in the default <code class="codeph">DISK</code> location:</span><div><pre class="pre codeblock"><code>BACKUP AS BACKUPSET DEVICE TYPE DISK 
  COPIES 3 
  INCREMENTAL LEVEL 0 
  DATABASE;
</code></pre><p>Because you specified <code class="codeph">COPIES</code> in the <code class="codeph">BACKUP</code> command, RMAN makes three backup sets of each data file regardless of the <code class="codeph">CONFIGURE DATAFILE COPIES</code> setting.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Issue a <code class="codeph">LIST BACKUP</code> command to see a listing of backup sets and pieces (the <code class="codeph">#Copies</code> column shows the number of copies, which may have been produced through duplexing or through multiple invocations of the <code class="codeph">BACKUP</code> command). For example, enter:</span><div><pre class="pre codeblock"><code>LIST BACKUP SUMMARY;</code></pre></div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div><a id="BRADV265"></a><a id="BRADV146"></a><div class="props_rev_3"><a id="GUID-EEA8D192-E7CD-4457-A0E3-5062EA2E8D0C" name="GUID-EEA8D192-E7CD-4457-A0E3-5062EA2E8D0C"></a><h3 id="BRADV-GUID-EEA8D192-E7CD-4457-A0E3-5062EA2E8D0C" class="sect3"><span class="enumeration_section">10.5 </span>Making Split Mirror Backups with RMAN
               </h3>
               <div>
                  <p>Many sites keep a backup of the database stored on disk in case a media failure occurs on the primary database or an incorrect user action requires point-in-time recovery. A data file backup on disk simplifies the restore step of recovery, making recovery much quicker and more reliable.</p>
                  <div class="section">
                     <div class="infoboxnote" id="GUID-EEA8D192-E7CD-4457-A0E3-5062EA2E8D0C__GUID-6CDE9417-57DC-4D23-A64F-AAF9874A4842">
                        <p class="notep1">Caution:</p>
                        <p>Never make backups, split mirror or otherwise, of online redo logs. Restoring online redo log backups can create two archived logs with the same sequence number but different contents. Also, it is best to use the <a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><code class="codeph">BACKUP</code></a> <code class="codeph">CONTROLFILE</code> command rather than a split mirror to make control file backups.
                        </p>
                     </div>
                     <p>One way of creating a data file backup on disk is to use disk <a href="glossary.html#GUID-305BF676-5718-47C7-9902-A6E3A200A0DF"><span class="xrefglossterm">mirroring</span></a>. For example, the operating system can maintain three identical copies of each file in the database. In this configuration, you can split off a mirrored copy of the database to use as a backup.
                     </p>
                     <p>RMAN does not automate the splitting of mirrors, but can make use of split mirrors in backup and recovery. For example, RMAN can treat a split mirror of a data file as a data file copy, and can also back up this copy to disk or tape. The procedure in this section explains how to make a <a href="glossary.html#GUID-ECF69578-264C-4BFD-80BA-18135E703AF1"><span class="xrefglossterm">split mirror backup</span></a> with the <code class="codeph">ALTER SYSTEM SUSPEND</code>/<code class="codeph">RESUME</code> functionality. 
                     </p>
                     <p>Some mirroring technology does not require Oracle Database to suspend all I/O before a mirror can be separated and used as a backup. Refer to your storage manager, volume manager, or file system documentation for information about whether you must suspend I/O from the database instance.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-EEA8D192-E7CD-4457-A0E3-5062EA2E8D0C__GUID-234AD39A-DB9F-4850-99B3-E46EF5B03149">To make a split mirror backup of a tablespace by using SUSPEND/RESUME:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Start RMAN and then place the tablespaces to back up into backup mode with the <a href="../sqlrf/ALTER-TABLESPACE.html#SQLRF01002" target="_blank"><code class="codeph">ALTER TABLESPACE ... BEGIN BACKUP</code></a> statement. (To place all tablespaces in backup mode, you can the <a href="../sqlrf/ALTER-DATABASE.html#SQLRF00802" target="_blank"><code class="codeph">ALTER DATABASE BEGIN BACKUP</code></a> instead.)</span><div>
                           <p>For example, to place tablespace <code class="codeph">users</code> in backup mode, you connect RMAN to a target database and run the following <code class="codeph">SQL</code> command:
                           </p><pre class="pre codeblock"><code>ALTER TABLESPACE users BEGIN BACKUP; </code></pre></div>
                     </li>
                     <li class="stepexpand"><span>Suspend I/O if your mirroring software or hardware requires it. For example, enter the following command in RMAN:</span><div><pre class="pre codeblock"><code>ALTER SYSTEM SUSPEND;
</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>Split the mirrors for the underlying data files contained in these tablespaces.</span></li>
                     <li class="stepexpand"><span>Take the database out of the suspended state. For example, enter the following command in RMAN:</span><div><pre class="pre codeblock"><code>ALTER SYSTEM RESUME;
</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>Take the tablespaces out of backup mode. For example, enter:</span><div><pre class="pre codeblock"><code>ALTER TABLESPACE users END BACKUP;
</code></pre><p>You can also use <code class="codeph">ALTER DATABASE END BACKUP</code> to take all tablespaces out of backup mode.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Catalog the user-managed mirror copies as data file copies with the <a href="../rcmrf/CATALOG.html#RCMRF109" target="_blank"><code class="codeph">CATALOG</code></a> command. For example, enter:</span><div><pre class="pre codeblock"><code>CATALOG DATAFILECOPY '/dk2/oradata/trgt/users01.dbf'; # catalog split mirror
</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>Back up the data file copies. For example, run the <code class="codeph">BACKUP</code> <code class="codeph">DATAFILECOPY</code> command at the prompt:</span><div><pre class="pre codeblock"><code>BACKUP DATAFILECOPY '/dk2/oradata/trgt/users01.dbf';
</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>When you are ready to <a href="glossary.html#GUID-108043D5-E36A-426F-B124-EB49460C2473"><span class="xrefglossterm">resilver a split mirror</span></a>, first use the <a href="../rcmrf/CHANGE.html#RCMRF110" target="_blank"><code class="codeph">CHANGE</code></a> <code class="codeph">...</code> <code class="codeph">UNCATALOG</code> command to uncatalog the data file copies you cataloged in Step 6. For example, enter:</span><div><pre class="pre codeblock"><code>CHANGE DATAFILECOPY '/dk2/oradata/trgt/users01.dbf' UNCATALOG;
</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>Resilver the split mirror for the affected data files.</span><div>
                           <div class="infoboxnotealso" id="GUID-EEA8D192-E7CD-4457-A0E3-5062EA2E8D0C__GUID-F3946A3B-C46D-4013-A64F-685C169E0C5C">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="user-managed-database-backups.html#GUID-F41318F6-A2F2-4518-9DB5-9EBB904EFB47">Making User-Managed Backups in SUSPEND Mode</a></p>
                                 </li>
                                 <li>
                                    <p><a href="../admin/starting-up-and-shutting-down.html#ADMIN004" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for more information about the <code class="codeph">SUSPEND</code>/<code class="codeph">RESUME</code> feature
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../sqlrf/SQL-Statements-ALTER-LIBRARY-to-ALTER-SESSION.html#SQLRF009" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for the <a href="../sqlrf/ALTER-SYSTEM.html#SQLRF00902" target="_blank"><code class="codeph">ALTER SYSTEM</code></a> <code class="codeph">SUSPEND</code> syntax
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </li>
                  </ol>
               </div>
            </div><a id="BRADV72450"></a><div class="props_rev_3"><a id="GUID-ECBE4965-57F7-49F0-BECD-734196F417F5" name="GUID-ECBE4965-57F7-49F0-BECD-734196F417F5"></a><h3 id="BRADV-GUID-ECBE4965-57F7-49F0-BECD-734196F417F5" class="sect3"><span class="enumeration_section">10.6 </span>Encrypting RMAN Backups
               </h3>
               <div>
                  <p>You can protect RMAN backup sets with backup encryption. Encrypted backups cannot be read if they are obtained by unauthorized users. </p>
                  <p>The RMAN backup encryption feature requires the Enterprise Edition of the database.</p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="backing-up-database-advanced.html#GUID-4637E7A1-DD0A-41DB-A242-41A6A8850122" title="Backup encryption is performed based on the specified encryption settings.">About RMAN Backup Encryption Settings</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database-advanced.html#GUID-66452E9B-2DB5-4337-AE46-12DCDB4AC712">Making Transparent-Mode Encrypted Backups</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database-advanced.html#GUID-D36B54F4-5BFF-4FCE-9EDE-82CFF02B92A2" title="You can set an encryption password in an RMAN session by executing the SET ENCRYPTION BY PASSWORD command. If transparent encryption is configured, then specify the ONLY keyword to indicate that the backups are protected with a password and not with the configured transparent encryption.">Making Password-Mode Encrypted Backups</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database-advanced.html#GUID-DACE2E21-536D-4272-925F-1418F68B8A24" title="Use the SET ENCRYPTION BY PASSWORD command at the RMAN prompt to make password-protected backups. If transparent encryption is configured, then omit the ONLY keyword to indicate that the backups are protected with both a password and the configured transparent encryption.">Making Dual-Mode Encrypted Backups</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV89573"></a><div class="props_rev_3"><a id="GUID-4637E7A1-DD0A-41DB-A242-41A6A8850122" name="GUID-4637E7A1-DD0A-41DB-A242-41A6A8850122"></a><h4 id="BRADV-GUID-4637E7A1-DD0A-41DB-A242-41A6A8850122" class="sect4"><span class="enumeration_section">10.6.1 </span>About RMAN Backup Encryption Settings
                  </h4>
                  <div>
                     <p>Backup encryption is performed based on the specified encryption settings.</p>
                     <p>Encryption can be set with the following commands:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">CONFIGURE ENCRYPTION</code> 
                           </p>
                           <p>You can use this command to persistently configure transparent encryption. You cannot persistently configure dual mode or password mode encryption.</p>
                        </li>
                        <li>
                           <p><code class="codeph">SET ENCRYPTION</code> 
                           </p>
                           <p>You can use this command to configure dual mode or password mode encryption at the <a href="glossary.html#GUID-01D29658-41E1-4D45-9C7F-A761D56885B9"><span class="xrefglossterm">RMAN session</span></a> level.
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-4637E7A1-DD0A-41DB-A242-41A6A8850122__GUID-FD6FE073-3A41-4F20-BCB9-2EE1C0544FF8">
                        <p class="notep1">Note:</p>
                        <p>Keystore-based encryption is more secure than password-based encryption because no passwords are involved. Use password-based encryption only when absolutely necessary because your backups must be transportable.</p>
                     </div>
                     <p>The database uses a new encryption key for every encrypted backup. The backup encryption key is then encrypted with either the password, the database master key, or both, depending on the chosen encryption mode. Individual backup encryption keys or passwords are never stored in clear text.</p>
                     <p>A single restore operation can process backups encrypted in different modes. For each backup piece that it restores, RMAN checks whether it is encrypted. Transparently encrypted backups need no intervention if the Oracle keystore is open and available.</p>
                     <p>If password encryption is detected, then RMAN searches for a matching key in the list of passwords entered in the <code class="codeph">SET DECRYPTION</code> command. If RMAN finds a usable key, then the restore operation proceeds. Otherwise, RMAN searches for a key in the Oracle keystore. If RMAN finds a usable key, then the restore operation proceeds; otherwise, RMAN signals an error that the backup piece cannot be decrypted.
                     </p>
                     <div class="infoboxnote" id="GUID-4637E7A1-DD0A-41DB-A242-41A6A8850122__GUID-4D82942B-F33A-4C59-A04D-50186D8CB558">
                        <p class="notep1">Note:</p>
                        <p>If RMAN restores a set of backups created with different passwords, then all required passwords must be included with <code class="codeph">SET DECRYPTION</code> .
                        </p>
                     </div>
                     <p>RMAN encryption is a CPU-intensive operation and can affect backup performance. The actual amount of CPU utilization during encryption depends on whether both input and output devices for disk and SBT produce and consume data faster than the CPU can encrypt it. Here are a few guidelines for managing and trying to maximize CPU performance:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Because encrypted backups consume more CPU resources than unencrypted backups, you can improve performance of encrypted backups to disk by using more RMAN channels. A general rule is to use the same number of channels as the number of CPU cores in your system. For example, use two channels for a dual-core processor.</p>
                        </li>
                        <li>
                           <p>If both the disk subsystem and SBT-subsystem are fast, you can expect very high CPU utilization. You may want to consider slowing the rate of the backup by setting the RMAN <code class="codeph">READRATE</code> parameter. For example, you can set an upper limit for block reads so that RMAN does not consume excessive disk bandwidth and thereby degrade online performance.
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-4637E7A1-DD0A-41DB-A242-41A6A8850122__GUID-9D3AFCB8-C121-4770-B248-D227A6977802">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="rman-complete-database-recovery.html#GUID-5E09344A-76D0-4188-A39D-CBA07F0B5C25" title="During complete recovery RMAN restores one or more data files and then applies all the redo generated after the restored backup.">Performing Complete Database Recovery</a> to learn how to restore password-encrypted backups
                              </p>
                           </li>
                           <li>
                              <p><a href="reporting-rman-operations.html#GUID-323B8278-BD20-4278-9770-53E1CF6AC986" title="The ENCRYPTED column of the V$BACKUP_PIECE and V$RMAN_BACKUP_PIECE views indicates whether a backup piece is encrypted (YES) or unencrypted (NO).">Determining the Encryption Status of Backup Pieces</a></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF153" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> to learn about the <code class="codeph">ENCRYPTION</code> and <code class="codeph">DECRYPTION</code> options of the <code class="codeph">SET</code> command
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="BRADV89574"></a><div class="props_rev_3"><a id="GUID-66452E9B-2DB5-4337-AE46-12DCDB4AC712" name="GUID-66452E9B-2DB5-4337-AE46-12DCDB4AC712"></a><h4 id="BRADV-GUID-66452E9B-2DB5-4337-AE46-12DCDB4AC712" class="sect4"><span class="enumeration_section">10.6.2 </span>Making Transparent-Mode Encrypted Backups
                  </h4>
                  <div>
                     <div class="section">
                        <p>If you have configured transparent encryption with the <code class="codeph">CONFIGURE</code> command as explained in <span class="q">"<a href="configuring-rman-client-advanced.html#GUID-BAA3CFF0-C95C-4AF2-90DD-764754325D73" title="You can use the CONFIGURE command to persistently configure transparent encryption of backups.">Configuring RMAN Backup Encryption Modes</a>"</span>, then no additional commands are required to create encrypted backups. Make RMAN backups as normal.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV266"></a><a id="BRADV89575"></a><div class="props_rev_3"><a id="GUID-D36B54F4-5BFF-4FCE-9EDE-82CFF02B92A2" name="GUID-D36B54F4-5BFF-4FCE-9EDE-82CFF02B92A2"></a><h4 id="BRADV-GUID-D36B54F4-5BFF-4FCE-9EDE-82CFF02B92A2" class="sect4"><span class="enumeration_section">10.6.3 </span>Making Password-Mode Encrypted Backups
                  </h4>
                  <div>
                     <p>You can set an encryption password in an RMAN session by executing the <code class="codeph">SET ENCRYPTION BY PASSWORD</code> command. If transparent encryption is configured, then specify the <code class="codeph">ONLY</code> keyword to indicate that the backups are protected with a password and not with the configured transparent encryption.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-D36B54F4-5BFF-4FCE-9EDE-82CFF02B92A2__GUID-C6BE3E3D-B9C8-497C-905F-C4BFBE6529F8">To make password-mode encrypted backups:</p>
                        <div class="infoboxnote" id="GUID-D36B54F4-5BFF-4FCE-9EDE-82CFF02B92A2__GUID-D95A7DBB-3EFE-4352-8BE0-A25C80BD23CD">
                           <p class="notep1">Note:</p>
                           <p>Create a password that is secure. See <a href="../dbseg/configuring-authentication.html#DBSEG33223" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a> for more information.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database and recovery catalog (if used).</span></li>
                        <li class="stepexpand"><span>Execute the <code class="codeph">SET ENCRYPTION ON IDENTIFIED BY</code> <span class="italic"><code class="codeph">password</code></span> <code class="codeph">ONLY</code> command.</span><div>
                              <p>The following example sets the encryption password for all tablespaces (where <span class="italic">password</span> is a placeholder for the actual password that you enter) in the backup and specifies <code class="codeph">ONLY</code> to indicate that the encryption is password-only:
                              </p><pre class="pre codeblock"><code>SET ENCRYPTION IDENTIFIED BY <span class="italic">password</span> ONLY ON FOR ALL TABLESPACES;
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Back up the database.</span><div>
                              <p>For example, enter the following command:</p><pre class="pre codeblock"><code>BACKUP DATABASE PLUS ARCHIVELOG;</code></pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="BRADV267"></a><a id="BRADV89576"></a><div class="props_rev_3"><a id="GUID-DACE2E21-536D-4272-925F-1418F68B8A24" name="GUID-DACE2E21-536D-4272-925F-1418F68B8A24"></a><h4 id="BRADV-GUID-DACE2E21-536D-4272-925F-1418F68B8A24" class="sect4"><span class="enumeration_section">10.6.4 </span>Making Dual-Mode Encrypted Backups
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">SET ENCRYPTION BY PASSWORD</code> command at the RMAN prompt to make password-protected backups. If transparent encryption is configured, then <span class="italic">omit</span> the <code class="codeph">ONLY</code> keyword to indicate that the backups are protected with both a password and the configured transparent encryption.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DACE2E21-536D-4272-925F-1418F68B8A24__GUID-0D175ABE-580E-4728-9BD6-A9810E77BFF7">To make dual-mode encrypted backups:</p>
                        <div class="infoboxnote" id="GUID-DACE2E21-536D-4272-925F-1418F68B8A24__GUID-56A52898-79F9-4747-962D-6EFF50F8A8C9">
                           <p class="notep1">Note:</p>
                           <p>Create a password that is secure. See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=DBSEG33223" target="_blank"><span><cite>Oracle Database Security Guide</cite></span></a> for more information.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database and recovery catalog (if used).</span></li>
                        <li class="stepexpand"><span>Execute the <code class="codeph">SET ENCRYPTION BY PASSWORD</code> command, making sure to omit the <code class="codeph">ONLY</code> keyword.</span><div>
                              <p>The following example sets the encryption password for all tablespaces (where <span class="italic">password</span> is a placeholder for the actual password that you enter) in the backup and omits <code class="codeph">ONLY</code> to indicate dual-mode encryption:
                              </p><pre class="pre codeblock"><code>SET ENCRYPTION IDENTIFIED BY <span class="italic">password</span> ON FOR ALL TABLESPACES;
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Back up the database.</span><div>
                              <p>For example, enter the following command:</p><pre class="pre codeblock"><code>BACKUP DATABASE PLUS ARCHIVELOG;</code></pre></div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div><a id="BRADV148"></a><div class="props_rev_3"><a id="GUID-DE4C87D6-4BE4-4B5A-A00F-CA17F301A975" name="GUID-DE4C87D6-4BE4-4B5A-A00F-CA17F301A975"></a><h3 id="BRADV-GUID-DE4C87D6-4BE4-4B5A-A00F-CA17F301A975" class="sect3"><span class="enumeration_section">10.7 </span>Restarting RMAN Backups
               </h3>
               <div>
                  <p>With the restartable backup feature, RMAN backs up only those files that were not backed up after a specified date.</p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="backing-up-database-advanced.html#GUID-BBF25920-4071-4126-80BB-212F2B80C29B" title="The minimum unit of restartability is a data file. However, if a backup set contains one backup piece, and if this piece contains blocks from multiple data files, then the unit of restartability is the backup piece. The unit of restartability for image copies is a data file.">About Restartable Backups</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database-advanced.html#GUID-AE002ED5-2B57-4878-A759-E8F565F2610E" title="Use the SINCE TIME parameter of the BACKUP command to specify a date after which a new backup is required.">Restarting a Backup After It Partially Completes</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV114"></a><div class="props_rev_3"><a id="GUID-BBF25920-4071-4126-80BB-212F2B80C29B" name="GUID-BBF25920-4071-4126-80BB-212F2B80C29B"></a><h4 id="BRADV-GUID-BBF25920-4071-4126-80BB-212F2B80C29B" class="sect4"><span class="enumeration_section">10.7.1 </span>About Restartable Backups
                  </h4>
                  <div>
                     <p>The minimum unit of restartability is a data file. However, if a backup set contains one backup piece, and if this piece contains blocks from multiple data files, then the unit of restartability is the backup piece. The unit of restartability for image copies is a data file.</p>
                     <p>The benefit of restartable backups is that if the backup generates multiple backup sets, then the backup sets that completed successfully do not have to be rerun. However, if the entire database is written into one backup set, and if the backup fails halfway through, then the entire backup has to be restarted.</p>
                     <p>Any I/O errors that RMAN encounters when reading files or writing to the backup pieces or image copies cause RMAN to terminate the backup job in progress. For example, if RMAN tries to back up a data file but the data file is not on disk, then RMAN terminates the backup. If multiple channels are being used or redundant copies of backups are being created, however, then RMAN may be able to continue the backup without user intervention.</p>
                     <p>RMAN can back up only those files that have not been backed up since a specified date. Use this feature after a backup fails to back up the parts of the database missed by the failed backup.</p>
                     <p>You can restart a backup by specifying the <code class="codeph">SINCE TIME</code> clause on the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF107" target="_blank"><code class="codeph">BACKUP</code></a> command. If the <code class="codeph">SINCE</code> <code class="codeph">TIME</code> is later than the completion time, then RMAN backs up the file. If you use <code class="codeph">BACKUP DATABASE NOT BACKED UP</code> without the <code class="codeph">SINCE</code> <code class="codeph">TIME</code> parameter, then RMAN only backs up files that have never been backed up. 
                     </p>
                     <div class="infoboxnotealso" id="GUID-BBF25920-4071-4126-80BB-212F2B80C29B__GUID-37553B13-8202-4F1C-849D-373D61663740">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF107" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for <code class="codeph">BACKUP ... NOT BACKED UP</code> syntax
                        </p>
                     </div>
                  </div>
               </div><a id="BRADV268"></a><a id="BRADV89577"></a><div class="props_rev_3"><a id="GUID-AE002ED5-2B57-4878-A759-E8F565F2610E" name="GUID-AE002ED5-2B57-4878-A759-E8F565F2610E"></a><h4 id="BRADV-GUID-AE002ED5-2B57-4878-A759-E8F565F2610E" class="sect4"><span class="enumeration_section">10.7.2 </span>Restarting a Backup After It Partially Completes
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">SINCE</code> <code class="codeph">TIME</code> parameter of the <code class="codeph">BACKUP</code> command to specify a date after which a new backup is required.
                     </p>
                     <div class="section">
                        <p>If the <code class="codeph">SINCE</code> <code class="codeph">TIME</code> is later than the completion time, then RMAN backs up the file. If you use <code class="codeph">BACKUP DATABASE NOT BACKED UP</code> without the <code class="codeph">SINCE</code> <code class="codeph">TIME</code> parameter, then RMAN only backs up files that have never been backed up.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AE002ED5-2B57-4878-A759-E8F565F2610E__GUID-8B960CAE-1074-4F24-AE3E-D6CD50727C6A">To only back up files that were not backed up after a specified date:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database and recovery catalog (if used).</span></li>
                        <li class="stepexpand"><span>Execute the <code class="codeph">BACKUP ... NOT BACKED UP SINCE TIME</code> command.</span><div>
                              <p>Specify a valid date in the <code class="codeph">SINCE</code> <code class="codeph">TIME</code> parameter. The following example uses the default configured channel to back up all database files and archived redo logs that have not been backed up in the last two weeks:
                              </p><pre class="pre codeblock"><code>BACKUP 
  NOT BACKED UP SINCE TIME 'SYSDATE-14'
  DATABASE PLUS ARCHIVELOG;</code></pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-AE002ED5-2B57-4878-A759-E8F565F2610E__GUID-4FBE8C43-D1D7-453A-8587-41248F910200">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF107" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for an example of how to use the <code class="codeph">BACKUP</code> command to restart a backup that did not complete
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="BRADV301"></a><div class="props_rev_3"><a id="GUID-AC3D62EE-FF00-43B9-97CC-3EDF295D2C7D" name="GUID-AC3D62EE-FF00-43B9-97CC-3EDF295D2C7D"></a><h3 id="BRADV-GUID-AC3D62EE-FF00-43B9-97CC-3EDF295D2C7D" class="sect3"><span class="enumeration_section">10.8 </span>Managing Backup Windows
               </h3>
               <div>
                  <p>This section explains how to use backup windows to set limits for the time span in which a backup job can complete.</p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="backing-up-database-advanced.html#GUID-C506BFE1-E4DB-40FD-AB66-D4E00323E029" title="A backup window is a period of time during which a backup must complete. For example, you may want to restrict your database backups to a window of time when user activity on your system is low, such as between 2:00 a.m. and 6:00 a.m.">About Backup Windows</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database-advanced.html#GUID-83D2ABBB-192C-4475-88AF-7A4B9F13C234" title="Use the DURATION parameter of the BACKUP command to specify how long a given backup job is allowed to run.">Specifying a Backup Duration</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database-advanced.html#GUID-B01BBEBF-2286-4DAE-A48B-7A695123B3D9" title="When you specify PARTIAL, RMAN does not report an error when a backup is interrupted because of the end of the backup window. Instead, RMAN displays a message showing which files are not backed up.">Permitting Partial Backups in a Backup Window</a></p>
                     </li>
                     <li>
                        <p><a href="backing-up-database-advanced.html#GUID-87D29BAC-CD55-4DEB-8F80-056A600CF196" title="When using DURATION you can run the backup with the maximum possible performance, or run as slowly as possible while still finishing within the allotted time, to minimize the performance impact of backup tasks.">Minimizing Backup Load and Duration</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV89578"></a><div class="props_rev_3"><a id="GUID-C506BFE1-E4DB-40FD-AB66-D4E00323E029" name="GUID-C506BFE1-E4DB-40FD-AB66-D4E00323E029"></a><h4 id="BRADV-GUID-C506BFE1-E4DB-40FD-AB66-D4E00323E029" class="sect4"><span class="enumeration_section">10.8.1 </span>About Backup Windows
                  </h4>
                  <div>
                     <p>A backup window is a period of time during which a backup must complete. For example, you may want to restrict your database backups to a window of time when user activity on your system is low, such as between 2:00 a.m. and 6:00 a.m.</p>
                     <p>RMAN backs up the least recently backed up files first. By default, RMAN backs up the files at the maximum possible speed. Specifying a window does not mean that RMAN backs up data faster than normal to ensure that the backup completes before the window ends.</p>
                     <p>By default, if the backup is not complete within the <code class="codeph">DURATION</code> time, then RMAN interrupts the backup and reports an error. If the <code class="codeph">BACKUP</code> command is in a <a href="../rcmrf/RUN.html#RCMRF151" target="_blank"><code class="codeph">RUN</code></a> command, then the <code class="codeph">RUN</code> command terminates. Any completed backup sets are retained and can be used in restore operations, even if the entire backup is not complete. Thus, if you retry a job that was interrupted when the available duration expired, each successive attempt covers more of the files needing backup. Any incomplete backup sets are discarded.
                     </p>
                  </div>
               </div><a id="BRADV269"></a><a id="BRADV89579"></a><div class="props_rev_3"><a id="GUID-83D2ABBB-192C-4475-88AF-7A4B9F13C234" name="GUID-83D2ABBB-192C-4475-88AF-7A4B9F13C234"></a><h4 id="BRADV-GUID-83D2ABBB-192C-4475-88AF-7A4B9F13C234" class="sect4"><span class="enumeration_section">10.8.2 </span>Specifying a Backup Duration
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">DURATION</code> parameter of the <code class="codeph">BACKUP</code> command to specify how long a given backup job is allowed to run.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-83D2ABBB-192C-4475-88AF-7A4B9F13C234__GUID-DB1A2E53-BC28-4B39-A3DF-52DE004EF963">To specify a backup duration:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database and recovery catalog (if used).</span></li>
                        <li class="stepexpand"><span>Execute the <code class="codeph">BACKUP DURATION</code> command.</span><div>
                              <p>For example, run the following command at 2:00 a.m. to specify that the backup runs until 6:00 a.m.:</p><pre class="pre codeblock"><code>BACKUP 
  DURATION 4:00 
  TABLESPACE users;</code></pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-83D2ABBB-192C-4475-88AF-7A4B9F13C234__GUID-C6D6487C-CB73-410C-B3F5-3E7711A0D3B8">
                           <p class="notep1">See Also:</p>
                           <p><a href="../rcmrf/BACKUP.html#RCMRF107" target="_blank"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for the syntax of the <code class="codeph">BACKUP</code> command
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV270"></a><a id="BRADV89580"></a><div class="props_rev_3"><a id="GUID-B01BBEBF-2286-4DAE-A48B-7A695123B3D9" name="GUID-B01BBEBF-2286-4DAE-A48B-7A695123B3D9"></a><h4 id="BRADV-GUID-B01BBEBF-2286-4DAE-A48B-7A695123B3D9" class="sect4"><span class="enumeration_section">10.8.3 </span>Permitting Partial Backups in a Backup Window
                  </h4>
                  <div>
                     <p>When you specify <code class="codeph">PARTIAL</code>, RMAN does not report an error when a backup is interrupted because of the end of the backup window. Instead, RMAN displays a message showing which files are not backed up.
                     </p>
                     <div class="section">
                        <p>If the <code class="codeph">BACKUP</code> command is part of a <code class="codeph">RUN</code> block, then the remaining commands in the <code class="codeph">RUN</code> block continue to execute.
                        </p>
                        <p>If you specify <code class="codeph">FILESPERSET 1</code>, then RMAN puts each file into its own backup set. When a backup is interrupted at the end of the backup window, only the backup of the file currently being backed up is lost. All backup sets completed during the window are saved, minimizing the lost work caused by the end of the backup window.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B01BBEBF-2286-4DAE-A48B-7A695123B3D9__GUID-333629C9-0D5B-4A36-8EC0-1F562E6455FD">To prevent RMAN from issuing an error when a backup partially completes:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start RMAN and connect to a target database and recovery catalog (if used).</span></li>
                        <li class="stepexpand"><span>Execute the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/bradv&amp;id=RCMRF107" target="_blank"><code class="codeph">BACKUP DURATION</code></a> command with the <code class="codeph">PARTIAL</code> option.</span><div>
                              <p>For example, you run the following command at 2:00 a.m. to specify that the backup runs until 6:00 a.m. and that each data file is in a separate backup set:</p><pre class="pre codeblock"><code>BACKUP 
  DURATION 4:00 PARTIAL 
  TABLESPACE users 
  FILESPERSET 1;</code></pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="BRADV271"></a><a id="BRADV272"></a><a id="BRADV89581"></a><div class="props_rev_3"><a id="GUID-87D29BAC-CD55-4DEB-8F80-056A600CF196" name="GUID-87D29BAC-CD55-4DEB-8F80-056A600CF196"></a><h4 id="BRADV-GUID-87D29BAC-CD55-4DEB-8F80-056A600CF196" class="sect4"><span class="enumeration_section">10.8.4 </span>Minimizing Backup Load and Duration
                  </h4>
                  <div>
                     <p>When using <code class="codeph">DURATION</code> you can run the backup with the maximum possible performance, or run as slowly as possible while still finishing within the allotted time, to minimize the performance impact of backup tasks.
                     </p>
                     <div class="section">
                        <p>To maximize performance, use the <code class="codeph">MINIMIZE TIME</code> option with <code class="codeph">DURATION</code>, as shown in <a href="backing-up-database-advanced.html#GUID-87D29BAC-CD55-4DEB-8F80-056A600CF196__CIHIHEHB">Example 10-4</a>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-87D29BAC-CD55-4DEB-8F80-056A600CF196__CIHIHEHB">
                        <p class="titleinexample">Example 10-4 Using MINIMIZE TIME with BACKUP DURATION</p><pre class="pre codeblock"><code>BACKUP 
  DURATION 4:00 PARTIAL 
  MINIMIZE TIME 
  DATABASE 
  FILESPERSET 1;
</code></pre><p>To extend the backup to use the full time available, use the <code class="codeph">MINIMIZE LOAD</code> option, as in <a href="backing-up-database-advanced.html#GUID-87D29BAC-CD55-4DEB-8F80-056A600CF196__CHDBGBHG">Example 10-5</a>.
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-87D29BAC-CD55-4DEB-8F80-056A600CF196__CHDBGBHG">
                        <p class="titleinexample">Example 10-5 Using MINIMIZE LOAD with BACKUP DURATION</p>
                        <p>In this example, RMAN monitors the progress of the running backup, and periodically estimates how long the backup takes to complete at its present rate. If RMAN estimates that the backup will finish before the end of the backup window, then it slows down the rate of backup so that the full available duration is used. This reduces the overhead on the database associated with the backup.</p><pre class="pre codeblock"><code>BACKUP 
  DURATION 4:00 
  MINIMIZE LOAD 
  DATABASE 
  FILESPERSET 1;
</code></pre><p>Note these issues when using <code class="codeph">DURATION</code> and <code class="codeph">MINIMIZE LOAD</code> with a tape backup:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Efficient backup to tape requires tape streaming. If you use <code class="codeph">MINIMIZE LOAD</code>, then RMAN may reduce the rate of backup to the point where tape streaming is not optimal. 
                              </p>
                           </li>
                           <li>
                              <p>RMAN holds the tape resource for the entire duration of the backup window. This prevents the use of the tape resource for any other purpose during the backup window.</p>
                           </li>
                        </ul>
                        <p>Because of these concerns, it is not recommended that you use <code class="codeph">MINIMIZE LOAD</code> when backing up to tape.
                        </p>
                        <div class="infoboxnotealso" id="GUID-87D29BAC-CD55-4DEB-8F80-056A600CF196__GUID-3E2F2D69-ED89-4D18-B550-04DB8200C9D2">
                           <p class="notep1">See Also:</p>
                           <p><a href="tuning-rman-performance.html#GUID-AD7E0880-DEDB-4339-80E6-125F40591F8F" title="Multiple factors affect the speed of the backup to tape.">Media Manager Component of the Write Phase for SBT</a> for more details on efficient tape handling
                           </p>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
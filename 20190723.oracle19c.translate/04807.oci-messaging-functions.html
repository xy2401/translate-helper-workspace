<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Lists and describes OCI messaging functions."></meta>
      <meta name="description" content="Lists and describes OCI messaging functions."></meta>
      <title>OCI消息传递功能</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content="Lists and describes OCI messaging functions."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-call-interface-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-14T08:46:00-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96204-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="oci-character-set-conversion-functions.html" title="Previous" type="text/html"></link>
      <link rel="next" href="oci-xml-databse-functions.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle Call Interface Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNOCI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oci-character-set-conversion-functions.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="oci-xml-databse-functions.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oci-globalization-support-functions.html" property="item" typeof="WebPage"><span property="name">OCI全球化支持功能</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">OCI消息传递功能</li>
            </ol>
            <a id="GUID-0D127CE1-8826-4E20-BBF2-B776CF9B5EFE" name="GUID-0D127CE1-8826-4E20-BBF2-B776CF9B5EFE"></a>
            
            <h2 id="LNOCI-GUID-0D127CE1-8826-4E20-BBF2-B776CF9B5EFE" class="sect2"><span class="enumeration_section">31.7</span> OCI消息传递功能</h2>
         </header>
         <div class="ind">
            <div>
               <p>列出并描述OCI消息传递功能。</p>
               <div class="section">
                  <p>用户消息API为磁带盒开发人员提供了一个简单的界面，可以检索自己的消息和Oracle数据库消息。</p>
                  <div class="infoboxnotealso" id="GUID-0D127CE1-8826-4E20-BBF2-B776CF9B5EFE__GUID-726D1B60-FF88-4224-994A-E09D49749D13">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/lnoci&amp;id=ADDCI4272" target="_blank"><span><cite>Oracle数据库数据盒开发人员指南</cite></span></a></p>
                  </div>
                  <p> <a href="oci-messaging-functions.html#GUID-0D127CE1-8826-4E20-BBF2-B776CF9B5EFE__G568734" title="该表有2列。第1列是函数名称，第2列描述其用途。">表31-7</a>列出了本节中描述的OCI消息传递功能。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="tblformalwide" id="GUID-0D127CE1-8826-4E20-BBF2-B776CF9B5EFE__G568734">
                  <p class="titleintable">表31-7 OCI消息传递功能</p>
                  <table cellpadding="4" cellspacing="0" class="FormalWide" title="OCI消息传递功能" width="100%" border="1" summary="This table has 2 columns. Column 1 is the function name and column 2 describes its purpose." frame="hsides" rules="rows">
                     <thead>
                        <tr align="left" valign="top">
                           <th align="left" valign="bottom" width="59%" id="d310935e34">功能</th>
                           <th align="left" valign="bottom" width="41%" id="d310935e37">目的</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="59%" id="d310935e42" headers="d310935e34 ">
                              <p><a href="oci-messaging-functions.html#GUID-5C5A157D-1E44-4111-8158-0E7DE8CB599C" title="关闭消息句柄并释放与此句柄关联的所有内存。">OCIMessageClose（）</a></p>
                           </td>
                           <td align="left" valign="top" width="41%" headers="d310935e42 d310935e37 ">
                              <p>关闭消息句柄并释放与句柄关联的所有内存</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="59%" id="d310935e54" headers="d310935e34 ">
                              <p><a href="oci-messaging-functions.html#GUID-50AE92D5-A410-4E39-B87E-E816F24204CE" title="获取具有给定消息编号的消息。">OCIMessageGet（）</a></p>
                           </td>
                           <td align="left" valign="top" width="41%" headers="d310935e54 d310935e37 ">
                              <p>检索邮件。如果缓冲区不为零，则该函数将消息复制到缓冲区中</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="59%" id="d310935e66" headers="d310935e34 ">
                              <p><a href="oci-messaging-functions.html#GUID-94320321-ABD7-4FF1-9387-398490AE91C8" title="以指定语言打开消息处理工具。">OCIMessageOpen（）</a></p>
                           </td>
                           <td align="left" valign="top" width="41%" headers="d310935e66 d310935e37 ">
                              <p>以指定语言打开消息句柄</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <!-- class="inftblhruleinformal" -->
            </div><a id="LNOCI17691"></a><div class="props_rev_3"><a id="GUID-5C5A157D-1E44-4111-8158-0E7DE8CB599C" name="GUID-5C5A157D-1E44-4111-8158-0E7DE8CB599C"></a><h3 id="LNOCI-GUID-5C5A157D-1E44-4111-8158-0E7DE8CB599C" class="sect3"><span class="enumeration_section">31.7.1</span> OCIMessageClose（）</h3>
               <div>
                  <p>关闭消息句柄并释放与此句柄关联的所有内存。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-5C5A157D-1E44-4111-8158-0E7DE8CB599C__GUID-0302E8BE-DCDF-4B21-88E3-8B623493A4F0">目的</p>
                     <p>关闭消息句柄并释放与此句柄关联的所有内存。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5C5A157D-1E44-4111-8158-0E7DE8CB599C__GUID-AAF52657-4601-4267-A7E3-D6212EC1A23A">句法</p><pre class="oac_no_warn" dir="ltr">剑OCIMessageClose（void * hndl，OCIError * errhp，OCIMsg * msgh）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5C5A157D-1E44-4111-8158-0E7DE8CB599C__GUID-B2B27504-1896-494F-81AB-C33A1CD423ED">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-5C5A157D-1E44-4111-8158-0E7DE8CB599C__GUID-5D0F9A09-8D86-47B1-A501-504E33BE8662"><!-- --></a> hndl（IN / OUT）</dt>
                        <dd>
                           <p>指向OCI环境的指针或消息语言的用户会话句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5C5A157D-1E44-4111-8158-0E7DE8CB599C__GUID-B72C0F47-5899-4E73-8080-9BEF44D0AF87"><!-- --></a> errhp（输入/输出）</dt>
                        <dd>
                           <p>OCI错误句柄。如果有错误，则将其记录在<code class="codeph">errhp</code> ，并且该函数返回<code class="codeph">NULL</code>指针。可以通过调用<code class="codeph">OCIErrorGet()</code>获取诊断信息。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-5C5A157D-1E44-4111-8158-0E7DE8CB599C__GUID-3E86A0D7-23A0-4B3C-BA1B-B531B10D74A0"><!-- --></a> msgh（IN / OUT）</dt>
                        <dd>
                           <p>指向先前由<code class="codeph">OCIMessageOpen()</code>打开的消息句柄的指针。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5C5A157D-1E44-4111-8158-0E7DE8CB599C__GUID-5F175D52-76A7-4A1E-9DB1-EFF8B8391C66">返回</p>
                     <p><code class="codeph">OCI_SUCCESS</code> ; <code class="codeph">OCI_INVALID_HANDLE</code> ;或<code class="codeph">OCI_ERROR</code> 。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="oci-messaging-functions.html#GUID-94320321-ABD7-4FF1-9387-398490AE91C8" title="以指定语言打开消息处理工具。">OCIMessageOpen（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17692"></a><div class="props_rev_3"><a id="GUID-50AE92D5-A410-4E39-B87E-E816F24204CE" name="GUID-50AE92D5-A410-4E39-B87E-E816F24204CE"></a><h3 id="LNOCI-GUID-50AE92D5-A410-4E39-B87E-E816F24204CE" class="sect3"><span class="enumeration_section">31.7.2</span> OCIMessageGet（）</h3>
               <div>
                  <p>获取具有给定消息编号的消息。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-50AE92D5-A410-4E39-B87E-E816F24204CE__GUID-4467AD3C-1D9C-490E-89C1-A49BE115020D">目的</p>
                     <p>获取具有给定消息编号的消息。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50AE92D5-A410-4E39-B87E-E816F24204CE__GUID-BCD8969E-E84C-4CC8-B230-D76A7415D0C0">句法</p><pre class="oac_no_warn" dir="ltr">OraText * OCIMessageGet（OCIMsg * msgh，ub4 msgno，OraText * msgbuf，size_t buflen）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50AE92D5-A410-4E39-B87E-E816F24204CE__GUID-7D60F5EA-93AF-49EC-AA3E-FC11402C5271">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-50AE92D5-A410-4E39-B87E-E816F24204CE__GUID-1DC6D5D8-08C2-4D3A-9FF5-32A45D4B6ED0"><!-- --></a> msgh（IN / OUT）</dt>
                        <dd>
                           <p>指向先前由<code class="codeph">OCIMessageOpen()</code>打开的消息句柄的指针。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-50AE92D5-A410-4E39-B87E-E816F24204CE__GUID-A85F747C-0962-41E4-AA33-AC2F1BED3614"><!-- --></a> msgno（IN）</dt>
                        <dd>
                           <p>消息号。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-50AE92D5-A410-4E39-B87E-E816F24204CE__GUID-50FB8620-2E1F-4FCF-A85B-F1704CE38E27"><!-- --></a> msgbuf（OUT）</dt>
                        <dd>
                           <p>指向检索到的消息的目标缓冲区的指针。如果<code class="codeph">buflen</code>为零，则它可以是<code class="codeph">NULL</code>指针。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-50AE92D5-A410-4E39-B87E-E816F24204CE__GUID-A782126A-13D5-4AFF-A98C-4A74C25338C7"><!-- --></a> buflen（IN）</dt>
                        <dd>
                           <p>目标缓冲区的大小。</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50AE92D5-A410-4E39-B87E-E816F24204CE__GUID-2AEDDBD9-973D-48A8-8F9D-C16FFFC36176">评论</p>
                     <p>如果<code class="codeph">buflen</code>不为零，则该函数将消息复制到<code class="codeph">msgbuf</code>指向的缓冲区中。如果<code class="codeph">buflen</code>为零，则将消息复制到<code class="codeph">msgh</code>指向的消息句柄内的消息缓冲区中。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-50AE92D5-A410-4E39-B87E-E816F24204CE__GUID-A9BF0BBB-6713-4999-94C9-AEF2CE7D0D60">返回</p>
                     <p>它返回指向<code class="codeph">NULL</code> -terminated消息字符串的指针。如果找不到翻译的消息，则它会尝试返回等效的英语消息。如果找不到等效的英文消息，则返回<code class="codeph">NULL</code>指针。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="oci-messaging-functions.html#GUID-94320321-ABD7-4FF1-9387-398490AE91C8" title="以指定语言打开消息处理工具。">OCIMessageOpen（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17693"></a><div class="props_rev_3"><a id="GUID-94320321-ABD7-4FF1-9387-398490AE91C8" name="GUID-94320321-ABD7-4FF1-9387-398490AE91C8"></a><h3 id="LNOCI-GUID-94320321-ABD7-4FF1-9387-398490AE91C8" class="sect3"><span class="enumeration_section">31.7.3</span> OCIMessageOpen（）</h3>
               <div>
                  <p>以指定语言打开消息处理工具。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-94320321-ABD7-4FF1-9387-398490AE91C8__GUID-190D96B1-A64C-447A-95CE-CF99C34DA4EB">目的</p>
                     <p>以指定语言打开消息处理工具。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-94320321-ABD7-4FF1-9387-398490AE91C8__GUID-0C98C84C-61AD-4237-977A-065F3F2DC7B2">句法</p><pre class="oac_no_warn" dir="ltr">剑OCIMessageOpen（void * hndl，OCIError * errhp，OCIMsg * msghp，const OraText * product，const OraText * facility，OCIDuration dur）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-94320321-ABD7-4FF1-9387-398490AE91C8__GUID-00DAD2E0-95A9-4C72-83A5-49727B8E06D1">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-94320321-ABD7-4FF1-9387-398490AE91C8__GUID-F91F7F61-863E-4D3F-87F4-3BA64B41F589"><!-- --></a> hndl（IN / OUT）</dt>
                        <dd>
                           <p>指向OCI环境的指针或消息语言的用户会话句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-94320321-ABD7-4FF1-9387-398490AE91C8__GUID-F21055AF-D116-4A76-A81D-EF6D090207E0"><!-- --></a> errhp（输入/输出）</dt>
                        <dd>
                           <p>OCI错误句柄。如果有错误，则将其记录在<code class="codeph">errhp</code> ，并且该函数返回<code class="codeph">NULL</code>指针。可以通过调用<code class="codeph">OCIErrorGet()</code>获取诊断信息。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-94320321-ABD7-4FF1-9387-398490AE91C8__GUID-A8DFE542-AB65-4349-AC92-0700C06B257B"><!-- --></a> msghp（OUT）</dt>
                        <dd>
                           <p>返回的消息句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-94320321-ABD7-4FF1-9387-398490AE91C8__GUID-2BAB9D05-6929-452D-82D9-0B8947C7D601"><!-- --></a>产品（IN）</dt>
                        <dd>
                           <p>指向产品名称的指针。产品名称用于查找消息的目录。它的位置取决于操作系统。例如，在Solaris中， <code class="codeph">rdbms</code>产品的消息文件目录是<code class="codeph">$ORACLE_HOME/rdbms</code> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-94320321-ABD7-4FF1-9387-398490AE91C8__GUID-DDC8C598-2B10-42DE-9B2B-F7FB088EDEC1"><!-- --></a>设施（IN）</dt>
                        <dd>
                           <p>指向产品中设施名称的指针。它用于构造消息文件名。一个信息文件名遵循与转换<code class="codeph">facility</code>作为前缀。例如，美国语言中<code class="codeph">img</code>工具的消息文件名是<code class="codeph">imgus.msb</code> ，其中<code class="codeph">us</code>是美国语言的缩写， <code class="codeph">msb</code>是消息二进制文件扩展名。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-94320321-ABD7-4FF1-9387-398490AE91C8__GUID-3B93D572-9FE6-40EE-8A49-A7CBA2629DCD"><!-- --></a> dur（IN）</dt>
                        <dd>
                           <p>返回消息句柄的内存分配持续时间。它可以具有以下值：</p>
                        </dd>
                     </dl>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCI_DURATION_PROCESS</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_DURATION_SESSION</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_DURATION_STATEMENT</code></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-94320321-ABD7-4FF1-9387-398490AE91C8__GUID-3CFA4419-5C94-448E-B1FF-1BD313CBBB9D">评论</p>
                     <p><code class="codeph">OCIMessageOpen()</code>首先尝试打开与<code class="codeph">hndl</code>对应的消息文件。如果成功，则它使用该文件初始化消息句柄。如果找不到与该语言对应的消息文件，则它会查找主语言文件作为后备。例如，如果找不到拉丁美洲西班牙文件，则它会尝试打开西班牙文件。如果回退失败，则它使用默认消息文件，其语言为<code class="codeph">AMERICAN</code> 。该函数将指向消息句柄的指针返回到<code class="codeph">msghp</code>参数中。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-94320321-ABD7-4FF1-9387-398490AE91C8__GUID-2EC23DA8-4A1D-4CD8-B93A-9AD7C624197D">返回</p>
                     <p><code class="codeph">OCI_SUCCESS</code> ; <code class="codeph">OCI_INVALID_HANDLE</code> ;或<code class="codeph">OCI_ERROR</code> 。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
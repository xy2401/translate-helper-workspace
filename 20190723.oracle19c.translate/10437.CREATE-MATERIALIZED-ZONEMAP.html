<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>创建物质化的ZONEMAP</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Language Reference "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Language Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96310-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="CREATE-MATERIALIZED-VIEW-LOG.html" title="Previous" type="text/html"></link>
      <link rel="next" href="CREATE-OPERATOR.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference"></meta>
    <meta name="dcterms.isVersionOf" content="SQLRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="CREATE-MATERIALIZED-VIEW-LOG.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="CREATE-OPERATOR.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL语言参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="SQL-Statements-CREATE-LIBRARY-to-CREATE-SCHEMA.html" property="item" typeof="WebPage"><span property="name">SQL语句：CREATE LIBRARY以创建SCHEMA</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">创建物质化的ZONEMAP</li>
            </ol>
            <a id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702" name="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702"></a><a id="SQLRF56868"></a><a id="SQLRF56869"></a><a id="SQLRF56870"></a><a id="SQLRF56871"></a><a id="SQLRF56872"></a><a id="SQLRF56873"></a><a id="SQLRF56886"></a><a id="SQLRF56874"></a><a id="SQLRF56877"></a><a id="SQLRF56888"></a><a id="SQLRF56875"></a><a id="SQLRF56876"></a><a id="SQLRF56878"></a><a id="SQLRF56879"></a><a id="SQLRF56938"></a><a id="SQLRF56880"></a><a id="SQLRF56881"></a><a id="SQLRF56882"></a><a id="SQLRF56884"></a><a id="SQLRF56939"></a><a id="SQLRF56940"></a><a id="SQLRF56941"></a><a id="SQLRF56942"></a><a id="SQLRF56943"></a><a id="SQLRF56944"></a><a id="SQLRF56945"></a><a id="SQLRF56946"></a><a id="SQLRF56885"></a><a id="SQLRF56947"></a><a id="SQLRF56867"></a>
            
            <h2 id="SQLRF-GUID-1E5048FC-3D28-49BC-80FE-7871568B4702" class="sect2">创建物质化的ZONEMAP</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-4ECDEB02-88A0-4C9B-8286-835C5839272D">目的</p>
                  <p>使用<code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code>语句创建区域映射。
                  </p>
                  <p><span class="bold">区域</span> <span class="bold">图</span>是一种特殊类型的物化视图，用于存储有关区域的信息。<span class="bold">区域</span>是磁盘上的一组连续数据块，用于存储一个或多个表列的值。通常需要多个区域来存储表列的所有值。区域图跟踪存储在每个区域中的最小和最大表列值。
                  </p>
                  <p>区域映射使您可以降低表扫描的I / O和CPU成本。当SQL语句包含区域映射中的列的谓词时，数据库会将谓词值与存储在每个区域中的最小和最大表列值进行比较，以确定在SQL执行期间要读取的区域。</p>
                  <p>Oracle数据库支持以下类型的区域映射：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在单个表上定义<span class="bold">基本</span> <span class="bold">区域</span> <span class="bold">映射，</span>并维护该表中指定列的区域信息。
                        </p>
                        <p>您可以通过指定<span class="italic"><code class="codeph">create_zonemap_on_table</code></span>子句或指定<span class="italic"><code class="codeph">create_zonemap_as_subquery</code></span>子句来创建基本区域映射，其中定义子查询的<code class="codeph">FROM</code>子句指定单个表。
                        </p>
                     </li>
                     <li>
                        <p>在两个或多个连接表上定义<span class="bold">连接</span> <span class="bold">区域</span> <span class="bold">映射，</span>并维护任何连接表中指定列的区域信息。
                        </p>
                        <p>您可以通过指定<span class="italic"><code class="codeph">create_zonemap_as_subquery</code></span>子句来创建连接区域映射。定义子查询的<code class="codeph">FROM</code>子句必须指定一个表，该表与一个或多个其他表保持外部连接。
                        </p>
                     </li>
                  </ul>
                  <p>区域映射通常与数据仓库环境中的星型模式一起使用。但是，星型模式不是创建区域映射的必要条件。在任何一种情况下，此引用都使用星型模式术语来引用区域映射中的表。在连接区域映射中，连接的外部表称为<span class="bold">事实</span> <span class="bold">表</span> ，与此表连接的<span class="bold">表</span>称为<span class="bold">维度</span> <span class="bold">表</span> 。这些表统称为区域映射的<span class="bold">基</span> <span class="bold">表</span> 。在基本区域映射中，定义区域映射的单个表称为区域映射的事实表和基表。
                  </p>
                  <p>区域映射的基表可以是分区表或复合分区表。在这种情况下，区域映射为每个分区（和子分区）以及每个区域维护最小和最大列值。</p>
                  <p>您可以创建区域映射以使用或不使用属性聚类：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>要创建用于属性群集的区域映射，请使用以下任一方法：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code>语句并在区域映射中包含属性聚簇列。请参阅<span class="italic"><a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__CEGIDCDI">attribute_clustering_clause</a></span>的<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>和<span class="italic"><a href="ALTER-TABLE.html#GUID-552E7373-BF93-477D-9DA3-B2C9386F2877__CIHFJJFI">attribute_clustering_clause</a></span>的条款<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>获取更多信息。
                              </p>
                           </li>
                           <li>
                              <p>在创建或修改属性聚簇表时指定<code class="codeph">WITH</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code>子句。有关更多信息，请参阅<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>的<span class="italic"><a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__CEGDJAGF">zonemap_clause</a></span>和<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>的<a href="ALTER-TABLE.html#GUID-552E7373-BF93-477D-9DA3-B2C9386F2877__CIHGEACD">MODIFY</a> <span class="italic"><a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__CEGDJAGF">CLUSTERING</a></span>子句。
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>要创建区域映射以供使用而不使用属性集群，请使用<code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code>语句并在区域映射中包含非属性集群的列。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-8331187C-B5D5-4064-B70D-CE35AE446193">
                     <p class="notep1">也可以看看：</p>
                     <p>有关区域映射的详细信息，请<a href="../dwhsg/index.html" target="_blank"><span class="italic">参见“Oracle数据库数据仓库指南”</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__CACECGEF">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-D635E12D-3252-4861-8E36-60FA5BA365E1">先决条件</p>
                  <p>要<span class="bold">在您自己的架构中</span>创建区域映射<span class="bold">：</span></p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您必须具有<code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>系统特权以及<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>或<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>系统特权。
                        </p>
                     </li>
                     <li>
                        <p>您必须能够访问您不拥有的区域映射的任何基表，方法是通过每个表的<code class="codeph">READ</code>或<code class="codeph">SELECT</code>对象特权，或者通过<code class="codeph">READ</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>或<code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>系统特权。
                        </p>
                     </li>
                  </ul>
                  <p>要<span class="bold">在另一个用户的架构中</span>创建区域映射<span class="bold">：</span></p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您必须具有<code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>系统特权。
                        </p>
                     </li>
                     <li>
                        <p>区域映射的所有者必须具有<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>系统特权。所有者还必须能够访问模式所有者不拥有的区域映射的任何基表，或者通过每个表的<code class="codeph">READ</code>或<code class="codeph">SELECT</code>对象特权，或者通过<code class="codeph">READ</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>或<code class="codeph">SELECT</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>系统特权。
                        </p>
                     </li>
                  </ul>
                  <p>要创建刷新提交区域映射（ <code class="codeph">REFRESH</code> <code class="codeph">ON</code> <code class="codeph">COMMIT</code>子句），除了前面的特权之外，您必须对您不拥有的任何基表具有<code class="codeph">ON</code> <code class="codeph">COMMIT</code> <code class="codeph">REFRESH</code>对象特权，或者您必须具有<code class="codeph">ON</code> <code class="codeph">COMMIT</code> <code class="codeph">REFRESH</code>系统特权。与物化视图不同，即使基表上没有物化视图日志，也可以创建刷新提交区域映射。
                  </p>
                  <p>创建区域映射时，Oracle数据库会在区域映射的架构中创建一个内部表和至少一个索引。Oracle数据库使用这些对象来维护区域映射数据。您必须具有创建这些对象所需的特权，并且您必须在目标表空间中有足够的配额来存储这些对象，或者您必须具有<code class="codeph">UNLIMITED</code> <code class="codeph">TABLESPACE</code>系统特权。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-19457C1D-CFC8-4D1D-9D0C-2F46E807627A">句法</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-6D2C23A8-A05A-437F-BC76-CFEFF8AEDF61"><span class="italic">create_materialized_zonemap</span> :: =</p>
                  <div class="figure" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-33701F6B-9FB1-4ED4-A9D1-B6764C83598E"><img src="img/create_materialized_zonemap.gif" alt="下面是create_materialized_zonemap.eps的描述" title="下面是create_materialized_zonemap.eps的描述" longdesc="img_text/create_materialized_zonemap.html"><br><a href="img_text/create_materialized_zonemap.html">插图描述create_materialized_zonemap.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-957066EA-FECA-4CBA-A24D-211CBFE63DAC"><span class="italic">create_zonemap_on_table</span> :: =</p>
                  <div class="figure" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-7D3315BF-5260-4EFD-B251-251DA2B32B9C"><img src="img/create_zonemap_on_table.gif" alt="下面是create_zonemap_on_table.eps的描述" title="下面是create_zonemap_on_table.eps的描述" longdesc="img_text/create_zonemap_on_table.html"><br><a href="img_text/create_zonemap_on_table.html">说明create_zonemap_on_table.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-95A94D92-F6AB-40B4-9711-F71C73ABA049"><span class="italic">create_zonemap_as_subquery</span> :: =</p>
                  <div class="figure" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-E36B94DD-84EB-46D4-A91F-DFBAB224841B"><img src="img/create_zonemap_as_subquery.gif" alt="下面是create_zonemap_as_subquery.eps的描述" title="下面是create_zonemap_as_subquery.eps的描述" longdesc="img_text/create_zonemap_as_subquery.html"><br><a href="img_text/create_zonemap_as_subquery.html">说明create_zonemap_as_subquery.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-6E21C8DE-7667-4A46-9FD8-1EAB0D447143"><span class="italic">zonemap_attributes</span> :: =</p>
                  <div class="figure" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-0DC61354-39AE-465F-AF54-2BEDB759FB07"><img src="img/zonemap_attributes.gif" alt="下面是zonemap_attributes.eps的说明" title="下面是zonemap_attributes.eps的说明" longdesc="img_text/zonemap_attributes.html"><br><a href="img_text/zonemap_attributes.html">插图说明zonemap_attributes.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-7F754CF6-A50E-472F-9F8F-539A0DBAA730"><span class="italic">zonemap_refresh_clause</span> :: =</p>
                  <div class="figure" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-E7973BF2-8022-483F-9938-29BA82BEFAEA"><img src="img/zonemap_refresh_clause.gif" alt="zonemap_refresh_clause.eps的描述如下" title="zonemap_refresh_clause.eps的描述如下" longdesc="img_text/zonemap_refresh_clause.html"><br><a href="img_text/zonemap_refresh_clause.html">插图说明zonemap_refresh_clause.eps</a></div>
                  <!-- class="figure" -->
                  <div class="infoboxnote" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-35CA59B3-CEDE-4E2D-B2C7-4AB29C0787FE">
                     <p class="notep1">注意：</p>
                     <p>指定<span class="italic"><code class="codeph">zonemap_refresh_clause</code></span> ，必须在<code class="codeph">REFRESH</code>关键字后指定至少一个子句。
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-A7B1C367-8080-48B8-9395-25EA76684493">语义</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-87F05393-524C-41BD-A763-A10119116694"><span class="italic">create_zonemap_on_table</span></p>
                  <p>使用此子句可以创建基本区域映射。</p>
                  <p><span class="bold">关于条款</span></p>
                  <p>在<code class="codeph">ON</code>子句中，首先为区域映射指定事实表，然后在括号内指定要包含在区域映射中的事实表的一个或多个列。
                  </p>
                  <p>对于每个指定的事实表<span class="italic"><code class="codeph">column</code></span> ，Oracle在区域映射中创建两列。这两列包含每个区域中事实表列的最小值和最大值。甲骨文生成用于形式的分区图的列名<code class="codeph">MIN_1_</code> <span class="italic"><code class="codeph">column</code></span>和<code class="codeph">MAX_1_</code> <span class="italic"><code class="codeph">column</code></span>为第一指定事实表<span class="italic"><code class="codeph">column</code></span> ， <code class="codeph">MIN_2_</code> <span class="italic"><code class="codeph">column</code></span>和<code class="codeph">MAX_2_</code> <span class="italic"><code class="codeph">column</code></span>为第二指定事实表<span class="italic"><code class="codeph">column</code></span> ，依此类推。
                  </p>
                  <p>如果省略<span class="italic"><code class="codeph">schema</code></span> ，则Oracle假定事实表在您自己的模式中。事实表可以是表格或物化视图</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-B5F4646C-5EE6-4CEF-9A4A-3016FC5F10CA"><span class="italic">create_zonemap_as_subquery</span></p>
                  <p>使用此子句可以创建基本区域映射或连接区域映射。要创建基本区域映射，请在定义子查询的<code class="codeph">FROM</code>子句中指定单个基表。要创建连接区域映射，请指定一个表，该表外部连接到定义子查询的<code class="codeph">FROM</code>子句中的一个或多个其他表。
                  </p>
                  <p><span class="bold"><span class="italic">column_alias</span></span></p>
                  <p>您可以为要包含在区域映射中的每个表列指定列别名。列别名列表显式解决了任何列名冲突，无需在定义子查询的<code class="codeph">SELECT</code>列表中指定别名。如果在此子句中指定任何列别名，则必须为定义子查询的<code class="codeph">SELECT</code>列表中的每个列指定别名。您指定的第一列别名必须是<code class="codeph">ZONE_ID$</code> ，它对应于<code class="codeph">SELECT</code>列表中的第一列<code class="codeph">SYS_OP_ZONE_ID</code>函数表达式。
                  </p>
                  <p><span class="bold">AS</span> <span class="bold"><span class="italic">query_block</span></span></p>
                  <p>指定区域映射的定义子查询。子查询必须由单个<span class="italic"><code class="codeph">query_block</code></span> 。您只能指定<span class="italic"><code class="codeph">query_block</code></span>的<code class="codeph">SELECT</code> ， <code class="codeph">FROM</code> ， <code class="codeph">WHERE</code>和<code class="codeph">GROUP</code> <code class="codeph">BY</code>子句，并且这些子句必须满足以下要求：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">SELECT</code>列表中的第一列必须是<code class="codeph">SYS_OP_ZONE_ID</code>函数表达式。有关更多信息，请参阅<a href="SYS_OP_ZONE_ID.html#GUID-947900CE-F4E0-43B5-B30C-4FDDA3913F17">SYS_OP_ZONE_ID</a> 。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">SELECT</code>列表中的其余列必须是函数表达式，这些函数表达式返回要包含在区域映射中的列的最小值和最大值。对于每列，请指定以下形式的一对函数表达式：</p><pre class="oac_no_warn" dir="ltr">MIN（[ <span class="italic">table</span> 。] <span class="italic">列</span> ），MAX（[ <span class="italic">table</span> 。] <span class="italic">列</span> ）</pre><p>对于<span class="italic"><code class="codeph">table</code></span> ，请指定包含该列的表的名称或表别名。该表可以是事实表或维度表。对于<span class="italic"><code class="codeph">column</code></span> ，请指定<span class="italic"><code class="codeph">column</code></span>的名称或列别名。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">FROM</code>子句可以单独指定一个事实表，也可以指定一个事实表和一个或多个维表，每个维表左外连接到事实表。您可以在<code class="codeph">FROM</code>子句中指定<code class="codeph">LEFT</code> <code class="codeph">[OUTER]</code> <code class="codeph">JOIN</code>语法，或者在<code class="codeph">WHERE</code>子句的连接条件中将外连接运算符（+）应用于维表列。您可以选择为<code class="codeph">FROM</code>子句中的任何表指定表别名。事实表和维度表可以是表格或物化视图。
                        </p>
                     </li>
                     <li>
                        <p>在<code class="codeph">WHERE</code>子句中，您可以使用外部联接运算符（+）仅指定左外部联接条件。
                        </p>
                     </li>
                     <li>
                        <p>必须使用为<code class="codeph">SELECT</code>列表的第一列指定的相同<code class="codeph">SYS_OP_ZONE_ID</code>函数表达式指定<code class="codeph">GROUP</code> <code class="codeph">BY</code>子句。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-88272DE3-A721-440B-BAF6-C01086DFEB02"><span class="italic">模式</span></p>
                  <p>指定要包含区域映射的架构。如果省略<span class="italic"><code class="codeph">schema</code></span> ，则Oracle数据库会在模式中创建区域映射。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-48650BBD-B2F9-4400-8BB4-84A900A7EFAC"><span class="italic">zonemap_name</span></p>
                  <p>指定要创建的区域映射的名称。该名称必须满足<span class="q">“ <a href="Database-Object-Names-and-Qualifiers.html#GUID-75337742-67FD-4EC0-985F-741C93D918DA">数据库对象命名规则</a> ”中</span>列出的要求。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-B1DEF4D7-B40B-441C-BE38-F599759AEADC"><span class="italic">zonemap_attributes</span></p>
                  <p>使用此子句为区域映射指定以下属性： <code class="codeph">TABLESPACE</code> ， <code class="codeph">SCALE</code> ， <code class="codeph">PCTFREE</code> ， <code class="codeph">PCTUSED</code>和<code class="codeph">CACHE</code>或<code class="codeph">NOCACHE</code> 。</p>
                  <p><span class="bold">TABLESPACE</span></p>
                  <p>指定要在其中创建区域映射的<span class="italic"><code class="codeph">tablespace</code></span> 。如果省略此子句，则Oracle数据库会在包含区域映射的架构的默认表空间中创建区域映射。
                  </p>
                  <p id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__CACFGGDJ"><span class="bold">规模</span></p>
                  <p>此子句允许您指定区域映射比例，该比例确定形成区域的连续磁盘块的数量。标度是一个整数值，表示2的幂。例如，10的等级意味着最多2个被提升到10次幂，或者1024个连续的磁盘块将形成一个区域。对于<span class="italic"><code class="codeph">integer</code></span> ，请指定介于4和16之间的值（包括4和16）。建议值为10;这是默认值。
                  </p>
                  <p id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__CACDIEDG"><span class="bold">PCTFREE</span></p>
                  <p>指定一个<span class="italic"><code class="codeph">integer</code></span>表示区域映射的每个数据块中的空间百分比，为将来更新区域映射的行而保留。整数值必须介于0和99之间（包括0和99）。默认值为10。有关<code class="codeph">PCTFREE</code>参数的更多信息，请参阅<span class="italic"><a href="physical_attributes_clause.html#GUID-A15063A9-3237-43D3-B0AE-D01F6E80B393">physical_attributes_clause</a></span> 。
                  </p>
                  <p id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__CACJGFEF"><span class="bold">PCTUSED</span></p>
                  <p>指定一个<span class="italic"><code class="codeph">integer</code></span>表示Oracle为区域映射的每个数据块维护的已用空间的最小百分比。整数值必须介于0和99之间（包括0和99）。默认值为40。有关<code class="codeph">PCTUSED</code>参数的更多信息，请参阅<span class="italic"><a href="physical_attributes_clause.html#GUID-A15063A9-3237-43D3-B0AE-D01F6E80B393">physical_attributes_clause</a></span> 。
                  </p>
                  <p id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__CACIGEHI"><span class="bold">CACHE | NOCACHE</span></p>
                  <p>对于将频繁访问的数据， <code class="codeph">CACHE</code>指定在执行全表扫描时，为此区域映射检索的块放置在缓冲区高速缓存中最近最少使用（LRU）列表的最近使用的末尾。
                  </p>
                  <p><code class="codeph">NOCACHE</code>指定将块放置在LRU列表的最近最少使用的末尾。默认值为<code class="codeph">NOCACHE</code> 。</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__CACBDIJH">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-69785C68-079A-415F-AFCB-6E79A66A205B"><span class="italic">zonemap_refresh_clause</span></p>
                  <p>使用此子句指定区域映射的默认刷新方法和模式。如果未指定刷新方法（ <code class="codeph">FAST</code> ， <code class="codeph">COMPLETE</code>或<code class="codeph">FORCE</code> ），则<code class="codeph">FORCE</code>是默认方法。如果未指定刷新模式（ <code class="codeph">ON</code>子句），则<code class="codeph">ON</code> <code class="codeph">LOAD</code> <code class="codeph">DATA</code> <code class="codeph">MOVEMENT</code>是默认模式。
                  </p>
                  <p><span class="bold">快速</span></p>
                  <p>指定<code class="codeph">FAST</code>以指示快速刷新方法，该方法根据基表发生的更改执行刷新。虽然区域映射在内部实现为一种物化视图，但不需要基表上的物化视图日志来快速刷新区域映射</p>
                  <p><span class="bold">完成</span></p>
                  <p>指定<code class="codeph">COMPLETE</code>以指示完整的刷新方法，该方法通过执行区域映射的定义查询来实现。如果您请求完全刷新，则即使可以快速刷新，Oracle数据库也会执行完全刷新。
                  </p>
                  <p><span class="bold">力</span></p>
                  <p>指定<code class="codeph">FORCE</code>以指示在发生刷新时，Oracle数据库将在可能的情况下执行快速刷新，或者如果无法快速刷新则执行完全刷新。这是默认值。
                  </p>
                  <p id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__CACFCGJJ"><span class="bold">一经请求</span></p>
                  <p>指定<code class="codeph">ON</code> <code class="codeph">DEMAND</code>以指示数据库不会刷新区域映射，除非您手动发出<code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code> ...<code class="codeph">REBUILD</code>声明。如果指定此子句，则区域映射称为按需刷新区域映射。有关重建区域图的更多信息，请参阅<code class="codeph">ALTER</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">ZONEMAP</code>文档中的<a href="ALTER-MATERIALIZED-ZONEMAP.html#GUID-9330FD16-28B6-4B22-8205-FF59AF250C1A__BGBHEFFI">REBUILD</a> 。
                  </p>
                  <p><span class="bold">ON COMMIT</span></p>
                  <p>指定<code class="codeph">ON</code> <code class="codeph">COMMIT</code>以指示只要数据库提交对区域映射的基表进行操作的事务，就会发生刷新。如果指定此子句，则区域映射称为刷新提交区域映射。此子句可能会增加完成提交所需的时间，因为数据库会在提交过程中执行刷新操作。
                  </p>
                  <p><span class="bold">负载</span></p>
                  <p>指定<code class="codeph">ON</code> <code class="codeph">LOAD</code>以指示在<code class="codeph">INSERT</code>或<code class="codeph">MERGE</code>操作导致的直接路径插入（串行或并行）结束时进行刷新。
                  </p>
                  <p><span class="bold">关于数据运动</span></p>
                  <p>指定<code class="codeph">ON</code> <code class="codeph">DATA</code> <code class="codeph">MOVEMENT</code>以指示在以下数据移动操作结束时进行刷新：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>使用<code class="codeph">DBMS_REDEFINITION</code>包重新定义<code class="codeph">DBMS_REDEFINITION</code></p>
                     </li>
                     <li>
                        <p>由<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>的以下子句指定的表分区维护操作： <span class="italic"><code class="codeph">coalesce_table</code></span> ， <span class="italic"><code class="codeph">merge_table_partitions</code></span> ， <span class="italic"><code class="codeph">move_table_partition</code></span>和<span class="italic"><code class="codeph">split_table_partition</code></span></p>
                     </li>
                  </ul>
                  <p><span class="bold">关于负载数据移动</span></p>
                  <p>指定<code class="codeph">ON</code> <code class="codeph">LOAD</code> <code class="codeph">DATA</code> <code class="codeph">MOVEMENT</code>以指示在直接路径插入或数据移动操作结束时进行刷新。这是默认值。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__CACEAADH">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-3743570F-B8CB-4353-81D6-29DE95A408CF">ENABLE |禁止修剪</p>
                  <p>此子句允许您控制区域映射的使用以进行修剪。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>指定<code class="codeph">ENABLE</code> <code class="codeph">PRUNING</code>以启用区域映射以进行修剪。这是默认值。
                        </p>
                     </li>
                     <li>
                        <p>指定<code class="codeph">DISABLE</code> <code class="codeph">PRUNING</code>以禁用区域映射以进行修剪。优化器不会使用区域映射进行修剪，但数据库将继续维护区域映射。
                        </p>
                     </li>
                  </ul>
                  <p>如果设置为<code class="codeph">ENABLE</code> <code class="codeph">PRUNING</code> ，则优化程序将考虑在包含以下任何条件的SQL操作期间使用区域映射进行修剪：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>比较条件： <code class="codeph">=</code> ， <code class="codeph">&lt;=</code> ， <code class="codeph">&lt;</code> ， <code class="codeph">&gt;=</code> ， <code class="codeph">&gt;</code></p>
                        <p>条件必须是一个简单的比较条件，一边是列名，另一边是文字或绑定变量。例如：</p><pre class="oac_no_warn" dir="ltr">WHERE country_name ='美利坚合众国'WHERE country_name =：country1 WHERE 10000&gt; =薪水</pre></li>
                     <li>
                        <p><code class="codeph">IN</code>条件</p>
                        <p><code class="codeph">IN</code>条件必须在左侧具有列名称，在右侧具有文字或绑定变量的表达式列表。例如：</p><pre class="oac_no_warn" dir="ltr">WHERE country_name IN（'德国'，'印度'，'英国'）WHERE country_name IN（：country1，：country2，：country3）WHERE prod_id IN（20,48,132,143）</pre></li>
                     <li>
                        <p><code class="codeph">LIKE</code>条件</p>
                        <p><code class="codeph">LIKE</code>条件左侧必须有列名，右侧必须有文本文字。文本文字是<code class="codeph">LIKE</code>条件的模式，它必须包含至少一个模式匹配字符。有效的模式匹配字符是下划线（ <code class="codeph">_</code> ），它只匹配一个字符，百分号（ <code class="codeph">%</code> ），匹配零个或多个字符。模式的第一个字符不能是模式匹配字符。例如：</p><pre class="oac_no_warn" dir="ltr">WHERE prod_name LIKE'DVD％'WHERE prod_name LIKE'Model％Cordless％Battery'WHER prod_name LIKE'CD％Pack of _'</pre></li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-4BAA03E2-EA4D-4D3E-AA16-A27EB4482EF7">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="Conditions.html#GUID-C2E3ED44-16E7-4924-9125-E1693B1022A8">有关条件</a>的更多信息的条件</p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-F8C924ED-3C0D-47F8-B1EA-E92A006A4E18">区域地图的限制</p>
                  <p>区域地图受以下限制：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>表可以是最多一个区域映射的事实表。表可以是多个区域映射的维度表。表可以是一个区域映射的事实表，也可以是其他区域映射的维度表。</p>
                     </li>
                     <li>
                        <p>区域映射的基表不能是外部表，索引组织表，远程表，临时表或视图。</p>
                     </li>
                     <li>
                        <p>区域映射的基表不能位于用户<code class="codeph">SYS</code>的模式中。</p>
                     </li>
                     <li>
                        <p>区域地图无法分区。</p>
                     </li>
                     <li>
                        <p>您可以在除<code class="codeph">BFILE</code> ， <code class="codeph">BLOB</code> ， <code class="codeph">CLOB</code> ， <code class="codeph">LONG</code> ， <code class="codeph">LONG</code> <code class="codeph">RAW</code>或<code class="codeph">NCLOB</code>之外的任何标量数据类型的列上定义区域映射。</p>
                     </li>
                     <li>
                        <p>区域映射的定义子查询中指定的所有连接必须留在外部等值连接，左侧是事实表。</p>
                     </li>
                     <li>
                        <p>如果区域映射的定义子查询的<code class="codeph">FROM</code>子句引用实例化视图，则必须在刷新区域映射之前刷新该实例化视图。
                        </p>
                     </li>
                     <li>
                        <p>您无法直接在区域地图上执行DML操作。</p>
                     </li>
                     <li>
                        <p>区域映射的每列必须具有以下声明的归类之一： <code class="codeph">BINARY</code>或<code class="codeph">USING_NLS_COMP</code> 。</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-1E5048FC-3D28-49BC-80FE-7871568B4702__GUID-999F9887-6C82-4432-8ADF-E129BDD020A4">例子</p>
                  <p>以下语句创建名为<code class="codeph">sales_zmap</code>的基本区域映射。区域映射跟踪表<code class="codeph">sales</code>中的<code class="codeph">cust_id</code>和<code class="codeph">prod_id</code>列。
                  </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED ZONEMAP sales_zmap ON sales（cust_id，prod_id）;</pre><p>以下语句创建一个名为<code class="codeph">sales_zmap</code>的基本区域映射，该映射类似于上一示例中创建的区域映射。但是，此语句使用定义子查询来创建区域映射。
                  </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED ZONEMAP sales_zmap AS SELECT SYS_OP_ZONE_ID（rowid），MIN（cust_id），MAX（cust_id），MIN（prod_id），MAX（prod_id）FROM sales GROUP BY SYS_OP_ZONE_ID（rowid）;</pre><p>以下语句创建名为<code class="codeph">sales_zmap</code>的连接区域映射。区域映射的事实表是<code class="codeph">sales</code> ，区域映射具有一个维度表： <code class="codeph">customers</code> 。区域映射跟踪维度表中的两列： <code class="codeph">cust_state_province</code>和<code class="codeph">cust_city</code> 。
                  </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED ZONEMAP sales_zmap AS SELECT SYS_OP_ZONE_ID（s.rowid），MIN（cust_state_province），MAX（cust_state_province），MIN（cust_city），MAX（cust_city）FROM sales s LEFT OUTER JOIN customers c ON s.cust_id = c.cust_id GROUP BY SYS_OP_ZONE_ID（s.rowid）;</pre><p>以下语句创建名为<code class="codeph">sales_zmap</code>的连接区域映射。区域映射的事实表是<code class="codeph">sales</code> ，区域映射具有两个维度表： <code class="codeph">products</code>和<code class="codeph">customers</code> 。分区图跟踪维度表五列： <code class="codeph">prod_category</code>和<code class="codeph">prod_subcategory</code>在<code class="codeph">products</code>表， <code class="codeph">country_id</code> ， <code class="codeph">cust_state_province</code> ，并且<code class="codeph">cust_city</code>在<code class="codeph">customers</code>表。
                  </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED ZONEMAP sales_zmap AS SELECT SYS_OP_ZONE_ID（s.rowid），MIN（prod_category），MAX（prod_category），MIN（prod_subcategory），MAX（prod_subcategory），MIN（country_id），MAX（country_id），MIN（cust_state_province），MAX（ cust_state_province），MIN（cust_city），MAX（cust_city）FROM sales s LEFT OUTER JOIN products p ON s.prod_id = p.prod_id LEFT OUTER JOIN customers c ON s.cust_id = c.cust_id GROUP BY sys_op_zone_id（s.rowid）;</pre><p>以下语句创建的连接区域映射与上一示例中创建的区域映射相同。唯一的区别是前面的示例在<code class="codeph">FROM</code>子句中使用<code class="codeph">LEFT</code> <code class="codeph">OUTER</code> <code class="codeph">JOIN</code>语法，以下示例在<code class="codeph">WHERE</code>子句中使用外部<code class="codeph">FROM</code>运算符（+）。
                  </p><pre class="oac_no_warn" dir="ltr">CREATE MATERIALIZED ZONEMAP sales_zmap AS SELECT SYS_OP_ZONE_ID（s.rowid），MIN（prod_category），MAX（prod_category），MIN（prod_subcategory），MAX（prod_subcategory），MIN（country_id），MAX（country_id），MIN（cust_state_province），MAX（ cust_state_province），MIN（cust_city），MAX（cust_city）FROM sales s，products p，customers c WHERE s.prod_id = p.prod_id（+）AND s.cust_id = c.cust_id（+）GROUP BY sys_op_zone_id（s.rowid ）;</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
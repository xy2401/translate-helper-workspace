<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="After you develop your application, you can install it on other databases, called deployment environments, where other users can run it."></meta>
      <meta name="description" content="After you develop your application, you can install it on other databases, called deployment environments, where other users can run it."></meta>
      <title>部署Oracle数据库应用程序</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="2 Day Developer&#39;s Guide "></meta>
      <meta property="og:description" content="After you develop your application, you can install it on other databases, called deployment environments, where other users can run it."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="2 Day Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="2-day-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-10T13:00:30-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E94801-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="developing-simple-database-application.html" title="Previous" type="text/html"></link>
      <link rel="next" href="book-index.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="2 Day Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="TDDDG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="developing-simple-database-application.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="book-index.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">2天开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">部署Oracle数据库应用程序</li>
            </ol>
            <a id="GUID-3EC7DEF5-3FF2-47C7-A18F-E11DAC206BE5" name="GUID-3EC7DEF5-3FF2-47C7-A18F-E11DAC206BE5"></a><a id="TDDDG70000"></a>
            
            <h2 id="TDDDG-GUID-3EC7DEF5-3FF2-47C7-A18F-E11DAC206BE5" class="sect2"><span class="enumeration_chapter">10</span>部署Oracle数据库应用程序</h2>
         </header>
         <div class="ind">
            <div>
               <p>开发应用程序后，可以将其安装在其他用户可以运行的其他数据库（称为部署环境）上。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="deploying-database-application.html#GUID-1DBF5E7D-1294-4C7B-BC69-5728ECB10CF5">关于开发和部署环境</a><br>您开发应用程序的数据库称为<strong class="term">开发环境</strong> 。开发应用程序后，您可以将其安装在其他用户可以运行的其他数据库（称为<strong class="term">部署环境</strong> ）上。
                  </li>
                  <li class="ulchildlink"><a href="deploying-database-application.html#GUID-EA334D38-81D1-4B06-B272-08EDFE50A424">关于安装脚本</a><br><strong class="term">安装脚本</strong>可以包含创建应用程序所需的所有SQL语句，也可以是运行其他脚本的<strong class="term">主</strong>脚本。
                  </li>
                  <li class="ulchildlink"><a href="deploying-database-application.html#GUID-E40F78EB-0D1D-4FE4-9F01-615A917585C3">创建安装脚本</a><br>您可以在SQL Developer或文本编辑器中创建安装脚本。
                  </li>
                  <li class="ulchildlink"><a href="deploying-database-application.html#GUID-25097EF6-B6FB-408E-BA38-2681C99D10AA">部署示例应用程序</a><br>您可以使用安装脚本部署示例应用程序。
                  </li>
                  <li class="ulchildlink"><a href="deploying-database-application.html#GUID-F2BDB974-026B-4746-A68E-C83239A785A1">检查安装的有效性</a><br>在部署环境中安装应用程序后，可以使用SQL Developer检查其有效性。
                  </li>
                  <li class="ulchildlink"><a href="deploying-database-application.html#GUID-2343DECE-C394-4668-849C-434BE385D92B">存档安装脚本</a><br>在验证应用程序的安装是否有效后，Oracle建议您将安装脚本存档在源代码控制系统中。
                  </li>
               </ul>
            </div>
            <a id="TDDDG72000"></a><div class="props_rev_3"><a id="GUID-1DBF5E7D-1294-4C7B-BC69-5728ECB10CF5" name="GUID-1DBF5E7D-1294-4C7B-BC69-5728ECB10CF5"></a><h3 id="TDDDG-GUID-1DBF5E7D-1294-4C7B-BC69-5728ECB10CF5" class="sect3"><span class="enumeration_section">10.1</span>关于开发和部署环境</h3>
               <div>
                  <p>您开发应用程序的数据库称为<strong class="term">开发环境</strong> 。开发应用程序后，您可以将其安装在其他用户可以运行的其他数据库（称为<strong class="term">部署环境</strong> ）上。
                  </p>
                  <p>第一个部署环境是<strong class="term">测试环境</strong> 。在测试环境中，您可以彻底测试应用程序的功能，确定其是否正确构建，并在将其部署到<strong class="term">生产环境</strong>之前解决任何问题。
                  </p>
                  <p>您也可以在将应用程序部署到生产环境之前或之后将其部署到<strong class="term">教育</strong>环境。教育环境为用户提供了练习运行应用程序的位置，而不会影响其他环境。
                  </p>
                  <p>如果组织中不存在所需的部署环境，则可以创建它们。</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="deploying-database-application.html#GUID-3EC7DEF5-3FF2-47C7-A18F-E11DAC206BE5" title="开发应用程序后，可以将其安装在其他用户可以运行的其他数据库（称为部署环境）上。">部署Oracle数据库应用程序</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TDDDG99980"></a><div class="props_rev_3"><a id="GUID-EA334D38-81D1-4B06-B272-08EDFE50A424" name="GUID-EA334D38-81D1-4B06-B272-08EDFE50A424"></a><h3 id="TDDDG-GUID-EA334D38-81D1-4B06-B272-08EDFE50A424" class="sect3"><span class="enumeration_section">10.2</span>关于安装脚本</h3>
               <div>
                  <p><strong class="term">安装脚本</strong>可以包含创建应用程序所需的所有SQL语句，也可以是运行其他脚本的<strong class="term">主</strong>脚本。
                  </p>
                  <p><strong class="term">脚本</strong>是名称以<code class="codeph">.sql</code>结尾的文件中的一系列SQL语句（例如，create_app.sql）。在SQL * Plus或SQL Developer等客户端程序中运行脚本时，SQL语句按脚本中出现的顺序运行。其SQL语句创建应用程序的<strong class="term">脚本</strong>称为<strong class="term">安装脚本</strong> 。
                  </p>
                  <p>要部署应用程序，请在部署环境中运行一个或多个安装脚本。对于新应用程序，您必须创建安装脚本。对于较旧的应用程序，安装脚本可能存在，但如果不存在，则可以创建它们。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="deploying-database-application.html#GUID-DBA580A8-4AD1-41A2-92DB-F0ECD4879493">关于DDL语句和模式对象依赖项</a><br>安装脚本包含用于创建模式对象的DDL语句，以及可选的<span class="keyword">INSERT</span>语句，用于将数据加载到DDL语句创建的表中。要正确创建安装脚本并以正确的顺序运行多个安装脚本，您必须了解应用程序的架构对象之间的依赖关系。
                     </li>
                     <li class="ulchildlink"><a href="deploying-database-application.html#GUID-7C87F532-9F81-4234-9E21-60B12F7A91CE">关于INSERT语句和约束</a><br>运行包含<span class="keyword">INSERT</span>语句的安装脚本时，必须确定在将源表（在开发环境中）中的数据插入部署环境中的新表时是否可能违反约束。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="deploying-database-application.html#GUID-3EC7DEF5-3FF2-47C7-A18F-E11DAC206BE5" title="开发应用程序后，可以将其安装在其他用户可以运行的其他数据库（称为部署环境）上。">部署Oracle数据库应用程序</a></p>
                     </div>
                  </div>
               </div>
               <a id="TDDDG99943"></a><div class="props_rev_3"><a id="GUID-DBA580A8-4AD1-41A2-92DB-F0ECD4879493" name="GUID-DBA580A8-4AD1-41A2-92DB-F0ECD4879493"></a><h4 id="TDDDG-GUID-DBA580A8-4AD1-41A2-92DB-F0ECD4879493" class="sect4"><span class="enumeration_section">10.2.1</span>关于DDL语句和模式对象依赖关系</h4>
                  <div>
                     <p>安装脚本包含用于创建模式对象的DDL语句，以及可选的<span class="keyword">INSERT</span>语句，用于将数据加载到DDL语句创建的表中。要正确创建安装脚本并以正确的顺序运行多个安装脚本，您必须了解应用程序的架构对象之间的依赖关系。
                     </p>
                     <p>如果对象A的定义引用对象B，则A依赖于B.因此，必须在创建A之前创建B.否则，创建B的语句将失败或创建处于无效状态的B，具体取决于对象类型。</p>
                     <p>对于复杂的应用程序，创建对象的顺序很少显而易见。通常，您必须咨询数据库设计人员或设计图表。</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-DBA580A8-4AD1-41A2-92DB-F0ECD4879493__GUID-70B09BE9-BD4C-4921-A16A-72F000A4358B">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关架构对象依赖关系的更多信息，请参见<a href="../adfns/schema-object-dependency.html#ADFNS99967" target="_blank"><span class="italic">Oracle数据库开发指</span></a></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="creating-managing-schema-objects.html#GUID-0663F857-7E62-464C-9EE8-42BC600FAA6C" title="数据定义语言（DDL）语句创建，更改和删除模式对象。在DDL语句之前和之后，Oracle数据库发出隐式COMMIT语句;因此，您无法回滚DDL语句。">关于数据定义语言（DDL）声明</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="deploying-database-application.html#GUID-EA334D38-81D1-4B06-B272-08EDFE50A424" title="安装脚本可以包含创建应用程序所需的所有SQL语句，也可以是运行其他脚本的主脚本。">关于安装脚本</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG99942"></a><div class="props_rev_3"><a id="GUID-7C87F532-9F81-4234-9E21-60B12F7A91CE" name="GUID-7C87F532-9F81-4234-9E21-60B12F7A91CE"></a><h4 id="TDDDG-GUID-7C87F532-9F81-4234-9E21-60B12F7A91CE" class="sect4"><span class="enumeration_section">10.2.2</span>关于INSERT语句和约束</h4>
                  <div>
                     <p>运行包含<span class="keyword">INSERT</span>语句的安装脚本时，必须确定在将源表（在开发环境中）中的数据插入部署环境中的新表时是否可能违反约束。
                     </p>
                     <p>对于应用程序中的每个源表，必须确定在将数据插入新表时是否可以违反任何约束。如果是这样，您必须首先禁用这些约束，然后插入数据，然后尝试重新启用约束。如果数据项违反约束，则在更正数据项之前无法重新启用该约束。</p>
                     <p>如果您只是以正确的顺序插入查找数据（如<span class="q">“ <a href="developing-simple-database-application.html#GUID-CB8BB171-DB56-49F6-8895-F7AE32961B24">加载数据</a> ”</span> ），则不会违反约束。因此，您不需要先禁用它们。
                     </p>
                     <p>如果要从外部源（例如文件，电子表格或较旧的应用程序）或许多具有大量相关数据的表中插入数据，请在插入数据之前禁用约束。</p>
                     <p>禁用和重新启用约束的一些可能方法是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用SQL Developer，一次禁用和重新启用约束：</p>
                           <ol>
                              <li>
                                 <p>在<span class="wintitle">Connections</span>框架中，选择适当的表。
                                 </p>
                              </li>
                              <li>
                                 <p>在标有表名的窗格中，选择子选项卡<span class="uicontrol bold">约束</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在表的所有约束列表中，将<code>ENABLED</code>更改为<code>DISABLED</code> （或反向）。
                                 </p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>编辑安装脚本，添加禁用和重新启用每个约束的SQL语句。</p>
                        </li>
                        <li>
                           <p>使用禁用和启用每个约束的SQL语句创建SQL脚本。</p>
                        </li>
                        <li>
                           <p>在Oracle数据库数据字典中查找约束，并使用SQL语句创建SQL脚本以禁用和启用每个约束。</p>
                           <p>例如，要查找并启用<span class="q">“ <a href="creating-managing-schema-objects.html#GUID-87AA2B05-2B7B-49D9-AD21-1B2877113D23" title="要创建表，请使用SQL Developer工具Create Table或DDL语句CREATE TABLE。">创建表</a> ”中</span> EVALUATIONS，PERFORMANCE_PARTS和SCORES表中使用的约束，请在<span class="wintitle">工作表中</span>输入以下语句：</p><pre class="oac_no_warn" dir="ltr">SELECT'ALTER TABLE'|| TABLE_NAME || '禁止约束'|| CONSTRAINT_NAME ||';' FROM user_constraints WHERE table_name IN（'EVALUATIONS'，'PERFORMANCE_PARTS'，'SCORES'）; SELECT'ALTER TABLE'|| TABLE_NAME || 'ENABLE CONSTRAINT'|| CONSTRAINT_NAME ||';' FROM user_constraints WHERE table_name IN（'EVALUATIONS'，'PERFORMANCE_PARTS'，'SCORES'）;</pre></li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-7C87F532-9F81-4234-9E21-60B12F7A91CE__GUID-ECF0193A-05A6-4D36-8631-B90076DE175C">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="dml-and-transactions.html#GUID-E49519F6-5B93-43D9-852B-C6EB3DA8F1E1" title="INSERT语句将行插入现有表中。">关于INSERT声明</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="creating-managing-schema-objects.html#GUID-144C564C-0B08-40BF-9AC9-3035CFD03F66" title="要确保表中的数据满足应用程序建模的业务规则，可以使用约束，应用程序逻辑或两者。">确保表中的数据完整性</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="deploying-database-application.html#GUID-EA334D38-81D1-4B06-B272-08EDFE50A424" title="安装脚本可以包含创建应用程序所需的所有SQL语句，也可以是运行其他脚本的主脚本。">关于安装脚本</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TDDDG74000"></a><div class="props_rev_3"><a id="GUID-E40F78EB-0D1D-4FE4-9F01-615A917585C3" name="GUID-E40F78EB-0D1D-4FE4-9F01-615A917585C3"></a><h3 id="TDDDG-GUID-E40F78EB-0D1D-4FE4-9F01-615A917585C3" class="sect3"><span class="enumeration_section">10.3</span>创建安装脚本</h3>
               <div>
                  <p>您可以在SQL Developer或文本编辑器中创建安装脚本。</p>
                  <div class="section">
                     <p>如果安装脚本只需要DDL和<span class="keyword">INSERT</span>语句，则可以使用SQL Developer或任何文本编辑器创建它。在SQL Developer中，您可以使用Cart或Database Export向导。Oracle建议您购买预期在多个部署环境中运行的安装脚本，以及您希望仅在一个部署环境中运行的安装脚本的数据库导出向导。
                     </p>
                     <p>如果安装脚本需要既不是DDL语句也不是<span class="keyword">INSERT</span>语句的SQL语句，那么必须使用文本编辑器创建它。
                     </p>
                     <p>本节介绍如何使用Cart和数据库导出向导创建安装脚本，何时以及如何编辑创建序列和触发器的安装脚本，以及如何在<a href="developing-simple-database-application.html#GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" title="按照开发此简单应用程序的说明，您将学习开发Oracle数据库应用程序的一般过程。">开发简单Oracle数据库应用</a>程序中为应用程序创建安装脚本（“示例应用程序” “）。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="deploying-database-application.html#GUID-2BFEE40F-139F-4C72-A135-DA19E44432E1">使用购物车创建安装脚本</a><br>SQL Developer Cart是一个方便的工具，用于将Oracle数据库对象从一个或多个数据库连接部署到目标连接。
                     </li>
                     <li class="ulchildlink"><a href="deploying-database-application.html#GUID-28560E14-D48C-4D3F-955A-608054AB2B3B">使用数据库导出向导创建安装脚本</a><br>要使用“数据库导出”向导在SQL Developer中创建安装脚本，请指定安装脚本的名称，要导出的对象和数据以及所需的选项，向导将生成安装脚本。
                     </li>
                     <li class="ulchildlink"><a href="deploying-database-application.html#GUID-2F6AA522-C392-4796-B6A6-283387FE8FFE">编辑创建序列的安装脚本</a><br>如果应用程序使用序列生成唯一键，并且您<span class="italic">不会</span>将源表中的数据插入相应的新表中，则可能需要在安装脚本中编辑<span class="keyword">START WITH</span>值。
                     </li>
                     <li class="ulchildlink"><a href="deploying-database-application.html#GUID-D044C8DC-3505-4885-8A86-ACAABF45F139">编辑创建触发器的安装脚本</a><br>如果您的应用程序上的源表中的<span class="keyword">BEFORE INSERT</span>触发器，你<span class="italic">会</span>插入从源表中的数据到对应的新表，你必须决定是否要触发器触发安装脚本每个<span class="keyword">INSERT</span>语句将数据插入前新表。
                     </li>
                     <li class="ulchildlink"><a href="deploying-database-application.html#GUID-288D504D-8AD7-4750-87A9-FAF28A89AF3A">为示例应用程序创建安装脚本</a><br>您可以为示例应用程序创建安装脚本。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="deploying-database-application.html#GUID-3EC7DEF5-3FF2-47C7-A18F-E11DAC206BE5" title="开发应用程序后，可以将其安装在其他用户可以运行的其他数据库（称为部署环境）上。">部署Oracle数据库应用程序</a></p>
                     </div>
                  </div>
               </div>
               <a id="TDDDG317"></a><a id="TDDDG316"></a><div class="props_rev_3"><a id="GUID-2BFEE40F-139F-4C72-A135-DA19E44432E1" name="GUID-2BFEE40F-139F-4C72-A135-DA19E44432E1"></a><h4 id="TDDDG-GUID-2BFEE40F-139F-4C72-A135-DA19E44432E1" class="sect4"><span class="enumeration_section">10.3.1</span>使用Cart创建安装脚本</h4>
                  <div>
                     <p>SQL Developer Cart是一个方便的工具，用于将Oracle数据库对象从一个或多个数据库连接部署到目标连接。</p>
                     <div class="section">
                        <p>将对象从导航器框架拖放到“购物车”窗口中，指定所需的选项，然后单击“导出购物车”图标以显示“导出对象”对话框。完成该对话框中的信息后，SQL Developer将创建一个包含脚本（包括主脚本）的<code class="codeph">.zip</code>文件，以在所需目标连接的架构中创建对象。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-2BFEE40F-139F-4C72-A135-DA19E44432E1__GUID-05A3E3DB-4262-4C91-9042-79947C157D01">使用Cart创建安装脚本：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>在SQL Developer窗口中，单击菜单<span class="uicontrol bold">View</span> 。</span></li>
                        <li class="stepexpand"><span>从“ <span class="wintitle">视图”</span>菜单中选择“ <span class="uicontrol bold">购物车”</span> 。</span><div>
                              <p>购物车窗口打开。导出购物车图标处于非活动状态（灰色）。</p>
                              <div class="infobox-tip" id="GUID-2BFEE40F-139F-4C72-A135-DA19E44432E1__GUID-B5535FD3-A0CD-467B-94A1-23509570FFD2">
                                 <p class="notep1">小费：</p>
                                 <p>在<span class="wintitle">购物车</span>窗口中，有关购物车用户首选项的信息，请按<span class="uicontrol bold">F1</span>键。
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在<span class="wintitle">Connections</span>框架中，选择希望安装脚本创建的架构对象，并将它们拖到<span class="wintitle">Cart</span>窗口中。</span><div>
                              <p>在“ <span class="wintitle">购物车”</span>窗口中，“ <span class="wintitle">导出购物车”</span>图标现在处于活动状态（不是灰色）。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>对于TABLE类型的每个<span class="wintitle">Selected Object</span> ，如果希望安装脚本导出数据，则选择<span class="uicontrol bold">Data</span>选项。</span></li>
                        <li class="stepexpand"><span>单击<span class="uicontrol bold">导出购物车</span> 。</span></li>
                        <li class="stepexpand"><span>在“ <span class="wintitle">导出对象”</span>对话框中，在字段中输入所需的值。</span><div>
                              <p>有关这些字段的信息，请参阅“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tdddg&amp;id=RPTUG45483" target="_blank"><span class="italic">Oracle SQL Developer用户指南”</span></a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>单击“ <span class="uicontrol bold">应用”</span></span><div>
                              <p>SQL Developer创建一个包含脚本（包括主脚本）的<code class="codeph">.zip</code>文件，以在所需目标连接的模式中创建对象。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在主脚本及其运行的脚本中，检查：</span><div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>引用对象在其依赖对象之前创建。</p>
                                 </li>
                                 <li>
                                    <p>在将数据插入到表之前创建表。</p>
                                 </li>
                              </ul>
                              <p>如果安装脚本创建序列，请参阅<span class="q">“ <a href="deploying-database-application.html#GUID-2F6AA522-C392-4796-B6A6-283387FE8FFE" title="如果应用程序使用序列生成唯一键，并且您不会将源表中的数据插入相应的新表中，则可能需要在安装脚本中编辑START WITH值。">编辑创建序列的安装脚本</a> ”</span> 。
                              </p>
                              <p>如果安装脚本创建触发器，请参阅<span class="q">“ <a href="deploying-database-application.html#GUID-2F6AA522-C392-4796-B6A6-283387FE8FFE" title="如果应用程序使用序列生成唯一键，并且您不会将源表中的数据插入相应的新表中，则可能需要在安装脚本中编辑START WITH值。">编辑创建序列的安装脚本</a> ”</span> 。
                              </p>
                              <p>如有必要，请编辑Worksheet或任何文本编辑器中的安装文件。</p>
                           </div>
                        </li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-2BFEE40F-139F-4C72-A135-DA19E44432E1__GUID-F26A6EA1-C4E2-4A47-ACE9-77ADDC61F92F">
                        <p class="notep1">也可以看看：</p>
                        <p>有关购物车的更多信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tdddg&amp;id=RPTUG45333" target="_blank"><span class="italic">“Oracle SQL Developer用户指南”</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="deploying-database-application.html#GUID-E40F78EB-0D1D-4FE4-9F01-615A917585C3" title="您可以在SQL Developer或文本编辑器中创建安装脚本。">创建安装脚本</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG272"></a><a id="TDDDG99974"></a><div class="props_rev_3"><a id="GUID-28560E14-D48C-4D3F-955A-608054AB2B3B" name="GUID-28560E14-D48C-4D3F-955A-608054AB2B3B"></a><h4 id="TDDDG-GUID-28560E14-D48C-4D3F-955A-608054AB2B3B" class="sect4"><span class="enumeration_section">10.3.2</span>使用数据库导出向导创建安装脚本</h4>
                  <div>
                     <p>要使用“数据库导出”向导在SQL Developer中创建安装脚本，请指定安装脚本的名称，要导出的对象和数据以及所需的选项，向导将生成安装脚本。</p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-28560E14-D48C-4D3F-955A-608054AB2B3B__GUID-61DB7B4E-0D55-479B-A5F5-F978174E2A5F">
                           <p class="notep1">注意：</p>
                           <p>在以下过程中，您可能必须放大SQL Developer窗口以查看所有字段和选项。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-28560E14-D48C-4D3F-955A-608054AB2B3B__GUID-0C28FF24-F5ED-4AFE-A891-34C1477D9B5E">使用“数据库导出”向导创建安装脚本：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>如果尚未执行此操作，请为安装脚本创建一个目录，与Oracle数据库安装目录（例如， <code>C:\my_exports</code> ） <code>C:\my_exports</code> 。
                              </p>
                           </li>
                           <li>
                              <p>在SQL Developer窗口中，单击菜单<span class="uicontrol bold">Tools</span> 。
                              </p>
                           </li>
                           <li>
                              <p>从菜单中，选择“ <span class="uicontrol bold">数据库导出”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在<span class="wintitle">导出向导 - 第1步（共5步）（源/目标）</span>窗口中：</p>
                              <ol type="a">
                                 <li>
                                    <p>在“ <span class="wintitle">连接”</span>字段中，选择与开发环境的连接。
                                    </p>
                                 </li>
                                 <li>
                                    <p>选择所需的导出DDL选项（并取消选择任何选定的不需要的选项）。</p>
                                    <div class="infoboxnote" id="GUID-28560E14-D48C-4D3F-955A-608054AB2B3B__GUID-70605363-D591-4019-9F80-D7BF3E1B0D81">
                                       <p class="notep1">注意：</p>
                                       <p>不要取消选择“ <span class="wintitle">终结者”</span> ，否则安装脚本将失败。
                                       </p>
                                    </div>
                                 </li>
                                 <li>
                                    <p>如果您<span class="italic">不</span>希望安装脚本导出数据，请取消选择“ <span class="uicontrol bold">导出数据”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>在“ <span class="wintitle">另存为”</span>字段中，接受默认的<code>Single File</code>然后键入安装脚本的完整路径名（例如， <code>C:\my_exports\hr_export.sql</code> ）。
                                    </p>
                                    <p>文件名必须以。结尾。 <code class="codeph">sql</code> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>单击<span class="uicontrol bold">下一步</span> 。
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>在<span class="wintitle">导出向导 - 第2步（共5步）（要导出的类型）</span>窗口中：</p>
                              <ol type="a">
                                 <li>
                                    <p>取消选中复选框，你<span class="italic">不</span>想要导出的类型。
                                    </p>
                                    <p>选择或取消选择<span class="uicontrol bold">Toggle All</span>选择或取消选中所有复选框。
                                    </p>
                                 </li>
                                 <li>
                                    <p>单击<span class="uicontrol bold">下一步</span> 。
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>在<span class="wintitle">导出向导 - 第3步（共5步）（指定对象）</span>窗口中：</p>
                              <ol type="a">
                                 <li>
                                    <p>点击<span class="uicontrol bold">更多</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>在“ <span class="wintitle">架构”</span>字段中，从菜单中选择架构。
                                    </p>
                                 </li>
                                 <li id="GUID-28560E14-D48C-4D3F-955A-608054AB2B3B__CHDIBFAC">
                                    <p>在“ <span class="wintitle">类型”</span>字段中，从菜单中选择“ <code>ALL OBJECTS</code>或特定对象类型（例如， <code>TABLE</code> ）。
                                    </p>
                                 </li>
                                 <li>
                                    <p>单击“ <span class="uicontrol bold">查找”</span> 。
                                    </p>
                                    <p>左侧框架中将显示对象列表。如果<span class="wintitle">Type</span>字段的值为<code>ALL OBJECTS</code> ，则列表包含所选模式中的所有对象。如果“ <span class="wintitle">类型”</span>字段的值是特定对象类型，则列表将包含所选模式中该类型的所有对象。
                                    </p>
                                 </li>
                                 <li id="GUID-28560E14-D48C-4D3F-955A-608054AB2B3B__CHDGGCFJ">
                                    <p>将要导出的对象从左侧框架移动到右侧框架：</p>
                                    <p>要移动所有对象，请单击<span class="uicontrol bold">&gt;&gt;</span> 。（要移回所有对象，请单击<span class="uicontrol bold">&lt;&lt;</span> 。）
                                    </p>
                                    <p>要移动所选对象，请选择它们，然后单击<span class="uicontrol bold">&gt;</span> 。（要移回所选对象，请选择它们并单击<span class="uicontrol bold">&lt;</span> 。）
                                    </p>
                                 </li>
                                 <li>
                                    <p>（可选）对其他对象类型重复步骤<a href="deploying-database-application.html#GUID-28560E14-D48C-4D3F-955A-608054AB2B3B__CHDIBFAC">6.c</a>到<a href="deploying-database-application.html#GUID-28560E14-D48C-4D3F-955A-608054AB2B3B__CHDGGCFJ">6.e.</a>
                                    </p>
                                 </li>
                                 <li>
                                    <p>单击<span class="uicontrol bold">下一步</span> 。
                                    </p>
                                    <p>如果在“ <span class="wintitle">源/目标”</span>窗口中取消选择“ <code>Export Data</code> ”，则会显示“ <span class="wintitle">导出摘要”</span>窗口 - 转到步骤<a href="deploying-database-application.html#GUID-28560E14-D48C-4D3F-955A-608054AB2B3B__CEGBBJFF">8</a> 。
                                    </p>
                                    <p>如果<span class="italic">未</span>在“ <span class="wintitle">源/目标”</span>窗口中取消选择“ <code>Export Data</code> ”，则会出现“ <span class="wintitle">导出向导 - 第4步（共5步）”（指定数据）</span>窗口。下框列出了您在“ <span class="wintitle">指定对象”</span>窗口中<span class="wintitle">指定的对象</span> 。
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>在“ <span class="wintitle">指定数据”</span>窗口中：</p>
                              <ol type="a">
                                 <li>
                                    <p>将其数据你<span class="italic">不想</span>从下框架的上部框架导出的对象：</p>
                                    <p>要移动所有对象，请单击双向上箭头图标。（要移回所有对象，请单击双向下箭头图标。）</p>
                                    <p>要移动所选对象，请选择它们，然后单击单个向上箭头图标。</p>
                                 </li>
                                 <li>
                                    <p>单击<span class="uicontrol bold">下一步</span> 。
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li id="GUID-28560E14-D48C-4D3F-955A-608054AB2B3B__CEGBBJFF">
                              <p>在“ <span class="wintitle">导出向导 - 第5步（共5步）”（“导出摘要”）</span>窗口中，单击“ <span class="uicontrol bold">完成”</span> 。
                              </p>
                              <p>将打开“导出”窗口，显示正在导出。导出完成后，“导出”窗口将关闭，“工作表”将显示您在“源/目标”窗口中指定的安装脚本的内容。</p>
                           </li>
                           <li>
                              <p>在安装脚本中，检查：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>引用对象在其依赖对象之前创建。</p>
                                 </li>
                                 <li>
                                    <p>在将数据插入到表之前创建表。</p>
                                 </li>
                              </ul>
                              <p>如有必要，请在“ <span class="wintitle">工作表”</span>或任何文本编辑器中编辑该文件。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-28560E14-D48C-4D3F-955A-608054AB2B3B__GUID-F9106752-48A7-4D44-A3E8-7A17B7E15E20">
                        <p class="notep1">也可以看看：</p>
                        <p>有关“数据库导出”向导的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tdddg&amp;id=RPTUG30590" target="_blank"><span class="italic">“Oracle SQL Developer用户指南”</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="deploying-database-application.html#GUID-E40F78EB-0D1D-4FE4-9F01-615A917585C3" title="您可以在SQL Developer或文本编辑器中创建安装脚本。">创建安装脚本</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG99938"></a><div class="props_rev_3"><a id="GUID-2F6AA522-C392-4796-B6A6-283387FE8FFE" name="GUID-2F6AA522-C392-4796-B6A6-283387FE8FFE"></a><h4 id="TDDDG-GUID-2F6AA522-C392-4796-B6A6-283387FE8FFE" class="sect4"><span class="enumeration_section">10.3.3</span>编辑创建序列的安装脚本</h4>
                  <div>
                     <p>如果应用程序使用序列生成唯一键，并且您<span class="italic">不会</span>将源表中的数据插入相应的新表中，则可能需要在安装脚本中编辑<span class="keyword">START WITH</span>值。
                     </p>
                     <div class="section">
                        <p>对于序列，SQL Developer生成一个<span class="keyword">CREATE SEQUENCE</span>语句，其<span class="keyword">START WITH</span>值相对于开发环境中序列的当前值。
                        </p>
                        <p>如果应用程序使用序列生成唯一键，并且您<span class="italic">不会</span>将源表中的数据插入相应的新表中，则可能需要在安装脚本中编辑<span class="keyword">START WITH</span>值。
                        </p>
                        <p>您可以在<span class="wintitle">Worksheet</span>或任何文本编辑器中编辑安装脚本。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-2F6AA522-C392-4796-B6A6-283387FE8FFE__GUID-BA4C6672-3EEC-4C6F-ACFC-2E77F678F397">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="creating-managing-schema-objects.html#GUID-3164ECEB-0C7C-4578-8237-0960CA424760" title="本教程介绍如何使用“创建数据库序列”工具创建用于为EVALUATIONS表生成主键的序列。">教程：创建序列</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="deploying-database-application.html#GUID-E40F78EB-0D1D-4FE4-9F01-615A917585C3" title="您可以在SQL Developer或文本编辑器中创建安装脚本。">创建安装脚本</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG74100"></a><div class="props_rev_3"><a id="GUID-D044C8DC-3505-4885-8A86-ACAABF45F139" name="GUID-D044C8DC-3505-4885-8A86-ACAABF45F139"></a><h4 id="TDDDG-GUID-D044C8DC-3505-4885-8A86-ACAABF45F139" class="sect4"><span class="enumeration_section">10.3.4</span>编辑创建触发器的安装脚本</h4>
                  <div>
                     <p>如果您的应用程序上的源表中的<span class="keyword">BEFORE INSERT</span>触发器，你<span class="italic">会</span>插入从源表中的数据到对应的新表，你必须决定是否要触发器触发安装脚本每个<span class="keyword">INSERT</span>语句将数据插入前新表。
                     </p>
                     <div class="section">
                        <p>例如，NEW_EVALUATION_TRIGGER（在<span class="q">“ <a href="using-triggers.html#GUID-C4DA3CAF-522D-4851-84D2-732C8F1FCF5C" title="This tutorial shows how to use the SQL Developer Create Trigger tool to create a trigger that fires before a row is inserted into the EVALUATIONS table, and generates the unique number for the primary key of that row, using EVALUATIONS_SEQUENCE.">教程：创建在插入行之前为行生成主键的触发器</a> ”中<a href="using-triggers.html#GUID-C4DA3CAF-522D-4851-84D2-732C8F1FCF5C" title="本教程介绍如何使用SQL Developer创建触发器工具创建在将行插入EVALUATIONS表之前触发的触发器，并使用EVALUATIONS_SEQUENCE生成该行的主键的唯一编号。">创建</a></span> ）在将行插入EVALUATIONS表之前触发。触发器使用EVALUATIONS_SEQUENCE为该行的主键生成唯一编号。</p>
                        <p>源EVALUATIONS表填充了主键。如果您不希望安装脚本将新的主键值放入新的EVALUATIONS表中，则必须在安装脚本中编辑<span class="keyword">CREATE TRIGGER</span>语句，如粗体字所示：</p><pre class="oac_no_warn" dir="ltr">在插入每个行的评估之前创建或替换TRIGGER NEW_EVALUATION_TRIGGER <span class="bold">如果：NEW.evaluation_id IS NULL那么</span> ：NEW.evaluation_id：= evaluations_sequence。NEXTVAL <span class="bold">END IF;</span>结束;</pre><p>此外，如果序列的当前值不大于主键列中的最大值，则必须使其更大。</p>
                        <p>您可以在<span class="wintitle">Worksheet</span>或任何文本编辑器中编辑安装脚本。
                        </p>
                        <p>编辑安装脚本的两种方法是：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>更改源文件中的触发器定义，然后重新创建安装脚本。</p>
                              <p>有关更改触发器的信息，请参阅<span class="q">“ <a href="using-triggers.html#GUID-5941E132-742E-4337-9D8C-F835E2F1F1E0" title="要更改触发器，请使用SQL Developer工具Edit或DDL语句CREATE TRIGGER和OR REPLACE子句。">更改触发器</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在运行数据安装脚本之前禁用触发器，然后再重新启用它。</p>
                              <p>有关禁用和启用触发器的信息，请参阅<span class="q">“ <a href="using-triggers.html#GUID-86E7AF13-C7A6-4594-A333-180DD16382AA" title="您可能需要临时禁用引用不可用对象的触发器，或者在没有触发原因的延迟的情况下上载大量数据（如在恢复操作中）。在引用的对象可用之后，或者您已完成上载数据后，可以重新启用触发器。">禁用和启用触发器</a> ”</span> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-D044C8DC-3505-4885-8A86-ACAABF45F139__GUID-455408EB-1683-4DD3-8C1F-7CEC8C4CFDF7">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="using-triggers.html#GUID-96CB6070-0C3A-4A1F-953A-FF67A487E212" title="要创建触发器，请使用SQL Developer图形界面或DDL语句CREATE TRIGGER。">创建触发器</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="deploying-database-application.html#GUID-E40F78EB-0D1D-4FE4-9F01-615A917585C3" title="您可以在SQL Developer或文本编辑器中创建安装脚本。">创建安装脚本</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG99936"></a><div class="props_rev_3"><a id="GUID-288D504D-8AD7-4750-87A9-FAF28A89AF3A" name="GUID-288D504D-8AD7-4750-87A9-FAF28A89AF3A"></a><h4 id="TDDDG-GUID-288D504D-8AD7-4750-87A9-FAF28A89AF3A" class="sect4"><span class="enumeration_section">10.3.5</span>为示例应用程序创建安装脚本</h4>
                  <div>
                     <p>您可以为示例应用程序创建安装脚本。</p>
                     <div class="section">
                        <p>这些脚本适用于<a href="developing-simple-database-application.html#GUID-98FFDC3A-FD76-4466-921C-F0E411829CD7" title="按照开发此简单应用程序的说明，您将学习开发Oracle数据库应用程序的一般过程。">开发简单Oracle数据库应用程序中的应用程序</a> ：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">schemas.sql</span> ，在部署环境中，您在<span class="q">“ <a href="developing-simple-database-application.html#GUID-D8812009-9F2A-4EB4-A973-036EDA23697D" title="使用本节中的过程，为应用程序创建模式。">为应用程序创建模式</a> ”</span>和<span class="q">“ <a href="developing-simple-database-application.html#GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1" title="To grant privileges to schemas, use the SQL statement GRANT.">为模式授予权限</a></span> <span class="q">”</span>中在开发环境中<span class="q"><a href="developing-simple-database-application.html#GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1" title="要为模式授予权限，请使用SQL语句GRANT。">执行的操作</a></span></p>
                           </li>
                           <li>
                              <p><span class="bold">objects.sql</span> ，在部署环境中，您在<span class="q">“ <a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="本节介绍如何为应用程序创建表，编辑视图，触发器和序列，如何将数据加载到表中，以及如何将这些模式对象的权限授予需要它们的用户。">创建架构对象并加载数据</a> ”</span>中在开发环境中执行的操作</p>
                           </li>
                           <li>
                              <p><span class="bold">employees.sql</span> ，在部署环境中，您在<span class="q">“ <a href="developing-simple-database-application.html#GUID-A814459E-682F-44DB-8421-CB960B924F2D" title="本节介绍如何创建employees_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及这些用户如何调用其子程序。">创建employees_pkg包</a> ”</span>中在开发环境中执行的操作</p>
                           </li>
                           <li>
                              <p><span class="bold">admin.sql</span> ，在部署环境中，您在<span class="q">“ <a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" title="This section shows how to create the admin_pkg package, how its subprograms work, how to grant the execute privilege on the package to the user who needs it, and how that user can invoke one of its subprograms.">创建admin_pkg包</a> ”</span>中在开发环境中<span class="q"><a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" title="本节介绍如何创建admin_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及该用户如何调用其子程序。">执行的操作</a></span></p>
                           </li>
                           <li>
                              <p><span class="bold">create_app.sql</span> ，一个运行上述脚本的主脚本，从而在部署环境中部署示例应用程序</p>
                           </li>
                        </ul>
                        <p>您可以按任何顺序创建脚本。要创建schemas.sql和create_app.sql，必须使用文本编辑器。要创建其他脚本，可以使用文本编辑器或SQL Developer。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="deploying-database-application.html#GUID-DA0274F9-E99E-4624-BE6B-CFD56F82B379">创建安装脚本schemas.sql</a><br></li>
                        <li class="ulchildlink"><a href="deploying-database-application.html#GUID-50F38156-AEE7-4B72-BCE7-F842A8993933">创建安装脚本objects.sql</a><br></li>
                        <li class="ulchildlink"><a href="deploying-database-application.html#GUID-8EB28104-4EB5-492D-A78C-EDF33DD0F12B">创建安装脚本employees.sql</a><br></li>
                        <li class="ulchildlink"><a href="deploying-database-application.html#GUID-35E7FFA1-4217-4467-894D-2121F1DF1E45">创建安装脚本admin.sql</a><br></li>
                        <li class="ulchildlink"><a href="deploying-database-application.html#GUID-CAC28766-5EB6-4E1D-A995-D80CF0447040">创建主安装脚本create_app.sql</a><br></li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="deploying-database-application.html#GUID-E40F78EB-0D1D-4FE4-9F01-615A917585C3" title="您可以在SQL Developer或文本编辑器中创建安装脚本。">创建安装脚本</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TDDDG118"></a><div class="props_rev_3"><a id="GUID-DA0274F9-E99E-4624-BE6B-CFD56F82B379" name="GUID-DA0274F9-E99E-4624-BE6B-CFD56F82B379"></a><h5 id="TDDDG-GUID-DA0274F9-E99E-4624-BE6B-CFD56F82B379" class="sect5"><span class="enumeration_section">10.3.5.1</span>创建安装脚本schemas.sql</h5>
                     <div>
                        <div class="section">
                           <p>安装脚本schemas.sql在部署环境中执行<span class="q">“ <a href="developing-simple-database-application.html#GUID-D8812009-9F2A-4EB4-A973-036EDA23697D" title="Using the procedure in this section, create the schemas for the application.">在为应用程序创建模式</a> ”</span>和<span class="q">“ <a href="developing-simple-database-application.html#GUID-F8260678-DAC7-4EB1-86A9-1792FD709AF1" title="要为模式授予权限，请使用SQL语句GRANT。">向模式授予权限</a></span> <span class="q">”</span>的开发环境中<span class="q"><a href="developing-simple-database-application.html#GUID-D8812009-9F2A-4EB4-A973-036EDA23697D" title="使用本节中的过程，为应用程序创建模式。">所执行的操作</a></span> 。
                           </p>
                           <p>要创建schemas.sql，请在任何文本编辑器中输入以下文本，并将该文件另存为schemas.sql。</p>
                           <div class="infoboxnote" id="GUID-DA0274F9-E99E-4624-BE6B-CFD56F82B379__GUID-BAC091AC-ECD6-4550-9917-9464D83F6E4E">
                              <p class="notep1">警告：</p>
                              <p>选择安全密码。有关安全密码的准则，请参见“ <a href="../dbseg/keeping-your-oracle-database-secure.html#DBSEG10005" target="_blank"><span class="italic">Oracle数据库安全指南”</span></a> 。
                              </p>
                           </div><pre class="oac_no_warn" dir="ltr">-----------------  - 创建模式----------------- DROP USER app_data CASCADE;创建用户app_data通过<span class="italic">密码确认</span> TABLESPACE用户配额无限使用者使用版本; DROP USER app_code CASCADE;创建用户app_code通过<span class="italic">密码</span>默认TABLESPACE用户配额无限制使用者使用版本; DROP USER app_admin CASCADE;创建用户app_admin通过<span class="italic">密码</span>确认标签空间用户配额无限使用者使用版本; DROP USER app_user CASCADE;通过<span class="italic">密码</span> ENABLE EDITIONS创建用户app_user标识; DROP USER app_admin_user CASCADE;创建用户app_admin_user IDENTIFIED BY <span class="italic">密码</span> ENABLE EDITIONS; ------------------------------  - 为模式授予权限-------------- ---------------- GRANT创建会话到app_data; GRANT CREATE TABLE，创建视图，创建触发器，为app_data创建序列;在HR.DEPARTMENTS上选择给app_data;在HR.EMPLOYEES上选择给app_data;在HR.JOB_HISTORY上选择GRANT选择app_data;在HR.JOBS上选择给app_data;授予创建会话，创建程序，创建同步到app_code;授予创建会话，创建程序，为app_admin创建SYNONYM;授予创建会话，为app_user创建SYNONYM;授予创建会话，为app_admin_user创建SYNONYM;</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-DA0274F9-E99E-4624-BE6B-CFD56F82B379__GUID-DB84D98C-C949-49B6-BED2-8CB89EC61BE0">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="developing-simple-database-application.html#GUID-DA4704AD-7557-4455-889E-3E1745B56D81">应用程序</a></span>的模式<span class="q">”，</span>用于描述示例应用程序的模式</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="deploying-database-application.html#GUID-288D504D-8AD7-4750-87A9-FAF28A89AF3A" title="您可以为示例应用程序创建安装脚本。">为示例应用程序创建安装脚本</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TDDDG318"></a><div class="props_rev_3"><a id="GUID-50F38156-AEE7-4B72-BCE7-F842A8993933" name="GUID-50F38156-AEE7-4B72-BCE7-F842A8993933"></a><h5 id="TDDDG-GUID-50F38156-AEE7-4B72-BCE7-F842A8993933" class="sect5"><span class="enumeration_section">10.3.5.2</span>创建安装脚本objects.sql</h5>
                     <div>
                        <div class="section">
                           <p>安装脚本objects.sql在部署环境中执行<span class="q">“</span>在<span class="q"><a href="developing-simple-database-application.html#GUID-FCA887BA-6F7C-4863-8903-52B79C09F76D" title="本节介绍如何为应用程序创建表，编辑视图，触发器和序列，如何将数据加载到表中，以及如何将这些模式对象的权限授予需要它们的用户。">创建架构对象和加载数据</a> ”</span>中在开发环境中所执行的操作。
                           </p>
                           <p>您可以使用文本编辑器或SQL Developer创建objects.sql。</p>
                           <p>要在任何文本编辑器中创建objects.sql，请输入以下文本并将文件另存为objects.sql。对于<span class="synph">password</span> ，请使用schema.sql在创建用户app_data时指定的密码。
                           </p>
                           <div class="infoboxnote" id="GUID-50F38156-AEE7-4B72-BCE7-F842A8993933__GUID-A5E18D3C-E987-4F51-BD16-96C56EFEF470">
                              <p class="notep1">注意：</p>
                              <p>仅当部署环境具有标准HR模式时，加载数据的<span class="keyword">INSERT</span>语句才起作用。如果没有，则使用SQL Developer创建一个脚本，该脚本使用源表中的数据（在开发环境中）加载新表（在部署环境中），或者修改以下脚本中的<span class="keyword">INSERT</span>语句。
                              </p>
                           </div><pre class="oac_no_warn" dir="ltr">------------------------  - 创建架构对象--------------------- --- CONNECT app_data / <span class="italic">password</span> CREATE TABLE jobs＃（job_id VARCHAR2（10）CONSTRAINT jobs_pk PRIMARY KEY，job_title VARCHAR2（35）CONSTRAINT jobs_job_title_not_null NOT NULL，min_salary NUMBER（6）CONSTRAINT jobs_min_salary_not_null NOT NULL，max_salary NUMBER（6）CONSTRAINT jobs_max_salary_not_null NOT NULL）/ CREATE TABLE部门＃（department_id NUMBER（4）CONSTRAINT departments_pk PRIMARY KEY，department_name VARCHAR2（30）CONSTRAINT dept_department_name_not_null NOT NULL CONSTRAINT dept_department_name_unique UNIQUE，manager_id NUMBER（6））/ CREATE TABLE employees＃（employee_id NUMBER（6）CONSTRAINT employees_pk PRIMARY KEY，first_name VARCHAR2（20）CONSTRAINT emp_first_name_not_null NOT NULL，last_name VARCHAR2（25）CONSTRAINT emp_last_name_not_null NOT NULL，email_addr VARCHAR2（25）CONSTRAINT emp_email_addr_not_null NOT NULL，hire_date DATE DEFAULT TRUNC（SYSDATE）CONSTRAINT emp_hire_date_not_null NOT NULL CONSTRA INT emp_hire_date_check CHECK（TRUNC（HIRE_DATE）= HIRE_DATE），COUNTRY_CODE VARCHAR2（5）约束emp_country_code_not_null NOT NULL，PHONE_NUMBER VARCHAR2（20）约束的emp_phone_number_not_null NOT NULL，JOB_ID约束emp_job_id_not_null NOT NULL约束emp_to_jobs_fk参考作业＃，job_start_date DATE约束emp_job_start_date_not_null NOT NULL，约束emp_job_start_date_check CHECK（TRUNC（JOB_START_DATE）= job_start_date），薪金NUMBER（6）约束emp_salary_not_null NOT NULL，MANAGER_ID约束emp_mgrid_to_emp_empid_fk参考员工＃，部门标识约束emp_to_dept_fk参考部门＃）/ CREATE TABLE JOB_HISTORY＃（EMPLOYEE_ID约束job_hist_to_emp_fk参考员工＃，JOB_ID CONSTRAINT job_hist_to_jobs_fk REFERENCES jobs＃，start_date DATE CONSTRAINT job_hist_start_date_not_null NOT NULL，end_date DATE CONSTRAINT job_hist_end_date_not_null NOT NULL，department_id CONSTRAINT job_hist_to_dept_fk REFERENCES departments＃CONSTRAI NT job_hist_dept_id_not_null NOT NULL，CONSTRAINT job_history_pk PRIMARY KEY（employee_id，start_date），CONSTRAINT job_history_date_check CHECK（start_date &lt;end_date））/ CREATE EDITIONING VIEW jobs AS SELECT * FROM jobs＃/ CREATE EDITIONING VIEW departments AS SELECT * FROM departments＃/ CREATE EDITIONING VIEW员工AS SELECT * FROM员工＃/ CREATE EDITIONING查看job_history AS SELECT * FROM job_history＃/创建或替换TRIGGER employees_aiufer插入或更新工资后，job_id ON员工每次行拒绝l_cnt NUMBER;分享模式中的BEGIN LOCK TABLE工作; - 确保作业不会更改 - 在以下查询期间。SELECT COUNT（*）INTO l_cnt FROM jobs WHERE job_id =：NEW.job_id AND：NEW.salary BETWEEN min_salary AND max_salary; IF（l_cnt &lt;&gt; 1）THEN RAISE_APPLICATION_ERROR（-20002，CASE WHEN：new.job_id =：old.job_id那么'工资修改无效'ELSE'工作重新分配使工资超出范围'END）;万一;结束; /创建或替换TRIGGER jobs_aufer更新min_salary，max_salary ON每个行的作业（NEW.min_salary&gt; OLD.min_salary或NEW.max_salary &lt;OLD.max_salary）DECLARE l_cnt NUMBER; BEGIN LOCK TABLE员工分享模式; SELECT COUNT（*）INTO l_cnt FROM employees WHERE job_id =：NEW.job_id AND salary NOT BETWEEN：NEW.min_salary and：NEW.max_salary; IF（l_cnt&gt; 0）THEN RAISE_APPLICATION_ERROR（-20001，'薪资更新会违反'|| l_cnt ||'现有员工记录'）;万一;结束; / CREATE SEQUENCE employees_sequence START WITH 210;创建SEQUENCE departments_sequence START WITH 275; ------------  - 加载数据------------ <span class="bold">INSERT</span> INTO作业（job_id，job_title，min_salary，max_salary）SELECT job_id，job_title，min_salary，max_salary <span class="bold">FROM HR .JOBS</span> / <span class="bold">INSERT</span> INTO部门（department_id，department_name，manager_id）SELECT department_id，department_name，manager_id <span class="bold">FROM HR.DEPARTMENTS</span> / <span class="bold">INSERT</span> INTO employees（employee_id，first_name，last_name，email_addr，hire_date，country_code，phone_number，job_id，job_start_date，salary，manager_id， department_id）SELECT employee_id，first_name，last_name，email，hire_date，CASE WHEN phone_number LIKE'011。％'THEN'+'|| SUBSTR（phone_number，INSTR（phone_number，'。'）+ 1，INSTR（phone_number，'。'，1,2） -  INSTR（phone_number，'。'） -  1）ELSE' + 1'结束country_code，例如，当phone_number LIKE'011。％'那么SUBSTR（phone_number，INSTR（phone_number，'）。'，1,2）+1）ELSE phone_number END phone_number，job_id，NVL（（SELECT MAX（end_date + 1）FROM HR.JOB_HISTORY jh WHERE jh.employee_id = employees.employee_id），hire_date），salary，manager_id，department_id <span class="bold">FROM HR.EMPLOYEES</span> / <span class="bold">INSERT</span> INTO job_history（employee_id，job_id，start_date，end_date，department_id）SELECT employee_id，job_id，start_date，end_date，department_id <span class="bold">FROM HR.JOB_HISTORY</span> / COMMIT; -----------------------------  - 添加外键约束--------------- -------------- ALTER TABLE部门#ADD CONSTRAINT dept_to_emp_fk FOREIGN KEY（manager_id）REFERENCES employees＃; ----------------------------------------------  - 授予特权对用户的架构对象--------------------------------------------- -  GRANT SELECT，INSERT，UPDATE，DELETE ON employees TO app_code; GRANT SELECT ON部门TO app_code; GRANT选择作业到app_code; GRANT SELECT，INSERT on job_history TO app_code; GRANT SELECT ON employees_sequence TO app_code; GRANT SELECT，INSERT，UPDATE，DELETE ON job to app_admin; GRANT SELECT，INSERT，UPDATE，DELETE ON部门TO app_admin; GRANT SELECT ON employees_sequence TO app_admin; GRANT SELECT ON departments_sequence TO app_admin; GRANT选择作业到app_admin_user; GRANT SELECT ON部门TO app_admin_user;</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-50F38156-AEE7-4B72-BCE7-F842A8993933__GUID-6158B454-7075-4A81-89A3-47D2809B2A16">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="developing-simple-database-application.html#GUID-68114096-D18C-4E48-BD90-6E07F35CBEF9">应用程序</a></span>的模式对象<span class="q">”，</span>用于描述示例应用程序的模式对象</p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="deploying-database-application.html#GUID-2BFEE40F-139F-4C72-A135-DA19E44432E1" title="SQL Developer Cart是一个方便的工具，用于将Oracle数据库对象从一个或多个数据库连接部署到目标连接。">使用购物车创建安装脚本</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="deploying-database-application.html#GUID-28560E14-D48C-4D3F-955A-608054AB2B3B" title="要使用“数据库导出”向导在SQL Developer中创建安装脚本，请指定安装脚本的名称，要导出的对象和数据以及所需的选项，向导将生成安装脚本。">使用数据库导出向导创建安装脚本</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="deploying-database-application.html#GUID-288D504D-8AD7-4750-87A9-FAF28A89AF3A" title="您可以为示例应用程序创建安装脚本。">为示例应用程序创建安装脚本</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TDDDG319"></a><div class="props_rev_3"><a id="GUID-8EB28104-4EB5-492D-A78C-EDF33DD0F12B" name="GUID-8EB28104-4EB5-492D-A78C-EDF33DD0F12B"></a><h5 id="TDDDG-GUID-8EB28104-4EB5-492D-A78C-EDF33DD0F12B" class="sect5"><span class="enumeration_section">10.3.5.3</span>创建安装脚本employees.sql</h5>
                     <div>
                        <div class="section">
                           <p>在部署环境中，安装脚本employees.sql在<span class="q">“ <a href="developing-simple-database-application.html#GUID-A814459E-682F-44DB-8421-CB960B924F2D" title="This section shows how to create the employees_pkg package, how its subprograms work, how to grant the execute privilege on the package to the users who need it, and how those users can invoke one of its subprograms.">创建employees_pkg包</a> ”</span>中的开发环境中执行<span class="q"><a href="developing-simple-database-application.html#GUID-A814459E-682F-44DB-8421-CB960B924F2D" title="本节介绍如何创建employees_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及这些用户如何调用其子程序。">了此操作</a></span> 。
                           </p>
                           <p>您可以使用文本编辑器或SQL Developer创建employees.sql。</p>
                           <p>要在任何文本编辑器中创建employees.sql，请输入以下文本并将文件另存为employees.sql。对于<span class="synph">password</span> ，请使用schema.sql在创建用户app_code时指定的密码。
                           </p><pre class="oac_no_warn" dir="ltr">-----------------------  - 创建employees_pkg ----------------------- CONNECT app_code / <span class="italic">password</span> CREATE SYNONYM员工FOR app_data.employees;为app_data.departments创建SYNONYM部门;为app_data.jobs创建SYNONYM作业;创建SYNONYM job_history FOR app_data.job_history;创建或替换包裹employees_pkg AS程序get_employees_in_dept（p_deptno IN employees.department_id％TYPE，p_result_set IN OUT SYS_REFCURSOR）;程序get_job_history（p_employee_id IN employees.department_id％TYPE，p_result_set IN OUT SYS_REFCURSOR）;程序show_employee（p_employee_id IN employees.employee_id％TYPE，p_result_set IN OUT SYS_REFCURSOR）; PROCEDURE update_salary（p_employee_id IN employees.employee_id％TYPE，p_new_salary IN employees.salary％TYPE）; PROCEDURE change_job（p_employee_id IN employees.employee_id％TYPE，p_new_job IN employees.job_id％TYPE，p_new_salary IN employees.salary％TYPE：= NULL，p_new_dept IN employees.department_id％TYPE：= NULL）; END employees_pkg; / CREATE OR REPLACE PACKAGE BODY employees_pkg AS程序get_employees_in_dept（p_deptno IN employees.department_id％TYPE，p_result_set IN OUT SYS_REFCURSOR）IS l_cursor SYS_REFCURSOR; BEGIN OPEN p_result_set FOR SELECT e.employee_id，e.first_name || ''|| e.last_name名称，TO_CHAR（e.hire_date，'Dy Mon ddth，yyyy'）hire_date，j.job_title，m.first_name || ''|| m.last_name manager，d.department_name FROM employees e INNER JOIN jobs j ON（e.job_id = j.job_id）LEFT OUTER JOIN employees m ON（e.manager_id = m.employee_id）INNER JOIN departments d ON（e.department_id = d.department_id）WHERE e.department_id = p_deptno; END get_employees_in_dept;程序get_job_history（p_employee_id IN employees.department_id％TYPE，p_result_set IN OUT SYS_REFCURSOR）是开始打开p_result_set FOR SELECT e。First_name || ''|| e.last_name name，j.job_title，e.job_start_date start_date，TO_DATE（NULL）end_date FROM employees e INNER JOIN jobs j ON（e.job_id = j.job_id）WHERE e.employee_id = p_employee_id UNION ALL SELECT e。First_name || ''|| e.last_name name，j.job_title，jh.start_date，jh.end_date FROM employees e INNER JOIN job_history jh ON（e.employee_id = jh.employee_id）INNER JOIN jobs j ON（jh.job_id = j.job_id）WHERE e。 employee_id = p_employee_id ORDER BY start_date DESC; END get_job_history;程序show_employee（p_employee_id IN employees.employee_id％TYPE，p_result_set IN OUT sys_refcursor）IS BEGIN OPEN p_result_set FOR SELECT * FROM（SELECT TO_CHAR（e.employee_id）employee_id，e.first_name ||''|| e.last_name name，e。 email_addr，TO_CHAR（e.hire_date，'dd-mon-yyyy'）hire_date，e.country_code，e.phone_number，j.job_title，TO_CHAR（e.job_start_date，'dd-mon-yyyy'）job_start_date，to_char（e。薪水），m.first_name ||''|| m.last_name manager，d.department_name FROM employees e INNER JOIN jobs j on（e.job_id = j.job_id）RIGHT OUTER JOIN员工m ON（m.employee_id = e .manager_id）INNER JOIN部门d ON（e.department_id = d.department_id）WHERE e.employee_id = p_employee_id）UNPIVOT（属性值为（employee_id，name，email_addr，hire_date，country_code，phone_number，job_title，job_start_date，salary，manager） ， 部门名称） ）; END show_employee; PROCEDURE update_salary（p_employee_id IN employees.employee_id％type，p_new_salary IN employees.salary％type）IS BEGIN UPDATE employees SET salary = p_new_salary WHERE employee_id = p_employee_id; END update_salary; PROCEDURE change_job（p_employee_id IN employees.employee_id％TYPE，p_new_job IN employees.job_id％TYPE，p_new_salary IN employees.salary％TYPE：= NULL，p_new_dept IN employees.department_id％TYPE：= NULL）IS BEGIN INSERT INTO job_history（employee_id，start_date ，end_date，job_id，department_id）SELECT employee_id，job_start_date，TRUNC（SYSDATE），job_id，department_id FROM employees WHERE employee_id = p_employee_id; UPDATE员工SET job_id = p_new_job，department_id = NVL（p_new_dept，department_id），薪水= NVL（p_new_salary，薪水），job_start_date = TRUNC（SYSDATE）WHERE employee_id = p_employee_id; END change_job; END employees_pkg; / ---------------------------------------------  - 授予权限在employees_pkg上给用户--------------------------------------------- GRANT employees_pkg EXECUTE ON app_user;对employee_pkg进行GRANT EXECUTE TO app_admin_user;</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-8EB28104-4EB5-492D-A78C-EDF33DD0F12B__GUID-E37D82F7-E775-43C0-9232-A9B6420EAA65">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="deploying-database-application.html#GUID-2BFEE40F-139F-4C72-A135-DA19E44432E1" title="SQL Developer Cart是一个方便的工具，用于将Oracle数据库对象从一个或多个数据库连接部署到目标连接。">使用购物车创建安装脚本</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="deploying-database-application.html#GUID-28560E14-D48C-4D3F-955A-608054AB2B3B" title="要使用“数据库导出”向导在SQL Developer中创建安装脚本，请指定安装脚本的名称，要导出的对象和数据以及所需的选项，向导将生成安装脚本。">使用数据库导出向导创建安装脚本</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="deploying-database-application.html#GUID-288D504D-8AD7-4750-87A9-FAF28A89AF3A" title="您可以为示例应用程序创建安装脚本。">为示例应用程序创建安装脚本</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TDDDG320"></a><div class="props_rev_3"><a id="GUID-35E7FFA1-4217-4467-894D-2121F1DF1E45" name="GUID-35E7FFA1-4217-4467-894D-2121F1DF1E45"></a><h5 id="TDDDG-GUID-35E7FFA1-4217-4467-894D-2121F1DF1E45" class="sect5"><span class="enumeration_section">10.3.5.4</span>创建安装脚本admin.sql</h5>
                     <div>
                        <div class="section">
                           <p>安装脚本admin.sql在部署环境中执行您在<span class="q">“ <a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" title="This section shows how to create the admin_pkg package, how its subprograms work, how to grant the execute privilege on the package to the user who needs it, and how that user can invoke one of its subprograms.">创建admin_pkg包</a> ”</span>中在开发环境中<span class="q"><a href="developing-simple-database-application.html#GUID-52BF06F0-37A5-49A9-A762-39FA7D5887BE" title="本节介绍如何创建admin_pkg包，子程序如何工作，如何将包的执行权限授予需要它的用户，以及该用户如何调用其子程序。">所执行的操作</a></span> 。
                           </p>
                           <p>您可以使用文本编辑器或SQL Developer创建admin.sql。</p>
                           <p>要在任何文本编辑器中创建admin.sql，请输入以下文本并将文件另存为admin.sql。对于<span class="synph">password</span> ，请使用schema.sql在创建用户app_admin时指定的密码。
                           </p><pre class="oac_no_warn" dir="ltr">-------------------  - 创建admin_pkg ------------------- CONNECT app_admin / <span class="italic">password</span> CREATE SYNONYM departments FOR app_data.departments;为app_data.jobs创建SYNONYM作业;创建SYNONYM departments_sequence FOR app_data.departments_sequence;创建或替换包装admin_pkg AS程序update_job（p_job_id IN jobs.job_id％TYPE，p_job_title IN jobs.job_title％TYPE：= NULL，p_min_salary IN jobs.min_salary％TYPE：= NULL，p_max_salary IN jobs.max_salary％TYPE：= NULL） ;程序add_job（p_job_id IN jobs.job_id％TYPE，p_job_title IN jobs.job_title％TYPE，p_min_salary IN jobs.min_salary％TYPE，p_max_salary IN jobs.max_salary％TYPE）; PROCEDURE update_department（p_department_id IN departmentss.department_id％TYPE，p_department_name IN departments.department_name％TYPE：= NULL，p_manager_id IN departments.manager_id％TYPE：= NULL，p_update_manager_id IN BOOLEAN：= FALSE）;功能add_department（p_department_name IN departments.department_name％TYPE，p_manager_id IN departments.manager_id％TYPE）RETURN departments.department_id％TYPE; END admin_pkg; / CREATE OR REPLACE PACKAGE BODY admin_pkg AS PROCEDURE update_job（p_job_id IN jobs.job_id％TYPE，p_job_title IN jobs.job_title％TYPE：= NULL，p_min_salary IN jobs.min_salary％TYPE：= NULL，p_max_salary IN jobs.max_salary％TYPE：= NULL）IS BEGIN UPDATE作业SET job_title = NVL（p_job_title，job_title），min_salary = NVL（p_min_salary，min_salary），max_salary = NVL（p_max_salary，max_salary）WHERE job_id = p_job_id; END update_job;程序add_job（p_job_id IN jobs.job_id％TYPE，p_job_title IN jobs.job_title％TYPE，p_min_salary IN jobs.min_salary％TYPE，p_max_salary IN jobs.max_salary％TYPE）IS BEGIN INSERT INTO jobs（job_id，job_title，min_salary，max_salary）VALUES （p_job_id，p_job_title，p_min_salary，p_max_salary）; END add_job;过程update_department（p_department_id IN departmentss.department_id％TYPE，p_department_name IN departments.department_name％TYPE：= NULL，p_manager_id IN departments.manager_id％TYPE：= NULL，p_update_manager_id IN BOOLEAN：= FALSE）IS BEGIN IF（p_update_manager_id）THEN UPDATE departments SET department_name = NVL（p_department_name，department_name），manager_id = p_manager_id WHERE department_id = p_department_id; ELSE UPDATE部门SET department_name = NVL（p_department_name，department_name）WHERE department_id = p_department_id;万一; END update_department;功能add_department（p_department_name IN departments.department_name％TYPE，p_manager_id IN departments.manager_id％TYPE）RETURN departments.department_id％TYPE IS l_department_id departments.department_id％TYPE; BEGIN INSERT INTO部门（department_id，department_name，manager_id）VALUES（departments_sequence。NEXTVAL，p_department_name，p_manager_id）RETURNING department_id INTO l_department_id;返回l_department_id; END add_department; END admin_pkg; / ----------------------------------------  - 将admin_pkg的权限授予用户 - --------------------------------------- GRANT EXECUTE ON admin_pkg TO app_admin_user;</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-35E7FFA1-4217-4467-894D-2121F1DF1E45__GUID-BDCCCE6E-3756-42DF-9A6F-0EDFEE43DB82">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="deploying-database-application.html#GUID-2BFEE40F-139F-4C72-A135-DA19E44432E1" title="SQL Developer Cart是一个方便的工具，用于将Oracle数据库对象从一个或多个数据库连接部署到目标连接。">使用购物车创建安装脚本</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="deploying-database-application.html#GUID-28560E14-D48C-4D3F-955A-608054AB2B3B" title="要使用“数据库导出”向导在SQL Developer中创建安装脚本，请指定安装脚本的名称，要导出的对象和数据以及所需的选项，向导将生成安装脚本。">使用数据库导出向导创建安装脚本</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="deploying-database-application.html#GUID-288D504D-8AD7-4750-87A9-FAF28A89AF3A" title="您可以为示例应用程序创建安装脚本。">为示例应用程序创建安装脚本</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TDDDG321"></a><div class="props_rev_3"><a id="GUID-CAC28766-5EB6-4E1D-A995-D80CF0447040" name="GUID-CAC28766-5EB6-4E1D-A995-D80CF0447040"></a><h5 id="TDDDG-GUID-CAC28766-5EB6-4E1D-A995-D80CF0447040" class="sect5"><span class="enumeration_section">10.3.5.5</span>创建主安装脚本create_app.sql</h5>
                     <div>
                        <div class="section">
                           <p>主安装脚本create_app.sql以正确的顺序运行示例应用程序的其他四个安装脚本，从而在部署环境中部署示例应用程序。</p>
                           <p>要创建create_app.sql，请在任何文本编辑器中输入以下文本，并将文件另存为create_app.sql：</p><pre class="oac_no_warn" dir="ltr">@ schemas.sql @ objects.sql @ employees.sql @ admin.sql</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="deploying-database-application.html#GUID-288D504D-8AD7-4750-87A9-FAF28A89AF3A" title="您可以为示例应用程序创建安装脚本。">为示例应用程序创建安装脚本</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="TDDDG326"></a><a id="TDDDG120"></a><a id="TDDDG76000"></a><div class="props_rev_3"><a id="GUID-25097EF6-B6FB-408E-BA38-2681C99D10AA" name="GUID-25097EF6-B6FB-408E-BA38-2681C99D10AA"></a><h3 id="TDDDG-GUID-25097EF6-B6FB-408E-BA38-2681C99D10AA" class="sect3"><span class="enumeration_section">10.4</span>部署示例应用程序</h3>
               <div>
                  <p>您可以使用安装脚本部署示例应用程序。</p>
                  <div class="section">
                     <p>使用您在<span class="q">“ <a href="deploying-database-application.html#GUID-288D504D-8AD7-4750-87A9-FAF28A89AF3A" title="You can create installation scripts for the sample application.">为示例应用程序创建安装脚本</a> ”中<a href="deploying-database-application.html#GUID-288D504D-8AD7-4750-87A9-FAF28A89AF3A" title="您可以为示例应用程序创建安装脚本。">创建的安装脚本</a></span> 。
                     </p>
                     <div class="infoboxnote" id="GUID-25097EF6-B6FB-408E-BA38-2681C99D10AA__GUID-7F192469-57F2-4CC9-BEC1-C7C2E9920779">
                        <p class="notep1">注意：</p>
                        <p>对于以下过程，您需要具有<span class="keyword">CREATE USER</span>和<span class="keyword">DROP USER</span>系统特权的用户的名称和密码。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-25097EF6-B6FB-408E-BA38-2681C99D10AA__GUID-04E3CD4E-C3E3-4715-BD3B-EDA53B6B48BF">要使用SQL * Plus部署示例应用程序：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ol>
                        <li>
                           <p>将您在<span class="q">“ <a href="deploying-database-application.html#GUID-288D504D-8AD7-4750-87A9-FAF28A89AF3A" title="You can create installation scripts for the sample application.">为示例应用程序创建安装脚本</a> ”中<a href="deploying-database-application.html#GUID-288D504D-8AD7-4750-87A9-FAF28A89AF3A" title="您可以为示例应用程序创建安装脚本。">创建的安装脚本</a></span>复制到部署环境。
                           </p>
                        </li>
                        <li>
                           <p>在部署环境中，以具有<span class="keyword">CREATE USER</span>和<span class="keyword">DROP USER</span>系统特权的用户身份连接到Oracle数据库。
                           </p>
                        </li>
                        <li>
                           <p>在<samp class="sysout">SQL&gt;</samp>提示符下，运行主安装脚本：</p><pre class="oac_no_warn" dir="ltr">@ create_app.sql</pre><p>主安装脚本以正确的顺序运行示例应用程序的其他四个安装脚本，从而在部署环境中部署示例应用程序。</p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-25097EF6-B6FB-408E-BA38-2681C99D10AA__GUID-9114DA1B-BD48-40A0-990B-473562312422">使用SQL Developer部署示例应用程序：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>如有必要，请创建与部署环境的连接。</span><div>
                           <p>对于“连接名称”，请输入<span class="italic">不是</span>与开发环境的连接名称的名称。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>将您在<span class="q">“ <a href="deploying-database-application.html#GUID-288D504D-8AD7-4750-87A9-FAF28A89AF3A" title="You can create installation scripts for the sample application.">为示例应用程序创建安装脚本</a> ”中<a href="deploying-database-application.html#GUID-288D504D-8AD7-4750-87A9-FAF28A89AF3A" title="您可以为示例应用程序创建安装脚本。">创建的安装脚本</a></span>复制到部署环境。</span></li>
                     <li class="stepexpand"><span>以具有部署环境中的<span class="keyword">CREATE USER</span>和<span class="keyword">DROP USER</span>系统特权的用户身份连接到Oracle数据库。</span><div>
                           <p>将出现一个新窗格。在其选项卡上是与部署环境的连接的名称。该窗格有两个子窗格， <span class="wintitle">Worksheet</span>和<span class="wintitle">Query Builder</span> 。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>在“ <span class="wintitle">工作表”</span>窗格中，键入用于运行主安装脚本的命令：</span><div><pre class="oac_no_warn" dir="ltr">@ create_app.sql</pre></div>
                     </li>
                     <li class="stepexpand"><span>单击图标<span class="uicontrol bold">Run Script</span> 。</span><div>
                           <p>主安装脚本以正确的顺序运行示例应用程序的其他四个安装脚本，从而在部署环境中部署示例应用程序。输出显示在“ <span class="wintitle">脚本输出”</span>窗格中的“ <span class="wintitle">工作表”</span>窗格下。
                           </p>
                           <p>在<span class="wintitle">Connections</span>框架中，如果展开与部署环境的连接，然后展开示例应用程序使用的每个对象的类型，则会看到示例应用程序的对象。
                           </p>
                        </div>
                     </li>
                  </ol>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-25097EF6-B6FB-408E-BA38-2681C99D10AA__GUID-4515F02E-FB4E-43A3-BFB6-F8A5142C8F47">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="../sqpug/using-scripts-in-SQL-Plus.html#SQPUG015" target="_blank"><span class="italic">SQL * Plus用户指南和参考</span></a>有关在SQL * Plus中使用脚本的更多信息</p>
                        </li>
                        <li>
                           <p>有关在SQL Developer中运行脚本的详细信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tdddg&amp;id=RPTUG10720" target="_blank"><span class="italic">“Oracle SQL Developer用户指南”</span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="deploying-database-application.html#GUID-3EC7DEF5-3FF2-47C7-A18F-E11DAC206BE5" title="开发应用程序后，可以将其安装在其他用户可以运行的其他数据库（称为部署环境）上。">部署Oracle数据库应用程序</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TDDDG77000"></a><div class="props_rev_3"><a id="GUID-F2BDB974-026B-4746-A68E-C83239A785A1" name="GUID-F2BDB974-026B-4746-A68E-C83239A785A1"></a><h3 id="TDDDG-GUID-F2BDB974-026B-4746-A68E-C83239A785A1" class="sect3"><span class="enumeration_section">10.5</span>检查安装的有效性</h3>
               <div>
                  <p>在部署环境中安装应用程序后，可以使用SQL Developer检查其有效性。</p>
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在<span class="wintitle">Connections</span>框架中：</p>
                           <ol>
                              <li>
                                 <p>展开与部署环境的连接。</p>
                              </li>
                              <li>
                                 <p>检查新对象的定义。</p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>在“ <span class="wintitle">报告”</span>窗格中：</p>
                           <ol>
                              <li>
                                 <p>展开<span class="uicontrol bold">数据字典报告</span> 。
                                 </p>
                                 <p>将显示数据字典报告列表。</p>
                              </li>
                              <li>
                                 <p>展开<span class="uicontrol bold">所有对象</span> 。
                                 </p>
                                 <p>出现对象列表报告。</p>
                              </li>
                              <li>
                                 <p>选择<span class="uicontrol bold">所有对象</span> 。
                                 </p>
                                 <p>将出现“ <span class="wintitle">选择连接”</span>窗口。
                                 </p>
                              </li>
                              <li>
                                 <p>在“ <span class="wintitle">连接”</span>字段中，从菜单中选择与部署环境的连接。
                                 </p>
                              </li>
                              <li>
                                 <p>单击<span class="uicontrol bold">确定</span> 。</p>
                              </li>
                              <li>
                                 <p>在“ <span class="wintitle">输入绑定值”</span>窗口中，选择“ <code>Owner</code>或“ <code>Object Name</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>单击“ <span class="uicontrol bold">应用”</span>
                                 </p>
                                 <p><samp class="sysout">显示结果</samp>显示消息，然后<samp class="sysout">显示结果</samp> 。
                                 </p>
                                 <p>对于每个对象，此报告列出所有者，对象类型，对象名称，状态（有效或无效），创建日期和上次DDL。最后一个DDL是影响该对象的最后一个DDL操作的日期。</p>
                              </li>
                              <li>
                                 <p>在“ <span class="wintitle">报告”</span>窗格中，选择“ <span class="uicontrol bold">无效对象”</span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在“ <span class="wintitle">输入绑定值”</span>窗口中，单击“ <span class="uicontrol bold">应用”</span> 。
                                 </p>
                                 <p>对于状态为“无效”的每个对象，此报告将列出“所有者”，“对象类型”和“对象名称”。</p>
                              </li>
                           </ol>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-F2BDB974-026B-4746-A68E-C83239A785A1__GUID-B0CD35AA-6108-403E-9038-BC7E49F07B83">
                     <p class="notep1">也可以看看：</p>
                     <p>有关SQL Developer报告的详细信息，请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tdddg&amp;id=RPTUG11000" target="_blank"><span class="italic">“Oracle SQL Developer用户指南”</span></a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="deploying-database-application.html#GUID-3EC7DEF5-3FF2-47C7-A18F-E11DAC206BE5" title="开发应用程序后，可以将其安装在其他用户可以运行的其他数据库（称为部署环境）上。">部署Oracle数据库应用程序</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TDDDG78000"></a><div class="props_rev_3"><a id="GUID-2343DECE-C394-4668-849C-434BE385D92B" name="GUID-2343DECE-C394-4668-849C-434BE385D92B"></a><h3 id="TDDDG-GUID-2343DECE-C394-4668-849C-434BE385D92B" class="sect3"><span class="enumeration_section">10.6</span>存档安装脚本</h3>
               <div>
                  <p>在验证应用程序的安装是否有效后，Oracle建议您将安装脚本存档在源代码控制系统中。</p>
                  <div class="section">
                     <p>在此之前，请为每个文件添加注释，记录其创建日期和目的。如果必须将同一应用程序部署到其他环境，则可以使用这些存档文件。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-2343DECE-C394-4668-849C-434BE385D92B__GUID-1F0BA2DB-DBA4-4F4F-8525-25C328A9948E">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../sutil/oracle-data-pump-overview.html#SUTIL100" target="_blank"><span class="italic">Oracle数据库实用程序</span></a> ，提供有关Oracle Data Pump的信息，该数据泵可以将数据和元数据从一个数据库高速移动到另一个数据库</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="deploying-database-application.html#GUID-3EC7DEF5-3FF2-47C7-A18F-E11DAC206BE5" title="开发应用程序后，可以将其安装在其他用户可以运行的其他数据库（称为部署环境）上。">部署Oracle数据库应用程序</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
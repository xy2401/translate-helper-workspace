<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>对象有用的函数和操作符</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Object-Relational Developer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Object-Relational Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="object-relational-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T02:05:10-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96436-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="inheritance-in-sql-object-types.html" title="Previous" type="text/html"></link>
      <link rel="next" href="using-pl-sql-with--object-types.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Object-Relational Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADOBJ"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="inheritance-in-sql-object-types.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="using-pl-sql-with--object-types.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">对象关系开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="basic-components-of-oracle-objects.html" property="item" typeof="WebPage"><span property="name">Oracle Objects的基本组件</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">对象有用的函数和操作符</li>
            </ol>
            <a id="GUID-502C8BA5-8B2F-4E57-B526-0C857DD3FA77" name="GUID-502C8BA5-8B2F-4E57-B526-0C857DD3FA77"></a><a id="ADOBJ00206"></a>
            
            <h2 id="ADOBJ-GUID-502C8BA5-8B2F-4E57-B526-0C857DD3FA77" class="sect2"><span class="enumeration_section">2.4</span>对象有用的函数和操作符</h2>
         </header>
         <div class="ind">
            <div>
               <p>有几个函数和运算符对于处理对象和对象的引用特别有用。</p>
               <p>本书给出了一些例子。</p>
               <div class="infoboxnote" id="GUID-502C8BA5-8B2F-4E57-B526-0C857DD3FA77__GUID-B49B7FE5-5EAB-494D-B74C-92D9FA6AB6AF">
                  <p class="notep1">注意：</p>
                  <p>在PL / SQL中， <code class="codeph">VALUE</code> ， <code class="codeph">REF</code>和<code class="codeph">DEREF</code>函数只能出现在SQL语句中。有关SQL函数的信息，请参见<a href="../sqlrf/Functions.html#SQLRF006" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。
                  </p>
               </div>
               <p>话题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="functions-and-operators-useful-with-objects.html#GUID-6CD85D07-1E06-4E42-A582-68F478040A39">投</a></p>
                  </li>
                  <li>
                     <p><a href="functions-and-operators-useful-with-objects.html#GUID-19FD7229-FEC2-4723-B31E-EA94344441E3">光标</a></p>
                  </li>
                  <li>
                     <p><a href="functions-and-operators-useful-with-objects.html#GUID-332E61D5-B8AF-4008-9584-7E8A5FCC92C3">DEREF</a></p>
                  </li>
                  <li>
                     <p><a href="functions-and-operators-useful-with-objects.html#GUID-E04639B8-949A-4FF7-ADBF-FEFE8646FFF1">是类型的</a></p>
                  </li>
                  <li>
                     <p><a href="functions-and-operators-useful-with-objects.html#GUID-770A35CB-BA31-4535-B086-F46FF8F8750D">REF</a></p>
                  </li>
                  <li>
                     <p><a href="functions-and-operators-useful-with-objects.html#GUID-05C7D6E4-F294-4632-B0B6-F7574DB5CDFE">SYS_TYPEID</a></p>
                  </li>
                  <li>
                     <p><a href="functions-and-operators-useful-with-objects.html#GUID-29189323-FD7F-4EAF-87AE-FBC4CE5CC9D1">表（）</a></p>
                  </li>
                  <li>
                     <p><a href="functions-and-operators-useful-with-objects.html#GUID-5C6151A6-13C5-42A6-8182-77FC7957C8B5">对待</a></p>
                  </li>
                  <li>
                     <p><a href="functions-and-operators-useful-with-objects.html#GUID-6BA5D983-5B94-49C2-BDD7-7B2B7E15B117">值</a></p>
                  </li>
               </ul>
            </div><a id="ADOBJ7153"></a><a id="ADOBJ7152"></a><div class="props_rev_3"><a id="GUID-6CD85D07-1E06-4E42-A582-68F478040A39" name="GUID-6CD85D07-1E06-4E42-A582-68F478040A39"></a><h3 id="ADOBJ-GUID-6CD85D07-1E06-4E42-A582-68F478040A39" class="sect3"><span class="enumeration_section">2.4.1</span> CAST</h3>
               <div>
                  <div class="section">
                     <p><code class="codeph">CAST</code>将一个内置数据类型或集合类型值转换为另一个内置数据类型或集合类型值。例如：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-6CD85D07-1E06-4E42-A582-68F478040A39__GUID-5CDD6751-C300-451C-9C0C-93559269A6F7">
                     <p class="titleinexample">例2-33使用CAST功能</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE person_list_typ AS TABLE of person_typ; / SELECT <span class="bold">CAST</span> （COLLECT（contact）AS person_list_typ）FROM contacts;</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-6CD85D07-1E06-4E42-A582-68F478040A39__GUID-E25A1308-B262-41F8-8CCD-C8819BB55E7E">
                        <p class="notep1">也可以看看：</p>
                        <p>有关SQL <code class="codeph">CAST</code>函数的更多信息，请参阅<a href="../sqlrf/CAST.html#SQLRF00613" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADOBJ7154"></a><div class="props_rev_3"><a id="GUID-19FD7229-FEC2-4723-B31E-EA94344441E3" name="GUID-19FD7229-FEC2-4723-B31E-EA94344441E3"></a><h3 id="ADOBJ-GUID-19FD7229-FEC2-4723-B31E-EA94344441E3" class="sect3"><span class="enumeration_section">2.4.2</span> CURSOR</h3>
               <div>
                  <div class="section">
                     <p><code class="codeph">CURSOR</code>表达式返回嵌套游标。
                     </p>
                     <p>表达式的游标形式等同于PL / SQL <code class="codeph">REF</code> <code class="codeph">CURSOR</code> ，可以作为<code class="codeph">REF</code> <code class="codeph">CURSOR</code>参数传递给函数。
                     </p>
                     <div class="infoboxnotealso" id="GUID-19FD7229-FEC2-4723-B31E-EA94344441E3__GUID-9E3A7B9B-6326-4030-B1D7-E5473BF0BAA3">
                        <p class="notep1">也可以看看：</p>
                        <p>有关SQL <code class="codeph">CURSOR</code>表达式的更多信息，请参见<a href="../sqlrf/Expressions.html#SQLRF004" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADOBJ7156"></a><a id="ADOBJ7155"></a><div class="props_rev_3"><a id="GUID-332E61D5-B8AF-4008-9584-7E8A5FCC92C3" name="GUID-332E61D5-B8AF-4008-9584-7E8A5FCC92C3"></a><h3 id="ADOBJ-GUID-332E61D5-B8AF-4008-9584-7E8A5FCC92C3" class="sect3"><span class="enumeration_section">2.4.3</span> DEREF</h3>
               <div>
                  <div class="section">
                     <p>SQL语句中的<code class="codeph">DEREF</code>函数返回与<code class="codeph">REF</code>对应的对象实例。</p>
                     <p><code class="codeph">DEREF</code>返回的对象实例可以是<code class="codeph">REF</code>的声明类型或其任何子类型。
                     </p>
                     <p>例如，以下语句返回表<code class="codeph">contact_ref</code> <code class="codeph">person_typ</code>对象。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-332E61D5-B8AF-4008-9584-7E8A5FCC92C3__GUID-8700C626-8633-4276-A18D-CB16439892C3">
                     <p class="titleinexample">例2-34使用DEREF函数</p><pre class="oac_no_warn" dir="ltr">- 使用DEREF函数示例，而不是示例模式</pre><pre class="oac_no_warn" dir="ltr">SELECT DEREF（c.contact_ref），c.contact_date FROM contacts_ref c;</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-332E61D5-B8AF-4008-9584-7E8A5FCC92C3__GUID-76806DB8-DB65-4007-A38B-5D7C051938BF">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="key-features-object-relational-model.html#GUID-27E79AFF-6360-410F-8900-19A16B1AD8EC" title="此示例显示如何使用DEREF命令来解除REF。">解除引用REF</a> ”</span></p>
                           </li>
                           <li>
                              <p></p>
                              <p>有关SQL <code class="codeph">DEREF</code>函数的更多信息，请参见<a href="../sqlrf/DEREF.html#SQLRF00634" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADOBJ7158"></a><a id="ADOBJ7157"></a><div class="props_rev_3"><a id="GUID-E04639B8-949A-4FF7-ADBF-FEFE8646FFF1" name="GUID-E04639B8-949A-4FF7-ADBF-FEFE8646FFF1"></a><h3 id="ADOBJ-GUID-E04639B8-949A-4FF7-ADBF-FEFE8646FFF1" class="sect3"><span class="enumeration_section">2.4.4</span> IS OF <span class="italic">类型</span> 
               </h3>
               <div>
                  <div class="section">
                     <p><code class="codeph">IS</code> <code class="codeph">OF</code> <span class="italic"><code class="codeph">type</code></span>谓词测试对象实例的类型专业化水平。
                     </p>
                     <p>例如，以下查询检索存储在<code class="codeph">person_obj_table</code>表中的所有学生实例（包括学生的任何子类型）。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-E04639B8-949A-4FF7-ADBF-FEFE8646FFF1__GUID-5E61AE5F-D346-4771-98F5-AD526BD6B3BA">
                     <p class="titleinexample">例2-35使用IS OF类型运算符查询子类型的值</p><pre class="oac_no_warn" dir="ltr">- 使用IS OF类型运算符查询子类型的值</pre><pre class="oac_no_warn" dir="ltr">SELECT VALUE（p）FROM person_obj_table p WHERE VALUE（p）IS OF（student_typ）;</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <p>对于任何不是指定子类型的对象或指定子类型的子类型， <code class="codeph">IS</code> <code class="codeph">OF</code>返回<code class="codeph">FALSE</code> 。指定子类型的子类型只是指定子类型的更专用版本。如果要排除此类子类型，可以使用<code class="codeph">ONLY</code>关键字。此关键字导致<code class="codeph">IS</code> <code class="codeph">OF</code>对除指定类型之外的所有类型返回<code class="codeph">FALSE</code> 。
                     </p>
                     <p>在以下示例中，语句测试对象表<code class="codeph">person_obj_table</code>中的对象，其中包含人员，员工和学生，并将<code class="codeph">REF</code>仅返回给两个指定人员子类型<code class="codeph">employee_typ</code> ， <code class="codeph">student_typ</code>及其子类型（如果有）的对象：</p><pre class="oac_no_warn" dir="ltr">- 使用IS OF类型运算符查询多个子类型</pre><pre class="oac_no_warn" dir="ltr">SELECT REF（p）FROM person_obj_table p WHERE VALUE（p）IS OF（employee_typ，student_typ）;</pre><p>这是PL / SQL中的类似示例。如果此人是员工或学生，代码会执行某些操作：</p><pre class="oac_no_warn" dir="ltr">- 使用带有PL / SQL的IS OF类型运算符</pre><pre class="oac_no_warn" dir="ltr">DECLARE var person_typ; BEGIN var：= employee_typ（55，'Jane Smith'，'1-650-555-0144'，100，'Jennifer Nelson'）; IF var IS OF（employee_typ，student_typ）那么DBMS_OUTPUT.PUT_LINE（'Var是employee_typ或student_typ对象。“）; ELSE DBMS_OUTPUT.PUT_LINE（'Var不是employee_typ或student_typ对象。“）;万一;结束; /</pre><p>以下语句仅返回最具体或特殊类型为<code class="codeph">student_typ</code> 。如果表或视图包含<code class="codeph">student_typ</code>子类型的任何对象，例如<code class="codeph">part_time_student_typ</code> ，则会排除这些对象。该示例使用<code class="codeph">TREAT</code>函数将学生的对象从视图的声明类型<code class="codeph">person_typ</code>转换为<code class="codeph">student_typ</code> ：</p><pre class="oac_no_warn" dir="ltr">- 使用IS OF类型运算符仅查询特定子类型</pre><pre class="oac_no_warn" dir="ltr">SELECT TREAT（VALUE（p）AS student_typ）FROM person_obj_table p WHERE VALUE（p）IS OF（仅限student_typ）;</pre><p>要测试<code class="codeph">REF</code>指向的对象的类型，可以在使用<code class="codeph">IS</code> <code class="codeph">OF</code> <span class="italic"><code class="codeph">type</code></span>谓词进行测试之前使用<code class="codeph">DEREF</code>函数取消引用<code class="codeph">REF</code> 。
                     </p>
                     <p>例如，如果将<code class="codeph">contact_ref</code>声明为<code class="codeph">REF</code> <code class="codeph">person_typ</code> ，则可以按如下方式获取学生的行：</p><pre class="oac_no_warn" dir="ltr">- 使用带有DEREF的IS OF类型运算符</pre><pre class="oac_no_warn" dir="ltr">SELECT * FROM contacts_ref WHERE DEREF（contact_ref）IS OF（student_typ）;</pre><div class="infoboxnotealso" id="GUID-E04639B8-949A-4FF7-ADBF-FEFE8646FFF1__GUID-B71EEF63-B0F0-45DE-AEF5-51408F36CB21">
                        <p class="notep1">也可以看看：</p>
                        <p>有关SQL <code class="codeph">IS</code> <code class="codeph">OF</code> <span class="italic"><code class="codeph">type</code></span>条件的更多信息，请参见<a href="../sqlrf/Conditions.html#SQLRF005" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> 。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADOBJ7160"></a><a id="ADOBJ7159"></a><div class="props_rev_3"><a id="GUID-770A35CB-BA31-4535-B086-F46FF8F8750D" name="GUID-770A35CB-BA31-4535-B086-F46FF8F8750D"></a><h3 id="ADOBJ-GUID-770A35CB-BA31-4535-B086-F46FF8F8750D" class="sect3"><span class="enumeration_section">2.4.5</span> REF</h3>
               <div>
                  <div class="section">
                     <p>SQL语句中的<code class="codeph">REF</code>函数将对象表或视图的相关名（或表别名）作为参数，并将引用（ <code class="codeph">REF</code> ）从该表或视图返回到对象实例。
                     </p>
                     <p><code class="codeph">REF</code>函数可以返回对表，视图或其任何子类型的声明类型的对象的引用。例如，以下语句返回对所有人的引用，包括对<code class="codeph">idno</code>属性为12的学生和员工的<code class="codeph">idno</code> ：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-770A35CB-BA31-4535-B086-F46FF8F8750D__GUID-420913EE-8E36-427D-9EC4-B9A246FB2628">
                     <p class="titleinexample">例2-36使用REF功能</p><pre class="oac_no_warn" dir="ltr">- 使用REF函数示例，而不是示例模式</pre><pre class="oac_no_warn" dir="ltr">SELECT REF（p）FROM person_obj_table p WHERE p.idno = 12;</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-770A35CB-BA31-4535-B086-F46FF8F8750D__GUID-FCBF3751-2F9A-4026-8C21-2174D5D16504">
                        <p class="notep1">也可以看看：</p>
                        <p>有关SQL <code class="codeph">REF</code>函数的更多信息，请参见<a href="../sqlrf/REF.html#SQLRF00694" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> 。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADOBJ7162"></a><a id="ADOBJ7161"></a><div class="props_rev_3"><a id="GUID-05C7D6E4-F294-4632-B0B6-F7574DB5CDFE" name="GUID-05C7D6E4-F294-4632-B0B6-F7574DB5CDFE"></a><h3 id="ADOBJ-GUID-05C7D6E4-F294-4632-B0B6-F7574DB5CDFE" class="sect3"><span class="enumeration_section">2.4.6</span> SYS_TYPEID</h3>
               <div>
                  <div class="section">
                     <p>可以在查询中使用<code class="codeph">SYS_TYPEID</code>函数来返回作为参数传递的最具体类型的对象实例的typeid（隐藏类型）。
                     </p>
                     <p>对象实例的最具体类型是实例所属的类型，即从根类型中删除的最远的实例。例如，如果Tim是兼职学生，他也是学生和个人，但他最具体的类型是兼职学生。</p>
                     <p>该函数返回与每个可替换列关联的隐藏类型判别列中的typeid。该函数为最终的根类型返回null typeid。</p>
                     <p>该函数的语法是：</p>
                     <p><code class="codeph">SYS_TYPEID（object_type_value）</code></p>
                     <p>函数<code class="codeph">SYS_TYPEID</code>只能用于对象类型的参数。其主要目的是使在隐藏类型判别列上建立索引成为可能。
                     </p>
                     <p>属于类型层次结构的所有类型都分配了一个非null的typeid，该typeid在类型层次结构中是唯一的。不属于类型层次结构的类型具有null typeid。</p>
                     <p>除最终根类型之外的每种类型都属于类型层次结构。最终的根类型没有与继承相关的类型：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>它不能有从它派生的子类型，因为它是最终的。</p>
                        </li>
                        <li>
                           <p>它本身不是从其他类型派生的，因为它是根类型，所以它没有任何超类型。</p>
                        </li>
                     </ul>
                     <p>对于示例<code class="codeph">SYS_TYPEID</code> ，考虑可取代的对象表<code class="codeph">person_obj_table</code>的， <code class="codeph">person_typ</code> 。 <code class="codeph">person_typ</code>是层次结构的根类型，其中<code class="codeph">student_typ</code>作为子类型， <code class="codeph">part_time_student_typ</code>作为<code class="codeph">student_typ</code>的子类型。参见<a href="inheritance-in-sql-object-types.html#GUID-FC96C63D-4DE4-4C4A-9C7D-A6E945644A0B__CHDJGIAG">例2-20</a> 。
                     </p>
                     <p>以下查询使用<code class="codeph">SYS_TYPEID</code> 。它获取<code class="codeph">person_obj_table</code>表中对象实例的<code class="codeph">name</code>属性和<code class="codeph">typeid</code> 。每个实例都是不同的类型：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-05C7D6E4-F294-4632-B0B6-F7574DB5CDFE__GUID-03929D02-6E2A-434D-81EC-956D07F6B9A8">
                     <p class="titleinexample">例2-37使用SYS_TYPEID函数</p><pre class="oac_no_warn" dir="ltr">- 使用SYS_TYPEID函数示例，而不是示例模式</pre><pre class="oac_no_warn" dir="ltr">SELECT name，SYS_TYPEID（VALUE（p））typeid FROM person_obj_table p;</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-05C7D6E4-F294-4632-B0B6-F7574DB5CDFE__GUID-33D1ED29-D0ED-4062-8624-E3CC242B4044">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关类型判别式和其他隐藏列的信息，请参阅<span class="q">“ <a href="storage-of-objects.html#GUID-349CF29A-7F51-4142-9724-90D5F9CDFD6D">可替换列和对象表的隐藏列</a> ”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>有关SQL <code class="codeph">SYS</code> <code class="codeph">TYPEID</code>函数的更多信息，请参见<a href="../sqlrf/REF.html#SQLRF00694" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADOBJ7163"></a><div class="props_rev_3"><a id="GUID-29189323-FD7F-4EAF-87AE-FBC4CE5CC9D1" name="GUID-29189323-FD7F-4EAF-87AE-FBC4CE5CC9D1"></a><h3 id="ADOBJ-GUID-29189323-FD7F-4EAF-87AE-FBC4CE5CC9D1" class="sect3"><span class="enumeration_section">2.4.7</span> TABLE（）</h3>
               <div>
                  <div class="section">
                     <p>表函数是生成行集合，嵌套表格或varray的函数，可以像物理数据库表一样查询或分配给PL / SQL集合变量。</p>
                     <p>您可以在查询的<code class="codeph">FROM</code>子句中使用表函数（如数据库表的名称），或者像查询的<code class="codeph">SELECT</code>列表中的列名一样使用。
                     </p>
                     <p>表函数可以将行集合作为输入。输入集合参数可以是集合类型，例如<code class="codeph">VARRAY</code>或PL / SQL表，也可以是<code class="codeph">REF</code> <code class="codeph">CURSOR</code> 。</p>
                     <p>使用<code class="codeph">PIPELINED</code>指示Oracle数据库迭代地返回表函数的结果。表函数返回嵌套表或varray类型。您可以在查询的<code class="codeph">FROM</code>子句中的函数名称之前使用<code class="codeph">TABLE</code>关键字来查询表函数。
                     </p>
                     <div class="infoboxnotealso" id="GUID-29189323-FD7F-4EAF-87AE-FBC4CE5CC9D1__GUID-2A8356BF-FA66-43C7-B692-CFF05FD56499">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<code class="codeph">TABLE()</code>函数的信息，请参阅</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../addci/using-pipelined-and-parallel-table-functions.html#ADDCI2140" target="_blank"><span><cite>Oracle数据库数据盒开发人员指南</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="../lnpls/plsql-language-elements.html#LNPLS013" target="_blank"><span><cite>Oracle数据库PL / SQL语言参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADOBJ7164"></a><div class="props_rev_3"><a id="GUID-5C6151A6-13C5-42A6-8182-77FC7957C8B5" name="GUID-5C6151A6-13C5-42A6-8182-77FC7957C8B5"></a><h3 id="ADOBJ-GUID-5C6151A6-13C5-42A6-8182-77FC7957C8B5" class="sect3"><span class="enumeration_section">2.4.8</span>条约</h3>
               <div>
                  <div class="section">
                     <p><code class="codeph">TREAT</code>函数执行运行时检查以确认表达式可以作为层次结构中的不同指定类型进行操作，通常是表达式的声明类型的子类型。
                     </p>
                     <p>换句话说， <code class="codeph">TREAT</code>函数尝试将超类型实例视为子类型实例，例如，将某人视为学生。如果该人是学生，那么该人将作为学生返回，具有学生可能具有的附加属性和方法。如果此人不是学生， <code class="codeph">TREAT</code>在SQL中返回<code class="codeph">NULL</code> 。</p>
                     <p><code class="codeph">TREAT</code>的两个主要用途是：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在缩小赋值时，修改表达式的类型，以便可以将表达式分配给层次结构中更专用类型的变量：即，将超类型值设置为子类型。</p>
                        </li>
                        <li>
                           <p>访问行或列的声明类型的子类型的属性或方法。</p>
                           <p>类型<code class="codeph">T</code>的可替换对象表或列具有用于<code class="codeph">T</code>的每个子类型的每个属性的隐藏列。这些隐藏列包含子类型属性数据，但您不能使用<code class="codeph">DESCRIBE</code>语句列出它们。<code class="codeph">TREAT</code>使您可以访问这些列。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADOBJ7166"></a><a id="ADOBJ7165"></a><div class="props_rev_3"><a id="GUID-BC4A9F27-9A34-481C-BEE7-75D5913E4399" name="GUID-BC4A9F27-9A34-481C-BEE7-75D5913E4399"></a><h4 id="ADOBJ-GUID-BC4A9F27-9A34-481C-BEE7-75D5913E4399" class="sect4"><span class="enumeration_section">2.4.8.1</span>使用TREAT缩小分配</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">TREAT</code>函数用于缩小赋值，即将超类型值设置为子类型的赋值。有关扩展分配的比较，请参阅<span class="q">“ <a href="inheritance-in-sql-object-types.html#GUID-7C8C1750-6182-4351-B177-FDD398E55E70" title="在集合类型的表达式的赋值中，源和目标必须具有相同的声明类型。">跨类型分配</a> ”</span> 。
                        </p>
                        <p>在<a href="functions-and-operators-useful-with-objects.html#GUID-BC4A9F27-9A34-481C-BEE7-75D5913E4399__CHDGIGFA">例2-38中</a> ， <code class="codeph">TREAT</code>从<code class="codeph">person_obj_table</code>类型的<code class="codeph">person_typ</code>返回所有（也是唯一的） <code class="codeph">student_typ</code>实例，该类型为<code class="codeph">student_typ</code>的超类型。该语句使用<code class="codeph">TREAT</code>将<code class="codeph">p</code>的类型从<code class="codeph">person_typ</code>修改为<code class="codeph">student_typ</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-BC4A9F27-9A34-481C-BEE7-75D5913E4399__CHDGIGFA">
                        <p class="titleinexample">示例2-38使用TREAT函数返回查询中的特定子类型</p><pre class="oac_no_warn" dir="ltr">- 使用TREAT函数在查询示例中返回特定子类型，</pre><pre class="oac_no_warn" dir="ltr">- 不是示例模式</pre><pre class="oac_no_warn" dir="ltr">SELECT TREAT（VALUE（p）AS student_typ）FROM person_obj_table p;</pre><p>对于每个<code class="codeph">p</code> ，只有当<code class="codeph">p</code>的值的最具体或特殊类型是<code class="codeph">student_typ</code>或其子类型之一时， <code class="codeph">TREAT</code>修改才会成功。如果<code class="codeph">p</code>是非学生的人，或者<code class="codeph">p</code>为<code class="codeph">NULL</code> ，则<code class="codeph">TREAT</code>在SQL中返回<code class="codeph">NULL</code> ，或者在PL / SQL中引发异常。
                        </p>
                        <p>您还可以使用<code class="codeph">TREAT</code>修改<code class="codeph">REF</code>表达式的声明类型。例如：</p><pre class="oac_no_warn" dir="ltr">- 使用TREAT函数修改REF示例的声明类型，</pre><pre class="oac_no_warn" dir="ltr">- 不是示例模式</pre><pre class="oac_no_warn" dir="ltr">SELECT TREAT（REF（p）AS REF student_typ）FROM person_obj_table p;</pre><p>上一个示例将<code class="codeph">REF</code>返回给所有<code class="codeph">student_typ</code>实例。在SQL中，它为非学生的所有人实例返回<code class="codeph">NULL</code> <code class="codeph">REF</code> ，在PL / SQL中它引发异常。
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADOBJ7168"></a><a id="ADOBJ7167"></a><div class="props_rev_3"><a id="GUID-0C9A9AA4-2556-4643-8F1E-9C719B916695" name="GUID-0C9A9AA4-2556-4643-8F1E-9C719B916695"></a><h4 id="ADOBJ-GUID-0C9A9AA4-2556-4643-8F1E-9C719B916695" class="sect4"><span class="enumeration_section">2.4.8.2</span>使用TREAT函数访问子类型属性或方法</h4>
                  <div>
                     <div class="section">
                        <p>也许<code class="codeph">TREAT</code>最重要的用途是访问行或列声明类型的子类型的属性或方法。以下查询检索具有此属性的所有人员，学生和兼职学生的<code class="codeph">major</code>属性。对于非学生的人，将返回<code class="codeph">NULL</code> ：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-0C9A9AA4-2556-4643-8F1E-9C719B916695__GUID-0AC13559-A9CE-41B0-A2F1-286F7B8DB132">
                        <p class="titleinexample">例2-39使用TREAT函数访问特定子类型的属性</p><pre class="oac_no_warn" dir="ltr">SELECT name，TREAT（VALUE（p）AS student_typ）.major major FROM person_obj_table p;</pre><p>以下查询将不起作用，因为<code class="codeph">major</code>是<code class="codeph">student_typ</code>的属性，而不是<code class="codeph">person_typ</code>的属性， <code class="codeph">person_typ</code>是声明的表<code class="codeph">persons</code>类型：</p><pre class="oac_no_warn" dir="ltr">SELECT name，VALUE（p）.major major FROM person_obj_table p  - 不正确;</pre><p>以下是PL / SQL示例：</p><pre class="oac_no_warn" dir="ltr">DECLARE var person_typ; BEGIN var：= employee_typ（55，'Jane Smith'，'1-650-555-0144'，100，'Jennifer Nelson'）; DBMS_OUTPUT.PUT_LINE（TREAT（var AS employee_typ）.mgr）;结束; /</pre><div class="infoboxnotealso" id="GUID-0C9A9AA4-2556-4643-8F1E-9C719B916695__GUID-B5F5DE8E-F0B0-41F6-BE19-C39E541F11AF">
                           <p class="notep1">也可以看看：</p>
                           <p>有关SQL <code class="codeph">TREAT</code>函数的更多信息，请参见<a href="../sqlrf/TREAT.html#SQLRF06148" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADOBJ7170"></a><a id="ADOBJ7169"></a><div class="props_rev_3"><a id="GUID-6BA5D983-5B94-49C2-BDD7-7B2B7E15B117" name="GUID-6BA5D983-5B94-49C2-BDD7-7B2B7E15B117"></a><h3 id="ADOBJ-GUID-6BA5D983-5B94-49C2-BDD7-7B2B7E15B117" class="sect3"><span class="enumeration_section">2.4.9</span>价值</h3>
               <div>
                  <div class="section">
                     <p>在SQL语句中， <code class="codeph">VALUE</code>函数将对象表或对象视图的相关变量（表别名）作为其参数，并返回与表或视图的行对应的对象实例。
                     </p>
                     <p><code class="codeph">VALUE</code>函数可以返回行的声明类型或其任何子类型的实例。
                     </p>
                     <p><a href="functions-and-operators-useful-with-objects.html#GUID-6BA5D983-5B94-49C2-BDD7-7B2B7E15B117__CIHFBCJI">例2-40</a>首先创建一个<code class="codeph">part_time_student_typ</code> ，然后显示一个<code class="codeph">SELECT</code>查询返回的所有人员，包括学生和员工，从表<code class="codeph">person_obj_table</code>的<code class="codeph">person_typ</code> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-6BA5D983-5B94-49C2-BDD7-7B2B7E15B117__CIHFBCJI">
                     <p class="titleinexample">例2-40使用VALUE函数</p><pre class="oac_no_warn" dir="ltr">- 需要Ex。 2-31和2-32 CREATE TYPE part_time_student_typ UNDER student_typ（number_hours NUMBER）; / SELECT VALUE（p）FROM person_obj_table p;</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <p>要仅检索兼职学生，即最具体类型为<code class="codeph">part_time_student_typ</code>实例，请使用<code class="codeph">ONLY</code>关键字限制选择：</p><pre class="oac_no_warn" dir="ltr">SELECT VALUE（p）FROM person_obj_table p WHERE VALUE（p）IS OF（仅限part_time_student_typ）;</pre><p>在以下示例中， <code class="codeph">VALUE</code>用于更新对象表中的对象实例：</p><pre class="oac_no_warn" dir="ltr">UPDATE person_obj_table p SET VALUE（p）= person_typ（12，'Bob Jones'，'1-650-555-0130'）WHERE p.idno = 12;</pre><div class="infoboxnotealso" id="GUID-6BA5D983-5B94-49C2-BDD7-7B2B7E15B117__GUID-FAB85121-9788-4DCC-B76A-4CB2519B1285">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="operations-on-collection-data-types.html#GUID-7A47068C-D2B9-480A-B3AC-BCF6A1D6A5A6__CIHJDAFI">例5-22</a></p>
                           </li>
                           <li>
                              <p>有关SQL <code class="codeph">VALUE</code>函数的更多信息，请参见<a href="../sqlrf/VALUE.html#SQLRF06158" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This section helps you manage Oracle Trace File Analyzer daemon, diagnostic collections, and the collection repository."></meta>
      <meta name="description" content="This section helps you manage Oracle Trace File Analyzer daemon, diagnostic collections, and the collection repository."></meta>
      <title>管理和配置Oracle跟踪文件分析器</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="User’s Guide"></meta>
      <meta property="og:description" content="This section helps you manage Oracle Trace File Analyzer daemon, diagnostic collections, and the collection repository."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="User’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="autonomous-health-framework-users-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-21T23:14:30-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2016, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96320-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="performing-custom-collections.html" title="Previous" type="text/html"></link>
      <link rel="next" href="managing-db-and-gi-diagnostic-data.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Autonomous Health Framework User’s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ATNMS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="performing-custom-collections.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="managing-db-and-gi-diagnostic-data.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">用户指导</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="diagnose-troubleshoot-issues-errors.html" property="item" typeof="WebPage"><span property="name">收集诊断数据和分类，诊断和解决问题</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理和配置Oracle跟踪文件分析器</li>
            </ol>
            <a id="GUID-CBF85753-9DCC-48BC-AA83-5CA2982ED0EB" name="GUID-CBF85753-9DCC-48BC-AA83-5CA2982ED0EB"></a>
            
            <h2 id="ATNMS-GUID-CBF85753-9DCC-48BC-AA83-5CA2982ED0EB" class="sect2"><span class="enumeration_chapter">19</span>管理和配置Oracle跟踪文件分析器</h2>
         </header>
         <div class="ind">
            <div>
               <p>本节帮助您管理Oracle Trace File Analyzer守护程序，诊断集合和集合存储库。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-3ECCECA0-95B6-4AC4-AAAC-94D12A2EF60D">查询Oracle跟踪文件分析器状态和配置</a><br>使用<code class="codeph">print</code>命令查询状态或配置。
                  </li>
                  <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-C85C78B7-1270-4724-AA4E-ED3B7F98F419">管理Oracle跟踪文件分析器守护程序</a><br>Oracle跟踪文件分析器在UNIX系统上从<code class="codeph">init</code>运行，在Linux上运行<code class="codeph">init/upstart/systemd</code> ，或者Microsoft Windows使用Windows服务，以便在节点启动时自动启动Oracle跟踪文件分析器。
                  </li>
                  <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-DC76E3C3-44B4-4806-960F-CE021A36EB26">管理存储库</a><br>Oracle Trace File Analyzer将所有诊断集合存储在存储库中。
                  </li>
                  <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-FDAB1329-EE67-4374-8F42-776AA3A66439">管理集合</a><br>管理Oracle Trace File Analyzer和诊断集合中配置的目录。
                  </li>
                  <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-F156BE7A-E282-41FA-9EAC-212F306CF0B6">配置主机</a><br>您必须具有对<code class="codeph">tfactl</code> <code class="codeph">root</code>或<code class="codeph">sudo</code>访问<code class="codeph">tfactl</code>才能将主机添加到Oracle Trace File Analyzer配置中。
                  </li>
                  <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-97DA0A64-A184-4DB2-9CB1-F3AA23F6EF78">配置端口</a><br>群集中的Oracle跟踪文件分析器守护程序通过端口5000到5005安全地进行通信。
                  </li>
                  <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-653D5280-FD81-42D9-B8A3-23ADE71F9208">配置SSL和SSL证书</a><br>查看和限制SSL / TLS协议。配置Oracle跟踪文件分析器以使用自签名或CA签名的证书。
                  </li>
                  <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-CAFF8407-DA0C-4D69-A4A1-F61933BCA64E">配置电子邮件通知详细信息</a><br>配置Oracle跟踪文件分析器，以在自动收集完成后向已注册的电子邮件地址发送电子邮件。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="diagnose-troubleshoot-issues-errors.html#GUID-DA02663E-305E-4DD2-9758-DCA883B54198" title="使用Autonomous Health Framework提供的工具来解决错误。">收集诊断数据和分类，诊断和解决问题</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-3ECCECA0-95B6-4AC4-AAAC-94D12A2EF60D" name="GUID-3ECCECA0-95B6-4AC4-AAAC-94D12A2EF60D"></a><h3 id="ATNMS-GUID-3ECCECA0-95B6-4AC4-AAAC-94D12A2EF60D" class="sect3"><span class="enumeration_section">19.1</span>查询Oracle Trace File Analyzer状态和配置</h3>
               <div>
                  <p>使用<code class="codeph">print</code>命令查询状态或配置。
                  </p>
                  <div class="tblformal" id="GUID-3ECCECA0-95B6-4AC4-AAAC-94D12A2EF60D__GUID-241EBAD6-53DC-4A96-BF60-49D02D3A68F3">
                     <p class="titleintable">表19-1配置清单和说明</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="配置清单和描述" border="1" summary="This table lists and describes and configuration parameters." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="20%" id="d52627e133">配置清单</th>
                              <th align="left" valign="bottom" width="20%" id="d52627e135">默认值</th>
                              <th align="left" valign="bottom" width="20%" id="d52627e137">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d52627e141" headers="d52627e133 ">
                                 <p>自动诊断收集</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e141 d52627e135 ">
                                 <p>上</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e141 d52627e137 ">
                                 <p>如果发生重大问题，则触发集合。</p>
                                 <p>可能的值：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>上</p>
                                    </li>
                                    <li>
                                       <p>关闭</p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d52627e160" headers="d52627e133 ">
                                 <p>在诊断收集期间修剪文件</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e160 d52627e135 ">
                                 <p>上</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e160 d52627e137 ">
                                 <p>仅将日志文件修剪为集合时间范围内的条目。</p>
                                 <p>可能的值：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>上</p>
                                    </li>
                                    <li>
                                       <p>关闭</p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d52627e179" headers="d52627e133 ">
                                 <p>存储库最大大小（MB）</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e179 d52627e135 ">
                                 <p>文件系统中10GB或50％可用空间的较小。</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e179 d52627e137 ">
                                 <p>存储库的最大大小。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d52627e189" headers="d52627e133 ">
                                 <p>跟踪级别</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e189 d52627e135 ">
                                 <p>1</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e189 d52627e137 ">
                                 <p>提高冗长程度。</p>
                                 <p>可能的值：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>1</p>
                                    </li>
                                    <li>
                                       <p>2</p>
                                    </li>
                                    <li>
                                       <p>3</p>
                                    </li>
                                    <li>
                                       <p>4</p>
                                    </li>
                                 </ul>
                                 <p>值为1会产生最少的跟踪量。值为4会产生最多的迹线。</p>
                                 <p>Oracle建议仅在Oracle Support的请求下更改跟踪级别值。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d52627e218" headers="d52627e133 ">
                                 <p>自动清洗</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e218 d52627e135 ">
                                 <p>上</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e218 d52627e137 ">
                                 <p>在以下时间清除集合：</p>
                                 <p>存储库中的可用空间低于1GB。</p>
                                 <p>要么</p>
                                 <p>在关闭存储库之前。</p>
                                 <p>清除将集合从最大尺寸移到最小尺寸。清除继续，直到存储库有足够的空间打开。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d52627e236" headers="d52627e133 ">
                                 <p>清除收集的最小年龄（小时）</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e236 d52627e135 ">
                                 <p>12</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e236 d52627e137 ">
                                 <p>保留集合的最少小时数，之后它有资格进行清除。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d52627e246" headers="d52627e133 ">
                                 <p>最小空间可自由启用警报日志扫描（MB）</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e246 d52627e135 ">
                                 <p>500</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d52627e246 d52627e137 ">
                                 <p>如果<code class="codeph">tfa_home</code>可用空间低于此值，则暂停日志扫描。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="example" id="GUID-3ECCECA0-95B6-4AC4-AAAC-94D12A2EF60D__GUID-C9100B4C-089A-493D-9374-88BF7796D3BF">
                     <p class="titleinexample">例19-1打印配置</p><pre class="pre codeblock"><code>$ tfactl print config .--------------------------------------------- ---------------------------。| node1 | + ------------------------------------------------- ---------- + ------------ + |配置参数|价值| + ------------------------------------------------- ---------- + ------------ + | TFA版本| 12.2.1.0.0 | | Java版本| 1.8 | |公共IP网络|是的| |自动诊断收集|是的| |警报日志扫描|是的| |磁盘使用率监视器|是的| | Managelogs Auto Purge |假| |在diagcollection期间修剪文件|是的| |库存跟踪级别| 1 | |集合跟踪级别| 1 | |扫描跟踪级别| 1 | |其他跟踪级别| 1 | |存储库当前大小（MB）| 447 | |存储库最大大小（MB）| 10240 | |最大TFA日志大小（MB）| 50 | |最大TFA日志数| 10 | |核心文件的最大大小（MB）| 20 | |核心文件的最大集合大小（MB）| 200 | |启用警报日志扫描的最小可用空间（MB）| 500 | |连续磁盘使用快照（分钟）|之间的时间间隔60 | |连续管理日志之间的时间间隔自动清除（分钟）| 60 | |超过时间段的日志将被自动清除（天[d] |小时[h]）| 30d | |自动吹扫|是的| |清除收集年龄（小时）| 12 | | TFA IPS池大小| 5 | “------------------------------------------------- ---------- ------------ +”</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="running-administration-commands.html#GUID-D590CA18-27A9-4FE7-A921-A10587DD5C20" title="使用tfactl print命令打印Berkeley数据库中的信息。">tfactl打印</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-CBF85753-9DCC-48BC-AA83-5CA2982ED0EB" title="本节帮助您管理Oracle Trace File Analyzer守护程序，诊断集合和集合存储库。">管理和配置Oracle跟踪文件分析器</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-C85C78B7-1270-4724-AA4E-ED3B7F98F419" name="GUID-C85C78B7-1270-4724-AA4E-ED3B7F98F419"></a><h3 id="ATNMS-GUID-C85C78B7-1270-4724-AA4E-ED3B7F98F419" class="sect3"><span class="enumeration_section">19.2</span>管理Oracle跟踪文件分析器守护程序</h3>
               <div>
                  <p>Oracle跟踪文件分析器在UNIX系统上从<code class="codeph">init</code>运行，在Linux上运行<code class="codeph">init/upstart/systemd</code> ，或者Microsoft Windows使用Windows服务，以便在节点启动时自动启动Oracle跟踪文件分析器。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-C85C78B7-1270-4724-AA4E-ED3B7F98F419__GUID-9D882FD9-AF8E-48FB-989B-6866CEAC3DE6">要管理Oracle跟踪文件分析器守护程序：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><code class="codeph">init</code>控制文件<code>/etc/init.d/init.tfa</code>取决于平台。
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>要手动启动或停止Oracle Trace File Analyzer：</span><div>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">tfactl start</code> ：启动Oracle Trace File Analyzer守护程序</p>
                              </li>
                              <li>
                                 <p><code class="codeph">tfactl stop</code> ：停止Oracle Trace File Analyzer守护程序</p>
                              </li>
                           </ul>
                           <p>如果Oracle跟踪文件分析器守护程序失败，则操作系统会自动重新启动守护程序。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>要启用或禁用Oracle Trace File Analyzer守护程序的自动重新启动：</span><div>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">tfactl disable</code> ：禁用Oracle Trace File Analyzer守护程序的自动重新启动。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">tfactl enable</code> ：启用Oracle Trace File Analyzer守护程序的自动重启。
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-CBF85753-9DCC-48BC-AA83-5CA2982ED0EB" title="本节帮助您管理Oracle Trace File Analyzer守护程序，诊断集合和集合存储库。">管理和配置Oracle跟踪文件分析器</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-DC76E3C3-44B4-4806-960F-CE021A36EB26" name="GUID-DC76E3C3-44B4-4806-960F-CE021A36EB26"></a><h3 id="ATNMS-GUID-DC76E3C3-44B4-4806-960F-CE021A36EB26" class="sect3"><span class="enumeration_section">19.3</span>管理存储库</h3>
               <div>
                  <p>Oracle Trace File Analyzer将所有诊断集合存储在存储库中。</p>
                  <p>存储库大小是Oracle跟踪文件分析器能够在磁盘上用于存储集合的最大空间。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-204AF3AF-06F7-45D7-9238-98A47DAA064F">自动清除存储库</a><br></li>
                     <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-DA5147D6-CDEC-4ECB-9AFB-0A8C719A9DA4">手动清除存储库</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-CBF85753-9DCC-48BC-AA83-5CA2982ED0EB" title="本节帮助您管理Oracle Trace File Analyzer守护程序，诊断集合和集合存储库。">管理和配置Oracle跟踪文件分析器</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-204AF3AF-06F7-45D7-9238-98A47DAA064F" name="GUID-204AF3AF-06F7-45D7-9238-98A47DAA064F"></a><h4 id="ATNMS-GUID-204AF3AF-06F7-45D7-9238-98A47DAA064F" class="sect4"><span class="enumeration_section">19.3.1</span>自动清除存储库</h4>
                  <div>
                     <p></p>
                     <div class="section">
                        <p>Oracle跟踪文件分析器关闭存储库，如果：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">TFA_HOME</code>中的<code class="codeph">TFA_HOME</code>空间小于100 MB，也会停止索引</p>
                           </li>
                           <li>
                              <p><code class="codeph">ORACLE_BASE</code>中的<code class="codeph">ORACLE_BASE</code>空间小于100 MB，也会停止索引</p>
                           </li>
                           <li>
                              <p>存储库中的可用空间小于1 GB</p>
                           </li>
                           <li>
                              <p>存储库的当前大小大于存储库最大大小（ <code class="codeph">reposizeMB</code> ）</p>
                           </li>
                        </ul>
                        <p>当可用空间低于1 GB或关闭存储库之前，Oracle跟踪文件分析器守护程序会监视并自动清除存储库。清除将集合从最大的大小移除到最小，直到存储库有足够的空间来打开。</p>
                        <p>Oracle Trace File Analyzer仅自动清除早于<code class="codeph">minagetopurge</code>的集合。默认情况下， <code class="codeph">minagetopurge</code>为12小时。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-204AF3AF-06F7-45D7-9238-98A47DAA064F__GUID-3F1B27C3-0DE9-478B-9C53-DE5FCDE2F68B">自动清除存储库</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>要更改清除的最低年龄：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>set minagetopurge = <span class="variable" translate="no">number of hours</span></code></pre></div>
                              <div class="p">例如：<pre class="pre codeblock"><code>$ tfactl set minagetopurge = 48</code></pre></div>
                              <p>默认情况下启用自动清除存储库。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>要禁用或启用自动清除：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>设置autopurge = ON | OFF</code></pre></div>
                              <div class="p">例如：<pre class="pre codeblock"><code>$ tfactl set autopurge = ON</code></pre></div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>要更改存储库的位置：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>set repositorydir = <span class="variable" translate="no">dir</span></code></pre></div>
                              <div class="p">例如：<pre class="pre codeblock"><code>$ tfactl set repositorydir = / opt / mypath</code></pre></div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>要更改存储库的大小：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>设置reposizeMB</code></pre></div>
                              <div class="p">例如：<pre class="pre codeblock"><code>$ tfactl set reposizeMB = 20480</code></pre></div>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="running-administration-commands.html#GUID-59B56691-8FD5-4130-A838-8E1AE2E8BB9C" title="使用tfactl set命令启用或禁用或修改各种Oracle跟踪文件分析器功能。">tfactl设置</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-DC76E3C3-44B4-4806-960F-CE021A36EB26" title="Oracle Trace File Analyzer将所有诊断集合存储在存储库中。">管理存储库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-DA5147D6-CDEC-4ECB-9AFB-0A8C719A9DA4" name="GUID-DA5147D6-CDEC-4ECB-9AFB-0A8C719A9DA4"></a><h4 id="ATNMS-GUID-DA5147D6-CDEC-4ECB-9AFB-0A8C719A9DA4" class="sect4"><span class="enumeration_section">19.3.2</span>手动清除存储库</h4>
                  <div>
                     <p></p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DA5147D6-CDEC-4ECB-9AFB-0A8C719A9DA4__GUID-E711E78E-036C-4B3C-99CD-622223A52502">要手动清除存储库：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>要查看Oracle Trace File Analyzer存储库的状态，请执行以下操作：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>tfactl打印存储库</code></pre></div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>要查看有关集合的统计信息</span><div>
                              <div class="p"><pre class="pre codeblock"><code>tfactl打印集合</code></pre></div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>要手动清除早于特定时间的集合：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>tfactl purge -older <span class="variable" translate="no">number</span> [h | d] [-force]</code></pre></div>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="running-diagnostic-collection-commands.html#GUID-47188A6D-FC60-4E05-A62C-A60F741ABBA0" title="使用tfactl purge命令从Oracle Trace File Analyzer存储库中删除早于特定时间的诊断集合。">tfactl清除</a></li>
                           <li><a href="running-administration-commands.html#GUID-D590CA18-27A9-4FE7-A921-A10587DD5C20" title="使用tfactl print命令打印Berkeley数据库中的信息。">tfactl打印</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-DC76E3C3-44B4-4806-960F-CE021A36EB26" title="Oracle Trace File Analyzer将所有诊断集合存储在存储库中。">管理存储库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-FDAB1329-EE67-4374-8F42-776AA3A66439" name="GUID-FDAB1329-EE67-4374-8F42-776AA3A66439"></a><h3 id="ATNMS-GUID-FDAB1329-EE67-4374-8F42-776AA3A66439" class="sect3"><span class="enumeration_section">19.4</span>管理集合</h3>
               <div>
                  <p>管理Oracle Trace File Analyzer和诊断集合中配置的目录。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-71C6289A-6448-4EBF-A745-D6D776DDFD2E">包括目录</a><br>将目录添加到Oracle Trace File Analyzer配置以包含诊断集合中的目录。
                     </li>
                     <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-3DBE9FFE-E320-47B5-BB2D-1BCED88CEC78">管理集合的大小</a><br>使用Oracle跟踪文件分析器配置选项<code class="codeph">trimfiles</code> ， <code class="codeph">maxcorefilesize</code> ， <code class="codeph">maxcorecollectionsize</code>和<code class="codeph">diagcollect</code> <code class="codeph">-nocores</code>来减小集合的大小。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-CBF85753-9DCC-48BC-AA83-5CA2982ED0EB" title="本节帮助您管理Oracle Trace File Analyzer守护程序，诊断集合和集合存储库。">管理和配置Oracle跟踪文件分析器</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-71C6289A-6448-4EBF-A745-D6D776DDFD2E" name="GUID-71C6289A-6448-4EBF-A745-D6D776DDFD2E"></a><h4 id="ATNMS-GUID-71C6289A-6448-4EBF-A745-D6D776DDFD2E" class="sect4"><span class="enumeration_section">19.4.1</span>包括目录</h4>
                  <div>
                     <p>将目录添加到Oracle Trace File Analyzer配置以包含诊断集合中的目录。</p>
                     <div class="section">
                        <p>然后，Oracle Trace File Analyzer存储有关以下内容的诊断集合元数据：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>目录</p>
                           </li>
                           <li>
                              <p>子目录</p>
                           </li>
                           <li>
                              <p>目录和所有子目录中的文件</p>
                           </li>
                        </ul>
                        <p>所有Oracle Trace File Analyzer用户都可以添加他们具有读访问权限的目录。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-71C6289A-6448-4EBF-A745-D6D776DDFD2E__GUID-545EFC7A-6A87-4D4A-B66E-AED55E0D5478">要管理目录：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>查看Oracle Trace File Analyzer中配置的当前目录</span><div>
                              <div class="p"><pre class="pre codeblock"><code>tfactl打印目录[-node all |当地的| <span class="variable" translate="no">n1,n2,...</span> ] [-comp <span class="variable" translate="no">component_name1,component_name2,..</span> ] [ - 政策排除| noexclusions] [-permission public |私人的 ]</code></pre></div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>要添加目录：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>tfactl目录添加<span class="variable" translate="no">dir</span> [-public] [-exclusions | -noexclusions | -collectall] [-node all | <span class="variable" translate="no">n1,n2,...</span> ]</code></pre></div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>要删除目录：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>tfactl目录删除<span class="variable" translate="no">dir</span> [-node all | <span class="variable" translate="no">n1,n2,...</span> ]</code></pre></div>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="running-diagnostic-collection-commands.html#GUID-87FDED7C-80C8-4111-AB1C-4BEEFFDBA326" title="使用tfactl directory命令向目录列表添加目录或从目录列表中删除目录以分析其跟踪或日志文件。">tfactl目录</a></li>
                           <li><a href="running-administration-commands.html#GUID-D590CA18-27A9-4FE7-A921-A10587DD5C20" title="使用tfactl print命令打印Berkeley数据库中的信息。">tfactl打印</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-FDAB1329-EE67-4374-8F42-776AA3A66439" title="管理Oracle Trace File Analyzer和诊断集合中配置的目录。">管理集合</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-3DBE9FFE-E320-47B5-BB2D-1BCED88CEC78" name="GUID-3DBE9FFE-E320-47B5-BB2D-1BCED88CEC78"></a><h4 id="ATNMS-GUID-3DBE9FFE-E320-47B5-BB2D-1BCED88CEC78" class="sect4"><span class="enumeration_section">19.4.2</span>管理集合的大小</h4>
                  <div>
                     <p>使用Oracle跟踪文件分析器配置选项<code class="codeph">trimfiles</code> ， <code class="codeph">maxcorefilesize</code> ， <code class="codeph">maxcorecollectionsize</code>和<code class="codeph">diagcollect</code> <code class="codeph">-nocores</code>来减小集合的大小。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3DBE9FFE-E320-47B5-BB2D-1BCED88CEC78__GUID-739374C5-4502-42C0-8BE2-007A8BF18167">要管理集合的大小：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>要在诊断收集期间修剪文件：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>tfactl set trimfiles = ON | OFF</code></pre></div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>设置为ON（默认）时，Oracle跟踪文件分析器会修剪文件以包含事件发生时的数据</p>
                                 </li>
                                 <li>
                                    <p>设置为OFF时，将完整地收集在事件发生时写入的任何文件</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>要将核心文件的最大大小设置为<span class="variable" translate="no">n</span> MB（默认为20 MB）：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>tfactl set maxcorefilesize = <span class="variable" translate="no">n</span></code></pre></div>
                              <p>Oracle Trace File Analyzer会跳过大于<code class="codeph">maxcorefilesize</code>核心文件。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>要将核心文件的最大集合大小设置为<span class="variable" translate="no">n</span> MB（默认为200 MB）：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>tfactl set maxcorecollectionsize = <span class="variable" translate="no">n</span></code></pre></div>
                              <p>达到<code class="codeph">maxcorecollectionsize</code>后，Oracle Trace File Analyzer会跳过收集核心文件。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>要防止使用诊断集合收集核心文件：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>tfactl diagcollect -nocores</code></pre></div>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="running-diagnostic-collection-commands.html#GUID-4A06751C-9081-4158-88CB-EFBC77A797A0" title="使用tfactl diagcollect命令执行按需诊断收集。">tfactl diagcollect</a></li>
                           <li><a href="running-administration-commands.html#GUID-59B56691-8FD5-4130-A838-8E1AE2E8BB9C" title="使用tfactl set命令启用或禁用或修改各种Oracle跟踪文件分析器功能。">tfactl设置</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-FDAB1329-EE67-4374-8F42-776AA3A66439" title="管理Oracle Trace File Analyzer和诊断集合中配置的目录。">管理集合</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-F156BE7A-E282-41FA-9EAC-212F306CF0B6" name="GUID-F156BE7A-E282-41FA-9EAC-212F306CF0B6"></a><h3 id="ATNMS-GUID-F156BE7A-E282-41FA-9EAC-212F306CF0B6" class="sect3"><span class="enumeration_section">19.5</span>配置主机</h3>
               <div>
                  <p>您必须具有对<code class="codeph">tfactl</code> <code class="codeph">root</code>或<code class="codeph">sudo</code>访问<code class="codeph">tfactl</code>才能将主机添加到Oracle Trace File Analyzer配置中。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-F156BE7A-E282-41FA-9EAC-212F306CF0B6__GUID-CB292546-ABE3-4FF2-BCE5-9A1990456BD8">要添加，删除和替换SSL证书：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>要在Oracle跟踪文件分析器配置中查看当前主机的列表：</span><div>
                           <div class="p"><pre class="pre codeblock"><code>tfactl打印主机</code></pre></div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>首次将主机添加到Oracle Trace File Analyzer配置：</span><ol type="a">
                           <li class="substepexpand"><span>如有必要，请在新主机上安装并启动Oracle Trace File Analyzer。</span></li>
                           <li class="substepexpand"><span>从现有主机，通过运行以下命令同步所有主机的身份验证证书：</span><div>
                                 <div class="p"><pre class="pre codeblock"><code>tfactl同步码</code></pre></div>
                                 <p>如果需要，Oracle Trace File Analyzer将显示它知道的当前节点列表，并提示您更新此节点列表。</p>
                              </div>
                           </li>
                           <li class="substepexpand"><span>选择<span class="uicontrol bold">Y</span> ，然后输入新主机的名称。</span><div>
                                 <p>Oracle跟踪文件分析器与新主机上的Oracle跟踪文件分析器联系，以同步证书并将彼此添加到各自的主机列表中。</p>
                              </div>
                           </li>
                        </ol>
                     </li>
                     <li class="stepexpand"><span>要删除主机：</span><div>
                           <div class="p"><pre class="pre codeblock"><code>tfactl host删除<span class="variable" translate="no">host</span></code></pre></div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>添加主机和已同步的证书：</span><div>
                           <div class="p"><pre class="pre codeblock"><code>tfactl主机添加<span class="variable" translate="no">host</span></code></pre></div>
                           <p>Oracle Trace File Analyzer在安装期间生成自签名SSL证书。用以下之一替换这些证书：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>个人自签名证书</p>
                              </li>
                              <li>
                                 <p>CA签名证书</p>
                              </li>
                           </ul>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-CBF85753-9DCC-48BC-AA83-5CA2982ED0EB" title="本节帮助您管理Oracle Trace File Analyzer守护程序，诊断集合和集合存储库。">管理和配置Oracle跟踪文件分析器</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-97DA0A64-A184-4DB2-9CB1-F3AA23F6EF78" name="GUID-97DA0A64-A184-4DB2-9CB1-F3AA23F6EF78"></a><h3 id="ATNMS-GUID-97DA0A64-A184-4DB2-9CB1-F3AA23F6EF78" class="sect3"><span class="enumeration_section">19.6</span>配置端口</h3>
               <div>
                  <p>群集中的Oracle跟踪文件分析器守护程序通过端口5000到5005安全地进行通信。</p>
                  <div class="section">
                     <p>如果系统上没有端口范围，请将其替换为系统上可用的端口。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-97DA0A64-A184-4DB2-9CB1-F3AA23F6EF78__GUID-A2670DDE-3CA3-451B-AE0D-52DF7180D2D6">要更改端口：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>要设置主端口，请使用<code class="codeph">tfactl set port</code>命令：</span><div>
                           <div class="p"><pre class="pre codeblock"><code>tfactl set port = <span class="variable" translate="no">port_1</span></code></pre></div>
                           <div class="p">或者，指定要使用的以逗号分隔的顺序编号端口列表。您最多可以指定五个端口。<pre class="pre codeblock"><code>tfactl set port = <span class="variable" translate="no">port_1</span> ， <span class="variable" translate="no">port_2</span> ， <span class="variable" translate="no">port_3</span> ， <span class="variable" translate="no">port_4</span> ， <span class="variable" translate="no">port_5</span></code></pre></div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>在所有节点上重启Oracle Trace File Analyzer：</span><div>
                           <div class="p"><pre class="pre codeblock"><code>tfactl停止</code></pre><pre class="pre codeblock"><code>tfactl开始</code></pre></div>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-CBF85753-9DCC-48BC-AA83-5CA2982ED0EB" title="本节帮助您管理Oracle Trace File Analyzer守护程序，诊断集合和集合存储库。">管理和配置Oracle跟踪文件分析器</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-653D5280-FD81-42D9-B8A3-23ADE71F9208" name="GUID-653D5280-FD81-42D9-B8A3-23ADE71F9208"></a><h3 id="ATNMS-GUID-653D5280-FD81-42D9-B8A3-23ADE71F9208" class="sect3"><span class="enumeration_section">19.7</span>配置SSL和SSL证书</h3>
               <div>
                  <p>查看和限制SSL / TLS协议。配置Oracle跟踪文件分析器以使用自签名或CA签名的证书。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-71883B8F-E270-4FCC-B2AD-60FB05BC3E2C">配置SSL / TLS协议</a><br>集群中的Oracle跟踪文件分析器守护程序使用SSL / TLS协议进行安全通信。
                     </li>
                     <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-E7961A2C-523E-4875-B093-F5432D479276">配置自签名证书</a><br>使用<code class="codeph">Java keytool</code>将自签名SSL证书替换为个人自签名证书。
                     </li>
                     <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-F2DFEB13-0E7F-4C2A-A261-EC8CEDB0CC5B">配置CA签名证书</a><br>使用<code class="codeph">Java keytool</code>和<code class="codeph">openssl</code>将自签名SSL证书替换为证书颁发机构（CA）签名证书。
                     </li>
                     <li class="ulchildlink"><a href="managing-and-configuring-tfa.html#GUID-79506100-B1B8-4FAA-AEA3-26CA9AFE02CB">配置SSL密码套件</a><br>密码套件是TLS / SSL协议用于创建密钥和加密数据的一组加密算法。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-CBF85753-9DCC-48BC-AA83-5CA2982ED0EB" title="本节帮助您管理Oracle Trace File Analyzer守护程序，诊断集合和集合存储库。">管理和配置Oracle跟踪文件分析器</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-71883B8F-E270-4FCC-B2AD-60FB05BC3E2C" name="GUID-71883B8F-E270-4FCC-B2AD-60FB05BC3E2C"></a><h4 id="ATNMS-GUID-71883B8F-E270-4FCC-B2AD-60FB05BC3E2C" class="sect4"><span class="enumeration_section">19.7.1</span>配置SSL / TLS协议</h4>
                  <div>
                     <p>集群中的Oracle跟踪文件分析器守护程序使用SSL / TLS协议进行安全通信。</p>
                     <div class="section">
                        <p>Oracle Trace File Analyzer可用的SSL协议包括：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">TLSv1.2工作</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">TLCv1.1</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">使用TLSv1</code></p>
                           </li>
                        </ul>
                        <p>Oracle Trace File Analyzer始终限制使用较旧的协议<code class="codeph">SSLv3</code>和<code class="codeph">SSLv2Hello</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-71883B8F-E270-4FCC-B2AD-60FB05BC3E2C__GUID-C8321715-EF1E-4E62-A437-CB5253FAA4D2">查看和限制协议：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>要查看可用和受限制的协议：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>tfactl打印协议</code></pre></div>
                              <div class="p">例如：<pre class="pre codeblock"><code>$ tfactl打印协议.---------------------------------------。| node1 | + --------------------------------------- + |协议| + --------------------------------------- + |可用：[TLSv1，TLSv1.2，TLSv1.1] | |受限制：[SSLv3，SSLv2Hello] | '---------------------------------------'</code></pre></div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>限制使用某些协议：</span><div>
                              <div class="p"><pre class="pre codeblock"><code>tfactl restrictprotocol [-force] <span class="variable" translate="no">protocol</span></code></pre></div>
                              <div class="p">例如：<pre class="pre codeblock"><code>$ tfactl restrictprotocol TLSv1</code></pre></div>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-653D5280-FD81-42D9-B8A3-23ADE71F9208" title="查看和限制SSL / TLS协议。配置Oracle跟踪文件分析器以使用自签名或CA签名的证书。">配置SSL和SSL证书</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-E7961A2C-523E-4875-B093-F5432D479276" name="GUID-E7961A2C-523E-4875-B093-F5432D479276"></a><h4 id="ATNMS-GUID-E7961A2C-523E-4875-B093-F5432D479276" class="sect4"><span class="enumeration_section">19.7.2</span>配置自签名证书</h4>
                  <div>
                     <p>使用<code class="codeph">Java keytool</code>将自签名SSL证书替换为个人自签名证书。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-E7961A2C-523E-4875-B093-F5432D479276__GUID-C75E6546-F132-4AA9-AA09-87BC4FAF3BDD">要配置Oracle跟踪文件分析器以使用自签名证书：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>创建包含服务器自签名证书的私钥和密钥库文件：</span><div><pre class="pre codeblock"><code>$ keytool -genkey -alias server_full -keyalg RSA -keysize 2048 -validity 18263 -keystore myserver.jks</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>创建包含客户端的私钥和自签名证书的私钥和密钥库文件：</span><div><pre class="pre codeblock"><code>$ keytool -genkey -alias client_full -keyalg RSA -keysize 2048 -validity 18263 -keystore myclient.jks</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>从服务器密钥库导出服务器公钥证书：</span><div><pre class="pre codeblock"><code>$ keytool -export -alias server_full -file myserver_pub.crt -keystore myserver.jks -storepass <span class="variable" translate="no">password</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>从服务器密钥库导出客户端公钥证书：</span><div><pre class="pre codeblock"><code>$ keytool -export -alias client_full -file myclient_pub.crt -keystore myclient.jks -storepass <span class="variable" translate="no">password</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将服务器公钥证书导入客户端密钥库：</span><div><pre class="pre codeblock"><code>$ keytool -import -alias server_pub -file myserver_pub.crt -keystore myclient.jks -storepass <span class="variable" translate="no">password</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将客户端公钥证书导入服务器密钥库：</span><div><pre class="pre codeblock"><code>$ keytool -import -alias client_pub -file myclient_pub.crt -keystore myserver.jks -storepass <span class="variable" translate="no">password</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将密钥库上的权限限制为<code class="codeph">root</code> <code class="codeph">read-only</code> 。</span><div><pre class="pre codeblock"><code>$ chmod 400 myclient.jks myserver.jks</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将密钥库（ <code class="codeph">jks</code>文件）复制到每个节点。</span></li>
                        <li class="stepexpand"><span>配置Oracle跟踪文件分析器以使用新证书：</span><div><pre class="pre codeblock"><code>$ tfactl设置sslconfig</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>重新启动Oracle Trace File Analyzer进程以开始使用新证书：</span><div><pre class="pre codeblock"><code>$ tfactl停止$ tfactl start</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-653D5280-FD81-42D9-B8A3-23ADE71F9208" title="查看和限制SSL / TLS协议。配置Oracle跟踪文件分析器以使用自签名或CA签名的证书。">配置SSL和SSL证书</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-F2DFEB13-0E7F-4C2A-A261-EC8CEDB0CC5B" name="GUID-F2DFEB13-0E7F-4C2A-A261-EC8CEDB0CC5B"></a><h4 id="ATNMS-GUID-F2DFEB13-0E7F-4C2A-A261-EC8CEDB0CC5B" class="sect4"><span class="enumeration_section">19.7.3</span>配置CA签名证书</h4>
                  <div>
                     <p>使用<code class="codeph">Java keytool</code>和<code class="codeph">openssl</code>将自签名SSL证书替换为证书颁发机构（CA）签名证书。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-F2DFEB13-0E7F-4C2A-A261-EC8CEDB0CC5B__GUID-5CE8549B-7B87-4633-96CD-4824042385D8">要配置Oracle跟踪文件分析器以使用CA签名证书：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>为服务器请求创建私钥：</span><div><pre class="pre codeblock"><code>$ openssl genrsa -aes256 -out myserver.key 2048</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>为客户端请求创建私钥：</span><div><pre class="pre codeblock"><code>$ openssl genrsa -aes256 -out myclient.key 2048</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>为服务器创建证书签名请求（CSR）：</span><div><pre class="pre codeblock"><code>$ openssl req -key myserver.key -new -sha256 -out myserver.csr</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>为客户端创建证书签名请求（CSR）：</span><div><pre class="pre codeblock"><code>$ openssl req -key myclient.key -new -sha256 -out myclient.csr</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将客户端和服务器的结果CSR发送给相关的签名机构。</span><div>
                              <p>签名机构发回签名证书：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code>myserver.cert</code></p>
                                 </li>
                                 <li>
                                    <p><code>myclient.cert</code></p>
                                 </li>
                                 <li>
                                    <p>CA根证书</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>将证书转换为服务器和客户端的JKS格式：</span><div><pre class="pre codeblock"><code>$ openssl pkcs12 -export -out serverCert.pkcs12 -in myserver.cert -inkey myserver.key</code></pre><pre class="pre codeblock"><code>$ keytool -v -importkeystore -srckeystore serverCert.pkcs12 -srcstoretype PKCS12 -destkeystore myserver.jks -deststoretype JKS</code></pre><pre class="pre codeblock"><code>$ openssl pkcs12 -export -out clientCert.pkcs12 -in myclient.cert -inkey myclient.key</code></pre><pre class="pre codeblock"><code>$ keytool -v -importkeystore -srckeystore clientCert.pkcs12 -srcstoretype PKCS12 -destkeystore myclient.jks -deststoretype JKS</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将服务器公钥导入到客户端<code class="codeph">jks</code>文件中：</span><div><pre class="pre codeblock"><code>$ keytool -import -v -alias server-ca -file myserver.cert -keystore myclient.jks</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将客户端公钥导入服务器<code class="codeph">jks</code>文件：</span><div><pre class="pre codeblock"><code>$ keytool -import -v -alias client-ca -file myclient.cert -keystore myserver.jks</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将CA根证书从签名机构导入Oracle Trace File Analyzer服务器证书：</span><div><pre class="pre codeblock"><code>$ keytool -importcert -trustcacerts -alias inter -file caroot.cert -keystore myserver.jks</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将密钥库的权限限制为<code class="codeph">root</code> <code class="codeph">read-only</code> ：</span><div><pre class="pre codeblock"><code>$ chmod 400 myclient.jks myserver.jks</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将密钥库（ <code>jks</code>文件）复制到每个节点。</span></li>
                        <li class="stepexpand"><span>配置Oracle跟踪文件分析器以使用新证书：</span><div><pre class="pre codeblock"><code>$ tfactl设置sslconfig</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>重新启动Oracle跟踪文件分析器进程以开始使用新证书。</span><div><pre class="pre codeblock"><code>$ tfactl停止$ tfactl start</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-653D5280-FD81-42D9-B8A3-23ADE71F9208" title="查看和限制SSL / TLS协议。配置Oracle跟踪文件分析器以使用自签名或CA签名的证书。">配置SSL和SSL证书</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-79506100-B1B8-4FAA-AEA3-26CA9AFE02CB" name="GUID-79506100-B1B8-4FAA-AEA3-26CA9AFE02CB"></a><h4 id="ATNMS-GUID-79506100-B1B8-4FAA-AEA3-26CA9AFE02CB" class="sect4"><span class="enumeration_section">19.7.4</span>配置SSL密码套件</h4>
                  <div>
                     <p>密码套件是TLS / SSL协议用于创建密钥和加密数据的一组加密算法。</p>
                     <div class="section">
                        <p>Oracle Trace File Analyzer支持JRE 1.8使用的任何密码套件。</p>
                        <p>使用的默认密码套件是<code class="codeph">TLS_RSA_WITH_AES_128_CBC_SHA256</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>您可以使用以下命令更改密码套件：</span><div><pre class="pre codeblock"><code>tfactl set ciphersuite = <span class="variable" translate="no">cipher_suite</span></code></pre><div class="p">例如：<pre class="pre codeblock"><code>tfactl set ciphersuite = TLS_RSA_WITH_AES_128_GCM_SHA256</code></pre></div>
                           </div>
                           <div>有关JRE密码套件的列表，请参阅：<p><a href="https://docs.oracle.com/javase/8/docs/technotes/guides/security/SunProviders.html#SunJSSEProvider" target="_blank">https://docs.oracle.com/javase/8/docs/technotes/guides/security/SunProviders.html#SunJSSEProvider</a></p>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-653D5280-FD81-42D9-B8A3-23ADE71F9208" title="查看和限制SSL / TLS协议。配置Oracle跟踪文件分析器以使用自签名或CA签名的证书。">配置SSL和SSL证书</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-CAFF8407-DA0C-4D69-A4A1-F61933BCA64E" name="GUID-CAFF8407-DA0C-4D69-A4A1-F61933BCA64E"></a><h3 id="ATNMS-GUID-CAFF8407-DA0C-4D69-A4A1-F61933BCA64E" class="sect3"><span class="enumeration_section">19.8</span>配置电子邮件通知详细信息</h3>
               <div>
                  <p>配置Oracle跟踪文件分析器，以在自动收集完成后向已注册的电子邮件地址发送电子邮件。</p>
                  <div class="p">要发送电子邮件，请配置运行Oracle跟踪分析器的系统。您必须使用用户电子邮件地址配置通知才能使其正常工作。</div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-CAFF8407-DA0C-4D69-A4A1-F61933BCA64E__GUID-2A7C1E65-1EB0-4146-A7B0-ACA6D1278965">要配置电子邮件通知详细信</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>要设置用于特定<code class="codeph">ORACLE_HOME</code>的通知电子邮件，请在命令中包含操作系统所有者：</span><div>
                           <div class="p"><pre class="pre codeblock"><code>tfactl set notificationAddress = <span class="variable" translate="no">os_user</span> ： <span class="variable" translate="no">email</span></code></pre></div>
                           <div class="p">例如：<pre class="pre codeblock"><code>tfactl set notificationAddress = oracle：some.body@example.com</code></pre></div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>设置要用于任何<code class="codeph">ORACLE_HOME</code>的通知电子邮件：</span><div>
                           <div class="p"><pre class="pre codeblock"><code>tfactl set notificationAddress = <span class="variable" translate="no">email</span></code></pre></div>
                           <div class="p">例如：<pre class="pre codeblock"><code>tfactl set notificationAddress = another.body@example.com</code></pre></div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>使用<code class="codeph">tfactl set smtp</code>配置SMTP服务器。</span><div>
                           <p>出现提示时设置SMTP参数。</p>
                           <div class="tblformal" id="GUID-CAFF8407-DA0C-4D69-A4A1-F61933BCA64E__GUID-D73FE584-435C-408D-8722-5CEA1DFEC9E7">
                              <p class="titleintable">表19-2 tfactl diagnosetfa命令参数</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="tfactl diagnosetfa命令参数" border="1" summary="This table lists and describes tfactl diagnosetfa command parameters." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="20%" id="d52627e1603">参数</th>
                                       <th align="left" valign="bottom" width="20%" id="d52627e1605">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d52627e1609" headers="d52627e1603 ">
                                          <p><code class="codeph">smtp.host</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d52627e1609 d52627e1605 ">
                                          <p>指定SMTP服务器主机名。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d52627e1617" headers="d52627e1603 ">
                                          <p><code class="codeph">smtp.port</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d52627e1617 d52627e1605 ">
                                          <p>指定SMTP服务器端口。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d52627e1625" headers="d52627e1603 ">
                                          <p><code class="codeph">smtp.user</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d52627e1625 d52627e1605 ">
                                          <p>指定SMTP用户。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d52627e1633" headers="d52627e1603 ">
                                          <p><code class="codeph">smtp.password</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d52627e1633 d52627e1605 ">
                                          <p>指定SMTP用户的密码。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d52627e1641" headers="d52627e1603 ">
                                          <p><code class="codeph">smtp.auth</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d52627e1641 d52627e1605 ">
                                          <p>将Authentication标志设置为true或false。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d52627e1649" headers="d52627e1603 ">
                                          <p><code class="codeph">smtp.ssl</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d52627e1649 d52627e1605 ">
                                          <p>将SSL标志设置为true或false。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d52627e1657" headers="d52627e1603 ">
                                          <p><code class="codeph">smtp.from</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d52627e1657 d52627e1605 ">
                                          <p>指定来自邮件ID。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d52627e1665" headers="d52627e1603 ">
                                          <p><code class="codeph">smtp.to</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d52627e1665 d52627e1605 ">
                                          <p>指定以逗号分隔的收件人邮件ID列表。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d52627e1673" headers="d52627e1603 ">
                                          <p><code class="codeph">smtp.cc</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d52627e1673 d52627e1605 ">
                                          <p>指定以逗号分隔的CC邮件ID列表。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d52627e1681" headers="d52627e1603 ">
                                          <p><code class="codeph">smtp.bcc</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d52627e1681 d52627e1605 ">
                                          <p>指定以逗号分隔的BCC邮件ID列表。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d52627e1689" headers="d52627e1603 ">
                                          <p><code class="codeph">smtp.debug</code></p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d52627e1689 d52627e1605 ">
                                          <p>将Debug标志设置为true或false。</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <div class="infoboxnote" id="GUID-CAFF8407-DA0C-4D69-A4A1-F61933BCA64E__GUID-414A3CC3-C124-4061-B3D0-CD985726F126">
                              <p class="notep1">注意：</p>
                              <p>您可以使用<code class="codeph">tfactl print smtp</code>查看当前的SMTP配置详细信息。
                              </p>
                           </div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>通过使用<code class="codeph">tfactl sendmail <span class="variable" translate="no">email_address</span></code>发送测试电子邮件来验证SMTP配置。</span><div>
                           <p>当Oracle跟踪文件分析器检测到发生重大错误时，它将发送电子邮件通知，如下所示：</p>
                           <div class="p">
                              <div class="figure" id="GUID-CAFF8407-DA0C-4D69-A4A1-F61933BCA64E__GUID-FC6B519C-AE2B-4184-9CE2-FCC5A1E8BDA4">
                                 <p class="titleinfigure">图19-1电子邮件通知</p><img src="img/ora600-notification.jpg" alt="下面是图19-1的描述" title="下面是图19-1的描述" longdesc="img_text/ora600-notification.html"><br><a href="img_text/ora600-notification.html">“图19-1电子邮件通知”的说明</a></div>
                              <!-- class="figure" -->
                           </div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>收到通知电子邮件后，请执行以下操作：</span><ol type="a">
                           <li><span>要查找根本原因，请检查引用的集合详细信息。</span></li>
                           <li><span>如果您可以解决问题，请解决问题的根本原因。</span></li>
                           <li><span>如果您不知道问题的根本原因，请使用Oracle Support记录SR，并上载集合详细信息。</span></li>
                        </ol>
                     </li>
                  </ol>
                  <div class="example" id="GUID-CAFF8407-DA0C-4D69-A4A1-F61933BCA64E__GUID-94FE86F3-E888-43DA-9480-026BABDFF888">
                     <p class="titleinexample">例19-2 tfactl设置smtp</p><pre class="pre codeblock"><code>＃/01 /app/11.2.0.4/grid/bin/tfactl set smtp .---------------------------。| SMTP服务器配置| + --------------- + ----------- + |参数|价值| + --------------- + ----------- + | smtp.auth |假| | smtp.from | tfa | | smtp.user | -  | | smtp.cc | -  | | smtp.port | 25 | | smtp.bcc | -  | | smtp.password | ******* | | smtp.host | localhost | | smtp.to | -  | | smtp.debug |是的| | smtp.ssl |是的| '--------------- + -----------'输入要更新的SMTP属性：smtp.host输入smtp.host：myhost的值。 domain.com SMTP属性smtp.host已更新myhost.domain.com您要继续吗？[Y] | N：N＃</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-and-configuring-tfa.html#GUID-CBF85753-9DCC-48BC-AA83-5CA2982ED0EB" title="本节帮助您管理Oracle Trace File Analyzer守护程序，诊断集合和集合存储库。">管理和配置Oracle跟踪文件分析器</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
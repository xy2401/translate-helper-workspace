<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Programming with LOBs</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Programmer's Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Programmer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="oracle-c-call-interface-programmers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-06T02:31:59-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96205-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="metadata.html" title="Previous" type="text/html">
      <link rel="next" href="object-type-translator-utility.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle C++ Call Interface Programmer's Guide">
    <meta name="dcterms.isVersionOf" content="LNCPP">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="metadata.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="object-type-translator-utility.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Programmer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Programming with LOBs </li>
            </ol>
            <a id="GUID-524E407E-8CC9-4930-8FA2-0DF76F74007D" name="GUID-524E407E-8CC9-4930-8FA2-0DF76F74007D"></a><a id="LNCPP007"></a>
            
            <h2 id="LNCPP-GUID-524E407E-8CC9-4930-8FA2-0DF76F74007D" class="sect2"><span class="enumeration_chapter">7 </span> Programming with LOBs 
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter provides an overview of LOBs and their use in OCCI.</p>
               <p>This chapter contains these topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="programming-with-lobs.html#GUID-71CAD275-58EE-405D-B1DB-F0D24513727D">Overview of LOBs</a></p>
                  </li>
                  <li>
                     <p><a href="programming-with-lobs.html#GUID-84B347AE-0C60-4C82-A8C9-8D4C712CAC28">Creating LOBs in OCCI Applications</a></p>
                  </li>
                  <li>
                     <p><a href="programming-with-lobs.html#GUID-3CBD4BA9-54FF-4685-9AD2-7298DA361D77">Restricting the Opening and Closing of LOBs</a></p>
                  </li>
                  <li>
                     <p><a href="programming-with-lobs.html#GUID-0E9640FA-31CC-4393-922B-15C7C156FF6A">About Reading and Writing LOBs</a></p>
                  </li>
                  <li>
                     <p><a href="programming-with-lobs.html#GUID-9DD18F11-0DDB-4995-A341-5A7329EA230B">Using Objects with LOB Attributes</a></p>
                  </li>
                  <li>
                     <p><a href="programming-with-lobs.html#GUID-04140705-1EEC-4046-8407-BFDD91B18E9E">About Using SecureFiles</a></p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-524E407E-8CC9-4930-8FA2-0DF76F74007D__GUID-CC1C69BF-8697-4E36-8B18-F221BE8A0592">
                  <p class="notep1">See also:</p>
                  <p><a href="../adlob/introduction-to-large-objects.html#ADLOB001" target="_blank"><span><cite>Oracle Database SecureFiles and Large Objects Developer's Guide</cite></span></a> for extensive information about LOBs
                  </p>
               </div>
            </div><a id="LNCPP20317"></a><div class="props_rev_3"><a id="GUID-71CAD275-58EE-405D-B1DB-F0D24513727D" name="GUID-71CAD275-58EE-405D-B1DB-F0D24513727D"></a><h3 id="LNCPP-GUID-71CAD275-58EE-405D-B1DB-F0D24513727D" class="sect3"><span class="enumeration_section">7.1 </span>Overview of LOBs
               </h3>
               <div>
                  <p>Oracle C++ Call Interface includes classes and methods for performing operations on large objects, LOBs. LOBs are either internal or external depending on their location with respect to the database.</p>
                  <div class="p">This section includes the following topics:
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="programming-with-lobs.html#GUID-0F4EE2DD-6BA2-4254-B199-B10055BD776E">Introducing Internal LOBs</a></p>
                        </li>
                        <li>
                           <p><a href="programming-with-lobs.html#GUID-5556F261-4C25-4547-9500-F54B163F68A1">Introducing External LOBs</a></p>
                        </li>
                        <li>
                           <p><a href="programming-with-lobs.html#GUID-817BDFB8-26AC-4197-BF3A-3573655919D8">About Storing LOBs</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNCPP20318"></a><div class="props_rev_3"><a id="GUID-0F4EE2DD-6BA2-4254-B199-B10055BD776E" name="GUID-0F4EE2DD-6BA2-4254-B199-B10055BD776E"></a><h4 id="LNCPP-GUID-0F4EE2DD-6BA2-4254-B199-B10055BD776E" class="sect4"><span class="enumeration_section">7.1.1 </span>Introducing Internal LOBs
                  </h4>
                  <div>
                     <p>Internal LOBs are stored inside database tablespaces in a way that optimizes space and enables efficient access. Internal LOBs use copy semantics and participate in the transactional model of the server. You can recover internal LOBs after transaction or media failure, and any changes to an internal LOB value can be committed or rolled back. There are three SQL data types for defining instances of internal LOBs:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">BLOB</code>: A LOB whose value is composed of unstructured binary (raw) data
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">CLOB</code>: A LOB whose value is composed of character data that corresponds to the database character set defined for the Oracle database
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">NCLOB</code>: A LOB whose value is composed of character data that corresponds to the national character set defined for the Oracle database 
                           </p>
                        </li>
                     </ul>
                     <p>The copy semantics for LOBs dictate that when you insert or update a LOB with a LOB from another row in the same table, both the LOB locator and the LOB value are copied. In other words, each row has a copy of the LOB value.</p>
                  </div>
               </div><a id="LNCPP20319"></a><div class="props_rev_3"><a id="GUID-5556F261-4C25-4547-9500-F54B163F68A1" name="GUID-5556F261-4C25-4547-9500-F54B163F68A1"></a><h4 id="LNCPP-GUID-5556F261-4C25-4547-9500-F54B163F68A1" class="sect4"><span class="enumeration_section">7.1.2 </span>Introducing External LOBs
                  </h4>
                  <div>
                     <p><code class="codeph">BFILE</code>s are large binary (raw) data objects data stored in operating system files outside database tablespaces; therefore, they are referred to as <span class="italic">external</span> LOBs. These files use reference semantics, where only the locator for the LOB is reproduced when inserting or updating in the same table. Apart from conventional secondary storage devices such as hard disks, <code class="codeph">BFILE</code>s may also be located on tertiary block storage devices such as CD-ROMs, PhotoCDs and DVDs. The <code class="codeph">BFILE</code> data type allows read-only byte stream access to large files on the file system of the database server. Oracle can access <code class="codeph">BFILE</code>s if the underlying server operating system supports stream mode access to these files.
                     </p>
                     <p>External LOBs do not participate in transactions. Any support for integrity and durability must be provided by the underlying file and operating systems. An external LOB must reside on a single device; it may not be striped across a disk array. </p>
                  </div>
               </div><a id="LNCPP20320"></a><div class="props_rev_3"><a id="GUID-817BDFB8-26AC-4197-BF3A-3573655919D8" name="GUID-817BDFB8-26AC-4197-BF3A-3573655919D8"></a><h4 id="LNCPP-GUID-817BDFB8-26AC-4197-BF3A-3573655919D8" class="sect4"><span class="enumeration_section">7.1.3 </span>About Storing LOBs
                  </h4>
                  <div>
                     <p>The size of the LOB value, among other things, dictates where it is stored. The LOB value is either stored inline with the row data or outside the row.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Locator storage:</span> a LOB locator, a pointer to the actual location of the LOB value, is stored inline with the row data and indicates where the LOB value is stored.
                           </p>
                           <p>For internal LOBs, the LOB column stores a locator to the LOB value stored in a database tablespace. Each internal LOB column and attribute for a particular row has its own unique LOB locator and a distinct copy of the LOB value stored in the database tablespace.</p>
                           <p>For external LOBs, the LOB column stores a locator to the external operating system file that houses the <code class="codeph">BFILE</code>. Each   external LOB column and attribute for a given row has its own <code class="codeph">BFILE</code> locator. However, two different rows can contain a <code class="codeph">BFILE</code> locator that points to the   same operating system file. 
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Inline storage:</span> Data stored in a LOB is termed the LOB value. The value of an internal LOB may or may not be stored inline with the other row data. If you do not set <code class="codeph">DISABLE STORAGE IN ROW</code>, and if the internal LOB value is less than approximately <code class="codeph">4,000</code> bytes, then the value is stored inline.Otherwise, it is stored outside the row.
                           </p>
                           <p>Since LOBs are intended to be large objects, inline storage is only relevant if your application mixes small and large LOBs.The LOB value is automatically moved out of the row once it extends beyond approximately <code class="codeph">4,000</code> bytes.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="LNCPP20321"></a><div class="props_rev_3"><a id="GUID-84B347AE-0C60-4C82-A8C9-8D4C712CAC28" name="GUID-84B347AE-0C60-4C82-A8C9-8D4C712CAC28"></a><h3 id="LNCPP-GUID-84B347AE-0C60-4C82-A8C9-8D4C712CAC28" class="sect3"><span class="enumeration_section">7.2 </span>Creating LOBs in OCCI Applications
               </h3>
               <div>
                  <div class="section">
                     <p>Follow these steps to use LOBs in your application:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Initialize a new LOB locator in the database. </p>
                        </li>
                        <li>
                           <p>Assign a value to the LOB. In case of <code class="codeph">BFILE</code>s, assign a reference to a valid external file.
                           </p>
                        </li>
                        <li>
                           <p>To access and manipulate LOBs, see the OCCI classes that implement the methods for using LOBs in an application. All are detailed in <a href="occi-application-programing-interface.html#GUID-3C824380-073E-4F32-AA6E-928A18D52F4B">OCCI Application Programming Interface</a>:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="bfile-class.html#GUID-9798A746-499E-40D3-8B66-C30989ED33A9">Bfile Class</a>  contains the APIs for <code class="codeph">BFILE</code>s, as summarized in <a href="bfile-class.html#GUID-9798A746-499E-40D3-8B66-C30989ED33A9__BBACGFGD" title="First column lists methods; second column provides description of these methods.">Table 13-7</a>.
                                 </p>
                              </li>
                              <li>
                                 <p><a href="blob-class.html#GUID-DBABA21B-9ADC-46C4-9E0D-58C66EE3A6AF">Blob Class</a>  contains the APIs for <code class="codeph">BLOB</code>s, as summarized in <a href="blob-class.html#GUID-DBABA21B-9ADC-46C4-9E0D-58C66EE3A6AF__BBAIABGF" title="First column lists methods; second column provides description of these methods.">Table 13-8</a>.
                                 </p>
                              </li>
                              <li>
                                 <p><a href="clob-class.html#GUID-E898FEF1-55B6-4398-A0A0-CFFA7C4B5BF1">Clob Class</a>  contains the APIs for <code class="codeph">CLOB</code>s and <code class="codeph">NCLOB</code>s, as summarized in <a href="clob-class.html#GUID-E898FEF1-55B6-4398-A0A0-CFFA7C4B5BF1__BBAFIFAD" title="First column lists methods; second column provides description of these methods.">Table 13-10</a>.
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Whenever you want to modify an internal LOB column or attribute using write, copy, trim, and similar operations, you must lock the row that contains the target LOB. Use a <code class="codeph">SELECT...FOR&nbsp;UPDATE</code> statement to select the LOB locator.
                           </p>
                        </li>
                        <li>
                           <p>A transaction must be open before a LOB write command succeeds. Therefore, you must write the data before committing a transaction (since <code class="codeph">COMMIT</code> closes the transaction). Otherwise, you must lock the row again by reissuing the <code class="codeph">SELECT...FOR&nbsp;UPDATE</code> statement. Each of the LOB class implementations in OCCI have <code class="codeph">open()</code> and <code class="codeph">close()</code> methods. To check whether a LOB is open, call the <code class="codeph">isOpen()</code> method of the class.
                           </p>
                        </li>
                        <li>
                           <p>The methods <code class="codeph">open()</code>, <code class="codeph">close()</code> and <code class="codeph">isOpen()</code> should also be used to mark the beginning and end of a series of LOB operations. Whenever a LOB modification is made, it triggers updates on extensible indexes. If these modifications are made within <code class="codeph">open()...close()</code> code blocks, the individual triggers are disabled until after the <code class="codeph">close()</code> call, and then all are issued at the same time. This implementation enables the efficient processing of maintenance operations, such as updating indexes, when the LOBs are closed. However, this also means that extensive indexes are not valid during the execution of the <code class="codeph">open()...close()</code> code block.
                           </p>
                           <p>Note that for internal LOBs, the concept of openness is associated with the LOB and not the LOB locator. The LOB locator does not store any information about whether the LOB to which it refers is open. It is possible for multiple LOB locators to point to the same open LOB. However, for external LOBs, openness is associated with a specific external LOB locator. Therefore, multiple <code class="codeph">open()</code> calls can be made on the same <code class="codeph">BFILE</code> using different external LOB locators.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="LNCPP20322"></a><div class="props_rev_3"><a id="GUID-3CBD4BA9-54FF-4685-9AD2-7298DA361D77" name="GUID-3CBD4BA9-54FF-4685-9AD2-7298DA361D77"></a><h3 id="LNCPP-GUID-3CBD4BA9-54FF-4685-9AD2-7298DA361D77" class="sect3"><span class="enumeration_section">7.3 </span>Restricting the Opening and Closing of LOBs
               </h3>
               <div>
                  <div class="section">
                     <p>The definition of a transaction within which an open LOB value must be closed is one of the following:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Between <code class="codeph">SET&nbsp;TRANSACTION</code> and <code class="codeph">COMMIT</code></p>
                        </li>
                        <li>
                           <p>Between <code class="codeph">DATA&nbsp;MODIFYING&nbsp;DML</code> and <code class="codeph">COMMIT</code></p>
                        </li>
                        <li>
                           <p>Between <code class="codeph">SELECT...FOR UPDATE</code> and <code class="codeph">COMMIT</code></p>
                        </li>
                        <li>
                           <p>Within an autonomous transaction block</p>
                        </li>
                     </ul>
                     <p>The LOB opening and closing mechanism has the following restrictions:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>An application must close all previously opened LOBs before committing a transaction. Failing to do so results in an error. If a transaction is rolled back, then all open LOBs are discarded along with the changes made, so associated triggers are not fired.</p>
                        </li>
                        <li>
                           <p>While there is no limit to the number of open internal LOBs, there is a limit on the number of open files. Note that assigning an opened locator to another locator does not count as opening a new LOB. </p>
                        </li>
                        <li>
                           <p>It is an error to open or close the same internal LOB twice within the same transaction, either with different locators or with the same locator.</p>
                        </li>
                        <li>
                           <p>It is an error to close a LOB that has not been opened.</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="LNCPP20323"></a><div class="props_rev_3"><a id="GUID-0E9640FA-31CC-4393-922B-15C7C156FF6A" name="GUID-0E9640FA-31CC-4393-922B-15C7C156FF6A"></a><h3 id="LNCPP-GUID-0E9640FA-31CC-4393-922B-15C7C156FF6A" class="sect3"><span class="enumeration_section">7.4 </span>About Reading and Writing LOBs
               </h3>
               <div>
                  <p>There are two general methods for reading and writing LOBs: non-streamed, and streamed.</p>
                  <div class="p">This section includes the following topics:
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="programming-with-lobs.html#GUID-08675F02-78B5-4F37-88F6-C524709170B1">Reading LOBs</a></p>
                        </li>
                        <li>
                           <p><a href="programming-with-lobs.html#GUID-35089C36-3FF6-44E8-85F6-16228FF81E02">Writing LOBs</a></p>
                        </li>
                        <li>
                           <p><a href="programming-with-lobs.html#GUID-F569BC1A-EBC7-4D01-8B8D-1BEE4AD21115">About Enhancing the Performance of LOB Reads and Writes</a></p>
                        </li>
                        <li>
                           <p><a href="programming-with-lobs.html#GUID-B379B342-3466-4F1E-BEC7-9940135CE6E0">Updating LOBs</a></p>
                        </li>
                        <li>
                           <p><a href="programming-with-lobs.html#GUID-0A9F4699-4905-4FB9-BA99-4162E396280A">About Reading and Writing Multiple LOBs</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNCPP20325"></a><a id="LNCPP20326"></a><a id="LNCPP20327"></a><a id="LNCPP20324"></a><div class="props_rev_3"><a id="GUID-08675F02-78B5-4F37-88F6-C524709170B1" name="GUID-08675F02-78B5-4F37-88F6-C524709170B1"></a><h4 id="LNCPP-GUID-08675F02-78B5-4F37-88F6-C524709170B1" class="sect4"><span class="enumeration_section">7.4.1 </span>Reading LOBs
                  </h4>
                  <div>
                     <div class="section">
                        <p><a href="programming-with-lobs.html#GUID-08675F02-78B5-4F37-88F6-C524709170B1__BABEIIJC">Example 7-1</a> illustrates how to get data from a non-<code class="codeph">NULL</code> internal LOB, using a non-streamed method. This method requires that you keep track of the read offset and the amount remaining to be read, and pass these values to the <code class="codeph">read()</code> method.
                        </p>
                        <p><a href="programming-with-lobs.html#GUID-08675F02-78B5-4F37-88F6-C524709170B1__BABJCBBE">Example 7-2</a> is similar as it demonstrates how to read data from a <code class="codeph">BFILE</code>, where the <code class="codeph">BFILE</code> locator is not <code class="codeph">NULL</code>, by using a non-streamed read.
                        </p>
                        <p>In contrast to <a href="programming-with-lobs.html#GUID-08675F02-78B5-4F37-88F6-C524709170B1__BABEIIJC">Example 7-1</a> and <a href="programming-with-lobs.html#GUID-08675F02-78B5-4F37-88F6-C524709170B1__BABJCBBE">Example 7-2</a>, the streamed reading demonstrated in <a href="programming-with-lobs.html#GUID-08675F02-78B5-4F37-88F6-C524709170B1__BABEFEFI">Example 7-3</a> on a non-<code class="codeph">NULL</code> <code class="codeph">BLOB</code> does not require keeping track of the offset.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-08675F02-78B5-4F37-88F6-C524709170B1__BABEIIJC">
                        <p class="titleinexample">Example 7-1 How to Read Non-Streamed BLOBs</p><pre class="oac_no_warn" dir="ltr">ResultSet *rset=stmt-&gt;executeQuery("SELECT ad_composite FROM print_media
                                    WHERE product_id=6666");
while(rset-&gt;next())
{
   Blob blob=rset-&gt;getBlob(1);
   if(blob.isNull())
     cerr &lt;&lt;"Null Blob"&lt;&lt;endl;
   else
   {
      blob.open(OCCI_LOB_READONLY);
 
      const unsigned int BUFSIZE=100;
      char buffer[BUFSIZE];
      unsigned int readAmt=BUFSIZE;
      unsigned int offset=1;
 
      //reading readAmt bytes from offset 1
      blob.read(readAmt,buffer,BUFSIZE,offset);
 
      //process information in buffer
      ...
      blob.close();
   }
}
stmt-&gt;closeResultSet(rset);
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-08675F02-78B5-4F37-88F6-C524709170B1__BABJCBBE">
                        <p class="titleinexample">Example 7-2 How to Read Non-Streamed BFILESs</p><pre class="oac_no_warn" dir="ltr">ResultSet *rset=stmt-&gt;executeQuery("SELECT ad_graphic FROM print_media
                                    WHERE product_id=6666");
while(rset-&gt;next())
{
   Bfile file=rset-&gt;getBfile(1);
   if(bfile.isNull())
      cerr &lt;&lt;"Null Bfile"&lt;&lt;endl;
   else
   {
      //display the directory alias and the file name of the BFILE
      cout &lt;&lt;"File Name:"&lt;&lt;bfile.getFileName()&lt;&lt;endl;
      cout &lt;&lt;"Directory Alias:"&lt;&lt;bfile.getDirAlias()&lt;&lt;endl;
 
      if(bfile.fileExists())
      {
         unsigned int length=bfile.length();
         char *buffer=new char[length];
         bfile.read(length, buffer, length, 1);
         //read all the contents of the BFILE into buffer, then process
         ...
         delete[] buffer;
      }
      else
         cerr &lt;&lt;"File does not exist"&lt;&lt;endl;
   }
}
stmt-&gt;closeResultSet(rset);
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-08675F02-78B5-4F37-88F6-C524709170B1__BABEFEFI">
                        <p class="titleinexample">Example 7-3 How to Read Streamed BLOBs</p><pre class="oac_no_warn" dir="ltr">ResultSet *rset=stmt-&gt;executeQuery("SELECT ad_composite FROM print_media
                                    WHERE product_id=6666");
while(rset-&gt;next())
{
   Blob blob=rset-&gt;getBlob(1);
   if(blob.isNull())
      cerr &lt;&lt;"Null Blob"&lt;&lt;endl;
   else
   {
      Stream *instream=blob.getStream(1,0);
      //reading from offset 1 to the end of the BLOB
 
      unsigned int size=blob.getChunkSize();
      char *buffer=new char[size];
 
      while((unsigned int length=instream-&gt;readBuffer(buffer,size))!=-1)
      {
         //process "length" bytes read into buffer
         ...
      }
      delete[] buffer;
      blob.closeStream(instream);
   }
}
stmt-&gt;closeResultSet(rset);</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="LNCPP20329"></a><a id="LNCPP20330"></a><a id="LNCPP20328"></a><div class="props_rev_3"><a id="GUID-35089C36-3FF6-44E8-85F6-16228FF81E02" name="GUID-35089C36-3FF6-44E8-85F6-16228FF81E02"></a><h4 id="LNCPP-GUID-35089C36-3FF6-44E8-85F6-16228FF81E02" class="sect4"><span class="enumeration_section">7.4.2 </span>Writing LOBs
                  </h4>
                  <div>
                     <div class="section">
                        <p><a href="programming-with-lobs.html#GUID-35089C36-3FF6-44E8-85F6-16228FF81E02__BABFFBJI">Example 7-4</a> demonstrates how to write data to an internal non-<code class="codeph">NULL</code> LOB by using a non-streamed write. The <code class="codeph">writeChunk()</code> method is enclosed by the <code class="codeph">open()</code> and <code class="codeph">close()</code> methods; it operates on a LOB that is currently open and ensures that triggers do not fire for every chunk read. The <code class="codeph">write()</code> method can be used for the <code class="codeph">writeChunk()</code> method; however, the <code class="codeph">write()</code> method implicitly opens and closes the LOB.
                        </p>
                        <p><a href="programming-with-lobs.html#GUID-35089C36-3FF6-44E8-85F6-16228FF81E02__BABIEGEE">Example 7-5</a> demonstrates how to write data to an internal LOB that is populated by using a streamed write.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-35089C36-3FF6-44E8-85F6-16228FF81E02__BABFFBJI">
                        <p class="titleinexample">Example 7-4 How to Write Non-Streamed BLOBs</p><pre class="oac_no_warn" dir="ltr">ResultSet *rset=stmt-&gt;executeQuery("SELECT ad_composite FROM print_media
                                    WHERE product_id=6666 FOR UPDATE");
while(rset-&gt;next())
{
   Blob blob=rset-&gt;getBlob(1);
   if(blob.isNull())
      cerr &lt;&lt;"Null Blob"&lt;&lt;endl;
   else
   {
      blob.open(OCCI_LOB_READWRITE);
 
      const unsigned int BUFSIZE=100;
      char buffer[BUFSIZE];
      unsigned int writeAmt=BUFSIZE;
      unsigned int offset=1;
 
      //writing writeAmt bytes from offset 1
      //contents of buffer are replaced after each writeChunk(),
      //typically with an fread()
      while(&lt;fread "BUFSIZE" bytes into buffer succeeds&gt;)
      {
         blob.writeChunk(writeAmt, buffer, BUFSIZE, offset);
         offset += writeAmt;
      }
      blob.writeChunk(&lt;remaining amt&gt;, buffer, BUFSIZE, offset);
 
      blob.close();
   }
}
stmt-&gt;closeResultSet(rset);
conn-&gt;commit();
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-35089C36-3FF6-44E8-85F6-16228FF81E02__BABIEGEE">
                        <p class="titleinexample">Example 7-5 How to Write Streamed BLOBs</p><pre class="oac_no_warn" dir="ltr">ResultSet *rset=stmt-&gt;executeQuery("SELECT ad_composite FROM print_media
                                    WHERE product_id=6666 FOR UPDATE");
while(rset-&gt;next())
{
   Blob blob=rset-&gt;getBlob(1);
   if(blob.isNull())
      cerr &lt;&lt;"Null Blob"&lt;&lt;endl;
   else
   {
      char buffer[BUFSIZE];
      Stream *outstream=blob.getStream(1,0);
 
      //writing from buffer beginning at offset 1 until 
      //a writeLastBuffer() method is issued.
      //contents of buffer are replaced after each writeBuffer(),
      //typically with an fread()
      while(&lt;fread "BUFSIZE" bytes into buffer succeeds&gt;)
         ostream-&gt;writeBuffer(buffer,BUFSIZE);
      ostream-&gt;writeLastBuffer(buffer,&lt;remaining amt&gt;);
      blob.closeStream(outstream);
   }
}
stmt-&gt;closeResultSet(rset);
conn-&gt;commit();</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="LNCPP20331"></a><div class="props_rev_3"><a id="GUID-F569BC1A-EBC7-4D01-8B8D-1BEE4AD21115" name="GUID-F569BC1A-EBC7-4D01-8B8D-1BEE4AD21115"></a><h4 id="LNCPP-GUID-F569BC1A-EBC7-4D01-8B8D-1BEE4AD21115" class="sect4"><span class="enumeration_section">7.4.3 </span>About Enhancing the Performance of LOB Reads and Writes
                  </h4>
                  <div>
                     <p>Reading and writing of internal LOBs can be improved by using either <code class="codeph">getChunkSize()</code> method.
                     </p>
                     <p>This section includes the following topic: <a href="programming-with-lobs.html#GUID-C5F58791-9186-4DFC-97AE-91C6D64AAA0D">About Using the getChunkSize() Method</a>.
                     </p>
                  </div><a id="LNCPP20332"></a><div class="props_rev_3"><a id="GUID-C5F58791-9186-4DFC-97AE-91C6D64AAA0D" name="GUID-C5F58791-9186-4DFC-97AE-91C6D64AAA0D"></a><h5 id="LNCPP-GUID-C5F58791-9186-4DFC-97AE-91C6D64AAA0D" class="sect5"><span class="enumeration_section">7.4.3.1 </span>About Using the getChunkSize() Method
                     </h5>
                     <div>
                        <p>The <code class="codeph">getChunkSize()</code> method returns the usable chunk size in bytes for <code class="codeph">BLOB</code>s, and in characters for <code class="codeph">CLOB</code>s and <code class="codeph">NCLOB</code>s. Performance improves when a read or a write begins on a multiple of the usable chunk size, and the request size is also a multiple of the usable chunk size. You can specify the chunk size for a LOB column when you create a table that contains the LOB.
                        </p>
                        <p>Calling the <code class="codeph">getChunkSize()</code> method returns the usable chunk size of the LOB. An application can batch a series of write operations until an entire chunk can be written, rather than issuing multiple LOB write calls that operate on the same chunk
                        </p>
                        <p>To read through the end of a LOB, use the <code class="codeph">read()</code> method with an amount of 4 GB. This avoids the round-trip involved with first calling the <code class="codeph">getLength()</code> method because the <code class="codeph">read()</code> method with an amount of 4 GB reads until the end of the LOB is reached.
                        </p>
                        <p>For LOBs that store variable width characters, the <code class="codeph">GetChunkSize()</code> method returns the number of Unicode characters that fit in a LOB chunk.
                        </p>
                     </div>
                  </div>
               </div><a id="LNCPP20334"></a><a id="LNCPP20335"></a><a id="LNCPP20333"></a><div class="props_rev_3"><a id="GUID-B379B342-3466-4F1E-BEC7-9940135CE6E0" name="GUID-B379B342-3466-4F1E-BEC7-9940135CE6E0"></a><h4 id="LNCPP-GUID-B379B342-3466-4F1E-BEC7-9940135CE6E0" class="sect4"><span class="enumeration_section">7.4.4 </span>Updating LOBs
                  </h4>
                  <div>
                     <div class="section">
                        <p>To update a value of a LOB in the database, you must assign the new value to the LOB, execute a SQL <code class="codeph">UPDATE</code> command in the database, and then commit the transaction. <a href="programming-with-lobs.html#GUID-B379B342-3466-4F1E-BEC7-9940135CE6E0__BABCFBIJ">Example 7-6</a> demonstrates how to update an existing <code class="codeph">CLOB</code> (in this case, by setting it to empty), while <a href="programming-with-lobs.html#GUID-B379B342-3466-4F1E-BEC7-9940135CE6E0__BABFDIHD">Example 7-7</a> demonstrates how to update a <code class="codeph">BFILE</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-B379B342-3466-4F1E-BEC7-9940135CE6E0__BABCFBIJ">
                        <p class="titleinexample">Example 7-6 Updating a CLOB Value</p><pre class="oac_no_warn" dir="ltr">Clob clob(conn);
clob.setEmpty();
stmt-&gt;setSQL("UPDATE print_media SET ad_composite = :1
              WHERE product_id=6666");
stmt-&gt;setClob(1, clob);
stmt-&gt;executeUpdate();
conn-&gt;commit();</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-B379B342-3466-4F1E-BEC7-9940135CE6E0__BABFDIHD">
                        <p class="titleinexample">Example 7-7 Updating a BFILE Value</p><pre class="oac_no_warn" dir="ltr">Bfile bfile(conn);
bfile.setName("MEDIA_DIR", "img1.jpg");
stmt-&gt;setSQL("UPDATE print_media SET ad_graphic = :1 
              WHERE product_id=6666");
stmt-&gt;setBfile(1, bfile);
stmt-&gt;executeUpdate();
conn-&gt;commit();</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="LNCPP20010"></a><div class="props_rev_3"><a id="GUID-0A9F4699-4905-4FB9-BA99-4162E396280A" name="GUID-0A9F4699-4905-4FB9-BA99-4162E396280A"></a><h4 id="LNCPP-GUID-0A9F4699-4905-4FB9-BA99-4162E396280A" class="sect4"><span class="enumeration_section">7.4.5 </span>About Reading and Writing Multiple LOBs
                  </h4>
                  <div>
                     <p>As of Oracle Database 10<span class="italic">g</span> Release 2, OCCI has new interfaces that enhance application performance while reading and writing multiple <code class="codeph">LOB</code>s, such as <code class="codeph">Bfile</code>s, <code class="codeph">Blob</code>s, <code class="codeph">Clob</code>s and <code class="codeph">NClob</code>s.
                     </p>
                     <p>These interfaces have several advantages over the standard methods for reading and writing a single LOB at a time:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Reading and writing multiple <code class="codeph">LOB</code>s through OCCI in a single server round-trip improves performance by decreasing I/O time between the application and the back end.
                           </p>
                        </li>
                        <li>
                           <p>The new APIs provide support for LOBs that are larger than the previous limit of 4&nbsp;GB. The new interfaces accept the <code class="codeph">oraub8</code> data type for amount, offsets, buffer and length parameters. These parameters are mapped to the appropriate 64-bit native data type, which is determined by the compiler and the operating system. 
                           </p>
                        </li>
                        <li>
                           <p>For <code class="codeph">Clob</code>-related methods, the user can specify the data amount read or written in terms of character counts or byte counts.
                           </p>
                        </li>
                     </ul>
                     <p>New APIs for this features are described in <a href="occi-application-programing-interface.html#GUID-3C824380-073E-4F32-AA6E-928A18D52F4B">OCCI Application Programming Interface</a>, section on <a href="connection-class.html#GUID-412D06D3-7636-4A32-AF24-534099F989D0">Connection Class</a>, and include <a href="connection-class.html#GUID-E64143C9-B8FC-48DF-BAC8-9B93EE7D82D8">readVectorOfBfiles()</a>, <a href="connection-class.html#GUID-56F64002-E27C-4B04-951E-E155B45EBF8D">readVectorOfBlobs()</a>, <a href="connection-class.html#GUID-CD5D82C7-3C23-41DB-9822-150D9C1AB05E">readVectorOfClobs()</a> (overloaded to support general charactersets, and the <code class="codeph">UTF16</code> characterset in particular), <a href="connection-class.html#GUID-5B7FA59F-28CD-4DB5-8320-C0D70F4594B4">writeVectorOfBlobs()</a>, and <a href="connection-class.html#GUID-6CF5271C-51CB-4004-9D00-405AA12472D2">writeVectorOfClobs()</a> (overloaded to support general charactersets, and the <code class="codeph">UTF16</code> characterset in particular).
                     </p>
                     <p>This section includes the following topic: <a href="programming-with-lobs.html#GUID-0442D5BA-3454-4033-A203-0120A33C7858">About Using the Interfaces for Reading and Writing Multiple LOBs</a>.
                     </p>
                  </div><a id="LNCPP20336"></a><div class="props_rev_3"><a id="GUID-0442D5BA-3454-4033-A203-0120A33C7858" name="GUID-0442D5BA-3454-4033-A203-0120A33C7858"></a><h5 id="LNCPP-GUID-0442D5BA-3454-4033-A203-0120A33C7858" class="sect5"><span class="enumeration_section">7.4.5.1 </span>About Using the Interfaces for Reading and Writing Multiple LOBs
                     </h5>
                     <div>
                        <p>Each of the <code class="codeph">readVectorOf</code><span class="italic"><code class="codeph">xxx</code></span><code class="codeph">()</code> and <code class="codeph">writeVectorOf</code><span class="italic"><code class="codeph">xxx</code></span><code class="codeph">()</code> interface uses the following parameters:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">conn</code>, a <code class="codeph">Connection</code> class object
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">vec</code>, a vector of <code class="codeph">LOB</code> objects: <code class="codeph">Bfile</code>, <code class="codeph">Blob</code>, <code class="codeph">Clob</code>, or <code class="codeph">NClob</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">byteAmts</code>, array of amounts, in bytes, for reading or writing
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">charAmts</code>, array of amounts, in characters, for reading or writing (only applicable for <code class="codeph">Clob</code>s and <code class="codeph">NClob</code>s)
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">offsets</code>, array of offsets, in bytes for <code class="codeph">Bfile</code>s and <code class="codeph">Blob</code>s, and in characters for <code class="codeph">Clob</code>s and <code class="codeph">NClob</code>s
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">buffers</code>, array of buffer pointers
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">bufferLengths</code>, array of buffer lengths.
                              </p>
                           </li>
                        </ul>
                        <p>If there are errors in either reading or writing of one of the LOBs in the vector, the whole operation is cancelled. The <code class="codeph">byteAmts</code> or <code class="codeph">charAmts</code> parameters should be checked to determine the actual number of bytes or characters read or written. 
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="LNCPP20338"></a><a id="LNCPP20339"></a><a id="LNCPP20337"></a><div class="props_rev_3"><a id="GUID-9DD18F11-0DDB-4995-A341-5A7329EA230B" name="GUID-9DD18F11-0DDB-4995-A341-5A7329EA230B"></a><h3 id="LNCPP-GUID-9DD18F11-0DDB-4995-A341-5A7329EA230B" class="sect3"><span class="enumeration_section">7.5 </span>Using Objects with LOB Attributes
               </h3>
               <div>
                  <div class="section">
                     <p>An OCCI application can use the operator <code class="codeph">new()</code> to create a persistent object with a LOB attribute. By default, all LOB attributes are constructed by using the default constructor, and are initialized to <code class="codeph">NULL</code>.
                     </p>
                     <p><a href="programming-with-lobs.html#GUID-9DD18F11-0DDB-4995-A341-5A7329EA230B__BABGGFIE">Example 7-8</a> demonstrates how to create and use persistent objects with internal LOB attributes. <a href="programming-with-lobs.html#GUID-9DD18F11-0DDB-4995-A341-5A7329EA230B__BABJDHFB">Example 7-9</a> demonstrates how to create and use persistent objects with external LOB attributes.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-9DD18F11-0DDB-4995-A341-5A7329EA230B__BABGGFIE">
                     <p class="titleinexample">Example 7-8 How to Use a Persistent Object with a BLOB Attribute</p>
                     <ol>
                        <li>
                           <p>Create a persistent object with a <code class="codeph">BLOB</code> attribute:
                           </p><pre class="oac_no_warn" dir="ltr">Person *p=new(conn,"PERSON_TAB")Person();
p-&gt;imgBlob = Blob(conn);
</pre></li>
                        <li>
                           <p>Either initialize the <code class="codeph">Blob</code> object to empty:
                           </p><pre class="oac_no_warn" dir="ltr">p-&gt;imgBlob.setEmpty();
</pre><p>Or set it to some existing value</p>
                        </li>
                        <li>
                           <p>Mark the <code class="codeph">Blob</code> object as dirty:
                           </p><pre class="oac_no_warn" dir="ltr">p-&gt;markModified();
</pre></li>
                        <li>
                           <p>Flush the object:</p><pre class="oac_no_warn" dir="ltr">p-&gt;flush();
</pre></li>
                        <li>
                           <p>Repin the object after obtaining a <code class="codeph">REF</code> to it, thereby retrieving a refreshed version of the object from the database and acquiring an initialized LOB:
                           </p><pre class="oac_no_warn" dir="ltr">Ref&lt;Person&gt; r = p-&gt;getRef();
delete p;
p = r.ptr();
</pre></li>
                        <li>
                           <p>Write the data:</p><pre class="oac_no_warn" dir="ltr">p-&gt;imgBlob.write( ... );</pre></li>
                     </ol>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-9DD18F11-0DDB-4995-A341-5A7329EA230B__BABJDHFB">
                     <p class="titleinexample">Example 7-9 How to Use a Persistent Object with a BFILE Attribute</p>
                     <ol>
                        <li>
                           <p>Create a persistent object with a <code class="codeph">BFILE</code> attribute:
                           </p><pre class="oac_no_warn" dir="ltr">Person *p=new(conn,"PERSON_TAB")Person();
p-&gt;imgBFile = BFile(conn);
</pre></li>
                        <li>
                           <p>Initialize the <code class="codeph">Bfile</code> object:
                           </p><pre class="oac_no_warn" dir="ltr">p-&gt;setName(<span class="italic">directory_alias</span>, <span class="italic">file_name</span>);
</pre></li>
                        <li>
                           <p>Mark the <code class="codeph">Bfile</code> object as dirty:
                           </p><pre class="oac_no_warn" dir="ltr">p-&gt;markModified();
</pre></li>
                        <li>
                           <p>Flush the object:</p><pre class="oac_no_warn" dir="ltr">p-&gt;flush();
</pre></li>
                        <li>
                           <p>Read the data:</p><pre class="oac_no_warn" dir="ltr">p-&gt;imgBfile.read( ... );</pre></li>
                     </ol>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="LNCPP20340"></a><div class="props_rev_3"><a id="GUID-04140705-1EEC-4046-8407-BFDD91B18E9E" name="GUID-04140705-1EEC-4046-8407-BFDD91B18E9E"></a><h3 id="LNCPP-GUID-04140705-1EEC-4046-8407-BFDD91B18E9E" class="sect3"><span class="enumeration_section">7.6 </span>About Using SecureFiles
               </h3>
               <div>
                  <p>Introduced with Oracle Database 11<span class="italic">g</span> Release 1, SecureFiles LOBs add powerful new features for LOB compression, encryption, and deduplication.
                  </p>
                  <div class="infoboxnotealso" id="GUID-04140705-1EEC-4046-8407-BFDD91B18E9E__GUID-40650FCE-0E38-4463-ABB3-87CEF19DE52F">
                     <p class="notep1">See Also:</p>
                     <p><a href="../adlob/using-oracle-LOBs-storage.html#ADLOB4444" target="_blank"><span><cite>Oracle Database SecureFiles and Large Objects Developer's Guide</cite></span></a></p>
                  </div>
                  <div class="p">This section includes the following topics:
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="programming-with-lobs.html#GUID-2710ED67-2823-4AF7-AC62-F59DA8A5E2F0">About Using SecureFile Compression</a></p>
                        </li>
                        <li>
                           <p><a href="programming-with-lobs.html#GUID-E62F7F22-4E06-43CE-8D9B-ED4BB9712EA5">About Using SecureFiles Encryption</a></p>
                        </li>
                        <li>
                           <p><a href="programming-with-lobs.html#GUID-D66F62AB-3A39-4CC4-903F-13F824DC4154">About Using SecureFiles Deduplication</a></p>
                        </li>
                        <li>
                           <p><a href="programming-with-lobs.html#GUID-5C15E744-6220-4850-861F-C929D6FE03D2">About Combining SecureFiles Compression, Encryption, and Deduplication</a></p>
                        </li>
                        <li>
                           <p><a href="programming-with-lobs.html#GUID-90D12A1C-2B85-4E2E-BE98-D45160885746">SecureFiles LOB Types and Constants</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNCPP20341"></a><div class="props_rev_3"><a id="GUID-2710ED67-2823-4AF7-AC62-F59DA8A5E2F0" name="GUID-2710ED67-2823-4AF7-AC62-F59DA8A5E2F0"></a><h4 id="LNCPP-GUID-2710ED67-2823-4AF7-AC62-F59DA8A5E2F0" class="sect4"><span class="enumeration_section">7.6.1 </span>About Using SecureFile Compression
                  </h4>
                  <div>
                     <p>SecureFiles compression enables server-side compression of LOB data, transparent to the application. Using SecureFiles compression saves storage space with minimal impact on reading and updating performance for SecureFiles LOB data.</p>
                  </div>
               </div><a id="LNCPP20342"></a><div class="props_rev_3"><a id="GUID-E62F7F22-4E06-43CE-8D9B-ED4BB9712EA5" name="GUID-E62F7F22-4E06-43CE-8D9B-ED4BB9712EA5"></a><h4 id="LNCPP-GUID-E62F7F22-4E06-43CE-8D9B-ED4BB9712EA5" class="sect4"><span class="enumeration_section">7.6.2 </span>About Using SecureFiles Encryption
                  </h4>
                  <div>
                     <p>SecureFiles introduce a new encryption capability for LOB data and extend Transparent Data Encryption by enabling efficient random read and write access to encrypted SecureFiles LOBs.</p>
                  </div>
               </div><a id="LNCPP20343"></a><div class="props_rev_3"><a id="GUID-D66F62AB-3A39-4CC4-903F-13F824DC4154" name="GUID-D66F62AB-3A39-4CC4-903F-13F824DC4154"></a><h4 id="LNCPP-GUID-D66F62AB-3A39-4CC4-903F-13F824DC4154" class="sect4"><span class="enumeration_section">7.6.3 </span>About Using SecureFiles Deduplication
                  </h4>
                  <div>
                     <p>SecureFiles deduplication allows the Oracle Database to automatically detect duplicate LOB data, and to conserve space by storing a single copy of the SecureFiles LOB.</p>
                  </div>
               </div><a id="LNCPP20344"></a><div class="props_rev_3"><a id="GUID-5C15E744-6220-4850-861F-C929D6FE03D2" name="GUID-5C15E744-6220-4850-861F-C929D6FE03D2"></a><h4 id="LNCPP-GUID-5C15E744-6220-4850-861F-C929D6FE03D2" class="sect4"><span class="enumeration_section">7.6.4 </span>About Combining SecureFiles Compression, Encryption, and Deduplication
                  </h4>
                  <div>
                     <p>You can combine compression, encryption and deduplication in any combination. Oracle Database applies these features according to the following rules:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Deduplicate detection, if enabled, is performed before compression and encryption. This prevents potentially unnecessary and expensive compression and encryption operations on duplicate SecureFiles LOBs.</p>
                        </li>
                        <li>
                           <p>Compression is performed before encryption, to allow for the highest possible compression ratios.</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNCPP20346"></a><a id="LNCPP20347"></a><a id="LNCPP20345"></a><div class="props_rev_3"><a id="GUID-90D12A1C-2B85-4E2E-BE98-D45160885746" name="GUID-90D12A1C-2B85-4E2E-BE98-D45160885746"></a><h4 id="LNCPP-GUID-90D12A1C-2B85-4E2E-BE98-D45160885746" class="sect4"><span class="enumeration_section">7.6.5 </span>SecureFiles LOB Types and Constants
                  </h4>
                  <div>
                     <div class="section">
                        <p>The following types for SecureFiles LOBs enable additional flexibility for compression, encryption, and deduplication. <a href="programming-with-lobs.html#GUID-90D12A1C-2B85-4E2E-BE98-D45160885746__BABGICGB" title="This table has 2 columns. The first column contains a value of type LobOptionType, and the second column contains its description">Table 7-1</a> lists options for the <code class="codeph">LobOptionType</code>, while <a href="programming-with-lobs.html#GUID-90D12A1C-2B85-4E2E-BE98-D45160885746__BABEHGAJ" title="This table has 2 columns. The first column contains a value of type LobOptionValue, and the second column contains its description">Table 7-2</a> lists options for the <code class="codeph">LobOptionValue</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-90D12A1C-2B85-4E2E-BE98-D45160885746__BABGICGB">
                        <p class="titleintable">Table 7-1 Values of Type LobOptionType</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Values of Type LobOptionType" summary="This table has 2 columns. The first column contains a value of type LobOptionType, and the second column contains its description" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d63131e2266">Value</th>
                                 <th align="left" valign="bottom" width="69%" id="d63131e2269">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d63131e2274" headers="d63131e2266 "><pre class="oac_no_warn" dir="ltr">OCCI_LOB_OPT_COMPRESS</pre></td>
                                 <td align="left" valign="top" width="69%" headers="d63131e2274 d63131e2269 ">
                                    <p>Compression option type</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d63131e2281" headers="d63131e2266 "><pre class="oac_no_warn" dir="ltr">OCCI_LOB_OPT_ENCRYPT</pre></td>
                                 <td align="left" valign="top" width="69%" headers="d63131e2281 d63131e2269 ">
                                    <p>Encryption option type</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d63131e2288" headers="d63131e2266 "><pre class="oac_no_warn" dir="ltr">OCCI_LOB_OPT_DEDUPLICATE</pre></td>
                                 <td align="left" valign="top" width="69%" headers="d63131e2288 d63131e2269 ">
                                    <p>Deduplicate option type</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="tblformal" id="GUID-90D12A1C-2B85-4E2E-BE98-D45160885746__BABEHGAJ">
                        <p class="titleintable">Table 7-2 Values of Type LobOptionValue</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Values of Type LobOptionValue" summary="This table has 2 columns. The first column contains a value of type LobOptionValue, and the second column contains its description" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="38%" id="d63131e2304">Value</th>
                                 <th align="left" valign="bottom" width="62%" id="d63131e2307">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d63131e2312" headers="d63131e2304 "><pre class="oac_no_warn" dir="ltr">OCCI_LOB_COMPRESS_OFF</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d63131e2312 d63131e2307 ">
                                    <p>Turns off SecureFiles compression</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d63131e2319" headers="d63131e2304 "><pre class="oac_no_warn" dir="ltr">OCCI_LOB_COMPRESS_ON</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d63131e2319 d63131e2307 ">
                                    <p>Turns on SecureFiles compression</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d63131e2326" headers="d63131e2304 "><pre class="oac_no_warn" dir="ltr">OCCI_LOB_ENCRYPT_OFF</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d63131e2326 d63131e2307 ">
                                    <p>Turns off SecureFiles encryption</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d63131e2333" headers="d63131e2304 "><pre class="oac_no_warn" dir="ltr">OCCI_LOB_ENCRYPT_ON</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d63131e2333 d63131e2307 ">
                                    <p>Turns on SecureFiles encryption</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d63131e2340" headers="d63131e2304 "><pre class="oac_no_warn" dir="ltr">OCCI_LOB_DEDUPLICATE_OFF</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d63131e2340 d63131e2307 ">
                                    <p>Turns off SecureFiles deduplication</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d63131e2347" headers="d63131e2304 "><pre class="oac_no_warn" dir="ltr">OCCI_LOB_DEDUPLICATE_ON</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d63131e2347 d63131e2307 ">
                                    <p>Turns off LOB deduplication</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
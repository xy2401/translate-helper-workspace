<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>使用LOB编程</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-c-call-interface-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-06T02:31:59-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96205-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="metadata.html" title="Previous" type="text/html"></link>
      <link rel="next" href="object-type-translator-utility.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle C++ Call Interface Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNCPP"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="metadata.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="object-type-translator-utility.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用LOB编程</li>
            </ol>
            <a id="GUID-524E407E-8CC9-4930-8FA2-0DF76F74007D" name="GUID-524E407E-8CC9-4930-8FA2-0DF76F74007D"></a><a id="LNCPP007"></a>
            
            <h2 id="LNCPP-GUID-524E407E-8CC9-4930-8FA2-0DF76F74007D" class="sect2"><span class="enumeration_chapter">7</span>使用LOB编程</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章概述了LOB及其在OCCI中的使用。</p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="programming-with-lobs.html#GUID-71CAD275-58EE-405D-B1DB-F0D24513727D">LOB概述</a></p>
                  </li>
                  <li>
                     <p><a href="programming-with-lobs.html#GUID-84B347AE-0C60-4C82-A8C9-8D4C712CAC28">在OCCI应用程序中创建LOB</a></p>
                  </li>
                  <li>
                     <p><a href="programming-with-lobs.html#GUID-3CBD4BA9-54FF-4685-9AD2-7298DA361D77">限制LOB的开启和关闭</a></p>
                  </li>
                  <li>
                     <p><a href="programming-with-lobs.html#GUID-0E9640FA-31CC-4393-922B-15C7C156FF6A">关于阅读和写作LOB</a></p>
                  </li>
                  <li>
                     <p><a href="programming-with-lobs.html#GUID-9DD18F11-0DDB-4995-A341-5A7329EA230B">使用具有LOB属性的对象</a></p>
                  </li>
                  <li>
                     <p><a href="programming-with-lobs.html#GUID-04140705-1EEC-4046-8407-BFDD91B18E9E">关于使用SecureFiles</a></p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-524E407E-8CC9-4930-8FA2-0DF76F74007D__GUID-CC1C69BF-8697-4E36-8B18-F221BE8A0592">
                  <p class="notep1">也可以看看：</p>
                  <p>有关LOB的详细信息，请参见<a href="../adlob/introduction-to-large-objects.html#ADLOB001" target="_blank"><span><cite>Oracle Database SecureFiles和Large Objects Developer's Guide</cite></span></a></p>
               </div>
            </div><a id="LNCPP20317"></a><div class="props_rev_3"><a id="GUID-71CAD275-58EE-405D-B1DB-F0D24513727D" name="GUID-71CAD275-58EE-405D-B1DB-F0D24513727D"></a><h3 id="LNCPP-GUID-71CAD275-58EE-405D-B1DB-F0D24513727D" class="sect3"><span class="enumeration_section">7.1</span> LOB概述</h3>
               <div>
                  <p>Oracle C ++调用接口包括用于对大对象LOB执行操作的类和方法。LOB是内部的或外部的，取决于它们相对于数据库的位置。</p>
                  <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="programming-with-lobs.html#GUID-0F4EE2DD-6BA2-4254-B199-B10055BD776E">介绍内部LOB</a></p>
                        </li>
                        <li>
                           <p><a href="programming-with-lobs.html#GUID-5556F261-4C25-4547-9500-F54B163F68A1">介绍外部LOB</a></p>
                        </li>
                        <li>
                           <p><a href="programming-with-lobs.html#GUID-817BDFB8-26AC-4197-BF3A-3573655919D8">关于存储LOB</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNCPP20318"></a><div class="props_rev_3"><a id="GUID-0F4EE2DD-6BA2-4254-B199-B10055BD776E" name="GUID-0F4EE2DD-6BA2-4254-B199-B10055BD776E"></a><h4 id="LNCPP-GUID-0F4EE2DD-6BA2-4254-B199-B10055BD776E" class="sect4"><span class="enumeration_section">7.1.1</span>引入内部LOB</h4>
                  <div>
                     <p>内部LOB以优化空间并实现高效访问的方式存储在数据库表空间中。内部LOB使用复制语义并参与服务器的事务模型。您可以在事务或介质故障后恢复内部LOB，并且可以提交或回滚对内部LOB值的任何更改。有三种用于定义内部LOB实例的SQL数据类型：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">BLOB</code> ：一个LOB，其值由非结构化二进制（原始）数据组成</p>
                        </li>
                        <li>
                           <p><code class="codeph">CLOB</code> ：一个LOB，其值由对应于为Oracle数据库定义的数据库字符集的字符数据组成</p>
                        </li>
                        <li>
                           <p><code class="codeph">NCLOB</code> ：一个LOB，其值由对应于为Oracle数据库定义的国家字符集的字符数据组成</p>
                        </li>
                     </ul>
                     <p>LOB的复制语义规定，当您从同一个表中的另一行插入或更新带有LOB的LOB时，将复制LOB定位符和LOB值。换句话说，每行都有一个LOB值的副本。</p>
                  </div>
               </div><a id="LNCPP20319"></a><div class="props_rev_3"><a id="GUID-5556F261-4C25-4547-9500-F54B163F68A1" name="GUID-5556F261-4C25-4547-9500-F54B163F68A1"></a><h4 id="LNCPP-GUID-5556F261-4C25-4547-9500-F54B163F68A1" class="sect4"><span class="enumeration_section">7.1.2</span>引入外部LOB</h4>
                  <div>
                     <p><code class="codeph">BFILE</code>是存储在数据库表空间外的操作系统文件中的大型二进制（原始）数据对象数据;因此，它们被称为<span class="italic">外部</span> LOB。这些文件使用引用语义，其中在同一表中插入或更新时仅再现LOB的定位符。除了诸如硬盘之类的传统二级存储设备之外， <code class="codeph">BFILE</code>还可以位于诸如CD-ROM，PhotoCD和DVD之类的三级块存储设备上。<code class="codeph">BFILE</code>数据类型允许只读字节流访问数据库服务器文件系统上的大文件。如果底层服务器操作系统支持对这些文件的流模式访问，Oracle可以访问<code class="codeph">BFILE</code> 。
                     </p>
                     <p>外部LOB不参与交易。必须由底层文件和操作系统提供对完整性和持久性的任何支持。外部LOB必须驻留在单个设备上;它可能不会跨磁盘阵列条带化。</p>
                  </div>
               </div><a id="LNCPP20320"></a><div class="props_rev_3"><a id="GUID-817BDFB8-26AC-4197-BF3A-3573655919D8" name="GUID-817BDFB8-26AC-4197-BF3A-3573655919D8"></a><h4 id="LNCPP-GUID-817BDFB8-26AC-4197-BF3A-3573655919D8" class="sect4"><span class="enumeration_section">7.1.3</span>关于存储LOB</h4>
                  <div>
                     <p>除其他外，LOB值的大小决定了它的存储位置。LOB值与行数据一起存储或在行外存储。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">定位器存储：</span> LOB定位器，指向LOB值实际位置的指针，与行数据内联存储，并指示LOB值的存储位置。
                           </p>
                           <p>对于内部LOB，LOB列将定位器存储到存储在数据库表空间中的LOB值。特定行的每个内部LOB列和属性都有自己唯一的LOB定位符，以及存储在数据库表空间中的LOB值的不同副本。</p>
                           <p>对于外部LOB，LOB列将定位器存储到容纳<code class="codeph">BFILE</code>的外部操作系统文件中。给定行的每个外部LOB列和属性都有自己的<code class="codeph">BFILE</code>定位符。但是，两个不同的行可以包含指向同一操作系统文件的<code class="codeph">BFILE</code>定位符。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">内联存储：</span>存储在LOB中的数据称为LOB值。内部LOB的值可以或可以不与其他行数据一起存储。如果未设置<code class="codeph">DISABLE STORAGE IN ROW</code> ，并且内部LOB值小于约<code class="codeph">4,000</code>字节，则该值将以内联方式存储。否则，它存储在行外。
                           </p>
                           <p>由于LOB旨在成为大型对象，因此仅当您的应用程序混合使用小型和大型LOB时，内联存储才有意义。一旦超出大约<code class="codeph">4,000</code>个字节，LOB值就会自动移出行。
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="LNCPP20321"></a><div class="props_rev_3"><a id="GUID-84B347AE-0C60-4C82-A8C9-8D4C712CAC28" name="GUID-84B347AE-0C60-4C82-A8C9-8D4C712CAC28"></a><h3 id="LNCPP-GUID-84B347AE-0C60-4C82-A8C9-8D4C712CAC28" class="sect3"><span class="enumeration_section">7.2</span>在OCCI应用程序中创建LOB</h3>
               <div>
                  <div class="section">
                     <p>请按照以下步骤在您的应用程序中使用LOB：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在数据库中初始化一个新的LOB定位器。</p>
                        </li>
                        <li>
                           <p>为LOB分配值。在<code class="codeph">BFILE</code>的情况下，为有效的外部文件分配引用。
                           </p>
                        </li>
                        <li>
                           <p>要访问和操作LOB，请参阅实现在应用程序中使用LOB的方法的OCCI类。<a href="occi-application-programing-interface.html#GUID-3C824380-073E-4F32-AA6E-928A18D52F4B">OCCI应用程序编程接口</a>详细介绍了所有内容：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="bfile-class.html#GUID-9798A746-499E-40D3-8B66-C30989ED33A9">Bfile类</a>包含<code class="codeph">BFILE</code>的API，如<a href="bfile-class.html#GUID-9798A746-499E-40D3-8B66-C30989ED33A9__BBACGFGD" title="第一列列出方法;第二列提供了这些方法的描述。">表13-7所示</a> 。
                                 </p>
                              </li>
                              <li>
                                 <p><a href="blob-class.html#GUID-DBABA21B-9ADC-46C4-9E0D-58C66EE3A6AF">Blob类</a>包含<code class="codeph">BLOB</code>的API，如<a href="blob-class.html#GUID-DBABA21B-9ADC-46C4-9E0D-58C66EE3A6AF__BBAIABGF" title="第一列列出方法;第二列提供了这些方法的描述。">表13-8所示</a> 。
                                 </p>
                              </li>
                              <li>
                                 <p><a href="clob-class.html#GUID-E898FEF1-55B6-4398-A0A0-CFFA7C4B5BF1">Clob类</a>包含<code class="codeph">CLOB</code>和<code class="codeph">NCLOB</code>的API，如<a href="clob-class.html#GUID-E898FEF1-55B6-4398-A0A0-CFFA7C4B5BF1__BBAFIFAD" title="第一列列出方法;第二列提供了这些方法的描述。">表13-10所示</a> 。
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>每当要使用写入，复制，修剪和类似操作修改内部LOB列或属性时，必须锁定包含目标LOB的行。使用<code class="codeph">SELECT...FOR UPDATE</code>语句选择LOB定位器。
                           </p>
                        </li>
                        <li>
                           <p>在LOB写入命令成功之前，必须打开事务。因此，您必须在提交事务之前写入数据（因为<code class="codeph">COMMIT</code>关闭事务）。否则，您必须通过重新发出<code class="codeph">SELECT...再次锁定该行<code class="codeph">SELECT...FOR UPDATE</code>语句。OCCI中的每个LOB类实现都有<code class="codeph">open()</code>和<code class="codeph">close()</code>方法。要检查LOB是否打开，请调用该类的<code class="codeph">isOpen()</code>方法。
                           </p>
                        </li>
                        <li>
                           <p>方法<code class="codeph">open()</code> ， <code class="codeph">close()</code>和<code class="codeph">isOpen()</code>也应该用于标记一系列LOB操作的开始和结束。每当进行LOB修改时，它都会触发可扩展索引的更新。如果在<code class="codeph">open()...close()</code>代码块中进行这些修改，则在<code class="codeph">close()</code>调用之前禁用各个触发器，然后同时发出所有触发器。当LOB关闭时，此实现可以有效地处理维护操作，例如更新索引。但是，这也意味着在执行<code class="codeph">open()...close()</code>代码块期间，扩展索引无效。
                           </p>
                           <p>请注意，对于内部LOB，开放性的概念与LOB而不是LOB定位器相关联。LOB定位器不存储有关它所引用的LOB是否打开的任何信息。多个LOB定位器可以指向相同的开放LOB。但是，对于外部LOB，开放性与特定的外部LOB定位器相关联。因此，可以使用不同的外部LOB定位符在同一<code class="codeph">BFILE</code>进行多次<code class="codeph">open()</code>调用。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="LNCPP20322"></a><div class="props_rev_3"><a id="GUID-3CBD4BA9-54FF-4685-9AD2-7298DA361D77" name="GUID-3CBD4BA9-54FF-4685-9AD2-7298DA361D77"></a><h3 id="LNCPP-GUID-3CBD4BA9-54FF-4685-9AD2-7298DA361D77" class="sect3"><span class="enumeration_section">7.3</span>限制LOB的开启和关闭</h3>
               <div>
                  <div class="section">
                     <p>必须关闭打开的LOB值的事务的定义是以下之一：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在<code class="codeph">SET TRANSACTION</code>和<code class="codeph">COMMIT</code></p>
                        </li>
                        <li>
                           <p>在<code class="codeph">DATA MODIFYING DML</code>和<code class="codeph">COMMIT</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">SELECT...之间<code class="codeph">SELECT...FOR UPDATE</code>和<code class="codeph">COMMIT</code></p>
                        </li>
                        <li>
                           <p>在自治事务块内</p>
                        </li>
                     </ul>
                     <p>LOB开闭机制有以下限制：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在提交事务之前，应用程序必须关闭所有先前打开的LOB。如果不这样做会导致错误。如果回滚事务，则会丢弃所有打开的LOB以及所做的更改，因此不会触发关联的触发器。</p>
                        </li>
                        <li>
                           <p>虽然打开的内部LOB数量没有限制，但打开文件的数量有限制。请注意，将打开的定位器分配给另一个定位器不会计为打开新的LOB。</p>
                        </li>
                        <li>
                           <p>在同一事务中打开或关闭相同的内部LOB是错误的，无论是使用不同的定位器还是使用相同的定位器。</p>
                        </li>
                        <li>
                           <p>关闭尚未打开的LOB是错误的。</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="LNCPP20323"></a><div class="props_rev_3"><a id="GUID-0E9640FA-31CC-4393-922B-15C7C156FF6A" name="GUID-0E9640FA-31CC-4393-922B-15C7C156FF6A"></a><h3 id="LNCPP-GUID-0E9640FA-31CC-4393-922B-15C7C156FF6A" class="sect3"><span class="enumeration_section">7.4</span>关于读写LOB</h3>
               <div>
                  <p>读取和写入LOB有两种通用方法：非流式和流式。</p>
                  <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="programming-with-lobs.html#GUID-08675F02-78B5-4F37-88F6-C524709170B1">阅读LOB</a></p>
                        </li>
                        <li>
                           <p><a href="programming-with-lobs.html#GUID-35089C36-3FF6-44E8-85F6-16228FF81E02">写LOB</a></p>
                        </li>
                        <li>
                           <p><a href="programming-with-lobs.html#GUID-F569BC1A-EBC7-4D01-8B8D-1BEE4AD21115">关于提高LOB读写性能</a></p>
                        </li>
                        <li>
                           <p><a href="programming-with-lobs.html#GUID-B379B342-3466-4F1E-BEC7-9940135CE6E0">更新LOB</a></p>
                        </li>
                        <li>
                           <p><a href="programming-with-lobs.html#GUID-0A9F4699-4905-4FB9-BA99-4162E396280A">关于读写多个LOB</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNCPP20325"></a><a id="LNCPP20326"></a><a id="LNCPP20327"></a><a id="LNCPP20324"></a><div class="props_rev_3"><a id="GUID-08675F02-78B5-4F37-88F6-C524709170B1" name="GUID-08675F02-78B5-4F37-88F6-C524709170B1"></a><h4 id="LNCPP-GUID-08675F02-78B5-4F37-88F6-C524709170B1" class="sect4"><span class="enumeration_section">7.4.1</span>阅读LOB</h4>
                  <div>
                     <div class="section">
                        <p><a href="programming-with-lobs.html#GUID-08675F02-78B5-4F37-88F6-C524709170B1__BABEIIJC">例7-1</a>说明了如何使用非流方法从非<code class="codeph">NULL</code>内部LOB获取数据。此方法要求您跟踪读取偏移量和要读取的剩余量，并将这些值传递给<code class="codeph">read()</code>方法。
                        </p>
                        <p><a href="programming-with-lobs.html#GUID-08675F02-78B5-4F37-88F6-C524709170B1__BABJCBBE">示例7-2</a>类似于演示如何通过使用非流读取从<code class="codeph">BFILE</code>读取数据，其中<code class="codeph">BFILE</code>定位符不为<code class="codeph">NULL</code> 。
                        </p>
                        <p>与<a href="programming-with-lobs.html#GUID-08675F02-78B5-4F37-88F6-C524709170B1__BABEIIJC">示例7-1</a>和<a href="programming-with-lobs.html#GUID-08675F02-78B5-4F37-88F6-C524709170B1__BABJCBBE">示例7-2</a>相反， <a href="programming-with-lobs.html#GUID-08675F02-78B5-4F37-88F6-C524709170B1__BABEFEFI">示例7-3中</a>在非<code class="codeph">NULL</code> <code class="codeph">BLOB</code>上演示的流式读取不需要跟踪偏移。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-08675F02-78B5-4F37-88F6-C524709170B1__BABEIIJC">
                        <p class="titleinexample">例7-1如何读取非流BLOB</p><pre class="oac_no_warn" dir="ltr">ResultSet * rset = stmt-&gt; executeQuery（“SELECT ad_composite FROM print_media WHERE product_id = 6666”）; while（rset-&gt; next（））{Blob blob = rset-&gt; getBlob（1）; if（blob.isNull（））cerr &lt;&lt;“Null Blob”&lt;&lt; endl; else {blob.open（OCCI_LOB_READONLY）; const unsigned int BUFSIZE = 100; char buffer [BUFSIZE]; unsigned int readAmt = BUFSIZE; unsigned int offset = 1; //从偏移量1 blob.read读取readAmt字节（readAmt，buffer，BUFSIZE，offset）; //处理缓冲区中的信息......blob.close（）; stmt-&gt; closeResultSet（rset）;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-08675F02-78B5-4F37-88F6-C524709170B1__BABJCBBE">
                        <p class="titleinexample">例7-2如何读取非流式BFILES</p><pre class="oac_no_warn" dir="ltr">ResultSet * rset = stmt-&gt; executeQuery（“SELECT ad_graphic FROM print_media WHERE product_id = 6666”）; while（rset-&gt; next（））{Bfile file = rset-&gt; getBfile（1）; if（bfile.isNull（））cerr &lt;&lt;“Null Bfile”&lt;&lt; endl; else {//显示目录别名和BFILE cout的文件名&lt;&lt;“文件名：”&lt;&lt; bfile.getFileName（）&lt;&lt; endl; cout &lt;&lt;“目录别名：”&lt;&lt; bfile.getDirAlias（）&lt;&lt; endl; if（bfile.fileExists（））{unsigned int length = bfile.length（）; char * buffer = new char [length]; bfile.read（length，buffer，length，1）; //将BFILE的所有内容读入缓冲区，然后处理...delete [] buffer; } else cerr &lt;&lt;“文件不存在”&lt;&lt; endl; stmt-&gt; closeResultSet（rset）;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-08675F02-78B5-4F37-88F6-C524709170B1__BABEFEFI">
                        <p class="titleinexample">例7-3如何读取流式BLOB</p><pre class="oac_no_warn" dir="ltr">ResultSet * rset = stmt-&gt; executeQuery（“SELECT ad_composite FROM print_media WHERE product_id = 6666”）; while（rset-&gt; next（））{Blob blob = rset-&gt; getBlob（1）; if（blob.isNull（））cerr &lt;&lt;“Null Blob”&lt;&lt; endl; else {Stream * instream = blob.getStream（1,0）; //从偏移1读取到BLOB的结尾unsigned int size = blob.getChunkSize（）; char * buffer = new char [size]; while（（unsigned int length = instream-&gt; readBuffer（buffer，size））！= -1）{//将“length”字节读入缓冲区...} delete [] buffer; blob.closeStream（插播）; stmt-&gt; closeResultSet（rset）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="LNCPP20329"></a><a id="LNCPP20330"></a><a id="LNCPP20328"></a><div class="props_rev_3"><a id="GUID-35089C36-3FF6-44E8-85F6-16228FF81E02" name="GUID-35089C36-3FF6-44E8-85F6-16228FF81E02"></a><h4 id="LNCPP-GUID-35089C36-3FF6-44E8-85F6-16228FF81E02" class="sect4"><span class="enumeration_section">7.4.2</span>编写LOB</h4>
                  <div>
                     <div class="section">
                        <p><a href="programming-with-lobs.html#GUID-35089C36-3FF6-44E8-85F6-16228FF81E02__BABFFBJI">例7-4</a>演示了如何使用非流式写入将数据写入内部非<code class="codeph">NULL</code> LOB。<code class="codeph">writeChunk()</code>方法由<code class="codeph">open()</code>和<code class="codeph">close()</code>方法括起来;它在当前打开的LOB上运行，并确保触发器不会为每个块读取触发。<code class="codeph">write()</code>方法可用于<code class="codeph">writeChunk()</code>方法;但是， <code class="codeph">write()</code>方法隐式打开和关闭LOB。</p>
                        <p><a href="programming-with-lobs.html#GUID-35089C36-3FF6-44E8-85F6-16228FF81E02__BABIEGEE">例7-5</a>演示了如何将数据写入使用流式写入填充的内部LOB。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-35089C36-3FF6-44E8-85F6-16228FF81E02__BABFFBJI">
                        <p class="titleinexample">例7-4如何编写非流BLOB</p><pre class="oac_no_warn" dir="ltr">ResultSet * rset = stmt-&gt; executeQuery（“SELECT ad_composite FROM print_media WHERE product_id = 6666 FOR UPDATE”）; while（rset-&gt; next（））{Blob blob = rset-&gt; getBlob（1）; if（blob.isNull（））cerr &lt;&lt;“Null Blob”&lt;&lt; endl; else {blob.open（OCCI_LOB_READWRITE）; const unsigned int BUFSIZE = 100; char buffer [BUFSIZE]; unsigned int writeAmt = BUFSIZE; unsigned int offset = 1; //从offset 1写writeAmt字节//在每个writeChunk（）之后替换缓冲区的内容，//通常使用fread（）while（&lt;fread“BUFSIZE”字节到缓冲区成功&gt;）{blob.writeChunk（writeAmt，buffer） ，BUFSIZE，offset）; offset + = writeAmt; } blob.writeChunk（&lt;剩余amt&gt;，缓冲区，BUFSIZE，偏移量）; blob.close（）; stmt-&gt; closeResultSet（rset）; conn-&gt;提交（）;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-35089C36-3FF6-44E8-85F6-16228FF81E02__BABIEGEE">
                        <p class="titleinexample">例7-5如何编写流式BLOB</p><pre class="oac_no_warn" dir="ltr">ResultSet * rset = stmt-&gt; executeQuery（“SELECT ad_composite FROM print_media WHERE product_id = 6666 FOR UPDATE”）; while（rset-&gt; next（））{Blob blob = rset-&gt; getBlob（1）; if（blob.isNull（））cerr &lt;&lt;“Null Blob”&lt;&lt; endl; else {char buffer [BUFSIZE]; Stream * outstream = blob.getStream（1,0）; //从缓冲区1开始写入缓冲区，直到//发出writeLastBuffer（）方法。//缓冲区的内容在每个writeBuffer（）之后被替换，//通常使用fread（）while（&lt;fread“BUFSIZE”字节进入缓冲区成功&gt;）ostream-&gt; writeBuffer（buffer，BUFSIZE）; ostream-&gt; writeLastBuffer（buffer，&lt;remaining amt&gt;）; blob.closeStream（outstream）; stmt-&gt; closeResultSet（rset）; conn-&gt;提交（）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="LNCPP20331"></a><div class="props_rev_3"><a id="GUID-F569BC1A-EBC7-4D01-8B8D-1BEE4AD21115" name="GUID-F569BC1A-EBC7-4D01-8B8D-1BEE4AD21115"></a><h4 id="LNCPP-GUID-F569BC1A-EBC7-4D01-8B8D-1BEE4AD21115" class="sect4"><span class="enumeration_section">7.4.3</span>关于增强LOB读写的性能</h4>
                  <div>
                     <p>使用<code class="codeph">getChunkSize()</code>方法可以改进内部LOB的读写。
                     </p>
                     <p>本节包括以下主题： <a href="programming-with-lobs.html#GUID-C5F58791-9186-4DFC-97AE-91C6D64AAA0D">关于使用getChunkSize（）方法</a> 。
                     </p>
                  </div><a id="LNCPP20332"></a><div class="props_rev_3"><a id="GUID-C5F58791-9186-4DFC-97AE-91C6D64AAA0D" name="GUID-C5F58791-9186-4DFC-97AE-91C6D64AAA0D"></a><h5 id="LNCPP-GUID-C5F58791-9186-4DFC-97AE-91C6D64AAA0D" class="sect5"><span class="enumeration_section">7.4.3.1</span>关于使用getChunkSize（）方法</h5>
                     <div>
                        <p><code class="codeph">getChunkSize()</code>方法返回<code class="codeph">BLOB</code> s的可用块大小（以字节为单位），以及<code class="codeph">CLOB</code>和<code class="codeph">NCLOB</code>的字符。当读取或写入开始于可用块大小的倍数时，性能会提高，并且请求大小也是可用块大小的倍数。创建包含LOB的表时，可以指定LOB列的块大小。</p>
                        <p>调用<code class="codeph">getChunkSize()</code>方法返回LOB的可用块大小。应用程序可以批处理一系列写操作，直到可以写入整个块，而不是发出在同一块上运行的多个LOB写调用</p>
                        <p>要读取LOB的结尾，请使用<code class="codeph">read()</code>方法，其数量为4 GB。这避免了首次调用<code class="codeph">getLength()</code>方法所涉及的往返，因为<code class="codeph">read()</code>方法的<code class="codeph">read()</code>量为4 GB，直到达到LOB结束。
                        </p>
                        <p>对于存储可变宽度字符的LOB， <code class="codeph">GetChunkSize()</code>方法返回适合LOB块的Unicode字符数。
                        </p>
                     </div>
                  </div>
               </div><a id="LNCPP20334"></a><a id="LNCPP20335"></a><a id="LNCPP20333"></a><div class="props_rev_3"><a id="GUID-B379B342-3466-4F1E-BEC7-9940135CE6E0" name="GUID-B379B342-3466-4F1E-BEC7-9940135CE6E0"></a><h4 id="LNCPP-GUID-B379B342-3466-4F1E-BEC7-9940135CE6E0" class="sect4"><span class="enumeration_section">7.4.4</span>更新LOB</h4>
                  <div>
                     <div class="section">
                        <p>要更新数据库中LOB的值，必须将新值分配给LOB，在数据库中执行SQL <code class="codeph">UPDATE</code>命令，然后提交事务。<a href="programming-with-lobs.html#GUID-B379B342-3466-4F1E-BEC7-9940135CE6E0__BABCFBIJ">例7-6</a>演示了如何更新现有<code class="codeph">CLOB</code> （在这种情况下，通过将其设置为空），而<a href="programming-with-lobs.html#GUID-B379B342-3466-4F1E-BEC7-9940135CE6E0__BABFDIHD">例7-7</a>演示了如何更新<code class="codeph">BFILE</code> 。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-B379B342-3466-4F1E-BEC7-9940135CE6E0__BABCFBIJ">
                        <p class="titleinexample">示例7-6更新CLOB值</p><pre class="oac_no_warn" dir="ltr">Clob clob（conn）; clob.setEmpty（）; stmt-&gt; setSQL（“UPDATE print_media SET ad_composite =：1 WHERE product_id = 6666”）; stmt-&gt; setClob（1，clob）; stmt-&gt;的executeUpdate（）; conn-&gt;提交（）;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-B379B342-3466-4F1E-BEC7-9940135CE6E0__BABFDIHD">
                        <p class="titleinexample">例7-7更新BFILE值</p><pre class="oac_no_warn" dir="ltr">Bfile bfile（conn）; bfile.setName（“MEDIA_DIR”，“img1.jpg”）; stmt-&gt; setSQL（“UPDATE print_media SET ad_graphic =：1 WHERE product_id = 6666”）; stmt-&gt; setBfile（1，bfile）; stmt-&gt;的executeUpdate（）; conn-&gt;提交（）;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="LNCPP20010"></a><div class="props_rev_3"><a id="GUID-0A9F4699-4905-4FB9-BA99-4162E396280A" name="GUID-0A9F4699-4905-4FB9-BA99-4162E396280A"></a><h4 id="LNCPP-GUID-0A9F4699-4905-4FB9-BA99-4162E396280A" class="sect4"><span class="enumeration_section">7.4.5</span>关于读写多个LOB</h4>
                  <div>
                     <p>从Oracle数据库<span class="italic">10g</span>第2版开始，OCCI提供了新的接口，可以在读取和写入多个<code class="codeph">LOB</code>时提高应用程序性能，例如<code class="codeph">Bfile</code> ， <code class="codeph">Blob</code> ， <code class="codeph">Clob</code>和<code class="codeph">NClob</code> 。
                     </p>
                     <p>与一次读取和写入单个LOB的标准方法相比，这些接口有几个优点：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在单个服务器往返中通过OCCI读取和写入多个<code class="codeph">LOB</code>可以通过减少应用程序和后端之间的I / O时间来提高性能。
                           </p>
                        </li>
                        <li>
                           <p>新API为大于先前4 GB限制的LOB提供支持。新接口接受<code class="codeph">oraub8</code>数据类型的数量，偏移量，缓冲区和长度参数。这些参数映射到适当的64位本机数据类型，该类型由编译器和操作系统确定。
                           </p>
                        </li>
                        <li>
                           <p>对于与<code class="codeph">Clob</code>相关的方法，用户可以根据字符计数或字节计数指定读取或写入的数据量。
                           </p>
                        </li>
                     </ul>
                     <p>有关此功能的新API在<a href="occi-application-programing-interface.html#GUID-3C824380-073E-4F32-AA6E-928A18D52F4B">OCCI应用程序编程接口</a> ， <a href="connection-class.html#GUID-412D06D3-7636-4A32-AF24-534099F989D0">连接类</a>一节中介绍，包括<a href="connection-class.html#GUID-E64143C9-B8FC-48DF-BAC8-9B93EE7D82D8">readVectorOfBfiles（）</a> ， <a href="connection-class.html#GUID-56F64002-E27C-4B04-951E-E155B45EBF8D">readVectorOfBlobs（）</a> ， <a href="connection-class.html#GUID-CD5D82C7-3C23-41DB-9822-150D9C1AB05E">readVectorOfClobs（）</a> （重载以支持通用字符集，特别是<code class="codeph">UTF16</code>字符集）， <a href="connection-class.html#GUID-5B7FA59F-28CD-4DB5-8320-C0D70F4594B4">writeVectorOfBlobs（）</a> ，和<a href="connection-class.html#GUID-6CF5271C-51CB-4004-9D00-405AA12472D2">writeVectorOfClobs（）</a> （重载以支持通用字符集，特别是<code class="codeph">UTF16</code>字符集）。
                     </p>
                     <p>本节包括以下主题： <a href="programming-with-lobs.html#GUID-0442D5BA-3454-4033-A203-0120A33C7858">关于使用接口读取和写入多个LOB</a> 。
                     </p>
                  </div><a id="LNCPP20336"></a><div class="props_rev_3"><a id="GUID-0442D5BA-3454-4033-A203-0120A33C7858" name="GUID-0442D5BA-3454-4033-A203-0120A33C7858"></a><h5 id="LNCPP-GUID-0442D5BA-3454-4033-A203-0120A33C7858" class="sect5"><span class="enumeration_section">7.4.5.1</span>关于使用接口读写多个LOB</h5>
                     <div>
                        <p><code class="codeph">readVectorOf</code> <span class="italic"><code class="codeph">xxx</code></span> <code class="codeph">()</code>和<code class="codeph">writeVectorOf</code> <span class="italic"><code class="codeph">xxx</code></span> <code class="codeph">()</code>接口中的每一个都使用以下参数：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">conn</code> ，一个<code class="codeph">Connection</code>类对象</p>
                           </li>
                           <li>
                              <p><code class="codeph">vec</code> ， <code class="codeph">LOB</code>对象的向量： <code class="codeph">Bfile</code> ， <code class="codeph">Blob</code> ， <code class="codeph">Clob</code>或<code class="codeph">NClob</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">byteAmts</code> ，用于读取或写入的金额数组（以字节为单位）</p>
                           </li>
                           <li>
                              <p><code class="codeph">charAmts</code> ，数量，字符数，用于读或写（仅适用于<code class="codeph">Clob</code>和<code class="codeph">NClob</code> ）</p>
                           </li>
                           <li>
                              <p><code class="codeph">offsets</code> ， <code class="codeph">offsets</code>数组， <code class="codeph">Bfile</code>和<code class="codeph">Blob</code> s的字节数，以及<code class="codeph">Clob</code>和<code class="codeph">NClob</code>的字符数</p>
                           </li>
                           <li>
                              <p><code class="codeph">buffers</code> ，缓冲区指针数组</p>
                           </li>
                           <li>
                              <p><code class="codeph">bufferLengths</code> ，缓冲区长度数组。
                              </p>
                           </li>
                        </ul>
                        <p>如果在向量中读取或写入其中一个LOB时出错，则取消整个操作。应检查<code class="codeph">byteAmts</code>或<code class="codeph">charAmts</code>参数以确定读取或写入的实际字节数或字符数。
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="LNCPP20338"></a><a id="LNCPP20339"></a><a id="LNCPP20337"></a><div class="props_rev_3"><a id="GUID-9DD18F11-0DDB-4995-A341-5A7329EA230B" name="GUID-9DD18F11-0DDB-4995-A341-5A7329EA230B"></a><h3 id="LNCPP-GUID-9DD18F11-0DDB-4995-A341-5A7329EA230B" class="sect3"><span class="enumeration_section">7.5</span>使用具有LOB属性的对象</h3>
               <div>
                  <div class="section">
                     <p>OCCI应用程序可以使用运算符<code class="codeph">new()</code>来创建具有LOB属性的持久对象。默认情况下，所有LOB属性都是使用默认构造函数构造的，并初始化为<code class="codeph">NULL</code> 。</p>
                     <p><a href="programming-with-lobs.html#GUID-9DD18F11-0DDB-4995-A341-5A7329EA230B__BABGGFIE">例7-8</a>演示了如何创建和使用具有内部LOB属性的持久对象。<a href="programming-with-lobs.html#GUID-9DD18F11-0DDB-4995-A341-5A7329EA230B__BABJDHFB">示例7-9</a>演示了如何使用外部LOB属性创建和使用持久对象。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-9DD18F11-0DDB-4995-A341-5A7329EA230B__BABGGFIE">
                     <p class="titleinexample">示例7-8如何使用具有BLOB属性的持久对象</p>
                     <ol>
                        <li>
                           <p>使用<code class="codeph">BLOB</code>属性创建持久对象：</p><pre class="oac_no_warn" dir="ltr">Person * p = new（conn，“PERSON_TAB”）Person（）; p-&gt; imgBlob = Blob（conn）;</pre></li>
                        <li>
                           <p>将<code class="codeph">Blob</code>对象初始化为空：</p><pre class="oac_no_warn" dir="ltr">P-&gt; imgBlob.setEmpty（）;</pre><p>或者将其设置为某个现有值</p>
                        </li>
                        <li>
                           <p>将<code class="codeph">Blob</code>对象标记为脏：</p><pre class="oac_no_warn" dir="ltr">P-&gt; markModified（）;</pre></li>
                        <li>
                           <p>刷新对象：</p><pre class="oac_no_warn" dir="ltr">P-&gt;冲洗（）;</pre></li>
                        <li>
                           <p>获取<code class="codeph">REF</code>后对其进行复制，从而从数据库中检索对象的刷新版本并获取初始化的LOB：</p><pre class="oac_no_warn" dir="ltr">Ref &lt;Person&gt; r = p-&gt; getRef（）;删除p; p = r.ptr（）;</pre></li>
                        <li>
                           <p>写数据：</p><pre class="oac_no_warn" dir="ltr">p-&gt; imgBlob.write（...）;</pre></li>
                     </ol>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-9DD18F11-0DDB-4995-A341-5A7329EA230B__BABJDHFB">
                     <p class="titleinexample">示例7-9如何使用具有BFILE属性的持久对象</p>
                     <ol>
                        <li>
                           <p>使用<code class="codeph">BFILE</code>属性创建持久对象：</p><pre class="oac_no_warn" dir="ltr">Person * p = new（conn，“PERSON_TAB”）Person（）; p-&gt; imgBFile = BFile（conn）;</pre></li>
                        <li>
                           <p>初始化<code class="codeph">Bfile</code>对象：</p><pre class="oac_no_warn" dir="ltr">p-&gt; setName（ <span class="italic">directory_alias</span> ， <span class="italic">file_name</span> ）;</pre></li>
                        <li>
                           <p>将<code class="codeph">Bfile</code>对象标记为脏：</p><pre class="oac_no_warn" dir="ltr">P-&gt; markModified（）;</pre></li>
                        <li>
                           <p>刷新对象：</p><pre class="oac_no_warn" dir="ltr">P-&gt;冲洗（）;</pre></li>
                        <li>
                           <p>阅读数据：</p><pre class="oac_no_warn" dir="ltr">p-&gt; imgBfile.read（...）;</pre></li>
                     </ol>
                  </div>
                  <!-- class="example" -->
               </div>
            </div><a id="LNCPP20340"></a><div class="props_rev_3"><a id="GUID-04140705-1EEC-4046-8407-BFDD91B18E9E" name="GUID-04140705-1EEC-4046-8407-BFDD91B18E9E"></a><h3 id="LNCPP-GUID-04140705-1EEC-4046-8407-BFDD91B18E9E" class="sect3"><span class="enumeration_section">7.6</span>关于使用SecureFiles</h3>
               <div>
                  <p>随着Oracle Database <span class="italic">11g</span>第1版的推出，SecureFiles LOB为LOB压缩，加密和重复数据删除添加了强大的新功能。
                  </p>
                  <div class="infoboxnotealso" id="GUID-04140705-1EEC-4046-8407-BFDD91B18E9E__GUID-40650FCE-0E38-4463-ABB3-87CEF19DE52F">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../adlob/using-oracle-LOBs-storage.html#ADLOB4444" target="_blank"><span><cite>Oracle Database SecureFiles和大对象开发人员指南</cite></span></a></p>
                  </div>
                  <div class="p">本节包括以下主题：<ul style="list-style-type:disc">
                        <li>
                           <p><a href="programming-with-lobs.html#GUID-2710ED67-2823-4AF7-AC62-F59DA8A5E2F0">关于使用SecureFile压缩</a></p>
                        </li>
                        <li>
                           <p><a href="programming-with-lobs.html#GUID-E62F7F22-4E06-43CE-8D9B-ED4BB9712EA5">关于使用SecureFiles加密</a></p>
                        </li>
                        <li>
                           <p><a href="programming-with-lobs.html#GUID-D66F62AB-3A39-4CC4-903F-13F824DC4154">关于使用SecureFiles重复数据删除</a></p>
                        </li>
                        <li>
                           <p><a href="programming-with-lobs.html#GUID-5C15E744-6220-4850-861F-C929D6FE03D2">关于组合SecureFiles压缩，加密和重复数据删除</a></p>
                        </li>
                        <li>
                           <p><a href="programming-with-lobs.html#GUID-90D12A1C-2B85-4E2E-BE98-D45160885746">SecureFiles LOB类型和常量</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNCPP20341"></a><div class="props_rev_3"><a id="GUID-2710ED67-2823-4AF7-AC62-F59DA8A5E2F0" name="GUID-2710ED67-2823-4AF7-AC62-F59DA8A5E2F0"></a><h4 id="LNCPP-GUID-2710ED67-2823-4AF7-AC62-F59DA8A5E2F0" class="sect4"><span class="enumeration_section">7.6.1</span>关于使用SecureFile压缩</h4>
                  <div>
                     <p>SecureFiles压缩支持LOB数据的服务器端压缩，对应用程序透明。使用SecureFiles压缩可节省存储空间，同时对读取和更新SecureFiles LOB数据的性能影响最小。</p>
                  </div>
               </div><a id="LNCPP20342"></a><div class="props_rev_3"><a id="GUID-E62F7F22-4E06-43CE-8D9B-ED4BB9712EA5" name="GUID-E62F7F22-4E06-43CE-8D9B-ED4BB9712EA5"></a><h4 id="LNCPP-GUID-E62F7F22-4E06-43CE-8D9B-ED4BB9712EA5" class="sect4"><span class="enumeration_section">7.6.2</span>关于使用SecureFiles加密</h4>
                  <div>
                     <p>SecureFiles为LOB数据引入了新的加密功能，并通过对加密的SecureFiles LOB进行有效的随机读写访问来扩展透明数据加密。</p>
                  </div>
               </div><a id="LNCPP20343"></a><div class="props_rev_3"><a id="GUID-D66F62AB-3A39-4CC4-903F-13F824DC4154" name="GUID-D66F62AB-3A39-4CC4-903F-13F824DC4154"></a><h4 id="LNCPP-GUID-D66F62AB-3A39-4CC4-903F-13F824DC4154" class="sect4"><span class="enumeration_section">7.6.3</span>关于使用SecureFiles重复数据删除</h4>
                  <div>
                     <p>SecureFiles重复数据删除允许Oracle数据库自动检测重复的LOB数据，并通过存储SecureFiles LOB的单个副本来节省空间。</p>
                  </div>
               </div><a id="LNCPP20344"></a><div class="props_rev_3"><a id="GUID-5C15E744-6220-4850-861F-C929D6FE03D2" name="GUID-5C15E744-6220-4850-861F-C929D6FE03D2"></a><h4 id="LNCPP-GUID-5C15E744-6220-4850-861F-C929D6FE03D2" class="sect4"><span class="enumeration_section">7.6.4</span>关于组合SecureFiles压缩，加密和重复数据删除</h4>
                  <div>
                     <p>您可以将压缩，加密和重复数据删除组合在一起。Oracle数据库根据以下规则应用这些功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果启用了重复数据删除检测，则在压缩和加密之前执行。这可以防止对重复的SecureFiles LOB进行可能不必要且昂贵的压缩和加密操作。</p>
                        </li>
                        <li>
                           <p>在加密之前执行压缩，以允许尽可能高的压缩比。</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNCPP20346"></a><a id="LNCPP20347"></a><a id="LNCPP20345"></a><div class="props_rev_3"><a id="GUID-90D12A1C-2B85-4E2E-BE98-D45160885746" name="GUID-90D12A1C-2B85-4E2E-BE98-D45160885746"></a><h4 id="LNCPP-GUID-90D12A1C-2B85-4E2E-BE98-D45160885746" class="sect4"><span class="enumeration_section">7.6.5</span> SecureFiles LOB类型和常量</h4>
                  <div>
                     <div class="section">
                        <p>SecureFiles LOB的以下类型为压缩，加密和重复数据删除提供了额外的灵活性。<a href="programming-with-lobs.html#GUID-90D12A1C-2B85-4E2E-BE98-D45160885746__BABGICGB" title="该表有2列。第一列包含LobOptionType类型的值，第二列包含其描述">表7-1</a>列出了<code class="codeph">LobOptionType</code>选项，而<a href="programming-with-lobs.html#GUID-90D12A1C-2B85-4E2E-BE98-D45160885746__BABEHGAJ" title="该表有2列。第一列包含LobOptionValue类型的值，第二列包含其描述">表7-2</a>列出了<code class="codeph">LobOptionValue</code>选项。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-90D12A1C-2B85-4E2E-BE98-D45160885746__BABGICGB">
                        <p class="titleintable">表7-1 LobOptionType类型的值</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="LobOptionType类型的值" width="100%" border="1" summary="This table has 2 columns. The first column contains a value of type LobOptionType, and the second column contains its description" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d63131e2266">值</th>
                                 <th align="left" valign="bottom" width="69%" id="d63131e2269">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d63131e2274" headers="d63131e2266 "><pre class="oac_no_warn" dir="ltr">OCCI_LOB_OPT_COMPRESS</pre></td>
                                 <td align="left" valign="top" width="69%" headers="d63131e2274 d63131e2269 ">
                                    <p>压缩选项类型</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d63131e2281" headers="d63131e2266 "><pre class="oac_no_warn" dir="ltr">OCCI_LOB_OPT_ENCRYPT</pre></td>
                                 <td align="left" valign="top" width="69%" headers="d63131e2281 d63131e2269 ">
                                    <p>加密选项类型</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d63131e2288" headers="d63131e2266 "><pre class="oac_no_warn" dir="ltr">OCCI_LOB_OPT_DEDUPLICATE</pre></td>
                                 <td align="left" valign="top" width="69%" headers="d63131e2288 d63131e2269 ">
                                    <p>重复数据删除选项类型</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="tblformal" id="GUID-90D12A1C-2B85-4E2E-BE98-D45160885746__BABEHGAJ">
                        <p class="titleintable">表7-2 LobOptionValue类型的值</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="LobOptionValue类型的值" width="100%" border="1" summary="This table has 2 columns. The first column contains a value of type LobOptionValue, and the second column contains its description" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="38%" id="d63131e2304">值</th>
                                 <th align="left" valign="bottom" width="62%" id="d63131e2307">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d63131e2312" headers="d63131e2304 "><pre class="oac_no_warn" dir="ltr">OCCI_LOB_COMPRESS_OFF</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d63131e2312 d63131e2307 ">
                                    <p>关闭SecureFiles压缩</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d63131e2319" headers="d63131e2304 "><pre class="oac_no_warn" dir="ltr">OCCI_LOB_COMPRESS_ON</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d63131e2319 d63131e2307 ">
                                    <p>打开SecureFiles压缩</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d63131e2326" headers="d63131e2304 "><pre class="oac_no_warn" dir="ltr">OCCI_LOB_ENCRYPT_OFF</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d63131e2326 d63131e2307 ">
                                    <p>关闭SecureFiles加密</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d63131e2333" headers="d63131e2304 "><pre class="oac_no_warn" dir="ltr">OCCI_LOB_ENCRYPT_ON</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d63131e2333 d63131e2307 ">
                                    <p>打开SecureFiles加密</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d63131e2340" headers="d63131e2304 "><pre class="oac_no_warn" dir="ltr">OCCI_LOB_DEDUPLICATE_OFF</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d63131e2340 d63131e2307 ">
                                    <p>关闭SecureFiles重复数据删除</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="38%" id="d63131e2347" headers="d63131e2304 "><pre class="oac_no_warn" dir="ltr">OCCI_LOB_DEDUPLICATE_ON</pre></td>
                                 <td align="left" valign="top" width="62%" headers="d63131e2347 d63131e2307 ">
                                    <p>关闭LOB重复数据删除</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
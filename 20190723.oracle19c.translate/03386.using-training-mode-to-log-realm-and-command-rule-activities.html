<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Simulation mode writes violations to the simulation log instead of preventing SQL execution to quickly test new and modified Oracle Database Vault controls."></meta>
      <meta name="description" content="Simulation mode writes violations to the simulation log instead of preventing SQL execution to quickly test new and modified Oracle Database Vault controls."></meta>
      <title>使用模拟模式记录领域和命令规则活动</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator&#39;s Guide "></meta>
      <meta property="og:description" content="Simulation mode writes violations to the simulation log instead of preventing SQL execution to quickly test new and modified Oracle Database Vault controls."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-vault-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-28T15:24:22-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96302-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="configuring-oracle-database-vault-policies.html" title="Previous" type="text/html"></link>
      <link rel="next" href="integrating-database-vault-with-other-oracle-products.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Vault Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="DVADM"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="configuring-oracle-database-vault-policies.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="integrating-database-vault-with-other-oracle-products.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用模拟模式记录领域和命令规则活动</li>
            </ol>
            <a id="GUID-23CA88C2-C52C-4676-8564-2395898BECE7" name="GUID-23CA88C2-C52C-4676-8564-2395898BECE7"></a>
            
            <h2 id="DVADM-GUID-23CA88C2-C52C-4676-8564-2395898BECE7" class="sect2"><span class="enumeration_chapter">10</span>使用模拟模式记录领域和命令规则活动</h2>
         </header>
         <div class="ind">
            <div>
               <p>模拟模式将违规写入模拟日志，而不是阻止SQL执行以快速测试新的和已修改的Oracle Database Vault控件。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-FE4E06E7-42E3-4743-8750-83D9B5ED0723">关于模拟模式</a><br>通过模拟模式，您可以捕获模拟日志中的违规，而不是通过Oracle Database Vault领域和命令规则阻止SQL执行。
                  </li>
                  <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-8E572333-F101-4BCE-A89C-AFE1A83728C2">模拟模式用例</a><br>模拟模式对于测试新领域和命令规则的开发配置非常有用。
                  </li>
                  <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-5487F685-D481-49E6-B990-20CC319219C0">在仿真模式下记录领域</a><br>您可以在模拟模式下设置常规和强制域。
                  </li>
                  <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-8BB95940-7D8D-4AEB-9A53-246BA2AEED4C">教程：使用模拟模式跟踪对领域的违规</a><br>本教程介绍如何创建使用模拟模式的领域，然后测试对领域的违规。
                  </li>
                  <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-D60381F6-9D4F-40FC-A409-FB144FE490C6">在仿真模式下记录领域的用例和指南</a><br>Oracle提供了一组用于在仿真模式下记录领域的用例和指南。
                  </li>
               </ul>
            </div>
            
            <div class="sect2"><a id="GUID-FE4E06E7-42E3-4743-8750-83D9B5ED0723" name="GUID-FE4E06E7-42E3-4743-8750-83D9B5ED0723"></a><h3 id="DVADM-GUID-FE4E06E7-42E3-4743-8750-83D9B5ED0723" class="sect3">关于模拟模式</h3>
               <div>
                  <p>通过模拟模式，您可以捕获模拟日志中的违规，而不是通过Oracle Database Vault领域和命令规则阻止SQL执行。</p>
                  <p>模拟模式存储在一个位置捕获的错误，以便于分析。要使用模拟模式，在创建或更新领域或命令规则时，可以将其设置为模拟模式，而不是启用或禁用领域或命令规则。领域或命令规则仍处于启用状态，但由于违规未被阻止而是记录到模拟日志文件中，因此您可以在为生产环境启用之前测试任何潜在错误。启用模拟模式后，报告可能包含多个域或命令规则的违规。有关可以帮助您更好地识别用户SQL语句源的更详细报告，可以将模拟模式配置为包含PL / SQL调用堆栈。调用堆栈以递归方式捕获调用过程和函数，以更好地排除Database Vault审计记录的故障。调用堆栈信息存储在<code class="codeph">DVSYS.DBA_DV_SIMULATION_LOG</code>数据字典视图的<code class="codeph">PL_SQL_STACK</code>列中。
                  </p>
                  <p>例如，域的以下创建语句启用模拟模式并生成PL / SQL调用堆栈：</p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_MACADM.CREATE_REALM（realm_name =&gt;'HR Apps'，description =&gt;'保护HR领域的领域'，启用=&gt; DBMS_MACUTL.G_SIMULATION，audit_options =&gt; DBMS_MACUTL.G_REALM_AUDIT_FAIL，realm_type =&gt; 1，realm_scope =&gt; DBMS_MACUTL.G_SCOPE_LOCAL ，pl_sql_stack =&gt; TRUE）;结束; /</pre><p>在此阶段，仍然可以执行违反领域或命令规则的SQL语句，但这些活动将记录到<code class="codeph">DBA_DV_SIMULATION_LOG</code>数据字典视图中。例如，以下查询查找针对HR Apps领域的违规以及为仿真模式配置的任何其他领域或命令规则：</p><pre class="oac_no_warn" dir="ltr">SELECT USERNAME，COMMAND，SQLTEXT，VIOLATION_TYPE FROM DBA_DV_SIMULATION_LOG WHERE REALM_NAME =“HR APPS”; USERNAME COMMAND SQLTEXT VIOLATION_TYPE -------- ---------- ---------------------------- --- -------------- DGRANT从HR.EMPLOYEES中选择SELECT SALARY;境界违规</pre><p>完成对领域或命令规则的测试后，已被授予<code class="codeph">DV_ADMIN</code>或<code class="codeph">DV_OWNER</code>角色的用户可以通过删除此视图的基础表的内容<code class="codeph">DVSYS.SIMULATION_LOG$</code>来清除<code class="codeph">DBA_DV_SIMULATION_LOG</code>数据字典视图。
                  </p>
                  <p>例如：</p><pre class="oac_no_warn" dir="ltr">DELETE FROM DVSYS.SIMULATION_LOG $;</pre><p>要么：</p><pre class="oac_no_warn" dir="ltr">DELETE FROM DVSYS.SIMULATION_LOG $ WHERE COMMAND ='SELECT';</pre></div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-23CA88C2-C52C-4676-8564-2395898BECE7" title="模拟模式将违规写入模拟日志，而不是阻止SQL执行以快速测试新的和已修改的Oracle Database Vault控件。">使用模拟模式记录领域和命令规则活动</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-8E572333-F101-4BCE-A89C-AFE1A83728C2" name="GUID-8E572333-F101-4BCE-A89C-AFE1A83728C2"></a><h3 id="DVADM-GUID-8E572333-F101-4BCE-A89C-AFE1A83728C2" class="sect3">模拟模式用例</h3>
               <div>
                  <p>模拟模式对于测试新领域和命令规则的开发配置非常有用。</p>
                  <p>使用案例如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>申请认证</p>
                        <p>在认证应用程序时，可以在应用程序测试环境中使用如下模拟模式：</p>
                        <ol>
                           <li>
                              <p>在启用模拟模式的情况下，将应用程序的所有模式放入强制领域。</p>
                           </li>
                           <li>
                              <p>运行完整的回归测试。</p>
                           </li>
                           <li>
                              <p>通过查询<code class="codeph">DBA_DV_SIMULATION_LOG</code>数据字典视图来分析模拟模式日志，以查找可以访问这些模式的人员。
                              </p>
                           </li>
                           <li>
                              <p>使用新授权更新领域，并启用领域（即，不使用模拟模式）。</p>
                           </li>
                           <li>
                              <p>重新运行回归测试。</p>
                           </li>
                        </ol>
                     </li>
                     <li>
                        <p>引入新的命令规则</p>
                        <p>您可以在启用了Oracle Database Vault的生产数据库上使用模拟模式。</p>
                        <ol>
                           <li>
                              <p>在模拟模式下将新命令规则投入生产，这需要很长时间。</p>
                           </li>
                           <li>
                              <p>通过查询<code class="codeph">DBA_DV_SIMULATION_LOG</code>来分析模拟模式日志，以确定命令规则是否正常工作。
                              </p>
                           </li>
                           <li>
                              <p>根据需要更改命令规则。</p>
                           </li>
                           <li>
                              <p>启用命令规则。</p>
                           </li>
                        </ol>
                     </li>
                     <li>
                        <p>在仿真模式下将新领域放入生产数据库。</p>
                        <p>此方法可以帮助查找在规则集中设置可信路径规则以及查找领域的授权用户所需的系统上下文信息。</p>
                        <ol>
                           <li>
                              <p>在强制模式下创建新领域并添加受保护对象</p>
                           </li>
                           <li>
                              <p>不要添加任何授权用户。</p>
                           </li>
                           <li>
                              <p>从将使用的普通IP地址运行应用程序和开发操作。</p>
                           </li>
                           <li>
                              <p>检查模拟日志文件，以获取可用于创建受信任路径的授权用户和系统上下文信息。</p>
                           </li>
                           <li>
                              <p>创建可信路径，然后添加授权用户。</p>
                           </li>
                           <li>
                              <p>清除模拟日志并再次运行应用程序和开发操作任务。</p>
                           </li>
                           <li>
                              <p>一段时间后，查看模拟日志。如果所有控件都已正确更新，则模拟日志为空。模拟模式下的日志条目表示您需要对领域和规则集进行的其他更改，或者日志条目可能表示恶意使用。</p>
                           </li>
                        </ol>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-23CA88C2-C52C-4676-8564-2395898BECE7" title="模拟模式将违规写入模拟日志，而不是阻止SQL执行以快速测试新的和已修改的Oracle Database Vault控件。">使用模拟模式记录领域和命令规则活动</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-5487F685-D481-49E6-B990-20CC319219C0" name="GUID-5487F685-D481-49E6-B990-20CC319219C0"></a><h3 id="DVADM-GUID-5487F685-D481-49E6-B990-20CC319219C0" class="sect3">在仿真模式下记录领域</h3>
               <div>
                  <p>您可以在模拟模式下设置常规和强制域。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-2AAA8F0B-1BAF-4447-B9E4-61FCA8B80775">在仿真模式下记录领域时的注意事项</a><br>如果要在模拟模式下使用域，有几种用例需要考虑。
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-EBBAB054-8139-4E2B-876C-C06FA5F8DD4D">使用案例：模拟模式下的所有新领域</a><br>在此用例中，所有领域都是强制的或常规的，并且所有用户创建的领域都处于模拟模式。
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-06AF9BEA-4FCF-4FC4-9099-66C426B39048">使用案例：引入现有领域的新领域</a><br>在此用例中，您将一组新领域添加到具有现有领域集的数据库中。
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-DCFE00C3-7A46-404F-969D-C7BB019219FD">使用案例：测试领域中新对象的添加</a><br>在此用例中，您将新对象添加到现有领域，然后使用模拟模式对其进行测试，而不删除当前领域保护。
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-0963EA64-53C8-4E9E-8B06-E1280D406E71">使用案例：测试从领域中删除对象</a><br>在此用例中，您将测试将对象移除到现有领域。
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-39B63BF4-4A03-45B4-A0C8-4C7821E0C370">使用案例：测试向域中添加授权用户</a><br>在此用例中，您通过添加更多用户来放松安全控制。如果您只是添加更多授权用户，则无需模拟任何内容。
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-B677F532-E093-4B29-928A-9344F3FA28A9">使用案例：测试从领域中删除授权用户</a><br>在此用例中，您希望删除授权用户并使用模拟模式检查用户是否仍需要访问该领域。
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-01ED0923-611C-440D-BAF0-1A88034AFF0A">使用案例：使用领域测试新因素</a><br>在此用例中，您要测试对因子的更改。
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-FDD5237B-5A2E-406D-A031-9ECF849949CF">使用案例：测试对现有命令规则的更改</a><br>在此用例中，您在保持启用原始命令规则的同时测试对现有命令规则的更改。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-23CA88C2-C52C-4676-8564-2395898BECE7" title="模拟模式将违规写入模拟日志，而不是阻止SQL执行以快速测试新的和已修改的Oracle Database Vault控件。">使用模拟模式记录领域和命令规则活动</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-2AAA8F0B-1BAF-4447-B9E4-61FCA8B80775" name="GUID-2AAA8F0B-1BAF-4447-B9E4-61FCA8B80775"></a><h4 id="DVADM-GUID-2AAA8F0B-1BAF-4447-B9E4-61FCA8B80775" class="sect4">在仿真模式下记录领域时的注意事项</h4>
                  <div>
                     <p>如果要在模拟模式下使用域，有几种用例需要考虑。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用所有新的Database Vault控件测试应用程序：所有领域都处于模拟模式</p>
                        </li>
                        <li>
                           <p>向现有工作的Database Vault控件添加领域：只有一部分领域处于模拟模式</p>
                        </li>
                        <li>
                           <p>将新对象添加到现有的已启用领域，然后使用模拟模式测试差异，而不是禁用现有控件</p>
                        </li>
                        <li>
                           <p>从现有的启用域中删除一个或多个现有对象，然后使用模拟模式测试差异，而不是禁用现有控件</p>
                        </li>
                        <li>
                           <p>将新的授权用户添加到现有的已启用领域，然后使用模拟模式测试差异，而不是禁用现有控件</p>
                        </li>
                        <li>
                           <p>从现有的已启用域中删除一个或多个现有授权用户，然后使用模拟模式测试差异，而不是禁用现有控件</p>
                        </li>
                        <li>
                           <p>在现有的启用领域中添加或更改因子，然后使用模拟模式测试差异，而不是禁用现有控件</p>
                        </li>
                        <li>
                           <p>测试对生产中的命令规则的更改，同时保持启用原始命令规则</p>
                        </li>
                     </ul>
                     <p>当用户执行SQL语句并且失败时，对于已启用的域，对于模拟的域失败，或者由于这两个原因而失败，它可能会失败。可能存在强制领域，常规领域或两者。这些条件确定模拟日志中捕获的数据。</p>
                     <p>在创建了下一节中描述的用例之后，当对象具有保护它的两种类型的域时，常规域完全被强制域所强制。在强制和常规领域保护同一对象的所有情况下，关于模拟日志可以忽略常规领域。在模拟日志中仅捕获强制域失败。常规域失败输入模拟日志的唯一时间是对象的所有域都是常规域。然后，要将常规域写入模拟日志，必须执行以下操作：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>仿真模式中的所有常规领域都失败了</p>
                        </li>
                        <li>
                           <p>启用的所有常规域也会失败</p>
                        </li>
                     </ul>
                     <p>如果至少一个启用或模拟常规域成功，则不记录任何模拟常规域。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-5487F685-D481-49E6-B990-20CC319219C0" title="您可以在模拟模式下设置常规和强制域。">在模拟模式下记录领域</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-EBBAB054-8139-4E2B-876C-C06FA5F8DD4D" name="GUID-EBBAB054-8139-4E2B-876C-C06FA5F8DD4D"></a><h4 id="DVADM-GUID-EBBAB054-8139-4E2B-876C-C06FA5F8DD4D" class="sect4">使用案例：模拟模式下的所有新领域</h4>
                  <div>
                     <p>在此用例中，所有领域都是强制的或常规的，并且所有用户创建的领域都处于模拟模式。</p>
                     <p>示例如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>仅限强制领域，均为仿真模式</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>用户有权在所有强制领域中执行SQL语句。模拟日志表中未捕获任何内容。</p>
                              </li>
                              <li>
                                 <p>用户未通过一个或多个强制领域检查。所有领域检查失败都记录到模拟日志中。强制域检查用户的SQL语句成功的位置未记录。</p>
                                 <p>在此示例中，有三个强制领域。用户SQL语句在一个领域成功，而在另外两个领域失败。只有两个失败的域检查记录在模拟日志中。</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>仅限常规域，均为仿真模式</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>用户被授权在至少一个常规域中执行SQL语句。用户应该可以访问数据，因此不会将任何内容记录到模拟日志中。</p>
                              </li>
                              <li>
                                 <p>用户无权在所有常规域中执行SQL语句。模拟日志捕获所有失败的域授权失败。这使用户能够选择应该授权用户的领域。SQL只需要在一个常规领域中被授权才能工作，并且不需要更新所有常规领域来授权SQL。</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>强制和常规领域的混合，它们都处于模拟模式</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>在这种情况下，您可以在用户被拒绝时捕获关键领域。在强制和常规领域的情况下，强制领域是关键领域。所有必需领域必须通过授权检查才能获得用户访问权限。实际上，当强制领域保护对象时，常规领域可能被认为是多余的。因此，在强制和常规领域都保护同一对象的情况下，只有强制领域才能控制SQL语句是被阻止还是被允许执行。用户是否被授权到常规领域并不重要。此示例遵循第一个场景的规则，适用于模拟模式下的强制域。</p>
                              </li>
                              <li>
                                 <p>用户有权在所有强制领域中执行SQL语句。模拟日志表中未捕获任何内容。即使用户可能在一个或多个常规领域中成功或失败，也不会捕获关于常规领域故障的任何内容。</p>
                              </li>
                              <li>
                                 <p>用户未通过一个或多个强制领域检查。所有领域检查失败都记录到模拟日志中。强制域检查用户SQL语句成功的位置不会被记录。</p>
                                 <p>例如，有三个强制领域。用户SQL语句在一个领域成功，而在另外两个领域失败。只有两个失败的域检查记录在模拟日志中。</p>
                                 <p>不需要捕获常规域，因为只需要在模拟日志中捕获强制域。</p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-5487F685-D481-49E6-B990-20CC319219C0" title="您可以在模拟模式下设置常规和强制域。">在模拟模式下记录领域</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-06AF9BEA-4FCF-4FC4-9099-66C426B39048" name="GUID-06AF9BEA-4FCF-4FC4-9099-66C426B39048"></a><h4 id="DVADM-GUID-06AF9BEA-4FCF-4FC4-9099-66C426B39048" class="sect4">使用案例：引入现有领域的新领域</h4>
                  <div>
                     <p>在此用例中，您将一组新领域添加到具有现有领域集的数据库中。</p>
                     <p>现有领域已启用并正常运行。新领域处于模拟模式。仅当仿真和启用的域同时保护同一对象时，此用例才适用。</p>
                     <p>例子：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>模拟模式中的新强制领域，具有现有的已启用强制领域。此用例显示了对象的一些其他强制域：为现有对象添加更多安全性。</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>在模拟模式下启用强制领域和强制领域都使用用户SQL语句成功：在这种情况下，SQL正常执行并且没有捕获任何内容</p>
                              </li>
                              <li>
                                 <p>启用强制领域（至少一个）失败，仿真模式下的强制领域都成功：SQL被阻止，没有任何内容写入模拟日志</p>
                              </li>
                              <li>
                                 <p>启用强制领域（至少一个）失败，仿真模式下的强制领域出现一个或多个故障：SQL被阻止，仿真模式下所有失败的强制领域都被输入到仿真日志中</p>
                              </li>
                              <li>
                                 <p>在仿真模式下启用强制领域所有成功和强制领域至少有一个失败：SQL未被阻止，所有失败的强制领域在仿真模式下进入仿真日志</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>仿真模式中的新常规领域，具有现有的已启用常规领域：更多常规领域添加到安全对象，为用户提供访问敏感数据的新方法</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>启用常规域（至少一个）和仿真模式中的常规域（至少一个）成功：用户SQL正常执行，没有写入模拟日志</p>
                              </li>
                              <li>
                                 <p>启用常规域（至少一个）成功，仿真模式下的常规域都失败：用户SQL正常执行，没有任何内容输入到模拟日志中</p>
                              </li>
                              <li>
                                 <p>启用常规域的所有失败和仿真模式下的常规域都会失败：用户SQL被阻止，仿真模式下的所有常规域都输入到仿真日志中。如果需要，用户必须评估要授权的常规领域。当前实现阻止SQL并且不会将模拟模式中的常规域添加到模拟日志中，因为启用的常规域无论如何都会阻塞它。这必须更改，因为用户可能已添加新领域以在此用例中授权SQL。没有办法告诉新的SQL应该如何工作会发生什么，但是在仿真模式中也被所有常规领域阻止（当模拟模式中的一个常规领域被设计为允许它工作时）。这将模拟针对此情况的审核日志条目。</p>
                              </li>
                              <li>
                                 <p>启用常规域所有失败和仿真模式（至少一个）成功的常规域：用户SQL被阻止，并且没有任何内容写入模拟日志。</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>具有现有已启用强制域的新常规域：在这种情况下，您无需执行任何操作。启用的强制域将继续控制对象，如果启用或不启用，则模拟模式下的新常规域将不会产生任何影响。在这种情况下，不应生成模拟日志。</p>
                        </li>
                        <li>
                           <p>现有启用常规领域的仿真模式中的新强制领域：当启用的常规领域现在控制对象时，当启用仿真模式中的新强制领域时，他们将完全控制对象而不受旧版启用的控制常规领域。因此，将为所有强制领域创建模拟日志。这与具有现有启用的强制领域的新强制领域的方案相同。</p>
                        </li>
                        <li>
                           <p>模拟模式中的新常规领域，具有现有的强制和常规领域：启用的强制领域将是决定领域，是否将模拟模式中的新常规领域添加到系统中现有的已启用常规领域。这与作为强制和常规领域混合的场景相同，都在模拟模式下。没有任何内容写入模拟日志。</p>
                        </li>
                        <li>
                           <p>模拟模式下的新强制领域，启用强制和常规领域：可以忽略启用的常规领域。这与具有现有启用的强制领域的新强制领域的方案相同。</p>
                        </li>
                        <li>
                           <p>在模拟模式下将新的强制和常规领域与现有的强制和常规领域相结合：忽略所有已启用和强制的常规领域。这只是向现有对象添加更多强制领域。这与具有现有启用的强制域的新强制域相同。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-5487F685-D481-49E6-B990-20CC319219C0" title="您可以在模拟模式下设置常规和强制域。">在模拟模式下记录领域</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-DCFE00C3-7A46-404F-969D-C7BB019219FD" name="GUID-DCFE00C3-7A46-404F-969D-C7BB019219FD"></a><h4 id="DVADM-GUID-DCFE00C3-7A46-404F-969D-C7BB019219FD" class="sect4">使用案例：测试领域中新对象的添加</h4>
                  <div>
                     <p>在此用例中，您将新对象添加到现有领域，然后使用模拟模式对其进行测试，而不删除当前领域保护。</p>
                     <p>Oracle建议您在模拟模式下为具有相同授权用户和规则集的新对象创建重复域。这样，现有领域可以在测试新对象时继续为现有对象提供保护。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-5487F685-D481-49E6-B990-20CC319219C0" title="您可以在模拟模式下设置常规和强制域。">在模拟模式下记录领域</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-0963EA64-53C8-4E9E-8B06-E1280D406E71" name="GUID-0963EA64-53C8-4E9E-8B06-E1280D406E71"></a><h4 id="DVADM-GUID-0963EA64-53C8-4E9E-8B06-E1280D406E71" class="sect4">使用案例：测试从领域中删除对象</h4>
                  <div>
                     <p>在此用例中，您将测试将对象移除到现有领域。</p>
                     <p>由于要删除现有对象的安全控件，因此无需使用模拟模式。只需从领域中删除对象即可。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-5487F685-D481-49E6-B990-20CC319219C0" title="您可以在模拟模式下设置常规和强制域。">在模拟模式下记录领域</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-39B63BF4-4A03-45B4-A0C8-4C7821E0C370" name="GUID-39B63BF4-4A03-45B4-A0C8-4C7821E0C370"></a><h4 id="DVADM-GUID-39B63BF4-4A03-45B4-A0C8-4C7821E0C370" class="sect4">使用案例：测试向域中添加授权用户</h4>
                  <div>
                     <p>在此用例中，您通过添加更多用户来放松安全控制。如果您只是添加更多授权用户，则无需模拟任何内容。</p>
                     <p>如果要添加正在访问领域中的数据的新功能，但不确定要向领域授权哪些新数据库用户，则只需将新功能作为测试运行（如果尚未授权，将阻止该功能）。查看Database Vault审核日志以查看尝试访问领域数据的用户名，并添加现在已授权的任何新数据库用户。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-5487F685-D481-49E6-B990-20CC319219C0" title="您可以在模拟模式下设置常规和强制域。">在模拟模式下记录领域</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-B677F532-E093-4B29-928A-9344F3FA28A9" name="GUID-B677F532-E093-4B29-928A-9344F3FA28A9"></a><h4 id="DVADM-GUID-B677F532-E093-4B29-928A-9344F3FA28A9" class="sect4">使用案例：测试从领域中删除授权用户</h4>
                  <div>
                     <p>在此用例中，您希望删除授权用户并使用模拟模式检查用户是否仍需要访问该领域。</p>
                     <p>您可能不确定是否删除此用户，因为您必须检查授权用户是否正在访问授权活动的领域。</p>
                     <p>如果数据仅受常规域保护，则可以将授权用户克隆为唯一区别。从原始领域中删除要删除的用户，然后将此用户添加到克隆领域。然后更改克隆领域的审核设置以捕获<code class="codeph">audit on success</code> 。这使得被删除的用户在一段时间内访问领域时可以在审计记录中看到。在这种情况下也可以使用审计策略。对于受强制领域保护的数据，最佳解决方案是创建审核策略。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-5487F685-D481-49E6-B990-20CC319219C0" title="您可以在模拟模式下设置常规和强制域。">在模拟模式下记录领域</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-01ED0923-611C-440D-BAF0-1A88034AFF0A" name="GUID-01ED0923-611C-440D-BAF0-1A88034AFF0A"></a><h4 id="DVADM-GUID-01ED0923-611C-440D-BAF0-1A88034AFF0A" class="sect4">使用案例：使用领域测试新因素</h4>
                  <div>
                     <p>在此用例中，您要测试对因子的更改。</p>
                     <p>有两种情况可能会发生变化：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>对应用程序或基础架构的更改会强制更改因子</p>
                           <p>在这种情况下，您无需保留原始因素。但是，对象和授权用户应该能够在测试新因素时保持启用状态。使用已启用的域，您可以从授权用户中删除这些因素。同时，在没有授权用户的情况下，在模拟模式下为相同的受保护对象创建强制域。常规领域将保护对象免受未授权用户的攻击，而模拟领域将捕获所有访问以及因子信息。然后可以为每个用户挖掘模拟日志以提出新的因子，然后可以在模拟模式中将其添加到强制领域，以确保在迁移到原始常规领域之前它是干净的。</p>
                        </li>
                        <li>
                           <p>对应用程序或基础架构没有任何更改，但会发生诸如添加新因素或删除因素之类的更改</p>
                           <p>添加因子时，必须从原始因子克隆第二个模拟领域，但添加了新因子。如果模拟日志显示使用情况干净，那么您可以安全地将新因子引入原始领域。</p>
                           <p>丢弃因子会降低安全性配置文件，因此您只需从规则集中删除该因子即可。不需要进行测试。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-5487F685-D481-49E6-B990-20CC319219C0" title="您可以在模拟模式下设置常规和强制域。">在模拟模式下记录领域</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-FDD5237B-5A2E-406D-A031-9ECF849949CF" name="GUID-FDD5237B-5A2E-406D-A031-9ECF849949CF"></a><h4 id="DVADM-GUID-FDD5237B-5A2E-406D-A031-9ECF849949CF" class="sect4">使用案例：测试对现有命令规则的更改</h4>
                  <div>
                     <p>在此用例中，您在保持启用原始命令规则的同时测试对现有命令规则的更改。</p>
                     <p>在生产中启用更改之前，可能需要更新命令规则并进行理想测试。对于将添加到一组现有命令规则的新命令规则，请在创建新命令规则时将其置于模拟模式。其他预先存在的命令规则已启用并提供保护。</p>
                     <p>如果要修改现有命令规则，则无法维护现有保护并测试新修改。Oracle建议您创建审核策略以捕获原始命令规则正在执行的操作，然后为其设置警报。审计不会像命令规则那样阻止SQL，但至少可以提醒您该操作。然后，您可以将新更新的命令规则置于模拟模式并进行测试。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-5487F685-D481-49E6-B990-20CC319219C0" title="您可以在模拟模式下设置常规和强制域。">在模拟模式下记录领域</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-8BB95940-7D8D-4AEB-9A53-246BA2AEED4C" name="GUID-8BB95940-7D8D-4AEB-9A53-246BA2AEED4C"></a><h3 id="DVADM-GUID-8BB95940-7D8D-4AEB-9A53-246BA2AEED4C" class="sect3">教程：使用模拟模式跟踪对领域的违规</h3>
               <div>
                  <p>本教程介绍如何创建使用模拟模式的领域，然后测试对领域的违规。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-A7AE4EB7-B00A-42E1-BCFD-D914BD36F8A3">关于本教程</a><br>在本教程中，您将围绕<code class="codeph">HR.EMPLOYEES</code>表创建一个领域并测试对它的违规。
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-A33AA63A-9DC2-4482-92E8-714823CC965F">第1步：为本教程创建用户</a><br>您必须为本教程创建三个用户。
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-6AE7A50C-6498-4D86-8EC4-537E30920482">第2步：创建领域和Oracle Database Vault策略</a><br>接下来，围绕<code class="codeph">HR.EMPLOYEES</code>表创建一个领域，然后将此领域添加到Oracle Database Vault策略中。
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-650EA278-861B-4F50-BAAF-1323621E491B">第3步：测试领域和政策</a><br>用户<code class="codeph">tjones_dba</code>将在域上提交违规以测试领域和策略。
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-79944EF8-A802-4D5B-AC3F-302F926D9A35">第4步：查询DBA_DV_SIMULATION_LOG查看违规情况</a><br>现在，您可以检查模拟模式日志，记录用户<code class="codeph">tjones_dba</code>提交的违规行为。
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-1D92ACE9-1FB6-404F-A026-AB62AA50353A">步骤5：启用并重新测试领域</a><br>现在您已捕获违规，用户<code class="codeph">psmith</code>可以更新<code class="codeph">HR.EMPLOYEES_pol</code>策略。
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-6D55E925-85AF-491A-9184-7E4D8636FC47">第6步：删除本教程的组件</a><br>如果不再需要，可以删除为本教程创建的组件。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-23CA88C2-C52C-4676-8564-2395898BECE7" title="模拟模式将违规写入模拟日志，而不是阻止SQL执行以快速测试新的和已修改的Oracle Database Vault控件。">使用模拟模式记录领域和命令规则活动</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-A7AE4EB7-B00A-42E1-BCFD-D914BD36F8A3" name="GUID-A7AE4EB7-B00A-42E1-BCFD-D914BD36F8A3"></a><h4 id="DVADM-GUID-A7AE4EB7-B00A-42E1-BCFD-D914BD36F8A3" class="sect4">关于本教程</h4>
                  <div>
                     <p>在本教程中，您将围绕<code class="codeph">HR.EMPLOYEES</code>表创建一个领域并测试对它的违规。
                     </p>
                     <p><code class="codeph">HR.EMPLOYEES</code>表包含员工工资等机密数据。为了测试领域，管理员<code class="codeph">tjones_dba</code>将查找并修改另一名员工<code class="codeph">smavris</code>的薪水。Database Vault管理员<code class="codeph">leo_dvowner</code>将使用模拟模式跟踪<code class="codeph">HR.EMPLOYEES</code>表的违规情况。为此，用户<code class="codeph">leo_dvowner</code>将创建一个数据库保管库策略，委派管理员，用户<code class="codeph">psmith</code>将拥有该策略。然后，用户<code class="codeph">psmith</code>将能够对策略进行有限的更改，而无需<code class="codeph">DV_OWNER</code>或<code class="codeph">DV_ADMIN</code>角色。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-8BB95940-7D8D-4AEB-9A53-246BA2AEED4C" title="本教程介绍如何创建使用模拟模式的领域，然后测试对领域的违规。">教程：使用模拟模式跟踪对域的违规</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-A33AA63A-9DC2-4482-92E8-714823CC965F" name="GUID-A33AA63A-9DC2-4482-92E8-714823CC965F"></a><h4 id="DVADM-GUID-A33AA63A-9DC2-4482-92E8-714823CC965F" class="sect4">第1步：为本教程创建用户</h4>
                  <div>
                     <p>您必须为本教程创建三个用户。</p>
                     <div class="section">用户是： <code class="codeph">psmith</code> ，谁是Database Vault策略所有者; <code class="codeph">tjones_dba</code> ，在<code class="codeph">HR.EMPLOYEES</code>表上犯下违规行为;和<code class="codeph">smavris</code> ，他们的工资是<code class="codeph">tjones_dba</code>违法行为的接收者。
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以已被授予<code class="codeph">DV_ACCTMGR</code>角色的用户身份登录数据库实例。</span><div>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">sqlplus bea_dvacctmgr输入密码： <span class="italic">密码</span>
</pre><p>在多租户环境中，您必须登录到相应的可插拔数据库（PDB）。例如：</p><pre class="oac_no_warn" dir="ltr">CONNECT bea_dvacctmgr @hrpdb输入密码： <span class="italic">密码</span>
</pre><p>要查找可用的PDB，请运行<code class="codeph">show pdbs</code>命令。要检查当前PDB，请运行<code class="codeph">show con_name</code>命令。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>创建以下用户并授予他们<code class="codeph">CREATE SESSION</code>权限。</span><div><pre class="oac_no_warn" dir="ltr">GRANT创建会话以psmith IDENTIFIED BY <span class="italic">密码</span> ; GRANT创建会话到tjones_dba通过<span class="italic">密码</span>识别; GRANT创建会话以通过<span class="italic">密码</span>识别;</pre><p>请遵循“ <a href="../dbseg/configuring-authentication.html#DBSEG33223" target="_blank"><span><cite>Oracle数据库安全指南”中</cite></span></a>的准则，将<span class="italic"><code class="codeph">password</code></span>替换为安全的密码。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>以已被授予<code class="codeph">DV_OWNER</code>角色的用户身份进行连接。</span><div>例如：<pre class="oac_no_warn" dir="ltr">CONNECT leo_dvowner  - <span class="italic">或者，leo_dvowner @hrpdb</span>输入密码： <span class="italic">密码</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>向用户<code class="codeph">psmith</code>授予<code class="codeph">DV_POLICY_OWNER</code>角色，该角色使<code class="codeph">psmith</code>能够管理Database Vault策略。</span><div><pre class="oac_no_warn" dir="ltr">GRANT DV_POLICY_OWNER到psmith;</pre></div>
                        </li>
                        <li class="stepexpand"><span>以<code class="codeph">SYS</code>用户身份连接<code class="codeph">SYSDBA</code>管理权限。</span><div><pre class="oac_no_warn" dir="ltr">将SYS作为SYSDBA连接<span class="italic">- 或者，连接SYS @hrpdb</span> AS SYSDBA输入密码： <span class="italic">password</span>
</pre></div>
                        </li>
                        <li class="stepexpand"><span>将<code class="codeph">DBA</code>角色授予用户<code class="codeph">tjones_dba</code> </span><div><pre class="oac_no_warn" dir="ltr">GRANT DBA TO tjones_dba;</pre></div>
                        </li>
                        <li class="stepexpand"><span>作为<code class="codeph">HR</code>模式所有者连接。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT HR <span class="italic">- 或者，HR @ hrpdb</span>输入密码： <span class="italic">密码</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>将<code class="codeph">HR.EMPLOYEES</code>表的<code class="codeph">SELECT</code>权限授予用户<code class="codeph">smavris</code> </span><div><pre class="oac_no_warn" dir="ltr">人力资源选择HR.EMPLOYEES到smavris;</pre></div>
                        </li>
                     </ol>
                     <div class="section">在此阶段，用户已全部创建并被授予适当的权限。</div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-8BB95940-7D8D-4AEB-9A53-246BA2AEED4C" title="本教程介绍如何创建使用模拟模式的领域，然后测试对领域的违规。">教程：使用模拟模式跟踪对域的违规</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-6AE7A50C-6498-4D86-8EC4-537E30920482" name="GUID-6AE7A50C-6498-4D86-8EC4-537E30920482"></a><h4 id="DVADM-GUID-6AE7A50C-6498-4D86-8EC4-537E30920482" class="sect4">第2步：创建领域和Oracle Database Vault策略</h4>
                  <div>
                     <p>接下来，围绕<code class="codeph">HR.EMPLOYEES</code>表创建一个领域，然后将此领域添加到Oracle Database Vault策略中。
                     </p>
                     <ol>
                        <li class="stepexpand"><span>以已被授予<code class="codeph">DV_OWNER</code>角色的用户身份进行连接。</span><div>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">CONNECT leo_dvowner  - <span class="italic">或者，leo_dvowner @hrpdb</span>输入密码： <span class="italic">密码</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>围绕<code class="codeph">HR.EMPLOYEES</code>表创建领域，如下所示。</span><div>
                              <p>这些过程创建<code class="codeph">HR.EMPLOYEES_realm</code> ，将<code class="codeph">HR.EMPLOYEES</code>表添加到此域，将<code class="codeph">HR</code>作为所有者进行身份验证，将用户<code class="codeph">psmith</code>作为参与者进行身份验证，并在模拟模式下设置域。
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_MACADM.CREATE_REALM（realm_name =&gt;'HR.EMPLOYEES_realm'，description =&gt;'Realm to protected HR.EMPLOYEES'，enabled =&gt; DBMS_MACUTL.G_SIMULATION，audit_options =&gt; DBMS_MACUTL.G_REALM_AUDIT_FAIL，realm_type =&gt; 0）;结束; / BEGIN DBMS_MACADM.ADD_OBJECT_TO_REALM（realm_name =&gt;'HR.EMPLOYEES_realm'，object_owner =&gt;'HR'，object_name =&gt;'EMPLOYEES'，object_type =&gt;'TABLE'）;结束; /</pre></div>
                        </li>
                        <li class="stepexpand"><span>创建<code class="codeph">HR.EMPLOYEES_pol</code> Database Vault策略并将其设置为模拟模式。</span><div>
                              <p>这些过程创建<code class="codeph">HR.EMPLOYEES_pol</code>策略，将刚刚创建的域添加到策略，然后将用户<code class="codeph">psmith</code>添加为策略的所有者。
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_MACADM.CREATE_POLICY（policy_name =&gt;'HR.EMPLOYEES_pol'，description =&gt;'保护HR.EMPLOYEES的政策'，policy_state =&gt; DBMS_MACADM.G_SIMULATION）;结束; / BEGIN DBMS_MACADM.ADD_REALM_TO_POLICY（policy_name =&gt;'HR.EMPLOYEES_pol'，realm_name =&gt;'HR.EMPLOYEES_realm'）;结束; / BEGIN DBMS_MACADM.ADD_OWNER_TO_POLICY（policy_name =&gt;'HR.EMPLOYEES_pol'，owner_name =&gt;'PSMITH'）;结束; /</pre></div>
                        </li>
                     </ol>
                     <div class="section">此时，领域和策略已准备好进行测试。</div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-8BB95940-7D8D-4AEB-9A53-246BA2AEED4C" title="本教程介绍如何创建使用模拟模式的领域，然后测试对领域的违规。">教程：使用模拟模式跟踪对域的违规</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-650EA278-861B-4F50-BAAF-1323621E491B" name="GUID-650EA278-861B-4F50-BAAF-1323621E491B"></a><h4 id="DVADM-GUID-650EA278-861B-4F50-BAAF-1323621E491B" class="sect4">第3步：测试领域和政策</h4>
                  <div>
                     <p>用户<code class="codeph">tjones_dba</code>将在域上提交违规以测试领域和策略。
                     </p>
                     <ol>
                        <li class="stepexpand"><span>以用户<code class="codeph">tjones_dba</code>连接。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT tjones_dba  - <span class="italic">或者，tjones_dba @hrpdb</span>输入密码： <span class="italic">password</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>在<code class="codeph">HR.EMPLOYEES</code>表中查询<code class="codeph">smavris</code>的工资。</span><div><pre class="oac_no_warn" dir="ltr">从HR.EMPLOYEES中选择SALARY EMAIL ='SMAVRIS';</pre><p>应出现类似以下的输出：</p><pre class="oac_no_warn" dir="ltr">SALARY ---------- 6500</pre></div>
                        </li>
                        <li class="stepexpand"><span>将<code class="codeph">smavris</code>的薪水减半。</span><div><pre class="oac_no_warn" dir="ltr">更新HR.EMPLOYEES SET SALARY = SALARY / 2 WHERE EMAIL ='SMAVRIS'; 1行更新。</pre></div>
                        </li>
                        <li class="stepexpand"><span>以用户<code class="codeph">smavris</code>连接。</span><div><pre class="oac_no_warn" dir="ltr">连接smavris <span class="italic">- 或者，smavris @ hrpdb</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>查询<code class="codeph">smavris</code>的工资。</span><div><pre class="oac_no_warn" dir="ltr">从HR.EMPLOYEES中选择SALARY EMAIL ='SMAVRIS';</pre><p>应出现类似以下的输出：</p><pre class="oac_no_warn" dir="ltr">SALARY ---------- 3250</pre></div>
                        </li>
                     </ol>
                     <div class="section">此时， <code class="codeph">tjones_dba</code>的违规已记录在<code class="codeph">DBA_DV_SIMULATION_LOG</code>数据字典视图中。
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-8BB95940-7D8D-4AEB-9A53-246BA2AEED4C" title="本教程介绍如何创建使用模拟模式的领域，然后测试对领域的违规。">教程：使用模拟模式跟踪对域的违规</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-79944EF8-A802-4D5B-AC3F-302F926D9A35" name="GUID-79944EF8-A802-4D5B-AC3F-302F926D9A35"></a><h4 id="DVADM-GUID-79944EF8-A802-4D5B-AC3F-302F926D9A35" class="sect4">第4步：查询DBA_DV_SIMULATION_LOG查看违规情况</h4>
                  <div>
                     <p>现在，您可以检查模拟模式日志，记录用户<code class="codeph">tjones_dba</code>提交的违规行为。
                     </p>
                     <ol>
                        <li class="stepexpand"><span>以已被授予<code class="codeph">DV_OWNER</code>角色的用户身份进行连接。</span><div>例如：<pre class="oac_no_warn" dir="ltr">CONNECT leo_dvowner  - <span class="italic">或者，leo_dvowner @hrpdb</span>输入密码： <span class="italic">密码</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>查询<code class="codeph">DBA_DV_SIMULATION_LOG</code>数据字典视图。</span><div><pre class="oac_no_warn" dir="ltr">SELECT USERNAME，SQLTEXT，VIOLATION_TYPE FROM（SELECT T1。*，T2。COLUMN_VALUE AS REALM来自DVSYS.DBA_DV_SIMULATION_LOG T1，表（T1。REALM_NAME）T2）WHERE REALM ='HR.EMPLOYEES_realm';</pre><p>应出现类似以下的输出：</p><pre class="oac_no_warn" dir="ltr">用户名  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - - ------------------------------- SQLTEXT ------------------ -------------------------------------------------- ------------ VIOLATION_TYPE ------------------------------------- ------------------------------------------- TJONES_DBA从HR.EMPLOYEES选择SALARY哪里有电子邮件='SMAVRIS'境界违规TJONES_DBA更新HR.EMPLOYEES设置SALARY = SALARY / 2哪里有电子邮件='SMAVRIS'境界违规</pre></div>
                        </li>
                     </ol>
                     <div class="section">输出结果表明用户<code class="codeph">tjones_dba</code>犯了两项罪名：首先，他查看了另一名员工的工资，不仅如此，他将其减半。违规类型是领域违规。<code class="codeph">smavris</code>的查询未被捕获，因为她合法地可以查看她的薪水。
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-8BB95940-7D8D-4AEB-9A53-246BA2AEED4C" title="本教程介绍如何创建使用模拟模式的领域，然后测试对领域的违规。">教程：使用模拟模式跟踪对域的违规</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-1D92ACE9-1FB6-404F-A026-AB62AA50353A" name="GUID-1D92ACE9-1FB6-404F-A026-AB62AA50353A"></a><h4 id="DVADM-GUID-1D92ACE9-1FB6-404F-A026-AB62AA50353A" class="sect4">步骤5：启用并重新测试领域</h4>
                  <div>
                     <p>现在您已捕获违规，用户<code class="codeph">psmith</code>可以更新<code class="codeph">HR.EMPLOYEES_pol</code>策略。
                     </p>
                     <div class="section">这样就可以启用<code class="codeph">HR.EMPLOYEES_realm</code> 。然后，您可以再次测试违规行为。
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以<code class="codeph">psmith</code>用户<code class="codeph">psmith</code>连接。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT psmith  - <span class="italic">或者，psmith @hrpdb</span>输入密码： <span class="italic">密码</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>更新策略以使其启用。</span><div><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_MACADM.UPDATE_POLICY_STATE（policy_name =&gt;'HR.EMPLOYEES_pol'，policy_state =&gt; 1）;结束; /</pre></div>
                        </li>
                        <li class="stepexpand"><span>以用户<code class="codeph">tjones_dba</code>连接。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT tjones_dba  - <span class="italic">或者，tjones_dba @hrpdb</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>尝试将<code class="codeph">smavris</code>的薪水降低到新的水平。</span><div><pre class="oac_no_warn" dir="ltr">更新HR.EMPLOYEES SET SALARY = SALARY / 2 WHERE EMAIL ='SMAVRIS';</pre><p>应出现类似以下的输出：</p><pre class="oac_no_warn" dir="ltr">第1行的错误：ORA-01031：权限不足</pre></div>
                           <div>现在启用的策略使域能够保护<code class="codeph">HR.EMPLOYEES</code>表。 <code class="codeph">smavris</code>的薪水不再萎缩。
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-8BB95940-7D8D-4AEB-9A53-246BA2AEED4C" title="本教程介绍如何创建使用模拟模式的领域，然后测试对领域的违规。">教程：使用模拟模式跟踪对域的违规</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-6D55E925-85AF-491A-9184-7E4D8636FC47" name="GUID-6D55E925-85AF-491A-9184-7E4D8636FC47"></a><h4 id="DVADM-GUID-6D55E925-85AF-491A-9184-7E4D8636FC47" class="sect4">第6步：删除本教程的组件</h4>
                  <div>
                     <p>如果不再需要，可以删除为本教程创建的组件。</p>
                     <ol>
                        <li class="stepexpand"><span>以已被授予<code class="codeph">DV_OWNER</code>角色的用户身份进行连接。</span><div>例如：<pre class="oac_no_warn" dir="ltr">CONNECT leo_dvowner  - <span class="italic">或者，leo_dvowner @hrpdb</span>输入密码： <span class="italic">密码</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>删除<code class="codeph">HR.EMPLOYEES_pol</code>数据库保险库策略。</span><div><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.DROP_POLICY（'HR.EMPLOYEES_pol'）;</pre></div>
                           <div>首先必须删除该策略，然后才能删除其内容。</div>
                        </li>
                        <li class="stepexpand"><span>删除<code class="codeph">HR.EMPLOYEES_realm</code> 。</span><div><pre class="oac_no_warn" dir="ltr">EXEC DBMS_MACADM.DELETE_REALM（'HR.EMPLOYEES_realm'）;</pre></div>
                        </li>
                        <li class="stepexpand"><span>删除累积的模拟模式日志数据。</span><div>
                              <p>由于模拟模式日志仅捕获有关用户<code class="codeph">tjones_dba</code>信息，因此您只能删除与此用户相关的行。
                              </p><pre class="oac_no_warn" dir="ltr">DELETE FROM DVSYS.SIMULATION_LOG $ WHERE USERNAME ='TJONES_DBA';</pre></div>
                        </li>
                        <li class="stepexpand"><span>以用户<code class="codeph">HR</code>身份连接。</span><div><pre class="oac_no_warn" dir="ltr">CONNECT HR <span class="italic">- 或者，连接HR @ hrpdb</span>输入密码： <span class="italic">密码</span></pre></div>
                        </li>
                        <li class="stepexpand"><span>将<code class="codeph">smavris</code>的工资恢复到其违规前状态。</span><div><pre class="oac_no_warn" dir="ltr">更新HR.EMPLOYEES SET SALARY = 6500 WHERE EMAIL ='SMAVRIS';</pre></div>
                        </li>
                        <li class="stepexpand"><span>以已被授予<code class="codeph">DV_ACCTMGR</code>角色的用户身份进行连接。</span><div>
                              <p>例如：</p><pre class="oac_no_warn" dir="ltr">CONNECT bea_dvacctmgr <span class="italic">- 或者，bea_dvacctmgr @hrpdb</span>输入密码： <span class="italic">密码</span>
</pre></div>
                        </li>
                        <li class="stepexpand"><span>删除用户<code class="codeph">psmith</code> ， <code class="codeph">smavris</code>和<code class="codeph">tjones_dba</code> 。</span><div><pre class="oac_no_warn" dir="ltr">DROP USER psmith; DROP USER smavris; DROP USER tjones_dba;</pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-8BB95940-7D8D-4AEB-9A53-246BA2AEED4C" title="本教程介绍如何创建使用模拟模式的领域，然后测试对领域的违规。">教程：使用模拟模式跟踪对域的违规</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-D60381F6-9D4F-40FC-A409-FB144FE490C6" name="GUID-D60381F6-9D4F-40FC-A409-FB144FE490C6"></a><h3 id="DVADM-GUID-D60381F6-9D4F-40FC-A409-FB144FE490C6" class="sect3">在仿真模式下记录领域的用例和指南</h3>
               <div>
                  <p>Oracle提供了一组用于在仿真模式下记录领域的用例和指南。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-A0E0CF4F-6F62-47A9-9188-8476A58E8C21">关于在模拟模式下记录领域</a><br>使用的领域类型可能会影响写入模拟日志的数据。
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-17165018-8ED0-48F2-A1E7-768FB746D5A1">用例：模拟模式下的全新领域</a><br>在此用例中，所有领域都是强制的或常规的，并且所有用户创建的领域都处于模拟模式。
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-F083B2C0-6FCF-46FD-B00B-6447B9A54568">使用案例：引入现有领域的新领域</a><br>新领域处于模拟模式，现有领域已启用并正常工作。
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-E6F9354E-443E-4735-86E4-4EF6E9D96230">用例：添加到领域的新对象</a><br>您可以将新对象添加到现有领域，然后使用模拟模式对其进行测试，而无需删除当前领域保护。
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-11157AE0-2A52-4BC5-ACD1-42D049907534">使用案例：从领域中删除对象</a><br>您可以使用<code class="codeph">DBMS_MACADM.DELETE_OBJECT_FROM_REALM</code>过程从<code class="codeph">DBMS_MACADM.DELETE_OBJECT_FROM_REALM</code>删除对象。
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-01CECD47-345B-40DA-BBD1-FD04E85D1C9A">使用案例：将授权用户添加到领域</a><br>您可以使用<code class="codeph">DBMS_MACADM.ADD_AUTH_TO_REALM</code>过程将授权用户添加到<code class="codeph">DBMS_MACADM.ADD_AUTH_TO_REALM</code> 。
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-152BA89E-73F2-4406-8C31-A1643EB5A652">使用案例：从领域中删除授权用户</a><br>您可以使用<code class="codeph">DBMS_MACADM.DELETE_AUTH_FROM_REALM</code>过程从<code class="codeph">DBMS_MACADM.DELETE_AUTH_FROM_REALM</code>删除授权用户。
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-42CF4507-F6F0-439B-81D7-5BEEE395B116">使用案例：测试领域中的新因素</a><br>如果某个领域有新因素，您可以使用模拟模式来测试这些因素是否有变化。
                     </li>
                     <li class="ulchildlink"><a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-924D0FAD-920E-4EF3-8618-5124DB9B1E79">使用案例：在保持原始命令控制的同时测试对现有命令规则的更改</a><br>您可以在保持启用原始命令控件的同时测试对现有命令规则的更改。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-23CA88C2-C52C-4676-8564-2395898BECE7" title="模拟模式将违规写入模拟日志，而不是阻止SQL执行以快速测试新的和已修改的Oracle Database Vault控件。">使用模拟模式记录领域和命令规则活动</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-A0E0CF4F-6F62-47A9-9188-8476A58E8C21" name="GUID-A0E0CF4F-6F62-47A9-9188-8476A58E8C21"></a><h4 id="DVADM-GUID-A0E0CF4F-6F62-47A9-9188-8476A58E8C21" class="sect4">关于在模拟模式下记录领域</h4>
                  <div>
                     <p>使用的领域类型可能会影响写入模拟日志的数据。</p>
                     <p>当用户执行SQL语句并且失败时，对于已模拟（或两者）的域启用或失败的域可能会失败。这些可能是强制领域，常规领域或两者。这些条件决定了模拟日志中捕获的内容。</p>
                     <p>当一个对象同时具有常规域和强制域以保护它时，强制域保护优先。当常规领域和强制领域都保护对象时，模拟日志仅捕获强制领域中的活动。模拟日志将仅捕获强制域失败。模拟日志捕获常规域失败的唯一时间是对象的所有域都是常规域，并且如果常规域具有以下行为：</p>
                     <ul id="GUID-A0E0CF4F-6F62-47A9-9188-8476A58E8C21__UL_ARG_1DQ_SFB" style="list-style-type:disc">
                        <li>仿真模式中的所有常规域都会失败，并且</li>
                        <li>启用的所有常规域也会失败</li>
                     </ul>
                     <p>如果至少一个启用或模拟常规域成功，则模拟日志中不会记录任何模拟常规域。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-D60381F6-9D4F-40FC-A409-FB144FE490C6" title="Oracle提供了一组用于在仿真模式下记录领域的用例和指南。">在仿真模式下记录领域的用例和指南</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-17165018-8ED0-48F2-A1E7-768FB746D5A1" name="GUID-17165018-8ED0-48F2-A1E7-768FB746D5A1"></a><h4 id="DVADM-GUID-17165018-8ED0-48F2-A1E7-768FB746D5A1" class="sect4">用例：模拟模式下的全新领域</h4>
                  <div>
                     <p>在此用例中，所有领域都是强制的或常规的，并且所有用户创建的领域都处于模拟模式。</p>
                     <ul id="GUID-17165018-8ED0-48F2-A1E7-768FB746D5A1__UL_P3M_QHV_SFB" style="list-style-type:disc">
                        <li><span class="bold">仅限强制领域：所有都处于模拟模式</span><p>用户有权在所有强制领域中执行SQL语句。模拟日志表中未捕获任何内容。</p>
                           <p>如果用户未通过一个或多个强制域检查，则所有域检查失败都将写入模拟日志。强制域检查用户SQL语句成功的位置是否未写入模拟日志。假设有三个强制域，并且用户SQL语句在一个领域成功，而在另外两个领域失败。只有两个失败的域检查才会写入模拟日志。</p>
                        </li>
                        <li><span class="bold">仅限常规域：全部处于模拟模式</span><p>假设用户被授权在至少一个常规域中执行SQL语句。该用户应该可以访问数据，因此没有任何内容写入模拟日志。</p>
                           <p>或者，假设用户未被授权执行任何常规域的SQL语句。模拟日志将捕获失败的域授权失败。由于记录了故障，管理员可以选择应授权用户的域。SQL只需要在一个常规域中授权才能工作。并非所有常规域都需要更新才能授权SQL。</p>
                        </li>
                        <li><span class="bold">强制和常规领域的混合：都处于模拟模式</span><p>在这种情况下，您可以在用户被拒绝时捕获门控领域。对于强制性和常规领域，强制领域是门控领域。所有必需领域必须通过授权检查才能获得用户访问权限。事实上，当强制领域保护对象时，常规领域可能被认为是多余的。因此，在存在强制和常规领域的情况下，只应将强制领域记录到模拟日志中。用户是否被授权到常规领域并不重要。在这种情况下，只使用强制域，它们都处于模拟模式。</p>
                           <p>假设用户被授权在所有强制领域中执行SQL语句。在这种情况下，模拟日志表中没有捕获任何内容。即使用户可能在一个或多个常规领域中成功或失败，也不会捕获关于常规领域故障的任何内容。</p>
                           <p>如果用户未通过一个或多个强制领域检查，则会将所有领域检查失败记录到模拟日志中。强制域检查用户SQL语句成功的位置未记录。例如，假设有三个强制领域。如果用户的SQL语句在一个领域成功并且与另外两个领域失败，则只有两个失败的领域检查记录在模拟日志中。不需要捕获常规领域，因为对于这种情况，它并不重要。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-D60381F6-9D4F-40FC-A409-FB144FE490C6" title="Oracle提供了一组用于在仿真模式下记录领域的用例和指南。">在仿真模式下记录领域的用例和指南</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-F083B2C0-6FCF-46FD-B00B-6447B9A54568" name="GUID-F083B2C0-6FCF-46FD-B00B-6447B9A54568"></a><h4 id="DVADM-GUID-F083B2C0-6FCF-46FD-B00B-6447B9A54568" class="sect4">使用案例：引入现有领域的新领域</h4>
                  <div>
                     <p>新领域处于模拟模式，现有领域已启用并正常工作。</p>
                     <p>仅当仿真模式和启用的域同时保护同一对象时，此用例才适用。</p>
                     <ul id="GUID-F083B2C0-6FCF-46FD-B00B-6447B9A54568__UL_MHG_5MW_SFB" style="list-style-type:disc">
                        <li><span class="bold">具有现有已启用强制域的新启用的强制域</span><p>此方案显示现有对象的一些其他强制领域，旨在为对象添加更多安全性。</p>
                           <ul id="GUID-F083B2C0-6FCF-46FD-B00B-6447B9A54568__UL_OHC_2PW_SFB" style="list-style-type:disc">
                              <li>在模拟模式下启用强制领域和强制领域都是成功的用户SQL：SQL正常执行，没有任何内容写入模拟日志。</li>
                              <li>至少一个启用的强制域失败，并且模拟模式下的强制域成功：SQL被阻止，并且没有任何内容写入模拟模式日志。</li>
                              <li>至少一个启用的强制域失败，并且仿真模式下的强制域具有一个或多个故障：SQL被阻止，并且仿真模式中所有失败的强制域都被写入仿真模式日志。</li>
                              <li>启用强制领域都是成功的，并且仿真模式中的强制领域至少有一个故障：SQL未被阻止，并且仿真模式中所有失败的强制领域都被写入模拟日志。</li>
                           </ul>
                        </li>
                        <li>具有现有启用的常规领域的仿真模式中的新常规领域：将更多常规领域添加到安全对象中，以便为用户提供访问敏感数据的新方法。
                           <ul id="GUID-F083B2C0-6FCF-46FD-B00B-6447B9A54568__UL_IFF_TYW_SFB" style="list-style-type:disc">
                              <li>在仿真模式下，至少一个启用的常规域和至少一个常规域成功：SQL正常执行，没有任何内容写入模拟日志。</li>
                              <li>至少一个启用的常规域和模拟模式下的所有常规域都失败：SQL语句正常执行，因此没有任何内容写入模拟日志。</li>
                              <li>仿真模式下所有已启用的常规域和常规域都会失败：SQL语句被阻止，仿真模式下的所有常规域都将写入仿真日志。如有必要，您必须评估要授权的常规域。Oracle Database Vault将阻止SQL，而不是在仿真日志中以仿真模式记录常规域，因为启用的常规域仍会阻止它。这必须更改，因为用户可能已添加新领域以在此用例中授权SQL。没有办法告诉新的SQL应该如何工作会发生什么，但是在仿真模式中也被所有常规领域阻止（当模拟模式中的一个常规领域被设计为允许它工作时）。这将模拟针对此情况的审核日志条目。</li>
                              <li>启用的常规域都会失败，并且仿真模式中的至少一个常规域成功：SQL被阻止，并且没有任何内容写入模拟日志。</li>
                           </ul>
                        </li>
                        <li>具有现有启用的常规领域的仿真模式中的新常规领域：这是无所事事的情况。启用的常规域将继续控制对象，如果启用或不启用模拟模式下的新常规域将不会产生任何影响。由于没有影响，因此不会生成模拟日志。</li>
                        <li>具有现有启用的常规领域的模拟模式中的新强制领域：当启用的常规领域现在将控制对象时，当启用模拟模式中的新强制领域时，他们将完全控制对象而不受较旧的常规领域。因此，将为未通过授权检查的模拟模式中的所有强制领域生成模拟日志。这与用例一样，当强制域都处于模拟模式时。</li>
                        <li>模拟模式下的新常规领域，在模拟模式下启用现有的强制领域和启用的常规领域：启用的强制领域将是新模拟模式常规领域是否添加到系统中现有启用的常规领域的决定领域。这与具有现有启用的常规域的模拟模式中具有新常规域的用例相同。什么都不会写入模拟日志。</li>
                        <li>模拟模式中的新强制领域，具有现有的强制和常规领域：可以忽略已启用的常规领域。此用例与具有现有已启用强制域的新模拟模式强制域的用例相同。</li>
                        <li>新的模拟模式强制和常规领域与现有的强制和常规领域的混合：忽略所有启用和模拟模式的常规领域。这只是向现有对象添加更多强制领域。此用例与具有新模拟强制领域和启用强制领域的用例相同。</li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-D60381F6-9D4F-40FC-A409-FB144FE490C6" title="Oracle提供了一组用于在仿真模式下记录领域的用例和指南。">在仿真模式下记录领域的用例和指南</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-E6F9354E-443E-4735-86E4-4EF6E9D96230" name="GUID-E6F9354E-443E-4735-86E4-4EF6E9D96230"></a><h4 id="DVADM-GUID-E6F9354E-443E-4735-86E4-4EF6E9D96230" class="sect4">用例：添加到领域的新对象</h4>
                  <div>
                     <p>您可以将新对象添加到现有领域，然后使用模拟模式对其进行测试，而无需删除当前领域保护。</p>
                     <p>Oracle建议您在模拟模式下为具有相同授权用户和规则集的新对象创建重复域。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-D60381F6-9D4F-40FC-A409-FB144FE490C6" title="Oracle提供了一组用于在仿真模式下记录领域的用例和指南。">在仿真模式下记录领域的用例和指南</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-11157AE0-2A52-4BC5-ACD1-42D049907534" name="GUID-11157AE0-2A52-4BC5-ACD1-42D049907534"></a><h4 id="DVADM-GUID-11157AE0-2A52-4BC5-ACD1-42D049907534" class="sect4">使用案例：从领域中删除对象</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_MACADM.DELETE_OBJECT_FROM_REALM</code>过程从<code class="codeph">DBMS_MACADM.DELETE_OBJECT_FROM_REALM</code>删除对象。
                     </p>
                     <p>但是，由于要删除现有对象的安全控件，因此无需使用模拟模式。您需要做的就是从领域中删除对象。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-D60381F6-9D4F-40FC-A409-FB144FE490C6" title="Oracle提供了一组用于在仿真模式下记录领域的用例和指南。">在仿真模式下记录领域的用例和指南</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-01CECD47-345B-40DA-BBD1-FD04E85D1C9A" name="GUID-01CECD47-345B-40DA-BBD1-FD04E85D1C9A"></a><h4 id="DVADM-GUID-01CECD47-345B-40DA-BBD1-FD04E85D1C9A" class="sect4">使用案例：将授权用户添加到领域</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_MACADM.ADD_AUTH_TO_REALM</code>过程将授权用户添加到<code class="codeph">DBMS_MACADM.ADD_AUTH_TO_REALM</code> 。
                     </p>
                     <p>在这种情况下，您通过添加更多用户来放松安全控制。您不需要设置模拟模式;只需添加用户。如果您不知道要添加哪些授权用户并希望使用模拟模式来查找，则Oracle Database Vault允许所有用户访问这些对象。在这种情况下，您必须将原始域置于模拟模式。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-D60381F6-9D4F-40FC-A409-FB144FE490C6" title="Oracle提供了一组用于在仿真模式下记录领域的用例和指南。">在仿真模式下记录领域的用例和指南</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-152BA89E-73F2-4406-8C31-A1643EB5A652" name="GUID-152BA89E-73F2-4406-8C31-A1643EB5A652"></a><h4 id="DVADM-GUID-152BA89E-73F2-4406-8C31-A1643EB5A652" class="sect4">使用案例：从领域中删除授权用户</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_MACADM.DELETE_AUTH_FROM_REALM</code>过程从<code class="codeph">DBMS_MACADM.DELETE_AUTH_FROM_REALM</code>删除授权用户。
                     </p>
                     <p>在这种情况下，您可能已经或可能没有从领域授权列表中删除用户。但是，您希望查看已删除的用户是否仍可以访问授权活动的领域，如下所示：</p>
                     <ol id="GUID-152BA89E-73F2-4406-8C31-A1643EB5A652__OL_Y45_LMG_5FB">
                        <li>克隆领域。</li>
                        <li>在原始领域中，删除要删除的用户，然后将此用户添加到克隆领域。</li>
                        <li>在克隆的域上配置审核，以便在审核记录中显示要删除的用户。
                           <ul id="GUID-152BA89E-73F2-4406-8C31-A1643EB5A652__UL_PG2_WNG_5FB" style="list-style-type:disc">
                              <li>如果克隆的域是常规域，则使用<code class="codeph">DBMS_MACADM.UPDATE_REALM</code>过程将<code class="codeph">audit_options</code>参数设置为<code class="codeph">DBMS_MACUTL.G_REALM_AUDIT_SUCCESS</code> 。或者，创建统一的审核策略以捕获用户的成功活动。
                              </li>
                              <li>如果克隆领域是强制领域，则创建统一的审核策略以捕获用户的成功活动。</li>
                           </ul>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-D60381F6-9D4F-40FC-A409-FB144FE490C6" title="Oracle提供了一组用于在仿真模式下记录领域的用例和指南。">在仿真模式下记录领域的用例和指南</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-42CF4507-F6F0-439B-81D7-5BEEE395B116" name="GUID-42CF4507-F6F0-439B-81D7-5BEEE395B116"></a><h4 id="DVADM-GUID-42CF4507-F6F0-439B-81D7-5BEEE395B116" class="sect4">使用案例：测试领域中的新因素</h4>
                  <div>
                     <p>如果某个领域有新因素，您可以使用模拟模式来测试这些因素是否有变化。</p>
                     <p>在这种情况下，有两个用例：</p>
                     <ul id="GUID-42CF4507-F6F0-439B-81D7-5BEEE395B116__UL_KBK_YPG_5FB" style="list-style-type:disc">
                        <li><span class="bold">应用程序或基础架构发生了变化，这些变化将迫使这些因素发生变化。</span> 
                           <p>在此方案中，启用（常规）域，然后从授权用户中删除这些因子。然后在没有授权用户的模拟模式下为相同的受保护对象创建强制域。常规领域将保护对象免受未授权用户的攻击，而仿真模式下的强制领域将捕获所有访问权限以及有关因素的任何信息。您可以检查每个用户的模拟日志，以获得新的因子，然后可以在模拟模式下将其添加到强制领域。这将确保在将强制域迁移到原始常规域之前，它是干净的。</p>
                        </li>
                        <li><span class="bold">应用程序或基础架构没有任何变化，但是正在对这些因素进行更改，例如添加的新因素或删除的现有因素。</span><p>在这种情况下，关注的是如何配置新因子的添加。丢弃因素会降低安全性配置文件，因此您只需从规则集中删除因子即可。添加因子时，必须从原始域克隆域，然后将其配置为处于模拟模式。将新因子添加到此克隆领域。如果此克隆领域的模拟日志记录是干净的，那么您可以安全地将因子添加到原始领域。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-D60381F6-9D4F-40FC-A409-FB144FE490C6" title="Oracle提供了一组用于在仿真模式下记录领域的用例和指南。">在仿真模式下记录领域的用例和指南</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-924D0FAD-920E-4EF3-8618-5124DB9B1E79" name="GUID-924D0FAD-920E-4EF3-8618-5124DB9B1E79"></a><h4 id="DVADM-GUID-924D0FAD-920E-4EF3-8618-5124DB9B1E79" class="sect4">使用案例：在保持原始命令控制的同时测试对现有命令规则的更改</h4>
                  <div>
                     <p>您可以在保持启用原始命令控件的同时测试对现有命令规则的更改。</p>
                     <p>更新命令规则时，理想情况下应在启用更改和生产之前对其进行测试。对于新的命令规则，您只需将其置于模拟模式。但是，现有的命令规则已启用并提供保护。在这种情况下，Oracle建议您创建审核策略以捕获原始命令规则正在执行的操作并为其设置警报。审核策略不会阻止SQL发生，但至少您会收到警报。在您确信原始命令规则正常工作后，您可以将更新的命令规则置于模拟模式，然后进行测试。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-training-mode-to-log-realm-and-command-rule-activities.html#GUID-D60381F6-9D4F-40FC-A409-FB144FE490C6" title="Oracle提供了一组用于在仿真模式下记录领域的用例和指南。">在仿真模式下记录领域的用例和指南</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
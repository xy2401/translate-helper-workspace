<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="DBMS_STATS enables you to collect extended statistics, which are statistics that can improve cardinality estimates when multiple predicates exist on different columns of a table, or when predicates use expressions."></meta>
      <meta name="description" content="DBMS_STATS enables you to collect extended statistics, which are statistics that can improve cardinality estimates when multiple predicates exist on different columns of a table, or when predicates use expressions."></meta>
      <title>管理扩展统计</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Tuning Guide"></meta>
      <meta property="og:description" content="DBMS_STATS enables you to collect extended statistics, which are statistics that can improve cardinality estimates when multiple predicates exist on different columns of a table, or when predicates use expressions."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Tuning Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-tuning-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-31T14:57:08-08:00"></meta>
      <meta name="dcterms.title" content="SQL Tuning Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2013, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96095-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="gathering-optimizer-statistics.html" title="Previous" type="text/html"></link>
      <link rel="next" href="controlling-the-use-of-optimizer-statistics.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TGSQL"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="gathering-optimizer-statistics.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="controlling-the-use-of-optimizer-statistics.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL调优指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="optimizer-statistics.html" property="item" typeof="WebPage"><span property="name">优化器统计</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理扩展统计</li>
            </ol>
            <a id="GUID-BD0F0B71-DD8B-44A0-888E-495830FC09A4" name="GUID-BD0F0B71-DD8B-44A0-888E-495830FC09A4"></a>
            
            <h2 id="TGSQL-GUID-BD0F0B71-DD8B-44A0-888E-495830FC09A4" class="sect2"><span class="enumeration_chapter">14</span>管理扩展统计</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_STATS</code>使您可以收集<strong class="term">扩展统计信息</strong> ，这些统计信息可以在表的不同列上存在多个谓词时或在谓词使用表达式时提高基数估计值。
               </p>
               <p><strong class="term">扩展名</strong>是列组或表达式。当同一个表中的多个列在SQL语句中一起出现时，列组统计信息可以提高基数估计值。当谓词使用表达式（例如，内置函数或用户定义函数）时，表达式统计信息可以改进优化程序估计。
               </p>
               <div class="infoboxnote" id="GUID-BD0F0B71-DD8B-44A0-888E-495830FC09A4__GUID-14612EBF-A23B-4449-98C4-5C39511756BD">
                  <p class="notep1">注意：</p>
                  <p>您无法在虚拟列上创建扩展统计信息。</p>
               </div>
               <p>本章包含以下主题：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="managing-extended-statistics.html#GUID-CE34B506-94B6-4346-8AB6-6B17BC52B782">管理列组统计信息</a><br><strong class="term">列组</strong>是一组被视为一个单元的列。
                  </li>
                  <li class="ulchildlink"><a href="managing-extended-statistics.html#GUID-FC50E35E-AF6A-4ECD-919D-8E020011DAB6">管理表达式统计</a><br>当<code class="codeph">WHERE</code>子句具有使用表达式的谓词时，称为<strong class="term">表达式统计信息</strong>的扩展统计信息的类型可以改进优化程序估计值。
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-BD0F0B71-DD8B-44A0-888E-495830FC09A4__GUID-03123176-F6AC-4529-AF33-8E206EC1A4CF">
                  <p class="notep1">也可以看看：</p>
                  <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF54467" target="_blank"><span><cite>Oracle Database SQL语言参考</cite></span></a> ，了解虚拟列的限制列表</p>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="optimizer-statistics.html#GUID-0A2F3D52-A135-43E1-9CAB-55BFE068A297" title="执行计划的准确性取决于优化程序统计信息的质量。">优化程序统计信息</a></p>
                  </div>
               </div>
            </div>
            <a id="TGSQL462"></a><div class="props_rev_3"><a id="GUID-CE34B506-94B6-4346-8AB6-6B17BC52B782" name="GUID-CE34B506-94B6-4346-8AB6-6B17BC52B782"></a><h3 id="TGSQL-GUID-CE34B506-94B6-4346-8AB6-6B17BC52B782" class="sect3"><span class="enumeration_section">14.1</span>管理列组统计信息</h3>
               <div>
                  <p><strong class="term">列组</strong>是一组被视为一个单元的列。
                  </p>
                  <p>实质上，列组是虚拟列。通过收集列组的统计信息，优化程序可以在查询将这些列组合在一起时更准确地确定基数估计值。</p>
                  <p>以下部分提供了<a href="glossary.html#GUID-FB763B43-B5C7-47D0-8B0D-47CED4922501"><span class="xrefglossterm">列组统计信息</span></a>的概述，并说明了如何手动管理它们：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-extended-statistics.html#GUID-858E0BDA-06C6-471F-B9E8-888C3AD29673">关于列组的统计信息</a><br>单个列统计信息对于确定<code class="codeph">WHERE</code>子句中单个谓词的选择性非常有用。
                     </li>
                     <li class="ulchildlink"><a href="managing-extended-statistics.html#GUID-E1F39134-24F1-4EF7-B614-82F9428CA762">检测特定工作负载的有用列组</a><br>您可以使用<code class="codeph">DBMS_STATS.SEED_COL_USAGE</code>和<code class="codeph">REPORT_COL_USAGE</code>来确定基于指定工作负载的表所需的列组。
                     </li>
                     <li class="ulchildlink"><a href="managing-extended-statistics.html#GUID-783A8687-EDB3-437E-AE99-3F12369BA10A">在工作负载监视期间检测到创建的列组</a><br>您可以使用<code class="codeph">DBMS_STATS.CREATE_EXTENDED_STATS</code>函数创建先前通过执行<code class="codeph">DBMS_STATS.SEED_COL_USAGE</code>检测到的列组。</li>
                     <li class="ulchildlink"><a href="managing-extended-statistics.html#GUID-D070C3B3-C356-4630-8EB3-766A790866F3">手动创建和收集列组的统计信息</a><br>在某些情况下，您可能知道要创建的列组。
                     </li>
                     <li class="ulchildlink"><a href="managing-extended-statistics.html#GUID-532D06C9-C6A2-4018-B496-AD87003B682E">显示列组信息</a><br>要获取列组的名称，请使用<code class="codeph">DBMS_STATS.SHOW_EXTENDED_STATS_NAME</code>函数或数据库视图。
                     </li>
                     <li class="ulchildlink"><a href="managing-extended-statistics.html#GUID-DBBB6C91-4450-457D-A612-71E835D6159C">删除列组</a><br>使用<code class="codeph">DBMS_STATS.DROP_EXTENDED_STATS</code>函数从表中删除列组。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-CE34B506-94B6-4346-8AB6-6B17BC52B782__GUID-D18E04D2-1CD3-45AA-A480-13C2AEBE0DA0">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../arpls/DBMS_STATS.html#ARPLS059" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解<code class="codeph">DBMS_STATS</code>包</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-extended-statistics.html#GUID-BD0F0B71-DD8B-44A0-888E-495830FC09A4" title="DBMS_STATS使您可以收集扩展统计信息，这些统计信息可以在表的不同列上存在多个谓词时或在谓词使用表达式时提高基数估计值。">管理扩展统计信息</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL464"></a><a id="TGSQL463"></a><div class="props_rev_3"><a id="GUID-858E0BDA-06C6-471F-B9E8-888C3AD29673" name="GUID-858E0BDA-06C6-471F-B9E8-888C3AD29673"></a><h4 id="TGSQL-GUID-858E0BDA-06C6-471F-B9E8-888C3AD29673" class="sect4"><span class="enumeration_section">14.1.1</span>关于列组的统计信息</h4>
                  <div>
                     <p>单个列统计信息对于确定<code class="codeph">WHERE</code>子句中单个谓词的选择性非常有用。
                     </p>
                     <p>当<code class="codeph">WHERE</code>子句在同一个表的不同列上包含多个谓词时，单个列统计信息不会显示列之间的关系。这是列组解决的问题。
                     </p>
                     <p>优化器独立计算谓词的选择性，然后将它们组合在一起。但是，如果存在各列之间的相关性，则优化器在确定基数估计时不能将其考虑在内，它通过将每个表谓词的选择性乘以行数来创建。</p>
                     <p>下图对比了两种收集<code class="codeph">sh.customers</code>表的<code class="codeph">cust_state_province</code>和<code class="codeph">country_id</code>列的统计信息的方法。该图显示了<code class="codeph">DBMS_STATS</code>单独和在组上收集每列的统计信息。列组具有系统生成的名称。
                     </p>
                     <div class="figure" id="GUID-858E0BDA-06C6-471F-B9E8-888C3AD29673__CHDCHFGJ">
                        <p class="titleinfigure">图14-1列组统计信息</p><img src="img/tgsql_vm_016.png" alt="下面是图14-1的描述" title="下面是图14-1的描述" longdesc="img_text/tgsql_vm_016.html"><br><a href="img_text/tgsql_vm_016.html">“图14-1列组统计信息”的说明</a></div>
                     <!-- class="figure" -->
                     <div class="infoboxnote" id="GUID-858E0BDA-06C6-471F-B9E8-888C3AD29673__GUID-8EF05E98-5277-48C5-AE05-1B4A6706E01C">
                        <p class="notep1">注意：</p>
                        <p>优化程序将列组统计信息用于等式谓词，inlist谓词以及用于估计<code class="codeph">GROUP BY</code>基数。
                        </p>
                     </div>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-extended-statistics.html#GUID-F2E85913-120F-4F6A-99AD-D4B221344E7E">为什么需要列组统计信息：示例</a><br>此示例演示了列组统计信息如何使优化程序能够提供更准确的基数估计。
                        </li>
                        <li class="ulchildlink"><a href="managing-extended-statistics.html#GUID-676C7562-09BE-4760-9F62-BB6F18EDB036">自动和手动列组统计</a><br>Oracle数据库可以自动或手动创建列组统计信息。
                        </li>
                        <li class="ulchildlink"><a href="managing-extended-statistics.html#GUID-0A7D5A85-7813-4803-9BAC-3110B2CFB9E1">列组统计信息的用户界面</a><br>多个<code class="codeph">DBMS_STATS</code>程序单元具有与列组相关的首选项。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-extended-statistics.html#GUID-CE34B506-94B6-4346-8AB6-6B17BC52B782" title="列组是一组被视为一个单元的列。">管理列组统计信息</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL465"></a><div class="props_rev_3"><a id="GUID-F2E85913-120F-4F6A-99AD-D4B221344E7E" name="GUID-F2E85913-120F-4F6A-99AD-D4B221344E7E"></a><h5 id="TGSQL-GUID-F2E85913-120F-4F6A-99AD-D4B221344E7E" class="sect5"><span class="enumeration_section">14.1.1.1</span>为什么需要列组统计：示例</h5>
                     <div>
                        <p>此示例演示了列组统计信息如何使优化程序能够提供更准确的基数估计。</p>
                        <p><code class="codeph">DBA_TAB_COL_STATISTICS</code>表的以下查询显示有关从<code class="codeph">sh.customers</code>表中的<code class="codeph">cust_state_province</code>和<code class="codeph">country_id</code>列收集的统计信息的信息：</p><pre class="pre codeblock"><code>COL COLUMN_NAME FORMAT a20 COL NDV FORMAT 999 SELECT COLUMN_NAME，NUM_DISTINCT AS“NDV”，HISTOGRAM FROM DBA_TAB_COL_STATISTICS OWNER ='SH'和TABLE_NAME ='CUSTOMERS'和COLUMN_NAME IN（'CUST_STATE_PROVINCE'，'COUNTRY_ID'）;</code></pre><p>示例输出如下：</p><pre class="pre codeblock"><code>COLUMN_NAME NDV HISTOGRAM -------------------- ---------- --------------- CUST_STATE_PROVINCE 145频率COUNTRY_ID 19频率</code></pre><p>如以下查询所示，3341位客户居住在加利福尼亚州：</p><pre class="pre codeblock"><code>SELECT COUNT（*）FROM sh.customers WHERE cust_state_province ='CA'; COUNT（*）---------- 3341</code></pre><p>考虑一个解释计划，用于查询州<code class="codeph">CA</code>和ID为<code class="codeph">52790</code> （美国）的国家/地区的客户：</p><pre class="pre codeblock"><code>来自sh.customers的EXPLAIN PLAN * WHERE cust_state_province ='CA'和country_id = 52790;解释。sys @ PROD&gt; SELECT * FROM TABLE（DBMS_XPLAN.DISPLAY）; PLAN_TABLE_OUTPUT ------------------------------------------------- -------------------------------计划哈希值：1683234692 -------------- -------------------------------------------------- --------------- | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ----------------------------- | 0 |选择声明| | 128 | 24192 | 442（7）| 00:00:06 | | * 1 |表访问完全|客户| <span class="bold">128</span> | 24192 | 442（7）| 00:00:06 | -------------------------------------------------- -----------------------------谓词信息（由操作ID标识）：------------ --------------------------------------- PLAN_TABLE_OUTPUT ---------- -------------------------------------------------- -------------------- 1  -  filter（“CUST_STATE_PROVINCE”='CA'和“COUNTRY_ID”= 52790）选择了13行。
</code></pre><p>根据<code class="codeph">country_id</code>和<code class="codeph">cust_state_province</code>列的单列统计信息，优化程序估计美国加利福尼亚州客户的查询将返回128行。事实上，3341个客户居住在加利福尼亚州，但优化者并不知道加利福尼亚州位于美国的国家，因此假设两个谓词都减少了返回的行数，因此大大低估了基数。
                        </p>
                        <p>您可以通过收集列组统计信息使优化器了解<code class="codeph">country_id</code>和<code class="codeph">cust_state_province</code>值之间的真实世界关系。这些统计信息使优化器能够提供更准确的基数估计。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-F2E85913-120F-4F6A-99AD-D4B221344E7E__GUID-B098CCF2-C74B-4AD8-9BD3-CBE14C736748">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="managing-extended-statistics.html#GUID-E1F39134-24F1-4EF7-B614-82F9428CA762" title="您可以使用DBMS_STATS.SEED_COL_USAGE和REPORT_COL_USAGE来确定基于指定工作负载的表所需的列组。">检测特定工作负载的有用列组</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="managing-extended-statistics.html#GUID-783A8687-EDB3-437E-AE99-3F12369BA10A" title="您可以使用DBMS_STATS.CREATE_EXTENDED_STATS函数创建先前通过执行DBMS_STATS.SEED_COL_USAGE检测到的列组。">在工作负载监视期间检测到创建列组</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="managing-extended-statistics.html#GUID-D070C3B3-C356-4630-8EB3-766A790866F3" title="在某些情况下，您可能知道要创建的列组。">手动创建和收集列组的统计信息</a> ”</span></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-extended-statistics.html#GUID-858E0BDA-06C6-471F-B9E8-888C3AD29673" title="单个列统计信息对于确定WHERE子句中单个谓词的选择性非常有用。">关于列组的统计信息</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-676C7562-09BE-4760-9F62-BB6F18EDB036" name="GUID-676C7562-09BE-4760-9F62-BB6F18EDB036"></a><h5 id="TGSQL-GUID-676C7562-09BE-4760-9F62-BB6F18EDB036" class="sect5"><span class="enumeration_section">14.1.1.2</span>自动和手动列组统计</h5>
                     <div>
                        <p>Oracle数据库可以自动或手动创建列组统计信息。</p>
                        <p>优化程序可以使用SQL计划指令生成更优化的计划。如果<code class="codeph">DBMS_STATS</code>首选项<code class="codeph">AUTO_STAT_EXTENSIONS</code>设置为<code class="codeph">ON</code> （默认情况下为<code class="codeph">OFF</code> ），则<a href="glossary.html#GUID-7E4B447A-5109-43A9-B581-CF9A03504766"><span class="xrefglossterm">SQL计划指令</span></a>可以根据工作负载中谓词的使用情况自动触发列组统计信息的创建。您可以使用<code class="codeph">SET_TABLE_PREFS</code> ， <code class="codeph">SET_GLOBAL_PREFS</code>或<code class="codeph">SET_SCHEMA_PREFS</code>过程设置<code class="codeph">AUTO_STAT_EXTENSIONS</code> 。
                        </p>
                        <p>如果要手动管理列组统计信息，请按如下方式使用<code class="codeph">DBMS_STATS</code> ：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>检测列组</p>
                           </li>
                           <li>
                              <p>创建以前检测到的列组</p>
                           </li>
                           <li>
                              <p>手动创建列组并收集列组统计信息</p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-676C7562-09BE-4760-9F62-BB6F18EDB036__GUID-D18E04D2-1CD3-45AA-A480-13C2AEBE0DA0">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="managing-extended-statistics.html#GUID-E1F39134-24F1-4EF7-B614-82F9428CA762" title="您可以使用DBMS_STATS.SEED_COL_USAGE和REPORT_COL_USAGE来确定基于指定工作负载的表所需的列组。">检测特定工作负载的有用列组</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="managing-extended-statistics.html#GUID-783A8687-EDB3-437E-AE99-3F12369BA10A" title="您可以使用DBMS_STATS.CREATE_EXTENDED_STATS函数创建先前通过执行DBMS_STATS.SEED_COL_USAGE检测到的列组。">在工作负载监视期间检测到创建列组</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="managing-extended-statistics.html#GUID-D070C3B3-C356-4630-8EB3-766A790866F3" title="在某些情况下，您可能知道要创建的列组。">手动创建和收集列组的统计信息</a> ”</span></p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_STATS.html#ARPLS68491" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a> ，了解用于设置优化程序统计信息的<code class="codeph">DBMS_STATS</code>过程</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-extended-statistics.html#GUID-858E0BDA-06C6-471F-B9E8-888C3AD29673" title="单个列统计信息对于确定WHERE子句中单个谓词的选择性非常有用。">关于列组的统计信息</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL94635"></a><a id="TGSQL466"></a><div class="props_rev_3"><a id="GUID-0A7D5A85-7813-4803-9BAC-3110B2CFB9E1" name="GUID-0A7D5A85-7813-4803-9BAC-3110B2CFB9E1"></a><h5 id="TGSQL-GUID-0A7D5A85-7813-4803-9BAC-3110B2CFB9E1" class="sect5"><span class="enumeration_section">14.1.1.3</span>列组统计信息的用户界面</h5>
                     <div>
                        <p>多个<code class="codeph">DBMS_STATS</code>程序单元具有与列组相关的首选项。
                        </p>
                        <div class="tblformal" id="GUID-0A7D5A85-7813-4803-9BAC-3110B2CFB9E1__CHDFAJCH">
                           <p class="titleintable">表14-1与列组相关的DBMS_STATS API</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_STATS API与列组相关" width="100%" border="1" summary="This 2 column table lists DBMS_STATS Multicolumn Program Units. Column 1 lists the unit. Column 2 describes the unit. " frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="34%" id="d83685e1141">计划单位或偏好</th>
                                    <th align="left" valign="bottom" width="66%" id="d83685e1144">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d83685e1149" headers="d83685e1141 "><code class="codeph">SEED_COL_USAGE</code>程序</td>
                                    <td align="left" valign="top" width="66%" headers="d83685e1149 d83685e1144 ">
                                       <p>迭代指定工作负载中的SQL语句，编译它们，然后为这些语句中出现的列播种列使用信息。</p>
                                       <p>要确定适当的列组，数据库必须遵守代表性工作负载。在监视期间，您无需自行运行查询。相反，您可以为工作负载中的某些长时间运行的查询运行<code class="codeph">EXPLAIN PLAN</code> ，以确保数据库正在记录这些查询的列组信息。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d83685e1162" headers="d83685e1141 "><code class="codeph">REPORT_COL_USAGE</code>函数</td>
                                    <td align="left" valign="top" width="66%" headers="d83685e1162 d83685e1144 ">
                                       <p>生成一个报告，列出在工作负载中的过滤谓词，连接谓词和<code class="codeph">GROUP BY</code>子句中看到的列。
                                       </p>
                                       <p>您可以使用此功能查看为特定表记录的列使用信息。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d83685e1175" headers="d83685e1141 "><code class="codeph">CREATE_EXTENDED_STATS</code>函数</td>
                                    <td align="left" valign="top" width="66%" headers="d83685e1175 d83685e1144 ">
                                       <p>创建扩展，可以是列组或表达式。当用户生成或自动统计信息收集作业收集表的统计信息时，数据库将收集扩展的统计信息。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d83685e1183" headers="d83685e1141 "><code class="codeph">AUTO_STAT_EXTENSIONS</code>偏好</td>
                                    <td align="left" valign="top" width="66%" headers="d83685e1183 d83685e1144 ">收集优化程序统计信息时，控制自动创建扩展（包括列组）。使用<code class="codeph">SET_TABLE_PREFS</code> ， <code class="codeph">SET_SCHEMA_PREFS</code>或<code class="codeph">SET_GLOBAL_PREFS</code>设置此首选项。<p>当<code class="codeph">AUTO_STAT_EXTENSIONS</code>设置为<code class="codeph">OFF</code> （默认值）时，数据库不会自动创建列组统计信息。要创建扩展，必须执行<code class="codeph">CREATE_EXTENDED_STATS</code>函数或在<code class="codeph">DBMS_STATS</code> API的<code class="codeph">METHOD_OPT</code>参数中显式指定扩展统计信息。</p>
                                       <p>设置为<code class="codeph">ON</code> ，SQL计划指令可以根据工作负载中谓词中列的使用情况自动触发列组统计信息的创建。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-0A7D5A85-7813-4803-9BAC-3110B2CFB9E1__GUID-58DEC0BB-9DF1-4909-B08E-3E677077DD24">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="controlling-the-use-of-optimizer-statistics.html#GUID-D73DB2F4-46C1-4C5B-94DD-DE1F1DD5BBCC" title="本主题说明如何使用DBMS_STATS.SET_TABLE_STATS为表设置人工统计信息。 SET_INDEX_STATS和SET_SYSTEM_STATS的基本步骤相同。">为表设置人工优化器统计信息</a> ”</span></p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_STATS.html#ARPLS059" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考，</span></a>以了解<code class="codeph">DBMS_STATS</code>包</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-extended-statistics.html#GUID-858E0BDA-06C6-471F-B9E8-888C3AD29673" title="单个列统计信息对于确定WHERE子句中单个谓词的选择性非常有用。">关于列组的统计信息</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL470"></a><a id="TGSQL468"></a><div class="props_rev_3"><a id="GUID-E1F39134-24F1-4EF7-B614-82F9428CA762" name="GUID-E1F39134-24F1-4EF7-B614-82F9428CA762"></a><h4 id="TGSQL-GUID-E1F39134-24F1-4EF7-B614-82F9428CA762" class="sect4"><span class="enumeration_section">14.1.2</span>检测特定工作负载的有用列组</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_STATS.SEED_COL_USAGE</code>和<code class="codeph">REPORT_COL_USAGE</code>来确定基于指定工作负载的表所需的列组。
                     </p>
                     <div class="section">
                        <p>当您不知道要创建哪些扩展统计信息时，此方法很有用。此技术不适用于表达式统计信息。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E1F39134-24F1-4EF7-B614-82F9428CA762__GUID-A13746FC-5BC8-47DC-981C-CE8391A06F60">假设</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>本教程假设以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对于使用引用列<code class="codeph">country_id</code>和<code class="codeph">cust_state_province</code>谓词的<code class="codeph">sh.customers_test</code>表（从<code class="codeph">customers</code>表创建）的查询，基数估计不正确。
                              </p>
                           </li>
                           <li>
                              <p>您希望数据库监视您的工作负载5分钟（300秒）。</p>
                           </li>
                           <li>
                              <p>您希望数据库自动确定需要哪些列组。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E1F39134-24F1-4EF7-B614-82F9428CA762__GUID-445DEB78-E578-4B19-88BD-10A5AA31A8B0">要检测列组：</p>
                        <ol>
                           <li>
                              <p>启动SQL * Plus或SQL Developer，并以用户<code class="codeph">sh</code>身份登录数据库。
                              </p>
                           </li>
                           <li>
                              <p>创建<code class="codeph">customers_test</code>表并为其收集统计信息：</p><pre class="pre codeblock"><code>DROP TABLE customers_test; CREATE TABLE customers_test AS SELECT * FROM customer; EXEC DBMS_STATS.GATHER_TABLE_STATS（user，'customers_test'）;</code></pre></li>
                           <li>
                              <p>启用工作负载监控</p>
                              <p>在另一个SQL * Plus会话中，以<code class="codeph">SYS</code>身份连接并运行以下PL / SQL程序以启用监视300秒：</p><pre class="pre codeblock"><code>BEGIN DBMS_STATS.SEED_COL_USAGE（null，null，300）;结束; /</code></pre></li>
                           <li>
                              <p>作为用户<code class="codeph">sh</code> ，在工作负载中运行两个查询的解释计划。
                              </p>
                              <p>以下示例显示了<code class="codeph">customers_test</code>表上两个查询的说明计划：</p><pre class="pre codeblock"><code>用于SELECT * FROM customers_test的EXPLAIN PLAN WHERE cust_city ='洛杉矶'和cust_state_province ='CA'和country_id = 52790;从TABLE中选择PLAN_TABLE_OUTPUT（DBMS_XPLAN.DISPLAY（'plan_table'，null，'basic rows'））; EXPLAIN PLAN FOR SELECT country_id，cust_state_province，count（cust_city）FROM customers_test GROUP BY country_id，cust_state_province;从TABLE中选择PLAN_TABLE_OUTPUT（DBMS_XPLAN.DISPLAY（'plan_table'，null，'basic rows'））;</code></pre><p>示例输出显示如下：</p><pre class="pre codeblock"><code>PLAN_TABLE_OUTPUT ------------------------------------------------- --------------------------计划哈希值：4115398853 ------------------- --------------------------------- | Id |操作|名称|行| -------------------------------------------------- -  | 0 |选择声明| | 1 | | 1 |表访问完全| CUSTOMERS_TEST | <span class="bold">1</span> | -------------------------------------------------- - 选择了8行。PLAN_TABLE_OUTPUT ------------------------------------------------- --------------------------计划哈希值：3050654408 ------------------- ---------------------------------- | Id |操作|名称|行| -------------------------------------------------- --- | 0 |选择声明| | 1949年| | 1 | HASH GROUP BY | | <span class="bold">1949年</span> | | 2 |表访问完全| CUSTOMERS_TEST | 55500 | -------------------------------------------------- ---选择了9行。
</code></pre><p>第一个计划显示返回932行的查询的基数为1行。第二个计划显示1949行的基数，用于返回145行的查询。</p>
                           </li>
                           <li>
                              <p>（可选）查看为表记录的列使用信息。</p>
                              <p>调用<code class="codeph">DBMS_STATS.REPORT_COL_USAGE</code>函数以生成报告：</p><pre class="pre codeblock"><code>SET LONG 100000 SET LINES 120 SET PAGES 0 SELECT DBMS_STATS.REPORT_COL_USAGE（user，'customers_test'）FROM DUAL;</code></pre><p>报告如下：</p><pre class="pre codeblock"><code>传说：.......EQ：用于单表EQuality谓词RANGE：用于单表RANGE谓词LIKE：用于单表LIKE谓词NULL：用于单表是（非）NULL谓词EQ_JOIN：用于EQuality JOIN谓词NONEQ_JOIN：用于非EQuality JOIN谓词FILTER：用于单表FILTER谓词JOIN：用于JOIN谓词GROUP_BY：用于GROUP BY表达式............................ ...............................................################################################## #########################用于SH.CUSTOMERS_TEST的栏目使用报告.................. .......................1。COUNTRY_ID： <span class="bold">EQ</span> 2。CUST_CITY： <span class="bold">EQ</span> 3。CUST_STATE_PROVINCE： <span class="bold">EQ</span> 4。（CUST_CITY，CUST_STATE_PROVINCE，COUNTRY_ID）： <span class="bold">过滤器</span> 5。（CUST_STATE_PROVINCE，COUNTRY_ID）： <span class="bold">GROUP_BY</span> ########################################### ################################</code></pre><p>在前面的报告中，前三个列在第一个受监视查询中的等式谓词中使用：</p><pre class="pre codeblock"><code>...WHERE cust_city ='洛杉矶'和cust_state_province ='CA'和country_id = 52790;</code></pre><p>所有三列都出现在同一个<code class="codeph">WHERE</code>子句中，因此报告将它们显示为组过滤器。在第二个查询中， <code class="codeph">GROUP BY</code>子句中出现了两列，因此报告将它们标记为<code class="codeph">GROUP_BY</code> 。 <code class="codeph">FILTER</code>和<code class="codeph">GROUP_BY</code>报告中的列集是列组的候选列。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-E1F39134-24F1-4EF7-B614-82F9428CA762__GUID-708EFEB2-5A8A-4378-89AC-3794CF44E8C8">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="managing-sql-tuning-sets.html#GUID-91D1B886-A6D7-40B8-93D5-112B8C6E6AFE" title="您可以使用SQL调优集将语句和相关元数据分组到单个对象中，您可以将其用作SQL调优工具的输入。">管理SQL调优集</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_STATS.html#ARPLS059" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解<code class="codeph">DBMS_STATS</code>包</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-extended-statistics.html#GUID-CE34B506-94B6-4346-8AB6-6B17BC52B782" title="列组是一组被视为一个单元的列。">管理列组统计信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94637"></a><a id="TGSQL94636"></a><div class="props_rev_3"><a id="GUID-783A8687-EDB3-437E-AE99-3F12369BA10A" name="GUID-783A8687-EDB3-437E-AE99-3F12369BA10A"></a><h4 id="TGSQL-GUID-783A8687-EDB3-437E-AE99-3F12369BA10A" class="sect4"><span class="enumeration_section">14.1.3</span>在工作负载监视期间检测到创建的列组</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_STATS.CREATE_EXTENDED_STATS</code>函数创建先前通过执行<code class="codeph">DBMS_STATS.SEED_COL_USAGE</code>检测到的列组。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-783A8687-EDB3-437E-AE99-3F12369BA10A__GUID-8F0EBD76-1BC9-4019-B705-C1AA55BADA76">假设</p>
                        <p>本教程假定您已执行<span class="q">“ <a href="managing-extended-statistics.html#GUID-E1F39134-24F1-4EF7-B614-82F9428CA762" title="您可以使用DBMS_STATS.SEED_COL_USAGE和REPORT_COL_USAGE来确定基于指定工作负载的表所需的列组。">检测特定工作负载的有用列组</a> ”中</span>的步骤。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-783A8687-EDB3-437E-AE99-3F12369BA10A__GUID-31204D5C-98E7-4590-9A33-C69B32A3B4D7">要创建列组：</p>
                        <ol>
                           <li>
                              <p>根据监视窗口中捕获的使用情况信息，为<code class="codeph">customers_test</code>表创建列组。
                              </p>
                              <p>例如，运行以下查询：</p><pre class="pre codeblock"><code>SELECT DBMS_STATS.CREATE_EXTENDED_STATS（user，'customers_test'）FROM DUAL;</code></pre><p>示例输出显示如下：</p><pre class="pre codeblock"><code>################################################## ######################### SH.CUSTOMERS_TEST EXTENSIONS .................... ............1。（CUST_CITY，CUST_STATE_PROVINCE，COUNTRY_ID）：SYS_STUMZ $ C3AIHLPBROI＃SKA58H_N已<span class="bold">创建</span> 2。（CUST_STATE_PROVINCE，COUNTRY_ID）：SYS_STU＃S＃WF25Z＃QAHIHE＃MOFFMM_ <span class="bold">created</span> ################################## #########################################</code></pre><p>数据库为<code class="codeph">customers_test</code>创建了两个列组：一个用于过滤谓词的列组和一个用于<code class="codeph">GROUP BY</code>操作的<code class="codeph">GROUP BY</code> 。
                              </p>
                           </li>
                           <li>
                              <p>重新收集表统计信息。</p>
                              <p>运行<code class="codeph">GATHER_TABLE_STATS</code>以重新收集<code class="codeph">customers_test</code>的统计信息：</p><pre class="pre codeblock"><code>EXEC DBMS_STATS.GATHER_TABLE_STATS（user，'customers_test'）;</code></pre></li>
                           <li>
                              <p>作为用户<code class="codeph">sh</code> ，在工作负载中运行两个查询的解释计划。
                              </p>
                              <p>检查<code class="codeph">USER_TAB_COL_STATISTICS</code>视图以确定数据库创建了哪些其他统计信息：</p><pre class="pre codeblock"><code>SELECT COLUMN_NAME，NUM_DISTINCT，HISTOGRAM FROM USER_TAB_COL_STATISTICS TABLE_NAME ='CUSTOMERS_TEST'ORDER BY 1;</code></pre><p>部分样本输出如下所示：</p><pre class="pre codeblock"><code>CUST_CITY 620高度平衡......SYS_STU＃S＃WF25Z＃QAHIHE＃MOFFMM_ 145无SYS_STUMZ $ C3AIHLPBROI＃SKA58H_N 620高度平衡</code></pre><p>此示例显示从<code class="codeph">DBMS_STATS.CREATE_EXTENDED_STATS</code>函数返回的两个列组名称。在<code class="codeph">CUST_CITY</code> ， <code class="codeph">CUST_STATE_PROVINCE</code>和<code class="codeph">COUNTRY_ID</code>上创建的列组具有高度平衡的直方图。
                              </p>
                           </li>
                           <li>
                              <p>再次解释计划。</p>
                              <p>以下示例显示了<code class="codeph">customers_test</code>表上两个查询的说明计划：</p><pre class="pre codeblock"><code>用于SELECT * FROM customers_test的EXPLAIN PLAN WHERE cust_city ='洛杉矶'和cust_state_province ='CA'和country_id = 52790;从TABLE中选择PLAN_TABLE_OUTPUT（DBMS_XPLAN.DISPLAY（'plan_table'，null，'basic rows'））; EXPLAIN PLAN FOR SELECT country_id，cust_state_province，count（cust_city）FROM customers_test GROUP BY country_id，cust_state_province;从TABLE中选择PLAN_TABLE_OUTPUT（DBMS_XPLAN.DISPLAY（'plan_table'，null，'basic rows'））;</code></pre><p>新计划显示更准确的基数估计：</p><pre class="pre codeblock"><code>-------------------------------------------------- -  | Id |操作|名称|行| -------------------------------------------------- -  | 0 |选择声明| | 1093 | | 1 |表访问完全| CUSTOMERS_TEST | <span class="bold">1093</span> | -------------------------------------------------- - 选择了8行。计划哈希值：3050654408 --------------------------------------------- -------- | Id |操作|名称|行| -------------------------------------------------- --- | 0 |选择声明| | 145 | | 1 | HASH GROUP BY | | <span class="bold">145</span> | | 2 |表访问完全| CUSTOMERS_TEST | 55500 | -------------------------------------------------- ---选择了9行。</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-783A8687-EDB3-437E-AE99-3F12369BA10A__GUID-D04A8D31-BDF4-4D9F-93AF-42230ABF8F11">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_STATS.html#ARPLS059" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解<code class="codeph">DBMS_STATS</code>包</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-extended-statistics.html#GUID-CE34B506-94B6-4346-8AB6-6B17BC52B782" title="列组是一组被视为一个单元的列。">管理列组统计信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL472"></a><a id="TGSQL471"></a><div class="props_rev_3"><a id="GUID-D070C3B3-C356-4630-8EB3-766A790866F3" name="GUID-D070C3B3-C356-4630-8EB3-766A790866F3"></a><h4 id="TGSQL-GUID-D070C3B3-C356-4630-8EB3-766A790866F3" class="sect4"><span class="enumeration_section">14.1.4</span>手动创建和收集列组的统计信息</h4>
                  <div>
                     <p>在某些情况下，您可能知道要创建的列组。</p>
                     <div class="section">
                        <p><code class="codeph">DBMS_STATS.GATHER_TABLE_STATS</code>函数的<code class="codeph">METHOD_OPT</code>参数可以自动创建和收集列组的统计信息。您可以通过使用<code class="codeph">FOR COLUMNS</code>指定列组来创建新列组。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D070C3B3-C356-4630-8EB3-766A790866F3__GUID-7B8E6BC9-5689-4A3A-982E-2FBD15441200">假设</p>
                        <p>本教程假设以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您希望为<code class="codeph">sh</code>模式中的<code class="codeph">customers</code>表中的<code class="codeph">cust_state_province</code>和<code class="codeph">country_id</code>列创建列组。
                              </p>
                           </li>
                           <li>
                              <p>您希望在整个表和新列组上收集统计信息（包括直方图）。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D070C3B3-C356-4630-8EB3-766A790866F3__GUID-803FB40E-E8E1-4963-9009-AD1C01ED196C">要创建列组并收集该组的统计信息，请执行以下操作：</p>
                        <ol>
                           <li>
                              <p>在SQL * Plus中，以<code class="codeph">sh</code>用户身份登录数据库。
                              </p>
                           </li>
                           <li>
                              <p>创建列组并收集统计信息。</p>
                              <p>例如，执行以下PL / SQL程序：</p><pre class="pre codeblock"><code>BEGIN DBMS_STATS.GATHER_TABLE_STATS（'sh'，'customers'，METHOD_OPT =&gt;'FOR ALL COLUMNS SQE SKEWONLY'||'for COLUMNS SQE SKEWONLY（cust_state_province，country_id）'）;结束; /</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-D070C3B3-C356-4630-8EB3-766A790866F3__GUID-F8294B58-5F0B-4A25-897B-548FA3AA2D4B">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_STATS.html#ARPLS-GUID-CA6A56B9-0540-45E9-B1D7-D78769B7714C" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解<code class="codeph">DBMS_STATS.GATHER_TABLE_STATS</code>过程</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-extended-statistics.html#GUID-CE34B506-94B6-4346-8AB6-6B17BC52B782" title="列组是一组被视为一个单元的列。">管理列组统计信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL475"></a><a id="TGSQL474"></a><div class="props_rev_3"><a id="GUID-532D06C9-C6A2-4018-B496-AD87003B682E" name="GUID-532D06C9-C6A2-4018-B496-AD87003B682E"></a><h4 id="TGSQL-GUID-532D06C9-C6A2-4018-B496-AD87003B682E" class="sect4"><span class="enumeration_section">14.1.5</span>显示列组信息</h4>
                  <div>
                     <p>要获取列组的名称，请使用<code class="codeph">DBMS_STATS.SHOW_EXTENDED_STATS_NAME</code>函数或数据库视图。
                     </p>
                     <div class="section">
                        <p>您还可以使用视图来获取诸如不同值的数量以及列组是否具有直方图之类的信息。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-532D06C9-C6A2-4018-B496-AD87003B682E__GUID-BE857DE7-02A3-4CE4-8AC0-64CFE687498C">假设</p>
                        <p>本教程假设以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您在<code class="codeph">sh</code> schema中的<code class="codeph">customers</code>表中为<code class="codeph">cust_state_province</code>和<code class="codeph">country_id</code>列创建了一个列组。
                              </p>
                           </li>
                           <li>
                              <p>您希望确定列组名称，不同值的数量以及是否已为列组创建直方图。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-532D06C9-C6A2-4018-B496-AD87003B682E__GUID-C4572426-CF48-4D32-9FCC-0B5116765301">要监视列组：</p>
                        <ol>
                           <li>
                              <p>启动SQL * Plus并以<code class="codeph">sh</code>用户身份连接到数据库。
                              </p>
                           </li>
                           <li>
                              <p>要确定列组名称，请执行以下操作之一。</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>执行<code class="codeph">SHOW_EXTENDED_STATS_NAME</code>功能。
                                    </p>
                                    <p>例如，运行以下PL / SQL程序：</p><pre class="pre codeblock"><code>SELECT SYS.DBMS_STATS.SHOW_EXTENDED_STATS_NAME（'sh'，'customers'，'（cust_state_province，country_id）'）col_group_name FROM DUAL;</code></pre><p>输出类似于以下内容：</p><pre class="pre codeblock"><code>COL_GROUP_NAME ---------------- SYS_STU＃S＃WF25Z＃QAHIHE＃MOFFMM_</code></pre></li>
                                 <li>
                                    <p>查询<code class="codeph">USER_STAT_EXTENSIONS</code>视图。
                                    </p>
                                    <p>例如，运行以下查询：</p><pre class="pre codeblock"><code>SELECT EXTENSION_NAME，来自USER_STAT_EXTENSIONS的扩展，其中TABLE_NAME ='CUSTOMERS'; EXTENSION_NAME EXTENSION ------------------------------------------------ ----------------------- SYS_STU＃S＃WF25Z＃QAHIHE＃MOFFMM_（“CUST_STATE_PROVINCE”，“COUNTRY_ID”）</code></pre></li>
                              </ul>
                           </li>
                           <li>
                              <p>查询不同值的数量，并查找是否已为列组创建直方图。</p>
                              <p>例如，运行以下查询：</p><pre class="pre codeblock"><code>选择e。EXTENSION col_group，t。NUM_DISTINCT，t。来自USER_STAT_EXTENSIONS的直方图e，USER_TAB_COL_STATISTICS t其中e。EXTENSION_NAME =吨。COLUMN_NAME和e。TABLE_NAME =吨。TABLE_NAME和t。TABLE_NAME = '客户'; COL_GROUP NUM_DISTINCT HISTOGRAM ----------------------------------------------- --------------------（“COUNTRY_ID”，“CUST_STATE_PROVINCE”）145 FREQUENCY</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-532D06C9-C6A2-4018-B496-AD87003B682E__GUID-6EE3159D-9BF9-4E3C-A52B-F740D19883B2">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_STATS.html#ARPLS059" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解<code class="codeph">DBMS_STATS.SHOW_EXTENDED_STATS_NAME</code>函数</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-extended-statistics.html#GUID-CE34B506-94B6-4346-8AB6-6B17BC52B782" title="列组是一组被视为一个单元的列。">管理列组统计信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL477"></a><a id="TGSQL476"></a><div class="props_rev_3"><a id="GUID-DBBB6C91-4450-457D-A612-71E835D6159C" name="GUID-DBBB6C91-4450-457D-A612-71E835D6159C"></a><h4 id="TGSQL-GUID-DBBB6C91-4450-457D-A612-71E835D6159C" class="sect4"><span class="enumeration_section">14.1.6</span>删除列组</h4>
                  <div>
                     <p>使用<code class="codeph">DBMS_STATS.DROP_EXTENDED_STATS</code>函数从表中删除列组。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-DBBB6C91-4450-457D-A612-71E835D6159C__GUID-4D2C2D47-494A-4066-A09F-606973527801">假设</p>
                        <p>本教程假设以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您在<code class="codeph">sh</code> schema中的<code class="codeph">customers</code>表中为<code class="codeph">cust_state_province</code>和<code class="codeph">country_id</code>列创建了一个列组。
                              </p>
                           </li>
                           <li>
                              <p>您想要删除列组。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-DBBB6C91-4450-457D-A612-71E835D6159C__GUID-1F2D03E6-2F9C-4323-B889-63F10E8CCB05">要删除列组：</p>
                        <ol>
                           <li>
                              <p>启动SQL * Plus并以<code class="codeph">sh</code>用户身份连接到数据库。
                              </p>
                           </li>
                           <li>
                              <p>删除列组。</p>
                              <p>例如，以下PL / SQL程序从<code class="codeph">customers</code>表中删除列组：</p><pre class="pre codeblock"><code>BEGIN DBMS_STATS.DROP_EXTENDED_STATS（'sh'，'customers'，'（cust_state_province，country_id）'）;结束; /</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-DBBB6C91-4450-457D-A612-71E835D6159C__GUID-BA03AA34-31A9-4AA5-8422-22F8DB596127">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_STATS.html#ARPLS059" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考，</span></a>以了解<code class="codeph">DBMS_STATS.DROP_EXTENDED_STATS</code>函数</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-extended-statistics.html#GUID-CE34B506-94B6-4346-8AB6-6B17BC52B782" title="列组是一组被视为一个单元的列。">管理列组统计信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-FC50E35E-AF6A-4ECD-919D-8E020011DAB6" name="GUID-FC50E35E-AF6A-4ECD-919D-8E020011DAB6"></a><h3 id="TGSQL-GUID-FC50E35E-AF6A-4ECD-919D-8E020011DAB6" class="sect3"><span class="enumeration_section">14.2</span>管理表达式统计</h3>
               <div>
                  <p>当<code class="codeph">WHERE</code>子句具有使用表达式的谓词时，称为<strong class="term">表达式统计信息</strong>的扩展统计信息的类型可以改进优化程序估计值。
                  </p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-extended-statistics.html#GUID-A3B906A6-BB2B-400D-96F0-73E970758096">关于Expression Statistics</a><br>对于应用于<code class="codeph">WHERE</code>子句列的表单<code class="codeph">( <span class="codeinlineitalic">function</span> ( <span class="codeinlineitalic">col</span> )= <span class="codeinlineitalic">constant</span> )</code>的<strong class="term">表达式</strong> ，优化程序不知道此函数如何影响谓词基数，除非存在基于函数的索引。但是，您可以收集表达式的表达式统计信息<code class="codeph">( <span class="codeinlineitalic">function</span> ( <span class="codeinlineitalic">col</span> )</code>本身。
                     </li>
                     <li class="ulchildlink"><a href="managing-extended-statistics.html#GUID-69CE9581-1865-4E08-A471-910148B96458">创建表达统计</a><br>您可以使用<code class="codeph">DBMS_STATS</code>为用户指定的表达式创建统计信息。
                     </li>
                     <li class="ulchildlink"><a href="managing-extended-statistics.html#GUID-D016F91D-39A5-4290-AFB6-7271B4D31621">显示表达统计</a><br>要获取有关表达式统计信息的信息，请使用数据库视图<code class="codeph">DBA_STAT_EXTENSIONS</code>和<code class="codeph">DBMS_STATS.SHOW_EXTENDED_STATS_NAME</code>函数。
                     </li>
                     <li class="ulchildlink"><a href="managing-extended-statistics.html#GUID-C23883A8-DA95-482E-9954-EF4B5EBCA7B7">删除表达式统计信息</a><br>要从表中删除列组，请使用<code class="codeph">DBMS_STATS.DROP_EXTENDED_STATS</code>函数。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-extended-statistics.html#GUID-BD0F0B71-DD8B-44A0-888E-495830FC09A4" title="DBMS_STATS使您可以收集扩展统计信息，这些统计信息可以在表的不同列上存在多个谓词时或在谓词使用表达式时提高基数估计值。">管理扩展统计信息</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL480"></a><a id="TGSQL479"></a><div class="props_rev_3"><a id="GUID-A3B906A6-BB2B-400D-96F0-73E970758096" name="GUID-A3B906A6-BB2B-400D-96F0-73E970758096"></a><h4 id="TGSQL-GUID-A3B906A6-BB2B-400D-96F0-73E970758096" class="sect4"><span class="enumeration_section">14.2.1</span>关于表达式统计</h4>
                  <div>
                     <p>对于应用于<code class="codeph">WHERE</code>子句列的表单<code class="codeph">( <span class="codeinlineitalic">function</span> ( <span class="codeinlineitalic">col</span> )= <span class="codeinlineitalic">constant</span> )</code>的<strong class="term">表达式</strong> ，优化程序不知道此函数如何影响谓词基数，除非存在基于函数的索引。但是，您可以收集表达式的表达式统计信息<code class="codeph">( <span class="codeinlineitalic">function</span> ( <span class="codeinlineitalic">col</span> )</code>本身。
                     </p>
                     <p>下图显示了优化程序使用统计信息为使用函数的查询生成计划。顶部显示优化程序检查列的统计信息。底部显示优化程序检查与查询中使用的表达式相对应的统计信息。表达式统计可以产生更准确的估计值</p>
                     <div class="figure" id="GUID-A3B906A6-BB2B-400D-96F0-73E970758096__CHDBFFCH">
                        <p class="titleinfigure">图14-2表达式统计</p><img src="img/tgsql_vm_068.png" alt="下面是图14-2的描述" title="下面是图14-2的描述" longdesc="img_text/tgsql_vm_068.html"><br><a href="img_text/tgsql_vm_068.html">“图14-2表达式统计”的描述</a></div>
                     <!-- class="figure" -->
                     <p><a href="managing-extended-statistics.html#GUID-A3B906A6-BB2B-400D-96F0-73E970758096__CHDBFFCH">如图14-2</a>所示，当表达式统计信息不可用时，优化程序可以生成次优计划。
                     </p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-extended-statistics.html#GUID-E2105B53-38E4-452C-A9D0-B3D44CCBFBE9">表达式统计有用时：示例</a><br></li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-A3B906A6-BB2B-400D-96F0-73E970758096__GUID-491A27ED-7127-455D-AE9F-C23A35470B7D">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../sqlrf/About-SQL-Functions.html#SQLRF51173" target="_blank"><span><cite>Oracle Database SQL语言参考</cite></span></a> ，了解SQL函数</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-extended-statistics.html#GUID-FC50E35E-AF6A-4ECD-919D-8E020011DAB6" title="当WHERE子句具有使用表达式的谓词时，称为表达式统计信息的扩展统计信息的类型可以改进优化程序估计值。">管理表达式统计信息</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL481"></a><div class="props_rev_3"><a id="GUID-E2105B53-38E4-452C-A9D0-B3D44CCBFBE9" name="GUID-E2105B53-38E4-452C-A9D0-B3D44CCBFBE9"></a><h5 id="TGSQL-GUID-E2105B53-38E4-452C-A9D0-B3D44CCBFBE9" class="sect5"><span class="enumeration_section">14.2.1.1</span>表达式统计有用时：示例</h5>
                     <div>
                        <p>以下对<code class="codeph">sh.customers</code>表的查询显示，3341位客户位于加利福尼亚州：</p><pre class="pre codeblock"><code>sys @ PROD&gt; SELECT COUNT（*）FROM sh.customers WHERE cust_state_province ='CA'; COUNT（*）---------- 3341</code></pre><p>考虑应用<code class="codeph">LOWER()</code>函数的同一查询的计划：</p><pre class="pre codeblock"><code>sys @ PROD&gt; EXPLAIN PLAN FOR 2 SELECT * FROM sh.customers WHERE LOWER（cust_state_province）='ca';解释。sys @ PROD&gt; select * from table（dbms_xplan.display）; PLAN_TABLE_OUTPUT ------------------------------------------------- ------------------------------计划哈希值：2008213504 --------------- -------------------------------------------------- -------------- | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ----------------------------- | 0 |选择声明| | 555 | 108K | 406（1）| 00:00:05 | | * 1 |表访问完全|客户| 555 | 108K | 406（1）| 00:00:05 | -------------------------------------------------- -----------------------------谓词信息（由操作ID标识）：------------ --------------------------------------- 1  -  filter（LOWER（“CUST_STATE_PROVINCE”）= 'CA'）</code></pre><p>由于<code class="codeph">LOWER(cust_state_province)='ca'</code>不存在表达式统计信息，因此优化程序估计值明显偏离。您可以使用<code class="codeph">DBMS_STATS</code>过程来更正这些估计值。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-extended-statistics.html#GUID-A3B906A6-BB2B-400D-96F0-73E970758096" title="对于应用于WHERE子句列的表单（function（col）= constant）中的表达式，优化程序不知道此函数如何影响谓词基数，除非存在基于函数的索引。但是，您可以收集表达式的表达式统计信息（函数（col）本身。">关于表达式统计信息</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL484"></a><a id="TGSQL483"></a><div class="props_rev_3"><a id="GUID-69CE9581-1865-4E08-A471-910148B96458" name="GUID-69CE9581-1865-4E08-A471-910148B96458"></a><h4 id="TGSQL-GUID-69CE9581-1865-4E08-A471-910148B96458" class="sect4"><span class="enumeration_section">14.2.2</span>创建表达式统计信息</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_STATS</code>为用户指定的表达式创建统计信息。
                     </p>
                     <div class="section">
                        <p>您可以使用以下任一程序单元：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">GATHER_TABLE_STATS</code>程序</p>
                           </li>
                           <li>
                              <p><code class="codeph">CREATE_EXTENDED_STATISTICS</code>函数后跟<code class="codeph">GATHER_TABLE_STATS</code>过程</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-69CE9581-1865-4E08-A471-910148B96458__GUID-FA035832-CD12-4753-A15A-7CCF6F85CD2D">假设</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>本教程假设以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对于使用<code class="codeph">UPPER(cust_state_province)</code>函数的<code class="codeph">sh.customers</code>查询，选择性估计是不准确的。
                              </p>
                           </li>
                           <li>
                              <p>您想收集有关<code class="codeph">UPPER(cust_state_province)</code>表达式的统计信息。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-69CE9581-1865-4E08-A471-910148B96458__GUID-C5D51972-CD9B-4FFD-AA97-AC0D6A3843B2">要创建表达式统计信息</p>
                        <ol>
                           <li>
                              <p>启动SQL * Plus并以<code class="codeph">sh</code>用户身份连接到数据库。
                              </p>
                           </li>
                           <li>
                              <p>收集表统计信息。</p>
                              <p>例如，运行以下命令，在<code class="codeph">method_opt</code>参数中指定函数：</p><pre class="pre codeblock"><code>BEGIN DBMS_STATS.GATHER_TABLE_STATS（'sh'，'customers'，method_opt =&gt;'FOR ALL COLUMNS SIZE SKEWONLY'||'FOR COLUMNS（LOWER（cust_state_province））SIZE SKEWONLY'）;结束;</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-69CE9581-1865-4E08-A471-910148B96458__GUID-673611C4-D07D-4627-AEC2-97273A4BC46E">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_STATS.html#ARPLS-GUID-CA6A56B9-0540-45E9-B1D7-D78769B7714C" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解<code class="codeph">DBMS_STATS.GATHER_TABLE_STATS</code>过程</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-extended-statistics.html#GUID-FC50E35E-AF6A-4ECD-919D-8E020011DAB6" title="当WHERE子句具有使用表达式的谓词时，称为表达式统计信息的扩展统计信息的类型可以改进优化程序估计值。">管理表达式统计信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL486"></a><a id="TGSQL485"></a><div class="props_rev_3"><a id="GUID-D016F91D-39A5-4290-AFB6-7271B4D31621" name="GUID-D016F91D-39A5-4290-AFB6-7271B4D31621"></a><h4 id="TGSQL-GUID-D016F91D-39A5-4290-AFB6-7271B4D31621" class="sect4"><span class="enumeration_section">14.2.3</span>显示表达式统计信息</h4>
                  <div>
                     <p>要获取有关表达式统计信息的信息，请使用数据库视图<code class="codeph">DBA_STAT_EXTENSIONS</code>和<code class="codeph">DBMS_STATS.SHOW_EXTENDED_STATS_NAME</code>函数。
                     </p>
                     <div class="section">
                        <p>您还可以使用视图来获取诸如不同值的数量以及列组是否具有直方图之类的信息。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D016F91D-39A5-4290-AFB6-7271B4D31621__GUID-8551EE0E-BD3F-4665-8537-5D8F2FDFE774">假设</p>
                        <p>本教程假设以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您为<code class="codeph">LOWER(cust_state_province)</code>表达式创建了扩展统计信息。
                              </p>
                           </li>
                           <li>
                              <p>您希望确定列组名称，不同值的数量以及是否已为列组创建直方图。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D016F91D-39A5-4290-AFB6-7271B4D31621__GUID-A266AD52-AF26-4909-9A18-E9BAF75D391E">监控表达式统计信息：</p>
                        <ol>
                           <li>
                              <p>启动SQL * Plus并以<code class="codeph">sh</code>用户身份连接到数据库。
                              </p>
                           </li>
                           <li>
                              <p>查询统计信息扩展的名称和定义。</p>
                              <p>例如，运行以下查询：</p><pre class="pre codeblock"><code>COL EXTENSION_NAME格式a30 COL EXTENSION格式a35 SELECT EXTENSION_NAME，来自USER_STAT_EXTENSIONS的扩展，其中TABLE_NAME ='CUSTOMERS';</code></pre><p>示例输出显示如下：</p><pre class="pre codeblock"><code>EXTENSION_NAME EXTENSION ------------------------------ ------------------ ------------ SYS_STUBPHJSBRKOIK9O2YV3W8HOUE（LOWER（“CUST_STATE_PROVINCE”））</code></pre></li>
                           <li>
                              <p>查询不同值的数量，并查找是否已为表达式创建直方图。</p>
                              <p>例如，运行以下查询：</p><pre class="pre codeblock"><code>选择e。EXTENSION表达式，t。NUM_DISTINCT，t。来自USER_STAT_EXTENSIONS的直方图e，USER_TAB_COL_STATISTICS t其中e。EXTENSION_NAME =吨。COLUMN_NAME和e。TABLE_NAME =吨。TABLE_NAME和t。TABLE_NAME = '客户'; EXPRESSION NUM_DISTINCT HISTOGRAM ----------------------------------------------- --------------------（LOWER（“CUST_STATE_PROVINCE”））145 FREQUENCY</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-D016F91D-39A5-4290-AFB6-7271B4D31621__GUID-EAB1380A-7CBF-4B37-B970-4E3DF0D50A5C">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../arpls/DBMS_STATS.html#ARPLS-GUID-45029036-3FFC-4B7E-BFDC-A624D42C0988" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解<code class="codeph">DBMS_STATS.SHOW_EXTENDED_STATS_NAME</code>过程</p>
                           </li>
                           <li>
                              <p><a href="../refrn/DBA_STAT_EXTENSIONS.html#REFRN-GUID-1677F9C2-1EC4-4FA5-876D-2F6B5EAB6CC6" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解<code class="codeph">DBA_STAT_EXTENSIONS</code>视图</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-extended-statistics.html#GUID-FC50E35E-AF6A-4ECD-919D-8E020011DAB6" title="当WHERE子句具有使用表达式的谓词时，称为表达式统计信息的扩展统计信息的类型可以改进优化程序估计值。">管理表达式统计信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL488"></a><a id="TGSQL487"></a><div class="props_rev_3"><a id="GUID-C23883A8-DA95-482E-9954-EF4B5EBCA7B7" name="GUID-C23883A8-DA95-482E-9954-EF4B5EBCA7B7"></a><h4 id="TGSQL-GUID-C23883A8-DA95-482E-9954-EF4B5EBCA7B7" class="sect4"><span class="enumeration_section">14.2.4</span>删除表达式统计信息</h4>
                  <div>
                     <p>要从表中删除列组，请使用<code class="codeph">DBMS_STATS.DROP_EXTENDED_STATS</code>函数。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-C23883A8-DA95-482E-9954-EF4B5EBCA7B7__GUID-7753C45D-E7F2-4790-9F35-718A9E9E51B7">假设</p>
                        <p>本教程假设以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>您为<code class="codeph">LOWER(cust_state_province)</code>表达式创建了扩展统计信息。
                              </p>
                           </li>
                           <li>
                              <p>您想要删除表达式统计信息。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C23883A8-DA95-482E-9954-EF4B5EBCA7B7__GUID-3291D629-F966-424B-95B7-14772FF7E1EB">删除表达式统计信息：</p>
                        <ol>
                           <li>
                              <p>启动SQL * Plus并以<code class="codeph">sh</code>用户身份连接到数据库。
                              </p>
                           </li>
                           <li>
                              <p>删除列组。</p>
                              <p>例如，以下PL / SQL程序从<code class="codeph">customers</code>表中删除列组：</p><pre class="pre codeblock"><code>BEGIN DBMS_STATS.DROP_EXTENDED_STATS（'sh'，'customers'，'（LOWER（cust_state_province））'）;结束; /</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-C23883A8-DA95-482E-9954-EF4B5EBCA7B7__GUID-DCCF27AB-3C95-43AF-AAC7-DB58838AE445">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_STATS.html#ARPLS-GUID-64714B2B-E5CE-4C10-9F1E-25A9F254F6B1" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解<code class="codeph">DBMS_STATS.DROP_EXTENDED_STATS</code>过程</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-extended-statistics.html#GUID-FC50E35E-AF6A-4ECD-919D-8E020011DAB6" title="当WHERE子句具有使用表达式的谓词时，称为表达式统计信息的扩展统计信息的类型可以改进优化程序估计值。">管理表达式统计信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
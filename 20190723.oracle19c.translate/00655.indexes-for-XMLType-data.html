<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can create indexes on your XML data, to focus on particular parts of it that you query often and thus improve performance. There are various ways that you can index XMLType data, whether it is XML schema-based or non-schema-based, and regardless of the XMLType storage model you use."></meta>
      <meta name="description" content="You can create indexes on your XML data, to focus on particular parts of it that you query often and thus improve performance. There are various ways that you can index XMLType data, whether it is XML schema-based or non-schema-based, and regardless of the XMLType storage model you use."></meta>
      <title>XMLType数据的索引</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Developer&#39;s Guide "></meta>
      <meta property="og:description" content="You can create indexes on your XML data, to focus on particular parts of it that you query often and thus improve performance. There are various ways that you can index XMLType data, whether it is XML schema-based or non-schema-based, and regardless of the XMLType storage model you use."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="xml-db-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-30T12:32:42-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96222-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="query-and-update-XML.html" title="Previous" type="text/html"></link>
      <link rel="next" href="transformation-and-validation-of-XMLType-data.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XML DB Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADXDB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="query-and-update-XML.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="transformation-and-validation-of-XMLType-data.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="manipulation-of-XML-in-XML-DB.html" property="item" typeof="WebPage"><span property="name">在Oracle XML DB中操作XML数据</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">XMLType数据的索引</li>
            </ol>
            <a id="GUID-FE16BE28-035C-49EE-9683-6ED37876C3FC" name="GUID-FE16BE28-035C-49EE-9683-6ED37876C3FC"></a><a id="ADXDB0500"></a>
            
            <h2 id="ADXDB-GUID-FE16BE28-035C-49EE-9683-6ED37876C3FC" class="sect2"><span class="enumeration_chapter">6</span> XMLType数据的索引</h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='indexes-for-XMLType-data'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]u003e </style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>此页面上的脚本内容仅用于导航目的，不会以任何方式更改内容。</p>
            </noscript>
            <div>
               <p>您可以在XML数据上创建索引，专注于经常查询的特定部分，从而提高性能。您可以通过多种方式索引<code class="codeph">XMLType</code>数据，无论是基于XML模式还是非基于模式，无论您使用何种<code class="codeph">XMLType</code>存储模型。
               </p>
               <div class="infoboxnote" id="GUID-FE16BE28-035C-49EE-9683-6ED37876C3FC__GUID-9F40EC93-FD49-4583-8ACE-155B1FD58BE8">
                  <p class="notep1">注意：</p>
                  <p>此处显示的执行计划仅供参考。如果您在您的环境中运行此处提供的示例，那么您的执行计划可能不完全相同。</p>
               </div>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-9F243764-7945-4EF4-9C94-624BE732708F">涉及索引的Oracle XML DB任务</a><br>描述了涉及XML数据索引的常见任务。
                  </li>
                  <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-AEF30229-B377-4479-9627-45494B772392">索引XMLType数据概述</a><br>数据库索引通过提供对表数据的更快访问来提高性能。对于涉及很少更新的联机事务处理（OLTP）环境，特别推荐使用索引。
                  </li>
                  <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-6E6A5BA7-9B84-4E3D-B556-B3B286D26B46">的XMLIndex</a><br></li>
                  <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-FAB7C619-902A-40CF-98B7-6D358E1AD49C">为全文查询索引XML数据</a><br>当您需要对XML数据进行全文搜索时，Oracle建议您将<code class="codeph">XMLType</code>数据存储为二进制XML，并使用XQuery Full Text（XQFT）。您可以使用XML搜索索引。这是本节的主题。
                  </li>
                  <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-BF638421-9D6E-4D72-8371-79D084A04BCA">索引XMLType数据存储对象 - 关系</a><br>通过在与XML节点对应的基础数据库列上创建B树索引，可以有效地索引以对象关系存储的<code class="codeph">XMLType</code>数据。
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-FE16BE28-035C-49EE-9683-6ED37876C3FC__GUID-36013FE2-5AF4-4941-8955-75877975E687">
                  <p class="notep1">也可以看看：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>有关索引概述的<a href="../cncpt/indexes-and-index-organized-tables.html#CNCPT811" target="_blank"><span><cite>Oracle数据库概念</cite></span></a></p>
                     </li>
                     <li>
                        <p><a href="../adfns/indexes.html#ADFNS005" target="_blank"><span><cite>“Oracle数据库开发指南”</cite></span></a> ，了解有关在应用程序开发中使</p>
                     </li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="manipulation-of-XML-in-XML-DB.html#GUID-87C758D5-5792-483D-8894-4C01FCD2A8A0" title="此处介绍了以下内容：XQuery，XMLType操作和XML数据索引。">在Oracle XML DB中处理XML数据</a></p>
                  </div>
               </div>
            </div>
            <a id="ADXDB5812"></a><a id="ADXDB5813"></a><a id="ADXDB5814"></a><a id="ADXDB5815"></a><a id="ADXDB4308"></a><div class="props_rev_3"><a id="GUID-9F243764-7945-4EF4-9C94-624BE732708F" name="GUID-9F243764-7945-4EF4-9C94-624BE732708F"></a><h3 id="ADXDB-GUID-9F243764-7945-4EF4-9C94-624BE732708F" class="sect3"><span class="enumeration_section">6.1</span>涉及索引的Oracle XML DB任务</h3>
               <div>
                  <p>描述了涉及XML数据索引的常见任务。</p>
                  <p><a href="indexes-for-XMLType-data.html#GUID-9F243764-7945-4EF4-9C94-624BE732708F__BCGBDDDE" title="此表显示了涉及索引XML数据的基本任务。">表6-1</a>列出了涉及XML数据索引的一些基本用户任务的文档。
                  </p>
                  <div class="tblformalwide" id="GUID-9F243764-7945-4EF4-9C94-624BE732708F__BCGBDDDE">
                     <p class="titleintable">表6-1基本XML索引任务</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="基本的XML索引任务" width="100%" border="1" summary="This table shows the basic tasks involving indexing XML data." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="62%" id="d34642e145">有关如何...的信息</th>
                              <th align="left" valign="bottom" width="38%" id="d34642e148">看到...</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="62%" id="d34642e153" headers="d34642e145 ">
                                 <p>选择索引方法</p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d34642e153 d34642e148 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-AEF30229-B377-4479-9627-45494B772392" title="数据库索引通过提供对表数据的更快访问来提高性能。对于涉及很少更新的联机事务处理（OLTP）环境，特别推荐使用索引。">索引XMLType数据概述</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="62%" id="d34642e164" headers="d34642e145 ">
                                 <p>索引<code class="codeph">XMLType</code>数据以对象方式存储</p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d34642e164 d34642e148 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-BF638421-9D6E-4D72-8371-79D084A04BCA" title="通过在与XML节点对应的基础数据库列上创建B树索引，可以有效地索引以对象关系存储的XMLType数据。">索引XMLType数据存储对象 - 关联</a> ， <a href="XPath-rewrite-for-object-relational-storage.html#GUID-B10DA5D9-25C5-4F0B-AD4D-2CB93D5114D4" title="如果集合存储为有序集合表（OCT）或XMLType实例，则可以直接访问集合的成员。每个成员都成为一个表行，因此您可以使用SQL直接访问它。您通常可以通过索引此类集合成员来提高性能。">指南：在有序集合表上创建索引</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="62%" id="d34642e190" headers="d34642e145 ">
                                 <p>创建，删除或重命名<code class="codeph">XMLIndex</code>索引</p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d34642e190 d34642e148 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-AE06E648-B947-4171-929B-68A1DBD93992__CHDCGJHC">实施例6-7</a> ， <a href="indexes-for-XMLType-data.html#GUID-AE06E648-B947-4171-929B-68A1DBD93992__CHDFIGIB">实施例6-9</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="62%" id="d34642e202" headers="d34642e145 ">
                                 <p>获取给定表或列的<code class="codeph">XMLIndex</code>索引的名称</p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d34642e202 d34642e148 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-AE06E648-B947-4171-929B-68A1DBD93992__CHDDGHDF">例6-8</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="62%" id="d34642e212" headers="d34642e145 ">
                                 <p>确定在评估查询时是否使用给定的<code class="codeph">XMLIndex</code>索引</p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d34642e212 d34642e148 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-54B95128-EFC2-4EA5-9E05-753DC572BF52" title="要了解是否已在解析查询时使用特定的XMLIndex索引，可以检查查询的执行计划。">如何判断是否使用了XMLIndex</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="62%" id="d34642e229" headers="d34642e145 ">
                                 <p>关闭<code class="codeph">XMLIndex</code>索引的使用</p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d34642e229 d34642e148 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-572DB598-0A31-4143-889B-98D883211FC6" title="您可以使用优化程序提示关闭XMLIndex的使用：/ * + NO_XML_QUERY_REWRITE * /或优化程序提示/ * + NO_XMLINDEX_REWRITE * /。">关闭使用XMLIndex</a></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p><a href="indexes-for-XMLType-data.html#GUID-9F243764-7945-4EF4-9C94-624BE732708F__BCGDECIA" title="此表显示涉及具有结构化组件的XMLIndex索引的任务。">表6-2</a>列出了涉及具有<span class="italic">结构化</span>组件的<code class="codeph">XMLIndex</code>索引的某些用户任务的文档。
                  </p>
                  <div class="tblformalwide" id="GUID-9F243764-7945-4EF4-9C94-624BE732708F__BCGDECIA">
                     <p class="titleintable">表6-2包含结构化组件的XMLIndex索引的任务</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="涉及带结构化组件的XMLIndex索引的任务" width="100%" border="1" summary="This table shows the tasks involving XMLIndex indexes with a structured component." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="61%" id="d34642e273">有关如何...的信息</th>
                              <th align="left" valign="bottom" width="39%" id="d34642e276">看到...</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="61%" id="d34642e281" headers="d34642e273 ">
                                 <p>使用结构化组件创建<code class="codeph">XMLIndex</code>索引</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d34642e281 d34642e276 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-0BE986CC-BEAE-4F6E-95C9-7DA51D9E0CE0__BCGJCEAF">实施例6-23</a> ， <a href="indexes-for-XMLType-data.html#GUID-6C638C44-A5E6-476F-95A0-151150EEF16B__BCGDDBDI">实施例6-21</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="61%" id="d34642e293" headers="d34642e273 ">
                                 <p>删除<code class="codeph">XMLIndex</code>索引的结构化组件（删除所有结构组）</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d34642e293 d34642e276 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-D3269FF1-D89D-43DE-B4EC-8C43D5B2F5F8__BCGJGJAD">例6-25</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="61%" id="d34642e303" headers="d34642e273 ">
                                 <p>确保查询与具有结构化组件的<code class="codeph">XMLIndex</code>索引之间的数据类型对应关系</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d34642e303 d34642e276 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-E6F787DD-ED63-41FE-ADB4-7FA8F646B254" title="用于XMLIndex结构化组件的关系表使用SQL数据类型。查询中使用的XQuery表达式使用XML数据类型（XML Schema数据类型和XQuery数据类型）。">XMLIndex结构化组件的数据类型注意事项</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="61%" id="d34642e320" headers="d34642e273 ">
                                 <p>在<code class="codeph">XMLIndex</code>结构化组件的内容表上创建B树索引</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d34642e320 d34642e276 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-3958CA0D-1C5B-47C3-B68F-7B6EF9E5BFA9__BCGEGABJ">例6-26</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="61%" id="d34642e330" headers="d34642e273 ">
                                 <p>在<code class="codeph">XMLIndex</code>结构化组件的内容表上创建Oracle Text <code class="codeph">CONTEXT</code>索引</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d34642e330 d34642e276 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-748DD8D4-2311-4D02-B050-A5940204A2A9__BCGDEHEA">例6-46</a></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p><a href="indexes-for-XMLType-data.html#GUID-9F243764-7945-4EF4-9C94-624BE732708F__BCGFHJJE" title="此表显示涉及具有非结构化组件的XMLIndex索引的任务。">表6-3</a>列出了涉及具有<span class="italic">非结构化</span>组件的<code class="codeph">XMLIndex</code>索引的某些用户任务的文档。
                  </p>
                  <div class="tblformalwide" id="GUID-9F243764-7945-4EF4-9C94-624BE732708F__BCGFHJJE">
                     <p class="titleintable">表6-3包含非结构化组件的XMLIndex索引的任务</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="涉及具有非结构化组件的XMLIndex索引的任务" width="100%" border="1" summary="This table shows the tasks involving XMLIndex indexes with an unstructured component." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="61%" id="d34642e364">有关如何...的信息</th>
                              <th align="left" valign="bottom" width="39%" id="d34642e367">看到...</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="61%" id="d34642e372" headers="d34642e364 ">
                                 <p>使用非结构化组件创建<code class="codeph">XMLIndex</code>索引</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d34642e372 d34642e367 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246__CHDJCDCF">实施例6-10</a> ， <a href="indexes-for-XMLType-data.html#GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246__CHDBIGIJ">实施例6-12</a> ， <a href="indexes-for-XMLType-data.html#GUID-F5B41C22-4273-45A8-9BD5-32B7EE3773AC__CHDIHICC">实施例6-33</a> ， <a href="indexes-for-XMLType-data.html#GUID-F5B41C22-4273-45A8-9BD5-32B7EE3773AC__CHDJEICC">实施例6-35</a> ， <a href="indexes-for-XMLType-data.html#GUID-7F44BE51-8F1A-487F-84CD-054E08F7A652__CHDGDGFA">实施例6-36</a> ， <a href="indexes-for-XMLType-data.html#GUID-7F44BE51-8F1A-487F-84CD-054E08F7A652__CHDFFICC">实施例6-37</a> ， <a href="indexes-for-XMLType-data.html#GUID-DCEA65A9-BE27-4291-A2EF-2AA8E9740940__CHDBCDJD">实施例6-38</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="61%" id="d34642e395" headers="d34642e364 ">
                                 <p>删除<code class="codeph">XMLIndex</code>索引的非结构化组件（删除路径表）</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d34642e395 d34642e367 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246__BCGHIIFB">例6-13</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="61%" id="d34642e405" headers="d34642e364 ">
                                 <p>在创建<code class="codeph">XMLIndex</code>索引时命名路径表</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d34642e405 d34642e367 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246__CHDJCDCF">例6-10</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="61%" id="d34642e415" headers="d34642e364 ">
                                 <p>在创建<code class="codeph">XMLIndex</code>索引时指定存储选项</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d34642e415 d34642e367 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246__CHDBIGIJ">例6-12</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="61%" id="d34642e425" headers="d34642e364 ">
                                 <p>在<code class="codeph">XMLIndex</code>路径表上显示所有现有的二级索引</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d34642e425 d34642e367 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246__CHDJHFGG">实施例6-14</a> ， <a href="indexes-for-XMLType-data.html#GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24__CHDJACJG">实施例6-20</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="61%" id="d34642e437" headers="d34642e364 ">
                                 <p>获取<code class="codeph">XMLIndex</code>索引的路径表的名称</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d34642e437 d34642e367 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246__CHDBCCHJ">例6-11</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="61%" id="d34642e447" headers="d34642e364 ">
                                 <p>在给定路径表的情况下，使用非结构化组件获取<code class="codeph">XMLIndex</code>索引的名称</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d34642e447 d34642e367 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-54B95128-EFC2-4EA5-9E05-753DC572BF52__CHDBCJIG">例6-28</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="61%" id="d34642e457" headers="d34642e364 ">
                                 <p>在<code class="codeph">XMLIndex</code>路径表上创建二级索引</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d34642e457 d34642e367 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246" title="您可以对具有非结构化组件的XMLIndex索引执行各种操作，包括操作路径表和该组件的二级索引。">将XMLIndex与非结构化组件一起使用</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="61%" id="d34642e474" headers="d34642e364 ">
                                 <p>获取有关<code class="codeph">XMLIndex</code>路径表上所有二级索引的信息</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d34642e474 d34642e367 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24__CHDJACJG">例6-20</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="61%" id="d34642e484" headers="d34642e364 ">
                                 <p>在路径表<code class="codeph">VALUE</code>列上创建基于函数的索引</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d34642e484 d34642e367 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24__CHDGADGI">例6-15</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="61%" id="d34642e494" headers="d34642e364 ">
                                 <p>在路径表<code class="codeph">VALUE</code>列上创建数字索引</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d34642e494 d34642e367 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24__CHDFHBBJ">例6-17</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="61%" id="d34642e505" headers="d34642e364 ">
                                 <p>在路径表<code class="codeph">VALUE</code>列上创建日期索引</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d34642e505 d34642e367 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24__CHDBABFD">例6-18</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="61%" id="d34642e515" headers="d34642e364 ">
                                 <p>在路径表<code class="codeph">VALUE</code>列上创建Oracle Text <code class="codeph">CONTEXT</code>索引</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d34642e515 d34642e367 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24__CHDJEHFC">例6-19</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="61%" id="d34642e528" headers="d34642e364 ">
                                 <p>排除或包含<code class="codeph">XMLIndex</code>索引使用的特定XPath表达式</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d34642e528 d34642e367 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-9ADFFD10-BFF1-4807-9FF0-C323DC2A70D8" title="如果您知道最有可能查询的XPath表达式，那么您可以缩小XMLIndex索引的重点，从而提高性能。">XMLIndex路径子集：指定要索引的路径</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="61%" id="d34642e545" headers="d34642e364 ">
                                 <p>为用于<code class="codeph">XMLIndex</code> XPath表达式指定名称空间前缀</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d34642e545 d34642e367 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-9ADFFD10-BFF1-4807-9FF0-C323DC2A70D8" title="如果您知道最有可能查询的XPath表达式，那么您可以缩小XMLIndex索引的重点，从而提高性能。">XMLIndex路径子集：指定要索引的路径</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="61%" id="d34642e561" headers="d34642e364 ">
                                 <p>排除或包含<code class="codeph">XMLIndex</code>索引使用的特定XPath表达式</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d34642e561 d34642e367 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-9ADFFD10-BFF1-4807-9FF0-C323DC2A70D8" title="如果您知道最有可能查询的XPath表达式，那么您可以缩小XMLIndex索引的重点，从而提高性能。">XMLIndex路径子集：指定要索引的路径</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="61%" id="d34642e578" headers="d34642e364 ">
                                 <p>为用于<code class="codeph">XMLIndex</code> XPath表达式指定名称空间前缀</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d34642e578 d34642e367 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-9ADFFD10-BFF1-4807-9FF0-C323DC2A70D8" title="如果您知道最有可能查询的XPath表达式，那么您可以缩小XMLIndex索引的重点，从而提高性能。">XMLIndex路径子集：指定要索引的路径</a></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p><a href="indexes-for-XMLType-data.html#GUID-9F243764-7945-4EF4-9C94-624BE732708F__BCGDFDFE" title="此表显示涉及XMLIndex索引的其他任务。">表6-4</a>列出了涉及<code class="codeph">XMLIndex</code>索引的其他一些用户任务的文档。
                  </p>
                  <div class="tblformalwide" id="GUID-9F243764-7945-4EF4-9C94-624BE732708F__BCGDFDFE">
                     <p class="titleintable">表6-4涉及XMLIndex索引的其他任务</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="涉及XMLIndex索引的其他任务" width="100%" border="1" summary="This table shows the miscellaneous tasks involving XMLIndex indexes." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="62%" id="d34642e612">有关如何...的信息</th>
                              <th align="left" valign="bottom" width="38%" id="d34642e615">看到...</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="62%" id="d34642e620" headers="d34642e612 ">
                                 <p>指定应使用并行进程创建和维护<code class="codeph">XMLIndex</code>索引</p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d34642e620 d34642e615 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-7F44BE51-8F1A-487F-84CD-054E08F7A652" title="如果使用范围，列表或散列分区对XMLType表或具有XMLType列的表进行分区，则还可以在表上创建XMLIndex索引。您可以选择确保并行执行索引创建和维护。">XMLIndex分区和并行</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="62%" id="d34642e643" headers="d34642e612 ">
                                 <p>更改<code class="codeph">XMLIndex</code>路径表的并行度以调整索引性能</p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d34642e643 d34642e615 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-7F44BE51-8F1A-487F-84CD-054E08F7A652" title="如果使用范围，列表或散列分区对XMLType表或具有XMLType列的表进行分区，则还可以在表上创建XMLIndex索引。您可以选择确保并行执行索引创建和维护。">XMLIndex分区和并行</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="62%" id="d34642e666" headers="d34642e612 ">
                                 <p>安排<code class="codeph">XMLIndex</code>索引的维护</p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d34642e666 d34642e615 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-DCEA65A9-BE27-4291-A2EF-2AA8E9740940" title="您可以推迟维护仅包含非结构化组件的XMLIndex索引的成本，仅在提交时或数据库负载减少时执行维护。这可以提高DML性能，并且可以在索引同步时启用批量加载非同步索引行。">XMLIndex索引的异步（延迟）维护</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="62%" id="d34642e689" headers="d34642e612 ">
                                 <p>手动同步<code class="codeph">XMLIndex</code>索引及其基表</p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d34642e689 d34642e615 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-DCEA65A9-BE27-4291-A2EF-2AA8E9740940" title="您可以推迟维护仅包含非结构化组件的XMLIndex索引的成本，仅在提交时或数据库负载减少时执行维护。这可以提高DML性能，并且可以在索引同步时启用批量加载非同步索引行。">XMLIndex索引的异步（延迟）维护</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="62%" id="d34642e712" headers="d34642e612 ">
                                 <p>收集基于成本的优化器的表或索引的统计信息</p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d34642e712 d34642e615 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-C936D15C-5F86-4EAE-8552-3890ACD819BC__CHDEHFDF">例6-40</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="62%" id="d34642e719" headers="d34642e612 ">
                                 <p>创建XML搜索索引</p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d34642e719 d34642e615 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-A48B77D9-A4C1-47B9-9664-D921D070AF55__CEGIAAGI">例6-41</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="62%" id="d34642e726" headers="d34642e612 ">
                                 <p>使用XML搜索索引对存储为二进制XML的XML数据进行全文搜索</p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d34642e726 d34642e615 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-A48B77D9-A4C1-47B9-9664-D921D070AF55__CEGJABCA">例6-42</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="62%" id="d34642e733" headers="d34642e612 ">
                                 <p>显示是否在查询中使用XML搜索索引</p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d34642e733 d34642e615 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-A48B77D9-A4C1-47B9-9664-D921D070AF55__CEGCHDFB">例6-43</a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="62%" id="d34642e740" headers="d34642e612 ">
                                 <p>在<code class="codeph">XMLIndex</code>结构化组件的内容表上创建Oracle Text <code class="codeph">CONTEXT</code>索引</p>
                              </td>
                              <td align="left" valign="top" width="38%" headers="d34642e740 d34642e615 ">
                                 <p><a href="indexes-for-XMLType-data.html#GUID-748DD8D4-2311-4D02-B050-A5940204A2A9__BCGDEHEA">例6-46</a></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-FE16BE28-035C-49EE-9683-6ED37876C3FC" title="您可以在XML数据上创建索引，专注于经常查询的特定部分，从而提高性能。您可以通过多种方式索引XMLType数据，无论是基于XML模式还是非基于模式，无论您使用何种XMLType存储模型。">XMLType数据的索引</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB6280"></a><a id="ADXDB6281"></a><a id="ADXDB6282"></a><a id="ADXDB4310"></a><div class="props_rev_3"><a id="GUID-AEF30229-B377-4479-9627-45494B772392" name="GUID-AEF30229-B377-4479-9627-45494B772392"></a><h3 id="ADXDB-GUID-AEF30229-B377-4479-9627-45494B772392" class="sect3"><span class="enumeration_section">6.2</span>索引XMLType数据概述</h3>
               <div>
                  <p>数据库索引通过提供对表数据的更快访问来提高性能。对于涉及很少更新的联机事务处理（OLTP）环境，特别推荐使用索引。</p>
                  <p>索引XML数据的主要方法是使用<code class="codeph">XMLIndex</code> 。您还可以使用Oracle Text <code class="codeph">CONTEXT</code>索引来补充<code class="codeph">XMLIndex</code>的使用。
                  </p>
                  <p>这是一个摘要决策树，作为选择索引存储为二进制XML的<code class="codeph">XMLType</code>数据的方法时的起点： <a id="fn_1" name="fn_1" href="#fn_1" data="" for="" xmltype="" stored="" object-relationally,="" see="" indexing="" object-relationally.="" if="" your="" is="" highly="" structured="" throughout,="" or="" queries="" are="" not="" known="" at="" index="" creation="" time,="" then="" this="" approach="" might="" be="" appropriate=")" ="" onclick="footdisplay(1, "><sup>Foot 1</sup></a></p>
                  <div class="section">
                     <p class="subhead2" id="GUID-AEF30229-B377-4479-9627-45494B772392__GUID-D6731D26-8B56-4474-9147-5F746253ACC6">如果您的XML数据包含结构化，可预测数据的孤岛，并且您的查询已知</p>
                     <p>使用带有<span class="italic">结构化组件的</span> <code class="codeph">XMLIndex</code>来索引结构化岛屿（即使这些岛周围的数据是非结构化的）。
                     </p>
                     <p>结构化索引组件反映您使用的查询。如果相应地更新索引定义，则可以随时更改此已知查询集。请参阅<a href="indexes-for-XMLType-data.html#GUID-2DC9E402-5C06-4AED-B04B-C37B687DB6BB" title="您可以为XML内容的固定结构化岛屿项目的查询创建和使用XMLIndex索引的结构化组件，即使周围数据相对非结构化也是如此。">XMLIndex结构化组件</a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AEF30229-B377-4479-9627-45494B772392__GUID-C4CB89B7-2199-4945-91E1-C4803A41609B">如果需要查询XML数据中的全文内容</p>
                     <p>使用<span class="italic">XML搜索索引</span> 。请参阅<a href="indexes-for-XMLType-data.html#GUID-08972B6C-A1E1-4458-A6EF-754BCDCB3F63" title="除了访问元素和属性等XML节点之外，有时还需要快速访问XML文本节点中的特定段落。要在XML数据中查询此类内容，可以使用XQuery Full Text（XQFT）或Oracle特定的全文构造。">XML数据的Oracle Text Indexes</a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AEF30229-B377-4479-9627-45494B772392__GUID-8ADD5654-FA33-4C5C-B234-E8E364B4266C">如果需要支持涉及谓词的临时XML查询</p>
                     <p>将<code class="codeph">XMLIndex</code>与<span class="italic">非结构化组件一起使用</span> - 请参阅<a href="indexes-for-XMLType-data.html#GUID-4A427DE6-21F9-45F6-8045-FF37C466A05C" title="与为表示单个XML元素或属性的特定数据库列定义的B树索引或应用于特定结构化文档部分的XMLIndex结构化组件不同，XMLIndex索引的非结构化组件默认为，非常一般。">XMLIndex非结构化组件</a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>您的XML数据是否包含<span class="italic">高度结构化且可预测的数据孤岛</span> （即使周围数据可能是非结构化的）？
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>是。使用带有结构化组件的<code class="codeph">XMLIndex</code>来索引岛。请参阅第6-12页的“XMLIndex结构化组件”。
                           </p>
                        </li>
                        <li>
                           <p>您是否需要<span class="italic">查询</span> XML数据中<span class="italic">的全文内容</span> ？
                           </p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>是。使用XML搜索索引。请参见第6-5页的“XML数据的Oracle文本索引”。</p>
                              </li>
                              <li>
                                 <p>您是否需要支持<span class="italic">涉及谓词的临时XML查询</span> ？如果是这样，请将XMLIndex与非结构化组件一起使用 - 请参阅第6-16页的“XMLIndex非结构化组件”。如果没有，请不要费心索引XML数据。
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-9AD9EB86-8877-4349-A6ED-69B779783AE0">XMLIndex解决了XML数据的细粒度结构</a><br>您可以在一个或多个关系列或函数表达式上创建索引。但是，XML数据有自己的细粒度结构，不一定反映在用于存储它的数据库表的结构中。因此，有效索引XML数据可能与索引大多数数据库数据有点不同。
                     </li>
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-08972B6C-A1E1-4458-A6EF-754BCDCB3F63">XML数据的Oracle文本索引</a><br>除了访问元素和属性等XML节点之外，有时还需要快速访问XML文本节点中的特定段落。要在XML数据中查询此类内容，可以使用XQuery Full Text（XQFT）或Oracle特定的全文构造。
                     </li>
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-3C109433-1FDA-4A55-8196-CD11FDFCE462">优化选择要使用的正确索引</a><br>在特定情况下可能应用多个索引时使用哪些索引？基于成本的优化确定要使用的索引或索引，以便最大限度地提高性能。
                     </li>
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-48E55F3F-A918-4C85-A6B0-0287611C21E1">基于函数的索引已弃用XMLType</a><br>在Oracle Database 11g第2版（11.2）之前的版本中，当XPath表达式以单个节点为目标时，基于函数的索引有时适合与<code class="codeph">XMLType</code>数据一起使用。Oracle建议您使用<code class="codeph">XMLIndex</code>的结构化组件。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-FE16BE28-035C-49EE-9683-6ED37876C3FC" title="您可以在XML数据上创建索引，专注于经常查询的特定部分，从而提高性能。您可以通过多种方式索引XMLType数据，无论是基于XML模式还是非基于模式，无论您使用何种XMLType存储模型。">XMLType数据的索引</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB5816"></a><div class="props_rev_3"><a id="GUID-9AD9EB86-8877-4349-A6ED-69B779783AE0" name="GUID-9AD9EB86-8877-4349-A6ED-69B779783AE0"></a><h4 id="ADXDB-GUID-9AD9EB86-8877-4349-A6ED-69B779783AE0" class="sect4"><span class="enumeration_section">6.2.1</span> XMLIndex解决了XML数据的细粒度结构</h4>
                  <div>
                     <p>您可以在一个或多个关系列或函数表达式上创建索引。但是，XML数据有自己的细粒度结构，不一定反映在用于存储它的数据库表的结构中。因此，有效索引XML数据可能与索引大多数数据库数据有点不同。</p>
                     <p>对于对象关系<code class="codeph">XMLType</code>存储，诸如元素和属性的XML对象对应于对象关系列和表。因此，在这些列和表上创建<span class="italic">B树索引</span>提供了一种有效索引相应XML对象的极好方法。这里，存储模型直接反映了XML数据的细粒度结构，因此索引结构化XML数据没有特殊问题。请参阅<a href="indexes-for-XMLType-data.html#GUID-BF638421-9D6E-4D72-8371-79D084A04BCA" title="通过在与XML节点对应的基础数据库列上创建B树索引，可以有效地索引以对象关系存储的XMLType数据。">索引XMLType数据存储对象 - 关系</a> 。
                     </p>
                     <p>在对象关系<code class="codeph">XMLType</code>存储中，XML文档被分解并以对象关系存储，但您可以选择将其一个或多个XML片段存储为嵌入式<code class="codeph">CLOB</code>实例。一个典型的用例是将XML模式<code class="codeph">complexType</code>或复杂元素映射到<code class="codeph">CLOB</code>存储，因为您通常将整个片段作为一个单元进行访问。
                     </p>
                     <p>但是，当涉及索引时，这样的嵌入式<code class="codeph">CLOB</code>片段也充当不透明单元;其零件未单独编制索引。
                     </p>
                     <p>同样，标准索引对二进制XML存储没有帮助。在这两种情况下，使用标准索引（B-tree，bitmap）索引数据库列通常对访问XML文档的特定部分没有帮助。</p>
                     <p><span class="italic"><code class="codeph">XMLIndex</code></span>提供了一个特定于XML的通用索引，用于索引XML数据的内部结构。其主要目的之一是克服二进制XML存储所带来的索引限制。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>带有<span class="italic">非结构化组件</span>的<code class="codeph">XMLIndex</code>索引会索引文档的XML <span class="italic">标记</span> ，并根据以其为目标的XPath表达式标识文档片段。它还可以索引标量节点<span class="italic">值</span> ，以基于单个值或值范围提供快速查找。它还记录了它索引的每个节点的文档<span class="italic">层次结构</span>信息：关系父子，祖先 - 后代和兄弟。此索引组件对于从具有少量或可变结构的文档中提取XML片段的查询特别有用。
                           </p>
                        </li>
                        <li>
                           <p>带有<span class="italic">结构化组件</span>的<code class="codeph">XMLIndex</code>索引索引高度结构化和可预测的XML数据部分，但大部分都是非结构化的。此索引组件对于投影和使用此类结构化内容孤岛的查询特别有用。
                           </p>
                        </li>
                     </ul>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="indexes-for-XMLType-data.html#GUID-6E6A5BA7-9B84-4E3D-B556-B3B286D26B46">的XMLIndex</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-AEF30229-B377-4479-9627-45494B772392" title="数据库索引通过提供对表数据的更快访问来提高性能。对于涉及很少更新的联机事务处理（OLTP）环境，特别推荐使用索引。">索引XMLType数据概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5817"></a><div class="props_rev_3"><a id="GUID-08972B6C-A1E1-4458-A6EF-754BCDCB3F63" name="GUID-08972B6C-A1E1-4458-A6EF-754BCDCB3F63"></a><h4 id="ADXDB-GUID-08972B6C-A1E1-4458-A6EF-754BCDCB3F63" class="sect4"><span class="enumeration_section">6.2.2</span> XML数据的Oracle文本索引</h4>
                  <div>
                     <p>除了访问元素和属性等XML节点之外，有时还需要快速访问XML文本节点中的特定段落。要在XML数据中查询此类内容，可以使用XQuery Full Text（XQFT）或Oracle特定的全文构造。</p>
                     <p>在任何一种情况下，您都可以创建适当的Oracle Text（全文）索引。在XQFT的情况下，索引是XML搜索索引，专门设计用于存储为二进制XML的<code class="codeph">XMLType</code>数据。</p>
                     <p>全文索引对于以<span class="italic">文档为中心的</span>应用程序特别有用，这些应用程序通常包含XML元素和文本节点内容的混合。通过将其与结构XML搜索相结合，即通过将其限制为XML文档的某些部分（通过使用XPath表达式来识别），通常可以使全文搜索更强大，更集中。
                     </p>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="indexes-for-XMLType-data.html#GUID-FAB7C619-902A-40CF-98B7-6D358E1AD49C" title="当您需要对XML数据进行全文搜索时，Oracle建议您将XMLType数据存储为二进制XML，并使用XQuery Full Text（XQFT）。您可以使用XML搜索索引。这是本节的主题。">为全文查询索引XML数据</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-AEF30229-B377-4479-9627-45494B772392" title="数据库索引通过提供对表数据的更快访问来提高性能。对于涉及很少更新的联机事务处理（OLTP）环境，特别推荐使用索引。">索引XMLType数据概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4319"></a><div class="props_rev_3"><a id="GUID-3C109433-1FDA-4A55-8196-CD11FDFCE462" name="GUID-3C109433-1FDA-4A55-8196-CD11FDFCE462"></a><h4 id="ADXDB-GUID-3C109433-1FDA-4A55-8196-CD11FDFCE462" class="sect4"><span class="enumeration_section">6.2.3</span>优化选择要使用的正确索引</h4>
                  <div>
                     <p>在特定情况下可能应用多个索引时使用哪些索引？基于成本的优化确定要使用的索引或索引，以便最大限度地提高性能。</p>
                     <p>Oracle Text索引仅适用于文本，XML数据表示文本节点。每当定位文本节点并定义相应的Oracle Text索引时，都会使用它。如果其他索引也适用于特定上下文，则也可以使用它们。但是，仅仅因为定义了一个索引并且它似乎适用于给定的情况并不意味着它将被使用。如果基于成本的优化器认为其使用不符合成本效益，则不会使用它。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-AEF30229-B377-4479-9627-45494B772392" title="数据库索引通过提供对表数据的更快访问来提高性能。对于涉及很少更新的联机事务处理（OLTP）环境，特别推荐使用索引。">索引XMLType数据概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4315"></a><div class="props_rev_3"><a id="GUID-48E55F3F-A918-4C85-A6B0-0287611C21E1" name="GUID-48E55F3F-A918-4C85-A6B0-0287611C21E1"></a><h4 id="ADXDB-GUID-48E55F3F-A918-4C85-A6B0-0287611C21E1" class="sect4"><span class="enumeration_section">6.2.4</span>基于函数的索引已弃用XMLType</h4>
                  <div>
                     <p>在Oracle Database 11g第2版（11.2）之前的版本中，当XPath表达式以单个节点为目标时，基于函数的索引有时适合与<code class="codeph">XMLType</code>数据一起使用。Oracle建议您使用<code class="codeph">XMLIndex</code>的结构化组件。
                     </p>
                     <p>这样做可以消除与基于函数的索引的维护操作相关的开销，并且会增加优化程序可以正确选择索引的情况的数量。因此，不需要对现有DML语句进行任何更改。</p>
                     <p>对于<code class="codeph">XMLType</code>对象关系存储，定义（不推荐使用）Oracle SQL函数<code class="codeph">extractValue</code>的索引通常会通过XPath重写导致在底层对象上自动创建B树索引（而不是<code class="codeph">extractValue</code>上基于函数的索引）。这里的XPath目标必须是<span class="italic">单例</span>元素或属性。应用于<code class="codeph">XMLQuery</code> <code class="codeph">XMLCast</code>存在类似的快捷方式。
                     </p>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="indexes-for-XMLType-data.html#GUID-BF638421-9D6E-4D72-8371-79D084A04BCA" title="通过在与XML节点对应的基础数据库列上创建B树索引，可以有效地索引以对象关系存储的XMLType数据。">索引XMLType数据存储对象 - 关系</a></li>
                           <li><a href="indexes-for-XMLType-data.html#GUID-2DC9E402-5C06-4AED-B04B-C37B687DB6BB" title="您可以为XML内容的固定结构化岛屿项目的查询创建和使用XMLIndex索引的结构化组件，即使周围数据相对非结构化也是如此。">XMLIndex结构化组件</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-AEF30229-B377-4479-9627-45494B772392" title="数据库索引通过提供对表数据的更快访问来提高性能。对于涉及很少更新的联机事务处理（OLTP）环境，特别推荐使用索引。">索引XMLType数据概述</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB4332"></a><div class="props_rev_3"><a id="GUID-6E6A5BA7-9B84-4E3D-B556-B3B286D26B46" name="GUID-6E6A5BA7-9B84-4E3D-B556-B3B286D26B46"></a><h3 id="ADXDB-GUID-6E6A5BA7-9B84-4E3D-B556-B3B286D26B46" class="sect3"><span class="enumeration_section">6.3</span> XMLIndex</h3>
               <div></div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-9E42982A-CDBB-40BC-86A9-04AAEF9869D7">XMLIndex的优点</a><br>B树索引可以有利地用于对象关系<code class="codeph">XMLType</code>存储 - 它们通过直接定位底层对象来提供清晰的焦点。但是，在解决使用二进制XML存储的XML文档的详细结构（元素和属性）时，它们通常是无效的。这是<code class="codeph">XMLIndex</code>的特殊领域。
                     </li>
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-8153B166-9E19-4A4D-967A-5902ECEB4FA9">结构化和非结构化XMLIndex组件</a><br><code class="codeph">XMLIndex</code>用于索引非结构化或半结构化的XML数据，即通常具有很少或没有固定结构的数据。它适用于存储为二进制XML的<code class="codeph">XMLType</code>数据。</li>
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-2DC9E402-5C06-4AED-B04B-C37B687DB6BB">XMLIndex结构化组件</a><br>您可以为XML内容的固定结构化岛屿项目的查询创建和使用<code class="codeph">XMLIndex</code>索引的结构化组件，即使周围数据相对非结构化也是如此。
                     </li>
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-4A427DE6-21F9-45F6-8045-FF37C466A05C">XMLIndex非结构化组件</a><br>不同于B树索引，这可以定义为特定数据库列代表单个XML元素或属性，或<code class="codeph">XMLIndex</code>结构化部件，它适用于具体的，结构化文档的部件，一个的非结构化部件<code class="codeph">XMLIndex</code>指数是，默认情况下，非常一般。
                     </li>
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-AE06E648-B947-4171-929B-68A1DBD93992">创建，删除，更改和检查XMLIndex索引</a><br><code class="codeph">XMLIndex</code>索引的基本操作包括创建，删除，更改和检查它。举例说明。
                     </li>
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246">将XMLIndex与非结构化组件一起使用</a><br>您可以对具有非结构化组件的<code class="codeph">XMLIndex</code>索引执行各种操作，包括操作路径表和该组件的二级索引。
                     </li>
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-476331FD-F58B-4980-BECD-015F0A794AC9">XMLIndex与结构化组件的使用</a><br><code class="codeph">XMLIndex</code>结构化组件为XML数据中的特定结构岛编制索引。
                     </li>
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-54B95128-EFC2-4EA5-9E05-753DC572BF52">如何判断是否使用了XMLIndex</a><br>要了解是否已在解析查询时使用特定的<code class="codeph">XMLIndex</code>索引，可以检查查询的执行计划。
                     </li>
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-572DB598-0A31-4143-889B-98D883211FC6">关闭使用XMLIndex</a><br>您可以使用优化程序提示关闭<code class="codeph">XMLIndex</code>的使用： <code class="codeph">/*+ NO_XML_QUERY_REWRITE */</code>或优化程序提示<code class="codeph">/*+ NO_XMLINDEX_REWRITE */</code> 。
                     </li>
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-9ADFFD10-BFF1-4807-9FF0-C323DC2A70D8">XMLIndex路径子集：指定要索引的路径</a><br>如果您知道最有可能查询的XPath表达式，那么您可以缩小<code class="codeph">XMLIndex</code>索引的重点，从而提高性能。
                     </li>
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-B8CF16F3-CA51-40A0-B654-82BFA54C85EF">使用XMLIndex和非结构化组件的准则</a><br>有几个指南可以帮助您将<code class="codeph">XMLIndex</code>与非结构化组件一起使用。
                     </li>
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-B8FCC742-EE57-4B86-8B61-17CC780A5821">XMLIndex与结构化组件一起使用的准则</a><br>有几个指南可以帮助您将<code class="codeph">XMLIndex</code>与结构化组件一起使用。
                     </li>
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-7F44BE51-8F1A-487F-84CD-054E08F7A652">XMLIndex分区和并行</a><br>如果使用范围，列表或散列分区对<code class="codeph">XMLType</code>表或具有<code class="codeph">XMLType</code>列的表进行分区，则还可以在表上创建<code class="codeph">XMLIndex</code>索引。您可以选择确保并行执行索引创建和维护。
                     </li>
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-DCEA65A9-BE27-4291-A2EF-2AA8E9740940">XMLIndex索引的异步（延迟）维护</a><br>您可以推迟维护<span class="italic">仅</span>包含<span class="italic">非结构化</span>组件的<code class="codeph">XMLIndex</code>索引的成本，仅在提交时或数据库负载减少时执行维护。这可以提高DML性能，并且可以在索引同步时启用批量加载非同步索引行。
                     </li>
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-C936D15C-5F86-4EAE-8552-3890ACD819BC">收集基于成本的优化器的XMLIndex对象的统计信息</a><br>Oracle数据库基于成本的优化器确定如何最经济高效地评估给定查询，包括使用哪些索引（如果有）。为了能够准确地执行此操作，您必须收集有关各种数据库对象的统计信息。
                     </li>
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-486E91AE-9FE0-489A-A035-AF320D04350B">与XMLIndex相关的数据字典静态公共视图</a><br>静态公共视图<code class="codeph">USER_INDEXES</code> ， <code class="codeph">ALL_INDEXES</code>和<code class="codeph">DBA_INDEXES</code>提供了有关标准数据库索引的信息。静态公共视图<code class="codeph">USER_XML_INDEXES</code> ， <code class="codeph">ALL_XML_INDEXES</code>和<code class="codeph">DBA_XML_INDEXES</code>提供了有关<code class="codeph">XMLIndex</code>索引的类似信息。</li>
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-BCC7D521-E6B9-4636-98E1-25628BA0FEFC">参数CREATE INDEX和ALTER INDEX的条款</a><br>创建或修改<code class="codeph">XMLIndex</code>索引通常涉及使用带有SQL语句<code class="codeph">CREATE INDEX</code>或<code class="codeph">ALTER INDEX</code>的<code class="codeph">PARAMETERS</code>子句。您可以使用它来详细指定索引特征。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-FE16BE28-035C-49EE-9683-6ED37876C3FC" title="您可以在XML数据上创建索引，专注于经常查询的特定部分，从而提高性能。您可以通过多种方式索引XMLType数据，无论是基于XML模式还是非基于模式，无论您使用何种XMLType存储模型。">XMLType数据的索引</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB4333"></a><div class="props_rev_3"><a id="GUID-9E42982A-CDBB-40BC-86A9-04AAEF9869D7" name="GUID-9E42982A-CDBB-40BC-86A9-04AAEF9869D7"></a><h4 id="ADXDB-GUID-9E42982A-CDBB-40BC-86A9-04AAEF9869D7" class="sect4"><span class="enumeration_section">6.3.1</span> XMLIndex的优点</h4>
                  <div>
                     <p>B树索引可以有利地用于对象关系<code class="codeph">XMLType</code>存储 - 它们通过直接定位底层对象来提供清晰的焦点。但是，在解决使用二进制XML存储的XML文档的详细结构（元素和属性）时，它们通常是无效的。这是<code class="codeph">XMLIndex</code>的特殊领域。
                     </p>
                     <p><code class="codeph">XMLIndex</code>是一个<span class="italic">域</span>索引;它专为XML数据领域而设计。这是一个<span class="italic">逻辑</span>索引。<code class="codeph">XMLIndex</code>索引可用于SQL / XML函数<code class="codeph">XMLQuery</code> ， <code class="codeph">XMLTable</code> ， <code class="codeph">XMLExists</code>和<code class="codeph">XMLCast</code> 。
                     </p>
                     <p>与其他索引方法相比，XMLIndex具有以下优点：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">XMLIndex</code>索引在查询的任何部分都有效;它不限于在<code class="codeph">WHERE</code>子句中使用。对于可能与XML数据一起使用的任何其他类型的索引，情况并非如此。
                           </p>
                        </li>
                        <li>
                           <p>具有非结构化组件的<code class="codeph">XMLIndex</code>索引可以加速对<code class="codeph">SELECT</code>列表数据和<code class="codeph">FROM</code>列表数据的访问，特别是对于XML <span class="italic">片段</span>提取非常有用。不推荐使用的基于函数的索引不能用于提取文档片段。
                           </p>
                        </li>
                        <li>
                           <p>您可以将<code class="codeph">XMLIndex</code>索引与基于XML架构或基于非架构的XMLType数据一起存储为二进制XML。 B树索引仅适用于以对象关系存储的基于XML模式的数据。
                           </p>
                        </li>
                        <li>
                           <p>您可以将<code class="codeph">XMLIndex</code>索引用于具有目标<span class="italic">集合的</span> XPath表达式的搜索，即在文档中多次出现的节点。对于基于函数的索引，情况并非如此。
                           </p>
                        </li>
                        <li>
                           <p>您不需要事先了解可能在查询中使用的XPath表达式。<code class="codeph">XMLIndex</code>索引的非结构化组件可以是完全通用的。对于基于函数的索引，情况并非如此。
                           </p>
                        </li>
                        <li>
                           <p>如果您事先了解要在查询中使用的XPath表达式，那么您可以通过使用<span class="italic">结构化</span> <code class="codeph">XMLIndex</code>组件来提高性能，该组件针对经常查询的固定的，结构化的数据孤岛。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">XMLIndex</code>索引 - 索引创建和索引维护 - 可以使用多个数据库进程并行执行。对于不推荐使用的基于函数的索引，情况并非如此。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-6E6A5BA7-9B84-4E3D-B556-B3B286D26B46">XMLIndex</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4337"></a><a id="ADXDB4336"></a><div class="props_rev_3"><a id="GUID-8153B166-9E19-4A4D-967A-5902ECEB4FA9" name="GUID-8153B166-9E19-4A4D-967A-5902ECEB4FA9"></a><h4 id="ADXDB-GUID-8153B166-9E19-4A4D-967A-5902ECEB4FA9" class="sect4"><span class="enumeration_section">6.3.2</span>结构化和非结构化XMLIndex组件</h4>
                  <div>
                     <p><code class="codeph">XMLIndex</code>用于索引非结构化或半结构化的XML数据，即通常具有很少或没有固定结构的数据。它适用于存储为二进制XML的<code class="codeph">XMLType</code>数据。</p>
                     <p>半结构化XML数据有时可能包含可预测的结构化数据孤岛。一个<code class="codeph">XMLIndex</code>因此索引可以有两个组成部分：一个<strong class="term">结构化部件</strong> ，用于索引这样的岛屿，和<strong class="term">非结构化部件</strong> ，用于具有很少或可变结构索引数据。
                     </p>
                     <p>结构化组件可以帮助查询和使用结构化内容孤岛。一个典型的例子是具有固定字段作者，日期和标题的自由格式规范。非结构化组件可以帮助提取XML片段的查询。可以从给定的<code class="codeph">XMLIndex</code>索引中省略任一组件。
                     </p>
                     <p>与结构化组件不同，非结构化组件是通用的且相对无目标。它适用于以文档为中心的XML数据的一般索引。典型的例子是XML Web文档或书籍章节。</p>
                     <p>您可以使用结构化和非结构化组件创建<code class="codeph">XMLIndex</code>索引。典型的用例是支持每当某些结构化数据也存在时从文档中提取XML片段的查询。非结构化组件用于片段提取。结构化组件用于检查结构化数据的查询谓词（例如，在SQL <code class="codeph">WHERE</code>子句中）。
                     </p>
                     <p>虽然您可以限制非结构化组件仅应用于某些XPath子集，但其路径表会索引可能具有不同标量类型的节点内容，这可能要求您在<code class="codeph">VALUE</code>列上创建多个二级索引以处理不同的数据类型 -查看<a href="indexes-for-XMLType-data.html#GUID-92768F0A-BAD2-407B-BF90-CDE3640FE149" title="即使在创建XMLIndex索引时未为列VALUE指定二级索引，也会在列VALUE上创建默认二级索引。此默认索引具有默认属性 - 特别是，它仅是文本（字符串值）数据的索引。">列VALUE上的二级索引</a> 。对于投影结构化岛屿的查询，单独使用非结构化组件还可能导致涉及多个探测器和其路径表的自联接的低效率。
                     </p>
                     <p>另一方面，结构化组件不适用于涉及很少结构的查询或提取XML片段的查询。使用结构化组件来索引结构化数据孤岛;使用非结构化组件来索引结构很少的数据。</p>
                     <p>最后一行表示<code class="codeph">XMLIndex</code>对不同XML数据用例的适用性。它表明<code class="codeph">XMLIndex</code>适用于半结构化XML数据，但它存储（最后三列）。带有结构化组件的<code class="codeph">XMLIndex</code>索引对于包含结构化岛屿的文档中心数据非常有用（第四列）。
                     </p>
                     <div class="figure" id="GUID-8153B166-9E19-4A4D-967A-5902ECEB4FA9__GUID-E0FC24F4-FE6D-4B58-B641-C34BB1FA25FA">
                        <p class="titleinfigure">图6-1 XML用例和XML索引</p><img src="img/adxdb057.png" width="584" alt="下面是图6-1的描述" title="下面是图6-1的描述" longdesc="img_text/adxdb057.html"><br><a href="img_text/adxdb057.html">“图6-1 XML用例和XML索引”的说明</a></div>
                     <!-- class="figure" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="indexes-for-XMLType-data.html#GUID-2DC9E402-5C06-4AED-B04B-C37B687DB6BB" title="您可以为XML内容的固定结构化岛屿项目的查询创建和使用XMLIndex索引的结构化组件，即使周围数据相对非结构化也是如此。">XMLIndex结构化组件</a></li>
                           <li><a href="indexes-for-XMLType-data.html#GUID-4A427DE6-21F9-45F6-8045-FF37C466A05C" title="与为表示单个XML元素或属性的特定数据库列定义的B树索引或应用于特定结构化文档部分的XMLIndex结构化组件不同，XMLIndex索引的非结构化组件默认为，非常一般。">XMLIndex非结构化组件</a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-8153B166-9E19-4A4D-967A-5902ECEB4FA9__GUID-ED6C9B32-3B30-4707-B35A-7D0AAE4379D7">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="indexes-for-XMLType-data.html#GUID-9E42982A-CDBB-40BC-86A9-04AAEF9869D7" title="B树索引可以有利地用于对象关系XMLType存储 - 它们通过直接定位底层对象来提供清晰的焦点。但是，在解决使用二进制XML存储的XML文档的详细结构（元素和属性）时，它们通常是无效的。这是XMLIndex的特殊领域。">XMLIndex的优点，</a>可以概括每个<code class="codeph">XMLIndex</code>组件类型提供的优势</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-6E6A5BA7-9B84-4E3D-B556-B3B286D26B46">XMLIndex</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4338"></a><div class="props_rev_3"><a id="GUID-2DC9E402-5C06-4AED-B04B-C37B687DB6BB" name="GUID-2DC9E402-5C06-4AED-B04B-C37B687DB6BB"></a><h4 id="ADXDB-GUID-2DC9E402-5C06-4AED-B04B-C37B687DB6BB" class="sect4"><span class="enumeration_section">6.3.3</span> XMLIndex结构化组件</h4>
                  <div>
                     <p>您可以为XML内容的固定结构化岛屿项目的查询创建和使用<code class="codeph">XMLIndex</code>索引的结构化组件，即使周围数据相对非结构化也是如此。
                     </p>
                     <p>结构化的<code class="codeph">XMLIndex</code>组件以<span class="italic">关系</span>格式组织这些岛。在此，它类似于SQL / XML <span class="italic">函数</span> <code class="codeph">XMLTable</code> ，用于定义结构化组件的语法反映了这种相似性。用于存储索引数据的关系表是数据类型感知的，并且每列可以是不同的标量数据类型。
                     </p>
                     <p>因此，您可以考虑创建<code class="codeph">XMLIndex</code>索引的结构化组件的行为， <code class="codeph">XMLIndex</code> XML数据的结构化部分<span class="italic">分解</span>为关系格式。这与以下方式的<code class="codeph">XMLType</code>的对象关系存储模型不同：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>结构化索引组件<span class="italic">显式</span>分解您指定的数据的特定<span class="italic">部分</span> - 您通常查询的部分。对象关系<code class="codeph">XMLType</code>存储涉及自动分解整个<code class="codeph">XMLType</code>表或列。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">XMLIndex</code>索引的结构化组件适用于基于XML模式和非基于模式的数据。对象关系<code class="codeph">XMLType</code>存储仅适用于基于XML架构的数据。
                           </p>
                        </li>
                        <li>
                           <p>除了作为索引的<code class="codeph">XMLType</code>数据之外，还存储结构化<code class="codeph">XMLIndex</code>组件的分解数据，而不是<code class="codeph">XMLType</code>数据本身的存储模型。
                           </p>
                        </li>
                        <li>
                           <p>对于结构化<code class="codeph">XMLIndex</code>组件，可以多次投影相同的数据，作为不同数据类型的列。
                           </p>
                        </li>
                     </ul>
                     <p>用于<code class="codeph">XMLIndex</code>索引的结构化组件的索引内容表是索引的一部分，但由于它们是普通的关系表，因此您可以使用任何标准关系索引（包括满足主键和外键的<span class="italic">索引）对</span>它们进行索引。关键约束。您还可以使用域索引（例如Oracle Text <code class="codeph">CONTEXT</code>索引）对它们编制索引。
                     </p>
                     <p>查看<code class="codeph">XMLIndex</code>索引的结构化组件的另一种方法是，它充当<span class="italic">基于函数</span>的<span class="italic">通用索引</span> 。基于函数的索引类似于只有一个关系列的结构化<code class="codeph">XMLIndex</code>组件。
                     </p>
                     <p>如果您发现对于特定应用程序，您正在创建多个基于函数的索引，那么请考虑使用带有结构化组件的<code class="codeph">XMLIndex</code>索引。在结构化索引组件的列上创建B树索引。
                     </p>
                     <div class="infoboxnote" id="GUID-2DC9E402-5C06-4AED-B04B-C37B687DB6BB__GUID-A6499653-7B31-4560-9163-BB8CA6299F98">
                        <p class="notep1">注意：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>通常可以自动重写使用SQL / XML函数<code class="codeph">XMLTable</code>查询，以使用<code class="codeph">XMLIndex</code>结构化组件的关系索引表。特别是，对<code class="codeph">XMLTable</code>虚拟表的列进行操作的SQL <code class="codeph">ORDER BY</code> ， <code class="codeph">GROUP BY</code>和窗口构造将重写为在结构化<code class="codeph">XMLIndex</code>组件的关系索引表的实列上运行的相同构造。
                              </p>
                              <p>用于<code class="codeph">XMLIndex</code>结构化索引的关系表还包含一些内部的系统定义列。这些内部列可能在将来发生变化，因此不要编写依赖于对其存在或内容的任何假设的代码。
                              </p>
                           </li>
                           <li>
                              <p>在SQL <code class="codeph">TABLE</code>集合表达式中使用Oracle SQL函数<code class="codeph">XMLSequence</code>查询（即<code class="codeph">TABLE (XMLSequence(...))</code> <span class="italic">不会被</span>重写以使用<code class="codeph">XMLIndex</code>结构化组件的索引表。Oracle Database 11g第2版中<span class="italic">不推荐使用</span> Oracle SQL函数<code class="codeph">XMLSequence</code> ;使用标准的SQL / XML函数<code class="codeph">XMLTable</code> 。
                              </p>
                              <p>有关SQL <code class="codeph">TABLE</code>集合表达式的信息，请参见<a href="../sqlrf/SELECT.html#SQLRF30047" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-74E9F37F-4593-4EC1-85B4-5516CF95FD65">忽略索引内容表;它们是透明的</a><br>虽然<code class="codeph">XMLIndex</code>结构化组件的索引内容表是普通的关系表，但它们也是<span class="italic">只读的</span> ：您不能添加或删除其列或修改（插入，更新或删除）其行。
                        </li>
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-E6F787DD-ED63-41FE-ADB4-7FA8F646B254">XMLIndex结构化组件的数据类型注意事项</a><br>用于<code class="codeph">XMLIndex</code>结构化组件的关系表使用SQL数据类型。查询中使用的XQuery表达式使用XML数据类型（XML Schema数据类型和XQuery数据类型）。
                        </li>
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-44226DE7-B9EB-4729-9989-F957D65BEE11">Exchange分区和XMLIndex</a><br>在交换分区中，您将表与另一个表的分区交换。第一个表必须与第二个表的分区具有相同的结构，并与之交换。对于使用<code class="codeph">XMLIndex</code>索引进行索引，这两个表也必须类似。
                        </li>
                     </ul>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="indexes-for-XMLType-data.html#GUID-476331FD-F58B-4980-BECD-015F0A794AC9" title="XMLIndex结构化组件为XML数据中的特定结构岛编制索引。">XMLIndex与结构化组件的使用</a></li>
                           <li><a href="xquery-and-XML-DB.html#GUID-4805CF1C-A00D-4B88-AF2E-00A9DB6F3392" title="SQL / XML函数XMLQuery，XMLTable，XMLExists和XMLCast由SQL / XML标准定义为SQL和XQuery语言之间的通用接口。">SQL / XML函数XMLQUERY，XMLTABLE，XMLExists和XMLCast</a></li>
                           <li><a href="indexes-for-XMLType-data.html#GUID-48E55F3F-A918-4C85-A6B0-0287611C21E1" title="在Oracle Database 11g第2版（11.2）之前的版本中，当XPath表达式以单个节点为目标时，基于函数的索引有时适合与XMLType数据一起使用。Oracle建议您使用XMLIndex的结构化组件。">基于函数的索引已弃用XMLType</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-6E6A5BA7-9B84-4E3D-B556-B3B286D26B46">XMLIndex</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB4339"></a><div class="props_rev_3"><a id="GUID-74E9F37F-4593-4EC1-85B4-5516CF95FD65" name="GUID-74E9F37F-4593-4EC1-85B4-5516CF95FD65"></a><h5 id="ADXDB-GUID-74E9F37F-4593-4EC1-85B4-5516CF95FD65" class="sect5"><span class="enumeration_section">6.3.3.1</span>忽略索引内容表;它们是透明的</h5>
                     <div>
                        <p>虽然<code class="codeph">XMLIndex</code>结构化组件的索引内容表是普通的关系表，但它们也是<span class="italic">只读的</span> ：您不能添加或删除其列或修改（插入，更新或删除）其行。
                        </p>
                        <p>因此，您通常可以忽略关系索引内容表。除了对它们进行<code class="codeph">DESCRIBE</code>并在它们上创建（辅助）索引之外，您无法访问它们。您无需明确收集有关它们的统计信息。您只需要收集有关<code class="codeph">XMLIndex</code>索引本身或定义了<code class="codeph">XMLIndex</code>索引的基表的统计信息;在索引内容表上透明地收集和维护统计信息。
                        </p>
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="indexes-for-XMLType-data.html#GUID-C936D15C-5F86-4EAE-8552-3890ACD819BC" title="Oracle数据库基于成本的优化器确定如何最经济高效地评估给定查询，包括使用哪些索引（如果有）。为了能够准确地执行此操作，您必须收集有关各种数据库对象的统计信息。">收集基于成本的优化器的XMLIndex对象的统计信息</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-2DC9E402-5C06-4AED-B04B-C37B687DB6BB" title="您可以为XML内容的固定结构化岛屿项目的查询创建和使用XMLIndex索引的结构化组件，即使周围数据相对非结构化也是如此。">XMLIndex结构化组件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4341"></a><a id="ADXDB4342"></a><a id="ADXDB4343"></a><a id="ADXDB4340"></a><div class="props_rev_3"><a id="GUID-E6F787DD-ED63-41FE-ADB4-7FA8F646B254" name="GUID-E6F787DD-ED63-41FE-ADB4-7FA8F646B254"></a><h5 id="ADXDB-GUID-E6F787DD-ED63-41FE-ADB4-7FA8F646B254" class="sect5"><span class="enumeration_section">6.3.3.2</span> XMLIndex结构化组件的数据类型注意事项</h5>
                     <div>
                        <p>用于<code class="codeph">XMLIndex</code>结构化组件的关系表使用SQL数据类型。查询中使用的XQuery表达式使用XML数据类型（XML Schema数据类型和XQuery数据类型）。
                        </p>
                        <p>XQuery类型规则可以自动更改子表达式的数据类型，以确保一致性和类型检查。例如，如果使用XPath表达式<code class="codeph">/PurchaseOrder/LineItem[@ItemNumber = 25]</code>查询的文档不是基于XML模式的，则子表达式<code class="codeph">@ItemNumber</code>是无类型的，然后由XQuery自动转换为<code class="codeph">xs:double</code> <code class="codeph">=</code>比较运算符。要使用<code class="codeph">XMLIndex</code>结构化组件索引此数据，必须使用<code class="codeph">BINARY_DOUBLE</code>作为SQL数据类型。
                        </p>
                        <p>这是一般规则。对于具有应用于查询的结构化组件的<code class="codeph">XMLIndex</code>索引，数据类型必须对应。<a href="indexes-for-XMLType-data.html#GUID-E6F787DD-ED63-41FE-ADB4-7FA8F646B254__BCGFIFFH" title="此表显示XMLIndex的XML和SQL数据类型对应关系。">表6-5</a>显示了数据类型的对应关系。
                        </p>
                        <div class="tblformal" id="GUID-E6F787DD-ED63-41FE-ADB4-7FA8F646B254__BCGFIFFH">
                           <p class="titleintable">表6-5 XMLIndex的XML和SQL数据类型对应关系</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="XMLInfo的XML和SQL数据类型对应关系" width="100%" border="1" summary="This table shows the XML and SQL data type correspondence for XMLIndex." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="50%" id="d34642e2257">XML数据类型</th>
                                    <th align="left" valign="bottom" width="50%" id="d34642e2260">SQL数据类型</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="50%" id="d34642e2265" headers="d34642e2257 ">
                                       <p><code class="codeph">XS：小数</code></p>
                                    </td>
                                    <td align="left" valign="top" width="50%" headers="d34642e2265 d34642e2260 ">
                                       <p><code class="codeph">INTEGER</code>或<code class="codeph">NUMBER</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="50%" id="d34642e2277" headers="d34642e2257 ">
                                       <p><code class="codeph">XS：双</code></p>
                                    </td>
                                    <td align="left" valign="top" width="50%" headers="d34642e2277 d34642e2260 ">
                                       <p><code class="codeph">BINARY_DOUBLE</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="50%" id="d34642e2286" headers="d34642e2257 ">
                                       <p><code class="codeph">XS：浮法</code></p>
                                    </td>
                                    <td align="left" valign="top" width="50%" headers="d34642e2286 d34642e2260 ">
                                       <p><code class="codeph">BINARY_FLOAT</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="50%" id="d34642e2295" headers="d34642e2257 ">
                                       <p><code class="codeph">XS：日期</code></p>
                                    </td>
                                    <td align="left" valign="top" width="50%" headers="d34642e2295 d34642e2260 ">
                                       <p><code class="codeph">DATE</code> ， <code class="codeph">TIMESTAMP WITH TIMEZONE</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="50%" id="d34642e2307" headers="d34642e2257 ">
                                       <p><code class="codeph">XS：日期时间</code></p>
                                    </td>
                                    <td align="left" valign="top" width="50%" headers="d34642e2307 d34642e2260 ">
                                       <p><code class="codeph">TIMESTAMP</code> ， <code class="codeph">TIMESTAMP WITH TIMEZONE</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="50%" id="d34642e2319" headers="d34642e2257 ">
                                       <p><code class="codeph">XS：dayTimeDuration</code></p>
                                    </td>
                                    <td align="left" valign="top" width="50%" headers="d34642e2319 d34642e2260 ">
                                       <p><code class="codeph">间隔第二天</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="50%" id="d34642e2328" headers="d34642e2257 ">
                                       <p><code class="codeph">XS：yearMonthDuration</code></p>
                                    </td>
                                    <td align="left" valign="top" width="50%" headers="d34642e2328 d34642e2260 ">
                                       <p><code class="codeph">间隔年至月</code> 
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnote" id="GUID-E6F787DD-ED63-41FE-ADB4-7FA8F646B254__GUID-AEACAF8C-2578-483E-80BE-C8C5B1593678">
                           <p class="notep1">注意：</p>
                           <p>如果XML数据类型是<code class="codeph">xs:date</code>或<code class="codeph">xs:dateTime</code> ，并且如果您知道要查询的数据以及要为其创建索引的数据<span class="italic">不</span>包含时区组件，那么可以使用SQL提高性能数据类型<code class="codeph">DATE</code>或<code class="codeph">TIMESTAMP</code> 。如果数据可能包含时区组件，则必须使用SQL数据类型<code class="codeph">TIMESTAMP WITH TIMEZONE</code> 。</p>
                        </div>
                        <p>如果涉及的XML和SQL数据类型没有内置的一对一对应关系，那么必须使它们对应（根据<a href="indexes-for-XMLType-data.html#GUID-E6F787DD-ED63-41FE-ADB4-7FA8F646B254__BCGFIFFH" title="此表显示XMLIndex的XML和SQL数据类型对应关系。">表6-5</a> ），以便为您的查询选择索引。有两种方法可以做到这一点：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">使索引对应于查询 -</span>定义（或重新定义）结构化索引组件中的列，以使其对应于XML数据类型。例如，如果要索引的查询使用XML数据类型<code class="codeph">xs:double</code> ，则定义索引以使用相应的SQL数据类型<code class="codeph">BINARY_DOUBLE</code> 。</p>
                           </li>
                           <li>
                              <p><span class="bold">使查询对应于索引 -</span>在查询中，将XQuery表达式的相关部分显式转换为与索引内容表中使用的SQL数据类型对应的数据类型。
                              </p>
                           </li>
                        </ul>
                        <p><a href="indexes-for-XMLType-data.html#GUID-E6F787DD-ED63-41FE-ADB4-7FA8F646B254__BCGBBEIB">示例6-1</a>和<a href="indexes-for-XMLType-data.html#GUID-E6F787DD-ED63-41FE-ADB4-7FA8F646B254__BCGIIDAA">示例6-2</a>显示了如何在查询中转换XQuery表达式以匹配索引内容表中使用的SQL数据类型。
                        </p>
                        <p>请注意，数字<code class="codeph">25</code>在这两个示例中扮演不同的角色，即使在这两种情况下都是购买订单项目编号。在<a href="indexes-for-XMLType-data.html#GUID-E6F787DD-ED63-41FE-ADB4-7FA8F646B254__BCGBBEIB">例6-1中</a> ， <code class="codeph">25</code>是数据类型为<code class="codeph">INTEGER</code>的SQL号;在<a href="indexes-for-XMLType-data.html#GUID-E6F787DD-ED63-41FE-ADB4-7FA8F646B254__BCGIIDAA">例6-2中</a> ， <code class="codeph">25</code>是XQuery数据类型<code class="codeph">xs:decimal</code> 。
                        </p>
                        <p>在<a href="indexes-for-XMLType-data.html#GUID-E6F787DD-ED63-41FE-ADB4-7FA8F646B254__BCGBBEIB">例6-1中</a> ， <code class="codeph">XMLQuery</code>结果被转换为SQL类型<code class="codeph">INTEGER</code> ，它与SQL值25进行比较。在<a href="indexes-for-XMLType-data.html#GUID-E6F787DD-ED63-41FE-ADB4-7FA8F646B254__BCGIIDAA">例6-2中</a> ，属性<code class="codeph">ItemNumber</code>的值被<code class="codeph">ItemNumber</code>为（在XQuery中）XML数据类型<code class="codeph">xs:decimal</code> ，它与XQuery值25进行比较，并且对应于用于索引的SQL数据类型（ <code class="codeph">INTEGER</code> ）。因此，在这些示例中存在两种不同类型的数据类型转换，但它们都转换查询数据以使其与索引内容表类型兼容。
                        </p>
                        <div class="infoboxnotealso" id="GUID-E6F787DD-ED63-41FE-ADB4-7FA8F646B254__GUID-D1F567CA-D4DF-4004-A406-D522210CFE7A">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="XML-Schema-and-query-object-relational-storage.html#GUID-844D686D-D95A-4C5B-8624-71BABDBF1EF5" title="您可以使用PL / SQL包DBMS_XMLSCHEMA将XML Schema属性和元素的数据类型映射到SQL数据类型。">使用DBMS_XMLSCHEMA将XML模式数据类型映射到SQL数据类型，</a>以获取有关XML模式数据类型和SQL数据类型之间的内置对应关系的信息</p>
                        </div>
                        <div class="example" id="GUID-E6F787DD-ED63-41FE-ADB4-7FA8F646B254__BCGBBEIB">
                           <p class="titleinexample">示例6-1使查询数据与索引数据兼容 -  SQL Cast</p><pre class="oac_no_warn" dir="ltr">SELECT count（*）FROM purchaseorder WHERE <span class="bold">XMLCast</span> （XMLQuery（'$ p / PurchaseOrder / LineItem / @ ItemNumber'PASSING OBJECT_VALUE AS“p”RETURNING CONTENT） <span class="bold">AS INTEGER</span> ）= 25;</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-E6F787DD-ED63-41FE-ADB4-7FA8F646B254__BCGIIDAA">
                           <p class="titleinexample">示例6-2使查询数据与索引数据兼容 -  XQuery Cast</p><pre class="oac_no_warn" dir="ltr">SELECT count（*）FROM purchaseorder WHERE XMLExists（'$ p / PurchaseOrder / LineItem [ <span class="bold">xs：decimal</span> （@ItemNumber）= 25]'PASSING OBJECT_VALUE AS“p”）;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-2DC9E402-5C06-4AED-B04B-C37B687DB6BB" title="您可以为XML内容的固定结构化岛屿项目的查询创建和使用XMLIndex索引的结构化组件，即使周围数据相对非结构化也是如此。">XMLIndex结构化组件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB6236"></a><a id="ADXDB6235"></a><div class="props_rev_3"><a id="GUID-44226DE7-B9EB-4729-9989-F957D65BEE11" name="GUID-44226DE7-B9EB-4729-9989-F957D65BEE11"></a><h5 id="ADXDB-GUID-44226DE7-B9EB-4729-9989-F957D65BEE11" class="sect5"><span class="enumeration_section">6.3.3.3</span> Exchange分区和XMLIndex</h5>
                     <div>
                        <p>在交换分区中，您将表与另一个表的分区交换。第一个表必须与第二个表的分区具有相同的结构，并与之交换。对于使用<code class="codeph">XMLIndex</code>索引进行索引，这两个表也必须类似。
                        </p>
                        <p>必须满足以下条件之一：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>两个表都没有<code class="codeph">XMLIndex</code>索引。
                              </p>
                           </li>
                           <li>
                              <p>两者都有一个<code class="codeph">XMLIndex</code>索引，并且以下之一是真的：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>两个索引都没有结构化组件。</p>
                                 </li>
                                 <li>
                                    <p>两个索引都有一个结构化组件。</p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <p>如果这些条件都不成立，则<span class="italic">无法</span>执行交换分区。
                        </p>
                        <p>如果两个表都具有带结构化组件的<code class="codeph">XMLIndex</code>索引，那么在一般情况下，您必须在调用<code class="codeph">ALTER TABLE EXCHANGE PARTITION</code>之前执行一些预处理，并且必须在调用它之后执行一些后处理。否则，交换分区操作会引发错误。
                        </p>
                        <p>您可以在包<code class="codeph">DBMS_XMLSTORAGE_MANAGE</code>使用PL / SQL过程<span class="bold"><code class="codeph">exchangePreProc</code></span>和<span class="bold"><code class="codeph">exchangePostProc</code></span>来执行此预处理和后处理，如<a href="indexes-for-XMLType-data.html#GUID-44226DE7-B9EB-4729-9989-F957D65BEE11__CEGCBJIA">例6-3所示</a> 。其中的每个<code class="codeph">XMLType</code>表<code class="codeph">table</code>和<code class="codeph">exchange_table</code>都具有<code class="codeph">XMLIndex</code>索引，该索引具有结构化组件。
                        </p>
                        <p>在<span class="italic">引用</span>分区表的特殊情况下， <span class="italic">涉及</span>外键约束，因此事情有点复杂。在这种情况下，您使用PL / SQL过程<span class="bold"><code class="codeph">refPartitionExchangeIn</code></span>或<span class="bold"><code class="codeph">refPartitionExchangeOut</code></span>将数据加载到（交换输入）或输出（交换）分区表。
                        </p>
                        <p><a href="indexes-for-XMLType-data.html#GUID-44226DE7-B9EB-4729-9989-F957D65BEE11__EXCHANGE-PARTITIONINGREFERENCE-PART-2E0AB5D7">例6-4</a>说明了这一点，将交换表<code class="codeph">parent_ex</code>和<code class="codeph">child_ex</code>数据加载到<code class="codeph">parent</code>表和<code class="codeph">child</code>表的基表中。<a href="indexes-for-XMLType-data.html#GUID-44226DE7-B9EB-4729-9989-F957D65BEE11__DATAUSEDINEXCHANGE-PARTITIONINGFORR-2E0AB9D1">例6-5</a>显示了表和索引定义。
                        </p>
                        <div class="infoboxnotealso" id="GUID-44226DE7-B9EB-4729-9989-F957D65BEE11__GUID-4A0F5F27-7CB6-4BDE-8979-1E74545280D8">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../sqlrf/ALTER-TABLE.html#SQLRF53492" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adxdb&amp;id=ADDCI4492" target="_blank"><span><cite>Oracle数据库数据盒开发人员指南</cite></span></a> ，了解有关对具有域索引的表使用<code class="codeph">ALTER TABLE EXCHANGE PARTITION</code>一般信息（ <code class="codeph">XMLIndex</code>是域索引）</p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_XMLSTORAGE_MANAGE.html#ARPLS-GUID-3E8838A7-1B14-4388-A588-DAEE9C5CD469" target="_blank"><span><cite>有关Oracle</cite></span></a> <code class="codeph">DBMS_XMLSTORAGE_MANAGE</code>包中的过程<code class="codeph">exchangePreProc</code> ， <code class="codeph">exchangePostProc</code> ， <code class="codeph">refPartitionExchangeIn</code>和<code class="codeph">refPartitionExchangeIOut</code>信息，请<code class="codeph">refPartitionExchangeIn</code> <a href="../arpls/DBMS_XMLSTORAGE_MANAGE.html#ARPLS-GUID-3E8838A7-1B14-4388-A588-DAEE9C5CD469" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a> 。</p>
                              </li>
                           </ul>
                        </div>
                        <div class="example" id="GUID-44226DE7-B9EB-4729-9989-F957D65BEE11__CEGCBJIA">
                           <p class="titleinexample">示例6-3具有XMLIndex结构化组件的Exchange分区表</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_XMLSTORAGE_MANAGE.exchangePreProc（USER，'table'）; EXEC DBMS_XMLSTORAGE_MANAGE.exchangePreProc（USER，'exchange_table'）; ALTER TABLE表EXCHANGE PARTITION分区WITH TABLE exchange_table WITH VALIDATION UPDATE INDEXES; EXEC DBMS_XMLSTORAGE_MANAGE.exchangePostProc（USER，'table'）; EXEC DBMS_XMLSTORAGE_MANAGE.exchangePostProc（USER，'exchange_table'）;</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-44226DE7-B9EB-4729-9989-F957D65BEE11__EXCHANGE-PARTITIONINGREFERENCE-PART-2E0AB5D7">
                           <p class="titleinexample">示例6-4使用XMLIndex的Exchange-Partitioning参考分区表</p>
                           <p>在这个例子中：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="bold"><code class="codeph">parent</code></span>是分区基表。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold"><code class="codeph">child</code></span>是<code class="codeph">XMLType</code>列<code class="codeph">xcol</code>的<span class="italic">reference</span> -partitioned子表。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold"><code class="codeph">child_xidx</code></span>是一个带有结构化组件的<code class="codeph">XMLIndex</code>索引，在table <code class="codeph">child</code>列<code class="codeph">xcol</code>上定义。这是一个已分区的本地索引。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold"><code class="codeph">parent_ex</code></span>是基表<code class="codeph">parent</code>的交换表。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold"><code class="codeph">child_ex</code></span>是子表<code class="codeph">child</code>的交换表。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold"><code class="codeph">child_xidx_ex</code></span>是一个<code class="codeph">XMLIndex</code>索引与结构化部件，对列定义<code class="codeph">xcol</code>表<code class="codeph">child_ex</code> 。这<span class="italic">不是</span>本地索引（与索引<code class="codeph">child_xidx</code>的情况不同）。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold"><code class="codeph">USER</code></span>是表的所有者（数据库模式）。
                                 </p>
                              </li>
                           </ul>
                           <p>此示例执行交换操作，将数据从交换表加载到分区表中。将数据从分区表加载到交换表中的交换操作看起来是相同的，除了它将使用过程<code class="codeph">refPartitionExchangeOut</code> 。该程序通过相关表格和必要的<code class="codeph">ALTER TABLE</code> ...<code class="codeph">EXCHANGE</code>声明。
                           </p><pre class="pre codeblock"><code>EXEC DBMS_XMLSTORAGE_MANAGE。 <span class="bold">refPartitionExchangeIn</span> （USER，'parent'，'child'，'parent_ex'，'child_ex'，'ALTER TABLE <span class="bold">parent</span> EXCHANGE PARTITION part_all WITH TABLE <span class="bold">parent_ex</span> INCLUDING INDEXES WITH VALIDATION UPDATE INDEXES'，'ALTER TABLE <span class="bold">child</span> EXCHANGE PARTITION part_all WITH TABLE <span class="bold">child_ex</span> INCLUDING INDEXES带有验证更新指数'）;</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-44226DE7-B9EB-4729-9989-F957D65BEE11__DATAUSEDINEXCHANGE-PARTITIONINGFORR-2E0AB9D1">
                           <p class="titleinexample">示例6-5参考分区表的Exchange分区示例中使用的数据</p>
                           <p>此示例显示了<a href="indexes-for-XMLType-data.html#GUID-44226DE7-B9EB-4729-9989-F957D65BEE11__EXCHANGE-PARTITIONINGREFERENCE-PART-2E0AB5D7">示例6-4中</a>使用的表和索引的创建操作。
                           </p><pre class="pre codeblock"><code>CREATE TABLE <span class="bold">parent</span> （id NUMBER PRIMARY KEY，创建DATE）PARTITION BY RANGE（已创建）（PARTITION part_2014 VALUES比（to_date（'01 -jan-2015'，'dd-mon-yyyy'）），PARTITION part_all VALUES少于（MAXVALUE））;</code></pre><pre class="pre codeblock"><code>CREATE TABLE <span class="bold">子</span> （parent_id NUMBER NOT NULL，xcol XMLType，CONSTRAINT child_tab_fk FOREIGN KEY（parent_id） <span class="bold">REFERENCES</span> parent（id）ENABLE VALIDATE）XMLType COLUMN xcol STORE AS BINARY XML <span class="bold">PARTITION BY REFERENCE</span> （child_tab_fk）;</code></pre><pre class="pre codeblock"><code>CREATE INDEX <span class="bold">child_xidx</span> ON child p（xcol）INDEXTYPE IS XDB.XMLIndex PARAMETERS（'XMLTable po_index_tab''purchaseorder''COLUMNS pid NUMBER（4）PATH''@ id'''）LOCAL;</code></pre><pre class="pre codeblock"><code>CREATE TABLE <span class="bold">parent_ex</span> （id NUMBER PRIMARY KEY，创建DATE）;</code></pre><pre class="pre codeblock"><code>CREATE TABLE <span class="bold">child_ex</span> （parent_id NUMBER NOT NULL，xcol XMLType，CONSTRAINT child_tab_fk1 FOREIGN KEY（parent_id） <span class="bold">REFERENCES</span> parent_ex（id）ENABLE VALIDATE）XMLType COLUMN xcol STORE AS BINARY XML;</code></pre><pre class="pre codeblock"><code>CREATE INDEX <span class="bold">child_ex_xidx</span> ON child_ex p（xcol）INDEXTYPE IS XDB.XMLIndex PARAMETERS（'XMLTable po_index_tab_ex''cowderorder''COLUMNS pid NUMBER（4）PATH''@ id'''）;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-2DC9E402-5C06-4AED-B04B-C37B687DB6BB" title="您可以为XML内容的固定结构化岛屿项目的查询创建和使用XMLIndex索引的结构化组件，即使周围数据相对非结构化也是如此。">XMLIndex结构化组件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADXDB4345"></a><a id="ADXDB4346"></a><a id="ADXDB4344"></a><div class="props_rev_3"><a id="GUID-4A427DE6-21F9-45F6-8045-FF37C466A05C" name="GUID-4A427DE6-21F9-45F6-8045-FF37C466A05C"></a><h4 id="ADXDB-GUID-4A427DE6-21F9-45F6-8045-FF37C466A05C" class="sect4"><span class="enumeration_section">6.3.4</span> XMLIndex非结构化组件</h4>
                  <div>
                     <p>不同于B树索引，这可以定义为特定数据库列代表单个XML元素或属性，或<code class="codeph">XMLIndex</code>结构化部件，它适用于具体的，结构化文档的部件，一个的非结构化部件<code class="codeph">XMLIndex</code>指数是，默认情况下，非常一般。
                     </p>
                     <p>除非通过详细说明要在索引中使用或不使用的特定XPath表达式来指定更窄的焦点，否则非结构化<code class="codeph">XMLIndex</code>组件将应用于XML数据的<span class="italic">所有可能的XPath表达式</span> 。
                     </p>
                     <p><code class="codeph">XMLIndex</code>索引的非结构化组件有三个逻辑部分：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><strong class="term">路径索引</strong> - 索引文档的XML <span class="italic">标记</span>并标识其各种文档<span class="italic">片段</span> 。
                           </p>
                        </li>
                        <li>
                           <p><strong class="term">订单索引</strong> - 索引XML文档中节点的层次结构<span class="italic">位置</span> 。它跟踪父子，祖先 - 后代和兄弟关系。
                           </p>
                        </li>
                        <li>
                           <p><strong class="term">值索引</strong> - 索引XML文档的<span class="italic">值</span> 。它通过值相等或值范围提供查找。值索引用于查询谓词（ <code class="codeph">WHERE</code>子句）中的值。
                           </p>
                        </li>
                     </ul>
                     <p><code class="codeph">XMLIndex</code>索引的非结构化组件在路径表上使用路径表和一组（本地）二级索引，这些索引实现上述逻辑部分。自动创建两个辅助索引：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>一个<strong class="term">pikey索引</strong> ，它实现路径和顺序的逻辑索引。
                           </p>
                        </li>
                        <li>
                           <p>实<strong class="term">值索引</strong> ，实现逻辑值索引。
                           </p>
                        </li>
                     </ul>
                     <p>您可以修改这两个索引或创建其他二级索引。路径表及其二级索引全部由创建<code class="codeph">XMLIndex</code>索引的基表的所有者拥有。
                     </p>
                     <p>pikey索引将路径和顺序关系一起处理，这在大多数情况下提供了最佳性能。如果您在某些特定情况下发现在考虑应该使用值索引时，您可以将pikey索引替换为路径和顺序关系的单独索引。这些（可选）索引分别称为<strong class="term">路径ID</strong>和<strong class="term">顺序密钥</strong>索引。为获得最佳结果，如果在某些情况下发现pikey索引不足以满足您的需求，请与Oracle支持部门联系。
                     </p>
                     <p>路径表包含XML文档中每个索引节点的一行。对于每个索引节点， <strong class="term">路径表</strong>存储：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>存储文档的表的相应<span class="italic">rowid</span> 。
                           </p>
                        </li>
                        <li>
                           <p><span class="italic">定位器</span> ，提供对相应文档片段的快速访问。对于基于XML模式的数据的二进制XML存储，它还存储数据类型信息。
                           </p>
                        </li>
                        <li>
                           <p><span class="italic">订单键</span> ，用于记录文档中节点的层次结构位置。您可以将此视为Dewey十进制密钥，如图书馆编目和Internet协议SNMP中使用的那样。在这样的系统中，密钥<code class="codeph">3.21.5</code>表示文档根节点的第三个孩子的第二十一个孩子的第五个孩子的节点位置。
                           </p>
                        </li>
                        <li>
                           <p>表示节点的XPath <span class="italic">路径</span>的标识符。
                           </p>
                        </li>
                        <li>
                           <p>节点的有效<span class="italic">文本值</span> 。
                           </p>
                        </li>
                     </ul>
                     <p><a href="indexes-for-XMLType-data.html#GUID-4A427DE6-21F9-45F6-8045-FF37C466A05C__CHDICGFB" title="此表显示XMLIndex路径表中的主要信息。">表6-6</a>显示了路径表中的主要信息<a id="fn_2" name="fn_2" href="#fn_2" the="" actual="" path="" table="" implementation="" may="" be="" slightly="" different=")" ="" onclick="footdisplay(2, "><sup>Foot 2</sup></a> 。
                     </p>
                     <div class="tblformal" id="GUID-4A427DE6-21F9-45F6-8045-FF37C466A05C__CHDICGFB">
                        <p class="titleintable">表6-6 XMLIndex路径表</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="XMLIndex路径表" width="100%" border="1" summary="This table shows the main information in the XMLIndex Path Table." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d34642e3097">柱</th>
                                 <th align="left" valign="bottom" id="d34642e3100">数据类型</th>
                                 <th align="left" valign="bottom" id="d34642e3103">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d34642e3108" headers="d34642e3097 ">
                                    <p><code class="codeph">PATHID</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e3108 d34642e3100 ">
                                    <p><code class="codeph">RAW（8）</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e3108 d34642e3103 ">
                                    <p>节点的XPath路径的唯一标识符。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d34642e3120" headers="d34642e3097 ">
                                    <p><code class="codeph">RID</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e3120 d34642e3100 ">
                                    <p><code class="codeph">ROWID</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e3120 d34642e3103 ">
                                    <p>表的Rowid用于存储XML数据。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d34642e3132" headers="d34642e3097 ">
                                    <p><code class="codeph">ORDER_KEY</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e3132 d34642e3100 ">
                                    <p><code class="codeph">RAW（1000）</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e3132 d34642e3103 ">
                                    <p>用于标识节点的层次结构位置的十进制顺序键。（保留文件排序。）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d34642e3144" headers="d34642e3097 ">
                                    <p><code class="codeph">定位器</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e3144 d34642e3100 ">
                                    <p><code class="codeph">RAW（2000）</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e3144 d34642e3103 ">
                                    <p>片段位置信息。用于片段提取。对于基于XML模式的数据的二进制XML存储，数据类型信息也存储在此处。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d34642e3156" headers="d34642e3097 ">
                                    <p><code class="codeph">值</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e3156 d34642e3100 ">
                                    <p><code class="codeph">VARCHAR2（4000）</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e3156 d34642e3103 ">
                                    <p>有效的文本值是节点。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>pikey索引使用路径表列<code class="codeph">PATHID</code> ， <code class="codeph">RID</code>和<code class="codeph">ORDER_KEY</code>来表示路径和顺序索引。可选的路径id索引使用列<code class="codeph">PATHID</code>和<code class="codeph">RID</code>来表示路径索引。值索引是<code class="codeph">VALUE</code>列的索引。
                     </p>
                     <p><a href="indexes-for-XMLType-data.html#GUID-4A427DE6-21F9-45F6-8045-FF37C466A05C__CHDJGGDH">例6-6</a>探讨了两个采购订单文档的路径表的内容。
                     </p>
                     <div class="example" id="GUID-4A427DE6-21F9-45F6-8045-FF37C466A05C__CHDJGGDH">
                        <p class="titleinexample">示例6-6两个采购订单的路径表内容</p><pre class="pre codeblock"><code>&lt;PurchaseOrder&gt; &lt;参考&gt; SBELL-2002100912333601PDT &lt;/ Reference&gt; &lt;Actions&gt; &lt;Action&gt; &lt;User&gt; SVOLLMAN &lt;/ User&gt; &lt;/ Action&gt; &lt;/ Actions&gt;。 。 。&lt;/ PurchaseOrder&gt; &lt;PurchaseOrder&gt; &lt;参考&gt; ABEL-20021127121040897PST &lt;/ Reference&gt; &lt;Actions&gt; &lt;Action&gt; &lt;User&gt; ZLOTKEY &lt;/ User&gt; &lt;/ Action&gt; &lt;Action&gt; &lt;User&gt; KING &lt;/ User&gt; &lt;/ Action&gt; &lt;/ Actions&gt;。 。 。&lt;/ PurchaseOrder的&gt;</code></pre><p>存储这些采购订单的<code class="codeph">XMLType</code>表或列上的<code class="codeph">XMLIndex</code>索引包括路径表，该路径表对于XML文档中的每个索引节点都有一行。假设系统根据XPath表达式索引节点时分配以下<code class="codeph">PATHID</code> ：</p>
                        <div class="tblformal" id="GUID-4A427DE6-21F9-45F6-8045-FF37C466A05C__GUID-698980B2-9DF1-4A47-8B38-0FD0A0DC7841">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="PATHIDs for sample XPath expressions" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d34642e3216">PATHID</th>
                                    <th align="left" valign="bottom" width="100%" id="d34642e3219">索引XPath</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d34642e3224" headers="d34642e3216 ">
                                       <p><code class="codeph">1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="100%" headers="d34642e3224 d34642e3219 ">
                                       <p><code class="codeph">/采购订单</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d34642e3233" headers="d34642e3216 ">
                                       <p><code class="codeph">2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="100%" headers="d34642e3233 d34642e3219 ">
                                       <p><code class="codeph">含/ PurchaseOrder /</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d34642e3242" headers="d34642e3216 ">
                                       <p><code class="codeph">3</code></p>
                                    </td>
                                    <td align="left" valign="top" width="100%" headers="d34642e3242 d34642e3219 ">
                                       <p><code class="codeph">含/ PurchaseOrder /操作</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d34642e3251" headers="d34642e3216 ">
                                       <p><code class="codeph">4</code></p>
                                    </td>
                                    <td align="left" valign="top" width="100%" headers="d34642e3251 d34642e3219 ">
                                       <p><code class="codeph">含/ PurchaseOrder /操作/行动</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d34642e3260" headers="d34642e3216 ">
                                       <p><code class="codeph">五</code></p>
                                    </td>
                                    <td align="left" valign="top" width="100%" headers="d34642e3260 d34642e3219 ">
                                       <p><code class="codeph">含/ PurchaseOrder /操作/动作/用户</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>结果路径表将是这样的（未显示<code class="codeph">LOCATOR</code>列）：</p>
                        <div class="tblformal" id="GUID-4A427DE6-21F9-45F6-8045-FF37C466A05C__GUID-156D3508-DC4C-42AE-92BB-5EACB61027F6">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Path table corresponding to sample XPath expressions" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="12%" id="d34642e3283">PATHID</th>
                                    <th align="left" valign="bottom" width="7%" id="d34642e3286">RID</th>
                                    <th align="left" valign="bottom" width="19%" id="d34642e3289">ORDER_KEY</th>
                                    <th align="left" valign="bottom" width="62%" id="d34642e3292">值</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d34642e3297" headers="d34642e3283 ">
                                       <p><code class="codeph">1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="7%" headers="d34642e3297 d34642e3286 ">
                                       <p><code class="codeph">R1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="19%" headers="d34642e3297 d34642e3289 ">
                                       <p><code class="codeph">1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d34642e3297 d34642e3292 ">
                                       <p><code class="codeph">SBELL-2002100912333601PDTSVOLLMAN</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d34642e3314" headers="d34642e3283 ">
                                       <p><code class="codeph">2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="7%" headers="d34642e3314 d34642e3286 ">
                                       <p><code class="codeph">R1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="19%" headers="d34642e3314 d34642e3289 ">
                                       <p><code class="codeph">1.1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d34642e3314 d34642e3292 ">
                                       <p><code class="codeph">SBELL-2002100912333601PDT</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d34642e3331" headers="d34642e3283 ">
                                       <p><code class="codeph">3</code></p>
                                    </td>
                                    <td align="left" valign="top" width="7%" headers="d34642e3331 d34642e3286 ">
                                       <p><code class="codeph">R1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="19%" headers="d34642e3331 d34642e3289 ">
                                       <p><code class="codeph">1.2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d34642e3331 d34642e3292 ">
                                       <p><code class="codeph">SVOLLMAN</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d34642e3348" headers="d34642e3283 ">
                                       <p><code class="codeph">4</code></p>
                                    </td>
                                    <td align="left" valign="top" width="7%" headers="d34642e3348 d34642e3286 ">
                                       <p><code class="codeph">R1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="19%" headers="d34642e3348 d34642e3289 ">
                                       <p><code class="codeph">1.2.1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d34642e3348 d34642e3292 ">
                                       <p><code class="codeph">SVOLLMAN</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d34642e3365" headers="d34642e3283 ">
                                       <p><code class="codeph">五</code></p>
                                    </td>
                                    <td align="left" valign="top" width="7%" headers="d34642e3365 d34642e3286 ">
                                       <p><code class="codeph">R1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="19%" headers="d34642e3365 d34642e3289 ">
                                       <p><code class="codeph">1.2.1.1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d34642e3365 d34642e3292 ">
                                       <p><code class="codeph">SVOLLMAN</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d34642e3382" headers="d34642e3283 ">
                                       <p><code class="codeph">1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="7%" headers="d34642e3382 d34642e3286 ">
                                       <p><code class="codeph">R2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="19%" headers="d34642e3382 d34642e3289 ">
                                       <p><code class="codeph">1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d34642e3382 d34642e3292 ">
                                       <p><code class="codeph">ABEL-20021127121040897PSTZLOTKEYKING</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d34642e3399" headers="d34642e3283 ">
                                       <p><code class="codeph">2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="7%" headers="d34642e3399 d34642e3286 ">
                                       <p><code class="codeph">R2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="19%" headers="d34642e3399 d34642e3289 ">
                                       <p><code class="codeph">1.1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d34642e3399 d34642e3292 ">
                                       <p><code class="codeph">ABEL-20021127121040897PST</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d34642e3416" headers="d34642e3283 ">
                                       <p><code class="codeph">3</code></p>
                                    </td>
                                    <td align="left" valign="top" width="7%" headers="d34642e3416 d34642e3286 ">
                                       <p><code class="codeph">R2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="19%" headers="d34642e3416 d34642e3289 ">
                                       <p><code class="codeph">1.2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d34642e3416 d34642e3292 ">
                                       <p><code class="codeph">ZLOTKEYKING</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d34642e3433" headers="d34642e3283 ">
                                       <p><code class="codeph">4</code></p>
                                    </td>
                                    <td align="left" valign="top" width="7%" headers="d34642e3433 d34642e3286 ">
                                       <p><code class="codeph">R2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="19%" headers="d34642e3433 d34642e3289 ">
                                       <p><code class="codeph">1.2.1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d34642e3433 d34642e3292 ">
                                       <p><code class="codeph">ZLOTKEY</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d34642e3450" headers="d34642e3283 ">
                                       <p><code class="codeph">五</code></p>
                                    </td>
                                    <td align="left" valign="top" width="7%" headers="d34642e3450 d34642e3286 ">
                                       <p><code class="codeph">R2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="19%" headers="d34642e3450 d34642e3289 ">
                                       <p><code class="codeph">1.2.1.1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d34642e3450 d34642e3292 ">
                                       <p><code class="codeph">ZLOTKEY</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d34642e3467" headers="d34642e3283 ">
                                       <p><code class="codeph">4</code></p>
                                    </td>
                                    <td align="left" valign="top" width="7%" headers="d34642e3467 d34642e3286 ">
                                       <p><code class="codeph">R2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="19%" headers="d34642e3467 d34642e3289 ">
                                       <p><code class="codeph">1.2.2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d34642e3467 d34642e3292 ">
                                       <p><code class="codeph">王</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="12%" id="d34642e3485" headers="d34642e3283 ">
                                       <p><code class="codeph">五</code></p>
                                    </td>
                                    <td align="left" valign="top" width="7%" headers="d34642e3485 d34642e3286 ">
                                       <p><code class="codeph">R2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="19%" headers="d34642e3485 d34642e3289 ">
                                       <p><code class="codeph">1.2.2.1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="62%" headers="d34642e3485 d34642e3292 ">
                                       <p><code class="codeph">王</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-2331505D-512A-4D65-9403-BF4030E1EFD4">忽略路径表 - 它是透明的</a><br>虽然您可以在路径表列上创建二级索引，但通常可以忽略路径表本身。
                        </li>
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-18593F7F-21F2-46A0-9BBF-1B9C029CBBA4">XMLIndex路径表的列VALUE</a><br>列<code class="codeph">VALUE</code>上的辅助索引与<code class="codeph">WHERE</code>子句中的XPath表达式一起使用，该子句具有涉及字符串匹配的谓词。例如：</li>
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-92768F0A-BAD2-407B-BF90-CDE3640FE149">列VALUE上的二级索引</a><br>即使在创建<code class="codeph">XMLIndex</code>索引时未为列<code class="codeph">VALUE</code>指定二级索引，也会在列<code class="codeph">VALUE</code>上创建默认二级索引。此默认索引具有默认属性 - 特别是，它仅是<span class="italic">文本</span> （字符串值）数据的索引。
                        </li>
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-5E7E3440-154B-49F1-B87F-DA877015FC48">未被XMLIndex非结构化组件索引的XPath表达式</a><br><code class="codeph">XMLIndex</code> <span class="italic">不会</span>为少数类型的XPath表达式编制索引。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-6E6A5BA7-9B84-4E3D-B556-B3B286D26B46">XMLIndex</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB4347"></a><div class="props_rev_3"><a id="GUID-2331505D-512A-4D65-9403-BF4030E1EFD4" name="GUID-2331505D-512A-4D65-9403-BF4030E1EFD4"></a><h5 id="ADXDB-GUID-2331505D-512A-4D65-9403-BF4030E1EFD4" class="sect5"><span class="enumeration_section">6.3.4.1</span>忽略路径表 - 它是透明的</h5>
                     <div>
                        <p>虽然您可以在路径表列上创建二级索引，但通常可以忽略路径表本身。</p>
                        <p>您<span class="italic">无法访问</span>路径表，除了对其进行<code class="codeph">DESCRIBE</code>并在其上创建（辅助）索引。您永远不需要在路径表上显式收集统计信息。你只需要收集的统计信息<code class="codeph">XMLIndex</code>索引或在其上的基表<code class="codeph">XMLIndex</code>定义指标;在路径表及其二级索引上透明地收集和维护统计信息。
                        </p>
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="indexes-for-XMLType-data.html#GUID-C936D15C-5F86-4EAE-8552-3890ACD819BC" title="Oracle数据库基于成本的优化器确定如何最经济高效地评估给定查询，包括使用哪些索引（如果有）。为了能够准确地执行此操作，您必须收集有关各种数据库对象的统计信息。">收集基于成本的优化器的XMLIndex对象的统计信息</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-4A427DE6-21F9-45F6-8045-FF37C466A05C" title="与为表示单个XML元素或属性的特定数据库列定义的B树索引或应用于特定结构化文档部分的XMLIndex结构化组件不同，XMLIndex索引的非结构化组件默认为，非常一般。">XMLIndex非结构化组件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4348"></a><div class="props_rev_3"><a id="GUID-18593F7F-21F2-46A0-9BBF-1B9C029CBBA4" name="GUID-18593F7F-21F2-46A0-9BBF-1B9C029CBBA4"></a><h5 id="ADXDB-GUID-18593F7F-21F2-46A0-9BBF-1B9C029CBBA4" class="sect5"><span class="enumeration_section">6.3.4.2</span> XMLIndex路径表的列VALUE</h5>
                     <div>
                        <p>列<code class="codeph">VALUE</code>上的辅助索引与<code class="codeph">WHERE</code>子句中的XPath表达式一起使用，该子句具有涉及字符串匹配的谓词。例如：</p>
                        <div class="section"><pre class="pre codeblock"><code>/ PurchaseOrder [Reference / text（）=“SBELL-2002100912333601PDT”]</code></pre><p>列<code class="codeph">VALUE</code>存储元素或属性节点的<strong class="term">有效文本值</strong> - 在索引期间忽略注释和处理指令。
                           </p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>对于<span class="italic">属性</span> ，有效文本值是属性值。
                                 </p>
                              </li>
                              <li>
                                 <p>对于一个<span class="italic">简单</span>元素（没有子元素的元素），有效文本值是元素的所有文本节点的串联。
                                 </p>
                              </li>
                              <li>
                                 <p>对于<span class="italic">复杂</span>元素（具有子元素的元素），有效文本值是（1）元素本身的文本节点和（2）其所有简单元素后代的有效文本值的串联。（这是一个递归定义。）
                                 </p>
                              </li>
                           </ul>
                           <p>但是，有效文本值受限（截断），对于简单元素或属性为4000字节，对于复杂元素为80字节。</p>
                           <p>列<code class="codeph">VALUE</code>是固定大小<code class="codeph">VARCHAR2(4000)</code> 。索引创建或更新期间的任何溢出（超过4000字节）都将被截断。
                           </p>
                           <p>除了列<code class="codeph">VALUE</code>的4000字节限制之外，在此列上创建的辅助索引的键大小也有限制。B树和基于函数的索引也是如此;它不是<code class="codeph">XMLIndex</code>限制。索引键大小限制是数据库的块大小的函数。正是这个限制决定了<code class="codeph">VALUE</code>的索引量。
                           </p>
                           <p>因此，仅在第一4000个字节的有效文本值被存储在列<code class="codeph">VALUE</code> ，只有列的第一<span class="italic">N</span>字节<code class="codeph">VALUE</code>被索引，其中<span class="italic">N</span>是索引键大小限制<span class="italic">（N</span> &lt;4000）。由于索引键大小限制，列<code class="codeph">VALUE</code>上的索引仅用作有效文本值的<span class="italic">初步过滤器</span> 。
                           </p>
                           <p>例如，假设您的数据库块大小要求<code class="codeph">VALUE</code>索引不大于800字节，以便仅对有效文本值的前800字节编制索引。首先使用<code class="codeph">XMLIndex</code>测试有效文本值的前800个字节，并且仅当该文本前缀与查询值匹配时才测试有效文本值的其余部分。
                           </p>
                           <p>列<code class="codeph">VALUE</code>上的二级索引是SQL函数<code class="codeph">substr</code> （substring equality）的索引，因为该函数用于测试文本前缀。这个基于函数的索引是作为列<code class="codeph">VALUE</code>的<code class="codeph">XMLIndex</code>实现的一部分自动创建的。</p>
                           <p>例如，查询<code class="codeph">WHERE</code>子句中的XPath表达式<code class="codeph">/PurchaseOrder[Reference/text() = :1]</code>实际上可能会被重写为如下所示的测试：</p><pre class="oac_no_warn" dir="ltr">substr（VALUE，1 800）= substr（：1,1,800）AND VALUE =：1;</pre><p>此连接包含两个部分，从左到右处理。第一个测试使用函数<code class="codeph">substr</code>上的索引作为初步过滤器，以消除前800字节与bind变量值的前800字节不匹配的文本<code class="codeph">:1</code> 。
                           </p>
                           <p>只有第一个测试使用索引 - 列<code class="codeph">VALUE</code>的完整值未编入索引。在第一次测试初步过滤后，第二次测试检查整个有效文本值 - 即列<code class="codeph">VALUE</code>的完整值 - 完全相等，值为<code class="codeph">:1</code> 。此检查不使用索引。
                           </p>
                           <p>即使只对文本的前800字节进行索引，对于查询性能来说，最重要的是4000字节存储在<code class="codeph">VALUE</code>列中也很重要，因为这样可以快速，直接地访问数据，而不需要从例如从中提取数据深入<code class="codeph">CLOB</code> -instance XML文档。如果有效文本值大于4000字节，则<code class="codeph">WHERE</code> -clause连接中的第二个测试需要访问基表数据。
                           </p>
                           <p><code class="codeph">VALUE</code>列4000字节限制和索引键大小都不会以任何方式影响查询结果;它们只会影响性能。
                           </p>
                           <div class="infoboxnote" id="GUID-18593F7F-21F2-46A0-9BBF-1B9C029CBBA4__GUID-B1D3EA19-0D86-46FF-B95E-DB315B75CBE8">
                              <p class="notep1">注意：</p>
                              <p>由于的可能性<code class="codeph">VALUE</code>被截断柱，Oracle Text的<code class="codeph">CONTEXT</code>上创建的索引<code class="codeph">VALUE</code>列可能会返回不正确的结果。
                              </p>
                           </div>
                           <p>如前所述， <code class="codeph">XMLIndex</code>可以与基于XML模式的数据一起使用。如果XML模式为给定元素或属性指定<code class="codeph">defaultValue</code>值，并且特定文档未指定该元素或属性的值，则<code class="codeph">defaultValue</code>值将用于<code class="codeph">VALUE</code>列。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-4A427DE6-21F9-45F6-8045-FF37C466A05C" title="与为表示单个XML元素或属性的特定数据库列定义的B树索引或应用于特定结构化文档部分的XMLIndex结构化组件不同，XMLIndex索引的非结构化组件默认为，非常一般。">XMLIndex非结构化组件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4350"></a><div class="props_rev_3"><a id="GUID-92768F0A-BAD2-407B-BF90-CDE3640FE149" name="GUID-92768F0A-BAD2-407B-BF90-CDE3640FE149"></a><h5 id="ADXDB-GUID-92768F0A-BAD2-407B-BF90-CDE3640FE149" class="sect5"><span class="enumeration_section">6.3.4.3</span>列VALUE的二级索引</h5>
                     <div>
                        <p>即使在创建<code class="codeph">XMLIndex</code>索引时未为列<code class="codeph">VALUE</code>指定二级索引，也会在列<code class="codeph">VALUE</code>上创建默认二级索引。此默认索引具有默认属性 - 特别是，它仅是<span class="italic">文本</span> （字符串值）数据的索引。
                        </p>
                        <p>但是，您可以创建不同类型的<code class="codeph">VALUE</code>索引。例如，如果适合您的许多查询，则可以创建数值索引。您可以在<code class="codeph">VALUE</code>列上创建多个二级索引。仅在适当时使用特定类型的索引。例如，仅当<code class="codeph">VALUE</code>列是数字时才使用数值索引;其他值会被忽略。路径表列上的辅助索引被视为与任何其他辅助索引一样 - 您可以更改它们，删除它们，将它们标记为不可用，等等。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-92768F0A-BAD2-407B-BF90-CDE3640FE149__GUID-B5CDB255-2C86-4F10-827E-460131E2E2A5">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="indexes-for-XMLType-data.html#GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246" title="您可以对具有非结构化组件的XMLIndex索引执行各种操作，包括操作路径表和该组件的二级索引。">将XMLIndex与非结构化组件一起使用，以</a>获取在列<code class="codeph">VALUE</code>上创建二级索引的示例</p>
                              </li>
                              <li>
                                 <p><a href="indexes-for-XMLType-data.html#GUID-BCC7D521-E6B9-4636-98E1-25628BA0FEFC" title="创建或修改XMLIndex索引通常涉及使用带有SQL语句CREATE INDEX或ALTER INDEX的PARAMETERS子句。您可以使用它来详细指定索引特征。">PARAMETERS用于CREATE INDEX和ALTER INDEX</a>的子句用于<code class="codeph">PARAMETERS</code>子句的语法</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-4A427DE6-21F9-45F6-8045-FF37C466A05C" title="与为表示单个XML元素或属性的特定数据库列定义的B树索引或应用于特定结构化文档部分的XMLIndex结构化组件不同，XMLIndex索引的非结构化组件默认为，非常一般。">XMLIndex非结构化组件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4351"></a><div class="props_rev_3"><a id="GUID-5E7E3440-154B-49F1-B87F-DA877015FC48" name="GUID-5E7E3440-154B-49F1-B87F-DA877015FC48"></a><h5 id="ADXDB-GUID-5E7E3440-154B-49F1-B87F-DA877015FC48" class="sect5"><span class="enumeration_section">6.3.4.4</span>未由XMLIndex非结构化组件索引的XPath表达式</h5>
                     <div>
                        <p><code class="codeph">XMLIndex</code> <span class="italic">不会</span>为少数类型的XPath表达式编制索引。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>XPath函数， <span class="italic">除了</span>应用<code class="codeph">ora:contains</code> （其被<span class="italic">建议使用</span> ）。特别是，用户定义的XPath函数<span class="italic">未</span>编入索引。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">child</code> ， <code class="codeph">descendant</code>和<code class="codeph">attribute</code>以外的轴，即<code class="codeph">parent</code> ， <code class="codeph">ancestor</code> ， <code class="codeph">following-sibling</code> ， <code class="codeph">preceding-sibling</code> ， <code class="codeph">following</code> ， <code class="codeph">preceding</code>和<code class="codeph">ancestor-or-self</code> 。
                              </p>
                           </li>
                           <li>
                              <p>表达式使用union运算符， <span class="bold"><code class="codeph">|</code></span> （竖条）。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-4A427DE6-21F9-45F6-8045-FF37C466A05C" title="与为表示单个XML元素或属性的特定数据库列定义的B树索引或应用于特定结构化文档部分的XMLIndex结构化组件不同，XMLIndex索引的非结构化组件默认为，非常一般。">XMLIndex非结构化组件</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADXDB4353"></a><a id="ADXDB4356"></a><a id="ADXDB4357"></a><a id="ADXDB4352"></a><div class="props_rev_3"><a id="GUID-AE06E648-B947-4171-929B-68A1DBD93992" name="GUID-AE06E648-B947-4171-929B-68A1DBD93992"></a><h4 id="ADXDB-GUID-AE06E648-B947-4171-929B-68A1DBD93992" class="sect4"><span class="enumeration_section">6.3.5</span>创建，删除，更改和检查XMLIndex索引</h4>
                  <div>
                     <p><code class="codeph">XMLIndex</code>索引的基本操作包括创建，删除，更改和检查它。举例说明。
                     </p>
                     <div class="section">
                        <p>您可以通过将索引类型声明为<code class="codeph">XDB.XMLIndex</code>来创建<code class="codeph">XMLIndex</code>索引，如<a href="indexes-for-XMLType-data.html#GUID-AE06E648-B947-4171-929B-68A1DBD93992__CHDCGJHC">例6-7所示</a> 。
                        </p>
                        <p>这将在<code class="codeph">XMLType</code>表<code class="codeph">po_binxml</code>上创建名为<code class="codeph">po_xmlindex_ix</code>的<code class="codeph">XMLIndex</code>索引。索引只有一个非结构化组件，没有结构化组件。
                        </p>
                        <p>通过在<code class="codeph">PARAMETERS</code>子句中包含<span class="italic"><code class="codeph">structured_clause</code></span>在<code class="codeph">XMLIndex</code>索引中指定包含<span class="italic">结构化</span>组件。您可以通过在<code class="codeph">PARAMETERS</code>子句中包含<span class="italic"><code class="codeph">path_table_clause</code></span>来指定包含<span class="italic">非结构化</span>组件。
                        </p>
                        <p>您可以在创建<code class="codeph">XMLIndex</code>索引或修改它时执行此操作。如果，如<a href="indexes-for-XMLType-data.html#GUID-AE06E648-B947-4171-929B-68A1DBD93992__CHDCGJHC">例6-7所示</a> ，既未指定<span class="italic"><code class="codeph">structured_clause</code></span>也未指定<span class="italic"><code class="codeph">path_table_clause</code></span> ，则<span class="italic">仅</span>包含非结构化组件。
                        </p>
                        <p>如果<code class="codeph">XMLIndex</code>索引同时具有非结构化组件和结构化组件，则可以使用<code class="codeph">ALTER INDEX</code>删除这些组件中的任何一个。</p>
                        <p>您可以在特定的<code class="codeph">XMLType</code>表（或列）上获取<code class="codeph">XMLIndex</code>索引的名称，如<a href="indexes-for-XMLType-data.html#GUID-AE06E648-B947-4171-929B-68A1DBD93992__CHDDGHDF">例6-8</a>所示。您也可以根据需要从<code class="codeph">DBA_INDEXES</code>或<code class="codeph">ALL_INDEXES</code>选择<code class="codeph">INDEX_NAME</code> 。
                        </p>
                        <p>您可以像重命名任何其他索引一样重命名或删除<code class="codeph">XMLIndex</code>索引，如<a href="indexes-for-XMLType-data.html#GUID-AE06E648-B947-4171-929B-68A1DBD93992__CHDFIGIB">例6-9所示</a> 。此重命名仅更改<code class="codeph">XMLIndex</code>索引的名称。它不会更改路径表的名称 - 您可以单独重命名路径表。
                        </p>
                        <p>同样，您可以使用其他<code class="codeph">ALTER INDEX</code>选项更改其他索引属性，例如<code class="codeph">REBUILD</code> 。在这方面， <code class="codeph">XMLIndex</code>与其他索引类型没有什么不同。
                        </p>
                        <p><code class="codeph">XMLIndex</code>的<code class="codeph">ALTER INDEX</code>语句的<code class="codeph">RENAME</code>子句仅适用于<code class="codeph">XMLIndex</code>索引本身。要重命名路径表和二级索引，必须确定这些对象的名称，并直接对它们使用适当的<code class="codeph">ALTER TABLE</code>或<code class="codeph">ALTER INDEX</code>语句。同样，要检索二级索引的物理属性或以其他任何方式更改它们，必须获取它们的名称，如<a href="indexes-for-XMLType-data.html#GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246__CHDJHFGG">例6-14所示</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-AE06E648-B947-4171-929B-68A1DBD93992__GUID-0FE22123-D012-4C96-8863-0C24357F7A5E">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="indexes-for-XMLType-data.html#GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__BCGFGBEB">structured_clause :: =</a></p>
                              </li>
                              <li>
                                 <p><a href="indexes-for-XMLType-data.html#GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__BCGJAGCI">path_table_clause :: =</a></p>
                              </li>
                              <li>
                                 <p><a href="indexes-for-XMLType-data.html#GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__BCGGGBCB">drop_path_table_clause :: =</a></p>
                              </li>
                              <li>
                                 <p><a href="indexes-for-XMLType-data.html#GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__BCGJAAGH">alter_index_group_clause :: =</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-AE06E648-B947-4171-929B-68A1DBD93992__CHDCGJHC">
                        <p class="titleinexample">示例6-7创建XMLIndex索引</p><pre class="pre codeblock"><code>CREATE INDEX po_xmlindex_ix ON po_binxml（OBJECT_VALUE）INDEXTYPE IS <span class="bold">XDB.XMLIndex</span> ;</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-AE06E648-B947-4171-929B-68A1DBD93992__CHDDGHDF">
                        <p class="titleinexample">例6-8获取特定表上的XMLIndex索引的名称</p><pre class="pre codeblock"><code>SELECT INDEX_NAME FROM <span class="bold">USER_INDEXES</span> WHERE TABLE_NAME ='PO_BINXML'AND <span class="bold">ITYP_NAME ='XMLINDEX'</span> ; INDEX_NAME --------------- PO_XMLINDEX_IX选择了1行。
</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-AE06E648-B947-4171-929B-68A1DBD93992__CHDFIGIB">
                        <p class="titleinexample">示例6-9重命名和删除XMLIndex索引</p><pre class="pre codeblock"><code>ALTER INDEX po_xmlindex_ix <span class="bold">RENAME TO new_name_ix</span> ; DROP INDEX new_name_ix;</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="indexes-for-XMLType-data.html#GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393" title="定义了CREATE INDEX和ALTER INDEX的PARAMETERS子句的语法。">PARAMETERS CREATE INDEX和ALTER INDEX的子句语法</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-6E6A5BA7-9B84-4E3D-B556-B3B286D26B46">XMLIndex</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4358"></a><a id="ADXDB4359"></a><a id="ADXDB4360"></a><a id="ADXDB5827"></a><a id="ADXDB4361"></a><a id="ADXDB4362"></a><div class="props_rev_3"><a id="GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246" name="GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246"></a><h4 id="ADXDB-GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246" class="sect4"><span class="enumeration_section">6.3.6</span>将XMLIndex与非结构化组件一起使用</h4>
                  <div>
                     <p>您可以对具有非结构化组件的<code class="codeph">XMLIndex</code>索引执行各种操作，包括操作路径表和该组件的二级索引。
                     </p>
                     <div class="section">
                        <p>要在<code class="codeph">XMLIndex</code>索引中包含非结构化组件，可以在创建或修改<code class="codeph">XMLIndex</code>索引时在<code class="codeph">PARAMETERS</code>子句中使用<span class="italic"><code class="codeph">path_table_clause</code></span> - 请参阅<a href="indexes-for-XMLType-data.html#GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__BCGJAGCI">path_table_clause :: =</a> 。
                        </p>
                        <p>如果未指定<span class="italic">结构化</span>组件，则即使未指定路径表，索引也将具有非结构化组件。但是，通常最好指定路径表，以便它具有可识别的，面向用户的名称，您可以在其他<code class="codeph">XMLIndex</code>操作中引用该名称。
                        </p>
                        <p><a href="indexes-for-XMLType-data.html#GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246__CHDJCDCF">示例6-10</a>显示了在使用非结构化组件创建<code class="codeph">XMLIndex</code>索引时如何命名路径表（“my_path_table”）。
                        </p>
                        <p>如果未命名路径表，则系统将使用您以<code class="codeph">CREATE INDEX</code>作为基础提供的索引名称生成其名称。<a href="indexes-for-XMLType-data.html#GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246__CHDBCCHJ">例6-11</a>显示了在<a href="indexes-for-XMLType-data.html#GUID-AE06E648-B947-4171-929B-68A1DBD93992__CHDCGJHC">例6-7中</a>创建的<code class="codeph">XMLIndex</code>索引。
                        </p>
                        <p>默认情况下，路径表及其二级索引的存储选项是从创建<code class="codeph">XMLIndex</code>索引的基表的存储属性派生的。您可以在创建索引时使用<code class="codeph">PARAMETERS</code>子句指定不同的存储选项，如<a href="indexes-for-XMLType-data.html#GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246__CHDBIGIJ">例6-12</a>所示。<code class="codeph">CREATE INDEX</code> （和<code class="codeph">ALTER INDEX</code> ）的<code class="codeph">PARAMETERS</code>子句必须在单引号（ <span class="bold"><code class="codeph">'</code></span> ）之间。
                        </p>
                        <p>因为<code class="codeph">XMLIndex</code>是逻辑<span class="italic">域</span>索引，而不是物理索引，所以所有物理属性都是零（ <code class="codeph">0</code> ）或<code class="codeph">NULL</code> 。</p>
                        <p>如果<code class="codeph">XMLIndex</code>索引同时具有非结构化组件和结构化组件，则可以使用<code class="codeph">ALTER INDEX</code>删除非结构化组件。为此，请删除路径表。<a href="indexes-for-XMLType-data.html#GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246__BCGHIIFB">例6-13</a>说明了这一点。（这假设您还有一个结构化组件 - <a href="indexes-for-XMLType-data.html#GUID-0BE986CC-BEAE-4F6E-95C9-7DA51D9E0CE0__BCGJCEAF">示例6-23</a>导致包含结构化和非结构化组件的索引。）
                        </p>
                        <p>除了为路径表指定存储选项外， <a href="indexes-for-XMLType-data.html#GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246__CHDBIGIJ">示例6-12</a>还在路径表上命名了二级索引。
                        </p>
                        <p>与路径表的名称一样，路径表列上的二级索引的名称是使用索引名称作为基础自动生成的，除非您在<code class="codeph">PARAMETERS</code>子句中指定它们。<a href="indexes-for-XMLType-data.html#GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246__CHDJHFGG">例6-14</a>说明了这一点，并展示了如何使用公共视图<code class="codeph">USER_IND_COLUMNS</code>确定这些名称。它还显示pikey索引使用三列。
                        </p>
                        <div class="infoboxnotealso" id="GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246__GUID-DE57EC3B-B5A9-4C0C-BA0B-12F4BC9984E6">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="indexes-for-XMLType-data.html#GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24__CHDJACJG">例6-20给出</a>了一个类似但更复杂的例子</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246__CHDJCDCF">
                        <p class="titleinexample">示例6-10命名XMLIndex索引的路径表</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX po_xmlindex_ix ON po_binxml（OBJECT_VALUE）INDEXTYPE是XDB.XMLIndex <span class="bold">PARAMETERS（'PATH TABLE my_path_table'）</span> ;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246__CHDBCCHJ">
                        <p class="titleinexample">示例6-11确定XMLIndex路径表的系统生成的名称</p><pre class="oac_no_warn" dir="ltr">SELECT <span class="bold">PATH_TABLE_NAME</span>来自<span class="bold">USER_XML_INDEXES，其中</span> TABLE_NAME ='PO_BINXML'和INDEX_NAME ='PO_XMLINDEX_IX'; PATH_TABLE_NAME ------------------------------ <span class="bold">SYS67567</span> _PO_XMLINDE_ <span class="bold">PATH_TABLE</span>选择了1行。
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246__CHDBIGIJ">
                        <p class="titleinexample">示例6-12创建XMLIndex索引时指定存储选项</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX po_xmlindex_ix ON po_binxml（OBJECT_VALUE）INDEXTYPE IS XDB.XMLIndex PARAMETERS（'PATH TABLE po_path_table（PCTFREE 5 PCTUSED 90 INITRANS 5 <span class="bold">STORAGE</span> （INITIAL 1k NEXT 2k MINEXTENTS 3 BUFFER_POOL KEEP）NOLOGGING ENABLE ROW MOVEMENT PARALLEL 3） <span class="bold">PIKEY INDEX</span> po_pikey_ix（LOGGING PCTFREE 1 INITRANS 3） <span class="bold">VALUE INDEX</span> po_value_ix（记录PCTFREE 1 INITRANS 3）'）;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246__BCGHIIFB">
                        <p class="titleinexample">示例6-13删除XMLIndex非结构化组件</p><pre class="oac_no_warn" dir="ltr">ALTER INDEX po_xmlindex_ix PARAMETERS（'DROP PATH TABLE'）;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246__CHDJHFGG">
                        <p class="titleinexample">示例6-14确定XMLIndex索引的辅助索引的名称</p><pre class="oac_no_warn" dir="ltr">SELECT INDEX_NAME，COLUMN_NAME，COLUMN_POSITION FROM USER_IND_COLUMNS WHERE TABLE_NAME IN（SELECT PATH_TABLE_NAME FROM USER_XML_INDEXES WHERE INDEX_NAME ='PO_XMLINDEX_IX'）ORDER BY INDEX_NAME，COLUMN_NAME; INDEX_NAME COLUMN_NAME COLUMN_POSITION ------------------------------ ------------ ----- ---------- SYS67563_PO_XMLINDE_PIKEY_IX ORDER_KEY 3 SYS67563_PO_XMLINDE_PIKEY_IX PATHID 2 SYS67563_PO_XMLINDE_PIKEY_IX RID 1 SYS67563_PO_XMLINDE_VALUE_IX SYS_NC00006 $ 1选择了4行。</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24">在XMLIndex路径表上创建其他辅助索引</a><br>您可以向<code class="codeph">XMLIndex</code>非结构化组件添加额外的二级索引。
                        </li>
                     </ul>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="indexes-for-XMLType-data.html#GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393" title="定义了CREATE INDEX和ALTER INDEX的PARAMETERS子句的语法。">PARAMETERS CREATE INDEX和ALTER INDEX的子句语法</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-6E6A5BA7-9B84-4E3D-B556-B3B286D26B46">XMLIndex</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB4363"></a><a id="ADXDB4364"></a><a id="ADXDB4365"></a><a id="ADXDB4366"></a><a id="ADXDB4367"></a><a id="ADXDB4368"></a><a id="ADXDB5828"></a><div class="props_rev_3"><a id="GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24" name="GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24"></a><h5 id="ADXDB-GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24" class="sect5"><span class="enumeration_section">6.3.6.1</span>在XMLIndex路径表上创建其他二级索引</h5>
                     <div>
                        <p>您可以向<code class="codeph">XMLIndex</code>非结构化组件添加额外的二级索引。
                        </p>
                        <div class="section">
                           <p>示例<a href="indexes-for-XMLType-data.html#GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24__CHDGADGI">示例6-15</a> ， <a href="indexes-for-XMLType-data.html#GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24__CHDFHBBJ">示例6-17</a> ， <a href="indexes-for-XMLType-data.html#GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24__CHDBABFD">示例6-18</a>和<a href="indexes-for-XMLType-data.html#GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24__CHDJEHFC">示例6-19</a>为<a href="indexes-for-XMLType-data.html#GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246__CHDBIGIJ">示例6-12中</a>创建的<code class="codeph">XMLIndex</code>索引添加了额外的二级索引。
                           </p>
                           <p>您可以在<code class="codeph">XMLIndex</code>索引的路径表的<code class="codeph">VALUE</code>列上创建任意数量的其他二级索引。它们可以是不同类型，包括基于函数的索引和Oracle Text索引。
                           </p>
                           <p>在处理查询时，给定索引是否用于给定元素的出现取决于它是否属于该值的适当类型以及使用它是否具有成本效益。</p>
                           <p><a href="indexes-for-XMLType-data.html#GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24__CHDGADGI">例6-15</a>使用SQL函数<code class="codeph">substr</code>在路径表的<code class="codeph">VALUE</code>列上创建一个基于函数的索引。如果您的查询经常使用应用于XML元素的文本节点的<code class="codeph">substr</code>这可能很有用。
                           </p>
                           <p>如果您有许多文本节点表示数值的元素，那么在<code class="codeph">VALUE</code>列上创建数字索引是有意义的。但是，如果某些元素值<span class="italic">不是</span>数字，则以类似于<a href="indexes-for-XMLType-data.html#GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24__CHDGADGI">例6-15</a>的方式直接这样做会引发ORA-01722错误（无效数字）。这在<a href="indexes-for-XMLType-data.html#GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24__CHDJBCDD">例6-16中</a>说明。
                           </p>
                           <p>我们需要的是一个用于数值元素的索引，但对于没有数值的元素出现则会被忽略。程序包<code class="codeph">DBMS_XMLINDEX</code> <code class="codeph">createNumberIndex</code>专门用于此目的。您传递数据库模式的名称， <code class="codeph">XMLIndex</code>索引和要创建的数字索引。<a href="indexes-for-XMLType-data.html#GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24__CHDFHBBJ">例6-17中</a>说明了数字索引的创建。
                           </p>
                           <p>因为这样的索引专门设计为忽略没有数值的元素，所以它的使用不会检测它们的存在。如果存在非数字元素，并且由于某种原因，某些查询中未使用<code class="codeph">XMLIndex</code>索引，则会引发<code class="codeph">ORA-01722</code>错误。但是，如果使用索引，则不会引发此类错误，因为索引会忽略非数字数据。与往常一样，使用索引永远不会更改结果集 - 它永远不会给您不同的结果，但使用索引可以防止您检测错误的数据。
                           </p>
                           <p>创建日期值索引类似于创建数字索引;您使用过程<code class="codeph">DBMS_XMLINDEX.createDateIndex</code> 。<a href="indexes-for-XMLType-data.html#GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24__CHDBABFD">例6-18</a>显示了这一点。
                           </p>
                           <p><a href="indexes-for-XMLType-data.html#GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24__CHDJEHFC">例6-19</a>在列<code class="codeph">VALUE</code>上创建Oracle Text <code class="codeph">CONTEXT</code>索引。这对于XML元素的文本值的全文查询很有用。XPath谓词使用XPath函数<code class="codeph">ora:contains</code> （ <span class="italic">不建议使用</span> ）被重写为Oracle SQL函数<code class="codeph">contains</code>在<code class="codeph">VALUE</code>列上的应用程序。如果在列<code class="codeph">VALUE</code>上定义了<code class="codeph">CONTEXT</code>索引，则在谓词评估期间使用它。Oracle Text索引独立于所有其他<code class="codeph">VALUE</code> column索引。
                           </p>
                           <p><a href="indexes-for-XMLType-data.html#GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24__CHDJACJG">例6-20</a>中的查询显示了在<code class="codeph">XMLIndex</code>索引的路径表上创建的所有二级索引。显式创建的索引以粗体显示。特别要注意的是，某些索引（例如在列<code class="codeph">VALUE</code>上创建的基于函数的索引）不会出现这样的情况;为此类索引列出的列名是系统生成的名称，例如<code class="codeph">SYS_NC00007$</code> 。通过在<code class="codeph">WHERE</code>子句中执行<code class="codeph">COLUMN_NAME = 'VALUE'</code>的查询，您<span class="italic">无法</span>看到这些列。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24__GUID-92D20DAB-9879-4411-842A-2C91A76BDF82">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="indexes-for-XMLType-data.html#GUID-18593F7F-21F2-46A0-9BBF-1B9C029CBBA4" title="列VALUE上的辅助索引与WHERE子句中的XPath表达式一起使用，该子句具有涉及字符串匹配的谓词。例如：">XMLIndex路径表的列VALUE，</a>以获取有关在<code class="codeph">VALUE</code>列上创建的Oracle Text <code class="codeph">CONTEXT</code>索引返回错误结果的可能性的信息</p>
                                 </li>
                                 <li>
                                    <p>有关<code class="codeph">CREATE INDEX</code>参数<code class="codeph">TRANSACTIONAL</code>信息，请参阅<a href="../ccref/oracle-text-SQL-statements-and-operators.html#CCREF-GUID-46981A92-A7F3-4431-AEDB-7E4F0C5FC862" target="_blank"><span><cite>Oracle Text Reference</cite></span></a></p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_XMLINDEX.html#ARPLS212" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a>有关PL / SQL过程的信息，请<code class="codeph">createNumberIndex</code>包<code class="codeph">DBMS_XMLINDEX</code> <code class="codeph">createNumberIndex</code>和<code class="codeph">createDateIndex</code></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24__CHDGADGI">
                           <p class="titleinexample">示例6-15在路径表列VALUE上创建基于函数的索引</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX fn_based_ix ON <span class="bold">po_path_table</span> （ <span class="bold">substr</span> （ <span class="bold">VALUE</span> ，1,100））;</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24__CHDJBCDD">
                           <p class="titleinexample">示例6-16尝试直接在路径表列VALUE上创建数字索引</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX direct_num_ix ON po_path_table（to_binary_double（VALUE））; CREATE INDEX direct_num_ix ON po_path_table（to_binary_double（VALUE）） <span class="bold">*</span>第1行的错误：ORA-01722： <span class="bold">无效的数字</span>
</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24__CHDFHBBJ">
                           <p class="titleinexample">示例6-17使用过程createNumberIndex在列VALUE上创建数字索引</p><pre class="oac_no_warn" dir="ltr">CALL DBMS_XMLINDEX。 <span class="bold">createNumberIndex</span> （'OE'，'PO_XMLINDEX_IX'，'API_NUM_IX'）;</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24__CHDBABFD">
                           <p class="titleinexample">示例6-18使用过程createDateIndex在列VALUE上创建日期索引</p><pre class="oac_no_warn" dir="ltr">CALL DBMS_XMLINDEX。 <span class="bold">createDateIndex</span> （'OE'，'PO_XMLINDEX_IX'，'API_DATE_IX'，'dateTime'）;</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24__CHDJEHFC">
                           <p class="titleinexample">示例6-19在路径表列VALUE上创建Oracle Text CONTEXT索引</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX po_otext_ix ON po_path_table（VALUE）INDEXTYPE是<span class="bold">CTXSYS.CONTEXT</span> PARAMETERS（'TRANSACTIONAL'）;</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-1242A13C-7D4E-40DF-8EDE-23B6C83DAC24__CHDJACJG">
                           <p class="titleinexample">示例6-20显示XMLIndex路径表上的所有辅助索引</p><pre class="oac_no_warn" dir="ltr">选择c。INDEX_NAME，c。COLUMN_NAME，c。COLUMN_POSITION，e。来自<span class="bold">USER_IND_COLUMNS的COLUMN_EXPRESSION</span> c LEFT OUTER JOIN <span class="bold">USER_IND_EXPRESSIONS</span> e ON（c。INDEX_NAME = e。INDEX_NAME）WHERE c。TABLE_NAME IN（SELECT PATH_TABLE_NAME FROM USER_XML_INDEXES WHERE INDEX_NAME ='PO_XMLINDEX_IX'）ORDER BY c。INDEX_NAME，c。COLUMN_NAME; INDEX_NAME COLUMN_NAME COLUMN_POSITION COLUMN_EXPRESSION -------------------- ------------ -------------- -  ---------------------- <span class="bold">API_DATE_IX</span> <span class="bold">SYS_NC00009 $</span> 1 SYS_EXTRACT_UTC（SYS_XMLCONV（“V ALUE”，3,8,0,0,181）） <span class="bold">API_NUM_IX</span> <span class="bold">SYS_NC00008 $</span> 1 TO_BINARY_DOUBLE （“VALUE”） <span class="bold">FN_BASED_IX</span> <span class="bold">SYS_NC00007 $</span> 1 SUBSTR（“VALUE”，1,100） <span class="bold">PO_OTEXT_IX</span> VALUE 1 PO_PIKEY_IX ORDER_KEY 3 PO_PIKEY_IX PATHID 2 PO_PIKEY_IX RID 1 PO_VALUE_IX SYS_NC00006 $ 1 SUBSTRB（“VALUE”，1,1599）选择了8行。</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="indexes-for-XMLType-data.html#GUID-FAB7C619-902A-40CF-98B7-6D358E1AD49C" title="当您需要对XML数据进行全文搜索时，Oracle建议您将XMLType数据存储为二进制XML，并使用XQuery Full Text（XQFT）。您可以使用XML搜索索引。这是本节的主题。">为全文查询索引XML数据</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246" title="您可以对具有非结构化组件的XMLIndex索引执行各种操作，包括操作路径表和该组件的二级索引。">将XMLIndex与非结构化组件一起使用</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADXDB4369"></a><div class="props_rev_3"><a id="GUID-476331FD-F58B-4980-BECD-015F0A794AC9" name="GUID-476331FD-F58B-4980-BECD-015F0A794AC9"></a><h4 id="ADXDB-GUID-476331FD-F58B-4980-BECD-015F0A794AC9" class="sect4"><span class="enumeration_section">6.3.7</span> XMLIndex与结构化组件的使用</h4>
                  <div>
                     <p><code class="codeph">XMLIndex</code>结构化组件为XML数据中的特定结构岛编制索引。
                     </p>
                     <p>要在<code class="codeph">XMLIndex</code>索引中包含结构化组件，在创建或修改<code class="codeph">XMLIndex</code>索引时，请在<code class="codeph">PARAMETERS</code>子句中使用<span class="italic"><code class="codeph">structured_clause</code></span> - 请参阅<a href="indexes-for-XMLType-data.html#GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__BCGFGBEB">structured_clause :: =</a> 。
                     </p>
                     <p><span class="italic"><code class="codeph">structured_clause</code></span>指定要编制索引的结构化岛。您可以使用关键字<code class="codeph">GROUP</code>来指定每个结构化岛屿：因此，岛屿在语法上与结构<strong class="term">组</strong>相对应。如果未明确指定组，则使用预定义组<code class="codeph">DEFAULT_GROUP</code> 。对于<code class="codeph">ALTER INDEX</code> ，在<code class="codeph">GROUP</code>关键字前面加上修改操作关键字： <code class="codeph">ADD_GROUP</code>指定一个新组（岛）; <code class="codeph">DROP_GROUP</code>删除一个组。
                     </p>
                     <p>为什么在单个索引中有多个组，而不是简单地使用多个<code class="codeph">XMLIndex</code>索引？原因是<code class="codeph">XMLIndex</code>是一个域索引，您只能在给定的数据库列上创建给定类型的一个域索引。
                     </p>
                     <p>定义结构组的语法，即索引结构化岛，与调用SQL / XML <span class="italic">函数</span> <code class="codeph">XMLTable</code>的语法类似：使用关键字<code class="codeph">XMLTable</code>和<code class="codeph">COLUMNS</code>来定义关系列，并使用<code class="codeph">XMLTable</code>多级链接来处理集合。要简化此类索引的创建，可以使用PL / SQL函数<code class="codeph">DBMS_XMLSTORAGE_MANAGE.getSIDXDefFromView</code>来准确提供创建索引所需的<code class="codeph">XMLTable</code>表达式。
                     </p>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-6C638C44-A5E6-476F-95A0-151150EEF16B">将命名空间和存储子句与XMLIndex结构化组件一起使用</a><br>创建具有结构化组件的<code class="codeph">XMLIndex</code>索引时，可以指定要使用的XML命名空间和存储选项。
                        </li>
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-0BE986CC-BEAE-4F6E-95C9-7DA51D9E0CE0">将结构化组件添加到XMLIndex索引</a><br>您可以使用<code class="codeph">ALTER INDEX</code>将结构化组件添加到现有<code class="codeph">XMLIndex</code>索引。
                        </li>
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-E12BC8D6-70C9-44D1-90D5-346F37EA8B5C">使用非阻塞ALTER INDEX和XMLIndex结构化组件</a><br>在为<code class="codeph">XMLIndex</code>索引的结构化组件添加组或列时，可以防止<code class="codeph">ALTER INDEX</code>阻塞，以便使用索引的查询不需要等待。
                        </li>
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-2EAC8FBB-0C71-4E9E-BE9E-6BCF5E4D28BE">修改结构化XMLIndex组件的数据类型</a><br>如果由于某些数据与用于结构化<code class="codeph">XMLIndex</code>组件的相应列的数据类型不匹配而引发错误，则在某些情况下，您可以通过将关键字<code class="codeph">MODIFY_COLUMN_TYPE</code>传递给<code class="codeph">ALTER INDEX</code>来简单地修改<code class="codeph">ALTER INDEX</code> 。</li>
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-D3269FF1-D89D-43DE-B4EC-8C43D5B2F5F8">删除XMLIndex结构化组件</a><br>如果<code class="codeph">XMLIndex</code>索引同时具有非结构化组件和结构化组件，则可以使用<code class="codeph">ALTER INDEX</code>删除结构化组件。您可以通过删除组成结构化组件的<span class="italic">所有</span>结构组来完成此操作。
                        </li>
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-3958CA0D-1C5B-47C3-B68F-7B6EF9E5BFA9">索引结构化XMLIndex组件的关系表</a><br>因为用于<code class="codeph">XMLIndex</code>索引的结构化组件的表是普通关系表，所以可以使用任何标准关系索引对它们进行索引。
                        </li>
                     </ul>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="indexes-for-XMLType-data.html#GUID-C04D8939-4A3C-4C54-8399-109AC4914D03" title="用于CREATE INDEX或ALTER INDEX语句的PARAMETERS子句的字符串值具有1000个字符的限制。要解决此限制，您可以在包DBMS_XMLINDEX中使用PL / SQL过程registerParameter和modifyParameter。">使用XMLIndex的Registered PARAMETERS子句</a></li>
                           <li><a href="indexes-for-XMLType-data.html#GUID-E6F787DD-ED63-41FE-ADB4-7FA8F646B254" title="用于XMLIndex结构化组件的关系表使用SQL数据类型。查询中使用的XQuery表达式使用XML数据类型（XML Schema数据类型和XQuery数据类型）。">XMLIndex结构化组件的数据类型注意事项</a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-476331FD-F58B-4980-BECD-015F0A794AC9__GUID-9B8DB6E1-63C4-4EE7-973A-BC6B33A92472">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="relational-views-over-XML-data.html#GUID-DFEC1462-BAD9-44CA-A9C4-88C27A0CD46C" title="If the relational columns of the structured component of an XMLIndex index over binary XML data match the columns of a relational view over that data, then the view too is effectively indexed.">索引使用关系视图</a> <code class="codeph">DBMS_XMLSTORAGE_MANAGE.getSIDXDefFromView</code> <a href="relational-views-over-XML-data.html#GUID-DFEC1462-BAD9-44CA-A9C4-88C27A0CD46C" title="如果XMLInData上的XMLIndex索引的结构化组件的关系列与该数据上的关系视图的列匹配，则该视图也被有效地编入索引。">二进制XML数据，</a>以获取有关使用<code class="codeph">DBMS_XMLSTORAGE_MANAGE.getSIDXDefFromView</code>信息</p>
                           </li>
                           <li>
                              <p><a href="indexes-for-XMLType-data.html#GUID-54B95128-EFC2-4EA5-9E05-753DC572BF52__BCGEFFEG">例6-30</a></p>
                           </li>
                           <li>
                              <p><a href="indexes-for-XMLType-data.html#GUID-FAB7C619-902A-40CF-98B7-6D358E1AD49C" title="当您需要对XML数据进行全文搜索时，Oracle建议您将XMLType数据存储为二进制XML，并使用XQuery Full Text（XQFT）。您可以使用XML搜索索引。这是本节的主题。">为全文查询索引XML数据</a></p>
                           </li>
                           <li>
                              <p><a href="indexes-for-XMLType-data.html#GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__BCGFGBEB">structured_clause :: =</a></p>
                           </li>
                           <li>
                              <p><a href="indexes-for-XMLType-data.html#GUID-A4FD18EE-D43B-44B0-86CE-27D4CE995E42" title="某些注意事项适用于使用XMLIndex_xmltable_clause。">使用XMLIndex_xmltable_clause</a>获取有关<code class="codeph">XMLTable</code>子句中<code class="codeph">XMLType</code>列的信息</p>
                           </li>
                           <li>
                              <p><a href="indexes-for-XMLType-data.html#GUID-D4474161-F125-4703-98D2-7C609F8806E7" title="某些注意事项适用于使用column_clause。">使用column_clause</a>获取有关关键字<code class="codeph">COLUMNS</code>和<code class="codeph">VIRTUAL</code></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-6E6A5BA7-9B84-4E3D-B556-B3B286D26B46">XMLIndex</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB5831"></a><a id="ADXDB6087"></a><div class="props_rev_3"><a id="GUID-6C638C44-A5E6-476F-95A0-151150EEF16B" name="GUID-6C638C44-A5E6-476F-95A0-151150EEF16B"></a><h5 id="ADXDB-GUID-6C638C44-A5E6-476F-95A0-151150EEF16B" class="sect5"><span class="enumeration_section">6.3.7.1</span>将命名空间和存储子句与XMLIndex结构化组件一起使用</h5>
                     <div>
                        <p>创建具有结构化组件的<code class="codeph">XMLIndex</code>索引时，可以指定要使用的XML命名空间和存储选项。
                        </p>
                        <div class="section">
                           <p><a href="indexes-for-XMLType-data.html#GUID-6C638C44-A5E6-476F-95A0-151150EEF16B__BCGDDBDI">示例6-21</a>显示了<code class="codeph">XMLIndex</code>索引的创建，该索引仅包含结构化组件（无路径表子句），并使用<code class="codeph">XMLNAMESPACES</code>子句指定名称空间。它指定压缩索引数据并使用表空间<code class="codeph">USERTBS1</code> 。该示例假定二进制XML表<code class="codeph">po_binxml</code>具有非基于XML模式的数据。
                           </p>
                           <p><a href="indexes-for-XMLType-data.html#GUID-6C638C44-A5E6-476F-95A0-151150EEF16B__BCGDDBDI">例6-21中的</a>每个（相同的） <code class="codeph">TABLESPACE</code>子句适用于表级（表<code class="codeph">po_ptab</code>和<code class="codeph">li_tab</code> ）。
                           </p>
                           <p>通常，您可以在表级别和分区级别指定存储选项。分区级别的规范会覆盖表级别的规范。还可以在<span class="italic">索引</span>级别指定<code class="codeph">TABLESPACE</code>子句，即，它应用于用于索引的所有分区和表。如果在多个级别指定了<code class="codeph">TABLESPACE</code> ，则分区级别将覆盖表级别，这将覆盖索引级别。
                           </p>
                           <p><a href="indexes-for-XMLType-data.html#GUID-6C638C44-A5E6-476F-95A0-151150EEF16B__XMLINDEXWITHASTRUCTUREDCOMPONENTSPE-2AF51F5B">例6-22</a>为索引中使用的每个表指定了相同的<code class="codeph">TABLESPACE</code> 。可以通过在索引级别指定<code class="codeph">TABLESPACE</code>来解决这种共性，如<a href="indexes-for-XMLType-data.html#GUID-6C638C44-A5E6-476F-95A0-151150EEF16B__XMLINDEXWITHASTRUCTUREDCOMPONENTSPE-2AF51F5B">例6-22</a>所示。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-6C638C44-A5E6-476F-95A0-151150EEF16B__BCGDDBDI">
                           <p class="titleinexample">示例6-21带结构化组件的XMLIndex，使用命名空间和存储选项</p><pre class="pre codeblock"><code>CREATE INDEX po_struct ON po_binxml（OBJECT_VALUE）INDEXTYPE IS XDB.XMLIndex PARAMETERS（'XMLTable po_ptab（ <span class="bold">TABLESPACE</span> “USERTBS1”COMPRESS FOR OLTP） <span class="bold">XMLNAMESPACES</span> （ <span class="bold">DEFAULT''http</span> ：//www.example.com/po''）''/ purchaseOrder''COLUMNS orderdate DATE PATH''@ orderDate''，id BINARY_DOUBLE PATH''@ id''，items XMLType PATH''items / item''VIRTUAL XMLTable li_tab（ <span class="bold">TABLESPACE</span> “USERTBS1”COMPRESS FOR OLTP） <span class="bold">XMLNAMESPACES</span> （DEFAULT' 'http://www.example.com/po''），''/ item''PASSING items COLUMNS partnum VARCHAR2（15）PATH''@ partNum''，description CLOB PATH''productName''，usprice BINARY_DOUBLE PATH ''USPrice''，shipdat DATE PATH''shipDate'''）;</code></pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-6C638C44-A5E6-476F-95A0-151150EEF16B__XMLINDEXWITHASTRUCTUREDCOMPONENTSPE-2AF51F5B">
                           <p class="titleinexample">示例6-22带结构化组件的XMLIndex，在索引级别指定TABLESPACE</p><pre class="pre codeblock"><code>CREATE INDEX po_struct ON po_binxml（OBJECT_VALUE）INDEXTYPE IS XDB.XMLIndex PARAMETERS（'XMLTable po_ptab，XMLNAMESPACES（DEFAULT''http：//www.example.com/po''），'/ purchaseOrder''COLUMNS orderdate DATE PATH' '@orderDate''，id BINARY_DOUBLE PATH''@ id''，items XMLType PATH''items / item''VIRTUAL XMLTable li_tab，XMLNAMESPACES（DEFAULT''http：//www.example.com/po''）， ''/项目'' PASSING项COLUMNS partnum VARCHAR2（15）PATH '' @partNum ''，描述CLOB PATH '' PRODUCTNAME ''，usprice BINARY_DOUBLE PATH '' uSPrice ''，shipdat DATE PATH '' SHIPDATE '' <span class="bold">TABLESPACE“</span> USERTBS1“COMPRESS FOR OLTP”'）;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-476331FD-F58B-4980-BECD-015F0A794AC9" title="XMLIndex结构化组件为XML数据中的特定结构岛编制索引。">XMLIndex与结构化组件的使用</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4370"></a><a id="ADXDB6088"></a><div class="props_rev_3"><a id="GUID-0BE986CC-BEAE-4F6E-95C9-7DA51D9E0CE0" name="GUID-0BE986CC-BEAE-4F6E-95C9-7DA51D9E0CE0"></a><h5 id="ADXDB-GUID-0BE986CC-BEAE-4F6E-95C9-7DA51D9E0CE0" class="sect5"><span class="enumeration_section">6.3.7.2</span>将结构化组件添加到XMLIndex索引</h5>
                     <div>
                        <p>您可以使用<code class="codeph">ALTER INDEX</code>将结构化组件添加到现有<code class="codeph">XMLIndex</code>索引。
                        </p>
                        <div class="section">
                           <p><a href="indexes-for-XMLType-data.html#GUID-0BE986CC-BEAE-4F6E-95C9-7DA51D9E0CE0__BCGJCEAF">例6-23</a>显示了仅使用非结构化组件创建<code class="codeph">XMLIndex</code>索引。创建非结构化组件是因为<code class="codeph">PARAMETERS</code>子句显式指定路径表。
                           </p>
                           <p><a href="indexes-for-XMLType-data.html#GUID-0BE986CC-BEAE-4F6E-95C9-7DA51D9E0CE0__BCGJCEAF">例6-23</a>然后使用<code class="codeph">ALTER INDEX</code>添加名为<code class="codeph">po_item</code>的结构化组件（组）。此结构组包括两个关系表，每个关系表都使用关键字<code class="codeph">XMLTable</code>指定。
                           </p>
                           <p>顶级表<code class="codeph">po_idx_tab</code>具有列<code class="codeph">reference</code> ， <code class="codeph">requestor</code> ， <code class="codeph">username</code>和<code class="codeph">lineitem</code> 。列<code class="codeph">lineitem</code>的类型为<code class="codeph">XMLType</code> 。它表示一个集合，因此它被传递给第二个<code class="codeph">XMLTable</code>构造以形成二级关系表<code class="codeph">po_index_lineitem</code> ，其中包含<code class="codeph">itemno</code> ， <code class="codeph">description</code> ， <code class="codeph">partno</code> ， <code class="codeph">quantity</code>和<code class="codeph">unitprice</code> 。
                           </p>
                           <p><code class="codeph">XMLType</code>列<span class="italic">需要</span>关键字<code class="codeph">VIRTUAL</code> 。它指定<code class="codeph">XMLType</code>列本身未实现：其数据仅以其相应<code class="codeph">XMLTable</code>表指定的关系列的形式存储在<code class="codeph">XMLIndex</code>索引中。
                           </p>
                           <p>您不能在给定的<code class="codeph">XMLTable</code>子句中创建多个<code class="codeph">XMLType</code>列。要实现此效果，您必须改为定义其他组。
                           </p>
                           <p><a href="indexes-for-XMLType-data.html#GUID-0BE986CC-BEAE-4F6E-95C9-7DA51D9E0CE0__BCGJCEAF">例6-23</a>还说明了在<code class="codeph">PARAMETERS</code>子句中使用已注册的参数字符串。它使用PL / SQL过程<code class="codeph">DBMS_XMLINDEX.registerParameter</code>来注册名为<code class="codeph">myparam</code>的参数字符串。然后它使用<code class="codeph">ALTER INDEX</code>更新索引参数以包含字符串<code class="codeph">myparam</code>的索引参数。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-0BE986CC-BEAE-4F6E-95C9-7DA51D9E0CE0__BCGJCEAF">
                           <p class="titleinexample">示例6-23 XMLIndex索引：添加结构化组件</p><pre class="pre codeblock"><code>CREATE INDEX po_xmlindex_ix ON po_binxml（OBJECT_VALUE）INDEXTYPE IS XDB.XMLIndex PARAMETERS（'PATH TABLE path_tab'）; BEGIN DBMS_XMLINDEX。 <span class="bold">registerParameter</span> （'myparam'，' <span class="bold">ADD_GROUP GROUP</span> po_item <span class="bold">XMLTable</span> po_idx_tab''/ PurchaseOrder''COLUMNS reference VARCHAR2（30）PATH''Reference''，requestor VARCHAR2（30）PATH''Requestor''，username VARCHAR2（30）PATH' '用户'”，订单项的XMLType PATH ''了LineItem / LineItem的' <span class="bold">虚拟</span> <span class="bold">的XMLTable</span> po_index_lineitem ''/ LineItem的'' PASSING LINEITEM COLUMNS ITEMNO BINARY_DOUBLE PATH '' @ItemNumber ''，描述VARCHAR2（256）PATH ''描述''，PARTNO VARCHAR2（14）PATH''Part / @ Id''，数量BINARY_DOUBLE PATH''Part / @ Quantity''，unitprice BINARY_DOUBLE PATH''Part / @ UnitPrice'''）;结束; / ALTER INDEX po_xmlindex_ix PARAMETERS（' <span class="bold">PARAM</span> myparam'）;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-476331FD-F58B-4980-BECD-015F0A794AC9" title="XMLIndex结构化组件为XML数据中的特定结构岛编制索引。">XMLIndex与结构化组件的使用</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB6090"></a><a id="ADXDB6089"></a><div class="props_rev_3"><a id="GUID-E12BC8D6-70C9-44D1-90D5-346F37EA8B5C" name="GUID-E12BC8D6-70C9-44D1-90D5-346F37EA8B5C"></a><h5 id="ADXDB-GUID-E12BC8D6-70C9-44D1-90D5-346F37EA8B5C" class="sect5"><span class="enumeration_section">6.3.7.3</span>对XMLIndex结构化组件使用非阻塞ALTER INDEX</h5>
                     <div>
                        <p>在为<code class="codeph">XMLIndex</code>索引的结构化组件添加组或列时，可以防止<code class="codeph">ALTER INDEX</code>阻塞，以便使用索引的查询不需要等待。
                        </p>
                        <div class="section">
                           <p>当您使用<code class="codeph">ALTER INDEX</code>为<code class="codeph">XMLIndex</code>索引的结构化组件添加组或列时，此索引维护操作将获取基表和索引上的独占DDL锁。
                           </p>
                           <p>基表被锁定到DML操作，并且在<code class="codeph">ALTER INDEX</code>操作完成之前，索引不能用于查询。这意味着在此索引维护期间，查询或在基表上执行DML操作的其他会话不能使用索引。<code class="codeph">ALTER INDEX</code>操作和伴随锁定的持续时间取决于基本<code class="codeph">XMLType</code>列中的数据量。
                           </p>
                           <p>您可以避免或解决此问题，如下所示：</p>
                           <ol>
                              <li>
                                 <p>在创建结构化组件组或列的<code class="codeph">ALTER INDEX</code>语句的<code class="codeph">PARAMETERS</code>子句中，在<code class="codeph">ADD_GROUP</code>或<code class="codeph">ADD_COLUMN</code>之前使用关键字<span class="bold"><code class="codeph">NONBLOCKING</code></span> 。
                                 </p>
                                 <p>这会根据需要更新索引，但不会索引任何基表数据。因为它不依赖于基表数据，所以无论基表大小如何都很快。</p>
                              </li>
                              <li>
                                 <p>调用PL / SQL过程<code class="codeph">DBMS_XMLINDEX.</code> <span class="bold"><code class="codeph">process_pending</code></span> 。
                                 </p>
                                 <p>此过程为基表的行编制索引并填充索引的表，就像没有关键字<code class="codeph">NONBLOCKING</code>一样。但是，在这种情况下，在处理它们并提交更改时，一次只锁定几行。已跳过已被锁定以用于其他目的的行。这可以显着减少锁争用，并允许某些行的索引与查询或其他行上的DML同时进行。
                                 </p>
                                 <p>程序<code class="codeph">process_pending</code>完成后返回，作为<code class="codeph">OUT</code>参数：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>无法索引的行数。这可能是因为它们被<span class="italic">锁定</span>用于其他目的或因为引发了错误（此数字包括作为另一个<code class="codeph">OUT</code>参数返回的数字）。
                                       </p>
                                       <p>在您认为已删除这些锁之后，再次调用过程<code class="codeph">process_pending</code>以尝试处理这些挂起的行。
                                       </p>
                                    </li>
                                    <li>
                                       <p>由于引发<span class="italic">错误</span>而无法索引的行数。（这应该很少见。）
                                       </p>
                                       <p>检查表<code class="codeph">SYS_AIXSXI_</code> <span class="italic"><code class="codeph">index_number</code></span> <code class="codeph">_ERRORTAB</code>以获取有关这些错误的信息，然后采取措施解决潜在问题。 <span class="italic"><code class="codeph">index_number</code></span>是索引的对象编号。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>根据需要多次重复步骤2，直到过程<code class="codeph">process_pending</code>指示所有行已成功编入索引或遇到难以克服的问题并决定完全取消索引操作。
                                 </p>
                                 <p>您可以在任何时候（在步骤2之前）通过在相同<code class="codeph">XMLIndex</code>索引的单独<code class="codeph">ALTER INDEX</code>语句的<code class="codeph">PARAMETERS</code>子句中使用关键字<span class="bold"><code class="codeph">NONBLOCKING ABORT</code></span>来取消索引。
                                 </p>
                              </li>
                              <li>
                                 <p>如果所有行都已成功建立索引，则在单独的<code class="codeph">ALTER INDEX</code>语句的<code class="codeph">PARAMETERS</code>子句中对同一<code class="codeph">XMLIndex</code>索引使用关键字<span class="bold"><code class="codeph">NONBLOCKING COMPLETE</code></span> 。
                                 </p>
                              </li>
                           </ol>
                           <p><a href="indexes-for-XMLType-data.html#GUID-E12BC8D6-70C9-44D1-90D5-346F37EA8B5C__CEGBBCDG">例6-24</a>说明了这一点。
                           </p>
                           <p>就像表<code class="codeph">SYS_AIXSXI_</code> <span class="italic"><code class="codeph">index_number</code></span> <code class="codeph">_</code> <span class="bold"><code class="codeph">ERRORTAB</code></span>报告错误一样，表<code class="codeph">SYS_AIXSXI_</code> <span class="italic"><code class="codeph">index_number</code></span> <code class="codeph">_</code> <span class="bold"><code class="codeph">PENDINGTAB</code></span>记录每个基表行的当前状态：它是否已被索引。行可能尚未编入索引，因为它被某些其他目的锁定或因为尝试索引它引发了错误。在后一种情况下，请参阅<code class="codeph">SYS_AIXSXI_</code> <span class="italic"><code class="codeph">index_number</code></span> <code class="codeph">_ERRORTAB</code>以获取有关错误的特定信息。
                           </p>
                           <div class="infoboxnotealso" id="GUID-E12BC8D6-70C9-44D1-90D5-346F37EA8B5C__GUID-198206E5-C3F2-401E-B227-1EDB6B7B002B">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="indexes-for-XMLType-data.html#GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__BCGJAAGH">alter_index_group_clause :: =</a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-E12BC8D6-70C9-44D1-90D5-346F37EA8B5C__CEGBBCDG">
                           <p class="titleinexample">示例6-24使用DBMS_XMLINDEX.PROCESS_PENDING索引XML数据</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX po_struct ON po_binxml（OBJECT_VALUE）INDEXTYPE IS XDB.XMLIndex PARAMETERS（'XMLTable po_idx_tab''/ PurchaseOrder''COLUMNS reference VARCHAR2（30）PATH''Reference''，requestor VARCHAR2（30）PATH''Requestor''，username VARCHAR2（30）PATH''User''，lineitem XMLType PATH''LineItems / LineItem''VIRTUAL XMLTable po_index_lineitem''/ LineItem''PASSING lineitem COLUMNS itemno BINARY_DOUBLE PATH''@ ItemNumber''，description VARCHAR2（256）PATH' 'Description''，partno VARCHAR2（14）PATH''Part / @ Id''，数量BINARY_DOUBLE PATH''Part / @ Quantity''，unitprice BINARY_DOUBLE PATH''Part / @ UnitPrice'''）; ALTER INDEX po_struct PARAMETERS（' <span class="bold">NONBLOCKING</span> ADD_GROUP GROUP po_action_group XMLTABLE po_idx_tab''/ PurchaseOrder''COLUMNS actions XMLType PATH''Actions / Action''VIRTUAL XMLTABLE po_idx_action''/ Action''PASSING actions COLUMNS actioned_by VARCHAR2（10）PATH''User ''，date_actioned TIMESTAMP PATH''日期'''）; DECLARE num_pending NUMBER：= 0; num_errored NUMBER：= 0; BEGIN DBMS_XMLINDEX。 <span class="bold">process_pending</span> （'oe'，'po_struct'，num_pending，num_errored）; DBMS_OUTPUT.put_line（'仍在等待的行数='|| num_pending）; DBMS_OUTPUT.put_line（'有错误的行数='|| num_errored）;结束; /仍未决的行数= <span class="bold">0</span>有错误的行数= <span class="bold">0</span> PL / SQL过程已成功完成。ALTER INDEX po_struct PARAMETERS（' <span class="bold">NONBLOCKING COMPLETE</span> '）;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-476331FD-F58B-4980-BECD-015F0A794AC9" title="XMLIndex结构化组件为XML数据中的特定结构岛编制索引。">XMLIndex与结构化组件的使用</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB6091"></a><div class="props_rev_3"><a id="GUID-2EAC8FBB-0C71-4E9E-BE9E-6BCF5E4D28BE" name="GUID-2EAC8FBB-0C71-4E9E-BE9E-6BCF5E4D28BE"></a><h5 id="ADXDB-GUID-2EAC8FBB-0C71-4E9E-BE9E-6BCF5E4D28BE" class="sect5"><span class="enumeration_section">6.3.7.4</span>修改结构化XMLIndex组件的数据类型</h5>
                     <div>
                        <p>如果由于某些数据与用于结构化<code class="codeph">XMLIndex</code>组件的相应列的数据类型不匹配而引发错误，则在某些情况下，您可以通过将关键字<code class="codeph">MODIFY_COLUMN_TYPE</code>传递给<code class="codeph">ALTER INDEX</code>来简单地修改<code class="codeph">ALTER INDEX</code> 。</p>
                        <div class="section">
                           <p>例如，如果<code class="codeph">VARCHAR2(30)</code>列需要容纳最多40个字符的数据，则可以将其扩展为<code class="codeph">VARCHAR2(30)</code> <code class="codeph">VARCHAR2(40)</code> 。这比删除列然后添加新列更简单，更有效。新数据类型必须与旧数据类型兼容：适用于<code class="codeph">ALTER TABLE MODIFY COLUMN</code>的相同限制。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-2EAC8FBB-0C71-4E9E-BE9E-6BCF5E4D28BE__GUID-0C615772-8565-4D18-863B-5B122B496919">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">ALTER TABLE MODIFY COLUMN</code>信息，请<a href="../sqlrf/ALTER-TABLE.html#SQLRF01001" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                              </li>
                              <li>
                                 <p><a href="indexes-for-XMLType-data.html#GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__CEGEABGE">modify_column_type_clause：==</a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-476331FD-F58B-4980-BECD-015F0A794AC9" title="XMLIndex结构化组件为XML数据中的特定结构岛编制索引。">XMLIndex与结构化组件的使用</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5829"></a><a id="ADXDB6092"></a><div class="props_rev_3"><a id="GUID-D3269FF1-D89D-43DE-B4EC-8C43D5B2F5F8" name="GUID-D3269FF1-D89D-43DE-B4EC-8C43D5B2F5F8"></a><h5 id="ADXDB-GUID-D3269FF1-D89D-43DE-B4EC-8C43D5B2F5F8" class="sect5"><span class="enumeration_section">6.3.7.5</span>删除XMLIndex结构化组件</h5>
                     <div>
                        <p>如果<code class="codeph">XMLIndex</code>索引同时具有非结构化组件和结构化组件，则可以使用<code class="codeph">ALTER INDEX</code>删除结构化组件。您可以通过删除组成结构化组件的<span class="italic">所有</span>结构组来完成此操作。
                        </p>
                        <div class="section">
                           <p><a href="indexes-for-XMLType-data.html#GUID-D3269FF1-D89D-43DE-B4EC-8C43D5B2F5F8__BCGJGJAD">例6-25</a>显示了如何通过删除其唯一的结构组<code class="codeph">po_item</code>来删除在<a href="indexes-for-XMLType-data.html#GUID-0BE986CC-BEAE-4F6E-95C9-7DA51D9E0CE0__BCGJCEAF">例6-23</a>中添加的结构化组件。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-D3269FF1-D89D-43DE-B4EC-8C43D5B2F5F8__BCGJGJAD">
                           <p class="titleinexample">示例6-25删除XMLIndex结构化组件</p><pre class="pre codeblock"><code>ALTER INDEX po_xmlindex_ix PARAMETERS（'DROP_GROUP GROUP po_item'）;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-476331FD-F58B-4980-BECD-015F0A794AC9" title="XMLIndex结构化组件为XML数据中的特定结构岛编制索引。">XMLIndex与结构化组件的使用</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4371"></a><a id="ADXDB6093"></a><div class="props_rev_3"><a id="GUID-3958CA0D-1C5B-47C3-B68F-7B6EF9E5BFA9" name="GUID-3958CA0D-1C5B-47C3-B68F-7B6EF9E5BFA9"></a><h5 id="ADXDB-GUID-3958CA0D-1C5B-47C3-B68F-7B6EF9E5BFA9" class="sect5"><span class="enumeration_section">6.3.7.6</span>索引结构化XMLIndex组件的关系表</h5>
                     <div>
                        <p>因为用于<code class="codeph">XMLIndex</code>索引的结构化组件的表是普通关系表，所以可以使用任何标准关系索引对它们进行索引。
                        </p>
                        <div class="section">
                           <p>这在<a href="indexes-for-XMLType-data.html#GUID-2DC9E402-5C06-4AED-B04B-C37B687DB6BB" title="您可以为XML内容的固定结构化岛屿项目的查询创建和使用XMLIndex索引的结构化组件，即使周围数据相对非结构化也是如此。">XMLIndex结构化组件</a>一节中进行了解释。<a href="indexes-for-XMLType-data.html#GUID-3958CA0D-1C5B-47C3-B68F-7B6EF9E5BFA9__BCGEGABJ">示例6-26</a>说明了该<a href="indexes-for-XMLType-data.html#GUID-3958CA0D-1C5B-47C3-B68F-7B6EF9E5BFA9__BCGEGABJ">示例</a> ，其在<a href="indexes-for-XMLType-data.html#GUID-0BE986CC-BEAE-4F6E-95C9-7DA51D9E0CE0__BCGJCEAF">示例6-23</a>的<code class="codeph">XMLIndex</code>索引的索引内容表（结构化片段）的<code class="codeph">reference</code>列上创建B树索引。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-3958CA0D-1C5B-47C3-B68F-7B6EF9E5BFA9__BCGEGABJ">
                           <p class="titleinexample">示例6-26在XMLIndex索引内容表上创建B树索引</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX idx_tab_ref_ix ON po_idx_tab（reference）;</pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-476331FD-F58B-4980-BECD-015F0A794AC9" title="XMLIndex结构化组件为XML数据中的特定结构岛编制索引。">XMLIndex与结构化组件的使用</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADXDB4373"></a><a id="ADXDB4374"></a><a id="ADXDB4375"></a><a id="ADXDB4376"></a><a id="ADXDB4377"></a><a id="ADXDB4372"></a><div class="props_rev_3"><a id="GUID-54B95128-EFC2-4EA5-9E05-753DC572BF52" name="GUID-54B95128-EFC2-4EA5-9E05-753DC572BF52"></a><h4 id="ADXDB-GUID-54B95128-EFC2-4EA5-9E05-753DC572BF52" class="sect4"><span class="enumeration_section">6.3.8</span>如何判断是否使用XMLIndex</h4>
                  <div>
                     <p>要了解是否已在解析查询时使用特定的<code class="codeph">XMLIndex</code>索引，可以检查查询的执行计划。
                     </p>
                     <p>在查询编译时，Oracle数据库确定是否可以使用给定的<code class="codeph">XMLIndex</code>索引，即，是否可以将查询重写为针对索引的查询。
                     </p>
                     <p>对于非结构化<code class="codeph">XMLIndex</code>组件，如果在编译时无法确定查询中的XPath表达式是您指定用于<code class="codeph">XMLIndex</code>索引的路径的子集，则不使用索引的非结构化组件。
                     </p>
                     <p>例如，如果包含路径<code class="codeph">/PurchaseOrder/LineItems//*</code>以进行索引，则使用<code class="codeph">/PurchaseOrder/LineItems/LineItem/Description</code>的查询可以使用索引，但是具有<code class="codeph">//Description</code>的查询不能。后者还匹配不是<code class="codeph">/PurchaseOrder/LineItems</code>子元素的潜在<code class="codeph">Description</code>元素，并且在编译时不可能知道数据中是否存在这样的附加<code class="codeph">Description</code>元素。
                     </p>
                     <p>您可以检查查询的执行计划，以查看是否已使用特定的<code class="codeph">XMLIndex</code>索引来解析查询。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果使用索引的<span class="italic">非结构化</span>组件，则在执行计划中引用其路径表，订单键或路径ID。执行计划<span class="italic">并不</span>直接指示的是使用域索引;它<span class="italic">不是</span>指<code class="codeph">XMLIndex</code>按名称索引。参见<a href="indexes-for-XMLType-data.html#GUID-54B95128-EFC2-4EA5-9E05-753DC572BF52__CHDDJDGI">例6-27</a>和<a href="indexes-for-XMLType-data.html#GUID-54B95128-EFC2-4EA5-9E05-753DC572BF52__CHDIEGBF">例6-29</a> 。
                           </p>
                        </li>
                        <li>
                           <p>如果使用索引的<span class="italic">结构化</span>组件，则在执行计划中调用其一个或多个索引内容表。参见<a href="indexes-for-XMLType-data.html#GUID-54B95128-EFC2-4EA5-9E05-753DC572BF52__BCGEFFEG">例6-30</a>和<a href="indexes-for-XMLType-data.html#GUID-54B95128-EFC2-4EA5-9E05-753DC572BF52__BCGJEDEA">例6-31</a> 。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-54B95128-EFC2-4EA5-9E05-753DC572BF52__GUID-BA086F5D-40BD-4DC7-BAC8-3B3D238BCFE6">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../tgsql/query-execution-plans.html#TGSQL-GUID-BE44BB45-C061-4F3A-8F18-4AAC5F74C68A" target="_blank"><span><cite>Oracle数据库SQL调优指南</cite></span></a></p>
                     </div>
                     <p><a href="indexes-for-XMLType-data.html#GUID-54B95128-EFC2-4EA5-9E05-753DC572BF52__CHDDJDGI">例6-27</a>显示在<a href="indexes-for-XMLType-data.html#GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246__CHDJCDCF">例6-10中</a>创建的<code class="codeph">XMLIndex</code>索引用于特定查询。此处执行计划中对<code class="codeph">MY_PATH_TABLE</code>的引用表示此查询中使用了<code class="codeph">XMLIndex</code>索引（在<a href="indexes-for-XMLType-data.html#GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246__CHDJCDCF">示例6-10中</a>创建）。类似地，对列<code class="codeph">LOCATOR</code> ， <code class="codeph">ORDER_KEY</code>和<code class="codeph">PATHID</code>表示相同的事情。
                     </p>
                     <p>给定执行计划中的路径表的名称，您可以获取其<code class="codeph">XMLIndex</code>索引的名称，如<a href="indexes-for-XMLType-data.html#GUID-54B95128-EFC2-4EA5-9E05-753DC572BF52__CHDBCJIG">例6-28</a>所示。（这或多或少与<a href="indexes-for-XMLType-data.html#GUID-07D1AAE8-0B4B-4DAC-806C-3DE4CA0A4246__CHDBCCHJ">示例6-11中</a>的查询相反。）
                     </p>
                     <p><code class="codeph">XMLIndex</code>可用于<code class="codeph">SELECT</code>列表， <code class="codeph">FROM</code>列表和查询的<code class="codeph">WHERE</code>子句中的XPath表达式，它对SQL / XML函数<code class="codeph">XMLQuery</code> ， <code class="codeph">XMLTable</code> ， <code class="codeph">XMLExists</code>和<code class="codeph">XMLCast</code> 。与基于函数的索引（不推荐使用<code class="codeph">XMLType</code> ，当您从文档中的XML片段中提取数据时，可以使用<code class="codeph">XMLIndex</code>索引。
                     </p>
                     <p><a href="indexes-for-XMLType-data.html#GUID-54B95128-EFC2-4EA5-9E05-753DC572BF52__CHDIEGBF">例6-29</a>说明了这一点。
                     </p>
                     <p><a href="indexes-for-XMLType-data.html#GUID-54B95128-EFC2-4EA5-9E05-753DC572BF52__CHDIEGBF">例6-29</a>中的查询执行计划通过引用路径表显示使用了<code class="codeph">XMLIndex</code> 。它还显示了使用Oracle内部SQL函数<code class="codeph">sys_orderkey_depth</code> - 请参阅<a href="indexes-for-XMLType-data.html#GUID-B8CF16F3-CA51-40A0-B654-82BFA54C85EF" title="有几个指南可以帮助您将XMLIndex与非结构化组件一起使用。">使用XMLIndex和非结构化组件的指南</a> 。
                     </p>
                     <p><a href="indexes-for-XMLType-data.html#GUID-54B95128-EFC2-4EA5-9E05-753DC572BF52__BCGEFFEG">示例6-30</a>显示了一个执行计划，该计划指示为使用两个<code class="codeph">WHERE</code>子句谓词的查询拾取<a href="indexes-for-XMLType-data.html#GUID-0BE986CC-BEAE-4F6E-95C9-7DA51D9E0CE0__BCGJCEAF">示例6-23中</a>创建的<code class="codeph">XMLIndex</code>索引。它与<a href="indexes-for-XMLType-data.html#GUID-748DD8D4-2311-4D02-B050-A5940204A2A9__BCGDEHEA">示例6-46中的</a>查询相同，并且相同的XML搜索索引有效，如执行计划中所示。
                     </p>
                     <p>由于<code class="codeph">WHERE</code>子句中有两个不同的路径，因此只使用非结构化<code class="codeph">XMLIndex</code>组件，查询将涉及路径表与其自身的连接。
                     </p>
                     <p>路径表名称<code class="codeph">path_tab</code> <a href="indexes-for-XMLType-data.html#GUID-54B95128-EFC2-4EA5-9E05-753DC572BF52__BCGEFFEG">示例6-30</a>中的存在表示使用了索引的非结构化组件。索引内容表<code class="codeph">po_idx_tab</code>的存在指示使用结构化索引组件。XML搜索索引<code class="codeph">po_ctx_idx</code>的存在表明它也被使用。
                     </p>
                     <p><a href="indexes-for-XMLType-data.html#GUID-54B95128-EFC2-4EA5-9E05-753DC572BF52__BCGJEDEA">示例6-31</a>显示了一个执行计划，该计划指示对于使用多级<code class="codeph">XMLTable</code>链接的查询，也会选择相同的<code class="codeph">XMLIndex</code>索引。由于两个<code class="codeph">XMLTable</code>函数调用中的路径不同，因此仅使用非结构化<code class="codeph">XMLIndex</code>组件，此查询也会涉及将路径表连接到自身。
                     </p>
                     <p>执行计划显示对关系索引内容表的直接访问， <code class="codeph">po_idx_tab</code>和<code class="codeph">po_index_lineitem</code> 。路径表<code class="codeph">path_tab</code> <span class="italic">根本没有</span>访问权限。
                     </p>
                     <div class="section"></div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-54B95128-EFC2-4EA5-9E05-753DC572BF52__CHDDJDGI">
                        <p class="titleinexample">示例6-27检查是否使用了XMLIndex非结构化组件</p><pre class="pre codeblock"><code>SET AUTOCOACE ON EXPLAIN SELECT XMLQuery（'/ PurchaseOrder / Requestor'PASSING OBJECT_VALUE RETURNING CONTENT）from po_binxml WHERE XMLExists（'/ / PurchaseOrder [Reference =“SBELL-2002100912333601PDT”]'PASSING OBJECT_VALUE）; XMLQUERY（'/ PURCHASEORDER / REQUESTOR'PASSINGOBJECT_VALUERETURNINGCONTENT）---------------------------------------- ------------------------------- &lt;Requestor&gt; Sarah J. Bell &lt;/ Requestor&gt;选择了1行。执行计划<span class="bold">。 。 。</span>-------------------------------------------------- -------------------------------------------------- ------------ | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- -------------------------------------------------- ------------ | 0 |选择声明| | 1 | 24 | 28（4）| 00:00:01 | | 1 | SORT GROUP BY | | 1 | 3524 | | | | * 2 |按INDEX ROWID表的访问权限| MY_PATH_TABLE | 2 | 7048 | 3（0）| 00:00:01 | | * 3 | INDEX RANGE SCAN | SYS67616_PO_XMLINDE_ <span class="bold">PIKEY_IX</span> | 1 | | 2（0）| 00:00:01 | | 4 | NESTED LOOPS | | 1 | 24 | 28（4）| 00:00:01 | | 5 |查看| VW_SQ_1 | 1 | 12 | 26（0）| 00:00:01 | | 6 | HASH UNIQUE | | 1 | 5046 | | | | 7 | NESTED LOOPS | | 1 | 5046 | 26（0）| 00:00:01 | | * 8 |按INDEX ROWID表的访问权限| <span class="bold">MY_PATH_TABLE</span> | 1 | 3524 | 24（0）| 00:00:01 | | * 9 | INDEX RANGE SCAN | SYS67616_PO_XMLINDE_ <span class="bold">VALUE_IX</span> | 73 | | 1（0）| 00:00:01 | | * 10 |按INDEX ROWID表的访问权限| <span class="bold">MY_PATH_TABLE</span> | 1 | 1522 | 2（0）| 00:00:01 | | * 11 | INDEX RANGE SCAN | SYS67616_PO_XMLINDE_ <span class="bold">PIKEY_IX</span> | 1 | | 1（0）| 00:00:01 | | 12 |通过USER ROWID表的访问权限| PO_BINXML | 1 | 12 | 1（0）| 00:00:01 | -------------------------------------------------- -------------------------------------------------- ------------谓词信息（由操作ID标识）：----------------------------- ---------------------- 2  - 过滤器（SYS_XMLI_LOC_ISNODE（“SYS_P0”。“ <span class="bold">LOCATOR</span> ”）= 1）3  - 访问（“SYS_P0”。“RID” =：B1 AND“SYS_P0”。“ <span class="bold">PATHID</span> ”= HEXTORAW（'76E2'））8  - 过滤器（“SYS_P4”。“VALUE”='SBELL-2002100912333601PDT'和“SYS_P4”。“ <span class="bold">PATHID</span> ”= HEXTORAW（'4F8C' ）AND SYS_XMLI_LOC_ISNODE（“SYS_P4”。“ <span class="bold">LOCATOR</span> ”）= 1）9  - 访问（SUBSTRB（“VALUE”，1,1599）='SBELL-2002100912333601PDT'）10  - 过滤器（SYS_XMLI_LOC_ISNODE（“SYS_P2”。“ <span class="bold">LOCATOR</span> ”）） = 1）11  - 访问（“SYS_P4”。“RID”=“SYS_P2”。“RID”和“SYS_P2”。“PATHID”= HEXTORAW（'4E36'）和“SYS_P2”。“ <span class="bold">ORDER_KEY</span> ”&lt;“SYS_P4”。 “ <span class="bold">ORDER_KEY</span> ”）过滤器（“SYS_P4”。“ <span class="bold">ORDER_KEY</span> ”&lt; <span class="bold">SYS_ORDERKEY_MAXCHILD</span> （“SYS_P2”。“ <span class="bold">ORDER_KEY</span> ”）和<span class="bold">SYS_ORDERKEY_DEPTH</span> （“SYS_P2”。“ <span class="bold">ORDER_KEY</span> ”）+ 1 = <span class="bold">SYS_ORDERKEY_DEPTH</span> （“SYS_P4”。“ <span class="bold">ORDER_KEY</span> ”）） <span class="bold">。 。 。</span>
</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-54B95128-EFC2-4EA5-9E05-753DC572BF52__CHDBCJIG">
                        <p class="titleinexample">例6-28从路径表名称中获取XMLIndex索引的名称</p><pre class="pre codeblock"><code>SELECT INDEX_NAME FROM USER_XML_INDEXES WHERE PATH_TABLE_NAME ='MY_PATH_TABLE'; INDEX_NAME ------------------------------ PO_XMLINDEX_IX已选中1行。
</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-54B95128-EFC2-4EA5-9E05-753DC572BF52__CHDIEGBF">
                        <p class="titleinexample">示例6-29使用XMLIndex从XML片段中提取数据</p><pre class="pre codeblock"><code>在EXPLAIN上设置AUTOTRACE</code></pre><pre class="pre codeblock"><code>SELECT li.description，li.itemno FROM po_binxml，XMLTable（'/ / PurchaseOrder / LineItems / LineItem'PASSING OBJECT_VALUE COLUMNS“DESCRIPTION”VARCHAR（40）PATH'Description'，“ITEMNO”INTEGER PATH' @ ItemNumber'）li WHERE XMLExists（ '/ PurchaseOrder [Reference =“SBELL-2002100912333601PDT”]'PASSING OBJECT_VALUE）; ITEMNO说明---------------------------------------- -------- - 一个值得纪念的夜晚2个姐妹的难以忍受的轻盈3 3行被选中。</code></pre><pre class="pre codeblock"><code>执行计划------------------------------------------------ -------------------------------------------------- -------------- | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- -------------------------------------------------- ------------ | 0 |选择声明| | 1 | 1546 | 30（4）| 00:00:01 | | * 1 |过滤器| | | | | | | * 2 |按INDEX ROWID表的访问权限| <span class="bold">MY_PATH_TABLE</span> | 1 | 3524 | 3（0）| 00:00:01 | | * 3 | INDEX RANGE SCAN | SYS67616_PO_XMLINDE_ <span class="bold">PIKEY_IX</span> | 1 | | 2（0）| 00:00:01 | | * 4 |过滤器| | | | | | | * 5 |按INDEX ROWID表的访问权限| <span class="bold">MY_PATH_TABLE</span> | 1 | 3524 | 3（0）| 00:00:01 | | * 6 | INDEX RANGE SCAN | SYS67616_PO_XMLINDE_ <span class="bold">PIKEY_IX</span> | 1 | | 2（0）| 00:00:01 | | 7 | NESTED LOOPS | | | | | | | 8 | NESTED LOOPS | | 1 | 1546 | 30（4）| 00:00:01 | | 9 | NESTED LOOPS | | 1 | 24 | 28（4）| 00:00:01 | | 10 |查看| VW_SQ_1 | 1 | 12 | 26（0）| 00:00:01 | | 11 | HASH UNIQUE | | 1 | 5046 | | | | 12 | NESTED LOOPS | | 1 | 5046 | 26（0）| 00:00:01 | | * 13 |按INDEX ROWID表的访问权限| <span class="bold">MY_PATH_TABLE</span> | 1 | 3524 | 24（0）| 00:00:01 | | * 14 | INDEX RANGE SCAN | SYS67616_PO_XMLINDE_ <span class="bold">VALUE_IX</span> | 73 | | 1（0）| 00:00:01 | | * 15 |按INDEX ROWID表的访问权限| <span class="bold">MY_PATH_TABLE</span> | 1 | 1522 | 2（0）| 00:00:01 | | * 16 | INDEX RANGE SCAN | SYS67616_PO_XMLINDE_ <span class="bold">PIKEY_IX</span> | 1 | | 1（0）| 00:00:01 | | 17 |通过USER ROWID表的访问权限| PO_BINXML | 1 | 12 | 1（0）| 00:00:01 | | * 18 | INDEX RANGE SCAN | SYS67616_PO_XMLINDE_ <span class="bold">PIKEY_IX</span> | 1 | | 1（0）| 00:00:01 | | * 19 |按INDEX ROWID表的访问权限| <span class="bold">MY_PATH_TABLE</span> | 1 | 1522 | 2（0）| 00:00:01 | -------------------------------------------------- -------------------------------------------------- ------------谓词信息（由操作ID标识）：----------------------------- ---------------------- 1  -  filter（：B1 &lt; <span class="bold">SYS_ORDERKEY_MAXCHILD</span> （：B2））2  - 过滤器（SYS_XMLI_LOC_ISNODE（“SYS_P2”。“ <span class="bold">LOCATOR</span> ”）= 1）3  - 访问（“SYS_P2”。“RID”=：B1和“SYS_P2”。“ <span class="bold">PATHID</span> ”= HEXTORAW（'28EC'）和“SYS_P2”。“ORDER_KEY”&gt;：B2和“SYS_P2”。“ <span class="bold">ORDER_KEY</span> ” &lt; <span class="bold">SYS_ORDERKEY_MAXCHILD</span> （：B3））过滤器（ <span class="bold">SYS_ORDERKEY_DEPTH</span> （“SYS_P2”。“ <span class="bold">ORDER_KEY</span> ”）= <span class="bold">SYS_ORDERKEY_DEPTH</span> （：B1）+1）4  - 过滤器（：B1 &lt; <span class="bold">SYS_ORDERKEY_MAXCHILD</span> （：B2））5  - 过滤器（SYS_XMLI_LOC_ISNODE（“SYS_P5”） 。“ <span class="bold">LOCATOR</span> ”）= 1）6  - 访问（“SYS_P5”。“RID”=：B1和“SYS_P5”。“ <span class="bold">PATHID</span> ”= HEXTORAW（'60E0'）和“SYS_P5”。“ <span class="bold">ORDER_KEY</span> ”&gt;：B2 AND“ SYS_P5“。” <span class="bold">ORDER_KEY</span> “&lt; <span class="bold">SYS_ORDERKEY_MAXCHILD</span> （：B3））过滤器（ <span class="bold">SYS_ORDERKEY_DEPTH</span> （”SYS_P5“。” <span class="bold">ORDER_KEY</span> “）= <span class="bold">SYS_ORDERKEY_DEPTH</span> （：B1）+1）13  - 过滤器（”SYS_P10“。”VALUE“='SBELL-2002100912333601PDT 'AND“SYS_P10”。“ <span class="bold">PATHID</span> ”= HEXTORAW（'4F8C'）AND SYS_XMLI_LOC_ISNODE（“SYS_P10”。“ <span class="bold">LOCATOR</span> ”）= 1）14  - 访问（SUBSTRB（“VALUE”，1,1599）='SBELL-2002100912333601PDT'）15  - 过滤器（SYS_XMLI_LOC_ISNODE（“SYS_P8”。“ <span class="bold">LOCATOR</span> ”）= 1 ）16  - 访问（“SYS_P10”。“RID”=“SYS_P8”。“RID”和“SYS_P8”。“ <span class="bold">PATHID</span> ”= HEXTORAW（'4E36'）和“SYS_P8”。“ <span class="bold">ORDER_KEY</span> ”&lt;“SYS_P10”。“ <span class="bold">ORDER_KEY</span> “）filter（”SYS_P10“。” <span class="bold">ORDER_KEY</span> “&lt; <span class="bold">SYS_ORDERKEY_MAXCHILD</span> （”SYS_P8“。” <span class="bold">ORDER_KEY</span> “）和<span class="bold">SYS_ORDERKEY_DEPTH</span> （”SYS_P8“。” <span class="bold">ORDER_KEY</span> “）+ 1 = <span class="bold">SYS_ORDERKEY_DEPTH</span> （”SYS_P10“。” <span class="bold">ORDER_KEY</span> “））18  - 访问（ “PO_BINXML”。ROWID =“SYS_ALIAS_4”。“RID”和“SYS_ALIAS_4”。“ <span class="bold">PATHID</span> ”= HEXTORAW（'3748'））19  - 过滤器（SYS_XMLI_LOC_ISNODE（“SYS_ALIAS_4”。“ <span class="bold">LOCATOR</span> ”）= 1）注意-----  - 动态用于此声明的抽样（级别= 2）</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-54B95128-EFC2-4EA5-9E05-753DC572BF52__BCGEFFEG">
                        <p class="titleinexample">示例6-30使用结构化XMLIndex组件进行具有两个谓词的查询</p><pre class="pre codeblock"><code>用于SELECT XMLQuery的解析计划（'/ / PurchaseOrder / LineItems / LineItem'传递OBJECT_VALUE返回内容）来自po_binxml WHERE XMLExists（'/ / PurchaseOrder / LineItems / LineItem [描述包含文本“Picnic”]'PASSING OBJECT_VALUE）和XMLExists（'/ / PurchaseOrder [ User =“SBELL”]'PASSING OBJECT_VALUE）;解释。
 </code></pre><pre class="pre codeblock"><code>-------------------------------------------------- -------------------------------------------------- ------------ | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- -------------------------------------------------- ------------ | 0 |选择声明| | 1 | 2051 | 9（0）| 00:00:01 | | 1 | SORT GROUP BY | | 1 | 3524 | | | | * 2 |通过INDEX ROWID BATCHED表的访问权限<span class="bold">PATH_TAB</span> | 2 | 7048 | 3（0）| 00:00:01 | | * 3 | INDEX RANGE SCAN | SYS86751_PO_XMLINDE_PIKEY_IX | 1 | | 2（0）| 00:00:01 | | 4 | NESTED LOOPS SEMI | | 1 | 2051 | 6（0）| 00:00:01 | | 5 |按INDEX ROWID表的访问权限| PO_BINXML | 1 | 2024 | 4（0）| 00:00:01 | | * 6 | DOMAIN INDEX | <span class="bold">PO_CTX_IDX</span> | | | 4（0）| 00:00:01 | | * 7 |通过INDEX ROWID BATCHED表的访问权限<span class="bold">PO_IDX_TAB</span> | 13 | 351 | 2（0）| 00:00:01 | | * 8 | INDEX RANGE SCAN | SYS86751_86755_OID_IDX | 1 | | 1（0）| 00:00:01 | -------------------------------------------------- -------------------------------------------------- ------------谓词信息（由操作ID标识）：----------------------------- ---------------------- 2  -  filter（SYS_XMLI_LOC_ISNODE（“SYS_P1”。“LOCATOR”）= 1）3  -  access（“SYS_P1”。“RID” =：B1 AND“SYS_P1”。“PATHID”= HEXTORAW（'3748'））6  - 访问（“CTXSYS”。“CONTAINS”（SYS_MAKEXML（0，“XMLDATA”），'&lt;query&gt; &lt;textquery grammar =“CONTEXT “lang =”english“&gt; {Picnic} INPATH（/ PurchaseOrder / LineItems / LineItem / Description）&lt;/ textquery&gt; &lt;xquery&gt; &lt;offset&gt; 0 &lt;/ offset&gt; &lt;/ xquery&gt; &lt;/ query&gt;'）&gt; 0）7 -  filter（“SYS_SXI_0”。“USERNAME”='SBELL'）8  - 访问（“PO_BINXML”。“SYS_NC_OID $”=“SYS_SXI_0”。“OID”）注-----  - 用于此语句的动态采样（ level = 2）选择了30行。</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-54B95128-EFC2-4EA5-9E05-753DC572BF52__BCGJEDEA">
                        <p class="titleinexample">示例6-31为具有多级链接的查询使用结构化XMLIndex组件</p><pre class="pre codeblock"><code>选择po.reference的解释计划，li。* FROM po_binxml p，XMLTable（'/ PurchaseOrder'PASSING p。OBJECT_VALUE COLUMNS引用VARCHAR2（30）PATH'引用'，lineitem XMLType PATH'LineItems / LineItem'）po，XMLTable（'/ LineItem'PASSING po.lineitem COLUMNS itemno BINARY_DOUBLE PATH' @ ItemNumber'，description VARCHAR2（256）PATH'描述'，partno VARCHAR2（14）PATH'Part / @ Id'，数量BINARY_DOUBLE PATH'Part / @ Quantity'，unitprice BINARY_DOUBLE PATH'Part / @ UnitPrice'）li WHERE po.reference ='SBELL-20021009123335280PDT';</code></pre><pre class="pre codeblock"><code>-------------------------------------------------- -------------------------------------------------- --- | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- -------------------------------------------------- --- | 0 |选择声明| | 17 | 20366 | 8（0）| 00:00:01 | | 1 | NESTED LOOPS | | | | | | | 2 | NESTED LOOPS | | 17 | 20366 | 8（0）| 00:00:01 | | 3 | NESTED LOOPS | | 1 | 539 | 3（0）| 00:00:01 | | * 4 |表访问完全| <span class="bold">PO_IDX_TAB</span> | 1 | 529 | 3（0）| 00:00:01 | | * 5 | INDEX UNIQUE SCAN | SYS_C007442 | 1 | 10 | 0（0）| 00:00:01 | | * 6 | INDEX RANGE SCAN | SYS86751_86759_PKY_IDX | 17 | | 1（0）| 00:00:01 | | 7 |按INDEX ROWID表的访问权限| <span class="bold">PO_INDEX_LINEITEM</span> | 17 | 11203 | 5（0）| 00:00:01 | -------------------------------------------------- -------------------------------------------------- ---谓词信息（由操作ID标识）：-------------------------------------- ------------- 4  -  filter（“SYS_SXI_2”。“REFERENCE”='SBELL-20021009123335280PDT'）5  - 访问（“P”。“SYS_NC_OID $”=“SYS_SXI_2”。“OID “）6  - 访问（”SYS_SXI_2“。”KEY“=”SYS_SXI_3“。”PKEY“）注-----  - 用于此语句的动态采样选择了25行。</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="indexes-for-XMLType-data.html#GUID-C936D15C-5F86-4EAE-8552-3890ACD819BC" title="Oracle数据库基于成本的优化器确定如何最经济高效地评估给定查询，包括使用哪些索引（如果有）。为了能够准确地执行此操作，您必须收集有关各种数据库对象的统计信息。">收集基于成本的优化器的XMLIndex对象的统计信息</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-6E6A5BA7-9B84-4E3D-B556-B3B286D26B46">XMLIndex</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4379"></a><a id="ADXDB4378"></a><div class="props_rev_3"><a id="GUID-572DB598-0A31-4143-889B-98D883211FC6" name="GUID-572DB598-0A31-4143-889B-98D883211FC6"></a><h4 id="ADXDB-GUID-572DB598-0A31-4143-889B-98D883211FC6" class="sect4"><span class="enumeration_section">6.3.9</span>关闭XMLIndex的使用</h4>
                  <div>
                     <p>您可以使用优化程序提示关闭<code class="codeph">XMLIndex</code>的使用： <code class="codeph">/*+ NO_XML_QUERY_REWRITE */</code>或优化程序提示<code class="codeph">/*+ NO_XMLINDEX_REWRITE */</code> 。
                     </p>
                     <div class="section">
                        <p>这些提示中的每一个都关闭了<span class="italic">所有</span> <code class="codeph">XMLIndex</code>索引的使用。除了关闭<code class="codeph">XMLIndex</code>的使用外， <code class="codeph">NO_XML_QUERY_REWRITE</code>关闭所有XQuery优化（ <code class="codeph">XMLIndex</code>是XPath重写的一部分）。
                        </p>
                        <p><a href="indexes-for-XMLType-data.html#GUID-572DB598-0A31-4143-889B-98D883211FC6__CHDBJFGE">例6-32</a>显示了这些优化器提示的使用。
                        </p>
                        <div class="infoboxnote" id="GUID-572DB598-0A31-4143-889B-98D883211FC6__GUID-2D3954A8-2FC9-476C-B405-525E36C71E8A">
                           <p class="notep1">注意：</p>
                           <p><code class="codeph">NO_INDEX</code>优化程序提示不适用于<code class="codeph">XMLIndex</code> 。
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-572DB598-0A31-4143-889B-98D883211FC6__GUID-E5938908-5F06-474D-BC76-9F29CF512045">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="xquery-and-XML-DB.html#GUID-11B622EC-8551-43E9-BE1C-1E5EBE777C9E" title="指定了Oracle XML DB不支持的可选XQuery功能。">XQuery可选功能，</a>用于获取有关XQuery编译指示的信息<code class="codeph">ora:no_xmlquery_rewrite</code>和<code class="codeph">ora:xmlquery_rewrite</code> ，可用于细粒度控制XQuery优化</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-572DB598-0A31-4143-889B-98D883211FC6__CHDBJFGE">
                        <p class="titleinexample">示例6-32使用优化程序提示关闭XMLIndex</p><pre class="oac_no_warn" dir="ltr">SELECT <span class="bold">/ * + NO_XMLINDEX_REWRITE * /</span> count（*）FROM po_binxml WHERE XMLExists（'$ p / *'PASSING OBJECT_VALUE AS“p”）; SELECT <span class="bold">/ * + NO_XML_QUERY_REWRITE * /</span> count（*）FROM po_binxml WHERE XMLExists（'$ p / *'PASSING OBJECT_VALUE AS“p”）;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-6E6A5BA7-9B84-4E3D-B556-B3B286D26B46">XMLIndex</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4380"></a><div class="props_rev_3"><a id="GUID-9ADFFD10-BFF1-4807-9FF0-C323DC2A70D8" name="GUID-9ADFFD10-BFF1-4807-9FF0-C323DC2A70D8"></a><h4 id="ADXDB-GUID-9ADFFD10-BFF1-4807-9FF0-C323DC2A70D8" class="sect4"><span class="enumeration_section">6.3.10</span> XMLIndex路径子集：指定要索引的路径</h4>
                  <div>
                     <p>如果您知道最有可能查询的XPath表达式，那么您可以缩小<code class="codeph">XMLIndex</code>索引的重点，从而提高性能。
                     </p>
                     <div class="section">
                        <p>具有非结构化组件的<code class="codeph">XMLIndex</code>索引的一个优点是它非常通用：您不需要指定要索引的XPath位置;您不需要事先了解将要查询的XPath表达式。默认情况下，非结构化<code class="codeph">XMLIndex</code>组件会索引XML数据中所有可能的XPath位置。
                        </p>
                        <p>但是，如果您了解最有可能查询的XPath表达式，则可以缩小<code class="codeph">XMLIndex</code>索引的重点，从而提高性能。索引节点越少意味着索引所需的空间就越少，从而改善了DML操作期间的索引维护。索引节点较少可提高DDL性能，并且具有较小的路径表可提高查询性能。
                        </p>
                        <p>通过修剪与要编制索引的XML片段相对应的XPath表达式（路径）集合来缩小索引的重点，指定所有可能路径的子集。您可以通过两种替代方式执行此操作：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>排除 - 从包含所有可能的XPath表达式的默认行为开始，并从索引中排除其中一些。</p>
                           </li>
                           <li>
                              <p>包含 - 从一组空的XPath表达式开始，用于索引，并添加到此包含集的路径。</p>
                           </li>
                        </ul>
                        <p>您可以在使用<code class="codeph">CREATE INDEX</code>创建<code class="codeph">XMLIndex</code>索引时或使用<code class="codeph">ALTER INDEX</code>修改它时指定路径子集。在这两种情况下，都在语句的<code class="codeph">PARAMETERS</code>子句的<code class="codeph">PATHS</code>参数中提供子集信息。要排除，请使用关键字<code class="codeph">EXCLUDE</code> 。对于包含，您对<code class="codeph">ALTER INDEX</code>使用关键字<code class="codeph">INCLUDE</code>而对<code class="codeph">CREATE INDEX</code>没有关键字（列出要包括的路径）。您还可以为<code class="codeph">PATHS</code>参数指定的节点指定名称空间映射。
                        </p>
                        <p>对于<code class="codeph">ALTER INDEX</code> ，关键字<code class="codeph">INCLUDE</code>或<code class="codeph">EXCLUDE</code>后跟关键字<code class="codeph">ADD</code>或<code class="codeph">REMOVE</code> ，以指示是否要在包含或排除列表中添加或删除关键字后面的路径列表。例如，此语句将path <code class="codeph">/PurchaseOrder/Reference</code>添加到要从索引中排除的路径列表：</p><pre class="oac_no_warn" dir="ltr">ALTER INDEX po_xmlindex_ix REBUILD PARAMETERS（'PATHS（ <span class="bold">EXCLUDE ADD</span> （/ PurchaseOrder / Reference））'）;</pre><p>要更改<code class="codeph">XMLIndex</code>索引以使其<span class="italic">包含所有</span>可能的路径，请使用关键字<code class="codeph">INDEX_ALL_PATHS</code> 。请参见<a href="indexes-for-XMLType-data.html#GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__BCGFAECD">alter_index_paths_clause :: =</a> 。
                        </p>
                        <div class="infoboxnote" id="GUID-9ADFFD10-BFF1-4807-9FF0-C323DC2A70D8__GUID-935A6ECE-04FD-4C8F-B3D1-BAF2C47FE4C4">
                           <p class="notep1">注意：</p>
                           <p>如果创建具有结构化和非结构化组件的<code class="codeph">XMLIndex</code>索引，则默认情况下，结构化组件中索引的任何节点也会在非结构化组件中编制索引;也就是说，它们<span class="italic">不会</span>自动从非结构化组件中<span class="italic">排除</span> 。如果您不希望将非结构化<code class="codeph">XMLIndex</code>索引应用于它们，则必须显式使用路径子集来排除它们。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-F5B41C22-4273-45A8-9BD5-32B7EE3773AC">XMLIndex路径子集的示例</a><br>提供了一些在XPath表达式子集上定义<code class="codeph">XMLIndex</code>索引的示例。
                        </li>
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-24CE95A6-9C40-4DC0-BE58-E2B33C996BC6">XMLIndex路径子集规则</a><br>描述了适用于<code class="codeph">XMLIndex</code>路径子集的规则。
                        </li>
                     </ul>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="indexes-for-XMLType-data.html#GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393" title="定义了CREATE INDEX和ALTER INDEX的PARAMETERS子句的语法。">PARAMETERS CREATE INDEX和ALTER INDEX的子句语法</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-6E6A5BA7-9B84-4E3D-B556-B3B286D26B46">XMLIndex</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB4382"></a><a id="ADXDB4383"></a><a id="ADXDB4384"></a><a id="ADXDB4381"></a><div class="props_rev_3"><a id="GUID-F5B41C22-4273-45A8-9BD5-32B7EE3773AC" name="GUID-F5B41C22-4273-45A8-9BD5-32B7EE3773AC"></a><h5 id="ADXDB-GUID-F5B41C22-4273-45A8-9BD5-32B7EE3773AC" class="sect5"><span class="enumeration_section">6.3.10.1</span> XMLIndex路径子集的示例</h5>
                     <div>
                        <p>提供了一些在XPath表达式子集上定义<code class="codeph">XMLIndex</code>索引的示例。
                        </p>
                        <div class="section"></div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-F5B41C22-4273-45A8-9BD5-32B7EE3773AC__CHDIHICC">
                           <p class="titleinexample">示例6-33使用CREATE INDEX的XMLIndex路径子集</p><pre class="pre codeblock"><code>CREATE INDEX po_xmlindex_ix ON po_binxml（OBJECT_VALUE）INDEXTYPE IS XDB.XMLIndex PARAMETERS（'PATHS（INCLUDE（/ PurchaseOrder / LineItems // * / PurchaseOrder / Reference））'）;</code></pre><p>此语句创建一个索引，仅索引顶级元素<code class="codeph">PurchaseOrder</code>及其某些子项，如下所示：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>所有<code class="codeph">LineItems</code>元素及其后代</p>
                              </li>
                              <li>
                                 <p>所有<code class="codeph">Reference</code>元素</p>
                              </li>
                           </ul>
                           <p>它通过包含指定的路径来实现，从一组用于索引的空路径开始。</p>
                        </div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-F5B41C22-4273-45A8-9BD5-32B7EE3773AC__GUID-E04EB35A-D17B-498B-8017-D15482134C69">
                           <p class="titleinexample">例6-34使用ALTER INDEX的XMLIndex路径子集</p><pre class="pre codeblock"><code>ALTER INDEX po_xmlindex_ix REBUILD PARAMETERS（'PATHS（INCLUDE ADD（/ PurchaseOrder / Requestor / PurchaseOrder / Actions / Action // *））'）;</code></pre><p>此语句为用于索引的路径添加了两个路径。这些路径索引元素<code class="codeph">Requestor</code>和元素<code class="codeph">Action</code>后代（及其祖先）。
                           </p>
                        </div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-F5B41C22-4273-45A8-9BD5-32B7EE3773AC__CHDJEICC">
                           <p class="titleinexample">示例6-35使用命名空间前缀的XMLIndex路径子集</p>
                           <p>如果要用于<code class="codeph">XMLIndex</code>索引的XPath表达式使用名称空间前缀，则可以对<code class="codeph">PATHS</code>列表使用<code class="codeph">NAMESPACE MAPPING</code>子句来指定这些前缀。这是一个例子：</p><pre class="pre codeblock"><code>CREATE INDEX po_xmlindex_ix ON po_binxml（OBJECT_VALUE）INDEXTYPE IS XDB.XMLIndex PARAMETERS（'PATHS（INCLUDE（/ PurchaseOrder / LineItems // * / PurchaseOrder / <span class="bold">ipo：</span> Reference）NAMESPACE MAPPING（xmlns =“http://xmlns.oracle.com” xmlns： <span class="bold">ipo</span> =“http://xmlns.oracle.com/ipo”））'）;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-9ADFFD10-BFF1-4807-9FF0-C323DC2A70D8" title="如果您知道最有可能查询的XPath表达式，那么您可以缩小XMLIndex索引的重点，从而提高性能。">XMLIndex路径子集：指定要索引的路径</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4385"></a><div class="props_rev_3"><a id="GUID-24CE95A6-9C40-4DC0-BE58-E2B33C996BC6" name="GUID-24CE95A6-9C40-4DC0-BE58-E2B33C996BC6"></a><h5 id="ADXDB-GUID-24CE95A6-9C40-4DC0-BE58-E2B33C996BC6" class="sect5"><span class="enumeration_section">6.3.10.2</span> XMLIndex路径子集规则</h5>
                     <div>
                        <p>描述了适用于<code class="codeph">XMLIndex</code>路径子集的规则。
                        </p>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>路径必须仅引用子轴和后代轴，并且它们必须仅测试元素和属性节点或其名称（可能使用通配符）。特别是，路径不得涉及谓词。</p>
                              </li>
                              <li>
                                 <p>您不能同时指定路径排除和路径包含;选择其中一个。</p>
                              </li>
                              <li>
                                 <p>如果使用路径排除（包含）创建索引，则可以仅使用路径排除（包含）对其进行修改 - 索引修改必须进一步限制或进一步扩展路径子集。例如，您无法创建包含某些路径的索引，并随后对其进行修改以排除某些路径。</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-9ADFFD10-BFF1-4807-9FF0-C323DC2A70D8" title="如果您知道最有可能查询的XPath表达式，那么您可以缩小XMLIndex索引的重点，从而提高性能。">XMLIndex路径子集：指定要索引的路径</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADXDB4386"></a><div class="props_rev_3"><a id="GUID-B8CF16F3-CA51-40A0-B654-82BFA54C85EF" name="GUID-B8CF16F3-CA51-40A0-B654-82BFA54C85EF"></a><h4 id="ADXDB-GUID-B8CF16F3-CA51-40A0-B654-82BFA54C85EF" class="sect4"><span class="enumeration_section">6.3.11</span>使用XMLIndex和非结构化组件的指南</h4>
                  <div>
                     <p>有几个指南可以帮助您将<code class="codeph">XMLIndex</code>与非结构化组件一起使用。
                     </p>
                     <p>仅当讨论的两个备选方案返回相同的结果集时，这些准则才适用。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>避免使用祖先元素添加前缀<code class="codeph">//</code> 。例如，使用<code class="codeph">//c</code> ， <span class="italic">而不是</span> <span class="bold"><code class="codeph">/a/b</code></span> <code class="codeph">//c</code> ，前提是这些返回相同的结果集。
                           </p>
                        </li>
                        <li>
                           <p>避免使用祖先元素作为前缀<code class="codeph">/*</code> 。例如，使用<code class="codeph">/*/*/*</code> ， <span class="italic">而不是</span> <span class="bold"><code class="codeph">/a</code></span> <code class="codeph">/*/*</code> ，前提是这些返回相同的结果集。
                           </p>
                        </li>
                        <li>
                           <p>在<code class="codeph">WHERE</code>子句中，使用<code class="codeph">XMLExists</code>而不是<code class="codeph">XMLQuery</code> <code class="codeph">XMLCast</code> 。这可以允许优化实际上针对路径表<code class="codeph">VALUE</code>列调用子查询。例如，使用此：</p><pre class="pre codeblock"><code>SELECT count（*）FROM purchaseorder p WHERE XMLExists（'$ p / PurchaseOrder / LineItems / LineItem / Part [@ Id =“715515011020”]'PASSING OBJECT_VALUE AS“p”）;</code></pre><p>不要用这个：</p><pre class="pre codeblock"><code>SELECT count（*）FROM purchaseorder p WHERE XMLCast（XMLQuery（'$ p / PurchaseOrder / LineItems / LineItem / Part / @ Id'PASSING OBJECT_VALUE AS“p”RETURNING CONTENT）AS VARCHAR2（14））=“715515011020”;</code></pre></li>
                        <li>
                           <p>如果可能，请在<code class="codeph">SELECT</code>子句中使用<code class="codeph">count(*)</code> ， <span class="italic">而不是</span> <code class="codeph">count(XMLCast(XMLQuery(...))</code> 。例如，如果您知道采购订单文档中的<code class="codeph">LineItem</code>元素只有一个<code class="codeph">Description</code>子项，请使用以下命令：</p><pre class="pre codeblock"><code>SELECT count（*）FROM po_binxml，XMLTable（'// LineItem'PASSING OBJECT_VALUE）;</code></pre><p>不要用这个：</p><pre class="pre codeblock"><code>SELECT count（li.value）FROM po_binxml p，XMLTable（'// LineItem'PASSING p。OBJECT_VALUE COLUMNS值VARCHAR2（30）PATH'描述'）li;</code></pre></li>
                        <li>
                           <p>尽可能减少查询<code class="codeph">FROM</code>列表中使用的XPath表达式的数量。例如，使用此：</p><pre class="pre codeblock"><code>SELECT li.description FROM po_binxml p，XMLTable（'PurchaseOrder / LineItems / LineItem'PASSING p。OBJECT_VALUE COLUMNS description VARCHAR2（256）PATH'Description'）li;</code></pre><p>不要用这个：</p><pre class="pre codeblock"><code>SELECT li.description FROM po_binxml p，XMLTable（'PurchaseOrder / LineItems'PASSING p。OBJECT_VALUE）ls，XMLTable（'LineItems / LineItem'PASSING ls。OBJECT_VALUE COLUMNS description VARCHAR2（256）PATH'Description'）li;</code></pre></li>
                        <li>
                           <p>如果在查询中使用XPath表达式向下钻取虚拟表（例如，使用SQL / XML函数<code class="codeph">XMLTable</code>创建），则使用Oracle SQL函数<code class="codeph">sys_orderkey_depth</code>在路径表的订单键上创建辅助索引。以下是此类查询的示例;选择导航到虚拟行项目表<code class="codeph">li</code>元素<code class="codeph">Description</code> 。
                           </p><pre class="pre codeblock"><code>SELECT li.description FROM po_binxml p，XMLTable（'PurchaseOrder / LineItems / LineItem'PASSING p。OBJECT_VALUE COLUMNS description VARCHAR2（256）PATH'Description'）li;</code></pre><p>使用函数<code class="codeph">sys_orderkey_depth</code>评估此类查询，该函数返回order-key值的深度。由于订单索引使用两列，因此所需的索引是列<code class="codeph">ORDER_KEY</code>和<code class="codeph">RID</code>的<span class="italic">复合</span>索引，以及应用于<code class="codeph">ORDER_KEY</code>值的函数<code class="codeph">sys_orderkey_depth</code> 。例如：</p><pre class="pre codeblock"><code>CREATE INDEX depth_ix ON my_path_table（RID，sys_orderkey_depth（ORDER_KEY），ORDER_KEY）;</code></pre><div class="infoboxnotealso" id="GUID-B8CF16F3-CA51-40A0-B654-82BFA54C85EF__GUID-66114AB1-EC95-4DAF-89AF-B96B17694886">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="indexes-for-XMLType-data.html#GUID-54B95128-EFC2-4EA5-9E05-753DC572BF52__CHDIEGBF">示例6-29</a>显示了使用<code class="codeph">sys_orderkey_depth</code></p>
                           </div>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-6E6A5BA7-9B84-4E3D-B556-B3B286D26B46">XMLIndex</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB6001"></a><div class="props_rev_3"><a id="GUID-B8FCC742-EE57-4B86-8B61-17CC780A5821" name="GUID-B8FCC742-EE57-4B86-8B61-17CC780A5821"></a><h4 id="ADXDB-GUID-B8FCC742-EE57-4B86-8B61-17CC780A5821" class="sect4"><span class="enumeration_section">6.3.12</span>使用XMLIndex和结构化组件的指南</h4>
                  <div>
                     <p>有几个指南可以帮助您将<code class="codeph">XMLIndex</code>与结构化组件一起使用。
                     </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>将<code class="codeph">XMLIndex</code>与结构化组件一起使用，将XML数据作为关系列进行投影和索引。不要使用基于函数的索引;不推荐使用它们以与XML一起使用。请参阅<a href="indexes-for-XMLType-data.html#GUID-48E55F3F-A918-4C85-A6B0-0287611C21E1" title="在Oracle Database 11g第2版（11.2）之前的版本中，当XPath表达式以单个节点为目标时，基于函数的索引有时适合与XMLType数据一起使用。Oracle建议您使用XMLIndex的结构化组件。">基于函数的索引已弃用XMLType</a> 。
                           </p>
                        </li>
                        <li>
                           <p>确保查询与具有结构化组件的<code class="codeph">XMLIndex</code>索引之间的数据类型对应关系。请参阅<a href="indexes-for-XMLType-data.html#GUID-E6F787DD-ED63-41FE-ADB4-7FA8F646B254" title="用于XMLIndex结构化组件的关系表使用SQL数据类型。查询中使用的XQuery表达式使用XML数据类型（XML Schema数据类型和XQuery数据类型）。">XMLIndex结构化组件的数据类型注意事项</a> 。
                           </p>
                        </li>
                        <li>
                           <p>如果您创建<code class="codeph">XMLType</code>数据的关系视图（例如，使用SQL函数<code class="codeph">XMLTable</code> ），那么还要考虑使用针对相同关系列的结构化组件创建<code class="codeph">XMLIndex</code>索引。请参阅<a href="relational-views-over-XML-data.html#GUID-420496CE-D62F-4EBE-A76E-861B932AE1E6" title="XML数据的关系数据库视图提供对XML内容的传统关系访问。">XML数据的关系视图</a> 。
                           </p>
                        </li>
                        <li>
                           <p>不使用单个XQuery表达式进行片段提取和值过滤（搜索），而是使用<code class="codeph">SELECT</code>子句中的SQL / XML函数<code class="codeph">XMLQuery</code>来提取<code class="codeph">WHERE</code>子句中的片段和<code class="codeph">XMLExists</code>以过滤值。
                           </p>
                           <p>这使Oracle XML DB可以在功能上或使用流评估来评估片段提取。对于值过滤，这使Oracle XML DB可以获取具有相关结构化组件的<code class="codeph">XMLIndex</code>索引。
                           </p>
                        </li>
                        <li>
                           <p>要对查询结果进行排序，请使用SQL <code class="codeph">ORDER BY</code>子句以及SQL / XML函数<code class="codeph">XMLTable</code> 。避免使用XQuery <code class="codeph">order by</code>子句。如果您将<code class="codeph">XMLIndex</code>索引与结构化组件一起使用，则这一点尤为重要。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-6E6A5BA7-9B84-4E3D-B556-B3B286D26B46">XMLIndex</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4398"></a><a id="ADXDB4399"></a><a id="ADXDB4397"></a><div class="props_rev_3"><a id="GUID-7F44BE51-8F1A-487F-84CD-054E08F7A652" name="GUID-7F44BE51-8F1A-487F-84CD-054E08F7A652"></a><h4 id="ADXDB-GUID-7F44BE51-8F1A-487F-84CD-054E08F7A652" class="sect4"><span class="enumeration_section">6.3.13</span> XMLIndex分区和并行</h4>
                  <div>
                     <p>如果使用范围，列表或散列分区对<code class="codeph">XMLType</code>表或具有<code class="codeph">XMLType</code>列的表进行分区，则还可以在表上创建<code class="codeph">XMLIndex</code>索引。您可以选择确保并行执行索引创建和维护。
                     </p>
                     <div class="section">
                        <p>要确保并行索引创建和维护，请在创建或更改<code class="codeph">XMLIndex</code>索引时使用<code class="codeph">PARALLEL</code>子句（具有可选的度）。
                        </p>
                        <p>如果在创建<code class="codeph">XMLIndex</code>索引时使用关键字<code class="codeph">LOCAL</code> ，则索引及其所有存储表将相对于基表进行本地均分。
                        </p>
                        <p>如果不使用关键字<code class="codeph">LOCAL</code>则无法在分区表上创建<code class="codeph">XMLIndex</code>索引。此外，如果对表进行复合分区，则无法在其上创建<code class="codeph">XMLIndex</code>索引。
                        </p>
                        <p>如果使用<code class="codeph">PARALLEL</code>子句并且基表被分区或启用并行性，那么这可以提高DML操作（ <code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code> ， <code class="codeph">DELETE</code> ）和索引DDL操作（ <code class="codeph">CREATE</code> ， <code class="codeph">ALTER</code> ， <code class="codeph">REBUILD</code> ）的性能。
                        </p>
                        <p>为索引指定并行性也会占用更多存储空间，因为存储参数会单独应用于每个查询服务器进程。例如，在索引创建期间，使用<code class="codeph">INITIAL</code>值5M和并行度12创建的索引消耗至少60M的存储空间。
                        </p>
                        <p><code class="codeph">CREATE INDEX</code>和<code class="codeph">ALTER INDEX</code>的parallelism子句的语法与其他域索引的语法相同：</p><pre class="oac_no_warn" dir="ltr">{NOPARALLEL | PARALLEL [整数]}</pre><p><a href="indexes-for-XMLType-data.html#GUID-7F44BE51-8F1A-487F-84CD-054E08F7A652__CHDGDGFA">例6-36</a>创建了一个并行度为10的<code class="codeph">XMLIndex</code>索引。如果基表已分区，则此索引是均分的。
                        </p>
                        <p>在<a href="indexes-for-XMLType-data.html#GUID-7F44BE51-8F1A-487F-84CD-054E08F7A652__CHDGDGFA">例6-36中</a> ，通过继承创建路径表和二级索引，其具有与<code class="codeph">XMLIndex</code>索引本身10相同的并行度。您可以使用单独的<code class="codeph">PARALLEL</code>子句为这些指定不同的并行度。<a href="indexes-for-XMLType-data.html#GUID-7F44BE51-8F1A-487F-84CD-054E08F7A652__CHDFFICC">例6-37</a>说明了这一点。同样，由于关键字<code class="codeph">LOCAL</code> ，如果基表被分区，则该索引是均分的。
                        </p>
                        <p>在<a href="indexes-for-XMLType-data.html#GUID-7F44BE51-8F1A-487F-84CD-054E08F7A652__CHDFFICC">例6-37中</a> ，由于<code class="codeph">NOPARALLEL</code> ， <code class="codeph">XMLIndex</code>索引本身是串行创建的。辅助索引<code class="codeph">po_pikey_ix</code>也是按<code class="codeph">po_pikey_ix</code>填充的，因为没有为它明确指定并行性;它继承了<code class="codeph">XMLIndex</code>索引的并行性。路径表本身的并行度为10，二级索引值列<code class="codeph">po_value_ix</code>由于其显式并行规范而填充度为5。
                        </p>
                        <p>您在后续DML操作和查询期间将利用您为<code class="codeph">XMLIndex</code>索引，其路径表或其二级索引指定的任何并行性。
                        </p>
                        <p>有两个地方可以为<code class="codeph">XMLIndex</code>指定并行性：在<code class="codeph">PARAMETERS</code>子句括号表达式中以及之后。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-7F44BE51-8F1A-487F-84CD-054E08F7A652__GUID-434DFE6A-FEF3-4AFA-A30F-A53567954909">
                           <p class="notep1">也可以看看：</p>
                           <p>有关<code class="codeph">CREATE INDEX</code> parallel子句的信息，请<a href="../sqlrf/CREATE-INDEX.html#SQLRF01209" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-7F44BE51-8F1A-487F-84CD-054E08F7A652__CHDGDGFA">
                        <p class="titleinexample">示例6-36并行创建XMLIndex索引</p><pre class="pre codeblock"><code>CREATE INDEX po_xmlindex_ix ON sale_info（sale_po_clob）INDEXTYPE IS XDB.XMLIndex <span class="bold">LOCAL PARALLEL 10</span> ;</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-7F44BE51-8F1A-487F-84CD-054E08F7A652__CHDFFICC">
                        <p class="titleinexample">例6-37为XMLIndex内部对象使用不同的PARALLEL度</p><pre class="pre codeblock"><code>CREATE INDEX po_xmlindex_ix ON sale_info（sale_po_clob）INDEXTYPE IS XDB.XMLIndex LOCAL <span class="bold">NOPARALLEL</span> PARAMETERS（'PATH TABLE po_path_table <span class="bold">（PARALLEL 10）</span> PIKEY INDEX po_pikey_ix VALUE INDEX po_value_ix <span class="bold">（PARALLEL 5）</span> '）;</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="indexes-for-XMLType-data.html#GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393" title="定义了CREATE INDEX和ALTER INDEX的PARAMETERS子句的语法。">PARAMETERS CREATE INDEX和ALTER INDEX的子句语法</a></li>
                           <li><a href="indexes-for-XMLType-data.html#GUID-8153B166-9E19-4A4D-967A-5902ECEB4FA9" title="XMLIndex用于索引非结构化或半结构化的XML数据，即通常具有很少或没有固定结构的数据。它适用于存储为二进制XML的XMLType数据。">结构化和非结构化XMLIndex组件</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-6E6A5BA7-9B84-4E3D-B556-B3B286D26B46">XMLIndex</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4401"></a><a id="ADXDB4402"></a><a id="ADXDB4403"></a><a id="ADXDB4400"></a><div class="props_rev_3"><a id="GUID-DCEA65A9-BE27-4291-A2EF-2AA8E9740940" name="GUID-DCEA65A9-BE27-4291-A2EF-2AA8E9740940"></a><h4 id="ADXDB-GUID-DCEA65A9-BE27-4291-A2EF-2AA8E9740940" class="sect4"><span class="enumeration_section">6.3.14</span> XMLIndex索引的异步（延期）维护</h4>
                  <div>
                     <p>您可以推迟维护<span class="italic">仅</span>包含<span class="italic">非结构化</span>组件的<code class="codeph">XMLIndex</code>索引的成本，仅在提交时或数据库负载减少时执行维护。这可以提高DML性能，并且可以在索引同步时启用批量加载非同步索引行。
                     </p>
                     <p>此功能适用于<span class="italic">仅</span>包含<span class="italic">非结构化</span>组件的<code class="codeph">XMLIndex</code>索引。如果为具有<span class="italic">结构化</span>组件的<code class="codeph">XMLIndex</code>索引指定异步维护（即使它也具有非结构化组件），则会引发错误。
                     </p>
                     <p>默认情况下，在每个DML操作中更新（维护） <code class="codeph">XMLIndex</code>索引，以使其与基表保持同步。在某些情况下，您可能不需要这样做，并且可能使用可能过时的索引。在该用例中，您可以决定推迟索引维护的成本，仅在提交时执行或在数据库负载减少的某个时间执行。这可以提高DML性能。它还可以通过在同步索引时批量加载未同步的索引行来提高索引维护性能。
                     </p>
                     <p>在DML操作中，使用陈旧索引除了性能之外没有任何影响。但是，它可能会对查询结果产生影响：如果索引在查询时不是最新的，则查询结果可能也不是最新的。即使基表的只有一列是数据类型<code class="codeph">XMLType</code> ，该表上的所有查询都反映了<code class="codeph">XMLType</code>列上<code class="codeph">XMLIndex</code>索引的上次同步时的数据库数据。
                     </p>
                     <p>您可以使用<code class="codeph">CREATE INDEX</code>或<code class="codeph">ALTER INDEX</code>语句的parameters子句指定索引维护延迟。
                     </p>
                     <p>请注意，即使您推迟<code class="codeph">XMLIndex</code>索引的同步，以下数据库操作也会自动同步索引：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>索引上的任何DDL操作 - <code class="codeph">ALTER INDEX</code>或创建二级索引</p>
                        </li>
                        <li>
                           <p>基表上的任何DDL操作 - <code class="codeph">ALTER TABLE</code>或创建另一个索引</p>
                        </li>
                     </ul>
                     <p><a href="indexes-for-XMLType-data.html#GUID-DCEA65A9-BE27-4291-A2EF-2AA8E9740940__CHDBEJGA" title="此表列出了用于指定它们的同步选项和ASYNC子句语法。">表6-7</a>列出了用于指定它们的同步选项和<code class="codeph">ASYNC</code>子句语法。<code class="codeph">ASYNC</code>子句用于<code class="codeph">XMLIndex</code>的<code class="codeph">CREATE INDEX</code>或<code class="codeph">ALTER INDEX</code>语句的<code class="codeph">PARAMETERS</code>子句中。
                     </p>
                     <div class="tblformal" id="GUID-DCEA65A9-BE27-4291-A2EF-2AA8E9740940__CHDBEJGA">
                        <p class="titleintable">表6-7索引同步</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="索引同步" width="100%" border="1" summary="This table lists the synchronization options and the ASYNC clause syntax you use to specify them." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="25%" id="d34642e7587">何时同步</th>
                                 <th align="left" valign="bottom" width="75%" id="d34642e7590">ASYNC子句语法</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d34642e7595" headers="d34642e7587 ">
                                    <p>总是</p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d34642e7595 d34642e7590 ">
                                    <p><code class="codeph">ASYNC（SYNC ALWAYS）</code></p>
                                    <p>这是默认行为。您可以明确指定它，以取消先前的<code class="codeph">ASYNC</code>规范。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d34642e7608" headers="d34642e7587 ">
                                    <p>提交后</p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d34642e7608 d34642e7590 ">
                                    <p><code class="codeph">ASYNC（SYNC ON COMMIT）</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d34642e7616" headers="d34642e7587 ">
                                    <p>定期</p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d34642e7616 d34642e7590 ">
                                    <p><code class="codeph">ASYNC (SYNC EVERY "</code> <span class="italic"><code class="codeph">repeat_interval</code></span> <code class="codeph">")</code></p>
                                    <p><span class="italic"><code class="codeph">repeat_interval</code></span>与<code class="codeph">DBMS_SCHEDULER</code>的日历语法相同</p>
                                    <p>要使用<code class="codeph">EVERY</code> ，您必须具有<code class="codeph">CREATE JOB</code>权限。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d34642e7644" headers="d34642e7587 ">
                                    <p>手动，按需</p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d34642e7644 d34642e7590 ">
                                    <p><code class="codeph">ASYNC（同步手册）</code></p>
                                    <p>您可以使用PL / SQL过程<code class="codeph">DBMS_XMLINDEX.syncIndex</code>手动同步索引。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>可选的<code class="codeph">ASYNC</code>语法参数<code class="codeph">STALE</code>旨在供将来使用;你永远不需要明确指定它。每当使用<code class="codeph">ALWAYS</code>时，它的值为<code class="codeph">FALSE</code> ;否则它的值为<code class="codeph">TRUE</code> 。指定与此规则相矛盾的显式<code class="codeph">STALE</code>值会引发错误。
                     </p>
                     <p><a href="indexes-for-XMLType-data.html#GUID-DCEA65A9-BE27-4291-A2EF-2AA8E9740940__CHDBCDJD">例6-38</a>创建一个XMLIndex索引，该索引从明天开始每周一下午3:00同步。
                     </p>
                     <p><a href="indexes-for-XMLType-data.html#GUID-DCEA65A9-BE27-4291-A2EF-2AA8E9740940__CHDHIGIA">例6-39</a>手动同步<a href="indexes-for-XMLType-data.html#GUID-DCEA65A9-BE27-4291-A2EF-2AA8E9740940__CHDBCDJD">例6-38中</a>创建的索引。
                     </p>
                     <p>当延迟<code class="codeph">XMLIndex</code>索引同步时，自上次索引同步以来对基表所做的所有DML更改（插入，更新和删除）都记录在挂起表中，每个DML操作一行。此表的名称是静态公共视图<code class="codeph">USER_XML_INDEXES</code> ， <code class="codeph">ALL_XML_INDEXES</code>和<code class="codeph">DBA_XML_INDEXES</code>的列<code class="codeph">PEND_TABLE_NAME</code>的值。</p>
                     <p>您可以检查此表以确定何时同步可能适用于给定的<code class="codeph">XMLIndex</code>索引。挂起表中的行越多，索引可能需要同步的次数就越多。
                     </p>
                     <p>如果挂起表很大，那么在调用<code class="codeph">syncIndex</code>时将参数<code class="codeph">REINDEX</code>设置为<code class="codeph">TRUE</code> ，如<a href="indexes-for-XMLType-data.html#GUID-DCEA65A9-BE27-4291-A2EF-2AA8E9740940__CHDHIGIA">例6-39所示</a> ，可以提高性能。当<code class="codeph">REINDEX</code>为<code class="codeph">TRUE</code> ，将删除所有二级索引，然后在批量加载挂起的表数据后重新创建。
                     </p>
                     <div class="infoboxnotealso" id="GUID-DCEA65A9-BE27-4291-A2EF-2AA8E9740940__GUID-7C45F753-2BB1-4B19-9213-0ED93CA2A212">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../arpls/DBMS_SCHEDULER.html#ARPLS72263" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a> ，“Calendaring Syntax”部分，了解<span class="italic"><code class="codeph">repeat_interval</code></span>的语法</p>
                           </li>
                           <li>
                              <p>有关PL / SQL过程<code class="codeph">DBMS_XMLINDEX.syncIndex</code>信息，请参阅<a href="../arpls/DBMS_XMLINDEX.html#ARPLS212" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="example" id="GUID-DCEA65A9-BE27-4291-A2EF-2AA8E9740940__CHDBCDJD">
                        <p class="titleinexample">示例6-38为XMLIndex指定延迟同步</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX po_xmlindex_ix ON po_binxml（OBJECT_VALUE）INDEXTYPE IS XDB.XMLIndex PARAMETERS（' <span class="bold">ASYNC（SYNC EVERY）FREQ = HOURLY; INTERVAL = 1“）</span> '）;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-DCEA65A9-BE27-4291-A2EF-2AA8E9740940__CHDHIGIA">
                        <p class="titleinexample">示例6-39使用SYNCINDEX手动同步XMLIndex索引</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_XMLINDEX.syncIndex（'OE'，'PO_XMLINDEX_IX'，REINDEX =&gt; TRUE）;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-1D3627B8-0738-450D-8C6A-BB64F4207A36">出现错误时同步XMLIndex索引ORA-08181</a><br>如果查询引发错误ORA-08181，请检查查询的基本<code class="codeph">XMLType</code>表是否具有带有非结构化组件的<code class="codeph">XMLIndex</code>索引。如果是，则使用<code class="codeph">DBMS_XMLINDEX.syncIndex</code>手动同步<code class="codeph">XMLIndex</code>索引。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-6E6A5BA7-9B84-4E3D-B556-B3B286D26B46">XMLIndex</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB6145"></a><div class="props_rev_3"><a id="GUID-1D3627B8-0738-450D-8C6A-BB64F4207A36" name="GUID-1D3627B8-0738-450D-8C6A-BB64F4207A36"></a><h5 id="ADXDB-GUID-1D3627B8-0738-450D-8C6A-BB64F4207A36" class="sect5"><span class="enumeration_section">6.3.14.1</span>在出现错误时同步XMLIndex索引ORA-08181</h5>
                     <div>
                        <p>如果查询引发错误ORA-08181，请检查查询的基本<code class="codeph">XMLType</code>表是否具有带有非结构化组件的<code class="codeph">XMLIndex</code>索引。如果是，则使用<code class="codeph">DBMS_XMLINDEX.syncIndex</code>手动同步<code class="codeph">XMLIndex</code>索引。
                        </p>
                        <div class="section">
                           <p>这仅适用于在以下情况下引发错误ORA-08181的情况：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>在可插拔数据库<span class="italic"><code class="codeph">PDB1</code></span> ，您创建了一个<code class="codeph">XMLType</code>表或列<span class="italic"><code class="codeph">XTABCOL</code></span> ，您使用具有非结构化组件的<code class="codeph">XMLIndex</code>索引对其进行索引。</span></li>
                           <li><span>您将<span class="italic"><code class="codeph">PDB1</code></span>插入容器数据库。</span></li>
                           <li><span>您将<span class="italic"><code class="codeph">PDB1</code></span>克隆到新的可插拔数据库<span class="italic"><code class="codeph">PDB2</code></span> 。</span></li>
                           <li><span>在<span class="italic"><code class="codeph">PDB2</code></span>查询<span class="italic"><code class="codeph">XTABCOL</code></span>时引发错误ORA- <span class="italic"><code class="codeph">PDB2</code></span> 。</span></li>
                        </ol>
                        <div class="section">
                           <p>如果即使在同步之后错误也会引发，则寻找其他原因。错误ORA-08181是一种可在各种情况下引发的一般错误，其中只有一种错误。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="administration-of-XML-DB.html#GUID-C6C0EC34-29F6-47F5-B7A7-88F315403DC9" title="每个可插拔数据库都有自己的Oracle XML DB存储库和自己的Oracle XML DB配置文件xdbconfig.xml。">Oracle XML DB和数据库整合</a></li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-DCEA65A9-BE27-4291-A2EF-2AA8E9740940" title="您可以推迟维护仅包含非结构化组件的XMLIndex索引的成本，仅在提交时或数据库负载减少时执行维护。这可以提高DML性能，并且可以在索引同步时启用批量加载非同步索引行。">XMLIndex索引的异步（延迟）维护</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADXDB4405"></a><a id="ADXDB4404"></a><div class="props_rev_3"><a id="GUID-C936D15C-5F86-4EAE-8552-3890ACD819BC" name="GUID-C936D15C-5F86-4EAE-8552-3890ACD819BC"></a><h4 id="ADXDB-GUID-C936D15C-5F86-4EAE-8552-3890ACD819BC" class="sect4"><span class="enumeration_section">6.3.15</span>为基于开销的优化器收集XMLIndex对象的统计信息</h4>
                  <div>
                     <p>Oracle数据库基于成本的优化器确定如何最经济高效地评估给定查询，包括使用哪些索引（如果有）。为了能够准确地执行此操作，您必须收集有关各种数据库对象的统计信息。</p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-C936D15C-5F86-4EAE-8552-3890ACD819BC__GUID-94855574-E935-4AB8-86C9-2404F19971CA">
                           <p class="notep1">注意：</p>
                           <p>以下内容仅适用于<code class="codeph">DBMS_STATS</code>包中的过程;它不适用于<code class="codeph">ANALYZE INDEX</code> 。</p>
                        </div>
                        <p>对于<code class="codeph">XMLIndex</code> ，通常只需要在定义了<code class="codeph">XMLIndex</code>索引的基表上收集统计信息（例如，使用过程<code class="codeph">DBMS_STATS.gather_table_stats</code> ）。这会自动收集<code class="codeph">XMLIndex</code>索引本身的统计信息，以及路径表，其二级索引以及任何结构化组件内容表及其二级索引。
                        </p>
                        <p>如果删除基表上的统计信息（使用过程<code class="codeph">DBMS_STATS.delete_table_stats</code> ），则还会删除其他对象的统计信息。同样，如果收集有关<code class="codeph">XMLIndex</code>索引的统计信息（使用过程<code class="codeph">DBMS_STATS.gather_index_stats</code> ），则还会在路径表，其二级索引以及任何结构化组件内容表及其二级索引上收集统计信息。
                        </p>
                        <p><a href="indexes-for-XMLType-data.html#GUID-C936D15C-5F86-4EAE-8552-3890ACD819BC__CHDEHFDF">例6-40</a>收集基表<code class="codeph">po_binxml</code>统计信息。自动收集<code class="codeph">XMLIndex</code>索引，路径表和辅助路径表索引的统计信息。
                        </p>
                        <div class="infoboxnotealso" id="GUID-C936D15C-5F86-4EAE-8552-3890ACD819BC__GUID-1CD47A36-B877-42DF-A8CA-3A96DE8B0D67">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="indexes-for-XMLType-data.html#GUID-486E91AE-9FE0-489A-A035-AF320D04350B" title="静态公共视图USER_INDEXES，ALL_INDEXES和DBA_INDEXES中提供了有关标准数据库索引的信息。静态公共视图USER_XML_INDEXES，ALL_XML_INDEXES和DBA_XML_INDEXES中提供了有关XMLIndex索引的类似信息。">与XMLIndex相关的数据字典静态公共视图，</a>用于记录有关记录<code class="codeph">XMLIndex</code>索引的统计信息的数据库视图的信息</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-C936D15C-5F86-4EAE-8552-3890ACD819BC__CHDEHFDF">
                        <p class="titleinexample">例6-40自动收集XMLIndex对象的统计信息</p><pre class="oac_no_warn" dir="ltr">CALL DBMS_STATS.gather_table_stats（USER，'PO_BINXML'，ESTIMATE_PERCENT =&gt; NULL）;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-6E6A5BA7-9B84-4E3D-B556-B3B286D26B46">XMLIndex</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4335"></a><a id="ADXDB4334"></a><div class="props_rev_3"><a id="GUID-486E91AE-9FE0-489A-A035-AF320D04350B" name="GUID-486E91AE-9FE0-489A-A035-AF320D04350B"></a><h4 id="ADXDB-GUID-486E91AE-9FE0-489A-A035-AF320D04350B" class="sect4"><span class="enumeration_section">6.3.16</span>与XMLIndex相关的数据字典静态公共视图</h4>
                  <div>
                     <p>静态公共视图<code class="codeph">USER_INDEXES</code> ， <code class="codeph">ALL_INDEXES</code>和<code class="codeph">DBA_INDEXES</code>提供了有关标准数据库索引的信息。静态公共视图<code class="codeph">USER_XML_INDEXES</code> ， <code class="codeph">ALL_XML_INDEXES</code>和<code class="codeph">DBA_XML_INDEXES</code>提供了有关<code class="codeph">XMLIndex</code>索引的类似信息。</p>
                     <div class="section">
                        <p><a href="indexes-for-XMLType-data.html#GUID-486E91AE-9FE0-489A-A035-AF320D04350B__CHDGHHAB" title="此表描述XMLIndex公共视图中的列。">表6-8</a>描述了每个视图中的列。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-486E91AE-9FE0-489A-A035-AF320D04350B__CHDGHHAB">
                        <p class="titleintable">表6-8 XMLIndex静态公共视图</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="XMLIndex静态公共视图" width="100%" border="1" summary="This table describes the columns in the XMLIndex Public Views." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d34642e8102">列名称</th>
                                 <th align="left" valign="bottom" id="d34642e8105">类型</th>
                                 <th align="left" valign="bottom" id="d34642e8108">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d34642e8113" headers="d34642e8102 ">
                                    <p><code class="codeph">异步</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e8113 d34642e8105 ">
                                    <p><code class="codeph">VARCHAR2</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e8113 d34642e8108 ">
                                    <p>异步索引更新规范。请参阅<a href="indexes-for-XMLType-data.html#GUID-DCEA65A9-BE27-4291-A2EF-2AA8E9740940" title="您可以推迟维护仅包含非结构化组件的XMLIndex索引的成本，仅在提交时或数据库负载减少时执行维护。这可以提高DML性能，并且可以在索引同步时启用批量加载非同步索引行。">XMLIndex索引的异步（延期）维护</a> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d34642e8140" headers="d34642e8102 ">
                                    <p><code class="codeph">EX_OR_INCLUDE</code> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e8140 d34642e8105 ">
                                    <p><code class="codeph">VARCHAR2</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e8140 d34642e8108 ">
                                    <p>路径子集：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><code class="codeph">FULLY_IX</code> - 索引不使用路径子集。
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">EXCLUDE</code> - 索引仅使用排除子集。
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">INCLUDE</code> - 索引仅使用包含子集。
                                          </p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d34642e8169" headers="d34642e8102 ">
                                    <p><code class="codeph">INDEX_NAME</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e8169 d34642e8105 ">
                                    <p><code class="codeph">VARCHAR2</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e8169 d34642e8108 ">
                                    <p><code class="codeph">XMLIndex</code>索引的名称。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d34642e8184" headers="d34642e8102 ">
                                    <p><code class="codeph">INDEX_OWNER</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e8184 d34642e8105 ">
                                    <p><code class="codeph">VARCHAR2</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e8184 d34642e8108 ">
                                    <p>索引的所有者。不适用于<code class="codeph">USER_XML_INDEXES</code> 。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d34642e8199" headers="d34642e8102 ">
                                    <p><code class="codeph">INDEX_TYPE</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e8199 d34642e8105 ">
                                    <p><code class="codeph">VARCHAR2</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e8199 d34642e8108 ">
                                    <p>索引由以下组成的组件类型： <code class="codeph">STRUCTURED</code> ， <code class="codeph">UNSTRUCTURED</code> ，或<code class="codeph">STRUCTURED AND UNSTRUCTURED</code> 。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d34642e8220" headers="d34642e8102 ">
                                    <p><code class="codeph">参数</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e8220 d34642e8105 ">
                                    <p><code class="codeph">的XMLType</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e8220 d34642e8108 ">
                                    <p>来自<code class="codeph">PARAMETERS</code>子句的信息，用于创建索引。
                                    </p>
                                    <p>如果存在非结构化<code class="codeph">XMLIndex</code>组件，则<code class="codeph">PARAMETERS</code>子句可以包括定义路径子集的XPath路径集以及用于同步的调度程序作业的名称。
                                    </p>
                                    <p>如果存在结构化组件，则<code class="codeph">PARAMETERS</code>子句包括结构组的名称和<code class="codeph">XMLTable</code>提供的表定义，包括定义列的XQuery表达式。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d34642e8251" headers="d34642e8102 ">
                                    <p><code class="codeph">PATH_TABLE_NAME</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e8251 d34642e8105 ">
                                    <p><code class="codeph">VARCHAR2</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e8251 d34642e8108 ">
                                    <p><code class="codeph">XMLIndex</code>路径表的名称。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d34642e8266" headers="d34642e8102 ">
                                    <p><code class="codeph">PEND_TABLE_NAME</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e8266 d34642e8105 ">
                                    <p><code class="codeph">VARCHAR2</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e8266 d34642e8108 ">
                                    <p>自上次索引同步以来记录基表DML操作的表的名称。请参阅<a href="indexes-for-XMLType-data.html#GUID-DCEA65A9-BE27-4291-A2EF-2AA8E9740940" title="您可以推迟维护仅包含非结构化组件的XMLIndex索引的成本，仅在提交时或数据库负载减少时执行维护。这可以提高DML性能，并且可以在索引同步时启用批量加载非同步索引行。">XMLIndex索引的异步（延期）维护</a> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d34642e8293" headers="d34642e8102 ">
                                    <p><code class="codeph">TABLE_NAME</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e8293 d34642e8105 ">
                                    <p><code class="codeph">VARCHAR2</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e8293 d34642e8108 ">
                                    <p>定义索引的基表的名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d34642e8305" headers="d34642e8102 ">
                                    <p><code class="codeph">TABLE_OWNER</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e8305 d34642e8105 ">
                                    <p><code class="codeph">VARCHAR2</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d34642e8305 d34642e8108 ">
                                    <p>定义索引的基表的所有者。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>这些视图提供有关<code class="codeph">XMLIndex</code>索引的信息，但没有单个静态数据字典视图提供有关为<code class="codeph">XMLIndex</code>索引收集的统计信息的信息。此统计信息分布在以下视图中：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">USER_INDEXES</code> ， <code class="codeph">ALL_INDEXES</code> ， <code class="codeph">DBA_INDEXES</code> - 列<code class="codeph">LAST_ANALYZED</code>提供上次分析<code class="codeph">XMLIndex</code>索引的日期。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">USER_TAB_STATISTICS</code> ， <code class="codeph">ALL_TAB_STATISTICS</code> ， <code class="codeph">DBA_TAB_STATISTICS</code> -  Column <code class="codeph">TABLE_NAME</code>提供有关<code class="codeph">XMLIndex</code>索引的结构化和非结构化组件的信息。有关结构化或非结构化组件的信息，请分别使用路径表的名称或<code class="codeph">XMLTable</code>表作为<code class="codeph">TABLE_NAME</code> 。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">USER_IND_STATISTICS</code> ， <code class="codeph">ALL_IND_STATISTICS</code> ， <code class="codeph">DBA_IND_STATISTICS</code> - 列<code class="codeph">INDEX_NAME</code>提供有关<code class="codeph">XMLIndex</code>索引的每个二级索引的信息。有关给定二级索引的信息，请使用该二级索引的名称作为<code class="codeph">INDEX_NAME</code> 。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-6E6A5BA7-9B84-4E3D-B556-B3B286D26B46">XMLIndex</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4406"></a><div class="props_rev_3"><a id="GUID-BCC7D521-E6B9-4636-98E1-25628BA0FEFC" name="GUID-BCC7D521-E6B9-4636-98E1-25628BA0FEFC"></a><h4 id="ADXDB-GUID-BCC7D521-E6B9-4636-98E1-25628BA0FEFC" class="sect4"><span class="enumeration_section">6.3.17</span> CREATE INDEX和ALTER INDEX的参数条款</h4>
                  <div>
                     <p>创建或修改<code class="codeph">XMLIndex</code>索引通常涉及使用带有SQL语句<code class="codeph">CREATE INDEX</code>或<code class="codeph">ALTER INDEX</code>的<code class="codeph">PARAMETERS</code>子句。您可以使用它来详细指定索引特征。
                     </p>
                     <div class="section">
                        <p>您可以使用包<code class="codeph">DBMS_XMLINDEX</code> PL / SQL过程<code class="codeph">registerParameter</code>和<code class="codeph">modifyParameter</code>来绕过1000个字符的<code class="codeph">PARAMETERS</code>子句限制。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-C04D8939-4A3C-4C54-8399-109AC4914D03">使用XMLIndex的Registered PARAMETERS子句</a><br>用于<code class="codeph">CREATE INDEX</code>或<code class="codeph">ALTER INDEX</code>语句的<code class="codeph">PARAMETERS</code>子句的字符串值具有1000个字符的限制。要解决此限制，您可以在包<code class="codeph">DBMS_XMLINDEX</code>使用PL / SQL过程<code class="codeph">registerParameter</code>和<code class="codeph">modifyParameter</code> 。</li>
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393">PARAMETERS CREATE INDEX和ALTER INDEX的子句语法</a><br>定义了<code class="codeph">CREATE INDEX</code>和<code class="codeph">ALTER INDEX</code>的<code class="codeph">PARAMETERS</code>子句的语法。
                        </li>
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-CF497695-F726-4C7D-B8D8-3B27D18FD56C">XMLIndex_parameters_clause的用法</a><br>创建<code class="codeph">XMLIndex</code>索引时，如果没有<span class="italic"><code class="codeph">XMLIndex_parameters_clause</code></span> ，则新索引只有非结构化组件。如果存在<span class="italic"><code class="codeph">XMLIndex_parameters_clause</code></span> ，但<code class="codeph">PARAMETERS</code>参数为空（ <code class="codeph">''</code> ），则结果相同：仅包含非结构化组件的索引。
                        </li>
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-0563D8B4-9C46-4620-B814-0D608B57F84C">XMLIndex_parameters的用法</a><br>某些注意事项适用于使用<span class="italic"><code class="codeph">XMLIndex_parameters</code></span> 。
                        </li>
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-602801B1-9A89-4ADE-B3C5-DABDFBB331A7">PATHS条款的用法</a><br>某些注意事项适用于使用<code class="codeph">PATHS</code>子句。
                        </li>
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-D452BE20-A1BC-4672-B3E0-A09C07BA327D">create_index_paths_clause和alter_index_paths_clause的用法</a><br>某些注意事项适用于使用<span class="italic"><code class="codeph">create_index_paths_clause</code></span>和<span class="italic"><code class="codeph">alter_index_paths_clause</code></span> 。
                        </li>
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-7B126CF1-5397-455C-B01D-696CF64B2001">使用pikey_clause，path_id_clause和order_key_clause</a><br>从语法<code class="codeph">pikey_clause</code> ，每个子句<code class="codeph">pikey_clause</code> ， <code class="codeph">path_id_clause</code>和<code class="codeph">order_key_clause</code>都是可选的。即使您未指定<code class="codeph">pikey_clause</code>也会创建一个pikey索引。要创建路径ID索引或订单键索引，必须分别指定<code class="codeph">path_id_clause</code>或<code class="codeph">order_key_clause</code> 。
                        </li>
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-3D908187-37BE-48DB-88A3-285442FB3DE1">value_clause的用法</a><br>某些注意事项适用于使用<span class="italic"><code class="codeph">value_clause</code></span> 。
                        </li>
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-F12AB99C-F7B1-428F-A008-D096B126E8C1">async_clause的用法</a><br>某些注意事项适用于使用<code class="codeph">ASYNC</code>子句。
                        </li>
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-35B0101C-DB6B-460B-9587-D7254DD1079D">使用groups_clause和alter_index_group_clause</a><br>子句<span class="italic"><code class="codeph">groups_clause</code></span>仅用于<code class="codeph">CREATE INDEX</code> （或在子句<span class="italic"><code class="codeph">alter_index_group_clause</code></span> <code class="codeph">ADD GROUP</code> <span class="italic"><code class="codeph">alter_index_group_clause</code></span> ）。条款<span class="italic"><code class="codeph">alter_index_group_clause</code></span>仅用于<code class="codeph">ALTER INDEX</code> 。</li>
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-A4FD18EE-D43B-44B0-86CE-27D4CE995E42">XMLIndex_xmltable_clause的用法</a><br>某些注意事项适用于使用<span class="italic"><code class="codeph">XMLIndex_xmltable_clause</code></span> 。
                        </li>
                        <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-D4474161-F125-4703-98D2-7C609F8806E7">column_clause的用法</a><br>某些注意事项适用于使用<span class="italic"><code class="codeph">column_clause</code></span> 。
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-BCC7D521-E6B9-4636-98E1-25628BA0FEFC__GUID-6298526F-A48D-4A8A-B298-9C82DB28E283">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../sqlrf/CREATE-INDEX.html#SQLRF20021" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> ，了解<span class="italic"><code class="codeph">index_attributes</code></span>的语法</p>
                           </li>
                           <li>
                              <p>有关<span class="italic"><code class="codeph">segment_attributes_clause</code></span>语法的<a href="../sqlrf/CREATE-TABLE.html#SQLRF20022" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF20023" target="_blank"><span><cite>Oracle数据库SQL语言参考，</cite></span></a>用于<span class="italic"><code class="codeph">table_properties</code></span>的语法</p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/parallel_clause.html#SQLRF20024" target="_blank"><span><cite>Oracle数据库SQL语言参考，</cite></span></a>用于<span class="italic"><code class="codeph">parallel_clause</code></span>的语法</p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">CREATE INDEX</code>语法和语义的其他信息，请<a href="../sqlrf/CREATE-INDEX.html#SQLRF01209" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">ALTER INDEX</code>语法和语义的其他信息，请<a href="../sqlrf/ALTER-INDEX.html#SQLRF00805" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_SCHEDULER.html#ARPLS72263" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a> ，“Calendaring Syntax”部分，了解<span class="italic"><code class="codeph">repeat_interval</code></span>的语法</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-6E6A5BA7-9B84-4E3D-B556-B3B286D26B46">XMLIndex</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADXDB4407"></a><div class="props_rev_3"><a id="GUID-C04D8939-4A3C-4C54-8399-109AC4914D03" name="GUID-C04D8939-4A3C-4C54-8399-109AC4914D03"></a><h5 id="ADXDB-GUID-C04D8939-4A3C-4C54-8399-109AC4914D03" class="sect5"><span class="enumeration_section">6.3.17.1</span>为XMLIndex使用已注册的PARAMETERS子句</h5>
                     <div>
                        <p>用于<code class="codeph">CREATE INDEX</code>或<code class="codeph">ALTER INDEX</code>语句的<code class="codeph">PARAMETERS</code>子句的字符串值具有1000个字符的限制。要解决此限制，您可以在包<code class="codeph">DBMS_XMLINDEX</code>使用PL / SQL过程<code class="codeph">registerParameter</code>和<code class="codeph">modifyParameter</code> 。</p>
                        <div class="section">
                           <p>对于每个过程，您提供一串参数（长度不限）和一个用于注册字符串的标识符。然后，在索引<code class="codeph">PARAMETERS</code>子句中，提供前面带有关键字<code class="codeph">PARAM</code>的标识符，而不是文字字符串。
                           </p>
                           <p>必须先注册该标识符，然后才能在<code class="codeph">CREATE INDEX</code>或<code class="codeph">ALTER INDEX</code>语句中使用它。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-C04D8939-4A3C-4C54-8399-109AC4914D03__GUID-6CB729AD-0B47-4BD2-9036-C402C71194B6">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="indexes-for-XMLType-data.html#GUID-0BE986CC-BEAE-4F6E-95C9-7DA51D9E0CE0__BCGJCEAF">例6-23</a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-BCC7D521-E6B9-4636-98E1-25628BA0FEFC" title="创建或修改XMLIndex索引通常涉及使用带有SQL语句CREATE INDEX或ALTER INDEX的PARAMETERS子句。您可以使用它来详细指定索引特征。">CREATE INDEX和ALTER INDEX的PARAMETERS子句</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4409"></a><a id="ADXDB4410"></a><a id="ADXDB4411"></a><a id="ADXDB5832"></a><a id="ADXDB4412"></a><a id="ADXDB4413"></a><a id="ADXDB4414"></a><a id="ADXDB4415"></a><a id="ADXDB5833"></a><a id="ADXDB4416"></a><a id="ADXDB4417"></a><a id="ADXDB4418"></a><a id="ADXDB5834"></a><a id="ADXDB4419"></a><a id="ADXDB4420"></a><a id="ADXDB5835"></a><a id="ADXDB4421"></a><a id="ADXDB4422"></a><a id="ADXDB4423"></a><a id="ADXDB4424"></a><a id="ADXDB4425"></a><a id="ADXDB4426"></a><a id="ADXDB4427"></a><a id="ADXDB4428"></a><a id="ADXDB4429"></a><a id="ADXDB6106"></a><a id="ADXDB6107"></a><a id="ADXDB4408"></a><div class="props_rev_3"><a id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393" name="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393"></a><h5 id="ADXDB-GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393" class="sect5"><span class="enumeration_section">6.3.17.2</span>参数子句CREATE INDEX和ALTER INDEX的语法</h5>
                     <div>
                        <p>定义了<code class="codeph">CREATE INDEX</code>和<code class="codeph">ALTER INDEX</code>的<code class="codeph">PARAMETERS</code>子句的语法。
                        </p>
                        <div class="section"></div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-EEBA83C3-9AE1-4D7E-AD69-0A38F7A2E421"><span class="italic">XMLIndex_parameters_clause :: =</span></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="figure" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-22945D8D-CE93-4FED-A2B9-79DFD2D6230C"><img src="img/xmlindex_parameters_clause.gif" width="318" alt="下面是xmlindex_parameters_clause.eps的描述" title="下面是xmlindex_parameters_clause.eps的描述" longdesc="img_text/xmlindex_parameters_clause.html"><br><a href="img_text/xmlindex_parameters_clause.html">插图描述xmlindex_parameters_clause.eps</a></div>
                           <!-- class="figure" -->
                           <div class="infoboxnotealso" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-C98E9FB9-BC89-4BDD-AC08-8FA6A168457C">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="indexes-for-XMLType-data.html#GUID-CF497695-F726-4C7D-B8D8-3B27D18FD56C" title="创建XMLIndex索引时，如果没有XMLIndex_parameters_clause，则新索引只有非结构化组件。如果存在XMLIndex_parameters_clause，但PARAMETERS参数为空（&#39;&#39;），则结果相同：仅包含非结构化组件的索引。">XMLIndex_parameters_clause的用法</a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-538B98D3-6B79-4023-BE4D-4FCCE45513A6"><span class="italic">XMLIndex_parameters :: =</span></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="figure" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-46FCC879-D90B-4132-9DFE-982F5387C8BE"><img src="img/xmlindex_parameters.gif" width="376" alt="下面是xmlindex_parameters.eps的描述" title="下面是xmlindex_parameters.eps的描述" longdesc="img_text/xmlindex_parameters.html"><br><a href="img_text/xmlindex_parameters.html">插图描述xmlindex_parameters.eps</a></div>
                           <!-- class="figure" -->
                           <div class="infoboxnotealso" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-BB050FB2-8EDE-4DDD-8112-3669936667F6">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="indexes-for-XMLType-data.html#GUID-0563D8B4-9C46-4620-B814-0D608B57F84C" title="某些注意事项适用于使用XMLIndex_parameters。">XMLIndex_parameters的用法</a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-09A963C1-F003-469B-96D8-2EF903AE2063"><span class="italic">XMLIndex_parameter_clause :: =</span></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="figure" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-752DCF5B-17A6-44B0-8885-322075A7ACCE"><img src="img/xmlindex_parameter_clause.gif" width="138" alt="下面是xmlindex_parameter_clause.eps的描述" title="下面是xmlindex_parameter_clause.eps的描述" longdesc="img_text/xmlindex_parameter_clause.html"><br><a href="img_text/xmlindex_parameter_clause.html">插图描述xmlindex_parameter_clause.eps</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-8DC6B2EB-2119-46A9-BCD2-9A9D600F9DA6"><span class="italic">unstructured_clause :: =</span></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="figure" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-9BACE068-2AB2-44A0-A5E3-CB6B6740F318"><img src="img/unstructured_clause.gif" width="291" alt="下面是unstructured_clause.eps的描述" title="下面是unstructured_clause.eps的描述" longdesc="img_text/unstructured_clause.html"><br><a href="img_text/unstructured_clause.html">说明unstructured_clause.eps</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-51CFCD6F-51B6-43F0-8C98-F568F1498D4B"><span class="italic">create_index_paths_clause :: =</span></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="figure" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-B52C3262-79E0-431F-936F-97FA7A79F32F"><img src="img/create_index_paths_clause.gif" width="427" alt="下面是create_index_paths_clause.eps的描述" title="下面是create_index_paths_clause.eps的描述" longdesc="img_text/create_index_paths_clause.html"><br><a href="img_text/create_index_paths_clause.html">说明create_index_paths_clause.eps的说明</a></div>
                           <!-- class="figure" -->
                           <div class="infoboxnotealso" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-13860D3C-FD4D-41F2-9A98-9E2F8B083DE4">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="indexes-for-XMLType-data.html#GUID-602801B1-9A89-4ADE-B3C5-DABDFBB331A7" title="某些注意事项适用于使用PATHS子句。">PATHS条款的用法</a></p>
                                 </li>
                                 <li>
                                    <p><a href="indexes-for-XMLType-data.html#GUID-D452BE20-A1BC-4672-B3E0-A09C07BA327D" title="某些注意事项适用于使用create_index_paths_clause和alter_index_paths_clause。">create_index_paths_clause和alter_index_paths_clause的用法</a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__BCGFAECD">
                           <p class="subhead3" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-4891C26C-75B7-4AC5-929D-23E4C134318D"><span class="italic">alter_index_paths_clause :: =</span></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="figure" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-837A5031-6A94-4CB2-B88A-E51B066B6F7C"><img src="img/alter_index_paths_clause.gif" width="532" alt="下面是alter_index_paths_clause.eps的说明" title="下面是alter_index_paths_clause.eps的说明" longdesc="img_text/alter_index_paths_clause.html"><br><a href="img_text/alter_index_paths_clause.html">说明alter_index_paths_clause.eps的说明</a></div>
                           <!-- class="figure" -->
                           <div class="infoboxnotealso" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-36FC14F5-F78F-49FA-B4A6-86B6534A81BA">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="indexes-for-XMLType-data.html#GUID-602801B1-9A89-4ADE-B3C5-DABDFBB331A7" title="某些注意事项适用于使用PATHS子句。">PATHS条款的用法</a></p>
                                 </li>
                                 <li>
                                    <p><a href="indexes-for-XMLType-data.html#GUID-D452BE20-A1BC-4672-B3E0-A09C07BA327D" title="某些注意事项适用于使用create_index_paths_clause和alter_index_paths_clause。">create_index_paths_clause和alter_index_paths_clause的用法</a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-4895ADE6-2260-419F-B56B-E1D125BDB91A"><span class="italic">namespace_mapping_clause :: =</span></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="figure" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-756E1FE2-AD89-41D7-A809-3394D9DAB955"><img src="img/namespace_mapping_clause.gif" width="287" alt="下面是namespace_mapping_clause.eps的描述" title="下面是namespace_mapping_clause.eps的描述" longdesc="img_text/namespace_mapping_clause.html"><br><a href="img_text/namespace_mapping_clause.html">说明namespace_mapping_clause.eps的说明</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__BCGJAGCI">
                           <p class="subhead3" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-5A96E21F-14E4-47D3-9760-889D6C454E46"><span class="italic">path_table_clause :: =</span></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="figure" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-A2B60DE1-4E71-4CB6-A765-D1C590484CD5"><img src="img/path_table_clause.gif" width="485" alt="下面是path_table_clause.eps的描述" title="下面是path_table_clause.eps的描述" longdesc="img_text/path_table_clause.html"><br><a href="img_text/path_table_clause.html">说明path_table_clause.eps的说明</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-67FC14D7-1897-4DAC-9FB3-26812FDBE8FF"><span class="italic">pikey_clause :: =</span></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="figure" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-5B98FFF2-2F94-4AF2-A00D-65A91F83F6C9"><img src="img/pikey_clause.gif" width="396" alt="下面是pikey_clause.eps的描述" title="下面是pikey_clause.eps的描述" longdesc="img_text/pikey_clause.html"><br><a href="img_text/pikey_clause.html">说明pikey_clause.eps的描述</a></div>
                           <!-- class="figure" -->
                           <div class="infoboxnotealso" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-32EA0C93-902C-4EBE-807C-67E3D7654855">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="indexes-for-XMLType-data.html#GUID-7B126CF1-5397-455C-B01D-696CF64B2001" title="从语法上讲，每个子句pikey_clause，path_id_clause和order_key_clause都是可选的。即使您未指定pikey_clause，也会创建一个pikey索引。要创建路径ID索引或订单键索引，必须分别指定path_id_clause或order_key_clause。">使用pikey_clause，path_id_clause和order_key_clause</a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-D2073083-C361-43F3-973A-2AAA2ECDCE3A"><span class="italic">path_id_clause :: =</span></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="figure" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-35BEC568-0DDA-4075-8EA1-4AD94B0150EB"><img src="img/path_id_clause.gif" width="423" alt="下面是path_id_clause.eps的描述" title="下面是path_id_clause.eps的描述" longdesc="img_text/path_id_clause.html"><br><a href="img_text/path_id_clause.html">说明path_id_clause.eps的说明</a></div>
                           <!-- class="figure" -->
                           <div class="infoboxnotealso" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-FD260B24-0AC2-4313-AB34-BE5ED10D33F8">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="indexes-for-XMLType-data.html#GUID-7B126CF1-5397-455C-B01D-696CF64B2001" title="从语法上讲，每个子句pikey_clause，path_id_clause和order_key_clause都是可选的。即使您未指定pikey_clause，也会创建一个pikey索引。要创建路径ID索引或订单键索引，必须分别指定path_id_clause或order_key_clause。">使用pikey_clause，path_id_clause和order_key_clause</a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-0629A118-3653-4F0F-8E18-6639DB18DD0F"><span class="italic">order_key_clause :: =</span></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="figure" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-692BD0F4-CE28-4763-BDEC-B8A8ED83F52E"><img src="img/order_key_clause.gif" width="440" alt="order_key_clause.eps的描述如下" title="order_key_clause.eps的描述如下" longdesc="img_text/order_key_clause.html"><br><a href="img_text/order_key_clause.html">插图说明order_key_clause.eps</a></div>
                           <!-- class="figure" -->
                           <div class="infoboxnotealso" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-C0017A22-39D4-4D44-8329-5CCD7D9902FB">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="indexes-for-XMLType-data.html#GUID-7B126CF1-5397-455C-B01D-696CF64B2001" title="从语法上讲，每个子句pikey_clause，path_id_clause和order_key_clause都是可选的。即使您未指定pikey_clause，也会创建一个pikey索引。要创建路径ID索引或订单键索引，必须分别指定path_id_clause或order_key_clause。">使用pikey_clause，path_id_clause和order_key_clause</a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-45622D2D-1BF3-462C-8075-475DCF288E86"><span class="italic">value_clause :: =</span></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="figure" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-303056F8-EFBF-465C-A46C-7F646276D8F9"><img src="img/value_clause.gif" width="399" alt="下面是value_clause.eps的描述" title="下面是value_clause.eps的描述" longdesc="img_text/value_clause.html"><br><a href="img_text/value_clause.html">插图描述value_clause.eps</a></div>
                           <!-- class="figure" -->
                           <div class="infoboxnotealso" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-63D45313-916C-422B-80A0-2BF695779730">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="indexes-for-XMLType-data.html#GUID-3D908187-37BE-48DB-88A3-285442FB3DE1" title="某些注意事项适用于使用value_clause。">value_clause的用法</a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__BCGGGBCB">
                           <p class="subhead3" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-D38DA6DA-21EB-4D89-9E76-8A49C09270FA"><span class="italic">drop_path_table_clause :: =</span></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="figure" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-BE350CDB-9167-47CF-8D9E-FF1733D810A9"><img src="img/drop_path_table_clause.gif" width="151" alt="drop_path_table_clause.eps的描述如下" title="drop_path_table_clause.eps的描述如下" longdesc="img_text/drop_path_table_clause.html"><br><a href="img_text/drop_path_table_clause.html">插图说明drop_path_table_clause.eps</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-4D549AFC-1C79-464A-8DF2-C7D6FB162379"><span class="italic">parallel_clause :: =</span></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="figure" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-0F378CCC-7B45-4DA9-852D-6B36658731A9"><img src="img/parallel_clause.gif" width="186" alt="parallel_clause.eps的描述如下" title="parallel_clause.eps的描述如下" longdesc="img_text/parallel_clause.html"><br><a href="img_text/parallel_clause.html">parallel_clause.eps插图的描述</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__BCGFGBEB">
                           <p class="subhead3" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-DD4CCBE6-6A54-4568-987C-A4708C0BE822"><span class="italic">structured_clause :: =</span></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="figure" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-C3D9026F-D932-48D1-A249-B9E0E91EF357"><img src="img/structured_clause.gif" width="159" alt="结果是structured_clause.eps的描述如下" title="结果是structured_clause.eps的描述如下" longdesc="img_text/structured_clause.html"><br><a href="img_text/structured_clause.html">结构说明structured_clause.eps</a></div>
                           <!-- class="figure" -->
                           <div class="infoboxnotealso" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-5093170E-E559-4919-A53B-16225E7BD5A0">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="indexes-for-XMLType-data.html#GUID-35B0101C-DB6B-460B-9587-D7254DD1079D" title="子句groups_clause仅用于CREATE INDEX（或在子句alter_index_group_clause中的ADD GROUP之后）。条款alter_index_group_clause仅用于ALTER INDEX。">使用groups_clause和alter_index_group_clause</a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-7C5A4C06-458B-4268-94C1-EAF87B4CA203"><span class="italic">async_clause :: =</span></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="figure" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-BE6C1E4E-6CC6-4064-A9FB-3F3FB31C3AA7"><img src="img/async_clause.gif" width="508" alt="下面是async_clause.eps的描述" title="下面是async_clause.eps的描述" longdesc="img_text/async_clause.html"><br><a href="img_text/async_clause.html">async_clause.eps插图的描述</a></div>
                           <!-- class="figure" -->
                           <div class="infoboxnotealso" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-558C4F03-A725-4A11-8744-0FF8DCAA0389">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="indexes-for-XMLType-data.html#GUID-F12AB99C-F7B1-428F-A008-D096B126E8C1" title="某些注意事项适用于使用ASYNC子句。">async_clause的用法</a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-1558A55A-590F-44D7-99C6-38B9C5992494"><span class="italic">groups_clause :: =</span></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="figure" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-77B8AFED-CF5F-4351-B1A0-78C986DD12D1"><img src="img/groups_clause.gif" width="112" alt="下面是groups_clause.eps的描述" title="下面是groups_clause.eps的描述" longdesc="img_text/groups_clause.html"><br><a href="img_text/groups_clause.html">插图说明groups_clause.eps</a></div>
                           <!-- class="figure" -->
                           <div class="infoboxnotealso" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-2E78604E-3FF6-4347-A5B4-DB7E543C5A42">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="indexes-for-XMLType-data.html#GUID-35B0101C-DB6B-460B-9587-D7254DD1079D" title="子句groups_clause仅用于CREATE INDEX（或在子句alter_index_group_clause中的ADD GROUP之后）。条款alter_index_group_clause仅用于ALTER INDEX。">使用groups_clause和alter_index_group_clause</a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-9E03CA27-77FC-4A08-B904-9694DDCEDFD5"><span class="italic">group_clause :: =</span></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="figure" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-2808C9B7-D93C-4D3F-9BD9-B7AEBAE67970"><img src="img/group_clause.gif" width="283" alt="下面是group_clause.eps的描述" title="下面是group_clause.eps的描述" longdesc="img_text/group_clause.html"><br><a href="img_text/group_clause.html">插图描述group_clause.eps</a></div>
                           <!-- class="figure" -->
                           <div class="infoboxnotealso" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-F1D62A14-E1C7-48C3-9559-B17D7AF0849E">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="indexes-for-XMLType-data.html#GUID-35B0101C-DB6B-460B-9587-D7254DD1079D" title="子句groups_clause仅用于CREATE INDEX（或在子句alter_index_group_clause中的ADD GROUP之后）。条款alter_index_group_clause仅用于ALTER INDEX。">使用groups_clause和alter_index_group_clause</a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-3692A828-7BD4-433C-8986-9F683070F958"><span class="italic">XMLIndex_xmltable_clause :: =</span></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="figure" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-C1E9E927-A73C-4E2A-92B9-31FBD1EBFCFB"><img src="img/xmlindex_xmltable_clause.gif" alt="下面是xmlindex_xmltable_clause.eps的描述" title="下面是xmlindex_xmltable_clause.eps的描述" longdesc="img_text/xmlindex_xmltable_clause.html"><br><a href="img_text/xmlindex_xmltable_clause.html">插图说明xmlindex_xmltable_clause.eps</a></div>
                           <!-- class="figure" -->
                           <p>语法元素<tt>XML_namespaces_clause</tt>和<tt>XQuery_string</tt>与SQL / XML函数<code class="codeph">XMLTable</code> 。
                           </p>
                           <div class="infoboxnotealso" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-51982120-529B-4D7F-A337-1C31C3C44219">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="indexes-for-XMLType-data.html#GUID-A4FD18EE-D43B-44B0-86CE-27D4CE995E42" title="某些注意事项适用于使用XMLIndex_xmltable_clause。">XMLIndex_xmltable_clause的用法</a></p>
                                 </li>
                                 <li>
                                    <p><a href="xquery-and-XML-DB.html#GUID-F4508470-D420-4B5A-B5DF-59A424887F10" title="您可以使用SQL / XML函数XMLTable将XQuery表达式求值的结果分解为新虚拟表的关系行和列。您可以将此数据插入到预先存在的数据库表中，也可以使用SQL在连接表达式中查询它。">Oracle XML DB中的XMLTABLE SQL / XML函数</a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-A4AD5B4E-24B5-4CE5-B3AB-F324F72D3469"><span class="italic">column_clause :: =</span></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="figure" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-D5D4C8BB-669E-4DF1-B77D-85669BC13CAC"><img src="img/column_clause.gif" width="319" alt="下面是column_clause.eps的描述" title="下面是column_clause.eps的描述" longdesc="img_text/column_clause.html"><br><a href="img_text/column_clause.html">插图描述column_clause.eps</a></div>
                           <!-- class="figure" -->
                           <p>语法元素<tt>column_clause</tt>相似，但不完全相同<tt>，XML_table_column</tt>在SQL / XML功能<code class="codeph">XMLTable</code> 。
                           </p>
                           <div class="infoboxnotealso" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-B6BCE32F-DAA8-4D15-A626-DCA778AE095E">
                              <p class="notep1">也可以看看：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><a href="indexes-for-XMLType-data.html#GUID-D4474161-F125-4703-98D2-7C609F8806E7" title="某些注意事项适用于使用column_clause。">column_clause的用法</a></p>
                                 </li>
                                 <li>
                                    <p><a href="xquery-and-XML-DB.html#GUID-F4508470-D420-4B5A-B5DF-59A424887F10" title="您可以使用SQL / XML函数XMLTable将XQuery表达式求值的结果分解为新虚拟表的关系行和列。您可以将此数据插入到预先存在的数据库表中，也可以使用SQL在连接表达式中查询它。">Oracle XML DB中的XMLTABLE SQL / XML函数</a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__BCGJAAGH">
                           <p class="subhead3" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-0B6D7002-7E3F-461B-AA59-481D4E8E2391"><span class="italic">alter_index_group_clause :: =</span></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="figure" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-5155A7FD-7F88-44A2-BD04-3C0B76C845F1"><img src="img/alter_index_group_clause.gif" width="312" alt="下面是alter_index_group_clause.eps的说明" title="下面是alter_index_group_clause.eps的说明" longdesc="img_text/alter_index_group_clause.html"><br><a href="img_text/alter_index_group_clause.html">说明alter_index_group_clause.eps的说明</a></div>
                           <!-- class="figure" -->
                           <div class="infoboxnotealso" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-AD9466C7-72BE-440C-B2BA-0839E6B9A542">
                              <p class="notep1">也可以看看：</p>
                              <p><a href="indexes-for-XMLType-data.html#GUID-35B0101C-DB6B-460B-9587-D7254DD1079D" title="子句groups_clause仅用于CREATE INDEX（或在子句alter_index_group_clause中的ADD GROUP之后）。条款alter_index_group_clause仅用于ALTER INDEX。">使用groups_clause和alter_index_group_clause</a></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-53DE24F4-A33F-4990-B8A9-10BCE12E94D4"><span class="italic">add_column_clause：==</span></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="figure" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-E7E8C533-E0A1-444B-BC9F-B578554B55D1"><img src="img/add_column_clause.gif" width="197" alt="add_column_clause.eps的描述如下" title="add_column_clause.eps的描述如下" longdesc="img_text/add_column_clause.html"><br><a href="img_text/add_column_clause.html">插图说明add_column_clause.eps</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-5DD7D1A6-9773-4C52-8F0B-F0980F82C4F3"><span class="italic">add_column_options：==</span></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="figure" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-4B191901-116A-4AE8-92F6-537A0875E7A0"><img src="img/add_column_options.gif" width="618" alt="add_column_options.eps的描述如下" title="add_column_options.eps的描述如下" longdesc="img_text/add_column_options.html"><br><a href="img_text/add_column_options.html">插图说明add_column_options.eps</a></div>
                           <!-- class="figure" -->
                           <p>语法元素<tt>XML_namespaces_clause</tt>与SQL / XML函数<code class="codeph">XMLTable</code> 。请参阅<a href="xquery-and-XML-DB.html#GUID-F4508470-D420-4B5A-B5DF-59A424887F10" title="您可以使用SQL / XML函数XMLTable将XQuery表达式求值的结果分解为新虚拟表的关系行和列。您可以将此数据插入到预先存在的数据库表中，也可以使用SQL在连接表达式中查询它。">Oracle XML DB中的XMLTABLE SQL / XML函数</a> 。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-311A2292-A400-4F15-A4F7-AF49D33A0040"><span class="italic">drop_column_clause：==</span></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="figure" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-2A4C62C6-0E3C-47E6-AAC3-C29EE8E559C7"><img src="img/drop_column_clause.gif" width="207" alt="drop_column_clause.eps的描述如下" title="drop_column_clause.eps的描述如下" longdesc="img_text/drop_column_clause.html"><br><a href="img_text/drop_column_clause.html">插图说明drop_column_clause.eps</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-60C5CB8D-1E18-403D-999E-1437AC652E80"><span class="italic">drop_column_options：==</span></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="figure" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-05DA1B85-9822-422B-A78C-AA294CEC46DC"><img src="img/drop_column_options.gif" width="416" alt="drop_column_options.eps的描述如下" title="drop_column_options.eps的描述如下" longdesc="img_text/drop_column_options.html"><br><a href="img_text/drop_column_options.html">插图描述drop_column_options.eps</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__CEGEABGE">
                           <p class="subhead3" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-7E148DC5-F82D-4E13-B9B1-03A90D794A14"><span class="italic">modify_column_type_clause：==</span></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="figure" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-D6F2F095-EBB0-46F8-B064-C37E35F90C23"><img src="img/modify_column_type_clause.gif" width="273" alt="下面是modify_column_type_clause.eps的描述" title="下面是modify_column_type_clause.eps的描述" longdesc="img_text/modify_column_type_clause.html"><br><a href="img_text/modify_column_type_clause.html">说明modify_column_type_clause.eps的说明</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-F5B7CB26-2D8E-4E08-89DD-96245D1381CC"><span class="italic">modify_column_type_options：==</span></p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="figure" id="GUID-24AAD47C-7D5C-4A61-B1F4-DD1F27D8A393__GUID-08F4FF1D-308D-4B5B-851D-85307945AE0C"><img src="img/modify_column_type_options.gif" width="469" alt="下面是modify_column_type_options.eps的描述" title="下面是modify_column_type_options.eps的描述" longdesc="img_text/modify_column_type_options.html"><br><a href="img_text/modify_column_type_options.html">说明modify_column_type_options.eps的说明</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-BCC7D521-E6B9-4636-98E1-25628BA0FEFC" title="创建或修改XMLIndex索引通常涉及使用带有SQL语句CREATE INDEX或ALTER INDEX的PARAMETERS子句。您可以使用它来详细指定索引特征。">CREATE INDEX和ALTER INDEX的PARAMETERS子句</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4430"></a><div class="props_rev_3"><a id="GUID-CF497695-F726-4C7D-B8D8-3B27D18FD56C" name="GUID-CF497695-F726-4C7D-B8D8-3B27D18FD56C"></a><h5 id="ADXDB-GUID-CF497695-F726-4C7D-B8D8-3B27D18FD56C" class="sect5"><span class="enumeration_section">6.3.17.3</span> XMLIndex_parameters_clause的使用</h5>
                     <div>
                        <p>创建<code class="codeph">XMLIndex</code>索引时，如果没有<span class="italic"><code class="codeph">XMLIndex_parameters_clause</code></span> ，则新索引只有非结构化组件。如果存在<span class="italic"><code class="codeph">XMLIndex_parameters_clause</code></span> ，但<code class="codeph">PARAMETERS</code>参数为空（ <code class="codeph">''</code> ），则结果相同：仅包含非结构化组件的索引。
                        </p>
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-CF497695-F726-4C7D-B8D8-3B27D18FD56C__GUID-A4B03CC0-4E7E-4488-B0C5-D05D98817C40">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关<code class="codeph">CREATE INDEX</code> <span class="italic"><code class="codeph">XMLIndex_parameters_clause</code></span>的使用上下文的信息，请<a href="../sqlrf/CREATE-INDEX.html#SQLRF54032" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关<code class="codeph">ALTER INDEX</code> <span class="italic"><code class="codeph">XMLIndex_parameters_clause</code></span>的使用上下文的信息，请<a href="../sqlrf/ALTER-INDEX.html#SQLRF52771" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-BCC7D521-E6B9-4636-98E1-25628BA0FEFC" title="创建或修改XMLIndex索引通常涉及使用带有SQL语句CREATE INDEX或ALTER INDEX的PARAMETERS子句。您可以使用它来详细指定索引特征。">CREATE INDEX和ALTER INDEX的PARAMETERS子句</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4431"></a><div class="props_rev_3"><a id="GUID-0563D8B4-9C46-4620-B814-0D608B57F84C" name="GUID-0563D8B4-9C46-4620-B814-0D608B57F84C"></a><h5 id="ADXDB-GUID-0563D8B4-9C46-4620-B814-0D608B57F84C" class="sect5"><span class="enumeration_section">6.3.17.4</span> XMLIndex_parameters的使用</h5>
                     <div>
                        <p>某些注意事项适用于使用<span class="italic"><code class="codeph">XMLIndex_parameters</code></span> 。
                        </p>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="italic"><code class="codeph">XMLIndex_parameter_clause</code></span>中每种类型最多只能有一个<span class="italic"><code class="codeph">XMLIndex_parameters</code></span> 。例如，可以有至多一个<code class="codeph">PATHS</code>条款，最多一个<span class="italic"><code class="codeph">path_table_clause</code></span> ，等等。
                                 </p>
                              </li>
                              <li>
                                 <p>如果在创建<code class="codeph">XMLIndex</code>索引时没有<span class="italic"><code class="codeph">structured_clause</code></span> ，则新索引只有非结构化组件。如果只有<span class="italic"><code class="codeph">structured_clause</code></span> ，则新索引只有一个结构化组件。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-BCC7D521-E6B9-4636-98E1-25628BA0FEFC" title="创建或修改XMLIndex索引通常涉及使用带有SQL语句CREATE INDEX或ALTER INDEX的PARAMETERS子句。您可以使用它来详细指定索引特征。">CREATE INDEX和ALTER INDEX的PARAMETERS子句</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4433"></a><div class="props_rev_3"><a id="GUID-602801B1-9A89-4ADE-B3C5-DABDFBB331A7" name="GUID-602801B1-9A89-4ADE-B3C5-DABDFBB331A7"></a><h5 id="ADXDB-GUID-602801B1-9A89-4ADE-B3C5-DABDFBB331A7" class="sect5"><span class="enumeration_section">6.3.17.5 PATHS</span>条款的使用</h5>
                     <div>
                        <p>某些注意事项适用于使用<code class="codeph">PATHS</code>子句。
                        </p>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">CREATE INDEX</code>语句中最多只能有一个<code class="codeph">PATHS</code>子句。也就是说，最多只能出现一次<code class="codeph">PATHS</code>然后是<span class="italic"><code class="codeph">create_index_paths_clause</code></span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>子句<span class="italic"><code class="codeph">create_index_paths_clause</code></span>仅用于<code class="codeph">CREATE INDEX</code> ; <span class="italic"><code class="codeph">alter_index_paths_clause</code></span>仅用于<code class="codeph">ALTER INDEX</code> 。</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-BCC7D521-E6B9-4636-98E1-25628BA0FEFC" title="创建或修改XMLIndex索引通常涉及使用带有SQL语句CREATE INDEX或ALTER INDEX的PARAMETERS子句。您可以使用它来详细指定索引特征。">CREATE INDEX和ALTER INDEX的PARAMETERS子句</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4434"></a><div class="props_rev_3"><a id="GUID-D452BE20-A1BC-4672-B3E0-A09C07BA327D" name="GUID-D452BE20-A1BC-4672-B3E0-A09C07BA327D"></a><h5 id="ADXDB-GUID-D452BE20-A1BC-4672-B3E0-A09C07BA327D" class="sect5"><span class="enumeration_section">6.3.17.6</span> create_index_paths_clause和alter_index_paths_clause的用法</h5>
                     <div>
                        <p>某些注意事项适用于使用<span class="italic"><code class="codeph">create_index_paths_clause</code></span>和<span class="italic"><code class="codeph">alter_index_paths_clause</code></span> 。
                        </p>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">INDEX_ALL_PATHS</code>关键字重建索引以包括所有路径。此关键字仅适用于<span class="italic"><code class="codeph">alter_index_paths_clause</code></span> ，而不适用于<span class="italic"><code class="codeph">create_index_paths_clause</code></span> 。
                                 </p>
                              </li>
                              <li>
                                 <p>索引路径的明确列表可以包括通配符和<code class="codeph">//</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">XPaths_list</code></span>是一个或多个XPath表达式的列表，每个表达式仅包括子轴，后代轴，名称测试和通配符（ <code class="codeph">*</code> ）构造。
                                 </p>
                              </li>
                              <li>
                                 <p>如果<span class="italic"><code class="codeph">XPaths_list</code></span>是从省略<span class="italic"><code class="codeph">create_index_paths_clause</code></span> ，所有路径索引。
                                 </p>
                              </li>
                              <li>
                                 <p>对于在<span class="italic"><code class="codeph">XPaths_list</code></span>中的XPath表达式中使用的每个唯一名称空间前缀，需要标准XML <span class="italic"><code class="codeph">namespace</code></span>声明，以提供相应的名称空间信息。
                                 </p>
                              </li>
                              <li>
                                 <p>您可以通过删除语法中未直接反映的方式更改索引，然后根据需要再次创建它。例如，要更改通过将路径包含到由排除路径定义的路径定义的索引，请将其删除，然后使用<code class="codeph">EXCLUDE</code>创建它。</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-BCC7D521-E6B9-4636-98E1-25628BA0FEFC" title="创建或修改XMLIndex索引通常涉及使用带有SQL语句CREATE INDEX或ALTER INDEX的PARAMETERS子句。您可以使用它来详细指定索引特征。">CREATE INDEX和ALTER INDEX的PARAMETERS子句</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB5939"></a><div class="props_rev_3"><a id="GUID-7B126CF1-5397-455C-B01D-696CF64B2001" name="GUID-7B126CF1-5397-455C-B01D-696CF64B2001"></a><h5 id="ADXDB-GUID-7B126CF1-5397-455C-B01D-696CF64B2001" class="sect5"><span class="enumeration_section">6.3.17.7</span> pikey_clause，path_id_clause和order_key_clause的用法</h5>
                     <div>
                        <p>从语法<code class="codeph">pikey_clause</code> ，每个子句<code class="codeph">pikey_clause</code> ， <code class="codeph">path_id_clause</code>和<code class="codeph">order_key_clause</code>都是可选的。即使您未指定<code class="codeph">pikey_clause</code>也会创建一个pikey索引。要创建路径ID索引或订单键索引，必须分别指定<code class="codeph">path_id_clause</code>或<code class="codeph">order_key_clause</code> 。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-BCC7D521-E6B9-4636-98E1-25628BA0FEFC" title="创建或修改XMLIndex索引通常涉及使用带有SQL语句CREATE INDEX或ALTER INDEX的PARAMETERS子句。您可以使用它来详细指定索引特征。">CREATE INDEX和ALTER INDEX的PARAMETERS子句</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4435"></a><div class="props_rev_3"><a id="GUID-3D908187-37BE-48DB-88A3-285442FB3DE1" name="GUID-3D908187-37BE-48DB-88A3-285442FB3DE1"></a><h5 id="ADXDB-GUID-3D908187-37BE-48DB-88A3-285442FB3DE1" class="sect5"><span class="enumeration_section">6.3.17.8 value_clause的</span>使用</h5>
                     <div>
                        <p>某些注意事项适用于使用<span class="italic"><code class="codeph">value_clause</code></span> 。
                        </p>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>列<code class="codeph">VALUE</code>创建为<code class="codeph">VARCHAR2(4000)</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>如果子句<span class="italic"><code class="codeph">value_clause</code></span>仅包含关键字<code class="codeph">VALUE</code> ，则使用常用的默认属性创建值索引。
                                 </p>
                              </li>
                              <li>
                                 <p>如果子句<span class="italic"><code class="codeph">path_id_clause</code></span>仅包含关键字<code class="codeph">PATH ID</code> ，则使用通常的默认属性创建path-id索引。
                                 </p>
                              </li>
                              <li>
                                 <p>如果子句<span class="italic"><code class="codeph">order_key_clause</code></span>仅包含<code class="codeph">ORDER KEY</code>关键字，则使用常用的默认属性创建order-key索引。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-BCC7D521-E6B9-4636-98E1-25628BA0FEFC" title="创建或修改XMLIndex索引通常涉及使用带有SQL语句CREATE INDEX或ALTER INDEX的PARAMETERS子句。您可以使用它来详细指定索引特征。">CREATE INDEX和ALTER INDEX的PARAMETERS子句</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4436"></a><div class="props_rev_3"><a id="GUID-F12AB99C-F7B1-428F-A008-D096B126E8C1" name="GUID-F12AB99C-F7B1-428F-A008-D096B126E8C1"></a><h5 id="ADXDB-GUID-F12AB99C-F7B1-428F-A008-D096B126E8C1" class="sect5"><span class="enumeration_section">6.3.17.9 async_clause的</span>使用</h5>
                     <div>
                        <p>某些注意事项适用于使用<code class="codeph">ASYNC</code>子句。
                        </p>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>仅将此功能与<span class="italic">仅</span>包含<span class="italic">非结构化</span>组件的<code class="codeph">XMLIndex</code>索引一起使用。如果为具有<span class="italic">结构化</span>组件的<code class="codeph">XMLIndex</code>索引指定<code class="codeph">ASYNC</code>子句，则会引发错误。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">ALWAYS</code>意味着每个DML语句都会发生自动同步。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">MANUAL</code>表示不会发生自动同步。您必须使用<code class="codeph">DBMS_XMLINDEX.syncIndex</code>手动同步索引。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">EVERY</code> <span class="italic"><code class="codeph">repeat_interval</code></span>装置自动同步在间隔的索引<span class="italic"><code class="codeph">repeat_interval</code></span> 。<span class="italic"><code class="codeph">repeat_interval</code></span>的语法与PL / SQL包<code class="codeph">DBMS_SCHEDULER</code>的语法相同，并且必须用双引号（ <span class="bold"><code class="codeph">"</code></span> ）括起来。要使用<code class="codeph">EVERY</code>您必须具有<code class="codeph">CREATE JOB</code>权限。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">ON COMMIT</code>表示在提交操作后立即同步索引。在同步完成之前，提交不会返回。由于同步是作为单独的事务执行的，因此提交数据的时间可能很短，但尚未提交索引更改。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">STALE</code>是可选的。值<code class="codeph">TRUE</code>表示查询结果可能是陈旧的;值<code class="codeph">FALSE</code>表示查询结果始终是最新的。默认值和唯一允许的显式指定值如下所示。
                                 </p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>对于<code class="codeph">ALWAYS</code> ， <code class="codeph">STALE</code>是<code class="codeph">FALSE</code> 。</p>
                                    </li>
                                    <li>
                                       <p>对于除<code class="codeph">ALWAYS</code>之外的任何其他<code class="codeph">ASYNC</code>选项， <code class="codeph">STALE</code>为<code class="codeph">TRUE</code> 。</p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-BCC7D521-E6B9-4636-98E1-25628BA0FEFC" title="创建或修改XMLIndex索引通常涉及使用带有SQL语句CREATE INDEX或ALTER INDEX的PARAMETERS子句。您可以使用它来详细指定索引特征。">CREATE INDEX和ALTER INDEX的PARAMETERS子句</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4437"></a><div class="props_rev_3"><a id="GUID-35B0101C-DB6B-460B-9587-D7254DD1079D" name="GUID-35B0101C-DB6B-460B-9587-D7254DD1079D"></a><h5 id="ADXDB-GUID-35B0101C-DB6B-460B-9587-D7254DD1079D" class="sect5"><span class="enumeration_section">6.3.17.10</span> groups_clause和alter_index_group_clause的使用</h5>
                     <div>
                        <p>子句<span class="italic"><code class="codeph">groups_clause</code></span>仅用于<code class="codeph">CREATE INDEX</code> （或在子句<span class="italic"><code class="codeph">alter_index_group_clause</code></span> <code class="codeph">ADD GROUP</code> <span class="italic"><code class="codeph">alter_index_group_clause</code></span> ）。条款<span class="italic"><code class="codeph">alter_index_group_clause</code></span>仅用于<code class="codeph">ALTER INDEX</code> 。</p>
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-BCC7D521-E6B9-4636-98E1-25628BA0FEFC" title="创建或修改XMLIndex索引通常涉及使用带有SQL语句CREATE INDEX或ALTER INDEX的PARAMETERS子句。您可以使用它来详细指定索引特征。">CREATE INDEX和ALTER INDEX的PARAMETERS子句</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4438"></a><div class="props_rev_3"><a id="GUID-A4FD18EE-D43B-44B0-86CE-27D4CE995E42" name="GUID-A4FD18EE-D43B-44B0-86CE-27D4CE995E42"></a><h5 id="ADXDB-GUID-A4FD18EE-D43B-44B0-86CE-27D4CE995E42" class="sect5"><span class="enumeration_section">6.3.17.11</span> XMLIndex_xmltable_clause的用法</h5>
                     <div>
                        <p>某些注意事项适用于使用<span class="italic"><code class="codeph">XMLIndex_xmltable_clause</code></span> 。
                        </p>
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="italic"><code class="codeph">XMLIndex_xmltable_clause</code></span>的<span class="italic"><code class="codeph">XQuery_string</code></span>表达式不得使用XQuery函数<code class="codeph">ora:view</code> （ <span class="italic">desupported</span> ）， <code class="codeph">fn:doc</code>或<code class="codeph">fn:collection</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>如果给定的<span class="italic"><code class="codeph">XMLIndex_xmltable_clause</code></span>包含多个数据类型为<code class="codeph">XMLType</code> <span class="italic"><code class="codeph">column_clause</code></span> ，则Oracle XML DB会引发错误。要实现定义两个此类虚拟列的效果，您必须改为添加单独的<span class="italic"><code class="codeph">group_clause</code></span> 。
                                 </p>
                              </li>
                              <li>
                                 <p><span class="italic"><code class="codeph">XMLIndex_xmltable_clause</code></span>的<code class="codeph">PASSING</code>子句是可选的。如果不存在，则隐式传递<code class="codeph">XMLType</code>列，如下所示：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>对于parameters子句中的第一个<span class="italic"><code class="codeph">XMLIndex_xmltable_clause</code></span> ，将隐式传递索引的<code class="codeph">XMLType</code>列。（在索引<code class="codeph">XMLType</code>表时，传递伪列<code class="codeph">OBJECT_VALUE</code> 。）
                                       </p>
                                    </li>
                                    <li>
                                       <p>对于每个后续的<span class="italic"><code class="codeph">XMLIndex_xmltable_clause</code></span> ，隐式传递前面的<span class="italic"><code class="codeph">XMLIndex_xmltable_clause</code></span>的<code class="codeph">VIRTUAL</code> <code class="codeph">XMLType</code>列。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-BCC7D521-E6B9-4636-98E1-25628BA0FEFC" title="创建或修改XMLIndex索引通常涉及使用带有SQL语句CREATE INDEX或ALTER INDEX的PARAMETERS子句。您可以使用它来详细指定索引特征。">CREATE INDEX和ALTER INDEX的PARAMETERS子句</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADXDB4439"></a><div class="props_rev_3"><a id="GUID-D4474161-F125-4703-98D2-7C609F8806E7" name="GUID-D4474161-F125-4703-98D2-7C609F8806E7"></a><h5 id="ADXDB-GUID-D4474161-F125-4703-98D2-7C609F8806E7" class="sect5"><span class="enumeration_section">6.3.17.12 column_clause的</span>用法</h5>
                     <div>
                        <p>某些注意事项适用于使用<span class="italic"><code class="codeph">column_clause</code></span> 。
                        </p>
                        <div class="section">
                           <p>在<code class="codeph">XMLIndex</code>索引中使用<code class="codeph">XMLTable</code>多级链接时，一级的<code class="codeph">XMLTable</code>表对应于上一级的<code class="codeph">XMLType</code>列。语法描述将关键字<code class="codeph">VIRTUAL</code>显示为可选。实际上，它仅用于这样的<code class="codeph">XMLType</code>列，在这种情况下它是<span class="italic">必需的</span> 。将它用于非<code class="codeph">XMLType</code>列是错误的。<code class="codeph">VIRTUAL</code>指定<code class="codeph">XMLType</code>列本身未实现，这意味着其数据仅以其对应的<code class="codeph">XMLTable</code>表指定的关系列的形式存储在索引中。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-BCC7D521-E6B9-4636-98E1-25628BA0FEFC" title="创建或修改XMLIndex索引通常涉及使用带有SQL语句CREATE INDEX或ALTER INDEX的PARAMETERS子句。您可以使用它来详细指定索引特征。">CREATE INDEX和ALTER INDEX的PARAMETERS子句</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="ADXDB4442"></a><div class="props_rev_3"><a id="GUID-FAB7C619-902A-40CF-98B7-6D358E1AD49C" name="GUID-FAB7C619-902A-40CF-98B7-6D358E1AD49C"></a><h3 id="ADXDB-GUID-FAB7C619-902A-40CF-98B7-6D358E1AD49C" class="sect3"><span class="enumeration_section">6.4</span>为全文查询索引XML数据</h3>
               <div>
                  <p>当您需要对XML数据进行全文搜索时，Oracle建议您将<code class="codeph">XMLType</code>数据存储为二进制XML，并使用XQuery Full Text（XQFT）。您可以使用XML搜索索引。这是本节的主题。
                  </p>
                  <p>如果不考虑可移植性和标准化代码，或者您的<code class="codeph">XMLType</code>数据是以对象关系方式存储的，那么您也可以使用Oracle Text提供的Oracle特定的全文结构和语法，特别是Oracle SQL函数<code class="codeph">contains</code>或Oracle XPath函数<code class="codeph">ora:contains</code> （ <span class="italic">已弃用</span> ）。
                  </p>
                  <p>您可以对存储为二进制XML的<code class="codeph">XMLType</code>数据执行XQuery全文（XQFT）查询。如果在SQL <code class="codeph">WHERE</code>子句中的<code class="codeph">XMLExists</code>表达式中使用XQFT全文谓词，则必须创建<strong class="term">XML搜索索引</strong> 。本节介绍此类索引的创建和使用。
                  </p>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-A48B77D9-A4C1-47B9-9664-D921D070AF55">创建和使用XML搜索索引</a><br>XQuery全文查询可以使用XML搜索索引来提高性能。
                     </li>
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-BB2425FE-DD0F-414B-8166-906C77F824FD">如果未搜索XML搜索索引该怎么办</a><br>您可以修改查询以确保满足某些条件，因此其评估会选择XML搜索索引。
                     </li>
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-E53BBE3C-CDFB-4A64-96E0-C16497D060C2">Pragma ora：no_schema：在XQuery全文中使用基于XML模式的数据</a><br>Oracle建议您在使用XQuery Full Text和XML搜索索引时使用<span class="italic">非</span>基于XML Schema的<code class="codeph">XMLType</code>数据。但在某些情况下，您可以使用存储为二进制XML的基于XML Schema的<code class="codeph">XMLType</code>数据。 Oracle XQuery pragma <code class="codeph">ora:no_schema</code>在此上下文中非常有用。
                     </li>
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-748DD8D4-2311-4D02-B050-A5940204A2A9">Pragma ora：use_xmltext_idx：强制使用XML搜索索引</a><br>您可以使用XQuery pragma <code class="codeph">ora:use_xmltext_idx</code>强制使用XML搜索索引。
                     </li>
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-85F61312-2713-416F-B741-85C2E2D4A13E">从使用Oracle Text Index迁移到XML搜索索引</a><br>如果您对存储为二进制XML的<code class="codeph">XMLType</code>数据的遗留查询使用SQL函数<code class="codeph">CONTAINS</code>或<span class="italic">不推荐使用的</span> XPath函数<code class="codeph">ora:contains</code>和不支持XML的Oracle Text索引，那么请考虑使用XQuery Full Text构造。
                     </li>
                  </ul>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="xquery-and-XML-DB.html#GUID-B87B6721-11A8-4E6F-A693-97DC4AAE2048" title="Oracle XML DB支持存储为二进制XML的XMLType数据的XQuery Full Text。 Oracle Text技术提供全文索引和搜索，这是此支持的基础。">支持XQuery全文</a></li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-FAB7C619-902A-40CF-98B7-6D358E1AD49C__GUID-3CBA64CD-769A-4B77-8E13-C01737583C86">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="indexes-for-XMLType-data.html#GUID-748DD8D4-2311-4D02-B050-A5940204A2A9__BCGDEHEA">例6-46</a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-FE16BE28-035C-49EE-9683-6ED37876C3FC" title="您可以在XML数据上创建索引，专注于经常查询的特定部分，从而提高性能。您可以通过多种方式索引XMLType数据，无论是基于XML模式还是非基于模式，无论您使用何种XMLType存储模型。">XMLType数据的索引</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB6148"></a><a id="ADXDB6149"></a><a id="ADXDB6150"></a><a id="ADXDB6147"></a><div class="props_rev_3"><a id="GUID-A48B77D9-A4C1-47B9-9664-D921D070AF55" name="GUID-A48B77D9-A4C1-47B9-9664-D921D070AF55"></a><h4 id="ADXDB-GUID-A48B77D9-A4C1-47B9-9664-D921D070AF55" class="sect4"><span class="enumeration_section">6.4.1</span>创建和使用XML搜索索引</h4>
                  <div>
                     <p>XQuery全文查询可以使用XML搜索索引来提高性能。</p>
                     <div class="section">
                        <p>要创建XML搜索索引，必须为您授予数据库角色<a id="d34642e10726" class="indexterm-anchor"></a><a id="d34642e10728" class="indexterm-anchor"></a> <code class="codeph">CTXAPP</code> 。更一般地说，需要此角色来创建Oracle Text索引，设置Oracle Text索引首选项或使用Oracle Text PL / SQL包。
                        </p>
                        <p>在创建索引之前，必须创建Oracle Text路径节组并设置它<a id="d34642e10737" class="indexterm-anchor"></a> <code class="codeph">XML_ENABLE</code>属性为<code class="codeph">t</code> 。这使得路径节组可以识别XML。
                        </p>
                        <p>为获得最佳性能， <code class="codeph">BASIC_STORAGE</code>在Oracle Text数据字典中创建<code class="codeph">BASIC_STORAGE</code>类型的索引首选项，并指定以下属性：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">D_TABLE_CLAUSE</code> - 为索引数据表<code class="codeph">$D</code>列<code class="codeph">DOC</code>指定<code class="codeph">SECUREFILE</code>存储，其中包含有关XML文档结构的信息。指定<span class="italic">缓存</span>和中<span class="italic">压缩</span> 。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">I_TABLE_CLAUSE</code> - 为索引数据表<code class="codeph">$I</code>列<code class="codeph">TOKEN_INFO</code>指定<code class="codeph">SECUREFILE</code>存储，其中包含有关全文标记及其在索引文档中出现的信息。指定<span class="italic">缓存</span> （但不压缩）。
                              </p>
                           </li>
                        </ul>
                        <p><a href="indexes-for-XMLType-data.html#GUID-A48B77D9-A4C1-47B9-9664-D921D070AF55__CEGIAAGI">例6-41中</a>说明了这一点，它使用了一个非基于XML模式的<code class="codeph">XMLType</code>表<code class="codeph">po_binxml</code> （它与标准数据库模式<code class="codeph">OE</code>表<code class="codeph">purchaseorder</code>具有相同的数据）。
                        </p>
                        <p>索引首选项<code class="codeph">BASIC_STORAGE</code>指定构成Oracle Text索引的数据库表和索引的表空间和创建参数。
                        </p>
                        <div class="infoboxnotealso" id="GUID-A48B77D9-A4C1-47B9-9664-D921D070AF55__GUID-DD6B5E3A-7690-475E-AFEB-72D64801F97A">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>有关节组的信息，请参阅<a href="../ccref/oracle-text-indexing-elements.html#CCREF0234" target="_blank"><span><cite>Oracle Text Reference</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关过程<code class="codeph">CTX_DDL.set_sec_grp_attr</code>信息，请<code class="codeph">CTX_DDL.set_sec_grp_attr</code> <a href="../ccref/CTX_DDL-package.html#CCREF24098" target="_blank"><span><cite>Oracle Text Reference</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关过程<code class="codeph">CTX_DDL.create_preference</code>信息，请<code class="codeph">CTX_DDL.create_preference</code> <a href="../ccref/CTX_DDL-package.html#CCREF0624" target="_blank"><span><cite>Oracle Text Reference</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关过程<code class="codeph">CTX_DDL.set_attribute</code>信息，请<code class="codeph">CTX_DDL.set_attribute</code> <a href="../ccref/CTX_DDL-package.html#CCREF0650" target="_blank"><span><cite>Oracle Text Reference</cite></span></a></p>
                              </li>
                              <li>
                                 <p>有关首选项<code class="codeph">BASIC_STORAGE</code> ， <code class="codeph">D_TABLE_CLAUSE</code>和<code class="codeph">I_TABLE_CLAUSE</code>信息，请<code class="codeph">D_TABLE_CLAUSE</code> <a href="../ccref/oracle-text-indexing-elements.html#CCREF2028" target="_blank"><span><cite>Oracle Text Reference</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                        <p><a href="indexes-for-XMLType-data.html#GUID-A48B77D9-A4C1-47B9-9664-D921D070AF55__CEGJABCA">示例6-42</a>查询数据以检索其文本同时包含<code class="codeph">Big</code>和<code class="codeph">Street</code>的<code class="codeph">Description</code>元素。
                        </p>
                        <p><a href="indexes-for-XMLType-data.html#GUID-A48B77D9-A4C1-47B9-9664-D921D070AF55__CEGCHDFB">例6-43</a>显示了查询的执行计划，它表明索引了<code class="codeph">po_ctx_idx</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-A48B77D9-A4C1-47B9-9664-D921D070AF55__CEGIAAGI">
                        <p class="titleinexample">示例6-41创建XML搜索索引</p><pre class="oac_no_warn" dir="ltr">BEGIN CTX_DDL。 <span class="bold">create_section_group</span> （'mysecgroup'，' <span class="bold">PATH_SECTION_GROUP</span> '）; CTX_DDL。 <span class="bold">set_sec_grp_attr</span> （'mysecgroup'，' <span class="bold">XML_ENABLE</span> '，' <span class="bold">T</span> '）; CTX_DDL。 <span class="bold">create_preference</span> （'mypref'，' <span class="bold">BASIC_STORAGE</span> '）; CTX_DDL。 <span class="bold">set_attribute</span> （'mypref'，' <span class="bold">D_TABLE_CLAUSE</span> '，'TABLESPACE my_ts <span class="bold">LOB（DOC）</span> <span class="bold">STORE AS SECUREFILE</span> <span class="bold">（TABLESPACE</span> my_ts <span class="bold">COMPRESS MEDIUM CACHE）</span> '）; CTX_DDL。 <span class="bold">set_attribute</span> （'mypref'，' <span class="bold">I_TABLE_CLAUSE</span> '，'TABLESPACE my_ts <span class="bold">LOB（TOKEN_INFO）</span> <span class="bold">STORE AS SECUREFILE</span> <span class="bold">（TABLESPACE</span> my_ts <span class="bold">NOCOMPRESS CACHE）</span> '）;结束; / CREATE INDEX po_ctx_idx ON po_binxml（OBJECT_VALUE）INDEXTYPE是<span class="bold">CTXSYS.CONTEXT</span> PARAMETERS（' <span class="bold">storage</span> mypref <span class="bold">section group</span> mysecgroup'）;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-A48B77D9-A4C1-47B9-9664-D921D070AF55__CEGJABCA">
                        <p class="titleinexample">例6-42 XQuery全文查询</p><pre class="oac_no_warn" dir="ltr">SELECT XMLQuery（'for $ i in / PurchaseOrder / LineItems / LineItem / Description其中$ i [ <span class="bold">。包含文本“Big”ftand“Street”</span> ]返回&lt;Title&gt; {$ i} &lt;/ Title&gt;'PASSING OBJECT_VALUE RETURNING CONTENT）FROM po_binxml WHERE XMLExists（'/ PurchaseOrder / LineItems / LineItem / Description [ <span class="bold">。contains text“Big”ftand“Street”</span> ]'PASSING OBJECT_VALUE）;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-A48B77D9-A4C1-47B9-9664-D921D070AF55__CEGCHDFB">
                        <p class="titleinexample">示例6-43 XQuery全文查询的执行计划</p><pre class="oac_no_warn" dir="ltr">-------------------------------------------------- ---------------------------------------- | Id |操作|名称|行|字节|成本（％CPU）|时间| -------------------------------------------------- ---------------------------------------- | 0 |选择声明| | 1 | 2014 | 4（0）| 00:00:01 | | 1 |按INDEX ROWID表的访问权限| PO_BINXML | 1 | 2014 | 4（0）| 00:00:01 | | * 2 | DOMAIN INDEX | <span class="bold">PO_CTX_IDX</span> | | | 4（0）| 00:00:01 | -------------------------------------------------- ----------------------------------------谓词信息（由操作ID标识）： - -------------------------------------------------- 2  - 访问（“CTXSYS”。“CONTAINS”（SYS_MAKEXML（0，“XMLDATA”），'&lt;query&gt; &lt;textquery grammar =“CONTEXT”lang =“english”&gt; <span class="bold">（（{Big}）和（{Street}） ）</span> INPATH（/ PurchaseOrder / LineItems / LineItem / <span class="bold">Description</span> ）&lt;/ textquery&gt; &lt;/ query&gt;'）&gt; 0）注意-----  - 用于此语句的动态采样（level = 2） - 检测到未优化的XML构造（启用） XMLOptimizationCheck获取更多信息）选择了21行。
</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-FAB7C619-902A-40CF-98B7-6D358E1AD49C" title="当您需要对XML数据进行全文搜索时，Oracle建议您将XMLType数据存储为二进制XML，并使用XQuery Full Text（XQFT）。您可以使用XML搜索索引。这是本节的主题。">为全文查询索引XML数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB6151"></a><div class="props_rev_3"><a id="GUID-BB2425FE-DD0F-414B-8166-906C77F824FD" name="GUID-BB2425FE-DD0F-414B-8166-906C77F824FD"></a><h4 id="ADXDB-GUID-BB2425FE-DD0F-414B-8166-906C77F824FD" class="sect4"><span class="enumeration_section">6.4.2</span>如果未选择XML搜索索引，该怎么办</h4>
                  <div>
                     <p>您可以修改查询以确保满足某些条件，因此其评估会选择XML搜索索引。</p>
                     <div class="section">
                        <p>如果在SQL <code class="codeph">WHERE</code>子句中的<code class="codeph">XMLExists</code>表达式中使用XQuery全文谓词，但未创建XML搜索索引或由于某种原因无法使用索引，则会引发编译时错误ORA-18177。
                        </p>
                        <p>如果引发此错误那么你的执行计划<span class="italic">并不</span>表明该指数回升。在计划中，您没有看到操作<code class="codeph">DOMAIN INDEX</code>后跟索引的名称。
                        </p>
                        <p>在这种情况下，请尝试更改查询以启用索引。以下条件必须同时适用于要拾取的索引：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>计算搜索上下文的XML节点的表达式必须是XPath表达式，其步骤仅沿<span class="italic">前向</span> <span class="italic">轴</span>和后<span class="italic">向</span> <span class="italic">轴</span> 。
                              </p>
                           </li>
                           <li>
                              <p>您只能在SQL / XML函数<code class="codeph">XMLExists</code>的<code class="codeph">PASSING</code>子句中传递一个<code class="codeph">XMLType</code>实例作为SQL表达式，并且该子句中的每个其他非<code class="codeph">XMLType</code> SQL表达式必须是SQL内置的<span class="italic">编译时常</span>量数据类型或绑定到此类数据类型的实例的<span class="italic">绑定变量</span> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-FAB7C619-902A-40CF-98B7-6D358E1AD49C" title="当您需要对XML数据进行全文搜索时，Oracle建议您将XMLType数据存储为二进制XML，并使用XQuery Full Text（XQFT）。您可以使用XML搜索索引。这是本节的主题。">为全文查询索引XML数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB6153"></a><a id="ADXDB6154"></a><a id="ADXDB6152"></a><div class="props_rev_3"><a id="GUID-E53BBE3C-CDFB-4A64-96E0-C16497D060C2" name="GUID-E53BBE3C-CDFB-4A64-96E0-C16497D060C2"></a><h4 id="ADXDB-GUID-E53BBE3C-CDFB-4A64-96E0-C16497D060C2" class="sect4"><span class="enumeration_section">6.4.3</span> Pragma ora：no_schema：在XQuery全文中使用基于XML模式的数据</h4>
                  <div>
                     <p>Oracle建议您在使用XQuery Full Text和XML搜索索引时使用<span class="italic">非</span>基于XML Schema的<code class="codeph">XMLType</code>数据。但在某些情况下，您可以使用存储为二进制XML的基于XML Schema的<code class="codeph">XMLType</code>数据。 Oracle XQuery pragma <code class="codeph">ora:no_schema</code>在此上下文中非常有用。
                     </p>
                     <p>默认情况下，当使用XML搜索索引评估基于XML模式的数据时，会引发编译时错误ORA-18177。这是因为全文索引本身不使用关联的XML模式：它不是类型感知的。它将所有适用的文本视为无类型。即使您正确地键入数据并因此不依赖于XML模式来隐式地转换类型，也会引发此错误。<a href="indexes-for-XMLType-data.html#GUID-E53BBE3C-CDFB-4A64-96E0-C16497D060C2__CEGIEJJA">例6-44</a>说明了这一点。
                     </p>
                     <p>如果您希望查询中的全文条件依赖于XML Schema类型和类型化操作，则引发的错误会引起您的注意。</p>
                     <p>为了使用依赖于类型的条件，必须将相关的XQuery表达式显式地转换为适当的类型。不要指望Oracle XML DB使用XML模式来执行隐式类型转换。未能适当地进行类型转换可能会导致您可能没有预料到的结果。</p>
                     <p><a href="indexes-for-XMLType-data.html#GUID-E53BBE3C-CDFB-4A64-96E0-C16497D060C2__CEGBHDEE">示例6-45</a>显示了基于XML Schema的数据的查询，该数据使用显式类型转换来确保评估正确的条件。
                     </p>
                     <p>但是，XQuery Full Text表达式的大多数用法，即使使用基于XML Schema的数据，也不涉及键入的数据。请记住，如果您确实使用了使用类型化数据的条件，那么您必须转换为正确的类型。</p>
                     <p>总而言之，如果您确定您的查询不涉及类型化数据，或者您判断可以将特定类型数据视为无类型数据，或者您明确地输入任何需要输入的数据，然后您可以在查询中使用Oracle XQuery pragma <code class="codeph">ora:no_schema</code>来禁止引发错误并允许使用XML搜索索引评估查询。
                     </p>
                     <div class="example" id="GUID-E53BBE3C-CDFB-4A64-96E0-C16497D060C2__CEGIEJJA">
                        <p class="titleinexample">示例6-44使用基于XML模式的数据的XQuery全文查询：错误ORA-18177</p><pre class="oac_no_warn" dir="ltr">SELECT XMLQuery（'/ / PurchaseOrder / LineItems / LineItem'PASSING OBJECT_VALUE RETURNING CONTENT）来自oe.purchaseorder WHERE XMLExists（'/ PurchaseOrder [LineItems / LineItem / @ ItemNumber&gt; xs：integer（“20”）和Actions / Action / User包含文本“KPARTNER”]'PASSING OBJECT_VALUE）; FROM oe.purchaseorder *第3行的错误： <span class="bold">ORA-18177</span> ：XQuery全文表达式'/ PurchaseOrder [LineItems / LineItem / @ ItemNumber&gt; xs：integer（“20”）和Actions / Action / User包含文本“KPARTNER”]' <span class="bold">无法使用XML文本索引进行评估</span>
</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-E53BBE3C-CDFB-4A64-96E0-C16497D060C2__CEGBHDEE">
                        <p class="titleinexample">示例6-45使用XQuery Pragma ora：no_schema和基于XML模式的数据</p><pre class="oac_no_warn" dir="ltr">SELECT XMLQuery（'/ / PurchaseOrder / LineItems / LineItem'PASSING OBJECT_VALUE RETURNING CONTENT）from oe.purchaseorder WHERE XMLExists（' <span class="bold">（＃ora：no_schema＃）</span> {/ PurchaseOrder [LineItems / LineItem / @ ItemNumber&gt; <span class="bold">xs：integer</span> （“20”）和动作/动作/用户包含文本“KPARTNER”]}'PASSING OBJECT_VALUE）;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-FAB7C619-902A-40CF-98B7-6D358E1AD49C" title="当您需要对XML数据进行全文搜索时，Oracle建议您将XMLType数据存储为二进制XML，并使用XQuery Full Text（XQFT）。您可以使用XML搜索索引。这是本节的主题。">为全文查询索引XML数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB5830"></a><a id="ADXDB6155"></a><div class="props_rev_3"><a id="GUID-748DD8D4-2311-4D02-B050-A5940204A2A9" name="GUID-748DD8D4-2311-4D02-B050-A5940204A2A9"></a><h4 id="ADXDB-GUID-748DD8D4-2311-4D02-B050-A5940204A2A9" class="sect4"><span class="enumeration_section">6.4.4</span> Pragma ora：use_xmltext_idx：强制使用XML搜索索引</h4>
                  <div>
                     <p>您可以使用XQuery pragma <code class="codeph">ora:use_xmltext_idx</code>强制使用XML搜索索引。
                     </p>
                     <p>可以以各种方式评估涉及XML数据的给定查询，这取决于不同索引的存在和其他因素。有时，默认评估方法不是最高效的，强制使用现有的XML搜索索引会更有效。您可以使用XQuery pragma <code class="codeph">ora:use_xmltext_idx</code>来执行此操作。（XML搜索索引仅适用于存储为二进制XML的<code class="codeph">XMLType</code>数据。）
                     </p>
                     <p>例如， <code class="codeph">WHERE</code>子句可能包含两个<code class="codeph">XMLExists</code>表达式，其中只有一个涉及XQuery全文条件，并且您可能具有适用于没有全文条件的<code class="codeph">XMLExists</code>表达式的<code class="codeph">XMLIndex</code>索引。使用这样的查询，使用XML搜索索引来评估整个<code class="codeph">WHERE</code>子句通常更有效。
                     </p>
                     <p>即使在查询中没有全文条件的某些情况下，使用XML搜索索引也可以提供最有效的查询评估。</p>
                     <p><a href="indexes-for-XMLType-data.html#GUID-748DD8D4-2311-4D02-B050-A5940204A2A9__BCGDEHEA">例</a> <code class="codeph">ora:use_xmltext_idx</code>的查询说明了使用pragma <code class="codeph">ora:use_xmltext_idx</code> 。只有第一个<code class="codeph">XMLExists</code>子句使用全文条件。由于编译指示，全文索引（ <a href="indexes-for-XMLType-data.html#GUID-A48B77D9-A4C1-47B9-9664-D921D070AF55__CEGIAAGI">示例6-41中</a>创建的<code class="codeph">po_ctx_idx</code> ）用于两个<code class="codeph">XMLExists</code>子句。
                     </p>
                     <div class="example" id="GUID-748DD8D4-2311-4D02-B050-A5940204A2A9__BCGDEHEA">
                        <p class="titleinexample">示例6-46使用XQuery Pragma ora的全文查询：use_xmltext_idx</p><pre class="oac_no_warn" dir="ltr">SELECT XMLQuery（'/ / PurchaseOrder / LineItems / LineItem'PASSING OBJECT_VALUE RETURNING CONTENT）from po_binxml WHERE XMLExists（'/ PurchaseOrder / LineItems / LineItem [Description contains text“Picnic”]'PASSING OBJECT_VALUE）和XMLExists（' <span class="bold">（＃ora：use_xmltext_idx＃ ）</span> {/ PurchaseOrder [User =“SBELL”]}'PASSING OBJECT_VALUE）;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-FAB7C619-902A-40CF-98B7-6D358E1AD49C" title="当您需要对XML数据进行全文搜索时，Oracle建议您将XMLType数据存储为二进制XML，并使用XQuery Full Text（XQFT）。您可以使用XML搜索索引。这是本节的主题。">为全文查询索引XML数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB6157"></a><a id="ADXDB6156"></a><div class="props_rev_3"><a id="GUID-85F61312-2713-416F-B741-85C2E2D4A13E" name="GUID-85F61312-2713-416F-B741-85C2E2D4A13E"></a><h4 id="ADXDB-GUID-85F61312-2713-416F-B741-85C2E2D4A13E" class="sect4"><span class="enumeration_section">6.4.5</span>从使用Oracle Text Index迁移到XML搜索索引</h4>
                  <div>
                     <p>如果您对存储为二进制XML的<code class="codeph">XMLType</code>数据的遗留查询使用SQL函数<code class="codeph">CONTAINS</code>或<span class="italic">不推荐使用的</span> XPath函数<code class="codeph">ora:contains</code>和不支持XML的Oracle Text索引，那么请考虑使用XQuery Full Text构造。
                     </p>
                     <div class="section">
                        <p>从Oracle Database 12c第1版（12.1）开始，Oracle XML DB支持XQuery和XPath全文（XQFT）标准。此支持仅适用于存储为二进制XML的<code class="codeph">XMLType</code>数据。在该版本之前，对于XML数据的全文查询，您只能使用不支持XML的Oracle Text索引（不是XML搜索索引），并且您的全文查询必须使用特定于Oracle的构造：SQL函数<code class="codeph">CONTAINS</code>或XPath函数<code class="codeph">ora:contains</code> （ <span class="italic">不建议使用</span> ）。
                        </p>
                        <p>如果您有遗留代码执行此操作，Oracle建议您迁移该代码以使用XQFT。本节提供有关哪些XQFT结构可用于替换<code class="codeph">CONTAINS</code>和<code class="codeph">ora:contains</code>的用法的信息<code class="codeph">ora:contains</code>在查询中。
                        </p>
                        <p>Oracle Text索引的这种使用也可以通过使用XML搜索索引来代替。若要将使用<code class="codeph">HASPATH</code>的查询替换为使用简单XQuery表达式的查询，请使用Oracle XQuery编译指示<code class="codeph">ora:use_xmltext_idx</code>指定要搜索XML搜索索引。本节也说明了这一点。
                        </p>
                        <p><a href="indexes-for-XMLType-data.html#GUID-85F61312-2713-416F-B741-85C2E2D4A13E__CEGECFIA" title="此表提供了从使用Oracle特定构造的典型查询到使用XQuery的查询的映射。">表6-9</a>提供了从使用Oracle特定构造的典型查询到使用XQuery Full Text的查询的映射。
                        </p>
                        <div class="tblformalwide" id="GUID-85F61312-2713-416F-B741-85C2E2D4A13E__CEGECFIA">
                           <p class="titleintable">表6-9将特定于Oracle的XML查询迁移到XQuery全文</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="将特定于Oracle的XML查询迁移到XQuery全文" width="100%" border="1" summary="This table provides a mapping from typical queries that use Oracle-specific constructs to queries that use XQuery." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="50%" id="d34642e11379">原始例子</th>
                                    <th align="left" valign="bottom" width="50%" id="d34642e11382">替换示例</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="50%" id="d34642e11387" headers="d34642e11379 "><pre class="pre codeblock"><code>CONTAINS（tx，' <span class="bold">HASPATH</span> （/ P / <span class="bold">LIs</span> / LI / Description <a id="GUID-85F61312-2713-416F-B741-85C2E2D4A13E__CEGBBCGC" name="GUID-85F61312-2713-416F-B741-85C2E2D4A13E__CEGBBCGC" href="#GUID-85F61312-2713-416F-B741-85C2E2D4A13E__CEGBBCGC" the="" path="" test="" can="" contain="" a="" predicate="" expression,="" which="" is="" same="" for="" both="" original="" query="" (with="" haspath)="" and="" its="" replacement.="" example:="" /purchaseorder="" /lineitems="" /lineitem="" /part[@id="" <="" ="31415927\" ]=")" ="" onclick="footdisplay(3, "><sup>Foot 3</sup></a> ）'）&gt; 0</code></pre></td>
                                    <td align="left" valign="top" width="50%" headers="d34642e11387 d34642e11382 "><pre class="pre codeblock"><code>XMLExists（' <span class="bold">（＃ora：use_xmltext_idx＃）</span> {$ d / P / <a id="fnsrc_d34642e11409" name="fnsrc_d34642e11409" href="#fnsrc_d34642e11409" the="" path="" test="" can="" contain="" a="" predicate="" expression,="" which="" is="" same="" for="" both="" original="" query="" (with="" haspath)="" and="" its="" replacement.="" example:="" /purchaseorder="" /lineitems="" /lineitem="" /part[@id="" <="" ="31415927\" ]=")" ="" onclick="footdisplay(3, "><sup>LIs</sup></a> / LI / Description <a id="fnsrc_d34642e11409" name="fnsrc_d34642e11409" href="#fnsrc_d34642e11409" the="" path="" test="" can="" contain="" a="" predicate="" expression,="" which="" is="" same="" for="" both="" original="" query="" (with="" haspath)="" and="" its="" replacement.="" example:="" /purchaseorder="" /lineitems="" /lineitem="" /part[@id="" <="" ="31415927\" ]=")" ="" onclick="footdisplay(3, "><sup>Footref 3</sup></a> }' <a id="fnsrc_d34642e11409" name="fnsrc_d34642e11409" href="#fnsrc_d34642e11409" the="" path="" test="" can="" contain="" a="" predicate="" expression,="" which="" is="" same="" for="" both="" original="" query="" (with="" haspath)="" and="" its="" replacement.="" example:="" /purchaseorder="" /lineitems="" /lineitem="" /part[@id="" <="" ="31415927\" ]=")" ="" onclick="footdisplay(3, "><sup>PASSING</sup></a> tx AS“d”）</code></pre><p>或者，如果数据是基于XML Schema的：</p><pre class="pre codeblock"><code>XMLExists（' <span class="bold">（＃ora：use_xmltext_idx＃）</span> { <span class="bold">（＃ora：no_schema＃）</span> {$ d / P / <a id="fnsrc_d34642e11422" name="fnsrc_d34642e11422" href="#fnsrc_d34642e11422" the="" path="" test="" can="" contain="" a="" predicate="" expression,="" which="" is="" same="" for="" both="" original="" query="" (with="" haspath)="" and="" its="" replacement.="" example:="" /purchaseorder="" /lineitems="" /lineitem="" /part[@id="" <="" ="31415927\" ]=")" ="" onclick="footdisplay(3, "><sup>LIs</sup></a> / LI / Description <a id="fnsrc_d34642e11422" name="fnsrc_d34642e11422" href="#fnsrc_d34642e11422" the="" path="" test="" can="" contain="" a="" predicate="" expression,="" which="" is="" same="" for="" both="" original="" query="" (with="" haspath)="" and="" its="" replacement.="" example:="" /purchaseorder="" /lineitems="" /lineitem="" /part[@id="" <="" ="31415927\" ]=")" ="" onclick="footdisplay(3, "><sup>Footref 3</sup></a> }}' <a id="fnsrc_d34642e11422" name="fnsrc_d34642e11422" href="#fnsrc_d34642e11422" the="" path="" test="" can="" contain="" a="" predicate="" expression,="" which="" is="" same="" for="" both="" original="" query="" (with="" haspath)="" and="" its="" replacement.="" example:="" /purchaseorder="" /lineitems="" /lineitem="" /part[@id="" <="" ="31415927\" ]=")" ="" onclick="footdisplay(3, "><sup>PASSING</sup></a> tx AS“d”）</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="50%" id="d34642e11426" headers="d34642e11379 "><pre class="pre codeblock"><code>CONTAINS（tx，'Big INPATH（/ P / LIs / LI / Description）'）&gt; 0</code></pre></td>
                                    <td align="left" valign="top" width="50%" headers="d34642e11426 d34642e11382 "><pre class="pre codeblock"><code>XMLExists（'$ d / P / LIs / LI / Description [。包含文本“Big”]'PASSING tx AS“d”）</code></pre><p>或者，如果数据是基于XML Schema的：</p><pre class="pre codeblock"><code>XMLExists（' <span class="bold">（＃ora：no_schema＃）</span> {$ d / P / LIs / LI / Description [。包含文本“Big”]}'PASSING tx AS“d”）</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="50%" id="d34642e11440" headers="d34642e11379 "><pre class="pre codeblock"><code>XMLExists（'$ d / P / LIs / LI / Description [ <span class="bold">ora：contains</span> （。，“Big <span class="bold">AND</span> Street”）&gt; 0]'PASSING tx AS“d”）</code></pre></td>
                                    <td align="left" valign="top" width="50%" headers="d34642e11440 d34642e11382 "><pre class="pre codeblock"><code>XMLExists（'$ d / P / LIs / LI / Description [。包含文本“Big” <span class="bold">ftand</span> “Street”]' <span class="bold">PASSING</span> tx AS“d”）</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="50%" id="d34642e11456" headers="d34642e11379 "><pre class="pre codeblock"><code>CONTAINS（tx，'（Big） <span class="bold">AND</span> （Street）INPATH（/ P / LIs / LI / Description）'）&gt; 0</code></pre></td>
                                    <td align="left" valign="top" width="50%" headers="d34642e11456 d34642e11382 "><pre class="pre codeblock"><code>XMLExists（'$ d / P / LIs / LI / Description [。包含文本“Big” <span class="bold">ftand</span> “Street”]' <span class="bold">PASSING</span> tx AS“d”）</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="50%" id="d34642e11469" headers="d34642e11379 "><pre class="pre codeblock"><code>CONTAINS（tx，'（Big） <span class="bold">OR</span> （Street）INPATH（/ P / LIs / LI / Description）'）&gt; 0</code></pre></td>
                                    <td align="left" valign="top" width="50%" headers="d34642e11469 d34642e11382 "><pre class="pre codeblock"><code>XMLExists（'$ d / P / LIs / LI / Description [。包含文本“Big” <span class="bold">ftor</span> “Street”]' <span class="bold">PASSING</span> tx AS“d”）</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="50%" id="d34642e11482" headers="d34642e11379 "><pre class="pre codeblock"><code>CONTAINS（tx，'（{Big}） <span class="bold">NOT</span> （{Street}）INPATH（/ P / LIs / LI / Description）'）&gt; 0</code></pre></td>
                                    <td align="left" valign="top" width="50%" headers="d34642e11482 d34642e11382 "><pre class="pre codeblock"><code>XMLExists（'$ d / P / LIs / LI / Description [。包含文本“Big” <span class="bold">ftand</span> <span class="bold">ftnot</span> “Street”]' <span class="bold">PASSING</span> tx AS“d”）</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="50%" id="d34642e11498" headers="d34642e11379 "><pre class="pre codeblock"><code>CONTAINS（tx，'（{Street}） <span class="bold">MNOT</span> （{Big Street}）INPATH（/ P / LIs / LI / Description）'）&gt; 0</code></pre></td>
                                    <td align="left" valign="top" width="50%" headers="d34642e11498 d34642e11382 "><pre class="pre codeblock"><code>XMLExists（'$ d / P / LIs / LI / Description [。包含文字“Street” <span class="bold">不在</span> “Big Street”]'PASSING tx AS“d”）</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="50%" id="d34642e11511" headers="d34642e11379 "><pre class="pre codeblock"><code>CONTAINS（tx，'（ <span class="bold">NEAR</span> （（{Big}，{Street}）， <span class="bold">3</span> ）INPATH（/ P / LIs / LI / Description）'）&gt; 0</code></pre></td>
                                    <td align="left" valign="top" width="50%" headers="d34642e11511 d34642e11382 "><pre class="pre codeblock"><code>XMLExists（'$ d / P / LIs / LI / Description [。包含文本“Big” <span class="bold">ftand</span> “Street” <span class="bold">窗口3个字</span> ]'PASSING tx AS“d”）</code></pre></td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="50%" id="d34642e11530" headers="d34642e11379 ">
                                       <p>（不适用 -  Oracle Text查询不支持XML命名空间。）</p>
                                    </td>
                                    <td align="left" valign="top" width="50%" headers="d34642e11530 d34642e11382 "><pre class="pre codeblock"><code>XMLExists（' <span class="bold">declare namespace</span> <span class="bold">ipo =“http://www.example.com/IPO”;</span> / <span class="bold">ipo：</span> P / <span class="bold">ipo：</span> LIs / <span class="bold">ipo：</span> LI / <span class="bold">ipo：</span> Description [。contains text“Big”]'PASSING tx AS“ d“）</code></pre></td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p class="tablefootnote"><sup class="tablefootnote">脚注3</sup></p><p>路径测试可以包含谓词表达式，对于原始查询（使用<code class="codeph">HASPATH</code> ）和替换它都是相同的。例如： <code class="codeph">/PurchaseOrder/LineItems/LineItem/Part[@Id &lt; "31415927"]</code> 。
                           </p>
                        <p></p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-FAB7C619-902A-40CF-98B7-6D358E1AD49C" title="当您需要对XML数据进行全文搜索时，Oracle建议您将XMLType数据存储为二进制XML，并使用XQuery Full Text（XQFT）。您可以使用XML搜索索引。这是本节的主题。">为全文查询索引XML数据</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADXDB4320"></a><div class="props_rev_3"><a id="GUID-BF638421-9D6E-4D72-8371-79D084A04BCA" name="GUID-BF638421-9D6E-4D72-8371-79D084A04BCA"></a><h3 id="ADXDB-GUID-BF638421-9D6E-4D72-8371-79D084A04BCA" class="sect3"><span class="enumeration_section">6.5</span>索引XMLType数据存储对象 - 关系</h3>
               <div>
                  <p>通过在与XML节点对应的基础数据库列上创建B树索引，可以有效地索引以对象关系存储的<code class="codeph">XMLType</code>数据。
                  </p>
                  <div class="section">
                     <p>如果要索引的数据是<span class="italic">单个数据</span> ，也就是说，如果它只能在任何XML实例文档中出现一次，那么您可以使用表面上创建基于函数的索引的<span class="italic">快捷方式</span> ，其中定义索引的表达式是一个功能应用程序，使用针对单例数据的XPath表达式参数。为<code class="codeph">XMLCast</code>定义了<code class="codeph">XMLCast</code>应用于<code class="codeph">XMLQuery</code>快捷方式，并为（不建议使用的）Oracle SQL函数<code class="codeph">extractValue</code>定义了另一个快捷方式。
                     </p>
                     <p>在许多情况下，Oracle XML DB会自动在底层对象 - 关系表或列上创建适当的索引;它<span class="italic">不会</span>创建在目标基于函数的索引<code class="codeph">XMLType</code>数据作为<code class="codeph">CREATE INDEX</code>语句建议。</p>
                     <p>在<code class="codeph">extractValue</code>快捷方式的情况下，创建的索引是B树索引。在<code class="codeph">XMLCast</code>应用于<code class="codeph">XMLQuery</code>的情况下，创建的索引是对函数表达式产生的标量值的基于函数的索引。
                     </p>
                     <p>如果要索引的数据是<span class="italic">集合</span> ，那么就不能使用这样的快捷方式;您必须手动创建B树索引。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-A01AC88E-C63B-40FC-9E6E-8BB1E65A459E">索引非重复文本节点或属性值</a><br>示例数据库模式<code class="codeph">OE</code>表<code class="codeph">purchaseorder</code>是以对象关系存储的。每个采购订单文档都有一个<code class="codeph">Reference</code>元素;这个元素是一个单身人士。因此，您可以使用快捷方式在基础对象关系数据上创建索引。
                     </li>
                     <li class="ulchildlink"><a href="indexes-for-XMLType-data.html#GUID-8B74D3E8-506C-450E-882A-77F71C051F93">索引重复（集合）元素</a><br>在以对象方式存储的<code class="codeph">XMLType</code>数据中，集合存储为<code class="codeph">XMLType</code>实例的有序集合表（OCT），这意味着您可以直接访问其成员。由于对象关系存储直接反映了XML数据的细粒度结构，因此您可以创建以各个集合成员为目标的索引。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-FE16BE28-035C-49EE-9683-6ED37876C3FC" title="您可以在XML数据上创建索引，专注于经常查询的特定部分，从而提高性能。您可以通过多种方式索引XMLType数据，无论是基于XML模式还是非基于模式，无论您使用何种XMLType存储模型。">XMLType数据的索引</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADXDB4326"></a><a id="ADXDB5818"></a><a id="ADXDB4325"></a><div class="props_rev_3"><a id="GUID-A01AC88E-C63B-40FC-9E6E-8BB1E65A459E" name="GUID-A01AC88E-C63B-40FC-9E6E-8BB1E65A459E"></a><h4 id="ADXDB-GUID-A01AC88E-C63B-40FC-9E6E-8BB1E65A459E" class="sect4"><span class="enumeration_section">6.5.1</span>索引非重复文本节点或属性值</h4>
                  <div>
                     <p>示例数据库模式<code class="codeph">OE</code>表<code class="codeph">purchaseorder</code>是以对象关系存储的。每个采购订单文档都有一个<code class="codeph">Reference</code>元素;这个元素是一个单身人士。因此，您可以使用快捷方式在基础对象关系数据上创建索引。
                     </p>
                     <div class="section">
                        <p><a href="indexes-for-XMLType-data.html#GUID-A01AC88E-C63B-40FC-9E6E-8BB1E65A459E__CHDBJCCI">示例6-47</a>显示了一个<code class="codeph">CREATE INDEX</code>语句，该语句表面上尝试使用应用于<code class="codeph">XMLQuery</code> <code class="codeph">XMLCast</code>创建基于函数的索引，目标是元素<code class="codeph">Reference</code>的文本内容。（此元素的内容仅为文本，因此定位元素与使用XPath节点测试<code class="codeph">text()</code>定位其文本节点相同。）
                        </p>
                        <p><a href="indexes-for-XMLType-data.html#GUID-A01AC88E-C63B-40FC-9E6E-8BB1E65A459E__BCGFIDAE">示例6-48</a>表面上尝试使用（不建议使用的）Oracle SQL函数<code class="codeph">extractValue</code>创建基于函数的索引，目标是相同的数据。
                        </p>
                        <p>实际上，在<a href="indexes-for-XMLType-data.html#GUID-A01AC88E-C63B-40FC-9E6E-8BB1E65A459E__CHDBJCCI">例6-47</a>和<a href="indexes-for-XMLType-data.html#GUID-A01AC88E-C63B-40FC-9E6E-8BB1E65A459E__BCGFIDAE">例6-48中，</a>没有为目标<code class="codeph">XMLType</code>数据创建基于函数的索引。相反，Oracle XML DB重写<code class="codeph">CREATE INDEX</code>语句以在基础标量数据上创建索引。
                        </p>
                        <div class="infoboxnotealso" id="GUID-A01AC88E-C63B-40FC-9E6E-8BB1E65A459E__GUID-51DD6FB9-02E9-44BD-A1E5-714F71CE3BFE">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="XPath-rewrite-for-object-relational-storage.html#GUID-2A9AEEC5-6CD1-4A17-A3A7-08E86E547C2F__CACDBHCJ">示例19-7</a>和<a href="XPath-rewrite-for-object-relational-storage.html#GUID-2A9AEEC5-6CD1-4A17-A3A7-08E86E547C2F__CACCAJDI">示例19-8</a>有关XPath重写的信息，因为它适用于此类<code class="codeph">CREATE INDEX</code>语句</p>
                        </div>
                        <p>在某些情况下，当您使用这些快捷方式中的任何一个时， <code class="codeph">CREATE INDEX</code>语句无法像所描述的那样在基础标量数据上创建索引，而是实际上在引用的<code class="codeph">XMLType</code>数据上创建基于函数的索引。（即使索引的<span class="italic">值</span>可能是标量，也是如此。）
                        </p>
                        <p>如果发生这种情况，请删除索引，然后使用针对同一XPath的结构化组件创建<code class="codeph">XMLIndex</code>索引。作为一般规则，Oracle建议不要对<code class="codeph">XMLType</code>数据使用基于函数的索引。
                        </p>
                        <p>这是<code class="codeph">XMLType</code>数据的一般规则的实例，无论使用何种存储方法：使用带有结构化组件的<code class="codeph">XMLIndex</code>而不是基于函数的索引。此规则适用于Oracle Database 11g第2版（11.2）。遵守此规则可以消除与基于函数的索引的维护操作相关的开销，并且可以增加优化程序可以正确选择索引的情况的数量。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-A01AC88E-C63B-40FC-9E6E-8BB1E65A459E__CHDBJCCI">
                        <p class="titleinexample">例6-47在单例元素上使用XMLCAST和XMLQUERY创建索引</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX po_reference_ix ON purchaseorder（XMLCast（XMLQuery（'$ p / PurchaseOrder / Reference'PASSING po。OBJECT_VALUE为“p”返回内容）AS VARCHAR2（128）））;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-A01AC88E-C63B-40FC-9E6E-8BB1E65A459E__BCGFIDAE">
                        <p class="titleinexample">例6-48在单例元素上使用EXTRACTVALUE创建索引</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX po_reference_ix ON purchaseorder（extractValue（OBJECT_VALUE，'/ / PurchaseOrder / Reference'））;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="indexes-for-XMLType-data.html#GUID-48E55F3F-A918-4C85-A6B0-0287611C21E1" title="在Oracle Database 11g第2版（11.2）之前的版本中，当XPath表达式以单个节点为目标时，基于函数的索引有时适合与XMLType数据一起使用。Oracle建议您使用XMLIndex的结构化组件。">基于函数的索引已弃用XMLType</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-BF638421-9D6E-4D72-8371-79D084A04BCA" title="通过在与XML节点对应的基础数据库列上创建B树索引，可以有效地索引以对象关系存储的XMLType数据。">索引XMLType数据存储对象 - 关系</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADXDB4328"></a><div class="props_rev_3"><a id="GUID-8B74D3E8-506C-450E-882A-77F71C051F93" name="GUID-8B74D3E8-506C-450E-882A-77F71C051F93"></a><h4 id="ADXDB-GUID-8B74D3E8-506C-450E-882A-77F71C051F93" class="sect4"><span class="enumeration_section">6.5.2</span>索引重复（收集）元素</h4>
                  <div>
                     <p>在以对象方式存储的<code class="codeph">XMLType</code>数据中，集合存储为<code class="codeph">XMLType</code>实例的有序集合表（OCT），这意味着您可以直接访问其成员。由于对象关系存储直接反映了XML数据的细粒度结构，因此您可以创建以各个集合成员为目标的索引。
                     </p>
                     <div class="section">
                        <p>您必须手动创建此类索引。自动创建B树索引时，你表面上是创建（不建议使用）的Oracle SQL函数基于函数的索引的特殊功能<code class="codeph">extractValue</code> <span class="italic">不适</span>用于集合（传递给XPath表达式<code class="codeph">extractValue</code>必须针对单身）。
                        </p>
                        <p>要为集合创建B树索引，必须了解用于管理集合的SQL对象的结构。根据此信息，您可以使用传统的对象关系SQL代码直接在适当的SQL对象属性上创建索引。有关如何执行此操作的示例，请参阅<a href="XPath-rewrite-for-object-relational-storage.html#GUID-B10DA5D9-25C5-4F0B-AD4D-2CB93D5114D4" title="如果集合存储为有序集合表（OCT）或XMLType实例，则可以直接访问集合的成员。每个成员都成为一个表行，因此您可以使用SQL直接访问它。您通常可以通过索引此类集合成员来提高性能。">指南：在有序集合表上创建索引</a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="indexes-for-XMLType-data.html#GUID-BF638421-9D6E-4D72-8371-79D084A04BCA" title="通过在与XML节点对应的基础数据库列上创建B树索引，可以有效地索引以对象关系存储的XMLType数据。">索引XMLType数据存储对象 - 关系</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <hr><br><p style="text-decoration:underline">脚注图例</p>脚注1：<p>对于以对象关系存储的<code class="codeph">XMLType</code>数据，请参阅<a href="indexes-for-XMLType-data.html#GUID-BF638421-9D6E-4D72-8371-79D084A04BCA" title="通过在与XML节点对应的基础数据库列上创建B树索引，可以有效地索引以对象关系存储的XMLType数据。">索引XMLType数据存储对象 - 关系</a> 。如果您的数据在整个过程中具有高度结构化，或者在创建索引时未知您的查询，那么这种方法可能是合适的。
            </p><br>脚注2：<p>实际的路径表实现可能略有不同。</p><br></div>
      </article>
   </body>
</html>
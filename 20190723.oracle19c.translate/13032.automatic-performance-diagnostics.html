<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Automatic Performance Diagnostics</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Performance Tuning Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Performance Tuning Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-performance-tuning-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-03-12T22:26:14-07:00">
      <meta name="dcterms.title" content="Database Performance Tuning Guide">
      <meta name="dcterms.dateCopyrighted" content="2007, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96347-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="gathering-database-statistics.html" title="Previous" type="text/html">
      <link rel="next" href="comparing-database-performance-over-time.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TGDBA">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="gathering-database-statistics.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="comparing-database-performance-over-time.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Performance Tuning Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-II-diagnosing-and-tuning-database-performance.html" property="item" typeof="WebPage"><span property="name">Diagnosing and Tuning Database Performance </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Automatic Performance Diagnostics </li>
            </ol>
            <a id="GUID-843A596D-2D8B-422D-9C8D-73C0EF52739D" name="GUID-843A596D-2D8B-422D-9C8D-73C0EF52739D"></a><a id="TGDBA026"></a>
            
            <h2 id="TGDBA-GUID-843A596D-2D8B-422D-9C8D-73C0EF52739D" class="sect2"><span class="enumeration_chapter">7 </span>Automatic Performance Diagnostics 
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter describes Oracle Database automatic features for performance diagnosing and tuning.</p>
               <p>This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="automatic-performance-diagnostics.html#GUID-F1FBA929-4FCF-4872-AEE6-2DF716B5BD43" title="Starting with Oracle Database 12c, ADDM is enabled by default in the root container of a multitenant container database (CDB). Starting with Oracle Database 19c, you can also use ADDM in a pluggable database (PDB).ADDM does not work in a pluggable database (PDB) by default, because automatic AWR snapshots are disabled by default in a PDB. To use ADDM in a PDB, you must enable automatic AWR snapshots in the PDB by setting the AWR_PDB_AUTOFLUSH_ENABLED initialization parameter to TRUE and AWR snapshot interval greater than 0.">Overview of the Automatic Database Diagnostic Monitor</a></p>
                  </li>
                  <li>
                     <p><a href="automatic-performance-diagnostics.html#GUID-19D504B9-B4E4-4FBF-B0D2-F758B467FEDD">Setting Up ADDM</a></p>
                  </li>
                  <li>
                     <p><a href="automatic-performance-diagnostics.html#GUID-AEE549F3-DDF9-4977-8A0A-FE1E47C75679">Diagnosing Database Performance Problems with ADDM</a></p>
                  </li>
                  <li>
                     <p><a href="automatic-performance-diagnostics.html#GUID-914A7E7C-FD5F-4F24-93AA-9E98578EB129">ADDM Views</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-843A596D-2D8B-422D-9C8D-73C0EF52739D__GUID-7C5438DD-C87F-4C91-ADF3-99690F5980DF">
                  <p class="notep1">See Also:</p>
                  <p><a href="../tdppt/automatic-database-performance-monitoring.html#TDPPT020" target="_blank"><span class="italic">Oracle Database 2 Day + Performance Tuning Guide</span></a> for information about using Oracle Enterprise Manager Cloud Control (Cloud Control) to diagnose and tune the database with the Automatic Database Diagnostic Monitor
                  </p>
               </div>
            </div><a id="TGDBA02602"></a><div class="props_rev_3"><a id="GUID-F1FBA929-4FCF-4872-AEE6-2DF716B5BD43" name="GUID-F1FBA929-4FCF-4872-AEE6-2DF716B5BD43"></a><h3 id="TGDBA-GUID-F1FBA929-4FCF-4872-AEE6-2DF716B5BD43" class="sect3"><span class="enumeration_section">7.1 </span>Overview of the Automatic Database Diagnostic Monitor
               </h3>
               <div>
                  <p>The Automatic Workload Repository (AWR) stores performance related statics for an Oracle database. The Automatic Database Diagnostic Monitor (ADDM) is a diagnostic tool that analyzes the AWR data on a regular basis, locates root causes of any performance problems, provides recommendations for correcting the problems, and identifies non-problem areas of the system. Because AWR is a repository of historical performance data, ADDM can analyze performance issues after the event, often saving time and resources in reproducing a problem.</p>
                  <p>In most cases, ADDM output should be the first place that a DBA looks when notified of a performance problem. ADDM provides the following benefits:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Automatic performance diagnostic report every hour by default</p>
                     </li>
                     <li>
                        <p>Problem diagnosis based on decades of tuning expertise</p>
                     </li>
                     <li>
                        <p>Time-based quantification of problem impacts and recommendation benefits</p>
                     </li>
                     <li>
                        <p>Identification of root cause, not symptoms</p>
                     </li>
                     <li>
                        <p>Recommendations for treating the root causes of problems</p>
                     </li>
                     <li>
                        <p>Identification of non-problem areas of the system</p>
                     </li>
                     <li>
                        <p>Minimal overhead to the system during the diagnostic process</p>
                     </li>
                  </ul>
                  <p>Tuning is an iterative process, and fixing one problem can cause the bottleneck to shift to another part of the system. Even with the benefit of ADDM analysis, it can take multiple tuning cycles to reach acceptable system performance. ADDM benefits apply beyond production systems; on development and test systems, ADDM can provide an early warning of performance issues.</p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="automatic-performance-diagnostics.html#GUID-0C89C9A5-A9EE-4E65-95F8-208C9EA36743">ADDM Analysis</a></p>
                     </li>
                     <li>
                        <p><a href="automatic-performance-diagnostics.html#GUID-8ACD5F59-CFED-4F2A-8284-D969E9E22335">Using ADDM with Oracle Real Application Clusters</a></p>
                     </li>
                     <li>
                        <p><a href="automatic-performance-diagnostics.html#GUID-B4B0899D-90A3-4E19-8654-1D5C34A48FD5" title="Starting with Oracle Database 12c, ADDM is enabled by default in the root container of a multitenant container database (CDB). Starting with Oracle Database 19c, you can also use ADDM in a pluggable database (PDB).">Using ADDM in a Multitenant Environment</a></p>
                     </li>
                     <li>
                        <p><a href="automatic-performance-diagnostics.html#GUID-9DD81F99-3B4D-4340-9F19-30E5B47DC41D">Real-Time ADDM Analysis</a></p>
                     </li>
                     <li>
                        <p><a href="automatic-performance-diagnostics.html#GUID-824AA656-C199-437D-926B-A8F05590A65C">ADDM Analysis Results</a></p>
                     </li>
                     <li>
                        <p><a href="automatic-performance-diagnostics.html#GUID-DCD9B583-0059-492C-A801-0A551C9CE5F8">Reviewing ADDM Analysis Results: Example</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-F1FBA929-4FCF-4872-AEE6-2DF716B5BD43__GUID-C40BBFE1-3E0D-4ACD-8CDD-DA6EA621883C">
                     <p class="notep1">Note:</p>
                     <p>Data visibility and privilege requirements may differ when using ADDM features with pluggable databases (PDBs). For information about how manageability features, including ADDM features, work in a multitenant container database (CDB), see <a href="../multi/administering-a-cdb-with-sql-plus.html#MULTI-GUID-DF42C0D3-8968-4810-9327-9D176337D356" target="_blank"><span class="italic">Oracle Multitenant Administrator’s Guide</span></a>.
                     </p>
                  </div>
               </div><a id="TGDBA94240"></a><div class="props_rev_3"><a id="GUID-0C89C9A5-A9EE-4E65-95F8-208C9EA36743" name="GUID-0C89C9A5-A9EE-4E65-95F8-208C9EA36743"></a><h4 id="TGDBA-GUID-0C89C9A5-A9EE-4E65-95F8-208C9EA36743" class="sect4"><span class="enumeration_section">7.1.1 </span>ADDM Analysis
                  </h4>
                  <div>
                     <p>An ADDM analysis can be performed on a pair of AWR snapshots and a set of instances from the same database. The pair of AWR snapshots define the time period for analysis, and the set of instances define the target for analysis.</p>
                     <p>If you are using Oracle Real Application Clusters (Oracle RAC), then ADDM has three analysis modes:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Database</p>
                           <p>In Database mode, ADDM analyzes all instances of the database.</p>
                        </li>
                        <li>
                           <p>Instance</p>
                           <p>In Instance mode, ADDM analyzes a particular instance of the database.</p>
                        </li>
                        <li>
                           <p>Partial</p>
                           <p>In Partial mode, ADDM analyzes a subset of all database instances.</p>
                        </li>
                     </ul>
                     <p>If you are not using Oracle RAC, then ADDM can only function in Instance mode because only one instance of the database exists.</p>
                     <p>An ADDM analysis is performed each time an AWR snapshot is taken and the results are saved in the database. The time period analyzed by ADDM is defined by the last two snapshots (the last hour by default). ADDM will always analyze the specified instance in Instance mode. For non-Oracle RAC or single instance environments, the analysis performed in the Instance mode is the same as a database-wide analysis. If you are using Oracle RAC, then ADDM also analyzes the entire database in Database mode, as described in <span class="q">"<a href="automatic-performance-diagnostics.html#GUID-8ACD5F59-CFED-4F2A-8284-D969E9E22335">Using ADDM with Oracle Real Application Clusters</a>"</span>.
                     </p>
                     <p>After ADDM completes its analysis, you can view the ADDM results using either Cloud Control, or <code class="codeph">DBMS_ADDM</code> package subprograms, or <code class="codeph">DBA_ADDM_*</code> and <code class="codeph">DBA_ADVISOR_*</code> views.
                     </p>
                     <p>ADDM analysis is performed top down, first identifying symptoms, and then refining them to reach the root causes of performance problems. The goal of the analysis is to reduce a single throughput <a id="d19268e302" class="indexterm-anchor"></a>metric called <code class="codeph">DB</code> <code class="codeph">time</code>. <code class="codeph">DB</code> <code class="codeph">time</code> is the fundamental measure of database performance, and is the cumulative time spent by the database in processing user requests. It includes wait time and CPU time of all non-idle user foreground sessions. <code class="codeph">DB</code> <code class="codeph">time</code> is displayed in the <code class="codeph">V$SESS_TIME_MODEL</code> and <code class="codeph">V$SYS_TIME_MODEL</code> views.
                     </p>
                     <p><a id="d19268e333" class="indexterm-anchor"></a>By reducing <code class="codeph">DB</code> <code class="codeph">time</code>, the database is able to support more user requests using the same resources, which increases throughput. The problems reported by ADDM are sorted by the amount of <code class="codeph">DB</code> <code class="codeph">time</code> they are responsible for. System areas that are not responsible for a significant portion of <code class="codeph">DB</code> <code class="codeph">time</code> are reported as non-problem areas.
                     </p>
                     <p><a id="d19268e358" class="indexterm-anchor"></a>The types of problems that ADDM considers include the following: 
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>CPU bottlenecks - Is the system CPU bound by Oracle Database or some other application?</p>
                        </li>
                        <li>
                           <p>Undersized Memory Structures - Are the Oracle Database memory structures, such as the SGA, PGA, and buffer cache, adequately sized?</p>
                        </li>
                        <li>
                           <p>I/O capacity issues - Is the I/O subsystem performing as expected?</p>
                        </li>
                        <li>
                           <p>High-load SQL statements - Are there any SQL statements which are consuming excessive system resources?</p>
                        </li>
                        <li>
                           <p>High-load PL/SQL execution and compilation, and high-load Java usage</p>
                        </li>
                        <li>
                           <p>Oracle RAC specific issues - What are the global cache hot blocks and objects; are there any interconnect latency issues?</p>
                        </li>
                        <li>
                           <p>Sub-optimal use of Oracle Database by the application - Are there problems with poor connection management, excessive parsing, or application level lock contention?</p>
                        </li>
                        <li>
                           <p>Database configuration issues - Is there evidence of incorrect sizing of log files, archiving issues, excessive checkpoints, or sub-optimal parameter settings?</p>
                        </li>
                        <li>
                           <p>Concurrency issues - Are there buffer busy problems?</p>
                        </li>
                        <li>
                           <p>Hot objects and top SQL for various problem areas</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-0C89C9A5-A9EE-4E65-95F8-208C9EA36743__GUID-3542A93D-ECC0-4F4B-A19B-1224454CCFDE">
                        <p class="notep1">Note:</p>
                        <p>This is not a comprehensive list of all problem types that ADDM considers in its analysis.</p>
                     </div>
                     <p>ADDM also documents the non-problem areas of the system. For example, wait event classes that are not significantly impacting the performance of the system are identified and removed from the tuning consideration at an early stage, saving time and effort that would be spent on items that do not impact overall system performance.</p>
                     <div class="infoboxnotealso" id="GUID-0C89C9A5-A9EE-4E65-95F8-208C9EA36743__GUID-1F6C4CE9-1BEF-487B-8DAA-5C08C7FB1342">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;" id="GUID-0C89C9A5-A9EE-4E65-95F8-208C9EA36743__UL_UHM_G4R_3GB">
                           <li>
                              <p><a href="../refrn/V-SESS_TIME_MODEL.html#REFRN30340" target="_blank"><span class="italic">Oracle Database Reference</span></a> for information about the <code class="codeph">V$SESS_TIME_MODEL</code> and <code class="codeph">V$SYS_TIME_MODEL</code> views
                              </p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="measuring-database-performance.html#GUID-BC858042-CD71-4717-A614-C0B0A4FE6F2D">Time Model Statistics</a>"</span> for a discussion of time model statistics and <code class="codeph">DB</code> <code class="codeph">time</code></p>
                           </li>
                           <li>
                              <p><a href="../cncpt/process-architecture.html#CNCPT008" target="_blank"><span class="italic">Oracle Database Concepts</span></a> for information about server processes
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="TGDBA94241"></a><div class="props_rev_3"><a id="GUID-8ACD5F59-CFED-4F2A-8284-D969E9E22335" name="GUID-8ACD5F59-CFED-4F2A-8284-D969E9E22335"></a><h4 id="TGDBA-GUID-8ACD5F59-CFED-4F2A-8284-D969E9E22335" class="sect4"><span class="enumeration_section">7.1.2 </span>Using ADDM with Oracle Real Application Clusters
                  </h4>
                  <div>
                     <p>If you are using Oracle RAC, then run ADDM in Database analysis mode to analyze the throughput performance of all instances of the database. In Database mode, ADDM considers DB time as the sum of the database time for all database instances. Using the Database analysis mode enables you to view all findings that are significant to the entire database in a single report, instead of reviewing a separate report for each instance.</p>
                     <p>The Database mode report includes findings about database resources (such as I/O and interconnect). The report also aggregates findings from the various instances if they are significant to the entire database. For example, if the CPU load on a single instance is high enough to affect the entire database, then the finding appears in the Database mode analysis, which points to the particular instance responsible for the problem.</p>
                     <div class="infoboxnotealso" id="GUID-8ACD5F59-CFED-4F2A-8284-D969E9E22335__GUID-9952D424-4565-41EE-9003-5063A7A607A1">
                        <p class="notep1">See Also:</p>
                        <p><a href="../racad/monitoring-performance.html#RACAD-GUID-42E1B55A-4685-4CED-98CA-1BB576650D1A" target="_blank"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for information about using ADDM with Oracle RAC
                        </p>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-B4B0899D-90A3-4E19-8654-1D5C34A48FD5" name="GUID-B4B0899D-90A3-4E19-8654-1D5C34A48FD5"></a><h4 id="TGDBA-GUID-B4B0899D-90A3-4E19-8654-1D5C34A48FD5" class="sect4"><span class="enumeration_section">7.1.3 </span>Using ADDM in a Multitenant Environment
                  </h4>
                  <div>
                     <p>Starting with Oracle Database 12c, ADDM is enabled by default in the root container of a multitenant container database (CDB). Starting with Oracle Database 19c, you can also use ADDM in a pluggable database (PDB).</p>
                     <div class="section">
                        <p>In a CDB, ADDM works in the same way as it works in a non-CDB, that is, the ADDM analysis is performed each time an AWR snapshot is taken on a CDB root or a PDB, and the ADDM results are stored on the same database system where the snapshot is taken. The time period analyzed by ADDM is defined by the last two snapshots (the last hour by default). </p>
                        <p>After ADDM completes its analysis, you can view the ADDM results using any of the following methods:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Using Enterprise Manager Cloud Control (Cloud Control)</p>
                           </li>
                           <li>
                              <p>Using the <code class="codeph">DBA_ADDM_*</code> and <code class="codeph">DBA_ADVISOR_*</code> views
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-B4B0899D-90A3-4E19-8654-1D5C34A48FD5__GUID-B6B811FC-9517-4045-BEAC-E44FC7B9B380">
                           <p class="notep1">Note:</p>
                           <ul style="list-style-type: disc;" id="GUID-B4B0899D-90A3-4E19-8654-1D5C34A48FD5__UL_KJX_XP4_JGB">
                              <li>ADDM is enabled by default in a CDB root.</li>
                              <li>ADDM does not work in a PDB by default, because automatic AWR snapshots are disabled by default in a PDB. To use ADDM in a PDB, you must enable automatic AWR snapshots in the PDB.</li>
                              <li>A user whose current container is the CDB root can view ADDM results for the entire CDB. The ADDM results can include information about multiple PDBs. ADDM results related to a PDB are not included if the PDB is unplugged. The ADDM results stored on the CDB root cannot be viewed when the current container is a PDB.</li>
                              <li>ADDM results on a PDB provide only PDB-specific findings and recommendations. A user whose current container is a PDB can view ADDM results for the current PDB only. The ADDM results exclude findings that apply to the CDB as a whole, for example, I/O problems relating to the buffer cache size.</li>
                              <li>Enabling AWR snapshots on a PDB does not change the ADDM report on the CDB root.</li>
                              <li>AWR data on a PDB cannot be accessed from the CDB root.</li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-B4B0899D-90A3-4E19-8654-1D5C34A48FD5__GUID-188AF643-808E-4966-AB84-BA9EE1340262">PDB-Level ADDM Restrictions</p>
                        <p>Unlike in a non-CDB, ADDM does not report the following issues in a PDB, because these issues apply to a CDB as a whole and do not apply to an individual PDB:</p>
                        <ul style="list-style-type: disc;" id="GUID-B4B0899D-90A3-4E19-8654-1D5C34A48FD5__UL_UM1_X24_JGB">
                           <li>
                              <p>I/O problems due to: </p>
                              <ul style="list-style-type: disc;" id="GUID-B4B0899D-90A3-4E19-8654-1D5C34A48FD5__UL_HRX_DM4_JGB">
                                 <li>undersized buffer cache</li>
                                 <li>undersized streams pool</li>
                                 <li>excessive temporary writes</li>
                                 <li>excessive checkpoint writes</li>
                                 <li>excessive undo writes</li>
                                 <li>excessive PQ checkpoint writes</li>
                                 <li>excessive truncate writes</li>
                                 <li>excessive tablespace DDL checkpoint</li>
                                 <li>I/O capacity limit</li>
                              </ul>
                           </li>
                           <li>
                              <p>SQL hard parsing issues due to: </p>
                              <ul style="list-style-type: disc;" id="GUID-B4B0899D-90A3-4E19-8654-1D5C34A48FD5__UL_GQF_QM4_JGB">
                                 <li>cursor aging</li>
                                 <li>out-of-memory failed parse</li>
                              </ul>
                           </li>
                           <li>
                              <p>SGA sizing issues</p>
                           </li>
                        </ul>
                        <p>ADDM also does not report the following issues in a PDB, because these issues cannot be resolved at a PDB level:</p>
                        <ul style="list-style-type: disc;" id="GUID-B4B0899D-90A3-4E19-8654-1D5C34A48FD5__UL_VM1_X24_JGB">
                           <li>
                              <p>Cluster messaging related issues, such as network latency, congestion, contention, and lost blocks</p>
                           </li>
                           <li>
                              <p>Log file switch waits on archiving and on checkpoint incomplete</p>
                           </li>
                           <li>
                              <p>Too many free-buffer waits</p>
                           </li>
                           <li>
                              <p>Contention on log buffer waits</p>
                           </li>
                           <li>
                              <p>Waits due to CPU bottleneck</p>
                           </li>
                           <li>
                              <p>Operating system VM paging</p>
                           </li>
                           <li>
                              <p>Session slot wait event</p>
                           </li>
                           <li>
                              <p>CPU quantum wait event</p>
                           </li>
                           <li>
                              <p>RMAN related wait events, such as PQ queued wait event, PGA limit wait event, and I/O queue wait event</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-B4B0899D-90A3-4E19-8654-1D5C34A48FD5__GUID-C9D0AA36-7691-4DE2-B757-FD842DBAF217">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;" id="GUID-B4B0899D-90A3-4E19-8654-1D5C34A48FD5__UL_JDP_V24_JGB">
                              <li>
                                 <p><span class="q">"<a href="automatic-performance-diagnostics.html#GUID-5A4F4896-6F95-461F-84E3-8E40F6036752" title="ADDM does not work in a pluggable database (PDB) by default, because automatic AWR snapshots are disabled by default in a PDB. To use ADDM in a PDB, you must enable automatic AWR snapshots in the PDB by setting the AWR_PDB_AUTOFLUSH_ENABLED initialization parameter to TRUE and AWR snapshot interval greater than 0.">Enabling ADDM in a Pluggable Database</a>"</span> for information about how to enable ADDM in a PDB
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="automatic-performance-diagnostics.html#GUID-914A7E7C-FD5F-4F24-93AA-9E98578EB129">ADDM Views</a>"</span> for more information about the ADDM views <code class="codeph">DBA_ADDM_*</code> and <code class="codeph">DBA_ADVISOR_*</code></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="automatic-performance-diagnostics.html#GUID-AEE549F3-DDF9-4977-8A0A-FE1E47C75679">Diagnosing Database Performance Problems with ADDM</a>"</span> for information about how to run ADDM in an Oracle database using the <code class="codeph">DBMS_ADDM</code> package subprograms
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../tdppt/automatic-database-performance-monitoring.html#TDPPT020" target="_blank"><span class="italic">Oracle Database 2 Day + Performance Tuning Guide</span></a> for information about how to run ADDM in an Oracle database using Cloud Control
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div class="props_rev_3"><a id="GUID-5A4F4896-6F95-461F-84E3-8E40F6036752" name="GUID-5A4F4896-6F95-461F-84E3-8E40F6036752"></a><h5 id="TGDBA-GUID-5A4F4896-6F95-461F-84E3-8E40F6036752" class="sect5"><span class="enumeration_section">7.1.3.1 </span>Enabling ADDM in a Pluggable Database
                     </h5>
                     <div>
                        <p>ADDM does not work in a pluggable database (PDB) by default, because automatic AWR snapshots are disabled by default in a PDB. To use ADDM in a PDB, you must enable automatic AWR snapshots in the PDB by setting the <code class="codeph">AWR_PDB_AUTOFLUSH_ENABLED</code> initialization parameter to <code class="codeph">TRUE</code> and AWR snapshot interval greater than 0.
                        </p>
                        <div class="section">
                           <p class="subhead3" id="GUID-5A4F4896-6F95-461F-84E3-8E40F6036752__GUID-DD3E22CF-F0CF-4B77-91B8-E2D6FE1C97E2">To enable ADDM in a PDB:</p>
                           <ol>
                              <li>
                                 <p>Set the <code class="codeph">AWR_PDB_AUTOFLUSH_ENABLED</code> initialization parameter to <code class="codeph">TRUE</code> in the PDB using the following command:
                                 </p><pre class="pre codeblock"><code>SQL&gt; ALTER SYSTEM SET AWR_PDB_AUTOFLUSH_ENABLED=TRUE;</code></pre></li>
                              <li>
                                 <p>Set the AWR snapshot interval greater than 0 in the PDB using the command as shown in the following example:</p><pre class="pre codeblock"><code>SQL&gt; EXEC dbms_workload_repository.modify_snapshot_settings(interval=&gt;60);</code></pre></li>
                           </ol>
                           <div class="infoboxnotealso" id="GUID-5A4F4896-6F95-461F-84E3-8E40F6036752__GUID-B599EB38-C7DD-454C-9703-43CB5036F49C">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;" id="GUID-5A4F4896-6F95-461F-84E3-8E40F6036752__UL_WK1_XC4_JGB">
                                 <li>
                                    <p><a href="../refrn/AWR_PDB_AUTOFLUSH_ENABLED.html#REFRN-GUID-08FA21BC-8FB1-4C51-BEEA-139C734D17A7" target="_blank"><span class="italic">Oracle Database Reference</span></a> for more information about the <code class="codeph">AWR_PDB_AUTOFLUSH_ENABLED</code> initialization parameter
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_WORKLOAD_REPOSITORY.html#ARPLS-GUID-E2B46878-1BDB-4789-8A21-016A625530F1" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about the <code class="codeph">DBMS_WORKLOAD_REPOSITORY.MODIFY_SNAPSHOT_SETTINGS</code> procedure
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="TGDBA95368"></a><div class="props_rev_3"><a id="GUID-9DD81F99-3B4D-4340-9F19-30E5B47DC41D" name="GUID-9DD81F99-3B4D-4340-9F19-30E5B47DC41D"></a><h4 id="TGDBA-GUID-9DD81F99-3B4D-4340-9F19-30E5B47DC41D" class="sect4"><span class="enumeration_section">7.1.4 </span>Real-Time ADDM Analysis
                  </h4>
                  <div>
                     <p>Introduced in Oracle Enterprise Manager Cloud Control (Cloud Control) 12<span class="italic">c</span>, Real-Time ADDM helps you to analyze and resolve problems in unresponsive or hung databases that traditionally require you to restart the database. Real-Time ADDM runs through a set of predefined criteria to analyze the current performance of the database. After analyzing the problem, Real-Time ADDM helps you to resolve the identified issues—such as deadlocks, hangs, shared pool contention, and other exception situations—without having to restart the database.
                     </p>
                     <p>This section describes Real-Time ADDM and contains the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="automatic-performance-diagnostics.html#GUID-C8ACD778-60CF-4E9E-A644-45533E93C34A">Real-Time ADDM Connection Modes</a></p>
                        </li>
                        <li>
                           <p><a href="automatic-performance-diagnostics.html#GUID-5B6CB1B0-DF21-4FF4-921D-B3E9B39556D6">Real-Time ADDM Triggers</a></p>
                        </li>
                        <li>
                           <p><a href="automatic-performance-diagnostics.html#GUID-01DB980E-9607-41DD-8B20-834FE8D77BE8">Real-Time ADDM Trigger Controls</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-9DD81F99-3B4D-4340-9F19-30E5B47DC41D__GUID-DABECB6A-B020-4925-AA78-5604FDAE4D58">
                        <p class="notep1">See Also:</p>
                        <p><a href="../tdppt/resolving-transient-performance-problems.html#TDPPT523" target="_blank"><span class="italic">Oracle Database 2 Day + Performance Tuning Guide</span></a> for information about using Real-Time ADDM with Cloud Control
                        </p>
                     </div>
                  </div><a id="TGDBA95369"></a><div class="props_rev_3"><a id="GUID-C8ACD778-60CF-4E9E-A644-45533E93C34A" name="GUID-C8ACD778-60CF-4E9E-A644-45533E93C34A"></a><h5 id="TGDBA-GUID-C8ACD778-60CF-4E9E-A644-45533E93C34A" class="sect5"><span class="enumeration_section">7.1.4.1 </span>Real-Time ADDM Connection Modes
                     </h5>
                     <div>
                        <p>Depending on the database state, Real-Time ADDM uses two different types of connection modes when connecting to the database using Cloud Control:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Normal connection</p>
                              <p>In this mode, Real-Time ADDM performs a normal JDBC connection to the database. This mode is intended to perform extensive performance analysis of the database when some connectivity is available.</p>
                           </li>
                           <li>
                              <p>Diagnostic connection</p>
                              <p>In this mode, Real-Time ADDM performs a latch-less connection to the database. This mode is intended for extreme hang situations when a normal JDBC connection is not possible.</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="TGDBA95371"></a><a id="TGDBA95370"></a><div class="props_rev_3"><a id="GUID-5B6CB1B0-DF21-4FF4-921D-B3E9B39556D6" name="GUID-5B6CB1B0-DF21-4FF4-921D-B3E9B39556D6"></a><h5 id="TGDBA-GUID-5B6CB1B0-DF21-4FF4-921D-B3E9B39556D6" class="sect5"><span class="enumeration_section">7.1.4.2 </span>Real-Time ADDM Triggers
                     </h5>
                     <div>
                        <p>Starting with Oracle Database 12<span class="italic">c</span>, Real-Time ADDM proactively detects transient database performance issues. To do this, Real-Time ADDM runs automatically every 3 seconds and uses in-memory data to diagnose any performance spikes in the database.
                        </p>
                        <p>Real-Time ADDM triggers an analysis automatically when a performance problem is detected, as described in the following steps:</p>
                        <ol>
                           <li>
                              <p>Every 3 seconds, the manageability monitor process (MMON) performs an action to obtain performance statistics without lock or latch.</p>
                           </li>
                           <li>
                              <p>The MMON process checks these statistics and triggers a Real-Time ADDM analysis if any of the issues listed in <a href="automatic-performance-diagnostics.html#GUID-5B6CB1B0-DF21-4FF4-921D-B3E9B39556D6__BABEDDIC" title="Lists the issues and conditions that trigger an Real-Time ADDM analysis.">Table 7-1</a> are detected.
                              </p>
                           </li>
                           <li>
                              <p>The MMON slave process creates the report and stores it in the AWR.</p>
                              <p>To view metadata for the report, use the <code class="codeph">DBA_HIST_REPORTS</code> view.
                              </p>
                           </li>
                        </ol>
                        <p><a href="automatic-performance-diagnostics.html#GUID-5B6CB1B0-DF21-4FF4-921D-B3E9B39556D6__BABEDDIC" title="Lists the issues and conditions that trigger an Real-Time ADDM analysis.">Table 7-1</a> lists the issues and conditions that trigger a Real-Time ADDM analysis.
                        </p>
                        <div class="tblformal" id="GUID-5B6CB1B0-DF21-4FF4-921D-B3E9B39556D6__BABEDDIC">
                           <p class="titleintable">Table 7-1 Triggering Issues and Conditions for Real-Time ADDM</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Triggering Issues and Conditions for Real-Time ADDM" summary="Lists the issues and conditions that trigger an Real-Time ADDM analysis." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d19268e1029">Issue</th>
                                    <th align="left" valign="bottom" width="69%" id="d19268e1032">Condition</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d19268e1037" headers="d19268e1029 ">
                                       <p>High load</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d19268e1037 d19268e1032 ">
                                       <p>Average active sessions are greater than 3 times the number of CPU cores</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d19268e1044" headers="d19268e1029 ">
                                       <p>I/O bound</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d19268e1044 d19268e1032 ">
                                       <p>I/O impact on active sessions based on single block read performance</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d19268e1051" headers="d19268e1029 ">
                                       <p>CPU bound</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d19268e1051 d19268e1032 ">
                                       <p>Active sessions are greater than 10% of total load and CPU utilization is greater than 50%</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d19268e1058" headers="d19268e1029 ">
                                       <p>Over-allocated memory</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d19268e1058 d19268e1032 ">
                                       <p>Memory allocations are over 95% of physical memory</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d19268e1065" headers="d19268e1029 ">
                                       <p>Interconnect bound</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d19268e1065 d19268e1032 ">
                                       <p>Based on single block interconnect transfer time</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d19268e1072" headers="d19268e1029 ">
                                       <p>Session limit</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d19268e1072 d19268e1032 ">
                                       <p>Session limit is close to 100%</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d19268e1079" headers="d19268e1029 ">
                                       <p>Process limit</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d19268e1079 d19268e1032 ">
                                       <p>Process limit is close to 100%</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d19268e1086" headers="d19268e1029 ">
                                       <p>Hung session</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d19268e1086 d19268e1032 ">
                                       <p>Hung sessions are greater than 10% of total sessions</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d19268e1093" headers="d19268e1029 ">
                                       <p>Deadlock detected</p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d19268e1093 d19268e1032 ">
                                       <p>Any deadlock is detected</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-5B6CB1B0-DF21-4FF4-921D-B3E9B39556D6__GUID-EB6A5DA3-3D88-499E-BB01-9F50ED38F4EE">
                              <p class="notep1">See Also:</p>
                              <p><a href="../refrn/DBA_HIST_REPORTS.html#REFRN23881" target="_blank"><span class="italic">Oracle Database Reference</span></a> for information about the <code class="codeph">DBA_HIST_REPORTS</code> view
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TGDBA95372"></a><div class="props_rev_3"><a id="GUID-01DB980E-9607-41DD-8B20-834FE8D77BE8" name="GUID-01DB980E-9607-41DD-8B20-834FE8D77BE8"></a><h5 id="TGDBA-GUID-01DB980E-9607-41DD-8B20-834FE8D77BE8" class="sect5"><span class="enumeration_section">7.1.4.3 </span>Real-Time ADDM Trigger Controls
                     </h5>
                     <div>
                        <p>To ensure that the automatic triggers do not consume too many system resources and overwhelm the system, Real-Time ADDM employs the following controls:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Duration between reports</p>
                              <p>If a Real-Time ADDM report was created in the past 5 minutes by the automatic trigger, then no new reports will be generated.</p>
                           </li>
                           <li>
                              <p>Oracle RAC control</p>
                              <p>Automatic triggers are local to the database instance. For Oracle RAC, only one database instance can create a Real-Time ADDM report at a given time because a lock is required and a query is performed by the MMON slave process before the report is actually generated.</p>
                           </li>
                           <li>
                              <p>Repeated triggers</p>
                              <p>An automatic trigger for any issue must have an impact of 100% or higher than the previous report with the same triggering issue within the past 45 minutes. For example, if a report is triggered for active sessions with an impact of 8 sessions, then in order for another report to trigger within the next 45 minutes, there must be at least 16 active sessions. In this case, the reported problem with the database is becoming more severe over time. On the other hand, if the same report is being generated once every 45 minutes, then the database is experiencing a persistent problem that has a consistent impact.</p>
                           </li>
                           <li>
                              <p>Newly identified issues</p>
                              <p>If a new issue is detected (that was not previously detected within the past 45 minutes), then a new report is generated. For example, if a report is triggered for 8 active sessions and a new deadlock issue is detected, then a new report is generated regardless of the new active sessions load.</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="TGDBA94242"></a><div class="props_rev_3"><a id="GUID-824AA656-C199-437D-926B-A8F05590A65C" name="GUID-824AA656-C199-437D-926B-A8F05590A65C"></a><h4 id="TGDBA-GUID-824AA656-C199-437D-926B-A8F05590A65C" class="sect4"><span class="enumeration_section">7.1.5 </span>ADDM Analysis Results
                  </h4>
                  <div>
                     <p>In addition to problem diagnostics, ADDM recommends possible solutions. <a id="d19268e1234" class="indexterm-anchor"></a>ADDM analysis results are represented as a set of <a id="d19268e1239" class="indexterm-anchor"></a>findings. See <a href="automatic-performance-diagnostics.html#GUID-DCD9B583-0059-492C-A801-0A551C9CE5F8__i38382">Example 7-1</a> for an example of an ADDM analysis result. Each ADDM finding can belong to one of the following types: 
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Problem findings describe the root cause of a database performance problem.</p>
                        </li>
                        <li>
                           <p>Symptom findings contain information that often lead to one or more problem findings. </p>
                        </li>
                        <li>
                           <p>Information findings are used for reporting information that are relevant to understanding the performance of the database, but do not constitute a performance problem (such as non-problem areas of the database and the activity of automatic database maintenance).</p>
                        </li>
                        <li>
                           <p>Warning findings contain information about problems that may affect the completeness or accuracy of the ADDM analysis (such as missing data in AWR).</p>
                        </li>
                     </ul>
                     <p>Each problem finding is quantified by an impact that is an estimate of the portion of <code class="codeph">DB</code> <code class="codeph">time</code> caused by the finding's performance issue. A problem finding can be associated with a list of recommendations for reducing the impact of the performance problem. The types of recommendations include<a id="d19268e1267" class="indexterm-anchor"></a>:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Hardware changes: adding CPUs or changing the I/O subsystem configuration</p>
                        </li>
                        <li>
                           <p>Database configuration: changing initialization parameter settings</p>
                        </li>
                        <li>
                           <p>Schema changes: hash partitioning a table or index, or using automatic segment-space management (ASSM)</p>
                        </li>
                        <li>
                           <p>Application changes: using the cache option for sequences or using bind    variables</p>
                        </li>
                        <li>
                           <p>Using other advisors: running SQL Tuning Advisor on high-load SQL or running Segment Advisor on hot objects</p>
                        </li>
                     </ul>
                     <p>A list of recommendations can contain various alternatives for solving the same problem; you do not have to apply all the recommendations to solve a specific problem. Each recommendation has a benefit which is an estimate of the portion of <code class="codeph">DB</code> <code class="codeph">time</code> that can be saved if the recommendation is implemented. <a id="d19268e1296" class="indexterm-anchor"></a>Recommendations are composed of actions and rationales. You must apply all the actions of a recommendation to gain the estimated benefit. The rationales are used for explaining why the set of actions were recommended and to provide additional information to implement the suggested recommendation.
                     </p>
                  </div>
               </div><a id="TGDBA94244"></a><a id="TGDBA94243"></a><div class="props_rev_3"><a id="GUID-DCD9B583-0059-492C-A801-0A551C9CE5F8" name="GUID-DCD9B583-0059-492C-A801-0A551C9CE5F8"></a><h4 id="TGDBA-GUID-DCD9B583-0059-492C-A801-0A551C9CE5F8" class="sect4"><span class="enumeration_section">7.1.6 </span>Reviewing ADDM Analysis Results: Example
                  </h4>
                  <div>
                     <p><a id="d19268e1353" class="indexterm-anchor"></a><a id="d19268e1357" class="indexterm-anchor"></a>Consider the following section of an ADDM report in <a href="automatic-performance-diagnostics.html#GUID-DCD9B583-0059-492C-A801-0A551C9CE5F8__i38382">Example 7-1</a>.
                     </p>
                     <div class="example" id="GUID-DCD9B583-0059-492C-A801-0A551C9CE5F8__i38382">
                        <p class="titleinexample">Example 7-1 Example ADDM Report</p><pre class="oac_no_warn" dir="ltr">FINDING 1: 31% impact (7798 seconds) 
------------------------------------ 
SQL statements were not shared due to the usage of literals. This resulted in 
additional hard parses which were consuming significant database time.

RECOMMENDATION 1: Application Analysis, 31% benefit (7798 seconds)
  ACTION: Investigate application logic for possible use of bind variables
    instead of literals. Alternatively, you may set the parameter 
    "cursor_sharing" to "force".
  RATIONALE: SQL statements with PLAN_HASH_VALUE 3106087033 were found to be
    using literals. Look in V$SQL for examples of such SQL statements.
</pre><p>In <a href="automatic-performance-diagnostics.html#GUID-DCD9B583-0059-492C-A801-0A551C9CE5F8__i38382">Example 7-1</a>, the finding points to a particular root cause, the usage of literals in SQL statements, which is estimated to have an impact of about 31% of total <code class="codeph">DB</code> <code class="codeph">time</code> in the analysis period. 
                        </p>
                        <p>The finding has a recommendation associated with it, composed of one action and one rationale. The action specifies a solution to the problem found and is estimated to have a maximum benefit of up to 31% <code class="codeph">DB</code> <code class="codeph">time</code> in the analysis period. Note that the benefit is given as a portion of the total <code class="codeph">DB</code> <code class="codeph">time</code> and not as a portion of the finding's impact. The rationale provides additional information on tracking potential SQL statements that were using literals and causing this performance issue. Using the specified plan hash value of SQL statements that could be a problem, a DBA could quickly examine a few sample statements.
                        </p>
                        <p>When a specific problem has multiple causes, ADDM may report multiple problem and symptom findings. In this case, the impacts of these multiple findings can contain the same portion of <code class="codeph">DB</code> <code class="codeph">time</code>. Because the performance issues of findings can overlap, the sum of the impacts of the findings can exceed 100% of <code class="codeph">DB</code> <code class="codeph">time</code>. For example, if a system performs many reads, then ADDM might report a SQL statement responsible for 50% of <code class="codeph">DB</code> <code class="codeph">time</code> due to I/O activity as one finding, and an undersized buffer cache responsible for 75% of <code class="codeph">DB</code> <code class="codeph">time</code> as another finding.
                        </p>
                        <p>When multiple recommendations are associated with a problem finding, the recommendations may contain alternatives for solving the problem. In this case, the sum of the recommendations' benefits may be higher than the finding's impact.</p>
                        <p>When appropriate, an ADDM action may have multiple solutions for you to choose from. In the example, the most effective solution is to use bind variables. However, it is often difficult to modify the application. Changing the value of the <code class="codeph">CURSOR_SHARING</code> initialization parameter is much easier to implement and can provide significant improvement.
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="TGDBA94245"></a><div class="props_rev_3"><a id="GUID-19D504B9-B4E4-4FBF-B0D2-F758B467FEDD" name="GUID-19D504B9-B4E4-4FBF-B0D2-F758B467FEDD"></a><h3 id="TGDBA-GUID-19D504B9-B4E4-4FBF-B0D2-F758B467FEDD" class="sect3"><span class="enumeration_section">7.2 </span>Setting Up ADDM
               </h3>
               <div>
                  <div class="section">
                     <p><a id="d19268e1478" class="indexterm-anchor"></a><a id="d19268e1482" class="indexterm-anchor"></a>Automatic database diagnostic monitoring is enabled by default and is controlled by the <code class="codeph">CONTROL_MANAGEMENT_PACK_ACCESS</code> and the <code class="codeph">STATISTICS_LEVEL</code> initialization parameters.
                     </p>
                     <p>The <code class="codeph">CONTROL_MANAGEMENT_PACK_ACCESS</code> parameter should be set to <code class="codeph">DIAGNOSTIC</code> or <code class="codeph">DIAGNOSTIC+TUNING</code> to enable automatic database diagnostic monitoring. The default setting is <code class="codeph">DIAGNOSTIC+TUNING</code>. Setting <code class="codeph">CONTROL_MANAGEMENT_PACK_ACCESS</code> to <code class="codeph">NONE</code> disables ADDM.
                     </p>
                     <p>The <code class="codeph">STATISTICS_LEVEL</code> parameter should be set to the <code class="codeph">TYPICAL</code> or <code class="codeph">ALL</code> to enable automatic database diagnostic monitoring. The default setting is <code class="codeph">TYPICAL</code>. Setting <code class="codeph">STATISTICS_LEVEL</code> to <code class="codeph">BASIC</code> disables many Oracle Database features, including ADDM, and is strongly discouraged.
                     </p>
                     <div class="infoboxnotealso" id="GUID-19D504B9-B4E4-4FBF-B0D2-F758B467FEDD__GUID-2E1A5D98-918C-4051-B784-B060C1F9C4B4">
                        <p class="notep1">See Also:</p>
                        <p><span class="italic">Oracle Database Reference</span> for information about the <a href="../refrn/CONTROL_MANAGEMENT_PACK_ACCESS.html#REFRN-GUID-A5CA11BA-AE1F-4A2E-9C59-A98BA1F4E5C2" target="_blank"><code class="codeph">CONTROL_MANAGEMENT_PACK_ACCESS</code></a> and <a href="../refrn/STATISTICS_LEVEL.html#REFRN-GUID-16B23F95-8644-407A-A6C8-E85CADFA61FF" target="_blank"><code class="codeph">STATISTICS_LEVEL</code></a> initialization parameters
                        </p>
                     </div>
                     <p>ADDM analysis of I/O performance partially depends on a single argument, <code class="codeph">DBIO_EXPECTED</code>, that describes the expected performance of the I/O subsystem. The value of <code class="codeph">DBIO_EXPECTED</code> is the average time it takes to read a single database block in microseconds. Oracle Database uses the default value of 10 milliseconds, which is an appropriate value for most modern hard drives. If your hardware is significantly different—such as very old hardware or very fast RAM disks—then consider using a different value.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-19D504B9-B4E4-4FBF-B0D2-F758B467FEDD__GUID-83877CCB-3119-4D64-932C-C2CDEEEC3217">To determine the correct setting for the DBIO_EXPECTED parameter:</p>
                     <ol>
                        <li>
                           <p>Measure the average read time of a single database block read for your hardware.</p>
                           <p>Note that this measurement is for random I/O, which includes seek time if you use standard hard drives. Typical values for hard drives are between 5000 and 20000 microseconds. </p>
                        </li>
                        <li>
                           <p><a id="d19268e1569" class="indexterm-anchor"></a><a id="d19268e1573" class="indexterm-anchor"></a>Set the value one time for all subsequent ADDM executions.
                           </p>
                           <p>For example, if the measured value if 8000 microseconds, you should execute the following command as SYS user:</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_ADVISOR.SET_DEFAULT_TASK_PARAMETER(
                     'ADDM', 'DBIO_EXPECTED', 8000);</pre></li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="TGDBA94246"></a><div class="props_rev_3"><a id="GUID-AEE549F3-DDF9-4977-8A0A-FE1E47C75679" name="GUID-AEE549F3-DDF9-4977-8A0A-FE1E47C75679"></a><h3 id="TGDBA-GUID-AEE549F3-DDF9-4977-8A0A-FE1E47C75679" class="sect3"><span class="enumeration_section">7.3 </span>Diagnosing Database Performance Problems with ADDM
               </h3>
               <div>
                  <p>To diagnose database performance problems, first review the ADDM analysis results that are automatically created each time an AWR snapshot is taken. If a different analysis is required (such as a longer analysis period, using a different <code class="codeph">DBIO_EXPECTED</code> setting, or changing the analysis mode), you can run ADDM manually as described in this section.
                  </p>
                  <p>ADDM can analyze any two AWR snapshots (on the same database), as long as both snapshots are still stored in AWR (have not been purged). ADDM can only analyze instances that are started before the beginning snapshot and remain running until the ending snapshot. Additionally, ADDM will not analyze instances that experience significant errors when generating AWR snapshots. In such cases, ADDM will analyze the largest subset of instances that did not experience these problems.</p>
                  <p>The primary interface for diagnostic monitoring is Cloud Control. Whenever possible, run ADDM using Cloud Control, as described in <a href="../tdppt/automatic-database-performance-monitoring.html#TDPPT020" target="_blank"><span class="italic">Oracle Database 2 Day + Performance Tuning Guide</span></a>. If Cloud Control is unavailable, then run ADDM using the <code class="codeph">DBMS_ADDM</code> package. To run the <code class="codeph">DBMS_ADDM</code> APIs, the user must be granted the <code class="codeph">ADVISOR</code> privilege.
                  </p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="automatic-performance-diagnostics.html#GUID-844F5FA1-4CD7-42B9-A750-199ECFD3F3E1">Running ADDM in Database Mode</a></p>
                     </li>
                     <li>
                        <p><a href="automatic-performance-diagnostics.html#GUID-EA83D5B3-F4F0-4B4A-9597-19BBA22E55B9">Running ADDM in Instance Mode</a></p>
                     </li>
                     <li>
                        <p><a href="automatic-performance-diagnostics.html#GUID-848B8796-EDDC-4700-BCB9-261C9D21D853">Running ADDM in Partial Mode</a></p>
                     </li>
                     <li>
                        <p><a href="automatic-performance-diagnostics.html#GUID-0A1DA0E7-098C-40CC-9975-B9BF4F29C942">Displaying an ADDM Report</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-AEE549F3-DDF9-4977-8A0A-FE1E47C75679__GUID-87349219-CB01-45B5-BB94-8BCA9CDD1824">
                     <p class="notep1">See Also:</p>
                     <p><a href="../arpls/DBMS_ADDM.html#ARPLS232" target="_blank"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the <code class="codeph">DBMS_ADDM</code> package
                     </p>
                  </div>
               </div><a id="TGDBA94247"></a><div class="props_rev_3"><a id="GUID-844F5FA1-4CD7-42B9-A750-199ECFD3F3E1" name="GUID-844F5FA1-4CD7-42B9-A750-199ECFD3F3E1"></a><h4 id="TGDBA-GUID-844F5FA1-4CD7-42B9-A750-199ECFD3F3E1" class="sect4"><span class="enumeration_section">7.3.1 </span>Running ADDM in Database Mode
                  </h4>
                  <div>
                     <div class="section">
                        <p>For Oracle RAC configurations, you can run ADDM in Database mode to analyze all instances of the databases. For single-instance configurations, you can still run ADDM in Database mode; ADDM will behave as if running in Instance mode.</p>
                        <p>To run ADDM in Database mode, use the <code class="codeph">DBMS_ADDM</code>.<code class="codeph">ANALYZE_DB</code> procedure:
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN
DBMS_ADDM.ANALYZE_DB (
   task_name           IN OUT VARCHAR2,
   begin_snapshot      IN     NUMBER,
   end_snapshot        IN     NUMBER,
   db_id               IN     NUMBER := NULL);
END;
/
</pre><p>The <code class="codeph">task_name</code> parameter specifies the name of the analysis task that will be created. The <code class="codeph">begin_snapshot</code> parameter specifies the snapshot number of the beginning snapshot in the analysis period. The <code class="codeph">end_snapshot</code> parameter specifies the snapshot number of the ending snapshot in the analysis period. The <code class="codeph">db_id</code> parameter specifies the database identifier of the database that will be analyzed. If unspecified, this parameter defaults to the database identifier of the database to which you are currently connected.
                        </p>
                        <p>The following example creates an ADDM task in database analysis mode, and executes it to diagnose the performance of the entire database during the time period defined by snapshots 137 and 145:</p><pre class="oac_no_warn" dir="ltr">VAR tname VARCHAR2(30);
BEGIN
  :tname := 'ADDM for 7PM to 9PM';
  DBMS_ADDM.ANALYZE_DB(:tname, 137, 145);
END;
/
</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TGDBA94248"></a><div class="props_rev_3"><a id="GUID-EA83D5B3-F4F0-4B4A-9597-19BBA22E55B9" name="GUID-EA83D5B3-F4F0-4B4A-9597-19BBA22E55B9"></a><h4 id="TGDBA-GUID-EA83D5B3-F4F0-4B4A-9597-19BBA22E55B9" class="sect4"><span class="enumeration_section">7.3.2 </span>Running ADDM in Instance Mode
                  </h4>
                  <div>
                     <div class="section">
                        <p>To analyze a particular instance of the database, you can run ADDM in Instance mode. To run ADDM in Instance mode, use the <code class="codeph">DBMS_ADDM</code>.<code class="codeph">ANALYZE_INST</code> procedure:
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN
DBMS_ADDM.ANALYZE_INST (
   task_name           IN OUT VARCHAR2,
   begin_snapshot      IN     NUMBER,
   end_snapshot        IN     NUMBER,
   instance_number     IN     NUMBER := NULL,
   db_id               IN     NUMBER := NULL);
END;
/
</pre><p>The <code class="codeph">task_name</code> parameter specifies the name of the analysis task that will be created. The <code class="codeph">begin_snapshot</code> parameter specifies the snapshot number of the beginning snapshot in the analysis period. The <code class="codeph">end_snapshot</code> parameter specifies the snapshot number of the ending snapshot in the analysis period. The <code class="codeph">instance_number</code> parameter specifies the instance number of the instance that will be analyzed. If unspecified, this parameter defaults to the instance number of the instance to which you are currently connected. The <code class="codeph">db_id</code> parameter specifies the database identifier of the database that will be analyzed. If unspecified, this parameter defaults to the database identifier of the database to which you are currently connected.
                        </p>
                        <p>The following example creates an ADDM task in instance analysis mode, and executes it to diagnose the performance of instance number 1 during the time period defined by snapshots 137 and 145:</p><pre class="oac_no_warn" dir="ltr">VAR tname VARCHAR2(30);
BEGIN
  :tname := 'my ADDM for 7PM to 9PM';
  DBMS_ADDM.ANALYZE_INST(:tname, 137, 145, 1);
END;
/
</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TGDBA94249"></a><div class="props_rev_3"><a id="GUID-848B8796-EDDC-4700-BCB9-261C9D21D853" name="GUID-848B8796-EDDC-4700-BCB9-261C9D21D853"></a><h4 id="TGDBA-GUID-848B8796-EDDC-4700-BCB9-261C9D21D853" class="sect4"><span class="enumeration_section">7.3.3 </span>Running ADDM in Partial Mode
                  </h4>
                  <div>
                     <div class="section">
                        <p>To analyze a subset of all database instances, you can run ADDM in Partial mode. To run ADDM in Partial mode, use the <code class="codeph">DBMS_ADDM</code>.<code class="codeph">ANALYZE_PARTIAL</code> procedure:
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN
DBMS_ADDM.ANALYZE_PARTIAL (
   task_name           IN OUT VARCHAR2,
   instance_numbers    IN     VARCHAR2,
   begin_snapshot      IN     NUMBER,
   end_snapshot        IN     NUMBER,
   db_id               IN     NUMBER := NULL);
END;
/
</pre><p>The <code class="codeph">task_name</code> parameter specifies the name of the analysis task that will be created. The <code class="codeph">instance_numbers</code> parameter specifies a comma-delimited list of instance numbers of instances that will be analyzed. The <code class="codeph">begin_snapshot</code> parameter specifies the snapshot number of the beginning snapshot in the analysis period. The <code class="codeph">end_snapshot</code> parameter specifies the snapshot number of the ending snapshot in the analysis period. The <code class="codeph">db_id</code> parameter specifies the database identifier of the database that will be analyzed. If unspecified, this parameter defaults to the database identifier of the database to which you are currently connected.
                        </p>
                        <p>The following example creates an ADDM task in partial analysis mode, and executes it to diagnose the performance of instance numbers 1, 2, and 4, during the time period defined by snapshots 137 and 145:</p><pre class="oac_no_warn" dir="ltr">VAR tname VARCHAR2(30);
BEGIN
  :tname := 'my ADDM for 7PM to 9PM';
  DBMS_ADDM.ANALYZE_PARTIAL(:tname, '1,2,4', 137, 145);
END;
/
</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TGDBA94250"></a><div class="props_rev_3"><a id="GUID-0A1DA0E7-098C-40CC-9975-B9BF4F29C942" name="GUID-0A1DA0E7-098C-40CC-9975-B9BF4F29C942"></a><h4 id="TGDBA-GUID-0A1DA0E7-098C-40CC-9975-B9BF4F29C942" class="sect4"><span class="enumeration_section">7.3.4 </span>Displaying an ADDM Report
                  </h4>
                  <div>
                     <div class="section">
                        <p>To display a text report of an executed ADDM task, use the <code class="codeph">DBMS_ADDM</code>.<code class="codeph">GET_REPORT</code> function:
                        </p><pre class="oac_no_warn" dir="ltr">DBMS_ADDM.GET_REPORT (
   task_name           IN VARCHAR2
  RETURN CLOB);
</pre><p>The following example displays a text report of the ADDM task specified by its task name using the <code class="codeph">tname</code> variable:
                        </p><pre class="oac_no_warn" dir="ltr">SET LONG 1000000 PAGESIZE 0;
SELECT DBMS_ADDM.GET_REPORT(:tname) FROM DUAL;
</pre><p>Note that the return type of a report is a <code class="codeph">CLOB</code>, formatted to fit line size of 80. For information about reviewing the ADDM analysis results in an ADDM report, see <span class="q">"<a href="automatic-performance-diagnostics.html#GUID-824AA656-C199-437D-926B-A8F05590A65C">ADDM Analysis Results</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="TGDBA94251"></a><div class="props_rev_3"><a id="GUID-914A7E7C-FD5F-4F24-93AA-9E98578EB129" name="GUID-914A7E7C-FD5F-4F24-93AA-9E98578EB129"></a><h3 id="TGDBA-GUID-914A7E7C-FD5F-4F24-93AA-9E98578EB129" class="sect3"><span class="enumeration_section">7.4 </span>ADDM Views
               </h3>
               <div>
                  <div class="section">
                     <p>Typically, you should view ADDM analysis using Cloud Control or <code class="codeph">DBMS_ADDM</code> package subprograms.
                     </p>
                     <p>However, you can also get ADDM information using the <code class="codeph">DBA_ADDM_*</code> and <code class="codeph">DBA_ADVISOR_*</code> views. This group of views includes:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">DBA_ADVISOR_FINDINGS</code> 
                           </p>
                           <p>This view displays all the findings discovered by all advisors. Each finding is displayed with an associated finding ID, name, and type. For tasks with multiple executions, the name of each task execution associated with each finding is also listed.</p>
                        </li>
                        <li>
                           <p><code class="codeph">DBA_ADDM_FINDINGS</code></p>
                           <p>This view contains a subset of the findings displayed in the related <code class="codeph">DBA_ADVISOR_FINDINGS</code> view. This view only displays the ADDM findings discovered by all advisors. Each ADDM finding is displayed with an associated finding ID, name, and type.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">DBA_ADVISOR_FINDING_NAMES</code></p>
                           <p>This view lists all finding names registered with the advisor framework.</p>
                        </li>
                        <li>
                           <p><code class="codeph">DBA_ADVISOR_RECOMMENDATIONS</code> 
                           </p>
                           <p>This view displays the results of completed diagnostic tasks with recommendations for the problems identified in each execution. The recommendations should be reviewed in the order of the <code class="codeph">RANK</code> column, as this relays the magnitude of the problem for the recommendation. The <code class="codeph">BENEFIT</code> column displays the benefit to the system you can expect after the recommendation is performed. For tasks with multiple executions, the name of each task execution associated with each advisor task is also listed.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">DBA_ADVISOR_TASKS</code> 
                           </p>
                           <p>This view provides basic information about existing tasks, such as the task ID, task name, and when the task was created. For tasks with multiple executions, the name and type of the last or current execution associated with each advisor task is also listed.</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-914A7E7C-FD5F-4F24-93AA-9E98578EB129__GUID-6D554325-E510-4612-9093-2DC4F5A7951C">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../refrn/about-static-data-dictionary-views.html#REFRN002" target="_blank"><span class="italic">Oracle Database Reference</span></a> for more information about <code class="codeph">DBA_ADDM_*</code> and <code class="codeph">DBA_ADVISOR_*</code> views
                              </p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="automatic-performance-diagnostics.html#GUID-0A1DA0E7-098C-40CC-9975-B9BF4F29C942">Displaying an ADDM Report</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
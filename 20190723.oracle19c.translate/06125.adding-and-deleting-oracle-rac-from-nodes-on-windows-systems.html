<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Adding and Deleting Oracle RAC from Nodes on Windows Systems</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Real Application Clusters Administration and Deployment Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Real Application Clusters Administration and Deployment Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="real-application-clusters-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-25T14:02:30-07:00">
      <meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide">
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E95728-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="adding-and-deleting-oracle-rac-from-nodes-on-linux-and-unix-systems.html" title="Previous" type="text/html">
      <link rel="next" href="design-and-deployment-techniques.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="RACAD">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="adding-and-deleting-oracle-rac-from-nodes-on-linux-and-unix-systems.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="design-and-deployment-techniques.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Real Application Clusters Administration and Deployment Guide</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Adding and Deleting Oracle RAC from Nodes on Windows Systems</li>
            </ol>
            <a id="GUID-75C6891F-ECDC-4D78-9176-EB7E7080FBCB" name="GUID-75C6891F-ECDC-4D78-9176-EB7E7080FBCB"></a><a id="RACAD067"></a>
            
            <h2 id="RACAD-GUID-75C6891F-ECDC-4D78-9176-EB7E7080FBCB" class="sect2"><span class="enumeration_chapter">12 </span>Adding and Deleting Oracle RAC from Nodes on Windows Systems
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter describes how to extend an existing Oracle Real Application Clusters (Oracle RAC) home to other nodes and instances in the cluster, and delete Oracle RAC from nodes and instances in the cluster. This chapter provides instructions for Windows systems.</p>
               <div class="infoboxnote" id="GUID-75C6891F-ECDC-4D78-9176-EB7E7080FBCB__GUID-21F62D44-92BA-495E-B617-E832D775A83D">
                  <p class="notep1">Note:</p>
                  <p>In this chapter, the entries for <code class="codeph"><span class="variable" translate="no">Grid_home</span></code> refer to the full path name for the Oracle Grid Infrastructure home, and the entries for <code class="codeph"><span class="variable" translate="no">Oracle_home</span></code> refer to substitutes for environment variables for the Oracle home with Oracle RAC.
                  </p>
               </div>
               <p>If your goal is to clone an existing Oracle RAC home to create multiple new Oracle RAC installations across the cluster, then use the cloning procedures that are described in <span class="q">"Cloning Oracle RAC to Nodes in a New Cluster"</span>.
               </p>
               <p>This chapter includes the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="adding-and-deleting-oracle-rac-from-nodes-on-windows-systems.html#GUID-CAB424F6-5C00-4F3E-A250-7B5CBD991FCE" title="You can use either Oracle Enterprise Manager or DBCA to add Oracle RAC database instances to the target nodes.Add instances to nodes on which you have extended an Oracle Clusterware home and an Oracle Database home.">Adding Oracle RAC to Nodes with Oracle Clusterware Installed</a></p>
                  </li>
                  <li>
                     <p><a href="adding-and-deleting-oracle-rac-from-nodes-on-windows-systems.html#GUID-7CCBB478-056F-4701-864F-2B18D5748E61" title="The procedures for deleting instances are different for policy-managed and administrator-managed databases.This procedure removes the Oracle RAC software from the node you are deleting from the cluster and updates inventories on the remaining nodes.">Deleting Oracle RAC from a Cluster Node</a></p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-75C6891F-ECDC-4D78-9176-EB7E7080FBCB__GUID-643E2595-5C87-4E7E-8836-F1119767E90C">
                  <p class="notep1">Note:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Ensure that you have a current backup of Oracle Cluster Registry (OCR) before adding or deleting Oracle RAC by running the <code class="codeph">ocrconfig -showbackup</code> command.
                        </p>
                     </li>
                     <li>
                        <p>For all of the add node and delete node procedures, temporary directories such as <code class="codeph">%TEMP%</code> or <code class="codeph">C:\Temp</code> <span class="italic">should not be</span> shared directories. If your temporary directories are shared, then set your temporary environment variable, such as <code class="codeph">%TEMP%</code>, to a location on a local node. In addition, use a directory path that exists on all of the nodes.
                        </p>
                     </li>
                  </ul>
               </div>
            </div>
            <div>
               <div class="relinfo">
                  <p><strong>Related Topics</strong></p>
                  <ul>
                     <li><a href="cloning-oracle-rac-to-nodes-in-a-new-cluster.html#GUID-8444F1C2-5F67-46B4-ABDE-18D3AFF42D55" title="This chapter describes how to clone Oracle Real Application Clusters (Oracle RAC) database homes on Linux and UNIX systems to nodes in a new cluster.">Cloning Oracle RAC to Nodes in a New Cluster</a></li>
                  </ul>
               </div>
            </div><a id="RACAD8196"></a><div class="sect2"><a id="GUID-CAB424F6-5C00-4F3E-A250-7B5CBD991FCE" name="GUID-CAB424F6-5C00-4F3E-A250-7B5CBD991FCE"></a><h3 id="RACAD-GUID-CAB424F6-5C00-4F3E-A250-7B5CBD991FCE" class="sect3">Adding Oracle RAC to Nodes with Oracle Clusterware Installed</h3>
               <div>
                  <p>Before beginning this procedure, ensure that your existing nodes have the correct path to the <code class="codeph"><span class="variable" translate="no">Grid_home</span></code> and that the <code class="codeph"><span class="variable" translate="no">Oracle_home</span></code> environment variables are set correctly.
                  </p>
                  <p>To add Oracle RAC database instances to nodes that already have Oracle Clusterware installed, you must extend the Oracle RAC home that is on an existing node (<code class="codeph">node1</code> in this procedure) of the cluster to the target nodes.
                  </p>
                  <ol>
                     <li>
                        <p>Navigate to the <code class="codeph"><span class="variable" translate="no">Oracle_home</span>\addnode</code> directory on <code class="codeph">node1</code> and run the <code class="codeph">addnode.bat</code> script using the following syntax, where <code class="codeph">node2</code> is the name of the node you are adding:
                        </p><pre class="pre codeblock"><code>addnode.bat "CLUSTER_NEW_NODES={node2}"</code></pre><p>To run this command in silent mode:</p><pre class="pre codeblock"><code>addNode.bat -silent "CLUSTER_NEW_NODES={node2}"</code></pre><p>For the Oracle home directory you use, if an Oracle home user was specified when the Oracle Database software was installed, then OUI requires the password for the Oracle home user. OUI checks the wallet (stored in the OCR) for the user and extracts the password from there. If the user information is not contained in the wallet, then the <code class="codeph">addnode.bat</code> script generates an error unless you specify the <code class="codeph">-promptPasswd</code> flag on the command line.
                        </p>
                     </li>
                     <li>
                        <p>If you store your policy-managed database on Oracle Automatic Storage Management (Oracle ASM), <a href="glossary.html#GUID-58E0F312-5CEC-4A57-AD7B-1058EFC3B213"><span class="xrefglossterm">Oracle Managed Files</span></a> is enabled, and if there is space in a server pool for <code class="codeph">node2</code>, then <code class="codeph">crsd</code> adds the Oracle RAC database instance to <code class="codeph">node2</code> and no further action is necessary. If Oracle Managed Files is not enabled, then you must manually add undo and redo logs.
                        </p>
                        <p>If there is no space in a server pool, then <code class="codeph">node2</code> moves into the Free server pool. Use the <code class="codeph">srvctl modify srvpool</code> command to increase the cardinality of the server pool to accommodate <code class="codeph">node2</code>, after which time <code class="codeph">node2</code> moves out of the Free server pool and into the modified server pool, and <code class="codeph">crsd</code> adds the Oracle RAC database instance to <code class="codeph">node2</code>.
                        </p>
                     </li>
                     <li>
                        <p>If you have an administrator-managed database, then add a new instance on <code class="codeph">node2</code></p>
                     </li>
                  </ol>
                  <p>If you have a shared Oracle home that is shared using Oracle Automatic Storage Management Cluster File System (Oracle ACFS), then do the following to extend the Oracle database home to <code class="codeph">node2</code>:
                  </p>
                  <ol>
                     <li>
                        <p>Start the Oracle ACFS resource on the new node by running the following command as <code class="codeph">root</code> from the <code class="codeph"><span class="variable" translate="no">Grid_home</span>\bin</code> directory:
                        </p><pre class="pre codeblock"><code>$ srvctl start filesystem -device <span class="variable" translate="no">volume_device_name</span> [-node <span class="variable" translate="no">node_name</span>]</code></pre><div class="infoboxnote" id="GUID-CAB424F6-5C00-4F3E-A250-7B5CBD991FCE__GUID-C1C5E1B8-0C7A-480C-9387-76C85AB5CBDD">
                           <p class="notep1">Note:</p>
                           <p>Make sure the Oracle ACFS resources, including Oracle ACFS registry resource and Oracle ACFS file system resource where the Oracle home is located, are online on the newly added node.</p>
                        </div>
                     </li>
                     <li>
                        <p>Run the following command as the user that installed Oracle RAC from the <code class="codeph"><span class="variable" translate="no">Oracle_home</span>\oui\bin</code> directory on the node you are adding to add the Oracle RAC database home:
                        </p><pre class="pre codeblock"><code>setup.exe -attachHome ORACLE_HOME="ORACLE_HOME" LOCAL_NODE="node2"
  ORACLE_HOME_NAME="<span class="variable" translate="no">home_name</span>" -cfs</code></pre></li>
                     <li>
                        <p>Navigate to the <code class="codeph"><span class="variable" translate="no">Oracle_home</span>\addnode</code> directory on <code class="codeph">node1</code> and run the <code class="codeph">addnode.bat</code> script as the user that installed Oracle RAC using the following syntax:
                        </p><pre class="pre codeblock"><code>addnode.bat -noCopy "CLUSTER_NEW_NODES={node2}"</code></pre><div class="infoboxnote" id="GUID-CAB424F6-5C00-4F3E-A250-7B5CBD991FCE__GUID-667CB644-9F0F-43E6-8816-6DCADFB417A0">
                           <p class="notep1">Note:</p>
                           <p>Use the <code class="codeph">-noCopy</code> option because the Oracle home on the destination node is already fully populated with software.
                           </p>
                        </div>
                     </li>
                  </ol>
                  <p>If you have a shared Oracle home on a shared file system that <span class="italic">is not</span> Oracle ACFS, then you must first create a mount point for the Oracle RAC database home on the target node, mount and attach the Oracle RAC database home, and update the Oracle Inventory, as follows:
                  </p>
                  <ol>
                     <li>
                        <p>Run the <code class="codeph">srvctl config database -db <span class="variable" translate="no">db_name</span></code> command on an existing node in the cluster to obtain the mount point information.
                        </p>
                     </li>
                     <li>
                        <p>Mount the file system that hosts the Oracle RAC database home.</p>
                     </li>
                     <li>
                        <p>Run the following command as the user that installed Oracle RAC from the <code class="codeph"><span class="variable" translate="no">Oracle_home</span>\oui\bin</code> directory on the node you are adding to add the Oracle RAC database home:
                        </p><pre class="pre codeblock"><code>setup.exe -attachHome ORACLE_HOME="ORACLE_HOME" "CLUSTER_NODES=
  <span class="variable" translate="no">local_node_name</span>}" LOCAL_NODE="<span class="variable" translate="no">node_name</span>" ORACLE_HOME_NAME="<span class="variable" translate="no">home_name</span>"</code></pre></li>
                     <li>
                        <p>Update the Oracle Inventory as the user that installed Oracle RAC, as follows:</p><pre class="pre codeblock"><code>setup.exe -updateNodeList ORACLE_HOME=<span class="variable" translate="no">mount_point_path</span> "CLUSTER_NODES={<span class="variable" translate="no">node_list</span>}"</code></pre><p>In the preceding command, <code class="codeph"><span class="variable" translate="no">node_list</span></code> refers to a list of all nodes where the Oracle RAC database home is installed, including the node you are adding.
                        </p>
                     </li>
                  </ol>
                  <div class="infoboxnote" id="GUID-CAB424F6-5C00-4F3E-A250-7B5CBD991FCE__GUID-6BEE8574-C7E7-418A-9315-4CFADE640AAE">
                     <p class="notep1">Note:</p>
                     <p>Oracle recommends that you back up your voting disk and Oracle Cluster Registry (OCR) files after you complete the node addition process.</p>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="../cwadd/adding-and-deleting-cluster-nodes.html#CWADD-GUID-929C0CD9-9B67-45D6-B864-5ED3B47FE458" target="_blank"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a></li>
                        <li><a href="adding-and-deleting-oracle-rac-from-nodes-on-windows-systems.html#GUID-53F37237-C0D8-4EEF-B845-EDFD56B9715A" title="You can use either Oracle Enterprise Manager or DBCA to add Oracle RAC database instances to the target nodes.">Adding Administrator-Managed Oracle RAC Database Instances to Target Nodes</a></li>
                     </ul>
                  </div>
               </div><a id="RACAD8197"></a><div class="sect3"><a id="GUID-53F37237-C0D8-4EEF-B845-EDFD56B9715A" name="GUID-53F37237-C0D8-4EEF-B845-EDFD56B9715A"></a><h4 id="RACAD-GUID-53F37237-C0D8-4EEF-B845-EDFD56B9715A" class="sect4">Adding Administrator-Managed Oracle RAC Database Instances to Target Nodes</h4>
                  <div>
                     <p>You can use either Oracle Enterprise Manager or DBCA to add Oracle RAC database instances to the target nodes.</p>
                     <p>This section describes using DBCA to add Oracle RAC database instances.</p>
                     <p>These tools guide you through the following tasks:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Creating a new database instance on each target node</p>
                        </li>
                        <li>
                           <p>Creating and configuring high availability components</p>
                        </li>
                        <li>
                           <p>Creating the Oracle Net configuration for a non-default listener from the Oracle home</p>
                        </li>
                        <li>
                           <p>Starting the new instance</p>
                        </li>
                        <li>
                           <p>Creating and starting services if you entered services information on the Services Configuration page</p>
                        </li>
                     </ul>
                     <p>After adding the instances to the target nodes, you should perform any necessary service configuration procedures.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="workload-management-with-dynamic-database-services.html#GUID-8DC4D5E0-CA9D-47BC-BAD0-8769405AFEC5" title="Workload management includes load balancing, enabling clients for Oracle Real Application Clusters (Oracle RAC), distributed transaction processing, and services.">Workload Management with Dynamic Database Services</a></li>
                        </ul>
                     </div>
                  </div><a id="RACAD8198"></a><div class="sect4"><a id="GUID-1C12BA84-EE2C-4AAC-BFB1-BF95E1DAFA89" name="GUID-1C12BA84-EE2C-4AAC-BFB1-BF95E1DAFA89"></a><h5 id="RACAD-GUID-1C12BA84-EE2C-4AAC-BFB1-BF95E1DAFA89" class="sect5">Using DBCA in Interactive Mode to Add Database Instances to Target Nodes</h5>
                     <div>
                        <p>To add a database instance to a target node using DBCA in interactive mode, perform the following steps:</p>
                        <ol>
                           <li>
                              <p>Ensure that your existing nodes have the Oracle home environment variable set correctly.</p>
                           </li>
                           <li>
                              <p>Start DBCA by entering <code class="codeph">dbca</code> at the system prompt from the <code class="codeph"><span class="variable" translate="no">Oracle_home</span>\bin</code> directory on an existing node.
                              </p>
                              <p>DBCA performs certain CVU checks while running. However, you can also run CVU from the command line to perform various verifications.</p>
                           </li>
                           <li>
                              <p>On the Database Operations page, select <span class="bold">Instance Management</span>, click <span class="bold">Next</span>, and DBCA displays the Instance Management page.
                              </p>
                           </li>
                           <li>
                              <p>Select <span class="bold">Add Instance</span> and click <span class="bold">Next</span>. DBCA displays the List of Cluster Databases page that shows the databases and their current status, such as <code class="codeph">ACTIVE</code> or <code class="codeph">INACTIVE</code>. 
                              </p>
                           </li>
                           <li>
                              <p>From the List of Cluster Databases page, select the active Oracle RAC database to which you want to add an instance. Click <span class="bold">Next</span> and DBCA displays the List of Cluster Database Instances page showing the names of the existing instances for the Oracle RAC database that you selected.
                              </p>
                           </li>
                           <li>
                              <p>Click <span class="bold">Next </span>to add a new instance and DBCA displays the Adding an Instance page. 
                              </p>
                           </li>
                           <li>
                              <p>On the Adding an Instance page, enter the instance name in the field at the top of this page if the instance name that DBCA provides does not match your existing instance naming scheme. Then select the new node name from the list.</p>
                              <div class="infoboxnote" id="GUID-1C12BA84-EE2C-4AAC-BFB1-BF95E1DAFA89__GUID-0D51062E-7F92-4A2B-8CD8-F536B367542A">
                                 <p class="notep1">Note:</p>
                                 <p>If you installed the Oracle home with the Oracle Home User option, then DBCA prompts you for that password on this page.</p>
                              </div>
                           </li>
                           <li>
                              <p>Review the information on the Summary Page and click <span class="bold">Finish</span> to initiate instance addition operation. DBCA displays a progress dialog showing DBCA performing the instance addition operation.
                              </p>
                           </li>
                        </ol>
                        <div class="section">
                           <p class="subhead3" id="GUID-1C12BA84-EE2C-4AAC-BFB1-BF95E1DAFA89__GUID-140BF194-2F16-4B17-8B6A-BC02E8AC1B7D">Creating the OraMTS Service for Microsoft Transaction Server</p>
                        </div>
                        <!-- class="section" -->
                        <p>Oracle Services for Microsoft Transaction Server (OraMTS) permit Oracle databases to be used as resource managers in Microsoft application-coordinated transactions. OraMTS acts as a proxy for the Oracle database to the Microsoft Distributed Transaction Coordinator (MSDTC). As a result, OraMTS provides client-side connection pooling and allows client components that leverage Oracle to participate in promotable and distributed transactions. In addition, OraMTS can operate with Oracle databases running on any operating system, given that the services themselves are run on Windows.</p>
                        <p>On releases earlier than Oracle Database 12<span class="italic">c</span>, the OraMTS service was created as part of a software-only installation. Starting with Oracle Database 12<span class="italic">c</span>, you must use a configuration tool to create this service.
                        </p>
                        <p>Create the OraMTS service after adding a node or performing a software-only installation for Oracle RAC, as follows:</p>
                        <ol>
                           <li>
                              <p>Open a command window.</p>
                           </li>
                           <li>
                              <p>Change directories to <code class="codeph">%ORACLE_HOME%\bin</code>.
                              </p>
                           </li>
                           <li>
                              <p>Run the OraMTSCtl utility to create the OraMTS Service, where <code class="codeph"><span class="variable" translate="no">host_name</span></code> is a list of nodes on which the service should be created:
                              </p><pre class="pre codeblock"><code>C:\..bin&gt; oramtsctl.exe -new -host <span class="variable" translate="no">host_name</span></code></pre></li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="../cwadd/cluster-verification-utility-reference.html#CWADD-GUID-B88DC0CC-851A-4821-AB02-539D994ED524" target="_blank"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a></li>
                              <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/racad&amp;id=NTMTS-GUID-DB70DB58-370C-4B98-A559-C5CA94415085" target="_blank"><span><cite>Oracle Services for Microsoft Transaction Server Developer's Guide for Microsoft Windows</cite></span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="RACAD8199"></a><div class="sect4"><a id="GUID-62FFDCB0-7F32-4C95-BBAE-C58B16CB5D13" name="GUID-62FFDCB0-7F32-4C95-BBAE-C58B16CB5D13"></a><h5 id="RACAD-GUID-62FFDCB0-7F32-4C95-BBAE-C58B16CB5D13" class="sect5">Using DBCA in Silent Mode to Add Database Instances to Target Nodes</h5>
                     <div>
                        <p>Add instances to nodes on which you have extended an Oracle Clusterware home and an Oracle Database home.</p>
                        <p>Use DBCA in silent mode with the following syntax:</p><pre class="pre codeblock"><code>dbca -silent -addInstance -nodeList <span class="variable" translate="no">node_name</span> -gdbName <span class="variable" translate="no">gdb_name</span>
[-instanceName <span class="variable" translate="no">instance_name</span> -sysDBAUserName <span class="variable" translate="no">sysdba</span> -sysDBAPassword <span class="variable" translate="no">password</span>]</code></pre><div class="infoboxnotealso" id="GUID-62FFDCB0-7F32-4C95-BBAE-C58B16CB5D13__GUID-FD13EC83-4FE7-42AC-A3EC-FAA28AB28697">
                           <p class="notep1">See Also:</p>
                           <p><a href="adding-and-deleting-oracle-rac-from-nodes-on-linux-and-unix-systems.html#GUID-C331D2B4-FAAF-4916-A5A1-4577D31ADD04__CEGGDIGA" title="Describes the variables you use in DBCA syntax for silent mode. The variables are the same whether you are adding or deleting a node from the cluster.">Table 11-1</a> for definitions of the variables used in the preceding syntax
                           </p>
                        </div>
                        <p>Perform any necessary service configuration procedures.</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="workload-management-with-dynamic-database-services.html#GUID-8DC4D5E0-CA9D-47BC-BAD0-8769405AFEC5" title="Workload management includes load balancing, enabling clients for Oracle Real Application Clusters (Oracle RAC), distributed transaction processing, and services.">Workload Management with Dynamic Database Services</a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="RACAD8200"></a><div class="sect2"><a id="GUID-7CCBB478-056F-4701-864F-2B18D5748E61" name="GUID-7CCBB478-056F-4701-864F-2B18D5748E61"></a><h3 id="RACAD-GUID-7CCBB478-056F-4701-864F-2B18D5748E61" class="sect3">Deleting Oracle RAC from a Cluster Node</h3>
               <div>
                  <p>To remove Oracle RAC from a cluster node, you must delete the database instance and the Oracle RAC software before removing the node from the cluster.</p>
                  <div class="infoboxnote" id="GUID-7CCBB478-056F-4701-864F-2B18D5748E61__GUID-41A6475A-1622-40EB-B774-5F6E91585C62">
                     <p class="notep1">Note:</p>
                     <p>If there are no database instances on the node you want to delete, then remove Oracle RAC.</p>
                  </div>
                  <p>This section includes the following procedures to delete nodes from clusters in an Oracle RAC environment:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="adding-and-deleting-oracle-rac-from-nodes-on-windows-systems.html#GUID-F21B797B-A909-46FC-9280-E782920C9A94" title="The procedures for deleting instances are different for policy-managed and administrator-managed databases.">Deleting Instances from Oracle RAC Databases</a></p>
                     </li>
                     <li>
                        <p><a href="adding-and-deleting-oracle-rac-from-nodes-on-windows-systems.html#GUID-71EBEFA1-F52D-4A54-AF0C-F596A4909A25" title="This procedure removes the Oracle RAC software from the node you are deleting from the cluster and updates inventories on the remaining nodes.">Removing Oracle RAC</a></p>
                     </li>
                     <li>
                        <p><a href="adding-and-deleting-oracle-rac-from-nodes-on-windows-systems.html#GUID-D1F774B6-56ED-451E-AA36-9BFF8C74D1CD">Deleting Nodes from the Cluster</a></p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="adding-and-deleting-oracle-rac-from-nodes-on-windows-systems.html#GUID-71EBEFA1-F52D-4A54-AF0C-F596A4909A25" title="This procedure removes the Oracle RAC software from the node you are deleting from the cluster and updates inventories on the remaining nodes.">Removing Oracle RAC</a></li>
                     </ul>
                  </div>
               </div><a id="RACAD8202"></a><a id="RACAD8203"></a><a id="RACAD8201"></a><div class="sect3"><a id="GUID-F21B797B-A909-46FC-9280-E782920C9A94" name="GUID-F21B797B-A909-46FC-9280-E782920C9A94"></a><h4 id="RACAD-GUID-F21B797B-A909-46FC-9280-E782920C9A94" class="sect4">Deleting Instances from Oracle RAC Databases</h4>
                  <div>
                     <p>The procedures for deleting instances are different for policy-managed and administrator-managed databases.</p>
                     <p>Deleting a policy-managed database instance involves reducing the size of the server pool in which the database instance resides. Deleting an administrator-managed database instance involves using DBCA to delete the database instance.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-F21B797B-A909-46FC-9280-E782920C9A94__GUID-F5266167-DF4B-46B7-9849-B0AFEFA97194">Deleting Policy-Managed Databases</p>
                        <p>To delete a policy-managed database, decrease the size of the server pool in which a database instance resides. This effectively removes the instance without having to remove the Oracle RAC software from the node or the node from the cluster.</p>
                        <p>For example, you can delete a policy-managed database by running the following commands on any node in the cluster:</p><pre class="pre codeblock"><code>$ srvctl stop instance -db db_unique_name -node <span class="variable" translate="no">node_name</span>
$ srvctl relocate server -servers "<span class="variable" translate="no">server_name_list</span>" -serverpool Free</code></pre><p>The first command stops on the instance on a particular node and the second command moves the list of servers out of their current server pool and into the Free server pool.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F21B797B-A909-46FC-9280-E782920C9A94__GUID-CFACB469-099F-4A72-8395-E30177AB464A">Deleting Instances from Administrator-Managed Databases</p>
                        <div class="infoboxnote" id="GUID-F21B797B-A909-46FC-9280-E782920C9A94__GUID-45F618F8-6F95-46C6-B004-38F3C7E9B2B1">
                           <p class="notep1">Note:</p>
                           <p>Before deleting an instance from an Oracle RAC database using SRVCTL, do the following:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>If you have services configured, then relocate the services</p>
                              </li>
                              <li>
                                 <p>Modify the services so that each service can run on one of the remaining instances</p>
                              </li>
                              <li>
                                 <p>Ensure that the instance to be removed from an administrator-managed database is neither a preferred nor an available instance of any service</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="adding-and-deleting-oracle-rac-from-nodes-on-windows-systems.html#GUID-71EBEFA1-F52D-4A54-AF0C-F596A4909A25" title="This procedure removes the Oracle RAC software from the node you are deleting from the cluster and updates inventories on the remaining nodes.">Removing Oracle RAC</a></li>
                           <li><a href="workload-management-with-dynamic-database-services.html#GUID-CB82980F-8894-4142-8026-973895E03634" title="When you create a service using SRVCTL, you must start the service with a separate SRVCTL command.">Administering Services with SRVCTL</a></li>
                        </ul>
                     </div>
                  </div><a id="RACAD7384"></a><div class="sect4"><a id="GUID-478D2267-281E-40F6-8CA9-6591FD516337" name="GUID-478D2267-281E-40F6-8CA9-6591FD516337"></a><h5 id="RACAD-GUID-478D2267-281E-40F6-8CA9-6591FD516337" class="sect5">Using DBCA in Interactive Mode to Delete Instances from Nodes</h5>
                     <div>
                        <p><a id="d41099e1784" class="indexterm-anchor"></a>To delete an instance using DBCA in interactive mode, perform the following steps: 
                        </p>
                        <ol>
                           <li>
                              <p>Verify there is a current backup of OCR.</p>
                              <p>Run the <code class="codeph">ocrconfig -showbackup</code> command to ensure there is a valid backup.
                              </p>
                           </li>
                           <li>
                              <p>Start DBCA.</p>
                              <p>Start DBCA on a node <span class="italic">other than</span> the node that hosts the instance that you want to delete. The database and the instance that you plan to delete should continue to be started and running during this step.
                              </p>
                           </li>
                           <li>
                              <p>On the DBCA Operations page, select <span class="bold">Instance Management</span>, click <span class="bold">Next</span>, and DBCA displays the Instance Management page. 
                              </p>
                           </li>
                           <li>
                              <p>On the Instance Management page, select <span class="bold">Delete Instance</span>, click <span class="bold">Next</span>, and DBCA displays the List of Cluster Databases page.
                              </p>
                           </li>
                           <li>
                              <p>Select an Oracle RAC database from which to delete an instance. Click <span class="bold">Next</span> and DBCA displays the List of Cluster Database Instances page. The List of Cluster Database Instances page shows the instances that are associated with the Oracle RAC database that you selected and the status of each instance.
                              </p>
                           </li>
                           <li>
                              <p>On the List of Cluster Databases page, select the Oracle RAC database from which to delete the instance, as follows:</p>
                              <ol type="a">
                                 <li>
                                    <p>On the List of Cluster Database Instances page, DBCA displays the instances that are associated with the Oracle RAC database that you selected and the status of each instance. Select the cluster database from which you will delete the instance. Click <span class="bold">Finish</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Click <span class="bold">OK</span> on the Confirmation dialog to proceed to delete the instance.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Click <span class="bold">OK</span> on the next Confirmation dialog to delete the instance and related Optimal Flexible Architecture (OFA) directory structure.
                                    </p>
                                    <p>DBCA displays a progress dialog showing that DBCA is deleting the instance. During this operation, DBCA removes the instance and the instance's Oracle Net configuration.</p>
                                    <p>Click <span class="bold">No</span> and exit DBCA or click <span class="bold">Yes</span> to perform another operation. If you click <span class="bold">Yes</span>, then DBCA displays the Operations page.
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>Verify that the dropped instance's redo thread has been removed using SQL*Plus to query the <code class="codeph">V$LOG</code> view from an existing instance. If the redo thread is not disabled, then disable the thread. For example:
                              </p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE DISABLE THREAD 2;
</pre></li>
                           <li>
                              <p>Verify that the instance has been removed from OCR by running the following command, where <span class="italic"><code class="codeph">db_unique_name</code></span> is the name of the database:
                              </p><pre class="oac_no_warn" dir="ltr">srvctl config database -db <span class="italic">db_unique_name</span>
</pre></li>
                           <li>
                              <p>If you are deleting more than one node, then repeat these steps to delete the instances from all the nodes that you are going to delete.</p>
                           </li>
                        </ol>
                     </div>
                  </div><a id="RACAD8204"></a><div class="sect4"><a id="GUID-DF0EE0C1-8B11-420E-B96A-1B38CFBB6F82" name="GUID-DF0EE0C1-8B11-420E-B96A-1B38CFBB6F82"></a><h5 id="RACAD-GUID-DF0EE0C1-8B11-420E-B96A-1B38CFBB6F82" class="sect5">Using DBCA in Silent Mode to Delete Instances from Nodes</h5>
                     <div>
                        <p><a id="d41099e2031" class="indexterm-anchor"></a>You can use DBCA in silent mode to delete a database instance from a node.
                        </p>
                        <p>Run the following command, where the variables are the same as those shown in <a href="adding-and-deleting-oracle-rac-from-nodes-on-linux-and-unix-systems.html#GUID-C331D2B4-FAAF-4916-A5A1-4577D31ADD04__CEGGDIGA" title="Describes the variables you use in DBCA syntax for silent mode. The variables are the same whether you are adding or deleting a node from the cluster.">Table 11-1</a> for the DBCA command to add an instance. Provide a node name only if you are deleting an instance from a node other than the one on where DBCA is running as shown in the following example where <span class="italic"><code class="codeph">password</code></span> is the SYSDBA password:
                        </p><pre class="oac_no_warn" dir="ltr">dbca -silent -deleteInstance [-nodeList <span class="italic">node_name</span>] -gdbName <span class="italic">gdb_name</span>
-instanceName <span class="italic">instance_name</span> [-sysDBAUserName <span class="italic">sysdba</span>] [-sysDBAPassword <span class="italic">password</span>]
</pre><p>At this point, you have accomplished the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Deregistered the selected instance from its associated Oracle Net Services listeners</p>
                           </li>
                           <li>
                              <p>Deleted the selected database instance from the instance's configured node</p>
                           </li>
                           <li>
                              <p>Removed the Oracle Net configuration</p>
                           </li>
                           <li>
                              <p>Deleted the Oracle Flexible Architecture directory structure from the instance's configured node. </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="RACAD8205"></a><div class="sect3"><a id="GUID-71EBEFA1-F52D-4A54-AF0C-F596A4909A25" name="GUID-71EBEFA1-F52D-4A54-AF0C-F596A4909A25"></a><h4 id="RACAD-GUID-71EBEFA1-F52D-4A54-AF0C-F596A4909A25" class="sect4">Removing Oracle RAC</h4>
                  <div>
                     <p>This procedure removes the Oracle RAC software from the node you are deleting from the cluster and updates inventories on the remaining nodes.</p>
                     <ol>
                        <li>
                           <p>If there is a listener in the Oracle RAC home on the node you are deleting, then you must disable and stop it before deleting the Oracle RAC software. Run the following commands on any node in the cluster, specifying the name of the listener and the name of the node you are deleting:</p><pre class="pre codeblock"><code>C:\srvctl disable listener -listener <span class="variable" translate="no">listener_name</span> -node <span class="variable" translate="no">name_of_node_to_delete</span>
C:\srvctl stop listener -listener <span class="variable" translate="no">listener_name</span> -node <span class="variable" translate="no">name_of_node_to_delete</span></code></pre></li>
                        <li>
                           <p>Deinstall the Oracle home from the node that you are deleting by running the following command from the <code class="codeph"><span class="variable" translate="no">Oracle_home\</span>deinstall</code> directory:
                           </p><pre class="pre codeblock"><code>deinstall -local</code></pre></li>
                     </ol>
                     <p>If you have a shared Oracle RAC home, then append the <code class="codeph">-cfs</code> option to the command example in this step and provide a complete path location for the cluster file system.
                     </p>
                  </div>
               </div><a id="RACAD8206"></a><div class="sect3"><a id="GUID-D1F774B6-56ED-451E-AA36-9BFF8C74D1CD" name="GUID-D1F774B6-56ED-451E-AA36-9BFF8C74D1CD"></a><h4 id="RACAD-GUID-D1F774B6-56ED-451E-AA36-9BFF8C74D1CD" class="sect4">Deleting Nodes from the Cluster</h4>
                  <div>
                     <p>After you delete the instance, you can begin the process of deleting the node from the cluster. You accomplish this by running scripts on the node you want to delete to remove the Oracle Clusterware installation and you run scripts on the remaining nodes to update the node list.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../cwadd/adding-and-deleting-cluster-nodes.html#CWADD-GUID-8ADA9667-EC27-4EF9-9F34-C8F65A757F2A" target="_blank"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
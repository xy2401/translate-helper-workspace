<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Troubleshooting Oracle RAC</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Real Application Clusters Administration and Deployment Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Real Application Clusters Administration and Deployment Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="real-application-clusters-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-25T14:02:30-07:00">
      <meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide">
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E95728-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="server-control-utility-reference.html" title="Previous" type="text/html">
      <link rel="next" href="glossary.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="RACAD">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="server-control-utility-reference.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="glossary.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Real Application Clusters Administration and Deployment Guide</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Troubleshooting Oracle RAC</li>
            </ol>
            <a id="GUID-F23CDEC1-ECA1-4963-8D31-2E8F0857EE24" name="GUID-F23CDEC1-ECA1-4963-8D31-2E8F0857EE24"></a><a id="RACAD025"></a>
            
            <h2 id="RACAD-GUID-F23CDEC1-ECA1-4963-8D31-2E8F0857EE24" class="sect2"><span class="enumeration_appendix">B </span>Troubleshooting Oracle RAC
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This appendix explains how <a id="d101556e139" class="indexterm-anchor"></a><a id="d101556e143" class="indexterm-anchor"></a>diagnose problems for Oracle Real Application Clusters (Oracle RAC) components using trace and log files. This section includes the following topics: 
               </p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="troubleshooting-oracle-rac.html#GUID-EC8F3486-98CC-4350-B5F8-8BEFB5607EA5">Where to Find Files for Analyzing Errors</a></p>
                  </li>
                  <li>
                     <p><a href="troubleshooting-oracle-rac.html#GUID-89F3158D-8383-4EAF-9B15-95EC9E828462" title="Problems that span Oracle RAC instances can be the most difficult types of problems to diagnose.">Managing Diagnostic Data in Oracle RAC</a></p>
                  </li>
                  <li>
                     <p><a href="troubleshooting-oracle-rac.html#GUID-6E1B17DD-C6B0-4B2B-96CF-F0FF35FA5544">Using Instance-Specific Alert Files in Oracle RAC</a></p>
                  </li>
                  <li>
                     <p><a href="troubleshooting-oracle-rac.html#GUID-1FDCAB67-46C2-4F21-A1EA-B833C624A6EF" title="All Java-based tools and utilities that are available in Oracle RAC are called by executing scripts of the same name as the tool or utility.">Enabling Tracing for Java-Based Tools and Utilities in Oracle RAC</a></p>
                  </li>
                  <li>
                     <p><a href="troubleshooting-oracle-rac.html#GUID-564C9A02-A143-4537-BCAA-E0CCB7D4A55F">Resolving Pending Shutdown Issues</a></p>
                  </li>
                  <li>
                     <p><a href="troubleshooting-oracle-rac.html#GUID-A66CDC09-8AB1-4022-80FC-F7A618C8B4ED">How to Determine If Oracle RAC Instances Are Using the Private Network</a></p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-F23CDEC1-ECA1-4963-8D31-2E8F0857EE24__GUID-58DE7D0D-4DCC-45A6-B51C-A5D7F8D7DF49">
                  <p class="notep1">Note:</p>
                  <p>Trace and log files, similar to those generated for Oracle Database with Oracle RAC, are also available for the Oracle Clusterware components. For Oracle Clusterware, Oracle Database stores these under a unified directory log structure.</p>
                  <p>See the <a href="../cwadd/troubleshooting-oracle-clusterware.html#CWADD025" target="_blank"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for more information about troubleshooting Oracle Clusterware.
                  </p>
               </div>
            </div><a id="RACAD512"></a><div class="sect2"><a id="GUID-EC8F3486-98CC-4350-B5F8-8BEFB5607EA5" name="GUID-EC8F3486-98CC-4350-B5F8-8BEFB5607EA5"></a><h3 id="RACAD-GUID-EC8F3486-98CC-4350-B5F8-8BEFB5607EA5" class="sect3">Where to Find Files for Analyzing Errors</h3>
               <div>
                  <p>Oracle Database records information about important events that occur in your Oracle RAC environment in trace files. The trace files for Oracle RAC are the same as those in noncluster Oracle databases. As a best practice, monitor and back up trace files regularly for all instances to preserve their content for future troubleshooting.</p>
                  <p>Information about <code class="codeph">ORA-600</code> errors appear in the <code class="codeph">alert_<span class="variable" translate="no">SID</span>.log</code> file for each instance where <code class="codeph"><span class="variable" translate="no">SID</span></code> is the instance identifier.
                  </p>
                  <p>The alert log and all trace files for background and server processes are written to the Automatic Diagnostic Repository, the location of which you can specify with the <code class="codeph">DIAGNOSTIC_DEST</code> initialization parameter. For example:
                  </p><pre class="pre codeblock"><code>$ORACLE_BASE/diag/rdbms/$DBNAME/$SID_NAME/trace</code></pre><p>Oracle Database creates a different trace file for each background thread. Oracle RAC background threads use trace files to record database operations and database errors. These trace logs help troubleshoot and also enable Oracle Support to more efficiently debug <a href="glossary.html#GUID-5D32446E-2961-496F-BDE1-FE5E9C119DA0"><span class="xrefglossterm">cluster database</span></a> configuration problems. The names of trace files are operating system specific, but each file usually includes the name of the process writing the file (such as LGWR and RECO). For Linux, UNIX, and Windows systems, trace files for the background processes are named <code class="codeph">SID_<span class="variable" translate="no">process_name</span>_<span class="variable" translate="no">process_identifier</span>.trc</code>.
                  </p>
                  <div class="infoboxnotealso" id="GUID-EC8F3486-98CC-4350-B5F8-8BEFB5607EA5__GUID-15373B3F-E342-4558-ABDA-0D3BE969B154">
                     <p class="notep1">See Also:</p>
                     <p><a href="../admin/monitoring-the-database.html#ADMIN005" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about monitoring errors and alerts in trace files
                     </p>
                  </div>
                  <p>Trace files are also created for user processes if you set the <code class="codeph">DIAGNOSTIC_DEST</code> initialization parameter. User process trace file names have the format <code class="codeph"><span class="variable" translate="no">SID</span>_ora_<span class="variable" translate="no">process_identifier</span>/<span class="variable" translate="no">thread_identifier</span>.trc</code>, where <code class="codeph"><span class="variable" translate="no">process_identifier</span></code> is a 5-digit number indicating the process identifier (PID) on Linux and UNIX systems, and <code class="codeph"><span class="variable" translate="no">thread_identifier</span></code> is the thread identifier on Windows systems.
                  </p>
               </div>
            </div><a id="RACAD7590"></a><div class="sect2"><a id="GUID-89F3158D-8383-4EAF-9B15-95EC9E828462" name="GUID-89F3158D-8383-4EAF-9B15-95EC9E828462"></a><h3 id="RACAD-GUID-89F3158D-8383-4EAF-9B15-95EC9E828462" class="sect3">Managing Diagnostic Data in Oracle RAC</h3>
               <div>
                  <p>Problems that span Oracle RAC instances can be the most difficult types of problems to diagnose.</p>
                  <p>For example, you may need to correlate the trace files from across multiple instances, and merge the trace files. Oracle Database 12<span class="italic">c</span> release 2 (12.2) includes an advanced fault diagnosability infrastructure for collecting and managing diagnostic data, and uses the Automatic Diagnostic Repository (ADR) file-based repository for storing the database diagnostic data. When you create the ADR base on a shared disk, you can place ADR homes for all instances of the same Oracle RAC database under the same ADR Base. With shared storage:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>You can use the ADRCI command-line tool to correlate diagnostics across all instances.</p>
                        <p>ADRCI is a command-line tool that enables you to view diagnostic data in the ADR and package incident and problem information into a zip file for transmission to Oracle Support. The diagnostic data includes incident and problem descriptions, trace files, dumps, health monitor reports, alert log entries, and so on.</p>
                        <div class="infoboxnotealso" id="GUID-89F3158D-8383-4EAF-9B15-95EC9E828462__GUID-6D36F72F-4CD3-40E6-8C12-371A5FE0AC45">
                           <p class="notep1">See Also:</p>
                           <p><a href="../sutil/oracle-adr-command-interpreter-adrci.html#SUTIL700" target="_blank"><span><cite>Oracle Database Utilities</cite></span></a> for information about using ADRCI
                           </p>
                        </div>
                     </li>
                     <li>
                        <p>You can use the Data Recovery Advisor to help diagnose and repair corrupted data blocks, corrupted or missing files, and other data failures.</p>
                        <p>The Data Recovery Advisor is an Oracle Database infrastructure that automatically diagnoses persistent data failures, presents repair options, and repairs problems at your request.</p>
                        <div class="infoboxnotealso" id="GUID-89F3158D-8383-4EAF-9B15-95EC9E828462__GUID-1CDB70F0-A8C1-4FFA-A3C5-C540C52FDB5D">
                           <p class="notep1">See Also:</p>
                           <p><a href="../admin/diagnosing-and-resolving-problems.html#ADMIN11007" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for information about managing diagnostic data
                           </p>
                        </div>
                     </li>
                  </ul>
               </div>
            </div><a id="RACAD527"></a><div class="sect2"><a id="GUID-6E1B17DD-C6B0-4B2B-96CF-F0FF35FA5544" name="GUID-6E1B17DD-C6B0-4B2B-96CF-F0FF35FA5544"></a><h3 id="RACAD-GUID-6E1B17DD-C6B0-4B2B-96CF-F0FF35FA5544" class="sect3">Using Instance-Specific Alert Files in Oracle RAC</h3>
               <div>
                  <p>Each instance in an Oracle RAC database has one alert fil<a id="d101556e761" class="indexterm-anchor"></a><a id="d101556e763" class="indexterm-anchor"></a><a id="d101556e767" class="indexterm-anchor"></a>e. The alert file for each instance, <span class="italic"><code class="codeph">alert.SID.log</code></span>, contains important information about error messages and exceptions that occur during database operations. Information is appended to the alert file each time you start the instance. All process threads can write to the alert file for the instance.
                  </p>
                  <p>The <span class="italic"><code class="codeph">alert_SID</code></span><code class="codeph">.log</code> file is in the directory specified by the <code class="codeph">DIAGNOSTIC_DEST</code> initialization parameter.
                  </p>
               </div>
            </div><a id="RACAD534"></a><div class="sect2"><a id="GUID-1FDCAB67-46C2-4F21-A1EA-B833C624A6EF" name="GUID-1FDCAB67-46C2-4F21-A1EA-B833C624A6EF"></a><h3 id="RACAD-GUID-1FDCAB67-46C2-4F21-A1EA-B833C624A6EF" class="sect3">Enabling Tracing for Java-Based Tools and Utilities in Oracle RAC</h3>
               <div>
                  <p>All Java-based tools and utilities that are available in Oracle RAC are called by executing scripts of the same name as the tool or utility.</p>
                  <p>This includes the Cluster Verification Utility (CVU), Database Configuration Assistant (DBCA), the Net Configuration Assistant (NETCA), and the Server Control Utility (SRVCTL). For example, to run DBCA, enter the command <code class="codeph">dbca</code>.
                  </p>
                  <p>By default, Oracle Database enables traces for DBCA and the Database Upgrade Assistant (DBUA). For the CVU, and SRVCTL, you can set the <code class="codeph">SRVM_TRACE</code> environment variable to <code class="codeph">TRUE</code> to make Oracle Database generate traces. Oracle Database writes traces to log files. For example, Oracle Database writes traces to log files in <code class="codeph"><span class="variable" translate="no">Oracle_base</span>/cfgtoollogs/dbca</code> and <code class="codeph"><span class="variable" translate="no">Oracle_base</span>/cfgtoollogs/dbua</code> for DBCA and DBUA, respectively.
                  </p>
               </div>
            </div><a id="RACAD529"></a><div class="sect2"><a id="GUID-564C9A02-A143-4537-BCAA-E0CCB7D4A55F" name="GUID-564C9A02-A143-4537-BCAA-E0CCB7D4A55F"></a><h3 id="RACAD-GUID-564C9A02-A143-4537-BCAA-E0CCB7D4A55F" class="sect3">Resolving Pending Shutdown Issues</h3>
               <div>
                  <p><a id="d101556e1138" class="indexterm-anchor"></a><a id="d101556e1140" class="indexterm-anchor"></a>In some situations a <code class="codeph">SHUTDOWN IMMEDIATE</code> may be pending and Oracle Database will not quickly respond to repeated shutdown requests. This is because Oracle Clusterware may be processing a current shutdown request. In such cases, issue a <code class="codeph">SHUTDOWN ABORT</code> using SQL*Plus for subsequent shutdown requests.
                  </p>
               </div>
            </div><a id="RACAD7591"></a><div class="sect2"><a id="GUID-A66CDC09-8AB1-4022-80FC-F7A618C8B4ED" name="GUID-A66CDC09-8AB1-4022-80FC-F7A618C8B4ED"></a><h3 id="RACAD-GUID-A66CDC09-8AB1-4022-80FC-F7A618C8B4ED" class="sect3">How to Determine If Oracle RAC Instances Are Using the Private Network</h3>
               <div>
                  <p>This section describes how to manually determine if Oracle RAC instances are using the private network. However, the best practice for this task is to use the Oracle Enterprise Manager Cloud Control graphical user interface (GUI) to check the interconnect. </p>
                  <p><a id="d101556e1306" class="indexterm-anchor"></a><a id="d101556e1308" class="indexterm-anchor"></a><a id="d101556e1310" class="indexterm-anchor"></a><a id="d101556e1312" class="indexterm-anchor"></a>With most network protocols, you can issue the <code class="codeph">oradebug ipc</code> command to see the interconnects that the database is using. For example:
                  </p><pre class="oac_no_warn" dir="ltr">oradebug <span class="variable" translate="no">setmypid</span>
oradebug ipc
</pre><p>These commands dump a trace file to the location specified by the <code class="codeph">DIAGNOSTIC_DEST</code> initialization parameter. The output may look similar to the following:
                  </p><pre class="oac_no_warn" dir="ltr">SSKGXPT 0x1a2932c flags SSKGXPT_READPENDING     info for network 0
        socket no 10    IP 172.16.193.1         UDP 43749
        sflags SSKGXPT_WRITESSKGXPT_UP  info for network 1
        socket no 0     IP 0.0.0.0      UDP 0...
</pre><p>In the example, you can see the database is using IP 172.16.193.1 with a User <a id="d101556e1332" class="indexterm-anchor"></a>Datagram Protocol (UDP) protocol. Also, you can issue the <code class="codeph">oradebug tracefile_name</code> command to print the trace location where the output is written.
                  </p>
                  <p>Additionally, you can query the <code class="codeph">V$CLUSTER_INTERCONNECTS</code> view to see information about the private interconnect. For example:
                  </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM V$CLUSTER_INTERCONNECTS;

NAME  IP_ADDRESS          IS_  SOURCE
----- -------------------------- ---  -------------------------------
eth0  138.2.236.114         NO  Oracle Cluster Repository</pre></div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Disk discovery is the mechanism used to find the operating system names for disks Oracle ASM can access."></meta>
      <meta name="description" content="Disk discovery is the mechanism used to find the operating system names for disks Oracle ASM can access."></meta>
      <title>Oracle ASM磁盘发现</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator&#39;s Guide"></meta>
      <meta property="og:description" content="Disk discovery is the mechanism used to find the operating system names for disks Oracle ASM can access."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="automatic-storage-management-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-23T18:56:15-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96198-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="alter-diskgroups.html" title="Previous" type="text/html"></link>
      <link rel="next" href="capacity-diskgroups.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Automatic Storage Management Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="OSTMG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="alter-diskgroups.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="capacity-diskgroups.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-instance-diskgroup.html" property="item" typeof="WebPage"><span property="name">Oracle ASM实例和磁盘组</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="admin-asm-diskgroups.html" property="item" typeof="WebPage"><span property="name">管理Oracle ASM磁盘组</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle ASM磁盘发现</li>
            </ol>
            <a id="GUID-75533657-85B0-4614-B489-C25DC150CA1D" name="GUID-75533657-85B0-4614-B489-C25DC150CA1D"></a><a id="OSTMG94120"></a>
            
            <h2 id="OSTMG-GUID-75533657-85B0-4614-B489-C25DC150CA1D" class="sect2">Oracle ASM磁盘发现</h2>
         </header>
         <div class="ind">
            <div>
               <p>磁盘发现是用于查找Oracle ASM可以访问的磁盘的操作系统名称的机制。</p>
               <p>此机制查找要装入磁盘组的所有磁盘，管理员要添加到磁盘组的磁盘，或管理员可能考虑添加到磁盘组的磁盘。本节包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="asm-disk-discovery.html#GUID-CD6B3821-FF1A-4882-BF10-97CE138C800D" title="初始化Oracle ASM实例时，Oracle ASM会发现并检查您在ASM_DISKSTRING初始化参数中使用值指定的路径中的所有磁盘的内容。">如何发现磁盘</a></p>
                  </li>
                  <li>
                     <p><a href="asm-disk-discovery.html#GUID-DC9D242F-9ECC-445C-9CDE-67B358B9748B">磁盘发现规则</a></p>
                  </li>
                  <li>
                     <p><a href="asm-disk-discovery.html#GUID-11333D13-0E68-4779-85F5-BF5F6F32434C">改善磁盘发现时间</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-75533657-85B0-4614-B489-C25DC150CA1D__GUID-78702BE0-6652-4652-820E-D6760F012B98">
                  <p class="notep1">也可以看看：</p>
                  <p><a href="init-params-asm-instance.html#GUID-03BD4335-FEF9-4147-B8E4-E63F2D80F863" title="ASM_DISKSTRING初始化参数指定以逗号分隔的字符串列表，这些字符串限制Oracle ASM实例发现的磁盘集。">ASM_DISKSTRING</a>有关磁盘发现和附加信息<code class="codeph">ASM_DISKSTRING</code>初始化参数</p>
               </div>
            </div><a id="OSTMG94122"></a><a id="OSTMG94121"></a><div class="props_rev_3"><a id="GUID-CD6B3821-FF1A-4882-BF10-97CE138C800D" name="GUID-CD6B3821-FF1A-4882-BF10-97CE138C800D"></a><h3 id="OSTMG-GUID-CD6B3821-FF1A-4882-BF10-97CE138C800D" class="sect3">如何发现磁盘</h3>
               <div>
                  <p>初始化Oracle ASM实例时，Oracle ASM会发现并检查您在<code class="codeph">ASM_DISKSTRING</code>初始化参数中使用值指定的路径中的所有磁盘的内容。
                  </p>
                  <p>您执行磁盘发现时：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>运行以下SQL语句</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>使用<code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> <code class="codeph">MOUNT</code>挂载磁盘组</p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code> <code class="codeph">ONLINE</code> <code class="codeph">DISK</code> <code class="codeph">ONLINE</code> <code class="codeph">DISK</code> 
                              </p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">CREATE</code>或<code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code>将磁盘添加到磁盘组...<code class="codeph">ADD</code> <code class="codeph">DISK</code></p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">ALTER</code> <code class="codeph">DISKGROUP</code>调整磁盘组中的磁盘<code class="codeph">DISKGROUP</code> ...<code class="codeph">RESIZE</code> <code class="codeph">DISK</code> 
                              </p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">SELECT</code> <code class="codeph">FROM</code> <code class="codeph">V$ASM_DISKGROUP</code>或<code class="codeph">V$ASM_DISK</code>视图进行查询</p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>运行Oracle ASM Configuration Assistant（ASMCA）操作或ASMCMD命令，这些命令执行与先前列出的SQL语句相同的操作</p>
                     </li>
                  </ul>
                  <p>Oracle ASM成功发现磁盘后，磁盘将显示在<code class="codeph">V$ASM_DISK</code>视图中。属于磁盘组的磁盘（即磁盘标头中具有磁盘组名称的磁盘）显示<code class="codeph">MEMBER</code>状态为<code class="codeph">MEMBER</code> 。已发现但尚未分配给磁盘组的磁盘的状态为<code class="codeph">CANDIDATE</code>或<code class="codeph">PROVISIONED</code> 。以前属于磁盘组并从磁盘组中干净地丢弃的磁盘的状态为<code class="codeph">FORMER</code> 。</p>
                  <p><code class="codeph">PROVISIONED</code>状态意味着管理员已采取额外的特定于平台的操作，以使磁盘可用于Oracle ASM。例如，在Windows计算机上，管理员可能使用<code class="codeph">asmtool</code>或<code class="codeph">asmtoolg</code>使用标头标记磁盘。例如，在Linux计算机上，管理员可能已使用Oracle ASM筛选器驱动程序或ASMLIB为Oracle ASM准备磁盘。</p>
                  <p><a href="asm-disk-discovery.html#GUID-CD6B3821-FF1A-4882-BF10-97CE138C800D__CHDBIFBD">示例4-10</a>显示了<code class="codeph">V$ASM_DISK</code>上的SQL查询，该查询显示了一组磁盘的标头状态。
                  </p>
                  <div class="example" id="GUID-CD6B3821-FF1A-4882-BF10-97CE138C800D__CHDBIFBD">
                     <p class="titleinexample">示例4-10查询V $ ASM_DISK的标头状态</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT name，header_status，path FROM V $ ASM_DISK WHERE path LIKE'/ devices / disk0％'; NAME HEADER_STATUS PATH --------- ------------- --------------------- FORMER / devices / disk02 FORMER / devices / disk01 CANDIDATE / devices / disk07 DISK06 MEMBER / devices / disk06 DISK05 MEMBER / devices / disk05 DISK04 MEMBER / devices / disk04 DISK03 MEMBER / devices / disk03 7行选择。
</pre></div>
                  <!-- class="example" -->
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-CD6B3821-FF1A-4882-BF10-97CE138C800D__GUID-0872A226-766E-4515-B608-C0633A36D117">
                        <p class="notep1">也可以看看：</p>
                        <p>有关Oracle <code class="codeph">V$ASM_DISK</code>视图中显示的Oracle ASM磁盘的标头状态的信息，请<a href="../refrn/V-ASM_DISK.html#REFRN30170" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OSTMG94123"></a><div class="props_rev_3"><a id="GUID-DC9D242F-9ECC-445C-9CDE-67B358B9748B" name="GUID-DC9D242F-9ECC-445C-9CDE-67B358B9748B"></a><h3 id="OSTMG-GUID-DC9D242F-9ECC-445C-9CDE-67B358B9748B" class="sect3">磁盘发现规则</h3>
               <div>
                  <p><a id="d30208e619" class="indexterm-anchor"></a>发现Oracle ASM磁盘的规则如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>Oracle ASM最多可以发现10,000个磁盘。也就是说，如果超过10,000个磁盘与<code class="codeph">ASM_DISKSTRING</code>初始化参数匹配，则Oracle ASM仅发现前10,000个磁盘。
                        </p>
                     </li>
                     <li>
                        <p>Oracle ASM仅发现磁盘分区。Oracle ASM不会发现包含分区表的分区。</p>
                     </li>
                     <li>
                        <p>从安装的角度来看，候选磁盘是具有<code class="codeph">CANDIDATE</code> ， <code class="codeph">PROVISIONED</code>或<code class="codeph">FORMER</code>标头状态的<code class="codeph">FORMER</code> 。具有<code class="codeph">CANDIDATE</code> ， <code class="codeph">PROVISIONED</code>或<code class="codeph">FORMER</code>状态的这些磁盘可以添加到Oracle ASM磁盘组，而无需使用<code class="codeph">FORCE</code>标志。
                        </p>
                     </li>
                     <li>
                        <p>添加磁盘时，如果Oracle ASM识别出磁盘是由Oracle管理的，则必须使用<code class="codeph">FORCE</code>选项。此类磁盘显示在<code class="codeph">V$ASM_DISK</code>视图中，状态为<code class="codeph">FOREIGN</code> 。在这种情况下，您只能使用<code class="codeph">FORCE</code>关键字将磁盘添加到磁盘组。
                        </p>
                     </li>
                     <li>
                        <p>如果磁盘不是当前安装的磁盘组的一部分，则通常可以通过指定<code class="codeph">FORCE</code>标志将<code class="codeph">MEMBER</code>磁盘添加到磁盘组。
                        </p>
                     </li>
                  </ul>
                  <p>此外，Oracle ASM在发现期间识别以下配置错误：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>到同一磁盘的多个路径</p>
                        <p>在这种情况下，如果磁盘是磁盘组的一部分，则磁盘组安装将失败。如果使用<code class="codeph">ADD DISK</code>或<code class="codeph">CREATE DISKGROUP</code>命令将磁盘添加到磁盘组，则命令将失败。要更正错误，请调整<code class="codeph">ASM_DISKSTRING</code>值，以便Oracle ASM不会发现指向同一磁盘的多个路径。或者，如果您使用的是多路径软件，请确保在<code class="codeph">ASM_DISKSTRING</code>值中仅包含伪设备名称。请参阅<a href="considerations-asm-storage.html#GUID-DA8FBBB8-9831-44D1-AA41-5890B829CAEE" title="多路径解决方案通过使用冗余物理路径组件提供故障转移。">Oracle ASM和多路径</a> 。
                        </p>
                     </li>
                     <li>
                        <p>具有相同磁盘头的多个Oracle ASM磁盘</p>
                        <p>将一个磁盘复制到另一个磁盘上可能会导致这种情况。在这种情况下，磁盘组安装操作失败。</p>
                     </li>
                  </ul>
               </div>
            </div><a id="OSTMG94124"></a><div class="props_rev_3"><a id="GUID-11333D13-0E68-4779-85F5-BF5F6F32434C" name="GUID-11333D13-0E68-4779-85F5-BF5F6F32434C"></a><h3 id="OSTMG-GUID-11333D13-0E68-4779-85F5-BF5F6F32434C" class="sect3">改善磁盘发现时间</h3>
               <div>
                  <p><code class="codeph">ASM_DISKSTRING</code>初始化参数的值是与操作系统相关的值，Oracle ASM使用该值来限制发现过程用于搜索磁盘的路径集。将新磁盘添加到磁盘组时，安装了磁盘组的每个Oracle ASM实例都必须能够使用其<code class="codeph">ASM_DISKSTRING</code>发现新磁盘。</p>
                  <p>在许多情况下，默认值（ <code class="codeph">NULL</code> ）就足够了。使用限制性更强的值可能会减少Oracle ASM执行发现所需的时间，从而缩短磁盘组安装时间或将磁盘添加到磁盘组的时间。在添加磁盘之前，Oracle可以动态更改<code class="codeph">ASM_DISKSTRING</code> ，以便通过此参数发现新磁盘。
                  </p>
                  <p><code class="codeph">ASM_DISKSTRING</code>的默认值可能无法在所有情况下找到所有磁盘。如果您的站点使用的是Oracle ASM过滤器驱动程序或第三方供应商，那么您可能具有必须用于<code class="codeph">ASM_DISKSTRING</code>发现字符串约定。</p>
                  <p>此外，如果您的安装使用多路径软件，则该软件可能会将伪设备放置在与操作系统默认值不同的路径中。</p>
                  <div class="infoboxnotealso" id="GUID-11333D13-0E68-4779-85F5-BF5F6F32434C__GUID-3A1203ED-B7B1-467B-BE8A-C3DDFBCE6B64">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="administer-filter-driver.html#GUID-2F5E344F-AFC2-4768-8C00-6F3C56302123" title="Oracle ASM Filter Driver (Oracle ASMFD) simplifies the configuration and management of disk devices by eliminating the need to rebind disk devices used with Oracle ASM each time the system is restarted.">管理Oracle ASM筛选器驱动程序</a>以获取有关Oracle ASM筛选器驱动<a href="administer-filter-driver.html#GUID-2F5E344F-AFC2-4768-8C00-6F3C56302123" title="Oracle ASM过滤器驱动程序（Oracle ASMFD）通过在每次重新启动系统时无需重新绑定与Oracle ASM一起使用的磁盘设备，从而简化了磁盘设备的配置和管理。">程序</a>的信息</p>
                        </li>
                        <li>
                           <p><a href="considerations-asm-storage.html#GUID-DA8FBBB8-9831-44D1-AA41-5890B829CAEE" title="多路径解决方案通过使用冗余物理路径组件提供故障转移。">Oracle ASM和Multipathing</a>以及多路径供应商文档，以获取有关多路径的信息</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
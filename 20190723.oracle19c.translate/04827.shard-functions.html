<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Lists the sharding functions."></meta>
      <meta name="description" content="Lists the sharding functions."></meta>
      <title>分片功能</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content="Lists the sharding functions."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-call-interface-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-14T08:46:00-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96204-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="transaction-functions.html" title="Previous" type="text/html"></link>
      <link rel="next" href="miscellaneous-functions.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle Call Interface Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNOCI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="transaction-functions.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="miscellaneous-functions.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="more-database-access-c-api.html" property="item" typeof="WebPage"><span property="name">更多Oracle Database Access C API</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">分片功能</li>
            </ol>
            <a id="GUID-CEDBD404-E18E-4CCF-88D1-F13DB20EDA9A" name="GUID-CEDBD404-E18E-4CCF-88D1-F13DB20EDA9A"></a>
            
            <h2 id="LNOCI-GUID-CEDBD404-E18E-4CCF-88D1-F13DB20EDA9A" class="sect2"><span class="enumeration_section">26.8分片</span>功能</h2>
         </header>
         <div class="ind">
            <div>
               <p>列出分片功能。</p>
               <div class="section">
                  <p>下表列出了本节中描述的分片OCI功能。</p>
               </div>
               <!-- class="section" -->
               <div class="tblformal" id="GUID-CEDBD404-E18E-4CCF-88D1-F13DB20EDA9A__GUID-84C80772-629D-4A70-ABA2-F66901E1D77A">
                  <p class="titleintable">表26-7分片功能</p>
                  <table cellpadding="4" cellspacing="0" class="Formal" title="分片功能" border="1" summary="This table has 2 columns. Column 1 is the OCI function name and column 2 describes its purpose. " frame="hsides" rules="rows">
                     <thead>
                        <tr align="left" valign="top">
                           <th align="left" valign="bottom" id="d225090e199">功能</th>
                           <th align="left" valign="bottom" id="d225090e201">目的</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" id="d225090e205" headers="d225090e199 ">
                              <p><a href="shard-functions.html#GUID-32738F1F-A631-48C1-986F-2E7FAE2D9800" title="添加分片键列以形成复合分片键或复合超分片键。">OCIShardingKeyColumnAdd（）</a></p>
                           </td>
                           <td align="left" valign="top" headers="d225090e205 d225090e201 ">
                              <p>添加分片键列以形成复合分片键或复合超分片键。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" id="d225090e217" headers="d225090e199 ">
                              <p><a href="shard-functions.html#GUID-699532A5-AE5B-42DA-8D90-9C7732C773D3" title="重置已创建的分片键或超分片键，以便重新使用新的键列值。">OCIShardingKeyReset（）</a></p>
                           </td>
                           <td align="left" valign="top" headers="d225090e217 d225090e201 ">
                              <p>重置已创建的分片键或超分片键，以便重新使用新的键列值。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" id="d225090e229" headers="d225090e199 ">
                              <p><a href="shard-functions.html#GUID-AE0B287B-A515-4B69-9F95-D6894ADB0E9A" title="仅用于自定义池，获取给定分片键描述符，超级分片键描述符和连接字符串的实例名称。">OCIShardInstancesGet（）</a></p>
                           </td>
                           <td align="left" valign="top" headers="d225090e229 d225090e201 ">
                              <p>返回给定分片键描述符，超级分片键描述符和连接字符串的实例名称。</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <!-- class="inftblhruleinformal" -->
            </div>
            <div class="sect2"><a id="GUID-32738F1F-A631-48C1-986F-2E7FAE2D9800" name="GUID-32738F1F-A631-48C1-986F-2E7FAE2D9800"></a><h3 id="LNOCI-GUID-32738F1F-A631-48C1-986F-2E7FAE2D9800" class="sect3"><span class="enumeration_section">26.8.1</span> OCIShardingKeyColumnAdd（）</h3>
               <div>
                  <p>添加分片键列以形成复合分片键或复合超分片键。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-32738F1F-A631-48C1-986F-2E7FAE2D9800__GUID-4C1CA362-9B39-40A0-9041-8A929987B12E">目的</p>
                     <p>添加分片键列以形成复合分片键或复合超分片键。分片键列是表中用作键的列。如果有多个列用作密钥，则它是复合密钥。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-32738F1F-A631-48C1-986F-2E7FAE2D9800__GUID-0475628C-BD1E-43E9-A4A6-24358670BB2D">句法</p><pre class="pre codeblock"><code>sword OCIShardingKeyColumnAdd（OCIShardingKey * shardingKey，OCIError * errhp，void * col，ub4 colLen，ub2 colType，ub4 mode）;</code></pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-32738F1F-A631-48C1-986F-2E7FAE2D9800__GUID-08AFDF61-8259-4B66-B4FD-D0A141985084">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-32738F1F-A631-48C1-986F-2E7FAE2D9800__GUID-534E80CB-08F3-4761-946C-0DCD6C126380"><!-- --></a> shardingKey（IN）</dt>
                        <dd>分片键或超级分片键。</dd>
                        <dt class="dlterm"><a name="GUID-32738F1F-A631-48C1-986F-2E7FAE2D9800__GUID-AB8AA98E-835C-4569-B8A4-FF68E9F76237"><!-- --></a> errhp（IN / OUT）</dt>
                        <dd>一个错误句柄，您可以在发生错误时传递给<code class="codeph">OCIErrorGet()</code>以获取诊断信息。
                        </dd>
                        <dt class="dlterm"><a name="GUID-32738F1F-A631-48C1-986F-2E7FAE2D9800__GUID-8B7AD9B8-EB16-41E2-BAD5-A714172F99DA"><!-- --></a> col（IN）</dt>
                        <dd>分片键列，复合键的一个组件。对于字符串，假定值在客户端字符集中（由<code class="codeph">NLS_LANG</code>或<code class="codeph">OCIEnvNLSCreate()</code>调用指定）。
                        </dd>
                        <dt class="dlterm"><a name="GUID-32738F1F-A631-48C1-986F-2E7FAE2D9800__GUID-ADDB40F5-D17B-4F42-9BE4-17C0A30D2137"><!-- --></a>科伦（IN）</dt>
                        <dd>分片键列的长度。</dd>
                        <dt class="dlterm"><a name="GUID-32738F1F-A631-48C1-986F-2E7FAE2D9800__GUID-789015B3-35AD-4355-9A29-838A1181694D"><!-- --></a> colType（IN）</dt>
                        <dd>列的数据类型。</dd>
                        <dt class="dlterm"><a name="GUID-32738F1F-A631-48C1-986F-2E7FAE2D9800__GUID-958D099A-2116-44CE-AB0E-D40753C58EBF"><!-- --></a>模式（IN）</dt>
                        <dd><code class="codeph">OCI_DEFAULT</code>是唯一支持的值。
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-32738F1F-A631-48C1-986F-2E7FAE2D9800__GUID-20D4019E-8564-433C-A35C-BB429ABC5442">返回</p>
                     <p><code class="codeph">OCI_SUCCESS</code>或<code class="codeph">OCI_ERROR</code></p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-32738F1F-A631-48C1-986F-2E7FAE2D9800__GUID-36E1BDD3-E917-485A-8AB7-E090383297E5">使用说明</p>
                     <p>用户必须分配<code class="codeph">OCIShardingKey</code>描述符。
                     </p>
                     <p>根据复合键中的列（简单的分片键一次），按照数据库中定义键的顺序，调用<code class="codeph">OCIShardingKeyColumnAdd()</code>多次。<code class="codeph">colType</code>变量指示列的数据类型。
                     </p>
                     <p>下表显示了<code class="codeph">colType</code>参数及其相应C数据类型支持的OCI数据类型值。
                     </p>
                     <div class="tblformal" id="GUID-32738F1F-A631-48C1-986F-2E7FAE2D9800__GUID-C1836B7A-F5E9-444A-AE82-41D2DF18C0B1">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" border="1" summary="This is a 2–column table listing the OCI data type and its corresponding C data type." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d225090e521">OCI数据类型</th>
                                 <th align="left" valign="bottom" id="d225090e523">C数据类型</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d225090e527" headers="d225090e521 ">SQLT_NUM</td>
                                 <td align="left" valign="top" headers="d225090e527 d225090e523 ">UB1 *</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d225090e532" headers="d225090e521 ">SQLT_CHR</td>
                                 <td align="left" valign="top" headers="d225090e532 d225090e523 ">OraText *</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d225090e537" headers="d225090e521 ">SQLT_DATE</td>
                                 <td align="left" valign="top" headers="d225090e537 d225090e523 ">UB1 *</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d225090e542" headers="d225090e521 ">SQLT_TIMESTAMP</td>
                                 <td align="left" valign="top" headers="d225090e542 d225090e523 ">OCIDateTime *</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d225090e547" headers="d225090e521 ">SQLT_RAW</td>
                                 <td align="left" valign="top" headers="d225090e547 d225090e523 ">UB1 *</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d225090e552" headers="d225090e521 ">SQLT_VNU</td>
                                 <td align="left" valign="top" headers="d225090e552 d225090e523 ">UB1 *</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d225090e557" headers="d225090e521 ">SQLT_INT</td>
                                 <td align="left" valign="top" headers="d225090e557 d225090e523 ">INT *</td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-32738F1F-A631-48C1-986F-2E7FAE2D9800__GUID-1D72AF2A-708D-4B9E-9E55-419F1A2F18E0">例子</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-32738F1F-A631-48C1-986F-2E7FAE2D9800__GUID-0EB4667C-4B7C-4E6C-B6E6-CD7AEA4D02D4">
                     <p class="titleinexample">示例26-1创建复合分片键</p>
                     <p>使用<code class="codeph">OCIShardingKey</code>描述符作为分片键，然后根据需要分配描述符并多次调用<code class="codeph">OCIShardingKeyColumnAdd()</code>以创建复合分片键。
                     </p><pre class="pre codeblock"><code>OCIShardingKey * shardKey; text * name =“KK”; int empid = 150; <span class="bold">checker（＆status，errhp，OCIDescriptorAlloc（envhp，（dvoid **）＆shardKey，OCI_DTYPE_SHARDING_KEY，0，（dvoid **）0）））;</span> / *构造复合键* / OCIShardingKeyColumnAdd（shardKey，OCIError * errhp，（ub4 *）＆empid，sizeof（empid），SQLT_INT，OCI_DEFAULT）; OCIShardingKeyColumnAdd（shardKey，OCIError * errhp，name，strlen（name），SQLT_CHR，OCI_DEFAULT））;</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="handle-and-descriptor-functions.html#GUID-E9EF2766-E078-49A7-B1D1-738E4BA4814F" title="分配存储以保存描述符或LOB定位符。">OCIDescriptorAlloc（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-1E929CFB-9D96-4E8E-9F24-904AD539E555" title="初始化会话池以与OCI会话池和数据库驻留连接池（DRCP）一起使用。">OCISessionPoolCreate（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-699532A5-AE5B-42DA-8D90-9C7732C773D3" name="GUID-699532A5-AE5B-42DA-8D90-9C7732C773D3"></a><h3 id="LNOCI-GUID-699532A5-AE5B-42DA-8D90-9C7732C773D3" class="sect3"><span class="enumeration_section">26.8.2</span> OCIShardingKeyReset（）</h3>
               <div>
                  <p>重置已创建的分片键或超分片键，以便重新使用新的键列值。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-699532A5-AE5B-42DA-8D90-9C7732C773D3__GUID-3C62296A-B3A3-4BF5-A8B4-6FFBB53B23BC">目的</p>
                     <p>可以使用此例程重置分片密钥或超级分片密钥描述符，这将删除此呼叫之前添加的所有密钥列值。在此调用之后，描述符可用于设置新的键列值。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-699532A5-AE5B-42DA-8D90-9C7732C773D3__GUID-6A8C9BB9-4FF9-4323-AA58-2367F7B23FEC">句法</p><pre class="pre codeblock"><code>剑OCIShardingKeyReset（OCIShardKey * shardKey，OCIError * errhp，ub4模式）;</code></pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-699532A5-AE5B-42DA-8D90-9C7732C773D3__GUID-006DA4E5-1A69-44DD-B7F7-DCB031E97BB5">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-699532A5-AE5B-42DA-8D90-9C7732C773D3__GUID-0CBD15CD-01A9-4631-869D-E7B0B41DE1A5"><!-- --></a> shardKey（IN）</dt>
                        <dd>分片键或超分片键描述符。</dd>
                        <dt class="dlterm"><a name="GUID-699532A5-AE5B-42DA-8D90-9C7732C773D3__GUID-1A7D2268-1654-44AF-B2A9-D830A9D159EB"><!-- --></a> errhp（IN / OUT）</dt>
                        <dd>一个错误句柄，您可以在发生错误时传递给<code class="codeph">OCIErrorGet()</code>以获取诊断信息。
                        </dd>
                        <dt class="dlterm"><a name="GUID-699532A5-AE5B-42DA-8D90-9C7732C773D3__GUID-B59D5E83-34E1-453A-BDCF-AD7BCC8548DF"><!-- --></a>模式（IN）</dt>
                        <dd><code class="codeph">OCI_DEFAULT</code>是当前支持的唯一值。
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-699532A5-AE5B-42DA-8D90-9C7732C773D3__GUID-1925C7CD-DA0C-4F6F-BE66-132AF3266A91">返回</p>
                     <p><code class="codeph">OCI_SUCCESS</code>或<code class="codeph">OCI_ERROR</code></p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-699532A5-AE5B-42DA-8D90-9C7732C773D3__GUID-5EAD9119-7081-461E-A63A-F6FD710D8C70">使用说明</p>
                     <p>没有。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="handle-and-descriptor-functions.html#GUID-3741D7BD-7652-4D7A-8813-AC2AEA8D3B03" title="设置句柄或描述符的属性值。">OCIAttrSet（）</a></li>
                        <li><a href="handle-and-descriptor-functions.html#GUID-FA199A99-4D7A-42C2-BB0A-C20047B95DF9" title="获取句柄属性的值。">OCIAttrGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-AE0B287B-A515-4B69-9F95-D6894ADB0E9A" name="GUID-AE0B287B-A515-4B69-9F95-D6894ADB0E9A"></a><h3 id="LNOCI-GUID-AE0B287B-A515-4B69-9F95-D6894ADB0E9A" class="sect3"><span class="enumeration_section">26.8.3</span> OCIShardInstancesGet（）</h3>
               <div>
                  <p>仅用于自定义池，获取给定分片键描述符，超级分片键描述符和连接字符串的实例名称。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-AE0B287B-A515-4B69-9F95-D6894ADB0E9A__GUID-3EA0B96B-4A85-4EB1-9533-CEEC489464B4">目的</p>
                     <p>仅用于自定义池，为块的给定分片键描述符返回实例名称，为一组块和连接字符串返回超级分片键描述符。碎片是一组数据库中的位置，每个数据库存储数据的某些部分。存储在每个数据库中的数据部分由一组<span class="italic">块表示</span> ，其中每个块与一定范围的数据相关联。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AE0B287B-A515-4B69-9F95-D6894ADB0E9A__GUID-17B72E76-0383-4343-A0B7-9EC9B732C98E">句法</p><pre class="pre codeblock"><code>剑OCIShardInstancesGet（void ** shTopoCtx，OCIError * errhp，const OraText * connstr，ub4 constrl，OCIShardingKey * shardingKey，OCIShardingKey * superShardingKey，OCIShardinst *** shardinsts，ub4 numShardInsts，ub4 mode）;</code></pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AE0B287B-A515-4B69-9F95-D6894ADB0E9A__GUID-226B8403-5635-4A97-ADAB-B189F0631F9F">参数</p>
                     <dl class="0.90* 3.10*">
                        <dt class="dlterm"><a name="GUID-AE0B287B-A515-4B69-9F95-D6894ADB0E9A__GUID-944AA985-40B0-4838-92A0-2E09172EE078"><!-- --></a> shTopoCtx（IN / OUT）</dt>
                        <dd>由OCI创建并在第一次调用此方法时为给定连接字符串返回的不透明上下文。这是一个可选参数，可以作为<code class="codeph">NULL</code>传递。为了获得更好的性能， <code class="codeph">void * shardTopoCtx</code>先前调用（如果有）返回的<code class="codeph">void * shardTopoCtx</code>传递给<code class="codeph">OCIShardInstancesGet()</code>以获取相同的连接字符串。
                        </dd>
                        <dt class="dlterm"><a name="GUID-AE0B287B-A515-4B69-9F95-D6894ADB0E9A__GUID-8275D3F4-4463-4C67-9344-4C0C381703C0"><!-- --></a> errhp（IN / OUT）</dt>
                        <dd>一个错误句柄，您可以在发生错误时传递给<code class="codeph">OCIErrorGet()</code>以获取诊断信息。
                        </dd>
                        <dt class="dlterm"><a name="GUID-AE0B287B-A515-4B69-9F95-D6894ADB0E9A__GUID-0ADF692A-68C5-46EA-A4B2-AB8DDAE4EB0C"><!-- --></a> connstr（IN）</dt>
                        <dd>应用程序传递给<code class="codeph">OCISessionGet()</code>调用的原始连接字符串。
                        </dd>
                        <dt class="dlterm"><a name="GUID-AE0B287B-A515-4B69-9F95-D6894ADB0E9A__GUID-21696ACF-4238-4A51-85F9-8194C80B6A10"><!-- --></a> connstrl（IN）</dt>
                        <dd><code class="codeph">connstr</code>参数的长度。
                        </dd>
                        <dt class="dlterm"><a name="GUID-AE0B287B-A515-4B69-9F95-D6894ADB0E9A__GUID-FE45F0A6-F4EE-4F89-A128-D4BAB2D78063"><!-- --></a> shardingKey（IN）</dt>
                        <dd>所需块的分片键。</dd>
                        <dt class="dlterm"><a name="GUID-AE0B287B-A515-4B69-9F95-D6894ADB0E9A__GUID-7188CA8C-C781-4290-9BBB-684482B46893"><!-- --></a> superShardingKey（IN）</dt>
                        <dd>所需块的超级分片键;此值可以为NULL。</dd>
                        <dt class="dlterm"><a name="GUID-AE0B287B-A515-4B69-9F95-D6894ADB0E9A__GUID-48FCE995-7E78-4C84-AF50-28713578F94F"><!-- --></a> shardInsts（OUT）</dt>
                        <dd><code class="codeph">OCIShardInst</code>描述符数组，对应于提供与分片键和超分片键相关联的块的实例。
                        </dd>
                        <dt class="dlterm"><a name="GUID-AE0B287B-A515-4B69-9F95-D6894ADB0E9A__GUID-47501269-18B7-4957-9329-C687698AAFA9"><!-- --></a> numShardInsts（OUT）</dt>
                        <dd><code class="codeph">shardInsts</code>的元素<code class="codeph">shardInsts</code> 。
                        </dd>
                        <dt class="dlterm"><a name="GUID-AE0B287B-A515-4B69-9F95-D6894ADB0E9A__GUID-ACA34836-5CE7-44C3-9711-75008A502BE7"><!-- --></a>模式（IN）</dt>
                        <dd><code class="codeph">OCI_DEFAULT</code>是唯一支持的值。
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AE0B287B-A515-4B69-9F95-D6894ADB0E9A__GUID-9C2DB107-CA3A-4484-A989-28A798E298B3">返回</p>
                     <p><code class="codeph">OCI_SUCCESS</code>或<code class="codeph">OCI_ERROR</code></p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AE0B287B-A515-4B69-9F95-D6894ADB0E9A__GUID-76031CBE-3712-4E70-A9DF-205A368482EA">使用说明</p>
                     <p>没有。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-AE0B287B-A515-4B69-9F95-D6894ADB0E9A__GUID-604EFF13-1C76-4DB8-8A85-280ADE3DEC84">例子</p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-AE0B287B-A515-4B69-9F95-D6894ADB0E9A__GUID-2C71D9BE-F087-46DA-AA8D-29DB4222F6AA">
                     <p class="titleinexample">示例26-2自定义池示例</p>
                     <p>此示例使用自定义池并说明如何获取给定连接的实例名称以及如何查找托管给定连接的给定分片键，分片名称和超级分片名称的实例。如果自定义池中没有匹配的连接，则会创建新连接。</p><pre class="pre codeblock"><code>OCIShardInstancesGet（＆shTopoCtx，errhp，connstr，strlen（connstrl），shardingKey，superShardingKey，＆shardInsts，＆numShardInsts，OCI_DEFAULT）; / *遍历所有具有满足分片键数据的分片实例。* / for（k = 0; k &lt;numShardInsts; k ++）{OCIAttrGet（shardInstances [k]，（ub4）OCI_DTYPE_SHARD_INST，（dvoid *）＆iName，（ub4 *）＆inameLen，OCI_ATTR_INSTNAME，（OCIError *）errhp）; / *在自定义池中查找与同一分片实例的连接。* / / *以下属性可用于查找实例名称。* / OCIAttrGet（svchp [i]，OCI_HTYPE_SVCCTX，＆cshardName [i]，（ub4 *）＆cshardNameLen [i]，OCI_ATTR_INSTNAME，errhp）; / *如果找到匹配的连接（iName和cshardName [i]）。* / {OCIAttrSet（svchp [i]，OCI_HTYPE_SVCCTX，shardingKey，sizeof（shardingKey），OCI_ATTR_SHARDING_KEY，errhp）; / *返回与请求者的连接。* / return svchp [i];如果未找到空闲的现有连接，请在池中创建一个新连接并将其返回。* / {OCIAttrSet（authp，OCI_HTYPE_AUTHINFO，shardingKey，sizeof（shardingKey），OCI_ATTR_SHARDING_KEY，errhp）; OCISessionGet（（OCIEnv *）envhp，（OCIError *）errhp，（OCISvcCtx **）＆mysvc，（OCIAuthInfo *）authp，（OraText *）connstr，（ub4）strlen（（char *）connstrl），（OraText *）NULL ，（ub4）0，（OraText **）0，（ub4 *）0，（布尔*）0，OCI_SESSGET_CUSTOM_POOL）;返回mysvc; / *跟踪池中。* /}</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="handle-and-descriptor-functions.html#GUID-3741D7BD-7652-4D7A-8813-AC2AEA8D3B03" title="设置句柄或描述符的属性值。">OCIAttrSet（）</a></li>
                        <li><a href="handle-and-descriptor-functions.html#GUID-FA199A99-4D7A-42C2-BB0A-C20047B95DF9" title="获取句柄属性的值。">OCIAttrGet（）</a></li>
                        <li><a href="connect-authorize-and-initialize-functions.html#GUID-890DFBC4-718B-4339-A0EA-6226A25B8241" title="获取一个会话。">OCISessionGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
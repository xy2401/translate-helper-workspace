<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="This chapter provides an overview of the Structured Query Language (SQL) and how Oracle Database processes SQL statements."></meta>
      <meta name="description" content="This chapter provides an overview of the Structured Query Language (SQL) and how Oracle Database processes SQL statements."></meta>
      <title>SQL</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Concepts"></meta>
      <meta property="og:description" content="This chapter provides an overview of the Structured Query Language (SQL) and how Oracle Database processes SQL statements."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Concepts"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-concepts.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-09T07:47:16-08:00"></meta>
      <meta name="dcterms.title" content="Database Concepts"></meta>
      <meta name="dcterms.dateCopyrighted" content="1993, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96138-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="oracle-data-access.html" title="Previous" type="text/html"></link>
      <link rel="next" href="server-side-programming.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="CNCPT"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oracle-data-access.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="server-side-programming.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库概念</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-data-access.html" property="item" typeof="WebPage"><span property="name">Oracle数据访问</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">SQL</li>
            </ol>
            <a id="GUID-DA48618A-A6BB-421A-A10A-02859D8ED9AD" name="GUID-DA48618A-A6BB-421A-A10A-02859D8ED9AD"></a><a id="CNCPT015"></a>
            
            <h2 id="CNCPT-GUID-DA48618A-A6BB-421A-A10A-02859D8ED9AD" class="sect2"><span class="enumeration_chapter">7</span> SQL</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章概述了<span class="bold">结构化查询语言（SQL）</span>以及Oracle数据库如何处理SQL语句。
               </p>
               <p>本章包括以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="sql.html#GUID-CBD8FE77-BA6F-4241-A71C-2ADDDF43EA7F" title="SQL（发音为sequel）是基于集合的高级声明性计算机语言，所有程序和用户都可以使用该语言访问Oracle数据库中的数据。">SQL简介</a></p>
                  </li>
                  <li>
                     <p><a href="sql.html#GUID-662EE4B0-7D5E-43F5-806D-A2AE404D77BF" title="对Oracle数据库中的信息执行的所有操作都使用SQL语句运行。SQL语句是由标识符，参数，变量，名称，数据类型和SQL保留字组成的计算机程序或指令。">SQL语句概述</a></p>
                  </li>
                  <li>
                     <p><a href="sql.html#GUID-3F42B1AA-530A-4144-8179-F0074832AF81" title="要了解Oracle数据库如何处理SQL语句，有必要了解数据库中称为优化器的部分（也称为查询优化器或基于成本的优化器）。所有SQL语句都使用优化器来确定访问指定数据的最有效方法。">优化程序概述</a></p>
                  </li>
                  <li>
                     <p><a href="sql.html#GUID-0E8DFE97-F2DD-4183-8A4B-1EA9087E9E37" title="本节介绍Oracle数据库如何处理SQL语句。具体来说，该部分介绍了数据库处理DDL语句以创建对象的方式，DML用于修改数据的方式以及用于检索数据的查询。">SQL处理概述</a></p>
                  </li>
               </ul>
            </div><a id="CNCPT116"></a><div class="props_rev_3"><a id="GUID-CBD8FE77-BA6F-4241-A71C-2ADDDF43EA7F" name="GUID-CBD8FE77-BA6F-4241-A71C-2ADDDF43EA7F"></a><h3 id="CNCPT-GUID-CBD8FE77-BA6F-4241-A71C-2ADDDF43EA7F" class="sect3">SQL简介</h3>
               <div>
                  <p>SQL（发音为<span class="italic">sequel</span> ）是基于集合的高级声明性计算机语言，所有程序和用户都可以使用该语言访问Oracle数据库中的数据。
                  </p>
                  <p>虽然某些Oracle工具和应用程序掩盖了SQL使用，但所有数据库任务都是使用SQL执行的。任何其他数据访问方法都会绕过Oracle数据库中内置的安全性，并可能危及数据安全性和完整性。</p>
                  <p>SQL为关系数据库（如Oracle数据库）提供了一个接口。SQL以一种一致的语言统一以下任务：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>创建，替换，更改和删除对象</p>
                     </li>
                     <li>
                        <p>插入，更新和删除表行</p>
                     </li>
                     <li>
                        <p>查询数据</p>
                     </li>
                     <li>
                        <p>控制对数据库及其对象的访问</p>
                     </li>
                     <li>
                        <p>保证数据库的一致性和完整性</p>
                     </li>
                  </ul>
                  <p>SQL可以交互使用，这意味着语句可以手动输入到程序中。SQL语句也可以嵌入用不同语言（如C或Java）编写的程序中。</p>
                  <div class="infoboxnotealso" id="GUID-CBD8FE77-BA6F-4241-A71C-2ADDDF43EA7F__GUID-4056657B-1E17-4432-B452-B469E39F9BDF">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="server-side-programming.html#GUID-6B5D98B7-A25D-4187-B3A9-43629E214635" title="在诸如SQL的非过程语言中，指定要操作的数据集，但不指定要执行的操作或它们的执行方式。">服务器端编程简介</a> ”</span>和<span class="q">“ <a href="concepts-for-database-developers.html#GUID-87F23274-B506-486B-8775-880016095EF5" title="您可以使用预编译器或Java转换器将SQL语句放在源代码中，也可以使用API使应用程序与数据库交互。">客户端数据库编程</a> ”</span></p>
                        </li>
                        <li>
                           <p><a href="../sqlrf/Introduction-to-Oracle-SQL.html#SQLRF001" target="_blank"><span><cite>Oracle Database SQL语言参考，</cite></span></a>用于SQL简介</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="CNCPT88899"></a><div class="props_rev_3"><a id="GUID-AF25E66F-965C-44B8-91B8-1A9F95FCF99D" name="GUID-AF25E66F-965C-44B8-91B8-1A9F95FCF99D"></a><h4 id="CNCPT-GUID-AF25E66F-965C-44B8-91B8-1A9F95FCF99D" class="sect4">SQL数据访问</h4>
                  <div>
                     <p>有计算机语言的两大家族： <strong class="term">声明性语言</strong>是无顺序和描述应<span class="italic">该做什么</span> ，以及<strong class="term">程序语言</strong>如C ++和Java描述事情应该<span class="italic">怎么</span>做。
                     </p>
                     <p>SQL是声明性的，用户指定他们想要的结果，而不是如何派生它。例如，以下语句查询姓氏以<code class="codeph">K</code>开头的员工的记录：</p>
                     <p>数据库执行生成过程以导航数据并检索所请求结果的工作。SQL的声明性使您可以在逻辑级别处理数据。只有在操作数据时才需要关注实现细节。</p><pre class="pre codeblock"><code>SELECT last_name，first_name FROM hr.employees WHERE last_name LIKE'K％'ORDER BY last_name，first_name;</code></pre><p>数据库在一个步骤中检索满足<code class="codeph">WHERE</code> <a href="glossary.html#GUID-B5AA8627-E7DC-487B-8D4B-2DE3F1497A83"><span class="xrefglossterm">条件的</span></a>所有行，也称为<a href="glossary.html#GUID-891CF9E9-78CD-470C-9C4A-D65A101B2C38"><span class="xrefglossterm">谓词</span></a> 。数据库可以将这些行作为一个单元传递给用户，另一个SQL语句或应用程序。应用程序不需要逐个处理行，开发人员也不需要知道如何物理存储或检索行。
                     </p>
                     <p>所有SQL语句都使用优化器，优化器是数据库的一个组件，用于确定访问请求数据的最有效方法。Oracle数据库还支持可用于使优化器更好地执行其工作的技术。</p>
                     <div class="infoboxnotealso" id="GUID-AF25E66F-965C-44B8-91B8-1A9F95FCF99D__GUID-6039675E-5D31-4863-9F14-B8A3915056B1">
                        <p class="notep1">也可以看看：</p>
                        <p>有关SQL语句和SQL其他部分（如运算符，函数和格式模型）的详细信息，请<a href="../sqlrf/Basic-Elements-of-Oracle-SQL.html#SQLRF002" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                     </div>
                  </div>
               </div><a id="CNCPT88900"></a><div class="props_rev_3"><a id="GUID-B383E550-BBF9-4449-A6B0-56B3B3C81A09" name="GUID-B383E550-BBF9-4449-A6B0-56B3B3C81A09"></a><h4 id="CNCPT-GUID-B383E550-BBF9-4449-A6B0-56B3B3C81A09" class="sect4">SQL标准</h4>
                  <div>
                     <p>Oracle致力于遵循行业认可的标准，并积极参与SQL标准委员会。</p>
                     <p>行业认可的委员会是美国国家标准协会（ANSI）和国际标准化组织（ISO）。ANSI和ISO / IEC都接受SQL作为关系数据库的标准语言。</p>
                     <p>SQL标准由十个部分组成。其中一部分（SQL / RPR：2012）是2102中的新内容。2011年修订了其他五个部分。对于其他四个部分，2008版本仍然存在。</p>
                     <p><a href="glossary.html#GUID-48DAF4AC-49FB-453A-A48B-AF225FEA600B"><span class="xrefglossterm">Oracle SQL</span></a>包含许多ANSI / ISO标准SQL语言的扩展，Oracle数据库工具和应用程序提供了其他语句。SQL * Plus，SQL Developer和Oracle Enterprise Manager工具使您可以针对Oracle数据库以及可用于这些工具的任何其他语句或函数运行任何ANSI / ISO标准SQL语句。
                     </p>
                     <div class="infoboxnotealso" id="GUID-B383E550-BBF9-4449-A6B0-56B3B3C81A09__GUID-3B81D71E-10B9-414A-BFFD-50FF553F5B8D">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="concepts-for-database-administrators.html#GUID-FA659979-25B7-4611-AA8D-48B5404301FE" title="Oracle提供了几种用于管理数据库的工具。">数据库管理员工具</a> ”</span>和<span class="q">“ <a href="concepts-for-database-developers.html#GUID-D1C1BC1D-03C7-4A18-BB88-0D76F311DAF0" title="Oracle提供了几种用于开发数据库应用程序的工具。本节介绍一些常用的开发工具。">数据库开发人员工具</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/Oracle-and-Standard-SQL.html#SQLRF019" target="_blank"><span><cite>Oracle数据库SQL语言参考，</cite></span></a>用于解释Oracle SQL和标准SQL之间的差异</p>
                           </li>
                           <li>
                              <p><a href="../sqpug/SQL-Plus-quick-start.html#GUID-BF1995BD-EF9B-4EA2-9B32-7BFACDEB79DA" target="_blank"><span><cite>SQL * Plus用户指南和</cite></span></a> SQL * Plus命令<a href="../sqpug/SQL-Plus-quick-start.html#GUID-BF1995BD-EF9B-4EA2-9B32-7BFACDEB79DA" target="_blank"><span><cite>参考</cite></span></a> ，包括它们与SQL语句的区别</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="CNCPT1730"></a><div class="props_rev_3"><a id="GUID-662EE4B0-7D5E-43F5-806D-A2AE404D77BF" name="GUID-662EE4B0-7D5E-43F5-806D-A2AE404D77BF"></a><h3 id="CNCPT-GUID-662EE4B0-7D5E-43F5-806D-A2AE404D77BF" class="sect3">SQL语句概述</h3>
               <div>
                  <p>对Oracle数据库中的信息执行的所有操作都使用SQL <span class="bold">语句</span>运行。SQL语句是由标识符，参数，变量，名称，数据类型和SQL <span class="bold">保留字</span>组成的计算机程序或指令。
                  </p>
                  <div class="infoboxnote" id="GUID-662EE4B0-7D5E-43F5-806D-A2AE404D77BF__GUID-065C887C-0B78-44DA-8817-D30837ADBC63">
                     <p class="notep1">注意：</p>
                     <p>SQL保留字在SQL中具有特殊含义，不应用于任何其他目的。例如， <code class="codeph">SELECT</code>和<code class="codeph">UPDATE</code>是保留字，不应用作表名。
                     </p>
                  </div>
                  <p>SQL语句必须等同于完整的SQL语句，例如：</p><pre class="oac_no_warn" dir="ltr">SELECT last_name，department_id FROM employees</pre><p>Oracle数据库仅运行完整的SQL语句。如下所示的片段会生成错误，指示需要更多文本：</p><pre class="oac_no_warn" dir="ltr">SELECT last_name;</pre><p>Oracle SQL语句分为以下几类：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="sql.html#GUID-C25B548B-363A-4FE5-B4EE-784502BAAD08" title="数据定义语言（DLL）语句定义，结构更改和删除模式对象。">数据定义语言（DDL）语句</a></p>
                     </li>
                     <li>
                        <p><a href="sql.html#GUID-90EA5D9B-76F2-4916-9F7E-CF0D8AA1A09D" title="数据操纵语言（DML）语句查询或操纵现有模式对象中的数据。">数据操作语言（DML）语句</a></p>
                     </li>
                     <li>
                        <p><a href="sql.html#GUID-73F24816-881A-4849-B8A7-EA9B446A24A7" title="事务控制语句管理DML语句所做的更改，并将DML语句分组到事务中。">交易控制声明</a></p>
                     </li>
                     <li>
                        <p><a href="sql.html#GUID-261BEAAC-0897-465D-9137-D201CE80675C" title="会话控制语句动态管理用户会话的属性。">会话控制语句</a></p>
                     </li>
                     <li>
                        <p><a href="sql.html#GUID-9D63E5DD-E0EF-42AE-B460-74165BB016F3" title="系统控制语句更改数据库实例的属性。">系统控制声明</a></p>
                     </li>
                     <li>
                        <p><a href="sql.html#GUID-AE8D7440-ED46-4FE8-9475-F3D0AD2E19CF" title="嵌入式SQL语句在过程语言程序中包含DDL，DML和事务控制语句。 。">嵌入式SQL语句</a></p>
                     </li>
                  </ul>
               </div><a id="CNCPT88901"></a><a id="CNCPT1732"></a><div class="props_rev_3"><a id="GUID-C25B548B-363A-4FE5-B4EE-784502BAAD08" name="GUID-C25B548B-363A-4FE5-B4EE-784502BAAD08"></a><h4 id="CNCPT-GUID-C25B548B-363A-4FE5-B4EE-784502BAAD08" class="sect4">数据定义语言（DDL）语句</h4>
                  <div>
                     <p>数据定义语言（ <span class="bold">DLL</span> ）语句定义，结构更改和删除模式对象。
                     </p>
                     <p>DDL使您可以在不更改访问对象的应用程序的情况下更改对象的属性。例如，您可以向人力资源应用程序访问的表中添加列，而无需重写应用程序。当数据库用户在数据库中执行工作时，您还可以使用DDL来更改对象的结构。</p>
                     <p>更具体地说，DDL语句使您能够：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>创建，更改和删除架构对象和其他数据库结构，包括数据库本身和数据库用户。大多数DDL语句以关键字<code class="codeph">CREATE</code> ， <code class="codeph">ALTER</code>或<code class="codeph">DROP</code>开头。</p>
                        </li>
                        <li>
                           <p>删除架构对象中的所有数据，而不删除这些对象的结构（ <code class="codeph">TRUNCATE</code> ）。
                           </p>
                           <div class="infoboxnote" id="GUID-C25B548B-363A-4FE5-B4EE-784502BAAD08__GUID-10188635-F56C-421E-A96A-31825B8BD549">
                              <p class="notep1">注意：</p>
                              <p>与<code class="codeph">DELETE</code>不同， <code class="codeph">TRUNCATE</code>生成<a href="glossary.html#GUID-297B963A-989C-4720-B061-A2352FF72892"><span class="xrefglossterm">撤消数据</span></a> ，这使得它比<code class="codeph">DELETE</code>更快。此外， <code class="codeph">TRUNCATE</code>不会调用删除触发器</p>
                           </div>
                        </li>
                        <li>
                           <p>授予和撤销权限和角色（ <code class="codeph">GRANT</code> ， <code class="codeph">REVOKE</code> ）。
                           </p>
                        </li>
                        <li>
                           <p>打开和关闭审核选项（ <code class="codeph">AUDIT</code> ， <code class="codeph">NOAUDIT</code> ）。
                           </p>
                        </li>
                        <li>
                           <p>在<a href="glossary.html#GUID-D6A3934F-BA6D-464F-9612-C683E20514A4"><span class="xrefglossterm">数据字典</span></a> （ <code class="codeph">COMMENT</code> ）中添加<code class="codeph">COMMENT</code> 。
                           </p>
                        </li>
                     </ul>
                     <div class="example" id="GUID-C25B548B-363A-4FE5-B4EE-784502BAAD08__CHDHBIGA">
                        <p class="titleinexample">例7-1 DDL语句</p>
                        <p>以下示例使用DDL语句创建<code class="codeph">plants</code>表，然后使用DML在表中插入两行。然后，该示例使用DDL更改表结构，将此表的读取权限授予和撤消给用户，然后删除该表。
                        </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE工厂（plant_id NUMBER PRIMARY KEY，common_name VARCHAR2（15））; INSERT INTO植物VALUES（1，'African Violet'）; #DML语句INSERT INTO植物VALUES（2，'Amaryllis'）; #DML语句ALTER TABLE植物ADD（latin_name VARCHAR2（40））; GRANT阅读植物TO scott; REVOKE阅读来自斯科特的植物; DROP TABLE植物;</pre><p>在数据库执行DDL语句之前立即发生隐式<code class="codeph">COMMIT</code> ，之后立即发生<code class="codeph">COMMIT</code>或<code class="codeph">ROLLBACK</code> 。在前面的示例中，两个<code class="codeph">INSERT</code>语句后跟一个<code class="codeph">ALTER TABLE</code>语句，因此数据库将提交两个<code class="codeph">INSERT</code>语句。如果<code class="codeph">ALTER TABLE</code>语句成功，则数据库将提交此语句;否则，数据库回滚此语句。在任何一种情况下，两个<code class="codeph">INSERT</code>语句都已提交。
                        </p>
                        <div class="infoboxnotealso" id="GUID-C25B548B-363A-4FE5-B4EE-784502BAAD08__GUID-88076D61-5BC9-4A9E-8154-6A2510EAE945">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="topics-for-database-administrators-and-developers.html#GUID-4D6D2B67-1B65-476D-852A-976E9D153EEC" title="通常，数据库安全性涉及用户身份验证，加密，访问控制和监视。">数据库安全概述</a> ”</span>了解特权和角色</p>
                              </li>
                              <li>
                                 <p><a href="../tdddg/creating-managing-schema-objects.html#TDDDG30000" target="_blank"><span><cite>Oracle数据库2天开发人员指南</cite></span></a>和<a href="../admin/managing-tables.html#ADMIN01503" target="_blank"><span><cite>Oracle数据库管理员指南</cite></span></a> ，了解如何创建模式对象</p>
                              </li>
                              <li>
                                 <p><a href="../adfns/sql-processing-for-application-developers.html#ADFNS187" target="_blank"><span><cite>Oracle数据库开发指南</cite></span></a> ，了解阻塞和非阻塞DDL之间的区别</p>
                              </li>
                              <li>
                                 <p><a href="../sqlrf/Types-of-SQL-Statements.html#SQLRF30041" target="_blank"><span><cite>Oracle Database SQL语言参考</cite></span></a> ，以获取DDL语句列表</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="CNCPT516"></a><div class="props_rev_3"><a id="GUID-90EA5D9B-76F2-4916-9F7E-CF0D8AA1A09D" name="GUID-90EA5D9B-76F2-4916-9F7E-CF0D8AA1A09D"></a><h4 id="CNCPT-GUID-90EA5D9B-76F2-4916-9F7E-CF0D8AA1A09D" class="sect4">数据操作语言（DML）语句</h4>
                  <div>
                     <p>数据操纵语言（ <span class="bold">DML</span> ）语句查询或操纵现有模式对象中的数据。
                     </p>
                     <p>DDL语句改变了数据库的结构，而DML语句则查询或更改内容。例如， <code class="codeph">ALTER TABLE</code>更改<code class="codeph">ALTER TABLE</code>的结构，而<code class="codeph">INSERT</code>将一行或多行添加到表中。
                     </p>
                     <p>DML语句是最常用的SQL语句，使您能够：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>从一个或多个表或视图中检索或获取数据（ <code class="codeph">SELECT</code> ）。
                           </p>
                        </li>
                        <li>
                           <p>通过指定列值列表或使用<a href="glossary.html#GUID-C1CDE912-86C4-4495-8959-0CF8196189B2"><span class="xrefglossterm">子查询</span></a>来选择和操作现有数据，将新行数据添加到表或视图（ <code class="codeph">INSERT</code> ）中。
                           </p>
                        </li>
                        <li>
                           <p>更改表或视图的现有行中的列值（ <code class="codeph">UPDATE</code> ）。
                           </p>
                        </li>
                        <li>
                           <p>有条件地将行更新或插入表或<a href="glossary.html#GUID-1274BCF5-2EC1-4752-B9CE-998A85A83307"><span class="xrefglossterm">视图</span></a> （ <code class="codeph">MERGE</code> ）。
                           </p>
                        </li>
                        <li>
                           <p>从表或视图中删除行（ <code class="codeph">DELETE</code> ）。
                           </p>
                        </li>
                        <li>
                           <p>查看SQL语句的<a href="glossary.html#GUID-2DF33B85-94BB-44F3-93B7-06916FB18361"><span class="xrefglossterm">执行计划</span></a> （ <code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code> ）。
                           </p>
                        </li>
                        <li>
                           <p>锁定表或视图，暂时限制其他用户的访问（ <code class="codeph">LOCK</code> <code class="codeph">TABLE</code> ）。
                           </p>
                        </li>
                     </ul>
                     <p>以下示例使用DML查询<code class="codeph">employees</code>表。该示例使用DML向<code class="codeph">employees</code>插入行，更新此行，然后将其删除：</p><pre class="pre codeblock"><code>SELECT * FROM员工; INSERT INTO员工（employee_id，last_name，email，job_id，hire_date，salary）VALUES（1234，'Mascis'，'JMASCIS'，'IT_PROG'，'14-FEB-2008'，9000）; UPDATE员工SET薪水= 9100 WHERE employee_id = 1234; DELETE FROM employees WHERE employee_id = 1234;</code></pre><p>构成逻辑工作单元的DML语句集合称为<a href="glossary.html#GUID-212D8EA1-D704-4D7B-A72D-72001965CE45"><span class="xrefglossterm">事务</span></a> 。例如，转账的交易可能涉及三个离散的操作：减少储蓄账户余额，增加支票账户余额，并在账户历史表中记录转账。与DDL语句不同，DML语句不会隐式提交当前事务。
                     </p>
                     <div class="infoboxnotealso" id="GUID-90EA5D9B-76F2-4916-9F7E-CF0D8AA1A09D__GUID-6DC6DF13-4F20-4247-89A1-FC9985044AF9">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="sql.html#GUID-290D145D-07B9-4AF7-A91E-BCC444D21487" title="Oracle数据库以不同于DML的方式处理DDL。">DML和DDL处理之间的差异</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="transactions.html#GUID-31319EA7-994C-4D25-8814-0214ABD3CBDA" title="事务是包含一个或多个SQL语句的逻辑原子工作单元。">交易简介</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../tdddg/connecting-exploring-database.html#TDDDG20000" target="_blank"><span><cite>Oracle数据库2天开发人员指南</cite></span></a> ，了解如何查询和操作数据</p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/Types-of-SQL-Statements.html#SQLRF30042" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> ，以获取DML语句列表</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="CNCPT88903"></a><a id="CNCPT88902"></a><div class="props_rev_3"><a id="GUID-702909E1-B214-4D30-A0F9-5A4335C2BA4A" name="GUID-702909E1-B214-4D30-A0F9-5A4335C2BA4A"></a><h5 id="CNCPT-GUID-702909E1-B214-4D30-A0F9-5A4335C2BA4A" class="sect5">SELECT语句</h5>
                     <div>
                        <p><strong class="term">查询</strong>是从表或视图中检索数据的操作。
                        </p>
                        <p> <code class="codeph">SELECT</code>是唯一可用于查询数据的SQL语句。从执行<code class="codeph">SELECT</code>语句检索的数据集称为<strong class="term">结果集</strong> 。
                        </p>
                        <p>下表显示了<code class="codeph">SELECT</code>语句中常见的两个必需关键字和两个关键字。该表还将<code class="codeph">SELECT</code>语句的功能与关键字相关联。
                        </p>
                        <div class="tblformal" id="GUID-702909E1-B214-4D30-A0F9-5A4335C2BA4A__CHDEHIDI">
                           <p class="titleintable">表7-1 SQL语句中的关键字</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SQL语句中的关键字" width="100%" border="1" summary="This table lists and describes SQL keywords." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="14%" id="d36857e2922">关键词</th>
                                    <th align="left" valign="bottom" width="14%" id="d36857e2925">需要？</th>
                                    <th align="left" valign="bottom" width="58%" id="d36857e2928">描述</th>
                                    <th align="left" valign="bottom" width="14%" id="d36857e2931">能力</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="14%" id="d36857e2936" headers="d36857e2922 ">
                                       <p><code class="codeph">选择</code></p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d36857e2936 d36857e2925 ">
                                       <p>是</p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d36857e2936 d36857e2928 ">
                                       <p>指定应在结果中显示哪些列。投影生成表格中列的子集。</p>
                                       <p><a href="glossary.html#GUID-E2141FFA-A7B2-4113-BEEE-2401FC38AB2E"><span class="xrefglossterm">表达式</span></a>是解析为值的一个或多个值，运算符和SQL函数的组合。<code class="codeph">SELECT</code>关键字之后和<code class="codeph">FROM</code>子句之前出现的表达式列表称为<a href="glossary.html#GUID-71197B02-49AE-43D6-B9A2-E3887B36D823"><span class="xrefglossterm">选择列表</span></a> 。
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d36857e2936 d36857e2931 ">
                                       <p>投影</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="14%" id="d36857e2966" headers="d36857e2922 ">
                                       <p><code class="codeph">从</code></p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d36857e2966 d36857e2925 ">
                                       <p>是</p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d36857e2966 d36857e2928 ">
                                       <p>指定应从中检索数据的表或视图。</p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d36857e2966 d36857e2931 ">
                                       <p>加盟</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="14%" id="d36857e2980" headers="d36857e2922 ">
                                       <p><code class="codeph">哪里</code></p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d36857e2980 d36857e2925 ">
                                       <p>没有</p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d36857e2980 d36857e2928 ">
                                       <p>指定筛选行的条件，生成表中行的子集。条件指定一个或多个表达式和逻辑（布尔）运算符的组合，并返回值<code class="codeph">TRUE</code> ， <code class="codeph">FALSE</code>或<code class="codeph">UNKNOWN</code> 。</p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d36857e2980 d36857e2931 ">
                                       <p>选择</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="14%" id="d36857e3003" headers="d36857e2922 ">
                                       <p><code class="codeph">订购</code></p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d36857e3003 d36857e2925 ">
                                       <p>没有</p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d36857e3003 d36857e2928 ">
                                       <p>指定应显示行的顺序。</p>
                                    </td>
                                    <td align="left" valign="top" width="14%" headers="d36857e3003 d36857e2931 "> </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnotealso" id="GUID-702909E1-B214-4D30-A0F9-5A4335C2BA4A__GUID-7DB10B43-454F-4698-AB71-06E0C6489FB3">
                           <p class="notep1">也可以看看：</p>
                           <p>用于<code class="codeph">SELECT</code>语法和语义的<a href="../sqlrf/SELECT.html#SQLRF01702" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                        </div>
                     </div>
                  </div><a id="CNCPT88906"></a><a id="CNCPT88905"></a><a id="CNCPT88904"></a><div class="props_rev_3"><a id="GUID-B559E4F8-59D8-484D-91D6-481B8F2BB9F2" name="GUID-B559E4F8-59D8-484D-91D6-481B8F2BB9F2"></a><h5 id="CNCPT-GUID-B559E4F8-59D8-484D-91D6-481B8F2BB9F2" class="sect5">加盟</h5>
                     <div>
                        <p><span class="bold">联接</span>是一种组合来自两个或多个表，视图或物化视图的行的查询。
                        </p>
                        <p>以下示例连接<code class="codeph">employees</code>和<code class="codeph">departments</code>表（ <code class="codeph">FROM</code>子句），仅选择满足指定条件的行（ <code class="codeph">WHERE</code>子句），并使用projection从两列中检索数据（ <code class="codeph">SELECT</code> ）。示例输出遵循SQL语句。
                        </p><pre class="pre codeblock"><code>SELECT email，department_name FROM employees JOIN departments on ON employees.department_id = departments.department_id WHERE employee_id IN（100,103）ORDER BY email; EMAIL DEPARTMENT_NAME ------------------------- ----------------------- ------- AHUNOLD IT SKING执行官</code></pre><p>下图显示了上一个查询中显示的连接中的投影和选择操作。</p>
                        <div class="figure" id="GUID-B559E4F8-59D8-484D-91D6-481B8F2BB9F2__CHDJBIDH">
                           <p class="titleinfigure">图7-1投影和选择</p><img src="img/cncpt290.gif" alt="下面是图7-1的描述" title="下面是图7-1的描述" longdesc="img_text/cncpt290.html"><br><a href="img_text/cncpt290.html">“图7-1投影和选择”的描述</a></div>
                        <!-- class="figure" -->
                        <p>大多数联接在<code class="codeph">FROM</code>子句或<code class="codeph">WHERE</code>子句中至少有一个<a href="glossary.html#GUID-6DF529B9-611D-4C00-BAF8-614E86BCB39E"><span class="xrefglossterm">连接条件</span></a> ，它比较两个列，每个列来自不同的表。数据库组合了多对行，每行包含每个表中的一行，连接条件的计算结果为<code class="codeph">TRUE</code> 。优化程序根据表的连接条件，索引和任何可用统计信息确定数据库连接表的顺序。
                        </p>
                        <p>加入类型包括以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>内联合</p>
                              <p><a href="glossary.html#GUID-C275B9B4-5209-4DFB-86FD-2635881971F3"><span class="xrefglossterm">内连接</span></a>是两个或多个表的连接，只返回满足连接条件的行。例如，如果连接条件是<code class="codeph">employees.department_id=departments.department_id</code> ，则不返回不满足此条件的行。
                              </p>
                           </li>
                           <li>
                              <p>外连接</p>
                              <p><a href="glossary.html#GUID-61D9CE46-D3B4-4E22-81F9-5170CC2B20BD"><span class="xrefglossterm">外连接</span></a>返回满足连接条件的所有行，并返回一个表中的行，而另一个表中的行不满足条件。
                              </p>
                              <p>表<span class="italic">A</span>和<span class="italic">B</span>的<a href="glossary.html#GUID-5B6697AD-111B-4293-91EF-1BAB303534E8"><span class="xrefglossterm">左外连接</span></a>的结果始终包含左表<span class="italic">A的</span>所有记录，即使连接条件与右表<span class="italic">B</span>中的记录不匹配也是如此。如果从<span class="italic">B</span>无匹配的行存在，则<span class="italic">B</span>列包含有<span class="italic">B</span>中没有匹配的行空。例如，如果并非所有员工都在部门中，那么即使<code class="codeph">departments</code>没有行满足连接条件（ <code class="codeph">employees.department_id</code>为null）， <code class="codeph">employees</code> （左表）和<code class="codeph">departments</code> （右表）的左外连接也会检索<code class="codeph">employees</code>所有行。 。
                              </p>
                              <p>表<span class="italic">A</span>和<span class="italic">B</span>的<a href="glossary.html#GUID-6D63E1DD-4066-416C-AF21-DC6A6AF58750"><span class="xrefglossterm">右外连接</span></a>的结果包含右表<span class="italic">B的</span>所有记录，即使连接条件与左表<span class="italic">A</span>中的行不匹配也是如此。如果从<span class="italic">A</span>不匹配的行存在，那么<span class="italic">A</span>列包含有<span class="italic">在</span>无匹配的行空。例如，如果并非所有部门都有员工，则即使<code class="codeph">employees</code>行没有满足连接条件， <code class="codeph">employees</code> （左表）和<code class="codeph">departments</code> （右表）的右外连接也会检索<code class="codeph">departments</code>所有行。
                              </p>
                              <p><a href="glossary.html#GUID-3A2D0F05-0133-465B-B66D-CA3AE275EC40"><span class="xrefglossterm">完全外连接</span></a>是左外连接和右外连接的组合。
                              </p>
                           </li>
                           <li>
                              <p>笛卡尔积</p>
                              <p>如果连接查询中的两个表没有连接条件，则数据库将执行<a href="glossary.html#GUID-2FFB73C6-7BE4-489A-A1BA-D39445C136D5"><span class="xrefglossterm">笛卡尔连接</span></a> 。一个表的每一行与另一个表的每一行组合。例如，如果<code class="codeph">employees</code>有107行而<code class="codeph">departments</code>有27行，则笛卡尔积包含107 * 27行。笛卡尔积很少有用。
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-B559E4F8-59D8-484D-91D6-481B8F2BB9F2__GUID-0CFECD52-3113-47D2-8AB7-7B92290D7DFE">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../tgsql/joins.html#TGSQL242" target="_blank"><span><cite>Oracle数据库SQL调优指南</cite></span></a> ，了解联接</p>
                              </li>
                              <li>
                                 <p>有关连接的详细说明和示例，请<a href="../sqlrf/Joins.html#SQLRF30046" target="_blank"><span><cite>参见Oracle数据库SQL语言参考</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CNCPT88908"></a><a id="CNCPT88907"></a><div class="props_rev_3"><a id="GUID-65D6723C-88E2-44E3-85D1-A719BB5F075E" name="GUID-65D6723C-88E2-44E3-85D1-A719BB5F075E"></a><h5 id="CNCPT-GUID-65D6723C-88E2-44E3-85D1-A719BB5F075E" class="sect5">子查询</h5>
                     <div>
                        <p><strong class="term">子查询</strong>是嵌套在另一个SQL语句中的<code class="codeph">SELECT</code>语句。当您必须执行多个查询来解决单个问题时，子查询很有用。
                        </p>
                        <p>语句的每个查询部分称为<a href="glossary.html#GUID-53DFB7AA-B16E-421D-B592-CBF715742D93"><span class="xrefglossterm">查询块</span></a> 。在以下查询中，括号中的子查询是内部查询块：</p><pre class="pre codeblock"><code>SELECT first_name，last_name FROM employees WHERE department_id IN（SELECT department_id FROM departments WHERE location_id = 1800）;</code></pre><p>内部<code class="codeph">SELECT</code>语句检索位置ID为1800的部门的ID。外部查询块需要这些部门ID，后者检索由子查询提供ID的部门中的员工姓名。
                        </p>
                        <p>SQL语句的结构不会强制数据库首先执行内部查询。例如，数据库可以将整个查询重写为<code class="codeph">employees</code>和<code class="codeph">departments</code> ，以便子查询永远不会自行执行。另一个例子是，虚拟专用数据库（VPD）功能可以使用<code class="codeph">WHERE</code>子句限制员工的查询，以便数据库首先查询员工，然后获取部门ID。优化程序确定检索所请求行的最佳步骤序列。
                        </p>
                        <div class="infoboxnotealso" id="GUID-65D6723C-88E2-44E3-85D1-A719BB5F075E__GUID-707F00EA-9AA2-470D-A96C-78DED54C03E5">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="topics-for-database-administrators-and-developers.html#GUID-89DB0C3C-A36F-4254-8C82-020F5F6DE31F" title="Oracle虚拟专用数据库（VPD）使您可以在行和列级别强制实施安全性。">虚拟专用数据库（VPD）</a> ”</span></p>
                        </div>
                     </div>
                  </div>
               </div><a id="CNCPT1733"></a><div class="props_rev_3"><a id="GUID-73F24816-881A-4849-B8A7-EA9B446A24A7" name="GUID-73F24816-881A-4849-B8A7-EA9B446A24A7"></a><h4 id="CNCPT-GUID-73F24816-881A-4849-B8A7-EA9B446A24A7" class="sect4">交易控制声明</h4>
                  <div>
                     <p>事务控制语句管理DML语句所做的更改，并将DML语句分组到事务中。</p>
                     <p>这些语句使您能够：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>永久更改事务（ <code class="codeph">COMMIT</code> ）。
                           </p>
                        </li>
                        <li>
                           <p>自事务启动（ <code class="codeph">ROLLBACK</code> ）或自保存点（ <code class="codeph">ROLLBACK TO SAVEPOINT</code> ）以来，撤消事务中的更改。<a href="glossary.html#GUID-ED9601F2-D0A2-4FE5-83A8-8F7F9E9E0D18"><span class="xrefglossterm">保存点</span></a>是事务上下文中用户声明的中间标记。
                           </p>
                           <div class="infoboxnote" id="GUID-73F24816-881A-4849-B8A7-EA9B446A24A7__GUID-134592C7-6C54-403C-8285-A4F61F902038">
                              <p class="notep1">注意：</p>
                              <p><code class="codeph">ROLLBACK</code>语句结束事务，但<code class="codeph">ROLLBACK TO SAVEPOINT</code>不结束。
                              </p>
                           </div>
                        </li>
                        <li>
                           <p>设置可以回滚的点（ <code class="codeph">SAVEPOINT</code> ）。
                           </p>
                        </li>
                        <li>
                           <p>建立事务的属性（ <code class="codeph">SET</code> <code class="codeph">TRANSACTION</code> ）。
                           </p>
                        </li>
                        <li>
                           <p>指定是在每个DML语句之后还是在提交事务时检查可延迟<a href="glossary.html#GUID-67F8FE8C-EBA5-4796-820A-8919982A1411"><span class="xrefglossterm">完整性约束</span></a> （ <code class="codeph">SET CONSTRAINT</code> ）。
                           </p>
                        </li>
                     </ul>
                     <p>以下示例启动名为<code class="codeph">Update salaries</code>的事务。该示例创建一个保存点，更新员工薪水，然后将事务回滚到保存点。该示例将薪水更新为不同的值并进行提交。
                     </p><pre class="pre codeblock"><code>SET TRANSACTION NAME'更新薪水'; SAVEPOINT before_salary_update; UPDATE员工SET薪水= 9100 WHERE employee_id = 1234＃DML ROLLBACK TO SAVEPOINT before_salary_update; UPDATE员工SET薪水= 9200 WHERE employee_id = 1234＃DML COMMIT COMMENT'更新薪水';</code></pre><div class="infoboxnotealso" id="GUID-73F24816-881A-4849-B8A7-EA9B446A24A7__GUID-83AC045A-4F13-4C37-ACB1-93F76C164DC9">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="transactions.html#GUID-31319EA7-994C-4D25-8814-0214ABD3CBDA" title="事务是包含一个或多个SQL语句的逻辑原子工作单元。">交易简介</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="data-integrity.html#GUID-ED1E9D21-EDFB-4AAD-9193-87D576F67761" title="每个约束都处于不可延迟（默认）或可延迟状态。此状态确定Oracle数据库何时检查约束的有效性。">当数据库检查有效性的约束时</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/Types-of-SQL-Statements.html#SQLRF30043" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> ，了解事务控制语句</p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CNCPT1734"></a><div class="props_rev_3"><a id="GUID-261BEAAC-0897-465D-9137-D201CE80675C" name="GUID-261BEAAC-0897-465D-9137-D201CE80675C"></a><h4 id="CNCPT-GUID-261BEAAC-0897-465D-9137-D201CE80675C" class="sect4">会话控制语句</h4>
                  <div>
                     <p>会话控制语句动态管理用户<span class="bold">会话</span>的属性。
                     </p>
                     <p>会话是数据库实例内存中的逻辑实体，表示当前用户登录数据库的状态。会话从用户通过数据库进行身份验证到用户断开连接或退出数据库应用程序为止。</p>
                     <p>会话控制语句使您能够：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>通过执行专门的功能来更改当前会话，例如设置默认日期格式（ <code class="codeph">ALTER SESSION</code> ）。
                           </p>
                        </li>
                        <li>
                           <p>为当前会话启用和禁用角色（权限组）（ <code class="codeph">SET ROLE</code> ）。
                           </p>
                        </li>
                     </ul>
                     <p>以下语句将会话的默认日期格式动态更改为<code class="codeph">'YYYY MM DD-HH24:MI:SS'</code> ：</p><pre class="pre codeblock"><code>ALTER SESSION SET NLS_DATE_FORMAT ='YYYY MM DD HH24：MI：SS';</code></pre><p>会话控制语句不会隐式提交当前事务。</p>
                     <div class="infoboxnotealso" id="GUID-261BEAAC-0897-465D-9137-D201CE80675C__GUID-DCE5F7C6-5EA5-41F9-A54D-BFC9C614EA3A">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="process-architecture.html#GUID-3A11FF2F-50EE-4839-A1A6-F746DFF634AB" title="数据库连接是客户端进程和数据库实例之间的物理通信路径。">连接和会话</a> ”</span></p>
                           </li>
                           <li>
                              <p><code class="codeph">ALTER SESSION</code>语法和语义的<a href="../sqlrf/Types-of-SQL-Statements.html#SQLRF30044" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CNCPT1735"></a><div class="props_rev_3"><a id="GUID-9D63E5DD-E0EF-42AE-B460-74165BB016F3" name="GUID-9D63E5DD-E0EF-42AE-B460-74165BB016F3"></a><h4 id="CNCPT-GUID-9D63E5DD-E0EF-42AE-B460-74165BB016F3" class="sect4">系统控制声明</h4>
                  <div>
                     <p>系统控制语句更改<span class="bold">数据库实例</span>的属性。
                     </p>
                     <p>唯一的系统控制语句是<code class="codeph">ALTER SYSTEM</code> 。它使您可以更改共享服务器的最小数量，终止会话以及执行其他系统级任务等设置。
                     </p>
                     <p>系统控制语句的示例包括：</p><pre class="pre codeblock"><code>ALTER SYSTEM SWITCH LOGFILE; ALTER SYSTEM KILL SESSION '39,23';</code></pre><p><code class="codeph">ALTER SYSTEM</code>语句不会隐式提交当前事务。
                     </p>
                     <div class="infoboxnotealso" id="GUID-9D63E5DD-E0EF-42AE-B460-74165BB016F3__GUID-4A39BB6F-B10D-4DB1-87DF-AF6FB43420DE">
                        <p class="notep1">也可以看看：</p>
                        <p>用于<code class="codeph">ALTER SYSTEM</code>语法和语义的<a href="../sqlrf/ALTER-SYSTEM.html#SQLRF00902" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></p>
                     </div>
                  </div>
               </div><a id="CNCPT1736"></a><div class="props_rev_3"><a id="GUID-AE8D7440-ED46-4FE8-9475-F3D0AD2E19CF" name="GUID-AE8D7440-ED46-4FE8-9475-F3D0AD2E19CF"></a><h4 id="CNCPT-GUID-AE8D7440-ED46-4FE8-9475-F3D0AD2E19CF" class="sect4">嵌入式SQL语句</h4>
                  <div>
                     <p>嵌入式SQL语句在过程语言程序中包含DDL，DML和事务控制语句。 。</p>
                     <p>嵌入式语句与Oracle预编译器一起使用。嵌入式SQL是将SQL合并到过程语言应用程序中的一种方法。另一种方法是使用过程API，例如开放式数据库连接（ODBC）或Java数据库连接（JDBC）。</p>
                     <p>嵌入式SQL语句使您能够：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>定义，分配和释放<a href="glossary.html#GUID-D1D3E8DD-CD5C-4C0D-93E4-DE0BF0BD53A3"><span class="xrefglossterm">游标</span></a> （ <code class="codeph">DECLARE CURSOR</code> ， <code class="codeph">OPEN</code> ， <code class="codeph">CLOSE</code> ）。
                           </p>
                        </li>
                        <li>
                           <p>指定数据库并连接到它（ <code class="codeph">DECLARE DATABASE</code> ， <code class="codeph">CONNECT</code> ）。
                           </p>
                        </li>
                        <li>
                           <p>分配变量名称（ <code class="codeph">DECLARE STATEMENT</code> ）。
                           </p>
                        </li>
                        <li>
                           <p>初始化描述符（ <code class="codeph">DESCRIBE</code> ）。
                           </p>
                        </li>
                        <li>
                           <p>指定如何处理错误和警告条件（ <code class="codeph">WHENEVER</code> ）。
                           </p>
                        </li>
                        <li>
                           <p>解析并运行SQL语句（ <code class="codeph">PREPARE</code> ， <code class="codeph">EXECUTE</code> ， <code class="codeph">EXECUTE IMMEDIATE</code> ）。
                           </p>
                        </li>
                        <li>
                           <p>从数据库中检索数据（ <code class="codeph">FETCH</code> ）。
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-AE8D7440-ED46-4FE8-9475-F3D0AD2E19CF__GUID-09747208-7418-413B-911D-62D88C600054">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="server-side-programming.html#GUID-6B5D98B7-A25D-4187-B3A9-43629E214635" title="在诸如SQL的非过程语言中，指定要操作的数据集，但不指定要执行的操作或它们的执行方式。">服务器端编程简介</a> ”</span>和<span class="q">“ <a href="concepts-for-database-developers.html#GUID-73D7F3B6-47B7-400B-8F3C-BE904400C0FC" title="今天大多数开发人员使用API将SQL嵌入其数据库应用程序中。">客户端API</a> ”</span></p>
                     </div>
                  </div>
               </div>
            </div><a id="CNCPT316"></a><div class="props_rev_3"><a id="GUID-3F42B1AA-530A-4144-8179-F0074832AF81" name="GUID-3F42B1AA-530A-4144-8179-F0074832AF81"></a><h3 id="CNCPT-GUID-3F42B1AA-530A-4144-8179-F0074832AF81" class="sect3">优化程序概述</h3>
               <div>
                  <p>要了解Oracle数据库如何处理SQL语句，有必要了解数据库中称为<span class="bold">优化器</span>的部分（也称为<span class="italic">查询优化器</span>或<span class="italic">基于成本的优化器</span> ）。所有SQL语句都使用优化器来确定访问指定数据的最有效方法。
                  </p>
               </div><a id="CNCPT88909"></a><div class="props_rev_3"><a id="GUID-1A976BB4-C96D-4CC2-9026-4DA819CAEE62" name="GUID-1A976BB4-C96D-4CC2-9026-4DA819CAEE62"></a><h4 id="CNCPT-GUID-1A976BB4-C96D-4CC2-9026-4DA819CAEE62" class="sect4">使用优化程序</h4>
                  <div>
                     <p>优化器生成描述可能的执行方法的执行计划。</p>
                     <p>优化器通过考虑多个信息源来确定哪个执行计划最有效。例如，优化程序会考虑查询条件，可用访问路径，为系统收集的统计信息以及提示。</p>
                     <p>要执行DML语句，Oracle数据库可能必须执行许多步骤。每个步骤都从数据库中物理地检索数据行，或者为发出语句的用户准备它们。数据库用于执行语句的步骤会极大地影响语句的运行速度。通常可以使用许多不同的方法来处理DML语句。例如，访问表或索引的顺序可能会有所不同。</p>
                     <p>在确定SQL语句的最佳执行计划时，优化程序将执行以下操作：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>评估表达和条件</p>
                        </li>
                        <li>
                           <p>检查完整性约束以了解有关数据的更多信息并基于此元数据进行优化</p>
                        </li>
                        <li>
                           <p>声明转换</p>
                        </li>
                        <li>
                           <p>选择优化器目标</p>
                        </li>
                        <li>
                           <p>选择访问路径</p>
                        </li>
                        <li>
                           <p>选择加入订单</p>
                        </li>
                     </ul>
                     <p>优化程序生成处理查询的大多数可能方法，并为生成的执行计划中的每个步骤分配成本。选择成本最低的<a href="glossary.html#GUID-78BCF1CD-1865-4AEB-8F14-AFA4FF1981BF"><span class="xrefglossterm">计划</span></a>作为要执行的<a href="glossary.html#GUID-78BCF1CD-1865-4AEB-8F14-AFA4FF1981BF"><span class="xrefglossterm">查询计划</span></a> 。
                     </p>
                     <div class="infoboxnote" id="GUID-1A976BB4-C96D-4CC2-9026-4DA819CAEE62__GUID-26400181-901F-4187-A58F-489DE2BA41F4">
                        <p class="notep1">注意：</p>
                        <p>您可以在不执行计划的情况下获取SQL语句的执行计划。只有数据库实际用于执行查询的执行计划才能正确地称为查询计划。</p>
                     </div>
                     <p>您可以通过设置优化程序目标和收集优化程序的代表性统计信息来影响优化程序选择。例如，您可以将优化程序目标设置为以下任一项：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>总吞吐量</p>
                           <p><code class="codeph">ALL_ROWS</code>提示指示优化器尽可能快地将结果的最后一行提供给客户端应用程序。
                           </p>
                        </li>
                        <li>
                           <p>初始响应时间</p>
                           <p><code class="codeph">FIRST_ROWS</code>提示指示优化器尽快将第一行送到客户端。
                           </p>
                        </li>
                     </ul>
                     <p>典型的最终用户交互式应用程序将受益于初始响应时间优化，而批处理模式，非交互式应用程序将受益于总吞吐量优化。</p>
                     <div class="infoboxnotealso" id="GUID-1A976BB4-C96D-4CC2-9026-4DA819CAEE62__GUID-2DB9971D-58E4-48BC-B1A4-611092C57ED7">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关使用<code class="codeph">DBMS_STATS</code>信息<a href="../arpls/DBMS_STATS.html#ARPLS059" target="_blank"><span><cite>，请参见Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                           </li>
                           <li>
                              <p>有关优化程序和使用提示的详细信息，请<a href="../tgsql/query-optimizer-concepts.html#TGSQL202" target="_blank"><span><cite>参见“Oracle数据库SQL调优指南”</cite></span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CNCPT88911"></a><a id="CNCPT88910"></a><div class="props_rev_3"><a id="GUID-D4940716-5F75-43CD-B8B4-45E6BCE5F8EF" name="GUID-D4940716-5F75-43CD-B8B4-45E6BCE5F8EF"></a><h4 id="CNCPT-GUID-D4940716-5F75-43CD-B8B4-45E6BCE5F8EF" class="sect4">优化器组件</h4>
                  <div>
                     <p>优化器包含三个主要组件：变换器，估计器和计划生成器。</p>
                     <p>下图描绘了组件：</p>
                     <div class="figure" id="GUID-D4940716-5F75-43CD-B8B4-45E6BCE5F8EF__CHDCCIDA">
                        <p class="titleinfigure">图7-2优化器组件</p><img src="img/cncpt287.gif" alt="下面是图7-2的描述" title="下面是图7-2的描述" longdesc="img_text/cncpt287.html"><br><a href="img_text/cncpt287.html">“图7-2优化器组件”的说明</a></div>
                     <!-- class="figure" -->
                     <p>优化程序的输入是已解析的查询。优化器执行以下操作：</p>
                     <ol>
                        <li>
                           <p>优化器接收已解析的查询，并根据可用的访问路径和提示为SQL语句生成一组潜在计划。</p>
                        </li>
                        <li>
                           <p>优化程序根据数据字典中的统计信息估算每个计划的成本。成本是与执行特定计划的声明所需的预期资源使用成比例的估计值。</p>
                        </li>
                        <li>
                           <p>优化程序比较计划的成本，并选择最低成本计划（称为查询计划）传递给行源生成器。</p>
                        </li>
                     </ol>
                     <div class="infoboxnotealso" id="GUID-D4940716-5F75-43CD-B8B4-45E6BCE5F8EF__GUID-01D9BB3C-683B-419E-BFC8-D0D870035EF9">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="sql.html#GUID-B3F2B5B8-B679-4A7C-B1E8-286F36319FCB" title="SQL处理的第一个阶段是SQL解析。此阶段涉及将SQL语句的各个部分分离为可由其他例程处理的数据结构。">SQL解析</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="sql.html#GUID-A8B73B3C-991F-4E91-8AA5-DEFBDFAB0539" title="行源生成器是从优化器接收最佳执行计划并生成称为查询计划的迭代计划的软件，该计划可由数据库的其余部分使用。">SQL行源生成</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="CNCPT88912"></a><div class="props_rev_3"><a id="GUID-997A8B5E-CC07-4866-A37C-8F317ECE9359" name="GUID-997A8B5E-CC07-4866-A37C-8F317ECE9359"></a><h5 id="CNCPT-GUID-997A8B5E-CC07-4866-A37C-8F317ECE9359" class="sect5">查询变换器</h5>
                     <div>
                        <p><span class="bold">查询转换器</span>确定更改查询形式是否有帮助，以便优化程序可以生成更好的执行计划。查询转换器的输入是已解析的查询，优化程序将其表示为一组查询块。
                        </p>
                        <div class="infoboxnotealso" id="GUID-997A8B5E-CC07-4866-A37C-8F317ECE9359__GUID-B88FA5C3-E251-4FF1-9D9F-889D1C9BAA3B">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="partitions-views-and-other-schema-objects.html#GUID-C2F8D519-A8E9-4793-A053-36B4C4060B62" title="称为查询重写的优化技术将根据主表写入的用户请求转换为包含物化视图的语义等效请求。">查询重写</a> ”</span></p>
                        </div>
                     </div>
                  </div><a id="CNCPT88913"></a><div class="props_rev_3"><a id="GUID-D7FD285E-2629-4BC9-AC01-BF900A2E0F1E" name="GUID-D7FD285E-2629-4BC9-AC01-BF900A2E0F1E"></a><h5 id="CNCPT-GUID-D7FD285E-2629-4BC9-AC01-BF900A2E0F1E" class="sect5">估计</h5>
                     <div>
                        <p><span class="bold">估算器</span>确定给定执行计划的总成本。
                        </p>
                        <p>估算器生成三种不同类型的度量来实现此目标：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>选择性</p>
                              <p>此度量表示行集中的一小部分行。选择性与查询谓词相关联，例如<code class="codeph">last_name='Smith'</code>或谓词组合。
                              </p>
                           </li>
                           <li>
                              <p>基数</p>
                              <p>此度量表示行集中的行数。</p>
                           </li>
                           <li>
                              <p>成本</p>
                              <p>该度量表示使用的工作单元或资源。查询优化器使用磁盘I / O，CPU使用率和内存使用量作为工作单元。</p>
                           </li>
                        </ul>
                        <p>如果统计数据可用，则估算器使用它们来计算度量。统计数据提高了措施的准确程度。</p>
                     </div>
                  </div><a id="CNCPT1755"></a><div class="props_rev_3"><a id="GUID-86607CB6-6E48-42BB-9FDF-197318607286" name="GUID-86607CB6-6E48-42BB-9FDF-197318607286"></a><h5 id="CNCPT-GUID-86607CB6-6E48-42BB-9FDF-197318607286" class="sect5">计划生成器</h5>
                     <div>
                        <p><span class="bold">计划生成器</span>为提交的查询尝试不同的计划。优化程序选择成本最低的计划。
                        </p>
                        <p>对于每个嵌套子查询和未合并视图，优化程序都会生成子计划。优化器将每个子计划表示为单独的<a href="glossary.html#GUID-53DFB7AA-B16E-421D-B592-CBF715742D93"><span class="xrefglossterm">查询块</span></a> 。计划生成器通过尝试不同的访问路径，连接方法和连接顺序来探索查询块的各种计划。
                        </p>
                        <p><a href="glossary.html#GUID-687D126F-F8FD-4308-B95B-7D4B2D5406FC"><span class="xrefglossterm">自适应查询优化</span></a>功能根据语句执行期间收集的统计信息更改计划。所有自适应机制都可以执行与默认计划不同的语句的最终计划。自适应优化使用动态计划，在计划执行期间选择子计划，或重新优化，在当前执行后更改执行计划。
                        </p>
                        <div class="infoboxnotealso" id="GUID-86607CB6-6E48-42BB-9FDF-197318607286__GUID-FE4348D9-367D-4CEE-B54E-07B887AB6FDF">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="concepts-for-database-administrators.html#GUID-6AF46C02-62A0-4302-A981-8A10EDF7F966" title="Oracle数据库完全自动化SQL调优过程。">应用程序和SQL调优</a> ”</span></p>
                              </li>
                              <li>
                                 <p><a href="../tgsql/query-optimizer-concepts.html#TGSQL202" target="_blank"><span><cite>Oracle数据库SQL调优指南</cite></span></a> ，了解优化器组件和自适应优化</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="CNCPT88914"></a><div class="props_rev_3"><a id="GUID-4B6624DA-92BA-48C2-B045-D8B71046E81B" name="GUID-4B6624DA-92BA-48C2-B045-D8B71046E81B"></a><h4 id="CNCPT-GUID-4B6624DA-92BA-48C2-B045-D8B71046E81B" class="sect4">访问路径</h4>
                  <div>
                     <p><span class="bold">访问路径</span>是查询用于检索行的技术。
                     </p>
                     <p>例如，使用索引的查询与不查询的查询具有不同的访问路径。通常，索引访问路径最适用于检索表行的一小部分子句的语句。完全扫描对于访问表的大部分更有效。</p>
                     <p>数据库可以使用多个不同的访问路径来从表中检索数据。以下是代表性清单：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>全表扫描</p>
                           <p>此类扫描会从表中读取所有行，并筛选出不符合选择条件的行。数据库按顺序扫描段中的所有数据块，包括<a href="glossary.html#GUID-F3F5ACB2-94C8-483F-B427-1981836D0609"><span class="xrefglossterm">高水位线（HWM）下</span></a>用于分隔旧<span class="q"><a href="logical-storage-structures.html#GUID-5050DCC5-DBBD-4B57-AB14-D83A480B9AAE" title="To manage space, Oracle Database tracks the state of blocks in the segment. The high water mark (HWM) is the point in a segment beyond which data blocks are unformatted and have never been used.">空间和</a></span>未使用空间的数据块（参见<span class="q">“ <a href="logical-storage-structures.html#GUID-5050DCC5-DBBD-4B57-AB14-D83A480B9AAE" title="为了管理空间，Oracle数据库跟踪段中的块状态。高水位线（HWM）是段中的一个点，超出该段的数据块未被格式化并且从未使用过。">段空间和高水位线</a> ”</span> ）。
                           </p>
                        </li>
                        <li>
                           <p>Rowid扫描</p>
                           <p>行的<a href="glossary.html#GUID-647822F1-EFF1-4E26-BE22-D54081BE1C7B"><span class="xrefglossterm">rowid</span></a>指定包含该行的数据文件和数据块以及该块中行的位置。数据库首先从语句<code class="codeph">WHERE</code>子句或通过索引扫描获取所选行的rowid，然后根据其rowid查找每个选定的行。
                           </p>
                        </li>
                        <li>
                           <p>索引扫描</p>
                           <p>此扫描在索引中搜索SQL语句访问的索引列值（请参阅<span class="q">“ <a href="indexes-and-index-organized-tables.html#GUID-D54BD14D-0065-4B61-B2F6-5567913B16CD" title="在索引扫描中，数据库使用语句指定的索引列值通过遍历索引来检索行。如果数据库扫描索引中的值，则它将在n个I / O中找到该值，其中n是B树索引的高度。这是Oracle数据库索引背后的基本原则。">索引扫描</a> ”</span> ）。如果语句仅访问索引的列，则Oracle数据库直接从索引读取索引的列值。
                           </p>
                        </li>
                        <li>
                           <p>群集扫描</p>
                           <p>群集扫描从存储在索引<a href="glossary.html#GUID-1C56177E-6BEE-4FE7-B45E-38298CDB946D"><span class="xrefglossterm">表群集中</span></a>的表中检索数据，其中具有相同群集键值的所有行都存储在同一数据块中（请参阅<span class="q">“ <a href="tables-and-table-clusters.html#GUID-CC31365B-83B0-4E09-A047-BF1B79AC887A" title="索引集群是一个表集群，它使用索引来定位数据。群集索引是群集密钥上的B树索引。必须先创建集群索引，然后才能将任何行插入到集群表中。">索引群集概述</a> ”</span> ）。数据库首先通过扫描集群索引获取所选行的rowid。Oracle数据库根据此rowid查找行。
                           </p>
                        </li>
                        <li>
                           <p>哈希扫描</p>
                           <p>哈希扫描定位散列集群中的行，其中具有相同散列值的所有行都存储在同一数据块中（请参阅<span class="q">“ <a href="tables-and-table-clusters.html#GUID-22771373-D8B8-4A76-9F08-1567489269BB" title="散列集群就像一个索引集群，除了索引键被散列函数替换。不存在单独的集群索引。在散列簇中，数据是索引。">散列集群概述</a> ”</span> ）。数据库首先通过将<a href="glossary.html#GUID-DDDDC4BC-ADB8-40D7-9733-60CED8E4A83E"><span class="xrefglossterm">哈希函数</span></a>应用于由语句指定的集群键值来获取哈希值。然后，Oracle数据库扫描包含具有此哈希值的行的数据块。
                           </p>
                        </li>
                     </ul>
                     <p>优化程序根据语句的可用访问路径以及使用每个访问路径或路径组合的估计成本来选择访问路径。</p>
                     <div class="infoboxnotealso" id="GUID-4B6624DA-92BA-48C2-B045-D8B71046E81B__GUID-01FB569D-937C-46F7-B818-47702749FFD7">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../tdppt/optimizing-data-access-paths.html#TDPPT170" target="_blank"><span><cite>“Oracle数据库2天+性能调优指南”</cite></span></a>和“ <a href="../tgsql/optimizer-access-paths.html#TGSQL228" target="_blank"><span><cite>Oracle数据库SQL调优指南”</cite></span></a>了解访问路径</p>
                     </div>
                  </div>
               </div><a id="CNCPT88915"></a><div class="props_rev_3"><a id="GUID-5F4A2BE8-BC42-4734-B1F1-4C3BD57DAB6F" name="GUID-5F4A2BE8-BC42-4734-B1F1-4C3BD57DAB6F"></a><h4 id="CNCPT-GUID-5F4A2BE8-BC42-4734-B1F1-4C3BD57DAB6F" class="sect4">优化器统计</h4>
                  <div>
                     <p><span class="bold">优化程序统计信息</span>是一组数据，用于描述有关数据库和数据库中对象的详细信息。统计数据提供了在评估访问路径时优化程序可用的统计正确的数据存储和分发图。
                     </p>
                     <p>优化器统计信息包括以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>表统计</p>
                           <p>这些包括行数，块数和平均行长度。</p>
                        </li>
                        <li>
                           <p>列统计</p>
                           <p>这些包括列中的不同值和空值的数量以及数据的分布。</p>
                        </li>
                        <li>
                           <p>指数统计</p>
                           <p>这些包括叶块数和索引级别。</p>
                        </li>
                        <li>
                           <p>系统统计</p>
                           <p>这些包括CPU和I / O性能和利用率。</p>
                        </li>
                     </ul>
                     <p>Oracle数据库自动收集所有数据库对象的优化程序统计信息，并将这些统计信息维护为自动维护任务。您还可以使用<code class="codeph">DBMS_STATS</code>包手动收集统计信息。此PL / SQL包可以修改，查看，导出，导入和删除统计信息。
                     </p>
                     <div class="infoboxnote" id="GUID-5F4A2BE8-BC42-4734-B1F1-4C3BD57DAB6F__GUID-16C7F90C-3A71-467E-94D4-4104B7A8F74A">
                        <p class="notep1">注意：</p>优化程序统计信息是为了查询优化而创建的，并存储在数据字典中。不要将这些统计信息与通过动态性能视图可见的性能统计信息混淆
                     </div>
                     <p>Optimizer Statistics Advisor是内置的诊断软件，可分析您当前收集统计信息的方式，现有统计信息收集作业的有效性以及收集的统计信息的质量。Optimizer Statistics Advisor维护规则，这些规则体现了基于当前功能集的Oracle最佳实践。通过这种方式，顾问始终提供最新的统计信息收集建议。</p>
                     <div class="infoboxnotealso" id="GUID-5F4A2BE8-BC42-4734-B1F1-4C3BD57DAB6F__GUID-9740CC88-E483-472F-BA8D-92ADB96E5254">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="../tdppt/oracle-database-performance-method.html#TDPPT007" target="_blank"><span><cite>“Oracle数据库2天+性能调优指南”</cite></span></a>和“ <a href="../tgsql/gathering-optimizer-statistics.html#TGSQL389" target="_blank"><span><cite>Oracle数据库SQL调优指南”</cite></span></a> ，了解如何收集和管理统计信息</p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_STATS.html#ARPLS059" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考，</cite></span></a>以了解<code class="codeph">DBMS_STATS</code></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CNCPT88917"></a><a id="CNCPT88918"></a><a id="CNCPT88916"></a><div class="props_rev_3"><a id="GUID-FC019793-FC08-46DB-A74C-8BF6C60ACECB" name="GUID-FC019793-FC08-46DB-A74C-8BF6C60ACECB"></a><h4 id="CNCPT-GUID-FC019793-FC08-46DB-A74C-8BF6C60ACECB" class="sect4">优化器提示</h4>
                  <div>
                     <p><span class="bold">提示</span>是SQL语句中的注释，它充当优化器的指令。
                     </p>
                     <p>有时，应用程序设计人员可以选择更有效的方式来运行SQL语句，该应用程序设计人员拥有有关特定应用程序数据的更多信息，而不是优化程序可用的数据。应用程序设计人员可以使用SQL语句中的提示来指定语句的运行方式。以下示例说明了提示的使用。</p>
                     <div class="example" id="GUID-FC019793-FC08-46DB-A74C-8BF6C60ACECB__CHDBEDFI">
                        <p class="titleinexample">示例7-2使用FIRST_ROWS提示的SELECT执行计划</p>
                        <p>假设您的交互式应用程序运行一个返回50行的查询。此应用程序最初仅提取查询的前25行以呈现给最终用户。您希望优化器生成一个计划，以便尽快获取前25条记录，以便用户不必等待。您可以使用提示将此指令传递给优化程序，如以下示例中的<code class="codeph">SELECT</code>语句和<code class="codeph">AUTOTRACE</code>输出所示：</p><pre class="oac_no_warn" dir="ltr">SELECT / * + FIRST_ROWS（25）* / employee_id，department_id FROM hr.employees WHERE department_id&gt; 50; -------------------------------------------------- ---------------------- | Id |操作|名称|行|字节------------------------------------------------- ----------------------- | 0 |选择声明| | 26 | 182 | 1 |按INDEX ROWID表的访问权限|员工| 26 | 182 | * 2 | INDEX RANGE SCAN | EMP_DEPARTMENT_IX | | -------------------------------------------------- ----------------------</pre><p>在此示例中，执行计划显示优化程序在<code class="codeph">employees.department_id</code>列上选择索引，以查找部门ID超过50的前25行<code class="codeph">employees</code> 。优化程序使用从索引检索到的rowid从<code class="codeph">employees</code>表中检索记录并将其返回给客户端。检索第一条记录通常几乎是即时的。
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-FC019793-FC08-46DB-A74C-8BF6C60ACECB__CHDEJCCJ">
                        <p class="titleinexample">示例7-3没有提示的SELECT的执行计划</p>
                        <p>假设您执行相同的语句，但没有优化器提示：</p><pre class="oac_no_warn" dir="ltr">SELECT employee_id，department_id FROM hr.employees WHERE department_id&gt; 50; -------------------------------------------------- ---------------------- | Id |操作|名称|行|字节| Cos ------------------------------------------------- ----------------------- | 0 |选择声明| | 50 | 350 | | * 1 |查看| index $ _join $ _001 | 50 | 350 | | * 2 | HASH JOIN | | | | | * 3 | INDEX RANGE SCAN | EMP_DEPARTMENT_IX | 50 | 350 | | 4 | INDEX FAST FULL SCAN | EMP_EMP_ID_PK | 50 | 350 |</pre><p>在这种情况下，执行计划连接两个索引以尽快返回请求的记录。优化器选择<code class="codeph">EMP_DEPARTMENT_IX</code>的范围扫描来查找部门ID超过50的所有行，并将这些行放在<a href="glossary.html#GUID-1EBD10A8-7E0A-45B9-94CB-0859F4773082"><span class="xrefglossterm">哈希表中，</span></a>而不是像<a href="sql.html#GUID-FC019793-FC08-46DB-A74C-8BF6C60ACECB__CHDBEDFI">例7-2</a>那样重复从索引到<a href="glossary.html#GUID-1EBD10A8-7E0A-45B9-94CB-0859F4773082"><span class="xrefglossterm">表</span></a> 。然后，优化器选择读取<code class="codeph">EMP_EMP_ID_PK</code>索引。对于此索引中的每一行，它会探测哈希表以查找部门ID。</p>
                        <p>在这种情况下，在<code class="codeph">EMP_DEPARTMENT_IX</code>的索引范围扫描完成之前，数据库无法将第一行返回给客户端。因此，这个生成的计划将需要更长的时间来返回第一条记录。与<a href="sql.html#GUID-FC019793-FC08-46DB-A74C-8BF6C60ACECB__CHDBEDFI">示例7-2</a>中通过索引rowid访问表的计划不同，该计划使用多块I / O，导致大量读取。读取使得整个结果集的最后一行能够更快地返回。
                        </p>
                        <div class="infoboxnotealso" id="GUID-FC019793-FC08-46DB-A74C-8BF6C60ACECB__GUID-7E894752-890E-4D0A-A179-68D2D98B48A7">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../tgsql/influencing-the-optimizer.html#TGSQL260" target="_blank"><span><cite>Oracle数据库SQL调优指南</cite></span></a> ，了解如何使用优化程序提示</p>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="CNCPT216"></a><div class="props_rev_3"><a id="GUID-0E8DFE97-F2DD-4183-8A4B-1EA9087E9E37" name="GUID-0E8DFE97-F2DD-4183-8A4B-1EA9087E9E37"></a><h3 id="CNCPT-GUID-0E8DFE97-F2DD-4183-8A4B-1EA9087E9E37" class="sect3">SQL处理概述</h3>
               <div>
                  <p>本节介绍Oracle数据库如何处理SQL语句。具体来说，该部分介绍了数据库处理DDL语句以创建对象的方式，DML用于修改数据的方式以及用于检索数据的查询。</p>
               </div><a id="CNCPT88919"></a><a id="CNCPT1741"></a><div class="props_rev_3"><a id="GUID-1B95E60C-99C5-446D-9C6B-5D16EFE59ACF" name="GUID-1B95E60C-99C5-446D-9C6B-5D16EFE59ACF"></a><h4 id="CNCPT-GUID-1B95E60C-99C5-446D-9C6B-5D16EFE59ACF" class="sect4">SQL处理的阶段</h4>
                  <div>
                     <p>SQL处理的一般阶段是解析，优化，行源生成和执行。根据语句，数据库可能会省略其中一些步骤。</p>
                     <p>下图描绘了一般阶段：</p>
                     <div class="figure" id="GUID-1B95E60C-99C5-446D-9C6B-5D16EFE59ACF__CHDBEDJC">
                        <p class="titleinfigure">图7-3 SQL处理的阶段</p><img src="img/cncpt250.gif" alt="下面是图7-3的描述" title="下面是图7-3的描述" longdesc="img_text/cncpt250.html"><br><a href="img_text/cncpt250.html">“图7-3 SQL处理阶段”的说明</a></div>
                     <!-- class="figure" -->
                  </div><a id="CNCPT1740"></a><div class="props_rev_3"><a id="GUID-B3F2B5B8-B679-4A7C-B1E8-286F36319FCB" name="GUID-B3F2B5B8-B679-4A7C-B1E8-286F36319FCB"></a><h5 id="CNCPT-GUID-B3F2B5B8-B679-4A7C-B1E8-286F36319FCB" class="sect5">SQL解析</h5>
                     <div>
                        <p>SQL处理的第一个阶段是<span class="bold">SQL解析</span> 。此阶段涉及将SQL语句的各个部分分离为可由其他例程处理的数据结构。
                        </p>
                        <p>当应用程序发出SQL语句时，应用程序会对数据库进行解析调用以准备要执行的语句。解析调用将打开或创建一个<a href="glossary.html#GUID-D1D3E8DD-CD5C-4C0D-93E4-DE0BF0BD53A3"><span class="xrefglossterm">游标</span></a> ，该<a href="glossary.html#GUID-D1D3E8DD-CD5C-4C0D-93E4-DE0BF0BD53A3"><span class="xrefglossterm">游标</span></a>是特定于会话的<a href="glossary.html#GUID-4B296BAF-BAC8-4DE7-8128-464F4BA3C366"><span class="xrefglossterm">私有SQL区域</span></a>的句柄，该<a href="glossary.html#GUID-4B296BAF-BAC8-4DE7-8128-464F4BA3C366"><span class="xrefglossterm">区域</span></a>包含已解析的SQL语句和其他处理信息。光标和私有SQL区域位于<a href="glossary.html#GUID-19927E75-4983-4D59-A03D-C630E9908897"><span class="xrefglossterm">PGA中</span></a> 。</p>
                        <p>在解析调用期间，数据库执行以下检查：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>语法检查</p>
                           </li>
                           <li>
                              <p>语义检查</p>
                           </li>
                           <li>
                              <p>共享池检查</p>
                           </li>
                        </ul>
                        <p>上述检查标识了<span class="italic">在语句执行之前</span>可以找到的错误。解析时无法捕获一些错误。例如，数据库只能在语句执行期间遇到数据转换中的<a href="glossary.html#GUID-E33D1853-7F99-4FDD-9CC7-D6308E943D61"><span class="xrefglossterm">死锁</span></a>或错误。
                        </p>
                        <div class="infoboxnotealso" id="GUID-B3F2B5B8-B679-4A7C-B1E8-286F36319FCB__GUID-63FA5FB5-B7CA-42F1-AC89-AE0757F648CC">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="data-concurrency-and-consistency.html#GUID-C1971E9B-849A-4634-9575-4F8FAD697750" title="死锁是指两个或更多用户正在等待彼此锁定的数据的情况。死锁会阻止某些事务继续工作。">锁和死锁</a> ”</span></p>
                        </div>
                     </div>
                  </div><a id="CNCPT88924"></a><div class="props_rev_3"><a id="GUID-69CB14DE-1BA4-43DE-86F3-34CE835BD622" name="GUID-69CB14DE-1BA4-43DE-86F3-34CE835BD622"></a><h5 id="CNCPT-GUID-69CB14DE-1BA4-43DE-86F3-34CE835BD622" class="sect5">SQL优化</h5>
                     <div>
                        <p><strong class="term">查询优化</strong>是选择执行SQL语句的最有效方法的过程。
                        </p>
                        <p>数据库根据收集的有关正在访问的实际数据的统计信息来优化查询。优化程序使用行数，数据集大小和其他因素来生成可能的执行计划，为每个计划分配数字成本。数据库使用成本最低的计划。</p>
                        <p>对于每个唯一的DML语句，数据库必须至少执行一次硬解析，并在此解析期间执行优化。DDL永远不会被优化，除非它包含DML组件，例如需要优化的子查询。</p>
                        <div class="infoboxnotealso" id="GUID-69CB14DE-1BA4-43DE-86F3-34CE835BD622__GUID-37DA6769-BD59-46E9-AD71-4F38ECAED06C">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="sql.html#GUID-3F42B1AA-530A-4144-8179-F0074832AF81" title="要了解Oracle数据库如何处理SQL语句，有必要了解数据库中称为优化器的部分（也称为查询优化器或基于成本的优化器）。所有SQL语句都使用优化器来确定访问指定数据的最有效方法。">优化器概述</a> ”</span></p>
                              </li>
                              <li>
                                 <p>有关查询优化器的详细信息，请<a href="../tgsql/query-optimizer-concepts.html#TGSQL193" target="_blank"><span><cite>参见“Oracle数据库SQL调优指南”</cite></span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CNCPT88925"></a><div class="props_rev_3"><a id="GUID-A8B73B3C-991F-4E91-8AA5-DEFBDFAB0539" name="GUID-A8B73B3C-991F-4E91-8AA5-DEFBDFAB0539"></a><h5 id="CNCPT-GUID-A8B73B3C-991F-4E91-8AA5-DEFBDFAB0539" class="sect5">SQL行源生成</h5>
                     <div>
                        <p><span class="bold">行源生成器</span>是从优化器接收最佳执行计划并生成称为<span class="bold">查询计划</span>的迭代计划的软件，该<span class="bold">计划</span>可由数据库的其余部分使用。
                        </p>
                        <p>查询计划采用步骤组合的形式。每个步骤都返回一个<a href="glossary.html#GUID-C23DF6EB-4BE3-46E7-98B5-E3DCA2E01E4A"><span class="xrefglossterm">行集</span></a> 。此集合中的行要么由下一步使用，要么在最后一步中返回给发出SQL语句的应用程序。
                        </p>
                        <p><a href="glossary.html#GUID-BE1723B5-DDC4-4896-9C77-C9B2FA8EA453"><span class="xrefglossterm">行源</span></a>是执行计划中的步骤返回的行集，以及可以迭代处理行的控制结构。行源可以是表，视图或连接或分组操作的结果。
                        </p>
                     </div>
                  </div><a id="CNCPT1750"></a><div class="props_rev_3"><a id="GUID-503B4218-AF0A-4A39-A1DD-F55C1C7D1BAA" name="GUID-503B4218-AF0A-4A39-A1DD-F55C1C7D1BAA"></a><h5 id="CNCPT-GUID-503B4218-AF0A-4A39-A1DD-F55C1C7D1BAA" class="sect5">SQL执行</h5>
                     <div>
                        <p>在执行期间，SQL引擎执行行源生成器生成的树中的每个行源。这是DML处理中唯一必需的步骤。</p>
                        <p>在执行期间，如果数据不在内存中，则数据库将数据从磁盘读入内存。数据库还会获取确保数据完整性所需的任何锁和锁存器，并记录在SQL执行期间所做的任何更改。处理SQL语句的最后阶段是关闭游标。</p>
                        <p>如果数据库配置为使用<a href="glossary.html#GUID-A19D33EA-7BAA-42C0-9E13-6AF686E2A976"><span class="xrefglossterm">内存中列存储</span></a> （IM列存储），则数据库会尽可能透明地将查询路由到IM列存储，否则将路由到磁盘和数据库缓冲区缓存。单个查询还可以使用IM列存储，磁盘和缓冲区缓存。例如，查询可能会连接两个表，其中只有一个表缓存在IM列存储中。
                        </p>
                        <div class="infoboxnotealso" id="GUID-503B4218-AF0A-4A39-A1DD-F55C1C7D1BAA__GUID-C44037C2-3EFD-48C3-8ECC-A78411BB724D">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="memory-architecture.html#GUID-80C1C6A3-3E48-4868-ACA1-370C4D341209" title="内存区域是一个可选的SGA组件，包含内存中列存储（IM列存储）。">内存区</a> ”</span></p>
                              </li>
                              <li>
                                 <p>有关执行计划和<code class="codeph">EXPLAIN PLAN</code>语句的详细信息，请<code class="codeph">EXPLAIN PLAN</code> <a href="../tgsql/generating-and-displaying-execution-plans.html#TGSQL271" target="_blank"><span class="italic">“Oracle数据库SQL调优指南”</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="CNCPT88928"></a><div class="props_rev_3"><a id="GUID-290D145D-07B9-4AF7-A91E-BCC444D21487" name="GUID-290D145D-07B9-4AF7-A91E-BCC444D21487"></a><h4 id="CNCPT-GUID-290D145D-07B9-4AF7-A91E-BCC444D21487" class="sect4">DML和DDL处理之间的差异</h4>
                  <div>
                     <p>Oracle数据库以不同于DML的方式处理DDL。</p>
                     <p>例如，在创建表时，数据库不会优化<code class="codeph">CREATE TABLE</code>语句。相反，Oracle数据库会解析DDL语句并执行该命令。
                     </p>
                     <p>与DDL相比，大多数DML语句都有一个查询组件。在查询中，执行游标会将查询生成的行放入结果集中。</p>
                     <p>数据库可以一次一行或以组的形式获取结果集行。在fetch中，数据库选择行，如果查询请求，则对行进行排序。每次连续提取都会检索结果的另一行，直到获取最后一行。</p>
                     <div class="infoboxnotealso" id="GUID-290D145D-07B9-4AF7-A91E-BCC444D21487__GUID-488F8A7A-5907-4FE5-971C-D47CB78C31DC">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../adfns/sql-processing-for-application-developers.html#ADFNS134" target="_blank"><span><cite>Oracle数据库开发指南</cite></span></a> ，了解有关处理DDL，事务控制和其他类型语句的信息</p>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
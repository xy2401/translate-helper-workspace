<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Several objects are used in materialized view replication. Some of these objects are optional and are used only as needed to support the created materialized view environment. For example, if you have a complex materialized view that cannot be fast refreshed, then you might not have a materialized view log at the master database."></meta>
      <meta name="description" content="Several objects are used in materialized view replication. Some of these objects are optional and are used only as needed to support the created materialized view environment. For example, if you have a complex materialized view that cannot be fast refreshed, then you might not have a materialized view log at the master database."></meta>
      <title>只读物化视图体系结构</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Administrator’s Guide "></meta>
      <meta property="og:description" content="Several objects are used in materialized view replication. Some of these objects are optional and are used only as needed to support the created materialized view environment. For example, if you have a complex materialized view that cannot be fast refreshed, then you might not have a materialized view log at the master database."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Administrator’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-14T11:02:35-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96348-04"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="read-only-materialized-view-concepts.html" title="Previous" type="text/html"></link>
      <link rel="next" href="planning-for-read-only-materialized-views.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADMIN"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="read-only-materialized-view-concepts.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="planning-for-read-only-materialized-views.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="managing-read-only-materialized-views.html" property="item" typeof="WebPage"><span property="name">管理只读物化视图</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">只读物化视图体系结构</li>
            </ol>
            <a id="GUID-C7012EE7-3870-4B01-8EBC-7D3247088D03" name="GUID-C7012EE7-3870-4B01-8EBC-7D3247088D03"></a>
            
            <h2 id="ADMIN-GUID-C7012EE7-3870-4B01-8EBC-7D3247088D03" class="sect2"><span class="enumeration_chapter">37</span>只读物化视图体系结构</h2>
         </header>
         <div class="ind">
            <p>在物化视图复制中使用了几个对象。其中一些对象是可选的，仅在需要时用于支持创建的物化视图环境。例如，如果您有一个无法快速刷新的复杂物化视图，那么您可能没有master数据库中的物化视图日志。</p>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="read-only-materialized-view-architecture.html#GUID-20218600-234C-4936-8DEE-1F7702D89368">掌握数据库机制</a><br>有一些机制支持master数据库中的物化视图。
                  </li>
                  <li class="ulchildlink"><a href="read-only-materialized-view-architecture.html#GUID-8F825CBC-07E7-4E87-AF6B-C9A15D098540">物化视图数据库机制</a><br>创建实例化视图时，将在实体化视图数据库中创建其他机制以支持实例化视图。具体而言，至少创建一个索引。
                  </li>
                  <li class="ulchildlink"><a href="read-only-materialized-view-architecture.html#GUID-7881388A-9397-43E2-8776-850660CB6C14">组织机制</a><br>有几种机制在物化视图数据库中组织物化视图。这些机制维护物化视图数据库与其主数据库之间的组织一致性。
                  </li>
                  <li class="ulchildlink"><a href="read-only-materialized-view-architecture.html#GUID-B384BA50-BD3D-4457-B28B-16A28B214E76">刷新过程</a><br>要确保实例化视图与其主表一致，必须定期刷新实例化视图。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="managing-read-only-materialized-views.html#GUID-7AAEC1A7-01BA-4293-AF46-F026AA2B0237" title="只读物化视图可以提供对主表数据的只读访问。您可以创建和管理只读的物化视图。">管理只读实体化视图</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-20218600-234C-4936-8DEE-1F7702D89368" name="GUID-20218600-234C-4936-8DEE-1F7702D89368"></a><h3 id="ADMIN-GUID-20218600-234C-4936-8DEE-1F7702D89368" class="sect3"><span class="enumeration_section">37.1</span>主数据库机制</h3>
               <p>有一些机制支持master数据库中的物化视图。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="read-only-materialized-view-architecture.html#GUID-32313993-0C9C-46BD-9E5C-1562C8132C46">主数据库对象</a><br>主数据库需要特定的数据库对象，以支持快速刷新物化视图。
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-architecture.html#GUID-5826D247-312D-4279-95E8-C0BCAADBF95F">主表</a><br>主表是物化视图的基础。
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-architecture.html#GUID-C9DA9AAE-13B9-4C19-B6E2-4E828395B293">物化视图日志的内部触发器</a><br>使用DML对主表进行更改时，内部触发器会在实例化视图日志中记录有关受影响行的信息。
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-architecture.html#GUID-6F0523A6-D710-46D9-A683-2E692882E2BB">物化视图日志</a><br>物化视图日志可以快速刷新物化视图。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="read-only-materialized-view-architecture.html#GUID-C7012EE7-3870-4B01-8EBC-7D3247088D03" title="在物化视图复制中使用了几个对象。其中一些对象是可选的，仅在需要时用于支持创建的物化视图环境。例如，如果您有一个无法快速刷新的复杂物化视图，那么您可能没有master数据库中的物化视图日志。">只读物化视图体系结构</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-32313993-0C9C-46BD-9E5C-1562C8132C46" name="GUID-32313993-0C9C-46BD-9E5C-1562C8132C46"></a><h4 id="ADMIN-GUID-32313993-0C9C-46BD-9E5C-1562C8132C46" class="sect4"><span class="enumeration_section">37.1.1</span>主数据库对象</h4>
                  <div>
                     <p>主数据库需要特定的数据库对象，以支持快速刷新物化视图。</p>
                     <p>主数据库需要<a href="read-only-materialized-view-architecture.html#GUID-32313993-0C9C-46BD-9E5C-1562C8132C46__CBHCGIFJ">图37-1</a>中显示的三个数据库对象，以支持快速刷新物化视图。
                     </p>
                     <div class="figure" id="GUID-32313993-0C9C-46BD-9E5C-1562C8132C46__CBHCGIFJ">
                        <p class="titleinfigure">图37-1主数据库对象</p><img src="img/admin571.png" width="541" alt="下面是图37-1的描述" title="下面是图37-1的描述" longdesc="img_text/admin571.html"><br><a href="img_text/admin571.html">“图37-1主数据库对象”的说明</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-architecture.html#GUID-20218600-234C-4936-8DEE-1F7702D89368" title="有一些机制支持master数据库中的物化视图。">主数据库机制</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-5826D247-312D-4279-95E8-C0BCAADBF95F" name="GUID-5826D247-312D-4279-95E8-C0BCAADBF95F"></a><h4 id="ADMIN-GUID-5826D247-312D-4279-95E8-C0BCAADBF95F" class="sect4"><span class="enumeration_section">37.1.2</span>主表</h4>
                  <div>
                     <p>主表是物化视图的基础。</p>
                     <p>主表位于目标主数据库中。请记住，实体化视图仅指向一个主数据库。由物化视图日志记录的对主表所做的数据操作语言（DML）更改在刷新过程中传播到物化视图。</p>
                     <div class="infoboxnote" id="GUID-5826D247-312D-4279-95E8-C0BCAADBF95F__GUID-9F62B121-F73C-4D6D-B327-91BA4084F128">
                        <p class="notep1">注意：</p>
                        <p>快速可刷新的物化视图必须基于主表或主表的同义词。必须对基于视图的物化视图使用完全刷新。</p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-architecture.html#GUID-20218600-234C-4936-8DEE-1F7702D89368" title="有一些机制支持master数据库中的物化视图。">主数据库机制</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-C9DA9AAE-13B9-4C19-B6E2-4E828395B293" name="GUID-C9DA9AAE-13B9-4C19-B6E2-4E828395B293"></a><h4 id="ADMIN-GUID-C9DA9AAE-13B9-4C19-B6E2-4E828395B293" class="sect4"><span class="enumeration_section">37.1.3</span>物化视图日志的内部触发器</h4>
                  <div>
                     <p>使用DML对主表进行更改时，内部触发器会在实例化视图日志中记录有关受影响行的信息。</p>
                     <p>此信息包括主键，rowid或对象标识或两者的值，以及在实例化视图日志中记录的其他列的值。这是一个内部<code class="codeph">AFTER</code> <code class="codeph">ROW</code>触发器，在为目标主表创建物化视图日志时自动激活。只要<code class="codeph">INSERT</code> ， <code class="codeph">UPDATE</code>或<code class="codeph">DELETE</code>语句修改表的数据，它就会在物化视图日志中插入一行。此触发器始终是触发的最后一个触发器。
                     </p>
                     <div class="infoboxnote" id="GUID-C9DA9AAE-13B9-4C19-B6E2-4E828395B293__GUID-F9CC2ACE-BFB4-43A3-804D-0845C3717ADA">
                        <p class="notep1">注意：</p>
                        <p>当物化视图包含子查询时，您可能需要记录子查询中引用的列。有关子查询物化视图和<span class="q">“ <a href="planning-for-read-only-materialized-views.html#GUID-FAAF0273-7321-4FD0-8A5D-A3A8364E10F9" title="创建实例化视图日志时，可以向日志添加列以快速刷新实例化视图。">在物化视图日志中记录列</a></span> <span class="q">”</span>的信息，请参阅<span class="q">“ <a href="read-only-materialized-view-concepts.html#GUID-899DBA13-2CAD-45E4-963A-6472EF5DFC66" title="In certain situations, you might want your materialized view to reflect a subset of the data in the master table.">使用物化视图</a></span>进行<span class="q"><a href="read-only-materialized-view-concepts.html#GUID-899DBA13-2CAD-45E4-963A-6472EF5DFC66" title="在某些情况下，您可能希望物化视图反映主表中数据的子集。">数据子设置</a> ”，</span>以获取有关必须记录的列的更多信息。
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-architecture.html#GUID-20218600-234C-4936-8DEE-1F7702D89368" title="有一些机制支持master数据库中的物化视图。">主数据库机制</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-6F0523A6-D710-46D9-A683-2E692882E2BB" name="GUID-6F0523A6-D710-46D9-A683-2E692882E2BB"></a><h4 id="ADMIN-GUID-6F0523A6-D710-46D9-A683-2E692882E2BB" class="sect4"><span class="enumeration_section">37.1.4</span>物化视图日志</h4>
                  <p>物化视图日志可以快速刷新物化视图。</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="read-only-materialized-view-architecture.html#GUID-7CDE1F79-1BBF-4A7E-BBAB-2A87E1F77B7C">关于物化视图日志</a><br>主表上需要物化视图日志，以根据主表对物化视图执行快速刷新。
                        </li>
                        <li class="ulchildlink"><a href="read-only-materialized-view-architecture.html#GUID-EA4C8CD8-51E2-4C3B-8281-210940D8DE01">列记录在物化视图日志中</a><br>创建实例化视图日志时，可以在必要时向日志添加列。
                        </li>
                        <li class="ulchildlink"><a href="read-only-materialized-view-architecture.html#GUID-DBF3D876-00A8-4D6B-977C-8EAD8E554342">将物化视图日志导入不同模式的限制</a><br>物化视图日志将使用DDL语句中明确指定的模式名称导出。因此，物化视图日志无法导入到与导出它们的模式不同的模式中。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-architecture.html#GUID-20218600-234C-4936-8DEE-1F7702D89368" title="有一些机制支持master数据库中的物化视图。">主数据库机制</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-7CDE1F79-1BBF-4A7E-BBAB-2A87E1F77B7C" name="GUID-7CDE1F79-1BBF-4A7E-BBAB-2A87E1F77B7C"></a><h5 id="ADMIN-GUID-7CDE1F79-1BBF-4A7E-BBAB-2A87E1F77B7C" class="sect5"><span class="enumeration_section">37.1.4.1</span>关于物化视图日志</h5>
                     <div>
                        <p>主表上需要物化视图日志，以根据主表对物化视图执行快速刷新。</p>
                        <p>为主表创建实例化视图日志时，Oracle数据库会创建基础表作为实例化视图日志。物化视图日志可以保存主表中已更新的行的主键，rowid或对象标识符。物化视图日志还可以包含其他列，以支持使用子查询快速刷新实例化视图。</p>
                        <p>物化视图日志表的名称是<code class="codeph">MLOG$_</code> <span class="italic">master_table_name</span> 。物化视图日志在与目标主表相同的模式中创建。一个物化视图日志可以在其主表上支持多个物化视图。如上一节所述，只要在目标主表上发生DML事务，内部触发器就会将更改信息添加到物化视图日志中。
                        </p>
                        <p>以下是物化视图日志的类型：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">主键</span> ：物化视图根据受影响行的主键记录对主表的更改。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">行ID</span> ：物化视图根据受影响行的rowid记录对主表的更改。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">对象ID</span> ：实体化视图根据受影响的行对象的对象标识符记录对主对象表的更改。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">组合</span> ：物化视图根据三个选项的任意组合记录对主表的更改。可以根据主键， <code class="codeph">ROWID</code>和受影响行的对象标识符记录更改。这样的物化视图日志支持主键， <code class="codeph">ROWID</code>和对象物化视图，这对于具有基于主表的所有三种类型的物化视图的环境很有帮助。
                              </p>
                           </li>
                        </ul>
                        <p>组合物化视图日志的工作方式与仅跟踪一种类型值的物化视图日志相同，但记录的值不止一种。例如，组合物化视图日志可以跟踪受影响行的主键和rowid。</p>
                        <p>虽然基于主键和rowid的物化视图日志之间的差异很小（一个使用主键记录受影响的行，而另一个记录使用物理rowid影响行），但实际影响很大。使用rowid物化视图和物化视图日志会使重组和截断主表变得困难，因为它会阻止您的<code class="codeph">ROWID</code>物化视图快速刷新。如果重组或截断你的主表，那么你的ROWID的物化视图必须是<code class="codeph">COMPLETE</code> ，因为主表的的rowid已经改变刷新。
                        </p>
                        <div class="infoboxnote" id="GUID-7CDE1F79-1BBF-4A7E-BBAB-2A87E1F77B7C__GUID-E7750959-C380-4BD6-91BB-598AD47505EB">
                           <p class="notep1">注意：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>您可以使用<code class="codeph">BEGIN_TABLE_REORGANIZATION</code>和<code class="codeph">END_TABLE_REORGANIZATION</code>程序在<code class="codeph">DBMS_MVIEW</code>包重组主表。有关更多信息，请参见<a href="../arpls/DBMS_MVIEW.html#ARPLS027" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> 。
                                 </p>
                              </li>
                              <li>
                                 <p>在线重新定义表是另一种重组主表的可能方法，但在具有物化视图日志和物化视图的主表上不允许在线重新定义。在没有物化视图日志的主表上允许在线重新定义。请参阅<span class="q">“ <a href="managing-tables.html#GUID-F95114BC-F512-4A1F-B5BD-07DDDE60D934" title="在任何数据库系统中，有时需要修改表的逻辑或物理结构，以提高查询或DML的性能，适应应用程序更改或管理存储。您可以使用DBMS_REDEFINITION包在线重新定义表。">在线重新定义表</a> ”</span> 。
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-7CDE1F79-1BBF-4A7E-BBAB-2A87E1F77B7C__GUID-3BC5B657-3B8C-4941-9960-D11BF903C6A9">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="planning-for-read-only-materialized-views.html#GUID-228408DC-050E-40CA-9D5A-E8FC157D5C4A" title="在主表上创建物化视图日志，以便可以快速刷新基于主表的物化视图。">创建物化视图日志</a> ”</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="read-only-materialized-view-architecture.html#GUID-6F0523A6-D710-46D9-A683-2E692882E2BB" title="物化视图日志可以快速刷新物化视图。">物化视图日志</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-EA4C8CD8-51E2-4C3B-8281-210940D8DE01" name="GUID-EA4C8CD8-51E2-4C3B-8281-210940D8DE01"></a><h5 id="ADMIN-GUID-EA4C8CD8-51E2-4C3B-8281-210940D8DE01" class="sect5"><span class="enumeration_section">37.1.4.2</span>在物化视图日志中记录的列</h5>
                     <div>
                        <p>创建实例化视图日志时，可以在必要时向日志添加列。</p>
                        <p>要在实例化视图上执行快速刷新，必须将以下类型的列添加到实例化视图日志中：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>子查询的<code class="codeph">WHERE</code>子句中引用的列，它不是equi-join的一部分，不是主键列。这些列称为过滤列。
                              </p>
                           </li>
                           <li>
                              <p>如果子查询是多对多或一对多，则equi-join中的列不是主键列。如果子查询是多对一，则不需要将连接列添加到实例化视图日志中。</p>
                           </li>
                        </ul>
                        <p>无法将集合列添加到实例化视图日志中。此外，使用完全刷新的物化视图不需要物化视图日志。</p>
                        <p>例如，请考虑以下DDL：</p><pre class="oac_no_warn" dir="ltr">1）创建物化视图oe.customers快速刷新2）SELECT * FROM oe.customers@orc1.example.com c 3）在哪里存在4）（SELECT * FROM oe.orders@orc1.example.com o 5）WHERE c .customer_id = o.customer_id AND o.order_total&gt; 20000）;</pre><p>请注意前面DDL的第5行， <code class="codeph">WHERE</code>子句中引用了三列。列<code class="codeph">orders.customer_id</code>和<code class="codeph">customers.customer_id</code>作为equi-join子句的一部分引用。由于<code class="codeph">customers.customer_id</code>是主键列，因此默认情况下会记录该列，但<code class="codeph">orders.customer_id</code>不是主键列，因此必须添加到<code class="codeph">orders.customer_id</code>化视图日志中。此外，列<code class="codeph">orders.order_total</code>是一个额外的过滤器列，因此必须记录。
                        </p>
                        <p>因此，加<code class="codeph">orders.customer_id</code>和<code class="codeph">orders.order_total</code>的物化视图日志<code class="codeph">oe.orders</code>表。
                        </p>
                        <p>建议您分析计划的物化视图的定义查询，并确定必须将哪些列添加到物化视图日志中。如果尝试创建或刷新需要添加列而不将列添加到实例化视图日志的实例化视图，则实体化视图创建或刷新可能会失败。</p>
                        <div class="infoboxnote" id="GUID-EA4C8CD8-51E2-4C3B-8281-210940D8DE01__GUID-01B50212-15E8-4097-A702-9B57C765FFC0">
                           <p class="notep1">注意：</p>
                           <p>要在实例化视图上执行快速刷新，如果连接列不是主键且子查询是多对多或一对多，则必须将子查询中的连接列添加到实例化视图日志中。如果子查询是多对一，则不需要将连接列添加到实例化视图日志中。</p>
                        </div>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-EA4C8CD8-51E2-4C3B-8281-210940D8DE01__GUID-FC814EC8-AD96-4AEA-8152-D91BDFFE1D88">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="planning-for-read-only-materialized-views.html#GUID-228408DC-050E-40CA-9D5A-E8FC157D5C4A" title="在主表上创建物化视图日志，以便可以快速刷新基于主表的物化视图。">创建物化视图日志</a> ”</span>以获取有关创建物化视图日志的信息</p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="planning-for-read-only-materialized-views.html#GUID-FAAF0273-7321-4FD0-8A5D-A3A8364E10F9" title="创建实例化视图日志时，可以向日志添加列以快速刷新实例化视图。">在物化视图日志中记录列</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="read-only-materialized-view-concepts.html#GUID-899DBA13-2CAD-45E4-963A-6472EF5DFC66" title="In certain situations, you might want your materialized view to reflect a subset of the data in the master table.">使用物化视图</a></span>进行<span class="q"><a href="read-only-materialized-view-concepts.html#GUID-899DBA13-2CAD-45E4-963A-6472EF5DFC66" title="In certain situations, you might want your materialized view to reflect a subset of the data in the master table.">数据子设置</a> ”，</span>以获取有关带子查询的<span class="q"><a href="read-only-materialized-view-concepts.html#GUID-899DBA13-2CAD-45E4-963A-6472EF5DFC66" title="在某些情况下，您可能希望物化视图反映主表中数据的子集。">物化视图</a></span>的信息</p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="read-only-materialized-view-concepts.html#GUID-0C401A1A-D5BC-4009-B6DD-A1C61D65F9E9" title="具有子查询的物化视图的定义查询受若干限制，以保留物化视图的快速刷新功能。">带子查询的物化视图的限制</a> ”，</span>以获取有关子查询的物化视图的其他信息</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="read-only-materialized-view-architecture.html#GUID-6F0523A6-D710-46D9-A683-2E692882E2BB" title="物化视图日志可以快速刷新物化视图。">物化视图日志</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-DBF3D876-00A8-4D6B-977C-8EAD8E554342" name="GUID-DBF3D876-00A8-4D6B-977C-8EAD8E554342"></a><h5 id="ADMIN-GUID-DBF3D876-00A8-4D6B-977C-8EAD8E554342" class="sect5"><span class="enumeration_section">37.1.4.3</span>将物化视图日志导入不同模式的限制</h5>
                     <div>
                        <p>物化视图日志将使用DDL语句中明确指定的模式名称导出。因此，物化视图日志无法导入到与导出它们的模式不同的模式中。</p>
                        <p>如果您尝试使用指定<code class="codeph">REMAP_SCHEMA</code>导入参数的数据泵导入实用程序导入导入包含指定模式中的<code class="codeph">REMAP_SCHEMA</code>化视图日志的导出转储文件， <code class="codeph">REMAP_SCHEMA</code>将错误写入导入日志文件并且不导入项目。
                        </p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="read-only-materialized-view-architecture.html#GUID-6F0523A6-D710-46D9-A683-2E692882E2BB" title="物化视图日志可以快速刷新物化视图。">物化视图日志</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-8F825CBC-07E7-4E87-AF6B-C9A15D098540" name="GUID-8F825CBC-07E7-4E87-AF6B-C9A15D098540"></a><h3 id="ADMIN-GUID-8F825CBC-07E7-4E87-AF6B-C9A15D098540" class="sect3"><span class="enumeration_section">37.2</span>物化视图数据库机制</h3>
               <div>
                  <p>创建实例化视图时，将在实体化视图数据库中创建其他机制以支持实例化视图。具体而言，至少创建一个索引。</p>
                  <div class="infoboxnote" id="GUID-8F825CBC-07E7-4E87-AF6B-C9A15D098540__GUID-73DEFE0D-4C1C-4914-AF74-61290148B049">
                     <p class="notep1">注意：</p>
                     <p>物化视图名称的大小限制为30个字节。如果尝试创建名称大于30个字节的实例化视图，Oracle数据库将返回错误。</p>
                  </div>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="read-only-materialized-view-architecture.html#GUID-4E1FEFAE-331D-42EE-9D09-D9536BB1CB17">物化视图的索引</a><br>在远程物化视图数据库中为每个主键和<code class="codeph">ROWID</code>物化视图创建至少一个索引。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="read-only-materialized-view-architecture.html#GUID-C7012EE7-3870-4B01-8EBC-7D3247088D03" title="在物化视图复制中使用了几个对象。其中一些对象是可选的，仅在需要时用于支持创建的物化视图环境。例如，如果您有一个无法快速刷新的复杂物化视图，那么您可能没有master数据库中的物化视图日志。">只读物化视图体系结构</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-4E1FEFAE-331D-42EE-9D09-D9536BB1CB17" name="GUID-4E1FEFAE-331D-42EE-9D09-D9536BB1CB17"></a><h4 id="ADMIN-GUID-4E1FEFAE-331D-42EE-9D09-D9536BB1CB17" class="sect4"><span class="enumeration_section">37.2.1</span>物化视图的索引</h4>
                  <div>
                     <p>在远程物化视图数据库中为每个主键和<code class="codeph">ROWID</code>物化视图创建至少一个索引。
                     </p>
                     <p>对于主键物化视图，索引对应于目标主表的主键，并在其名称中包含<code class="codeph">_PK</code> 。如果物化视图数据库中已存在具有相同名称的索引，则会附加一个数字。对于<code class="codeph">ROWID</code>物化视图，索引位于<code class="codeph">ROWID</code>列上，并在其名称中包含<code class="codeph">I_SNAP$_</code> 。Oracle数据库可以在远程物化视图数据库中创建其他索引，以支持使用子查询快速刷新实例化视图。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-architecture.html#GUID-8F825CBC-07E7-4E87-AF6B-C9A15D098540" title="创建实例化视图时，将在实体化视图数据库中创建其他机制以支持实例化视图。具体而言，至少创建一个索引。">物化视图数据库机制</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-7881388A-9397-43E2-8776-850660CB6C14" name="GUID-7881388A-9397-43E2-8776-850660CB6C14"></a><h3 id="ADMIN-GUID-7881388A-9397-43E2-8776-850660CB6C14" class="sect3"><span class="enumeration_section">37.3</span>组织机制</h3>
               <p>有几种机制在物化视图数据库中组织物化视图。这些机制维护物化视图数据库与其主数据库之间的组织一致性。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="read-only-materialized-view-architecture.html#GUID-4440DB7A-5F04-4595-8672-2970028F7645">刷新组</a><br>为了保留多个物化视图之间的参照完整性和事务（读取）一致性，Oracle数据库可以刷新单个物化视图作为刷新组的一部分。
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-architecture.html#GUID-ACFC0831-23B6-4073-B0FB-ADC8D93169C4">刷新组大小</a><br>在决定刷新组的大小时，需要考虑一些权衡因素。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="read-only-materialized-view-architecture.html#GUID-C7012EE7-3870-4B01-8EBC-7D3247088D03" title="在物化视图复制中使用了几个对象。其中一些对象是可选的，仅在需要时用于支持创建的物化视图环境。例如，如果您有一个无法快速刷新的复杂物化视图，那么您可能没有master数据库中的物化视图日志。">只读物化视图体系结构</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-4440DB7A-5F04-4595-8672-2970028F7645" name="GUID-4440DB7A-5F04-4595-8672-2970028F7645"></a><h4 id="ADMIN-GUID-4440DB7A-5F04-4595-8672-2970028F7645" class="sect4"><span class="enumeration_section">37.3.1</span>刷新组</h4>
                  <div>
                     <p>为了保留多个物化视图之间的参照完整性和事务（读取）一致性，Oracle数据库可以刷新单个物化视图作为刷新组的一部分。</p>
                     <p>刷新刷新组中的所有物化视图后，组中所有物化视图的数据对应于相同的事务一致时间点。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-architecture.html#GUID-7881388A-9397-43E2-8776-850660CB6C14" title="有几种机制在物化视图数据库中组织物化视图。这些机制维护物化视图数据库与其主数据库之间的组织一致性。">组织机制</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-ACFC0831-23B6-4073-B0FB-ADC8D93169C4" name="GUID-ACFC0831-23B6-4073-B0FB-ADC8D93169C4"></a><h4 id="ADMIN-GUID-ACFC0831-23B6-4073-B0FB-ADC8D93169C4" class="sect4"><span class="enumeration_section">37.3.2</span>刷新组大小</h4>
                  <div>
                     <p>在决定刷新组的大小时，需要考虑一些权衡因素。</p>
                     <p>Oracle数据库针对大型刷新组进行了优化。因此，如果组中的物化视图相似，则大型刷新组的刷新速度比小型刷新组中的相同数量的物化视图更快。例如，刷新具有100个物化视图的刷新组比刷新五个刷新组（每个刷新组具有20个物化视图）更快。此外，大型刷新组使您只需调用一个PL / SQL子程序即可刷新更多的物化视图。</p>
                     <p>执行刷新时必须保持网络连接。如果在刷新期间连接丢失或中断，则会回滚所有更改，以使数据库保持一致。因此，在难以维护网络连接的情况下，请考虑使用较小的刷新组。</p>
                     <p>还有一个优化空刷新。也就是说，如果自上次刷新特定物化视图后主表没有更改，那么在刷新期间物化视图几乎不需要额外的时间。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-architecture.html#GUID-7881388A-9397-43E2-8776-850660CB6C14" title="有几种机制在物化视图数据库中组织物化视图。这些机制维护物化视图数据库与其主数据库之间的组织一致性。">组织机制</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-B384BA50-BD3D-4457-B28B-16A28B214E76" name="GUID-B384BA50-BD3D-4457-B28B-16A28B214E76"></a><h3 id="ADMIN-GUID-B384BA50-BD3D-4457-B28B-16A28B214E76" class="sect3"><span class="enumeration_section">37.4</span>刷新过程</h3>
               <p>要确保实例化视图与其主表一致，必须定期刷新实例化视图。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="read-only-materialized-view-architecture.html#GUID-C98891B9-13D3-4B22-83AF-B349FF06AF08">关于刷新过程</a><br><strong class="term">物化视图刷新</strong>是一种有效的批处理操作，它使物化视图反映其主表的更新当前状态。
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-architecture.html#GUID-6F85F48F-F633-424B-B43F-2B27F0043C79">刷新类型</a><br>Oracle数据库可以使用快速，完整或强制刷新来刷新实例化视图。
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-architecture.html#GUID-65D0AD4E-E401-4740-A679-69529D2F2618">启动刷新</a><br>创建刷新组时，可以配置该组，以便Oracle数据库按计划的时间间隔自动刷新组的实例化视图。相反，您可以省略计划信息，以便必须手动或“按需”刷新刷新组。在不总是具有网络连接的系统上执行刷新时，手动刷新是理想的解决方案。
                     </li>
                     <li class="ulchildlink"><a href="read-only-materialized-view-architecture.html#GUID-DC463233-CEDB-4EE4-B6E9-27F26E857B91">约束和刷新</a><br>要在刷新实例化视图期间避免任何完整性约束违规，请在每个实例化视图上进行非主键完整性约束可延迟。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="read-only-materialized-view-architecture.html#GUID-C7012EE7-3870-4B01-8EBC-7D3247088D03" title="在物化视图复制中使用了几个对象。其中一些对象是可选的，仅在需要时用于支持创建的物化视图环境。例如，如果您有一个无法快速刷新的复杂物化视图，那么您可能没有master数据库中的物化视图日志。">只读物化视图体系结构</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-C98891B9-13D3-4B22-83AF-B349FF06AF08" name="GUID-C98891B9-13D3-4B22-83AF-B349FF06AF08"></a><h4 id="ADMIN-GUID-C98891B9-13D3-4B22-83AF-B349FF06AF08" class="sect4"><span class="enumeration_section">37.4.1</span>关于刷新过程</h4>
                  <div>
                     <p><strong class="term">物化视图刷新</strong>是一种有效的批处理操作，它使物化视图反映其主表的更新当前状态。
                     </p>
                     <p>物化视图的数据不一定与其主表的当前数据匹配。物化视图是其主表的事务（读）一致反映，因为数据存在于特定时间点（即，在创建时或发生刷新时）。要使物化视图的数据与其主表的数据保持相对最新，必须定期刷新物化视图。</p>
                     <p>主表中的行可以在物化视图的刷新之间多次更新，但刷新仅使用当前数据更新实例化视图中的行。例如，自上次刷新实例化视图以来，主表中的行可能会更新10次，但结果仍然只是在下次刷新期间物化视图中相应行的一次更新。</p>
                     <p>确定如何以及何时刷新每个物化视图以使其更新。例如，基于应用程序更新的主表的物化视图可能需要频繁刷新。相反，基于相对静态主表的物化视图通常需要不经常刷新。总之，分析应用程序特征和要求以确定适当的物化视图刷新间隔。</p>
                     <p>要刷新实例化视图，Oracle数据库支持多种刷新类型和启动刷新的方法。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-architecture.html#GUID-B384BA50-BD3D-4457-B28B-16A28B214E76" title="要确保实例化视图与其主表一致，必须定期刷新实例化视图。">刷新过程</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-6F85F48F-F633-424B-B43F-2B27F0043C79" name="GUID-6F85F48F-F633-424B-B43F-2B27F0043C79"></a><h4 id="ADMIN-GUID-6F85F48F-F633-424B-B43F-2B27F0043C79" class="sect4"><span class="enumeration_section">37.4.2</span>刷新类型</h4>
                  <p>Oracle数据库可以使用快速，完整或强制刷新来刷新实例化视图。</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="read-only-materialized-view-architecture.html#GUID-8BA52D26-5D35-4D05-AF36-92E82EA9AEB5">完全刷新</a><br>要执行物化视图的<strong class="term">完整刷新</strong> ，管理物化视图的服务器将执行物化视图的定义查询，该查询基本上会重新创建物化视图。
                        </li>
                        <li class="ulchildlink"><a href="read-only-materialized-view-architecture.html#GUID-62E9ACD9-056A-4896-AE9D-3EE816930327">快速刷新</a><br>要执行<strong class="term">快速刷新</strong> ，管理实例化视图的主表首先标识自最近一次刷新实例化视图以来主表中发生的更改，然后将这些更改应用于实例化视图。
                        </li>
                        <li class="ulchildlink"><a href="read-only-materialized-view-architecture.html#GUID-09E0ACF7-E985-4804-A289-432CD6AAA6FB">强制刷新</a><br>要对物化视图执行<strong class="term">强制刷新</strong> ，管理物化视图的服务器会尝试执行快速刷新。如果无法快速刷新，则Oracle数据库会执行完全刷新。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-architecture.html#GUID-B384BA50-BD3D-4457-B28B-16A28B214E76" title="要确保实例化视图与其主表一致，必须定期刷新实例化视图。">刷新过程</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-8BA52D26-5D35-4D05-AF36-92E82EA9AEB5" name="GUID-8BA52D26-5D35-4D05-AF36-92E82EA9AEB5"></a><h5 id="ADMIN-GUID-8BA52D26-5D35-4D05-AF36-92E82EA9AEB5" class="sect5"><span class="enumeration_section">37.4.2.1</span>完全刷新</h5>
                     <div>
                        <p>要执行物化视图的<strong class="term">完整刷新</strong> ，管理物化视图的服务器将执行物化视图的定义查询，该查询基本上会重新创建物化视图。
                        </p>
                        <p>要刷新实例化视图，查询的结果集将替换现有的实例化视图数据。Oracle数据库可以对任何物化视图执行完整刷新。根据满足定义查询的数据量，完全刷新可能比快速刷新花费更长的时间。</p>
                        <div class="infoboxnote" id="GUID-8BA52D26-5D35-4D05-AF36-92E82EA9AEB5__GUID-F9DA0F41-E9D4-437D-89EB-EA4D87D787BC">
                           <p class="notep1">注意：</p>
                           <p>如果对物化视图使用完全刷新，则将其<code class="codeph">PCTFREE</code>设置为<code class="codeph">0</code>和<a id="d331491e1241" class="indexterm-anchor"></a><a id="d331491e1245" class="indexterm-anchor"></a><a id="d331491e1249" class="indexterm-anchor"></a> <code class="codeph">PCTUSED</code>到<code class="codeph">99</code>以获得最大效率。
                           </p>
                        </div>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="read-only-materialized-view-architecture.html#GUID-6F85F48F-F633-424B-B43F-2B27F0043C79" title="Oracle数据库可以使用快速，完整或强制刷新来刷新实例化视图。">刷新类型</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-62E9ACD9-056A-4896-AE9D-3EE816930327" name="GUID-62E9ACD9-056A-4896-AE9D-3EE816930327"></a><h5 id="ADMIN-GUID-62E9ACD9-056A-4896-AE9D-3EE816930327" class="sect5"><span class="enumeration_section">37.4.2.2</span>快速刷新</h5>
                     <div>
                        <p>要执行<strong class="term">快速刷新</strong> ，管理实例化视图的主表首先标识自最近一次刷新实例化视图以来主表中发生的更改，然后将这些更改应用于实例化视图。
                        </p>
                        <p>当主表的更改很少时，快速刷新比完全刷新更有效，因为参与的服务器和网络复制的数据量较少。仅当主表具有实例化视图日志时，才能快速刷新实例化视图。此外，为了使快速刷新比完全刷新更快， <code class="codeph">CREATE</code> <code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>语句中的每个连接列都必须有一个索引。
                        </p>
                        <p><a id="d331491e1323" class="indexterm-anchor"></a><a id="d331491e1327" class="indexterm-anchor"></a>使用SQL * Loader在主表上直接路径加载后，快速刷新不会应用直接路径加载期间发生的更改。此外，快速刷新不会应用主表上其他类型的批量加载操作所导致的更改。这些操作的示例包括带有<code class="codeph">APPEND</code>提示的<code class="codeph">INSERT</code>语句和<code class="codeph">INSERT</code> <code class="codeph">...</code> <code class="codeph">SELECT</code> <code class="codeph">*</code> <code class="codeph">FROM</code>语句。
                        </p>
                        <p><a id="d331491e1355" class="indexterm-anchor"></a>如果您具有基于分区主表的物化视图，则可以使用分区更改跟踪（PCT）来标识哪些物化视图行对应于特定分区。PCT还用于支持在物化视图的主表上进行分区维护操作后的快速刷新。只有满足几个条件，才能实现基于PCT的物化视图刷新。
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-62E9ACD9-056A-4896-AE9D-3EE816930327__GUID-61479662-6DC0-44EA-BE64-9CCB701A8349">
                           <p class="notep1">也可以看看：</p>
                           <p>有关PCT和基于PCT的刷新的信息，请参阅<a href="../dwhsg/index.html" target="_blank"><span class="italic">“Oracle数据库数据仓库指南”</span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="read-only-materialized-view-architecture.html#GUID-6F85F48F-F633-424B-B43F-2B27F0043C79" title="Oracle数据库可以使用快速，完整或强制刷新来刷新实例化视图。">刷新类型</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-09E0ACF7-E985-4804-A289-432CD6AAA6FB" name="GUID-09E0ACF7-E985-4804-A289-432CD6AAA6FB"></a><h5 id="ADMIN-GUID-09E0ACF7-E985-4804-A289-432CD6AAA6FB" class="sect5"><span class="enumeration_section">37.4.2.3</span>强制刷新</h5>
                     <div>
                        <p>要对物化视图执行<strong class="term">强制刷新</strong> ，管理物化视图的服务器会尝试执行快速刷新。如果无法快速刷新，则Oracle数据库会执行完全刷新。
                        </p>
                        <p>如果无法快速刷新，则希望物化视图刷新时使用强制设置。</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="read-only-materialized-view-architecture.html#GUID-6F85F48F-F633-424B-B43F-2B27F0043C79" title="Oracle数据库可以使用快速，完整或强制刷新来刷新实例化视图。">刷新类型</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-65D0AD4E-E401-4740-A679-69529D2F2618" name="GUID-65D0AD4E-E401-4740-A679-69529D2F2618"></a><h4 id="ADMIN-GUID-65D0AD4E-E401-4740-A679-69529D2F2618" class="sect4"><span class="enumeration_section">37.4.3</span>启动刷新</h4>
                  <p>创建刷新组时，可以配置该组，以便Oracle数据库按计划的时间间隔自动刷新组的实例化视图。相反，您可以省略计划信息，以便必须手动或“按需”刷新刷新组。在不总是具有网络连接的系统上执行刷新时，手动刷新是理想的解决方案。</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="read-only-materialized-view-architecture.html#GUID-57480BC6-526B-43B8-8618-E780E87BCAA9">预定刷新</a><br>为自动刷新创建刷新组时，必须在创建过程中为组指定计划的刷新间隔。
                        </li>
                        <li class="ulchildlink"><a href="read-only-materialized-view-architecture.html#GUID-621F3492-C3E3-48D7-B1A4-60BC5BFFB53B">按需刷新</a><br>按需刷新意味着使用显式过程调用刷新实例化视图。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-architecture.html#GUID-B384BA50-BD3D-4457-B28B-16A28B214E76" title="要确保实例化视图与其主表一致，必须定期刷新实例化视图。">刷新过程</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-57480BC6-526B-43B8-8618-E780E87BCAA9" name="GUID-57480BC6-526B-43B8-8618-E780E87BCAA9"></a><h5 id="ADMIN-GUID-57480BC6-526B-43B8-8618-E780E87BCAA9" class="sect5"><span class="enumeration_section">37.4.3.1</span>计划刷新</h5>
                     <div>
                        <p>为自动刷新创建刷新组时，必须在创建过程中为组指定计划的刷新间隔。</p>
                        <p>设置组的刷新间隔时，请考虑以下特征：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>指定刷新间隔的日期或日期表达式必须计算到将来的时间点。</p>
                           </li>
                           <li>
                              <p>刷新间隔必须大于执行刷新所需的时间长度。</p>
                           </li>
                           <li>
                              <p>相对日期表达式计算到相对于最近刷新日期的时间点。如果网络或系统故障干扰计划的组刷新，则相对日期表达式的评估可能会相应更改。</p>
                           </li>
                           <li>
                              <p>无论最近的刷新日期如何，显式日期表达式都会评估特定时间点。</p>
                           </li>
                           <li>
                              <p>考虑您的环境对陈旧数据的容忍度：如果容差很小，则经常刷新;而如果存在高容忍度，则刷新次数较少。</p>
                           </li>
                        </ul>
                        <p>以下是可用于指定间隔的简单日期表达式的示例：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>间隔一小时指定为：</p><pre class="oac_no_warn" dir="ltr">SYSDATE + 1/24</pre></li>
                           <li>
                              <p>七天的间隔指定为：</p><pre class="oac_no_warn" dir="ltr">SYSDATE + 7</pre></li>
                        </ul>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-57480BC6-526B-43B8-8618-E780E87BCAA9__GUID-5F1399A0-2F09-4ED7-A829-2340CCA5EC55">
                           <p class="notep1">也可以看看：</p>
                           <p>有关日期算术的更多信息，请<a href="../sqlrf/Data-Types.html#SQLRF-GUID-E405BBC7-DA9A-4DF2-9F22-E60CB9EC0705" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="read-only-materialized-view-architecture.html#GUID-65D0AD4E-E401-4740-A679-69529D2F2618" title="创建刷新组时，可以配置该组，以便Oracle数据库按计划的时间间隔自动刷新组的实例化视图。相反，您可以省略计划信息，以便必须手动刷新刷新组" on-demand="=" ="">启动刷新</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-621F3492-C3E3-48D7-B1A4-60BC5BFFB53B" name="GUID-621F3492-C3E3-48D7-B1A4-60BC5BFFB53B"></a><h5 id="ADMIN-GUID-621F3492-C3E3-48D7-B1A4-60BC5BFFB53B" class="sect5"><span class="enumeration_section">37.4.3.2</span>按需刷新</h5>
                     <div>
                        <p>按需刷新意味着使用显式过程调用刷新实例化视图。</p>
                        <p>计划的物化视图刷新可能并不总是适合您的环境的解决方案。例如，在批量数据加载到主表之后，依赖的物化视图不再表示主表的数据。</p>
                        <p>当物化视图与位于断开连接的笔记本电脑上的销售人员自动化系统集成时，您可能还希望按需刷新物化视图。设计销售人员自动化软件的开发人员可以创建应用程序控件，例如按钮，销售人员可以在建立网络连接后准备好将当天的订单传输到服务器时刷新实体化视图。</p>
                        <p>以下示例说明了<code class="codeph">hr_refg</code>刷新组的<code class="codeph">hr_refg</code>刷新：</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_REFRESH.REFRESH（'hr_refg'）;</pre><div class="infoboxnote" id="GUID-621F3492-C3E3-48D7-B1A4-60BC5BFFB53B__GUID-2F582C87-FECB-410E-97EA-F299B5DF1344">
                           <p class="notep1">注意：</p>
                           <p>不要使用<code class="codeph">DBMS_MVIEW.REFRESH_ALL_MVIEWS</code>或<code class="codeph">DBMS_MVIEW.REFRESH_DEPENDENT</code>过程来刷新复制环境中使用的<code class="codeph">DBMS_MVIEW.REFRESH_ALL_MVIEWS</code>化视图。而是使用<code class="codeph">DBMS_REFRESH.REFRESH</code>或<code class="codeph">DBMS_MVIEW.REFRESH</code>过程刷新复制环境中的<code class="codeph">DBMS_MVIEW.REFRESH</code>化视图。
                           </p>
                        </div>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="read-only-materialized-view-architecture.html#GUID-65D0AD4E-E401-4740-A679-69529D2F2618" title="创建刷新组时，可以配置该组，以便Oracle数据库按计划的时间间隔自动刷新组的实例化视图。相反，您可以省略计划信息，以便必须手动刷新刷新组" on-demand="=" ="">启动刷新</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-DC463233-CEDB-4EE4-B6E9-27F26E857B91" name="GUID-DC463233-CEDB-4EE4-B6E9-27F26E857B91"></a><h4 id="ADMIN-GUID-DC463233-CEDB-4EE4-B6E9-27F26E857B91" class="sect4"><span class="enumeration_section">37.4.4</span>约束和刷新</h4>
                  <div>
                     <p>要在刷新实例化视图期间避免任何完整性约束违规，请在每个实例化视图上进行非主键完整性约束可延迟。</p>
                     <p>此要求包括具有<code class="codeph">NOT</code> <code class="codeph">NULL</code>约束的LOB列。此外，所有与外键约束相关的物化视图应一起刷新或在同一刷新组中刷新。
                     </p>
                     <div class="infoboxnote" id="GUID-DC463233-CEDB-4EE4-B6E9-27F26E857B91__GUID-05022FB8-B6D3-4FF0-8482-CFDF093C94FC">
                        <p class="notep1">注意：</p>
                        <p>物化视图的主键约束可能会也可能不会延迟。</p>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-DC463233-CEDB-4EE4-B6E9-27F26E857B91__GUID-063B4BC3-7FD8-42C1-8E4B-638B14E8DB0B">
                        <p class="notep1">也可以看看：</p>
                        <p>有关使约束可延迟的信息，请<a href="../sqlrf/constraint.html#SQLRF52180" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="read-only-materialized-view-architecture.html#GUID-B384BA50-BD3D-4457-B28B-16A28B214E76" title="要确保实例化视图与其主表一致，必须定期刷新实例化视图。">刷新过程</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>带有LOB的DDL和DML语句</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database SecureFiles and Large Objects Developer&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database SecureFiles and Large Objects Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="securefiles-and-large-objects-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T02:58:18-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96333-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="distributed-LOBs.html" title="Previous" type="text/html"></link>
      <link rel="next" href="value-semantic-LOBs.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SecureFiles and Large Objects Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADLOB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="distributed-LOBs.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="value-semantic-LOBs.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database SecureFiles和Large Objects Developer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="getting-started.html" property="item" typeof="WebPage"><span property="name">入门</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">带有LOB的DDL和DML语句</li>
            </ol>
            <a id="GUID-17F0F935-FD78-4F41-B6DF-86409522D667" name="GUID-17F0F935-FD78-4F41-B6DF-86409522D667"></a><a id="ADLOB45560"></a>
            
            <h2 id="ADLOB-GUID-17F0F935-FD78-4F41-B6DF-86409522D667" class="sect2"><span class="enumeration_chapter">6个</span>带有LOB的DDL和DML语句</h2>
         </header>
         <div class="ind">
            <div>
               <p>DDL和DML语句适用于LOB。</p>
               <p>话题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DDL-DML-statements-with-LOBs.html#GUID-571A3ACF-DEBF-4C83-B7F9-4F0889B08203">创建包含一个或多个LOB列的表</a></p>
                  </li>
                  <li>
                     <p><a href="DDL-DML-statements-with-LOBs.html#GUID-4DB85138-7C86-4085-AA54-D0A40B6DDAC1">创建包含LOB的嵌套表</a></p>
                  </li>
                  <li>
                     <p><a href="DDL-DML-statements-with-LOBs.html#GUID-C35F0A08-CF55-4097-9916-00B9CC98C7E3">通过从另一个表中选择LOB来插入行</a></p>
                  </li>
                  <li>
                     <p><a href="DDL-DML-statements-with-LOBs.html#GUID-99294FB3-0AFA-4C33-B9C8-0532ACFE69D9">将LOB值插入表中</a></p>
                  </li>
                  <li>
                     <p><a href="DDL-DML-statements-with-LOBs.html#GUID-6DF2E05A-985D-4921-B945-95FF1F85AA8D" title="您可以通过初始化LOB定位器绑定变量来插入行。">通过初始化LOB定位器绑定变量插入行</a></p>
                  </li>
                  <li>
                     <p><a href="DDL-DML-statements-with-LOBs.html#GUID-A02B0C82-EC75-4993-BF34-4AE83B07FAA4">使用EMPTY_CLOB（）或EMPTY_BLOB（）更新LOB</a></p>
                  </li>
                  <li>
                     <p><a href="DDL-DML-statements-with-LOBs.html#GUID-1C2EBE02-C5D6-4C01-AE25-B8AB6687C426">通过从另一个表中选择LOB来更新行</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-17F0F935-FD78-4F41-B6DF-86409522D667__GUID-83F22B7F-F298-4F61-8C77-4839ADB72EE7">
                  <p class="notep1">也可以看看：</p>
                  <p>有关如何在涉及超过4000个字节的绑定时<code class="codeph">INSERT</code> LOB的指南，请参阅<span class="q">“ <a href="data-interface-for-persistent-LOBs.html#GUID-5E2B4119-184C-4FE9-839D-3619CC23D9B7">INSERT和UPDATE操作中的所有大小的绑定</a> ”中</span>的以下部分。
                  </p>
               </div>
            </div><a id="ADLOB45562"></a><a id="ADLOB45561"></a><div class="props_rev_3"><a id="GUID-571A3ACF-DEBF-4C83-B7F9-4F0889B08203" name="GUID-571A3ACF-DEBF-4C83-B7F9-4F0889B08203"></a><h3 id="ADLOB-GUID-571A3ACF-DEBF-4C83-B7F9-4F0889B08203" class="sect3">创建包含一个或多个LOB列的表</h3>
               <div>
                  <div class="section">
                     <p>您可以创建包含一个或多个LOB列的表。</p>
                     <p>使用函数<code class="codeph">EMPTY_BLOB()</code>和<code class="codeph">EMPTY_CLOB()</code> ，生成的LOB已初始化，但未填充数据。另请注意，空的LOB不是<code class="codeph">NULL</code> 。</p>
                     <div class="infoboxnotealso" id="GUID-571A3ACF-DEBF-4C83-B7F9-4F0889B08203__GUID-D98461E0-B97B-4E20-8442-EA0CF3CAA3E5">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <p><a href="../sqlrf/SQL-Statements-DROP-CONTEXT-to-DROP-JAVA.html#SQLRF014" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a> ，用于在<code class="codeph">CREATE TABLE</code>和<code class="codeph">ALTER TABLE</code>使用LOB的语法的完整规范：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">BLOB</code> ， <code class="codeph">CLOB</code> ， <code class="codeph">NCLOB</code>和<code class="codeph">BFILE</code>列</p>
                           </li>
                           <li>
                              <p><code class="codeph">EMPTY_BLOB</code>和<code class="codeph">EMPTY_CLOB</code>函数</p>
                           </li>
                           <li>
                              <p>永久LOB列的LOB存储子句和嵌入对象的LOB属性</p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-571A3ACF-DEBF-4C83-B7F9-4F0889B08203__GUID-23CFDB46-1495-431E-B8B5-B6B79055D43E">脚本</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>这些示例使用以下示例模式：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>人力资源（ <code class="codeph">HR</code> ）</p>
                        </li>
                        <li>
                           <p>订单输入（ <code class="codeph">OE</code> ）</p>
                        </li>
                        <li>
                           <p>产品媒体（ <code class="codeph">PM</code> ）</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-571A3ACF-DEBF-4C83-B7F9-4F0889B08203__NOTE-1333-DD4EB024">
                        <p class="notep1">注意：</p>
                        <p>注意在创建<code class="codeph">PM</code>模式之前， <code class="codeph">HR</code>和<code class="codeph">OE</code>模式必须存在。
                        </p>
                     </div>
                     <div class="infoboxnote" id="GUID-571A3ACF-DEBF-4C83-B7F9-4F0889B08203__GUID-FC880C8C-43DF-4B40-8D84-A06636A33E4F">
                        <p class="notep1">注意：</p>
                        <p>因为您可以直接使用SQL DDL来创建包含一个或多个的表<span class="bold"> </span>高球<span class="bold"> </span>列，没有必要使用<code class="codeph">DBMS_LOB</code>包。
                        </p>
                     </div><pre class="oac_no_warn" dir="ltr">/ *用于创建Print_media，Online_media和相关结构的设置脚本* / DROP USER pm CASCADE; DROP DIRECTORY ADPHOTO_DIR; DROP DIRECTORY ADCOMPOSITE_DIR; DROP DIRECTORY ADGRAPHIC_DIR; DROP INDEX onlinemedia CASCADE CONSTRAINTS; DROP INDEX printmedia CASCADE CONSTRAINTS; DROP TABLE online_media CASCADE CONSTRAINTS; DROP TABLE print_media CASCADE CONSTRAINTS; DROP TYPE textdoc_typ; DROP TYPE textdoc_tab; DROP TYPE adheader_typ; DROP TABLE adheader_typ; CREATE USER pm由<span class="italic">密码</span>识别; GRANT CONNECT，RESOURCE到pm;创建目录ADPHOTO_DIR为'/ tmp /';创建目录ADCOMPOSITE_DIR为'/ tmp /';创建目录ADGRAPHIC_DIR为'/ tmp /'; CREATE DIRECTORY media_dir AS'/ tmp /';授权阅读目录ADPHOTO_DIR至pm;授权阅读目录ADCOMPOSITE_DIR至pm;授权阅读目录ADGRAPHIC_DIR至pm;授予读取目录media_dir至pm; CONNECT pm / <span class="italic">password</span> （或＆pass）;承诺; CREATE TABLE a_table（blob_col BLOB）; CREATE TYPE adheader_typ AS OBJECT（header_name VARCHAR2（256），creation_date DATE，header_text VARCHAR（1024），logo BLOB）; CREATE TYPE textdoc_typ AS OBJECT（document_typ VARCHAR2（32），formatted_doc BLOB）; CREATE TYPE Textdoc_ntab AS textdoc_typ的表; adheader_typ的CREATE TABLE adheader_tab（Ad_finaltext DEFAULT EMPTY_CLOB（），CONSTRAINT Take CHECK（Take IS NOT NULL），DEFAULT NULL）; CREATE TABLE online_media（product_id NUMBER（6），product_photo ORDSYS.ORDImage，product_photo_signature ORDSYS.ORDImageSignature，product_thumbnail ORDSYS.ORDImage，product_video ORDSYS.ORDVideo，product_audio ORDSYS.ORDAudio，product_text CLOB，product_testimonials ORDSYS.ORDDoc）;创建独特的索引onlinemedia_pk ON online_media（product_id）; ALTER TABLE online_media ADD（CONSTRAINT onlinemedia_pk PRIMARY KEY（product_id），CONSTRAINT loc_c_id_fk FOREIGN KEY（product_id）REFERENCES oe.product_information（product_id））; CREATE TABLE print_media（product_id NUMBER（6），ad_id NUMBER（6），ad_composite BLOB，ad_sourcetext CLOB，ad_finaltext CLOB，ad_fktextn NCLOB，ad_testdocs_ntab textdoc_tab，ad_photo BLOB，ad_graphic BFILE，ad_header adheader_typ，press_release LONG）NESTED TABLE ad_textdocs_ntab STORE AS textdocs_nestedtab; CREATE UNIQUE INDEX printmedia_pk ON print_media（product_id，ad_id）; ALTER TABLE print_media ADD（CONSTRAINT printmedia_pk PRIMARY KEY（product_id，ad_id），CONSTRAINT printmedia_fk FOREIGN KEY（product_id）REFERENCES oe.product_information（product_id））;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADLOB45563"></a><div class="props_rev_3"><a id="GUID-4DB85138-7C86-4085-AA54-D0A40B6DDAC1" name="GUID-4DB85138-7C86-4085-AA54-D0A40B6DDAC1"></a><h3 id="ADLOB-GUID-4DB85138-7C86-4085-AA54-D0A40B6DDAC1" class="sect3">创建包含LOB的嵌套表</h3>
               <div>
                  <div class="section">
                     <p>您可以创建包含LOB的嵌套表。</p>
                     <p>在基于该对象类型创建嵌套表之前，必须创建包含LOB属性的对象类型。在下面的例子中，表<code class="codeph">Print_media</code>包含嵌套表<code class="codeph">ad_textdoc_ntab</code>具有键入<code class="codeph">textdoc_tab</code> 。此类型使用两种LOB数据类型：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">BFILE</code> - 广告图形</p>
                        </li>
                        <li>
                           <p><code class="codeph">CLOB</code> - 广告抄本</p>
                        </li>
                     </ul>
                     <p>嵌套表的实际嵌入是在定义包含表的结构时完成的。在我们的示例中，当创建<code class="codeph">Print_media</code>表时，这由<code class="codeph">NESTED TABLE</code>语句实现，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">/ *创建类型textdoc_typ作为嵌套表textdoc_ntab的基本类型，其中textdoc_ntab包含LOB：* / CREATE TYPE textdoc_typ AS OBJECT（document_typ VARCHAR2（32），formatted_doc BLOB）; // *已创建类型。现在你需要一个* / / *嵌套的表来嵌入* / / *表Print_media中，所以：* / CREATE TYPE textdoc_ntab AS table of textdoc_typ; / CREATE TABLE textdoc_ntable（id NUMBER，ntab_col textdoc_ntab）NESTED TABLE ntab_col STORE AS textdoc_nestedtab; DROP TYPE textdoc_typ force; DROP TYPE textdoc_ntab; DROP TABLE textdoc_ntable;</pre><div class="infoboxnotealso" id="GUID-4DB85138-7C86-4085-AA54-D0A40B6DDAC1__GUID-EDA9DAF6-910F-44C3-8148-AA6007985BA7">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="DDL-DML-statements-with-LOBs.html#GUID-571A3ACF-DEBF-4C83-B7F9-4F0889B08203">创建包含一个或多个LOB列的表</a> ”</span> 
                              </p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adlob&amp;id=SQLRF01402" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADLOB45564"></a><div class="props_rev_3"><a id="GUID-C35F0A08-CF55-4097-9916-00B9CC98C7E3" name="GUID-C35F0A08-CF55-4097-9916-00B9CC98C7E3"></a><h3 id="ADLOB-GUID-C35F0A08-CF55-4097-9916-00B9CC98C7E3" class="sect3">通过从另一个表中选择LOB来插入行</h3>
               <div>
                  <div class="section">
                     <p>您可以插入包含LOB的行作为<code class="codeph">SELECT</code> 。</p>
                     <div class="infoboxnote" id="GUID-C35F0A08-CF55-4097-9916-00B9CC98C7E3__GUID-DF8DBEC2-2C7F-457F-AE4A-91EC36CB6B0D">
                        <p class="notep1">注意：</p>
                        <p>持久性LOB类型<code class="codeph">BLOB</code> ， <code class="codeph">CLOB</code>和<code class="codeph">NCLOB</code>使用<span class="italic">复制</span> <span class="italic">语义，</span>而不是<a id="d17440e515" class="indexterm-anchor"></a>适用于<code class="codeph">BFILE</code>的<span class="italic">引用语义</span> 。当<code class="codeph">BLOB</code> ， <code class="codeph">CLOB</code>或<code class="codeph">NCLOB</code>在同一个表或不同的表中从一行复制到另一行时，将复制<span class="italic">实际的</span> LOB值，而不仅仅是LOB定位器。
                        </p>
                     </div>
                     <p>对于LOB，使用对象关系方法的一个优点是可以将类型定义为相关表的公共模板。例如，存储存档材料的表和使用这些库的工作表共享一个共同的结构是有道理的。</p>
                     <p>例如，假设<code class="codeph">Print_media</code>和<code class="codeph">Online_media</code>具有相同的模式。该语句在表<code class="codeph">Print_media.创建一个新的LOB定位器<code class="codeph">Print_media.It also</code> LOB数据从<code class="codeph">Online_media</code>到插入表<code class="codeph">Print_media</code>的新LOB定位符所指向的位置。
                     </p>
                     <p>下面的代码段是基于这样的事实，该表<code class="codeph">Online_media</code>是相同类型的<code class="codeph">Print_media</code>由引用<code class="codeph">ad_textdocs_ntab</code>表的列<code class="codeph">Print_media</code> 。它将值插入库表，然后通过<code class="codeph">SELECT</code>将相同的数据插入到<code class="codeph">Print_media</code> 。</p><pre class="oac_no_warn" dir="ltr">/ *将记录存储在归档表Online_media：* / INSERT INTO Online_media VALUES（3060，NULL，NULL，NULL，NULL，'关于此CRT监视器的一些文本'，NULL）; / *通过从Online_media中选择将值插入Print_media：* / INSERT INTO Print_media（product_id，ad_id，ad_sourcetext）（SELECT product_id，11001，product_text FROM Online_media WHERE product_id = 3060）;</pre><div class="infoboxnotealso" id="GUID-C35F0A08-CF55-4097-9916-00B9CC98C7E3__GUID-FDECBDB6-00E9-40FB-BA7E-88682CAEA43A">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">INSERT</code>更多信息，请<a href="../sqlrf/INSERT.html#SQLRF01604" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adlob&amp;id=COMSC00040" target="_blank"><span class="italic">Oracle数据库示例模式，</span></a>用于描述此示例中使用的PM模式和<code class="codeph">Print_media</code>表</p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADLOB45566"></a><a id="ADLOB45567"></a><a id="ADLOB45565"></a><div class="props_rev_3"><a id="GUID-99294FB3-0AFA-4C33-B9C8-0532ACFE69D9" name="GUID-99294FB3-0AFA-4C33-B9C8-0532ACFE69D9"></a><h3 id="ADLOB-GUID-99294FB3-0AFA-4C33-B9C8-0532ACFE69D9" class="sect3"><span class="bold">将LOB值插入表中</span></h3>
               <div>
                  <div class="section">
                     <p>您可以使用<code class="codeph">EMPTY_CLOB()</code>或<code class="codeph">EMPTY_BLOB()</code>插入LOB值。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-99294FB3-0AFA-4C33-B9C8-0532ACFE69D9__GUID-C81318DC-25A0-41E3-BFA0-314EE0A5A76F">使用说明</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>以下是插入LOB的准则：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-99294FB3-0AFA-4C33-B9C8-0532ACFE69D9__GUID-9A856AC6-C33B-4F7F-8102-CF093A9A8082">插入之前使LOB列非空</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>在将数据写入持久性LOB之前，请使LOB列为非<code class="codeph">NULL</code> ;也就是说，LOB列必须包含指向空的或填充的LOB值的定位器。您可以使用函数<code class="codeph">EMPTY_BLOB()</code>作为默认谓词来初始化<code class="codeph">BLOB</code>列值。同样，可以使用函数<code class="codeph">EMPTY_CLOB()</code>初始化<code class="codeph">CLOB</code>或<code class="codeph">NCLOB</code>列值。
                     </p>
                     <p>您还可以使用小于4000字节的字符或原始字符串初始化LOB列。例如：</p><pre class="oac_no_warn" dir="ltr">INSERT INTO Print_media（product_id，ad_id，ad_sourcetext）VALUES（1,1，'This is a One Line Advertisement'）;</pre><p>请注意，您也可以执行此操作<a id="d17440e711" class="indexterm-anchor"></a> <code class="codeph">CREATE</code> <code class="codeph">TABLE</code>操作期间的初始化。
                     </p>
                     <div class="infoboxnotealso" id="GUID-99294FB3-0AFA-4C33-B9C8-0532ACFE69D9__NOTE-1255-DD50408E">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="DDL-DML-statements-with-LOBs.html#GUID-571A3ACF-DEBF-4C83-B7F9-4F0889B08203">创建包含一个或多个LOB列的表</a></p>
                     </div>
                     <p>这些函数是Oracle SQL中的特殊函数，不是<code class="codeph">DBMS_LOB</code>包的一部分。
                     </p><pre class="oac_no_warn" dir="ltr">/ *在表Print_media的新行中，使用EMPTY_CLOB（）初始化列ad_sourcetext和ad_fltextn，使用EMPTY_BLOB（）初始化列ad_composite和ad_photo，使用EMPTY_BLOB（）初始化嵌套表中的columns-doc列，使用EMPTY_BLOB（）初始化列对象中的列徽标：* / INSERT INTO Print_media VALUES（3060,11001，EMPTY_BLOB（），EMPTY_CLOB（），EMPTY_CLOB（），EMPTY_CLOB（），textdoc_tab（textdoc_typ（'HTML'，EMPTY_BLOB） （））），EMPTY_BLOB（），NULL，adheader_typ（'任何标题名称'，&lt;任何日期&gt;，'广告标题文字在这里'，EMPTY_BLOB（）），'新闻发布在这里'）;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADLOB45568"></a><div class="props_rev_3"><a id="GUID-6DF2E05A-985D-4921-B945-95FF1F85AA8D" name="GUID-6DF2E05A-985D-4921-B945-95FF1F85AA8D"></a><h3 id="ADLOB-GUID-6DF2E05A-985D-4921-B945-95FF1F85AA8D" class="sect3">通过初始化LOB定位器绑定变量插入行</h3>
               <div>
                  <p>您可以通过初始化LOB定位器绑定变量来插入行。</p>
                  <p>在几个程序环境中提供了此用例的示例：</p>
                  <p>话题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="DDL-DML-statements-with-LOBs.html#GUID-EDA6FBF5-7FF5-4A76-BA22-A36ACFA886BC">关于使用LOB定位器绑定变量插入行</a></p>
                     </li>
                     <li>
                        <p><a href="DDL-DML-statements-with-LOBs.html#GUID-A8AF57F8-5F21-4050-A9E0-2438D0F0B75C">PL / SQL：通过初始化LOB定位器绑定变量插入行</a> 
                        </p>
                     </li>
                     <li>
                        <p><a href="DDL-DML-statements-with-LOBs.html#GUID-5E85BE11-51C8-402E-A399-7713129CE099">C（OCI）：通过初始化LOB定位器绑定变量插入行</a> 
                        </p>
                     </li>
                     <li>
                        <p><a href="DDL-DML-statements-with-LOBs.html#GUID-10E7C91C-93FC-4CE0-9757-2EFC1DF1F5CC">COBOL（Pro * COBOL）：通过初始化LOB定位器绑定变量插入行</a></p>
                     </li>
                     <li>
                        <p><a href="DDL-DML-statements-with-LOBs.html#GUID-7D4D5121-4387-4266-9E05-6116DC12BAE2">C / C ++（Pro * C / C ++）：通过初始化LOB定位器绑定变量插入行</a> 
                        </p>
                     </li>
                     <li>
                        <p><a href="DDL-DML-statements-with-LOBs.html#GUID-54C45A10-A803-425E-AE53-4826745C213B">Java（JDBC）：通过初始化LOB定位器绑定变量来插入行</a></p>
                     </li>
                  </ul>
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>SQL： <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/adlob&amp;id=SQLRF01604" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> ， <code class="codeph">INSERT</code>语句</p>
                        </li>
                        <li>
                           <p>C（OCI）： <a href="../lnoci/introduction-to-relational-functions.html#LNOCI17094" target="_blank"><span class="italic">Oracle调用接口程序员指南</span></a> “关系函数”</p>
                        </li>
                        <li>
                           <p>C ++（OCCI）： <a href="../lncpp/introduction-to-occi.html#LNCPP-GUID-99077609-BFCC-4FF7-9D23-C45623DDD465" target="_blank"><span><cite>Oracle C ++调用接口程序员指南</cite></span></a></p>
                        </li>
                        <li>
                           <p>COBOL（Pro * COBOL） <a href="../lnpcb/introduction-and-concepts.html#LNPCB-GUID-5B383B0F-9628-443B-8CB7-D2C01607EED6" target="_blank"><span><cite>Pro * COBOL程序员指南</cite></span></a> ，了解有关LOB的信息，LOB语句的使用说明以及嵌入式SQL和预编译器指令 - <code class="codeph">INSERT</code> 。</p>
                        </li>
                        <li>
                           <p>C / C ++（Pro * C / C ++）： <a href="../lnpcc/embedded-SQL-statements-and-directives.html#LNPCC020" target="_blank"><span class="italic">Pro * C / C ++程序员指南</span></a> <code class="codeph">INSERT</code> 
                           </p>
                        </li>
                        <li>
                           <p>Java（JDBC）： <a href="../jjdbc/LOBs-and-BFiles.html#JJDBC15000" target="_blank"><span class="italic">Oracle数据库JDBC开发人员指南</span></a> “使用LOB” - 创建和填充<code class="codeph">BLOB</code>或<code class="codeph">CLOB</code> Colum</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="ADLOB45570"></a><a id="ADLOB45571"></a><a id="ADLOB45569"></a><div class="props_rev_3"><a id="GUID-EDA6FBF5-7FF5-4A76-BA22-A36ACFA886BC" name="GUID-EDA6FBF5-7FF5-4A76-BA22-A36ACFA886BC"></a><h4 id="ADLOB-GUID-EDA6FBF5-7FF5-4A76-BA22-A36ACFA886BC" class="sect4">关于使用LOB定位器绑定变量插入行</h4>
                  <div>
                     <p>你需要考虑这些要点。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-EDA6FBF5-7FF5-4A76-BA22-A36ACFA886BC__GUID-42D6B0E6-FA9F-441E-B248-70D2EB471E57"><span class="bold">前提条件</span></p>
                        <p>在使用此技术插入行之前，必须满足以下条件：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>包含源行的表必须存在。</p>
                           </li>
                           <li>
                              <p>目标表必须存在。</p>
                           </li>
                        </ul>
                        <p>有关创建包含LOB列的表的详细信息，请参阅<span class="q">“ <a href="LOB-storage-with-applications.html#GUID-517E1234-EFCD-4D16-B69B-23F72A18A77D">LOB存储参数</a> ”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EDA6FBF5-7FF5-4A76-BA22-A36ACFA886BC__GUID-64DFC46F-F89B-4A91-8E9F-58A7BC8FE013"><span class="bold">使用说明</span></p>
                        <p>有关如何在涉及超过4000个字节的<span class="q"><a href="data-interface-for-persistent-LOBs.html#GUID-5E2B4119-184C-4FE9-839D-3619CC23D9B7">绑定</a></span>时<code class="codeph">INSERT</code>和<code class="codeph">UPDATE</code>包含LOB的行的指南，请参阅<span class="q">“ <a href="data-interface-for-persistent-LOBs.html#GUID-5E2B4119-184C-4FE9-839D-3619CC23D9B7">INSERT和UPDATE操作中的所有大小的绑定</a> ”</span> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EDA6FBF5-7FF5-4A76-BA22-A36ACFA886BC__GUID-14997723-7CFB-49D1-9631-FF33A06A5719"><span class="bold">句法</span></p>
                        <p>有关在每个编程环境中使用此操作的详细信息，请查看这些语法参考：</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45573"></a><div class="props_rev_3"><a id="GUID-A8AF57F8-5F21-4050-A9E0-2438D0F0B75C" name="GUID-A8AF57F8-5F21-4050-A9E0-2438D0F0B75C"></a><h4 id="ADLOB-GUID-A8AF57F8-5F21-4050-A9E0-2438D0F0B75C" class="sect4">PL / SQL：通过初始化LOB定位器绑定变量插入行</h4>
                  <div>
                     <div class="section">
                        <p>您可以通过在PL / SQL中初始化LOB定位器绑定变量来插入行</p><pre class="oac_no_warn" dir="ltr">/ *当您安装* / / *数据库时，此文件安装在以下路径中：$ ORACLE_HOME / rdbms / demo / lobs / plsql / linsert.sql * / / *通过插入语句插入行* / CREATE OR REPLACE程序insertLOB_proc（Lob_loc IN BLOB）是BEGIN / *将BLOB插入行* / DBMS_OUTPUT.PUT_LINE（'------------ LOB INSERT EXAMPLE ----------- - '）; INSERT INTO print_media（product_id，ad_id，ad_photo）值（3106,60315，Lob_loc）;结束; /</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45574"></a><div class="props_rev_3"><a id="GUID-5E85BE11-51C8-402E-A399-7713129CE099" name="GUID-5E85BE11-51C8-402E-A399-7713129CE099"></a><h4 id="ADLOB-GUID-5E85BE11-51C8-402E-A399-7713129CE099" class="sect4">C（OCI）：通过初始化LOB定位器绑定变量插入行</h4>
                  <div>
                     <div class="section">
                        <p>您可以通过在C（OCI）中初始化LOB定位器绑定变量来插入行。</p><pre class="oac_no_warn" dir="ltr">/ *当您安装* / / *数据库时，此文件安装在以下路径中：$ ORACLE_HOME / rdbms / demo / lobs / oci / linsert.c * / / *使用Bind Variables将Locator插入表中。* / #include &lt;oratypes.h&gt; #include &lt;lobdemo.h&gt; void insertLOB_proc（OCILobLocator * Lob_loc，OCIEnv * envhp，OCIError * errhp，OCISvcCtx * svchp，OCIStmt * stmthp）{int product_id; OCIBind * bndhp3; OCIBind * bndhp2; OCIBind * bndhp1; text * insstmt =（text *）“INSERT INTO Print_media（product_id，ad_id，ad_sourcetext）\ VALUES（：1，：2，：3）”; printf（“----------- OCI Lob Insert Demo -------------- \ n”）; / *使用product_id = 3060 * / product_id =（int）3060将定位器插入Print_media表; / *准备SQL语句* / checkerr（errhp，OCIStmtPrepare（stmthp，errhp，insstmt，（ub4）strlen（（char *）insstmt），（ub4）OCI_NTV_SYNTAX，（ub4）OCI_DEFAULT））; / *绑定绑定位置* / checkerr（errhp，OCIBindByPos（stmthp，＆bndhp1，errhp，（ub4）1，（void *）＆product_id，（sb4）sizeof（product_id），SQLT_INT，（void *）0，（ub2 * ）0，（ub2 *）0，（ub4）0，（ub4 *）0，（ub4）OCI_DEFAULT））; checkerr（errhp，OCIBindByPos（stmthp，＆bndhp1，errhp，（ub4）2，（void *）＆product_id，（sb4）sizeof（product_id），SQLT_INT，（void *）0，（ub2 *）0，（ub2 *）0 ，（ub4）0，（ub4 *）0，（ub4）OCI_DEFAULT））; checkerr（errhp，OCIBindByPos（stmthp，＆bndhp2，errhp，（ub4）3，（void *）＆Lob_loc，（sb4）0，SQLT_CLOB，（void *）0，（ub2 *）0，（ub2 *）0，（ub4 ）0，（ub4 *）0，（ub4）OCI_DEFAULT））; / *执行SQL语句* / checkerr（errhp，OCIStmtExecute（svchp，stmthp，errhp，（ub4）1，（ub4）0，（CONST OCISnapshot *）0，（OCISnapshot *）0，（ub4）OCI_DEFAULT））; }</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45575"></a><div class="props_rev_3"><a id="GUID-10E7C91C-93FC-4CE0-9757-2EFC1DF1F5CC" name="GUID-10E7C91C-93FC-4CE0-9757-2EFC1DF1F5CC"></a><h4 id="ADLOB-GUID-10E7C91C-93FC-4CE0-9757-2EFC1DF1F5CC" class="sect4">COBOL（Pro * COBOL）：通过初始化LOB定位器绑定变量插入行</h4>
                  <div>
                     <div class="section">
                        <p>您可以通过在COBOL（Pro * COBOL）中初始化LOB定位器绑定变量来插入行。</p><pre class="oac_no_warn" dir="ltr">*安装*数据库时，此文件安装在以下路径中：$ ORACLE_HOME / rdbms / demo / lobs / procob / linsert.pco IDENTIFICATION DIVISION。 PROGRAM-ID。 INSERT，LOB。环境部门。数据部门。工作储存部分。 01 BLOB1 SQL-BLOB。 01 USERID PIC X（11）VALUES“PM / <span class="italic">密码</span> ”。EXEC SQL包含SQLCA END-EXEC。程序部门。 INSERT，LOB。执行SQL WHENEVER SQLERROR执行SQL-ERROR END-EXEC。 EXEC SQL CONNECT：USERID END-EXEC。 *初始化BLOB定位器EXEC SQL ALLOCATE：BLOB1 END-EXEC。 *填充LOB EXEC SQL WHENEVER NOT FOUND GOTO END-OF-BLOB END-EXEC。 EXEC SQL SELECT AD_PHOTO INTO：BLOB1 FROM PRINT_MEDIA WHERE PRODUCT_ID = 2268 AND AD_ID = 21001 END-EXEC。 *插入PRODUCT_ID为3060 EXEC SQL INSERT INTO PRINT_MEDIA（PRODUCT_ID，AD_PHOTO）VALUES（3060,11001，：BLOB1）END-EXEC的值。 *定位器END-OF-BLOB持有的免费资源。 EXEC SQL WHENEVER NOT FOUND CONTINUE END-EXEC。 EXEC SQL FREE：BLOB1 END-EXEC。 EXEC SQL ROLLBACK工作发布END-EXEC。停止运行。 SQL-ERROR。执行SQL WHENEVER SQLERROR CONTINUE END-EXEC。显示“”。显示“ORACLE ERROR DETECTED：”。显示“”。显示SQLERRMC。 EXEC SQL ROLLBACK工作发布END-EXEC。停止运行。</pre><div class="infoboxnote" id="GUID-10E7C91C-93FC-4CE0-9757-2EFC1DF1F5CC__GUID-0C239726-24E3-4FE9-B0AE-4DFED0E0795F">
                           <p class="notep1">注意：</p>
                           <p>为了简化演示此功能，此示例不执行已部署系统通常使用的密码管理技术。在生产环境中，请遵循Oracle数据库密码管理准则，并禁用任何示例帐户。有关密码管理指南和其他安全建议，请参阅<a href="../dbseg/managing-security-for-application-developers.html#DBSEG50053" target="_blank"><span class="italic">Oracle数据库安全指南</span></a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45576"></a><div class="props_rev_3"><a id="GUID-7D4D5121-4387-4266-9E05-6116DC12BAE2" name="GUID-7D4D5121-4387-4266-9E05-6116DC12BAE2"></a><h4 id="ADLOB-GUID-7D4D5121-4387-4266-9E05-6116DC12BAE2" class="sect4">C / C ++（Pro * C / C ++）：通过初始化LOB定位器绑定变量插入行</h4>
                  <div>
                     <div class="section">
                        <p>您可以通过在C / C ++（Pro * C / C ++）中初始化LOB定位器绑定变量来插入行。</p><pre class="oac_no_warn" dir="ltr">/ *当您安装* / / *数据库时，此文件安装在以下路径中：$ ORACLE_HOME / rdbms / demo / lobs / proc / linsert.pc * / #include &lt;oci.h&gt; #include &lt;stdio.h&gt; #include &lt;sqlca.h&gt; void Sample_Error（）{EXEC SQL WHENEVER SQLERROR CONTINUE; printf（“％。* s \ n”，sqlca.sqlerrm.sqlerrml，sqlca.sqlerrm.sqlerrmc）; EXEC SQL ROLLBACK工作版;出口（1）; void insertUseBindVariable_proc（Rownum，Lob_loc）int Rownum，Rownum2; OCIBlobLocator * Lob_loc; {EXEC SQL WHENEVER SQLERROR DO Sample_Error（）; EXEC SQL INSERT INTO Print_media（product_id，ad_id，ad_photo）VALUES（：Rownum，：Rownum2，：Lob_loc）; } void insertBLOB_proc（）{OCIBlobLocator * Lob_loc; / *初始化BLOB定位器：* / EXEC SQL ALLOCATE：Lob_loc; / *从product_id = 2268和ad_id = 21001的行中选择LOB：* / EXEC SQL SELECT ad_photo INTO：Lob_loc FROM Print_media WHERE product_id = 2268 AND ad_id = 21001; / *插入product_id = 3106和ad_id = 13001的行：* / insertUseBindVariable_proc（3106,13001，Lob_loc）; / *释放定位器持有的资源：* / EXEC SQL FREE：Lob_loc; } void main（）{char * samp =“pm / <span class="italic">password</span> ”; EXEC SQL CONNECT：pm; insertBLOB_proc（）; EXEC SQL ROLLBACK工作版; }</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADLOB45578"></a><div class="props_rev_3"><a id="GUID-54C45A10-A803-425E-AE53-4826745C213B" name="GUID-54C45A10-A803-425E-AE53-4826745C213B"></a><h4 id="ADLOB-GUID-54C45A10-A803-425E-AE53-4826745C213B" class="sect4">Java（JDBC）：通过初始化LOB定位器绑定变量来插入行</h4>
                  <div>
                     <div class="section">
                        <p>您可以通过在Java（JDBC）中初始化LOB定位器绑定变量来插入行。</p><pre class="oac_no_warn" dir="ltr">/ *当您安装* / / *数据库时，此文件安装在以下路径中：$ ORACLE_HOME / rdbms / demo / lobs / java / linsert.java * / //核心JDBC类：import java.sql。DriverManager的; import java.sql。连接; import java.sql。声明; import java.sql。PreparedStatement的; import java.sql。ResultSet的; import java.sql。的SQLException; // Oracle特定JDBC类：import oracle.sql。*; import oracle.jdbc.driver。*; public class linsert {public static void main（String args []）throws Exception {//加载Oracle JDBC驱动程序DriverManager.registerDriver（new oracle.jdbc.driver。OracleDriver（））; //连接数据库：Connection conn = DriverManager.getConnection（“jdbc：oracle：oci8：@”，“pm”，“ <span class="italic">password</span> ”）; //自动提交关闭时速度更快：conn.setAutoCommit（false）; //创建一个Statement：Statement stmt = conn.createStatement（）;尝试{ResultSet rset = stmt.executeQuery（“SELECT ad_photo FROM Print_media WHERE product_id = 3106 AND ad_id = 13001”）; if（rset.next（））{//从ResultSet中检索LOB定位器BLOB adphoto_blob =（（OracleResultSet）rset）.getBLOB（1）; OraclePreparedStatement ops =（OraclePreparedStatement）conn.prepareStatement（“INSERT INTO Print_media（product_id，ad_id，ad_photo）VALUES（2268，”+“21001，？）“）; ops.setBlob（1，adphoto_blob）; ops.execute（）; conn.commit（）; conn.close（）;}} catch（SQLException e）{e.printStackTrace（）;}}}</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADLOB45580"></a><a id="ADLOB45579"></a><div class="props_rev_3"><a id="GUID-A02B0C82-EC75-4993-BF34-4AE83B07FAA4" name="GUID-A02B0C82-EC75-4993-BF34-4AE83B07FAA4"></a><h3 id="ADLOB-GUID-A02B0C82-EC75-4993-BF34-4AE83B07FAA4" class="sect3">使用EMPTY_CLOB（）或EMPTY_BLOB（）更新LOB</h3>
               <div>
                  <div class="section">
                     <p>您可以使用<code class="codeph">EMPTY_CLOB()</code>或<code class="codeph">EMPTY_BLOB()</code>更新LOB。
                     </p>
                     <div class="infoboxnote" id="GUID-A02B0C82-EC75-4993-BF34-4AE83B07FAA4__GUID-1A6EA93C-85A4-4091-BF36-8BB327CE53AC">
                        <p class="notep1">注意：</p>
                        <p>使用实际值更新LOB而不是使用<code class="codeph">EMPTY_CLOB()</code>或<code class="codeph">EMPTY_BLOB()</code>时，性能会提高。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A02B0C82-EC75-4993-BF34-4AE83B07FAA4__GUID-FC622CA2-A450-4B20-BEDD-FB50F06F3D42">前提条件</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>在将数据写入持久性LOB之前，请使LOB列为非<code class="codeph">NULL</code> ;也就是说，LOB列必须包含指向空的或填充的LOB值的定位器。您可以使用函数<code class="codeph">EMPTY_BLOB()</code>作为默认谓词来初始化<code class="codeph">BLOB</code>列值。同样，可以使用函数<code class="codeph">EMPTY_CLOB()</code>初始化<code class="codeph">CLOB</code>或<code class="codeph">NCLOB</code>列值。
                     </p>
                     <p>您还可以使用小于4000字节的字符或原始字符串初始化LOB列。例如：</p><pre class="oac_no_warn" dir="ltr">UPDATE Print_media SET ad_sourcetext ='这是一个单行故事'WHERE product_id = 2268;</pre><p>您可以在<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>期间执行此初始化（请参阅<span class="q">“ <a href="DDL-DML-statements-with-LOBs.html#GUID-571A3ACF-DEBF-4C83-B7F9-4F0889B08203">创建包含一个或多个LOB列的表</a> ”</span> ），或者在本例中，通过<code class="codeph">INSERT</code>执行此初始化。</p>
                     <p>以下示例显示了使用<code class="codeph">EMPTY_CLOB</code>操作对不同数据类型的一系列更新。
                     </p><pre class="oac_no_warn" dir="ltr">UPDATE Print_media SET ad_sourcetext = EMPTY_CLOB（）WHERE product_id = 3060 AND ad_id = 11001;更新Print_media SET ad_fltextn = EMPTY_CLOB（）WHERE product_id = 3060 AND ad_id = 11001;更新Print_media SET ad_photo = EMPTY_BLOB（）WHERE product_id = 3060 AND ad_id = 11001;</pre><div class="infoboxnotealso" id="GUID-A02B0C82-EC75-4993-BF34-4AE83B07FAA4__GUID-D98EC283-29BF-4F50-9964-BF8E85B144EC">
                        <p class="notep1">也可以看看：</p>
                        <p>SQL： <a href="../sqlrf/UPDATE.html#SQLRF01708" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a>有关<code class="codeph">UPDATE</code>更多信息</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADLOB45581"></a><div class="props_rev_3"><a id="GUID-1C2EBE02-C5D6-4C01-AE25-B8AB6687C426" name="GUID-1C2EBE02-C5D6-4C01-AE25-B8AB6687C426"></a><h3 id="ADLOB-GUID-1C2EBE02-C5D6-4C01-AE25-B8AB6687C426" class="sect3">通过从另一个表中选择LOB来更新行</h3>
               <div>
                  <div class="section">
                     <p>您可以使用SQL <code class="codeph">UPDATE AS SELECT</code>语句通过从另一个表中选择LOB来更新包含LOB列的行。
                     </p>
                     <p>要使用此技术，您必须通过引用进行更新。例如，以下代码更新来自<code class="codeph">online_media</code>数据：</p><pre class="oac_no_warn" dir="ltr">Rem通过从另一个表中选择LOB来更新行（持久LOB）UPDATE Print_media SET ad_sourcetext =（SELECT * product_text FROM online_media WHERE product_id = 3060）; WHERE product_id = 3060 AND ad_id = 11001;</pre></div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
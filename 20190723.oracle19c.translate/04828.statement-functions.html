<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Lists and describes the statement functions."></meta>
      <meta name="description" content="Lists and describes the statement functions."></meta>
      <title>声明函数</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content="Lists and describes the statement functions."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="oracle-call-interface-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-14T08:46:00-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96204-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="intro-to-relational-functions.html" title="Previous" type="text/html"></link>
      <link rel="next" href="lob-functions.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle Call Interface Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNOCI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="intro-to-relational-functions.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="lob-functions.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="more-database-access-c-api.html" property="item" typeof="WebPage"><span property="name">更多Oracle Database Access C API</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">声明函数</li>
            </ol>
            <a id="GUID-7C0AF073-7870-4866-BBC9-D2BF3D8E5CCE" name="GUID-7C0AF073-7870-4866-BBC9-D2BF3D8E5CCE"></a><a id="LNOCI17162"></a><a id="LNOCI161"></a>
            
            <h2 id="LNOCI-GUID-7C0AF073-7870-4866-BBC9-D2BF3D8E5CCE" class="sect2"><span class="enumeration_section">26.2</span>声明功能</h2>
         </header>
         <div class="ind">
            <div>
               <p>列出并描述语句功能。</p>
               <div class="section">
                  <p><a href="statement-functions.html#GUID-7C0AF073-7870-4866-BBC9-D2BF3D8E5CCE__CIHEFHCE" title="该表有2列。第1列是OCI函数名称，第2列描述其目的。">表26-1</a>列出了本节中描述的语句函数。对于所有新应用程序，请使用以“2”结尾的函数。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="tblformalwide" id="GUID-7C0AF073-7870-4866-BBC9-D2BF3D8E5CCE__CIHEFHCE">
                  <p class="titleintable">表26-1语句功能</p>
                  <table cellpadding="4" cellspacing="0" class="FormalWide" title="声明函数" width="100%" border="1" summary="This table has 2 columns. Column 1 is the OCI function name and column 2 describes its purpose. " frame="hsides" rules="rows">
                     <thead>
                        <tr align="left" valign="top">
                           <th align="left" valign="bottom" width="58%" id="d199178e201">功能</th>
                           <th align="left" valign="bottom" width="42%" id="d199178e204">目的</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="58%" id="d199178e209" headers="d199178e201 ">
                              <p><a href="statement-functions.html#GUID-98B26708-3E02-45C0-8258-5D5544F32BE9" title="将应用程序请求与服务器关联。">OCIStmtExecute（）</a></p>
                           </td>
                           <td align="left" valign="top" width="42%" headers="d199178e209 d199178e204 ">
                              <p>将语句发送到服务器以供执行</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="58%" id="d199178e220" headers="d199178e201 ">
                              <p><a href="statement-functions.html#GUID-DF585B90-58BA-45FC-B7CE-6F7F987C03B9" title="从（可滚动）结果集中获取一行。">OCIStmtFetch2（）</a></p>
                           </td>
                           <td align="left" valign="top" width="42%" headers="d199178e220 d199178e204 ">
                              <p>从查询中获取行并从（可滚动）结果集中提取行</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="58%" id="d199178e231" headers="d199178e201 ">
                              <p><a href="statement-functions.html#GUID-60B998F9-F213-43BA-AB84-76F1EC6A6687" title="返回已执行的PL / SQL语句句柄的隐式结果。">OCIStmtGetNextResult（）</a></p>
                           </td>
                           <td align="left" valign="top" width="42%" headers="d199178e231 d199178e204 ">
                              <p>返回已执行的PL / SQL语句句柄的隐式结果</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="58%" id="d199178e242" headers="d199178e201 ">
                              <p><a href="statement-functions.html#GUID-3D9B5C7B-E2A1-485D-852C-2434F303EC11" title="返回分段操作的片段信息。">OCIStmtGetPieceInfo（）</a></p>
                           </td>
                           <td align="left" valign="top" width="42%" headers="d199178e242 d199178e204 ">
                              <p>获取分段操作的片段信息</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="58%" id="d199178e253" headers="d199178e201 ">
                              <p><a href="statement-functions.html#GUID-E6C1DC67-D464-4D2A-9F19-737423D31779" title="准备SQL或PL / SQL语句以便执行。">OCIStmtPrepare2（）</a></p>
                           </td>
                           <td align="left" valign="top" width="42%" headers="d199178e253 d199178e204 ">
                              <p>准备SQL或PL / SQL语句以便执行。如果已启用，则用户还可以选择使用语句缓存。</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="58%" id="d199178e264" headers="d199178e201 ">
                              <p><a href="statement-functions.html#GUID-256034CE-2ADB-4BE5-BC8D-748307F2EA8E" title="释放通过调用OCIStmtPrepare2（）获得的语句句柄。">OCIStmtRelease（）</a></p>
                           </td>
                           <td align="left" valign="top" width="42%" headers="d199178e264 d199178e204 ">
                              <p>释放语句句柄</p>
                           </td>
                        </tr>
                        <tr align="left" valign="top">
                           <td align="left" valign="top" width="58%" id="d199178e278" headers="d199178e201 ">
                              <p><a href="statement-functions.html#GUID-CDB6F3E3-0FB6-49A7-A8AE-83CD330A359F" title="设置分段操作的片段信息。">OCIStmtSetPieceInfo（）</a></p>
                           </td>
                           <td align="left" valign="top" width="42%" headers="d199178e278 d199178e204 ">
                              <p>设置分段操作的片段信息</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <!-- class="inftblhruleinformal" -->
            </div><a id="LNOCI17163"></a><div class="props_rev_3"><a id="GUID-98B26708-3E02-45C0-8258-5D5544F32BE9" name="GUID-98B26708-3E02-45C0-8258-5D5544F32BE9"></a><h3 id="LNOCI-GUID-98B26708-3E02-45C0-8258-5D5544F32BE9" class="sect3"><span class="enumeration_section">26.2.1</span> OCIStmtExecute（）</h3>
               <div>
                  <p>将应用程序请求与服务器关联。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-98B26708-3E02-45C0-8258-5D5544F32BE9__GUID-A6A89CEA-1CA6-464F-893B-59A9C649CE19">目的</p>
                     <p>将应用程序请求与服务器关联。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-98B26708-3E02-45C0-8258-5D5544F32BE9__GUID-E16B3BA2-87CE-4D6A-B2A0-F16145F9FD8C">句法</p><pre class="oac_no_warn" dir="ltr">sword OCIStmtExecute（OCISvcCtx * svchp，OCIStmt * stmtp，OCIError * errhp，ub4 iters，ub4 rowoff，const OCISnapshot * snap_in，OCISnapshot * snap_out，ub4 mode）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-98B26708-3E02-45C0-8258-5D5544F32BE9__GUID-8C87EB51-4837-4FE5-AFF5-67DFB99BEB2D">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-98B26708-3E02-45C0-8258-5D5544F32BE9__GUID-94B22E59-0266-4CDC-A815-CB3892BAE059"><!-- --></a> <span class="bold">svchp</span> （IN / OUT）</dt>
                        <dd>
                           <p>服务上下文句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-98B26708-3E02-45C0-8258-5D5544F32BE9__GUID-98AB964C-E9A5-4BA3-A3AF-06C0348C4CA7"><!-- --></a> <span class="bold">stmtp</span> （IN / OUT）</dt>
                        <dd>
                           <p>声明句柄。它定义了要在服务器上执行的语句和相关数据。如果<code class="codeph">svchp</code>指向Oracle7服务器，则<code class="codeph">svchp</code>仅具有版本8.x或更高版本支持的数据类型绑定的语句句柄无效。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-98B26708-3E02-45C0-8258-5D5544F32BE9__GUID-F8829107-3658-42E0-884B-AD5A04506BBE"><!-- --></a> <span class="bold">errhp</span> （IN / OUT）</dt>
                        <dd>
                           <p>当出现错误时，您可以传递给<code class="codeph">OCIErrorGet()</code>以获取诊断信息的错误句柄。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-98B26708-3E02-45C0-8258-5D5544F32BE9__GUID-836A20FE-D220-4503-9C7C-5A8FA2291385"><!-- --></a> <span class="bold">iters</span> （IN）</dt>
                        <dd>
                           <p>对于非<code class="codeph">SELECT</code>语句，执行此语句的次数等于<code class="codeph">iters</code> - <code class="codeph">rowoff</code> 。
                           </p>
                           <p>对于<code class="codeph">SELECT</code>语句，如果<code class="codeph">iters</code>非零，则必须为语句句柄完成定义。执行将<code class="codeph">iters</code>行提取到这些预定义的缓冲区中，并根据预取行数预取更多行。如果您不知道<code class="codeph">SELECT</code>语句检索了多少行，则将<code class="codeph">iters</code>设置为零。
                           </p>
                           <p>如果非<code class="codeph">SELECT</code>语句的<code class="codeph">iters</code> = 0，则此函数返回错误。
                           </p>
                           <p>如果对于DDL语句， <code class="codeph">iters</code>不为1，则此函数返回错误。
                           </p>
                           <div class="infoboxnote" id="GUID-98B26708-3E02-45C0-8258-5D5544F32BE9__GUID-3B1D6C9A-63FB-4347-8E2F-A60DE285792B">
                              <p class="notep1">注意：</p>
                              <p>对于数组DML操作，设置<code class="codeph">iters</code> &lt;= 32767以获得更好的性能。
                              </p>
                           </div>
                        </dd>
                        <dt class="dlterm"><a name="GUID-98B26708-3E02-45C0-8258-5D5544F32BE9__GUID-7315C89B-0651-4F44-9408-B7773387F991"><!-- --></a> <span class="bold">rowoff</span> （IN）</dt>
                        <dd>
                           <p>数组绑定中的数据的起始索引与此多行执行相关。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-98B26708-3E02-45C0-8258-5D5544F32BE9__GUID-4B5E2290-79A4-4E4D-9F7C-73AEA3989F65"><!-- --></a> <span class="bold">snap_in</span> （IN）</dt>
                        <dd>
                           <p>此参数是可选的。如果提供，则它必须指向类型为<code class="codeph">OCI_DTYPE_SNAP</code>的快照描述符。必须从先前调用的<code class="codeph">snap_out</code>参数获取此描述符的内容。如果SQL不是<code class="codeph">SELECT</code>语句，则忽略描述符。此工具允许Oracle数据库的多个服务上下文查看数据库<span class="italic">提交的</span>数据的相同一致快照。但是，即使使用相同的快照，一个上下文中的未提交数据<span class="italic">也不</span>会对另一个上下文可见。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-98B26708-3E02-45C0-8258-5D5544F32BE9__GUID-FC43A8A0-8057-4965-880C-681F69CA5913"><!-- --></a> <span class="bold">snap_out</span> （OUT）</dt>
                        <dd>
                           <p>此参数是可选的。如果它被提供，那么它必须指向类型为<code class="codeph">OCI_DTYPE_SNAP</code>的描述符。此描述符使用不透明表示填充，该表示是当前Oracle数据库系统更改编号（SCN），适合作为后续调用<code class="codeph">OCIStmtExecute()</code>的<code class="codeph">snap_in</code>输入。要避免“快照太旧”错误，请不要超过必要时使用此描述符。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-98B26708-3E02-45C0-8258-5D5544F32BE9__GUID-4C5AC6D6-8A44-4790-90FB-30AE3CF200FE"><!-- --></a> <span class="bold">模式</span> （IN）</dt>
                        <dd>
                           <p>模式是：</p>
                        </dd>
                     </dl>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCI_BATCH_ERRORS</code> - 有关此模式的信息，请参阅<a href="using-sql_statements-in-oci.html#GUID-665D540E-9BD1-4505-9FB8-1EBD7C0DFB7D" title="OCI提供执行阵列DML操作的能力。">使用批处理错误模式</a> 。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_COMMIT_ON_SUCCESS</code> - 在此模式下执行语句时，如果执行成功完成，则在执行后提交当前事务。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_DEFAULT</code> - 在此模式下调用<code class="codeph">OCIStmtExecute()</code>执行该语句。它还隐式返回有关选择列表的描述信息。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_DESCRIBE_ONLY</code> - 此模式适用于希望在执行前描述查询的用户。在此模式下调用<code class="codeph">OCIStmtExecute()</code>不会执行该语句，但它会返回选择列表描述。为了最大限度地提高性能，Oracle建议应用程序以默认模式执行语句，并使用执行时附带的隐式描述。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_EXACT_FETCH</code> - 当应用程序事先知道它正在获取的行数时使用。此模式为Oracle Database 8或更高版本模式关闭预取，并要求在执行调用之前完成定义。使用此<code class="codeph">mode</code>会在获取所需的行后取消游标，并可能导致服务器端资源使用量减少。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_PARSE_ONLY</code> - 此模式允许用户在执行前解析查询。在此模式下执行会解析查询并返回SQL中的解析错误（如果有）。用户必须注意，这涉及到服务器的额外往返。为了最大限度地提高性能，Oracle建议用户以默认模式执行语句，该模式将语句作为捆绑操作的一部分进行分析。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_STMT_SCROLLABLE_READONLY</code> - 结果集可滚动所必需的。结果集无法更新。有关此模式的更多信息，请参见<a href="using-sql_statements-in-oci.html#GUID-E0EAF0A9-2C7D-468D-BF43-C9056F3497E6" title="如果OCI应用程序已处理查询，则通常需要在语句完成执行后使用OCIStmtFetch2（）获取结果。">关于获取结果</a> 。此模式不能与任何其他模式一起使用。
                           </p>
                           <p><code class="codeph">OCI_RETURN_ROW_COUNT_ARRAY</code> - 此模式允许用户每次迭代获得DML行<code class="codeph">OCI_RETURN_ROW_COUNT_ARRAY</code> 。对于非DML的语句，传递此模式是错误的。有关更多信息，请参见<a href="handle-and-descriptor-attributes.html#GUID-A251CF91-EB9F-4DBC-8BB8-FB5EA92C20DE" title="列出并描述语句句柄属性。">语句句柄属性</a> 。此模式可与<code class="codeph">OCI_BATCH_ERRORS</code>一起使用。</p>
                        </li>
                     </ul>
                     <p>这些模式并不相互排斥;您可以一起使用它们，但<code class="codeph">OCI_STMT_SCROLLABLE_READONLY</code>除外。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-98B26708-3E02-45C0-8258-5D5544F32BE9__GUID-A03C5259-A9DB-4753-AFCA-9E896BCD0DD9">评论</p>
                     <p>此函数用于执行准备好的SQL语句。使用执行调用，应用程序将请求与服务器相关联。</p>
                     <p>如果执行<code class="codeph">SELECT</code>语句，则可以隐式地将选择列表的描述作为响应。此描述在客户端缓冲，用于描述，提取和定义类型转换。因此，仅在执行之后描述选择列表是最佳的。
                     </p>
                     <div class="infoboxnotealso" id="GUID-98B26708-3E02-45C0-8258-5D5544F32BE9__GUID-B173598A-DB6B-4D21-B3A7-A4347F02D1A9">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="using-sql_statements-in-oci.html#GUID-DDB109DD-52EB-4AA8-A69A-34015F8D5D6E" title="如果您的OCI应用程序正在处理查询，您可能需要获取有关选择列表中的项目的更多信息。">关于描述选择列表项</a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>对于<code class="codeph">SELECT</code>语句，也可以隐式获得一些结果。在执行结束时接收并缓冲行。对于具有小行数的查询，如果到达提取结束，则预取会导致在服务器中释放内存，这可能导致内存使用减少。已定义set属性调用以设置要为每个结果集预取的行数。
                     </p>
                     <p>对于<code class="codeph">SELECT</code>语句，在执行结束时，语句句柄隐式维护对执行它的服务上下文的引用。开发人员有责任维护服务上下文的完整性。保留隐式引用，直到释放语句句柄或取消提取或达到提取条件结束。
                     </p>
                     <p>要重新执行DDL语句，必须使用<code class="codeph">OCIStmtPrepare2()</code>再次准备语句。
                     </p>
                     <div class="infoboxnote" id="GUID-98B26708-3E02-45C0-8258-5D5544F32BE9__GUID-5BCECC04-5577-4EB5-97B0-984AAD8B4ED9">
                        <p class="notep1">注意：</p>
                        <p>如果在调用<code class="codeph">OCIStmtExecute()</code>之前为<code class="codeph">SELECT</code>语句定义了输出变量，则将由<code class="codeph">iters</code>指定的行数直接提取到定义的输出缓冲区中，并预取与预取计数等效的其他行。如果没有其他行，则完成提取而不调用<a href="statement-functions.html#GUID-DF585B90-58BA-45FC-B7CE-6F7F987C03B9" title="从（可滚动）结果集中获取一行。">OCIStmtFetch2（）</a>或弃用<a href="deprecated-oci-functions.html#GUID-536D38A8-B463-48F8-8B91-FD3F2872AF85" title="在Oracle 11g R2（11.2）之前的版本中不推荐使用此函数。">OCIStmtFetch（）</a> 。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="statement-functions.html#GUID-E6C1DC67-D464-4D2A-9F19-737423D31779" title="准备SQL或PL / SQL语句以便执行。">OCIStmtPrepare2（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-98B26708-3E02-45C0-8258-5D5544F32BE9__GUID-1DC5636F-CB73-411B-888F-E559C5A18F56">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="oci-programming-basics.html#GUID-83F4D3B1-56A7-4EEE-A905-BB84D399713D" title="OCI呼吁完成民意调查。">OCI中的轮询模式操作</a></p>
                  </div>
               </div>
               
            </div><a id="LNOCI17165"></a><div class="props_rev_3"><a id="GUID-DF585B90-58BA-45FC-B7CE-6F7F987C03B9" name="GUID-DF585B90-58BA-45FC-B7CE-6F7F987C03B9"></a><h3 id="LNOCI-GUID-DF585B90-58BA-45FC-B7CE-6F7F987C03B9" class="sect3"><span class="enumeration_section">26.2.2</span> OCIStmtFetch2（）</h3>
               <div>
                  <p>从（可滚动）结果集中获取一行。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-DF585B90-58BA-45FC-B7CE-6F7F987C03B9__GUID-89A62EC7-0F34-4E07-BF7E-59EF4B81E9E4">目的</p>
                     <p>从（可滚动）结果集中获取一行。建议您使用此fetch调用而不是不推荐的调用<code class="codeph">OCIStmtFetch()</code> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DF585B90-58BA-45FC-B7CE-6F7F987C03B9__GUID-02C9CC73-9836-43D3-8A93-3BEC067A48B3">句法</p><pre class="oac_no_warn" dir="ltr">sword OCIStmtFetch2（OCIStmt * stmthp，OCIError * errhp，ub4 nrows，ub2 orientation，sb4 fetchOffset，ub4 mode）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DF585B90-58BA-45FC-B7CE-6F7F987C03B9__GUID-A1846983-7D51-4C3D-92B9-39474EB18082">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-DF585B90-58BA-45FC-B7CE-6F7F987C03B9__GUID-2BAE1DEB-1219-4B15-86F1-D06F3097D733"><!-- --></a> stmthp（IN / OUT）</dt>
                        <dd>
                           <p>这是（可滚动）结果集的语句句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-DF585B90-58BA-45FC-B7CE-6F7F987C03B9__GUID-E71C8D72-ADCC-434C-A52F-4C0F6D225A82"><!-- --></a> errhp（IN / OUT）</dt>
                        <dd>
                           <p>如果发生错误，您可以传递给<code class="codeph">OCIErrorGet()</code>以获取诊断信息的错误句柄。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-DF585B90-58BA-45FC-B7CE-6F7F987C03B9__GUID-C942FE05-D723-4DBE-9251-21273BB63856"><!-- --></a> nrows（IN）</dt>
                        <dd>
                           <p>从当前位置获取的行数。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-DF585B90-58BA-45FC-B7CE-6F7F987C03B9__GUID-0C72A0AC-E6DD-4A4B-B7E5-F386A0887A15"><!-- --></a>方向（IN）</dt>
                        <dd>
                           <p>可接受的值是：</p>
                        </dd>
                     </dl>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCI_DEFAULT</code> - 与<code class="codeph">OCI_FETCH_NEXT</code>具有相同的效果</p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_FETCH_CURRENT</code> - 获取当前行。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_FETCH_NEXT</code> - 获取当前位置的下一行。它是默认值（与<code class="codeph">OCI_DEFAULT</code>具有相同的效果）。用于不可滚动的语句句柄。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_FETCH_FIRST</code> - 获取结果集中的第一行。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_FETCH_LAST</code> - 获取结果集中的最后一行。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_FETCH_PRIOR</code> - 将结果集放在结果集中当前行的上一行。您也可以使用此模式从“上一行”获取多行。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_FETCH_ABSOLUTE</code> - 使用绝对定位获取结果集中的行号（由<code class="codeph">fetchOffset</code>参数指定）。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_FETCH_RELATIVE</code> - 使用相对定位获取结果集中的行号（由<code class="codeph">fetchOffset</code>参数指定）。
                           </p>
                        </li>
                     </ul>
                     <dl>
                        <dt class="dlterm"><a name="GUID-DF585B90-58BA-45FC-B7CE-6F7F987C03B9__GUID-E00D197E-A7FF-40A8-A321-67A0B0DCE09B"><!-- --></a> fetchOffset（IN）</dt>
                        <dd>
                           <p>与orientation参数一起使用的偏移量，用于更改当前行位置。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-DF585B90-58BA-45FC-B7CE-6F7F987C03B9__GUID-329DA0E7-8053-4D1E-B443-47E00893EB07"><!-- --></a>模式（IN）</dt>
                        <dd>
                           <p><code class="codeph">OCI_DEFAULT</code> 。</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-DF585B90-58BA-45FC-B7CE-6F7F987C03B9__GUID-F72CEC78-EB59-47CF-BDCE-AD3EFF0C7677">评论</p>
                     <p>fetch调用与不推荐使用的<code class="codeph">OCIStmtFetch()</code>调用类似，但添加了<code class="codeph">fetchOffset</code>参数。它可以在任何语句句柄上使用，无论它是否可滚动。对于<span class="italic">不可滚动的语句句柄</span> ，唯一可接受的<code class="codeph">orientation</code>值是<code class="codeph">OCI_FETCH_NEXT</code> ，并忽略<code class="codeph">fetchOffset</code>参数。
                     </p>
                     <p>对于新应用程序，建议您使用此调用<code class="codeph">OCIStmtFetch2()</code> 。
                     </p>
                     <p>一个<code class="codeph">fetchOffset</code>与<code class="codeph">orientation</code>设定为<code class="codeph">OCI_FETCH_RELATIVE</code>等同于所有的以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCI_FETCH_CURRENT</code> ，其值为<code class="codeph">fetchOffset</code>等于0</p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_FETCH_NEXT</code> ，其值<code class="codeph">fetchOffset</code>等于1</p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_FETCH_PRIOR</code> ，其值<code class="codeph">fetchOffset</code>等于-1</p>
                        </li>
                     </ul>
                     <p><code class="codeph">OCI_ATTR_UB8_ROW_COUNT</code>包含提取的最高绝对行值。
                     </p>
                     <p>除<code class="codeph">OCI_FETCH_ABSOLUTE</code>和<code class="codeph">OCI_FETCH_RELATIVE</code>之外的所有其他定向模式<code class="codeph">OCI_FETCH_RELATIVE</code>忽略<code class="codeph">fetchOffset</code>值。
                     </p>
                     <p>此调用还可用于通过使用<code class="codeph">OCI_FETCH_LAST</code>然后在<code class="codeph">OCI_ATTR_CURRENT_POSITION</code>上调用<code class="codeph">OCIAttrGet()</code>来确定结果集中的行数。但这次通话的响应时间可能很长。如果使用<code class="codeph">OCI_FETCH_LAST</code>方向将<code class="codeph">nrows</code>设置为大于1，则认为nrows为1。
                     </p>
                     <p>返回代码与不推荐使用的<code class="codeph">OCIStmtFetch()</code> ，只是每次在可滚动语句句柄（或执行）上进行提取时返回带有返回码<code class="codeph">OCI_NO_DATA</code> <code class="codeph">OER(1403)</code> ，而不是应用程序请求的所有行都可以牵强。
                     </p>
                     <p>如果在<code class="codeph">nrows</code>参数设置为0的情况下调用<code class="codeph">OCIStmtFetch2()</code> ， <code class="codeph">OCIStmtFetch2()</code>取消游标。
                     </p>
                     <p>必须显式取消可滚动语句句柄（即，使用0行获取）或释放可滚动语句句柄以释放可滚动游标的服务器端资源。在接收<code class="codeph">OER(1403)</code>隐式取消不可滚动的语句句柄<code class="codeph">OER(1403)</code> 。
                     </p>
                     <p>使用<code class="codeph">OCI_ATTR_ROWS_FETCHED</code>查找在上次提取调用中成功提取到用户缓冲区的行数。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="deprecated-oci-functions.html#GUID-536D38A8-B463-48F8-8B91-FD3F2872AF85" title="在Oracle 11g R2（11.2）之前的版本中不推荐使用此函数。">OCIStmtFetch（）</a></li>
                        <li><a href="statement-functions.html#GUID-98B26708-3E02-45C0-8258-5D5544F32BE9" title="将应用程序请求与服务器关联。">OCIStmtExecute（）</a></li>
                        <li><a href="bind-define-describe-functions.html#GUID-D28DF5A7-3C75-4E52-82F7-A5D6D5714E69" title="在SQL语句或PL / SQL块中创建程序变量和占位符之间的关联。">OCIBindByPos（）</a></li>
                        <li><a href="bind-define-describe-functions.html#GUID-5C505821-323D-473D-825B-448C8D9A6702" title="在SQL语句或PL / SQL块中创建程序变量和占位符之间的关联。当客户端上的实际长度超过UB2MAXVAL时，在处理数据类型时使用此调用。">OCIBindByPos2（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                        <li><a href="using-sql_statements-in-oci.html#GUID-1728D572-BED3-4F80-BDC3-E6F9A66046B2" title="游标是结果集中的当前位置。">关于在OCI中使用可滚动游标</a></li>
                        <li><a href="oci-programming-basics.html#GUID-83F4D3B1-56A7-4EEE-A905-BB84D399713D" title="OCI呼吁完成民意调查。">OCI中的轮询模式操作</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI72808"></a><div class="props_rev_3"><a id="GUID-60B998F9-F213-43BA-AB84-76F1EC6A6687" name="GUID-60B998F9-F213-43BA-AB84-76F1EC6A6687"></a><h3 id="LNOCI-GUID-60B998F9-F213-43BA-AB84-76F1EC6A6687" class="sect3"><span class="enumeration_section">26.2.3</span> OCIStmtGetNextResult（）</h3>
               <div>
                  <p>返回已执行的PL / SQL语句句柄的隐式结果。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-60B998F9-F213-43BA-AB84-76F1EC6A6687__GUID-2A6CDD9D-9CAB-474E-A59D-542EFA4D0601">目的</p>
                     <p>返回已执行的PL / SQL语句句柄的隐式结果。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-60B998F9-F213-43BA-AB84-76F1EC6A6687__GUID-53AB55AA-CD68-4FA5-8CE3-810EDF6DCCBC">句法</p><pre class="oac_no_warn" dir="ltr">sword OCIStmtGetNextResult（OCIStmt * stmthp，OCIError * errhp，void ** result，ub4 * rtype，ub4 mode）</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-60B998F9-F213-43BA-AB84-76F1EC6A6687__GUID-BBF94D26-A12B-419E-89FC-A11965B44364">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-60B998F9-F213-43BA-AB84-76F1EC6A6687__GUID-C9AA5F24-D793-46C2-A1D6-912391704690"><!-- --></a> stmthp（IN）</dt>
                        <dd>
                           <p>执行的语句句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-60B998F9-F213-43BA-AB84-76F1EC6A6687__GUID-6A4DF194-B480-4558-8A64-9E7994D352B9"><!-- --></a> errhp（IN）</dt>
                        <dd>
                           <p>一个错误句柄，您可以在出现错误时传递给<code class="codeph">OCIErrorGet()</code>以获取诊断信息。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-60B998F9-F213-43BA-AB84-76F1EC6A6687__GUID-42FC2674-0AA9-4106-AC6F-4F63A2D029B3"><!-- --></a>结果（OUT）</dt>
                        <dd>
                           <p>执行的PL / SQL语句的下一个隐式结果。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-60B998F9-F213-43BA-AB84-76F1EC6A6687__GUID-1DEDE130-65A6-4013-98D8-164C549CC5EA"><!-- --></a> rtype（OUT）</dt>
                        <dd>
                           <p>隐式结果的类型。唯一可能的值是<code class="codeph">OCI_RESULT_TYPE_SELECT</code> 。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-60B998F9-F213-43BA-AB84-76F1EC6A6687__GUID-9847E2DB-4812-408E-B807-519980F9C04F"><!-- --></a>模式（IN）</dt>
                        <dd>
                           <p>唯一可能的值是<code class="codeph">OCI_DEFAULT</code> （默认模式）。
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-60B998F9-F213-43BA-AB84-76F1EC6A6687__GUID-07CDD952-F334-4A71-9E75-F27ECFEB7591">评论</p>
                     <p>每次调用<code class="codeph">OCIStmtGetNextResult()</code>都会按照从PL / SQL过程或块返回的顺序检索单个隐式结果。如果没有更多结果可用，则返回<code class="codeph">OCI_NO_DATA</code> 。如果<code class="codeph">rtype</code>是<code class="codeph">OCI_RESULT_TYPE_SELECT</code> ，则返回的结果可以转换为OCI语句句柄，并由OCI分配。应用程序可以执行正常的OCI定义和获取调用以从隐式结果集中获取行。无法显式释放返回的OCI语句句柄。释放或释放顶级语句句柄时，将自动关闭并释放所有隐式结果集。
                     </p>
                     <p>有关此语句句柄属性的信息，请参阅<a href="handle-and-descriptor-attributes.html#GUID-A251CF91-EB9F-4DBC-8BB8-FB5EA92C20DE__CACCDJFH">OCI_ATTR_IMPLICIT_RESULT_COUNT</a> ，该属性返回顶级OCI语句句柄上可用的隐式结果总数。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-60B998F9-F213-43BA-AB84-76F1EC6A6687__GUID-B2BB6160-5597-4591-9C83-0E5C4ABDEA65">返回</p>
                     <p>返回以下之一：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCI_ERROR</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_SUCCESS</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_NO_DATA</code> - 从顶级语句句柄中检索所有隐式结果集时</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17166"></a><div class="props_rev_3"><a id="GUID-3D9B5C7B-E2A1-485D-852C-2434F303EC11" name="GUID-3D9B5C7B-E2A1-485D-852C-2434F303EC11"></a><h3 id="LNOCI-GUID-3D9B5C7B-E2A1-485D-852C-2434F303EC11" class="sect3"><span class="enumeration_section">26.2.4</span> OCIStmtGetPieceInfo（）</h3>
               <div>
                  <p>返回分段操作的片段信息。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-3D9B5C7B-E2A1-485D-852C-2434F303EC11__GUID-DC4D184B-331D-4301-B597-DBA98969DD56">目的</p>
                     <p>返回分段操作的片段信息。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-3D9B5C7B-E2A1-485D-852C-2434F303EC11__GUID-DBBBD678-FBAF-4523-863F-D22B7B5718E9">句法</p><pre class="oac_no_warn" dir="ltr">剑OCIStmtGetPieceInfo（const OCIStmt * stmtp，OCIError * errhp，void ** hndlpp，ub4 * typep，ub1 * in_outp，ub4 * iterp，ub4 * idxp，ub1 * piecep）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-3D9B5C7B-E2A1-485D-852C-2434F303EC11__GUID-4A45817A-8CE6-4CA2-98CD-A1A7BF7D89BE">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-3D9B5C7B-E2A1-485D-852C-2434F303EC11__GUID-A015D550-5FEF-4D80-A006-1861FF5AAA29"><!-- --></a> <span class="bold">stmtp</span> （IN）</dt>
                        <dd>
                           <p>执行时返回<code class="codeph">OCI_NEED_DATA</code>的语句。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-3D9B5C7B-E2A1-485D-852C-2434F303EC11__GUID-1D76B139-7F03-46F6-8227-9FD8C76C971E"><!-- --></a> <span class="bold">errhp</span> （OUT）</dt>
                        <dd>
                           <p>一个错误句柄，您可以在出现错误时传递给<code class="codeph">OCIErrorGet()</code>以获取诊断信息。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-3D9B5C7B-E2A1-485D-852C-2434F303EC11__GUID-A377D040-3B91-43CB-BFF5-45FF3F73684C"><!-- --></a> <span class="bold">hndlpp</span> （OUT）</dt>
                        <dd>
                           <p>返回指向绑定或绑定的句柄的指针，或定义其运行时数据是必需的还是正在提供的。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-3D9B5C7B-E2A1-485D-852C-2434F303EC11__GUID-99330842-72B2-410A-A3C0-D2392CA1398D"><!-- --></a> <span class="bold">typep</span> （OUT）</dt>
                        <dd>
                           <p><code class="codeph">hndlpp</code>指向的句柄类型： <code class="codeph">OCI_HTYPE_BIND</code> （用于绑定句柄）或<code class="codeph">OCI_HTYPE_DEFINE</code> （用于定义句柄）。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-3D9B5C7B-E2A1-485D-852C-2434F303EC11__GUID-3A1632D7-FA25-4765-9FAB-BE3BC56BAFFC"><!-- --></a> <span class="bold">in_outp</span> （OUT）</dt>
                        <dd>
                           <p>如果IN绑定值需要数据，则返回<code class="codeph">OCI_PARAM_IN</code> 。如果数据可用作OUT绑定变量或定义位置值，则返回<code class="codeph">OCI_PARAM_OUT</code> 。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-3D9B5C7B-E2A1-485D-852C-2434F303EC11__GUID-AAC10373-C712-43F8-9BA4-05D63ABCEFE6"><!-- --></a> <span class="bold">iterp</span> （OUT）</dt>
                        <dd>
                           <p>返回多行操作的行号。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-3D9B5C7B-E2A1-485D-852C-2434F303EC11__GUID-57517BE6-F242-49F4-ABA9-E0A9FAC98FE0"><!-- --></a> <span class="bold">idxp</span> （OUT）</dt>
                        <dd>
                           <p>PL / SQL数组绑定操作的数组元素的索引。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-3D9B5C7B-E2A1-485D-852C-2434F303EC11__GUID-F94E85BD-C17D-4903-9263-288701D9B367"><!-- --></a> <span class="bold">piecep</span> （OUT）</dt>
                        <dd>
                           <p>返回以下定义值之一： <code class="codeph">OCI_ONE_PIECE</code> ， <code class="codeph">OCI_FIRST_PIECE</code> ， <code class="codeph">OCI_NEXT_PIECE</code>或<code class="codeph">OCI_LAST_PIECE</code> 。</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-3D9B5C7B-E2A1-485D-852C-2434F303EC11__GUID-84F44D75-AB13-4632-913C-4B6AC2971DCD">评论</p>
                     <p>当执行或获取调用返回<code class="codeph">OCI_NEED_DATA</code>以获取或返回动态绑定，定义值或片段时， <code class="codeph">OCIStmtGetPieceInfo()</code>返回相关信息：绑定或定义句柄，迭代，索引号和哪个片段。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="handle-and-descriptor-functions.html#GUID-8218D5F2-139B-4FA9-BA4A-ED0126687C0F" title="分配一组描述符。">OCIArrayDescriptorAlloc（）</a></li>
                        <li><a href="handle-and-descriptor-functions.html#GUID-3741D7BD-7652-4D7A-8813-AC2AEA8D3B03" title="设置句柄或描述符的属性值。">OCIAttrSet（）</a></li>
                        <li><a href="statement-functions.html#GUID-98B26708-3E02-45C0-8258-5D5544F32BE9" title="将应用程序请求与服务器关联。">OCIStmtExecute（）</a></li>
                        <li><a href="statement-functions.html#GUID-DF585B90-58BA-45FC-B7CE-6F7F987C03B9" title="从（可滚动）结果集中获取一行。">OCIStmtFetch2（）</a></li>
                        <li><a href="statement-functions.html#GUID-CDB6F3E3-0FB6-49A7-A8AE-83CD330A359F" title="设置分段操作的片段信息。">OCIStmtSetPieceInfo（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                        <li><a href="oci-programming-basics.html#GUID-83F4D3B1-56A7-4EEE-A905-BB84D399713D" title="OCI呼吁完成民意调查。">OCI中的轮询模式操作</a></li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-3D9B5C7B-E2A1-485D-852C-2434F303EC11__GUID-80964251-91F7-4D45-9103-419A02D250CA">
                     <p class="notep1">也可以看看：</p>
                     <p> </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="binding-and-defining-in-oci.html#GUID-6C5EA0C6-0C1D-4CD5-B47F-1B95B4E9C558" title="您可以使用OCI执行分段插入，更新和数据提取。">OCI中的运行时数据分配和分段操作，</a>以获取有关使用<code class="codeph">OCIStmtGetPieceInfo()</code>更多信息</p>
                        </li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17168"></a><div class="props_rev_3"><a id="GUID-E6C1DC67-D464-4D2A-9F19-737423D31779" name="GUID-E6C1DC67-D464-4D2A-9F19-737423D31779"></a><h3 id="LNOCI-GUID-E6C1DC67-D464-4D2A-9F19-737423D31779" class="sect3"><span class="enumeration_section">26.2.5</span> OCIStmtPrepare2（）</h3>
               <div>
                  <p>准备SQL或PL / SQL语句以便执行。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-E6C1DC67-D464-4D2A-9F19-737423D31779__GUID-FF513FAF-32D9-43B1-8FF7-C7DA5538DA27">目的</p>
                     <p>准备SQL或PL / SQL语句以便执行。如果已启用，则用户可以选择使用语句高速缓存。</p>
                     <p>Oracle强烈建议在所有OCI应用程序中使用<code class="codeph">OCIStmtPrepare2()</code> ，而不是使用不推荐的调用<code class="codeph">OCIStmtPrepare()</code> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E6C1DC67-D464-4D2A-9F19-737423D31779__GUID-37E660C8-D9ED-4220-A481-8B542ABDCB35">句法</p><pre class="oac_no_warn" dir="ltr">剑OCIStmtPrepare2（OCISvcCtx * svchp，OCIStmt ** stmthp，OCIError * errhp，const OraText * stmttext，ub4 stmt_len，const OraText * key，ub4 keylen，ub4 language，ub4 mode）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-E6C1DC67-D464-4D2A-9F19-737423D31779__GUID-FF98E3BD-283E-4D7B-B6CE-513B02AE68CB">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-E6C1DC67-D464-4D2A-9F19-737423D31779__GUID-9CC645EA-E62B-42DB-9977-FDDE0E3AB1CB"><!-- --></a> svchp（IN）</dt>
                        <dd>
                           <p>与语句关联的服务上下文。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-E6C1DC67-D464-4D2A-9F19-737423D31779__GUID-FE4E97C7-7C50-4FE0-8797-C5AA2839F475"><!-- --></a> stmthp（OUT）</dt>
                        <dd>
                           <p>返回语句句柄的指针。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-E6C1DC67-D464-4D2A-9F19-737423D31779__GUID-F4B1D72C-138F-4E54-BA43-C6A09F61F2C4"><!-- --></a> errhp（IN）</dt>
                        <dd>
                           <p>指向诊断错误句柄的指针。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-E6C1DC67-D464-4D2A-9F19-737423D31779__GUID-D61993BF-02D2-40CD-91E6-1E3496FEB631"><!-- --></a> stmttext（IN）</dt>
                        <dd>
                           <p>声明文本。<code class="codeph">stmttext</code>的语义与<code class="codeph">OCIStmtPrepare()</code>的语义相同;也就是说，字符串必须为<code class="codeph">NULL</code> -terminated。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-E6C1DC67-D464-4D2A-9F19-737423D31779__GUID-2F7C215F-4D1F-4149-A409-556E99DC0E57"><!-- --></a> stmt_len（IN）</dt>
                        <dd>
                           <p>声明文本长度。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-E6C1DC67-D464-4D2A-9F19-737423D31779__GUID-AA495DEF-2F55-4B52-B987-9BCC8F162073"><!-- --></a>键（IN）</dt>
                        <dd>
                           <p>仅用于语句缓存。用于在语句高速缓存中搜索语句的键。如果传入密钥，则忽略语句文本和其他参数，并且搜索仅基于密钥。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-E6C1DC67-D464-4D2A-9F19-737423D31779__GUID-34F62C41-4342-4AF1-93D8-946FB4E1DFA5"><!-- --></a> keylen（IN）</dt>
                        <dd>
                           <p>仅用于语句缓存。钥匙的长度。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-E6C1DC67-D464-4D2A-9F19-737423D31779__GUID-2F23A7AB-DD2E-43D3-89A4-C821F1BBE285"><!-- --></a>语言（IN）</dt>
                        <dd>
                           <div class="p">指定V7或本机语法。可能的值如下：<ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">OCI_V7_SYNTAX</code> -  V7 ORACLE解析语法。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCI_NTV_SYNTAX</code> - 语法取决于服务器的版本。
                                    </p>
                                    <p><code class="codeph">OCI_FOREIGN_SYNTAX</code> - 根据会话中设置的SQL转换配置文件指定要转换的语句。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </dd>
                     </dl>
                     <dl>
                        <dt class="dlterm"><a name="GUID-E6C1DC67-D464-4D2A-9F19-737423D31779__GUID-E66C61D8-4FFB-4360-9493-E7C4E44D92D7"><!-- --></a>模式（IN）</dt>
                        <dd>
                           <p>此函数可以使用和不使用语句缓存。这是在创建连接或会话池时确定的。如果为会话启用了高速缓存，则会话中的所有语句都启用了高速缓存，如果未启用高速缓存，则不会高速缓存所有语句。</p>
                           <div class="p">有效模式如下：<ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">OCI_DEFAULT</code> - 未启用缓存。如果在缓存中找不到该语句，则此模式将分配新的语句句柄并准备语句句柄以供执行。如果在缓存中找不到该语句，并且下列情况之一适用，则后续操作如下：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>仅提供了文本：分配并准备并返回新语句。标签为<code class="codeph">NULL</code> 。返回<code class="codeph">OCI_SUCCESS</code> 。
                                          </p>
                                       </li>
                                       <li>
                                          <p>仅提供了标记： <code class="codeph">stmthp</code>为<code class="codeph">NULL</code> 。返回<code class="codeph">OCI_ERROR</code> 。
                                          </p>
                                       </li>
                                       <li>
                                          <p>提供了文本和密钥：分配并准备并返回新的语句。标签为<code class="codeph">NULL</code> 。返回<code class="codeph">OCI_SUCCESS_WITH_INFO</code> ，因为返回的语句与请求的语句的不同之处在于标记为<code class="codeph">NULL</code> 。</p>
                                       </li>
                                    </ul>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCI_PREP2_CACHE_SEARCHONLY</code> - 在这种情况下，如果未找到该语句（返回<code class="codeph">NULL</code>语句句柄），则必须采取进一步操作。如果找到该语句，则返回<code class="codeph">OCI_SUCCESS</code> 。否则，返回<code class="codeph">OCI_ERROR</code> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCI_PREP2_GET_PLSQL_WARNINGS</code> - 如果在会话中启用了警告并且PL / SQL程序编译时出现警告，则<code class="codeph">OCI_SUCCESS_WITH_INFO</code>是执行的返回状态。使用<code class="codeph">OCIErrorGet()</code>查找与警告对应的新错误号。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">OCI_PREP2_IMPL_RESULTS_CLIENT</code> - 当在外部过程中进行此调用并且需要处理隐式结果时，该模式应作为<code class="codeph">OCI_PREP2_IMPL_RESULTS_CLIENT</code>传递。有关详细信息，请参阅<a href="performance-topics.html#GUID-F5BF8851-F491-4EF8-BA20-B6146AF2700F" title="从Oracle Database 12c第1版（12.1）开始，PL / SQL可以从存储过程和匿名PL / SQL块中隐式返回结果（游标）。提供OCIStmtGetNextResult（）以检索和处理隐式结果。">OCI对隐式结果的支持</a> 。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="deprecated-oci-functions.html#GUID-FD74B639-8B97-4A5A-BC3E-269CE59345CA" title="从Oracle Database 12c第2版（12.2）开始，不推荐使用此功能。">OCIStmtPrepare（）</a></li>
                        <li><a href="statement-functions.html#GUID-256034CE-2ADB-4BE5-BC8D-748307F2EA8E" title="释放通过调用OCIStmtPrepare2（）获得的语句句柄。">OCIStmtRelease（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17169"></a><div class="props_rev_3"><a id="GUID-256034CE-2ADB-4BE5-BC8D-748307F2EA8E" name="GUID-256034CE-2ADB-4BE5-BC8D-748307F2EA8E"></a><h3 id="LNOCI-GUID-256034CE-2ADB-4BE5-BC8D-748307F2EA8E" class="sect3"><span class="enumeration_section">26.2.6</span> OCIStmtRelease（）</h3>
               <div>
                  <p>释放通过调用<code class="codeph">OCIStmtPrepare2()</code>获得的语句句柄。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-256034CE-2ADB-4BE5-BC8D-748307F2EA8E__GUID-D2AC26F4-B035-4648-A076-2510325779AE">目的</p>
                     <p>释放通过调用<code class="codeph">OCIStmtPrepare2()</code>获得的语句句柄。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-256034CE-2ADB-4BE5-BC8D-748307F2EA8E__GUID-08A57A5F-CC67-4351-957D-18705F462E37">句法</p><pre class="oac_no_warn" dir="ltr">剑OCIStmtRelease（OCIStmt * stmthp，OCIError * errhp，const OraText * key，ub4 keylen，ub4 mode）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-256034CE-2ADB-4BE5-BC8D-748307F2EA8E__GUID-12C50AE6-6A40-454B-92D2-E2F95682D7DB">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-256034CE-2ADB-4BE5-BC8D-748307F2EA8E__GUID-072C1C9E-7EB9-4391-82BA-37A702D2D450"><!-- --></a> stmthp（IN / OUT）</dt>
                        <dd>
                           <p><code class="codeph">OCIStmtPrepare2()</code>返回的语句句柄。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-256034CE-2ADB-4BE5-BC8D-748307F2EA8E__GUID-D86B2A53-EE7B-4D20-843B-2A704CFC8640"><!-- --></a> errhp（IN）</dt>
                        <dd>
                           <p>用于诊断的错误句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-256034CE-2ADB-4BE5-BC8D-748307F2EA8E__GUID-B4676628-F568-41FC-9E16-DE512B5BD892"><!-- --></a>键（IN）</dt>
                        <dd>
                           <p>仅对语句缓存有效。与缓存中的语句关联的键。这是调用者传入的SQL字符串。如果传入<code class="codeph">NULL</code>键，则不会标记该语句。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-256034CE-2ADB-4BE5-BC8D-748307F2EA8E__GUID-A637BC2F-7F1E-492F-A00F-E7E060DF10D2"><!-- --></a> keylen（IN）</dt>
                        <dd>
                           <p>仅对语句缓存有效。钥匙的长度。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-256034CE-2ADB-4BE5-BC8D-748307F2EA8E__GUID-D06B03DB-F513-4157-A58A-3F057EA59E3F"><!-- --></a>模式（IN）</dt>
                        <dd>
                           <p>有效模式是：</p>
                        </dd>
                     </dl>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCI_DEFAULT</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_STRLS_CACHE_DELETE</code> - 仅对语句缓存有效。该语句不再保留在缓存中。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="statement-functions.html#GUID-E6C1DC67-D464-4D2A-9F19-737423D31779" title="准备SQL或PL / SQL语句以便执行。">OCIStmtPrepare2（）</a></li>
                     </ul>
                  </div>
               </div>
               
            </div><a id="LNOCI17170"></a><div class="props_rev_3"><a id="GUID-CDB6F3E3-0FB6-49A7-A8AE-83CD330A359F" name="GUID-CDB6F3E3-0FB6-49A7-A8AE-83CD330A359F"></a><h3 id="LNOCI-GUID-CDB6F3E3-0FB6-49A7-A8AE-83CD330A359F" class="sect3"><span class="enumeration_section">26.2.7</span> OCIStmtSetPieceInfo（）</h3>
               <div>
                  <p>设置分段操作的片段信息。</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-CDB6F3E3-0FB6-49A7-A8AE-83CD330A359F__GUID-762FB8E3-88BF-4D8D-91F1-0D7BA87535FA">目的</p>
                     <p>设置分段操作的片段信息。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-CDB6F3E3-0FB6-49A7-A8AE-83CD330A359F__GUID-19B119D2-A53E-4FB3-86F4-992BBA8C3616">句法</p><pre class="oac_no_warn" dir="ltr">sword OCIStmtSetPieceInfo（void * hndlp，ub4 type，OCIError * errhp，const void * bufp，ub4 * alenp，ub1 piece，const void * indp，ub2 * rcodep）;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-CDB6F3E3-0FB6-49A7-A8AE-83CD330A359F__GUID-103B6573-3187-4875-848C-D864A201F308">参数</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-CDB6F3E3-0FB6-49A7-A8AE-83CD330A359F__GUID-7B7BCA48-9683-4A65-86E4-608CC204F01E"><!-- --></a> hndlp（IN / OUT）</dt>
                        <dd>
                           <p>绑定或定义句柄。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-CDB6F3E3-0FB6-49A7-A8AE-83CD330A359F__GUID-65BFB57C-98C4-4FC7-B0E4-D376F29A6281"><!-- --></a>类型（IN）</dt>
                        <dd>
                           <p>手柄的类型。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-CDB6F3E3-0FB6-49A7-A8AE-83CD330A359F__GUID-1BCDB916-2486-4B05-9E38-0257B27B34A5"><!-- --></a> errhp（OUT）</dt>
                        <dd>
                           <p>一个错误句柄，您可以在出现错误时传递给<code class="codeph">OCIErrorGet()</code>以获取诊断信息。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-CDB6F3E3-0FB6-49A7-A8AE-83CD330A359F__GUID-DFAD8D6C-2F81-40A2-BFC7-160C79410C64"><!-- --></a> bufp（IN / OUT）</dt>
                        <dd>
                           <p>指向包含数据值的存储的指针，或者当它是IN绑定变量时的指针;否则， <code class="codeph">bufp</code>是指向存储器的指针，用于获取OUT绑定和定义变量的值或值。对于命名数据类型或<code class="codeph">REF</code> ，返回指向对象或<code class="codeph">REF</code>的指针。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-CDB6F3E3-0FB6-49A7-A8AE-83CD330A359F__GUID-4223FECC-D6EC-4915-BA8C-6BCA3D29E0A1"><!-- --></a> alenp（IN / OUT）</dt>
                        <dd>
                           <p>片段的长度或值。不要在同一SQL语句的执行之间更改此参数。</p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-CDB6F3E3-0FB6-49A7-A8AE-83CD330A359F__GUID-04DF683B-CC22-40E6-BD22-14F46564A668"><!-- --></a>件（IN）</dt>
                        <dd>
                           <p>片段参数。有效值为：</p>
                        </dd>
                     </dl>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">OCI_ONE_PIECE</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_FIRST_PIECE</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_NEXT_PIECE</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">OCI_LAST_PIECE</code></p>
                        </li>
                     </ul>
                     <p>此参数仅用于IN绑定变量。</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-CDB6F3E3-0FB6-49A7-A8AE-83CD330A359F__GUID-F4397FB0-4867-432B-A68A-877AEB1F5AC4"><!-- --></a> indp（IN / OUT）</dt>
                        <dd>
                           <p>指示符。指向<code class="codeph">sb2</code>值的指针或指向指定数据类型（SQLT_NTY）和<code class="codeph">REF</code> s（SQLT_REF）的指示符结构的指针，也就是说，取决于数据类型， <code class="codeph">*indp</code>是<code class="codeph">sb2</code>或<code class="codeph">void</code> *。
                           </p>
                        </dd>
                        <dt class="dlterm"><a name="GUID-CDB6F3E3-0FB6-49A7-A8AE-83CD330A359F__GUID-4E4F62B8-0C80-4740-A9D2-42B284D7FDE5"><!-- --></a> rcodep（IN / OUT）</dt>
                        <dd>
                           <p>返回代码。</p>
                        </dd>
                     </dl>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-CDB6F3E3-0FB6-49A7-A8AE-83CD330A359F__GUID-B9DD7556-C7CC-40D3-B9A0-D940E05A1424">评论</p>
                     <p>当执行调用返回<code class="codeph">OCI_NEED_DATA</code>以获取动态IN / OUT绑定值或片段时， <code class="codeph">OCIStmtSetPieceInfo()</code>设置片段信息：缓冲区，长度，当前正在处理的片段，指示符以及此列的返回码。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="handle-and-descriptor-functions.html#GUID-8218D5F2-139B-4FA9-BA4A-ED0126687C0F" title="分配一组描述符。">OCIArrayDescriptorAlloc（）</a></li>
                        <li><a href="handle-and-descriptor-functions.html#GUID-3741D7BD-7652-4D7A-8813-AC2AEA8D3B03" title="设置句柄或描述符的属性值。">OCIAttrSet（）</a></li>
                        <li><a href="statement-functions.html#GUID-98B26708-3E02-45C0-8258-5D5544F32BE9" title="将应用程序请求与服务器关联。">OCIStmtExecute（）</a></li>
                        <li><a href="statement-functions.html#GUID-DF585B90-58BA-45FC-B7CE-6F7F987C03B9" title="从（可滚动）结果集中获取一行。">OCIStmtFetch2（）</a></li>
                        <li><a href="statement-functions.html#GUID-3D9B5C7B-E2A1-485D-852C-2434F303EC11" title="返回分段操作的片段信息。">OCIStmtGetPieceInfo（）</a></li>
                        <li><a href="miscellaneous-functions.html#GUID-4B99087C-74F6-498A-8310-D6645172390A" title="返回错误消息和Oracle数据库错误代码。">OCIErrorGet（）</a></li>
                        <li><a href="oci-programming-basics.html#GUID-83F4D3B1-56A7-4EEE-A905-BB84D399713D" title="OCI呼吁完成民意调查。">OCI中的轮询模式操作</a></li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-CDB6F3E3-0FB6-49A7-A8AE-83CD330A359F__GUID-DC609D41-CC01-46BF-890C-68E392E9B456">
                     <p class="notep1">也可以看看：</p>
                     <p> </p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="binding-and-defining-in-oci.html#GUID-6C5EA0C6-0C1D-4CD5-B47F-1B95B4E9C558" title="您可以使用OCI执行分段插入，更新和数据提取。">OCI中的运行时数据分配和分段操作，</a>以获取有关使用<code class="codeph">OCIStmtSetPieceInfo()</code>更多信息 
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
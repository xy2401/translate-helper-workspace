<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Oracle Database Release 19c introduces a Java library that provides support for reactive streams ingestion, which enables customers to efficiently stream data into Oracle Database."></meta>
      <meta name="description" content="Oracle Database Release 19c introduces a Java library that provides support for reactive streams ingestion, which enables customers to efficiently stream data into Oracle Database."></meta>
      <title>支持Reactive Streams摄取</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="JDBC Developer&#39;s Guide"></meta>
      <meta property="og:description" content="Oracle Database Release 19c introduces a Java library that provides support for reactive streams ingestion, which enables customers to efficiently stream data into Oracle Database."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="JDBC Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="jdbc-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-13T13:20:37-08:00"></meta>
      <meta name="dcterms.title" content="JDBC Developer&#39;s Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1999, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96471-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="performance-extensions.html" title="Previous" type="text/html"></link>
      <link rel="next" href="OCI-connection-pooling.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="JJDBC"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="performance-extensions.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="OCI-connection-pooling.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">JDBC开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="performance-and-scalability.html" property="item" typeof="WebPage"><span property="name">性能和可伸缩性</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">支持Reactive Streams摄取</li>
            </ol>
            <a id="GUID-5E5484B7-4734-482A-98D0-10F60ACACDEF" name="GUID-5E5484B7-4734-482A-98D0-10F60ACACDEF"></a>
            
            <h2 id="JJDBC-GUID-5E5484B7-4734-482A-98D0-10F60ACACDEF" class="sect2"><span class="enumeration_chapter">22</span>支持反应流摄取</h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle Database Release 19c引入了一个Java库，它为反应流提取提供支持，使客户能够有效地将数据流式传输到Oracle数据库。</p>
               <p>本章包含以下主题：</p>
               <ul id="GUID-5E5484B7-4734-482A-98D0-10F60ACACDEF__UL_EWD_KRB_2GB" style="list-style-type:disc">
                  <li><a href="high-speed-ingestion-of-data-streams.html#GUID-104EC66D-7F93-4A89-9E03-59F40A6DC57E">用于Reactive Streams Ingestion的Java库概述</a></li>
                  <li><a href="high-speed-ingestion-of-data-streams.html#GUID-2C2A5C9D-64DD-479C-BA44-1FC31BA557AB">用于反应流摄取的Java库的体系结构</a></li>
                  <li><a href="high-speed-ingestion-of-data-streams.html#GUID-AA67524B-4C8F-4FF6-9FF8-B7BAC2016625">用于Reactive Streams摄取的Java库限制</a></li>
               </ul>
            </div>
            <div class="sect2"><a id="GUID-104EC66D-7F93-4A89-9E03-59F40A6DC57E" name="GUID-104EC66D-7F93-4A89-9E03-59F40A6DC57E"></a><h3 id="JJDBC-GUID-104EC66D-7F93-4A89-9E03-59F40A6DC57E" class="sect3"><span class="enumeration_section">22.1</span>用于Reactive Streams摄取的Java库概述</h3>
               <div>
                  <p></p>
                  <p>新的Java库使Java应用程序能够不断地从大量客户端接收和接收数据。需要在Oracle数据库表中以行的形式保留大量记录的IoT代理或Telco应用程序可以使用此库。使用Oracle数据库的直接路径加载方法来插入数据，它使摄取过程无阻塞且速度极快。此外，通过使用通用连接池（UCP），该库还提供了数据库的多种高可用性和可伸缩性功能，如支持表分区，Oracle RAC连接关联和分片。</p>
               </div>
            </div>
            <div class="sect2"><a id="GUID-2C2A5C9D-64DD-479C-BA44-1FC31BA557AB" name="GUID-2C2A5C9D-64DD-479C-BA44-1FC31BA557AB"></a><h3 id="JJDBC-GUID-2C2A5C9D-64DD-479C-BA44-1FC31BA557AB" class="sect3"><span class="enumeration_section">22.2</span>用于反应流摄取的Java库体系结构</h3>
               <div>
                  <p></p>
                  <p>当大量客户端使用数据库以表行的形式保存信息并且不希望被阻塞等待来自数据库的同步响应时，新的Java库使客户能够有效地将数据流式传输到Oracle数据库。该库包含以下模块：</p>
                  <ul id="GUID-2C2A5C9D-64DD-479C-BA44-1FC31BA557AB__UL_ZF1_QSZ_DGB" style="list-style-type:disc">
                     <li><span class="bold">反应流摄取（RSI）库</span><p>这是公开API以处理逻辑的核心模块。它支持Oracle Database Release 19c的<span class="italic">Memoptimized RowStore快速摄取</span>功能，可以快速无缝地将用户信息保存在数据库中。它使用UCP进行连接池和管理，包括分片拓扑知识和Oracle Real Application Cluster（RAC）数据库的快速应用程序通知（FAN）感知。
                        </p>
                        <div class="p">要使用此库，必须将以下<code class="codeph">JAR</code>文件添加到<code class="codeph">CLASSPATH</code> ：<ul id="GUID-2C2A5C9D-64DD-479C-BA44-1FC31BA557AB__UL_OWJ_SWW_2GB" style="list-style-type:disc">
                              <li><code class="codeph">fis.jar</code></li>
                              <li><code class="codeph">ojdbc9.jar</code></li>
                              <li><code class="codeph">ucp.jar</code></li>
                              <li><code class="codeph">ons.jar</code></li>
                           </ul>
                        </div>
                     </li>
                     <li><span class="bold">JDBC API</span><p>此模块是增强的JDBC API的集合，它使用<code class="codeph">OracleConnection</code>接口中提供的新<code class="codeph">prepareDirectPath</code>方法添加对直接路径加载的支持，该方法创建从<code class="codeph">PreparedStatement</code>接口派生的新接口。使用此接口对最终用户是透明的，您需要对应用程序代码进行很少的更改以执行直接路径加载操作。
                        </p>
                        <p>以下代码段显示了如何使用此功能：</p><pre class="pre codeblock"><code>PreparedStatement preparedStatement = oracleConnection。prepareDirectPath（“SCOTT”，“EMP”，new String [] {“EMPNO”，“ENAME”}）;在循环中{preparedStatement.setInt（1，someIntValue）; preparedStatement.setString（2，someStringValue）：preparedStatement.addBatch（）; prepareStatement.executeBatch（）; oracleConnection.commit（）; //或oracleConnection.rollback（）;</code></pre></li>
                     <li><span class="bold">UCP图书馆</span><p>此模块是现有UCP API的扩展，它为分片数据库提取分片拓扑并侦听FAN事件。HSI库使用UCP能够正确地重用连接。</p>
                        <p>UCP库识别用户指定的分片键，并允许它们连接到特定的分片和块。在创建新连接时，UCP将分片键范围缓存到分片的位置，并允许进一步的连接请求绕过全局服务管理器（分片导向器），从而实现更快的路径密钥访问。UCP还可以通过提供分片键来选择池中的可用连接。这允许通过使用缓存的路由拓扑重新使用到各种分片的连接。</p>
                        <p>RSI库使用UCP公开的分片API来获得指定分片键的正确连接。RSI中的每条记录都可以映射到特定的唯一块ID，然后可以使用唯一的块ID将这些记录组合在一起。当RSI库有足够的记录发送到数据库时，它会从UCP借用一个特定于块的连接，并使用该连接将记录插入到分片数据库中。</p>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="sect2"><a id="GUID-AA67524B-4C8F-4FF6-9FF8-B7BAC2016625" name="GUID-AA67524B-4C8F-4FF6-9FF8-B7BAC2016625"></a><h3 id="JJDBC-GUID-AA67524B-4C8F-4FF6-9FF8-B7BAC2016625" class="sect3"><span class="enumeration_section">22.3</span>用于Reactive Streams摄取的Java库限制</h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p>在发生意外崩溃或错误的情况下，数据流的反应流摄取可能无法将所有数据摄取到数据库中，因为库在尝试将它们存储在数据库中时可能会丢失一些记录。数据丢失量取决于以下两个值：</p>
                     <ul id="GUID-AA67524B-4C8F-4FF6-9FF8-B7BAC2016625__UL_CLC_P2B_2GB" style="list-style-type:disc">
                        <li><code class="codeph">MaxNoOfRecord</code><p>这是要在内存中缓冲的最大记录数。此值是数据库崩溃时可能丢失的最大记录数。在绩效和潜在的记录损失之间存在权衡。</p>
                        </li>
                        <li><code class="codeph">MaxBufferInterval</code><p>这是在内存中保存记录的最长时间。如果此参数的值较低，则内存中可能丢失的记录数也会减少。在绩效和潜在的记录损失之间存在权衡。</p>
                        </li>
                     </ul>
                     <p>除了由于数据库崩溃导致数据丢失的可能性之外，该库还具有以下限制：</p>
                     <ul id="GUID-AA67524B-4C8F-4FF6-9FF8-B7BAC2016625__UL_WCR_JTB_2GB" style="list-style-type:disc">
                        <li>不支持触发器。</li>
                        <li>不检查参照完整性。</li>
                        <li>不支持群集表。</li>
                        <li>不支持加载远程对象。</li>
                        <li>必须将LONG数据类型指定为最后一列。</li>
                        <li>不支持包含流的LONG数据类型</li>
                        <li>不支持加载VARRAY列。</li>
                        <li>所有分区列必须出现在任何LOB数据类型之前。</li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
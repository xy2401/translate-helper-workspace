<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>审计（统一审计）</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Language Reference "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Language Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96310-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="AUDIT-Traditional-Auditing.html" title="Previous" type="text/html"></link>
      <link rel="next" href="CALL.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference"></meta>
    <meta name="dcterms.isVersionOf" content="SQLRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="AUDIT-Traditional-Auditing.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="CALL.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL语言参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="SQL-Statements-ALTER-SYNONYM-to-COMMENT.html" property="item" typeof="WebPage"><span property="name">SQL语句：ALTER SYNONYM to COMMENT</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">审计（统一审计）</li>
            </ol>
            <a id="GUID-B24D6874-4053-4E66-8238-6CD0C87E9DCA" name="GUID-B24D6874-4053-4E66-8238-6CD0C87E9DCA"></a><a id="SQLRF56111"></a><a id="SQLRF56172"></a><a id="SQLRF56173"></a><a id="SQLRF56408"></a><a id="SQLRF56409"></a><a id="SQLRF56174"></a><a id="SQLRF56175"></a><a id="SQLRF56426"></a><a id="SQLRF56427"></a><a id="SQLRF56428"></a><a id="SQLRF56110"></a>
            
            <h2 id="SQLRF-GUID-B24D6874-4053-4E66-8238-6CD0C87E9DCA" class="sect2">审计（统一审计）</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p>本节介绍<span class="bold">统一</span> <span class="bold">审计</span>的<code class="codeph">AUDIT</code>语句。这种类型的审计是Oracle Database 12 <span class="italic">c的</span>新开始，它提供了一整套增强的审计功能。有关统一审计的更多信息，请参阅“ <a href="../dbseg/introduction-to-auditing.html#DBSEG630" target="_blank"><span class="italic">Oracle数据库安全指南”</span></a> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B24D6874-4053-4E66-8238-6CD0C87E9DCA__GUID-483EA9C0-40A4-4A06-B0DF-37ED1C251620">目的</p>
                  <p>使用<code class="codeph">AUDIT</code>语句：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>为所有用户或指定用户启用统一审核策略</p>
                     </li>
                     <li>
                        <p>指定如果审计事件失败，成功或两者都创建审计记录</p>
                     </li>
                     <li>
                        <p>指定应用程序上下文属性，其值将记录在审计记录中</p>
                     </li>
                  </ul>
                  <p>使用此语句执行的操作将在后续用户会话中生效，而不是在当前会话中生效。</p>
                  <div class="infoboxnotealso" id="GUID-B24D6874-4053-4E66-8238-6CD0C87E9DCA__GUID-BB696BD0-B516-40F3-A4EE-A28E3C737F2C">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="NOAUDIT-Unified-Auditing.html#GUID-EB92BE04-B09C-493F-952E-9629E739900E">NOAUDIT（统一审计）</a></p>
                        </li>
                        <li>
                           <p><a href="CREATE-AUDIT-POLICY-Unified-Auditing.html#GUID-8D6961FB-2E50-46F5-81F7-9AEA314FC693">创建审计政策（统一审计）</a> 
                           </p>
                        </li>
                        <li>
                           <p><a href="ALTER-AUDIT-POLICY-Unified-Auditing.html#GUID-CC41B5C2-09F4-40BC-B7FD-3B4C0A3F5437">更改审计政策（统一审计）</a></p>
                        </li>
                        <li>
                           <p><a href="DROP-AUDIT-POLICY-Unified-Auditing.html#GUID-811D3F84-744E-47A1-B69D-C9D2FA4A0844">DROP审计政策（统一审计）</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B24D6874-4053-4E66-8238-6CD0C87E9DCA__GUID-CB683898-5CF0-4583-9BFD-6C144A9EBBF4">先决条件</p>
                  <p>您必须具有<code class="codeph">AUDIT</code> <code class="codeph">SYSTEM</code>系统特权或<code class="codeph">AUDIT_ADMIN</code>角色。
                  </p>
                  <p>如果您连接到多租户容器数据库（CDB），然后要启用通用的统一审计策略，则当前容器必须是根，并且您必须具有通常授予的<code class="codeph">AUDIT</code> <code class="codeph">SYSTEM</code>权限或<code class="codeph">AUDIT_ADMIN</code>公共角色。要启用本地统一审核策略，当前容器必须是创建审核策略的容器，并且您必须具有通常授予的<code class="codeph">AUDIT</code> <code class="codeph">SYSTEM</code>权限或<code class="codeph">AUDIT_ADMIN</code>公共角色，或者您必须具有本地授予的<code class="codeph">AUDIT</code> <code class="codeph">SYSTEM</code>权限或容器中的<code class="codeph">AUDIT_ADMIN</code>本地角色。
                  </p>
                  <p>要在连接到CDB时指定<code class="codeph">AUDIT</code> <code class="codeph">CONTEXT</code> ...语句，您必须具有通常授予的<code class="codeph">AUDIT</code> <code class="codeph">SYSTEM</code>特权或<code class="codeph">AUDIT_ADMIN</code>公共角色，或者您必须在当前会话的容器中具有本地授予的<code class="codeph">AUDIT</code> <code class="codeph">SYSTEM</code>特权或<code class="codeph">AUDIT_ADMIN</code>本地角色。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B24D6874-4053-4E66-8238-6CD0C87E9DCA__GUID-6A8C2310-D13D-4ADD-B2FD-0DBE58FC9FBA">句法</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B24D6874-4053-4E66-8238-6CD0C87E9DCA__GUID-69F34D9A-DBDF-4D25-990B-ACD13889A48E"><span class="italic">unified_audit</span> :: =</p>
                  <div class="figure" id="GUID-B24D6874-4053-4E66-8238-6CD0C87E9DCA__GUID-FF36DCF9-40F8-49D8-88D8-4076A56DAAF4"><img src="img/unified_audit.gif" alt="接下来是unified_audit.eps的描述" title="接下来是unified_audit.eps的描述" longdesc="img_text/unified_audit.html"><br><a href="img_text/unified_audit.html">说明unified_audit.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B24D6874-4053-4E66-8238-6CD0C87E9DCA__GUID-CFC2EBE6-7053-4299-835C-F9CE366CD31E"><span class="italic">by_users_with_roles</span> :: =</p>
                  <div class="figure" id="GUID-B24D6874-4053-4E66-8238-6CD0C87E9DCA__GUID-E9D8D03B-AAD8-49D2-9B05-187DD139FDC5"><img src="img/by_users_with_roles.gif" alt="下面是by_users_with_roles.eps的描述" title="下面是by_users_with_roles.eps的描述" longdesc="img_text/by_users_with_roles.html"><br><a href="img_text/by_users_with_roles.html">说明by_users_with_roles.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B24D6874-4053-4E66-8238-6CD0C87E9DCA__GUID-1894B895-D23D-43D9-B7ED-3EDFF24A63B9">语义</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B24D6874-4053-4E66-8238-6CD0C87E9DCA__GUID-3C9A879D-1E22-4F6C-B456-9434093B8158"><span class="italic">政策</span></p>
                  <p>指定要启用的统一审核策略的名称。必须使用<code class="codeph">CREATE</code> <code class="codeph">AUDIT</code> <code class="codeph">POLICY</code>语句创建策略。
                  </p>
                  <p>您可以通过查询找到所有统一的审计策略的描述<code class="codeph">AUDIT_UNIFIED_POLICIES</code>通过查询所有<span class="italic">启用</span>统一的审计策略的观点和描述<code class="codeph">AUDIT_UNIFIED_ENABLED_POLICIES</code>视图。
                  </p>
                  <p>启用统一审核策略时，将审核满足已启用策略中指定的系统特权或操作或角色审核选项的所有SQL语句和操作，即将在<code class="codeph">UNIFIED_AUDIT_TRAIL</code>视图中创建统一审核记录。如果单个SQL语句或操作满足多个启用的策略，则只会创建一个统一的审计记录，并且所有满足的审计策略名称将显示在<code class="codeph">UNIFIED_AUDIT_TRAIL</code>视图的<code class="codeph">UNIFIED_AUDIT_POLICIES</code>列中以逗号分隔的列表中。
                  </p>
                  <div class="infoboxnotealso" id="GUID-B24D6874-4053-4E66-8238-6CD0C87E9DCA__GUID-936B9DA3-BB1E-4B3F-9E4F-894E5E4CBC2C">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="CREATE-AUDIT-POLICY-Unified-Auditing.html#GUID-8D6961FB-2E50-46F5-81F7-9AEA314FC693">创建审计政策（统一审计）</a></p>
                        </li>
                        <li>
                           <p>有关<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=REFRN29157" target="_blank"><code class="codeph">AUDIT_UNIFIED_POLICIES</code></a> ， <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=REFRN29158" target="_blank"><code class="codeph">AUDIT_UNIFIED_ENABLED_POLICIES</code></a>和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=REFRN29162" target="_blank"><code class="codeph">UNIFIED_AUDIT_TRAIL</code></a>视图的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=REFRN29157" target="_blank"><code class="codeph">AUDIT_UNIFIED_POLICIES</code></a> <span class="italic">Oracle数据库参考</span></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B24D6874-4053-4E66-8238-6CD0C87E9DCA__GUID-6FC6ED1F-30DD-4A6C-BCE8-80DCC5DCB4B7">BY |除了</p>
                  <p>指定<code class="codeph">BY</code>子句以仅为指定的用户启用<span class="italic"><code class="codeph">policy</code></span> 。
                  </p>
                  <p>指定<code class="codeph">EXCEPT</code>子句以为除指定用户之外的所有用户启用<span class="italic"><code class="codeph">policy</code></span> 。
                  </p>
                  <p>如果省略<code class="codeph">BY</code>和<code class="codeph">EXCEPT</code>子句以及<span class="italic"><code class="codeph">by_users_with_roles</code></span>子句，则Oracle Database会为所有用户启用<span class="italic"><code class="codeph">policy</code></span> 。
                  </p>
                  <p>如果<span class="italic"><code class="codeph">policy</code></span>是通用的统一审核策略，则<span class="italic"><code class="codeph">user</code></span>必须是普通用户。如果<span class="italic"><code class="codeph">policy</code></span>是本地统一审核策略，则<span class="italic"><code class="codeph">user</code></span>必须是您所连接的容器中的普通用户或本地用户。
                  </p>
                  <p><span class="bold">关于BY和EXCEPT条款的注释</span></p>
                  <p>以下注释适用于<code class="codeph">BY</code>和<code class="codeph">EXCEPT</code>子句：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果多次<code class="codeph">AUDIT</code> ......为同一个统一审计策略指定了<code class="codeph">BY</code> ...语句，然后为每个语句中指定的用户联合启用策略。
                        </p>
                     </li>
                     <li>
                        <p>如果多次<code class="codeph">AUDIT</code> ......<code class="codeph">EXCEPT</code> ...语句是为同一个统一审计策略指定的，然后只有最近指定的语句生效。也就是说，除了最近一次<code class="codeph">AUDIT</code>指定的用户外，所有用户都启用了该策略...<code class="codeph">EXCEPT</code> ...声明。
                        </p>
                     </li>
                     <li>
                        <p>如果使用<code class="codeph">BY</code>子句启用策略，并且您希望使用<code class="codeph">EXCEPT</code>子句启用它，则必须首先使用<code class="codeph">NOAUDIT</code> ...<code class="codeph">BY</code> ...语句为当前启用了策略的所有用户禁用策略，然后使用<code class="codeph">AUDIT</code>启用策略...<code class="codeph">EXCEPT</code> ...声明。
                        </p>
                     </li>
                     <li>
                        <p>如果使用<code class="codeph">EXCEPT</code>子句启用策略，并且您希望使用<code class="codeph">BY</code>子句启用它，则必须首先使用<code class="codeph">NOAUDIT</code>语句禁用审核策略。请注意，您不能使用<code class="codeph">NOAUDIT</code>语句指定<code class="codeph">EXCEPT</code>子句。然后，您可以使用<code class="codeph">AUDIT</code>启用该策略...<code class="codeph">BY</code> ...声明。
                        </p>
                     </li>
                  </ul>
                  <p><span class="bold">对BY和EXCEPT条款的限制</span></p>
                  <p>你不能指定一个<code class="codeph">AUDIT</code> ......<code class="codeph">BY</code> ...声明和<code class="codeph">AUDIT</code> ......<code class="codeph">EXCEPT</code> ...同一统一审计政策的声明。如果您尝试这样做，则会发生错误。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-B24D6874-4053-4E66-8238-6CD0C87E9DCA__BY_USERS_WITH_ROLES-54975FDE">
                  <p class="subhead1" id="GUID-B24D6874-4053-4E66-8238-6CD0C87E9DCA__GUID-067BF75F-8DF7-4D1B-A291-C5D33937B277"><span class="italic">by_users_with_roles</span></p>
                  <p>指定此子句仅为已直接授予指定角色的用户启用<span class="italic"><code class="codeph">policy</code></span> 。如果您随后将其中一个角色授予其他用户，则该策略会自动向该用户授予权限。如果您随后从用户撤消其中一个角色，则该策略将不再适用于该用户。
                  </p>
                  <p>当您连接到CDB时，如果<span class="italic"><code class="codeph">policy</code></span>是一个通用的统一审核策略，那么<span class="italic"><code class="codeph">role</code></span>必须是一个共同的角色。如果<span class="italic"><code class="codeph">policy</code></span>是本地统一审核策略，则<span class="italic"><code class="codeph">role</code></span>必须是您所连接的容器中的公共角色或本地角色。
                  </p>
                  <p><span class="bold">在角色上启用本地审核策略</span></p>
                  <p>可以对本地角色以及公共角色启用本地审核策略。在公共角色上启用本地审核策略时，如果在本地或通常在容器中向用户授予公共角色，则会生成审核记录。</p>
                  <p><span class="bold">在角色上启用通用审核策略</span></p>
                  <p>通用审核策略只能在常用角色上启用。当对公共角色启用公共审核策略时，它会在ROOT容器中共同或本地授予用户公共角色时生成审核记录。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B24D6874-4053-4E66-8238-6CD0C87E9DCA__GUID-1287BF43-370A-4B9C-830B-14A9E3E21934">在[NOT]成功的时候</p>
                  <p>指定<code class="codeph">WHENEVER</code> <code class="codeph">SUCCESSFUL</code>仅审核<code class="codeph">SUCCESSFUL</code> SQL语句和操作。
                  </p>
                  <p>指定<code class="codeph">WHENEVER</code> <code class="codeph">NOT</code> <code class="codeph">SUCCESSFUL</code>仅审核失败或导致错误的SQL语句和操作。
                  </p>
                  <p>如果省略此子句，则无论成功与否，Oracle数据库都会执行审核。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B24D6874-4053-4E66-8238-6CD0C87E9DCA__GUID-3E978C66-4A5C-42BB-9252-0AB856AF0FE9">背景条款</p>
                  <p>指定<code class="codeph">CONTEXT</code>子句以在审计记录中包含上下文属性的值。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>对于<span class="italic"><code class="codeph">namespace</code></span> ，请指定上下文命名空间。
                        </p>
                     </li>
                     <li>
                        <p>对于<span class="italic"><code class="codeph">attribute</code></span> ，请指定一个或多个要包含在审计记录中的值的上下文属性。
                        </p>
                     </li>
                     <li>
                        <p>使用可选的<code class="codeph">BY</code> <span class="italic"><code class="codeph">user</code></span>子句仅将上下文属性的值包含在指定用户执行的事件的审计记录中。如果省略<code class="codeph">BY</code>子句，则上下文属性的值将包含在所有审计记录中。
                        </p>
                     </li>
                  </ul>
                  <p>如果在当前容器是CDB的根目录时指定<code class="codeph">CONTEXT</code>子句，则上下文属性的值将仅包含在根目录中执行的事件的审计记录中。如果指定可选的<code class="codeph">BY</code>子句，则<span class="italic"><code class="codeph">user</code></span>必须是普通用户。
                  </p>
                  <p>如果在当前容器是可插拔数据库（PDB）时指定<code class="codeph">CONTEXT</code>子句，则上下文属性的值将仅包含在该PDB中执行的事件的审计记录中。如果指定可选的<code class="codeph">BY</code>子句，则<span class="italic"><code class="codeph">user</code></span>必须是该PDB中的普通用户或本地用户。</p>
                  <p>您可以通过查询<code class="codeph">AUDIT_UNIFIED_CONTEXTS</code>视图找到配置为在审计跟踪中捕获的应用程序上下文属性。
                  </p>
                  <div class="infoboxnotealso" id="GUID-B24D6874-4053-4E66-8238-6CD0C87E9DCA__GUID-BCA3F525-19EB-43FF-BC28-8A2E45B990CC">
                     <p class="notep1">也可以看看：</p>
                     <p>有关<code class="codeph">AUDIT_UNIFIED_CONTEXTS</code>视图的更多信息，请<code class="codeph">AUDIT_UNIFIED_CONTEXTS</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=REFRN29159" target="_blank"><span class="italic">Oracle数据库参考</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-B24D6874-4053-4E66-8238-6CD0C87E9DCA__BABGCDGC">
                  <p class="subhead1" id="GUID-B24D6874-4053-4E66-8238-6CD0C87E9DCA__GUID-65052445-018B-4278-BBAF-92361C786912">例子</p>
                  <p>以下示例启用在<code class="codeph">CREATE</code> <code class="codeph">AUDIT</code> <code class="codeph">POLICY</code> <span class="q">“ <a href="CREATE-AUDIT-POLICY-Unified-Auditing.html#GUID-8D6961FB-2E50-46F5-81F7-9AEA314FC693__BGEGDCFA">Examples</a> ”</span>中创建的统一审计策略。
                  </p>
                  <p><span class="bold">为所有用户启用统一审核策略：示例</span></p>
                  <p>以下语句为所有用户启用统一审计策略<code class="codeph">table_pol</code> ：</p><pre class="oac_no_warn" dir="ltr">审计政策table_pol;</pre><p>以下语句验证是否为所有用户启用了<code class="codeph">table_pol</code> ：</p><pre class="oac_no_warn" dir="ltr">SELECT policy_name，enabled_opt，user_name FROM audit_unified_enabled_policies WHERE policy_name ='TABLE_POL'; POLICY_NAME ENABLED_OPT USER_NAME ----------- ----------- --------- TABLE_POL所有用户</pre><p><span class="bold">为特定用户启用统一审核策略：示例</span></p>
                  <p>以下语句仅为用户<code class="codeph">hr</code>和<code class="codeph">sh</code>启用统一审计策略<code class="codeph">dml_pol</code> ：</p><pre class="oac_no_warn" dir="ltr">审计政策dml_pol BY hr，sh;</pre><p>以下语句验证仅为用户<code class="codeph">hr</code>和<code class="codeph">sh</code>启用了<code class="codeph">dml_pol</code> ：</p><pre class="oac_no_warn" dir="ltr">SELECT policy_name，enabled_opt，user_name FROM audit_unified_enabled_policies WHERE policy_name ='DML_POL'ORDER BY user_name; POLICY_NAME ENABLED_OPT USER_NAME ----------- ----------- --------- DML_POL BY HR DML_POL BY SH</pre><p>以下语句为除<code class="codeph">hr</code>之外的所有用户启用统一审计策略<code class="codeph">read_dir_pol</code> ：</p><pre class="oac_no_warn" dir="ltr">审计政策read_dir_pol除了小时;</pre><p>以下语句验证是否为除<code class="codeph">hr</code>之外的所有用户启用了<code class="codeph">read_dir_pol</code> ：</p><pre class="oac_no_warn" dir="ltr">SELECT policy_name，enabled_opt，user_name FROM audit_unified_enabled_policies WHERE policy_name ='READ_DIR_POL'; POLICY_NAME ENABLED_OPT USER_NAME ------------ ----------- --------- READ_DIR_POL EXCEPT HR</pre><p>以下语句为用户<code class="codeph">hr</code>启用统一审计策略<code class="codeph">security_pol</code> ，并仅审核失败的SQL语句和操作：</p><pre class="oac_no_warn" dir="ltr">审计政策security_pol BY hr不成功;</pre><p>以下语句验证<code class="codeph">security_pol</code>仅针对用户<code class="codeph">hr</code>启用，并且仅审核失败的SQL语句和操作：</p><pre class="oac_no_warn" dir="ltr">SELECT policy_name，enabled_opt，user_name，success，failure FROM audit_unified_enabled_policies WHERE policy_name ='SECURITY_POL'; POLICY_NAME ENABLED_OPT USER_NAME SUCCESS FAILURE ------------ -------------------- ---------- --- ---- ------- SECURITY_POL HR不是</pre><p><span class="bold">在审计记录中包含上下文属性的值：示例</span></p>
                  <p>以下语句指示数据库在用户<code class="codeph">hr</code>所有审计记录中包含命名空间<code class="codeph">USERENV</code>属性<code class="codeph">CURRENT_USER</code>和<code class="codeph">DB_NAME</code>的值：</p><pre class="oac_no_warn" dir="ltr">AUDIT CONTEXT NAMESPACE userenv ATTRIBUTES current_user，db_name BY hr;</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
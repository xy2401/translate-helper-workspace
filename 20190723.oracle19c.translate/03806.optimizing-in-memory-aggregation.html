<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Database In-Memory provides optimizations to speed up aggregation and arithmetic."></meta>
      <meta name="description" content="Database In-Memory provides optimizations to speed up aggregation and arithmetic."></meta>
      <title>优化聚合</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database In-Memory Guide"></meta>
      <meta property="og:description" content="Database In-Memory provides optimizations to speed up aggregation and arithmetic."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database In-Memory Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-memory-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-22T09:02:38-07:00"></meta>
      <meta name="dcterms.title" content="Database In-Memory Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2016, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96137-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="optimizing-queries-with-join-groups.html" title="Previous" type="text/html"></link>
      <link rel="next" href="repopulation-and-dml.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="INMEM"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="optimizing-queries-with-join-groups.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="repopulation-and-dml.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库内存指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="advanced-optimizations-for-in-memory-queries.html" property="item" typeof="WebPage"><span property="name">优化内存中查询</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">优化聚合</li>
            </ol>
            <a id="GUID-A9E6044E-DC81-44C7-8D0C-E77502722388" name="GUID-A9E6044E-DC81-44C7-8D0C-E77502722388"></a>
            
            <h2 id="INMEM-GUID-A9E6044E-DC81-44C7-8D0C-E77502722388" class="sect2"><span class="enumeration_chapter">9</span>优化聚合</h2>
         </header>
         <div class="ind">
            <div>
               <p>Database In-Memory提供优化以加速聚合和算术。</p>
               <p>本章包含以下主题：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="optimizing-in-memory-aggregation.html#GUID-2C4FA6C6-3DA8-4CEA-9EF0-294396D15077">使用内存中聚合优化联接</a><br>从<span>Oracle Database 12c</span>第1版（12.1.0.2）开始， <strong class="term">内存中聚合（IM聚合）</strong>使查询能够在扫描时聚合。
                  </li>
                  <li class="ulchildlink"><a href="optimizing-in-memory-aggregation.html#GUID-4321558D-853B-41A0-9098-4A45204F21BD">优化内存算法</a><br><span>内存优化算法</span>使用优化的<code class="codeph">NUMBER</code>格式，使用SIMD硬件进行快速计算。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="advanced-optimizations-for-in-memory-queries.html#GUID-33034151-7BD7-4186-B336-C693FBB27634" title="本部分介绍如何使用内存表达式，连接组和内存中聚合来优化查询。它还解释了IM列存储如何重新填充已修改的数据。">优化内存中查询</a></p>
                  </div>
               </div>
            </div>
            
            <div class="props_rev_3"><a id="GUID-2C4FA6C6-3DA8-4CEA-9EF0-294396D15077" name="GUID-2C4FA6C6-3DA8-4CEA-9EF0-294396D15077"></a><h3 id="INMEM-GUID-2C4FA6C6-3DA8-4CEA-9EF0-294396D15077" class="sect3"><span class="enumeration_section">9.1</span>使用内存中聚合优化联接</h3>
               <div>
                  <p>从<span>Oracle Database 12c</span>第1版（12.1.0.2）开始， <strong class="term">内存中聚合（IM聚合）</strong>使查询能够在扫描时聚合。
                  </p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="optimizing-in-memory-aggregation.html#GUID-C0C57677-E420-432C-9E1F-271011F0C775">关于IM聚合</a><br>IM聚合优化了涉及从大表到多个小表的聚合和连接的查询块。
                     </li>
                     <li class="ulchildlink"><a href="optimizing-in-memory-aggregation.html#GUID-378D5929-2D9E-4211-B9E6-4EFA9CC42B7F">IM聚合的目的</a><br>IM聚合预处理小表以加速在大表上执行的每行工作。
                     </li>
                     <li class="ulchildlink"><a href="optimizing-in-memory-aggregation.html#GUID-59C1A480-4977-4635-9C5F-FEDD195F44ED">IM聚合如何工作</a><br>典型的分析查询在处理阶段之间分配行。
                     </li>
                     <li class="ulchildlink"><a href="optimizing-in-memory-aggregation.html#GUID-FA953802-7768-49D5-B70C-C057076F1F4A">IM聚合的控件</a><br>IM聚合与优化器集成在一起。不需要新的SQL或初始化参数。IM聚合不需要其他索引，外键或维度。
                     </li>
                     <li class="ulchildlink"><a href="optimizing-in-memory-aggregation.html#GUID-5AB9792F-8030-4D13-BC12-8DB598A15459">内存中聚合：示例</a><br>在此示例中，业务问题是“每个日历年每个类别中销售了多少产品？“</li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="optimizing-in-memory-aggregation.html#GUID-A9E6044E-DC81-44C7-8D0C-E77502722388" title="Database In-Memory提供优化以加速聚合和算术。">优化聚合</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-C0C57677-E420-432C-9E1F-271011F0C775" name="GUID-C0C57677-E420-432C-9E1F-271011F0C775"></a><h4 id="INMEM-GUID-C0C57677-E420-432C-9E1F-271011F0C775" class="sect4"><span class="enumeration_section">9.1.1</span>关于IM聚合</h4>
                  <div>
                     <p>IM聚合优化了涉及从大表到多个小表的聚合和连接的查询块。</p>
                     <p><code class="codeph">KEY VECTOR</code>和<code class="codeph">VECTOR GROUP BY</code>操作使用高效的数组进行连接和聚合。优化器根据成本为<code class="codeph">GROUP BY</code>操作选择<code class="codeph">VECTOR GROUP BY</code> 。优化程序不为<code class="codeph">GROUP BY ROLLUP</code> ， <code class="codeph">GROUPING SETS</code>或<code class="codeph">CUBE</code>操作选择<code class="codeph">VECTOR GROUP BY</code>聚合。
                     </p>
                     <div class="infoboxnote" id="GUID-C0C57677-E420-432C-9E1F-271011F0C775__GUID-7B26F550-A64E-4A4B-AB77-5905B1AC317A">
                        <p class="notep1">注意：</p>
                        <p>IM聚合也称为<span class="italic">向量聚合</span>和<span class="italic"><code class="codeph">VECTOR GROUP BY</code>聚合</span> 。
                        </p>
                     </div>
                     <p>IM聚合要求<code class="codeph">INMEMORY_SIZE</code>设置为非零值。但是，IM聚合不要求在IM列存储中<span class="italic">填充</span>引用的表。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-C0C57677-E420-432C-9E1F-271011F0C775__GUID-DDD0D536-D149-4E5D-A47F-D56ACE4E0B97">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="enabling-the-im-column-store.html#GUID-6A220D69-66BA-4C50-8FAB-D5004C96B215" title="在可以将表或实例化视图填充到IM列存储中之前，必须为数据库启用IM列存储。">为数据库启用IM列存储</a> ”</span></p>
                           </li>
                           <li>
                              <p></p>
                              <p><a href="../dwhsg/sql-aggregation-data-warehouses.html#GUID-E051A04E-0C53-491D-9B16-B71BA00B80C2" target="_blank"><span><cite>Oracle数据库数据仓库指南</cite></span></a> ，了解有关SQL聚合的更多信息</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizing-in-memory-aggregation.html#GUID-2C4FA6C6-3DA8-4CEA-9EF0-294396D15077" title="从Oracle Database 12c第1版（12.1.0.2）开始，内存中聚合（IM聚合）使查询能够在扫描时聚合。">使用内存中聚合优化联接</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-378D5929-2D9E-4211-B9E6-4EFA9CC42B7F" name="GUID-378D5929-2D9E-4211-B9E6-4EFA9CC42B7F"></a><h4 id="INMEM-GUID-378D5929-2D9E-4211-B9E6-4EFA9CC42B7F" class="sect4"><span class="enumeration_section">9.1.2</span> IM聚合的目的</h4>
                  <div>
                     <p>IM聚合预处理小表以加速在大表上执行的每行工作。</p>
                     <p>典型的分析查询从事实表聚合，并将其连接到维度表。此类查询使用可选的筛选扫描大量数据，并执行1到40列之间的<code class="codeph">GROUP BY</code> 。事实表上的第一个聚合处理最多的行。
                     </p>
                     <p>在<span>Oracle Database 12c</span>之前，唯一的<code class="codeph">GROUP BY</code>操作是<code class="codeph">HASH</code>和<code class="codeph">SORT</code> 。 <code class="codeph">VECTOR GROUP BY</code>是一个额外的基于成本的转换，它将维度和事实表之间的连接转换为过滤器。数据库可以在事实表扫描期间应用此过滤器。连接使用键向量，类似于Bloom过滤器，聚合使用<code class="codeph">VECTOR GROUP BY</code> 。</p>
                     <div class="infoboxnote" id="GUID-378D5929-2D9E-4211-B9E6-4EFA9CC42B7F__GUID-A7D51459-AC5C-4135-A9C7-70E0A8D2F25C">
                        <p class="notep1">注意：</p>
                        <p>虽然矢量变换独立于IM列存储，但它们可以通过SIMD矢量处理非常有效地应用于存储器内数据。</p>
                     </div>
                     <p>IM聚合使矢量连接和<code class="codeph">GROUP BY</code>操作与大表的扫描<span class="italic">同时发生</span> 。因此，这些操作在扫描时聚合，并且不需要等待表扫描和连接操作完成。IM聚合可优化CPU使用率，尤其是CPU缓存。
                     </p>
                     <p>IM聚合可以极大地提高查询性能。数据库可以动态创建报告大纲，然后在扫描事实表期间填写报告详细信息。</p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="optimizing-in-memory-aggregation.html#GUID-0E4F30FE-674F-4284-90F7-520ED1DB427E">IM聚合有用时</a><br>IM聚合可提高将相对较小的表连接到相对较大的事实表的查询的性能，并在事实表中聚合数据。这通常发生在星形或雪花查询中。
                        </li>
                        <li class="ulchildlink"><a href="optimizing-in-memory-aggregation.html#GUID-278FB268-D892-4556-BF7F-9F3EAD93B6A9">当IM聚合不利时</a><br>当存在足够的系统资源时，IM聚合有益于某些星型查询其他查询可能收到很少或没有收益。
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-378D5929-2D9E-4211-B9E6-4EFA9CC42B7F__GUID-A7740FE2-955E-45D9-80A6-065B2CF88E83">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="in-memory-column-store-architecture.html#GUID-8DCA5CC5-69F6-4F26-AE94-49810F742310" title="对于在IM列存储中填充的数据，数据库使用SIMD（单指令，多数据）向量处理。">CPU架构：SIMD矢量处理</a> ”</span></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=GUID-B2914447-CD6D-411C-8467-6E10E78F3DE0" target="_blank"><span><cite>Oracle Database SQL Tuning Guide</cite></span></a>以了解有关查询转换的更多信息</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizing-in-memory-aggregation.html#GUID-2C4FA6C6-3DA8-4CEA-9EF0-294396D15077" title="从Oracle Database 12c第1版（12.1.0.2）开始，内存中聚合（IM聚合）使查询能够在扫描时聚合。">使用内存中聚合优化联接</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-0E4F30FE-674F-4284-90F7-520ED1DB427E" name="GUID-0E4F30FE-674F-4284-90F7-520ED1DB427E"></a><h5 id="INMEM-GUID-0E4F30FE-674F-4284-90F7-520ED1DB427E" class="sect5"><span class="enumeration_section">9.1.2.1</span> IM聚合有用时</h5>
                     <div>
                        <p>IM聚合可提高将相对较小的表连接到相对较大的事实表的查询的性能，并在事实表中聚合数据。这通常发生在星形或雪花查询中。</p>
                        <p>IM列存储中的行存储表和表都可以从IM聚合中受益。</p>
                        <div class="example" id="GUID-0E4F30FE-674F-4284-90F7-520ED1DB427E__GUID-6D6E31CD-017C-4AC1-9420-FAE23E04A7CF">
                           <p class="titleinexample">例9-1 VECTOR GROUP BY</p>
                           <p>请考虑以下查询，该查询执行<code class="codeph">customers</code>维度表与<code class="codeph">sales</code>事实表的连接：</p><pre class="pre codeblock"><code>SELECT c.customer_id，s.quantity_sold，s.amount_sold FROM customers c，sales s WHERE c.customer_id = s.customer_id AND c.country_id ='FR';</code></pre><p>当两个表都填充在IM列存储中时，数据库可以使用SIMD向量处理来扫描行集并应用过滤器。下图显示了查询如何使用矢量连接。优化程序将<code class="codeph">customers</code>表上的谓词<code class="codeph">c.country_id='FR'</code>转换为<code class="codeph">sales</code>事实表上的过滤器。过滤器是<code class="codeph">country_id='FR'</code> 。由于<code class="codeph">sales</code>以列式格式存储，因此查询只需扫描一列即可确定结果。
                           </p>
                           <div class="figure" id="GUID-0E4F30FE-674F-4284-90F7-520ED1DB427E__CIHDIHCE">
                              <p class="titleinfigure">图9-1使用内存中列存储的向量连接</p><img src="img/in_mem_joins.gif" alt="下面是图9-1的描述" title="下面是图9-1的描述" longdesc="img_text/in_mem_joins.html"><br><a href="img_text/in_mem_joins.html">“图9-1使用内存中列存储的向量连接”的描述</a></div>
                           <!-- class="figure" -->
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizing-in-memory-aggregation.html#GUID-378D5929-2D9E-4211-B9E6-4EFA9CC42B7F" title="IM聚合预处理小表以加速在大表上执行的每行工作。">IM聚合的目的</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-278FB268-D892-4556-BF7F-9F3EAD93B6A9" name="GUID-278FB268-D892-4556-BF7F-9F3EAD93B6A9"></a><h5 id="INMEM-GUID-278FB268-D892-4556-BF7F-9F3EAD93B6A9" class="sect5"><span class="enumeration_section">9.1.2.2</span> IM聚合<span class="enumeration_section">不利的</span>时候</h5>
                     <div>
                        <p>当存在足够的系统资源时，IM聚合有益于某些星型查询其他查询可能收到很少或没有收益。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-278FB268-D892-4556-BF7F-9F3EAD93B6A9__GUID-47B7E0AA-A956-438E-8583-2B1B932E20C6">VECTOR GROUP BY Aggregation不利的情况</p>
                           <p>具体而言， <code class="codeph">VECTOR GROUP BY</code>聚合在以下情况下不会使性能受益：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>连接在两个非常大的表之间执行。</p>
                                 <p>默认情况下，仅当相对较小的表连接到相对较大的表时，优化程序才会选择<code class="codeph">VECTOR GROUP BY</code>转换。
                                 </p>
                              </li>
                              <li>
                                 <p>维度包含超过20亿行。</p>
                                 <p>如果维度包含超过20亿行，则不使用<code class="codeph">VECTOR GROUP BY</code>转换。
                                 </p>
                              </li>
                              <li>
                                 <p>系统没有足够的内存。</p>
                                 <p>大多数使用IM列存储的数据库都受益于IM聚合。</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizing-in-memory-aggregation.html#GUID-378D5929-2D9E-4211-B9E6-4EFA9CC42B7F" title="IM聚合预处理小表以加速在大表上执行的每行工作。">IM聚合的目的</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-59C1A480-4977-4635-9C5F-FEDD195F44ED" name="GUID-59C1A480-4977-4635-9C5F-FEDD195F44ED"></a><h4 id="INMEM-GUID-59C1A480-4977-4635-9C5F-FEDD195F44ED" class="sect4"><span class="enumeration_section">9.1.3</span> IM聚合的工作<span class="enumeration_section">原理</span></h4>
                  <div>
                     <p>典型的分析查询在处理阶段之间分配行。</p>
                     <p>阶段如下：</p>
                     <ol>
                        <li>
                           <p>过滤表并生成行集</p>
                        </li>
                        <li>
                           <p>加入行集</p>
                        </li>
                        <li>
                           <p>聚合行</p>
                        </li>
                     </ol>
                     <p><code class="codeph">VECTOR GROUP BY</code>转换结合了不同阶段的工作，将联接转换为过滤器并在扫描事实表时进行聚合。
                     </p>
                     <p>阶段之间的工作单元称为<a href="glossary.html#GUID-0BD22576-DD42-44E5-B1AD-CFF3B9D74E42"><span class="xrefglossterm">数据流操作员（DFO）</span></a> 。<code class="codeph">VECTOR GROUP BY</code>聚合为每个维度使用DFO来创建关键向量结构和临时表。从事实表聚合度量列时，数据库使用此键向量将事实连接键转换为其密集分组键。后期实现步骤将密集分组键连接到临时表。
                     </p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="optimizing-in-memory-aggregation.html#GUID-C3786D7D-0FD6-44F7-93FD-468F3FA02056">优化程序选择IM聚合时</a><br>优化器根据键向量的大小（即不同的连接键），不同分组键的数量以及其他因素决定是否使用向量变换。当维度连接键具有低基数时，优化器倾向于选择此转换。
                        </li>
                        <li class="ulchildlink"><a href="optimizing-in-memory-aggregation.html#GUID-7A06072C-CC6A-4E47-B122-B9D74B3F2C68">关键矢量</a><br><strong class="term">密钥向量</strong>是在密集连接密钥和密集分组密钥之间映射的数据结构。
                        </li>
                        <li class="ulchildlink"><a href="optimizing-in-memory-aggregation.html#GUID-5FE79500-B8C5-4DD7-A2DD-BDA83340B5FF">IM聚合的两个阶段</a><br>通常， <code class="codeph">VECTOR GROUP BY</code>聚合按顺序处理每个维度，然后处理事实表。
                        </li>
                        <li class="ulchildlink"><a href="optimizing-in-memory-aggregation.html#GUID-C425C017-8505-4924-A7AE-308C9BAF2454">IM聚合：场景</a><br>本节给出了<code class="codeph">VECTOR</code> <code class="codeph">GROUP BY</code>聚合如何工作的概念性示例。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizing-in-memory-aggregation.html#GUID-2C4FA6C6-3DA8-4CEA-9EF0-294396D15077" title="从Oracle Database 12c第1版（12.1.0.2）开始，内存中聚合（IM聚合）使查询能够在扫描时聚合。">使用内存中聚合优化联接</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-C3786D7D-0FD6-44F7-93FD-468F3FA02056" name="GUID-C3786D7D-0FD6-44F7-93FD-468F3FA02056"></a><h5 id="INMEM-GUID-C3786D7D-0FD6-44F7-93FD-468F3FA02056" class="sect5"><span class="enumeration_section">9.1.3.1</span>优化器选择IM聚合时</h5>
                     <div>
                        <p>优化器根据键向量的大小（即不同的连接键），不同分组键的数量以及其他因素决定是否使用向量变换。当维度连接键具有低基数时，优化器倾向于选择此转换。</p>
                        <p>当满足以下条件时，Oracle数据库使用<code class="codeph">VECTOR GROUP BY</code>聚合执行数据聚合：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>查询或子查询聚合事实表中的数据，并将事实表连接到一个或多个维度。</p>
                              <p>假设这些事实表仅通过连接连接到维度，也支持连接到相同维度的多个事实表。在这种情况下， <code class="codeph">VECTOR GROUP BY</code>聚合事实表，然后将结果加入分组键。
                              </p>
                           </li>
                           <li>
                              <p>维度和事实表仅通过连接列相互连接。</p>
                              <p>具体而言，查询不得包含任何其他谓词，这些谓词引用跨多维的列，或者来自维度和事实表。如果查询在两个或多个表之间执行连接，然后将结果连接到事实，则<code class="codeph">VECTOR GROUP BY</code>聚合将多个维度视为单个维度。
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-C3786D7D-0FD6-44F7-93FD-468F3FA02056__GUID-C185D25C-F53D-411C-880C-5681F76C1322">
                           <p class="notep1">注意：</p>
                           <p>您可以使用查询块提示或表提示指示数据库对查询使用<code class="codeph">VECTOR GROUP BY</code>聚合。
                           </p>
                        </div>
                        <p><code class="codeph">VECTOR GROUP BY</code>聚合不支持以下内容：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>跨多个维度或维度与事实表之间的半连接和反连接</p>
                           </li>
                           <li>
                              <p>Equijoins跨越多个维度</p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">DISTINCT</code>函数执行的聚合</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-C3786D7D-0FD6-44F7-93FD-468F3FA02056__GUID-96D596AA-2156-4F5F-8A83-A831F664FA2A">
                           <p class="notep1">注意：</p>
                           <p>Bloom过滤器和<code class="codeph">VECTOR GROUP BY</code>聚合并且是互斥的。因此，如果查询使用Bloom过滤器来连接行集，则<code class="codeph">VECTOR GROUP BY</code>聚合不适用于此查询的处理。
                           </p>
                        </div>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-C3786D7D-0FD6-44F7-93FD-468F3FA02056__GUID-C058C9AE-1CE2-497A-984F-36AEFF1C23BB">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../dwhsg/sql-aggregation-data-warehouses.html#GUID-E051A04E-0C53-491D-9B16-B71BA00B80C2" target="_blank"><span><cite>Oracle数据库数据仓库指南</cite></span></a> ，了解有关SQL聚合的更多信息</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizing-in-memory-aggregation.html#GUID-59C1A480-4977-4635-9C5F-FEDD195F44ED" title="典型的分析查询在处理阶段之间分配行。">IM聚合的工作原理</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-7A06072C-CC6A-4E47-B122-B9D74B3F2C68" name="GUID-7A06072C-CC6A-4E47-B122-B9D74B3F2C68"></a><h5 id="INMEM-GUID-7A06072C-CC6A-4E47-B122-B9D74B3F2C68" class="sect5"><span class="enumeration_section">9.1.3.2</span>关键向量</h5>
                     <div>
                        <p><strong class="term">密钥向量</strong>是在密集连接密钥和密集分组密钥之间映射的数据结构。
                        </p>
                        <p><a href="glossary.html#GUID-E610A374-ADFA-4BD2-ACD2-A5DBAE073DF1"><span class="xrefglossterm">密钥</span></a>是一个数字密钥，存储为本机整数并具有一系列值。<a href="glossary.html#GUID-ED23F776-3D5C-430B-9677-3F575BCE2BA3"><span class="xrefglossterm">密集连接键</span></a>表示其连接列来自特定事实表或维度的所有连接键。<a href="glossary.html#GUID-23ED77DA-9711-400E-A789-13B5B3FA7C78"><span class="xrefglossterm">密集分组键</span></a>表示所有分组键，其分组列来自特定事实表或维度。关键向量可实现快速查找。
                        </p>
                        <div class="example" id="GUID-7A06072C-CC6A-4E47-B122-B9D74B3F2C68__GUID-11AAE4FC-D3EA-4423-BD62-FA8EA689E325">
                           <p class="titleinexample">例9-2关键向量</p>
                           <p>假设<code class="codeph">hr.locations</code>表具有<code class="codeph">country_id</code>值，如图所示（仅显示前几个结果）：</p><pre class="pre codeblock"><code>SQL&gt; SELECT country_id FROM locations; CO  -  IT IT JP JP US US US US CA CA CN</code></pre><p>复杂的分析查询将过滤器<code class="codeph">WHERE country_id='US'</code>应用于<code class="codeph">locations</code>表。此过滤器的关键向量可能类似于以下一维数组：</p><pre class="pre codeblock"><code>0 0 0 0 1 1 1 1 0 0 0</code></pre><p>在前面的数组中， <code class="codeph">1</code>是<code class="codeph">country_id='US'</code>的密集分组键。<code class="codeph">0</code>值表示与此过滤器不匹配的<code class="codeph">locations</code>中的行。如果查询使用过滤器<code class="codeph">WHERE country_id IN ('US','JP')</code> ，则该数组可能如下所示，其中<code class="codeph">2</code>是<code class="codeph">JP</code>的密集分组键， <code class="codeph">1</code>是<code class="codeph">US</code>的密集分组键：</p><pre class="pre codeblock"><code>0 0 2 2 1 1 1 1 0 0 0</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizing-in-memory-aggregation.html#GUID-59C1A480-4977-4635-9C5F-FEDD195F44ED" title="典型的分析查询在处理阶段之间分配行。">IM聚合的工作原理</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-5FE79500-B8C5-4DD7-A2DD-BDA83340B5FF" name="GUID-5FE79500-B8C5-4DD7-A2DD-BDA83340B5FF"></a><h5 id="INMEM-GUID-5FE79500-B8C5-4DD7-A2DD-BDA83340B5FF" class="sect5"><span class="enumeration_section">9.1.3.3</span> IM聚合的两个阶段</h5>
                     <div>
                        <p>通常， <code class="codeph">VECTOR GROUP BY</code>聚合按顺序处理每个维度，然后处理事实表。
                        </p>
                        <p>执行IM聚合时，数据库按如下方式进行：</p>
                        <ol>
                           <li>
                              <p>按如下顺序处理每个维度：</p>
                              <ol type="a">
                                 <li>
                                    <p>找到唯一的密集分组键。</p>
                                 </li>
                                 <li>
                                    <p>创建一个关键向量。</p>
                                 </li>
                                 <li>
                                    <p>创建一个临时表（ <code class="codeph">CURSOR DURATION MEMORY</code> ）。
                                    </p>
                                 </li>
                              </ol>
                              <p>下图说明了此阶段中的步骤，从DFO 0中维度表的扫描开始，到创建临时表结束。在最简单的并行<code class="codeph">GROUP BY</code>或连接处理形式中，数据库处理其自己的DFO中的每个连接或<code class="codeph">GROUP BY</code> 。</p>
                              <div class="figure" id="GUID-5FE79500-B8C5-4DD7-A2DD-BDA83340B5FF__BABICEAH">
                                 <p class="titleinfigure">图9-2内存中聚合的第1阶段</p><img src="img/tgsql_vm_079.png" alt="下面是图9-2的描述" title="下面是图9-2的描述" longdesc="img_text/tgsql_vm_079.html"><br><a href="img_text/tgsql_vm_079.html">“图9-2内存中聚合的第1阶段”的说明</a></div>
                              <!-- class="figure" -->
                           </li>
                           <li>
                              <p>处理事实表。</p>
                              <ol type="a">
                                 <li>
                                    <p>使用在前一阶段中创建的关键向量处理所有连接和聚合。</p>
                                 </li>
                                 <li>
                                    <p>将结果加入每个临时表。</p>
                                 </li>
                              </ol>
                              <p><a href="optimizing-in-memory-aggregation.html#GUID-5FE79500-B8C5-4DD7-A2DD-BDA83340B5FF__BABEIJEA">图9-3</a>说明了事实表与两个维度的连接中的阶段2。在DFO 0中，数据库执行事实表的完整扫描，然后使用每个维度的键向量来过滤掉不匹配的行。DFO 2将DFO 0的结果与DFO 1结合。DFO 4将DFO 2的结果与DFO 3结合在一起。
                              </p>
                              <div class="figure" id="GUID-5FE79500-B8C5-4DD7-A2DD-BDA83340B5FF__BABEIJEA">
                                 <p class="titleinfigure">图9-3内存中聚合的第2阶段</p><img src="img/tgsql_vm_078.png" alt="下面是图9-3的描述" title="下面是图9-3的描述" longdesc="img_text/tgsql_vm_078.html"><br><a href="img_text/tgsql_vm_078.html">“图9-3内存中聚合的第2阶段”的描述</a></div>
                              <!-- class="figure" -->
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizing-in-memory-aggregation.html#GUID-59C1A480-4977-4635-9C5F-FEDD195F44ED" title="典型的分析查询在处理阶段之间分配行。">IM聚合的工作原理</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-C425C017-8505-4924-A7AE-308C9BAF2454" name="GUID-C425C017-8505-4924-A7AE-308C9BAF2454"></a><h5 id="INMEM-GUID-C425C017-8505-4924-A7AE-308C9BAF2454" class="sect5"><span class="enumeration_section">9.1.3.4</span> IM聚合：场景</h5>
                     <div>
                        <p>本节给出了<code class="codeph">VECTOR</code> <code class="codeph">GROUP BY</code>聚合如何工作的概念性示例。
                        </p>
                        <div class="infoboxnote" id="GUID-C425C017-8505-4924-A7AE-308C9BAF2454__GUID-2E7C6D38-81E5-4A68-B3EF-6FB8B276CCF3">
                           <p class="notep1">注意：</p>
                           <p>该方案不使用示例模式表或显示实际的执行计划。</p>
                        </div>
                        <p>本节包含以下主题：</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="optimizing-in-memory-aggregation.html#GUID-DDD8CDE8-85B4-4644-83FC-0E339CBEE8AE">星型模式的样本分析查询</a><br>此方案中的此示例星型模式包含<code class="codeph">sales_online</code>事实表和两个维度表： <code class="codeph">geography</code>和<code class="codeph">products</code> 。
                           </li>
                           <li class="ulchildlink"><a href="optimizing-in-memory-aggregation.html#GUID-C739095A-8522-4748-8988-CE7E594E2B39">第1步：地理维度的关键向量和临时表创建</a><br>在此查询的<code class="codeph">VECTOR GROUP BY</code>聚合的第一阶段，数据库为华盛顿州或加利福尼亚州的城市的每个城市/州组合创建密集分组键。
                           </li>
                           <li class="ulchildlink"><a href="optimizing-in-memory-aggregation.html#GUID-E22A075D-D027-4EEE-B670-B2D2DF50ED94">第2步：产品维度的关键向量和临时表创建</a><br>数据库为Acme产品的每个不同类别/子类别组合创建密集分组键。
                           </li>
                           <li class="ulchildlink"><a href="optimizing-in-memory-aggregation.html#GUID-1FC11741-E3D2-458F-9442-96E9247954CC">第3步：关键矢量查询转换</a><br>在此阶段，数据库处理事实表。
                           </li>
                           <li class="ulchildlink"><a href="optimizing-in-memory-aggregation.html#GUID-F41F2AD3-3AA9-4702-8E90-3EAB8E3453E5">第4步：从事实表中进行行过滤</a><br>此阶段获取每个分组键组合的销售金额。
                           </li>
                           <li class="ulchildlink"><a href="optimizing-in-memory-aggregation.html#GUID-6A98F912-9D04-4570-99D9-A3D50E171186">步骤5：使用阵列进行聚合</a><br>数据库使用多维数组来执行聚合。
                           </li>
                           <li class="ulchildlink"><a href="optimizing-in-memory-aggregation.html#GUID-699A1CCA-8324-4049-AFD3-457ADBF1D81A">第6步：加入回临时表</a><br>在处理的最后阶段，数据库使用密集分组键将行连接回临时表以获取区域和类别的名称。
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="optimizing-in-memory-aggregation.html#GUID-59C1A480-4977-4635-9C5F-FEDD195F44ED" title="典型的分析查询在处理阶段之间分配行。">IM聚合的工作原理</a></p>
                           </div>
                        </div>
                     </div>
                     
                     <div class="props_rev_3"><a id="GUID-DDD8CDE8-85B4-4644-83FC-0E339CBEE8AE" name="GUID-DDD8CDE8-85B4-4644-83FC-0E339CBEE8AE"></a><h6 id="INMEM-GUID-DDD8CDE8-85B4-4644-83FC-0E339CBEE8AE" class="sect6"><span class="enumeration_section">9.1.3.4.1</span>星型模式的样本分析查询</h6>
                        <div>
                           <p>此方案中的此示例星型模式包含<code class="codeph">sales_online</code>事实表和两个维度表： <code class="codeph">geography</code>和<code class="codeph">products</code> 。
                           </p>
                           <p><code class="codeph">geography</code>每一行都由<code class="codeph">geog_id</code>列唯一标识。<code class="codeph">products</code>每一行都由<code class="codeph">prod_id</code>列唯一标识。<code class="codeph">sales_online</code>每一行<code class="codeph">sales_online</code> <code class="codeph">geog_id</code> ， <code class="codeph">prod_id</code>和销售金额唯一标识。
                           </p>
                           <div class="tblformal" id="GUID-DDD8CDE8-85B4-4644-83FC-0E339CBEE8AE__GUID-157E6B61-DDCA-405A-B870-34346844295F">
                              <p class="titleintable">表9-1地理表中的示例行</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="地理表中的示例行" width="100%" border="1" summary="Sample rows in geography table" frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="23%" id="d27228e1982">国家</th>
                                       <th align="left" valign="bottom" width="25%" id="d27228e1985">州</th>
                                       <th align="left" valign="bottom" width="25%" id="d27228e1988">市</th>
                                       <th align="left" valign="bottom" width="27%" id="d27228e1991">geog_id</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="23%" id="d27228e1996" headers="d27228e1982 ">
                                          <p>美国</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d27228e1996 d27228e1985 ">
                                          <p>WA</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d27228e1996 d27228e1988 ">
                                          <p>西雅图</p>
                                       </td>
                                       <td align="left" valign="top" width="27%" headers="d27228e1996 d27228e1991 ">
                                          <p>2</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="23%" id="d27228e2009" headers="d27228e1982 ">
                                          <p>美国</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d27228e2009 d27228e1985 ">
                                          <p>WA</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d27228e2009 d27228e1988 ">
                                          <p>斯波坎</p>
                                       </td>
                                       <td align="left" valign="top" width="27%" headers="d27228e2009 d27228e1991 ">
                                          <p>3</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="23%" id="d27228e2022" headers="d27228e1982 ">
                                          <p>美国</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d27228e2022 d27228e1985 ">
                                          <p>CA</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d27228e2022 d27228e1988 ">
                                          <p>SF</p>
                                       </td>
                                       <td align="left" valign="top" width="27%" headers="d27228e2022 d27228e1991 ">
                                          <p>7</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="23%" id="d27228e2035" headers="d27228e1982 ">
                                          <p>美国</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d27228e2035 d27228e1985 ">
                                          <p>CA</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d27228e2035 d27228e1988 ">
                                          <p>LA</p>
                                       </td>
                                       <td align="left" valign="top" width="27%" headers="d27228e2035 d27228e1991 ">
                                          <p>8</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <div class="tblformal" id="GUID-DDD8CDE8-85B4-4644-83FC-0E339CBEE8AE__GUID-B70191EF-AA11-498B-BC66-4F97C46F7228">
                              <p class="titleintable">表9-2产品中的样本行表</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="产品表中的样本行" width="100%" border="1" summary="Sample rows in products table" frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="23%" id="d27228e2059">MANUF</th>
                                       <th align="left" valign="bottom" width="26%" id="d27228e2062">类别</th>
                                       <th align="left" valign="bottom" width="26%" id="d27228e2065">子类别</th>
                                       <th align="left" valign="bottom" width="26%" id="d27228e2068">PROD_ID</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="23%" id="d27228e2073" headers="d27228e2059 ">
                                          <p>顶点</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e2073 d27228e2062 ">
                                          <p>运动</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e2073 d27228e2065 ">
                                          <p>自行车</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e2073 d27228e2068 ">
                                          <p>4</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="23%" id="d27228e2086" headers="d27228e2059 ">
                                          <p>顶点</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e2086 d27228e2062 ">
                                          <p>运动</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e2086 d27228e2065 ">
                                          <p>球</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e2086 d27228e2068 ">
                                          <p>3</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="23%" id="d27228e2099" headers="d27228e2059 ">
                                          <p>顶点</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e2099 d27228e2062 ">
                                          <p>电动</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e2099 d27228e2065 ">
                                          <p>灯泡</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e2099 d27228e2068 ">
                                          <p>1</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="23%" id="d27228e2112" headers="d27228e2059 ">
                                          <p>顶点</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e2112 d27228e2062 ">
                                          <p>电动</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e2112 d27228e2065 ">
                                          <p>开关</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e2112 d27228e2068 ">
                                          <p>8</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <div class="tblformal" id="GUID-DDD8CDE8-85B4-4644-83FC-0E339CBEE8AE__GUID-3176F3DD-6D28-43E4-BA5D-9FCF9BADF8F9">
                              <p class="titleintable">表9-3 sales_online表中的示例行</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="sales_online表中的示例行" width="100%" border="1" summary="Sample rows in sales_online table" frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="33%" id="d27228e2135">PROD_ID</th>
                                       <th align="left" valign="bottom" width="34%" id="d27228e2138">geog_id</th>
                                       <th align="left" valign="bottom" width="33%" id="d27228e2141">量</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="33%" id="d27228e2146" headers="d27228e2135 ">
                                          <p>8</p>
                                       </td>
                                       <td align="left" valign="top" width="34%" headers="d27228e2146 d27228e2138 ">
                                          <p>1</p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d27228e2146 d27228e2141 ">
                                          <p>100</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="33%" id="d27228e2156" headers="d27228e2135 ">
                                          <p>9</p>
                                       </td>
                                       <td align="left" valign="top" width="34%" headers="d27228e2156 d27228e2138 ">
                                          <p>1</p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d27228e2156 d27228e2141 ">
                                          <p>150</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="33%" id="d27228e2166" headers="d27228e2135 ">
                                          <p>8</p>
                                       </td>
                                       <td align="left" valign="top" width="34%" headers="d27228e2166 d27228e2138 ">
                                          <p>2</p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d27228e2166 d27228e2141 ">
                                          <p>100</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="33%" id="d27228e2176" headers="d27228e2135 ">
                                          <p>4</p>
                                       </td>
                                       <td align="left" valign="top" width="34%" headers="d27228e2176 d27228e2138 ">
                                          <p>3</p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d27228e2176 d27228e2141 ">
                                          <p>110</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="33%" id="d27228e2186" headers="d27228e2135 ">
                                          <p>2</p>
                                       </td>
                                       <td align="left" valign="top" width="34%" headers="d27228e2186 d27228e2138 ">
                                          <p>三十</p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d27228e2186 d27228e2141 ">
                                          <p>130</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="33%" id="d27228e2196" headers="d27228e2135 ">
                                          <p>6</p>
                                       </td>
                                       <td align="left" valign="top" width="34%" headers="d27228e2196 d27228e2138 ">
                                          <p>20</p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d27228e2196 d27228e2141 ">
                                          <p>400</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="33%" id="d27228e2206" headers="d27228e2135 ">
                                          <p>3</p>
                                       </td>
                                       <td align="left" valign="top" width="34%" headers="d27228e2206 d27228e2138 ">
                                          <p>1</p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d27228e2206 d27228e2141 ">
                                          <p>100</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="33%" id="d27228e2216" headers="d27228e2135 ">
                                          <p>1</p>
                                       </td>
                                       <td align="left" valign="top" width="34%" headers="d27228e2216 d27228e2138 ">
                                          <p>7</p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d27228e2216 d27228e2141 ">
                                          <p>120</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="33%" id="d27228e2226" headers="d27228e2135 ">
                                          <p>3</p>
                                       </td>
                                       <td align="left" valign="top" width="34%" headers="d27228e2226 d27228e2138 ">
                                          <p>8</p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d27228e2226 d27228e2141 ">
                                          <p>130</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="33%" id="d27228e2236" headers="d27228e2135 ">
                                          <p>4</p>
                                       </td>
                                       <td align="left" valign="top" width="34%" headers="d27228e2236 d27228e2138 ">
                                          <p>3</p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d27228e2236 d27228e2141 ">
                                          <p>200</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <p>一位经理问商业问题，“每个子类别中有多少Acme产品在华盛顿在线销售，有多少在加利福尼亚销售？“要回答这个问题， <code class="codeph">sales_online</code>事实表的分析查询将连接<code class="codeph">products</code>和<code class="codeph">geography</code>维度表，如下所示：</p><pre class="pre codeblock"><code>SELECT p.category，p.subcategory，g.country，g.state，SUM（s.amount）FROM sales_online s，products p，geography g WHERE s.geog_id = g.geog_id AND s.prod_id = p.prod_id AND g .state IN（'WA'，'CA'）和p.manuf ='ACME'GROUP BY类别，子类别，国家，州</code></pre></div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="optimizing-in-memory-aggregation.html#GUID-C425C017-8505-4924-A7AE-308C9BAF2454" title="本节给出了VECTOR GROUP BY聚合如何工作的概念性示例。">IM聚合：方案</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="props_rev_3"><a id="GUID-C739095A-8522-4748-8988-CE7E594E2B39" name="GUID-C739095A-8522-4748-8988-CE7E594E2B39"></a><h6 id="INMEM-GUID-C739095A-8522-4748-8988-CE7E594E2B39" class="sect6"><span class="enumeration_section">9.1.3.4.2</span>步骤1：地理维度的关键向量和临时表创建</h6>
                        <div>
                           <p>在此查询的<code class="codeph">VECTOR GROUP BY</code>聚合的第一阶段，数据库为华盛顿州或加利福尼亚州的城市的每个城市/州组合创建密集分组键。
                           </p>
                           <p>在<a href="optimizing-in-memory-aggregation.html#GUID-C739095A-8522-4748-8988-CE7E594E2B39__BABIFBJI" title="地理临时表">表9-6中</a> ， <code class="codeph">1</code>是<code class="codeph">USA,WA</code>分组键， <code class="codeph">2</code>是<code class="codeph">USA,CA</code>分组键。
                           </p>
                           <div class="tblformal" id="GUID-C739095A-8522-4748-8988-CE7E594E2B39__GUID-599445B0-236C-463C-BCFB-FF5FB67B7C7C">
                              <p class="titleintable">表9-4地理密集分组密钥</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="密集的地理分组" width="100%" border="1" summary="Dense grouping key for geography table" frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="14%" id="d27228e2399">国家</th>
                                       <th align="left" valign="bottom" width="13%" id="d27228e2402">州</th>
                                       <th align="left" valign="bottom" width="19%" id="d27228e2405">市</th>
                                       <th align="left" valign="bottom" width="19%" id="d27228e2408">geog_id</th>
                                       <th align="left" valign="bottom" width="34%" id="d27228e2411">dense_gr_key_geog</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="14%" id="d27228e2416" headers="d27228e2399 ">
                                          <p>美国</p>
                                       </td>
                                       <td align="left" valign="top" width="13%" headers="d27228e2416 d27228e2402 ">
                                          <p>WA</p>
                                       </td>
                                       <td align="left" valign="top" width="19%" headers="d27228e2416 d27228e2405 ">
                                          <p>西雅图</p>
                                       </td>
                                       <td align="left" valign="top" width="19%" headers="d27228e2416 d27228e2408 ">
                                          <p>2</p>
                                       </td>
                                       <td align="left" valign="top" width="34%" headers="d27228e2416 d27228e2411 ">
                                          <p>1</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="14%" id="d27228e2432" headers="d27228e2399 ">
                                          <p>美国</p>
                                       </td>
                                       <td align="left" valign="top" width="13%" headers="d27228e2432 d27228e2402 ">
                                          <p>WA</p>
                                       </td>
                                       <td align="left" valign="top" width="19%" headers="d27228e2432 d27228e2405 ">
                                          <p>斯波坎</p>
                                       </td>
                                       <td align="left" valign="top" width="19%" headers="d27228e2432 d27228e2408 ">
                                          <p>3</p>
                                       </td>
                                       <td align="left" valign="top" width="34%" headers="d27228e2432 d27228e2411 ">
                                          <p>1</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="14%" id="d27228e2448" headers="d27228e2399 ">
                                          <p>美国</p>
                                       </td>
                                       <td align="left" valign="top" width="13%" headers="d27228e2448 d27228e2402 ">
                                          <p>CA</p>
                                       </td>
                                       <td align="left" valign="top" width="19%" headers="d27228e2448 d27228e2405 ">
                                          <p>SF</p>
                                       </td>
                                       <td align="left" valign="top" width="19%" headers="d27228e2448 d27228e2408 ">
                                          <p>7</p>
                                       </td>
                                       <td align="left" valign="top" width="34%" headers="d27228e2448 d27228e2411 ">
                                          <p>2</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="14%" id="d27228e2464" headers="d27228e2399 ">
                                          <p>美国</p>
                                       </td>
                                       <td align="left" valign="top" width="13%" headers="d27228e2464 d27228e2402 ">
                                          <p>CA</p>
                                       </td>
                                       <td align="left" valign="top" width="19%" headers="d27228e2464 d27228e2405 ">
                                          <p>LA</p>
                                       </td>
                                       <td align="left" valign="top" width="19%" headers="d27228e2464 d27228e2408 ">
                                          <p>8</p>
                                       </td>
                                       <td align="left" valign="top" width="34%" headers="d27228e2464 d27228e2411 ">
                                          <p>2</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <p><code class="codeph">geography</code>表的关键向量看起来像<a href="optimizing-in-memory-aggregation.html#GUID-C739095A-8522-4748-8988-CE7E594E2B39__BABDBJAA" title="XLATE用于地理表">表9-5中</a>最后一列所代表的数组。值是<code class="codeph">geography</code>密集分组键。因此，关键向量指示<code class="codeph">sales_online</code>哪些行符合<code class="codeph">geography.state</code>过滤条件（在<code class="codeph">CA</code>或<code class="codeph">WA</code>状态下进行的销售）以及每行所属的国家/州组（ <code class="codeph">USA,WA</code>组或<code class="codeph">USA,CA</code>组）。
                           </p>
                           <div class="tblformal" id="GUID-C739095A-8522-4748-8988-CE7E594E2B39__BABDBJAA">
                              <p class="titleintable">表9-5在线销售</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="在线销售" width="100%" border="1" summary="XLATE for geography table" frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="20%" id="d27228e2523">PROD_ID</th>
                                       <th align="left" valign="bottom" width="22%" id="d27228e2526">geog_id</th>
                                       <th align="left" valign="bottom" width="22%" id="d27228e2529">量</th>
                                       <th align="left" valign="bottom" width="35%" id="d27228e2532">地理的关键矢量</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d27228e2537" headers="d27228e2523 ">
                                          <p>8</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e2537 d27228e2526 ">
                                          <p>1</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e2537 d27228e2529 ">
                                          <p>100</p>
                                       </td>
                                       <td align="left" valign="top" width="35%" headers="d27228e2537 d27228e2532 ">
                                          <p>0</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d27228e2550" headers="d27228e2523 ">
                                          <p>9</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e2550 d27228e2526 ">
                                          <p>1</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e2550 d27228e2529 ">
                                          <p>150</p>
                                       </td>
                                       <td align="left" valign="top" width="35%" headers="d27228e2550 d27228e2532 ">
                                          <p>0</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d27228e2563" headers="d27228e2523 ">
                                          <p>8</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e2563 d27228e2526 ">
                                          <p>2</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e2563 d27228e2529 ">
                                          <p>100</p>
                                       </td>
                                       <td align="left" valign="top" width="35%" headers="d27228e2563 d27228e2532 ">
                                          <p>1</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d27228e2576" headers="d27228e2523 ">
                                          <p>4</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e2576 d27228e2526 ">
                                          <p>3</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e2576 d27228e2529 ">
                                          <p>110</p>
                                       </td>
                                       <td align="left" valign="top" width="35%" headers="d27228e2576 d27228e2532 ">
                                          <p>1</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d27228e2589" headers="d27228e2523 ">
                                          <p>2</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e2589 d27228e2526 ">
                                          <p>三十</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e2589 d27228e2529 ">
                                          <p>130</p>
                                       </td>
                                       <td align="left" valign="top" width="35%" headers="d27228e2589 d27228e2532 ">
                                          <p>0</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d27228e2602" headers="d27228e2523 ">
                                          <p>6</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e2602 d27228e2526 ">
                                          <p>20</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e2602 d27228e2529 ">
                                          <p>400</p>
                                       </td>
                                       <td align="left" valign="top" width="35%" headers="d27228e2602 d27228e2532 ">
                                          <p>0</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d27228e2615" headers="d27228e2523 ">
                                          <p>3</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e2615 d27228e2526 ">
                                          <p>1</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e2615 d27228e2529 ">
                                          <p>100</p>
                                       </td>
                                       <td align="left" valign="top" width="35%" headers="d27228e2615 d27228e2532 ">
                                          <p>0</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d27228e2628" headers="d27228e2523 ">
                                          <p>1</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e2628 d27228e2526 ">
                                          <p>7</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e2628 d27228e2529 ">
                                          <p>120</p>
                                       </td>
                                       <td align="left" valign="top" width="35%" headers="d27228e2628 d27228e2532 ">
                                          <p>2</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d27228e2641" headers="d27228e2523 ">
                                          <p>3</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e2641 d27228e2526 ">
                                          <p>8</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e2641 d27228e2529 ">
                                          <p>130</p>
                                       </td>
                                       <td align="left" valign="top" width="35%" headers="d27228e2641 d27228e2532 ">
                                          <p>2</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d27228e2654" headers="d27228e2523 ">
                                          <p>4</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e2654 d27228e2526 ">
                                          <p>3</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e2654 d27228e2529 ">
                                          <p>200</p>
                                       </td>
                                       <td align="left" valign="top" width="35%" headers="d27228e2654 d27228e2532 ">
                                          <p>1</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <p>在内部，数据库创建一个类似于以下内容的临时表：</p><pre class="oac_no_warn" dir="ltr">CREATE TEMPORARY TABLE tt_geography AS SELECT MAX（国家），MAX（州），KEY_VECTOR_CREATE（...）dense_gr_key_geog FROM地理位置WHERE状态IN（'WA'，'CA'）GROUP BY国家，州</pre><p><a href="optimizing-in-memory-aggregation.html#GUID-C739095A-8522-4748-8988-CE7E594E2B39__BABIFBJI" title="地理临时表">表9-6</a>显示了<code class="codeph">tt_geography</code>临时表中的行。<code class="codeph">USA,WA</code>组合的密集分组密钥为<code class="codeph">1</code> ，而<code class="codeph">USA,CA</code>组合的密集分组密钥为<code class="codeph">2</code> 。
                           </p>
                           <div class="tblformal" id="GUID-C739095A-8522-4748-8988-CE7E594E2B39__BABIFBJI">
                              <p class="titleintable">表9-6 tt_geography</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="tt_geography" width="100%" border="1" summary="Temporary table for geography" frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="20%" id="d27228e2702">国家</th>
                                       <th align="left" valign="bottom" width="20%" id="d27228e2705">州</th>
                                       <th align="left" valign="bottom" width="60%" id="d27228e2708">dense_gr_key_geog</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d27228e2713" headers="d27228e2702 ">
                                          <p>美国</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d27228e2713 d27228e2705 ">
                                          <p>WA</p>
                                       </td>
                                       <td align="left" valign="top" width="60%" headers="d27228e2713 d27228e2708 ">
                                          <p>1</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d27228e2723" headers="d27228e2702 ">
                                          <p>美国</p>
                                       </td>
                                       <td align="left" valign="top" width="20%" headers="d27228e2723 d27228e2705 ">
                                          <p>CA</p>
                                       </td>
                                       <td align="left" valign="top" width="60%" headers="d27228e2723 d27228e2708 ">
                                          <p>2</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="optimizing-in-memory-aggregation.html#GUID-C425C017-8505-4924-A7AE-308C9BAF2454" title="本节给出了VECTOR GROUP BY聚合如何工作的概念性示例。">IM聚合：方案</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="props_rev_3"><a id="GUID-E22A075D-D027-4EEE-B670-B2D2DF50ED94" name="GUID-E22A075D-D027-4EEE-B670-B2D2DF50ED94"></a><h6 id="INMEM-GUID-E22A075D-D027-4EEE-B670-B2D2DF50ED94" class="sect6"><span class="enumeration_section">9.1.3.4.3</span>步骤2：产品的关键向量和临时表创建维度</h6>
                        <div>
                           <p>数据库为Acme产品的每个不同类别/子类别组合创建密集分组键。</p>
                           <p>例如，在<a href="optimizing-in-memory-aggregation.html#GUID-E22A075D-D027-4EEE-B670-B2D2DF50ED94__BABHFGEJ" title="产品表中的示例行">表9-7中</a> ， <code class="codeph">4</code>是Acme电气开关的密集分组键。
                           </p>
                           <div class="tblformal" id="GUID-E22A075D-D027-4EEE-B670-B2D2DF50ED94__BABHFGEJ">
                              <p class="titleintable">表9-7产品中的样本行表</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="产品表中的样本行" width="100%" border="1" summary="Sample rows in products table" frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="16%" id="d27228e2860">MANUF</th>
                                       <th align="left" valign="bottom" width="18%" id="d27228e2863">类别</th>
                                       <th align="left" valign="bottom" width="18%" id="d27228e2866">子类别</th>
                                       <th align="left" valign="bottom" width="17%" id="d27228e2869">PROD_ID</th>
                                       <th align="left" valign="bottom" width="31%" id="d27228e2872">dense_gr_key_prod</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="16%" id="d27228e2877" headers="d27228e2860 ">
                                          <p>顶点</p>
                                       </td>
                                       <td align="left" valign="top" width="18%" headers="d27228e2877 d27228e2863 ">
                                          <p>运动</p>
                                       </td>
                                       <td align="left" valign="top" width="18%" headers="d27228e2877 d27228e2866 ">
                                          <p>自行车</p>
                                       </td>
                                       <td align="left" valign="top" width="17%" headers="d27228e2877 d27228e2869 ">
                                          <p>4</p>
                                       </td>
                                       <td align="left" valign="top" width="31%" headers="d27228e2877 d27228e2872 ">
                                          <p>1</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="16%" id="d27228e2893" headers="d27228e2860 ">
                                          <p>顶点</p>
                                       </td>
                                       <td align="left" valign="top" width="18%" headers="d27228e2893 d27228e2863 ">
                                          <p>运动</p>
                                       </td>
                                       <td align="left" valign="top" width="18%" headers="d27228e2893 d27228e2866 ">
                                          <p>球</p>
                                       </td>
                                       <td align="left" valign="top" width="17%" headers="d27228e2893 d27228e2869 ">
                                          <p>3</p>
                                       </td>
                                       <td align="left" valign="top" width="31%" headers="d27228e2893 d27228e2872 ">
                                          <p>2</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="16%" id="d27228e2909" headers="d27228e2860 ">
                                          <p>顶点</p>
                                       </td>
                                       <td align="left" valign="top" width="18%" headers="d27228e2909 d27228e2863 ">
                                          <p>电动</p>
                                       </td>
                                       <td align="left" valign="top" width="18%" headers="d27228e2909 d27228e2866 ">
                                          <p>灯泡</p>
                                       </td>
                                       <td align="left" valign="top" width="17%" headers="d27228e2909 d27228e2869 ">
                                          <p>1</p>
                                       </td>
                                       <td align="left" valign="top" width="31%" headers="d27228e2909 d27228e2872 ">
                                          <p>3</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="16%" id="d27228e2925" headers="d27228e2860 ">
                                          <p>顶点</p>
                                       </td>
                                       <td align="left" valign="top" width="18%" headers="d27228e2925 d27228e2863 ">
                                          <p>电动</p>
                                       </td>
                                       <td align="left" valign="top" width="18%" headers="d27228e2925 d27228e2866 ">
                                          <p>开关</p>
                                       </td>
                                       <td align="left" valign="top" width="17%" headers="d27228e2925 d27228e2869 ">
                                          <p>8</p>
                                       </td>
                                       <td align="left" valign="top" width="31%" headers="d27228e2925 d27228e2872 ">
                                          <p>4</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <p><code class="codeph">products</code>表的关键向量可能类似于<a href="optimizing-in-memory-aggregation.html#GUID-E22A075D-D027-4EEE-B670-B2D2DF50ED94__BABEBAFF" title="XLATE产品">表9-8中</a>最后一列所表示的数组。值表示<code class="codeph">products</code>密集分组键。例如， <code class="codeph">4</code>表示Acme电气开关的在线销售。因此，关键向量指示<code class="codeph">sales_online</code>哪些行符合<code class="codeph">products</code>过滤条件（销售Acme产品）。
                           </p>
                           <div class="tblformal" id="GUID-E22A075D-D027-4EEE-B670-B2D2DF50ED94__BABEBAFF">
                              <p class="titleintable">表9-8关键向量</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="关键矢量" width="100%" border="1" summary="XLATE for products" frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="22%" id="d27228e2975">PROD_ID</th>
                                       <th align="left" valign="bottom" width="22%" id="d27228e2978">geog_id</th>
                                       <th align="left" valign="bottom" width="28%" id="d27228e2981">量</th>
                                       <th align="left" valign="bottom" width="28%" id="d27228e2984">产品的关键矢量</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="22%" id="d27228e2989" headers="d27228e2975 ">
                                          <p>8</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e2989 d27228e2978 ">
                                          <p>1</p>
                                       </td>
                                       <td align="left" valign="top" width="28%" headers="d27228e2989 d27228e2981 ">
                                          <p>100</p>
                                       </td>
                                       <td align="left" valign="top" width="28%" headers="d27228e2989 d27228e2984 ">
                                          <p>4</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="22%" id="d27228e3002" headers="d27228e2975 ">
                                          <p>9</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e3002 d27228e2978 ">
                                          <p>1</p>
                                       </td>
                                       <td align="left" valign="top" width="28%" headers="d27228e3002 d27228e2981 ">
                                          <p>150</p>
                                       </td>
                                       <td align="left" valign="top" width="28%" headers="d27228e3002 d27228e2984 ">
                                          <p>0</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="22%" id="d27228e3015" headers="d27228e2975 ">
                                          <p>8</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e3015 d27228e2978 ">
                                          <p>2</p>
                                       </td>
                                       <td align="left" valign="top" width="28%" headers="d27228e3015 d27228e2981 ">
                                          <p>100</p>
                                       </td>
                                       <td align="left" valign="top" width="28%" headers="d27228e3015 d27228e2984 ">
                                          <p>4</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="22%" id="d27228e3028" headers="d27228e2975 ">
                                          <p>4</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e3028 d27228e2978 ">
                                          <p>3</p>
                                       </td>
                                       <td align="left" valign="top" width="28%" headers="d27228e3028 d27228e2981 ">
                                          <p>110</p>
                                       </td>
                                       <td align="left" valign="top" width="28%" headers="d27228e3028 d27228e2984 ">
                                          <p>1</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="22%" id="d27228e3041" headers="d27228e2975 ">
                                          <p>2</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e3041 d27228e2978 ">
                                          <p>三十</p>
                                       </td>
                                       <td align="left" valign="top" width="28%" headers="d27228e3041 d27228e2981 ">
                                          <p>130</p>
                                       </td>
                                       <td align="left" valign="top" width="28%" headers="d27228e3041 d27228e2984 ">
                                          <p>0</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="22%" id="d27228e3054" headers="d27228e2975 ">
                                          <p>6</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e3054 d27228e2978 ">
                                          <p>20</p>
                                       </td>
                                       <td align="left" valign="top" width="28%" headers="d27228e3054 d27228e2981 ">
                                          <p>400</p>
                                       </td>
                                       <td align="left" valign="top" width="28%" headers="d27228e3054 d27228e2984 ">
                                          <p>0</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="22%" id="d27228e3067" headers="d27228e2975 ">
                                          <p>3</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e3067 d27228e2978 ">
                                          <p>1</p>
                                       </td>
                                       <td align="left" valign="top" width="28%" headers="d27228e3067 d27228e2981 ">
                                          <p>100</p>
                                       </td>
                                       <td align="left" valign="top" width="28%" headers="d27228e3067 d27228e2984 ">
                                          <p>2</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="22%" id="d27228e3080" headers="d27228e2975 ">
                                          <p>1</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e3080 d27228e2978 ">
                                          <p>7</p>
                                       </td>
                                       <td align="left" valign="top" width="28%" headers="d27228e3080 d27228e2981 ">
                                          <p>120</p>
                                       </td>
                                       <td align="left" valign="top" width="28%" headers="d27228e3080 d27228e2984 ">
                                          <p>3</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="22%" id="d27228e3093" headers="d27228e2975 ">
                                          <p>3</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e3093 d27228e2978 ">
                                          <p>8</p>
                                       </td>
                                       <td align="left" valign="top" width="28%" headers="d27228e3093 d27228e2981 ">
                                          <p>130</p>
                                       </td>
                                       <td align="left" valign="top" width="28%" headers="d27228e3093 d27228e2984 ">
                                          <p>2</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="22%" id="d27228e3106" headers="d27228e2975 ">
                                          <p>4</p>
                                       </td>
                                       <td align="left" valign="top" width="22%" headers="d27228e3106 d27228e2978 ">
                                          <p>3</p>
                                       </td>
                                       <td align="left" valign="top" width="28%" headers="d27228e3106 d27228e2981 ">
                                          <p>200</p>
                                       </td>
                                       <td align="left" valign="top" width="28%" headers="d27228e3106 d27228e2984 ">
                                          <p>1</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <p>在内部，数据库创建一个类似于以下内容的临时表：</p><pre class="oac_no_warn" dir="ltr">CREATE TEMPORTARY TABLE tt_products AS SELECT MAX（类别），MAX（子类别），KEY_VECTOR_CREATE（...）dense_gr_key_prod FROM products WHERE manuf ='ACME'GROUP BY类别，子类别</pre><p><a href="optimizing-in-memory-aggregation.html#GUID-E22A075D-D027-4EEE-B670-B2D2DF50ED94__BABCAGGI" title="产品临时表">表9-9</a>显示了此临时表中的行。
                           </p>
                           <div class="tblformal" id="GUID-E22A075D-D027-4EEE-B670-B2D2DF50ED94__BABCAGGI">
                              <p class="titleintable">表9-9 tt_products</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="tt_products" width="100%" border="1" summary="Temporary table for products" frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="33%" id="d27228e3139">类别</th>
                                       <th align="left" valign="bottom" width="33%" id="d27228e3142">子类别</th>
                                       <th align="left" valign="bottom" width="33%" id="d27228e3145">dense_gr_key_prod</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="33%" id="d27228e3150" headers="d27228e3139 ">
                                          <p>运动</p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d27228e3150 d27228e3142 ">
                                          <p>自行车</p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d27228e3150 d27228e3145 ">
                                          <p>1</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="33%" id="d27228e3160" headers="d27228e3139 ">
                                          <p>运动</p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d27228e3160 d27228e3142 ">
                                          <p>球</p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d27228e3160 d27228e3145 ">
                                          <p>2</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="33%" id="d27228e3170" headers="d27228e3139 ">
                                          <p>电动</p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d27228e3170 d27228e3142 ">
                                          <p>灯泡</p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d27228e3170 d27228e3145 ">
                                          <p>3</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="33%" id="d27228e3180" headers="d27228e3139 ">
                                          <p>电动</p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d27228e3180 d27228e3142 ">
                                          <p>开关</p>
                                       </td>
                                       <td align="left" valign="top" width="33%" headers="d27228e3180 d27228e3145 ">
                                          <p>4</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="optimizing-in-memory-aggregation.html#GUID-C425C017-8505-4924-A7AE-308C9BAF2454" title="本节给出了VECTOR GROUP BY聚合如何工作的概念性示例。">IM聚合：方案</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="props_rev_3"><a id="GUID-1FC11741-E3D2-458F-9442-96E9247954CC" name="GUID-1FC11741-E3D2-458F-9442-96E9247954CC"></a><h6 id="INMEM-GUID-1FC11741-E3D2-458F-9442-96E9247954CC" class="sect6"><span class="enumeration_section">9.1.3.4.4</span>第3步：密钥向量查询转换</h6>
                        <div>
                           <p>在此阶段，数据库处理事实表。</p>
                           <p>优化器将原始查询转换为以下等效查询，该查询访问键向量：</p><pre class="pre codeblock"><code>SELECT KEY_VECTOR_PROD（prod_id），KEY_VECTOR_GEOG（geog_id），SUM（金额）FROM sales_online WHERE KEY_VECTOR_PROD_FILTER（prod_id）IS NOT NULL AND KEY_VECTOR_GEOG_FILTER（geog_id）IS NOT NULL GROUP BY KEY_VECTOR_PROD（prod_id），KEY_VECTOR_GEOG（geog_id）</code></pre><p>前面的转换不是内部SQL的精确再现，它更复杂，但是用于说明基本概念的概念表示。</p>
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="optimizing-in-memory-aggregation.html#GUID-C425C017-8505-4924-A7AE-308C9BAF2454" title="本节给出了VECTOR GROUP BY聚合如何工作的概念性示例。">IM聚合：方案</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="props_rev_3"><a id="GUID-F41F2AD3-3AA9-4702-8E90-3EAB8E3453E5" name="GUID-F41F2AD3-3AA9-4702-8E90-3EAB8E3453E5"></a><h6 id="INMEM-GUID-F41F2AD3-3AA9-4702-8E90-3EAB8E3453E5" class="sect6"><span class="enumeration_section">9.1.3.4.5</span>第4步：事实表中的行过滤</h6>
                        <div>
                           <p>此阶段获取每个分组键组合的销售金额。</p>
                           <p>数据库使用键向量从事实表中过滤掉不需要的行。在<a href="optimizing-in-memory-aggregation.html#GUID-F41F2AD3-3AA9-4702-8E90-3EAB8E3453E5__BABBFFGG" title="sales_online的密集分组键">表9-10中</a> ，前三列表示<code class="codeph">sales_online</code>表。最后两列为<code class="codeph">geography</code>和<code class="codeph">products</code>表提供了密集的分组键。
                           </p>
                           <div class="tblformal" id="GUID-F41F2AD3-3AA9-4702-8E90-3EAB8E3453E5__BABBFFGG">
                              <p class="titleintable">表9-10 sales_online表的密集分组键</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="sales_online表的密集分组键" width="100%" border="1" summary="Dense grouping keys for sales_online" frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="16%" id="d27228e3435">PROD_ID</th>
                                       <th align="left" valign="bottom" width="16%" id="d27228e3438">geog_id</th>
                                       <th align="left" valign="bottom" width="16%" id="d27228e3441">量</th>
                                       <th align="left" valign="bottom" width="26%" id="d27228e3444">dense_gr_key_prod</th>
                                       <th align="left" valign="bottom" width="26%" id="d27228e3447">dense_gr_key_geog</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="16%" id="d27228e3452" headers="d27228e3435 ">
                                          <p>7</p>
                                       </td>
                                       <td align="left" valign="top" width="16%" headers="d27228e3452 d27228e3438 ">
                                          <p>1</p>
                                       </td>
                                       <td align="left" valign="top" width="16%" headers="d27228e3452 d27228e3441 ">
                                          <p>100</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e3452 d27228e3444 ">
                                          <p>4</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e3452 d27228e3447 ">
                                          <p></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="16%" id="d27228e3467" headers="d27228e3435 ">
                                          <p>9</p>
                                       </td>
                                       <td align="left" valign="top" width="16%" headers="d27228e3467 d27228e3438 ">
                                          <p>1</p>
                                       </td>
                                       <td align="left" valign="top" width="16%" headers="d27228e3467 d27228e3441 ">
                                          <p>150</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e3467 d27228e3444 ">
                                          <p></p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e3467 d27228e3447 ">
                                          <p></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="16%" id="d27228e3481" headers="d27228e3435 ">
                                          <p>8</p>
                                       </td>
                                       <td align="left" valign="top" width="16%" headers="d27228e3481 d27228e3438 ">
                                          <p>2</p>
                                       </td>
                                       <td align="left" valign="top" width="16%" headers="d27228e3481 d27228e3441 ">
                                          <p>100</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e3481 d27228e3444 ">
                                          <p>4</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e3481 d27228e3447 ">
                                          <p>1</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="16%" id="d27228e3497" headers="d27228e3435 ">
                                          <p>4</p>
                                       </td>
                                       <td align="left" valign="top" width="16%" headers="d27228e3497 d27228e3438 ">
                                          <p>3</p>
                                       </td>
                                       <td align="left" valign="top" width="16%" headers="d27228e3497 d27228e3441 ">
                                          <p>110</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e3497 d27228e3444 ">
                                          <p>1</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e3497 d27228e3447 ">
                                          <p>1</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="16%" id="d27228e3513" headers="d27228e3435 ">
                                          <p>2</p>
                                       </td>
                                       <td align="left" valign="top" width="16%" headers="d27228e3513 d27228e3438 ">
                                          <p>三十</p>
                                       </td>
                                       <td align="left" valign="top" width="16%" headers="d27228e3513 d27228e3441 ">
                                          <p>130</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e3513 d27228e3444 ">
                                          <p></p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e3513 d27228e3447 ">
                                          <p></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="16%" id="d27228e3527" headers="d27228e3435 ">
                                          <p>6</p>
                                       </td>
                                       <td align="left" valign="top" width="16%" headers="d27228e3527 d27228e3438 ">
                                          <p>20</p>
                                       </td>
                                       <td align="left" valign="top" width="16%" headers="d27228e3527 d27228e3441 ">
                                          <p>400</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e3527 d27228e3444 ">
                                          <p></p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e3527 d27228e3447 ">
                                          <p></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="16%" id="d27228e3541" headers="d27228e3435 ">
                                          <p>3</p>
                                       </td>
                                       <td align="left" valign="top" width="16%" headers="d27228e3541 d27228e3438 ">
                                          <p>1</p>
                                       </td>
                                       <td align="left" valign="top" width="16%" headers="d27228e3541 d27228e3441 ">
                                          <p>100</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e3541 d27228e3444 ">
                                          <p>2</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e3541 d27228e3447 ">
                                          <p></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="16%" id="d27228e3556" headers="d27228e3435 ">
                                          <p>1</p>
                                       </td>
                                       <td align="left" valign="top" width="16%" headers="d27228e3556 d27228e3438 ">
                                          <p>7</p>
                                       </td>
                                       <td align="left" valign="top" width="16%" headers="d27228e3556 d27228e3441 ">
                                          <p>120</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e3556 d27228e3444 ">
                                          <p>3</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e3556 d27228e3447 ">
                                          <p>2</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="16%" id="d27228e3572" headers="d27228e3435 ">
                                          <p>3</p>
                                       </td>
                                       <td align="left" valign="top" width="16%" headers="d27228e3572 d27228e3438 ">
                                          <p>8</p>
                                       </td>
                                       <td align="left" valign="top" width="16%" headers="d27228e3572 d27228e3441 ">
                                          <p>130</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e3572 d27228e3444 ">
                                          <p>2</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e3572 d27228e3447 ">
                                          <p>2</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="16%" id="d27228e3588" headers="d27228e3435 ">
                                          <p>4</p>
                                       </td>
                                       <td align="left" valign="top" width="16%" headers="d27228e3588 d27228e3438 ">
                                          <p>3</p>
                                       </td>
                                       <td align="left" valign="top" width="16%" headers="d27228e3588 d27228e3441 ">
                                          <p>200</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e3588 d27228e3444 ">
                                          <p>1</p>
                                       </td>
                                       <td align="left" valign="top" width="26%" headers="d27228e3588 d27228e3447 ">
                                          <p>1</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <p>如<a href="optimizing-in-memory-aggregation.html#GUID-F41F2AD3-3AA9-4702-8E90-3EAB8E3453E5__BABEHIAG" title="sales_online表中的过滤行">表9-11</a>所示，数据库仅检索<code class="codeph">sales_online</code>具有非空值的两个密集分组键的行，指示满足所有过滤条件的行。
                           </p>
                           <div class="tblformal" id="GUID-F41F2AD3-3AA9-4702-8E90-3EAB8E3453E5__BABEHIAG">
                              <p class="titleintable">表9-11 sales_online表中的过滤行</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="sales_online表中的过滤行" width="100%" border="1" summary="Filtered rows from sales_online table" frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="17%" id="d27228e3626">geog_id</th>
                                       <th align="left" valign="bottom" width="15%" id="d27228e3629">PROD_ID</th>
                                       <th align="left" valign="bottom" width="16%" id="d27228e3632">量</th>
                                       <th align="left" valign="bottom" width="27%" id="d27228e3635">dense_gr_key_prod</th>
                                       <th align="left" valign="bottom" width="25%" id="d27228e3638">dense_gr_key_geog</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="17%" id="d27228e3643" headers="d27228e3626 ">
                                          <p>2</p>
                                       </td>
                                       <td align="left" valign="top" width="15%" headers="d27228e3643 d27228e3629 ">
                                          <p>8</p>
                                       </td>
                                       <td align="left" valign="top" width="16%" headers="d27228e3643 d27228e3632 ">
                                          <p>100</p>
                                       </td>
                                       <td align="left" valign="top" width="27%" headers="d27228e3643 d27228e3635 ">
                                          <p>4</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d27228e3643 d27228e3638 ">
                                          <p>1</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="17%" id="d27228e3659" headers="d27228e3626 ">
                                          <p>3</p>
                                       </td>
                                       <td align="left" valign="top" width="15%" headers="d27228e3659 d27228e3629 ">
                                          <p>4</p>
                                       </td>
                                       <td align="left" valign="top" width="16%" headers="d27228e3659 d27228e3632 ">
                                          <p>110</p>
                                       </td>
                                       <td align="left" valign="top" width="27%" headers="d27228e3659 d27228e3635 ">
                                          <p>1</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d27228e3659 d27228e3638 ">
                                          <p>1</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="17%" id="d27228e3675" headers="d27228e3626 ">
                                          <p>3</p>
                                       </td>
                                       <td align="left" valign="top" width="15%" headers="d27228e3675 d27228e3629 ">
                                          <p>4</p>
                                       </td>
                                       <td align="left" valign="top" width="16%" headers="d27228e3675 d27228e3632 ">
                                          <p>200</p>
                                       </td>
                                       <td align="left" valign="top" width="27%" headers="d27228e3675 d27228e3635 ">
                                          <p>1</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d27228e3675 d27228e3638 ">
                                          <p>1</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="17%" id="d27228e3691" headers="d27228e3626 ">
                                          <p>7</p>
                                       </td>
                                       <td align="left" valign="top" width="15%" headers="d27228e3691 d27228e3629 ">
                                          <p>1</p>
                                       </td>
                                       <td align="left" valign="top" width="16%" headers="d27228e3691 d27228e3632 ">
                                          <p>120</p>
                                       </td>
                                       <td align="left" valign="top" width="27%" headers="d27228e3691 d27228e3635 ">
                                          <p>3</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d27228e3691 d27228e3638 ">
                                          <p>2</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="17%" id="d27228e3707" headers="d27228e3626 ">
                                          <p>8</p>
                                       </td>
                                       <td align="left" valign="top" width="15%" headers="d27228e3707 d27228e3629 ">
                                          <p>3</p>
                                       </td>
                                       <td align="left" valign="top" width="16%" headers="d27228e3707 d27228e3632 ">
                                          <p>130</p>
                                       </td>
                                       <td align="left" valign="top" width="27%" headers="d27228e3707 d27228e3635 ">
                                          <p>2</p>
                                       </td>
                                       <td align="left" valign="top" width="25%" headers="d27228e3707 d27228e3638 ">
                                          <p>2</p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="optimizing-in-memory-aggregation.html#GUID-C425C017-8505-4924-A7AE-308C9BAF2454" title="本节给出了VECTOR GROUP BY聚合如何工作的概念性示例。">IM聚合：方案</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="props_rev_3"><a id="GUID-6A98F912-9D04-4570-99D9-A3D50E171186" name="GUID-6A98F912-9D04-4570-99D9-A3D50E171186"></a><h6 id="INMEM-GUID-6A98F912-9D04-4570-99D9-A3D50E171186" class="sect6"><span class="enumeration_section">9.1.3.4.6</span>步骤5：使用阵列进行聚合</h6>
                        <div>
                           <p>数据库使用多维数组来执行聚合。</p>
                           <p>在<a href="optimizing-in-memory-aggregation.html#GUID-6A98F912-9D04-4570-99D9-A3D50E171186__BABHIGIA" title="显示聚合数组。第一列标题是“dgkp / dgkg”。第二列标题为“1”，第二列标题为“2”。">表9-12中</a> ， <code class="codeph">geography</code>分组键是水平的， <code class="codeph">products</code>分组键是垂直的。数据库在每个密集分组组合键的交集中添加值。例如，对于<code class="codeph">geography</code>分组密钥<code class="codeph">1</code>和<code class="codeph">products</code>分组密钥<code class="codeph">1</code>的交集， <code class="codeph">110</code>和<code class="codeph">200</code>的总和是<code class="codeph">310</code> 。
                           </p>
                           <div class="tblformal" id="GUID-6A98F912-9D04-4570-99D9-A3D50E171186__BABHIGIA">
                              <p class="titleintable">表9-12聚合数组</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="聚合数组" width="100%" border="1" summary="Shows an aggregation array. The first column heading is “dgkp/dgkg.” The second column heading is “1,” and the second column heading is “2.”" frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="24%" id="d27228e3873">dgkp / dgkg</th>
                                       <th align="left" valign="bottom" width="38%" id="d27228e3876">1</th>
                                       <th align="left" valign="bottom" width="38%" id="d27228e3879">2</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="24%" id="d27228e3884" headers="d27228e3873 ">
                                          <p><span class="bold">1</span></p>
                                       </td>
                                       <td align="left" valign="top" width="38%" headers="d27228e3884 d27228e3876 ">
                                          <p><code class="codeph">110 200</code></p>
                                       </td>
                                       <td align="left" valign="top" width="38%" headers="d27228e3884 d27228e3879 ">
                                          <p> </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="24%" id="d27228e3896" headers="d27228e3873 ">
                                          <p><span class="bold">2</span></p>
                                       </td>
                                       <td align="left" valign="top" width="38%" headers="d27228e3896 d27228e3876 ">
                                          <p> </p>
                                       </td>
                                       <td align="left" valign="top" width="38%" headers="d27228e3896 d27228e3879 ">
                                          <p><code class="codeph">130</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="24%" id="d27228e3908" headers="d27228e3873 ">
                                          <p><span class="bold">3</span></p>
                                       </td>
                                       <td align="left" valign="top" width="38%" headers="d27228e3908 d27228e3876 ">
                                          <p> </p>
                                       </td>
                                       <td align="left" valign="top" width="38%" headers="d27228e3908 d27228e3879 ">
                                          <p><code class="codeph">120</code></p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="24%" id="d27228e3920" headers="d27228e3873 ">
                                          <p><span class="bold">4</span></p>
                                       </td>
                                       <td align="left" valign="top" width="38%" headers="d27228e3920 d27228e3876 ">
                                          <p><code class="codeph">100</code></p>
                                       </td>
                                       <td align="left" valign="top" width="38%" headers="d27228e3920 d27228e3879 ">
                                          <p></p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="optimizing-in-memory-aggregation.html#GUID-C425C017-8505-4924-A7AE-308C9BAF2454" title="本节给出了VECTOR GROUP BY聚合如何工作的概念性示例。">IM聚合：方案</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="props_rev_3"><a id="GUID-699A1CCA-8324-4049-AFD3-457ADBF1D81A" name="GUID-699A1CCA-8324-4049-AFD3-457ADBF1D81A"></a><h6 id="INMEM-GUID-699A1CCA-8324-4049-AFD3-457ADBF1D81A" class="sect6"><span class="enumeration_section">9.1.3.4.7</span>步骤6：加入临时表</h6>
                        <div>
                           <p>在处理的最后阶段，数据库使用密集分组键将行连接回临时表以获取区域和类别的名称。</p>
                           <p>结果如下：</p><pre class="pre codeblock"><code>类别子国家国家数量-------- ----------- ------- ----- ------电灯泡美国CA 120电动开关美国WA 100运动球美国CA 130运动自行车美国WA 310</code></pre></div>
                        <div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>父主题：</strong> <a href="optimizing-in-memory-aggregation.html#GUID-C425C017-8505-4924-A7AE-308C9BAF2454" title="本节给出了VECTOR GROUP BY聚合如何工作的概念性示例。">IM聚合：方案</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-FA953802-7768-49D5-B70C-C057076F1F4A" name="GUID-FA953802-7768-49D5-B70C-C057076F1F4A"></a><h4 id="INMEM-GUID-FA953802-7768-49D5-B70C-C057076F1F4A" class="sect4"><span class="enumeration_section">9.1.4</span> IM聚合的控制</h4>
                  <div>
                     <p>IM聚合与优化器集成在一起。不需要新的SQL或初始化参数。IM聚合不需要其他索引，外键或维度。</p>
                     <p>您可以使用以下提示对：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>查询块提示</p>
                           <p>无论成本如何， <code class="codeph">VECTOR_TRANSFORM</code>可以在指定的查询块上启用矢量转换。<code class="codeph">NO_VECTOR_TRANSFORM</code>禁止向量转换参与指定的查询块。
                           </p>
                        </li>
                        <li>
                           <p>表提示</p>
                           <p>您可以使用以下提示对：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">VECTOR_TRANSFORM_FACT</code>包含由向量转换生成的事实表中的指定<code class="codeph">FROM</code>表达式。<code class="codeph">NO_VECTOR_TRANSFORM_FACT</code>从向量转换生成的事实表中排除指定的<code class="codeph">FROM</code>表达式。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">VECTOR_TRANSFORM_DIMS</code>包含由向量转换生成的已启用维度中的指定<code class="codeph">FROM</code>表达式。<code class="codeph">NO_VECTOR_TRANSFORM_DIMS</code>从向量转换生成的已启用维度中排除指定的表达式。
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-FA953802-7768-49D5-B70C-C057076F1F4A__GUID-8C17C610-DCF3-4C3F-A54F-0A3842FB08C6">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=SQLRF00219" target="_blank"><span><cite>Oracle数据库SQL语言参考，</cite></span></a>以了解有关<code class="codeph">VECTOR_TRANSFORM_FACT</code>和<code class="codeph">VECTOR_TRANSFORM_DIMS</code>提示的更多信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizing-in-memory-aggregation.html#GUID-2C4FA6C6-3DA8-4CEA-9EF0-294396D15077" title="从Oracle Database 12c第1版（12.1.0.2）开始，内存中聚合（IM聚合）使查询能够在扫描时聚合。">使用内存中聚合优化联接</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-5AB9792F-8030-4D13-BC12-8DB598A15459" name="GUID-5AB9792F-8030-4D13-BC12-8DB598A15459"></a><h4 id="INMEM-GUID-5AB9792F-8030-4D13-BC12-8DB598A15459" class="sect4"><span class="enumeration_section">9.1.5</span>内存中聚合：示例</h4>
                  <div>
                     <p>在此示例中，业务问题是“每个日历年每个类别中销售了多少产品？“</p>
                     <div class="section">
                        <p>您编写以下查询，该查询连接<code class="codeph">times</code> ， <code class="codeph">products</code>和<code class="codeph">sales</code>表：</p><pre class="pre codeblock"><code>SELECT t.calendar_year，p.prod_category，SUM（quantity_sold）FROM times t，products p，sales s WHERE t.time_id = s.time_id AND p.prod_id = s.prod_id GROUP BY t.calendar_year，p.prod_category;</code></pre></div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-5AB9792F-8030-4D13-BC12-8DB598A15459__BABEDJED">
                        <p class="titleinexample">例9-3按执行计划分类的矢量组</p>       
                        <p>以下示例显示了当前游标中包含的执行计划。步骤4和8显示了维度表<code class="codeph">times</code>和<code class="codeph">products</code>的关键向量的创建。步骤17和18显示了先前创建的关键向量的使用。步骤15显示了<code class="codeph">VECTOR GROUP BY</code>操作。
                        </p><pre class="pre codeblock"><code>-------------------------------------------------- --------执行计划---------------------------------------- ------------------计划哈希值：2093829546 --------------------------- -------------------------------------------------- -------------------------------------- | Id |操作|名称|行|字节|成本（％CPU）|时间| Pstart时| Pstop | -------------------------------------------------- -------------------------------------------------- --------------- | 0 | SELECT STATEMENT | | 18 | 1116 | 302（90）| 00：00：01 | | | | 1 | TEMP TABLE TRANSFORMATION | | | | | | | | | 2 | LOAD AS SELECT（CURSOR DURATION MEMORY）| SYS_TEMP_0FD9D6608_F6A13 | | | | | | | | 3 | HASH GROUP BY | | 5 | 80 | 3（67）| 00：00：01 | | | | 4 |关键矢量创建缓冲| ：KV0000 | 5 | 80 | 2（50）| 00:00:01 | | | | 5 |表访问INMEMORY FULL |时代| 1826 | 21912 | 2（50）| 00:00:01 | | | | 6 | LOAD AS SELECT（CURSOR DURATION MEMORY）| SYS_TEMP_0FD9D6607_F6A13 | | | | | | | | 7 | HASH GROUP BY | | 5 | 125 | 2（50）| 00:00:01 | | | | 8 |关键矢量创建缓冲| ：KV0001 | 5 | 125 | 1（0）| 00:00:01 | | | | 9 |表访问INMEMORY FULL |产品| 72 | 1512 | 1（0）| 00:00:01 | | | | 10 | HASH GROUP BY | | 18 | 1116 | 297（91）| 00:00:01 | | | | 11 | HASH JOIN | | 18 | 1116 | 296（91）| 00:00:01 | | | | 12 | HASH JOIN | | 18 | 666 | 294（91）| 00：00：01 | | | | 13 |表访问已满| SYS_TEMP_0FD9D6608_F6A13 | 5 | 80 | 2（0）| 00:00:01 | | | | 14 |查看| VW_VT_0737CF93 | 18 | 378 | 291（92）| 00:00:01 | | | | 15 |矢量组合| | 18 | 414 | 291（92）| 00：00：01 | | | | 16 | HASH GROUP BY | | 18 | 414 | 291（92）| 00：00：01 | | | | 17 |关键矢量使用| ：KV0000 | 918K | 20M | 285（92）| 00:00:01 | | | | 18 |关键矢量使用| ：KV0001 | 918K | 16M | 284（92）| 00:00:01 | | | | 19 |分区范围ITERATOR | | 918K | 13M | 282（92）| 00:00:01 |：KV0000 |：KV0000 | | 20 |表访问INMEMORY FULL |销售| 918K | 13M | 282（92）| 00:00:01 |：KV0000 |：KV0000 | | 21 |表访问已满| SYS_TEMP_0FD9D6607_F6A13 | 5 | 125 | 2（0）| 00:00:01 | | | -------------------------------------------------- -------------------------------------------------- ---------------谓词信息（由操作ID标识）：-------------------------- ------------------------- 11  -  access（“ITEM_9”= INTERNAL_FUNCTION（“C0”））12  -  access（“ITEM_8”= INTERNAL_FUNCTION（ “C0”））20  - 内存（SYS_OP_KEY_VECTOR_FILTER（“S”。“PROD_ID”，：KV0001）和SYS_OP_KEY_VECTOR_FILTER（“S”。“TIME_ID”，：KV0000））过滤器（SYS_OP_KEY_VECTOR_FILTER（“S”。“PROD_ID”，： KV0001）AND SYS_OP_KEY_VECTOR_FILTER（“S”。“TIME_ID”，：KV0000））注意-----  - 用于此语句的向量转换统计------------------- --------------------------------------- 26个递归调用13个db块得到124个一致得到67个物理读取2200重做大小1454字节通过SQL * Net发送到客户端634字节通过SQL * Net从客户端3接收SQL * Net往返客户端2排序（内存）0排序（磁盘）20行处理</code></pre>     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizing-in-memory-aggregation.html#GUID-2C4FA6C6-3DA8-4CEA-9EF0-294396D15077" title="从Oracle Database 12c第1版（12.1.0.2）开始，内存中聚合（IM聚合）使查询能够在扫描时聚合。">使用内存中聚合优化联接</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-4321558D-853B-41A0-9098-4A45204F21BD" name="GUID-4321558D-853B-41A0-9098-4A45204F21BD"></a><h3 id="INMEM-GUID-4321558D-853B-41A0-9098-4A45204F21BD" class="sect3"><span class="enumeration_section">9.2</span>优化内存中算术</h3>
               <div>
                  <p><span>内存优化算法</span>使用优化的<code class="codeph">NUMBER</code>格式，使用SIMD硬件进行快速计算。
                  </p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="optimizing-in-memory-aggregation.html#GUID-1B4840FF-8917-4616-9768-82D39BB9D10F">关于内存中优化算法</a><br>内存中优化的<code class="codeph">NUMBER</code>格式可以使用SIMD硬件进行快速计算。
                     </li>
                     <li class="ulchildlink"><a href="optimizing-in-memory-aggregation.html#GUID-892AB0EB-2960-4D51-A2C1-9D9F291BAEFD">启用和禁用内存中优化算法</a><br>通过将初始化参数<code class="codeph">INMEMORY_OPTIMIZED_ARITHMETIC</code>设置为<code class="codeph">DISABLE</code> （默认值）或<code class="codeph">ENABLE</code>来控制该功能。</li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="optimizing-in-memory-aggregation.html#GUID-A9E6044E-DC81-44C7-8D0C-E77502722388" title="Database In-Memory提供优化以加速聚合和算术。">优化聚合</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-1B4840FF-8917-4616-9768-82D39BB9D10F" name="GUID-1B4840FF-8917-4616-9768-82D39BB9D10F"></a><h4 id="INMEM-GUID-1B4840FF-8917-4616-9768-82D39BB9D10F" class="sect4"><span class="enumeration_section">9.2.1</span>关于<span>内存中优化算法</span></h4>
                  <div>
                     <p>内存中优化的<code class="codeph">NUMBER</code>格式可以使用SIMD硬件进行快速计算。
                     </p>
                     <p><span id="GUID-1B4840FF-8917-4616-9768-82D39BB9D10F__d5e1600">对于使用<code class="codeph">QUERY LOW</code>压缩的表格， <code class="codeph">NUMBER</code>列使用优化格式进行编码，以便在硬件中进行本机计算。</span> <span id="GUID-1B4840FF-8917-4616-9768-82D39BB9D10F__d5e1609">SIMD矢量处理使简单聚合， <code class="codeph">GROUP BY</code>聚合和算术运算能够显着受益。性能改进取决于聚合在算术计算上花费的时间量。一些聚合可能会受益高达9倍。</span></p>
                     <p>并非查询处理引擎中的所有行源都支持内存中优化的数字格式。因此，IM列存储必须存储传统的Oracle Database <code class="codeph">NUMBER</code>数据类型和In-Memory优化的数字类型。这种双存储增加了空间开销，有时高达15％。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-1B4840FF-8917-4616-9768-82D39BB9D10F__GUID-030B9E2F-6B03-41EA-B921-D06537C82147">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="enabling-the-im-column-store.html#GUID-C8BE1A75-CD24-4573-9747-C25D88E3106F" title="根据您的要求估计IM列存储的大小，然后调整IM列存储的大小以满足这些要求。应用压缩可以减少内存大小。">估计IM列存储的所需大小</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizing-in-memory-aggregation.html#GUID-4321558D-853B-41A0-9098-4A45204F21BD" title="内存优化算法使用优化的NUMBER格式，使用SIMD硬件进行快速计算。">优化内存中算术</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-892AB0EB-2960-4D51-A2C1-9D9F291BAEFD" name="GUID-892AB0EB-2960-4D51-A2C1-9D9F291BAEFD"></a><h4 id="INMEM-GUID-892AB0EB-2960-4D51-A2C1-9D9F291BAEFD" class="sect4"><span class="enumeration_section">9.2.2</span>启用和禁用<span>内存中优化算法</span></h4>
                  <div>
                     <p>通过将初始化参数<code class="codeph">INMEMORY_OPTIMIZED_ARITHMETIC</code>设置为<code class="codeph">DISABLE</code> （默认值）或<code class="codeph">ENABLE</code>来控制该功能。</p>
                     <div class="section">
                        <p>设置为<code class="codeph">ENABLE</code> ，Oracle数据库对使用<code class="codeph">FOR QUERY LOW</code>压缩的表中的<code class="codeph">NUMBER</code>列使用内存优化编码。设置为<code class="codeph">DISABLE</code> ，数据库不使用优化编码。
                        </p>
                        <p>从<code class="codeph">ENABLE</code>切换到<code class="codeph">DISABLE</code>不会立即丢弃现有IMCU的优化数字编码。相反，当IM列存储重新填充IMCU时，新的IMCU不使用优化的编码。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-892AB0EB-2960-4D51-A2C1-9D9F291BAEFD__GUID-CAEDBE0D-C6CE-46EE-B27F-85641F8634BE">启用和禁用<span>内存优化算术</span> ：</p>
                        <ol>
                           <li>
                              <p>在SQL * Plus或SQL Developer中，以具有必要权限的用户身份登录数据库。</p>
                           </li>
                           <li>
                              <p>使用<code class="codeph">ALTER SYSTEM</code>语句指定<code class="codeph">INMEMORY_OPTIMIZED_ARITHMETIC</code> 。
                              </p>
                              <p>以下示例启用<span>内存中优化算法</span> ：</p><pre class="pre codeblock"><code>ALTER SYSTEM SET INMEMORY_OPTIMIZED_ARITHMETIC ='ENABLE'SCOPE = BOTH;</code></pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-892AB0EB-2960-4D51-A2C1-9D9F291BAEFD__GUID-030B9E2F-6B03-41EA-B921-D06537C82147">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../refrn/INMEMORY_OPTIMIZED_ARITHMETIC.html#REFRN-GUID-7321D23C-A75B-4830-9375-99E5B06E06EB" target="_blank"><span><cite>Oracle Database Reference</cite></span></a>了解有关<code class="codeph">INMEMORY_OPTIMIZED_ARITHMETIC</code>初始化参数的更多信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="optimizing-in-memory-aggregation.html#GUID-4321558D-853B-41A0-9098-4A45204F21BD" title="内存优化算法使用优化的NUMBER格式，使用SIMD硬件进行快速计算。">优化内存中算术</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
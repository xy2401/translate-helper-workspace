<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The DBMS_AUTO_REPORT package provides an interface to view SQL Monitoring and Real-time Automatic Database Diagnostic Monitor (ADDM) data that has been captured into Automatic Workload Repository (AWR). It also provides subprograms to control the behavior of how these data are captured to AWR."></meta>
      <meta name="description" content="The DBMS_AUTO_REPORT package provides an interface to view SQL Monitoring and Real-time Automatic Database Diagnostic Monitor (ADDM) data that has been captured into Automatic Workload Repository (AWR). It also provides subprograms to control the behavior of how these data are captured to AWR."></meta>
      <title>DBMS_AUTO_REPORT</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="The DBMS_AUTO_REPORT package provides an interface to view SQL Monitoring and Real-time Automatic Database Diagnostic Monitor (ADDM) data that has been captured into Automatic Workload Repository (AWR). It also provides subprograms to control the behavior of how these data are captured to AWR."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_AUTO_INDEX.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_AUTO_TASK_ADMIN.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_AUTO_INDEX.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_AUTO_TASK_ADMIN.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_AUTO_REPORT</li>
            </ol>
            <a id="GUID-79A5CEF7-BA12-4472-832E-4B8AEE9D6046" name="GUID-79A5CEF7-BA12-4472-832E-4B8AEE9D6046"></a><a id="ARPLS74518"></a><a id="ARPLS74518"></a>
            
            <h2 id="ARPLS-GUID-79A5CEF7-BA12-4472-832E-4B8AEE9D6046" class="sect2"><span class="enumeration_chapter">30</span> DBMS_AUTO_REPORT</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_AUTO_REPORT</code>包提供了一个界面，用于查看已捕获到自动工作负载存储库（AWR）中的SQL监视和实时自动数据库诊断监视器（ADDM）数据。它还提供子程序来控制如何将这些数据捕获到AWR的行为。</p>
               <div class="infoboxnotealso" id="GUID-79A5CEF7-BA12-4472-832E-4B8AEE9D6046__GUID-F70EFA52-3764-4623-B98F-AFF4A1B25656">
                  <p class="notep1">也可以看看：</p>
                  <p>有关报告数据库操作的详细信息，请参阅<a href="../tgsql/monitoring-database-operations.html#TGSQL94607" target="_blank"><span class="italic">“Oracle数据库SQL调优指南</span></a></p>
               </div>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_AUTO_REPORT.html#GUID-52848CE0-EEEF-40A3-803B-C7385AB52675" title="该软件包提供了一个界面，用于查看已捕获到AWR中的SQL监控和实时ADDM数据。它还提供子程序来控制如何将这些数据捕获到AWR的行为。捕获的数据存储在AWR中并通过2个视图公开：DBA_HIST_REPORTS和DBA_HIST_REPORTS_DETAILS。">概观</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_AUTO_REPORT.html#GUID-0A797C8B-2BC7-49F4-B158-A33F3DB83C3B" title="该程序包可供PUBLIC使用，并执行自己的安全检查。">安全模型</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_AUTO_REPORT.html#GUID-58EF9244-9A45-47D0-B8FB-9B6A2DA05294" title="此表描述了DBMS_AUTO_REPORT包子程序的参数。">DBMS_AUTO_REPORT子程序摘要</a></p>
                  </li>
               </ul>
            </div><a id="ARPLS74520"></a><a id="ARPLS74520"></a><div class="props_rev_3"><a id="GUID-52848CE0-EEEF-40A3-803B-C7385AB52675" name="GUID-52848CE0-EEEF-40A3-803B-C7385AB52675"></a><h3 id="ARPLS-GUID-52848CE0-EEEF-40A3-803B-C7385AB52675" class="sect3"><span class="enumeration_section">30.1</span> DBMS_AUTO_REPORT概述</h3>
               <div>
                  <p>该软件包提供了一个界面，用于查看已捕获到AWR中的SQL监控和实时ADDM数据。它还提供子程序来控制如何将这些数据捕获到AWR的行为。捕获的数据存储在AWR中并通过2个视图公开： <code class="codeph">DBA_HIST_REPORTS</code>和<code class="codeph">DBA_HIST_REPORTS_DETAILS</code> 。</p>
               </div>
            </div><a id="ARPLS74521"></a><a id="ARPLS74521"></a><div class="props_rev_3"><a id="GUID-0A797C8B-2BC7-49F4-B158-A33F3DB83C3B" name="GUID-0A797C8B-2BC7-49F4-B158-A33F3DB83C3B"></a><h3 id="ARPLS-GUID-0A797C8B-2BC7-49F4-B158-A33F3DB83C3B" class="sect3"><span class="enumeration_section">30.2</span> DBMS_AUTO_REPORT安全模型</h3>
               <div>
                  <p>该程序包可供<code class="codeph">PUBLIC</code>使用，并执行自己的安全检查。
                  </p>
               </div>
            </div><a id="ARPLS74522"></a><a id="ARPLS74523"></a><a id="ARPLS74523"></a><a id="ARPLS74522"></a><div class="props_rev_3"><a id="GUID-58EF9244-9A45-47D0-B8FB-9B6A2DA05294" name="GUID-58EF9244-9A45-47D0-B8FB-9B6A2DA05294"></a><h3 id="ARPLS-GUID-58EF9244-9A45-47D0-B8FB-9B6A2DA05294" class="sect3"><span class="enumeration_section">30.3</span> DBMS_AUTO_REPORT子程序摘要</h3>
               <div>
                  <p>此表描述了<code class="codeph">DBMS_AUTO_REPORT</code>程序的参数。
                  </p>
                  <div class="tblformal" id="GUID-58EF9244-9A45-47D0-B8FB-9B6A2DA05294__GUID-618165C8-FBA1-4093-9DBE-561CAFBE4539">
                     <p class="titleintable">表30-1 DBMS_AUTO_REPORT包子程序</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_AUTO_REPORT包子程序" width="100%" border="1" summary="This table describes the parameters of the DBMS_AUTO_REPORT package subprograms." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="30%" id="d155712e416">子程序</th>
                              <th align="left" valign="bottom" width="70%" id="d155712e419">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d155712e424" headers="d155712e416 ">
                                 <p><a href="DBMS_AUTO_REPORT.html#GUID-1DFE684F-AAB4-4988-80A8-FD38366193E6" title="此过程结束完全捕获使用START_REPORT_CAPTURE过程启动的SQL监视器数据。">FINISH_REPORT_CAPTURE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d155712e424 d155712e419 ">
                                 <p>结束使用<a href="DBMS_AUTO_REPORT.html#GUID-8CB362BB-D486-4854-B4D6-2983834C1E01" title="此过程捕获自上次运行捕获周期以来每分钟新监视的SQL的SQL监视器数据，并将其存储在AWR中。">START_REPORT_CAPTURE过程</a>启动的SQL监视器数据的完整捕获。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d155712e446" headers="d155712e416 ">
                                 <p><a href="DBMS_AUTO_REPORT.html#GUID-FBA3052E-9686-4D26-9892-215FC226A03C" title="此过程以指定的格式（如XML或HTML）获取给定报告ID的存储报告。">REPORT_REPOSITORY_DETAIL函数</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d155712e446 d155712e419 ">
                                 <p>获取给定报告ID的存储报告</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d155712e458" headers="d155712e416 ">
                                 <p><a href="DBMS_AUTO_REPORT.html#GUID-1B36F486-6A50-486C-A08E-80F3BE2B6689" title="此过程获取给定报告ID的存储XML报告。">REPORT_REPOSITORY_DETAIL_XML函数</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d155712e458 d155712e419 ">
                                 <p>获取给定报告ID的存储XML报告</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d155712e470" headers="d155712e416 ">
                                 <p><a href="DBMS_AUTO_REPORT.html#GUID-31B11C96-B995-494D-9621-AE179BFDE532" title="此过程获取AWR中捕获的SQL监视器和实时ADDM数据列表的XML报告。">REPORT_REPOSITORY_LIST_XML函数</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d155712e470 d155712e419 ">
                                 <p>获取AWR中捕获的SQL监视器和实时ADDM数据列表的XML报告</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d155712e482" headers="d155712e416 ">
                                 <p><a href="DBMS_AUTO_REPORT.html#GUID-8CB362BB-D486-4854-B4D6-2983834C1E01" title="此过程捕获自上次运行捕获周期以来每分钟新监视的SQL的SQL监视器数据，并将其存储在AWR中。">START_REPORT_CAPTURE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d155712e482 d155712e419 ">
                                 <p>自上次运行捕获周期以来每分钟捕获任何新监视的SQL的SQL监视器数据，并将其存储在AWR中。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS74524"></a><a id="ARPLS74524"></a><div class="props_rev_3"><a id="GUID-1DFE684F-AAB4-4988-80A8-FD38366193E6" name="GUID-1DFE684F-AAB4-4988-80A8-FD38366193E6"></a><h4 id="ARPLS-GUID-1DFE684F-AAB4-4988-80A8-FD38366193E6" class="sect4"><span class="enumeration_section">30.3.1</span> FINISH_REPORT_CAPTURE程序</h4>
                  <div>
                     <p>此过程结束完全捕获使用<code class="codeph">START_REPORT_CAPTURE</code>过程启动的SQL监视器数据。
                     </p>
                     <div class="section">
                        <p>调用此子程序后，每分钟都会继续捕获数据，除了没有为所有活动的SQL捕获数据，但仅针对那些被认为重要的SQL，即前5个SQL（经过时间，或PQ时的经过时间* DOP）监视已经完成了。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1DFE684F-AAB4-4988-80A8-FD38366193E6__GUID-9E7790CD-A6A6-4F20-B9CC-E4E3B8883A65">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_AUTO_REPORT.FINISH_REPORT_CAPTURE;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="DBMS_AUTO_REPORT.html#GUID-8CB362BB-D486-4854-B4D6-2983834C1E01" title="此过程捕获自上次运行捕获周期以来每分钟新监视的SQL的SQL监视器数据，并将其存储在AWR中。">START_REPORT_CAPTURE程序</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ARPLS74525"></a><a id="ARPLS74526"></a><a id="ARPLS74526"></a><a id="ARPLS74525"></a><div class="props_rev_3"><a id="GUID-FBA3052E-9686-4D26-9892-215FC226A03C" name="GUID-FBA3052E-9686-4D26-9892-215FC226A03C"></a><h4 id="ARPLS-GUID-FBA3052E-9686-4D26-9892-215FC226A03C" class="sect4"><span class="enumeration_section">30.3.2</span> REPORT_REPOSITORY_DETAIL函数</h4>
                  <div>
                     <p>此过程以指定的格式（如XML或HTML）获取给定报告ID的存储报告。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-FBA3052E-9686-4D26-9892-215FC226A03C__GUID-50DAF963-FAEF-42CA-9940-2BE7307AC597">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_AUTO_REPORT.REPORT_REPOSITORY_DETAIL（摆脱IN NUMBER DEFAULT NULL，输入IN VARCHAR2 DEFAULT'XML'，base_path IN VARCHAR2 DEFAULT NULL）RETURNS CLOB</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FBA3052E-9686-4D26-9892-215FC226A03C__GUID-853A8C20-A8CE-4C0D-9FE3-C2B50F1312F0">参数</p>
                        <div class="tblformal" id="GUID-FBA3052E-9686-4D26-9892-215FC226A03C__GUID-4C5E8373-2839-47A8-8B79-F5CE9292B431">
                           <p class="titleintable">表30-2 REPORT_REPOSITORY_DETAIL函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REPORT_REPOSITORY_DETAIL函数参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_AUTO_REPORT.REPORT_REPOSITORY_DETAIL subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="30%" id="d155712e713">参数</th>
                                    <th align="left" valign="bottom" width="70%" id="d155712e716">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d155712e721" headers="d155712e713 ">
                                       <p><code class="codeph">摆脱</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d155712e721 d155712e716 ">
                                       <p>函数返回的存储报告的ID</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d155712e729" headers="d155712e713 ">
                                       <p><code class="codeph">类型</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d155712e729 d155712e716 ">
                                       <p>所需的报告格式。值可以是<code class="codeph">'XML'</code> ， <code class="codeph">'TEXT'</code> ，“ <code class="codeph">HTML'</code> ， <code class="codeph">'EM'</code>或<code class="codeph">'ACTIVE'</code> 。最后两个选项以相同的格式生成一个称为活动HTML的报告。默认值为<code class="codeph">'XML'</code> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d155712e756" headers="d155712e713 ">
                                       <p><code class="codeph">BASE_PATH</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d155712e756 d155712e716 ">
                                       <p>未使用/非手术</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FBA3052E-9686-4D26-9892-215FC226A03C__GUID-F28A8367-C9CA-4A6F-B646-AEDEB087FC0E">返回值</p>
                        <p>给定记录ID的持久报告</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74527"></a><a id="ARPLS74528"></a><a id="ARPLS74528"></a><a id="ARPLS74527"></a><div class="props_rev_3"><a id="GUID-1B36F486-6A50-486C-A08E-80F3BE2B6689" name="GUID-1B36F486-6A50-486C-A08E-80F3BE2B6689"></a><h4 id="ARPLS-GUID-1B36F486-6A50-486C-A08E-80F3BE2B6689" class="sect4"><span class="enumeration_section">30.3.3</span> REPORT_REPOSITORY_DETAIL_XML函数</h4>
                  <div>
                     <p>此过程获取给定报告ID的存储XML报告。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-1B36F486-6A50-486C-A08E-80F3BE2B6689__GUID-3250ED4E-D474-49B2-9D71-109C8AEC440A">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_AUTO_REPORT.REPORT_REPOSITORY_DETAIL_XML（摆脱IN NUMBER DEFAULT NULL，base_path IN VARCHAR2 DEFAULT NULL）返回XMLTYPE</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1B36F486-6A50-486C-A08E-80F3BE2B6689__GUID-ABBD63FA-3208-4A61-8690-FDAAAAC8052B">参数</p>
                        <div class="tblformal" id="GUID-1B36F486-6A50-486C-A08E-80F3BE2B6689__GUID-869C63D7-A826-46CA-BA6B-30F7079A8D6D">
                           <p class="titleintable">表30-3 <span class="italic"><span class="bold">REPORT_REPOSITORY_DETAIL_XML函数参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REPORT_REPOSITORY_DETAIL_XML函数参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_AUTO_REPORT.REPORT_REPOSITORY_DETAIL_XML subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="30%" id="d155712e880">参数</th>
                                    <th align="left" valign="bottom" width="70%" id="d155712e883">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d155712e888" headers="d155712e880 ">
                                       <p><code class="codeph">摆脱</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d155712e888 d155712e883 ">
                                       <p>函数返回的存储报告的ID</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d155712e896" headers="d155712e880 ">
                                       <p><code class="codeph">BASE_PATH</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d155712e896 d155712e883 ">
                                       <p>未使用/非手术</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-1B36F486-6A50-486C-A08E-80F3BE2B6689__GUID-964F5529-497F-49A0-9D2A-6C9AA8CF2D47">返回值</p>
                        <p>给定记录ID的持久XML报告</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74529"></a><a id="ARPLS74530"></a><a id="ARPLS74530"></a><a id="ARPLS74529"></a><div class="props_rev_3"><a id="GUID-31B11C96-B995-494D-9621-AE179BFDE532" name="GUID-31B11C96-B995-494D-9621-AE179BFDE532"></a><h4 id="ARPLS-GUID-31B11C96-B995-494D-9621-AE179BFDE532" class="sect4"><span class="enumeration_section">30.3.4</span> REPORT_REPOSITORY_LIST_XML函数</h4>
                  <div>
                     <p>此过程获取AWR中捕获的SQL监视器和实时ADDM数据列表的XML报告。</p>
                     <div class="section">
                        <p>输入参数可用于选择和限制哪些捕获的数据将包含在列表报告中。所有参数都是可选的。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-31B11C96-B995-494D-9621-AE179BFDE532__GUID-1C942E48-AFE3-46D7-8A0D-9FF403B05253">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_AUTO_REPORT.REPORT_REPOSITORY_LIST_XML（active_since IN DATE DEFAULT NULL，active_upto IN DATE DEFAULT NULL，snapshot_id IN NUMBER DEFAULT NULL，dbid IN NUMBER DEFAULT NULL，inst_id IN NUMBER DEFAULT NULL，con_dbid IN NUMBER DEFAULT NULL，session_id IN NUMBER DEFAULT NULL，session_serial IN NUMBER DEFAULT NULL，component_name IN VARCHAR2 DEFAULT NULL，key1 IN VARCHAR2 DEFAULT NULL，key2 IN VARCHAR2 DEFAULT NULL，key3 IN VARCHAR2 DEFAULT NULL，report_level IN VARCHAR2 DEFAULT'TYPICAL'，base_path IN VARCHAR2 DEFAULT NULL）RETURNS XMLTYPE</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-31B11C96-B995-494D-9621-AE179BFDE532__GUID-CEE05CB7-C80A-4058-8756-ED67C998C006">参数</p>
                        <div class="tblformal" id="GUID-31B11C96-B995-494D-9621-AE179BFDE532__GUID-A418F707-C09C-4726-8C96-356417797FB5">
                           <p class="titleintable">表30-4 <span class="italic"><span class="bold">REPORT_REPOSITORY_LIST_XML函数参数</span></span></p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REPORT_REPOSITORY_LIST_XML函数参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_AUTO_REPORT.REPORT_REPOSITORY_LIST_XML subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="30%" id="d155712e1023">参数</th>
                                    <th align="left" valign="bottom" width="70%" id="d155712e1026">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d155712e1031" headers="d155712e1023 ">
                                       <p><code class="codeph">active_since</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d155712e1031 d155712e1026 ">
                                       <p>开始用于选择数据的时间范围。指定时间范围时，列表中仅包含那些在该时间范围内处于活动状态的数据。如果未指定任何值，则选择时间范围作为在当前系统时间结束的最后24小时。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d155712e1039" headers="d155712e1023 ">
                                       <p><code class="codeph">active_upto</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d155712e1039 d155712e1026 ">
                                       <p>与<code class="codeph">active_since</code>相同，但它是时间范围的结束</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d155712e1050" headers="d155712e1023 ">
                                       <p><code class="codeph">snapshot_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d155712e1050 d155712e1026 ">
                                       <p>如果指定了值，则只有在指定的快照ID期间捕获的数据才会包含在列表报告中。如果未指定任何值，则不对快照ID执行过滤。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d155712e1058" headers="d155712e1023 ">
                                       <p><code class="codeph">DBID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d155712e1058 d155712e1026 ">
                                       <p>如果指定了值，则只有为指定数据库ID捕获的数据才会包含在列表报告中。如果未指定任何值，则不对数据库ID执行过滤</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d155712e1066" headers="d155712e1023 ">
                                       <p><code class="codeph">INST_ID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d155712e1066 d155712e1026 ">
                                       <p>如果指定了值，则只有在指定实例编号上捕获的数据才会包含在列表报告中。如果未指定任何值，则不对实例ID执行过滤。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d155712e1074" headers="d155712e1023 ">
                                       <p><code class="codeph">con_dbid</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d155712e1074 d155712e1026 ">
                                       <p>如果指定了值，则只有在指定容器DBID上捕获的数据才会包含在列表报告中。如果未指定任何值，则不对容器DBID执行过滤。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d155712e1082" headers="d155712e1023 ">
                                       <p><code class="codeph">SESSION_ID</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d155712e1082 d155712e1026 ">
                                       <p>如果指定了值，则只有为指定会话ID捕获的数据才会包含在列表报告中。如果未指定任何值，则不会对会话ID执行过滤。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d155712e1090" headers="d155712e1023 ">
                                       <p><code class="codeph">session_serial</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d155712e1090 d155712e1026 ">
                                       <p>如果指定了值，则只有为指定会话捕获的数据才会包含在列表报告中。如果未指定任何值，则不会对会话序列号执行过滤。此参数应与<code class="codeph">session_id</code>参数一起使用。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d155712e1101" headers="d155712e1023 ">
                                       <p><code class="codeph">COMPONENT_NAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d155712e1101 d155712e1026 ">
                                       <p>可<code class="codeph">'sqlmonitor'</code>为SQL监视器数据或<code class="codeph">'rtaddm'</code>对于实时ADDM数据。如果指定了值，则仅与指定组件相关的数据将包含在列表报告中。如果未指定任何值，则不执行过滤。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d155712e1115" headers="d155712e1023 ">
                                       <p><code class="codeph">KEY1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d155712e1115 d155712e1026 ">
                                       <p>与组件相关的键值。对于SQL Monitor， <code class="codeph">key1</code>是捕获的SQL语句的SQL ID。如果指定了值，则仅包括具有<code class="codeph">key1</code>指定值的那些数据，否则不对<code class="codeph">key1</code>执行过滤。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d155712e1132" headers="d155712e1023 ">
                                       <p><code class="codeph">KEY2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d155712e1132 d155712e1026 ">
                                       <p>与组件相关的键值。对于SQL Monitor， <code class="codeph">key2</code>是捕获的SQL语句的SQL执行ID。如果指定了值，则仅包括具有<code class="codeph">key2</code>指定值的那些数据，否则不对<code class="codeph">key2</code>执行过滤。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d155712e1150" headers="d155712e1023 ">
                                       <p><code class="codeph">KEY3</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d155712e1150 d155712e1026 ">
                                       <p>与组件相关的键值。对于SQL Monitor， <code class="codeph">key3</code>是捕获的SQL语句的SQL执行开始时间。如果指定了值，则仅包括具有<code class="codeph">key3</code>指定值的那些数据，否则不对<code class="codeph">key3</code>执行过滤。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d155712e1167" headers="d155712e1023 ">
                                       <p><code class="codeph">report_level</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d155712e1167 d155712e1026 ">
                                       <p>目前仅使用<code class="codeph">'TYPICAL'</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d155712e1178" headers="d155712e1023 ">
                                       <p><code class="codeph">BASE_PATH</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d155712e1178 d155712e1026 ">
                                       <p>未使用/非手术</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS74531"></a><a id="ARPLS74531"></a><div class="props_rev_3"><a id="GUID-8CB362BB-D486-4854-B4D6-2983834C1E01" name="GUID-8CB362BB-D486-4854-B4D6-2983834C1E01"></a><h4 id="ARPLS-GUID-8CB362BB-D486-4854-B4D6-2983834C1E01" class="sect4"><span class="enumeration_section">30.3.5</span> START_REPORT_CAPTURE程序</h4>
                  <div>
                     <p>此过程捕获自上次运行捕获周期以来每分钟新监视的SQL的SQL监视器数据，并将其存储在AWR中。</p>
                     <div class="section">
                        <p>每个捕获周期都会尝试捕获当前未执行或排队的SQL的数据。这是一个完整的捕获，因为捕获了所有新监视的SQL的数据。它继续每分钟运行，直到它使用<a href="DBMS_AUTO_REPORT.html#GUID-1DFE684F-AAB4-4988-80A8-FD38366193E6" title="此过程结束完全捕获使用START_REPORT_CAPTURE过程启动的SQL监视器数据。">FINISH_REPORT_CAPTURE过程</a>明确结束。对于RAC系统，捕获将在群集的每个节点上启动。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8CB362BB-D486-4854-B4D6-2983834C1E01__GUID-DB97A9F4-E2C7-4150-ABB6-2EC2855A1FE5">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_AUTO_REPORT.START_REPORT_CAPTURE;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
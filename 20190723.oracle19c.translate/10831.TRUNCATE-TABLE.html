<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>TRUNCATE TABLE</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Language Reference "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Language Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96310-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="TRUNCATE-CLUSTER.html" title="Previous" type="text/html"></link>
      <link rel="next" href="UPDATE.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference"></meta>
    <meta name="dcterms.isVersionOf" content="SQLRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="TRUNCATE-CLUSTER.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="UPDATE.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL语言参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="SQL-Statements-MERGE-to-UPDATE.html" property="item" typeof="WebPage"><span property="name">SQL语句：MERGE更新</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">TRUNCATE TABLE</li>
            </ol>
            <a id="GUID-B76E5846-75B5-4876-98EC-439E15E4D8A4" name="GUID-B76E5846-75B5-4876-98EC-439E15E4D8A4"></a><a id="SQLRF55432"></a><a id="SQLRF55433"></a><a id="SQLRF55434"></a><a id="SQLRF55435"></a><a id="SQLRF55436"></a><a id="SQLRF55437"></a><a id="SQLRF55438"></a><a id="SQLRF55439"></a><a id="SQLRF55619"></a><a id="SQLRF55620"></a><a id="SQLRF55440"></a><a id="SQLRF55871"></a><a id="SQLRF55441"></a><a id="SQLRF55442"></a><a id="SQLRF01707"></a>
            
            <h2 id="SQLRF-GUID-B76E5846-75B5-4876-98EC-439E15E4D8A4" class="sect2">TRUNCATE TABLE</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-B76E5846-75B5-4876-98EC-439E15E4D8A4__GUID-8B63C050-5B8D-4E08-A15A-695B559176C8">目的</p>
                  <div class="infoboxnote" id="GUID-B76E5846-75B5-4876-98EC-439E15E4D8A4__GUID-E042D4D8-1226-4F1E-9752-5021D9C211B5">
                     <p class="notep1">注意：</p>
                     <p>您不能回滚<code class="codeph">TRUNCATE</code> <code class="codeph">TABLE</code>语句，也不能使用<code class="codeph">FLASHBACK</code> <code class="codeph">TABLE</code>语句来检索已截断的表的内容。
                     </p>
                  </div>
                  <p><a id="d443437e152" class="indexterm-anchor"></a><a id="d443437e158" class="indexterm-anchor"></a><a id="d443437e164" class="indexterm-anchor"></a>使用<code class="codeph">TRUNCATE</code> <code class="codeph">TABLE</code>语句从表中删除所有行。默认情况下，Oracle数据库还执行以下任务：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>除了<code class="codeph">MINEXTENTS</code>存储参数指定的行之外，释放已删除行使用的所有空间</p>
                     </li>
                     <li>
                        <p>将<code class="codeph">NEXT</code>存储参数设置为截断过程从段中删除的最后一个范围的大小</p>
                     </li>
                  </ul>
                  <div class="p">使用<code class="codeph">TRUNCATE</code> <code class="codeph">TABLE</code>语句删除行比删除和重新创建表更有效。删除和重新创建表会使表的相关对象无效，并要求您重复以下操作：<ul style="list-style-type:disc">
                        <li>
                           <p>授予表的对象权限</p>
                        </li>
                        <li>
                           <p>在表上创建索引，完整性约束和触发器</p>
                        </li>
                        <li>
                           <p>指定表的存储参数</p>
                        </li>
                     </ul>截断没有这些影响。
                  </div>
                  <p>使用<code class="codeph">TRUNCATE</code> <code class="codeph">TABLE</code>语句删除行可能比使用<code class="codeph">DELETE</code>语句删除所有行更快，尤其是在表具有大量触发器，索引和其他依赖项的情况下。
                  </p>
                  <div class="infoboxnotealso" id="GUID-B76E5846-75B5-4876-98EC-439E15E4D8A4__GUID-94E16E61-70A2-4B44-9CB9-348E96D4F31A">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="DELETE.html#GUID-156845A5-B626-412B-9F95-8869B988ABD7">DELETE</a>和<a href="DROP-TABLE.html#GUID-39D89EDC-155D-4A24-837E-D45DDA757B45">DROP TABLE，</a>以获取有关从表中删除数据的其他方法的信息</p>
                        </li>
                        <li>
                           <p>有关截断群集的信息，请使用<a href="TRUNCATE-CLUSTER.html#GUID-90C16956-644E-4E28-A53D-BB34ED630561">TRUNCATE CLUSTER</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B76E5846-75B5-4876-98EC-439E15E4D8A4__GUID-E1F670AD-937C-438E-92FC-4D6D3B8B1FC7">先决条件</p>
                  <p>要截断表，该表必须位于您的模式中，或者您必须具有<code class="codeph">DROP</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>系统特权。
                  </p>
                  <p>要指定<code class="codeph">CASCADE</code>子句，所有受影响的子表必须位于架构中，或者您必须具有<code class="codeph">DROP</code> <code class="codeph">ANY</code> <code class="codeph">TABLE</code>系统特权。
                  </p>
                  <p>您可以使用现有的<code class="codeph">TRUNCATE TABLE</code>命令截断私有临时表。截断私有临时表将不会提交和现有事务。这适用于特定于事务的特定于临时表和特定于会话的私有临时表。请注意，截断的私有临时表不会进入<code class="codeph">RECYCLEBIN</code> 。</p>
                  <div class="infoboxnotealso" id="GUID-B76E5846-75B5-4876-98EC-439E15E4D8A4__GUID-0C3B61A5-FB9F-4F8C-BC2A-BADDFE0BE611">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="TRUNCATE-TABLE.html#GUID-B76E5846-75B5-4876-98EC-439E15E4D8A4__CHDDGIHF">截断表的限制</a> ”</span></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B76E5846-75B5-4876-98EC-439E15E4D8A4__GUID-61C655BF-6E89-4DFB-84A6-7CF8B36E94E2">句法</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B76E5846-75B5-4876-98EC-439E15E4D8A4__GUID-7EC4E673-FB83-455C-9FD6-C6C7FF2EAF70"><span class="italic">truncate_table</span> :: =</p>
                  <div class="figure" id="GUID-B76E5846-75B5-4876-98EC-439E15E4D8A4__GUID-CC7D9EAD-352B-43EB-8697-03BB3CA1D5B8"><img src="img/truncate_table.gif" alt="truncate_table.eps的描述如下" title="truncate_table.eps的描述如下" longdesc="img_text/truncate_table.html"><br><a href="img_text/truncate_table.html">truncate_table.eps插图的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B76E5846-75B5-4876-98EC-439E15E4D8A4__GUID-2978424C-0703-428A-84EB-8BFE85467D2C">语义</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B76E5846-75B5-4876-98EC-439E15E4D8A4__GUID-68CD223C-025D-4DDF-B7A8-1C08E98AD813">表条款</p>
                  <p><a id="d443437e292" class="indexterm-anchor"></a>指定要截断的表的架构和名称。此表不能是群集的一部分。如果省略<span class="italic"><code class="codeph">schema</code></span> ，则Oracle数据库假定该表位于您自己的模式中。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您可以截断索引组织表和临时表。截断临时表时，仅删除当前会话期间创建的行。</p>
                     </li>
                     <li>
                        <p>Oracle数据库将<span class="italic"><code class="codeph">table</code></span>的<code class="codeph">NEXT</code>存储参数更改为截断过程中从段中删除的最后一个范围的大小。
                        </p>
                     </li>
                     <li>
                        <p>Oracle数据库还会自动截断并重置<span class="italic"><code class="codeph">table</code></span>以下索引的任何现有<code class="codeph">UNUSABLE</code>指示符：本地索引的范围和散列分区以及本地索引的子分区。
                        </p>
                     </li>
                     <li>
                        <p>如果<span class="italic"><code class="codeph">table</code></span>不为空，则数据库会在表上标记<code class="codeph">UNUSABLE</code>所有非分区索引和全局分区索引的所有分区。但是，当表被截断时，索引也会被截断，并且会为索引段计算新的高水位线。此操作等同于为索引创建新段。因此，在截断操作结束时，索引再次<code class="codeph">USABLE</code> 。</p>
                     </li>
                     <li>
                        <p>对于域索引，此语句调用相应的truncate例程来截断域索引数据。</p>
                        <div class="infoboxnotealso" id="GUID-B76E5846-75B5-4876-98EC-439E15E4D8A4__GUID-0538A40C-8C19-411E-ACE4-8F6FA7E9D729">
                           <p class="notep1">也可以看看：</p>
                           <p>有关域索引的详细信息，请<a href="../addci/using-extensible-indexing.html#ADDCI270" target="_blank"><span class="italic">参见Oracle数据库数据盒开发人员指南</span></a></p>
                        </div>
                     </li>
                     <li>
                        <p>如果常规或索引组织的表包含LOB列，则会截断所有LOB数据和LOB索引段。</p>
                     </li>
                     <li>
                        <p>如果对<span class="italic"><code class="codeph">table</code></span>进行了分区，则会截断每个分区或子分区的所有分区或子分区以及LOB数据和LOB索引段。
                        </p>
                        <div class="infoboxnote" id="GUID-B76E5846-75B5-4876-98EC-439E15E4D8A4__GUID-F794A692-174D-49EC-958E-95829963A106">
                           <p class="notep1">注意：</p>
                           <p>截断表时，Oracle数据库会自动删除表索引中的所有数据以及与表关联的任何物化视图直接路径<code class="codeph">INSERT</code>信息。此信息独立于任何物化视图日志。如果删除此直接路径<code class="codeph">INSERT</code>信息，则物化视图的增量刷新可能会丢失数据。
                           </p>
                        </div>
                     </li>
                     <li>
                        <p>所有游标都无效。</p>
                     </li>
                  </ul>
                  <p id="GUID-B76E5846-75B5-4876-98EC-439E15E4D8A4__CHDDGIHF"><span class="bold">截断表的限制</span></p>
                  <p>本声明受以下限制：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您无法回滚<code class="codeph">TRUNCATE</code> <code class="codeph">TABLE</code>语句。
                        </p>
                     </li>
                     <li>
                        <p>在截断操作之前，您无法闪回表的状态。</p>
                     </li>
                     <li>
                        <p>您不能单独截断作为群集一部分的表。您必须截断群集，删除表中的所有行，或者删除并重新创建表。</p>
                     </li>
                     <li>
                        <p>您不能截断已启用的外键约束的父表。您必须在截断表之前禁用约束。例外情况是，如果完整性约束是自引用的，则可以截断表。</p>
                     </li>
                     <li>
                        <p>如果在<span class="italic"><code class="codeph">table</code></span>上定义了域索引，则索引和任何索引分区都不能标记为<code class="codeph">IN_PROGRESS</code> 。</p>
                     </li>
                     <li>
                        <p>您不能截断引用分区表的父表。您必须先删除引用分区的子表。</p>
                     </li>
                     <li>
                        <p>您不能截断重复的表。</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B76E5846-75B5-4876-98EC-439E15E4D8A4__GUID-A37A8435-7722-4004-9014-3BBAC54CA077">物化视图日志条款</p>
                  <p>使用<code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code> <code class="codeph">LOG</code>子句指定在截断表时是保留还是清除表上定义的<code class="codeph">LOG</code>化视图日志。此子句允许通过导出或导入重新组织物化视图主表，而不会影响在主服务器上定义的主键物化视图的快速刷新能力。为了支持继续快速刷新主键物化视图，物化视图日志必须记录主键信息。
                  </p>
                  <div class="infoboxnote" id="GUID-B76E5846-75B5-4876-98EC-439E15E4D8A4__GUID-B3033613-0216-4632-B352-0CF01E59E6BD">
                     <p class="notep1">注意：</p>
                     <p>支持使用关键字<code class="codeph">SNAPSHOT</code>代替<code class="codeph">MATERIALIZED</code> <code class="codeph">VIEW</code>以实现向后兼容。
                     </p>
                  </div>
                  <p><span class="bold">保留</span></p>
                  <p>如果在截断主表时应保留任何物化视图日志，请指定<code class="codeph">PRESERVE</code> 。这是默认值。
                  </p>
                  <p><span class="bold">清除</span></p>
                  <p>如果在截断主表时应清除任何物化视图日志，请指定<code class="codeph">PURGE</code> 。
                  </p>
                  <div class="infoboxnotealso" id="GUID-B76E5846-75B5-4876-98EC-439E15E4D8A4__GUID-F82B4384-E20A-4FD5-A8FA-DD4DE630CE1A">
                     <p class="notep1">也可以看看：</p>
                     <p>有关物化视图日志和<code class="codeph">TRUNCATE</code>语句的详细信息，请<code class="codeph">TRUNCATE</code> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/sqlrf&amp;id=ADMIN-GUID-022C5C7F-2EC9-44CB-A74B-CC01600BCC17" target="_blank"><span class="italic">“Oracle数据库管理员指南”</span></a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B76E5846-75B5-4876-98EC-439E15E4D8A4__GUID-FF7BE7CE-BF54-4256-AB7B-415E8F8849A7">存储条款</p>
                  <p>使用<code class="codeph">STORAGE</code>子句可以确定截断行释放的空间会发生什么。<code class="codeph">DROP</code> <code class="codeph">STORAGE</code>子句， <code class="codeph">DROP</code> <code class="codeph">ALL</code> <code class="codeph">STORAGE</code>子句和<code class="codeph">REUSE</code> <code class="codeph">STORAGE</code>子句也适用于从关联索引中删除的数据释放的空间。
                  </p>
                  <p><span class="bold">DROP STORAGE</span></p>
                  <p>指定<code class="codeph">DROP</code> <code class="codeph">STORAGE</code>以从表中删除的行中释放所有空间，但表的<code class="codeph">MINEXTENTS</code>参数分配的空间除外。随后，该空间可以由表空间中的其他对象使用。Oracle数据库还将<code class="codeph">NEXT</code>存储参数设置为截断过程中从段中删除的最后一个范围的大小。此设置是默认设置，对于中小型对象非常有用。在这些情况下，本地管理的表空间中的扩展区管理非常快，因此无需预留空间。
                  </p>
                  <p><span class="bold">DROP ALL STORAGE</span></p>
                  <p>指定<code class="codeph">DROP</code> <code class="codeph">ALL</code> <code class="codeph">STORAGE</code>以从表中删除已删除行的所有空间，包括<code class="codeph">MINEXTENTS</code>参数分配的空间。表的所有段以及其依赖对象的所有段都将被释放。
                  </p>
                  <p><span class="bold">DROP ALL STORAGE的限制</span></p>
                  <p>此子句受<span class="q">“ <a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__CJAIJAHI">与延迟段创建的限制</a> ”中</span>所述相同的限制。
                  </p>
                  <p><span class="bold">重新存储</span></p>
                  <p>指定<code class="codeph">REUSE</code> <code class="codeph">STORAGE</code>以保留分配给表的已删除行的空间。创建表时，存储值不会重置为值。此空间随后只能由插入或更新操作产生的表中的新数据使用。该子句将存储参数保留为当前设置。
                  </p>
                  <p>此设置可用作删除非常大的表的所有行的替代方法 - 当行数非常大时，该表需要数千个范围，并且将来要重新插入数据时。</p>
                  <p>该子句对临时表无效。当表被截断时，会话将从临时表中解除绑定，因此会自动删除存储。</p>
                  <p>如果为要截断的对象指定了多个空闲列表，则<code class="codeph">REUSE</code> <code class="codeph">STORAGE</code>子句还会删除任意空闲列表到实例的映射，并将高位标记重置为第一个范围的开头。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-B76E5846-75B5-4876-98EC-439E15E4D8A4__BABICFJG">
                  <p class="subhead1" id="GUID-B76E5846-75B5-4876-98EC-439E15E4D8A4__GUID-A05EE127-17D8-4C60-A773-2BCC28BD9D87">级联</p>
                  <p>如果指定<code class="codeph">CASCADE</code> ，则Oracle数据库将截断所有引用<span class="italic"><code class="codeph">table</code></span>子表，并启用<code class="codeph">ON</code> <code class="codeph">DELETE</code> <code class="codeph">CASCADE</code>引用约束。这是一个递归操作，它将使用指定的选项截断所有子表，granchild表等。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-B76E5846-75B5-4876-98EC-439E15E4D8A4__GUID-A5A15B75-1FBA-4340-A15D-6603ED0935BD">例子</p>
                  <p><span class="bold">截断表：示例</span></p>
                  <p>以下语句从样本表<code class="codeph">hr.employees</code>的假设副本中删除所有行，并将释放的空间返回给包含<code class="codeph">employees</code>的表空间：</p><pre class="oac_no_warn" dir="ltr">TRUNCATE TABLE employees_demo;</pre><p>上述语句还会从<code class="codeph">employees</code>所有索引中删除所有数据，并将释放的空间返回到包含它们的表空间。
                  </p>
                  <p><span class="bold">截断后保留物化视图日志：示例</span></p>
                  <p>以下语句是保留实例化视图日志的<code class="codeph">TRUNCATE</code>语句的示例：</p><pre class="oac_no_warn" dir="ltr">TRUNCATE TABLE sales_demo PRESERVE MATERIALIZED VIEW LOG; TRUNCATE TABLE orders_demo;</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
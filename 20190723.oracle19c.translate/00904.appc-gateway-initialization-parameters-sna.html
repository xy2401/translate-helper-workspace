<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>SNA协议的网关初始化参数</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Installation and Configuration Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Installation and Configuration Guide for Microsoft Windows"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-gateway-appc-installation-and-configuration-guide-microsoft-windows.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-16T19:10:00-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2006, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="F18240-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="appc-gateway-migration.html" title="Previous" type="text/html"></link>
      <link rel="next" href="appc-gateway-initialization-parameters-tcp-ip.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Gateway for APPC Installation and Configuration Guide for Microsoft Windows"></meta>
    <meta name="dcterms.isVersionOf" content="APPCW"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="appc-gateway-migration.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="appc-gateway-initialization-parameters-tcp-ip.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">安装和配置指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">SNA协议的网关初始化参数</li>
            </ol>
            <a id="GUID-84F7EB01-3551-4335-A54A-918F7E637F5D" name="GUID-84F7EB01-3551-4335-A54A-918F7E637F5D"></a><a id="APPCW258"></a>
            
            <h2 id="APPCW-GUID-84F7EB01-3551-4335-A54A-918F7E637F5D" class="sect2"><span class="enumeration_appendix">一个</span>网关初始化参数为SNA协议</h2>
         </header>
         <div class="ind">
            <div>
               <p>本主题描述了网关初始化文件的位置并列出了<a id="d16014e30" class="indexterm-anchor"></a><a id="d16014e36" class="indexterm-anchor"></a> Oracle Database Gateway for APPC支持的网关初始化参数，专门用于SNA协议。<a href="appc-gateway-migration.html#GUID-5B666B0B-A175-4453-9EAF-4EC4C63B22A7">使用SNA协议</a> <a href="appc-gateway-migration.html#GUID-5B666B0B-A175-4453-9EAF-4EC4C63B22A7">将现有网关实例迁移</a> <a href="appc-gateway-migration.html#GUID-5B666B0B-A175-4453-9EAF-4EC4C63B22A7">到新版本时，</a>完整记录了这些参数， <a href="appc-gateway-migration.html#GUID-5B666B0B-A175-4453-9EAF-4EC4C63B22A7">使用SNA协议</a> <a href="appc-gateway-migration.html#GUID-5B666B0B-A175-4453-9EAF-4EC4C63B22A7">将现有网关实例迁移到新版本</a> 。此外，以下主题包含使用SNA的网关的示例listener.ora和tnsnames文件。</p>
               <p>该<a id="d16014e50" class="indexterm-anchor"></a><a id="d16014e54" class="indexterm-anchor"></a><a id="d16014e58" class="indexterm-anchor"></a>网关的参数文件位于<code class="codeph">%ORACLE_HOME%\dg4appc\admin</code>目录中并被调用<a id="d16014e66" class="indexterm-anchor"></a><a id="d16014e68" class="indexterm-anchor"></a><a id="d16014e72" class="indexterm-anchor"></a><a id="d16014e74" class="indexterm-anchor"></a> <code class="codeph">init <span class="codeinlineitalic">sid</span> .ora</code> 。
               </p>
               <div class="infoboxnote" id="GUID-84F7EB01-3551-4335-A54A-918F7E637F5D__GUID-37D268E7-0E79-4775-919D-9CE4D7928D59">
                  <p class="notep1">注意：</p>
                  <p><code class="codeph">init <span class="codeinlineitalic">sid</span> .ora</code>文件包含SNA和TCP / IP参数。您必须使用合适的参数修改这些文件。
                  </p>
               </div>
            </div><a id="APPCW327"></a><a id="APPCW260"></a><div class="props_rev_3"><a id="GUID-FA92B3D4-6DB1-499A-A382-B243EFCFBC98" name="GUID-FA92B3D4-6DB1-499A-A382-B243EFCFBC98"></a><h3 id="APPCW-GUID-FA92B3D4-6DB1-499A-A382-B243EFCFBC98" class="sect3">PGA参数</h3>
               <div>
                  <p>该<a id="d16014e127" class="indexterm-anchor"></a><a id="d16014e133" class="indexterm-anchor"></a> PGA <a id="d16014e138" class="indexterm-anchor"></a>参数控制网关的APPC接口部分。
                  </p>
                  <p>使用<code class="codeph">SET</code>指定PGA参数<a id="d16014e150" class="indexterm-anchor"></a>网关初始化参数。例如：</p><pre class="oac_no_warn" dir="ltr">SET <span class="italic">pga_parm = value</span> 
</pre><p>哪里：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="italic"><code class="codeph">pga_parm</code></span>是<span class="italic"><code class="codeph">pga_parm</code></span>列表中的PGA参数名称之一;和</p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">value</code></span>是一个字符串，其内容依赖于<span class="italic"><code class="codeph">pga_parm</code></span> 
                        </p>
                     </li>
                  </ul>
                  <p><a href="appc-gateway-initialization-parameters-sna.html#GUID-FA92B3D4-6DB1-499A-A382-B243EFCFBC98__G635413" title="该2列表提供了PGA参数及其描述的列表">表A-1</a>提供了PGA参数及其描述的列表。
                  </p>
                  <div class="tblformal" id="GUID-FA92B3D4-6DB1-499A-A382-B243EFCFBC98__G635413">
                     <p class="titleintable">表A-1使用SNA的APPC的Oracle数据库网关的PGA参数</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="使用SNA的APPC的Oracle数据库网关的PGA参数" width="100%" border="1" summary="This 2 column table provides a list of PGA parameters and their descriptions" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="33%" id="d16014e197">参数</th>
                              <th align="left" valign="bottom" width="67%" id="d16014e200">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d16014e205" headers="d16014e197 ">
                                 <p><a id="d16014e207" class="indexterm-anchor"></a> <code class="codeph">LOG_DESTINATION</code> = <span class="italic"><code class="codeph">logpath</code></span> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d16014e205 d16014e200 ">
                                 <p><span class="italic"><code class="codeph">logpath</code></span>指定重新打开<code class="codeph">STDERR</code>的目标。<code class="codeph">LOG_DESTINATION</code>仅指定目录，并将<code class="codeph">STDERR</code>重新打开到<code class="codeph">logpath\</code> <span class="italic"><code class="codeph">sid_pid</code></span> <code class="codeph">.log</code></p>
                                 <p>哪里：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p><span class="italic"><code class="codeph">sid</code></span>是sid的名字</p>
                                    </li>
                                    <li>
                                       <p><span class="italic"><code class="codeph">pid</code></span>是分配给网关的进程ID</p>
                                    </li>
                                 </ul>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d16014e256" headers="d16014e197 ">
                                 <p><a id="d16014e258" class="indexterm-anchor"></a><a id="d16014e262" class="indexterm-anchor"></a><code class="codeph">PGA_CAPABILITY</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d16014e256 d16014e200 ">
                                 <p>PGA交易能力。它控制是否允许通过网关进行更新。以下是有效值：</p>
                                 <p><code class="codeph">READ_ONLY</code>或<code class="codeph">RO</code> ，只读功能。
                                 </p>
                                 <p><code class="codeph">SINGLE_SITE</code>或<code class="codeph">SS</code> ，仅限单站点更新。这表明在分布式环境中，只有网关可以执行更新。Oracle事务中不会发生其他数据库更新。
                                 </p>
                                 <p><a id="d16014e286" class="indexterm-anchor"></a> <code class="codeph">COMMIT_CONFIRM</code>或<code class="codeph">CC</code> ，commit-confirm。这表明在分布式环境中，网关和Oracle事务中的其他参与者都可以执行更新。始终在此模式下提交网关，并且不允许其他提交确认站点参与Oracle事务。<a id="d16014e294" class="indexterm-anchor"></a></p>
                                 <p>默认值为<code class="codeph">SINGLE_SITE</code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d16014e302" headers="d16014e197 ">
                                 <p><a id="d16014e304" class="indexterm-anchor"></a><a id="d16014e308" class="indexterm-anchor"></a><code class="codeph">PGA_CONFIRM</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d16014e302 d16014e200 ">
                                 <p>传入的<code class="codeph">APPC</code> <code class="codeph">CONFIRM</code>请求处理选项。这控制了当从远程事务程序（RTP）接收到<code class="codeph">APPC</code> <code class="codeph">CONFIRM</code>请求时网关执行的操作。仅当对话以<code class="codeph">SYNCLEVEL &gt; 0</code>运行时，此参数才有意义。以下是有效值：</p>
                                 <p><code class="codeph">ACCEPT</code> - 使用<code class="codeph">APPC</code> <code class="codeph">CONFIRMED</code>响应响应传入的<code class="codeph">APPC</code> <code class="codeph">CONFIRM</code>请求。
                                 </p>
                                 <p><code class="codeph">REJECT</code> - 将传入的<code class="codeph">APPC</code> <code class="codeph">CONFIRM</code>请求视为<a id="d16014e358" class="indexterm-anchor"></a>导致会话被解除分配的错误以及要发出的错误消息。
                                 </p>
                                 <p>默认值为<code class="codeph">REJECT</code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d16014e369" headers="d16014e197 ">
                                 <p><a id="d16014e371" class="indexterm-anchor"></a><a id="d16014e375" class="indexterm-anchor"></a><code class="codeph">PGA_LOG_DB</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d16014e369 d16014e200 ">
                                 <p>该<a id="d16014e384" class="indexterm-anchor"></a>网关维护其事务日志的Oracle数据库的Oracle Net服务名称。此参数的长度可以是<code class="codeph">1</code>到<code class="codeph">255</code>字符。仅当<code class="codeph">PGA_CAPABILITY</code>参数设置为<code class="codeph">COMMIT_CONFIRM</code>时才需要此参数。</p>
                                 <p>没有默认值。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d16014e402" headers="d16014e197 ">
                                 <p><a id="d16014e404" class="indexterm-anchor"></a><a id="d16014e408" class="indexterm-anchor"></a><code class="codeph">PGA_LOG_PASS</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d16014e402 d16014e200 ">
                                 <p>甲骨文<a id="d16014e417" class="indexterm-anchor"></a>连接到<code class="codeph">PGA_LOG_DB</code>参数指定的Oracle数据库时网关使用的密码。密码长度可以是<code class="codeph">1</code>到<code class="codeph">30</code>字符。仅当<code class="codeph">PGA_CAPABILITY</code>参数设置为<code class="codeph">COMMIT_CONFIRM</code>时才需要此参数。密码可以加密。有关加密密码的详细信息，请参阅<a href="appc-gateway-security-requirements.html#GUID-5BE1BC54-C7E5-4FA0-B1F3-257C54237E1C">网关初始化文件中的密码</a> 。
                                 </p>
                                 <p>没有默认值。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d16014e445" headers="d16014e197 ">
                                 <p><a id="d16014e447" class="indexterm-anchor"></a><a id="d16014e451" class="indexterm-anchor"></a><code class="codeph">PGA_LOG_USER</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d16014e445 d16014e200 ">
                                 <p>连接到<code class="codeph">PGA_LOG_DB</code>参数指定的Oracle数据库时网关要使用的Oracle用户标识。用户ID的长度可以是<code class="codeph">1</code>到<code class="codeph">30</code>字符。仅当<code class="codeph">PGA_CAPABILITY</code>参数设置为<code class="codeph">COMMIT_CONFIRM</code>时才需要此参数。</p>
                                 <p>没有默认值。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d16014e478" headers="d16014e197 ">
                                 <p><a id="d16014e480" class="indexterm-anchor"></a><a id="d16014e484" class="indexterm-anchor"></a><code class="codeph">PGA_RECOVERY_PASS</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d16014e478 d16014e200 ">
                                 <p>网关在使用<code class="codeph">PGA_RECOVERY_TPNAME</code>参数指定的事务分配APPC对话时使用的密码。密码长度可以是<code class="codeph">1</code>到<code class="codeph">8</code>字符。仅当<code class="codeph">PGA_CAPABILITY</code>参数设置为<code class="codeph">COMMIT_CONFIRM</code>且<code class="codeph">PGA_SECURITY_TYPE</code>参数设置为<code class="codeph">PROGRAM</code>时， <code class="codeph">PGA_CAPABILITY</code>需要此参数。密码可以加密。有关加密密码的详细信息，请参阅<a href="appc-gateway-security-requirements.html#GUID-5BE1BC54-C7E5-4FA0-B1F3-257C54237E1C">网关初始化文件中的密码</a> 。
                                 </p>
                                 <p>没有默认值。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d16014e522" headers="d16014e197 ">
                                 <p><a id="d16014e524" class="indexterm-anchor"></a><a id="d16014e528" class="indexterm-anchor"></a><code class="codeph">PGA_RECOVERY_TPNAME</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d16014e522 d16014e200 ">
                                 <p>该<a id="d16014e537" class="indexterm-anchor"></a>用于提交确认<code class="codeph">FORGET</code>和<code class="codeph">RECOVERY</code>处理的在线事务处理器（OLTP）中安装的事务的TP名称。TP名称长度可以是<code class="codeph">1</code>到<code class="codeph">64</code>字符。对于<a id="d16014e553" class="indexterm-anchor"></a>对于z / OS的CICS Transaction Server，TP名称限制为四个字符。对于<a id="d16014e558" class="indexterm-anchor"></a> IMS / TM，TP名称限制为八个字符。其他OLTP可能对TP名称的长度有其他限制。仅当<code class="codeph">PGA_CAPABILITY</code>参数设置为<code class="codeph">COMMIT_CONFIRM</code>时才需要此参数。</p>
                                 <p>默认值为<code class="codeph">RECO</code> 。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d16014e575" headers="d16014e197 ">
                                 <p><a id="d16014e577" class="indexterm-anchor"></a><a id="d16014e581" class="indexterm-anchor"></a><code class="codeph">PGA_RECOVERY_USER</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d16014e575 d16014e200 ">
                                 <p>网关在使用<code class="codeph">PGA_RECOVERY_TPNAME</code>参数指定的事务分配APPC对话时要使用的用户标识。用户ID的长度可以是<code class="codeph">1</code>到<code class="codeph">8</code>字符。仅当<code class="codeph">PGA_CAPABILITY</code>参数设置为<code class="codeph">COMMIT_CONFIRM</code>且<code class="codeph">PGA_SECURITY_TYPE</code>参数设置为<code class="codeph">PROGRAM</code>或<code class="codeph">SAME</code>时， <code class="codeph">PGA_CAPABILITY</code>需要此参数。</p>
                                 <p>没有默认值。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d16014e618" headers="d16014e197 ">
                                 <p><a id="d16014e620" class="indexterm-anchor"></a><code class="codeph">PGA_SECURITY_TYPE</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d16014e618 d16014e200 ">
                                 <p><a id="d16014e628" class="indexterm-anchor"></a> APPC会话安全选项。这可以控制在对话分配时将哪些安全参数发送到FMH-5中的OLTP。以下是有效值：</p>
                                 <p><code class="codeph">NONE</code> ，不发送安全参数</p>
                                 <p><code class="codeph">SAME</code> ，仅发送用户ID</p>
                                 <p><code class="codeph">PROGRAM</code> ，发送用户ID和密码</p>
                                 <p>默认值为<code class="codeph">NONE</code> 。</p>
                                 <p>有关这些选项的更多信息，请参阅<a href="appc-gateway-security-requirements.html#GUID-87EF21D2-821F-4552-AB91-E0EC5C8A81CB">安全要求</a> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d16014e657" headers="d16014e197 ">
                                 <p><a id="d16014e659" class="indexterm-anchor"></a><a id="d16014e663" class="indexterm-anchor"></a><a id="d16014e667" class="indexterm-anchor"></a><a id="d16014e669" class="indexterm-anchor"></a><code class="codeph">TRACE_LEVEL</code></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d16014e657 d16014e200 ">
                                 <p>PGA跟踪级别。这将控制写入<code class="codeph">STDERR</code>跟踪输出（ <code class="codeph">LOG_DESTINATION</code>参数的目标）。该值必须是<code class="codeph">0</code>到<code class="codeph">255</code>的整数。
                                 </p>
                                 <p>默认值为<code class="codeph">0</code> ，表示没有跟踪。
                                 </p>
                                 <p><code class="codeph">1</code>到<code class="codeph">255</code>之间的任何值都将打开跟踪。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div><a id="APPCW261"></a><div class="props_rev_3"><a id="GUID-AFCB48DA-EF85-42A3-A7C7-62E8DA1CD778" name="GUID-AFCB48DA-EF85-42A3-A7C7-62E8DA1CD778"></a><h3 id="APPCW-GUID-AFCB48DA-EF85-42A3-A7C7-62E8DA1CD778" class="sect3">PGA_CAPABILITY参数注意事项</h3>
               <div>
                  <p><a id="d16014e734" class="indexterm-anchor"></a>选择设置时<a id="d16014e741" class="indexterm-anchor"></a> <code class="codeph">PGA_CAPABILITY</code>参数，请注意确保根据RTP将要执行的操作使用正确的设置。
                  </p>
                  <p>该<a id="d16014e751" class="indexterm-anchor"></a>应该始终使用<code class="codeph">READ_ONLY</code>设置<a id="d16014e758" class="indexterm-anchor"></a> RTP是只读的，也就是说，当RTP不执行数据库更新时。当RTP执行数据库更新时，永远不应该使用<code class="codeph">READ_ONLY</code> 。例如，如果选择了<code class="codeph">READ_ONLY</code>设置，并且如果网关调用的RTP执行对外部数据库的更新，则<a id="d16014e769" class="indexterm-anchor"></a> Oracle数据库<span class="italic">不</span>提供这些更新任何完整性保护。此外， <code class="codeph">READ_ONLY</code>模式允许网关事务成为可能更新多个其他数据库的分布式事务的一部分。如果网关调用在此情况下执行更新的RTP，并且如果发生故障，则RTP更新的数据库与其他数据库不同步。
                  </p>
                  <p><a id="d16014e782" class="indexterm-anchor"></a><a id="d16014e786" class="indexterm-anchor"></a>在RTP对外部数据库执行更新的情况下，有<a id="d16014e791" class="indexterm-anchor"></a><a id="d16014e797" class="indexterm-anchor"></a> <code class="codeph">PGA_CAPABILITY</code>两个选项：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">SINGLE_SITE</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">COMMIT_CONFIRM</code></p>
                     </li>
                  </ul>
                  <p>这些选项中的每一个都允许通过许可来防止数据完整性问题<a id="d16014e818" class="indexterm-anchor"></a> <code class="codeph">COMMIT</code>和<a id="d16014e823" class="indexterm-anchor"></a> <code class="codeph">ROLLBACK</code>请求转发到RTP并通知<a id="d16014e828" class="indexterm-anchor"></a> Oracle数据库，关于网关的分布式更新和恢复功能。选择的特定选项取决于RTP的设计以及RTP的能力<a id="d16014e831" class="indexterm-anchor"></a> OLTP执行的位置。
                  </p>
                  <p>如果OLTP具有LU6.2 <code class="codeph">SYNCLEVEL 1</code>或<code class="codeph">2</code>支持，那么<a id="d16014e842" class="indexterm-anchor"></a> <code class="codeph">COMMIT_CONFIRM</code>功能提供了有限的两阶段提交<a id="d16014e849" class="indexterm-anchor"></a> Oracle数据库和OLTP，没有其他限制<a id="d16014e852" class="indexterm-anchor"></a> commit-confirm站点（网关或Oracle）可以是分布式事务的一部分。如果无法使用<code class="codeph">COMMIT_CONFIRM</code> ，那么<code class="codeph">SINGLE_SITE</code>能力提供了Oracle数据库和更新之间的能力<a id="d16014e862" class="indexterm-anchor"></a> OLTP，限制只有OLTP可以执行更新，并且Oracle端不会发生更新。<a id="d16014e865" class="indexterm-anchor"></a></p>
                  <p>用于更新控制的每个<code class="codeph">PGA_CAPABILITY</code>选项都对RTP和OLTP施加了特定要求。对于<code class="codeph">COMMIT_CONFIRM</code>功能，这些要求将在<a href="../appug/implement-appc-commit-confirm-sna-only.html#APPUG500" target="_blank"><span class="italic">Oracle Database Gateway for APPC用户指南的</span></a>第5章“实现提交确认”中详细讨论。另请参阅本指南中的<a href="configure-appc-gateway-using-sna.html#GUID-4E9B411B-D554-4945-825A-B4316404F7C0">配置OLTP以进行提交确认</a> <a href="configure-appc-gateway-using-sna.html#GUID-4E9B411B-D554-4945-825A-B4316404F7C0">配置OLTP以进行提交确认</a> 。对于<code class="codeph">SINGLE_SITE</code>功能，RTP负责执行适当的任务以响应代表网关从网关收到的<code class="codeph">COMMIT</code>和<code class="codeph">ROLLBACK</code>请求。 <a id="d16014e897" class="indexterm-anchor"></a> Oracle数据库。网关使用<code class="codeph">APPC</code> <code class="codeph">CONFIRM</code>和<code class="codeph">SEND_ERR</code>请求分别实现<code class="codeph">COMMIT</code>和<code class="codeph">ROLLBACK</code> 。收到<code class="codeph">CONFIRM</code>命令后，RTP必须执行<code class="codeph">COMMIT</code>处理，然后使用<code class="codeph">APPC</code> <code class="codeph">CONFIRMED</code>响应响应网关。收到<code class="codeph">SEND_ERR</code>命令后，RTP必须执行<code class="codeph">ROLLBACK</code>处理。
                  </p>
                  <p>因为分布式事务的能力<a id="d16014e937" class="indexterm-anchor"></a> Oracle数据库受网关使用的<code class="codeph">PGA_CAPABILITY</code>选项的影响，希望通过为每个应用程序使用不同的网关实例来分离查询和更新应用程序。一个网关可以被定义<code class="codeph">PGA_CAPABILITY</code>设置为<code class="codeph">READ_ONLY</code>和其他人<code class="codeph">PGA_CAPABILITY</code>设置为<code class="codeph">SINGLE_SITE</code>或<code class="codeph">COMMIT_CONFIRM</code> 。</p>
                  <p>这允许只读事务程序在Oracle数据库的控制下参与分布式事务。例如，来自DB2的数据可以通过<code class="codeph">READ_ONLY</code>网关通过仅查询RTP检索，然后可以在一个Oracle事务中用作Oracle数据库上数据库更新的输入。甲<code class="codeph">SINGLE_SITE</code>网关只能用于访问其中的Oracle数据库控制的范围之外执行更新国外数据库的RTP一起使用。可以从Oracle数据库可访问的任何数据库中读取数据，并且该数据可用于通过网关执行更新。
                  </p>
                  <p>当需要更新Oracle端和OLTP端的资源时，可以使用<code class="codeph">COMMIT_CONFIRM</code>网关，前提是OLTP和RTP设置为实现<code class="codeph">COMMIT_CONFIRM</code> 。</p>
                  <p>设置多个所需的一切<a id="d16014e977" class="indexterm-anchor"></a>网关实例是为每个实例设置以下内容：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">listener.ora</code>一个条目<a id="d16014e989" class="indexterm-anchor"></a><a id="d16014e991" class="indexterm-anchor"></a>定义网关实例的<code class="codeph">sid</code>的文件</p>
                     </li>
                     <li>
                        <p><code class="codeph">tnsnames.ora</code>一个条目<a id="d16014e1005" class="indexterm-anchor"></a><a id="d16014e1007" class="indexterm-anchor"></a>定义用于连接到<code class="codeph">listener.ora</code>定义的网关实例的别名的文件</p>
                     </li>
                     <li>
                        <p>一个<a id="d16014e1017" class="indexterm-anchor"></a> Oracle数据库中的数据库链接，用于指定在其<code class="codeph">USING</code>参数中在<code class="codeph">tnsnames.ora</code>文件中定义的别名。
                        </p>
                     </li>
                  </ul>
                  <p>请注意，网关实例可以共享一个公共目录结构并使用相同的可执行文件。</p>
                  <p>例如，要设置两个网关， <a id="d16014e1030" class="indexterm-anchor"></a> <code class="codeph">PGAI</code>和<a id="d16014e1037" class="indexterm-anchor"></a> <code class="codeph">PGAU</code> （分别用于查询和更新），需要执行以下步骤：</p>
                  <ol>
                     <li>
                        <p>在<code class="codeph">listener.ora</code>为两个<span class="italic"><code class="codeph">sid</code></span> ， <code class="codeph">PGAI</code>和<code class="codeph">PGAU</code>定义条目。</p>
                     </li>
                     <li>
                        <p>在中定义两个别名<a id="d16014e1064" class="indexterm-anchor"></a><a id="d16014e1066" class="indexterm-anchor"></a> <code class="codeph">tnsnames.ora</code>连接到两个新<span class="italic"><code class="codeph">sid</code></span> S， <code class="codeph">PGAI</code>和<code class="codeph">PGAU</code> 。</p>
                     </li>
                     <li>
                        <p>在中定义两个数据库链接<a id="d16014e1086" class="indexterm-anchor"></a> Oracle数据库，一个连接到<code class="codeph">PGAI</code> ，另一个连接到<code class="codeph">PGAU</code> 。</p>
                     </li>
                     <li>
                        <p>最后，创建<a id="d16014e1098" class="indexterm-anchor"></a>初始化文件<a id="d16014e1105" class="indexterm-anchor"></a><a id="d16014e1107" class="indexterm-anchor"></a> <code class="codeph">initPGAI.ora</code>和<code class="codeph">initPGAU.ora</code> 。
                        </p>
                        <p>在<code class="codeph">initPGAI.ora</code> ，设置<code class="codeph">PGA_CAPABILITY</code>到<code class="codeph">READ_ONLY</code> ，并在<code class="codeph">initPGAU.ora</code> ，设置<code class="codeph">PGA_CAPABILITY</code>到<code class="codeph">SINGLE_SITE</code>或<code class="codeph">COMMIT_CONFIRM</code> 。然后，使用<code class="codeph">PGAI</code>网关进行仅查询事务，并使用<code class="codeph">PGAU</code>网关进行更新事务。
                        </p>
                        <p>可以使用相同的步骤来设置其他网关实例。</p>
                     </li>
                  </ol>
               </div>
            </div><a id="APPCW262"></a><div class="props_rev_3"><a id="GUID-F52E3C91-38FE-4935-87B0-89E5B2AAA9FD" name="GUID-F52E3C91-38FE-4935-87B0-89E5B2AAA9FD"></a><h3 id="APPCW-GUID-F52E3C91-38FE-4935-87B0-89E5B2AAA9FD" class="sect3">PGA_CONFIRM参数注意事项</h3>
               <div>
                  <p>在决定设置时<a id="d16014e1182" class="indexterm-anchor"></a> <code class="codeph">PGA_CONFIRM</code> <a id="d16014e1189" class="indexterm-anchor"></a>参数，了解每个设置的效果很重要。首先，请记住，此参数仅影响在<code class="codeph">SYNCLEVEL 1</code>运行的那些会话。默认设置<code class="codeph">PGA_CONFIRM=REJECT</code>适用于大多数应用程序。使用此设置，网关生成一个<a id="d16014e1202" class="indexterm-anchor"></a>如果从远程事务程序收到<code class="codeph">CONFIRM</code>请求，则会出错。如果你有一个使用远程交易<code class="codeph">CONFIRM</code>以验证数据是由网关接收，则必须使用<code class="codeph">PGA_CONFIRM=ACCEPT</code> ，让通往这些传入响应<code class="codeph">CONFIRM</code>与请求<code class="codeph">CONFIRMED</code>响应。您必须知道，当Oracle应用程序发出<code class="codeph">COMMIT</code>请求时，网关会向远程事务发送<code class="codeph">CONFIRM</code>请求。为了使<code class="codeph">COMMIT</code>处理正常工作，必须编写远程事务，以便在从网关收到<code class="codeph">CONFIRM</code>请求时执行其本地提交处理，并在提交处理成功完成后使用<code class="codeph">CONFIRMED</code>响应网关。如果<a id="d16014e1239" class="indexterm-anchor"></a>在提交处理期间发生错误，然后远程事务必须使用<code class="codeph">SEND_ERR</code>响应网关以指示提交失败。
                  </p>
                  <p>使用<code class="codeph">PGA_CONFIRM=ACCEPT</code>一个特例是IMS / TM版本7。使用IMS / TM版本7提供的隐含APPC支持时，在<code class="codeph">SYNCLEVEL 1</code>运行的会话的处理方式与在<code class="codeph">SYNCLEVEL 0.</code>运行的会话的处理方式不同<code class="codeph">SYNCLEVEL 0.</code> 当会话处于<code class="codeph">SYNCLEVEL 1</code>时，IMS / TM会在每次<code class="codeph">APPC</code> <code class="codeph">SEND</code>后自动生成<code class="codeph">CONFIRM</code>请求。 <a id="d16014e1271" class="indexterm-anchor"></a> 在网关侧，如果未指定<code class="codeph">PGA_CONFIRM=ACCEPT</code> ，则IMS / TM发送的<code class="codeph">CONFIRM</code>请求将导致网关生成错误。使用<code class="codeph">PGA_CONFIRM=ACCEPT</code>缓解这一问题，使网关进入的回应<code class="codeph">CONFIRM</code>与请求<code class="codeph">CONFIRMED</code>响应。以这种方式运行的唯一限制是IMS提供的隐含APPC支持在从网关收到<code class="codeph">CONFIRM</code>请求时不通知应用程序。这意味着网关不能使用<code class="codeph">CONFIRM</code>来实现<code class="codeph">COMMIT</code> ，从而禁止使用<code class="codeph">COMMIT/ROLLBACK</code>来控制对话的IMS端的更新。
                  </p>
               </div>
            </div><a id="APPCW263"></a><div class="props_rev_3"><a id="GUID-B7251BC4-D7B4-4B35-8560-66A602D3FF31" name="GUID-B7251BC4-D7B4-4B35-8560-66A602D3FF31"></a><h3 id="APPCW-GUID-B7251BC4-D7B4-4B35-8560-66A602D3FF31" class="sect3">使用SNA的网关示例listener.ora文件</h3>
               <div><pre class="oac_no_warn" dir="ltr">LISTENER =（ADDRESS_LIST =（ADDRESS =（COMMUNITY = TCP.world）（主机=托架）（PROTOCOL = TCP）（端口= 2621））（ADDRESS =（COMMUNITY = TCP.world）（主机=托架）（PROTOCOL = TCP） ）（Port = 2623）））SID_LIST_LISTENER =（SID_LIST =（SID_DESC =（SID_NAME = PGA）（ORACLE_HOME = C：\ oracle \ pga \ 12.2）（PROGRAM = pg4asrv）））</pre></div>
            </div><a id="APPCW264"></a><div class="props_rev_3"><a id="GUID-396255E1-6B6C-49AE-9D15-A03AA1C73CD5" name="GUID-396255E1-6B6C-49AE-9D15-A03AA1C73CD5"></a><h3 id="APPCW-GUID-396255E1-6B6C-49AE-9D15-A03AA1C73CD5" class="sect3">使用SNA的网关示例tnsnames.ora文件</h3>
               <div><pre class="oac_no_warn" dir="ltr">ORA920 =（DESCRIPTION =（ADDRESS_LIST =（ADDRESS =（PROTOCOL = TCP）（HOST = bay.us.example.com）（PORT = 1521）））（CONNECT_DATA =（SERVER = DEDICATED）（SERVICE_NAME = ORA920.bay）） ）PGA =（DESCRIPTION =（ADDRESS_LIST =（ADDRESS =（PROTOCOL = TCP）（HOST = bay）（PORT = 2621）））（CONNECT_DATA =（SID = PGA））（HS = OK））</pre></div>
            </div>
         </div>
      </article>
   </body>
</html>
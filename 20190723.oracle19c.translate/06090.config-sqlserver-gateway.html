<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>为SQL Server配置Oracle数据库网关</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Installation and Configuration Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Installation and Configuration Guide for Microsoft Windows"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-gateway-installation-and-configuration-guide-microsoft-windows.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-16T19:13:41-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2006, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="F18242-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="install-sqlserver-gateway.html" title="Previous" type="text/html"></link>
      <link rel="next" href="part-odbc-gateway.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Gateway Installation and Configuration Guide for Microsoft Windows"></meta>
    <meta name="dcterms.isVersionOf" content="OTGIW"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="install-sqlserver-gateway.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="part-odbc-gateway.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">安装和配置指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-sqlserver-gateway.html" property="item" typeof="WebPage"><span property="name">安装和配置SQL Server的Oracle Database Gateway</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">为SQL Server配置Oracle数据库网关</li>
            </ol>
            <a id="GUID-BBD76BC7-A50C-42CE-B612-49EB650968D8" name="GUID-BBD76BC7-A50C-42CE-B612-49EB650968D8"></a><a id="OTGIW900"></a>
            
            <h2 id="OTGIW-GUID-BBD76BC7-A50C-42CE-B612-49EB650968D8" class="sect2"><span class="enumeration_chapter">9</span>为SQL Server配置Oracle数据库网关</h2>
         </header>
         <div class="ind">
            <div>
               <p>安装网关后，执行以下任务以配置SQL Server的Oracle Database Gateway：</p>
               <ol>
                  <li>
                     <p><a href="config-sqlserver-gateway.html#GUID-57635E7B-5549-4F94-817F-767C8441744E">配置网关初始化参数文件</a></p>
                  </li>
                  <li>
                     <p><a href="config-sqlserver-gateway.html#GUID-E6000600-41F3-46D6-A2AD-E005E87E4043">为网关配置Oracle Net</a></p>
                  </li>
                  <li>
                     <p><a href="config-sqlserver-gateway.html#GUID-A5DC87A5-297E-4C3B-9284-5C5BEA5D3F32">配置Oracle数据库以进行网关访问</a></p>
                  </li>
                  <li>
                     <p><a href="config-sqlserver-gateway.html#GUID-42731798-3DCF-411C-B829-9B74310B3F03">创建数据库链接</a></p>
                  </li>
                  <li>
                     <p><a href="config-sqlserver-gateway.html#GUID-B26C71BA-2392-4FC0-85B4-6D265F882243">配置两阶段提交</a></p>
                  </li>
                  <li>
                     <p><a href="config-sqlserver-gateway.html#GUID-90C6A96D-2533-421A-9C01-FECCF4E1FB9E">为数据字典支持创建SQL Server视图</a></p>
                  </li>
                  <li>
                     <p><a href="config-sqlserver-gateway.html#GUID-C01CE5C0-CA85-4A32-8E8D-7D874002EC10">加密网关初始化参数值</a></p>
                  </li>
                  <li>
                     <p><a href="config-sqlserver-gateway.html#GUID-6CBFC266-BC16-4014-80AA-433345FEB91E">配置网关以访问多个SQL Server数据库</a></p>
                  </li>
               </ol>
            </div><a id="OTGIW1000"></a><div class="props_rev_3"><a id="GUID-57635E7B-5549-4F94-817F-767C8441744E" name="GUID-57635E7B-5549-4F94-817F-767C8441744E"></a><h3 id="OTGIW-GUID-57635E7B-5549-4F94-817F-767C8441744E" class="sect3">配置网关初始化参数文件</h3>
               <div>
                  <div class="section">
                     <p>执行以下任务以配置网关初始化参数文件：<a id="d16525e104" class="indexterm-anchor"></a></p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span><a href="config-sqlserver-gateway.html#GUID-7C68EC98-C6D3-417E-9A6C-FCBE8885B5E6">选择网关的系统标识符</a></span></li>
                     <li><span><a href="config-sqlserver-gateway.html#GUID-02EC0E12-7763-4BEC-95F6-748E103FE5DF">自定义初始化参数文件</a></span></li>
                  </ol>
               </div><a id="OTGIW1001"></a><div class="props_rev_3"><a id="GUID-7C68EC98-C6D3-417E-9A6C-FCBE8885B5E6" name="GUID-7C68EC98-C6D3-417E-9A6C-FCBE8885B5E6"></a><h4 id="OTGIW-GUID-7C68EC98-C6D3-417E-9A6C-FCBE8885B5E6" class="sect4">选择网关的系统标识符</h4>
                  <div>
                     <div class="section">
                        <p>该<a id="d16525e156" class="indexterm-anchor"></a>网关系统标识符<a id="d16525e161" class="indexterm-anchor"></a> （SID）是标识网关实例的字母数字字符串。对于要访问的每个SQL Server数据库，您需要一个网关实例，因此需要一个网关SID。SID用作初始化参数文件的文件名的一部分。默认SID是<span class="bold"></span> <code class="codeph">dg4msql</code> 。
                        </p>
                        <p>您可以定义网关SID，但使用默认的<code class="codeph">dg4msql</code>更容易，因为您不需要更改初始化参数文件名。但是，如果要访问两个SQL Server数据库，则需要两个网关SID，一个用于网关的每个实例。如果您只有一个SQL Server数据库并且希望有时使用一组网关参数设置来访问它，而其他时候使用不同的网关参数设置，那么您将需要多个网关SID用于单个SQL Server数据库。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OTGIW1002"></a><div class="props_rev_3"><a id="GUID-02EC0E12-7763-4BEC-95F6-748E103FE5DF" name="GUID-02EC0E12-7763-4BEC-95F6-748E103FE5DF"></a><h4 id="OTGIW-GUID-02EC0E12-7763-4BEC-95F6-748E103FE5DF" class="sect4">自定义初始化参数文件</h4>
                  <div>
                     <div class="section">
                        <p><a id="d16525e205" class="indexterm-anchor"></a>启动网关时，初始化参数文件必须可用。在安装过程中，将创建以下默认初始化参数文件：</p><pre class="oac_no_warn" dir="ltr"><a id="d16525e211" class="indexterm-anchor"></a> <span class="italic">ORACLE_HOME</span> \ dg4msql \ admin \ initdg4msql.ora</pre><p>其中<span class="italic"><code class="codeph">ORACLE_HOME</code></span>是安装网关的目录。
                        </p>
                        <p>此初始化文件用于默认网关SID。如果未使用<code class="codeph">dg4msql</code>作为网关SID，则必须使用在上一步中<a href="config-sqlserver-gateway.html#GUID-7C68EC98-C6D3-417E-9A6C-FCBE8885B5E6">选择</a>的SID重命名初始化参数文件选择<a href="config-sqlserver-gateway.html#GUID-7C68EC98-C6D3-417E-9A6C-FCBE8885B5E6">网关的系统标识符</a> 。此默认初始化参数文件足以启动网关，验证安装是否成功以及运行演示脚本。
                        </p>
                        <p>可以使用许多初始化参数来修改网关行为。有关可以设置的初始化参数的完整列表，请参阅<a href="init-param-gateway.html#GUID-69E5F431-CF22-48B1-B05B-984644117C1F">初始化参数</a> 。对初始化参数所做的更改仅在下一个网关会话中生效。最重要的参数是<code class="codeph">HS_FDS_CONNECT_INFO</code> ，它描述了与非Oracle系统的连接。
                        </p>
                        <p>默认初始化参数文件已有此参数的条目。<code class="codeph">HS_FDS_CONNECT_INFO</code>的语法如下：</p><pre class="oac_no_warn" dir="ltr">HS_FDS_CONNECT_INFO = <span class="italic">host_name</span> / [ <span class="italic">instance_name</span> ] [/ <span class="italic">database_name</span> ]</pre><p>哪里：</p>
                        <div class="tblformal" id="GUID-02EC0E12-7763-4BEC-95F6-748E103FE5DF__GUID-575C3F1D-29E0-4ABC-9715-A347F3B6BE43">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="variable definition" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d16525e266">变量</th>
                                    <th align="left" valign="bottom" width="75%" id="d16525e269">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d16525e274" headers="d16525e266 ">
                                       <p><span class="italic"><code class="codeph">主机名</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d16525e274 d16525e269 ">
                                       <p>是托管SQL Server数据库的计算机的主机名或IP地址。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d16525e283" headers="d16525e266 ">
                                       <p><span class="italic"><code class="codeph">INSTANCE_NAME</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d16525e283 d16525e269 ">
                                       <p>是在计算机上运行的SQL Server实例。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d16525e292" headers="d16525e266 ">
                                       <p><span class="italic"><code class="codeph">数据库名称</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="75%" headers="d16525e292 d16525e269 ">
                                       <p>是SQL Server数据库数据库名称。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p><span class="italic"><code class="codeph">instance_name</code></span>和<span class="italic"><code class="codeph">database_name</code></span>都是可选的。如果省略<span class="italic"><code class="codeph">instance_name</code></span>并提供了<span class="italic"><code class="codeph">database_name</code></span> ，则需要斜杠（ <code class="codeph">/</code> ）。这可以显示如下：</p><pre class="oac_no_warn" dir="ltr">HS_FDS_CONNECT_INFO = <span class="italic">host_name</span> // <span class="italic">database_name</span>
</pre><div class="infoboxnotealso" id="GUID-02EC0E12-7763-4BEC-95F6-748E103FE5DF__GUID-168A856F-4583-4390-B888-FDF7775BC9E4">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="init-param-gateway.html#GUID-69E5F431-CF22-48B1-B05B-984644117C1F">初始化参数</a>和<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgiw&amp;id=HETER4089" target="_blank"><span class="italic">Oracle数据库异构连接用户指南</span></a> ，了解有关自定义初始化参数文件的更多信息。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="OTGIW1003"></a><div class="props_rev_3"><a id="GUID-E6000600-41F3-46D6-A2AD-E005E87E4043" name="GUID-E6000600-41F3-46D6-A2AD-E005E87E4043"></a><h3 id="OTGIW-GUID-E6000600-41F3-46D6-A2AD-E005E87E4043" class="sect3">为网关配置Oracle Net</h3>
               <div>
                  <div class="section">
                     <p>网关要求Oracle Net与Oracle数据库通信。配置网关后，执行以下任务以配置Oracle Net以使用网关：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span><a href="config-sqlserver-gateway.html#GUID-00C9B325-EF62-4FF8-9116-E2924CE5C890">为网关配置Oracle Net Listener</a></span></li>
                     <li><span><a href="config-sqlserver-gateway.html#GUID-0968C7C4-65FE-4A05-8357-15EA7B848E7D">停止并启动Gateway的Oracle Net Listener</a></span></li>
                  </ol>
               </div><a id="OTGIW1004"></a><div class="props_rev_3"><a id="GUID-00C9B325-EF62-4FF8-9116-E2924CE5C890" name="GUID-00C9B325-EF62-4FF8-9116-E2924CE5C890"></a><h4 id="OTGIW-GUID-00C9B325-EF62-4FF8-9116-E2924CE5C890" class="sect4">为网关配置Oracle Net Listener</h4>
                  <div>
                     <div class="section">
                        <p>Oracle Net Listener侦听来自Oracle数据库的传入请求。要使Oracle Net Listener监听网关，必须将有关网关的信息添加到Oracle Net Listener配置文件<code class="codeph">listener.ora</code> 。默认情况下，此文件位于<span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">\network\admin</code> ，其中<span class="italic"><code class="codeph">ORACLE_HOME</code></span>是安装网关的目录。
                        </p>
                        <p>必须将以下条目添加到<code class="codeph">listener.ora</code>文件中：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>Oracle Net Listener侦听的Oracle Net地址列表</p>
                           </li>
                           <li>
                              <p>Oracle Net Listener响应传入连接请求而启动的网关的可执行文件名</p>
                           </li>
                        </ul>
                        <p><span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">\dg4msql\admin</code>目录中提供了<code class="codeph">listener.ora</code>条目（ <code class="codeph">listener.ora.sample</code> ）的示例，其中<code class="codeph">ORACLE_HOME</code>是安装网关的目录。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div><a id="OTGIW1005"></a><div class="props_rev_3"><a id="GUID-5E56A5FA-54C7-4529-B6B7-61959C2457EA" name="GUID-5E56A5FA-54C7-4529-B6B7-61959C2457EA"></a><h5 id="OTGIW-GUID-5E56A5FA-54C7-4529-B6B7-61959C2457EA" class="sect5">listener.ora文件条目的语法</h5>
                     <div>
                        <p>Oracle数据库使用Oracle Net和任何支持的协议适配器与网关通信。以下是Oracle Net Listener使用TCP / IP协议适配器侦听的地址的语法：</p><pre class="oac_no_warn" dir="ltr">LISTENER =（ADDRESS =（PROTOCOL = TCP）（HOST = <span class="italic">host_name</span> ）（PORT = <span class="italic">port_number</span> ））</pre><p>哪里：</p>
                        <div class="tblformal" id="GUID-5E56A5FA-54C7-4529-B6B7-61959C2457EA__GUID-23D7E981-EDAA-4622-8FF5-B3B2FC524F54">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table lists the connect descriptor parameters" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="29%" id="d16525e517">变量</th>
                                    <th align="left" valign="bottom" width="71%" id="d16525e520">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d16525e525" headers="d16525e517 ">
                                       <p><span class="italic"><code class="codeph">主机名</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d16525e525 d16525e520 ">
                                       <p>是安装网关的计算机的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d16525e534" headers="d16525e517 ">
                                       <p><span class="italic"><code class="codeph">端口号</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d16525e534 d16525e520 ">
                                       <p>指定Oracle Net Listener使用的端口号。如果在同一台机器上运行其他侦听器，则<span class="italic"><code class="codeph">port_number</code></span>的值必须与其他侦听器的端口号不同。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>要指示Oracle Net Listener启动网关以响应传入的连接请求，请在<code class="codeph">listener.ora</code>文件中添加一个条目。
                        </p>
                        <div class="infoboxnote" id="GUID-5E56A5FA-54C7-4529-B6B7-61959C2457EA__GUID-AC5E499D-5264-4691-95C3-1F9B4D0FA09B">
                           <p class="notep1">注意：</p>
                           <p>您必须在listener.ora文件和<code class="codeph">tnsnames.ora</code>文件中使用相同的SID值，该文件将在下一步中配置。
                           </p>
                        </div><pre class="oac_no_warn" dir="ltr">SID_LIST_LISTENER =（SID_LIST =（SID_DESC =（SID_NAME = <span class="italic">gateway_sid</span> ）（ORACLE_HOME = <span class="italic">oracle_home_directory</span> ）（PROGRAM = dg4msql）））</pre><p>哪里：</p>
                        <div class="tblformal" id="GUID-5E56A5FA-54C7-4529-B6B7-61959C2457EA__GUID-0933DA4E-95B4-4A74-9F81-EAFD2B5AFF91">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Gateway to Start in lisenter.ora File parameter descriptions" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="29%" id="d16525e575">变量</th>
                                    <th align="left" valign="bottom" width="71%" id="d16525e578">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d16525e583" headers="d16525e575 ">
                                       <p><span class="italic"><code class="codeph">gateway_sid</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d16525e583 d16525e578 ">
                                       <p>指定网关的SID，并匹配<code class="codeph">tnsnames.ora</code>文件中连接描述符条目中指定的网关SID。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d16525e595" headers="d16525e575 ">
                                       <p><span class="italic"><code class="codeph">oracle_home_directory</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d16525e595 d16525e578 ">
                                       <p>指定网关所在的Oracle主目录。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d16525e604" headers="d16525e575 ">
                                       <p><code class="codeph">dg4msql</code></p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d16525e604 d16525e578 ">
                                       <p>指定SQL Server的Oracle数据库网关的可执行文件名。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>如果您已有现有的Oracle Net Listener，请将以下语法添加到现有<code class="codeph">listener.ora</code>文件中的<code class="codeph">SID_LIST</code> ：</p><pre class="oac_no_warn" dir="ltr">SID_LIST_LISTENER =（SID_LIST =（SID_DESC =。。）（SID_DESC =。。）（SID_DESC =（SID_NAME = <span class="italic">gateway_sid</span> ）（ORACLE_HOME = <span class="italic">oracle_home_directory</span> ）（PROGRAM = dg4msql）））</pre><div class="infoboxnotealso" id="GUID-5E56A5FA-54C7-4529-B6B7-61959C2457EA__GUID-7E9D09B7-98D5-44E7-8214-0E5ED1864E09">
                           <p class="notep1">也可以看看：</p>
                           <p>有关更改<code class="codeph">listener.ora</code>文件的信息，请参见“ <a href="../netag/configuring-and-administering-oracle-net-listener.html#NETAG294" target="_blank"><span class="italic">Oracle数据库网络服务管理员指南”</span></a> 。
                           </p>
                        </div>
                     </div>
                  </div>
               </div><a id="OTGIW1006"></a><div class="props_rev_3"><a id="GUID-0968C7C4-65FE-4A05-8357-15EA7B848E7D" name="GUID-0968C7C4-65FE-4A05-8357-15EA7B848E7D"></a><h4 id="OTGIW-GUID-0968C7C4-65FE-4A05-8357-15EA7B848E7D" class="sect4">停止并启动Gateway的Oracle Net Listener</h4>
                  <div>
                     <div class="section">
                        <p>你必须停止并重新启动<a id="d16525e671" class="indexterm-anchor"></a> Oracle Net Listener启动新设置，如下所示：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>从“ <span class="bold">开始”</span>菜单中选择<span class="bold">“设置”</span> ，“ <span class="bold">控制面板”</span> ，然后选择“ <span class="bold">服务”</span></span></li>
                        <li><span>选择网关的Oracle Net Listener服务。</span></li>
                        <li><span>如果该服务已在运行，请单击“ <span class="bold">停止”</span>以停止该服务。</span></li>
                        <li><span>单击“ <span class="bold">开始”</span>以启动或重新启动该服务。</span></li>
                     </ol>
                  </div>
               </div>
            </div><a id="OTGIW1007"></a><div class="props_rev_3"><a id="GUID-A5DC87A5-297E-4C3B-9284-5C5BEA5D3F32" name="GUID-A5DC87A5-297E-4C3B-9284-5C5BEA5D3F32"></a><h3 id="OTGIW-GUID-A5DC87A5-297E-4C3B-9284-5C5BEA5D3F32" class="sect3">配置Oracle数据库以进行网关访问</h3>
               <div>
                  <div class="section">
                     <p>在使用网关访问SQL Server数据之前，必须配置Oracle数据库以启用与Oracle Net上的网关通信。</p>
                     <p>要配置Oracle数据库，必须将连接描述符添加到<code class="codeph">tnsnames.ora</code>文件中。默认情况下，此文件位于<span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">\network\admin</code> ，其中<code class="codeph">ORACLE_HOME</code>是安装Oracle数据库的目录。您无法使用Oracle Net Assistant或Oracle Net Easy Config工具来配置<code class="codeph">tnsnames.ora</code>文件。您必须手动编辑该文件。
                     </p>
                     <p><span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">\dg4msql\admin</code>目录中提供了<code class="codeph">tnsnames.ora</code>条目（ <code class="codeph">tnsnames.ora.sample</code> ）的示例，其中<code class="codeph">ORACLE_HOME</code>是安装网关的目录。
                     </p>
                     <div class="infoboxnotealso" id="GUID-A5DC87A5-297E-4C3B-9284-5C5BEA5D3F32__GUID-18184FD3-6AA3-4F54-8DC7-F1CCC06CDE68">
                        <p class="notep1">也可以看看：</p>
                        <p>有关编辑<code class="codeph">tnsnames.ora</code>文件的信息，请<code class="codeph">tnsnames.ora</code> <a href="../netag/configuring-naming-methods.html#NETAG256" target="_blank"><span><cite>“Oracle数据库网络服务管理员指南”</cite></span></a> 。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="OTGIW1008"></a><div class="props_rev_3"><a id="GUID-19724CA2-9651-4409-852A-C6F87D3E0C79" name="GUID-19724CA2-9651-4409-852A-C6F87D3E0C79"></a><h4 id="OTGIW-GUID-19724CA2-9651-4409-852A-C6F87D3E0C79" class="sect4">配置tnsnames.ora</h4>
                  <div>
                     <div class="section">
                        <p>编辑<code class="codeph">tnsnames.ora</code>文件以添加网关的连接描述符。以下是使用TCP / IP协议的Oracle Net条目的语法：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">connect_descriptor</span> =（DESCRIPTION =（ADDRESS =（PROTOCOL = TCP）（HOST = <span class="italic">host_name</span> ）（PORT = <span class="italic">port_number</span> ））（CONNECT_DATA =（SID = <span class="italic">gateway_sid</span> ））（HS = OK））</pre><p>哪里：</p>
                        <div class="tblformal" id="GUID-19724CA2-9651-4409-852A-C6F87D3E0C79__GUID-E4C59554-88B7-40F8-A1A4-6D47962163E2">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Configuring tnsnames.ora parameter descriptions" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="29%" id="d16525e845">变量</th>
                                    <th align="left" valign="bottom" width="71%" id="d16525e848">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d16525e853" headers="d16525e845 ">
                                       <p><span class="italic"><code class="codeph">connect_descriptor</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d16525e853 d16525e848 ">
                                       <p>是创建数据库链接时指定的连接对象的描述，例如<code class="codeph">dg4msql</code> 。
                                       </p>
                                       <p>检查Oracle数据库的<code class="codeph">ORACLE_HOME</code>的<code class="codeph">sqlnet.ora</code>文件，以获取以下行：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">names.directory_path =（TNSNAMES，HOSTNAME）</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">names.default_domain =世界</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">name.default_zone =世界</code></p>
                                          </li>
                                       </ul>
                                       <p><span class="bold">注意</span> ：如果Oracle数据库位于Microsoft Windows上，则该文件为<span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">\network\admin\sqlnet.ora</code> 。
                                       </p>
                                       <p>如果<code class="codeph">sqlnet.ora</code>文件包含这些行，则<span class="italic">connect_descriptor</span>必须以扩展名<code class="codeph">.world</code>结尾。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d16525e907" headers="d16525e845 ">
                                       <p><code class="codeph">TCP</code></p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d16525e907 d16525e848 ">
                                       <p>是用于TCP / IP连接的TCP协议。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d16525e915" headers="d16525e845 ">
                                       <p><span class="italic"><code class="codeph">主机名</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d16525e915 d16525e848 ">
                                       <p>指定运行网关的计算机。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d16525e924" headers="d16525e845 ">
                                       <p><span class="italic"><code class="codeph">端口号</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d16525e924 d16525e848 ">
                                       <p>匹配正在侦听网关的Oracle Net Listener使用的端口号。Oracle Net Listener的端口号可以在Oracle Net Listener使用的<code class="codeph">listener.ora</code>文件中找到。请参阅<a href="config-sqlserver-gateway.html#GUID-5E56A5FA-54C7-4529-B6B7-61959C2457EA">listener.ora文件条目的语法</a> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d16525e940" headers="d16525e845 ">
                                       <p><span class="italic"><code class="codeph">gateway_sid</code></span></p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d16525e940 d16525e848 ">
                                       <p>指定网关的SID，并匹配正在侦听网关的Oracle Net Listener的<code class="codeph">listener.ora</code>文件中指定的SID。请参阅<a href="config-sqlserver-gateway.html#GUID-00C9B325-EF62-4FF8-9116-E2924CE5C890">配置</a>网关的Oracle Net Listener为网关<a href="config-sqlserver-gateway.html#GUID-00C9B325-EF62-4FF8-9116-E2924CE5C890">配置Oracle Net Listener以</a>获取更多信息。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="29%" id="d16525e956" headers="d16525e845 ">
                                       <p><code class="codeph">（HS = OK）</code></p>
                                    </td>
                                    <td align="left" valign="top" width="71%" headers="d16525e956 d16525e848 ">
                                       <p>指定此连接描述符连接到非Oracle系统。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-DC422467-EE56-451E-8C96-F03AC4A0D89B" name="GUID-DC422467-EE56-451E-8C96-F03AC4A0D89B"></a><h4 id="OTGIW-GUID-DC422467-EE56-451E-8C96-F03AC4A0D89B" class="sect4">为多个侦听器配置tnsnames.ora</h4>
                  <div>
                     <div class="section">
                        <p>要确保更高的可用性，您可以指定多个<a id="d16525e1007" class="indexterm-anchor"></a> connect de scriptor中的监听器。
                        </p><pre class="oac_no_warn" dir="ltr"> <a id="d16525e1015" class="indexterm-anchor"></a> <span class="italic">connect_descriptor</span> =（DESCRIPTION =（ADDRESS =（PROTOCOL = TCP）（HOST = <span class="italic">host_name_1</span> ）（PORT = <span class="italic">port_number_1</span> ））（ADDRESS =（PROTOCOL = TCP）（HOST = <span class="italic">host_name_2</span> ）（PORT = <span class="italic">port_number_2</span> ））（CONNECT_DATA =（SID = <span class="italic">gateway_sid</span> ））（HS = OK））</pre><p>这表明，如果<span class="italic"><code class="codeph">host_name_1</code></span>和<span class="italic"><code class="codeph">port_number_1</code></span>的侦听器不可用，则<span class="italic"><code class="codeph">host_name_2</code></span>和<span class="italic"><code class="codeph">port_number_2</code></span>的第二个侦听器将接管。
                        </p>
                        <div class="infoboxnotealso" id="GUID-DC422467-EE56-451E-8C96-F03AC4A0D89B__GUID-AA7F2A40-5F97-4001-BE11-A0C0CBEED2A8">
                           <p class="notep1">也可以看看：</p>
                           <p>有关编辑<code class="codeph">tnsnames.ora</code>文件的信息，请<code class="codeph">tnsnames.ora</code> <a href="../netag/configuring-naming-methods.html#NETAG256" target="_blank"><span><cite>“Oracle数据库网络服务管理员指南”</cite></span></a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="OTGIW1009"></a><div class="props_rev_3"><a id="GUID-42731798-3DCF-411C-B829-9B74310B3F03" name="GUID-42731798-3DCF-411C-B829-9B74310B3F03"></a><h3 id="OTGIW-GUID-42731798-3DCF-411C-B829-9B74310B3F03" class="sect3">创建数据库链接</h3>
               <div>
                  <div class="section">
                     <p>连接到Oracle数据库的任何Oracle客户端都可以通过网关访问SQL Server数据。Oracle客户端和Oracle数据库可以驻留在不同的计算机上。网关仅接受来自Oracle数据库的连接。</p>
                     <p>首次在Oracle会话中使用时，通过数据库链接建立与网关的连接。在此上下文中，连接是指Oracle数据库与网关之间的连接。在Oracle会话结束之前，连接将保持建立状态。另一个会话或用户可以访问相同的数据库链接，并获得与网关和SQL Server数据库的不同连接。</p>
                     <p>数据库链接在网关会话期间处于活动状态。如果要在会话期间关闭数据库链接，可以使用<code class="codeph">ALTER SESSION</code>语句执行此操作。
                     </p>
                     <p>要访问SQL Server，您必须创建数据库链接。公共数据库链接是最常见的数据库链接。</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE PUBLIC DATABASE LINK <span class="italic">dblink</span> CONNECT TO 2“ <span class="italic">user”</span> IDENTIFIED BY <span class="italic">“password”</span> <span class="italic">USING'tns_name_entry</span> ';</pre><p>哪里：</p>
                     <div class="tblformal" id="GUID-42731798-3DCF-411C-B829-9B74310B3F03__GUID-697B5F44-6C60-467D-AEE4-08D3D918C17C">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="variable definition" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="25%" id="d16525e1137">变量</th>
                                 <th align="left" valign="bottom" width="75%" id="d16525e1140">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d16525e1145" headers="d16525e1137 ">
                                    <p><span class="italic"><code class="codeph">DBLINK</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d16525e1145 d16525e1140 ">
                                    <p>是完整的数据库链接名称。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="25%" id="d16525e1154" headers="d16525e1137 ">
                                    <p><span class="italic"><code class="codeph">tns_name_entry</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="75%" headers="d16525e1154 d16525e1140 ">
                                    <p>指定<code class="codeph">tnsnames.ora</code>文件中指定的标识网关的Oracle Net连接描述符</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>创建数据库链接后，您可以验证与SQL Server数据库的连接，如下所示：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM DUAL @dblink;</pre><div class="infoboxnotealso" id="GUID-42731798-3DCF-411C-B829-9B74310B3F03__GUID-AB7ACE53-0C46-40BD-92D9-FB34E1ECC407">
                        <p class="notep1">也可以看看：</p>
                        <p>有关使用数据库链接的详细信息，请<a href="../admin/distributed-database-concepts.html#ADMIN12083" target="_blank"><span><cite>参见Oracle数据库管理员指南</cite></span></a> 。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OTGIW1010"></a><div class="props_rev_3"><a id="GUID-B26C71BA-2392-4FC0-85B4-6D265F882243" name="GUID-B26C71BA-2392-4FC0-85B4-6D265F882243"></a><h3 id="OTGIW-GUID-B26C71BA-2392-4FC0-85B4-6D265F882243" class="sect3">配置两阶段提交</h3>
               <div>
                  <div class="section">
                     <p><a id="d16525e1209" class="indexterm-anchor"></a>网关支持以下事务功能：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">COMMIT_CONFIRM</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">只读</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">SINGLE_SITE</code></p>
                        </li>
                     </ul>
                     <p>使用<code class="codeph">HS_TRANSACTION_MODEL</code>初始化参数设置事务模型。<a id="d16525e1233" class="indexterm-anchor"></a><a id="d16525e1237" class="indexterm-anchor"></a>默认情况下，网关以<code class="codeph">COMMIT_CONFIRM</code>事务模式运行。当事务更新SQL Server数据库时，网关将成为提交点站点。在验证事务中的所有Oracle数据库已成功准备事务之后，Oracle数据库将提交SQL Server数据库中的工作单元。只有一个网关实例可以作为提交点站点参与Oracle两阶段提交事务。
                     </p>
                     <div class="infoboxnotealso" id="GUID-B26C71BA-2392-4FC0-85B4-6D265F882243__GUID-5E8E5978-FCFB-4DFE-8FF3-02C240410F56">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgiw&amp;id=HETER4068" target="_blank"><span class="italic">“Oracle数据库异构连接用户指南”</span></a> ，了解有关两阶段提交过程的信息。
                        </p>
                     </div>
                     <p>要启用<code class="codeph">COMMIT_CONFIRM</code>事务模式，请执行以下任务：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span><a href="config-sqlserver-gateway.html#GUID-E0996D80-51DC-4617-A5D2-3A32ACCEA976">创建恢复帐户和密码</a></span></li>
                     <li><span><a href="config-sqlserver-gateway.html#GUID-ECB2AEC4-DA73-4DA8-9B68-3D0072D911C1">创建事务日志表</a></span></li>
                  </ol>
                  <div class="section">
                     <p>名为<code class="codeph">HS_TRANSACTION_LOG</code>的日志表是记录两阶段提交事务的地方。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div><a id="OTGIW1011"></a><div class="props_rev_3"><a id="GUID-E0996D80-51DC-4617-A5D2-3A32ACCEA976" name="GUID-E0996D80-51DC-4617-A5D2-3A32ACCEA976"></a><h4 id="OTGIW-GUID-E0996D80-51DC-4617-A5D2-3A32ACCEA976" class="sect4">创建恢复帐户和密码</h4>
                  <div>
                     <div class="section">
                        <p>对于网关来恢复分布式事务，a <a id="d16525e1307" class="indexterm-anchor"></a>必须在SQL Server数据库中设置恢复帐户和密码。默认情况下，两者都有<a id="d16525e1312" class="indexterm-anchor"></a>帐户的用户名和密码是<code class="codeph">RECOVER</code> 。可以使用网关初始化参数<code class="codeph">HS_FDS_RECOVERY_ACCOUNT</code>更改帐户的名称。可以使用网关初始化参数<code class="codeph">HS_FDS_RECOVERY_PWD</code>更改帐户密码。</p>
                        <div class="infoboxnote" id="GUID-E0996D80-51DC-4617-A5D2-3A32ACCEA976__GUID-86375202-23AF-4AC5-BECF-FFC24D48FAAF">
                           <p class="notep1">注意：</p>
                           <p>Oracle建议您不要使用默认值<code class="codeph">RECOVER</code>作为用户名和密码。此外，将纯文本作为用户名和密码存储在初始化文件中并不是一个好的安全策略。有一个名为<code class="codeph">dg4pwd</code>的实用程序应该用于加密。有关更多详细信息<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgiw&amp;id=HETER4010" target="_blank">，</a>请参见<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgiw&amp;id=HETER4010" target="_blank">“</a> <span class="italic">Oracle数据库异构连接用户指南</span> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgiw&amp;id=HETER4010" target="_blank">”</a>中的<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgiw&amp;id=HETER4010" target="_blank">第4.2.3节“加密初始化参数”</a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>在SQL Server数据库中设置用户帐户。用户名和密码都必须是有效的SQL Server用户名和密码。</span></li>
                        <li class="stepexpand"><span>在初始化参数文件中，设置以下网关初始化参数：</span><div>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">HS_FDS_RECOVERY_ACCOUNT</code>指向您设置用于恢复的SQL Server用户帐户的用户名。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">HS_FDS_RECOVERY_PWD</code>到您为恢复设置的SQL Server用户帐户的密码。
                                    </p>
                                    <div class="infoboxnotealso" id="GUID-E0996D80-51DC-4617-A5D2-3A32ACCEA976__GUID-AAC3E488-E600-4106-B911-C9D5C97F2F88">
                                       <p class="notep1">也可以看看：</p>
                                       <p>有关编辑<a href="config-sqlserver-gateway.html#GUID-02EC0E12-7763-4BEC-95F6-748E103FE5DF">初始化参数文件</a>的信息，请<a href="config-sqlserver-gateway.html#GUID-02EC0E12-7763-4BEC-95F6-748E103FE5DF">自定义</a>初始化参数文件。有关<code class="codeph">HS_FDS_RECOVERY_ACCOUNT</code>和<code class="codeph">HS_FDS_RECOVERY_PWD</code> ，请参阅<a href="init-param-gateway.html#GUID-69E5F431-CF22-48B1-B05B-984644117C1F">初始化参数</a> 。
                                       </p>
                                    </div>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="OTGIW1012"></a><div class="props_rev_3"><a id="GUID-ECB2AEC4-DA73-4DA8-9B68-3D0072D911C1" name="GUID-ECB2AEC4-DA73-4DA8-9B68-3D0072D911C1"></a><h4 id="OTGIW-GUID-ECB2AEC4-DA73-4DA8-9B68-3D0072D911C1" class="sect4">创建事务日志表</h4>
                  <div>
                     <div class="section">
                        <p>配置网关进行两阶段提交时，a <a id="d16525e1422" class="indexterm-anchor"></a>必须在SQL Server数据库中创建表以记录事务。网关使用事务日志表来检查网关在SQL Server数据库中启动并在表中注册的失败事务的状态。
                        </p>
                        <div class="infoboxnote" id="GUID-ECB2AEC4-DA73-4DA8-9B68-3D0072D911C1__GUID-B34B08D0-DF38-49EB-B986-0E56BF02CAE1">
                           <p class="notep1">注意：</p>
                           <p>事务日志表的更新不能是Oracle分布式事务的一部分。</p>
                        </div>
                        <div class="infoboxnote" id="GUID-ECB2AEC4-DA73-4DA8-9B68-3D0072D911C1__GUID-CDF4AD27-77B5-4179-9496-834103A59D15">
                           <p class="notep1">注意：</p>
                           <p>事务日志表中的信息是恢复过程所必需的<span class="italic"> </span>不得改变。桌子<span class="italic"> </span>必须仅由网关使用，访问或更新。
                           </p>
                        </div>
                        <p>该表名为<code class="codeph">HS_TRANSACTION_LOG</code> ，由两列组成， <code class="codeph">GLOBAL_TRAN_ID</code> ，数据类型<code class="codeph">CHAR(64) NOT NULL</code>和<code class="codeph">TRAN_COMMENT</code> ，数据类型<code class="codeph">CHAR(255)</code> 。
                        </p>
                        <p>通过使用<code class="codeph">HS_FDS_TRANSACTION_LOG</code>初始化参数指定其他名称，可以使用除<code class="codeph">HS_TRANSACTION_LOG</code>之外的日志表的其他名称。
                        </p>
                        <div class="infoboxnotealso" id="GUID-ECB2AEC4-DA73-4DA8-9B68-3D0072D911C1__GUID-A5CC83FD-E83F-4ECB-8616-EB58AF10BBD9">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="init-param-gateway.html#GUID-69E5F431-CF22-48B1-B05B-984644117C1F">初始化</a>有关<code class="codeph">HS_FDS_TRANSACTION_LOG</code>初始化参数的信息的参数。
                           </p>
                        </div>
                        <p>在<a href="config-sqlserver-gateway.html#GUID-E0996D80-51DC-4617-A5D2-3A32ACCEA976">创建恢复帐户和密码</a>中<a href="config-sqlserver-gateway.html#GUID-E0996D80-51DC-4617-A5D2-3A32ACCEA976">创建</a>的用户帐户中<a href="config-sqlserver-gateway.html#GUID-E0996D80-51DC-4617-A5D2-3A32ACCEA976">创建</a>事务日志表。由于事务日志表用于记录网关事务的状态，因此该表必须驻留在进行SQL Server更新的数据库中。此外，必须在恢复帐户的所有者下创建事务日志表。
                        </p>
                        <div class="infoboxnote" id="GUID-ECB2AEC4-DA73-4DA8-9B68-3D0072D911C1__GUID-09C29B53-A881-4375-9ADC-9D3ECB56A9A2">
                           <p class="notep1">注意：</p>
                           <p>要使用事务日志表，必须为该网关的用户授予对该表的特权。</p>
                        </div>
                        <p>要创建事务日志表，请使用位于<span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">\dg4msql\admin</code>目录中的<code class="codeph">dg4msql_tx.sql</code>脚本，其中<span class="italic"><code class="codeph">ORACLE_HOME</code></span>是安装网关的目录。使用isql在MS-DOS提示符下执行脚本，如下所示：</p><pre class="oac_no_warn" dir="ltr">&gt; isql -Urecovery_account -Precovery_account_password [-Sserver] -idg4msql_tx.sql</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="OTGIW1013"></a><div class="props_rev_3"><a id="GUID-90C6A96D-2533-421A-9C01-FECCF4E1FB9E" name="GUID-90C6A96D-2533-421A-9C01-FECCF4E1FB9E"></a><h3 id="OTGIW-GUID-90C6A96D-2533-421A-9C01-FECCF4E1FB9E" class="sect3">为数据字典支持创建SQL Server视图</h3>
               <div>
                  <div class="section">
                     <p>要启用Oracle数据字典转换支持，请使用位于<span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">\dg4msql\admin</code>目录中的<code class="codeph">dg4msql_cvw.sql</code>脚本，其中<span class="italic"><code class="codeph">ORACLE_HOME</code></span>是安装网关的目录。您必须在要通过网关访问的每个SQL Server数据库上运行此脚本。使用isql执行脚本，如下所示：</p><pre class="oac_no_warn" dir="ltr">&gt; isql -Usa_user -Psa_pwd [-Sserver] [-ddatabase] -e -i dg4msql_cvw.sql</pre><p>其中<code class="codeph">sa_user</code>和<code class="codeph">sa_pwd</code>分别是SQL Server系统管理员用户标识和密码。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="OTGIW1014"></a><div class="props_rev_3"><a id="GUID-C01CE5C0-CA85-4A32-8E8D-7D874002EC10" name="GUID-C01CE5C0-CA85-4A32-8E8D-7D874002EC10"></a><h3 id="OTGIW-GUID-C01CE5C0-CA85-4A32-8E8D-7D874002EC10" class="sect3">加密网关初始化参数值</h3>
               <div>
                  <p>网关使用用户标识和密码来访问远程数据库中的信息。必须在网关初始化文件中定义一些用户标识和密码，以处理资源恢复等功能。在当前具有安全意识的环境中，具有可在初始化文件中访问的纯文本密码被认为是不安全的。<code class="codeph">dg4pwd</code>加密实用程序已添加为异构服务的一部分，以帮助提高安全性。此网关可以访问此实用程序。包含敏感值的初始化参数可以以加密形式存储。
                  </p>
                  <div class="infoboxnotealso" id="GUID-C01CE5C0-CA85-4A32-8E8D-7D874002EC10__GUID-6C851E38-911E-40B7-9884-8D3DC6FD898F">
                     <p class="notep1">也可以看看：</p>
                     <p>有关使用此实用程序的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/otgiw&amp;id=HETER4010" target="_blank"><span class="italic">参见“Oracle数据库异构连接用户指南”</span></a> 。
                     </p>
                  </div>
               </div>
            </div><a id="OTGIW1015"></a><div class="props_rev_3"><a id="GUID-6CBFC266-BC16-4014-80AA-433345FEB91E" name="GUID-6CBFC266-BC16-4014-80AA-433345FEB91E"></a><h3 id="OTGIW-GUID-6CBFC266-BC16-4014-80AA-433345FEB91E" class="sect3">配置网关以访问多个SQL Server数据库</h3>
               <div>
                  <div class="section">
                     <p>配置网关以访问多个SQL Server数据库的任务类似于为单个数据库配置网关的任务。配置示例假定以下内容：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>使用默认SID <code class="codeph">dg4msql</code>安装和配置网关</p>
                        </li>
                        <li>
                           <p>网关配置为一个名为<code class="codeph">db1</code> SQL Server数据库</p>
                        </li>
                        <li>
                           <p>正在添加具有IP地址204.179.79.15的主机上名为<code class="codeph">db2</code>和<code class="codeph">db3</code>两个SQL Server数据库</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="OTGIW1231"></a><a id="OTGIW1232"></a><a id="OTGIW1016"></a><div class="props_rev_3"><a id="GUID-F3BA8A77-1C28-474A-8E01-FD9EE14587AA" name="GUID-F3BA8A77-1C28-474A-8E01-FD9EE14587AA"></a><h4 id="OTGIW-GUID-F3BA8A77-1C28-474A-8E01-FD9EE14587AA" class="sect4">多个SQL Server数据库示例：配置网关</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-F3BA8A77-1C28-474A-8E01-FD9EE14587AA__GUID-8F39A177-8F6B-48AD-A050-ACB0C0E606B4">为每个SQL Server数据库选择一个系统ID</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>每个SQL Server数据库都需要一个单独的网关实例。每个实例都需要自己的网关系统ID（SID）。对于此示例，为访问SQL Server数据库的实例选择网关SID：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">dg4msql2</code> <span class="bold"> </span>用于访问数据库<code class="codeph">db2</code>的网关</p>
                           </li>
                           <li>
                              <p><code class="codeph">dg4msql3</code>用于访问数据库<code class="codeph">db3</code>的网关</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F3BA8A77-1C28-474A-8E01-FD9EE14587AA__GUID-9CB893AA-FAAE-4A3A-A545-869FD3FA187C">创建两个初始化参数文件</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>通过复制原始初始化参数文件： <span class="italic"><code class="codeph">ORACLE_HOME</code></span> <code class="codeph">\dg4msql\admin\initdg4msql.ora</code>两次为网关的每个实例创建一个初始化参数文件，用<code class="codeph">db2</code>的网关SID命名一个，用<code class="codeph">db3</code>的网关SID命名另一个：</p><pre class="oac_no_warn" dir="ltr">&gt; cd ORACLE_HOME \ dg4msql \ admin&gt; copy initdg4msql.ora initdg4msql2.ora&gt; copy initdg4msql.ora initdg4msql3.ora</pre><p>更改新文件中<code class="codeph">HS_FDS_CONNECT_INFO</code>参数的值。
                        </p>
                        <p>对于<code class="codeph">init</code> <code class="codeph">dg4msql</code> <code class="codeph">2.ora</code> ，输入以下内容：</p><pre class="oac_no_warn" dir="ltr">HS_FDS_CONNECT_INFO = 204.179.79.15 // db2的</pre><p>对于<code class="codeph">init</code> <code class="codeph">dg4msql</code> <code class="codeph">3.ora</code> ，输入以下内容：</p><pre class="oac_no_warn" dir="ltr">HS_FDS_CONNECT_INFO = 204.179.79.15 // DB3</pre><div class="infoboxnote" id="GUID-F3BA8A77-1C28-474A-8E01-FD9EE14587AA__GUID-07F42AB9-4CF1-4F10-A5B2-FA9792FE3A5A">
                           <p class="notep1">注意：</p>
                           <p>如果您有相同SQL Server数据库的多个网关SID，因为您希望在不同时间使用不同的网关参数设置，请遵循相同的过程。您可以创建多个初始化参数文件，每个文件具有不同的SID和不同的参数设置。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OTGIW1233"></a><a id="OTGIW1017"></a><div class="props_rev_3"><a id="GUID-EE5A6215-49AC-4389-B5A0-B7C0241B82FF" name="GUID-EE5A6215-49AC-4389-B5A0-B7C0241B82FF"></a><h4 id="OTGIW-GUID-EE5A6215-49AC-4389-B5A0-B7C0241B82FF" class="sect4">多个SQL Server数据库示例：配置Oracle Net Listener</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-EE5A6215-49AC-4389-B5A0-B7C0241B82FF__GUID-E1EB78C6-41CE-41A8-B982-99BB39B7CFA6">将条目添加到listener.ora</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在Oracle Net Listener配置文件中添加两个新条目， <span class="bold"> </span> <code class="codeph">listener.ora</code> 。即使多个网关实例访问同一数据库，您也必须为每个网关实例提供一个条目。
                        </p>
                        <p>以下示例首先显示原始安装网关的条目，然后显示新条目：</p><pre class="oac_no_warn" dir="ltr">SID_LIST_LISTENER =（SID_LIST =（SID_DESC =（SID_NAME = dg4msql）（ORACLE_HOME = <span class="italic">oracle_home_directory</span> ）（PROGRAM = dg4msql））（SID_DESC =（SID_NAME = dg4msql2）（ORACLE_HOME = <span class="italic">oracle_home_directory</span> ）（PROGRAM = dg4msql））（SID_DESC =（SID_NAME = dg4msql3） ）（ORACLE_HOME = <span class="italic">oracle_home_directory</span> ）（PROGRAM = dg4msql）））</pre><p>其中， <code class="codeph">oracle_home_directory</code>是网关所在的目录。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OTGIW1018"></a><div class="props_rev_3"><a id="GUID-D2633FAD-B66F-4582-8C6A-B449C17A921B" name="GUID-D2633FAD-B66F-4582-8C6A-B449C17A921B"></a><h4 id="OTGIW-GUID-D2633FAD-B66F-4582-8C6A-B449C17A921B" class="sect4">多个SQL Server数据库示例：停止和启动Oracle Net Listener</h4>
                  <div>
                     <div class="section">
                        <p>执行以下步骤：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>从“ <span class="bold">开始”</span>菜单中选择<span class="bold">“设置”</span> ，“ <span class="bold">控制面板”</span> ，然后选择“ <span class="bold">服务”</span></span></li>
                        <li><span>选择网关的Oracle Net Listener服务。</span></li>
                        <li><span>单击<span class="bold">停止</span> 。</span></li>
                        <li><span>单击<span class="bold">开始</span> 。</span></li>
                     </ol>
                  </div>
               </div><a id="OTGIW1019"></a><div class="props_rev_3"><a id="GUID-A0EC3F07-97F7-4D8F-8600-994CFFB7A4B6" name="GUID-A0EC3F07-97F7-4D8F-8600-994CFFB7A4B6"></a><h4 id="OTGIW-GUID-A0EC3F07-97F7-4D8F-8600-994CFFB7A4B6" class="sect4">多个SQL Server数据库示例：为Gateway Access配置Oracle数据库</h4>
                  <div>
                     <div class="section">
                        <p>将两个连接描述符条目添加到<code class="codeph">tnsnames.ora</code>文件中。即使网关实例访问同一数据库，您也必须为每个网关实例创建一个条目。
                        </p>
                        <p>此示例描述如何在Oracle数据库上为多个网关实例配置Oracle Net。它首先显示原始安装网关的条目，然后是新网关实例的两个条目：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">old_db_using</span> =（DESCRIPTION =（ADDRESS =（PROTOCOL = TCP）（PORT = port_number）（HOST = host_name））（CONNECT_DATA =（SID = dg4msql））（HS = OK）） <span class="italic">new_db2_using</span> =（DESCRIPTION =（ADDRESS =（PROTOCOL = TCP）（PORT = port_number）（HOST = host_name））（CONNECT_DATA =（SID = dg4msql2））（HS = OK）） <span class="italic">new_db3_using</span> =（DESCRIPTION =（ADDRESS =（PROTOCOL = TCP）（PORT = port_number）（HOST = host_name ））（CONNECT_DATA =（SID = dg4msql3））（HS = OK））</pre><p><code class="codeph">PORT</code>的值是正在侦听网关的Oracle Net Listener的TCP / IP端口号。该数字可以在Oracle Net Listener使用的<code class="codeph">listener.ora</code>文件中找到。<code class="codeph">HOST</code>的值是运行网关的计算机的名称。该名称也可以在Oracle Net Listener使用的<code class="codeph">listener.ora</code>文件中找到。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="OTGIW1020"></a><div class="props_rev_3"><a id="GUID-D4BA140A-8FA5-4A38-8295-9EF233D46E3E" name="GUID-D4BA140A-8FA5-4A38-8295-9EF233D46E3E"></a><h4 id="OTGIW-GUID-D4BA140A-8FA5-4A38-8295-9EF233D46E3E" class="sect4">多个SQL Server数据库示例：访问SQL Server数据</h4>
                  <div>
                     <div class="section">
                        <p>输入以下内容<code class="codeph">dg4msql2</code>网关创建数据库链接：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE PUBLIC DATABASE LINK MSQL2 CONNECT TO 2“ <span class="italic">user2”</span> IDENTIFIED BY <span class="italic">“password2”</span> USING'new_db2_using';</pre><p>输入以下内容<code class="codeph">dg4msql3</code>网关创建数据库链接：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE PUBLIC DATABASE LINK MSQL3 CONNECT TO 2 <span class="italic">“user3”</span> IDENTIFIED BY <span class="italic">“password3”</span> USING'new_db3_using';</pre><p>创建数据库链接后，您可以验证与新SQL Server数据库的连接，如下所示：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM ALL_USERS @ MSQL2;</pre><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM ALL_USERS @ MSQL3;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
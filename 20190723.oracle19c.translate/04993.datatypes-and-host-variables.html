<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>数据类型和主机变量</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="c-c-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T03:52:01-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96467-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="database-concepts.html" title="Previous" type="text/html"></link>
      <link rel="next" href="advanced-topics.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Pro*C/C++ Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNPCC"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="database-concepts.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="advanced-topics.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="introduction-and-concepts.html" property="item" typeof="WebPage"><span property="name">介绍和概念</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">数据类型和主机变量</li>
            </ol>
            <a id="GUID-18395E0D-263A-49BF-9DAB-DA0C8775B9FC" name="GUID-18395E0D-263A-49BF-9DAB-DA0C8775B9FC"></a><a id="LNPCC3154"></a>
            
            <h2 id="LNPCC-GUID-18395E0D-263A-49BF-9DAB-DA0C8775B9FC" class="sect2"><span class="enumeration_chapter">4种</span>数据类型和主机变量</h2>
         </header>
         <div class="ind">
            <div>
               <p>本章提供编写Pro * C / C ++程序所需的基本信息。本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="datatypes-and-host-variables.html#GUID-D3262C5B-4A7F-44C7-A171-DC16441A31ED">Oracle数据类型</a></p>
                  </li>
                  <li>
                     <p><a href="datatypes-and-host-variables.html#GUID-EAD2DF4C-63FF-4B67-9673-490128B98D85">主机变量</a></p>
                  </li>
                  <li>
                     <p><a href="datatypes-and-host-variables.html#GUID-1A9B5679-B15F-4869-8B7A-598BABEA3873">指标变量</a></p>
                  </li>
                  <li>
                     <p><a href="datatypes-and-host-variables.html#GUID-33AC6FC8-EA9D-4C7F-ADAC-D01A0DF4E281">VARCHAR变量</a></p>
                  </li>
                  <li>
                     <p><a href="datatypes-and-host-variables.html#GUID-8561AF60-861B-4EA6-8ECF-EF460FDD3A76">游标变量</a></p>
                  </li>
                  <li>
                     <p><a href="datatypes-and-host-variables.html#GUID-4AF4D5FD-C41E-4597-BC33-6CF0266A5E84">上下文变量</a></p>
                  </li>
                  <li>
                     <p><a href="datatypes-and-host-variables.html#GUID-F78340AF-531F-4D1F-8D59-5C5860E7C367">通用ROWID</a></p>
                  </li>
                  <li>
                     <p><a href="datatypes-and-host-variables.html#GUID-755B5F00-C7D7-4F3F-87FD-2AF5E5703D36">主机结构</a></p>
                  </li>
                  <li>
                     <p><a href="datatypes-and-host-variables.html#GUID-44E37B7E-C78E-4F3E-87D5-19152BDCE1B8">指针变量</a></p>
                  </li>
                  <li>
                     <p><a href="datatypes-and-host-variables.html#GUID-2CCB3206-DE6F-4C67-B44E-83BB14C09BF3">全球化支持</a></p>
                  </li>
                  <li>
                     <p><a href="datatypes-and-host-variables.html#GUID-B7DF37DC-3027-47E3-8F51-1910BAEF7E52">NCHAR变量</a></p>
                  </li>
               </ul>
               <p>本章还包括几个可以学习的完整演示程序。这些程序说明了所描述的技术。它们可以在您的<code class="codeph">demo</code>目录中在线获得，因此您可以编译和运行它们，并根据自己的需要进行修改。
               </p>
            </div><a id="LNPCC3155"></a><div class="props_rev_3"><a id="GUID-D3262C5B-4A7F-44C7-A171-DC16441A31ED" name="GUID-D3262C5B-4A7F-44C7-A171-DC16441A31ED"></a><h3 id="LNPCC-GUID-D3262C5B-4A7F-44C7-A171-DC16441A31ED" class="sect3"><span class="enumeration_section">4.1</span> Oracle数据类型</h3>
               <div>
                  <p>Oracle识别两种数据类型： <span class="italic">内部</span>和<span class="italic">外部</span> 。内部数据类型指定Oracle如何在数据库表中存储列值，以及用于表示伪列值的格式，如NULL，SYSDATE，USER等。外部数据类型指定用于在输入和输出主机变量中存储值的格式。
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../sqlrf/Data-Types.html#SQLRF-GUID-7B72E154-677A-4342-A1EA-C74C1EA928E6" target="_blank"><span class="italic">Oracle内置数据类型</span></a></li>
                     </ul>
                  </div>
               </div><a id="LNPCC3157"></a><a id="LNPCC3156"></a><div class="props_rev_3"><a id="GUID-76259B54-2C1C-4673-81F5-E02F636D26F1" name="GUID-76259B54-2C1C-4673-81F5-E02F636D26F1"></a><h4 id="LNPCC-GUID-76259B54-2C1C-4673-81F5-E02F636D26F1" class="sect4"><span class="enumeration_section">4.1.1</span>内部数据类型</h4>
                  <div>
                     <div class="section">
                        <p>对于存储在数据库列中的值，Oracle使用<a href="datatypes-and-host-variables.html#GUID-76259B54-2C1C-4673-81F5-E02F636D26F1__G39946" title="Oracle内部类型">表4-1中</a>显示的内部数据类型</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-76259B54-2C1C-4673-81F5-E02F636D26F1__G39946">
                        <p class="titleintable">表4-1 Oracle内部数据类型</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Oracle内部数据类型" width="100%" border="1" summary="Oracle Internal Types" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="23%" id="d16109e130">名称</th>
                                 <th align="left" valign="bottom" width="77%" id="d16109e133">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d16109e138" headers="d16109e130 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d16109e138 d16109e133 ">
                                    <p>可变长度字符串，&lt;= 4000字节。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d16109e145" headers="d16109e130 ">
                                    <p>NVARCHAR2或NCHAR变化</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d16109e145 d16109e133 ">
                                    <p>可变长度单字节或国家字符串，&lt;= 4000字节。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d16109e152" headers="d16109e130 ">
                                    <p>数</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d16109e152 d16109e133 ">
                                    <p>具有精度和比例的数字值，以base-100格式表示。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d16109e159" headers="d16109e130 ">
                                    <p>长</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d16109e159 d16109e133 ">
                                    <p>可变长度字符串&lt;= 2 ** 31-1个字节。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d16109e166" headers="d16109e130 ">
                                    <p>BINARY_FLOAT</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d16109e166 d16109e133 ">
                                    <p>32位浮点数，4个字节。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d16109e173" headers="d16109e130 ">
                                    <p>BINARY_DOUBLE</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d16109e173 d16109e133 ">
                                    <p>64位浮点数，8个字节。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d16109e180" headers="d16109e130 ">
                                    <p>TIMESTAMP</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d16109e180 d16109e133 ">
                                    <p>日期的年，月和日值，以及时间的小时，分钟和秒值，7或11个字节。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d16109e187" headers="d16109e130 ">
                                    <p>日期</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d16109e187 d16109e133 ">
                                    <p>固定长度日期+时间值，7个字节。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d16109e194" headers="d16109e130 ">
                                    <p>间隔年</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d16109e194 d16109e133 ">
                                    <p>存储一段时间，以年和月为单位，5个字节。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d16109e201" headers="d16109e130 ">
                                    <p>间隔日</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d16109e201 d16109e133 ">
                                    <p>以天，小时，分钟和秒为单位存储一段时间，11个字节。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d16109e208" headers="d16109e130 ">
                                    <p>生的</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d16109e208 d16109e133 ">
                                    <p>可变长度二进制数据，&lt;= 2000字节。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d16109e216" headers="d16109e130 ">
                                    <p>LONG RAW</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d16109e216 d16109e133 ">
                                    <p>可变长度二进制数据，&lt;= 2 ** 31-1字节。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d16109e223" headers="d16109e130 ">
                                    <p>ROWID</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d16109e223 d16109e133 ">
                                    <p>二进制值。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d16109e230" headers="d16109e130 ">
                                    <p>UROWID</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d16109e230 d16109e133 ">
                                    <p>二进制值，&lt;= 4000字节。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d16109e237" headers="d16109e130 ">
                                    <p>CHAR</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d16109e237 d16109e133 ">
                                    <p>定长字符串，&lt;= 2000字节。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d16109e244" headers="d16109e130 ">
                                    <p>NCHAR</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d16109e244 d16109e133 ">
                                    <p>固定长度的单字节或国家字符串，&lt;= 2000字节。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d16109e251" headers="d16109e130 ">
                                    <p>CLOB</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d16109e251 d16109e133 ">
                                    <p>字符数据，&lt;= 4 GB。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d16109e258" headers="d16109e130 ">
                                    <p>NCLOB</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d16109e258 d16109e133 ">
                                    <p>国家字符集数据，&lt;= 4 GB。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d16109e265" headers="d16109e130 ">
                                    <p>BLOB</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d16109e265 d16109e133 ">
                                    <p>二进制数据，&lt;= 4 GB。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d16109e272" headers="d16109e130 ">
                                    <p>BFILE</p>
                                 </td>
                                 <td align="left" valign="top" width="77%" headers="d16109e272 d16109e133 ">
                                    <p>外部文件二进制数据，&lt;= 4 GB。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>这些内部数据类型可能与C数据类型完全不同。例如，C没有与Oracle NUMBER数据类型等效的数据类型。但是，NUMBER可以在C数据类型之间转换，例如<span class="bold">float</span>和<span class="bold">double</span> ，但有一些限制。例如，Oracle NUMBER数据类型允许最多38个十进制数字的精度，而当前的C实现不能表示具有该精度的<span class="bold">双</span>精度。
                        </p>
                        <p>Oracle NUMBER数据类型完全表示值（在精度限制内），而浮点格式不能精确表示10.0等值。</p>
                        <p>使用LOB数据类型存储非结构化数据（文本，图形图像，视频剪辑或声音波形）。BFILE数据存储在数据库外部的操作系统文件中。LOB类型存储指定数据位置的<span class="italic">定位器</span> 。
                        </p>
                        <p>NCHAR和NVARCHAR2用于存储多字节字符数据。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="about-LOBs.html#GUID-DEBB0C35-161B-4725-BE0D-A209B64B98A2">的LOB</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC3159"></a><a id="LNPCC3158"></a><div class="props_rev_3"><a id="GUID-D1A89D46-9C1E-4A50-A6D6-B8FA9F784952" name="GUID-D1A89D46-9C1E-4A50-A6D6-B8FA9F784952"></a><h4 id="LNPCC-GUID-D1A89D46-9C1E-4A50-A6D6-B8FA9F784952" class="sect4"><span class="enumeration_section">4.1.2</span>外部数据类型</h4>
                  <div>
                     <p>如<a href="datatypes-and-host-variables.html#GUID-D1A89D46-9C1E-4A50-A6D6-B8FA9F784952__g39803" title="Oracle外部数据类型">表4-2</a>所示，外部数据类型包括所有内部数据类型以及与C结构紧密匹配的几种数据类型。例如，STRING外部数据类型引用C以null结尾的字符串。
                     </p>
                     <div class="tblformal" id="GUID-D1A89D46-9C1E-4A50-A6D6-B8FA9F784952__g39803">
                        <p class="titleintable">表4-2 Oracle外部数据类型</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Oracle外部数据类型" width="100%" border="1" summary="Oracle External Datatypes" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d16109e336">名称</th>
                                 <th align="left" valign="bottom" width="76%" id="d16109e339">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e344" headers="d16109e336 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d16109e344 d16109e339 ">
                                    <p>可变长度字符串，&lt;= 65535字节。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e351" headers="d16109e336 ">
                                    <p>数</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d16109e351 d16109e339 ">
                                    <p>十进制数，使用base-100格式表示。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e358" headers="d16109e336 ">
                                    <p>整数</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d16109e358 d16109e339 ">
                                    <p>有符号整数。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e365" headers="d16109e336 ">
                                    <p>浮动</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d16109e365 d16109e339 ">
                                    <p>实数。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e372" headers="d16109e336 ">
                                    <p>串</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d16109e372 d16109e339 ">
                                    <p>以空值终止的可变长度字符串。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e379" headers="d16109e336 ">
                                    <p>VARNUM</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d16109e379 d16109e339 ">
                                    <p>十进制数，如NUMBER，但包括表示长度组件。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e386" headers="d16109e336 ">
                                    <p>长</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d16109e386 d16109e339 ">
                                    <p>固定长度的字符串，最多2 ** 31-1个字节。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e393" headers="d16109e336 ">
                                    <p>VARCHAR</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d16109e393 d16109e339 ">
                                    <p>可变长度字符串，&lt;= 65533字节。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e400" headers="d16109e336 ">
                                    <p>ROWID</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d16109e400 d16109e339 ">
                                    <p>二进制值，外部长度取决于系统。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e407" headers="d16109e336 ">
                                    <p>日期</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d16109e407 d16109e339 ">
                                    <p>固定长度的日期/时间值，7个字节。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e414" headers="d16109e336 ">
                                    <p>VARRAW</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d16109e414 d16109e339 ">
                                    <p>可变长度二进制数据，&lt;= 65533字节。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e422" headers="d16109e336 ">
                                    <p>生的</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d16109e422 d16109e339 ">
                                    <p>固定长度的二进制数据，&lt;= 65535字节。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e429" headers="d16109e336 ">
                                    <p>LONG RAW</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d16109e429 d16109e339 ">
                                    <p>固定长度的二进制数据，&lt;= 2 ** 31-1个字节。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e436" headers="d16109e336 ">
                                    <p>UNSIGNED</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d16109e436 d16109e339 ">
                                    <p>无符号整数。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e443" headers="d16109e336 ">
                                    <p>LONG VARCHAR</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d16109e443 d16109e339 ">
                                    <p>可变长度字符串，&lt;= 2 ** 31-5字节。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e450" headers="d16109e336 ">
                                    <p>LONG VARRAW</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d16109e450 d16109e339 ">
                                    <p>可变长度二进制数据，&lt;= 2 ** 31-5字节。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e457" headers="d16109e336 ">
                                    <p>CHAR</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d16109e457 d16109e339 ">
                                    <p>定长字符串，&lt;= 65535字节。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e464" headers="d16109e336 ">
                                    <p>CHARZ</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d16109e464 d16109e339 ">
                                    <p>固定长度，以空值终止的字符串，&lt;= 65534字节。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e471" headers="d16109e336 ">
                                    <p>CHARF</p>
                                 </td>
                                 <td align="left" valign="top" width="76%" headers="d16109e471 d16109e339 ">
                                    <p>在TYPE或VAR语句中用于强制CHAR默认为CHAR，而不是VARCHAR2或CHARZ。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>下面是Oracle数据类型的简要说明。</p>
                  </div><a id="LNPCC3160"></a><div class="props_rev_3"><a id="GUID-DD134B61-14E1-44E9-A8B1-F23AC2C9317A" name="GUID-DD134B61-14E1-44E9-A8B1-F23AC2C9317A"></a><h5 id="LNPCC-GUID-DD134B61-14E1-44E9-A8B1-F23AC2C9317A" class="sect5"><span class="enumeration_section">4.1.2.1</span> VARCHAR2</h5>
                     <div>
                        <p>您使用VARCHAR2数据类型来存储可变长度字符串。VARCHAR2值的最大长度为64K字节。</p>
                        <p>您可以指定VARCHAR2（ <span class="italic">n</span> ）值的最大长度（以字节为单位），而不是字符。因此，如果VARCHAR2（ <span class="italic">n</span> ）变量存储多字节字符，则其最大长度可以小于<span class="italic">n个</span>字符。
                        </p>
                        <p>使用CHAR_MAP = VARCHAR2选项进行预编译时，Oracle会将VARCHAR2数据类型分配给您声明为<span class="bold">char [n]</span>或<span class="bold">char的</span>所有主机变量<span class="bold">。</span></p>
                     </div><a id="LNPCC3161"></a><div class="props_rev_3"><a id="GUID-657E810C-A55E-4888-81A2-1DB9DCF0C226" name="GUID-657E810C-A55E-4888-81A2-1DB9DCF0C226"></a><h6 id="LNPCC-GUID-657E810C-A55E-4888-81A2-1DB9DCF0C226" class="sect6"><span class="enumeration_section">4.1.2.1.1</span>输入</h6>
                        <div>
                           <p>Oracle读取为输入主机变量指定的字节数，删除任何尾随空白，然后将输入值存储在目标数据库列中。小心。未初始化的主机变量可以包含NULL。因此，始终将字符输入主变量空白填充到其声明的长度，并且不对其进行空值终止。</p>
                           <p>如果输入值超过数据库列的已定义宽度，则Oracle会生成错误。如果输入值只包含空格，则Oracle会将其视为NULL。</p>
                           <p>如果字符值表示有效数字，Oracle可以将字符值转换为NUMBER列值。否则，Oracle会生成错误。</p>
                        </div>
                     </div><a id="LNPCC3162"></a><div class="props_rev_3"><a id="GUID-FE3989DC-3E1B-42A2-B7ED-0C7FB4A6A08B" name="GUID-FE3989DC-3E1B-42A2-B7ED-0C7FB4A6A08B"></a><h6 id="LNPCC-GUID-FE3989DC-3E1B-42A2-B7ED-0C7FB4A6A08B" class="sect6"><span class="enumeration_section">4.1.2.1.2</span>关于输出</h6>
                        <div>
                           <p>Oracle返回为输出主机变量指定的字节数，如有必要，返回空白填充。然后，它将输出值分配给目标主机变量。如果返回NULL，则Oracle使用空白填充主机变量。</p>
                           <p>如果输出值长于主机变量的声明长度，Oracle会在将值分配给主变量之前截断该值。如果存在与主变量关联的指示符变量，Oracle会将其设置为输出值的原始长度。</p>
                           <p>Oracle可以将NUMBER列值转换为字符值。字符主变量的长度决定了精度。如果主变量太短，则使用科学记数法。例如，如果将列值123456789选择为长度为6的字符主机变量，则Oracle返回值“1.2E08”。如果显式选择NULL，则host变量中的值是不确定的。需要检查指示符变量的值是否为NULL-ness。</p>
                        </div>
                     </div>
                  </div><a id="LNPCC3163"></a><div class="props_rev_3"><a id="GUID-859E1818-94F2-4179-A7AC-D515BA1D1218" name="GUID-859E1818-94F2-4179-A7AC-D515BA1D1218"></a><h5 id="LNPCC-GUID-859E1818-94F2-4179-A7AC-D515BA1D1218" class="sect5"><span class="enumeration_section">4.1.2.2</span>号码</h5>
                     <div>
                        <p>您使用NUMBER数据类型来存储固定或浮点数。您可以指定精度和比例。NUMBER值的最大精度为38。幅度范围是1.0E-130到9.99 ... 9E125（38个9后跟88个零）。比例范围可以从-84到127。</p>
                        <p>NUMBER值以可变长度格式存储，从指数字节开始，后跟19个尾数字节。指数字节的高位是一个符号位，设置为正数。低7位代表幅度。</p>
                        <p>尾数形成一个38位数字，每个字节代表基数为100格式的2位数字。尾数的符号由第一个（最左侧）字节的值指定。如果大于101，则尾数为负，并且尾数的第一个数字等于最左边的字节减去101。</p>
                        <p>在输出时，主机变量包含Oracle内部表示的数字。为了容纳尽可能大的数字，输出主机变量必须是22个字节长。仅返回用于表示该数字的字节。Oracle没有空白填充或空终止输出值。如果需要知道返回值的长度，请改用VARNUM数据类型。</p>
                        <p>很少需要使用此外部数据类型。</p>
                     </div>
                  </div><a id="LNPCC3164"></a><div class="props_rev_3"><a id="GUID-40B0390D-0066-4D4B-9847-65D862BB5B15" name="GUID-40B0390D-0066-4D4B-9847-65D862BB5B15"></a><h5 id="LNPCC-GUID-40B0390D-0066-4D4B-9847-65D862BB5B15" class="sect5"><span class="enumeration_section">4.1.2.3</span> INTEGER</h5>
                     <div>
                        <p>您使用INTEGER数据类型来存储没有小数部分的数字。整数是带符号的2字节，4字节或8字节的二进制数。单词中字节的顺序取决于系统。您必须为输入和输出主变量指定长度。在输出时，如果列值是实数，则Oracle会截断任何小数部分。<a id="d16109e585" class="indexterm-anchor"></a></p>
                     </div>
                  </div><a id="LNPCC3165"></a><div class="props_rev_3"><a id="GUID-71A1F0DE-5798-4117-A517-376BF86B8A5C" name="GUID-71A1F0DE-5798-4117-A517-376BF86B8A5C"></a><h5 id="LNPCC-GUID-71A1F0DE-5798-4117-A517-376BF86B8A5C" class="sect5"><span class="enumeration_section">4.1.2.4</span> FLOAT</h5>
                     <div>
                        <p>您可以使用FLOAT数据类型来存储具有小数部分或超过INTEGER数据类型容量的数字。该数字使用计算机的浮点格式表示，通常需要4或8个字节的存储空间。您必须为输入和输出主变量指定长度。</p>
                        <p>Oracle可以比大多数浮点实现更精确地表示数字，因为Oracle数字的内部格式是十进制的。这在获取FLOAT变量时会导致精度损失。</p>
                     </div>
                  </div><a id="LNPCC3166"></a><div class="props_rev_3"><a id="GUID-E49A1D74-564B-4B28-9556-51BCD426A987" name="GUID-E49A1D74-564B-4B28-9556-51BCD426A987"></a><h5 id="LNPCC-GUID-E49A1D74-564B-4B28-9556-51BCD426A987" class="sect5"><span class="enumeration_section">4.1.2.5</span> STRING</h5>
                     <div>
                        <p>STRING数据类型与VARCHAR2数据类型类似，只是STRING值始终以null结尾。使用CHAR_MAP = STRING选项进行预编译时，Oracle会将STRING数据类型分配给您声明为char [n]或char的所有主机变量。</p>
                     </div><a id="LNPCC3167"></a><div class="props_rev_3"><a id="GUID-0CA5325F-84DF-4F4E-85D3-A23B0D917708" name="GUID-0CA5325F-84DF-4F4E-85D3-A23B0D917708"></a><h6 id="LNPCC-GUID-0CA5325F-84DF-4F4E-85D3-A23B0D917708" class="sect6"><span class="enumeration_section">4.1.2.5.1</span>输入</h6>
                        <div>
                           <p>Oracle使用指定的长度来限制空终止符的扫描。如果未找到空终止符，Oracle将生成错误。如果未指定长度，则Oracle假定最大长度为2000个字节。STRING值的最小长度为2个字节。如果第一个字符是空终止符且指定的长度为2，则Oracle将插入null，除非该列定义为NOT NULL。如果列定义为NOT NULL，则会发生错误。全空值保存完整。</p>
                        </div>
                     </div><a id="LNPCC3168"></a><div class="props_rev_3"><a id="GUID-41AA31E3-6BCA-4717-97BE-8074606FB2A5" name="GUID-41AA31E3-6BCA-4717-97BE-8074606FB2A5"></a><h6 id="LNPCC-GUID-41AA31E3-6BCA-4717-97BE-8074606FB2A5" class="sect6"><span class="enumeration_section">4.1.2.5.2</span>关于输出</h6>
                        <div>
                           <p>Oracle将空字节附加到返回的最后一个字符。如果字符串长度超过指定的长度，Oracle会截断输出值并附加一个空字节。如果选择NULL，则Oracle在第一个字符位置返回空字节。如果显式选择NULL，则host变量中的值是不确定的。需要检查指示符变量的值是否为NULL-ness。<a id="d16109e649" class="indexterm-anchor"></a></p>
                        </div>
                     </div>
                  </div><a id="LNPCC3169"></a><div class="props_rev_3"><a id="GUID-A702DB5D-10E3-4C5C-93B4-085442538ACE" name="GUID-A702DB5D-10E3-4C5C-93B4-085442538ACE"></a><h5 id="LNPCC-GUID-A702DB5D-10E3-4C5C-93B4-085442538ACE" class="sect5"><span class="enumeration_section">4.1.2.6</span> VARNUM</h5>
                     <div>
                        <p>VARNUM数据类型与NUMBER数据类型类似，只是VARNUM变量的第一个字节存储表示的长度。</p>
                        <p>在输入时，必须将主变量的第一个字节设置为值的长度。在输出时，主机变量包含长度，后跟Oracle内部表示的数字。为了容纳尽可能大的数字，主机变量必须是22个字节长。将列值选择到VARNUM主变量后，可以检查第一个字节以获取值的长度。</p>
                        <p>通常，没有理由使用此数据类型。</p>
                     </div>
                  </div><a id="LNPCC3170"></a><div class="props_rev_3"><a id="GUID-96F50F96-98C2-47EC-9C78-AD569D66C6B7" name="GUID-96F50F96-98C2-47EC-9C78-AD569D66C6B7"></a><h5 id="LNPCC-GUID-96F50F96-98C2-47EC-9C78-AD569D66C6B7" class="sect5"><span class="enumeration_section">4.1.2.7</span>长</h5>
                     <div>
                        <p>您使用LONG数据类型来存储固定长度的字符串。</p>
                        <p>LONG数据类型与VARCHAR2数据类型类似，只是LONG值的最大长度为2147483647字节或2千兆字节。</p>
                     </div>
                  </div><a id="LNPCC3171"></a><div class="props_rev_3"><a id="GUID-E92CE61C-DE5A-4887-9EED-2D99C0774CF5" name="GUID-E92CE61C-DE5A-4887-9EED-2D99C0774CF5"></a><h5 id="LNPCC-GUID-E92CE61C-DE5A-4887-9EED-2D99C0774CF5" class="sect5"><span class="enumeration_section">4.1.2.8</span> VARCHAR</h5>
                     <div>
                        <p>您使用VARCHAR数据类型来存储可变长度字符串。VARCHAR变量具有2字节长度字段，后跟&lt;= 65533字节字符串字段。但是，对于VARCHAR数组元素，字符串字段的最大长度为65530字节。指定VARCHAR变量的长度时，请确保为length字段包含2个字节。对于较长的字符串，请使用LONG VARCHAR数据类型。如果显式选择NULL，则host变量中的值是不确定的。需要检查指示符变量的值是否为NULL-ness。</p>
                     </div>
                  </div><a id="LNPCC3172"></a><div class="props_rev_3"><a id="GUID-8F51D5B4-AD62-4468-A789-20C161BAC894" name="GUID-8F51D5B4-AD62-4468-A789-20C161BAC894"></a><h5 id="LNPCC-GUID-8F51D5B4-AD62-4468-A789-20C161BAC894" class="sect5"><span class="enumeration_section">4.1.2.9</span> ROWID</h5>
                     <div>
                        <p>索引组织表中的行没有永久物理地址。使用与物理ROWID相同的语法访问逻辑ROWID。因此，物理ROWID包括<span class="italic">数据对象编号</span> （同一段中的模式对象）。
                        </p>
                        <p><a id="d16109e731" class="indexterm-anchor"></a><a id="d16109e733" class="indexterm-anchor"></a>为了支持逻辑和物理ROWID（以及非Oracle表的<span class="italic">ROWID</span> ），定义了<span class="italic">通用ROWID</span> 。
                        </p>
                        <p>您可以使用字符宿主变量以可读格式存储rowid。当您将rowid SELECT或FETCH转换为字符主机变量时，Oracle会将二进制值转换为18字节的字符串，并以格式返回</p><pre class="oac_no_warn" dir="ltr">BBBBBBBB.RRRR.FFFF</pre><p>其中BBBBBBBB是数据库文件中的块，RRRR是块中的行（第一行是0），FFFF是数据库文件。这些数字是十六进制的。例如，rowid</p><pre class="oac_no_warn" dir="ltr">0000000E.000A.0007指向第7个数据库文件中第15个块的第11行。</pre><p>通常，您将rowid FETCH转换为字符主机变量，然后将主机变量与UPDATE或DELETE语句的WHERE子句中的ROWID伪列进行比较。这样，您可以识别游标提取的最新行。</p>
                        <div class="infoboxnote" id="GUID-8F51D5B4-AD62-4468-A789-20C161BAC894__GUID-A9019DAC-A6CB-49A3-8A81-83EDBB0C751B">
                           <p class="notep1">注意：</p>
                           <p>如果您需要完全可移植性或应用程序使用Oracle Open Gateway技术与非Oracle数据库通信，请在声明主机变量时指定最大长度为256（而不是18）字节。虽然您不能假设主机变量的内容，但主机变量在SQL语句中将正常运行。 <a id="d16109e754" class="indexterm-anchor"></a> 
                           </p>
                        </div>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="datatypes-and-host-variables.html#GUID-F78340AF-531F-4D1F-8D59-5C5860E7C367">通用ROWID</a></li>
                              <li><a href="host-arrays.html#GUID-DBA71301-C6C4-47C0-BAB5-1B6B221AB46E">关于模仿当前的</a></li>
                           </ul>
                        </div>
                     </div>
                     
                  </div><a id="LNPCC3174"></a><a id="LNPCC3173"></a><div class="props_rev_3"><a id="GUID-76807ADC-86A6-4DED-9CB7-0A9C6D693AA8" name="GUID-76807ADC-86A6-4DED-9CB7-0A9C6D693AA8"></a><h5 id="LNPCC-GUID-76807ADC-86A6-4DED-9CB7-0A9C6D693AA8" class="sect5"><span class="enumeration_section">4。1。2。10</span>日期</h5>
                     <div>
                        <p>您可以使用DATE数据类型在7字节固定长度字段中存储日期和时间。如<a href="datatypes-and-host-variables.html#GUID-76807ADC-86A6-4DED-9CB7-0A9C6D693AA8__BEHEDBHA" title="日期格式">表4-3</a>所示，世纪，年，月，日，小时（24小时格式），分钟和秒从左到右依次存储。
                        </p>
                        <div class="tblformal" id="GUID-76807ADC-86A6-4DED-9CB7-0A9C6D693AA8__BEHEDBHA">
                           <p class="titleintable">表4-3日期格式</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="日期格式" width="100%" border="1" summary="Date Format" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="26%" id="d16109e813">日期数据类型</th>
                                    <th align="left" valign="bottom" width="13%" id="d16109e816">世纪</th>
                                    <th align="left" valign="bottom" width="10%" id="d16109e819">年</th>
                                    <th align="left" valign="bottom" width="10%" id="d16109e822">月</th>
                                    <th align="left" valign="bottom" width="8%" id="d16109e825">天</th>
                                    <th align="left" valign="bottom" width="8%" id="d16109e828">小时</th>
                                    <th align="left" valign="bottom" width="11%" id="d16109e831">分钟</th>
                                    <th align="left" valign="bottom" width="15%" id="d16109e834">第二</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d16109e839" headers="d16109e813 ">
                                       <p><span class="bold">字节</span></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d16109e839 d16109e816 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d16109e839 d16109e819 ">
                                       <p>2</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d16109e839 d16109e822 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d16109e839 d16109e825 ">
                                       <p>4</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d16109e839 d16109e828 ">
                                       <p>五</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d16109e839 d16109e831 ">
                                       <p>6</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d16109e839 d16109e834 ">
                                       <p>7</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d16109e865" headers="d16109e813 ">
                                       <p><span class="bold">含义</span></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d16109e865 d16109e816 ">
                                       <p>世纪</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d16109e865 d16109e819 ">
                                       <p>年</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d16109e865 d16109e822 ">
                                       <p>月</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d16109e865 d16109e825 ">
                                       <p>天</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d16109e865 d16109e828 ">
                                       <p>小时</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d16109e865 d16109e831 ">
                                       <p>分钟</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d16109e865 d16109e834 ">
                                       <p>第二</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d16109e891" headers="d16109e813 ">
                                       <p><span class="bold">例</span></p>
                                       <p><span class="bold">1994年10月17日下午1:23:12</span></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d16109e891 d16109e816 ">
                                       <p>119</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d16109e891 d16109e819 ">
                                       <p>194</p>
                                    </td>
                                    <td align="left" valign="top" width="10%" headers="d16109e891 d16109e822 ">
                                       <p>10</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d16109e891 d16109e825 ">
                                       <p>17</p>
                                    </td>
                                    <td align="left" valign="top" width="8%" headers="d16109e891 d16109e828 ">
                                       <p>14</p>
                                    </td>
                                    <td align="left" valign="top" width="11%" headers="d16109e891 d16109e831 ">
                                       <p>24</p>
                                    </td>
                                    <td align="left" valign="top" width="15%" headers="d16109e891 d16109e834 ">
                                       <p>13</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>世纪和年份字节超过100表示法。小时，分钟和秒都超过1表示法。共同时代（BCE）之前的日期少于100。该纪元是公元前4712年1月1日。对于这个日期，世纪字节是53，年字节是88。小时字节范围为1到24。分钟和秒的范围从1到60。时间默认为午夜（1,1,1）。</p>
                        <p>通常，没有理由使用DATE数据类型。</p>
                     </div>
                  </div><a id="LNPCC3175"></a><div class="props_rev_3"><a id="GUID-B36B8E5E-DF6B-457F-8FA7-B1BEAA30EA51" name="GUID-B36B8E5E-DF6B-457F-8FA7-B1BEAA30EA51"></a><h5 id="LNPCC-GUID-B36B8E5E-DF6B-457F-8FA7-B1BEAA30EA51" class="sect5"><span class="enumeration_section">4.1.2.11</span> RAW</h5>
                     <div>
                        <p>您使用RAW数据类型来存储二进制数据或字节字符串。RAW值的最大长度为65535字节。</p>
                        <p>RAW数据与CHARACTER数据类似，不同之处在于Oracle不会假定RAW数据的含义，并且在将RAW数据从一个系统传输到另一个系统时不进行字符集转换。</p>
                     </div>
                  </div><a id="LNPCC3176"></a><div class="props_rev_3"><a id="GUID-2B2B52E3-3F93-4C01-9FF3-8E105F500934" name="GUID-2B2B52E3-3F93-4C01-9FF3-8E105F500934"></a><h5 id="LNPCC-GUID-2B2B52E3-3F93-4C01-9FF3-8E105F500934" class="sect5"><span class="enumeration_section">4.1.2.12</span> VARRAW</h5>
                     <div>
                        <p>您使用VARRAW数据类型来存储可变长度的二进制数据或字节字符串。VARRAW数据类型与RAW数据类型类似，不同之处在于VARRAW变量具有2字节长度字段，后跟数据字段&lt;= 65533字节长度。对于较长的字符串，请使用LONG VARRAW数据类型。</p>
                        <p>指定VARRAW变量的长度时，请确保为length字段包含2个字节。变量的前两个字节必须可解释为整数。</p>
                        <p>要获取VARRAW变量的长度，只需引用其长度字段即可。</p>
                     </div>
                  </div><a id="LNPCC3177"></a><div class="props_rev_3"><a id="GUID-ABC1DB4D-CBBC-42E0-AAF3-1116AF9B749E" name="GUID-ABC1DB4D-CBBC-42E0-AAF3-1116AF9B749E"></a><h5 id="LNPCC-GUID-ABC1DB4D-CBBC-42E0-AAF3-1116AF9B749E" class="sect5"><span class="enumeration_section">4.1.2.13</span> LONG RAW</h5>
                     <div>
                        <p>您使用LONG RAW数据类型来存储二进制数据或字节字符串。LONG RAW值的最大长度为2147483647字节或2千兆字节。</p>
                        <p>LONG RAW数据类似于LONG数据，不同之处在于Oracle不会假设LONG RAW数据的含义，并且在将LONG RAW数据从一个系统传输到另一个系统时不进行字符集转换。</p>
                     </div>
                  </div><a id="LNPCC3178"></a><div class="props_rev_3"><a id="GUID-E40A88A2-435B-4232-A89E-DE575075B209" name="GUID-E40A88A2-435B-4232-A89E-DE575075B209"></a><h5 id="LNPCC-GUID-E40A88A2-435B-4232-A89E-DE575075B209" class="sect5"><span class="enumeration_section">4.1.2.14未</span>签名</h5>
                     <div>
                        <p>您使用UNSIGNED数据类型来存储无符号整数。无符号整数是2或4字节的二进制数。单词中字节的顺序取决于系统。您必须为输入和输出主变量指定长度。在输出时，如果列值是浮点数，则Oracle会截断小数部分。</p>
                     </div>
                  </div><a id="LNPCC3179"></a><div class="props_rev_3"><a id="GUID-C938DF5F-CCE5-4AD2-B5B0-D2ABE670888D" name="GUID-C938DF5F-CCE5-4AD2-B5B0-D2ABE670888D"></a><h5 id="LNPCC-GUID-C938DF5F-CCE5-4AD2-B5B0-D2ABE670888D" class="sect5"><span class="enumeration_section">4.1.2.15</span> LONG VARCHAR</h5>
                     <div>
                        <p>您使用LONG VARCHAR数据类型来存储可变长度字符串。LONG VARCHAR变量具有4字节长度字段，后跟字符串字段。字符串字段的最大长度为2147483643（2 ** 31  -  5）字节。指定要在VAR或TYPE语句中使用的LONG VARCHAR的长度时，请不要包含4个长度字节。</p>
                     </div>
                  </div><a id="LNPCC3180"></a><div class="props_rev_3"><a id="GUID-CD95A1F3-0B46-423D-8F4D-1CD40869727C" name="GUID-CD95A1F3-0B46-423D-8F4D-1CD40869727C"></a><h5 id="LNPCC-GUID-CD95A1F3-0B46-423D-8F4D-1CD40869727C" class="sect5"><span class="enumeration_section">4.1.2.16</span> LONG VARRAW</h5>
                     <div>
                        <p>您使用LONG VARRAW数据类型来存储可变长度的二进制数据或字节字符串。LONG VARRAW变量有一个4字节长的字段，后跟一个数据字段。数据字段的最大长度为2147483643个字节。指定要在VAR或TYPE语句中使用的LONG VARRAW的长度时，请不要包含4个长度字节。</p>
                     </div>
                  </div><a id="LNPCC3181"></a><div class="props_rev_3"><a id="GUID-B1C81959-27EC-416A-91B0-9EBA116FE419" name="GUID-B1C81959-27EC-416A-91B0-9EBA116FE419"></a><h5 id="LNPCC-GUID-B1C81959-27EC-416A-91B0-9EBA116FE419" class="sect5"><span class="enumeration_section">4.1.2.17</span> CHAR</h5>
                     <div>
                        <p>您使用CHAR数据类型来存储固定长度的字符串。CHAR值的最大长度为65535字节。</p>
                     </div><a id="LNPCC3182"></a><div class="props_rev_3"><a id="GUID-187910E6-DC22-4351-A443-6B71E7D65597" name="GUID-187910E6-DC22-4351-A443-6B71E7D65597"></a><h6 id="LNPCC-GUID-187910E6-DC22-4351-A443-6B71E7D65597" class="sect6"><span class="enumeration_section">4.1.2.17.1</span>输入</h6>
                        <div>
                           <p>Oracle读取为输入主机变量指定的字节数， <span class="italic">不</span>剥离尾随空白，然后存储在目标数据库列中的输入值。
                           </p>
                           <p>如果输入值超过数据库列的已定义宽度，则Oracle会生成错误。如果输入值是全空的，Oracle会将其视为字符值。</p>
                        </div>
                     </div><a id="LNPCC3183"></a><div class="props_rev_3"><a id="GUID-6C494EEF-38CF-481E-BAA9-5C5DB78F6B18" name="GUID-6C494EEF-38CF-481E-BAA9-5C5DB78F6B18"></a><h6 id="LNPCC-GUID-6C494EEF-38CF-481E-BAA9-5C5DB78F6B18" class="sect6"><span class="enumeration_section">4.1.2.17.2</span>关于输出</h6>
                        <div>
                           <p>Oracle返回为输出主机变量指定的字节数，必要时执行空白填充，然后将输出值分配给目标主机变量。如果返回NULL，则Oracle使用空白填充主机变量。</p>
                           <p>如果输出值长于主机变量的声明长度，Oracle会在将值分配给主变量之前截断该值。如果指示符变量可用，Oracle会将其设置为输出值的原始长度。如果显式选择NULL，则host变量中的值是不确定的。需要检查指示符变量的值是否为NULL-ness。</p>
                        </div>
                     </div>
                  </div><a id="LNPCC3184"></a><div class="props_rev_3"><a id="GUID-BE81B381-7513-4F86-ACCF-84583A307251" name="GUID-BE81B381-7513-4F86-ACCF-84583A307251"></a><h5 id="LNPCC-GUID-BE81B381-7513-4F86-ACCF-84583A307251" class="sect5"><span class="enumeration_section">4.1.2.18</span> CHARZ</h5>
                     <div>
                        <p>当DBMS = V7或V8时，Oracle默认将CHARZ数据类型分配给Pro * C / C ++程序中的所有字符主变量。CHARZ数据类型表示固定长度，以空值终止的字符串。CHARZ值的最大长度为65534字节。</p>
                     </div><a id="LNPCC3185"></a><div class="props_rev_3"><a id="GUID-6B94828F-09E4-493D-98F6-0CCD266F8C8C" name="GUID-6B94828F-09E4-493D-98F6-0CCD266F8C8C"></a><h6 id="LNPCC-GUID-6B94828F-09E4-493D-98F6-0CCD266F8C8C" class="sect6"><span class="enumeration_section">4.1.2.18.1</span>输入</h6>
                        <div>
                           <p>CHARZ和STRING数据类型的工作方式相同。您必须空终止输入值。null终止符仅用于分隔字符串;它不会成为存储数据的一部分。</p>
                        </div>
                     </div><a id="LNPCC3186"></a><div class="props_rev_3"><a id="GUID-5DA05C87-CA00-4CEB-BB8E-6E8135AFEF79" name="GUID-5DA05C87-CA00-4CEB-BB8E-6E8135AFEF79"></a><h6 id="LNPCC-GUID-5DA05C87-CA00-4CEB-BB8E-6E8135AFEF79" class="sect6"><span class="enumeration_section">4.1.2.18.2</span>关于输出</h6>
                        <div>
                           <p>如有必要，CHARZ主机变量是空白填充的，然后以空值终止。即使必须截断数据，输出值也始终以空值终止。如果显式选择NULL，则host变量中的值是不确定的。需要检查指示符变量的值是否为NULL-ness。</p>
                        </div>
                     </div>
                  </div><a id="LNPCC3187"></a><div class="props_rev_3"><a id="GUID-83BF2B6F-071F-4DAC-847A-EC59EEAB6D10" name="GUID-83BF2B6F-071F-4DAC-847A-EC59EEAB6D10"></a><h5 id="LNPCC-GUID-83BF2B6F-071F-4DAC-847A-EC59EEAB6D10" class="sect5"><span class="enumeration_section">4.1.2.19</span> CHARF</h5>
                     <div>
                        <p>CHARF数据类型用于EXEC SQL TYPE和EXEC SQL VAR语句。在使用设置为V7或V8的DBMS选项进行预编译时，在TYPE或VAR语句中指定外部数据类型CHAR将C类型或变量等同于固定长度，以null结尾的数据类型CHARZ。</p>
                        <p>但是，您可能不希望这些类型等价，而是等同于固定长度的外部类型CHAR。如果使用外部类型CHARF，则无论DBMS值如何，C类型或变量<span class="italic">始终</span>等效于固定长度的ANSI数据类型CHAR。CHARF从不允许C类型等同于VARCHAR2或CHARZ。或者，当您设置选项CHAR_MAP = CHARF时，声明为char [n]或char的所有主机变量都等同于CHAR字符串。如果显式选择NULL，则host变量中的值是不确定的。需要检查指示符变量的值是否为NULL-ness。
                        </p>
                     </div>
                  </div>
               </div><a id="LNPCC3188"></a><div class="props_rev_3"><a id="GUID-9DE44332-0853-465E-A222-4AA4973E2319" name="GUID-9DE44332-0853-465E-A222-4AA4973E2319"></a><h4 id="LNPCC-GUID-9DE44332-0853-465E-A222-4AA4973E2319" class="sect4"><span class="enumeration_section">4.1.3</span>其他外部数据类型</h4>
                  <div>
                     <p>本节介绍其他外部数据类型。</p>
                  </div><a id="LNPCC3189"></a><div class="props_rev_3"><a id="GUID-1AB4EFA3-4BF1-4215-8374-CBACD380E4F8" name="GUID-1AB4EFA3-4BF1-4215-8374-CBACD380E4F8"></a><h5 id="LNPCC-GUID-1AB4EFA3-4BF1-4215-8374-CBACD380E4F8" class="sect5"><span class="enumeration_section">4。1。3。1</span>日期时间和间隔数据类型</h5>
                     <div>
                        <p>这里简要总结了datetime和interval数据类型。</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="../sqlrf/index.html" target="_blank"><span><cite>Oracle数据库SQL语言参考</cite></span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="LNPCC3190"></a><div class="props_rev_3"><a id="GUID-FA7894BF-E8FA-4A71-B016-5A80476E0CA8" name="GUID-FA7894BF-E8FA-4A71-B016-5A80476E0CA8"></a><h5 id="LNPCC-GUID-FA7894BF-E8FA-4A71-B016-5A80476E0CA8" class="sect5"><span class="enumeration_section">4.1.3.2</span> ANSI日期</h5>
                     <div>
                        <p><a id="d16109e1166" class="indexterm-anchor"></a><a id="d16109e1170" class="indexterm-anchor"></a> <code class="codeph">ANSI</code> <code class="codeph">DATE</code>基于<code class="codeph">DATE</code> ，但不包含时间部分。（因此，它也没有时区。）<code class="codeph">ANSI</code> <code class="codeph">DATE</code>遵循<code class="codeph">DATE</code>数据类型的<code class="codeph">ANSI</code>规范。将<code class="codeph">ANSI</code> <code class="codeph">DATE</code>分配给<code class="codeph">DATE</code>或timestamp数据类型时，Oracle <code class="codeph">DATE</code>的时间部分和时间戳设置为零。将<code class="codeph">DATE</code>或时间戳分配给<code class="codeph">ANSI</code> <code class="codeph">DATE</code> ，将忽略时间部分。
                        </p>
                        <p>建议您使用包含日期和时间的<code class="codeph">TIMESTAMP</code>数据类型。
                        </p>
                     </div>
                  </div><a id="LNPCC3191"></a><div class="props_rev_3"><a id="GUID-2FB5CBC5-C109-4FAD-9A0B-1957D7ED5E0E" name="GUID-2FB5CBC5-C109-4FAD-9A0B-1957D7ED5E0E"></a><h5 id="LNPCC-GUID-2FB5CBC5-C109-4FAD-9A0B-1957D7ED5E0E" class="sect5"><span class="enumeration_section">4.1.3.3</span> TIMESTAMP</h5>
                     <div>
                        <p><code class="codeph">TIMESTAMP</code>数据类型是<code class="codeph">DATE</code>数据类型的扩展。它存储<code class="codeph">DATE</code>数据类型的年，月和日，加上小时，分钟和秒值。它没有时区。<code class="codeph">TIMESTAMP</code>数据类型具有以下形式：</p><pre class="oac_no_warn" dir="ltr">TIMESTAMP（小数秒）</pre><p>其中<span class="italic"><code class="codeph">fractional_seconds_precision</code></span> （可选）指定<code class="codeph">SECOND</code>日期时间字段的小数部分中的位数，并且可以是0到9范围内的数字。默认值为6。
                        </p>
                     </div>
                  </div><a id="LNPCC3192"></a><div class="props_rev_3"><a id="GUID-F917AB1C-8FE5-496C-A3FB-FCF51C15323B" name="GUID-F917AB1C-8FE5-496C-A3FB-FCF51C15323B"></a><h5 id="LNPCC-GUID-F917AB1C-8FE5-496C-A3FB-FCF51C15323B" class="sect5"><span class="enumeration_section">4.1.3.4带</span>时区的时间戳</h5>
                     <div>
                        <p><code class="codeph">TIMESTAMP</code> <code class="codeph">WITH</code> <code class="codeph">TIME</code> <code class="codeph">ZONE</code> （ <code class="codeph">TSTZ</code> ）是<code class="codeph">TIMESTAMP</code>的变体，其值包含显式时区位移。时区位移是当地时间与UTC（协调世界时 - 以前格林威治标准时间）之间的差异（以小时和分钟为单位）。<code class="codeph">TIMESTAMP</code> <code class="codeph">WITH</code> <code class="codeph">TIME</code> ZONE数据类型具有以下形式：</p><pre class="oac_no_warn" dir="ltr">具有时区的TIMESTAMP（fractional_seconds_precision）</pre><p>其中<span class="italic"><code class="codeph">fractional_seconds_precision</code></span>可选地指定<code class="codeph">SECOND</code>日期时间字段的小数部分中的位数，并且可以是0到9范围内的数字。默认值为6。
                        </p>
                        <p>如果两个<code class="codeph">TIMESTAMP</code> <code class="codeph">WITH</code> <code class="codeph">TIME</code> <code class="codeph">ZONE</code>值代表UTC中的相同时刻，则它们被视为相同，无论数据中存储的<code class="codeph">TIME</code> <code class="codeph">ZONE</code>偏移如何。
                        </p>
                     </div>
                  </div><a id="LNPCC3193"></a><div class="props_rev_3"><a id="GUID-D433E4DE-88C3-4DB4-A5C2-855573715C29" name="GUID-D433E4DE-88C3-4DB4-A5C2-855573715C29"></a><h5 id="LNPCC-GUID-D433E4DE-88C3-4DB4-A5C2-855573715C29" class="sect5"><span class="enumeration_section">4.1.3.5具有</span>本地时区的TIMESTAMP</h5>
                     <div>
                        <p><code class="codeph">TIMESTAMP</code> <code class="codeph">WITH</code> <code class="codeph">LOCAL</code> <code class="codeph">TIME</code> <code class="codeph">ZONE</code> （ <code class="codeph">TSLTZ</code> ）是另一种变型<code class="codeph">TIMESTAMP</code>其包括在它的值的时间段的位移。存储的格式与<code class="codeph">TIMESTAMP</code>格式相同。此类型与<code class="codeph">TIMESTAMP</code> <code class="codeph">WITH</code> <code class="codeph">TIME</code> <code class="codeph">ZONE</code>不同之处在于，存储在数据库中的数据已标准化为数据库时区，并且时区位移不会存储为列数据的一部分。当用户检索数据时，Oracle会在用户的本地会话时区中返回该数据。
                        </p>
                        <p>时区位移是当地时间与UTC（协调世界时 - 以前格林威治标准时间）之间的差异（以小时和分钟为单位）。<code class="codeph">TIMESTAMP</code> <code class="codeph">WITH</code> <code class="codeph">LOCAL</code> <code class="codeph">TIME</code> ZONE数据类型具有以下形式：</p><pre class="oac_no_warn" dir="ltr">TIMESTAMP（fractional_seconds_precision）与LOCAL TIME ZONE</pre><p>其中<span class="italic"><code class="codeph">fractional_seconds_precision</code></span>可选地指定<code class="codeph">SECOND</code>日期时间字段的小数部分中的位数，并且可以是0到9范围内的数字。默认值为6。
                        </p>
                     </div>
                  </div><a id="LNPCC3194"></a><div class="props_rev_3"><a id="GUID-CA6918C1-D3A1-4114-8717-341D18F85B44" name="GUID-CA6918C1-D3A1-4114-8717-341D18F85B44"></a><h5 id="LNPCC-GUID-CA6918C1-D3A1-4114-8717-341D18F85B44" class="sect5"><span class="enumeration_section">4.1.3.6</span>间隔年至月</h5>
                     <div>
                        <p><code class="codeph">INTERVAL</code> <code class="codeph">YEAR</code> <code class="codeph">TO</code> <code class="codeph">MONTH</code>使用<code class="codeph">YEAR</code>和<code class="codeph">MONTH</code>日期时间字段存储一段时间。<code class="codeph">INTERVAL</code> <code class="codeph">YEAR</code> <code class="codeph">TO</code> <code class="codeph">MONTH</code>数据类型具有以下形式：</p><pre class="oac_no_warn" dir="ltr">间隔年（年度精度）到月</pre><p>其中可选的<span class="italic"><code class="codeph">year_precision</code></span>是<code class="codeph">YEAR</code>日期时间字段中的位数。<span class="italic"><code class="codeph">year_precision</code></span>的默认值为2。
                        </p>
                     </div>
                  </div><a id="LNPCC3195"></a><div class="props_rev_3"><a id="GUID-B9A01770-93E5-4F29-8161-31F365521614" name="GUID-B9A01770-93E5-4F29-8161-31F365521614"></a><h5 id="LNPCC-GUID-B9A01770-93E5-4F29-8161-31F365521614" class="sect5"><span class="enumeration_section">4.1.3.7</span>第二天的间隔日</h5>
                     <div>
                        <p><code class="codeph">INTERVAL</code> <code class="codeph">DAY</code> <code class="codeph">TO</code> <code class="codeph">SECOND</code>以天，小时，分钟和秒为单位存储一段时间。<code class="codeph">INTERVAL</code> <code class="codeph">DAY</code> <code class="codeph">TO</code> <code class="codeph">SECOND</code>数据类型具有以下形式：</p><pre class="oac_no_warn" dir="ltr">INTERVAL DAY（day_precision）TO SECOND（fractional_seconds_precision）</pre><p>哪里：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="italic"><code class="codeph">day_precision</code></span>是<code class="codeph">DAY</code> datetime字段中的位数。这是可选的。可接受的值为0到9。默认值为2。
                              </p>
                           </li>
                        </ul>
                        <p><span class="italic"><code class="codeph">fractional_seconds_precision</code></span>是<code class="codeph">SECOND</code>日期时间字段的小数部分中的位数。这是可选的。可接受的值为0到9。默认值为6。
                        </p>
                     </div>
                  </div><a id="LNPCC3196"></a><div class="props_rev_3"><a id="GUID-C654B5B8-9E11-46FB-B33E-DA79C0A42EF6" name="GUID-C654B5B8-9E11-46FB-B33E-DA79C0A42EF6"></a><h5 id="LNPCC-GUID-C654B5B8-9E11-46FB-B33E-DA79C0A42EF6" class="sect5"><span class="enumeration_section">4.1.3.8</span>使用日期时间避免意外结果</h5>
                     <div>
                        <div class="infoboxnote" id="GUID-C654B5B8-9E11-46FB-B33E-DA79C0A42EF6__GUID-024211DA-A943-4854-A5A0-41804A170BED">
                           <p class="notep1">注意：</p>
                           <p>为避免对日期时间数据执行DML操作时出现意外结果，可以通过查询内置SQL函数<code class="codeph">DBTIMEZONE</code>和<code class="codeph">SESSIONTIMEZONE</code>来验证数据库和会话时区。如果尚未手动设置时区，则Oracle默认使用操作系统时区。如果操作系统时区不是有效的Oracle时区，则Oracle使用UTC作为默认值。
                           </p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="LNPCC3197"></a><div class="props_rev_3"><a id="GUID-EAD2DF4C-63FF-4B67-9673-490128B98D85" name="GUID-EAD2DF4C-63FF-4B67-9673-490128B98D85"></a><h3 id="LNPCC-GUID-EAD2DF4C-63FF-4B67-9673-490128B98D85" class="sect3"><span class="enumeration_section">4.2</span>主机变量</h3>
               <div>
                  <p>主机变量是主机程序与Oracle之间通信的关键。通常，预编译器程序将主机变量中的数据输入到Oracle，Oracle将数据输出到程序中的主变量。Oracle将输入数据存储在数据库列中，并将输出数据存储在程序主机变量中。</p>
                  <p>宿主变量可以是任何解析为标量类型的任意C表达式。但是，主变量也必须是<span class="italic">左值</span> 。还支持大多数主机变量的主机阵列。
                  </p>
               </div><a id="LNPCC3199"></a><a id="LNPCC3200"></a><a id="LNPCC3198"></a><div class="props_rev_3"><a id="GUID-843D717B-B10E-4D4B-AAC5-7B4755379604" name="GUID-843D717B-B10E-4D4B-AAC5-7B4755379604"></a><h4 id="LNPCC-GUID-843D717B-B10E-4D4B-AAC5-7B4755379604" class="sect4"><span class="enumeration_section">4.2.1</span>主机变量声明</h4>
                  <div>
                     <p>您可以根据C编程语言的规则声明主机变量，指定Oracle程序接口支持的C数据类型。C数据类型必须与源或目标数据库列的数据类型兼容。</p>
                     <p><a id="d16109e1609" class="indexterm-anchor"></a>如果MODE = ORACLE，则不必在特殊的Declare Section中声明主变量。但是，如果您不使用Declare Section，则FIPS标记器会向您发出警告，因为Declare Section是ANSI SQL Standard的一部分。 <a id="d16109e1614" class="indexterm-anchor"></a> 如果CODE = CPP（您正在编译C ++代码）或PARSE = NONE或PARSE = PARTIAL，那么您必须有一个Declare Section。
                     </p>
                     <p> <a href="datatypes-and-host-variables.html#GUID-843D717B-B10E-4D4B-AAC5-7B4755379604__g39867" title="主机变量的C数据类型">表4-4</a>显示了在声明主机变量时可以使用的C数据类型和假类型。只有这些数据类型可用于主机变量。
                     </p>
                     <div class="tblformal" id="GUID-843D717B-B10E-4D4B-AAC5-7B4755379604__g39867">
                        <p class="titleintable">表4-4主机变量的C数据类型</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="主机变量的C数据类型" width="100%" border="1" summary="C Datatypes for Host Variables" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="45%" id="d16109e1636">C数据类型或假型</th>
                                 <th align="left" valign="bottom" width="55%" id="d16109e1639">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="45%" id="d16109e1644" headers="d16109e1636 ">
                                    <p>烧焦</p>
                                 </td>
                                 <td align="left" valign="top" width="55%" headers="d16109e1644 d16109e1639 ">
                                    <p>单个字符</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="45%" id="d16109e1651" headers="d16109e1636 ">
                                    <p>炭[n]的</p>
                                 </td>
                                 <td align="left" valign="top" width="55%" headers="d16109e1651 d16109e1639 ">
                                    <p>n字符数组（字符串）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="45%" id="d16109e1658" headers="d16109e1636 ">
                                    <p>INT</p>
                                 </td>
                                 <td align="left" valign="top" width="55%" headers="d16109e1658 d16109e1639 ">
                                    <p>整数</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="45%" id="d16109e1665" headers="d16109e1636 ">
                                    <p>短</p>
                                 </td>
                                 <td align="left" valign="top" width="55%" headers="d16109e1665 d16109e1639 ">
                                    <p>小整数</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="45%" id="d16109e1672" headers="d16109e1636 ">
                                    <p>长</p>
                                 </td>
                                 <td align="left" valign="top" width="55%" headers="d16109e1672 d16109e1639 ">
                                    <p>大整数</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="45%" id="d16109e1679" headers="d16109e1636 ">
                                    <p>很久很久</p>
                                 </td>
                                 <td align="left" valign="top" width="55%" headers="d16109e1679 d16109e1639 ">
                                    <p>非常大（8字节）的整数</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="45%" id="d16109e1686" headers="d16109e1636 ">
                                    <p>浮动</p>
                                 </td>
                                 <td align="left" valign="top" width="55%" headers="d16109e1686 d16109e1639 ">
                                    <p>浮点数（通常是单精度）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="45%" id="d16109e1693" headers="d16109e1636 ">
                                    <p>双</p>
                                 </td>
                                 <td align="left" valign="top" width="55%" headers="d16109e1693 d16109e1639 ">
                                    <p>浮点数（总是双精度）</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="45%" id="d16109e1700" headers="d16109e1636 ">
                                    <p>VARCHAR [n]的</p>
                                 </td>
                                 <td align="left" valign="top" width="55%" headers="d16109e1700 d16109e1639 ">
                                    <p>变长字符串</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p><a href="datatypes-and-host-variables.html#GUID-843D717B-B10E-4D4B-AAC5-7B4755379604__g39898" title="C到Oracle数据类型兼容性">表4-5</a>显示了兼容的Oracle内部数据类型。
                     </p>
                     <div class="tblformal" id="GUID-843D717B-B10E-4D4B-AAC5-7B4755379604__g39898">
                        <p class="titleintable">表4-5 C到Oracle数据类型兼容性</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="C到Oracle数据类型兼容性" width="100%" border="1" summary="C to Oracle Datatype Compatibility" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d16109e1723">内部类型</th>
                                 <th align="left" valign="bottom" width="25%" id="d16109e1726">C型</th>
                                 <th align="left" valign="bottom" width="51%" id="d16109e1729">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e1734" headers="d16109e1723 ">
                                    <p>VARCHAR2（Y）</p>
                                    <p>（注1）</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d16109e1734 d16109e1726 ">
                                    <p>烧焦</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d16109e1734 d16109e1729 ">
                                    <p>单个字符</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e1746" headers="d16109e1723 ">
                                    <p>CHAR（X）</p>
                                    <p>（注1）</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d16109e1746 d16109e1726 ">
                                    <p>炭[n]的</p>
                                    <p>VARCHAR [n]的</p>
                                    <p>INT</p>
                                    <p>短</p>
                                    <p>长</p>
                                    <p>很久很久</p>
                                    <p>浮动</p>
                                    <p>双</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d16109e1746 d16109e1729 ">
                                    <p>n字节字符数组</p>
                                    <p>n字节可变长度字符数组</p>
                                    <p>整数</p>
                                    <p>小整数</p>
                                    <p>大整数</p>
                                    <p>非常大（8字节）的整数</p>
                                    <p>浮点数</p>
                                    <p>双精度浮点数</p>
                                    <p>数</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e1788" headers="d16109e1723 ">
                                    <p>数</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d16109e1788 d16109e1726 ">
                                    <p>INT</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d16109e1788 d16109e1729 ">
                                    <p>整数</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e1798" headers="d16109e1723 ">
                                    <p>NUMBER（P，S）</p>
                                    <p>（笔记2）</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d16109e1798 d16109e1726 ">
                                    <p>短</p>
                                    <p>INT</p>
                                    <p>长</p>
                                    <p>浮动</p>
                                    <p>双</p>
                                    <p></p>
                                    <p>烧焦</p>
                                    <p>炭[n]的</p>
                                    <p>VARCHAR [n]的</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d16109e1798 d16109e1729 ">
                                    <p>小整数</p>
                                    <p>整数</p>
                                    <p>大整数</p>
                                    <p>浮点数</p>
                                    <p>双精度浮点数</p>
                                    <p>数</p>
                                    <p>单个字符</p>
                                    <p>n字节字符数组</p>
                                    <p>n字节可变长度字符数组</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e1841" headers="d16109e1723 ">
                                    <p>日期</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d16109e1841 d16109e1726 ">
                                    <p>炭[n]的</p>
                                    <p>VARCHAR [n]的</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d16109e1841 d16109e1729 ">
                                    <p>n字节字符数组</p>
                                    <p>n字节可变长度字符数组</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e1855" headers="d16109e1723 ">
                                    <p>长</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d16109e1855 d16109e1726 ">
                                    <p>炭[n]的</p>
                                    <p>VARCHAR [n]的</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d16109e1855 d16109e1729 ">
                                    <p>n字节字符数组</p>
                                    <p>n字节可变长度字符数组</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e1869" headers="d16109e1723 ">
                                    <p>RAW（X）</p>
                                    <p>（注1）</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d16109e1869 d16109e1726 ">
                                    <p>unsigned char [n]</p>
                                    <p>VARCHAR [n]的</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d16109e1869 d16109e1729 ">
                                    <p>n字节字符数组</p>
                                    <p>n字节可变长度字符数组</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e1885" headers="d16109e1723 ">
                                    <p>LONG RAW</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d16109e1885 d16109e1726 ">
                                    <p>unsigned char [n]</p>
                                    <p>VARCHAR [n]的</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d16109e1885 d16109e1729 ">
                                    <p>n字节字符数组</p>
                                    <p>n字节可变长度字符数组</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e1899" headers="d16109e1723 ">
                                    <p>ROWID</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d16109e1899 d16109e1726 ">
                                    <p>unsigned char [n]</p>
                                    <p>VARCHAR [n]的</p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d16109e1899 d16109e1729 ">
                                    <p>n字节字符数组</p>
                                    <p>n字节可变长度字符数组</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d16109e1913" headers="d16109e1723 ">
                                    <p>笔记：</p>
                                    <p>1。X的范围是1到2000. 1是默认值。Y的范围是1到4000。</p>
                                    <p>2。P的范围从1到38。S的范围是-84到127。</p>
                                 </td>
                                 <td align="left" valign="top" width="25%" headers="d16109e1913 d16109e1726 ">
                                    <p></p>
                                 </td>
                                 <td align="left" valign="top" width="51%" headers="d16109e1913 d16109e1729 ">
                                    <p></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>简单C类型的一维数组也可以作为主变量。对于char [n]和VARCHAR [n]， <span class="italic">n</span>指定最大字符串长度， <span class="italic">而不是</span>数组中字符串的数量。二维数组仅允许用于char [m] [n]和VARCHAR [m] [n]，其中<span class="italic">m</span>指定数组中的字符串数， <span class="italic">n</span>指定最大字符串长度。
                     </p>
                     <p>支持简单C类型的指针。应将char [n]和VARCHAR [n]变量的指针声明为char或VARCHAR的指针（没有长度规范）。但是，不支持指针数组。</p>
                  </div><a id="LNPCC3201"></a><div class="props_rev_3"><a id="GUID-2FB5F07A-CBB2-4FEA-B665-8A2B5B98FB50" name="GUID-2FB5F07A-CBB2-4FEA-B665-8A2B5B98FB50"></a><h5 id="LNPCC-GUID-2FB5F07A-CBB2-4FEA-B665-8A2B5B98FB50" class="sect5"><span class="enumeration_section">4.2.1.1</span>存储类说明符</h5>
                     <div>
                        <p>Pro * C / C ++允许您在声明主机变量时使用<span class="bold">auto</span> ， <span class="bold">extern</span>和<span class="bold">static</span>存储类说明符。但是，您不能使用<span class="bold">寄存器</span>存储类说明符来存储主机变量，因为预编译器通过在它们之前放置一个＆符号来获取主机变量的地址。遵循C的规则，您只能在块中使用<span class="bold">自动</span>存储类说明符。
                        </p>
                        <p>为符合ANSI C标准，Pro * C / C ++预编译器提供了声明具有或不具有最大长度的<span class="bold">extern char [n]</span>主变量的功能，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">extern char协议[15]; extern char msg [];</pre><p>但是，您应始终指定最大长度。在最后一个示例中，如果<span class="italic">msg</span>是在一个预编译单元中声明但在另一个预编译单元中定义的输出主机变量，则预编译器无法知道其最大长度。如果在第二个预编译单元中没有为<span class="italic">msg</span>分配足够的存储空间，则可能会损坏内存。（通常，“够”是最长列值中可能被SELECTed或FETCHed到主机变量中的字节数，加上一个可能的空终止符的字节。）
                        </p>
                        <p>如果忽略指定<span class="bold">extern char []</span>主变量的最大长度，则预编译器会发出警告消息。预编译器还假定主变量将存储CHARACTER列值，其长度不能超过255个字符。因此，如果要在主变量中SELECT或FETCH将长度大于255个字符的VARCHAR2或LONG列值，则<span class="italic">必须</span>指定最大长度。
                        </p>
                     </div>
                  </div><a id="LNPCC3202"></a><div class="props_rev_3"><a id="GUID-0BDF63F9-5284-434E-A8B3-9FAD1360FF40" name="GUID-0BDF63F9-5284-434E-A8B3-9FAD1360FF40"></a><h5 id="LNPCC-GUID-0BDF63F9-5284-434E-A8B3-9FAD1360FF40" class="sect5"><span class="enumeration_section">4.2.1.2</span>类型限定符</h5>
                     <div>
                        <p>声明宿主变量时，也可以使用<span class="bold">const</span>和<span class="bold">volatile</span>类型限定符。
                        </p>
                        <p><span class="bold">const</span>主变量必须具有常量值，即您的程序无法更改其初始值。<span class="bold">易失性</span>主机变量的值可能以程序未知的方式更改（例如，通过连接到系统的设备）。
                        </p>
                     </div>
                  </div>
               </div><a id="LNPCC3203"></a><div class="props_rev_3"><a id="GUID-60C0F646-92C0-4AB1-9E88-3B2677C3CF8B" name="GUID-60C0F646-92C0-4AB1-9E88-3B2677C3CF8B"></a><h4 id="LNPCC-GUID-60C0F646-92C0-4AB1-9E88-3B2677C3CF8B" class="sect4"><span class="enumeration_section">4.2.2</span>主机变量引用</h4>
                  <div>
                     <p>您在SQL数据操作语句中使用主机变量。主机变量必须在SQL语句中以冒号（:)为前缀，但不能在C语句中以冒号为前缀，如以下示例所示：<a id="d16109e2025" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">char buf [15]; int emp_number;浮动工资; ...得到（BUF）; emp_number = atoi（buf）; EXEC SQL SELECT sal INTO：salary FROM emp WHERE empno =：emp_number;</pre><p>虽然它可能令人困惑，但您可以为主机变量指定与Oracle表或列相同的名称，如下例所示：</p><pre class="oac_no_warn" dir="ltr">int empno; char ename [10];漂浮...EXEC SQL SELECT ename，sal INTO：ename，：sal FROM emp WHERE empno =：empno;</pre></div><a id="LNPCC3204"></a><div class="props_rev_3"><a id="GUID-79D8C3A4-FF8F-4EFD-9590-08FA749F36BF" name="GUID-79D8C3A4-FF8F-4EFD-9590-08FA749F36BF"></a><h5 id="LNPCC-GUID-79D8C3A4-FF8F-4EFD-9590-08FA749F36BF" class="sect5"><span class="enumeration_section">4.2.2.1</span>限制</h5>
                     <div>
                        <p>主机变量名称是C标识符，因此必须以相同的大写/小写格式声明和引用它。它不能替代SQL语句中的列，表或其他Oracle对象，也不能是Oracle保留字。</p>
                        <p>主机变量必须解析为程序中的地址。因此，函数调用和数值表达式不能用作主变量。以下代码<span class="italic">无效</span> ：</p><pre class="oac_no_warn" dir="ltr">#define MAX_EMP_NUM 9000 ......int get_dept（）; ...EXEC SQL INSERT INTO emp（empno，ename，deptno）VALUES（：MAX_EMP_NUM + 10，'CHEN'，：get_dept（））;<a id="d16109e2053" class="indexterm-anchor"></a><a id="d16109e2057" class="indexterm-anchor"></a><a id="d16109e2061" class="indexterm-anchor"></a></pre></div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="reserved-words-keywords-namespaces.html#GUID-F3AE31F8-2209-491E-A0FD-44F75C06C79C">保留字，关键字和命名空间</a></li>
                           </ul>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div><a id="LNPCC3205"></a><div class="props_rev_3"><a id="GUID-1A9B5679-B15F-4869-8B7A-598BABEA3873" name="GUID-1A9B5679-B15F-4869-8B7A-598BABEA3873"></a><h3 id="LNPCC-GUID-1A9B5679-B15F-4869-8B7A-598BABEA3873" class="sect3"><span class="enumeration_section">4.3</span>指标变量</h3>
               <div>
                  <p>您可以将每个主机变量与可选的指示符变量相关联。必须将指示符变量定义为2字节整数，并且在SQL语句中，必须以冒号为前缀并紧跟其主变量（除非使用关键字INDICATOR）。如果使用Declare Sections，则还必须在Declare Sections中声明指示符变量。</p>
                  <p>这适用于关系列，而不是对象类型。</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="about-Objects.html#GUID-0C106FBC-C023-4B86-817A-1867A69388F7">对象</a></li>
                     </ul>
                  </div>
               </div>
               <a id="LNPCC3206"></a><div class="props_rev_3"><a id="GUID-2CDA9483-5AE4-4B42-A9DE-8B0001FC97F3" name="GUID-2CDA9483-5AE4-4B42-A9DE-8B0001FC97F3"></a><h4 id="LNPCC-GUID-2CDA9483-5AE4-4B42-A9DE-8B0001FC97F3" class="sect4"><span class="enumeration_section">4.3.1</span> INDICATOR关键字</h4>
                  <div>
                     <p>为了提高可读性，可以在任何指示符变量之前加上可选关键字INDICATOR。您仍必须使用冒号为指示符变量添加前缀。正确的语法是：</p><pre class="oac_no_warn" dir="ltr">：host_variable INDICATOR：indicator_variable</pre><p>这相当于</p><pre class="oac_no_warn" dir="ltr">：host_variable：indicator_variable</pre><p>您可以在宿主程序中使用这两种表达形式。</p>
                     <p>可能的指标值及其含义是：</p>
                     <div class="tblformal" id="GUID-2CDA9483-5AE4-4B42-A9DE-8B0001FC97F3__GUID-9D61D74D-C9BC-424C-9476-AFA9E2502DE7">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Indicator Values" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="29%" id="d16109e2140">指标值</th>
                                 <th align="left" valign="bottom" width="71%" id="d16109e2143">意义</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16109e2148" headers="d16109e2140 ">
                                    <p>0</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d16109e2148 d16109e2143 ">
                                    <p>手术成功了</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16109e2155" headers="d16109e2140 ">
                                    <p>-1</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d16109e2155 d16109e2143 ">
                                    <p>返回，插入或更新NULL。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16109e2162" headers="d16109e2140 ">
                                    <p>-2</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d16109e2162 d16109e2143 ">
                                    <p>从“long”类型输出到字符主变量被截断，但无法确定原始列长度。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16109e2169" headers="d16109e2140 ">
                                    <p>&gt; 0</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d16109e2169 d16109e2143 ">
                                    <p>SELECT或FETCH进入字符主机变量的结果被截断。在这种情况下，如果主机变量是多字节字符变量，则指示符值是以字符为单位的原始列长度。如果主变量不是多字符变量，则指示符长度是原始列长度（以字节为单位）。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="LNPCC3207"></a><div class="props_rev_3"><a id="GUID-E2F77858-8524-4356-AE8B-6172E97F351A" name="GUID-E2F77858-8524-4356-AE8B-6172E97F351A"></a><h4 id="LNPCC-GUID-E2F77858-8524-4356-AE8B-6172E97F351A" class="sect4"><span class="enumeration_section">4.3.2</span> INDICATOR变量用法示例</h4>
                  <div>
                     <p>通常，您使用指示符变量将NULL分配给输入主变量并检测输出主变量中的NULL或截断值。在稍后的示例中，您声明了三个主变量和一个指示符变量，然后使用SELECT语句在数据库中搜索与主变量<span class="italic">emp_number</span>的值匹配的员工编号。找到匹配的行时，Oracle将输出主机变量<span class="italic">salary</span>和<span class="italic">commission</span>设置为该行中SAL和COMM列的值，并将返回代码存储在指示符变量<span class="italic">ind_comm中</span> 。接下来的语句使用<span class="italic">ind_comm</span>来选择一个行动方案。
                     </p><pre class="oac_no_warn" dir="ltr">EXEC SQL BEGIN DECLARE SECTION; int emp_number;浮动工资，佣金;简短的comm_ind; / *指示符变量* / EXEC SQL END DECLARE SECTION; char temp [16];浮动工资; / *未在SQL语句中使用* / ...printf（“员工编号？“）; gets（temp）; emp_number = atof（temp）; EXEC SQL SELECT SAL，COMM INTO：salary，：commission：ind_comm FROM EMP WHERE EMPNO =：emp_number; if（ind_comm == -1）/ * commission为null * / pay =工资;否则支付=工资+佣金;</pre></div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="embedded-SQL.html#GUID-22C65C80-42A1-4C8B-B883-19EFDF7AA31C">指标变量</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC3208"></a><div class="props_rev_3"><a id="GUID-7A86836F-2447-4C4C-ADDE-464384503EAF" name="GUID-7A86836F-2447-4C4C-ADDE-464384503EAF"></a><h4 id="LNPCC-GUID-7A86836F-2447-4C4C-ADDE-464384503EAF" class="sect4"><span class="enumeration_section">4.3.3</span>指标变量指南</h4>
                  <div>
                     <p>以下准则适用于声明和引用指标变量。指标变量必须</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>显式声明（在声明部分中，如果存在）作为2字节整数。</p>
                        </li>
                        <li>
                           <p>在SQL语句中以冒号（:)为前缀。</p>
                        </li>
                        <li>
                           <p>立即在SQL语句和PL / SQL块中跟随其主变量（除非前面有关键字INDICATOR）。</p>
                        </li>
                     </ul>
                     <p>指标变量<span class="italic">不得</span> ：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在宿主语言语句中以冒号为前缀。</p>
                        </li>
                        <li>
                           <p>在宿主语言语句中跟随其宿主变量。</p>
                        </li>
                        <li>
                           <p>是Oracle保留字。</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNPCC3209"></a><div class="props_rev_3"><a id="GUID-3D8018F2-E6F5-4222-BB9B-21729561FA61" name="GUID-3D8018F2-E6F5-4222-BB9B-21729561FA61"></a><h4 id="LNPCC-GUID-3D8018F2-E6F5-4222-BB9B-21729561FA61" class="sect4"><span class="enumeration_section">4.3.4</span> Oracle限制</h4>
                  <div>
                     <p>当DBMS = V7或V8时，如果SELECT或FETCH将NULL转换为没有指示符的主机变量，Oracle会发出以下错误消息：</p><pre class="oac_no_warn" dir="ltr">ORA-01405：获取的列值为NULL</pre><p>使用MODE = ORACLE预编译并指定DBMS = V7或V8时，可以指定UNSAFE_NULL = YES以禁用ORA-01405消息。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="precompiler-options.html#GUID-738C5830-5089-4218-8C37-2CED2004C4BA">UNSAFE_NULL</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div>
            </div><a id="LNPCC3210"></a><div class="props_rev_3"><a id="GUID-33AC6FC8-EA9D-4C7F-ADAC-D01A0DF4E281" name="GUID-33AC6FC8-EA9D-4C7F-ADAC-D01A0DF4E281"></a><h3 id="LNPCC-GUID-33AC6FC8-EA9D-4C7F-ADAC-D01A0DF4E281" class="sect3"><span class="enumeration_section">4.4</span> VARCHAR变量</h3>
               <div>
                  <p>您可以使用VARCHAR伪型来声明可变长度字符串。当您的程序处理从VARCHAR2或LONG列输出或输入的字符串时，您可能会发现使用VARCHAR主变量而不是标准C字符串更方便。数据类型名称VARCHAR可以是大写或小写，但<span class="italic">不能</span>是大小写混合。在本指南中，大写用于强调VARCHAR不是本机C数据类型。
                  </p>
               </div><a id="LNPCC3211"></a><div class="props_rev_3"><a id="GUID-2CFEFD3E-61E4-4B86-92E7-35DCFAFFFA9D" name="GUID-2CFEFD3E-61E4-4B86-92E7-35DCFAFFFA9D"></a><h4 id="LNPCC-GUID-2CFEFD3E-61E4-4B86-92E7-35DCFAFFFA9D" class="sect4"><span class="enumeration_section">4.4.1</span> VARCHAR变量声明</h4>
                  <div>
                     <p>将VARCHAR视为扩展C类型或预先声明的<span class="bold">结构</span> 。例如，预编译器会扩展VARCHAR声明<a id="d16109e2307" class="indexterm-anchor"></a><a id="d16109e2311" class="indexterm-anchor"></a> 
                     </p><pre class="oac_no_warn" dir="ltr">VARCHAR用户名[20];</pre><p>使用数组和长度成员进入以下<span class="bold">结构</span> ：</p><pre class="oac_no_warn" dir="ltr">struct {unsigned short len; unsigned char arr [20]; } 用户名;</pre><p>使用VARCHAR变量的优点是您可以在SELECT或FETCH之后显式引用VARCHAR结构的length成员。 Oracle将所选字符串的长度放在length成员中。然后，您可以使用此成员执行诸如添加null（'\ 0'）终止符之类的操作<a id="d16109e2327" class="indexterm-anchor"></a> 。
                     </p><pre class="oac_no_warn" dir="ltr">username.arr [username.len] ='\ 0';</pre><p>或者使用<span class="italic">strncpy</span>或<span class="italic">printf</span>语句中的长度;例如：</p><pre class="oac_no_warn" dir="ltr">printf（“用户名是％。* s \ n”，username.len，username.arr）;</pre><p>您在其声明中指定VARCHAR变量的最大长度。长度必须在1.65533范围内。例如，以下声明<span class="italic">无效，</span>因为未指定长度： <a id="d16109e2349" class="indexterm-anchor"></a> 
                     </p><pre class="oac_no_warn" dir="ltr">VARCHAR null_string []; / *无效* /</pre><p>长度规范保存存储在数组成员中的值的当前长度。 <a id="d16109e2358" class="indexterm-anchor"></a> 
                     </p>
                     <p>您可以在一行上声明多个VARCHAR;例如：</p><pre class="oac_no_warn" dir="ltr">VARCHAR emp_name [ENAME_LEN]，dept_loc [DEPT_NAME_LEN];</pre><p>VARCHAR的长度说明符可以是<span class="bold">#define</span> d宏，也可以是在预编译时可以解析为整数的任何复杂表达式。
                     </p>
                     <p>您还可以声明指向VARCHAR数据类型的指针。</p>
                     <div class="infoboxnote" id="GUID-2CFEFD3E-61E4-4B86-92E7-35DCFAFFFA9D__GUID-03A53C55-4D57-4382-94BB-8E873616F46E">
                        <p class="notep1">注意：</p>
                        <p>不要尝试使用typedef语句，例如：</p><pre class="oac_no_warn" dir="ltr">typedef VARCHAR buf [64];</pre><p>这会在C编译期间导致错误。</p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="advanced-topics.html#GUID-6601390B-56D8-47DA-AEA1-982AEFA8E498">VARCHAR变量和指针</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC3212"></a><div class="props_rev_3"><a id="GUID-F2750CBE-D4BC-443C-9BB9-D3FA6D509556" name="GUID-F2750CBE-D4BC-443C-9BB9-D3FA6D509556"></a><h4 id="LNPCC-GUID-F2750CBE-D4BC-443C-9BB9-D3FA6D509556" class="sect4"><span class="enumeration_section">4.4.2</span> VARCHAR变量引用</h4>
                  <div>
                     <p>在SQL语句中，您使用前缀为冒号的<span class="bold">结构</span>名称引用VARCHAR变量，如以下示例所示：</p><pre class="oac_no_warn" dir="ltr">...int part_number; VARCHAR part_desc [40]; ...main（）{...EXEC SQL SELECT pdesc INTO：part_desc FROM parts WHERE pnum =：part_number; ...
</pre><p>执行查询后， <span class="italic">part_desc.len</span>保存从数据库中检索并存储在<span class="italic">part_desc.arr中的</span>字符串的实际长度。
                     </p>
                     <p>在C语句中，您使用组件名称引用VARCHAR变量，如下一个示例所示：</p><pre class="oac_no_warn" dir="ltr">printf（“\ n \ n输入部件描述：”）;得到（part_desc.arr）; / *在INSERT或UPDATE * / part_desc.len = strlen（part_desc.arr）中使用VARCHAR之前，必须设置字符串的长度;</pre></div>
               </div><a id="LNPCC3213"></a><div class="props_rev_3"><a id="GUID-3D1C54A4-C722-4EC5-B4A3-83DDF91298DF" name="GUID-3D1C54A4-C722-4EC5-B4A3-83DDF91298DF"></a><h4 id="LNPCC-GUID-3D1C54A4-C722-4EC5-B4A3-83DDF91298DF" class="sect4"><span class="enumeration_section">4.4.3将</span> NULL返回到VARCHAR变量</h4>
                  <div>
                     <p>Oracle自动设置VARCHAR输出主机变量的长度组件。如果SELECT或FETCH将NULL转换为VARCHAR，则服务器不会更改长度或数组成员。</p>
                     <div class="infoboxnote" id="GUID-3D1C54A4-C722-4EC5-B4A3-83DDF91298DF__GUID-907C4BBB-1891-43D4-94D2-DD0508C05EED">
                        <p class="notep1">注意：</p>
                        <p>如果在VARCHAR主变量中选择NULL，并且没有关联的指示符变量，则在运行时会发生ORA-01405错误。通过使用所有主变量编码指标变量来避免这种情况（作为临时修复，请使用UNSAFE_NULL = YES预编译器选项。</p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="precompiler-options.html#GUID-D85972A8-FA08-4BBC-B543-3F0BADBA0236">DBMS</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC3214"></a><div class="props_rev_3"><a id="GUID-4F66D7A3-C2EF-4E95-A57B-ED0BFF2BDA5A" name="GUID-4F66D7A3-C2EF-4E95-A57B-ED0BFF2BDA5A"></a><h4 id="LNPCC-GUID-4F66D7A3-C2EF-4E95-A57B-ED0BFF2BDA5A" class="sect4"><span class="enumeration_section">4.4.4</span>使用VARCHAR变量插入NULL</h4>
                  <div>
                     <p>如果在执行UPDATE或INSERT语句之前将VARCHAR变量的长度设置为零，则将列值设置为NULL。如果列具有NOT NULL约束，则Oracle会返回错误。</p>
                  </div>
               </div><a id="LNPCC3215"></a><div class="props_rev_3"><a id="GUID-8A6E6A06-4166-4C06-AF30-3F875AD143F6" name="GUID-8A6E6A06-4166-4C06-AF30-3F875AD143F6"></a><h4 id="LNPCC-GUID-8A6E6A06-4166-4C06-AF30-3F875AD143F6" class="sect4"><span class="enumeration_section">4.4.5将</span> VARCHAR变量传递给函数</h4>
                  <div>
                     <p>VARCHAR是结构，大多数C编译器允许通过值将结构传递给函数，并通过从函数中复制返回结构。但是，在Pro * C / C ++中，您必须通过引用将VARCHAR传递给函数。以下示例显示了将VARCHAR变量传递给函数的正确方法：<a id="d16109e2465" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">VARCHAR emp_name [20]; ...emp_name.len = 20; SELECT ename INTO：emp_name FROM emp WHERE empno = 7499; ...print_employee_name（＆EMP_NAME）; / *通过指针传递* / ...print_employee_name（name）VARCHAR * name; {...printf（“name is％。* s \ n”，name-&gt; len，name-&gt; arr）; ...}</pre></div>
               </div><a id="LNPCC3216"></a><div class="props_rev_3"><a id="GUID-621F729B-EAF3-4117-9DF5-B64E420EADE5" name="GUID-621F729B-EAF3-4117-9DF5-B64E420EADE5"></a><h4 id="LNPCC-GUID-621F729B-EAF3-4117-9DF5-B64E420EADE5" class="sect4"><span class="enumeration_section">4.4.6</span>查找VARCHAR数组组件的长度</h4>
                  <div>
                     <p>当预编译器处理VARCHAR声明时，生成的结构中数组元素的实际长度可能比声明的长度长。例如，在Sun Solaris系统上，Pro * C / C ++声明</p><pre class="oac_no_warn" dir="ltr">VARCHAR my_varchar [12];</pre><p>由预编译器扩展到</p><pre class="oac_no_warn" dir="ltr">struct my_varchar {unsigned short len; unsigned char arr [12]; };</pre><p>但是，此系统上的预编译器或C编译器将数组组件的长度填充为14个字节。这种对齐要求将结构的总长度填充为16字节：填充阵列为14，长度为2字节。</p>
                     <p><code class="codeph">SQLVarcharGetLength()</code> （替换非线程<code class="codeph">sqlvcp()</code> ）函数 -  SQLLIB运行时库的一部分 - 返回数组成员的实际（可能填充）长度。<a id="d16109e2499" class="indexterm-anchor"></a><a id="d16109e2503" class="indexterm-anchor"></a></p>
                     <p>您将<code class="codeph">SQLVarcharGetLength()</code>函数传递给VARCHAR主机变量或VARCHAR指针主机变量的数据长度， <code class="codeph">SQLVarcharGetLength()</code>返回VARCHAR的数组组件的总长度。总长度包括可能由C编译器添加的任何填充。
                     </p>
                     <p><code class="codeph">SQLVarcharGetLength()</code>的语法是</p><pre class="oac_no_warn" dir="ltr">SQLVarcharGetLength（dvoid * context，unsigned long * datlen，unsigned long * totlen）;</pre><p>对于单线程应用程序，请使用<code class="codeph">sqlvcp()</code> 。在调用<code class="codeph">sqlvcp()</code>之前，将VARCHAR的长度放在<code class="codeph">datlen</code>参数中。函数返回时， <code class="codeph">totlen</code>参数包含数组元素的总长度。这两个参数都是指向无符号长整数的指针，因此必须通过引用传递。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="advanced-topics.html#GUID-3B79020D-735A-47A9-84DA-401D86E8F712">SQLLIB公共函数的新名称</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC3217"></a><div class="props_rev_3"><a id="GUID-FA7D1173-C17F-4740-8E96-CB087D29394F" name="GUID-FA7D1173-C17F-4740-8E96-CB087D29394F"></a><h4 id="LNPCC-GUID-FA7D1173-C17F-4740-8E96-CB087D29394F" class="sect4"><span class="enumeration_section">4.4.7</span>示例程序：使用sqlvcp（）</h4>
                  <div>
                     <div class="section">
                        <p>以下示例程序显示了如何在Pro * C / C ++应用程序中使用该函数。该示例还使用<code class="codeph">sqlgls()</code>函数。该示例声明了一个VARCHAR指针，然后使用<code class="codeph">sqlvcp()</code>函数来确定VARCHAR缓冲区所需的大小。该程序从EMP表中获取员工姓名并打印它们。最后，该示例使用<code class="codeph">sqlgls()</code>函数打印出SQL语句及其函数代码和长度属性。该程序可在您的<code class="codeph">demo</code>目录中以<code class="codeph">sqlvcp.pc</code>的形式在线<code class="codeph">sqlvcp.pc</code> 。<a id="d16109e2573" class="indexterm-anchor"></a><a id="d16109e2577" class="indexterm-anchor"></a><a id="d16109e2583" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">/ * * sqlvcp.pc程序演示了如何使用* sqlvcp（）函数来确定* VARCHAR结构的实际大小。然后将该大小用作偏移量以*递增指针，该指针逐步遍历* VARCHAR数组。* *该程序还演示了如何使用sqlgls（）*函数来获取最后执行的SQL语句的文本。* sqlgls（）在* Oracle Pro * C / C ++预编译器程序员指南的“错误处理”一章中描述。* / #include &lt;stdio.h&gt; #include &lt;sqlca.h&gt; #include &lt;sqlcpr.h&gt; / *伪造VARCHAR指针类型。* / struct my_vc_ptr {unsigned short len; unsigned char arr [32767]; }; / *定义VARCHAR指针的类型* / typedef struct my_vc_ptr my_vc_ptr; my_vc_ptr * vc_ptr; EXEC SQL BEGIN DECLARE SECTION; VARCHAR *名称; int limit; / *用于FETCH FOR子句* / char * username =“scott / tiger”; EXEC SQL END DECLARE SECTION; void sql_error（）; extern void sqlvcp（），sqlgls（）; main（）{unsigned int vcplen，function_code，padlen，buflen; int i; char stmt_buf [120];执行SQL WHENEVER SQLERROR DO sql_error（）; EXEC SQL CONNECT：username;的printf（ “\ nConnected \ n”）; / *查找表中的行数。* / EXEC SQL SELECT COUNT（*）INTO：limit FROM emp; / *声明FETCH语句的游标。* / EXEC SQL DECLARE emp_name_cursor CURSOR FOR SELECT ename FROM emp; EXEC SQL FOR：限制OPEN emp_name_cursor; / *为VARCHAR设置所需的DATA长度。 * / vcplen = 10; / *使用SQLVCP帮助查找malloc的长度。* / sqlvcp（＆vcplen，＆padlen）; printf（“VARCHAR的实际数组长度为％ld \ n”，padlen）; / *为名称分配名称缓冲区。设置FOR子句的限制变量。* / names =（VARCHAR *）malloc（（sizeof（short）+（int）padlen）* limit）; if（names == 0）{printf（“Memory allocation error。\ n”）;出口（1）; } / *设置FETCH之前的最大长度。 *注意获得有效VARCHAR *的“技巧”。* / for（vc_ptr =（my_vc_ptr *）names，i = 0; i &lt;limit; i ++）{vc_ptr-&gt; len =（short）padlen; vc_ptr =（my_vc_ptr *）（（char *）vc_ptr + padlen + sizeof（short））; } / *执行FETCH。 * / EXEC SQL FOR：limit FETCH emp_name_cursor INTO：names; / *打印结果。* / printf（“员工姓名 -  \ n”）; for（vc_ptr =（my_vc_ptr *）names，i = 0; i &lt;limit; i ++）{printf（“％。* s \ t（％d）\ n”，vc_ptr-&gt; len，vc_ptr-&gt; arr，vc_ptr- &gt; LEN）; vc_ptr =（my_vc_ptr *）（（char *）vc_ptr + padlen + sizeof（short））; / / *使用SQLGLS获取有关最新* SQL语句的统计信息。请注意*此示例中的最新语句*不是FETCH，而是“SELECT ENAME FROM EMP”*（光标）。* / buflen =（long）sizeof（stmt_buf）; / *返回值应为1，表示没有错误。* / sqlgls（stmt_buf，＆buflen，＆function_code）;如果（buflen！= 0）{/ *打印出SQL语句。* / printf（“SQL语句是 -  \ n％。* s \ n”，buflen，stmt_buf）; / *打印返回的长度。* / printf（“语句长度为％ld \ n”，buflen）; / *打印属性。* / printf（“功能代码为％ld \ n”，function_code）; EXEC SQL COMMIT RELEASE;出口（0）; } else {printf（“SQLGLS函数返回错误。\ n”）; EXEC SQL ROLLBACK RELEASE;出口（1）; void sql_error（）{char err_msg [512]; int buf_len，msg_len; EXEC SQL WHENEVER SQLERROR CONTINUE; buf_len = sizeof（err_msg）; sqlglm（err_msg，＆buf_len，＆msg_len）; printf（“％。* s \ n”，msg_len，err_msg）; EXEC SQL ROLLBACK RELEASE;出口（1）; }</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="handling-run-time-errors.html#GUID-1ADFD2EB-B332-4362-9A85-F56FEDD4F72A">处理运行时错误</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div>
            </div><a id="LNPCC3218"></a><div class="props_rev_3"><a id="GUID-8561AF60-861B-4EA6-8ECF-EF460FDD3A76" name="GUID-8561AF60-861B-4EA6-8ECF-EF460FDD3A76"></a><h3 id="LNPCC-GUID-8561AF60-861B-4EA6-8ECF-EF460FDD3A76" class="sect3"><span class="enumeration_section">4.5</span>光标变量</h3>
               <div>
                  <p>您可以在Pro * C / C ++程序中使用<span class="italic">游标变量</span>进行查询。游标变量是游标的句柄，必须使用PL / SQL在Oracle服务器上定义和打开游标。有关<a href="../lnpls/static-sql.html#LNPLS-GUID-4A6E054A-4002-418D-A1CA-DE849CD7E6D5" target="_blank">游标变量</a>的完整信息，请参阅<a href="../lnpls/static-sql.html#LNPLS-GUID-4A6E054A-4002-418D-A1CA-DE849CD7E6D5" target="_blank">游标</a>变量。
                  </p>
                  <p>游标变量的优点是：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>易于维护</p>
                        <p>查询在打开游标变量的存储过程中集中。如果需要更改光标，只需在一个位置进行更改：存储过程。无需更改每个应用程序。</p>
                     </li>
                     <li>
                        <p>安全方便</p>
                        <p>应用程序的用户是Pro * C / C ++应用程序连接到服务器时使用的用户名。用户必须对打开游标但不对查询中使用的表具有<span class="italic">读取</span>权限的存储过程具有<span class="italic">执行</span>权限。此功能可用于限制对表中列的访问，以及对其他存储过程的访问。
                        </p>
                     </li>
                  </ul>
               </div><a id="LNPCC3219"></a><div class="props_rev_3"><a id="GUID-00ADF01B-452D-4FEC-8D21-8C7074E5623D" name="GUID-00ADF01B-452D-4FEC-8D21-8C7074E5623D"></a><h4 id="LNPCC-GUID-00ADF01B-452D-4FEC-8D21-8C7074E5623D" class="sect4"><span class="enumeration_section">4.5.1</span>声明游标变量</h4>
                  <div>
                     <p>使用Pro * C / C ++假型SQL_CURSOR在Pro * C / C ++程序中声明游标变量。例如：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL BEGIN DECLARE SECTION; sql_cursor emp_cursor; / *游标变量* / SQL_CURSOR dept_cursor; / *另一个游标变量* / sql_cursor * ecp; / *指向游标变量的指针* / ...EXEC SQL END DECLARE SECTION; ecp =＆emp_cursor; / *为指针赋值* /</pre><p>您可以使用类型规范SQL_CURSOR（全部为大写）或sql_cursor（全部小写）声明游标变量;你不能使用混合案例。</p>
                     <p>游标变量就像Pro * C / C ++程序中的任何其他主变量一样。它具有范围，遵循C的范围规则。您可以将其作为参数传递给其他函数，甚至是您声明它的源文件外部的函数。您还可以定义返回游标变量的函数或指向游标变量的指针。<a id="d16109e2668" class="indexterm-anchor"></a></p>
                     <div class="infoboxnote" id="GUID-00ADF01B-452D-4FEC-8D21-8C7074E5623D__GUID-92B34AEC-F630-42D8-AB58-224815116671">
                        <p class="notep1">注意：</p>
                        <p>SQL_CURSOR在Pro * C / C ++生成的代码中实现为C <span class="bold">结构</span> 。因此，您始终可以通过指向另一个函数的指针传递它，或者从函数返回指向游标变量的指针。但是，如果C编译器支持这些操作，则只能传递它或按值返回它。<a id="d16109e2678" class="indexterm-anchor"></a></p>
                     </div>
                  </div>
               </div><a id="LNPCC3220"></a><div class="props_rev_3"><a id="GUID-BA294213-D113-435B-BBBD-D3BAE7B597F8" name="GUID-BA294213-D113-435B-BBBD-D3BAE7B597F8"></a><h4 id="LNPCC-GUID-BA294213-D113-435B-BBBD-D3BAE7B597F8" class="sect4"><span class="enumeration_section">4.5.2</span>分配游标变量</h4>
                  <div>
                     <p>在使用游标变量之前，无论是打开它还是FETCH它，都必须分配游标。您可以使用新的预编译器命令ALLOCATE执行此操作。例如，要分配先前示例中声明的SQL_CURSOR <span class="italic">emp_cursor</span> ，请编写语句：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL ALLOCATE：emp_cursor;</pre><p>分配光标<span class="italic">并不</span>需要对服务器的呼叫，可以在预编译或运行时。如果ALLOCATE语句包含错误（例如，未声明的主机变量），则Pro * C / C ++会发出预编译时错误。分配游标变量<span class="italic">确实</span>会导致使用堆内存。因此，您可以在程序循环中释放游标变量。光标关闭时， <span class="italic">不会</span>释放为游标变量分配的内存，但仅在执行显式CLOSE或关闭连接时才释放：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL CLOSE：emp_cursor;</pre></div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="datatypes-and-host-variables.html#GUID-A8B88F34-495A-4111-A303-2B4D79AB06A1">关闭和释放游标变量</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC3221"></a><div class="props_rev_3"><a id="GUID-81CFBC10-B559-4155-A073-EEF2DE24661E" name="GUID-81CFBC10-B559-4155-A073-EEF2DE24661E"></a><h4 id="LNPCC-GUID-81CFBC10-B559-4155-A073-EEF2DE24661E" class="sect4"><span class="enumeration_section">4.5.3</span>打开游标变量</h4>
                  <div>
                     <p><a id="d16109e2751" class="indexterm-anchor"></a>您必须在Oracle数据库服务器上打开游标变量。您不能使用嵌入式SQL OPEN命令打开游标变量。您可以通过调用打开游标的PL / SQL存储过程（并在同一语句中定义它）来打开游标变量。或者，您可以在Pro * C / C ++程序中使用匿名PL / SQL块打开并定义游标变量。
                     </p>
                     <p>例如，考虑存储在数据库中的以下PL / SQL包：</p><pre class="oac_no_warn" dir="ltr">CREATE PACKAGE demo_cur_pkg AS TYPE EmpName IS RECORD（名称VARCHAR2（10））; TYPE cur_type IS REF CURSOR RETURN EmpName;程序open_emp_cur（curs IN OUT cur_type，dept_num IN NUMBER）;结束; CREATE PACKAGE BODY demo_cur_pkg AS CREATE PROCEDURE open_emp_cur（curs IN OUT cur_type，dept_num IN NUMBER）IS BEGIN OPEN curs FOR SELECT ename FROM emp WHERE deptno = dept_num ORDER BY ename ASC;结束;结束;</pre><p>这个包已经被存储后，您可以通过从PRO * C / C ++程序调用<span class="italic">open_emp_cur</span>存储过程打开游标<span class="italic">小人</span> ，并且从光标在程序取出。例如：</p><pre class="oac_no_warn" dir="ltr">...sql_cursor emp_cursor; char emp_name [11]; ...EXEC SQL ALLOCATE：emp_cursor; / *分配游标变量* / .../ *打开服务器端的光标。* / EXEC SQL EXECUTE开始demo_cur_pkg.open_emp_cur（：emp_cursor，：dept_num）;结束; ; EXEC SQL WHENEVER NOT FOUND DO break; for（;;）{EXEC SQL FETCH：emp_cursor INTO：emp_name; printf（“％s \ n”，emp_name）; } ...
</pre><p>要在Pro * C / C ++程序中使用PL / SQL匿名块打开游标，请在匿名块中定义游标。例如：<a id="d16109e2772" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">sql_cursor emp_cursor; int dept_num = 10; ...EXEC SQL EXECUTE BEGIN OPEN：emp_cursor FOR SELECT ename FROM emp WHERE deptno =：dept_num;结束; END-EXEC; ...
</pre><p>前面的示例显示了如何使用PL / SQL打开游标变量。您还可以使用带有CURSOR子句的嵌入式SQL打开游标变量：</p><pre class="oac_no_warn" dir="ltr">...sql_cursor emp_cursor; ...EXEC ORACLE OPTION（select_error = no）; EXEC SQL SELECT CURSOR（SELECT ename FROM emp WHERE deptno =：dept_num）INTO：emp_cursor FROM DUAL; EXEC ORACLE OPTION（select_error = yes）;</pre><p>在前面的语句中，emp_cursor游标变量绑定到最外层select的第一列。第一列本身是一个查询，但它以与sql_cursor主变量兼容的形式表示，因为使用了CURSOR（...）转换子句。</p>
                     <p>在使用涉及CURSOR子句的查询之前，必须将SELECT_ERROR选项设置为NO。这将阻止取消父光标并允许程序无错误地运行。</p>
                  </div><a id="LNPCC3222"></a><div class="props_rev_3"><a id="GUID-AE4B3349-E944-43DC-832E-7A5DC59ECF07" name="GUID-AE4B3349-E944-43DC-832E-7A5DC59ECF07"></a><h5 id="LNPCC-GUID-AE4B3349-E944-43DC-832E-7A5DC59ECF07" class="sect5"><span class="enumeration_section">4.5.3.1</span>在独立存储过程中打开</h5>
                     <div>
                        <p>在前面的示例中，在包内定义了引用游标，并在该包中的过程中打开了游标。但是并不总是需要在包内定义包含打开游标的过程的引用游标。</p>
                        <p>如果需要在独立存储过程中打开游标，可以在单独的包中定义游标，然后在打开游标的独立存储过程中引用该包。这是一个例子：</p><pre class="oac_no_warn" dir="ltr">PACKAGE dummy IS TYPE EmpName IS RECORD（名称VARCHAR2（10））; TYPE emp_cursor_type IS REF CURSOR RETURN EmpName;结束; - 然后定义一个独立的过程：PROCEDURE open_emp_curs（emp_cursor IN OUT dummy.emp_cursor_type; dept_num IN NUMBER）IS BEGIN OPEN emp_cursor FOR SELECT ename FROM emp WHERE deptno = dept_num;结束;结束;</pre></div>
                  </div><a id="LNPCC3223"></a><div class="props_rev_3"><a id="GUID-FD78DAD2-7034-4CA8-8D36-3FB6A358DCA5" name="GUID-FD78DAD2-7034-4CA8-8D36-3FB6A358DCA5"></a><h5 id="LNPCC-GUID-FD78DAD2-7034-4CA8-8D36-3FB6A358DCA5" class="sect5"><span class="enumeration_section">4.5.3.2</span>返回类型</h5>
                     <div>
                        <p>在PL / SQL存储过程中定义引用游标时，必须声明游标返回的类型。</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="../lnpls/cursor-variable-declaration.html#LNPLS-GUID-CE884B31-07F0-46AA-8067-EBAF73821F3D" target="_blank"><span class="italic">游标变量声明</span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="LNPCC3224"></a><div class="props_rev_3"><a id="GUID-A8B88F34-495A-4111-A303-2B4D79AB06A1" name="GUID-A8B88F34-495A-4111-A303-2B4D79AB06A1"></a><h4 id="LNPCC-GUID-A8B88F34-495A-4111-A303-2B4D79AB06A1" class="sect4"><span class="enumeration_section">4.5.4</span>关闭和释放游标变量</h4>
                  <div>
                     <p>使用CLOSE命令关闭游标变量。例如，要关闭先前示例中已打开的<span class="italic">emp_cursor</span>游标变量，请使用嵌入式SQL语句：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL CLOSE：emp_cursor;</pre><p>游标变量是主变量，因此必须在其前面加冒号。</p>
                     <p>您可以重用ALLOCATEd游标变量。您可以根据应用程序的需要多次打开，FETCH和CLOSE。但是，如果断开与服务器的连接，然后重新连接，则必须重新分配游标变量。</p>
                     <p>游标由FREE嵌入式SQL语句释放。例如：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL FREE：emp_cursor;</pre><p>如果光标仍然打开，它将被关闭并释放为其分配的内存。</p>
                  </div>
               </div><a id="LNPCC3225"></a><div class="props_rev_3"><a id="GUID-86514859-8929-47EA-AE78-9D8831BB5838" name="GUID-86514859-8929-47EA-AE78-9D8831BB5838"></a><h4 id="LNPCC-GUID-86514859-8929-47EA-AE78-9D8831BB5838" class="sect4"><span class="enumeration_section">4.5.5</span>带OCI的游标变量（仅限第7版）</h4>
                  <div>
                     <p>您可以使用OCI功能共享Pro * C / C ++游标变量。为此，您必须使用SQLLIB转换函数<code class="codeph">SQLCDAFromResultSetCursor()</code> （以前称为<code class="codeph">sqlcdat()</code> ）和SQLCDAToResultSetCursor（以前称为<code class="codeph">sqlcurt()</code> ）。这些函数在OCI游标数据区域和Pro * C / C ++游标变量之间进行转换。
                     </p>
                     <p><code class="codeph">SQLCDAFromResultSetCursor()</code>函数将分配的游标变量转换为OCI游标数据区域。语法是：</p><pre class="oac_no_warn" dir="ltr">void SQLCDAFromResultSetCursor（dvoid * context，Cda_Def * cda，void * cur，sword * retval）;</pre><p>参数是：</p>
                     <div class="tblformal" id="GUID-86514859-8929-47EA-AE78-9D8831BB5838__GUID-94490E65-3290-4912-87DA-D25AFEC7AE98">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="29%" id="d16109e2883">参数</th>
                                 <th align="left" valign="bottom" width="71%" id="d16109e2886">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16109e2891" headers="d16109e2883 ">
                                    <p>上下文</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d16109e2891 d16109e2886 ">
                                    <p>指向SQLLIB运行时上下文的指针。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16109e2898" headers="d16109e2883 ">
                                    <p>CDA</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d16109e2898 d16109e2886 ">
                                    <p>指向目标OCI游标数据区域的指针。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16109e2905" headers="d16109e2883 ">
                                    <p>CUR</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d16109e2905 d16109e2886 ">
                                    <p>指向源Pro * C / C ++游标变量的指针。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16109e2912" headers="d16109e2883 ">
                                    <p>RETVAL</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d16109e2912 d16109e2886 ">
                                    <p>0如果没有错误，否则为SQLLIB（SQL）错误号。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnote" id="GUID-86514859-8929-47EA-AE78-9D8831BB5838__GUID-28E23E82-0DF1-4CC5-9C93-C17CFADC1199">
                        <p class="notep1">注意：</p>
                        <p>如果出现错误，CDA中的<span class="italic">V2</span>和<span class="italic">rc</span>返回代码字段也会收到错误代码。未设置CDA中已<span class="italic">处理</span>的<span class="italic">行计数</span>字段。
                        </p>
                        <p>对于非线程或默认上下文应用程序，将定义的常量SQL_SINGLE_RCTX作为上下文传递。</p>
                     </div>
                     <p><code class="codeph">SQLCDAToResultSetCursor()</code>函数将OCI游标数据区域转换为Pro * C / C ++游标变量。语法是：</p><pre class="oac_no_warn" dir="ltr">void SQLCDAToResultSetCursor（dvoid * context，void * cur，Cda_Def * cda，int * retval）;</pre><p>参数是：</p>
                     <div class="tblformal" id="GUID-86514859-8929-47EA-AE78-9D8831BB5838__GUID-439B354A-03E6-4F63-9E1C-B758DDDCC36F">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Parameters" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="29%" id="d16109e2949">参数</th>
                                 <th align="left" valign="bottom" width="71%" id="d16109e2952">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16109e2957" headers="d16109e2949 ">
                                    <p>上下文</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d16109e2957 d16109e2952 ">
                                    <p>指向SQLLIB运行时上下文的指针。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16109e2964" headers="d16109e2949 ">
                                    <p>CUR</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d16109e2964 d16109e2952 ">
                                    <p>指向目标Pro * C / C ++游标变量的指针。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16109e2971" headers="d16109e2949 ">
                                    <p>CDA</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d16109e2971 d16109e2952 ">
                                    <p>指向源OCI游标数据区的指针。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="29%" id="d16109e2978" headers="d16109e2949 ">
                                    <p>RETVAL</p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d16109e2978 d16109e2952 ">
                                    <p>如果没有错误则为0，否则为错误代码。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="infoboxnote" id="GUID-86514859-8929-47EA-AE78-9D8831BB5838__GUID-6D68A2C9-2B98-4BEA-9482-899E9185D588">
                        <p class="notep1">注意：</p>
                        <p>此例程不会更新SQLCA结构。只有在使用已转换的游标执行数据库操作后才会设置SQLCA组件。</p>
                        <p>对于非线程应用程序，将定义的常量SQL_SINGLE_RCTX作为上下文传递。</p>
                     </div>
                     <p><code class="codeph">sql2oci.h</code>头文件中提供了这些函数的ANSI和K＆R原型。必须在调用这些函数之前分配<span class="italic">cda</span>和<span class="italic">cur的</span>内存。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="advanced-topics.html#GUID-3B79020D-735A-47A9-84DA-401D86E8F712">SQLLIB公共函数的新名称</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC3226"></a><div class="props_rev_3"><a id="GUID-CBE61601-7021-436E-BC49-D68D38E7D5D0" name="GUID-CBE61601-7021-436E-BC49-D68D38E7D5D0"></a><h4 id="LNPCC-GUID-CBE61601-7021-436E-BC49-D68D38E7D5D0" class="sect4"><span class="enumeration_section">4.5.6</span>限制（游标变量）</h4>
                  <div>
                     <p>以下限制适用于游标变量的使用：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果在Pro * C / C ++和OCI V7中使用相同的游标变量，则必须在连接后立即使用SQLLDAGetCurrent（）或SQLLDAGetName（）。</p>
                        </li>
                        <li>
                           <p>您无法将游标变量转换为等效的OCI版本8。</p>
                        </li>
                        <li>
                           <p>您不能将游标变量与动态SQL一起使用。<a id="d16109e3038" class="indexterm-anchor"></a></p>
                        </li>
                        <li>
                           <p>您只能将游标变量与ALLOCATE，FETCH，FREE和CLOSE命令一起使用</p>
                        </li>
                        <li>
                           <p>DECLARE CURSOR命令不适用于游标变量。</p>
                        </li>
                        <li>
                           <p>您不能从CLOSEd游标变量FETCH。</p>
                        </li>
                        <li>
                           <p>您不能从非ALLOCATEd游标变量FETCH。</p>
                        </li>
                        <li>
                           <p>如果使用MODE = ANSI进行预编译，则关闭已关闭的游标变量是错误的。</p>
                        </li>
                        <li>
                           <p>您不能将AT子句与ALLOCATE命令一起使用，也不能将FETCH和CLOSE命令用于引用游标变量。</p>
                        </li>
                        <li>
                           <p>游标变量不能存储在数据库的列中。</p>
                        </li>
                        <li>
                           <p>游标变量本身不能在包规范中声明。只能在包规范中声明游标变量的<span class="italic">类型</span> 。
                           </p>
                        </li>
                        <li>
                           <p>游标变量不能是PL / SQL记录的组件。</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNPCC3227"></a><div class="props_rev_3"><a id="GUID-9F02336D-0AC6-420B-9E7E-8434F4B40543" name="GUID-9F02336D-0AC6-420B-9E7E-8434F4B40543"></a><h4 id="LNPCC-GUID-9F02336D-0AC6-420B-9E7E-8434F4B40543" class="sect4"><span class="enumeration_section">4.5.7</span>示例：cv_demo.sql和sample11.pc</h4>
                  <div>
                     <p>以下示例程序 -  PL / SQL脚本和Pro * C / C ++程序 - 演示了如何使用游标变量。这些源可在您的<code class="codeph">demo</code>目录中在线获取。另请参阅演示目录中的同一应用程序的另一个版本<code class="codeph">cv_demo.pc</code> 。
                     </p>
                  </div><a id="LNPCC3228"></a><div class="props_rev_3"><a id="GUID-6813FCBB-18DB-45BE-BCE9-3420E9054FD1" name="GUID-6813FCBB-18DB-45BE-BCE9-3420E9054FD1"></a><h5 id="LNPCC-GUID-6813FCBB-18DB-45BE-BCE9-3420E9054FD1" class="sect5"><span class="enumeration_section">4.5.7.1</span> cv_demo.sql</h5>
                     <div>
                        <div class="section"><pre class="oac_no_warn" dir="ltr">- 声明的包的PL / SQL源 - 打开引用游标CONNECT SCOTT / TIGER;创建或替换包装emp_demo_pkg为TYPE emp_cur_type IS REF CURSOR RETURN emp％ROWTYPE; PROCEDURE open_cur（curs IN OUT emp_cur_type，dno IN NUMBER）; END emp_demo_pkg;创建或替换程序包emp_demo_pkg AS程序open_cur（curs IN OUT emp_cur_type，dno IN NUMBER）是BEGIN OPEN curs FOR SELECT * FROM emp WHERE deptno = dno ORDER BY ename ASC;结束; END emp_demo_pkg;</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="LNPCC3229"></a><div class="props_rev_3"><a id="GUID-28822FC2-51AD-4E0C-8096-BFDB132E9B43" name="GUID-28822FC2-51AD-4E0C-8096-BFDB132E9B43"></a><h5 id="LNPCC-GUID-28822FC2-51AD-4E0C-8096-BFDB132E9B43" class="sect5"><span class="enumeration_section">4.5.7.2</span> sample11.pc</h5>
                     <div><pre class="oac_no_warn" dir="ltr">/ * *使用游标变量从EMP表中获取。*光标在EMP_DEMO_PKG包中存储的PL / SQL过程* open_cur中打开。* *此软件包可在演示目录中的* sample11.sql文件中在线获得。* * / #include &lt;stdio.h&gt; #include &lt;sqlca.h&gt; #include &lt;stdlib.h&gt; #include &lt;sqlda.h&gt; #include &lt;sqlcpr.h&gt; / *错误处理函数。* / void sql_error（msg）char * msg; {size_t clen，fc; char cbuf [128]; clen = sizeof（cbuf）; sqlgls（（char *）cbuf，（size_t *）＆clen，（size_t *）＆fc）; printf（“\ n％s \ n”，msg）; printf（“Statement is  -  \ n％s \ n”，cbuf）; printf（“功能代码为％ld \ n \ n”，fc）; sqlglm（（char *）cbuf，（size_t *）＆clen，（size_t *）＆clen）; printf（“\ n％。* s \ n”，clen，cbuf）; EXEC SQL WHENEVER SQLERROR CONTINUE; EXEC SQL ROLLBACK工作版;出口（EXIT_FAILURE）; } void main（）{char temp [32]; EXEC SQL BEGIN DECLARE SECTION; char * uid =“scott / tiger”; SQL_CURSOR \ temp_cursor; int dept_num; struct {int emp_num; char emp_name [11]; char job [10];经理; char hire_date [10];浮动工资;浮动佣金; int dept_num; } emp_info; struct {short emp_num_ind; short emp_name_ind; short job_ind; short manager_ind; short hire_date_ind; short salary_ind; short commission_ind;短dept_num_ind; } emp_info_ind; EXEC SQL END DECLARE SECTION;执行SQL WHENEVER SQLERROR执行sql_error（“Oracle错误”）; / *连接到Oracle。* / EXEC SQL CONNECT：uid; / *分配游标变量。* / EXEC SQL ALLOCATE：emp_cursor; / *当NO DATA FOUND时退出内部for（;;）循环。 * / EXEC SQL WHENEVER NOT FOUND DO break; for（;;）{printf（“\ n输入部门编号（0表示退出）：”）;得到（临时）; dept_num = atoi（temp）; if（dept_num &lt;= 0）中断; EXEC SQL EXECUTE开始emp_demo_pkg.open_cur（：emp_cursor，：dept_num）;结束; END-EXEC; printf（“\ n为department％d  -  \ n”，dept_num）; printf（“ENAME SAL COMM \ n”）; printf（“----- --- ---- \ n”）; / *将EMP表中的每一行读取到数据结构中。注意使用并行指示器结构。* / for（;;）{EXEC SQL FETCH：emp_cursor INTO：emp_info INDICATOR：emp_info_ind; printf（“％s”，emp_info.emp_name）; printf（“％8.2f”，emp_info.salary）; if（emp_info_ind.commission_ind！= 0）printf（“NULL \ n”）; else printf（“％8.2f \ n”，emp_info.commission）; / *关闭光标。* / EXEC SQL WHENEVER SQLERROR CONTINUE; EXEC SQL CLOSE：emp_cursor; / *与Oracle断开连接。* / EXEC SQL ROLLBACK工作版;出口（EXIT_SUCCESS）; }</pre></div>
                  </div>
               </div>
            </div><a id="LNPCC3231"></a><a id="LNPCC3230"></a><div class="props_rev_3"><a id="GUID-4AF4D5FD-C41E-4597-BC33-6CF0266A5E84" name="GUID-4AF4D5FD-C41E-4597-BC33-6CF0266A5E84"></a><h3 id="LNPCC-GUID-4AF4D5FD-C41E-4597-BC33-6CF0266A5E84" class="sect3"><span class="enumeration_section">4.6</span>上下文变量</h3>
               <div>
                  <p><span class="italic">运行时上下文</span> （通常简称为上下文）是客户端内存中包含零个或多个连接，零个或多个游标，其内联选项（如MODE，HOLD_CURSOR，RELEASE_CURSOR，SELECT_ERROR等）的区域的句柄。 ）和其他额外的州信息。
                  </p>
                  <p>要定义上下文主机变量，请使用伪类型<span class="italic">sql_context</span> 。例如：</p><pre class="oac_no_warn" dir="ltr">sql_context my_context;</pre><p>使用CONTEXT ALLOCATE预编译器指令为上下文分配和初始化内存：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL语境分配： <span class="italic">上下文</span> ;</pre><p>其中<code class="codeph">context</code>是一个宿主变量，它是上下文的句柄。例如：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL语境分配：my_context;</pre><p>使用CONTEXT USE预编译器指令从源文件中的那一点开始，而不是在程序逻辑流程中定义嵌入式SQL语句（例如CONNECT，INSERT，DECLARE CURSOR等）将使用的上下文。 。在使用另一个CONTEXT USE语句之前，将使用该上下文。语法是：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL语境使用{： <span class="italic">context</span> | DEFAULT};</pre><p>关键字DEFAULT指定在随后执行的所有嵌入式SQL语句中使用默认（也称为全局）上下文，直到遇到另一个CONTEXT USE指令。一个简单的例子是：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL语境使用：my_context;</pre><p>如果尚未定义和分配上下文变量<code class="codeph">my_context</code> ，则返回错误。
                  </p>
                  <p>CONTEXT FREE语句释放上下文不再需要后使用的内存：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL语境免费： <span class="italic">上下文</span> ;</pre><p>一个例子是：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL语境免费：my_context;</pre><p>以下示例演示了在同一应用程序中使用默认上下文作为用户定义的上下文：</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-4AF4D5FD-C41E-4597-BC33-6CF0266A5E84__GUID-D27DCC80-75D5-4C78-8BEF-0D8F7828FED6">上下文使用示例</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section"><pre class="oac_no_warn" dir="ltr">#include &lt;sqlca.h&gt; #include &lt;ociextp.h&gt; main（）{sql_context ctx1; char * usr1 =“scott / tiger”; char * usr2 =“system / manager”; / *在全局运行时上下文中建立与SCOTT的连接* / EXEC SQL CONNECT：usr1; / *在运行时上下文中建立与SYSTEM的连接ctx1 * / EXEC SQL语境分配：ctx1; EXEC SQL语境使用：ctx1; EXEC SQL CONNECT：usr2; / *从模式SCOTT * / EXEC SQL CONTEXT USE DEFAULT插入到emp表中; EXEC SQL INSERT INTO emp（empno，ename）VALUES（1234，'WALKER'）; ...}</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="LNPCC3232"></a><div class="props_rev_3"><a id="GUID-F78340AF-531F-4D1F-8D59-5C5860E7C367" name="GUID-F78340AF-531F-4D1F-8D59-5C5860E7C367"></a><h3 id="LNPCC-GUID-F78340AF-531F-4D1F-8D59-5C5860E7C367" class="sect3"><span class="enumeration_section">4.7</span>通用ROWID</h3>
               <div>
                  <p>数据库服务器中使用了两种表组织： <span class="italic">堆表</span>和<span class="italic">组织表</span> 。
                  </p>
                  <p>堆表是默认值。物理行地址（ROWID）是一个永久属性，用于标识堆表中的行。物理ROWID的外部字符格式是base-64编码的18字节字符串。</p>
                  <p>索引组织表没有物理行地址作为永久标识符。为这些表定义了<span class="italic">逻辑</span> ROWID。当您使用索引组织表中的SELECT ROWID ...语句时，ROWID是一个不透明的结构，包含表的主键，控制信息和可选的物理“猜测”。您可以在包含诸如“WHERE ROWID = ...”的子句的SQL语句中使用此ROWID来从表中检索值。
                  </p>
                  <p>Universal ROWID可用于物理ROWID和逻辑ROWID。您可以使用通用ROWID访问堆表或索引组织表中的数据，因为表组织可以更改而不会影响应用程序。用于ROWID的列数据类型是UROWID（ <span class="italic">长度</span> ），其中<code class="codeph">length</code>是可选的。
                  </p>
                  <p>在所有新应用程序中使用通用ROWID。</p>
                  <p>以这种方式使用通用ROWID变量：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>将其声明为OCIRowid的类型指针。</p>
                     </li>
                     <li>
                        <p>为通用ROWID变量分配内存。</p>
                     </li>
                     <li>
                        <p>使用通用ROWID作为主机绑定变量。</p>
                     </li>
                     <li>
                        <p>完成后释放内存。</p>
                     </li>
                  </ul>
                  <p>例如：</p><pre class="oac_no_warn" dir="ltr">OCIRowid * my_urowid; ...EXEC SQL ALLOCATE：my_urowid; / *将my_urowid绑定为类型SQLT_RDD  - 没有隐式转换* / EXEC SQL SELECT rowid INTO：my_urowid FROM my_table WHERE ...; ...EXEC SQL UPDATE my_table SET ...WHERE rowid =：my_urowid; EXEC SQL FREE my_urpwid; ...
</pre><p>您还可以选择使用宽度在19（18个字节加上空终止符）和4001之间的字符主机变量作为通用ROWID的主机绑定变量。堆表支持基于字符的通用ROWID，仅用于向后兼容。因为通用ROWID可以是可变长度，所以可以进行截断。</p>
                  <p>以这种方式使用字符变量：</p><pre class="oac_no_warn" dir="ltr">/ * n基于表特征* / int n = 4001; char my_urowid_char [n]; ...EXEC SQL ALLOCATE：my_urowid_char; / *将my_urowid_char绑定为SQLT_STR * / EXEC SQL SELECT rowid INTO：my_urowid_char FROM my_table WHERE ...; EXEC ORACLE选项（CHAR_MAP = STRING）; EXEC SQL UPDATE my_table SET ...WHERE rowid =：my_urowid_char; EXEC SQL FREE：my_urowid_char; ...</pre></div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="embedded-SQL.html#GUID-1A65920B-74ED-41FB-B120-C46A8EA86018">定位更新</a></li>
                        <li><a href="../cncpt/logical-storage-structures.html#CNCPT-GUID-13CE5EDA-8C66-4CA0-87B5-4069215A368D" target="_blank"><span class="italic">逻辑存储结构</span></a></li>
                     </ul>
                  </div>
               </div><a id="LNPCC3233"></a><div class="props_rev_3"><a id="GUID-019031ED-BC2F-4C9F-B5EF-FEFF6707C910" name="GUID-019031ED-BC2F-4C9F-B5EF-FEFF6707C910"></a><h4 id="LNPCC-GUID-019031ED-BC2F-4C9F-B5EF-FEFF6707C910" class="sect4"><span class="enumeration_section">4.7.1</span> SQLRowidGet（）</h4>
                  <div>
                     <p>SQLLIB函数SQLRowidGet（）提供了检索插入，更新或选择的最后一行的通用ROWID的指针的功能。函数原型及其参数是：</p><pre class="oac_no_warn" dir="ltr">void SQLRowidGet（dvoid * rctx，OCIRowid ** urid）;</pre><p>rctx（IN）</p>
                     <p>是指向运行时上下文的指针。对于缺省上下文或非线程情况，请传递SQL_SINGLE_RCTX。</p>
                     <p>urid（OUT）</p>
                     <p>是指向通用ROWID指针的指针。正常执行完成后，这将指向有效的ROWID。如果发生错误，则返回NULL。</p>
                     <div class="infoboxnote" id="GUID-019031ED-BC2F-4C9F-B5EF-FEFF6707C910__GUID-EDEF2AC1-3BA8-411F-8A1F-1BB7C54A48AA">
                        <p class="notep1">注意：</p>
                        <p>通用ROWID指针必须<span class="bold"> </span>之前已分配调用SQLRowidGet（）。之后在通用ROWID上免费使用。</p>
                     </div>
                  </div>
               </div>
            </div><a id="LNPCC3234"></a><div class="props_rev_3"><a id="GUID-755B5F00-C7D7-4F3F-87FD-2AF5E5703D36" name="GUID-755B5F00-C7D7-4F3F-87FD-2AF5E5703D36"></a><h3 id="LNPCC-GUID-755B5F00-C7D7-4F3F-87FD-2AF5E5703D36" class="sect3"><span class="enumeration_section">4.8</span>主机结构</h3>
               <div>
                  <p>您可以使用C结构来包含主机变量。您在SELECT或FETCH语句的INTO子句中以及INSERT语句的VALUES列表中引用包含主变量的结构。主机结构的每个组件都必须是合法的Pro * C / C ++主机变量，如<a href="datatypes-and-host-variables.html#GUID-843D717B-B10E-4D4B-AAC5-7B4755379604__g39867" title="主机变量的C数据类型">表4-4中</a>所定义。
                  </p>
                  <p>当结构用作主变量时，在SQL语句中仅使用结构的名称。但是，结构的每个成员都将数据发送到Oracle，或者在查询中从Oracle接收数据。以下示例显示了用于将员工添加到EMP表的主机结构：</p><pre class="oac_no_warn" dir="ltr">typedef struct {char emp_name [11]; / *一个大于列长度* / int emp_number; int dept_number;浮动工资; } emp_record; .../ *定义类型为“emp_record”的新结构* / emp_record new_employee; strcpy（new_employee.emp_name，“CHEN”）; new_employee.emp_number = 9876; new_employee.dept_number = 20; new_employee.salary = 4250.00; EXEC SQL INSERT INTO emp（ename，empno，deptno，sal）VALUES（：new_employee）;</pre><p>在结构中声明成员的顺序必须与SQL语句中关联列的顺序匹配，或者如果省略INSERT语句中的列列表，则必须与数据库表中的顺序匹配。</p>
                  <p>例如，以下主机结构的使用<span class="italic">无效</span> ，并导致运行时错误：</p><pre class="oac_no_warn" dir="ltr">struct {int empno;浮动工资; / * struct components的顺序错误* / char emp_name [10]; } emp_record; ...SELECT empno，ename，sal INTO：emp_record FROM emp;</pre><p>该示例是错误的，因为结构的组件未按与选择列表中的关联列相同的顺序声明。SELECT语句的正确形式是：</p><pre class="oac_no_warn" dir="ltr">SELECT empno，sal，ename / * sal和ename的逆序* / INTO：emp_record FROM emp;</pre></div><a id="LNPCC3235"></a><div class="props_rev_3"><a id="GUID-DFA577FA-20C1-408E-A7F0-C15D34A45D47" name="GUID-DFA577FA-20C1-408E-A7F0-C15D34A45D47"></a><h4 id="LNPCC-GUID-DFA577FA-20C1-408E-A7F0-C15D34A45D47" class="sect4"><span class="enumeration_section">4.8.1</span>主机结构和数组</h4>
                  <div>
                     <p><span class="italic">数组</span>是与单个变量名称关联的相关数据项（称为<span class="italic">元素</span> ）的集合。声明为主变量时，该数组称为<span class="italic">主机数组</span> 。同样，声明为数组的指示符变量称为<span class="italic">指示符数组</span> 。指示符数组可以与任何主机阵列相关联。 <a id="d16109e3380" class="indexterm-anchor"></a> 
                     </p>
                     <p>主机阵列可以通过让您使用单个SQL语句操作整个数据项集合来提高性能。除了少数例外，您可以在允许标量主机变量的任何地方使用主机阵列。此外，您可以将指示符数组与任何主机数组相关联。</p>
                     <p>您可以将主机阵列用作主机结构的组件。在以下示例中，包含数组的结构用于将三个新条目插入到EMP表中：</p><pre class="oac_no_warn" dir="ltr">struct {char emp_name [3] [10]; int emp_number [3]; int dept_number [3]; } emp_rec; ...strcpy（emp_rec.emp_name [0]，“ANQUETIL”）; strcpy（emp_rec.emp_name [1]，“MERCKX”）; strcpy（emp_rec.emp_name [2]，“HINAULT”）; emp_rec.emp_number [0] = 1964; emp_rec.dept_number [0] = 5; emp_rec.emp_number [1] = 1974; emp_rec.dept_number [1] = 5; emp_rec.emp_number [2] = 1985; emp_rec.dept_number [2] = 5; EXEC SQL INSERT INTO \ temp（ename，empno，deptno）VALUES（：emp_rec）; ...</pre></div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="embedded-PL-SQL.html#GUID-4C56DC0E-B857-405D-B88E-93B19DD9FCF2">主机阵列</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC3236"></a><div class="props_rev_3"><a id="GUID-D10478D8-E5CA-4042-9888-5E61F13A487C" name="GUID-D10478D8-E5CA-4042-9888-5E61F13A487C"></a><h4 id="LNPCC-GUID-D10478D8-E5CA-4042-9888-5E61F13A487C" class="sect4"><span class="enumeration_section">4.8.2</span> PL / SQL记录</h4>
                  <div>
                     <p>您不能将C <span class="bold">结构</span>绑定到PL / SQL记录。<a id="d16109e3414" class="indexterm-anchor"></a></p>
                  </div>
               </div><a id="LNPCC3237"></a><div class="props_rev_3"><a id="GUID-DC40E72F-3A0F-49D0-8672-46D3645E1AFF" name="GUID-DC40E72F-3A0F-49D0-8672-46D3645E1AFF"></a><h4 id="LNPCC-GUID-DC40E72F-3A0F-49D0-8672-46D3645E1AFF" class="sect4"><span class="enumeration_section">4.8.3</span>嵌套结构和联合</h4>
                  <div>
                     <p> <a id="d16109e3438" class="indexterm-anchor"></a>您无法嵌套主机结构。以下示例<span class="italic">无效</span> ： <a id="d16109e3446" class="indexterm-anchor"></a><a id="d16109e3450" class="indexterm-anchor"></a> 
                     </p><pre class="oac_no_warn" dir="ltr">struct {int emp_number; struct {float salary;浮动佣金; sal_info; / * INVALID * / int dept_number; } emp_record; ...EXEC SQL SELECT empno，sal，comm，deptno INTO：emp_record FROM emp;</pre><p>此外，您不能将C <span class="bold">联合</span>用作主机结构，也不能将<span class="bold">联合</span>嵌套在要用作主机结构的结构中。
                     </p>
                  </div>
               </div><a id="LNPCC3238"></a><div class="props_rev_3"><a id="GUID-345907F5-DB09-4008-B7CA-3F3CA0FB7502" name="GUID-345907F5-DB09-4008-B7CA-3F3CA0FB7502"></a><h4 id="LNPCC-GUID-345907F5-DB09-4008-B7CA-3F3CA0FB7502" class="sect4"><span class="enumeration_section">4.8.4</span>主机指标结构</h4>
                  <div>
                     <p>当您需要使用指标变量，但主机变量包含在主机结构中时，您需要设置第二个结构，其中包含主机结构中每个主机变量的指示符变量。</p>
                     <p>例如，假设您声明主机结构<span class="italic">student_record</span> ，如下所示：</p><pre class="oac_no_warn" dir="ltr">struct {char s_name [32]; int s_id; char grad_date [9]; } student_record;</pre><p>如果要在查询中使用主机结构，例如</p><pre class="oac_no_warn" dir="ltr">EXEC SQL SELECT student_name，student_idno，gradu_date INTO：student_record FROM college_enrollment WHERE student_idno = 7200;</pre><p>并且您需要知道毕业日期是否为NULL，那么您必须声明一个单独的主机指示器结构。你声明这个</p><pre class="oac_no_warn" dir="ltr">struct {short s_name_ind; / *指标变量必须是short * / short s_id_ind; short grad_date_ind; } student_record_ind;</pre><p>以与引用主机指示符变量相同的方式引用SQL语句中的指示符结构：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL SELECT student_name，student_idno，gradu_date INTO：student_record INDICATOR：student_record_ind FROM college_enrollment WHERE student_idno = 7200;</pre><p>查询完成后，每个所选组件的NULL / NOT NULL状态在主机指示器结构中可用。</p>
                     <div class="infoboxnote" id="GUID-345907F5-DB09-4008-B7CA-3F3CA0FB7502__GUID-6914528D-5113-4EF0-AE2B-A303ECA60729">
                        <p class="notep1">注意：</p>
                        <p>本指南通常通过将<span class="italic">_ind</span>附加到主变量或结构名称来命名指示符变量和指示符结构。但是，指标变量的名称完全是任意的。您可以采用不同的约定，或者根本不使用约定。<a id="d16109e3509" class="indexterm-anchor"></a></p>
                     </div>
                  </div>
               </div><a id="LNPCC3239"></a><div class="props_rev_3"><a id="GUID-8B48C0C8-3FE0-42CD-A4BB-1CDD360E5E6B" name="GUID-8B48C0C8-3FE0-42CD-A4BB-1CDD360E5E6B"></a><h4 id="LNPCC-GUID-8B48C0C8-3FE0-42CD-A4BB-1CDD360E5E6B" class="sect4"><span class="enumeration_section">4.8.5</span>示例程序：光标和主机结构</h4>
                  <div>
                     <div class="section">
                        <p>本节中的演示程序显示了一个使用显式游标的查询，将数据选择到主机结构中。该程序位于<code class="codeph">demo</code>目录中的<code class="codeph">sample2.pc</code>文件中。
                        </p><pre class="oac_no_warn" dir="ltr">/ * * sample2.pc * *此程序连接到ORACLE，声明并打开游标，*获取所有*销售人员的姓名，工资和佣金，显示结果，然后关闭游标。* / #include &lt;stdio.h&gt; #include &lt;sqlca.h&gt; #define UNAME_LEN 20 #define PWD_LEN 40 / * *使用预编译器typedef'ing功能为身份验证主机*变量创建*以null结尾的字符串。（这不是必需的 - 普通的char * *也可以。这只是为了说明。）* / typedef char asciiz [PWD_LEN]; EXEC SQL TYPE asciiz IS STRING（PWD_LEN）参考; asciiz用户名; asciiz密码; struct emp_info {asciiz emp_name;浮动工资;浮动佣金; }; / *声明处理不可恢复错误的函数。* / void sql_error（）; main（）{struct emp_info * emp_rec_ptr; / *为emp_info结构分配内存。* / if（（emp_rec_ptr =（struct emp_info *）malloc（sizeof（struct emp_info）））== 0）{fprintf（stderr，“Memory allocation error。\ n”）;出口（1）; } / *连接到ORACLE。 * / strcpy（用户名，“SCOTT”）; strcpy（密码，“TIGER”）;执行SQL WHENEVER SQLERROR DO sql_error（“ORACLE error--”）; EXEC SQL CONNECT：用户名IDENTIFIED BY：密码; printf（“\ n以用户身份连接到ORACLE：％s \ n”，用户名）; / *声明游标。所有静态SQL显式游标*都包含SELECT命令。 'salespeople'是SQL标识符，*不是（C）主变量。* / EXEC SQL DECLARE销售人员游说选择ENAME，SAL，来自EMP的COMM员工'SALES％'; / *打开光标。* / EXEC SQL OPEN销售人员; / *准备打印结果。* / printf（“\ n \ n公司的销售人员是 -  \ n \ n”）; printf（“Salesperson Salary Commission \ n”）; printf（“----------- ------ ---------- \ n”）; / *循环，获取所有销售人员的统计信息。*当光标上无法检索到*数据时，导致程序中断循环。* / EXEC SQL WHENEVER NOT FOUND DO break; for（;;）{EXEC SQL FETCH salespeople INTO：emp_rec_ptr; printf（“％ -  11s％9.2f％13.2f \ n”，emp_rec_ptr-&gt; emp_name，emp_rec_ptr-&gt; salary，emp_rec_ptr-&gt;佣金）; } / *关闭光标。* / EXEC SQL CLOSE销售人员;的printf（ “\ nArrivederci \ n \ n”）; EXEC SQL COMMIT WORK RELEASE;出口（0）; } void sql_error（msg）char * msg; {char err_msg [512]; int buf_len，msg_len; EXEC SQL WHENEVER SQLERROR CONTINUE; printf（“\ n％s \ n”，msg）; / *调用sqlglm（）以获取*错误消息的完整文本。* / buf_len = sizeof（err_msg）; sqlglm（err_msg，＆buf_len，＆msg_len）; printf（“％。* s \ n”，msg_len，err_msg）; EXEC SQL ROLLBACK RELEASE;出口（1）; }</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="LNPCC3240"></a><div class="props_rev_3"><a id="GUID-44E37B7E-C78E-4F3E-87D5-19152BDCE1B8" name="GUID-44E37B7E-C78E-4F3E-87D5-19152BDCE1B8"></a><h3 id="LNPCC-GUID-44E37B7E-C78E-4F3E-87D5-19152BDCE1B8" class="sect3"><span class="enumeration_section">4.9</span>指针变量</h3>
               <div>
                  <p>C支持<span class="italic">指向</span> “指向”其他变量的<span class="italic">指针</span> 。指针保存变量的地址（存储位置），而不是其值。 <a id="d16109e3554" class="indexterm-anchor"></a> 
                  </p>
               </div><a id="LNPCC3241"></a><div class="props_rev_3"><a id="GUID-B78A2FF2-F5B9-42E8-B83D-1E87C0DF40D1" name="GUID-B78A2FF2-F5B9-42E8-B83D-1E87C0DF40D1"></a><h4 id="LNPCC-GUID-B78A2FF2-F5B9-42E8-B83D-1E87C0DF40D1" class="sect4"><span class="enumeration_section">4.9.1</span>指针变量声明</h4>
                  <div>
                     <p>您可以按照正常的C实践将指针定义为主变量，如下一个示例所示： <a id="d16109e3570" class="indexterm-anchor"></a><a id="d16109e3574" class="indexterm-anchor"></a> 
                     </p><pre class="oac_no_warn" dir="ltr">int * int_ptr; char * char_ptr;</pre></div>
               </div><a id="LNPCC3242"></a><div class="props_rev_3"><a id="GUID-555A6C7C-6E35-4778-B5CE-2E970B112BCF" name="GUID-555A6C7C-6E35-4778-B5CE-2E970B112BCF"></a><h4 id="LNPCC-GUID-555A6C7C-6E35-4778-B5CE-2E970B112BCF" class="sect4"><span class="enumeration_section">4.9.2</span>指针变量引用</h4>
                  <div>
                     <p>在SQL语句中，使用冒号前缀指针，如以下示例所示： <a id="d16109e3592" class="indexterm-anchor"></a> 
                     </p><pre class="oac_no_warn" dir="ltr">EXEC SQL SELECT intcol INTO：int_ptr FROM ...
</pre><p>除了指向字符串的指针外，引用值的大小由声明中指定的基类型的大小给出。对于指向字符串的指针，引用的值假定为以NULL结尾的字符串。它的大小是在运行时通过调用<code class="codeph">strlen()</code>函数确定的。 <a id="d16109e3604" class="indexterm-anchor"></a> 
                     </p>
                     <p>您可以使用指针来引用<span class="bold">结构</span>的成员。首先，声明一个指针主机变量，然后将指针设置为所需成员的地址，如后面的示例所示。<span class="bold">struct</span>成员和指针变量的数据类型必须相同。大多数编译器会警告您不匹配。 <a id="d16109e3617" class="indexterm-anchor"></a> 
                     </p><pre class="oac_no_warn" dir="ltr">struct {int i; char c; } structvar; int * i_ptr; char * c_ptr; ...main（）{i_ptr =＆structvar.i; c_ptr =＆structvar.c; / *在SQL语句中使用i_ptr和c_ptr。* / ...
</pre></div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="datatypes-and-host-variables.html#GUID-2CCB3206-DE6F-4C67-B44E-83BB14C09BF3">全球化支持</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC3243"></a><div class="props_rev_3"><a id="GUID-AE9924EA-0731-4AC9-BED0-2C52E8A2A808" name="GUID-AE9924EA-0731-4AC9-BED0-2C52E8A2A808"></a><h4 id="LNPCC-GUID-AE9924EA-0731-4AC9-BED0-2C52E8A2A808" class="sect4"><span class="enumeration_section">4.9.3</span>结构指针</h4>
                  <div>
                     <p>您可以使用指向结构的指针作为主变量。以下示例</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>声明一个结构</p>
                        </li>
                        <li>
                           <p>声明指向结构的指针</p>
                        </li>
                        <li>
                           <p>为结构分配内存</p>
                        </li>
                        <li>
                           <p>在结构中使用struct指针作为查询中的宿主变量</p>
                        </li>
                        <li>
                           <p>取消引用struct组件以打印结果</p>
                        </li>
                     </ul><pre class="oac_no_warn" dir="ltr">struct EMP_REC {int emp_number;浮动工资; }; char * name =“HINAULT”; ...struct EMP_REC * sal_rec; sal_rec =（struct EMP_REC *）malloc（sizeof（struct EMP_REC））; ...EXEC SQL SELECT empno，sal INTO：sal_rec FROM emp WHERE ename =：name; printf（“％s的员工编号和薪水：”，姓名）; printf（“％d，％g \ n”，sal_rec-&gt; emp_number，sal_rec-&gt; salary）;</pre><p>在SQL语句中，指向主机结构的指针与主机结构完全相同。不需要“地址”符号（ <span class="bold">＆</span> ）;事实上，使用它是一个错误。
                     </p>
                  </div>
               </div>
            </div><a id="LNPCC3245"></a><a id="LNPCC3244"></a><div class="props_rev_3"><a id="GUID-2CCB3206-DE6F-4C67-B44E-83BB14C09BF3" name="GUID-2CCB3206-DE6F-4C67-B44E-83BB14C09BF3"></a><h3 id="LNPCC-GUID-2CCB3206-DE6F-4C67-B44E-83BB14C09BF3" class="sect3"><span class="enumeration_section">4.10</span>全球化支持</h3>
               <div>
                  <p>尽管广泛使用的7位或8位ASCII和EBCDIC字符集足以表示罗马字母，但某些亚洲语言（如日语）包含数千个字符。这些语言可能需要至少16位（两个字节）来表示每个字符。Oracle如何处理这些不同的语言？</p>
                  <p>Oracle提供全球化支持，允许您处理单字节和多字节字符数据并在字符集之间进行转换。它还允许您的应用程序在不同的语言环境中运行。通过全球化支持，数字和日期格式自动适应为用户会话指定的语言约定。因此，全球化支持允许世界各地的用户以其母语与Oracle进行交互。</p>
                  <p>您可以通过指定各种全球化支持或NLS参数来控制与语言相关的功能的操作。可以在Oracle初始化文件中设置这些参数的缺省值。下表显示了每个Globalization Support参数指定的内容。<a id="d16109e3690" class="indexterm-anchor"></a><a id="d16109e3692" class="indexterm-anchor"></a><a id="d16109e3694" class="indexterm-anchor"></a><a id="d16109e3698" class="indexterm-anchor"></a><a id="d16109e3702" class="indexterm-anchor"></a><a id="d16109e3706" class="indexterm-anchor"></a><a id="d16109e3710" class="indexterm-anchor"></a><a id="d16109e3714" class="indexterm-anchor"></a><a id="d16109e3718" class="indexterm-anchor"></a></p>
                  <div class="tblformal" id="GUID-2CCB3206-DE6F-4C67-B44E-83BB14C09BF3__GUID-083D0116-F87C-4BE3-8229-D13E9AE3679D">
                     <p class="titleintable">表4-6 <span class="bold" id="GUID-2CCB3206-DE6F-4C67-B44E-83BB14C09BF3__I22631">全球化支持参数</span></p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="全球化支持参数" width="100%" border="1" summary="Globalization Suport Parameters" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="47%" id="d16109e3733">全球化支持参数</th>
                              <th align="left" valign="bottom" width="53%" id="d16109e3736">指定</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d16109e3741" headers="d16109e3733 ">
                                 <p>NLS_LANGUAGE</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d16109e3741 d16109e3736 ">
                                 <p>语言相关的约定</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d16109e3748" headers="d16109e3733 ">
                                 <p>NLS_TERRITORY</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d16109e3748 d16109e3736 ">
                                 <p>领土依赖的公约</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d16109e3755" headers="d16109e3733 ">
                                 <p>NLS_DATE_FORMAT</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d16109e3755 d16109e3736 ">
                                 <p>日期格式</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d16109e3762" headers="d16109e3733 ">
                                 <p>NLS_DATE_LANGUAGE</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d16109e3762 d16109e3736 ">
                                 <p>日期和月份名称的语言</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d16109e3769" headers="d16109e3733 ">
                                 <p>NLS_NUMERIC_CHARACTERS</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d16109e3769 d16109e3736 ">
                                 <p>十进制字符和组分隔符</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d16109e3776" headers="d16109e3733 ">
                                 <p>NLS_CURRENCY</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d16109e3776 d16109e3736 ">
                                 <p>当地货币符号</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d16109e3783" headers="d16109e3733 ">
                                 <p>NLS_ISO_CURRENCY</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d16109e3783 d16109e3736 ">
                                 <p>ISO货币符号</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d16109e3790" headers="d16109e3733 ">
                                 <p>NLS_SORT</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d16109e3790 d16109e3736 ">
                                 <p>排序顺序</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>主要参数是NLS_LANGUAGE和NLS_TERRITORY。 NLS_LANGUAGE指定语言相关功能的默认值，包括：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>服务器消息的语言</p>
                     </li>
                     <li>
                        <p>日期和月份名称的语言</p>
                     </li>
                     <li>
                        <p>排序顺序</p>
                     </li>
                  </ul>
                  <p>NLS_TERRITORY指定依赖于区域的功能的默认值，包括</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>日期格式</p>
                     </li>
                     <li>
                        <p>十进制字符</p>
                     </li>
                     <li>
                        <p>组分隔符</p>
                     </li>
                     <li>
                        <p>当地货币符号</p>
                     </li>
                     <li>
                        <p>ISO货币符号</p>
                     </li>
                  </ul>
                  <p>您可以通过指定参数NLS_LANG来控制用户会话的语言相关全球化支持功能的操作，如下所示：<a id="d16109e3828" class="indexterm-anchor"></a></p><pre class="oac_no_warn" dir="ltr">NLS_LANG = &lt;语言&gt; _ &lt;领土&gt;。&lt;字符集&gt;</pre><p>其中<span class="italic">language</span>指定用户会话的NLS_LANGUAGE值， <span class="italic">territory</span>指定NLS_TERRITORY的值， <span class="italic">字符集</span>指定用于终端的编码方案。<span class="italic">编码方案</span> （通常称为字符集或代码页）是一系列数字代码，对应于终端可以显示的字符集。它还包括控制与终端通信的代码。 <a id="d16109e3848" class="indexterm-anchor"></a><a id="d16109e3850" class="indexterm-anchor"></a><a id="d16109e3853" class="indexterm-anchor"></a> 
                  </p>
                  <p>您将NLS_LANG定义为环境变量（或系统上的等效变量）。例如，在使用C shell的UNIX上，您可以按如下方式定义NLS_LANG：</p><pre class="oac_no_warn" dir="ltr">setenv NLS_LANG French_France。WE8ISO8859P1</pre><p>在Oracle数据库会话期间，您可以更改Globalization Support参数的值。使用ALTER SESSION语句如下：</p><pre class="oac_no_warn" dir="ltr">ALTER SESSION SET &lt;globalization support_parameter&gt; = &lt;value&gt;</pre><p>Pro * C / C ++完全支持所有全球化支持功能，允许您的应用程序处理存储在Oracle数据库中的外语数据。例如，您可以声明外语字符变量并将它们传递给字符串函数，如INSTRB，LENGTHB和SUBSTRB。这些函数分别与INSTR，LENGTH和SUBSTR函数具有相同的语法，但是逐字节而不是逐个字符地操作。 <a id="d16109e3869" class="indexterm-anchor"></a> 
                  </p>
                  <p>您可以使用NLS_INITCAP，NLS_LOWER和NLS_UPPER函数来处理大小写转换的特殊实例。并且，您可以使用函数NLSSORT基于语言而不是二进制排序来指定WHERE子句比较。您甚至可以将全球化支持参数传递给TO_CHAR，TO_DATE和TO_NUMBER函数。</p>
               </div>
            </div><a id="LNPCC3246"></a><div class="props_rev_3"><a id="GUID-B7DF37DC-3027-47E3-8F51-1910BAEF7E52" name="GUID-B7DF37DC-3027-47E3-8F51-1910BAEF7E52"></a><h3 id="LNPCC-GUID-B7DF37DC-3027-47E3-8F51-1910BAEF7E52" class="sect3"><span class="enumeration_section">4.11</span> NCHAR变量</h3>
               <div>
                  <p>三种内部数据库数据类型可以存储国家字符集数据。它们是<span class="italic">NCHAR，NCLOB</span>和<span class="italic">NVARCHAR2</span> （也称为<span class="italic">NCHAR VARYING）</span> 。您仅在关系列中使用这些数据类型。
                  </p>
               </div><a id="LNPCC3247"></a><div class="props_rev_3"><a id="GUID-4E8D9C89-C151-4714-8BC6-74C8CF6786B1" name="GUID-4E8D9C89-C151-4714-8BC6-74C8CF6786B1"></a><h4 id="LNPCC-GUID-4E8D9C89-C151-4714-8BC6-74C8CF6786B1" class="sect4"><span class="enumeration_section">4.11.1</span>字符集[IS] NCHAR_CS</h4>
                  <div>
                     <p>要指定哪些主机变量包含国家字符集数据，请在字符变量声明中插入“ <span class="italic">CHARACTER SET [IS] NCHAR_CS”</span>子句。然后，您可以将国家字符集数据存储在这些变量中。您可以省略令牌<span class="italic">IS</span> 。 NCHAR_CS是国家字符集的名称。
                     </p>
                     <p>例如：</p><pre class="oac_no_warn" dir="ltr">char字符集是nchar_cs * str = <span class="bold">“&lt;</span> Japanese_string&gt; <span class="bold">”;</span>
</pre><p>在此示例中， <span class="italic">&lt;Japanese_string&gt;</span>由国家字符集<span class="italic">AL16UTF16中</span>的Unicode字符组成，由变量NLS_NCHAR定义。</p>
                     <p>您可以通过在命令行中输入NLS_CHAR = str并在应用程序中编码来完成相同的操作：</p><pre class="oac_no_warn" dir="ltr">char * str =“&lt;Japanese_string&gt;”</pre><p>Pro * C / C ++将以这种方式声明的变量视为环境变量<span class="italic">NLS_NCHAR</span>指定的字符集。 NCHAR变量的可变大小被指定为字节计数，与普通C变量的方式相同。
                     </p>
                     <p>要将数据选择到str，请使用以下简单查询：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL SELECT ENAME INTO：str FROM EMP WHERE DEPT = n'&lt;Japanese_string1&gt;';</pre><p>或者，您可以在以下SELECT中使用<span class="italic">str</span> ：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL SELECT DEPT INTO：dept FROM DEPT_TAB WHERE ENAME =：str;</pre></div>
               </div><a id="LNPCC3248"></a><div class="props_rev_3"><a id="GUID-5B6EBB19-E0F0-4625-874B-75D034B8C339" name="GUID-5B6EBB19-E0F0-4625-874B-75D034B8C339"></a><h4 id="LNPCC-GUID-5B6EBB19-E0F0-4625-874B-75D034B8C339" class="sect4"><span class="enumeration_section">4.11.2</span>环境变量NLS_NCHAR</h4>
                  <div>
                     <p>当NLS_LOCAL = NO时，Pro * C / C ++支持具有数据库支持的国家字符集。当NLS_LOCAL = NO，并且新环境变量NLS_NCHAR设置为有效的国家字符集时，数据库服务器支持NCHAR。</p>
                     <p>NLS_NCHAR指定用于国家字符集数据（NCHAR，NVARCHAR2，NCLOB）的字符集。如果未指定，将使用由NLS_LANG定义或间接定义的字符集。</p>
                     <p>在预编译时和运行时，NLS_NCHAR必须具有有效的国家字符集规范（不是由NLS_LANG设置的语言名称）。SQLLIB在执行第一个SQL语句时执行运行时检查。如果预编译时和运行时字符集不同，SQLLIB将返回错误代码。</p>
                  </div>
               </div><a id="LNPCC3249"></a><div class="props_rev_3"><a id="GUID-DDBD9085-0981-444E-8F3F-EFF46E67284D" name="GUID-DDBD9085-0981-444E-8F3F-EFF46E67284D"></a><h4 id="LNPCC-GUID-DDBD9085-0981-444E-8F3F-EFF46E67284D" class="sect4"><span class="enumeration_section">4.11.3</span> VAR中的CONVBUFSZ条款</h4>
                  <div>
                     <p>您可以使用EXEC SQL VAR语句将<span class="italic">主机变量等效</span>为Oracle外部数据类型来覆盖默认分配，这称为<span class="italic">主机变量等效</span> 。
                     </p>
                     <p>EXEC SQL VAR语句可以有一个可选子句： <code class="codeph">CONVBUFSZ (&lt;size&gt;)</code> 。您可以在Oracle运行时库中指定缓冲区的大小， <code class="codeph">&lt;size&gt;</code> （以字节为单位），用于在字符集之间执行指定主机变量的转换。
                     </p>
                     <p>新语法是：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL VAR <span class="italic">host_variable</span> IS <span class="italic">数据类型</span> [CONVBUFSZ [IS]（ <span class="italic">size</span> ）];</pre><dl>
                        <dt class="dlterm"><a name="GUID-DDBD9085-0981-444E-8F3F-EFF46E67284D__GUID-9B86DB8C-70C0-4E56-AB52-686F355CA52E">
                              <!-- --></a></dt>
                        <dd>
                           <p>要么</p><pre class="oac_no_warn" dir="ltr">EXEC SQL VAR <span class="italic">host_variable</span> [CONVBUFSZ [IS]（ <span class="italic">size</span> ）];</pre><p>其中<span class="italic">数据类型</span>是：</p><pre class="oac_no_warn" dir="ltr"><span class="italic">type_name</span> [（{ <span class="italic">length</span> | <span class="italic">precision</span> ， <span class="italic">scale</span> }）]</pre></dd>
                     </dl>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="embedded-SQL-statements-and-directives.html#GUID-E8C91676-9AED-4D25-99F2-C3A38E4D0129">VAR（Oracle嵌入式SQL指令）</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCC3250"></a><div class="props_rev_3"><a id="GUID-F17FDFF0-782B-4BF7-B473-1BE6B53260F9" name="GUID-F17FDFF0-782B-4BF7-B473-1BE6B53260F9"></a><h4 id="LNPCC-GUID-F17FDFF0-782B-4BF7-B473-1BE6B53260F9" class="sect4"><span class="enumeration_section">4.11.4</span>嵌入式SQL中的字符串</h4>
                  <div>
                     <p>嵌入式SQL语句中的多字节字符串由一个字符文字组成，该字符文字将字符串标识为多字节，后面紧跟字符串。该字符串用通常的单引号括起来。</p>
                     <p>例如，嵌入式SQL语句，如</p><pre class="oac_no_warn" dir="ltr">EXEC SQL SELECT empno INTO：emp_num FROM emp WHERE ename = N'&lt;Japanese_string&gt;';</pre><p>包含多字节字符串（&lt;Japanese_string&gt;实际上可能是汉字），因为字符串前面的N字符文字将其标识为多字节字符串。由于Oracle不区分大小写，因此您可以在示例中使用“n”或“N”。</p>
                  </div>
               </div><a id="LNPCC3251"></a><div class="props_rev_3"><a id="GUID-581B1EC3-3579-4453-BDB3-F53F9C7FE6DD" name="GUID-581B1EC3-3579-4453-BDB3-F53F9C7FE6DD"></a><h4 id="LNPCC-GUID-581B1EC3-3579-4453-BDB3-F53F9C7FE6DD" class="sect4"><span class="enumeration_section">4.11.5</span>字符串限制</h4>
                  <div>
                     <p>您不能将数据类型等效（TYPE或VAR命令）与多字节字符串一起使用。</p>
                     <p>在Pro * C / C ++中，动态SQL方法4不适用于多字节字符串主变量。</p>
                  </div>
               </div><a id="LNPCC3252"></a><div class="props_rev_3"><a id="GUID-1AEEED85-BEF4-408C-91C5-C1331A124F7D" name="GUID-1AEEED85-BEF4-408C-91C5-C1331A124F7D"></a><h4 id="LNPCC-GUID-1AEEED85-BEF4-408C-91C5-C1331A124F7D" class="sect4"><span class="enumeration_section">4.11.6</span>指标变量</h4>
                  <div>
                     <p>您可以将指示符变量与主机字符变量一起使用，这些变量是多字节字符（使用NLS_CHAR选项指定）。</p>
                     <p></p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
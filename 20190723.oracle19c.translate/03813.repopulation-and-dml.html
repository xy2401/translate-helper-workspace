<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="The IM column store periodically refreshes objects that have been modified. You can control this behavior using initialization parameters and the DBMS_INMEMORY package.">
      <meta name="description" content="The IM column store periodically refreshes objects that have been modified. You can control this behavior using initialization parameters and the DBMS_INMEMORY package.">
      <title>Optimizing Repopulation of the IM Column Store</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database In-Memory Guide">
      <meta property="og:description" content="The IM column store periodically refreshes objects that have been modified. You can control this behavior using initialization parameters and the DBMS_INMEMORY package.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database In-Memory Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-memory-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-22T09:02:38-07:00">
      <meta name="dcterms.title" content="Database In-Memory Guide">
      <meta name="dcterms.dateCopyrighted" content="2016, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96137-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="optimizing-in-memory-aggregation.html" title="Previous" type="text/html">
      <link rel="next" href="high-availability-and-the-im-column-store.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="INMEM">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="optimizing-in-memory-aggregation.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="high-availability-and-the-im-column-store.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database In-Memory Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="advanced-optimizations-for-in-memory-queries.html" property="item" typeof="WebPage"><span property="name">Optimizing In-Memory Queries</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Optimizing Repopulation of the IM Column Store</li>
            </ol>
            <a id="GUID-85AB84D5-1308-430A-BED2-281F3E9515B2" name="GUID-85AB84D5-1308-430A-BED2-281F3E9515B2"></a>
            
            <h2 id="INMEM-GUID-85AB84D5-1308-430A-BED2-281F3E9515B2" class="sect2"><span class="enumeration_chapter">10 </span>Optimizing Repopulation of the IM Column Store
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The IM column store periodically refreshes objects that have been modified. You can control this behavior using initialization parameters and the <code class="codeph">DBMS_INMEMORY</code> package.
               </p>
               <p>This chapter contains the following topics:</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="repopulation-and-dml.html#GUID-857EFBD6-6D03-4543-9FAB-F66B5C16D0C7">About Repopulation of the IM Column Store</a><br>The automatic refresh of columnar data after significant modifications is called <span class="bold">repopulation</span>.
                  </li>
                  <li class="ulchildlink"><a href="repopulation-and-dml.html#GUID-ED2DDBF3-2279-4472-84F4-195C939435AC">How Data Loading Works with the IM Column Store</a><br>The IM column store uses different mechanisms depending on the type of data loading: conventional DML, direct path loads, and partition exchange loads.
                  </li>
                  <li class="ulchildlink"><a href="repopulation-and-dml.html#GUID-333C0C67-1422-4391-BBCB-2A10DF8AC612">When the Database Repopulates the IM Column Store</a><br>The database repopulates the IM column store automatically according to an internal algorithm. You can manually disable repopulation, and influence its aggressiveness.
                  </li>
                  <li class="ulchildlink"><a href="repopulation-and-dml.html#GUID-3ACF448A-C685-432B-84E9-DB8719CF3359">Controls for Repopulation of the IM Column Store</a><br>Repopulation occurs automatically by default, but you can control its aggressiveness, or disable it altogether.
                  </li>
                  <li class="ulchildlink"><a href="repopulation-and-dml.html#GUID-0E33E887-A6D5-4D56-BFC5-43D3EDFE60D4">Optimizing Trickle Repopulation: Tutorial</a><br>In this tutorial, you increase the percentage of background processes available for trickle repopulation.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="advanced-optimizations-for-in-memory-queries.html#GUID-33034151-7BD7-4186-B336-C693FBB27634" title="This Part explains how to optimize queries using In-Memory Expressions, join groups, and In-Memory aggregation. It also explains how the IM column store repopulates modified data.">Optimizing In-Memory Queries</a></p>
                  </div>
               </div>
            </div>
            
            <div class="props_rev_3"><a id="GUID-857EFBD6-6D03-4543-9FAB-F66B5C16D0C7" name="GUID-857EFBD6-6D03-4543-9FAB-F66B5C16D0C7"></a><h3 id="INMEM-GUID-857EFBD6-6D03-4543-9FAB-F66B5C16D0C7" class="sect3"><span class="enumeration_section">10.1 </span>About Repopulation of the IM Column Store
               </h3>
               <div>
                  <p>The automatic refresh of columnar data after significant modifications is called <span class="bold">repopulation</span>.
                  </p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="repopulation-and-dml.html#GUID-35945277-B84B-45FB-A0A2-EFC0513702D2">Row Modifications and the Transaction Journal</a><br>An In-Memory Compression Unit (IMCU) is a read-only structure that does not modify data in place when DML occurs on an internal table.
                     </li>
                     <li class="ulchildlink"><a href="repopulation-and-dml.html#GUID-7FD4FA4E-E752-4B62-8FC2-55A9CC31704A">Automatic Repopulation</a><br>When DML occurs for objects in the IM column store, the database repopulates them automatically.
                     </li>
                     <li class="ulchildlink"><a href="repopulation-and-dml.html#GUID-8ECC0C1A-A42A-4FA5-9790-C0F54BFB6D25">Manual Repopulation of External Tables</a><br>External tables are not eligible for automatic repopulation.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="repopulation-and-dml.html#GUID-85AB84D5-1308-430A-BED2-281F3E9515B2" title="The IM column store periodically refreshes objects that have been modified. You can control this behavior using initialization parameters and the DBMS_INMEMORY package.">Optimizing Repopulation of the IM Column Store</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-35945277-B84B-45FB-A0A2-EFC0513702D2" name="GUID-35945277-B84B-45FB-A0A2-EFC0513702D2"></a><h4 id="INMEM-GUID-35945277-B84B-45FB-A0A2-EFC0513702D2" class="sect4"><span class="enumeration_section">10.1.1 </span>Row Modifications and the Transaction Journal
                  </h4>
                  <div>
                     <p>An In-Memory Compression Unit (IMCU) is a read-only structure that does not modify data in place when DML occurs on an internal table.</p>
                     <p>The <a href="glossary.html#GUID-2EE0FA0D-D987-4B05-A714-4F6D126868F1"><span class="xrefglossterm">Snapshot Metadata Unit (SMU)</span></a> associated with each IMCU tracks row modifications in a <a href="glossary.html#GUID-16BF775D-7A77-4F8C-94F2-D1EBF2D67D1B"><span class="xrefglossterm">transaction journal</span></a>. If a query accesses the data, and discovers modified rows, then it can obtain the corresponding rowids from the transaction journal, and then retrieve the modified rows from the buffer cache.
                     </p>
                     <p>As the number of modifications increase, so do the size of SMUs, and the amount of data that must be fetched from the transaction journal or database buffer cache. To avoid degrading query performance through journal access, background processes repopulate modified objects.</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repopulation-and-dml.html#GUID-857EFBD6-6D03-4543-9FAB-F66B5C16D0C7" title="The automatic refresh of columnar data after significant modifications is called repopulation.">About Repopulation of the IM Column Store</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-7FD4FA4E-E752-4B62-8FC2-55A9CC31704A" name="GUID-7FD4FA4E-E752-4B62-8FC2-55A9CC31704A"></a><h4 id="INMEM-GUID-7FD4FA4E-E752-4B62-8FC2-55A9CC31704A" class="sect4"><span class="enumeration_section">10.1.2 </span>Automatic Repopulation
                  </h4>
                  <div>
                     <p>When DML occurs for objects in the IM column store, the database repopulates them automatically.</p>
                     <p>Automatic repopulation takes the following forms:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="glossary.html#GUID-6F8CD872-FBA2-4519-8204-66D3E45FA1C9"><span class="xrefglossterm">threshold-based repopulation</span></a></p>
                           <p>This form depends on the percentage of stale entries in the transaction journal for an IMCU. </p>
                        </li>
                        <li>
                           <p><a href="glossary.html#GUID-34CC73ED-D322-4628-AC54-3F51065E8BCE"><span class="xrefglossterm">trickle repopulation</span></a></p>
                           <p>This form supplements threshold-based repopulation by periodically refreshing columnar data even when the staleness threshold has not been reached.</p>
                        </li>
                     </ul>
                     <p>During automatic repopulation, traditional access mechanisms are available. Data is always accessible from the buffer cache or disk. Additionally, the IM column store is always transactionally consistent with the data on disk. No matter where the query accesses the data, the database always returns consistent results.</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-7FD4FA4E-E752-4B62-8FC2-55A9CC31704A__GUID-F81C7115-FC1F-44CF-8A3E-257A6409A095">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="in-memory-column-store-architecture.html#GUID-2CA38EA0-26A0-44E7-97AD-A4156964BDC1" title="Every SMU contains a transaction journal. The database uses the transaction journal to keep the IMCU transactionally consistent.">Transaction Journal</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="in-memory-column-store-architecture.html#GUID-15B0EEBC-31F6-4192-957A-56D79B7E63E2" title="In response to queries and DML, server processes scan columnar data and update SMU metadata. Background processes populate row data from disk into the IM column store.">In-Memory Process Architecture</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repopulation-and-dml.html#GUID-857EFBD6-6D03-4543-9FAB-F66B5C16D0C7" title="The automatic refresh of columnar data after significant modifications is called repopulation.">About Repopulation of the IM Column Store</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-8ECC0C1A-A42A-4FA5-9790-C0F54BFB6D25" name="GUID-8ECC0C1A-A42A-4FA5-9790-C0F54BFB6D25"></a><h4 id="INMEM-GUID-8ECC0C1A-A42A-4FA5-9790-C0F54BFB6D25" class="sect4"><span class="enumeration_section">10.1.3 </span>Manual Repopulation of External Tables
                  </h4>
                  <div>
                     <p>External tables are not eligible for automatic repopulation.</p>
                     <p>The IM column store manages external tables differently from internal tables. Because external tables are read-only, they are not updated through DML, and thus do not rely on the transaction journal. For this reason, the database does not repopulate external tables automatically. However, you can refresh external tables manually by using <code class="codeph">DBMS_INMEMORY.REPOPULATE</code>. In-Memory scans of external tables are only supported when the tables are completely populated in the IM column store.
                     </p>
                     <div class="infoboxnote" id="GUID-8ECC0C1A-A42A-4FA5-9790-C0F54BFB6D25__GUID-1AE27939-3B65-476A-8822-A52175C3FDA5">
                        <p class="notep1">Note:</p>
                        <p>Sessions that query In-Memory external tables must have the initialization parameter <code class="codeph">QUERY_REWRITE_INTEGRITY</code> set to <code class="codeph">stale_tolerated</code>. If an external table is modified, then the results from the IM column store are undefined.
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-8ECC0C1A-A42A-4FA5-9790-C0F54BFB6D25__GUID-F1C5A305-D9D5-4876-B332-28BF9D728198">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="populating-the-imcs-manually.html#GUID-F1B26BDD-614B-4E4C-A986-8977B4B27DF0" title="This example populates an external table that has the INMEMORY option.">Populating an In-Memory External Table Using DBMS_INMEMORY.POPULATE: Example</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../refrn/QUERY_REWRITE_INTEGRITY.html#REFRN-GUID-23655494-DF65-4F0E-A89F-8333222297F5" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn more about the <code class="codeph">QUERY_REWRITE_INTEGRITY</code> initialization parameter
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repopulation-and-dml.html#GUID-857EFBD6-6D03-4543-9FAB-F66B5C16D0C7" title="The automatic refresh of columnar data after significant modifications is called repopulation.">About Repopulation of the IM Column Store</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-ED2DDBF3-2279-4472-84F4-195C939435AC" name="GUID-ED2DDBF3-2279-4472-84F4-195C939435AC"></a><h3 id="INMEM-GUID-ED2DDBF3-2279-4472-84F4-195C939435AC" class="sect3"><span class="enumeration_section">10.2 </span>How Data Loading Works with the IM Column Store
               </h3>
               <div>
                  <p>The IM column store uses different mechanisms depending on the type of data loading: conventional DML, direct path loads, and partition exchange loads.</p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="repopulation-and-dml.html#GUID-A556E5A1-020A-4511-8DE7-8D5119CFB452">How Conventional DML Works with the IM Column Store</a><br>Conventional DML processes one row or array of rows at a time, and inserts rows below the high water mark. Regardless of whether the IM column store is enabled, the database processes DML using the buffer cache.
                     </li>
                     <li class="ulchildlink"><a href="repopulation-and-dml.html#GUID-A8AB9768-5695-44C7-8482-6BE18A415318">How Direct Path Loads Work with the IM Column Store</a><br>A direct path load is an <code class="codeph">INSERT /*+APPEND*/</code> statement or a SQL*Loader operation in which <code class="codeph">DIRECT=true</code> .
                     </li>
                     <li class="ulchildlink"><a href="repopulation-and-dml.html#GUID-B8D2EA63-7FC2-489A-BCD3-6A9D70480EEC">How a Partition Exchange Load Works with the IM Column Store</a><br>A <span class="bold">partition exchange load</span> is a technique that exchanges a table for a partition. An exchange load is almost instantaneous because it modifies metadata instead of data.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="repopulation-and-dml.html#GUID-85AB84D5-1308-430A-BED2-281F3E9515B2" title="The IM column store periodically refreshes objects that have been modified. You can control this behavior using initialization parameters and the DBMS_INMEMORY package.">Optimizing Repopulation of the IM Column Store</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-A556E5A1-020A-4511-8DE7-8D5119CFB452" name="GUID-A556E5A1-020A-4511-8DE7-8D5119CFB452"></a><h4 id="INMEM-GUID-A556E5A1-020A-4511-8DE7-8D5119CFB452" class="sect4"><span class="enumeration_section">10.2.1 </span>How Conventional DML Works with the IM Column Store
                  </h4>
                  <div>
                     <p>Conventional DML processes one row or array of rows at a time, and inserts rows below the high water mark. Regardless of whether the IM column store is enabled, the database processes DML using the buffer cache.</p>
                     <p>IMCUs are read-only. When a statement modifies a row in an IMCU, the IM column store records the rowid in the associated SMU.</p>
                     <p>A <a href="glossary.html#GUID-F4F8F39E-D4CA-461B-86B9-8E9EF9E3BD8F"><span class="xrefglossterm">Column Compression Unit (CU)</span></a> entry becomes stale when its value differs from the value in its corresponding journal entry. For example, a transaction may change an employee’s weekly salary from <code class="codeph">1000</code> to <code class="codeph">1200</code>, but the actual value in the IMCU is still <code class="codeph">1000</code>. The transaction journal records the rowid of the stale row and its SCN.
                     </p>
                     <div class="infoboxnote" id="GUID-A556E5A1-020A-4511-8DE7-8D5119CFB452__GUID-AAD389A8-F367-4FFE-B8EF-F852F1D8B40D">
                        <p class="notep1">Note:</p>
                        <p>The transaction journal does not record the new value. Rather, it indicates the corresponding row as stale as of a specific SCN.</p>
                     </div>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="repopulation-and-dml.html#GUID-BB1D4D35-35AF-4C19-BDC0-B4AC37D2C32F">Staleness Threshold</a><br>As the number of stale entries in an IMCU increases, the speed of the IMCU scan decreases.
                        </li>
                        <li class="ulchildlink"><a href="repopulation-and-dml.html#GUID-B3C7EF3A-4AD0-48D2-9E72-F4EAB8129DF1">Double Buffering</a><br>In double buffering, background processes create new IMCU versions by combining the original rows with the latest modified rows. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repopulation-and-dml.html#GUID-ED2DDBF3-2279-4472-84F4-195C939435AC" title="The IM column store uses different mechanisms depending on the type of data loading: conventional DML, direct path loads, and partition exchange loads.">How Data Loading Works with the IM Column Store</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-BB1D4D35-35AF-4C19-BDC0-B4AC37D2C32F" name="GUID-BB1D4D35-35AF-4C19-BDC0-B4AC37D2C32F"></a><h5 id="INMEM-GUID-BB1D4D35-35AF-4C19-BDC0-B4AC37D2C32F" class="sect5"><span class="enumeration_section">10.2.1.1 </span>Staleness Threshold
                     </h5>
                     <div>
                        <p>As the number of stale entries in an IMCU increases, the speed of the IMCU scan decreases.</p>
                        <p>Performance decreases because the database must fetch the modified rows from the buffer cache or disk, rather than from the IM column store. For this reason, Oracle Database repopulates an IMCU when the number of stale entries in an IMCU reaches an internal <a href="glossary.html#GUID-78ED27B2-6946-4302-BDD2-3F8A4F0DA42C"><span class="xrefglossterm">staleness threshold</span></a>.
                        </p>
                        <p>The database determines the threshold using heuristics that consider the frequency of  IMCU access and the number of stale rows. Repopulation is more frequent for IMCUs that are accessed frequently or have a higher percentage of stale rows.</p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-BB1D4D35-35AF-4C19-BDC0-B4AC37D2C32F__GUID-9AEE311F-DC8E-4FB2-853E-46CA64D7E66B">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="in-memory-column-store-architecture.html#GUID-50A30EC3-1CD1-4BFC-9BD1-9AC55D0B4AAE" title="An In-Memory Compression Unit (IMCU) is a compressed, read-only storage unit that contains data for one or more columns.">In-Memory Compression Units (IMCUs)</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../cncpt/memory-architecture.html#GUID-4FF66585-E469-4631-9225-29D75594CD14" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a> to learn more about the database buffer cache
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="repopulation-and-dml.html#GUID-A556E5A1-020A-4511-8DE7-8D5119CFB452" title="Conventional DML processes one row or array of rows at a time, and inserts rows below the high water mark. Regardless of whether the IM column store is enabled, the database processes DML using the buffer cache.">How Conventional DML Works with the IM Column Store</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-B3C7EF3A-4AD0-48D2-9E72-F4EAB8129DF1" name="GUID-B3C7EF3A-4AD0-48D2-9E72-F4EAB8129DF1"></a><h5 id="INMEM-GUID-B3C7EF3A-4AD0-48D2-9E72-F4EAB8129DF1" class="sect5"><span class="enumeration_section">10.2.1.2 </span>Double Buffering
                     </h5>
                     <div>
                        <p>In double buffering, background processes create new IMCU versions by combining the original rows with the latest modified rows. </p>
                        <p>When the database begins either <a href="glossary.html#GUID-6F8CD872-FBA2-4519-8204-66D3E45FA1C9"><span class="xrefglossterm">threshold-based repopulation</span></a> or <a href="glossary.html#GUID-34CC73ED-D322-4628-AC54-3F51065E8BCE"><span class="xrefglossterm">trickle repopulation</span></a>, the IM column store uses double buffering. As shown in the following figure, the IM column store maintains two versions of an IMCU simultaneously, with the original stale IMCU remaining accessible to queries.
                        </p>
                        <div class="figure" id="GUID-B3C7EF3A-4AD0-48D2-9E72-F4EAB8129DF1__GUID-7233CD1E-DD75-451F-BD5A-FA72CFAF5185">
                           <p class="titleinfigure">Figure 10-1 Double Buffering</p><img src="img/inmem_3v_021.png" alt="Description of Figure 10-1 follows" title="Description of Figure 10-1 follows" longdesc="img_text/inmem_3v_021.html"><br><a href="img_text/inmem_3v_021.html">Description of "Figure 10-1 Double Buffering"</a></div>
                        <!-- class="figure" -->
                        <p>The basic steps of double buffering are:</p>
                        <ol>
                           <li>
                              <p>In the original SMU, the database marks the existing IMCU as the original version as of a specific SCN.</p>
                           </li>
                           <li>
                              <p>Background processes create a new version of the IMCU by combining the original rows with the latest versions of the modified rows.</p>
                           </li>
                           <li>
                              <p>In the journal of the new SMU, the database tracks DML operations that occur during IMCU creation.</p>
                           </li>
                        </ol>
                        <p>In this way, the original IMCU stays online. The database keeps both old and new IMCUs versions for as long as they are useful, or until the IM column store is under space pressure.</p>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="repopulation-and-dml.html#GUID-A556E5A1-020A-4511-8DE7-8D5119CFB452" title="Conventional DML processes one row or array of rows at a time, and inserts rows below the high water mark. Regardless of whether the IM column store is enabled, the database processes DML using the buffer cache.">How Conventional DML Works with the IM Column Store</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-A8AB9768-5695-44C7-8482-6BE18A415318" name="GUID-A8AB9768-5695-44C7-8482-6BE18A415318"></a><h4 id="INMEM-GUID-A8AB9768-5695-44C7-8482-6BE18A415318" class="sect4"><span class="enumeration_section">10.2.2 </span>How Direct Path Loads Work with the IM Column Store
                  </h4>
                  <div>
                     <p>A direct path load is an <code class="codeph">INSERT /*+APPEND*/</code> statement or a SQL*Loader operation in which <code class="codeph">DIRECT=true</code> .
                     </p>
                     <p>In a direct path load, the database writes formatted data blocks directly to the data files, bypassing the database buffer cache. The database appends the data above the high water mark, which is the boundary between used and unused space in a segment. Direct path loads operate are “all or nothing” operations: the operation either inserts all data or no data.</p>
                     <div class="figure" id="GUID-A8AB9768-5695-44C7-8482-6BE18A415318__GUID-085E34DE-8B94-4EBE-83EC-2C60715B1DA5">
                        <p class="titleinfigure">Figure 10-2 Direct Path Loads and the High Water Mark</p><img src="img/inmem_3v_024.png" alt="Description of Figure 10-2 follows" title="Description of Figure 10-2 follows" longdesc="img_text/inmem_3v_024.html"><br><a href="img_text/inmem_3v_024.html">Description of "Figure 10-2 Direct Path Loads and the High Water Mark"</a></div>
                     <!-- class="figure" -->
                     <p>When the segment is populated in the IM column store, a direct path load works as follows:</p>
                     <ol>
                        <li>
                           <p>You load data using a  <code class="codeph">CREATE TABLE AS SELECT</code> or <code class="codeph">INSERT /*+APPEND*/</code> statement. Only the current session is aware of the DML.
                           </p>
                        </li>
                        <li>
                           <p>You commit the statement.</p>
                        </li>
                        <li>
                           <p>The high water mark moves to encompass the new data, which alerts the IMCU that data is missing. <code class="codeph">V$IM_SEGMENTS.BYTES_NOT_POPULATED</code> now indicates the size of the newly inserted data.
                           </p>
                        </li>
                        <li>
                           <p>The IM column store manages repopulation based on the following algorithm:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>If the affected object has a <code class="codeph">PRIORITY</code> set to a value other than <code class="codeph">NONE</code>, then the database repopulates the data.
                                 </p>
                              </li>
                              <li>
                                 <p>If the affected object has a <code class="codeph">PRIORITY</code> set to <code class="codeph">NONE</code>, then the database repopulates at the next full scan of the object.
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repopulation-and-dml.html#GUID-ED2DDBF3-2279-4472-84F4-195C939435AC" title="The IM column store uses different mechanisms depending on the type of data loading: conventional DML, direct path loads, and partition exchange loads.">How Data Loading Works with the IM Column Store</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-B8D2EA63-7FC2-489A-BCD3-6A9D70480EEC" name="GUID-B8D2EA63-7FC2-489A-BCD3-6A9D70480EEC"></a><h4 id="INMEM-GUID-B8D2EA63-7FC2-489A-BCD3-6A9D70480EEC" class="sect4"><span class="enumeration_section">10.2.3 </span>How a Partition Exchange Load Works with the IM Column Store
                  </h4>
                  <div>
                     <p>A <span class="bold">partition exchange load</span> is a technique that exchanges a table for a partition. An exchange load is almost instantaneous because it modifies metadata instead of data.
                     </p>
                     <p>To perform an exchange load, follow these steps:</p>
                     <ol>
                        <li>
                           <p>Create a nonpartitoned table, called a <span class="italic">source table</span>.
                           </p>
                        </li>
                        <li>
                           <p>Load rows into the source table.</p>
                        </li>
                        <li>
                           <p>Exchange an existing table partition, called the <span class="italic">target partition</span>, with the table.
                           </p>
                        </li>
                     </ol>
                     <p>For the target partition to be populated in the IM column store after the exchange, the source table must be populated in the IM column store <span class="italic">before</span> the exchange. The following scenarios are possible, depending on the whether the target partition is populated:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Before the exchange, the target partition is not populated in the IM column store. For example, the partition is empty. </p>
                           <p>After the exchange, the source table is no longer populated in the IM column store. The source IMCUs are now associated with the target partition.</p>
                        </li>
                        <li>
                           <p>Before the exchange, the target partition is populated in the IM column store. </p>
                           <p>After the exchange, the source table remains populated in the IM column store.</p>
                        </li>
                     </ul>
                     <p></p>
                     <div class="example" id="GUID-B8D2EA63-7FC2-489A-BCD3-6A9D70480EEC__GUID-484DE42C-A3B5-4A32-AC11-8E4C8778AA57">
                        <p class="titleinexample">Example 10-1 INMEMORY Partition Exchange Load</p>
                        <p>In this example, the <code class="codeph">sales</code> table, which is partitioned, has the <code class="codeph">INMEMORY</code> attribute set at the table level. All non-empty partitions in this table are currently populated. The <code class="codeph">sales_p042616</code> partition is currently empty. Your goal is to populate the empty partition <code class="codeph">sales_p042616</code> with data contained in text files. The following figure illustrates the before and after scenarios.
                        </p>
                        <div class="figure" id="GUID-B8D2EA63-7FC2-489A-BCD3-6A9D70480EEC__GUID-F41EB8FE-DADD-4125-9954-B00BB4331FE7">
                           <p class="titleinfigure">Figure 10-3 Partition Exchange</p><img src="img/inmem_3v_023.png" alt="Description of Figure 10-3 follows" title="Description of Figure 10-3 follows" longdesc="img_text/inmem_3v_023.html"><br><a href="img_text/inmem_3v_023.html">Description of "Figure 10-3 Partition Exchange"</a></div>
                        <!-- class="figure" -->
                        <p>To perform the exchange, do the following:</p>
                        <ol>
                           <li>
                              <p>Create an external table <code class="codeph">sales_tmp_ext</code> using the <code class="codeph">CREATE TABLE ... ORGANIZATION EXTERNAL</code> statement.
                              </p>
                              <p>The external table does not reside in the database, and can be in any format for which an access driver is provided. The table is read-only.</p>
                           </li>
                           <li>
                              <p>Create a nonpartitioned table named <code class="codeph">sales_tmp_ld</code> using <code class="codeph">CREATE TABLE ... AS SELECT * FROM sales_tmp_ext</code>.
                              </p>
                              <p>The <code class="codeph">sales_tmp_ld</code> table is not external, which means it stores rows in the data files.
                              </p>
                           </li>
                           <li>
                              <p>Set the <code class="codeph">INMEMORY</code> attribute in <code class="codeph">sales_tmp_ld</code> using an <code class="codeph">ALTER TABLE</code> statement.
                              </p>
                              <p>The <code class="codeph">sales_tmp_ld</code> table is now marked as <code class="codeph">INMEMORY</code>, but it is not yet populated into the IM column store.
                              </p>
                           </li>
                           <li>
                              <p>Populate <code class="codeph">sales_tmp_ld</code> into the IM column store by forcing a full table scan.
                              </p>
                              <p>For example, the following query forces a full scan:</p><pre class="pre codeblock"><code>SELECT /*+ FULL(s) NO_PARALLEL(s) */ COUNT(*) FROM sales_tmp_ld s;</code></pre></li>
                           <li>
                              <p>Exchange the <code class="codeph">sales_p042616</code> partition with the <code class="codeph">sales_tmp_ld</code> table.
                              </p>
                              <p>For example, alter the <code class="codeph">sales</code> table as follows:
                              </p><pre class="pre codeblock"><code>ALTER TABLE sales EXCHANGE PARTITION sales_p042616 WITH TABLE sales_tmp_ld;</code></pre></li>
                        </ol>
                        <p>After the exchange completes, the <code class="codeph">sales_p042616</code> partition is populated in the IM column store, and the  <code class="codeph">sales_tmp_ld</code> is no longer populated.
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-B8D2EA63-7FC2-489A-BCD3-6A9D70480EEC__GUID-5663894F-4B95-4C78-B42C-C44BE9BDFE0E">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=GUID-2AF83B38-5895-495F-B3E5-6529A2660AE8" target="_blank"><span><cite>Oracle Database VLDB and Partitioning Guide</cite></span></a> to learn more about partition exchange loads
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repopulation-and-dml.html#GUID-ED2DDBF3-2279-4472-84F4-195C939435AC" title="The IM column store uses different mechanisms depending on the type of data loading: conventional DML, direct path loads, and partition exchange loads.">How Data Loading Works with the IM Column Store</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-333C0C67-1422-4391-BBCB-2A10DF8AC612" name="GUID-333C0C67-1422-4391-BBCB-2A10DF8AC612"></a><h3 id="INMEM-GUID-333C0C67-1422-4391-BBCB-2A10DF8AC612" class="sect3"><span class="enumeration_section">10.3 </span>When the Database Repopulates the IM Column Store
               </h3>
               <div>
                  <p>The database repopulates the IM column store automatically according to an internal algorithm. You can manually disable repopulation, and influence its aggressiveness.</p>
                  <div class="infoboxnote" id="GUID-333C0C67-1422-4391-BBCB-2A10DF8AC612__GUID-5F193EDB-0B33-43C3-BEF2-D4D83E9F6C79">
                     <p class="notep1">Note:</p>
                     <p>This section describes automatic repopulation. You can force repopulation manually by using the <code class="codeph">DBMS_INMEMORY.REPOPULATE</code> procedure.
                     </p>
                  </div>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="repopulation-and-dml.html#GUID-F0D932EF-0D37-4DF9-99C5-ABBE7E354709">Threshold-Based and Trickle Repopulation</a><br>Automatic repopulation takes two forms: <span class="bold">threshold-based repopulation</span> and <span class="bold">trickle repopulation</span>.
                     </li>
                     <li class="ulchildlink"><a href="repopulation-and-dml.html#GUID-3B9E3B8B-2AE9-469A-9DB9-367615A6FABC">Factors Affecting Repopulation</a><br>The algorithm that triggers repopulation is internal, and depends on several factors.
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-333C0C67-1422-4391-BBCB-2A10DF8AC612__GUID-251FFA5E-F965-4A78-89F3-B6D888294A1A">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=GUID-DE324946-9889-49A6-A379-4ACEEF99C184" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> to learn about the <code class="codeph">DBMS_INMEMORY.REPOPULATE</code> procedure
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="repopulation-and-dml.html#GUID-85AB84D5-1308-430A-BED2-281F3E9515B2" title="The IM column store periodically refreshes objects that have been modified. You can control this behavior using initialization parameters and the DBMS_INMEMORY package.">Optimizing Repopulation of the IM Column Store</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-F0D932EF-0D37-4DF9-99C5-ABBE7E354709" name="GUID-F0D932EF-0D37-4DF9-99C5-ABBE7E354709"></a><h4 id="INMEM-GUID-F0D932EF-0D37-4DF9-99C5-ABBE7E354709" class="sect4"><span class="enumeration_section">10.3.1 </span>Threshold-Based and Trickle Repopulation
                  </h4>
                  <div>
                     <p>Automatic repopulation takes two forms: <span class="bold">threshold-based repopulation</span> and <span class="bold">trickle repopulation</span>.
                     </p>
                     <p>Automatic repopulation always checks stale journal entries and uses double buffering. However, repopulation has different triggers:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Threshold-based repopulation</p>
                           <p>The database repopulates IMCUs when the number of changes recorded in the transaction journal reaches an internal <a href="glossary.html#GUID-78ED27B2-6946-4302-BDD2-3F8A4F0DA42C"><span class="xrefglossterm">staleness threshold</span></a>. Threshold-based repopulation occurs automatically when <code class="codeph">INMEMORY_MAX_POPULATE_SERVERS</code> initialization parameter is set to a value other than <code class="codeph">0</code>.
                           </p>
                        </li>
                        <li>
                           <p>Trickle repopulation</p>
                           <p>The  IMCO (In-Memory Coordinator) background process periodically checks whether stale rows exist, and then adds IMCUs to a repopulation queue. This mechanism does <span class="italic">not</span> depend on meeting the staleness threshold. The <code class="codeph">INMEMORY_TRICKLE_REPOPULATE_SERVERS_PERCENT</code> initialization parameter limits the number of background processes used for trickle repopulation. Setting this parameter to <code class="codeph">0</code> disables trickle repopulation.
                           </p>
                        </li>
                     </ul>
                     <p>Trickle repopulation is analogous to Java garbage collection. The mechanism works as follows:</p>
                     <ol>
                        <li>
                           <p>IMCO wakes up.</p>
                        </li>
                        <li>
                           <p>IMCO determines whether any population tasks need to be performed, including whether any stale entries exist in the <a href="glossary.html#GUID-16BF775D-7A77-4F8C-94F2-D1EBF2D67D1B"><span class="xrefglossterm">transaction journal</span></a> associated with an IMCU.
                           </p>
                        </li>
                        <li>
                           <p>If IMCO finds stale entries, then it triggers a Space Management Worker Process (W<span class="italic">nnn</span>) to create a new version of the IMCU.
                           </p>
                           <p>During IMCU creation, the database records the rowids of modified rows in the transaction journal.</p>
                        </li>
                        <li>
                           <p>IMCO sleeps for two minutes, and then returns to Step 1.</p>
                        </li>
                     </ol>
                     <div class="figure" id="GUID-F0D932EF-0D37-4DF9-99C5-ABBE7E354709__GUID-491CFB3A-8653-404F-A02C-AE88BDE4D6CB">
                        <p class="titleinfigure">Figure 10-4 Trickle Repopulation</p><img src="img/inmem_3v_022.png" alt="Description of Figure 10-4 follows" title="Description of Figure 10-4 follows" longdesc="img_text/inmem_3v_022.html"><br><a href="img_text/inmem_3v_022.html">Description of "Figure 10-4 Trickle Repopulation"</a></div>
                     <!-- class="figure" -->
                     <p>For example, a database may be busy for 8 hours per day. Most SMUs contain a small number of transaction journal entries (below the staleness threshold). When the database is quiet, IMCO wakes up, checks the journals to determine which IMCUs have stale entries, and then uses trickle repopulation to refresh the IMCUs.</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-F0D932EF-0D37-4DF9-99C5-ABBE7E354709__GUID-DFD8C9ED-6998-439A-92EB-86AC81A98337">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="in-memory-column-store-architecture.html#GUID-15B0EEBC-31F6-4192-957A-56D79B7E63E2" title="In response to queries and DML, server processes scan columnar data and update SMU metadata. Background processes populate row data from disk into the IM column store.">In-Memory Process Architecture</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="in-memory-column-store-architecture.html#GUID-2CA38EA0-26A0-44E7-97AD-A4156964BDC1" title="Every SMU contains a transaction journal. The database uses the transaction journal to keep the IMCU transactionally consistent.">Transaction Journal</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../refrn/background-processes.html#REFRN104" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn about In-Memory background processes
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repopulation-and-dml.html#GUID-333C0C67-1422-4391-BBCB-2A10DF8AC612" title="The database repopulates the IM column store automatically according to an internal algorithm. You can manually disable repopulation, and influence its aggressiveness.">When the Database Repopulates the IM Column Store</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-3B9E3B8B-2AE9-469A-9DB9-367615A6FABC" name="GUID-3B9E3B8B-2AE9-469A-9DB9-367615A6FABC"></a><h4 id="INMEM-GUID-3B9E3B8B-2AE9-469A-9DB9-367615A6FABC" class="sect4"><span class="enumeration_section">10.3.2 </span>Factors Affecting Repopulation
                  </h4>
                  <div>
                     <p>The algorithm that triggers repopulation is internal, and depends on several factors.</p>
                     <p>The principal factors affecting repopulation are as follows:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Rate of DML changes </p>
                           <p>As the number of modified rows increases, the percentage of stale columnar data increases. The transaction journal grows, increasing the need to use the buffer cache to satisfy queries.</p>
                        </li>
                        <li>
                           <p>Type of DML operations</p>
                           <p>Typically, inserts have less performance overhead than deletes and updates because inserts often go into a new data block.</p>
                        </li>
                        <li>
                           <p>Location of modified rows within a data block</p>
                           <p>Changes grouped within the same database block or table partition have less effect then changes distributed across an entire table. Versioning every IMCU has a greater impact than versioning a small number of IMCUs.</p>
                        </li>
                        <li>
                           <p>Compression level applied to <code class="codeph">INMEMORY</code> objects
                           </p>
                           <p>Because of <a href="glossary.html#GUID-D54C930C-1B27-40FC-9B15-25670A707365"><span class="xrefglossterm">double buffering</span></a>, tables with higher compression levels incur more query and DML overhead during repopulation. For example, <code class="codeph">MEMCOMPRESS FOR CAPACITY HIGH</code> incurs more overhead than <code class="codeph">MEMCOMPRESS FOR DML</code>.
                           </p>
                        </li>
                        <li>
                           <p>Number of active worker processes</p>
                           <p>As the number of worker processes increases, more work occurs in parallel. Consequently, the rate of repopulation increases.</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-3B9E3B8B-2AE9-469A-9DB9-367615A6FABC__GUID-5F7D7DD9-DAB8-42FE-8716-42ED56F3FBA4">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="populating-objects-in-memory.html#GUID-1965B8FE-B34E-42D9-9E97-45D6579162A4" title="Depending on your requirement, you can compress In-Memory objects at different levels.">IM Column Store Compression Methods</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=REFRN10358" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn about the <code class="codeph">INMEMORY_TRICKLE_REPOPULATE_SERVERS_PERCENT</code> initialization parameter
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="repopulation-and-dml.html#GUID-333C0C67-1422-4391-BBCB-2A10DF8AC612" title="The database repopulates the IM column store automatically according to an internal algorithm. You can manually disable repopulation, and influence its aggressiveness.">When the Database Repopulates the IM Column Store</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-3ACF448A-C685-432B-84E9-DB8719CF3359" name="GUID-3ACF448A-C685-432B-84E9-DB8719CF3359"></a><h3 id="INMEM-GUID-3ACF448A-C685-432B-84E9-DB8719CF3359" class="sect3"><span class="enumeration_section">10.4 </span>Controls for Repopulation of the IM Column Store
               </h3>
               <div>
                  <p>Repopulation occurs automatically by default, but you can control its aggressiveness, or disable it altogether.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-3ACF448A-C685-432B-84E9-DB8719CF3359__GUID-13FB3FD1-FA12-4EF4-90E1-ABD2AEA3119D">Initialization Parameters</p>
                     <p>The following initialization parameters influence background process behavior:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">INMEMORY_MAX_POPULATE_SERVERS</code></p>
                           <p>This parameter limits the maximum number of W<span class="italic">nnn</span> processes available for population and repopulation (threshold-based and trickle). The default value is half the <code class="codeph">CPU_COUNT</code>. This parameter acts as a throttle, preventing these server processes from overloading the rest of the database. Setting this parameter to <code class="codeph">0</code> disables both population and repopulation.
                           </p>
                           <div class="infoboxnote" id="GUID-3ACF448A-C685-432B-84E9-DB8719CF3359__GUID-3E7D6F30-3014-4BD9-BE08-04E5036761FC">
                              <p class="notep1">Caution:</p>
                              <p>Be careful not to set the value of this parameter too high. If it is set close to the number of cores or higher, then no CPU may be available for the rest of the system to run.</p>
                           </div>
                        </li>
                        <li>
                           <p><code class="codeph">INMEMORY_TRICKLE_REPOPULATE_SERVERS_PERCENT</code></p>
                           <p>This parameter limits the percentage of the total population and repopulation processes that perform trickle repopulation. Its effect is to limit the number of IMCUs repopulated through trickle repopulation within a two-minute interval.</p>
                           <p>The value for this parameter is a percentage of the <code class="codeph">INMEMORY_MAX_POPULATE_SERVERS</code> value. For example, if <code class="codeph">INMEMORY_TRICKLE_REPOPULATE_SERVERS_PERCENT</code> is <code class="codeph">5</code> percent, and if <code class="codeph">INMEMORY_MAX_POPULATE_SERVERS</code> is <code class="codeph">20</code>, then the IM column store uses an average of 1 core (.05 * 20) for trickle repopulation. 
                           </p>
                           <p>To increase throughput at the expense of increased background CPU, set this parameter to higher values such as <code class="codeph">5</code> or <code class="codeph">10</code>. A value greater than <code class="codeph">50</code> is not allowed, so that at least half of the  <code class="codeph">INMEMORY_MAX_POPULATE_SERVERS</code> processes are available for other tasks.
                           </p>
                           <p>Setting this parameter to <code class="codeph">0</code> disables trickle population.
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-3ACF448A-C685-432B-84E9-DB8719CF3359__GUID-5990A616-9569-4695-8EFA-649CE8B27F3A">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../refrn/INMEMORY_TRICKLE_REPOPULATE_SERVERS_PERCENT.html#GUID-499850D5-6418-4AD3-BEB5-865C4A165C39" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn about <code class="codeph">INMEMORY_TRICKLE_REPOPULATE_SERVERS_PERCENT</code></p>
                           </li>
                           <li>
                              <p><a href="../refrn/INMEMORY_MAX_POPULATE_SERVERS.html#GUID-3428C0FF-5AA9-491C-908E-F0BD88095A5A" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn about <code class="codeph">INMEMORY_MAX_POPULATE_SERVERS</code></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-3ACF448A-C685-432B-84E9-DB8719CF3359__GUID-0F8F4F97-085D-411E-9C31-0FB7C8BC2893">DBMS_INMEMORY.REPOPULATE Procedure</p>
                     <p>To manually repopulate a table, partition, or subpartition, use the <code class="codeph">DBMS_INMEMORY.REPOPULATE</code> procedure. Only objects that are currently populated in the IM column store are eligible for repopulation.
                     </p>
                     <p>The following values are possible for the <code class="codeph">force</code> parameter:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">FALSE</code> — The database repopulates only IMCUs containing modified rows. This is the default.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">TRUE</code> — The database drops the segment, and then rebuilds it. The database increments the statistics and performs all other tasks related to initial population.
                           </p>
                        </li>
                     </ul>
                     <p>For example, IMCU 1 contains rows 1 to 500,000, and IMCU 2 contains rows 500,001 to 1,000,000. A statement modifies row 600,000. When <code class="codeph">force</code> is <code class="codeph">FALSE</code>, the database only repopulates IMCU 2. When <code class="codeph">force</code> is <code class="codeph">TRUE</code>, the database repopulates both IMCUs.
                     </p>
                     <p>Consider further that the <code class="codeph">INMEMORY_VIRTUAL_COLUMNS</code> initialization parameter is set to <code class="codeph">ENABLE</code>, and an application creates a new virtual column. When <code class="codeph">force</code> is <code class="codeph">FALSE</code>, the database only repopulates IMCU 2 with the new column. When <code class="codeph">force</code> is <code class="codeph">TRUE</code>, the database repopulates both IMCUs with the new column.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-3ACF448A-C685-432B-84E9-DB8719CF3359__GUID-679643C5-6077-4216-AE7C-59B51A133470">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=GUID-DE324946-9889-49A6-A379-4ACEEF99C184" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> to learn more about <code class="codeph">DBMS_INMEMORY.REPOPULATE</code></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="repopulation-and-dml.html#GUID-85AB84D5-1308-430A-BED2-281F3E9515B2" title="The IM column store periodically refreshes objects that have been modified. You can control this behavior using initialization parameters and the DBMS_INMEMORY package.">Optimizing Repopulation of the IM Column Store</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-0E33E887-A6D5-4D56-BFC5-43D3EDFE60D4" name="GUID-0E33E887-A6D5-4D56-BFC5-43D3EDFE60D4"></a><h3 id="INMEM-GUID-0E33E887-A6D5-4D56-BFC5-43D3EDFE60D4" class="sect3"><span class="enumeration_section">10.5 </span>Optimizing Trickle Repopulation: Tutorial
               </h3>
               <div>
                  <p>In this tutorial, you increase the percentage of background processes available for trickle repopulation.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-0E33E887-A6D5-4D56-BFC5-43D3EDFE60D4__GUID-48C488CF-84F4-4AE6-97DE-63301E8E7F92">Assumptions</p>
                     <p>This tutorial assumes the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The IM column store is enabled.</p>
                        </li>
                        <li>
                           <p>You want to devote more CPU to the Space Management Worker Processes (W<span class="italic">nnn</span>) that perform trickle repopulation.
                           </p>
                        </li>
                        <li>
                           <p>The database server has 12 CPU cores.</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-0E33E887-A6D5-4D56-BFC5-43D3EDFE60D4__GUID-75583E14-6AB2-4D56-8C9D-43B3873C9F5C">To increase the aggressiveness of repopulation:</p>
                     <ol>
                        <li>
                           <p>In SQL*Plus or SQL Developer, log in to the database as a user with administrative privileges.</p>
                        </li>
                        <li>
                           <p>Show the settings for the initialization parameters relating to repopulation (sample output included):</p><pre class="pre codeblock"><code>SHOW PARAMETER POPULATE_SERVERS

NAME                                        TYPE        VALUE
------------------------------------        ----------- -----------
inmemory_max_populate_servers               integer     12
inmemory_trickle_repopulate_servers_percent integer     1
</code></pre><p>The preceding output indicates that 12 cores are available for population and repopulation tasks. The <code class="codeph">INMEMORY_TRICKLE_REPOPULATE_SERVERS_PERCENT</code> is 1% of the <code class="codeph">INMEMORY_MAX_POPULATE_SERVERS</code> value. Of the server processes available for population and repopulation tasks, the IM column store can use a maximum of .12 CPU cores (.01 * 12) for trickle repopulation.
                           </p>
                        </li>
                        <li>
                           <p>Increase the trickle repopulation maximum to 25% of the <code class="codeph">INMEMORY_MAX_POPULATE_SERVERS</code> initialization parameter value.
                           </p>
                           <p>For example, use the following statement:</p><pre class="pre codeblock"><code>ALTER SYSTEM SET INMEMORY_TRICKLE_REPOPULATE_SERVERS_PERCENT=25;</code></pre><p>As a result, the IM column store now uses a maximum of 3 CPU cores (.25 * 12) for trickle repopulation, out of a total of 12 that are available for population and repopulation work.</p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-0E33E887-A6D5-4D56-BFC5-43D3EDFE60D4__GUID-5990A616-9569-4695-8EFA-649CE8B27F3A">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../refrn/INMEMORY_TRICKLE_REPOPULATE_SERVERS_PERCENT.html#GUID-499850D5-6418-4AD3-BEB5-865C4A165C39" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn about <code class="codeph">INMEMORY_TRICKLE_REPOPULATE_SERVERS_PERCENT</code></p>
                        </li>
                        <li>
                           <p><a href="../refrn/INMEMORY_MAX_POPULATE_SERVERS.html#GUID-3428C0FF-5AA9-491C-908E-F0BD88095A5A" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn about <code class="codeph">INMEMORY_MAX_POPULATE_SERVERS</code></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="repopulation-and-dml.html#GUID-85AB84D5-1308-430A-BED2-281F3E9515B2" title="The IM column store periodically refreshes objects that have been modified. You can control this behavior using initialization parameters and the DBMS_INMEMORY package.">Optimizing Repopulation of the IM Column Store</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
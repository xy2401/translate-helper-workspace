<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>数据库中的JDBC，UCP和Java简介</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="2 Day + Java Developer&#39;s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="2 Day + Java Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="2-day-java-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T07:23:23-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96442-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="aims-and-objectives-this-book.html" title="Previous" type="text/html"></link>
      <link rel="next" href="overview-hr-web-application.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="2 Day + Java Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="TDPJD"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="aims-and-objectives-this-book.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="overview-hr-web-application.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">2天+ Java开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">数据库中的JDBC，UCP和Java简介</li>
            </ol>
            <a id="GUID-8C73108B-E0F3-4CD5-A813-909B339339BB" name="GUID-8C73108B-E0F3-4CD5-A813-909B339339BB"></a><a id="TDPJD101"></a>
            
            <h2 id="TDPJD-GUID-8C73108B-E0F3-4CD5-A813-909B339339BB" class="sect2"><span class="enumeration_chapter">2</span>数据库中的JDBC，UCP和Java简介</h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle数据库是一个关系数据库，可用于存储，修改和使用数据。</p>
               <p>该<a id="d2341e26" class="indexterm-anchor"></a> Java应用程序使用Java数据库连接（JDBC）标准来访问和操作关系数据库中的数据。
               </p>
               <p><a id="d2341e30" class="indexterm-anchor"></a> JDBC是一种行业标准的应用程序编程接口（API），允许您使用Java中的SQL访问RDBMS。JDBC符合<a id="d2341e33" class="indexterm-anchor"></a> JDBC转义标准的入门级别。每个供应商都使用自己的扩展实现JDBC规范。
               </p>
               <p>通用连接池（UCP）是一个连接池，用于缓存数据库连接对象以重用连接，从而提高性能。</p>
               <p>数据库中的Java（OJVM）帮助将SQL操作与Java数据逻辑分组，并将它们加载到数据库中以进行就地处理。</p>
               <div class="infoboxnotealso" id="GUID-8C73108B-E0F3-4CD5-A813-909B339339BB__GUID-9E38004F-8DB0-4A86-BCA9-A203D03D2E43">
                  <p class="notep1">也可以看看：</p>
                  <p><a href="http://www.oracle.com/technetwork/java/overview-141217.html" target="_blank"><code class="codeph">http://www.oracle.com/technetwork/java/overview-141217.html</code></a></p>
               </div>
               <p></p>
               <p>本章向您介绍使用Oracle Database 12 <span class="italic">c</span>第2版（12.2）的JDBC驱动程序，通用连接池（UCP）和数据库中的Java（OJVM）</p>
               <ul style="list-style-type:disc">
                  <li>Java数据库连接驱动程序（JDBC）</li>
                  <li>
                     <p>通用连接池（UCP）</p>
                  </li>
                  <li>
                     <p>数据库中的Java（OJVM）</p>
                  </li>
               </ul>
            </div>
            <div class="sect2"><a id="GUID-2ADAB75C-88C9-4956-98C3-FE0ED96444CA" name="GUID-2ADAB75C-88C9-4956-98C3-FE0ED96444CA"></a><h3 id="TDPJD-GUID-2ADAB75C-88C9-4956-98C3-FE0ED96444CA" class="sect3">Java数据库连接驱动程序（JDBC）</h3>
               <div>
                  <p>JDBC是一种数据库访问协议，使您可以连接到数据库并在数据库上运行SQL语句和查询。JDBC驱动程序实现并符合最新的JDBC规范。Java应用程序需要在其类路径<code class="codeph">ojdbc8.jar</code>与JDK8兼容。
                  </p>
                  <p>核心Java类库提供JDBC API， <code class="codeph">java.sql</code>和<code class="codeph">javax.sql</code></p>
                  <p>以下部分描述了Oracle对JDBC标准的支持：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>Oracle JDBC瘦驱动程序</p>
                     </li>
                     <li>
                        <p>Oracle JDBC包</p>
                     </li>
                  </ul>
                  <div class="section">
                     <p class="subhead2" id="GUID-2ADAB75C-88C9-4956-98C3-FE0ED96444CA__GUID-32623499-6C25-4160-B67A-8FFCC9FDDCEE">Oracle JDBC瘦驱动程序</p>
                     <p>Oracle建议使用JDBC Thin Driver满足大多数要求。JDBC Thin Driver可以在任何具有合适Java虚拟机的系统上运行。（JVM）。Oracle提供的其他一些客户端驱动程序是JDBC瘦驱动程序，Oracle调用接口（OCI）驱动程序，服务器端瘦驱动程序和服务器端内部驱动程序。</p>
                     <p>JDBC Thin Driver是一个纯Java，Type IV驱动程序。JDBC驱动程序版本）ojdbc8.jar）包含对JDK 8的支持。</p>
                     <p>JDBC Thin Driver使用SQL * Net与服务器通信以访问数据库。</p>
                     <div class="infoboxnotealso" id="GUID-2ADAB75C-88C9-4956-98C3-FE0ED96444CA__GUID-49DC1247-511A-42D7-BEAA-68F742FC6906">
                        <p class="notep1">也可以看看：</p><span><cite>Oracle数据库JDBC开发人员指南</cite></span></div>
                     <p><span class="bold">操作项1：</span>更改DB_URL以指向您的数据库。如果您需要帮助，请参阅Github上的DataSourceSample.java。
                     </p>
                     <div class="p"><pre class="pre codeblock"><code>import java.sql。连接; import java.sql。的SQLException; import java.sql。DatabaseMetaData的; import oracle.jdbc.pool。OracleDataSource; import oracle.jdbc。的OracleConnection; public class DataSourceSample {//建议的连接URL格式是带有//连接描述符的长格式。// final static String DB_URL =“jdbc：oracle：thin：@（DESCRIPTION =（ADDRESS =（HOST = myhost）（PORT = 1521）（PROTOCOL = tcp））（CONNECT_DATA =（SERVICE_NAME = myorcldbservicename）））”; final static String DB_URL =“jdbc：oracle：thin：@（DESCRIPTION =（ADDRESS =（HOST = localhost）（PORT = 5521）（PROTOCOL = tcp））（CONNECT_DATA =（SERVICE_NAME = <span class="italic">service name</span> ）））”; final static String DB_USER =“ <span class="italic">username</span> ”; final static String DB_PASSWORD = <span class="italic">password</span> ; public static void main（String args []）抛出SQLException {OracleDataSource ods = new OracleDataSource（）; ods.setURL（DB_URL）; ods.setUser（DB_USER）; ods.setPassword（DB_PASSWORD）; //使用AutoCloseable，连接自动关闭。try（OracleConnection connection =（OracleConnection）ods.getConnection（））{//获取JDBC驱动程序名称和版本DatabaseMetaData dbmd = connection.getMetaData（）; System.out.println（“Driver Name：”+ dbmd.getDriverName（））; System.out.println（“Driver Version：”+ dbmd.getDriverVersion（））; System.out.println（“数据库用户名为：”+ connection.getUserName（））; }}}</code></pre></div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-E59E9147-A57F-4331-95E4-8A99B5B6774D" name="GUID-E59E9147-A57F-4331-95E4-8A99B5B6774D"></a><h3 id="TDPJD-GUID-E59E9147-A57F-4331-95E4-8A99B5B6774D" class="sect3">通用连接池</h3>
               <div>
                  <p>连接池通过重用连接对象和减少创建连接对象的次数来帮助提高性能。</p>
                  <p>Oracle通用连接池（UCP）是一个功能丰富的Java连接池，通过与Oracle数据库配置的更紧密集成，提供连接池功能，高可用性，可伸缩性和负载平衡。</p>
                  <p>Java应用程序或容器必须在其类路径中使用<code class="codeph">ucp.jar</code>以及<code class="codeph">ojdbc8.jar</code> （JDK8）才能使用UCP。</p>
                  <div class="infoboxnotealso" id="GUID-E59E9147-A57F-4331-95E4-8A99B5B6774D__GUID-A0292E63-4C57-4556-9418-68881BEC1345">
                     <p class="notep1">也可以看看：</p><span><cite>Oracle通用连接池开发人员指南</cite></span></div>
                  <p><span class="bold">操作项2：</span>更改DB_URL以指向您的数据库。
                  </p>
                  <div class="p"><pre class="pre codeblock"><code>导入java.sql。连接; import java.sql。ResultSet的; import java.sql。的SQLException; import java.sql。声明; import oracle.ucp.jdbc。PoolDataSourceFactory; import oracle.ucp.jdbc。PoolDataSource; public class UCPSample {// final static String DB_URL =“jdbc：oracle：thin：@（DESCRIPTION =（ADDRESS =（HOST = myhost）（PORT = 1521）（PROTOCOL = tcp））（CONNECT_DATA =（SERVICE_NAME = myorcldbservicename）） ）“; final static String DB_USER =“ <span class="italic">username</span> ”; final static String DB_PASSWORD =“ <span class="italic">pwd</span> ”; final static String CONN_FACTORY_CLASS_NAME =“oracle.jdbc.pool。OracleDataSource“; / * *该示例演示了UCP作为客户端连接池。* / public static void main（String args []）throws Exception {//获取UCP的PoolDataSource PoolDataSource pds = PoolDataSourceFactory.getPoolDataSource（）; //在所有其他属性pds.setConnectionFactoryClassName（CONN_FACTORY_CLASS_NAME）之前首先设置连接工厂; pds.setURL（DB_URL）; pds.setUser（DB_USER）; pds.setPassword（DB_PASSWORD）; pds.setConnectionPoolName（ “JDBC_UCP_POOL”）; //默认值为0。设置启动UCP时要创建的初始连接数。pds.setInitialPoolSize（5）; //默认值为0。设置UCP在运行时维护的最小连接数。pds.setMinPoolSize（5）; //默认为整数。MAX_VALUE（2147483647）。设置连接池上允许的最大连接数。pds.setMaxPoolSize（20）; //默认为30秒。设置频率（以秒为单位）以强制执行//超时属性。适用于// inactiveConnectionTimeout（int secs），// AbandonedConnectionTimeout（secs）＆// TimeToLiveConnectionTimeout（int secs）。//有效值范围是0到整数。MAX_VALUE。 pds.setTimeoutCheckInterval（5）; //默认值为0。设置//连接在连接池中保持可用的最长时间（以秒为单位）。pds.setInactiveConnectionTimeout（10）; System.out.println（“结帐前可用连接：”+ pds.getAvailableConnectionsCount（））; System.out.println（“结账前借用的连接：”+ pds.getBorrowedConnectionsCount（））; //从UCP获取数据库连接。 try（Connection conn = pds.getConnection（））{System.out.println（“checkout后的可用连接：”+ pds.getAvailableConnectionsCount（））; System.out.println（“结账后借用的连接：”+ pds.getBorrowedConnectionsCount（））; //执行数据库操作printEmployees（conn）; } catch（SQLException e）{System.out.println（“UCPSample  - ”+“SQLException ::”+ e.getMessage（））; System.out.println（“签入后可用连接：”+ pds.getAvailableConnectionsCount（））; System.out.println（“签入后借用连接：”+ pds.getBorrowedConnectionsCount（））; } / * *显示employees表中的first_name和last_name。* / public static void printEmployees（连接连接）抛出SQLException {//语句和ResultSet是AutoCloseable并自动关闭//。try（Statement statement = connection.createStatement（））{try（ResultSet resultSet = statement .executeQuery（“select first_name，last_name from employees”））{System.out.println（“FIRST_NAME”+“”+“LAST_NAME”）;的System.out.println（ “---------------------”）; while（resultSet.next（））System.out.println（resultSet.getString（1）+“”+ resultSet.getString（2）+“”）; }}}}</code></pre></div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-5414DE01-3133-490E-9D8F-A31B578C35E6" name="GUID-5414DE01-3133-490E-9D8F-A31B578C35E6"></a><h3 id="TDPJD-GUID-5414DE01-3133-490E-9D8F-A31B578C35E6" class="sect3">数据库中的Java（OJVM）</h3>
               <div>
                  <p>Oracle数据库具有驻留在服务器中的Java虚拟机（JVM）。它可以帮助在服务器上的Oracle JVM中运行的Java应用程序访问同一系统和同一进程中存在的数据。</p>
                  <p>建议将数据库中的Java用于数据密集型应用程序。JVM能够直接使用底层Oracle RDBMS库，而无需在Java代码和SQL数据之间使用网络连接。这有助于提高性能和执行。对于数据访问，当Java代码在服务器上运行时，Oracle数据库使用服务器端内部驱动程序。</p>
                  <p><span class="bold">行动项目3：</span>上通过SQLPLUS连接到数据库并运行<a href="https://github.com/oracle/oracle-db-examples/blob/master/java/ojvm/ServersideConnect.sql" target="_blank">ServersideConnect.sql</a>调用之前<a href="https://github.com/oracle/oracle-db-examples/blob/master/java/ojvm/ServersideConnect.java" target="_blank">ServersideConnect.java</a> 。有关更多信息，请参阅Github的示例。
                  </p>
                  <p><span class="bold">ServersideConnect.sql</span></p>
                  <div class="p"><pre class="pre codeblock"><code>Rem NAME Rem ServersideConnect.sql Rem Rem说明用于调用获取服务器端连接到rem的方法的Rem SQL从ServersideConnect.java rem读取Java源代码的内容然后编译它连接<span class="italic">用户名</span> / <span class="italic">pwd</span>创建或替换和编译JAVA源命名ServersideConnect_src AS @ ServersideConnect.java / show error rem一个包装器（也称为Call Spec），用于从SQL，PL / SQL和客户端应用程序调用数据库中的Java rem函数CREATE OR REPLACE PROCEDURE ServersideConnect_proc AS LANGUAGE JAVA NAME'ServersideideConnect.jrun（ ）'; / rem运行示例connect <span class="italic">username</span> / <span class="italic">pwd</span> SET SERVEROUTPUT ON SIZE 10000 CALL dbms_java.set_output（10000）;执行ServersideConnect_proc; InternalT2Server.java导入java.sql。连接; import java.sql。ResultSet的; import java.sql。的SQLException; import java.sql。声明; import oracle.jdbc.driver。一个OracleDriver; import oracle.jdbc.pool。OracleDataSource; public class ServersideConnect {static public void jrun（）throws SQLException {//用于测试ServersideConnect // test（“jdbc：oracle：kprb：@”）;方法1（ “JDBC：默认：连接”）;方法2（）; / * *使用服务器端显示类型2驱动程序又名KPRB驱动程序* / static public void method1（String url）抛出SQLException {Connection connection = null; try {//方法1：使用OracleDataSource OracleDataSource ods = new OracleDataSource（）; ods.setURL（URL）; connection = ods.getConnection（）; System.out.println（“方法1：获取默认连接”+“使用OracleDataSource”）; //执行数据库操作printEmployees（connection）; static public void method2（）throws SQLException {Connection connection = null;尝试{OracleDriver ora = new OracleDriver（）; connection = ora.defaultConnection（）; System.out.println（“方法2：获取默认连接”+“使用OracleDriver”）; //执行数据库操作printEmployees（connection）; / * *显示employees表中的employee_id和first_name。* / static public void printEmployees（Connection connection）抛出SQLException {ResultSet resultSet = null; Statement语句= null; try {statement = connection.createStatement（）; resultSet = statement.executeQuery（“SELECT employee_id，first_name”+“FROM employee order by employee_id”）; while（resultSet.next（））{System.out.println（“Emp no：”+ resultSet.getInt（1）+“Emp name：”+ resultSet.getString（2））; catch（SQLException ea）{System.out.println（“执行期间出错：”+ ea）; ea.printStackTrace（）; } finally {if（resultSet！= null）resultSet.close（）;如果（声明！= null）statement.close（）; }}}</code></pre></div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
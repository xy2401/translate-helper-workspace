<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This chapter explains how to enable and disable objects for population in the IM column store, including setting compression and priority options.">
      <meta name="description" content="This chapter explains how to enable and disable objects for population in the IM column store, including setting compression and priority options.">
      <title>Enabling Objects for In-Memory Population</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database In-Memory Guide">
      <meta property="og:description" content="This chapter explains how to enable and disable objects for population in the IM column store, including setting compression and priority options.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database In-Memory Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-memory-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-22T09:02:38-07:00">
      <meta name="dcterms.title" content="Database In-Memory Guide">
      <meta name="dcterms.dateCopyrighted" content="2016, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96137-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="enabling-the-im-column-store.html" title="Previous" type="text/html">
      <link rel="next" href="populating-the-imcs-manually.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="INMEM">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="enabling-the-im-column-store.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="populating-the-imcs-manually.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database In-Memory Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="configuring-the-im-column-store.html" property="item" typeof="WebPage"><span property="name">Configuring and Populating the IM Column Store</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Enabling Objects for In-Memory Population</li>
            </ol>
            <a id="GUID-C5F856BF-70E3-41C6-A1BA-1E94D7D230B8" name="GUID-C5F856BF-70E3-41C6-A1BA-1E94D7D230B8"></a>
            
            <h2 id="INMEM-GUID-C5F856BF-70E3-41C6-A1BA-1E94D7D230B8" class="sect2"><span class="enumeration_chapter">4 </span>Enabling Objects for In-Memory Population
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter explains how to enable and disable objects for population in the IM column store, including setting compression and priority options.</p>
               <p>This chapter contains the following topics:</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-BFD476E7-C70D-4906-8B10-D33BC1E768C0">About In-Memory Population</a><br><strong class="term">In-Memory population (population)</strong> occurs when the database reads existing row-format data from disk, transforms it into columnar format, and then stores it in the IM column store. 
                  </li>
                  <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-C5D0A470-C06A-4EE2-AA1A-B221FFEB663B">Enabling and Disabling Tables for the IM Column Store</a><br>Enable a table for the IM column store by including an <code class="codeph">INMEMORY</code> clause in a <code class="codeph">CREATE TABLE</code> or <code class="codeph">ALTER TABLE</code> statement. Disable a table for the IM column store by including a <code class="codeph">NO INMEMORY</code> clause in a <code class="codeph">CREATE TABLE</code> or <code class="codeph">ALTER TABLE</code> statement.
                  </li>
                  <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-452D19AE-EB5F-44AC-A1AD-70CF10D2D347">Enabling and Disabling Columns for In-Memory Tables</a><br>You can specify the <code class="codeph">INMEMORY</code> clause for individual columns in an internal table. External tables do not support specifying <code class="codeph">INMEMORY</code> at the column level.
                  </li>
                  <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-636A1675-838D-4004-9CDB-70783DC72C6B">Enabling and Disabling Tablespaces for the IM Column Store</a><br>You can enable or disable tablespaces for the IM column store.
                  </li>
                  <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-8C3B4A9B-DC69-4207-A935-8DB4B3AC94FA">Enabling and Disabling Materialized Views for the IM Column Store</a><br>You can enable and disable materialized views for the IM column store.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="configuring-the-im-column-store.html#GUID-8844C889-E381-4B77-8A51-7AA6462B14D7" title="You can enable and size the In-Memory Column Store (IM column store). You can also configure In-Memory settings for objects, and populate these objects in the IM column store.">Configuring and Populating the IM Column Store</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-BFD476E7-C70D-4906-8B10-D33BC1E768C0" name="GUID-BFD476E7-C70D-4906-8B10-D33BC1E768C0"></a><h3 id="INMEM-GUID-BFD476E7-C70D-4906-8B10-D33BC1E768C0" class="sect3"><span class="enumeration_section">4.1 </span>About In-Memory Population
               </h3>
               <div>
                  <p><strong class="term">In-Memory population (population)</strong> occurs when the database reads existing row-format data from disk, transforms it into columnar format, and then stores it in the IM column store. 
                  </p>
                  <p>Only objects with the <code class="codeph">INMEMORY</code> attribute are eligible for population.
                  </p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-F1395406-6385-4FB4-9A9F-4144183DCC3B">Purpose of In-Memory Population</a><br>The IM column store does not automatically load all objects in the database into the IM column store. 
                     </li>
                     <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-29A8026E-FACC-494B-9BC9-E0D2C9E6B4C3">How In-Memory Population Works</a><br>You can specify that the database populates objects in the IM column store either at database instance startup or when <code class="codeph">INMEMORY</code> objects are accessed. 
                     </li>
                     <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-B50145A4-3A97-48DD-8AA3-7E239E926261">Controls for In-Memory Population</a><br>Use the <code class="codeph">INMEMORY</code> clause in DDL statements to specify which objects are eligible for population into the IM column store. You can enable tablespaces, tables (internal and external), partitions, and materialized views.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-C5F856BF-70E3-41C6-A1BA-1E94D7D230B8" title="This chapter explains how to enable and disable objects for population in the IM column store, including setting compression and priority options.">Enabling Objects for In-Memory Population</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-F1395406-6385-4FB4-9A9F-4144183DCC3B" name="GUID-F1395406-6385-4FB4-9A9F-4144183DCC3B"></a><h4 id="INMEM-GUID-F1395406-6385-4FB4-9A9F-4144183DCC3B" class="sect4"><span class="enumeration_section">4.1.1 </span>Purpose of In-Memory Population
                  </h4>
                  <div>
                     <p>The IM column store does not automatically load all objects in the database into the IM column store. </p>
                     <p>If you do not use DDL to specify any objects as <code class="codeph">INMEMORY</code>, then the IM column store remains empty. Population is necessary to transform rows from user-specified <code class="codeph">INMEMORY</code> objects into columnar format, so that they are available for analytic queries.
                     </p>
                     <p>Population, which transforms <span class="italic">existing</span> data on disk into columnar format, is different from <a href="glossary.html#GUID-9168517C-C8A2-4433-946A-037631B840E2"><span class="xrefglossterm">repopulation</span></a>, which loads <span class="italic">new</span> data into the IM column store. Because IMCUs are read-only structures, Oracle Database does not populate them when rows change. Rather, the database records the row changes in a <a href="glossary.html#GUID-16BF775D-7A77-4F8C-94F2-D1EBF2D67D1B"><span class="xrefglossterm">transaction journal</span></a>, and then creates new IMCUs as part of repopulation.
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="repopulation-and-dml.html#GUID-85AB84D5-1308-430A-BED2-281F3E9515B2" title="The IM column store periodically refreshes objects that have been modified. You can control this behavior using initialization parameters and the DBMS_INMEMORY package.">Optimizing Repopulation of the IM Column Store</a></li>
                           <li><a href="in-memory-column-store-architecture.html#GUID-50A30EC3-1CD1-4BFC-9BD1-9AC55D0B4AAE" title="An In-Memory Compression Unit (IMCU) is a compressed, read-only storage unit that contains data for one or more columns.">In-Memory Compression Units (IMCUs)</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-BFD476E7-C70D-4906-8B10-D33BC1E768C0" title="In-Memory population (population) occurs when the database reads existing row-format data from disk, transforms it into columnar format, and then stores it in the IM column store.">About In-Memory Population</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-29A8026E-FACC-494B-9BC9-E0D2C9E6B4C3" name="GUID-29A8026E-FACC-494B-9BC9-E0D2C9E6B4C3"></a><h4 id="INMEM-GUID-29A8026E-FACC-494B-9BC9-E0D2C9E6B4C3" class="sect4"><span class="enumeration_section">4.1.2 </span>How In-Memory Population Works
                  </h4>
                  <div>
                     <p>You can specify that the database populates objects in the IM column store either at database instance startup or when <code class="codeph">INMEMORY</code> objects are accessed. 
                     </p>
                     <p>The population algorithm also varies depending on whether you use single-instance or Oracle RAC.</p>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-DE12F0E2-8BEC-4326-A816-D812E54A3D12">Prioritization of In-Memory Population</a><br>DDL statements include an <code class="codeph">INMEMORY PRIORITY</code> subclause that provides more control over the population queue. 
                        </li>
                        <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-DF723C06-62FE-4E5A-8BE0-0703695A7886">How Background Processes Populate IMCUs</a><br>During population, the database reads data from disk in its row format, pivots the rows to create columns, and then compresses the data into In-Memory Compression Units (IMCUs).
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-BFD476E7-C70D-4906-8B10-D33BC1E768C0" title="In-Memory population (population) occurs when the database reads existing row-format data from disk, transforms it into columnar format, and then stores it in the IM column store.">About In-Memory Population</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-DE12F0E2-8BEC-4326-A816-D812E54A3D12" name="GUID-DE12F0E2-8BEC-4326-A816-D812E54A3D12"></a><h5 id="INMEM-GUID-DE12F0E2-8BEC-4326-A816-D812E54A3D12" class="sect5"><span class="enumeration_section">4.1.2.1 </span>Prioritization of In-Memory Population
                     </h5>
                     <div>
                        <p>DDL statements include an <code class="codeph">INMEMORY PRIORITY</code> subclause that provides more control over the population queue. 
                        </p>
                        <div class="infoboxnote" id="GUID-DE12F0E2-8BEC-4326-A816-D812E54A3D12__GUID-C9658C1B-B4EE-40CD-A02E-FDD7109AB1E8">
                           <p class="notep1">Note:</p>
                           <p>The <code class="codeph">INMEMORY PRIORITY</code> subclause controls the priority of population, but not the speed of population.
                           </p>
                        </div>
                        <p>The priority level setting applies to an entire table, partition, or subpartition, not to different column subsets. Setting the <code class="codeph">INMEMORY</code> attribute on an object means that this object is a <span class="italic">candidate</span> for population in the IM column store. It does not mean that the database immediately populates the object. 
                        </p>
                        <div class="infoboxnote" id="GUID-DE12F0E2-8BEC-4326-A816-D812E54A3D12__GUID-50EDEDA9-8471-43B5-8320-D297A7DA78FE">
                           <p class="notep1">Note:</p>
                           <p>If a segment on disk is 64 KB or less, then it is not populated in the IM column store. Therefore, some small database objects that were enabled for the IM column store might not be populated.</p>
                        </div>
                        <p>Oracle Database manages prioritization as follows:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>On-demand population</p>
                              <p>By default, the <code class="codeph">INMEMORY PRIORITY</code> parameter is set to <code class="codeph">NONE</code>. In this case, the database <span class="italic">only</span> populates the object when it is accessed through a full table scan. If the object is never accessed, or if it is accessed only through an index scan or fetch by rowid, then population never occurs.
                              </p>
                           </li>
                           <li>
                              <p>Priority-based population</p>
                              <p> When <code class="codeph">PRIORITY</code> is set to a value <span class="italic">other than</span> <code class="codeph">NONE</code>, Oracle database automatically populates the objects using an internally managed priority queue. In this case, a full scan is not a necessary condition for population. The database does the following:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Populates columnar data in the IM column store automatically after the database instance restarts</p>
                                 </li>
                                 <li>
                                    <p>Queues population of <code class="codeph">INMEMORY</code> objects based on the specified priority level
                                    </p>
                                    <p>For example, a table altered with <code class="codeph">INMEMORY PRIORITY CRITICAL</code> takes precedence over a table altered with <code class="codeph">INMEMORY PRIORITY HIGH</code>, which in turn takes precedence over a table altered with <code class="codeph">INMEMORY PRIORITY LOW</code>. If the IM column store has insufficient space, then Oracle Database does not populate additional objects until space is available.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Waits to return from <code class="codeph">ALTER TABLE</code> or <code class="codeph">ALTER MATERIALIZED VIEW</code> statements until the changes to the object are recorded in the IM column store
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <p>After a segment is populated in the IM column store, the database only evicts it when the segment is dropped or moved, or the segment is updated with the <code class="codeph">NO INMEMORY</code> attribute. You can evict a segment manually or by means of an <a href="glossary.html#GUID-66F7095A-378A-4C56-88DA-3AC93A5F55DB"><span class="xrefglossterm">ADO policy</span></a>.
                        </p>
                        <div class="example" id="GUID-DE12F0E2-8BEC-4326-A816-D812E54A3D12__GUID-CD3B2EB8-4C77-428A-9DA3-EAEB61363D82">
                           <p class="titleinexample">Example 4-1 Population of an Object in the IM Column Store</p>
                           <p>Before completing this example, the IM column store must be enabled for the database.</p>
                           <ol>
                              <li>
                                 <p>Log in to the database as an administrator, and then query the <code class="codeph">customers</code> table as follows:
                                 </p><pre class="pre codeblock"><code>SELECT cust_id, cust_last_name, cust_first_name 
FROM   sh.customers 
WHERE  cust_city = 'Hyderabad' 
AND    cust_income_level LIKE 'C%' 
AND    cust_year_of_birth &gt; 1960;</code></pre></li>
                              <li>
                                 <p>Display the execution plan for the query:</p><pre class="pre codeblock"><code>SQL&gt; SELECT * FROM TABLE(DBMS_XPLAN.DISPLAY_CURSOR(FORMAT=&gt;'+ALLSTATS'));
SQL_ID  frgk9dbaftmm9, child number 0
-------------------------------------
SELECT cust_id, cust_last_name, cust_first_name FROM   sh.customers
WHERE  cust_city = 'Hyderabad' AND    cust_income_level LIKE 'C%' AND
 cust_year_of_birth &gt; 1960

Plan hash value: 2008213504

-------------------------------------------------------------------------------
| Id| Operation         | Name      |Starts|E-Rows|A-Rows|   A-Time   |Buffers|
-------------------------------------------------------------------------------
|  0| SELECT STATEMENT  |           |     1|      |    6 |00:00:00.01 |   1523|
|* 1|  TABLE ACCESS FULL| CUSTOMERS |     1|    6 |    6 |00:00:00.01 |   1523|
-------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - filter(("CUST_CITY"='Hyderabad' AND "CUST_YEAR_OF_BIRTH"&gt;1960 AND
              "CUST_INCOME_LEVEL" LIKE 'C%'))
</code></pre></li>
                              <li>
                                 <p>Enable the <code class="codeph">sh.customers</code> table for population in the IM column store:
                                 </p><pre class="pre codeblock"><code>ALTER TABLE sh.customers INMEMORY;</code></pre><p>The preceding statement uses the default priority of <code class="codeph">NONE</code>. A full scan is required to populate objects with no priority.
                                 </p>
                              </li>
                              <li>
                                 <p>To determine whether data from the <code class="codeph">sh.customers</code> table has been populated in the IM column store, execute the following query (sample output included):
                                 </p><pre class="pre codeblock"><code>SELECT SEGMENT_NAME, POPULATE_STATUS 
FROM   V$IM_SEGMENTS 
WHERE  SEGMENT_NAME = 'CUSTOMERS';

no rows selected
</code></pre><p>In this case, no segments are populated in the IM column store because the <code class="codeph">sh.customers</code> table has not yet been scanned. 
                                 </p>
                              </li>
                              <li>
                                 <p>Query <code class="codeph">sh.customers</code> using the same statement as in Step 1:
                                 </p><pre class="pre codeblock"><code>SELECT cust_id, cust_last_name, cust_first_name 
FROM   sh.customers 
WHERE  cust_city = 'Hyderabad' 
AND    cust_income_level LIKE 'C%' 
AND    cust_year_of_birth &gt; 1960;
</code></pre></li>
                              <li>
                                 <p>Querying the cursor shows that the database performed a full scan and accessed the IM column store:</p><pre class="pre codeblock"><code>SQL&gt; SELECT * FROM TABLE(DBMS_XPLAN.DISPLAY_CURSOR(FORMAT=&gt;'+ALLSTATS'));
SQL_ID  frgk9dbaftmm9, child number 0
-------------------------------------
SELECT cust_id, cust_last_name, cust_first_name FROM   sh.customers
WHERE  cust_city = 'Hyderabad' AND    cust_income_level LIKE 'C%' AND
 cust_year_of_birth &gt; 1960

Plan hash value: 2008213504

---------------------------------------------------------------------------------
| Id| Operation           | Name            |Starts|E-Rows|A-Rows|A-Time|Buffers|
---------------------------------------------------------------------------------
|  0| SELECT STATEMENT           |           |    1|     | 6 |00:00:00.02| 1523 |
|* 1|  TABLE ACCESS <span class="bold">INMEMORY</span> FULL| CUSTOMERS |    1|    6| 6 |00:00:00.02| 1523 |
---------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - inmemory(("CUST_CITY"='Hyderabad' AND "CUST_YEAR_OF_BIRTH"&gt;1960 AND
              "CUST_INCOME_LEVEL" LIKE 'C%'))
       filter(("CUST_CITY"='Hyderabad' AND "CUST_YEAR_OF_BIRTH"&gt;1960 AND
              "CUST_INCOME_LEVEL" LIKE 'C%'))
</code></pre></li>
                              <li>
                                 <p>Query <code class="codeph">V$IM_SEGMENTS</code> again (sample output included):
                                 </p><pre class="pre codeblock"><code>COL SEGMENT_NAME FORMAT a20

SELECT SEGMENT_NAME, POPULATE_STATUS 
FROM   V$IM_SEGMENTS 
WHERE  SEGMENT_NAME = 'CUSTOMERS';

SEGMENT_NAME         POPULATE_STATUS
-------------------- ---------------
CUSTOMERS            COMPLETED</code></pre><p>The value <code class="codeph">COMPLETED</code> in <code class="codeph">POPULATE_STATUS</code> means that the table is populated in the IM column store.
                                 </p>
                              </li>
                              <li>
                                 <div class="p">The <code class="codeph">DBA_FEATURE_USAGE_STATISTICS</code> view confirms that the database used the IM column store to retrieve the results:<pre class="pre codeblock"><code>COL NAME FORMAT a25
SELECT ul.NAME, ul.DETECTED_USAGES 
FROM   DBA_FEATURE_USAGE_STATISTICS ul 
WHERE  ul.VERSION= (SELECT MAX(u2.VERSION) 
                    FROM   DBA_FEATURE_USAGE_STATISTICS u2 
                    WHERE  u2.NAME = ul.NAME 
                    AND    ul.NAME LIKE '%Column Store%');

NAME                      DETECTED_USAGES
------------------------- ---------------
In-Memory Column Store    1
</code></pre></div>
                              </li>
                           </ol>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-DE12F0E2-8BEC-4326-A816-D812E54A3D12__GUID-1DA5E834-3FE8-47FD-A73E-6C3F9AA22718">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="populating-objects-in-memory.html#GUID-B37DCA18-7CDA-425A-883B-036B70714F85" title="When you enable an object for the IM column store, you can either let Oracle Database control when the object is populated (default), or you can specify a level that determines the priority of the object in the population queue.">Priority Options for In-Memory Population</a>"</span></p>
                           <p><a href="../sqlrf/ALTER-TABLE.html#SQLRF01001" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> to learn about the <code class="codeph">INMEMORY PRIORITY</code> clause
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-29A8026E-FACC-494B-9BC9-E0D2C9E6B4C3" title="You can specify that the database populates objects in the IM column store either at database instance startup or when INMEMORY objects are accessed.">How In-Memory Population Works</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-DF723C06-62FE-4E5A-8BE0-0703695A7886" name="GUID-DF723C06-62FE-4E5A-8BE0-0703695A7886"></a><h5 id="INMEM-GUID-DF723C06-62FE-4E5A-8BE0-0703695A7886" class="sect5"><span class="enumeration_section">4.1.2.2 </span>How Background Processes Populate IMCUs
                     </h5>
                     <div>
                        <p>During population, the database reads data from disk in its row format, pivots the rows to create columns, and then compresses the data into In-Memory Compression Units (IMCUs).</p>
                        <p>Worker processes (W<span class="italic">nnn</span>) populate the data in the IM column store. Each worker process operates on a subset of database blocks from the object. Population is a streaming mechanism, simultaneously compressing the data and converting it into columnar format.
                        </p>
                        <p>The <code class="codeph">INMEMORY_MAX_POPULATE_SERVERS</code> initialization parameter specifies the maximum number of worker processes to use for IM column store population. By default, the setting is one half of <code class="codeph">CPU_COUNT</code>. Set this parameter to an appropriate value for your environment. More worker processes result in faster population, but they use more CPU resources. Fewer worker processes result in slower population, which reduces CPU overhead.
                        </p>
                        <div class="infoboxnote" id="GUID-DF723C06-62FE-4E5A-8BE0-0703695A7886__GUID-717BA1F4-0B28-467E-B241-AC8332E32E05">
                           <p class="notep1">Note:</p>
                           <p>If <code class="codeph">INMEMORY_MAX_POPULATE_SERVERS</code> is set to <code class="codeph">0</code>, then population is disabled.
                           </p>
                        </div>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-DF723C06-62FE-4E5A-8BE0-0703695A7886__GUID-4C4DF133-8DB5-4FB7-8AEC-2D8DD301C47F">
                           <p class="notep1">See Also:</p>
                           <p><a href="../refrn/INMEMORY_MAX_POPULATE_SERVERS.html#REFRN-GUID-3428C0FF-5AA9-491C-908E-F0BD88095A5A" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for more information about the <code class="codeph">INMEMORY_MAX_POPULATE_SERVERS</code> initialization parameter
                           </p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-29A8026E-FACC-494B-9BC9-E0D2C9E6B4C3" title="You can specify that the database populates objects in the IM column store either at database instance startup or when INMEMORY objects are accessed.">How In-Memory Population Works</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
               <div class="sect3"><a id="GUID-B50145A4-3A97-48DD-8AA3-7E239E926261" name="GUID-B50145A4-3A97-48DD-8AA3-7E239E926261"></a><h4 id="INMEM-GUID-B50145A4-3A97-48DD-8AA3-7E239E926261" class="sect4"><span class="enumeration_section">4.1.3 </span>Controls for In-Memory Population
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">INMEMORY</code> clause in DDL statements to specify which objects are eligible for population into the IM column store. You can enable tablespaces, tables (internal and external), partitions, and materialized views.
                     </p>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-5D4B2A1F-815F-4FDC-91F8-E5CF7179985B">The INMEMORY Subclause</a><br><code class="codeph">INMEMORY</code> is a segment-level attribute, not a column-level attribute. However, you can apply the <code class="codeph">INMEMORY</code> attribute to a subset of columns within a specific object.
                        </li>
                        <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-B37DCA18-7CDA-425A-883B-036B70714F85">Priority Options for In-Memory Population</a><br>When you enable an object for the IM column store, you can either let Oracle Database control when the object is populated (default), or you can specify a level that determines the priority of the object in the population queue.
                        </li>
                        <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-1965B8FE-B34E-42D9-9E97-45D6579162A4">IM Column Store Compression Methods</a><br>Depending on your requirement, you can compress In-Memory objects at different levels.
                        </li>
                        <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-6E37613F-564B-4619-B9B3-CAEB09427E98">Oracle Compression Advisor</a><br>Oracle Compression Advisor estimates the compression ratio that you can realize using the <code class="codeph">MEMCOMPRESS</code> clause. The advisor uses the <code class="codeph">DBMS_COMPRESSION</code> interface.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-BFD476E7-C70D-4906-8B10-D33BC1E768C0" title="In-Memory population (population) occurs when the database reads existing row-format data from disk, transforms it into columnar format, and then stores it in the IM column store.">About In-Memory Population</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="props_rev_3"><a id="GUID-5D4B2A1F-815F-4FDC-91F8-E5CF7179985B" name="GUID-5D4B2A1F-815F-4FDC-91F8-E5CF7179985B"></a><h5 id="INMEM-GUID-5D4B2A1F-815F-4FDC-91F8-E5CF7179985B" class="sect5"><span class="enumeration_section">4.1.3.1 </span>The INMEMORY Subclause
                     </h5>
                     <div>
                        <p><code class="codeph">INMEMORY</code> is a segment-level attribute, not a column-level attribute. However, you can apply the <code class="codeph">INMEMORY</code> attribute to a subset of columns within a specific object.
                        </p>
                        <p>To enable or disable an object for the IM column store, specify the <code class="codeph">INMEMORY</code> clause in DDL statements for tablespaces, tables, and materialized views. The <code class="codeph">INMEMORY</code> column in the <code class="codeph">DBA_TABLES</code> view indicates which tables have the <code class="codeph">INMEMORY</code> attribute set (<code class="codeph">ENABLED</code>) or not set (<code class="codeph">DISABLED</code>).
                        </p>
                        <p>The following objects are not eligible for population in the IM column store:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Indexes</p>
                           </li>
                           <li>
                              <p>Index-organized tables</p>
                           </li>
                           <li>
                              <p>Hash clusters</p>
                           </li>
                           <li>
                              <p>Objects owned by the <code class="codeph">SYS</code> user and stored in the <code class="codeph">SYSTEM</code> or <code class="codeph">SYSAUX</code> tablespace
                              </p>
                           </li>
                        </ul>
                        <p>This section contains the following topics:</p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-2AA11DCC-5744-42C3-81FB-B2BF9A695DCA">In-Memory Tables</a><br>To make heap-organized tables eligible for population, specify <code class="codeph">INMEMORY</code> on the <code class="codeph">CREATE TABLE</code> or <code class="codeph">ALTER TABLE</code> statements.
                           </li>
                           <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-37E2E218-33A2-490E-891D-B627906DE16B">In-Memory External Tables</a><br>To make external tables eligible for population, specify the <code class="codeph">EXTERNAL ... INMEMORY</code> clause in <code class="codeph">CREATE TABLE</code> or <code class="codeph">ALTER TABLE</code>.
                           </li>
                           <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-64B4046F-C3E3-49EB-928E-6502AA58EF4A">In-Memory Materialized Views</a><br>You can make materialized views eligible for population by specifying <code class="codeph">INMEMORY</code> on the <code class="codeph">CREATE MATERIALIZED VIEW</code> or <code class="codeph">ALTER MATERIALIZED VIEW</code> statements.
                           </li>
                           <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-C06CE2D2-72A2-427F-ADAD-0AC689D02580">In-Memory Tablespaces</a><br>You can make permanent tablespaces eligible for population by specifying <code class="codeph">INMEMORY</code> on the <code class="codeph">CREATE TABLESPACE</code> or <code class="codeph">ALTER TABLESPACE</code> statements.
                           </li>
                        </ul>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-B50145A4-3A97-48DD-8AA3-7E239E926261" title="Use the INMEMORY clause in DDL statements to specify which objects are eligible for population into the IM column store. You can enable tablespaces, tables (internal and external), partitions, and materialized views.">Controls for In-Memory Population</a></p>
                           </div>
                        </div>
                     </div>
                     
                     <div class="sect5"><a id="GUID-2AA11DCC-5744-42C3-81FB-B2BF9A695DCA" name="GUID-2AA11DCC-5744-42C3-81FB-B2BF9A695DCA"></a><h6 id="INMEM-GUID-2AA11DCC-5744-42C3-81FB-B2BF9A695DCA" class="sect6"><span class="enumeration_section">4.1.3.1.1 </span>In-Memory Tables
                        </h6>
                        <div>
                           <p>To make heap-organized tables eligible for population, specify <code class="codeph">INMEMORY</code> on the <code class="codeph">CREATE TABLE</code> or <code class="codeph">ALTER TABLE</code> statements.
                           </p>
                           <p>By default, the IM column store populates all nonvirtual columns in the table. You can specify all or some columns of an internal table. For example, you might exclude the <code class="codeph">weight_class</code> and <code class="codeph">catalog_url</code> columns in <code class="codeph">oe.product_information</code> from eligibility.
                           </p>
                           <p>For a partitioned table, you can populate all or some partitions in the IM column store. By default, all partitions in a partitioned table inherit the <code class="codeph">INMEMORY</code> attribute. For hybrid partitioned tables, which contain both internal and external partitions, only internal partitions inherit the <code class="codeph">INMEMORY</code> attribute.
                           </p>
                           <p>On Oracle Exadata Storage Server, the <code class="codeph">CELLMEMORY</code> keyword (default) enables the flash cache to store data in the In-Memory format. You can use <code class="codeph">ALTER TABLE</code> to choose <code class="codeph">FOR QUERY</code> or <code class="codeph">FOR CAPACITY</code> compression. Specifying <code class="codeph">NO CELLMEMORY</code> disables columnar storage in the flash cache.
                           </p>
                           <p>If you enable a table for the IM column store and it contains any of the following types of columns, then they will not be populated in the IM column store:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Out-of-line columns (varrays, nested table columns, and out-of-line LOBs)</p>
                                 <div class="infoboxnote" id="GUID-2AA11DCC-5744-42C3-81FB-B2BF9A695DCA__GUID-5136E8D0-9A18-4EE5-A6E0-8FCAB0F5C31F">
                                    <p class="notep1">Note:</p>
                                    <p>For inline LOB columns, the IM column store allocates up to 4 KB of contiguous buffer storage, and up to 32 KB when the inline LOBs contain OSON (binary JSON) data. For out-of-line LOBs, the IM column store allocates up to 40 bytes for the locator, but does not store the LOB itself.</p>
                                 </div>
                              </li>
                              <li>
                                 <p>Columns that use the <code class="codeph">LONG</code> or <code class="codeph">LONG RAW</code> data types
                                 </p>
                              </li>
                              <li>
                                 <p>Extended data type columns</p>
                              </li>
                           </ul>
                           <div class="example" id="GUID-2AA11DCC-5744-42C3-81FB-B2BF9A695DCA__GUID-B310B32B-63DF-4C53-A522-0AAD43A8EE86">
                              <p class="titleinexample">Example 4-2 Specifying a Table as INMEMORY</p>
                              <p>Assume that you are connected to the database as user <code class="codeph">sh</code>. You enable the <code class="codeph">customers</code> table for population in the IM column store, using the default compression level of <code class="codeph">FOR QUERY LOW</code>:
                              </p><pre class="pre codeblock"><code>SQL&gt; SELECT TABLE_NAME, INMEMORY FROM USER_TABLES WHERE TABLE_NAME = 'CUSTOMERS';

TABLE_NAME INMEMORY
---------- --------
CUSTOMERS  DISABLED

SQL&gt; ALTER TABLE customers INMEMORY;

Table altered.

SQL&gt; SELECT TABLE_NAME, INMEMORY, INMEMORY_COMPRESSION FROM USER_TABLES WHERE TABLE_NAME='CUSTOMERS';

TABLE_NAME INMEMORY INMEMORY_COMPRESS
---------- -------- -----------------
CUSTOMERS  ENABLED  FOR QUERY LOW
</code></pre></div>
                           <!-- class="example" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-2AA11DCC-5744-42C3-81FB-B2BF9A695DCA__GUID-01A3F602-2793-4402-8628-B7844CE35E11">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="in-memory-column-store-architecture.html#GUID-E652C13F-FD52-49D2-B968-3B1A03F7F1ED" title="The IM column store uses special compression formats optimized for access speed rather than storage reduction. The columnar format enables queries to execute directly against the compressed columns.">In-Memory Compression</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="enabling-the-im-column-store.html#GUID-6A220D69-66BA-4C50-8FAB-D5004C96B215" title="Before tables or materialized views can be populated into the IM column store, you must enable the IM column store for the database.">Enabling the IM Column Store for a Database</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=SAGUG-GUID-76E92D13-C65B-4B74-B92D-2AA01D923902" target="_blank"><span><cite>Oracle Exadata System Software User's Guide</cite></span></a> to learn more about <code class="codeph">ALTER TABLE ... CELLMEMORY</code></p>
                                 </li>
                                 <li>
                                    <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF01402" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information about <code class="codeph">INMEMORY</code> clause of the <code class="codeph">CREATE TABLE</code> statement
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-5D4B2A1F-815F-4FDC-91F8-E5CF7179985B" title="INMEMORY is a segment-level attribute, not a column-level attribute. However, you can apply the INMEMORY attribute to a subset of columns within a specific object.">The INMEMORY Subclause</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="sect5"><a id="GUID-37E2E218-33A2-490E-891D-B627906DE16B" name="GUID-37E2E218-33A2-490E-891D-B627906DE16B"></a><h6 id="INMEM-GUID-37E2E218-33A2-490E-891D-B627906DE16B" class="sect6"><span class="enumeration_section">4.1.3.1.2 </span>In-Memory External Tables
                        </h6>
                        <div>
                           <p>To make external tables eligible for population, specify the <code class="codeph">EXTERNAL ... INMEMORY</code> clause in <code class="codeph">CREATE TABLE</code> or <code class="codeph">ALTER TABLE</code>.
                           </p>
                           <div class="section">
                              <p class="subhead3" id="GUID-37E2E218-33A2-490E-891D-B627906DE16B__GUID-4C5095BD-8708-4F6E-86B1-80EA78A52045">Purpose of In-Memory External Tables</p>
                              <p>In-Memory external tables are useful in the following cases:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Short-term data that must be scanned repeatedly in a short time span and does not require retention in Oracle Database</p>
                                 </li>
                                 <li>
                                    <p>External data that must be joined to relational data for fast analytic processing</p>
                                 </li>
                                 <li>
                                    <p>Data that is accessed by analytic queries in both Oracle Database and external tools, and which does not need to be materialized in database storage</p>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-37E2E218-33A2-490E-891D-B627906DE16B__GUID-3BCB388A-5694-4886-9E59-033E38188216">Restrictions for In-Memory External Tables</p>
                              <p>The IM column store manages the data for external tables in the same way as for heap-organized tables. For example, a full table scan populates both internal tables and external tables into the IM column store. The same drivers supported for external tables are supported for In-Memory external tables. However, note the following differences:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Some <code class="codeph">INMEMORY</code> subclauses for external tables are not valid, including the column clause, distribute clause, and priority clause.
                                    </p>
                                 </li>
                                 <li>
                                    <p><span>In-Memory Optimized Arithmetic</span> does not support external tables.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Partitioning is not supported for In-Memory external tables. For hybrid partitioned tables, which contain both internal and external partitions, only <span class="italic">internal</span> partitionsnot external partitionssupport the <code class="codeph">INMEMORY</code> attribute.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Join groups are not supported for In-Memory external tables.</p>
                                 </li>
                                 <li>
                                    <p>IM expressions are not supported for In-Memory external tables.</p>
                                 </li>
                                 <li>
                                    <p>In-Memory external tables do not support the <code class="codeph">DISTRIBUTE ... FOR SERVICE</code> clause for Oracle Active Data Guard instances.
                                    </p>
                                 </li>
                              </ul>
                              <div class="infoboxnote" id="GUID-37E2E218-33A2-490E-891D-B627906DE16B__GUID-41D0FF6E-6FB0-40EC-84E3-793804B9827D">
                                 <p class="notep1">Note:</p>
                                 <p>Sessions that query In-Memory external tables must have the initialization parameter <code class="codeph">QUERY_REWRITE_INTEGRITY</code> set to <code class="codeph">stale_tolerated</code>. If an external table is modified, then the results from the IM column store are undefined.
                                 </p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-37E2E218-33A2-490E-891D-B627906DE16B__GUID-EA7D5E71-89E7-4B17-BE0F-13548DC66E10">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="populating-the-imcs-manually.html#GUID-F1B26BDD-614B-4E4C-A986-8977B4B27DF0" title="This example populates an external table that has the INMEMORY option.">Populating an In-Memory External Table Using DBMS_INMEMORY.POPULATE: Example</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF01402" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information about <code class="codeph">INMEMORY</code> clause of the <code class="codeph">CREATE TABLE ... EXTERNAL</code> statement
                                    </p>
                                 </li>
                                 <li>
                                    <p><span><a href="../dblic/Licensing-Information.html#DBLIC-GUID-0F9EB85D-4610-4EDF-89C2-4916A0E7AC87" target="_blank"><span><cite>Oracle Database Licensing Information User Manual</cite></span></a> for details on which features are supported for different editions and services</span></p>
                                 </li>
                              </ul>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-5D4B2A1F-815F-4FDC-91F8-E5CF7179985B" title="INMEMORY is a segment-level attribute, not a column-level attribute. However, you can apply the INMEMORY attribute to a subset of columns within a specific object.">The INMEMORY Subclause</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="sect5"><a id="GUID-64B4046F-C3E3-49EB-928E-6502AA58EF4A" name="GUID-64B4046F-C3E3-49EB-928E-6502AA58EF4A"></a><h6 id="INMEM-GUID-64B4046F-C3E3-49EB-928E-6502AA58EF4A" class="sect6"><span class="enumeration_section">4.1.3.1.3 </span>In-Memory Materialized Views
                        </h6>
                        <div>
                           <p>You can make materialized views eligible for population by specifying <code class="codeph">INMEMORY</code> on the <code class="codeph">CREATE MATERIALIZED VIEW</code> or <code class="codeph">ALTER MATERIALIZED VIEW</code> statements.
                           </p>
                           <p>For a partitioned materialized view, you can populate all or a subset of the partitions in the IM column store.</p>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-64B4046F-C3E3-49EB-928E-6502AA58EF4A__GUID-4B5B7E9A-E31E-4963-BB33-17BC6837427A">
                              <p class="notep1">See Also:</p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=GUID-29EE5682-AE42-4879-ABAD-E34E66ADD233" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for <code class="codeph">ALTER MATERIALIZED VIEW</code> syntax and semantics
                              </p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-5D4B2A1F-815F-4FDC-91F8-E5CF7179985B" title="INMEMORY is a segment-level attribute, not a column-level attribute. However, you can apply the INMEMORY attribute to a subset of columns within a specific object.">The INMEMORY Subclause</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                     <div class="sect5"><a id="GUID-C06CE2D2-72A2-427F-ADAD-0AC689D02580" name="GUID-C06CE2D2-72A2-427F-ADAD-0AC689D02580"></a><h6 id="INMEM-GUID-C06CE2D2-72A2-427F-ADAD-0AC689D02580" class="sect6"><span class="enumeration_section">4.1.3.1.4 </span>In-Memory Tablespaces
                        </h6>
                        <div>
                           <p>You can make permanent tablespaces eligible for population by specifying <code class="codeph">INMEMORY</code> on the <code class="codeph">CREATE TABLESPACE</code> or <code class="codeph">ALTER TABLESPACE</code> statements.
                           </p>
                           <p>By default, all tables and materialized views in the tablespace are enabled for the IM column store. Individual tables and materialized views in the tablespace may have different <code class="codeph">INMEMORY</code> attributes. The attributes for individual database objects override the attributes for the tablespace.
                           </p>
                           <div class="infoboxnote" id="GUID-C06CE2D2-72A2-427F-ADAD-0AC689D02580__GUID-891F89CD-200A-4D8A-86F4-4FC04561BAD6">
                              <p class="notep1">Note:</p>
                              <p>Temporary tablespaces are not eligible for In-Memory population.</p>
                           </div>
                        </div>
                        <div>
                           <div class="infoboxnotealso" id="GUID-C06CE2D2-72A2-427F-ADAD-0AC689D02580__GUID-0E102071-2927-4B74-B5FE-ACD2AC1E4EA7">
                              <p class="notep1">See Also:</p>
                              <p><a href="../sqlrf/ALTER-TABLESPACE.html#GUID-CA074861-55D3-4768-8995-43D4DA26365D" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for <code class="codeph">ALTER TABLESPACE</code> syntax and semantics
                              </p>
                           </div>
                           <div class="familylinks">
                              <div class="parentlink">
                                 <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-5D4B2A1F-815F-4FDC-91F8-E5CF7179985B" title="INMEMORY is a segment-level attribute, not a column-level attribute. However, you can apply the INMEMORY attribute to a subset of columns within a specific object.">The INMEMORY Subclause</a></p>
                              </div>
                           </div>
                        </div>
                        
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-B37DCA18-7CDA-425A-883B-036B70714F85" name="GUID-B37DCA18-7CDA-425A-883B-036B70714F85"></a><h5 id="INMEM-GUID-B37DCA18-7CDA-425A-883B-036B70714F85" class="sect5"><span class="enumeration_section">4.1.3.2 </span>Priority Options for In-Memory Population
                     </h5>
                     <div>
                        <p>When you enable an object for the IM column store, you can either let Oracle Database control when the object is populated (default), or you can specify a level that determines the priority of the object in the population queue.</p>
                        <div class="section">
                           <p>Oracle SQL includes an <code class="codeph">INMEMORY PRIORITY</code> clause that provides more control over the queue for population. For example, it might be more important or less important to populate a database object's data before populating the data for other database objects.
                           </p>
                           <div class="infoboxnote" id="GUID-B37DCA18-7CDA-425A-883B-036B70714F85__GUID-C3E99599-F9CA-4F6C-8E5B-9DAF3E2EC26F">
                              <p class="notep1">Video:</p>
                              <p>
                                 <div class="video-box">
                                    <div id="9368" class="video-container"></div>
                                 </div>
                              </p>
                           </div>
                           <p>The following table describes the supported priority levels.</p>
                           <div class="tblformalwide" id="GUID-B37DCA18-7CDA-425A-883B-036B70714F85__BABEIDGD">
                              <p class="titleintable">Table 4-1 Priority Levels for Populating a Database Object in the IM Column Store</p>
                              <table cellpadding="4" cellspacing="0" class="FormalWide" title="Priority Levels for Populating a Database Object in the IM Column Store" summary="This table describes the priority levels for loading table data into the In-Memory Column Store. It has the following columns:  Priority Level, CREATE/ALTER Table Syntax, and Description" width="100%" frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="30%" id="d11625e2317">CREATE/ALTER Syntax</th>
                                       <th align="left" valign="bottom" width="70%" id="d11625e2320">Description</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d11625e2325" headers="d11625e2317 ">
                                          <p><code class="codeph">PRIORITY NONE</code></p>
                                       </td>
                                       <td align="left" valign="top" width="70%" headers="d11625e2325 d11625e2320 ">
                                          <p>The database populates the object on demand only. A full scan of the database object triggers the population of the object into the IM column store.</p>
                                          <p>This is the default level when <code class="codeph">PRIORITY</code> is not included in the <code class="codeph">INMEMORY</code> clause.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d11625e2341" headers="d11625e2317 ">
                                          <p><code class="codeph">PRIORITY LOW</code></p>
                                       </td>
                                       <td align="left" valign="top" width="70%" headers="d11625e2341 d11625e2320 ">
                                          <p>The database assigns the object a low priority and populates it after startup based on its position in the queue. Population does not depend on whether the object is accessed.</p>
                                          <p>The object is populated in the IM column store before database objects with the following priority level: <code class="codeph">NONE</code>. The database object's data is populated in the IM column store after database objects with the following priority levels: <code class="codeph">MEDIUM</code>, <code class="codeph">HIGH</code>, or <code class="codeph">CRITICAL</code>.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d11625e2363" headers="d11625e2317 ">
                                          <p><code class="codeph">PRIORITY MEDIUM</code></p>
                                       </td>
                                       <td align="left" valign="top" width="70%" headers="d11625e2363 d11625e2320 ">
                                          <p>The database assigns the object a medium priority and populates it after startup based on its position in the queue. Population does not depend on whether the object is accessed.</p>
                                          <p>The database object is populated in the IM column store before database objects with the following priority levels: <code class="codeph">NONE</code> or <code class="codeph">LOW</code>. The database object's data is populated in the IM column store after database objects with the following priority levels: <code class="codeph">HIGH</code> or <code class="codeph">CRITICAL</code>.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d11625e2385" headers="d11625e2317 ">
                                          <p><code class="codeph">PRIORITY HIGH</code></p>
                                       </td>
                                       <td align="left" valign="top" width="70%" headers="d11625e2385 d11625e2320 ">
                                          <p>The database assigns the object a high priority and populates it after startup based on its position in the queue. Population does not depend on whether the object is accessed.</p>
                                          <p>The database object's data is populated in the IM column store before database objects with the following priority levels: <code class="codeph">NONE</code>, <code class="codeph">LOW</code>, or <code class="codeph">MEDIUM</code>. The database object's data is populated in the IM column store after database objects with the following priority level: <code class="codeph">CRITICAL</code>.
                                          </p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="30%" id="d11625e2407" headers="d11625e2317 ">
                                          <p><code class="codeph">PRIORITY CRITICAL</code></p>
                                       </td>
                                       <td align="left" valign="top" width="70%" headers="d11625e2407 d11625e2320 ">
                                          <p>The database assigns the object a low priority and populates it after startup based on its position in the queue. Population does not depend on whether the object is accessed.</p>
                                          <p>The database object's data is populated in the IM column store before database objects with the following priority levels: <code class="codeph">NONE</code>, <code class="codeph">LOW</code>, <code class="codeph">MEDIUM</code>, or <code class="codeph">HIGH</code>.
                                          </p>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                           <p>When more than one database object has a priority level other than <code class="codeph">NONE</code>, Oracle Database queues the data for objects to be populated based on priority level. Database objects with the <code class="codeph">CRITICAL</code> priority level are populated first; database objects with the <code class="codeph">HIGH</code> priority level are populated next, and so on. If no space remains in the IM column store, then no additional objects are populated in it until space becomes available.
                           </p>
                           <div class="infoboxnote" id="GUID-B37DCA18-7CDA-425A-883B-036B70714F85__GUID-E2372CD0-3319-4179-B3DA-64510BF383F8">
                              <p class="notep1">Note:</p>
                              <p>If you specify all objects as <code class="codeph">CRITICAL</code>, then the database does not consider any object as more critical than any other.
                              </p>
                           </div>
                           <p>When a database is restarted, all of the data for database objects with a priority level other than <code class="codeph">NONE</code> are populated in the IM column store during startup. For a database object with a priority level other than <code class="codeph">NONE</code>, an <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> or <code class="codeph">ALTER MATERIALIZED VIEW</code> DDL statement involving the database object does not return until the DDL changes are recorded in the IM column store.
                           </p>
                           <div class="infoboxnote" id="GUID-B37DCA18-7CDA-425A-883B-036B70714F85__GUID-973048C5-DE8A-43BA-8751-8310E2B2685F">
                              <p class="notep1">Note:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The priority level setting must apply to an entire table or to a table partition. Specifying different IM column store priority levels for different subsets of columns in a table is not permitted.</p>
                                 </li>
                                 <li>
                                    <p>If a segment on disk is 64 KB or less, then it is not populated in the IM column store. Therefore, some small database objects that were enabled for the IM column store might not be populated.</p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-B37DCA18-7CDA-425A-883B-036B70714F85__GUID-44A62D85-0071-40D2-909B-D8555BEA8518">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="populating-objects-in-memory.html#GUID-DE12F0E2-8BEC-4326-A816-D812E54A3D12" title="DDL statements include an INMEMORY PRIORITY subclause that provides more control over the population queue.">Prioritization of In-Memory Population</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for <code class="codeph">CREATE TABLE ... INMEMORY PRIORITY</code> syntax and semantics
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-B50145A4-3A97-48DD-8AA3-7E239E926261" title="Use the INMEMORY clause in DDL statements to specify which objects are eligible for population into the IM column store. You can enable tablespaces, tables (internal and external), partitions, and materialized views.">Controls for In-Memory Population</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="props_rev_3"><a id="GUID-1965B8FE-B34E-42D9-9E97-45D6579162A4" name="GUID-1965B8FE-B34E-42D9-9E97-45D6579162A4"></a><h5 id="INMEM-GUID-1965B8FE-B34E-42D9-9E97-45D6579162A4" class="sect5"><span class="enumeration_section">4.1.3.3 </span>IM Column Store Compression Methods
                     </h5>
                     <div>
                        <p>Depending on your requirement, you can compress In-Memory objects at different levels.</p>
                        <div class="section">
                           <p>Typically, compression is a space-saving mechanism. However, the IM column store can compress data using a new set of algorithms that also improve query performance. If the columnar data is compressed using the <code class="codeph">FOR DML</code> or <code class="codeph">FOR QUERY</code> options, then SQL queries execute directly on the compressed data. Thus, scanning and filtering operations execute on a much smaller amount of data. The database only decompresses data when it is required for the result set.
                           </p>
                           <div class="infoboxnote" id="GUID-1965B8FE-B34E-42D9-9E97-45D6579162A4__GUID-FE6070A5-C5BB-444C-BC92-F63E56B6077C">
                              <p class="notep1">Video:</p>
                              <p>
                                 <div class="video-box">
                                    <div id="9369" class="video-container"></div>
                                 </div>
                              </p>
                           </div>
                           <p>The <code class="codeph">V$IM_SEGMENTS</code> and <code class="codeph">V$IM_COLUMN_LEVEL</code> views indicate the current compression level. You can change compression levels by using the appropriate <code class="codeph">ALTER</code> command. <span>If a table is currently populated in the IM column store, and if you change any <code class="codeph">INMEMORY</code> attribute of the table <span class="italic">other than</span> <code class="codeph">PRIORITY</code>, then the database evicts the table from the IM column store. The repopulation behavior depends on the <code class="codeph">PRIORITY</code> setting.</span></p>
                           <p>The following table summarizes the data compression methods supported in the IM column store.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="tblformalwide" id="GUID-1965B8FE-B34E-42D9-9E97-45D6579162A4__BABIHHDA">
                           <p class="titleintable">Table 4-2 IM Column Store Compression Methods</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="IM Column Store Compression Methods" summary="This table describes the types of in-memory table compression. It has the following columns: CREATE/ALTER Table Syntax, and Description" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="45%" id="d11625e2662">CREATE/ALTER Syntax</th>
                                    <th align="left" valign="bottom" width="55%" id="d11625e2665">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="45%" id="d11625e2670" headers="d11625e2662 ">
                                       <p><code class="codeph">NO MEMCOMPRESS</code></p>
                                    </td>
                                    <td align="left" valign="top" width="55%" headers="d11625e2670 d11625e2665 ">
                                       <p>The data is not compressed.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="45%" id="d11625e2678" headers="d11625e2662 ">
                                       <p><code class="codeph">MEMCOMPRESS FOR DML</code></p>
                                    </td>
                                    <td align="left" valign="top" width="55%" headers="d11625e2678 d11625e2665 ">
                                       <p>This method results in the best DML performance.</p>
                                       <p>This method compresses IM column store data the least, with the exception of <code class="codeph">NO MEMCOMPRESS</code>.
                                       </p>
                                       <div class="infoboxnote" id="GUID-1965B8FE-B34E-42D9-9E97-45D6579162A4__GUID-D184FBE5-7A65-410E-B241-34AE170A716A">
                                          <p class="notep1">Note:</p>
                                          <p>This compression method is not supported for <code class="codeph">CELLMEMORY</code> storage on Exadata flash cache.
                                          </p>
                                       </div>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="45%" id="d11625e2697" headers="d11625e2662 ">
                                       <p><code class="codeph">MEMCOMPRESS FOR QUERY LOW</code></p>
                                    </td>
                                    <td align="left" valign="top" width="55%" headers="d11625e2697 d11625e2665 ">
                                       <p>This method results in the best query performance.</p>
                                       <p>This method compresses IM column store data more than <code class="codeph">MEMCOMPRESS FOR DML</code> but less than <code class="codeph">MEMCOMPRESS FOR QUERY HIGH</code>.
                                       </p>
                                       <p>This method is the default when the <code class="codeph">INMEMORY</code> clause is specified without a compression method in a <code class="codeph">CREATE</code> or <code class="codeph">ALTER</code> SQL statement or when <code class="codeph">MEMCOMPRESS FOR QUERY</code> is specified without including either <code class="codeph">LOW</code> or <code class="codeph">HIGH</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="45%" id="d11625e2734" headers="d11625e2662 ">
                                       <p><code class="codeph">MEMCOMPRESS FOR QUERY HIGH</code></p>
                                    </td>
                                    <td align="left" valign="top" width="55%" headers="d11625e2734 d11625e2665 ">
                                       <p>This method results in good query performance, and saves space.</p>
                                       <p>This method compresses IM column store data more than <code class="codeph">MEMCOMPRESS FOR QUERY LOW</code> but less than <code class="codeph">MEMCOMPRESS FOR CAPACITY LOW</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="45%" id="d11625e2750" headers="d11625e2662 ">
                                       <p><code class="codeph">MEMCOMPRESS FOR CAPACITY LOW</code></p>
                                    </td>
                                    <td align="left" valign="top" width="55%" headers="d11625e2750 d11625e2665 ">
                                       <p>This method balances space saving and query performance, with a bias toward space saving.</p>
                                       <p>This method compresses IM column store data more than <code class="codeph">MEMCOMPRESS FOR QUERY HIGH</code> but less than <code class="codeph">MEMCOMPRESS FOR CAPACITY HIGH</code>. This method applies a proprietary compression technique called Oracle Zip (OZIP) that offers extremely fast decompression that is tuned specifically for Oracle Database. That data must be decompressed before it can be scanned.
                                       </p>
                                       <p>This method is the default when <code class="codeph">MEMCOMPRESS FOR CAPACITY</code> is specified without including either <code class="codeph">LOW</code> or <code class="codeph">HIGH</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="45%" id="d11625e2777" headers="d11625e2662 ">
                                       <p><code class="codeph">MEMCOMPRESS FOR CAPACITY HIGH</code></p>
                                    </td>
                                    <td align="left" valign="top" width="55%" headers="d11625e2777 d11625e2665 ">
                                       <p>This method results in the best space saving.</p>
                                       <p>This method compresses IM column store data the most.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="section">
                           <p>In a SQL statement, the <code class="codeph">MEMCOMPRESS</code> keyword must be preceded by the <code class="codeph">INMEMORY</code> keyword.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-1965B8FE-B34E-42D9-9E97-45D6579162A4__GUID-ED27CFC7-FDAC-41CC-AA4D-C6484F71BF43">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="repopulation-and-dml.html#GUID-857EFBD6-6D03-4543-9FAB-F66B5C16D0C7" title="The automatic refresh of columnar data after significant modifications is called repopulation.">About Repopulation of the IM Column Store</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=SAGUG-GUID-76E92D13-C65B-4B74-B92D-2AA01D923902" target="_blank"><span><cite>Oracle Exadata System Software User's Guide</cite></span></a> to learn more about <code class="codeph">ALTER TABLE ... CELLMEMORY</code></p>
                              </li>
                              <li>
                                 <p><a href="../sqlrf/CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for <code class="codeph">CREATE TABLE ... INMEMORY PRIORITY</code> syntax and semantics
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-B50145A4-3A97-48DD-8AA3-7E239E926261" title="Use the INMEMORY clause in DDL statements to specify which objects are eligible for population into the IM column store. You can enable tablespaces, tables (internal and external), partitions, and materialized views.">Controls for In-Memory Population</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-6E37613F-564B-4619-B9B3-CAEB09427E98" name="GUID-6E37613F-564B-4619-B9B3-CAEB09427E98"></a><h5 id="INMEM-GUID-6E37613F-564B-4619-B9B3-CAEB09427E98" class="sect5"><span class="enumeration_section">4.1.3.4 </span>Oracle Compression Advisor
                     </h5>
                     <div>
                        <p>Oracle Compression Advisor estimates the compression ratio that you can realize using the <code class="codeph">MEMCOMPRESS</code> clause. The advisor uses the <code class="codeph">DBMS_COMPRESSION</code> interface.
                        </p>
                        <p> When you run <code class="codeph">DBMS_COMPRESSION.GET_COMPRESSION_RATIO</code> for a table, Oracle Database analyzes a sample of the rows. For this reason, Oracle Compression Advisor provides a good estimate of the compression results that a table achieves after it is populated into the IM column store.
                        </p>
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-6E37613F-564B-4619-B9B3-CAEB09427E98__GUID-E1CB37F6-B8A3-4A1C-8A0F-FF3B139809FC">
                           <p class="notep1">See Also:</p>
                           <p><a href="../arpls/DBMS_COMPRESSION.html#ARPLS65605" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> to learn about  <code class="codeph">DBMS_COMPRESSION.GET_COMPRESSION_RATIO</code></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-B50145A4-3A97-48DD-8AA3-7E239E926261" title="Use the INMEMORY clause in DDL statements to specify which objects are eligible for population into the IM column store. You can enable tablespaces, tables (internal and external), partitions, and materialized views.">Controls for In-Memory Population</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-C5D0A470-C06A-4EE2-AA1A-B221FFEB663B" name="GUID-C5D0A470-C06A-4EE2-AA1A-B221FFEB663B"></a><h3 id="INMEM-GUID-C5D0A470-C06A-4EE2-AA1A-B221FFEB663B" class="sect3"><span class="enumeration_section">4.2 </span>Enabling and Disabling Tables for the IM Column Store
               </h3>
               <div>
                  <p>Enable a table for the IM column store by including an <code class="codeph">INMEMORY</code> clause in a <code class="codeph">CREATE TABLE</code> or <code class="codeph">ALTER TABLE</code> statement. Disable a table for the IM column store by including a <code class="codeph">NO INMEMORY</code> clause in a <code class="codeph">CREATE TABLE</code> or <code class="codeph">ALTER TABLE</code> statement.
                  </p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-FB360DEE-45DB-49FF-8510-541473AAD707">Enabling New Tables for the In-Memory Column Store</a><br>You enable a new table for the IM column store by including an <code class="codeph">INMEMORY</code> clause in a <code class="codeph">CREATE TABLE</code> statement.
                     </li>
                     <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-94F1D24C-ABEA-403D-B1D4-43B331321FFE">Enabling and Disabling Existing Tables for the IM Column Store</a><br>Enable or disable an existing table for the IM column store by including an <code class="codeph">INMEMORY</code> or <code class="codeph">NO INMEMORY</code> clause in an <code class="codeph">ALTER TABLE</code> statement.
                     </li>
                     <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-F482BE39-36B9-4146-B335-8BEFBA3B3496">Enabling and Disabling Tables for the IM Column Store: Examples</a><br>The following examples illustrate how to enable or disable tables for the IM column store.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-C5F856BF-70E3-41C6-A1BA-1E94D7D230B8" title="This chapter explains how to enable and disable objects for population in the IM column store, including setting compression and priority options.">Enabling Objects for In-Memory Population</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-FB360DEE-45DB-49FF-8510-541473AAD707" name="GUID-FB360DEE-45DB-49FF-8510-541473AAD707"></a><h4 id="INMEM-GUID-FB360DEE-45DB-49FF-8510-541473AAD707" class="sect4"><span class="enumeration_section">4.2.1 </span>Enabling New Tables for the In-Memory Column Store
                  </h4>
                  <div>
                     <p>You enable a new table for the IM column store by including an <code class="codeph">INMEMORY</code> clause in a <code class="codeph">CREATE TABLE</code> statement.
                     </p>
                     <div class="section">
                        <p>You can enable either internal or external tables for the IM column store. Some <code class="codeph">INMEMORY</code> subclauses, including the columns and priority subclauses, are not valid for external tables.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FB360DEE-45DB-49FF-8510-541473AAD707__GUID-6F19ED97-8AD8-40E2-A990-FEA27BBF5C74">Prerequisites</p>
                        <p>Ensure that the IM column store is enabled for the database. See <span class="q">"<a href="enabling-the-im-column-store.html#GUID-6A220D69-66BA-4C50-8FAB-D5004C96B215" title="Before tables or materialized views can be populated into the IM column store, you must enable the IM column store for the database.">Enabling the IM Column Store for a Database</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FB360DEE-45DB-49FF-8510-541473AAD707__GUID-2CCDECBE-24E2-42C4-ACAE-7174A1DD6411">To enable a new table for the IM column store:</p>
                        <ol>
                           <li>
                              <p>Log in to the database as a user with the necessary privileges to create the table.</p>
                           </li>
                           <li>
                              <p>Run a <code class="codeph">CREATE TABLE</code> statement with an <code class="codeph">INMEMORY</code> clause.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-FB360DEE-45DB-49FF-8510-541473AAD707__GUID-9512AE6C-E37B-45A6-9C13-1346AA93313E">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="populating-objects-in-memory.html#GUID-F482BE39-36B9-4146-B335-8BEFBA3B3496" title="The following examples illustrate how to enable or disable tables for the IM column store.">Enabling and Disabling Tables for the IM Column Store: Examples</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="populating-objects-in-memory.html#GUID-128BA141-FB78-4828-B3EE-6FDAB6E23E2E" title="This example enables all columns in the oe.product_information table for the IM column store except weight_class and catalog_url.">Enabling a Subset of Columns for the IM Column Store: Example</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF01402" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information about <code class="codeph">INMEMORY</code> clause of the <code class="codeph">CREATE TABLE</code> statement
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-C5D0A470-C06A-4EE2-AA1A-B221FFEB663B" title="Enable a table for the IM column store by including an INMEMORY clause in a CREATE TABLE or ALTER TABLE statement. Disable a table for the IM column store by including a NO INMEMORY clause in a CREATE TABLE or ALTER TABLE statement.">Enabling and Disabling Tables for the IM Column Store</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-94F1D24C-ABEA-403D-B1D4-43B331321FFE" name="GUID-94F1D24C-ABEA-403D-B1D4-43B331321FFE"></a><h4 id="INMEM-GUID-94F1D24C-ABEA-403D-B1D4-43B331321FFE" class="sect4"><span class="enumeration_section">4.2.2 </span>Enabling and Disabling Existing Tables for the IM Column Store
                  </h4>
                  <div>
                     <p>Enable or disable an existing table for the IM column store by including an <code class="codeph">INMEMORY</code> or <code class="codeph">NO INMEMORY</code> clause in an <code class="codeph">ALTER TABLE</code> statement.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-94F1D24C-ABEA-403D-B1D4-43B331321FFE__GUID-C0FDBC4A-D0C2-403F-983E-596C5EE3CF42">Prerequisites</p>
                        <p>Ensure that the IM column store is enabled for the database. See <span class="q">"<a href="enabling-the-im-column-store.html#GUID-6A220D69-66BA-4C50-8FAB-D5004C96B215" title="Before tables or materialized views can be populated into the IM column store, you must enable the IM column store for the database.">Enabling the IM Column Store for a Database</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-94F1D24C-ABEA-403D-B1D4-43B331321FFE__GUID-BD98BA8A-70BE-4FBC-A8AB-55B59E0D6A22">To enable or disable an existing table for the IM column store:</p>
                        <ol>
                           <li>
                              <p>Log in to the database as a user with <code class="codeph">ALTER TABLE</code> privileges.
                              </p>
                           </li>
                           <li>
                              <p>Run an <code class="codeph">ALTER TABLE</code> statement with an <code class="codeph">INMEMORY</code> clause or a <code class="codeph">NO INMEMORY</code> clause.
                              </p>
                           </li>
                           <li>
                              <p>Optionally, to view metadata (size, priority, compression level) about the In-Memory segment, query <code class="codeph">V$IM_SEGMENTS</code>.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-94F1D24C-ABEA-403D-B1D4-43B331321FFE__GUID-9512AE6C-E37B-45A6-9C13-1346AA93313E">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="populating-objects-in-memory.html#GUID-F482BE39-36B9-4146-B335-8BEFBA3B3496" title="The following examples illustrate how to enable or disable tables for the IM column store.">Enabling and Disabling Tables for the IM Column Store: Examples</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="populating-objects-in-memory.html#GUID-128BA141-FB78-4828-B3EE-6FDAB6E23E2E" title="This example enables all columns in the oe.product_information table for the IM column store except weight_class and catalog_url.">Enabling a Subset of Columns for the IM Column Store: Example</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/ALTER-TABLE.html#SQLRF01001" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information about the <code class="codeph">ALTER TABLE</code> statement
                              </p>
                           </li>
                           <li>
                              <p><a href="../refrn/V-IM_SEGMENTS.html#GUID-1CD070FD-2864-452D-B2AA-50E977C4885A" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for information about the <code class="codeph">V$IM_SEGMENTS</code> view
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-C5D0A470-C06A-4EE2-AA1A-B221FFEB663B" title="Enable a table for the IM column store by including an INMEMORY clause in a CREATE TABLE or ALTER TABLE statement. Disable a table for the IM column store by including a NO INMEMORY clause in a CREATE TABLE or ALTER TABLE statement.">Enabling and Disabling Tables for the IM Column Store</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-F482BE39-36B9-4146-B335-8BEFBA3B3496" name="GUID-F482BE39-36B9-4146-B335-8BEFBA3B3496"></a><h4 id="INMEM-GUID-F482BE39-36B9-4146-B335-8BEFBA3B3496" class="sect4"><span class="enumeration_section">4.2.3 </span>Enabling and Disabling Tables for the IM Column Store: Examples
                  </h4>
                  <div>
                     <p>The following examples illustrate how to enable or disable tables for the IM column store.</p>
                     <div class="section">This section contains the following topics:</div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-21EBEB55-6898-40C8-B60A-36052D34D73C">Creating an In-Memory Table: Example</a><br>This example creates the <code class="codeph">test_inmem</code> table and enables it for the IM column store.
                        </li>
                        <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-E1378020-4ED0-4C79-A555-0687314D72BC">Creating a Table with In-Memory Partitions: Example</a><br>This example creates a partitioned table named <code class="codeph">range_sales</code>, specifying a subset of the partitions as <code class="codeph">INMEMORY</code>.
                        </li>
                        <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-55107DB5-36DD-4654-94D0-D0BC6979B2E4">Creating an In-Memory External Table: Example</a><br>This example creates an external table with the <code class="codeph">INMEMORY</code> option.
                        </li>
                        <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-38898326-7C23-4ECA-A474-F2FE4B103CC9">Creating and Populating a Hybrid External Table: Example</a><br>This example creates a hybrid external table with the <code class="codeph">INMEMORY</code> option, and then populates the internal partitions.
                        </li>
                        <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-D259986C-DD74-4E72-B467-15B5858FB2CC">Enabling an Existing Table for the IM Column Store: Example</a><br>This example enables the existing <code class="codeph">sh.sales</code> table for the IM column store.
                        </li>
                        <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-99483384-3F93-482C-A4BE-63EFA9F05C1A">Setting In-Memory Compression to FOR CAPACITY LOW: Example</a><br>This example enables the existing <code class="codeph">oe.product_information</code> table for the IM column store and specifies the compression method <code class="codeph">FOR CAPACITY LOW</code>.
                        </li>
                        <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-C427E06F-AB27-4013-B7CE-223FF15E14AA">Setting In-Memory Priority to HIGH: Example</a><br>This example enables the <code class="codeph">oe.product_information</code> table for the IM column store and specifies <code class="codeph">PRIORITY HIGH</code> for populating the table data in the IM column store.
                        </li>
                        <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-2D5D74B5-F89B-4E67-B177-1509185B473E">Changing the Compression and Priority Settings for an In-Memory Table: Example</a><br>This example alters the <code class="codeph">oe.product_information</code> table to use <code class="codeph">FOR CAPACITY HIGH</code> table compression and a <code class="codeph">LOW</code> priority setting.
                        </li>
                        <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-DF52530E-137B-4FAC-AC1E-017D10B9519C">Disabling a Table for the IM Column Store: Example</a><br>To disable a table for the IM column store, specify the <code class="codeph">NO INMEMORY</code> clause.
                        </li>
                        <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-E71618B8-AB50-48AB-8529-02F6A8F17FD4">Disabling Columnar Format on Exadata Smart Flash Cache: Example</a><br>This example disables the columnar format for <code class="codeph">oe.product_information</code> on Exadata Smart Flash Cache storage.
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-F482BE39-36B9-4146-B335-8BEFBA3B3496__GUID-F9C0F675-4D73-454E-9139-E8A6B95BAB8E">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="populating-objects-in-memory.html#GUID-F482BE39-36B9-4146-B335-8BEFBA3B3496" title="The following examples illustrate how to enable or disable tables for the IM column store.">Enabling and Disabling Tables for the IM Column Store: Examples</a>"</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-C5D0A470-C06A-4EE2-AA1A-B221FFEB663B" title="Enable a table for the IM column store by including an INMEMORY clause in a CREATE TABLE or ALTER TABLE statement. Disable a table for the IM column store by including a NO INMEMORY clause in a CREATE TABLE or ALTER TABLE statement.">Enabling and Disabling Tables for the IM Column Store</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-21EBEB55-6898-40C8-B60A-36052D34D73C" name="GUID-21EBEB55-6898-40C8-B60A-36052D34D73C"></a><h5 id="INMEM-GUID-21EBEB55-6898-40C8-B60A-36052D34D73C" class="sect5"><span class="enumeration_section">4.2.3.1 </span>Creating an In-Memory Table: Example
                     </h5>
                     <div>
                        <p>This example creates the <code class="codeph">test_inmem</code> table and enables it for the IM column store.
                        </p>
                        <div class="example" id="GUID-21EBEB55-6898-40C8-B60A-36052D34D73C__GUID-2C339BDC-BFDB-4A5D-AB57-15DE86ACD215">
                           <p>In SQL*Plus, log in to the database as the user who will own the table, and then execute the following SQL statement:</p><pre class="pre codeblock"><code>CREATE TABLE test_inmem (
     id        NUMBER(5) PRIMARY KEY,
     test_col  VARCHAR2(15))
  INMEMORY;
</code></pre><p>The preceding statement uses the defaults for the <code class="codeph">INMEMORY</code> clause: <code class="codeph">MEMCOMPRESS FOR QUERY</code> and <code class="codeph">PRIORITY NONE</code>. Because <code class="codeph">PRIORITY</code> is <code class="codeph">NONE</code>, the database will not automatically populate the table.
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-F482BE39-36B9-4146-B335-8BEFBA3B3496" title="The following examples illustrate how to enable or disable tables for the IM column store.">Enabling and Disabling Tables for the IM Column Store: Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-E1378020-4ED0-4C79-A555-0687314D72BC" name="GUID-E1378020-4ED0-4C79-A555-0687314D72BC"></a><h5 id="INMEM-GUID-E1378020-4ED0-4C79-A555-0687314D72BC" class="sect5"><span class="enumeration_section">4.2.3.2 </span>Creating a Table with In-Memory Partitions: Example
                     </h5>
                     <div>
                        <p>This example creates a partitioned table named <code class="codeph">range_sales</code>, specifying a subset of the partitions as <code class="codeph">INMEMORY</code>.
                        </p>
                        <div class="example" id="GUID-E1378020-4ED0-4C79-A555-0687314D72BC__GUID-3598CEB3-F4DD-42D0-A69C-6425CD023EBE">
                           <p>Log in to SQL*Plus as the user that will own the new table, and then execute the following DDL statement:</p><pre class="pre codeblock"><code>CREATE TABLE range_sales
    ( prod_id        NUMBER(6)
    , cust_id        NUMBER
    , time_id        DATE
    , channel_id     CHAR(1)
    , promo_id       NUMBER(6)
    , quantity_sold  NUMBER(3)
    , amount_sold    NUMBER(10,2)
    ) 
PARTITION BY RANGE (time_id)
  (PARTITION SALES_Q4_1999 
      VALUES LESS THAN (TO_DATE('01-JAN-2015','DD-MON-YYYY'))
      INMEMORY MEMCOMPRESS FOR DML,
   PARTITION SALES_Q1_2000 
      VALUES LESS THAN (TO_DATE('01-APR-2015','DD-MON-YYYY'))
      INMEMORY MEMCOMPRESS FOR QUERY,
   PARTITION SALES_Q2_2000 
      VALUES LESS THAN (TO_DATE('01-JUL-2015','DD-MON-YYYY'))
      INMEMORY MEMCOMPRESS FOR CAPACITY,
   PARTITION SALES_Q3_2000 
      VALUES LESS THAN (TO_DATE('01-OCT-2015','DD-MON-YYYY'))
      NO INMEMORY,
   PARTITION SALES_Q4_2000 
      VALUES LESS THAN (MAXVALUE));</code></pre><p>The preceding SQL specifies a different compression level for the first three partitions in the IM column store. The last two partitions are not eligible for population in the IM column store.</p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-F482BE39-36B9-4146-B335-8BEFBA3B3496" title="The following examples illustrate how to enable or disable tables for the IM column store.">Enabling and Disabling Tables for the IM Column Store: Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-55107DB5-36DD-4654-94D0-D0BC6979B2E4" name="GUID-55107DB5-36DD-4654-94D0-D0BC6979B2E4"></a><h5 id="INMEM-GUID-55107DB5-36DD-4654-94D0-D0BC6979B2E4" class="sect5"><span class="enumeration_section">4.2.3.3 </span>Creating an In-Memory External Table: Example
                     </h5>
                     <div>
                        <p>This example creates an external table with the <code class="codeph">INMEMORY</code> option.
                        </p>
                        <div class="p">
                           <p>This example assumes that the host has the directories <code class="codeph">/tmp/data/</code>, <code class="codeph">/tmp/log/</code>, and <code class="codeph">/tmp/bad/</code>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-55107DB5-36DD-4654-94D0-D0BC6979B2E4__GUID-74146E09-A4DF-4F63-9909-836168A7B3DE">
                           <p>The following SQL script creates the comma-delimited flat file <code class="codeph">/tmp/data/sh_sales.csv</code> from the <code class="codeph">sh.sales</code> table. Execute the script as user <code class="codeph">sh</code>.
                           </p><pre class="pre codeblock"><code>SET HEAD OFF
SET PAGES 0
SET FEEDBACK OFF
SET TERMOUT OFF
SPOOL /tmp/data/sh_sales.csv
SELECT prod_id       || ',' || cust_id  || ',' || time_id || ',' || 
       channel_id    || ',' || promo_id || ',' || 
       quantity_sold || ',' || amount_sold 
FROM   sales;
SPOOL OFF</code></pre><p>Using the <code class="codeph">sh_sales.csv</code> file, the following SQL script creates the external table <code class="codeph">sh.admin_ext_sales</code> with the <code class="codeph">INMEMORY</code> option:
                           </p><pre class="pre codeblock"><code>CONNECT  /  AS SYSDBA;
-- Set up directories and grant access to sh 
CREATE OR REPLACE DIRECTORY admin_dat_dir
    AS '/tmp/data'; 
CREATE OR REPLACE DIRECTORY admin_log_dir 
    AS '/tmp/log'; 
CREATE OR REPLACE DIRECTORY admin_bad_dir 
    AS '/tmp/bad'; 
GRANT READ ON DIRECTORY admin_dat_dir TO sh; 
GRANT WRITE ON DIRECTORY admin_log_dir TO sh; 
GRANT WRITE ON DIRECTORY admin_bad_dir TO sh;
-- sh connects. Provide the user password (sh) when prompted.
CONNECT sh
-- create the external table
DROP TABLE admin_ext_sales;
CREATE TABLE admin_ext_sales
                   (prod_id           NUMBER, 
                    cust_id           NUMBER,
                    time_id           DATE, 
                    channel_id        NUMBER,
                    promo_id          NUMBER,
                    quantity_sold     NUMBER(10,2),
                    amount_sold       NUMBER(10,2)
                   ) 
     ORGANIZATION EXTERNAL 
     ( 
       TYPE ORACLE_LOADER 
       DEFAULT DIRECTORY admin_dat_dir 
       ACCESS PARAMETERS 
       ( 
         records delimited by newline 
         badfile admin_bad_dir:'empxt%a_%p.bad' 
         logfile admin_log_dir:'empxt%a_%p.log' 
         fields terminated by ',' 
         missing field values are null 
         ( prod_id, cust_id,
           time_id char date_format date mask "dd-mon-yy", 
           channel_id, promo_id, quantity_sold, amount_sold 
         ) 
       ) 
       LOCATION ('sh_sales.csv') 
     ) 
     REJECT LIMIT UNLIMITED
     INMEMORY; </code></pre><p>The following query of <code class="codeph">ALL_EXTERNAL_TABLES</code> shows that the <code class="codeph">admin_ext_sales</code> table is enabled for <code class="codeph">INMEMORY</code>:
                           </p><pre class="pre codeblock"><code>COL OWNER FORMAT A10
COL TABLE_NAME FORMAT A15

SELECT OWNER, TABLE_NAME, 
       INMEMORY, INMEMORY_COMPRESSION 
FROM   ALL_EXTERNAL_TABLES 
WHERE  TABLE_NAME = 'ADMIN_EXT_SALES';

OWNER      TABLE_NAME      INMEMORY INMEMORY_COMPRESS
---------- --------------- -------- -----------------
SH         ADMIN_EXT_SALES ENABLED  FOR QUERY LOW
</code></pre><p>Related views include <code class="codeph">ALL_XTERNAL_PART_TABLES</code>, <code class="codeph">ALL_XTERNAL_TAB_PARTITIONS</code>, and <code class="codeph">ALL_XTERNAL_TAB_SUBPARTITIONS</code>.
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-55107DB5-36DD-4654-94D0-D0BC6979B2E4__GUID-7DD4F704-3C39-4F55-8D02-F3B52AF126BC">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="populating-the-imcs-manually.html#GUID-F1B26BDD-614B-4E4C-A986-8977B4B27DF0" title="This example populates an external table that has the INMEMORY option.">Populating an In-Memory External Table Using DBMS_INMEMORY.POPULATE: Example</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../refrn/QUERY_REWRITE_INTEGRITY.html#GUID-23655494-DF65-4F0E-A89F-8333222297F5" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> to learn about <code class="codeph">ALL_EXTERNAL_TABLES</code> and the related external table views
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-F482BE39-36B9-4146-B335-8BEFBA3B3496" title="The following examples illustrate how to enable or disable tables for the IM column store.">Enabling and Disabling Tables for the IM Column Store: Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-38898326-7C23-4ECA-A474-F2FE4B103CC9" name="GUID-38898326-7C23-4ECA-A474-F2FE4B103CC9"></a><h5 id="INMEM-GUID-38898326-7C23-4ECA-A474-F2FE4B103CC9" class="sect5"><span class="enumeration_section">4.2.3.4 </span>Creating and Populating a Hybrid External Table: Example
                     </h5>
                     <div>
                        <p>This example creates a hybrid external table with the <code class="codeph">INMEMORY</code> option, and then populates the internal partitions.
                        </p>
                        <div class="section">
                           <p>This example assumes the existence of the <code class="codeph">sh.sales</code> table. The goal is to create a hybrid partitioned table <code class="codeph">sales_hpt</code> with two internal partitions, one of which uses the data from <code class="codeph">sh.sales</code>, and then add one external partition. When you apply the <code class="codeph">INMEMORY</code> attribute to <code class="codeph">sales_hpt</code>, this attribute only applies to the internal partitions.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-38898326-7C23-4ECA-A474-F2FE4B103CC9__GUID-0EFD8472-DEFF-4675-8F07-8485100A5954">
                           <ol id="GUID-38898326-7C23-4ECA-A474-F2FE4B103CC9__OL_T1Z_CNV_3GB">
                              <li>
                                 <p>In Linux, create a temporary directory, and then create a text file with one row of sales data.</p><pre class="pre codeblock"><code>mkdir /tmp/sales_data
echo "1002,110,19-02-2015,12,18,150,4800" &gt; /tmp/sales_data/sales2015_data.txt</code></pre></li>
                              <li>
                                 <p>In SQL*Plus, log is with administrator privileges, and then create a directory object for the sales data:</p><pre class="pre codeblock"><code>CONNECT / AS SYSDBA

CREATE DIRECTORY sales_data AS '/tmp/sales_data';
GRANT READ,WRITE ON DIRECTORY sales_data TO sh;
</code></pre></li>
                              <li>
                                 <p>Log in as user <code class="codeph">sh</code>, and then create the <code class="codeph">sales_hpt</code> table:
                                 </p><pre class="pre codeblock"><code>CONNECT sh

DROP TABLE sales_hpt;
CREATE TABLE sales_hpt
  ( prod_id       NUMBER        NOT NULL,
    cust_id       NUMBER        NOT NULL,
    time_id       DATE          NOT NULL,
    channel_id    NUMBER        NOT NULL,
    promo_id      NUMBER        NOT NULL,
    quantity_sold NUMBER(10,2)  NOT NULL,
    amount_sold   NUMBER(10,2)  NOT NULL
  )
    EXTERNAL PARTITION ATTRIBUTES (
      TYPE ORACLE_LOADER 
      DEFAULT DIRECTORY sales_data
       ACCESS PARAMETERS(
         FIELDS TERMINATED BY ','
         (prod_id,cust_id,time_id DATE 'dd-mm-yyyy',channel_id,promo_id,quantity_sold,amount_sold)
       ) 
      REJECT LIMIT UNLIMITED
     ) 
    PARTITION BY RANGE (time_id)
    (
     PARTITION sales_2014 VALUES LESS THAN (TO_DATE('01-01-2015','dd-mm-yyyy')),
     PARTITION sales_2015 VALUES LESS THAN (TO_DATE('01-01-2016','dd-mm-yyyy')),
     PARTITION sales_2016 VALUES LESS THAN (TO_DATE('01-01-2017','dd-mm-yyyy')) EXTERNAL 
          LOCATION ('sales2016_data.txt')
);</code></pre><p>The preceding statement shows that the table has three partitions: <code class="codeph">sales_2014</code>, <code class="codeph">sales_2015</code>, and <code class="codeph">sales_2016</code>. Only <code class="codeph">sales_2016</code> is designed as external.
                                 </p>
                              </li>
                              <li>
                                 <p>Query the data dictionary to confirm that the table is a hybrid:</p><pre class="pre codeblock"><code>SQL&gt; COL TABLE_NAME FORMAT a25
SQL&gt; SELECT TABLE_NAME, HYBRID FROM USER_TABLES WHERE HYBRID = 'YES';

TABLE_NAME                HYB
------------------------- ---
SALES_HPT                 YES</code></pre></li>
                              <li>
                                 <p>Insert rows into the two internal partitions:</p><pre class="pre codeblock"><code>INSERT /*+APPEND*/ INTO sh.sales_hpt (SELECT * FROM sales);
INSERT INTO sh.sales_hpt VALUES (30, 21086, '30-12-2015', 2, 999, 1, 10.19);
COMMIT;</code></pre><p>The first of the preceding statements inserts all rows from the <code class="codeph">sales</code> table. All dates in <code class="codeph">sales</code> are before 2002, so all rows from <code class="codeph">sales</code> are inserted into the <code class="codeph">sales_2014</code> partition. The second statement inserts a single row into the <code class="codeph">sales_2015</code> partition.
                                 </p>
                              </li>
                              <li>
                                 <p>Query the partitions to confirm that the correct data exists:</p><pre class="pre codeblock"><code>SQL&gt; SELECT COUNT(*) FROM sales_hpt PARTITION(sales_2014);

  COUNT(*)
----------
    918843

SQL&gt; SELECT COUNT(*) FROM sales_hpt PARTITION(sales_2015);

  COUNT(*)
----------
         1

SQL&gt; SELECT COUNT(*) FROM sales_hpt PARTITION(sales_2016);

  COUNT(*)
----------
         1</code></pre></li>
                              <li>
                                 <p>Apply the <code class="codeph">INMEMORY</code> attribute at the table level, and then force the database to populate the table into the IM column store:
                                 </p><pre class="pre codeblock"><code>ALTER TABLE sales_hpt INMEMORY;
SELECT /*+ FULL(sales_hpt) NO_PARALLEL(sales_hpt) */ COUNT(*) FROM sales_hpt;</code></pre></li>
                              <li>
                                 <p>Query the population status of the <code class="codeph">sales_hpt</code> partitions:
                                 </p><pre class="pre codeblock"><code>COL OWNER FORMAT a3
COL NAME FORMAT a10
COL PARTITION FORMAT a13
COL STATUS FORMAT a20

SELECT OWNER, SEGMENT_NAME NAME, PARTITION_NAME PARTITION,
       POPULATE_STATUS STATUS, BYTES_NOT_POPULATED
FROM   V$IM_SEGMENTS;

OWN NAME       PARTITION     STATUS               BYTES_NOT_POPULATED
--- ---------- ------------- -------------------- -------------------
SH  SALES_HPT  SALES_2015    COMPLETED                              0
SH  SALES_HPT  SALES_2014    COMPLETED                              0
</code></pre><p>The query shows that only the two internal partitions were populated, which is expected. The <code class="codeph">INMEMORY</code> attribute does not apply to external partitions.
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-F482BE39-36B9-4146-B335-8BEFBA3B3496" title="The following examples illustrate how to enable or disable tables for the IM column store.">Enabling and Disabling Tables for the IM Column Store: Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-D259986C-DD74-4E72-B467-15B5858FB2CC" name="GUID-D259986C-DD74-4E72-B467-15B5858FB2CC"></a><h5 id="INMEM-GUID-D259986C-DD74-4E72-B467-15B5858FB2CC" class="sect5"><span class="enumeration_section">4.2.3.5 </span>Enabling an Existing Table for the IM Column Store: Example
                     </h5>
                     <div>
                        <p>This example enables the existing <code class="codeph">sh.sales</code> table for the IM column store.
                        </p>
                        <div class="example" id="GUID-D259986C-DD74-4E72-B467-15B5858FB2CC__GUID-E76EA99F-9376-4D58-950D-885C7DB465C4">
                           <p>In SQL*Plus, log in to the database as the <code class="codeph">sh</code> user, and then execute the following DDL statement:
                           </p><pre class="pre codeblock"><code>ALTER TABLE sales INMEMORY;
</code></pre><p>The preceding statement uses the defaults for the <code class="codeph">INMEMORY</code> clause: <code class="codeph">MEMCOMPRESS FOR QUERY</code> and <code class="codeph">PRIORITY NONE</code>.
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-F482BE39-36B9-4146-B335-8BEFBA3B3496" title="The following examples illustrate how to enable or disable tables for the IM column store.">Enabling and Disabling Tables for the IM Column Store: Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-99483384-3F93-482C-A4BE-63EFA9F05C1A" name="GUID-99483384-3F93-482C-A4BE-63EFA9F05C1A"></a><h5 id="INMEM-GUID-99483384-3F93-482C-A4BE-63EFA9F05C1A" class="sect5"><span class="enumeration_section">4.2.3.6 </span>Setting In-Memory Compression to FOR CAPACITY LOW: Example
                     </h5>
                     <div>
                        <p>This example enables the existing <code class="codeph">oe.product_information</code> table for the IM column store and specifies the compression method <code class="codeph">FOR CAPACITY LOW</code>.
                        </p>
                        <div class="example" id="GUID-99483384-3F93-482C-A4BE-63EFA9F05C1A__GUID-AF1FC237-18BF-4ECA-9BCA-99CA4E463158">
                           <p>In SQL*Plus, log in to the database as the <code class="codeph">oe</code> user, and then execute the following DDL statement:
                           </p><pre class="pre codeblock"><code>ALTER TABLE product_information 
  INMEMORY 
  MEMCOMPRESS FOR CAPACITY LOW;
</code></pre><p>The preceding statement uses the default for the <code class="codeph">PRIORITY</code> clause of <code class="codeph">NONE</code>. Populate the table by forcing a full table scan as follows (sample output included):
                           </p><pre class="pre codeblock"><code>SELECT /*+ FULL(p) NO_PARALLEL(p) */ COUNT(*) 
FROM   product_information p;

  COUNT(*)
----------
       288
</code></pre><p>In a separate session, log in as a user with administrative privileges, and then calculate the compression ratio by executing the following query (sample output included):</p><pre class="pre codeblock"><code>COL OWNER FORMAT a5
COL SEGMENT_NAME FORMAT a19
SET PAGESIZE 50000

SELECT OWNER, SEGMENT_NAME, BYTES ORIG_SIZE,
       INMEMORY_SIZE IN_MEM_SIZE,
       ROUND (BYTES / INMEMORY_SIZE, 2) COMP_RATIO
FROM   V$IM_SEGMENTS
WHERE  SEGMENT_NAME LIKE 'P%'
ORDER BY 4;

OWNER SEGMENT_NAME         ORIG_SIZE IN_MEM_SIZE COMP_RATIO
----- ------------------- ---------- ----------- ----------
OE    PRODUCT_INFORMATION      98304     1310720        .08</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-F482BE39-36B9-4146-B335-8BEFBA3B3496" title="The following examples illustrate how to enable or disable tables for the IM column store.">Enabling and Disabling Tables for the IM Column Store: Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-C427E06F-AB27-4013-B7CE-223FF15E14AA" name="GUID-C427E06F-AB27-4013-B7CE-223FF15E14AA"></a><h5 id="INMEM-GUID-C427E06F-AB27-4013-B7CE-223FF15E14AA" class="sect5"><span class="enumeration_section">4.2.3.7 </span>Setting In-Memory Priority to HIGH: Example
                     </h5>
                     <div>
                        <p>This example enables the <code class="codeph">oe.product_information</code> table for the IM column store and specifies <code class="codeph">PRIORITY HIGH</code> for populating the table data in the IM column store.
                        </p>
                        <div class="example" id="GUID-C427E06F-AB27-4013-B7CE-223FF15E14AA__GUID-C7F19235-479A-4D5A-A735-FE4560E9F2C3">
                           <p>In SQL*Plus, log in to the database as the <code class="codeph">oe</code> user, and then execute the following DDL statement:
                           </p><pre class="pre codeblock"><code>ALTER TABLE 
  product_information 
  INMEMORY 
  PRIORITY HIGH;
</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-F482BE39-36B9-4146-B335-8BEFBA3B3496" title="The following examples illustrate how to enable or disable tables for the IM column store.">Enabling and Disabling Tables for the IM Column Store: Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-2D5D74B5-F89B-4E67-B177-1509185B473E" name="GUID-2D5D74B5-F89B-4E67-B177-1509185B473E"></a><h5 id="INMEM-GUID-2D5D74B5-F89B-4E67-B177-1509185B473E" class="sect5"><span class="enumeration_section">4.2.3.8 </span>Changing the Compression and Priority Settings for an In-Memory Table: Example
                     </h5>
                     <div>
                        <p>This example alters the <code class="codeph">oe.product_information</code> table to use <code class="codeph">FOR CAPACITY HIGH</code> table compression and a <code class="codeph">LOW</code> priority setting.
                        </p>
                        <div class="example" id="GUID-2D5D74B5-F89B-4E67-B177-1509185B473E__GUID-5A918ABB-5598-4535-9B4E-F9DDBC706BD1">
                           <p>In SQL*Plus, log in to the database as an administrative user, and then execute the following query to show the current priority and compression setting for the <code class="codeph">oe.product_information</code> table:
                           </p><pre class="pre codeblock"><code>COL OWNER FORMAT a5
COL SEGMENT_NAME FORMAT a19
SET PAGESIZE 50000

SELECT v.OWNER, v.SEGMENT_NAME, v.INMEMORY_PRIORITY,
       v.INMEMORY_COMPRESSION
FROM   V$IM_SEGMENTS v
WHERE  SEGMENT_NAME LIKE 'P%';

OWNER SEGMENT_NAME        INMEMORY INMEMORY_COMPRESS
----- ------------------- -------- -----------------
OE    PRODUCT_INFORMATION HIGH     FOR CAPACITY LOW
</code></pre><p>The following DDL statement alters <code class="codeph">oe.product_information</code> to use <code class="codeph">FOR CAPACITY HIGH</code> table compression and <code class="codeph">PRIORITY LOW</code>:
                           </p><pre class="pre codeblock"><code>ALTER TABLE oe.product_information 
  INMEMORY 
  MEMCOMPRESS FOR CAPACITY HIGH 
  PRIORITY LOW;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-F482BE39-36B9-4146-B335-8BEFBA3B3496" title="The following examples illustrate how to enable or disable tables for the IM column store.">Enabling and Disabling Tables for the IM Column Store: Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-DF52530E-137B-4FAC-AC1E-017D10B9519C" name="GUID-DF52530E-137B-4FAC-AC1E-017D10B9519C"></a><h5 id="INMEM-GUID-DF52530E-137B-4FAC-AC1E-017D10B9519C" class="sect5"><span class="enumeration_section">4.2.3.9 </span>Disabling a Table for the IM Column Store: Example
                     </h5>
                     <div>
                        <p>To disable a table for the IM column store, specify the <code class="codeph">NO INMEMORY</code> clause.
                        </p>
                        <div class="example" id="GUID-DF52530E-137B-4FAC-AC1E-017D10B9519C__GUID-DF205A1C-2A1B-4E56-A803-E370DA1460FD">
                           <p>Log in to the database as the user <code class="codeph">oe</code>, and then execute the following statement to disable the <code class="codeph">product_information</code> table for the IM column store:
                           </p><pre class="pre codeblock"><code>ALTER TABLE oe.product_information NO INMEMORY;</code></pre><p>The <code class="codeph">V$IM_SEGMENTS</code> view lists the database objects that are populated in the IM column store.
                           </p>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-F482BE39-36B9-4146-B335-8BEFBA3B3496" title="The following examples illustrate how to enable or disable tables for the IM column store.">Enabling and Disabling Tables for the IM Column Store: Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-E71618B8-AB50-48AB-8529-02F6A8F17FD4" name="GUID-E71618B8-AB50-48AB-8529-02F6A8F17FD4"></a><h5 id="INMEM-GUID-E71618B8-AB50-48AB-8529-02F6A8F17FD4" class="sect5"><span class="enumeration_section">4.2.3.10 </span>Disabling Columnar Format on Exadata Smart Flash Cache: Example
                     </h5>
                     <div>
                        <p>This example disables the columnar format for <code class="codeph">oe.product_information</code> on Exadata Smart Flash Cache storage.
                        </p>
                        <div class="example" id="GUID-E71618B8-AB50-48AB-8529-02F6A8F17FD4__GUID-31D5AC5E-FA0A-4615-B03D-9670B3FB88A5">
                           <p>By default, Exadata Smart Flash Cache compresses data using the level <code class="codeph">MEMCOMPRESS FOR CAPACITY LOW</code>. To change the compression level or disable the columnar format altogether, use the <code class="codeph">ALTER TABLE ... NO CELLMEMORY</code> statement.
                           </p>
                           <p>Log in to the database as user <code class="codeph">oe</code>, and execute the following DDL statement:
                           </p><pre class="pre codeblock"><code>ALTER TABLE product_information NO CELLMEMORY;</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-F482BE39-36B9-4146-B335-8BEFBA3B3496" title="The following examples illustrate how to enable or disable tables for the IM column store.">Enabling and Disabling Tables for the IM Column Store: Examples</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-452D19AE-EB5F-44AC-A1AD-70CF10D2D347" name="GUID-452D19AE-EB5F-44AC-A1AD-70CF10D2D347"></a><h3 id="INMEM-GUID-452D19AE-EB5F-44AC-A1AD-70CF10D2D347" class="sect3"><span class="enumeration_section">4.3 </span>Enabling and Disabling Columns for In-Memory Tables
               </h3>
               <div>
                  <p>You can specify the <code class="codeph">INMEMORY</code> clause for individual columns in an internal table. External tables do not support specifying <code class="codeph">INMEMORY</code> at the column level.
                  </p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-C0BC34D3-2BD8-41A5-B2F0-9AB109C1B617">About Enabling INMEMORY Columns</a><br>For internal tables, both In-Memory virtual columns (IM virtual columns) and nonvirtual columns are eligible for IM population. For external tables, only nonvirtual columns are eligible.
                     </li>
                     <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-E75BEB47-6242-418B-9DE8-8AAC8910A2FA">Enabling IM Virtual Columns</a><br>IM virtual columns improve query&nbsp;performance by avoiding repeated calculations. Also, the database can scan and filter IM virtual columns using techniques such as SIMD vector processing.
                     </li>
                     <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-128BA141-FB78-4828-B3EE-6FDAB6E23E2E">Enabling a Subset of Columns for the IM Column Store: Example</a><br>This example enables all columns in the <code class="codeph">oe.product_information</code> table for the IM column store except <code class="codeph">weight_class</code> and <code class="codeph">catalog_url</code>. 
                     </li>
                     <li class="ulchildlink"><a href="populating-objects-in-memory.html#GUID-9E123407-13BA-4566-933D-6E4473C8FE5C">Specifying INMEMORY Column Attributes on a NO INMEMORY Table: Example</a><br>Starting in <span>Oracle Database 12c</span> Release 2 (12.2), you can specify the <code class="codeph">INMEMORY</code> clause at the column level on an object that is not yet specified as <code class="codeph">INMEMORY</code>.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-C5F856BF-70E3-41C6-A1BA-1E94D7D230B8" title="This chapter explains how to enable and disable objects for population in the IM column store, including setting compression and priority options.">Enabling Objects for In-Memory Population</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-C0BC34D3-2BD8-41A5-B2F0-9AB109C1B617" name="GUID-C0BC34D3-2BD8-41A5-B2F0-9AB109C1B617"></a><h4 id="INMEM-GUID-C0BC34D3-2BD8-41A5-B2F0-9AB109C1B617" class="sect4"><span class="enumeration_section">4.3.1 </span>About Enabling INMEMORY Columns
                  </h4>
                  <div>
                     <p>For internal tables, both In-Memory virtual columns (IM virtual columns) and nonvirtual columns are eligible for IM population. For external tables, only nonvirtual columns are eligible.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-C0BC34D3-2BD8-41A5-B2F0-9AB109C1B617__GUID-20B9C781-32BF-4F37-9B12-ACC1F9278589">NO INMEMORY Columns in INMEMORY Objects</p>
                        <p>By default, if an internal object has the <code class="codeph">INMEMORY</code> attribute, then all columns in this object are eligible for population into the IM column store. However, you can specify that some columns in an <code class="codeph">INMEMORY</code> table should have the <code class="codeph">NO INMEMORY</code> attribute, in which case only the <code class="codeph">INMEMORY</code> columns are eligible for population.
                        </p>
                        <p>To apply the <code class="codeph">INMEMORY</code> attribute to a subset of columns, specify <code class="codeph">ALTER TABLE <span class="codeinlineitalic">table_name</span> INMEMORY ... NO INMEMORY <span class="codeinlineitalic">excluded_columns</span></code>, where <span class="italic">excluded_columns</span> lists the columns to be specified as <code class="codeph">NO INMEMORY</code>. Only the columns that are not specified as <code class="codeph">NO INMEMORY</code>, that is, the columns that are not in the excluded columns list, inherit the segment-level <code class="codeph">INMEMORY</code> attribute.
                        </p>
                        <p>Specifying <code class="codeph">NO INMEMORY</code> columns in an <code class="codeph">INMEMORY</code> table has an important consequence. A query that references a <code class="codeph">NO INMEMORY</code> column uses the row store <span class="italic">exclusively</span>. For example, if <code class="codeph">sales</code> is an <code class="codeph">INMEMORY</code> table with 7 columns, and if only the <code class="codeph">promo_id</code> column has the <code class="codeph">NO INMEMORY</code> attribute, then any query whose <code class="codeph">SELECT</code> list includes <code class="codeph">promo_id</code> retrieves data from the row store rather than the IM column store. Likewise, any query whose predicate references <code class="codeph">promo_id</code>, regardless of whether <code class="codeph">promo_id</code> is in the <code class="codeph">SELECT</code> list, retrieves data exclusively from the row store.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C0BC34D3-2BD8-41A5-B2F0-9AB109C1B617__GUID-2632F2F0-35C5-45CF-A17C-3AA5D339E562">Virtual Columns</p>
                        <p>An IM virtual column is like any other column, except that its value is derived by evaluating an expression. Storing the precalculated IM virtual column values in the IM column store can improve query&nbsp;performance. The expression can include columns from the same table, constants, SQL functions, and user-defined PL/SQL functions (<code class="codeph">DETERMINISTIC</code> only). You cannot explicitly write to an IM virtual column.
                        </p>
                        <div class="infoboxnote" id="GUID-C0BC34D3-2BD8-41A5-B2F0-9AB109C1B617__GUID-611BBB2C-0DF7-4EEE-AD90-881B97977C6F">
                           <p class="notep1">Note:</p>
                           <p>A virtual column or <a href="glossary.html#GUID-7EFD3370-3D0F-40FA-96CD-FB00D333F8B8"><span class="xrefglossterm">IM expression</span></a> counts toward the limit of 1000 columns per populated object.
                           </p>
                        </div>
                        <p>To populate IM virtual columns in the IM column store, set the <code class="codeph">INMEMORY_VIRTUAL_COLUMNS</code> initialization parameter to one of the following values:
                        </p>
                        <ul style="list-style-type: disc;" id="GUID-C0BC34D3-2BD8-41A5-B2F0-9AB109C1B617__UL_JQY_K3P_LHB">
                           <li>
                              <p><code class="codeph">MANUAL</code> (default): If a table is enabled for the IM column store, then no IM virtual columns defined on this table are eligible for population, unless they are explicitly set as <code class="codeph">INMEMORY</code>.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ENABLE</code>: If a table is enabled for the IM column store, then all IM virtual columns defined on this table are eligible for population, unless they are explicitly set as <code class="codeph">NO INMEMORY</code>. 
                              </p>
                              <p>By default, the compression level of the column in the IM column store is the same as the table or partition in which it is stored. However, when a different compression level is specified for the IM virtual column, it is populated at the specified compression level.</p>
                           </li>
                        </ul>
                        <p>To specify that no IM virtual columns are populated in the IM column store, set this initialization parameter to <code class="codeph">DISABLE</code>.
                        </p>
                        <p>The underlying storage structures for IM virtual columns and IM expressions are the same. However, different mechanisms control IM expressions and IM virtual columns.</p>
                        <div class="infoboxnote" id="GUID-C0BC34D3-2BD8-41A5-B2F0-9AB109C1B617__GUID-380019E5-D4B1-4111-971E-871DC632D2B3">
                           <p class="notep1">Note:</p>
                           <ul style="list-style-type: disc;" id="GUID-C0BC34D3-2BD8-41A5-B2F0-9AB109C1B617__UL_KQY_K3P_LHB">
                              <li>
                                 <p>The IM column store only populates virtual columns for tables marked <code class="codeph">INMEMORY</code>. 
                                 </p>
                              </li>
                              <li>
                                 <p>To populate IM virtual columns in the IM column store, the value for the initialization parameter <code class="codeph">COMPATIBLE</code> must be set to 12.1.0 or higher. 
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-C0BC34D3-2BD8-41A5-B2F0-9AB109C1B617__GUID-EE5FC973-7C8C-4D99-BDF4-6A505424C89F">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;" id="GUID-C0BC34D3-2BD8-41A5-B2F0-9AB109C1B617__UL_QNQ_M3P_LHB">
                           <li>
                              <p><span class="q">"<a href="populating-objects-in-memory.html#GUID-C5D0A470-C06A-4EE2-AA1A-B221FFEB663B" title="Enable a table for the IM column store by including an INMEMORY clause in a CREATE TABLE or ALTER TABLE statement. Disable a table for the IM column store by including a NO INMEMORY clause in a CREATE TABLE or ALTER TABLE statement.">Enabling and Disabling Tables for the IM Column Store</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="optimizing-in-memory-expressions.html#GUID-FDA8B0D3-6339-4E19-8D2D-EEA0A7529B46" title="The IM expressions infrastructure is responsible for computing and populating the results of IM expressions, IM virtual columns, and any other useful internal computations in the IM column store. These optimizations primarily benefit analytic queries.">IM Expressions Infrastructure</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="init-parameters-for-im-column-store.html#GUID-A67ABCAC-C6B9-499E-8AE0-BD7922B239BE" title="Several initialization parameters control the behavior of the IM column store.">In-Memory Initialization Parameters</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/inmem&amp;id=SQLRF004" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for the syntax and semantics of the <code class="codeph">INMEMORY</code> clause
                              </p>
                           </li>
                           <li>
                              <p><a href="https://blogs.oracle.com/in-memory/what-happens-if-a-column-is-not-populated" target="_blank">https://blogs.oracle.com/in-memory/what-happens-if-a-column-is-not-populated</a> for a blog entry on accessing columns that are not populated
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-452D19AE-EB5F-44AC-A1AD-70CF10D2D347" title="You can specify the INMEMORY clause for individual columns in an internal table. External tables do not support specifying INMEMORY at the column level.">Enabling and Disabling Columns for In-Memory Tables</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-E75BEB47-6242-418B-9DE8-8AAC8910A2FA" name="GUID-E75BEB47-6242-418B-9DE8-8AAC8910A2FA"></a><h4 id="INMEM-GUID-E75BEB47-6242-418B-9DE8-8AAC8910A2FA" class="sect4"><span class="enumeration_section">4.3.2 </span>Enabling IM Virtual Columns
                  </h4>
                  <div>
                     <p>IM virtual columns improve query&nbsp;performance by avoiding repeated calculations. Also, the database can scan and filter IM virtual columns using techniques such as SIMD vector processing.</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-E75BEB47-6242-418B-9DE8-8AAC8910A2FA__GUID-FD24C40C-D16B-4CE1-94BA-BBB7DDF52819">Prerequisites</p>
                        <p>To enable IM virtual columns, the following conditions must be true:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The IM column store is enabled for the database.</p>
                              <p>See <span class="q">"<a href="enabling-the-im-column-store.html#GUID-6A220D69-66BA-4C50-8FAB-D5004C96B215" title="Before tables or materialized views can be populated into the IM column store, you must enable the IM column store for the database.">Enabling the IM Column Store for a Database</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>The table that contains the virtual columns is enabled for the IM column store.</p>
                              <p>See <span class="q">"<a href="populating-objects-in-memory.html#GUID-C5D0A470-C06A-4EE2-AA1A-B221FFEB663B" title="Enable a table for the IM column store by including an INMEMORY clause in a CREATE TABLE or ALTER TABLE statement. Disable a table for the IM column store by including a NO INMEMORY clause in a CREATE TABLE or ALTER TABLE statement.">Enabling and Disabling Tables for the IM Column Store</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">INMEMORY_VIRTUAL_COLUMNS</code> initialization parameter is <span class="italic">not</span> set to <code class="codeph">DISABLE</code>.
                              </p>
                           </li>
                           <li>
                              <p>The value for the initialization parameter <code class="codeph">COMPATIBLE</code> is set to <code class="codeph">12.1.0</code> or higher. 
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E75BEB47-6242-418B-9DE8-8AAC8910A2FA__GUID-8BF2C47F-A612-40A0-9EFD-69F9A4DD00F8">To enable IM virtual columns:</p>
                        <ol>
                           <li>
                              <p>In SQL*Plus or SQL Developer, log in to the database as a user with the necessary privileges.</p>
                           </li>
                           <li>
                              <p>Either set the <code class="codeph">INMEMORY_VIRTUAL_COLUMNS</code> initialization parameter to <code class="codeph">ENABLE</code>, or enable specific virtual columns for the IM column store.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-E75BEB47-6242-418B-9DE8-8AAC8910A2FA__GUID-87D49413-0F20-4DA7-93BF-8B2F2437911B">
                        <p class="titleinexample">Example 4-3 Enabling Virtual Columns for the IM Column Store</p>              
                        <p>In this example, you are logged in to the database as <code class="codeph">SYSTEM</code>. The IM column store is enabled, but population of virtual columns is currently disabled:
                        </p><pre class="pre codeblock"><code>SQL&gt; SHOW PARAMETER INMEMORY_SIZE

NAME                                 TYPE        VALUE
------------------------------------ ----------- -----
inmemory_size                        big integer 200M

SQL&gt; SHOW PARAMETER INMEMORY_VIRTUAL_COLUMNS

NAME                                 TYPE        VALUE
------------------------------------ ----------- -------
inmemory_virtual_columns             string      DISABLE
</code></pre><p>You add a virtual column to the <code class="codeph">hr.employees</code> table, and then specify that the table is <code class="codeph">INMEMORY</code>:
                        </p><pre class="pre codeblock"><code>SQL&gt; ALTER TABLE hr.employees ADD (weekly_sal AS (ROUND(salary*12/52,2)));

Table altered.

SQL&gt; ALTER TABLE hr.employees INMEMORY;

Table altered.
</code></pre><p>At this stage, <code class="codeph">weekly_sal</code> is not eligible for population, although the non-virtual columns in <code class="codeph">hr.employees</code> are eligible for population. The following statement enables <code class="codeph">weekly_sal</code>, and any other virtual columns in <code class="codeph">hr.employees</code>, to be populated:
                        </p><pre class="pre codeblock"><code>SQL&gt; ALTER SYSTEM SET INMEMORY_VIRTUAL_COLUMNS=ENABLE SCOPE=SPFILE;

System altered.
</code></pre>     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-E75BEB47-6242-418B-9DE8-8AAC8910A2FA__GUID-607CB2DD-913D-406A-9BDF-2A0828A47FB4">
                        <p class="titleinexample">Example 4-4 Enabling a Specific IM Virtual Column for the IM Column Store</p>       
                        <p>This example assumes that the <code class="codeph">INMEMORY_VIRTUAL_COLUMNS</code> initialization parameter is set to <code class="codeph">MANUAL</code>, which means that IM virtual columns must be added to the IM column store explicitly. This example first creates the <code class="codeph">hr.admin_emp</code> table:
                        </p><pre class="pre codeblock"><code>CREATE TABLE hr.admin_emp (
      empno      NUMBER(5) PRIMARY KEY,
      ename      VARCHAR2(15) NOT NULL,
      job        VARCHAR2(10),
      sal        NUMBER(7,2),
      hrly_rate  NUMBER(7,2) GENERATED ALWAYS AS (sal/2080),
      deptno     NUMBER(3) NOT NULL)
   INMEMORY;
</code></pre><p>At this stage, the <code class="codeph">hrly_rate</code> virtual column is not eligible for population. The following statement explicitly specifies the virtual column as <code class="codeph">INMEMORY</code>:
                        </p><pre class="pre codeblock"><code>ALTER TABLE hr.admin_emp INMEMORY(hrly_rate);</code></pre>     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-452D19AE-EB5F-44AC-A1AD-70CF10D2D347" title="You can specify the INMEMORY clause for individual columns in an internal table. External tables do not support specifying INMEMORY at the column level.">Enabling and Disabling Columns for In-Memory Tables</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-128BA141-FB78-4828-B3EE-6FDAB6E23E2E" name="GUID-128BA141-FB78-4828-B3EE-6FDAB6E23E2E"></a><h4 id="INMEM-GUID-128BA141-FB78-4828-B3EE-6FDAB6E23E2E" class="sect4"><span class="enumeration_section">4.3.3 </span>Enabling a Subset of Columns for the IM Column Store: Example
                  </h4>
                  <div>
                     <p>This example enables all columns in the <code class="codeph">oe.product_information</code> table for the IM column store except <code class="codeph">weight_class</code> and <code class="codeph">catalog_url</code>. 
                     </p>
                     <div class="section">
                        <p>The following statement also specifies different IM column store compression methods for the columns enabled for the IM column store:</p><pre class="pre codeblock"><code>ALTER TABLE oe.product_information  
   INMEMORY MEMCOMPRESS FOR QUERY (
      product_id, product_name, category_id, supplier_id, min_price)
   INMEMORY MEMCOMPRESS FOR CAPACITY HIGH (
      product_description, warranty_period, product_status, list_price)
   NO INMEMORY (
      weight_class, catalog_url);</code></pre><p>Note the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The columns <code class="codeph">product_id</code>, <code class="codeph">product_name</code>, <code class="codeph">category_id</code>, <code class="codeph">supplier_id</code>, and <code class="codeph">min_price</code> are enabled for the IM column store with the <code class="codeph">MEMCOMPRESS FOR QUERY</code> compression method.
                              </p>
                           </li>
                           <li>
                              <p>The columns <code class="codeph">product_description</code>, <code class="codeph">warranty_period</code>, <code class="codeph">product_status</code>, and <code class="codeph">list_price</code> are enabled for the IM column store with the <code class="codeph">MEMCOMPRESS FOR CAPACITY HIGH</code> compression method.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">weight_class</code> and <code class="codeph">catalog_url</code> columns are not enabled for the IM column store. Consequently, any query that references these two columns, either in the <code class="codeph">SELECT</code> list or in the predicate, must use the row store rather than the IM column store.
                              </p>
                           </li>
                           <li>
                              <p>The table uses the default for the <code class="codeph">PRIORITY</code> clause, which is <code class="codeph">PRIORITY NONE</code>.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-128BA141-FB78-4828-B3EE-6FDAB6E23E2E__GUID-60E9950B-A5A7-4A8D-8486-2DC42DD609E7">
                           <p class="notep1">Note:</p>
                           <p>The priority level setting must apply to an entire table or partition. Specifying different IM column store priority levels for different subsets of columns in a table is not allowed.</p>
                        </div>
                        <p>To determine the selective column compression levels defined for a database object, query the <code class="codeph">V$IM_COLUMN_LEVEL</code> view, as shown in the following example:
                        </p><pre class="pre codeblock"><code>COL TABLE_NAME FORMAT a20
COL COLUMN_NAME FORMAT a20

SELECT TABLE_NAME, COLUMN_NAME, INMEMORY_COMPRESSION 
FROM   V$IM_COLUMN_LEVEL 
WHERE  TABLE_NAME = 'PRODUCT_INFORMATION'
ORDER BY COLUMN_NAME;

TABLE_NAME           COLUMN_NAME          INMEMORY_COMPRESSION
-------------------- -------------------- --------------------------
PRODUCT_INFORMATION  CATALOG_URL          NO INMEMORY
PRODUCT_INFORMATION  CATEGORY_ID          FOR QUERY LOW
PRODUCT_INFORMATION  LIST_PRICE           FOR CAPACITY HIGH
PRODUCT_INFORMATION  MIN_PRICE            FOR QUERY LOW
PRODUCT_INFORMATION  PRODUCT_DESCRIPTION  FOR CAPACITY HIGH
PRODUCT_INFORMATION  PRODUCT_ID           FOR QUERY LOW
PRODUCT_INFORMATION  PRODUCT_NAME         FOR QUERY LOW
PRODUCT_INFORMATION  PRODUCT_STATUS       FOR CAPACITY HIGH
PRODUCT_INFORMATION  SUPPLIER_ID          FOR QUERY LOW
PRODUCT_INFORMATION  WARRANTY_PERIOD      FOR CAPACITY HIGH
PRODUCT_INFORMATION  WEIGHT_CLASS         NO INMEMORY
</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-128BA141-FB78-4828-B3EE-6FDAB6E23E2E__GUID-3EDE10AA-6654-4BF0-8692-4CB3BBE9BF32">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="in-memory-column-store-architecture.html#GUID-E652C13F-FD52-49D2-B968-3B1A03F7F1ED" title="The IM column store uses special compression formats optimized for access speed rather than storage reduction. The columnar format enables queries to execute directly against the compressed columns.">In-Memory Compression</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../refrn/V-IM_COLUMN_LEVEL.html#REFRN30742" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for more information about the <code class="codeph">V$IM_COLUMN_LEVEL</code> view
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-452D19AE-EB5F-44AC-A1AD-70CF10D2D347" title="You can specify the INMEMORY clause for individual columns in an internal table. External tables do not support specifying INMEMORY at the column level.">Enabling and Disabling Columns for In-Memory Tables</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-9E123407-13BA-4566-933D-6E4473C8FE5C" name="GUID-9E123407-13BA-4566-933D-6E4473C8FE5C"></a><h4 id="INMEM-GUID-9E123407-13BA-4566-933D-6E4473C8FE5C" class="sect4"><span class="enumeration_section">4.3.4 </span>Specifying INMEMORY Column Attributes on a NO INMEMORY Table: Example
                  </h4>
                  <div>
                     <p>Starting in <span>Oracle Database 12c</span> Release 2 (12.2), you can specify the <code class="codeph">INMEMORY</code> clause at the column level on an object that is not yet specified as <code class="codeph">INMEMORY</code>.
                     </p>
                     <div class="section">
                        <p>In previous releases, the column-level <code class="codeph">INMEMORY</code> clause was only valid when specified on an <code class="codeph">INMEMORY</code> table or partition. This restriction meant that a column could not be associated with an <code class="codeph">INMEMORY</code> clause before the table or partition was associated with an <code class="codeph">INMEMORY</code> clause. 
                        </p>
                        <p>Starting in <span>Oracle Database 12c</span> Release 2 (12.2), if you specify the <code class="codeph">INMEMORY</code> clause at the column level, then the database records the attributes of the specified column. If the table is <code class="codeph">NO INMEMORY</code> (default), then the column-level attributes do not affect how the table is queried until the table or partition is specified as <code class="codeph">INMEMORY</code>. If you mark the table itself as <code class="codeph">NO INMEMORY</code>, then the database drops any existing column-level attributes.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-9E123407-13BA-4566-933D-6E4473C8FE5C__GUID-EF882761-02EE-4310-A1DD-A69238138211">
                        <p>In this example, your goal is to ensure that column <code class="codeph">c3</code> in a partitioned table is never populated in the IM column store. You perform the following steps:
                        </p>
                        <ol>
                           <li>
                              <p>Create a partitioned table <code class="codeph">t</code> as follows:
                              </p><pre class="pre codeblock"><code>CREATE TABLE t (c1 NUMBER, c2 NUMBER, c3 NUMBER) 
  NO INMEMORY -- this clause specifies the table itself as NO INMEMORY
  PARTITION BY LIST (c1) 
    ( PARTITION p1 VALUES (0), 
      PARTITION p2 VALUES (1), 
      PARTITION p3 VALUES (2) );</code></pre><p>Table <code class="codeph">t</code> is <code class="codeph">NO INMEMORY</code>. The table is partitioned by list on column <code class="codeph">c1</code>, and has three partitions: <code class="codeph">p1</code>, <code class="codeph">p2</code>, and <code class="codeph">p3</code>.
                              </p>
                           </li>
                           <li>
                              <p>Query the compression of the columns in the table (sample output included):</p><pre class="pre codeblock"><code>COL TABLE_NAME FORMAT a20
COL COLUMN_NAME FORMAT a20

SELECT TABLE_NAME, COLUMN_NAME, INMEMORY_COMPRESSION
FROM   V$IM_COLUMN_LEVEL
WHERE  TABLE_NAME = 'T'
ORDER BY COLUMN_NAME;

no rows selected</code></pre><p>As shown by the output, no column-level <code class="codeph">INMEMORY</code> attributes are set.
                              </p>
                           </li>
                           <li>
                              <p>To ensure that column <code class="codeph">c3</code> is never populated, apply the <code class="codeph">NO INMEMORY</code> attribute to column <code class="codeph">c3</code>:
                              </p><pre class="pre codeblock"><code>ALTER TABLE t NO INMEMORY (c3);</code></pre></li>
                           <li>
                              <p>Query the compression of the columns in the table (sample output included):</p><pre class="pre codeblock"><code>SELECT TABLE_NAME, COLUMN_NAME, INMEMORY_COMPRESSION
FROM   V$IM_COLUMN_LEVEL
WHERE  TABLE_NAME = 'T'
ORDER BY COLUMN_NAME;

TABLE_NAME           COLUMN_NAME          INMEMORY_COMPRESSION
-------------------- -------------------- --------------------
T                    C1                   DEFAULT
T                    C2                   DEFAULT
T                    C3                   NO INMEMORY</code></pre><p>The database has recorded the <code class="codeph">NO INMEMORY</code> attribute for <code class="codeph">c3</code>. The other columns use the default compression.
                              </p>
                           </li>
                           <li>
                              <p>Specify partition <code class="codeph">p3</code> as <code class="codeph">INMEMORY</code>:
                              </p><pre class="pre codeblock"><code>ALTER TABLE t 
  MODIFY PARTITION p3 
    INMEMORY PRIORITY CRITICAL;</code></pre><p>Because column <code class="codeph">c3</code> was previously specified as <code class="codeph">NO INMEMORY</code>, initial population of partition <code class="codeph">p3</code> will not include column <code class="codeph">c3</code>.
                              </p>
                           </li>
                           <li>
                              <p>Specify the entire table as <code class="codeph">INMEMORY</code>:
                              </p><pre class="pre codeblock"><code>ALTER TABLE t INMEMORY;</code></pre></li>
                           <li>
                              <p>Query the compression of the columns in the table (sample output included):</p><pre class="pre codeblock"><code>SELECT TABLE_NAME, COLUMN_NAME, INMEMORY_COMPRESSION
FROM   V$IM_COLUMN_LEVEL
WHERE  TABLE_NAME = 'T'
ORDER BY COLUMN_NAME;

TABLE_NAME           COLUMN_NAME          INMEMORY_COMPRESSION
-------------------- -------------------- --------------------------
T                    C1                   DEFAULT
T                    C2                   DEFAULT
T                    C3                   NO INMEMORY</code></pre><p>The database has retained the <code class="codeph">NO INMEMORY</code> setting for column <code class="codeph">c3</code>. The other columns use the default compression.
                              </p>
                           </li>
                           <li>Apply different compression levels to columns <code class="codeph">c1</code> and <code class="codeph">c2</code>:<pre class="pre codeblock"><code>ALTER TABLE t 
  INMEMORY MEMCOMPRESS FOR CAPACITY HIGH (c1) 
  INMEMORY MEMCOMPRESS FOR CAPACITY LOW (c2);</code></pre></li>
                           <li>
                              <p>Query the compression of the columns in the table (sample output included):</p><pre class="pre codeblock"><code>SELECT TABLE_NAME, COLUMN_NAME, INMEMORY_COMPRESSION
FROM   V$IM_COLUMN_LEVEL
WHERE  TABLE_NAME = 'T'
ORDER BY COLUMN_NAME;

TABLE_NAME           COLUMN_NAME          INMEMORY_COMPRESSION
-------------------- -------------------- --------------------------
T                    C1                   FOR CAPACITY HIGH
T                    C2                   FOR CAPACITY LOW
T                    C3                   NO INMEMORY</code></pre><p>Each column now has a different compression level.</p>
                           </li>
                           <li>
                              <p>Specify the entire table as <code class="codeph">NO INMEMORY</code>:
                              </p><pre class="pre codeblock"><code>ALTER TABLE t NO INMEMORY;</code></pre></li>
                           <li>
                              <p>Query the compression of the columns in the table (sample output included):</p><pre class="pre codeblock"><code>SELECT TABLE_NAME, COLUMN_NAME, INMEMORY_COMPRESSION
FROM   V$IM_COLUMN_LEVEL
WHERE  TABLE_NAME = 'T'
ORDER BY COLUMN_NAME;

no rows selected</code></pre><p>Because the entire table was specified as <code class="codeph">NO INMEMORY</code>, the database dropped all column-level <code class="codeph">INMEMORY</code> attributes.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-9E123407-13BA-4566-933D-6E4473C8FE5C__GUID-05B6B1EB-0640-434C-8FB8-8D12B62F5CE1">
                        <p class="notep1">See Also:</p>
                        <p><a href="../sqlrf/ALTER-TABLE.html#GUID-552E7373-BF93-477D-9DA3-B2C9386F2877" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for <code class="codeph">ALTER TABLE</code> syntax and semantics
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-452D19AE-EB5F-44AC-A1AD-70CF10D2D347" title="You can specify the INMEMORY clause for individual columns in an internal table. External tables do not support specifying INMEMORY at the column level.">Enabling and Disabling Columns for In-Memory Tables</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-636A1675-838D-4004-9CDB-70783DC72C6B" name="GUID-636A1675-838D-4004-9CDB-70783DC72C6B"></a><h3 id="INMEM-GUID-636A1675-838D-4004-9CDB-70783DC72C6B" class="sect3"><span class="enumeration_section">4.4 </span>Enabling and Disabling Tablespaces for the IM Column Store
               </h3>
               <div>
                  <p>You can enable or disable tablespaces for the IM column store.</p>
                  <div class="section">
                     <p>Enable a tablespace for the IM column store during tablespace creation with a <code class="codeph">CREATE TABLESPACE</code> statement that includes the <code class="codeph">INMEMORY</code> clause. You can also alter a tablespace to enable it for the IM column store with an <code class="codeph">ALTER TABLESPACE</code> statement that includes the <code class="codeph">INMEMORY</code> clause.
                     </p>
                     <p>Disable a tablespace for the IM column store by including a <code class="codeph">NO INMEMORY</code> clause in a <code class="codeph">CREATE TABLESPACE</code> or <code class="codeph">ALTER TABLESPACE</code> statement.
                     </p>
                     <p>When a tablespace is enabled for the IM column store, all tables and materialized views in the tablespace are enabled for the IM column store by default. The <code class="codeph">INMEMORY</code> clause is the same for tables, materialized views, and tablespaces. The <code class="codeph">DEFAULT</code> storage clause is required before the <code class="codeph">INMEMORY</code> clause when enabling a tablespace for the IM column store and before the <code class="codeph">NO INMEMORY</code> clause when disabling a tablespace for the IM column store.
                     </p>
                     <p>When a tablespace is enabled for the IM column store, individual tables and materialized views in the tablespace can have different in-memory settings, and the settings for individual database objects override the settings for the tablespace. For example, if the tablespace is set to <code class="codeph">PRIORITY LOW</code> for populating data in memory, and if a table in the tablespace is set to <code class="codeph">PRIORITY HIGH</code>, then the table uses <code class="codeph">PRIORITY HIGH</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-636A1675-838D-4004-9CDB-70783DC72C6B__GUID-9663EDEB-6A16-40D9-81DB-533DDE99F2ED">Prerequisites</p>
                     <p>Ensure that the IM column store is enabled for the database. See <span class="q">"<a href="enabling-the-im-column-store.html#GUID-6A220D69-66BA-4C50-8FAB-D5004C96B215" title="Before tables or materialized views can be populated into the IM column store, you must enable the IM column store for the database.">Enabling the IM Column Store for a Database</a>"</span>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-636A1675-838D-4004-9CDB-70783DC72C6B__GUID-9AF7F591-DD05-4E2F-8133-E5782542634D">To enable or disable tablespaces for the IM column store:</p>
                     <ol>
                        <li>
                           <p>In SQL*Plus or SQL Developer, log in to the database as a user with the necessary privileges.</p>
                        </li>
                        <li>
                           <p>Run a <code class="codeph">CREATE TABLESPACE</code> or <code class="codeph">ALTER TABLESPACE</code> statement with an <code class="codeph">INMEMORY</code> clause or a <code class="codeph">NO INMEMORY</code> clause.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-636A1675-838D-4004-9CDB-70783DC72C6B__GUID-522FC202-F175-4125-B577-C78FED9ECB00">
                     <p class="titleinexample">Example 4-5 Creating a Tablespace and Enabling It for the IM Column Store</p>
                     <p>The following example creates the <code class="codeph">users01</code> tablespace and enables it for the IM column store:
                     </p><pre class="pre codeblock"><code>CREATE TABLESPACE users01 
   DATAFILE 'users01.dbf' SIZE 40M 
   ONLINE
   DEFAULT INMEMORY;
</code></pre><p>This example uses the defaults for the <code class="codeph">INMEMORY</code> clause. Therefore, <code class="codeph">MEMCOMPRESS FOR QUERY</code> is used, and <code class="codeph">PRIORITY NONE</code> is used.
                     </p>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-636A1675-838D-4004-9CDB-70783DC72C6B__GUID-B0EC62EE-9CC3-4B76-A309-6B9F7241CD29">
                     <p class="titleinexample">Example 4-6 Altering a Tablespace to Enable It for the IM Column Store</p>
                     <p>The following example alters the <code class="codeph">users01</code> tablespace to enable it for the IM column store and specifies <code class="codeph">FOR CAPACITY HIGH</code> compression for the database objects in the tablespace and <code class="codeph">PRIORITY LOW</code> for populating data in memory:
                     </p><pre class="pre codeblock"><code>ALTER TABLESPACE users01 DEFAULT INMEMORY 
   MEMCOMPRESS FOR CAPACITY HIGH 
   PRIORITY LOW;
</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-C5F856BF-70E3-41C6-A1BA-1E94D7D230B8" title="This chapter explains how to enable and disable objects for population in the IM column store, including setting compression and priority options.">Enabling Objects for In-Memory Population</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-8C3B4A9B-DC69-4207-A935-8DB4B3AC94FA" name="GUID-8C3B4A9B-DC69-4207-A935-8DB4B3AC94FA"></a><h3 id="INMEM-GUID-8C3B4A9B-DC69-4207-A935-8DB4B3AC94FA" class="sect3"><span class="enumeration_section">4.5 </span>Enabling and Disabling Materialized Views for the IM Column Store
               </h3>
               <div>
                  <p>You can enable and disable materialized views for the IM column store.</p>
                  <div class="section">
                     <p>Enable a materialized view for the IM column store by including an <code class="codeph">INMEMORY</code> clause in a <code class="codeph">CREATE MATERIALIZED VIEW</code> or <code class="codeph">ALTER MATERIALIZED VIEW</code> statement. Disable a materialized view for the IM column store by including a <code class="codeph">NO INMEMORY</code> clause in a <code class="codeph">CREATE MATERIALIZED VIEW</code> or <code class="codeph">ALTER MATERIALIZED VIEW</code> statement.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-8C3B4A9B-DC69-4207-A935-8DB4B3AC94FA__GUID-20CD3001-D01A-4A8F-92EF-FB68E9A8CECE">Prerequisites</p>
                     <p>Ensure that the IM column store is enabled for the database. See <span class="q">"<a href="enabling-the-im-column-store.html#GUID-6A220D69-66BA-4C50-8FAB-D5004C96B215" title="Before tables or materialized views can be populated into the IM column store, you must enable the IM column store for the database.">Enabling the IM Column Store for a Database</a>"</span>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-8C3B4A9B-DC69-4207-A935-8DB4B3AC94FA__GUID-AD22A864-2ACF-4CFD-BE55-F4B723330C19">To enable or disable a materialized view for the IM column store:</p>
                     <ol>
                        <li>
                           <p>In SQL*Plus or SQL Developer, log in to the database as a user with the necessary privileges.</p>
                        </li>
                        <li>
                           <p>Run a <code class="codeph">CREATE MATERIALIZED VIEW</code> or <code class="codeph">ALTER MATERIALIZED VIEW</code> statement with either an <code class="codeph">INMEMORY</code> clause or a <code class="codeph">NO INMEMORY</code> clause.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-8C3B4A9B-DC69-4207-A935-8DB4B3AC94FA__GUID-2E6FF120-DFBD-467C-A40F-F35CCB8FDBA6">
                     <p class="titleinexample">Example 4-7 Creating a Materialized View and Enabling It for the IM Column Store</p>
                     <p>The following statement creates the <code class="codeph">oe.prod_info_mv</code> materialized view and enables it for the IM column store:
                     </p><pre class="pre codeblock"><code>CREATE MATERIALIZED VIEW oe.prod_info_mv INMEMORY 
  AS SELECT * FROM oe.product_information;
</code></pre><p>This example uses the defaults for the <code class="codeph">INMEMORY</code> clause: <code class="codeph">MEMCOMPRESS FOR QUERY LOW</code> and <code class="codeph">PRIORITY</code> <code class="codeph">NONE</code>.
                     </p>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-8C3B4A9B-DC69-4207-A935-8DB4B3AC94FA__GUID-BD789C3C-8FC8-49C8-9242-A626F3DA1DB8">
                     <p class="titleinexample">Example 4-8 Enabling a Materialized View for the IM Column Store with HIGH Data Population Priority</p>
                     <p>The following statement enables the <code class="codeph">oe.prod_info_mv</code> materialized view for the IM column store:
                     </p><pre class="pre codeblock"><code>ALTER MATERIALIZED VIEW oe.prod_info_mv INMEMORY PRIORITY HIGH;
</code></pre><p>This example uses the default compression: <code class="codeph">MEMCOMPRESS FOR QUERY LOW</code>.
                     </p>
                  </div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-8C3B4A9B-DC69-4207-A935-8DB4B3AC94FA__GUID-2D3F2870-0DEA-45DD-A75C-20D36B8EF586">
                     <p class="notep1">See Also:</p>
                     <p><a href="../sqlrf/CREATE-MATERIALIZED-VIEW.html#GUID-EE262CA4-01E5-4618-B659-6165D993CA1B" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> to learn more about the <code class="codeph">CREATE</code> or <code class="codeph">ALTER MATERIALIZED VIEW</code> statements
                     </p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="populating-objects-in-memory.html#GUID-C5F856BF-70E3-41C6-A1BA-1E94D7D230B8" title="This chapter explains how to enable and disable objects for population in the IM column store, including setting compression and priority options.">Enabling Objects for In-Memory Population</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
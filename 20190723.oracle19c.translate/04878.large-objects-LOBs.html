<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>大对象（LOB）</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Programmer&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Programmer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="cobol-programmers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-11T02:40:40-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96466-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="multithreaded-applications.html" title="Previous" type="text/html"></link>
      <link rel="next" href="precompiler-options.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Pro*COBOL Programmer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="LNPCB"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="multithreaded-applications.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="precompiler-options.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">程序员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="applications.html" property="item" typeof="WebPage"><span property="name">应用</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">大对象（LOB）</li>
            </ol>
            <a id="GUID-8F9739C2-B753-4707-A060-EE9086FD5196" name="GUID-8F9739C2-B753-4707-A060-EE9086FD5196"></a><a id="LNPCB013"></a>
            
            <h2 id="LNPCB-GUID-8F9739C2-B753-4707-A060-EE9086FD5196" class="sect2"><span class="enumeration_chapter">13</span>大对象（LOB）</h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='large-objects-LOBs'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]u003e </style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>此页面上的脚本内容仅用于导航目的，不会以任何方式更改内容。</p>
            </noscript>
            <div>
               <p>本章介绍嵌入式SQL语句为<span class="italic">LOB</span> （大对象）数据类型提供的支持。引入了四种类型的LOB，并与较旧的LONG和LONG RAW数据类型进行了比较。
               </p>
               <p>Pro * COBOL中的嵌入式SQL接口显示为提供与PL / SQL语言类似的功能。</p>
               <p>将显示LOB语句及其选项和主机变量。</p>
               <p>最后，使用LOB接口进行Pro * COBOL编程的示例。</p>
               <p>主要部分是：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="large-objects-LOBs.html#GUID-94DAE6EE-A155-4072-8EB5-8A25249585CA">使用LOB</a></p>
                  </li>
                  <li>
                     <p><a href="large-objects-LOBs.html#GUID-30BAFE59-F850-4F23-99BB-AE3C6C5834CB">如何使用LOB</a></p>
                  </li>
                  <li>
                     <p><a href="large-objects-LOBs.html#GUID-75ABC03D-2DD4-4399-A294-5655F2F91312">LOB声明规则</a></p>
                  </li>
                  <li>
                     <p><a href="large-objects-LOBs.html#GUID-5783536E-5066-41C8-9155-AC28C8CF8CDD">LOB声明</a></p>
                  </li>
                  <li>
                     <p><a href="large-objects-LOBs.html#GUID-F7E1C804-7A87-4903-B8F4-B573B32E5C77">LOB示例程序：LOBDEMO1。PCO</a></p>
                  </li>
               </ul>
            </div><a id="LNPCB812"></a><div class="props_rev_3"><a id="GUID-94DAE6EE-A155-4072-8EB5-8A25249585CA" name="GUID-94DAE6EE-A155-4072-8EB5-8A25249585CA"></a><h3 id="LNPCB-GUID-94DAE6EE-A155-4072-8EB5-8A25249585CA" class="sect3"><span class="enumeration_section">13.1</span>使用LOB</h3>
               <div>
                  <p>LOB（大对象）是用于存储大量数据（最大大小为4千兆字节）的数据库类型，例如ASCII文本，国家字符中的文本，各种图形格式的文件以及声波形式。</p>
               </div><a id="LNPCB813"></a><div class="props_rev_3"><a id="GUID-4ECF02C5-F364-4208-B71B-07DD6B53BA60" name="GUID-4ECF02C5-F364-4208-B71B-07DD6B53BA60"></a><h4 id="LNPCB-GUID-4ECF02C5-F364-4208-B71B-07DD6B53BA60" class="sect4"><span class="enumeration_section">13.1.1</span>内部LOB</h4>
                  <div>
                     <p>内部LOB（BLOB，CLOB，NCLOB）存储在数据库表空间中，并具有数据库服务器的事务支持。（COMMITT，ROLLBACK等等与他们合作。）</p>
                     <p><span class="italic">BLOB</span> （二进制LOB）存储非结构化二进制（也称为“原始”）数据，例如视频剪辑。
                     </p>
                     <p><span class="italic">CLOB</span> （字符LOB）存储来自数据库字符集的大块字符数据。
                     </p>
                     <p><span class="italic">NCLOB</span> （国家字符LOB）存储来自国家字符集的大块字符数据。
                     </p>
                  </div>
               </div><a id="LNPCB814"></a><div class="props_rev_3"><a id="GUID-FF9B0F1C-8603-4C2C-A1A4-68700DF7FEEB" name="GUID-FF9B0F1C-8603-4C2C-A1A4-68700DF7FEEB"></a><h4 id="LNPCB-GUID-FF9B0F1C-8603-4C2C-A1A4-68700DF7FEEB" class="sect4"><span class="enumeration_section">13.1.2</span>外部LOB</h4>
                  <div>
                     <p>外部LOB是数据库表空间之外的操作系统文件，它们没有来自数据库服务器的事务支持。</p>
                     <p><span class="italic">BFILE</span> （二进制文件）将数据存储在外部二进制文件中。BFILE可以是GIF，JPEG，MPEG，MPEG2，文本或其他格式。<a id="d79028e165" class="indexterm-anchor"></a></p>
                  </div>
               </div><a id="LNPCB815"></a><div class="props_rev_3"><a id="GUID-2528FB25-9D4A-462D-BDC0-9E0A4B4159F3" name="GUID-2528FB25-9D4A-462D-BDC0-9E0A4B4159F3"></a><h4 id="LNPCB-GUID-2528FB25-9D4A-462D-BDC0-9E0A4B4159F3" class="sect4"><span class="enumeration_section">13.1.3</span> BFILE的安全性</h4>
                  <div>
                     <p><span class="italic">DIRECTORY</span>对象用于访问和使用BFILE。DIRECTORY是包含该文件的服务器文件系统中的实际物理目录的逻辑别名（存储在服务器中）。仅当授予DIRECTORY对象的访问权限时，才允许用户访问该文件。
                     </p>
                     <p>BFILE可以使用两种SQL语句：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>DDL（数据定义语言）SQL语句CREATE，REPLACE，ALTER和DROP。</p>
                        </li>
                        <li>
                           <p>DML（数据管理语言）SQL语句用于GRANT和REVOKE DIRECTORY对象的READ系统和对象权限。</p>
                        </li>
                     </ul>
                     <p>CREATE DIRECTORY指令示例如下：</p><pre class="oac_no_warn" dir="ltr">执行SQL创建或替换目录“Mydir”AS'/ usr / home / mydir'END-EXEC。</pre><p>仅当您使用DML（数据操作语言）语句（例如GRANT）授予其权限时，其他用户或角色才能读取该目录。例如，允许用户<code class="codeph">scott</code>读取目录<code class="codeph">/usr/home/mydir</code> BFILES：</p><pre class="oac_no_warn" dir="ltr">执行SQL GRANT阅读目录“Mydir”scott END-EXEC。</pre><p>一次会话中最多可同时打开10个BFILES。可以通过设置SESSION_MAX_OPEN_FILES参数来更改此默认值。</p>
                     <p>有关DIRECTORY对象和BFILE安全性以及GRANT命令的更多详细信息，请参见“ <a href="../adfns/index.html" target="_blank"><span class="italic">Oracle数据库高级应用程序开发人员指南”</span></a> 。
                     </p>
                  </div>
               </div><a id="LNPCB816"></a><div class="props_rev_3"><a id="GUID-57F79F4F-D22D-41DD-8AF2-6D359FC6F37B" name="GUID-57F79F4F-D22D-41DD-8AF2-6D359FC6F37B"></a><h4 id="LNPCB-GUID-57F79F4F-D22D-41DD-8AF2-6D359FC6F37B" class="sect4"><span class="enumeration_section">13.1.4</span> LOBs与LONG和LONG RAW相比</h4>
                  <div>
                     <p>LOB在许多方面与旧的LONG和LONG RAW数据类型不同。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>LOB和LONG RAW的最大LOB大小为4千兆字节，而2千兆字节。</p>
                        </li>
                        <li>
                           <p>您可以在LOB上使用随机和顺序访问方法;您只能在LONG和LONG RAW上使用顺序访问方法。</p>
                        </li>
                        <li>
                           <p>LOB（NCLOB除外）可以是您定义的对象类型的属性。</p>
                        </li>
                        <li>
                           <p>表可以有多个LOB列，但只能有一个LONG或LONG RAW列。</p>
                        </li>
                     </ul>
                     <p>Oracle建议将现有的LONG和LONG Raw属性迁移到LOB。甲骨文计划在未来的版本中终止对LONG和LONG RAW的支持。另请参阅： <a href="../upgrd/index.html" target="_blank"><span class="italic">Oracle数据库升级指南</span></a>以获取有关迁移的更多信息，以及<a href="../adlob/index.html" target="_blank"><span class="italic">Oracle Database SecureFiles和Large Objects Developer's Guide</span></a>以获取有关LOB的更多信息。
                     </p>
                  </div>
               </div><a id="LNPCB817"></a><div class="props_rev_3"><a id="GUID-C99B0261-7EA8-4049-892E-880178746FE7" name="GUID-C99B0261-7EA8-4049-892E-880178746FE7"></a><h4 id="LNPCB-GUID-C99B0261-7EA8-4049-892E-880178746FE7" class="sect4"><span class="enumeration_section">13.1.5</span> LOB定位器</h4>
                  <div>
                     <p><span class="italic">LOB定位符</span>指向实际的LOB内容。检索LOB时返回定位器，而不是LOB的内容。LOB定位器无法保存在一个事务或会话中，并在以后的事务或会话中再次使用。
                     </p>
                  </div>
               </div><a id="LNPCB818"></a><div class="props_rev_3"><a id="GUID-95075C97-6736-4BEC-9346-8BCDFDE17669" name="GUID-95075C97-6736-4BEC-9346-8BCDFDE17669"></a><h4 id="LNPCB-GUID-95075C97-6736-4BEC-9346-8BCDFDE17669" class="sect4"><span class="enumeration_section">13.1.6</span>临时LOB</h4>
                  <div>
                     <p>您可以创建<span class="italic">临时</span> LOB以帮助您使用数据库LOB。临时LOB类似于局部变量，不与任何表关联。它们只能由创建者使用其定位器访问，并在会话结束时删除。
                     </p>
                     <p>临时BFILES不支持。临时LOB仅允许在INSERT语句的WHERE子句中，UPDATE的SET子句中或DELETE语句的WHERE子句中作为输入变量（IN值）。临时LOB没有来自数据库服务器的事务支持，这意味着您无法对它们执行COMMIT或ROLLBACK。</p>
                     <p>临时LOB定位器可以跨越事务。当服务器异常终止时，以及从数据库SQL操作返回错误时，它们将被删除。</p>
                  </div>
               </div><a id="LNPCB819"></a><div class="props_rev_3"><a id="GUID-9A70D912-CBC9-4C60-ACE3-0C75C78BAB0F" name="GUID-9A70D912-CBC9-4C60-ACE3-0C75C78BAB0F"></a><h4 id="LNPCB-GUID-9A70D912-CBC9-4C60-ACE3-0C75C78BAB0F" class="sect4"><span class="enumeration_section">13.1.7</span> LOB缓冲子系统</h4>
                  <div>
                     <p><span class="italic">LBS</span> （LOB缓冲子系统）是用户存储器的一个区域，用作客户端地址空间中一个或多个LOB的缓冲区。
                     </p>
                     <p>缓冲具有这些优点，特别是对于客户端上的应用程序，它对LOB的特定区域执行许多小的读取和写入：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>LBS减少了到服务器的往返次数，因为您通过对LOB进行多次读/写来填充缓冲区，然后在执行FLUSH指令时写入服务器。</p>
                        </li>
                        <li>
                           <p>缓冲还减少了服务器上LOB更新的总数。这可以创建更好的LOB性能并节省磁盘空间。</p>
                        </li>
                     </ul>
                     <p>Oracle提供了一个简单的缓冲子系统，而不是缓存。Oracle不保证缓冲区的内容始终与服务器LOB值同步。使用FLUSH语句实际在服务器LOB中写入更新。</p>
                     <p>通过其定位器执行LOB的缓冲读/写。启用缓冲的定位器提供LOB的一致读取版本，直到您通过该定位器执行写入。</p>
                     <p>在用于缓冲的WRITE之后，定位器成为更新的定位器，并提供对<span class="italic">通过缓冲子系统看到</span>的最新LOB版本的访问。所有进一步缓冲的写入LOB只能通过此更新的定位器完成。涉及缓冲LOB操作的事务无法跨用户会话进行迁移。
                     </p>
                     <p>LBS由用户管理，用户负责通过使用FLUSH语句更新服务器LOB值。LBS是单用户和单线程。使用ROLLBACK和SAVEPOINT操作来保证服务器LOB中的正确性。Oracle不保证对缓冲LOB操作的事务支持。要确保缓冲LOB更新的事务语义，必须维护逻辑保存点以在发生错误时执行回滚。</p>
                  </div>
               </div>
            </div><a id="LNPCB821"></a><a id="LNPCB820"></a><div class="props_rev_3"><a id="GUID-30BAFE59-F850-4F23-99BB-AE3C6C5834CB" name="GUID-30BAFE59-F850-4F23-99BB-AE3C6C5834CB"></a><h3 id="LNPCB-GUID-30BAFE59-F850-4F23-99BB-AE3C6C5834CB" class="sect3"><span class="enumeration_section">13.2</span>如何使用LOB</h3>
               <div>
                  <p>在Pro * COBOL中有两种方法可以访问LOB：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>PL / SQL块中的DBMS_LOB包。</p>
                     </li>
                     <li>
                        <p>嵌入式SQL语句。</p>
                     </li>
                  </ul>
                  <p>嵌入式SQL语句旨在为用户提供与PL / SQL接口等效的功能。</p>
                  <p>下表比较了PL / SQL中的LOB访问和Pro * COBOL中的嵌入式SQL语句。破折号表示缺少功能。</p>
                  <div class="tblformal" id="GUID-30BAFE59-F850-4F23-99BB-AE3C6C5834CB__GUID-EC169E21-D671-4F9E-8158-7A2AB6BCACB7">
                     <p class="titleintable">表13-1 LOB访问方法</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="LOB访问方法" width="100%" border="1" summary="q" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="47%" id="d79028e454">PL / SQL（1）</th>
                              <th align="left" valign="bottom" width="53%" id="d79028e461">Pro * COBOL嵌入式SQL</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e466" headers="d79028e454 ">
                                 <p>相比（）</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e466 d79028e461 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e473" headers="d79028e454 ">
                                 <p>INSTR（）</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e473 d79028e461 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e480" headers="d79028e454 ">
                                 <p>SUBSTR（）</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e480 d79028e461 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e487" headers="d79028e454 ">
                                 <p>附加（）</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e487 d79028e461 ">
                                 <p>附加</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e494" headers="d79028e454 ">
                                 <p>：=</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e494 d79028e461 ">
                                 <p>分配</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e501" headers="d79028e454 ">
                                 <p>关（）</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e501 d79028e461 ">
                                 <p>关</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e508" headers="d79028e454 ">
                                 <p>复制（）</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e508 d79028e461 ">
                                 <p>复制</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e515" headers="d79028e454 ">
                                 <p>CREATETEMPORARY（）</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e515 d79028e461 ">
                                 <p>创建临时</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e522" headers="d79028e454 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e522 d79028e461 ">
                                 <p>禁用缓冲</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e529" headers="d79028e454 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e529 d79028e461 ">
                                 <p>启用缓冲</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e536" headers="d79028e454 ">
                                 <p>ERASE（）</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e536 d79028e461 ">
                                 <p>ERASE</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e544" headers="d79028e454 ">
                                 <p>GETCHUNKSIZE（）</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e544 d79028e461 ">
                                 <p>描述</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e551" headers="d79028e454 ">
                                 <p>开了（）</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e551 d79028e461 ">
                                 <p>描述</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e558" headers="d79028e454 ">
                                 <p>FILECLOSE（）</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e558 d79028e461 ">
                                 <p>关</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e565" headers="d79028e454 ">
                                 <p>FILECLOSEALL（）</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e565 d79028e461 ">
                                 <p>文件关闭所有</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e572" headers="d79028e454 ">
                                 <p>文件已存在（）</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e572 d79028e461 ">
                                 <p>描述</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e579" headers="d79028e454 ">
                                 <p>FILEGETNAME（）</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e579 d79028e461 ">
                                 <p>描述</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e586" headers="d79028e454 ">
                                 <p>FILEISOPEN（）</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e586 d79028e461 ">
                                 <p>描述</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e593" headers="d79028e454 ">
                                 <p>FILEOPEN（）</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e593 d79028e461 ">
                                 <p>打开</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e600" headers="d79028e454 ">
                                 <p>BFILENAME（）</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e600 d79028e461 ">
                                 <p>文件设置<a id="fn_2" name="fn_2" href="#fn_2" the="" bfilename()="" built="" in="" sql="" function="" may="" also="" be="" used=")" ="" onclick="footdisplay(2, "><sup>脚2</sup></a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e611" headers="d79028e454 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e611 d79028e461 ">
                                 <p>冲洗缓冲器</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e618" headers="d79028e454 ">
                                 <p>FREETEMPORARY（）</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e618 d79028e461 ">
                                 <p>免费临时</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e626" headers="d79028e454 ">
                                 <p>GETLENGTH（）</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e626 d79028e461 ">
                                 <p>描述</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e633" headers="d79028e454 ">
                                 <p>=</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e633 d79028e461 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e640" headers="d79028e454 ">
                                 <p>方法isTemporary（）</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e640 d79028e461 ">
                                 <p>描述</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e647" headers="d79028e454 ">
                                 <p>LOADFROMFILE（）</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e647 d79028e461 ">
                                 <p>从文件中加载</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e654" headers="d79028e454 ">
                                 <p>打开（）</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e654 d79028e461 ">
                                 <p>打开</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e661" headers="d79028e454 ">
                                 <p>读（）</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e661 d79028e461 ">
                                 <p>读</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e668" headers="d79028e454 ">
                                 <p>修剪（）</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e668 d79028e461 ">
                                 <p>修剪</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e675" headers="d79028e454 ">
                                 <p>写（）</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e675 d79028e461 ">
                                 <p>写</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79028e682" headers="d79028e454 ">
                                 <p>WRITEAPPEND（）</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79028e682 d79028e461 ">
                                 <p>写</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p class="tablefootnote"><sup class="tablefootnote">脚注1</sup>来自dbmslob.sql。所有例程都以“DBMS_LOB”为前缀。除了BFILENAME。</p>
                  <p class="tablefootnote"><sup class="tablefootnote">脚注2</sup></p><p><span class="bold">也可以使用内置SQL函数的BFILENAME（）。</span></p>
                  <p></p>
                  <div class="infoboxnote" id="GUID-30BAFE59-F850-4F23-99BB-AE3C6C5834CB__GUID-849F9CBC-97E6-419D-9177-27C1B0F9AE8D">
                     <p class="notep1">注意：</p>
                     <p>在使用以任何方式修改或更改LOB的任何新语句之前，必须显式锁定该行。可以修改LOB值的操作是APPEND，COPY，ERASE，LOAD FROM FILE，TRIM和WRITE。</p>
                  </div>
               </div><a id="LNPCB822"></a><div class="props_rev_3"><a id="GUID-17BED256-DEFB-49BA-BB49-2A1D664348CC" name="GUID-17BED256-DEFB-49BA-BB49-2A1D664348CC"></a><h4 id="LNPCB-GUID-17BED256-DEFB-49BA-BB49-2A1D664348CC" class="sect4"><span class="enumeration_section">13.2.1</span>您的应用程序中的LOB定位器</h4>
                  <div>
                     <p>要在Pro * COBOL应用程序中使用LOB定位器，请使用以下伪类型：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>SQL-BLOB</p>
                        </li>
                        <li>
                           <p>SQL-CLOB</p>
                        </li>
                        <li>
                           <p>SQL-NCLOB</p>
                        </li>
                        <li>
                           <p>SQL-BFILE</p>
                        </li>
                     </ul>
                     <p>例如，要声明一个名为MY-NCLOB的NCLOB变量：</p><pre class="oac_no_warn" dir="ltr">01 MY-NCLOB SQL-NCLOB。</pre></div>
               </div><a id="LNPCB823"></a><div class="props_rev_3"><a id="GUID-E87093C7-CDF5-4FAB-BA0E-5844DD2AC7B6" name="GUID-E87093C7-CDF5-4FAB-BA0E-5844DD2AC7B6"></a><h4 id="LNPCB-GUID-E87093C7-CDF5-4FAB-BA0E-5844DD2AC7B6" class="sect4"><span class="enumeration_section">13.2.2</span>初始化LOB</h4>
                  <div>
                     <div class="section">
                        <p>本节讨论如何初始化不同种类的LOB。</p>
                     </div>
                     <!-- class="section" -->
                  </div><a id="LNPCB824"></a><div class="props_rev_3"><a id="GUID-828BF7BF-7B45-455C-B420-B8A694B1F969" name="GUID-828BF7BF-7B45-455C-B420-B8A694B1F969"></a><h5 id="LNPCB-GUID-828BF7BF-7B45-455C-B420-B8A694B1F969" class="sect5"><span class="enumeration_section">13.2.2.1</span>内部LOB</h5>
                     <div>
                        <p>要将BLOB初始化为空，请使用<span class="italic">EMPTY_BLOB（）</span>函数或使用ALLOCATE SQL语句。对于CLOB和NCLOB，请使用<span class="italic">EMPTY_CLOB（）</span>函数<span class="italic">。</span> 有关EMPTY_BLOB（）和EMPTY_CLOB（）的更多信息，请参见<a href="../sqlrf/index.html" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。这些函数仅在INSERT语句的VALUES子句中或在UPDATE语句中作为SET子句的源允许。
                        </p>
                        <p>例如：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL INSERT INTO lob_table（a_blob，a_clob）VALUES（EMPTY_BLOB（），EMPTY_CLOB（））END-EXEC。</pre><p>ALLOCATE语句分配一个LOB定位器并将其初始化为空，因此，以下代码与前一个示例等效：</p><pre class="oac_no_warn" dir="ltr">...01 A-BLOB SQL-BLOB。 01 A-CLOB SQL-CLOB。 ...EXEC SQL ALLOCATE：A-BLOB END-EXEC。 EXEC SQL ALLOCATE：A-CLOB END-EXEC。 EXEC SQL INSERT INTO lob_table（a_blob，a_clob）VALUES（：A-BLOB，：A-CLOB）END-EXEC。</pre></div>
                  </div><a id="LNPCB825"></a><div class="props_rev_3"><a id="GUID-0A3FB714-8AB5-4393-8601-F62E452D40E3" name="GUID-0A3FB714-8AB5-4393-8601-F62E452D40E3"></a><h5 id="LNPCB-GUID-0A3FB714-8AB5-4393-8601-F62E452D40E3" class="sect5"><span class="enumeration_section">13.2.2.2</span>外部LOB</h5>
                     <div>
                        <p>使用LOB FILE SET语句以这种方式初始化BFILE和FILENAME的DIRECTORY别名：</p><pre class="oac_no_warn" dir="ltr">...01 ALIAS PIC X（14）变化。 01 FILENAME PIC X（14）变化。 01 A-BFILE SQL-BFILE。 ...将“lob_dir”移至ALIAS-ARR。移7到ALIAS-LEN。移动“image.gif”到FILENAME-ARR移动9到FILENAME-LEN ..EXEC SQL ALLOCATE：A-BFILE END-EXEC。 EXEC SQL LOB文件集：A-BFILE DIRECTORY =：ALIAS，FILENAME =：FILENAME END-EXEC。 EXEC SQL INSERT INTO file_table（a_bfile）VALUES（：A-BFILE）END-EXEC。</pre><p>有关DIRECTORY对象命名约定和DIRECTORY对象特权的完整说明，请参阅<a href="../adfns/index.html" target="_blank"><span class="italic">Oracle数据库高级应用程序开发人员指南</span></a> 。
                        </p>
                        <p>或者，您可以在INSERT或UPDATE语句中使用BFILENAME（'directory'，'filename'）函数来初始化特定行的BFILE列或属性，并提供实际物理目录和文件名的名称：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL INSERT INTO file_table（a_bfile）VALUES（BFILENAME（'lob_dir'，'image.gif'））返回a_bfile INTO：A-BFILE END-EXEC。</pre><div class="infoboxnote" id="GUID-0A3FB714-8AB5-4393-8601-F62E452D40E3__GUID-E23D3EC8-0B46-4D37-989C-768FCC212A88">
                           <p class="notep1">注意：</p>
                           <p>BFILENAME（）不检查目录或文件名的权限，或物理目录是否确实存在。使用BFILE定位器的后续文件访问将执行这些检查，并在文件不可访问时返回错误。</p>
                        </div>
                     </div>
                  </div><a id="LNPCB826"></a><div class="props_rev_3"><a id="GUID-171B9CBF-13D3-496C-AC61-74A877427B89" name="GUID-171B9CBF-13D3-496C-AC61-74A877427B89"></a><h5 id="LNPCB-GUID-171B9CBF-13D3-496C-AC61-74A877427B89" class="sect5"><span class="enumeration_section">13.2.2.3</span>临时LOB</h5>
                     <div>
                        <p>使用嵌入式SQL LOB CREATE TEMPORARY语句首次创建临时LOB时，它将初始化为空。EMPTY_BLOB（）和EMPTY_CLOB（）函数不能与临时LOB一起使用。</p>
                     </div>
                  </div><a id="LNPCB827"></a><div class="props_rev_3"><a id="GUID-CF5DBCA3-325A-4EA4-876B-CCFEB0F55E92" name="GUID-CF5DBCA3-325A-4EA4-876B-CCFEB0F55E92"></a><h5 id="LNPCB-GUID-CF5DBCA3-325A-4EA4-876B-CCFEB0F55E92" class="sect5"><span class="enumeration_section">13.2.2.4</span>释放LOB</h5>
                     <div>
                        <div class="section">
                           <p>FREE语句用于释放ALLOCATE语句使用的内存：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL FREE：A-BLOB END-EXEC。</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="LNPCB828"></a><div class="props_rev_3"><a id="GUID-75ABC03D-2DD4-4399-A294-5655F2F91312" name="GUID-75ABC03D-2DD4-4399-A294-5655F2F91312"></a><h3 id="LNPCB-GUID-75ABC03D-2DD4-4399-A294-5655F2F91312" class="sect3"><span class="enumeration_section">13.3</span> LOB声明规则</h3>
               <div>
                  <p>以下是使用LOB语句的规则：</p>
               </div><a id="LNPCB829"></a><div class="props_rev_3"><a id="GUID-AA333C14-0CBB-4C1E-B06C-A445152FA84B" name="GUID-AA333C14-0CBB-4C1E-B06C-A445152FA84B"></a><h4 id="LNPCB-GUID-AA333C14-0CBB-4C1E-B06C-A445152FA84B" class="sect4"><span class="enumeration_section">13.3.1</span>所有LOB声明</h4>
                  <div>
                     <p>当使用SQL LOB语句操作LOB时，这些一般限制和限制适用：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>嵌入式SQL LOB语句中不允许使用FOR子句。在这些语句中只能使用一个LOB定位器。但是，ALLOCATE和FREE语句允许使用FOR子句。</p>
                        </li>
                        <li>
                           <p>不支持分布式LOB。虽然您可以在任何新的嵌入式SQL LOB语句中使用AT数据库子句，但是不能混合在同一SQL LOB语句中使用不同数据库连接创建或分配的LOB定位符。</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNPCB830"></a><div class="props_rev_3"><a id="GUID-85CF8A3E-F407-4089-BA75-EA4C65B7D6CA" name="GUID-85CF8A3E-F407-4089-BA75-EA4C65B7D6CA"></a><h4 id="LNPCB-GUID-85CF8A3E-F407-4089-BA75-EA4C65B7D6CA" class="sect4"><span class="enumeration_section">13.3.2</span>对于LOB缓冲子系统</h4>
                  <div>
                     <p>对于LBS，必须遵循以下规则：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>读取或写入访问中的错误在下次访问服务器时报告。因此，错误恢复必须由您（用户）编码。</p>
                        </li>
                        <li>
                           <p>使用缓冲写入更新LOB时，请勿使用绕过LOB缓冲子系统的方法更新相同的LOB。</p>
                        </li>
                        <li>
                           <p>启用缓冲的更新LOB定位器可以作为IN参数传递给PL / SQL过程，但不能作为IN OUT或OUT参数传递。返回错误。尝试返回更新的定位器时也会返回错误。</p>
                        </li>
                        <li>
                           <p>不允许使用<span class="italic">已更新的</span>定位器的ASSIGN来缓冲到另一个定位器。
                           </p>
                        </li>
                        <li>
                           <p>您可以使用缓冲写入附加到LOB值，但起始偏移量必须是LOB结束后的一个字符。 LBS不允许APPEND语句在数据库服务器的LOB中产生零字节填充或空格。</p>
                        </li>
                        <li>
                           <p>主机定位器绑定变量的字符集，数据库服务器CLOB必须相同。</p>
                        </li>
                        <li>
                           <p>只有ASSIGN，READ和WRITE语句才能与启用缓冲的定位器一起使用。</p>
                        </li>
                        <li>
                           <p>与启用缓冲的定位器一起使用时，以下语句会导致错误：APPEND，COPY，ERASE，DESCRIBE（仅限LENGTH），SELECT和TRIM。如果将这些语句与未启用缓冲的定位器一起使用，如果定位器指向的LOB正由另一个定位器以缓冲模式访问，则也会返回错误。</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-85CF8A3E-F407-4089-BA75-EA4C65B7D6CA__GUID-B6A421A8-6576-49B5-9968-8B7FD6624090">
                        <p class="notep1">注意：</p>
                        <p>必须在之前由LOB缓冲子系统启用的LOB上使用FLUSH语句</p>
                     </div>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>提交交易。</p>
                        </li>
                        <li>
                           <p>从当前事务迁移到另一个事务。</p>
                        </li>
                        <li>
                           <p>禁用LOB上的缓冲区操作。</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNPCB831"></a><div class="props_rev_3"><a id="GUID-C6854F26-7A57-4913-A024-62CC6D1E24F2" name="GUID-C6854F26-7A57-4913-A024-62CC6D1E24F2"></a><h4 id="LNPCB-GUID-C6854F26-7A57-4913-A024-62CC6D1E24F2" class="sect4"><span class="enumeration_section">13.3.3</span>对于主机变量</h4>
                  <div>
                     <p>对LOB语句使用以下规则和注释：<a id="d79028e1071" class="indexterm-anchor"></a></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="italic">src</span>和<span class="italic">dst</span>可以引用内部或外部LOB定位器，但<span class="italic">file</span>仅指外部定位器。
                           </p>
                        </li>
                        <li>
                           <p>数字主机值（ <code class="codeph">amt, src_offset, dst_offset</code> <span class="italic">，</span>等等。）被声明<code class="codeph">as</code>一个4字节整数变量，PIC S9（9）COMP。值限制在0到4千兆字节之间。
                           </p>
                        </li>
                        <li>
                           <p>NULL的概念是LOB定位器的一部分。LOB语句中不需要指示符变量。NULL不能与数值变量（如<code class="codeph">amt, src_offset</code> ，从而导致错误。
                           </p>
                        </li>
                        <li>
                           <p>偏移值<code class="codeph">src_offset</code>和<code class="codeph">dst_offset</code>默认值为1。
                           </p>
                           <div class="infoboxnote" id="GUID-C6854F26-7A57-4913-A024-62CC6D1E24F2__GUID-7A3B45F1-8260-476A-9C8E-1DEBF2FC141E">
                              <p class="notep1">注意：</p>
                              <p>BLOB，CLOB和NCLOB变量需要遵守平台的对齐要求。请参阅平台文档，了解特定平台的对齐限制。</p>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="LNPCB832"></a><div class="props_rev_3"><a id="GUID-5783536E-5066-41C8-9155-AC28C8CF8CDD" name="GUID-5783536E-5066-41C8-9155-AC28C8CF8CDD"></a><h3 id="LNPCB-GUID-5783536E-5066-41C8-9155-AC28C8CF8CDD" class="sect3"><span class="enumeration_section">13.4</span> LOB声明</h3>
               <div>
                  <div class="section">
                     <p>这些陈述按字母顺序排列。在出现的所有语句中， <span class="italic">数据库</span>指的是数据库连接</p>
                  </div>
                  <!-- class="section" -->
               </div><a id="LNPCB834"></a><a id="LNPCB835"></a><a id="LNPCB836"></a><a id="LNPCB837"></a><a id="LNPCB833"></a><div class="props_rev_3"><a id="GUID-8E05707F-F13B-4363-91EB-094DEBD7545A" name="GUID-8E05707F-F13B-4363-91EB-094DEBD7545A"></a><h4 id="LNPCB-GUID-8E05707F-F13B-4363-91EB-094DEBD7545A" class="sect4"><span class="enumeration_section">13.4.1</span>附录</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-8E05707F-F13B-4363-91EB-094DEBD7545A__GUID-21656DC6-3F84-4E32-97A6-B2158A08CB93">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>APPEND语句在另一个LOB的末尾附加一个LOB值。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8E05707F-F13B-4363-91EB-094DEBD7545A__GUID-8E6D31AC-5F34-4FE3-8080-8B2E26C6DA18">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] LOB APPEND： <span class="italic">src</span> TO： <span class="italic">dst</span> END-EXEC。</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8E05707F-F13B-4363-91EB-094DEBD7545A__GUID-2930C52D-B7E3-498C-9BCD-65EB6A748AC0">主机变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <dl>
                           <dt class="dlterm"><a name="GUID-8E05707F-F13B-4363-91EB-094DEBD7545A__GUID-420DEB49-4DDC-41CC-872C-B456AB3307D8"><!-- --></a> src（IN）</dt>
                           <dd>
                              <p>内部LOB定位器，唯一引用源LOB。</p>
                           </dd>
                           <dt class="dlterm"><a name="GUID-8E05707F-F13B-4363-91EB-094DEBD7545A__GUID-CE4CC92B-D55F-441D-8049-318FDDC81837"><!-- --></a> dsc（IN OUT）</dt>
                           <dd>
                              <p>唯一引用目标LOB的内部LOB定位器。</p>
                           </dd>
                        </dl>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-8E05707F-F13B-4363-91EB-094DEBD7545A__GUID-5D5B1584-03E9-4408-A2BB-C564E14691E6">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>数据从源LOB复制到目标LOB的末尾，将目标LOB扩展到最大4千兆字节。如果LOB超出4千兆字节，则会发生错误。</p>
                        <p>源和目标LOB必须已存在，并且必须初始化目标LOB。</p>
                        <p>源LOB和目标LOB都必须具有相同的内部LOB类型。为任一类型的定位器启用LOB缓冲是错误的。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB839"></a><a id="LNPCB840"></a><a id="LNPCB841"></a><a id="LNPCB842"></a><a id="LNPCB838"></a><div class="props_rev_3"><a id="GUID-066FEEFA-0533-4872-A631-7A58EDE9AEEC" name="GUID-066FEEFA-0533-4872-A631-7A58EDE9AEEC"></a><h4 id="LNPCB-GUID-066FEEFA-0533-4872-A631-7A58EDE9AEEC" class="sect4"><span class="enumeration_section">13.4.2</span>分配</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-066FEEFA-0533-4872-A631-7A58EDE9AEEC__GUID-8FE29FA0-6041-48D2-A0F1-76C5F3F2B936">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>将LOB或BFILE定位器分配给另一个。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-066FEEFA-0533-4872-A631-7A58EDE9AEEC__GUID-4446DF02-B8D4-453D-9E7B-3E1F0FC36091">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] LOB ASSIGN： <span class="italic">src</span> to： <span class="italic">dst</span> END-EXEC。</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-066FEEFA-0533-4872-A631-7A58EDE9AEEC__GUID-2D9E86D5-ACAD-439A-A1C8-5DF8249AFCB1">主机变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <dl>
                           <dt class="dlterm"><a name="GUID-066FEEFA-0533-4872-A631-7A58EDE9AEEC__GUID-FE497AAB-F112-4069-82DF-4AFA42AC0181"><!-- --></a> src（IN）</dt>
                           <dd>
                              <p>从中复制LOB或BFILE定位器源。</p>
                           </dd>
                           <dt class="dlterm"><a name="GUID-066FEEFA-0533-4872-A631-7A58EDE9AEEC__GUID-18A78FA3-C6D8-46CF-9C12-94F107303EA4"><!-- --></a> dsc（IN OUT）</dt>
                           <dd>
                              <p>LOB或BFILE定位器复制到。</p>
                           </dd>
                        </dl>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-066FEEFA-0533-4872-A631-7A58EDE9AEEC__GUID-F8782D28-2D3D-48F8-9419-0E54BE03E59B">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>赋值后，两个定位器都引用相同的LOB值。目标LOB定位器必须是有效的初始化（已分配）定位器。</p>
                        <p>对于内部LOB，仅当目标定位器存储在表中时，源定位器的LOB值才会复制到目标定位器的LOB值。对于Pro * COBOL，发出包含目标定位符的对象的FLUSH将复制LOB值。</p>
                        <p>将BFILE定位器分配给内部LOB定位器时会返回错误，反之亦然。如果<span class="italic">src</span>和<span class="italic">dst</span> LOB的类型不同，也是一个错误。
                        </p>
                        <p>如果源定位器用于已启用缓冲的内部LOB，并且源定位器已用于通过LOB缓冲子系统修改LOB值，并且自WRITE以来尚未刷新缓冲区，则源定位器不能分配给目标定位器。这是因为每个LOB只有一个定位器可以通过LOB缓冲子系统修改LOB值。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB844"></a><a id="LNPCB845"></a><a id="LNPCB846"></a><a id="LNPCB847"></a><a id="LNPCB843"></a><div class="props_rev_3"><a id="GUID-9DB20604-8FF9-4276-A365-4F47CEC93CDF" name="GUID-9DB20604-8FF9-4276-A365-4F47CEC93CDF"></a><h4 id="LNPCB-GUID-9DB20604-8FF9-4276-A365-4F47CEC93CDF" class="sect4"><span class="enumeration_section">13.4.3</span>关闭</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-9DB20604-8FF9-4276-A365-4F47CEC93CDF__GUID-408FE06D-7D4A-463B-82D7-2AFA4A00B739">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>关闭一个打开的LOB或BFILE。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9DB20604-8FF9-4276-A365-4F47CEC93CDF__GUID-F6A70D34-3469-4984-9170-0A2FBCCA0CE1">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] LOB CLOSE： <span class="italic">src</span> END-EXEC。</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9DB20604-8FF9-4276-A365-4F47CEC93CDF__GUID-74D70CFF-44D5-457B-8C46-D44D19DB27F7">主机变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <dl>
                           <dt class="dlterm"><a name="GUID-9DB20604-8FF9-4276-A365-4F47CEC93CDF__GUID-0F160797-2A7F-443A-A032-521DB1AB5039"><!-- --></a> src（IN OUT）</dt>
                           <dd>
                              <p>要关闭的LOB或BFILE的定位器。</p>
                           </dd>
                        </dl>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9DB20604-8FF9-4276-A365-4F47CEC93CDF__GUID-98D18B5F-7925-463A-BCAB-CCCFE5AAAD6F">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>使用不同的定位器或使用相同的定位器关闭相同的LOB两次是错误的。对于外部LOB，如果BFILE存在但尚未打开，则不会产生错误。</p>
                        <p>在关闭所有先前打开的LOB之前执行COMMIT是一个错误。在事务ROLLBACK时，所有仍处于打开状态的LOB将在不先关闭的情况下被丢弃。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB849"></a><a id="LNPCB850"></a><a id="LNPCB851"></a><a id="LNPCB852"></a><a id="LNPCB853"></a><a id="LNPCB854"></a><a id="LNPCB855"></a><a id="LNPCB856"></a><a id="LNPCB857"></a><a id="LNPCB848"></a><div class="props_rev_3"><a id="GUID-EFFE5F7C-4321-425F-81FF-1C89BB0108A5" name="GUID-EFFE5F7C-4321-425F-81FF-1C89BB0108A5"></a><h4 id="LNPCB-GUID-EFFE5F7C-4321-425F-81FF-1C89BB0108A5" class="sect4"><span class="enumeration_section">13.4.4</span>复制</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-EFFE5F7C-4321-425F-81FF-1C89BB0108A5__GUID-8673F6DC-9DF3-4AC8-B314-B614C7E8DA04">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>将全部或部分LOB值复制到第二个LOB中。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EFFE5F7C-4321-425F-81FF-1C89BB0108A5__GUID-8DC1C126-3F1B-4000-9FD5-CFB0F249F7BE">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] LOB COPY： <span class="italic">amt</span> FROM： <span class="italic">src</span> [AT： <span class="italic">src_offset</span> ] TO： <span class="italic">dst</span> [AT： <span class="italic">dst_offset</span> ] END-EXEC。</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EFFE5F7C-4321-425F-81FF-1C89BB0108A5__GUID-420023D6-E2A4-4A45-BD84-C18D167DAF2A">主机变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EFFE5F7C-4321-425F-81FF-1C89BB0108A5__GUID-9B7AD6F5-7B0E-4D2D-AAD8-482B783F4387">amt（IN）</p>
                        <p>要复制的BLOB或CLOB和NCLOB的字符的最大字节数。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EFFE5F7C-4321-425F-81FF-1C89BB0108A5__GUID-36F2EAB7-16E7-4C77-B75E-F199B7CAE4E0">src（IN）</p>
                        <p>源LOB的定位器。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EFFE5F7C-4321-425F-81FF-1C89BB0108A5__GUID-51AC8EDB-C30F-4B47-A756-05CC8E1CC453">src_offset（IN）</p>
                        <p>这是CLOB或NCLOB的字符数，以及BLOB的字节数，从LOB开头的1开始。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EFFE5F7C-4321-425F-81FF-1C89BB0108A5__GUID-3A8F7EC8-DDA0-4678-B362-31860B31FE9E">dst（IN）</p>
                        <p>目标LOB的定位器。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EFFE5F7C-4321-425F-81FF-1C89BB0108A5__GUID-861C6D26-CCBB-4BDA-9C0D-B95AF0578EC4">dst_offset（IN）</p>
                        <p>目的地偏移量。与src_offset相同的规则。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EFFE5F7C-4321-425F-81FF-1C89BB0108A5__GUID-F8617832-8505-4EEC-8B6A-CEFF7D0BF9EC">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>如果数据已经存在于目标的偏移量以及更远的位置，则会被源数据覆盖。如果目标的偏移量超出当前数据的末尾，则从当前数据的末尾到源的新写入数据的开头，将零字节填充符（BLOB）或空格（CLOB）写入目标LOB。</p>
                        <p>如果目标LOB超出目标LOB的当前长度，则扩展目标LOB以容纳新写入的数据。将此LOB扩展到4 GB以上是一个运行时错误。</p>
                        <p>尝试从未初始化的LOB进行复制也是错误的。</p>
                        <p>源LOB和目标LOB都必须属于同一类型。不能为任何一个定位器启用LOB缓冲。</p>
                        <p>要使临时LOB永久化，必须使用COPY语句将临时LOB明确复制为永久LOB。<code class="codeph">amt</code>变量表示要复制的最大数量。如果在复制指定的数量之前到达源LOB的末尾，则操作将终止而不会出现错误。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB859"></a><a id="LNPCB860"></a><a id="LNPCB861"></a><a id="LNPCB862"></a><a id="LNPCB863"></a><a id="LNPCB858"></a><div class="props_rev_3"><a id="GUID-4362D0D2-54BB-45EA-9810-2F31FB4FE843" name="GUID-4362D0D2-54BB-45EA-9810-2F31FB4FE843"></a><h4 id="LNPCB-GUID-4362D0D2-54BB-45EA-9810-2F31FB4FE843" class="sect4"><span class="enumeration_section">13.4.5</span>创建临时</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-4362D0D2-54BB-45EA-9810-2F31FB4FE843__GUID-CBAD86C4-E4E1-44A8-85DD-E4B8CF2A7C22">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>创建一个临时LOB。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4362D0D2-54BB-45EA-9810-2F31FB4FE843__GUID-0AD3CEAF-36A2-4D22-BAD8-F99821F0A7E1">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] LOB CREATE TEMPORARY： <span class="italic">src</span> END-EXEC。</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4362D0D2-54BB-45EA-9810-2F31FB4FE843__GUID-F4665663-15DF-4D80-8E9A-B5D23D2230D4">主机变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4362D0D2-54BB-45EA-9810-2F31FB4FE843__GUID-345A45A3-915B-45D6-AE32-454EF9DAD2CB">src（IN OUT）</p>
                        <p>在执行之前，当IN， <code class="codeph">src</code>是先前分配的LOB定位符时。
                        </p>
                        <p>执行后，当OUT， <code class="codeph">src</code>是一个LOB定位器，它将指向一个新的空临时LOB。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-4362D0D2-54BB-45EA-9810-2F31FB4FE843__GUID-9EF85B6A-8EE8-4838-BF65-A7E5D3355A78">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>成功执行后，定位器指向新创建的临时LOB，该临时LOB独立于表驻留在数据库服务器上。临时LOB为空，长度为零。</p>
                        <p>在会话结束时，释放所有临时LOB。对临时LOB的读取和写入永远不会通过缓冲区缓存。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB865"></a><a id="LNPCB866"></a><a id="LNPCB867"></a><a id="LNPCB868"></a><a id="LNPCB869"></a><a id="LNPCB864"></a><div class="props_rev_3"><a id="GUID-7C573474-BB16-4815-B2E9-6B05B333CD47" name="GUID-7C573474-BB16-4815-B2E9-6B05B333CD47"></a><h4 id="LNPCB-GUID-7C573474-BB16-4815-B2E9-6B05B333CD47" class="sect4"><span class="enumeration_section">13.4.6</span>禁用<span class="enumeration_section">缓冲</span></h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-7C573474-BB16-4815-B2E9-6B05B333CD47__GUID-DBC5700B-DB22-4D1C-813C-9E717BBDF40B">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>禁用LOB定位器的LOB缓冲。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7C573474-BB16-4815-B2E9-6B05B333CD47__GUID-6EA8D09F-3CD5-4AC1-8662-C90CED9ECA23">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] LOB DISABLE BUFFERING： <span class="italic">src</span> END-EXEC。</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7C573474-BB16-4815-B2E9-6B05B333CD47__GUID-4E4BD1D3-201E-42DB-B8E8-6C416502089E">主机变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7C573474-BB16-4815-B2E9-6B05B333CD47__GUID-BA9F9B76-43FA-4057-85B7-A5B45065E92E">src（IN OUT）</p>
                        <p>内部LOB定位器。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7C573474-BB16-4815-B2E9-6B05B333CD47__GUID-3DB1480B-FADB-459F-A50C-7F81D6A598AB">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>该语句不支持BFILE。后续的读取或写入不会通过LBS完成。</p>
                        <p><span class="bold">注意：</span>使用FLUSH BUFFER命令永久更改，因为DISABLE BUFFERING语句不会隐式刷新LOB缓冲子系统中所做的更改。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB871"></a><a id="LNPCB872"></a><a id="LNPCB873"></a><a id="LNPCB874"></a><a id="LNPCB875"></a><a id="LNPCB870"></a><div class="props_rev_3"><a id="GUID-74790F0A-067C-4C9A-B1CD-C8CBE84AF658" name="GUID-74790F0A-067C-4C9A-B1CD-C8CBE84AF658"></a><h4 id="LNPCB-GUID-74790F0A-067C-4C9A-B1CD-C8CBE84AF658" class="sect4"><span class="enumeration_section">13.4.7</span>启用<span class="enumeration_section">缓冲</span></h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-74790F0A-067C-4C9A-B1CD-C8CBE84AF658__GUID-DBB16D24-FFE5-473E-B672-B1697EC387C7">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>为LOB定位器启用LOB缓冲。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-74790F0A-067C-4C9A-B1CD-C8CBE84AF658__GUID-84454AA9-01F2-4316-A323-1FAE7C636476">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] LOB ENABLE BUFFERING： <span class="italic">src</span> END-EXEC。</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-74790F0A-067C-4C9A-B1CD-C8CBE84AF658__GUID-81230C07-C910-429F-81A0-62ECC444381D">主机变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-74790F0A-067C-4C9A-B1CD-C8CBE84AF658__GUID-23599CDF-1188-48F9-84DA-FF9F1176195C">src（IN OUT）</p>
                        <p>内部LOB定位器。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-74790F0A-067C-4C9A-B1CD-C8CBE84AF658__GUID-57C6CCF9-B2F0-43E2-A8F0-DB994B6EA238">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>该语句不支持BFILE。随后的读取和写入通过LBS完成。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB877"></a><a id="LNPCB878"></a><a id="LNPCB879"></a><a id="LNPCB880"></a><a id="LNPCB881"></a><a id="LNPCB882"></a><a id="LNPCB883"></a><a id="LNPCB876"></a><div class="props_rev_3"><a id="GUID-6D27FAFC-5B61-45AF-826C-EE7F12220DBC" name="GUID-6D27FAFC-5B61-45AF-826C-EE7F12220DBC"></a><h4 id="LNPCB-GUID-6D27FAFC-5B61-45AF-826C-EE7F12220DBC" class="sect4"><span class="enumeration_section">13.4.8</span>删除</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-6D27FAFC-5B61-45AF-826C-EE7F12220DBC__GUID-313A59DF-AF0B-400A-BD89-F2E880105AE3">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>从给定的偏移量开始擦除给定数量的LOB数据。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6D27FAFC-5B61-45AF-826C-EE7F12220DBC__GUID-6DD346DB-020B-4E6A-8F19-3A65FE31CA61">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] LOB ERASE：amt FROM：src [AT：src_offset] END-EXEC。</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6D27FAFC-5B61-45AF-826C-EE7F12220DBC__GUID-2110CA13-E7C4-4161-B05E-CE5445D9AF9A">主机变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6D27FAFC-5B61-45AF-826C-EE7F12220DBC__GUID-2902385D-34F2-4465-B636-E8AC72D70A0B">amt（IN OUT）</p>
                        <p>输入是要擦除的字节数或字符数。返回的输出是擦除的实际数字。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6D27FAFC-5B61-45AF-826C-EE7F12220DBC__GUID-5259D3F7-50A3-4121-9E61-6EC3857FCF44">src（IN OUT）</p>
                        <p>内部LOB定位器。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6D27FAFC-5B61-45AF-826C-EE7F12220DBC__GUID-98333A9C-6B83-45AB-B450-922F62D32AEB">src_offset（IN）</p>
                        <p>从LOB开始的偏移量，从1开始。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6D27FAFC-5B61-45AF-826C-EE7F12220DBC__GUID-4D5FC880-CD35-43B8-950A-CB4061262CB4">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>该语句不支持BFILE。</p>
                        <p>执行后， <span class="italic">amt</span>返回已擦除的实际字符数/字节数。如果在擦除所请求的字符/字节数之前达到LOB值的末尾，则实际数量和请求的数量将不同。如果LOB是空的<span class="italic">，AMT</span>将表明，0个字符/字节都被擦除。
                        </p>
                        <p>对于BLOB，擦除意味着零字节填充程序覆盖现有的LOB值。对于CLOB，擦除意味着空格会覆盖现有的LOB值。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB885"></a><a id="LNPCB886"></a><a id="LNPCB887"></a><a id="LNPCB884"></a><div class="props_rev_3"><a id="GUID-AF7F4B27-9400-4201-917F-23013E0657C3" name="GUID-AF7F4B27-9400-4201-917F-23013E0657C3"></a><h4 id="LNPCB-GUID-AF7F4B27-9400-4201-917F-23013E0657C3" class="sect4"><span class="enumeration_section">13.4.9</span>文件关闭全部</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-AF7F4B27-9400-4201-917F-23013E0657C3__GUID-42F234A2-A492-4052-920F-6B31980697A6">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>关闭当前会话中打开的所有BFILES。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AF7F4B27-9400-4201-917F-23013E0657C3__GUID-C6E96A00-787D-49F4-8464-9461AB9373E6">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] LOB FILE关闭所有END-EXEC。</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AF7F4B27-9400-4201-917F-23013E0657C3__GUID-931F80F7-C409-407C-B17B-2EA9FDF6BAC1">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>如果会话中的任何打开文件的闭包未正确处理，则可以使用FILE CLOSE ALL语句关闭会话中打开的所有文件，并从头开始恢复文件操作。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB889"></a><a id="LNPCB890"></a><a id="LNPCB891"></a><a id="LNPCB892"></a><a id="LNPCB893"></a><a id="LNPCB894"></a><a id="LNPCB895"></a><a id="LNPCB888"></a><div class="props_rev_3"><a id="GUID-50066F85-1DE1-457C-8861-79D3693A412C" name="GUID-50066F85-1DE1-457C-8861-79D3693A412C"></a><h4 id="LNPCB-GUID-50066F85-1DE1-457C-8861-79D3693A412C" class="sect4"><span class="enumeration_section">13.4.10</span>文件集</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-50066F85-1DE1-457C-8861-79D3693A412C__GUID-EEA9829F-03D1-452B-A802-B83DEE1E050B">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>在BFILE定位器中设置DIRECTORY别名和FILENAME。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-50066F85-1DE1-457C-8861-79D3693A412C__GUID-19573944-E07D-4E8A-BC06-DA6C61FF0E52">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] LOB FILE SET： <span class="italic">文件</span> DIRECTORY =： <span class="italic">alias</span> ，FILENAME =： <span class="italic">filename</span> END-EXEC。</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-50066F85-1DE1-457C-8861-79D3693A412C__GUID-B7DBD2F9-AB76-476B-9BD2-84400379BF5F">主机变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-50066F85-1DE1-457C-8861-79D3693A412C__GUID-E1027EB4-65F3-47E1-AB02-37DAA2B0754A">文件（IN OUT）</p>
                        <p>BFILE定位器，其中设置了DIRECTORY别名和FILENAME。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-50066F85-1DE1-457C-8861-79D3693A412C__GUID-F955CA90-35CC-4188-9E62-74D9387222E2">别名（IN）</p>
                        <p>要设置的DIRECTORY别名。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-50066F85-1DE1-457C-8861-79D3693A412C__GUID-A0CB3FD9-AA56-4BA6-8291-EF9F5ACA5074">文件名（IN）</p>
                        <p>要设置的FILENAME。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-50066F85-1DE1-457C-8861-79D3693A412C__GUID-E0D83241-1E47-4C2B-AD20-61E92CEB28B7">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>给定的BFILE定位器在此语句中使用之前必须首先进行ALLOCATEd。</p>
                        <p>必须提供DIRECTORY别名和FILENAME。</p>
                        <p>DIRECTORY别名的最大长度为128个字节。FILENAME的最大长度为255个字节。</p>
                        <p>支持与DIRECTORY别名和FILENAME属性一起使用的唯一外部数据类型是VARCHAR，VARCHAR2和CHARF。</p>
                        <p>将此语句与除外部LOB定位符之外的任何内容一起使用是错误的。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB897"></a><a id="LNPCB898"></a><a id="LNPCB899"></a><a id="LNPCB900"></a><a id="LNPCB901"></a><a id="LNPCB896"></a><div class="props_rev_3"><a id="GUID-CB0A00CE-3BC5-4E3B-B304-DDC4B46C1448" name="GUID-CB0A00CE-3BC5-4E3B-B304-DDC4B46C1448"></a><h4 id="LNPCB-GUID-CB0A00CE-3BC5-4E3B-B304-DDC4B46C1448" class="sect4"><span class="enumeration_section">13.4.11</span>冲洗缓冲器</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-CB0A00CE-3BC5-4E3B-B304-DDC4B46C1448__GUID-333DCFB0-5607-4970-B4C7-F45F41AB3AF9">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>将此LOB的缓冲区写入数据库服务器。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CB0A00CE-3BC5-4E3B-B304-DDC4B46C1448__GUID-E26574EE-B3F7-4337-A688-6D2CF62C1E6D">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] LOB FLUSH BUFFER：src [FREE] END-EXEC。</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CB0A00CE-3BC5-4E3B-B304-DDC4B46C1448__GUID-18C7CA7A-F14B-4E52-A581-A6CBD76A547F">主机变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CB0A00CE-3BC5-4E3B-B304-DDC4B46C1448__GUID-837D1FF6-9045-479D-A63D-84C9FF822CAC">src（IN OUT）</p>
                        <p>内部LOB定位器。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CB0A00CE-3BC5-4E3B-B304-DDC4B46C1448__GUID-8F126EA8-534F-41BE-9B53-DE518CB9A132">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>将缓冲区数据从输入定位器引用的LOB写入服务器中的数据库LOB。</p>
                        <p>必须已为输入LOB定位器启用LOB缓冲。</p>
                        <p>默认情况下，FLUSH操作不会释放缓冲区资源以重新分配到另一个缓冲的LOB操作。但是，如果要显式释放缓冲区，可以包含可选的FREE关键字以表示。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB903"></a><a id="LNPCB904"></a><a id="LNPCB905"></a><a id="LNPCB906"></a><a id="LNPCB907"></a><a id="LNPCB902"></a><div class="props_rev_3"><a id="GUID-284D7C30-A00F-4503-9F12-E4F723F76218" name="GUID-284D7C30-A00F-4503-9F12-E4F723F76218"></a><h4 id="LNPCB-GUID-284D7C30-A00F-4503-9F12-E4F723F76218" class="sect4"><span class="enumeration_section">13.4.12</span>免费临时</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-284D7C30-A00F-4503-9F12-E4F723F76218__GUID-0EFDD67A-C955-4390-9262-07E16FCAE7B8">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>释放LOB定位器的临时空间。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-284D7C30-A00F-4503-9F12-E4F723F76218__GUID-6F5B100B-83EA-4134-8B85-591968B6777E">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] LOB FREE TEMPORARY： <span class="italic">src</span> END-EXEC。</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-284D7C30-A00F-4503-9F12-E4F723F76218__GUID-4D717976-46DB-4391-9247-20DD8BEF58E4">主机变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-284D7C30-A00F-4503-9F12-E4F723F76218__GUID-21FC03D2-C766-452E-853C-5AB1EA3CE2DA">src（IN OUT）</p>
                        <p>LOB定位器指向临时LOB。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-284D7C30-A00F-4503-9F12-E4F723F76218__GUID-71044303-6D51-4360-A962-E21527E9CDDA">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>输入定位器必须指向临时LOB。输出定位器标记为未初始化，可以在后续LOB语句中使用。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB909"></a><a id="LNPCB910"></a><a id="LNPCB911"></a><a id="LNPCB912"></a><a id="LNPCB913"></a><a id="LNPCB914"></a><a id="LNPCB915"></a><a id="LNPCB916"></a><a id="LNPCB917"></a><a id="LNPCB908"></a><div class="props_rev_3"><a id="GUID-9A977BA5-64F6-4EAD-82A1-4FC2BCB03550" name="GUID-9A977BA5-64F6-4EAD-82A1-4FC2BCB03550"></a><h4 id="LNPCB-GUID-9A977BA5-64F6-4EAD-82A1-4FC2BCB03550" class="sect4"><span class="enumeration_section">13.4.13</span>从文件加载</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-9A977BA5-64F6-4EAD-82A1-4FC2BCB03550__GUID-DC7F73F2-AC88-4A19-8E5E-EB11A224036D">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>将全部或部分BFILE复制到内部LOB中。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9A977BA5-64F6-4EAD-82A1-4FC2BCB03550__GUID-929086E1-AA45-4C35-9076-63BA14F2691C">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] LOB LOAD： <span class="italic">amt</span> FROM FILE： <span class="italic">file</span> [AT： <span class="italic">src_offset</span> ] INTO： <span class="italic">dst</span> [AT： <span class="italic">dst_offset</span> ] END-EXEC。</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9A977BA5-64F6-4EAD-82A1-4FC2BCB03550__GUID-90BDC718-D26C-4DC2-AB6B-922FDB5E8009">主机变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9A977BA5-64F6-4EAD-82A1-4FC2BCB03550__GUID-B39F906E-E429-4D1B-9000-96E811FF9B32">amt（IN）</p>
                        <p>要加载的最大字节数。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9A977BA5-64F6-4EAD-82A1-4FC2BCB03550__GUID-669E29DA-D90A-42EE-8600-B600764F01BE">文件（IN OUT）</p>
                        <p>源BFILE定位器。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9A977BA5-64F6-4EAD-82A1-4FC2BCB03550__GUID-698139CA-DED6-4CB0-8CE9-91223292F707">src_offset（IN）</p>
                        <p>从文件开头偏移的字节数，从1开始。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9A977BA5-64F6-4EAD-82A1-4FC2BCB03550__GUID-11D27C55-030F-4CE0-BDC7-C1D24900CC77">dst（IN OUT）</p>
                        <p>目标LOB定位器，可以是BLOB，CLOB，是NCLOB。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9A977BA5-64F6-4EAD-82A1-4FC2BCB03550__GUID-DE1C46C1-D61C-420E-AB55-3B7BBEB663AE">dst_offset（IN）</p>
                        <p>从写入开始的目标LOB开始的字节数（对于BLOB）或字符（CLOB和NCLOB）。它从1开始。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9A977BA5-64F6-4EAD-82A1-4FC2BCB03550__GUID-6140EE00-9462-4032-BE3A-FD56A8D12A47">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>数据从源BFILE复制到目标内部LOB。将BFILE数据复制到CLOB或NCLOB时，不执行字符集转换。因此，BFILE数据必须已与数据库中的CLOB或NCLOB位于相同的字符集中。</p>
                        <p>源和目标LOB必须已存在。如果数据已存在于目的地的起始位置，则会被源数据覆盖。如果目标的起始位置超出当前数据的末尾，则将零字节填充符（BLOB）或空格（CLOB和NCLOB）写入目标LOB，从数据末尾到新写入数据的开头。资源。</p>
                        <p>如果目标LOB超出目标LOB的当前长度，则扩展目标LOB以容纳新写入的数据。将此LOB扩展到4千兆字节是错误的。</p>
                        <p>从未初始化的BFILE复制也是错误的。</p>
                        <p>amount参数表示要加载的最大数量。如果在加载指定的数量之前到达源BFILE的末尾，则操作将终止而不会出现错误。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB919"></a><a id="LNPCB920"></a><a id="LNPCB921"></a><a id="LNPCB922"></a><a id="LNPCB923"></a><a id="LNPCB918"></a><div class="props_rev_3"><a id="GUID-D9CF8AB7-F5FB-46E8-B8A9-EAC44221B85B" name="GUID-D9CF8AB7-F5FB-46E8-B8A9-EAC44221B85B"></a><h4 id="LNPCB-GUID-D9CF8AB7-F5FB-46E8-B8A9-EAC44221B85B" class="sect4"><span class="enumeration_section">13.4.14</span>开放</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-D9CF8AB7-F5FB-46E8-B8A9-EAC44221B85B__GUID-7288C099-5F05-4F9B-9C35-D19DBECF99B1">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>打开LOB或BFILE以进行读取或读/写访问。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D9CF8AB7-F5FB-46E8-B8A9-EAC44221B85B__GUID-8D7FA3B4-F00F-45E6-937E-D6CEA8E9512D">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] LOB OPEN： <span class="italic">src</span> [READ ONLY | READ WRITE] END-EXEC。</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D9CF8AB7-F5FB-46E8-B8A9-EAC44221B85B__GUID-712B3FAE-2A97-44B7-B78C-4DBDBFED8D80">主机变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D9CF8AB7-F5FB-46E8-B8A9-EAC44221B85B__GUID-F2E8496C-C644-4421-A26D-6C3C830DA04B">src（IN OUT）</p>
                        <p>LOB或BFILE的LOB定位器。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D9CF8AB7-F5FB-46E8-B8A9-EAC44221B85B__GUID-F74432D0-AD50-49C1-8B7D-C020988AD090">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>可以打开LOB或BFILE的默认模式是READ ONLY访问。</p>
                        <p>对于内部LOB，OPEN与LOB关联，而不是与定位器关联。将已打开的定位器分配给另一个定位器不会计为打开新的LOB。相反，两个定位器都引用相同的LOB。对于BFILE，OPEN与定位器相关联。</p>
                        <p>任何时候都只能打开32个LOB。第33个LOB打开时将返回错误。</p>
                        <p>不支持可写BFILE。因此，当您在READ WRITE模式下打开BFILE时，将返回错误。</p>
                        <p>在READ ONLY模式下打开LOB然后尝试写入LOB也是错误的。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB925"></a><a id="LNPCB926"></a><a id="LNPCB927"></a><a id="LNPCB928"></a><a id="LNPCB929"></a><a id="LNPCB930"></a><a id="LNPCB931"></a><a id="LNPCB932"></a><a id="LNPCB933"></a><a id="LNPCB934"></a><a id="LNPCB924"></a><div class="props_rev_3"><a id="GUID-889494EC-DF64-42DA-BBD3-BA2F09F35DB1" name="GUID-889494EC-DF64-42DA-BBD3-BA2F09F35DB1"></a><h4 id="LNPCB-GUID-889494EC-DF64-42DA-BBD3-BA2F09F35DB1" class="sect4"><span class="enumeration_section">13.4.15</span>阅读</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-889494EC-DF64-42DA-BBD3-BA2F09F35DB1__GUID-4EFD2855-5972-4880-8469-EC4B4CF9666E">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>将全部或部分LOB或BFILE读入缓冲区。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-889494EC-DF64-42DA-BBD3-BA2F09F35DB1__GUID-A739299D-2315-4C7E-A068-FAB92EA114B7">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] LOB READ：amt FROM： <span class="italic">src</span> [AT： <span class="italic">src_offset</span> ] INTO： <span class="italic">buffer</span> [WITH LENGTH： <span class="italic">buflen</span> ] END-EXEC。</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-889494EC-DF64-42DA-BBD3-BA2F09F35DB1__GUID-EEEA72B7-BDA1-4BDB-899F-75EA87B039BB">主机变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-889494EC-DF64-42DA-BBD3-BA2F09F35DB1__GUID-1BBAF731-9719-49BE-BE99-46B103E1B007">amt（IN OUT）</p>
                        <p>输入是要读取的字符数或字节数。输出是读取的实际字符数或字节数。</p>
                        <p>如果要读取的字节数大于缓冲区长度，则假定LOB在轮询模式下处于READ状态。在输入时，如果该值为0，则将以轮询模式从输入偏移量读取数据，直到LOB结束。</p>
                        <p>实际读取的字节数或字符数以<code class="codeph">amt.</code>形式返回<code class="codeph">amt.</code> 如果数据是以片段形式读取的，则<code class="codeph">amt</code>将始终包含最后一页读取的长度。
                        </p>
                        <p>当到达LOB的末尾时， <span class="italic">ORA-1403：未发现数据</span>错误。
                        </p>
                        <p>在轮询模式下读取时，应用程序必须重复调用LOB READ以读取更多LOB片段，直到不再有数据为止。使用WHENEVER指令中的NOT FOUND条件控制轮询模式的使用，以捕获ORA-1403错误。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-889494EC-DF64-42DA-BBD3-BA2F09F35DB1__GUID-E38AE41C-6343-476E-9BD0-B29147143F82">src（IN）</p>
                        <p>LOB或BFILE定位器。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-889494EC-DF64-42DA-BBD3-BA2F09F35DB1__GUID-AA2F2D93-2B64-42A4-B4FA-1DE741164984">src_offset（IN）</p>
                        <p>这是从LOB值的开头到开始读取的绝对偏移量。对于字符LOB，它是从LOB开始的字符数。对于二进制LOB或BFILE，它是字节数。第一个位置是1。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-889494EC-DF64-42DA-BBD3-BA2F09F35DB1__GUID-16D17CEF-0390-4ED2-BBE0-0B83759C99D1">缓冲区（IN OUT）</p>
                        <p>一个缓冲区，LOB数据将被读入其中。缓冲区的外部数据类型仅限于几种类型，具体取决于源LOB的类型。缓冲区的最大长度取决于用于存储LOB值的外部数据类型。<a id="d79028e2361" class="indexterm-anchor"></a>下表总结了合法的外部数据类型及其按源LOB类型分类的相应最大长度：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-889494EC-DF64-42DA-BBD3-BA2F09F35DB1__GUID-69796C34-F48B-433B-B291-B6467C69B977">
                        <p class="titleintable">表13-2源LOB和预编译器数据类型</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="源LOB和预编译器数据类型" width="100%" border="1" summary="q" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="11%" id="d79028e2378">外部LOB（3）</th>
                                 <th align="left" valign="bottom" width="17%" id="d79028e2385">内部LOB</th>
                                 <th align="left" valign="bottom" width="24%" id="d79028e2388">预编译器外部数据类型</th>
                                 <th align="left" valign="bottom" width="17%" id="d79028e2391">预编译器最大长度（4）</th>
                                 <th align="left" valign="bottom" width="18%" id="d79028e2398">PL / SQL数据类型</th>
                                 <th align="left" valign="bottom" width="14%" id="d79028e2401">PL / SQL最大长度</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d79028e2406" headers="d79028e2378 ">
                                    <p></p>
                                    <p></p>
                                    <p></p>
                                    <p>BFILE</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d79028e2406 d79028e2385 ">
                                    <p>BLOB</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d79028e2406 d79028e2388 ">
                                    <p>生的</p>
                                    <p>VARRAW</p>
                                    <p>LONG RAW</p>
                                    <p>LONG VARRAW</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d79028e2406 d79028e2391 ">
                                    <p>65535</p>
                                    <p>65533</p>
                                    <p>2147483647</p>
                                    <p>2147483643</p>
                                 </td>
                                 <td align="left" valign="top" width="18%" headers="d79028e2406 d79028e2398 ">
                                    <p>生的</p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d79028e2406 d79028e2401 ">
                                    <p>32767</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d79028e2440" headers="d79028e2378 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d79028e2440 d79028e2385 ">
                                    <p>CLOB</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d79028e2440 d79028e2388 ">
                                    <p>VARCHAR2</p>
                                    <p>VARCHAR</p>
                                    <p>LONG VARCHAR</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d79028e2440 d79028e2391 ">
                                    <p>65535</p>
                                    <p>65533</p>
                                    <p>2147483643</p>
                                 </td>
                                 <td align="left" valign="top" width="18%" headers="d79028e2440 d79028e2398 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d79028e2440 d79028e2401 ">
                                    <p>32767</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d79028e2467" headers="d79028e2378 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d79028e2467 d79028e2385 ">
                                    <p>NCLOB</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d79028e2467 d79028e2388 ">
                                    <p>NVARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d79028e2467 d79028e2391 ">
                                    <p>4000</p>
                                 </td>
                                 <td align="left" valign="top" width="18%" headers="d79028e2467 d79028e2398 ">
                                    <p>NVARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d79028e2467 d79028e2401 ">
                                    <p>4000</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p class="tablefootnote"><sup class="tablefootnote">脚注3显示的</sup>任何外部数据类型都可以与BFILES一起使用。</p>
                     <p class="tablefootnote"><sup class="tablefootnote">脚注4</sup>长度以字节为单位，而不是字符。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-889494EC-DF64-42DA-BBD3-BA2F09F35DB1__GUID-910A015C-7182-4061-8829-535EE9AE46B7">buflen（IN）</p>
                        <p>指定给定缓冲区的长度，否则无法确定。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-889494EC-DF64-42DA-BBD3-BA2F09F35DB1__GUID-DA409537-1CD0-4EB9-B4CA-DC88906AF441">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>BFILE必须已存在于数据库服务器上，并且必须已使用输入定位器打开。数据库必须具有读取文件的权限，并且用户必须具有该目录的读取权限。</p>
                        <p>尝试从未初始化的LOB或BFILE读取是错误的。</p>
                        <p>缓冲区的长度以这种方式确定：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>从<code class="codeph">buflen</code> ，当出现WITH LENGTH子句时。
                              </p>
                           </li>
                           <li>
                              <p>在没有WITH LENGTH子句的情况下，根据“处理字符数据”中的规则，通过在OUT模式下处理缓冲区主机变量来确定长度。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="datatypes-and-host-variables.html#GUID-7DFCC56E-3326-4BE0-B808-60AF4F50D39B">处理字符数据</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCB936"></a><a id="LNPCB937"></a><a id="LNPCB938"></a><a id="LNPCB939"></a><a id="LNPCB940"></a><a id="LNPCB941"></a><a id="LNPCB935"></a><div class="props_rev_3"><a id="GUID-3CD6A848-4CC9-402F-B376-DFF772FF59F2" name="GUID-3CD6A848-4CC9-402F-B376-DFF772FF59F2"></a><h4 id="LNPCB-GUID-3CD6A848-4CC9-402F-B376-DFF772FF59F2" class="sect4"><span class="enumeration_section">13.4.16</span> TRIM</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-3CD6A848-4CC9-402F-B376-DFF772FF59F2__GUID-A206C9AA-3874-4A0F-929C-18644955B74B">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>截断LOB值。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3CD6A848-4CC9-402F-B376-DFF772FF59F2__GUID-1703977C-86A0-49AD-A911-F69F42EAC2FE">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] LOB TRIM： <span class="italic">src</span> TO： <span class="italic">newlen</span> END-EXEC。</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3CD6A848-4CC9-402F-B376-DFF772FF59F2__GUID-C107EAE0-E223-4B74-ADDB-9C651F58B116">主机变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3CD6A848-4CC9-402F-B376-DFF772FF59F2__GUID-EA46529E-CB0E-417F-A1BB-6AF8B2BD1689">src（IN OUT）</p>
                        <p>内部LOB的LOB定位器。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3CD6A848-4CC9-402F-B376-DFF772FF59F2__GUID-FAB9934A-B58E-442B-B502-0484F16C8D1E">纽伦（印第安纳州）</p>
                        <p>LOB值的新长度。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3CD6A848-4CC9-402F-B376-DFF772FF59F2__GUID-E04C7224-F889-4AEA-B95E-FC51268F06DC">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>本声明不适用于BFILES。新长度不能大于当前长度，否则返回错误。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB943"></a><a id="LNPCB944"></a><a id="LNPCB945"></a><a id="LNPCB946"></a><a id="LNPCB947"></a><a id="LNPCB948"></a><a id="LNPCB949"></a><a id="LNPCB950"></a><a id="LNPCB951"></a><a id="LNPCB942"></a><div class="props_rev_3"><a id="GUID-CFBD67AB-5DFC-418D-87E6-BBDF9FA243F0" name="GUID-CFBD67AB-5DFC-418D-87E6-BBDF9FA243F0"></a><h4 id="LNPCB-GUID-CFBD67AB-5DFC-418D-87E6-BBDF9FA243F0" class="sect4"><span class="enumeration_section">13.4.17</span>写</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-CFBD67AB-5DFC-418D-87E6-BBDF9FA243F0__GUID-938FD512-0746-451F-8714-465BAC63132C">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>将缓冲区的内容写入LOB。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CFBD67AB-5DFC-418D-87E6-BBDF9FA243F0__GUID-48A24E43-2520-4131-841F-1A25A9D647C5">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] LOB WRITE [APPEND] [FIRST |下一步|最后| ONE]： <span class="italic">amt</span> FROM： <span class="italic">buffer</span> [WITH LENGTH： <span class="italic">buflen</span> ] INTO： <span class="italic">dst</span> [AT： <span class="italic">dst_offset</span> ] END-EXEC。</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CFBD67AB-5DFC-418D-87E6-BBDF9FA243F0__GUID-9FEFE4CD-0C63-48FE-A98F-6699CA86842A">主机变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CFBD67AB-5DFC-418D-87E6-BBDF9FA243F0__GUID-A186A84C-124A-4C54-9E3D-AB716EB526E4">amt（IN OUT）</p>
                        <p>输入是要写入的字符数或字节数。</p>
                        <p>输出是写入的实际字符数或字节数。</p>
                        <p>使用轮询方法写入时， <code class="codeph">amt</code>将返回执行WRITE LAST后为执行WRITE语句而写入的累计总长度。如果WRITE语句被中断，则<code class="codeph">amt</code>将是未定义的。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CFBD67AB-5DFC-418D-87E6-BBDF9FA243F0__GUID-C4C96449-7107-4D56-8A14-B3FB4FF4144E">缓冲区（IN）</p>
                        <p>用于写入LOB数据的缓冲区。有关数据类型的长度，请参见“READ”。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CFBD67AB-5DFC-418D-87E6-BBDF9FA243F0__GUID-3086CDD1-5626-4C2A-BEB8-1961547C411B">dst（IN OUT）</p>
                        <p>LOB定位器。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CFBD67AB-5DFC-418D-87E6-BBDF9FA243F0__GUID-B6616BB6-E3D8-439B-8DB9-406A15C977BA">dst_offset（IN）</p>
                        <p>从LOB开头（从1开始计算）的偏移量，以CLOB和NCLOB的字符为单位，以BLOB为单位。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CFBD67AB-5DFC-418D-87E6-BBDF9FA243F0__GUID-C7561867-513A-4EF9-8D6D-4729D3C54931">buflen（IN）</p>
                        <p>无法以任何其他方式计算的缓冲区长度。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-CFBD67AB-5DFC-418D-87E6-BBDF9FA243F0__GUID-FEA7A840-4D80-4250-B261-B89EE744BBE1">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>如果LOB数据已存在，则会被存储在缓冲区中的数据覆盖。如果指定的偏移量超出了当前LOB中数据的末尾，则将零字节填充符或空格插入到LOB中。</p>
                        <p>在WRITE语句中指定关键字APPEND会导致数据自动写入LOB的末尾。指定APPEND时，假定目标偏移量是LOB的结尾。在WRITE语句中使用APPEND选项时指定目标偏移量是错误的。</p>
                        <p>缓冲区可以整体写入LOB（使用默认的ONE方向），也可以使用标准轮询方法逐段提供。</p>
                        <p>通过使用FIRST开始轮询，然后使用NEXT编写后续部分。LAST关键字用于写入终止写入的最终部分。</p>
                        <p>使用这种分段写入模式，如果片段具有不同的大小和不同的位置，则缓冲区和长度在每次调用中可以是不同的。</p>
                        <p>如果传递给Oracle的数据总量小于执行所有写入后<code class="codeph">amt</code>参数指定的数量，则会产生错误。
                        </p>
                        <p>相同的规则适用于确定缓冲区长度，如READ语句中所示。请参阅“READ”。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="large-objects-LOBs.html#GUID-889494EC-DF64-42DA-BBD3-BA2F09F35DB1">读</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCB953"></a><a id="LNPCB954"></a><a id="LNPCB955"></a><a id="LNPCB956"></a><a id="LNPCB957"></a><a id="LNPCB958"></a><a id="LNPCB959"></a><a id="LNPCB960"></a><a id="LNPCB961"></a><a id="LNPCB952"></a><div class="props_rev_3"><a id="GUID-21CC05FA-CD63-46CD-8271-7DD342C05582" name="GUID-21CC05FA-CD63-46CD-8271-7DD342C05582"></a><h4 id="LNPCB-GUID-21CC05FA-CD63-46CD-8271-7DD342C05582" class="sect4"><span class="enumeration_section">13.4.18</span>描述</h4>
                  <div>
                     <div class="section">
                        <p class="subhead3" id="GUID-21CC05FA-CD63-46CD-8271-7DD342C05582__GUID-13B27D27-D185-49EC-9CBB-675798491BB6">目的</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>这是一个等同于几个OCI和PL / SQL语句的语句。使用LOB DESCRIBE SQL语句从LOB检索属性。 LOB DESCRIBE语句具有以下格式：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-21CC05FA-CD63-46CD-8271-7DD342C05582__GUID-F025AF5D-69BF-4775-A1D2-89F88092CBAF">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">EXEC SQL [AT [：] <span class="italic">database</span> ] LOB DESCRIBE： <span class="italic">src</span> GET <span class="italic">attribute1</span> [{， <span class="italic">attributeN</span> }] INTO： <span class="italic">hv1</span> [[INDICATOR]： <span class="italic">hv_ind1</span> ] [{，： <span class="italic">hvN</span> [[INDICATOR]： <span class="italic">hv_indN</span> ]}] END-EXEC。</pre><p>其中属性可以是以下任何选项：</p><pre class="oac_no_warn" dir="ltr">CHUNKSIZE |目录| FILEEXISTS | FILENAME | ISOPEN | ISTEMPORARY |长度</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-21CC05FA-CD63-46CD-8271-7DD342C05582__GUID-6BBB3A92-3BEA-4FCB-9433-8CBB1B98B2A7">主机变量</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-21CC05FA-CD63-46CD-8271-7DD342C05582__GUID-A9A48B26-1C5B-4B19-B99F-FD6E12FB77A2">src（IN）</p>
                        <p>内部或外部LOB的LOB定位器。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-21CC05FA-CD63-46CD-8271-7DD342C05582__GUID-EC6F5C5F-B121-4EAC-96F1-FEA3D3715B78">hv1 ... hvN（OUT）</p>
                        <p>按属性名称列表中指定的顺序接收属性值的主变量。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-21CC05FA-CD63-46CD-8271-7DD342C05582__GUID-43FD354C-1250-45E6-98FE-B9E9776DC78B">hv_ind1 ... hv_indN（OUT）</p>
                        <p>可选的主机变量，按属性名称列表的顺序接收指示符NULL状态。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>下表描述了与之关联的LOB以及应该读取它们的COBOL类型的属性：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformalwide" id="GUID-21CC05FA-CD63-46CD-8271-7DD342C05582__GUID-A02641D0-117A-4AF8-898E-A8B06184B37E">
                        <p class="titleintable">表13-3 LOB属性</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="LOB属性" width="100%" border="1" summary="q" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="19%" id="d79028e2840">LOB属性</th>
                                 <th align="left" valign="bottom" width="54%" id="d79028e2843">属性描述</th>
                                 <th align="left" valign="bottom" width="15%" id="d79028e2846">限制</th>
                                 <th align="left" valign="bottom" width="12%" id="d79028e2849">COBOL类型</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d79028e2854" headers="d79028e2840 ">
                                    <p>CHUNKSIZE <a id="d79028e2857" class="indexterm-anchor"></a> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="54%" headers="d79028e2854 d79028e2843 ">
                                    <p>给定表空间块的空间的最佳量（以字节为单位表示BLOB和CLOB / NCLOB的字符），用于存储LOB值。块大小不固定，并且基于可用块大小的最大可能值用于存储。如果在同一页面或一组页面上发出多个WRITE请求，则只有在提交时才将数据写入磁盘，并将其视为单个修改。这允许以更大的块大小写入数据。</p>
                                 </td>
                                 <td align="left" valign="top" width="15%" headers="d79028e2854 d79028e2846 ">
                                    <p>仅限BLOB，CLOB和NCLOB</p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d79028e2854 d79028e2849 ">
                                    <p>PIC S9（9）COMP</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d79028e2872" headers="d79028e2840 ">
                                    <p>目录<a id="d79028e2875" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="54%" headers="d79028e2872 d79028e2843 ">
                                    <p>BFILE的DIRECTORY别名的名称。长度n介于1到128个字节之间。在图片中使用该长度。</p>
                                 </td>
                                 <td align="left" valign="top" width="15%" headers="d79028e2872 d79028e2846 ">
                                    <p>仅限文件LOB</p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d79028e2872 d79028e2849 ">
                                    <p>PIC X（n）[VARYING]</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d79028e2889" headers="d79028e2840 ">
                                    <p>文件已存在<a id="d79028e2892" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="54%" headers="d79028e2889 d79028e2843 ">
                                    <p>确定服务器的操作系统文件系统上是否存在BFILE。当FILEEXISTS非零时，它是真的;当它等于0时为false。</p>
                                 </td>
                                 <td align="left" valign="top" width="15%" headers="d79028e2889 d79028e2846 ">
                                    <p>仅限文件LOB</p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d79028e2889 d79028e2849 ">
                                    <p>PIC S9（9）COMP</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d79028e2906" headers="d79028e2840 ">
                                    <p>文件名<a id="d79028e2909" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="54%" headers="d79028e2906 d79028e2843 ">
                                    <p>BFILE的名称。长度n介于1到255个字节之间。在图片中使用该长度。</p>
                                 </td>
                                 <td align="left" valign="top" width="15%" headers="d79028e2906 d79028e2846 ">
                                    <p>仅限文件LOB</p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d79028e2906 d79028e2849 ">
                                    <p>PIC X（n）[VARYING]</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d79028e2923" headers="d79028e2840 ">
                                    <p>开了<a id="d79028e2926" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="54%" headers="d79028e2923 d79028e2843 ">
                                    <p>对于BFILE，如果从未在OPEN语句中使用输入BFILE定位符，则此定位器认为BFILE不会打开。但是，不同的BFILE定位器可能已打开BFILE。可以使用不同的定位器在同一个BFILE上执行多个OPEN。对于LOB，如果不同的定位器打开LOB，则输入定位器仍然认为LOB是OPEN。ISOPEN在非零时是正确的;当它等于0时为false。</p>
                                 </td>
                                 <td align="left" valign="top" width="15%" headers="d79028e2923 d79028e2846 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d79028e2923 d79028e2849 ">
                                    <p>PIC S9（9）COMP</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d79028e2940" headers="d79028e2840 ">
                                    <p>方法isTemporary<a id="d79028e2943" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="54%" headers="d79028e2940 d79028e2843 ">
                                    <p>确定输入LOB定位符是否引用临时LOB。ISTEMPORARY在非零时是真的;当它等于0时为false。</p>
                                 </td>
                                 <td align="left" valign="top" width="15%" headers="d79028e2940 d79028e2846 ">
                                    <p>仅限BLOB，CLOB和NCLOB</p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d79028e2940 d79028e2849 ">
                                    <p>PIC S9（9）COMP</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d79028e2957" headers="d79028e2840 ">
                                    <p>长度<a id="d79028e2960" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="54%" headers="d79028e2957 d79028e2843 ">
                                    <p>BLOB和BFILE的长度，以字节为单位，CLOB和NCLOB以字符为单位。对于BFILE，长度包括EOF（如果存在）。空内部LOB的长度为零。未初始化的LOB / BFILE具有未定义的长度。</p>
                                 </td>
                                 <td align="left" valign="top" width="15%" headers="d79028e2957 d79028e2846 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d79028e2957 d79028e2849 ">
                                    <p>PIC 9（9）COMP</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-21CC05FA-CD63-46CD-8271-7DD342C05582__GUID-7629835B-EDED-4A04-B5FB-36BD39126CBF">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>指标变量应声明为PIC S9（4）COMP。执行完成后，SQLERRD（3）包含无错检索的属性数。如果存在执行错误，则发生它的属性比SQLERRD（3）的内容多一个。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-21CC05FA-CD63-46CD-8271-7DD342C05582__GUID-44F7E539-F124-445D-8AF6-EC58F63E7558">DESCRIBE示例</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>这是一个简单的Pro * COBOL示例，它提取给定BFILE的DIRECTORY和FILENAME属性：</p><pre class="oac_no_warn" dir="ltr">...01 A-BFILE SQL-BFILE。 01目录PIC X（30）变化。 01 FILENAME PIC X（30）变化。 01 D-IND PIC S9（4）COMP。 01 F-IND PIC S9（4）COMP。 01 FEXISTS PIC S9（9）COMP。 01 ISOPN PIC S9（9）COMP。...
</pre><p>最后，从某个LOB表中选择一个BFILE定位器并执行DESCRIBE：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL ALLOCATE：A-BFILE END-EXEC。 EXEC SQL INSERT INTO lob_table（a_bfile）VALUES（BFILENAME（'lob.dir'，'image.gif'））END-EXEC。 EXEC SQL SELECT a_bfile INTO：A-BFILE FROM lob_table WHERE ...END-EXEC。 EXEC SQL DESCRIBE：A-BFILE获取目录，文件名，FILEEXISTS，ISOPEN INTO：目录：D-IND，：文件名：F-IND，FEXISTS，ISOPN ND-EXEC。</pre><p>指示符变量仅对DIRECTORY和FILENAME属性有效。这些属性是字符串，如果用于保存其值的主机变量缓冲区不够大，则其值可能会被截断。发生截断时，指标的值将设置为属性的原始长度。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB962"></a><div class="props_rev_3"><a id="GUID-35E01A34-6DD5-4D82-BE5E-4DA0BEB48A3B" name="GUID-35E01A34-6DD5-4D82-BE5E-4DA0BEB48A3B"></a><h4 id="LNPCB-GUID-35E01A34-6DD5-4D82-BE5E-4DA0BEB48A3B" class="sect4"><span class="enumeration_section">13.4.19</span>使用轮询方法进行读取和写入</h4>
                  <div>
                     <div class="section">
                        <p>以下是使用READ和轮询方法的概述：</p>
                        <p>通过在第一个LOB READ中将数量设置为零（或将数量设置为要读取的总数据的大小）来启动读取轮询。在这种情况下，该数量首先设置为零，省略了详细信息：</p><pre class="oac_no_warn" dir="ltr">EXEC SQL ALLOCATE：CLOB1 END-EXEC。 EXEC SQL WHENEVER未找到GOTO END-OF-CLOB END-EXEC。 EXEC SQL SELECT A_CLOB INTO：CLOB1 FROM LOB_TABLE WHERE ...END-EXEC。移动0到AMT。 EXEC SQL LOB READ：AMT FROM：VLOB1 AT：OFFSET INTO：BUFFER END-EXEC。 READ-LOOP。 EXEC SQL LOB READ：AMT FROM：CLOB1 INTO BUFFER $ END-EXEC。去阅读循环。 END-OF-CLOB。EXEC SQL WHENEVER NOT FOUND CONTINUE END-EXEC。 EXEC SQL FREE：CLOB1 END-EXEC。</pre><p>以下代码大纲将数据从缓冲区写入内部CLOB。初始写入语句中的AMT值（16个字符）应该是您要写入的整个数据的长度。缓冲区长度为5个字符。</p>
                        <p>如果在初始读取中读取EOF，则执行LOB WRITE ONE。如果没有，请使用LOB WRITE FIRST缓冲区开始轮询。读取数据，并对输出执行LOB WRITE NEXT。LOB WRITE NEXT不需要偏移，因为数据是在最后一次写入结束时写入的。读取EOF后，跳出读取循环并执行LOB WRITE LAST。返回的金额必须等于初始金额值（16）。</p><pre class="oac_no_warn" dir="ltr">16点到16点。执行READ-NEXT-RECORD。将INREC推向BUFFER-ARR。移动5到BUFFER-LEN。 IF（END-OF-FILE =“Y”）EXEC SQL LOB WRITE ONE：AMT FROM：BUFFER IN到CLOB1 AT：OFFSET END-EXEC。执行显示-CLOB ELSE EXEC SQL LOB写入：AMT FROM：BUFFER INTO：CLOB1 AT：OFFSET END-EXEC。执行READ-NEXT-RECORD。执行WRITE-TO-CLOB直到文件结束=“Y”。将INREC推向BUFFER-ARR。移动1到BUFFER-LEN。 EXEC SQL LOB WRITE LAST：AMT FROM：BUFFER INTO：CLOB1 END-EXEC。执行DISPLAY-CLOB。 ...WRITE-TO-CLOB。将INREC推向BUFFER-ARR。移动5到BUFFER-LEN。 EXEC SQL LOB WRITE NEXT：AMT FROM：BUFFER INTO：CLOB1 END-EXEC。执行READ-NEXT RECORD。 READ-NEXT-RECORD。向INREC移动空间。读取INFIFILE NEXT RECORD结束时将“Y”移动到文件结尾。 ...</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="LNPCB963"></a><div class="props_rev_3"><a id="GUID-F7E1C804-7A87-4903-B8F4-B573B32E5C77" name="GUID-F7E1C804-7A87-4903-B8F4-B573B32E5C77"></a><h3 id="LNPCB-GUID-F7E1C804-7A87-4903-B8F4-B573B32E5C77" class="sect3"><span class="enumeration_section">13.5</span> LOB示例程序：LOBDEMO1。PCO</h3>
               <div>
                  <p>LOBDEMO1。PCO程序说明了几个LOB嵌入式SQL语句。源代码位于您的<code class="codeph">demo</code>目录中。该应用程序使用名为<code class="codeph">license_table</code>的表，其<code class="codeph">license_table</code>社会安全号，名称和包含驱动违规行为的文本的CLOB。对典型机动车部门的几个简化的SQL操作进行了建模。
                  </p>
                  <p>可能的行动是：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>添加新记录。</p>
                     </li>
                     <li>
                        <p>按社会安全号码列出记录。</p>
                     </li>
                     <li>
                        <p>在给定社会安全号码的情况下列出记录中的信息。</p>
                     </li>
                     <li>
                        <p>将新的流量违规附加到现有CLOB的内容。</p>
                     </li>
                  </ul>
                  <p>这是LOBDEMO1的列表。PCO：</p><pre class="oac_no_warn" dir="ltr">************************************************** ******************* * LOB演示1：DMV数据库* * * *情景：* * * *我们考虑用于存储驱动程序* *许可证的数据库示例。许可证存储为包含* *三列的表的行：一个人的sss号，他/她的名字以及在其许可证中找到的信息的* *文本摘要。* * * * sss号码和名称是唯一的社会安全号码* *和个人姓名。文本摘要是关于个人的* *信息的摘要，包括他的驾驶记录，* *可以任意长，并且可以包含关于该人的驾驶能力的评论和数据* *。* * * *应用程序概述：* * * *此示例演示了Pro * COBOL客户端如何处理* *新的LOB数据类型。展示了访问* *和将lobs存储到表中或从表中存储lobs的机制。* * * *运行演示：* * * * 1。在服务器管理器* * 2中执行脚本lobdemo1.sql。使用Pro * COBOL * * procob lobdemo1 * * 3进行预编译。编译/链接（此步骤是特定于平台的）* * * * lobdemo1.sql包含以下SQL语句：* * * * connect scott / tiger; * * * * drop table license_table; * * * * create table license_table（* * sss char（9），* * name varchar2（50），* * txt_summary clob）; * * * *插入license_table * *值（'971517006'，'Dennis Kernighan'，* *'穿着亮橙色衬衫'）; * * * *插入license_table * *值（'555001212'，'Eight H. Number'，* *'在影响下驾驶'）; * * * *插入license_table * *值（'010101010'，'P。Doughboy'，* *'冒充Oracle员工'）; * * * *插入license_table * *值（'555377012'，'Calvin N. Hobbes'，* *'在影响下驾驶'）; * * * *主程序提供可* *执行的操作菜单。输入数字5（退出）选项* *后程序停止。根据输入，此主程序调用* *相应的嵌套程序来执行所选操作。* * * ********************************************* **********************身份识别部门。 PROGRAM-ID。LOBDEMO1。数据部门。工作储存部分。 01 USERNAME PIC X（5）。01 PASSWD PIC X（5）。01 CHOICE PIC 9 VALUE 0。01 SSS PIC X（9）。01 SSSEXISTS PIC 9 VALUE ZERO。 01 LICENSE-TXT SQL-CLOB。01 NEWCRIME PIC X（35）变化。 01 SSSCOUNT PIC S9（4）COMP。 01 THE-STRING PIC X（200）变化。 01 TXT-LENGTH PIC S9（9）COMP。 01犯罪。 05 FILLER PIC X（35）价值“在影响下驾驶”。05 FILLER PIC X（35）价值“侠盗猎车手”。05 FILLER PIC X（35）VALUE“无驾驶驾驶”。05 FILLER PIC X（35）值“假冒Oracle员工”。05 FILLER PIC X（35）VALUE“穿着亮橙色衬衫”。01犯罪分子重新犯罪。 05犯罪PIC X（35）发生5次。 01 CRIME-INDEX PIC 9。01 TXT-LEN PIC S9（9）COMP。 01 CRIME-LEN PIC S9（9）COMP。 01 NAME1 PIC X（50）变化。 01 NEWNAME PIC X（50）。************************************************** ******************* EXEC SQL包含SQLCA END-EXEC。程序部门。 A000控制部分。 ************************************************** ******************* * A000-CONTROL *整体控制部分*********************** ********************************************** A000-CNTRL。执行SQL WHENEVER SQLERROR DO PERFORM Z900-SQLERROR END-EXEC。执行B000-LOGON。执行C000-MAIN直到选择= 5。执行D000-LOGOFF。 A000-EXIT。停止运行。 B000-LOGON部分。 ************************************************** ******************* * B000-LOGON *登录数据库。************************************************** ******************* B000-LGN。显示'************************************************ **”。显示'*欢迎来到DMV数据库*'。显示'************************************************ **”。将“scott”移至USERNAME。移动“虎”到PASSWD。 EXEC SQL CONNECT：USERNAME IDENTIFIED BY：PASSWD END-EXEC。显示“”。显示“连接到许可证数据库帐户：”，USERNAME，“/”，PASSWD。显示“”。B000-EXIT。出口。 C000-MAIN部分。 ************************************************** ******************* * C000-MAIN *显示主菜单和操作请求******************* ************************************************** C000-MN。显示“”。显示“许可证选项：”。显示“1。按SSS号列出可用记录“。显示“2。获取有关特定记录的信息“。显示“3。将犯罪添加到记录中“。显示“4。将新记录插入数据库“。显示“5。放弃”。显示“”。移动零选择。执行Z300-ACCEPT-CHOICE直到选择&lt;6和选择&gt; 0。IF（选择= 1）执行C100-LIST-RECORDS。 IF（选择= 2）执行C200-GET-RECORD。 IF（选择= 3）执行C300-ADD-CRIME。 IF（选择= 4）执行C400-NEW-RECORD。 C000-EXIT。出口。 C100-LIST-RECORDS部分。 ************************************************** ******************* * C100-LIST-RECORDS *从LICENCSE_TABLE *中选择社会安全号码并显示清单************* ************************************************** ****** C100-LST。 EXEC SQL DECLARE SSS_CURSOR CURSOR用于从LICENSE_TABLE END-EXEC中选择SSS。 EXEC SQL OPEN SSS_CURSOR END-EXEC。显示“可用记录：”。执行C110-DISPLAY-RECORDS直到SQLCODE = 1403。EXEC SQL CLOSE SSS_CURSOR END-EXEC。 C100-EXIT。出口。 C110-显示记录部分。 ************************************************** ******************* * C110-DISPLAY-RECORDS *从光标中取出下一条记录并显示。************************************************** ******************* C110-DSPLY。 EXEC SQL FETCH SSS_CURSOR INTO：SSS END-EXEC。如果SQLCODE = 0那么显示SSS。 C110-EXIT。出口。 C200-GET-RECORD部分。 ************************************************** ***************** * C200-GET-RECORD *分配全局clob LICENSE-TXT然后选择*与客户提供的* sss对应的名称和文本。然后它调用Z200-PRINTCRIME打印信息并*释放clob。************************************************** ***************** C200-GTRECRD。执行Z100-GET-SSS。 IF（SSSEXISTS = 1）EXEC SQL ALLOCATE：LICENSE-TXT END-EXEC EXEC SQL SELECT NAME，TXT_SUMMARY INTO：NAME1，：LICENSE-TXT FROM LICENSE_TABLE SSS =：SSS END-EXEC DISPLAY“======== ==========================================  - “====== ==================“显示”“显示”名称：“，NAME1-ARR，”SSS：“，SSS显示”“执行Z200-PRINTCRIME显示”“显示” ================================================== - “========================”EXEC SQL FREE：LICENSE-TXT END-EXEC ELSE显示“未找到SSS编号”。C200-EXIT。出口。 C310-GETNEWCRIME部分。 ************************************************** ***************** * C310-GETNEWCRIME *向用户提供可能的犯罪列表，并*在变量* NEWCRIME中存储用户的正确答案。 ************************************************** ***************** C310-GTNWCRM。执行SQL WHENEVER SQLERROR CONTINUE END-EXEC。显示“”。显示“从以下选项中选择：”。执行C311-显示犯罪的犯罪指数从1比1到犯罪指数&gt; 5。移动零选择。执行Z300-ACCEPT-CHOICE直到选择&lt;6和选择&gt; 0。将犯罪（选择）转移到NEWCRIME-ARR。移动35到NEWCRIME-LEN。移动零选择。 C310-EXIT。出口。 C311-DISPLAY-CRIME SECTION。 ************************************************** ***************** * C311-DISPLAY-CRIME *显示犯罪表的一个元素******************* ************************************************ C311- DSPLYCRM。显示“（”，CRIME-INDEX，“）”，CRIME（CRIME-INDEX）。C311-EXIT。出口。 C320-APPENDTOCLOB部分。 ************************************************** ***************** * C320-APPENDTOCLOB *获取全局clob的长度LICENSE-TXT和*在LOB WRITE语句中使用它来将NEWCRIME *字符缓冲区附加到全局clob LICENSE-TXT。 *然后选择对应全局SSS的名称*并将其与LICENSE-TXT的值一起显示在屏幕上。 *此函数的调用者必须分配，选择并稍后*释放全局clob LICENSE-TXT。 ************************************************** ***************** C320-PPNDTCLB。执行SQL WHENEVER SQLERROR DO PERFORM Z900-SQLERROR END-EXEC。 EXEC SQL LOB DESCRIBE：LICENSE-TXT获取长度：TXT-LEN END-EXEC。将犯罪行为送给犯罪分子。 IF（TXT-LEN NOT = 0）将3加到TXT-LEN，然后加1到TXT-LEN。 EXEC SQL LOB WRITE：CRIME-LEN来自：NEWCRIME INTO：LICENSE-TXT AT：TXT-LEN END-EXEC。 EXEC SQL SELECT NAME INTO：NAME1 FROM LICENSE_TABLE，SSS =：SSS END-EXEC。显示“”。显示“NAME：”，NAME1-ARR，“SSS：”，SSS。显示“”。执行Z200-PRINTCRIME。显示“”。C320-EXIT。出口。 C300-ADD-CRIME部分。 ************************************************** ***************** * ADD-CRIME *从用户那里获得sss和犯罪并将犯罪附加到相应sss的犯罪列表中。************************************************** ***************** C300-DDCRM。执行SQL WHENEVER SQLERROR DO PERFORM Z900-SQLERROR END-EXEC。执行Z100-GET-SSS。 IF（SSSEXISTS = 1）EXEC SQL ALLOCATE：LICENSE-TXT END-EXEC PERFORM C310-GETNEWCRIME EXEC SQL SELECT TXT_SUMMARY INTO：LICENSE-TXT FROM LICENSE_TABLE SSS =：SSS FOR UPDATE END-EXEC PERFORM C320-APPENDTOCLOB EXEC SQL FREE：LICENSE -TXT END-EXEC ELSE显示“未找到SSS编号”。C300-EXIT。出口。 C400-NEW-RECORD SECTION。 ************************************************** ***************** * C400-NEW-RECORD *获取新记录的sss和名称，并在表格中为clob插入*和empty_clob（）。************************************************** ***************** C400-NWRCRD。执行Z100-GET-SSS。 IF（SSSEXISTS = 1）DISPLAY“记录该sss号码已存在”ELSE DISPLAY“姓名？“没有先进的接受NEWNAME显示”“。EXEC SQL ALLOCATE：LICENSE-TXT END-EXEC EXEC SQL INSERT INTO LICENSE_TABLE VALUES（：SSS，：NEWNAME，EMPTY_CLOB（））END-EXEC EXEC SQL SELECT TXT_SUMMARY INTO：LICENSE-TXT FROM LICENSE_TABLE SSS =：SSS END-EXEC DISPLAY “================================================= =  - “========================”DISPLAY“NAME：”，NEWNAME，“SSS：”，SSS PERFORM Z200-PRINTCRIME DISPLAY“== ================================================  - “ ========================“EXEC SQL FREE：LICENSE-TXT END-EXEC。 C400-EXIT。出口。 D000-LOGOFF部分。 ************************************************** ***************** * D000-LOGOFF *将完成的工作提交给数据库并注销****************** ************************************************* D000 -LGFF。 EXEC SQL COMMIT WORK RELEASE END-EXEC。显示“”。显示“有一个好日子！”。显示“”。D000-EXIT。停止运行。 Z100-GET-SSS部分。 ************************************************** ***************** * Z100-GET-SSS *使用客户端提供的sss填充全局变量SSS。*如果sss不对应于数据库中的任何条目，则将全局变量SSSEXISTS设置为0，否则将其设置为1。************************************************** ***************** Z100-GTSSS。显示“社会安全号码？“没有进步。接受SSS。显示”“。EXEC SQL SELECT COUNT（*）INTO：来自LICENSE_TABLE的SSSCOUNT，其中SSS =：SSS END-EXEC。 IF（SSSCOUNT = 0）移动0到SSSEXISTS ELSE移动1到SSSEXISTS。 Z100-EXIT。出口。 Z200-PRINTCRIME部分。 ************************************************** ***************** * Z200-PRINTCRIME *获取全局clob的长度LICENSE-TXT和*在LOB READ语句中使用它来将clob *读入字符缓冲区显示clob的内容。*此函数的调用者必须分配，选择并稍后*释放全局clob LICENSE-TXT。 ************************************************** ***************** Z200-PRNTCRM。显示“=====================”。展示“犯罪概要”摘要。显示“=====================”。向THE-STRING-ARR移动空间。 EXEC SQL LOB描述：许可证 -  TXT获取长度：TXT-LENGTH END-EXEC。 IF（TXT-LENGTH = 0）DISPLAY“记录是干净的”ELSE EXEC SQL LOB READ：TXT-LENGTH FROM：LICENSE-TXT INTO：THE-STRING END-EXEC DISPLAY THE-STRING-ARR。 Z200-EXIT。出口。 Z300-ACCEPT-CHOICE SECTION。 ************************************************** ***************** * Z300-ACCEPT-CHOICE *接受1到5之间的选择******************* ************************************************ Z300- CCPT。显示“你的选择（1-5）？“没有进步。接受选择。显示”“。如果选择&gt; 5或选择&lt;1那么显示“无效选择”显示“请从指示的列表中选择”。Z300-EXIT。出口。 Z900-SQLERROR部分。 ************************************************** ***************** * Z900-SQLERROR *每当发生SQLERROR时调用。*显示错误，回滚所有已完成的工作并注销************************************* ****************************** Z900-SQLRRR。执行SQL WHENEVER SQLERROR CONTINUE END-EXEC。显示“”。显示“ORACLE ERROR DETECTED：”。显示“”。显示SQLERRMC。 EXEC SQL ROLLBACK工作发布END-EXEC。 Z900-EXIT。停止运行。</pre></div>
            </div>
         </div>
      </article>
   </body>
</html>
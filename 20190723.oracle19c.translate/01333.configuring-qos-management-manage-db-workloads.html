<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Before you can use Oracle Database Quality of Service (QoS) Management, you must configure the databases."></meta>
      <meta name="description" content="Before you can use Oracle Database Quality of Service (QoS) Management, you must configure the databases."></meta>
      <title>配置Oracle数据库QoS管理以管理Oracle数据库工作负载</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="User’s Guide"></meta>
      <meta property="og:description" content="Before you can use Oracle Database Quality of Service (QoS) Management, you must configure the databases."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="User’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="autonomous-health-framework-users-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-21T23:14:30-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2016, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96320-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="installing-and-enabling-oracle-database-qos-management.html" title="Previous" type="text/html"></link>
      <link rel="next" href="administering-oracle-database-qos-management-system.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Autonomous Health Framework User’s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ATNMS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="installing-and-enabling-oracle-database-qos-management.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="administering-oracle-database-qos-management-system.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">用户指导</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-database-qos-management.html" property="item" typeof="WebPage"><span property="name">监视和管理数据库工作负载性能</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="installing-and-enabling-oracle-database-qos-management.html" property="item" typeof="WebPage"><span property="name">安装和启用Oracle数据库QoS管理</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">配置Oracle数据库QoS管理以管理Oracle数据库工作负载</li>
            </ol>
            <a id="GUID-DEFDB919-ED61-481D-9506-054A360AC44A" name="GUID-DEFDB919-ED61-481D-9506-054A360AC44A"></a>
            
            <h2 id="ATNMS-GUID-DEFDB919-ED61-481D-9506-054A360AC44A" class="sect2"><span class="enumeration_section">8.1</span>配置Oracle数据库QoS管理以管理Oracle数据库工作负载</h2>
         </header>
         <div class="ind">
            <div>
               <p>在使用Oracle数据库服务质量（QoS）管理之前，必须配置数据库。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="configuring-qos-management-manage-db-workloads.html#GUID-955DFF5D-3CC0-46B5-AA4F-C7433E31582B">配置数据库</a><br>配置Oracle RAC数据库以使用Oracle数据库QoS管理时，管理员管理的数据库不需要服务器池配置任务。
                  </li>
                  <li class="ulchildlink"><a href="configuring-qos-management-manage-db-workloads.html#GUID-9F9D8722-E5BC-4E99-B672-05AD27E66DBF">为群集安装和配置Oracle Grid Infrastructure</a><br>本书未介绍集群的Oracle Grid Infrastructure的安装和配置。
                  </li>
                  <li class="ulchildlink"><a href="configuring-qos-management-manage-db-workloads.html#GUID-482B3CED-DA0C-4927-ADF2-8780AFF2D576">创建和配置服务器池</a><br>默认情况下，在Oracle Grid Infrastructure安装期间会创建一个名为Free pool的服务器池。
                  </li>
                  <li class="ulchildlink"><a href="configuring-qos-management-manage-db-workloads.html#GUID-6C2FAA83-083E-459F-AEFE-FAD111137C43">创建和配置Oracle RAC数据库</a><br>本书未介绍创建和配置Oracle RAC数据库的步骤。
                  </li>
                  <li class="ulchildlink"><a href="configuring-qos-management-manage-db-workloads.html#GUID-AB5916AE-7491-4A79-BC43-0C18FD1D4646">创建Oracle数据库QoS管理管理员帐户</a><br>在登录Oracle数据库QoS管理仪表板（仪表板）之前，必须创建Oracle数据库QoS管理管理用户。与此帐户关联的操作系统用户必须是群集管理员用户才能进行初始设置。
                  </li>
                  <li class="ulchildlink"><a href="configuring-qos-management-manage-db-workloads.html#GUID-B5239320-CA9F-43D5-A851-5AFEB913A52F">启用Oracle数据库QoS管理</a><br>如果在同一群集上运行多个数据库，则可以指定由Oracle QoS Management管理的数据库。
                  </li>
                  <li class="ulchildlink"><a href="configuring-qos-management-manage-db-workloads.html#GUID-4F9526A9-9A9F-4A5E-A089-2220D31669FE">关于Solaris上的多CPU绑定和服务质量管理</a><br>使用多CPU绑定（MCB）和Oracle数据库服务质量（QoS）管理需要系统管理员和数据库管理员（DBA）之间的密切通信。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="installing-and-enabling-oracle-database-qos-management.html#GUID-4FC52AFD-2EDE-48F6-90E3-7DD0CFDA3624" title="本章介绍在系统上安装和配置Oracle数据库QoS管理所必须完成的任务。本节中的某些任务必须由集群管理员执行。">安装和启用Oracle数据库QoS管理</a></p>
                  </div>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-955DFF5D-3CC0-46B5-AA4F-C7433E31582B" name="GUID-955DFF5D-3CC0-46B5-AA4F-C7433E31582B"></a><h3 id="ATNMS-GUID-955DFF5D-3CC0-46B5-AA4F-C7433E31582B" class="sect3"><span class="enumeration_section">8.1.1</span>配置数据库</h3>
               <div>
                  <p>配置Oracle RAC数据库以使用Oracle数据库QoS管理时，管理员管理的数据库不需要服务器池配置任务。</p>
                  <ol>
                     <li class="stepexpand"><span>对于策略管理的数据库，数据库管理员（DBA）请求访问要用于数据库的服务器池。集群管理员为DBA创建服务器池，并授予对DBA的此服务器池的访问权限。如果集群管理员用户与DBA用户相同，则可以在DBCA运行时通过选择DBCA中的策略管理选项来创建服务器池。也可以使用服务器控件（SRVCTL）在安装后创建服务器池。</span><div>
                           <p>此服务器池的最小大小是数据库实例的数量。如果服务器池的最大大小大于最小大小，则可以将新实例添加到数据库以处理峰值工作负载或适应增长。</p>
                           <p>对于管理员管理的数据库，数据库会自动配置为在通用服务器池中运行。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>对于策略管理的数据库，DBA通过选择DBCA中的策略管理选项在分配的服务器池中创建Oracle RAC数据库。</span></li>
                     <li class="stepexpand"><span>DBA创建由Oracle Clusterware管理的数据库服务。应用程序用户使用这些服务连接到数据库。</span></li>
                     <li class="stepexpand"><span>DBA使用Enterprise Manager Cloud Control为Oracle数据库QoS管理启用数据库。</span></li>
                  </ol>
                  <div class="section">
                     <p>以下各节将详细介绍Oracle数据库QoS管理管理员的初始配置任务。</p>
                     <p>对于Oracle Solaris平台，还有一个额外的考虑因素。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="configuring-qos-management-manage-db-workloads.html#GUID-4F9526A9-9A9F-4A5E-A089-2220D31669FE" title="使用多CPU绑定（MCB）和Oracle数据库服务质量（QoS）管理需要系统管理员和数据库管理员（DBA）之间的密切通信。">关于Solaris上的多CPU绑定和服务质量管理</a></li>
                        <li><a href="managing-performance-classes.html#GUID-29ADED46-F0D4-45A0-906D-85621AE36602" title="每个策略集都包含一个或多个性能类。每个性能类都定义了服务器上的一种工作负载。">管理性能类</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-qos-management-manage-db-workloads.html#GUID-DEFDB919-ED61-481D-9506-054A360AC44A" title="在使用Oracle数据库服务质量（QoS）管理之前，必须配置数据库。">配置Oracle数据库QoS管理以管理Oracle数据库工作负载</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-9F9D8722-E5BC-4E99-B672-05AD27E66DBF" name="GUID-9F9D8722-E5BC-4E99-B672-05AD27E66DBF"></a><h3 id="ATNMS-GUID-9F9D8722-E5BC-4E99-B672-05AD27E66DBF" class="sect3"><span class="enumeration_section">8.1.2</span>为群集安装和配置Oracle Grid Infrastructure</h3>
               <div>
                  <p>本书未介绍集群的Oracle Grid Infrastructure的安装和配置。</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure安装和升级指南</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-qos-management-manage-db-workloads.html#GUID-DEFDB919-ED61-481D-9506-054A360AC44A" title="在使用Oracle数据库服务质量（QoS）管理之前，必须配置数据库。">配置Oracle数据库QoS管理以管理Oracle数据库工作负载</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-482B3CED-DA0C-4927-ADF2-8780AFF2D576" name="GUID-482B3CED-DA0C-4927-ADF2-8780AFF2D576"></a><h3 id="ATNMS-GUID-482B3CED-DA0C-4927-ADF2-8780AFF2D576" class="sect3"><span class="enumeration_section">8.1.3</span>创建和配置服务器池</h3>
               <div>
                  <p>默认情况下，在Oracle Grid Infrastructure安装期间会创建一个名为Free pool的服务器池。</p>
                  <p>要为Oracle RAC数据库创建服务器池，可以使用SRVCTL或Oracle Enterprise Manager。</p>
                  <p>使用DBCA创建Oracle RAC数据库时，Oracle建议您为数据库选择策略管理，并选择应在其中运行数据库实例的服务器池。如果选择创建管理员管理的Oracle RAC数据库，则数据库将专门在通用服务器池中运行，该池是在安装Oracle Grid Infrastructure期间创建的。</p>
                  <p>如果使用独立于数据库管理员的集群管理员，则只有集群管理员用户可以创建服务器池。然后，集群管理员将服务器池的权限授予拥有Oracle RAC安装的操作系统用户。</p>
                  <div class="infoboxnote" id="GUID-482B3CED-DA0C-4927-ADF2-8780AFF2D576__GUID-BA424658-017D-4F59-9892-82A59D260A82">
                     <p class="notep1">注意：</p>创建用于Oracle数据库QoS管理的服务器池时，请不要为服务器池配置<code class="codeph">SERVER_NAMES</code>属性（ <code class="codeph">srvctl add svrpool</code>的<code class="codeph">-servers</code>选项或<code class="codeph">srvctl modify svrpool</code>命令）。此类配置不支持完全资源管理，因为Oracle数据库QoS管理无法更改服务器池大小。这与管理员管理的数据库的资源管理存在相同的限制。
                  </div>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-482B3CED-DA0C-4927-ADF2-8780AFF2D576__GUID-CF492EBD-D7DE-467D-81D5-B0D96A5F94C4">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关服务器池的信息，请参阅<a href="../cwadd/policy-based-cluster-and-capacity-management.html#CWADD92105" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a></p>
                        </li>
                        <li>
                           <p><a href="../racad/server-control-utility-reference.html#RACAD7733" target="_blank"><span><cite>“Oracle Real Application Clusters管理和部署指南”，</cite></span></a>以获取有关使用SRVCTL创建服务器池的信息</p>
                        </li>
                        <li>
                           <p>有关使用DBCA创建Oracle RAC数据库的信息，请参见<a href="../rilin/selecting-dbca-options-to-create-oracle-rac-or-oracle-rac-one-node-databases-with-dbca.html#RILIN004" target="_blank"><span><cite>“适用于Linux和UNIX的Oracle Real Application Clusters安装指南”</cite></span></a></p>
                        </li>
                        <li>
                           <p>有关群集管理员用户的详细信息，请参阅<a href="../cwadd/oracle-clusterware-administration.html#CWADD-GUID-CAD9DDFE-1B4E-41BB-8029-3E9578639BD6" target="_blank"><span><cite>“Oracle Clusterware管理和部署指南”</cite></span></a> 。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-qos-management-manage-db-workloads.html#GUID-DEFDB919-ED61-481D-9506-054A360AC44A" title="在使用Oracle数据库服务质量（QoS）管理之前，必须配置数据库。">配置Oracle数据库QoS管理以管理Oracle数据库工作负载</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="APQOS155"></a><div class="props_rev_3"><a id="GUID-6C2FAA83-083E-459F-AEFE-FAD111137C43" name="GUID-6C2FAA83-083E-459F-AEFE-FAD111137C43"></a><h3 id="ATNMS-GUID-6C2FAA83-083E-459F-AEFE-FAD111137C43" class="sect3"><span class="enumeration_section">8.1.4</span>创建和配置Oracle RAC数据库</h3>
               <div>
                  <p>本书未介绍创建和配置Oracle RAC数据库的步骤。</p>
                  <p>创建数据库时，Oracle建议您选择创建策略管理的Oracle RAC数据库，并指定应在其中运行的服务器池。如果您创建管理员管理的Oracle RAC数据库，则它仅在通用服务器池中运行。</p>
                  <p>创建数据库后，执行以下步骤以配置用于Oracle数据库QoS管理的数据库：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="configuring-qos-management-manage-db-workloads.html#GUID-6CD3CC37-A396-4643-A435-9AF3ABA758AA">修改数据库初始化参数</a><br>如果数据库由Oracle Database QoS Management管理，则必须将服务器池中运行的每个数据库实例的<code class="codeph">CPU_COUNT</code>参数设置为相同的值。
                     </li>
                     <li class="ulchildlink"><a href="configuring-qos-management-manage-db-workloads.html#GUID-BF927C61-BF3A-4B58-9743-0E3D9DEB9218">创建数据库服务</a><br>应用程序和用户使用服务连接到数据库。
                     </li>
                  </ul>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../rilin/selecting-dbca-options-to-create-oracle-rac-or-oracle-rac-one-node-databases-with-dbca.html#RILIN004" target="_blank"><span><cite>适用于Linux和UNIX的Oracle Real Application Clusters安装指南</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-qos-management-manage-db-workloads.html#GUID-DEFDB919-ED61-481D-9506-054A360AC44A" title="在使用Oracle数据库服务质量（QoS）管理之前，必须配置数据库。">配置Oracle数据库QoS管理以管理Oracle数据库工作负载</a></p>
                     </div>
                  </div>
               </div><a id="APQOS365"></a><div class="props_rev_3"><a id="GUID-6CD3CC37-A396-4643-A435-9AF3ABA758AA" name="GUID-6CD3CC37-A396-4643-A435-9AF3ABA758AA"></a><h4 id="ATNMS-GUID-6CD3CC37-A396-4643-A435-9AF3ABA758AA" class="sect4"><span class="enumeration_section">8.1.4.1</span>修改数据库初始化参数</h4>
                  <div>
                     <p>如果数据库由Oracle Database QoS Management管理，则必须将服务器池中运行的每个数据库实例的<code class="codeph">CPU_COUNT</code>参数设置为相同的值。
                     </p>
                     <div class="section">
                        <p>在每台服务器上，该服务器上运行的所有数据库实例的<code class="codeph">CPU_COUNT</code>值的总和必须小于或等于物理CPU计数。例如，如果您的服务器有8个CPU，并且在此服务器上运行了两个数据库实例，则对于要由Oracle数据库QoS管理管理的数据库，必须设置每个数据库实例的<code class="codeph">CPU_COUNT</code>参数，以便服务器上所有实例的<code class="codeph">CPU_COUNT</code>参数值最多为8或更少。例如，一个实例上的<code class="codeph">CPU_COUNT=3</code> ，另一个实例上的<code class="codeph">CPU_COUNT=4</code> ，或者一个实例上的<code class="codeph">CPU_COUNT=6</code> ，另一个实例上的<code class="codeph">CPU_COUNT=2</code> 。
                        </p>
                        <div class="infoboxnote" id="GUID-6CD3CC37-A396-4643-A435-9AF3ABA758AA__GUID-B2B1FB02-8433-4670-AED6-B00566D63AE2">
                           <p class="notep1">注意：</p>
                           <p>默认情况下，在服务器上启动的每个数据库的CPU计数都设置为为该服务器安装的物理CPU数。</p>
                        </div>
                        <p>如果在服务器池中运行多个数据库，则使用<code class="codeph">CPU_COUNT</code>的缺省设置将导致Oracle数据库QoS管理报告违规。要避免此错误，请使用Oracle Enterprise Manager或SQL * Plus手动配置SPFILE中的<code class="codeph">CPU_COUNT</code>值。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ul>
                        <li class="stepexpand"><span>使用SQL * Plus修改Oracle RAC数据库的所有实例的<code class="codeph">CPU_COUNT</code>数据库初始化参数：</span><div><pre class="pre codeblock"><code>ALTER SYSTEM SET cpu_count = <span class="italic">n</span> SCOPE = BOTH SID ='*';</code></pre></div>
                           <div>
                              <p>在上一个命令中， <span class="italic">n</span>是数据库实例应使用的CPU数。
                              </p>
                              <p><code class="codeph">CPU_COUNT</code>是默认情况下未设置的动态参数。应将其设置为数据库实例随时应使用的最大CPU数。服务器上所有实例的<code class="codeph">CPU_COUNT</code>值的总和不应超过该服务器的物理CPU数。作为最佳实践，Oracle建议对<code class="codeph">CPU_COUNT</code>使用最小值2。</p>
                           </div>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-qos-management-manage-db-workloads.html#GUID-6C2FAA83-083E-459F-AEFE-FAD111137C43" title="本书未介绍创建和配置Oracle RAC数据库的步骤。">创建和配置Oracle RAC数据库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-BF927C61-BF3A-4B58-9743-0E3D9DEB9218" name="GUID-BF927C61-BF3A-4B58-9743-0E3D9DEB9218"></a><h4 id="ATNMS-GUID-BF927C61-BF3A-4B58-9743-0E3D9DEB9218" class="sect4"><span class="enumeration_section">8.1.4.2</span>创建数据库服务</h4>
                  <div>
                     <p>应用程序和用户使用服务连接到数据库。</p>
                     <p>本指南中不包含有关创建数据库服务的详细信息。</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../racad/workload-management-with-dynamic-database-services.html#RACAD7124" target="_blank"><span><cite>“Oracle Real Application Clusters管理和部署指南”</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-qos-management-manage-db-workloads.html#GUID-6C2FAA83-083E-459F-AEFE-FAD111137C43" title="本书未介绍创建和配置Oracle RAC数据库的步骤。">创建和配置Oracle RAC数据库</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="APQOS282"></a><div class="props_rev_3"><a id="GUID-AB5916AE-7491-4A79-BC43-0C18FD1D4646" name="GUID-AB5916AE-7491-4A79-BC43-0C18FD1D4646"></a><h3 id="ATNMS-GUID-AB5916AE-7491-4A79-BC43-0C18FD1D4646" class="sect3"><span class="enumeration_section">8.1.5</span>创建Oracle数据库QoS管理管理员帐户</h3>
               <div>
                  <p>在登录Oracle数据库QoS管理仪表板（仪表板）之前，必须创建Oracle数据库QoS管理管理用户。与此帐户关联的操作系统用户必须是群集管理员用户才能进行初始设置。</p>
                  <div class="section">
                     <p>Oracle数据库QoS管理服务器的管理用户称为QoS管理员用户。该用户可以访问Oracle数据库QoS管理服务器的所有功能，包括检查和更改QoS管理员用户的帐户密码。您可以拥有多个QoS管理员用户。</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>作为集群管理员用户，登录托管Oracle数据库QoS管理服务器的节点。这可以通过使用Oracle Grid Infrastructure主目录中的以下命令来确定：</span><div><pre class="pre codeblock"><code>srvctl status qosmserver</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>停止Oracle数据库QoS管理服务器资源。</span><div><pre class="pre codeblock"><code>srvctl停止qosmserver</code></pre></div>
                     </li>
                     <li class="stepexpand"><span>以CRS管理员用户身份登录并输入以下命令：</span><div><pre class="pre codeblock"><code>qosctl qosadmin -setpasswd qosadmin</code></pre><p>输入此命令后，系统会提示您输入默认QoS管理员用户的密码一次或多次。</p>
                           <p>如果要使用其他用户名，则应输入以下命令：</p><pre class="pre codeblock"><code>qosctl qosadmin -adduser <span class="variable" translate="no">username</span>
</code></pre><p>在这个例子中：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">qosadmin</code>是默认QoS Admin用户的名称。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph"><span class="variable" translate="no">username</span></code>是您正在创建的QoS Admin用户的名称。系统会提示您输入此用户的密码</p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li class="stepexpand"><span>重新启动Oracle数据库QoS管理服务器资源。</span><div><pre class="pre codeblock"><code>srvctl启动qosmserver</code></pre></div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="creating-administrative-users-qos-management.html#GUID-6C1BDA1B-A261-4E80-B48C-33075407E65E" title="QOSCTL是一个命令行实用程序，允许您为Oracle数据库QoS管理执行某些配置任务。">QOSCTL实用程序参考</a></li>
                        <li><a href="creating-administrative-users-qos-management.html#GUID-56052150-E043-456E-A130-D903171C3C85" title="Oracle数据库QoS管理提供了一个名为QOSCTL的命令行实用程序，可帮助您管理用户。">为Oracle数据库QoS管理创建管理用户</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-qos-management-manage-db-workloads.html#GUID-DEFDB919-ED61-481D-9506-054A360AC44A" title="在使用Oracle数据库服务质量（QoS）管理之前，必须配置数据库。">配置Oracle数据库QoS管理以管理Oracle数据库工作负载</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="APQOS157"></a><div class="props_rev_3"><a id="GUID-B5239320-CA9F-43D5-A851-5AFEB913A52F" name="GUID-B5239320-CA9F-43D5-A851-5AFEB913A52F"></a><h3 id="ATNMS-GUID-B5239320-CA9F-43D5-A851-5AFEB913A52F" class="sect3"><span class="enumeration_section">8.1.6</span>启用Oracle数据库QoS管理</h3>
               <div>
                  <p>如果在同一群集上运行多个数据库，则可以指定由Oracle QoS Management管理的数据库。</p>
                  <div class="section">
                     <p>您以分层方式启用Oracle数据库QoS管理：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>测量，监控或管理集群</p>
                        </li>
                        <li>
                           <p>测量，监视或管理在群集上运行的各个数据库</p>
                        </li>
                     </ul>
                     <p>要管理数据库，在以下情况下，必须为Oracle数据库QoS管理启用使用相同用户定义的服务器池的所有数据库：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>该用户定义的服务器池中的一个或多个性能类未在活动策略中标记为“仅测量”</p>
                        </li>
                        <li>
                           <p>有一些性能类包含由该数据库托管的服务</p>
                        </li>
                     </ul>
                     <p>如果未在Oracle数据库QoS管理的同一用户定义的服务器池中启用所有数据库，并且存在上述任何条件，则在尝试访问数据库的仪表板时会发出违规信号。如果用户定义的服务器池中的所有性能类都处于仅测量或监视模式，并且没有任何性能类指定托管服务，则在访问数据库的仪表板时不会报告违规。</p>
                     <div class="infoboxnote" id="GUID-B5239320-CA9F-43D5-A851-5AFEB913A52F__GUID-EA7AECB8-54D0-4283-B988-90A6C689BB27">
                        <p class="notep1">注意：</p>如果启用Oracle QoS Management来监视或管理容器数据库（CDB），则还会监视或管理所有包含的可插拔数据库（PDB）。您无法配置Oracle QoS Management来监视或管理各个PDB。
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>要为系统启用Oracle QoS Management，请执行以下步骤：</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="configuring-qos-management-manage-db-workloads.html#GUID-A3B7A59F-3D0B-4467-A56F-F318C3E7B966">在数据库级别启用Oracle QoS管理</a><br></li>
                     <li class="ulchildlink"><a href="configuring-qos-management-manage-db-workloads.html#GUID-30E4E30E-67A2-4CE8-874C-98959D5F4280">创建初始策略集</a><br></li>
                     <li class="ulchildlink"><a href="configuring-qos-management-manage-db-workloads.html#GUID-A02A9A66-C8FC-4C8F-96A9-E09D32054AC0">在群集级别启用Oracle QoS管理</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-qos-management-manage-db-workloads.html#GUID-DEFDB919-ED61-481D-9506-054A360AC44A" title="在使用Oracle数据库服务质量（QoS）管理之前，必须配置数据库。">配置Oracle数据库QoS管理以管理Oracle数据库工作负载</a></p>
                     </div>
                  </div>
               </div>
               <a id="APQOS283"></a><div class="props_rev_3"><a id="GUID-A3B7A59F-3D0B-4467-A56F-F318C3E7B966" name="GUID-A3B7A59F-3D0B-4467-A56F-F318C3E7B966"></a><h4 id="ATNMS-GUID-A3B7A59F-3D0B-4467-A56F-F318C3E7B966" class="sect4"><span class="enumeration_section">8.1.6.1</span>在数据库级别启用Oracle QoS管理</h4>
                  <div>
                     <div class="section"></div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以数据库管理员身份登录Oracle Enterprise Manager Cloud Control。</span></li>
                        <li class="stepexpand"><span>从“数据库目标”页面中，选择要修改的数据库。</span></li>
                        <li class="stepexpand"><span>选择<span class="bold">可用性</span> ，然后<span class="bold">启用/禁用服务质量管理</span> 。</span></li>
                        <li class="stepexpand"><span>输入Cluster和Database凭据，然后单击<span class="bold">Login</span> 。</span><div>
                              <div class="infoboxnote" id="GUID-A3B7A59F-3D0B-4467-A56F-F318C3E7B966__GUID-38C991FA-11E9-4F6E-8D74-2820A46CF0BA">
                                 <p class="notep1">注意：</p>
                                 <p>要完成此步骤，您必须指定SYSDBA和集群管理员帐户的登录信息。</p>
                              </div>
                              <p>将显示“启用/禁用QoS管理”屏幕。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>系统会提示您输入APPQOSSYS用户的密码。选择密码并在“密码”和“确认密码”字段中输入密码，然后单击“确定”。</span><div>
                              <p>提供密码时，会执行以下操作：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>APPQOSSYS帐户（可使Oracle数据库QoS管理服务器连接到数据库）已解锁并设置了新密码。</p>
                                 </li>
                                 <li>
                                    <p>凭据将写入存储在Oracle Cluster Registry中的Oracle Wallet，以使Oracle Database QoS Management能够登录到数据库。</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span><code class="codeph">APPQOS_PLAN</code>被设置为所有主动管理数据库的活动Oracle数据库资源管理器计划，以便Oracle数据库QoS管理可以调整性能类的CPU访问。对于其所有性能类都已选中“仅限测量”的数据库，不需要APPQOS_PLAN。</span><div></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-qos-management-manage-db-workloads.html#GUID-B5239320-CA9F-43D5-A851-5AFEB913A52F" title="如果在同一群集上运行多个数据库，则可以指定由Oracle QoS Management管理的数据库。">启用Oracle数据库QoS管理</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="APQOS284"></a><div class="props_rev_3"><a id="GUID-30E4E30E-67A2-4CE8-874C-98959D5F4280" name="GUID-30E4E30E-67A2-4CE8-874C-98959D5F4280"></a><h4 id="ATNMS-GUID-30E4E30E-67A2-4CE8-874C-98959D5F4280" class="sect4"><span class="enumeration_section">8.1.6.2</span>创建初始策略集</h4>
                  <div>
                     <div class="section"></div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>在“Oracle Enterprise Manager云控制所有目标”页上，选择启用了Oracle数据库QoS管理的群集数据库所在的群集。</span></li>
                        <li class="stepexpand"><span>选择<span class="bold">Administration</span> ，然后选择<span class="bold">Quality of Service Management</span> ，然后选择<span class="bold">Create Policy Set</span> 。</span><div>
                              <div class="figure" id="GUID-30E4E30E-67A2-4CE8-874C-98959D5F4280__GUID-EA816970-11FE-4F81-9FC4-FB0C16D8E9FA"><img src="img/create_policy_set_menu.png" alt="下面是create_policy_set_menu.png的描述" title="下面是create_policy_set_menu.png的描述" longdesc="img_text/create_policy_set_menu.html"><br><a href="img_text/create_policy_set_menu.html">说明create_policy_set_menu.png的说明</a></div>
                              <!-- class="figure" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span>使用QoS Management管理员密码登录Oracle Database QoS Management Server（默认用户名为<code class="codeph">qosadmin</code> ）。</span></li>
                        <li class="stepexpand"><span>在“创建策略集”向导的第一页上，选中代表数据库的服务器池旁边的“管理”框。例如， <code class="codeph">online</code>和<code class="codeph">backoffice</code> 。单击<span class="bold">下一步</span> 。</span><div>
                              <div class="figure" id="GUID-30E4E30E-67A2-4CE8-874C-98959D5F4280__GUID-903A99E7-B972-46FA-A4F0-2043FB221F07"><img src="img/apqos_create_polset.png" alt="下面是apqos_create_polset.png的说明" title="下面是apqos_create_polset.png的说明" longdesc="img_text/apqos_create_polset.html"><br><a href="img_text/apqos_create_polset.html">说明apqos_create_polset.png的说明</a></div>
                              <!-- class="figure" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span>要开始使用Oracle数据库QoS管理，请接受初始配置的默认值， <span class="bold">然后</span>在向导的每个页面上单击“ <span class="bold">下一步</span> ”以使用“默认策略设置”。在第五步中，单击“ <span class="bold">设置策略”</span>将DefaultPolicy设置为“选择的活动策略”，然后单击“ <span class="bold">下一步”</span> 。</span><div>
                              <p>在“创建策略集向导”的最后一步，单击“ <span class="bold">提交策略集”</span> 。
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-qos-management-manage-db-workloads.html#GUID-B5239320-CA9F-43D5-A851-5AFEB913A52F" title="如果在同一群集上运行多个数据库，则可以指定由Oracle QoS Management管理的数据库。">启用Oracle数据库QoS管理</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="APQOS285"></a><div class="props_rev_3"><a id="GUID-A02A9A66-C8FC-4C8F-96A9-E09D32054AC0" name="GUID-A02A9A66-C8FC-4C8F-96A9-E09D32054AC0"></a><h4 id="ATNMS-GUID-A02A9A66-C8FC-4C8F-96A9-E09D32054AC0" class="sect4"><span class="enumeration_section">8.1.6.3</span>在集群级别启用Oracle QoS管理</h4>
                  <div>
                     <div class="section"></div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>使用Oracle Enterprise Manager云控制，在“所有目标”页面上，选择启用了启用了Oracle数据库QoS管理的群集数据库的群集。</span></li>
                        <li class="stepexpand"><span>选择<span class="bold">Administration</span> ，然后选择<span class="bold">Quality of Service Management</span> ，然后选择<span class="bold">Dashboard</span> 。</span></li>
                        <li class="stepexpand"><span>以Oracle数据库QoS管理用户身份登录（例如， <code class="codeph">qosadmin</code> ）。</span></li>
                        <li class="stepexpand"><span>在“仪表板”页面上，“常规”部分显示了Oracle数据库QoS管理的当前状态。在新系统上，状态为“已禁用”。单击状态旁边的“ <span class="bold">已禁用</span> ”链接以启用此群集的Oracle数据库QoS管理。</span><div>
                              <div class="figure" id="GUID-A02A9A66-C8FC-4C8F-96A9-E09D32054AC0__GUID-04622DF9-01FF-44C7-95ED-8C4BE0734BEA"><img src="img/qos_cluster_status_new_12c.gif" alt="qos_cluster_status_new_12c.gif的描述如下" title="qos_cluster_status_new_12c.gif的描述如下" longdesc="img_text/qos_cluster_status_new_12c.html"><br><a href="img_text/qos_cluster_status_new_12c.html">插图说明qos_cluster_status_new_12c.gif</a></div>
                              <!-- class="figure" -->
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="configuring-qos-management-manage-db-workloads.html#GUID-B5239320-CA9F-43D5-A851-5AFEB913A52F" title="如果在同一群集上运行多个数据库，则可以指定由Oracle QoS Management管理的数据库。">启用Oracle数据库QoS管理</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-4F9526A9-9A9F-4A5E-A089-2220D31669FE" name="GUID-4F9526A9-9A9F-4A5E-A089-2220D31669FE"></a><h3 id="ATNMS-GUID-4F9526A9-9A9F-4A5E-A089-2220D31669FE" class="sect3"><span class="enumeration_section">8.1.7</span>关于Solaris上的多CPU绑定和服务质量管理</h3>
               <div>
                  <p>使用多CPU绑定（MCB）和Oracle数据库服务质量（QoS）管理需要系统管理员和数据库管理员（DBA）之间的密切通信。</p>
                  <p>多CPU绑定（MCB）是Oracle Solaris项目资源管理功能，用于将项目绑定到特定的一组CPU，但不能独占绑定CPU。MCB允许其他进程也使用这些CPU并允许分区重叠。Oracle Solaris 11.3支持MCB。Linux系统上的控制组（CGroup）是另一种系统管理员方法，通过将CPU和服务器资源分配给特定应用程序来管理服务器资源。</p>
                  <p>在测量和监视模式下使用时，MCB对Oracle数据库服务质量（QoS）管理的使用没有影响。在管理模式下为一组服务器使用Oracle数据库服务质量（QoS）管理时，Oracle QoS Management当前支持四种资源控制：</p>
                  <ol>
                     <li>
                        <p><span class="bold">消费者组映射</span> ：非CDB或PDB中的竞争工作负载之间的CPU份额。</p>
                     </li>
                     <li>
                        <p><span class="bold">容器数据库（CDB）资源计划</span> ：CDB内竞争PDB之间的CPU份额</p>
                     </li>
                     <li>
                        <p><span class="bold">实例锁定</span> ：共同托管的数据库实例之间的CPU /线程</p>
                     </li>
                     <li>
                        <p><span class="bold">服务器池基数</span> ：提供数据库的服务器池中的服务器数量</p>
                     </li>
                  </ol>
                  <p>MCB成为实例锁定的问题，因为Oracle数据库服务质量（QoS）管理可能会建议操作系统不会遵守的<code class="codeph">CPU_COUNT</code>更改。如果在这种情况下实施建议的操作，则目标工作负载可能仍会有一些改进，因为捐赠者数据库会丢失CPU。这将导致资源管理器不安排尽可能多的并行会话，这将在不使用硬分区时提供帮助。但是，预计的绩效改善将被夸大。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="configuring-qos-management-manage-db-workloads.html#GUID-DEFDB919-ED61-481D-9506-054A360AC44A" title="在使用Oracle数据库服务质量（QoS）管理之前，必须配置数据库。">配置Oracle数据库QoS管理以管理Oracle数据库工作负载</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="DBMS_CUBE_ADVISE contains subprograms for evaluating cube materialized views to support log-based fast refresh and query rewrite."></meta>
      <meta name="description" content="DBMS_CUBE_ADVISE contains subprograms for evaluating cube materialized views to support log-based fast refresh and query rewrite."></meta>
      <title>DBMS_CUBE_ADVISE</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="DBMS_CUBE_ADVISE contains subprograms for evaluating cube materialized views to support log-based fast refresh and query rewrite."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_CUBE.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_CUBE_LOG.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_CUBE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_CUBE_LOG.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_CUBE_ADVISE</li>
            </ol>
            <a id="GUID-C96E00D6-4ADB-4782-B99F-982150D75BA5" name="GUID-C96E00D6-4ADB-4782-B99F-982150D75BA5"></a><a id="ARPLS219"></a><a id="ARPLS219"></a>
            
            <h2 id="ARPLS-GUID-C96E00D6-4ADB-4782-B99F-982150D75BA5" class="sect2"><span class="enumeration_chapter">42</span> DBMS_CUBE_ADVISE</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_CUBE_ADVISE</code>包含用于评估多维数据集物化视图的子程序，以支持基于日志的快速刷新和查询重写。
               </p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_CUBE_ADVISE.html#GUID-4899577E-FF97-476A-97EE-7596E1362C9C" title="MV_CUBE_ADVICE函数需要ADVISOR权限。">DBMS_CUBE_ADVISE安全模型</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_CUBE_ADVISE.html#GUID-04693F90-D788-485E-BEA8-B3A8E23C445A" title="该表列出并描述了DBMS_CUBE_ADVISE子程序。">DBMS_CUBE_ADVISE子程序摘要</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-C96E00D6-4ADB-4782-B99F-982150D75BA5__GUID-E53B29B9-3BE2-4ACA-A06C-A242236AB8C9">
                  <p class="notep1">也可以看看：</p>
                  <p>有关多维数据集物化视图的信息，请参阅<a href="../olaug/administering-oracle-olap.html#OLAUG700" target="_blank"><span class="italic">“Oracle OLAP用户指南”</span></a></p>
               </div>
            </div><a id="ARPLS73172"></a><a id="ARPLS73172"></a><div class="props_rev_3"><a id="GUID-4899577E-FF97-476A-97EE-7596E1362C9C" name="GUID-4899577E-FF97-476A-97EE-7596E1362C9C"></a><h3 id="ARPLS-GUID-4899577E-FF97-476A-97EE-7596E1362C9C" class="sect3"><span class="enumeration_section">42.1</span> DBMS_CUBE_ADVISE安全模型</h3>
               <div>
                  <p><code class="codeph">MV_CUBE_ADVICE</code>函数需要<code class="codeph">ADVISOR</code>权限。
                  </p>
               </div>
            </div><a id="ARPLS65764"></a><a id="ARPLS65765"></a><a id="ARPLS65765"></a><a id="ARPLS65764"></a><div class="props_rev_3"><a id="GUID-04693F90-D788-485E-BEA8-B3A8E23C445A" name="GUID-04693F90-D788-485E-BEA8-B3A8E23C445A"></a><h3 id="ARPLS-GUID-04693F90-D788-485E-BEA8-B3A8E23C445A" class="sect3"><span class="enumeration_section">42.2</span> DBMS_CUBE_ADVISE子程序摘要</h3>
               <div>
                  <p>该表列出并描述了<code class="codeph">DBMS_CUBE_ADVISE</code>子程序。
                  </p>
                  <div class="tblformal" id="GUID-04693F90-D788-485E-BEA8-B3A8E23C445A__GUID-F037CEAA-C228-48A1-BF7D-41AC7AD9CC07">
                     <p class="titleintable">表42-1 DBMS_CUBE_ADVISE子程序摘要</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_CUBE_ADVISE子程序摘要" width="100%" border="1" summary="This table lists and describes the DBMS_CUBE_ADVISE subprograms." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="33%" id="d214849e331">子程序</th>
                              <th align="left" valign="bottom" width="67%" id="d214849e334">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d214849e339" headers="d214849e331 ">
                                 <p><a href="DBMS_CUBE_ADVISE.html#GUID-9BF180DF-30CB-49A8-A3AD-0C355968D5A4" title="此表函数评估指定多维数据集物化视图的元数据。它生成建议并将它们作为SQL结果集返回。这些SQL语句可用于创建约束，SQL维度对象和物化视图日志，这些日志允许最广泛的查询重写转换和基于日志的物化视图的基于日志的快速刷新。">MV_CUBE_ADVICE函数</a></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d214849e339 d214849e334 ">
                                 <p>评估多维数据集物化视图的元数据，并生成约束，SQL维度对象和物化视图日志的建议，以支持广泛的查询重写和快速刷新机会。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d214849e351" headers="d214849e331 ">
                                 <p><a href="DBMS_CUBE_ADVISE.html#GUID-A7B56393-EC3D-4F66-B844-740756B443AB" title="此过程标识由MV_CUBE_ADVICE生成的验证约束中使用的异常日志的名称。">SET_CNS_EXCEPTION_LOG过程</a></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d214849e351 d214849e334 ">
                                 <p>标识由<code class="codeph">MV_CUBE_ADVICE</code>生成的验证约束中使用的异常日志的名称。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="33%" id="d214849e369" headers="d214849e331 ">
                                 <p><a href="DBMS_CUBE_ADVISE.html#GUID-80C92CEA-D6C3-404B-8380-2CBC1C7A24A9" title="此过程打开和关闭MV_CUBE_ADVICE函数的服务器输出的诊断消息。">TRACE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="67%" headers="d214849e369 d214849e334 ">
                                 <p>显示或禁止<code class="codeph">MV_CUBE_ADVICE</code>诊断消息。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS65766"></a><a id="ARPLS65767"></a><a id="ARPLS65768"></a><a id="ARPLS65767"></a><a id="ARPLS65768"></a><a id="ARPLS65766"></a><div class="props_rev_3"><a id="GUID-9BF180DF-30CB-49A8-A3AD-0C355968D5A4" name="GUID-9BF180DF-30CB-49A8-A3AD-0C355968D5A4"></a><h4 id="ARPLS-GUID-9BF180DF-30CB-49A8-A3AD-0C355968D5A4" class="sect4"><span class="enumeration_section">42.2.1</span> MV_CUBE_ADVICE功能</h4>
                  <div>
                     <p>此表函数评估指定多维数据集物化视图的元数据。它生成建议并将它们作为SQL结果集返回。这些SQL语句可用于创建约束，SQL维度对象和物化视图日志，这些日志允许最广泛的查询重写转换和基于日志的物化视图的基于日志的快速刷新。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-9BF180DF-30CB-49A8-A3AD-0C355968D5A4__GUID-AD69413D-D239-4EC9-93C2-FC0E68FA5595">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE_ADVISE.MV_CUBE_ADVICE（所有者IN VARCHAR2 DEFAULT USER，mvname IN VARCHAR2，reqtype IN VARCHAR2 DEFAULT'0'，验证IN NUMBER DEFAULT 0）RETURN COAD_ADVICE_T PIPELINED;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9BF180DF-30CB-49A8-A3AD-0C355968D5A4__GUID-9A65249D-F5C8-41B4-B85C-0A7290596A45">参数</p>
                        <div class="tblformal" id="GUID-9BF180DF-30CB-49A8-A3AD-0C355968D5A4__GUID-9D2EB9DE-0162-496D-AEFA-C4A78B3CA98A">
                           <p class="titleintable">表42-2 MV_CUBE_ADVICE函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="MV_CUBE_ADVICE函数参数" width="100%" border="1" summary="DBMS_CUBE_ADVISE.MV_CUBE_ADVICE parameters" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="23%" id="d214849e498">参数</th>
                                    <th align="left" valign="bottom" width="77%" id="d214849e501">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d214849e506" headers="d214849e498 ">
                                       <p><code class="codeph">所有者</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d214849e506 d214849e501 ">
                                       <p>立方体物化视图的所有者</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d214849e514" headers="d214849e498 ">
                                       <p><code class="codeph">mvname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d214849e514 d214849e501 ">
                                       <p>多维数据集的名称（例如<code class="codeph">UNITS_CUBE</code> ）或多维数据集物化视图（例如<code class="codeph">CB$UNITS_CUBE</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d214849e527" headers="d214849e498 ">
                                       <p><code class="codeph">reqtype</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d214849e527 d214849e501 ">
                                       <p>要生成的建议类型：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">0</code> ：所有适用的建议类型</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">1</code> ：列<code class="codeph">NOT NULL</code>约束</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">2</code> ：主键约束</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">3</code> ：外键约束</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">4</code> ：关系维度对象</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">5</code> ：多维数据集物化视图日志与主键</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d214849e569" headers="d214849e498 ">
                                       <p><code class="codeph">验证</code></p>
                                    </td>
                                    <td align="left" valign="top" width="77%" headers="d214849e569 d214849e501 ">
                                       <p>验证选项：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">0</code> ：验证约束</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">1</code> ：不验证约束</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9BF180DF-30CB-49A8-A3AD-0C355968D5A4__GUID-9C2BCE3E-B1ED-47F9-83D8-A18A7AD88E0E">返回</p>
                        <p><code class="codeph">COAD_ADVICE_T</code>类型的表，由一组<code class="codeph">COAD_ADVICE_REC</code>类型的行<code class="codeph">COAD_ADVICE_REC</code> 。 <a href="DBMS_CUBE_ADVISE.html#GUID-9BF180DF-30CB-49A8-A3AD-0C355968D5A4__BABEGCDE" title="表类型COAD_ADVICE_T的列描述">表42-3说明</a>了这些列。
                        </p>
                        <div class="tblformal" id="GUID-9BF180DF-30CB-49A8-A3AD-0C355968D5A4__BABEGCDE">
                           <p class="titleintable">表42-3 MV_CUBE_ADVICE返回值</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="MV_CUBE_ADVICE返回值" width="100%" border="1" summary="Column descriptions for table type COAD_ADVICE_T" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d214849e614">柱</th>
                                    <th align="left" valign="bottom" width="21%" id="d214849e617">数据类型</th>
                                    <th align="left" valign="bottom" width="59%" id="d214849e620">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d214849e625" headers="d214849e614 ">
                                       <p><code class="codeph">所有者</code></p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d214849e625 d214849e617 ">
                                       <p><code class="codeph">VARCHAR2（30）</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d214849e625 d214849e620 ">
                                       <p><code class="codeph">APIOBJECT</code>标识的维对象的<code class="codeph">APIOBJECT</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d214849e640" headers="d214849e614 ">
                                       <p><code class="codeph">的APIObject</code></p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d214849e640 d214849e617 ">
                                       <p><code class="codeph">VARCHAR2（30）</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d214849e640 d214849e620 ">
                                       <p>使用物化视图功能增强的多维数据集的名称，例如<code class="codeph">UNITS_CUBE</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d214849e655" headers="d214849e614 ">
                                       <p><code class="codeph">SQLOBJOWN</code></p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d214849e655 d214849e617 ">
                                       <p><code class="codeph">VARCHAR2（30）</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d214849e655 d214849e620 ">
                                       <p><code class="codeph">SQLOBJECT</code>标识的关系对象的<code class="codeph">SQLOBJECT</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d214849e670" headers="d214849e614 ">
                                       <p><code class="codeph">SQLObject的</code></p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d214849e670 d214849e617 ">
                                       <p><code class="codeph">VARCHAR2（65）</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d214849e670 d214849e620 ">
                                       <p>主表的名称，例如<code class="codeph">UNITS_FACT</code> ，或多维数据集物化视图，例如<code class="codeph">CB$UNITS_CUBE</code> 。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d214849e688" headers="d214849e614 ">
                                       <p><code class="codeph">ADVICETYPE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d214849e688 d214849e617 ">
                                       <p><code class="codeph">NUMBER（38,0）</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d214849e688 d214849e620 ">
                                       <p>推荐类型：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p><code class="codeph">1</code> ：在外键列上创建<code class="codeph">NOT NULL</code>约束</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">2</code> ：在主表上创建主键约束</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">3</code> ：在主视图上创建主键约束</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">4</code> ：在主表上创建外键约束</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">5</code> ：在主视图上创建外键约束</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">6</code> ：在主维度表上创建关系维度</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">7</code> ：创建物化视图日志</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">8</code> ：编译物化视图</p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d214849e744" headers="d214849e614 ">
                                       <p><code class="codeph">DISPOSITION</code></p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d214849e744 d214849e617 ">
                                       <p><code class="codeph">CLOB</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d214849e744 d214849e620 ">
                                       <p>预先存在的条件与建议冲突，应该在<code class="codeph">SQLTEXT</code>执行之前解决。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d214849e759" headers="d214849e614 ">
                                       <p><code class="codeph">SQLTEXT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d214849e759 d214849e617 ">
                                       <p><code class="codeph">CLOB</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d214849e759 d214849e620 ">
                                       <p>实现建议的SQL语句。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d214849e771" headers="d214849e614 ">
                                       <p><code class="codeph">DROPTEXT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="21%" headers="d214849e771 d214849e617 ">
                                       <p><code class="codeph">CLOB</code></p>
                                    </td>
                                    <td align="left" valign="top" width="59%" headers="d214849e771 d214849e620 ">
                                       <p>反转<code class="codeph">SQLTEXT</code> SQL语句。</p>
                                       <p>预先存在的条件可能会阻止这些语句将模式还原到其先前的状态。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9BF180DF-30CB-49A8-A3AD-0C355968D5A4__GUID-751DD6C3-2516-4716-80AB-1E59CC3B0A56">使用说明</p>
                        <p>此功能在Analytic Workspace Manager中作为Materialized View Advisor提供，它将生成带有建议的SQL脚本。</p>
                        <p>您可以像查看任何其他表一样查询返回的行，如示例所示。</p>
                        <p><code class="codeph">MV_CUBE_ADVICE</code>每次调用时<code class="codeph">MV_CUBE_ADVICE</code>生成唯一的对象名称。您应该执行一次该函数，捕获结果，并使用这些SQL语句。
                        </p>
                        <p>删除数据库对象时要小心。如果表已有物化视图日志，则它将与<code class="codeph">DROPTEXT</code>列中的SQL <code class="codeph">DROP MATERIALIZED VIEW LOG</code>语句中使用的名称相同。您应该避免无意中丢弃物化视图日志，尤其是当它们可能用于远程数据复制时。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9BF180DF-30CB-49A8-A3AD-0C355968D5A4__GUID-5D83DDF5-B72F-47A8-A12D-8E018723EACF">例子</p>
                        <p>以下查询显示<code class="codeph">MV_CUBE_ADVICE</code>建议的SQL语句。 <code class="codeph">UNITS_FACT</code>是<code class="codeph">UNITS_CUBE</code>的主表， <code class="codeph">MV_CUBE_ADVICE</code>生成ALTER <code class="codeph">TABLE</code>命令以添加主键约束。
                        </p>
                        <p>它还会生成<code class="codeph">ALTER MATERIALIZED VIEW</code>命令以编译<code class="codeph">CB$UNITS_CUBE</code>多维数据集物化视图。
                        </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT apiobject，sqlobject，sqltext FROM TABLE（dbms_cube_advise.mv_cube_advice（'GLOBAL'，'CB $ UNITS_CUBE'））; APIOBJECT SQLOBJECT SQLTEXT ------------ --------------- -------------------- ------------------------- UNITS_CUBE UNITS_FACT alter table“GLOBAL”。“UNITS_FACT”add constra int“COAD_PK000208”PRIMARY KEY（“CHANNEL_ID”，“ ITEM_ID“，”SHIP_TO_ID“，”MONTH_ID“）依赖d isable novalidate UNITS_CUBE CB $ UNITS_CUBE改变物化视图”GLOBAL“。”CB $ UNITS_CU BE“编译</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65769"></a><a id="ARPLS65770"></a><a id="ARPLS65770"></a><a id="ARPLS65769"></a><div class="props_rev_3"><a id="GUID-A7B56393-EC3D-4F66-B844-740756B443AB" name="GUID-A7B56393-EC3D-4F66-B844-740756B443AB"></a><h4 id="ARPLS-GUID-A7B56393-EC3D-4F66-B844-740756B443AB" class="sect4"><span class="enumeration_section">42.2.2</span> SET_CNS_EXCEPTION_LOG过程</h4>
                  <div>
                     <p>此过程标识由<code class="codeph">MV_CUBE_ADVICE</code>生成的验证约束中使用的异常日志的名称。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-A7B56393-EC3D-4F66-B844-740756B443AB__GUID-31965870-B2D7-4409-A3E2-AF5A03CE52E5">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE_ADVISE.SET_CNS_EXCEPTION_LOG（除了logtab IN VARCHAR2 DEFAULT用户。例外）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A7B56393-EC3D-4F66-B844-740756B443AB__GUID-1602C6B2-1461-49E7-9CE2-1D278DFFB127">参数</p>
                        <div class="tblformal" id="GUID-A7B56393-EC3D-4F66-B844-740756B443AB__GUID-5B98D948-7B92-4413-B21A-7AC7BBC65943">
                           <p class="titleintable">表42-4 SET_CNS_EXCEPTION_LOG过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SET_CNS_EXCEPTION_LOG过程参数" width="100%" border="1" summary="This table describes the parameters of the SET_CNS_EXCEPTION_LOG procedure." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d214849e950">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d214849e953">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d214849e958" headers="d214849e950 ">
                                       <p><code class="codeph">exceptlogtab</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d214849e958 d214849e953 ">
                                       <p>现有异常日志的名称。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A7B56393-EC3D-4F66-B844-740756B443AB__GUID-CB6D437A-EF96-4B5F-A0F3-3C2144EB0731">使用说明</p>
                        <p>要创建例外日志，请在执行<code class="codeph">SET_CNS_EXCEPTION_LOG</code>之前使用<code class="codeph">utlexcpt.sql</code>或<code class="codeph">utlexpt1.sql</code>脚本。</p>
                        <p><code class="codeph">MV_CUBE_ADVICE</code>的<code class="codeph">validate</code>参数必须设置为<code class="codeph">1</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A7B56393-EC3D-4F66-B844-740756B443AB__GUID-713F45AA-E3C6-46F0-9E8C-C74FA98229FC">例子</p>
                        <p><code class="codeph">utlexcpt.sql</code>脚本创建一个名为<code class="codeph">EXCEPTIONS</code>的表， <code class="codeph">SET_CNS_EXCEPTION_LOG</code>过程将其标识为<code class="codeph">MV_CUBE_ADVICE</code>的异常日志。 <code class="codeph">ALTER TABLE</code>语句现在包含子句<code class="codeph">VALIDATE EXCEPTIONS INTO "GLOBAL"."EXCEPTIONS"</code> 。
                        </p><pre class="oac_no_warn" dir="ltr">SQL&gt; @utlexcpt创建表。SQL&gt; EXECUTE dbms_cube_advise.set_cns_exception_log; PL / SQL过程成功完成。SQL&gt; SELECT apiobject，sqlobject，advicetype type，sqltext FROM TABLE（dbms_cube_advise.mv_cube_advice（'GLOBAL'，'CB $ UNITS_CUBE'，'2'，1））; APIOBJECT SQLOBJECT TYPE SQLTEXT ------------ --------------- ---- --------------- ------------------------------- UNITS_CUBE UNITS_FACT 2 alter table“GLOBAL”。“UNITS_FACT”添加约束“COAD_PK000219”PRIMARY KEY（“CHANNEL_ID”，“ITEM_ID”，“SHIP_TO_ID”，“MONTH_ID”）非常能够将异常验证到“GLOBAL”。“除了IONS”UNITS_CUBE CB $ UNITS_CUBE 8改变物化视图“GLOBAL”。“CB $ UNITS_CUB E”编</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS65771"></a><a id="ARPLS65772"></a><a id="ARPLS65772"></a><a id="ARPLS65771"></a><div class="props_rev_3"><a id="GUID-80C92CEA-D6C3-404B-8380-2CBC1C7A24A9" name="GUID-80C92CEA-D6C3-404B-8380-2CBC1C7A24A9"></a><h4 id="ARPLS-GUID-80C92CEA-D6C3-404B-8380-2CBC1C7A24A9" class="sect4"><span class="enumeration_section">42.2.3</span> TRACE程序</h4>
                  <div>
                     <p>此过程打开和关闭<code class="codeph">MV_CUBE_ADVICE</code>函数的服务器输出的诊断消息。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-80C92CEA-D6C3-404B-8380-2CBC1C7A24A9__GUID-5BA6CB10-4B7A-43C4-85C0-B953A5256828">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_CUBE_ADVISE.TRACE（diaglevel IN BINARY_INTEGER DEFAULT 0）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-80C92CEA-D6C3-404B-8380-2CBC1C7A24A9__GUID-AC8F466D-5393-47B3-A7C6-247C0B88C84C">参数</p>
                        <div class="tblformal" id="GUID-80C92CEA-D6C3-404B-8380-2CBC1C7A24A9__GUID-2C22F4EF-CC4E-47AA-8DEA-723490E65F55">
                           <p class="titleintable">表42-5 TRACE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="TRACE过程参数" width="100%" border="1" summary="Parameter Descriptions" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d214849e1129">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d214849e1132">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d214849e1137" headers="d214849e1129 ">
                                       <p><code class="codeph">DIAGLEVEL</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d214849e1137 d214849e1132 ">
                                       <p><code class="codeph">0</code>表示关闭跟踪，或<code class="codeph">1</code>表示打开跟踪。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-80C92CEA-D6C3-404B-8380-2CBC1C7A24A9__GUID-49351EE3-FDCA-44E7-939D-101EBA3D08E5">例子</p>
                        <p>以下示例将诊断消息定向到服务器输出。SQL * Plus <code class="codeph">SERVEROUTPUT</code>设置显示消息。
                        </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SET SERVEROUT ON FORMAT WRAPPED SQL&gt; EXECUTE dbms_cube_advise.trace（1）; DBMS_COAD_DIAG：将diagLevel从[0]更改为[1] PL / SQL过程已成功完成。SQL&gt; SELECT sqlobject，sqltext，droptext FROM TABLE（dbms_cube_advise.mv_cube_advice（'GLOBAL'，'CB $ UNITS_CUBE'））WHERE apiobject ='UNITS_CUBE'; SQLOBJECT SQLTEXT DROPTEXT --------------- -------------------------------- -------- ---------------------------------------- UNITS_FACT alter表“GLOBAL”。“UNITS_FACT”添加变更表“GLOBAL”。“UNITS_FACT”drop c nstraint“COAD_PK000222”PRIMARY KEY（“C onstraint”COAD_PK000222“cascade HANNEL_ID”，“ITEM_ID”，“SHIP_TO_ID”，“MO NTH_ID” ）depend disable novalidate CB $ UNITS_CUBE alter materialized view“GLOBAL”。“CB $ UNI alter materialized view”GLOBAL“。”CB $ UNI TS_CUBE“compile TS_CUBE”compile 20070706 07:25:27.462780000 DBMS_COAD_DIAG注意：参数mvOwner：GLOBAL 20070706 07 ：25：27.462922000 DBMS_COAD_DIAG注意：参数mvName：CB $ UNITS_CUBE 20070706 07：25：27.462967000 DBMS_COAD_DIAG注意：参数factTab :.20070706 07：25：27.463011000 DBMS_COAD_DIAG注意：参数cubeName：UNITS_CUBE 20070706 07：25：27.463053000 DBMS_COAD_DIAG注意：参数cnsState：depend disable novalidate 20070706 07：25：27.463094000 DBMS_COAD_DIAG注意：参数NNState：disable novalidate 20070706 07：25：27.462368000 DBMS_COAD_DIAG注意：开始NN：20070706 07：25：27.833530000 DBMS_COAD_DIAG注意：结束NN：20070706 07：25：27.833620000 DBMS_COAD_DIAG注意：开始PK：20070706 07：25：28.853418000 DBMS_COAD_DIAG注意：结束PK：20070706 07：25：28.853550000 DBMS_COAD_DIAG注意：开始FK：20070706 07：25：28.853282000 DBMS_COAD_DIAG注意：结束FK：20070706 07：25：28.853359000 DBMS_COAD_DIAG注意：开始RD：20070706 07：25：29.660471000 DBMS_COAD_DIAG注意：结束RD：20070706 07：25：29.661363000 DBMS_COAD_DIAG注意：开始CM： 20070706 07：25：29.665106000 DBMS_COAD_DIAG注意：结束CM：SQL&gt; EXECUTE dbms_cube_advise.trace（0）; DBMS_COAD_DIAG：将diagLevel从[1]更改为[0] PL / SQL过程已成功完成。</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
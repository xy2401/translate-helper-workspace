<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="To identify the storage requirements for using Oracle ASM, you must determine the number of devices and the amount of free disk space that you require."></meta>
      <meta name="description" content="To identify the storage requirements for using Oracle ASM, you must determine the number of devices and the amount of free disk space that you require."></meta>
      <title>确定Oracle自动存储管理的存储要求</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Grid Infrastructure Installation and Upgrade Guide"></meta>
      <meta property="og:description" content="To identify the storage requirements for using Oracle ASM, you must determine the number of devices and the amount of free disk space that you require."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Grid Infrastructure Installation and Upgrade Guide for Linux"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="grid-infrastructure-installation-and-upgrade-guide-linux.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-23T21:10:05-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2013, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96272-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="configuring-storage-for-oracle-automatic-storage-management.html" title="Previous" type="text/html"></link>
      <link rel="next" href="oracle-clusterware-storage-space-requirements.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Grid Infrastructure Installation and Upgrade Guide for Linux"></meta>
    <meta name="dcterms.isVersionOf" content="CWLIN"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="configuring-storage-for-oracle-automatic-storage-management.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="oracle-clusterware-storage-space-requirements.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Grid Infrastructure安装和升级指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="configuring-storage-for-oracle-grid-infrastructure-for-a-cluster.html" property="item" typeof="WebPage"><span property="name">配置Oracle Grid Infrastructure的存储</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="configuring-storage-for-oracle-automatic-storage-management.html" property="item" typeof="WebPage"><span property="name">配置Oracle自动存储管理存储</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">确定Oracle自动存储管理的存储要求</li>
            </ol>
            <a id="GUID-82B9A93B-185F-4DE8-8D90-606192004EAD" name="GUID-82B9A93B-185F-4DE8-8D90-606192004EAD"></a>
            
            <h2 id="CWLIN-GUID-82B9A93B-185F-4DE8-8D90-606192004EAD" class="sect2">确定Oracle自动存储管理的存储要求</h2>
         </header>
         <div class="ind">
            <div>
               <p>要确定使用Oracle ASM的存储要求，必须确定所需的设备数量和可用磁盘空间量。</p>
               <div class="section">若要完成此任务，请按照下列步骤操作：</div>
               <!-- class="section" -->
               <ol>
                  <li class="stepexpand"><span>根据要部署的群集配置，规划Oracle ASM磁盘组要求。Oracle Domain Services Clusters将Oracle Clusterware文件和Grid Infrastructure Management Repository（GIMR）存储在单独的Oracle ASM磁盘组上，因此需要配置两个单独的Oracle ASM磁盘组，一个用于OCR和投票文件，另一个用于GIMR。</span></li>
                  <li class="stepexpand"><span>确定是否要将Oracle ASM用于Oracle数据库文件，恢复文件和Oracle数据库二进制文件。Oracle数据库文件包括数据文件，控制文件，重做日志文件，服务器参数文件和密码文件。</span><div>
                        <div class="infoboxnote" id="GUID-82B9A93B-185F-4DE8-8D90-606192004EAD__GUID-998A9478-6CDD-4CE9-86DC-354636447B64">
                           <p class="notep1">注意：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>您不必对Oracle数据库文件和恢复文件使用相同的存储机制。您可以将共享文件系统用于一种文件类型，将Oracle ASM用于另一种文件类型。</p>
                              </li>
                              <li>
                                 <p>Oracle Clusterware文件有两种类型：OCR文件和投票文件。您可以使用Oracle ASM或共享文件系统在Oracle Standalone Cluster部署中存储OCR和投票文件，但必须使用Oracle ASM在Oracle Domain Services集群部署上存储OCR和投票文件。</p>
                              </li>
                              <li>
                                 <p>如果数据库文件存储在共享文件系统上，则可以继续将其用于数据库文件，而不是将其移动到Oracle ASM存储。</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </li>
                  <li class="stepexpand"><span>选择要用于Oracle ASM磁盘组的Oracle ASM冗余级别。</span><div>
                        <p>除使用外部冗余外，Oracle ASM将所有Oracle Clusterware文件镜像到磁盘组中的不同故障组中。仲裁失败组是一种特殊类型的失败组，当投票文件存储在普通或高冗余磁盘组中时，它包含投票文件的镜像副本。包含Oracle Clusterware文件（OCR和投票文件）的磁盘组比其他磁盘组具有更高的最小故障组数，因为投票文件存储在Oracle ASM磁盘组的仲裁故障组中。</p>
                        <p>仲裁失败组是一种特殊类型的故障组，用于存储Oracle Clusterware投票文件。仲裁失败组用于确保指定故障组的法定数量可用。当Oracle ASM装入包含Oracle Clusterware文件的磁盘组时，仲裁失败组用于确定是否可以在丢失一个或多个故障组时装入磁盘组。仲裁失败组中的磁盘不包含用户数据，因此在确定存储用户数据的冗余要求时不考虑仲裁失败组。</p>
                        <p>冗余级别如下：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>高冗余</p>
                              <p>在高冗余磁盘组中，Oracle ASM使用三向镜像来提高性能并提供最高级别的可靠性。高冗余磁盘组至少需要三个磁盘设备（或三个故障组）。高冗余磁盘组中的有效磁盘空间是其所有设备中磁盘空间总和的三分之一。</p>
                              <p>对于Oracle Clusterware文件，高冗余磁盘组至少需要五个磁盘设备，并提供五个投票文件和一个OCR（一个主副本和两个副本）。例如，您的部署可能包含三个常规故障组和两个仲裁故障组。请注意，并非所有故障组都可以是仲裁故障组，即使投票文件需要所有五个磁盘。通过高冗余，群集可以在丢失两个故障组后继续存在。</p>
                              <p>虽然高冗余磁盘组确实提供了高级别的数据保护，但在决定选择高冗余磁盘组之前，应考虑额外存储设备的更高成本。</p>
                           </li>
                           <li>
                              <p>正常冗余</p>
                              <p>在常规冗余磁盘组中，为了提高性能和可靠性，Oracle ASM默认使用双向镜像。普通冗余磁盘组至少需要两个磁盘设备（或两个故障组）。普通冗余磁盘组中的有效磁盘空间是其所有设备中磁盘空间总和的一半。</p>
                              <p>对于Oracle Clusterware文件，普通冗余磁盘组至少需要三个磁盘设备，并提供三个投票文件和一个OCR（一个主副本和一个副本）。例如，您的部署可能包含两个常规故障组和一个仲裁故障组。通过正常冗余，群集可以在丢失一个故障组后继续存在。</p>
                              <p>如果您没有使用存储阵列来提供针对存储的数据丢失的独立保护，那么Oracle建议您选择正常冗余。</p>
                           </li>
                           <li>
                              <p>外部冗余</p>
                              <p>外部冗余磁盘组至少需要一个磁盘设备。外部冗余磁盘组中的有效磁盘空间是其所有设备中磁盘空间的总和。</p>
                              <p>由于Oracle ASM不镜像外部冗余磁盘组中的数据，因此Oracle建议您对存储设备（如RAID）或其他提供自己的数据保护机制的类似设备使用外部冗余。</p>
                           </li>
                           <li>
                              <p>Flex冗余</p>
                              <p>Flex冗余磁盘组是一种冗余磁盘组，具有灵活的文件冗余，镜像拆分和冗余更改等功能。Flex磁盘组可以将具有不同冗余要求的文件合并到一个磁盘组中。它还为数据库提供了更改其文件冗余的功能。磁盘组是文件组的集合，每个文件组与一个数据库相关联。配额组定义磁盘组中一组数据库的最大存储空间或配额限制。</p>
                              <p>在Flex冗余磁盘组中，Oracle ASM使用Oracle ASM元数据的三向镜像来提高性能并提供可靠性。对于数据库数据，您可以选择不镜像（不受保护），双向镜像（镜像）或三向镜像（高）。Flex冗余磁盘组至少需要三个磁盘设备（或三个故障组）。</p>
                           </li>
                           <li>
                              <p>扩展冗余</p>
                              <p>扩展冗余磁盘组具有与Flex冗余磁盘组类似的功能。配置Oracle扩展群集时，可以使用扩展冗余。扩展冗余扩展了Oracle ASM数据保护，通过在每个站点的不同故障组中放置足够的数据副本来覆盖站点故障。站点是故障组的集合。对于具有三个站点（例如，两个数据站点和一个仲裁故障组）的扩展冗余，最小磁盘数为七（两个数据站点各三个磁盘，两个数据站点之外一个仲裁故障组）。扩展冗余支持的最大站点数为3。在扩展冗余磁盘组中，每个站点都维护文件组属性指定的用户数据冗余。每个站点都可以托管给定磁盘组的数据故障组和仲裁故障组。例如，如果文件组冗余指定为2或3，则每个站点分别有2个或3个镜像，前提是有足够的故障组来容纳镜像。有关为扩展群集选择冗余级别的详细信息，请参阅<cite>关于Oracle Extended Clusters</cite> 。
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-82B9A93B-185F-4DE8-8D90-606192004EAD__GUID-6EFDFF93-BECA-41A1-BED6-91689EDBD87F">
                           <p class="notep1">也可以看看：</p>有关Flex磁盘组的文件组和配额组的详细信息，请参见<a href="../ostmg/asm-intro.html#OSTMG94058" target="_blank"><span class="italic">“Oracle自动存储管理管理员指南”</span></a></div>
                        <div class="infoboxnote" id="GUID-82B9A93B-185F-4DE8-8D90-606192004EAD__GUID-87B2E85E-8D0E-4AE2-852C-7F75A9711AF8">
                           <p class="notep1">注意：</p>
                           <p>创建磁盘组后，可以更改磁盘组的冗余级别。例如，您可以将普通或高冗余磁盘组转换为Flex冗余磁盘组。在Flex冗余磁盘组中，文件冗余可以在三个可能的值之间更改：不受保护，镜像或高。</p>
                        </div>
                     </div>
                  </li>
                  <li class="stepexpand"><span>确定Oracle Clusterware文件以及数据库文件和恢复文件所需的磁盘空间总量。</span><div>
                        <p>如果系统上正在运行Oracle ASM实例，则可以使用现有磁盘组来满足这些存储要求。如有必要，可以在数据库安装期间将磁盘添加到现有磁盘组。</p>
                        <p>请参阅<cite>Oracle Clusterware存储空间要求</cite>以确定安装Oracle Clusterware文件的最小磁盘数和最小磁盘空间要求，以及安装启动器数据库，其中您将投票文件放在单独的磁盘组中。
                        </p>
                     </div>
                  </li>
                  <li class="stepexpand"><span>确定分配单元大小。</span><div>
                        <p>每个Oracle ASM磁盘都分为分配单元（AU）。分配单元是磁盘组内的基本分配单位。您可以从1,2,4,8,16,32或64 MB中选择AU Size值，具体取决于特定的磁盘组兼容级别。对于Flex磁盘组，AU大小的默认值设置为4 MB。对于外部，正常和高冗余，默认AU大小为1 MB。</p>
                     </div>
                  </li>
                  <li class="stepexpand"><span>对于Oracle Clusterware安装，还必须为Oracle ASM元数据添加额外的磁盘空间。您可以使用以下公式计算OCR和投票文件以及Oracle ASM元数据的磁盘空间要求（以MB为单位）：</span><div><pre class="pre codeblock"><code>total = [2 * ausize * disks] + [redundancy *（ausize *（all_client_instances + nodes + disks + 32）+（64 * nodes）+ clients + 543）]</code></pre><p>redundancy =镜像数：external = 1，normal = 2，high = 3，flex = 3。</p>
                        <p>ausize =元数据AU大小，以兆字节为单位</p>
                        <p>all_client_instance =所有数据库客户端和ACFS代理实例的总和</p>
                        <p>nodes =集群中的节点数。</p>
                        <p>clients  - 每个节点的数据库实例数。</p>
                        <p>disks  - 磁盘组中的磁盘数。</p>
                        <p>例如，对于四节点Oracle RAC安装，在正常冗余磁盘组中使用三个磁盘，则需要额外的5293 MB空间： <code class="codeph">[2 * 4 * 3] + [2 * (4 * (4 * (4 + 1)+ 30)+ (64 * 4)+ 533)] = 5293 MB</code></p>
                     </div>
                  </li>
                  <li class="stepexpand"><span>（可选）识别Oracle ASM磁盘组设备的故障组。</span><div>
                        <p>如果您打算使用普通或高冗余磁盘组，则可以通过关联自定义故障组中的一组磁盘设备来进一步保护数据库免受硬件故障的影响。默认情况下，每个设备都包含在其故障组中。但是，如果正常冗余磁盘组中的两个磁盘设备连接到同一主机总线适配器（HBA），则如果适配器发生故障，则磁盘组将变为不可用。此示例中的HBA是单点故障。</p>
                        <p>例如，为了避免此类故障，您可以使用两个HBA结构路径，每个路径有两个磁盘，并为连接到每个适配器的磁盘定义故障组。此配置将使磁盘组能够容忍一个HBA结构路径的故障。</p>
                        <div class="infoboxnote" id="GUID-82B9A93B-185F-4DE8-8D90-606192004EAD__GUID-05B46A03-4B19-4F0F-80CA-DC0A06042119">
                           <p class="notep1">注意：</p>
                           <p>您可以在安装Oracle Grid Infrastructure期间定义自定义故障组。您还可以使用GUI工具ASMCA，命令行工具asmcmd或SQL命令在安装后定义故障组。如果定义自定义故障组，则必须为常规冗余磁盘组指定至少两个故障组，为高冗余磁盘组指定三个故障组。</p>
                        </div>
                     </div>
                  </li>
                  <li class="stepexpand"><span>如果您确定系统上不存在合适的磁盘组，请安装或识别要添加到新磁盘组的相应磁盘设备。在识别适当的磁盘设备时，请遵循以下准则：</span><ul>
                        <li>磁盘设备必须由执行Oracle Grid Infrastructure安装的用户拥有。</li>
                        <li>Oracle ASM磁盘组中的所有设备必须具有相同的大小并具有相同的性能特征。</li>
                        <li>不要将单个物理磁盘上的多个分区指定为磁盘组设备。Oracle ASM希望每个磁盘组设备都位于单独的物理磁盘上。</li>
                        <li>尽管您可以将逻辑卷指定为Oracle ASM磁盘组中的设备，但Oracle不建议使用它们，因为它会增加Oracle ASM不必要的复杂性。 Oracle建议，如果选择使用逻辑卷管理器，则使用逻辑卷管理器表示单个逻辑单元号（LUN），而不进行条带化或镜像，以便最大限度地减少对附加存储层的存储性能的影响。</li>
                     </ul>
                  </li>
                  <li class="stepexpand"><span>如果使用在网络文件系统（NFS）上创建的Oracle ASM磁盘组进行存储，请确保遵循<cite>在NFS上配置Oracle ASM磁盘组的准则中</cite>所述的建议。</span></li>
               </ol>
            </div>
            <div>
               <div class="relinfo">
                  <p><strong>相关话题</strong></p>
                  <ul>
                     <li><a href="storage-checklist-for-oracle-grid-infrastructure.html#GUID-92B4918E-92A1-46CD-AC85-7C25C6E6B8A1" title="查看Oracle Grid Infrastructure安装的存储硬件和配置要求清单。">Oracle Grid Infrastructure的存储核对表</a></li>
                     <li><a href="oracle-clusterware-storage-space-requirements.html#GUID-97FD5D40-A65B-4575-AD12-06C491AF3F41" title="使用此信息可确定基于冗余类型的最小磁盘数和最小磁盘空间要求，以便为各种Oracle Cluster部署安装Oracle Clusterware文件。">Oracle Clusterware存储空间要求</a></li>
                     <li><a href="configuring-storage-device-path-persistence-using-oracle-asmfd.html#GUID-B5D06658-1B1B-4922-8853-50670ABCDADB" title="Oracle ASM筛选器驱动程序（Oracle ASMFD）维护存储文件路径持久性，并有助于保护文件免遭意外覆盖。">使用Oracle ASMFD配置存储设备路径持久性</a></li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="configuring-storage-for-oracle-automatic-storage-management.html#GUID-CBDF7400-9A35-4548-A3F2-52BA6871F130" title="确定存储要求和Oracle ASM磁盘组选项。">为Oracle自动存储管理配置存储</a></p>
                  </div>
               </div>
            </div>
            
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Triggers are stored PL/SQL units that automatically execute (" fir=")=" =""></meta>
      <meta name="description" content="Triggers are stored PL/SQL units that automatically execute (" fir=")=" =""></meta>
      <title>使用触发器</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="2 Day Developer&#39;s Guide "></meta>
      <meta property="og:description" content="Triggers are stored PL/SQL units that automatically execute (" fir=")=" =""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="2 Day Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="2-day-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-10T13:00:30-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E94801-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="stored-subprograms-packages.html" title="Previous" type="text/html"></link>
      <link rel="next" href="working-in-global-environment.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="2 Day Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="TDDDG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="stored-subprograms-packages.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="working-in-global-environment.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">2天开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用触发器</li>
            </ol>
            <a id="GUID-3744214A-861D-4C59-AD2D-95840B5B0871" name="GUID-3744214A-861D-4C59-AD2D-95840B5B0871"></a><a id="TDDDG50000"></a>
            
            <h2 id="TDDDG-GUID-3744214A-861D-4C59-AD2D-95840B5B0871" class="sect2"><span class="enumeration_chapter">6</span>使用触发器</h2>
         </header>
         <div class="ind">
            <div>
               <p>触发器存储PL / SQL单元，它们自动执行（“触发”）以响应指定的事件。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="using-triggers.html#GUID-689B2CE6-70CE-40BE-B009-50545667AAD6">关于触发器</a><br><strong class="term">触发器</strong>是存储在数据库中的PL / SQL单元，并且（如果它处于启用状态）自动执行（“触发”）以响应指定的事件。
                  </li>
                  <li class="ulchildlink"><a href="using-triggers.html#GUID-96CB6070-0C3A-4A1F-953A-FF67A487E212">创建触发器</a><br>要创建触发器，请使用SQL Developer图形界面或DDL语句<span class="keyword">CREATE TRIGGER</span> 。</li>
                  <li class="ulchildlink"><a href="using-triggers.html#GUID-5941E132-742E-4337-9D8C-F835E2F1F1E0">更改触发器</a><br>要更改触发器，请使用SQL Developer工具Edit或DDL语句<span class="keyword">CREATE TRIGGER</span>和<span class="keyword">OR REPLACE</span>子句。
                  </li>
                  <li class="ulchildlink"><a href="using-triggers.html#GUID-86E7AF13-C7A6-4594-A333-180DD16382AA">禁用和启用触发器</a><br>您可能需要临时禁用引用不可用对象的触发器，或者在没有触发原因的延迟的情况下上载大量数据（如在恢复操作中）。在引用的对象可用之后，或者您已完成上载数据后，可以重新启用触发器。
                  </li>
                  <li class="ulchildlink"><a href="using-triggers.html#GUID-71D9EE5D-145E-4A94-871E-4C56977DDCC8">关于触发器编译和依赖关系</a><br>编译的触发器取决于定义它们的模式对象。如果触发器所依赖的对象被丢弃或更改，使得触发器和对象之间不匹配，则触发器无效。
                  </li>
                  <li class="ulchildlink"><a href="using-triggers.html#GUID-D3E33697-8B08-456E-AA33-A1A6C1CB506C">删除触发器</a><br></li>
               </ul>
            </div>
            <a id="TDDDG51000"></a><div class="props_rev_3"><a id="GUID-689B2CE6-70CE-40BE-B009-50545667AAD6" name="GUID-689B2CE6-70CE-40BE-B009-50545667AAD6"></a><h3 id="TDDDG-GUID-689B2CE6-70CE-40BE-B009-50545667AAD6" class="sect3"><span class="enumeration_section">6.1</span>关于触发器</h3>
               <div>
                  <p><strong class="term">触发器</strong>是存储在数据库中的PL / SQL单元，并且（如果它处于启用状态）自动执行（“触发”）以响应指定的事件。
                  </p>
                  <p>触发器具有以下结构：</p><pre class="oac_no_warn" dir="ltr">TRIGGER <span class="italic">trigger_name</span> <span class="italic">triggering_event</span> [ <span class="italic">trigger_restriction</span> ] BEGIN <span class="italic">triggered_action</span> ;结束;</pre><p>对于架构中的触发器， <span class="synph">trigger_name</span>必须是唯一的。触发器可以与架构中的另一种对象具有相同的名称（例如，表）;但是，Oracle建议使用避免混淆的命名约定。
                  </p>
                  <p>如果触发器处于<strong class="term">启用</strong>状态，则<span class="synph">triggering_event</span>会在<span class="synph">trigger_restriction</span>为<span class="keyword">TRUE</span>或省略时使数据库执行<span class="synph">triggered_action</span> 。<span class="synph">triggering_event</span>与表，视图，架构或数据库相关联，它是以下之一：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>DML语句（在<span class="q">“ <a href="dml-and-transactions.html#GUID-40EE6F61-F008-4F37-8256-D31A2DE49DC9" title="数据操作语言（DML）语句访问和操作现有表中的数据。">关于数据操作语言（DML）语句</a> ”中描述</span> ）</p>
                     </li>
                     <li>
                        <p>DDL语句（在<span class="q">“ <a href="creating-managing-schema-objects.html#GUID-0663F857-7E62-464C-9EE8-42BC600FAA6C" title="数据定义语言（DDL）语句创建，更改和删除模式对象。在DDL语句之前和之后，Oracle数据库发出隐式COMMIT语句;因此，您无法回滚DDL语句。">关于数据定义语言（DDL）语句</a> ”中描述</span> ）</p>
                     </li>
                     <li>
                        <p>数据库操作（ <span class="keyword">SERVERERROR</span> ， <span class="keyword">LOGON</span> ， <span class="keyword">LOGOFF</span> ， <span class="keyword">STARTUP</span>或<span class="keyword">SHUTDOWN</span> ）</p>
                     </li>
                  </ul>
                  <p>如果触发器处于<strong class="term">禁用</strong>状态，则<span class="synph">triggering_event</span>不会导致数据库执行<span class="synph">triggered_action</span> ，即使<span class="synph">trigger_restriction</span>为<span class="keyword">TRUE</span>或被省略。
                  </p>
                  <p>默认情况下，会在启用状态下创建触发器。您可以禁用已启用的触发器，并启用已禁用的触发器。</p>
                  <p>与子程序不同，不能直接调用触发器。触发器仅由其触发事件调用，该触发事件可由任何用户或应用程序引起。您可能不知道触发器正在执行，除非它导致错误处理不正确。</p>
                  <p>一个<strong class="term">简单的触发器</strong>可以恰好<strong class="term">触发</strong>其中一个<strong class="term">定时点</strong> ：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在执行触发事件之前（ <strong class="term">语句级别BEFORE触发器</strong> ）</p>
                     </li>
                     <li>
                        <p>触发事件执行后（ <strong class="term">语句级AFTER触发器</strong> ）</p>
                     </li>
                     <li>
                        <p>在事件影响的每一行之前（ <strong class="term">行级别BEFORE触发器</strong> ）</p>
                     </li>
                     <li>
                        <p>在事件影响的每一行之后（ <strong class="term">行级AFTER触发器</strong> ）</p>
                     </li>
                  </ul>
                  <p><strong class="term">复合触发器</strong>可以在多个定时点<strong class="term">触发</strong> 。有关复合触发器的信息，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tdddg&amp;id=LNPLS2005" target="_blank"><span class="italic">Oracle Database PL / SQL语言参考</span></a> 。
                  </p>
                  <p>在视图上定义了一个<strong class="term">INSTEAD OF触发器</strong> ，其触发事件是一个DML语句。Oracle数据库不执行DML语句，而是执行<span class="keyword">INSTEAD OF</span>触发器。有关更多信息，请参阅<span class="q">“ <a href="using-triggers.html#GUID-74B50A8E-6328-47D2-BA63-021BDE14E3BA" title="视图将查询的输出显示为表。如果要像更改表一样更改视图，则必须创建INSTEAD OF触发器。他们不是更改视图，而是更改基础表。">创建INSTEAD OF触发器</a> ”</span> 。
                  </p>
                  <p><strong class="term">系统触发器</strong>在架构或数据库上定义。在架构上定义的触发器会触发与架构所有者（当前用户）关联的每个事件。在数据库上定义的触发器将触发与所有用户关联的每个事件。
                  </p>
                  <p>触发器的一个用途是实施适用于所有客户端应用程序的业务规则。例如，假设添加到EMPLOYEES表的数据必须具有某种格式，并且许多客户端应用程序可以向此表添加数据。表上的触发器可以确保添加到其中的所有数据的正确格式。因为只要任何客户端向表添加数据，就会执行触发器，没有客户端可以规避规则，并且只能在触发器中而不是在每个客户端应用程序中存储和维护强制执行规则的代码。有关触发器的其他用法，请参阅<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tdddg&amp;id=LNPLS723" target="_blank"><span class="italic">Oracle Database PL / SQL语言参考</span></a> 。
                  </p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-689B2CE6-70CE-40BE-B009-50545667AAD6__GUID-35FAD35E-7B64-42A2-94FE-C82E7601A9B3">
                     <p class="notep1">也可以看看：</p>
                     <p>有关触发器的完整信息，请<a href="../lnpls/plsql-triggers.html#LNPLS020" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-triggers.html#GUID-3744214A-861D-4C59-AD2D-95840B5B0871" title="触发器存储自动执行的PL / SQL单元（" fir=")=" ="">使用触发器</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TDDDG52000"></a><div class="props_rev_3"><a id="GUID-96CB6070-0C3A-4A1F-953A-FF67A487E212" name="GUID-96CB6070-0C3A-4A1F-953A-FF67A487E212"></a><h3 id="TDDDG-GUID-96CB6070-0C3A-4A1F-953A-FF67A487E212" class="sect3"><span class="enumeration_section">6.2</span>创建触发器</h3>
               <div>
                  <p>要创建触发器，请使用SQL Developer图形界面或DDL语句<span class="keyword">CREATE TRIGGER</span> 。</p>
                  <div class="section">
                     <p>本节介绍如何使用这两种方法创建触发器。</p>
                     <p>默认情况下，会在启用状态下创建触发器。要在禁用状态下创建触发器，请使用带有<span class="keyword">DISABLE</span>子句的<span class="keyword">CREATE TRIGGER</span>语句。
                     </p>
                     <div class="infoboxnote" id="GUID-96CB6070-0C3A-4A1F-953A-FF67A487E212__GUID-52480FCA-E449-4182-B44B-4B4EF25529FA">
                        <p class="notep1">注意：</p>
                        <p>要创建触发器，您必须具有适当的权限;但是，对于此讨论，您不需要此附加信息。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnote" id="GUID-96CB6070-0C3A-4A1F-953A-FF67A487E212__GUID-85EC7288-2541-487E-ADF7-1B4F864FE388">
                        <p class="notep1">注意：</p>
                        <p>要执行本文档中的教程，您必须以SQL Developer中的用户HR身份连接到Oracle数据库。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-triggers.html#GUID-406D2D9C-7905-434F-9729-F9E2D8FCFAF7">关于OLD和NEW Pseudorecords</a><br>当行级触发器触发时，PL / SQL运行时系统会创建并填充两个伪记录<span class="keyword">OLD</span>和<span class="keyword">NEW</span> 。它们被称为伪记录，因为它们具有记录的一些但不是全部的属性。
                     </li>
                     <li class="ulchildlink"><a href="using-triggers.html#GUID-AC5E5CF6-CAD8-496F-9D3B-7E2B9BABCE37">教程：创建记录表更改的触发器</a><br>本教程介绍如何使用<span class="keyword">CREATE TRIGGER</span>语句创建触发器EVAL_CHANGE_TRIGGER，只要<span class="keyword">INSERT</span> ， <span class="keyword">UPDATE</span>或<span class="keyword">DELETE</span>语句更改EVALUATIONS表，就会向表EVALUATIONS_LOG添加一行。
                     </li>
                     <li class="ulchildlink"><a href="using-triggers.html#GUID-C4DA3CAF-522D-4851-84D2-732C8F1FCF5C">教程：创建在插入行之前为行生成主键的触发器</a><br>本教程介绍如何使用SQL Developer创建触发器工具创建在将行插入EVALUATIONS表之前触发的触发器，并使用EVALUATIONS_SEQUENCE生成该行的主键的唯一编号。</li>
                     <li class="ulchildlink"><a href="using-triggers.html#GUID-74B50A8E-6328-47D2-BA63-021BDE14E3BA">创建INSTEAD OF触发器</a><br>视图将查询的输出显示为表。如果要像更改表一样更改视图，则必须创建<span class="keyword">INSTEAD OF</span>触发器。他们不是更改视图，而是更改基础表。
                     </li>
                     <li class="ulchildlink"><a href="using-triggers.html#GUID-07B8E5A0-283E-47E2-9834-EFB02EB8D7E1">教程：创建记录LOGON和LOGOFF事件的触发器</a><br>本教程介绍如何使用<span class="keyword">CREATE TRIGGER</span>语句创建两个触发器HR_LOGON_TRIGGER和HR_LOGOFF_TRIGGER。 <span class="italic">在</span>有人以HR用户身份登录<span class="italic">后</span> ，HR_LOGON_TRIGGER会在表HR_USERS_LOG中添加一行。 <span class="italic">在</span>有人以HR用户身份注销<span class="italic">之前</span> ，HR_LOGOFF_TRIGGER会在表HR_USERS_LOG中添加一行。</li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-96CB6070-0C3A-4A1F-953A-FF67A487E212__GUID-8B5EE6C0-3D10-401E-97AB-7845E78774EB">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关<span class="keyword">CREATE TRIGGER</span>语句的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tdddg&amp;id=LNPLS01374" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="deploying-database-application.html#GUID-D044C8DC-3505-4885-8A86-ACAABF45F139" title="如果您的应用程序在源表上有一个BEFORE INSERT触发器，并且您将该源表中的数据插入到相应的新表中，则必须先确定是否要在安装脚本中的每个INSERT语句将数据插入到新表。">编辑创建触发器的安装脚本</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-triggers.html#GUID-3744214A-861D-4C59-AD2D-95840B5B0871" title="触发器存储自动执行的PL / SQL单元（" fir=")=" ="">使用触发器</a></p>
                     </div>
                  </div>
               </div>
               <a id="TDDDG99934"></a><div class="props_rev_3"><a id="GUID-406D2D9C-7905-434F-9729-F9E2D8FCFAF7" name="GUID-406D2D9C-7905-434F-9729-F9E2D8FCFAF7"></a><h4 id="TDDDG-GUID-406D2D9C-7905-434F-9729-F9E2D8FCFAF7" class="sect4"><span class="enumeration_section">6.2.1</span>关于OLD和NEW Pseudorecords</h4>
                  <div>
                     <p>当行级触发器触发时，PL / SQL运行时系统会创建并填充两个伪记录<span class="keyword">OLD</span>和<span class="keyword">NEW</span> 。它们被称为伪记录，因为它们具有记录的一些但不是全部的属性。
                     </p>
                     <p>对于触发器正在处理的行：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>对于<span class="keyword">INSERT</span>触发器， <span class="keyword">OLD不</span>包含任何值， <span class="keyword">NEW</span>包含新值。
                           </p>
                        </li>
                        <li>
                           <p>对于<span class="keyword">UPDATE</span>触发器， <span class="keyword">OLD</span>包含旧值， <span class="keyword">NEW</span>包含新值。
                           </p>
                        </li>
                        <li>
                           <p>对于<span class="keyword">DELETE</span>触发器， <span class="keyword">OLD</span>包含旧值，而<span class="keyword">NEW不</span>包含任何值。
                           </p>
                        </li>
                     </ul>
                     <p>要引用伪记录，请在<a href="using-triggers.html#GUID-74B50A8E-6328-47D2-BA63-021BDE14E3BA__BABBFAGD">示例6-1</a>中将冒号放在其名称前面： <code class="codeph">OLD</code>或： <code class="codeph">NEW</code> -as。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-406D2D9C-7905-434F-9729-F9E2D8FCFAF7__GUID-90B501F9-E210-4877-952A-F60E1B86C29B">
                        <p class="notep1">也可以看看：</p>
                        <p>有关<span class="keyword">OLD</span>和<span class="keyword">NEW</span>伪记录的详细信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tdddg&amp;id=LNPLS99955" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-triggers.html#GUID-96CB6070-0C3A-4A1F-953A-FF67A487E212" title="要创建触发器，请使用SQL Developer图形界面或DDL语句CREATE TRIGGER。">创建触发器</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG249"></a><a id="TDDDG52100"></a><div class="props_rev_3"><a id="GUID-AC5E5CF6-CAD8-496F-9D3B-7E2B9BABCE37" name="GUID-AC5E5CF6-CAD8-496F-9D3B-7E2B9BABCE37"></a><h4 id="TDDDG-GUID-AC5E5CF6-CAD8-496F-9D3B-7E2B9BABCE37" class="sect4"><span class="enumeration_section">6.2.2</span>教程：创建记录表更改的触发器</h4>
                  <div>
                     <p>本教程介绍如何使用<span class="keyword">CREATE TRIGGER</span>语句创建触发器EVAL_CHANGE_TRIGGER，只要<span class="keyword">INSERT</span> ， <span class="keyword">UPDATE</span>或<span class="keyword">DELETE</span>语句更改EVALUATIONS表，就会向表EVALUATIONS_LOG添加一行。
                     </p>
                     <div class="section">
                        <p>触发器<span class="italic">在</span>执行触发器语句<span class="italic">后</span>添加行，并使用<strong class="term">条件谓词</strong> <strong class="term">INSERTING</strong> ， <strong class="term">UPDATING</strong>和<strong class="term">DELETING</strong>来确定触发触发器的三个可能的DML语句中的哪一个。
                        </p>
                        <p>EVAL_CHANGE_TRIGGER是<strong class="term">语句级触发器</strong>和<strong class="term">AFTER触发器</strong> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-AC5E5CF6-CAD8-496F-9D3B-7E2B9BABCE37__GUID-07CEC8E5-47E5-44F3-BA43-CAE43C9C7071">要创建EVALUATIONS_LOG和EVAL_CHANGE_TRIGGER：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>创建EVALUATIONS_LOG表：</span><div><pre class="oac_no_warn" dir="ltr">CREATE TABLE EVALUATIONS_LOG（log_date DATE，action VARCHAR2（50））;</pre></div>
                        </li>
                        <li class="stepexpand"><span>创建EVAL_CHANGE_TRIGGER：</span><div><pre class="oac_no_warn" dir="ltr">在INSAL或更新或删除评估<span class="bold">后</span>创建或替换TRIGGER EVAL_CHANGE_TRIGGER DECLARE log_action EVALUATIONS_LOG.action％TYPE; BEGIN IF THEN <span class="bold">插入</span> log_action：= '插入'; ELSIF <span class="bold">更新</span>然后log_action：='更新'; ELSIF <span class="bold">删除</span>那么log_action：='删除'; ELSE DBMS_OUTPUT.PUT_LINE（'此代码无法访问。“）;万一; INSERT INTO EVALUATIONS_LOG（log_date，action）VALUES（SYSDATE，log_action）;结束;</pre></div>
                        </li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-AC5E5CF6-CAD8-496F-9D3B-7E2B9BABCE37__GUID-A69A470A-C85C-471E-B0F2-2937B3C41589">
                        <p class="notep1">也可以看看：</p>
                        <p>有关条件谓词的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tdddg&amp;id=LNPLS750" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-triggers.html#GUID-96CB6070-0C3A-4A1F-953A-FF67A487E212" title="要创建触发器，请使用SQL Developer图形界面或DDL语句CREATE TRIGGER。">创建触发器</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG250"></a><a id="TDDDG52700"></a><div class="props_rev_3"><a id="GUID-C4DA3CAF-522D-4851-84D2-732C8F1FCF5C" name="GUID-C4DA3CAF-522D-4851-84D2-732C8F1FCF5C"></a><h4 id="TDDDG-GUID-C4DA3CAF-522D-4851-84D2-732C8F1FCF5C" class="sect4"><span class="enumeration_section">6.2.3</span>教程：创建在插入行之前为行生成主键的触发器</h4>
                  <div>
                     <p>本教程介绍如何使用SQL Developer创建触发器工具创建在将行插入EVALUATIONS表之前触发的触发器，并使用EVALUATIONS_SEQUENCE生成该行的主键的唯一编号。</p>
                     <div class="section">
                        <p>序列EVALUATIONS_SEQUENCE（在<span class="q">“ <a href="creating-managing-schema-objects.html#GUID-3164ECEB-0C7C-4578-8237-0960CA424760" title="This tutorial shows how to use the Create Database Sequence tool to create a sequence to use to generate primary keys for the EVALUATIONS table.">教程：创建序列</a> ”中<a href="creating-managing-schema-objects.html#GUID-3164ECEB-0C7C-4578-8237-0960CA424760" title="本教程介绍如何使用“创建数据库序列”工具创建用于为EVALUATIONS表生成主键的序列。">创建</a></span> ）生成EVALUATIONS表的主键（在<span class="q">“ <a href="creating-managing-schema-objects.html#GUID-87AA2B05-2B7B-49D9-AD21-1B2877113D23" title="To create tables, use either the SQL Developer tool Create Table or the DDL statement CREATE TABLE.">创建表</a> ”</span>中<span class="q"><a href="creating-managing-schema-objects.html#GUID-87AA2B05-2B7B-49D9-AD21-1B2877113D23" title="要创建表，请使用SQL Developer工具Create Table或DDL语句CREATE TABLE。">创建</a></span> ）。但是，这些主键不会自动插入表中。
                        </p>
                        <p>本教程介绍如何使用SQL Developer创建触发器工具创建名为NEW_EVALUATION_TRIGGER的触发器，该触发器<span class="italic">在</span>将行插入EVALUATIONS表<span class="italic">之前</span>触发，并使用EVALUATIONS_SEQUENCE生成该行主键的唯一编号。 <span class="italic">对于</span>受触发INSERT语句影响的<span class="italic">每一行</span> ，触发器触发一次。
                        </p>
                        <p>NEW_EVALUATION_TRIGGER是<strong class="term">行级触发器</strong>和<strong class="term">BEFORE触发器</strong> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C4DA3CAF-522D-4851-84D2-732C8F1FCF5C__GUID-EBE0A20F-DDF8-4E75-8FB1-6E35288801F4">要创建NEW_EVALUATION触发器：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ol>
                           <li>
                              <p>在<span class="wintitle">Connections</span>框架中，展开<span class="uicontrol bold">hr_conn</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在架构对象类型列表中，右键单击“ <span class="uicontrol bold">触发器”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在选项列表中，单击“ <span class="uicontrol bold">新建触发器”</span> 。
                              </p>
                           </li>
                           <li>
                              <p>在“ <span class="wintitle">创建触发器”</span>窗口中：</p>
                              <ol type="a">
                                 <li>
                                    <p>在“ <span class="wintitle">名称”</span>字段中，键入<kbd class="userinput">NEW_EVALUATION_TRIGGER</kbd>超过默认值TRIGGER1。
                                    </p>
                                 </li>
                                 <li>
                                    <p>对于<span class="wintitle">Base Object</span> ，从菜单中选择<span class="uicontrol bold">EVALUATIONS</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>将<span class="uicontrol bold">INSERT</span>从<span class="wintitle">可用事件</span>移动到<span class="wintitle">选定事件</span> 。
                                    </p>
                                    <p>（选择<span class="uicontrol bold">INSERT</span>并单击<span class="uicontrol bold">&gt;</span> 。）
                                    </p>
                                 </li>
                                 <li>
                                    <p>取消选择“ <span class="uicontrol bold">语句级别</span> ”选项。
                                    </p>
                                 </li>
                                 <li>
                                    <p>单击<span class="uicontrol bold">确定</span> 。</p>
                                    <p>将打开<span class="wintitle">NEW_EVALUATION_TRIGGER</span>窗格，显示<span class="keyword">创建触发器</span>的<span class="keyword">CREATE TRIGGER</span>语句：</p><pre class="oac_no_warn" dir="ltr"><span class="bold">在插入</span> <span class="bold">每个行的</span>评估<span class="bold">之前</span> <span class="bold">创建或替换</span> <span class="bold">触发器</span> NEW_EVALUATION_TRIGGER <span class="bold">BEGIN</span> <span class="bold">NULL</span> ; <span class="bold">结束</span> ;</pre><p><span class="wintitle">NEW_EVALUATION_TRIGGER</span>窗格的标题是斜体字体，表示触发器尚未保存在数据库中。
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>在<span class="keyword">CREATE TRIGGER</span>语句中，将<span class="keyword">NULL</span>替换为：</p><pre class="oac_no_warn" dir="ltr">：NEW.evaluation_id：= evaluations_sequence。NEXTVAL</pre></li>
                           <li>
                              <p>从“ <span class="wintitle">文件”</span>菜单中，选择“ <span class="uicontrol bold">保存”</span> 。
                              </p>
                              <p>Oracle数据库编译该过程并将其保存。<span class="wintitle">NEW_EVALUATION_TRIGGER</span>窗格的标题不再是斜体字体。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-triggers.html#GUID-96CB6070-0C3A-4A1F-953A-FF67A487E212" title="要创建触发器，请使用SQL Developer图形界面或DDL语句CREATE TRIGGER。">创建触发器</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG251"></a><a id="TDDDG52800"></a><div class="props_rev_3"><a id="GUID-74B50A8E-6328-47D2-BA63-021BDE14E3BA" name="GUID-74B50A8E-6328-47D2-BA63-021BDE14E3BA"></a><h4 id="TDDDG-GUID-74B50A8E-6328-47D2-BA63-021BDE14E3BA" class="sect4"><span class="enumeration_section">6.2.4</span>创建INSTEAD OF触发器</h4>
                  <div>
                     <p>视图将查询的输出显示为表。如果要像更改表一样更改视图，则必须创建<span class="keyword">INSTEAD OF</span>触发器。他们不是更改视图，而是更改基础表。
                     </p>
                     <div class="section">
                        <p>例如，考虑视图EMP_LOCATIONS，其NAME列是从EMPLOYEES表的LAST_NAME和FIRST_NAME列创建的：</p><pre class="oac_no_warn" dir="ltr">创建视图EMP_LOCATIONS作为选择e。EMPLOYEE_ID， <span class="bold">e。LAST_NAME || '，'||即FIRST_NAME NAME</span> ，d。DEPARTMENT_NAME DEPARTMENT，l。城市城市，c。来自<span class="bold">雇员的</span> COUNTRY_NAME国家<span class="bold">e</span> ，部门d，地点l，国家/地区c。DEPARTMENT_ID = d。DEPARTMENT_ID和d。LOCATION_ID = l。LOCATION_ID和l。COUNTRY_ID = c。LAST_NAME的COUNTRY_ID订单;</pre><p>要更新视图EMP_LOCATIONS.NAME（在<span class="q">“ <a href="creating-managing-schema-objects.html#GUID-84E78141-9EA9-47DF-B3E8-0230BFEAC6E9" title="This example shows how to use the CREATE VIEW statement to create the EMP_LOCATIONS view, which joins four tables.">使用CREATE VIEW语句创建视图</a> ”中<a href="creating-managing-schema-objects.html#GUID-84E78141-9EA9-47DF-B3E8-0230BFEAC6E9" title="此示例显示如何使用CREATE VIEW语句创建连接四个表的EMP_LOCATIONS视图。">创建</a></span> ），您必须更新EMPLOYEES.LAST_NAME和EMPLOYEES.FIRST_NAME。这就是<a href="using-triggers.html#GUID-74B50A8E-6328-47D2-BA63-021BDE14E3BA__BABBFAGD">例6-1</a>中<span class="keyword">INSTEAD OF</span>触发器的作用。
                        </p>
                        <p><span class="keyword">NEW</span>和<span class="keyword">OLD</span>是PL / SQL运行时引擎在行级触发器触发时创建和填充的<strong class="term">伪</strong>记录。<span class="keyword">OLD</span>和<span class="keyword">NEW分别</span>存储触发器正在处理的记录的原始值和新值。它们被称为伪记录，因为它们没有PL / SQL记录的所有属性。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-74B50A8E-6328-47D2-BA63-021BDE14E3BA__BABBFAGD">
                        <p class="titleinexample">例6-1创建INSTEAD OF触发器</p><pre class="oac_no_warn" dir="ltr">创建或替换TRIGGER <span class="bold">update_name_view_trigger INSTEAD OF UPDATE ON emp_locations</span> BEGIN <span class="bold">UPDATE employees SET</span> <span class="bold">first_name = substr（：NEW.name，instr（：new.name，'，'）+ 2），</span> <span class="bold">last_name = substr（：NEW.name，1，instr （：new.name，'，'） -  1）</span> <span class="bold">WHERE employee_id =：OLD.employee_id;</span>结束;</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-74B50A8E-6328-47D2-BA63-021BDE14E3BA__GUID-790EC661-C705-429E-8B15-10C5E528403E">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<span class="keyword">INSTEAD OF</span>触发器的更多信息<span class="keyword">，请</span> <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tdddg&amp;id=LNPLS20041" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                           </li>
                           <li>
                              <p>有关<span class="keyword">OLD</span>和<span class="keyword">NEW的</span>更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tdddg&amp;id=LNPLS99955" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-triggers.html#GUID-96CB6070-0C3A-4A1F-953A-FF67A487E212" title="要创建触发器，请使用SQL Developer图形界面或DDL语句CREATE TRIGGER。">创建触发器</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG252"></a><a id="TDDDG52900"></a><div class="props_rev_3"><a id="GUID-07B8E5A0-283E-47E2-9834-EFB02EB8D7E1" name="GUID-07B8E5A0-283E-47E2-9834-EFB02EB8D7E1"></a><h4 id="TDDDG-GUID-07B8E5A0-283E-47E2-9834-EFB02EB8D7E1" class="sect4"><span class="enumeration_section">6.2.5</span>教程：创建记录LOGON和LOGOFF事件的触发器</h4>
                  <div>
                     <p>本教程介绍如何使用<span class="keyword">CREATE TRIGGER</span>语句创建两个触发器HR_LOGON_TRIGGER和HR_LOGOFF_TRIGGER。 <span class="italic">在</span>有人以HR用户身份登录<span class="italic">后</span> ，HR_LOGON_TRIGGER会在表HR_USERS_LOG中添加一行。 <span class="italic">在</span>有人以HR用户身份注销<span class="italic">之前</span> ，HR_LOGOFF_TRIGGER会在表HR_USERS_LOG中添加一行。</p>
                     <div class="section">
                        <p>HR_LOGON_TRIGGER和HR_LOGOFF_TRIGGER是<strong class="term">系统触发器</strong> 。HR_LOGON_TRIGGER是<strong class="term">AFTER触发器</strong> ，HR_LOGOFF_TRIGGER是<strong class="term">BEFORE触发器</strong> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-07B8E5A0-283E-47E2-9834-EFB02EB8D7E1__GUID-BE731922-FE61-4C9F-A6AE-E4E5F0BFD9CB">要创建HR_USERS_LOG，HR_LOGON_TRIGGER和HR_LOGOFF_TRIGGER：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>创建HR_USERS_LOG表：</span><div><pre class="oac_no_warn" dir="ltr">CREATE TABLE hr_users_log（user_name VARCHAR2（30），activity VARCHAR2（20），event_date DATE）;</pre></div>
                        </li>
                        <li class="stepexpand"><span>创建HR_LOGON_TRIGGER：</span><div><pre class="oac_no_warn" dir="ltr">创建或替换TRIGGER hr_logon_trigger <span class="bold">登录</span> <span class="bold">HR.SCHEMA</span> BEGIN后插入hr_users_log（user_name，activity，event_date）VALUES（USER，'LOGON'，SYSDATE）;结束;</pre></div>
                        </li>
                        <li class="stepexpand"><span>创建HR_LOGOFF_TRIGGER：</span><div><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE TRIGGER hr_logoff_trigger <span class="bold">BEFORE LOGOFF</span> <span class="bold">ON</span> BEGIN <span class="bold">HR.SCHEMA</span> INSERT INTO hr_users_log（USER_NAME，活性，EVENT_DATE）VALUES（USER， 'LOGOFF'，SYSDATE）;结束;</pre></div>
                        </li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-07B8E5A0-283E-47E2-9834-EFB02EB8D7E1__GUID-F254C71E-3424-4FBA-BCD8-4EB749245F78">
                        <p class="notep1">也可以看看：</p>
                        <p>有关系统触发器的更多信息，请<a href="../lnpls/plsql-triggers.html#LNPLS99887" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-triggers.html#GUID-96CB6070-0C3A-4A1F-953A-FF67A487E212" title="要创建触发器，请使用SQL Developer图形界面或DDL语句CREATE TRIGGER。">创建触发器</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TDDDG253"></a><a id="TDDDG52200"></a><div class="props_rev_3"><a id="GUID-5941E132-742E-4337-9D8C-F835E2F1F1E0" name="GUID-5941E132-742E-4337-9D8C-F835E2F1F1E0"></a><h3 id="TDDDG-GUID-5941E132-742E-4337-9D8C-F835E2F1F1E0" class="sect3"><span class="enumeration_section">6.3</span>更改触发器</h3>
               <div>
                  <p>要更改触发器，请使用SQL Developer工具Edit或DDL语句<span class="keyword">CREATE TRIGGER</span>和<span class="keyword">OR REPLACE</span>子句。
                  </p>
                  <div class="section"></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-5941E132-742E-4337-9D8C-F835E2F1F1E0__GUID-F749B90B-E263-4CEB-9D9A-EBE2D4DEADE3">要使用“编辑”工具更改触发器：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>在<span class="wintitle">Connections</span>框架中，展开<span class="uicontrol bold">hr_conn</span> 。</span></li>
                     <li class="stepexpand"><span>在架构对象类型列表中，展开“ <span class="uicontrol bold">触发器”</span> 。</span></li>
                     <li class="stepexpand"><span>在触发器列表中，单击要更改的触发器。</span></li>
                     <li class="stepexpand"><span>在<span class="wintitle">Connections</span>框架右侧的框架中，将出现“ <span class="wintitle">代码”</span>窗格，其中显示了创建触发器的代码。</span><div>
                           <p>“ <span class="wintitle">代码”</span>窗格处于写入模式。（单击铅笔图标可将模式从写入模式切换为只读，反之亦然。）
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>在“ <span class="wintitle">代码”</span>窗格中，更改代码。</span><div>
                           <p>窗格的标题是斜体字体，表示更改尚未保存在数据库中。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>从“ <span class="wintitle">文件”</span>菜单中，选择“ <span class="uicontrol bold">保存”</span> 。</span><div>
                           <p>Oracle数据库编译触发器并保存它。窗格的标题不再是斜体字体。</p>
                        </div>
                     </li>
                  </ol>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-5941E132-742E-4337-9D8C-F835E2F1F1E0__GUID-C584613D-18B9-4B18-8E54-0AB65291113B">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="creating-managing-schema-objects.html#GUID-0663F857-7E62-464C-9EE8-42BC600FAA6C" title="数据定义语言（DDL）语句创建，更改和删除模式对象。在DDL语句之前和之后，Oracle数据库发出隐式COMMIT语句;因此，您无法回滚DDL语句。">关于数据定义语言（DDL）语句</a> ”</span> ，适用于<span class="keyword">CREATE OR REPLACE TRIGGER</span>语句的一般信息</p>
                        </li>
                        <li>
                           <p>有关<span class="keyword">CREATE OR REPLACE TRIGGER</span>语句的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tdddg&amp;id=LNPLS01374" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-triggers.html#GUID-3744214A-861D-4C59-AD2D-95840B5B0871" title="触发器存储自动执行的PL / SQL单元（" fir=")=" ="">使用触发器</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TDDDG52400"></a><div class="props_rev_3"><a id="GUID-86E7AF13-C7A6-4594-A333-180DD16382AA" name="GUID-86E7AF13-C7A6-4594-A333-180DD16382AA"></a><h3 id="TDDDG-GUID-86E7AF13-C7A6-4594-A333-180DD16382AA" class="sect3"><span class="enumeration_section">6.4</span>禁用和启用触发器</h3>
               <div>
                  <p>您可能需要临时禁用引用不可用对象的触发器，或者在没有触发原因的延迟的情况下上载大量数据（如在恢复操作中）。在引用的对象可用之后，或者您已完成上载数据后，可以重新启用触发器。</p>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-triggers.html#GUID-70EF4DCD-EBB9-4652-812C-70E72B63490C">禁用或启用单个触发器</a><br>要禁用或启用单个触发器，请使用“禁用触发器”或“启用触发器”工具或带有<span class="keyword">DISABLE</span>或<span class="keyword">ENABLE</span>子句的<span class="keyword">ALTER TRIGGER</span>语句。
                     </li>
                     <li class="ulchildlink"><a href="using-triggers.html#GUID-EE111E82-A4ED-4DFE-B2DA-01C369397FD4">禁用或启用单个表上的所有触发器</a><br>要禁用或启用特定表上的所有触发器，请使用“禁用所有触发器”或“启用所有触发器”工具或使用<span class="keyword">DISABLE ALL TRIGGERS</span>或<span class="keyword">ENABLE ALL TRIGGERS</span>子句的<span class="keyword">ALTER TABLE</span>语句。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-86E7AF13-C7A6-4594-A333-180DD16382AA__GUID-C9E7D797-4E89-43EC-A034-9E4C475E61A1">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关<code class="codeph">ALTER</code> <code class="codeph">TRIGGER</code>语句的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tdddg&amp;id=LNPLS99996" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                        </li>
                        <li>
                           <p>有关<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tdddg&amp;id=SQLRF01001" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-triggers.html#GUID-3744214A-861D-4C59-AD2D-95840B5B0871" title="触发器存储自动执行的PL / SQL单元（" fir=")=" ="">使用触发器</a></p>
                     </div>
                  </div>
               </div>
               <a id="TDDDG333"></a><a id="TDDDG332"></a><div class="props_rev_3"><a id="GUID-70EF4DCD-EBB9-4652-812C-70E72B63490C" name="GUID-70EF4DCD-EBB9-4652-812C-70E72B63490C"></a><h4 id="TDDDG-GUID-70EF4DCD-EBB9-4652-812C-70E72B63490C" class="sect4"><span class="enumeration_section">6.4.1</span>禁用或启用单个触发器</h4>
                  <div>
                     <p>要禁用或启用单个触发器，请使用“禁用触发器”或“启用触发器”工具或带有<span class="keyword">DISABLE</span>或<span class="keyword">ENABLE</span>子句的<span class="keyword">ALTER TRIGGER</span>语句。
                     </p>
                     <div class="section">
                        <p>例如，这些语句禁用并启用eval_change_trigger：</p><pre class="oac_no_warn" dir="ltr">ALTER TRIGGER eval_change_trigger <span class="bold">禁用</span> ; ALTER TRIGGER eval_change_trigger <span class="bold">ENABLE</span> ;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-70EF4DCD-EBB9-4652-812C-70E72B63490C__GUID-754E6C9F-4EDF-4F86-9E67-7E2783EF4B31">要使用“禁用触发器”或“启用触发器”工具：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>在<span class="wintitle">Connections</span>框架中，展开<span class="uicontrol bold">hr_conn</span> 。</span></li>
                        <li><span>在架构对象类型列表中，展开“ <span class="uicontrol bold">触发器”</span> 。</span></li>
                        <li><span>在触发器列表中，右键单击所需的触发器。</span></li>
                        <li><span>在选项列表中，选择“ <span class="uicontrol bold">禁用”</span>或“ <span class="uicontrol bold">启用”</span> 。</span></li>
                        <li><span>在“ <span class="wintitle">禁用</span>或<span class="wintitle">启用”</span>窗口中，单击“ <span class="uicontrol bold">应用”</span> 。</span></li>
                        <li><span>在“ <span class="wintitle">确认”</span>窗口中，单击“ <span class="uicontrol bold">确定”</span> 。</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-triggers.html#GUID-86E7AF13-C7A6-4594-A333-180DD16382AA" title="您可能需要临时禁用引用不可用对象的触发器，或者在没有触发原因的延迟的情况下上载大量数据（如在恢复操作中）。在引用的对象可用之后，或者您已完成上载数据后，可以重新启用触发器。">禁用和启用触发器</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TDDDG335"></a><a id="TDDDG334"></a><div class="props_rev_3"><a id="GUID-EE111E82-A4ED-4DFE-B2DA-01C369397FD4" name="GUID-EE111E82-A4ED-4DFE-B2DA-01C369397FD4"></a><h4 id="TDDDG-GUID-EE111E82-A4ED-4DFE-B2DA-01C369397FD4" class="sect4"><span class="enumeration_section">6.4.2</span>在单个表上禁用或启用所有触发器</h4>
                  <div>
                     <p>要禁用或启用特定表上的所有触发器，请使用“禁用所有触发器”或“启用所有触发器”工具或使用<span class="keyword">DISABLE ALL TRIGGERS</span>或<span class="keyword">ENABLE ALL TRIGGERS</span>子句的<span class="keyword">ALTER TABLE</span>语句。
                     </p>
                     <div class="section">
                        <p>例如，这些语句禁用并启用评估表上的所有触发器：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE评估<span class="bold">DISABLE ALL TRIGGERS</span> ; ALTER TABLE评估<span class="bold">ENABLE ALL TRIGGERS</span> ;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EE111E82-A4ED-4DFE-B2DA-01C369397FD4__GUID-5A177208-EF33-4AD0-ADAF-B032912B813B">要使用“禁用所有触发器”或“启用所有触发器”工具：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>在<span class="wintitle">Connections</span>框架中，展开<span class="uicontrol bold">hr_conn</span> 。</span></li>
                        <li><span>在架构对象类型列表中，展开“ <span class="uicontrol bold">表”</span> 。</span></li>
                        <li><span>在表列表中，右键单击所需的表。</span></li>
                        <li><span>在选项列表中，选择“ <span class="uicontrol bold">触发器”</span> 。</span></li>
                        <li><span>在选项列表中，选择“ <span class="uicontrol bold">全部禁用”</span>或“ <span class="uicontrol bold">全部启用”</span> 。</span></li>
                        <li><span>在<span class="wintitle">Disable All</span>或<span class="wintitle">Enable All</span>窗口中，单击<span class="uicontrol bold">Apply</span> 。</span></li>
                        <li><span>在“ <span class="wintitle">确认”</span>窗口中，单击“ <span class="uicontrol bold">确定”</span> 。</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-triggers.html#GUID-86E7AF13-C7A6-4594-A333-180DD16382AA" title="您可能需要临时禁用引用不可用对象的触发器，或者在没有触发原因的延迟的情况下上载大量数据（如在恢复操作中）。在引用的对象可用之后，或者您已完成上载数据后，可以重新启用触发器。">禁用和启用触发器</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TDDDG52500"></a><div class="props_rev_3"><a id="GUID-71D9EE5D-145E-4A94-871E-4C56977DDCC8" name="GUID-71D9EE5D-145E-4A94-871E-4C56977DDCC8"></a><h3 id="TDDDG-GUID-71D9EE5D-145E-4A94-871E-4C56977DDCC8" class="sect3"><span class="enumeration_section">6.5</span>关于触发器编译和依赖关系</h3>
               <div>
                  <p>编译的触发器取决于定义它们的模式对象。如果触发器所依赖的对象被丢弃或更改，使得触发器和对象之间不匹配，则触发器无效。</p>
                  <p>运行<span class="keyword">CREATE TRIGGER</span>语句会编译正在创建的触发器。如果此编译导致错误，则<span class="keyword">CREATE TRIGGER</span>语句将失败。要查看编译错误，请使用以下语句：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM USER_ERRORS WHERE TYPE ='TRIGGER';</pre><p>编译的触发器取决于定义它们的模式对象。例如， <span class="keyword">NEW_EVALUATION_TRIGGER</span>取决于EVALUATIONS表：</p><pre class="oac_no_warn" dir="ltr">在插入每个行的<span class="bold">评估</span>之前创建或替换<span class="bold">TRIGGER NEW_EVALUATION_TRIGGER</span> ：NEW.evaluation_id：= evaluations_seq。NEXTVAL;结束;</pre><p>要查看触发器所依赖的模式对象，请使用以下语句：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM ALL_DEPENDENCIES TYERE TYPE ='TRIGGER';</pre><p>如果触发器所依赖的对象被丢弃或更改，使得触发器和对象之间不匹配，则触发器无效。下次调用触发器时，会重新编译它。要立即重新编译触发器，请使用带有<span class="keyword">COMPILE</span>子句的<span class="keyword">ALTER TRIGGER</span>语句。例如：</p><pre class="oac_no_warn" dir="ltr">ALTER TRIGGER NEW_EVALUATION_TRIGGER <span class="bold">COMPILE</span> ;</pre></div>
               <div>
                  <div class="infoboxnotealso" id="GUID-71D9EE5D-145E-4A94-871E-4C56977DDCC8__GUID-C448225E-305E-43CA-9E22-B953C1C9BD57">
                     <p class="notep1">也可以看看：</p>
                     <p>有关触发器编译和依赖关系的更多信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tdddg&amp;id=LNPLS2007" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-triggers.html#GUID-3744214A-861D-4C59-AD2D-95840B5B0871" title="触发器存储自动执行的PL / SQL单元（" fir=")=" ="">使用触发器</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TDDDG254"></a><a id="TDDDG52600"></a><div class="props_rev_3"><a id="GUID-D3E33697-8B08-456E-AA33-A1A6C1CB506C" name="GUID-D3E33697-8B08-456E-AA33-A1A6C1CB506C"></a><h3 id="TDDDG-GUID-D3E33697-8B08-456E-AA33-A1A6C1CB506C" class="sect3"><span class="enumeration_section">6.6</span>丢弃触发器</h3>
               <div>
                  <div class="section">
                     <p>您必须先删除触发器，然后再删除它所依赖的对象。</p>
                     <p>要删除触发器，请使用SQL Developer Connections框架和Drop工具，或使用DDL语句<span class="keyword">DROP TRIGGER</span> 。</p>
                     <p>该语句删除触发器EVAL_CHANGE_TRIGGER：</p><pre class="oac_no_warn" dir="ltr">DROP TRIGGER EVAL_CHANGE_TRIGGER;</pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-D3E33697-8B08-456E-AA33-A1A6C1CB506C__GUID-5BD976C6-BD2B-4587-9485-15633BFCB2E2">要使用Drop工具删除触发器：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>在<span class="wintitle">Connections</span>框架中，展开<span class="uicontrol bold">hr_conn</span> 。</span></li>
                     <li><span>在架构对象类型列表中，展开“ <span class="uicontrol bold">触发器”</span> 。</span></li>
                     <li><span>在触发器列表中，右键单击要删除的触发器的名称。</span></li>
                     <li><span>在选项列表中，单击“ <span class="uicontrol bold">删除触发器”</span> 。</span></li>
                     <li><span>在“ <span class="wintitle">下拉”</span>窗口中，单击“ <span class="uicontrol bold">应用”</span> 。</span></li>
                     <li><span>在“ <span class="wintitle">确认”</span>窗口中，单击“y”。</span></li>
                  </ol>
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-D3E33697-8B08-456E-AA33-A1A6C1CB506C__GUID-27837446-29FB-486A-A680-00EADAE0E4EC">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="creating-managing-schema-objects.html#GUID-0663F857-7E62-464C-9EE8-42BC600FAA6C" title="数据定义语言（DDL）语句创建，更改和删除模式对象。在DDL语句之前和之后，Oracle数据库发出隐式COMMIT语句;因此，您无法回滚DDL语句。">关于数据定义语言（DDL）语句</a> ”</span> ，适用于适用于<span class="keyword">DROP TRIGGER</span>语句的一般信息</p>
                        </li>
                        <li>
                           <p>有关<span class="keyword">DROP TRIGGER</span>语句的信息，请<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/tdddg&amp;id=LNPLS99990" target="_blank"><span class="italic">参见Oracle Database PL / SQL语言参考</span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-triggers.html#GUID-3744214A-861D-4C59-AD2D-95840B5B0871" title="触发器存储自动执行的PL / SQL单元（" fir=")=" ="">使用触发器</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
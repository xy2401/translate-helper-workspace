<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>管理索引</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Administrator’s Guide "></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Administrator’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-14T11:02:35-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96348-04"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="managing-tables.html" title="Previous" type="text/html"></link>
      <link rel="next" href="managing-clusters.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="ADMIN"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-tables.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="managing-clusters.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="schema-objects.html" property="item" typeof="WebPage"><span property="name">架构对象</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">管理索引</li>
            </ol>
            <a id="GUID-E4149397-FF37-4367-A12F-675433715904" name="GUID-E4149397-FF37-4367-A12F-675433715904"></a><a id="ADMIN016"></a>
            
            <h2 id="ADMIN-GUID-E4149397-FF37-4367-A12F-675433715904" class="sect2"><span class="enumeration_chapter">21</span>管理索引</h2>
         </header>
         <div class="ind">
            <div>
               <p>索引可以提供更快的数据访问。您可以创建，更改，监视和删除索引。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="managing-indexes.html#GUID-2CE1BB91-3EFA-450D-BD31-0C961549F0C2">关于索引</a><br>索引是与表和集群关联的可选结构，允许SQL查询对表执行更快。
                  </li>
                  <li class="ulchildlink"><a href="managing-indexes.html#GUID-1C31FFD6-B826-4F13-9452-7C3B8B28F677">管理索引指南</a><br>您可以遵循管理索引的准则。
                  </li>
                  <li class="ulchildlink"><a href="managing-indexes.html#GUID-BF813E96-C4BD-433C-B26A-70289D938D02">创建索引</a><br>您可以创建几种不同类型的索引。您可以显式创建索引，也可以创建与约束关联的索引。
                  </li>
                  <li class="ulchildlink"><a href="managing-indexes.html#GUID-E637BC13-A2CA-454D-B680-07B95F7C4CE4">改变索引</a><br>您可以通过完成诸如更改其存储特性，重建存储特性，使其无法使用或使其可见或不可见等任务来更改索引。
                  </li>
                  <li class="ulchildlink"><a href="managing-indexes.html#GUID-19B6C345-FDCA-4D7F-A93A-341555CFFC1A">监控空间使用索引</a><br>如果频繁插入，更新和删除索引中的键值，则索引可能会随着时间的推移而失去其获得的空间效率。
                  </li>
                  <li class="ulchildlink"><a href="managing-indexes.html#GUID-670ACFFA-9002-4511-9345-C33C49811577">删除索引</a><br>您可以使用<code class="codeph">DROP INDEX</code>语句<code class="codeph">DROP INDEX</code> 。
                  </li>
                  <li class="ulchildlink"><a href="managing-indexes.html#GUID-D1285CD5-95C0-4E74-8F26-A02018EA7999">管理自动索引</a><br>您可以使用自动索引功能在Oracle数据库中配置和使用自动索引，以提高数据库性能。
                  </li>
                  <li class="ulchildlink"><a href="managing-indexes.html#GUID-CCBBC9DB-29A1-4F46-B3AA-BF4205793403">索引数据字典视图</a><br>您可以查询一组数据字典视图以获取有关索引的信息。
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="schema-objects.html#GUID-2DA8C61C-58B0-4892-8E5D-E7A9120BC120" title="您可以在Oracle数据库中创建和管理架构对象。">模式对象</a></p>
                  </div>
               </div>
            </div>
            <a id="ADMIN11709"></a><div class="props_rev_3"><a id="GUID-2CE1BB91-3EFA-450D-BD31-0C961549F0C2" name="GUID-2CE1BB91-3EFA-450D-BD31-0C961549F0C2"></a><h3 id="ADMIN-GUID-2CE1BB91-3EFA-450D-BD31-0C961549F0C2" class="sect3"><span class="enumeration_section">21.1</span>关于索引</h3>
               <div>
                  <p>索引是与表和集群关联的可选结构，允许SQL查询对表执行更快。</p>
                  <p>正如本手册中的索引可帮助您更快地找到信息，而不是没有索引，Oracle Database索引提供了更快的表数据访问路径。您可以使用索引而无需重写任何查询。您的结果是一样的，但您可以更快地看到它们。</p>
                  <p>Oracle数据库提供了几种索引方案，可提供互补的性能功能。这些是：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>B树索引：默认和最常见</p>
                     </li>
                     <li>
                        <p>B树集群索引：专门为集群定义</p>
                     </li>
                     <li>
                        <p>散列集群索引：专门为散列集群定义的</p>
                     </li>
                     <li>
                        <p>全局索引和本地索引：与分区表和索引相关</p>
                     </li>
                     <li>
                        <p>反向键索引：对Oracle Real Application Clusters应用程序最有用</p>
                     </li>
                     <li>
                        <p>位图索引：紧凑;最适合具有一小组值的列</p>
                     </li>
                     <li>
                        <p>基于函数的索引：包含函数/表达式的预计算值</p>
                     </li>
                     <li>
                        <p>域索引：特定于应用程序或盒式磁带。</p>
                     </li>
                  </ul>
                  <p>索引在逻辑上和物理上独立于关联表中的数据。作为独立的结构，它们需要存储空间。您可以创建或删除索引，而不会影响基表，数据库应用程序或其他索引。插入，更新和删除关联表的行时，数据库会自动维护索引。如果删除索引，则所有应用程序都将继续工作。但是，访问以前索引的数据可能会更慢。</p>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-2CE1BB91-3EFA-450D-BD31-0C961549F0C2__GUID-E3B4A187-2416-4C42-AA72-74304088AB18">
                     <p class="notep1">也可以看看：</p>
                     <p></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="../cncpt/indexes-and-index-organized-tables.html#CNCPT811" target="_blank"><span class="italic">Oracle Database Concepts，</span></a>用于索引概述</p>
                        </li>
                        <li>
                           <p><a href="managing-space-for-schema-objects.html#GUID-1950156D-DECC-4E76-84D9-2C2A3D8D6565" title="管理模式对象的空间涉及诸如管理表空间警报和空间分配，回收未使用的空间，删除未使用的对象存储，监视空间使用和容量规划等任务。">管理模式对象的空间</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-E4149397-FF37-4367-A12F-675433715904">管理索引</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN11710"></a><div class="props_rev_3"><a id="GUID-1C31FFD6-B826-4F13-9452-7C3B8B28F677" name="GUID-1C31FFD6-B826-4F13-9452-7C3B8B28F677"></a><h3 id="ADMIN-GUID-1C31FFD6-B826-4F13-9452-7C3B8B28F677" class="sect3"><span class="enumeration_section">21.2</span>管理索引指南</h3>
               <div>
                  <p>您可以遵循管理索引的准则。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-3B90E89F-EA36-40D5-B76C-FC1245144B41">插入表数据后创建索引</a><br>通常使用SQL * Loader或导入实用程序将数据插入或加载到表中。在插入或加载数据后为表创建索引更有效。如果在加载数据之前创建一个或多个索引，则数据库必须在插入每行时更新每个索引。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-505DEA1E-3BB0-4EF5-8F35-942A70B6BA8E">索引正确的表和列</a><br>遵循适用于索引的表和列的准则。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-875EBF38-FCBB-4C85-8062-C505324D0978">订单索引列的性能</a><br><code class="codeph">CREATE</code> <code class="codeph">INDEX</code>语句中的列顺序可能会影响查询性能。通常，首先指定最常用的列。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-A4011AC8-ADC9-4323-964C-51104E71E7C0">限制每个表的索引数</a><br>表可以包含任意数量的索引。但是，索引越多，修改表时产生的开销就越大。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-330A45CF-2D66-423E-8C79-E2E1BDACFC5B">删除不再需要的索引</a><br>最佳做法是删除不再需要的索引。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-EF7459D8-6396-4275-A73F-75BBF2A7EC2C">索引和延迟段创建</a><br>当关联表推迟创建段时，将延迟索引段创建。这是因为索引段创建反映了与其关联的表的行为。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-EBAC03DE-D2A6-4DF6-BC7D-9E5ACB025A34">估计索引大小和设置存储参数</a><br>在创建索引之前估计索引的大小可以促进更好的磁盘空间规划和管理。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-0E5E81F7-6410-45D2-B83E-DFF858FA0522">为每个索引指定表空间</a><br>可以在任何表空间中创建索引。可以在与其索引的表相同或不同的表空间中创建索引。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-5B74C80C-9A06-477B-8065-7A210DB6D09B">考虑并行化索引创建</a><br>您可以并行化索引创建，就像您可以并行化表创建一样。由于多个进程协同工作以创建索引，因此数据库可以比单个服务器进程按顺序创建索引更快地创建索引。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-72D72713-0EF5-4BDD-813C-BFF63AE4F94F">考虑使用NOLOGGING创建索引</a><br>您可以通过在<code class="codeph">CREATE INDEX</code>语句中指定<code class="codeph">NOLOGGING</code>来创建索引并生成最少的重做日志记录。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-3A66938F-73C6-4173-844E-3938A0DBBB54">了解何时使用不可用或不可见的索引</a><br>当您希望提高批量加载的性能时，请使用不可用或不可见的索引，在删除索引之前测试删除索引的效果，或者暂停优化程序使用索引。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-B4B30CF4-2B95-44D6-8596-EC2A378251EF">了解何时在同一组列上创建多个索引</a><br>当索引以某种方式不同时，您可以在同一列列上创建多个索引。例如，您可以在同一组列上创建B树索引和位图索引。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-D459FCD6-D729-4F3A-96AD-E147FC37956A">考虑合并或重建索引的成本和收益</a><br>不正确的尺寸或增加的增长会产生索引碎片。要消除或减少碎片，您可以重建或合并索引。但在执行任一任务之前，请权衡每个选项的成本和收益，并选择最适合您情况的选项。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-A76C2C1D-F047-4052-83C2-F7EB052E7A9C">在禁用或删除约束之前考虑成本</a><br>由于唯一键和主键具有关联索引，因此在考虑是否禁用或删除<code class="codeph">UNIQUE</code>或<code class="codeph">PRIMARY KEY</code>约束时，应考虑删除和创建索引的成本。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-652C144A-3120-4FA1-96CC-02A7E7D988EA">请考虑使用内存中的列存储来减少索引数</a><br>内存中列存储是系统全局区域（SGA）的可选部分，用于存储针对快速扫描进行了优化的表，表分区和其他数据库对象的副本。在内存中列存储中，表数据按列而不是SGA中的行存储。</li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-1C31FFD6-B826-4F13-9452-7C3B8B28F677__GUID-B1022204-6386-4C38-A357-39A3BF86F386">
                     <p class="notep1">也可以看看：</p>
                     <p></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关索引和索引的概念性信息的<a href="../cncpt/indexes-and-index-organized-tables.html#CNCPT811" target="_blank"><span class="italic">Oracle数据库概念</span></a> ，包括Oracle提供的各种索引方案的描述</p>
                        </li>
                        <li>
                           <p>有关位图索引的信息，请<a href="../tgsql/index.html" target="_blank"><span class="italic">参见“Oracle数据库SQL调优指南”</span></a>和“ <a href="../dwhsg/data-warehouse-optimizations-techniques.html#DWHSG8130" target="_blank"><span class="italic">Oracle数据库数据仓库指南”</span></a></p>
                        </li>
                        <li>
                           <p><a href="../addci/building-domain-indexes.html#ADDCI290" target="_blank"><span class="italic">“Oracle数据库数据盒式开发人员指南”</span></a> ，了解有关定义特定于域的运算符和索引方案以及将它们集成到Oracle数据库服务器的信息</p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-E4149397-FF37-4367-A12F-675433715904">管理索引</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN11711"></a><div class="props_rev_3"><a id="GUID-3B90E89F-EA36-40D5-B76C-FC1245144B41" name="GUID-3B90E89F-EA36-40D5-B76C-FC1245144B41"></a><h4 id="ADMIN-GUID-3B90E89F-EA36-40D5-B76C-FC1245144B41" class="sect4"><span class="enumeration_section">21.2.1</span>插入表数据后创建索引</h4>
                  <div>
                     <p>通常使用SQL * Loader或导入实用程序将数据插入或加载到表中。在插入或加载数据后为表创建索引更有效。如果在加载数据之前创建一个或多个索引，则数据库必须在插入每行时更新每个索引。</p>
                     <p>在已有数据的表上创建索引需要排序空间。某些排序空间来自为索引创建者分配的内存。每个用户的数量由初始化参数<code class="codeph">SORT_AREA_SIZE</code>确定。数据库还将排序信息与临时段交换，这些临时段仅在用户临时表空间中创建索引期间分配。
                     </p>
                     <p>在某些情况下，可以使用SQL * Loader直接路径加载将数据加载到表中，并且可以在加载数据时创建索引。</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-3B90E89F-EA36-40D5-B76C-FC1245144B41__GUID-448425DA-415A-44D5-A4C5-275D9B9264BB">
                        <p class="notep1">也可以看看：</p>
                        <p> 有关使用SQL * Loader进行直接路径加载的信息，请<a href="../sutil/oracle-sql-loader-conventional-and-direct-loads.html#SUTIL009" target="_blank"><span class="italic">参见Oracle数据库实用程序</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-1C31FFD6-B826-4F13-9452-7C3B8B28F677" title="您可以遵循管理索引的准则。">管理索引的准则</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12644"></a><a id="ADMIN12645"></a><a id="ADMIN12646"></a><a id="ADMIN11712"></a><div class="props_rev_3"><a id="GUID-505DEA1E-3BB0-4EF5-8F35-942A70B6BA8E" name="GUID-505DEA1E-3BB0-4EF5-8F35-942A70B6BA8E"></a><h4 id="ADMIN-GUID-505DEA1E-3BB0-4EF5-8F35-942A70B6BA8E" class="sect4"><span class="enumeration_section">21.2.2</span>索引正确的表和列</h4>
                  <div>
                     <p>遵循适用于索引的表和列的准则。</p>
                     <p>使用以下准则确定何时创建索引：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>如果您经常要检索大表中少于15％的行，请创建索引。百分比根据表扫描的相对速度以及行数据相对于索引键的分布方式而变化很大。表扫描越快，百分比越低;行数据聚集越多，百分比越高。</p>
                        </li>
                        <li>
                           <p>要提高多个表的连接性能，请使用用于连接的索引列。</p>
                           <div class="infoboxnote" id="GUID-505DEA1E-3BB0-4EF5-8F35-942A70B6BA8E__GUID-6578D809-BF8F-42C9-B6AC-9C13D11EABBB">
                              <p class="notep1">注意：</p>
                              <p>主键和唯一键自动具有索引，但您可能希望在外键上创建索引。</p>
                           </div>
                        </li>
                        <li>
                           <p>小表不需要索引。如果查询花费的时间太长，那么表格可能会从小到大。</p>
                        </li>
                     </ul>
                     <div class="section">
                        <p class="subhead3" id="GUID-505DEA1E-3BB0-4EF5-8F35-942A70B6BA8E__GUID-4896FA0D-F7C5-404F-AE69-FC2D538ADDFD">适合索引的列</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>有些列是索引编制的有力候选者。具有以下一个或多个特征的列是索引的候选者：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>列中的值相对独特。</p>
                           </li>
                           <li>
                              <p>有很多值（适用于常规索引）。</p>
                           </li>
                           <li>
                              <p>有一小部分值（适用于位图索引）。</p>
                           </li>
                           <li>
                              <p>该列包含许多空值，但查询通常会选择具有值的所有行。在这种情况下，请使用以下短语：</p><pre class="oac_no_warn" dir="ltr">在哪里COL_X&gt; -9.99 *功率（10,125）</pre><p>使用前面的短语比以下更好：</p><pre class="oac_no_warn" dir="ltr">哪个COL_X不是NULL</pre><p>这是因为第一个使用<code class="codeph">COL_X</code>上的索引（假设<code class="codeph">COL_X</code>是数字列）。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-505DEA1E-3BB0-4EF5-8F35-942A70B6BA8E__GUID-06E5A419-BCF6-403B-A49A-F0125357A58D">不适合索引的列</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>具有以下特征的列不太适合索引：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>列中有许多空值，并且您不搜索非空值。</p>
                           </li>
                        </ul>
                        <p><code class="codeph">LONG</code>和<code class="codeph">LONG</code> <code class="codeph">RAW</code>列无法编入索引。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-505DEA1E-3BB0-4EF5-8F35-942A70B6BA8E__GUID-0CD9E5FE-1FC0-43B2-AFD5-905967930DBB">虚拟列</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>您可以创建唯一或非唯一索引<a id="d222637e568" class="indexterm-anchor"></a><a id="d222637e572" class="indexterm-anchor"></a>虚拟列。在虚拟列上定义的表索引等同于表上基于函数的索引。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-505DEA1E-3BB0-4EF5-8F35-942A70B6BA8E__GUID-92186970-E367-43B6-92F4-C92648AE5735">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="managing-indexes.html#GUID-EF5392C6-C38A-4206-BD47-353AD7793557" title="基于函数的索引便于查询限定函数或表达式返回的值。函数或表达式的值已预先计算并存储在索引中。">创建基于函数的索引</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-1C31FFD6-B826-4F13-9452-7C3B8B28F677" title="您可以遵循管理索引的准则。">管理索引的准则</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11713"></a><div class="props_rev_3"><a id="GUID-875EBF38-FCBB-4C85-8062-C505324D0978" name="GUID-875EBF38-FCBB-4C85-8062-C505324D0978"></a><h4 id="ADMIN-GUID-875EBF38-FCBB-4C85-8062-C505324D0978" class="sect4"><span class="enumeration_section">21.2.3</span>性能订单索引列</h4>
                  <div>
                     <p><code class="codeph">CREATE</code> <code class="codeph">INDEX</code>语句中的列顺序可能会影响查询性能。通常，首先指定最常用的列。
                     </p>
                     <p>如果跨列创建单个索引以加速访问的查询，例如<code class="codeph">col1</code> ， <code class="codeph">col2</code>和<code class="codeph">col3</code> ;那些只访问<code class="codeph">col1</code>查询，或只访问<code class="codeph">col1</code>和<code class="codeph">col2</code>的查询也会加速。但只访问<code class="codeph">col2</code> ， <code class="codeph">col3</code>或<code class="codeph">col2</code>和<code class="codeph">col3</code>不使用索引。
                     </p>
                     <div class="infoboxnote" id="GUID-875EBF38-FCBB-4C85-8062-C505324D0978__GUID-DC0DB3AF-1FC4-4E80-8F0C-82C6DE29A9C7">
                        <p class="notep1">注意：</p>
                        <p>在某些情况下，例如当前导列具有非常低的基数时，数据库可以使用此类索引的跳过扫描。有关索引跳过扫描的详细信息，请参阅<a href="../cncpt/indexes-and-index-organized-tables.html#CNCPT88842" target="_blank"><span class="italic">Oracle数据库概念</span></a> 。
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-1C31FFD6-B826-4F13-9452-7C3B8B28F677" title="您可以遵循管理索引的准则。">管理索引的准则</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11714"></a><div class="props_rev_3"><a id="GUID-A4011AC8-ADC9-4323-964C-51104E71E7C0" name="GUID-A4011AC8-ADC9-4323-964C-51104E71E7C0"></a><h4 id="ADMIN-GUID-A4011AC8-ADC9-4323-964C-51104E71E7C0" class="sect4"><span class="enumeration_section">21.2.4</span>限制每个表的索引数</h4>
                  <div>
                     <p>表可以包含任意数量的索引。但是，索引越多，修改表时产生的开销就越大。</p>
                     <p>特别是，当插入或删除行时，表上的所有索引也必须更新。此外，更新列时，必须更新包含该列的所有索引。</p>
                     <p>因此，在从表中检索数据的速度和更新表的速度之间存在折衷。例如，如果表主要是只读的，则拥有更多索引可能很有用;但是如果一个表被大量更新，那么拥有更少的索引可能是更可取的。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-1C31FFD6-B826-4F13-9452-7C3B8B28F677" title="您可以遵循管理索引的准则。">管理索引的准则</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11715"></a><div class="props_rev_3"><a id="GUID-330A45CF-2D66-423E-8C79-E2E1BDACFC5B" name="GUID-330A45CF-2D66-423E-8C79-E2E1BDACFC5B"></a><h4 id="ADMIN-GUID-330A45CF-2D66-423E-8C79-E2E1BDACFC5B" class="sect4"><span class="enumeration_section">21.2.5</span>丢弃不再需要的索引</h4>
                  <div>
                     <p>最佳做法是删除不再需要的索引。</p>
                     <p>考虑删除索引，如果：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>它不会加快查询速度。该表可能非常小，或者表中可能有很多行，但索引条目很少。</p>
                        </li>
                        <li>
                           <p>应用程序中的查询不使用索引。</p>
                        </li>
                        <li>
                           <p>必须在重建之前删除索引。</p>
                           <div class="infoboxnotealso" id="GUID-330A45CF-2D66-423E-8C79-E2E1BDACFC5B__GUID-2C5450AF-5F04-41CC-AE71-9ADDFEC8F677">
                              <p class="notep1">也可以看看：</p>
                              <p><span class="q">“ <a href="managing-indexes.html#GUID-8E5379E6-F96D-464D-B601-A279679A49E9" title="Oracle数据库提供了一种监视索引的方法，以确定它们是否被使用。如果没有使用索引，则可以删除它，从而消除不必要的语句开销。">监控索引使用情况</a> ”</span></p>
                           </div>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-1C31FFD6-B826-4F13-9452-7C3B8B28F677" title="您可以遵循管理索引的准则。">管理索引的准则</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13462"></a><div class="props_rev_3"><a id="GUID-EF7459D8-6396-4275-A73F-75BBF2A7EC2C" name="GUID-EF7459D8-6396-4275-A73F-75BBF2A7EC2C"></a><h4 id="ADMIN-GUID-EF7459D8-6396-4275-A73F-75BBF2A7EC2C" class="sect4"><span class="enumeration_section">21.2.6</span>索引和延迟段创建</h4>
                  <div>
                     <p>当关联表推迟创建段时，将延迟索引段创建。这是因为索引段创建反映了与其关联的表的行为。</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-EF7459D8-6396-4275-A73F-75BBF2A7EC2C__GUID-D792A5EA-E583-4F80-B863-5CAE4A93467C">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="managing-tables.html#GUID-2823F411-EC06-49D0-998E-C76CB139794E" title="在本地管理的表空间中创建堆组织表时，数据库会延迟创建表段，直到插入第一行。">了解延迟段创建</a> ”</span>以获取更多信息</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-1C31FFD6-B826-4F13-9452-7C3B8B28F677" title="您可以遵循管理索引的准则。">管理索引的准则</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11716"></a><div class="props_rev_3"><a id="GUID-EBAC03DE-D2A6-4DF6-BC7D-9E5ACB025A34" name="GUID-EBAC03DE-D2A6-4DF6-BC7D-9E5ACB025A34"></a><h4 id="ADMIN-GUID-EBAC03DE-D2A6-4DF6-BC7D-9E5ACB025A34" class="sect4"><span class="enumeration_section">21.2.7</span>估算索引大小和设置存储参数</h4>
                  <div>
                     <p>在创建索引之前估计索引的大小可以促进更好的磁盘空间规划和管理。</p>
                     <p>您可以使用索引的组合估计大小以及表，撤消表空间和重做日志文件的估计值来确定保存目标数据库所需的磁盘空间量。根据这些估算，您可以进行正确的硬件购买和其他决策。</p>
                     <p>使用单个索引的估计大小来更好地管理索引使用的磁盘空间。创建索引时，可以设置适当的存储参数并提高使用索引的应用程序的I / O性能。例如，假设您在创建索引之前估计索引的最大大小。如果在创建索引时设置存储参数，则会为表数据段分配更少的扩展区，并且所有索引数据都存储在相对连续的磁盘空间部分中。这减少了涉及此索引的磁盘I / O操作所需的时间。</p>
                     <p>单个索引条目的最大大小取决于数据库的块大小。</p>
                     <p>为用于强制执行主键或唯一键约束的索引创建的索引段的存储参数可以通过以下任一方式设置：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在<code class="codeph">ENABLE</code> ......<code class="codeph">USING</code> <code class="codeph">CREATE</code> <code class="codeph">TABLE</code>或<code class="codeph">ALTER</code> <code class="codeph">TABLE</code>语句的<code class="codeph">INDEX</code>子句</p>
                        </li>
                        <li>
                           <p>在<code class="codeph">ALTER</code> <code class="codeph">INDEX</code>语句的<code class="codeph">STORAGE</code>子句中</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-EBAC03DE-D2A6-4DF6-BC7D-9E5ACB025A34__GUID-16C74E14-64AB-4256-8D35-4CD81B9CA426">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关与索引大小相关的限制的更多信息，请参阅<a href="../refrn/logical-database-limits.html#REFRN0043" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                           </li>
                           <li>
                              <p>有关在扩展数据类型列上创建索引的信息，请<a href="../sqlrf/CREATE-INDEX.html#SQLRF56300" target="_blank"><span><cite>参见“Oracle数据库SQL语言参考</cite></span></a> ”</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-1C31FFD6-B826-4F13-9452-7C3B8B28F677" title="您可以遵循管理索引的准则。">管理索引的准则</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11717"></a><div class="props_rev_3"><a id="GUID-0E5E81F7-6410-45D2-B83E-DFF858FA0522" name="GUID-0E5E81F7-6410-45D2-B83E-DFF858FA0522"></a><h4 id="ADMIN-GUID-0E5E81F7-6410-45D2-B83E-DFF858FA0522" class="sect4"><span class="enumeration_section">21.2.8</span>为每个索引指定表空间</h4>
                  <div>
                     <p>可以在任何表空间中创建索引。可以在与其索引的表相同或不同的表空间中创建索引。</p>
                     <p>如果对表及其索引使用相同的表空间，则可以更方便地执行数据库维护（例如表空间或文件备份）或确保应用程序可用性。所有相关数据始终在线。</p>
                     <p>对表及其索引使用不同的表空间（在不同的磁盘上）比在同一表空间中存储表和索引产生更好的性能。磁盘争用减少了。但是，如果对表及其索引使用不同的表空间，并且一个表空间处于脱机状态（包含数据或索引），则引用该表的语句不能保证起作用。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-1C31FFD6-B826-4F13-9452-7C3B8B28F677" title="您可以遵循管理索引的准则。">管理索引的准则</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11718"></a><div class="props_rev_3"><a id="GUID-5B74C80C-9A06-477B-8065-7A210DB6D09B" name="GUID-5B74C80C-9A06-477B-8065-7A210DB6D09B"></a><h4 id="ADMIN-GUID-5B74C80C-9A06-477B-8065-7A210DB6D09B" class="sect4"><span class="enumeration_section">21.2.9</span>考虑并行化索引创建</h4>
                  <div>
                     <p>您可以并行化索引创建，就像您可以并行化表创建一样。由于多个进程协同工作以创建索引，因此数据库可以比单个服务器进程按顺序创建索引更快地创建索引。</p>
                     <p>并行创建索引时，每个查询服务器进程将单独使用存储参数。因此，在创建索引期间，使用<code class="codeph">INITIAL</code>值5M和并行度12创建的索引将消耗至少60M的存储空间。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-5B74C80C-9A06-477B-8065-7A210DB6D09B__GUID-9AFD01A2-F51C-4CDB-A986-96C59F5E1A94">
                        <p class="notep1">也可以看看：</p>
                        <p>有关使用并行执行的信息<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/admin&amp;id=VLDBG010" target="_blank"><span class="italic">，请参见“Oracle数据库VLDB和分区指南”</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-1C31FFD6-B826-4F13-9452-7C3B8B28F677" title="您可以遵循管理索引的准则。">管理索引的准则</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11719"></a><div class="props_rev_3"><a id="GUID-72D72713-0EF5-4BDD-813C-BFF63AE4F94F" name="GUID-72D72713-0EF5-4BDD-813C-BFF63AE4F94F"></a><h4 id="ADMIN-GUID-72D72713-0EF5-4BDD-813C-BFF63AE4F94F" class="sect4"><span class="enumeration_section">21.2.10</span>考虑使用NOLOGGING创建索引</h4>
                  <div>
                     <p>您可以通过在<code class="codeph">CREATE INDEX</code>语句中指定<code class="codeph">NOLOGGING</code>来创建索引并生成最少的重做日志记录。
                     </p>
                     <div class="infoboxnote" id="GUID-72D72713-0EF5-4BDD-813C-BFF63AE4F94F__GUID-0B807985-84BF-4E51-A79E-42B56C15AA96">
                        <p class="notep1">注意：</p>
                        <p>由于使用<code class="codeph">NOLOGGING</code>创建的索引未归档，因此请在创建索引后执行备份。
                        </p>
                     </div>
                     <p>使用<code class="codeph">NOLOGGING</code>创建索引具有以下好处：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>空间保存在重做日志文件中。</p>
                        </li>
                        <li>
                           <p>创建索引所需的时间减少了。</p>
                        </li>
                        <li>
                           <p>并行创建大型索引可提高性能。</p>
                        </li>
                     </ul>
                     <p>通常，对于没有<code class="codeph">LOGGING</code>创建的较大索引而言，相对性能的提高要大于较小的索引。在没有<code class="codeph">LOGGING</code>情况下创建小索引对创建索引所需的时间几乎没有影响。但是，对于较大的索引，性能改进可能很大，尤其是在您同时创建索引时。
                     </p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-1C31FFD6-B826-4F13-9452-7C3B8B28F677" title="您可以遵循管理索引的准则。">管理索引的准则</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13280"></a><a id="ADMIN13281"></a><a id="ADMIN13279"></a><div class="props_rev_3"><a id="GUID-3A66938F-73C6-4173-844E-3938A0DBBB54" name="GUID-3A66938F-73C6-4173-844E-3938A0DBBB54"></a><h4 id="ADMIN-GUID-3A66938F-73C6-4173-844E-3938A0DBBB54" class="sect4"><span class="enumeration_section">21.2.11</span>了解何时使用不可用或不可见的索引</h4>
                  <div>
                     <p>当您希望提高批量加载的性能时，请使用不可用或不可见的索引，在删除索引之前测试删除索引的效果，或者暂停优化程序使用索引。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-3A66938F-73C6-4173-844E-3938A0DBBB54__GUID-F7AD6ABC-7F3C-4565-BDCB-6E1FDB892910">不可用的索引</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>优化程序将忽略<span class="bold">不可用的索引</span> ，并且DML不会维护该<span class="bold">索引</span> 。使索引不可用的一个原因是提高批量加载性能。（如果数据库在插入行时不需要维护索引，则批量加载会更快。）而不是删除索引并稍后重新创建它，这需要您重新调用<code class="codeph">CREATE</code> <code class="codeph">INDEX</code>语句的确切参数，您可以使索引不可用，然后重建它。
                        </p>
                        <p>您可以在不可用状态下创建索引，也可以将现有索引或索引分区标记为不可用。在某些情况下，数据库可能会将索引标记为不可用，例如在构建索引时发生故障。当分区索引的一个分区被标记为不可用时，索引的其他分区仍然有效。</p>
                        <p>必须先重建，删除和重新创建不可用的索引或索引分区，然后才能使用它。截断表会使不可用的索引有效。</p>
                        <p>如果使现有索引不可用，则会删除其索引段。</p>
                        <p>不可用索引的功能取决于<code class="codeph">SKIP_UNUSABLE_INDEXES</code>初始化参数的设置。当<code class="codeph">SKIP_UNUSABLE_INDEXES</code>为<code class="codeph">TRUE</code> （默认值）时，则：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>针对表的DML语句继续，但不维护不可用的索引。</p>
                           </li>
                           <li>
                              <p>如果存在用于强制执行<code class="codeph">UNIQUE</code>约束的任何不可用索引，则DML语句将以错误终止。
                              </p>
                           </li>
                           <li>
                              <p>对于非分区索引，优化程序在为<code class="codeph">SELECT</code>语句创建访问计划时不考虑任何不可用的索引。唯一的例外是使用<code class="codeph">INDEX()</code>提示显式指定<code class="codeph">INDEX()</code> 。
                              </p>
                           </li>
                           <li>
                              <p>对于其中一个或多个分区不可用的分区索引，优化程序可以使用表扩展。通过表扩展，优化器将查询转换为<code class="codeph">UNION</code> <code class="codeph">ALL</code>语句，其中一些子查询访问索引分区，而其他子查询访问具有不可用索引的分区。优化器可以选择可用于分区的最有效的访问方法。有关表扩展的更多信息，请参见“ <a href="../tgsql/query-transformations.html#TGSQL94910" target="_blank"><span class="italic">Oracle数据库SQL调优指南”</span></a> 。
                              </p>
                           </li>
                        </ul>
                        <p>当<code class="codeph">SKIP_UNUSABLE_INDEXES</code>为<code class="codeph">FALSE</code> ，则：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果存在任何不可用的索引或索引分区，则会导致更新这些索引或索引分区的任何DML语句都会因错误而终止。</p>
                           </li>
                           <li>
                              <p>对于<code class="codeph">SELECT</code>语句，如果存在不可用的索引或不可用的索引分区，但优化器不选择将其用于访问计划，则语句将继续。但是，如果优化器确实选择使用不可用索引或不可用索引分区，则语句将终止并显示错误。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-3A66938F-73C6-4173-844E-3938A0DBBB54__GUID-A18074BB-9012-4835-ACD1-4368E669F2B3">隐形指数</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><a id="d222637e1263" class="indexterm-anchor"></a><a id="d222637e1267" class="indexterm-anchor"></a>您可以创建不可见索引或使现有索引不可见。除非在会话或系统级别将<code class="codeph">OPTIMIZER_USE_INVISIBLE_INDEXES</code>初始化参数显式设置为<code class="codeph">TRUE</code> ，否则<code class="codeph">OPTIMIZER_USE_INVISIBLE_INDEXES</code>程序将忽略<span class="bold">不可见索引</span> 。与不可用索引不同，在DML语句期间会保留不可见索引。虽然您可以使分区索引不可见，但是不能使单个索引分区不可见，同时保持其他分区可见。
                        </p>
                        <p>使用不可见索引，您可以执行以下操作：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在删除之前测试索引的删除。</p>
                           </li>
                           <li>
                              <p>对应用程序的某些操作或模块使用临时索引结构，而不会影响整个应用程序。</p>
                           </li>
                           <li>
                              <p>将索引添加到已存在索引的一组列。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-3A66938F-73C6-4173-844E-3938A0DBBB54__GUID-56A13457-7044-44C7-A991-843241DBF32B">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="managing-indexes.html#GUID-FA0C46EC-DA22-4484-AF52-58BC0CBEEC81" title="在UNUSABLE状态下创建索引时，优化程序将忽略该索引，并且不由DML维护。必须先重建，删除和重新创建不可用的索引，然后才能使用它。">创建一个不可用的索引</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="managing-indexes.html#GUID-1FEFC754-C26F-4EC7-A1B3-318850A089AA" title="不可见索引是优化程序忽略的索引，除非您在会话或系统级别将OPTIMIZER_USE_INVISIBLE_INDEXES初始化参数显式设置为TRUE。">创建一个看不见的指数</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="managing-indexes.html#GUID-A7A6C478-78CC-4A49-B2DB-A7F46BD57692" title="如果使索引不可用，优化程序将忽略该索引，并且不由DML维护。当您使分区索引的一个分区不可用时，索引的其他分区仍然有效。">使索引无法使用</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="managing-indexes.html#GUID-FD6F0D3D-022E-433D-9E11-B3A5D65A84C2" title="使索引不可见是使其无法使用或丢弃的替代方法。">使索引变得无形或可见</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-1C31FFD6-B826-4F13-9452-7C3B8B28F677" title="您可以遵循管理索引的准则。">管理索引的准则</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13845"></a><div class="props_rev_3"><a id="GUID-B4B30CF4-2B95-44D6-8596-EC2A378251EF" name="GUID-B4B30CF4-2B95-44D6-8596-EC2A378251EF"></a><h4 id="ADMIN-GUID-B4B30CF4-2B95-44D6-8596-EC2A378251EF" class="sect4"><span class="enumeration_section">21.2.12</span>了解何时在同一组列上创建多个索引</h4>
                  <div>
                     <p>当索引以某种方式不同时，您可以在同一列列上创建多个索引。例如，您可以在同一组列上创建B树索引和位图索引。</p>
                     <p>如果在同一组列上有多个索引，则一次只能看到其中一个索引，并且任何其他索引必须是不可见的。</p>
                     <p>您可以在同一组列上创建不同的索引，因为它们可以灵活地满足您的要求。您还可以在同一组列上创建多个索引，以执行应用程序迁移，而不会删除现有索引并使用不同的属性重新创建它。</p>
                     <p>不同类型的索引在不同的场景中很有用。例如，B树索引通常用于具有许多并发事务的联机事务处理（OLTP）系统，而位图索引通常用于主要用于查询的数据仓库系统。同样，本地和全局分区索引在不同的场景中很有用。本地分区索引易于管理，因为分区维护操作会自动应用于它们。当您希望索引的分区方案与其表的分区方案不同时，全局分区索引很有用。</p>
                     <p>当以下索引特征中的至少一个不同时，您可以在同一列列上创建多个索引：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>索引是不同类型的。</p>
                           <p>有关不同类型索引的信息，请参阅<span class="q">“ <a href="managing-indexes.html#GUID-2CE1BB91-3EFA-450D-BD31-0C961549F0C2" title="索引是与表和集群关联的可选结构，允许SQL查询对表执行更快。">关于索引</a> ”</span>和<a href="../cncpt/indexes-and-index-organized-tables.html#CNCPT88834" target="_blank"><span class="italic">Oracle数据库概念</span></a> 。
                           </p>
                           <p>但是，以下例外情况适用：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>您无法在同一组列上创建B树索引和B树群集索引。</p>
                              </li>
                              <li>
                                 <p>您无法在同一组列上创建B树索引和索引组织表。</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>索引使用不同的分区。</p>
                           <p>分区可以通过以下任何方式进行区分：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>未分区的索引和已分区的索引</p>
                              </li>
                              <li>
                                 <p>本地分区的索引和全局分区的索引</p>
                              </li>
                              <li>
                                 <p>分区类型（范围或散列）不同的索引</p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>索引具有不同的唯一性属性。</p>
                           <p>您可以在同一组列上创建唯一索引和非唯一索引。</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-B4B30CF4-2B95-44D6-8596-EC2A378251EF__GUID-005439BE-7D10-48FE-B015-E35754111ED9">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="managing-indexes.html#GUID-05F3C3B0-DB80-489C-B749-01653FDE8E09" title="当索引以某种方式不同时，您可以在同一列列上创建多个索引。">在同一组列上创建多个索引</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="managing-indexes.html#GUID-3A66938F-73C6-4173-844E-3938A0DBBB54" title="当您希望提高批量加载的性能时，请使用不可用或不可见的索引，在删除索引之前测试删除索引的效果，或者暂停优化程序使用索引。">了解何时使用不可用或不可见的索引</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-1C31FFD6-B826-4F13-9452-7C3B8B28F677" title="您可以遵循管理索引的准则。">管理索引的准则</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13067"></a><a id="ADMIN13068"></a><a id="ADMIN11720"></a><div class="props_rev_3"><a id="GUID-D459FCD6-D729-4F3A-96AD-E147FC37956A" name="GUID-D459FCD6-D729-4F3A-96AD-E147FC37956A"></a><h4 id="ADMIN-GUID-D459FCD6-D729-4F3A-96AD-E147FC37956A" class="sect4"><span class="enumeration_section">21.2.13</span>考虑合并或重建指数的成本和收益</h4>
                  <div>
                     <p>不正确的尺寸或增加的增长会产生索引碎片。要消除或减少碎片，您可以重建或合并索引。但在执行任一任务之前，请权衡每个选项的成本和收益，并选择最适合您情况的选项。</p>
                     <p><a href="managing-indexes.html#GUID-D459FCD6-D729-4F3A-96AD-E147FC37956A__G1007548" title="第1列列出了重建索引的好处，第2列列出了索引的同步优势。">表21-1</a>是与重建和合并索引相关的成本和收益的比较。
                     </p>
                     <div class="tblformal" id="GUID-D459FCD6-D729-4F3A-96AD-E147FC37956A__G1007548">
                        <p class="titleintable">表21-1合并或重建索引的成本和收益</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="合并或重建指数的成本和收益" width="100%" border="1" summary="Column 1 lists the benefits of rebuilding an index, column 2 lists the comparable benefits of coalexcing an index." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="50%" id="d222637e1528">重建指数</th>
                                 <th align="left" valign="bottom" width="50%" id="d222637e1531">合并指数</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d222637e1536" headers="d222637e1528 ">
                                    <p>快速将索引移动到另一个表空间</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d222637e1536 d222637e1531 ">
                                    <p>无法将索引移动到另一个表空间</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d222637e1543" headers="d222637e1528 ">
                                    <p>成本较高：需要更多磁盘空间</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d222637e1543 d222637e1531 ">
                                    <p>降低成本：不需要更多磁盘空间</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d222637e1550" headers="d222637e1528 ">
                                    <p>创建新树，如果适用，缩小高度</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d222637e1550 d222637e1531 ">
                                    <p>合并在树的同一分支内的叶子块</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="50%" id="d222637e1557" headers="d222637e1528 ">
                                    <p>使您能够快速更改存储和表空间参数，而无需删除原始索引</p>
                                 </td>
                                 <td align="left" valign="top" width="50%" headers="d222637e1557 d222637e1531 ">
                                    <p>快速释放索引叶块以供使用</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>在具有可以释放以供重用的B树索引叶块的情况下，可以使用以下语句合并这些叶块：</p><pre class="oac_no_warn" dir="ltr">ALTER INDEX vmoore COALESCE;</pre><p><a href="managing-indexes.html#GUID-D459FCD6-D729-4F3A-96AD-E147FC37956A__I1006458">图21-1</a>说明了<code class="codeph">ALTER INDEX COALESCE</code>对索引<code class="codeph">vmoore</code> 。在执行操作之前，前两个叶块已满50％。因此，您有机会减少碎片并完全填充第一个块，同时释放第二个块。
                     </p>
                     <div class="figure" id="GUID-D459FCD6-D729-4F3A-96AD-E147FC37956A__I1006458">
                        <p class="titleinfigure">图21-1合并索引</p><img src="img/admin026.gif" alt="下面是图21-1的描述" title="下面是图21-1的描述" longdesc="img_text/admin026.html"><br><a href="img_text/admin026.html">“图21-1合并索引”的描述</a></div>
                     <!-- class="figure" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-1C31FFD6-B826-4F13-9452-7C3B8B28F677" title="您可以遵循管理索引的准则。">管理索引的准则</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11721"></a><div class="props_rev_3"><a id="GUID-A76C2C1D-F047-4052-83C2-F7EB052E7A9C" name="GUID-A76C2C1D-F047-4052-83C2-F7EB052E7A9C"></a><h4 id="ADMIN-GUID-A76C2C1D-F047-4052-83C2-F7EB052E7A9C" class="sect4"><span class="enumeration_section">21.2.14</span>在禁用或删除约束之前考虑成本</h4>
                  <div>
                     <p>由于唯一键和主键具有关联索引，因此在考虑是否禁用或删除<code class="codeph">UNIQUE</code>或<code class="codeph">PRIMARY KEY</code>约束时，应考虑删除和创建索引的成本。
                     </p>
                     <p>如果<code class="codeph">UNIQUE</code>键或<code class="codeph">PRIMARY KEY</code>约束的关联索引非常大，则可以通过启用约束而不是删除并重新创建大索引来节省时间。您还可以选择在删除或禁用<code class="codeph">UNIQUE</code>或<code class="codeph">PRIMARY KEY</code>约束时显式指定要保留或删除索引。
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-A76C2C1D-F047-4052-83C2-F7EB052E7A9C__GUID-FBD35D2D-0089-414C-BA6D-D685ED87BF90">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="managing-schema-objects.html#GUID-A6587008-A4F2-4333-A47C-F1AB0B4538FA" title="完整性约束是限制表中一列或多列的值的规则。约束子句可以出现在CREATE TABLE或ALTER TABLE语句中，并标识受约束影响的一列或多列，并标识约束的条件。">管理诚信约束</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-1C31FFD6-B826-4F13-9452-7C3B8B28F677" title="您可以遵循管理索引的准则。">管理索引的准则</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN14232"></a><div class="props_rev_3"><a id="GUID-652C144A-3120-4FA1-96CC-02A7E7D988EA" name="GUID-652C144A-3120-4FA1-96CC-02A7E7D988EA"></a><h4 id="ADMIN-GUID-652C144A-3120-4FA1-96CC-02A7E7D988EA" class="sect4"><span class="enumeration_section">21.2.15</span>考虑使用内存中的列存储来减少索引数</h4>
                  <div>
                     <p>内存中列存储是系统全局区域（SGA）的可选部分，用于存储针对快速扫描进行了优化的表，表分区和其他数据库对象的副本。在内存中列存储中，表数据按列而不是SGA中的行存储。</p>
                     <div class="infoboxnote" id="GUID-652C144A-3120-4FA1-96CC-02A7E7D988EA__GUID-94C5FD4E-5276-49BA-8441-7637477AF2AE">
                        <p class="notep1">注意：</p>
                        <p>从Oracle Database 12 <span class="italic">c</span>第1版（12.1.0.2）开始提供此功能。
                        </p>
                     </div>
                     <p>对于OLTP或数据仓库环境中使用的表，通常会创建多个索引以提高分析和报告查询的性能。这些索引可能会妨碍数据操作语言（DML）语句的性能。当表存储在内存中列存储中时，可以极大地减少或消除用于分析或报告查询的索引，而不会影响查询性能。消除这些索引可以提高事务和数据加载操作的性能。</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-652C144A-3120-4FA1-96CC-02A7E7D988EA__GUID-D2716960-A4EA-4E78-888B-2252B7EEE9A5">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="managing-memory.html#GUID-7990553D-9199-4AFE-B912-40ADC9C3EDF1" title="Oracle数据库内存（Database In-Memory）是Oracle数据库12c第1版（12.1.0.2）中首次引入的一套功能，可极大地提高实时分析和混合工作负载的性能。">使用Oracle数据库内存提高查询性能</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-1C31FFD6-B826-4F13-9452-7C3B8B28F677" title="您可以遵循管理索引的准则。">管理索引的准则</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN11722"></a><div class="props_rev_3"><a id="GUID-BF813E96-C4BD-433C-B26A-70289D938D02" name="GUID-BF813E96-C4BD-433C-B26A-70289D938D02"></a><h3 id="ADMIN-GUID-BF813E96-C4BD-433C-B26A-70289D938D02" class="sect3"><span class="enumeration_section">21.3</span>创建索引</h3>
               <div>
                  <p>您可以创建几种不同类型的索引。您可以显式创建索引，也可以创建与约束关联的索引。</p>
                  <div class="infoboxnote" id="GUID-BF813E96-C4BD-433C-B26A-70289D938D02__GUID-25BF0A76-567A-4838-86B5-2A82127BCBC5">
                     <p class="notep1">实时SQL：</p>
                     <p>要查看和运行与在Oracle Live SQL上创建索引相关的示例，请转至<a href="https://livesql.oracle.com/apex/livesql/docs/admin/managing-indexes/create.html" target="_blank"><span class="italic">Oracle Live SQL：创建索引</span></a> 。
                     </p>
                  </div>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-FEF88643-3E11-4B42-A285-C4FCC58569A2">创建索引的先决条件</a><br>必须先满足先决条件才能创建索引。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-AAE78F92-0ADF-4FB1-9949-DC7F2B6363BE">明确地创建索引</a><br>您可以使用SQL语句<code class="codeph">CREATE INDEX</code>显式创建索引（在完整性约束之外）。</li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-3D02D776-D3A0-4728-873D-71D5D1625E8F">明确地创建唯一索引</a><br>索引可以是唯一的也可以是非唯一的。唯一索引保证表中没有两行在键列（或列）中具有重复值。非唯一索引不会对列值施加此限制。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-BF04684D-A857-4046-8749-0F57D3B19113">创建与约束关联的索引</a><br>发出<code class="codeph">CREATE TABLE</code>或<code class="codeph">ALTER TABLE</code> SQL语句时，可以创建与约束关联的索引。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-753ED893-7D87-4957-8AFA-C4624149612B">创建一个大型索引</a><br>在创建极大索引时，请考虑为索引创建分配更大的临时表空间。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-81CECA90-E664-4A53-AEB0-3AA4AB672839">在线创建索引</a><br>您可以在线创建和重建索引。因此，您可以在构建或重建该表上的索引的同时更新基表。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-EF5392C6-C38A-4206-BD47-353AD7793557">创建基于函数的索引</a><br><span class="bold">基于函数的索引</span>便于查询限定函数或表达式返回的值。函数或表达式的值已预先计算并存储在索引中。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-8EE6F072-BADE-466B-98E6-30ABDFFCD8A9">创建压缩索引</a><br>随着数据库大小的增加，请考虑使用索引压缩来节省磁盘空间。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-FA0C46EC-DA22-4484-AF52-58BC0CBEEC81">创建一个不可用的索引</a><br>在<code class="codeph">UNUSABLE</code>状态下创建索引时，优化程序将忽略该索引，并且不由DML维护。必须先重建，删除和重新创建不可用的索引，然后才能使用它。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-1FEFC754-C26F-4EC7-A1B3-318850A089AA">创建一个隐形索引</a><br>不可见索引是优化程序忽略的索引，除非您在会话或系统级别将<code class="codeph">OPTIMIZER_USE_INVISIBLE_INDEXES</code>初始化参数显式设置为<code class="codeph">TRUE</code> 。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-05F3C3B0-DB80-489C-B749-01653FDE8E09">在同一组列上创建多个索引</a><br>当索引以某种方式不同时，您可以在同一列列上创建多个索引。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-E4149397-FF37-4367-A12F-675433715904">管理索引</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-FEF88643-3E11-4B42-A285-C4FCC58569A2" name="GUID-FEF88643-3E11-4B42-A285-C4FCC58569A2"></a><h4 id="ADMIN-GUID-FEF88643-3E11-4B42-A285-C4FCC58569A2" class="sect4"><span class="enumeration_section">21.3.1</span>创建索引的先决条件</h4>
                  <div>
                     <p>必须先满足先决条件才能创建索引。</p>
                     <p>要在您自己的架构中创建索引，必须至少满足以下先决条件<span class="italic">之一</span> ：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>要编制索引的表或集群位于您自己的架构中。</p>
                        </li>
                        <li>
                           <p>您对要编制索引的表具有<code class="codeph">INDEX</code>权限。
                           </p>
                        </li>
                        <li>
                           <p>您有<code class="codeph">CREATE ANY INDEX</code>系统特权。
                           </p>
                        </li>
                     </ul>
                     <p>要在另一个模式中创建索引，必须满足以下<span class="italic">所有</span>先决条件：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>您有<code class="codeph">CREATE ANY INDEX</code>系统特权。
                           </p>
                        </li>
                        <li>
                           <p>另一个模式的所有者具有表空间的配额，以包含索引或索引分区或<code class="codeph">UNLIMITED TABLESPACE</code>系统特权。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-BF813E96-C4BD-433C-B26A-70289D938D02" title="您可以创建几种不同类型的索引。您可以显式创建索引，也可以创建与约束关联的索引。">创建索引</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11723"></a><div class="props_rev_3"><a id="GUID-AAE78F92-0ADF-4FB1-9949-DC7F2B6363BE" name="GUID-AAE78F92-0ADF-4FB1-9949-DC7F2B6363BE"></a><h4 id="ADMIN-GUID-AAE78F92-0ADF-4FB1-9949-DC7F2B6363BE" class="sect4"><span class="enumeration_section">21.3.2</span>明确创建索引</h4>
                  <div>
                     <p>您可以使用SQL语句<code class="codeph">CREATE INDEX</code>显式创建索引（在完整性约束之外）。</p>
                     <div class="section">
                        <p>以下语句为<code class="codeph">emp</code>表的<code class="codeph">ename</code>列创建名为<code class="codeph">emp_ename</code>的索引：</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX emp_ename ON emp（ename）TABLESPACE用户存储（INITIAL 20K NEXT 20k）;</pre><p>请注意，为索引显式指定了几个存储设置和表空间。如果没有为索引指定存储选项（例如<code class="codeph">INITIAL</code>和<code class="codeph">NEXT</code> ），则会自动使用默认或指定表空间的默认存储选项。
                        </p>
                        <div class="infoboxnote" id="GUID-AAE78F92-0ADF-4FB1-9949-DC7F2B6363BE__GUID-25BF0A76-567A-4838-86B5-2A82127BCBC5">
                           <p class="notep1">实时SQL：</p>
                           <p>在Oracle Live SQL上查看并运行Oracle Live SQL的相关示例<a href="https://livesql.oracle.com/apex/livesql/docs/admin/managing-indexes/create.html" target="_blank"><span class="italic">：创建索引</span></a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-AAE78F92-0ADF-4FB1-9949-DC7F2B6363BE__GUID-04E676AE-1633-41C3-B954-E2183780DBC7">
                        <p class="notep1">也可以看看：</p>
                        <p>有关使用<code class="codeph">CREATE INDEX</code>语句的语法和限制的<a href="../sqlrf/CREATE-INDEX.html#SQLRF01209" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-BF813E96-C4BD-433C-B26A-70289D938D02" title="您可以创建几种不同类型的索引。您可以显式创建索引，也可以创建与约束关联的索引。">创建索引</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11724"></a><div class="props_rev_3"><a id="GUID-3D02D776-D3A0-4728-873D-71D5D1625E8F" name="GUID-3D02D776-D3A0-4728-873D-71D5D1625E8F"></a><h4 id="ADMIN-GUID-3D02D776-D3A0-4728-873D-71D5D1625E8F" class="sect4"><span class="enumeration_section">21.3.3</span>明确创建唯一索引</h4>
                  <div>
                     <p>索引可以是唯一的也可以是非唯一的。唯一索引保证表中没有两行在键列（或列）中具有重复值。非唯一索引不会对列值施加此限制。</p>
                     <div class="section">
                        <p>使用<code class="codeph">CREATE UNIQUE INDEX</code>语句创建唯一索引。以下示例创建唯一索引：</p><pre class="oac_no_warn" dir="ltr">CREATE UNIQUE INDEX dept_unique_index ON dept（dname）TABLESPACE indx;</pre><p>或者，您可以在所需列上定义<code class="codeph">UNIQUE</code>完整性约束。数据库通过在唯一键上自动定义唯一索引来强制实施<code class="codeph">UNIQUE</code>完整性约束。这将在下一节中讨论。但是，建议显式创建用于查询性能的任何索引，包括唯一索引。
                        </p>
                        <div class="infoboxnote" id="GUID-3D02D776-D3A0-4728-873D-71D5D1625E8F__GUID-25BF0A76-567A-4838-86B5-2A82127BCBC5">
                           <p class="notep1">实时SQL：</p>
                           <p>在Oracle Live SQL上查看并运行Oracle Live SQL的相关示例<a href="https://livesql.oracle.com/apex/livesql/docs/admin/managing-indexes/create.html" target="_blank"><span class="italic">：创建索引</span></a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-3D02D776-D3A0-4728-873D-71D5D1625E8F__GUID-8BAB30D9-3995-4333-ACB1-47752866AF03">
                        <p class="notep1">也可以看看：</p>
                        <p>有关创建性能索引的详细信息，请<a href="../tgsql/index.html" target="_blank"><span class="italic">参见“Oracle数据库SQL调优指南”</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-BF813E96-C4BD-433C-B26A-70289D938D02" title="您可以创建几种不同类型的索引。您可以显式创建索引，也可以创建与约束关联的索引。">创建索引</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-BF04684D-A857-4046-8749-0F57D3B19113" name="GUID-BF04684D-A857-4046-8749-0F57D3B19113"></a><h4 id="ADMIN-GUID-BF04684D-A857-4046-8749-0F57D3B19113" class="sect4"><span class="enumeration_section">21.3.4</span>创建与约束关联的索引</h4>
                  <p>发出<code class="codeph">CREATE TABLE</code>或<code class="codeph">ALTER TABLE</code> SQL语句时，可以创建与约束关联的索引。
                  </p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-indexes.html#GUID-8DC3DFF0-28C4-4873-91AD-DCBC0AEF8D1D">关于创建与约束关联的索引</a><br>Oracle数据库通过在唯一键或主键上创建唯一索引，对表强制执行<code class="codeph">UNIQUE</code>键或<code class="codeph">PRIMARY KEY</code>完整性约束。
                        </li>
                        <li class="ulchildlink"><a href="managing-indexes.html#GUID-F6B75A7D-EF2F-4D31-BD70-C5C5D54A71DB">指定与约束关联的索引的存储选项</a><br>您可以使用<code class="codeph">USING INDEX</code>子句为与<code class="codeph">UNIQUE</code>和<code class="codeph">PRIMARY KEY</code>约束关联的索引设置存储选项。
                        </li>
                        <li class="ulchildlink"><a href="managing-indexes.html#GUID-15F85DD6-8620-4872-A4E2-2F9DA6DD2438">指定与约束关联的索引</a><br>您可以指定与约束关联的索引的详细信息。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-BF813E96-C4BD-433C-B26A-70289D938D02" title="您可以创建几种不同类型的索引。您可以显式创建索引，也可以创建与约束关联的索引。">创建索引</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN11725"></a><div class="props_rev_3"><a id="GUID-8DC3DFF0-28C4-4873-91AD-DCBC0AEF8D1D" name="GUID-8DC3DFF0-28C4-4873-91AD-DCBC0AEF8D1D"></a><h5 id="ADMIN-GUID-8DC3DFF0-28C4-4873-91AD-DCBC0AEF8D1D" class="sect5"><span class="enumeration_section">21.3.4.1</span>关于创建与约束关联的索引</h5>
                     <div>
                        <p>Oracle数据库通过在唯一键或主键上创建唯一索引，对表强制执行<code class="codeph">UNIQUE</code>键或<code class="codeph">PRIMARY KEY</code>完整性约束。
                        </p>
                        <p>启用约束时，数据库将自动创建此索引。发出<code class="codeph">CREATE TABLE</code>或<code class="codeph">ALTER TABLE</code>语句以创建索引时，不需要执行任何操作，但您可以选择指定<code class="codeph">USING INDEX</code>子句来控制其创建。这包括何时定义和启用约束，以及何时启用已定义但禁用的约束。
                        </p>
                        <p>要启用<code class="codeph">UNIQUE</code>或<code class="codeph">PRIMARY KEY</code>约束，从而创建关联索引，表的所有者必须具有用于包含索引的表空间的配额或<code class="codeph">UNLIMITED TABLESPACE</code>系统特权。与约束关联的索引始终采用约束的名称，除非您可选地另行指定。
                        </p>
                        <div class="infoboxnote" id="GUID-8DC3DFF0-28C4-4873-91AD-DCBC0AEF8D1D__GUID-A6BDFD62-F1DB-4E7A-8F00-321A962AE512">
                           <p class="notep1">注意：</p>
                           <p>在<span class="q">“ <a href="managing-schema-objects.html#GUID-E367A78E-8FA7-49A7-B848-462EF3F1096C" title="It is important to use integrity constraint states in a particular order.">有效使用完整性约束：过程</a> ”中</span>描述了用于启用可以利用并行性<span class="q"><a href="managing-schema-objects.html#GUID-E367A78E-8FA7-49A7-B848-462EF3F1096C" title="以特定顺序使用完整性约束状态非常重要。">的约束的有效过程</a></span> 。
                           </p>
                        </div>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-BF04684D-A857-4046-8749-0F57D3B19113" title="发出CREATE TABLE或ALTER TABLE SQL语句时，可以创建与约束关联的索引。">创建与约束关联的索引</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11726"></a><div class="props_rev_3"><a id="GUID-F6B75A7D-EF2F-4D31-BD70-C5C5D54A71DB" name="GUID-F6B75A7D-EF2F-4D31-BD70-C5C5D54A71DB"></a><h5 id="ADMIN-GUID-F6B75A7D-EF2F-4D31-BD70-C5C5D54A71DB" class="sect5"><span class="enumeration_section">21.3.4.2</span>指定与约束关联的索引的存储选项</h5>
                     <div>
                        <p>您可以使用<code class="codeph">USING INDEX</code>子句为与<code class="codeph">UNIQUE</code>和<code class="codeph">PRIMARY KEY</code>约束关联的索引设置存储选项。
                        </p>
                        <div class="section">
                           <p>以下<code class="codeph">CREATE TABLE</code>语句启用<code class="codeph">PRIMARY KEY</code>约束并指定关联索引的存储选项：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE emp（empno NUMBER（5）PRIMARY KEY，age INTEGER）使用INDEX TABLESPACE用户启用主键;</pre></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-BF04684D-A857-4046-8749-0F57D3B19113" title="发出CREATE TABLE或ALTER TABLE SQL语句时，可以创建与约束关联的索引。">创建与约束关联的索引</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN11727"></a><div class="props_rev_3"><a id="GUID-15F85DD6-8620-4872-A4E2-2F9DA6DD2438" name="GUID-15F85DD6-8620-4872-A4E2-2F9DA6DD2438"></a><h5 id="ADMIN-GUID-15F85DD6-8620-4872-A4E2-2F9DA6DD2438" class="sect5"><span class="enumeration_section">21.3.4.3</span>指定与约束关联的索引</h5>
                     <div>
                        <p>您可以指定与约束关联的索引的详细信息。</p>
                        <div class="section">
                           <p>如果需要对与<code class="codeph">UNIQUE</code>和<code class="codeph">PRIMARY KEY</code>约束关联的索引进行更明确的控制，则数据库允许您：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>指定数据库用于强制执行约束的现有索引</p>
                              </li>
                              <li>
                                 <p>指定数据库用于创建索引并强制执行约束的<code class="codeph">CREATE</code> <code class="codeph">INDEX</code>语句</p>
                              </li>
                           </ul>
                           <p>这些选项使用<code class="codeph">USING</code> <code class="codeph">INDEX</code>子句指定。以下陈述提供了一些示例。
                           </p>
                           <p><span class="bold">例1：</span> 
                           </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE a（a1 INT PRIMARY KEY使用INDEX（在（a1）上创建索引ai））;</pre><div class="infoboxnote" id="GUID-15F85DD6-8620-4872-A4E2-2F9DA6DD2438__GUID-25BF0A76-567A-4838-86B5-2A82127BCBC5">
                              <p class="notep1">实时SQL：</p>
                              <p>在Oracle Live SQL上查看并运行Oracle Live SQL的相关示例<a href="https://livesql.oracle.com/apex/livesql/docs/admin/managing-indexes/create.html" target="_blank"><span class="italic">：创建索引</span></a> 。
                              </p>
                           </div>
                           <p><span class="bold">例2：</span> 
                           </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE b（b1 INT，b2 INT，CONSTRAINT bu1 UNIQUE（b1，b2）USING INDEX（在b（b1，b2）上创建唯一索引bi），CONSTRAINT bu2 UNIQUE（b2，b1）USING INDEX bi）;</pre><p><span class="bold">例3：</span> 
                           </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE c（c1 INT，c2 INT）; CREATE INDEX ci ON c（c1，c2）; ALTER TABLE c ADD CONSTRAINT cpk PRIMARY KEY（c1）使用INDEX ci;</pre><p>如果单个语句创建具有一个约束的索引并且还将该索引用于另一个约束，则系统将尝试重新排列子句以在重用之前创建索引。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-15F85DD6-8620-4872-A4E2-2F9DA6DD2438__GUID-3F912CCA-28E5-44F4-9424-F1E41313600D">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="managing-schema-objects.html#GUID-A6587008-A4F2-4333-A47C-F1AB0B4538FA" title="完整性约束是限制表中一列或多列的值的规则。约束子句可以出现在CREATE TABLE或ALTER TABLE语句中，并标识受约束影响的一列或多列，并标识约束的条件。">管理诚信约束</a> ”</span></p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-BF04684D-A857-4046-8749-0F57D3B19113" title="发出CREATE TABLE或ALTER TABLE SQL语句时，可以创建与约束关联的索引。">创建与约束关联的索引</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN11729"></a><div class="props_rev_3"><a id="GUID-753ED893-7D87-4957-8AFA-C4624149612B" name="GUID-753ED893-7D87-4957-8AFA-C4624149612B"></a><h4 id="ADMIN-GUID-753ED893-7D87-4957-8AFA-C4624149612B" class="sect4"><span class="enumeration_section">21.3.5</span>创建大型索引</h4>
                  <div>
                     <p>在创建极大索引时，请考虑为索引创建分配更大的临时表空间。</p>
                     <div class="section">
                        <p>为此，请完成以下步骤：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>使用<code class="codeph">CREATE TABLESPACE</code>或<code class="codeph">CREATE TEMPORARY TABLESPACE</code>语句创建新的临时表空间。</span></li>
                        <li><span>使用<code class="codeph">ALTER USER</code>语句的<code class="codeph">TEMPORARY TABLESPACE</code>选项将其设置为新的临时表空间。</span></li>
                        <li><span>使用<code class="codeph">CREATE INDEX</code>语句<code class="codeph">CREATE INDEX</code> 。</span></li>
                        <li><span>使用<code class="codeph">DROP TABLESPACE</code>语句删除此表空间。然后使用<code class="codeph">ALTER USER</code>语句将临时表空间重置为原始临时表空间。</span></li>
                     </ol>
                     <div class="section">
                        <p>使用此过程可以避免将通常的，通常是共享的临时表空间扩展到可能影响未来性能的不合理大小的问题。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-BF813E96-C4BD-433C-B26A-70289D938D02" title="您可以创建几种不同类型的索引。您可以显式创建索引，也可以创建与约束关联的索引。">创建索引</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11006"></a><div class="props_rev_3"><a id="GUID-81CECA90-E664-4A53-AEB0-3AA4AB672839" name="GUID-81CECA90-E664-4A53-AEB0-3AA4AB672839"></a><h4 id="ADMIN-GUID-81CECA90-E664-4A53-AEB0-3AA4AB672839" class="sect4"><span class="enumeration_section">21.3.6</span>在线创建索引</h4>
                  <div>
                     <p>您可以在线创建和重建索引。因此，您可以在构建或重建该表上的索引的同时更新基表。</p>
                     <div class="section">
                        <p>您可以在进行索引构建时执行DML操作，但不允许进行DDL操作。在线创建或重建索引时不支持并行DML。</p>
                        <p>以下语句说明了在线索引构建操作：</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX emp_name ON emp（mgr，emp1，emp2，emp3）ONLINE;</pre><div class="infoboxnote" id="GUID-81CECA90-E664-4A53-AEB0-3AA4AB672839__GUID-B1EAB70B-16A6-45CF-843A-832D173F9D37">
                           <p class="notep1">注意：</p>
                           <p>请记住，完成联机索引构建所花费的时间与表的大小和并发执行的DML语句的数量成正比。因此，最好在DML活动较低时启动在线索引构建。</p>
                        </div>
                        <div class="infoboxnote" id="GUID-81CECA90-E664-4A53-AEB0-3AA4AB672839__GUID-25BF0A76-567A-4838-86B5-2A82127BCBC5">
                           <p class="notep1">实时SQL：</p>
                           <p>在Oracle Live SQL上查看并运行Oracle Live SQL的相关示例<a href="https://livesql.oracle.com/apex/livesql/docs/admin/managing-indexes/create.html" target="_blank"><span class="italic">：创建索引</span></a> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-81CECA90-E664-4A53-AEB0-3AA4AB672839__GUID-EE8631E7-E087-4FD8-964C-8F28B6057210">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="managing-indexes.html#GUID-BD4B0F57-6E2A-4A73-A0A7-99AB1F69F142" title="重建索引时，使用现有索引作为数据源。以这种方式创建索引使您可以更改存储特征或移动到新的表空间。基于现有数据源重建索引会删除块内碎片。">重建现有指数</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-BF813E96-C4BD-433C-B26A-70289D938D02" title="您可以创建几种不同类型的索引。您可以显式创建索引，也可以创建与约束关联的索引。">创建索引</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11730"></a><div class="props_rev_3"><a id="GUID-EF5392C6-C38A-4206-BD47-353AD7793557" name="GUID-EF5392C6-C38A-4206-BD47-353AD7793557"></a><h4 id="ADMIN-GUID-EF5392C6-C38A-4206-BD47-353AD7793557" class="sect4"><span class="enumeration_section">21.3.7</span>创建基于函数的索引</h4>
                  <div>
                     <p><span class="bold">基于函数的索引</span>便于查询限定函数或表达式返回的值。函数或表达式的值已预先计算并存储在索引中。
                     </p>
                     <div class="section">
                        <p>除了创建常规索引的先决条件之外，如果索引基于用户定义的函数，那么这些函数必须标记为<code class="codeph">DETERMINISTIC</code> 。此外，使用函数所有者的凭据执行基于函数的索引，因此您必须具有该函数的<code class="codeph">EXECUTE</code>对象特权。
                        </p>
                        <div class="infoboxnote" id="GUID-EF5392C6-C38A-4206-BD47-353AD7793557__GUID-8D5EA1E0-F337-41C0-977E-0E1F9E5B7849">
                           <p class="notep1">注意：</p>
                           <p><code class="codeph">CREATE INDEX</code>存储基于函数的索引中使用的最新函数的时间戳。验证索引时会更新此时间戳。在执行基于函数的索引的表空间时间点恢复时，如果索引中使用的最新函数的时间戳比索引中存储的时间戳更新，则索引将标记为无效。你必须使用<code class="codeph">ANALYZE INDEX...VALIDATE STRUCTURE</code>语句用于验证此索引。
                           </p>
                        </div>
                        <p>要说明基于函数的索引，请考虑以下语句，该语句定义在函数<code class="codeph">area(geo)</code>上定义的基于函数的索引（ <code class="codeph">area_index</code> <code class="codeph">area(geo)</code> ：</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX area_index ON rivers（area（geo））;</pre><p>在以下SQL语句中，当<code class="codeph">WHERE</code>子句中引用<code class="codeph">area(geo)</code>时，优化程序会考虑使用索引<code class="codeph">area_index</code> 。
                        </p><pre class="oac_no_warn" dir="ltr">SELECT id，geo，area（geo），desc FROM rivers WHERE Area（geo）&gt; 5000;</pre><p>因为基于函数的索引依赖于它正在使用的任何函数，所以当函数更改时它可以无效。如果该函数有效，那么您可以使用<code class="codeph">ALTER INDEX...ENABLE</code>语句以启用已禁用的基于函数的索引。<code class="codeph">ALTER INDEX...DISABLE</code>语句允许您禁用基于函数的索引。如果您正在处理函数体，请考虑这样做。
                        </p>
                        <div class="infoboxnote" id="GUID-EF5392C6-C38A-4206-BD47-353AD7793557__GUID-A2F94393-2044-440D-8225-F4D9B962F90E">
                           <p class="notep1">注意：</p>
                           <p>创建基于函数的索引的替代方法是将虚拟列添加到目标表并索引虚拟列。有关更多信息，请参见<span class="q">“ <a href="managing-tables.html#GUID-2634BF31-512E-4276-99D4-848A535D273B" title="表是Oracle数据库中数据存储的基本单元。数据存储在行和列中。">关于表</a> ”</span> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-EF5392C6-C38A-4206-BD47-353AD7793557__GUID-276CC97D-F4F8-4CE3-A222-70F72DBBE392">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关基于函数的索引的更多信息，请<a href="../cncpt/indexes-and-index-organized-tables.html#CNCPT1161" target="_blank"><span class="italic">参见Oracle数据库概念</span></a></p>
                           </li>
                           <li>
                              <p><a href="../adfns/indexes.html#ADFNS00505" target="_blank"><span class="italic">“Oracle数据库开发指南”</span></a> ，了解有关在应用程序中使用基于函数的索引及其使用示例的信息</p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-BF813E96-C4BD-433C-B26A-70289D938D02" title="您可以创建几种不同类型的索引。您可以显式创建索引，也可以创建与约束关联的索引。">创建索引</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN14307"></a><div class="props_rev_3"><a id="GUID-8EE6F072-BADE-466B-98E6-30ABDFFCD8A9" name="GUID-8EE6F072-BADE-466B-98E6-30ABDFFCD8A9"></a><h4 id="ADMIN-GUID-8EE6F072-BADE-466B-98E6-30ABDFFCD8A9" class="sect4"><span class="enumeration_section">21.3.8</span>创建压缩索引</h4>
                  <p>随着数据库大小的增加，请考虑使用索引压缩来节省磁盘空间。</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-indexes.html#GUID-73FA7C6F-3A79-46E0-9562-39F71BBC2268">使用前缀压缩创建索引</a><br>使用前缀压缩（也称为密钥压缩）创建索引可消除重复出现的键列前缀值。前缀压缩对于在前导列上具有大量重复项的非唯一索引最有用。
                        </li>
                        <li class="ulchildlink"><a href="managing-indexes.html#GUID-83C610F5-C269-467C-9B7B-7713FCFBE3D1">使用高级索引压缩创建索引</a><br>高级索引压缩适用于所有支持的索引，包括那些不适合前缀压缩的索引。使用高级索引压缩创建索引可以减少所有唯一索引和非唯一索引的大小，并显着提高压缩率，同时仍然提供对索引的有效访问。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-BF813E96-C4BD-433C-B26A-70289D938D02" title="您可以创建几种不同类型的索引。您可以显式创建索引，也可以创建与约束关联的索引。">创建索引</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="ADMIN11731"></a><div class="props_rev_3"><a id="GUID-73FA7C6F-3A79-46E0-9562-39F71BBC2268" name="GUID-73FA7C6F-3A79-46E0-9562-39F71BBC2268"></a><h5 id="ADMIN-GUID-73FA7C6F-3A79-46E0-9562-39F71BBC2268" class="sect5"><span class="enumeration_section">21.3.8.1</span>使用前缀压缩创建索引</h5>
                     <div>
                        <p>使用前缀压缩（也称为密钥压缩）创建索引可消除重复出现的键列前缀值。前缀压缩对于在前导列上具有大量重复项的非唯一索引最有用。</p>
                        <div class="section">
                           <p>前缀压缩将索引键分为前缀和后缀条目。通过在索引块中的所有后缀条目之间共享前缀条目来实现压缩。这种共享可以节省大量空间，允许您为每个索引块存储更多密钥，同时提高性能。</p>
                           <p>在以下情况下，前缀压缩可能很有用：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>您有一个非唯一索引，其中附加了<code class="codeph">ROWID</code>以使密钥唯一。如果您在此处使用前缀压缩，则重复键将作为前缀条目存储在索引块上，而不包含<code class="codeph">ROWID</code> 。其余行将成为仅由<code class="codeph">ROWID</code>组成的后缀条目。</p>
                              </li>
                              <li>
                                 <p>您有一个独特的多列索引。</p>
                              </li>
                           </ul>
                           <p>您可以使用<code class="codeph">COMPRESS</code>子句启用前缀压缩。还可以指定前缀长度（作为键列的数量）以标识如何将键列分成前缀和后缀条目。例如，以下语句压缩索引叶块中键的重复出现：</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX hr.emp_ename ON emp（ename）TABLESPACE用户COMPRESS 1;</pre><p>您还可以在重建期间指定<code class="codeph">COMPRESS</code>子句。例如，在重建期间，您可以按如下方式禁用压缩：</p><pre class="oac_no_warn" dir="ltr">ALTER INDEX hr.emp_ename REBUILD NOCOMPRESS;</pre><p><code class="codeph">ALL_INDEXES</code>视图和<code class="codeph">ALL_PART_INDEXES</code>视图中的<code class="codeph">COMPRESSION</code>列显示索引是否已压缩，如果是压缩，则显示为索引启用的压缩类型。
                           </p>
                           <div class="infoboxnote" id="GUID-73FA7C6F-3A79-46E0-9562-39F71BBC2268__GUID-25BF0A76-567A-4838-86B5-2A82127BCBC5">
                              <p class="notep1">实时SQL：</p>
                              <p>在Oracle Live SQL上查看并运行Oracle Live SQL的相关示例<a href="https://livesql.oracle.com/apex/livesql/docs/admin/managing-indexes/create.html" target="_blank"><span class="italic">：创建索引</span></a> 。
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-73FA7C6F-3A79-46E0-9562-39F71BBC2268__GUID-60AC86B8-897A-4422-A987-1ABBD4CEF70A">
                           <p class="notep1">也可以看看：</p>
                           <p></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><a href="../sqlrf/CREATE-INDEX.html#SQLRF53999" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                              </li>
                              <li>
                                 <p>有关前缀压缩的更详细讨论，请参阅<a href="../cncpt/indexes-and-index-organized-tables.html#CNCPT1177" target="_blank"><span class="italic">Oracle数据库概念</span></a></p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-8EE6F072-BADE-466B-98E6-30ABDFFCD8A9" title="随着数据库大小的增加，请考虑使用索引压缩来节省磁盘空间。">创建压缩索引</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="ADMIN14308"></a><div class="props_rev_3"><a id="GUID-83C610F5-C269-467C-9B7B-7713FCFBE3D1" name="GUID-83C610F5-C269-467C-9B7B-7713FCFBE3D1"></a><h5 id="ADMIN-GUID-83C610F5-C269-467C-9B7B-7713FCFBE3D1" class="sect5"><span class="enumeration_section">21.3.8.2</span>使用高级索引压缩创建索引</h5>
                     <div>
                        <p>高级索引压缩适用于所有支持的索引，包括那些不适合前缀压缩的索引。使用高级索引压缩创建索引可以减少所有唯一索引和非唯一索引的大小，并显着提高压缩率，同时仍然提供对索引的有效访问。</p>
                        <div class="section">
                           <p>对于分区索引，您可以逐个分区地指定压缩类型。您还可以在索引分区上指定高级索引压缩，即使未压缩父索引也是如此。</p>
                           <p>高级索引压缩在块级别工作，为每个块提供最佳压缩。</p>
                           <p>您可以使用<code class="codeph">COMPRESS ADVANCED</code>子句启用高级索引压缩，并可以指定以下压缩级别：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">LOW</code> ：此级别在最小的CPU开销下提供较低的压缩率。在启用<code class="codeph">COMPRESS ADVANCED LOW</code>之前，数据库必须处于12.1.0或更高的兼容级别。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">HIGH</code> ：此级别（默认值）在某些CPU开销下提供更高的压缩率。在启用<code class="codeph">COMPRESS ADVANCED HIGH</code>之前，数据库必须处于12.2.0或更高的兼容级别。
                                 </p>
                                 <p>执行<code class="codeph">CREATE INDEX</code> DDL语句时，将使用行填充块。在高压缩级别，当块已满时，如果保存足够的空间以插入下一行，则使用高级索引压缩对其进行压缩。当块变满时，可以使用高级索引压缩来重新压缩块，以避免在保存足够空间以插入传入密钥时拆分块。
                                 </p>
                              </li>
                           </ul>
                           <p><code class="codeph">ALL_INDEXES</code>视图中的<code class="codeph">COMPRESSION</code>列显示索引是否已压缩，如果是压缩，则显示为索引启用的压缩类型。<code class="codeph">COMPRESSION</code>列的可能值为<code class="codeph">ADVANCED HIGH</code> ， <code class="codeph">ADVANCED LOW</code> ， <code class="codeph">DISABLED</code>或<code class="codeph">ENABLED</code> 。 <code class="codeph">ALL_IND_PARTITIONS</code>和<code class="codeph">ALL_IND_SUBPARTITIONS</code>视图中的<code class="codeph">COMPRESSION</code>列指示分区或子分区的索引压缩是<code class="codeph">ENABLED</code>还是<code class="codeph">DISABLED</code> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="infoboxnote" id="GUID-83C610F5-C269-467C-9B7B-7713FCFBE3D1__GUID-434D66E9-2F2D-4551-9442-41F6F9E2363A">
                              <p class="notep1">注意：</p>
                              <p></p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>位图索引或索引组织表不支持高级索引压缩。</p>
                                 </li>
                                 <li>
                                    <p>启用低级高级索引压缩时，无法在单个列唯一索引上指定高级索引压缩。启用高级别高级索引压缩时，此限制不适用。</p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <div class="example" id="GUID-83C610F5-C269-467C-9B7B-7713FCFBE3D1__GUID-828817E0-8624-4229-B318-7C6ECA387688">
                           <p class="titleinexample">示例21-1在创建索引期间启用低级高级索引压缩</p>
                           <p>例如，以下语句在创建<code class="codeph">hr.emp_mndp_ix</code>索引期间启用低级高级索引压缩：</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX hr.emp_mndp_ix ON hr.employees（manager_id，department_id）COMPRESS ADVANCED LOW;</pre></div>
                        <!-- class="example" -->
                        <div class="example" id="GUID-83C610F5-C269-467C-9B7B-7713FCFBE3D1__GUID-BD6AA686-6BA7-413D-B435-658C664C3EB6">
                           <p class="titleinexample">示例21-2在索引重建期间启用高级别高级索引压缩</p>
                           <p>您还可以在索引重建期间指定<code class="codeph">COMPRESS ADVANCED</code>子句。例如，在重建期间，您可以为<code class="codeph">hr.emp_manager_ix</code>索引启用高级高级索引压缩，如下所示：</p><pre class="oac_no_warn" dir="ltr">ALTER INDEX hr.emp_manager_ix REBUILD COMPRESS ADVANCED HIGH;</pre></div>
                        <!-- class="example" -->
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-8EE6F072-BADE-466B-98E6-30ABDFFCD8A9" title="随着数据库大小的增加，请考虑使用索引压缩来节省磁盘空间。">创建压缩索引</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="ADMIN13282"></a><div class="props_rev_3"><a id="GUID-FA0C46EC-DA22-4484-AF52-58BC0CBEEC81" name="GUID-FA0C46EC-DA22-4484-AF52-58BC0CBEEC81"></a><h4 id="ADMIN-GUID-FA0C46EC-DA22-4484-AF52-58BC0CBEEC81" class="sect4"><span class="enumeration_section">21.3.9</span>创建不可用的索引</h4>
                  <div>
                     <p>在<code class="codeph">UNUSABLE</code>状态下创建索引时，优化程序将忽略该索引，并且不由DML维护。必须先重建，删除和重新创建不可用的索引，然后才能使用它。
                     </p>
                     <div class="section">
                        <p>如果索引已分区，则所有索引分区都标记为<code class="codeph">UNUSABLE</code> 。</p>
                        <p>创建不可用索引时，数据库不会创建索引段。</p>
                        <p>以下过程说明了如何创建不可用的索引并查询数据库以获取有关索引的详细信息。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>要创建不可用的索引：</p>
                        <ol>
                           <li>
                              <p>如有必要，请创建要编制索引的表。</p>
                              <p>例如，创建一个名为<code class="codeph">hr.employees_part</code>的散列分区表，如下所示：</p><pre class="oac_no_warn" dir="ltr">sh @ PROD&gt; CONNECT hr输入密码：**已连接。hr @ PROD&gt; CREATE TABLE employees_part 2 PARTITION BY HASH（employee_id）PARTITIONS 2 3 AS SELECT * FROM employees;表创建。hr @ PROD&gt; SELECT COUNT（*）FROM employees_part; COUNT（*）---------- 107</pre></li>
                           <li>
                              <p>使用关键字<code class="codeph">UNUSABLE</code>创建索引。</p>
                              <p>以下示例在<code class="codeph">employees_part</code>上创建本地分区索引，命名索引分区<code class="codeph">p1_i_emp_ename</code>和<code class="codeph">p2_i_emp_ename</code> ，并使<code class="codeph">p1_i_emp_ename</code>不可用：</p><pre class="oac_no_warn" dir="ltr">hr @ PROD&gt; CREATE INDEX i_emp_ename ON employees_part（employee_id）2 LOCAL（PARTITION p1_i_emp_ename UNUSABLE，PARTITION p2_i_emp_ename）;索引已创建。
</pre></li>
                           <li>
                              <p>（可选）通过查询数据字典验证索引是否不可用。</p>
                              <p>以下示例查询索引<code class="codeph">i_emp_ename</code>及其两个分区的状态，显示只有分区<code class="codeph">p2_i_emp_ename</code>不可用：</p><pre class="oac_no_warn" dir="ltr">hr @ PROD&gt; SELECT INDEX_NAME AS“INDEX OR PARTITION NAME”，状态2来自USER_INDEXES 3 WHERE INDEX_NAME ='I_EMP_ENAME'4 UNION ALL 5选择PARTITION_NAME作为“INDEX OR PARTITION NAME”，状态6来自USER_IND_PARTITIONS 7 PARTITION_NAME LIKE'％I_EMP_ENAME ％'; INDEX OR PARTITION NAME STATUS ------------------------------ -------- I_EMP_ENAME N / A P1_I_EMP_ENAME不可用P2_I_EMP_ENAME USABLE</pre></li>
                           <li>
                              <p>（可选）查询数据字典以确定是否存在分区存储。</p>
                              <p>例如，以下查询显示只有索引分区<code class="codeph">p2_i_emp_ename</code>占用一个段。由于您将<code class="codeph">p1_i_emp_ename</code>创建为不可用，因此数据库未为其分配段。
                              </p><pre class="oac_no_warn" dir="ltr">hr @ PROD&gt; COL PARTITION_NAME格式a14小时@ PROD&gt; COL SEG_CREATED格式a11小时@ PROD&gt; SELECT p。PARTITION_NAME，p。状态为“PART_STATUS”，2 p。SEGMENT_CREATED为“SEG_CREATED”，3 FROM USER_IND_PARTITIONS p，USER_SEGMENTS s 4 WHERE s。SEGMENT_NAME ='I_EMP_ENAME'; PARTITION_NAME PART_STA SEG_CREATED -------------- -------- ----------- P2_I_EMP_ENAME USABLE YES P1_I_EMP_ENAME UNUSABLE NO</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-FA0C46EC-DA22-4484-AF52-58BC0CBEEC81__GUID-D513D55A-EB4A-4677-ACE6-9D81760F3B38">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="managing-indexes.html#GUID-3A66938F-73C6-4173-844E-3938A0DBBB54" title="当您希望提高批量加载的性能时，请使用不可用或不可见的索引，在删除索引之前测试删除索引的效果，或者暂停优化程序使用索引。">了解何时使用不可用或不可见的索引</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="managing-indexes.html#GUID-A7A6C478-78CC-4A49-B2DB-A7F46BD57692" title="如果使索引不可用，优化程序将忽略该索引，并且不由DML维护。当您使分区索引的一个分区不可用时，索引的其他分区仍然有效。">使索引无法使用</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关创建不可用索引（包括限制）的详细信息，请参阅<a href="../sqlrf/CREATE-INDEX.html#SQLRF54038" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a> 。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-BF813E96-C4BD-433C-B26A-70289D938D02" title="您可以创建几种不同类型的索引。您可以显式创建索引，也可以创建与约束关联的索引。">创建索引</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12317"></a><div class="props_rev_3"><a id="GUID-1FEFC754-C26F-4EC7-A1B3-318850A089AA" name="GUID-1FEFC754-C26F-4EC7-A1B3-318850A089AA"></a><h4 id="ADMIN-GUID-1FEFC754-C26F-4EC7-A1B3-318850A089AA" class="sect4"><span class="enumeration_section">21.3.10</span>创建隐形索引</h4>
                  <div>
                     <p>不可见索引是优化程序忽略的索引，除非您在会话或系统级别将<code class="codeph">OPTIMIZER_USE_INVISIBLE_INDEXES</code>初始化参数显式设置为<code class="codeph">TRUE</code> 。
                     </p>
                     <div class="section">
                        <p>要创建不可见的索引：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>将<code class="codeph">CREATE INDEX</code>语句与<code class="codeph">INVISIBLE</code>关键字一起使用。
                              </p>
                              <p>以下语句为<code class="codeph">emp</code>表的<code class="codeph">ename</code>列创建一个名为<code class="codeph">emp_ename</code>的不可见索引：</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX emp_ename ON emp（ename）TABLESPACE用户存储（初始20K，下一个20k）不<span class="bold">可见</span> ;</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-1FEFC754-C26F-4EC7-A1B3-318850A089AA__GUID-32992CD6-DD3B-4E02-A7B2-4ED742566DF6">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="managing-indexes.html#GUID-3A66938F-73C6-4173-844E-3938A0DBBB54" title="当您希望提高批量加载的性能时，请使用不可用或不可见的索引，在删除索引之前测试删除索引的效果，或者暂停优化程序使用索引。">了解何时使用不可用或不可见的索引</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="managing-indexes.html#GUID-FD6F0D3D-022E-433D-9E11-B3A5D65A84C2" title="使索引不可见是使其无法使用或丢弃的替代方法。">使索引变得无形或可见</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关创建不可见索引的更多信息，请<a href="../sqlrf/CREATE-INDEX.html#SQLRF01209" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-BF813E96-C4BD-433C-B26A-70289D938D02" title="您可以创建几种不同类型的索引。您可以显式创建索引，也可以创建与约束关联的索引。">创建索引</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13846"></a><div class="props_rev_3"><a id="GUID-05F3C3B0-DB80-489C-B749-01653FDE8E09" name="GUID-05F3C3B0-DB80-489C-B749-01653FDE8E09"></a><h4 id="ADMIN-GUID-05F3C3B0-DB80-489C-B749-01653FDE8E09" class="sect4"><span class="enumeration_section">21.3.11</span>在同一组列上创建多个索引</h4>
                  <div>
                     <p>当索引以某种方式不同时，您可以在同一列列上创建多个索引。</p>
                     <div class="section">
                        <p>要在同一组列上创建多个索引，必须满足以下先决条件：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="managing-indexes.html#GUID-BF813E96-C4BD-433C-B26A-70289D938D02" title="您可以创建几种不同类型的索引。您可以显式创建索引，也可以创建与约束关联的索引。">创建索引</a> ”中</span>所需权限的先决条件。
                              </p>
                           </li>
                           <li>
                              <p>在任何时间点，只能在同一组列上显示一个索引。</p>
                              <p>如果要创建可见索引，则该列列上的任何现有索引都必须是不可见的。</p>
                              <p>或者，您可以在列集上创建不可见索引。</p>
                           </li>
                        </ul>
                        <p>例如，以下步骤在<code class="codeph">oe.orders</code>表中的同一组列上创建B树索引和位图索引：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand" id="GUID-05F3C3B0-DB80-489C-B749-01653FDE8E09__CHDFGHCJ"><span>在<code class="codeph">oe.orders</code>表的<code class="codeph">customer_id</code>和<code class="codeph">sales_rep_id</code>列上创建B树索引：</span><div><pre class="oac_no_warn" dir="ltr">CREATE INDEX oe.ord_customer_ix1 ON oe.orders（customer_id，sales_rep_id）;</pre><p>默认情况下， <code class="codeph">oe.ord_customer_ix1</code>索引可见。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>更改步骤1中创建的索引以使其不可见：</span><div><pre class="oac_no_warn" dir="ltr">ALTER INDEX oe.ord_customer_ix1 INVISIBLE;</pre><p>或者，您可以在步骤1中添加<code class="codeph">INVISIBLE</code>子句以避免此步骤。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在<code class="codeph">oe.orders</code>表的<code class="codeph">customer_id</code>和<code class="codeph">sales_rep_id</code>列上创建位图索引：</span><div><pre class="oac_no_warn" dir="ltr">CREATE BITMAP INDEX oe.ord_customer_ix2 ON oe.orders（customer_id，sales_rep_id）;</pre><p>默认情况下， <code class="codeph">oe.ord_customer_ix2</code>索引可见。
                              </p>
                              <p>如果在步骤1中创建的<code class="codeph">oe.ord_customer_ix1</code>索引可见，则此步骤中的<code class="codeph">CREATE</code> <code class="codeph">BITMAP</code> <code class="codeph">INDEX</code>语句将返回错误。
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-05F3C3B0-DB80-489C-B749-01653FDE8E09__GUID-17B0AC77-0BB2-44F7-AC30-76D0F3DE0431">
                        <p class="notep1">也可以看看：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="managing-indexes.html#GUID-B4B30CF4-2B95-44D6-8596-EC2A378251EF" title="当索引以某种方式不同时，您可以在同一列列上创建多个索引。例如，您可以在同一组列上创建B树索引和位图索引。">了解何时在同一组列上创建多个索引</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="managing-indexes.html#GUID-3A66938F-73C6-4173-844E-3938A0DBBB54" title="当您希望提高批量加载的性能时，请使用不可用或不可见的索引，在删除索引之前测试删除索引的效果，或者暂停优化程序使用索引。">了解何时使用不可用或不可见的索引</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="managing-indexes.html#GUID-1FEFC754-C26F-4EC7-A1B3-318850A089AA" title="不可见索引是优化程序忽略的索引，除非您在会话或系统级别将OPTIMIZER_USE_INVISIBLE_INDEXES初始化参数显式设置为TRUE。">创建一个看不见的指数</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-BF813E96-C4BD-433C-B26A-70289D938D02" title="您可以创建几种不同类型的索引。您可以显式创建索引，也可以创建与约束关联的索引。">创建索引</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-E637BC13-A2CA-454D-B680-07B95F7C4CE4" name="GUID-E637BC13-A2CA-454D-B680-07B95F7C4CE4"></a><h3 id="ADMIN-GUID-E637BC13-A2CA-454D-B680-07B95F7C4CE4" class="sect3"><span class="enumeration_section">21.4</span>改变索引</h3>
               <p>您可以通过完成诸如更改其存储特性，重建存储特性，使其无法使用或使其可见或不可见等任务来更改索引。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-97B5C03C-3C3B-4A64-9E71-7838E6EC7DB3">关于改变索引</a><br>要更改索引，架构必须包含索引，或者必须具有<code class="codeph">ALTER ANY INDEX</code>系统特权。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-ACDAF858-C988-4F6D-99DE-4808F904B29E">改变指数的存储特征</a><br>使用<code class="codeph">ALTER INDEX</code>语句更改任何索引的存储参数，包括由数据库创建的那些参数，以强制执行主要和唯一密钥完整性约束。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-BD4B0F57-6E2A-4A73-A0A7-99AB1F69F142">重建现有指数</a><br>重建索引时，使用现有索引作为数据源。以这种方式创建索引使您可以更改存储特征或移动到新的表空间。基于现有数据源重建索引会删除块内碎片。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-A7A6C478-78CC-4A49-B2DB-A7F46BD57692">使索引无法使用</a><br>如果使索引不可用，优化程序将忽略该索引，并且不由DML维护。当您使分区索引的一个分区不可用时，索引的其他分区仍然有效。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-FD6F0D3D-022E-433D-9E11-B3A5D65A84C2">使索引不可见或可见</a><br>使索引不可见是使其无法使用或丢弃的替代方法。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-952AF0B6-CB84-45EA-9389-A47107344F08">重命名索引</a><br>您可以使用带有<code class="codeph">RENAME</code>子句的<code class="codeph">ALTER INDEX</code>语句重命名索引。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-8E5379E6-F96D-464D-B601-A279679A49E9">监控索引用法</a><br>Oracle数据库提供了一种监视索引的方法，以确定它们是否被使用。如果没有使用索引，则可以删除它，从而消除不必要的语句开销。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-E4149397-FF37-4367-A12F-675433715904">管理索引</a></p>
                     </div>
                  </div>
               </div>
               <a id="ADMIN11732"></a><div class="props_rev_3"><a id="GUID-97B5C03C-3C3B-4A64-9E71-7838E6EC7DB3" name="GUID-97B5C03C-3C3B-4A64-9E71-7838E6EC7DB3"></a><h4 id="ADMIN-GUID-97B5C03C-3C3B-4A64-9E71-7838E6EC7DB3" class="sect4"><span class="enumeration_section">21.4.1</span>关于改变索引</h4>
                  <div>
                     <p>要更改索引，架构必须包含索引，或者必须具有<code class="codeph">ALTER ANY INDEX</code>系统特权。
                     </p>
                     <p>使用<code class="codeph">ALTER INDEX</code>语句，您可以：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>重建或合并现有索引</p>
                        </li>
                        <li>
                           <p>释放未使用的空间或分配新范围</p>
                        </li>
                        <li>
                           <p>指定并行执行（或不指定）并改变并行度</p>
                        </li>
                        <li>
                           <p>更改存储参数或物理属性</p>
                        </li>
                        <li>
                           <p>指定<code class="codeph">LOGGING</code>或<code class="codeph">NOLOGGING</code></p>
                        </li>
                        <li>
                           <p>启用或禁用前缀压缩</p>
                        </li>
                        <li>
                           <p>启用或禁用高级压缩</p>
                        </li>
                        <li>
                           <p>标记索引不可用</p>
                        </li>
                        <li>
                           <p>使索引不可见</p>
                        </li>
                        <li>
                           <p>重命名索引</p>
                        </li>
                        <li>
                           <p>启动或停止监视索引使用情况</p>
                        </li>
                     </ul>
                     <p>您无法更改索引列结构。</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-97B5C03C-3C3B-4A64-9E71-7838E6EC7DB3__GUID-2AFF7521-F69B-4BC9-A5FC-BC38FF605478">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>有关<code class="codeph">ALTER</code> <code class="codeph">INDEX</code>语句的详细信息，请<a href="../sqlrf/ALTER-INDEX.html#SQLRF00805" target="_blank"><span class="italic">参见Oracle数据库SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-E637BC13-A2CA-454D-B680-07B95F7C4CE4" title="您可以通过完成诸如更改其存储特性，重建存储特性，使其无法使用或使其可见或不可见等任务来更改索引。">更改索引</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11733"></a><div class="props_rev_3"><a id="GUID-ACDAF858-C988-4F6D-99DE-4808F904B29E" name="GUID-ACDAF858-C988-4F6D-99DE-4808F904B29E"></a><h4 id="ADMIN-GUID-ACDAF858-C988-4F6D-99DE-4808F904B29E" class="sect4"><span class="enumeration_section">21.4.2</span>改变索引的存储特征</h4>
                  <div>
                     <p>使用<code class="codeph">ALTER INDEX</code>语句更改任何索引的存储参数，包括由数据库创建的那些参数，以强制执行主要和唯一密钥完整性约束。
                     </p>
                     <div class="section">
                        <p>例如，以下语句更改<code class="codeph">emp_ename</code>索引：</p><pre class="oac_no_warn" dir="ltr">ALTER INDEX emp_ename STORAGE（下一页40）;</pre><p><code class="codeph">INITIAL</code>和<code class="codeph">MINEXTENTS</code>参数不能改变。其他存储参数的所有新设置仅影响随后为索引分配的范围。
                        </p>
                        <p>对于实现完整性约束的索引，可以通过发出包含<code class="codeph">ENABLE</code>子句的<code class="codeph">USING INDEX</code>子句的<code class="codeph">ALTER TABLE</code>语句来调整存储参数。例如，以下语句更改在表<code class="codeph">emp</code>上创建的索引的存储选项以强制实施主键约束：</p><pre class="oac_no_warn" dir="ltr">ALTER TABLE使用INDEX启用主键;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-ACDAF858-C988-4F6D-99DE-4808F904B29E__GUID-2BF4E1C8-6D25-4D22-8732-9979C7EE4190">
                        <p class="notep1">也可以看看：</p>
                        <p>有关使用<code class="codeph">ALTER INDEX</code>语句的语法和限制的<a href="../sqlrf/ALTER-INDEX.html#SQLRF00805" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-E637BC13-A2CA-454D-B680-07B95F7C4CE4" title="您可以通过完成诸如更改其存储特性，重建存储特性，使其无法使用或使其可见或不可见等任务来更改索引。">更改索引</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11734"></a><div class="props_rev_3"><a id="GUID-BD4B0F57-6E2A-4A73-A0A7-99AB1F69F142" name="GUID-BD4B0F57-6E2A-4A73-A0A7-99AB1F69F142"></a><h4 id="ADMIN-GUID-BD4B0F57-6E2A-4A73-A0A7-99AB1F69F142" class="sect4"><span class="enumeration_section">21.4.3</span>重建现有索引</h4>
                  <div>
                     <p>重建索引时，使用现有索引作为数据源。以这种方式创建索引使您可以更改存储特征或移动到新的表空间。基于现有数据源重建索引会删除块内碎片。</p>
                     <div class="section">
                        <p>与删除索引和使用<code class="codeph">CREATE INDEX</code>语句相比，重建现有索引可提供更好的性能。在重建现有索引之前，将与重建相关的成本和收益与合并索引相关联的成本和收益进行比较，如<span class="q">“ <a href="managing-indexes.html#GUID-D459FCD6-D729-4F3A-96AD-E147FC37956A" title="不正确的尺寸或增加的增长会产生索引碎片。要消除或减少碎片，您可以重建或合并索引。但在执行任一任务之前，请权衡每个选项的成本和收益，并选择最适合您情况的选项。">考虑合并或重建索引的成本和收益</a> ”中所述</span> 。
                        </p>
                        <p>以下语句重建现有索引<code class="codeph">emp_name</code> ：</p><pre class="oac_no_warn" dir="ltr">ALTER INDEX emp_name REBUILD;</pre><p><code class="codeph">REBUILD</code>子句必须紧跟索引名称，并在任何其他选项之前。它不能与<code class="codeph">DEALLOCATE UNUSED</code>子句一起<code class="codeph">DEALLOCATE UNUSED</code> 。
                        </p>
                        <p>您可以选择在线重建索引。通过在线重建，您可以在重建的同时更新基表。以下语句在线重建<code class="codeph">emp_name</code>索引：</p><pre class="oac_no_warn" dir="ltr">ALTER INDEX emp_name REBUILD ONLINE;</pre><p>要在线重建不同用户模式中的索引，需要<code class="codeph">ALTER ANY INDEX</code>系统特权。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnote" id="GUID-BD4B0F57-6E2A-4A73-A0A7-99AB1F69F142__GUID-A4B94048-CD73-45EE-93E5-DDE5E34550D5">
                           <p class="notep1">注意：</p>
                           <p>与其他重建索引的方法相比，联机索引重建对可以处理的最大密钥长度有更严格的限制。如果在线重建时发生ORA-1450（超出最大密钥长度）错误，请尝试重建脱机，合并或删除并重新创建索引。</p>
                        </div>
                        <p><a id="d222637e3860" class="indexterm-anchor"></a>如果没有重建索引所需的空间，则可以选择合并索引。合并索引是在线操作。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-BD4B0F57-6E2A-4A73-A0A7-99AB1F69F142__GUID-4185BF0E-627D-4E2E-9CF6-322BACBE62E8">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="managing-indexes.html#GUID-81CECA90-E664-4A53-AEB0-3AA4AB672839" title="您可以在线创建和重建索引。因此，您可以在构建或重建该表上的索引的同时更新基表。">在线创建索引</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="managing-indexes.html#GUID-19B6C345-FDCA-4D7F-A93A-341555CFFC1A" title="如果频繁插入，更新和删除索引中的键值，则索引可能会随着时间的推移而失去其获得的空间效率。">监控指数的空间使用</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-E637BC13-A2CA-454D-B680-07B95F7C4CE4" title="您可以通过完成诸如更改其存储特性，重建存储特性，使其无法使用或使其可见或不可见等任务来更改索引。">更改索引</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN13283"></a><div class="props_rev_3"><a id="GUID-A7A6C478-78CC-4A49-B2DB-A7F46BD57692" name="GUID-A7A6C478-78CC-4A49-B2DB-A7F46BD57692"></a><h4 id="ADMIN-GUID-A7A6C478-78CC-4A49-B2DB-A7F46BD57692" class="sect4"><span class="enumeration_section">21.4.4</span>使索引无法使用</h4>
                  <div>
                     <p>如果使索引不可用，优化程序将忽略该索引，并且不由DML维护。当您使分区索引的一个分区不可用时，索引的其他分区仍然有效。</p>
                     <div class="section">
                        <p>在使用之前，必须重建或删除并重新创建不可用的索引或索引分区。</p>
                        <p>以下过程说明了如何使索引和索引分区不可用，以及如何查询对象状态。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A7A6C478-78CC-4A49-B2DB-A7F46BD57692__GUID-72B053C6-1DB7-4125-9162-A231EBCA49D5">要使索引不可用：</p>
                        <ol>
                           <li>
                              <p>查询数据字典以确定现有索引或索引分区是可用还是不可用。</p>
                              <p>例如，发出以下查询（截断输出以节省空间）：</p><pre class="oac_no_warn" dir="ltr">hr @ PROD&gt; SELECT INDEX_NAME AS“INDEX OR PART NAME”，STATUS，SEGMENT_CREATED 2来自USER_INDEXES 3 UNION ALL 4 SELECT PARTITION_NAME AS“INDEX OR PART NAME”，STATUS，SEGMENT_CREATED 5来自USER_IND_PARTITIONS;索引或部分名称状态赛格------------------------------ -------- --- I_EMP_ENAME N / AN / A JHIST_EMP_ID_ST_DATE_PK VALID YES JHIST_JOB_IX VALID YES JHIST_EMPLOYEE_IX VALID YES JHIST_DEPARTMENT_IX VALID YES EMP_EMAIL_UK VALID NO。。。COUNTRY_C_ID_PK VALID YES REG_ID_PK VALID YES P2_I_EMP_ENAME USABLE YES P1_I_EMP_ENAME UNUSABLE NO 22行被选中。
</pre><p>前面的输出显示只有索引分区<code class="codeph">p1_i_emp_ename</code>不可用。
                              </p>
                           </li>
                           <li>
                              <p>通过指定<code class="codeph">UNUSABLE</code>关键字使索引或索引分区不可用。
                              </p>
                              <p>以下示例使索引<code class="codeph">emp_email_uk</code>无法使用：</p><pre class="oac_no_warn" dir="ltr">hr @ PROD&gt; ALTER INDEX emp_email_uk UNUSABLE;指数改变了。
</pre><p>以下示例使索引分区<code class="codeph">p2_i_emp_ename</code>不可用：</p><pre class="oac_no_warn" dir="ltr">hr @ PROD&gt; ALTER INDEX i_emp_ename MODIFY PARTITION p2_i_emp_ename UNUSABLE;指数改变了。
</pre></li>
                           <li>
                              <p><a id="d222637e3972" class="indexterm-anchor"></a> （可选）查询数据字典以验证状态更改。
                              </p>
                              <p>例如，发出以下查询（截断输出以节省空间）：</p><pre class="oac_no_warn" dir="ltr">hr @ PROD&gt; SELECT INDEX_NAME AS“INDEX OR PARTITION NAME”，STATUS，2 SEGMENT_CREATED 3来自USER_INDEXES 4 UNION ALL 5 SELECT PARTITION_NAME AS“INDEX OR PARTITION NAME”，STATUS，6 SEGMENT_CREATED 7来自USER_IND_PARTITIONS; INDEX OR PARTITION NAME STATUS SEG ------------------------------ -------- --- I_EMP_ENAME N / AN / A JHIST_EMP_ID_ST_DATE_PK VALID YES JHIST_JOB_IX VALID YES JHIST_EMPLOYEE_IX VALID YES JHIST_DEPARTMENT_IX VALID YES EMP_EMAIL_UK <span class="bold">UNUSABLE</span> NO。。。COUNTRY_C_ID_PK VALID YES REG_ID_PK VALID YES P2_I_EMP_ENAME <span class="bold">UNUSABLE</span> NO P1_I_EMP_ENAME UNUSABLE NO 22行被选中。
</pre><p><code class="codeph">i_emp_ename</code>和<code class="codeph">emp_email_uk</code>段消耗的空间查询显示这些段不再存在：</p><pre class="oac_no_warn" dir="ltr">hr @ PROD&gt; SELECT SEGMENT_NAME，BYTES 2 FROM USER_SEGMENTS 3 WHERE SEGMENT_NAME IN（'I_EMP_ENAME'，'EMP_EMAIL_UK'）;没有选择任何行</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-A7A6C478-78CC-4A49-B2DB-A7F46BD57692__GUID-8D46361F-4E6D-45D6-A9DC-AD33EFCE0661">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="managing-indexes.html#GUID-3A66938F-73C6-4173-844E-3938A0DBBB54" title="当您希望提高批量加载的性能时，请使用不可用或不可见的索引，在删除索引之前测试删除索引的效果，或者暂停优化程序使用索引。">了解何时使用不可用或不可见的索引</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="managing-indexes.html#GUID-FA0C46EC-DA22-4484-AF52-58BC0CBEEC81" title="在UNUSABLE状态下创建索引时，优化程序将忽略该索引，并且不由DML维护。必须先重建，删除和重新创建不可用的索引，然后才能使用它。">创建一个不可用的索引</a> ”</span></p>
                           </li>
                           <li>
                              <p>有关<code class="codeph">UNUSABLE</code>关键字的更多信息，包括限制，请参阅<a href="../sqlrf/CREATE-INDEX.html#SQLRF54038" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-E637BC13-A2CA-454D-B680-07B95F7C4CE4" title="您可以通过完成诸如更改其存储特性，重建存储特性，使其无法使用或使其可见或不可见等任务来更改索引。">更改索引</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12318"></a><div class="props_rev_3"><a id="GUID-FD6F0D3D-022E-433D-9E11-B3A5D65A84C2" name="GUID-FD6F0D3D-022E-433D-9E11-B3A5D65A84C2"></a><h4 id="ADMIN-GUID-FD6F0D3D-022E-433D-9E11-B3A5D65A84C2" class="sect4"><span class="enumeration_section">21.4.5</span>使索引不可见或可见</h4>
                  <div>
                     <p>使索引不可见是使其无法使用或丢弃的替代方法。</p>
                     <div class="section">
                        <p>除非在会话或系统级别将<code class="codeph">OPTIMIZER_USE_INVISIBLE_INDEXES</code>初始化参数显式设置为<code class="codeph">TRUE</code> ，否则<code class="codeph">OPTIMIZER_USE_INVISIBLE_INDEXES</code>程序将忽略不可见索引。您不能使单个索引分区不可见。试图这样做会产生错误。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FD6F0D3D-022E-433D-9E11-B3A5D65A84C2__GUID-4C68427A-8882-4942-BD5A-4AE31590C707">使索引不可见：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>提交以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">ALTER INDEX <span class="italic">指数</span> INVISIBLE;</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FD6F0D3D-022E-433D-9E11-B3A5D65A84C2__GUID-1E69E95B-8E67-4B9E-AB81-50BE5018F054">要使不可见索引再次可见：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>提交以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">ALTER INDEX <span class="italic">指数</span>可见;</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnote" id="GUID-FD6F0D3D-022E-433D-9E11-B3A5D65A84C2__GUID-8897A154-288A-4113-B9AE-5E779F16B132">
                           <p class="notep1">注意：</p>
                           <p>如果同一组列上有多个索引，则在任何时间点只能看到其中一个索引。如果尝试使一组列上的索引可见，并且同一列列上的另一个索引可见，则会返回错误。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-FD6F0D3D-022E-433D-9E11-B3A5D65A84C2__GUID-290F4D6B-27B8-4CCE-A333-5788751363E0">确定索引是可见还是不可见：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>查询字典视图<code class="codeph">USER_INDEXES</code> ， <code class="codeph">ALL_INDEXES</code>或<code class="codeph">DBA_INDEXES</code> 。</p>
                              <p>例如，要确定索引<code class="codeph">ind1</code>是否不可见，请发出以下查询：</p><pre class="oac_no_warn" dir="ltr">SELECT INDEX_NAME，来自USER_INDEXES的可见性，其中INDEX_NAME ='IND1'; INDEX_NAME VISIBILITY ---------- ---------- IND1 VISIBLE</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-FD6F0D3D-022E-433D-9E11-B3A5D65A84C2__GUID-B7F72E55-C9B2-4F6D-852B-B90B714C6978">
                        <p class="notep1">也可以看看：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="q">“ <a href="managing-indexes.html#GUID-3A66938F-73C6-4173-844E-3938A0DBBB54" title="当您希望提高批量加载的性能时，请使用不可用或不可见的索引，在删除索引之前测试删除索引的效果，或者暂停优化程序使用索引。">了解何时使用不可用或不可见的索引</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="managing-indexes.html#GUID-1FEFC754-C26F-4EC7-A1B3-318850A089AA" title="不可见索引是优化程序忽略的索引，除非您在会话或系统级别将OPTIMIZER_USE_INVISIBLE_INDEXES初始化参数显式设置为TRUE。">创建一个看不见的指数</a> ”</span></p>
                           </li>
                           <li>
                              <p><span class="q">“ <a href="managing-indexes.html#GUID-05F3C3B0-DB80-489C-B749-01653FDE8E09" title="当索引以某种方式不同时，您可以在同一列列上创建多个索引。">在同一组列上创建多个索引</a> ”</span></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-E637BC13-A2CA-454D-B680-07B95F7C4CE4" title="您可以通过完成诸如更改其存储特性，重建存储特性，使其无法使用或使其可见或不可见等任务来更改索引。">更改索引</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN12647"></a><div class="props_rev_3"><a id="GUID-952AF0B6-CB84-45EA-9389-A47107344F08" name="GUID-952AF0B6-CB84-45EA-9389-A47107344F08"></a><h4 id="ADMIN-GUID-952AF0B6-CB84-45EA-9389-A47107344F08" class="sect4"><span class="enumeration_section">21.4.6</span>重命名索引</h4>
                  <div>
                     <p>您可以使用带有<code class="codeph">RENAME</code>子句的<code class="codeph">ALTER INDEX</code>语句重命名索引。
                     </p>
                     <div class="section">
                        <p>要重命名索引，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">ALTER INDEX <span class="italic">index_name</span> RENAME TO <span class="italic">new_name</span> ;</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-E637BC13-A2CA-454D-B680-07B95F7C4CE4" title="您可以通过完成诸如更改其存储特性，重建存储特性，使其无法使用或使其可见或不可见等任务来更改索引。">更改索引</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="ADMIN11735"></a><div class="props_rev_3"><a id="GUID-8E5379E6-F96D-464D-B601-A279679A49E9" name="GUID-8E5379E6-F96D-464D-B601-A279679A49E9"></a><h4 id="ADMIN-GUID-8E5379E6-F96D-464D-B601-A279679A49E9" class="sect4"><span class="enumeration_section">21.4.7</span>监控索引使用情况</h4>
                  <div>
                     <p>Oracle数据库提供了一种监视索引的方法，以确定它们是否被使用。如果没有使用索引，则可以删除它，从而消除不必要的语句开销。</p>
                     <div class="section">
                        <p>要开始监视索引的使用情况，请发出以下语句：</p><pre class="oac_no_warn" dir="ltr">ALTER INDEX <span class="italic">指数</span>监测用途;</pre><p>稍后，发出以下语句以停止监视：</p><pre class="oac_no_warn" dir="ltr">ALTER INDEX <span class="italic">指数</span> NOMONITORING USAGE;</pre><p>可以查询<code class="codeph">USER_OBJECT_USAGE</code>视图以查看正在监视的索引，以查看是否已使用该索引。该视图包含一个<code class="codeph">USED</code>列，其值为<code class="codeph">YES</code>或<code class="codeph">NO</code> ，具体取决于索引是否在被监视的时间段内使用。视图还包含监视周期的开始和停止时间，以及<code class="codeph">MONITORING</code>列（ <code class="codeph">YES</code> / <code class="codeph">NO</code> ），以指示使用情况监视当前是否处于活动状态。
                        </p>
                        <p>每次指定<code class="codeph">MONITORING USAGE</code> ，都会为指定的索引重置<code class="codeph">USER_OBJECT_USAGE</code>视图。清除或重置先前的使用信息，并记录新的开始时间。指定<code class="codeph">NOMONITORING USAGE</code> ，不执行进一步监视，并记录监视周期的结束时间。直到下一个<code class="codeph">ALTER INDEX...发出MONITORING USAGE</code>语句，视图信息保持不变。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-E637BC13-A2CA-454D-B680-07B95F7C4CE4" title="您可以通过完成诸如更改其存储特性，重建存储特性，使其无法使用或使其可见或不可见等任务来更改索引。">更改索引</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN11736"></a><div class="props_rev_3"><a id="GUID-19B6C345-FDCA-4D7F-A93A-341555CFFC1A" name="GUID-19B6C345-FDCA-4D7F-A93A-341555CFFC1A"></a><h3 id="ADMIN-GUID-19B6C345-FDCA-4D7F-A93A-341555CFFC1A" class="sect3"><span class="enumeration_section">21.5</span>监控指数的空间使用</h3>
               <div>
                  <p>如果频繁插入，更新和删除索引中的键值，则索引可能会随着时间的推移而失去其获得的空间效率。</p>
                  <div class="section">
                     <p>首先使用<code class="codeph">ANALYZE INDEX...分析索引结构，定期监视空间使用的索引效率<code class="codeph">ANALYZE INDEX...VALIDATE STRUCTURE</code>语句，然后查询<code class="codeph">INDEX_STATS</code>视图：</p><pre class="oac_no_warn" dir="ltr">SELECT IND_USED FROM INDEX_STATS WHERE NAME =' <span class="italic">index</span> ';</pre><p>索引空间使用百分比根据索引键的插入，更新或删除频率而有所不同。通过多次执行以下操作序列，为索引创建平均空间使用效率的历史记录：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>分析统计数据</p>
                        </li>
                        <li>
                           <p>验证索引</p>
                        </li>
                        <li>
                           <p>检查<code class="codeph">PCT_USED</code></p>
                        </li>
                        <li>
                           <p>删除和重建（或合并）索引</p>
                        </li>
                     </ul>
                     <p>当您发现索引空间使用率低于其平均值时，您可以通过删除索引并重建索引或合并它来压缩索引空间。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-19B6C345-FDCA-4D7F-A93A-341555CFFC1A__GUID-3FE6CD83-23C9-47B9-851E-41B3D8C395B0">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="managing-schema-objects.html#GUID-DB5A9A4E-054B-4ECF-8E97-C93DC9783675" title="您可以收集有关架构对象的信息并分析该信息。">关于分析表，索引和群集</a> ”</span></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-E4149397-FF37-4367-A12F-675433715904">管理索引</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADMIN11737"></a><div class="props_rev_3"><a id="GUID-670ACFFA-9002-4511-9345-C33C49811577" name="GUID-670ACFFA-9002-4511-9345-C33C49811577"></a><h3 id="ADMIN-GUID-670ACFFA-9002-4511-9345-C33C49811577" class="sect3"><span class="enumeration_section">21.6</span>删除索引</h3>
               <div>
                  <p>您可以使用<code class="codeph">DROP INDEX</code>语句<code class="codeph">DROP INDEX</code> 。
                  </p>
                  <div class="section">
                     <p>要删除索引，索引必须包含在架构中，或者必须具有<code class="codeph">DROP ANY INDEX</code>系统特权。
                     </p>
                     <p>删除索引的一些原因包括：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>不再需要该索引。</p>
                        </li>
                        <li>
                           <p>该索引未针对针对关联表发出的查询提供预期的性能改进。例如，表可能非常小，或者表中可能有很多行，但索引条目很少。</p>
                        </li>
                        <li>
                           <p>应用程序不使用索引来查询数据。</p>
                        </li>
                        <li>
                           <p>索引已变为无效，必须在重建之前删除。</p>
                        </li>
                        <li>
                           <p>索引变得过于分散，必须在重建之前删除。</p>
                        </li>
                     </ul>
                     <p>删除索引时，索引段的所有扩展区都将返回到包含的表空间，并可用于表空间中的其他对象。</p>
                     <p>删除索引的方式取决于您是使用<code class="codeph">CREATE INDEX</code>语句显式<code class="codeph">CREATE INDEX</code> ，还是通过在表上定义键约束来隐式<code class="codeph">CREATE INDEX</code> 。如果使用<code class="codeph">CREATE INDEX</code>语句显式<code class="codeph">CREATE INDEX</code> ，则可以使用<code class="codeph">DROP INDEX</code>语句<code class="codeph">DROP INDEX</code> 。以下语句删除<code class="codeph">emp_ename</code>索引：</p><pre class="oac_no_warn" dir="ltr">DROP INDEX emp_ename;</pre><p>您不能只删除与启用的<code class="codeph">UNIQUE</code>键或<code class="codeph">PRIMARY KEY</code>约束关联的索引。要删除约束关联索引，必须禁用或删除约束本身。
                     </p>
                     <div class="infoboxnote" id="GUID-670ACFFA-9002-4511-9345-C33C49811577__GUID-EA647DA4-9661-4A00-9D0A-787783961F97">
                        <p class="notep1">注意：</p>
                        <p>如果删除表，则会自动删除所有关联的索引。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-670ACFFA-9002-4511-9345-C33C49811577__GUID-D8A9EDF9-60AE-4CA5-96B8-B780172D7255">
                     <p class="notep1">也可以看看：</p>
                     <p></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>有关使用<code class="codeph">DROP INDEX</code>语句的语法和限制的<a href="../sqlrf/DROP-INDEX.html#SQLRF01510" target="_blank"><span class="italic">Oracle数据库SQL语言参考</span></a></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="managing-schema-objects.html#GUID-A6587008-A4F2-4333-A47C-F1AB0B4538FA" title="完整性约束是限制表中一列或多列的值的规则。约束子句可以出现在CREATE TABLE或ALTER TABLE语句中，并标识受约束影响的一列或多列，并标识约束的条件。">管理诚信约束</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="managing-indexes.html#GUID-FD6F0D3D-022E-433D-9E11-B3A5D65A84C2" title="使索引不可见是使其无法使用或丢弃的替代方法。">使索引不可见或可见</a> ”</span>以替代丢弃索引</p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-E4149397-FF37-4367-A12F-675433715904">管理索引</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-D1285CD5-95C0-4E74-8F26-A02018EA7999" name="GUID-D1285CD5-95C0-4E74-8F26-A02018EA7999"></a><h3 id="ADMIN-GUID-D1285CD5-95C0-4E74-8F26-A02018EA7999" class="sect3"><span class="enumeration_section">21.7</span>管理自动索引</h3>
               <p>您可以使用自动索引功能在Oracle数据库中配置和使用自动索引，以提高数据库性能。</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-FAE533D7-9C9E-48C9-9A61-EBC060BF3D70">关于自动索引</a><br>自动索引功能可自动执行Oracle数据库中的索引管理任务。自动索引根据应用程序工作负载的变化自动创建，重建和删除数据库中的索引，从而提高数据库性能。自动管理的索引称为<span class="italic">自动索引</span> 。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-082972AD-1866-411A-8250-9B23D4088582">自动索引的工作原理</a><br>本节介绍自动索引的工作原理。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-A8B4BB05-2711-497A-8276-127076DAA518">在Oracle数据库中配置自动索引</a><br>您可以使用<code class="codeph">DBMS_AUTO_INDEX.CONFIGURE</code>过程在Oracle数据库中配置自动索引。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-05C18A9D-1525-496B-9AD1-6F426222E05D">生成自动索引报告</a><br>您可以使用<code class="codeph">DBMS_AUTO_INDEX</code>包的<code class="codeph">REPORT_ACTIVITY</code>和<code class="codeph">REPORT_LAST_ACTIVITY</code>函数生成与Oracle数据库中的自动索引操作相关的报告。
                     </li>
                     <li class="ulchildlink"><a href="managing-indexes.html#GUID-FF3F7EF5-9468-48BC-8990-8189C1CBFD12">包含自动索引信息的视图</a><br>您可以查询一组数据字典视图，以获取有关Oracle数据库中自动索引的信息。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-E4149397-FF37-4367-A12F-675433715904">管理索引</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-FAE533D7-9C9E-48C9-9A61-EBC060BF3D70" name="GUID-FAE533D7-9C9E-48C9-9A61-EBC060BF3D70"></a><h4 id="ADMIN-GUID-FAE533D7-9C9E-48C9-9A61-EBC060BF3D70" class="sect4"><span class="enumeration_section">21.7.1</span>关于自动索引</h4>
                  <div>
                     <p>自动索引功能可自动执行Oracle数据库中的索引管理任务。自动索引根据应用程序工作负载的变化自动创建，重建和删除数据库中的索引，从而提高数据库性能。自动管理的索引称为<span class="italic">自动索引</span> 。
                     </p>
                     <p>索引结构是数据库性能的基本特征。索引对于OLTP应用程序至关重要，OLTP应用程序使用大型数据集并每天运行数百万条SQL语句。索引对于数据仓库应用程序也很重要，这些应用程序通常从非常大的表中查询相对少量的数据。如果在应用程序工作负载发生更改时不更新索引，则现有索引可能会导致数据库性能显着下降。</p>
                     <p>自动索引通过基于应用程序工作负载的变化在Oracle数据库中自动和动态地管理索引来提高数据库性能。</p>
                     <p>自动索引提供以下功能：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>以预定义的时间间隔定期在后台运行自动索引过程。</p>
                        </li>
                        <li>
                           <p>分析应用程序工作负载，并相应地创建新索引并删除现有性能不佳的索引以提高数据库性能。</p>
                        </li>
                        <li>
                           <p>重建由于表分区维护操作而标记为<span class="italic">不可用</span>的索引，例如<code class="codeph">ALTER TABLE MOVE</code> 。</p>
                        </li>
                        <li>
                           <p>提供PL / SQL API，用于在数据库中配置自动索引并生成与自动索引操作相关的报告。</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-FAE533D7-9C9E-48C9-9A61-EBC060BF3D70__GUID-E0843971-0A7C-4EF8-91E3-16769037FE90">
                        <p class="notep1">注意：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>自动索引是本地B树索引。</p>
                           </li>
                           <li>
                              <p>可以为分区表和非分区表创建自动索引。</p>
                           </li>
                           <li>
                              <p>无法为临时表创建自动索引。</p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-D1285CD5-95C0-4E74-8F26-A02018EA7999" title="您可以使用自动索引功能在Oracle数据库中配置和使用自动索引，以提高数据库性能。">管理自动索引</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-082972AD-1866-411A-8250-9B23D4088582" name="GUID-082972AD-1866-411A-8250-9B23D4088582"></a><h4 id="ADMIN-GUID-082972AD-1866-411A-8250-9B23D4088582" class="sect4"><span class="enumeration_section">21.7.2</span>自动索引的工作<span class="enumeration_section">原理</span></h4>
                  <div>
                     <p>本节介绍自动索引的工作原理。</p>
                     <p>自动索引过程每15分钟在后台运行，并执行以下操作：</p>
                     <ol>
                        <li>
                           <p>标识自动索引候选者</p>
                           <p>根据SQL语句中表列的用法来标识自动索引候选项。</p>
                        </li>
                        <li>
                           <p>为自动索引候选创建不可见的自动索引</p>
                           <p>自动索引候选项被创建为<span class="italic">不可见的</span>自动索引，也就是说，这些自动索引不能在SQL语句中使用。
                           </p>
                        </li>
                        <li>
                           <p>验证针对SQL语句的不可见自动索引</p>
                           <p>不可见的自动索引根据SQL语句进行验证。</p>
                           <p>如果通过使用这些索引来提高SQL语句的性能，则将索引配置为<span class="italic">可见</span>索引，以便可以在SQL语句中使用它们。
                           </p>
                           <p>如果使用这些索引未提高SQL语句的性能，则将索引配置为<span class="italic">不可用</span>索引，并将SQL语句<span class="italic">列入黑名单</span> 。稍后将通过自动索引过程删除不可用的索引。将来，黑名单的SQL语句不允许使用自动索引。
                           </p>
                           <div class="infoboxnote" id="GUID-082972AD-1866-411A-8250-9B23D4088582__THEAUTOMATEDINDEXESCANNOTBEUSEDFORS-C7471F6E">
                              <p class="notep1">注意：</p>
                              <p>第一次在数据库中运行的SQL语句不能使用自动索引。</p>
                           </div>
                        </li>
                        <li>
                           <p>删除未使用的自动索引</p>
                           <p>将删除长时间未使用的自动索引。</p>
                           <div class="infoboxnote" id="GUID-082972AD-1866-411A-8250-9B23D4088582__GUID-89CEE0EB-FD99-4078-8AB6-A6F12E69FB54">
                              <p class="notep1">注意：</p>
                              <p>默认情况下，373天后删除未使用的自动索引。可以使用<code class="codeph">DBMS_AUTO_INDEX.CONFIGURE</code>过程配置在数据库中保留未使用的自动索引的时间段。
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-082972AD-1866-411A-8250-9B23D4088582__GUID-EC289D9C-843E-42ED-B326-9E427E8DF662">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="managing-indexes.html#GUID-A8B4BB05-2711-497A-8276-127076DAA518" title="您可以使用DBMS_AUTO_INDEX.CONFIGURE过程在Oracle数据库中配置自动索引。">在Oracle数据库中配置自动索引</a> ”</span></p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-D1285CD5-95C0-4E74-8F26-A02018EA7999" title="您可以使用自动索引功能在Oracle数据库中配置和使用自动索引，以提高数据库性能。">管理自动索引</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-A8B4BB05-2711-497A-8276-127076DAA518" name="GUID-A8B4BB05-2711-497A-8276-127076DAA518"></a><h4 id="ADMIN-GUID-A8B4BB05-2711-497A-8276-127076DAA518" class="sect4"><span class="enumeration_section">21.7.3</span>在Oracle数据库中配置自动索引</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_AUTO_INDEX.CONFIGURE</code>过程在Oracle数据库中配置自动索引。
                     </p>
                     <div class="section">
                        <p>以下示例描述了可以使用<code class="codeph">DBMS_AUTO_INDEX.CONFIGURE</code>过程指定的一些配置设置：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A8B4BB05-2711-497A-8276-127076DAA518__GUID-43A5E701-D34A-4225-BE0A-646BA9AD6154">启用和禁用数据库中的自动索引</p>
                        <p>您可以使用<code class="codeph">AUTO_INDEX_MODE</code>配置设置在数据库中启用或禁用自动索引。
                        </p>
                        <p>以下语句在数据库中启用自动索引，并将任何新的自动索引创建为<span class="italic">可见</span>索引，以便可以在SQL语句中使用它们：</p><pre class="pre codeblock"><code>EXEC DBMS_AUTO_INDEX.CONFIGURE（'AUTO_INDEX_MODE'，'IMPLEMENT'）;</code></pre><p>以下语句在数据库中启用自动索引，但会将任何新的自动索引创建为<span class="italic">不可见的</span>索引，以便它们不能在SQL语句中使用：</p><pre class="pre codeblock"><code>EXEC DBMS_AUTO_INDEX.CONFIGURE（'AUTO_INDEX_MODE'，'仅报告'）;</code></pre><p>以下语句禁用数据库中的自动索引，因此不会创建新的自动索引，并禁用现有的自动索引：</p><pre class="pre codeblock"><code>EXEC DBMS_AUTO_INDEX.CONFIGURE（'AUTO_INDEX_MODE'，'OFF'）;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A8B4BB05-2711-497A-8276-127076DAA518__GUID-ECED41F9-5BA1-45AF-832A-B0230F266B61">指定可以使用自动索引的模式</p>
                        <p>您可以使用<code class="codeph">AUTO_INDEX_SCHEMA</code>配置设置来指定可以使用自动索引的模式。
                        </p>
                        <div class="infoboxnote" id="GUID-A8B4BB05-2711-497A-8276-127076DAA518__GUID-E6FEFA55-0ED4-4478-8DB8-06794C08962F">
                           <p class="notep1">注意：</p>在数据库中启用自动索引时，默认情况下数据库中的所有模式都可以使用自动索引。
                        </div>
                        <p>以下语句将<code class="codeph">SH</code>和<code class="codeph">HR</code>模式添加到<span class="italic">排除列表中</span> ，以便<code class="codeph">SH</code>和<code class="codeph">HR</code>模式不能使用自动索引：</p><pre class="pre codeblock"><code>EXEC DBMS_AUTO_INDEX.CONFIGURE（'AUTO_INDEX_SCHEMA'，'SH'，FALSE）; EXEC DBMS_AUTO_INDEX.CONFIGURE（'AUTO_INDEX_SCHEMA'，'HR'，FALSE）;</code></pre><p>以下语句从排除列表中删除<code class="codeph">HR</code>模式，以便<code class="codeph">HR</code>模式可以使用自动索引：</p><pre class="pre codeblock"><code>EXEC DBMS_AUTO_INDEX.CONFIGURE（'AUTO_INDEX_SCHEMA'，'HR'，NULL）;</code></pre><p>以下语句从排除列表中删除所有模式，以便数据库中的所有模式都可以使用自动索引：</p><pre class="pre codeblock"><code>EXEC DBMS_AUTO_INDEX.CONFIGURE（'AUTO_INDEX_SCHEMA'，NULL，TRUE）;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A8B4BB05-2711-497A-8276-127076DAA518__GUID-5AF11D97-57DA-4B7A-9D92-E0D459E729F0">指定未使用的自动索引的保留期</p>
                        <p>您可以使用<code class="codeph">AUTO_INDEX_RETENTION_FOR_AUTO</code>配置设置指定在数据库中保留未使用的自动索引的时间段。在指定的保留期后，将删除未使用的自动索引。
                        </p>
                        <div class="infoboxnote" id="GUID-A8B4BB05-2711-497A-8276-127076DAA518__GUID-A602DEEA-4AF9-46BE-98AB-06BD279D7A93">
                           <p class="notep1">注意：</p>默认情况下，373天后删除未使用的自动索引。
                        </div>
                        <p>以下语句将未使用的自动索引的保留期设置为90天。</p><pre class="pre codeblock"><code>EXEC DBMS_AUTO_INDEX.CONFIGURE（'AUTO_INDEX_RETENTION_FOR_AUTO'，'90'）;</code></pre><p>以下语句将自动索引的保留期重置为默认值373天。</p><pre class="pre codeblock"><code>EXEC DBMS_AUTO_INDEX.CONFIGURE（'AUTO_INDEX_RETENTION_FOR_AUTO'，NULL）;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A8B4BB05-2711-497A-8276-127076DAA518__GUID-7A8BC093-EEC8-4912-8CEA-094D00FDFFBD">指定未使用的非自动索引的保留期</p>
                        <p>您可以使用<code class="codeph">AUTO_INDEX_RETENTION_FOR_MANUAL</code>配置设置指定在数据库中保留未使用的非自动索引（手动创建的索引）的时间段。在指定的保留期后，将删除未使用的非自动索引。
                        </p>
                        <div class="infoboxnote" id="GUID-A8B4BB05-2711-497A-8276-127076DAA518__GUID-1E311252-1A0F-46D1-A8CE-1C3959EFE992">
                           <p class="notep1">注意：</p>默认情况下，自动索引过程永远不会删除未使用的非自动索引。
                        </div>
                        <p>以下语句将未使用的非自动索引的保留期设置为60天。</p><pre class="pre codeblock"><code>EXEC DBMS_AUTO_INDEX.CONFIGURE（'AUTO_INDEX_RETENTION_FOR_MANUAL'，'60'）;</code></pre><p>以下语句将未使用的非自动索引的保留期设置为<code class="codeph">NULL</code>以便自动索引过程永远不会删除它们。
                        </p><pre class="pre codeblock"><code>EXEC DBMS_AUTO_INDEX.CONFIGURE（'AUTO_INDEX_RETENTION_FOR_AUTO'，NULL）;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A8B4BB05-2711-497A-8276-127076DAA518__GUID-A4C822A0-FDB6-4B85-A0FD-1362818952DC">指定自动索引日志的保留期</p>
                        <p>您可以使用<code class="codeph">AUTO_INDEX_REPORT_RETENTION</code>配置设置指定在数据库中保留自动索引日志的时间段。在指定的保留期后，将删除自动索引日志。
                        </p>
                        <div class="infoboxnote" id="GUID-A8B4BB05-2711-497A-8276-127076DAA518__GUID-3A444FF1-C3F1-43ED-894B-91E8D42F4E76">
                           <p class="notep1">注意：</p>默认情况下，自动索引日志将在31天后删除。
                        </div>
                        <p>以下语句将自动索引日志的保留期设置为60天。</p><pre class="pre codeblock"><code>EXEC DBMS_AUTO_INDEX.CONFIGURE（'AUTO_INDEX_REPORT_RETENTION'，'60'）;</code></pre><p>以下语句将自动索引日志的保留期重置为默认值31天。</p><pre class="pre codeblock"><code>EXEC DBMS_AUTO_INDEX.CONFIGURE（'AUTO_INDEX_REPORT_RETENTION'，NULL）;</code></pre><div class="infoboxnote" id="GUID-A8B4BB05-2711-497A-8276-127076DAA518__GUID-E4A2F66E-BE9C-4B51-B4C5-9FAAC78AF2CB">
                           <p class="notep1">注意：</p>自动索引报告基于自动索引日志生成。因此，无法生成超过使用<code class="codeph">AUTO_INDEX_REPORT_RETENTION</code>配置设置指定的自动索引日志的保留期的时间段的自动索引<code class="codeph">AUTO_INDEX_REPORT_RETENTION</code> 。
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A8B4BB05-2711-497A-8276-127076DAA518__GUID-5D49AB88-5B53-479C-B23E-46AEB85E2295">指定用于存储自动索引的表空间</p>
                        <p>您可以使用<code class="codeph">AUTO_INDEX_DEFAULT_TABLESPACE</code>配置设置指定用于存储自动索引的表空间。
                        </p>
                        <div class="infoboxnote" id="GUID-A8B4BB05-2711-497A-8276-127076DAA518__GUID-54599BAE-A1D0-47C8-99C3-C6A6336085DA">
                           <p class="notep1">注意：</p>默认情况下，在数据库创建期间指定的永久表空间用于存储自动索引。
                        </div>
                        <p>以下语句指定用于存储自动索引的<code class="codeph">TBS_AUTO</code>的表空间：</p><pre class="pre codeblock"><code>EXEC DBMS_AUTO_INDEX.CONFIGURE（'AUTO_INDEX_DEFAULT_TABLESPACE'，'TBS_AUTO'）;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-A8B4BB05-2711-497A-8276-127076DAA518__GUID-EA10F54B-A370-4D82-8CB5-37E029349DC2">指定要为自动索引分配的表空间的百分比</p>
                        <p>您可以使用<code class="codeph">AUTO_INDEX_SPACE_BUDGET</code>配置设置指定要为自动索引分配的表空间百分比。仅当用于存储自动索引的表空间是在数据库创建期间指定的默认永久表空间时，即未为<code class="codeph">AUTO_INDEX_DEFAULT_TABLESPACE</code>配置设置指定任何值时，才可以指定此配置设置。
                        </p>
                        <p>以下语句为自动索引分配5％的表空间：</p><pre class="pre codeblock"><code>EXEC DBMS_AUTO_INDEX.CONFIGURE（'AUTO_INDEX_SPACE_BUDGET'，'5'）;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-A8B4BB05-2711-497A-8276-127076DAA518__GUID-9A6514C5-BB9D-4D68-BCB9-3BE7851F0DDB">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../arpls/DBMS_AUTO_INDEX.html#ARPLS-GUID-93A19936-453A-4C62-8DFB-FB52AC70C838" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> ，以获取与使用<code class="codeph">DBMS_AUTO_INDEX.CONFIGURE</code>过程指定的自动索引相关的配置设置的完整列表</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-D1285CD5-95C0-4E74-8F26-A02018EA7999" title="您可以使用自动索引功能在Oracle数据库中配置和使用自动索引，以提高数据库性能。">管理自动索引</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-05C18A9D-1525-496B-9AD1-6F426222E05D" name="GUID-05C18A9D-1525-496B-9AD1-6F426222E05D"></a><h4 id="ADMIN-GUID-05C18A9D-1525-496B-9AD1-6F426222E05D" class="sect4"><span class="enumeration_section">21.7.4</span>生成自动索引报告</h4>
                  <div>
                     <p>您可以使用<code class="codeph">DBMS_AUTO_INDEX</code>包的<code class="codeph">REPORT_ACTIVITY</code>和<code class="codeph">REPORT_LAST_ACTIVITY</code>函数生成与Oracle数据库中的自动索引操作相关的报告。
                     </p>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-05C18A9D-1525-496B-9AD1-6F426222E05D__GUID-B3401FB2-2D88-48C1-93BC-0F86FE7259C8">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../arpls/DBMS_AUTO_INDEX.html#ARPLS-GUID-A0FF6233-E4A5-49BD-9A5E-9342B4CF6640" target="_blank"><span class="italic">Oracle Database PL / SQL包和类型参考</span></a> ，了解<code class="codeph">DBMS_AUTO_INDEX</code>包的<code class="codeph">REPORT_ACTIVITY</code>和<code class="codeph">REPORT_LAST_ACTIVITY</code>函数的语法。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-05C18A9D-1525-496B-9AD1-6F426222E05D__GUID-4254BD18-06A4-422B-BD5A-241B156264D9">生成特定时间段的自动索引操作报告</p>
                        <p>以下示例生成一个报告，其中包含有关过去24小时内自动索引操作的<span class="italic">典型</span>信息。默认情况下，报告以纯文本格式生成。
                        </p><pre class="pre codeblock"><code>声明报告clob：= null;开始报告：= DBMS_AUTO_INDEX.REPORT_ACTIVITY（）;结束;</code></pre><p>以下示例生成一个报告，其中包含有关2018年11月份自动索引操作的<span class="italic">基本</span>信息。报告以HTML格式生成，仅包含自动索引操作的摘要。
                        </p><pre class="pre codeblock"><code>声明报告clob：= null;开始报告：= DBMS_AUTO_INDEX.REPORT_ACTIVITY（activity_start =&gt; TO_TIMESTAMP（'2018-11-01'，'YYYY-MM-DD'），activity_end =&gt; TO_TIMESTAMP（'2018-12-01'，'YYYY-MM-DD' ），type =&gt;'HTML'，section =&gt;'SUMMARY'，level =&gt;'BASIC'）;结束;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-05C18A9D-1525-496B-9AD1-6F426222E05D__GUID-AF1045AB-DD08-4206-8BE1-D4F8099E8FA6">生成上次自动索引操作的报告</p>
                        <p>以下示例生成一个报告，其中包含有关上次自动索引操作的<span class="italic">典型</span>信息。默认情况下，报告以纯文本格式生成。
                        </p><pre class="pre codeblock"><code>声明报告clob：= null;开始报告：= DBMS_AUTO_INDEX.REPORT_LAST_ACTIVITY（）;结束;</code></pre><p>以下示例生成一个报告，其中包含有关上次自动索引操作的<span class="italic">基本</span>信息。该报告包括上次自动索引操作的摘要，索引详细信息和错误信息。报告以HTML格式生成。
                        </p><pre class="pre codeblock"><code>声明报告clob：= null;开始报告：= DBMS_AUTO_INDEX.REPORT_LAST_ACTIVITY（type =&gt;'HTML'，section =&gt;'SUMMARY + INDEX_DETAILS + ERRORS'，level =&gt;'BASIC'）;结束;</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-D1285CD5-95C0-4E74-8F26-A02018EA7999" title="您可以使用自动索引功能在Oracle数据库中配置和使用自动索引，以提高数据库性能。">管理自动索引</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-FF3F7EF5-9468-48BC-8990-8189C1CBFD12" name="GUID-FF3F7EF5-9468-48BC-8990-8189C1CBFD12"></a><h4 id="ADMIN-GUID-FF3F7EF5-9468-48BC-8990-8189C1CBFD12" class="sect4"><span class="enumeration_section">21.7.5</span>包含自动索引信息的视图</h4>
                  <div>
                     <p>您可以查询一组数据字典视图，以获取有关Oracle数据库中自动索引的信息。</p>
                     <div class="section">
                        <p>以下视图显示有关自动索引配置设置和在Oracle数据库中创建的自动索引的信息：</p>
                        <div class="tblformal" id="GUID-FF3F7EF5-9468-48BC-8990-8189C1CBFD12__TABLE_AUTOMATED_INDEXES_VIEWS">
                           <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table lists the views that show information about the automatic indexing configuration settings and the auto indexes created in an Oracle database." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d222637e5205">视图</th>
                                    <th align="left" valign="bottom" id="d222637e5208">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d222637e5213" headers="d222637e5205 "><pre class="pre codeblock"><code>DBA_AUTO_INDEX_CONFIG</code></pre></td>
                                    <td align="left" valign="top" headers="d222637e5213 d222637e5208 ">
                                       <p>显示自动索引的当前配置设置。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d222637e5220" headers="d222637e5205 "><pre class="pre codeblock"><code>DBA_INDEXES ALL_INDEXES USER_INDEXES</code></pre></td>
                                    <td align="left" valign="top" headers="d222637e5220 d222637e5208 ">
                                       <p>这些视图中的<code class="codeph">AUTO</code>列指示索引是否为自动索引（ <code class="codeph">YES</code> ）或否（ <code class="codeph">NO</code> ）。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-FF3F7EF5-9468-48BC-8990-8189C1CBFD12__GUID-A9E9D49A-BE79-483F-83F2-F8976D1F0488">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../refrn/index.html" target="_blank"><span class="italic">Oracle数据库参考</span></a> ，以获取这些视图的完整描述</p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-D1285CD5-95C0-4E74-8F26-A02018EA7999" title="您可以使用自动索引功能在Oracle数据库中配置和使用自动索引，以提高数据库性能。">管理自动索引</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="ADMIN11738"></a><div class="props_rev_3"><a id="GUID-CCBBC9DB-29A1-4F46-B3AA-BF4205793403" name="GUID-CCBBC9DB-29A1-4F46-B3AA-BF4205793403"></a><h3 id="ADMIN-GUID-CCBBC9DB-29A1-4F46-B3AA-BF4205793403" class="sect3"><span class="enumeration_section">21.8</span>索引数据字典视图</h3>
               <div>
                  <p>您可以查询一组数据字典视图以获取有关索引的信息。</p>
                  <div class="section">
                     <p>以下视图显示有关索引的信息：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformalwide" id="GUID-CCBBC9DB-29A1-4F46-B3AA-BF4205793403__GUID-AF39F9EC-7483-400E-9AB8-10B293337272">
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="" width="100%" border="1" summary="Column 1 lists the names of views that display information about indexes, column 2 describes each view." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" id="d222637e5300">视图</th>
                              <th align="left" valign="bottom" id="d222637e5303">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d222637e5308" headers="d222637e5300 "><pre class="pre codeblock"><code>DBA_INDEXES ALL_INDEXES USER_INDEXES</code></pre></td>
                              <td align="left" valign="top" headers="d222637e5308 d222637e5303 ">
                                 <p><code class="codeph">DBA</code>视图显示有关数据库中所有表的索引的信息。<code class="codeph">ALL</code>视图显示有关用户可访问的所有表的索引的信息。<code class="codeph">USER</code>视图仅限于用户拥有的索引。这些视图中的某些列包含由<code class="codeph">DBMS_STATS</code>包或<code class="codeph">ANALYZE</code>语句生成的统计信息。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d222637e5329" headers="d222637e5300 "><pre class="pre codeblock"><code>DBA_IND_COLUMNS ALL_IND_COLUMNS USER_IND_COLUMNS</code></pre></td>
                              <td align="left" valign="top" headers="d222637e5329 d222637e5303 ">
                                 <p>这些视图显示有关表上索引列的信息。这些视图中的某些列包含由<code class="codeph">DBMS_STATS</code>包或<code class="codeph">ANALYZE</code>语句生成的统计信息。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d222637e5342" headers="d222637e5300 "><pre class="pre codeblock"><code>DBA_IND_PARTITIONS ALL_IND_PARTITIONSALL_IND_PARTITIONS USER_IND_PARTITIONS</code></pre></td>
                              <td align="left" valign="top" headers="d222637e5342 d222637e5303 ">
                                 <p>这些视图显示有关每个索引分区的以下信息：分区详细信息，分区的存储参数以及<code class="codeph">DBMS_STATS</code>程序包生成的各种分区统计信息。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d222637e5352" headers="d222637e5300 "><pre class="pre codeblock"><code>DBA_IND_EXPRESSIONS ALL_IND_EXPRESSIONS USER_IND_EXPRESSIONS</code></pre></td>
                              <td align="left" valign="top" headers="d222637e5352 d222637e5303 ">
                                 <p>这些视图显示有关表上基于函数的索引的表达式的信息。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d222637e5359" headers="d222637e5300 "><pre class="pre codeblock"><code>DBA_IND_STATISTICS ALL_IND_STATISTICS USER_IND_STATISTICS</code></pre></td>
                              <td align="left" valign="top" headers="d222637e5359 d222637e5303 ">
                                 <p>这些视图显示有关索引的优化程序统计信息的信息。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d222637e5366" headers="d222637e5300 "><pre class="pre codeblock"><code>INDEX_STATS INDEX_HISTOGRAM</code></pre></td>
                              <td align="left" valign="top" headers="d222637e5366 d222637e5303 ">
                                 <p>这些视图显示有关最后一个<code class="codeph">ANALYZE INDEX...的信息<code class="codeph">ANALYZE INDEX...VALIDATE STRUCTURE</code>语句。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d222637e5376" headers="d222637e5300 "><pre class="pre codeblock"><code>USER_OBJECT_USAGE</code></pre></td>
                              <td align="left" valign="top" headers="d222637e5376 d222637e5303 ">
                                 <p>此视图显示<code class="codeph">ALTER INDEX...生成的索引使用信息<code class="codeph">ALTER INDEX...MONITORING USAGE</code>声明。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section"></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-CCBBC9DB-29A1-4F46-B3AA-BF4205793403__GUID-A9E9D49A-BE79-483F-83F2-F8976D1F0488">
                     <p class="notep1">也可以看看：</p>
                     <p>有关这些视图的完整描述，请<a href="../refrn/index.html" target="_blank"><span class="italic">参见Oracle数据库参考</span></a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="managing-indexes.html#GUID-E4149397-FF37-4367-A12F-675433715904">管理索引</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>
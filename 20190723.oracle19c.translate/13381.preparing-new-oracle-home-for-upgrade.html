<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="After backing up the database that you want to upgrade, prepare the new Oracle home in a new location. Install the software for the new Oracle Database release into the new location."></meta>
      <meta name="description" content="After backing up the database that you want to upgrade, prepare the new Oracle home in a new location. Install the software for the new Oracle Database release into the new location."></meta>
      <title>准备新的Oracle主页进行升级</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Upgrade Guide"></meta>
      <meta property="og:description" content="After backing up the database that you want to upgrade, prepare the new Oracle home in a new location. Install the software for the new Oracle Database release into the new location."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Upgrade Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-upgrade-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-25T08:26:31-07:00"></meta>
      <meta name="dcterms.title" content="Database Upgrade Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96252-05"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="prepare-dbua-oracle-data-guard-rolling-upgrades.html" title="Previous" type="text/html"></link>
      <link rel="next" href="prerequisites-for-preparing-oracle-home-on-windows.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="UPGRD"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="prepare-dbua-oracle-data-guard-rolling-upgrades.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="prerequisites-for-preparing-oracle-home-on-windows.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库升级指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="tasks-prepare-upgrade-oracle-database.html" property="item" typeof="WebPage"><span property="name">准备升级Oracle数据库</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">准备新的Oracle主页进行升级</li>
            </ol>
            <a id="GUID-E9112AB3-2230-495C-8BB7-9998A6BF903E" name="GUID-E9112AB3-2230-495C-8BB7-9998A6BF903E"></a><a id="UPGRD52859"></a>
            
            <h2 id="UPGRD-GUID-E9112AB3-2230-495C-8BB7-9998A6BF903E" class="sect2">准备新的Oracle主页进行升级</h2>
         </header>
         <div class="ind">
            <div>
               <p>备份要升级的数据库后，在新位置准备新的Oracle主目录。将新Oracle Database发行版的软件安装到新位置。</p>
               <ol>
                  <li>
                     <p>（仅限手动升级）将要升级的数据库的Oracle主目录中的配置文件复制到新版本Oracle Database Oracle主目录。如果您使用的是DBUA，则可以忽略此步骤，因为会自动为您复制配置文件。</p>
                     <p>使用以下过程将配置文件复制到新的Oracle主目录：</p>
                     <ol type="a">
                        <li>
                           <p>如果参数文件位于旧环境Oracle主目录中，则将其复制到新的Oracle主目录。默认情况下，Oracle在Linux或UNIX平台上的<code class="codeph"><span class="variable" translate="no">ORACLE_HOME</span> /dbs</code>目录中以及Windows操作系统上的<code class="codeph"><span class="variable" translate="no">ORACLE_HOME</span> \database</code>目录中查找参数文件。升级后，参数文件可以驻留在其他任何位置，但它不能驻留在旧环境的Oracle主目录中。
                           </p>
                           <div class="infoboxnote" id="GUID-E9112AB3-2230-495C-8BB7-9998A6BF903E__GUID-42E9C72B-C45D-4875-87F2-B0D03B13E070">
                              <p class="notep1">注意：</p>
                              <p>如有必要，从服务器参数文件（ <code class="codeph">SPFILE</code> ）创建文本初始化参数文件（ <code class="codeph">PFILE</code> ），以便您可以编辑初始化参数。
                              </p>
                           </div>
                        </li>
                        <li>
                           <p>如果参数文件位于Oracle ASM实例中，请使用以下命令备份参数文件：</p><pre class="oac_no_warn" dir="ltr">CREATE pfile FROM spfile;</pre><p>如果必须降级数据库并且<code class="codeph">SPFILE</code>位于Oracle ASM中，则必须在降级之前恢复参数文件。
                           </p>
                        </li>
                        <li>
                           <p>如果参数文件是带有<code class="codeph">IFILE</code> （包含文件）或<code class="codeph">SPFILE</code> （服务器参数文件）条目的基于文本的初始化参数文件，并且<code class="codeph">IFILE</code>或<code class="codeph">SPFILE</code>条目中指定的文件位于旧环境Oracle主目录中，则复制由<code class="codeph">IFILE</code>或<code class="codeph">SPFILE</code>条目指定的文件到新的Oracle主目录。<code class="codeph">IFILE</code>或<code class="codeph">SPFILE</code>条目中指定的文件包含其他初始化参数。
                           </p>
                        </li>
                        <li>
                           <p>如果您的密码文件位于旧环境Oracle主目录中，则将密码文件移动或复制到新的Oracle主目录。</p>
                           <p>密码文件的名称和位置是特定于操作系统的。如果<code class="codeph"><span class="variable" translate="no">SID</span></code>是您的Oracle实例ID，您可以在以下位置找到密码文件：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>Linux或UNIX平台：默认密码文件是<code class="codeph">orapw <span class="variable" translate="no">SID</span></code> 。它位于<code class="codeph"><span class="variable" translate="no">ORACLE_HOME</span> /dbs</code> 。
                                 </p>
                              </li>
                              <li>
                                 <p>Windows操作系统：默认密码文件是<code class="codeph">pwd <span class="variable" translate="no">SID</span> .ora</code> 。它位于<code class="codeph"><span class="variable" translate="no">ORACLE_HOME</span> \database</code>目录中。
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ol>
                  </li>
                  <li>
                     <p>通过完成以下步骤调整新Oracle Database发行版中的参数文件：</p>
                     <ol type="a">
                        <li>
                           <p>删除不支持的初始化参数并调整已弃用的初始化参数。在新版本中，不支持某些参数，并且不推荐使用其他参数。从启动新Oracle数据库实例的任何参数文件中删除所有不支持的参数。不受支持的参数可能会导致新的Oracle数据库版本出错。此外，更改在新版本中语法已更改的任何参数。</p>
                           <p>升级前信息工具分别显示任何已弃用的参数和参数不再支持中发现的<span class="bold">已过时的参数</span>和<span class="bold">参数不再支持</span>部分。
                           </p>
                           <p>将初始化参数的值调整为至少升级前信息工具指示的最小值。</p>
                           <p></p>
                           <p>确保完全指定参数文件中的所有路径名。您不应在参数文件中包含相对路径名。</p>
                           <p></p>
                        </li>
                        <li>
                           <p>如果参数文件包含<code class="codeph">IFILE</code>项，然后更改<code class="codeph">IFILE</code>在参数文件条目。<code class="codeph">IFILE</code>条目应指向您在步骤1中指定的新位置文本初始化参数文件。还要编辑<code class="codeph">IFILE</code>条目中指定的文件，方法与在步骤1中编辑参数文件的方式相同。
                           </p>
                        </li>
                        <li>
                           <p>如果要升级群集数据库，则可以根据需要修改<code class="codeph">SPFILE</code>或<code class="codeph">init <span class="variable" translate="no">ORACLE_SID</span> .ora</code>文件。
                           </p>
                        </li>
                     </ol>
                     <p>进行这些参数文件调整后，请确保保存所修改的所有文件。</p>
                  </li>
                  <li>
                     <p>（仅限手动升级）如果要升级群集数据库，并且未使用数据库升级助手（DBUA），则必须手动将数据库实例与群集分开。将<span class="parmname" translate="no">CLUSTER_DATABASE</span>初始化参数设置为<code class="codeph">false</code> 。升级后，必须将此初始化参数设置回<code class="codeph">true</code> 。如果您使用的是DBUA，那么助手会为您完成此任务。
                     </p>
                  </li>
               </ol>
            </div>
            <div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="tasks-prepare-upgrade-oracle-database.html#GUID-733D2563-A42D-4366-9FCD-DABD25D0E2DF" title="完成预升级任务和检查以帮助您完成成功升级。">准备升级Oracle数据库</a></p>
                  </div>
               </div>
            </div>
            
         </div>
      </article>
   </body>
</html>
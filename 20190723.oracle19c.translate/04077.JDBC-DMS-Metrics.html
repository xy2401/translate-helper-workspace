<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>JDBC DMS Metrics</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="JDBC Developer's Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="JDBC Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="jdbc-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-13T13:20:37-08:00">
      <meta name="dcterms.title" content="JDBC Developer's Guide">
      <meta name="dcterms.dateCopyrighted" content="1999, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96471-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="JDBC-diagnosability.html" title="Previous" type="text/html">
      <link rel="next" href="appendixes.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="JJDBC">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="JDBC-diagnosability.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="appendixes.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">JDBC Developer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="manageability.html" property="item" typeof="WebPage"><span property="name"> Manageability </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> JDBC DMS Metrics </li>
            </ol>
            <a id="GUID-601B7FA6-A11A-4927-A0AD-77AB6F5CF896" name="GUID-601B7FA6-A11A-4927-A0AD-77AB6F5CF896"></a><a id="JJDBC28899"></a>
            
            <h2 id="JJDBC-GUID-601B7FA6-A11A-4927-A0AD-77AB6F5CF896" class="sect2"><span class="enumeration_chapter">36 </span> JDBC DMS Metrics 
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>DMS metrics are used to measure the performance of application components.</p>
               <p>This chapter discusses the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="JDBC-DMS-Metrics.html#GUID-6480E4BF-0412-46AA-973C-7EB0CAC58CA8">Overview of JDBC DMS Metrics</a></p>
                  </li>
                  <li>
                     <p><a href="JDBC-DMS-Metrics.html#GUID-EFC7CADB-05FE-4A9C-9463-45BDFF8509F2">About Determining the Type of Metric to Be Generated</a></p>
                  </li>
                  <li>
                     <p><a href="JDBC-DMS-Metrics.html#GUID-6C1D625D-4797-46BC-95C9-E3E235E799EB">About Generating the SQLText Metric</a></p>
                  </li>
                  <li>
                     <p><a href="JDBC-DMS-Metrics.html#GUID-C1C3B862-9D20-4A32-AD82-8C1AF893625B">About Accessing DMS Metrics Using JMX</a></p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-601B7FA6-A11A-4927-A0AD-77AB6F5CF896__GUID-6A8FECF5-7011-467E-9A71-5319E2D15763">
                  <p class="notep1">Note:</p>
                  <p>There is another kind of metrics called end-to-end metrics. End-to-end metrics are used for tagging application activity from the entry into the application code through JDBC to the database and back.</p>
                  <p>JDBC supports the following end-to-end metrics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">Action</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">ClientId</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">ExecutionContextId</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">Module</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">State</code></p>
                     </li>
                  </ul>
                  <p>For earlier releases, to work with the preceding metrics, you could use the <code class="codeph">setEndToEndMetrics</code> and <code class="codeph">getEndToEndMetrics</code> methods of the <code class="codeph">oracle.jdbc.OracleConnection</code> interface. However, starting from Oracle Database 12<span class="italic">c </span>Release 1 (12.1), these methods have been deprecated. Oracle recommends to use the <code class="codeph">setClientInfo</code> and <code class="codeph">getClientInfo</code> methods instead of the <code class="codeph">setEndToEndMetrics</code> and <code class="codeph">getEndToEndMetrics</code> methods.
                  </p>
                  <p>In Oracle Database 10<span class="italic">g</span>, Oracle Java Database Connectivity (JDBC) supports end-to-end metrics. In Oracle Database 12<span class="italic">c </span>Release 1 (12.1), an application can set the end-to-end metrics directly only when it does not use a DMS-enabled JAR files. But, if the application uses a DMS-enabled JAR file, the end-to-end metrics can be set only through DMS.
                  </p>
               </div>
               <div class="infoboxnotewarn" id="GUID-601B7FA6-A11A-4927-A0AD-77AB6F5CF896__GUID-68C37AB8-F243-4404-B332-264B638C1C66">
                  <p class="notep1">WARNING:</p>
                  <p>Oracle strongly recommends using DMS metrics, if the application uses a DMS-enabled JAR file.</p>
               </div>
               <div class="infoboxnotealso" id="GUID-601B7FA6-A11A-4927-A0AD-77AB6F5CF896__GUID-509F743B-99E1-45F6-9E9D-4B94DE35AD83">
                  <p class="notep1">See Also:</p>
                  <p><a href="../jajdb/index.html" target="_blank"><span class="italic"> Oracle Database JDBC Java API Reference </span></a>for more information about end-to-end metrics 
                  </p>
               </div>
            </div><a id="JJDBC28900"></a><div class="props_rev_3"><a id="GUID-6480E4BF-0412-46AA-973C-7EB0CAC58CA8" name="GUID-6480E4BF-0412-46AA-973C-7EB0CAC58CA8"></a><h3 id="JJDBC-GUID-6480E4BF-0412-46AA-973C-7EB0CAC58CA8" class="sect3"><span class="enumeration_section">36.1 </span>Overview of JDBC DMS Metrics
               </h3>
               <div>
                  <p>DMS metrics enable application and system developers to measure and export customized performance metrics for specific software components. All DMS metrics are available in the following DMS-enabled JAR files:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">ojdbc6dms.jar</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">ojdbc6dms_g.jar</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">ojdbc7dms.jar</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">ojdbc7dms_g.jar</code></p>
                     </li>
                  </ul>
                  <p>Any other JDBC JAR files do not generate any DMS metrics. The metrics generated in Oracle Database 12<span class="italic">c </span>Release 1 (12.1) are different from 10.2, 10.1, 9.2, and earlier versions of Oracle JDBC as it makes no attempt to retain compatibility with earlier versions. There are also no compatibility modes. A system that is dependent on the exact details of the DMS metrics generated by earlier versions of JDBC may have unexpected behavior when processing the metrics generated by Oracle JDBC 12<span class="italic">c</span>. This is by design and cannot be changed.
                  </p>
                  <p>Statement metrics can be reported consolidated for all statements in a connection or individually for each statement. All DMS metrics, except those related to individual statements, are enabled at all times.</p>
                  <div class="infoboxnote" id="GUID-6480E4BF-0412-46AA-973C-7EB0CAC58CA8__GUID-F5C84BE9-230B-4425-B99C-9BFE7FD8B76E">
                     <p class="notep1">Note:</p>
                     <p>You can enable or disable the <code class="codeph">SQLText</code> statement metric. It is disabled by default. If enabled, it is enabled for all statements.
                     </p>
                  </div>
               </div>
            </div><a id="JJDBC28901"></a><div class="props_rev_3"><a id="GUID-EFC7CADB-05FE-4A9C-9463-45BDFF8509F2" name="GUID-EFC7CADB-05FE-4A9C-9463-45BDFF8509F2"></a><h3 id="JJDBC-GUID-EFC7CADB-05FE-4A9C-9463-45BDFF8509F2" class="sect3"><span class="enumeration_section">36.2 </span>About Determining the Type of Metric to Be Generated
               </h3>
               <div>
                  <p>To determine whether to use consolidated or individual metrics, JDBC checks the DMSConsole sensor weight. If the sensor weight is less than or equal to <code class="codeph">DMSConsole.NORMAL</code>, then JDBC generates consolidated statement metrics. If the sensor weight is greater than <code class="codeph">DMSConsole.NORMAL</code>, then JDBC generates individual statement metrics.
                  </p>
                  <p>JDBC checks the DMSConsole sensor weight when creating a Prepared or Callable statement and depending on the sensor weight at the time the statement is created, the metrics are generated. Changing the value of the sensor weight, after the statement has been created, does not cause a statement to switch between consolidated and individual metrics. </p>
                  <div class="infoboxnote" id="GUID-EFC7CADB-05FE-4A9C-9463-45BDFF8509F2__GUID-26DCBEBC-BE7E-49EC-A4F9-E0FC9BA3929D">
                     <p class="notep1">Note:</p>
                     <p>In the presence of Statement caching, it may appear that changing sensor weight has no impact as statements are retrieved from the cache rather than created anew.</p>
                  </div>
                  <p>There is only one list of statement metrics that is generated for both consolidated and individual statement metrics. The only difference between these two lists is the aggregation of the statements. When individual statement metrics are generated, one set of metrics is generated for each distinct statement object created by the JDBC driver. On the other hand, when consolidated statement metrics are generated, all statements created by a given connection use the same set of statement metrics.</p>
                  <p>For example, consider an '<code class="codeph">execute</code>' phase event. If individual statement metrics are used, then each statement created will have a distinct '<code class="codeph">execute</code>' phase event. So, from two such statements, it will be possible to distinguish the execution statistics for the two separate statements. If one has an execution time of 1 second and the other an execution time of 3 seconds, then there will be two distinct 'execute' phase events, one with a total time and average of 1 second and the other with a total time and average of 3 seconds. But, if consolidated statement metrics are used, all statements will use the single '<code class="codeph">execute</code>' phase event common to the connection. So, from two such statements created by the same connection, it will not be possible to distinguish the execution statistics for the two statements. If one has an execution time of 1 second and the other an execution time of 3 seconds, then the common '<code class="codeph">execute</code>' phase event will report a total execution time of 4 seconds and an average of 2 seconds.
                  </p>
               </div>
            </div><a id="JJDBC28902"></a><div class="props_rev_3"><a id="GUID-6C1D625D-4797-46BC-95C9-E3E235E799EB" name="GUID-6C1D625D-4797-46BC-95C9-E3E235E799EB"></a><h3 id="JJDBC-GUID-6C1D625D-4797-46BC-95C9-E3E235E799EB" class="sect3"><span class="enumeration_section">36.3 </span>About Generating the SQLText Metric
               </h3>
               <div>
                  <p>Depending on the version of DMS, there are two mechanisms for determining the generating of the <code class="codeph">SQLText</code> statement metrics:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>If the 12<span class="italic">c</span> version of the DMS JAR file is present in the <code class="codeph">classpath</code> environment variable, then JDBC checks the DMS update SQL text flag. If this flag is <code class="codeph">true</code>, then the <code class="codeph">SQLText</code> metric is updated.
                        </p>
                     </li>
                     <li>
                        <p>If the 12<span class="italic">c</span> version of the DMS JAR file is not present in the <code class="codeph">classpath</code> environment variable, then JDBC uses the value of the <code class="codeph">DMSStatementMetrics</code> connection property. If this statement property is <code class="codeph">true</code>, then <code class="codeph">SQLText</code> metric is updated. The default value of this connection property is <code class="codeph">false</code>.
                        </p>
                     </li>
                  </ul>
                  <p>Whether or not the <code class="codeph">SQLText</code> metric will be generated is independent of the use of the type of statement metrics used, that is, individual statement metrics or consolidated statement metrics.
                  </p>
               </div>
            </div><a id="JJDBC28903"></a><div class="props_rev_3"><a id="GUID-C1C3B862-9D20-4A32-AD82-8C1AF893625B" name="GUID-C1C3B862-9D20-4A32-AD82-8C1AF893625B"></a><h3 id="JJDBC-GUID-C1C3B862-9D20-4A32-AD82-8C1AF893625B" class="sect3"><span class="enumeration_section">36.4 </span>About Accessing DMS Metrics Using JMX
               </h3>
               <div>
                  <p>JMX (Java Management Extensions) is a Java technology that supplies tools for managing and monitoring applications, system objects, devices, service-oriented networks, and the JVM (Java Virtual Machine). You can easily access DMS metrics at run time using a management application that supports JMX. For more information about using JMX to access DMS data, go to the following URL <a href="http://www.oracle.com/technetwork/middleware/toplink/overview/index.html" target="_blank"><code class="codeph">http://www.oracle.com/technetwork/middleware/toplink/overview/index.html</code></a></p>
                  <div class="infoboxnotealso" id="GUID-C1C3B862-9D20-4A32-AD82-8C1AF893625B__GUID-F68108C5-FC73-4121-988C-07A6AFBD3D6D">
                     <p class="notep1">See Also:</p>
                     <p><a href="../jjdev/using-JMX.html#JJDEV13114" target="_blank"><span class="italic">Oracle Database Java Developer's Guide</span></a> for more information about JMX
                     </p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
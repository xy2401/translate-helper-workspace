<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Configuring and administering Oracle Clusterware and its various components involves managing applications and databases, and networking within a cluster."></meta>
      <meta name="description" content="Configuring and administering Oracle Clusterware and its various components involves managing applications and databases, and networking within a cluster."></meta>
      <title>Oracle Clusterware配置和管理</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Clusterware Administration and Deployment Guide"></meta>
      <meta property="og:description" content="Configuring and administering Oracle Clusterware and its various components involves managing applications and databases, and networking within a cluster."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Clusterware Administration and Deployment Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="clusterware-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-24T07:05:38-07:00"></meta>
      <meta name="dcterms.title" content="Clusterware Administration and Deployment Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E95727-05"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="introduction-to-oracle-clusterware.html" title="Previous" type="text/html"></link>
      <link rel="next" href="policy-based-cluster-and-capacity-management.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="CWADD"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="introduction-to-oracle-clusterware.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="policy-based-cluster-and-capacity-management.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">“Clusterware管理和部署指南”</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle Clusterware配置和管理</li>
            </ol>
            <a id="GUID-4F3C2848-CBB7-4CC5-8480-ACA3152B1EA6" name="GUID-4F3C2848-CBB7-4CC5-8480-ACA3152B1EA6"></a><a id="CWADD838"></a>
            
            <h2 id="CWADD-GUID-4F3C2848-CBB7-4CC5-8480-ACA3152B1EA6" class="sect2"><span class="enumeration_chapter">2</span> Oracle Clusterware配置和管理</h2>
         </header>
         <div class="ind">
            <div>
               <p>配置和管理Oracle Clusterware及其各种组件涉及管理群集中的应用程序和数据库以及网络。</p>
               <p>您可以从配置和管理群集的两种方法中选择一种。您可以使用传统的管理员管理方法，手动管理群集资源和工作负载，也可以使用策略管理方法调用不同程度的自动化管理。</p>
               <p>管理员管理的群集要求您手动配置群集资源的部署方式以及管理工作负载的位置。通常，这意味着必须按优先级配置哪些数据库实例在哪些群集节点上运行，以及这些实例在发生故障时将重新启动的位置。通过配置数据库实例所在的位置，可以跨群集配置工作负载。</p>
               <p>使用策略管理的群集，可以将工作负载配置为在服务器池中运行，您可以为其配置策略集以指示在每个服务器池中管理这些工作负载的方式。您可以管理服务器池和策略集，将数据库实例位置和工作负载放置的详细信息留给它们已设置的策略。在使用此方法时，您可以使用Oracle Quality of Service Management（Oracle QoS Management）进一步自动化集群管理。</p>
            </div>
            <div class="sect2"><a id="GUID-CAD9DDFE-1B4E-41BB-8029-3E9578639BD6" name="GUID-CAD9DDFE-1B4E-41BB-8029-3E9578639BD6"></a><h3 id="CWADD-GUID-CAD9DDFE-1B4E-41BB-8029-3E9578639BD6" class="sect3">角色分离管理</h3>
               <div>
                  <p>角色分离管理是一种以协调的方式管理集群资源和工作负载的方法，以减少资源冲突和短缺的风险。</p>
                  <p>角色分离管理使用操作系统安全性和角色定义，以及Oracle Clusterware访问权限，根据用户的角色分离资源和工作负载管理。这对于在整合环境中工作的人来说尤其重要，因为在整合的环境中可能存在对计算资源的竞争，并且资源消费者和这些资源的管理需要一定程度的隔离。默认情况下，安装期间未实现此功能。</p>
                  <p>配置角色分离管理包括根据预期角色建立将管理群集资源（如数据库）的操作系统用户和组，通过访问控制列表（ACL）添加群集资源和服务器池的权限，有必要的。此外，Oracle自动存储管理（Oracle ASM）提供了将这些角色分离构造扩展到存储管理功能的功能。</p>
                  <p>角色分离管理原则同样适用于管理员管理和策略管理系统。在管理员管理的情况下，您可以配置群集资源和角色以在节点级别管理它们，而对于策略管理的系统，您可以配置群集资源和角色以在服务器池中管理它们。</p>
                  <p>Oracle Clusterware中的角色分离管理不再依赖于<a href="glossary.html#GUID-D5384AF5-5F2B-4438-9632-EB90EB3ED167"><span class="xrefglossterm">集群管理员</span></a> （尽管Oracle保持向后兼容性）。默认情况下，在Oracle Grid Infrastructure主目录（Grid home）和<code class="codeph">root</code>中安装Oracle Clusterware的用户是<span class="italic">永久</span>集群管理员。主组权限（默认情况下为<code class="codeph">oinstall</code> ）使数据库管理员能够使用Database Configuration Assistant（DBCA）在新创建的服务器池中创建数据库，但不启用角色分离。
                  </p>
                  <div class="infoboxnote" id="GUID-CAD9DDFE-1B4E-41BB-8029-3E9578639BD6__GUID-F055FACE-172D-4E60-9703-5A920B08F08A">
                     <p class="notep1">注意：</p>
                     <p>Oracle建议您在群集中创建第一个服务器池之前启用角色分离。使用配置策略和相应的策略集创建和管理服务器池。在<code class="codeph">ACL</code>属性中为每个服务器池存储访问权限，如<a href="policy-based-cluster-and-capacity-management.html#GUID-E5103867-6683-4D5C-9343-1F1F2522FEF3__CHDCIEJJ" title="此表列出并描述了服务器池属性。">表3-1中所述</a> 。
                     </p>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="policy-based-cluster-and-capacity-management.html#GUID-7FBE1007-3BA0-4DE5-A993-358E3423721B" title="群集配置策略是一个文档，其中只包含群集配置策略集管理的每个服务器池的一个定义。群集配置策略集是一个文档，用于定义为群集配置的所有服务器池的名称以及所有策略的定义。">群集配置策略和策略集概述</a></li>
                     </ul>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-53EAAAAC-0AE7-4DFC-B564-3704B3A824C3" name="GUID-53EAAAAC-0AE7-4DFC-B564-3704B3A824C3"></a><h4 id="CWADD-GUID-53EAAAAC-0AE7-4DFC-B564-3704B3A824C3" class="sect4">管理群集管理员</h4>
                  <div>
                     <p>您使用访问控制列表（ACL）来定义群集的管理员。</p>
                     <div class="section">
                        <p>在群集中创建服务器池的能力仅限于群集管理员。在以前的版本中，默认情况下，每个注册的操作系统用户都被视为集群管理员，如果需要，可以使用<code class="codeph">crsctl add | delete crs administrator</code>更改默认值<code class="codeph">crsctl add | delete crs administrator</code>命令。但是，在此版本中不推荐使用这些命令，而应使用策略集的ACL来控制创建服务器池的能力。
                        </p>
                        <p>通常，要获得创建服务器池或群集资源的权限，操作系统用户或用户所属的操作系统组必须具有<code class="codeph">ACL</code>属性中设置的读取，写入和执行权限。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-8E70F669-69A9-4794-B6E9-A7E0790AE4D7" name="GUID-8E70F669-69A9-4794-B6E9-A7E0790AE4D7"></a><h4 id="CWADD-GUID-8E70F669-69A9-4794-B6E9-A7E0790AE4D7" class="sect4">配置角色分离</h4>
                  <div>
                     <p>角色分离是确定所需的角色，它们将管理的资源和服务器池以及它们的访问权限。确定后，然后使用ACL和CRSCTL实用程序创建或修改组权限（例如<code class="codeph">oinstall</code>或<code class="codeph">grid</code> ）的操作系统用户帐户。
                     </p>
                     <div class="section">
                        <p>最基本的情况是创建两个操作系统用户作为<code class="codeph">oinstall</code>组的一部分，然后创建集群和两个服务器池。对于每个服务器池，指定一个操作系统用户来管理该服务器池，并从除该对服务器池的读访问权以外的所有其他用户中排除其他任何用户。
                        </p>
                        <p>这需要仔细规划，遵循规范，注重细节的执行，但您可以在实施后修改配置，纠正错误或随着时间的推移进行调整。</p>
                        <div class="infoboxnote" id="GUID-8E70F669-69A9-4794-B6E9-A7E0790AE4D7__GUID-A69E5F4A-28E2-4DC7-8D14-505A08B956A5">
                           <p class="notep1">注意：</p>您不能将角色分离技术应用于ora。*资源（Oracle RAC数据库资源）。您只能将这些技术应用于服务器池和用户定义的群集资源和类型。
                        </div>
                        <p>您可以在<code class="codeph">root</code>帐户或<code class="codeph">grid</code>帐户下创建服务器池或资源。为了使指定的操作系统用户能够管理这些服务器池或资源，必须为他们提供正确的权限，使他们能够履行其角色。
                        </p>
                        <p>使用<code class="codeph">crsctl setperm</code>命令可以使用分配给服务器池，资源或两者的ACL配置水平角色分离。CRSCTL实用程序位于<code class="codeph"><span class="variable" translate="no">Grid_home</span></code> <code class="codeph">/bin</code>路径中，其中<code class="codeph"><span class="variable" translate="no">Grid_home</span></code>是群集主<code class="codeph"><span class="variable" translate="no">Grid_home</span></code>的Oracle Grid Infrastructure。
                        </p>
                        <p>该命令使用以下语法，其中访问控制（ACL）字符串由斜体表示：</p><pre class="pre codeblock"><code>crsctl setperm {资源|类型| serverpool} <span class="variable" translate="no">name</span> {-u <span class="variable" translate="no">acl_string</span> | -x <span class="variable" translate="no">acl_string</span> | -o <span class="variable" translate="no">user_name</span> | -g <span class="variable" translate="no">group_name</span> }</code></pre><p>标志选项是：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">-u</code> ：更新实体ACL</p>
                           </li>
                           <li>
                              <p><code class="codeph">-x</code> ：删除实体ACL</p>
                           </li>
                           <li>
                              <p><code class="codeph">-o</code> ：更改实体所有者</p>
                           </li>
                           <li>
                              <p><code class="codeph">-g</code> ：更改实体主组</p>
                           </li>
                        </ul>
                        <p>ACL字符串是：</p><pre class="pre codeblock"><code>{user： <span class="variable" translate="no">user_name</span> [： <span class="variable" translate="no">readPerm</span> <span class="variable" translate="no">writePerm</span> <span class="variable" translate="no">execPerm</span> ] | group： <span class="variable" translate="no">group_name</span> [： <span class="variable" translate="no">readPerm</span> <span class="variable" translate="no">writePerm</span> <span class="variable" translate="no">execPerm</span> ] |其他[:: <span class="variable" translate="no">readPerm</span> <span class="variable" translate="no">writePerm</span> <span class="variable" translate="no">execPerm</span> ]}</code></pre><p>在前面的语法示例中：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">user</code> ：指定用户ACL（授予指定用户的访问权限）</p>
                           </li>
                           <li>
                              <p><code class="codeph">group</code> ：指定组ACL（授予指定组成员的权限）</p>
                           </li>
                           <li>
                              <p><code class="codeph">other</code> ：指定其他ACL（授予未授予特定访问权限的用户或组的访问权限）</p>
                           </li>
                           <li>
                              <p><code class="codeph"><span class="variable" translate="no">readperm</span></code> ：读取权限的位置（ <code class="codeph">r</code>授予权限，“ <code class="codeph">-</code> ”禁止权限）</p>
                           </li>
                           <li>
                              <p><code class="codeph"><span class="variable" translate="no">writeperm</span></code> ：写入权限的位置（ <code class="codeph">w</code>授予权限，“ <code class="codeph">-</code> ”禁止权限）</p>
                           </li>
                           <li>
                              <p><code class="codeph"><span class="variable" translate="no">execperm</span></code> ：执行权限的位置（ <code class="codeph">x</code>授予权限，“ <code class="codeph">-</code> ”禁止权限）</p>
                           </li>
                        </ul>
                        <p>例如，要为组<code class="codeph">personnel</code>设置名为<code class="codeph">psft</code>的服务器池的权限，其中管理用户具有读/写/执行权限， <code class="codeph">personnel</code>组的成员具有读/写权限，并且组外的用户不被授予访问，以<code class="codeph">root</code>用户身份输入以下命令：</p><pre class="pre codeblock"><code>#crsctl setperm serverpool psft -u user：personadmin：rwx，group：personnel：rw-，other :: ---</code></pre><p>对于群集资源，要为组<code class="codeph">crsadmin</code>设置名为<code class="codeph">MyProgram</code> （由<code class="codeph">Maynard</code>管理）的应用程序（资源）的权限，其中管理用户具有读取，写入和执行权限， <code class="codeph">crsadmin</code>组的成员具有读取和执行权限，并且组外的用户仅被授予读访问权限（用于状态和配置检查），请输入以下命令，作为最初创建资源的用户（ <code class="codeph">root</code>或<code class="codeph">grid</code>所有者）：</p><pre class="pre codeblock"><code>#crsctl setperm resource MyProgram -u user：Maynard：rx，group：crsadmin：rw-，other：---：r--</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-9C074F34-F180-4200-A99B-72186DAB56E1" title="每个INSTANCE_COUNT个资源实例的整数不同。资源组属性，包含标记为资源组关键的资源列表。描述了SERVER_POOLS资源属性。属于资源组的资源列表。当资源添加到组时，Oracle Clusterware会填充和更新此属性。">Oracle Clusterware资源参考</a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="CWADD92094"></a><div class="props_rev_3"><a id="GUID-780155B8-D379-4800-924B-3C366184220A" name="GUID-780155B8-D379-4800-924B-3C366184220A"></a><h3 id="CWADD-GUID-780155B8-D379-4800-924B-3C366184220A" class="sect3">使用网格安装向导配置Oracle Grid Infrastructure</h3>
               <div>
                  <p>使用配置向导，您可以在一个或多个节点上配置新的Oracle Grid Infrastructure，或配置升级的Oracle Grid Infrastructure。您还可以在静默模式下运行网格设置向导。</p>
                  <p>执行Oracle Grid Infrastructure的纯软件安装后，您可以使用网格安装向导配置软件。此向导在您运行向导之前和之后执行Grid home和输入的各种验证。</p>
                  <div class="infoboxnote" id="GUID-780155B8-D379-4800-924B-3C366184220A__GUID-FF5B3609-C10C-4188-AFEB-F748715E747F">
                     <p class="notep1">注意：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>在运行网格设置向导之前，请确保Oracle Grid Infrastructure主页是最新的，并应用了所有必需的修补程序。</p>
                        </li>
                        <li>
                           <p>要在后续过程中启动Grid Setup Wizard：</p>
                           <p>在Linux和UNIX上，运行以下命令：</p><pre class="pre codeblock"><code><span class="variable" translate="no">Oracle_home</span> /gridSetup.sh</code></pre><p>在Windows上，运行以下命令：</p><pre class="pre codeblock"><code><span class="variable" translate="no">Oracle_home</span> \ gridSetup.bat</code></pre></li>
                     </ul>
                  </div>
               </div><a id="CWADD92095"></a><div class="props_rev_3"><a id="GUID-1075A40B-E26B-4925-9BD0-DF05EBEE8310" name="GUID-1075A40B-E26B-4925-9BD0-DF05EBEE8310"></a><h4 id="CWADD-GUID-1075A40B-E26B-4925-9BD0-DF05EBEE8310" class="sect4">配置单个节点</h4>
                  <div>
                     <p>您可以使用配置向导配置单个节点。</p>
                     <div class="section">
                        <p>要配置单个节点：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>启动配置向导，如下所示：</span><div><pre class="oac_no_warn" dir="ltr">$ <span class="italic">Oracle_home</span> /gridSetup.sh</pre></div>
                        </li>
                        <li class="stepexpand"><span>在“选择安装选项”页面上，选择“ <span class="bold">为群集配置Oracle Grid Infrastructure”</span> 。</span></li>
                        <li class="stepexpand"><span>在Cluster Node Information页面上，仅选择本地节点和相应的VIP名称。</span></li>
                        <li class="stepexpand"><span>继续在剩余的向导页面上添加您的信息。</span></li>
                        <li class="stepexpand"><span>在Summary页面上查看输入，然后单击<span class="bold">Finish</span> 。</span></li>
                        <li class="stepexpand"><span>按照配置向导的指示运行<code class="codeph">root.sh</code>脚本。</span></li>
                     </ol>
                  </div>
               </div><a id="CWADD92096"></a><div class="props_rev_3"><a id="GUID-1AF2D413-D25C-4B22-9BBC-3B81AB4D1C56" name="GUID-1AF2D413-D25C-4B22-9BBC-3B81AB4D1C56"></a><h4 id="CWADD-GUID-1AF2D413-D25C-4B22-9BBC-3B81AB4D1C56" class="sect4">配置多个节点</h4>
                  <div>
                     <p>您可以使用配置向导配置群集中的多个节点。</p>
                     <div class="section">
                        <p>没有必要在要使用配置向导配置的节点上安装Oracle Grid Infrastructure软件。</p>
                        <div class="infoboxnote" id="GUID-1AF2D413-D25C-4B22-9BBC-3B81AB4D1C56__GUID-C9F77BB7-612C-4137-B5BB-B11E7A017EFE">
                           <p class="notep1">注意：</p>
                           <p>在启动配置向导之前，请确保以下内容：</p>
                           <p>虽然不需要在所有节点上安装软件，但如果安装了该软件，则必须将软件安装在同一<code class="codeph"><span class="variable" translate="no">Grid_home</span></code>路径中并且在所有节点上处于相同级别。
                           </p>
                        </div>
                        <p>要使用配置向导配置多个节点：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>启动配置向导，如下所示：</span><div><pre class="oac_no_warn" dir="ltr">$ <span class="italic">Oracle_home</span> /gridSetup.sh</pre></div>
                        </li>
                        <li class="stepexpand"><span>在“选择安装选项”页面上，选择“ <span class="bold">为群集配置Oracle Grid Infrastructure”</span> 。</span></li>
                        <li class="stepexpand"><span>在Cluster Node Information页面上，选择要配置的节点及其对应的VIP名称。配置向导验证您选择的节点以确保它们已准备就绪。</span></li>
                        <li class="stepexpand"><span>继续在剩余的向导页面上添加您的信息。</span></li>
                        <li class="stepexpand"><span>在Summary页面上查看输入，然后单击<span class="bold">Finish</span> 。</span></li>
                        <li class="stepexpand"><span>按照配置向导的指示运行<code class="codeph">root.sh</code>脚本。</span></li>
                     </ol>
                  </div>
               </div><a id="CWADD92097"></a><div class="props_rev_3"><a id="GUID-5AF3CECC-0556-4844-B28F-A93E178F72CE" name="GUID-5AF3CECC-0556-4844-B28F-A93E178F72CE"></a><h4 id="CWADD-GUID-5AF3CECC-0556-4844-B28F-A93E178F72CE" class="sect4">升级Oracle Grid Infrastructure</h4>
                  <div>
                     <p>您使用网格安装向导升级群集的Oracle Grid Infrastructure。</p>
                     <div class="section">
                        <p>要为群集使用升级Oracle Grid Infrastructure，请执行以下操作：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>启动网格安装向导：</span><div><pre class="pre codeblock"><code>$ <span class="variable" translate="no">Oracle_home</span> /gridSetup.sh</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>在“选择安装选项”页面上，选择“ <span class="bold">升级Oracle Grid Infrastructure”</span> 。</span></li>
                        <li class="stepexpand"><span>在Oracle Grid Infrastructure节点选择页面上，查看要升级的节点。此外，您可以选择不升级已关闭的节点。</span></li>
                        <li class="stepexpand"><span>继续在剩余的向导页面上添加您的信息。</span></li>
                        <li class="stepexpand"><span>在Summary页面上查看输入，然后单击<span class="bold">Finish</span> 。</span></li>
                        <li class="stepexpand"><span>按照配置向导的指示运行<code class="codeph">rootupgrade.sh</code>脚本。</span></li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle数据库安装指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-5AF3CECC-0556-4844-B28F-A93E178F72CE__GUID-73B9B3B7-A0F5-4A31-9410-20C4F0381425">
                        <p class="notep1">也可以看看：</p>
                        <p>适用于您的Oracle平台的<span><cite>Oracle数据库安装指南</cite></span>重新启动过程</p>
                     </div>
                  </div>
               </div><a id="CWADD92098"></a><div class="props_rev_3"><a id="GUID-48000840-68BA-4BCF-9A74-D5C18D77013F" name="GUID-48000840-68BA-4BCF-9A74-D5C18D77013F"></a><h4 id="CWADD-GUID-48000840-68BA-4BCF-9A74-D5C18D77013F" class="sect4">以静默模式运行配置向导</h4>
                  <div>
                     <p>您可以通过指定-silent参数以静默方式运行配置向导。</p>
                     <div class="section">
                        <p>要以静默方式使用配置向导来配置或升级节点：</p>
                        <ol>
                           <li>
                              <p>从命令行启动配置向导，如下所示：</p><pre class="pre codeblock"><code>$ <span class="variable" translate="no">$ORACLE_HOME</span> /gridSetup.sh -silent -responseFile <span class="variable" translate="no">file_name</span></code></pre><p>配置向导验证响应文件并继续配置。如果发现响应文件中的任何输入无效，则配置向导会显示错误并退出。</p>
                           </li>
                           <li>
                              <p>根据提示运行<code class="codeph">root</code>和<code class="codeph"><span class="variable" translate="no">Grid_home</span> /gridSetup -executeConfigTools</code>脚本。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-3C3E0790-166E-4D94-B008-AEF8458FAF60" name="GUID-3C3E0790-166E-4D94-B008-AEF8458FAF60"></a><h3 id="CWADD-GUID-3C3E0790-166E-4D94-B008-AEF8458FAF60" class="sect3">基于服务器权重的节点驱逐</h3>
               <div>
                  <p>您可以配置Oracle Clusterware故障恢复机制，以选择在专用网络（群集互连）发生故障时终止或退出的群集节点。</p>
                  <p>在分裂脑情况下，群集经历网络分裂，将群集划分为不相交的群组，Oracle Clusterware会应用某些规则来选择幸存的群组，从而可能驱逐正在运行关键单例资源的节点。</p>
                  <p>您可以通过向数据库实例或节点添加值来影响这些决策的结果，这样，当Oracle Clusterware必须决定是否逐出或终止时，它将考虑这些因素并尝试确保所有关键组件保持可用。您可以配置权重函数以增加群集中关键组件的权重，从而在决定在解决裂脑情况时要驱逐哪些节点时为Oracle Clusterware添加输入。</p>
                  <p>您可能希望确保特定节点在打破平局过程中幸存，可能是因为某些硬件特征，或某些资源存在，可能是因为特定的数据库或服务。您可以根据以下条件为特定节点，资源或服务分配权重：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>您只能为管理员管理的节点分配权重。</p>
                     </li>
                     <li>
                        <p>您可以为已注册的Oracle Clusterware资源的服务器或应用程序分配权重。</p>
                     </li>
                  </ul>
                  <p>权重会影响组件的重要性，并影响Oracle Clusterware在管理裂脑情况时所做的选择。由于各个群组之间的其他关键因素相同，Oracle Clusterware选择最重的群组来生存。</p>
                  <p>您可以为各种组件分配权重，如下所示：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>要为数据库实例或服务分配权重，请在添加数据库实例或服务时将<code class="codeph">-css_critical yes</code>参数与<code class="codeph">srvctl add database</code>或<code class="codeph">srvctl add service</code>命令一起使用。您还可以将该参数与<code class="codeph">srvctl modify database</code>和<code class="codeph">srvctl modify service</code>命令一起使用。
                        </p>
                     </li>
                     <li>
                        <p>要为非<span class="italic">ora。*</span>资源分配权重，请在添加或修改资源时将<code class="codeph">-attr "CSS_CRITICAL=yes"</code>参数与<code class="codeph">crsctl add resource</code>和<code class="codeph">crsctl modify resource</code>命令配合使用。
                        </p>
                     </li>
                     <li>
                        <p>要为服务器分配权重，请在<code class="codeph">crsctl set server</code>命令中使用<code class="codeph">-css_critical yes</code>参数。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-3C3E0790-166E-4D94-B008-AEF8458FAF60__GUID-A115B096-452D-439A-91C4-725AA36C8AE8">
                     <p class="notep1">注意：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>必须在节点上重新启动Oracle Clusterware堆栈才能使值生效。这不适用于更改生效而无需重新启动资源的资源。</p>
                        </li>
                        <li>
                           <p>如果您将环境从管理员管理更改为策略管理，或两者混合，则会存储您分配的任何权重，但不会被考虑，这意味着它将不再适用或被考虑，除非您重新配置群集回到管理员管理。</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-0E5D04E9-CE2E-4937-B4B3-27CE608E8F01" name="GUID-0E5D04E9-CE2E-4937-B4B3-27CE608E8F01"></a><h3 id="CWADD-GUID-0E5D04E9-CE2E-4937-B4B3-27CE608E8F01" class="sect3">Oracle数据库服务质量管理概述</h3>
               <div>
                  <p>Oracle数据库服务质量管理（Oracle数据库QoS管理）是一种基于策略的自动化产品，可监控整个系统的工作负载请求。</p>
                  <p>Oracle数据库QoS管理管理跨应用程序共享的资源，并调整系统配置以使应用程序以业务所需的性能级别运行。Oracle数据库QoS管理可以优雅地响应系统配置和需求的变化，从而避免应用程序性能级别的额外振荡。</p>
                  <p>Oracle数据库QoS管理通过识别影响这些目标的瓶颈资源来监视和管理Oracle RAC数据库工作负载性能目标，并建议并采取措施来恢复性能。管理员管理的部署将数据库实例绑定到节点，但策略管理的部署不绑定，因此Oracle数据库QoS管理服务器池大小资源控制仅适用于后者。所有其他资源管理控件都可用于两个部署。</p>
                  <p>Oracle数据库QoS管理支持管理员管理的Oracle RAC和Oracle RAC One Node数据库及其仅测量，监控和管理模式。通过调整数据库中运行的性能类的CPU份额，可以在管理员管理的Oracle RAC数据库中启用架构合并支持。此外，通过调整托管在相同物理服务器上的数据库的CPU计数来支持数据库合并。</p>
                  <p>由于管理员管理的数据库不在服务器池中运行，因此管理员管理的数据库无法通过更改策略管理的数据库部署中支持的服务器池大小来扩展或缩减实例数。此新部署支持已集成到Oracle Enterprise Manager Cloud Control中的Oracle QoS Management页面中。</p>
               </div>
            </div><a id="CWADD92403"></a><div class="props_rev_3"><a id="GUID-D893FBA6-4C66-4BEE-B373-F158F2D86341" name="GUID-D893FBA6-4C66-4BEE-B373-F158F2D86341"></a><h3 id="CWADD-GUID-D893FBA6-4C66-4BEE-B373-F158F2D86341" class="sect3">网格命名服务概述</h3>
               <div>
                  <p>Oracle Clusterware使用网格命名服务（GNS）在单集群或多集群环境中进行地址解析。您可以使用单个主GNS实例配置群集，还可以配置一个或多个具有不同角色的辅助GNS实例，以便为客户端提供高可用性地址查找和其他服务。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-B5DB09B4-6B8A-4EE5-B947-E893CB5FA3CE" title="要实施GNS，您的网络管理员必须配置DNS以为群集设置域，并将该域的解析权委托给GNS VIP。您可以使用单独的域，也可以为群集创建现有域的子域。">GNS和GNS虚拟IP地址的网络管理任务</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-8865E441-9016-4336-AE0E-C1CAA81E1627" title="GNS可以在自动或标准群集地址配置模式下运行。自动配置使用IPv4地址的动态主机配置协议（DHCP）或IPv6地址的无状态地址自动配置协议（autoconfig）（RFC 2462和RFC 4862）。">了解网格命名服务配置选项</a></p>
                     </li>
                  </ul>
               </div><a id="CWADD92092"></a><a id="CWADD92595"></a><div class="props_rev_3"><a id="GUID-B5DB09B4-6B8A-4EE5-B947-E893CB5FA3CE" name="GUID-B5DB09B4-6B8A-4EE5-B947-E893CB5FA3CE"></a><h4 id="CWADD-GUID-B5DB09B4-6B8A-4EE5-B947-E893CB5FA3CE" class="sect4">GNS和GNS虚拟IP地址的网络管理任务</h4>
                  <div>
                     <p>要实施GNS，您的网络管理员必须配置DNS以为群集设置域，并将该域的解析权委托给GNS VIP。您可以使用单独的域，也可以为群集创建现有域的子域。</p>
                     <p>GNS通过使用群集名称和单个节点标识符作为该群集节点的主机名的一部分来区分节点，使得群集A中的群集节点123可以与群集B中的群集节点123区分开。</p>
                     <p>但是，如果手动配置主机名，则委派给GNS的子域应该没有子域。例如，如果您将子域<code class="codeph">mydomain.example.com</code>委派给GNS进行解析，则不应该有其他<code class="codeph">other.mydomain.example.com</code>域。Oracle建议您将子域委托给GNS专门使用的GNS。
                     </p>
                     <div class="infoboxnote" id="GUID-B5DB09B4-6B8A-4EE5-B947-E893CB5FA3CE__GUID-742D3A69-6E75-4787-A25B-0C2CD257F4D8">
                        <p class="notep1">注意：</p>
                        <p>您可以在没有DNS委派的情况下使用GNS进行静态寻址的配置，例如Oracle Flex ASM或Oracle Flex Clusters。但是，如果使用DHCP分配地址，GNS要求将域委派给它。</p>
                     </div>
                     <p><a href="oracle-clusterware-administration.html#GUID-B5DB09B4-6B8A-4EE5-B947-E893CB5FA3CE__BABDHIHG">示例2-1</a>显示了将名为<code class="codeph">myclustergns.example.com</code>的域委派给GNS VIP地址<code class="codeph">10.9.8.7</code>所需的DNS条目。
                     </p>
                     <p>GNS守护程序和GNS VIP在服务器群集中的一个节点上运行。GNS守护程序使用端口53侦听GNS VIP以获取DNS请求。Oracle Clusterware管理GNS守护程序和GNS VIP，以确保它们始终可用。如果运行GNS守护程序的服务器出现故障，则Oracle Clusterware会将GNS守护程序和GNS VIP故障转移到正常运行的集群成员节点。如果群集是Oracle Flex Cluster配置，则Oracle Clusterware会将GNS守护程序和GNS VIP故障转移到集线器节点。</p>
                     <div class="infoboxnote" id="GUID-B5DB09B4-6B8A-4EE5-B947-E893CB5FA3CE__GUID-8F5460D7-B8F3-450F-8C65-55C3A279EFE3">
                        <p class="notep1">注意：</p>
                        <p>Oracle Clusterware不会将GNS地址故障转移到不同的群集。故障转移仅发生在同一群集的成员中。</p>
                     </div>
                     <div class="example" id="GUID-B5DB09B4-6B8A-4EE5-B947-E893CB5FA3CE__BABDHIHG">
                        <p class="titleinexample">示例2-1 DNS条目</p><pre class="oac_no_warn" dir="ltr">＃委托mycluster上的gns mycluster.example.com NS myclustergns.example.com＃让世界知道去GNS vip myclustergns.example.com。10.9.8.7</pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure安装和升级指南</cite></span></a></li>
                           <li><a href="oracle-flex-clusters.html#GUID-DF441DD8-B3B4-48C2-96B5-3DD59EAAC8EF" title="Oracle Flex Cluster将Oracle Clusterware扩展为大量节点。">Oracle Flex集群</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD92596"></a><div class="props_rev_3"><a id="GUID-8865E441-9016-4336-AE0E-C1CAA81E1627" name="GUID-8865E441-9016-4336-AE0E-C1CAA81E1627"></a><h4 id="CWADD-GUID-8865E441-9016-4336-AE0E-C1CAA81E1627" class="sect4">了解网格命名服务配置选项</h4>
                  <div>
                     <p>GNS可以在<span class="italic">自动</span>或<span class="italic">标准</span>群集地址配置模式下运行。自动配置使用IPv4地址的动态主机配置协议（DHCP）或IPv6地址的无状态地址自动配置协议（autoconfig）（RFC 2462和RFC 4862）。
                     </p>
                     <p>本节包括以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-97AAD3BF-F495-4285-81AF-D7DE24367203" title="高可用性GNS由一个主要GNS实例和零个或多个辅助GNS实例组成。">高度可用的网格命名服务</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-FBBB6C1A-F0F3-42CB-BF72-9B65BC34753B" title="通过自动配置，DNS管理员委派DNS上的域以通过GNS子域进行解析。在安装期间，Oracle Universal Installer会为安装或配置期间为Oracle Grid Infrastructure指定的每个集群成员节点接口分配名称。SCAN和所有其他群集名称和地址在群集内解析，而不是在DNS上解析。">地址的自动配置选项</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-04FC86E4-85B7-4D14-8912-C5BF76361D70" title="使用静态配置时，不会委派子域。DNS管理员将GNS VIP配置为解析为DNS上配置的名称和地址，DNS管理员配置SCAN名称以解析为群集的三个静态地址。">地址的静态配置选项</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-2DAF18B6-9388-4CD1-81CD-85626817F48A" title="通过动态配置，您可以将GNS配置为为一个群集提供名称解析，或者为多个群集通告解决方案，以便单个GNS实例可以为多个已注册的群集执行名称解析。此选项称为共享GNS。">用于地址的共享GNS选项</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="sect4"><a id="GUID-97AAD3BF-F495-4285-81AF-D7DE24367203" name="GUID-97AAD3BF-F495-4285-81AF-D7DE24367203"></a><h5 id="CWADD-GUID-97AAD3BF-F495-4285-81AF-D7DE24367203" class="sect5">高度可用的网格命名服务</h5>
                     <div>
                        <p>高可用性GNS由一个主要GNS实例和零个或多个辅助GNS实例组成。</p>
                        <p>主GNS实例为来自客户端的所有更新提供服务，而主GNS实例和辅助GNS实例都处理查找查询。此外，辅助GNS实例充当主GNS实例的备份。只要现有主GNS实例发生故障或由集群管理员删除，辅助GNS实例就可以升级为主要角色。</p>
                        <p>此外，高可用性GNS通过使用区域传输在辅助GNS实例上进行数据备份来提供容错。辅助GNS实例在安装期间从主GNS实例获取数据副本。此后，主GNS实例上的任何更新都会复制到辅助GNS实例。</p>
                        <p>主GNS实例管理<a href="glossary.html#GUID-1AFD7E5D-D994-46F4-9667-C483D6751CB8"><span class="xrefglossterm">区域数据</span></a>并保存委派域上的所有记录。它将区域数据及其更改历史记录存储在Oracle Cluster Registry（OCR）中。更新辅助GNS实例上的区域数据涉及区域传输，可以是以下两种方法之一：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">完整区域传输</span> ：主GNS实例将所有区域数据复制到辅助GNS实例。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">增量区域传输</span> ：主GNS实例仅将更改的数据复制到辅助GNS实例。GNS将此传输机制用于以下场景：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>当主GNS实例中的区域数据发生更新时，实例会通知辅助实例启动数据传输。仅当主GNS实例的OCR中的数据的序列号大于辅GNS实例的数据的序列号时，辅助GNS实例才会请求数据传输。</p>
                                 </li>
                                 <li>
                                    <p>当辅助GNS实例的刷新时间到期时，实例将包含其数据序列号的查询发送到主GNS实例。如果辅助GNS实例的序列号小于主GNS实例的序列号，则GNS启动区域转移。</p>
                                    <div class="infoboxnote" id="GUID-97AAD3BF-F495-4285-81AF-D7DE24367203__GUID-86C4BEFF-7E56-43ED-91FE-60FEB173F86B">
                                       <p class="notep1">注意：</p>刷新时间必须足够长，以减少主GNS实例的负载，以便应答辅助GNS实例不会阻止主实例运行。默认刷新时间为一小时，但群集管理员可以根据群集大小更改此值。
                                    </div>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <p>在配置任何辅助节点之前，必须配置主GNS实例。成功配置主GNS实例后，将导出客户端和辅助GNS实例的客户端数据。您在配置辅助GNS实例时提供导出的客户端数据。所有辅助GNS实例都将自己注册到主GNS实例，并获取区域数据的副本。当辅助GNS实例的刷新时间到期或响应通知时，辅助GNS实例使用区域传输机制联系主GNS实例以进行数据更新。</p>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="oracle-clusterware-administration.html#GUID-51DE77F3-6CC0-431D-81EB-2FB28AF36007" title="配置高可用性GNS涉及配置主GNS实例和辅助GNS实例。您可以在使用Oracle Universal Installer安装Oracle Clusterware期间配置GNS，但只能在安装Oracle Clusterware后配置高可用性GNS，因为您只能在安装Oracle Clusterware后配置辅助GNS实例。">配置高可用性GNS</a></li>
                              <li><a href="oracle-clusterware-administration.html#GUID-BD1C8576-9749-4215-BD2A-2A20913F34F3" title="您可以从群集中删除主GNS实例和辅助GNS实例。">删除主要和辅助GNS实例</a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CWADD92597"></a><div class="props_rev_3"><a id="GUID-FBBB6C1A-F0F3-42CB-BF72-9B65BC34753B" name="GUID-FBBB6C1A-F0F3-42CB-BF72-9B65BC34753B"></a><h5 id="CWADD-GUID-FBBB6C1A-F0F3-42CB-BF72-9B65BC34753B" class="sect5">地址的自动配置选项</h5>
                     <div>
                        <p>通过自动配置，DNS管理员委派DNS上的域以通过GNS子域进行解析。在安装期间，Oracle Universal Installer会为安装或配置期间为Oracle Grid Infrastructure指定的每个集群成员节点接口分配名称。SCAN和所有其他群集名称和地址在群集内解析，而不是在DNS上解析。</p>
                        <p><a id="d13771e2688" class="indexterm-anchor"></a><a id="d13771e2690" class="indexterm-anchor"></a><a id="d13771e2692" class="indexterm-anchor"></a>自动配置以下列方式之一进行：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>对于IPv4地址，Oracle Clusterware为为Oracle Grid Infrastructure分配的每个集群成员节点接口分配唯一标识符，并在委派给GNS的子域中使用这些标识符生成名称。 DHCP服务器为这些接口分配地址，GNS维护与IPv4 DHCP池租用的IPv4地址的地址和名称关联。</p>
                           </li>
                           <li>
                              <p>对于IPv6地址，Oracle Clusterware会自动使用autoconfig生成地址。</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="CWADD92598"></a><div class="props_rev_3"><a id="GUID-04FC86E4-85B7-4D14-8912-C5BF76361D70" name="GUID-04FC86E4-85B7-4D14-8912-C5BF76361D70"></a><h5 id="CWADD-GUID-04FC86E4-85B7-4D14-8912-C5BF76361D70" class="sect5">地址的静态配置选项</h5>
                     <div>
                        <p>使用静态配置时，不会委派子域。DNS管理员将GNS VIP配置为解析为DNS上配置的名称和地址，DNS管理员配置SCAN名称以解析为群集的三个静态地址。</p>
                        <p>DNS管理员还为每个集群成员节点配置静态公共IP名称和地址以及虚拟IP名称和地址。DNS管理员还必须为添加到群集的每个节点配置新的公共和虚拟IP名称和地址。所有名称和地址均由DNS解析。</p>
                        <p>没有使用静态VIP地址和SCAN的子域委派的GNS可以实现需要群集中的名称解析信息的Oracle Flex Cluster和CloudFS功能。但是，任何节点添加或更改都必须作为手动管理任务执行。</p>
                     </div>
                  </div><a id="CWADD92599"></a><div class="props_rev_3"><a id="GUID-2DAF18B6-9388-4CD1-81CD-85626817F48A" name="GUID-2DAF18B6-9388-4CD1-81CD-85626817F48A"></a><h5 id="CWADD-GUID-2DAF18B6-9388-4CD1-81CD-85626817F48A" class="sect5">用于地址的共享GNS选项</h5>
                     <div>
                        <p>通过动态配置，您可以将GNS配置为为一个群集提供名称解析，或者为多个群集通告解决方案，以便单个GNS实例可以为多个已注册的群集执行名称解析。此选项称为共享GNS。</p>
                        <p><a id="d13771e2943" class="indexterm-anchor"></a>共享GNS提供与标准GNS相同的服务，并且对于接收名称解析的客户端显示相同的服务。不同之处在于，在一个集群上运行的GNS守护程序配置为为委派给GNS进行解析的域中的所有集群提供名称解析，并且可以使用SRVCTL命令集中管理GNS。您可以使用共享GNS配置来最小化整个企业中针对Oracle Grid Infrastructure集群的网络管理任务。
                        </p>
                        <p>对于提供共享GNS的群集，您不能使用静态地址配置选项来解析多群集环境中的地址。共享GNS需要通过DHCP分配的地址或IPv6无状态地址自动配置进行自动地址配置。</p>
                        <div class="infoboxnote" id="GUID-2DAF18B6-9388-4CD1-81CD-85626817F48A__GUID-380617EA-B35E-4652-A06F-CAAFA2E0B793">
                           <p class="notep1">注意：</p>
                           <p>GNS提供的一组集群中的所有节点名称必须是唯一的。</p>
                        </div>
                        <p>通过Oracle Universal Installer，您可以使用GNS为共享GNS客户端或服务器配置静态地址，并使用GNS进行发现。</p>
                     </div>
                  </div>
               </div>
            </div><a id="CWADD92600"></a><div class="props_rev_3"><a id="GUID-805F8C64-B09F-4D4A-87E1-5338C1361512" name="GUID-805F8C64-B09F-4D4A-87E1-5338C1361512"></a><h3 id="CWADD-GUID-805F8C64-B09F-4D4A-87E1-5338C1361512" class="sect3">管理网格命名服务</h3>
               <div>
                  <p>使用SRVCTL在单集群和多集群环境中管理网格命名服务（GNS）。</p>
                  <div class="infoboxnote" id="GUID-805F8C64-B09F-4D4A-87E1-5338C1361512__GUID-63E33F5E-891C-43AC-B607-C298E26E6F2A">
                     <p class="notep1">注意：</p>
                     <p>GNS服务器和客户端必须在使用相同操作系统和处理器体系结构的计算机上运行。Oracle不支持在具有不同操作系统，处理器体系结构或两者的计算机上运行GNS。</p>
                  </div>
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-51DE77F3-6CC0-431D-81EB-2FB28AF36007" title="配置高可用性GNS涉及配置主GNS实例和辅助GNS实例。您可以在使用Oracle Universal Installer安装Oracle Clusterware期间配置GNS，但只能在安装Oracle Clusterware后配置高可用性GNS，因为您只能在安装Oracle Clusterware后配置辅助GNS实例。">配置高可用性GNS</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-BD1C8576-9749-4215-BD2A-2A20913F34F3" title="您可以从群集中删除主GNS实例和辅助GNS实例。">删除主要和辅助GNS实例</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-5086C9CE-AD71-4DD5-9BD9-076AEC826D1F" title="您可以使用srvctl命令启动和停止GNS。">使用SRVCTL启动和停止GNS</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-32C1A762-5693-4C31-8734-0922C87A6FF8" title="您可以将未运行GNS的群集转换为GNS服务器或客户端群集，并且可以更改服务器和客户端群集的GNS群集类型配置。">将群集转换为GNS服务器或GNS客户端群集</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-29866D1B-B51D-42C3-AF3B-137C7B789682" title="如果由于群集故障或管理计划而需要将另一个群集设置为GNS服务器群集，则可以使用srvctl命令将GNS移动到另一个群集。">将GNS移动到另一个群集</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-AC40F44D-C385-4D66-BB63-9C1F33CBAB0F" title="从IPv4网络移动到IPv6网络时，必须更改GNS子域。">从IPv4迁移到IPv6网络时更改GNS子域</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-FCC9F598-A33A-4613-ABFD-85EFB8D8F170" title="您可以使用DNS进行名称解析，将Oracle Grid Infrastructure集群网络转换为使用网格命名服务（GNS）通过GNS获取名称解析的集群网络。">滚动从DNS转换为GNS群集名称解析</a></p>
                     </li>
                  </ul>
               </div>
               <div class="sect3"><a id="GUID-51DE77F3-6CC0-431D-81EB-2FB28AF36007" name="GUID-51DE77F3-6CC0-431D-81EB-2FB28AF36007"></a><h4 id="CWADD-GUID-51DE77F3-6CC0-431D-81EB-2FB28AF36007" class="sect4">配置高可用性GNS</h4>
                  <div>
                     <p>配置高可用性GNS涉及配置主GNS实例和辅助GNS实例。您可以在使用Oracle Universal Installer安装Oracle Clusterware期间配置GNS，但只能在安装Oracle Clusterware后配置高可用性GNS，因为您只能在安装Oracle Clusterware后配置辅助GNS实例。</p>
                     <div class="section">高可用性GNS提供在具有不同角色的多集群环境中运行多个GNS实例的能力。将有一个主要GNS实例和零个或多个辅助实例。主实例管理更新和解析操作。但是，辅助实例仅管理解析操作。如果您选择使用辅助GNS实例，则必须首先配置主GNS实例或将共享GNS环境中的现有GNS更改为主GNS实例。</div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>作为集群管理员，在现有集群中的任何节点上配置主GNS实例，如下所示：</span><div><pre class="pre codeblock"><code>#srvctl add gns <span class="variable" translate="no">gns_vip</span> -domain <span class="variable" translate="no">gns_subdomain</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>启动主GNS实例，如下所示：</span><div><pre class="pre codeblock"><code>#srvctl启动gns</code></pre><p>在多集群环境中只能有一个主GNS实例。如果GNS检测到多个主GNS实例，则它将中止启动命令。然后，您可以将此实例配置为辅助GNS实例，如步骤<a href="oracle-clusterware-administration.html#GUID-51DE77F3-6CC0-431D-81EB-2FB28AF36007__CONFIGURETHESECONDARYGNSINSTANCEASF-D798924B">5中所述</a> 。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>为辅助GNS实例创建客户端数据，如下所示</span><div><pre class="pre codeblock"><code>#srvctl export gns -clientdata <span class="variable" translate="no">file_name</span> -role secondary</code></pre><p>GNS将此区域数据信息存储在OCR中，并在配置后更新辅助GNS实例。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>将您在上一步中创建的客户端数据文件复制到辅助GNS实例。</span></li>
                        <li class="stepexpand" id="GUID-51DE77F3-6CC0-431D-81EB-2FB28AF36007__CONFIGURETHESECONDARYGNSINSTANCEASF-D798924B"><span>配置辅助GNS实例，如下：</span><div><pre class="pre codeblock"><code>#srvctl <span class="variable" translate="no">gns_vip</span> gns -vip <span class="variable" translate="no">gns_vip</span> -clientdata <span class="variable" translate="no">file_name</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>启动辅助GNS实例，如下所示：</span><div><pre class="pre codeblock"><code>#srvctl启动gns</code></pre><p>成功配置并启动辅助GNS实例后，它会向主GNS实例查询区域数据。</p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-BD1C8576-9749-4215-BD2A-2A20913F34F3" name="GUID-BD1C8576-9749-4215-BD2A-2A20913F34F3"></a><h4 id="CWADD-GUID-BD1C8576-9749-4215-BD2A-2A20913F34F3" class="sect4">删除主要和辅助GNS实例</h4>
                  <div>
                     <p>您可以从群集中删除主GNS实例和辅助GNS实例。</p>
                     <div class="p">在配置另一个主GNS实例之前，无法删除主GNS实例。如果您在使用另一个GNS实例进行替换之前将其删除，则GNS将无法运行。
                        <p>作为群集管理员，选择辅助GNS实例并将其提升为主要实例，如下所示：</p><pre class="pre codeblock"><code>#srvctl修改gns -role primary</code></pre></div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>根据您是要删除主GNS还是辅助GNS实例，请停止实例，如下所示：</span><div><pre class="pre codeblock"><code>#srvctl stop gns</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>删除实例，如下所示：</span><div><pre class="pre codeblock"><code>#srvctl删除gns</code></pre><div class="infoboxnote" id="GUID-BD1C8576-9749-4215-BD2A-2A20913F34F3__GUID-D14DD1BA-BDBE-4E3F-993A-2C87CDA6204A">
                                 <p class="notep1">注意：</p>DNS管理员可以从DNS区域数据中删除实例的名称服务器和A / AAAA记录条目，以便客户端不会尝试查询不再可用的实例。
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="CWADD92404"></a><div class="props_rev_3"><a id="GUID-5086C9CE-AD71-4DD5-9BD9-076AEC826D1F" name="GUID-5086C9CE-AD71-4DD5-9BD9-076AEC826D1F"></a><h4 id="CWADD-GUID-5086C9CE-AD71-4DD5-9BD9-076AEC826D1F" class="sect4">使用SRVCTL启动和停止GNS</h4>
                  <div>
                     <p>您可以使用srvctl命令启动和停止GNS。</p>
                     <div class="section">
                        <p><a id="d13771e3612" class="indexterm-anchor"></a><a id="d13771e3616" class="indexterm-anchor"></a><a id="d13771e3620" class="indexterm-anchor"></a><a id="d13771e3624" class="indexterm-anchor"></a>通过以<code class="codeph">root</code>身份运行以下命令，分别在服务器群集上启动和停止GNS：</p><pre class="oac_no_warn" dir="ltr">#srvctl start gns #srvctl stop gns</pre><div class="infoboxnote" id="GUID-5086C9CE-AD71-4DD5-9BD9-076AEC826D1F__GUID-26F68CB7-6197-4DB3-A9FF-DD2337A55691">
                           <p class="notep1">注意：</p>
                           <p>您无法在客户端群集上启动或停止GNS。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="CWADD92546"></a><div class="props_rev_3"><a id="GUID-32C1A762-5693-4C31-8734-0922C87A6FF8" name="GUID-32C1A762-5693-4C31-8734-0922C87A6FF8"></a><h4 id="CWADD-GUID-32C1A762-5693-4C31-8734-0922C87A6FF8" class="sect4">将群集转换为GNS服务器或GNS客户端群集</h4>
                  <div>
                     <p>您可以将未运行GNS的群集转换为GNS服务器或客户端群集，并且可以更改服务器和客户端群集的GNS群集类型配置。</p>
                     <p>本节包括以下群集转换方案：<a id="d13771e3757" class="indexterm-anchor"></a><a id="d13771e3761" class="indexterm-anchor"></a></p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-2587913C-2172-4E50-97BA-CFAD9302CF38" title="您可以使用srvctl命令将未运行GNS的集群转换为GNS服务器集群。">将非GNS群集转换为GNS服务器群集</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-57C2A925-C13D-47AA-A362-7912F2A8E9EC" title="要将未运行GNS的群集转换为客户端群集，必须从服务器群集导入凭证文件。">将非GNS群集转换为客户端群集</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-1AA8BBB0-01F1-44C0-914B-A48ED711DD0C">将运行GNS的单个群集转换为服务器群集</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-B1FF4A34-9E84-4CEF-A291-737A0130710B" title="您可以使用srvctl命令将运行GNS的单个集群转换为GNC客户端集群。由于在此转换过程中必须保持与当前GNS的连接，因此该过程比将单个群集转换为服务器群集更为复杂。">将运行GNS的单个群集转换为GNS客户端群集</a></p>
                        </li>
                     </ul>
                  </div><a id="CWADD92601"></a><div class="props_rev_3"><a id="GUID-2587913C-2172-4E50-97BA-CFAD9302CF38" name="GUID-2587913C-2172-4E50-97BA-CFAD9302CF38"></a><h5 id="CWADD-GUID-2587913C-2172-4E50-97BA-CFAD9302CF38" class="sect5">将非GNS群集转换为GNS服务器群集</h5>
                     <div>
                        <p>您可以使用srvctl命令将未运行GNS的集群转换为GNS服务器集群。</p>
                        <div class="section">
                           <ol>
                              <li>
                                 <p>通过以<code class="codeph">root</code>身份运行以下命令，将GNS添加到群集，提供有效的IP地址和域：</p><pre class="pre codeblock"><code>#srvctl add gns -vip <span class="variable" translate="no">IP_address</span> -domain <span class="variable" translate="no">domain</span></code></pre></li>
                              <li>
                                 <p>启动GNS实例：</p><pre class="pre codeblock"><code>#srvctl start gns -node <span class="variable" translate="no">node_name</span></code></pre></li>
                           </ol>
                           <div class="infoboxnote" id="GUID-2587913C-2172-4E50-97BA-CFAD9302CF38__GUID-D8BCB7B0-C1EE-4574-86A7-8395B60C53E0">
                              <p class="notep1">注意：</p>
                              <p></p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>指定域添加GNS VIP时， <span class="italic">不需要</span> 。</p>
                                 </li>
                                 <li>
                                    <p>您指定的IP地址当前不能被其他GNS实例使用。</p>
                                 </li>
                                 <li>
                                    <p>配置的群集必须具有DNS委派才能使其成为GNS服务器群集。</p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="CWADD92602"></a><div class="props_rev_3"><a id="GUID-57C2A925-C13D-47AA-A362-7912F2A8E9EC" name="GUID-57C2A925-C13D-47AA-A362-7912F2A8E9EC"></a><h5 id="CWADD-GUID-57C2A925-C13D-47AA-A362-7912F2A8E9EC" class="sect5">将非GNS群集转换为客户端群集</h5>
                     <div>
                        <p>要将未运行GNS的群集转换为客户端群集，必须从服务器群集导入凭证文件。</p>
                        <div class="section">
                           <p>将未运行GNS的集群转换为GNS客户端集群，如下所示：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>在服务器群集中运行以下命令，将GNS实例客户端数据配置导出到文件中：</span><div><pre class="pre codeblock"><code>$ srvctl export gns -clientdata <span class="variable" translate="no">path_to_file</span> -role client</code></pre><p>您必须指定文件的完全限定路径。</p>
                                 <div class="infoboxnote" id="GUID-57C2A925-C13D-47AA-A362-7912F2A8E9EC__GUID-7EC148CB-2034-4EA8-8C51-61EDCAA9FFB7">
                                    <p class="notep1">注意：</p>
                                    <p>您可以将使用Oracle Universal Installer生成的GNS配置客户端数据文件用作创建共享GNS客户端的输入文件。</p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>在集群中的节点上导入您在上一步中创建的文件，通过以<code class="codeph">root</code>身份运行以下命令，使该集群成为客户端集群：</span><div><pre class="pre codeblock"><code>#srvctl add gns -clientdata <span class="variable" translate="no">path_to_file</span></code></pre><div class="infoboxnote" id="GUID-57C2A925-C13D-47AA-A362-7912F2A8E9EC__GUID-1E435222-F12A-430A-84E4-7834B864F2F1">
                                    <p class="notep1">注意：</p>
                                    <p>您必须将包含GNS数据的文件从服务器群集复制到运行此命令的群集中的节点。</p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>更改SCAN名称，如下所示：</span><div><pre class="pre codeblock"><code>$ srvctl modify scan -scanname <span class="variable" translate="no">scan_name</span> 。 <span class="variable" translate="no">client_cluster_name</span> 。 <span class="variable" translate="no">server_GNS_subdomain</span></code></pre></div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="CWADD92603"></a><div class="props_rev_3"><a id="GUID-1AA8BBB0-01F1-44C0-914B-A48ED711DD0C" name="GUID-1AA8BBB0-01F1-44C0-914B-A48ED711DD0C"></a><h5 id="CWADD-GUID-1AA8BBB0-01F1-44C0-914B-A48ED711DD0C" class="sect5">将运行GNS的单个群集转换为服务器群集</h5>
                     <div>
                        <div>您无需执行任何操作即可将运行GNS的单个群集转换为GNS服务器群集。添加客户端群集时，它会自动被视为服务器群集。</div>
                     </div>
                  </div><a id="CWADD92604"></a><div class="props_rev_3"><a id="GUID-B1FF4A34-9E84-4CEF-A291-737A0130710B" name="GUID-B1FF4A34-9E84-4CEF-A291-737A0130710B"></a><h5 id="CWADD-GUID-B1FF4A34-9E84-4CEF-A291-737A0130710B" class="sect5">将运行GNS的单个群集转换为GNS客户端群集</h5>
                     <div>
                        <p>您可以使用srvctl命令将运行GNS的单个集群转换为GNC客户端集群。由于在此转换过程中必须保持与当前GNS的连接，因此该过程比将单个群集转换为服务器群集更为复杂。</p>
                        <div class="section">
                           <p>要将运行GNS的单个群集转换为GNS客户端群集，请执行以下操作：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>在服务器群集中运行以下命令，将GNS客户端信息导出到文件中：</span><div><pre class="pre codeblock"><code>$ srvctl export gns -clientdata <span class="variable" translate="no">path_to_client_data_file</span>
</code></pre><p>您必须指定文件的完全限定路径。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>在要转换为客户端群集的群集上停止GNS。</span><div><pre class="pre codeblock"><code>#srvctl stop gns</code></pre><div class="infoboxnote" id="GUID-B1FF4A34-9E84-4CEF-A291-737A0130710B__GUID-D599BC16-A9A6-4058-BE86-89DC81B81BE5">
                                    <p class="notep1">注意：</p>
                                    <p>转换正在进行时，使用GNS的名称解析将不可用。</p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>在服务器集群中运行以下命令以导出GNS实例：</span><div><pre class="pre codeblock"><code>$ srvctl export gns -instance <span class="variable" translate="no">path_to_file</span>
</code></pre><p>您必须指定文件的完全限定路径。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>在服务器集群中以<code class="codeph">root</code>身份运行以下命令以导入GNS实例文件：</span><div><pre class="pre codeblock"><code>#srvctl import gns -instance <span class="variable" translate="no">path_to_file</span>
</code></pre><p>您必须指定文件的完全限定路径。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>在导入GNS实例文件的节点上以<code class="codeph">root</code>身份运行以下命令，启动GNS实例：</span><div><pre class="pre codeblock"><code>#srvctl启动gns</code></pre><p>通过不指定要在其上启动GNS实例的节点的名称，实例将在随机节点上启动。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>使用以下命令从GNS客户端群集中删除GNS：</span><div><pre class="pre codeblock"><code>#srvctl删除gns</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>使前一个集群成为客户端集群，如下所示：</span><div><pre class="pre codeblock"><code>#srvctl add gns -clientdata <span class="variable" translate="no">path_to_client_data_file</span></code></pre><div class="infoboxnote" id="GUID-B1FF4A34-9E84-4CEF-A291-737A0130710B__GUID-3B835853-478A-4083-AFFF-5A2D4E8913AF">
                                    <p class="notep1">注意：</p>
                                    <p>您必须将包含GNS数据的文件从服务器群集复制到运行此命令的群集中的节点。</p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>修改GNS客户端群集中的SCAN以使用通过客户端群集名称限定的GNS子域，如下所示：</span><div><pre class="pre codeblock"><code>$ srvctl modify scan -scanname <span class="variable" translate="no">scan_name</span> 。 <span class="variable" translate="no">gns_domain</span>
</code></pre><p>在上面的命令中， <code class="codeph"><span class="variable" translate="no">gns_domain</span></code>的格式为<code class="codeph"><span class="variable" translate="no">client_cluster_name</span></code> <code class="codeph"><span class="variable" translate="no">.server GNS subdomain</span></code></p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div>
               </div><a id="CWADD92405"></a><div class="props_rev_3"><a id="GUID-29866D1B-B51D-42C3-AF3B-137C7B789682" name="GUID-29866D1B-B51D-42C3-AF3B-137C7B789682"></a><h4 id="CWADD-GUID-29866D1B-B51D-42C3-AF3B-137C7B789682" class="sect4">将GNS移动到另一个群集</h4>
                  <div>
                     <p>如果由于群集故障或管理计划而需要将另一个群集设置为GNS服务器群集，则可以使用srvctl命令将GNS移动到另一个群集。</p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-29866D1B-B51D-42C3-AF3B-137C7B789682__GUID-658834C0-81F2-4E59-A6DA-DE999BA34701">
                           <p class="notep1">注意：</p>
                           <p>此过程需要服务器群集和客户端群集停机。此外，您必须将GNS客户端数据从新服务器群集导入任何Oracle Flex ASM和Fleet补丁和配置服务器和客户端。</p>
                        </div>
                        <p>要将GNS移动到另一个群集：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>停止当前服务器群集上的GNS实例。</span><div><pre class="oac_no_warn" dir="ltr">#srvctl stop gns</pre></div>
                        </li>
                        <li class="stepexpand" id="GUID-29866D1B-B51D-42C3-AF3B-137C7B789682__BAJCAFHE"><span>将GNS实例配置导出到文件。</span><div><pre class="oac_no_warn" dir="ltr">#srvctl export gns -instance <span class="italic">path_to_file</span>
</pre><p>指定文件的完全限定路径。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>从以前的服务器群集中删除GNS配置。</span><div><pre class="oac_no_warn" dir="ltr">#srvctl删除gns</pre></div>
                        </li>
                        <li class="stepexpand"><span>将GNS添加到新群集。</span><div><pre class="oac_no_warn" dir="ltr">#srvctl <span class="italic">add gns</span> -domain <span class="italic">domain_name</span> -vip <span class="italic">vip_name</span>
</pre><p>或者，您可以为VIP指定IP地址。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>使用存储在步骤<a href="oracle-clusterware-administration.html#GUID-29866D1B-B51D-42C3-AF3B-137C7B789682__BAJCAFHE">2中</a>创建的文件中的实例信息，通过导入文件，在新服务器集群中配置GNS实例，如下所示：</span><div><pre class="oac_no_warn" dir="ltr">#srvctl import gns -instance <span class="italic">path_to_file</span></pre><div class="infoboxnote" id="GUID-29866D1B-B51D-42C3-AF3B-137C7B789682__GUID-2F37BB28-B4CA-45C7-BF80-393FAD4328F9">
                                 <p class="notep1">注意：</p>
                                 <p>包含来自以前服务器群集的GNS数据的文件必须驻留在运行<code class="codeph">srvctl import gns</code>命令的群集中的节点上。
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在新服务器群集中启动GNS实例。</span><div><pre class="oac_no_warn" dir="ltr">#srvctl启动gns</pre></div>
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-AC40F44D-C385-4D66-BB63-9C1F33CBAB0F" name="GUID-AC40F44D-C385-4D66-BB63-9C1F33CBAB0F"></a><h4 id="CWADD-GUID-AC40F44D-C385-4D66-BB63-9C1F33CBAB0F" class="sect4">从IPv4迁移到IPv6网络时更改GNS子域</h4>
                  <div>
                     <p>从IPv4网络移动到IPv6网络时，必须更改GNS子域。</p>
                     <div class="section">要更改GNS子域，您必须添加IPv6网络，更新GNS域并更新SCAN，如下所示：</div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>使用<code class="codeph">srvctl modify network</code>命令添加IPv6子网，如下所示：</span><div><pre class="pre codeblock"><code>$ srvctl modify network -subnet <span class="variable" translate="no">ipv6_subnet</span> / <span class="variable" translate="no">ipv6_prefix_length</span> [/ <span class="variable" translate="no">interface</span> ] -nettype autoconfig</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>更新GNS域，如下所示：</span><div><pre class="pre codeblock"><code>$ srvctl stop gns -force $ srvctl stop scan -force $ srvctl remove gns -force $ srvctl add gns -vip gns_vip -domain gns_subdomain $ srvctl start gns</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>使用新域更新SCAN名称，如下所示：</span><div><pre class="pre codeblock"><code>$ srvctl remove scan -force $ srvctl add scan -scanname <span class="variable" translate="no">new_domain</span> $ srvctl start scan</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将网络IP类型从IPv4转换为IPv4 DHCP和IPv6 autoconfig，如下所示：</span><div><pre class="pre codeblock"><code>$ srvctl修改网络-iptype</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将网络从使用两种协议转换为仅使用IPv6 autoconfig，如下所示：</span><div><pre class="pre codeblock"><code>$ srvctl修改网络-iptype ipv6</code></pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="CWADD92641"></a><div class="props_rev_3"><a id="GUID-FCC9F598-A33A-4613-ABFD-85EFB8D8F170" name="GUID-FCC9F598-A33A-4613-ABFD-85EFB8D8F170"></a><h4 id="CWADD-GUID-FCC9F598-A33A-4613-ABFD-85EFB8D8F170" class="sect4">滚动从DNS转换为GNS群集名称解析</h4>
                  <div>
                     <p>您可以使用DNS进行名称解析，将Oracle Grid Infrastructure集群网络转换为使用网格命名服务（GNS）通过GNS获取名称解析的集群网络。</p>
                     <div class="section">
                        <p>使用以下过程从标准DNS名称解析网络转换为GNS名称解析网络，无需停机：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以Grid用户（ <code class="codeph">grid</code> ）身份登录，并使用以下Cluster Verification Utility检查将群集移动到GNS的状态，其中<code class="codeph"><span class="variable" translate="no">nodelist</span></code>是以逗号分隔的群集成员节点列表：</span><div><pre class="pre codeblock"><code>$ cluvfy stage -pre crsinst -n <span class="variable" translate="no">nodelist</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>作为网格用户，使用以下命令检查GNS配置的完整性，其中<code class="codeph"><span class="variable" translate="no">domain</span></code>是委派给GNS进行解析的域， <code class="codeph"><span class="variable" translate="no">gns_vip</span></code>是GNS VIP：</span><div><pre class="pre codeblock"><code>$ cluvfy comp gns -precrsinst -domain <span class="variable" translate="no">domain</span> -vip <span class="variable" translate="no">gns_vip</span></code></pre></div>
                        </li>
                        <li class="stepexpand" id="GUID-FCC9F598-A33A-4613-ABFD-85EFB8D8F170__BAJDAJBG"><span>以<code class="codeph">root</code>身份登录，并使用以下SRVCTL命令配置GNS资源，其中<code class="codeph"><span class="variable" translate="no">domain_name</span></code>是网络管理员已将DNS配置为委派解析为GNS的域， <code class="codeph"><span class="variable" translate="no">ip_address</span></code>是GNS侦听DNS请求的IP地址：</span><div><pre class="pre codeblock"><code>#srvctl add gns -domain <span class="variable" translate="no">domain_name</span> -vip <span class="variable" translate="no">ip_address</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>使用以下命令启动GNS：</span><div><pre class="pre codeblock"><code>#srvctl启动gns</code></pre><p>GNS启动并注册VIP和SCAN名称。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>以<code class="codeph">root</code>身份，使用以下命令更改网络CRS资源以支持静态和DHCP网络地址的混合模式：</span><div><pre class="pre codeblock"><code>#srvctl修改网络-nettype MIXED</code></pre><p>必要的VIP地址从DHCP服务器获取并启动。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>作为Grid用户，输入以下命令以确保Oracle Clusterware正在使用新的GNS，动态地址和侦听器端点：</span><div><pre class="pre codeblock"><code>cluvfy stage -post crsinst -n all</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>验证成功后，更改先前使用通过DNS解析的SCAN或VIP的远程端点，以使用通过GNS解析的SCAN和VIP。</span><div>
                              <p>对于使用SCAN的每个客户端，更改客户端使用的SCAN，以便客户端在委派给GNS的域中使用SCAN。</p>
                              <p>对于使用VIP名称的每个客户端，更改每个客户端上的VIP名称，以便它们使用相同的服务器VIP名称，但在域中委托给GNS的域名。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>以<code class="codeph">root</code>身份输入以下命令，以使用GNS子域中的SCAN名称更新系统：</span><div><pre class="pre codeblock"><code>#srvctl modify scan -scanname <span class="variable" translate="no">scan_name</span> 。 <span class="variable" translate="no">gns_domain</span></code></pre><p>在上述命令语法中， <code class="codeph"><span class="variable" translate="no">gns_domain</span></code>是您在此过程的步骤<a href="oracle-clusterware-administration.html#GUID-FCC9F598-A33A-4613-ABFD-85EFB8D8F170__BAJDAJBG">3</a>中输入的域名。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>所有客户端使用动态地址后禁用静态地址，如下所示：</span><div><pre class="pre codeblock"><code>$ srvctl修改网络-nettype DHCP</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure安装和升级指南</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="CWADD92099"></a><div class="props_rev_3"><a id="GUID-0FA4A79F-B673-4232-863B-328D0E2302B1" name="GUID-0FA4A79F-B673-4232-863B-328D0E2302B1"></a><h3 id="CWADD-GUID-0FA4A79F-B673-4232-863B-328D0E2302B1" class="sect3">节点故障隔离</h3>
               <div>
                  <p>故障隔离是将故障节点与群集的其余部分隔离以防止故障节点损坏数据的过程。</p>
                  <p>当节点发生故障时，隔离它涉及一种外部机制，该机制能够重新启动问题节点，而无需Oracle Clusterware或该节点上运行的操作系统的协作。为了提供这种能力，Oracle集群<span class="italic">12c的</span>支持智能平台管理接口规范（IPMI）（也称为底板管理控制器（BMC）），一个工业标准的管理协议。
                  </p>
                  <p>通常，在Oracle Grid Infrastructure安装期间，当您从故障隔离支持屏幕提供配置IPMI的选项时，可以使用IPMI配置故障隔离。如果在安装期间未配置IPMI，则可以在安装后使用Oracle Clusterware Control实用程序（CRSCTL）对其进行配置，如后续部分所述。</p>
                  <p>要使用IPMI进行故障隔离，每个集群成员节点必须配备运行与IPMI 1.5版兼容的固件的IPMI设备，该IPMI支持局域网（LAN）上的IPMI。在数据库操作期间，通过从LAN驱逐的Cluster Synchronization Services守护程序到故障节点的IPMI设备的通信来完成故障隔离。 IPMI-over-LAN协议通过用户名和密码保护的经过身份验证的会话进行传输，该用户名和密码是在安装期间从管理员处获得的。</p>
                  <p>要使用DHCP支持IPMI的动态IP地址分配，群集同步服务守护程序需要在群集同步服务启动期间与本地IPMI设备直接通信，以获取IPMI设备的IP地址。（但是，对于HP-UX和Solaris平台而言，这不是必需的，它要求为IPMI设备分配静态IP地址。）这是使用IPMI探测命令（OSD）完成的，该命令通过IPMI驱动程序与IPMI设备通信，您必须在每个集群系统上安装该驱动程序。</p>
                  <p>如果为IPMI设备分配静态IP地址，则Cluster Synchronization Services守护程序不严格要求IPMI驱动程序。<span class="italic">是</span>必需的驱动程序，但是，使用<code class="codeph">ipmitool</code>或<code class="codeph">ipmiutil</code>配置IPMI设备，但你也可以做到这一点用在一些平台上的管理控制台。
                  </p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="oracle-clusterware-administration.html#GUID-1E032798-0970-4B94-AD0B-5C1687D42EDF" title="在安装Oracle Clusterware之后，使用crsctl命令配置基于IPMI的故障隔离。您还可以使用此命令修改或删除IPMI配置。">使用CRSCTL进行基于IPMI的故障隔离的安装后配置</a></li>
                     </ul>
                  </div>
               </div><a id="CWADD92101"></a><div class="props_rev_3"><a id="GUID-40F0AAFE-36CC-4741-B5C0-E5C851ECBA97" name="GUID-40F0AAFE-36CC-4741-B5C0-E5C851ECBA97"></a><h4 id="CWADD-GUID-40F0AAFE-36CC-4741-B5C0-E5C851ECBA97" class="sect4">IPMI的服务器硬件配置</h4>
                  <p>您必须首先安装并启用IPMI驱动程序，并配置IPMI设备，如适用于您的平台的<span><cite>Oracle Grid Infrastructure安装和升级指南</cite></span>中所述。
                  </p>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure安装和升级指南</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD92102"></a><div class="props_rev_3"><a id="GUID-1E032798-0970-4B94-AD0B-5C1687D42EDF" name="GUID-1E032798-0970-4B94-AD0B-5C1687D42EDF"></a><h4 id="CWADD-GUID-1E032798-0970-4B94-AD0B-5C1687D42EDF" class="sect4">使用CRSCTL进行基于IPMI的故障隔离的安装后配置</h4>
                  <div>
                     <p>在安装Oracle Clusterware之后，使用crsctl命令配置基于IPMI的故障隔离。您还可以使用此命令修改或删除IPMI配置。</p>
                     <p>以下主题对此进行了描述：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-F1ECF418-36C4-44A3-BB9F-B25383BD580F" title="。安装并启用IPMI驱动程序，配置IPMI设备并完成服务器配置后，可以使用CRSCTL命令完成IPMI配置。">使用Oracle Clusterware进行IPMI安装后配置</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-533164F9-92B1-4AF1-AA20-1497A460C014" title="您可能需要修改现有的基于IPMI的故障隔离配置以更改IPMI密码，或者在现有安装中配置IPMI以实现故障隔离。您可以将CRSCTL与适用于您的平台的IPMI配置工具一起使用来实现此目的。">使用CRSCTL修改IPMI配置</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-8CF424A6-14F8-4E6B-85EA-8B1DE214BEAD" title="如果要完全停止使用IPMI，或者最初由安装了Oracle Clusterware的用户以外的其他人配置了IPMI，则可以使用CRSCTL从群集中删除IPMI配置。">使用CRSCTL删除IPMI配置</a></p>
                        </li>
                     </ul>
                  </div><a id="CWADD92103"></a><div class="props_rev_3"><a id="GUID-F1ECF418-36C4-44A3-BB9F-B25383BD580F" name="GUID-F1ECF418-36C4-44A3-BB9F-B25383BD580F"></a><h5 id="CWADD-GUID-F1ECF418-36C4-44A3-BB9F-B25383BD580F" class="sect5">使用Oracle Clusterware进行IPMI安装后配置</h5>
                     <div>
                        <p>。安装并启用IPMI驱动程序，配置IPMI设备并完成服务器配置后，可以使用CRSCTL命令完成IPMI配置。</p>
                        <div class="section">
                           <p>在开始安装之前，您已在服务器操作系统中安装并启用了IPMI驱动程序，并在每个节点上配置了IPMI硬件（IP地址模式，管理员凭据等），如“ <a href="../install-and-upgrade.html" target="_blank"><span class="italic">Oracle Grid Infrastructure安装指南”中所述</span></a> 。安装Oracle Clusterware时，安装程序会收集IPMI管理员用户标识和密码，并将它们存储在OLR中的节点本地存储中的Oracle Wallet中。</p>
                           <p><a id="d13771e5641" class="indexterm-anchor"></a><a id="d13771e5645" class="indexterm-anchor"></a>完成服务器配置后，请在每个群集节点上完成以下过程，以在节点上注册IPMI管理员和密码。
                           </p>
                           <div class="infoboxnote" id="GUID-F1ECF418-36C4-44A3-BB9F-B25383BD580F__GUID-1758D9AB-D112-41C2-9924-38DF05F33869">
                              <p class="notep1">注意：</p>
                              <p>如果IPMI配置为使用DHCP获取其IP地址，则可能需要重置IPMI或重新启动节点以使其获取地址。</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>启动Oracle Clusterware，允许它从IPMI获取当前IP地址。这证实了集群件与IPMI通信的能力，这在启动时是必需的。</span><div>
                                 <p>如果在配置IPMI之前Oracle Clusterware正在运行，则可以关闭Oracle Clusterware并重新启动它。或者，您可以使用IPMI管理实用程序获取IPMI IP地址，然后使用CRSCTL通过运行类似于以下的命令在OLR中存储IP地址：</p><pre class="oac_no_warn" dir="ltr">crsctl set css ipmiaddr 192.168.10.45</pre></div>
                           </li>
                           <li class="stepexpand"><span>使用CRSCTL通过运行<code class="codeph">crsctl set css ipmiadmin</code>命令在OLR中存储以前建立的驻留IPMI用户ID和密码，并在提示符下提供密码。例如：</span><div><pre class="oac_no_warn" dir="ltr">crsctl set css ipmiadmin <span class="italic">administrator_name</span> IPMI BMC密码： <span class="italic">密码</span>
</pre><p>此命令验证提供的凭据，如果另一个群集节点无法使用它们访问本地IPMI，则会失败。</p>
                                 <p>完成硬件和操作系统配置并在Oracle Clusterware上注册IPMI管理员后，基于IPMI的故障隔离应该完全正常。</p>
                                 <p>在开始安装之前，请在服务器操作系统中安装并启用IPMI驱动程序，并在每个节点上配置IPMI硬件（IP地址模式，管理员凭据等），如“ <a href="../install-and-upgrade.html" target="_blank"><span class="italic">Oracle Grid Infrastructure安装指南”中所述</span></a> 。安装Oracle Clusterware时，安装程序会收集IPMI管理员用户标识和密码，并将它们存储在OLR中的节点本地存储中的Oracle Wallet中。</p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="CWADD92104"></a><div class="props_rev_3"><a id="GUID-533164F9-92B1-4AF1-AA20-1497A460C014" name="GUID-533164F9-92B1-4AF1-AA20-1497A460C014"></a><h5 id="CWADD-GUID-533164F9-92B1-4AF1-AA20-1497A460C014" class="sect5">使用CRSCTL修改IPMI配置</h5>
                     <div>
                        <p>您可能需要修改现有的基于IPMI的故障隔离配置以更改IPMI密码，或者在现有安装中配置IPMI以实现故障隔离。您可以将CRSCTL与适用于您的平台的IPMI配置工具一起使用来实现此目的。</p>
                        <div class="section">
                           <p>例如，要更改IPMI的管理员密码，必须首先按照“ <span><cite>Oracle Grid Infrastructure安装和升级指南”中的说明</cite></span>修改IMPI配置，然后使用CRSCTL更改OLR中的密码。</p>
                           <p>Oracle Clusterware for IPMI所需的配置数据保存在OCR中的Oracle Wallet中。由于配置信息保存在安全存储中，因此必须由Oracle Clusterware安装所有者帐户（Grid用户）编写，因此您必须以该安装用户身份登录。</p>
                           <p>使用以下过程修改现有IPMI配置：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>输入<code class="codeph">crsctl set css ipmiadmin <span class="variable" translate="no">administrator_name</span></code>命令。例如，使用用户<code class="codeph">IPMIadm</code> ：</span><div><pre class="pre codeblock"><code>$ crsctl设置css ipmiadmin IPMIadm</code></pre><p>提供管理员密码。Oracle Clusterware在OLR中存储本地IPMI的管理员名称和密码。</p>
                                 <p>存储新凭据后，Oracle Clusterware可以检索新凭据并根据需要进行分发。</p>
                              </div>
                           </li>
                           <li class="stepexpand" id="GUID-533164F9-92B1-4AF1-AA20-1497A460C014__BGBFCCIA"><span>输入<code class="codeph">crsctl set css ipmiaddr <span class="variable" translate="no">bmc_ip_address</span></code>命令。例如：</span><div><pre class="pre codeblock"><code>$ crsctl set css ipmiaddr 192.0.2.244</code></pre><p>此命令将本地IPMI的新IPMI IP地址存储在OLR中。存储IP地址后，Oracle Clusterware可以检索新配置并根据需要进行分发。</p>
                              </div>
                           </li>
                           <li class="stepexpand" id="GUID-533164F9-92B1-4AF1-AA20-1497A460C014__BGBBDGCG"><span>输入<code class="codeph">crsctl get css ipmiaddr</code>命令。例如：</span><div><pre class="pre codeblock"><code>$ crsctl获取css ipmiaddr</code></pre><p>此命令从OLR检索本地IPMI的IP地址，并将其显示在控制台上。</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>从OLR中删除本地IPMI的IPMI配置信息并删除注册表项，如下所示：</span><div><pre class="pre codeblock"><code>$ crsctl unset css ipmiconfig</code></pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure安装和升级指南</cite></span></a></li>
                              <li><a href="oracle-clusterware-control-crsctl-utility-reference.html#GUID-6A4E73C4-E1A0-4D90-B69A-7B2B4DAB66BA" title="您只能在Oracle RAC环境中使用以下命令。">Oracle RAC环境CRSCTL命令</a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CWADD92174"></a><div class="props_rev_3"><a id="GUID-8CF424A6-14F8-4E6B-85EA-8B1DE214BEAD" name="GUID-8CF424A6-14F8-4E6B-85EA-8B1DE214BEAD"></a><h5 id="CWADD-GUID-8CF424A6-14F8-4E6B-85EA-8B1DE214BEAD" class="sect5">使用CRSCTL删除IPMI配置</h5>
                     <div>
                        <p>如果要完全停止使用IPMI，或者最初由安装了Oracle Clusterware的用户以外的其他人配置了IPMI，则可以使用CRSCTL从群集中删除IPMI配置。</p>
                        <div class="section">
                           <p>如果后者为真，则Oracle Clusterware无法访问IPMI配置数据，并且Oracle Clusterware软件无法使用IPMI，您必须将IPMI重新配置为安装Oracle Clusterware的用户。</p>
                           <p>要完全删除IPMI，请执行以下步骤。要将IPMI重新配置为安装Oracle Clusterware的用户，请执行步骤<a href="oracle-clusterware-administration.html#GUID-8CF424A6-14F8-4E6B-85EA-8B1DE214BEAD__BGBFEAID">3</a>和<a href="oracle-clusterware-administration.html#GUID-8CF424A6-14F8-4E6B-85EA-8B1DE214BEAD__BGBDADCG">4</a> ，然后重复上一节中的步骤<a href="oracle-clusterware-administration.html#GUID-533164F9-92B1-4AF1-AA20-1497A460C014__BGBFCCIA">2</a>和<a href="oracle-clusterware-administration.html#GUID-533164F9-92B1-4AF1-AA20-1497A460C014__BGBBDGCG">3</a> 。
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>禁用IPMI驱动程序并消除引导时安装，如下所示：</span><div><pre class="pre codeblock"><code>/ sbin / modprobe -r</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>使用<code class="codeph">ipmitool</code>或<code class="codeph">ipmiutil</code>禁用本地IPMI的IPMI-over-LAN，以防止通过LAN访问或更改IPMI管理员用户ID和密码。</span></li>
                           <li class="stepexpand" id="GUID-8CF424A6-14F8-4E6B-85EA-8B1DE214BEAD__BGBFEAID"><span>确保Oracle Clusterware正在运行，然后通过运行以下命令使用CRSCTL从OLR中删除IPMI配置数据：</span><div><pre class="pre codeblock"><code>$ crsctl unset css ipmiconfig</code></pre></div>
                           </li>
                           <li class="stepexpand" id="GUID-8CF424A6-14F8-4E6B-85EA-8B1DE214BEAD__BGBDADCG"><span>通过以<code class="codeph">root</code>身份运行以下命令，重新启动Oracle Clusterware，使其在没有IPMI配置的情况下运行：</span><div><pre class="pre codeblock"><code>#crsctl stop crs＃crsctl start crs</code></pre></div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="oracle-clusterware-administration.html#GUID-533164F9-92B1-4AF1-AA20-1497A460C014" title="您可能需要修改现有的基于IPMI的故障隔离配置以更改IPMI密码，或者在现有安装中配置IPMI以实现故障隔离。您可以将CRSCTL与适用于您的平台的IPMI配置工具一起使用来实现此目的。">使用CRSCTL修改IPMI配置</a></li>
                              <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure安装和升级指南</cite></span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="CWADD90979"></a><div class="props_rev_3"><a id="GUID-F11A9961-257A-47BD-B644-63023D2CEA22" name="GUID-F11A9961-257A-47BD-B644-63023D2CEA22"></a><h3 id="CWADD-GUID-F11A9961-257A-47BD-B644-63023D2CEA22" class="sect3">了解手动配置网络上的网络地址</h3>
               <div>
                  <p>了解手动配置网络上的网络地址的概念和要求很有帮助。</p>
                  <p>本节包含以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-F6217425-BBF4-4989-B943-7A660E03E6BE" title="Oracle Clusterware配置至少需要一个公共网络接口和一个专用网络接口。">了解网络地址配置要求</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-494167AF-9BDC-4E61-B6EE-21B95B881272" title="公共网络地址用于向客户端提供服务。">了解SCAN地址和客户端服务连接</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-18CE6E12-C1BD-4C72-A9F8-F5A74F7E75BF" title="您可以使用有效的节点检查来指定SCAN侦听器接受注册的节点和子网。您可以使用SRVCTL指定节点和子网信息。 SRVCTL将节点和子网信息存储在SCAN侦听器资源概要文件中。SCAN侦听器代理从资源概要文件中读取该信息，并将其写入listener.ora文件。">具有有效节点检查的SCAN监听器和服务注册限制</a></p>
                     </li>
                  </ul>
               </div><a id="CWADD92079"></a><div class="props_rev_3"><a id="GUID-F6217425-BBF4-4989-B943-7A660E03E6BE" name="GUID-F6217425-BBF4-4989-B943-7A660E03E6BE"></a><h4 id="CWADD-GUID-F6217425-BBF4-4989-B943-7A660E03E6BE" class="sect4">了解网络地址配置要求</h4>
                  <div>
                     <p>Oracle Clusterware配置至少需要一个公共网络接口和一个专用网络接口。</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>公共网络接口连接用户和应用程序服务器以访问数据库服务器上的数据。</p>
                        </li>
                        <li>
                           <p>专用网络接口用于节点间通信，并由Oracle Clusterware专用。</p>
                        </li>
                     </ul>
                     <p>您可以为给定网络上的<a href="glossary.html#GUID-DB822A23-A71F-41A0-812A-447C56B64A41"><span class="xrefglossterm">IPv4</span></a> ， <a href="glossary.html#GUID-D35BA85D-6AF1-4A65-97CA-473DD92C9E82"><span class="xrefglossterm">IPv6</span></a>或两种类型的地址配置公共网络接口。如果使用冗余网络接口（绑定或组合接口），请注意Oracle不支持配置一个接口以支持IPv4地址，另一个支持IPv6地址。您必须使用相同的IP协议配置冗余接口对的网络接口。
                     </p>
                     <p>您可以使用IPv4或IPv6地址为所有网络适配器配置一个或多个专用网络接口。您不能将IPv4和IPv6地址混合用于任何专用网络接口。</p>
                     <div class="infoboxnote" id="GUID-F6217425-BBF4-4989-B943-7A660E03E6BE__GUID-6B4090EA-E430-4338-B14B-37AAB4A6883B">
                        <p class="notep1">注意：</p>您只能使用Oracle Clusterware 12 <span class="italic">c第</span> 2版（12.2）或更高版本将IPv6用于群集中的专用网络。
                     </div>
                     <p>群集中的所有节点都必须使用相同的IP协议配置。所有节点都只使用IPv4，或者所有节点仅使用IPv6，或者所有节点都使用IPv4和IPv6。您不能将群集中的某些节点配置为仅支持IPv6地址，并且群集中的其他节点配置为仅支持IPv4地址。</p>
                     <p>VIP代理支持使用无状态地址自动配置协议（RFC 2462）生成IPv6地址，并使用GNS通告这些地址。运行<code class="codeph">srvctl config network</code>命令以确定是否正在使用DHCP或无状态地址自动配置。
                     </p>
                     <p>本节包括以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-F30EEE1E-2BB8-485C-950D-A2D08C678DC4">关于IPv6地址格式</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-DD7F6BB0-FA92-4EC5-A402-3DCF52EECCEF">名称解析和网络资源地址类型</a></p>
                        </li>
                     </ul>
                  </div><a id="CWADD92558"></a><div class="props_rev_3"><a id="GUID-F30EEE1E-2BB8-485C-950D-A2D08C678DC4" name="GUID-F30EEE1E-2BB8-485C-950D-A2D08C678DC4"></a><h5 id="CWADD-GUID-F30EEE1E-2BB8-485C-950D-A2D08C678DC4" class="sect5">关于IPv6地址格式</h5>
                     <div>
                        <p>Oracle Grid Infrastructure群集中的每个节点都可以在同一网络上同时支持IPv4和IPv6地址。首选的IPv6地址格式如下，其中每个x代表一个十六进制字符：</p><pre class="oac_no_warn" dir="ltr">XXXX：XXXX：XXXX：XXXX：XXXX：XXXX：XXXX：XXXX</pre><p>IPv6地址格式由RFC 2460定义，Oracle Grid Infrastructure支持IPv6地址，如下所示：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>RFC 4193定义的全局和站点本地IPv6地址。</p>
                              <div class="infoboxnote" id="GUID-F30EEE1E-2BB8-485C-950D-A2D08C678DC4__GUID-3F9741A8-C7E5-4EE8-9E9D-2F48A062F373">
                                 <p class="notep1">注意：</p>
                                 <p><span class="italic">不</span>支持RFC 1884 <span class="italic">中</span>定义的链路本地和站点本地IPv6地址。
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>在IP地址的每个字段中压缩的前导零。</p>
                           </li>
                           <li>
                              <p>空字段已折叠并由“::”分隔符表示。例如，您可以将IPv6地址2001：0db8：0000：0000：0000：8a2e：0370：7334写为2001：db8 :: 8a2e：370：7334。</p>
                           </li>
                           <li>
                              <p>四个低位字段包含8位片段（标准IPv4地址格式）。例如2001：db8：122：344 :: 192.0.2.33。</p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="CWADD92559"></a><div class="props_rev_3"><a id="GUID-DD7F6BB0-FA92-4EC5-A402-3DCF52EECCEF" name="GUID-DD7F6BB0-FA92-4EC5-A402-3DCF52EECCEF"></a><h5 id="CWADD-GUID-DD7F6BB0-FA92-4EC5-A402-3DCF52EECCEF" class="sect5">名称解析和网络资源地址类型</h5>
                     <div>
                        <p>您可以分别使用<code class="codeph">srvctl config network</code> （查看配置）和<code class="codeph">srvctl modify network -iptype</code>命令查看网络配置并控制网络地址类型。
                        </p>
                        <p>您可以使用<code class="codeph">srvctl modify network -nettype</code>命令配置地址的获取方式。将<code class="codeph">-nettype</code>参数的值设置为<code class="codeph">dhcp</code>或<code class="codeph">static</code>以控制如何获取IPv4网络地址。或者，将<code class="codeph">-nettype</code>参数的值设置为<code class="codeph">autoconfig</code>或<code class="codeph">static</code>以控制IPv6地址的生成方式。
                        </p>
                        <p><code class="codeph">-nettype</code>和<code class="codeph">-iptype</code>参数不直接相关，但您可以将<code class="codeph">-nettype dhcp</code>与<code class="codeph">-iptype ipv4</code>和<code class="codeph">-nettype autoconfig</code>与<code class="codeph">-iptype ipv6</code> 。
                        </p>
                        <div class="infoboxnote" id="GUID-DD7F6BB0-FA92-4EC5-A402-3DCF52EECCEF__GUID-57D83B21-D882-4B1C-B8A2-62B3F343C88C">
                           <p class="notep1">注意：</p>
                           <p>如果网络配置了IPv4和IPv6子网，则Oracle不支持将<code class="codeph">-nettype</code>设置为<code class="codeph">mixed</code>两个子网。
                           </p>
                           <p>当<code class="codeph">-nettype</code>设置为<code class="codeph">mixed</code> Oracle不支持从IPv4转换为IPv6。在将IPv6添加到子网之前，必须先完成从<code class="codeph">static</code>到<code class="codeph">dhcp</code>的转换。
                           </p>
                           <p>同样，当<code class="codeph">-nettype</code>设置为<code class="codeph">mixed</code> ，Oracle不支持从IPv6开始向IPv4过渡。在将IPv4添加到子网之前，必须先完成从<code class="codeph">autoconfig</code>到<code class="codeph">static</code>的转换。
                           </p>
                        </div>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="oracle-clusterware-administration.html#GUID-4E4B32AC-AF25-4C79-B1C0-1DCA3DA61B0D" title="您可以为给定网络上的IPv4，IPv6或这两种类型的地址配置网络接口。">群集中的网络地址配置</a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="CWADD11847"></a><div class="props_rev_3"><a id="GUID-494167AF-9BDC-4E61-B6EE-21B95B881272" name="GUID-494167AF-9BDC-4E61-B6EE-21B95B881272"></a><h4 id="CWADD-GUID-494167AF-9BDC-4E61-B6EE-21B95B881272" class="sect4">了解SCAN地址和客户端服务连接</h4>
                  <div>
                     <p>公共网络地址用于向客户端提供服务。</p>
                     <p>如果客户端连接到单客户端访问名称（SCAN）地址，则可能需要在从群集添加或删除节点时更改公共和虚拟IP地址，但不需要使用新的群集地址更新客户端。</p>
                     <div class="infoboxnote" id="GUID-494167AF-9BDC-4E61-B6EE-21B95B881272__GUID-0D7272D8-60DC-4AC0-B1C2-60C208DEED79">
                        <p class="notep1">注意：</p>
                        <p>您可以编辑<code class="codeph">listener.ora</code>文件以修改SCAN和节点侦听器的Oracle Net侦听器参数。例如，您可以设置TRACE_LEVEL_ <code class="codeph"><span class="variable" translate="no">listener_name</span></code> 。但是，您无法设置协议地址参数来定义侦听端点，因为侦听器代理会动态地管理它们。
                        </p>
                     </div>
                     <p>SCAN的功能类似于集群别名。但是，SCAN在群集中的任何节点上都已解析，因此与节点的VIP地址不同，连接到SCAN的客户端不再需要更新的VIP地址，因为节点已添加到群集或从群集中删除。由于SCAN地址解析为群集，而不是群集中的节点地址，因此可以在不影响SCAN地址配置的情况下将节点添加到群集或从群集中删除节点。</p>
                     <p>SCAN是完全限定名称（主机名和域），配置为解析为SCAN分配的所有地址。 SCAN解析为在DNS服务器上为SCAN名称配置的所有三个地址，或在GNS配置中在群集内解析。SCAN侦听器可以在群集中的任何节点上运行。SCAN为数据库提供位置独立性，因此客户端配置不必依赖于运行特定数据库的节点。</p>
                     <p>Oracle Database <span class="italic">11g第</span> 2版（11.2）及更高版本的实例仅作为远程侦听器向SCAN侦听器注册。升级后的数据库将SCAN侦听器注册为远程侦听器，并继续向所有节点侦听器注册。
                     </p>
                     <div class="infoboxnote" id="GUID-494167AF-9BDC-4E61-B6EE-21B95B881272__GUID-55685470-8944-4106-8530-0F8E9CB0E1EB">
                        <p class="notep1">注意：</p>
                        <p>由于Oracle Clusterware安装要求您在安装期间提供SCAN名称，如果您使用服务器<code class="codeph">/etc/hosts</code>文件解析了至少一个IP地址以绕过安装要求但是您没有SCAN所需的基础结构，那么，安装后，您可以忽略SCAN并使用VIP连接到群集中的数据库。
                        </p>
                        <p>Oracle <span class="italic">不</span>支持删除SCAN地址。
                        </p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../netrf/index.html" target="_blank"><span><cite>Oracle数据库网络服务参考</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD92569"></a><div class="props_rev_3"><a id="GUID-18CE6E12-C1BD-4C72-A9F8-F5A74F7E75BF" name="GUID-18CE6E12-C1BD-4C72-A9F8-F5A74F7E75BF"></a><h4 id="CWADD-GUID-18CE6E12-C1BD-4C72-A9F8-F5A74F7E75BF" class="sect4">具有有效节点检查的SCAN监听器和服务注册限制</h4>
                  <div>
                     <p>您可以使用有效的节点检查来指定SCAN侦听器接受注册的节点和子网。您可以使用SRVCTL指定节点和子网信息。 SRVCTL将节点和子网信息存储在SCAN侦听器资源概要文件中。SCAN侦听器代理从资源概要文件中读取该信息，并将其写入<code class="codeph">listener.ora</code>文件。
                     </p>
                     <p>对于非集群（单实例）数据库，本地侦听器仅接受来自本地节点上的数据库实例的服务注册。在Oracle RAC <span class="italic">11g第</span> 2版（11.2）之前的Oracle RAC版本不使用SCAN侦听器，并尝试使用本地侦听器和<code class="codeph">REMOTE_LISTENERS</code>初始化参数定义的侦听器注册其服务。要支持这些数据库实例的服务注册，Oracle RAC 12 <span class="italic">c中</span>本地侦听器的<code class="codeph">valid_node_check_for_registration_ <span class="variable" translate="no">alias</span></code>的缺省值将设置为<code class="codeph">SUBNET</code>值，而不是本地节点。要更改节点侦听器的有效节点检查设置，请编辑<code class="codeph">listener.ora</code>文件。
                     </p>
                     <p>SCAN侦听器知道HTTP协议，因此它可以将HTTP客户端重定向到适当的处理程序，该处理程序可以驻留在集群中的不同节点上，而不是SCAN侦听器所驻留的节点。</p>
                     <p>SCAN侦听器必须从远程节点上的实例接受服务注册。对于SCAN侦听器， <code class="codeph">valid_node_check_for_registration_ <span class="variable" translate="no">alias</span></code>的值在<code class="codeph">listener.ora</code>文件中设置为<code class="codeph">SUBNET</code> ，以便相应的侦听器可以接受来自同一子网的服务注册。
                     </p>
                     <p>您可以将侦听器配置为接受来自不同子网的服务注册。例如，您可能希望在SCAN侦听器与不同群集上的实例共享时配置此环境，并且这些群集中的节点位于不同的子网上。运行<code class="codeph">srvctl modfiy scan_listener -invitednodes -invitedsubnets</code>命令以包含此环境中的节点。
                     </p>
                     <p>您还必须运行<code class="codeph">srvctl modify nodeapps -remoteservers <span class="variable" translate="no">host</span> : <span class="variable" translate="no">port</span> ,...</code>命令以连接此群集的Oracle Notification Service网络和具有受邀实例的群集。
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../racad/server-control-utility-reference.html#RACAD-GUID-C2D37BAB-DA98-49B4-A777-F2B3AA8D2E7A" target="_blank"><span><cite>“Oracle Real Application Clusters管理和部署指南”</cite></span></a></li>
                           <li><a href="../netag/configuring-and-administering-oracle-net-listener.html#NETAG-GUID-C3C40DBA-4282-41E1-9562-4B8B10947C4E" target="_blank"><span><cite>Oracle数据库网络服务管理员指南</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-D758D229-D03F-449B-9850-64C2A7E57631" name="GUID-D758D229-D03F-449B-9850-64C2A7E57631"></a><h3 id="CWADD-GUID-D758D229-D03F-449B-9850-64C2A7E57631" class="sect3">配置共享单客户端访问名称</h3>
               <div>
                  <p>共享单客户端访问名称（SCAN）使您可以在与其他群集的专用群集上共享一组SCAN虚拟IP（VIP）和侦听器。</p>
               </div>
               <div class="sect3"><a id="GUID-2A2D4B28-0237-46D0-8243-330D693E8AD3" name="GUID-2A2D4B28-0237-46D0-8243-330D693E8AD3"></a><h4 id="CWADD-GUID-2A2D4B28-0237-46D0-8243-330D693E8AD3" class="sect4">关于配置共享单客户端访问名称</h4>
                  <div>
                     <p>您必须在数据库服务器和数据库客户端上配置共享单客户端访问名称（SCAN）。</p>
                     <p>使用共享SCAN使多个群集能够使用单个公共SCAN虚拟IP（VIP）地址集来管理用户连接，而不是为每个群集部署一组SCAN VIP。例如，使用共有30个IP地址而不是10个群集，每个群集部署3个SCAN VIP，使用共享SCAN部署，您只需为这10个群集部署3个SCAN VIP，只需要3个IP地址。</p>
                     <p>请注意，Oracle Real Application Cluster（Oracle RAC）数据库群集需要SCAN VIP（共享或其他），但不适用于应用程序成员群集或域服务群集。</p>
                     <p>配置共享SCAN的一般过程是使用<code class="codeph">srvctl</code>实用程序首先在服务器（即托管共享SCAN的集群）上进行配置，然后在客户端（将使用此共享SCAN的Oracle RAC集群）上进行配置。在服务器上，除了使用<code class="codeph">srvctl</code>进行配置之外，还必须设置环境变量，创建凭证文件，并确保特定于SCAN集群的Oracle Notification Service（ONS）进程可以访问其自己的配置目录以创建并管理ONS配置。
                     </p>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-23F9AC93-4A4F-4986-B91A-147C8FA4100E" name="GUID-23F9AC93-4A4F-4986-B91A-147C8FA4100E"></a><h4 id="CWADD-GUID-23F9AC93-4A4F-4986-B91A-147C8FA4100E" class="sect4">配置共享SCAN的使用</h4>
                  <div>
                     <p>除执行其他必要的配置任务外，还使用SRVCTL在承载专用群集的服务器上配置共享SCAN。</p>
                     <ol>
                        <li class="stepexpand"><span>登录要配置共享SCAN的服务器群集。</span></li>
                        <li class="stepexpand"><span>创建一个独立于此共享SCAN集群的SCAN侦听器，如下所示：</span><div><pre class="pre codeblock"><code>$ srvctl add scan_listener -clientcluster <span class="variable" translate="no">cluster_name</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>创建特定于服务器群集的新Oracle Notification Service（ONS）资源。</span><div><pre class="pre codeblock"><code>$ srvctl add ons -clientcluster <span class="variable" translate="no">cluster_name</span></code></pre></div>
                           <div><code class="codeph">srvctl add ons</code>命令为SCAN分配ID。</div>
                        </li>
                        <li class="stepexpand"><span>将SCAN侦听器导出到客户端群集，如下所示：</span><div><pre class="pre codeblock"><code>$ srvctl export scan_listener -clientcluster <span class="variable" translate="no">cluster_name</span> -clientdata <span class="variable" translate="no">file_name</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将ONS资源导出到客户端群集，如下所示：</span><div><pre class="pre codeblock"><code>$ srvctl export ons -clientcluster <span class="variable" translate="no">cluster_name</span> -clientdata <span class="variable" translate="no">file_name</span></code></pre></div>
                           <div>
                              <div class="infoboxnote" id="GUID-23F9AC93-4A4F-4986-B91A-147C8FA4100E__GUID-76B021B0-1726-4CF8-8769-9B3F1CA2183F">
                                 <p class="notep1">注意：</p>您可以为SCAN侦听器和ONS使用相同的凭据文件名。 SRVCTL创建一个凭据文件，您将这些对象添加到客户端群集时将使用该文件。
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>小号</span></li>
                        <li class="stepexpand"><span>在将使用此服务的每个群集上配置共享SCAN。</span><ol type="a">
                              <li class="substepexpand"><span>登录要配置共享SCAN的客户端群集。</span></li>
                              <li class="substepexpand"><span>将SCAN添加到客户端群集，如下所示：</span><div><pre class="pre codeblock"><code>$ srvctl add scan -clientdata <span class="variable" translate="no">file_name</span></code></pre></div>
                              </li>
                              <li class="substepexpand"><span>创建此客户端群集独有的SCAN侦听器，如下所示：</span><div><pre class="pre codeblock"><code>$ srvctl add scan_listener -clientdata <span class="variable" translate="no">file_name</span></code></pre></div>
                              </li>
                              <li class="substepexpand"><span>为此群集创建ONS资源，如下所示：</span><div><pre class="pre codeblock"><code>$ srvctl add ons -clientdata <span class="variable" translate="no">file_name</span></code></pre><div class="infoboxnote" id="GUID-23F9AC93-4A4F-4986-B91A-147C8FA4100E__GUID-6FFA3FE7-5696-4683-9DB4-2FD7BADD088D">
                                       <p class="notep1">注意：</p>对于上述每个命令，请指定您在先前步骤中创建的凭据文件的名称。
                                    </div>
                                 </div>
                              </li>
                           </ol>
                        </li>
                     </ol>
                  </div>
               </div>
            </div><a id="CWADD92605"></a><div class="props_rev_3"><a id="GUID-4C37D5FD-C68D-4561-BC9F-2183EA166101" name="GUID-4C37D5FD-C68D-4561-BC9F-2183EA166101"></a><h3 id="CWADD-GUID-4C37D5FD-C68D-4561-BC9F-2183EA166101" class="sect3">在手动配置的系统上更改网络地址</h3>
               <div>
                  <p>您可以在手动配置的系统上执行网络地址维护。</p>
                  <p>以下主题对此进行了描述：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-DCA6B7FF-70F7-4CBC-9E87-0ACB4F69AD4A" title="您可以使用SRVCTL更改虚拟IP地址。">使用SRVCTL更改虚拟IP地址</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-2ED1AAF6-F26F-4A3F-A334-38C8EF6BC42F" title="您可以更改Oracle Clusterware专用网络配置。">更改Oracle Clusterware专用网络配置</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-8A7E30F0-6D43-46CC-B453-6C8806886052" title="您可以使用SRVCTL为集群成员节点创建网络，以及添加应用程序配置信息。">使用SRVCTL创建网络</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-4E4B32AC-AF25-4C79-B1C0-1DCA3DA61B0D" title="您可以为给定网络上的IPv4，IPv6或这两种类型的地址配置网络接口。">群集中的网络地址配置</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-A9E0A17D-6A9B-4A28-BB7A-5B65526F1D60" title="当您从IPv4静态地址更改为IPv6静态地址时，只需添加IPv6地址并修改网络以短暂接受IPv4和IPv6地址，然后再切换到使用静态IPv6地址。">使用SRVCTL将静态IPv4地址更改为静态IPv6地址</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-B7A584D6-5279-46CB-BBAD-701CF4309816" title="您可以通过SRVCTL命令将动态IPv4地址更改为动态IPv6地址。">使用SRVCTL将动态IPv4地址更改为动态IPv6地址</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-4406AD31-76D8-4FBA-AA5E-1D60643FB720" title="您可以通过将IPv6网络添加到现有IPv4网络，将IPv4网络更改为IPv4和IPv6网络。">将IPv4网络更改为IPv4和IPv6网络</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-clusterware-administration.html#GUID-9434505A-80BA-4B85-A29C-E83C0FBC86D6" title="您使用SRVCTL命令从组合的IPv4和IPv6网络中删除IPv4地址类型。">使用SRVCTL从VIP地址过渡到IPv6网络</a></p>
                     </li>
                  </ul>
               </div><a id="CWADD92080"></a><div class="props_rev_3"><a id="GUID-DCA6B7FF-70F7-4CBC-9E87-0ACB4F69AD4A" name="GUID-DCA6B7FF-70F7-4CBC-9E87-0ACB4F69AD4A"></a><h4 id="CWADD-GUID-DCA6B7FF-70F7-4CBC-9E87-0ACB4F69AD4A" class="sect4">使用SRVCTL更改虚拟IP地址</h4>
                  <div>
                     <p>您可以使用SRVCTL更改虚拟IP地址。</p>
                     <div class="section">
                        <p>在Oracle Database <span class="italic">11g第</span> 2版（11.2）之前配置为使用Oracle数据库版本的公共VIP地址的客户端可以继续使用其现有的连接地址。Oracle建议您将客户端配置为使用SCAN，但不要求您使用SCAN。升级早期版本的Oracle数据库时，它会向SCAN注册，客户端可以开始使用SCAN连接到该数据库，或继续使用VIP地址进行连接。
                        </p>
                        <p>如果继续使用VIP地址进行客户端连接，则可以在Oracle Database和Oracle ASM继续运行时修改VIP地址。但是，您必须在修改地址时停止服务。重新启动VIP地址时，也会在节点上重新启动服务。</p>
                        <p>您无法使用此过程更改静态公有子网以使用DHCP。只有<code class="codeph">srvctl add network -subnet</code>命令<code class="codeph">srvctl add network -subnet</code>创建DHCP网络。
                        </p>
                        <div class="infoboxnote" id="GUID-DCA6B7FF-70F7-4CBC-9E87-0ACB4F69AD4A__GUID-77DA9B8E-D5F3-41D8-93D7-304957EE4A67">
                           <p class="notep1">注意：</p>
                           <p>以下说明介绍了如何仅更改VIP地址，并假设与VIP地址关联的主机名不会更改。请注意，如果使用GNS，则无需手动更新VIP地址，并且使用DHCP分配VIP。</p>
                           <p>如果仅更改VIP地址，请更新DNS和客户端主机文件。此外，更新服务器主机文件（如果这些文件用于VIP地址）。</p>
                        </div>
                        <p>执行以下步骤更改VIP地址：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>使用以下命令语法停止要更改其VIP地址的节点上运行的所有服务，其中<code class="codeph"><span class="variable" translate="no">database_name</span></code>是<code class="codeph"><span class="variable" translate="no">database_name</span></code>的名称， <code class="codeph"><span class="variable" translate="no">service_name_list</span></code>是要停止的服务的列表， <code class="codeph"><span class="variable" translate="no">my_node</span></code>是其节点的名称您想要更改的VIP地址：</span><div><pre class="pre codeblock"><code>srvctl stop service -db <span class="variable" translate="no">database_name</span> -service“ <span class="variable" translate="no">service_name_list</span> ”-node <span class="variable" translate="no">node_name</span></code></pre><p>以下示例使用<code class="codeph">-db</code>选项指定数据库名称（ <code class="codeph">grid</code> ），并指定相应节点（ <code class="codeph">mynode</code> ）上的服务（ <code class="codeph">sales,oltp</code> <code class="codeph">mynode</code> ）。
                              </p><pre class="pre codeblock"><code>$ srvctl stop service -db grid -service“sales，oltp”-node mynode</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>通过运行<code class="codeph">srvctl config vip</code>命令确认VIP地址的当前IP地址。此命令显示绑定到其中一个网络接口的当前VIP地址。以下示例显示名为<code class="codeph">node03-vip</code>的VIP的已配置VIP地址：</span><div><pre class="pre codeblock"><code>$ srvctl config vip -vipname node03-vip VIP存在：/node03-vip/192.168.2.20/255.255.255.0/eth0</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>使用<code class="codeph">srvctl stop vip</code>命令停止VIP资源：</span><div><pre class="pre codeblock"><code>$ srvctl stop vip -node <span class="variable" translate="no">node_name</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>通过在Linux和UNIX系统上运行<code class="codeph">ifconfig -a</code>命令（或在Windows系统上发出<code class="codeph">ipconfig /all</code>命令）验证VIP资源是否已不再运行，并确认接口（在示例中为<code class="codeph">eth0:1</code> ）是不再列在输出中。</span></li>
                        <li class="stepexpand"><span>对Linux和UNIX系统上的所有节点上的<code class="codeph">/etc/hosts</code>文件或Windows系统上的<code class="codeph">%windir%\system32\drivers\etc\hosts</code>文件进行必要的更改，并进行必要的DNS更改以关联新IP地址使用旧主机名。</span></li>
                        <li class="stepexpand"><span>要在更改任何VIP资源之前为默认网络使用不同的子网或网络接口卡，必须以<code class="codeph">root</code>身份使用<code class="codeph">srvctl modify network -subnet <span class="variable" translate="no">subnet</span> / <span class="variable" translate="no">netmask</span> / <span class="variable" translate="no">interface</span></code>命令更改网络资源，其中<code class="codeph"><span class="variable" translate="no">subnet</span></code>是新的子网地址， <code class="codeph"><span class="variable" translate="no">netmask</span></code>是新的网络掩码， <code class="codeph"><span class="variable" translate="no">interface</span></code>是新的接口。更改子网后，必须将每个节点的VIP更改为新子网上的IP地址，如下一步所述。</span></li>
                        <li class="stepexpand"><span>修改节点应用程序并使用以下<code class="codeph">srvctl modify nodeapps</code>语法提供新的VIP地址：</span><div><pre class="pre codeblock"><code>$ srvctl modify nodeapps -node <span class="variable" translate="no">node_name</span> -address <span class="variable" translate="no">new_vip_address</span></code></pre><p>该命令包括以下标志和值：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">-n <span class="variable" translate="no">node_name</span></code>是节点名称</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">-A new_vip_address</span></code>是节点级别的VIP地址： <code class="codeph"><span class="variable" translate="no">name</span> | <span class="variable" translate="no">ip</span> / <span class="variable" translate="no">netmask</span> /[ <span class="variable" translate="no">if1</span> [| <span class="variable" translate="no">if2</span> |...]]</code></p>
                                    <p>例如，以<code class="codeph">root</code>用户身份运行以下命令：</p><pre class="pre codeblock"><code>#srvctl modify nodeapps -node mynode -address 192.168.2.125/255.255.255.0/eth0</code></pre><p>尝试以安装所有者帐户身份运行此命令可能会导致错误。例如，如果安装所有者是<code class="codeph">oracle</code> ，那么您可能会看到错误<code class="codeph">PRCN-2018: Current user oracle is not a privileged user</code> 。要避免该错误，请以<code class="codeph">root</code>或系统管理员帐户身份运行该命令。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>通过运行<code class="codeph">srvctl start vip</code>命令启动节点VIP：</span><div><pre class="pre codeblock"><code>$ srvctl start vip -node <span class="variable" translate="no">node_name</span></code></pre><p>以下命令示例在名为<code class="codeph">mynode</code>的节点上启动VIP：</p><pre class="pre codeblock"><code>$ srvctl start vip -node mynode</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>对群集中的每个节点重复这些步骤。</span><div>
                              <p>由于SRVCTL实用程序是群集范围的管理工具，因此您可以从群集中的任何节点为任何特定节点完成这些任务，而无需登录到每个群集节点。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>运行以下命令以验证为其配置了群集的所有节点之间的节点连接。此命令可发现群集节点上可用的所有网络接口，并通过发现的接口验证所有节点之间的连接。此命令还列出节点上可用的所有适合用作VIP地址的接口。</span><div><pre class="pre codeblock"><code>$ cluvfy comp nodecon -n all -verbose</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../racad/server-control-utility-reference.html#RACAD-GUID-E9B08A79-CE87-47ED-8FD8-7EAF421CCD88" target="_blank"><span><cite>“Oracle Real Application Clusters管理和部署指南”</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD90980"></a><div class="props_rev_3"><a id="GUID-2ED1AAF6-F26F-4A3F-A334-38C8EF6BC42F" name="GUID-2ED1AAF6-F26F-4A3F-A334-38C8EF6BC42F"></a><h4 id="CWADD-GUID-2ED1AAF6-F26F-4A3F-A334-38C8EF6BC42F" class="sect4">更改Oracle Clusterware专用网络配置</h4>
                  <div>
                     <p>您可以更改Oracle Clusterware专用网络配置。</p>
                     <p>本节介绍以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-BAB8261E-5456-4743-96F5-A346D8107307" title="Oracle Clusterware要求每个节点通过专用网络（除了公共网络）连接。专用网络连接称为群集互连。">关于专用网络和网络接口</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-478452E9-5A0B-4B36-BF82-CDF585007D14" title="通过使用oifcfg setif命令在安装期间或安装后将接口的角色分类为私有，可以为冗余互连使用定义多个接口。">冗余互连使用</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-B1E152E6-2C4D-4F0A-90D4-207146C2B317" title="更改接口名称的后果取决于您要更改的名称，以及是否还要更改IP地址。">使用OIFCFG更改接口名称的后果</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-administration.html#GUID-B1FF2FB7-0F60-4B00-90A8-0A9AA99DB073" title="您可以使用OIFCFG命令更改网络接口及其关联的子网地址。">更改网络接口</a></p>
                        </li>
                     </ul>
                  </div><a id="CWADD91499"></a><a id="CWADD92112"></a><div class="props_rev_3"><a id="GUID-BAB8261E-5456-4743-96F5-A346D8107307" name="GUID-BAB8261E-5456-4743-96F5-A346D8107307"></a><h5 id="CWADD-GUID-BAB8261E-5456-4743-96F5-A346D8107307" class="sect5">关于专用网络和网络接口</h5>
                     <div>
                        <p>Oracle Clusterware要求每个节点通过专用网络（除了公共网络）连接。专用网络连接称为群集互连。</p>
                        <p><a href="oracle-clusterware-administration.html#GUID-BAB8261E-5456-4743-96F5-A346D8107307__CHDJJEJH" title="此表提供有关网络适配器的存储，专用网络IP地址和专用主机名的信息。">表2-1</a>描述了如何存储网络接口卡和专用IP地址。
                        </p>
                        <p>Oracle仅支持所有节点使用连接到同一子网的相同网络接口的集群（使用<code class="codeph">oifcfg</code>命令定义为全局接口）。您不能为每个节点（特定于节点的接口）使用不同的网络接口。
                        </p>
                        <div class="tblformal" id="GUID-BAB8261E-5456-4743-96F5-A346D8107307__CHDJJEJH">
                           <p class="titleintable">表2-1网络接口，专用IP地址和专用主机名的存储</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="存储网络接口，专用IP地址和专用主机名" width="100%" border="1" summary="This table provides information about storage of the network adapter, the private network IP address, and the private host name." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d13771e8467">实体</th>
                                    <th align="left" valign="bottom" id="d13771e8470">存储在......</th>
                                    <th align="left" valign="bottom" id="d13771e8473">评论</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d13771e8478" headers="d13771e8467 ">
                                       <p>网络接口名称</p>
                                    </td>
                                    <td align="left" valign="top" headers="d13771e8478 d13771e8470 ">
                                       <p>操作系统</p>
                                       <p>例如： <code class="codeph">eth1</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d13771e8478 d13771e8473 ">
                                       <p>指定网络接口名称时，可以使用通配符。</p>
                                       <p>例如： <code class="codeph">eth*</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d13771e8496" headers="d13771e8467 ">
                                       <p>专用网络接口</p>
                                    </td>
                                    <td align="left" valign="top" headers="d13771e8496 d13771e8470 ">
                                       <p>Oracle Clusterware，在网格即插即用（GPnP）配置文件中</p>
                                    </td>
                                    <td align="left" valign="top" headers="d13771e8496 d13771e8473 ">
                                       <p>通过将接口标记为<span class="bold">Private来</span>配置在安装期间用作专用接口的接口，或使用<code class="codeph">oifcfg setif</code>命令将接口指定为专用接口。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="oracle-interface-configuration-tool-oifcfg-command-reference.html#GUID-518BD051-E9F1-4B62-B86B-02A90C252580" title="使用这些命令可以定义和管理网络接口。">Oracle接口配置工具（OIFCFG）命令参考</a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CWADD92358"></a><div class="props_rev_3"><a id="GUID-478452E9-5A0B-4B36-BF82-CDF585007D14" name="GUID-478452E9-5A0B-4B36-BF82-CDF585007D14"></a><h5 id="CWADD-GUID-478452E9-5A0B-4B36-BF82-CDF585007D14" class="sect5">冗余互连使用</h5>
                     <div>
                        <p>通过使用<code class="codeph">oifcfg setif</code>命令在安装期间或安装后将接口的角色分类为私有，可以为冗余互连使用定义多个接口。
                        </p>
                        <p>执行此操作时，Oracle Clusterware会创建一到四个（取决于您定义的接口数量）高可用性IP（HAIP）地址，Oracle数据库和Oracle ASM实例使用这些地址来确保高可用性和负载平衡通信。</p>
                        <p>默认情况下，Oracle软件（包括Oracle RAC，Oracle ASM和Oracle ACFS，均为11 <span class="italic">g</span>版本2（11.2.0.2）或更高版本）使用由私有角色指定的接口的HAIP地址作为HAIP地址。所有流量，在提供的一组群集互连接口上实现负载平衡。如果其中一个已定义的群集互连接口出现故障或变为非通信，则Oracle Clusterware会将相应的HAIP地址透明地移动到其余功能接口之一。
                        </p>
                        <p>例如，安装后，如果将新接口添加到名为<code class="codeph">eth3</code>且子网号为172.16.2.0的服务器，则使用以下命令使此接口可供Oracle Clusterware用作专用接口：</p><pre class="pre codeblock"><code>$ oifcfg setif -global eth3 / 172.16.2.0：cluster_interconnect</code></pre><p>Oracle Clusterware在<code class="codeph">eth3</code>为169.254时显示HAIP地址。*。*（这是HAIP的保留子网），数据库，Oracle ASM和Oracle ACFS使用该地址进行通信，Oracle Clusterware也使用172.16.2.0地址进行通信。
                        </p>
                        <div class="infoboxnote" id="GUID-478452E9-5A0B-4B36-BF82-CDF585007D14__GUID-B46FC696-23F5-44BD-A0A8-1F1CA0C4229E">
                           <p class="notep1">警告：</p>
                           <p>不要使用OIFCFG对HAIP子网进行分类（169.264。*。*）。您可以使用OIFCFG记录Oracle Clusterware的接口名称，子网和类型（公共，群集互连或Oracle ASM）。但是，您无法使用OIFCFG修改每个接口的实际IP地址。</p>
                        </div>
                        <div class="infoboxnote" id="GUID-478452E9-5A0B-4B36-BF82-CDF585007D14__GUID-F29BAD2C-072E-48CF-8F00-775E6C71B37C">
                           <p class="notep1">注意：</p>
                           <p>无论定义的接口数量如何，Oracle Clusterware在任何给定点最多使用四个接口。如果其中一个接口出现故障，则HAIP地址将移至已定义集中的另一个已配置接口。</p>
                           <p>当只有一个HAIP地址和多个接口可供选择时，HAIP地址移动的接口不再是配置它的原始接口。Oracle Clusterware选择具有要添加HAIP地址的<span class="italic">最低</span>数字子网的接口。
                           </p>
                        </div>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="../install-and-upgrade.html" target="_blank"><span><cite>Oracle Grid Infrastructure安装和升级指南</cite></span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CWADD92113"></a><div class="props_rev_3"><a id="GUID-B1E152E6-2C4D-4F0A-90D4-207146C2B317" name="GUID-B1E152E6-2C4D-4F0A-90D4-207146C2B317"></a><h5 id="CWADD-GUID-B1E152E6-2C4D-4F0A-90D4-207146C2B317" class="sect5">使用OIFCFG更改接口名称的后果</h5>
                     <div>
                        <p>更改接口名称的后果取决于您要更改的名称，以及是否还要更改IP地址。</p>
                        <p>如果您只更改接口名称，则后果很小。如果更改存储在OCR中的公共接口的名称，则还必须修改群集的节点应用程序。因此，必须停止节点应用程序才能使此更改生效。</p>
                     </div>
                  </div><a id="CWADD92114"></a><div class="props_rev_3"><a id="GUID-B1FF2FB7-0F60-4B00-90A8-0A9AA99DB073" name="GUID-B1FF2FB7-0F60-4B00-90A8-0A9AA99DB073"></a><h5 id="CWADD-GUID-B1FF2FB7-0F60-4B00-90A8-0A9AA99DB073" class="sect5">更改网络接口</h5>
                     <div>
                        <p>您可以使用OIFCFG命令更改网络接口及其关联的子网地址。</p>
                        <div class="section">
                           <p>此过程更改Oracle Clusterware和Oracle数据库先前使用的集群中每个节点上的网络接口和IP地址。</p>
                           <div class="infoboxnote" id="GUID-B1FF2FB7-0F60-4B00-90A8-0A9AA99DB073__GUID-BF66973B-137A-4703-A0A5-BC26E669240B">
                              <p class="notep1">警告：</p>
                              <p>Oracle RAC（RDBMS）互连使用的接口必须与Oracle Clusterware与主机名使用的接口相同。请勿在不受Oracle Clusterware监控的单独接口上为Oracle RAC配置专用互连。</p>
                           </div>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>通过运行以下命令，确保Oracle Clusterware在所有群集节点上运行：</span><div><pre class="pre codeblock"><code>$ olsnodes -s</code></pre><p>该命令返回类似于以下内容的输出，表明Oracle Clusterware正在群集中的所有节点上运行：</p><pre class="pre codeblock"><code>./olsnodes -s myclustera Active myclusterc Active myclusterb Active</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>确保在所有节点上的操作系统中配置并运行替换接口。对您的平台使用<code class="codeph">ifconfig</code>命令（或Windows上的<code class="codeph">ipconfig</code> ）。例如，在Linux上，使用：</span><div><pre class="pre codeblock"><code>$ / sbin / ifconfig</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>按如下所示将新接口添加到群集，使用以下命令提供新接口的名称和子网地址：</span><div><pre class="pre codeblock"><code>$ oifcfg setif -global <span class="variable" translate="no">if_name</span> / <span class="variable" translate="no">subnet</span> ：cluster_interconnect</code></pre><p>您可以使用带有接口名称的通配符。例如， <code class="codeph">oifcfg setif -global "eth*/192.168.0.0:cluster_interconnect</code>是有效的语法。但是，请注意避免与其他群集接口使用的其他地址或掩码混淆。如果使用通配符，则会看到类似于以下内容的警告：</p><pre class="pre codeblock"><code>eth * / 192.168.0.0 global cluster_interconnect PRIF-29：警告：网络参数中的通配符可能导致GPnP配置文件，OCR和系统不匹配</code></pre><div class="infoboxnote" id="GUID-B1FF2FB7-0F60-4B00-90A8-0A9AA99DB073__GUID-3EDBD708-59EB-413B-8FFE-9C4F52C79458">
                                    <p class="notep1">注意：</p>
                                    <p>旧网络配置不支持通配符;因此，在更新时使用当前节点配置解析通配符。</p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>如果更改Oracle ASM网络，则更新Oracle ASM侦听器，如下所示：</span><div><pre class="pre codeblock"><code>$ srvctl update listener -listener <span class="variable" translate="no">listener_name</span> -asm -remove -force $ srvctl add listener -listener <span class="variable" translate="no">listener_name</span> -asmlistener -subnet <span class="variable" translate="no">subnet</span></code></pre></div>
                           </li>
                           <li class="stepexpand"><span>完成上一步后，您可以通过提供以前接口的名称和子网地址来删除以前的子网，如下所示：</span><div><pre class="pre codeblock"><code>oifcfg delif -global <span class="variable" translate="no">if_name</span> / <span class="variable" translate="no">subnet</span></code></pre><p>例如：</p><pre class="pre codeblock"><code>$ oifcfg delif -global eth1 / 10.10.0.0</code></pre><div class="infoboxnote" id="GUID-B1FF2FB7-0F60-4B00-90A8-0A9AA99DB073__GUID-831ACA36-DC38-4B93-B79A-4C106A8F6E53">
                                    <p class="notep1">警告：</p>
                                    <p>只有在将替换接口提交到网格即插即用配置后，才应执行此步骤。在不提供有效替换的情况下简单删除集群接口可能导致无效的集群配置。</p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>使用以下命令验证当前配置：</span><div><pre class="pre codeblock"><code>oifcfg getif</code></pre><p>例如：</p><pre class="pre codeblock"><code>$ oifcfg getif eth2 10.220.52.0 global cluster_interconnect eth0 10.220.16.0 global public</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>如果更改专用网络，则通过在每个节点上以<code class="codeph">root</code>身份运行以下命令来停止所有节点上的Oracle Clusterware：</span><div><pre class="pre codeblock"><code>#crsctl停止crs</code></pre><div class="infoboxnote" id="GUID-B1FF2FB7-0F60-4B00-90A8-0A9AA99DB073__GUID-9FE09085-FE58-4A4F-A785-70DC1E3600BD">
                                    <p class="notep1">注意：</p>
                                    <p>如果您在eth0和eth1上配置了HAIP，并且您希望将eth1替换为eth3，那么您不必停止Oracle Clusterware。但是，如果要在HA0配置中添加另一组接口（例如eth2和eth3）（已在eth0和eth1上配置），则必须停止Oracle Clusterware。</p>
                                 </div>
                              </div>
                           </li>
                           <li class="stepexpand"><span>当Oracle Clusterware停止时，您可以使用<code class="codeph">ifconfig</code>命令在操作系统中取消配置已删除的网络接口。例如：</span><div><pre class="pre codeblock"><code>$ ifconfig down</code></pre><p>此时，从Oracle Clusterware中取消配置旧子网的网络接口的IP地址。此命令不影响操作系统上IP地址的配置。</p>
                                 <p>您必须更新操作系统配置更改，因为使用<code class="codeph">ifconfig</code>进行的更改不是持久的。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>通过以<code class="codeph">root</code>用户身份在群集中的每个节点上运行以下命令来重新启动Oracle Clusterware：</span><div><pre class="pre codeblock"><code>#crsctl start crs</code></pre><p>Oracle Clusterware重新启动时，更改将生效。</p>
                                 <p>如果使用<code class="codeph">CLUSTER_INTERCONNECTS</code>初始化参数，则必须更新它以反映更改。
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="oracle-interface-configuration-tool-oifcfg-command-reference.html#GUID-518BD051-E9F1-4B62-B86B-02A90C252580" title="使用这些命令可以定义和管理网络接口。">Oracle接口配置工具（OIFCFG）命令参考</a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="CWADD92608"></a><div class="props_rev_3"><a id="GUID-8A7E30F0-6D43-46CC-B453-6C8806886052" name="GUID-8A7E30F0-6D43-46CC-B453-6C8806886052"></a><h4 id="CWADD-GUID-8A7E30F0-6D43-46CC-B453-6C8806886052" class="sect4">使用SRVCTL创建网络</h4>
                  <div>
                     <p>您可以使用SRVCTL为集群成员节点创建网络，以及添加应用程序配置信息。</p>
                     <div class="section">
                        <p>为集群成员节点创建网络，如下所示：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以<code class="codeph">root</code>身份登录。</span></li>
                        <li class="stepexpand"><span>使用以下语法将节点应用程序添加到节点，其中：</span><div><pre class="pre codeblock"><code>srvctl add nodeapps -node <span class="variable" translate="no">node_name</span> -address { <span class="variable" translate="no">vip</span> | <span class="variable" translate="no">addr</span> } / <span class="variable" translate="no">netmask</span> [/ <span class="variable" translate="no">if1</span> [| <span class="variable" translate="no">if2</span> | ...]] [-pingtarget“ <span class="variable" translate="no">ping_target_list</span> ”]</code></pre><p>在上面的语法中：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">node_name</span></code>是节点的名称</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">vip</span></code>是VIP名称或<code class="codeph"><span class="variable" translate="no">addr</span></code>是IP地址</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">netmask</span></code>是网络掩码</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">if1</span></code> <code class="codeph">[|</code> <code class="codeph"><span class="variable" translate="no">if2</span></code> <code class="codeph">|...]</code>是一个管道（ <code class="codeph">|</code> ） - 限定的接口列表，供应用程序使用</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">ping_target_list</span></code>是以逗号分隔的要ping的IP地址或主机名列表</p>
                                 </li>
                              </ul>
                              <div class="infoboxnote" id="GUID-8A7E30F0-6D43-46CC-B453-6C8806886052__GUID-50035646-4ADF-47CE-8EE0-66547748D526">
                                 <p class="notep1">注意：</p>
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>当链接状态监视不像在虚拟机环境中那样工作时，请使用<code class="codeph">-pingtarget</code>参数。
                                       </p>
                                    </li>
                                    <li>
                                       <p>输入<code class="codeph">srvctl add nodeapps -help</code>命令以查看其他语法选项。
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                              <p>在以下使用<code class="codeph">srvctl add nodeapps</code>配置IPv4节点应用程序的示例中，节点名称为node1，网络掩码为255.255.252.0，接口为eth0：</p><pre class="pre codeblock"><code>#srvctl add nodeapps -node node1 -address node1-vip.mycluster.example.com/255.255.252.0/eth0</code></pre></div>
                        </li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../racad/server-control-utility-reference.html#RACAD-GUID-4247BD84-5893-473A-8FF6-AA7418C0FFC9" target="_blank"><span><cite>“Oracle Real Application Clusters管理和部署指南”</cite></span></a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD92643"></a><div class="props_rev_3"><a id="GUID-4E4B32AC-AF25-4C79-B1C0-1DCA3DA61B0D" name="GUID-4E4B32AC-AF25-4C79-B1C0-1DCA3DA61B0D"></a><h4 id="CWADD-GUID-4E4B32AC-AF25-4C79-B1C0-1DCA3DA61B0D" class="sect4">群集中的网络地址配置</h4>
                  <div>
                     <p>您可以为给定网络上的IPv4，IPv6或这两种类型的地址配置网络接口。</p>
                     <p>如果使用第三方技术配置冗余网络接口，则Oracle不支持将一个接口配置为支持IPv4地址，另一个支持IPv6地址。您必须使用相同的IP地址类型配置冗余接口对的网络接口。如果使用Oracle Clusterware冗余互连功能，则必须使用IPv4地址作为接口。</p>
                     <p>群集中的所有节点都必须使用相同的IP协议配置。所有节点都只使用IPv4，或者所有节点仅使用IPv6，或者所有节点都使用IPv4和IPv6。您不能将群集中的某些节点配置为仅支持IPv6地址，并且群集中的其他节点配置为仅支持IPv4地址。</p>
                     <p>本地侦听器根据为网络资源配置的子网的地址类型侦听端点。可能的类型是IPV4，IPV6或两者。</p>
                  </div>
               </div><a id="CWADD92609"></a><div class="props_rev_3"><a id="GUID-A9E0A17D-6A9B-4A28-BB7A-5B65526F1D60" name="GUID-A9E0A17D-6A9B-4A28-BB7A-5B65526F1D60"></a><h4 id="CWADD-GUID-A9E0A17D-6A9B-4A28-BB7A-5B65526F1D60" class="sect4">使用SRVCTL将静态IPv4地址更改为静态IPv6地址</h4>
                  <div>
                     <p>当您从IPv4静态地址更改为IPv6静态地址时，只需添加IPv6地址并修改网络以短暂接受IPv4和IPv6地址，然后再切换到使用静态IPv6地址。</p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-A9E0A17D-6A9B-4A28-BB7A-5B65526F1D60__GUID-84FB27FA-38AC-4490-940D-43EC95719152">
                           <p class="notep1">注意：</p>
                           <p>如果IPv4网络处于混合模式，同时具有静态和动态地址，则无法执行此过程。您必须首先将所有地址转换为静态。</p>
                        </div>
                        <p>要将静态IPv4地址更改为静态IPv6地址：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand" id="GUID-A9E0A17D-6A9B-4A28-BB7A-5B65526F1D60__BAJEGHJF"><span>使用以下命令以<code class="codeph">root</code>身份为整个网络添加IPv6子网：</span><div><pre class="pre codeblock"><code>#srvctl modify network -subnet <span class="variable" translate="no">ipv6_subnet</span> / <span class="variable" translate="no">prefix_length</span></code></pre><p>在前面的语法中， <code class="codeph"><span class="variable" translate="no">ipv6_subnet</span> / <span class="variable" translate="no">prefix_length</span></code>是您要更改的IPv6地址的子网以及前缀长度，例如3001 :: / 64。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在每个节点上以<code class="codeph">root</code>身份使用以下命令添加IPv6 VIP：</span><div><pre class="pre codeblock"><code>#srvctl modify vip -node <span class="variable" translate="no">node_name</span> -netnum <span class="variable" translate="no">network_number</span> -address <span class="variable" translate="no">vip_name</span> / <span class="variable" translate="no">netmask</span></code></pre><p>在上面的语法中：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">node_name</span></code>是节点的名称</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">network_number</span></code>是网络的编号</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">vip_name</span> / <span class="variable" translate="no">netmask</span></code>是解析为IPv4和IPv6地址的本地VIP的名称</p>
                                    <p>VIP名称后面的IPv4网络掩码或IPv6前缀长度必须满足两个要求：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>如果以IPv4格式指定网络掩码（例如255.255.255.0），则VIP名称将解析为IPv4地址（但也可以解析为IPv6地址）。同样，如果指定IPv6前缀长度（例如64），则VIP名称将解析为IPv6地址（但也可以解析为IPv4地址）。</p>
                                       </li>
                                       <li>
                                          <p>如果指定IPv4网络掩码，则它应与已注册的IPv4网络子网号的网络掩码匹配，无论网络的<code class="codeph">-iptype</code>是否为IPv6。同样，如果指定IPv6前缀长度，则它必须与注册的IPv6网络子网号的前缀长度匹配，而不管网络的<code class="codeph">-iptype</code>是否为IPv4。
                                          </p>
                                       </li>
                                    </ul>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>使用以下命令将IPv6网络资源添加到OCR：</span><div><pre class="pre codeblock"><code>$ oifcfg setif -global <span class="variable" translate="no">if_name</span> / <span class="variable" translate="no">subnet</span> ：public</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>更新DNS中的SCAN以获得与IPv4地址一样多的IPv6地址。对于整个网络，使用以下命令以<code class="codeph">root</code>身份向SCAN VIP添加IPv6地址一次：</span><div><pre class="pre codeblock"><code>#srvctl modify scan -scanname <span class="variable" translate="no">scan_name</span></code></pre><p><code class="codeph"><span class="variable" translate="no">scan_name</span></code>是解析为IPv4和IPv6地址的SCAN的名称。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand" id="GUID-A9E0A17D-6A9B-4A28-BB7A-5B65526F1D60__BAJHJEIE"><span>对于整个网络，使用以下命令以<code class="codeph">root</code>身份将网络IP类型从IPv4转换为IPv4和IPv6：</span><div><pre class="pre codeblock"><code>srvctl修改网络-netnum <span class="variable" translate="no">network_number</span> -iptype</code></pre><p>此命令将显示IPv6静态地址。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>将群集服务的所有客户端从IPv4网络和地址更改为IPv6网络和地址。</span></li>
                        <li class="stepexpand"><span>使用以下命令将网络从使用两种协议转换为仅使用IPv6：</span><div><pre class="pre codeblock"><code>#srvctl修改网络-iptype ipv6</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>通过以<code class="codeph">root</code>身份运行以下命令，使用解析为IPv6的VIP名称修改VIP：</span><div><pre class="pre codeblock"><code>#srvctl modify vip -node <span class="variable" translate="no">node_name</span> -address <span class="variable" translate="no">vip_name</span> -netnum <span class="variable" translate="no">network_number</span>
</code></pre><p>为每个节点执行一次此操作。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>使用通过运行以下命令解析为IPv6的SCAN名称修改SCAN：</span><div><pre class="pre codeblock"><code>#srvctl modify scan -scanname <span class="variable" translate="no">scan_name</span>
</code></pre><p>对整个群集执行一次此操作。</p>
                           </div>
                        </li>
                     </ol>
                     <div class="section"></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../racad/server-control-utility-reference.html#RACAD-GUID-C2D37BAB-DA98-49B4-A777-F2B3AA8D2E7A" target="_blank"><span><cite>“Oracle Real Application Clusters管理和部署指南”</cite></span></a></li>
                           <li><a href="oracle-interface-configuration-tool-oifcfg-command-reference.html#GUID-01566113-CEAE-445D-9145-377849530DBE">OIFCFG命令格式</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD92644"></a><div class="props_rev_3"><a id="GUID-B7A584D6-5279-46CB-BBAD-701CF4309816" name="GUID-B7A584D6-5279-46CB-BBAD-701CF4309816"></a><h4 id="CWADD-GUID-B7A584D6-5279-46CB-BBAD-701CF4309816" class="sect4">使用SRVCTL将动态IPv4地址更改为动态IPv6地址</h4>
                  <div>
                     <p>您可以通过SRVCTL命令将动态IPv4地址更改为动态IPv6地址。</p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-B7A584D6-5279-46CB-BBAD-701CF4309816__GUID-850F8D13-DB32-4E7E-A31A-B36453366BCB">
                           <p class="notep1">注意：</p>
                           <p>如果IPv4网络处于混合模式，同时具有静态和动态地址，则无法执行此过程。您必须先将所有地址转换为动态地址。</p>
                        </div>
                        <p>要将动态IPv4地址更改为动态IPv6地址：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>使用<code class="codeph">srvctl modify network</code>命令添加IPv6子网。</span><div>
                              <p>要添加IPv6子网，请以<code class="codeph">root</code>身份登录并使用以下命令语法：</p><pre class="pre codeblock"><code>#srvctl modify network -netnum <span class="variable" translate="no">network_number</span> -subnet <span class="variable" translate="no">ipv6_subnet</span> / <span class="variable" translate="no">ipv6_prefix_length</span> [/ <span class="variable" translate="no">interface</span> ] -nettype autoconfig</code></pre><p>在上面的语法中：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">network_number</span></code>是网络的编号</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">ipv6_subnet</span></code>是要更改的IPv6地址的子网（例如，2001：db8：122：344：c0：2：2100：:)</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph"><span class="variable" translate="no">ipv6_prefix_length</span></code>是指定IPv6网络地址的前缀（例如，64）</p>
                                 </li>
                              </ul>
                              <p>例如，以下命令通过添加IPv6子网修改网络<code class="codeph">3</code> ：2001：db8：122：344：c0：2：2100 ::，前缀长度为64：</p><pre class="pre codeblock"><code>#srvctl modify network -netnum 3 -subnet 2001：db8：122：344：c0：2：2100 :: / 64 -nettype autoconfig</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>使用以下命令将IPv6网络资源添加到OCR：</span><div><pre class="pre codeblock"><code>$ oifcfg setif -global <span class="variable" translate="no">if_name</span> / <span class="variable" translate="no">subnet</span> ：public</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>启动IPv6动态地址，如下所示：</span><div><pre class="pre codeblock"><code>#srvctl修改网络-netnum <span class="variable" translate="no">network_number</span> -iptype</code></pre><p>例如，在网络号3上：</p><pre class="pre codeblock"><code>#srvctl修改网络-netnum 3 -iptype</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>将群集服务的所有客户端从IPv4网络和地址更改为IPv6网络和地址。</span><div>
                              <p>此时，GNS委托域中的SCAN为<code class="codeph"><span class="variable" translate="no">scan_name</span> . <span class="variable" translate="no">gns_domain</span></code>将解析为三个IPv4和三个IPv6地址。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>使用以下命令关闭群集上动态地址的IPv4部分：</span><div><pre class="pre codeblock"><code>#srvctl修改网络-iptype ipv6</code></pre><p>你执行上面的命令，扫描后（ <code class="codeph"><span class="variable" translate="no"><span class="variable" translate="no">scan_name . gns_domain</span></span></code> ）将解析为只有三个IPv6地址。
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="oracle-interface-configuration-tool-oifcfg-command-reference.html#GUID-01566113-CEAE-445D-9145-377849530DBE">OIFCFG命令格式</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD92645"></a><div class="props_rev_3"><a id="GUID-4406AD31-76D8-4FBA-AA5E-1D60643FB720" name="GUID-4406AD31-76D8-4FBA-AA5E-1D60643FB720"></a><h4 id="CWADD-GUID-4406AD31-76D8-4FBA-AA5E-1D60643FB720" class="sect4">将IPv4网络更改为IPv4和IPv6网络</h4>
                  <div>
                     <p>您可以通过将IPv6网络添加到现有IPv4网络，将IPv4网络更改为IPv4和IPv6网络。</p>
                     <div class="section">
                        <p>在<span class="q">“ <a href="oracle-clusterware-administration.html#GUID-A9E0A17D-6A9B-4A28-BB7A-5B65526F1D60" title="当您从IPv4静态地址更改为IPv6静态地址时，只需添加IPv6地址并修改网络以短暂接受IPv4和IPv6地址，然后再切换到使用静态IPv6地址。">使用SRVCTL将静态IPv4地址更改为静态IPv6地址</a> ”中</span>记录的过程的步骤<a href="oracle-clusterware-administration.html#GUID-A9E0A17D-6A9B-4A28-BB7A-5B65526F1D60__BAJEGHJF">1</a>到<a href="oracle-clusterware-administration.html#GUID-A9E0A17D-6A9B-4A28-BB7A-5B65526F1D60__BAJHJEIE">5</a>中描述了此过程。
                        </p>
                        <p>完成这些步骤后，以Grid用户身份登录，然后运行以下命令：</p><pre class="pre codeblock"><code>$ srvctl状态扫描</code></pre><p>查看输出以确认对SCAN VIP的更改。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="CWADD92646"></a><div class="props_rev_3"><a id="GUID-9434505A-80BA-4B85-A29C-E83C0FBC86D6" name="GUID-9434505A-80BA-4B85-A29C-E83C0FBC86D6"></a><h4 id="CWADD-GUID-9434505A-80BA-4B85-A29C-E83C0FBC86D6" class="sect4">使用SRVCTL从VIP地址过渡到IPv6网络</h4>
                  <div>
                     <p>您使用SRVCTL命令从组合的IPv4和IPv6网络中删除IPv4地址类型。</p>
                     <div class="section">
                        <p>输入以下命令：</p><pre class="oac_no_warn" dir="ltr">#srvctl修改网络-iptype ipv6</pre><p>此命令将启动为群集配置的IPv4地址的删除过程。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-68578D33-C68A-4A52-A160-7BA0BF4D510B" name="GUID-68578D33-C68A-4A52-A160-7BA0BF4D510B"></a><h3 id="CWADD-GUID-68578D33-C68A-4A52-A160-7BA0BF4D510B" class="sect3">跨群集依赖性代理</h3>
               <div>
                  <p>跨群集依赖关系代理是成员群集上的轻量级容错代理资源，用于在域服务群集上运行的资源。</p>
                  <p>成员群集可以减少拥有基础架构资源的开销，因此能够有效监视域服务群集上的共享基础架构资源（例如Oracle自动存储管理（Oracle ASM））的状态非常重要，以便成员群集上的资源可以适当调整自己的状态。</p>
                  <p>跨群集依赖关系代理为域服务群集资源提供此功能，具体而言，更一般地，反映在其他群集中的一个群集上运行的资源的状态。默认情况下，在域服务群集上配置跨群集依赖关系代理。</p>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
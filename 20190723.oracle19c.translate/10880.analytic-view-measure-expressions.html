<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can use analytic view expressions to create calculated measures within the definition of an analytic view or in a query that selects from an analytic view."></meta>
      <meta name="description" content="You can use analytic view expressions to create calculated measures within the definition of an analytic view or in a query that selects from an analytic view."></meta>
      <title>分析视图表达式</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="SQL Language Reference "></meta>
      <meta property="og:description" content="You can use analytic view expressions to create calculated measures within the definition of an analytic view or in a query that selects from an analytic view."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="SQL Language Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96310-02"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="Simple-Expressions.html" title="Previous" type="text/html"></link>
      <link rel="next" href="Compound-Expressions.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference"></meta>
    <meta name="dcterms.isVersionOf" content="SQLRF"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="Simple-Expressions.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="Compound-Expressions.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL语言参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Expressions.html" property="item" typeof="WebPage"><span property="name">表达式</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">分析视图表达式</li>
            </ol>
            <a id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0" name="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0"></a>
            
            <h2 id="SQLRF-GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0" class="sect2">分析视图表达式</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以使用分析视图表达式在分析视图的定义内或从分析视图中选择的查询中创建计算度量。</p>
               <div class="section">
                  <p>分析视图表达式与其他类型的表达式的不同之处在于它们引用层次结构和分析视图的元素而不是表和列。</p>
                  <p>分析视图表达式是以下之一：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph"><span class="codeinlineitalic">av_meas_expression</span></code> ，它基于分析视图中的度量</p>
                     </li>
                     <li>
                        <p><code class="codeph"><span class="codeinlineitalic">av_hier_expression</span></code> ，返回相关成员的属性值</p>
                     </li>
                  </ul>
                  <p>您可以将分析视图表达式用作<code class="codeph">CREATE</code> <code class="codeph">ANALYTIC</code> <code class="codeph">VIEW</code>语句中的<code class="codeph"><span class="codeinlineitalic">calc_measure_clause</span></code>以及<code class="codeph">SELECT</code>语句的<code class="codeph">WITH</code>或<code class="codeph">FROM</code>子句中的<code class="codeph"><span class="codeinlineitalic">calc_meas_expression</span></code>参数。
                  </p>
                  <p>在定义计算度量时，您还可以使用以下类型的表达式：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>简单</p>
                     </li>
                     <li>
                        <p>案件</p>
                     </li>
                     <li>
                        <p>复合</p>
                     </li>
                     <li>
                        <p>约会时间</p>
                     </li>
                     <li>
                        <p>间隔</p>
                     </li>
                  </ul>
                  <div class="infobox-tip" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-B99E73B7-EBD4-414D-A243-49062BC211A5">
                     <p class="notep1">小费：</p>您可以在Oracle Live SQL网站<a href="https://livesql.oracle.com/apex/livesql/file/index.html" target="_blank">https://livesql.oracle.com/apex/livesql/file/index.html上</a>查看和运行使用计算度量创建分析视图的SQL脚本。该网站提供脚本和教程，演示分析视图的创建和使用。
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-84561376-4478-4082-B0D7-706583012776">句法</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-35EA99FA-A10B-4D15-ABAD-107FE8859C03"><span class="italic">av_expression</span> :: =</p><img src="img/av_expression.gif" alt="下面是av_expression.eps的描述" title="下面是av_expression.eps的描述" longdesc="img_text/av_expression.html"><br><a href="img_text/av_expression.html">av_expression.eps插图的描述</a></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-32F6CFFE-7328-42E7-B437-18A29DB8B905"><span class="italic">av_meas_expression</span> :: =</p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-89BE54A3-5235-4653-9945-5D240D6A40DE"><img src="img/av_meas_expression.gif" alt="下面是av_meas_expression.eps的描述" title="下面是av_meas_expression.eps的描述" longdesc="img_text/av_meas_expression.html"><br><a href="img_text/av_meas_expression.html">av_meas_expression.eps插图的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-D03F67B7-3273-41F3-988C-BFB1B39083DF"><span class="italic">lead_lag_expression</span> :: =</p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-34A62F43-2D47-4606-80FC-ECBC59BCCD62"><img src="img/lead_lag_expression.gif" alt="下面是lead_lag_expression.eps的说明" title="下面是lead_lag_expression.eps的说明" longdesc="img_text/lead_lag_expression.html"><br><a href="img_text/lead_lag_expression.html">说明lead_lag_expression.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-3BB2686A-C39C-4AB0-8A40-8167840C5CE5"><span class="italic">lead_lag_function_name</span> :: =</p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-1BE3691A-D8F8-4E07-88EF-E8B433433D25"><img src="img/lead_lag_function_name.gif" alt="下面是lead_lag_function_name.eps的说明" title="下面是lead_lag_function_name.eps的说明" longdesc="img_text/lead_lag_function_name.html"><br><a href="img_text/lead_lag_function_name.html">说明lead_lag_function_name.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-80371E6E-4D45-4385-8B2F-7B877D8A1E21"><span class="italic">lead_lag_clause</span> :: =</p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-75580681-98F9-4BCB-814F-7033CDFB8B04"><img src="img/lead_lag_clause.gif" alt="下面是lead_lag_clause.eps的说明" title="下面是lead_lag_clause.eps的说明" longdesc="img_text/lead_lag_clause.html"><br><a href="img_text/lead_lag_clause.html">说明lead_lag_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-9507CC32-4FC6-4882-BBCD-0FD986653CB5"><span class="italic">hierarchy_ref</span> :: =</p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-6D93F1F5-0C43-4E37-837A-A0EB934F66C9"><img src="img/hierarchy_ref.gif" alt="hierarchy_ref.eps的描述如下" title="hierarchy_ref.eps的描述如下" longdesc="img_text/hierarchy_ref.html"><br><a href="img_text/hierarchy_ref.html">插图hierarchy_ref.eps的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-2F0EE640-7AA4-457A-B5AE-D43D8966417C"><span class="italic">window_expression</span> :: =</p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-2E6DB72C-A851-4161-86B4-845863761F0F"><img src="img/window_expression.gif" alt="下面是window_expression.eps的描述" title="下面是window_expression.eps的描述" longdesc="img_text/window_expression.html"><br><a href="img_text/window_expression.html">说明window_expression.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-FD9565DB-1CF6-4BA1-819F-4F6E00043588"><span class="italic">window_clause</span> :: =</p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-18553BF8-3AD3-4831-A85A-E0D1494BE8BC"><img src="img/window_clause.gif" alt="下面是window_clause.eps的描述" title="下面是window_clause.eps的描述" longdesc="img_text/window_clause.html"><br><a href="img_text/window_clause.html">说明window_clause.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-0FB6D24A-0155-453F-BDD9-C719D4478560"><span class="italic">preceding_boundary</span> :: =</p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-5F55513A-B5F8-4F48-9BA9-44BDEE68D24E"><img src="img/preceding_boundary.gif" alt="Previous_boundary.eps的描述如下" title="Previous_boundary.eps的描述如下" longdesc="img_text/preceding_boundary.html"><br><a href="img_text/preceding_boundary.html">previous_boundary.eps插图的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-2F49A9F7-2803-41AC-9480-FBE635CEAA4A"><span class="italic">following_boundary</span> :: =</p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-D30F4D8B-2845-4E2D-BB5F-A894485A0778"><img src="img/following_boundary.gif" alt="下面是following_boundary.eps的描述" title="下面是following_boundary.eps的描述" longdesc="img_text/following_boundary.html"><br><a href="img_text/following_boundary.html">插图描述following_boundary.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-5B39C296-B7C0-4288-AB1D-E14092068040"><span class="italic">rank_expression</span> :: =</p><img src="img/rank_expression.gif" alt="rank_expression.eps的描述如下" title="rank_expression.eps的描述如下" longdesc="img_text/rank_expression.html"><br><a href="img_text/rank_expression.html">说明rank_expression.eps的描述</a></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-0ED78823-A072-44D1-B9CD-A3E3BB4BCE9D"><span class="italic">rank_function_name</span> :: =</p><img src="img/rank_function_name.gif" alt="rank_function_name.eps的描述如下" title="rank_function_name.eps的描述如下" longdesc="img_text/rank_function_name.html"><br><a href="img_text/rank_function_name.html">说明rank_function_name.eps的说明</a></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-ADF7F828-3ED4-43AD-A773-ECE97BF20E62"><span class="italic">rank_clause</span> :: =</p><img src="img/rank_clause.gif" alt="rank_clause.eps的描述如下" title="rank_clause.eps的描述如下" longdesc="img_text/rank_clause.html"><br><a href="img_text/rank_clause.html">插图描述rank_clause.eps</a></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-2C6604C9-0CC3-49E9-82E3-236EC1EDF531"><span class="italic">calc_meas_order_by_clause</span> :: =</p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-BFB36F33-9C4A-424F-975D-DB3D429B34A7"><img src="img/calc_meas_order_by_clause.gif" alt="下面是calc_meas_order_by_clause.eps的说明" title="下面是calc_meas_order_by_clause.eps的说明" longdesc="img_text/calc_meas_order_by_clause.html"><br><a href="img_text/calc_meas_order_by_clause.html">calc_meas_order_by_clause.eps插图的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-C361F615-85EB-4AE3-8251-9B60AAE4EE4B"><span class="italic">share_of_expression</span> :: =</p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-CD364817-D556-4CCC-8ECB-524EB9329DAC"><img src="img/share_of_expression.gif" alt="share_of_expression.eps的描述如下" title="share_of_expression.eps的描述如下" longdesc="img_text/share_of_expression.html"><br><a href="img_text/share_of_expression.html">share_of_expression.eps插图的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-A788C22B-7297-41D3-978F-8C759734D5E2"><span class="italic">share_clause</span> :: =</p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-596CA26C-C1D1-489E-92FD-F6E5A7FA91C0"><img src="img/share_clause.gif" alt="share_clause.eps的描述如下" title="share_clause.eps的描述如下" longdesc="img_text/share_clause.html"><br><a href="img_text/share_clause.html">share_clause.eps插图的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-9DD99BF6-7BAA-4FC4-A62C-046006FF0A5E"><span class="italic">member_expression</span> :: =</p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-39876B35-D1BF-41E5-B2D3-B5C39304B7ED"><img src="img/member_expression.gif" alt="member_expression.eps的描述如下" title="member_expression.eps的描述如下" longdesc="img_text/member_expression.html"><br><a href="img_text/member_expression.html">插图描述member_expression.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-7BAF021D-11D2-4DFE-BA64-0A2E1433FFD0"><span class="italic">level_member_literal</span> :: =</p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-A6324656-7616-4240-BA82-632B858015F5"><img src="img/level_member_literal.gif" alt="level_member_literal.eps的描述如下" title="level_member_literal.eps的描述如下" longdesc="img_text/level_member_literal.html"><br><a href="img_text/level_member_literal.html">插图说明level_member_literal.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-72754C2A-78F4-4CC3-BA0F-7A7B9D9F407B"><span class="italic">pos_member_keys</span> :: =</p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-36DA018D-02B7-4E59-9AB5-E9C4B2765684"><img src="img/pos_member_keys.gif" alt="pos_member_keys.eps的描述如下" title="pos_member_keys.eps的描述如下" longdesc="img_text/pos_member_keys.html"><br><a href="img_text/pos_member_keys.html">说明pos_member_keys.eps的说明</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-64D1FCEF-4A6F-4AE2-A6FC-834E33F86C66"><span class="italic">named_member_keys</span> :: =</p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-EE825ADA-3A3B-41AD-89F8-06C2D105D191"><img src="img/named_member_keys.gif" alt="下面是named_member_keys.eps的描述" title="下面是named_member_keys.eps的描述" longdesc="img_text/named_member_keys.html"><br><a href="img_text/named_member_keys.html">插图描述named_member_keys.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-F97BF5B9-CD3B-4674-995E-51EFCE214464"><span class="italic">hier_navigation_expression</span> :: =</p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-4DA4C212-5F9A-4777-8905-7263844967A3"><img src="img/hier_navigation_expression.gif" alt="下面是hier_navigation_expression.eps的描述" title="下面是hier_navigation_expression.eps的描述" longdesc="img_text/hier_navigation_expression.html"><br><a href="img_text/hier_navigation_expression.html">说明hier_navigation_expression.eps的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-621FB7BD-6673-4922-9FB0-88A254BC6C08"><span class="italic">hier_ancestor_expression</span> :: =</p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-A99AADF8-8647-44AD-A17A-DEDA384DF509"><img src="img/hier_ancestor_expression.gif" alt="下面是hier_ancestor_expression.eps的描述" title="下面是hier_ancestor_expression.eps的描述" longdesc="img_text/hier_ancestor_expression.html"><br><a href="img_text/hier_ancestor_expression.html">插图描述hier_ancestor_expression.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-13C793EA-96FC-45C8-911B-6867EA68D8E3"><span class="italic">hier_parent_expression</span> :: =</p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-F9393928-A1FC-485E-ABDE-ADB1F737B352"><img src="img/hier_parent_expression.gif" alt="下面是hier_parent_expression.eps的描述" title="下面是hier_parent_expression.eps的描述" longdesc="img_text/hier_parent_expression.html"><br><a href="img_text/hier_parent_expression.html">说明hier_parent_expression.eps的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-4875F714-350C-44C6-BDCF-9F6FEC7C2487"><span class="italic">hier_lead_lag_expression</span> :: =</p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-4E5DC34A-0834-4ED3-8783-8A1BB1AA4DDE"><img src="img/hier_lead_lag_expression.gif" alt="下面是hier_lead_lag_expression.eps的描述" title="下面是hier_lead_lag_expression.eps的描述" longdesc="img_text/hier_lead_lag_expression.html"><br><a href="img_text/hier_lead_lag_expression.html">插图描述hier_lead_lag_expression.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-7294D0CE-5BDE-4BE4-AF41-57C925969804"><span class="italic">hier_lead_lag_clause</span> :: =</p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-82ABC79B-72BB-4DE0-9FF0-9D712F1CD5A5"><img src="img/hier_lead_lag_clause.gif" alt="下面是hier_lead_lag_clause.eps的描述" title="下面是hier_lead_lag_clause.eps的描述" longdesc="img_text/hier_lead_lag_clause.html"><br><a href="img_text/hier_lead_lag_clause.html">说明hier_lead_lag_clause.eps的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-3C2F6D18-92C2-4017-8612-56398F90630B"><span class="italic">qdr_expression</span> :: =</p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-F1B9CA14-6BC7-4D31-A4CB-F01736BD58D8"><img src="img/qdr_expression.gif" alt="随后是qdr_expression.eps的描述" title="随后是qdr_expression.eps的描述" longdesc="img_text/qdr_expression.html"><br><a href="img_text/qdr_expression.html">说明qdr_expression.eps的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-0FB525CA-442E-41E5-88E7-B92383794598"><span class="italic">qualifier</span> :: =</p>
                  <div class="figure" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-ABB13C54-477B-4EEA-BB11-966D225878C2"><img src="img/qualifier.gif" alt="qualifier.eps的描述如下" title="qualifier.eps的描述如下" longdesc="img_text/qualifier.html"><br><a href="img_text/qualifier.html">qualifier.eps插图的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-9287CC6F-9C25-446E-AAF9-34F5CCDFA3AD"><span class="italic">av_hier_expression</span> :: =</p><img src="img/av_hier_expression.gif" alt="下面是av_hier_expression.eps的描述" title="下面是av_hier_expression.eps的描述" longdesc="img_text/av_hier_expression.html"><br><a href="img_text/av_hier_expression.html">av_hier_expression.eps插图的描述</a></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-41A53B32-D0FF-4C9D-9126-67F7783C9E64"><span class="italic">hier_function_name</span> :: =</p><img src="img/hier_function_name.gif" alt="下面是hier_function_name.eps的描述" title="下面是hier_function_name.eps的描述" longdesc="img_text/hier_function_name.html"><br><a href="img_text/hier_function_name.html">说明hier_function_name.eps的描述</a></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-A66B3E37-5080-4C32-B963-1C29B58AC6FA">语义</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-C611C269-6F81-4566-A5AC-093A29600133"><span class="italic">av_meas_expression</span></p>
                  <p>执行分层导航以查找相关度量值的表达式。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-BBB16AA1-6A52-4779-9173-D7E0F899739A"><span class="italic">lead_lag_expression</span></p>
                  <p>一个表达式，指定超前或滞后操作，通过层次结构中的某些成员向前或向后导航来定位相关度量值。</p>
                  <p><span class="italic"><code class="codeph">calc_meas_expression</code></span>参数在<span class="italic"><code class="codeph">lead_lag_expression</code></span>创建的新上下文中<span class="italic"><code class="codeph">lead_lag_expression</code></span> 。除了指定层次结构的成员更改为由超前或滞后操作指定的相关成员之外，此上下文与外部上下文具有相同的成员。前导或滞后函数在<span class="italic"><code class="codeph">lead_lag_clause</code></span>参数指定的层次结构成员上运行。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-F25F6CF5-C3E2-46CF-8D23-B69F01801507"><span class="italic">lead_lag_function_name</span></p>
                  <p>超前或滞后功能可能是以下之一：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">LAG</code>返回先前成员的度量值。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">LAG_DIFF</code>返回当前成员的度量值与先前成员的度量值之间的差异。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">LAG_DIFF_PERCENT</code>返回当前成员的度量值与先前成员的度量值之间的百分比差异。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">LEAD</code>返回后一个成员的度量值。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">LEAD_DIFF</code>返回当前成员的度量值与后一成员的度量值之间的差异。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">LEAD_DIFF_PERCENT</code>返回当前成员的度量值与后一成员的度量值之间的百分比差异。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-2A3FE8A4-D60D-418E-9E81-B33C42107475"><span class="italic">lead_lag_clause</span></p>
                  <p>指定要评估的层次结构和偏移值。<span class="italic"><code class="codeph">lead_lag_clause</code></span>的参数如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">HIERARCHY</code> <span class="italic"><code class="codeph">hierarchy_ref</code></span>指定分析视图中定义的层次<span class="italic"><code class="codeph">hierarchy_ref</code></span>的别名。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">OFFSET</code> <span class="italic"><code class="codeph">offset_expr</code></span>指定解析为数字的<span class="italic"><code class="codeph">calc_meas_expression</code></span> 。该数字指定从当前成员向前或向后移动的成员数。级别中成员的排序由层次结构使用的属性维度的定义确定。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">WITHIN</code> <code class="codeph">LEVEL</code>指定通过向前或向后移动与当前成员具有相同级别深度的成员内的成员的偏移数来定位相关成员。级别中成员的排序由层次结构使用的属性维度的定义确定。
                        </p>
                        <p>如果未指定<code class="codeph">WITHIN</code> <code class="codeph">LEVEL</code>和<code class="codeph">ACROSS</code> <code class="codeph">ANCESTOR</code> <code class="codeph">AT</code> <code class="codeph">LEVEL</code>关键字，则<code class="codeph">WITHIN</code> <code class="codeph">LEVEL</code>操作是默认操作。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">WITHIN</code> <code class="codeph">PARENT</code>指定通过向前或向后移动与当前成员具有相同父级的成员中的成员的偏移数来定位相关成员。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">ACROSS</code> <code class="codeph">ANCESTOR</code> <code class="codeph">AT</code> <code class="codeph">LEVEL</code> <span class="italic"><code class="codeph">level_ref</code></span>指定通过导航到由<span class="italic"><code class="codeph">level_ref</code></span>指定的级别的当前成员的祖先（或者如果没有祖先存在的成员本身）并且注意每个祖先成员（包括成员）的位置来定位相关成员。在其父母内部。<span class="italic"><code class="codeph">level_ref</code></span>参数是指定层次结构中级别的名称。
                        </p>
                        <p>一旦找到祖先成员，导航就向前或向后移动成员内与祖先成员具有相同深度的成员的偏移数量。在找到相关的祖先之后，导航从该成员向下返回层次结构，匹配在向上的路径上记录的父级内的位置（以相反的顺序）。父级中的位置要么是偏离第一个子项还是最后一个子项，具体取决于是否指定了<code class="codeph">POSITION</code> <code class="codeph">FROM</code> <code class="codeph">BEGINNING</code>或<code class="codeph">POSITION</code> <code class="codeph">FROM</code> <code class="codeph">END</code> 。默认值为<code class="codeph">POSITION</code> <code class="codeph">FROM</code> <code class="codeph">BEGINNING</code> 。级别中成员的排序由层次结构使用的属性维度的定义确定。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-56858654-15C3-45B0-9ED3-B5DC8F77E140"><span class="italic">window_expression</span></p>
                  <p><span class="italic"><code class="codeph">window_expression</code></span>选择从当前成员开始并且与当前成员具有相同深度的指定范围内的成员集。您可以通过使用WITHIN短语指定层次关系来进一步限制成员的选择。然后对所选测量值执行聚合以产生表达式的单个结果。
                  </p>
                  <p><span class="italic"><code class="codeph">window_expression</code></span>的参数如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="italic"><code class="codeph">aggregate_function</code></span>是除<code class="codeph">COLLECT</code> ， <code class="codeph">GROUP_ID</code> ， <code class="codeph">GROUPING</code> ， <code class="codeph">GROUPING_ID</code> ， <code class="codeph">SYS_XMLAGG</code> ， <code class="codeph">XMLAGG</code>和任何多参数函数之外的任何现有SQL聚合函数。还允许用户定义的聚合函数。aggregate函数的参数是<span class="italic"><code class="codeph">calc_meas_expression</code></span>表达式。使用外部上下文计算这些表达式，并将指定层次结构的成员更改为相关范围中的每个成员。因此，每个相关成员对每个表达式参数进行一次计算。然后使用<span class="italic"><code class="codeph">aggregate_function</code></span> 。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">OVER</code> <code class="codeph">(</code> <span class="italic"><code class="codeph">window_clause</code></span> <code class="codeph">)</code>指定要使用的层次结构以及要考虑的窗口边界。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-68812EF3-7487-4B57-9340-6C7D5BD4BAAB">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="Aggregate-Functions.html#GUID-62BE676B-AF18-4E63-BD14-25206FEA0848">聚合函数</a></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-1C462C7B-3850-4532-B4E5-316ADF280FCC"><span class="italic">window_clause</span></p>
                  <p><span class="italic"><code class="codeph">window_clause</code></span>参数选择与当前成员相关的成员范围。范围介于<span class="italic"><code class="codeph">preceding_boundary</code></span>或<span class="italic"><code class="codeph">following_boundary</code></span>参数指定的成员之间。范围始终在与当前成员相同级别的成员上计算。
                  </p>
                  <p><span class="italic"><code class="codeph">window_clause</code></span>的参数如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">HIERARCHY</code> <span class="italic"><code class="codeph">hierarchy_ref</code></span>指定分析视图中定义的层次<span class="italic"><code class="codeph">hierarchy_ref</code></span>的别名。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">BETWEEN</code> <span class="italic"><code class="codeph">preceding_boundary</code></span>或<span class="italic"><code class="codeph">following_boundary</code></span>定义与当前成员相关的成员集。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">WITHIN</code> <code class="codeph">LEVEL</code>通过将boundary子句应用于当前级别的所有成员来选择相关成员。这是未指定<code class="codeph">WITHIN</code>关键字时的默认值。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">WITHIN</code> <code class="codeph">PARENT</code>通过将boundary子句应用于与当前成员共享父级的所有成员来选择相关成员。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">WITHIN</code> <code class="codeph">ANCESTOR</code> <code class="codeph">AT</code> <code class="codeph">LEVEL</code>通过在共享一个祖先当前深度施加边界子句向所有成员中选择的相关成员（或是构件本身）在与当前部件指定的水平。如果当前成员高于指定级别，则窗口表达式的值为<code class="codeph">NULL</code> 。如果级别不在指定的层次结构中，则会发生错误。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-298F8BD8-2F93-4A4A-8B81-30A887563AFA"><span class="italic">preceding_boundary</span></p>
                  <p><span class="italic"><code class="codeph">preceding_boundary</code></span>参数定义从当前成员向前并指向边界的指定末尾的指定数量的成员的成员范围。以下参数指定范围：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">UNBOUNDED</code> <code class="codeph">PRECEDING</code>开始该级别第一个成员的范围。
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">offset_expr</code></span> <code class="codeph">PRECEDING</code>从当前成员向后的<span class="italic"><code class="codeph">offset_expr</code></span>成员数开始。<span class="italic"><code class="codeph">offset_expr</code></span>表达式是一个解析为数字的<span class="italic"><code class="codeph">calc_meas_expression</code></span> 。如果偏移数大于当前成员到级别中第一个成员的成员数，则将第一个成员用作范围的开头。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">CURRENT</code> <code class="codeph">MEMBER</code>结束<code class="codeph">CURRENT</code> <code class="codeph">MEMBER</code>的范围。
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">offset_expr</code></span> <code class="codeph">PRECEDING</code>结束从当前成员向后<span class="italic"><code class="codeph">offset_expr</code></span>的成员的范围。
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">offset_expr</code></span> <code class="codeph">FOLLOWING</code>结束从当前成员向前的<span class="italic"><code class="codeph">offset_expr</code></span>成员的范围。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">UNBOUNDED</code> <code class="codeph">FOLLOWING</code>结束级别中最后一个成员的范围。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-1A724E1F-B64E-4BAE-BC9D-0D825C5BED43"><span class="italic">following_boundary</span></p>
                  <p><span class="italic"><code class="codeph">following_boundary</code></span>参数定义从当前成员转发到指定结束范围的指定成员数的成员范围。以下参数指定范围：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">CURRENT</code> <code class="codeph">MEMBER</code>开始<code class="codeph">CURRENT</code> <code class="codeph">MEMBER</code>的范围。
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">offset_expr</code></span> <code class="codeph">FOLLOWING</code>从当前成员开始向前的<span class="italic"><code class="codeph">offset_expr</code></span>成员的范围。
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">offset_expr</code></span> <code class="codeph">FOLLOWING</code>结束从当前成员向前的<span class="italic"><code class="codeph">offset_expr</code></span>成员的范围。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">UNBOUNDED</code> <code class="codeph">FOLLOWING</code>结束级别中最后一个成员的范围。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-E49BFDEE-E5BD-402C-BA74-178A4F053B20"><span class="italic">hierarchy_ref</span></p>
                  <p>对分析视图层次结构的引用。<span class="italic"><code class="codeph">hier_alias</code></span>参数指定分析视图定义中层次结构的别名。您可以使用双引号来转义特殊字符或保留大小写，或两者兼而有之。
                  </p>
                  <p>可选的<span class="italic"><code class="codeph">attr_dim_alias</code></span>参数指定分析视图定义中属性维的别名。如果指定的层次结构别名与分析视图中的其他层次结构别名冲突，或者在分析视图定义中多次使用属性维度，则可以使用<span class="italic"><code class="codeph">attr_dim_alias</code></span>参数来解决歧义。即使名称冲突不存在，您也可以使用<span class="italic"><code class="codeph">attr_dim_alias</code></span>参数。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-6B72F90C-79CD-4BF9-9C9F-73B7D0A64DCA"><span class="italic">rank_expression</span></p>
                  <p>分层排名计算根据指定度量值的顺序对指定层次结构的相关成员进行排名，并返回这些结果中当前成员的排名。</p>
                  <p>分层排名计算在指定的层次结构中定位一组相关成员，根据指定度量值的顺序对所有相关成员进行排名，然后在这些结果中返回当前成员的排名。相关成员是与当前成员处于同一级别的一组成员。您可以选择通过某种层次关系来限制集合，但该集合始终包含当前成员。度量值的排序由<code class="codeph"><span class="codeinlineitalic">calc_meas_order_by_clause</span></code>的<code class="codeph"><span class="codeinlineitalic">rank_clause</span></code> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-6F250865-B8AE-4C1F-879B-6FFF17BE1F9D"><span class="italic">rank_function_name</span></p>
                  <p>每个分层排名功能基于<code class="codeph"><span class="codeinlineitalic">calc_meas_order_by_clause</span></code>从1开始为每个相关成员分配订单号。这些函数在处理相同度量值的方式上有所不同。
                  </p>
                  <p>它们之间的功能和区别如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">RANK</code> ，为相同的度量值分配相同的等级。一组绑定值之后的排名是绑定值加上绑定顺序值;因此，排序可能不是连续的数字。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">DENSE_RANK</code> ，为相同的度量值分配相同的最小等级。一组绑定值之后的排名总是比绑定值多一个;因此，订购总是有连续的数字。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">AVERAGE_RANK</code> ，将相同的平均等级分配给相同的值。平均等级值之后的下一个值是相同值的数量加1，该总和除以2加上平均等级值。例如，对于五个值<code class="codeph">AVERAGE_RANK</code>的系列， <code class="codeph">AVERAGE_RANK</code>返回<code class="codeph">AVERAGE_RANK</code> 。对于系列2,12,10,12,17,12，返回的等级为1,2,3,3,3,5。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">ROW_NUMBER</code> ，它在层次结构成员中分配唯一且连续的值。如果<code class="codeph"><span class="codeinlineitalic">calc_meas_order_by_clause</span></code>导致相等的值，则结果是非确定性的。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-EBB06F9F-4A55-43EA-A33C-F9C1DB39E8CB"><span class="italic">rank_clause</span></p>
                  <p><code class="codeph">rank_clause</code>定位与当前成员相关的一系列层次结构成员。范围是与当前成员处于同一级别的成员的某个子集。子集由<code class="codeph">WITHIN</code>子句确定。
                  </p>
                  <p><code class="codeph">WITHIN</code>子句的有效值为：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">WITHIN LEVEL</code> ，指定相关成员是当前级别的所有成员。如果未指定<code class="codeph">WITHIN</code>关键字，则这是默认子集。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">WITHIN PARENT</code> ，指定相关成员与当前成员共享父项</p>
                     </li>
                     <li>
                        <p><code class="codeph">WITHIN ANCESTOR AT LEVEL</code> ，指定相关成员是当前级别的所有成员，它们与当前成员共享指定级别的祖先（或自我）。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-02BF1C66-FD03-4ADE-975D-1591DF141F92"><span class="italic">share_of_expression</span></p>
                  <p><span class="italic"><code class="codeph">share_of_expression</code></span>表达式计算当前上下文的表达式值与相关上下文中表达式值的比率。表达式是在当前上下文和相关上下文中计算的<span class="italic"><code class="codeph">calc_meas_expression</code></span> 。<span class="italic"><code class="codeph">share_clause</code></span>规范确定要使用的相关上下文。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-3F95A996-5773-4639-98C8-FCAAB0852072"><span class="italic">share_clause</span></p>
                  <p><span class="italic"><code class="codeph">share_clause</code></span>通过将指定层次结构的成员设置为相关成员来修改外部上下文。
                  </p>
                  <p>share子句的参数如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">HIERARCHY</code> <span class="italic"><code class="codeph">hierarchy_ref</code></span>指定作为<span class="italic"><code class="codeph">share_of_expression</code></span>计算的外部上下文的层次<span class="italic"><code class="codeph">hierarchy_ref</code></span>的名称。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">PARENT</code>指定相关成员是当前成员的父成员。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">LEVEL</code> <span class="italic"><code class="codeph">level_ref</code></span>指定相关成员是层次结构中指定级别的当前成员的祖先（或者是成员本身）。如果当前成员高于指定的级别，则为共享表达式返回<code class="codeph">NULL</code> 。如果级别不在层次结构中，则会发生错误。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">MEMBER</code> <span class="italic"><code class="codeph">member_expression</code></span>指定相关成员是在评估当前上下文中的<span class="italic"><code class="codeph">member_expression</code></span>后返回的成员。如果指定成员的值为<code class="codeph">NULL</code> ，则为共享表达式返回<code class="codeph">NULL</code> 。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-E81D004C-1942-4844-ABC9-F70C85EFF0A2"><span class="italic">member_expression</span></p>
                  <p><span class="italic"><code class="codeph">member_expression</code></span>求值为指定层次结构的成员。始终可以从外部表达式确定层次结构（由语法强制执行）。<span class="italic"><code class="codeph">member_expression</code></span>可以是以下之一：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="italic"><code class="codeph">level_member_literal</code></span>是一个求值为层次结构成员的表达式。
                        </p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">hier_navigation_expr</code></span>是一个表达式，它将层次结构的一个成员与另一个成员相关联。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">CURRENT</code> <code class="codeph">MEMBER</code>指定由外部上下文确定的层次结构成员。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">NULL</code>是一种指定不存在的成员的方法。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">ALL</code>指定每个层次结构的单个最顶层成员。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-915EA61C-ECB6-416C-BB8C-3D632194A715"><span class="italic">level_member_literal</span></p>
                  <p><span class="italic"><code class="codeph">level_member_literal</code></span>是一个解析为层次结构的单个成员的表达式。表达式包含级别的名称和一个或多个成员键。可以通过位置或名称来标识一个或多个成员密钥。如果指定的级别不在上下文层次结构中，则会发生错误。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-54FA7B8A-5386-426D-85BE-E20913C2AFEE"><span class="italic">pos_member_keys</span></p>
                  <p><span class="italic"><code class="codeph">member_key_expr</code></span>表达式解析为成员的键值。按位置指定时，必须按<code class="codeph">ALL_HIER_LEVEL_ID_ATTRS</code>字典视图中的顺序给出密钥的所有组件。对于子级别未确定指定级别的层次结构，必须在当前级别的成员键之前提供所有此类子级别的所有成员键值。重复的关键组件仅在它们第一次出现时指定。
                  </p>
                  <p>当主密钥用于<span class="italic"><code class="codeph">level_member_literal</code></span>使用指定<span class="italic"><code class="codeph">pos_member_keys</code></span>短语。您可以使用<span class="italic"><code class="codeph">named_member_keys</code></span>短语引用备用密钥。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-CBF7CB6A-7483-4544-8676-1A89A6CE7FAB"><span class="italic">named_member_keys</span></p>
                  <p><span class="italic"><code class="codeph">member_key_expr</code></span>表达式解析为成员的键值。<span class="italic"><code class="codeph">attr_name</code></span>参数是属性名称的标识符。如果所有属性名称都不构成指定级别的键或备用键，则会发生错误。
                  </p>
                  <p>当按名称指定时，必须给出密钥的所有组件，并且所有组件必须以任何顺序使用属性<span class="italic">name = value</span>表单。对于未由子级别确定指定级别的层次结构，必须同时使用命名表单提供所有此类子级别的所有成员键值。重复的关键组件仅指定一次。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-55236A25-3DDF-4866-AA89-E1EA63BCCEAC"><span class="italic">hier_navigation_expression</span></p>
                  <p><span class="italic"><code class="codeph">hier_navigation_expression</code></span>表达式从指定的成员导航到层次结构中的其他成员。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-B0EE4122-3C65-4865-810A-236A037AC4A4"><span class="italic">hier_ancestor_expression</span></p>
                  <p>以指定的级别或深度从指定的成员导航到祖先成员（或成员本身）。深度指定为必须解析为数字的表达式。如果成员位于指定成员上方的某个级别或深度，或者该成员为<code class="codeph">NULL</code> ，则为表达式值返回<code class="codeph">NULL</code> 。如果指定的级别不在上下文层次结构中，则会发生错误。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-91DDC769-7AE4-4E5C-A082-2AC29205F509"><span class="italic">hier_parent_expression</span></p>
                  <p>从指定成员导航到父成员。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-DD61E9BA-26BF-4C52-83D3-DE31C94C48B1"><span class="italic">hier_lead_lag_expression</span></p>
                  <p>通过向前或向后移动上下文层次结构中的一些成员，从指定成员导航到相关成员。<code class="codeph">HIER_LEAD</code>关键字返回后一个成员。<code class="codeph">HIER_LAG</code>关键字返回先前的成员。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-0A3463C0-A227-41CA-9B81-6CB65F05148F"><span class="italic">hier_lead_lag_clause</span></p>
                  <p>从指定的成员向前或向后导航<span class="italic"><code class="codeph">offset_expr</code></span>成员数。级别中成员的顺序在属性维度的定义中指定。
                  </p>
                  <p><span class="italic"><code class="codeph">hier_lead_lag_clause</code></span>的可选参数如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">WITHIN</code> <code class="codeph">LEVEL</code>通过向前或向后移动与当前成员具有相同深度的成员内的<span class="italic"><code class="codeph">offset_expr</code></span>成员来定位相关成员。级别内成员的排序由属性维度的定义决定。如果既不使用<code class="codeph">WITHIN</code>也不使用<code class="codeph">ACROSS</code>关键字，则<code class="codeph">WITHIN</code> <code class="codeph">LEVEL</code>操作是默认操作。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">WITHIN</code> <code class="codeph">PARENT</code>通过在与当前成员具有相同深度的成员中向前或向后移动<span class="italic"><code class="codeph">offset_expr</code></span>成员来定位相关成员，但仅考虑与当前成员共享父成员的成员。级别内成员的排序由属性维度的定义决定。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">WITHIN</code> <code class="codeph">ACROSS</code> <code class="codeph">ANCESTOR</code> <code class="codeph">AT</code> <code class="codeph">LEVEL</code>通过导航到当前成员的祖先定位相关构件（或到构件本身）在指定的电平，并指出每个祖先构件的位置（包括构件本身）其父项内。一旦找到祖先成员，导航就会向前或向后移动与祖先成员具有相同深度的成员内的<span class="italic"><code class="codeph">offset_expr</code></span>成员。
                        </p>
                        <p>在找到相关祖先之后，导航从该成员向下移动层次结构，匹配在向上的过程中记录的父级内的位置（以相反的顺序）。父母中的位置要么偏离第一个孩子，要么是最后一个孩子，这取决于是否指定了<code class="codeph">POSITION</code> <code class="codeph">FROM</code> <code class="codeph">BEGINNING</code>或<code class="codeph">POSITION</code> <code class="codeph">FROM</code> <code class="codeph">END</code> ，默认为<code class="codeph">POSITION</code> <code class="codeph">FROM</code> <code class="codeph">BEGINNING</code> 。级别内成员的排序由属性维度的定义决定。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-B48BFA6F-F247-4C61-99FD-9E59536981AE"><span class="italic">qdr_expression</span></p>
                  <p><span class="italic"><code class="codeph">qdr_expression</code></span>是一个限定数据引用， <span class="italic"><code class="codeph">calc_meas_expression</code></span>在新上下文中计算指定的<span class="italic"><code class="codeph">calc_meas_expression</code></span> ，并将层次结构成员设置为新值。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-2643914A-E013-41BB-A310-C6CBA394EB46"><span class="italic">预选赛</span></p>
                  <p>限定符通过将指定层次结构的成员设置为评估<span class="italic"><code class="codeph">member_expression</code></span>得到的成员来修改外部上下文。如果<span class="italic"><code class="codeph">member_expression</code></span>为<code class="codeph">NULL</code> ，则<span class="italic"><code class="codeph">qdr_expression</code></span>选择的结果为<code class="codeph">NULL</code> 。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-E182E13D-C7EB-4439-B278-B83DCD05739A"><span class="italic">av_hier_expression</span></p>
                  <p><code class="codeph"><span class="codeinlineitalic">av_hier_expression</span></code>执行层次结构导航以定位相关成员的属性值。一个<code class="codeph"><span class="codeinlineitalic">av_hier_expression</span></code>可以是顶级表达式，而<code class="codeph"><span class="codeinlineitalic">hier_navigation_expression</span></code>可以仅被用作<code class="codeph"><span class="codeinlineitalic">member_expression</span></code>参数。
                  </p>
                  <p>例如，在以下查询中， <code class="codeph">HIER_MEMBER__NAME</code>是<code class="codeph"><span class="codeinlineitalic">av_hier_expression</span></code>而<code class="codeph">HIER_PARENT</code>是<code class="codeph"><span class="codeinlineitalic">hier_navigation_expression</span></code> 。
                  </p><pre class="pre codeblock"><code>HIER_MEMBER_NAME（HIER_PARENT（当前会员）WITHIN HIERARCHY product_hier））</code></pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-F8C7ED67-A4EC-479C-975F-12F1F4B8CBA0__GUID-C462887E-1276-41E8-B5C6-C1B0CA0ADE8B"><span class="italic">hier_function_name</span></p>
                  <p><span class="italic"><code class="codeph">hier_function_name</code></span>值如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">HIER_CAPTION</code> ，返回层次结构中相关成员的标题。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">HIER_DEPTH</code> ，返回的值小于层次结构中相关成员和ALL成员之间的祖先数。ALL成员的深度为0。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">HIER_DESCRIPTION</code> ，返回层次结构中相关成员的描述。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">HIER_LEVEL</code> ，以字符串值的形式返回相关成员在层次结构中所属的级别的名称。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">HIER_MEMBER_NAME</code> ，返回层次结构中相关成员的成员名称。
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">HIER_MEMBER_UNIQUE_NAME</code> ，返回层次结构中相关成员的成员唯一名称。
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div>
            <div class="props_rev_3"><a id="GUID-595B6AC1-9204-4119-890A-0C38F933D03C" name="GUID-595B6AC1-9204-4119-890A-0C38F933D03C"></a><h3 id="SQLRF-GUID-595B6AC1-9204-4119-890A-0C38F933D03C" class="sect3">分析视图表达式的示例</h3>
               <div>
                  <p>本主题包含了说明在定义计算的测量<code class="codeph">MEASURES</code>的分析视图的条款和在<code class="codeph">ADD</code> <code class="codeph">MEASURES</code>一个子句<code class="codeph">SELECT</code>语句。
                  </p>
                  <div class="section">
                     <p>示例如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="analytic-view-measure-expressions.html#GUID-595B6AC1-9204-4119-890A-0C38F933D03C__EXAMPLESOFLAGEXPRESSIONS-5159E8D5">LAG表达式的示例</a></p>
                        </li>
                        <li>
                           <p><a href="analytic-view-measure-expressions.html#GUID-595B6AC1-9204-4119-890A-0C38F933D03C__EXAMPLEOFAWINDOWEXPRESSION-515A290C">窗口表达式的示例</a></p>
                        </li>
                        <li>
                           <p><a href="analytic-view-measure-expressions.html#GUID-595B6AC1-9204-4119-890A-0C38F933D03C__EXAMPLESOFSHAREOFEXPRESSIONS-515A2ECB">分享表达式的示例</a></p>
                        </li>
                        <li>
                           <p><a href="analytic-view-measure-expressions.html#GUID-595B6AC1-9204-4119-890A-0C38F933D03C__EXAMPLESOFQDREXPRESSIONS-515A36F0">QDR表达式的示例</a></p>
                        </li>
                        <li>
                           <p><a href="analytic-view-measure-expressions.html#GUID-595B6AC1-9204-4119-890A-0C38F933D03C__EXAMPLEOFANADDEDMEASUREUSINGTHERANK-3C60D46A">使用RANK函数添加度量的示例</a></p>
                        </li>
                     </ul>
                     <p>有关更多示例，请参阅SQL Live网站上的分析视图教程，网址为<a href="https://livesql.oracle.com/apex/livesql/file/index.html" target="_blank">https://livesql.oracle.com/apex/livesql/file/index.html</a> 。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-595B6AC1-9204-4119-890A-0C38F933D03C__EXAMPLESOFLAGEXPRESSIONS-5159E8D5">
                     <p class="subhead2" id="GUID-595B6AC1-9204-4119-890A-0C38F933D03C__GUID-98E4CB62-CAB0-40D9-8623-0BB75537EEA9">LAG表达式的示例</p>
                     <p>这些计算测量了不同的<code class="codeph">LAG</code>操作。
                     </p><pre class="pre codeblock"><code>- 这些计算出的度量来自 -  sales_av分析视图的measures_clause。措施（销售FACT销售， - 基本计量单位FACT单位， - 基本指标sales_prior_period AS  - 计算度量（LAG（销售额）超过（HIERARCHY time_hier OFFSET 1）），sales_year_ago AS（LAG（销售额）超过（HIERARCHY） time_hier OFFSET 1 ACTROSS ANCESTOR在LEVEL年）），chg_sales_year_ago AS（LAG_DIFF（销售）超过（HERVARCHY time_hier OFFSET 1 ACTROSS ANCESTOR在LEVEL年）），pct_chg_sales_year_ago AS（LAG_DIFF_PERCENT（销售）超过（HIERARCHY time_hier OFFSET 1 ACROSS ANCESTOR在LEVEL年份） ）），sales_qtr_ago AS（LAG（销售额）超过（HIERARCHY time_hier OFFSET 1 ACROSS ANCESTOR在LEVEL季度）），chg_sales_qtr_ago AS（LAG_DIFF（销售）OVER（HIERARCHY time_hier OFFSET 1 ACROSS ANCESTOR在LEVEL季度）），pct_chg_sales_qtr_ago AS（LAG_DIFF_PERCENT（销售额超过（等级时间_在第四季度超过ANCESTOR的OFFSET 1）））</code></pre></div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-595B6AC1-9204-4119-890A-0C38F933D03C__EXAMPLEOFAWINDOWEXPRESSION-515A290C">
                     <p class="subhead2" id="GUID-595B6AC1-9204-4119-890A-0C38F933D03C__GUID-96D709A6-078F-45AF-AF89-06806EB11D6B">窗口表达式的示例</p>
                     <p>该计算的度量使用窗口操作。</p><pre class="pre codeblock"><code>措施（销售FACT销售，单位FACT单位，sales_qtd AS（SUM（销售）OVER（HOURARCHY time_hier在无法预定的现有成员和当前成员之间的水平季度）），sales_ytd AS（SUM（销售）OVER（HIERARCHY time_hier BETWEEN UNBOUNDED PRECEDING AND）现年年级内的现任成员）））</code></pre></div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-595B6AC1-9204-4119-890A-0C38F933D03C__EXAMPLESOFSHAREOFEXPRESSIONS-515A2ECB">
                     <p class="subhead2" id="GUID-595B6AC1-9204-4119-890A-0C38F933D03C__GUID-398C53B9-D4E7-4786-8E0A-ED18FCC39E88">分享表达式的示例</p>
                     <p>这些计算的度量使用<code class="codeph">SHARE</code> <code class="codeph">OF</code>表达式。
                     </p><pre class="pre codeblock"><code>MEASURES（销售FACT销售，单位FACT单位，sales_shr_parent_prod AS（SHARE_OF（销售HIERARCHY product_hier PARENT）），sales_shr_parent_geog AS（SHARE_OF（销售HIERARCHY geography_hier PARENT）），sales_shr_region AS（SHARE_OF（销售HIERARCHY geography_hier LEVEL REGION）））</code></pre></div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-595B6AC1-9204-4119-890A-0C38F933D03C__EXAMPLESOFQDREXPRESSIONS-515A36F0">
                     <p class="subhead2" id="GUID-595B6AC1-9204-4119-890A-0C38F933D03C__GUID-B6E83578-7EFE-48BA-B087-8970063ECDC7">QDR表达式的示例</p>
                     <p>这些计算的度量使用<code class="codeph">QUALIFY</code>关键字指定限定数据引用表达式。
                     </p><pre class="pre codeblock"><code>MEASURES（销售FACT销售，单位FACT单位，sales_2011 AS（QUALIFY（销售，time_hier =年['11']）），sales_pct_chg_2011 AS（（销售 - （QUALIFY（销售，time_hier =年['11']））） /（QUALIFY（sales，time_hier = year ['11']））））</code></pre></div>
                  <!-- class="section" -->
                  <div class="section" id="GUID-595B6AC1-9204-4119-890A-0C38F933D03C__EXAMPLEOFANADDEDMEASUREUSINGTHERANK-3C60D46A">
                     <p class="subhead2" id="GUID-595B6AC1-9204-4119-890A-0C38F933D03C__GUID-2AE6B08A-DF35-4299-9102-1055D4D2F52F">使用RANK函数添加度量的示例</p>
                     <p>在此示例中，units_geog_rank_level度量使用<code class="codeph">RANK</code>函数根据单位对级别内的地理层次结构成员进行排名。
                     </p><pre class="pre codeblock"><code>SELECT geography_hier.member_name AS“Region”，单位AS“Units”，units_geog_rank_level AS“Rank”FROM ANALYTIC VIEW（使用sales_av HIERARCHIES（geography_hier）添加措施（units_geog_rank_level AS（RANK（）OVER（HIERARCHY geography_hier ORDER BY units desc nulls last inINININ） LEVEL））））WHERE geography_hier.level_name IN（'REGION'）ORDER BY units_geog_rank_level;</code></pre><p>以下是查询的结果。</p><pre class="pre codeblock"><code>地区单位排名------------- --------- ----亚洲56017849 1南美23904155 2北美20523698 3非洲12608308 4欧洲8666520 5大洋洲427664 6</code></pre></div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>使用Oracle Clusterware使应用程序高度可用</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Clusterware Administration and Deployment Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Clusterware Administration and Deployment Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="clusterware-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-24T07:05:38-07:00"></meta>
      <meta name="dcterms.title" content="Clusterware Administration and Deployment Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="2007, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E95727-05"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="cloning-oracle-clusterware.html" title="Previous" type="text/html"></link>
      <link rel="next" href="cluster-verification-utility-reference.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="CWADD"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="cloning-oracle-clusterware.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="cluster-verification-utility-reference.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">“Clusterware管理和部署指南”</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用Oracle Clusterware使应用程序高度可用</li>
            </ol>
            <a id="GUID-13400D83-3FF4-482E-B7A7-41C864A491DC" name="GUID-13400D83-3FF4-482E-B7A7-41C864A491DC"></a><a id="CWADD91277"></a>
            
            <h2 id="CWADD-GUID-13400D83-3FF4-482E-B7A7-41C864A491DC" class="sect2"><span class="enumeration_chapter">9</span>使用Oracle Clusterware使应用程序高度可用</h2>
         </header>
         <div class="ind">
            <div>
               <p>当应用程序，进程或服务器在群集中出现故障时，您希望中断尽可能短，如果用户不完全不知道的话。例如，当应用程序在服务器上失败时，可以在群集中的另一台服务器上重新启动该应用程序，从而最大限度地减少或消除对该应用程序使用的任何中断。同样，如果群集中的服务器出现故障，则该服务器上运行的所有应用程序和进程必须能够故障转移到另一台服务器以继续向用户提供服务。使用内置的<code class="codeph">generic_application</code>资源类型或可自定义的脚本和应用程序代理程序以及分配给应用程序和进程的资源属性，Oracle Clusterware可以管理所有这些实体以确保高可用性。
               </p>
               <p>本章介绍如何使用Oracle Clusterware启动，停止，监视，重新启动和重定位应用程序。Oracle Clusterware是Oracle Real Application Clusters（Oracle RAC）的底层集群解决方案。用于管理Oracle RAC数据库的相同功能和原则将应用于应用程序的管理。</p>
               <p>本章包括以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-342D37E6-E73E-4A80-BEAC-699EC25E46C5" title="Oracle Clusterware将应用程序和进程作为您向Oracle Clusterware注册的资源进行管理。虚拟机是为正在运行的操作系统创建的环境，称为客户操作系统。虚拟机显示为计算机桌面上的一个窗口，可以全屏模式显示，也可以在另一台计算机上远程显示。资源组是逻辑上相关的资源组的容器。在Oracle Clusterware中，资源类型是一类资源的模板。使用CRSCTL创建资源组，资源组类型以及向资源组添加资源。Oracle Clusterware通过称为代理的实体运行所有特定于资源的命令。操作脚本定义一个或多个操作以启动，停止，检查或清除资源。使用crsctl add resource命令在Oracle Clusterware 12c中注册资源。">Oracle Clusterware资源和代理</a></p>
                  </li>
                  <li>
                     <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-12757637-2D31-45C2-8253-B3DC95D90228" title="Oracle Clusterware根据您配置资源和资源组的方式来管理资源和资源组，以提高其可用性。">使用Oracle Clusterware实现高可用性概述</a></p>
                  </li>
                  <li>
                     <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-031885D1-164F-4A71-9E9C-C7237DAE914B" title="本节介绍在Oracle Clusterware中将应用程序注册为资源的过程示例。">将应用程序注册为资源</a></p>
                  </li>
                  <li>
                     <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-F650245B-F6F4-4C51-801A-8871A0B80E1C" title="您使用Oracle Clusterware管理的每个应用程序都使用crsctl start resource命令注册并作为资源存储在OCR.Start资源中。使用crsctl relocate resource命令重定位应用程序和应用程序资源。使用crsctl stop resource命令停止应用程序资源。使用crsctl status resource命令显示有关群集服务器上的应用程序和资源的状态信息。">管理资源</a></p>
                  </li>
                  <li>
                     <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-E343F418-6EC3-4C9A-8521-7DEDC3A9E715" title="要管理自动重新启动，请使用AUTO_START资源属性指定Oracle Clusterware是否应在服务器重新启动时自动启动资源。">管理Oracle Clusterware资源的自动重启</a></p>
                  </li>
               </ul>
            </div><a id="CWADD92084"></a><div class="props_rev_3"><a id="GUID-342D37E6-E73E-4A80-BEAC-699EC25E46C5" name="GUID-342D37E6-E73E-4A80-BEAC-699EC25E46C5"></a><h3 id="CWADD-GUID-342D37E6-E73E-4A80-BEAC-699EC25E46C5" class="sect3">Oracle Clusterware资源和代理</h3>
               <div>
                  <p>本节讨论Oracle Clusterware用于监视和管理<a href="glossary.html#GUID-B375E495-7564-43CB-898D-7596D72CEFD7"><span class="xrefglossterm">资源</span></a>的框架，以确保高应用程序可用性。
                  </p>
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-82BA6066-C22F-46B5-8333-7A007E94C6A8" title="Oracle Clusterware将应用程序和进程作为您向Oracle Clusterware注册的资源进行管理。">Oracle Clusterware资源</a></p>
                     </li>
                     <li>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-30DC08E5-72CE-4E93-B6D6-E209DEADF83E">Oracle Clusterware资源类型</a></p>
                     </li>
                     <li>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-CD3442A5-D6A8-4370-ABDA-CB686A736D3C" title="Oracle Clusterware通过称为代理的实体运行所有特定于资源的命令。">Oracle Clusterware中的代理</a></p>
                     </li>
                     <li>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-9055B23F-9D18-4CC4-8C64-7740D7E56DC8" title="操作脚本定义一个或多个操作以启动，停止，检查或清除资源。">动作脚本</a></p>
                     </li>
                     <li>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-A55586D4-3754-43F9-836D-32E75A334D49">构建代理</a></p>
                     </li>
                     <li>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-A907346B-96D2-485A-BD0C-51340222A612" title="使用crsctl add resource命令在Oracle Clusterware 12c中注册资源。">在Oracle Clusterware中注册资源</a></p>
                     </li>
                  </ul>
               </div><a id="CWADD91279"></a><div class="props_rev_3"><a id="GUID-82BA6066-C22F-46B5-8333-7A007E94C6A8" name="GUID-82BA6066-C22F-46B5-8333-7A007E94C6A8"></a><h4 id="CWADD-GUID-82BA6066-C22F-46B5-8333-7A007E94C6A8" class="sect4">Oracle Clusterware资源</h4>
                  <div>
                     <p>Oracle Clusterware将应用程序和进程作为您向Oracle Clusterware注册的资源进行管理。</p>
                     <div class="section">
                        <p>您向Oracle Clusterware注册以管理应用程序的资源数量取决于应用程序。仅包含一个进程的应用程序通常仅由一个资源表示。对于构建在可能需要多个资源的多个进程或组件上的更复杂的应用程序，您可以创建<a href="glossary.html#GUID-5E9EA9AE-DD01-4109-9FAC-54382A43DB85"><span class="xrefglossterm">资源组</span></a> 。
                        </p>
                        <p>每个资源都基于用作模板的资源类型。您可以通过指定明确的服务器列表或使用服务器池和策略等功能来配置Oracle Clusterware如何将应用程序放置在群集中。应用程序和组件之间的关系使用依赖关系表示。Oracle Clusterware通过对资源执行操作来管理应用程序，资源状态表示应用程序的可用性。</p>
                        <p>在Oracle Clusterware中将应用程序注册为资源时，除了实际将资源添加到系统之外，还可以使用归因于资源的资源属性来定义Oracle Clusterware如何管理应用程序。在尝试在另一台服务器上启动它（故障转移）之前，检查资源的频率以及在失败之后在同一服务器上重新启动资源的次数是资源属性的示例。注册信息还包括Oracle Clusterware调用以启动，停止，检查和清理应用程序的操作脚本或特定于应用程序的操作程序的路径。</p>
                        <p>动作脚本是Oracle Clusterware调用的通用脚本代理程序的shell脚本（Windows中的批处理脚本）。特定于应用程序的代理程序通常是直接调用Oracle Clusterware提供的API的C或C ++程序。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-82BA6066-C22F-46B5-8333-7A007E94C6A8__GUID-C054D61E-26B2-400A-9630-F0C53A627FC6">关键资源</p>
                        <p>一些建模为资源组的大型企业应用程序可以包括表示应用程序或基础架构组件的多个资如果资源组中的任何资源发生故障，则Oracle Clusterware必须将整个资源组故障转移到群集中的另一台服务器。</p>
                        <p>通过在资源组的CRITICAL_RESOURCES属性中指定资源的名称，可以将资源标记为对其资源组至关重要。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-9C074F34-F180-4200-A99B-72186DAB56E1" title="每个INSTANCE_COUNT个资源实例的整数不同。资源组属性，包含标记为资源组关键的资源列表。描述了SERVER_POOLS资源属性。属于资源组的资源列表。当资源添加到组时，Oracle Clusterware会填充和更新此属性。">Oracle Clusterware资源参考</a></li>
                           <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614" title="资源组是逻辑上相关的资源组的容器。">资源组</a></li>
                        </ul>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-FE34587A-A42E-4808-942E-A87D14057D0C" name="GUID-FE34587A-A42E-4808-942E-A87D14057D0C"></a><h5 id="CWADD-GUID-FE34587A-A42E-4808-942E-A87D14057D0C" class="sect5">虚拟机资源</h5>
                     <div>
                        <p>虚拟机是为正在运行的操作系统创建的环境，称为客户操作系统。虚拟机显示为计算机桌面上的一个窗口，可以全屏模式显示，也可以在另一台计算机上远程显示。</p>
                        <p>虚拟机本质上是一组确定其行为的参数，类似于计算机系统硬件。参数包括硬件设置（例如虚拟机具有多少内存）以及状态信息（例如虚拟机当前是否正在运行）。</p>
                        <p>黑盒虚拟机是虚拟机，其内容对于管理接口是未知的。所有关于黑盒虚拟机的知识都是它们包含的虚拟硬件：CPU数量，RAM数量，连接磁盘和连接的网络接口。然而，硬件的内容是未知的。例如，可能连接了许多磁盘，但不知道它们上安装了哪个操作系统，也不知道是否配置了网卡。</p>
                        <p>您可以使用Oracle Clusterware在物理硬件上管理黑盒Oracle虚拟机，从而提供高可用性和易于管理的虚拟机。</p>
                        <div class="infoboxnote" id="GUID-FE34587A-A42E-4808-942E-A87D14057D0C__GUID-FBF3EF20-AEDF-4DAE-8A18-0329D371F69A">
                           <p class="notep1">注意：</p>这特定于虚拟机，不适用于Oracle VM VirtualBox或任何其他Oracle VM产品。
                        </div>
                        <p>例如，在下图中，有两台物理计算机，每台计算机上运行着多个虚拟机。对于每个物理主机，其中一台计算机是Oracle Grid Infrastructure虚拟机（GIVM）。</p>
                        <p>GIVM本身构成了Oracle Clusterware集群，在此集群中有四个黑盒虚拟机Oracle Clusterware资源，每个资源都监视一个非GIVM虚拟机。群集不知道它正在监视的虚拟机的内容，因为它们是黑盒虚拟机。在此示例中，如果其中一个物理主机发生故障，那么其GIVM也会关闭，从而导致GIVM离开群集，从而导致资源故障转移到另一个GIVM，从而启动黑色新物理主机上的盒子虚拟机。</p>
                        <div class="figure" id="GUID-FE34587A-A42E-4808-942E-A87D14057D0C__GUID-038BCF93-374A-4812-93E1-EEFEBF379B84">
                           <p class="titleinfigure">图9-1 Oracle数据库机中高度可用的虚拟机</p><img src="img/cwadd_3v_007.png" alt="下面是图9-1的描述" title="下面是图9-1的描述" longdesc="img_text/cwadd_3v_007.html"><br><a href="img_text/cwadd_3v_007.html">“图9-1 Oracle数据库机中高度可用的虚拟机”的说明</a></div>
                        <!-- class="figure" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-FE34587A-A42E-4808-942E-A87D14057D0C__GUID-35883768-18A8-459B-B7E7-E693FA44F540">虚拟机架构</p>
                           <p>Oracle虚拟机由两部分组成：虚拟机服务器和虚拟机管理器。虚拟机服务器是安装在裸硬件上的最小操作系统，它使用Xen管理程序来管理guest虚拟机。服务器具有代理进程Oracle虚拟机代理，该代理进程充当中介，虚拟机管理器通过该中介操作服务器上的域。</p>
                           <p>虚拟机管理器是基于Web的管理控制台，用于管理虚拟机服务器及其虚拟机。虚拟机管理器需要数据库和Oracle WebLogic Server才能运行，并且是Oracle支持的Oracle虚拟机服务器管理所必需的。管理域应该尽可能小，因此，可能不会在那里安装虚拟机管理器。您必须在另一台主机上安装虚拟机管理器，这意味着要么使用另一台物理计算机，要么使用Xen <code class="codeph">xm</code>命令手动创建临时虚拟机。
                           </p>
                           <p>Oracle虚拟机管理器是管理虚拟机的唯一界面。所有请求都通过它进行定向，包括所有API和实用程序。</p>
                           <p>虚拟机资源（Oracle Clusterware资源）的资源类型与以下内容类似：</p><pre class="pre codeblock"><code>ATTRIBUTE = DESCRIPTION TYPE = string DEFAULT_VALUE =“VM代理的资源类型”ATTRIBUTE = AGENT_FILENAME TYPE =字符串DEFAULT_VALUE =％CRS_HOME％/ bin / oraagent％CRS_EXE_SUFFIX％ATTRIBUTE = CHECK_INTERVAL DEFAULT_VALUE = 1 TYPE = int ATTRIBUTE = OVMM_VM_ID TYPE = string DEFAULT_VALUE = ''ATTRIBUTE = OVMM_VM_NAME TYPE = string DEFAULT_VALUE =''ATTRIBUTE = VM TYPE = strings</code></pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614" name="GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614"></a><h5 id="CWADD-GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614" class="sect5">资源组</h5>
                     <div>
                        <p>资源组是逻辑上相关的资源组的容器。</p>
                        <p>应用程序被建模为包含应用程序资源和相关应用程序资源（如WebServer）和基础结构资源（如磁盘组和VIP）的资源组。资源组为所有类应用程序的高可用性建模提供了逻辑和直观的实体。</p>
                        <p>您使用CRSCTL创建资源组，然后将资源添加到资源组。资源组提供一组属性，这些属性涵盖作为资源组成员的资源的命名，描述和公共放置以及故障转移参数值。</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614__GUID-44E75E33-3A7D-4722-AAE5-7107D56D00DF">资源组原则</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>您可以基于资源组类型创建资源组。</p>
                              </li>
                              <li>
                                 <p>资源只能是一个资源组的成员。您可以在创建资源时为资源指定资源组。</p>
                                 <p>如果在创建资源时未指定资源组，则该资源将成为为该资源创建的自动资源组的成员。您可以稍后将资源添加到其他资源组。</p>
                              </li>
                              <li>
                                 <p>资源组知道关键资源，资源组的状态完全由其关键资源的状态决定。</p>
                                 <p>您可以从资源组中删除非关键资源（需要进行依赖性检查），并在以后将其添加到另一个资源组。</p>
                              </li>
                              <li>
                                 <p>资源组具有基数，用于指定可以在群集中同时运行的资源组的实例数。</p>
                              </li>
                              <li>
                                 <p>正在运行的资源组实例的所有成员资源都位于同一服务器上。</p>
                              </li>
                              <li>
                                 <p>Oracle Clusterware在发生故障时重新启动资源组，然后在本地重新启动失败时将资源组重定位到另一台服务器。</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614__GUID-6CED2C6F-E962-4FD0-82CC-92CADC30FFCE">自动资源组</p>
                           <p>如果在未指定资源组的情况下创建资源，则Oracle Clusterware会隐式自动将资源添加到与资源同名的资源组中。</p>
                           <p>为未明确添加到资源组的每个资源创建自动资源组。您可以在不使用资源组的情况下创建资源，并在不中断的情况下使用Oracle Clusterware。但是，使用资源组可以定义与SRVM或其他现有实用程序创建的基础结构和应用程序资源（通过自动资源组）的关系。</p>
                           <p>自动资源组仅由为其创建的资源描述，并且不能由管理员修改。您在未指定资源组的情况下创建的资源可以在以后添加到资源组。当资源已显式添加到资源组时，Oracle Clusterware将删除资源所属的自动资源组。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614__GUID-BB0838AE-1052-4D25-B909-A0D05A1415CB">资源组管理</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>您可以在创建资源时将资源添加到资源组。</p>
                              </li>
                              <li>
                                 <p>您可以将属于其自动资源组的资源显式添加到另一个资源组。将资源添加到ONLINE或OFFLINE组时，资源必须为OFFLINE。</p>
                              </li>
                              <li>
                                 <p>只要组中没有其他资源依赖它，您就可以从资源组（OFFLINE或ONLINE）中删除非关键资源。您删除的资源随后将成为其自动资源组的成员。稍后，您可以将此资源添加到另一个组。</p>
                              </li>
                              <li>
                                 <p>您可以删除非关键资源，从而从资源组中删除资源并将其从Oracle Clusterware中删除。除非首先更新资源组的关键资源列表以将资源取消标记为关键资源，否则无法删除资源组的关键资源。</p>
                              </li>
                              <li>
                                 <p>资源组在最初创建时为空，并且在删除组中的每个资源时也变为空。无法启动空资源组，其状态将始终为OFFLINE。</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614__GUID-852BF973-BD8E-40D4-A30E-42CCC13F7018">分享资源</p>
                           <p>在各种Oracle Clusterware部署中，有多个应用程序共享的组件（如文件系统）。例如，单个Oracle ACFS资源不能是使用文件系统的多个资源组的成员，因为根据定义，资源只能是一个资源组的成员。</p>
                           <p>对于这些类型的资源，Oracle建议您将它们放在各自的资源组中（显式或自动），并从应用程序资源组到这些共享资源组配置适当的依赖关系。以这种方式，多个应用程序可以共享组件。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614__GUID-26BFD5DA-D9B1-41E5-96F9-B1145147E697">关键资源</p>
                           <p>您可以拥有一个大型企业类型的应用程序，该应用程序被建模为包含与应用程序或基础架构组件相对应的多个资源的资源组。如果此类资源组中的任何资源发生故障，则Oracle Clusterware会将整个资源组故障转移到群集中的另一台服务器。但是，资源组中的某些资源对应用程序并不重要，并且不一定要求对整个资源组进行故障转移，这会导致实例运行中出现不必要的中断。</p>
                           <p>您可以将资源组中的某些资源定义为<span class="italic">关键</span> （通过在资源组的CRITICAL_RESOURCES列表属性中指定资源的名称），并且如果任何这些资源发生故障，则Oracle Clusterware将使资源组无法转移到另一台服务器在群集中。
                           </p>
                           <p>此外，资源组的状态由其关键资源的状态确定。非关键资源不会影响资源组的状态，也不会触发资源组的故障转移。在资源组可以启动并联机之前，资源组必须至少具有一个关键资源。</p>
                           <p>您可以将资源组中的各个资源指定为关键资源，也可以将资源类型指定为关键资源，这将使该特定类型的所有资源都成为关键资源。例如：</p><pre class="pre codeblock"><code>CRITICAL_RESOURCES =“r1 r2 r3”</code></pre><p>前面的示例列出了三个标记为关键的空格分隔资源。</p><pre class="pre codeblock"><code>CRITICAL_RESOURCES =“appvip类型：ora.export.type”</code></pre><p>前面的示例将特定资源类型列为关键资源，从而使此类型的任何资源成为关键资源。</p>
                           <p>创建资源组或删除其成员时，它是空的，因此没有关键资源。如果尚未在资源组的CRITICAL_RESOURCES属性中指定资源类型，则Oracle Clusterware会自动将添加到资源组的第一个资源标记为关键资源。在尝试启动资源组之前，Oracle Clusterware始终会检查是否存在关键资源。</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614__GUID-BBAE40D3-0BC2-47B3-B2BF-2523D0445FE9">资源组权限</p>
                           <p>您可以创建资源组和资源组类型，然后为这些组创建和添加资源。您还可以使用资源组的ACL属性定义在资源组上修改和执行操作的权限。资源组所有者可以通过适当设置资源组的ACL属性为其他操作系统用户和组分配权限。资源组中的资源可以在其ACL属性中维护自己的权限规范。特别：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>对资源组具有写权限并对资源具有写权限的用户可以将该资源添加到该组。</p>
                              </li>
                              <li>
                                 <p>资源组的所有者必须始终对组中的所有资源具有执行权限。授予组执行权限的任何用户或组必须对组中的所有资源具有执行权限。</p>
                                 <p>例如，在必须由<code class="codeph">root</code>管理资源组中的某些基础结构资源的情况下，必须将资源的所有者指定为<code class="codeph">root</code> ，并对授予组所有者的资源执行权限。这必须由<code class="codeph">root</code>用户明确完成。
                                 </p>
                              </li>
                              <li>
                                 <p>本地管理用户（Unix上的<code class="codeph">root</code>用户或Windows上的Administrators组用户）可以修改，删除，启动和停止任何资源组。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614__GUID-460E1DBE-0A1D-4479-8168-A5DD2655745F">资源组依赖关系</p>
                           <p>您可以在资源组之间设置依赖关系，从而提供表达应用程序和组件之间关系的方法。Oracle Clusterware提供了修饰符，用于指定资源组之间依赖关系的不同排序，位置和实施级别。有关资源组依赖关系的一些事项：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>资源组可以与另一个资源组具有依赖关系，而不与各个资源具有依赖关系。</p>
                              </li>
                              <li>
                                 <p>显式创建的资源组可以与自动资源组具有依赖关系。</p>
                              </li>
                              <li>
                                 <p>组中的资源可以与同一组中的另一个资源具有依赖关系。</p>
                              </li>
                              <li>
                                 <p>在未指定资源组（因此属于自动资源组）的情况下创建的资源可以与另一个资源组具有依赖关系。</p>
                              </li>
                              <li>
                                 <p>资源不能与资源组或其他资源组中的资源具有依赖关系。</p>
                              </li>
                           </ul>
                           <p>所有可用的Oracle Clusterware资源依赖关系也可用于资源组。您配置资源组的START_DEPENDENCIES和STOP_DEPENDENCIES属性以指定资源组的依赖关系。</p>
                           <div class="tblformal" id="GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614__GUID-F3902931-6592-4912-A5A8-55A9BFD902CF">
                              <p class="titleintable">表9-1资源组依赖关系类型和修饰符</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="资源组依赖类型和修饰符" border="1" summary="This table lists the dependency types and modifiers available for relating one resource group to another resource group." frame="hsides" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="20%" id="d45801e991">依赖类型</th>
                                       <th align="left" valign="bottom" width="20%" id="d45801e993">描述</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d45801e997" headers="d45801e991 "><span class="italic">艰难的开始</span></td>
                                       <td align="left" valign="top" width="20%" headers="d45801e997 d45801e993 ">
                                          <p>指定在启动此资源组之前，特定其他资源组必须联机（群集中的任何位置）的要求。</p>
                                          <p>例如：</p><pre class="pre codeblock"><code>START_DEPENDENCIES = hard（[global：| intermediate：| uniform：] <span class="variable" translate="no">other_resource_group</span> ）</code></pre><p>如果任何从属资源组的启动失败，则Oracle Clusterware将中止此资源组的启动。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d45801e1013" headers="d45801e991 "><span class="italic">开始不好</span></td>
                                       <td align="left" valign="top" width="20%" headers="d45801e1013 d45801e993 ">
                                          <p>指定在启动此资源组之前必须尝试启动特定其他资源组的要求。如果尝试无法启动特定的其他资源组，则Oracle Clusterware会启动此资源组。</p>
                                          <p>例如：</p><pre class="pre codeblock"><code>START_DEPENDENCIES = weak（[global：| concurrent：| uniform：] <span class="variable" translate="no">other_resource_group</span> ）</code></pre></td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d45801e1027" headers="d45801e991 "><span class="italic">拉起</span></td>
                                       <td align="left" valign="top" width="20%" headers="d45801e1027 d45801e993 ">
                                          <p>当依赖资源组启动时必须自动启动此资源组时，请使用此依赖关系。</p>
                                          <p>例如：</p><pre class="pre codeblock"><code>START_DEPENDENCIES = pullup（[intermediate：| always：] <span class="variable" translate="no">other_resource_group</span> ]）</code></pre><p>Oracle建议您在资源组之间存在停止依赖关系时使用此依赖关系。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d45801e1043" headers="d45801e991 "><span class="italic">硬停</span></td>
                                       <td align="left" valign="top" width="20%" headers="d45801e1043 d45801e993 ">
                                          <p>此依赖关系指定在另一个特定资源组停止运行时停止此资源组的强制要求。</p>
                                          <p>例如：</p><pre class="pre codeblock"><code>STOP_DEPENDENCIES = hard（[intermediate：| global：| shutdown：] <span class="variable" translate="no">other_resource_group</span> ）</code></pre></td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d45801e1057" headers="d45801e991 "><span class="italic">引力</span></td>
                                       <td align="left" valign="top" width="20%" headers="d45801e1057 d45801e993 ">
                                          <p>指定与特定其他资源组的共址首选项。</p>
                                          <p>例如：</p><pre class="pre codeblock"><code>START_DEPENDENCIES =吸引力（[intermediate：] <span class="variable" translate="no">other_resource_group</span> ）</code></pre><p>Oracle Clusterware将尝试在特定其他资源组已在线的同一服务器上启动此资源组。</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d45801e1073" headers="d45801e991 "><span class="italic">分散</span></td>
                                       <td align="left" valign="top" width="20%" headers="d45801e1073 d45801e993 ">
                                          <p>指定不与特定其他资源组共存的首选项。Oracle Clusterware将尝试在具有最小数量的具有色散依赖性的在线资源组的服务器上启动此资源组。</p>
                                          <p>例如：</p><pre class="pre codeblock"><code>START_DEPENDENCIES = dispersion（[intermediate：| active：| pool：]： <span class="variable" translate="no">other_resource_group</span> ）</code></pre></td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d45801e1087" headers="d45801e991 "><span class="italic">排除</span></td>
                                       <td align="left" valign="top" width="20%" headers="d45801e1087 d45801e993 ">
                                          <p>指定强制要求此资源组不在与特定其他资源组相同的服务器上运行。Oracle Clusterware将拒绝此资源组的启动或停止从属资源组并在另一台服务器上重新启动它们。</p>
                                          <p>例如：</p><pre class="pre codeblock"><code>START_DEPENDENCIES =排除[（preempt_pre：| preempt_post）] <span class="variable" translate="no">other_resource_group</span> ）</code></pre></td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614__GUID-38D66A7F-1CB5-457E-A56C-00267246DE36">资源组故障和恢复</p>
                           <p>如前所述，关键资源确定资源组状态和故障转移。</p>
                           <p><span class="bold">关键资源的失败和恢复</span></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>当资源组的关键资源发生故障时，资源组会立即转换为OFFLINE状态。</p>
                              </li>
                              <li>
                                 <p>Oracle Clusterware根据RESTART_ATTEMPTS和UPTIME_THRESHOLD资源属性尝试本地重新启动失败的关键资源。</p>
                              </li>
                              <li>
                                 <p>Oracle Clusterware会对同一组中对故障资源具有停止依赖性的其他资源启动立即检查操作。</p>
                              </li>
                              <li>
                                 <p>Oracle Clusterware在依赖于此资源组的其他资源组上启动立即检查操作。</p>
                              </li>
                              <li>
                                 <p>如果资源成功重新启动，则资源组将转换为ONLINE状态，Oracle Clusterware将在资源组内和跨资源组执行上拉依赖性评估。</p>
                              </li>
                              <li>
                                 <p>如果Oracle Clusterware耗尽资源的所有本地重新启动尝试，则Oracle Clusterware将停止整个资源组。Oracle Clusterware还会立即停止对资源组具有停止依赖性的其他资源组。如果配置为执行此操作，Oracle Clusterware将尝试本地重新启动资源组。在耗尽所有重新启动尝试时，资源组将故障转移到群集中的另一个服务器。</p>
                              </li>
                           </ul>
                           <p><span class="bold">非关键资源的故障和恢复</span></p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>当资源组中的非关键资源发生故障时，Oracle Clusterware会根据RESTART_ATTEMPTS和UPTIME_THRESHOLD资源属性的值尝试本地重新启动失败的资源。当非关键资源失败时，对资源组的状态没有影响。</p>
                              </li>
                              <li>
                                 <p>Oracle Clusterware会对同一组中对故障资源具有停止依赖性的其他资源启动立即检查操作。</p>
                              </li>
                              <li>
                                 <p>如果资源成功重新启动，Oracle Clusterware将执行上拉依赖性评估和相应的启动操作。</p>
                              </li>
                              <li>
                                 <p>如果Oracle Clusterware耗尽资源的所有本地重新启动尝试，则对资源组的状态没有影响。然后，您必须在修复失败原因后显式启动非关键资源。</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-6B647375-A395-49AA-9BF3-10160A9108DD" title="在Oracle Clusterware中，资源类型是一类资源的模板。">资源组类型</a></li>
                              <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-98B214E5-AB6B-41B7-B469-83929EDC9D11" title="使用CRSCTL创建资源组，资源组类型以及向资源组添加资源。">使用资源组</a></li>
                           </ul>
                        </div>
                     </div>
                     <div class="sect5"><a id="GUID-6B647375-A395-49AA-9BF3-10160A9108DD" name="GUID-6B647375-A395-49AA-9BF3-10160A9108DD"></a><h6 id="CWADD-GUID-6B647375-A395-49AA-9BF3-10160A9108DD" class="sect6">资源组类型</h6>
                        <div>
                           <p>在Oracle Clusterware中，资源类型是一类资源的模板。</p>
                           <p>资源组类型为所有资源组提供了一组通用的属性。创建资源组时，必须指定资源组类型。Oracle Clusterware提供两种基本资源组类型： <code class="codeph">local_resourcegroup</code>和<code class="codeph">cluster_resourcegroup</code> 。基本资源类型具有与资源类似的属性，其中一些属性可以配置。
                           </p>
                           <div class="section">
                              <p class="subhead3" id="GUID-6B647375-A395-49AA-9BF3-10160A9108DD__GUID-1883145A-F2F4-43A5-8722-1F34E70E3CD5">本地资源组类型</p>
                              <p>使用<code class="codeph">local_resourcegroup</code>类型创建仅包含本地资源的资源组。此类型的资源组的实例可以在群集中的每个节点上运行。本地资源组类型属性包括：</p>
                              <ul class="simple" style="list-style-type:none;padding-left:0">
                                 <li>名称</li>
                                 <li>描述</li>
                                 <li>ACL</li>
                                 <li>自动开启</li>
                                 <li>CRITICAL_RESOURCES</li>
                                 <li>DEBUG</li>
                                 <li>启用</li>
                                 <li>INTERNAL_STATE</li>
                                 <li>RESOURCE_LIST</li>
                                 <li>RESTART_ATTEMPTS</li>
                                 <li>SERVER_CATEGORY</li>
                                 <li>START_DEPENDENCIES</li>
                                 <li>STOP_DEPENDENCIES</li>
                                 <li>州</li>
                                 <li>STATE_DETAILS</li>
                                 <li>UPTIME_THRESHOLD</li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-6B647375-A395-49AA-9BF3-10160A9108DD__GUID-178004DC-67EE-4A06-B14F-36DBD16F4E44">群集资源组类型</p>
                              <p><code class="codeph">cluster_resourcegroup</code>类型的资源组可以在群集中的一组静态或动态服务器上运行一个或多个实例。这样的资源组可以根据组的放置策略故障转移到集群中的另一个服务器。群集资源组类型属性包括：</p>
                              <ul class="simple" style="list-style-type:none;padding-left:0">
                                 <li>名称</li>
                                 <li>描述</li>
                                 <li>ACL</li>
                                 <li>ACTIVE_PLACEMENT</li>
                                 <li>自动开启</li>
                                 <li>CARDINALITY</li>
                                 <li>CRITICAL_RESOURCES</li>
                                 <li>DEBUG</li>
                                 <li>启用</li>
                                 <li>FAILURE_INTERVAL</li>
                                 <li>FAILURE_THRESHOLD</li>
                                 <li>HOSTING_MEMBERS</li>
                                 <li>INTERNAL_STATE</li>
                                 <li>放置</li>
                                 <li>RESOURCE_LIST</li>
                                 <li>RESTART_ATTEMPTS</li>
                                 <li>SERVER_CATEGORY</li>
                                 <li>SERVER_POOLS</li>
                                 <li>START_DEPENDENCIES</li>
                                 <li>STOP_DEPENDENCIES</li>
                                 <li>州</li>
                                 <li>STATE_DETAILS</li>
                                 <li>UPTIME_THRESHOLD</li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="relinfo">
                              <p><strong>相关话题</strong></p>
                              <ul>
                                 <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-98B214E5-AB6B-41B7-B469-83929EDC9D11" title="使用CRSCTL创建资源组，资源组类型以及向资源组添加资源。">使用资源组</a></li>
                                 <li><a href="oracle-clusterware-resource-reference.html#GUID-9C074F34-F180-4200-A99B-72186DAB56E1" title="每个INSTANCE_COUNT个资源实例的整数不同。资源组属性，包含标记为资源组关键的资源列表。描述了SERVER_POOLS资源属性。属于资源组的资源列表。当资源添加到组时，Oracle Clusterware会填充和更新此属性。">Oracle Clusterware资源参考</a></li>
                              </ul>
                           </div>
                        </div>
                     </div>
                     <div class="sect5"><a id="GUID-98B214E5-AB6B-41B7-B469-83929EDC9D11" name="GUID-98B214E5-AB6B-41B7-B469-83929EDC9D11"></a><h6 id="CWADD-GUID-98B214E5-AB6B-41B7-B469-83929EDC9D11" class="sect6">使用资源组</h6>
                        <div>
                           <p>使用CRSCTL创建资源组，资源组类型以及向资源组添加资源。</p>
                           <div class="section">要使用资源组，必须首先根据您创建的内置资源组类型或资源组类型创建资源组。创建资源组后，可以向其中添加资源。</div>
                           <!-- class="section" -->
                           <ol>
                              <li class="stepexpand"><span>使用以下命令创建资源组：</span><div><pre class="pre codeblock"><code>$ crsctl add resourcegroup <span class="variable" translate="no">group_name</span> -type <span class="variable" translate="no">group_type</span></code></pre>上述命令创建一个空资源组，您可以在其中添加资源。您必须提供资源组的名称和资源组类型。如果选择将资源组基于自定义资源组类型，则必须首先创建资源组类型，如下一步所述。</div>
                              </li>
                              <li class="stepexpand"><span>如果要基于自定义资源组类型创建资源组，则必须创建资源组类型，如下所示：</span><div><pre class="pre codeblock"><code>$ crsctl add resourcegrouptype <span class="variable" translate="no">group_type_name</span> -basetype <span class="variable" translate="no">base_group_type</span> {-file <span class="variable" translate="no">file_path</span> | -attr“ <span class="variable" translate="no">attribute_name=attribute_value</span> ”}</code></pre>上述命令创建资源组类型，该类型为您基于此资源组类型创建的任何资源组提供单一属性集。您必须提供现有资源组类型作为基本资源组类型，以及包含以行分隔的属性/属性值对列表的文件的路径，或者，您可以提供以逗号分隔的属性列表/命令行上的属性值对。</div>
                              </li>
                              <li class="stepexpand"><span>创建资源组后，您可以开始向资源组添加资源，如下所示：</span><div><pre class="pre codeblock"><code>$ crsctl add resource <span class="variable" translate="no">resource_name</span> -group <span class="variable" translate="no">group_name</span></code></pre>添加资源的资源组必须存在，并且要添加的资源必须处于脱机状态。资源只能是一个资源组的成员。如果您拥有由多个应用程序（例如文件系统）共享的资源，那么Oracle建议您将这些资源放入各自的资源组中。</div>
                              </li>
                           </ol>
                        </div>
                     </div>
                  </div>
               </div><a id="CWADD91280"></a><div class="props_rev_3"><a id="GUID-30DC08E5-72CE-4E93-B6D6-E209DEADF83E" name="GUID-30DC08E5-72CE-4E93-B6D6-E209DEADF83E"></a><h4 id="CWADD-GUID-30DC08E5-72CE-4E93-B6D6-E209DEADF83E" class="sect4">Oracle Clusterware资源类型</h4>
                  <div>
                     <div class="section">
                        <p>通常，所有资源都是唯一的，但某些资源可能具有共同属性。Oracle Clusterware使用资源类型来组织这些类似的资源。资源类型提供的好处是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>仅管理必要的资源属性</p>
                           </li>
                           <li>
                              <p>根据资源类型管理所有资源</p>
                           </li>
                        </ul>
                        <p>您在Oracle Clusterware中注册的每个资源都必须具有某种资源类型。除了Oracle Clusterware中包含的资源类型之外，您还可以使用Oracle Clusterware Control（CRSCTL）实用程序定义自定义资源类型。包含的资源类型是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">本地资源</span> ：本地资源类型名称的实例是群集的每个服务器上的<code class="codeph">local_resource</code> -run（默认值），或者您可以限制它们在属于特定服务器类别的服务器上运行。当服务器加入群集时，Oracle Clusterware会自动扩展本地资源，以使实例与新服务器绑定。当服务器离开集群时，Oracle Clusterware会自动清除在脱机服务器上运行的本地资源的实例。本地资源的实例固定在他们的服务器上;它们不会从一台服务器故障转移到另一台服务器。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">群集资源</span> ：群集感知资源类型 - 类型名称为<code class="codeph">cluster_resource</code> - 了解群集环境，并受<a href="glossary.html#GUID-4596912E-C8E1-4044-A9BA-4681583B396D"><span class="xrefglossterm">基数</span></a>和跨服务器切换和故障转移的约束。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">通用应用程序</span> ：您可以使用此资源类型类型名称为<code class="codeph">generic_application</code> - 以保护任何通用应用程序，而无需其他脚本。通过使用<code class="codeph">generic_application</code>资源类型定义资源并提供资源的关键属性的值，可以实现应用程序的高可用性。<code class="codeph">generic_application</code>资源类型派生自<code class="codeph">cluster_resource</code>资源类型，因此， <code class="codeph">generic_application</code>资源类型的所有资源都是群集感知资源。属性包括：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">START_PROGRAM</code> ：启动应用程序的可执行文件的完整路径，包含所有适当的参数。可执行文件必须存在于配置Oracle Grid Infrastructure以运行应用程序的每台服务器上。此属性是必需的。例如：</p><pre class="pre codeblock"><code>/ opt / my_app -start</code></pre><p>可执行文件还必须确保应用程序启动并返回退出状态值零（0），以指示应用程序已成功启动并处于联机状态。如果可执行文件无法启动应用程序，则可执行文件将以非零状态代码退出。</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">STOP_PROGRAM</code> ：使用所有适当参数停止应用程序的可执行文件的完整路径。可执行文件必须存在于配置Oracle Grid Infrastructure以运行应用程序的每台服务器上。如果未指定此属性值，则Oracle Clusterware将使用与<code class="codeph">kill</code>命令等效的操作系统。例如：</p><pre class="pre codeblock"><code>/ opt / my_app -stop</code></pre><p>可执行文件还必须确保应用程序停止并返回退出状态值零（0）以指示应用程序已成功停止。如果可执行文件无法停止应用程序，则可执行文件将以非零状态代码退出，Oracle Clusterware将启动资源清理。</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">CLEAN_PROGRAM</code> ：清除程序的可执行文件的完整路径，包含所有适当的参数。可执行文件必须存在于配置Oracle Grid Infrastructure以运行应用程序的每台服务器上。如果未指定此属性的值，则Oracle Clusterware使用与<code class="codeph">kill -9</code>命令等效的操作系统。例如：</p><pre class="pre codeblock"><code>/ opt / my_app -clean</code></pre><div class="infoboxnote" id="GUID-30DC08E5-72CE-4E93-B6D6-E209DEADF83E__GUID-D41A61B0-844F-4226-9F64-E5C423580E99">
                                       <p class="notep1">注意：</p>
                                       <p><code class="codeph">STOP_PROGRAM</code>和<code class="codeph">CLEAN_PROGRAM</code>之间的区别在于<code class="codeph">STOP_PROGRAM</code>是一个强制停止，它会<code class="codeph">CLEAN_PROGRAM</code>停止应用程序，并且必须始终能够停止应用程序或应用程序变得无法管理。
                                       </p>
                                    </div>
                                 </li>
                                 <li>
                                    <p><code class="codeph">PID_FILES</code> ：以逗号分隔的文件完整路径列表，由应用程序写入并包含要监视的进程ID（PID）。单个进程的失败被视为完全资源故障。例如：</p><pre class="pre codeblock"><code>/opt/app.pid</code></pre><div class="infoboxnote" id="GUID-30DC08E5-72CE-4E93-B6D6-E209DEADF83E__GUID-3EDB1345-8F88-4C8C-BE93-0905F068EDDC">
                                       <p class="notep1">注意：</p>
                                       <p>在START操作完成后立即读取您在<code class="codeph">PID_FILES</code>属性中指定的文件，并开始监视文件中列出的PID。
                                       </p>
                                    </div>
                                 </li>
                                 <li>
                                    <p><code class="codeph">EXECUTABLE_NAMES</code> ：应用程序启动时创建的可执行文件名称的逗号分隔列表，随后监视这些可执行文件的状态。单个可执行文件的失败被视为完全资源故障。例如：</p><pre class="pre codeblock"><code>my_app应用</code></pre><div class="infoboxnote" id="GUID-30DC08E5-72CE-4E93-B6D6-E209DEADF83E__GUID-35CB041F-B0A6-4AB6-A10E-E0F513136003">
                                       <p class="notep1">注意：</p>
                                       <p>您只需指定可执行文件的完整名称。此属性不接受可执行文件或通配符的路径。在START操作完成后立即缓存与可执行文件名匹配的PID。</p>
                                    </div>
                                 </li>
                                 <li>
                                    <p><code class="codeph">CHECK_PROGRAMS</code> ：可执行文件的完整路径列表，用于确定应用程序的状态。任何应用程序报告非运行状态都被视为整个资源的故障。例如：</p><pre class="pre codeblock"><code>/ opt / my_app -check</code></pre></li>
                                 <li>
                                    <p><code class="codeph">ENVIRONMENT_FILE</code> ：包含启动应用程序时源的环境变量的文件的完整路径。该文件必须是包含<code class="codeph"><span class="variable" translate="no">name</span> = <span class="variable" translate="no">value</span></code>对的文本文件，每行一个。例如：</p><pre class="pre codeblock"><code>/opt/my_app.env</code></pre></li>
                                 <li>
                                    <p><code class="codeph">ENVIRONMENT_VARS</code> ：启动应用程序时要包含在环境中的逗号分隔的<code class="codeph"><span class="variable" translate="no">name</span> = <span class="variable" translate="no">name</span></code>对列表。例如：</p><pre class="pre codeblock"><code>USE_FILES =否，AUTO_START =是</code></pre></li>
                                 <li>
                                    <p><code class="codeph">SEND_OUTPUT_ALWAYS</code> ：此属性负责发送发送到STDOUT的应用程序输出，然后显示该输出。除非操作失败，否则值0不显示任何应用程序输出。当操作失败时，将显示代理保存的任何应用程序输出。任何大于0的值都会显示每个应用程序输出。默认值为0。例如：</p><pre class="pre codeblock"><code>SEND_OUTPUT_ALWAYS = 1</code></pre></li>
                              </ul>
                              <div class="infoboxnote" id="GUID-30DC08E5-72CE-4E93-B6D6-E209DEADF83E__GUID-ED9DDC78-DCB2-4033-B73C-C4823D4151EE">
                                 <p class="notep1">注意：</p>
                                 <p>如果未指定<code class="codeph">STOP_PROGRAM</code> ， <code class="codeph">CHECK_PROGRAMS</code>和<code class="codeph">CLEAN_PROGRAM</code>属性，则必须指定<code class="codeph">PID_FILES</code>或<code class="codeph">EXECUTABLE_NAMES</code> ，否则Oracle Clusterware将不允许您注册此类型的资源。
                                 </p>
                              </div>
                              <p>如果指定所有属性，则适用以下规则：</p>
                              <ol>
                                 <li>
                                    <p>停止资源时，如果指定了<code class="codeph">STOP_PROGRAM</code> ，则Oracle Clusterware会调用<code class="codeph">STOP_PROGRAM</code> 。否则，Oracle Clusterware对从<code class="codeph">PID_FILES</code>或<code class="codeph">EXECUTABLE_NAMES</code>属性获取的PID使用与<code class="codeph">kill -9</code>命令等效的操作系统。
                                    </p>
                                 </li>
                                 <li>
                                    <p>当您需要建立应用程序的当前状态时，如果指定了<code class="codeph">CHECK_PROGRAMS</code> ，则Oracle Clusterware会调用<code class="codeph">CHECK_PROGRAMS</code> 。否则，Oracle Clusterware使用与<code class="codeph">ps -p</code>命令等效的操作系统，其PID值来自<code class="codeph">PID_FILES</code>或<code class="codeph">EXECUTABLE_NAMES</code>属性。
                                    </p>
                                 </li>
                                 <li>
                                    <p>清理资源时，如果指定了<code class="codeph">CLEAN_PROGRAM</code> ，则Oracle Clusterware会调用<code class="codeph">CLEAN_PROGRAM</code> 。否则，Oracle Clusterware对从<code class="codeph">PID_FILES</code>或<code class="codeph">EXECUTABLE_NAMES</code>属性获取的PID使用与<code class="codeph">kill -9</code>命令等效的操作系统。
                                    </p>
                                 </li>
                              </ol>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="oracle-clusterware-control-crsctl-utility-reference.html#GUID-7089B6C0-8701-42E6-B896-674E5E2A06F9" title="注册要由Oracle Clusterware管理的资源。">crsctl添加资源</a></li>
                           <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-C8652895-D23B-49F2-BF4B-57D3A2E660D9">资源国</a></li>
                           <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-6D80CD6A-A3C1-4F5C-9F3D-6FCBDE9C075F" title="使用crsctl add resource命令可以使用generic_application资源类型创建资源，以模拟任何类型的需要高可用性的应用程序，而无需创建任何操作脚本。">创建使用generic_application资源类型的资源</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD92083"></a><a id="CWADD92082"></a><div class="props_rev_3"><a id="GUID-CD3442A5-D6A8-4370-ABDA-CB686A736D3C" name="GUID-CD3442A5-D6A8-4370-ABDA-CB686A736D3C"></a><h4 id="CWADD-GUID-CD3442A5-D6A8-4370-ABDA-CB686A736D3C" class="sect4">Oracle Clusterware中的代理</h4>
                  <div>
                     <p>Oracle Clusterware通过称为<span class="italic">代理</span>的实体运行所有特定于资源的命令。
                     </p>
                     <div class="section">
                        <div class="p">Oracle Clusterware在将应用程序注册为Oracle Clusterware资源时对其进行管理。Oracle Clusterware可以访问特定于应用程序的基元，这些基元能够启动，停止和监视特定资源。
                           <div class="infoboxnote" id="GUID-CD3442A5-D6A8-4370-ABDA-CB686A736D3C__GUID-18CDE238-6968-44DB-9F5E-13AF2CA8B795">
                              <p class="notep1">注意：</p>为了提高安全性并进一步分离管理职责，Oracle Clusterware代理程序以SYSRAC管理权限运行，不再需要SYSDBA管理权限。SYSRAC管理权限是Oracle Clusterware代理代表Oracle RAC实用程序（如SRVCTL）连接到数据库的默认模式，因此对于Oracle RAC数据库群集的日常管理，不需要与数据库建立SYSDBA连接。
                           </div>
                        </div>
                        <p>代理是包含代理框架和用户代码以管理资源的过程。<span class="italic">代理框架</span>是一个库，使您可以插入特定于应用程序的代码来管理自定义应用程序。您可以将所有实际的应用程序管理功能（例如启动，停止和检查应用程序的运行状况）编程到代理程序中。这些功能称为<span class="italic">入口点</span> 。
                        </p>
                        <p>代理框架负责代表Oracle Clusterware调用这些入口点函数。代理开发人员可以使用这些入口点来插入有关如何启动，停止和监视资源的特定资源所需的功能。代理能够管理多个资源。</p>
                        <p>代理开发人员可以将以下入口点设置为其代码的回调：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">ABORT</span> ：如果任何其他入口点挂起，则代理框架会调用ABORT入口点以停止正在进行的操作。如果代理开发人员未提供停止功能，则代理框架将退出代理程序。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">操作</span> ：使用<code class="codeph">crsctl request action</code>命令的<code class="codeph"><a href="oracle-clusterware-c-application-program-interfaces.html#GUID-76E327E4-D24D-4C66-9432-279BB3772919" title="指示Oracle Clusterware对一组命名资源运行操作。">clscrs_request_action</a></code> API调用自定义操作时，ACTION入口点为Invoked。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">检查</span> ：CHECK（监视器）入口点用于监视资源的运行状况。代理框架定期调用此入口点。如果它在此操作期间发现任何状态更改，则代理框架会通知Oracle Clusterware有关特定资源状态的更改。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">清洁</span> ：每当有一个需要清理的资源干净的入口点的作用。当用户必须强制终止资源时，将调用此非优雅操作。此命令清除特定于资源的环境，以便可以重新启动资源。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">DELETE</span> ：在资源取消注册时资源可以运行的每个节点上调用DELETE入口点。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">修改</span> ：在修改资源概要文件时，可以在资源可以运行的每个节点上调用MODIFY入口点。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">START</span> ：START入口点用于使资源联机。每当从Oracle Clusterware接收到启动命令时，代理框架就会调用此入口点。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">STOP</span> ：STOP入口点用于优雅地关闭资源。只要从Oracle Clusterware接收到stop命令，代理框架就会调用此入口点。
                              </p>
                           </li>
                        </ul>
                        <p>START，STOP，CHECK和CLEAN是强制性入口点，代理开发人员必须在构建代理时提供这些入口点。代理开发人员可以使用多种方法来实现这些入口点，包括使用C，C ++或脚本。也可以开发使用C或C ++和脚本类型入口点的代理。初始化代理框架时，如果未提供任何强制入口点，则代理框架将调用<code class="codeph">ACTION_SCRIPT</code>资源属性指向的脚本。
                        </p>
                        <p>在任何给定时间，代理框架仅为每个应用程序调用一个入口点。如果该入口点挂起，则代理框架将调用ABORT入口点以结束当前操作。代理框架定期调用CHECK入口点以确定资源的状态。此入口点必须返回以下状态之一作为资源状态：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">CLSAGFW_ONLINE</code> ：如果资源成功启动并且当前处于正常运行状态，则CHECK入口点将返回ONLINE。代理框架在处于此状态时继续监视资源。<code class="codeph">scriptagent</code>状态数值为0。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">CLSAGFW_UNPLANNED_OFFLINE</code>和<code class="codeph">CLSAGFW_PLANNED_OFFLINE</code> ：OFFLINE状态表示资源当前未在运行。对于<code class="codeph">scriptagent</code> ，这两个状态的数值分别为1和2。
                              </p>
                              <p>存在两个不同的类别来描述资源的脱机状态： <span class="italic">计划的</span>和<span class="italic">未计划的</span> 。
                              </p>
                              <p>当资源状态通过Oracle Clusterware转换为OFFLINE时，无论从CHECK入口点返回哪个值，都假定此资源的<span class="italic">意图</span>是脱机（ <code class="codeph">TARGET=OFFLINE</code> ）。但是，当代理检测到资源状态已独立于Oracle Clusterware更改时（例如某人通过非Oracle接口停止资源），则必须将该intent从代理转移到Cluster Ready Services守护程序（ CRSD）。然后，意图成为以下因素的决定因素：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>是保留还是更改资源的<code class="codeph">TARGET</code>资源属性的值。<code class="codeph">PLANNED_OFFLINE</code>表示<span class="italic">仅</span>在资源之前运行<span class="italic">时才</span>必须将<code class="codeph">TARGET</code>资源属性更改为OFFLINE。如果资源未运行（ <code class="codeph">STATE=OFFLINE</code> ， <code class="codeph">TARGET=OFFLINE</code> ）并且请求启动它，则<code class="codeph">TARGET</code>资源属性的值将更改为ONLINE。然后，启动请求将转到代理程序，代理程序向Oracle Clusterware报告<code class="codeph">PLANNED_OFFLINE</code>资源状态，并且<code class="codeph">TARGET</code>资源属性的值保持为ONLINE。 <code class="codeph">UNPLANNED_OFFLINE</code>不会更改<code class="codeph">TARGET</code>属性。
                                    </p>
                                 </li>
                                 <li>
                                    <p>是将资源的状态保留为<code class="codeph">UNPLANNED_OFFLINE</code>还是尝试通过在本地重新启动资源或将其故障转移到集群中的另一台服务器来恢复资源。<code class="codeph">PLANNED_OFFLINE</code>状态使CRSD保持原样，而<code class="codeph">UNPLANNED_OFFLINE</code>状态提示资源恢复。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><code class="codeph">CLSAGFW_UNKNOWN</code> ：如果无法确定资源的当前状态，则CHECK入口点将返回UNKNOWN。为响应此状态，Oracle Clusterware不会尝试进行故障转移或重新启动资源。如果资源的先前状态为ONLINE或PARTIAL，则代理框架将继续监视资源。 <code class="codeph">scriptagent</code>状态数值为3。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">CLSAGFW_PARTIAL</code> ：当CHECK入口点知道资源部分在线并且其某些服务可用时，它返回PARTIAL。Oracle Clusterware将此状态视为部分联机，并且不会尝试进行故障转移或重新启动资源。代理框架继续监视此状态下的资源。<code class="codeph">scriptagent</code>状态数值为4。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">CLSAGFW_FAILED</code> ：只要检测到资源未处于运行状态且某些组件发生故障并且需要一些清理才能重新启动资源，CHECK入口点将返回FAILED。为响应此状态，Oracle Clusterware调用CLEAN操作来清理资源。CLEAN操作完成后，资源的状态应为OFFLINE。接下来，根据资源的策略，Oracle Clusterware可能会尝试故障转移或重新启动资源。在任何情况下，代理框架都不会监视失败的资源。<code class="codeph">scriptagent</code>状态数值为5。
                              </p>
                           </li>
                        </ul>
                        <p>代理框架按照<code class="codeph">CHECK_INTERVAL</code>或<code class="codeph">OFFLINE_CHECK_INTERVAL</code>资源属性的指定，定期监视<a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-CD3442A5-D6A8-4370-ABDA-CB686A736D3C__CHDEJIEE" title="此表列出了代理框架在某些状态下监视资源的特征。">表9-2</a>中列出的状态中的资源。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-CD3442A5-D6A8-4370-ABDA-CB686A736D3C__CHDEJIEE">
                        <p class="titleintable">表9-2代理框架监控特性</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="代理框架监控特性" width="100%" border="1" summary="This table lists the characteristics with which the agent framework monitors resources in certain states." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="21%" id="d45801e2412">州</th>
                                 <th align="left" valign="bottom" width="39%" id="d45801e2415">条件</th>
                                 <th align="left" valign="bottom" width="39%" id="d45801e2418">频率</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d45801e2423" headers="d45801e2412 ">
                                    <p>线上</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d45801e2423 d45801e2415 ">
                                    <p>总是</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d45801e2423 d45801e2418 ">\<p><code class="codeph">CHECK_INTERVAL</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d45801e2435" headers="d45801e2412 ">
                                    <p>局部</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d45801e2435 d45801e2415 ">
                                    <p>总是</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d45801e2435 d45801e2418 ">
                                    <p><code class="codeph">CHECK_INTERVAL</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d45801e2446" headers="d45801e2412 ">
                                    <p>离线</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d45801e2446 d45801e2415 ">
                                    <p>仅当<code class="codeph">OFFLINE_CHECK_INTERVAL</code>资源属性的值大于0时。
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d45801e2446 d45801e2418 ">
                                    <p><code class="codeph">OFFLINE_CHECK_INTERVAL</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d45801e2460" headers="d45801e2412 ">
                                    <p>未知</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d45801e2460 d45801e2415 ">
                                    <p>仅监视先前由于前面提到的任何一个条件而监视资源的情况。</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d45801e2460 d45801e2418 ">
                                    <p>如果状态在ONLINE后变为UNKNOWN，则使用<code class="codeph">CHECK_INTERVAL</code>的值。否则，没有监控。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>每当代理启动时，它监视的所有资源的状态都将设置为UNKNOWN。在收到Oracle Clusterware的初始探测请求后，代理框架会为所有资源执行CHECK入口点以确定其当前状态。</p>
                        <p>一旦资源的CHECK操作成功完成，资源的状态就会转换为前面提到的状态之一。然后，代理框架将根据Oracle Clusterware发出的命令启动资源。完成每个操作后，代理框架将调用CHECK操作以确定当前的资源状态。如果资源处于<a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-CD3442A5-D6A8-4370-ABDA-CB686A736D3C__CHDEJIEE" title="此表列出了代理框架在某些状态下监视资源的特征。">表9-2中</a>列出的某个受监视状态，则代理框架会定期执行CHECK入口点以检查资源状态的更改。
                        </p>
                        <p>默认情况下，代理框架不监视脱机资源。但是，如果<code class="codeph">OFFLINE_CHECK_INTERVAL</code>属性的值大于0，则代理框架将监视脱机资源。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-018BCDB1-862F-4F03-9D8A-E6F2522BE73D">ACTION_SCRIPT</a></li>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-B747D1B8-D747-4D95-B4A7-6D1DC230C02D">CHECK_INTERVAL</a></li>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-441C06D9-18E9-4CA6-9D23-17FD54602171">OFFLINE_CHECK_INTERVAL</a></li>
                        </ul>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-10286938-B9BA-4C98-80C7-1EE98F3463D7" name="GUID-10286938-B9BA-4C98-80C7-1EE98F3463D7"></a><h5 id="CWADD-GUID-10286938-B9BA-4C98-80C7-1EE98F3463D7" class="sect5">Oracle Clusterware内置代理</h5>
                     <div>
                        <div class="section">
                           <p>Oracle Clusterware使用代理程序（代理）来管理资源，并包含以下内置代理以保护应用程序：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="bold"><code class="codeph">appagent</code></span> ：此代理（Windows中的<code class="codeph">appagent.exe</code> ）自动保护<code class="codeph">generic_application</code>资源类型的资源以及<code class="codeph">application</code>资源类型的<code class="codeph">appagent.exe</code>版本的Oracle Clusterware中的任何资源。
                                 </p>
                                 <div class="infoboxnote" id="GUID-10286938-B9BA-4C98-80C7-1EE98F3463D7__GUID-2FC4E81B-3D2B-4F57-A686-DFD92E2463B3">
                                    <p class="notep1">注意：</p>
                                    <p>Oracle建议您不要使用已弃用的<code class="codeph">application</code>资源类型，该类型仅用于支持Oracle Clusterware <span class="italic">11g之前的</span>版本2（11.2）资源。
                                    </p>
                                 </div>
                              </li>
                              <li>
                                 <p><span class="bold"><code class="codeph">scriptagent</code></span> ：使用shell或批处理脚本保护应用程序时，使用此代理程序（Windows中的<code class="codeph">scriptagent.exe</code> ）。<code class="codeph">cluster_resource</code>和<code class="codeph">local_resource</code>资源类型都配置为使用此代理，并且这些类型的任何资源都会自动利用此代理。
                                 </p>
                              </li>
                           </ul>
                           <p>此外，您可以创建自己的代理，以任何方式管理资源。</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-30DC08E5-72CE-4E93-B6D6-E209DEADF83E">Oracle Clusterware资源类型</a></li>
                              <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-A55586D4-3754-43F9-836D-32E75A334D49">构建代理</a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="CWADD92142"></a><div class="props_rev_3"><a id="GUID-9055B23F-9D18-4CC4-8C64-7740D7E56DC8" name="GUID-9055B23F-9D18-4CC4-8C64-7740D7E56DC8"></a><h4 id="CWADD-GUID-9055B23F-9D18-4CC4-8C64-7740D7E56DC8" class="sect4">动作脚本</h4>
                  <div>
                     <p>操作脚本定义一个或多个操作以启动，停止，检查或清除资源。</p>
                     <div class="section">
                        <p>代理框架在没有C / C ++操作的情况下调用这些操作。使用操作脚本，您可以构建包含C / C ++入口点和脚本入口点的代理。如果在操作脚本中定义了所有操作，则可以使用脚本代理调用任何操作脚本中定义的操作。</p>
                        <p>在调用操作脚本中定义的操作之前，代理框架会将资源概要文件中的所有必需属性导出到环境中。操作脚本可以将消息记录到<code class="codeph">stdout/stderr</code> ，代理框架会在代理日志中打印这些消息。但是，操作脚本可以使用特殊标记将进度，警告或错误消息发送到<code class="codeph">crs*</code>客户端工具，方法是将以下标记之一添加到打印到<code class="codeph">stdout/stderr</code>的消息中：</p><pre class="pre codeblock"><code>CRS_WARNING：CRS_ERROR：CRS_PROGRESS：</code></pre><p>代理框架在将最终消息发送到<code class="codeph">crs*</code>客户端时删除了前缀标记。
                        </p>
                        <p>可以在操作脚本中访问资源属性，作为前缀为<code class="codeph">_CRS_</code>环境变量。例如， <code class="codeph">START_TIMEOUT</code>属性成为名为<code class="codeph">_CRS_START_TIMEOUT</code>的环境变量。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="oracle-clusterware-control-crsctl-utility-reference.html#GUID-086B5F1E-4608-4689-8110-ADC96F7C0926">crsctl启动资源</a></li>
                           <li><a href="oracle-clusterware-control-crsctl-utility-reference.html#GUID-2FC1718C-407B-453A-992D-0682D7E157C5">crsctl停止资源</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD92085"></a><div class="props_rev_3"><a id="GUID-A55586D4-3754-43F9-836D-32E75A334D49" name="GUID-A55586D4-3754-43F9-836D-32E75A334D49"></a><h4 id="CWADD-GUID-A55586D4-3754-43F9-836D-32E75A334D49" class="sect4">构建代理</h4>
                  <div>
                     <div class="section">
                        <p>为特定应用程序构建<a href="glossary.html#GUID-F63DF55D-362F-409C-ABE0-AA200C65F545"><span class="xrefglossterm">代理</span></a>程序涉及以下步骤：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>在脚本，C或C ++中实现<a href="glossary.html#GUID-9DE68E8A-675D-4C80-9160-023823834937"><span class="xrefglossterm">代理框架</span></a>入口点。</span></li>
                        <li><span>构建代理可执行文件（适用于C和C ++代理程序）。</span></li>
                        <li><span>收集入口点所需的所有参数并定义新的资源类型。将<code class="codeph">AGENT_FILENAME</code>属性设置为新构建的可执行文件的绝对路径。</span></li>
                     </ol>
                  </div><a id="CWADD92413"></a><div class="props_rev_3"><a id="GUID-7B26C65B-D8E6-4B75-9EED-1F3C0DD68946" name="GUID-7B26C65B-D8E6-4B75-9EED-1F3C0DD68946"></a><h5 id="CWADD-GUID-7B26C65B-D8E6-4B75-9EED-1F3C0DD68946" class="sect5">构建和部署C和C ++代理</h5>
                     <div>
                        <div class="section">
                           <p>示例C和C ++代理包含在Oracle Clusterware中，它演示了如何使用代理框架为应用程序实现高可用性代理。附录F描述了一个名为<code class="codeph">demoagent1.cpp</code>的代理<code class="codeph">demoagent1.cpp</code> 。此代理管理一个表示磁盘上文件的简单资源，并执行以下任务：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>开始时：创建文件</p>
                              </li>
                              <li>
                                 <p>停止时：正常删除文件</p>
                              </li>
                              <li>
                                 <p>检查：检测文件是否存在</p>
                              </li>
                              <li>
                                 <p>在清理时：强制删除文件</p>
                              </li>
                           </ul>
                           <p>要向Oracle Clusterware描述此特定资源，必须首先创建包含此资源类的所有特征属性的资源类型。在这种情况下，要描述的唯一属性是要管理的文件的名称。以下步骤演示了如何设置资源及其代理并测试资源的功能：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>使用提供的<code class="codeph">demoagent1.cpp</code>源文件和<span class="italic">makefile</span>编译C ++代理程序。根据本地编译器和链接器路径和安装位置修改makefile。输出是一个名为<code class="codeph">demoagent1</code>的可执行文件。此示例假定可执行文件位于群集的每个节点上名为<code class="codeph">/path/to/</code>的目录中。</span></li>
                           <li class="stepexpand"><span>使用CRSCTL添加新资源类型，如下所示：</span><div><pre class="pre codeblock"><code>$ crsctl add type hotfile_type -basetype cluster_resource -attr“ATTRIBUTE = PATH_NAME，TYPE = string，DEFAULT_VALUE = default.txt，ATTRIBUTE = AGENT_FILENAME，TYPE = string，DEFAULT_VALUE = / path / to / demoagent1”</code></pre><p>在上面的命令示例中， <code class="codeph">PATH_NAME</code>是此类型的每个资源的目录路径。将<code class="codeph">PATH_NAME</code>的值修改为<code class="codeph">PATH_NAME</code>上的相应目录位置。
                                 </p>
                                 <p><code class="codeph">AGENT_FILENAME</code>属性指定实现此资源类型的资源管理命令的代理二进制文件的位置。此步骤将新的资源类型添加到Oracle Clusterware。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>根据上一步中定义的类型创建新资源，如下所示：</span><div><pre class="pre codeblock"><code>$ crsctl add res file1 -type hotfile_type -attr“PATH_NAME = / var / log / file1.txt”$ crsctl add res file2 -type hotfile_type -attr“PATH_NAME = / var / log / file2.txt”</code></pre><p>上述命令添加了由Oracle Clusterware管理和监视的名为<code class="codeph">file1</code>和<code class="codeph">file2</code>资源。
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>使用CRSCTL启动和停止资源，如下所示：</span><div><pre class="pre codeblock"><code>$ crsctl start res file1 $ crsctl start res file2 $ crsctl relocate res file1 $ crsctl stop res file2</code></pre><p>在启动和停止资源时，Oracle Clusterware会创建和删除磁盘文件。</p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-1B0838C1-2211-4EF6-8108-0BFC06F51082" title="注册代理管理的资源类型。启动对特定资源的检查操作。创建迭代器以访问当前资源的所有属性。删除存储在代理框架中的cookie。使用资源重试反馈终止代理进程。从创建的迭代器返回下一个属性名称和值。获取当前资源的属性值。返回当前正在执行的检查命令的类型。返回调用入口点的命令的类型。检索存储在代理框架中的cookie的值。返回要在资源上执行的自定义操作的名称。检索正在执行入口点的资源的ID。检索当前命令的资源名称。返回当前命令的重试尝试次数。检索正在为其执行入口点的资源的类型名称。初始化代理框架。返回ABORT入口点的原因。将诊断消息打印到代理日志文件。修改当前资源的属性。重置属性迭代器。向Oracle Clusterware服务器和用户报告进度，警告和错误消息。在代理框架中存储cookie及其值。设置要对资源上的特定操作执行的C / C ++入口点函数。注册代理进程退出时要调用的函数。在当前资源上设置自定义标签。启动代理框架。">Oracle Clusterware Agent Framework C应用程序接口</a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="CWADD91281"></a><div class="props_rev_3"><a id="GUID-A907346B-96D2-485A-BD0C-51340222A612" name="GUID-A907346B-96D2-485A-BD0C-51340222A612"></a><h4 id="CWADD-GUID-A907346B-96D2-485A-BD0C-51340222A612" class="sect4">在Oracle Clusterware中注册资源</h4>
                  <div>
                     <p>使用<code class="codeph">crsctl add resource</code>命令在Oracle Clusterware 12 <span class="italic">c中</span>注册资源。
                     </p>
                     <div class="section">
                        <p>要将应用程序注册为资源：</p><pre class="pre codeblock"><code>$ crsctl add resource <span class="variable" translate="no">resource_name</span> -type [-group <span class="variable" translate="no">group_name</span> ] <span class="variable" translate="no">resource_type</span> [-file <span class="variable" translate="no">file_path</span> ] | [-attr“ <span class="variable" translate="no">attribute_name</span> =' <span class="variable" translate="no">attribute_value</span> '， <span class="variable" translate="no">attribute_name</span> =' <span class="variable" translate="no">attribute_value</span> '，...”]</code></pre><p>根据要为其创建的应用程序选择资源的名称。例如，如果为Apache Web服务器创建资源，则可以将资源命名为<code class="codeph">myApache</code> 。在<code class="codeph">-type</code>选项后指定现有资源类型的名称。（可选）您可以将资源添加到现有资源组。
                        </p>
                        <p>您可以在使用<code class="codeph">-file</code>选项指定的文本文件中指定资源属性，也可以在<code class="codeph">-attr</code>选项后面的双引号（ <code class="codeph">""</code> ）中用逗号分隔的资源属性值对列表中指定资源属性。必须用括号括起来的空格或逗号分隔的属性名称和值用单引号（ <code class="codeph">''</code> ）括起来。
                        </p>
                        <p>以下是属性文件的示例：</p><pre class="pre codeblock"><code>PLACEMENT = favored HOSTING_MEMBERS = node1 node2 node3 RESTART_ATTEMPTS @ CARDINALITYID（1）= 0 RESTART_ATTEMPTS @ CARDINALITYID（2）= 0 FAILURE_THRESHOLD @ CARDINALITYID（1）= 2 FAILURE_THRESHOLD @ CARDINALITYID（2）= 4 FAILURE_INTERVAL @ CARDINALITYID（1）= 300 FAILURE_INTERVAL @ CARDINALITYID（2）= 500 CHECK_INTERVAL = 2 CARDINALITY = 2</code></pre><p>以下是使用<code class="codeph">-attr</code>选项的示例：</p><pre class="pre codeblock"><code>$ crsctl add resource <span class="variable" translate="no">resource_name</span> -type <span class="variable" translate="no">resource_type</span> [-attr“PLACEMENT ='favored'，HOSTING_MEMBERS ='node1 node2 node3'，...”]</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-EC749831-C1A0-40DA-B74E-36D8C4B54193" title="您可以随时向Oracle Clusterware添加资源。">添加用户定义的资源</a></li>
                           <li><a href="oracle-clusterware-control-crsctl-utility-reference.html#GUID-7089B6C0-8701-42E6-B896-674E5E2A06F9" title="注册要由Oracle Clusterware管理的资源。">crsctl添加资源</a></li>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-B9C16838-0BCC-4F92-B7C5-8E554805556D" title="每个INSTANCE_COUNT个资源实例的整数不同。资源组属性，包含标记为资源组关键的资源列表。描述了SERVER_POOLS资源属性。属于资源组的资源列表。当资源添加到组时，Oracle Clusterware会填充和更新此属性。">资源属性</a></li>
                           <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614" title="资源组是逻辑上相关的资源组的容器。">资源组</a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="CWADD91283"></a><div class="props_rev_3"><a id="GUID-12757637-2D31-45C2-8253-B3DC95D90228" name="GUID-12757637-2D31-45C2-8253-B3DC95D90228"></a><h3 id="CWADD-GUID-12757637-2D31-45C2-8253-B3DC95D90228" class="sect3">使用Oracle Clusterware实现高可用性概述</h3>
               <div>
                  <p>Oracle Clusterware根据您配置资源和资源组的方式来管理资源和资源组，以提高其可用性。</p>
                  <p>您可以配置资源和资源组，以便Oracle Clusterware：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>在群集或服务器启动期间启动资源和资源组</p>
                     </li>
                     <li>
                        <p>发生故障时重新启动资源和资源组</p>
                     </li>
                     <li>
                        <p>如果服务器可用，则将资源和资源组重定位到其他服务器</p>
                     </li>
                  </ul>
                  <p>使用Oracle Clusterware管理应用程序：</p>
                  <ol>
                     <li>
                        <p>使用<code class="codeph">generic_application</code>资源类型，为脚本代理编写自定义脚本或开发新代理。
                        </p>
                     </li>
                     <li>
                        <p>使用Oracle Clusterware将您的应用程序注册为资源。</p>
                        <p>如果单个应用程序要求您注册多个资源，则可以创建Oracle Clusterware像单个资源一样管理的资源组。您可能需要在资源组中的资源之间定义相关的依赖关系。</p>
                     </li>
                     <li>
                        <p>为资源或资源组分配适当的权限。</p>
                     </li>
                     <li>
                        <p>启动或停止资源和资源组。</p>
                     </li>
                  </ol>
                  <p>资源出现故障时，Oracle Clusterware会尝试根据您将应用程序或进程注册为资源时提供的属性值重新启动资源。如果失败的资源是资源组的非关键资源成员，则资源组将保持ONLINE状态。如果群集中的服务器出现故障，则可以配置资源和资源组，以便分配在故障服务器上运行的进程在另一台服务器上重新启动。Oracle Clusterware基于各种资源属性，支持各种可配置方案。</p>
                  <p>在Oracle Clusterware中注册资源或创建资源组时，有关应用程序和资源相关信息的相关信息将存储在Oracle Cluster Registry（OCR）中。这些信息包括：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="bold">操作脚本或特定于应用程序的代理</span>的路径：这是<span class="bold">脚本或特定于应用程序的代理</span>的绝对路径，该代理定义Oracle Clusterware在应用程序上执行的启动，停止，检查和清除操作。
                        </p>
                        <div class="infoboxnotealso" id="GUID-12757637-2D31-45C2-8253-B3DC95D90228__GUID-7CB0F7B0-8C35-44C6-A674-51C2077EA696">
                           <p class="notep1">也可以看看：</p>
                           <p><span class="q">“ <a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-CD3442A5-D6A8-4370-ABDA-CB686A736D3C" title="Oracle Clusterware通过称为代理的实体运行所有特定于资源的命令。">Oracle Clusterware中的代理</a> ”</span>以获取有关这些操作的更多信息</p>
                        </div>
                     </li>
                  </ul>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="bold">权限</span> ：Oracle Clusterware具有控制应用程序的所有组件以实现高可用性操作的必要权限，包括启动其他用户身份所拥有的进程的权限。Oracle Clusterware必须作为特权用户运行，以使用正确的启动和停止进程控制应用程序。
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">资源依赖关系</span> ：您可以在资源和资源组之间创建关系，这意味着操作顺序或影响集群中服务器上资源的位置。例如，如果另一个资源正在运行，Oracle Clusterware只能启动对另一个资源具有硬启动依赖性的资源。如果资源依赖于其他资源正在运行，Oracle Clusterware会阻止资源停止。但是，您可以强制资源停止使用<code class="codeph">crsctl stop resource -f</code>命令，该命令首先停止依赖于正在停止的资源的所有资源。
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614" title="资源组是逻辑上相关的资源组的容器。">资源组</a></li>
                        <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-EA5130D2-037B-4144-BF1B-17C6470570B9">资源属性</a></li>
                        <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-C8652895-D23B-49F2-BF4B-57D3A2E660D9">资源国</a></li>
                        <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-D08A5C19-9EC5-4903-A263-82A52478D8EE">资源依赖性</a></li>
                        <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-E1B86B55-D969-4A4B-BE25-266DDA133BC3">资源安置</a></li>
                        <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-CD3442A5-D6A8-4370-ABDA-CB686A736D3C" title="Oracle Clusterware通过称为代理的实体运行所有特定于资源的命令。">Oracle Clusterware中的代理</a></li>
                     </ul>
                  </div>
               </div><a id="CWADD91284"></a><div class="props_rev_3"><a id="GUID-EA5130D2-037B-4144-BF1B-17C6470570B9" name="GUID-EA5130D2-037B-4144-BF1B-17C6470570B9"></a><h4 id="CWADD-GUID-EA5130D2-037B-4144-BF1B-17C6470570B9" class="sect4">资源属性</h4>
                  <div>
                     <p>资源属性定义Oracle Clusterware如何管理特定资源类型的资源。每种资源类型都有一组唯一的属性。注册资源时会指定一些资源属性，而其他资源属性则由Oracle Clusterware内部管理。</p>
                     <div class="infoboxnote" id="GUID-EA5130D2-037B-4144-BF1B-17C6470570B9__GUID-A080879F-8380-4312-88FA-8CBC7671176C">
                        <p class="notep1">注意：</p>
                        <p>在可以定义新资源属性的位置，只能使用US-7 ASCII字符。</p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-9C074F34-F180-4200-A99B-72186DAB56E1" title="每个INSTANCE_COUNT个资源实例的整数不同。资源组属性，包含标记为资源组关键的资源列表。描述了SERVER_POOLS资源属性。属于资源组的资源列表。当资源添加到组时，Oracle Clusterware会填充和更新此属性。">Oracle Clusterware资源参考</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD91287"></a><a id="CWADD91286"></a><div class="props_rev_3"><a id="GUID-C8652895-D23B-49F2-BF4B-57D3A2E660D9" name="GUID-C8652895-D23B-49F2-BF4B-57D3A2E660D9"></a><h4 id="CWADD-GUID-C8652895-D23B-49F2-BF4B-57D3A2E660D9" class="sect4">资源国</h4>
                  <div>
                     <div class="section">
                        <p>群集中的每个资源都可以随时处于特定状态。某些操作或事件可能导致该状态发生变化。</p>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-C8652895-D23B-49F2-BF4B-57D3A2E660D9__BGBFCGAD" title="此表列出并描述了可能的资源状态。">表9-3</a>列出并描述了可能的<a href="glossary.html#GUID-C020B346-8919-49C2-B70C-AC239F68E6F5"><span class="xrefglossterm">资源状态</span></a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-C8652895-D23B-49F2-BF4B-57D3A2E660D9__BGBFCGAD">
                        <p class="titleintable">表9-3可能的资源状态</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="可能的资源状况" width="100%" border="1" summary="This table lists and describes possible resource states." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d45801e3939">州</th>
                                 <th align="left" valign="bottom" width="69%" id="d45801e3942">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d45801e3947" headers="d45801e3939 ">
                                    <p>线上</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d45801e3947 d45801e3942 ">
                                    <p>资源正在运行。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d45801e3954" headers="d45801e3939 ">
                                    <p>离线</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d45801e3954 d45801e3942 ">
                                    <p>资源未运行。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d45801e3961" headers="d45801e3939 ">
                                    <p>未知</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d45801e3961 d45801e3942 ">
                                    <p>尝试停止资源失败。Oracle Clusterware不会主动监视处于此状态的资源。您必须执行特定于应用程序的操作以确保资源处于脱机状态（例如停止进程），然后运行<code class="codeph">crsctl stop resource</code>命令以将资源状态重置为OFFLINE。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d45801e3971" headers="d45801e3939 ">
                                    <p>中间</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d45801e3971 d45801e3942 ">
                                    <p>由于以下两个事件之一，资源可能处于INTERMEDIATE状态：</p>
                                    <ol>
                                       <li>
                                          <p>Oracle Clusterware无法确定资源的状态，但资源是在上次准确了解其状态时尝试联机或联机。通常，资源会随着时间的推移而自行转换为此状态，因为阻碍检查操作的条件不再适用。</p>
                                       </li>
                                       <li>
                                          <p>资源部分在线。例如，Oracle数据库VIP资源在其主服务器离开集群时故障转移到另一台服务器。但是，当应用程序位于非主服务器上时，应用程序无法使用此VIP访问数据库。同样，当Oracle数据库实例启动但未打开时，资源部分联机：它正在运行但无法提供服务。</p>
                                       </li>
                                    </ol>
                                    <p>Oracle Clusterware主动监视处于INTERMEDIATE状态的资源，通常不需要您进行干预。如果资源由于前面的原因1而处于INTERMEDIATE状态，那么一旦资源状态建立，Oracle Clusterware就会将资源转换出INTERMEDIATE状态。</p>
                                    <p>如果资源由于前面的原因2而处于INTERMEDIATE状态，那么如果它仍然部分在线，则它保持在该状态。例如，VIP的主服务器必须重新加入群集，以便VIP可以切换到它。数据库管理员必须发出命令以打开数据库实例。</p>
                                    <p>但是，在任何一种情况下，Oracle Clusterware会在适当时自动将资源转移出INTERMEDIATE状态。使用<code class="codeph">STATE_DETAILS</code>资源属性来解释资源处于INTERMEDIATE状态的原因，并提供将资源转换为此状态的解决方案。
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="CWADD91288"></a><div class="props_rev_3"><a id="GUID-D08A5C19-9EC5-4903-A263-82A52478D8EE" name="GUID-D08A5C19-9EC5-4903-A263-82A52478D8EE"></a><h4 id="CWADD-GUID-D08A5C19-9EC5-4903-A263-82A52478D8EE" class="sect4">资源依赖性</h4>
                  <div>
                     <p><a id="d45801e4110" class="indexterm-anchor"></a>您可以将资源配置为依赖于其他资源，以便依赖资源只能在满足它们所依赖的资源的某些条件时启动或停止。例如，当Oracle Clusterware尝试启动资源时，初始资源所依赖的任何资源都必须在同一位置运行。如果Oracle Clusterware无法使资源联机，则初始（从属）资源也无法联机。如果Oracle Clusterware停止资源或资源失败，则还会停止任何相关资源。
                     </p>
                     <p>有些资源比其他资源需要更多时间。某些资源必须在服务器启动时启动，而其他资源则需要手动启动操作。资源特定行为的这些和许多其他示例意味着必须根据预期行为的方式以及它与其他资源（资源依赖性）的关系来描述每个资源。</p>
                     <p>您可以配置资源，以便它们依赖于Oracle资源。但是，在创建资源时，请勿在资源名称中使用<span class="italic">ora</span>前缀。此前缀仅供Oracle使用。
                     </p>
                     <p>以前版本的Oracle Clusterware仅包含两个依赖项规范： <code class="codeph">REQUIRED_RESOURCES</code>资源属性和<code class="codeph">OPTIONAL_RESOURCES</code>资源属性。<code class="codeph">REQUIRED_RESOURCES</code>资源属性应用于启动和停止资源依赖性。
                     </p>
                     <div class="infoboxnote" id="GUID-D08A5C19-9EC5-4903-A263-82A52478D8EE__GUID-A09D06D0-003F-4CB1-B0A1-201CB14680B2">
                        <p class="notep1">注意：</p>
                        <p><code class="codeph">REQUIRED_RESOURCES</code>和<code class="codeph">OPTIONAL_RESOURCES</code>资源属性仍然仅适用于<code class="codeph">application</code>类型的资源。不推荐使用它们来定义Oracle Clusterware 12 <span class="italic">c中的</span>资源依赖关系。
                        </p>
                     </div>
                     <p>资源依赖关系分为开始和停止类别。这种分离改进并扩展了资源和资源类型之间的启动和停止依赖关系。</p>
                     <p>本节包括以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-64441104-69E2-4DE3-8C70-D31BDDCEB0E7">启动依赖关系</a></p>
                        </li>
                        <li>
                           <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-6D5ABA04-FD5D-421F-BD0C-2546205DC516">停止依赖</a></p>
                        </li>
                     </ul>
                  </div><a id="CWADD91289"></a><div class="props_rev_3"><a id="GUID-64441104-69E2-4DE3-8C70-D31BDDCEB0E7" name="GUID-64441104-69E2-4DE3-8C70-D31BDDCEB0E7"></a><h5 id="CWADD-GUID-64441104-69E2-4DE3-8C70-D31BDDCEB0E7" class="sect5">启动依赖关系</h5>
                     <div>
                        <p>当对该资源的<a href="glossary.html#GUID-1B35C701-5E76-4404-9E66-C4E7CCFCCC54"><span class="xrefglossterm">启动工作评估开始</span></a>时，Oracle Clusterware会考虑资源概要文件中包含的启动依赖项。您可以使用<code class="codeph">START_DEPENDENCIES</code>资源属性为资源指定启动依赖项。您可以在每个依赖项上使用修饰符来进一步配置依赖项。
                        </p>
                        <p>本节包括以下START依赖项的说明：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-889D5618-879C-4F31-9429-C22A326A6BCC">引力</a></p>
                           </li>
                           <li>
                              <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-E1C9BDCA-CAF1-486D-85ED-0A76AE7B914C">分散</a></p>
                           </li>
                           <li>
                              <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-21D43F7D-4581-4939-957F-DAB646C98E15">排除</a></p>
                           </li>
                           <li>
                              <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-2372E70B-C804-4A57-BF13-852F2F7DAC00">硬</a></p>
                           </li>
                           <li>
                              <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-941E8778-DC39-401F-BAD5-19C424245EEE">拉起</a></p>
                           </li>
                           <li>
                              <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-309A41A1-B0C9-49CA-91BF-509CDB957218">弱</a></p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="oracle-clusterware-resource-reference.html#GUID-D206CD4B-86B7-423B-A6B3-29F41FCFFF9B">START_DEPENDENCIES</a></li>
                           </ul>
                        </div>
                     </div>
                     <div class="props_rev_3"><a id="GUID-889D5618-879C-4F31-9429-C22A326A6BCC" name="GUID-889D5618-879C-4F31-9429-C22A326A6BCC"></a><h6 id="CWADD-GUID-889D5618-879C-4F31-9429-C22A326A6BCC" class="sect6">引力</h6>
                        <div>
                           <div class="section">
                              <p>如果资源A有<a id="d45801e4450" class="indexterm-anchor"></a><a id="d45801e4456" class="indexterm-anchor"></a> <code class="codeph">attraction</code>依赖于资源B，然后Oracle Clusterware倾向于将资源A放置在托管资源B的服务器上。在这种情况下，依赖资源（例如资源A）更有可能在运行<code class="codeph">attraction</code>依赖关系的资源的服务器上运行。Oracle Clusterware将依赖资源放置在具有吸引资源的服务器上。
                              </p>
                              <p>您可以使用以下约束配置<code class="codeph">attraction</code>开始依赖关系：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES =吸引力（中间体：resourceB）</code></p>
                                    <p>使用<code class="codeph">intermediate</code>修饰符指定资源是否被吸引到处于<code class="codeph">INTERMEDIATE</code>状态的资源。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES =吸引力（类型：resourceB.type）</code></p>
                                    <p>使用<code class="codeph">type</code>修饰符指定依赖项是否作用于特定资源类型。依赖资源被吸引到托管特定类型的最大数量资源的服务器。
                                    </p>
                                 </li>
                              </ul>
                              <div class="infoboxnote" id="GUID-889D5618-879C-4F31-9429-C22A326A6BCC__GUID-D12B27FF-B942-448C-821A-850B28E0B079">
                                 <p class="notep1">注意：</p>
                                 <p>以前版本的Oracle Clusterware使用现已弃用的<code class="codeph">OPTIONAL_RESOURCES</code>属性来表示吸引依赖性。
                                 </p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                     <div class="props_rev_3"><a id="GUID-E1C9BDCA-CAF1-486D-85ED-0A76AE7B914C" name="GUID-E1C9BDCA-CAF1-486D-85ED-0A76AE7B914C"></a><h6 id="CWADD-GUID-E1C9BDCA-CAF1-486D-85ED-0A76AE7B914C" class="sect6">分散</h6>
                        <div>
                           <div class="section">
                              <p>如果你指定<a id="d45801e4616" class="indexterm-anchor"></a><a id="d45801e4622" class="indexterm-anchor"></a>对于资源的<code class="codeph">dispersion</code>开始依赖性，Oracle Clusterware在具有此资源分散的资源数量最少的服务器上启动此资源。如果没有足够的服务器来分散它们，分散的资源可能仍会在同一服务器上运行。
                              </p>
                              <p>您可以使用以下修饰符配置<code class="codeph">dispersion</code>开始依赖关系：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES =分散体（中间体：resourceB）</code></p>
                                    <p>使用<code class="codeph">intermediate</code>修饰符指定Oracle Clusterware分散资源A资源B是处于<code class="codeph">ONLINE</code>还是<code class="codeph">INTERMEDIATE</code>状态。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES =分散体：活性（resourceB）</code></p>
                                    <p>通常，仅在启动资源时应用分散。如果在启动时，相互分散的资源在同一台服务器上启动（因为资源启动时没有足够的服务器），那么Oracle Clusterware一旦运行就会保留资源，即使有更多服务器加入簇。如果指定了<code class="codeph">active</code>修饰符，则Oracle Clusterware会在新服务器加入群集后重新应用资源分散。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES =分散体（池：resourceB）</code></p>
                                    <p>使用<code class="codeph">pool</code>修饰符指定Oracle Clusterware将资源分散到不同的服务器池而不是其他服务器。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                     <div class="props_rev_3"><a id="GUID-21D43F7D-4581-4939-957F-DAB646C98E15" name="GUID-21D43F7D-4581-4939-957F-DAB646C98E15"></a><h6 id="CWADD-GUID-21D43F7D-4581-4939-957F-DAB646C98E15" class="sect6">排除</h6>
                        <div>
                           <div class="section">
                              <p>该<a id="d45801e4784" class="indexterm-anchor"></a><a id="d45801e4790" class="indexterm-anchor"></a> <code class="codeph">exclusion</code> start dependency包含一个子句，用于定义启动时资源之间的独占关系。具有<code class="codeph">exclusion</code>启动依赖性的资源无法在同一节点上运行。例如，如果资源A对资源B具有<code class="codeph">exclusion</code>启动依赖性，则当资源B已在资源A需要启动的服务器上运行时，CRSD策略提供以下选项：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>如果资源B已在运行，则拒绝资源A的开始。</p>
                                 </li>
                                 <li>
                                    <p>通过抢占资源B来启动资源A.抢占操作有两种变体：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>资源B已停止，如果可能，将在另一个节点上重新启动。随后启动资源A.</p>
                                       </li>
                                       <li>
                                          <p>资源A首先启动。随后，资源B停止，如果可能，在另一个节点上重新启动。</p>
                                       </li>
                                    </ul>
                                 </li>
                              </ul>
                              <p>您可以使用以下修饰符配置<code class="codeph">exclusion</code>开始依赖项：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES=exclusion([[preempt_pre: | preempt_post:]]</code> <span class="italic"><code class="codeph">target_resource_name</code></span> <code class="codeph">| type:</code> <span class="italic"><code class="codeph">target_resource_type</code></span> <code class="codeph">]*)</code></p>
                                    <p>指定的所有修饰符均为每个资源或资源类型。Oracle Clusterware每个资源依赖关系树只允许一个<code class="codeph">exclusion</code>依赖项。如果没有任何<code class="codeph">preempt</code>修饰符，CRSD将仅在其所有目标资源都处于脱机状态时尝试启动资源。
                                    </p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><code class="codeph">preempt_pre</code> ：如果选择此preempt修饰符，则CRSD会在启动源资源之前停止由特定资源类型定义的指定目标资源。如果可以重新启动已停止的资源，则CRSD可以在启动抢占资源的同时执行此操作。
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">preempt_post</code> ：如果选择此preempt修饰符，则在启动源资源后，CRSD将停止<code class="codeph">preempt_post</code>定位（如果可能）指定的特定资源类型定义的目标资源。
                                          </p>
                                       </li>
                                    </ul>
                                    <p>如果CRSD无法成功停止目标资源，或者无法启动源资源，则整个操作将失败。如果可能，Oracle Clusterware会尝试将受影响的资源返回到其原始状态。</p>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                     <div class="props_rev_3"><a id="GUID-2372E70B-C804-4A57-BF13-852F2F7DAC00" name="GUID-2372E70B-C804-4A57-BF13-852F2F7DAC00"></a><h6 id="CWADD-GUID-2372E70B-C804-4A57-BF13-852F2F7DAC00" class="sect6">硬</h6>
                        <div>
                           <div class="section">
                              <p>定义一个<a id="d45801e4975" class="indexterm-anchor"></a><a id="d45801e4981" class="indexterm-anchor"></a>如果在依赖资源可以启动之前必须运行另一个资源，则资源的<code class="codeph">hard</code>启动依赖项。例如，如果资源A对资源B具有<code class="codeph">hard</code>启动依赖性，则资源B必须在资源A可以启动之前运行。类似地，如果资源（A和B）最初都是离线的，则首先启动资源B以满足资源A的依赖性。
                              </p>
                              <div class="infoboxnote" id="GUID-2372E70B-C804-4A57-BF13-852F2F7DAC00__GUID-2B11E504-9A5A-42B1-8ED5-F5CF25B05535">
                                 <p class="notep1">注意：</p>
                                 <p>Oracle建议具有<code class="codeph">hard</code>启动依赖性的资源也具有<code class="codeph">pullup</code>启动依赖性。
                                 </p>
                              </div>
                              <p>您可以使用以下约束配置<code class="codeph">hard</code>启动依赖项：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES =硬（全球：resourceB）</code></p>
                                    <p>默认情况下，资源A和B必须位于同一服务器上（并置）。使用<code class="codeph">global</code>修饰符指定不需要并置资源。例如，如果资源A对资源B具有<code class="codeph">hard(global:resourceB)</code> B <code class="codeph">hard(global:resourceB)</code>启动依赖性，则如果资源B在集群中的任何节点上运行，则资源A可以启动。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES =硬（中间体：resourceB）</code></p>
                                    <p>如果依赖资源所依赖的资源处于<code class="codeph">ONLINE</code>或<code class="codeph">INTERMEDIATE</code>状态，则使用<code class="codeph">intermediate</code>修饰符指定依赖资源可以启动。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES =硬（类型：resourceB.type）</code></p>
                                    <p>使用<code class="codeph">type</code>修饰符指定<code class="codeph">hard</code>启动依赖项是作用于特定资源还是资源类型。例如，如果您指定该资源的具有<code class="codeph">hard</code>上开始依赖<code class="codeph">resourceB.type</code>类型，那么如果任何资源<code class="codeph">resourceB.type</code>型运行，资源A可以开始。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES =硬（统一：resourceB）</code></p>
                                    <p>使用<code class="codeph">uniform</code>修饰符尝试启动资源B的所有实例，但只有一个实例，至少必须开始满足依赖关系。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES = hard（resourceB，intermediate：resourceC，intermediate：global：type：resourceC.type）</code></p>
                                    <p>您可以组合修饰符并在<code class="codeph">START_DEPENDENCIES</code>资源属性中指定多个资源。
                                    </p>
                                    <div class="infoboxnote" id="GUID-2372E70B-C804-4A57-BF13-852F2F7DAC00__GUID-1A7F3227-2062-4289-926E-95101710B788">
                                       <p class="notep1">注意：</p>
                                       <p>用逗号分隔修饰符子句。<code class="codeph">type</code>修饰符子句必须始终是列表中的最后一个修饰符子句，并且<code class="codeph">type</code>修饰符必须始终直接在该类型之前。
                                       </p>
                                    </div>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                     <div class="props_rev_3"><a id="GUID-941E8778-DC39-401F-BAD5-19C424245EEE" name="GUID-941E8778-DC39-401F-BAD5-19C424245EEE"></a><h6 id="CWADD-GUID-941E8778-DC39-401F-BAD5-19C424245EEE" class="sect6">拉起</h6>
                        <div>
                           <div class="section">
                              <p>使用<a id="d45801e5198" class="indexterm-anchor"></a><a id="d45801e5204" class="indexterm-anchor"></a>如果资源A必须在资源B启动时自动启动，则<code class="codeph">pullup</code>启动依赖关系。如果资源A未运行，则此依赖项仅影响资源A.与其他依赖项的情况一样， <code class="codeph">pullup</code>可能会导致依赖资源在任何服务器上启动。只要存在硬停止依赖关系，就使用<code class="codeph">pullup</code>依赖关系，这样，如果资源A依赖于资源B并且资源B失败然后恢复，则重新启动资源A.
                              </p>
                              <div class="infoboxnote" id="GUID-941E8778-DC39-401F-BAD5-19C424245EEE__GUID-1B3FEA2E-6622-410E-9B4E-50B5F3CEF3D4">
                                 <p class="notep1">注意：</p>
                                 <p>Oracle建议具有<code class="codeph">hard</code>启动依赖性的资源也具有<code class="codeph">pullup</code>启动依赖性。
                                 </p>
                              </div>
                              <p>您可以使用以下约束配置<code class="codeph">pullup</code> start依赖项：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES =上拉（中间体：resourceB）</code></p>
                                    <p>使用<code class="codeph">intermediate</code>修饰符指定资源B是处于<code class="codeph">ONLINE</code>还是<code class="codeph">INTERMEDIATE</code>状态以启动资源A.</p>
                                    <p>如果资源A对多个资源具有<code class="codeph">pullup</code>依赖性，则资源A仅在其所依赖的所有资源启动时才启动。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES =上拉：总是（resourceB）</code></p>
                                    <p>使用<code class="codeph">always</code>修饰符指定Oracle Clusterware是否启动资源A，尽管其<code class="codeph">TARGET</code>属性的值，无论是<code class="codeph">ONLINE</code>还是<code class="codeph">OFFLINE</code> 。默认情况下，不使用<code class="codeph">always</code>修饰符， <code class="codeph">pullup</code>仅在依赖资源的<code class="codeph">TARGET</code>属性值为<code class="codeph">ONLINE</code>时才启动资源。</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES =上拉（类型：resourceB.type）</code></p>
                                    <p>使用<code class="codeph">type</code>修饰符指定依赖项作用于特定资源类型。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                     <div class="props_rev_3"><a id="GUID-309A41A1-B0C9-49CA-91BF-509CDB957218" name="GUID-309A41A1-B0C9-49CA-91BF-509CDB957218"></a><h6 id="CWADD-GUID-309A41A1-B0C9-49CA-91BF-509CDB957218" class="sect6">弱</h6>
                        <div>
                           <div class="section">
                              <p>如果资源A有<a id="d45801e5408" class="indexterm-anchor"></a><a id="d45801e5414" class="indexterm-anchor"></a> <code class="codeph">weak</code>在资源B开始依赖，然后尝试启动资源A试图启动资源B，如果资源B没有运行。但是，尝试启动资源B的结果对启动资源A的结果没有影响。</p>
                              <p>您可以使用以下约束配置<code class="codeph">weak</code>启动依赖项：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES =弱（全球：resourceB）</code></p>
                                    <p>默认情况下，资源A和B必须并置。使用<code class="codeph">global</code>修饰符指定不需要并置资源。例如，如果资源A对资源B具有<code class="codeph">weak(global:resourceB)</code>启动依赖性，则如果资源B在集群中的任何节点上运行，则资源A可以启动。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES =弱（并发：resourceB）</code></p>
                                    <p>使用<code class="codeph">concurrent</code>修饰符指定资源A和资源B可以并发启动。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES =弱（类型：resourceB.type）</code></p>
                                    <p>使用<code class="codeph">type</code>修饰符指定依赖项作用于特定资源类型的资源，例如<code class="codeph">resourceB.type</code> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES =弱（统一：resourceB）</code></p>
                                    <p>使用<code class="codeph">uniform</code>修饰符尝试启动资源B的所有实例。</p>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div><a id="CWADD91295"></a><div class="props_rev_3"><a id="GUID-6D5ABA04-FD5D-421F-BD0C-2546205DC516" name="GUID-6D5ABA04-FD5D-421F-BD0C-2546205DC516"></a><h5 id="CWADD-GUID-6D5ABA04-FD5D-421F-BD0C-2546205DC516" class="sect5">停止依赖</h5>
                     <div>
                        <p>每当资源停止时，Oracle Clusterware都会考虑资源之间的停止依赖关系（资源状态从<code class="codeph">ONLINE</code>更改为任何其他状态）。
                        </p>
                     </div>
                     <div class="props_rev_3"><a id="GUID-BFF2978A-8964-4202-84A6-F5D632D2F941" name="GUID-BFF2978A-8964-4202-84A6-F5D632D2F941"></a><h6 id="CWADD-GUID-BFF2978A-8964-4202-84A6-F5D632D2F941" class="sect6">硬</h6>
                        <div>
                           <div class="section">
                              <p>如果资源A对资源B具有<code class="codeph">hard</code>停止依赖性，则当B停止运行时必须停止资源A.这两个资源可能会尝试启动或重定位到另一台服务器，具体取决于它们的配置方式。Oracle建议具有<code class="codeph">hard</code>停止依赖性的资源也具有<code class="codeph">hard</code>启动依赖性。
                              </p>
                              <p>您可以使用以下修饰符配置<code class="codeph">hard</code>停止依赖项：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">STOP_DEPENDENCIES =硬（intermedite：resourceB）</code></p>
                                    <p>使用<code class="codeph">intermediate</code>修饰符指定资源B是否必须处于<code class="codeph">ONLINE</code>或<code class="codeph">INTERMEDIATE</code>状态才能使资源A保持联机状态。
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">STOP_DEPENDENCIES =硬（全球：resourceB）</code></p>
                                    <p>使用<code class="codeph">global</code>修饰符指定资源A是否要求资源B出现在同一服务器上或群集中的任何服务器上以保持联机状态。如果未指定此约束，则资源A和B必须在同一服务器上运行。当不再满足该条件时，Oracle Clusterware会停止资源A.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">STOP_DEPENDENCIES =硬（关机：resourceB）</code></p>
                                    <p>仅当使用<code class="codeph">crsctl stop crs</code>或<code class="codeph">crsctl stop cluster</code>命令关闭Oracle Clusterware堆栈时，才使用<code class="codeph">shutdown</code>修饰符来停止资源。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="relinfo">
                              <p><strong>相关话题</strong></p>
                              <ul>
                                 <li><a href="oracle-clusterware-resource-reference.html#GUID-B9A3A99B-8FC0-44C6-8570-64EF1F58E928">STOP_DEPENDENCIES</a></li>
                              </ul>
                           </div>
                        </div>
                     </div>
                     <div class="props_rev_3"><a id="GUID-751CD1E7-FEE1-4AC4-ADC3-BEE7C47B796F" name="GUID-751CD1E7-FEE1-4AC4-ADC3-BEE7C47B796F"></a><h6 id="CWADD-GUID-751CD1E7-FEE1-4AC4-ADC3-BEE7C47B796F" class="sect6">资源依赖对资源状况恢复的影响</h6>
                        <div>
                           <p>当资源从运行状态变为非运行状态时，运行它的意图保持不变，此转换称为<span class="italic">资源故障</span> 。此时，Oracle Clusterware应用资源状态恢复过程，该过程可能尝试在本地重新启动资源，将其重定位到另一台服务器，或者只是停止依赖资源，具体取决于资源的高可用性策略和当时的实体状态。
                           </p>
                           <p>当两个或多个资源相互依赖时，其中一个资源的故障可能最终导致另一个资源失败。在大多数情况下，很难控制甚至预测检测到这些故障的顺序。例如，即使资源A依赖于资源B，Oracle Clusterware也可能在资源A失败后检测到资源B的故障。</p>
                           <p>缺乏故障顺序可预测性可导致Oracle Clusterware尝试并行重新启动相关资源，最终导致无法重新启动某些资源，因为它们所依赖的资源正在无序重新启动。</p>
                           <p>在这种情况下，如果使用<code class="codeph">hard</code>停止和<code class="codeph">pullup</code>依赖关系中的任何一个或两者，Oracle Clusterware将重新尝试在本地重新启动相关资源。例如，如果资源A在资源B <code class="codeph">pullup</code>具有<code class="codeph">hard</code>停止依赖关系或<code class="codeph">pullup</code>依赖关系，或两者都有，并且资源A因资源B失败而失败，则Oracle Clusterware可能最终会尝试同时重新启动这两个资源。如果尝试重新启动资源A失败，则只要资源B成功重新启动，Oracle Clusterware就会重新尝试重新启动资源A.</p>
                        </div>
                     </div>
                  </div>
               </div><a id="CWADD92087"></a><div class="props_rev_3"><a id="GUID-E1B86B55-D969-4A4B-BE25-266DDA133BC3" name="GUID-E1B86B55-D969-4A4B-BE25-266DDA133BC3"></a><h4 id="CWADD-GUID-E1B86B55-D969-4A4B-BE25-266DDA133BC3" class="sect4">资源安置</h4>
                  <div>
                     <p>作为启动工作评估的一部分，Oracle Clusterware必须做出的第一个决定是从何处开始（或放置）资源。当调用者按名称指定目标服务器时，做出这样的决定很容易。但是，如果未指定目标服务器，则Oracle Clusterware会根据资源的配置和群集的当前状态尝试找到最佳的放置服务器。</p>
                     <p>Oracle Clusterware首先考虑资源的放置策略，并过滤掉不符合该策略的服务器。Oracle Clusterware根据资源的<code class="codeph">PLACEMENT</code>资源属性的值按特定顺序对剩余服务器进行排序。
                     </p>
                     <p>考虑的结果是Oracle Clusterware可以在其上启动资源的最多两个候选服务器列表。一个列表包含首选服务器，另一个包含可能的服务器。如果资源的<code class="codeph">PLACEMENT</code>资源属性的值设置为<code class="codeph">balanced</code>或<code class="codeph">restricted</code> ，则首选服务器列表将为空。资源的放置策略确定资源要在哪个服务器上运行。如果首选列表中有服务器，Oracle Clusterware会将首选服务器视为可能的服务器。
                     </p>
                     <p>然后，Oracle Clusterware会考虑资源的依赖关系，以确定资源的放置位置（如果存在）。<a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-889D5618-879C-4F31-9429-C22A326A6BCC">吸引</a>和<a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-E1C9BDCA-CAF1-486D-85ED-0A76AE7B914C">分散</a>开始依赖性影响资源放置决策，一些依赖性修饰符也是如此。Oracle Clusterware应用这些放置提示以进一步对前面提到的两个列表中的服务器进行排序。请注意，Oracle Clusterware独立处理每个服务器列表，因此资源的放置策略的效果不会被依赖项的影响混淆。
                     </p>
                     <p>最后，如果列出了任何服务器，Oracle Clusterware将从首选服务器列表中选择第一个服务器。如果首选服务器列表中没有服务器，则Oracle Clusterware会从可能的服务器列表中选择第一个服务器（如果列出了任何服务器）。如果任一列表中都没有服务器，Oracle Clusterware会生成资源放置错误。</p>
                     <div class="infoboxnote" id="GUID-E1B86B55-D969-4A4B-BE25-266DDA133BC3__GUID-BC7FFDAE-C12C-440D-BC46-CD1A002009CB">
                        <p class="notep1">注意：</p>
                        <p>放置策略以及与Oracle Clusterware资源相关的资源的依赖性都不会影响放置决策。</p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-C0FEFBDC-CA87-436A-ACA4-A5BAC4D18963" title="可以在任何服务器上启动资源，具体取决于放置策略，资源启动依赖关系以及该服务器上操作脚本的可用性。">申请安置政策</a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="CWADD91297"></a><div class="props_rev_3"><a id="GUID-031885D1-164F-4A71-9E9C-C7237DAE914B" name="GUID-031885D1-164F-4A71-9E9C-C7237DAE914B"></a><h3 id="CWADD-GUID-031885D1-164F-4A71-9E9C-C7237DAE914B" class="sect3">将应用程序注册为资源</h3>
               <div>
                  <p>本节介绍在Oracle Clusterware中将应用程序注册为资源的过程示例。</p>
                  <p>这些过程指导您如何将Apache Web服务器（作为示例）作为资源添加到Oracle Clusterware。本节中的示例假定Oracle Clusterware管理员对Oracle Clusterware以及拥有Oracle Clusterware将要管理的应用程序的用户或组具有完全管理权限。注册过程完成后，Oracle Clusterware可以代表任何操作系统用户启动任何应用程序。</p>
                  <p>Oracle Clusterware区分已注册资源的所有者和用户。资源的所有者是代理运行所在的操作系统用户。资源的<code class="codeph">ACL</code>资源属性定义用户和所有者的权限。只有<code class="codeph">root</code>才能修改任何资源。
                  </p>
                  <div class="infoboxnote" id="GUID-031885D1-164F-4A71-9E9C-C7237DAE914B__GUID-16C5F6F3-85C0-4AE5-AAB8-029868212B8E">
                     <p class="notep1">注意：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>此版本不支持以<code class="codeph">crs_</code>为前缀的Oracle Clusterware命令，因此无法再使用。CRSCTL命令替换这些命令。有关CRSCTL命令及其相应<code class="codeph">crs_</code>命令的列表，请参阅<span class="q">“Oracle Clusterware Control（CRSCTL）实用程序参考”</span> 。
                           </p>
                        </li>
                        <li>
                           <p>不要在任何名称前缀为<code class="codeph">ora</code>资源上使用CRSCTL命令（因为这些是Oracle资源），除非My Oracle Support指示您这样做。
                           </p>
                           <p>要配置Oracle资源，请使用服务器控制实用程序SRVCTL，它为您提供所有可配置选项。</p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="oracle-clusterware-control-crsctl-utility-reference.html#GUID-1A6774CF-FD5F-463E-817F-34E4466443C7" title="CRSCTL是您与Oracle Clusterware之间的接口，用于解析和调用Oracle Clusterware API的Oracle Clusterware API。有关使用CRSCTL命令行界面的信息。在Oracle RAC或Oracle Restart环境中使用这些命令。检查群集同步服务的状态。检查事件管理器的状态。检索本地服务器的主机名。注册要由Oracle Clusterware管理的资源。从Oracle Clusterware配置中删除资源。预测在不更改系统的情况下添加资源的效果。预测资源失败的后果。模拟重新定位资源而不更改系统。预测在不更改系统的情况下修改资源的效果。预测在不更改系统的情况下启动资源的影响。预测在不更改系统的情况下停止资源的效果。显示指定资源的用户和组权限。修改Oracle Clusterware中特定资源的属性。将资源重定位到群集中的另一台服务器。重新启动集群中的空闲资源，而不必运行两个命令来停止和启动资源。设置特定资源的权限。在群集中的特定服务器上启动空闲资源。获取任意数量的特定资源的状态和配置信息。停止运行资源。根据资源组类型创建资源组。对指定组的所有成员资源启动检查操作。从Oracle Clusterware中删除一个或多个资源组。预测添加资源组而不更改系统的影响。预测资源失败的后果。预测在不更改系统的情况下重新定位资源组的效果。预测启动资源组而不更改系统的影响。预测在不更改系统的情况下停止资源组的效果。将资源组及其成员资源的完整信息和属性导出到脚本文件。修改资源组以添加属性或更新现有属性的值。将联机资源组从源服务器重定位到目标服务器。在它们当前所在的服务器上重新启动资源组。在特定或预配置的服务器或服务器池上启动一个或多个资源组。显示资源组的状态。在可选指定的预配置服务器或服务器池上停止一个或多个资源组。在Oracle Clusterware中注册新的资源组类型。从Oracle Clusterware中删除一个或多个资源组类型。修改资源组类型以添加属性或更新现有属性的值。返回特定模块的跟踪设置。设置特定模块的跟踪参数。在Oracle Clusterware中创建资源类型。从Oracle Clusterware配置中删除资源类型。获得特定资源类型的权限。修改现有资源类型。设置特定资源类型的资源的权限。获取一个或多个特定资源类型的配置信息。创建并添加用户到钱包。从钱包中删除钱包或用户。修改特定钱包中特定用户的密码。从钱包中查询低权限用户。您只能在Oracle RAC环境中使用以下命令。对特定资源执行特定操作。添加服务器类别。删除服务器类别。修改现有服务器类别。获取有关服务器类别的信息。从群集中的任何节点检查Oracle Clusterware堆栈的状态。在群集中的任何节点上运行时启动Oracle Clusterware堆栈。在群集中的任何节点上运行命令时，停止群集中的所有服务器或特定服务器上的Oracle Clusterware堆栈。获取集群类信息。显示集群配置信息。从用于保护节点间通信的禁用密码套件列表添加密码套件或从中删除密码套件。确定群集是否为扩展群集。获取Oracle Flex Cluster中Hub节点的值。设置Oracle Flex Cluster的最大Hub节点数。确定是否为Oracle Flex Clusters配置了群集或获取当前状态。将标准群集更改为Oracle Flex群集。显示当前群集名称。使用crsctl add cluster site命令将站点添加到扩展群集。使用crsctl delete cluster site命令从扩展群集中删除特定站点。修改扩展群集中站点的配置。显示扩展群集中的站点信息。列出传输层安全性使用的可用密码套件，用于保护节点间通信。使用crsctl get cluster type命令确定群集是Oracle Flex群集还是应用程序群集。设置集群的类型。crsctl get cpu equivalency命令获取CPU_EQUIVALENCY服务器配置属性的值。crsctl set cpu equivalency命令为CPU_EQUIVALENCY服务器配置属性设置一个值。检查本地服务器上的Oracle高可用性服务和Oracle Clusterware堆栈的状态。显示Oracle高可用性服务自动启动配置。在服务器引导时阻止Oracle高可用性服务的自动启动。在服务器引导时启用Oracle高可用性服务的自动启动。在本地服务器上启动Oracle High Availability Services。在本地服务器上停止Oracle高可用性服务。显示群集中运行的Oracle Clusterware软件的活动版本和已配置的修补程序级别。将用户添加到群集管理员列表中。从Oracle Clusterware管理员列表中删除用户。显示具有Oracle Clusterware管理权限的用户列表。获取Oracle Clusterware自动资源启动条件的值。设置Oracle Clusterware自动资源启动条件。显示在修补节点时在Grid Home修补程序存储库中更新的修补程序级别。显示存储在本地节点上的二进制文件中的Oracle Clusterware软件的版本。使用crsctl query crs site命令确定特定主机或磁盘所属的站点。显示已安装的Oracle Clusterware的已配置修补程序级别。显示已在指定节点上成功启动的软件的最新版本。获取特定Cluster Synchronization Services参数的值。引发许多特定节点。设置Cluster Synchronization Services参数的值。取消许多服务器。取消设置Cluster Synchronization Services参数的值并将其恢复为默认值。检索存储在本地智能平台管理接口（IPMI）设备的Oracle本地注册表中的地址。存储Oracle本地注册表中本地智能平台管理接口（IPMI）设备的地址。存储Oracle本地注册表中智能平台管理界面（IPMI）管理员的登录凭据。确定本地服务器上的Oracle Clusterware是否已配置为使用IPMI进行故障隔离。清除Oracle本地注册表中以前存储的所有IPMI配置（登录凭据和IP地址）。确定本地系统上是否存在智能平台管理接口（IPMI）驱动程序。列出禁用自动重新启动群集同步服务的问题。发生特定问题时停止自动重新启动群集同步服务。从Oracle Clusterware配置中删除投票文件。显示群集同步服务使用的投票文件，投票文件的状态以及磁盘的位置，无论它们是存储在Oracle ASM中还是存储在其他位置。检查群集时间同步服务的状态。在指定端口的网络上发送DHCP发现数据包。如果网络上存在DHCP服务器，则它们会响应发现消息并且命令成功。显示Oracle Clusterware代理用于从DHCP服务器获取已配置群集资源的IP地址的客户端ID。VIP类型是必需的。向特定客户端ID发送DHCP租约释放请求，并将网络上的释放数据包发送到特定端口。将网络上的DHCP请求报文发送到指定端口。替换用于查找投票文件的现有发现字符串。获取DNS查找具有指定DNS服务器的名称返回的地址列表。使用指定的子网掩码在指定接口上启动给定的IP名称或IP地址。检查网络上的给定IP地址是否已启动。使用指定的子网掩码停止指定接口上的给定IP名称或IP地址。列出可以调试的模块的组件。为新成员集群创建配置部署文件。删除成员集群配置。显示成员集群的配置。从群集中删除节点。获取本地节点的名称。获取群集中节点的已配置节点角色。将配置策略添加到策略集。从策略集中删除配置策略。预测在不更改系统的情况下激活特定策略的效果。修改现有配置策略。获取配置策略的状态和定义。以文本文件的形式创建一个反映服务器池配置的策略集。修改现有策略集。获取策略集中的当前策略，包括访问控制列表，该列表管理谁可以修改集，最后激活的策略以及现在生效的配置（称为当前策略）。在特定资源的特定于应用程序的代理程序内启动检查操作。将资源重定位到群集中的另一台服务器。检查RESOURCE_USE_ENABLED服务器配置参数的当前设置值。为运行此命令的服务器设置RESOURCE_USE_ENABLED服务器配置参数的值。将Oracle Clusterware和Oracle ASM转换为滚动补丁模式。将Oracle Clusterware和Oracle ASM转换为滚动补丁模式。将Oracle Clusterware和Oracle ASM转换为滚动升级模式。模拟添加服务器而不更改系统。预测删除服务器而不更改系统的影响。预测在不更改系统的情况下将服务器重定位到其他服务器池的影响。修改特定服务器的配置。将服务器重定位到其他服务器池。获取一个或多个特定服务器的状态和配置信息。获取CSS_CRITICAL服务器属性的当前配置值设置CSS_CRITICAL服务器属性的配置值。检查SERVER_LABEL服务器属性的当前设置值。为运行此命令的服务器设置SERVER_LABEL服务器配置属性的配置值。添加用于将非数据库资源（例如应用程序服务器）托管到Oracle Clusterware的服务器池。从Oracle Clusterware配置中删除服务器池。预测添加服务器池而不更改系统的影响。模拟删除服务器池而不更改系统。使用crsctl eval modify serverpool命令可预测修改服务器池的效果，而无需更改系统。此命令可能对群集管理员有用。检索特定服务器池的权限。修改现有服务器池。设置特定服务器池的权限。检索一个或多个特定服务器池的状态和配置信息。验证守护程序是否可以侦听指定的地址和端口。启动将侦听指定IP地址和端口的测试DNS服务器。查询在指定地址和本地主机名上运行的测试DNS服务器。停止测试DNS服务器。移动或替换现有的投票文件。您只能在Oracle Restart环境中使用这些命令。检查ohasd的状态。显示服务器上Oracle高可用性服务堆栈的自动启动配置。在服务器启动时禁用Oracle High Availability Services堆栈的自动启动。在服务器启动时启用Oracle High Availability Services堆栈的自动启动。显示存储在本地节点上的二进制文件中的Oracle Clusterware软件的发行版本。显示本地节点上的软件版本。在本地服务器上启动Oracle High Availability Services。在本地服务器上停止Oracle高可用性服务。您可以使用crsctl set log命令作为root用户，以便为群集就绪服务（CRS），群集同步服务（CSS），事件管理器（EVM）和群集件子组件启用动态调试。设置Oracle Clusterware的日志级别。您可以通过设置环境变量或运行crsctl set log命令来启用Oracle Clusterware模块及其组件和资源的调试。">Oracle Clusterware Control（CRSCTL）实用程序参考</a></li>
                        <li><a href="oracle-clusterware-administration.html#GUID-CAD9DDFE-1B4E-41BB-8029-3E9578639BD6" title="角色分离管理是一种以协调的方式管理集群资源和工作负载的方法，以减少资源冲突和短缺的风险。">角色分离管理</a></li>
                     </ul>
                  </div>
               </div><a id="CWADD91298"></a><div class="props_rev_3"><a id="GUID-AFA2B0A1-479F-4DAB-A9D0-226C30260DD8" name="GUID-AFA2B0A1-479F-4DAB-A9D0-226C30260DD8"></a><h4 id="CWADD-GUID-AFA2B0A1-479F-4DAB-A9D0-226C30260DD8" class="sect4">创建由Oracle Clusterware管理的应用程序VIP</h4>
                  <div>
                     <p>应用程序VIP是Oracle Clusterware管理的群集资源（Oracle Clusterware为应用程序VIP提供标准VIP代理）。</p>
                     <div class="section">
                        <p>如果应用程序的客户端通过网络访问应用程序，并且应用程序的放置策略允许它故障转移到另一个节点，则必须注册应用程序所依赖的虚拟Internet协议地址（VIP）。您应该将此VIP类型的任何新应用程序VIP作为基础，以确保您的系统在群集中部署的所有VIP之间保持一致的行为。</p>
                        <p>虽然你可以在你可以添加Oracle集群管理的任何其他资源同样的方法添加一个VIP，Oracle建议使用<code class="codeph"><span class="variable" translate="no">Grid_home</span> /bin/appvipcfg</code>命令行实用程序来创建或默认的网络上删除应用程序VIP为其<code class="codeph">ora.net1.network</code>资源默认创建。
                        </p>
                        <p>要创建应用程序VIP，请使用以下语法：</p><pre class="pre codeblock"><code>appvipcfg create -network = <span class="variable" translate="no">network_nummber</span> -ip = <span class="variable" translate="no">ip_address</span> -vipname = <span class="variable" translate="no">vip_name</span> -user = <span class="variable" translate="no">user_name</span> [-group = <span class="variable" translate="no">group_name</span> ] [-failback = 0 | 1]</code></pre><div class="infoboxnote" id="GUID-AFA2B0A1-479F-4DAB-A9D0-226C30260DD8__GUID-2DC627DF-03EF-408F-9A56-31CB1FA7AF61">
                           <p class="notep1">注意：</p>
                           <p>您可以在资源保持联机状态时修改VIP名称，而无需重新启动资源。</p>
                        </div>
                        <p>在默认网络上创建应用程序VIP时，请设置<code class="codeph">-network=1</code> 。
                        </p>
                        <p>要在非默认网络上创建应用程序VIP，您可能必须首先使用<code class="codeph">srvctl add network</code>命令创建<code class="codeph">srvctl add network</code> 。然后，您可以创建应用程序VIP，设置<code class="codeph">-network=</code> <span class="italic"><code class="codeph">non-default_network_number</code></span> 。
                        </p>
                        <p>在Oracle Flex Cluster中，您还可以为应用程序VIP添加非Hub节点网络资源，以便应用程序可以使用<code class="codeph">srvctl add network</code>命令在非Hub节点上运行，如下所示：</p><pre class="oac_no_warn" dir="ltr">srvctl add network -netnum = <span class="italic">network_number</span> -subnet <span class="italic">subnet</span> / <span class="italic">netmask</span> [/ <span class="italic">if1</span> [| <span class="italic">if2</span> | ...]]</pre><p>要删除应用程序VIP，请使用以下语法：</p><pre class="pre codeblock"><code>appvipcfg delete -vipname = <span class="variable" translate="no">vip_name</span></code></pre><p>在前面的语法示例中， <code class="codeph"><span class="variable" translate="no">network_number</span></code>是网络的编号， <code class="codeph"><span class="variable" translate="no">ip_address</span></code>是IP地址， <code class="codeph"><span class="variable" translate="no">vip_name</span></code>是VIP的名称， <code class="codeph"><span class="variable" translate="no">user_name</span></code>是安装Oracle数据库的用户的名称， <code class="codeph"><span class="variable" translate="no">group_name</span></code>是组的名称。<code class="codeph">-failback</code>选项的默认值为0。如果将该选项设置为1，则VIP（以及依赖于VIP的任何资源）在再次可用时将无法返回到原始节点。
                        </p>
                        <div class="infoboxnote" id="GUID-AFA2B0A1-479F-4DAB-A9D0-226C30260DD8__GUID-16314523-21A3-4E2D-AAAB-3BEC757D1DA4">
                           <p class="notep1">注意：</p>
                           <p><code class="codeph">-ip= <span class="variable" translate="no">ip_address</span></code>参数是必需的，但是如果已配置网格即插即用和带有DHCP的GNS，则该参数始终从DHCP服务器获取IP地址并忽略该命令中指定的IP地址。DHCP也会忽略<code class="codeph">-vipname= <span class="variable" translate="no">vip_name</span></code>参数的值。</p>
                        </div>
                        <p>例如，以<code class="codeph">root</code>身份运行以下命令：</p><pre class="pre codeblock"><code><span class="variable" translate="no">Grid_home</span> / bin / appvipcfg create -network = 1 -ip = 148.87.58.196 -vipname = appsVIP -user = root</code></pre><p>除了拥有应用程序VIP资源的用户之外，该脚本仅需要网络号，IP地址和VIP资源的名称。VIP资源通常由<code class="codeph">root</code>拥有，因为VIP相关操作需要root权限。
                        </p>
                        <p>要删除应用程序VIP，请使用与<code class="codeph">delete</code>选项相同的脚本。此选项接受VIP名称作为参数。例如：</p><pre class="pre codeblock"><code><span class="variable" translate="no">Grid_home</span> / bin / appvipcfg delete -vipname = appsVIP</code></pre><p>使用此配置脚本创建应用程序VIP后，可以使用以下命令查看VIP配置文件：</p><pre class="pre codeblock"><code>$ <span class="variable" translate="no">Grid_home</span> / bin / crsctl status res appsVIP -p</code></pre><p>验证并在需要时使用<code class="codeph"><span class="variable" translate="no">Grid_home</span> /bin/crsctl modify res</code>命令修改以下参数。
                        </p>
                        <p><code class="codeph">appvipcfg</code>脚本要求您指定<code class="codeph">-network</code>选项，即使<code class="codeph">-network=1</code> 。
                        </p>
                        <p>作为Oracle数据库安装所有者，启动VIP资源：</p><pre class="pre codeblock"><code>$ crsctl启动资源appsVIP</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../racad/server-control-utility-reference.html#RACAD-GUID-E9B08A79-CE87-47ED-8FD8-7EAF421CCD88" target="_blank"><span><cite>“Oracle Real Application Clusters管理和部署指南”</cite></span></a></li>
                           <li><a href="oracle-flex-clusters.html#GUID-DF441DD8-B3B4-48C2-96B5-3DD59EAAC8EF" title="Oracle Flex Cluster将Oracle Clusterware扩展为大量节点。">Oracle Flex集群</a></li>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-9C074F34-F180-4200-A99B-72186DAB56E1" title="每个INSTANCE_COUNT个资源实例的整数不同。资源组属性，包含标记为资源组关键的资源列表。描述了SERVER_POOLS资源属性。属于资源组的资源列表。当资源添加到组时，Oracle Clusterware会填充和更新此属性。">Oracle Clusterware资源参考</a></li>
                        </ul>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-78EE66E9-21B5-4A0D-80C6-422C5783DBF9" name="GUID-78EE66E9-21B5-4A0D-80C6-422C5783DBF9"></a><h5 id="CWADD-GUID-78EE66E9-21B5-4A0D-80C6-422C5783DBF9" class="sect5">使用Oracle Enterprise Manager添加应用程序VIP</h5>
                     <div>
                        <div class="section">
                           <p>至<a id="d45801e6772" class="indexterm-anchor"></a><a id="d45801e6778" class="indexterm-anchor"></a>使用Oracle Enterprise Manager添加应用程序VIP：</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>登录Oracle Enterprise Manager云控制。</span></li>
                           <li><span>选择要修改的群集目标。</span></li>
                           <li><span>从群集目标菜单中，选择<span class="bold">管理</span> &gt; <span class="bold">资源</span> &gt; <span class="bold">管理</span> 。</span></li>
                           <li><span>输入集群管理员用户名和密码以显示“管理资源”页面。</span></li>
                           <li><span>单击<span class="bold">添加应用程序VIP</span> 。</span></li>
                           <li><span>在“ <span class="bold">名称”</span>字段中输入VIP的<span class="bold">名称</span> 。</span></li>
                           <li><span>在“ <span class="bold">网络号”</span>字段中输入网络号。</span></li>
                           <li><span>在“ <span class="bold">Internet协议地址”</span>字段中输入VIP的IP地址。</span></li>
                           <li><span>在<span class="bold">Primary User</span>字段中输入<span class="bold">root</span> 。Oracle Enterprise Manager默认为您登录的任何用户名。</span></li>
                           <li><span>如果希望VIP立即<span class="bold">启动，请</span>选择<span class="bold">“创建后启动资源”</span> 。</span></li>
                           <li><span>单击“ <span class="bold">继续”</span>以显示“确认：添加VIP资源”页面。</span></li>
                           <li><span>输入<span class="bold">root</span>和root密码作为集群凭据。</span></li>
                           <li><span>单击“ <span class="bold">继续”</span>以创建应用程序VIP。</span></li>
                        </ol>
                     </div>
                  </div>
               </div><a id="CWADD91300"></a><div class="props_rev_3"><a id="GUID-EC749831-C1A0-40DA-B74E-36D8C4B54193" name="GUID-EC749831-C1A0-40DA-B74E-36D8C4B54193"></a><h4 id="CWADD-GUID-EC749831-C1A0-40DA-B74E-36D8C4B54193" class="sect4">添加用户定义的资源</h4>
                  <div>
                     <p>您可以随时向Oracle Clusterware添加资源。</p>
                     <p>但是，如果添加依赖于其他资源的资源，则必须首先添加它所依赖的资源。</p>
                     <p>在本节的示例中，假设操作脚本<code class="codeph">myApache.scr</code>驻留在每个节点上的<code class="codeph">/opt/cluster/scripts</code>目录中，以便于将资源添加到集群。还假设已创建服务器池来托管应用程序。此服务器池不是Generic的子池，而是用于在顶级服务器池中托管应用程序。
                     </p>
                     <div class="infoboxnote" id="GUID-EC749831-C1A0-40DA-B74E-36D8C4B54193__GUID-5D2884BF-5D51-473E-8D5A-E415120A4444">
                        <p class="notep1">注意：</p>
                        <p>Oracle建议您使用共享存储（例如Oracle自动存储管理群集文件系统（Oracle ACFS））来存储操作脚本以减少脚本维护。</p>
                     </div>
                     <p>本节包括以下主题：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-CFEBE692-DB46-48D7-AFF2-3F21FB2BD65C">决定部署方案</a></p>
                        </li>
                        <li>
                           <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-1D44D5D6-D863-4438-8A53-20182D437E1D" title="使用crsctl add resource命令将资源添加到服务器池。">将资源添加到指定的服务器池</a></p>
                        </li>
                        <li>
                           <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-46607977-281E-473B-8AA0-5B7C9CF5453E">使用特定于服务器的部署添加资源</a></p>
                        </li>
                        <li>
                           <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-6D80CD6A-A3C1-4F5C-9F3D-6FCBDE9C075F" title="使用crsctl add resource命令可以使用generic_application资源类型创建资源，以模拟任何类型的需要高可用性的应用程序，而无需创建任何操作脚本。">创建使用generic_application资源类型的资源</a></p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-58143813-C77F-4EAF-8E2C-D82E10F13B26">第三方应用程序的操作脚本示例</a></li>
                        </ul>
                     </div>
                  </div><a id="CWADD92378"></a><div class="props_rev_3"><a id="GUID-CFEBE692-DB46-48D7-AFF2-3F21FB2BD65C" name="GUID-CFEBE692-DB46-48D7-AFF2-3F21FB2BD65C"></a><h5 id="CWADD-GUID-CFEBE692-DB46-48D7-AFF2-3F21FB2BD65C" class="sect5">决定部署方案</h5>
                     <div>
                        <p><a id="d45801e7161" class="indexterm-anchor"></a>您必须决定是否对应用程序使用管理员或策略管理。将管理员管理用于较小的双节点配置，其中您的群集配置不太可能发生更改。当您的集群包含两个以上的节点时，请使用策略管理进行更多动态配置。例如，如果资源仅在节点1和节点2上运行，因为只有那些节点具有必要的文件，那么管理员管理可能更合适。
                        </p>
                        <p>Oracle Clusterware支持在由匿名服务器组成的访问控制服务器池中部署应用程序，并严格基于所需的池大小。在这种情况下，管理员定义的群集策略可以并且必须用于管理具有所需大小和重要级别的服务器分配。或者，可以使用严格或首选的服务器分配，其中资源在特定命名的服务器上运行。这表示早期版本的Oracle Clusterware中现有的模型，现在称为管理员管理。</p>
                        <p>从概念上讲，在两种部署方案中开发和部署的集群托管应用程序可以视为两个逻辑上分离的服务器组。一个服务器组用于服务器池，从而实现角色分离和服务器容量控制。另一个服务器组假定基于群集中的命名服务器进行固定分配。</p>
                        <p>要使用任一部署方案管理应用程序，必须先创建服务器池，然后再将资源添加到群集。名为<span class="italic">Generic的</span>内置服务器池始终拥有基于管理员的管理应用程序使用的服务器。通用服务器池是逻辑分区，可用于使用不同的管理方案分离集群的两个部分。
                        </p>
                        <p>对于使用该模型部署应用程序的第三方开发人员，必须使用服务器池。要利用基于命名服务器的预先存在的应用程序开发和部署模型，必须使用Generic的子池（具有Generic作为其父池的服务器池，由服务器池属性<code class="codeph">PARENT_POOLS</code>定义）。通过创建使用Generic作为其父级并在子池定义中按名称枚举服务器的子池，应用程序可确保命名服务器位于Generic中，并专门用于使用命名服务器模型的应用程序。
                        </p>
                     </div>
                  </div><a id="CWADD92143"></a><div class="props_rev_3"><a id="GUID-1D44D5D6-D863-4438-8A53-20182D437E1D" name="GUID-1D44D5D6-D863-4438-8A53-20182D437E1D"></a><h5 id="CWADD-GUID-1D44D5D6-D863-4438-8A53-20182D437E1D" class="sect5">将资源添加到指定的服务器池</h5>
                     <div>
                        <p>使用<code class="codeph">crsctl add resource</code>命令<code class="codeph">crsctl add resource</code>添加到服务器池。
                        </p>
                        <div class="section">
                           <p>要使用基于策略的部署方案将Apache Web服务器作为资源添加到特定服务器池，请以应该运行Apache服务器的用户身份运行以下命令（对于Apache Server，这通常是<code class="codeph">root</code>用户）：</p><pre class="pre codeblock"><code>$ crsctl add resource myApache -type cluster_resource -attr“ACTION_SCRIPT = / opt / cluster / scripts / myapache.scr，PLACEMENT = restricted，SERVER_POOLS = <span class="variable" translate="no">server_pool_list</span> ，CHECK_INTERVAL = 30，RESTART_ATTEMPTS = 2，START_DEPENDENCIES = hard（appsvip），STOP_DEPENDENCIES = hard （appsvip）”</code></pre><p>在前面的示例中， <code class="codeph">myApache</code>是添加到群集的资源的名称。
                           </p>
                           <div class="infoboxnote" id="GUID-1D44D5D6-D863-4438-8A53-20182D437E1D__GUID-D80F3254-9252-43D1-BB55-B60A5FB671B3">
                              <p class="notep1">注意：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>必须在单引号（''）中包含逗号或空格分隔的属性值以避免错误。如果将单个属性值括在单引号中，则会忽略它们，并且不会出现错误。</p>
                                 </li>
                                 <li>
                                    <p>资源名称不能以句点开头，也不能以字符串<span class="italic">ora</span>开头。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <p>资源配置如下：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p>资源是<code class="codeph">cluster_resource</code>类型。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">ACTION_SCRIPT=/opt/cluster/scripts/myapache.scr:</code>所需操作脚本的路径。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">PLACEMENT =限制</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">SERVER_POOLS= <span class="variable" translate="no">server_pool_list</span></code> ：此资源只能在以空格分隔的列表中指定的服务器池中运行。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">CHECK_INTERVAL=30</code> ：Oracle Clusterware每30秒检查一次该资源以确定其状态。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">RESTART_ATTEMPTS=2</code> ：Oracle Clusterware尝试重新启动此资源两次，然后再将其转移到另一个节点。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">START_DEPENDENCIES=hard(appsvip)</code> ：此资源对appsvip资源具有严格的START依赖性。appsvip资源必须在线才能启动myApache。
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">STOP_DEPENDENCIES=hard(appsvip)</code> ：此资源对appsvip资源具有硬STOP依赖性。如果appsvip资源脱机，myApache资源将停止。
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="oracle-clusterware-resource-reference.html#GUID-58143813-C77F-4EAF-8E2C-D82E10F13B26">第三方应用程序的操作脚本示例</a></li>
                              <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-C0FEFBDC-CA87-436A-ACA4-A5BAC4D18963" title="可以在任何服务器上启动资源，具体取决于放置策略，资源启动依赖关系以及该服务器上操作脚本的可用性。">申请安置政策</a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CWADD92144"></a><div class="props_rev_3"><a id="GUID-46607977-281E-473B-8AA0-5B7C9CF5453E" name="GUID-46607977-281E-473B-8AA0-5B7C9CF5453E"></a><h5 id="CWADD-GUID-46607977-281E-473B-8AA0-5B7C9CF5453E" class="sect5">使用特定于服务器的部署添加资源</h5>
                     <div>
                        <div class="section">
                           <p>要将Apache Web服务器添加为使用命名服务器部署的资源，请假定您将资源添加到服务器池，根据定义，该服务器池是通用服务器池的子池。您可以使用<code class="codeph">crsctl add serverpool</code>命令创建作为Generic子池的服务器池。这些服务器池将通用服务器池定义为服务器池属性<code class="codeph">PARENT_POOLS</code>的父<code class="codeph">PARENT_POOLS</code> 。此外，它们还包括<code class="codeph">SERVER_NAMES</code>参数中的服务器名称列表，以指定应分配给相应池的服务器。例如：</p><pre class="pre codeblock"><code>$ crsctl add serverpool myApache_sp -attr“PARENT_POOLS = Generic，SERVER_NAMES = host36 host37”</code></pre><p>创建子池后，添加Apache Web服务器资源，如下所示：</p><pre class="pre codeblock"><code>$ crsctl add resource myApache -type cluster_resource -attr“ACTION_SCRIPT = / opt / cluster / scripts / myapache.scr，PLACEMENT ='restricted'，SERVER_POOLS = myApache_sp，CHECK_INTERVAL ='30'，RESTART_ATTEMPTS ='2'，START_DEPENDENCIES ='hard （appsvip）'，STOP_DEPENDENCIES ='hard（appsvip）'“</code></pre><div class="infoboxnote" id="GUID-46607977-281E-473B-8AA0-5B7C9CF5453E__GUID-1350FD7E-EE2E-4528-9676-5E867CA1E1D7">
                              <p class="notep1">注意：</p>
                              <p>资源名称不能以句点开头，也不能以字符串<span class="italic">ora</span>开头。
                              </p>
                           </div>
                           <p>此外，请注意，使用特定于服务器的部署添加资源时， <code class="codeph">SERVER_POOLS</code>资源参数中列出的服务器池必须是Generic下的子池。
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="policy-based-cluster-and-capacity-management.html#GUID-B591A9DF-BEB1-4B72-B665-7416BEA27C7A" title="Oracle Clusterware管理的资源包含在称为服务器池的逻辑服务器组中。这是在Oracle Clusterware 11g第2版（11.2）中引入的。通过基于策略的管理，管理员可以指定运行服务器的服务器池（不包括通用池和空闲池）。您可以使用SRVCTL或CRSCTL分别为数据库和其他应用程序创建服务器池。通过服务器分类，您可以使用处理器类型，内存和其他区分系统功能等属性将服务器组织到特定类别中。群集配置策略是一个文档，其中只包含群集配置策略集管理的每个服务器池的一个定义。群集配置策略集是一个文档，用于定义为群集配置的所有服务器池的名称以及所有策略的定义。您可以配置数据库，以便Oracle Clusterware了解给定数据库的CPU要求和限制。只要将服务器添加到群集，Oracle Clusterware就会为每个服务器分配一组属性。由于过多的打开会话或失控的工作负载，企业数据库服务器可以使用所有可用内存。内存不足可能导致事务失败，或者在极端情况下，导致服务器重新启动以及丢失应用程序的宝贵资源。Oracle数据库QoS管理实时检测服务器上的内存压力，并将新会话重定向到其他服务器，以防止使用压力服务器上的所有可用内存。您将服务器定义为命名类别，并指定将服务器定义为该类别成员的属性。">基于策略的集群和容量管理</a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CWADD92896"></a><div class="props_rev_3"><a id="GUID-6D80CD6A-A3C1-4F5C-9F3D-6FCBDE9C075F" name="GUID-6D80CD6A-A3C1-4F5C-9F3D-6FCBDE9C075F"></a><h5 id="CWADD-GUID-6D80CD6A-A3C1-4F5C-9F3D-6FCBDE9C075F" class="sect5">创建使用generic_application资源类型的资源</h5>
                     <div>
                        <p>使用<code class="codeph">crsctl add resource</code>命令可以使用<code class="codeph">generic_application</code>资源类型创建资源，以模拟任何类型的需要高可用性的应用程序，而无需创建任何操作脚本。
                        </p>
                        <div class="section">
                           <p>本节包括两个用于创建使用<code class="codeph">generic_application</code>资源类型的资源的Linux / UNIX平台示例。
                           </p>
                           <p>在以下命令示例中，为高可用性创建Samba服务器资源：</p><pre class="pre codeblock"><code>$ crsctl add resource samba1 -type generic_application -attr“START_PROGRAM ='/ etc / init.d / smb start'，STOP_PROGRAM ='/ etc / init.d / smb stop'，CLEAN_PROGRAM ='/ etc / init.d / smb stop'，PID_FILES ='/ var / run / smbd.pid，/ var / run / nmbd.pid'“</code></pre><p>在前面的示例中，配置了定义资源的属性，如下所示：</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">START_PROGRAM='/etc/init.d/smb start'</code> ：此属性包含启动Samba服务器的脚本的完整路径和参数</p>
                              </li>
                              <li>
                                 <p><code class="codeph">STOP_PROGRAM='/etc/init.d/smb stop'</code> ：此属性包含停止Samba服务器的脚本的完整路径和参数</p>
                              </li>
                              <li>
                                 <p><code class="codeph">CLEAN_PROGRAM='/etc/init.d/smb stop'</code> ：此属性包含脚本的完整路径和参数，强制终止并清理Samba服务器，以防启动或停止服务器时出现任何故障</p>
                              </li>
                              <li>
                                 <p><code class="codeph">PID_FILES='/var/run/smbd.pid,/var/run/nmbd.pid'</code> ：此属性包含文本文件的路径，列出必须监视的进程ID（PID）以确保Samba服务器和所有它的组件正在运行</p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-6D80CD6A-A3C1-4F5C-9F3D-6FCBDE9C075F__GUID-DBBBAB15-89E6-4119-89D6-34AC3416E536">
                              <p class="notep1">注意：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>如果此Samba服务器配置需要基于脚本的监视，则可以使用<code class="codeph">CHECK_PROGRAMS</code>属性而不是<code class="codeph">PID_FILES</code>属性，如下所示：</p><pre class="pre codeblock"><code>CHECK_PROGRAMS ='/ etc / init.d / smb status'</code></pre></li>
                                 <li>
                                    <p>您可以通过配置指定标准的Oracle集群布局和基数性<code class="codeph">HOSTING_MEMBERS</code> ， <code class="codeph">SERVER_POOLS</code> ， <code class="codeph">PLACEMENT</code>和<code class="codeph">CARDINALITY</code> Samba服务器资源的属性。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <p>在第二个命令示例中，创建了一个数据库文件服务器（DBFS）资源以实现高可用性。DBFS提供用户空间（FUSE）文件系统中的文件系统，以访问存储在Oracle数据库中的数据。</p>
                           <p>您可以使用<code class="codeph">generic_application</code>资源类型来定义与DBFS文件系统对应的资源。您可以使用此DBFS资源来启动，停止，监视和故障转移DBFS文件系统装入点。创建此资源的命令语法如下：</p><pre class="pre codeblock"><code>$ crsctl add resource dbfs1 -type generic_application -attr“START_PROGRAM ='/ app / oracle / 12.2 / bin / dbfs_client -o wallet / @ inst1 / scratch / mjk / data / dbfs_mount'，STOP_PROGRAM ='/ bin / fusermount -u / scratch / mjk / data / dbfs_mount'，CHECK_PROGRAMS ='ls / scratch / mjk / data / dbfs_mount / dbfsdata1'，ENVIRONMENT_VARS ='ORACLE_HOME = / app / oracle / 12.2，LD_LIBRARY_PATH = / app / oracle / 12.2 / lib：/ app /oracle/12.2/rdbms/lib,TNS_ADMIN = / app / oracle / 12.2 / network / admin'，CLEAN_PROGRAM ='/ bin / fusermount -u -z / scratch / mjk / data / dbfs_mount'，START_DEPENDENCIES ='hard（ora .inst1_srv.svc）'，STOP_DEPENDENCIES ='hard（ora.inst1_srv.svc）'“</code></pre><p>除了强制<code class="codeph">START_PROGRAM</code> ， <code class="codeph">STOP_PROGRAM</code> ， <code class="codeph">CHECK_PROGRAMS</code>和<code class="codeph">CLEAN_PROGRAM</code>属性之外，上面的示例还包括以下内容：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><code class="codeph">ENVIRONMENT_VARS</code>属性指定在启动或停止程序时传递的自定义环境变量</p>
                              </li>
                              <li>
                                 <p><code class="codeph">START_DEPENDENCIES</code>和<code class="codeph">STOP_DEPENDENCIES</code>依赖项属性为数据库服务创建启动和停止依赖关系，该数据库服务是DBFS文件系统的基础数据库存储</p>
                                 <p>您可以根据DBFS文件系统的应用程序要求，为更高级别的应用程序资源创建对DBFS资源的依赖关系。</p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-6D80CD6A-A3C1-4F5C-9F3D-6FCBDE9C075F__GUID-5CC2835A-EA0D-4982-B4D4-539B21A21ACF">
                              <p class="notep1">注意：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>前面语法中显示的<code class="codeph">ORACLE_HOME</code>目录就是一个示例。
                                    </p>
                                 </li>
                                 <li>
                                    <p>您可以通过配置指定标准的Oracle集群布局和基数性<code class="codeph">HOSTING_MEMBERS</code> ， <code class="codeph">SERVER_POOLS</code> ， <code class="codeph">PLACEMENT</code>和<code class="codeph">CARDINALITY</code>的DBFS文件系统资源的属性。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>相关话题</strong></p>
                           <ul>
                              <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-30DC08E5-72CE-4E93-B6D6-E209DEADF83E">Oracle Clusterware资源类型</a></li>
                              <li><a href="../adlob/introducing-database-file-system.html#ADLOB-GUID-B7A83817-F0D6-4A09-AE98-DFC966783109" target="_blank"><span><cite>Oracle Database SecureFiles和大对象开发人员指南</cite></span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="CWADD91303"></a><div class="props_rev_3"><a id="GUID-A2472668-828C-45A1-AAFB-C9B143BA6B61" name="GUID-A2472668-828C-45A1-AAFB-C9B143BA6B61"></a><h4 id="CWADD-GUID-A2472668-828C-45A1-AAFB-C9B143BA6B61" class="sect4">使用Oracle Enterprise Manager添加资源</h4>
                  <div>
                     <p>使用Enterprise Manager添加资源。</p>
                     <div class="section">
                        <p>要使用Oracle Enterprise Manager向Oracle Clusterware添加资源，请执行以下操作：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>登录Oracle Enterprise Manager云控制。</span></li>
                        <li class="stepexpand"><span>选择要修改的群集目标。</span></li>
                        <li class="stepexpand"><span>从群集目标菜单中，选择<span class="bold">管理</span> &gt; <span class="bold">资源</span> &gt; <span class="bold">管理</span> 。</span></li>
                        <li class="stepexpand"><span>输入集群管理员用户名和密码以显示“添加资源”页面。</span></li>
                        <li class="stepexpand"><span>在“ <span class="bold">名称”</span>字段中输入资源的<span class="bold">名称</span> 。</span><div>
                              <div class="infoboxnote" id="GUID-A2472668-828C-45A1-AAFB-C9B143BA6B61__GUID-7898A7A6-BF80-47F8-92B0-297E3B6A865B">
                                 <p class="notep1">注意：</p>
                                 <p>资源名称不能以句点开头，也不能以字符串<span class="italic">ora</span>开头。
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>从“ <span class="bold">资源类型”</span>下拉列表中选择<span class="bold">cluster_resource</span>或<span class="bold">local_resource</span> 。</span></li>
                        <li class="stepexpand"><span>（可选）在“ <span class="bold">描述”</span>字段中输入资源的<span class="bold">描述</span> 。</span></li>
                        <li class="stepexpand"><span>如果希望立即<span class="bold">启动资源，请</span>选择<span class="bold">“创建后启动资源”</span> 。</span></li>
                        <li class="stepexpand"><span>“ <span class="bold">放置”</span>部分中的可选参数定义Oracle Clusterware放置资源的群集中的位置。</span><div>
                              <p>本节中的属性对应于<a href="oracle-clusterware-resource-reference.html#GUID-9C074F34-F180-4200-A99B-72186DAB56E1" title="每个INSTANCE_COUNT个资源实例的整数不同。资源组属性，包含标记为资源组关键的资源列表。描述了SERVER_POOLS资源属性。属于资源组的资源列表。当资源添加到组时，Oracle Clusterware会填充和更新此属性。">Oracle Clusterware Resource Reference中</a>描述的属性。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>在“ <span class="bold">操作程序”</span>部分中，从“ <span class="bold">操作程序”</span>下拉列表中选择Oracle Clusterware是否调用操作脚本，代理文件或两者来管理资源。</span><div>
                              <p>您还必须指定脚本，文件或两者的路径，具体取决于您从下拉列表中选择的内容。</p>
                              <p>如果选择<span class="bold">“操作脚本”</span> ，则可以单击“ <span class="bold">创建新操作脚本”</span>以使用Oracle Enterprise Manager操作脚本模板为您的资源创建操作脚本（如果尚未这样做）。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>要进一步配置资源，请单击“ <span class="bold">属性”</span> 。在此页面上，您可以配置启动，停止和状态属性，以及脱机监视和您定义的任何属性。</span></li>
                        <li class="stepexpand"><span>单击“ <span class="bold">高级设置”</span>以启用更详细的资源属性配置。</span></li>
                        <li class="stepexpand"><span>单击“ <span class="bold">依赖关系”</span>以配置资源之间的启动和停止依赖关系。</span><div></div>
                        </li>
                        <li class="stepexpand"><span>完成资源配置后，单击“ <span class="bold">提交</span> ”。</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-C0FEFBDC-CA87-436A-ACA4-A5BAC4D18963" title="可以在任何服务器上启动资源，具体取决于放置策略，资源启动依赖关系以及该服务器上操作脚本的可用性。">申请安置政策</a></li>
                           <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-D08A5C19-9EC5-4903-A263-82A52478D8EE">资源依赖性</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD91305"></a><div class="props_rev_3"><a id="GUID-96F44496-F4F6-4F92-A283-7968EA27FD3F" name="GUID-96F44496-F4F6-4F92-A283-7968EA27FD3F"></a><h4 id="CWADD-GUID-96F44496-F4F6-4F92-A283-7968EA27FD3F" class="sect4">更改资源权限</h4>
                  <div>
                     <div class="section">
                        <p>Oracle Clusterware基于管理资源来管理资源<a id="d45801e8224" class="indexterm-anchor"></a>添加资源的用户的权限。首先添加资源的用户拥有资源，资源作为资源所有者运行。必须以<code class="codeph">root</code>身份管理某些资源。如果比其他用户<code class="codeph">root</code>补充说，必须运行作为一种资源<code class="codeph">root</code> ，那么权限必须改变为<code class="codeph">root</code> ，使<code class="codeph">root</code>管理资源，如下所示：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>通过以<code class="codeph">root</code>身份运行以下命令，将指定资源的权限更改为<code class="codeph">root</code> ：</span><div><pre class="oac_no_warn" dir="ltr">#crsctl setperm resource <span class="italic">resource_name</span> -o root</pre></div>
                        </li>
                        <li class="stepexpand"><span>作为安装Oracle Clusterware的用户，请启用Oracle数据库安装所有者（在以下示例中为<code class="codeph">oracle</code> ）来运行脚本，如下所示：</span><div><pre class="oac_no_warn" dir="ltr">$ crsctl setperm resource <span class="italic">resource_name</span> -u user：oracle：rx</pre></div>
                        </li>
                        <li class="stepexpand"><span>启动资源：</span><div><pre class="oac_no_warn" dir="ltr">$ crsctl start resource <span class="italic">resource_name</span></pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="CWADD91306"></a><div class="props_rev_3"><a id="GUID-C0FEFBDC-CA87-436A-ACA4-A5BAC4D18963" name="GUID-C0FEFBDC-CA87-436A-ACA4-A5BAC4D18963"></a><h4 id="CWADD-GUID-C0FEFBDC-CA87-436A-ACA4-A5BAC4D18963" class="sect4">申请安置政策</h4>
                  <div>
                     <p>可以在任何服务器上启动资源，具体取决于放置策略，资源启动依赖关系以及该服务器上操作脚本的可用性。</p>
                     <div class="section">
                        <p><code class="codeph">PLACEMENT</code>资源属性确定Oracle Clusterware如何选择启动资源的服务器以及服务器发生故障后重定位资源的位置。<code class="codeph">HOSTING_MEMBERS</code>和<code class="codeph">SERVER_POOLS</code>属性确定符合条件的服务器来托管资源， <code class="codeph">PLACEMENT</code>属性进一步细化资源的放置。
                        </p>
                        <p><code class="codeph">PLACEMENT</code>资源属性的值确定Oracle Clusterware在将资源添加到群集或服务器出现故障时如何<code class="codeph">PLACEMENT</code>资源。与<code class="codeph">HOSTING_MEMBERS</code>或<code class="codeph">SERVER_POOLS</code>属性一起，您可以配置Oracle Clusterware如何将资源放置在集群中。当<code class="codeph">PLACEMENT</code>属性的值为：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">balanced</code> ：Oracle Clusterware使用任何在线服务器池进行放置。负载较小的服务器优先于负载较大的服务器。为了测量服务器的加载方式，Oracle Clusterware使用服务器上处于<code class="codeph">ONLINE</code>状态的资源的<code class="codeph">LOAD</code>资源属性。Oracle Clusterware使用<code class="codeph">LOAD</code>值的总和来度量当前服务器负载。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">favored</code> ：如果将值分配给<code class="codeph">HOSTING_MEMBERS</code> ， <code class="codeph">SERVER_POOLS</code>或<code class="codeph">SERVER_CATEGORY</code>资源属性，则该值表示首选项。如果填充了<code class="codeph">HOSTING_MEMBERS</code>并且设置了<code class="codeph">SERVER_POOLS</code>或<code class="codeph">SERVER_CATEGORY</code> ，则<code class="codeph">HOSTING_MEMBERS</code>表示放置首选项， <code class="codeph">SERVER_POOLS</code>或<code class="codeph">SERVER_CATEGORY</code>表示限制。例如， <code class="codeph">ora.cluster.vip</code>资源都具有设置的值的策略<code class="codeph">PLACEMENT</code>到<code class="codeph">favored</code> ， <code class="codeph">SERVER_CATEGORY</code>设置为<code class="codeph">Hub</code> ，并<code class="codeph">HOSTING_MEMBERS</code>设置为<code class="codeph">server_name1</code> 。在这种情况下，Oracle Clusterware将<code class="codeph">ora.cluster.vip</code>的位置限制为Hub类别中的服务器，然后它更喜欢名为<code class="codeph">server_name1</code> 。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">restricted</code> ：Oracle Clusterware仅考虑属于<code class="codeph">SEVER_POOLS</code>资源属性中列出的服务器池的服务器， <code class="codeph">SERVER_CATEGORY</code>资源属性中配置的特定类别的服务器，或资源放置的<code class="codeph">HOSTING_MEMBERS</code>资源属性中列出的服务器。这些资源属性中只有一个可以具有值，否则会导致错误。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-9C074F34-F180-4200-A99B-72186DAB56E1" title="每个INSTANCE_COUNT个资源实例的整数不同。资源组属性，包含标记为资源组关键的资源列表。描述了SERVER_POOLS资源属性。属于资源组的资源列表。当资源添加到组时，Oracle Clusterware会填充和更新此属性。">Oracle Clusterware资源参考</a></li>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88">HOSTING_MEMBERS</a></li>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-85112566-7B71-423B-87DF-8F5B50CAAF58">SERVER_CATEGORY</a></li>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-4B71EDE4-EFAE-4AEE-B2DC-C57712DEF41F" title="描述了SERVER_POOLS资源属性。">SERVER_POOLS</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD91309"></a><div class="props_rev_3"><a id="GUID-74FE4AB7-3960-4F09-9325-F9372B081F6D" name="GUID-74FE4AB7-3960-4F09-9325-F9372B081F6D"></a><h4 id="CWADD-GUID-74FE4AB7-3960-4F09-9325-F9372B081F6D" class="sect4">取消注册应用程序和应用程序资源</h4>
                  <div>
                     <div class="section">
                        <p>要取消注册资源，请使用<code class="codeph">crsctl delete resource</code>命令。除非使用<code class="codeph">-force</code>选项，否则无法取消注册其他资源的ONLINE或其他资源所需的应用程序或资源。以下示例取消注册Apache Web服务器应用程序：</p><pre class="oac_no_warn" dir="ltr">$ crsctl删除资源myApache</pre><p>当Oracle Clusterware不再管理资源时，请运行<code class="codeph">crsctl delete resource</code>命令作为清理步骤。Oracle建议您取消注册任何不必要的资源。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="CWADD91315"></a><div class="props_rev_3"><a id="GUID-F650245B-F6F4-4C51-801A-8871A0B80E1C" name="GUID-F650245B-F6F4-4C51-801A-8871A0B80E1C"></a><h3 id="CWADD-GUID-F650245B-F6F4-4C51-801A-8871A0B80E1C" class="sect3">管理资源</h3>
               <div>
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-4100AC56-4AA4-40C8-9020-96A3B76BF099" title="您使用Oracle Clusterware管理的每个应用程序都已注册并作为资源存储在OCR中。">注册应用程序资源</a></p>
                     </li>
                     <li>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-0275D805-AF9E-4CB7-BA58-CF74FF6A7642" title="使用crsctl start resource命令启动资源。">启动应用资源</a></p>
                     </li>
                     <li>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-5C4571CE-80D9-47BB-9B2D-DFEA64A5FF97" title="使用crsctl relocate resource命令重定位应用程序和应用程序资源。">重新定位应用程序和应用程序资源</a></p>
                     </li>
                     <li>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-DD9C9DF4-073A-4D3B-8A6F-C19C46E42348" title="使用crsctl stop resource命令停止应用程序资源。">停止应用程序和应用程序资源</a></p>
                     </li>
                     <li>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-91DFC89B-25FB-4C7E-83EA-27C8F32C03F6" title="使用crsctl status resource命令显示有关群集服务器上的应用程序和资源的状态信息。">显示Clusterware应用程序和应用程序资源状态信息</a></p>
                     </li>
                  </ul>
               </div><a id="CWADD91316"></a><div class="props_rev_3"><a id="GUID-4100AC56-4AA4-40C8-9020-96A3B76BF099" name="GUID-4100AC56-4AA4-40C8-9020-96A3B76BF099"></a><h4 id="CWADD-GUID-4100AC56-4AA4-40C8-9020-96A3B76BF099" class="sect4">注册应用程序资源</h4>
                  <div>
                     <p>您使用Oracle Clusterware管理的每个应用程序都已注册并作为资源存储在OCR中。</p>
                     <div class="section">
                        <p>使用<code class="codeph">crsctl add resource</code>命令在OCR中注册应用程序。例如，输入以下命令以注册上一个示例中的Apache Web服务器应用程序：</p><pre class="pre codeblock"><code>$ crsctl add resource myApache -type cluster_resource -group <span class="variable" translate="no">group_name</span> -attr“ACTION_SCRIPT = / opt / cluster / scripts / myapache.scr，PLACEMENT = restricted，SERVER_POOLS = <span class="variable" translate="no">server_pool_list</span> ，CHECK_INTERVAL = 30，RESTART_ATTEMPTS = 2，START_DEPENDENCIES = hard（appsvip）， STOP_DEPENDENCIES =硬（appsvip）”</code></pre><p>在前面的示例中，您可以通过指定<code class="codeph">-group</code>参数将资源分配给资源组。
                        </p>
                        <p>如果修改资源，则通过运行<code class="codeph">crsctl modify resource</code>命令更新OCR。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="oracle-clusterware-control-crsctl-utility-reference.html#GUID-7089B6C0-8701-42E6-B896-674E5E2A06F9" title="注册要由Oracle Clusterware管理的资源。">crsctl添加资源</a></li>
                           <li><a href="oracle-clusterware-control-crsctl-utility-reference.html#GUID-F73393B0-E1FE-4CA6-996D-60A41A4FD5A1" title="修改Oracle Clusterware中特定资源的属性。">crsctl修改资源</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD91317"></a><div class="props_rev_3"><a id="GUID-0275D805-AF9E-4CB7-BA58-CF74FF6A7642" name="GUID-0275D805-AF9E-4CB7-BA58-CF74FF6A7642"></a><h4 id="CWADD-GUID-0275D805-AF9E-4CB7-BA58-CF74FF6A7642" class="sect4">启动应用资源</h4>
                  <div>
                     <p>使用<code class="codeph">crsctl start resource</code>命令<code class="codeph">crsctl start resource</code> 。
                     </p>
                     <div class="section">
                        <p>手动启动或停止Oracle Clusterware之外的资源可能会使资源状态无效。此外，Oracle Clusterware可能会尝试重新启动您执行手动停止操作的资源。</p>
                        <p>要启动向Oracle Clusterware注册的应用程序资源，请使用<code class="codeph">crsctl start resource</code>命令。例如：</p><pre class="pre codeblock"><code>$ crsctl启动资源myApache</code></pre><p>每次调用操作程序时，该命令等待从操作程序接收成功或失败的通知。如果Oracle Clusterware由于超出其故障阈值而停止，则它可以启动应用程序资源。您必须先使用<code class="codeph">crsctl add resource</code>注册<code class="codeph">crsctl add resource</code>然后才能启动它。
                        </p>
                        <p>在<code class="codeph">crsctl start resource</code>上运行<code class="codeph">crsctl start resource</code>命令<code class="codeph">crsctl start resource</code>资源<code class="codeph">TARGET</code>值设置为<code class="codeph">ONLINE</code> 。 Oracle Clusterware尝试通过使用<code class="codeph">start</code>操作运行操作程序来更改状态以匹配<code class="codeph">TARGET</code> 。
                        </p>
                        <p>如果在该服务器上启动资源时群集服务器出现故障，请使用<code class="codeph">crsctl status resource</code>命令检查群集上资源的<code class="codeph">crsctl status resource</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="oracle-clusterware-control-crsctl-utility-reference.html#GUID-1A6774CF-FD5F-463E-817F-34E4466443C7" title="CRSCTL是您与Oracle Clusterware之间的接口，用于解析和调用Oracle Clusterware API的Oracle Clusterware API。有关使用CRSCTL命令行界面的信息。在Oracle RAC或Oracle Restart环境中使用这些命令。检查群集同步服务的状态。检查事件管理器的状态。检索本地服务器的主机名。注册要由Oracle Clusterware管理的资源。从Oracle Clusterware配置中删除资源。预测在不更改系统的情况下添加资源的效果。预测资源失败的后果。模拟重新定位资源而不更改系统。预测在不更改系统的情况下修改资源的效果。预测在不更改系统的情况下启动资源的影响。预测在不更改系统的情况下停止资源的效果。显示指定资源的用户和组权限。修改Oracle Clusterware中特定资源的属性。将资源重定位到群集中的另一台服务器。重新启动集群中的空闲资源，而不必运行两个命令来停止和启动资源。设置特定资源的权限。在群集中的特定服务器上启动空闲资源。获取任意数量的特定资源的状态和配置信息。停止运行资源。根据资源组类型创建资源组。对指定组的所有成员资源启动检查操作。从Oracle Clusterware中删除一个或多个资源组。预测添加资源组而不更改系统的影响。预测资源失败的后果。预测在不更改系统的情况下重新定位资源组的效果。预测启动资源组而不更改系统的影响。预测在不更改系统的情况下停止资源组的效果。将资源组及其成员资源的完整信息和属性导出到脚本文件。修改资源组以添加属性或更新现有属性的值。将联机资源组从源服务器重定位到目标服务器。在它们当前所在的服务器上重新启动资源组。在特定或预配置的服务器或服务器池上启动一个或多个资源组。显示资源组的状态。在可选指定的预配置服务器或服务器池上停止一个或多个资源组。在Oracle Clusterware中注册新的资源组类型。从Oracle Clusterware中删除一个或多个资源组类型。修改资源组类型以添加属性或更新现有属性的值。返回特定模块的跟踪设置。设置特定模块的跟踪参数。在Oracle Clusterware中创建资源类型。从Oracle Clusterware配置中删除资源类型。获得特定资源类型的权限。修改现有资源类型。设置特定资源类型的资源的权限。获取一个或多个特定资源类型的配置信息。创建并添加用户到钱包。从钱包中删除钱包或用户。修改特定钱包中特定用户的密码。从钱包中查询低权限用户。您只能在Oracle RAC环境中使用以下命令。对特定资源执行特定操作。添加服务器类别。删除服务器类别。修改现有服务器类别。获取有关服务器类别的信息。从群集中的任何节点检查Oracle Clusterware堆栈的状态。在群集中的任何节点上运行时启动Oracle Clusterware堆栈。在群集中的任何节点上运行命令时，停止群集中的所有服务器或特定服务器上的Oracle Clusterware堆栈。获取集群类信息。显示集群配置信息。从用于保护节点间通信的禁用密码套件列表添加密码套件或从中删除密码套件。确定群集是否为扩展群集。获取Oracle Flex Cluster中Hub节点的值。设置Oracle Flex Cluster的最大Hub节点数。确定是否为Oracle Flex Clusters配置了群集或获取当前状态。将标准群集更改为Oracle Flex群集。显示当前群集名称。使用crsctl add cluster site命令将站点添加到扩展群集。使用crsctl delete cluster site命令从扩展群集中删除特定站点。修改扩展群集中站点的配置。显示扩展群集中的站点信息。列出传输层安全性使用的可用密码套件，用于保护节点间通信。使用crsctl get cluster type命令确定群集是Oracle Flex群集还是应用程序群集。设置集群的类型。crsctl get cpu equivalency命令获取CPU_EQUIVALENCY服务器配置属性的值。crsctl set cpu equivalency命令为CPU_EQUIVALENCY服务器配置属性设置一个值。检查本地服务器上的Oracle高可用性服务和Oracle Clusterware堆栈的状态。显示Oracle高可用性服务自动启动配置。在服务器引导时阻止Oracle高可用性服务的自动启动。在服务器引导时启用Oracle高可用性服务的自动启动。在本地服务器上启动Oracle High Availability Services。在本地服务器上停止Oracle高可用性服务。显示群集中运行的Oracle Clusterware软件的活动版本和已配置的修补程序级别。将用户添加到群集管理员列表中。从Oracle Clusterware管理员列表中删除用户。显示具有Oracle Clusterware管理权限的用户列表。获取Oracle Clusterware自动资源启动条件的值。设置Oracle Clusterware自动资源启动条件。显示在修补节点时在Grid Home修补程序存储库中更新的修补程序级别。显示存储在本地节点上的二进制文件中的Oracle Clusterware软件的版本。使用crsctl query crs site命令确定特定主机或磁盘所属的站点。显示已安装的Oracle Clusterware的已配置修补程序级别。显示已在指定节点上成功启动的软件的最新版本。获取特定Cluster Synchronization Services参数的值。引发许多特定节点。设置Cluster Synchronization Services参数的值。取消许多服务器。取消设置Cluster Synchronization Services参数的值并将其恢复为默认值。检索存储在本地智能平台管理接口（IPMI）设备的Oracle本地注册表中的地址。存储Oracle本地注册表中本地智能平台管理接口（IPMI）设备的地址。存储Oracle本地注册表中智能平台管理界面（IPMI）管理员的登录凭据。确定本地服务器上的Oracle Clusterware是否已配置为使用IPMI进行故障隔离。清除Oracle本地注册表中以前存储的所有IPMI配置（登录凭据和IP地址）。确定本地系统上是否存在智能平台管理接口（IPMI）驱动程序。列出禁用自动重新启动群集同步服务的问题。发生特定问题时停止自动重新启动群集同步服务。从Oracle Clusterware配置中删除投票文件。显示群集同步服务使用的投票文件，投票文件的状态以及磁盘的位置，无论它们是存储在Oracle ASM中还是存储在其他位置。检查群集时间同步服务的状态。在指定端口的网络上发送DHCP发现数据包。如果网络上存在DHCP服务器，则它们会响应发现消息并且命令成功。显示Oracle Clusterware代理用于从DHCP服务器获取已配置群集资源的IP地址的客户端ID。VIP类型是必需的。向特定客户端ID发送DHCP租约释放请求，并将网络上的释放数据包发送到特定端口。将网络上的DHCP请求报文发送到指定端口。替换用于查找投票文件的现有发现字符串。获取DNS查找具有指定DNS服务器的名称返回的地址列表。使用指定的子网掩码在指定接口上启动给定的IP名称或IP地址。检查网络上的给定IP地址是否已启动。使用指定的子网掩码停止指定接口上的给定IP名称或IP地址。列出可以调试的模块的组件。为新成员集群创建配置部署文件。删除成员集群配置。显示成员集群的配置。从群集中删除节点。获取本地节点的名称。获取群集中节点的已配置节点角色。将配置策略添加到策略集。从策略集中删除配置策略。预测在不更改系统的情况下激活特定策略的效果。修改现有配置策略。获取配置策略的状态和定义。以文本文件的形式创建一个反映服务器池配置的策略集。修改现有策略集。获取策略集中的当前策略，包括访问控制列表，该列表管理谁可以修改集，最后激活的策略以及现在生效的配置（称为当前策略）。在特定资源的特定于应用程序的代理程序内启动检查操作。将资源重定位到群集中的另一台服务器。检查RESOURCE_USE_ENABLED服务器配置参数的当前设置值。为运行此命令的服务器设置RESOURCE_USE_ENABLED服务器配置参数的值。将Oracle Clusterware和Oracle ASM转换为滚动补丁模式。将Oracle Clusterware和Oracle ASM转换为滚动补丁模式。将Oracle Clusterware和Oracle ASM转换为滚动升级模式。模拟添加服务器而不更改系统。预测删除服务器而不更改系统的影响。预测在不更改系统的情况下将服务器重定位到其他服务器池的影响。修改特定服务器的配置。将服务器重定位到其他服务器池。获取一个或多个特定服务器的状态和配置信息。获取CSS_CRITICAL服务器属性的当前配置值设置CSS_CRITICAL服务器属性的配置值。检查SERVER_LABEL服务器属性的当前设置值。为运行此命令的服务器设置SERVER_LABEL服务器配置属性的配置值。添加用于将非数据库资源（例如应用程序服务器）托管到Oracle Clusterware的服务器池。从Oracle Clusterware配置中删除服务器池。预测添加服务器池而不更改系统的影响。模拟删除服务器池而不更改系统。使用crsctl eval modify serverpool命令可预测修改服务器池的效果，而无需更改系统。此命令可能对群集管理员有用。检索特定服务器池的权限。修改现有服务器池。设置特定服务器池的权限。检索一个或多个特定服务器池的状态和配置信息。验证守护程序是否可以侦听指定的地址和端口。启动将侦听指定IP地址和端口的测试DNS服务器。查询在指定地址和本地主机名上运行的测试DNS服务器。停止测试DNS服务器。移动或替换现有的投票文件。您只能在Oracle Restart环境中使用这些命令。检查ohasd的状态。显示服务器上Oracle高可用性服务堆栈的自动启动配置。在服务器启动时禁用Oracle High Availability Services堆栈的自动启动。在服务器启动时启用Oracle High Availability Services堆栈的自动启动。显示存储在本地节点上的二进制文件中的Oracle Clusterware软件的发行版本。显示本地节点上的软件版本。在本地服务器上启动Oracle High Availability Services。在本地服务器上停止Oracle高可用性服务。您可以使用crsctl set log命令作为root用户，以便为群集就绪服务（CRS），群集同步服务（CSS），事件管理器（EVM）和群集件子组件启用动态调试。设置Oracle Clusterware的日志级别。您可以通过设置环境变量或运行crsctl set log命令来启用Oracle Clusterware模块及其组件和资源的调试。">Oracle Clusterware Control（CRSCTL）实用程序参考</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD91319"></a><div class="props_rev_3"><a id="GUID-5C4571CE-80D9-47BB-9B2D-DFEA64A5FF97" name="GUID-5C4571CE-80D9-47BB-9B2D-DFEA64A5FF97"></a><h4 id="CWADD-GUID-5C4571CE-80D9-47BB-9B2D-DFEA64A5FF97" class="sect4">重新定位应用程序和应用程序资源</h4>
                  <div>
                     <p>使用<code class="codeph">crsctl relocate resource</code>命令重定位应用程序和应用程序资源。
                     </p>
                     <div class="section">
                        <p>例如，要将Apache Web服务器应用程序重定位到名为<code class="codeph">rac2</code>的服务器，请运行以下命令：</p><pre class="oac_no_warn" dir="ltr">#crsctl重定位资源myApache -n rac2</pre><p>每次调用操作程序时， <code class="codeph">crsctl relocate resource</code> <code class="codeph">SCRIPT_TIMEOUT</code> resource命令都会等待<code class="codeph">SCRIPT_TIMEOUT</code>资源属性值指定的持续时间，以从<code class="codeph">SCRIPT_TIMEOUT</code>接收成功或失败的通知。如果以下情况，重定位尝试失败</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>应用程序需要在初始服务器上运行的资源</p>
                           </li>
                           <li>
                              <p>需要指定资源的应用程序在初始服务器上运行</p>
                           </li>
                        </ul>
                        <p>要重定位应用程序及其所需资源，请将<code class="codeph">-f</code>选项与<code class="codeph">crsctl relocate resource</code>命令一起使用。Oracle Clusterware重定位或启动应用程序所需的所有资源，而不管其状态如何。
                        </p>
                        <p>您还可以使用<code class="codeph">crsctl relocate resourcegroup</code>命令重新定位资源组，该命令在重定位目标服务器上的资源组之前首先停止资源组中的资源。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5C4571CE-80D9-47BB-9B2D-DFEA64A5FF97__GUID-51EE85F1-B95F-4AE4-985D-618FDC9C0BE2">在线搬迁</p>
                        <div class="p">即使在重定位操作期间，某些资源或资源组也必须保持高可用性。您可以将RELOCATE_KIND资源属性（也可以与资源组一起使用）设置为联机（ <code class="codeph">RELOCATE_KIND=online</code> ），这将在停止之前在目标服务器上启动新资源实例（或属于资源组的资源的多个实例）当您运行<code class="codeph">crsctl relocate resource</code>或<code class="codeph">crsctl relocate resourcegroup</code>命令时，它在原始服务器上。
                           <div class="infoboxnote" id="GUID-5C4571CE-80D9-47BB-9B2D-DFEA64A5FF97__GUID-3D97A29B-B9FD-4C6C-AE70-F338B990AF83">
                              <p class="notep1">注意：</p>在使用联机重定位之前，请确保资源可以管理在线重定位期间启动的额外资源实例。
                           </div>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="CWADD91320"></a><div class="props_rev_3"><a id="GUID-DD9C9DF4-073A-4D3B-8A6F-C19C46E42348" name="GUID-DD9C9DF4-073A-4D3B-8A6F-C19C46E42348"></a><h4 id="CWADD-GUID-DD9C9DF4-073A-4D3B-8A6F-C19C46E42348" class="sect4">停止应用程序和应用程序资源</h4>
                  <div>
                     <p>使用<code class="codeph">crsctl stop resource</code>命令停止应用程序资源。
                     </p>
                     <div class="section">
                        <p>该命令将资源<code class="codeph">TARGET</code>值设置为<code class="codeph">OFFLINE</code> 。由于Oracle Clusterware始终尝试将资源状态与其目标进行匹配，因此Oracle Clusterware子系统会停止该应用程序。以下示例停止Apache Web服务器：</p><pre class="pre codeblock"><code>#crsctl停止资源myApache</code></pre><p>除非使用force（ <code class="codeph">-f</code> ）选项，否则如果其他资源对其具有硬停止依赖关系，则无法停止资源。如果对其他资源所依赖的资源使用<code class="codeph">crsctl stop resource <span class="variable" translate="no">resource_name</span> -f</code>命令，并且这些资源正在运行，则Oracle Clusterware会停止资源<span class="italic">以及</span>依赖于您要停止的资源的所有资源。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="CWADD91321"></a><div class="props_rev_3"><a id="GUID-91DFC89B-25FB-4C7E-83EA-27C8F32C03F6" name="GUID-91DFC89B-25FB-4C7E-83EA-27C8F32C03F6"></a><h4 id="CWADD-GUID-91DFC89B-25FB-4C7E-83EA-27C8F32C03F6" class="sect4">显示Clusterware应用程序和应用程序资源状态信息</h4>
                  <div>
                     <p>使用<code class="codeph">crsctl status resource</code>命令显示有关群集服务器上的应用程序和资源的状态信息。
                     </p>
                     <div class="section">
                        <p>以下示例显示Apache Web服务器应用程序的状态信息：</p><pre class="pre codeblock"><code>#crsctl status resource myApache NAME = myApache TYPE = cluster_resource TARGET = ONLINE STATE = ONLINE on server010</code></pre><p>此命令返回的其他信息包括以下内容：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>资源重新启动的次数</p>
                           </li>
                           <li>
                              <p>在失败间隔内资源失败的次数</p>
                           </li>
                           <li>
                              <p>资源重新启动或失败的最大次数</p>
                           </li>
                           <li>
                              <p>资源的目标状态和正常状态信息</p>
                           </li>
                        </ul>
                        <p>将<code class="codeph">-f</code>选项与<code class="codeph">crsctl status resource <span class="variable" translate="no">resource_name</span></code>命令配合使用可查看特定资源的完整信息。
                        </p>
                        <p>输入以下命令以表格格式查看有关<span class="italic">所有</span>应用程序和资源的信息：</p><pre class="pre codeblock"><code>#crsctl status resource -t</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="oracle-clusterware-control-crsctl-utility-reference.html#GUID-1A6774CF-FD5F-463E-817F-34E4466443C7" title="CRSCTL是您与Oracle Clusterware之间的接口，用于解析和调用Oracle Clusterware API的Oracle Clusterware API。有关使用CRSCTL命令行界面的信息。在Oracle RAC或Oracle Restart环境中使用这些命令。检查群集同步服务的状态。检查事件管理器的状态。检索本地服务器的主机名。注册要由Oracle Clusterware管理的资源。从Oracle Clusterware配置中删除资源。预测在不更改系统的情况下添加资源的效果。预测资源失败的后果。模拟重新定位资源而不更改系统。预测在不更改系统的情况下修改资源的效果。预测在不更改系统的情况下启动资源的影响。预测在不更改系统的情况下停止资源的效果。显示指定资源的用户和组权限。修改Oracle Clusterware中特定资源的属性。将资源重定位到群集中的另一台服务器。重新启动集群中的空闲资源，而不必运行两个命令来停止和启动资源。设置特定资源的权限。在群集中的特定服务器上启动空闲资源。获取任意数量的特定资源的状态和配置信息。停止运行资源。根据资源组类型创建资源组。对指定组的所有成员资源启动检查操作。从Oracle Clusterware中删除一个或多个资源组。预测添加资源组而不更改系统的影响。预测资源失败的后果。预测在不更改系统的情况下重新定位资源组的效果。预测启动资源组而不更改系统的影响。预测在不更改系统的情况下停止资源组的效果。将资源组及其成员资源的完整信息和属性导出到脚本文件。修改资源组以添加属性或更新现有属性的值。将联机资源组从源服务器重定位到目标服务器。在它们当前所在的服务器上重新启动资源组。在特定或预配置的服务器或服务器池上启动一个或多个资源组。显示资源组的状态。在可选指定的预配置服务器或服务器池上停止一个或多个资源组。在Oracle Clusterware中注册新的资源组类型。从Oracle Clusterware中删除一个或多个资源组类型。修改资源组类型以添加属性或更新现有属性的值。返回特定模块的跟踪设置。设置特定模块的跟踪参数。在Oracle Clusterware中创建资源类型。从Oracle Clusterware配置中删除资源类型。获得特定资源类型的权限。修改现有资源类型。设置特定资源类型的资源的权限。获取一个或多个特定资源类型的配置信息。创建并添加用户到钱包。从钱包中删除钱包或用户。修改特定钱包中特定用户的密码。从钱包中查询低权限用户。您只能在Oracle RAC环境中使用以下命令。对特定资源执行特定操作。添加服务器类别。删除服务器类别。修改现有服务器类别。获取有关服务器类别的信息。从群集中的任何节点检查Oracle Clusterware堆栈的状态。在群集中的任何节点上运行时启动Oracle Clusterware堆栈。在群集中的任何节点上运行命令时，停止群集中的所有服务器或特定服务器上的Oracle Clusterware堆栈。获取集群类信息。显示集群配置信息。从用于保护节点间通信的禁用密码套件列表添加密码套件或从中删除密码套件。确定群集是否为扩展群集。获取Oracle Flex Cluster中Hub节点的值。设置Oracle Flex Cluster的最大Hub节点数。确定是否为Oracle Flex Clusters配置了群集或获取当前状态。将标准群集更改为Oracle Flex群集。显示当前群集名称。使用crsctl add cluster site命令将站点添加到扩展群集。使用crsctl delete cluster site命令从扩展群集中删除特定站点。修改扩展群集中站点的配置。显示扩展群集中的站点信息。列出传输层安全性使用的可用密码套件，用于保护节点间通信。使用crsctl get cluster type命令确定群集是Oracle Flex群集还是应用程序群集。设置集群的类型。crsctl get cpu equivalency命令获取CPU_EQUIVALENCY服务器配置属性的值。crsctl set cpu equivalency命令为CPU_EQUIVALENCY服务器配置属性设置一个值。检查本地服务器上的Oracle高可用性服务和Oracle Clusterware堆栈的状态。显示Oracle高可用性服务自动启动配置。在服务器引导时阻止Oracle高可用性服务的自动启动。在服务器引导时启用Oracle高可用性服务的自动启动。在本地服务器上启动Oracle High Availability Services。在本地服务器上停止Oracle高可用性服务。显示群集中运行的Oracle Clusterware软件的活动版本和已配置的修补程序级别。将用户添加到群集管理员列表中。从Oracle Clusterware管理员列表中删除用户。显示具有Oracle Clusterware管理权限的用户列表。获取Oracle Clusterware自动资源启动条件的值。设置Oracle Clusterware自动资源启动条件。显示在修补节点时在Grid Home修补程序存储库中更新的修补程序级别。显示存储在本地节点上的二进制文件中的Oracle Clusterware软件的版本。使用crsctl query crs site命令确定特定主机或磁盘所属的站点。显示已安装的Oracle Clusterware的已配置修补程序级别。显示已在指定节点上成功启动的软件的最新版本。获取特定Cluster Synchronization Services参数的值。引发许多特定节点。设置Cluster Synchronization Services参数的值。取消许多服务器。取消设置Cluster Synchronization Services参数的值并将其恢复为默认值。检索存储在本地智能平台管理接口（IPMI）设备的Oracle本地注册表中的地址。存储Oracle本地注册表中本地智能平台管理接口（IPMI）设备的地址。存储Oracle本地注册表中智能平台管理界面（IPMI）管理员的登录凭据。确定本地服务器上的Oracle Clusterware是否已配置为使用IPMI进行故障隔离。清除Oracle本地注册表中以前存储的所有IPMI配置（登录凭据和IP地址）。确定本地系统上是否存在智能平台管理接口（IPMI）驱动程序。列出禁用自动重新启动群集同步服务的问题。发生特定问题时停止自动重新启动群集同步服务。从Oracle Clusterware配置中删除投票文件。显示群集同步服务使用的投票文件，投票文件的状态以及磁盘的位置，无论它们是存储在Oracle ASM中还是存储在其他位置。检查群集时间同步服务的状态。在指定端口的网络上发送DHCP发现数据包。如果网络上存在DHCP服务器，则它们会响应发现消息并且命令成功。显示Oracle Clusterware代理用于从DHCP服务器获取已配置群集资源的IP地址的客户端ID。VIP类型是必需的。向特定客户端ID发送DHCP租约释放请求，并将网络上的释放数据包发送到特定端口。将网络上的DHCP请求报文发送到指定端口。替换用于查找投票文件的现有发现字符串。获取DNS查找具有指定DNS服务器的名称返回的地址列表。使用指定的子网掩码在指定接口上启动给定的IP名称或IP地址。检查网络上的给定IP地址是否已启动。使用指定的子网掩码停止指定接口上的给定IP名称或IP地址。列出可以调试的模块的组件。为新成员集群创建配置部署文件。删除成员集群配置。显示成员集群的配置。从群集中删除节点。获取本地节点的名称。获取群集中节点的已配置节点角色。将配置策略添加到策略集。从策略集中删除配置策略。预测在不更改系统的情况下激活特定策略的效果。修改现有配置策略。获取配置策略的状态和定义。以文本文件的形式创建一个反映服务器池配置的策略集。修改现有策略集。获取策略集中的当前策略，包括访问控制列表，该列表管理谁可以修改集，最后激活的策略以及现在生效的配置（称为当前策略）。在特定资源的特定于应用程序的代理程序内启动检查操作。将资源重定位到群集中的另一台服务器。检查RESOURCE_USE_ENABLED服务器配置参数的当前设置值。为运行此命令的服务器设置RESOURCE_USE_ENABLED服务器配置参数的值。将Oracle Clusterware和Oracle ASM转换为滚动补丁模式。将Oracle Clusterware和Oracle ASM转换为滚动补丁模式。将Oracle Clusterware和Oracle ASM转换为滚动升级模式。模拟添加服务器而不更改系统。预测删除服务器而不更改系统的影响。预测在不更改系统的情况下将服务器重定位到其他服务器池的影响。修改特定服务器的配置。将服务器重定位到其他服务器池。获取一个或多个特定服务器的状态和配置信息。获取CSS_CRITICAL服务器属性的当前配置值设置CSS_CRITICAL服务器属性的配置值。检查SERVER_LABEL服务器属性的当前设置值。为运行此命令的服务器设置SERVER_LABEL服务器配置属性的配置值。添加用于将非数据库资源（例如应用程序服务器）托管到Oracle Clusterware的服务器池。从Oracle Clusterware配置中删除服务器池。预测添加服务器池而不更改系统的影响。模拟删除服务器池而不更改系统。使用crsctl eval modify serverpool命令可预测修改服务器池的效果，而无需更改系统。此命令可能对群集管理员有用。检索特定服务器池的权限。修改现有服务器池。设置特定服务器池的权限。检索一个或多个特定服务器池的状态和配置信息。验证守护程序是否可以侦听指定的地址和端口。启动将侦听指定IP地址和端口的测试DNS服务器。查询在指定地址和本地主机名上运行的测试DNS服务器。停止测试DNS服务器。移动或替换现有的投票文件。您只能在Oracle Restart环境中使用这些命令。检查ohasd的状态。显示服务器上Oracle高可用性服务堆栈的自动启动配置。在服务器启动时禁用Oracle High Availability Services堆栈的自动启动。在服务器启动时启用Oracle High Availability Services堆栈的自动启动。显示存储在本地节点上的二进制文件中的Oracle Clusterware软件的发行版本。显示本地节点上的软件版本。在本地服务器上启动Oracle High Availability Services。在本地服务器上停止Oracle高可用性服务。您可以使用crsctl set log命令作为root用户，以便为群集就绪服务（CRS），群集同步服务（CSS），事件管理器（EVM）和群集件子组件启用动态调试。设置Oracle Clusterware的日志级别。您可以通过设置环境变量或运行crsctl set log命令来启用Oracle Clusterware模块及其组件和资源的调试。">Oracle Clusterware Control（CRSCTL）实用程序参考</a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="CWADD91322"></a><div class="props_rev_3"><a id="GUID-E343F418-6EC3-4C9A-8521-7DEDC3A9E715" name="GUID-E343F418-6EC3-4C9A-8521-7DEDC3A9E715"></a><h3 id="CWADD-GUID-E343F418-6EC3-4C9A-8521-7DEDC3A9E715" class="sect3">管理Oracle Clusterware资源的自动重启</h3>
               <div>
                  <p>您可以通过设置多个资源属性来阻止Oracle Clusterware自动重新启动资源。您还可以控制Oracle Clusterware如何管理资源的重启计数器。此外，您还可以自定义Oracle Clusterware对资源执行的<code class="codeph">start</code> ， <code class="codeph">stop</code>和<code class="codeph">check</code>操作的超时值。
                  </p>
                  <p>本节包括以下主题：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-C9E000F4-9F3B-4DD4-A874-77BE60239F3E" title="要管理自动重新启动，请使用AUTO_START资源属性指定Oracle Clusterware是否应在服务器重新启动时自动启动资源。">防止自动重启Oracle Clusterware资源</a></p>
                     </li>
                     <li>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-0BB62412-6627-4739-8D8A-940F40C6F9D2">自动管理重新启动尝试Oracle Clusterware资源的计数器</a></p>
                     </li>
                  </ul>
               </div><a id="CWADD91323"></a><div class="props_rev_3"><a id="GUID-C9E000F4-9F3B-4DD4-A874-77BE60239F3E" name="GUID-C9E000F4-9F3B-4DD4-A874-77BE60239F3E"></a><h4 id="CWADD-GUID-C9E000F4-9F3B-4DD4-A874-77BE60239F3E" class="sect4">防止自动重启Oracle Clusterware资源</h4>
                  <div>
                     <p>要管理自动重新启动，请使用<code class="codeph">AUTO_START</code>资源属性指定Oracle Clusterware是否应在服务器重新启动时自动启动资源。
                     </p>
                     <div class="section">
                        <p>服务器重新启动时，Oracle Clusterware会在服务器启动后立即尝试启动服务器上运行的资源。但是，如果资源所依赖的系统组件（例如卷管理器或文件系统）未运行，则资源启动可能会失败。如果Oracle Clusterware不管理资源所依赖的系统组件，则尤其如此。</p>
                        <div class="infoboxnote" id="GUID-C9E000F4-9F3B-4DD4-A874-77BE60239F3E__GUID-03A86DFB-503A-4F43-AF94-58358EBA64DE">
                           <p class="notep1">注意：</p>
                           <p>无论资源的<code class="codeph">AUTO_START</code>资源属性的值如何，如果另一资源对其具有硬启动依赖性或弱启动依赖性，或者资源对另一资源具有上拉启动依赖性，则资源可以启动。
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-64441104-69E2-4DE3-8C70-D31BDDCEB0E7">启动依赖关系</a></li>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-9C074F34-F180-4200-A99B-72186DAB56E1" title="每个INSTANCE_COUNT个资源实例的整数不同。资源组属性，包含标记为资源组关键的资源列表。描述了SERVER_POOLS资源属性。属于资源组的资源列表。当资源添加到组时，Oracle Clusterware会填充和更新此属性。">Oracle Clusterware资源参考</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD91324"></a><div class="props_rev_3"><a id="GUID-0BB62412-6627-4739-8D8A-940F40C6F9D2" name="GUID-0BB62412-6627-4739-8D8A-940F40C6F9D2"></a><h4 id="CWADD-GUID-0BB62412-6627-4739-8D8A-940F40C6F9D2" class="sect4">自动管理重新启动尝试Oracle Clusterware资源的计数器</h4>
                  <div>
                     <p>资源出现故障时，Oracle Clusterware会尝试在<code class="codeph">RESTART_ATTEMPTS</code>资源属性中指定的次数重新启动资源。请注意，此属性未指定重新启动失败资源的尝试次数（始终为一次尝试），而是Oracle Clusterware尝试将其故障转移之前资源在本地失败的次数。CRSD流程维护一个内部计数器，以跟踪Oracle Clusterware重新启动资源的频率。Oracle Clusterware尝试重新启动资源的次数反映在<code class="codeph">RESTART_COUNT</code>资源属性中。Oracle Clusterware可以根据资源的稳定性自动管理重启尝试计数器。<code class="codeph">UPTIME_THRESHOLD</code>资源属性确定资源必须保持联机的时间段，之后<code class="codeph">RESTART_COUNT</code>属性将重置为0。此外，如果用户重新定位或重新启动资源，或者资源故障转移到另一台服务器， <code class="codeph">RESTART_COUNT</code>资源属性将重置为0。
                     </p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Making Applications Highly Available Using Oracle Clusterware</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Clusterware Administration and Deployment Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Clusterware Administration and Deployment Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="clusterware-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-24T07:05:38-07:00">
      <meta name="dcterms.title" content="Clusterware Administration and Deployment Guide">
      <meta name="dcterms.dateCopyrighted" content="2007, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E95727-05">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="cloning-oracle-clusterware.html" title="Previous" type="text/html">
      <link rel="next" href="cluster-verification-utility-reference.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="CWADD">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="cloning-oracle-clusterware.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="cluster-verification-utility-reference.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Clusterware Administration and Deployment Guide</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Making Applications Highly Available Using Oracle Clusterware</li>
            </ol>
            <a id="GUID-13400D83-3FF4-482E-B7A7-41C864A491DC" name="GUID-13400D83-3FF4-482E-B7A7-41C864A491DC"></a><a id="CWADD91277"></a>
            
            <h2 id="CWADD-GUID-13400D83-3FF4-482E-B7A7-41C864A491DC" class="sect2"><span class="enumeration_chapter">9 </span>Making Applications Highly Available Using Oracle Clusterware
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>When an application, process, or server fails in a cluster, you want the disruption to be as short as possible, if not completely unknown to users. For example, when an application fails on a server, that application can be restarted on another server in the cluster, minimizing or negating any disruption in the use of that application. Similarly, if a server in a cluster fails, then all of the applications and processes running on that server must be able to fail over to another server to continue providing service to the users. Using the built-in <code class="codeph">generic_application</code> resource type or customizable scripts and application agent programs, and resource attributes that you assign to applications and processes, Oracle Clusterware can manage all these entities to ensure high availability.
               </p>
               <p>This chapter explains how to use Oracle Clusterware to start, stop, monitor, restart, and relocate applications. Oracle Clusterware is the underlying cluster solution for Oracle Real Application Clusters (Oracle RAC). The same functionality and principles you use to manage Oracle RAC databases are applied to the management of applications.</p>
               <p>This chapter includes the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-342D37E6-E73E-4A80-BEAC-699EC25E46C5" title="Oracle Clusterware manages applications and processes as resources that you register with Oracle Clusterware.A virtual machine is an environment created for a running operating system, known as a guest operating system. The virtual machine displays as a window on your computerâ€™s desktop which can be displayed in full-screen mode or remotely on another computer.A resource group is a container for a logically related group of resources.In Oracle Clusterware, a resource type is a template for a class of resources.Use CRSCTL to create resource groups, resource group types, and to add resources to resource groups.Oracle Clusterware runs all resource-specific commands through an entity called an agent.An action script defines one or more actions to start, stop, check, or clean resources.Register resources in Oracle Clusterware 12c using the crsctl add resource command.">Oracle Clusterware Resources and Agents</a></p>
                  </li>
                  <li>
                     <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-12757637-2D31-45C2-8253-B3DC95D90228" title="Oracle Clusterware manages resources and resource groups based on how you configure them to increase their availability.">Overview of Using Oracle Clusterware to Enable High Availability</a></p>
                  </li>
                  <li>
                     <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-031885D1-164F-4A71-9E9C-C7237DAE914B" title="This section presents examples of the procedures for registering an application as a resource in Oracle Clusterware.">Registering an Application as a Resource</a></p>
                  </li>
                  <li>
                     <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-F650245B-F6F4-4C51-801A-8871A0B80E1C" title="Each application that you manage with Oracle Clusterware is registered and stored as a resource in OCR.Start resources with the crsctl start resource command.Use the crsctl relocate resource command to relocate applications and application resources.Stop application resources with the crsctl stop resource command.Use the crsctl status resource command to display status information about applications and resources that are on cluster servers.">Managing Resources</a></p>
                  </li>
                  <li>
                     <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-E343F418-6EC3-4C9A-8521-7DEDC3A9E715" title="To manage automatic restarts, use the AUTO_START resource attribute to specify whether Oracle Clusterware should automatically start a resource when a server restarts.">Managing Automatic Restart of Oracle Clusterware Resources</a></p>
                  </li>
               </ul>
            </div><a id="CWADD92084"></a><div class="props_rev_3"><a id="GUID-342D37E6-E73E-4A80-BEAC-699EC25E46C5" name="GUID-342D37E6-E73E-4A80-BEAC-699EC25E46C5"></a><h3 id="CWADD-GUID-342D37E6-E73E-4A80-BEAC-699EC25E46C5" class="sect3">Oracle Clusterware Resources and Agents</h3>
               <div>
                  <p>This section discusses the framework that Oracle Clusterware uses to monitor and manage <a href="glossary.html#GUID-B375E495-7564-43CB-898D-7596D72CEFD7"><span class="xrefglossterm">resource</span></a>s, to ensure high application availability.
                  </p>
                  <p>This section includes the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-82BA6066-C22F-46B5-8333-7A007E94C6A8" title="Oracle Clusterware manages applications and processes as resources that you register with Oracle Clusterware.">Oracle Clusterware Resources</a></p>
                     </li>
                     <li>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-30DC08E5-72CE-4E93-B6D6-E209DEADF83E">Oracle Clusterware Resource Types</a></p>
                     </li>
                     <li>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-CD3442A5-D6A8-4370-ABDA-CB686A736D3C" title="Oracle Clusterware runs all resource-specific commands through an entity called an agent.">Agents in Oracle Clusterware</a></p>
                     </li>
                     <li>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-9055B23F-9D18-4CC4-8C64-7740D7E56DC8" title="An action script defines one or more actions to start, stop, check, or clean resources.">Action Scripts</a></p>
                     </li>
                     <li>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-A55586D4-3754-43F9-836D-32E75A334D49">Building an Agent</a></p>
                     </li>
                     <li>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-A907346B-96D2-485A-BD0C-51340222A612" title="Register resources in Oracle Clusterware 12c using the crsctl add resource command.">Registering a Resource in Oracle Clusterware</a></p>
                     </li>
                  </ul>
               </div><a id="CWADD91279"></a><div class="props_rev_3"><a id="GUID-82BA6066-C22F-46B5-8333-7A007E94C6A8" name="GUID-82BA6066-C22F-46B5-8333-7A007E94C6A8"></a><h4 id="CWADD-GUID-82BA6066-C22F-46B5-8333-7A007E94C6A8" class="sect4">Oracle Clusterware Resources</h4>
                  <div>
                     <p>Oracle Clusterware manages applications and processes as resources that you register with Oracle Clusterware.</p>
                     <div class="section">
                        <p>The number of resources you register with Oracle Clusterware to manage an application depends on the application. Applications that consist of only one process are usually represented by only one resource. For more complex applications that are built on multiple processes or components that may require multiple resources, you can create <a href="glossary.html#GUID-5E9EA9AE-DD01-4109-9FAC-54382A43DB85"><span class="xrefglossterm">resource group</span></a>s.
                        </p>
                        <p>Each resource is based on a resource type that serves as a template. You can configure how Oracle Clusterware will place an application in the cluster by specifying an explicit list of servers, or by using features such as server pools and policies. Relationships between applications and components are expressed using dependencies. Oracle Clusterware manages the application by performing operations on the resources, and the resource state represents the availability of the application.</p>
                        <p>When you register an application as a resource in Oracle Clusterware, in addition to actually adding the resource to the system, you define how Oracle Clusterware manages the application using resource attributes you ascribe to the resource. The frequency with which the resource is checked and the number of attempts to restart a resource on the same server after a failure before attempting to start it on another server (failover) are examples of resource attributes. The registration information also includes a path to an action script or application-specific action program that Oracle Clusterware calls to start, stop, check, and clean up the application.</p>
                        <p>An action script is a shell script (a batch script in Windows) that a generic script agent provided by Oracle Clusterware calls. An application-specific agent is usually a C or C++ program that calls Oracle Clusterware-provided APIs directly.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-82BA6066-C22F-46B5-8333-7A007E94C6A8__GUID-C054D61E-26B2-400A-9630-F0C53A627FC6">Critical Resources</p>
                        <p>Some large enterprise applications modeled as resource groups can comprise multiple resources representing application or infrastructure components. If any resource in the resource group fails, then Oracle Clusterware must fail the entire resource group over to another server in the cluster.</p>
                        <p>You can mark a resource as critical for its resource group by specifying the name of the resource in the CRITICAL_RESOURCES attribute of the resource group.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-9C074F34-F180-4200-A99B-72186DAB56E1" title="An integer different for each of the INSTANCE_COUNT resource instances.Resource group attribute that contains a list of resources marked critical for a resource group.The SERVER_POOLS resource attribute is described.List of resources belonging to a resource group. Oracle Clusterware populates and updates this attribute when resources are added to the group.">Oracle Clusterware Resource Reference</a></li>
                           <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614" title="A resource group is a container for a logically related group of resources.">Resource Groups</a></li>
                        </ul>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-FE34587A-A42E-4808-942E-A87D14057D0C" name="GUID-FE34587A-A42E-4808-942E-A87D14057D0C"></a><h5 id="CWADD-GUID-FE34587A-A42E-4808-942E-A87D14057D0C" class="sect5">Virtual Machine Resources</h5>
                     <div>
                        <p>A virtual machine is an environment created for a running operating system, known as a guest operating system. The virtual machine displays as a window on your computerâ€™s desktop which can be displayed in full-screen mode or remotely on another computer.</p>
                        <p>A virtual machine is, essentially, a set of parameters that determines its behavior, analogous to computer system hardware. Parameters include hardware settings (such as how much memory the virtual machine has) as well as state information (such as whether the virtual machine is currently running).</p>
                        <p>Black-box virtual machines are virtual machines whose contents are unknown to the management interface. All that is known about black-box virtual machines is the virtual hardware they contain: the number of CPUs, the amount of RAM, attached disks, and attached network interfaces. The contents of the hardware however, are unknown. For example, there may be a number of disks attached, but it is not known which operating system is installed on them, nor is it known whether the network cards are configured.</p>
                        <p>You can manage black-box Oracle virtual machines on physical hardware using Oracle Clusterware, which provides high availability and ease of management of virtual machines.</p>
                        <div class="infoboxnote" id="GUID-FE34587A-A42E-4808-942E-A87D14057D0C__GUID-FBF3EF20-AEDF-4DAE-8A18-0329D371F69A">
                           <p class="notep1">Note:</p>This is specific to virtual machines, and does not apply to Oracle VM VirtualBox, or any other Oracle VM product.
                        </div>
                        <p>As an example, in following figure, there are two physical computers, each of which has multiple virtual machines running on it. One of the computers, for each physical host, is an Oracle Grid Infrastructure virtual machine (GIVM).</p>
                        <p>The GIVMs, themselves, form an Oracle Clusterware cluster, and within this cluster are four black-box virtual machine Oracle Clusterware resources, each monitoring one of the non-GIVM virtual machines. The cluster is not aware of the contents of the virtual machines it is monitoring because they are black-box virtual machines. In this example, if one of the physical hosts goes down, then its GIVM would also go down, causing the GIVM to leave the cluster, which, in turn, causes the resources to fail over to the other GIVM, which starts the black-box virtual machines on the new physical host.</p>
                        <div class="figure" id="GUID-FE34587A-A42E-4808-942E-A87D14057D0C__GUID-038BCF93-374A-4812-93E1-EEFEBF379B84">
                           <p class="titleinfigure">Figure 9-1 Highly Available Virtual Machines in Oracle Database Appliance</p><img src="img/cwadd_3v_007.png" alt="Description of Figure 9-1 follows" title="Description of Figure 9-1 follows" longdesc="img_text/cwadd_3v_007.html"><br><a href="img_text/cwadd_3v_007.html">Description of "Figure 9-1 Highly Available Virtual Machines in Oracle Database Appliance"</a></div>
                        <!-- class="figure" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-FE34587A-A42E-4808-942E-A87D14057D0C__GUID-35883768-18A8-459B-B7E7-E693FA44F540">Virtual Machine Architecture</p>
                           <p>Oracle virtual machines consist of two parts: the virtual machine server and the virtual machine manager. The virtual machine server is a minimal operating system installed on bare hardware that uses a Xen hypervisor to manage guests. The server has an agent process, the Oracle virtual machine agent, which acts as an intermediary through which the virtual machine manager manipulates domains on the server.</p>
                           <p>The virtual machine manager is a web-based management console that is used to manage virtual machine servers and their virtual machines. The virtual machine manager requires a database as well as an Oracle WebLogic Server in order to run, and is necessary for Oracle-supported management of the Oracle virtual machine server. The management domain is supposed to be as small as possible and, therefore, the virtual machine manager may not be installed there. You must install the virtual machine manager on another host, which means either having another physical computer or manually creating a temporary virtual machine using the Xen <code class="codeph">xm</code> commands.
                           </p>
                           <p>The Oracle virtual machine manager is the sole interface for managing virtual machines. All requests are directed through it, including all APIs and utilities.</p>
                           <p>The resource type for a virtual machine resource (which is an Oracle Clusterware resource) is similar to the following:</p><pre class="pre codeblock"><code>ATTRIBUTE=DESCRIPTION
TYPE=string
DEFAULT_VALUE="Resource type for VM Agents"
ATTRIBUTE=AGENT_FILENAME
TYPE=string
DEFAULT_VALUE=%CRS_HOME%/bin/oraagent%CRS_EXE_SUFFIX%
ATTRIBUTE=CHECK_INTERVAL
DEFAULT_VALUE=1
TYPE=int
ATTRIBUTE=OVMM_VM_ID
TYPE=string
DEFAULT_VALUE=''
ATTRIBUTE=OVMM_VM_NAME
TYPE=string
DEFAULT_VALUE=''
ATTRIBUTE=VM
TYPE=strings</code></pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614" name="GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614"></a><h5 id="CWADD-GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614" class="sect5">Resource Groups</h5>
                     <div>
                        <p>A resource group is a container for a logically related group of resources.</p>
                        <p>An application is modeled as a resource group that contains the application resource and related application resources (such as WebServer), and infrastructure resources (such as disk groups and VIPs). A resource group provides a logical and intuitive entity for high availability modeling of all classes of applications.</p>
                        <p>You create resource groups using CRSCTL, and then add resources to the resource group. A resource group provides a set of attributes that cover naming, description, and common placement and failover parameter values for the resources that are members of the resource group.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614__GUID-44E75E33-3A7D-4722-AAE5-7107D56D00DF">Resource Group Principles</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>You create a resource group based on a resource group type.</p>
                              </li>
                              <li>
                                 <p>A resource can be member of only one resource group. You can specify a resource group for a resource when you create the resource.</p>
                                 <p>If you do not specify a resource group when you create a resource, then the resource becomes a member of an automatic resource group created for that resource. You can later add the resource to a different resource group.</p>
                              </li>
                              <li>
                                 <p>Resource groups are aware of critical resources, and the state of the resource group is solely determined by the state of its critical resources.</p>
                                 <p>You can remove a non-critical resource from a resource group (subject to dependency checks) and, at a later time, add it to another resource group.</p>
                              </li>
                              <li>
                                 <p>Resource groups have cardinality to specify the number of instances of the resource group that can simultaneously run in the cluster.</p>
                              </li>
                              <li>
                                 <p>All member resources of a running resource group instance are located on the same server.</p>
                              </li>
                              <li>
                                 <p>Oracle Clusterware restarts a resource group in the event of failure and then relocates the resource group to another server in the event of local restart failures.</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614__GUID-6CED2C6F-E962-4FD0-82CC-92CADC30FFCE">Automatic Resource Groups</p>
                           <p>If you create a resource without specifying a resource group, then Oracle Clusterware implicitly and automatically adds the resource to a resource group with the same name as the resource.</p>
                           <p>An automatic resource group is created for each resource that is not explicitly added to a resource group. You can create resources without using resource groups and work with Oracle Clusterware without disruption. Using resource groups, however, enables you to define relationships to infrastructure and application resources (through automatic resource groups) created by SRVM or other existing utilities.</p>
                           <p>An automatic resource group is solely described by the resource that it has been created for, and cannot be modified by an administrator. Resources that you create without specifying a resource group can be added to a resource group at a later time. Oracle Clusterware deletes the automatic resource group to which the resource belongs when the resource has been explicitly added to a resource group.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614__GUID-BB0838AE-1052-4D25-B909-A0D05A1415CB">Resource Group Management</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>You can add a resource to a resource group when you create the resource.</p>
                              </li>
                              <li>
                                 <p>You can explicitly add a resource that belongs to its automatic resource group to another resource group. The resource must be OFFLINE when you add the resource to a group that is either ONLINE or OFFLINE.</p>
                              </li>
                              <li>
                                 <p>You can remove a non-critical resource from a resource group (OFFLINE or ONLINE) as long as no other resource in the group depends on it. The resource you remove then becomes a member of its automatic resource group. At a later time, you can add this resource to another group.</p>
                              </li>
                              <li>
                                 <p>You can delete a non-critical resource, thereby removing the resource from the resource group and deleting it from Oracle Clusterware. You cannot delete a critical resource of a resource group, unless you first update the critical resources list of the resource group to unmark the resource as critical.</p>
                              </li>
                              <li>
                                 <p>A resource group is empty when it is initially created and also becomes empty when each resource in the group has been removed. An empty resource group cannot be started and its state will be always be OFFLINE.</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614__GUID-852BF973-BD8E-40D4-A30E-42CCC13F7018">Share Resources</p>
                           <p>In various Oracle Clusterware deployments, there are components, such as file systems, that multiple applications share. A single Oracle ACFS resource, for example, cannot be a member of multiple resource groups that make use of the filesystem because, by definition, a resource can be a member of only one resource group.</p>
                           <p> For these types of resources, Oracle recommends that you put them in their own individual resource groups, either explicit or automatic, and configure appropriate dependencies from the application resource groups to these shared resource groups. In this manner, multiple applications can share components.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614__GUID-26BFD5DA-D9B1-41E5-96F9-B1145147E697">Critical Resources</p>
                           <p>You can have a large-enterprise type application that is modeled as a resource group that contains multiple resources corresponding to application or infrastructure components. If any of the resources in such a resource group fails, then Oracle Clusterware fails the entire resource group over to another server in the cluster. Some resources in the resource group, however, are not critical to the application and would not necessarily require failing over the entire resource group, which would cause an unnecessary disruption in the running of the instance.</p>
                           <p>You can define certain resources within a resource group as <span class="italic">critical</span> (by specifying the name of the resource in the CRITICAL_RESOURCES list attribute of the resource group) and, should any of those resources fail, then Oracle Clusterware will fail the resource group over to another server in the cluster.
                           </p>
                           <p>Further, the state of a resource group is determined by the state of its critical resources. Non-critical resources do not affect the state of the resource group nor can they trigger failover of the resource group. A resource group must have at least one critical resource before the resource group can be started and brought online.</p>
                           <p>You can specify individual resources in a resource group as critical or you can specify a resource type as critical, which would make all resources of that particular type critical. For example:</p><pre class="pre codeblock"><code>CRITICAL_RESOURCES="r1 r2 r3"</code></pre><p>The preceding example lists three, space-delimited resources marked as critical.</p><pre class="pre codeblock"><code>CRITICAL_RESOURCES="appvip type:ora.export.type"</code></pre><p>The preceding example lists a particular resource type as critical, thereby making any resource of this type a critical resource.</p>
                           <p>When you create a resource group or remove its members, it is empty and, consequently, there are no critical resources. The first resource that you add to the resource group is automatically marked as critical by Oracle Clusterware, provided that you have not already specified a resource type in the CRITICAL_RESOURCES attribute of the resource group. Oracle Clusterware always checks for the presence of a critical resource before attempting to start a resource group.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614__GUID-BBAE40D3-0BC2-47B3-B2BF-2523D0445FE9">Resource Group Privileges</p>
                           <p>You can create resource groups and resource group types, and then create and add resources to those groups. You and also define privileges for modifying and executing operations on a resource group using the ACL attribute of the resource group. The resource group owner can assign privileges to other operating system users and groups by appropriately setting the ACL attribute of the resource group. A resource within a resource group can maintain its own privilege specification within its ACL attribute. Specifically:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>A user with write privilege on a resource group and write privilege on a resource can add the resource to the group.</p>
                              </li>
                              <li>
                                 <p>The owner of the resource group must at all times have execute privileges on all resources in the group. Any user or group granted execute privileges on the group must have execute privileges on all resources in the group.</p>
                                 <p>For example, in cases where certain infrastructure resources in a resource group must be managed by <code class="codeph">root</code> , the owner of the resource must be specified as <code class="codeph">root</code> and execute permissions on the resource granted to the group owner. This must be done explicitly by <code class="codeph">root</code> user.
                                 </p>
                              </li>
                              <li>
                                 <p>The local administrative user (<code class="codeph">root</code> on Unix or Administrators group user on Windows) can modify, delete, start, and stop any resource group.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614__GUID-460E1DBE-0A1D-4479-8168-A5DD2655745F">Resource Group Dependencies</p>
                           <p>You can set dependencies among resource groups, providing a means to express relationships between applications and components. Oracle Clusterware provides modifiers to specify different ordering, location, and enforcement level of dependencies amongst resource groups. Some things to consider about resource group dependencies:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>A resource group can have a dependency relationship to another resource group and not to individual resources.</p>
                              </li>
                              <li>
                                 <p>An explicitly created resource group can have a dependency relationship to an automatic resource group.</p>
                              </li>
                              <li>
                                 <p>A resource in a group can have a dependency relationship to another resource in the same group.</p>
                              </li>
                              <li>
                                 <p>Resources created without specifying a resource group (thus belonging to an automatic resource group) can have a dependency relationship to another resource group.</p>
                              </li>
                              <li>
                                 <p>A resource cannot have a dependency relationship to a resource group nor to a resource in a different resource group.</p>
                              </li>
                           </ul>
                           <p>All available Oracle Clusterware resource dependencies are also available to use with resource groups. You configure the START_DEPENDENCIES and STOP_DEPENDENCIES attributes of a resource group to specify dependencies for resource groups.</p>
                           <div class="tblformal" id="GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614__GUID-F3902931-6592-4912-A5A8-55A9BFD902CF">
                              <p class="titleintable">Table 9-1 Resource Group Dependency Types and Modifiers</p>
                              <table cellpadding="4" cellspacing="0" class="Formal" title="Resource Group Dependency Types and Modifiers" summary="This table lists the dependency types and modifiers available for relating one resource group to another resource group." frame="hsides" border="1" rules="rows">
                                 <thead>
                                    <tr align="left" valign="top">
                                       <th align="left" valign="bottom" width="20%" id="d45801e991">Dependency Type</th>
                                       <th align="left" valign="bottom" width="20%" id="d45801e993">Description</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d45801e997" headers="d45801e991 "><span class="italic">hard start</span></td>
                                       <td align="left" valign="top" width="20%" headers="d45801e997 d45801e993 ">
                                          <p>Specifies the requirement that specific other resource groups must be online (anywhere in the cluster) before this resource group can be started.</p>
                                          <p>For example:</p><pre class="pre codeblock"><code>START_DEPENDENCIES=hard([global: | intermediate: | uniform: ] <span class="variable" translate="no">other_resource_group</span>)</code></pre><p>If the start of any dependent resource group fails, then Oracle Clusterware aborts the start of this resource group.</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d45801e1013" headers="d45801e991 "><span class="italic">weak start</span></td>
                                       <td align="left" valign="top" width="20%" headers="d45801e1013 d45801e993 ">
                                          <p>Specifies the requirement that an attempt must be made to start specific other resource groups before starting this resource group. If the attempt fails to start the specific other resource groups, then Oracle Clusterware starts this resource group, regardless.</p>
                                          <p>For example:</p><pre class="pre codeblock"><code>START_DEPENDENCIES=weak([global: | concurrent: | uniform: ] <span class="variable" translate="no">other_resource_group</span>)</code></pre></td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d45801e1027" headers="d45801e991 "><span class="italic">pullup</span></td>
                                       <td align="left" valign="top" width="20%" headers="d45801e1027 d45801e993 ">
                                          <p>Use This dependency when this resource group must be automatically started when a dependent resource group starts.</p>
                                          <p>For example:</p><pre class="pre codeblock"><code>START_DEPENDENCIES=pullup([intermediate: |  always: ]<span class="variable" translate="no">other_resource_group</span>])</code></pre><p>Oracle recommends that you use this dependency when a stop dependency exists between the resource groups.</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d45801e1043" headers="d45801e991 "><span class="italic">hard stop</span></td>
                                       <td align="left" valign="top" width="20%" headers="d45801e1043 d45801e993 ">
                                          <p>This dependency specifies the mandatory requirement of stopping this resource group when another specific resource group stops running.</p>
                                          <p>For example:</p><pre class="pre codeblock"><code>STOP_DEPENDENCIES=hard([intermediate: | global: | shutdown: ]<span class="variable" translate="no">other_resource_group</span>)</code></pre></td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d45801e1057" headers="d45801e991 "><span class="italic">attraction</span></td>
                                       <td align="left" valign="top" width="20%" headers="d45801e1057 d45801e993 ">
                                          <p>Specifies a co-location preference with specific other resource groups.</p>
                                          <p>For example:</p><pre class="pre codeblock"><code>START_DEPENDENCIES=attraction([intermediate:]<span class="variable" translate="no">other_resource_group</span>)</code></pre><p>Oracle Clusterware will attempt to start this resource group on the same server where a specific other resource group is already online.</p>
                                       </td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d45801e1073" headers="d45801e991 "><span class="italic">dispersion</span></td>
                                       <td align="left" valign="top" width="20%" headers="d45801e1073 d45801e993 ">
                                          <p>Specifies preference to not  be co-located with specific other resource groups. Oracle Clusterware will attempt to start this resource group on a server with the least number of online resource groups with dispersion dependency.</p>
                                          <p>For example:</p><pre class="pre codeblock"><code>START_DEPENDENCIES=dispersion([intermediate: | active: | pool:]:<span class="variable" translate="no">other_resource_group</span>)</code></pre></td>
                                    </tr>
                                    <tr align="left" valign="top">
                                       <td align="left" valign="top" width="20%" id="d45801e1087" headers="d45801e991 "><span class="italic">exclusion</span></td>
                                       <td align="left" valign="top" width="20%" headers="d45801e1087 d45801e993 ">
                                          <p>Specifies a mandatory requirement that this resource group not run on the same server as specific other resource groups. Oracle Clusterware will either reject the start of this resource group or stop the dependent resource groups and restart them on another server.</p>
                                          <p>For example:</p><pre class="pre codeblock"><code>START_DEPENDENCIES=exclusion[(preempt_pre: | preempt_post )] <span class="variable" translate="no">other_resource_group</span>)</code></pre></td>
                                    </tr>
                                 </tbody>
                              </table>
                           </div>
                           <!-- class="inftblhruleinformal" -->
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3" id="GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614__GUID-38D66A7F-1CB5-457E-A56C-00267246DE36">Resource Group Failure and Recovery</p>
                           <p>As previously discussed, critical resources determine resource group state and failover.</p>
                           <p><span class="bold">Failure and Recovery of Critical Resources</span></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>When a critical resource of a resource group fails, the resource group immediately transitions to the OFFLINE state.</p>
                              </li>
                              <li>
                                 <p>Oracle Clusterware attempts local restart of the failed critical resource according to the RESTART_ATTEMPTS and UPTIME_THRESHOLD resource attributes.</p>
                              </li>
                              <li>
                                 <p>Oracle Clusterware initiates immediate check actions on other resources in the same group that have a stop dependency on the failed resource.</p>
                              </li>
                              <li>
                                 <p>Oracle Clusterware initiates immediate check actions on other resource groups dependent on this resource group.</p>
                              </li>
                              <li>
                                 <p>If the resource restarts successfully, then the resource group transitions to ONLINE state and Oracle Clusterware performs pullup dependency evaluation within and across resource groups.</p>
                              </li>
                              <li>
                                 <p>If Oracle Clusterware exhausts all local restart attempts of the resource, then Oracle Clusterware stops the entire resource group. Oracle Clusterware also immediately stops other resource groups with a stop dependency on the resource group. Oracle Clusterware attempts local restart of the resource group, if configured to do so. On exhausting all restart attempts, the resource group will fail over to another server in the cluster.</p>
                              </li>
                           </ul>
                           <p><span class="bold">Failure and Recovery of Non-Critical Resources</span></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>When a non-critical resource in a resource group fails, Oracle Clusterware attempts local restart of the failed resource according to the values of the RESTART_ATTEMPTS and UPTIME_THRESHOLD resource attributes. There is no impact on the state of the resource group when a non-critical resource fails.</p>
                              </li>
                              <li>
                                 <p>Oracle Clusterware initiates immediate check actions on other resources in the same group that have a stop dependency on the failed resource.</p>
                              </li>
                              <li>
                                 <p>If the resource restarts successfully, Oracle Clusterware performs pullup dependency evaluation and corresponding startup actions.</p>
                              </li>
                              <li>
                                 <p>If Oracle Clusterware exhausts all local restart attempts of the resource, then there is no impact on the state of the resource group. You must then explicitly start the non-critical resource after fixing the cause of the failure.</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-6B647375-A395-49AA-9BF3-10160A9108DD" title="In Oracle Clusterware, a resource type is a template for a class of resources.">Resource Group Types</a></li>
                              <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-98B214E5-AB6B-41B7-B469-83929EDC9D11" title="Use CRSCTL to create resource groups, resource group types, and to add resources to resource groups.">Using Resource Groups</a></li>
                           </ul>
                        </div>
                     </div>
                     <div class="sect5"><a id="GUID-6B647375-A395-49AA-9BF3-10160A9108DD" name="GUID-6B647375-A395-49AA-9BF3-10160A9108DD"></a><h6 id="CWADD-GUID-6B647375-A395-49AA-9BF3-10160A9108DD" class="sect6">Resource Group Types</h6>
                        <div>
                           <p>In Oracle Clusterware, a resource type is a template for a class of resources.</p>
                           <p>Resource group types provide a commonly applicable set of attributes to all resource groups. When you create a resource group, you must specify a resource group type. Oracle Clusterware provides two base resource group types: <code class="codeph">local_resourcegroup</code> and <code class="codeph">cluster_resourcegroup</code>. The base resource types have attributes similar to resources, some of which you can configure.
                           </p>
                           <div class="section">
                              <p class="subhead3" id="GUID-6B647375-A395-49AA-9BF3-10160A9108DD__GUID-1883145A-F2F4-43A5-8722-1F34E70E3CD5">Local Resource Group Type</p>
                              <p>Use the <code class="codeph">local_resourcegroup</code> type to create a resource group that contains only local resources. Instances of a resource group of this type can run on each node in the cluster. Local resource group type attributes include:
                              </p>
                              <ul class="simple" style="list-style-type: none;padding-left:0;">
                                 <li>NAME</li>
                                 <li>DESCRIPTION</li>
                                 <li>ACL</li>
                                 <li>AUTO_START</li>
                                 <li>CRITICAL_RESOURCES</li>
                                 <li>DEBUG</li>
                                 <li>ENABLED</li>
                                 <li>INTERNAL_STATE</li>
                                 <li>RESOURCE_LIST</li>
                                 <li>RESTART_ATTEMPTS</li>
                                 <li>SERVER_CATEGORY</li>
                                 <li>START_DEPENDENCIES</li>
                                 <li>STOP_DEPENDENCIES</li>
                                 <li>STATE</li>
                                 <li>STATE_DETAILS</li>
                                 <li>UPTIME_THRESHOLD</li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3" id="GUID-6B647375-A395-49AA-9BF3-10160A9108DD__GUID-178004DC-67EE-4A06-B14F-36DBD16F4E44">Cluster Resource Group Type</p>
                              <p>A resource group of type <code class="codeph">cluster_resourcegroup</code> can have one or more instances running on a static or dynamic set of servers in the cluster. Such a resource group can fail over to another server in the cluster according to the placement policy of the group. Cluster resource group type attributes include:
                              </p>
                              <ul class="simple" style="list-style-type: none;padding-left:0;">
                                 <li>NAME</li>
                                 <li>DESCRIPTION</li>
                                 <li>ACL</li>
                                 <li>ACTIVE_PLACEMENT</li>
                                 <li>AUTO_START</li>
                                 <li>CARDINALITY</li>
                                 <li>CRITICAL_RESOURCES</li>
                                 <li>DEBUG</li>
                                 <li>ENABLED</li>
                                 <li>FAILURE_INTERVAL</li>
                                 <li>FAILURE_THRESHOLD</li>
                                 <li>HOSTING_MEMBERS</li>
                                 <li>INTERNAL_STATE</li>
                                 <li>PLACEMENT</li>
                                 <li>RESOURCE_LIST</li>
                                 <li>RESTART_ATTEMPTS</li>
                                 <li>SERVER_CATEGORY</li>
                                 <li>SERVER_POOLS</li>
                                 <li>START_DEPENDENCIES</li>
                                 <li>STOP_DEPENDENCIES</li>
                                 <li>STATE</li>
                                 <li>STATE_DETAILS</li>
                                 <li>UPTIME_THRESHOLD</li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="relinfo">
                              <p><strong>Related Topics</strong></p>
                              <ul>
                                 <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-98B214E5-AB6B-41B7-B469-83929EDC9D11" title="Use CRSCTL to create resource groups, resource group types, and to add resources to resource groups.">Using Resource Groups</a></li>
                                 <li><a href="oracle-clusterware-resource-reference.html#GUID-9C074F34-F180-4200-A99B-72186DAB56E1" title="An integer different for each of the INSTANCE_COUNT resource instances.Resource group attribute that contains a list of resources marked critical for a resource group.The SERVER_POOLS resource attribute is described.List of resources belonging to a resource group. Oracle Clusterware populates and updates this attribute when resources are added to the group.">Oracle Clusterware Resource Reference</a></li>
                              </ul>
                           </div>
                        </div>
                     </div>
                     <div class="sect5"><a id="GUID-98B214E5-AB6B-41B7-B469-83929EDC9D11" name="GUID-98B214E5-AB6B-41B7-B469-83929EDC9D11"></a><h6 id="CWADD-GUID-98B214E5-AB6B-41B7-B469-83929EDC9D11" class="sect6">Using Resource Groups</h6>
                        <div>
                           <p>Use CRSCTL to create resource groups, resource group types, and to add resources to resource groups.</p>
                           <div class="section">To use resource groups, you must first create the resource group based on either a built-in resource group type or a resource group type that you create. Once you have create a resource group, you can add resources to it.</div>
                           <!-- class="section" -->
                           <ol>
                              <li class="stepexpand"><span>Use the following command to create a resource group:</span><div><pre class="pre codeblock"><code>$ crsctl add resourcegroup <span class="variable" translate="no">group_name</span> -type <span class="variable" translate="no">group_type</span></code></pre>The preceding command creates an empty resource group into which you can add resources. You must provide a name for the resource group and a resource group type. If you choose to base your resource group on a custom resource group type, then you must first create a resource group type, as described in the next step.</div>
                              </li>
                              <li class="stepexpand"><span>If you want to create a resource group based on a custom resource group type, then you must create the resource group type, as follows:</span><div><pre class="pre codeblock"><code>$ crsctl add resourcegrouptype <span class="variable" translate="no">group_type_name</span> &#x2013;basetype <span class="variable" translate="no">base_group_type</span> {-file <span class="variable" translate="no">file_path</span> | -attr "<span class="variable" translate="no">attribute_name=attribute_value</span>"}</code></pre>The preceding command creates a resource group type that provides a singular set of attributes for any resource group you created based on this resource group type. You must provide an existing resource group type as a base resource group type, and either a path to a file that contains a line-delimited list of attribute/attribute value pairs or, alternatively, you can provide a comma-delimited list of attribute/attribute value pairs on the command line.</div>
                              </li>
                              <li class="stepexpand"><span>After you create a resource group, you can begin to add resources to the resource group, as follows:</span><div><pre class="pre codeblock"><code>$ crsctl add resource <span class="variable" translate="no">resource_name</span> -group <span class="variable" translate="no">group_name</span></code></pre>The resource group to which you add a resource must exist and the resource you are adding must be in an offline state. A resource can be a member of only one resource group. If you have a resource that is shared by multiple applications, such as a file system, then Oracle recommends that you put those resources into their own individual resource groups.</div>
                              </li>
                           </ol>
                        </div>
                     </div>
                  </div>
               </div><a id="CWADD91280"></a><div class="props_rev_3"><a id="GUID-30DC08E5-72CE-4E93-B6D6-E209DEADF83E" name="GUID-30DC08E5-72CE-4E93-B6D6-E209DEADF83E"></a><h4 id="CWADD-GUID-30DC08E5-72CE-4E93-B6D6-E209DEADF83E" class="sect4">Oracle Clusterware Resource Types</h4>
                  <div>
                     <div class="section">
                        <p>Generally, all resources are unique but some resources may have common attributes. Oracle Clusterware uses resource types to organize these similar resources. Benefits that resource types provide are:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Manage only necessary resource attributes</p>
                           </li>
                           <li>
                              <p>Manage all resources based on the resource type</p>
                           </li>
                        </ul>
                        <p>Every resource that you register in Oracle Clusterware must have a certain resource type. In addition to the resource types included in Oracle Clusterware, you can define custom resource types using the Oracle Clusterware Control (CRSCTL) utility. The included resource types are:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">Local resource</span>: Instances of local resourcesâ€”type name is <code class="codeph">local_resource</code>â€”run on each server of the cluster (the default) or you can limit them to run on servers belonging to a particular server category. When a server joins the cluster, Oracle Clusterware automatically extends local resources to have instances tied to the new server. When a server leaves the cluster, Oracle Clusterware automatically sheds the instances of local resources that ran on the departing server. Instances of local resources are pinned to their servers; they do not fail over from one server to another.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">Cluster resource</span>: Cluster-aware resource typesâ€”type name is <code class="codeph">cluster_resource</code>â€”are aware of the cluster environment and are subject to <a href="glossary.html#GUID-4596912E-C8E1-4044-A9BA-4681583B396D"><span class="xrefglossterm">cardinality</span></a> and cross-server switchover and failover.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">Generic application</span>: You can use this resource typeâ€”type name is <code class="codeph">generic_application</code>â€”to protect any generic applications without requiring additional scripts. High availability for an application is achieved by defining a resource with the <code class="codeph">generic_application</code> resource type and providing the values for key attributes of the resource. The <code class="codeph">generic_application</code> resource type is derived from the <code class="codeph">cluster_resource</code> resource type and, therefore, all resources of the <code class="codeph">generic_application</code> resource type are cluster-aware resources. Attributes include:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">START_PROGRAM</code>: A complete path to the executable that starts the application, with all appropriate arguments. The executable must exist on every server where Oracle Grid Infrastructure is configured to run the application. This attribute is required. For example:
                                    </p><pre class="pre codeblock"><code>/opt/my_app &#x2013;start</code></pre><p>The executable must also ensure that the application starts and return an exit status value of zero (0) to indicate that the application started successfully and is online. If the executable fails to start the application, then the executable exits with a non-zero status code.</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">STOP_PROGRAM</code>: A complete path to the executable that stops the application, with all appropriate arguments. The executable must exist on every server where Oracle Grid Infrastructure is configured to run the application. If you do not specify this attribute value, then Oracle Clusterware uses an operating system-equivalent of the <code class="codeph">kill</code> command. For example:
                                    </p><pre class="pre codeblock"><code>/opt/my_app &#x2013;stop</code></pre><p>The executable must also ensure that the application stops and return an exit status value of zero (0) to indicate that the application stopped successfully. If the executable fails to stop the application, then the executable exits with a non-zero status code and Oracle Clusterware initiates a clean of the resource.</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">CLEAN_PROGRAM</code>: A complete path to the executable that cleans the program, with all appropriate arguments. The executable must exist on every server where Oracle Grid Infrastructure is configured to run the application. If you do not specify a value for this attribute, then Oracle Clusterware uses an operating system-equivalent of the <code class="codeph">kill -9</code> command. For example:
                                    </p><pre class="pre codeblock"><code>/opt/my_app &#x2013;clean</code></pre><div class="infoboxnote" id="GUID-30DC08E5-72CE-4E93-B6D6-E209DEADF83E__GUID-D41A61B0-844F-4226-9F64-E5C423580E99">
                                       <p class="notep1">Note:</p>
                                       <p>The difference between <code class="codeph">STOP_PROGRAM</code> and <code class="codeph">CLEAN_PROGRAM</code> is that <code class="codeph">CLEAN_PROGRAM</code> is a forced stop that stops an application ungracefully, and must always be able to stop an application or the application becomes unmanageable.
                                       </p>
                                    </div>
                                 </li>
                                 <li>
                                    <p><code class="codeph">PID_FILES</code>: A comma-delimited list of complete paths to files that will be written by the application and contain a process ID (PID) to monitor. Failure of a single process is treated as a complete resource failure. For example:
                                    </p><pre class="pre codeblock"><code>/opt/app.pid</code></pre><div class="infoboxnote" id="GUID-30DC08E5-72CE-4E93-B6D6-E209DEADF83E__GUID-3EDB1345-8F88-4C8C-BE93-0905F068EDDC">
                                       <p class="notep1">Note:</p>
                                       <p>The files that you specify in the <code class="codeph">PID_FILES</code> attribute are read immediately after the START action completes and monitoring commences for the PIDs listed in the files.
                                       </p>
                                    </div>
                                 </li>
                                 <li>
                                    <p><code class="codeph">EXECUTABLE_NAMES</code>: A comma-delimited list of names of executables that is created when the application starts and the state of these executables is subsequently monitored. Failure of a single executable is treated as a complete resource failure. For example:
                                    </p><pre class="pre codeblock"><code>my_app</code></pre><div class="infoboxnote" id="GUID-30DC08E5-72CE-4E93-B6D6-E209DEADF83E__GUID-35CB041F-B0A6-4AB6-A10E-E0F513136003">
                                       <p class="notep1">Note:</p>
                                       <p>You need specify only the complete name of the executables. This attribute does not accept the path of the executable or wild cards. The PIDs matching the executable names are cached immediately after the START action completes.</p>
                                    </div>
                                 </li>
                                 <li>
                                    <p><code class="codeph">CHECK_PROGRAMS</code>: A list of complete paths to the executable that determines the state of the application. Reporting a non-running state by any of the applications is treated as a failure of the entire resource. For example:
                                    </p><pre class="pre codeblock"><code>/opt/my_app &#x2013;check</code></pre></li>
                                 <li>
                                    <p><code class="codeph">ENVIRONMENT_FILE</code>: A complete path to the file containing environment variables to source when starting the application. The file must be a text file containing <code class="codeph"><span class="variable" translate="no">name</span>=<span class="variable" translate="no">value</span></code> pairs, one per line. For example:
                                    </p><pre class="pre codeblock"><code>/opt/my_app.env</code></pre></li>
                                 <li>
                                    <p><code class="codeph">ENVIRONMENT_VARS</code>: A comma-delimited list of <code class="codeph"><span class="variable" translate="no">name</span>=<span class="variable" translate="no">name</span></code> pairs to be included into the environment when starting an application. For example:
                                    </p><pre class="pre codeblock"><code>USE_FILES=No, AUTO_START=Yes</code></pre></li>
                                 <li>
                                    <p><code class="codeph">SEND_OUTPUT_ALWAYS</code>: This attribute is responsible for sending the application output that is sent to STDOUT, which is then displayed. A value of 0 does not display any application output unless an action fails. When an action fails, whatever application output that has been saved by the agent is displayed. Any value greater than 0 displays every application output. The default value is 0. For example:
                                    </p><pre class="pre codeblock"><code>SEND_OUTPUT_ALWAYS=1</code></pre></li>
                              </ul>
                              <div class="infoboxnote" id="GUID-30DC08E5-72CE-4E93-B6D6-E209DEADF83E__GUID-ED9DDC78-DCB2-4033-B73C-C4823D4151EE">
                                 <p class="notep1">Note:</p>
                                 <p>If you do not specify the <code class="codeph">STOP_PROGRAM</code>, <code class="codeph">CHECK_PROGRAMS</code>, and <code class="codeph">CLEAN_PROGRAM</code> attributes, then you must specify either <code class="codeph">PID_FILES</code> or <code class="codeph">EXECUTABLE_NAMES</code>, or Oracle Clusterware will not allow you to register a resource of this type.
                                 </p>
                              </div>
                              <p>If you specify all the attributes, then the following rules apply:</p>
                              <ol>
                                 <li>
                                    <p>When stopping a resource, if you specified <code class="codeph">STOP_PROGRAM</code>, then Oracle Clusterware calls <code class="codeph">STOP_PROGRAM</code>. Otherwise, Oracle Clusterware uses an operating system-equivalent of the <code class="codeph">kill -9</code> command on the PID obtained from either the <code class="codeph">PID_FILES</code> or the <code class="codeph">EXECUTABLE_NAMES</code> attribute.
                                    </p>
                                 </li>
                                 <li>
                                    <p>When you need to establish the current state of an application, if you specified <code class="codeph">CHECK_PROGRAMS</code>, then Oracle Clusterware calls <code class="codeph">CHECK_PROGRAMS</code>. Otherwise, Oracle Clusterware uses an operating system-equivalent of the <code class="codeph">ps -p</code> command with the PID obtained from either the <code class="codeph">PID_FILES</code> or <code class="codeph">EXECUTABLE_NAMES</code> attribute.
                                    </p>
                                 </li>
                                 <li>
                                    <p>When cleaning a resource, if you specified <code class="codeph">CLEAN_PROGRAM</code>, then Oracle Clusterware calls <code class="codeph">CLEAN_PROGRAM</code>. Otherwise, Oracle Clusterware uses an operating system-equivalent of the <code class="codeph">kill -9</code> command on the PID obtained from either the <code class="codeph">PID_FILES</code> or the <code class="codeph">EXECUTABLE_NAMES</code> attribute.
                                    </p>
                                 </li>
                              </ol>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="oracle-clusterware-control-crsctl-utility-reference.html#GUID-7089B6C0-8701-42E6-B896-674E5E2A06F9" title="Registers a resource to be managed by Oracle Clusterware.">crsctl add resource</a></li>
                           <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-C8652895-D23B-49F2-BF4B-57D3A2E660D9">Resource States</a></li>
                           <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-6D80CD6A-A3C1-4F5C-9F3D-6FCBDE9C075F" title="Use the crsctl add resource command to create resources using the generic_application resource type to model any type of application requiring high availability without having to create any action scripts.">Creating Resources that Use the generic_application Resource Type</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD92083"></a><a id="CWADD92082"></a><div class="props_rev_3"><a id="GUID-CD3442A5-D6A8-4370-ABDA-CB686A736D3C" name="GUID-CD3442A5-D6A8-4370-ABDA-CB686A736D3C"></a><h4 id="CWADD-GUID-CD3442A5-D6A8-4370-ABDA-CB686A736D3C" class="sect4">Agents in Oracle Clusterware</h4>
                  <div>
                     <p>Oracle Clusterware runs all resource-specific commands through an entity called an <span class="italic">agent</span>.
                     </p>
                     <div class="section">
                        <div class="p">Oracle Clusterware manages applications when they are registered as resources with Oracle Clusterware. Oracle Clusterware has access to application-specific primitives that have the ability to start, stop, and monitor a specific resource.
                           <div class="infoboxnote" id="GUID-CD3442A5-D6A8-4370-ABDA-CB686A736D3C__GUID-18CDE238-6968-44DB-9F5E-13AF2CA8B795">
                              <p class="notep1">Note:</p>To increase security and further separate administrative duties, Oracle Clusterware agents run with the SYSRAC administrative privilege, and no longer require the SYSDBA administrative privilege. The SYSRAC administrative privilege is the default mode of connecting to the database by the Oracle Clusterware agent on behalf of Oracle RAC utilities, such as SRVCTL, so that no SYSDBA connections to the database are necessary for everyday administration of Oracle RAC database clusters.
                           </div>
                        </div>
                        <p>An agent is a process that contains the agent framework and user code to manage resources. The <span class="italic">agent framework</span> is a library that enables you to plug in your application-specific code to manage customized applications. You program all of the actual application management functions, such as starting, stopping and checking the health of an application, into the agent. These functions are referred to as <span class="italic">entry points</span>.
                        </p>
                        <p>The agent framework is responsible for invoking these entry point functions on behalf of Oracle Clusterware. Agent developers can use these entry points to plug in the required functionality for a specific resource regarding how to start, stop, and monitor a resource. Agents are capable of managing multiple resources.</p>
                        <p>Agent developers can set the following entry points as callbacks to their code:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">ABORT</span>: If any of the other entry points hang, the agent framework calls the ABORT entry point to stop the ongoing action. If the agent developer does not supply a stop function, then the agent framework exits the agent program.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">ACTION</span>: The ACTION entry point is Invoked when a custom action is invoked using the <code class="codeph"><a href="oracle-clusterware-c-application-program-interfaces.html#GUID-76E327E4-D24D-4C66-9432-279BB3772919" title="Instructs Oracle Clusterware to run an action on a named set of resources.">clscrs_request_action</a></code> API of the <code class="codeph">crsctl request action</code> command.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">CHECK</span>: The CHECK (monitor) entry point acts to monitor the health of a resource. The agent framework periodically calls this entry point. If it notices any state change during this action, then the agent framework notifies Oracle Clusterware about the change in the state of the specific resource.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">CLEAN</span>: The CLEAN entry point acts whenever there is a need to clean up a resource. It is a non-graceful operation that is invoked when users must forcefully terminate a resource. This command cleans up the resource-specific environment so that the resource can be restarted.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">DELETE</span>: The DELETE entry point is invoked on every node where a resource can run when the resource is unregistered.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">MODIFY</span>: The MODIFY entry point is invoked on every node where a resource can run when the resource profile is modified.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">START</span>: The START entry point acts to bring a resource online. The agent framework calls this entry point whenever it receives the start command from Oracle Clusterware.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">STOP</span>: The STOP entry points acts to gracefully bring down a resource. The agent framework calls this entry point whenever it receives the stop command from Oracle Clusterware.
                              </p>
                           </li>
                        </ul>
                        <p>START, STOP, CHECK, and CLEAN are mandatory entry points and the agent developer must provide these entry points when building an agent. Agent developers have several options to implement these entry points, including using C, C++, or scripts. It is also possible to develop agents that use both C or C++ and script-type entry points. When initializing the agent framework, if any of the mandatory entry points are not provided, then the agent framework invokes a script pointed to by the <code class="codeph">ACTION_SCRIPT</code> resource attribute.
                        </p>
                        <p>At any given time, the agent framework invokes only one entry point per application. If that entry point hangs, then the agent framework calls the ABORT entry point to end the current operation. The agent framework periodically invokes the CHECK entry point to determine the state of the resource. This entry point must return one of the following states as the resource state:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">CLSAGFW_ONLINE</code>: The CHECK entry point returns ONLINE if the resource was brought up successfully and is currently in a functioning state. The agent framework continues to monitor the resource when it is in this state. This state has a numeric value of 0 for the <code class="codeph">scriptagent</code>.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">CLSAGFW_UNPLANNED_OFFLINE</code> and <code class="codeph">CLSAGFW_PLANNED_OFFLINE</code>: The OFFLINE state indicates that the resource is not currently running. These two states have numeric values of 1 and 2, respectively, for the <code class="codeph">scriptagent</code>.
                              </p>
                              <p>Two distinct categories exist to describe an resource's offline state: <span class="italic">planned</span> and <span class="italic">unplanned</span>.
                              </p>
                              <p>When the state of the resource transitions to OFFLINE through Oracle Clusterware, then it is assumed that the <span class="italic">intent</span> for this resource is to be offline (<code class="codeph">TARGET=OFFLINE</code>), regardless of which value is returned from the CHECK entry point. However, when an agent detects that the state of a resource has changed independent of Oracle Clusterware (such as somebody stopping the resource through a non-Oracle interface), then the intent must be carried over from the agent to the Cluster Ready Services daemon (CRSD). The intent then becomes the determining factor for the following:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Whether to keep or to change the value of the resource's <code class="codeph">TARGET</code> resource attribute. <code class="codeph">PLANNED_OFFLINE</code> indicates that the <code class="codeph">TARGET</code> resource attribute must be changed to OFFLINE <span class="italic">only if</span> the resource was running before. If the resource was not running (<code class="codeph">STATE=OFFLINE</code>, <code class="codeph">TARGET=OFFLINE</code>) and a request comes in to start it, then the value of the <code class="codeph">TARGET</code> resource attribute changes to ONLINE. The start request then goes to the agent and the agent reports back to Oracle Clusterware a <code class="codeph">PLANNED_OFFLINE</code> resource state, and the value of the <code class="codeph">TARGET</code> resource attribute remains ONLINE. <code class="codeph">UNPLANNED_OFFLINE</code> does not change the <code class="codeph">TARGET</code> attribute.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Whether to leave the resource's state as <code class="codeph">UNPLANNED_OFFLINE</code> or attempt to recover the resource by restarting it locally or failing it over to a another server in the cluster. The <code class="codeph">PLANNED_OFFLINE</code> state makes CRSD leave the resource as is, whereas the <code class="codeph">UNPLANNED_OFFLINE</code> state prompts resource recovery.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><code class="codeph">CLSAGFW_UNKNOWN</code>: The CHECK entry point returns UNKNOWN if the current state of the resource cannot be determined. In response to this state, Oracle Clusterware does not attempt to failover or to restart the resource. The agent framework continues to monitor the resource if the previous state of the resource was either ONLINE or PARTIAL. This state has a numeric value of 3 for the <code class="codeph">scriptagent</code>.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">CLSAGFW_PARTIAL</code>: The CHECK entry point returns PARTIAL when it knows that a resource is partially ONLINE and some of its services are available. Oracle Clusterware considers this state as partially ONLINE and does not attempt to failover or to restart the resource. The agent framework continues to monitor the resource in this state. This state has a numeric value of 4 for the <code class="codeph">scriptagent</code>.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">CLSAGFW_FAILED</code>: The CHECK entry point returns FAILED whenever it detects that a resource is not in a functioning state and some of its components have failed and some clean up is required to restart the resource. In response to this state, Oracle Clusterware calls the CLEAN action to clean up the resource. After the CLEAN action finishes, the state of the resource is expected to be OFFLINE. Next, depending on the policy of the resource, Oracle Clusterware may attempt to failover or restart the resource. Under no circumstances does the agent framework monitor failed resources. This state has a numeric value of 5 for the <code class="codeph">scriptagent</code>.
                              </p>
                           </li>
                        </ul>
                        <p>The agent framework implicitly monitors resources in the states listed in <a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-CD3442A5-D6A8-4370-ABDA-CB686A736D3C__CHDEJIEE" title="This table lists the characteristics with which the agent framework monitors resources in certain states.">Table 9-2</a> at regular intervals, as specified by the <code class="codeph">CHECK_INTERVAL</code> or <code class="codeph">OFFLINE_CHECK_INTERVAL</code> resource attributes.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-CD3442A5-D6A8-4370-ABDA-CB686A736D3C__CHDEJIEE">
                        <p class="titleintable">Table 9-2 Agent Framework Monitoring Characteristics</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Agent Framework Monitoring Characteristics" summary="This table lists the characteristics with which the agent framework monitors resources in certain states." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="21%" id="d45801e2412">State</th>
                                 <th align="left" valign="bottom" width="39%" id="d45801e2415">Condition</th>
                                 <th align="left" valign="bottom" width="39%" id="d45801e2418">Frequency</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d45801e2423" headers="d45801e2412 ">
                                    <p>ONLINE</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d45801e2423 d45801e2415 ">
                                    <p>Always</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d45801e2423 d45801e2418 ">\
                                    <p><code class="codeph">CHECK_INTERVAL</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d45801e2435" headers="d45801e2412 ">
                                    <p>PARTIAL</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d45801e2435 d45801e2415 ">
                                    <p>Always</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d45801e2435 d45801e2418 ">
                                    <p><code class="codeph">CHECK_INTERVAL</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d45801e2446" headers="d45801e2412 ">
                                    <p>OFFLINE</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d45801e2446 d45801e2415 ">
                                    <p>Only if the value of the <code class="codeph">OFFLINE_CHECK_INTERVAL</code> resource attribute is greater than 0.
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d45801e2446 d45801e2418 ">
                                    <p><code class="codeph">OFFLINE_CHECK_INTERVAL</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d45801e2460" headers="d45801e2412 ">
                                    <p>UNKNOWN</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d45801e2460 d45801e2415 ">
                                    <p>Only monitored if the resource was previously being monitored because of any one of the previously mentioned conditions.</p>
                                 </td>
                                 <td align="left" valign="top" width="39%" headers="d45801e2460 d45801e2418 ">
                                    <p>If the state becomes UNKNOWN after being ONLINE, then the value of <code class="codeph">CHECK_INTERVAL</code> is used. Otherwise, there is no monitoring.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p>Whenever an agent starts, the state of all the resources it monitors is set to UNKNOWN. After receiving an initial probe request from Oracle Clusterware, the agent framework executes the CHECK entry point for all of the resources to determine their current states.</p>
                        <p>Once the CHECK action successfully completes for a resource, the state of the resource transitions to one of the previously mentioned states. The agent framework then starts resources based on commands issued from Oracle Clusterware. After the completion of every action, the agent framework invokes the CHECK action to determine the current resource state. If the resource is in one of the monitored states listed in <a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-CD3442A5-D6A8-4370-ABDA-CB686A736D3C__CHDEJIEE" title="This table lists the characteristics with which the agent framework monitors resources in certain states.">Table 9-2</a>, then the agent framework periodically executes the CHECK entry point to check for changes in resource state.
                        </p>
                        <p>By default, the agent framework does not monitor resources that are offline. However, if the value of the <code class="codeph">OFFLINE_CHECK_INTERVAL</code> attribute is greater than 0, then the agent framework monitors offline resources.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-018BCDB1-862F-4F03-9D8A-E6F2522BE73D">ACTION_SCRIPT</a></li>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-B747D1B8-D747-4D95-B4A7-6D1DC230C02D">CHECK_INTERVAL</a></li>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-441C06D9-18E9-4CA6-9D23-17FD54602171">OFFLINE_CHECK_INTERVAL</a></li>
                        </ul>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-10286938-B9BA-4C98-80C7-1EE98F3463D7" name="GUID-10286938-B9BA-4C98-80C7-1EE98F3463D7"></a><h5 id="CWADD-GUID-10286938-B9BA-4C98-80C7-1EE98F3463D7" class="sect5">Oracle Clusterware Built-in Agents</h5>
                     <div>
                        <div class="section">
                           <p>Oracle Clusterware uses agent programs (agents) to manage resources and includes the following built-in agents to protect applications:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="bold"><code class="codeph">appagent</code></span>: This agent (<code class="codeph">appagent.exe</code> in Windows) automatically protects resources of the <code class="codeph">generic_application</code> resource type and any resources in previous versions of Oracle Clusterware of the <code class="codeph">application</code> resource type.
                                 </p>
                                 <div class="infoboxnote" id="GUID-10286938-B9BA-4C98-80C7-1EE98F3463D7__GUID-2FC4E81B-3D2B-4F57-A686-DFD92E2463B3">
                                    <p class="notep1">Note:</p>
                                    <p>Oracle recommends that you not use the deprecated <code class="codeph">application</code> resource type, which is only provided to support pre-Oracle Clusterware 11<span class="italic">g</span> release 2 (11.2) resources.
                                    </p>
                                 </div>
                              </li>
                              <li>
                                 <p><span class="bold"><code class="codeph">scriptagent</code></span>: Use this agent (<code class="codeph">scriptagent.exe</code> in Windows) when using shell or batch scripts to protect an application. Both the <code class="codeph">cluster_resource</code> and <code class="codeph">local_resource</code> resource types are configured to use this agent, and any resources of these types automatically take advantage of this agent.
                                 </p>
                              </li>
                           </ul>
                           <p>Additionally, you can create your own agents to manage your resources in any manner you want.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-30DC08E5-72CE-4E93-B6D6-E209DEADF83E">Oracle Clusterware Resource Types</a></li>
                              <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-A55586D4-3754-43F9-836D-32E75A334D49">Building an Agent</a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="CWADD92142"></a><div class="props_rev_3"><a id="GUID-9055B23F-9D18-4CC4-8C64-7740D7E56DC8" name="GUID-9055B23F-9D18-4CC4-8C64-7740D7E56DC8"></a><h4 id="CWADD-GUID-9055B23F-9D18-4CC4-8C64-7740D7E56DC8" class="sect4">Action Scripts</h4>
                  <div>
                     <p>An action script defines one or more actions to start, stop, check, or clean resources.</p>
                     <div class="section">
                        <p>The agent framework invokes these actions without the C/C++ actions. Using action scripts, you can build an agent that contains the C/C++ entry points and the script entry points. If all of the actions are defined in the action script, then you can use the script agent to invoke the actions defined in any action scripts.</p>
                        <p>Before invoking the action defined in the action script, the agent framework exports all the necessary attributes from the resource profile to the environment. Action scripts can log messages to the <code class="codeph">stdout/stderr</code>, and the agent framework prints those messages in the agent logs. However, action scripts can use special tags to send the progress, warning, or error messages to the <code class="codeph">crs*</code> client tools by prefixing one of the following tags to the messages printed to <code class="codeph">stdout/stderr</code>:
                        </p><pre class="pre codeblock"><code>CRS_WARNING:
CRS_ERROR:
CRS_PROGRESS:</code></pre><p>The agent framework strips out the prefixed tag when it sends the final message to the <code class="codeph">crs*</code> clients.
                        </p>
                        <p>Resource attributes can be accessed from within an action script as environment variables prefixed with <code class="codeph">_CRS_</code>. For example, the <code class="codeph">START_TIMEOUT</code> attribute becomes an environment variable named <code class="codeph">_CRS_START_TIMEOUT</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="oracle-clusterware-control-crsctl-utility-reference.html#GUID-086B5F1E-4608-4689-8110-ADC96F7C0926">crsctl start resource</a></li>
                           <li><a href="oracle-clusterware-control-crsctl-utility-reference.html#GUID-2FC1718C-407B-453A-992D-0682D7E157C5">crsctl stop resource</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD92085"></a><div class="props_rev_3"><a id="GUID-A55586D4-3754-43F9-836D-32E75A334D49" name="GUID-A55586D4-3754-43F9-836D-32E75A334D49"></a><h4 id="CWADD-GUID-A55586D4-3754-43F9-836D-32E75A334D49" class="sect4">Building an Agent</h4>
                  <div>
                     <div class="section">
                        <p>Building an <a href="glossary.html#GUID-F63DF55D-362F-409C-ABE0-AA200C65F545"><span class="xrefglossterm">agent</span></a> for a specific application involves the following steps:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>Implement the <a href="glossary.html#GUID-9DE68E8A-675D-4C80-9160-023823834937"><span class="xrefglossterm">agent framework</span></a> entry points either in scripts, C, or C++.</span></li>
                        <li><span>Build the agent executable (for C and C++ agents).</span></li>
                        <li><span>Collect all the parameters needed by the entry points and define a new resource type. Set the <code class="codeph">AGENT_FILENAME</code> attribute to the absolute path of the newly built executable.</span></li>
                     </ol>
                  </div><a id="CWADD92413"></a><div class="props_rev_3"><a id="GUID-7B26C65B-D8E6-4B75-9EED-1F3C0DD68946" name="GUID-7B26C65B-D8E6-4B75-9EED-1F3C0DD68946"></a><h5 id="CWADD-GUID-7B26C65B-D8E6-4B75-9EED-1F3C0DD68946" class="sect5">Building and Deploying C and C++ Agents</h5>
                     <div>
                        <div class="section">
                           <p>Example C and C++ agents are included with Oracle Clusterware that demonstrate using the agent framework to implement high availability agents for applications. Appendix F describes an example of an agent called <code class="codeph">demoagent1.cpp</code>. This agent manages a simple resource that represents a file on disk and performs the following tasks:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>On start: Creates the file</p>
                              </li>
                              <li>
                                 <p>On stop: Gracefully deletes the file</p>
                              </li>
                              <li>
                                 <p>On check: Detects whether the file is present</p>
                              </li>
                              <li>
                                 <p>On clean: Forcefully deletes the file</p>
                              </li>
                           </ul>
                           <p>To describe this particular resource to Oracle Clusterware, you must first create a resource type that contains all the characteristic attributes for this resource class. In this case, the only attribute to be described is the name of the file to be managed. The following steps demonstrate how to set up the resource and its agent and test the functionality of the resource:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Compile the C++ agent using the <code class="codeph">demoagent1.cpp</code> source file provided and a <span class="italic">makefile</span>. Modify the makefile based on the local compiler and linker paths and installation locations. The output is an executable named <code class="codeph">demoagent1</code>. This example assumes that the executable is located in a directory named <code class="codeph">/path/to/</code> on every node of the cluster.</span></li>
                           <li class="stepexpand"><span>Use CRSCTL to add a new resource type, as follows:</span><div><pre class="pre codeblock"><code>$ crsctl add type hotfile_type -basetype cluster_resource -attr
   "ATTRIBUTE=PATH_NAME,TYPE=string,DEFAULT_VALUE=default.txt,
   ATTRIBUTE=AGENT_FILENAME,TYPE=string,DEFAULT_VALUE=/path/to/demoagent1"</code></pre><p>In the preceding command example, <code class="codeph">PATH_NAME</code> is the directory path for every resource of this type. Modify the value of <code class="codeph">PATH_NAME</code> to the appropriate directory location on the disk.
                                 </p>
                                 <p>The <code class="codeph">AGENT_FILENAME</code> attribute specifies the location of the agent binary that implements the resource management commands for this resource type. This step adds a new resource type to Oracle Clusterware.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Create a new resource based on the type that is defined in the previous step, as follows:</span><div><pre class="pre codeblock"><code>$ crsctl add res file1 -type hotfile_type -attr "PATH_NAME=/var/log/file1.txt"
$ crsctl add res file2 -type hotfile_type -attr "PATH_NAME=/var/log/file2.txt"</code></pre><p>The preceding commands add resources named <code class="codeph">file1</code> and <code class="codeph">file2</code> to be managed and monitored by Oracle Clusterware.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Start and stop the resources using CRSCTL, as follows:</span><div><pre class="pre codeblock"><code>$ crsctl start res file1
$ crsctl start res file2
$ crsctl relocate res file1
$ crsctl stop res file2</code></pre><p>Oracle Clusterware creates and deletes the disk files as the resources are started and stopped.</p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="oracle-clusterware-agent-framework-c-application-program-interfaces.html#GUID-1B0838C1-2211-4EF6-8108-0BFC06F51082" title="Registers a resource type that the agent manages.Initiates a check action on a specific resource.Creates an iterator to access all the attributes of the current resource.Deletes a cookie stored in the agent framework.Terminates the agent process with resource retry feedback.Returns the next attribute name and value from the created iterator.Obtains the value of an attribute of the current resource.Returns the type of the check command currently being executed.Returns the type of the command for which the entry point is invoked.Retrieves the value of a cookie stored in the agent framework.Returns the name of the custom action to be executed on a resource.Retrieves the ID of the resource for which the entry point is being executed.Retrieves the resource name of the current command.Returns the retry attempt number for the current command.Retrieves the type name of the resource for which the entry point is being executed.Initializes the agent framework.Returns the cause of the ABORT entry point.Prints a diagnostic message to the agent log file.Modifies an attribute of the current resource.Resets the attribute iterator.Reports progress, warning, and error messages to the Oracle Clusterware server and the user.Stores a cookie and its value in the agent framework.Sets the C/C++ entry point function to be executed for a particular action on the resource.Registers a function to be called when the agent process exits.Sets a custom label on the current resource.Starts the agent framework.">Oracle Clusterware Agent Framework C Application Program Interfaces</a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="CWADD91281"></a><div class="props_rev_3"><a id="GUID-A907346B-96D2-485A-BD0C-51340222A612" name="GUID-A907346B-96D2-485A-BD0C-51340222A612"></a><h4 id="CWADD-GUID-A907346B-96D2-485A-BD0C-51340222A612" class="sect4">Registering a Resource in Oracle Clusterware</h4>
                  <div>
                     <p>Register resources in Oracle Clusterware 12<span class="italic">c</span> using the <code class="codeph">crsctl add resource</code> command.
                     </p>
                     <div class="section">
                        <p>To register an application as a resource:</p><pre class="pre codeblock"><code>$ crsctl add resource <span class="variable" translate="no">resource_name</span> -type [-group <span class="variable" translate="no">group_name</span>] <span class="variable" translate="no">resource_type</span>
  [-file <span class="variable" translate="no">file_path</span>] | [-attr "<span class="variable" translate="no">attribute_name</span>='<span class="variable" translate="no">attribute_value</span>', <span class="variable" translate="no">attribute_name</span>='
  <span class="variable" translate="no">attribute_value</span>', ..."]</code></pre><p>Choose a name for the resource based on the application for which it is being created. For example, if you create a resource for an Apache Web server, then you might name the resource <code class="codeph">myApache</code>. Specify the name of an existing resource type after the <code class="codeph">-type</code> option. Optionally, you can add the resource to an existing resource group.
                        </p>
                        <p>You can specify resource attributes in either a text file specified with the <code class="codeph">-file</code> option or in a comma-delimited list of resource attribute-value pairs enclosed in double quotation marks (<code class="codeph">""</code>) following the <code class="codeph">-attr</code> option. You must enclose space- or comma-delimited attribute names and values enclosed in parentheses in single quotation marks (<code class="codeph">''</code>).
                        </p>
                        <p>The following is an example of an attribute file:</p><pre class="pre codeblock"><code>PLACEMENT=favored
HOSTING_MEMBERS=node1 node2 node3
RESTART_ATTEMPTS@CARDINALITYID(1)=0
RESTART_ATTEMPTS@CARDINALITYID(2)=0
FAILURE_THRESHOLD@CARDINALITYID(1)=2
FAILURE_THRESHOLD@CARDINALITYID(2)=4
FAILURE_INTERVAL@CARDINALITYID(1)=300
FAILURE_INTERVAL@CARDINALITYID(2)=500
CHECK_INTERVAL=2
CARDINALITY=2</code></pre><p>The following is an example of using the <code class="codeph">-attr</code> option:
                        </p><pre class="pre codeblock"><code>$ crsctl add resource <span class="variable" translate="no">resource_name</span> -type <span class="variable" translate="no">resource_type</span> [-attr "PLACEMENT='
  favored', HOSTING_MEMBERS='node1 node2 node3', ..."]</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-EC749831-C1A0-40DA-B74E-36D8C4B54193" title="You can add resources to Oracle Clusterware at any time.">Adding User-Defined Resources</a></li>
                           <li><a href="oracle-clusterware-control-crsctl-utility-reference.html#GUID-7089B6C0-8701-42E6-B896-674E5E2A06F9" title="Registers a resource to be managed by Oracle Clusterware.">crsctl add resource</a></li>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-B9C16838-0BCC-4F92-B7C5-8E554805556D" title="An integer different for each of the INSTANCE_COUNT resource instances.Resource group attribute that contains a list of resources marked critical for a resource group.The SERVER_POOLS resource attribute is described.List of resources belonging to a resource group. Oracle Clusterware populates and updates this attribute when resources are added to the group.">Resource Attributes</a></li>
                           <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614" title="A resource group is a container for a logically related group of resources.">Resource Groups</a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="CWADD91283"></a><div class="props_rev_3"><a id="GUID-12757637-2D31-45C2-8253-B3DC95D90228" name="GUID-12757637-2D31-45C2-8253-B3DC95D90228"></a><h3 id="CWADD-GUID-12757637-2D31-45C2-8253-B3DC95D90228" class="sect3">Overview of Using Oracle Clusterware to Enable High Availability</h3>
               <div>
                  <p>Oracle Clusterware manages resources and resource groups based on how you configure them to increase their availability.</p>
                  <p>You can configure your resources and resource groups so that Oracle Clusterware:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Starts resources and resource groups during cluster or server start</p>
                     </li>
                     <li>
                        <p>Restarts resources and resource groups when failures occur</p>
                     </li>
                     <li>
                        <p>Relocates resources and resource groups to other servers, if the servers are available</p>
                     </li>
                  </ul>
                  <p>To manage your applications with Oracle Clusterware:</p>
                  <ol>
                     <li>
                        <p>Use the <code class="codeph">generic_application</code> resource type, write a custom script for the script agent, or develop a new agent.
                        </p>
                     </li>
                     <li>
                        <p>Register your applications as resources with Oracle Clusterware.</p>
                        <p>If a single application requires that you register multiple resources, then you can create a resource group that Oracle Clusterware manages like a single resource. You may be required to define relevant dependencies between the resources within the resource group.</p>
                     </li>
                     <li>
                        <p>Assign the appropriate privileges to the resource or resource group.</p>
                     </li>
                     <li>
                        <p>Start or stop your resources and resource groups.</p>
                     </li>
                  </ol>
                  <p>When a resource fails, Oracle Clusterware attempts to restart the resource based on attribute values that you provide when you register an application or process as a resource. If the failed resource is a non-critical resource member of a resource group, then the resource group remains in an ONLINE state. If a server in a cluster fails, then you can configure your resources and resource groups so that processes that were assigned to run on the failed server restart on another server. Based on various resource attributes, Oracle Clusterware supports a variety of configurable scenarios.</p>
                  <p>When you register a resource or create a resource group in Oracle Clusterware, the relevant information about the application and the resource-relevant information, is stored in the Oracle Cluster Registry (OCR). This information includes:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="bold">Path to the action script or application-specific agent</span>: This is the absolute path to the script or application-specific agent that defines the start, stop, check, and clean actions that Oracle Clusterware performs on the application.
                        </p>
                        <div class="infoboxnotealso" id="GUID-12757637-2D31-45C2-8253-B3DC95D90228__GUID-7CB0F7B0-8C35-44C6-A674-51C2077EA696">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-CD3442A5-D6A8-4370-ABDA-CB686A736D3C" title="Oracle Clusterware runs all resource-specific commands through an entity called an agent.">Agents in Oracle Clusterware</a>"</span> for more information about these actions
                           </p>
                        </div>
                     </li>
                  </ul>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="bold">Privileges</span>: Oracle Clusterware has the necessary privileges to control all of the components of your application for high availability operations, including the right to start processes that are owned by other user identities. Oracle Clusterware must run as a privileged user to control applications with the correct start and stop processes.
                        </p>
                     </li>
                     <li>
                        <p><span class="bold">Resource Dependencies</span>: You can create relationships among resources and resource groups that imply an operational ordering or that affect the placement of resources on servers in the cluster. For example, Oracle Clusterware can only start a resource that has a hard start dependency on another resource if the other resource is running. Oracle Clusterware prevents stopping a resource if other resources that depend on it are running. However, you can force a resource to stop using the <code class="codeph">crsctl stop resource -f</code> command, which first stops all resources that depend on the resource being stopped.
                        </p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-2A4BFA93-F8F4-4A19-9F0B-C4C1FA2E7614" title="A resource group is a container for a logically related group of resources.">Resource Groups</a></li>
                        <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-EA5130D2-037B-4144-BF1B-17C6470570B9">Resource Attributes</a></li>
                        <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-C8652895-D23B-49F2-BF4B-57D3A2E660D9">Resource States</a></li>
                        <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-D08A5C19-9EC5-4903-A263-82A52478D8EE">Resource Dependencies</a></li>
                        <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-E1B86B55-D969-4A4B-BE25-266DDA133BC3">Resource Placement</a></li>
                        <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-CD3442A5-D6A8-4370-ABDA-CB686A736D3C" title="Oracle Clusterware runs all resource-specific commands through an entity called an agent.">Agents in Oracle Clusterware</a></li>
                     </ul>
                  </div>
               </div><a id="CWADD91284"></a><div class="props_rev_3"><a id="GUID-EA5130D2-037B-4144-BF1B-17C6470570B9" name="GUID-EA5130D2-037B-4144-BF1B-17C6470570B9"></a><h4 id="CWADD-GUID-EA5130D2-037B-4144-BF1B-17C6470570B9" class="sect4">Resource Attributes</h4>
                  <div>
                     <p>Resource attributes define how Oracle Clusterware manages resources of a specific resource type. Each resource type has a unique set of attributes. Some resource attributes are specified when you register resources, while others are internally managed by Oracle Clusterware.</p>
                     <div class="infoboxnote" id="GUID-EA5130D2-037B-4144-BF1B-17C6470570B9__GUID-A080879F-8380-4312-88FA-8CBC7671176C">
                        <p class="notep1">Note:</p>
                        <p>Where you can define new resource attributes, you can only use US-7 ASCII characters.</p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-9C074F34-F180-4200-A99B-72186DAB56E1" title="An integer different for each of the INSTANCE_COUNT resource instances.Resource group attribute that contains a list of resources marked critical for a resource group.The SERVER_POOLS resource attribute is described.List of resources belonging to a resource group. Oracle Clusterware populates and updates this attribute when resources are added to the group.">Oracle Clusterware Resource Reference</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD91287"></a><a id="CWADD91286"></a><div class="props_rev_3"><a id="GUID-C8652895-D23B-49F2-BF4B-57D3A2E660D9" name="GUID-C8652895-D23B-49F2-BF4B-57D3A2E660D9"></a><h4 id="CWADD-GUID-C8652895-D23B-49F2-BF4B-57D3A2E660D9" class="sect4">Resource States</h4>
                  <div>
                     <div class="section">
                        <p>Every resource in a cluster is in a particular state at any time. Certain actions or events can cause that state to change.</p>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-C8652895-D23B-49F2-BF4B-57D3A2E660D9__BGBFCGAD" title="This table lists and describes possible resource states.">Table 9-3</a> lists and describes the possible <a href="glossary.html#GUID-C020B346-8919-49C2-B70C-AC239F68E6F5"><span class="xrefglossterm">resource state</span></a>s.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-C8652895-D23B-49F2-BF4B-57D3A2E660D9__BGBFCGAD">
                        <p class="titleintable">Table 9-3 Possible Resource States</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Possible Resource States" summary="This table lists and describes possible resource states." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d45801e3939">State</th>
                                 <th align="left" valign="bottom" width="69%" id="d45801e3942">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d45801e3947" headers="d45801e3939 ">
                                    <p>ONLINE</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d45801e3947 d45801e3942 ">
                                    <p>The resource is running.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d45801e3954" headers="d45801e3939 ">
                                    <p>OFFLINE</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d45801e3954 d45801e3942 ">
                                    <p>The resource is not running.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d45801e3961" headers="d45801e3939 ">
                                    <p>UNKNOWN</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d45801e3961 d45801e3942 ">
                                    <p>An attempt to stop the resource has failed. Oracle Clusterware does not actively monitor resources that are in this state. You must perform an application-specific action to ensure that the resource is offline, such as stop a process, and then run the <code class="codeph">crsctl stop resource</code> command to reset the state of the resource to OFFLINE.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d45801e3971" headers="d45801e3939 ">
                                    <p>INTERMEDIATE</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d45801e3971 d45801e3942 ">
                                    <p>A resource can be in the INTERMEDIATE state because of one of two events:</p>
                                    <ol>
                                       <li>
                                          <p>Oracle Clusterware cannot determine the state of the resource but the resource was either attempting to go online or was online the last time its state was precisely known. Usually, the resource transitions out of this state on its own over time, as the conditions that impeded the check action no longer apply.</p>
                                       </li>
                                       <li>
                                          <p>A resource is partially online. For example, the Oracle Database VIP resource fails over to another server when its home server leaves the cluster. However, applications cannot use this VIP to access the database while it is on a non-home server. Similarly, when an Oracle Database instance is started and not open, the resource is partially online: it is running but is not available to provide services.</p>
                                       </li>
                                    </ol>
                                    <p>Oracle Clusterware actively monitors resources that are in the INTERMEDIATE state and, typically, you are not required to intervene. If the resource is in the INTERMEDIATE state due to the preceding reason 1, then as soon as the state of the resource is established, Oracle Clusterware transitions the resource out of the INTERMEDIATE state.</p>
                                    <p>If the resource is in the INTERMEDIATE state due to the preceding reason 2, then it stays in this state if it remains partially online. For example, the home server of the VIP must rejoin the cluster so the VIP can switch over to it. A database administrator must issue a command to open the database instance.</p>
                                    <p>In either case, however, Oracle Clusterware transitions the resource out of the INTERMEDIATE state automatically as soon as it is appropriate.Use the <code class="codeph">STATE_DETAILS</code> resource attribute to explain the reason for a resource being in the INTERMEDIATE state and provide a solution to transition the resource out of this state.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="CWADD91288"></a><div class="props_rev_3"><a id="GUID-D08A5C19-9EC5-4903-A263-82A52478D8EE" name="GUID-D08A5C19-9EC5-4903-A263-82A52478D8EE"></a><h4 id="CWADD-GUID-D08A5C19-9EC5-4903-A263-82A52478D8EE" class="sect4">Resource Dependencies</h4>
                  <div>
                     <p><a id="d45801e4110" class="indexterm-anchor"></a>You can configure resources to be dependent on other resources, so that the dependent resources can only start or stop when certain conditions of the resources on which they depend are met. For example, when Oracle Clusterware attempts to start a resource, it is necessary for any resources on which the initial resource depends to be running and in the same location. If Oracle Clusterware cannot bring the resources online, then the initial (dependent) resource cannot be brought online, either. If Oracle Clusterware stops a resource or a resource fails, then any dependent resource is also stopped.
                     </p>
                     <p>Some resources require more time to start than others. Some resources must start whenever a server starts, while other resources require a manual start action. These and many other examples of resource-specific behavior imply that each resource must be described in terms of how it is expected to behave and how it relates to other resources (resource dependencies).</p>
                     <p>You can configure resources so that they depend on Oracle resources. When creating resources, however, do not use an <span class="italic">ora</span> prefix in the resource name. This prefix is reserved for Oracle use only.
                     </p>
                     <p>Previous versions of Oracle Clusterware included only two dependency specifications: the <code class="codeph">REQUIRED_RESOURCES</code> resource attribute and the <code class="codeph">OPTIONAL_RESOURCES</code> resource attribute. The <code class="codeph">REQUIRED_RESOURCES</code> resource attribute applied to both start and stop resource dependencies.
                     </p>
                     <div class="infoboxnote" id="GUID-D08A5C19-9EC5-4903-A263-82A52478D8EE__GUID-A09D06D0-003F-4CB1-B0A1-201CB14680B2">
                        <p class="notep1">Note:</p>
                        <p>The <code class="codeph">REQUIRED_RESOURCES</code> and <code class="codeph">OPTIONAL_RESOURCES</code> resource attributes are still available only for resources of <code class="codeph">application</code> type. Their use to define resource dependencies in Oracle Clusterware 12<span class="italic">c</span> is deprecated.
                        </p>
                     </div>
                     <p>Resource dependencies are separated into start and stop categories. This separation improves and expands the start and stop dependencies between resources and resource types.</p>
                     <p>This section includes the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-64441104-69E2-4DE3-8C70-D31BDDCEB0E7">Start Dependencies</a></p>
                        </li>
                        <li>
                           <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-6D5ABA04-FD5D-421F-BD0C-2546205DC516">Stop Dependencies</a></p>
                        </li>
                     </ul>
                  </div><a id="CWADD91289"></a><div class="props_rev_3"><a id="GUID-64441104-69E2-4DE3-8C70-D31BDDCEB0E7" name="GUID-64441104-69E2-4DE3-8C70-D31BDDCEB0E7"></a><h5 id="CWADD-GUID-64441104-69E2-4DE3-8C70-D31BDDCEB0E7" class="sect5">Start Dependencies</h5>
                     <div>
                        <p>Oracle Clusterware considers start dependencies contained in the profile of a resource when the <a href="glossary.html#GUID-1B35C701-5E76-4404-9E66-C4E7CCFCCC54"><span class="xrefglossterm">start effort evaluation</span></a> for that resource begins. You specify start dependencies for resources using the <code class="codeph">START_DEPENDENCIES</code> resource attribute. You can use modifiers on each dependency to further configure the dependency.
                        </p>
                        <p>This section includes descriptions of the following START dependencies:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-889D5618-879C-4F31-9429-C22A326A6BCC">attraction</a></p>
                           </li>
                           <li>
                              <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-E1C9BDCA-CAF1-486D-85ED-0A76AE7B914C">dispersion</a></p>
                           </li>
                           <li>
                              <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-21D43F7D-4581-4939-957F-DAB646C98E15">exclusion</a></p>
                           </li>
                           <li>
                              <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-2372E70B-C804-4A57-BF13-852F2F7DAC00">hard</a></p>
                           </li>
                           <li>
                              <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-941E8778-DC39-401F-BAD5-19C424245EEE">pullup</a></p>
                           </li>
                           <li>
                              <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-309A41A1-B0C9-49CA-91BF-509CDB957218">weak</a></p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="oracle-clusterware-resource-reference.html#GUID-D206CD4B-86B7-423B-A6B3-29F41FCFFF9B">START_DEPENDENCIES</a></li>
                           </ul>
                        </div>
                     </div>
                     <div class="props_rev_3"><a id="GUID-889D5618-879C-4F31-9429-C22A326A6BCC" name="GUID-889D5618-879C-4F31-9429-C22A326A6BCC"></a><h6 id="CWADD-GUID-889D5618-879C-4F31-9429-C22A326A6BCC" class="sect6">attraction</h6>
                        <div>
                           <div class="section">
                              <p>If resource A has an <a id="d45801e4450" class="indexterm-anchor"></a><a id="d45801e4456" class="indexterm-anchor"></a><code class="codeph">attraction</code> dependency on resource B, then Oracle Clusterware prefers to place resource A on servers hosting resource B. Dependent resources, such as resource A in this case, are more likely to run on servers on which resources to which they have <code class="codeph">attraction</code> dependencies are running. Oracle Clusterware places dependent resources on servers with resources to which they are attracted.
                              </p>
                              <p>You can configure the <code class="codeph">attraction</code> start dependency with the following constraints:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES=attraction(intermediate:resourceB)</code></p>
                                    <p>Use the <code class="codeph">intermediate</code> modifier to specify whether the resource is attracted to resources that are in the <code class="codeph">INTERMEDIATE</code> state.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES=attraction(type:resourceB.type)</code></p>
                                    <p>Use the <code class="codeph">type</code> modifier to specify whether the dependency acts on a particular resource type. The dependent resource is attracted to the server hosting the greatest number of resources of a particular type.
                                    </p>
                                 </li>
                              </ul>
                              <div class="infoboxnote" id="GUID-889D5618-879C-4F31-9429-C22A326A6BCC__GUID-D12B27FF-B942-448C-821A-850B28E0B079">
                                 <p class="notep1">Note:</p>
                                 <p>Previous versions of Oracle Clusterware used the now deprecated <code class="codeph">OPTIONAL_RESOURCES</code> attribute to express attraction dependency.
                                 </p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                     <div class="props_rev_3"><a id="GUID-E1C9BDCA-CAF1-486D-85ED-0A76AE7B914C" name="GUID-E1C9BDCA-CAF1-486D-85ED-0A76AE7B914C"></a><h6 id="CWADD-GUID-E1C9BDCA-CAF1-486D-85ED-0A76AE7B914C" class="sect6">dispersion</h6>
                        <div>
                           <div class="section">
                              <p>If you specify the <a id="d45801e4616" class="indexterm-anchor"></a><a id="d45801e4622" class="indexterm-anchor"></a><code class="codeph">dispersion</code> start dependency for a resource, then Oracle Clusterware starts this resource on a server that has the fewest number of resources to which this resource has dispersion. Resources with dispersion may still end up running on the same server if there are not enough servers to which to disperse them.
                              </p>
                              <p>You can configure the <code class="codeph">dispersion</code> start dependency with the following modifiers:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES=dispersion(intermediate:resourceB)</code></p>
                                    <p>Use the <code class="codeph">intermediate</code> modifier to specify that Oracle Clusterware disperses resource A whether resource B is either in the <code class="codeph">ONLINE</code> or <code class="codeph">INTERMEDIATE</code> state.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES=dispersion:active(resourceB)</code></p>
                                    <p>Typically, dispersion is only applied when starting resources. If at the time of starting, resources that disperse each other start on the same server (because there are not enough servers at the time the resources start), then Oracle Clusterware leaves the resources alone once they are running, even when more servers join the cluster. If you specify the <code class="codeph">active</code> modifier, then Oracle Clusterware reapplies dispersion on resources later when new servers join the cluster.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES=dispersion(pool:resourceB)</code></p>
                                    <p>Use the <code class="codeph">pool</code> modifier to specify that Oracle Clusterware disperses the resource to a different server pool rather than to a different server.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                     <div class="props_rev_3"><a id="GUID-21D43F7D-4581-4939-957F-DAB646C98E15" name="GUID-21D43F7D-4581-4939-957F-DAB646C98E15"></a><h6 id="CWADD-GUID-21D43F7D-4581-4939-957F-DAB646C98E15" class="sect6">exclusion</h6>
                        <div>
                           <div class="section">
                              <p>The <a id="d45801e4784" class="indexterm-anchor"></a><a id="d45801e4790" class="indexterm-anchor"></a><code class="codeph">exclusion</code> start dependency contains a clause that defines the exclusive relationship between resources while starting. Resources that have the <code class="codeph">exclusion</code> start dependency cannot run on the same node. For example, if resource A has an <code class="codeph">exclusion</code> start dependency on resource B, then the CRSD policy provides the following options when resource B is already running on the server where resource A needs to start:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Deny the start of resource A if resource B is already running.</p>
                                 </li>
                                 <li>
                                    <p>Start resource A by preempting resource B. There are two variations to the preempt operation:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>Resource B is stopped and, if possible, restarted on another node. Resource A is subsequently started.</p>
                                       </li>
                                       <li>
                                          <p>Resource A is started first. Subsequently, resource B is stopped and, if possible, restarted on another node.</p>
                                       </li>
                                    </ul>
                                 </li>
                              </ul>
                              <p>You can configure the <code class="codeph">exclusion</code> start dependency with the following modifiers:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES=exclusion([[preempt_pre: | preempt_post:]]</code> <span class="italic"><code class="codeph">target_resource_name</code></span><code class="codeph"> | type:</code><span class="italic"><code class="codeph">target_resource_type</code></span><code class="codeph">]*)</code></p>
                                    <p>All modifiers specified are per resource or resource type. Oracle Clusterware permits only one <code class="codeph">exclusion</code> dependency per resource dependency tree. Without any <code class="codeph">preempt</code> modifier, CRSD will only attempt to start the resource if all of its target resources are offline.
                                    </p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><code class="codeph">preempt_pre</code>: If you choose this preempt modifier, then CRSD stops the specified target resource or resources defined by a specific resource type before starting the source resource. If restarting the stopped resources is possible, then CRSD can do this concurrently while starting the preempting resource.
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">preempt_post</code>: If you choose this preempt modifier, then, after starting the source resource, CRSD stops and relocates, if possible, the specified target resource or resources defined by a specific resource type.
                                          </p>
                                       </li>
                                    </ul>
                                    <p>If CRSD cannot stop the target resources successfully, or cannot start the source resource, then the entire operation fails. Oracle Clusterware then attempts to return the affected resources to their original state, if possible.</p>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                     <div class="props_rev_3"><a id="GUID-2372E70B-C804-4A57-BF13-852F2F7DAC00" name="GUID-2372E70B-C804-4A57-BF13-852F2F7DAC00"></a><h6 id="CWADD-GUID-2372E70B-C804-4A57-BF13-852F2F7DAC00" class="sect6">hard</h6>
                        <div>
                           <div class="section">
                              <p>Define a <a id="d45801e4975" class="indexterm-anchor"></a><a id="d45801e4981" class="indexterm-anchor"></a><code class="codeph">hard</code> start dependency for a resource if another resource must be running before the dependent resource can start. For example, if resource A has a <code class="codeph">hard</code> start dependency on resource B, then resource B must be running before resource A can start. Similarly, if both resources (A and B) are initially offline, then resource B is started first to satisfy resource A's dependency.
                              </p>
                              <div class="infoboxnote" id="GUID-2372E70B-C804-4A57-BF13-852F2F7DAC00__GUID-2B11E504-9A5A-42B1-8ED5-F5CF25B05535">
                                 <p class="notep1">Note:</p>
                                 <p>Oracle recommends that resources with <code class="codeph">hard</code> start dependencies also have <code class="codeph">pullup</code> start dependencies.
                                 </p>
                              </div>
                              <p>You can configure the <code class="codeph">hard</code> start dependency with the following constraints:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES=hard(global:resourceB)</code></p>
                                    <p>By default, resources A and B must be located on the same server (collocated). Use the <code class="codeph">global</code> modifier to specify that resources need not be collocated. For example, if resource A has a <code class="codeph">hard(global:resourceB)</code> start dependency on resource B, then, if resource B is running on any node in the cluster, resource A can start.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES=hard(intermediate:resourceB)</code></p>
                                    <p>Use the <code class="codeph">intermediate</code> modifier to specify that the dependent resource can start if a resource on which it depends is in either the <code class="codeph">ONLINE</code> or <code class="codeph">INTERMEDIATE</code> state.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES=hard(type:resourceB.type)</code></p>
                                    <p>Use the <code class="codeph">type</code> modifier to specify whether the <code class="codeph">hard</code> start dependency acts on a particular resource or a resource type. For example, if you specify that resource A has a <code class="codeph">hard</code> start dependency on the <code class="codeph">resourceB.type</code> type, then if any resource of the <code class="codeph">resourceB.type</code> type is running, resource A can start.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES=hard(uniform:resourceB)</code></p>
                                    <p>Use the <code class="codeph">uniform</code> modifier to attempt to start all instances of resource B, but only one instance, at least must start to satisfy the dependency.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES=hard(resourceB, intermediate:resourceC, intermediate:global:type:resourceC.type)</code></p>
                                    <p>You can combine modifiers and specify multiple resources in the <code class="codeph">START_DEPENDENCIES</code> resource attribute.
                                    </p>
                                    <div class="infoboxnote" id="GUID-2372E70B-C804-4A57-BF13-852F2F7DAC00__GUID-1A7F3227-2062-4289-926E-95101710B788">
                                       <p class="notep1">Note:</p>
                                       <p>Separate modifier clauses with commas. The <code class="codeph">type</code> modifier clause must always be the last modifier clause in the list and the <code class="codeph">type</code> modifier must always directly precede the type.
                                       </p>
                                    </div>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                     <div class="props_rev_3"><a id="GUID-941E8778-DC39-401F-BAD5-19C424245EEE" name="GUID-941E8778-DC39-401F-BAD5-19C424245EEE"></a><h6 id="CWADD-GUID-941E8778-DC39-401F-BAD5-19C424245EEE" class="sect6">pullup</h6>
                        <div>
                           <div class="section">
                              <p>Use the <a id="d45801e5198" class="indexterm-anchor"></a><a id="d45801e5204" class="indexterm-anchor"></a><code class="codeph">pullup</code> start dependency if resource A must automatically start whenever resource B starts. This dependency only affects resource A if it is not running. As is the case for other dependencies, <code class="codeph">pullup</code> may cause the dependent resource to start on any server. Use the <code class="codeph">pullup</code> dependency whenever there is a hard stop dependency, so that if resource A depends on resource B and resource B fails and then recovers, then resource A is restarted.
                              </p>
                              <div class="infoboxnote" id="GUID-941E8778-DC39-401F-BAD5-19C424245EEE__GUID-1B3FEA2E-6622-410E-9B4E-50B5F3CEF3D4">
                                 <p class="notep1">Note:</p>
                                 <p>Oracle recommends that resources with <code class="codeph">hard</code> start dependencies also have <code class="codeph">pullup</code> start dependencies.
                                 </p>
                              </div>
                              <p>You can configure the <code class="codeph">pullup</code> start dependency with the following constraints:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES=pullup(intermediate:resourceB)</code></p>
                                    <p>Use the <code class="codeph">intermediate</code> modifier to specify whether resource B can be either in the <code class="codeph">ONLINE</code> or <code class="codeph">INTERMEDIATE</code> state to start resource A.
                                    </p>
                                    <p>If resource A has a <code class="codeph">pullup</code> dependency on multiple resources, then resource A starts only when all resources upon which it depends, start.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES=pullup:always(resourceB)</code></p>
                                    <p>Use the <code class="codeph">always</code> modifier to specify whether Oracle Clusterware starts resource A despite the value of its <code class="codeph">TARGET</code> attribute, whether it is <code class="codeph">ONLINE</code> or <code class="codeph">OFFLINE</code>. By default, without using the <code class="codeph">always</code> modifier, <code class="codeph">pullup</code> only starts resources if the value of the <code class="codeph">TARGET</code> attribute of the dependent resource is <code class="codeph">ONLINE</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES=pullup(type:resourceB.type)</code></p>
                                    <p>Use the <code class="codeph">type</code> modifier to specify that the dependency acts on a particular resource type.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                     <div class="props_rev_3"><a id="GUID-309A41A1-B0C9-49CA-91BF-509CDB957218" name="GUID-309A41A1-B0C9-49CA-91BF-509CDB957218"></a><h6 id="CWADD-GUID-309A41A1-B0C9-49CA-91BF-509CDB957218" class="sect6">weak</h6>
                        <div>
                           <div class="section">
                              <p>If resource A has a <a id="d45801e5408" class="indexterm-anchor"></a><a id="d45801e5414" class="indexterm-anchor"></a><code class="codeph">weak</code> start dependency on resource B, then an attempt to start resource A attempts to start resource B, if resource B is not running. The result of the attempt to start resource B is, however, of no consequence to the result of starting resource A.
                              </p>
                              <p>You can configure the <code class="codeph">weak</code> start dependency with the following constraints:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES=weak(global:resourceB)</code></p>
                                    <p>By default, resources A and B must be collocated. Use the <code class="codeph">global</code> modifier to specify that resources need not be collocated. For example, if resource A has a <code class="codeph">weak(global:resourceB)</code> start dependency on resource B, then, if resource B is running on any node in the cluster, resource A can start.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES=weak(concurrent:resourceB)</code></p>
                                    <p>Use the <code class="codeph">concurrent</code> modifier to specify that resource A and resource B can start concurrently.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES=weak(type:resourceB.type)</code></p>
                                    <p>Use the <code class="codeph">type</code> modifier to specify that the dependency acts on a resource of a particular resource type, such as <code class="codeph">resourceB.type</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">START_DEPENDENCIES=weak(uniform:resourceB)</code></p>
                                    <p>Use the <code class="codeph">uniform</code> modifier to attempt to start all instances of resource B.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div><a id="CWADD91295"></a><div class="props_rev_3"><a id="GUID-6D5ABA04-FD5D-421F-BD0C-2546205DC516" name="GUID-6D5ABA04-FD5D-421F-BD0C-2546205DC516"></a><h5 id="CWADD-GUID-6D5ABA04-FD5D-421F-BD0C-2546205DC516" class="sect5">Stop Dependencies</h5>
                     <div>
                        <p>Oracle Clusterware considers stop dependencies between resources whenever a resource is stopped (the resource state changes from <code class="codeph">ONLINE</code> to any other state).
                        </p>
                     </div>
                     <div class="props_rev_3"><a id="GUID-BFF2978A-8964-4202-84A6-F5D632D2F941" name="GUID-BFF2978A-8964-4202-84A6-F5D632D2F941"></a><h6 id="CWADD-GUID-BFF2978A-8964-4202-84A6-F5D632D2F941" class="sect6">hard</h6>
                        <div>
                           <div class="section">
                              <p>If resource A has a <code class="codeph">hard</code> stop dependency on resource B, then resource A must be stopped when B stops running. The two resources may attempt to start or relocate to another server, depending upon how they are configured. Oracle recommends that resources with <code class="codeph">hard</code> stop dependencies also have <code class="codeph">hard</code> start dependencies.
                              </p>
                              <p>You can configure the <code class="codeph">hard</code> stop dependency with the following modifiers:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">STOP_DEPENDENCIES=hard(intermedite:resourceB)</code></p>
                                    <p>Use the <code class="codeph">intermediate</code> modifier to specify whether resource B must be in either the <code class="codeph">ONLINE</code> or <code class="codeph">INTERMEDIATE</code> state for resource A to stay online.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">STOP_DEPENDENCIES=hard(global:resourceB)</code></p>
                                    <p>Use the <code class="codeph">global</code> modifier to specify whether resource A requires that resource B be present on the same server or on any server in the cluster to remain online. If this constraint is not specified, then resources A and B must be running on the same server. Oracle Clusterware stops resource A when that condition is no longer met.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">STOP_DEPENDENCIES=hard(shutdown:resourceB)</code></p>
                                    <p>Use the <code class="codeph">shutdown</code> modifier to stop the resource only when you shut down the Oracle Clusterware stack using either the <code class="codeph">crsctl stop crs</code> or <code class="codeph">crsctl stop cluster</code> commands.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <!-- class="section" -->
                        </div>
                        <div>
                           <div class="relinfo">
                              <p><strong>Related Topics</strong></p>
                              <ul>
                                 <li><a href="oracle-clusterware-resource-reference.html#GUID-B9A3A99B-8FC0-44C6-8570-64EF1F58E928">STOP_DEPENDENCIES</a></li>
                              </ul>
                           </div>
                        </div>
                     </div>
                     <div class="props_rev_3"><a id="GUID-751CD1E7-FEE1-4AC4-ADC3-BEE7C47B796F" name="GUID-751CD1E7-FEE1-4AC4-ADC3-BEE7C47B796F"></a><h6 id="CWADD-GUID-751CD1E7-FEE1-4AC4-ADC3-BEE7C47B796F" class="sect6">Effect of Resource Dependencies on Resource State Recovery</h6>
                        <div>
                           <p>When a resource goes from a running to a non-running state, while the intent to have it running remains unchanged, this transition is called a <span class="italic">resource failure</span>. At this point, Oracle Clusterware applies a resource state recovery procedure that may try to restart the resource locally, relocate it to another server, or just stop the dependent resources, depending on the high availability policy for resources and the state of entities at the time.
                           </p>
                           <p>When two or more resources depend on each other, a failure of one of them may end up causing the other to fail, as well. In most cases, it is difficult to control or even predict the order in which these failures are detected. For example, even if resource A depends on resource B, Oracle Clusterware may detect the failure of resource B after the failure of resource A.</p>
                           <p>This lack of failure order predictability can cause Oracle Clusterware to attempt to restart dependent resources in parallel, which, ultimately, leads to the failure to restart some resources, because the resources upon which they depend are being restarted out of order.</p>
                           <p>In this case, Oracle Clusterware reattempts to restart the dependent resources locally if either or both the <code class="codeph">hard</code> stop and <code class="codeph">pullup</code> dependencies are used. For example, if resource A has either a <code class="codeph">hard</code> stop dependency or <code class="codeph">pullup</code> dependency, or both, on resource B, and resource A fails because resource B failed, then Oracle Clusterware may end up trying to restart both resources at the same time. If the attempt to restart resource A fails, then as soon as resource B successfully restarts, Oracle Clusterware reattempts to restart resource A.
                           </p>
                        </div>
                     </div>
                  </div>
               </div><a id="CWADD92087"></a><div class="props_rev_3"><a id="GUID-E1B86B55-D969-4A4B-BE25-266DDA133BC3" name="GUID-E1B86B55-D969-4A4B-BE25-266DDA133BC3"></a><h4 id="CWADD-GUID-E1B86B55-D969-4A4B-BE25-266DDA133BC3" class="sect4">Resource Placement</h4>
                  <div>
                     <p>As part of the start effort evaluation, the first decision that Oracle Clusterware must make is where to start (or place) the resource. Making such a decision is easy when the caller specifies the target server by name. If a target server is not specified, however, then Oracle Clusterware attempts to locate the best possible server for placement given the resource's configuration and the current state of the cluster.</p>
                     <p>Oracle Clusterware considers a resource's placement policy first and filters out servers that do not fit with that policy. Oracle Clusterware sorts the remaining servers in a particular order depending on the value of the <code class="codeph">PLACEMENT</code> resource attribute of the resource.
                     </p>
                     <p>The result of this consideration is a maximum of two lists of candidate servers on which Oracle Clusterware can start the resource. One list contains preferred servers and the other contains possible servers. The list of preferred servers will be empty if the value of the <code class="codeph">PLACEMENT</code> resource attribute for the resource is set to <code class="codeph">balanced</code> or <code class="codeph">restricted</code>. The placement policy of the resource determines on which server the resource wants to run. Oracle Clusterware considers preferred servers over possible servers, if there are servers in the preferred list.
                     </p>
                     <p>Oracle Clusterware then considers the resource's dependencies to determine where to place the resource, if any exist. The <a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-889D5618-879C-4F31-9429-C22A326A6BCC">attraction</a> and <a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-E1C9BDCA-CAF1-486D-85ED-0A76AE7B914C">dispersion</a> start dependencies affect the resource placement decision, as do some dependency modifiers. Oracle Clusterware applies these placement hints to further order the servers in the two previously mentioned lists. Note that Oracle Clusterware processes each list of servers independently, so that the effect of the resource's placement policy is not confused by that of dependencies.
                     </p>
                     <p>Finally, Oracle Clusterware chooses the first server from the list of preferred servers, if any servers are listed. If there are no servers on the list of preferred servers, then Oracle Clusterware chooses the first server from the list of possible servers, if any servers are listed. When no servers exist in either list, Oracle Clusterware generates a resource placement error.</p>
                     <div class="infoboxnote" id="GUID-E1B86B55-D969-4A4B-BE25-266DDA133BC3__GUID-BC7FFDAE-C12C-440D-BC46-CD1A002009CB">
                        <p class="notep1">Note:</p>
                        <p>Neither the placement policies nor the dependencies of the resources related to the resource Oracle Clusterware is attempting to start affect the placement decision.</p>
                     </div>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-C0FEFBDC-CA87-436A-ACA4-A5BAC4D18963" title="A resource can be started on any server, subject to the placement policies, the resource start dependencies, and the availability of the action script on that server.">Application Placement Policies</a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="CWADD91297"></a><div class="props_rev_3"><a id="GUID-031885D1-164F-4A71-9E9C-C7237DAE914B" name="GUID-031885D1-164F-4A71-9E9C-C7237DAE914B"></a><h3 id="CWADD-GUID-031885D1-164F-4A71-9E9C-C7237DAE914B" class="sect3">Registering an Application as a Resource</h3>
               <div>
                  <p>This section presents examples of the procedures for registering an application as a resource in Oracle Clusterware.</p>
                  <p>The procedures instruct you how to add an Apache Web server (as an example) as a resource to Oracle Clusterware. The examples in this section assume that the Oracle Clusterware administrator has full administrative privileges over Oracle Clusterware and the user or group that owns the application that Oracle Clusterware is going to manage. Once the registration process is complete, Oracle Clusterware can start any application on behalf of any operating system user.</p>
                  <p>Oracle Clusterware distinguishes between an owner of a registered resource and a user. The owner of a resource is the operating system user under which the agent runs. The <code class="codeph">ACL</code> resource attribute of the resource defines permissions for the users and the owner. Only <code class="codeph">root</code> can modify any resource.
                  </p>
                  <div class="infoboxnote" id="GUID-031885D1-164F-4A71-9E9C-C7237DAE914B__GUID-16C5F6F3-85C0-4AE5-AAB8-029868212B8E">
                     <p class="notep1">Note:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Oracle Clusterware commands prefixed with <code class="codeph">crs_</code> are desupported with this release and can no longer be used. CRSCTL commands replace those commands. See <span class="q">"Oracle Clusterware Control (CRSCTL) Utility Reference"</span> for a list of CRSCTL commands and their corresponding <code class="codeph">crs_</code> commands.
                           </p>
                        </li>
                        <li>
                           <p>Do not use CRSCTL commands on any resources that have names prefixed with <code class="codeph">ora</code> (because these are Oracle resources), unless My Oracle Support directs you to do so.
                           </p>
                           <p>To configure Oracle resources, use the server control utility, SRVCTL, which provides you with all configurable options.</p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="oracle-clusterware-control-crsctl-utility-reference.html#GUID-1A6774CF-FD5F-463E-817F-34E4466443C7" title="CRSCTL is an interface between you and Oracle Clusterware, parsing and calling Oracle Clusterware APIs for Oracle Clusterware objects.Information about using the CRSCTL command-line interface.Use these commands in either the Oracle RAC or the Oracle Restart environments.Checks the status of Cluster Synchronization Services.Checks the status of the Event Manager.Retrieves the host name of the local server.Registers a resource to be managed by Oracle Clusterware.Removes resources from the Oracle Clusterware configuration.Predicts the effects of adding a resource without making changes to the system.Predicts the consequences of a resource failing.Simulates relocating a resource without making changes to the system.Predicts the effects of modifying a resource without making changes to the system.Predicts the effects of starting a resource without making changes to the system.Predicts the effect of stopping a resource without making changes to the system.Displays the user and group permissions for the specified resource.Modifies the attributes of a particular resource in Oracle Clusterware.Relocates resources to another server in the cluster.Restarts idle resources in the cluster, instead of having to run two commands to stop and start the resource.Sets permissions for a particular resource.Starts idle resources on a particular server in the cluster.Obtains the status and configuration information of any number of particular resources.Stops running resources.Creates a resource group based on a resource group type.Initiates a check operation on all member resources of the specified groups.Deletes one or more resource groups from Oracle Clusterware.Predicts the effects of adding a resource group without making changes to the system.Predicts the consequences of a resource failing.Predicts the effect of relocating a resource group without making changes to the system.Predicts the effects of starting a resource group without making changes to the system.Predicts the effect of stopping a resource group without making changes to the system.Exports the complete information and attributes of a resource groups and its member resources to a script file.Modifies a resource group to add attributes or update the values of existing attributes.Relocates online resource groups from a source server to a target server.Restarts resource groups on the server where they currently reside.Starts one or more resource groups on specific or preconfigured servers or server pools.Displays the state of resource groups.Stops one or more resource groups on optionally specified preconfigured servers or server pools.Registers a new resource group type in Oracle Clusterware.Deletes one or more resource group types from Oracle Clusterware.Modifies a resource group type to add attributes or update the values of existing attributes.Returns the tracing settings for a specific module.Sets the tracing parameters for a specific module.Creates a resource type in Oracle Clusterware.Removes resource types from the Oracle Clusterware configuration.Obtains permissions for a particular resource type.Modifies an existing resource type.Sets permissions for resources of a particular resource type.Obtains the configuration information of one or more particular resource types.Creates and adds users to a wallet.Removes wallets or users from a wallet.Modifies the password for a specific user in a specific wallet.Queries low-privileged users from a wallet.You can use the following commands only in an Oracle RAC environment.Performs a specific action on specific resource.Adds a server category.Deletes a server category.Modifies an existing server category.Obtains information about a server category.Checks the status of the Oracle Clusterware stack from any node in the cluster.Starts the Oracle Clusterware stack when run on any node in the cluster.Stops the Oracle Clusterware stack on all servers in the cluster or specific servers when you run the command on any node in the cluster.Obtains cluster class information.Displays the cluster configuration information.Adds a cipher suite to or removes a cipher suite from a list of disabled cipher suites used to secure inter-node communication.Determines whether the cluster is an extended cluster.Obtains the value of Hub Nodes in an Oracle Flex Cluster.Sets the maximum number of Hub Nodes for an Oracle Flex Cluster.Ascertains whether the cluster is configured for Oracle Flex Clusters or obtains the current status.Changes a standard cluster to an Oracle Flex Cluster.Displays the current cluster name.Use the crsctl add cluster site command to add a site to an extended cluster.Use the crsctl delete cluster site command to delete a specific site from an extended cluster.Modifies the configuration of a site in an extended cluster.Displays site information in an extended cluster.Lists available cipher suites used by transport layer security for securing inter-node communication.Use the crsctl get cluster type command to determine whether the cluster is an Oracle Flex Cluster or an application cluster.Sets the type of the cluster.The crsctl get cpu equivalency command obtains the value of the CPU_EQUIVALENCY server configuration attribute.The crsctl set cpu equivalency command sets a value for the CPU_EQUIVALENCY server configuration attribute.Checks the status of Oracle High Availability Services and the Oracle Clusterware stack on the local server.Displays Oracle High Availability Services automatic startup configuration.Prevents the automatic startup of Oracle High Availability Services when the server boots.Enables automatic startup of Oracle High Availability Services when the server boots.Starts Oracle High Availability Services on the local server.Stops Oracle High Availability Services on the local server.Displays the active version and the configured patch level of the Oracle Clusterware software running in the cluster.Adds a user to the list of cluster administrators.Removes a user from the list of Oracle Clusterware administrators.Displays the list of users with Oracle Clusterware administrative privileges.Obtains the values of the Oracle Clusterware automatic resource start criteria.Sets the Oracle Clusterware automatic resource start criteria.Displays the patch level which is updated in the Grid home patch repository while patching a node.Displays the version of the Oracle Clusterware software stored in the binaries on the local node.Use the crsctl query crs site command to determine to which site a specific host or disk belongs.Displays the configured patch level of the installed Oracle Clusterware.Displays the latest version of the software that has been successfully started on the specified node.Obtains the value of a specific Cluster Synchronization Services parameter.Pins many specific nodes.Sets the value of a Cluster Synchronization Services parameter.Unpins many servers.Unsets the value of a Cluster Synchronization Services parameter and restores it to its default value.Retrieves the address stored in the Oracle Local Registry of the local Intelligent Platform Management Interface (IPMI) device.Stores the address of the local Intelligent Platform Management Interface (IPMI) device in the Oracle Local Registry.Stores the login credentials of an Intelligent Platform Management Interface (IPMI) administrator in the Oracle Local Registry.Determines whether Oracle Clusterware on the local server has been configured to use IPMI for failure isolation.Clears all previously stored IPMI configuration (login credentials and IP address) from the Oracle Local Registry.Determines the presence of the Intelligent Platform Management Interface (IPMI) driver on the local system.Lists the problems for which automatic restart of Cluster Synchronization Services is disabled.Stops the automatic restart of Cluster Synchronization Services when a specific problem occurs.Removes a voting file from the Oracle Clusterware configuration.Displays the voting files used by Cluster Synchronization Services, the status of the voting files, and the location of the disks, whether they are stored in Oracle ASM or elsewhere.Checks the status of the Cluster Time Synchronization services.Sends DHCP discover packets on the network at the specified port. If DHCP servers are present on the network, then they respond to the discovery message and the command succeeds.Displays the client ID that the Oracle Clusterware agent uses to obtain the IP addresses from the DHCP server for configured cluster resources. The VIP type is required.Sends a DHCP lease release request to a specific client ID, and sends release packets on the network to a specific port.Sends DHCP request packets on the network to the specified port.Replaces the existing discovery string used to locate voting files.Obtains a list of addresses returned by DNS lookup of the name with the specified DNS server.Starts a given IP name or IP address on a specified interface with a specified subnet mask.Checks if a given IP address is up on the network.Stops a given IP name or IP address on a specified interface with a specified subnet mask.Lists the components of the modules that you can debug.Creates the configuration deployment file for a new member cluster.Deletes a member cluster configuration.Displays the configuration for a member cluster.Removes a node from the cluster.Obtains the name of the local node.Obtains the configured node role of nodes in the cluster.Adds a configuration policy to the policy set.Deletes a configuration policy from the policy set.Predicts the effects of activating a specific policy without making changes to the system.Modifies an existing configuration policy.Obtains the status and definition of a configuration policy.Creates a single policy set, in the form of a text file, that reflects the server pool configuration.Modifies an existing policy set.Obtains the current policies in the policy set, including the access control list, which governs who can modify the set, the last activated policy, and the configuration which is now in effect, which is known as the Current policy.Initiates the check action inside the application-specific agent of a particular resource.Relocates resources to another server in the cluster.Checks the current setting value of the RESOURCE_USE_ENABLED server configuration parameter.Sets the value of the RESOURCE_USE_ENABLED server configuration parameter for the server on which you run this command.Transitions Oracle Clusterware and Oracle ASM into rolling patch mode.Transitions Oracle Clusterware and Oracle ASM out of rolling patch mode.Transitions Oracle Clusterware and Oracle ASM into rolling upgrade mode.Simulates the addition of a server without making changes to the system.Predicts the effects of deleting a server without making changes to the system.Predicts the effects of relocating a server to a different server pool without making changes to the system. Modifies the configuration of a particular server.Relocates a server to a different server pool.Obtains the status and configuration information of one or more particular servers.Obtains the current configured value for the CSS_CRITICAL server attributeSets the configuration value for the CSS_CRITICAL server attribute.Checks the current setting value of the SERVER_LABEL server attribute.Sets the configuration value of the SERVER_LABEL server configuration attribute for the server on which you run this command.Adds a server pool that is for hosting non-database resources (such as application servers) to Oracle Clusterware.Removes a server pool from the Oracle Clusterware configuration.Predicts the effects of adding a server pool without making changes to the system.Simulates the deletion of a server pool without making changes to the system.Use the crsctl eval modify serverpool command to predict the effects of modifying a server pool without making changes to the system. This command may be useful to cluster administrators.Retrieves permissions for a particular server pool.Modifies an existing server pool.Sets permissions for a particular server pool.Retrieves the status and configuration information of one or more particular server pools.Verifies that a daemon can listen on a specified address and port.Starts a test DNS server that will listen on a specified IP address and port.Queries the test DNS server running on a specified address and local host name.Stops a test DNS server.Moves or replaces the existing voting files.You can only use these commands in the Oracle Restart environment.Checks the status of ohasd.Displays the automatic startup configuration of the Oracle High Availability Services stack on the server.Disables automatic startup of the Oracle High Availability Services stack when the server boots up.Enables automatic startup of the Oracle High Availability Services stack when the server boots up.Displays the release version of the Oracle Clusterware software that is stored in the binaries on the local node.Displays the software version on the local node.Starts Oracle High Availability Services on the local server.Stops Oracle High Availability Services on the local server.You can use crsctl set log commands as the root user to enable dynamic debugging for Cluster Ready Services (CRS), Cluster Synchronization Services (CSS), and the Event Manager (EVM), and the clusterware subcomponents.Setting log levels for Oracle Clusterware.You can enable debugging for Oracle Clusterware modules and their components, and for resources, by setting environment variables or by running the crsctl set log command.">Oracle Clusterware Control (CRSCTL) Utility Reference</a></li>
                        <li><a href="oracle-clusterware-administration.html#GUID-CAD9DDFE-1B4E-41BB-8029-3E9578639BD6" title="Role-separated management is an approach to managing cluster resources and workloads in a coordinated fashion in order to reduce the risks of resource conflicts and shortages.">Role-Separated Management</a></li>
                     </ul>
                  </div>
               </div><a id="CWADD91298"></a><div class="props_rev_3"><a id="GUID-AFA2B0A1-479F-4DAB-A9D0-226C30260DD8" name="GUID-AFA2B0A1-479F-4DAB-A9D0-226C30260DD8"></a><h4 id="CWADD-GUID-AFA2B0A1-479F-4DAB-A9D0-226C30260DD8" class="sect4">Creating an Application VIP Managed by Oracle Clusterware</h4>
                  <div>
                     <p>An application VIP is a cluster resource that Oracle Clusterware manages (Oracle Clusterware provides a standard VIP agent for application VIPs).</p>
                     <div class="section">
                        <p>If clients of an application access the application through a network, and the placement policy for the application allows it to fail over to another node, then you must register a virtual internet protocol address (VIP) on which the application depends. You should base any new application VIPs on this VIP type to ensure that your system experiences consistent behavior among all of the VIPs that you deploy in your cluster.</p>
                        <p>While you can add a VIP in the same way that you can add any other resource that Oracle Clusterware manages, Oracle recommends using the <code class="codeph"><span class="variable" translate="no">Grid_home</span>/bin/appvipcfg</code> command-line utility to create or delete an application VIP on the default network for which the <code class="codeph">ora.net1.network</code> resource is created by default.
                        </p>
                        <p>To create an application VIP, use the following syntax:</p><pre class="pre codeblock"><code>appvipcfg create -network=<span class="variable" translate="no">network_nummber</span> -ip=<span class="variable" translate="no">ip_address</span> -vipname=<span class="variable" translate="no">vip_name</span>
-user=<span class="variable" translate="no">user_name</span> [-group=<span class="variable" translate="no">group_name</span>] [-failback=0 | 1]</code></pre><div class="infoboxnote" id="GUID-AFA2B0A1-479F-4DAB-A9D0-226C30260DD8__GUID-2DC627DF-03EF-408F-9A56-31CB1FA7AF61">
                           <p class="notep1">Note:</p>
                           <p>You can modify the VIP name while the resource remains online, without restarting the resource.</p>
                        </div>
                        <p>When you create an application VIP on a default network, set <code class="codeph">-network=1</code>.
                        </p>
                        <p>To create an application VIP on a non-default network, you may have to first create the network using the <code class="codeph">srvctl add network</code> command. Then you can create the application VIP, setting <code class="codeph">-network=</code><span class="italic"><code class="codeph">non-default_network_number</code></span>.
                        </p>
                        <p>In an Oracle Flex Cluster, you can also add a non-Hub Node network resource for application VIPs, so that applications can run on non-Hub Nodes using the <code class="codeph">srvctl add network</code> command, as follows:
                        </p><pre class="oac_no_warn" dir="ltr">srvctl add network -netnum=<span class="italic">network_number</span> -subnet <span class="italic">subnet</span>/<span class="italic">netmask</span>[/<span class="italic">if1</span>[|<span class="italic">if2</span>|...]]</pre><p>To delete an application VIP, use the following syntax:</p><pre class="pre codeblock"><code>appvipcfg delete -vipname=<span class="variable" translate="no">vip_name</span></code></pre><p>In the preceding syntax examples, <code class="codeph"><span class="variable" translate="no">network_number</span></code> is the number of the network, <code class="codeph"><span class="variable" translate="no">ip_address</span></code> is the IP address, <code class="codeph"><span class="variable" translate="no">vip_name</span></code> is the name of the VIP, <code class="codeph"><span class="variable" translate="no">user_name</span></code> is the name of the user who installed Oracle Database, and <code class="codeph"><span class="variable" translate="no">group_name</span></code> is the name of the group. The default value of the <code class="codeph">-failback</code> option is 0. If you set the option to 1, then the VIP (and therefore any resources that depend on VIP) fails back to the original node when it becomes available again.
                        </p>
                        <div class="infoboxnote" id="GUID-AFA2B0A1-479F-4DAB-A9D0-226C30260DD8__GUID-16314523-21A3-4E2D-AAAB-3BEC757D1DA4">
                           <p class="notep1">Note:</p>
                           <p>The <code class="codeph">-ip=<span class="variable" translate="no">ip_address</span></code> parameter is required, but if Grid Plug and Play and GNS with DHCP have been configured, the parameter always takes the IP address from the DHCP server and ignores the IP address specified in the command. The value for the <code class="codeph">-vipname=<span class="variable" translate="no">vip_name</span></code> parameter is also ignored with DHCP.
                           </p>
                        </div>
                        <p>For example, as <code class="codeph">root</code>, run the following command:
                        </p><pre class="pre codeblock"><code># <span class="variable" translate="no">Grid_home</span>/bin/appvipcfg create -network=1 -ip=148.87.58.196 -vipname=appsVIP -user=root</code></pre><p>The script only requires a network number, the IP address, and a name for the VIP resource, in addition to the user that owns the application VIP resource. A VIP resource is typically owned by <code class="codeph">root</code> because VIP related operations require root privileges.
                        </p>
                        <p>To delete an application VIP, use the same script with the <code class="codeph">delete</code> option. This option accepts the VIP name as a parameter. For example:
                        </p><pre class="pre codeblock"><code># <span class="variable" translate="no">Grid_home</span>/bin/appvipcfg delete -vipname=appsVIP</code></pre><p>After you have created the application VIP using this configuration script, you can view the VIP profile using the following command:</p><pre class="pre codeblock"><code>$ <span class="variable" translate="no">Grid_home</span>/bin/crsctl status res appsVIP -p</code></pre><p>Verify and, if required, modify the following parameters using the <code class="codeph"><span class="variable" translate="no">Grid_home</span>/bin/crsctl modify res</code> command.
                        </p>
                        <p>The <code class="codeph">appvipcfg</code> script requires that you specify the <code class="codeph">-network</code> option, even if <code class="codeph">-network=1</code>.
                        </p>
                        <p>As the Oracle Database installation owner, start the VIP resource:</p><pre class="pre codeblock"><code>$ crsctl start resource appsVIP</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../racad/server-control-utility-reference.html#RACAD-GUID-E9B08A79-CE87-47ED-8FD8-7EAF421CCD88" target="_blank"><span><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></a></li>
                           <li><a href="oracle-flex-clusters.html#GUID-DF441DD8-B3B4-48C2-96B5-3DD59EAAC8EF" title="An Oracle Flex Cluster scales Oracle Clusterware to large numbers of nodes.">Oracle Flex Clusters</a></li>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-9C074F34-F180-4200-A99B-72186DAB56E1" title="An integer different for each of the INSTANCE_COUNT resource instances.Resource group attribute that contains a list of resources marked critical for a resource group.The SERVER_POOLS resource attribute is described.List of resources belonging to a resource group. Oracle Clusterware populates and updates this attribute when resources are added to the group.">Oracle Clusterware Resource Reference</a></li>
                        </ul>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-78EE66E9-21B5-4A0D-80C6-422C5783DBF9" name="GUID-78EE66E9-21B5-4A0D-80C6-422C5783DBF9"></a><h5 id="CWADD-GUID-78EE66E9-21B5-4A0D-80C6-422C5783DBF9" class="sect5">Adding an Application VIP with Oracle Enterprise Manager</h5>
                     <div>
                        <div class="section">
                           <p>To <a id="d45801e6772" class="indexterm-anchor"></a><a id="d45801e6778" class="indexterm-anchor"></a>add an application VIP with Oracle Enterprise Manager:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li><span>Log into Oracle Enterprise Manager Cloud Control.</span></li>
                           <li><span>Select the cluster target that you want to modify.</span></li>
                           <li><span>From the cluster target menu, select <span class="bold">Administration</span> &gt; <span class="bold">Resources</span> &gt; <span class="bold">Manage</span>.</span></li>
                           <li><span>Enter a cluster administrator user name and password to display the Manage Resources page.</span></li>
                           <li><span>Click <span class="bold">Add Application VIP</span>.</span></li>
                           <li><span>Enter a name for the VIP in the <span class="bold">Name</span> field.</span></li>
                           <li><span>Enter a network number in the <span class="bold">Network Number</span> field.</span></li>
                           <li><span>Enter an IP address for the VIP in the <span class="bold">Internet Protocol Address</span> field.</span></li>
                           <li><span>Enter <span class="bold">root</span> in the <span class="bold">Primary User</span> field. Oracle Enterprise Manager defaults to whatever user name you are logged in as.</span></li>
                           <li><span>Select <span class="bold">Start the resource after creation</span> if you want the VIP to start immediately.</span></li>
                           <li><span>Click <span class="bold">Continue</span> to display the Confirmation: Add VIP Resource page.</span></li>
                           <li><span>Enter <span class="bold">root</span> and the root password as the cluster credentials.</span></li>
                           <li><span>Click <span class="bold">Continue</span> to create the application VIP.</span></li>
                        </ol>
                     </div>
                  </div>
               </div><a id="CWADD91300"></a><div class="props_rev_3"><a id="GUID-EC749831-C1A0-40DA-B74E-36D8C4B54193" name="GUID-EC749831-C1A0-40DA-B74E-36D8C4B54193"></a><h4 id="CWADD-GUID-EC749831-C1A0-40DA-B74E-36D8C4B54193" class="sect4">Adding User-Defined Resources</h4>
                  <div>
                     <p>You can add resources to Oracle Clusterware at any time.</p>
                     <p>However, if you add a resource that depends on another resource, then you must first add the resource upon which it is dependent.</p>
                     <p>In the examples in this section, assume that an action script, <code class="codeph">myApache.scr</code>, resides in the <code class="codeph">/opt/cluster/scripts</code> directory on each node to facilitate adding the resource to the cluster. Assume also that a server pool has been created to host an application. This server pool is not a sub-pool of Generic, but instead it is used to host the application in a top-level server pool.
                     </p>
                     <div class="infoboxnote" id="GUID-EC749831-C1A0-40DA-B74E-36D8C4B54193__GUID-5D2884BF-5D51-473E-8D5A-E415120A4444">
                        <p class="notep1">Note:</p>
                        <p>Oracle recommends that you use shared storage, such as Oracle Automatic Storage Management Cluster File System (Oracle ACFS), to store action scripts to decrease script maintenance.</p>
                     </div>
                     <p>This section includes the following topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-CFEBE692-DB46-48D7-AFF2-3F21FB2BD65C">Deciding on a Deployment Scheme</a></p>
                        </li>
                        <li>
                           <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-1D44D5D6-D863-4438-8A53-20182D437E1D" title="Use the crsctl add resource command to add a resource to a server pool.">Adding a Resource to a Specified Server Pool</a></p>
                        </li>
                        <li>
                           <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-46607977-281E-473B-8AA0-5B7C9CF5453E">Adding a Resource Using a Server-Specific Deployment</a></p>
                        </li>
                        <li>
                           <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-6D80CD6A-A3C1-4F5C-9F3D-6FCBDE9C075F" title="Use the crsctl add resource command to create resources using the generic_application resource type to model any type of application requiring high availability without having to create any action scripts.">Creating Resources that Use the generic_application Resource Type</a></p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-58143813-C77F-4EAF-8E2C-D82E10F13B26">Examples of Action Scripts for Third-party Applications</a></li>
                        </ul>
                     </div>
                  </div><a id="CWADD92378"></a><div class="props_rev_3"><a id="GUID-CFEBE692-DB46-48D7-AFF2-3F21FB2BD65C" name="GUID-CFEBE692-DB46-48D7-AFF2-3F21FB2BD65C"></a><h5 id="CWADD-GUID-CFEBE692-DB46-48D7-AFF2-3F21FB2BD65C" class="sect5">Deciding on a Deployment Scheme</h5>
                     <div>
                        <p><a id="d45801e7161" class="indexterm-anchor"></a>You must decide whether to use administrator or policy management for the application. Use administrator management for smaller, two-node configurations, where your cluster configuration is not likely to change. Use policy management for more dynamic configurations when your cluster consists of more than two nodes. For example, if a resource only runs on node 1 and node 2 because only those nodes have the necessary files, then administrator management is probably more appropriate.
                        </p>
                        <p>Oracle Clusterware supports the deployment of applications in access-controlled server pools made up of anonymous servers and strictly based on the desired pool size. Cluster policies defined by the administrator can and must be used in this case to govern the server assignment with desired sizes and levels of importance. Alternatively, a strict or preferred server assignment can be used, in which resources run on specifically named servers. This represents the pre-existing model available in earlier releases of Oracle Clusterware now known as administrator management.</p>
                        <p>Conceptually, a cluster hosting applications developed and deployed in both of the deployment schemes can be viewed as two logically separated groups of servers. One server group is used for server pools, enabling role separation and server capacity control. The other server group assumes a fixed assignment based on named servers in the cluster.</p>
                        <p>To manage an application using either deployment scheme, you must create a server pool before adding the resource to the cluster. A built-in server pool named <span class="italic">Generic</span> always owns the servers used by applications of administrator-based management. The Generic server pool is a logical division and can be used to separate the two parts of the cluster using different management schemes.
                        </p>
                        <p>For third party developers to use the model to deploy applications, server pools must be used. To take advantage of the pre-existing application development and deployment model based on named servers, sub-pools of Generic (server pools that have Generic as their parent pool, defined by the server pool attribute <code class="codeph">PARENT_POOLS</code>) must be used. By creating sub-pools that use Generic as their parent and enumerating servers by name in the sub-pool definitions, applications ensure that named servers are in Generic and are used exclusively for applications using the named servers model.
                        </p>
                     </div>
                  </div><a id="CWADD92143"></a><div class="props_rev_3"><a id="GUID-1D44D5D6-D863-4438-8A53-20182D437E1D" name="GUID-1D44D5D6-D863-4438-8A53-20182D437E1D"></a><h5 id="CWADD-GUID-1D44D5D6-D863-4438-8A53-20182D437E1D" class="sect5">Adding a Resource to a Specified Server Pool</h5>
                     <div>
                        <p>Use the <code class="codeph">crsctl add resource</code> command to add a resource to a server pool.
                        </p>
                        <div class="section">
                           <p>To add the Apache Web server to a specific server pool as a resource using the policy-based deployment scheme, run the following command as the user that is supposed to run the Apache Server (for an Apache Server this is typically the <code class="codeph">root</code> user):
                           </p><pre class="pre codeblock"><code>$ crsctl add resource myApache -type cluster_resource -attr
  "ACTION_SCRIPT=/opt/cluster/scripts/myapache.scr,
   PLACEMENT=restricted,
   SERVER_POOLS=<span class="variable" translate="no">server_pool_list</span>,
   CHECK_INTERVAL=30,
   RESTART_ATTEMPTS=2,
   START_DEPENDENCIES=hard(appsvip),
   STOP_DEPENDENCIES=hard(appsvip)"</code></pre><p>In the preceding example, <code class="codeph">myApache</code> is the name of the resource added to the cluster.
                           </p>
                           <div class="infoboxnote" id="GUID-1D44D5D6-D863-4438-8A53-20182D437E1D__GUID-D80F3254-9252-43D1-BB55-B60A5FB671B3">
                              <p class="notep1">Note:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>You must enclose comma or space-delimited attribute values in single quotation marks (' ') to avoid errors. If you enclose single attributes values in single quotation marks, they are ignored and no errors ensue.</p>
                                 </li>
                                 <li>
                                    <p>A resource name cannot begin with a period nor with the character string <span class="italic">ora</span>.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <p>The resource is configured, as follows:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The resource is a <code class="codeph">cluster_resource</code> type.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">ACTION_SCRIPT=/opt/cluster/scripts/myapache.scr:</code> The path to the required action script.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">PLACEMENT=restricted</code></p>
                              </li>
                              <li>
                                 <p><code class="codeph">SERVER_POOLS=<span class="variable" translate="no">server_pool_list</span></code>: This resource can only run in the server pools specified in a space-delimited list.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">CHECK_INTERVAL=30</code>: Oracle Clusterware checks this resource every 30 seconds to determine its status.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">RESTART_ATTEMPTS=2</code>: Oracle Clusterware attempts to restart this resource twice before failing it over to another node.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">START_DEPENDENCIES=hard(appsvip)</code>: This resource has a hard START dependency on the appsvip resource. The appsvip resource must be online in order for myApache to start.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">STOP_DEPENDENCIES=hard(appsvip)</code>: This resource has a hard STOP dependency on the appsvip resource. The myApache resource stops if the appsvip resource goes offline.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="oracle-clusterware-resource-reference.html#GUID-58143813-C77F-4EAF-8E2C-D82E10F13B26">Examples of Action Scripts for Third-party Applications</a></li>
                              <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-C0FEFBDC-CA87-436A-ACA4-A5BAC4D18963" title="A resource can be started on any server, subject to the placement policies, the resource start dependencies, and the availability of the action script on that server.">Application Placement Policies</a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CWADD92144"></a><div class="props_rev_3"><a id="GUID-46607977-281E-473B-8AA0-5B7C9CF5453E" name="GUID-46607977-281E-473B-8AA0-5B7C9CF5453E"></a><h5 id="CWADD-GUID-46607977-281E-473B-8AA0-5B7C9CF5453E" class="sect5">Adding a Resource Using a Server-Specific Deployment</h5>
                     <div>
                        <div class="section">
                           <p>To add the Apache Web server as a resource that uses a named server deployment, assume that you add the resource to a server pool that is, by definition, a sub-pool of the Generic server pool. You create server pools that are sub-pools of Generic using the <code class="codeph">crsctl add serverpool</code> command. These server pools define the Generic server pool as their parent in the server pool attribute <code class="codeph">PARENT_POOLS</code>. In addition, they include a list of server names in the <code class="codeph">SERVER_NAMES</code> parameter to specify the servers that should be assigned to the respective pool. For example:
                           </p><pre class="pre codeblock"><code>$ crsctl add serverpool myApache_sp -attr
  "PARENT_POOLS=Generic, SERVER_NAMES=host36 host37"</code></pre><p>After you create the sub-pool, add the Apache Web server resource, as follows:</p><pre class="pre codeblock"><code>$ crsctl add resource myApache -type cluster_resource -attr
  "ACTION_SCRIPT=/opt/cluster/scripts/myapache.scr,
   PLACEMENT='restricted',
   SERVER_POOLS=myApache_sp,
   CHECK_INTERVAL='30',
   RESTART_ATTEMPTS='2',
   START_DEPENDENCIES='hard(appsvip)',
   STOP_DEPENDENCIES='hard(appsvip)'"</code></pre><div class="infoboxnote" id="GUID-46607977-281E-473B-8AA0-5B7C9CF5453E__GUID-1350FD7E-EE2E-4528-9676-5E867CA1E1D7">
                              <p class="notep1">Note:</p>
                              <p>A resource name cannot begin with a period nor with the character string <span class="italic">ora</span>.
                              </p>
                           </div>
                           <p>In addition, note that when adding a resource using a server-specific deployment, the server pools listed in the <code class="codeph">SERVER_POOLS</code> resource parameter must be sub-pools under Generic.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="policy-based-cluster-and-capacity-management.html#GUID-B591A9DF-BEB1-4B72-B665-7416BEA27C7A" title="Resources managed by Oracle Clusterware are contained in logical groups of servers called server pools. This was introduced in Oracle Clusterware 11g release 2 (11.2).With policy-based management, administrators specify the server pool (excluding the Generic and Free pools) in which the servers run.You can use SRVCTL or CRSCTL to create server pools for databases and other applications, respectively.Server categorization enables you to organize servers into particular categories by using attributes such as processor types, memory, and other distinguishing system features.A cluster configuration policy is a document that contains exactly one definition for each server pool managed by the cluster configuration policy set. A cluster configuration policy set is a document that defines the names of all server pools configured for the cluster and definitions for all policies.You can configure a database so that Oracle Clusterware is aware of the CPU requirements and limits for the given database.Oracle Clusterware assigns each server a set of attributes as soon as you add a server to a cluster.Enterprise database servers can use all available memory due to too many open sessions or runaway workloads. Running out of memory can result in failed transactions or, in extreme cases, a restart of the server and the loss of a valuable resource for your applications. Oracle Database QoS Management detects memory pressure on a server in real time and redirects new sessions to other servers to prevent using all available memory on the stressed server.You define servers into named categories, and assign attributes that define servers as members of that category.">Policy-Based Cluster and Capacity Management</a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CWADD92896"></a><div class="props_rev_3"><a id="GUID-6D80CD6A-A3C1-4F5C-9F3D-6FCBDE9C075F" name="GUID-6D80CD6A-A3C1-4F5C-9F3D-6FCBDE9C075F"></a><h5 id="CWADD-GUID-6D80CD6A-A3C1-4F5C-9F3D-6FCBDE9C075F" class="sect5">Creating Resources that Use the generic_application Resource Type</h5>
                     <div>
                        <p>Use the <code class="codeph">crsctl add resource</code> command to create resources using the <code class="codeph">generic_application</code> resource type to model any type of application requiring high availability without having to create any action scripts.
                        </p>
                        <div class="section">
                           <p>This section includes two examples for Linux/UNIX platforms of creating resources that use the <code class="codeph">generic_application</code> resource type.
                           </p>
                           <p>In the following command example, a Samba server resource is created for high availability:</p><pre class="pre codeblock"><code>$ crsctl add resource samba1 -type generic_application -attr
  "START_PROGRAM='/etc/init.d/smb start',
   STOP_PROGRAM='/etc/init.d/smb stop',
   CLEAN_PROGRAM='/etc/init.d/smb stop',
   PID_FILES='/var/run/smbd.pid,/var/run/nmbd.pid'"</code></pre><p>In the preceding example, the attributes that define the resource are configured, as follows:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">START_PROGRAM='/etc/init.d/smb start'</code>: This attribute contains the complete path and arguments to the script that starts the Samba server
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">STOP_PROGRAM='/etc/init.d/smb stop'</code>: This attribute contains the complete path and arguments to the script that stops the Samba server
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">CLEAN_PROGRAM='/etc/init.d/smb stop'</code>: This attribute contains the complete path and arguments to the script that forcefully terminates and cleans up the Samba server in case there is any failure in starting or stopping the server
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">PID_FILES='/var/run/smbd.pid,/var/run/nmbd.pid'</code>: This attribute contains the paths to the text files listing the process IDs (PIDs) that must be monitored to ensure that the Samba server and all its components are running
                                 </p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-6D80CD6A-A3C1-4F5C-9F3D-6FCBDE9C075F__GUID-DBBBAB15-89E6-4119-89D6-34AC3416E536">
                              <p class="notep1">Note:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>If script-based monitoring is required for this Samba server configuration, then you can use the <code class="codeph">CHECK_PROGRAMS</code> attribute instead of the <code class="codeph">PID_FILES</code> attribute, as follows:
                                    </p><pre class="pre codeblock"><code>CHECK_PROGRAMS='/etc/init.d/smb status'
</code></pre></li>
                                 <li>
                                    <p>You can specify standard Oracle Clusterware placement and cardinality properties by configuring the <code class="codeph">HOSTING_MEMBERS</code>, <code class="codeph">SERVER_POOLS</code>, <code class="codeph">PLACEMENT</code>, and <code class="codeph">CARDINALITY</code> attributes of the Samba server resource.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <p>In the second command example, a database file server (DBFS) resource is created for high availability. The DBFS provides a Filesystem in Userspace (FUSE) file system to access data stored in an Oracle Database.</p>
                           <p>You can use the <code class="codeph">generic_application</code> resource type to define a resource that corresponds to the DBFS file system. You can use this DBFS resource to start, stop, monitor, and failover the DBFS file system mount point. The command syntax to create this resource is as follows:
                           </p><pre class="pre codeblock"><code>$ crsctl add resource dbfs1 -type generic_application -attr
  "START_PROGRAM='/app/oracle/12.2/bin/dbfs_client -o wallet 
   /@inst1 /scratch/mjk/data/dbfs_mount',
   STOP_PROGRAM='/bin/fusermount -u /scratch/mjk/data/dbfs_mount',
   CHECK_PROGRAMS='ls /scratch/mjk/data/dbfs_mount/dbfsdata1',
   ENVIRONMENT_VARS='ORACLE_HOME=/app/oracle/12.2,
         LD_LIBRARY_PATH=/app/oracle/12.2/lib:/app/oracle/12.2/rdbms/lib,
         TNS_ADMIN=/app/oracle/12.2/network/admin',
   CLEAN_PROGRAM='/bin/fusermount -u -z /scratch/mjk/data/dbfs_mount',
   START_DEPENDENCIES='hard(ora.inst1_srv.svc)',
   STOP_DEPENDENCIES='hard(ora.inst1_srv.svc)'"</code></pre><p>In addition to the mandatory <code class="codeph">START_PROGRAM</code>, <code class="codeph">STOP_PROGRAM</code>, <code class="codeph">CHECK_PROGRAMS</code>, and <code class="codeph">CLEAN_PROGRAM</code> attributes, the above example also includes the following:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The <code class="codeph">ENVIRONMENT_VARS</code> attribute specifies custom environment variables that are passed when starting or stopping the program
                                 </p>
                              </li>
                              <li>
                                 <p>The <code class="codeph">START_DEPENDENCIES</code> and <code class="codeph">STOP_DEPENDENCIES</code> dependency attributes create a start and stop dependency on the database service that is the underlying database store of the DBFS file system
                                 </p>
                                 <p>You can create dependencies on to the DBFS resource for higher-level application resources based on the application requirements of the DBFS file system.</p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-6D80CD6A-A3C1-4F5C-9F3D-6FCBDE9C075F__GUID-5CC2835A-EA0D-4982-B4D4-539B21A21ACF">
                              <p class="notep1">Note:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The <code class="codeph">ORACLE_HOME</code> directory shown in the preceding syntax is an example.
                                    </p>
                                 </li>
                                 <li>
                                    <p>You can specify standard Oracle Clusterware placement and cardinality properties by configuring the <code class="codeph">HOSTING_MEMBERS</code>, <code class="codeph">SERVER_POOLS</code>, <code class="codeph">PLACEMENT</code>, and <code class="codeph">CARDINALITY</code> attributes of the DBFS file system resource.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-30DC08E5-72CE-4E93-B6D6-E209DEADF83E">Oracle Clusterware Resource Types</a></li>
                              <li><a href="../adlob/introducing-database-file-system.html#ADLOB-GUID-B7A83817-F0D6-4A09-AE98-DFC966783109" target="_blank"><span><cite>Oracle Database SecureFiles and Large Objects Developer's Guide</cite></span></a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="CWADD91303"></a><div class="props_rev_3"><a id="GUID-A2472668-828C-45A1-AAFB-C9B143BA6B61" name="GUID-A2472668-828C-45A1-AAFB-C9B143BA6B61"></a><h4 id="CWADD-GUID-A2472668-828C-45A1-AAFB-C9B143BA6B61" class="sect4">Adding Resources Using Oracle Enterprise Manager</h4>
                  <div>
                     <p>Use Enterprise Manager to add resources.</p>
                     <div class="section">
                        <p>To add resources to Oracle Clusterware using Oracle Enterprise Manager:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Log into Oracle Enterprise Manager Cloud Control.</span></li>
                        <li class="stepexpand"><span>Select the cluster target that you want to modify.</span></li>
                        <li class="stepexpand"><span>From the cluster target menu, select <span class="bold">Administration</span> &gt; <span class="bold">Resources</span> &gt; <span class="bold">Manage</span>.</span></li>
                        <li class="stepexpand"><span>Enter a cluster administrator user name and password to display the Add Resource page.</span></li>
                        <li class="stepexpand"><span>Enter a name for the resource in the <span class="bold">Name</span> field.</span><div>
                              <div class="infoboxnote" id="GUID-A2472668-828C-45A1-AAFB-C9B143BA6B61__GUID-7898A7A6-BF80-47F8-92B0-297E3B6A865B">
                                 <p class="notep1">Note:</p>
                                 <p>A resource name cannot begin with a period nor with the character string <span class="italic">ora</span>.
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Choose either <span class="bold">cluster_resource</span> or <span class="bold">local_resource</span> from the <span class="bold">Resource Type</span> drop down.</span></li>
                        <li class="stepexpand"><span>Optionally, enter a description of the resource in the <span class="bold">Description</span> field.</span></li>
                        <li class="stepexpand"><span>Select <span class="bold">Start the resource after creation</span> if you want the resource to start immediately.</span></li>
                        <li class="stepexpand"><span>The optional parameters in the <span class="bold">Placement</span> section define where in a cluster Oracle Clusterware places the resource.</span><div>
                              <p>The attributes in this section correspond to the attributes described in <a href="oracle-clusterware-resource-reference.html#GUID-9C074F34-F180-4200-A99B-72186DAB56E1" title="An integer different for each of the INSTANCE_COUNT resource instances.Resource group attribute that contains a list of resources marked critical for a resource group.The SERVER_POOLS resource attribute is described.List of resources belonging to a resource group. Oracle Clusterware populates and updates this attribute when resources are added to the group.">Oracle Clusterware Resource Reference</a>.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>In the <span class="bold">Action Program</span> section, choose from the <span class="bold">Action Program</span> drop down whether Oracle Clusterware calls an action script, an agent file, or both to manage the resource.</span><div>
                              <p>You must also specify a path to the script, file, or both, depending on what you select from the drop down.</p>
                              <p>If you choose <span class="bold">Action Script</span>, then you can click <span class="bold">Create New Action Script</span> to use the Oracle Enterprise Manager action script template to create an action script for your resource, if you have not yet done so.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>To further configure the resource, click <span class="bold">Attributes</span>. On this page, you can configure start, stop, and status attributes, and offline monitoring and any attributes that you define.</span></li>
                        <li class="stepexpand"><span>Click <span class="bold">Advanced Settings</span> to enable more detailed resource attribute configurations.</span></li>
                        <li class="stepexpand"><span>Click <span class="bold">Dependencies</span> to configure start and stop dependencies between resources.</span><div></div>
                        </li>
                        <li class="stepexpand"><span>Click <span class="bold">Submit</span> when you finish configuring the resource.</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-C0FEFBDC-CA87-436A-ACA4-A5BAC4D18963" title="A resource can be started on any server, subject to the placement policies, the resource start dependencies, and the availability of the action script on that server.">Application Placement Policies</a></li>
                           <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-D08A5C19-9EC5-4903-A263-82A52478D8EE">Resource Dependencies</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD91305"></a><div class="props_rev_3"><a id="GUID-96F44496-F4F6-4F92-A283-7968EA27FD3F" name="GUID-96F44496-F4F6-4F92-A283-7968EA27FD3F"></a><h4 id="CWADD-GUID-96F44496-F4F6-4F92-A283-7968EA27FD3F" class="sect4">Changing Resource Permissions</h4>
                  <div>
                     <div class="section">
                        <p>Oracle Clusterware manages resources based on the <a id="d45801e8224" class="indexterm-anchor"></a>permissions of the user who added the resource. The user who first added the resource owns the resource and the resource runs as the resource owner. Certain resources must be managed as <code class="codeph">root</code>. If a user other than <code class="codeph">root</code> adds a resource that must be run as <code class="codeph">root</code>, then the permissions must be changed as <code class="codeph">root</code> so that <code class="codeph">root</code> manages the resource, as follows:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Change the permission of the named resource to <code class="codeph">root</code> by running the following command as <code class="codeph">root</code>:</span><div><pre class="oac_no_warn" dir="ltr"># crsctl setperm resource <span class="italic">resource_name</span> &#x2013;o root
</pre></div>
                        </li>
                        <li class="stepexpand"><span>As the user who installed Oracle Clusterware, enable the Oracle Database installation owner (<code class="codeph">oracle</code>, in the following example) to run the script, as follows:</span><div><pre class="oac_no_warn" dir="ltr">$ crsctl setperm resource <span class="italic">resource_name</span> &#x2013;u user:oracle:r-x
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Start the resource:</span><div><pre class="oac_no_warn" dir="ltr">$ crsctl start resource <span class="italic">resource_name</span></pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="CWADD91306"></a><div class="props_rev_3"><a id="GUID-C0FEFBDC-CA87-436A-ACA4-A5BAC4D18963" name="GUID-C0FEFBDC-CA87-436A-ACA4-A5BAC4D18963"></a><h4 id="CWADD-GUID-C0FEFBDC-CA87-436A-ACA4-A5BAC4D18963" class="sect4">Application Placement Policies</h4>
                  <div>
                     <p>A resource can be started on any server, subject to the placement policies, the resource start dependencies, and the availability of the action script on that server.</p>
                     <div class="section">
                        <p>The <code class="codeph">PLACEMENT</code> resource attribute determines how Oracle Clusterware selects a server on which to start a resource and where to relocate the resource after a server failure. The <code class="codeph">HOSTING_MEMBERS</code> and <code class="codeph">SERVER_POOLS</code> attributes determine eligible servers to host a resource and the <code class="codeph">PLACEMENT</code> attribute further refines the placement of resources.
                        </p>
                        <p>The value of the <code class="codeph">PLACEMENT</code> resource attribute determines how Oracle Clusterware places resources when they are added to the cluster or when a server fails. Together with either the <code class="codeph">HOSTING_MEMBERS</code> or <code class="codeph">SERVER_POOLS</code> attributes, you can configure how Oracle Clusterware places the resources in a cluster. When the value of the <code class="codeph">PLACEMENT</code> attribute is:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">balanced</code>: Oracle Clusterware uses any online server pool for placement. Less loaded servers are preferred to servers with greater loads. To measure how loaded a server is, Oracle Clusterware uses the <code class="codeph">LOAD</code> resource attribute of the resources that are in an <code class="codeph">ONLINE</code> state on the server. Oracle Clusterware uses the sum total of the <code class="codeph">LOAD</code> values to measure the current server load.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">favored</code>: If a value is assigned to either of the <code class="codeph">HOSTING_MEMBERS</code>, <code class="codeph">SERVER_POOLS</code>, or <code class="codeph">SERVER_CATEGORY</code> resource attributes, then that value expresses a preference. If <code class="codeph">HOSTING_MEMBERS</code> is populated and either <code class="codeph">SERVER_POOLS</code> or <code class="codeph">SERVER_CATEGORY</code> is set, then <code class="codeph">HOSTING_MEMBERS</code> indicates placement preference and <code class="codeph">SERVER_POOLS</code> or <code class="codeph">SERVER_CATEGORY</code> indicates a restriction. For example, the <code class="codeph">ora.cluster.vip</code> resource has a policy that sets the value of <code class="codeph">PLACEMENT</code> to <code class="codeph">favored</code>, <code class="codeph">SERVER_CATEGORY</code> is set to <code class="codeph">Hub</code>, and <code class="codeph">HOSTING_MEMBERS</code> is set to <code class="codeph">server_name1</code>. In this case, Oracle Clusterware restricts the placement of <code class="codeph">ora.cluster.vip</code> to the servers in the Hub category and then it prefers the server known as <code class="codeph">server_name1</code>.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">restricted</code>: Oracle Clusterware only considers servers that belong to server pools listed in the <code class="codeph">SEVER_POOLS</code> resource attribute, servers of a particular category as configured in the <code class="codeph">SERVER_CATEGORY</code> resource attribute, or servers listed in the <code class="codeph">HOSTING_MEMBERS</code> resource attribute for resource placement. Only one of these resource attributes can have a value, otherwise it results in an error.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-9C074F34-F180-4200-A99B-72186DAB56E1" title="An integer different for each of the INSTANCE_COUNT resource instances.Resource group attribute that contains a list of resources marked critical for a resource group.The SERVER_POOLS resource attribute is described.List of resources belonging to a resource group. Oracle Clusterware populates and updates this attribute when resources are added to the group.">Oracle Clusterware Resource Reference</a></li>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-9CD89A50-A16F-49B2-AC48-7DB9430C4F88">HOSTING_MEMBERS</a></li>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-85112566-7B71-423B-87DF-8F5B50CAAF58">SERVER_CATEGORY</a></li>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-4B71EDE4-EFAE-4AEE-B2DC-C57712DEF41F" title="The SERVER_POOLS resource attribute is described.">SERVER_POOLS</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD91309"></a><div class="props_rev_3"><a id="GUID-74FE4AB7-3960-4F09-9325-F9372B081F6D" name="GUID-74FE4AB7-3960-4F09-9325-F9372B081F6D"></a><h4 id="CWADD-GUID-74FE4AB7-3960-4F09-9325-F9372B081F6D" class="sect4">Unregistering Applications and Application Resources</h4>
                  <div>
                     <div class="section">
                        <p>To unregister a resource, use the <code class="codeph">crsctl delete resource</code> command. You cannot unregister an application or resource that is ONLINE or required by another resource, unless you use the <code class="codeph">-force</code> option. The following example unregisters the Apache Web server application:
                        </p><pre class="oac_no_warn" dir="ltr">$ crsctl delete resource myApache
</pre><p>Run the <code class="codeph">crsctl delete resource</code> command as a clean-up step when a resource is no longer managed by Oracle Clusterware. Oracle recommends that you unregister any unnecessary resources.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="CWADD91315"></a><div class="props_rev_3"><a id="GUID-F650245B-F6F4-4C51-801A-8871A0B80E1C" name="GUID-F650245B-F6F4-4C51-801A-8871A0B80E1C"></a><h3 id="CWADD-GUID-F650245B-F6F4-4C51-801A-8871A0B80E1C" class="sect3">Managing Resources</h3>
               <div>
                  <p>This section includes the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-4100AC56-4AA4-40C8-9020-96A3B76BF099" title="Each application that you manage with Oracle Clusterware is registered and stored as a resource in OCR.">Registering Application Resources</a></p>
                     </li>
                     <li>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-0275D805-AF9E-4CB7-BA58-CF74FF6A7642" title="Start resources with the crsctl start resource command.">Starting Application Resources</a></p>
                     </li>
                     <li>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-5C4571CE-80D9-47BB-9B2D-DFEA64A5FF97" title="Use the crsctl relocate resource command to relocate applications and application resources.">Relocating Applications and Application Resources</a></p>
                     </li>
                     <li>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-DD9C9DF4-073A-4D3B-8A6F-C19C46E42348" title="Stop application resources with the crsctl stop resource command.">Stopping Applications and Application Resources</a></p>
                     </li>
                     <li>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-91DFC89B-25FB-4C7E-83EA-27C8F32C03F6" title="Use the crsctl status resource command to display status information about applications and resources that are on cluster servers.">Displaying Clusterware Application and Application Resource Status Information</a></p>
                     </li>
                  </ul>
               </div><a id="CWADD91316"></a><div class="props_rev_3"><a id="GUID-4100AC56-4AA4-40C8-9020-96A3B76BF099" name="GUID-4100AC56-4AA4-40C8-9020-96A3B76BF099"></a><h4 id="CWADD-GUID-4100AC56-4AA4-40C8-9020-96A3B76BF099" class="sect4">Registering Application Resources</h4>
                  <div>
                     <p>Each application that you manage with Oracle Clusterware is registered and stored as a resource in OCR.</p>
                     <div class="section">
                        <p>Use the <code class="codeph">crsctl add resource</code> command to register applications in OCR. For example, enter the following command to register the Apache Web server application from the previous example:
                        </p><pre class="pre codeblock"><code>$ crsctl add resource myApache -type cluster_resource
-group <span class="variable" translate="no">group_name</span> -attr "ACTION_SCRIPT=/opt/cluster/scripts/myapache.scr, PLACEMENT=restricted,
SERVER_POOLS=<span class="variable" translate="no">server_pool_list</span>,CHECK_INTERVAL=30,RESTART_ATTEMPTS=2,
START_DEPENDENCIES=hard(appsvip),STOP_DEPENDENCIES=hard(appsvip)"
</code></pre><p>In the preceding example, you can assign the resource to a resource group by specifying the <code class="codeph">-group</code> parameter.
                        </p>
                        <p>If you modify a resource, then update OCR by running the <code class="codeph">crsctl modify resource</code> command.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="oracle-clusterware-control-crsctl-utility-reference.html#GUID-7089B6C0-8701-42E6-B896-674E5E2A06F9" title="Registers a resource to be managed by Oracle Clusterware.">crsctl add resource</a></li>
                           <li><a href="oracle-clusterware-control-crsctl-utility-reference.html#GUID-F73393B0-E1FE-4CA6-996D-60A41A4FD5A1" title="Modifies the attributes of a particular resource in Oracle Clusterware.">crsctl modify resource</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD91317"></a><div class="props_rev_3"><a id="GUID-0275D805-AF9E-4CB7-BA58-CF74FF6A7642" name="GUID-0275D805-AF9E-4CB7-BA58-CF74FF6A7642"></a><h4 id="CWADD-GUID-0275D805-AF9E-4CB7-BA58-CF74FF6A7642" class="sect4">Starting Application Resources</h4>
                  <div>
                     <p>Start resources with the <code class="codeph">crsctl start resource</code> command.
                     </p>
                     <div class="section">
                        <p>Manually starting or stopping resources outside of Oracle Clusterware can invalidate the resource status. In addition, Oracle Clusterware may attempt to restart a resource on which you perform a manual stop operation.</p>
                        <p>To start an application resource that is registered with Oracle Clusterware, use the <code class="codeph">crsctl start resource</code> command. For example:
                        </p><pre class="pre codeblock"><code>$ crsctl start resource myApache</code></pre><p>The command waits to receive a notification of success or failure from the action program each time the action program is called. Oracle Clusterware can start application resources if they have stopped due to exceeding their failure threshold values. You must register a resource using <code class="codeph">crsctl add resource</code> before you can start it.
                        </p>
                        <p>Running the <code class="codeph">crsctl start resource</code> command on a resource sets the resource <code class="codeph">TARGET</code> value to <code class="codeph">ONLINE</code>. Oracle Clusterware attempts to change the state to match the <code class="codeph">TARGET</code> by running the action program with the <code class="codeph">start</code> action.
                        </p>
                        <p>If a cluster server fails while you are starting a resource on that server, then check the state of the resource on the cluster by using the <code class="codeph">crsctl status resource</code> command.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="oracle-clusterware-control-crsctl-utility-reference.html#GUID-1A6774CF-FD5F-463E-817F-34E4466443C7" title="CRSCTL is an interface between you and Oracle Clusterware, parsing and calling Oracle Clusterware APIs for Oracle Clusterware objects.Information about using the CRSCTL command-line interface.Use these commands in either the Oracle RAC or the Oracle Restart environments.Checks the status of Cluster Synchronization Services.Checks the status of the Event Manager.Retrieves the host name of the local server.Registers a resource to be managed by Oracle Clusterware.Removes resources from the Oracle Clusterware configuration.Predicts the effects of adding a resource without making changes to the system.Predicts the consequences of a resource failing.Simulates relocating a resource without making changes to the system.Predicts the effects of modifying a resource without making changes to the system.Predicts the effects of starting a resource without making changes to the system.Predicts the effect of stopping a resource without making changes to the system.Displays the user and group permissions for the specified resource.Modifies the attributes of a particular resource in Oracle Clusterware.Relocates resources to another server in the cluster.Restarts idle resources in the cluster, instead of having to run two commands to stop and start the resource.Sets permissions for a particular resource.Starts idle resources on a particular server in the cluster.Obtains the status and configuration information of any number of particular resources.Stops running resources.Creates a resource group based on a resource group type.Initiates a check operation on all member resources of the specified groups.Deletes one or more resource groups from Oracle Clusterware.Predicts the effects of adding a resource group without making changes to the system.Predicts the consequences of a resource failing.Predicts the effect of relocating a resource group without making changes to the system.Predicts the effects of starting a resource group without making changes to the system.Predicts the effect of stopping a resource group without making changes to the system.Exports the complete information and attributes of a resource groups and its member resources to a script file.Modifies a resource group to add attributes or update the values of existing attributes.Relocates online resource groups from a source server to a target server.Restarts resource groups on the server where they currently reside.Starts one or more resource groups on specific or preconfigured servers or server pools.Displays the state of resource groups.Stops one or more resource groups on optionally specified preconfigured servers or server pools.Registers a new resource group type in Oracle Clusterware.Deletes one or more resource group types from Oracle Clusterware.Modifies a resource group type to add attributes or update the values of existing attributes.Returns the tracing settings for a specific module.Sets the tracing parameters for a specific module.Creates a resource type in Oracle Clusterware.Removes resource types from the Oracle Clusterware configuration.Obtains permissions for a particular resource type.Modifies an existing resource type.Sets permissions for resources of a particular resource type.Obtains the configuration information of one or more particular resource types.Creates and adds users to a wallet.Removes wallets or users from a wallet.Modifies the password for a specific user in a specific wallet.Queries low-privileged users from a wallet.You can use the following commands only in an Oracle RAC environment.Performs a specific action on specific resource.Adds a server category.Deletes a server category.Modifies an existing server category.Obtains information about a server category.Checks the status of the Oracle Clusterware stack from any node in the cluster.Starts the Oracle Clusterware stack when run on any node in the cluster.Stops the Oracle Clusterware stack on all servers in the cluster or specific servers when you run the command on any node in the cluster.Obtains cluster class information.Displays the cluster configuration information.Adds a cipher suite to or removes a cipher suite from a list of disabled cipher suites used to secure inter-node communication.Determines whether the cluster is an extended cluster.Obtains the value of Hub Nodes in an Oracle Flex Cluster.Sets the maximum number of Hub Nodes for an Oracle Flex Cluster.Ascertains whether the cluster is configured for Oracle Flex Clusters or obtains the current status.Changes a standard cluster to an Oracle Flex Cluster.Displays the current cluster name.Use the crsctl add cluster site command to add a site to an extended cluster.Use the crsctl delete cluster site command to delete a specific site from an extended cluster.Modifies the configuration of a site in an extended cluster.Displays site information in an extended cluster.Lists available cipher suites used by transport layer security for securing inter-node communication.Use the crsctl get cluster type command to determine whether the cluster is an Oracle Flex Cluster or an application cluster.Sets the type of the cluster.The crsctl get cpu equivalency command obtains the value of the CPU_EQUIVALENCY server configuration attribute.The crsctl set cpu equivalency command sets a value for the CPU_EQUIVALENCY server configuration attribute.Checks the status of Oracle High Availability Services and the Oracle Clusterware stack on the local server.Displays Oracle High Availability Services automatic startup configuration.Prevents the automatic startup of Oracle High Availability Services when the server boots.Enables automatic startup of Oracle High Availability Services when the server boots.Starts Oracle High Availability Services on the local server.Stops Oracle High Availability Services on the local server.Displays the active version and the configured patch level of the Oracle Clusterware software running in the cluster.Adds a user to the list of cluster administrators.Removes a user from the list of Oracle Clusterware administrators.Displays the list of users with Oracle Clusterware administrative privileges.Obtains the values of the Oracle Clusterware automatic resource start criteria.Sets the Oracle Clusterware automatic resource start criteria.Displays the patch level which is updated in the Grid home patch repository while patching a node.Displays the version of the Oracle Clusterware software stored in the binaries on the local node.Use the crsctl query crs site command to determine to which site a specific host or disk belongs.Displays the configured patch level of the installed Oracle Clusterware.Displays the latest version of the software that has been successfully started on the specified node.Obtains the value of a specific Cluster Synchronization Services parameter.Pins many specific nodes.Sets the value of a Cluster Synchronization Services parameter.Unpins many servers.Unsets the value of a Cluster Synchronization Services parameter and restores it to its default value.Retrieves the address stored in the Oracle Local Registry of the local Intelligent Platform Management Interface (IPMI) device.Stores the address of the local Intelligent Platform Management Interface (IPMI) device in the Oracle Local Registry.Stores the login credentials of an Intelligent Platform Management Interface (IPMI) administrator in the Oracle Local Registry.Determines whether Oracle Clusterware on the local server has been configured to use IPMI for failure isolation.Clears all previously stored IPMI configuration (login credentials and IP address) from the Oracle Local Registry.Determines the presence of the Intelligent Platform Management Interface (IPMI) driver on the local system.Lists the problems for which automatic restart of Cluster Synchronization Services is disabled.Stops the automatic restart of Cluster Synchronization Services when a specific problem occurs.Removes a voting file from the Oracle Clusterware configuration.Displays the voting files used by Cluster Synchronization Services, the status of the voting files, and the location of the disks, whether they are stored in Oracle ASM or elsewhere.Checks the status of the Cluster Time Synchronization services.Sends DHCP discover packets on the network at the specified port. If DHCP servers are present on the network, then they respond to the discovery message and the command succeeds.Displays the client ID that the Oracle Clusterware agent uses to obtain the IP addresses from the DHCP server for configured cluster resources. The VIP type is required.Sends a DHCP lease release request to a specific client ID, and sends release packets on the network to a specific port.Sends DHCP request packets on the network to the specified port.Replaces the existing discovery string used to locate voting files.Obtains a list of addresses returned by DNS lookup of the name with the specified DNS server.Starts a given IP name or IP address on a specified interface with a specified subnet mask.Checks if a given IP address is up on the network.Stops a given IP name or IP address on a specified interface with a specified subnet mask.Lists the components of the modules that you can debug.Creates the configuration deployment file for a new member cluster.Deletes a member cluster configuration.Displays the configuration for a member cluster.Removes a node from the cluster.Obtains the name of the local node.Obtains the configured node role of nodes in the cluster.Adds a configuration policy to the policy set.Deletes a configuration policy from the policy set.Predicts the effects of activating a specific policy without making changes to the system.Modifies an existing configuration policy.Obtains the status and definition of a configuration policy.Creates a single policy set, in the form of a text file, that reflects the server pool configuration.Modifies an existing policy set.Obtains the current policies in the policy set, including the access control list, which governs who can modify the set, the last activated policy, and the configuration which is now in effect, which is known as the Current policy.Initiates the check action inside the application-specific agent of a particular resource.Relocates resources to another server in the cluster.Checks the current setting value of the RESOURCE_USE_ENABLED server configuration parameter.Sets the value of the RESOURCE_USE_ENABLED server configuration parameter for the server on which you run this command.Transitions Oracle Clusterware and Oracle ASM into rolling patch mode.Transitions Oracle Clusterware and Oracle ASM out of rolling patch mode.Transitions Oracle Clusterware and Oracle ASM into rolling upgrade mode.Simulates the addition of a server without making changes to the system.Predicts the effects of deleting a server without making changes to the system.Predicts the effects of relocating a server to a different server pool without making changes to the system. Modifies the configuration of a particular server.Relocates a server to a different server pool.Obtains the status and configuration information of one or more particular servers.Obtains the current configured value for the CSS_CRITICAL server attributeSets the configuration value for the CSS_CRITICAL server attribute.Checks the current setting value of the SERVER_LABEL server attribute.Sets the configuration value of the SERVER_LABEL server configuration attribute for the server on which you run this command.Adds a server pool that is for hosting non-database resources (such as application servers) to Oracle Clusterware.Removes a server pool from the Oracle Clusterware configuration.Predicts the effects of adding a server pool without making changes to the system.Simulates the deletion of a server pool without making changes to the system.Use the crsctl eval modify serverpool command to predict the effects of modifying a server pool without making changes to the system. This command may be useful to cluster administrators.Retrieves permissions for a particular server pool.Modifies an existing server pool.Sets permissions for a particular server pool.Retrieves the status and configuration information of one or more particular server pools.Verifies that a daemon can listen on a specified address and port.Starts a test DNS server that will listen on a specified IP address and port.Queries the test DNS server running on a specified address and local host name.Stops a test DNS server.Moves or replaces the existing voting files.You can only use these commands in the Oracle Restart environment.Checks the status of ohasd.Displays the automatic startup configuration of the Oracle High Availability Services stack on the server.Disables automatic startup of the Oracle High Availability Services stack when the server boots up.Enables automatic startup of the Oracle High Availability Services stack when the server boots up.Displays the release version of the Oracle Clusterware software that is stored in the binaries on the local node.Displays the software version on the local node.Starts Oracle High Availability Services on the local server.Stops Oracle High Availability Services on the local server.You can use crsctl set log commands as the root user to enable dynamic debugging for Cluster Ready Services (CRS), Cluster Synchronization Services (CSS), and the Event Manager (EVM), and the clusterware subcomponents.Setting log levels for Oracle Clusterware.You can enable debugging for Oracle Clusterware modules and their components, and for resources, by setting environment variables or by running the crsctl set log command.">Oracle Clusterware Control (CRSCTL) Utility Reference</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD91319"></a><div class="props_rev_3"><a id="GUID-5C4571CE-80D9-47BB-9B2D-DFEA64A5FF97" name="GUID-5C4571CE-80D9-47BB-9B2D-DFEA64A5FF97"></a><h4 id="CWADD-GUID-5C4571CE-80D9-47BB-9B2D-DFEA64A5FF97" class="sect4">Relocating Applications and Application Resources</h4>
                  <div>
                     <p>Use the <code class="codeph">crsctl relocate resource</code> command to relocate applications and application resources.
                     </p>
                     <div class="section">
                        <p>For example, to relocate the Apache Web server application to a server named <code class="codeph">rac2</code>, run the following command:
                        </p><pre class="oac_no_warn" dir="ltr"># crsctl relocate resource myApache -n rac2
</pre><p>Each time that the action program is called, the <code class="codeph">crsctl relocate resource</code> command waits for the duration specified by the value of the <code class="codeph">SCRIPT_TIMEOUT</code> resource attribute to receive notification of success or failure from the action program. A relocation attempt fails if:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The application has required resources that run on the initial server</p>
                           </li>
                           <li>
                              <p>Applications that require the specified resource run on the initial server</p>
                           </li>
                        </ul>
                        <p>To relocate an application and its required resources, use the <code class="codeph">-f</code> option with the <code class="codeph">crsctl relocate resource</code> command. Oracle Clusterware relocates or starts all resources that are required by the application regardless of their state.
                        </p>
                        <p>You can also relocate a resource group using the <code class="codeph">crsctl relocate resourcegroup</code> command, which first stops the resources in the resource group before relocating the resource group on the destination server.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-5C4571CE-80D9-47BB-9B2D-DFEA64A5FF97__GUID-51EE85F1-B95F-4AE4-985D-618FDC9C0BE2">Online Relocation</p>
                        <div class="p">Some resources or resource groups must remain highly available, even during a relocation operation. You can set the RELOCATE_KIND resource attribute (which you can also use with resource groups) to online (<code class="codeph">RELOCATE_KIND=online</code>), which will start a new resource instance (or several instances for resources belonging to a resource group) on the destination server before stopping it on the original server when you run either the <code class="codeph">crsctl relocate resource</code> or <code class="codeph">crsctl relocate resourcegroup</code> command.
                           <div class="infoboxnote" id="GUID-5C4571CE-80D9-47BB-9B2D-DFEA64A5FF97__GUID-3D97A29B-B9FD-4C6C-AE70-F338B990AF83">
                              <p class="notep1">Note:</p>Before using online relocation, ensure that the resource can manage the extra resource instances that are started during online relocation.
                           </div>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="CWADD91320"></a><div class="props_rev_3"><a id="GUID-DD9C9DF4-073A-4D3B-8A6F-C19C46E42348" name="GUID-DD9C9DF4-073A-4D3B-8A6F-C19C46E42348"></a><h4 id="CWADD-GUID-DD9C9DF4-073A-4D3B-8A6F-C19C46E42348" class="sect4">Stopping Applications and Application Resources</h4>
                  <div>
                     <p>Stop application resources with the <code class="codeph">crsctl stop resource</code> command.
                     </p>
                     <div class="section">
                        <p>The command sets the resource <code class="codeph">TARGET</code> value to <code class="codeph">OFFLINE</code>. Because Oracle Clusterware always attempts to match the state of a resource to its target, the Oracle Clusterware subsystem stops the application. The following example stops the Apache Web server:
                        </p><pre class="pre codeblock"><code># crsctl stop resource myApache</code></pre><p>You cannot stop a resource if another resource has a hard stop dependency on it, unless you use the force (<code class="codeph">-f</code>) option. If you use the <code class="codeph">crsctl stop resource <span class="variable" translate="no">resource_name</span> -f</code> command on a resource upon which other resources depend, and if those resources are running, then Oracle Clusterware stops the resource <span class="italic">and</span> all of the resources that depend on the resource that you are stopping.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="CWADD91321"></a><div class="props_rev_3"><a id="GUID-91DFC89B-25FB-4C7E-83EA-27C8F32C03F6" name="GUID-91DFC89B-25FB-4C7E-83EA-27C8F32C03F6"></a><h4 id="CWADD-GUID-91DFC89B-25FB-4C7E-83EA-27C8F32C03F6" class="sect4">Displaying Clusterware Application and Application Resource Status Information</h4>
                  <div>
                     <p>Use the <code class="codeph">crsctl status resource</code> command to display status information about applications and resources that are on cluster servers.
                     </p>
                     <div class="section">
                        <p>The following example displays the status information for the Apache Web server application:</p><pre class="pre codeblock"><code># crsctl status resource myApache

NAME=myApache
TYPE=cluster_resource
TARGET=ONLINE
STATE=ONLINE on server010</code></pre><p>Other information this command returns includes the following:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>How many times the resource has been restarted</p>
                           </li>
                           <li>
                              <p>How many times the resource has failed within the failure interval</p>
                           </li>
                           <li>
                              <p>The maximum number of times that a resource can restart or fail</p>
                           </li>
                           <li>
                              <p>The target state of the resource and the normal status information</p>
                           </li>
                        </ul>
                        <p>Use the <code class="codeph">-f</code> option with the <code class="codeph">crsctl status resource <span class="variable" translate="no">resource_name</span></code> command to view full information of a specific resource.
                        </p>
                        <p>Enter the following command to view information about <span class="italic">all</span> applications and resources in tabular format:
                        </p><pre class="pre codeblock"><code># crsctl status resource -t</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="oracle-clusterware-control-crsctl-utility-reference.html#GUID-1A6774CF-FD5F-463E-817F-34E4466443C7" title="CRSCTL is an interface between you and Oracle Clusterware, parsing and calling Oracle Clusterware APIs for Oracle Clusterware objects.Information about using the CRSCTL command-line interface.Use these commands in either the Oracle RAC or the Oracle Restart environments.Checks the status of Cluster Synchronization Services.Checks the status of the Event Manager.Retrieves the host name of the local server.Registers a resource to be managed by Oracle Clusterware.Removes resources from the Oracle Clusterware configuration.Predicts the effects of adding a resource without making changes to the system.Predicts the consequences of a resource failing.Simulates relocating a resource without making changes to the system.Predicts the effects of modifying a resource without making changes to the system.Predicts the effects of starting a resource without making changes to the system.Predicts the effect of stopping a resource without making changes to the system.Displays the user and group permissions for the specified resource.Modifies the attributes of a particular resource in Oracle Clusterware.Relocates resources to another server in the cluster.Restarts idle resources in the cluster, instead of having to run two commands to stop and start the resource.Sets permissions for a particular resource.Starts idle resources on a particular server in the cluster.Obtains the status and configuration information of any number of particular resources.Stops running resources.Creates a resource group based on a resource group type.Initiates a check operation on all member resources of the specified groups.Deletes one or more resource groups from Oracle Clusterware.Predicts the effects of adding a resource group without making changes to the system.Predicts the consequences of a resource failing.Predicts the effect of relocating a resource group without making changes to the system.Predicts the effects of starting a resource group without making changes to the system.Predicts the effect of stopping a resource group without making changes to the system.Exports the complete information and attributes of a resource groups and its member resources to a script file.Modifies a resource group to add attributes or update the values of existing attributes.Relocates online resource groups from a source server to a target server.Restarts resource groups on the server where they currently reside.Starts one or more resource groups on specific or preconfigured servers or server pools.Displays the state of resource groups.Stops one or more resource groups on optionally specified preconfigured servers or server pools.Registers a new resource group type in Oracle Clusterware.Deletes one or more resource group types from Oracle Clusterware.Modifies a resource group type to add attributes or update the values of existing attributes.Returns the tracing settings for a specific module.Sets the tracing parameters for a specific module.Creates a resource type in Oracle Clusterware.Removes resource types from the Oracle Clusterware configuration.Obtains permissions for a particular resource type.Modifies an existing resource type.Sets permissions for resources of a particular resource type.Obtains the configuration information of one or more particular resource types.Creates and adds users to a wallet.Removes wallets or users from a wallet.Modifies the password for a specific user in a specific wallet.Queries low-privileged users from a wallet.You can use the following commands only in an Oracle RAC environment.Performs a specific action on specific resource.Adds a server category.Deletes a server category.Modifies an existing server category.Obtains information about a server category.Checks the status of the Oracle Clusterware stack from any node in the cluster.Starts the Oracle Clusterware stack when run on any node in the cluster.Stops the Oracle Clusterware stack on all servers in the cluster or specific servers when you run the command on any node in the cluster.Obtains cluster class information.Displays the cluster configuration information.Adds a cipher suite to or removes a cipher suite from a list of disabled cipher suites used to secure inter-node communication.Determines whether the cluster is an extended cluster.Obtains the value of Hub Nodes in an Oracle Flex Cluster.Sets the maximum number of Hub Nodes for an Oracle Flex Cluster.Ascertains whether the cluster is configured for Oracle Flex Clusters or obtains the current status.Changes a standard cluster to an Oracle Flex Cluster.Displays the current cluster name.Use the crsctl add cluster site command to add a site to an extended cluster.Use the crsctl delete cluster site command to delete a specific site from an extended cluster.Modifies the configuration of a site in an extended cluster.Displays site information in an extended cluster.Lists available cipher suites used by transport layer security for securing inter-node communication.Use the crsctl get cluster type command to determine whether the cluster is an Oracle Flex Cluster or an application cluster.Sets the type of the cluster.The crsctl get cpu equivalency command obtains the value of the CPU_EQUIVALENCY server configuration attribute.The crsctl set cpu equivalency command sets a value for the CPU_EQUIVALENCY server configuration attribute.Checks the status of Oracle High Availability Services and the Oracle Clusterware stack on the local server.Displays Oracle High Availability Services automatic startup configuration.Prevents the automatic startup of Oracle High Availability Services when the server boots.Enables automatic startup of Oracle High Availability Services when the server boots.Starts Oracle High Availability Services on the local server.Stops Oracle High Availability Services on the local server.Displays the active version and the configured patch level of the Oracle Clusterware software running in the cluster.Adds a user to the list of cluster administrators.Removes a user from the list of Oracle Clusterware administrators.Displays the list of users with Oracle Clusterware administrative privileges.Obtains the values of the Oracle Clusterware automatic resource start criteria.Sets the Oracle Clusterware automatic resource start criteria.Displays the patch level which is updated in the Grid home patch repository while patching a node.Displays the version of the Oracle Clusterware software stored in the binaries on the local node.Use the crsctl query crs site command to determine to which site a specific host or disk belongs.Displays the configured patch level of the installed Oracle Clusterware.Displays the latest version of the software that has been successfully started on the specified node.Obtains the value of a specific Cluster Synchronization Services parameter.Pins many specific nodes.Sets the value of a Cluster Synchronization Services parameter.Unpins many servers.Unsets the value of a Cluster Synchronization Services parameter and restores it to its default value.Retrieves the address stored in the Oracle Local Registry of the local Intelligent Platform Management Interface (IPMI) device.Stores the address of the local Intelligent Platform Management Interface (IPMI) device in the Oracle Local Registry.Stores the login credentials of an Intelligent Platform Management Interface (IPMI) administrator in the Oracle Local Registry.Determines whether Oracle Clusterware on the local server has been configured to use IPMI for failure isolation.Clears all previously stored IPMI configuration (login credentials and IP address) from the Oracle Local Registry.Determines the presence of the Intelligent Platform Management Interface (IPMI) driver on the local system.Lists the problems for which automatic restart of Cluster Synchronization Services is disabled.Stops the automatic restart of Cluster Synchronization Services when a specific problem occurs.Removes a voting file from the Oracle Clusterware configuration.Displays the voting files used by Cluster Synchronization Services, the status of the voting files, and the location of the disks, whether they are stored in Oracle ASM or elsewhere.Checks the status of the Cluster Time Synchronization services.Sends DHCP discover packets on the network at the specified port. If DHCP servers are present on the network, then they respond to the discovery message and the command succeeds.Displays the client ID that the Oracle Clusterware agent uses to obtain the IP addresses from the DHCP server for configured cluster resources. The VIP type is required.Sends a DHCP lease release request to a specific client ID, and sends release packets on the network to a specific port.Sends DHCP request packets on the network to the specified port.Replaces the existing discovery string used to locate voting files.Obtains a list of addresses returned by DNS lookup of the name with the specified DNS server.Starts a given IP name or IP address on a specified interface with a specified subnet mask.Checks if a given IP address is up on the network.Stops a given IP name or IP address on a specified interface with a specified subnet mask.Lists the components of the modules that you can debug.Creates the configuration deployment file for a new member cluster.Deletes a member cluster configuration.Displays the configuration for a member cluster.Removes a node from the cluster.Obtains the name of the local node.Obtains the configured node role of nodes in the cluster.Adds a configuration policy to the policy set.Deletes a configuration policy from the policy set.Predicts the effects of activating a specific policy without making changes to the system.Modifies an existing configuration policy.Obtains the status and definition of a configuration policy.Creates a single policy set, in the form of a text file, that reflects the server pool configuration.Modifies an existing policy set.Obtains the current policies in the policy set, including the access control list, which governs who can modify the set, the last activated policy, and the configuration which is now in effect, which is known as the Current policy.Initiates the check action inside the application-specific agent of a particular resource.Relocates resources to another server in the cluster.Checks the current setting value of the RESOURCE_USE_ENABLED server configuration parameter.Sets the value of the RESOURCE_USE_ENABLED server configuration parameter for the server on which you run this command.Transitions Oracle Clusterware and Oracle ASM into rolling patch mode.Transitions Oracle Clusterware and Oracle ASM out of rolling patch mode.Transitions Oracle Clusterware and Oracle ASM into rolling upgrade mode.Simulates the addition of a server without making changes to the system.Predicts the effects of deleting a server without making changes to the system.Predicts the effects of relocating a server to a different server pool without making changes to the system. Modifies the configuration of a particular server.Relocates a server to a different server pool.Obtains the status and configuration information of one or more particular servers.Obtains the current configured value for the CSS_CRITICAL server attributeSets the configuration value for the CSS_CRITICAL server attribute.Checks the current setting value of the SERVER_LABEL server attribute.Sets the configuration value of the SERVER_LABEL server configuration attribute for the server on which you run this command.Adds a server pool that is for hosting non-database resources (such as application servers) to Oracle Clusterware.Removes a server pool from the Oracle Clusterware configuration.Predicts the effects of adding a server pool without making changes to the system.Simulates the deletion of a server pool without making changes to the system.Use the crsctl eval modify serverpool command to predict the effects of modifying a server pool without making changes to the system. This command may be useful to cluster administrators.Retrieves permissions for a particular server pool.Modifies an existing server pool.Sets permissions for a particular server pool.Retrieves the status and configuration information of one or more particular server pools.Verifies that a daemon can listen on a specified address and port.Starts a test DNS server that will listen on a specified IP address and port.Queries the test DNS server running on a specified address and local host name.Stops a test DNS server.Moves or replaces the existing voting files.You can only use these commands in the Oracle Restart environment.Checks the status of ohasd.Displays the automatic startup configuration of the Oracle High Availability Services stack on the server.Disables automatic startup of the Oracle High Availability Services stack when the server boots up.Enables automatic startup of the Oracle High Availability Services stack when the server boots up.Displays the release version of the Oracle Clusterware software that is stored in the binaries on the local node.Displays the software version on the local node.Starts Oracle High Availability Services on the local server.Stops Oracle High Availability Services on the local server.You can use crsctl set log commands as the root user to enable dynamic debugging for Cluster Ready Services (CRS), Cluster Synchronization Services (CSS), and the Event Manager (EVM), and the clusterware subcomponents.Setting log levels for Oracle Clusterware.You can enable debugging for Oracle Clusterware modules and their components, and for resources, by setting environment variables or by running the crsctl set log command.">Oracle Clusterware Control (CRSCTL) Utility Reference</a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="CWADD91322"></a><div class="props_rev_3"><a id="GUID-E343F418-6EC3-4C9A-8521-7DEDC3A9E715" name="GUID-E343F418-6EC3-4C9A-8521-7DEDC3A9E715"></a><h3 id="CWADD-GUID-E343F418-6EC3-4C9A-8521-7DEDC3A9E715" class="sect3">Managing Automatic Restart of Oracle Clusterware Resources</h3>
               <div>
                  <p>You can prevent Oracle Clusterware from automatically restarting a resource by setting several resource attributes. You can also control how Oracle Clusterware manages the restart counters for your resources. In addition, you can customize the timeout values for the <code class="codeph">start</code>, <code class="codeph">stop</code>, and <code class="codeph">check</code> actions that Oracle Clusterware performs on resources.
                  </p>
                  <p>This section includes the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-C9E000F4-9F3B-4DD4-A874-77BE60239F3E" title="To manage automatic restarts, use the AUTO_START resource attribute to specify whether Oracle Clusterware should automatically start a resource when a server restarts.">Preventing Automatic Restarts of Oracle Clusterware Resources</a></p>
                     </li>
                     <li>
                        <p><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-0BB62412-6627-4739-8D8A-940F40C6F9D2">Automatically Manage Restart Attempts Counter for Oracle Clusterware Resources</a></p>
                     </li>
                  </ul>
               </div><a id="CWADD91323"></a><div class="props_rev_3"><a id="GUID-C9E000F4-9F3B-4DD4-A874-77BE60239F3E" name="GUID-C9E000F4-9F3B-4DD4-A874-77BE60239F3E"></a><h4 id="CWADD-GUID-C9E000F4-9F3B-4DD4-A874-77BE60239F3E" class="sect4">Preventing Automatic Restarts of Oracle Clusterware Resources</h4>
                  <div>
                     <p>To manage automatic restarts, use the <code class="codeph">AUTO_START</code> resource attribute to specify whether Oracle Clusterware should automatically start a resource when a server restarts.
                     </p>
                     <div class="section">
                        <p>When a server restarts, Oracle Clusterware attempts to start the resources that run on the server as soon as the server starts. Resource startup might fail, however, if system components on which a resource depends, such as a volume manager or a file system, are not running. This is especially true if Oracle Clusterware does not manage the system components on which a resource depends.</p>
                        <div class="infoboxnote" id="GUID-C9E000F4-9F3B-4DD4-A874-77BE60239F3E__GUID-03A86DFB-503A-4F43-AF94-58358EBA64DE">
                           <p class="notep1">Note:</p>
                           <p>Regardless of the value of the <code class="codeph">AUTO_START</code> resource attribute for a resource, the resource can start if another resource has a hard or weak start dependency on it or if the resource has a pullup start dependency on another resource.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="making-applications-highly-available-using-oracle-clusterware.html#GUID-64441104-69E2-4DE3-8C70-D31BDDCEB0E7">Start Dependencies</a></li>
                           <li><a href="oracle-clusterware-resource-reference.html#GUID-9C074F34-F180-4200-A99B-72186DAB56E1" title="An integer different for each of the INSTANCE_COUNT resource instances.Resource group attribute that contains a list of resources marked critical for a resource group.The SERVER_POOLS resource attribute is described.List of resources belonging to a resource group. Oracle Clusterware populates and updates this attribute when resources are added to the group.">Oracle Clusterware Resource Reference</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD91324"></a><div class="props_rev_3"><a id="GUID-0BB62412-6627-4739-8D8A-940F40C6F9D2" name="GUID-0BB62412-6627-4739-8D8A-940F40C6F9D2"></a><h4 id="CWADD-GUID-0BB62412-6627-4739-8D8A-940F40C6F9D2" class="sect4">Automatically Manage Restart Attempts Counter for Oracle Clusterware Resources</h4>
                  <div>
                     <p>When a resource fails, Oracle Clusterware attempts to restart the resource the number of times specified in the <code class="codeph">RESTART_ATTEMPTS</code> resource attribute. Note that this attribute does not specify the number of attempts to restart a failed resource (always one attempt), but rather the number of times the resource fails locally, before Oracle Clusterware attempts to fail it over. The CRSD process maintains an internal counter to track how often Oracle Clusterware restarts a resource. The number of times Oracle Clusterware has attempted to restart a resource is reflected in the <code class="codeph">RESTART_COUNT</code> resource attribute. Oracle Clusterware can automatically manage the restart attempts counter based on the stability of a resource. The <code class="codeph">UPTIME_THRESHOLD</code> resource attribute determines the time period that a resource must remain online, after which the <code class="codeph">RESTART_COUNT</code> attribute gets reset to 0. In addition, the <code class="codeph">RESTART_COUNT</code> resource attribute gets reset to 0 if the resource is relocated or restarted by the user, or the resource fails over to another server.
                     </p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can create an Oracle Text developer user account and build simple text query and catalog applications."></meta>
      <meta name="description" content="You can create an Oracle Text developer user account and build simple text query and catalog applications."></meta>
      <title>Oracle Text入门</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Application Developer&#39;s Guide "></meta>
      <meta property="og:description" content="You can create an Oracle Text developer user account and build simple text query and catalog applications."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Application Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="text-application-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-07T01:45:16-08:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96275-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="understanding-oracle-text-application-development.html" title="Previous" type="text/html"></link>
      <link rel="next" href="indexing-with-oracle-text.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Text Application Developer&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="CCAPP"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="understanding-oracle-text-application-development.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="indexing-with-oracle-text.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">应用程序开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle Text入门</li>
            </ol>
            <a id="GUID-D954F00B-1019-475A-ACD6-82E32DE8773B" name="GUID-D954F00B-1019-475A-ACD6-82E32DE8773B"></a><a id="CCAPP0200"></a>
            
            <h2 id="CCAPP-GUID-D954F00B-1019-475A-ACD6-82E32DE8773B" class="sect2"><span class="enumeration_chapter">2</span> Oracle Text入门</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以创建Oracle Text开发人员用户帐户并构建简单的文本查询和目录应用程序。</p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="getting-started-with-oracle-text.html#GUID-2F586496-2F56-49D5-B61E-4344E4A6577C">Oracle Text入门概述</a></p>
                  </li>
                  <li>
                     <p><a href="administering-oracle-text.html#GUID-AED02059-54CF-4498-9321-EFFA504CE5A6" title="在Oracle Database Vault环境中，如果您具有DV_ACCTMGR角色，则可以创建CTXSYS用户。">在Oracle Database Vault环境中配置Oracle Text</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-with-oracle-text.html#GUID-2654C316-2C70-4CD1-AFA4-5FD601D8624F">创建Oracle文本用户</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-with-oracle-text.html#GUID-8D1FF789-F5F2-4C0A-9D8E-978DADBBC4F2" title="您可以使用SQL * Loader批量加载表。">查询应用程序快速浏览</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-with-oracle-text.html#GUID-7648841D-DE6D-441D-8C1B-5883675C236F" title="您可以使用SQL * Loader批量加载表。">目录应用快速浏览</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-with-oracle-text.html#GUID-0AA9ED63-E6F8-4123-A3A9-7BB5676BC040">分类应用快速浏览</a></p>
                  </li>
               </ul>
            </div>
            <div class="props_rev_3"><a id="GUID-2F586496-2F56-49D5-B61E-4344E4A6577C" name="GUID-2F586496-2F56-49D5-B61E-4344E4A6577C"></a><h3 id="CCAPP-GUID-2F586496-2F56-49D5-B61E-4344E4A6577C" class="sect3"><span class="enumeration_section">2.1</span> Oracle Text入门概述</h3>
               <div>
                  <p>本章提供有关如何配置Oracle Text，如何创建Oracle Text开发人员用户帐户以及如何构建简单文本查询和目录应用程序的基本信息。它还提供有关加载，索引和查询表的每种应用程序的基本SQL语句的信息。</p>
                  <p>附录中给出了更完整的应用示例。</p>
                  <div class="infoboxnote" id="GUID-2F586496-2F56-49D5-B61E-4344E4A6577C__GUID-CE3DA49C-4C7A-43EE-BB0E-B4911E9CA747">
                     <p class="notep1">注意：</p>
                     <p>本章省略了<code class="codeph">SQL&gt;</code>提示，部分是为了提高可读性，部分是为了便于您剪切和粘贴文本。
                     </p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-2F586496-2F56-49D5-B61E-4344E4A6577C__GUID-04F9E5C2-B4E7-440C-A23E-AAE9F5EFAC3D">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="q">“ <a href="classifying-documents-in-oracle-text.html#GUID-D694A98B-3B18-48B2-B10E-FB884B436FAF" title="Oracle Text提供了各种文档分类方法。">在Oracle Text中</a></span>分类文档<span class="q">”</span>以了解有关构建文档分类应用程序的更多信息</p>
                  </div>
               </div>
            </div><a id="CCAPP9014"></a><div class="props_rev_3"><a id="GUID-2654C316-2C70-4CD1-AFA4-5FD601D8624F" name="GUID-2654C316-2C70-4CD1-AFA4-5FD601D8624F"></a><h3 id="CCAPP-GUID-2654C316-2C70-4CD1-AFA4-5FD601D8624F" class="sect3"><span class="enumeration_section">2.2</span>创建Oracle Text用户</h3>
               <div>
                  <div class="section">
                     <p>在创建Oracle Text索引并使用Oracle Text PL / SQL包之前，您需要创建一个用户<a id="d5610e259" class="indexterm-anchor"></a> <code class="codeph">CTXAPP</code>作用。此角色使您可以执行以下操作：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>创建和删除Oracle Text索引首选项</p>
                        </li>
                        <li>
                           <p>使用Oracle Text PL / SQL包</p>
                        </li>
                     </ul>
                     <p><a id="d5610e273" class="indexterm-anchor"></a>要创建Oracle Text应用程序开发人员用户，请以系统管理员用户身份执行以下步骤：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>创建用户。</span><div>
                           <p>以下SQL语句创建名为<code class="codeph">MYUSER</code>的用户，密码为<code class="codeph"><span class="codeinlineitalic">password</span></code> ：</p><pre class="oac_no_warn" dir="ltr">CREATE USER myuser IDENTIFIED BY <span class="italic">password</span> ;</pre></div>
                     </li>
                     <li class="stepexpand"><span>向用户授予角色。</span><div>
                           <p>以下SQL语句授予所需的角色<a id="d5610e303" class="indexterm-anchor"></a> <code class="codeph">RESOURCE</code> ， <a id="d5610e308" class="indexterm-anchor"></a> <code class="codeph">CONNECT</code> ，和<a id="d5610e313" class="indexterm-anchor"></a> <code class="codeph">CTXAPP</code>到<code class="codeph">MYUSER</code> ：</p><pre class="oac_no_warn" dir="ltr">资源，连接，CTXAPP到MYUSER;</pre></div>
                     </li>
                     <li class="stepexpand"><span>授予<code class="codeph">CTX PL/SQL</code>包的EXECUTE特权。</span><div>
                           <p>Oracle Text包含几个允许您执行从同步Oracle Text索引到突出显示文档的操作的包。例如， <code class="codeph">CTX_DDL</code>包中包含<a id="d5610e337" class="indexterm-anchor"></a> <code class="codeph">SYNC_INDEX</code>过程，使您可以同步索引。<a href="../ccref/oracle-text-SQL-statements-and-operators.html#CCREF-GUID-4775F5FE-4569-4DF4-A7CA-B20EC6880CAB" target="_blank"><span class="italic">Oracle Text Reference</span></a>描述了这些包。
                           </p>
                           <p>要从存储过程调用任何这些过程，您的应用程序需要对包执行权限。例如，授予<a id="d5610e349" class="indexterm-anchor"></a>在所有Oracle Text包上<code class="codeph">execute</code> <code class="codeph">MYUSER</code>权限，输入以下SQL语句：</p><pre class="oac_no_warn" dir="ltr">在CTXSYS.CTX_CLS上向myuser执行GRANT EXECUTE;在CTXSYS.CTX_DDL上对myuser执行GRANT EXECUTE;在CTXSYS.CTX_DOC上执行GRANT EXECUTE到myuser;在CTXSYS.CTX_OUTPUT上执行GRANT EXECUTE到myuser;在CTXSYS.CTX_QUERY上向myuser执行GRANT EXECUTE;在CTXSYS.CTX_REPORT上执行GRANT EXECUTE到myuser;在CTXSYS.CTX_THES上向myuser执行GRANT EXECUTE;在CTXSYS.CTX_ULEXER上向myuser执行GRANT EXECUTE;</pre><div class="infoboxnote" id="GUID-2654C316-2C70-4CD1-AFA4-5FD601D8624F__GUID-92BBDB28-F3D3-4F4E-8417-26373309687C">
                              <p class="notep1">注意：</p>
                              <p>这些权限授予<code class="codeph">CTXAPP</code>角色。但是，由于角色权限并不总是在PL / SQL过程中起作用，因此最明确地将这些权限授予已具有<code class="codeph">CTXAPP</code>角色的用户是最安全的。
                              </p>
                           </div>
                        </div>
                     </li>
                  </ol>
               </div>
            </div><a id="CCAPP9015"></a><div class="props_rev_3"><a id="GUID-8D1FF789-F5F2-4C0A-9D8E-978DADBBC4F2" name="GUID-8D1FF789-F5F2-4C0A-9D8E-978DADBBC4F2"></a><h3 id="CCAPP-GUID-8D1FF789-F5F2-4C0A-9D8E-978DADBBC4F2" class="sect3"><span class="enumeration_section">2.3</span>查询应用程序快速浏览</h3>
               <div>
                  <p>在基本文本查询应用程序中，用户输入查询词或短语，并期望应用程序返回与查询最匹配的文档列表。这样的应用程序涉及创建一个<code class="codeph">CONTEXT</code>索引并使用<code class="codeph">CONTAINS.</code>查询它<code class="codeph">CONTAINS.</code></p>
                  <p>通常，查询应用程序需要用户界面。在<a href="CONTEXT-query-application.html#GUID-1F1B44E8-ACCA-446A-84EA-67FA692476BA">CONTEXT查询应用程序中</a>给出了如何使用<code class="codeph">CONTEXT</code>索引类型构建此类查询应用程序的示例。
                  </p>
                  <p>本节中的示例提供了用于加载文本表，索引文档和查询索引的基本SQL语句。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="getting-started-with-oracle-text.html#GUID-A5193144-108C-4DAB-AA36-0EACE8822AD2">创建文本表</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-with-oracle-text.html#GUID-7154E795-28C2-46E2-9CC5-BC60D65EA94C" title="您可以使用SQL * Loader批量加载表。">使用SQL * Loader加载表</a></p>
                     </li>
                  </ul>
               </div><a id="CCAPP9645"></a><div class="props_rev_3"><a id="GUID-A5193144-108C-4DAB-AA36-0EACE8822AD2" name="GUID-A5193144-108C-4DAB-AA36-0EACE8822AD2"></a><h4 id="CCAPP-GUID-A5193144-108C-4DAB-AA36-0EACE8822AD2" class="sect4"><span class="enumeration_section">2.3.1</span>创建文本表</h4>
                  <div>
                     <div class="section">
                        <p>执行以下步骤以在表中创建和加载文档。</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以新用户身份连接。</span><div>
                              <p>在创建任何表之前，请假定您创建的用户的身份。</p><pre class="oac_no_warn" dir="ltr">连接myuser;</pre></div>
                        </li>
                        <li class="stepexpand"><span>创建文本表。</span><div>
                              <p>以下示例使用<code class="codeph">CREATE</code> <code class="codeph">TABLE</code>语句创建一个名为<code class="codeph">docs</code>表，其中包含两列（ <code class="codeph">id</code>和<code class="codeph">text</code> 。此示例使<code class="codeph">id</code>列成为主键。<code class="codeph">text</code>列是<code class="codeph">VARCHAR2</code> 。
                              </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE docs（id NUMBER PRIMARY KEY，text VARCHAR2（200））;</pre><div class="infoboxnote" id="GUID-A5193144-108C-4DAB-AA36-0EACE8822AD2__GUID-0E070647-2177-4156-97C9-173EBCED60E3">
                                 <p class="notep1">注意：</p>
                                 <p>支持以下类型的主键： <code class="codeph">NUMBER, VARCHAR2, DATE, CHAR, VARCHAR,</code>和<code class="codeph">RAW.</code></p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>将文档加载到表中。</span><div>
                              <p>使用SQL <a id="d5610e591" class="indexterm-anchor"></a> <code class="codeph">INSERT</code>语句将文本加载到表中。
                              </p>
                              <p>要填充<code class="codeph">docs</code>表，请使用<code class="codeph">INSERT</code>语句：</p><pre class="oac_no_warn" dir="ltr">INSERT INTO docs VALUES（1，'&lt;HTML&gt; California是美国的一个州。&lt;/ HTML&gt;'）; INSERT INTO docs VALUES（2，'&lt;HTML&gt;巴黎是法国的一个城市。&lt;/ HTML&gt;'）; INSERT INTO docs VALUES（3，'&lt;HTML&gt;法国在欧洲。&lt;/ HTML&gt;'）;</pre></div>
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-7154E795-28C2-46E2-9CC5-BC60D65EA94C" name="GUID-7154E795-28C2-46E2-9CC5-BC60D65EA94C"></a><h4 id="CCAPP-GUID-7154E795-28C2-46E2-9CC5-BC60D65EA94C" class="sect4"><span class="enumeration_section">2.3.2</span>使用SQL * Loader加载表</h4>
                  <div>
                     <p>您可以使用SQL * Loader批量加载表。</p>
                     <div class="section">
                        <p>执行以下步骤以使用SQL * Loader批量加载表：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>创建<code class="codeph">CONTEXT</code>索引。</span><div>
                              <p>通过在文本列上创建<code class="codeph">CONTEXT</code>索引来索引HTML文件，如下所示。因为您正在索引HTML，所以此示例使用<a id="d5610e691" class="indexterm-anchor"></a> <code class="codeph">NULL_FILTER</code>首选项类型，无过滤和<a id="d5610e696" class="indexterm-anchor"></a> <code class="codeph">HTML_SECTION_GROUP</code>类型。如果索引PDF，Microsoft Word或其他格式化文档，则使用<a id="d5610e701" class="indexterm-anchor"></a> <code class="codeph">CTXSYS.AUTO_FILTER</code> （默认值）作为<code class="codeph">FILTER</code>首选项。
                              </p><pre class="oac_no_warn" dir="ltr">CREATE INDEX idx_docs ON docs（text）INDEXTYPE是CTXSYS.CONTEXT PARAMETERS（'FILTER CTXSYS.NULL_FILTER SECTION GROUP CTXSYS.HTML_SECTION_GROUP'）;</pre><p>此示例还使用<code class="codeph">HTML_SECTION_GROUP</code>部分组，建议将其用于索引HTML文档。使用<code class="codeph">HTML_SECTION_GROUP</code>可以在特定的HTML标记内进行搜索，并从索引中消除不需要的标记，例如字体信息。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>使用<code class="codeph">CONTAINS.</code>查询您的表格<code class="codeph">CONTAINS.</code></span><div>
                              <p>首先，设置<code class="codeph">SELECT</code>语句输出的格式，以便于读取。将<code class="codeph">text</code>列的宽度设置为40个字符：</p><pre class="oac_no_warn" dir="ltr">COLUMN text FORMAT a40;</pre><p><a id="d5610e737" class="indexterm-anchor"></a>接下来，用表查询表<a id="d5610e740" class="indexterm-anchor"></a>带<code class="codeph">CONTAINS.</code> <code class="codeph">SELECT</code>语句<code class="codeph">CONTAINS.</code>此查询检索满足查询的文档ID。以下查询查找包含单词<span class="italic">France的</span>所有文档<span class="italic">：</span></p><pre class="oac_no_warn" dir="ltr">SELECT SCORE（1），id，text FROM docs WHERE CONTAINS（text，'France'，1）&gt; 0;分数（1）ID文字---------- ---------- ------------------------ ---------------- 4 3 &lt;HTML&gt;法国在欧洲。&lt;/ HTML&gt; 4 2 &lt;HTML&gt;巴黎是法国的一个城市。&lt;/ HTML&gt;</pre></div>
                        </li>
                        <li class="stepexpand"><span>提交文件。</span><div>
                              <p><a id="d5610e759" class="indexterm-anchor"></a>在实际应用程序中，您可以使用突出显示的查询字词显示所选文档。Oracle Text使您可以使用。标记文档<a id="d5610e762" class="indexterm-anchor"></a> <code class="codeph">CTX_DOC</code>包。
                              </p>
                              <p>您可以使用SQL * Plus中的匿名PL / SQL块演示HTML文档标记。但是，在实际应用程序中，您可以在浏览器中显示文档。</p>
                              <p><a id="d5610e770" class="indexterm-anchor"></a>此PL / SQL示例使用内存中的版本<a id="d5610e773" class="indexterm-anchor"></a> <code class="codeph">CTX_DOC.MARKUP</code>在文件3中突出显示“ <span class="italic">法国</span> ”一词。它分配一个临时的<a id="d5610e781" class="indexterm-anchor"></a> <code class="codeph">CLOB</code> （字符大对象数据类型） <a id="d5610e786" class="indexterm-anchor"></a><a id="d5610e789" class="indexterm-anchor"></a>存储标记文本并将其读回标准输出。然后在退出之前取消分配<code class="codeph">CLOB</code> ：</p><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON; DECLARE 2 mklob CLOB; 3 amt NUMBER：= 40; 4行VARCHAR2（80）; 5 BEGIN 6 CTX_DOC.MARKUP（'idx_docs'，'3'，'France'，mklob）; 7 DBMS_LOB.READ（mklob，amt，1，line）; 8 DBMS_OUTPUT.PUT_LINE（'第一个40个字符：'||行）; 9 DBMS_LOB.FREETEMPORARY（mklob）; 10结束; 11 / FIRST 40 CHARS：&lt;HTML&gt; &lt;&lt;&lt; France &gt;&gt;&gt;在欧洲。&lt;/ HTML&gt; PL / SQL程序已成功完成。</pre></div>
                        </li>
                        <li class="stepexpand"><span>数据操作后同步索引。</span><div>
                              <p><a id="d5610e802" class="indexterm-anchor"></a><a id="d5610e804" class="indexterm-anchor"></a>创建<code class="codeph">CONTEXT</code>索引时，显式同步索引以将其更新为对文本表的任何插入，更新或删除。
                              </p>
                              <p><a id="d5610e811" class="indexterm-anchor"></a> Oracle Text使您可以使用<a id="d5610e814" class="indexterm-anchor"></a> <code class="codeph">CTX_DDL.SYNC_INDEX</code>程序。
                              </p>
                              <p>在<code class="codeph">docs</code>表中添加一些行：</p><pre class="oac_no_warn" dir="ltr">INSERT INTO docs VALUES（4，'&lt;HTML&gt;洛杉矶是加州的一个城市。&lt;/ HTML&gt;'）; INSERT INTO docs VALUES（5，'&lt;HTML&gt;墨西哥城很大。&lt;/ HTML&gt;'）;</pre><p>由于索引未同步，因此不会在<span class="italic">城市上</span>查询这些新行<span class="italic">：</span></p><pre class="oac_no_warn" dir="ltr">SELECT SCORE（1），id，text FROM docs WHERE CONTAINS（text，'city'，1）&gt; 0;分数（1）ID文字---------- ---------- ------------------------ -------------------------- 4 2 &lt;HTML&gt;巴黎是法国的一个城市。&lt;/ HTML&gt;</pre><p>因此，将索引与2 Mb内存同步并重新运行查询：</p><pre class="oac_no_warn" dir="ltr">EXEC CTX_DDL.SYNC_INDEX（'idx_docs'，'2M'）; PL / SQL过程成功完成。COLUMN text FORMAT a50; SELECT SCORE（1），id，text FROM docs WHERE CONTAINS（text，'city'，1）&gt; 0;分数（1）ID文字---------- ---------- ------------------------ -------------------------- 4 5 &lt;HTML&gt;墨西哥城很大。&lt;/ HTML&gt; 4 4 &lt;HTML&gt;洛杉矶是一个城市在加利福尼亚州。&lt;/ HTML&gt; 4 2 &lt;HTML&gt;巴黎是法国的一个城市。&lt;/ HTML&gt;</pre><div class="infoboxnotealso" id="GUID-7154E795-28C2-46E2-9CC5-BC60D65EA94C__GUID-336E3ACB-8E00-403B-AF31-2EF14D1FAEC7">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="CONTEXT-query-application.html#GUID-03558FFB-EFEF-4B43-92CA-E9ABB5EC0E6B">构建PSP Web应用程序</a> ”</span> ，以获取如何使用SQL * Loader从数据文件加载文本表的示例</p>
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div><a id="CCAPP9020"></a><div class="props_rev_3"><a id="GUID-7648841D-DE6D-441D-8C1B-5883675C236F" name="GUID-7648841D-DE6D-441D-8C1B-5883675C236F"></a><h3 id="CCAPP-GUID-7648841D-DE6D-441D-8C1B-5883675C236F" class="sect3"><span class="enumeration_section">2.4</span>目录应用快速浏览</h3>
               <div>
                  <p>本节中的示例提供了基本的SQL语句，用于为销售电子设备（如相机和CD播放器）的拍卖网站创建目录索引。每天都会添加新库存，商品说明，出价日期和价格必须一起存储。</p>
                  <p>该应用程序需要良好的混合查询响应时间。关键是确定用户经常搜索哪些列以创建合适的<code class="codeph">CTXCAT</code>索引。对此类索引的查询使用<code class="codeph">CATSEARCH</code>运算符。
                  </p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="getting-started-with-oracle-text.html#GUID-6D37D808-7B7C-4DF7-A0D2-B769411100EB">创建表</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-with-oracle-text.html#GUID-8A4EFD39-6A03-49EC-BFDD-FB97DB7DA728" title="您可以使用SQL * Loader批量加载表。">使用SQL * Loader加载表</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-7648841D-DE6D-441D-8C1B-5883675C236F__GUID-FF418CB1-E875-4A45-AE56-18E3BF91E93D">
                     <p class="notep1">注意：</p>
                     <p>通常，查询应用程序需要用户界面。如何构建使用这样的查询应用的示例<code class="codeph">CATSEARCH</code>索引类型中给出<a href="CATSEARCH-query-application.html#GUID-72F18A97-92D7-411D-871A-27AD749D6141">CATSEARCH查询应用</a> 。
                     </p>
                  </div>
               </div><a id="CCAPP9650"></a><div class="props_rev_3"><a id="GUID-6D37D808-7B7C-4DF7-A0D2-B769411100EB" name="GUID-6D37D808-7B7C-4DF7-A0D2-B769411100EB"></a><h4 id="CCAPP-GUID-6D37D808-7B7C-4DF7-A0D2-B769411100EB" class="sect4"><span class="enumeration_section">2.4.1</span>创建表</h4>
                  <div>
                     <div class="section">
                        <p>执行以下步骤以创建和加载表：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以适当的用户身份连接。</span><div>
                              <p>以<code class="codeph">myuser</code>身份连接<code class="codeph">CTXAPP</code>角色：</p><pre class="oac_no_warn" dir="ltr">连接myuser;</pre></div>
                        </li>
                        <li class="stepexpand"><span>创建你的表。</span><div>
                              <p>设置拍卖表以存储您的广告资源：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE拍卖（item_id NUMBER，title VARCHAR2（100），category_id NUMBER，price NUMBER，bid_close DATE）;</pre></div>
                        </li>
                        <li class="stepexpand"><span>填充你的表。</span><div>
                              <p>使用各种项目填充表格，每个项目都包含<code class="codeph">id, title, price</code>和<code class="codeph">bid_date:</code></p><pre class="oac_no_warn" dir="ltr">插入拍卖价值（1，'NIKON CAMERA'，1,400，'24 -OCT-2002'）;插入拍卖价值（2，'OLYMPUS CAMERA'，1,300，'25 -OCT-2002'）;插入拍卖价值（3，'PENTAX CAMERA'，1,200，' -  26 -OCT-2002'）;插入拍卖价值（4，'CANON CAMERA'，1,250，' -  27 -OCT-2002'）;</pre></div>
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-8A4EFD39-6A03-49EC-BFDD-FB97DB7DA728" name="GUID-8A4EFD39-6A03-49EC-BFDD-FB97DB7DA728"></a><h4 id="CCAPP-GUID-8A4EFD39-6A03-49EC-BFDD-FB97DB7DA728" class="sect4"><span class="enumeration_section">2.4.2</span>使用SQL * Loader加载表</h4>
                  <div>
                     <p>您可以使用SQL * Loader批量加载表。</p>
                     <div class="section">
                        <p>执行以下步骤以使用SQL * Loader批量加载表：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>确定您的查询。</span><div>
                              <p>确定可能检索的标准。在此示例中，您确定所有查询都在标题列中搜索项目描述，并且大多数查询按价格排序。稍后，当您使用<code class="codeph">CATSEARCH</code>运算符时，请指定text列的术语和结构化子句的条件。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>创建子索引以按价格订购。</span><div>
                              <p>要使Oracle Text有效地提供这些查询，您需要一个<a id="d5610e1132" class="indexterm-anchor"></a>价格列的子索引，因为您的查询按价格排序。
                              </p>
                              <p>因此，创建一个名为<code class="codeph">auction_set</code>的索引集，并为price列添加一个子索引：</p><pre class="oac_no_warn" dir="ltr">EXEC CTX_DDL.CREATE_INDEX_SET（'auction_iset'）; EXEC CTX_DDL.ADD_INDEX（'auction_iset'，'price'）; / * subindex A * /</pre></div>
                        </li>
                        <li class="stepexpand"><span>创建<code class="codeph">CTXCAT</code>索引。</span><div>
                              <p>使用<code class="codeph">CREATE</code> <code class="codeph">INDEX</code>语句在<code class="codeph">AUCTION</code>表上创建组合目录索引：</p><pre class="oac_no_warn" dir="ltr">CREATE INDEX auction_titlex on AUCTION（title）INDEXTYPE IS CTXSYS.CTXCAT PARAMETERS（'index set auction_iset'）;</pre><p>下图显示了如何<a id="d5610e1164" class="indexterm-anchor"></a> <code class="codeph">CTXCAT</code>索引及其子索引与列有关。
                              </p>
                              <div class="figure" id="GUID-8A4EFD39-6A03-49EC-BFDD-FB97DB7DA728__GUID-6C550FCB-696E-4D00-A701-FC390DDAE448">
                                 <p class="titleinfigure">图2-1拍卖表架构和CTXCAT索引</p><img src="img/ccapp_pb_019a.png" width="403" alt="下面描述图2-1" title="下面描述图2-1" longdesc="img_text/ccapp_pb_019a.html"><br><a href="img_text/ccapp_pb_019a.html">“图2-1拍卖表模式和CTXCAT索引”的描述</a></div>
                              <!-- class="figure" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span>使用<code class="codeph">CATSEARCH.</code>查询您的表格<code class="codeph">CATSEARCH.</code></span><div>
                              <p><a id="d5610e1183" class="indexterm-anchor"></a>在<code class="codeph">AUCTION</code>表上创建<code class="codeph">CTXCAT</code>索引后，使用。查询此索引<a id="d5610e1192" class="indexterm-anchor"></a> <code class="codeph">CATSEARCH</code>运营商。
                              </p>
                              <p>首先，设置输出格式以使输出可读：</p><pre class="oac_no_warn" dir="ltr">COLUMN title FORMAT a40;</pre><p>接下来，运行查询：</p><pre class="oac_no_warn" dir="ltr">SELECT title，price FROM拍卖WHERE CATSEARCH（标题，'CAMERA'，'按价格排序'）&gt; 0;标题--------------- ---------- PENTAX CAMERA 200 CANON CAMERA 250 OLYMPUS CAMERA 300 NIKON CAMERA 400选择标题，价格拍卖WHERE CATSEARCH（标题， 'CAMERA'，'价格&lt;= 300'）&gt; 0;标题--------------- ---------- PENTAX CAMERA 200 CANON CAMERA 250 OLYMPUS CAMERA 300</pre></div>
                        </li>
                        <li class="stepexpand"><span>更新你的表格。</span><div>
                              <p><a id="d5610e1210" class="indexterm-anchor"></a>通过添加新行来更新目录表。执行此操作时， <code class="codeph">CTXCAT</code>索引会自动同步以反映更改。
                              </p>
                              <p>例如，将以下新行添加到表中，然后重新运行查询：</p><pre class="oac_no_warn" dir="ltr">插入拍卖价值（5，'FUJI CAMERA'，1,350，'28 -OCT-2002'）;插入拍卖价值（6，'SONY CAMERA'，1,310，'28 -OCT-2002'）; SELECT title，price FROM拍卖WHERE CATSEARCH（标题，'CAMERA'，'按价格排序'）&gt; 0;标题----------------------------------- ---------- PENTAX CAMERA 200 CANON CAMERA 250 OLYMPUS CAMERA 300 SONY CAMERA 310 FUJI CAMERA 350 NIKON CAMERA 400 6行选择。
</pre><p>请注意添加的行如何立即显示在查询中。</p>
                              <div class="infoboxnotealso" id="GUID-8A4EFD39-6A03-49EC-BFDD-FB97DB7DA728__GUID-173BE6D9-DAF2-4453-80A7-63379146C169">
                                 <p class="notep1">也可以看看：</p>
                                 <p><span class="q">“ <a href="CONTEXT-query-application.html#GUID-03558FFB-EFEF-4B43-92CA-E9ABB5EC0E6B">构建PSP Web应用程序</a> ”</span> ，以获取如何使用SQL * Loader从数据文件加载文本表的示例</p>
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div><a id="CCAPP9021"></a><div class="props_rev_3"><a id="GUID-0AA9ED63-E6F8-4123-A3A9-7BB5676BC040" name="GUID-0AA9ED63-E6F8-4123-A3A9-7BB5676BC040"></a><h3 id="CCAPP-GUID-0AA9ED63-E6F8-4123-A3A9-7BB5676BC040" class="sect3"><span class="enumeration_section">2.5</span>分类应用快速浏览</h3>
               <div>
                  <p>分类应用程序的功能是基于文档内容执行某些操作。这些操作可以包括将类别ID分配给文档或将文档发送给用户。结果是文档的分类。</p>
                  <p>本节包含以下部分：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="getting-started-with-oracle-text.html#GUID-C17706E8-D438-4CF3-B6D3-6AED543B1BFD">关于文件的分类</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-with-oracle-text.html#GUID-BE0855FE-7920-4B57-9ED0-F311C5807626">创建分类应用程序的步骤</a></p>
                     </li>
                  </ul>
               </div><a id="CCAPP9490"></a><a id="CCAPP9695"></a><div class="props_rev_3"><a id="GUID-C17706E8-D438-4CF3-B6D3-6AED543B1BFD" name="GUID-C17706E8-D438-4CF3-B6D3-6AED543B1BFD"></a><h4 id="CCAPP-GUID-C17706E8-D438-4CF3-B6D3-6AED543B1BFD" class="sect4"><span class="enumeration_section">2.5.1</span>关于文档的分类</h4>
                  <div>
                     <p>文档根据预定义的规则进行分类。这些规则选择类别的文档。例如， <span class="italic">“总统选举”</span>的查询规则选择关于政治的类别的文档。
                     </p>
                     <p>Oracle Text提供了几种类型的分类。一种是<a id="d5610e1385" class="indexterm-anchor"></a><a id="d5610e1387" class="indexterm-anchor"></a> <span class="italic">简单，</span>或<a id="d5610e1394" class="indexterm-anchor"></a><a id="d5610e1396" class="indexterm-anchor"></a>此处讨论的<span class="italic">基于规则的</span>分类，您可以在其中创建文档类别和分类文档的规则。同<a id="d5610e1403" class="indexterm-anchor"></a> <span class="italic">监督</span>分类，Oracle Text从您提供的一组培训文档中获取规则。同<a id="d5610e1409" class="indexterm-anchor"></a> <span class="italic">集群，</span> Oracle Text为您完成所有工作，同时获得规则和类别。
                     </p>
                     <p>要使用Oracle Text为文档内容创建简单的分类应用程序，请创建<span class="bold">规则。</span> <a id="d5610e1418" class="indexterm-anchor"></a><a id="d5610e1422" class="indexterm-anchor"></a> 规则本质上是一个对文档内容进行分类的查询表。您可以在<code class="codeph">CTXRULE</code>索引中索引这些规则。要对传入的文本流进行分类，请使用<a id="d5610e1430" class="indexterm-anchor"></a> <code class="codeph">SELECT</code>语句的<code class="codeph">WHERE</code>子句中的<code class="codeph">MATCHES</code>运算符。有关a的一般流程，请参见下图<a id="d5610e1442" class="indexterm-anchor"></a>分类申请。
                     </p>
                     <div class="figure" id="GUID-C17706E8-D438-4CF3-B6D3-6AED543B1BFD__GUID-04221F39-40E1-4500-943F-8D13C2A00327">
                        <p class="titleinfigure">图2-2文档分类应用程序概述</p><img src="img/ccapp_pb_018a.png" width="516" alt="下面是图2-2的描述" title="下面是图2-2的描述" longdesc="img_text/ccapp_pb_018a.html"><br><a href="img_text/ccapp_pb_018a.html">“图2-2文档分类应用程序概述”的说明</a></div>
                     <!-- class="figure" -->
                     <div class="infoboxnotealso" id="GUID-C17706E8-D438-4CF3-B6D3-6AED543B1BFD__GUID-528FF0FB-78A0-49A1-A1D5-C2FB96E2C9A1">
                        <p class="notep1">也可以看看：</p>
                        <p><span class="q">“ <a href="classifying-documents-in-oracle-text.html#GUID-69EAD761-8C53-455D-91F3-C85E84F27A70">文档分类概述</a> ”</span></p>
                     </div>
                  </div>
               </div><a id="CCAPP9022"></a><div class="props_rev_3"><a id="GUID-BE0855FE-7920-4B57-9ED0-F311C5807626" name="GUID-BE0855FE-7920-4B57-9ED0-F311C5807626"></a><h4 id="CCAPP-GUID-BE0855FE-7920-4B57-9ED0-F311C5807626" class="sect4"><span class="enumeration_section">2.5.2</span>创建分类应用程序</h4>
                  <div>
                     <div class="section">
                        <p>以下示例说明如何使用具有<code class="codeph">CTXAPP</code>角色的<code class="codeph">myuser</code>对文档进行分类。您可以定义简单类别，创建<code class="codeph">CTXRULE</code>索引并使用<code class="codeph">MATCHES.</code></p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>以适当的用户身份连接。</span><div>
                              <p>以<code class="codeph">myuser</code>身份连接<code class="codeph">CTXAPP</code>角色：</p><pre class="oac_no_warn" dir="ltr">连接myuser;</pre></div>
                        </li>
                        <li class="stepexpand"><span>创建规则表。</span><div>
                              <p><a id="d5610e1560" class="indexterm-anchor"></a>在此示例中，您将创建一个名为<code class="codeph">queries.</code>的表<code class="codeph">queries.</code> 每行定义一个带有ID的类别和一个作为查询字符串的规则。
                              </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE查询（query_id NUMBER，query_string VARCHAR2（80））; INSERT INTO查询VALUES（1，'oracle'）; INSERT INTO查询VALUES（2，'larry或ellison'）; INSERT INTO查询VALUES（3，'oracle和text'）; INSERT INTO查询VALUES（4，'市场份额'）;</pre></div>
                        </li>
                        <li class="stepexpand"><span>创建您的<code class="codeph">CTXRULE</code>索引。</span><div><pre class="oac_no_warn" dir="ltr">CREATE INDEX queryx ON查询（query_string）INDEXTYPE IS CTXSYS.CTXRULE;</pre></div>
                        </li>
                        <li class="stepexpand"><span>使用<code class="codeph">MATCHES.</code><a id="d5610e1584" class="indexterm-anchor"></a></span><div>
                              <p>使用<a id="d5610e1589" class="indexterm-anchor"></a> <code class="codeph">SELECT</code>语句的<code class="codeph">WHERE</code>子句中的<code class="codeph">MATCHES</code>运算符，用于将文档与查询匹配，然后对文档进行分类。
                              </p><pre class="oac_no_warn" dir="ltr">COLUMN query_string FORMAT a35; SELECT query_id，query_string FROM查询WHERE MATCHES（query_string，'Oracle宣布其在数据库中的市场份额比去年增加。'）&gt; 0; QUERY_ID QUERY_STRING ---------- ----------------------------------- 1 oracle 4市场份额</pre><p>如图所示，文档字符串与类别1和4匹配。通过此分类，您可以执行操作，例如将文档写入特定表或通过电子邮件发送给用户。</p>
                              <div class="infoboxnotealso" id="GUID-BE0855FE-7920-4B57-9ED0-F311C5807626__GUID-AF31E117-6524-4367-892D-2C85A0B91FB6">
                                 <p class="notep1">也可以看看：</p>
                                 <p><a href="classifying-documents-in-oracle-text.html#GUID-D694A98B-3B18-48B2-B10E-FB884B436FAF" title="Oracle Text offers various approaches to document classification.">在Oracle Text中</a>对<a href="classifying-documents-in-oracle-text.html#GUID-D694A98B-3B18-48B2-B10E-FB884B436FAF" title="Oracle Text提供了各种文档分类方法。">文档进行</a>分类以获得更多扩展分类示例</p>
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>使用适用于DRDA的Oracle数据库网关</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="User&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="User&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-gateway-drda-users-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-16T16:51:33-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2006, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="F18236-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="database-gateway-drda-release-information.html" title="Previous" type="text/html"></link>
      <link rel="next" href="developing-applications.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Gateway for DRDA User&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="DRDAG"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="database-gateway-drda-release-information.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="developing-applications.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">用户指导</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用适用于DRDA的Oracle数据库网关</li>
            </ol>
            <a id="GUID-7C1EA11D-0B32-4BF5-9BA0-D90B6C011307" name="GUID-7C1EA11D-0B32-4BF5-9BA0-D90B6C011307"></a><a id="DRDAG137"></a>
            
            <h2 id="DRDAG-GUID-7C1EA11D-0B32-4BF5-9BA0-D90B6C011307" class="sect2"><span class="enumeration_chapter">3</span>使用适用于DRDA的Oracle数据库网关</h2>
         </header>
         <div class="ind">
            <div>
               <p><a id="d4497e19" class="indexterm-anchor"></a><a id="d4497e21" class="indexterm-anchor"></a>使用适用于DRDA的Oracle数据库网关涉及连接到相应的网关系统和与网关关联的远程DRDA数据库。
               </p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="using-database-gateway-drda.html#GUID-CC26958C-89D7-4230-A598-200F135D8987">DRDA网关功能</a></p>
                  </li>
                  <li>
                     <p><a href="using-database-gateway-drda.html#GUID-0456C1B9-D99D-4D78-BD5D-C4AEB097AF58">处理数据库链接</a></p>
                  </li>
                  <li>
                     <p><a href="using-database-gateway-drda.html#GUID-AA0A394C-8E8B-4ECD-8C29-A8763EAC0C0A">访问网关</a></p>
                  </li>
                  <li>
                     <p><a href="using-database-gateway-drda.html#GUID-E716BE71-7D67-4AA4-8C5E-B8843733B388">访问i5 / OS文件成员</a></p>
                  </li>
                  <li>
                     <p><a href="using-database-gateway-drda.html#GUID-ABF1C711-C195-4E65-AB3B-199CB484FB21">使用同义词功能</a></p>
                  </li>
                  <li>
                     <p><a href="using-database-gateway-drda.html#GUID-DB4B2396-1F94-4C1E-B47D-D312EEAF4BB2">执行分布式查询</a></p>
                  </li>
                  <li>
                     <p><a href="using-database-gateway-drda.html#GUID-3C8C4F0C-49AF-4587-BA69-A1E154EB55C5">在异构环境中复制</a></p>
                  </li>
                  <li>
                     <p><a href="using-database-gateway-drda.html#GUID-332D7A50-49C1-4CED-90C7-B3A821DDE165">将数据从Oracle数据库复制到DRDA服务器</a></p>
                  </li>
                  <li>
                     <p><a href="using-database-gateway-drda.html#GUID-43ADB851-BBBF-4418-9C57-7D4E3934282F">将数据从DRDA服务器复制到Oracle数据库</a></p>
                  </li>
                  <li>
                     <p><a href="using-database-gateway-drda.html#GUID-D39B98BF-6E54-4606-88CF-4C0993CB1A14">跟踪SQL语句</a></p>
                  </li>
               </ul>
            </div><a id="DRDAG1248"></a><div class="props_rev_3"><a id="GUID-CC26958C-89D7-4230-A598-200F135D8987" name="GUID-CC26958C-89D7-4230-A598-200F135D8987"></a><h3 id="DRDAG-GUID-CC26958C-89D7-4230-A598-200F135D8987" class="sect3">DRDA网关功能</h3>
               <div>
                  <p>本节介绍以下DRDA网关功能：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-database-gateway-drda.html#GUID-AC6A0159-7272-4A88-AA31-043832565FA8">CHAR语义学</a></p>
                     </li>
                     <li>
                        <p><a href="using-database-gateway-drda.html#GUID-3A4227E2-FBEB-4771-9CDA-341465ADAAB1">多字节字符集比率抑制</a></p>
                     </li>
                     <li>
                        <p><a href="using-database-gateway-drda.html#GUID-4401E8A1-0D7A-4080-B656-BD7E11465D50">IPv6支持</a></p>
                     </li>
                     <li>
                        <p><a href="using-database-gateway-drda.html#GUID-43B42207-A8E7-4C3C-A13F-FFA189854D18">网关会话IDLE超时</a></p>
                     </li>
                  </ul>
               </div><a id="DRDAG1249"></a><div class="props_rev_3"><a id="GUID-AC6A0159-7272-4A88-AA31-043832565FA8" name="GUID-AC6A0159-7272-4A88-AA31-043832565FA8"></a><h4 id="DRDAG-GUID-AC6A0159-7272-4A88-AA31-043832565FA8" class="sect4">CHAR语义学</h4>
                  <div>
                     <p>此功能允许网关可选地在<code class="codeph">CHAR</code>语义模式下运行。而不是总是将UDB <code class="codeph">CHAR</code>列描述为<code class="codeph">CHAR(n BYTE)</code> ，此功能将它们描述为<code class="codeph">CHAR(n CHAR)</code>和<code class="codeph">VARCHAR(n CHAR)</code> 。该概念类似于Oracle数据库<code class="codeph">CHAR</code> Semantics。您需要指定<code class="codeph">HS_NLS_LENGTH_SEMANTICS=CHAR</code>网关参数以激活此选项。有关更多详细信息，请参阅<a href="database-gateway-drda-initialization-parameters.html#GUID-D5965054-49C8-4D6A-91C3-C33BA2477434">初始化参数</a> 。
                     </p>
                  </div>
               </div><a id="DRDAG1250"></a><div class="props_rev_3"><a id="GUID-3A4227E2-FBEB-4771-9CDA-341465ADAAB1" name="GUID-3A4227E2-FBEB-4771-9CDA-341465ADAAB1"></a><h4 id="DRDAG-GUID-3A4227E2-FBEB-4771-9CDA-341465ADAAB1" class="sect4">多字节字符集比率抑制</h4>
                  <div>
                     <p>此功能可选地抑制从UDB数据库到涉及多字节字符集的Oracle数据库的比率扩展。默认情况下，Oracle数据库网关DRDA采用最差比率来防止数据被截断或缓冲区大小不足。但是，如果您具有UDB数据库的特定知识并且不希望进行扩展，则可以指定<code class="codeph">HS_KEEP_REMOTE_COLUMN_SIZE</code>参数以禁止扩展。有关更多详细信息，请参阅<a href="database-gateway-drda-initialization-parameters.html#GUID-D5965054-49C8-4D6A-91C3-C33BA2477434">初始化参数</a> 。
                     </p>
                  </div>
               </div><a id="DRDAG1251"></a><div class="props_rev_3"><a id="GUID-4401E8A1-0D7A-4080-B656-BD7E11465D50" name="GUID-4401E8A1-0D7A-4080-B656-BD7E11465D50"></a><h4 id="DRDAG-GUID-4401E8A1-0D7A-4080-B656-BD7E11465D50" class="sect4">IPv6支持</h4>
                  <div>
                     <p>除了Oracle数据库和网关之间的完全IPv6支持外，此网关和UDB数据库之间也支持IPv6。有关更多详细信息，请参阅<a href="database-gateway-drda-initialization-parameters.html#GUID-D5965054-49C8-4D6A-91C3-C33BA2477434">初始化参数中</a>的<code class="codeph">HS_FDS_CONNECT_INFO</code>参数。
                     </p>
                  </div>
               </div><a id="DRDAG1252"></a><div class="props_rev_3"><a id="GUID-43B42207-A8E7-4C3C-A13F-FFA189854D18" name="GUID-43B42207-A8E7-4C3C-A13F-FFA189854D18"></a><h4 id="DRDAG-GUID-43B42207-A8E7-4C3C-A13F-FFA189854D18" class="sect4">网关会话IDLE超时</h4>
                  <div>
                     <p>您可以选择使用网关参数<code class="codeph">HS_IDLE_TIMEOUT</code>自动终止长空闲网关会话。具体来说，当网关会话空闲超过指定的时间限制时，网关会话将终止，并回滚任何挂起的更新</p>
                  </div>
               </div>
            </div><a id="DRDAG138"></a><div class="props_rev_3"><a id="GUID-0456C1B9-D99D-4D78-BD5D-C4AEB097AF58" name="GUID-0456C1B9-D99D-4D78-BD5D-C4AEB097AF58"></a><h3 id="DRDAG-GUID-0456C1B9-D99D-4D78-BD5D-C4AEB097AF58" class="sect3">处理数据库链接</h3>
               <div>
                  <p>分布式数据库系统的数据库和应用程序管理员负责管理定义Oracle数据库网关DRDA路径的数据库链接。任务如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="using-database-gateway-drda.html#GUID-63BC573D-B0A9-4225-879B-D1D889F8E9A2">创建数据库链接</a></p>
                     </li>
                     <li>
                        <p><a href="using-database-gateway-drda.html#GUID-C53FA2C5-693F-4370-99F4-AABF931B6ECE">删除数据库链接</a></p>
                     </li>
                     <li>
                        <p><a href="using-database-gateway-drda.html#GUID-69B44DAD-E1B7-4D7D-9ECA-6E10621C7403">检查可用的数据库链接</a></p>
                     </li>
                     <li>
                        <p><a href="using-database-gateway-drda.html#GUID-CD8C4BE6-4F3A-4A76-8642-03E606B9C9F7">限制活动数据库链接的数量</a></p>
                     </li>
                  </ul>
               </div><a id="DRDAG1253"></a><a id="DRDAG139"></a><div class="props_rev_3"><a id="GUID-63BC573D-B0A9-4225-879B-D1D889F8E9A2" name="GUID-63BC573D-B0A9-4225-879B-D1D889F8E9A2"></a><h4 id="DRDAG-GUID-63BC573D-B0A9-4225-879B-D1D889F8E9A2" class="sect4">创建数据库链接</h4>
                  <div>
                     <div class="section">
                        <p>创建数据库链接并定义路径<a id="d4497e345" class="indexterm-anchor"></a>远程数据库，使用<a id="d4497e352" class="indexterm-anchor"></a><a id="d4497e356" class="indexterm-anchor"></a> <code class="codeph">CREATE</code> <code class="codeph">DATABASE LINK</code>语句。该<a id="d4497e364" class="indexterm-anchor"></a><a id="d4497e368" class="indexterm-anchor"></a> <code class="codeph">CONNECT TO</code>子句指定了<a id="d4497e374" class="indexterm-anchor"></a>在远程数据库中创建会话时使用的远程用户标识和密码。该<a id="d4497e379" class="indexterm-anchor"></a><a id="d4497e383" class="indexterm-anchor"></a> <code class="codeph">USING</code>子句指向a <a id="d4497e388" class="indexterm-anchor"></a> tnsnames.ora连接描述符。
                        </p>
                        <div class="infoboxnote" id="GUID-63BC573D-B0A9-4225-879B-D1D889F8E9A2__GUID-11E15628-4EE8-4778-855A-34AC1F73C9D7">
                           <p class="notep1">注意：</p>
                           <p>如果未在<code class="codeph">CONNECT TO</code>子句中指定用户标识和密码，则使用Oracle数据库用户标识和密码。
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-63BC573D-B0A9-4225-879B-D1D889F8E9A2__GUID-178E14A9-265C-45DA-B27C-0BEC0A3481C7">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="../otgis/drda-gateway-security-consideration.html#OTGIS150" target="_blank"><span class="italic">有关POWER系统（64位）上的IBM AIX的Oracle Database Gateway安装和配置指南，Linux x86-64，SPARC上的Oracle Solaris（64位），x86-64上的Oracle Solaris，</span></a>请参阅第15章“安全注意事项”。有关详细信息，请参阅<a href="../otgis/drda-gateway-security-consideration.html#OTGIS150" target="_blank"><span class="italic">（64位）和</span></a> <a href="../otgiw/security-consideration-drda-gateway.html#OTGIW150" target="_blank"><span class="italic">适用于Microsoft Windows的</span></a> <a href="../otgis/drda-gateway-security-consideration.html#OTGIS150" target="_blank"><span class="italic">HP-UX Itanium</span></a>或<a href="../otgiw/security-consideration-drda-gateway.html#OTGIW150" target="_blank"><span class="italic">Oracle Database Gateway安装和配置指南</span></a> 。
                           </p>
                        </div>
                        <p>以下示例创建一个数据库链接以访问DRDA服务器中的信息：</p><pre class="oac_no_warn" dir="ltr">创建公共数据库链接<span class="italic">dblink通过</span> <span class="italic">密码</span>使用' <span class="italic">tns_name_entry</span> '连接到<span class="italic">用户ID</span> IDENTIFIED BY;</pre><p>哪里：</p>
                        <p><code class="codeph">dblink</code>是完整的数据库链接名称。
                        </p>
                        <p><code class="codeph">user id</code>是用于在中建立会话的用户ID <a id="d4497e438" class="indexterm-anchor"></a>远程数据库。此用户标识必须是有效的DRDA服务器用户标识。必须授权它访问SQL命令中引用的DRDA服务器上的任何表或文件。用户ID的长度限制取决于DRDA服务器使用的授权系统。在许多情况下，此限制为八个字符，但在其他情况下，可能会更长。有关限制，请参阅DB2平台文档。
                        </p>
                        <p><code class="codeph">password</code>是用于在远程数据库中建立会话的密码。此密码必须是有效的DRDA服务器密码。密码的长度限制取决于DRDA服务器使用的授权系统。在许多情况下，此限制为八个字符，但在其他情况下，可能会更长。有关限制，请参阅DB2平台文档。
                        </p>
                        <p><a id="d4497e450" class="indexterm-anchor"></a> <code class="codeph">tns_name_entry</code>指定用于标识网关的Oracle Net连接描述符。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-63BC573D-B0A9-4225-879B-D1D889F8E9A2__GUID-FF79E640-E9F1-4B6C-A267-8C40BFFB0FA1">数据库链接指南</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>数据库链接在网关会话期间处于活动状态。如果要在会话期间关闭数据库链接，请使用<a id="d4497e463" class="indexterm-anchor"></a> <code class="codeph">ALTER SESSION CLOSE DATABASE LINK</code> <span class="italic"><code class="codeph">dblink</code></span>语句。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DRDAG140"></a><div class="props_rev_3"><a id="GUID-C53FA2C5-693F-4370-99F4-AABF931B6ECE" name="GUID-C53FA2C5-693F-4370-99F4-AABF931B6ECE"></a><h4 id="DRDAG-GUID-C53FA2C5-693F-4370-99F4-AABF931B6ECE" class="sect4">删除数据库链接</h4>
                  <div>
                     <div class="section">
                        <p>您可以删除数据库链接<a id="d4497e503" class="indexterm-anchor"></a><a id="d4497e507" class="indexterm-anchor"></a> <code class="codeph">DROP DATABASE LINK</code>语句。例如，要删除名为<code class="codeph">DBLINK,</code>的公共数据库链接<code class="codeph">DBLINK,</code>使用以下语句：</p><pre class="oac_no_warn" dir="ltr">DROP PUBLIC DATABASE LINK dblink;</pre><div class="infoboxnote" id="GUID-C53FA2C5-693F-4370-99F4-AABF931B6ECE__GUID-9C393E3E-76DB-4F23-BE8C-EEDE64306536">
                           <p class="notep1">注意：</p>
                           <p>如果需要解析不确定的分布式事务，则不应删除数据库链接。有关删除数据库链接的其他信息，请参阅“ <span class="italic">Oracle数据库管理员指南”</span> 。
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-C53FA2C5-693F-4370-99F4-AABF931B6ECE__GUID-F1AFF97F-B2CA-4C7E-BE38-E63CC7AA4E99">
                           <p class="notep1">也可以看看：</p>
                           <p>有关删除数据库链接的其他信息，请<a href="../sqlrf/DROP-DATABASE-LINK.html#SQLRF01514" target="_blank"><span class="italic">参见“Oracle数据库SQL语言</span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DRDAG141"></a><div class="props_rev_3"><a id="GUID-69B44DAD-E1B7-4D7D-9ECA-6E10621C7403" name="GUID-69B44DAD-E1B7-4D7D-9ECA-6E10621C7403"></a><h4 id="DRDAG-GUID-69B44DAD-E1B7-4D7D-9ECA-6E10621C7403" class="sect4">检查可用的数据库链接</h4>
                  <div>
                     <div class="section">
                        <p>每个数据库的数据字典存储该数据库中所有数据库链接的定义。该<a id="d4497e562" class="indexterm-anchor"></a><a id="d4497e568" class="indexterm-anchor"></a> <code class="codeph">USER_DB_LINKS</code>数据字典视图显示了私有定义的数据库链接，即当前Oracle用户可访问的数据库链接。该<a id="d4497e573" class="indexterm-anchor"></a><a id="d4497e579" class="indexterm-anchor"></a> <code class="codeph">ALL_DB_LINKS</code>数据字典视图显示所有可访问（公共和私有）数据库链接。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="DRDAG142"></a><div class="props_rev_3"><a id="GUID-CD8C4BE6-4F3A-4A76-8642-03E606B9C9F7" name="GUID-CD8C4BE6-4F3A-4A76-8642-03E606B9C9F7"></a><h4 id="DRDAG-GUID-CD8C4BE6-4F3A-4A76-8642-03E606B9C9F7" class="sect4">限制活动数据库链接的数量</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用以下命令限制从用户进程到远程数据库的连接数<a id="d4497e615" class="indexterm-anchor"></a><a id="d4497e617" class="indexterm-anchor"></a>参数<code class="codeph">OPEN_LINKS</code> 。此参数控制的数量<a id="d4497e625" class="indexterm-anchor"></a>任何单个用户进程可以与单个SQL语句同时使用的远程连接。有关限制活动数据库链接数的其他信息，请参阅“ <a href="../admin/distributed-database-concepts.html#ADMIN12083" target="_blank"><span class="italic">Oracle数据库管理员指南”</span></a> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="DRDAG1254"></a><a id="DRDAG1255"></a><a id="DRDAG1256"></a><a id="DRDAG143"></a><div class="props_rev_3"><a id="GUID-AA0A394C-8E8B-4ECD-8C29-A8763EAC0C0A" name="GUID-AA0A394C-8E8B-4ECD-8C29-A8763EAC0C0A"></a><h3 id="DRDAG-GUID-AA0A394C-8E8B-4ECD-8C29-A8763EAC0C0A" class="sect3">访问网关</h3>
               <div>
                  <div class="section">
                     <p>访问<a id="d4497e676" class="indexterm-anchor"></a>网关，完成以下步骤<a id="d4497e681" class="indexterm-anchor"></a> Oracle数据库：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span><a href="using-database-gateway-drda.html#GUID-AA0A394C-8E8B-4ECD-8C29-A8763EAC0C0A__BABJBIAA">例3-1</a></span><br></li>
                     <li><span><a href="using-database-gateway-drda.html#GUID-AA0A394C-8E8B-4ECD-8C29-A8763EAC0C0A__BABGGIJG">例3-2</a></span><br></li>
                     <li><span><a href="using-database-gateway-drda.html#GUID-AA0A394C-8E8B-4ECD-8C29-A8763EAC0C0A__BABEFGEE">例3-3</a></span><br></li>
                  </ol>
                  <div class="example" id="GUID-AA0A394C-8E8B-4ECD-8C29-A8763EAC0C0A__BABJBIAA">
                     <p class="titleinexample">示例3-1登录Oracle数据库</p>
                     <p>登录Oracle数据库以访问网关</p>
                  </div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-AA0A394C-8E8B-4ECD-8C29-A8763EAC0C0A__BABGGIJG">
                     <p class="titleinexample">示例3-2创建指向DRDA数据库的数据库链接</p>
                     <p>例如，使用：</p><pre class="oac_no_warn" dir="ltr">使用' <span class="italic">tns_name_entry</span> '创建公共数据库链接DRDA连接到由<span class="italic">oracle_pw</span>识别的<span class="italic">ORADRDA</span></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-AA0A394C-8E8B-4ECD-8C29-A8763EAC0C0A__BABEFGEE">
                     <p class="titleinexample">示例3-3从DRDA数据库中检索数据</p>
                     <p>此查询使用名称<code class="codeph">ORADRDA</code>作为DRDA服务器用户配置文件来获取模式<code class="codeph">SECURE</code>的<code class="codeph">TABLE</code>表。<code class="codeph">ORADRDA</code>用户配置文件必须在DRDA服务器上具有相应的权限才能访问<code class="codeph">SECURE.TABLE</code>文件：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM SECURE.TABLE@DRDA</pre><p>以下是在显示权限不足时显示的错误消息的示例：</p><pre class="oac_no_warn" dir="ltr">ORA-28500：从ORACLE到非Oracle系统的连接返回了以下消息：[Oracle] [ODBC DB2 Wire Protocol驱动程序] [UDB DB2 for Windows，UNIX和Linux] ORADRDA没有特权执行此对象的操作选择SECURE.TABLE。 ORA-02063：DRDA前两行</pre></div>
                  <!-- class="example" -->
               </div>
            </div><a id="DRDAG144"></a><div class="props_rev_3"><a id="GUID-E716BE71-7D67-4AA4-8C5E-B8843733B388" name="GUID-E716BE71-7D67-4AA4-8C5E-B8843733B388"></a><h3 id="DRDAG-GUID-E716BE71-7D67-4AA4-8C5E-B8843733B388" class="sect3">访问i5 / OS文件成员</h3>
               <div>
                  <div class="section">
                     <p>进入<a id="d4497e769" class="indexterm-anchor"></a> i5 / OS文件和文件成员不是由DRDA或网关专门控制的。但是，DB2 UDB for iSeries使用的命名约定暗示了<a id="d4497e774" class="indexterm-anchor"></a>文件成员名称与要寻址的文件的名称相同。例如，访问<code class="codeph">schema.table</code>意味着table是文件名，并且该表是要访问的文件成员名称。
                     </p>
                     <p>要访问名称与关联文件名不同的文件成员，必须在文件中创建一个视图，以便DB2 UDB for iSeries可以引用正确的文件成员。</p>
                     <p>创建此视图的一种方法是发出i5 / OS命令<code class="codeph">Create Logical File</code> （ <code class="codeph">CRTLF</code> ）。此操作会在文件名和文件成员名之间创建逻辑关联。
                     </p>
                     <div class="infoboxnotealso" id="GUID-E716BE71-7D67-4AA4-8C5E-B8843733B388__GUID-3FFCF680-E2DB-47EA-B321-F5B23C6A9C5B">
                        <p class="notep1">也可以看看：</p>
                        <p>有关其他信息，请参阅i5 / OS命令语言（CL）文档或DB2 UDB for iSeries SQL参考文档。</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="DRDAG145"></a><div class="props_rev_3"><a id="GUID-ABF1C711-C195-4E65-AB3B-199CB484FB21" name="GUID-ABF1C711-C195-4E65-AB3B-199CB484FB21"></a><h3 id="DRDAG-GUID-ABF1C711-C195-4E65-AB3B-199CB484FB21" class="sect3">使用同义词功能</h3>
               <div>
                  <div class="section">
                     <p>您可以使用Oracle数据库的同义词功能提供完整的数据，位置和网络透明度。当定义同义词时，用户不需要知道基础表或网络<a id="d4497e824" class="indexterm-anchor"></a>正在使用的协议。同义词可以是公共的，这意味着它可供所有Oracle用户使用。同义词也可以定义为私有，仅对创建它的用户可用。有关同义词功能的详细信息，请参阅<a href="../refrn/index.html" target="_blank"><span class="italic">Oracle数据库参考</span></a> 。
                     </p>
                     <p>以下语句为DRDA服务器中的<code class="codeph">EMP</code>文件创建系统范围的同义词，其所有权为<code class="codeph">ORACLE</code> ：</p><pre class="oac_no_warn" dir="ltr">创建公共同义词<a id="d4497e844" class="indexterm-anchor"></a> EMP FOR ORACLE.EMP@DRDA</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="DRDAG146"></a><div class="props_rev_3"><a id="GUID-DB4B2396-1F94-4C1E-B47D-D312EEAF4BB2" name="GUID-DB4B2396-1F94-4C1E-B47D-D312EEAF4BB2"></a><h3 id="DRDAG-GUID-DB4B2396-1F94-4C1E-B47D-D312EEAF4BB2" class="sect3">执行分布式查询</h3>
               <div>
                  <div class="section">
                     <p>Oracle数据库网关技术支持执行分布式查询，这些分布式查询连接Oracle数据库和DRDA服务器中的数据，以及来自Oracle提供的任何其他数据存储的数据。 <a id="d4497e877" class="indexterm-anchor"></a>网关。这些复杂的操作对于请求数据的用户可以是完全透明的。
                     </p>
                     <p>以下示例在Oracle数据库，DB2 UDB for z / OS和DRDA服务器之间连接数据：</p><pre class="oac_no_warn" dir="ltr">SELECT o.custname，p.projno，e.ename，sum（e.rate * p.hours）FROM orders @ DB2 o，EMP @ ORACLE7 e，projects @ DRDA p WHERE o.projno = p.projno AND p.empno = e.empno GROUP BY o.custname，p.projno，e.ename</pre><p>视图和同义词的组合使用以下SQL语句，使分布式查询的过程对用户透明：</p><pre class="oac_no_warn" dir="ltr">为订单创建SYNONYM订单@ DB2;为PROJECTS @ DRDA创建SYNONYM项目;创建视图详细信息（custname，projno，ename，花费）AS SELECT o.custname，p.projno，e.ename，sum（e.rate * p.hours）FROM orders o，EMP e，projects p WHERE o.projno = p.projno AND p.empno = e.empno GROUP BY o.custname，p.projno，e.ename</pre><p>以下SQL语句在一个命令中从这三个数据存储中检索信息：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM DETAILS;</pre><p>该命令的结果是：</p><pre class="oac_no_warn" dir="ltr">CUSTNAME PROJNO ENAME SPEND --------- --------- --------- --------- ABC Co.1 Jones 400 ABC Co.1 Smith 180 XYZ Inc.2 Jones 400 XYZ Inc.2史密斯180</pre></div>
                  <!-- class="section" -->
               </div><a id="DRDAG147"></a><div class="props_rev_3"><a id="GUID-7EF0BD28-0AB6-4087-9562-E0BE00D40522" name="GUID-7EF0BD28-0AB6-4087-9562-E0BE00D40522"></a><h4 id="DRDAG-GUID-7EF0BD28-0AB6-4087-9562-E0BE00D40522" class="sect4">两阶段提交处理</h4>
                  <div>
                     <p>要完全参与两阶段提交事务，服务器必须支持<a id="d4497e932" class="indexterm-anchor"></a><a id="d4497e936" class="indexterm-anchor"></a> <code class="codeph">PREPARE TRANSACTION</code>语句。<code class="codeph">PREPARE TRANSACTION</code>语句确保所有参与的数据库都准备好<code class="codeph">COMMIT</code>或<code class="codeph">ROLLBACK</code>特定的工作单元。
                     </p>
                     <p>Oracle数据库支持<code class="codeph">PREPARE TRANSACTION</code>语句。任意数量的Oracle数据库都可以参与分布式两阶段提交事务。当应用程序显式发出<code class="codeph">COMMIT</code>时，或者在应用程序的正常结束时隐式执行<code class="codeph">PREPARE TRANSACTION</code>语句。
                     </p>
                     <p>网关不支持<a id="d4497e963" class="indexterm-anchor"></a> <code class="codeph">PREPARE TRANSACTION</code>语句。这限制了<a id="d4497e971" class="indexterm-anchor"></a>网关参与分布式事务时的两阶段提交协议。网关成为分布式事务的提交焦点站点。网关配置为commit / confirm，因此无论提交点强度设置如何，它始终是提交点站点。在验证事务中的所有Oracle数据库是否已成功提交其工作后，网关将提交工作单元。网关必须协调分布式事务，以便只有一个网关实例可以参与两阶段提交事务。
                     </p>
                     <p>两阶段提交事务记录在<code class="codeph">HS_TRANSACTION_LOG</code>表中（请参阅初始化参数<code class="codeph">HS_FDS_TRANSACTION_LOG</code> ），该表在安装期间创建。这个表是在创建的时候创建的<a id="d4497e984" class="indexterm-anchor"></a> <code class="codeph">o2pc.sql</code>脚本运行。该表的所有者也拥有该包。<a href="../otgis/config-drda-server.html#OTGIS130" target="_blank"><span class="italic">有关POWER系统（64位）上的IBM AIX的Oracle Database Gateway安装和配置指南，Linux x86-64，SPARC上的Oracle Solaris（64位），x86-64上的Oracle Solaris，</span></a>请参阅“DRDA网关程序包绑定注意事项”。 <a href="../otgiw/config-drda-server.html#OTGIW130" target="_blank"><span class="italic">适用于Microsoft Windows的</span></a> <a href="../otgis/config-drda-server.html#OTGIS130" target="_blank"><span class="italic">（64位）和HP-UX Itanium</span></a>或<a href="../otgiw/config-drda-server.html#OTGIW130" target="_blank"><span class="italic">Oracle Database Gateway安装和配置指南</span></a> ，具体取决于您的平台，以获取更多信息。
                     </p>
                  </div>
               </div><a id="DRDAG148"></a><div class="props_rev_3"><a id="GUID-D2D11F31-C45D-42B1-B7A6-CA7F3DFB2D17" name="GUID-D2D11F31-C45D-42B1-B7A6-CA7F3DFB2D17"></a><h4 id="DRDAG-GUID-D2D11F31-C45D-42B1-B7A6-CA7F3DFB2D17" class="sect4">分布式DRDA交易</h4>
                  <div>
                     <p><a id="d4497e1022" class="indexterm-anchor"></a>由于<code class="codeph">HS_TRANSACTION_LOG</code>表用于记录网关事务的状态，因此该表必须位于进行DRDA更新的数据库中。因此，通过网关进行的所有更新必须是IBM数据库的本地更新。
                     </p>
                     <div class="infoboxnote" id="GUID-D2D11F31-C45D-42B1-B7A6-CA7F3DFB2D17__GUID-9BBC2ED8-6C0A-4E98-BD6F-3778C274376A">
                        <p class="notep1">注意：</p>
                        <p></p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">HS_TRANSACTION_LOG</code>表的更新不能是IBM分布式事务的一部分。
                              </p>
                           </li>
                           <li>
                              <p>OS400 V5R1及更高版本上的默认提交模式为<code class="codeph">READ UNCOMMITTED (*CHG)</code> ，这需要记录文件。因此，必须记录<code class="codeph">HS_TRANSACTION_LOG</code>初始化参数指定的对象。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <p>有关两阶段提交过程的其他信息，请参阅“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/drdag&amp;id=HETER4068" target="_blank"><span class="italic">Oracle数据库异构连接用户指南”</span></a> 。
                     </p>
                  </div>
               </div>
            </div><a id="DRDAG1257"></a><a id="DRDAG1258"></a><a id="DRDAG150"></a><div class="props_rev_3"><a id="GUID-3C8C4F0C-49AF-4587-BA69-A1E154EB55C5" name="GUID-3C8C4F0C-49AF-4587-BA69-A1E154EB55C5"></a><h3 id="DRDAG-GUID-3C8C4F0C-49AF-4587-BA69-A1E154EB55C5" class="sect3">在异构环境中复制</h3>
               <div>
                  <div class="section">
                     <p>适用于DRDA的Oracle数据库网关提供了许多功能<a id="d4497e1096" class="indexterm-anchor"></a>在整个企业中复制Oracle和非Oracle数据的选项。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-3C8C4F0C-49AF-4587-BA69-A1E154EB55C5__GUID-CA783B3F-DDBB-413B-818E-796DCECAA5BB">Oracle数据库触发器</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>对Oracle数据库进行更新时，可以使用自动维护Oracle和非Oracle数据的同步副本<a id="d4497e1107" class="indexterm-anchor"></a><a id="d4497e1111" class="indexterm-anchor"></a> Oracle数据库触发器。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-3C8C4F0C-49AF-4587-BA69-A1E154EB55C5__GUID-438CDF91-8165-4A8A-B566-49CA242E7063">Oracle快照</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>适用于DRDA的Oracle Database Gateway可以使用Oracle快照功能自动将非Oracle数据复制到Oracle数据库中。Oracle的完整刷新功能<a id="d4497e1120" class="indexterm-anchor"></a> snapshot可用于以用户定义的时间间隔将完整副本或非Oracle数据的子集传播到Oracle数据库中。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="DRDAG151"></a><div class="props_rev_3"><a id="GUID-332D7A50-49C1-4CED-90C7-B3A821DDE165" name="GUID-332D7A50-49C1-4CED-90C7-B3A821DDE165"></a><h3 id="DRDAG-GUID-332D7A50-49C1-4CED-90C7-B3A821DDE165" class="sect3">将数据从Oracle数据库复制到DRDA服务器</h3>
               <div>
                  <div class="section">
                     <p>此Oracle SQL INSERT命令现在可以使用CALLBACK功能：</p><pre class="oac_no_warn" dir="ltr">INSERT INTO DRDA_table SELECT * FROM local_table</pre><p>或者，您可以使用sqlplus <code class="codeph">COPY</code>命令。该<a id="d4497e1167" class="indexterm-anchor"></a> <code class="codeph">COPY</code>命令<a id="d4497e1174" class="indexterm-anchor"></a>使您可以将数据从Oracle数据库复制到DRDA服务器。要将数据从Oracle数据库复制到DRDA服务器，您还可以使用：</p><pre class="oac_no_warn" dir="ltr">COPY FROM <span class="italic">username / password @ connect_identifier  -</span> INSERT <span class="italic">destination_table  -</span> USING <span class="italic">query</span> 
</pre><p>例如，要从本地Oracle中选择所有行<code class="codeph"> </code> <code class="codeph">EMP</code>表，将它们插入DRDA服务器上的<code class="codeph">EMP</code>表，并提交事务，使用：</p><pre class="oac_no_warn" dir="ltr">复制来自scott / tiger @ ORACLE  -  INSERT scott。EMP @ DRDA  - 使用SELECT *来自EMP</pre><p>该<a id="d4497e1206" class="indexterm-anchor"></a> SQL * Plus <code class="codeph">COPY</code>命令支持<a id="d4497e1214" class="indexterm-anchor"></a> <code class="codeph">APPEND</code> ， <a id="d4497e1221" class="indexterm-anchor"></a> <code class="codeph">CREATE</code> ， <a id="d4497e1229" class="indexterm-anchor"></a> <code class="codeph">INSERT</code> ，和<a id="d4497e1236" class="indexterm-anchor"></a> <code class="codeph">REPLACE</code> <a id="d4497e1241" class="indexterm-anchor"></a>命令。但是， <code class="codeph">INSERT</code>是复制到DRDA服务器时唯一支持的命令。有关的更多信息<a id="d4497e1249" class="indexterm-anchor"></a><a id="d4497e1256" class="indexterm-anchor"></a> <code class="codeph">COPY</code>命令，请参阅<a href="../sqpug/COPY.html#SQPUG601" target="_blank"><span class="italic">SQL * Plus用户指南和参考</span></a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="DRDAG152"></a><div class="props_rev_3"><a id="GUID-43ADB851-BBBF-4418-9C57-7D4E3934282F" name="GUID-43ADB851-BBBF-4418-9C57-7D4E3934282F"></a><h3 id="DRDAG-GUID-43ADB851-BBBF-4418-9C57-7D4E3934282F" class="sect3">将数据从DRDA服务器复制到Oracle数据库</h3>
               <div>
                  <div class="section">
                     <p>使用<code class="codeph">CREATE TABLE</code>命令可以将数据从DRDA服务器复制到Oracle数据库。要在Oracle数据库上创建表并从DRDA服务器表插入行，请使用：</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE <span class="italic">table_name</span> AS <span class="italic">查询</span> 
</pre><p>可以从网关中选择SQL <code class="codeph">INSERT</code>进入Oracle表，如下所示：</p><pre class="oac_no_warn" dir="ltr">INSERT INTO <span class="italic">local_table</span> SELECT * FROM <span class="italic">drda_table</span>
</pre><p>以下示例在本地Oracle数据库中创建表<code class="codeph">EMP</code> ，并从DRDA服务器上的<code class="codeph">EMP</code>表中插入行：</p><pre class="oac_no_warn" dir="ltr">创建表EMP作为SELECT *来自scott。EMP @ DRDA</pre><p>或者，您可以使用SQL * Plus <code class="codeph">COPY</code>命令将数据从DRDA服务器复制到Oracle数据库。有关<code class="codeph">COPY</code>命令的更多信息，请参阅<a href="../sqpug/COPY.html#SQPUG601" target="_blank"><span class="italic">SQL * Plus用户指南和参考</span></a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="DRDAG153"></a><div class="props_rev_3"><a id="GUID-D39B98BF-6E54-4606-88CF-4C0993CB1A14" name="GUID-D39B98BF-6E54-4606-88CF-4C0993CB1A14"></a><h3 id="DRDAG-GUID-D39B98BF-6E54-4606-88CF-4C0993CB1A14" class="sect3">跟踪SQL语句</h3>
               <div>
                  <div class="section">
                     <p><a id="d4497e1383" class="indexterm-anchor"></a>在到达DRDA数据库之前，可以更改通过网关发出的SQL语句。进行这些更改是为了使网关可以接受格式，或使Oracle SQL与DRDA服务器SQL兼容。 Oracle数据库和网关可以根据情况更改语句。
                     </p>
                     <p>由于各种原因，您可能需要评估网关是否正确更改了语句，或者是否可以重写语句以提高性能。<a id="d4497e1392" class="indexterm-anchor"></a> SQL跟踪是一项功能，允许您查看Oracle数据库或网关对SQL语句所做的更改。
                     </p>
                     <p>SQL跟踪降低了网关性能。仅在测试和使用时使用跟踪<a id="d4497e1399" class="indexterm-anchor"></a><a id="d4497e1405" class="indexterm-anchor"></a>调试应用程序。当应用程序在生产环境中运行时，请勿启用SQL跟踪。有关启用SQL跟踪的详细信息，请参阅<a href="database-gateway-drda-error-messages.html#GUID-7C0401EB-B206-4CC0-A4A6-8FB5782B57D7">错误消息_诊断_和报告中的</a> <span class="q">“ <a href="database-gateway-drda-error-messages.html#GUID-852CD270-E7F8-45AC-BB98-FCB3F2CE37AC">SQL跟踪和网关</a> ”</span>部分。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
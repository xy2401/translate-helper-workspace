<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>NTILE</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Language Reference ">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96310-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="NTH_VALUE.html" title="Previous" type="text/html">
      <link rel="next" href="NULLIF.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="SQLRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="NTH_VALUE.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="NULLIF.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Language Reference </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Functions.html" property="item" typeof="WebPage"><span property="name">Functions</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">NTILE </li>
            </ol>
            <a id="GUID-FAD7A986-AEBD-4A03-B0D2-F7F2148BA5E9" name="GUID-FAD7A986-AEBD-4A03-B0D2-F7F2148BA5E9"></a><a id="SQLRF51566"></a><a id="SQLRF51567"></a><a id="SQLRF51568"></a><a id="SQLRF00680"></a>
            
            <h2 id="SQLRF-GUID-FAD7A986-AEBD-4A03-B0D2-F7F2148BA5E9" class="sect2">NTILE </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-FAD7A986-AEBD-4A03-B0D2-F7F2148BA5E9__GUID-37CD2158-5230-410C-A000-F894E40BF4DB">Syntax</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-FAD7A986-AEBD-4A03-B0D2-F7F2148BA5E9__GUID-BA335922-72B3-478F-991F-58812AF37BFE"><img src="img/ntile.gif" alt="Description of ntile.eps follows" title="Description of ntile.eps follows" longdesc="img_text/ntile.html"><br><a href="img_text/ntile.html">Description of the illustration ntile.eps</a></div>
                  <!-- class="figure" -->
                  <div class="infoboxnotealso" id="GUID-FAD7A986-AEBD-4A03-B0D2-F7F2148BA5E9__GUID-4CC7F396-C679-4EE0-A0AC-E9EBFC36C3E2">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="Analytic-Functions.html#GUID-527832F7-63C0-4445-8C16-307FA5084056">Analytic Functions</a>"</span> for information on syntax, semantics, and restrictions, including valid forms of <span class="italic"><code class="codeph">expr</code></span></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-FAD7A986-AEBD-4A03-B0D2-F7F2148BA5E9__GUID-B79887C8-68B4-4045-A67A-350AF6659032">Purpose</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><code class="codeph">NTILE</code> is an analytic function. It divides an ordered data set into a number of buckets indicated by <span class="italic"><code class="codeph">expr</code></span> and assigns the appropriate bucket number to each row. The buckets are numbered 1 through <span class="italic"><code class="codeph">expr</code></span>. The <span class="italic"><code class="codeph">expr</code></span> value must resolve to a positive constant for each partition. Oracle Database expects an integer, and if <span class="italic"><code class="codeph">expr</code></span> is a noninteger constant, then Oracle truncates the value to an integer. The return value is <code class="codeph">NUMBER</code>.
                  </p>
                  <p>The number of rows in the buckets can differ by at most 1. The remainder values (the remainder of number of rows divided by buckets) are distributed one for each bucket, starting with bucket 1.</p>
                  <p>If <span class="italic"><code class="codeph">expr</code></span> is greater than the number of rows, then a number of buckets equal to the number of rows will be filled, and the remaining buckets will be empty.
                  </p>
                  <p>You cannot nest analytic functions by using <code class="codeph">NTILE</code> or any other analytic function for <span class="italic"><code class="codeph">expr</code></span>. However, you can use other built-in function expressions for <span class="italic"><code class="codeph">expr</code></span>.
                  </p>
                  <div class="infoboxnotealso" id="GUID-FAD7A986-AEBD-4A03-B0D2-F7F2148BA5E9__GUID-69C979B7-22CB-4CF5-81A7-777DDF8852EF">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="About-SQL-Expressions.html#GUID-68789A5C-B142-496F-ADEE-837F75F95B2B">About SQL Expressions</a>"</span> for information on valid forms of <span class="italic"><code class="codeph">expr</code></span> and <a href="Data-Type-Comparison-Rules.html#GUID-98BE3A78-6E33-4181-B5CB-D96FD9DC1694__G195937" title="This matrix lists the data types in the first column and in the header cell for each subsequent column. An X in a cell indicates implicit conversion of the data types named in the header of that column and column 1 of that row.">Table 2-8</a> for more information on implicit conversion
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-FAD7A986-AEBD-4A03-B0D2-F7F2148BA5E9__GUID-BBFB5112-A500-4133-9E5E-2CFCBE32CD02">Examples</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>The following example divides into 4 buckets the values in the <code class="codeph">salary</code> column of the <code class="codeph">oe.employees</code> table from Department 100. The <code class="codeph">salary</code> column has 6 values in this department, so the two extra values (the remainder of 6 / 4) are allocated to buckets 1 and 2, which therefore have one more value than buckets 3 or 4.
                  </p><pre class="oac_no_warn" dir="ltr">SELECT last_name, salary, NTILE(4) OVER (ORDER BY salary DESC) AS quartile
  FROM employees
  WHERE department_id = 100
  ORDER BY last_name, salary, quartile;

LAST_NAME                     SALARY   QUARTILE
------------------------- ---------- ----------
Chen                            8200          2
Faviet                          9000          1
Greenberg                      12008          1
Popp                            6900          4
Sciarra                         7700          3
Urman                           7800          2</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <title>流水线和并行表功能</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Data Cartridge Developer&#39;s Guide"></meta>
      <meta property="og:description" content=""></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Data Cartridge Developer&#39;s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="data-cartridge-developers-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-01-10T07:34:53-08:00"></meta>
      <meta name="dcterms.title" content="Data Cartridge Developer&#39;s Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96431-01"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="user-defined-aggregate-functions-interface.html" title="Previous" type="text/html"></link>
      <link rel="next" href="user-managed-local-domain-indexes.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADDCI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="user-defined-aggregate-functions-interface.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="user-managed-local-domain-indexes.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据盒式开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="reference.html" property="item" typeof="WebPage"><span property="name">参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">流水线和并行表功能</li>
            </ol>
            <a id="GUID-FA3B69A8-3DFC-43F1-8435-F1BC8874B687" name="GUID-FA3B69A8-3DFC-43F1-8435-F1BC8874B687"></a><a id="ADDCI4230"></a>
            
            <h2 id="ADDCI-GUID-FA3B69A8-3DFC-43F1-8435-F1BC8874B687" class="sect2"><span class="enumeration_chapter">23</span>流水线和并行表功能</h2>
         </header>
         <div class="ind">
            <div>
               <p>必须实现这些例程以在C中定义流水线和并行表函数。</p>
               <div class="infoboxnotealso" id="GUID-FA3B69A8-3DFC-43F1-8435-F1BC8874B687__GUID-B3EAD8B6-9B38-4959-BCE0-9BACF7B4CBE2">
                  <p class="notep1">也可以看看：</p>
                  <p><a href="using-pipelined-and-parallel-table-functions.html#GUID-EFB94CFB-3E44-4236-B490-ADBB480C94D4">使用流水线和并行表函数</a>来全面解释流水线和并行表函数</p>
               </div>
            </div><a id="ADDCI5142"></a><a id="ADDCI5141"></a><div class="props_rev_3"><a id="GUID-F0506E99-9509-4E2B-B552-1F53AF427D0A" name="GUID-F0506E99-9509-4E2B-B552-1F53AF427D0A"></a><h3 id="ADDCI-GUID-F0506E99-9509-4E2B-B552-1F53AF427D0A" class="sect3"><span class="enumeration_section">23.1</span> C中流水线和并行表函数的例程</h3>
               <div>
                  <div class="section">
                     <p>以下C方法，总结在支持并行和流水线表函数中。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-F0506E99-9509-4E2B-B552-1F53AF427D0A__GUID-64C791CB-CF3E-493E-B05D-3C05E881BFC4">
                     <p class="titleintable">表23-1 C的流水线和并行表函数摘要</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="C的流水线和并行表函数摘要" width="100%" border="1" summary="First column gives the name and references of the function, while the second column is a brief description." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="35%" id="d82686e126">功能</th>
                              <th align="left" valign="bottom" width="65%" id="d82686e129">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d82686e134" headers="d82686e126 ">
                                 <p><a href="pipelined-and-parallel-table-functions.html#GUID-9814FCDE-05BE-4F25-9861-FDC640F43E5C">ODCITableClose（）</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d82686e134 d82686e129 ">
                                 <p>扫描表函数后执行清理操作。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d82686e143" headers="d82686e126 ">
                                 <p><a href="pipelined-and-parallel-table-functions.html#GUID-C45BF680-3EBE-4E53-8A08-193ED22F61C8">ODCITableDescribe（）</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d82686e143 d82686e129 ">
                                 <p>返回描述返回类型为<code class="codeph">ANYDATASET</code>的表函数的信息。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d82686e155" headers="d82686e126 ">
                                 <p><a href="pipelined-and-parallel-table-functions.html#GUID-54F5311D-8708-44AB-85A9-9CFE3EE79C76">ODCITableFetch（）</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d82686e155 d82686e129 ">
                                 <p>从表函数返回下一批行。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d82686e164" headers="d82686e126 ">
                                 <p><a href="pipelined-and-parallel-table-functions.html#GUID-6022AD7F-BDE5-4D42-B8F9-D2B18AB6AD84">ODCITablePrepare（）</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d82686e164 d82686e129 ">
                                 <p>在编译时准备扫描上下文和其他查询信息。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="35%" id="d82686e173" headers="d82686e126 ">
                                 <p><a href="pipelined-and-parallel-table-functions.html#GUID-7C674A4F-7145-480E-883D-00C609B64DA0">ODCITableStart（）</a></p>
                              </td>
                              <td align="left" valign="top" width="65%" headers="d82686e173 d82686e129 ">
                                 <p>初始化表函数的扫描。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ADDCI5144"></a><a id="ADDCI5145"></a><a id="ADDCI5146"></a><a id="ADDCI5143"></a><div class="props_rev_3"><a id="GUID-9814FCDE-05BE-4F25-9861-FDC640F43E5C" name="GUID-9814FCDE-05BE-4F25-9861-FDC640F43E5C"></a><h4 id="ADDCI-GUID-9814FCDE-05BE-4F25-9861-FDC640F43E5C" class="sect4"><span class="enumeration_section">23.1.1</span> ODCITableClose（）</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">ODCITableClose</code>在扫描表函数后执行清理操作。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9814FCDE-05BE-4F25-9861-FDC640F43E5C__GUID-EADD2DA7-F2E7-427D-803C-ECB4A9DB4BCD">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">成员函数ODCITableClose（自我IN &lt;imptype&gt;）返回数字;</pre></div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-9814FCDE-05BE-4F25-9861-FDC640F43E5C__GUID-A384EEC0-B291-4655-9AE2-7818C03FE4B5">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="15%" id="d82686e258">参数</th>
                                 <th align="left" valign="bottom" width="11%" id="d82686e261">进出</th>
                                 <th align="left" valign="bottom" width="74%" id="d82686e264">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d82686e269" headers="d82686e258 "><pre class="oac_no_warn" dir="ltr">自</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d82686e269 d82686e261 "><pre class="oac_no_warn" dir="ltr">在</pre></td>
                                 <td align="left" valign="top" width="74%" headers="d82686e269 d82686e264 ">
                                    <p>扫描上下文由先前的扫描例程调用设置</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9814FCDE-05BE-4F25-9861-FDC640F43E5C__GUID-3AA05C42-2FE5-49E6-9420-6940B6AB37B0">返回</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">ODCIConst。Success</code>的成功， <code class="codeph">ODCIConst.否则会Error</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-9814FCDE-05BE-4F25-9861-FDC640F43E5C__GUID-D14206EB-7316-49F5-92D5-BE87CEDD8F82">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>Oracle在最后一次提取调用后调用<code class="codeph">ODCITableClose</code> 。扫描上下文作为参数传入。然后<code class="codeph">ODCITableClose</code>执行任何必要的清理操作，例如释放内存。
                              </p>
                           </li>
                           <li>
                              <p>如果实现了ODCITablePrepare，则该例程仅在查询执行结束时调用一次，而不是每次表函数退出时调用。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADDCI5148"></a><a id="ADDCI5149"></a><a id="ADDCI5150"></a><a id="ADDCI5147"></a><div class="props_rev_3"><a id="GUID-C45BF680-3EBE-4E53-8A08-193ED22F61C8" name="GUID-C45BF680-3EBE-4E53-8A08-193ED22F61C8"></a><h4 id="ADDCI-GUID-C45BF680-3EBE-4E53-8A08-193ED22F61C8" class="sect4"><span class="enumeration_section">23.1.2</span> ODCITableDescribe（）</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">ODCITableDescribe</code>返回返回类型为<code class="codeph">ANYDATASET</code>的表函数的描述信息。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C45BF680-3EBE-4E53-8A08-193ED22F61C8__GUID-6626EE24-1686-432C-BA93-079A9A823AEA">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">静态功能ODCITableDescribe（rtype OUT ANYTYPE，&lt;args&gt;）返回号码;</pre></div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-C45BF680-3EBE-4E53-8A08-193ED22F61C8__GUID-83062C67-DAEA-457D-9EC3-F53A8B85BF6A">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="15%" id="d82686e386">参数</th>
                                 <th align="left" valign="bottom" width="11%" id="d82686e389">进出</th>
                                 <th align="left" valign="bottom" width="74%" id="d82686e392">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d82686e397" headers="d82686e386 "><pre class="oac_no_warn" dir="ltr">舍入类型</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d82686e397 d82686e389 "><pre class="oac_no_warn" dir="ltr">OUT</pre></td>
                                 <td align="left" valign="top" width="74%" headers="d82686e397 d82686e392 ">
                                    <p><code class="codeph">AnyType</code>值，用于描述表函数中返回的行</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d82686e410" headers="d82686e386 "><pre class="oac_no_warn" dir="ltr">ARGS</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d82686e410 d82686e389 "><pre class="oac_no_warn" dir="ltr">在</pre></td>
                                 <td align="left" valign="top" width="74%" headers="d82686e410 d82686e392 ">
                                    <p>表函数的零个或多个用户指定参数的集合。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C45BF680-3EBE-4E53-8A08-193ED22F61C8__GUID-619F0DFE-BE2E-4D03-A183-B1BCB3490C37">返回</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">ODCIConst。Success</code>的成功， <code class="codeph">ODCIConst.否则会Error</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-C45BF680-3EBE-4E53-8A08-193ED22F61C8__GUID-A6711166-9659-4811-877A-F7E389BE40C9">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果实现了可选的例程<code class="codeph">ODCITableDescribe</code> ，Oracle会在查询编译时调用它来检索特定的类型信息。
                              </p>
                           </li>
                           <li>
                              <p>此接口仅适用于返回类型为<code class="codeph">ANYDATASET</code>表函数。返回集合中元素的格式通过返回<code class="codeph">ANYTYPE</code>实例传递给Oracle。 <code class="codeph">ANYTYPE</code>实例指定特定查询的返回行的实际结构。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ANYTYPE</code>提供了一种数据类型来模拟行的元数据：包含该行的所有列（字段）的名称和数据类型。它还为用户提供了一组PL / SQL和C接口，用于构建和访问元数据信息。<code class="codeph">ANYDATASET</code>一样， <code class="codeph">ANYTYPE</code>包含给定类型的描述，但<code class="codeph">ANYDATASET</code>也包含一组该类型的数据实例</p>
                           </li>
                           <li>
                              <p>以下示例显示了对使用<code class="codeph">ANYDATASET</code>类型的表函数的查询：</p><pre class="oac_no_warn" dir="ltr">SELECT * FROM TABLE（CAST（AnyBooks（'http：//.../books.xml'）AS ANYDATASET））;</pre><p>在查询编译时，Oracle调用<code class="codeph">ODCITableDescribe</code>例程。该例程通常使用用户参数来确定返回行的性质。在此示例中， <code class="codeph">ODCITableDescribe</code>查询指定位置的XML文档的DTD，以确定要返回的相应<code class="codeph">ANYTYPE</code>值。通过使用此字段名称和数据类型信息调用构造函数API来构造每个<code class="codeph">ANYTYPE</code>实例。
                              </p>
                           </li>
                           <li>
                              <p>表函数的非常量的任何参数都作为<code class="codeph">NULL</code>传递给<code class="codeph">ODCITableDescribe</code> ，因为它们的值在编译时是未知的。
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-C45BF680-3EBE-4E53-8A08-193ED22F61C8__GUID-D6CA7A21-242B-445A-9264-1B99D4D519EE">
                           <p class="notep1">也可以看看：</p>
                           <p><a href="using-pipelined-and-parallel-table-functions.html#GUID-7008AB9F-4C2B-4896-AF2D-1AB39910C9A0">瞬态和通用类型，</a>用于讨论<code class="codeph">ANYTYPE</code> ， <code class="codeph">ANYDATA</code>和<code class="codeph">ANYDATASET</code></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADDCI5152"></a><a id="ADDCI5153"></a><a id="ADDCI5154"></a><a id="ADDCI5151"></a><div class="props_rev_3"><a id="GUID-54F5311D-8708-44AB-85A9-9CFE3EE79C76" name="GUID-54F5311D-8708-44AB-85A9-9CFE3EE79C76"></a><h4 id="ADDCI-GUID-54F5311D-8708-44AB-85A9-9CFE3EE79C76" class="sect4"><span class="enumeration_section">23.1.3</span> ODCITableFetch（）</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">ODCITableFetch</code>从表函数返回下一批行。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-54F5311D-8708-44AB-85A9-9CFE3EE79C76__GUID-C56381A3-DFF5-465D-9197-979823138B00">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">成员函数ODCITableFetch（自IN OUT &lt;imptype&gt;，nrows IN NUMBER，rws OUT &lt;coll-type&gt;）返回数字;</pre></div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-54F5311D-8708-44AB-85A9-9CFE3EE79C76__GUID-C5715CAB-ED08-428D-9583-DA756F5FFE56">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="15%" id="d82686e590">参数</th>
                                 <th align="left" valign="bottom" width="11%" id="d82686e593">进出</th>
                                 <th align="left" valign="bottom" width="74%" id="d82686e596">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d82686e601" headers="d82686e590 "><pre class="oac_no_warn" dir="ltr">自</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d82686e601 d82686e593 "><pre class="oac_no_warn" dir="ltr">进出</pre></td>
                                 <td align="left" valign="top" width="74%" headers="d82686e601 d82686e596 ">
                                    <p>入站是由先前扫描例程调用设置的扫描上下文; outbound是要传递给以后扫描例程调用的扫描上下文。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d82686e611" headers="d82686e590 "><pre class="oac_no_warn" dir="ltr">NROWS</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d82686e611 d82686e593 "><pre class="oac_no_warn" dir="ltr">在</pre></td>
                                 <td align="left" valign="top" width="74%" headers="d82686e611 d82686e596 ">
                                    <p>系统在当前提取周期中期望的行数。该方法可以忽略此值并返回不同数量的行。如果返回的行数较少，则再次调用该方法;如果返回更多行，则在下一个循环中处理它们。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d82686e621" headers="d82686e590 "><pre class="oac_no_warn" dir="ltr">RWS</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d82686e621 d82686e593 "><pre class="oac_no_warn" dir="ltr">OUT</pre></td>
                                 <td align="left" valign="top" width="74%" headers="d82686e621 d82686e596 ">
                                    <p>来自表函数的下一批行。它作为与表函数的返回类型相同的集合类型的实例返回。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-54F5311D-8708-44AB-85A9-9CFE3EE79C76__GUID-89370AA9-3E48-45CD-8476-9C5FD804A732">返回</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">ODCIConst。Success</code>的成功， <code class="codeph">ODCIConst.否则会Error</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-54F5311D-8708-44AB-85A9-9CFE3EE79C76__GUID-AAF45EEB-81B3-4D24-AA57-5197CB4CAF1F">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">ODCITableFetch</code>会调用<code class="codeph">ODCITableFetch</code>一次或多次来检索表函数返回的集合中的所有行。扫描上下文作为参数传入。通常， <code class="codeph">ODCITableFetch</code>使用输入扫描上下文并计算要返回给Oracle的下一组行。此外，它可以相应地更新扫描上下文。
                              </p>
                           </li>
                           <li>
                              <p>在每次调用<code class="codeph">fetch()</code>返回更多行会减少必须进行的提取调用次数，从而提高性能。
                              </p>
                           </li>
                           <li>
                              <p>Oracle重复调用<code class="codeph">ODCITableFetch</code> ，直到返回了表函数集合中的所有行。返回所有行后， <code class="codeph">ODCITableFetch</code>应返回null集合。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADDCI5156"></a><a id="ADDCI5157"></a><a id="ADDCI5155"></a><div class="props_rev_3"><a id="GUID-6022AD7F-BDE5-4D42-B8F9-D2B18AB6AD84" name="GUID-6022AD7F-BDE5-4D42-B8F9-D2B18AB6AD84"></a><h4 id="ADDCI-GUID-6022AD7F-BDE5-4D42-B8F9-D2B18AB6AD84" class="sect4"><span class="enumeration_section">23.1.4</span> ODCITablePrepare（）</h4>
                  <div>
                     <div class="section">
                        <p>在编译时准备扫描上下文和其他查询信息。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6022AD7F-BDE5-4D42-B8F9-D2B18AB6AD84__GUID-B08EFF3B-D6CF-4A98-80F5-3D793BD0E4CA">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">静态功能ODCITablePrepare（sctx OUT &lt;imptype&gt;，tf_info SYS.ODCITabFuncInfo，args）;</pre></div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-6022AD7F-BDE5-4D42-B8F9-D2B18AB6AD84__GUID-5B62584D-1B99-4C81-8DCE-FF5D85D6A16B">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="15%" id="d82686e742">参数</th>
                                 <th align="left" valign="bottom" width="11%" id="d82686e745">进出</th>
                                 <th align="left" valign="bottom" width="74%" id="d82686e748">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d82686e753" headers="d82686e742 "><pre class="oac_no_warn" dir="ltr">sctx</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d82686e753 d82686e745 "><pre class="oac_no_warn" dir="ltr">OUT</pre></td>
                                 <td align="left" valign="top" width="74%" headers="d82686e753 d82686e748 ">
                                    <p>此例程返回的扫描上下文。该值作为参数传递给后面的扫描例程。扫描上下文是包含<code class="codeph">ODCITable</code>例程实现的对象类型的实例。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d82686e766" headers="d82686e742 "><pre class="oac_no_warn" dir="ltr">tf_info</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d82686e766 d82686e745 ">
                                    <p> </p>
                                 </td>
                                 <td align="left" valign="top" width="74%" headers="d82686e766 d82686e748 ">
                                    <p>包含投影信息和返回类型的表描述符对象（TDO）：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>Attrs（ <code class="codeph">SYS.ODCINumberList</code> ）：列出表函数输出集合类型的引用属性的位置</p>
                                       </li>
                                       <li>
                                          <p>RefType（ <code class="codeph">SYS.AnyType</code> ）：对于<code class="codeph">AnyDataSet</code>表函数，这是期望在<code class="codeph">AnyDataSet</code>集合中返回的实际返回类型。
                                          </p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d82686e795" headers="d82686e742 "><pre class="oac_no_warn" dir="ltr">ARGS</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d82686e795 d82686e745 "><pre class="oac_no_warn" dir="ltr">在</pre></td>
                                 <td align="left" valign="top" width="74%" headers="d82686e795 d82686e748 ">
                                    <p>传递给表函数的参数。在编译时调用此方法;因此，只有文字参数才有价值。列和表达式参数作为空值传递。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-6022AD7F-BDE5-4D42-B8F9-D2B18AB6AD84__GUID-FEEDA3A2-3D73-41CA-8F1C-B66E59008301">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>此方法基于编译时已知的信息准备扫描上下文。在查询执行开始时调用此扫描上下文时，将其传递给<code class="codeph">ODCITableStart</code> 。
                              </p>
                           </li>
                           <li>
                              <p>如果实现了此可选方法，则在查询执行结束时仅调用<code class="codeph">ODCITableClose</code>一次。每次重启表函数时， <code class="codeph">ODCITableStart</code>调用<code class="codeph">ODCITableStart</code>并传递扫描上下文。这允许表函数在重新启动之间维护上下文，并且在查询执行结束时仅执行一次清理操作。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADDCI5159"></a><a id="ADDCI5160"></a><a id="ADDCI5161"></a><a id="ADDCI5158"></a><div class="props_rev_3"><a id="GUID-7C674A4F-7145-480E-883D-00C609B64DA0" name="GUID-7C674A4F-7145-480E-883D-00C609B64DA0"></a><h4 id="ADDCI-GUID-7C674A4F-7145-480E-883D-00C609B64DA0" class="sect4"><span class="enumeration_section">23.1.5</span> ODCITableStart（）</h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">ODCITableStart</code>初始化表函数的扫描。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7C674A4F-7145-480E-883D-00C609B64DA0__GUID-91786927-603A-4A94-A4DD-327F2E8FEA95">句法</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">静态功能ODCITableStart（sctx IN OUT &lt;imptype&gt;，&lt;args&gt;）返回编号;</pre></div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-7C674A4F-7145-480E-883D-00C609B64DA0__GUID-E9378FB8-CE5D-4297-B279-744AD829BC86">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="15%" id="d82686e901">参数</th>
                                 <th align="left" valign="bottom" width="11%" id="d82686e904">进出</th>
                                 <th align="left" valign="bottom" width="74%" id="d82686e907">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d82686e912" headers="d82686e901 "><pre class="oac_no_warn" dir="ltr">自</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d82686e912 d82686e904 "><pre class="oac_no_warn" dir="ltr">进出</pre></td>
                                 <td align="left" valign="top" width="74%" headers="d82686e912 d82686e907 ">
                                    <p>此例程返回的扫描上下文。该值作为参数传递给后面的扫描例程。扫描上下文是包含<code class="codeph">ODCITable</code>例程实现的对象类型的实例。如果实现了<code class="codeph">ODCITablePrepare</code> ，则它创建的扫描上下文将传递到<code class="codeph">ODCITableStart</code> 。
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d82686e931" headers="d82686e901 "><pre class="oac_no_warn" dir="ltr">ARGS</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d82686e931 d82686e904 "><pre class="oac_no_warn" dir="ltr">在</pre></td>
                                 <td align="left" valign="top" width="74%" headers="d82686e931 d82686e907 ">
                                    <p>用户为表函数指定的零个或多个参数的集合</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="15%" id="d82686e941" headers="d82686e901 "><pre class="oac_no_warn" dir="ltr">RWS</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d82686e941 d82686e904 "><pre class="oac_no_warn" dir="ltr">OUT</pre></td>
                                 <td align="left" valign="top" width="74%" headers="d82686e941 d82686e907 ">
                                    <p>来自表函数的下一批行。它作为与表函数的返回类型相同的集合类型的实例返回。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7C674A4F-7145-480E-883D-00C609B64DA0__GUID-54415E87-ACC8-4E2D-8F63-6E3ACB34848E">返回</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">ODCIConst。Success</code>的成功， <code class="codeph">ODCIConst.否则会Error</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-7C674A4F-7145-480E-883D-00C609B64DA0__GUID-98FA0054-9397-4268-A761-592D08B70290">使用说明</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p>如果未实现<code class="codeph">ODCITablePrepare</code> ，则这是调用以开始从表函数检索行的第一个例程。此例程通常执行扫描所需的设置。创建扫描上下文（作为对象实例<code class="codeph">sctx</code> ）并返回到Oracle。用户在<code class="codeph">SELECT</code>语句中指定的表函数的参数作为参数传递给此例程。如果实现了<code class="codeph">ODCITablePrepare</code> ，它将在编译时创建扫描上下文，并将该扫描上下文传递给此例程。
                              </p>
                           </li>
                           <li>
                              <p>必须在<code class="codeph">ODCITableStart</code>方法的声明中将表函数的任何<code class="codeph">REF CURSOR</code>参数声明为<code class="codeph">SYS_REFCURSOR</code>类型。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="The DBMS_LOGMNR package, one of a set of LogMiner packages, contains the subprograms you use to initialize the LogMiner tool and to begin and end a LogMiner session."></meta>
      <meta name="description" content="The DBMS_LOGMNR package, one of a set of LogMiner packages, contains the subprograms you use to initialize the LogMiner tool and to begin and end a LogMiner session."></meta>
      <title>DBMS_LOGMNR</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="PL/SQL Packages and Types Reference"></meta>
      <meta property="og:description" content="The DBMS_LOGMNR package, one of a set of LogMiner packages, contains the subprograms you use to initialize the LogMiner tool and to begin and end a LogMiner session."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="PL/SQL Packages and Types Reference"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-25T11:24:34-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96430-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="DBMS_LOCK.html" title="Previous" type="text/html"></link>
      <link rel="next" href="DBMS_LOGSTDBY.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference"></meta>
    <meta name="dcterms.isVersionOf" content="ARPLS"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_LOCK.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="DBMS_LOGSTDBY.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">PL / SQL包和类型参考</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_LOGMNR</li>
            </ol>
            <a id="GUID-C1E24B58-CA7A-484D-99B8-BF304B22C412" name="GUID-C1E24B58-CA7A-484D-99B8-BF304B22C412"></a><a id="ARPLS022"></a><a id="ARPLS022"></a>
            
            <h2 id="ARPLS-GUID-C1E24B58-CA7A-484D-99B8-BF304B22C412" class="sect2"><span class="enumeration_chapter">96</span> DBMS_LOGMNR</h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_LOGMNR</code>包是一组LogMiner包之一，包含用于初始化LogMiner工具以及开始和结束LogMiner会话的子程序。
               </p>
               <p>LogMiner包的<code class="codeph">CONTINUOUS_MINE</code>功能已过时。它在Oracle Database 12c第2版（12.2）中已弃用。没有替换功能。
               </p>
               <p>本章包含以下主题：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="DBMS_LOGMNR.html#GUID-A549BE57-EAC2-475C-8562-D6D21884B83F" title="Oracle LogMiner是Oracle数据库的一部分，使您可以通过SQL接口查询联机和归档的重做日志文件。DBMS_LOGMNR包提供了启动和停止LogMiner并指定感兴趣的重做日志文件所需的大多数工具。">概观</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_LOGMNR.html#GUID-FC70EEA9-A2A5-4F00-A15D-D6B3DE291D12" title="您必须具有EXECUTE_CATALOG_ROLE角色才能使用DBMS_LOGMNR程序包。">安全模型</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_LOGMNR.html#GUID-41730EFC-C6CA-423E-834B-3E0E643346C3" title="DBMS_LOGMNR包定义了几个用于指定参数值的枚举常量。枚举常量必须以包名称为前缀，例如DBMS_LOGMNR.NEW。">常量</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_LOGMNR.html#GUID-CAB0380B-4460-413A-B6FB-4A5FE473FA88" title="DBMS_LOGMNR程序包使用Oracle数据库实用程序中的访问Logminer操作信息视图中列出的视图。">查看</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_LOGMNR.html#GUID-A182FF70-F800-44F4-BA2D-C2782D1770E4" title="LogMiner会话首先调用DBMS_LOGMNR.ADD_LOGFILE或DBMS_LOGMNR.START_LOGMNR（如果您计划明确指定日志文件，则为前者;如果您计划使用连续挖掘，则为后者）。会话以调用DBMS_LOGMNR.END_LOGMNR结束。">操作说明</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_LOGMNR.html#GUID-DA5594B8-ADA7-4C29-996F-ED19AA9C7E02" title="该表列出了DBMS_LOGMNR子程序并简要描述了它们。">DBMS_LOGMNR子程序摘要</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-C1E24B58-CA7A-484D-99B8-BF304B22C412__GUID-02CCBD72-2709-48A0-ADD4-34077B8FB4CA">
                  <p class="notep1">也可以看看：</p>
                  <p>有关LogMiner的信息，请参见<a href="../sutil/oracle-logminer-utility.html#SUTIL019" target="_blank"><span class="italic">Oracle数据库实用程序</span></a> 。
                  </p>
               </div>
            </div><a id="ARPLS66785"></a><a id="ARPLS66785"></a><div class="props_rev_3"><a id="GUID-A549BE57-EAC2-475C-8562-D6D21884B83F" name="GUID-A549BE57-EAC2-475C-8562-D6D21884B83F"></a><h3 id="ARPLS-GUID-A549BE57-EAC2-475C-8562-D6D21884B83F" class="sect3"><span class="enumeration_section">96.1</span> DBMS_LOGMNR概述</h3>
               <div>
                  <p>Oracle LogMiner是Oracle数据库的一部分，使您可以通过SQL接口查询联机和归档的重做日志文件。<code class="codeph">DBMS_LOGMNR</code>包提供了启动和停止LogMiner并指定感兴趣的重做日志文件所需的大多数工具。</p>
                  <div class="section">
                     <p>对用户数据或数据库字典所做的所有更改都记录在Oracle重做日志文件中，以便可以执行数据库恢复操作。您可以利用重做日志文件中记录的数据来完成其他任务，例如：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>精确定位数据库的逻辑损坏（例如在应用程序级别发生的错误）可能已经开始</p>
                        </li>
                        <li>
                           <p>确定在事务级别执行细粒度恢复时必须采取的操作。</p>
                        </li>
                        <li>
                           <p>通过趋势分析进行性能调整和容量规划。</p>
                        </li>
                        <li>
                           <p>跟踪在数据库上执行的任何数据操作语言（DML）和数据定义语言（DDL）语句，它们的执行顺序以及执行它们的人员。</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-A549BE57-EAC2-475C-8562-D6D21884B83F__GUID-AD86D390-31C7-49B1-887E-DD22D166D25B">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="DBMS_LOGMNR_D.html#GUID-7263799E-AD78-4094-B442-B5686A9F1ADF" title="The DBMS_LOGMNR_D package, one of a set of LogMiner packages, contains two subprograms: the BUILD procedure and the SET_TABLESPACE procedure.">DBMS_LOGMNR_D，</a>用于获取有关提取LogMiner字典并在备用表空间中重新创建LogMiner表的包子<a href="DBMS_LOGMNR_D.html#GUID-7263799E-AD78-4094-B442-B5686A9F1ADF" title="DBMS_LOGMNR_D包是一组LogMiner包之一，包含两个子程序：BUILD过程和SET_TABLESPACE过程。">程序</a>的信息</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS66786"></a><a id="ARPLS66786"></a><div class="props_rev_3"><a id="GUID-FC70EEA9-A2A5-4F00-A15D-D6B3DE291D12" name="GUID-FC70EEA9-A2A5-4F00-A15D-D6B3DE291D12"></a><h3 id="ARPLS-GUID-FC70EEA9-A2A5-4F00-A15D-D6B3DE291D12" class="sect3"><span class="enumeration_section">96.2</span> DBMS_LOGMNR安全模型</h3>
               <div>
                  <p>您必须具有<code class="codeph">EXECUTE_CATALOG_ROLE</code>角色才能使用<code class="codeph">DBMS_LOGMNR</code>程序包。
                  </p>
               </div>
            </div><a id="ARPLS66787"></a><a id="ARPLS66788"></a><a id="ARPLS66789"></a><a id="ARPLS66788"></a><a id="ARPLS66789"></a><a id="ARPLS66787"></a><div class="props_rev_3"><a id="GUID-41730EFC-C6CA-423E-834B-3E0E643346C3" name="GUID-41730EFC-C6CA-423E-834B-3E0E643346C3"></a><h3 id="ARPLS-GUID-41730EFC-C6CA-423E-834B-3E0E643346C3" class="sect3"><span class="enumeration_section">96.3</span> DBMS_LOGMNR常量</h3>
               <div>
                  <p><code class="codeph">DBMS_LOGMNR</code>包定义了几个用于指定参数值的枚举常量。枚举常量必须以包名称为前缀，例如<code class="codeph">DBMS_LOGMNR.NEW</code> 。</p>
                  <div class="section">
                     <div class="infoboxnote" id="GUID-41730EFC-C6CA-423E-834B-3E0E643346C3__THECONTINUOUS_MINEOPTIONFORTHEDBMS_-047DB803">
                        <p class="notep1">注意：</p>Oracle Database 19c（19.1）中不支持<code class="codeph">dbms_logmnr.start_logmnr</code>软件包的<code class="codeph">continuous_mine</code>选项，该选项不再可用。
                     </div>
                     <p>下表描述了常量<code class="codeph">ADD_LOGFILE</code> <code class="codeph">options</code>中旗<code class="codeph">DBMS_LOGMNR</code>包。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-41730EFC-C6CA-423E-834B-3E0E643346C3__CCHCAJEE">
                     <p class="titleintable">表96-1 ADD_LOGFILE选项标志的常量</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="ADD_LOGFILE选项标志的常量" width="100%" border="1" summary="This table describes constants used by the ADD_LOGFILE options flag of the DBMS_LOGMNR package." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="30%" id="d525692e534">不变</th>
                              <th align="left" valign="bottom" width="70%" id="d525692e537">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d525692e542" headers="d525692e534 ">
                                 <p><code class="codeph">新</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d525692e542 d525692e537 ">
                                 <p>隐式调用<code class="codeph">DBMS_LOGMNR.END_LOGMNR</code>过程以结束当前的LogMiner会话，然后创建新会话。新会话从您指定的重做日志文件开始，启动要分析的重做日志文件的新列表。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d525692e553" headers="d525692e534 ">
                                 <p><code class="codeph">添加文件</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d525692e553 d525692e537 ">
                                 <p>将指定的重做日志文件添加到要分析的重做日志文件列表中。任何添加重复文件的尝试都会引发异常（ <code class="codeph">ORA-01289</code> ）。如果未指定选项标志，则这是默认值。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p><a href="DBMS_LOGMNR.html#GUID-41730EFC-C6CA-423E-834B-3E0E643346C3__CCHDBIGB" title="该表描述了DBMS_LOGMNR包的START_LOGMNR选项标志使用的常量。">表96-2</a>介绍了常量<code class="codeph">START_LOGMNR</code>在选项标志<code class="codeph">DBMS_LOGMNR</code>包。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-41730EFC-C6CA-423E-834B-3E0E643346C3__CCHDBIGB">
                     <p class="titleintable">表96-2 START_LOGMNR选项标志的常量</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="START_LOGMNR选项标志的常量" width="100%" border="1" summary="This table describes constants used by the START_LOGMNR options flag of the DBMS_LOGMNR package." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="30%" id="d525692e586">不变</th>
                              <th align="left" valign="bottom" width="70%" id="d525692e589">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d525692e594" headers="d525692e586 ">
                                 <p><code class="codeph">COMMITTED_DATA_ONLY</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d525692e594 d525692e589 ">
                                 <p>如果设置，则返回与已提交事务对应的DML语句。与已提交事务对应的DML语句组合在一起。事务以其提交顺序返回。过滤掉或正在进行的事务将被过滤掉，内部重做记录（与索引操作，管理等相关的记录）也将被过滤掉。</p>
                                 <p>如果未设置此选项，则将按重做日志中的查找顺序（按SCN值的顺序）返回所有事务（已提交，已回滚和正在进行）的所有行。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d525692e604" headers="d525692e586 ">
                                 <p><code class="codeph">SKIP_CORRUPTION</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d525692e604 d525692e589 ">
                                 <p>指示<code class="codeph">V$LOGMNR_CONTENTS</code>视图上的选择操作以跳过正在分析的重做日志文件中的任何损坏并继续处理。仅当重做日志文件中的块（而不是重做日志文件的标头）损坏时，此选项才有效。您应该检查<code class="codeph">V$LOGMNR_CONTENTS</code>视图中的<code class="codeph">INFO</code>列以确定LogMiner跳过的损坏块。当跳过重做日志文件中的损坏时， <code class="codeph">OPERATION</code>列包含值<code class="codeph">CORRUPTED_BLOCKS</code> ， <code class="codeph">STATUS</code>列包含值<code class="codeph">1343.</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d525692e633" headers="d525692e586 ">
                                 <p><code class="codeph">DDL_DICT_TRACKING</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d525692e633 d525692e589 ">
                                 <p>如果正在使用的LogMiner字典是平面文件或重做日志文件，则LogMiner会在发生DDL事件时更新其内部字典。这可确保为构建LogMiner内部字典后修改的对象维护正确的<code class="codeph">SQL_REDO</code>和<code class="codeph">SQL_UNDO</code>信息。必须打开LogMiner连接的数据库。
                                 </p>
                                 <p>此选项不能与<code class="codeph">DICT_FROM_ONLINE_CATALOG</code>选项一起使用，并且在使用的LogMiner字典是在Oracle9 <span class="italic">i</span>之前提取到平面文件的字典时，不能使用此选项。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d525692e655" headers="d525692e586 ">
                                 <p><code class="codeph">DICT_FROM_ONLINE_CATALOG</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d525692e655 d525692e589 ">
                                 <p>指示LogMiner使用当前在线数据库字典而不是平面文件中包含的LogMiner字典或正在分析的重做日志文件。</p>
                                 <p>此选项不能与<code class="codeph">DDL_DICT_TRACKING</code>选项一起使用。LogMiner连接的数据库必须与生成重做日志文件的数据库相同。
                                 </p>
                                 <p>如果数据库中的表定义与重做日志文件中的表定义不匹配，则期望在<code class="codeph">V$LOGMNR_CONTENTS</code>视图的<code class="codeph">STATUS</code>列中看到值<code class="codeph">2</code> 。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d525692e679" headers="d525692e586 ">
                                 <p><code class="codeph">DICT_FROM_REDO_LOGS</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d525692e679 d525692e589 ">
                                 <p>如果设置，LogMiner希望在指定的重做日志文件中找到LogMiner字典。重做日志文件与指定<code class="codeph">DBMS_LOGMNR.ADD_LOGFILE</code>过程或与<code class="codeph">DBMS_LOGMNR.START_LOGMNR</code>程序。
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d525692e693" headers="d525692e586 ">
                                 <p><code class="codeph">NO_SQL_DELIMITER</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d525692e693 d525692e589 ">
                                 <p>如果设置，则SQL分隔符（分号）不会放在重构SQL语句的末尾。这对于打开游标然后执行重构语句的应用程序很有用。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d525692e701" headers="d525692e586 ">
                                 <p><code class="codeph">NO_ROWID_IN_STMT</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d525692e701 d525692e589 ">
                                 <p>如果设置，则<code class="codeph">ROWID</code>子句不包含在重构的SQL语句中。如果启用了补充日志记录，则重做日志文件可能已包含已修改行的逻辑唯一标识符。
                                 </p>
                                 <p>使用此选项时，必须确保在源数据库中在适当级别启用了补充日志记录，并且感兴趣的表中不存在重复行。 LogMiner不保证逻辑行标识符的唯一性。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d525692e714" headers="d525692e586 ">
                                 <p><code class="codeph">PRINT_PRETTY_SQL</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d525692e714 d525692e589 ">
                                 <p>如果设置，LogMiner将重构的SQL语句格式化以便于阅读。这些重构的SQL语句不可执行。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d525692e722" headers="d525692e586 ">
                                 <p><code class="codeph">STRING_LITERALS_IN_STMT</code></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d525692e722 d525692e589 ">
                                 <p>如果设置，SQL_REDO和SQL_UNDO将使用文字表示数字，日期时间和间隔列类型。</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="section">
                     <p>要指定多个选项，请在它们之间使用加号（+）。例如：</p><pre class="oac_no_warn" dir="ltr">EXECUTE DBMS_LOGMNR.START_LOGMNR（OPTIONS =&gt;  -  DBMS_LOGMNR.DDL_DICT_TRACKING + DBMS_LOGMNR.DICT_FROM_REDO_LOGS）;</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS66790"></a><a id="ARPLS66790"></a><div class="props_rev_3"><a id="GUID-CAB0380B-4460-413A-B6FB-4A5FE473FA88" name="GUID-CAB0380B-4460-413A-B6FB-4A5FE473FA88"></a><h3 id="ARPLS-GUID-CAB0380B-4460-413A-B6FB-4A5FE473FA88" class="sect3"><span class="enumeration_section">96.4</span> DBMS_LOGMNR视图</h3>
               <div>
                  <p><code class="codeph">DBMS_LOGMNR</code>程序包使用<span class="italic">Oracle数据库实用程序中的</span> <span class="italic">访问Logminer操作信息</span>视图中列出的<span class="italic">视图</span> 。
                  </p>
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-CAB0380B-4460-413A-B6FB-4A5FE473FA88__ORACLEDATABASEUTILITIESFORINFORMATI-BDBA78E0">
                        <p class="notep1">也可以看看：</p>
                        <p><a href="../sutil/oracle-logminer-utility.html#SUTIL1594" target="_blank"><span class="italic">Oracle数据库实用程序</span></a></p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS66791"></a><a id="ARPLS66791"></a><div class="props_rev_3"><a id="GUID-A182FF70-F800-44F4-BA2D-C2782D1770E4" name="GUID-A182FF70-F800-44F4-BA2D-C2782D1770E4"></a><h3 id="ARPLS-GUID-A182FF70-F800-44F4-BA2D-C2782D1770E4" class="sect3"><span class="enumeration_section">96.5</span> DBMS_LOGMNR操作说明</h3>
               <div>
                  <p><span class="bold">LogMiner</span> <span class="bold">会话</span>首先调用<code class="codeph">DBMS_LOGMNR.ADD_LOGFILE</code>或<code class="codeph">DBMS_LOGMNR.START_LOGMNR</code> （如果您计划明确指定日志文件，则为前者;如果您计划使用连续挖掘，则为后者）。会话以调用<code class="codeph">DBMS_LOGMNR.END_LOGMNR</code>结束。</p>
                  <div class="section">
                     <p>在LogMiner会话中，您可以指定要分析的重做日志文件以及感兴趣的SCN或时间范围;然后，您可以针对<code class="codeph">V$LOGMNR_CONTENTS</code>视图发出SQL <code class="codeph">SELECT</code>语句，以检索感兴趣的数据。</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS480"></a><a id="ARPLS66792"></a><a id="ARPLS66792"></a><a id="ARPLS480"></a><div class="props_rev_3"><a id="GUID-DA5594B8-ADA7-4C29-996F-ED19AA9C7E02" name="GUID-DA5594B8-ADA7-4C29-996F-ED19AA9C7E02"></a><h3 id="ARPLS-GUID-DA5594B8-ADA7-4C29-996F-ED19AA9C7E02" class="sect3"><span class="enumeration_section">96.6</span> DBMS_LOGMNR子程序摘要</h3>
               <div>
                  <p>该表列出了<code class="codeph">DBMS_LOGMNR</code>子程序并简要描述了它们。
                  </p>
                  <div class="section">
                     <p>在多租户容器数据库（CDB）中，必须从根调用一些子程序。也可能存在其他差异。有关详细信息，请参见各个子程序说明。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-DA5594B8-ADA7-4C29-996F-ED19AA9C7E02__GUID-E62575B9-A14B-4FFE-A89A-4BC48FCCD68A">
                     <p class="titleintable">表96-3 DBMS_LOGMNR包子程序</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_LOGMNR包子程序" width="100%" border="1" summary="This table lists the DBMS_LOGMNR subprograms in alphabetical order and briefly describes them." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d525692e1051">子程序</th>
                              <th align="left" valign="bottom" width="69%" id="d525692e1054">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d525692e1059" headers="d525692e1051 ">
                                 <p><a href="DBMS_LOGMNR.html#GUID-30C5D959-C0A0-4591-9FBA-F57BC72BBE2F" title="此过程将文件添加到现有或新创建的日志文件列表中，以供LogMiner处理。">ADD_LOGFILE过程</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d525692e1059 d525692e1054 ">
                                 <p>将重做日志文件添加到现有或新创建的重做日志文件列表中以供LogMiner处理，这样，如果创建了新列表，则标记LogMiner会话的开始</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d525692e1071" headers="d525692e1051 ">
                                 <p><a href="DBMS_LOGMNR.html#GUID-08EE7D3B-C24B-4BDC-BB2C-FCA5CA7B6588" title="此功能旨在与MINE_VALUE功能结合使用。">COLUMN_PRESENT函数</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d525692e1071 d525692e1054 ">
                                 <p>对从<code class="codeph">V$LOGMNR_CONTENTS</code>视图返回的任何行调用此函数，以确定<code class="codeph">column_name</code>输入参数为此函数指定的列是否存在undo或redo列值</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d525692e1092" headers="d525692e1051 ">
                                 <p><a href="DBMS_LOGMNR.html#GUID-25005223-2222-449B-84CC-7E15B805C413" title="此过程完成LogMiner会话。由于此过程执行可能无法执行的清理操作，因此必须使用它来正确结束LogMiner会话。当您注销数据库会话或调用DBMS_LOGMNR.ADD_LOGFILE并指定NEW选项时，将自动调用此过程。">END_LOGMNR程序</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d525692e1092 d525692e1054 ">
                                 <p>完成LogMiner会话</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d525692e1110" headers="d525692e1051 ">
                                 <p><a href="DBMS_LOGMNR.html#GUID-F601D8C4-0A79-467C-9A9F-BFC6BB725B31" title="此功能可根据列的数据值进行查询。">MINE_VALUE函数</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d525692e1110 d525692e1054 ">
                                 <p>对从<code class="codeph">V$LOGMNR_CONTENTS</code>视图返回的任何行调用此函数，以检索由<code class="codeph">column_name</code>输入参数指定的列的undo或redo列值到此函数</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d525692e1128" headers="d525692e1051 ">
                                 <p><a href="DBMS_LOGMNR.html#GUID-D68D85E2-7AF3-4DBD-80DF-58A23ECABCD1" title="此过程从现有的重做日志文件列表中删除重做日志文件，以供LogMiner处理。">REMOVE_LOGFILE程序</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d525692e1128 d525692e1054 ">
                                 <p>从重做日志文件列表中删除重做日志文件，以供LogMiner处理</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d525692e1140" headers="d525692e1051 ">
                                 <p><a href="DBMS_LOGMNR.html#GUID-160E5CF9-3430-4B45-9D2A-94BAFC5E68B0" title="此过程通过加载LogMiner将用于将内部架构对象标识符转换为名称的字典来启动LogMiner。">START_LOGMNR程序</a></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d525692e1140 d525692e1054 ">
                                 <p>初始化LogMiner实用程序并启动LogMiner（除非会话已通过调用<code class="codeph">DBMS_LOGMNR.ADD_LOGFILE</code>启动）</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS66793"></a><a id="ARPLS66794"></a><a id="ARPLS66795"></a><a id="ARPLS66794"></a><a id="ARPLS66795"></a><a id="ARPLS66793"></a><div class="props_rev_3"><a id="GUID-30C5D959-C0A0-4591-9FBA-F57BC72BBE2F" name="GUID-30C5D959-C0A0-4591-9FBA-F57BC72BBE2F"></a><h4 id="ARPLS-GUID-30C5D959-C0A0-4591-9FBA-F57BC72BBE2F" class="sect4"><span class="enumeration_section">96.6.1</span> ADD_LOGFILE过程</h4>
                  <div>
                     <p>此过程将文件添加到现有或新创建的日志文件列表中，以供LogMiner处理。</p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-30C5D959-C0A0-4591-9FBA-F57BC72BBE2F__THECONTINUOUS_MINEOPTIONFORTHEDBMS_-047F3218">
                           <p class="notep1">注意：</p>Oracle Database 19c（19.1）中不支持<code class="codeph">dbms_logmnr.start_logmnr</code>软件包的<code class="codeph">continuous_mine</code>选项，该选项不再可用。
                        </div>
                        <p>在CDB中，必须从根数据库调用<code class="codeph">ADD_LOGFILE</code>过程。您必须具有<code class="codeph">LOGMINING</code>管理权限才能使用此过程。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-30C5D959-C0A0-4591-9FBA-F57BC72BBE2F__GUID-0576DE68-0AF1-4281-929B-B042076F466C">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_LOGMNR.ADD_LOGFILE（LogFileName IN VARCHAR2，选项IN BINARY_INTEGER默认ADDFILE）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-30C5D959-C0A0-4591-9FBA-F57BC72BBE2F__GUID-429568B8-C872-4E88-942F-1B12FF4B31F8">参数</p>
                        <div class="tblformal" id="GUID-30C5D959-C0A0-4591-9FBA-F57BC72BBE2F__GUID-1752DD54-A3B7-4B35-9DD7-7814614D24C8">
                           <p class="titleintable">表96-4 ADD_LOGFILE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ADD_LOGFILE过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_LOGMNR.ADD_LOGFILE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="27%" id="d525692e1285">参数</th>
                                    <th align="left" valign="bottom" width="73%" id="d525692e1288">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d525692e1293" headers="d525692e1285 ">
                                       <p><code class="codeph">LOGFILENAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d525692e1293 d525692e1288 ">
                                       <p>指定要添加到此会话期间要分析的重做日志文件列表的重做日志文件的名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d525692e1301" headers="d525692e1285 ">
                                       <p><code class="codeph">选项</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d525692e1301 d525692e1288 ">
                                       <p>执行以下操作之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>启动新的LogMiner会话和用于分析的新重做日志文件列表（ <code class="codeph">DBMS_LOGMNR.NEW</code> ）</p>
                                          </li>
                                          <li>
                                             <p>将文件添加到现有的重做日志文件列表以进行分析（ <code class="codeph">DBMS_LOGMNR.ADDFILE</code> ）</p>
                                          </li>
                                       </ul>
                                       <p><a href="DBMS_LOGMNR.html#GUID-41730EFC-C6CA-423E-834B-3E0E643346C3__CCHCAJEE" title="此表描述了DBMS_LOGMNR包的ADD_LOGFILE选项标志使用的常量。">见表96-1</a> 。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-30C5D959-C0A0-4591-9FBA-F57BC72BBE2F__GUID-6C6C14EB-16AB-40E8-9A85-205BFE279B51">例外</p>
                        <div class="tblformal" id="GUID-30C5D959-C0A0-4591-9FBA-F57BC72BBE2F__GUID-545609FD-C173-4ECF-9327-0BBD36717F84">
                           <p class="titleintable">表96-5 ADD_LOGFILE过程异常</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ADD_LOGFILE过程异常" width="100%" border="1" summary="This table describes exceptions raised by the DBMS_LOGMNR.ADD_LOGFILE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d525692e1341">例外</th>
                                    <th align="left" valign="bottom" width="69%" id="d525692e1344">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e1349" headers="d525692e1341 ">
                                       <p><code class="codeph">ORA-01284</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e1349 d525692e1344 ">
                                       <p>无法打开指定的文件。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e1357" headers="d525692e1341 ">
                                       <p><code class="codeph">ORA-01287</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e1357 d525692e1344 ">
                                       <p>指定的文件来自不同的数据库化身。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e1365" headers="d525692e1341 ">
                                       <p><code class="codeph">ORA-01289</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e1365 d525692e1344 ">
                                       <p>指定的文件已添加到列表中。无法添加重复的重做日志文件。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e1373" headers="d525692e1341 ">
                                       <p><code class="codeph">ORA-01290</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e1373 d525692e1344 ">
                                       <p>指定的文件不在当前列表中，因此无法从列表中删除。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e1381" headers="d525692e1341 ">
                                       <p><code class="codeph">ORA-01324</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e1381 d525692e1344 ">
                                       <p>指定的文件无法添加到列表中，因为存在DB_ID不匹配。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-30C5D959-C0A0-4591-9FBA-F57BC72BBE2F__GUID-E3DA7652-1F4C-4C9B-939C-B46CAF29491E">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>查询前<code class="codeph">V$LOGMNR_CONTENTS</code>视图，您必须对成功调用<code class="codeph">DBMS_LOGMNR.START_LOGMNR</code>程序（当前的LogMiner会话中）。
                              </p>
                           </li>
                           <li>
                              <p>必须使用要分析的重做日志文件列表设置LogMiner会话。使用<code class="codeph">ADD_LOGFILE</code>过程指定要分析的重做日志文件列表。
                              </p>
                           </li>
                           <li>
                              <p>如果要分析多个重做日志文件，则必须分别为每个重做日志文件调用<code class="codeph">ADD_LOGFILE</code>过程。重做日志文件不需要以任何特定顺序注册。
                              </p>
                           </li>
                           <li>
                              <p>可以挖掘归档和联机重做日志文件。</p>
                           </li>
                           <li>
                              <p>将第一个重做日志文件添加到列表后，添加到列表中的每个其他重做日志文件必须与第一个重做日志文件相同的数据库和数据库<code class="codeph">RESETLOGS</code> <code class="codeph">SCN</code>关联。（数据库<code class="codeph">RESETLOGS</code> <code class="codeph">SCN</code>唯一标识<code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">OPEN</code> <code class="codeph">RESETLOGS</code>语句的每次执行。重置联机重做日志后，Oracle会创建一个新的，唯一的数据库版本。）
                              </p>
                           </li>
                           <li>
                              <p>要分析来自不同数据库（或具有不同数据库<code class="codeph">RESETLOGS SCN</code>的数据库化身）的重做日志文件，而不是与当前重做日志文件列表关联的重做日志文件，请使用<code class="codeph">END_LOGMNR</code>过程结束当前LogMiner会话，然后构建使用<code class="codeph">ADD_LOGFILE</code>过程的新列表。
                              </p>
                           </li>
                           <li>
                              <p>LogMiner按日志序列号匹配重做日志文件。因此，具有不同名称但具有相同日志序列号的两个重做日志文件将返回ORA-01289异常。例如，归档重做日志文件的在线副本具有与归档重做日志文件不同的名称，但在注册归档对应文件后尝试向LogMiner注册它将导致返回ORA-01289异常。</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66796"></a><a id="ARPLS66797"></a><a id="ARPLS66798"></a><a id="ARPLS66799"></a><a id="ARPLS66797"></a><a id="ARPLS66798"></a><a id="ARPLS66799"></a><a id="ARPLS66796"></a><div class="props_rev_3"><a id="GUID-08EE7D3B-C24B-4BDC-BB2C-FCA5CA7B6588" name="GUID-08EE7D3B-C24B-4BDC-BB2C-FCA5CA7B6588"></a><h4 id="ARPLS-GUID-08EE7D3B-C24B-4BDC-BB2C-FCA5CA7B6588" class="sect4"><span class="enumeration_section">96.6.2</span> COLUMN_PRESENT函数</h4>
                  <div>
                     <p>此功能旨在与<code class="codeph">MINE_VALUE</code>功能结合使用。
                     </p>
                     <div class="section">
                        <p>如果<code class="codeph">MINE_VALUE</code>函数返回<code class="codeph">NULL</code>值，则可能表示：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>指定的列不存在于数据的重做或撤消部分中。</p>
                           </li>
                           <li>
                              <p>指定的列存在且具有<code class="codeph">NULL</code>值。
                              </p>
                           </li>
                        </ul>
                        <p>要区分这两种情况，请使用<code class="codeph">COLUMN_PRESENT</code>函数，如果该列存在于数据的重做或撤消部分，则返回<code class="codeph">1</code> 。否则，它返回<code class="codeph">0</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-08EE7D3B-C24B-4BDC-BB2C-FCA5CA7B6588__GUID-82240D69-EAE7-4FB8-9ABA-FEA239939C0A">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_LOGMNR.COLUMN_PRESENT（sql_redo_undo IN RAW，column_name IN VARCHAR2默认为''）RETURN NUMBER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-08EE7D3B-C24B-4BDC-BB2C-FCA5CA7B6588__GUID-F9626E27-D4E0-4185-BA3E-B6A3BAB413B6">参数</p>
                        <div class="tblformal" id="GUID-08EE7D3B-C24B-4BDC-BB2C-FCA5CA7B6588__GUID-AD5A4607-FFEE-44DC-BB75-AC688039B51B">
                           <p class="titleintable">表96-6 COLUMN_PRESENT函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="COLUMN_PRESENT函数参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_LOGMNR.COLUMN_PRESENT subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d525692e1609">参数</th>
                                    <th align="left" valign="bottom" width="69%" id="d525692e1612">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e1617" headers="d525692e1609 ">
                                       <p><code class="codeph">sql_redo_undo</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e1617 d525692e1612 ">
                                       <p>指定任一<code class="codeph">REDO_VALUE</code>或<code class="codeph">UNDO_VALUE</code>在列<code class="codeph">V$LOGMNR_CONTENTS</code>查看从中提取的数据值。有关更多信息，请参阅使用说明。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e1634" headers="d525692e1609 ">
                                       <p><code class="codeph">列名</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e1634 d525692e1612 ">
                                       <p>指定此函数将返回信息的列的完全限定名称（ <code class="codeph">schema.table.column</code> ）。
                                       </p>
                                       <p></p>
                                       <p>在CDB中，列名称指定如下：</p>
                                       <p><code class="codeph">CONTAINER_NAME：schema.table.column</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-08EE7D3B-C24B-4BDC-BB2C-FCA5CA7B6588__GUID-D96BCC90-2093-4D3B-BFD0-1D5301B81139">返回值</p>
                        <p><a href="DBMS_LOGMNR.html#GUID-08EE7D3B-C24B-4BDC-BB2C-FCA5CA7B6588__CCHHCAHC" title="此表描述了COLUMN_PRESENT函数返回的值。">表96-7</a>描述了<code class="codeph">COLUMN_PRESENT</code>函数的返回值。如果自描述记录（第一个参数）包含第二个参数中指定的列，则<code class="codeph">COLUMN_PRESENT</code>函数返回1。这可用于确定<code class="codeph">DBMS_LOGMNR.MINE_VALUE</code>函数返回的<code class="codeph">NULL</code>值的含义。
                        </p>
                        <div class="tblformal" id="GUID-08EE7D3B-C24B-4BDC-BB2C-FCA5CA7B6588__CCHHCAHC">
                           <p class="titleintable">表96-7 COLUMN_PRESENT函数的返回值</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="COLUMN_PRESENT函数的返回值" width="100%" border="1" summary="This table describes values returned by the COLUMN_PRESENT function." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d525692e1681">返回</th>
                                    <th align="left" valign="bottom" width="69%" id="d525692e1684">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e1689" headers="d525692e1681 ">
                                       <p><code class="codeph">0</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e1689 d525692e1684 ">
                                       <p>此行<code class="codeph">V$LOGMNR_CONTENTS</code>不存在指定的列。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e1700" headers="d525692e1681 ">
                                       <p><code class="codeph">1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e1700 d525692e1684 ">
                                       <p>列存在于此行的<code class="codeph">V$LOGMNR_CONTENTS</code> 。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-08EE7D3B-C24B-4BDC-BB2C-FCA5CA7B6588__GUID-59F26851-E07C-445F-A2B0-776324FEF7EC">例外</p>
                        <div class="tblformal" id="GUID-08EE7D3B-C24B-4BDC-BB2C-FCA5CA7B6588__GUID-1FC50328-29B8-4DE3-86DE-D33506C0A1C0">
                           <p class="titleintable">表96-8 COLUMN_PRESENT函数异常</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="COLUMN_PRESENT函数异常" width="100%" border="1" summary="This table describes exceptions raised by the DBMS_LOGMNR.COLUMN_PRESENT subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d525692e1723">例外</th>
                                    <th align="left" valign="bottom" width="69%" id="d525692e1726">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e1731" headers="d525692e1723 ">
                                       <p><code class="codeph">ORA-01323</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e1731 d525692e1726 ">
                                       <p>目前，LogMiner字典与LogMiner会话无关。您必须为LogMiner会话指定LogMiner字典。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e1739" headers="d525692e1723 ">
                                       <p><code class="codeph">ORA-00904</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e1739 d525692e1726 ">
                                       <p>为<code class="codeph">column_name</code>参数指定的值不是完全限定的列名。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-08EE7D3B-C24B-4BDC-BB2C-FCA5CA7B6588__GUID-548A71C4-5530-4ADA-B3A1-C9BB18C10C28">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>要使用<code class="codeph">COLUMN_PRESENT</code>函数，您必须已成功启动LogMiner。
                              </p>
                           </li>
                           <li>
                              <p>必须在<code class="codeph">V$LOGMNR_CONTENTS</code>视图上的select操作的上下文中调用<code class="codeph">COLUMN_PRESENT</code>函数。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">COLUMN_PRESENT</code>函数不支持<code class="codeph">LONG</code> ，LOB， <code class="codeph">ADT</code>或<code class="codeph">COLLECTION</code>数据类型。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">sql_redo_undo</code>参数的值取决于执行的操作和感兴趣的数据：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>如果执行了更新操作，并且您想知道更新操作之前的值，请指定<code class="codeph">UNDO_VALUE</code> 。</p>
                                 </li>
                                 <li>
                                    <p>如果执行了更新操作，并且您想知道更新操作后的值是什么，请指定<code class="codeph">REDO_VALUE</code> 。</p>
                                 </li>
                                 <li>
                                    <p>如果执行了插入操作，通常会指定<code class="codeph">REDO_VALUE</code> （因为插入操作之前的列的值将始终为<code class="codeph">NULL</code> ）。
                                    </p>
                                 </li>
                                 <li>
                                    <p>如果执行了删除操作，通常会指定<code class="codeph">UNDO_VALUE</code> （因为删除操作后列的值将始终为<code class="codeph">NULL</code> ）。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66800"></a><a id="ARPLS66801"></a><a id="ARPLS66801"></a><a id="ARPLS66800"></a><div class="props_rev_3"><a id="GUID-25005223-2222-449B-84CC-7E15B805C413" name="GUID-25005223-2222-449B-84CC-7E15B805C413"></a><h4 id="ARPLS-GUID-25005223-2222-449B-84CC-7E15B805C413" class="sect4"><span class="enumeration_section">96.6.3</span> END_LOGMNR程序</h4>
                  <div>
                     <p>此过程完成LogMiner会话。由于此过程执行可能无法执行的清理操作，因此必须使用它来正确结束LogMiner会话。当您注销数据库会话或调用<code class="codeph">DBMS_LOGMNR.ADD_LOGFILE</code>并指定<code class="codeph">NEW</code>选项时，将自动调用此过程。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-25005223-2222-449B-84CC-7E15B805C413__GUID-942B12DC-A4BA-4EAD-8797-47AFCB1D947E">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_LOGMNR.END_LOGMNR;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-25005223-2222-449B-84CC-7E15B805C413__GUID-CBEE6362-5F60-41D7-B25C-CD7861A06F2D">例外</p>
                        <div class="tblformal" id="GUID-25005223-2222-449B-84CC-7E15B805C413__GUID-FE5C7E3A-D912-4462-93E8-7A97C7C74116">
                           <p class="titleintable">表96-9 END_LOGMNR过程异常</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="END_LOGMNR过程异常" width="100%" border="1" summary="This table describes the exception raised by the DBMS_LOGMNR.END_LOGMNR subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d525692e1938">例外</th>
                                    <th align="left" valign="bottom" width="69%" id="d525692e1941">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e1946" headers="d525692e1938 ">
                                       <p><code class="codeph">ORA-01307</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e1946 d525692e1941 ">
                                       <p>目前没有LogMiner会话处于活动状态。该<code class="codeph">END_LOGMNR</code>过程被称为不添加任何日志文件或之前<code class="codeph">START_LOGMNR</code>过程被称为</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66802"></a><a id="ARPLS66803"></a><a id="ARPLS66804"></a><a id="ARPLS66805"></a><a id="ARPLS66803"></a><a id="ARPLS66804"></a><a id="ARPLS66805"></a><a id="ARPLS66802"></a><div class="props_rev_3"><a id="GUID-F601D8C4-0A79-467C-9A9F-BFC6BB725B31" name="GUID-F601D8C4-0A79-467C-9A9F-BFC6BB725B31"></a><h4 id="ARPLS-GUID-F601D8C4-0A79-467C-9A9F-BFC6BB725B31" class="sect4"><span class="enumeration_section">96.6.4</span> MINE_VALUE函数</h4>
                  <div>
                     <p>此功能可根据列的数据值进行查询。</p>
                     <div class="section">
                        <p>该函数有两个参数。第一个指定是否挖掘数据的重做（ <code class="codeph">REDO_VALUE</code> ）或撤消（ <code class="codeph">UNDO_VALUE</code> ）部分。第二个参数是一个字符串，它指定要挖掘的列的完全限定名称。<code class="codeph">MINE_VALUE</code>函数始终返回一个可以转换回原始数据类型的字符串。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F601D8C4-0A79-467C-9A9F-BFC6BB725B31__GUID-7F322805-43B4-43BD-A1A8-BF408635C747">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_LOGMNR.MINE_VALUE（sql_redo_undo IN RAW，column_name IN VARCHAR2 default''）RETURN VARCHAR2;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F601D8C4-0A79-467C-9A9F-BFC6BB725B31__GUID-E7C87CC8-C345-419B-A074-585CE753A8CA">参数</p>
                        <div class="tblformal" id="GUID-F601D8C4-0A79-467C-9A9F-BFC6BB725B31__GUID-7CCC06F7-1FA1-48EA-ABCC-D261B439BEBF">
                           <p class="titleintable">表96-10 MINE_VALUE函数参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="MINE_VALUE函数参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_LOGMNR.MINE_VALUE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="30%" id="d525692e2087">参数</th>
                                    <th align="left" valign="bottom" width="70%" id="d525692e2090">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d525692e2095" headers="d525692e2087 ">
                                       <p><code class="codeph">sql_redo_undo</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d525692e2095 d525692e2090 ">
                                       <p>指定任一<code class="codeph">REDO_VALUE</code>或<code class="codeph">UNDO_VALUE</code>在列<code class="codeph">V$LOGMNR_CONTENTS</code>查看从中提取的数据值。有关更多信息，请参阅使用说明。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d525692e2112" headers="d525692e2087 ">
                                       <p><code class="codeph">列名</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d525692e2112 d525692e2090 ">
                                       <p>指定此函数将返回信息的列的完全限定名称（ <code class="codeph">schema.table.column</code> ）。
                                       </p>
                                       <p>在CDB中，列名称指定如下：</p>
                                       <p><code class="codeph">CONTAINER_NAME：schema.table.column</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F601D8C4-0A79-467C-9A9F-BFC6BB725B31__GUID-461D0624-D598-4E14-8089-5BCBA154CFB4">返回值</p>
                        <div class="tblformal" id="GUID-F601D8C4-0A79-467C-9A9F-BFC6BB725B31__GUID-4154FD48-9652-4CCD-AE75-3527FFB4EDF2">
                           <p class="titleintable">表96-11 MINE_VALUE函数的返回值</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="MINE_VALUE函数的返回值" width="100%" border="1" summary="This table describes values returned by the MINE_VALUE function." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="30%" id="d525692e2140">返回</th>
                                    <th align="left" valign="bottom" width="70%" id="d525692e2143">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d525692e2148" headers="d525692e2140 ">
                                       <p><code class="codeph">空值</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d525692e2148 d525692e2143 ">
                                       <p>该列不包含在自描述记录中，或列值为<code class="codeph">NULL</code> 。要区分两种不同的null可能性，请使用<code class="codeph">DBMS_LOGMNR.COLUMN_PRESENT</code>函数。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="30%" id="d525692e2162" headers="d525692e2140 ">
                                       <p><code class="codeph">非空</code></p>
                                    </td>
                                    <td align="left" valign="top" width="70%" headers="d525692e2162 d525692e2143 ">
                                       <p>该列包含在自描述记录中;该值以字符串格式返回。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F601D8C4-0A79-467C-9A9F-BFC6BB725B31__GUID-C87E58D0-1961-4BAC-BF29-A9B65F071414">例外</p>
                        <div class="tblformal" id="GUID-F601D8C4-0A79-467C-9A9F-BFC6BB725B31__GUID-5702E10E-9117-4D7D-AE05-DC19EC370A12">
                           <p class="titleintable">表96-12 MINE_VALUE函数异常</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="MINE_VALUE函数异常" width="100%" border="1" summary="This table describes the exceptions raised by the DBMS_LOGMNR.MINE_VALUE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d525692e2182">例外</th>
                                    <th align="left" valign="bottom" width="69%" id="d525692e2185">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e2190" headers="d525692e2182 ">
                                       <p><code class="codeph">ORA-01323</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e2190 d525692e2185 ">
                                       <p>状态无效。目前，LogMiner字典与LogMiner会话无关。您必须为LogMiner会话指定LogMiner字典。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e2198" headers="d525692e2182 ">
                                       <p><code class="codeph">ORA-00904</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e2198 d525692e2185 ">
                                       <p>不合法的识别符。为<code class="codeph">column_name</code>参数指定的值不是完全限定的列名。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-F601D8C4-0A79-467C-9A9F-BFC6BB725B31__GUID-BF29FAAD-49B3-449B-B124-ED9CDD2B05D3">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>要使用<code class="codeph">MINE_VALUE</code>函数，您必须已成功启动LogMiner。
                              </p>
                           </li>
                           <li>
                              <p>必须在<code class="codeph">V$LOGMNR_CONTENTS</code>视图的select操作的上下文中调用<code class="codeph">MINE_VALUE</code>函数。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">MINE_VALUE</code>函数不支持<code class="codeph">LONG</code> ，LOB， <code class="codeph">ADT</code>或<code class="codeph">COLLECTION</code>数据类型。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">sql_redo_undo</code>参数的值取决于执行的操作和感兴趣的数据：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>如果执行了更新操作，并且您想知道更新操作之前的值，请指定<code class="codeph">UNDO_VALUE</code> 。</p>
                                 </li>
                                 <li>
                                    <p>如果执行了更新操作，并且您想知道更新操作后的值是什么，请指定<code class="codeph">REDO_VALUE</code> 。</p>
                                 </li>
                                 <li>
                                    <p>如果执行了插入操作，通常会指定<code class="codeph">REDO_VALUE</code> （因为插入操作之前的列的值将始终为null）。
                                    </p>
                                 </li>
                                 <li>
                                    <p>如果执行了删除操作，通常会指定<code class="codeph">UNDO_VALUE</code> （因为删除操作后列的值将始终为null）。
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>如果使用<code class="codeph">DBMS_LOGMNR.MINE_VALUE</code>函数来获取包含在数据库字符集中找不到的字符的<code class="codeph">NCHAR</code>值，则返回这些字符作为数据库字符集的替换字符（例如，反转的问号）。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66806"></a><a id="ARPLS66807"></a><a id="ARPLS66808"></a><a id="ARPLS66807"></a><a id="ARPLS66808"></a><a id="ARPLS66806"></a><div class="props_rev_3"><a id="GUID-D68D85E2-7AF3-4DBD-80DF-58A23ECABCD1" name="GUID-D68D85E2-7AF3-4DBD-80DF-58A23ECABCD1"></a><h4 id="ARPLS-GUID-D68D85E2-7AF3-4DBD-80DF-58A23ECABCD1" class="sect4"><span class="enumeration_section">96.6.5</span> REMOVE_LOGFILE过程</h4>
                  <div>
                     <p>此过程从现有的重做日志文件列表中删除重做日志文件，以供LogMiner处理。</p>
                     <div class="section">
                        <p>在CDB中，必须从根数据库调用<code class="codeph">REMOVE_LOGFILE</code>过程。您必须具有<code class="codeph">LOGMINING</code>管理权限才能使用此过程。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D68D85E2-7AF3-4DBD-80DF-58A23ECABCD1__GUID-ECAB3440-79B1-4A24-8DBF-A043C5948229">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_LOGMNR.REMOVE_LOGFILE（LogFileName IN VARCHAR2）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D68D85E2-7AF3-4DBD-80DF-58A23ECABCD1__GUID-A35C61AD-CB2C-4051-8D21-76600E7E285C">参数</p>
                        <div class="tblformal" id="GUID-D68D85E2-7AF3-4DBD-80DF-58A23ECABCD1__GUID-972E7913-4813-45C0-AFC3-98DC2C3ABD0F">
                           <p class="titleintable">表96-13 REMOVE_LOGFILE过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REMOVE_LOGFILE过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_LOGMNR.REMOVE_LOGFILE subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="27%" id="d525692e2406">参数</th>
                                    <th align="left" valign="bottom" width="73%" id="d525692e2409">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d525692e2414" headers="d525692e2406 ">
                                       <p><code class="codeph">LOGFILENAME</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d525692e2414 d525692e2409 ">
                                       <p>指定要从此会话期间要分析的重做日志文件列表中删除的重做日志文件的名称。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D68D85E2-7AF3-4DBD-80DF-58A23ECABCD1__GUID-8018D14B-0B47-4638-8801-6000C48F6864">例外</p>
                        <div class="tblformal" id="GUID-D68D85E2-7AF3-4DBD-80DF-58A23ECABCD1__GUID-AD1CBC78-2919-4097-98F7-E1D818ED98E9">
                           <p class="titleintable">表96-14 REMOVE_LOGFILE过程异常</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REMOVE_LOGFILE过程异常" width="100%" border="1" summary="This table describes exceptions raised by the DBMS_LOGMNR.REMOVE_LOGFILE procedure." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d525692e2434">例外</th>
                                    <th align="left" valign="bottom" width="69%" id="d525692e2437">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e2442" headers="d525692e2434 ">
                                       <p><code class="codeph">ORA-01290</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e2442 d525692e2437 ">
                                       <p>无法删除未列出的日志文件</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-D68D85E2-7AF3-4DBD-80DF-58A23ECABCD1__GUID-E4A8770D-8D9A-404D-B98E-8EE09DF02AC3">使用说明</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>查询前<code class="codeph">V$LOGMNR_CONTENTS</code>视图，您必须对成功调用<code class="codeph">DBMS_LOGMNR.START_LOGMNR</code>程序（当前的LogMiner会话中）。
                              </p>
                           </li>
                           <li>
                              <p>如果您知道重做日志文件不包含任何感兴趣的数据，则可以使用此过程从重做日志文件列表中删除重做日志文件以供LogMiner处理。</p>
                           </li>
                           <li>
                              <p>可以通过重复调用此过程来删除多个重做日志文件。</p>
                           </li>
                           <li>
                              <p>不需要以任何特定顺序删除重做日志文件。</p>
                           </li>
                           <li>
                              <p>要启动新的重做日志文件列表以进行分析，请使用<code class="codeph">END_LOGMNR</code>过程结束当前LogMiner会话，然后使用<code class="codeph">ADD_LOGFILE</code>过程构建新列表。
                              </p>
                           </li>
                           <li>
                              <p>即使从列表中删除所有重做日志文件，您对<code class="codeph">ADD_LOGFILE</code>过程的任何后续调用也必须与已删除的重做日志文件的数据库ID和<code class="codeph">RESETLOGS</code> <code class="codeph">SCN</code>匹配。因此，要分析来自不同数据库（或具有不同数据库<code class="codeph">RESETLOGS</code> <code class="codeph">SCN</code>的数据库化身）的重做日志文件，而不是与当前重做日志文件列表关联的重做日志文件，请使用<code class="codeph">END_LOGMNR</code>过程结束当前的LogMiner会话，以及然后使用<code class="codeph">ADD_LOGFILE</code>过程构建一个新列表。
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66809"></a><a id="ARPLS66810"></a><a id="ARPLS66811"></a><a id="ARPLS66810"></a><a id="ARPLS66811"></a><a id="ARPLS66809"></a><div class="props_rev_3"><a id="GUID-160E5CF9-3430-4B45-9D2A-94BAFC5E68B0" name="GUID-160E5CF9-3430-4B45-9D2A-94BAFC5E68B0"></a><h4 id="ARPLS-GUID-160E5CF9-3430-4B45-9D2A-94BAFC5E68B0" class="sect4"><span class="enumeration_section">96.6.6</span> START_LOGMNR程序</h4>
                  <div>
                     <p>此过程通过加载LogMiner将用于将内部架构对象标识符转换为名称的字典来启动LogMiner。</p>
                     <div class="section">
                        <p>在CDB中，必须从根数据库调用<code class="codeph">START_LOGMNR</code>过程。您必须具有<code class="codeph">LOGMINING</code>管理权限才能使用此过程。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-160E5CF9-3430-4B45-9D2A-94BAFC5E68B0__GUID-1D4D85D9-3EB6-4720-8E51-2ADFB78F887E">句法</p><pre class="oac_no_warn" dir="ltr">DBMS_LOGMNR.START_LOGMNR（startScn IN NUMBER默认为0，endScn IN NUMBER默认为0，startTime IN DATE默认为'01 -jan-1988'，endTime IN DATE默认为'31 -dec-2110'，DictFileName IN VARCHAR2默认为''，选项IN BINARY_INTEGER默认0）;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-160E5CF9-3430-4B45-9D2A-94BAFC5E68B0__GUID-9F657A3F-9C6F-4E8F-BCD9-AE698CCF26DF">参数</p>
                        <div class="tblformal" id="GUID-160E5CF9-3430-4B45-9D2A-94BAFC5E68B0__GUID-FDBCA22D-7A42-43B9-AD66-A14EC5F23FD3">
                           <p class="titleintable">表96-15 START_LOGMNR过程参数</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="START_LOGMNR过程参数" width="100%" border="1" summary="This table describes the parameters of the DBMS_LOGMNR.START_LOGMNR subprogram." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="27%" id="d525692e2628">参数</th>
                                    <th align="left" valign="bottom" width="73%" id="d525692e2631">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d525692e2636" headers="d525692e2628 ">
                                       <p><code class="codeph">startScn</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d525692e2636 d525692e2631 ">
                                       <p>指示LogMiner仅返回SCN大于或等于指定的<code class="codeph">startScn</code>重做记录。如果没有包含指定<code class="codeph">startScn</code>值的重做日志文件， <code class="codeph">startScn</code> 。（您可以在<code class="codeph">V$LOGMNR_LOGS</code>视图中查询每个重做日志文件的<code class="codeph">FILENAME</code> ， <code class="codeph">LOW_SCN,</code>和<code class="codeph">NEXT_SCN</code>列，以确定每个重做日志文件中包含的SCN值的范围。）
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d525692e2663" headers="d525692e2628 ">
                                       <p><code class="codeph">endScn</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d525692e2663 d525692e2631 ">
                                       <p>指示LogMiner仅返回SCN小于或等于指定的<code class="codeph">endScn</code>重做记录。如果指定的<code class="codeph">endScn</code>值超出任何重做日志文件中的值，则LogMiner将使用包含最新更改的重做日志文件中的最大endScn值。（您可以在<code class="codeph">V$LOGMNR_LOGS</code>视图中查询每个重做日志文件的<code class="codeph">FILENAME,</code> <code class="codeph">LOW_SCN,</code>和<code class="codeph">NEXT_SCN</code>列，以确定每个重做日志文件中包含的SCN值的范围。）
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d525692e2690" headers="d525692e2628 ">
                                       <p><code class="codeph">开始时间</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d525692e2690 d525692e2631 ">
                                       <p>指示LogMiner仅返回时间戳大于或等于指定的<code class="codeph">startTime</code>重做记录。如果没有包含指定<code class="codeph">startTime</code>值的重做日志文件，则会失败。（您可以在<code class="codeph">V$LOGMNR_LOGS</code>视图中查询每个重做日志文件的<code class="codeph">FILENAME</code> ， <code class="codeph">LOW_TIME,</code>和<code class="codeph">HIGH_TIME</code>列，以确定每个重做日志文件中涵盖的时间范围。）
                                       </p>
                                       <p>如果指定了<code class="codeph">startScn</code>则忽略此参数。有关其他信息，请参阅使用说明。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d525692e2722" headers="d525692e2628 ">
                                       <p><code class="codeph">时间结束</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d525692e2722 d525692e2631 ">
                                       <p>指示LogMiner仅返回时间戳小于或等于指定的<code class="codeph">endTime</code>重做记录。如果指定的<code class="codeph">endTime</code>值超出任何重做日志文件中的值，则LogMiner将使用包含最新更改的重做日志文件中的最大<code class="codeph">endTime</code> 。您可以在V $ LOGMNR_LOGS视图中查询每个重做日志文件的<code class="codeph">FILENAME,</code> <code class="codeph">LOW_TIME,</code>和<code class="codeph">HIGH_TIME</code>列，以确定每个重做日志文件中涵盖的时间范围。）
                                       </p>
                                       <p>如果指定了<code class="codeph">endScn</code>则忽略此参数。有关其他信息，请参阅使用说明。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d525692e2754" headers="d525692e2628 ">
                                       <p><code class="codeph">DictFileName</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d525692e2754 d525692e2631 ">
                                       <p>指定包含LogMiner字典的平面文件。它用于重建<code class="codeph">V$LOGMNR_CONTENTS</code> <code class="codeph">SQL_REDO</code>和<code class="codeph">SQL_UNDO</code>列，以及完全转换<code class="codeph">SEG_NAME</code> ， <code class="codeph">SEG_OWNER</code> ， <code class="codeph">SEG_TYPE_NAME,</code> <code class="codeph">TABLE_NAME,</code>和<code class="codeph">TABLE_SPACE</code>列。必须指定LogMiner字典文件的标准路径名。（此文件必须事先通过创建<code class="codeph">DBMS_LOGMNR_D</code> 。 <code class="codeph">BUILD</code>过程。）
                                       </p>
                                       <p>仅当未指定<code class="codeph">DICT_FROM_REDO_LOGS</code>和<code class="codeph">DICT_FROM_ONLINE_CATALOG</code>才需要指定此参数。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="27%" id="d525692e2801" headers="d525692e2628 ">
                                       <p><code class="codeph">选项</code></p>
                                    </td>
                                    <td align="left" valign="top" width="73%" headers="d525692e2801 d525692e2631 ">
                                       <p><a href="DBMS_LOGMNR.html#GUID-41730EFC-C6CA-423E-834B-3E0E643346C3__CCHDBIGB" title="该表描述了DBMS_LOGMNR包的START_LOGMNR选项标志使用的常量。">见表96-2</a> 。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-160E5CF9-3430-4B45-9D2A-94BAFC5E68B0__GUID-722A24B8-2AFB-44D5-B480-935C006FC20B">例外</p>
                        <div class="tblformal" id="GUID-160E5CF9-3430-4B45-9D2A-94BAFC5E68B0__GUID-528110EF-FFEA-4398-8EEA-486357BDBF09">
                           <p class="titleintable">表96-16 START_LOGMNR过程异常</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="START_LOGMNR过程异常" width="100%" border="1" summary="This table describes exceptions raised by the START_LOGMNR procedure." frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d525692e2826">例外</th>
                                    <th align="left" valign="bottom" width="69%" id="d525692e2829">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e2834" headers="d525692e2826 ">
                                       <p><code class="codeph">ORA-01280</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e2834 d525692e2829 ">
                                       <p>遇到内部错误。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e2842" headers="d525692e2826 ">
                                       <p><code class="codeph">ORA-01281</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e2842 d525692e2829 ">
                                       <p><code class="codeph">startScn</code>或<code class="codeph">endScn</code>参数值不是有效的SCN，或者<code class="codeph">endScn</code>小于<code class="codeph">startScn</code> 。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e2861" headers="d525692e2826 ">
                                       <p><code class="codeph">ORA-01282</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e2861 d525692e2829 ">
                                       <p><code class="codeph">startTime</code>参数的值大于为<code class="codeph">endTime</code>参数指定的值，或者没有与使用<code class="codeph">startTime</code>和<code class="codeph">endTime</code>参数指定的日期范围兼容的重做日志文件。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e2881" headers="d525692e2826 ">
                                       <p><code class="codeph">ORA-01283</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e2881 d525692e2829 ">
                                       <p>指定的选项参数无效。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e2889" headers="d525692e2826 ">
                                       <p><code class="codeph">ORA-01284</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e2889 d525692e2829 ">
                                       <p><code class="codeph">DictFileName</code>参数中指定的LogMiner字典文件的完整路径长度大于256个字符，或者无法打开该文件。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e2900" headers="d525692e2826 ">
                                       <p><code class="codeph">ORA-01285</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e2900 d525692e2829 ">
                                       <p>读取指定文件时出错。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e2908" headers="d525692e2826 ">
                                       <p><code class="codeph">ORA-01291</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e2908 d525692e2829 ">
                                       <p>缺少满足用户请求的SCN或时间范围所需的重做日志文件。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e2916" headers="d525692e2826 ">
                                       <p><code class="codeph">ORA-01292</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e2916 d525692e2829 ">
                                       <p>没有为当前LogMiner会话指定日志文件。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e2924" headers="d525692e2826 ">
                                       <p><code class="codeph">ORA-01293</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e2924 d525692e2829 ">
                                       <p>指定LogMiner选项所需的已装入数据库。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e2932" headers="d525692e2826 ">
                                       <p><code class="codeph">ORA-01294</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e2932 d525692e2829 ">
                                       <p>处理指定字典文件中的信息时发生错误，可能存在损坏。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e2940" headers="d525692e2826 ">
                                       <p><code class="codeph">ORA-01295</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e2940 d525692e2829 ">
                                       <p>指定的LogMiner字典与生成正在分析的日志文件的数据库不对应。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e2949" headers="d525692e2826 ">
                                       <p><code class="codeph">ORA-01296</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e2949 d525692e2829 ">
                                       <p>指定的LogMiner字典和日志文件之间的字符集不匹配。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e2957" headers="d525692e2826 ">
                                       <p><code class="codeph">ORA-01297</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e2957 d525692e2829 ">
                                       <p>LogMiner字典和日志文件之间的重做版本不匹配。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e2965" headers="d525692e2826 ">
                                       <p><code class="codeph">ORA-01299</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e2965 d525692e2829 ">
                                       <p>指定的LogMiner字典对应于不同的数据库化身。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d525692e2973" headers="d525692e2826 ">
                                       <p><code class="codeph">ORA-01300</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d525692e2973 d525692e2829 ">
                                       <p>指定LogMiner选项所需的可写数据库。</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-160E5CF9-3430-4B45-9D2A-94BAFC5E68B0__GUID-85D064B4-871A-468F-B8C9-5FAF55660E38">使用说明</p>
                        <div class="infoboxnote" id="GUID-160E5CF9-3430-4B45-9D2A-94BAFC5E68B0__THECONTINUOUS_MINEOPTIONFORTHEDBMS_-047EB5D9">
                           <p class="notep1">注意：</p>Oracle Database 19c（19.1）中不支持<code class="codeph">dbms_logmnr.start_logmnr</code>软件包的<code class="codeph">continuous_mine</code>选项，该选项不再可用。
                        </div>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>LogMiner可以使用先前提取到重做日志文件或平面文件的字典，或者如果LogMiner从源系统挖掘数据，则可以指定LogMiner使用在线目录。</p>
                           </li>
                           <li>
                              <p>执行<code class="codeph">START_LOGMNR</code>过程后，您可以查询以下视图：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><code class="codeph">V$LOGMNR_CONTENTS</code> - 包含重做日志文件中的信息历史记录</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">V$LOGMNR_DICTIONARY</code> - 包含有关提取到平面文件的LogMiner词典文件的当前信息</p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">V$LOGMNR_PARAMETERS</code> - 包含有关LogMiner会话的信息</p>
                                 </li>
                              </ul>
                              <p>（您可以在将重做日志文件列表添加到LogMiner要挖掘的文件列表后查询<code class="codeph">V$LOGMNR_LOGS</code>视图。）
                              </p>
                           </li>
                           <li>
                              <p>调用<code class="codeph">DBMS_LOGMNR.START_LOGMNR</code>参数和选项不是持久的。每次调用<code class="codeph">DBMS_LOGMNR.START_LOGMNR</code>必须指定所有需要的参数和选项（包括SCN和时间范围） <code class="codeph">DBMS_LOGMNR.START_LOGMNR</code></p>
                           </li>
                           <li>
                              <p>请注意，使用时间戳指定重做日志文件并不精确。</p>
                           </li>
                           <li>
                              <p>关于开始和结束时间或SCN范围，请记住以下几点：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>如果既未指定<code class="codeph">startTime</code>也未指定<code class="codeph">startScn</code>参数，则LogMiner将设置<code class="codeph">startScn</code>参数以使用包含最旧更改的重做日志文件中的最低SCN值。
                                    </p>
                                 </li>
                                 <li>
                                    <p>如果同时指定时间和SCN值，LogMiner将使用SCN值或忽略时间值。</p>
                                 </li>
                                 <li>
                                    <p>如果指定了起始和结束时间或SCN值，并且它们位于LogMiner重做日志文件列表中，则LogMiner将挖掘由这些值指示的日志。</p>
                                 </li>
                                 <li>
                                    <p>如果指定了不在LogMiner重做日志文件列表中的开始和结束时间或SCN值，并指定了<code class="codeph">DBMS_LOGMNR.START_LOGMNR</code> ，则指定：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p>对于<code class="codeph">startTime</code>或<code class="codeph">startScn</code>值为<code class="codeph">0</code> ，则LogMiner重做日志文件列表中的最低SCN将用作<code class="codeph">startScn</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">startTime</code>或<code class="codeph">startScn</code>值的非零数字，然后返回错误</p>
                                       </li>
                                       <li>
                                          <p>对于<code class="codeph">endTime</code>或<code class="codeph">endScn</code>值为<code class="codeph">0</code>或非零数字，则LogMiner重做日志文件列表中的最高SCN将用作<code class="codeph">endScn</code></p>
                                       </li>
                                    </ul>
                                 </li>
                                 <li>
                                    <p>如果指定了开始和结束时间或SCN值，并且在LogMiner重做日志文件列表中找不到它们，并指定了<code class="codeph">DBMS_LOGMNR.START_LOGMNR</code> ，则指定：</p>
                                    <ul style="list-style-type:disc">
                                       <li>
                                          <p><code class="codeph">0</code>表示<code class="codeph">startTime</code>或<code class="codeph">startScn</code>值，然后返回错误。
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">startTime</code>或<code class="codeph">startScn</code>值大于数据库的归档重做日志文件中的任何值，然后LogMiner开始在联机重做日志文件中进行挖掘。LogMiner将继续处理联机重做日志文件，直到它在从<code class="codeph">V$LOGMNR_CONTENTS</code>视图返回行之前发现或超出请求的起始点。
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">endTime</code>或<code class="codeph">endScn</code>参数值，指示将来的时间或SCN，然后LogMiner在其挖掘时包含联机重做日志文件。查询<code class="codeph">V$LOGMNR_CONTENTS</code>视图时，将在对数据库进行更改时从此视图返回行，并且在LogMiner看到超出请求的结束点的更改之前不会停止。
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">0</code>的<code class="codeph">endTime</code>或<code class="codeph">endScn</code>参数值，然后LogMiner的包括联机重做日志文件时，它的地雷。查询<code class="codeph">V$LOGMNR_CONTENTS</code>视图时，将在对数据库进行更改时从此视图返回行，并且在您输入CTL + C或终止PL / SQL游标之前不会停止。
                                          </p>
                                       </li>
                                    </ul>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
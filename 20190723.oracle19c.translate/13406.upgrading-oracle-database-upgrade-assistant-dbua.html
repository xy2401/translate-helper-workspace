<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="Database Upgrade Assistant (DBUA) provides a graphical user interface to guide you through the upgrade of Oracle Database. DBUA works for CDB and non-CDB database systems."></meta>
      <meta name="description" content="Database Upgrade Assistant (DBUA) provides a graphical user interface to guide you through the upgrade of Oracle Database. DBUA works for CDB and non-CDB database systems."></meta>
      <title>使用Oracle数据库升级助手（DBUA）进行升级</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Database Upgrade Guide"></meta>
      <meta property="og:description" content="Database Upgrade Assistant (DBUA) provides a graphical user interface to guide you through the upgrade of Oracle Database. DBUA works for CDB and non-CDB database systems."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Database Upgrade Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="database-upgrade-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-04-25T08:26:31-07:00"></meta>
      <meta name="dcterms.title" content="Database Upgrade Guide"></meta>
      <meta name="dcterms.dateCopyrighted" content="1996, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96252-05"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="upgrading-parallel-upgrade-utility-catctl-pl.html" title="Previous" type="text/html"></link>
      <link rel="next" href="upgrade-scenarios-non-cdb-oracle-databases.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="UPGRD"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="upgrading-parallel-upgrade-utility-catctl-pl.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="upgrade-scenarios-non-cdb-oracle-databases.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">数据库升级指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="upgrading-oracle-database.html" property="item" typeof="WebPage"><span property="name">升级Oracle数据库</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">使用Oracle数据库升级助手（DBUA）进行升级</li>
            </ol>
            <a id="GUID-BBF591A5-EB02-405A-9F99-572429838C73" name="GUID-BBF591A5-EB02-405A-9F99-572429838C73"></a><a id="UPGRD105"></a>
            
            <h2 id="UPGRD-GUID-BBF591A5-EB02-405A-9F99-572429838C73" class="sect2">使用Oracle数据库升级助手（DBUA）进行升级</h2>
         </header>
         <div class="ind">
            <div>
               <p>数据库升级助手（DBUA）提供图形用户界面，指导您完成Oracle数据库的升级。DBUA适用于CDB和非CDB数据库系统。</p>
               <div class="infoboxnote" id="GUID-BBF591A5-EB02-405A-9F99-572429838C73__GUID-9D6A6600-CD13-4A5C-99AE-334C4DD0EB43">
                  <p class="notep1">注意：</p>
                  <p>您可以在静默模式下启动DBUA，该模式不提供用户界面。静默模式对于大型扩展和脚本非常有用。</p>
               </div>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-04161A85-6A67-4404-B7A7-69A3713C5F99">使用DBUA的建议</a><br>查看此主题以使用数据库升级助手（DBUA）进行多租户架构和非CDB Oracle数据库升级。
                  </li>
                  <li class="ulchildlink"><a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-A10C2BBB-F884-4BD3-A8EA-3A8E48029E2E">关于升级时停止DBUA</a><br>如果停止DBUA，则必须手动完成升级。</li>
                  <li class="ulchildlink"><a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-0F7FD8A1-4615-46EA-8083-E565CB450EAA">DBUA如何处理Oracle数据库的升级</a><br>您可以将DBUA作为数据库软件安装的一部分启动，也可以在安装软件后手动启动它。
                  </li>
                  <li class="ulchildlink"><a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-8BDDF859-1638-45AC-824D-78FC8154847C">DBUA启动的升级脚本</a><br>在升级期间，DBUA会自动运行相应的升级脚本以自动升级并最大限度地减少停机时间。
                  </li>
                  <li class="ulchildlink"><a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-307DACD9-ECEE-4079-B767-B22620B99900">使用DBUA在Linux，Unix和Windows系统上升级数据库</a><br>要使用DBUA图形用户界面升级数据库，请在新的Oracle主目录中执行这些步骤。
                  </li>
                  <li class="ulchildlink"><a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-F929338D-48EE-434F-A5F9-A9E7CD61B17F">从现有Oracle主目录移动数据库</a><br>使用此过程将Oracle数据库迁移到另一个Oracle Database 18c或更高版本的主目录。
                  </li>
                  <li class="ulchildlink"><a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-25EB7D5A-284E-4A39-85E2-640DE452AC57">在无提示模式下使用DBUA升级Oracle数据库</a><br>您可以使用<code>-silent</code>命令行选项DBUA使用DBUA执行非交互（“静默”）升级。</li>
               </ul>
               <div class="relinfo">
                  <p><strong>相关话题</strong></p>
                  <ul>
                     <li><a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-25EB7D5A-284E-4A39-85E2-640DE452AC57" title="您可以使用-silent命令行选项DBUA使用DBUA执行非交互（“静默”）升级。">在无提示模式下使用DBUA升级Oracle数据库</a></li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="upgrading-oracle-database.html#GUID-CC88F262-3370-4FFA-8604-EDA9F20F56D9" title="Oracle提供了一套全面的工具，用于以最短的停机时间升级Oracle数据库，以及将应用程序迁移到新版本。">升级Oracle数据库</a></p>
                  </div>
               </div>
            </div><a id="UPGRD52727"></a><div class="props_rev_3"><a id="GUID-04161A85-6A67-4404-B7A7-69A3713C5F99" name="GUID-04161A85-6A67-4404-B7A7-69A3713C5F99"></a><h3 id="UPGRD-GUID-04161A85-6A67-4404-B7A7-69A3713C5F99" class="sect3">使用DBUA的建议</h3>
               <div>
                  <p>查看此主题以使用数据库升级助手（DBUA）进行多租户架构和非CDB Oracle数据库升级。</p>
                  <p>您可以使用DBUA升级多租户架构容器数据库（CDB），可插拔数据库（PDB）和非CDB数据库。过程是相同的，但您必须做出的选择和DBUA的行为是不同的，具体取决于升级类型：</p>
                  <div class="infoboxnote" id="GUID-04161A85-6A67-4404-B7A7-69A3713C5F99__GUID-1CCC8017-B87A-4886-A797-25EDF0EAAA25">
                     <p class="notep1">注意：</p>
                     <p>从Oracle Database 12 <span class="italic">c</span> （第1版（12.1））开始，不推荐使用非CDB体系结构。它可以在将来的版本中得到支持。
                     </p>
                  </div>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>对于所有升级，在使用DBUA升级系统之前，Oracle强烈建议您手动运行升级前信息工具。DBUA运行升级前信息工具，作为在开始升级之前执行的先决条件检查的一部分。但是，为了减少停机时间，Oracle建议您在升级计划中运行升级前信息工具，以便分析数据库，并在计划的升级日期之前采取主动措施。</p>
                     </li>
                     <li>
                        <div class="p">要使用有保证的还原点，请确保在升级期间启用了数据库ARCHIVE LOG和FLASHBACK模式。您可以通过输入以下SQL命令来确认它们已启用：<pre class="pre codeblock"><code>SQL&gt;从v $ database中选择log_mode，flashback_on;</code></pre></div>
                     </li>
                     <li>
                        <p>如果数据库实例未运行，则DBUA会尝试启动该实例。如果实例已启动并正在运行，则DBUA将连接到该实例。</p>
                     </li>
                     <li>
                        <p>如果手动还原数据库（不使用DBUA），则在启动DBUA之前，删除<code class="codeph">Welcome_</code> <span class="variable" translate="no">SID</span> <code class="codeph">.txt</code>文件，该文件位于<code class="codeph"><span class="variable" translate="no">ORACLE_HOME</span> /cfgtoollogs/dbua/logs/</code> 。如果DBUA找到此文件，则DBUA将在重新运行操作中启动。
                        </p>
                     </li>
                     <li>
                        <p>还原脚本通常使您能够将数据库（非CDB单实例，高可用性或Oracle RAC）还原到早期版本和早期Oracle主目录位置。但是，如果已使用Oracle Internet Directory（OID）注册数据库，则还原脚本无法取消注册Oracle Internet Directory。您必须以授权用户身份登录，并手动取消注册更高版本的数据库。</p>
                     </li>
                     <li>
                        <p>如果启用了Oracle Database Vault，请在本文档中查看“升级使用Oracle Database Vault的Oracle数据库的要求”。</p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-04161A85-6A67-4404-B7A7-69A3713C5F99__GUID-7C229766-ACAD-45F2-AAA7-F5286FF58892">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../multi/introduction-to-the-multitenant-architecture.html#CNCPT89234" target="_blank"><span><cite>Oracle数据库概念</cite></span></a> ，提供了使用CDB和PDB的概述和文档路线图</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-BBF591A5-EB02-405A-9F99-572429838C73" title="数据库升级助手（DBUA）提供图形用户界面，指导您完成Oracle数据库的升级。DBUA适用于CDB和非CDB数据库系统。">使用Oracle数据库升级助手（DBUA）进行升级</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD60156"></a><div class="props_rev_3"><a id="GUID-A10C2BBB-F884-4BD3-A8EA-3A8E48029E2E" name="GUID-A10C2BBB-F884-4BD3-A8EA-3A8E48029E2E"></a><h3 id="UPGRD-GUID-A10C2BBB-F884-4BD3-A8EA-3A8E48029E2E" class="sect3">关于升级时停止DBUA</h3>
               <div>
                  <p>如果停止DBUA，则必须手动完成升级。</p>
                  <p>如果停止升级但不还原数据库，则无法继续使用DBUA进行升级。您必须使用手动（命令行）升级过程继续升级。除非还原数据库，否则无法返回到原始Oracle数据库服务器。</p>
                  <p></p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="manual-upgrade-scenarios-multitenant-architecture-oracle-databases.html#GUID-7E127507-D2F5-4771-A8A9-BAF6E553831B">手动升级多租户容器Oracle数据库（CDB）</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-BBF591A5-EB02-405A-9F99-572429838C73" title="数据库升级助手（DBUA）提供图形用户界面，指导您完成Oracle数据库的升级。DBUA适用于CDB和非CDB数据库系统。">使用Oracle数据库升级助手（DBUA）进行升级</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="UPGRD52728"></a><div class="props_rev_3"><a id="GUID-0F7FD8A1-4615-46EA-8083-E565CB450EAA" name="GUID-0F7FD8A1-4615-46EA-8083-E565CB450EAA"></a><h3 id="UPGRD-GUID-0F7FD8A1-4615-46EA-8083-E565CB450EAA" class="sect3">DBUA如何处理Oracle数据库的升级</h3>
               <div>
                  <p>您可以将DBUA作为数据库软件安装的一部分启动，也可以在安装软件后手动启动它。</p>
                  <p>如果安装新的Oracle数据库软件，并指定要升级现有Oracle数据库，则DBUA会自动启动。您也可以在安装完成后单独启动DBUA。</p>
                  <p>升级过程中，DBUA会显示每个组件的升级进度。DBUA编写详细的跟踪和日志文件，并生成完整的HTML报告供以后参考。为了增强安全性，DBUA会自动锁定已升级数据库中的新用户帐户。然后，DBUA继续在新的Oracle主目录中创建新的配置文件（参数和侦听器文件）。</p>
                  <p>在完成所有升级前步骤之前，DBUA不会开始升级过程。</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="rerunning-upgrades-oracle-database.html#GUID-190D00A4-BE9A-4139-B3FC-A29C2BFBE91B">重新启动Oracle数据库升级</a></li>
                        <li><a href="tasks-to-prepare-for-oracle-database-upgrades.html#GUID-3C319260-B5CD-4C50-B606-36D060FDF0BE">准备Oracle数据库升级的任务</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-BBF591A5-EB02-405A-9F99-572429838C73" title="数据库升级助手（DBUA）提供图形用户界面，指导您完成Oracle数据库的升级。DBUA适用于CDB和非CDB数据库系统。">使用Oracle数据库升级助手（DBUA）进行升级</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="UPGRD52730"></a><div class="props_rev_3"><a id="GUID-8BDDF859-1638-45AC-824D-78FC8154847C" name="GUID-8BDDF859-1638-45AC-824D-78FC8154847C"></a><h3 id="UPGRD-GUID-8BDDF859-1638-45AC-824D-78FC8154847C" class="sect3">DBUA启动的升级脚本</h3>
               <div>
                  <p>在升级期间，DBUA会自动运行相应的升级脚本以自动升级并最大限度地减少停机时间。</p>
                  <p></p>
                  <p>在先决条件阶段，DBUA运行升级前信息工具脚本，并使用以下逻辑来修改或创建新的必需表空间：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果数据文件是可自动扩展的并且有足够的磁盘空间来增长，那么DBUA将继续升级。</p>
                     </li>
                     <li>
                        <p>如果数据文件不是可自动扩展的，则DBUA会提示您并使文件可自动扩展。</p>
                     </li>
                     <li>
                        <p>如果表空间是可自动扩展的并且需要调整<code class="codeph">MAXSIZE</code>初始化参数，则DBUA会提示您进行此调整，并调整<code class="codeph">MAXSIZE</code>参数。
                        </p>
                     </li>
                     <li>
                        <p>如果没有足够的磁盘空间来增长，则DBUA会通过添加更多数据文件来提示您创建空间。DBUA不会自动添加新数据文件，因为DBUA无法确定创建文件的位置。</p>
                     </li>
                  </ul>
                  <p>DBUA解决了在前提阶段发现的许多问题。例如，DBUA可以确保使用正确的时区文件，并对网络访问控制列表进行ACL调整。</p>
                  <p>在升级阶段，DBUA运行<code class="codeph">catctl.pl</code> ，它以并行方式而不是串行方式运行升级过程。并行运行可优化CPU资源的利用率，从而加速升级并最大限度地减少停机时间。
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-BBF591A5-EB02-405A-9F99-572429838C73" title="数据库升级助手（DBUA）提供图形用户界面，指导您完成Oracle数据库的升级。DBUA适用于CDB和非CDB数据库系统。">使用Oracle数据库升级助手（DBUA）进行升级</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD52860"></a><div class="props_rev_3"><a id="GUID-307DACD9-ECEE-4079-B767-B22620B99900" name="GUID-307DACD9-ECEE-4079-B767-B22620B99900"></a><h3 id="UPGRD-GUID-307DACD9-ECEE-4079-B767-B22620B99900" class="sect3">使用DBUA在Linux，Unix和Windows系统上升级数据库</h3>
               <div>
                  <p>要使用DBUA图形用户界面升级数据库，请在新的Oracle主目录中执行这些步骤。</p>
                  <p>在Microsoft Windows系统（Windows）上，将DBUA作为Oracle数据库管理用户（具有操作系统分配的<code class="codeph">ORA_DBA</code>角色的用户）或Oracle安装所有者帐户运行。
                  </p>
                  <ol id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__OL_YND_2LF_WFB">
                     <li>
                        <p>从安装了新数据库软件的Oracle主目录启动Oracle数据库升级助手（DBUA）。<code>dbua</code>可执行文件位于目录路径<code><span class="variable" translate="no">ORACLE_HOME</span> /bin</code> 。
                        </p>
                        <ul id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__UL_ZND_2LF_WFB" style="list-style-type:disc">
                           <li>
                              <p>在Linux或Unix平台上，以具有SYSDBA权限的用户身份登录，并在Oracle数据库19c的新主目录中的系统提示符处输入以下命令：</p><pre class="pre codeblock"><code>./dbua</code></pre></li>
                           <li>
                              <p>在Windows操作系统上，依次选择“ <span class="uicontrol bold">开始”</span> ，“ <span class="uicontrol bold">程序”</span> ，“ <span class="uicontrol bold">Oracle <span class="variable" translate="no">HOME_NAME</span></span> ，“ <span class="uicontrol bold">配置和迁移工具”</span> ，然后选择“ <span class="uicontrol bold">数据库升级助手”</span> 。
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>将显示“ <span class="wintitle">选择数据库”</span>窗口如果您之前已发布Oracle数据库安装，则会列出这些安装可用于升级。
                        <div class="figure" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__FIG_GWQ_4KJ_SFB"><img id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__IMAGE_QY2_TKJ_SFB" src="img/dbua_1.png" alt="下面是dbua_1.png的描述" title="下面是dbua_1.png的描述" longdesc="img_text/dbua_1.html"><br><a href="img_text/dbua_1.html">说明dbua_1.png的说明</a></div>
                        <!-- class="figure" -->
                        <p>如果您在任何DBUA窗口上需要帮助，或者如果您想查阅有关DBUA的更多文档，请单击“ <span class="uicontrol bold">帮助”</span>以打开联机帮助。
                        </p>
                        <p>如果需要，请输入所选数据库的SYSDBA用户名和密码。</p>
                        <p>如果从没有<code class="codeph">SYSDBA</code>权限的用户帐户运行DBUA，或者源数据库没有操作系统身份验证，则必须输入用户名和密码凭据才能为所选数据库启用<code class="codeph">SYSDBA</code>权限。如果您使用的用户帐户具有SYSDBA权限，或者您使用了操作系统身份验证，则无需输入用户名和密码。
                        </p>
                        <p>选择后单击“ <span class="uicontrol bold">下一步”</span> 。
                        </p>
                        <div class="infoboxnote" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__GUID-9A3BD702-6F5A-48BD-9F1F-72AF1AA0EF4E">
                           <p class="notep1">注意：</p>
                           <ul id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__UL_A4D_2LF_WFB" style="list-style-type:disc">
                              <li>
                                 <p>您一次只能选择一个数据库。</p>
                              </li>
                              <li>
                                 <p>对于单实例升级，如果数据库未出现在列表中，则检查<code>/etc/oratab</code>存在具有数据库名称的条目。如果未在此列出数据库，则指示DBUA升级特定数据库：</p>
                                 <ul id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__UL_B4D_2LF_WFB" style="list-style-type:disc">
                                    <li>
                                       <p>如果您的单实例数据库未在<code class="codeph">/etc/oratab</code>列出，并且DBUA可以连接到数据库，那么您可以通过使用命令行参数<code class="codeph">-sid <span class="variable" translate="no">Oracle_SID</span></code> ， <code class="codeph">-oracleHome <span class="variable" translate="no">Oracle_home</span> , and <code class="codeph">sysDBAPassword <span class="variable" translate="no">password</span></code></code>启动DBUA来指示DBUA显式升级该数据库<code class="codeph">-oracleHome <span class="variable" translate="no">Oracle_home</span> , and <code class="codeph">sysDBAPassword <span class="variable" translate="no">password</span></code></code>作为命令行参数。例如：</p><pre class="pre codeblock"><code>dbua -sid <span class="variable" translate="no">Oracle_SID</span> -oracleHome /u01/app/oracle/18.1.0/dbhome1 -sysDBAUserName SYS -sysDBAPassword <span class="variable" translate="no">password</span></code></pre></li>
                                 </ul>
                              </li>
                              <li>
                                 <div class="p">如果您的帐户没有SYSDBA权限，或者您没有设置操作系统身份验证，则可以使用以下语法进行连接，其中<code class="codeph"><span class="variable" translate="no">mydb</span></code>是您的Oracle数据库SID， <code class="codeph"><span class="variable" translate="no">username</span></code>是具有SYSDBA权限的用户名， <code class="codeph"><span class="variable" translate="no">password</span></code>是用户名的密码：<pre class="pre codeblock"><code>dbua -sid <span class="variable" translate="no">mydb</span> -oracleHome /u01/app/oracle/18.1.0/dbhome1 -sysDBAUserName  - <span class="variable" translate="no">username</span> -sysDBAPassword  - <span class="variable" translate="no">password</span></code></pre></div>
                              </li>
                              <li>
                                 <p>Oracle Real Application Clusters（Oracle RAC）升级：如果数据库未出现在列表中，请输入以下<code class="codeph">crsctl</code>命令以检查Oracle RAC实例：</p>
                                 <p><code class="codeph">crsctl status resource -t</code></p>
                                 <p>您还可以输入以下命令来检查特定的Oracle RAC数据库，其中<code class="codeph"><span class="variable" translate="no">db_name</span></code>是Oracle RAC数据库名称：</p>
                                 <p><code class="codeph">crsctl status resource ora。 <span class="variable" translate="no">db_name</span> .db</code></p>
                              </li>
                              <li>
                                 <p>在Microsoft Windows上，以下安全更改会影响身份验证和用户帐户：</p>
                                 <ul id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__UL_C4D_2LF_WFB" style="list-style-type:disc">
                                    <li>
                                       <p>出于安全原因，不再支持使用NTLM协议的Windows NTS身份验证。Kerberos身份验证是唯一受支持的身份验证。在此版本中，NTS在Windows NT域或Windows NT控制器的域中不起作用。</p>
                                    </li>
                                    <li>
                                       <p>Oracle使用标准Microsoft Windows用户帐户而不是Windows <code class="codeph">LocalSystem</code>帐户来运行Oracle数据库服务。减少Oracle安装所有者的帐户访问权限可在Microsoft Windows上提供更好的安全性。
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li>
                        <p>如果所选数据库是多租户容器数据库（CDB），则DBUA将显示“ <span class="wintitle">可插拔数据库”</span>窗口。“ <span class="wintitle">可插拔数据库”</span>窗口列出了CDB中包含的可插拔数据库。列出的PDB将作为所选CDB升级的一部分进行升级。</p>
                        <div class="figure" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__GUID-67555BED-FD39-47A0-A127-2C7900FD17BD"><img id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__IMAGE_E3Q_ZNJ_SFB" src="img/dbua_2.png" alt="下面是dbua_2.png的描述" title="下面是dbua_2.png的描述" longdesc="img_text/dbua_2.html"><br><a href="img_text/dbua_2.html">说明dbua_2.png的描述</a></div>
                        <!-- class="figure" -->
                        <p>您可以选择PDB的升级优先级。单击每个PDB的优先级列，然后输入升级优先级的数值，其中1先升级，2升级第二，依此类推。</p>
                        <p>默认情况下， <code class="codeph">CDB$ROOT</code> ， <code class="codeph">PDB$SEED</code>以及插入CDB的所有PDB都会升级。如果您现在不想升级某些PDB，请拔下这些PDB。
                        </p>
                        <p>完成选择PDB和升级优先级后，单击“ <span class="uicontrol bold">下一步”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>仅限Windows平台：如果升级目标主目录是与Oracle主目录用户关联的安全主目录，则会打开“ <span class="wintitle">指定Oracle主目录用户密码”</span>窗口。对于其他平台，请继续执行下一步。
                        </p>
                        <div class="figure" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__GUID-5A3948CA-F65D-4F9A-87E7-66E82E7A9DDD"><img id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__IMAGE_TZT_M42_TFB" src="img/dbua3a-win.png" alt="下面是dbua3a-win.png的描述" title="下面是dbua3a-win.png的描述" longdesc="img_text/dbua3a-win.html"><br><a href="img_text/dbua3a-win.html">说明dbua3a-win.png的描述</a></div>
                        <!-- class="figure" -->
                        <p>提供Oracle主用户名，并提供此用户帐户的密码，然后单击“ <span class="uicontrol bold">下一步”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>将打开“ <span class="wintitle">先决条件检查”</span>窗口。DBUA分析数据库，执行预升级检查并根据需要显示警告。以下是DBUA检查的示例列表，以及DBUA对数据库执行的操作的列表：</p>
                        <ul id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__UL_D4D_2LF_WFB" style="list-style-type:disc">
                           <li>
                              <p>空数据库回收站。</p>
                           </li>
                           <li>
                              <p>识别无效对象。</p>
                           </li>
                           <li>
                              <p>识别已弃用和不支持的初始化参数。</p>
                           </li>
                           <li>
                              <p>确定时区数据文件版本。</p>
                           </li>
                        </ul>
                        <p>分析需要几分钟才能完成。</p>
                        <p>当DBUA完成其分析时，将再次显示“ <span class="wintitle">先决条件检查”</span>窗口，显示检查结果。
                        </p>
                        <div class="figure" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__GUID-24158971-D20A-4D41-B274-01DF86FF4EA8"><img id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__IMAGE_O3D_RPJ_SFB" src="img/dbua_3.png" alt="下面是dbua_3.png的描述" title="下面是dbua_3.png的描述" longdesc="img_text/dbua_3.html"><br><a href="img_text/dbua_3.html">说明dbua_3.png的描述</a></div>
                        <!-- class="figure" -->
                        <p>“ <span class="wintitle">先决条件检查”</span>窗口显示DBUA已完成的检查以及发现的任何错误的严重性。当DBUA发现错误时，它指示哪些错误是可修复的，以及您可以采取哪些操作来纠正错误。
                        </p>
                        <p>如果出现DBUA可以修复的任何错误， <span class="uicontrol bold">请</span>选择“ <span class="uicontrol bold">修复并再次检查”</span> 。
                        </p>
                        <p>如果DBUA检测到无法纠正的错误， <span class="uicontrol bold">请</span>手动修复错误原因，然后选择“ <span class="uicontrol bold">再次检查”</span> 。
                        </p>
                        <p>如果DBUA没有发现错误或警告，则DBUA会自动绕过此窗口并进入下一个窗口。</p>
                        <p>修复检测到的错误后，单击“ <span class="uicontrol bold">下一步”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>将显示“ <span class="wintitle">选择升级选项”</span>窗口。
                        </p>
                        <div class="figure" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__GUID-80053CDF-0A36-4BFA-A3F4-CE9B177FDCF5"><img id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__IMAGE_PZH_4QJ_SFB" src="img/dbua_4.png" alt="下面是dbua_4.png的描述" title="下面是dbua_4.png的描述" longdesc="img_text/dbua_4.html"><br><a href="img_text/dbua_4.html">说明dbua_4.png的描述</a></div>
                        <!-- class="figure" -->
                        <p>该窗口提供以下选项：</p>
                        <p><span class="uicontrol bold">启用并行升级</span></p>
                        <p>如果要在升级过程中启用并行性，请选择此选项。并行运行升级过程可根据可用于同时处理脚本和进程运行的CPU数量，减少执行升级所需的时间。</p>
                        <p><span class="uicontrol bold">在升级后重新编译无效对象</span></p>
                        <p>升级完成后，此选项将重新编译所有无效的PL / SQL模块。如果在升级后阶段没有DBUA重新编译无效对象，则必须在升级数据库后手动重新编译无效对象。</p>
                        <p><span class="uicontrol bold">升级时区数据</span></p>
                        <p>此选项更新此版本的时区数据文件。如果未选择此选项，则必须在升级后手动更新时区配置文件。</p>
                        <p><span class="uicontrol bold">指定要执行的自定义SQL脚本</span> 。
                        </p>
                        <p>如果要在升级过程中运行自定义SQL脚本，请选择此选项。根据需要，单击“ <span class="uicontrol bold">浏览”</span>以获取“ <span class="uicontrol bold">升级前”</span>或“ <span class="uicontrol bold">升级后”</span>输入字段。导航到自定义SQL脚本所在的位置。
                        </p>
                        <p>完成选择后，单击“ <span class="uicontrol bold">下一步”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>将出现“ <span class="wintitle">选择恢复选项”</span>窗口。要在升级期间发生故障时恢复数据库，请从以下选项之一中进行选择：</p>
                        <ul id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__UL_E4D_2LF_WFB" style="list-style-type:disc">
                           <li>
                              <p><span class="uicontrol bold">使用闪回和保证还原点</span> 。
                              </p>
                              <p>您可以创建新的保证还原点，也可以使用现有的还原点。如果使用现有还原点，则单击选择域以选择要使用的还原点。</p>
                              <div class="infoboxnote" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__GUID-8D48FEDD-7742-4B20-87BA-AF4C9D69B90D">
                                 <p class="notep1">注意：</p>
                                 <p>如果要升级的数据库具有Oracle Data Guard物理备用数据库，则必须先在每个备用数据库上创建保证还原点，然后才能在主数据库上创建一个备用数据库。如果不首先在每个备用数据库上创建还原点，则必须在使用保证还原点降级主数据库后再次重新创建所有备用数据库。升级成功后，您必须手动删除备用数据库上所有保证还原点。</p>
                              </div>
                           </li>
                           <li>
                              <p><span class="uicontrol bold">使用RMAN备份</span></p>
                              <p>您可以创建新的脱机RMAN备份，也可以使用现有备份。单击“ <span class="uicontrol bold">浏览”</span>以指定备份的路径。
                              </p>
                           </li>
                           <li>
                              <p><span class="uicontrol bold">使用最新可用的RMAN备份</span></p>
                              <p>您可以使用现有备份。单击“ <span class="uicontrol bold">查看/编辑还原脚本”</span>以选择要使用的备份。
                              </p>
                           </li>
                           <li>
                              <p><span class="uicontrol bold">我有自己的备份和恢复策略</span> 。
                              </p>
                              <p>仅当您具有适用于现有数据库的第三方备份解决方案时，才选择此选项。</p>
                           </li>
                        </ul>
                        <p>完成选择后，单击“ <span class="uicontrol bold">下一步”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>对于单实例数据库安装，将打开“ <span class="wintitle">配置网络”</span>窗口。从源Oracle主目录中选择一个或多个要迁移到新升级的Oracle主目录的侦听器，或在安装期间创建新的侦听器。
                        </p>
                        <div class="figure" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__GUID-C2DC7C5D-4369-436A-BA18-4CECA2AD2FDC"><img id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__IMAGE_EMT_FSJ_SFB" src="img/dbua_6.png" alt="下面是dbua_6.png的描述" title="下面是dbua_6.png的描述" longdesc="img_text/dbua_6.html"><br><a href="img_text/dbua_6.html">说明dbua_6.png的描述</a></div>
                        <!-- class="figure" -->
                        <p>“网络配置”窗口的“侦听器选择”区域显示包含以下列的表：</p>
                        <ul id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__UL_F4D_2LF_WFB" style="list-style-type:disc">
                           <li>
                              <p>选择列。选择要更新的侦听器。</p>
                           </li>
                           <li>
                              <p><span class="uicontrol bold">名称</span>此列显示侦听器名称。
                              </p>
                           </li>
                           <li>
                              <p><span class="uicontrol bold">端口</span>此列显示配置侦听器的端口。
                              </p>
                           </li>
                           <li>
                              <p><span class="uicontrol bold">Oracle Home</span>此列显示配置了侦听器的Oracle主目录。
                              </p>
                           </li>
                           <li>
                              <p><span class="uicontrol bold">状态</span>此列显示侦听器状态（向上或向下）。
                              </p>
                           </li>
                           <li>
                              <p><span class="uicontrol bold">迁移</span>选择此列，然后选择“ <kbd class="userinput">是”</kbd>以进行迁移，或者选择<kbd class="userinput">“</kbd> <kbd class="userinput">否”（</kbd>如果您不想迁移）。
                              </p>
                           </li>
                        </ul>
                        <p>您还可以选择创建新的侦听器。如果创建新侦听器，则提供侦听器名称，要放置的Oracle主目录以及要配置侦听器要监视的端口。</p>
                        <p>做出选择后，DBUA会为您迁移的所有侦听器完成以下步骤：</p>
                        <ol type="a" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__OL_G4D_2LF_WFB">
                           <li>
                              <p>DBUA将选定的侦听器添加到目标Oracle主目录的<code>listener.ora</code>文件中，然后启动它。
                              </p>
                           </li>
                           <li>
                              <p>DBUA从旧（源） <code>listener.ora</code>文件中删除已升级数据库的条目。
                              </p>
                           </li>
                           <li>
                              <p>DBUA在源和目标Oracle数据库环境中重新加载<code>listener.ora</code>文件。
                              </p>
                           </li>
                        </ol>
                        <div class="infoboxnote" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__GUID-1FB4DACA-15B2-4CAF-8DDB-940C6145FBB4">
                           <p class="notep1">注意：</p>
                           <p>如果在同一侦听器中注册了其他数据库，则在侦听器迁移期间可能会影响其新的客户端连接请求。</p>
                        </div>
                        <p>完成选择后，单击“ <span class="uicontrol bold">下一步”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>出现“ <span class="wintitle">配置管理”</span>窗口。在“ <span class="wintitle">配置管理”</span>窗口中，选择管理选项：</p>
                        <div class="figure" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__GUID-9E8CB2FC-E203-400B-BD14-B719BC533F4B"><img id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__IMAGE_A5L_25J_SFB" src="img/dbua_7.png" alt="下面是dbua_7.png的描述" title="下面是dbua_7.png的描述" longdesc="img_text/dbua_7.html"><br><a href="img_text/dbua_7.html">说明dbua_7.png的描述</a></div>
                        <!-- class="figure" -->
                        <ul id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__UL_H4D_2LF_WFB" style="list-style-type:disc">
                           <li>
                              <p><span class="uicontrol bold">配置企业管理器（EM）数据库快速</span></p>
                              <p>Oracle Enterprise Manager Database Express是基于Web的数据库管理应用程序，内置于Oracle数据库中。EM Express替换了早期版本中可用的DB Control组件。如果选择配置Enterprise Manager Database Express，请输入EM Database Express端口号。例如：5500。您也可以选中该复选框以将快速端口配置为全局端口。</p>
                           </li>
                           <li>
                              <p><span class="uicontrol bold">注册企业管理器（EM）云控制</span></p>
                              <p>注册Oracle Enterprise Manager Cloud Control会将数据库及其相关实体（如监听器，Oracle ASM磁盘组和Oracle Clusterware）添加为可以使用EM Cloud Control管理的目标。</p>
                              <p>如果选择此选项，则必须在以下字段中提供信息：</p>
                              <ul id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__UL_I4D_2LF_WFB" style="list-style-type:disc">
                                 <li>
                                    <p>OMS主机</p>
                                 </li>
                                 <li>
                                    <p>OMS端口</p>
                                 </li>
                                 <li>
                                    <p>EM管理员用户名</p>
                                 </li>
                                 <li>
                                    <p>EM管理员密码</p>
                                 </li>
                                 <li>
                                    <p>DBSNMP用户密码</p>
                                 </li>
                                 <li>
                                    <p>ASMSNMP用户密码</p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <p>完成输入信息后，单击“ <span class="uicontrol bold">下一步”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>“ <span class="wintitle">摘要”</span>窗口打开。“摘要”窗口显示您为升级提供的信息。向下滚动列表以查看信息。摘要包括以下信息：</p>
                        <ul id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__UL_J4D_2LF_WFB" style="list-style-type:disc">
                           <li>
                              <p>源数据库</p>
                           </li>
                           <li>
                              <p>目标数据库</p>
                           </li>
                           <li>
                              <p>可插拔数据库</p>
                           </li>
                           <li>
                              <p>升级前检查</p>
                           </li>
                           <li>
                              <p>初始化参数更改</p>
                           </li>
                           <li>
                              <p>时区升级</p>
                           </li>
                        </ul>
                        <p>检查您的选择。然后，选择要更改的项目的链接，或单击“上<span class="uicontrol bold">一步”</span>转到<span class="uicontrol bold">上一页</span> ，或选择“ <span class="uicontrol bold">完成”</span> ：</p>
                        <ul id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__UL_K4D_2LF_WFB" style="list-style-type:disc">
                           <li>
                              <p>如果您在“ <span class="wintitle">摘要”</span>窗口中看到要更正的信息，请单击要更新的项目上的链接，或单击“上<span class="uicontrol bold">一步”</span>以向后浏览DBUA配置面试。
                              </p>
                           </li>
                           <li>
                              <p>如果在“ <span class="wintitle">摘要”</span>窗口中看到的信息正确，请单击“ <span class="uicontrol bold">完成”</span> 。选择“ <span class="uicontrol bold">完成”</span>后，将开始升级。
                              </p>
                           </li>
                        </ul>
                        <p>当DBUA开始升级时， <span class="wintitle">进度</span>窗口会显示进度条。“ <span class="wintitle">进度”</span>窗口显示一个表，其中显示了DBUA在升级期间完成的步骤。此表显示升级过程中的持续时间和升级步骤状态。如果您此时必须取消升级，DBUA会提供“ <span class="uicontrol bold">停止”</span>按钮。
                        </p>
                        <div class="figure" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__GUID-5A0F0230-11C8-4892-9BF4-5DB7B3E2C31E"><img id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__IMAGE_EHN_WTD_TFB" src="img/dbua_9.png" alt="下面是dbua_9.png的描述" title="下面是dbua_9.png的描述" longdesc="img_text/dbua_9.html"><br><a href="img_text/dbua_9.html">说明dbua_9.png的描述</a></div>
                        <!-- class="figure" -->
                        <p>升级完成CDB根目录和每个PDB种子的升级后，“ <span class="wintitle">进度”</span>窗口将状态标记为“已<span class="uicontrol bold">完成”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>升级完成后，将打开“ <span class="wintitle">结果”</span>窗口。“ <span class="wintitle">结果”</span>窗口显示有关原始数据库以及已升级数据库的信息。“升级结果”报告还显示DBUA对初始化参数所做的更改。如果要升级多租户体系结构数据库，则“ <span class="wintitle">结果”</span>窗口还会显示可插拔数据库以及升级后存储日志文件的目录。向下滚动以查看有关预升级检查的更多详细信息。如果升级成功，则“升级结果”字段将报告结果，并且您看不到警告消息。如果升级失败，如此示例图像所示，则“ <span class="uicontrol bold">还原数据库”</span>按钮将显示在显示字段下方的右下角。您可以单击此按钮以启动数据库还原。
                        </p>
                        <div class="figure" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__GUID-5E5FCA53-7DBA-42CC-9BD0-E394C91DA6AA"><img id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__IMAGE_GYJ_Q5D_TFB" src="img/dbua_10.png" alt="下面是dbua_10.png的描述" title="下面是dbua_10.png的描述" longdesc="img_text/dbua_10.html"><br><a href="img_text/dbua_10.html">说明dbua_10.png的描述</a></div>
                        <!-- class="figure" -->
                     </li>
                     <li>
                        <p>可选：检查日志文件以获取有关升级过程的更多详细信息。如果设置了Oracle基本环境变量，则DBUA日志文件位于路径<code>/ <span class="variable" translate="no">ORACLE_BASE</span> /cfgtoollogs/dbua/upgradesession_ <span class="variable" translate="no">timestamp</span> / <span class="variable" translate="no">SID</span></code> 。如果未设置Oracle base，则DBUA日志文件位于路径<code>/ <span class="variable" translate="no">ORACLE_HOME</span> /cfgtoollogs/dbua/upgradesession_ <span class="variable" translate="no">timestamp</span> / <span class="variable" translate="no">SID</span></code></p>
                        <div class="infoboxnote" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__GUID-D621C2AA-E950-4E9C-9783-3534ED5F7A9B">
                           <p class="notep1">注意：</p>
                           <p>升级结果窗口的HTML版本也保存在日志文件目录中。您可以单击此HTML窗口中的链接以在浏览器中查看日志窗口。</p>
                        </div>
                        <p>如果您对升级结果感到满意，请单击“ <span class="uicontrol bold">关闭”</span>以退出DBUA。</p>
                     </li>
                     <li>
                        <p>升级完成后，执行本书中描述的升级后过程。完成升级后过程后，即可使用升级后的数据库。</p>
                     </li>
                  </ol>
                  <div class="infoboxnote" id="GUID-307DACD9-ECEE-4079-B767-B22620B99900__GUID-660564CA-EA5E-45A1-A62D-A46BC94FE6AB">
                     <p class="notep1">警告：</p>
                     <p>为防止未经授权使用数据库，Oracle建议您在升级数据库后立即更改所有用户密码。</p>
                     <p>如果Oracle Database 12c及更高版本的默认安全设置已就绪，则密码必须至少为八个字符。不允许使用<code class="codeph">welcome</code>和<code class="codeph">oracle</code>等密码。
                     </p>
                  </div>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-BBF591A5-EB02-405A-9F99-572429838C73" title="数据库升级助手（DBUA）提供图形用户界面，指导您完成Oracle数据库的升级。DBUA适用于CDB和非CDB数据库系统。">使用Oracle数据库升级助手（DBUA）进行升级</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD60002"></a><div class="props_rev_3"><a id="GUID-F929338D-48EE-434F-A5F9-A9E7CD61B17F" name="GUID-F929338D-48EE-434F-A5F9-A9E7CD61B17F"></a><h3 id="UPGRD-GUID-F929338D-48EE-434F-A5F9-A9E7CD61B17F" class="sect3">从现有Oracle主目录移动数据库</h3>
               <div>
                  <p>使用此过程将Oracle数据库迁移到另一个Oracle Database 18c或更高版本的主目录。</p>
                  <p>使用Oracle Database 18c和更高版本，您可以使用数据库升级助手（DBUA）将Oracle数据库数据库从现有Oracle主目录迁移到另一个Oracle主目录。</p>
                  <ol>
                     <li>
                        <p>启动DBUA。</p>
                        <p>DBUA打开“ <span class="wintitle">选择数据库”</span>窗口。
                        </p>
                        <p>列出服务器上的所有数据库。DBUA指示您可以为每个数据库执行的操作类型（升级，移动，就地），具体取决于数据库版本和位置。</p>
                        <div class="figure" id="GUID-F929338D-48EE-434F-A5F9-A9E7CD61B17F__GUID-C2588B20-8EA4-4B6F-BECF-7AD76580AA51"><img id="GUID-F929338D-48EE-434F-A5F9-A9E7CD61B17F__IMAGE_PXK_QW2_TFB" src="img/dbua_11.png" alt="下面是dbua_11.png的描述" title="下面是dbua_11.png的描述" longdesc="img_text/dbua_11.html"><br><a href="img_text/dbua_11.html">说明dbua_11.png的描述</a></div>
                        <!-- class="figure" -->
                        <div class="figure" id="GUID-F929338D-48EE-434F-A5F9-A9E7CD61B17F__GUID-CBFB059C-F0F2-4DA4-9EA9-96013AE2A048"></div>
                        <!-- class="figure" -->
                        <p>选择要移动到新Oracle主目录的数据库。如果尚未为数据库启用操作系统身份验证，请提供所选数据库的SYSDBA用户名和密码。</p>
                        <p>单击<span class="uicontrol bold">下一步</span> 。<span class="wintitle">将</span>出现“ <span class="wintitle">移动数据库选项”</span>窗口
                        </p>
                     </li>
                     <li>
                        <div class="p">在“ <span class="wintitle">选择移动选项”</span>窗口中，您可以指定在移动数据库后要运行的自定义SQL脚本，并确定文件的位置。
                           <div class="figure" id="GUID-F929338D-48EE-434F-A5F9-A9E7CD61B17F__GUID-B3D2857A-84F2-4CEF-A0A6-A8544CAC350A"><img id="GUID-F929338D-48EE-434F-A5F9-A9E7CD61B17F__IMAGE_BVL_1Y2_TFB" src="img/dbua_12.png" alt="下面是dbua_12.png的描述" title="下面是dbua_12.png的描述" longdesc="img_text/dbua_12.html"><br><a href="img_text/dbua_12.html">说明dbua_12.png的描述</a></div>
                           <!-- class="figure" -->
                        </div>
                        <p>单击<span class="uicontrol bold">下一步</span> 。出现“ <span class="wintitle">配置网络”</span>窗口。
                        </p>
                     </li>
                     <li>
                        <p>在单实例系统上，您可以选择现有侦听器，也可以创建新侦听器。如果创建新侦听器，则必须提供侦听器名称和侦听器的端口号。</p>
                        <div class="figure" id="GUID-F929338D-48EE-434F-A5F9-A9E7CD61B17F__GUID-5D92FF18-1909-43D5-B6AB-8BA072F467A2"><img id="GUID-F929338D-48EE-434F-A5F9-A9E7CD61B17F__IMAGE_RRV_VNZ_XFB" src="img/dbua3mvnetwork.png" alt="下面是dbua3mvnetwork.png的描述" title="下面是dbua3mvnetwork.png的描述" longdesc="img_text/dbua3mvnetwork.html"><br><a href="img_text/dbua3mvnetwork.html">说明dbua3mvnetwork.png的描述</a></div>
                        <!-- class="figure" -->
                        <p>单击<span class="uicontrol bold">下一步</span> 。出现“ <span class="wintitle">数据库移动摘要”</span>窗口。
                        </p>
                     </li>
                     <li>
                        <p>查看移动操作的摘要，然后单击“ <span class="uicontrol bold">下一步”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>将出现“ <span class="wintitle">设置”</span>窗口，其中显示DBUA进程在移动数据库时的过程。
                        </p>
                     </li>
                     <li>
                        <p>移动操作完成后，单击“ <span class="uicontrol bold">完成”</span> 。
                        </p>
                     </li>
                     <li>
                        <p>将出现“ <span class="wintitle">结果”</span>窗口。您可以查看源和目标数据库信息，并检查移动步骤或检查日志文件。完成审阅后，单击“ <span class="uicontrol bold">关闭”</span> 。
                        </p>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-BBF591A5-EB02-405A-9F99-572429838C73" title="数据库升级助手（DBUA）提供图形用户界面，指导您完成Oracle数据库的升级。DBUA适用于CDB和非CDB数据库系统。">使用Oracle数据库升级助手（DBUA）进行升级</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="UPGRD52861"></a><div class="props_rev_3"><a id="GUID-25EB7D5A-284E-4A39-85E2-640DE452AC57" name="GUID-25EB7D5A-284E-4A39-85E2-640DE452AC57"></a><h3 id="UPGRD-GUID-25EB7D5A-284E-4A39-85E2-640DE452AC57" class="sect3">在无提示模式下使用DBUA升级Oracle数据库</h3>
               <div>
                  <p>您可以使用<code>-silent</code>命令行选项DBUA使用DBUA执行非交互（“静默”）升级。</p>
                  <p>。在静默模式下，DBUA不提供用户界面。DBUA将消息（包括信息，错误和警告）写入<code class="codeph"><span class="variable" translate="no">ORACLE_HOME</span> /cfgtools/dbua/upgrade <span class="variable" translate="no">session_timestamp</span></code>的日志文件，其中<code class="codeph"><span class="variable" translate="no">session_timestamp</span></code>表示DBUA已运行的升级的时间戳。Oracle强烈建议您阅读生成的DBUA日志文件以确保升级成功。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-29C7651A-28FD-4AA3-ACE4-D15708A9882B">以无提示模式运行DBUA</a><br>使用此过程以非交互（或“静默”）模式启动DBUA。
                     </li>
                     <li class="ulchildlink"><a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1">用于静默模式的DBUA命令行语法</a><br>使用此语法可以使用<code class="codeph">-silent</code>选项运行数据库升级助手（DBUA）。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-BBF591A5-EB02-405A-9F99-572429838C73" title="数据库升级助手（DBUA）提供图形用户界面，指导您完成Oracle数据库的升级。DBUA适用于CDB和非CDB数据库系统。">使用Oracle数据库升级助手（DBUA）进行升级</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-29C7651A-28FD-4AA3-ACE4-D15708A9882B" name="GUID-29C7651A-28FD-4AA3-ACE4-D15708A9882B"></a><h4 id="UPGRD-GUID-29C7651A-28FD-4AA3-ACE4-D15708A9882B" class="sect4">以无提示模式运行DBUA</h4>
                  <div>
                     <p>使用此过程以非交互（或“静默”）模式启动DBUA。</p>
                     <p></p>
                     <ol>
                        <li>
                           <p>要以静默方式启动DBUA，请输入<code class="codeph">dbua -silent -sid</code>命令。该命令以静默方式启动DBUA，并标识要升级的数据库。
                           </p>
                           <p>例如，输入以下命令，其中数据库名称为ORCL：</p><pre class="pre codeblock"><code>dbua -silent -sid ORCL＆</code></pre></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-25EB7D5A-284E-4A39-85E2-640DE452AC57" title="您可以使用-silent命令行选项DBUA使用DBUA执行非交互（“静默”）升级。">在无提示模式下使用DBUA升级Oracle数据库</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1" name="GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1"></a><h4 id="UPGRD-GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1" class="sect4">用于静默模式的DBUA命令行语法</h4>
                  <div>
                     <p>使用此语法可以使用<code class="codeph">-silent</code>选项运行数据库升级助手（DBUA）。
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1__GUID-4104CC38-C755-4F5B-A8C5-AD0E92310C66">目的</p>
                        <p>使用命令行选项运行DBUA时，可以在脚本表单中指定所有有效的DBUA选项。脚本表单使您可以避免在图形用户界面对话框中输入配置信息。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1__GUID-60AB6FE4-E917-4A3B-8F23-ACAD4FC9E39F">文件路径</p><code><span class="variable" translate="no">$ORACLE_HOME</span> / directory_name</code></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1__GUID-4878548E-50D7-4EBC-BCB2-E55EE704A524">句法</p><pre class="pre codeblock"><code>dbua [-silent] [-sid <span class="variable" translate="no">SID</span> ] [-oracleHome <span class="variable" translate="no">Oraclehome_path_and_name</span> ] [-oracleBase <span class="variable" translate="no">Oraclebase_path_and_name</span> ] [-asmsnmpPassword  - <span class="variable" translate="no">password</span> ] [-auditFileDest  - <span class="variable" translate="no">Database_Audit_File_path</span> ] [-backupLocation  - <span class="variable" translate="no">backup_directory_filepath</span> ] [-changeUserTablespacesReadOnly  -  [true | false]] [-createGRP  -  true | false] [-createListener  -  true | false] [ -  listener_name：listener_port]] [-dbName  - <span class="variable" translate="no">database_name</span> ] [-dbsnmpPassword  - <span class="variable" translate="no">password</span> ] [-disableArchiveLogMode  -  true | false] [ -  disableUpgradeScriptLogging  -  true | false]] [ -  emConfiguration  -  [DBEXPRESS | CENTRAL |两个| NONE] [-emExpressPort  - <span class="variable" translate="no">port</span> ] [-emPassword  - <span class="variable" translate="no">password</span> ] [-emUser  - <span class="variable" translate="no">Enterprise_Manager_Admin_User</span> ] [-enablePasswordProfile  -  true | false] [ -  signorePreReqs  -  true | false] [ -  signoreScriptErrors  -  true | false] [-initParam  - <span class="variable" translate="no">initname</span> = <span class="variable" translate="no">value</span> ， <span class="variable" translate="no">initname</span> = <span class="variable" translate="no">value</span> ， <span class="variable" translate="no">initname</span> = <span class="variable" translate="no">value</span> ,. 。 ][-initParamsEscapeChar  - <span class="variable" translate="no">character</span> ] [-keepDeprecatedParams  -  true | false] [-listeners  - <span class="variable" translate="no">listenerName</span> ： <span class="variable" translate="no">Oracle_home</span> ， <span class="variable" translate="no">listenerName</span> ： <span class="variable" translate="no">Oracle_home</span> ， <span class="variable" translate="no">listenerName</span> ： <span class="variable" translate="no">Oracle_home</span> ,. 。 ][-localRacSid  - <span class="variable" translate="no">localSID</span> ] [-logDir  - <span class="variable" translate="no">custom_log_path</span> ] [-newGlobalDbName  - <span class="variable" translate="no">GlobalDBname</span> ]（仅限Oracle Express Edition升级）[ -  newsSid  -  sid]（仅限Oracle Express Edition升级）[-omsHost  - <span class="variable" translate="no">Enterprise_Management_Server_Hostname</span> ] [-omsPort  - <span class="variable" translate="no">Enterprise_Management_Server_port</span> ] [-oracleHome  - <span class="variable" translate="no">Oracle_DB_Oracle_home</span> ] [-oracleHomeUserPassword  - <span class="variable" translate="no">Oracle_home_installation_owner_password</span> ] [-pdbs  - <span class="variable" translate="no">pdb-A</span> ， <span class="variable" translate="no">pdb-B</span> ， <span class="variable" translate="no">pdb-C</span> ,. 。 。|所有|无] -pdbsWithPriority  - <span class="variable" translate="no">pdb-A</span> ：1， <span class="variable" translate="no">pdb-B</span> ：2， <span class="variable" translate="no">pdb-C</span> ：3 ,. 。 。] [-performFixUp  -  true | false] [-postUpgradeScripts  - <span class="variable" translate="no">filepath/script1</span> ， <span class="variable" translate="no">filepath/script2</span> ,. 。 ][-preUpgradeScripts  - <span class="variable" translate="no">filepath/script1</span> ， <span class="variable" translate="no">filepath/script2</span> ,. 。 ][-recompile_invalid_objects  -  true | false] [-sid  - <span class="variable" translate="no">SID</span> ] [-sysDBAPassword  - <span class="variable" translate="no">SYSDBA_UserName_password</span> ] [-sysDBAUserName  - <span class="variable" translate="no">SYSDBA_UserName_password</span> ] [-upgrade_parallelism  - <span class="variable" translate="no">cpu_number_for_parallel_upgrade</span> ] [-upgradeTimezone  -  true | false] [-useExistingBackup  -  true | false] [-useGRP  -  true |假]</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1__GUID-1AD3BC46-FD74-402B-A739-B725EFFB99C7">选项</p>
                        <p>下表列出了DBUA命令行选项：</p>
                        <div class="tblformal" id="GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1__GUID-B73D4111-55E0-42B2-9769-EC1D9EDC3643">
                           <p class="titleintable">表4-2静默模式的DBUA命令行语法</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="用于静默模式的DBUA命令行语法" width="100%" border="1" summary="DBUA command-line options for silent mode" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d28060e1919">命令选项</th>
                                    <th align="left" valign="bottom" id="d28060e1921">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e1925" headers="d28060e1919 ">
                                       <p><code class="codeph">-asmsnmpPassword</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e1925 d28060e1921 ">
                                       <p>指定ASMSNMP用户的密码。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e1933" headers="d28060e1919 ">
                                       <p><code class="codeph">-auditFileDest</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e1933 d28060e1921 ">
                                       <p>指定Oracle数据库审计文件目标。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e1941" headers="d28060e1919 ">
                                       <p><code class="codeph">-backupLocation</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e1941 d28060e1921 ">
                                       <p>（可选）指定在开始升级之前备份数据库的目录。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e1949" headers="d28060e1919 ">
                                       <p><code class="codeph">-changeUserTablespacesReadOnly</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e1949 d28060e1921 ">
                                       <p>选项<code class="codeph">true</code> | <code class="codeph">false</code> 。如果为<code class="codeph">true</code> ，则在升级期间将用户表空间更改为只读。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e1966" headers="d28060e1919 ">
                                       <p><code class="codeph">-createGRP</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e1966 d28060e1921 ">
                                       <p>如果为<code class="codeph">true</code> ，则指定DBUA在数据库处于归档日志和闪回模式时创建保证还原点（GRP）。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e1977" headers="d28060e1919 ">
                                       <p><code class="codeph">-createListener</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e1977 d28060e1921 ">
                                       <p>选项<code class="codeph">true</code> | <code class="codeph">false</code> 。如果为<code class="codeph">true</code> ，则指定在新的Oracle主版本中创建侦听器。以<kbd class="userinput"><span class="variable" translate="no">listener_name</span> ： <span class="variable" translate="no">listener_port</span></kbd>格式提供侦听器名称和端口</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2000" headers="d28060e1919 ">
                                       <p><code class="codeph">-dbName</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2000 d28060e1921 ">
                                       <p>指定要升级的数据库名称。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2008" headers="d28060e1919 ">
                                       <p><code class="codeph">-dbsnmpPassword</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2008 d28060e1921 ">
                                       <p>指定DBSNMP用户密码</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2016" headers="d28060e1919 ">
                                       <p><code class="codeph">-disableArchiveLogMode</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2016 d28060e1921 ">
                                       <p>选项<code class="codeph">true</code> | <code class="codeph">false</code> 。如果为<code class="codeph">true</code> ，则在升级期间关闭存档和闪回日志记录。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2033" headers="d28060e1919 ">
                                       <p><code class="codeph">-disableParallelUpgrade</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2033 d28060e1921 ">
                                       <p>禁用数据库升级的并行执行</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2041" headers="d28060e1919 ">
                                       <p><code class="codeph">-disableUpgradeScriptLogging</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2041 d28060e1921 ">
                                       <p>选项<code class="codeph">true</code> | <code class="codeph">false</code> 。默认情况下，此选项为<code class="codeph">true</code> 。设置为<code class="codeph">false</code> ，禁用在升级过程中运行SQL脚本的详细日志生成。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2062" headers="d28060e1919 ">
                                       <p><code class="codeph">-emConfiguration</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2062 d28060e1921 ">
                                       <p>选项<code>DBEXPRESS</code> | <code>CENTRAL</code> | <code>BOTH</code> | <code>NONE</code> 。指定要通过升级实现的Oracle Enterprise Manager部署的类型。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2082" headers="d28060e1919 ">
                                       <p><code class="codeph">-emExpressPort</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2082 d28060e1921 ">
                                       <p>指定企业管理器Express端口。仅在将<code class="codeph">-emConfiguration</code>选项与<code class="codeph">dbua -silent</code>一起使用时才设置。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2096" headers="d28060e1919 ">
                                       <p><code class="codeph">-emPassword</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2096 d28060e1921 ">
                                       <p>指定企业管理器管理员用户密码。仅在将<code class="codeph">-emConfiguration</code>选项与<code class="codeph">dbua -silent</code>一起使用时才设置。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2110" headers="d28060e1919 ">
                                       <p><code class="codeph">-emUser</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2110 d28060e1921 ">
                                       <p>指定具有管理员权限的企业管理器用户，以添加或修改目标。仅在将<code class="codeph">-emConfiguration</code>选项与<code class="codeph">dbua -silent</code>一起使用时才设置。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2124" headers="d28060e1919 ">
                                       <p><code class="codeph">-enablePasswordProfile</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2124 d28060e1921 ">
                                       <p>如果为<code class="codeph">true</code> ，则为管理用户启用密码配置文件，作为数据库升级的一部分。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2135" headers="d28060e1919 ">
                                       <p><code class="codeph">-executePreReqs -sid <span class="variable" translate="no">name</span> | -dbName <span class="variable" translate="no">name</span></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2135 d28060e1921 ">
                                       <p>仅运行指定数据库的预升级检查。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2148" headers="d28060e1919 ">
                                       <p><code class="codeph">-救命</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2148 d28060e1921 ">
                                       <p>显示命令语法及其使用说明。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2156" headers="d28060e1919 ">
                                       <p><code class="codeph">-ignorePreReqs</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2156 d28060e1921 ">
                                       <p>选项<code>true</code> | <code>false</code> 。如果为<code>true</code> ，DBUA将忽略升级前检查中的错误条件。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2173" headers="d28060e1919 ">
                                       <p><code class="codeph">-ignoreScriptErrors</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2173 d28060e1921 ">
                                       <p>选项<code>true</code> | <code>false</code> 。如果为<code>true</code> ，则DBUA会在您运行自定义脚本时忽略<code class="codeph">ORA-</code>错误。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2193" headers="d28060e1919 ">
                                       <p><code class="codeph">-initParam</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2193 d28060e1921 ">
                                       <p>使用格式<code class="codeph"><span class="variable" translate="no">name</span> = <span class="variable" translate="no">value</span> , <span class="variable" translate="no">name</span> = <span class="variable" translate="no">value</span></code>指定逗号分隔的初始化参数值列表</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2213" headers="d28060e1919 ">
                                       <p><code class="codeph">-initParamsEscapeChar</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2213 d28060e1921 ">
                                       <p>当初始化参数具有多个值时，为逗号指定转义字符。如果未指定转义字符，则默认转义字符为反斜杠[ <code class="codeph">/</code> ]。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2225" headers="d28060e1919 ">
                                       <p><code class="codeph">-keepDeprecatedParams</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2225 d28060e1921 ">
                                       <p>选项<code>true</code> | <code>false</code> 。如果为<code>true</code> ，则DBUA会在数据库升级期间保留已弃用的参数。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2242" headers="d28060e1919 ">
                                       <p><code class="codeph">-听众</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2242 d28060e1921 ">
                                       <p>使用升级的数据库迁移和注册指定的现有早期版本侦听器。指定使用下列选项之一监听器：监听器名称，格式OA逗号分隔的列表<span class="variable" translate="no">listenerName</span> ： <span class="variable" translate="no">Oraclehome</span> 。
                                       </p>
                                       <ul style="list-style-type:disc">
                                          <li>
                                             <p>以逗号分隔的侦听器名称列表，格式如下：</p>
                                             <p><kbd class="userinput">-lisnrName1，LsnrName2，LsnrName3</kbd></p>
                                          </li>
                                          <li>
                                             <p>由Oracle家庭限定的以逗号分隔的侦听器名称列表，格式如下：</p>
                                             <p><code class="codeph">-listeners lsnrName1：Oracle_home_path，-listeners lsnrName2：Oracle_home_path</code></p>
                                          </li>
                                       </ul>
                                       <p>选择此选项时，DBUA按以下顺序搜索指定的侦听器：在Oracle Grid Infrastructure主目录（Grid home）中，在目标主目录中，然后在源主目录中。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2271" headers="d28060e1919 ">
                                       <p><code class="codeph">-localListenerWithoutAlias</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2271 d28060e1921 ">
                                       <p>在不使用TNS别名的情况下设置LOCAL_LISTENER。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2279" headers="d28060e1919 ">
                                       <p><code class="codeph">-localRacSid</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2279 d28060e1921 ">
                                       <p>如果Oracle RAC数据库未在群集Oracle Cluster Registry（OCR）中注册，则此选项指定Oracle Real Application Clusters（Oracle RAC）数据库的本地系统标识符（SID）。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2287" headers="d28060e1919 ">
                                       <p><code class="codeph">-logDir</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2287 d28060e1921 ">
                                       <p>指定自定义日志目录的路径。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2295" headers="d28060e1919 ">
                                       <p><code class="codeph">-newGlobalDbName</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2295 d28060e1921 ">
                                       <p>指定新的全局数据库名称。您只能将此选项用于Oracle Express Edition升级。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2303" headers="d28060e1919 ">
                                       <p><code class="codeph">-newSid</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2303 d28060e1921 ">
                                       <p>指定新的系统标识符（SID）。您只能将此选项用于Oracle Express Edition升级。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2311" headers="d28060e1919 ">
                                       <p><code class="codeph">-omsHost</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2311 d28060e1921 ">
                                       <p>指定Oracle Enterprise Manager管理服务器主机名。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2319" headers="d28060e1919 ">
                                       <p><code class="codeph">-omsPort</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2319 d28060e1921 ">
                                       <p>指定Oracle Enterprise Manager管理服务器端口号。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2327" headers="d28060e1919 ">
                                       <p><code class="codeph">-oracleHome -sid <span class="variable" translate="no">id</span> | dbName <span class="variable" translate="no">name</span></code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2327 d28060e1921 ">
                                       <p>指定数据库的Oracle主路径。通过使用<code class="codeph">–sid</code>标志，提供系统标识符或使用<code class="codeph">–dbName</code>标志并指定数据库名称来标识数据库。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2346" headers="d28060e1919 ">
                                       <p><code class="codeph">-oracleHomeUserPassword</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2346 d28060e1921 ">指定要升级的Oracle数据库的Oracle安装所有者的密码。</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2354" headers="d28060e1919 ">
                                       <p><code class="codeph">-pdbs</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2354 d28060e1921 ">指定升级哪些PDB。使用以下选项指定您的选择：<ul style="list-style-type:disc">
                                          <li>
                                             <p>您希望DBUA使用CDB升级的可插拔数据库（PDB）名称的逗号分隔列表。</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ALL</code> ，表示您希望所有使用CDB升级的PDB。</p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">NONE</code> ，表示您只想升级CDB。没有PDB升级。
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2375" headers="d28060e1919 ">
                                       <p><code class="codeph">-pdbsWithPriority</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2375 d28060e1921 ">
                                       <p>指定您希望DBUA升级PDB的优先级顺序。使用逗号分隔的可插入数据库（PDB）名称列表以下列格式指定优先级顺序，其中1是最高优先级： <code class="codeph">pdb-A:1,pdb-B:2,pdb-C:3</code> 。在此示例中，首先升级PDB-A，最后升级pdb-C。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2386" headers="d28060e1919 ">
                                       <p><code class="codeph">-performFixUp</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2386 d28060e1921 ">
                                       <p>选项<code>true</code> | <code>false</code> 。如果为<code>true</code> ，则启用DBUA以在静默升级模式期间执行修正。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2403" headers="d28060e1919 ">
                                       <p><code class="codeph">-postUpgradeScripts</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2403 d28060e1921 ">
                                       <p>指定在DBUA完成升级后要运行的SQL脚本。提供以逗号分隔的脚本列表及其完整的文件路径。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2411" headers="d28060e1919 ">
                                       <p><code class="codeph">preUpgradeScripts</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2411 d28060e1921 ">
                                       <p>指定在DBUA完成升级之前要运行的SQL脚本。提供以逗号分隔的SQL脚本列表及其完整的文件路径。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2419" headers="d28060e1919 ">
                                       <p><code class="codeph">-recompile_invalid_objects</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2419 d28060e1921 ">
                                       <p>选项<code>true</code> | <code>false</code> 。如果为<code>true</code> ，则DBUA会在升级过程中重新编译无效对象。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2436" headers="d28060e1919 ">
                                       <p><code class="codeph">-sid</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2436 d28060e1921 ">
                                       <p>指定要升级的数据库的系统标识符（SID）。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2444" headers="d28060e1919 ">
                                       <p><code class="codeph">-sysDBAPassword</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2444 d28060e1921 ">
                                       <p>指定您指定为具有<code>sysDBAUserName</code>的SYSDBA权限用户的用户名的密码。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2455" headers="d28060e1919 ">
                                       <p><code class="codeph">-sysDBAUserName</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2455 d28060e1921 ">
                                       <p>指定为数据库授予SYSDBA系统特权的用户名。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2463" headers="d28060e1919 ">
                                       <p><code class="codeph">-upgrade_parallelism</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2463 d28060e1921 ">
                                       <p>指定您希望DBUA用于并行升级的CPU数。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2471" headers="d28060e1919 ">
                                       <p><code class="codeph">-upgradeTimezone</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2471 d28060e1921 ">
                                       <p>选项<code>true</code> | <code>false</code> 。如果为<code>true</code> ，DBUA会升级Oracle数据库时区文件。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2489" headers="d28060e1919 ">
                                       <p><code class="codeph">-useExistingBackup</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2489 d28060e1921 ">
                                       <p>如果为<code class="codeph">true</code> ，则指定DBUA使用现有RMAN备份来还原数据库。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d28060e2500" headers="d28060e1919 ">
                                       <p><code class="codeph">-useGRP</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d28060e2500 d28060e1921 ">
                                       <p>选项<code>true</code> | <code>false</code> 。如果为<code>true</code> ，则指定DBUA使用命名保证还原点来还原数据库。
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1__GUID-69FC119A-76C8-4E71-8C3D-1DB5D74B2EFA">例子</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1__GUID-584967C8-D4BA-4962-A6A6-6B9C0170F8BE">
                        <p class="titleinexample">示例4-3使用DBUA选择要升级的数据库</p>
                        <p>以下命令选择要升级的数据库<code class="codeph">orcl</code> ：</p><pre class="pre codeblock"><code>dbua -sid orcl</code></pre><div class="infoboxnote" id="GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1__GUID-A1DF2064-D340-44B5-BFF1-A166FBFA7EFA">
                           <p class="notep1">注意：</p>
                           <p>您可以使用DBUA命令设置密码。如果默认的Oracle数据库安全设置已就绪，则密码必须至少为八个字符，并且不允许使用<code class="codeph">welcome</code>和<code class="codeph">oracle</code>等密码。
                           </p>
                        </div>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1__GUID-BEBB59CB-2D39-4531-A9C1-633853D12A73">
                        <p class="titleinexample">示例4-4使用非交互式（“静默”）选项选择要使用DBUA升级的数据库</p>
                        <p>以下命令使用noninteractive（“silent”）选项选择要升级的数据库<code class="codeph">orcl</code> ：</p><pre class="pre codeblock"><code>dbua -silent -sid orcl</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1__GUID-7E94ACA8-1A3E-48FF-AAC9-97033A3BE3F9">
                        <p class="titleinexample">示例4-5在非交互（“静默”）模式下运行DBUA的用例</p>
                        <p>下面的示例说明了如何使用DBUA和非交互（“静默”）选项来执行各种升级方案。</p><pre class="pre codeblock"><code>dbua -silent -sid sidb112 -backupLocation / u01 / sidb1123 / backup -sysDBAUserName sys -sysDBAPassword r3aDy2upg -oracleHome /u01/app/product/11.2.0/dbhome_1 -upgradeTimezone true dbua -silent -sid sidb1123 -backupLocation / u01 / sidb1123 / backup -sysDBAUserName sys -sysDBAPassword r3aDy2upg -oracleHome /u01/app/product/11.2.0/dbhome_1 -upgrade_parallelism 1 -upgradeTimezone true</code></pre><pre class="pre codeblock"><code>dbua -silent -sid db1124 -backupLocation / u01 / sidb1123 / backup -sysDBAUserName sys -sysDBAPassword r3aDy2upg -performFixUp true -upgradeTimezone true</code></pre><pre class="pre codeblock"><code>dbua -silent -dbName rdbcdb -oracleHome /u01/app/product/11.2.0/dbhome_1 -sysDBAUserName sys -sysDBAPassword r3aDy2upg -backupLocation / u01 / sidb1123 / backup -recompile_invalid_objects true -upgradeTimezone true</code></pre><pre class="pre codeblock"><code>dbua -silent -dbName amdb -oracleHome /u01/app/product/11.2.0/dbhome_1 -sysDBAUserName sys -sysDBAPassword r3aDy2upg -recompile_invalid_objects true -useGRP GRP_20170620bfupgrade -upgradeTimezone true</code></pre><pre class="pre codeblock"><code>dbua -silent -dbName rdb121 -oracleHome /u01/app/product/12.1.0/dbhome_2 -sysDBAUserName sys -sysDBAPassword r3aDy2upg -backupLocation / u01 / sidb1123 / backup -recompile_invalid_objects true -upgradeTimezone true</code></pre><pre class="pre codeblock"><code>dbua -silent -dbName ronedb -oracleHome /u01/app/product/12.1.0/dbhome_2 -sysDBAUserName sys -sysDBAPassword r3aDy2upg -changeUserTablespacesReadOnly true -recompile_invalid_objects true -upgradeTimezone true -createGRP true</code></pre><div class="infoboxnote" id="GUID-EF6ABCBB-DEB4-4061-8106-0024F8BFB3F1__GUID-B514E5B1-A35D-43C6-B0F5-779407279E80">
                           <p class="notep1">注意：</p>
                           <p>有关安全性最佳实践的信息，请参阅<cite>Oracle数据库安全性指南</cite> 。
                           </p>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="../dbseg/keeping-your-oracle-database-secure.html#DBSEG10005" target="_blank"><span><cite>Oracle数据库安全指南</cite></span></a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="upgrading-oracle-database-upgrade-assistant-dbua.html#GUID-25EB7D5A-284E-4A39-85E2-640DE452AC57" title="您可以使用-silent命令行选项DBUA使用DBUA执行非交互（“静默”）升级。">在无提示模式下使用DBUA升级Oracle数据库</a></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
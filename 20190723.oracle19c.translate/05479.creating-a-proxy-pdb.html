<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
      <meta name="abstract" content="You can create a PDB as a proxy PDB by referencing it in a remote CDB."></meta>
      <meta name="description" content="You can create a PDB as a proxy PDB by referencing it in a remote CDB."></meta>
      <title>将PDB创建为代理PDB</title>
      <meta property="og:site_name" content="Oracle Help Center"></meta>
      <meta property="og:title" content="Administrator’s Guide "></meta>
      <meta property="og:description" content="You can create a PDB as a proxy PDB by referencing it in a remote CDB."></meta>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css"></link>
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico"></link>
      <meta name="application-name" content="Administrator’s Guide"></meta>
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)"></meta>
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2"></meta>
      <link rel="alternate" href="multitenant-administrators-guide.pdf" title="PDF File" type="application/pdf"></link>
      <meta name="robots" content="all"></meta>
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/"></link>
      <meta name="dcterms.created" content="2019-03-20T09:59:22-07:00"></meta>
      
      <meta name="dcterms.dateCopyrighted" content="2017, 2019"></meta>
      <meta name="dcterms.category" content="database"></meta>
      <meta name="dcterms.identifier" content="E96136-03"></meta>
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19"></meta>
      
      <link rel="prev" href="plugging-in-a-pdb.html" title="Previous" type="text/html"></link>
      <link rel="next" href="removing-a-pdb.html" title="Next" type="text/html"></link>
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script src="/sp_common/book-template/requirejs/require.js" data-main="/sp_common/book-template/ohc-book-template/js/book-config"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Multitenant Administrator&#39;s Guide"></meta>
    <meta name="dcterms.isVersionOf" content="MULTI"></meta>
    <meta name="dcterms.release" content="Release 19"></meta>
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="plugging-in-a-pdb.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="removing-a-pdb.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">管理员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="creating-pdbs.html" property="item" typeof="WebPage"><span property="name">创建和删除PDB和应用程序容器</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">将PDB创建为代理PDB</li>
            </ol>
            <a id="GUID-7C23D560-5AD5-4AF2-93B4-F4FDC6DE768C" name="GUID-7C23D560-5AD5-4AF2-93B4-F4FDC6DE768C"></a>
            
            <h2 id="MULTI-GUID-7C23D560-5AD5-4AF2-93B4-F4FDC6DE768C" class="sect2"><span class="enumeration_chapter">10</span>将PDB创建为代理PDB</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以通过在远程CDB中引用PDB来创建PDB作为代理PDB。</p>
               <p>本章包含以下主题：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="creating-a-proxy-pdb.html#GUID-1BE60CFF-2F0D-4B7B-B745-CA87537156A1">关于创建代理PDB</a><br><strong class="term">代理PDB</strong>提供对远程CDB中的PDB的访问。它类似于符号链接。
                  </li>
                  <li class="ulchildlink"><a href="creating-a-proxy-pdb.html#GUID-4453DF44-5D16-4581-9CBF-0C7BCA85DE82">创建代理PDB</a><br>通过引用不同CDB中的PDB来创建代理PDB。</li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="creating-pdbs.html#GUID-9A250D93-5B3B-4643-BE85-F32CC7B0E413" title="您可以使用各种技术创建PDB，应用程序容器和应用程序种子。">创建和删除PDB和应用程序容器</a></p>
                  </div>
               </div>
            </div>
            
            <div class="props_rev_3"><a id="GUID-1BE60CFF-2F0D-4B7B-B745-CA87537156A1" name="GUID-1BE60CFF-2F0D-4B7B-B745-CA87537156A1"></a><h3 id="MULTI-GUID-1BE60CFF-2F0D-4B7B-B745-CA87537156A1" class="sect3"><span class="enumeration_section">10.1</span>关于创建代理PDB</h3>
               <div>
                  <p><strong class="term">代理PDB</strong>提供对远程CDB中的PDB的访问。它类似于符号链接。
                  </p>
                  <p><code class="codeph">CREATE PLUGGABLE DATABASE</code>语句通过引用不同CDB中的PDB来创建代理PDB，该CDB称为<strong class="term">引用的PDB</strong> 。如果需要远程PDB的本地上下文，可以使用代理PDB。此外，当不同CDB中的应用程序容器具有相同的应用程序时，您可以使其应用程序根与代理PDB保持同步。</p>
                  <p>要使用此技术，请在将包含代理PDB的CDB中运行<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句。你必须包括：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><code class="codeph">AS PROXY</code>子句指定您正在创建代理PDB。</p>
                     </li>
                     <li>
                        <p>一个<code class="codeph">FROM</code>子句，指定代理PDB引用的PDB。
                        </p>
                     </li>
                     <li>
                        <p>指向<code class="codeph">FROM</code>子句中引用的PDB的当前位置的数据库链接。必须在将包含代理PDB的CDB的根目录中创建数据库链接，并且数据库链接连接到远程CDB的根目录或远程引用的PDB。</p>
                     </li>
                  </ul>
                  <p>下图说明了此技术如何创建引用远程CDB中的PDB的代理PDB。</p>
                  <div class="figure" id="GUID-1BE60CFF-2F0D-4B7B-B745-CA87537156A1__CREATEAVIEWPDB-5C5BDF58">
                     <p class="titleinfigure">图10-1创建远程代理PDB</p><img src="img/admin110.png" alt="下面是图10-1的描述" title="下面是图10-1的描述" longdesc="img_text/admin110.html"><br><a href="img_text/admin110.html">“图10-1创建远程代理PDB”的描述</a></div>
                  <!-- class="figure" -->
                  <p>您可以在应用程序容器中创建代理PDB。为此，引用的PDB必须是应用程序根或不同CDB中的应用程序容器中的应用程序PDB。必须在将包含代理PDB的应用程序容器的根目录中创建数据库链接，并且数据库链接连接到远程应用程序容器的根目录或远程引用的应用程序PDB。</p>
                  <p>下图说明了此技术如何基于应用程序容器中的远程引用PDB在应用程序容器中创建代理PDB。</p>
                  <div class="figure" id="GUID-1BE60CFF-2F0D-4B7B-B745-CA87537156A1__GUID-679CB43C-A8CD-4041-8C7E-1EA9E9E2F0B9">
                     <p class="titleinfigure">图10-2在应用程序容器中创建远程代理PDB</p><img src="img/admin118.png" alt="下面是图10-2的描述" title="下面是图10-2的描述" longdesc="img_text/admin118.html"><br><a href="img_text/admin118.html">“图10-2在应用程序容器中创建远程代理PDB”的说明</a></div>
                  <!-- class="figure" -->
                  <p>在创建代理PDB之前，请在<span class="q">“ <a href="overview-of-pdb-creation.html#GUID-87F21FDE-7115-4207-954E-B229C1879EF6__GUID-57A2E4B5-E8EB-4294-95C2-A3E04AF93D8C" title="此表描述了每个子句以及何时使用每个子句。">表5-3</a> ”中</span>解决适用于创建代理PDB的问题。该表描述了您必须根据不同因素指定的<code class="codeph">CREATE PLUGGABLE DATABASE</code>子句。
                  </p>
                  <p>本节包含以下主题：</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="creating-a-proxy-pdb.html#GUID-78D8F909-677F-4AD7-A006-7B47AF2EC0BC">代理PDB和SQL语句</a><br>通常，当代理PDB是当前容器时，提交在代理PDB中执行的SQL语句在引用的PDB中执行。</li>
                     <li class="ulchildlink"><a href="creating-a-proxy-pdb.html#GUID-19BB54E7-4388-4948-A7E0-15B980AEED41">代理PDB和数据库链接</a><br>创建代理PDB时需要数据库链接。</li>
                     <li class="ulchildlink"><a href="creating-a-proxy-pdb.html#GUID-907A1473-32A6-4571-A752-FAFFB0172BE5">代理PDB和身份验证</a><br>代理PDB中的会话仅支持密码身份验证。</li>
                     <li class="ulchildlink"><a href="creating-a-proxy-pdb.html#GUID-DD9D3AD6-BB00-43B1-9C16-94E670777EAB">代理PDB和监听器</a><br>仅当代理PDB将引用PDB时，PDB的主机名和端口号设置才很重要。</li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-1BE60CFF-2F0D-4B7B-B745-CA87537156A1__GUID-0D128A0B-3EF1-4B66-A522-1DCAAA9B2408">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="overview-of-pdb-creation.html#GUID-59F42929-7237-4371-8934-921B46DB6F31" title="但是，如果选择创建PDB，则必须确定将存储数据的表空间和文件。">PDB存储</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="administering-application-containers-with-sql-plus.html#GUID-7D442C17-28E6-4337-8EF5-6930FBC0BCC8" title="当不同CDB中的应用程序容器具有相同的应用程序时，可以通过创建主应用程序根，副本应用程序根和代理PDB来保持其应用程序根同步。">将应用程序根副本与代理PDB同步</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="creating-a-proxy-pdb.html#GUID-7C23D560-5AD5-4AF2-93B4-F4FDC6DE768C" title="您可以通过在远程CDB中引用PDB来创建PDB作为代理PDB。">将PDB创建为代理PDB</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-78D8F909-677F-4AD7-A006-7B47AF2EC0BC" name="GUID-78D8F909-677F-4AD7-A006-7B47AF2EC0BC"></a><h4 id="MULTI-GUID-78D8F909-677F-4AD7-A006-7B47AF2EC0BC" class="sect4"><span class="enumeration_section">10.1.1</span>代理PDB和SQL语句</h4>
                  <div>
                     <p>通常，当代理PDB是当前容器时，提交在代理PDB中执行的SQL语句在引用的PDB中执行。</p>
                     <p>远程执行的结果将返回给代理PDB。例如，数据定义语言（DDL）语句，数据操作语言（DML）语句和在代理PDB中执行的查询被发送到引用的PDB以供执行，并且结果被返回到代理PDB。</p>
                     <p>该规则有一个例外。当代理PDB是当前容器时，以及执行<code class="codeph">ALTER PLUGGABLE DATABASE</code>和<code class="codeph">ALTER DATABASE</code>语句时，这些语句仅影响代理PDB。它们不会被发送到引用的PDB以供执行。同样，当前容器是代理PDB所属的根时， <code class="codeph">ALTER PLUGGABLE DATABASE</code>语句仅影响代理PDB。例如，在CDB根，应用程序根或代理PDB中执行的<code class="codeph">ALTER PLUGGABLE DATABASE</code>语句可以打开或关闭代理PDB，但此语句不会打开或关闭引用的PDB。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="creating-a-proxy-pdb.html#GUID-1BE60CFF-2F0D-4B7B-B745-CA87537156A1" title="代理PDB提供对远程CDB中的PDB的访问。它类似于符号链接。">关于创建代理PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-19BB54E7-4388-4948-A7E0-15B980AEED41" name="GUID-19BB54E7-4388-4948-A7E0-15B980AEED41"></a><h4 id="MULTI-GUID-19BB54E7-4388-4948-A7E0-15B980AEED41" class="sect4"><span class="enumeration_section">10.1.2</span>代理PDB和数据库链接</h4>
                  <div>
                     <p>创建代理PDB时需要数据库链接。</p>
                     <p>创建代理PDB后，代理PDB不再使用创建期间指定的数据库链接。相反，代理PDB直接与引用的PDB通信。</p>
                     <p>此直接通信需要包含引用的PDB的CDB的侦听器的端口号和主机名。在代理PDB创建期间，代理PDB默认使用以下值：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="bold">监听端口号：</span> 1521</p>
                           <p>如果引用的PDB的侦听器不使用默认端口号，则必须使用<code class="codeph">PORT</code>子句指定侦听器的端口号。您可以在创建代理PDB时指定端口号，也可以更改代理PDB以更改端口号。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">监听器主机名：</span>包含引用的PDB的CDB的主机名</p>
                           <p>如果引用的PDB的侦听器不使用默认主机名，则必须使用<code class="codeph">HOST</code>子句指定侦听器的主机名。您可以在创建代理PDB时指定主机名，也可以更改代理PDB以更改主机名。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>相关话题</strong></p>
                        <ul>
                           <li><a href="creating-a-proxy-pdb.html#GUID-DD9D3AD6-BB00-43B1-9C16-94E670777EAB" title="仅当代理PDB将引用PDB时，PDB的主机名和端口号设置才很重要。">代理PDB和监听器</a></li>
                           <li><a href="administering-pdbs-with-sql-plus.html#GUID-2AE424AE-D534-4E98-A17C-D50E6051D2F8" title="由代理PDB引用的PDB称为引用的PDB。">修改引用的PDB的监听器设置</a></li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="creating-a-proxy-pdb.html#GUID-1BE60CFF-2F0D-4B7B-B745-CA87537156A1" title="代理PDB提供对远程CDB中的PDB的访问。它类似于符号链接。">关于创建代理PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-907A1473-32A6-4571-A752-FAFFB0172BE5" name="GUID-907A1473-32A6-4571-A752-FAFFB0172BE5"></a><h4 id="MULTI-GUID-907A1473-32A6-4571-A752-FAFFB0172BE5" class="sect4"><span class="enumeration_section">10.1.3</span>代理PDB和认证</h4>
                  <p>代理PDB中的会话仅支持密码身份验证。</p>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="creating-a-proxy-pdb.html#GUID-1BE60CFF-2F0D-4B7B-B745-CA87537156A1" title="代理PDB提供对远程CDB中的PDB的访问。它类似于符号链接。">关于创建代理PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-DD9D3AD6-BB00-43B1-9C16-94E670777EAB" name="GUID-DD9D3AD6-BB00-43B1-9C16-94E670777EAB"></a><h4 id="MULTI-GUID-DD9D3AD6-BB00-43B1-9C16-94E670777EAB" class="sect4"><span class="enumeration_section">10.1.4</span>代理PDB和监听器</h4>
                  <div>
                     <p>仅当代理PDB将引用PDB时，PDB的主机名和端口号设置才很重要。</p>
                     <p>本节包含以下主题：</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="creating-a-proxy-pdb.html#GUID-A751F0A6-2949-4E20-BE36-711E682EC53A">HOST条款</a><br><code class="codeph">CREATE PLUGGABLE DATABASE</code>语句的<code class="codeph">HOST</code>子句指定正在创建的PDB的侦听器的主机名。
                        </li>
                        <li class="ulchildlink"><a href="creating-a-proxy-pdb.html#GUID-62C98D1A-C4DC-4731-B3AB-6C6860B86921">PORT条款</a><br><code class="codeph">CREATE PLUGGABLE DATABASE</code>语句的<code class="codeph">PORT</code>子句指定正在创建的PDB的侦听器的端口号。
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="creating-a-proxy-pdb.html#GUID-1BE60CFF-2F0D-4B7B-B745-CA87537156A1" title="代理PDB提供对远程CDB中的PDB的访问。它类似于符号链接。">关于创建代理PDB</a></p>
                        </div>
                     </div>
                  </div>
                  
                  <div class="sect4"><a id="GUID-A751F0A6-2949-4E20-BE36-711E682EC53A" name="GUID-A751F0A6-2949-4E20-BE36-711E682EC53A"></a><h5 id="MULTI-GUID-A751F0A6-2949-4E20-BE36-711E682EC53A" class="sect5"><span class="enumeration_section">10.1.4.1</span>主机条款</h5>
                     <div>
                        <p><code class="codeph">CREATE PLUGGABLE DATABASE</code>语句的<code class="codeph">HOST</code>子句指定正在创建的PDB的侦听器的主机名。
                        </p>
                        <p>默认情况下，侦听器的主机名与正在创建的PDB的主机名相同。满足以下两个条件时指定<code class="codeph">HOST</code>子句：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>侦听器的主机名与正在创建的PDB的主机名不同。</p>
                           </li>
                           <li>
                              <p>您计划创建引用正在创建的PDB的代理PDB。</p>
                           </li>
                        </ul>
                        <p>代理PDB使用数据库链接与其引用的PDB建立通信。建立通信后，代理PDB直接与引用的PDB通信，而不使用数据库链接。侦听器的主机名必须正确才能使代理PDB正常运行。</p>
                        <div class="example" id="GUID-A751F0A6-2949-4E20-BE36-711E682EC53A__GUID-697CC292-43B8-4C94-9063-3860FAF02504">
                           <p class="titleinexample">例10-1主机条款</p><pre class="pre codeblock"><code>HOST = 'myhost.example.com'</code></pre></div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-A751F0A6-2949-4E20-BE36-711E682EC53A__GUID-A1D4D420-C38E-4348-89FA-D1EBE7B25A66">
                           <p class="notep1">也可以看看：</p>
                           <ul style="list-style-type:disc">
                              <li>
                                 <p><span class="q">“ <a href="creating-a-proxy-pdb.html#GUID-1BE60CFF-2F0D-4B7B-B745-CA87537156A1" title="代理PDB提供对远程CDB中的PDB的访问。它类似于符号链接。">关于创建代理PDB</a> ”</span></p>
                              </li>
                              <li>
                                 <p><span class="q">“ <a href="administering-pdbs-with-sql-plus.html#GUID-2E668740-E91D-4DB8-B545-666D3F2C63DE" title="当引用的PDB的侦听器的主机名发生更改时，必须运行ALTER PLUGGABLE DATABASE CONTAINERS HOST语句以重置引用的PDB的主机名，以便其代理PDB继续正常运行。">改变参考PDB的监听器主机名</a> ”</span></p>
                              </li>
                              <li>
                                 <p><a href="../sqlrf/CREATE-PLUGGABLE-DATABASE.html#SQLRF-GUID-F2DBA8DD-EEA8-4BB7-A07F-78DC04DB1FFC" target="_blank"><span><cite>Oracle数据库SQL语言参考，</cite></span></a>以了解有关<code class="codeph">HOST</code>子句的更多信息</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="creating-a-proxy-pdb.html#GUID-DD9D3AD6-BB00-43B1-9C16-94E670777EAB" title="仅当代理PDB将引用PDB时，PDB的主机名和端口号设置才很重要。">代理PDB和监听器</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
                  <div class="sect4"><a id="GUID-62C98D1A-C4DC-4731-B3AB-6C6860B86921" name="GUID-62C98D1A-C4DC-4731-B3AB-6C6860B86921"></a><h5 id="MULTI-GUID-62C98D1A-C4DC-4731-B3AB-6C6860B86921" class="sect5"><span class="enumeration_section">10.1.4.2</span> PORT条款</h5>
                     <div>
                        <p><code class="codeph">CREATE PLUGGABLE DATABASE</code>语句的<code class="codeph">PORT</code>子句指定正在创建的PDB的侦听器的端口号。
                        </p>
                        <p>默认情况下，正在创建的PDB的侦听器的端口号为1521。满足以下两个条件时指定<code class="codeph">PORT</code>子句：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>侦听器的端口号不是1521。</p>
                           </li>
                           <li>
                              <p>您计划创建引用正在创建的PDB的代理PDB。</p>
                           </li>
                        </ul>
                        <p>代理PDB使用数据库链接与其引用的PDB建立通信。建立通信后，代理PDB直接与引用的PDB通信，而不使用数据库链接。侦听器的端口号必须正确才能使代理PDB正常运行。</p>
                        <div class="example" id="GUID-62C98D1A-C4DC-4731-B3AB-6C6860B86921__GUID-697CC292-43B8-4C94-9063-3860FAF02504">
                           <p class="titleinexample">例10-2 PORT子句</p><pre class="pre codeblock"><code>PORT = 1599</code></pre><div class="infoboxnote" id="GUID-62C98D1A-C4DC-4731-B3AB-6C6860B86921__GUID-D20A0A40-8929-4676-B6DA-B4090E312755">
                              <p class="notep1">注意：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="q">“ <a href="creating-a-proxy-pdb.html#GUID-1BE60CFF-2F0D-4B7B-B745-CA87537156A1" title="代理PDB提供对远程CDB中的PDB的访问。它类似于符号链接。">关于创建代理PDB</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">“ <a href="administering-pdbs-with-sql-plus.html#GUID-2E668740-E91D-4DB8-B545-666D3F2C63DE" title="当引用的PDB的侦听器的主机名发生更改时，必须运行ALTER PLUGGABLE DATABASE CONTAINERS HOST语句以重置引用的PDB的主机名，以便其代理PDB继续正常运行。">改变参考PDB的监听器主机名</a> ”</span></p>
                                 </li>
                                 <li>
                                    <p><a href="../sqlrf/CREATE-PLUGGABLE-DATABASE.html#SQLRF-GUID-F2DBA8DD-EEA8-4BB7-A07F-78DC04DB1FFC" target="_blank"><span><cite>Oracle Database SQL语言参考，</cite></span></a>以了解有关<code class="codeph">PORT</code>子句的更多信息</p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="example" -->
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>父主题：</strong> <a href="creating-a-proxy-pdb.html#GUID-DD9D3AD6-BB00-43B1-9C16-94E670777EAB" title="仅当代理PDB将引用PDB时，PDB的主机名和端口号设置才很重要。">代理PDB和监听器</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-4453DF44-5D16-4581-9CBF-0C7BCA85DE82" name="GUID-4453DF44-5D16-4581-9CBF-0C7BCA85DE82"></a><h3 id="MULTI-GUID-4453DF44-5D16-4581-9CBF-0C7BCA85DE82" class="sect3"><span class="enumeration_section">10.2</span>创建代理PDB</h3>
               <div>
                  <p>通过引用不同CDB中的PDB来创建代理PDB。</p>
                  <div class="section"></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4453DF44-5D16-4581-9CBF-0C7BCA85DE82__GUID-B9053E64-B08F-49CC-85EA-2568326B1CE0">先决条件</p>
                     <p>必须满足以下先决条件：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>完成<span class="q">“ <a href="overview-of-pdb-creation.html#GUID-B26D56E1-B958-444F-864C-8AFDFF1566A6" title="Before creating a PDB, you must meet certain prerequisites.">PDB创建的一般先决</a></span>条件”中描述的先决<span class="q"><a href="overview-of-pdb-creation.html#GUID-B26D56E1-B958-444F-864C-8AFDFF1566A6" title="在创建PDB之前，您必须满足某些先决条件。">条件</a></span> 。
                           </p>
                        </li>
                        <li>
                           <p>当前用户必须在正在创建代理PDB的CDB的根目录中具有<code class="codeph">CREATE PLUGGABLE DATABASE</code>系统特权。
                           </p>
                        </li>
                        <li>
                           <p>包含引用的PDB的CDB必须处于本地撤消模式。</p>
                        </li>
                        <li>
                           <p>包含引用的PDB的CDB必须处于<code class="codeph">ARCHIVELOG</code>模式。
                           </p>
                        </li>
                        <li>
                           <p>创建代理PDB时，引用的PDB必须处于打开的读/写模式。创建代理PDB后，可以更改引用的PDB的打开模式。</p>
                        </li>
                        <li>
                           <p>数据库链接必须启用从创建代理PDB的CDB的根目录到引用的PDB的位置的连接。数据库链接可以连接到远程CDB的根目录或远程PDB。</p>
                        </li>
                        <li>
                           <p>如果数据库链接连接到包含引用的PDB的远程CDB中的根，则数据库链接所连接的用户必须是普通用户。</p>
                        </li>
                        <li>
                           <p>如果数据库链接连接到引用的PDB，则数据库链接在引用的PDB中连接的用户必须具有<code class="codeph">CREATE PLUGGABLE DATABASE</code>系统特权。
                           </p>
                        </li>
                        <li>
                           <div class="p">如果要在应用程序容器中创建代理PDB，则以下先决条件适用：<ul style="list-style-type:disc">
                                 <li>
                                    <p>引用的PDB必须是应用程序根目录或应用程序容器中的应用程序PDB。</p>
                                 </li>
                                 <li>
                                    <p>代理PDB的应用程序容器的应用程序名称和版本必须与引用的PDB的应用程序名称和版本匹配。</p>
                                 </li>
                                 <li>
                                    <p>在应用程序容器中创建代理PDB时，数据库链接必须启用从创建代理PDB的应用程序容器的根目录到引用的PDB的位置的连接。数据库链接可以连接到远程应用程序容器的根目录或远程应用程序PDB。</p>
                                 </li>
                                 <li>
                                    <p>如果数据库链接连接到包含引用的PDB的远程应用程序容器中的根，则数据库链接所连接的用户必须是应用程序公共用户。</p>
                                 </li>
                                 <li>
                                    <p>如果数据库链接连接到引用的应用程序PDB，则数据库链接在引用的应用程序PDB中连接的用户必须具有<code class="codeph">CREATE PLUGGABLE DATABASE</code>系统特权。
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <div class="infoboxnote" id="GUID-4453DF44-5D16-4581-9CBF-0C7BCA85DE82__GUID-702EE7DE-BC4F-4D39-BCDF-AA74D86B3891">
                              <p class="notep1">注意：</p>您可以在CDB根目录中创建基于应用程序容器中引用的PDB的代理PDB。
                           </div>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-4453DF44-5D16-4581-9CBF-0C7BCA85DE82__GUID-C4A3DE1C-CC50-46D7-9D92-4BFF8D01A49E">要创建代理PDB：</p>
                     <ol>
                        <li>
                           <p>在SQL * Plus中，确保当前容器是正在创建代理PDB的CDB根目录或应用程序根目录。</p>
                           <p>当前容器是CDB根时，将在CDB中创建代理PDB。当前容器是应用程序根时，将在应用程序容器中创建代理PDB。</p>
                        </li>
                        <li>
                           <p>运行<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句。指定<code class="codeph">AS PROXY</code>子句，并在<code class="codeph">FROM</code>子句中使用数据库链接名称指定引用的PDB。在需要时指定其他子句。
                           </p> 
                           <p>创建代理PDB后，它处于装入模式，其状态为<code class="codeph">NEW</code> 。您可以通过查询<code class="codeph">V$PDBS</code>视图中的<code class="codeph">OPEN_MODE</code>列来查看PDB的打开模式。您可以通过查询<code class="codeph">CDB_PDBS</code>或<code class="codeph">DBA_PDBS</code>视图的<code class="codeph">STATUS</code>列来查看PDB的<code class="codeph">STATUS</code> 。
                           </p>
                           <p>为PDB创建新的默认服务。该服务与PDB具有相同的名称，可用于访问PDB。必须正确配置Oracle Net Services才能使客户端访问此服务。</p>
                        </li>
                        <li>
                           <p>以读/写模式打开新PDB。</p>
                           <p>您必须在Oracle数据库的读/写模式下打开新的PDB，才能完成新PDB与CDB的集成。如果尝试以只读模式打开PDB，则会返回错误。在读/写模式下打开PDB后，其状态为<code class="codeph">NORMAL</code> 。</p>
                        </li>
                        <li>
                           <p>备份PDB。</p>
                           <p>除非备份PDB，否则无法恢复PDB。</p>
                           <p></p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnote" id="GUID-4453DF44-5D16-4581-9CBF-0C7BCA85DE82__GUID-A9FFF8B4-5144-40E0-B701-6D2154BAD23D">
                        <p class="notep1">注意：</p>
                        <p>如果在创建代理PDB期间返回错误，则正在创建的PDB可能处于<code class="codeph">UNUSABLE</code>状态。您可以通过查询<code class="codeph">CDB_PDBS</code>或<code class="codeph">DBA_PDBS</code>视图来检查PDB的状态，并通过检查警报日志了解有关PDB创建错误的更多信息。只能删除不可用的PDB，并且必须先删除它，然后才能创建与不可用的PDB同名的PDB。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-4453DF44-5D16-4581-9CBF-0C7BCA85DE82__CEGHIBHC">
                     <p class="titleinexample">示例10-3创建远程代理PDB</p>
                     <p>在此示例中，新PDB所属的根取决于运行<code class="codeph">CREATE PLUGGABLE DATABASE</code>语句时的当前容器：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>当前容器是CDB根时，将在CDB根目录中创建新的PDB。</p>
                        </li>
                        <li>
                           <p>当前容器是应用程序容器中的应用程序根时，新PDB将在应用程序根目录中创建为应用程序PDB。</p>
                        </li>
                     </ul>
                     <p>此示例根据不同因素创建名为<code class="codeph">pdb1</code>的远程代理PDB。此示例假定以下因素：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>引用的PDB的CDB的数据库链接名称是<code class="codeph">pdb1_link</code> 。
                           </p>
                        </li>
                        <li>
                           <p>不需要<code class="codeph">FILE_NAME_CONVERT</code>子句和<code class="codeph">CREATE_FILE_DEST</code>子句。
                           </p>
                           <p>已启用Oracle Managed Files，或者已设置<code class="codeph">PDB_FILE_NAME_CONVERT</code>初始化参数。<code class="codeph">SYSTEM</code>和<code class="codeph">SYSAUX</code>文件将根据Oracle Managed Files配置或初始化参数设置复制到新位置。
                           </p>
                        </li>
                     </ul>
                     <p>鉴于上述因素，以下语句创建<code class="codeph">pdb1</code>代理PDB：</p><pre class="pre codeblock"><code>从pdb1 @ pdb1_link创建可插入数据库pdb1 AS PROXY;</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-4453DF44-5D16-4581-9CBF-0C7BCA85DE82__GUID-17FAFD16-C917-4786-B2C3-E07848EDE891">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-8F8B2FF8-7FA7-40CD-8AA5-ACABCD3964D8" title="您可以将CDB配置为在每个容器中使用本地撤消，或者对整个CDB使用共享撤消。">关于CDB撤消模式</a> ”</span></li>
                        <li>
                           <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="您可以使用SQL * Plus访问CDB中的根或PDB。">关于CDB中的容器访问</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="administering-a-cdb-with-sql-plus.html#GUID-322C5C03-4C48-40CD-8230-0BA5F16BF96B" title="您可以使用ALTER PLUGGABLE DATABASE SQL语句或SQL * Plus STARTUP命令修改PDB的打开模式。">修改一个或多个PDB的开放模式</a> ”</span></p>
                        </li>
                        <li>
                           <p>有关备份PDB的信息，请参见<a href="../bradv/backing-up-database.html#BRADV428" target="_blank"><span class="italic">“Oracle数据库备份和恢复用户指南”</span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="creating-a-proxy-pdb.html#GUID-7C23D560-5AD5-4AF2-93B4-F4FDC6DE768C" title="您可以通过在远程CDB中引用PDB来创建PDB作为代理PDB。">将PDB创建为代理PDB</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>